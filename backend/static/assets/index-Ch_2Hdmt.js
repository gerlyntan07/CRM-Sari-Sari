function jJ(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function vi(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var UC={exports:{}},Sh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b3;function CJ(){if(b3)return Sh;b3=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,s,i){var o=null;if(i!==void 0&&(o=""+i),s.key!==void 0&&(o=""+s.key),"key"in s){i={};for(var l in s)l!=="key"&&(i[l]=s[l])}else i=s;return s=i.ref,{$$typeof:e,type:r,key:o,ref:s!==void 0?s:null,props:i}}return Sh.Fragment=t,Sh.jsx=n,Sh.jsxs=n,Sh}var v3;function SJ(){return v3||(v3=1,UC.exports=CJ()),UC.exports}var a=SJ(),FC={exports:{}},Ct={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w3;function _J(){if(w3)return Ct;w3=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),h=Symbol.for("react.activity"),p=Symbol.iterator;function b(J){return J===null||typeof J!="object"?null:(J=p&&J[p]||J["@@iterator"],typeof J=="function"?J:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,w={};function j(J,ne,pe){this.props=J,this.context=ne,this.refs=w,this.updater=pe||v}j.prototype.isReactComponent={},j.prototype.setState=function(J,ne){if(typeof J!="object"&&typeof J!="function"&&J!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,J,ne,"setState")},j.prototype.forceUpdate=function(J){this.updater.enqueueForceUpdate(this,J,"forceUpdate")};function C(){}C.prototype=j.prototype;function S(J,ne,pe){this.props=J,this.context=ne,this.refs=w,this.updater=pe||v}var _=S.prototype=new C;_.constructor=S,x(_,j.prototype),_.isPureReactComponent=!0;var E=Array.isArray;function A(){}var T={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function U(J,ne,pe){var we=pe.ref;return{$$typeof:e,type:J,key:ne,ref:we!==void 0?we:null,props:pe}}function W(J,ne){return U(J.type,ne,J.props)}function I(J){return typeof J=="object"&&J!==null&&J.$$typeof===e}function M(J){var ne={"=":"=0",":":"=2"};return"$"+J.replace(/[=:]/g,function(pe){return ne[pe]})}var H=/\/+/g;function q(J,ne){return typeof J=="object"&&J!==null&&J.key!=null?M(""+J.key):ne.toString(36)}function ae(J){switch(J.status){case"fulfilled":return J.value;case"rejected":throw J.reason;default:switch(typeof J.status=="string"?J.then(A,A):(J.status="pending",J.then(function(ne){J.status==="pending"&&(J.status="fulfilled",J.value=ne)},function(ne){J.status==="pending"&&(J.status="rejected",J.reason=ne)})),J.status){case"fulfilled":return J.value;case"rejected":throw J.reason}}throw J}function K(J,ne,pe,we,ye){var Te=typeof J;(Te==="undefined"||Te==="boolean")&&(J=null);var Ae=!1;if(J===null)Ae=!0;else switch(Te){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(J.$$typeof){case e:case t:Ae=!0;break;case m:return Ae=J._init,K(Ae(J._payload),ne,pe,we,ye)}}if(Ae)return ye=ye(J),Ae=we===""?"."+q(J,0):we,E(ye)?(pe="",Ae!=null&&(pe=Ae.replace(H,"$&/")+"/"),K(ye,ne,pe,"",function(Ne){return Ne})):ye!=null&&(I(ye)&&(ye=W(ye,pe+(ye.key==null||J&&J.key===ye.key?"":(""+ye.key).replace(H,"$&/")+"/")+Ae)),ne.push(ye)),1;Ae=0;var Pe=we===""?".":we+":";if(E(J))for(var $=0;$<J.length;$++)we=J[$],Te=Pe+q(we,$),Ae+=K(we,ne,pe,Te,ye);else if($=b(J),typeof $=="function")for(J=$.call(J),$=0;!(we=J.next()).done;)we=we.value,Te=Pe+q(we,$++),Ae+=K(we,ne,pe,Te,ye);else if(Te==="object"){if(typeof J.then=="function")return K(ae(J),ne,pe,we,ye);throw ne=String(J),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(J).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function B(J,ne,pe){if(J==null)return J;var we=[],ye=0;return K(J,we,"","",function(Te){return ne.call(pe,Te,ye++)}),we}function X(J){if(J._status===-1){var ne=J._result;ne=ne(),ne.then(function(pe){(J._status===0||J._status===-1)&&(J._status=1,J._result=pe)},function(pe){(J._status===0||J._status===-1)&&(J._status=2,J._result=pe)}),J._status===-1&&(J._status=0,J._result=ne)}if(J._status===1)return J._result.default;throw J._result}var le=typeof reportError=="function"?reportError:function(J){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof J=="object"&&J!==null&&typeof J.message=="string"?String(J.message):String(J),error:J});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",J);return}console.error(J)},ue={map:B,forEach:function(J,ne,pe){B(J,function(){ne.apply(this,arguments)},pe)},count:function(J){var ne=0;return B(J,function(){ne++}),ne},toArray:function(J){return B(J,function(ne){return ne})||[]},only:function(J){if(!I(J))throw Error("React.Children.only expected to receive a single React element child.");return J}};return Ct.Activity=h,Ct.Children=ue,Ct.Component=j,Ct.Fragment=n,Ct.Profiler=s,Ct.PureComponent=S,Ct.StrictMode=r,Ct.Suspense=c,Ct.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,Ct.__COMPILER_RUNTIME={__proto__:null,c:function(J){return T.H.useMemoCache(J)}},Ct.cache=function(J){return function(){return J.apply(null,arguments)}},Ct.cacheSignal=function(){return null},Ct.cloneElement=function(J,ne,pe){if(J==null)throw Error("The argument must be a React element, but you passed "+J+".");var we=x({},J.props),ye=J.key;if(ne!=null)for(Te in ne.key!==void 0&&(ye=""+ne.key),ne)!R.call(ne,Te)||Te==="key"||Te==="__self"||Te==="__source"||Te==="ref"&&ne.ref===void 0||(we[Te]=ne[Te]);var Te=arguments.length-2;if(Te===1)we.children=pe;else if(1<Te){for(var Ae=Array(Te),Pe=0;Pe<Te;Pe++)Ae[Pe]=arguments[Pe+2];we.children=Ae}return U(J.type,ye,we)},Ct.createContext=function(J){return J={$$typeof:o,_currentValue:J,_currentValue2:J,_threadCount:0,Provider:null,Consumer:null},J.Provider=J,J.Consumer={$$typeof:i,_context:J},J},Ct.createElement=function(J,ne,pe){var we,ye={},Te=null;if(ne!=null)for(we in ne.key!==void 0&&(Te=""+ne.key),ne)R.call(ne,we)&&we!=="key"&&we!=="__self"&&we!=="__source"&&(ye[we]=ne[we]);var Ae=arguments.length-2;if(Ae===1)ye.children=pe;else if(1<Ae){for(var Pe=Array(Ae),$=0;$<Ae;$++)Pe[$]=arguments[$+2];ye.children=Pe}if(J&&J.defaultProps)for(we in Ae=J.defaultProps,Ae)ye[we]===void 0&&(ye[we]=Ae[we]);return U(J,Te,ye)},Ct.createRef=function(){return{current:null}},Ct.forwardRef=function(J){return{$$typeof:l,render:J}},Ct.isValidElement=I,Ct.lazy=function(J){return{$$typeof:m,_payload:{_status:-1,_result:J},_init:X}},Ct.memo=function(J,ne){return{$$typeof:d,type:J,compare:ne===void 0?null:ne}},Ct.startTransition=function(J){var ne=T.T,pe={};T.T=pe;try{var we=J(),ye=T.S;ye!==null&&ye(pe,we),typeof we=="object"&&we!==null&&typeof we.then=="function"&&we.then(A,le)}catch(Te){le(Te)}finally{ne!==null&&pe.types!==null&&(ne.types=pe.types),T.T=ne}},Ct.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},Ct.use=function(J){return T.H.use(J)},Ct.useActionState=function(J,ne,pe){return T.H.useActionState(J,ne,pe)},Ct.useCallback=function(J,ne){return T.H.useCallback(J,ne)},Ct.useContext=function(J){return T.H.useContext(J)},Ct.useDebugValue=function(){},Ct.useDeferredValue=function(J,ne){return T.H.useDeferredValue(J,ne)},Ct.useEffect=function(J,ne){return T.H.useEffect(J,ne)},Ct.useEffectEvent=function(J){return T.H.useEffectEvent(J)},Ct.useId=function(){return T.H.useId()},Ct.useImperativeHandle=function(J,ne,pe){return T.H.useImperativeHandle(J,ne,pe)},Ct.useInsertionEffect=function(J,ne){return T.H.useInsertionEffect(J,ne)},Ct.useLayoutEffect=function(J,ne){return T.H.useLayoutEffect(J,ne)},Ct.useMemo=function(J,ne){return T.H.useMemo(J,ne)},Ct.useOptimistic=function(J,ne){return T.H.useOptimistic(J,ne)},Ct.useReducer=function(J,ne,pe){return T.H.useReducer(J,ne,pe)},Ct.useRef=function(J){return T.H.useRef(J)},Ct.useState=function(J){return T.H.useState(J)},Ct.useSyncExternalStore=function(J,ne,pe){return T.H.useSyncExternalStore(J,ne,pe)},Ct.useTransition=function(){return T.H.useTransition()},Ct.version="19.2.0",Ct}var N3;function hf(){return N3||(N3=1,FC.exports=_J()),FC.exports}var g=hf();const nt=vi(g),Fd=jJ({__proto__:null,default:nt},[g]);var BC={exports:{}},_h={},HC={exports:{}},GC={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j3;function AJ(){return j3||(j3=1,(function(e){function t(K,B){var X=K.length;K.push(B);e:for(;0<X;){var le=X-1>>>1,ue=K[le];if(0<s(ue,B))K[le]=B,K[X]=ue,X=le;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var B=K[0],X=K.pop();if(X!==B){K[0]=X;e:for(var le=0,ue=K.length,J=ue>>>1;le<J;){var ne=2*(le+1)-1,pe=K[ne],we=ne+1,ye=K[we];if(0>s(pe,X))we<ue&&0>s(ye,pe)?(K[le]=ye,K[we]=X,le=we):(K[le]=pe,K[ne]=X,le=ne);else if(we<ue&&0>s(ye,X))K[le]=ye,K[we]=X,le=we;else break e}}return B}function s(K,B){var X=K.sortIndex-B.sortIndex;return X!==0?X:K.id-B.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],m=1,h=null,p=3,b=!1,v=!1,x=!1,w=!1,j=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function _(K){for(var B=n(d);B!==null;){if(B.callback===null)r(d);else if(B.startTime<=K)r(d),B.sortIndex=B.expirationTime,t(c,B);else break;B=n(d)}}function E(K){if(x=!1,_(K),!v)if(n(c)!==null)v=!0,A||(A=!0,M());else{var B=n(d);B!==null&&ae(E,B.startTime-K)}}var A=!1,T=-1,R=5,U=-1;function W(){return w?!0:!(e.unstable_now()-U<R)}function I(){if(w=!1,A){var K=e.unstable_now();U=K;var B=!0;try{e:{v=!1,x&&(x=!1,C(T),T=-1),b=!0;var X=p;try{t:{for(_(K),h=n(c);h!==null&&!(h.expirationTime>K&&W());){var le=h.callback;if(typeof le=="function"){h.callback=null,p=h.priorityLevel;var ue=le(h.expirationTime<=K);if(K=e.unstable_now(),typeof ue=="function"){h.callback=ue,_(K),B=!0;break t}h===n(c)&&r(c),_(K)}else r(c);h=n(c)}if(h!==null)B=!0;else{var J=n(d);J!==null&&ae(E,J.startTime-K),B=!1}}break e}finally{h=null,p=X,b=!1}B=void 0}}finally{B?M():A=!1}}}var M;if(typeof S=="function")M=function(){S(I)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,q=H.port2;H.port1.onmessage=I,M=function(){q.postMessage(null)}}else M=function(){j(I,0)};function ae(K,B){T=j(function(){K(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(K){K.callback=null},e.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<K?Math.floor(1e3/K):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(K){switch(p){case 1:case 2:case 3:var B=3;break;default:B=p}var X=p;p=B;try{return K()}finally{p=X}},e.unstable_requestPaint=function(){w=!0},e.unstable_runWithPriority=function(K,B){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var X=p;p=K;try{return B()}finally{p=X}},e.unstable_scheduleCallback=function(K,B,X){var le=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?le+X:le):X=le,K){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=X+ue,K={id:m++,callback:B,priorityLevel:K,startTime:X,expirationTime:ue,sortIndex:-1},X>le?(K.sortIndex=X,t(d,K),n(c)===null&&K===n(d)&&(x?(C(T),T=-1):x=!0,ae(E,X-le))):(K.sortIndex=ue,t(c,K),v||b||(v=!0,A||(A=!0,M()))),K},e.unstable_shouldYield=W,e.unstable_wrapCallback=function(K){var B=p;return function(){var X=p;p=B;try{return K.apply(this,arguments)}finally{p=X}}}})(GC)),GC}var C3;function EJ(){return C3||(C3=1,HC.exports=AJ()),HC.exports}var VC={exports:{}},nr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S3;function TJ(){if(S3)return nr;S3=1;var e=hf();function t(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function i(c,d,m){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:h==null?null:""+h,children:c,containerInfo:d,implementation:m}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,d){if(c==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return nr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,nr.createPortal=function(c,d){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return i(c,d,null,m)},nr.flushSync=function(c){var d=o.T,m=r.p;try{if(o.T=null,r.p=2,c)return c()}finally{o.T=d,r.p=m,r.d.f()}},nr.preconnect=function(c,d){typeof c=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(c,d))},nr.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},nr.preinit=function(c,d){if(typeof c=="string"&&d&&typeof d.as=="string"){var m=d.as,h=l(m,d.crossOrigin),p=typeof d.integrity=="string"?d.integrity:void 0,b=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;m==="style"?r.d.S(c,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:h,integrity:p,fetchPriority:b}):m==="script"&&r.d.X(c,{crossOrigin:h,integrity:p,fetchPriority:b,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},nr.preinitModule=function(c,d){if(typeof c=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var m=l(d.as,d.crossOrigin);r.d.M(c,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(c)},nr.preload=function(c,d){if(typeof c=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var m=d.as,h=l(m,d.crossOrigin);r.d.L(c,m,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},nr.preloadModule=function(c,d){if(typeof c=="string")if(d){var m=l(d.as,d.crossOrigin);r.d.m(c,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(c)},nr.requestFormReset=function(c){r.d.r(c)},nr.unstable_batchedUpdates=function(c,d){return c(d)},nr.useFormState=function(c,d,m){return o.H.useFormState(c,d,m)},nr.useFormStatus=function(){return o.H.useHostTransitionStatus()},nr.version="19.2.0",nr}var _3;function QF(){if(_3)return VC.exports;_3=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),VC.exports=TJ(),VC.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A3;function LJ(){if(A3)return _h;A3=1;var e=EJ(),t=hf(),n=QF();function r(u){var f="https://react.dev/errors/"+u;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)f+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function i(u){var f=u,y=u;if(u.alternate)for(;f.return;)f=f.return;else{u=f;do f=u,(f.flags&4098)!==0&&(y=f.return),u=f.return;while(u)}return f.tag===3?y:null}function o(u){if(u.tag===13){var f=u.memoizedState;if(f===null&&(u=u.alternate,u!==null&&(f=u.memoizedState)),f!==null)return f.dehydrated}return null}function l(u){if(u.tag===31){var f=u.memoizedState;if(f===null&&(u=u.alternate,u!==null&&(f=u.memoizedState)),f!==null)return f.dehydrated}return null}function c(u){if(i(u)!==u)throw Error(r(188))}function d(u){var f=u.alternate;if(!f){if(f=i(u),f===null)throw Error(r(188));return f!==u?null:u}for(var y=u,N=f;;){var L=y.return;if(L===null)break;var D=L.alternate;if(D===null){if(N=L.return,N!==null){y=N;continue}break}if(L.child===D.child){for(D=L.child;D;){if(D===y)return c(L),u;if(D===N)return c(L),f;D=D.sibling}throw Error(r(188))}if(y.return!==N.return)y=L,N=D;else{for(var Y=!1,me=L.child;me;){if(me===y){Y=!0,y=L,N=D;break}if(me===N){Y=!0,N=L,y=D;break}me=me.sibling}if(!Y){for(me=D.child;me;){if(me===y){Y=!0,y=D,N=L;break}if(me===N){Y=!0,N=D,y=L;break}me=me.sibling}if(!Y)throw Error(r(189))}}if(y.alternate!==N)throw Error(r(190))}if(y.tag!==3)throw Error(r(188));return y.stateNode.current===y?u:f}function m(u){var f=u.tag;if(f===5||f===26||f===27||f===6)return u;for(u=u.child;u!==null;){if(f=m(u),f!==null)return f;u=u.sibling}return null}var h=Object.assign,p=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),S=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),W=Symbol.for("react.memo_cache_sentinel"),I=Symbol.iterator;function M(u){return u===null||typeof u!="object"?null:(u=I&&u[I]||u["@@iterator"],typeof u=="function"?u:null)}var H=Symbol.for("react.client.reference");function q(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===H?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case x:return"Fragment";case j:return"Profiler";case w:return"StrictMode";case E:return"Suspense";case A:return"SuspenseList";case U:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case v:return"Portal";case S:return u.displayName||"Context";case C:return(u._context.displayName||"Context")+".Consumer";case _:var f=u.render;return u=u.displayName,u||(u=f.displayName||f.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case T:return f=u.displayName||null,f!==null?f:q(u.type)||"Memo";case R:f=u._payload,u=u._init;try{return q(u(f))}catch{}}return null}var ae=Array.isArray,K=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},le=[],ue=-1;function J(u){return{current:u}}function ne(u){0>ue||(u.current=le[ue],le[ue]=null,ue--)}function pe(u,f){ue++,le[ue]=u.current,u.current=f}var we=J(null),ye=J(null),Te=J(null),Ae=J(null);function Pe(u,f){switch(pe(Te,f),pe(ye,u),pe(we,null),f.nodeType){case 9:case 11:u=(u=f.documentElement)&&(u=u.namespaceURI)?BM(u):0;break;default:if(u=f.tagName,f=f.namespaceURI)f=BM(f),u=HM(f,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}ne(we),pe(we,u)}function $(){ne(we),ne(ye),ne(Te)}function Ne(u){u.memoizedState!==null&&pe(Ae,u);var f=we.current,y=HM(f,u.type);f!==y&&(pe(ye,u),pe(we,y))}function fe(u){ye.current===u&&(ne(we),ne(ye)),Ae.current===u&&(ne(Ae),wh._currentValue=X)}var O,ce;function de(u){if(O===void 0)try{throw Error()}catch(y){var f=y.stack.trim().match(/\n( *(at )?)/);O=f&&f[1]||"",ce=-1<y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+O+u+ce}var Ce=!1;function Ee(u,f){if(!u||Ce)return"";Ce=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var N={DetermineComponentFrameRoot:function(){try{if(f){var Xe=function(){throw Error()};if(Object.defineProperty(Xe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Xe,[])}catch(Be){var Ue=Be}Reflect.construct(u,[],Xe)}else{try{Xe.call()}catch(Be){Ue=Be}u.call(Xe.prototype)}}else{try{throw Error()}catch(Be){Ue=Be}(Xe=u())&&typeof Xe.catch=="function"&&Xe.catch(function(){})}}catch(Be){if(Be&&Ue&&typeof Be.stack=="string")return[Be.stack,Ue.stack]}return[null,null]}};N.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var L=Object.getOwnPropertyDescriptor(N.DetermineComponentFrameRoot,"name");L&&L.configurable&&Object.defineProperty(N.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var D=N.DetermineComponentFrameRoot(),Y=D[0],me=D[1];if(Y&&me){var _e=Y.split(`
`),Re=me.split(`
`);for(L=N=0;N<_e.length&&!_e[N].includes("DetermineComponentFrameRoot");)N++;for(;L<Re.length&&!Re[L].includes("DetermineComponentFrameRoot");)L++;if(N===_e.length||L===Re.length)for(N=_e.length-1,L=Re.length-1;1<=N&&0<=L&&_e[N]!==Re[L];)L--;for(;1<=N&&0<=L;N--,L--)if(_e[N]!==Re[L]){if(N!==1||L!==1)do if(N--,L--,0>L||_e[N]!==Re[L]){var qe=`
`+_e[N].replace(" at new "," at ");return u.displayName&&qe.includes("<anonymous>")&&(qe=qe.replace("<anonymous>",u.displayName)),qe}while(1<=N&&0<=L);break}}}finally{Ce=!1,Error.prepareStackTrace=y}return(y=u?u.displayName||u.name:"")?de(y):""}function Ge(u,f){switch(u.tag){case 26:case 27:case 5:return de(u.type);case 16:return de("Lazy");case 13:return u.child!==f&&f!==null?de("Suspense Fallback"):de("Suspense");case 19:return de("SuspenseList");case 0:case 15:return Ee(u.type,!1);case 11:return Ee(u.type.render,!1);case 1:return Ee(u.type,!0);case 31:return de("Activity");default:return""}}function Je(u){try{var f="",y=null;do f+=Ge(u,y),y=u,u=u.return;while(u);return f}catch(N){return`
Error generating stack: `+N.message+`
`+N.stack}}var We=Object.prototype.hasOwnProperty,Ke=e.unstable_scheduleCallback,He=e.unstable_cancelCallback,Se=e.unstable_shouldYield,Ve=e.unstable_requestPaint,k=e.unstable_now,Z=e.unstable_getCurrentPriorityLevel,re=e.unstable_ImmediatePriority,be=e.unstable_UserBlockingPriority,z=e.unstable_NormalPriority,ee=e.unstable_LowPriority,ie=e.unstable_IdlePriority,V=e.log,F=e.unstable_setDisableYieldValue,se=null,xe=null;function ge(u){if(typeof V=="function"&&F(u),xe&&typeof xe.setStrictMode=="function")try{xe.setStrictMode(se,u)}catch{}}var Me=Math.clz32?Math.clz32:gt,De=Math.log,et=Math.LN2;function gt(u){return u>>>=0,u===0?32:31-(De(u)/et|0)|0}var Nt=256,Pt=262144,dn=4194304;function jn(u){var f=u&42;if(f!==0)return f;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return u&261888;case 262144:case 524288:case 1048576:case 2097152:return u&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function oa(u,f,y){var N=u.pendingLanes;if(N===0)return 0;var L=0,D=u.suspendedLanes,Y=u.pingedLanes;u=u.warmLanes;var me=N&134217727;return me!==0?(N=me&~D,N!==0?L=jn(N):(Y&=me,Y!==0?L=jn(Y):y||(y=me&~u,y!==0&&(L=jn(y))))):(me=N&~D,me!==0?L=jn(me):Y!==0?L=jn(Y):y||(y=N&~u,y!==0&&(L=jn(y)))),L===0?0:f!==0&&f!==L&&(f&D)===0&&(D=L&-L,y=f&-f,D>=y||D===32&&(y&4194048)!==0)?f:L}function Jn(u,f){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&f)===0}function P(u,f){switch(u){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function he(){var u=dn;return dn<<=1,(dn&62914560)===0&&(dn=4194304),u}function G(u){for(var f=[],y=0;31>y;y++)f.push(u);return f}function te(u,f){u.pendingLanes|=f,f!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function ve(u,f,y,N,L,D){var Y=u.pendingLanes;u.pendingLanes=y,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=y,u.entangledLanes&=y,u.errorRecoveryDisabledLanes&=y,u.shellSuspendCounter=0;var me=u.entanglements,_e=u.expirationTimes,Re=u.hiddenUpdates;for(y=Y&~y;0<y;){var qe=31-Me(y),Xe=1<<qe;me[qe]=0,_e[qe]=-1;var Ue=Re[qe];if(Ue!==null)for(Re[qe]=null,qe=0;qe<Ue.length;qe++){var Be=Ue[qe];Be!==null&&(Be.lane&=-536870913)}y&=~Xe}N!==0&&je(u,N,0),D!==0&&L===0&&u.tag!==0&&(u.suspendedLanes|=D&~(Y&~f))}function je(u,f,y){u.pendingLanes|=f,u.suspendedLanes&=~f;var N=31-Me(f);u.entangledLanes|=f,u.entanglements[N]=u.entanglements[N]|1073741824|y&261930}function Ie(u,f){var y=u.entangledLanes|=f;for(u=u.entanglements;y;){var N=31-Me(y),L=1<<N;L&f|u[N]&f&&(u[N]|=f),y&=~L}}function tt(u,f){var y=f&-f;return y=(y&42)!==0?1:vt(y),(y&(u.suspendedLanes|f))!==0?0:y}function vt(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function tn(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function un(){var u=B.p;return u!==0?u:(u=window.event,u===void 0?32:m3(u.type))}function Si(u,f){var y=B.p;try{return B.p=u,f()}finally{B.p=y}}var tr=Math.random().toString(36).slice(2),Ha="__reactFiber$"+tr,Sr="__reactProps$"+tr,ju="__reactContainer$"+tr,kj="__reactEvents$"+tr,mX="__reactListeners$"+tr,fX="__reactHandles$"+tr,TP="__reactResources$"+tr,If="__reactMarker$"+tr;function Pj(u){delete u[Ha],delete u[Sr],delete u[kj],delete u[mX],delete u[fX]}function Cu(u){var f=u[Ha];if(f)return f;for(var y=u.parentNode;y;){if(f=y[ju]||y[Ha]){if(y=f.alternate,f.child!==null||y!==null&&y.child!==null)for(u=QM(u);u!==null;){if(y=u[Ha])return y;u=QM(u)}return f}u=y,y=u.parentNode}return null}function Su(u){if(u=u[Ha]||u[ju]){var f=u.tag;if(f===5||f===6||f===13||f===31||f===26||f===27||f===3)return u}return null}function $f(u){var f=u.tag;if(f===5||f===26||f===27||f===6)return u.stateNode;throw Error(r(33))}function _u(u){var f=u[TP];return f||(f=u[TP]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function Da(u){u[If]=!0}var LP=new Set,kP={};function Oc(u,f){Au(u,f),Au(u+"Capture",f)}function Au(u,f){for(kP[u]=f,u=0;u<f.length;u++)LP.add(f[u])}var hX=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),PP={},DP={};function gX(u){return We.call(DP,u)?!0:We.call(PP,u)?!1:hX.test(u)?DP[u]=!0:(PP[u]=!0,!1)}function Yx(u,f,y){if(gX(f))if(y===null)u.removeAttribute(f);else{switch(typeof y){case"undefined":case"function":case"symbol":u.removeAttribute(f);return;case"boolean":var N=f.toLowerCase().slice(0,5);if(N!=="data-"&&N!=="aria-"){u.removeAttribute(f);return}}u.setAttribute(f,""+y)}}function Kx(u,f,y){if(y===null)u.removeAttribute(f);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(f);return}u.setAttribute(f,""+y)}}function lo(u,f,y,N){if(N===null)u.removeAttribute(y);else{switch(typeof N){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(y);return}u.setAttributeNS(f,y,""+N)}}function vs(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function OP(u){var f=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function pX(u,f,y){var N=Object.getOwnPropertyDescriptor(u.constructor.prototype,f);if(!u.hasOwnProperty(f)&&typeof N<"u"&&typeof N.get=="function"&&typeof N.set=="function"){var L=N.get,D=N.set;return Object.defineProperty(u,f,{configurable:!0,get:function(){return L.call(this)},set:function(Y){y=""+Y,D.call(this,Y)}}),Object.defineProperty(u,f,{enumerable:N.enumerable}),{getValue:function(){return y},setValue:function(Y){y=""+Y},stopTracking:function(){u._valueTracker=null,delete u[f]}}}}function Dj(u){if(!u._valueTracker){var f=OP(u)?"checked":"value";u._valueTracker=pX(u,f,""+u[f])}}function MP(u){if(!u)return!1;var f=u._valueTracker;if(!f)return!0;var y=f.getValue(),N="";return u&&(N=OP(u)?u.checked?"true":"false":u.value),u=N,u!==y?(f.setValue(u),!0):!1}function Qx(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var xX=/[\n"\\]/g;function ws(u){return u.replace(xX,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function Oj(u,f,y,N,L,D,Y,me){u.name="",Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"?u.type=Y:u.removeAttribute("type"),f!=null?Y==="number"?(f===0&&u.value===""||u.value!=f)&&(u.value=""+vs(f)):u.value!==""+vs(f)&&(u.value=""+vs(f)):Y!=="submit"&&Y!=="reset"||u.removeAttribute("value"),f!=null?Mj(u,Y,vs(f)):y!=null?Mj(u,Y,vs(y)):N!=null&&u.removeAttribute("value"),L==null&&D!=null&&(u.defaultChecked=!!D),L!=null&&(u.checked=L&&typeof L!="function"&&typeof L!="symbol"),me!=null&&typeof me!="function"&&typeof me!="symbol"&&typeof me!="boolean"?u.name=""+vs(me):u.removeAttribute("name")}function IP(u,f,y,N,L,D,Y,me){if(D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(u.type=D),f!=null||y!=null){if(!(D!=="submit"&&D!=="reset"||f!=null)){Dj(u);return}y=y!=null?""+vs(y):"",f=f!=null?""+vs(f):y,me||f===u.value||(u.value=f),u.defaultValue=f}N=N??L,N=typeof N!="function"&&typeof N!="symbol"&&!!N,u.checked=me?u.checked:!!N,u.defaultChecked=!!N,Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"&&(u.name=Y),Dj(u)}function Mj(u,f,y){f==="number"&&Qx(u.ownerDocument)===u||u.defaultValue===""+y||(u.defaultValue=""+y)}function Eu(u,f,y,N){if(u=u.options,f){f={};for(var L=0;L<y.length;L++)f["$"+y[L]]=!0;for(y=0;y<u.length;y++)L=f.hasOwnProperty("$"+u[y].value),u[y].selected!==L&&(u[y].selected=L),L&&N&&(u[y].defaultSelected=!0)}else{for(y=""+vs(y),f=null,L=0;L<u.length;L++){if(u[L].value===y){u[L].selected=!0,N&&(u[L].defaultSelected=!0);return}f!==null||u[L].disabled||(f=u[L])}f!==null&&(f.selected=!0)}}function $P(u,f,y){if(f!=null&&(f=""+vs(f),f!==u.value&&(u.value=f),y==null)){u.defaultValue!==f&&(u.defaultValue=f);return}u.defaultValue=y!=null?""+vs(y):""}function RP(u,f,y,N){if(f==null){if(N!=null){if(y!=null)throw Error(r(92));if(ae(N)){if(1<N.length)throw Error(r(93));N=N[0]}y=N}y==null&&(y=""),f=y}y=vs(f),u.defaultValue=y,N=u.textContent,N===y&&N!==""&&N!==null&&(u.value=N),Dj(u)}function Tu(u,f){if(f){var y=u.firstChild;if(y&&y===u.lastChild&&y.nodeType===3){y.nodeValue=f;return}}u.textContent=f}var yX=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zP(u,f,y){var N=f.indexOf("--")===0;y==null||typeof y=="boolean"||y===""?N?u.setProperty(f,""):f==="float"?u.cssFloat="":u[f]="":N?u.setProperty(f,y):typeof y!="number"||y===0||yX.has(f)?f==="float"?u.cssFloat=y:u[f]=(""+y).trim():u[f]=y+"px"}function UP(u,f,y){if(f!=null&&typeof f!="object")throw Error(r(62));if(u=u.style,y!=null){for(var N in y)!y.hasOwnProperty(N)||f!=null&&f.hasOwnProperty(N)||(N.indexOf("--")===0?u.setProperty(N,""):N==="float"?u.cssFloat="":u[N]="");for(var L in f)N=f[L],f.hasOwnProperty(L)&&y[L]!==N&&zP(u,L,N)}else for(var D in f)f.hasOwnProperty(D)&&zP(u,D,f[D])}function Ij(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bX=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vX=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Xx(u){return vX.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}function co(){}var $j=null;function Rj(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var Lu=null,ku=null;function FP(u){var f=Su(u);if(f&&(u=f.stateNode)){var y=u[Sr]||null;e:switch(u=f.stateNode,f.type){case"input":if(Oj(u,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name),f=y.name,y.type==="radio"&&f!=null){for(y=u;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll('input[name="'+ws(""+f)+'"][type="radio"]'),f=0;f<y.length;f++){var N=y[f];if(N!==u&&N.form===u.form){var L=N[Sr]||null;if(!L)throw Error(r(90));Oj(N,L.value,L.defaultValue,L.defaultValue,L.checked,L.defaultChecked,L.type,L.name)}}for(f=0;f<y.length;f++)N=y[f],N.form===u.form&&MP(N)}break e;case"textarea":$P(u,y.value,y.defaultValue);break e;case"select":f=y.value,f!=null&&Eu(u,!!y.multiple,f,!1)}}}var zj=!1;function BP(u,f,y){if(zj)return u(f,y);zj=!0;try{var N=u(f);return N}finally{if(zj=!1,(Lu!==null||ku!==null)&&(R0(),Lu&&(f=Lu,u=ku,ku=Lu=null,FP(f),u)))for(f=0;f<u.length;f++)FP(u[f])}}function Rf(u,f){var y=u.stateNode;if(y===null)return null;var N=y[Sr]||null;if(N===null)return null;y=N[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(N=!N.disabled)||(u=u.type,N=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!N;break e;default:u=!1}if(u)return null;if(y&&typeof y!="function")throw Error(r(231,f,typeof y));return y}var uo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Uj=!1;if(uo)try{var zf={};Object.defineProperty(zf,"passive",{get:function(){Uj=!0}}),window.addEventListener("test",zf,zf),window.removeEventListener("test",zf,zf)}catch{Uj=!1}var Sl=null,Fj=null,Zx=null;function HP(){if(Zx)return Zx;var u,f=Fj,y=f.length,N,L="value"in Sl?Sl.value:Sl.textContent,D=L.length;for(u=0;u<y&&f[u]===L[u];u++);var Y=y-u;for(N=1;N<=Y&&f[y-N]===L[D-N];N++);return Zx=L.slice(u,1<N?1-N:void 0)}function Jx(u){var f=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&f===13&&(u=13)):u=f,u===10&&(u=13),32<=u||u===13?u:0}function e0(){return!0}function GP(){return!1}function _r(u){function f(y,N,L,D,Y){this._reactName=y,this._targetInst=L,this.type=N,this.nativeEvent=D,this.target=Y,this.currentTarget=null;for(var me in u)u.hasOwnProperty(me)&&(y=u[me],this[me]=y?y(D):D[me]);return this.isDefaultPrevented=(D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1)?e0:GP,this.isPropagationStopped=GP,this}return h(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=e0)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=e0)},persist:function(){},isPersistent:e0}),f}var Mc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},t0=_r(Mc),Uf=h({},Mc,{view:0,detail:0}),wX=_r(Uf),Bj,Hj,Ff,n0=h({},Uf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vj,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==Ff&&(Ff&&u.type==="mousemove"?(Bj=u.screenX-Ff.screenX,Hj=u.screenY-Ff.screenY):Hj=Bj=0,Ff=u),Bj)},movementY:function(u){return"movementY"in u?u.movementY:Hj}}),VP=_r(n0),NX=h({},n0,{dataTransfer:0}),jX=_r(NX),CX=h({},Uf,{relatedTarget:0}),Gj=_r(CX),SX=h({},Mc,{animationName:0,elapsedTime:0,pseudoElement:0}),_X=_r(SX),AX=h({},Mc,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),EX=_r(AX),TX=h({},Mc,{data:0}),WP=_r(TX),LX={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kX={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},PX={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function DX(u){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(u):(u=PX[u])?!!f[u]:!1}function Vj(){return DX}var OX=h({},Uf,{key:function(u){if(u.key){var f=LX[u.key]||u.key;if(f!=="Unidentified")return f}return u.type==="keypress"?(u=Jx(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?kX[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vj,charCode:function(u){return u.type==="keypress"?Jx(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?Jx(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),MX=_r(OX),IX=h({},n0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qP=_r(IX),$X=h({},Uf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vj}),RX=_r($X),zX=h({},Mc,{propertyName:0,elapsedTime:0,pseudoElement:0}),UX=_r(zX),FX=h({},n0,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),BX=_r(FX),HX=h({},Mc,{newState:0,oldState:0}),GX=_r(HX),VX=[9,13,27,32],Wj=uo&&"CompositionEvent"in window,Bf=null;uo&&"documentMode"in document&&(Bf=document.documentMode);var WX=uo&&"TextEvent"in window&&!Bf,YP=uo&&(!Wj||Bf&&8<Bf&&11>=Bf),KP=" ",QP=!1;function XP(u,f){switch(u){case"keyup":return VX.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ZP(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var Pu=!1;function qX(u,f){switch(u){case"compositionend":return ZP(f);case"keypress":return f.which!==32?null:(QP=!0,KP);case"textInput":return u=f.data,u===KP&&QP?null:u;default:return null}}function YX(u,f){if(Pu)return u==="compositionend"||!Wj&&XP(u,f)?(u=HP(),Zx=Fj=Sl=null,Pu=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return YP&&f.locale!=="ko"?null:f.data;default:return null}}var KX={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function JP(u){var f=u&&u.nodeName&&u.nodeName.toLowerCase();return f==="input"?!!KX[u.type]:f==="textarea"}function eD(u,f,y,N){Lu?ku?ku.push(N):ku=[N]:Lu=N,f=V0(f,"onChange"),0<f.length&&(y=new t0("onChange","change",null,y,N),u.push({event:y,listeners:f}))}var Hf=null,Gf=null;function QX(u){IM(u,0)}function a0(u){var f=$f(u);if(MP(f))return u}function tD(u,f){if(u==="change")return f}var nD=!1;if(uo){var qj;if(uo){var Yj="oninput"in document;if(!Yj){var aD=document.createElement("div");aD.setAttribute("oninput","return;"),Yj=typeof aD.oninput=="function"}qj=Yj}else qj=!1;nD=qj&&(!document.documentMode||9<document.documentMode)}function rD(){Hf&&(Hf.detachEvent("onpropertychange",sD),Gf=Hf=null)}function sD(u){if(u.propertyName==="value"&&a0(Gf)){var f=[];eD(f,Gf,u,Rj(u)),BP(QX,f)}}function XX(u,f,y){u==="focusin"?(rD(),Hf=f,Gf=y,Hf.attachEvent("onpropertychange",sD)):u==="focusout"&&rD()}function ZX(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return a0(Gf)}function JX(u,f){if(u==="click")return a0(f)}function eZ(u,f){if(u==="input"||u==="change")return a0(f)}function tZ(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var Qr=typeof Object.is=="function"?Object.is:tZ;function Vf(u,f){if(Qr(u,f))return!0;if(typeof u!="object"||u===null||typeof f!="object"||f===null)return!1;var y=Object.keys(u),N=Object.keys(f);if(y.length!==N.length)return!1;for(N=0;N<y.length;N++){var L=y[N];if(!We.call(f,L)||!Qr(u[L],f[L]))return!1}return!0}function iD(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function oD(u,f){var y=iD(u);u=0;for(var N;y;){if(y.nodeType===3){if(N=u+y.textContent.length,u<=f&&N>=f)return{node:y,offset:f-u};u=N}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=iD(y)}}function lD(u,f){return u&&f?u===f?!0:u&&u.nodeType===3?!1:f&&f.nodeType===3?lD(u,f.parentNode):"contains"in u?u.contains(f):u.compareDocumentPosition?!!(u.compareDocumentPosition(f)&16):!1:!1}function cD(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var f=Qx(u.document);f instanceof u.HTMLIFrameElement;){try{var y=typeof f.contentWindow.location.href=="string"}catch{y=!1}if(y)u=f.contentWindow;else break;f=Qx(u.document)}return f}function Kj(u){var f=u&&u.nodeName&&u.nodeName.toLowerCase();return f&&(f==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||f==="textarea"||u.contentEditable==="true")}var nZ=uo&&"documentMode"in document&&11>=document.documentMode,Du=null,Qj=null,Wf=null,Xj=!1;function dD(u,f,y){var N=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;Xj||Du==null||Du!==Qx(N)||(N=Du,"selectionStart"in N&&Kj(N)?N={start:N.selectionStart,end:N.selectionEnd}:(N=(N.ownerDocument&&N.ownerDocument.defaultView||window).getSelection(),N={anchorNode:N.anchorNode,anchorOffset:N.anchorOffset,focusNode:N.focusNode,focusOffset:N.focusOffset}),Wf&&Vf(Wf,N)||(Wf=N,N=V0(Qj,"onSelect"),0<N.length&&(f=new t0("onSelect","select",null,f,y),u.push({event:f,listeners:N}),f.target=Du)))}function Ic(u,f){var y={};return y[u.toLowerCase()]=f.toLowerCase(),y["Webkit"+u]="webkit"+f,y["Moz"+u]="moz"+f,y}var Ou={animationend:Ic("Animation","AnimationEnd"),animationiteration:Ic("Animation","AnimationIteration"),animationstart:Ic("Animation","AnimationStart"),transitionrun:Ic("Transition","TransitionRun"),transitionstart:Ic("Transition","TransitionStart"),transitioncancel:Ic("Transition","TransitionCancel"),transitionend:Ic("Transition","TransitionEnd")},Zj={},uD={};uo&&(uD=document.createElement("div").style,"AnimationEvent"in window||(delete Ou.animationend.animation,delete Ou.animationiteration.animation,delete Ou.animationstart.animation),"TransitionEvent"in window||delete Ou.transitionend.transition);function $c(u){if(Zj[u])return Zj[u];if(!Ou[u])return u;var f=Ou[u],y;for(y in f)if(f.hasOwnProperty(y)&&y in uD)return Zj[u]=f[y];return u}var mD=$c("animationend"),fD=$c("animationiteration"),hD=$c("animationstart"),aZ=$c("transitionrun"),rZ=$c("transitionstart"),sZ=$c("transitioncancel"),gD=$c("transitionend"),pD=new Map,Jj="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Jj.push("scrollEnd");function ni(u,f){pD.set(u,f),Oc(f,[u])}var r0=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)},Ns=[],Mu=0,e1=0;function s0(){for(var u=Mu,f=e1=Mu=0;f<u;){var y=Ns[f];Ns[f++]=null;var N=Ns[f];Ns[f++]=null;var L=Ns[f];Ns[f++]=null;var D=Ns[f];if(Ns[f++]=null,N!==null&&L!==null){var Y=N.pending;Y===null?L.next=L:(L.next=Y.next,Y.next=L),N.pending=L}D!==0&&xD(y,L,D)}}function i0(u,f,y,N){Ns[Mu++]=u,Ns[Mu++]=f,Ns[Mu++]=y,Ns[Mu++]=N,e1|=N,u.lanes|=N,u=u.alternate,u!==null&&(u.lanes|=N)}function t1(u,f,y,N){return i0(u,f,y,N),o0(u)}function Rc(u,f){return i0(u,null,null,f),o0(u)}function xD(u,f,y){u.lanes|=y;var N=u.alternate;N!==null&&(N.lanes|=y);for(var L=!1,D=u.return;D!==null;)D.childLanes|=y,N=D.alternate,N!==null&&(N.childLanes|=y),D.tag===22&&(u=D.stateNode,u===null||u._visibility&1||(L=!0)),u=D,D=D.return;return u.tag===3?(D=u.stateNode,L&&f!==null&&(L=31-Me(y),u=D.hiddenUpdates,N=u[L],N===null?u[L]=[f]:N.push(f),f.lane=y|536870912),D):null}function o0(u){if(50<hh)throw hh=0,dC=null,Error(r(185));for(var f=u.return;f!==null;)u=f,f=u.return;return u.tag===3?u.stateNode:null}var Iu={};function iZ(u,f,y,N){this.tag=u,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=N,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xr(u,f,y,N){return new iZ(u,f,y,N)}function n1(u){return u=u.prototype,!(!u||!u.isReactComponent)}function mo(u,f){var y=u.alternate;return y===null?(y=Xr(u.tag,f,u.key,u.mode),y.elementType=u.elementType,y.type=u.type,y.stateNode=u.stateNode,y.alternate=u,u.alternate=y):(y.pendingProps=f,y.type=u.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=u.flags&65011712,y.childLanes=u.childLanes,y.lanes=u.lanes,y.child=u.child,y.memoizedProps=u.memoizedProps,y.memoizedState=u.memoizedState,y.updateQueue=u.updateQueue,f=u.dependencies,y.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},y.sibling=u.sibling,y.index=u.index,y.ref=u.ref,y.refCleanup=u.refCleanup,y}function yD(u,f){u.flags&=65011714;var y=u.alternate;return y===null?(u.childLanes=0,u.lanes=f,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=y.childLanes,u.lanes=y.lanes,u.child=y.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=y.memoizedProps,u.memoizedState=y.memoizedState,u.updateQueue=y.updateQueue,u.type=y.type,f=y.dependencies,u.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),u}function l0(u,f,y,N,L,D){var Y=0;if(N=u,typeof u=="function")n1(u)&&(Y=1);else if(typeof u=="string")Y=uJ(u,y,we.current)?26:u==="html"||u==="head"||u==="body"?27:5;else e:switch(u){case U:return u=Xr(31,y,f,L),u.elementType=U,u.lanes=D,u;case x:return zc(y.children,L,D,f);case w:Y=8,L|=24;break;case j:return u=Xr(12,y,f,L|2),u.elementType=j,u.lanes=D,u;case E:return u=Xr(13,y,f,L),u.elementType=E,u.lanes=D,u;case A:return u=Xr(19,y,f,L),u.elementType=A,u.lanes=D,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case S:Y=10;break e;case C:Y=9;break e;case _:Y=11;break e;case T:Y=14;break e;case R:Y=16,N=null;break e}Y=29,y=Error(r(130,u===null?"null":typeof u,"")),N=null}return f=Xr(Y,y,f,L),f.elementType=u,f.type=N,f.lanes=D,f}function zc(u,f,y,N){return u=Xr(7,u,N,f),u.lanes=y,u}function a1(u,f,y){return u=Xr(6,u,null,f),u.lanes=y,u}function bD(u){var f=Xr(18,null,null,0);return f.stateNode=u,f}function r1(u,f,y){return f=Xr(4,u.children!==null?u.children:[],u.key,f),f.lanes=y,f.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},f}var vD=new WeakMap;function js(u,f){if(typeof u=="object"&&u!==null){var y=vD.get(u);return y!==void 0?y:(f={value:u,source:f,stack:Je(f)},vD.set(u,f),f)}return{value:u,source:f,stack:Je(f)}}var $u=[],Ru=0,c0=null,qf=0,Cs=[],Ss=0,_l=null,_i=1,Ai="";function fo(u,f){$u[Ru++]=qf,$u[Ru++]=c0,c0=u,qf=f}function wD(u,f,y){Cs[Ss++]=_i,Cs[Ss++]=Ai,Cs[Ss++]=_l,_l=u;var N=_i;u=Ai;var L=32-Me(N)-1;N&=~(1<<L),y+=1;var D=32-Me(f)+L;if(30<D){var Y=L-L%5;D=(N&(1<<Y)-1).toString(32),N>>=Y,L-=Y,_i=1<<32-Me(f)+L|y<<L|N,Ai=D+u}else _i=1<<D|y<<L|N,Ai=u}function s1(u){u.return!==null&&(fo(u,1),wD(u,1,0))}function i1(u){for(;u===c0;)c0=$u[--Ru],$u[Ru]=null,qf=$u[--Ru],$u[Ru]=null;for(;u===_l;)_l=Cs[--Ss],Cs[Ss]=null,Ai=Cs[--Ss],Cs[Ss]=null,_i=Cs[--Ss],Cs[Ss]=null}function ND(u,f){Cs[Ss++]=_i,Cs[Ss++]=Ai,Cs[Ss++]=_l,_i=f.id,Ai=f.overflow,_l=u}var Ga=null,Cn=null,zt=!1,Al=null,_s=!1,o1=Error(r(519));function El(u){var f=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Yf(js(f,u)),o1}function jD(u){var f=u.stateNode,y=u.type,N=u.memoizedProps;switch(f[Ha]=u,f[Sr]=N,y){case"dialog":Ot("cancel",f),Ot("close",f);break;case"iframe":case"object":case"embed":Ot("load",f);break;case"video":case"audio":for(y=0;y<ph.length;y++)Ot(ph[y],f);break;case"source":Ot("error",f);break;case"img":case"image":case"link":Ot("error",f),Ot("load",f);break;case"details":Ot("toggle",f);break;case"input":Ot("invalid",f),IP(f,N.value,N.defaultValue,N.checked,N.defaultChecked,N.type,N.name,!0);break;case"select":Ot("invalid",f);break;case"textarea":Ot("invalid",f),RP(f,N.value,N.defaultValue,N.children)}y=N.children,typeof y!="string"&&typeof y!="number"&&typeof y!="bigint"||f.textContent===""+y||N.suppressHydrationWarning===!0||UM(f.textContent,y)?(N.popover!=null&&(Ot("beforetoggle",f),Ot("toggle",f)),N.onScroll!=null&&Ot("scroll",f),N.onScrollEnd!=null&&Ot("scrollend",f),N.onClick!=null&&(f.onclick=co),f=!0):f=!1,f||El(u,!0)}function CD(u){for(Ga=u.return;Ga;)switch(Ga.tag){case 5:case 31:case 13:_s=!1;return;case 27:case 3:_s=!0;return;default:Ga=Ga.return}}function zu(u){if(u!==Ga)return!1;if(!zt)return CD(u),zt=!0,!1;var f=u.tag,y;if((y=f!==3&&f!==27)&&((y=f===5)&&(y=u.type,y=!(y!=="form"&&y!=="button")||SC(u.type,u.memoizedProps)),y=!y),y&&Cn&&El(u),CD(u),f===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(317));Cn=KM(u)}else if(f===31){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(317));Cn=KM(u)}else f===27?(f=Cn,Bl(u.type)?(u=LC,LC=null,Cn=u):Cn=f):Cn=Ga?Es(u.stateNode.nextSibling):null;return!0}function Uc(){Cn=Ga=null,zt=!1}function l1(){var u=Al;return u!==null&&(Lr===null?Lr=u:Lr.push.apply(Lr,u),Al=null),u}function Yf(u){Al===null?Al=[u]:Al.push(u)}var c1=J(null),Fc=null,ho=null;function Tl(u,f,y){pe(c1,f._currentValue),f._currentValue=y}function go(u){u._currentValue=c1.current,ne(c1)}function d1(u,f,y){for(;u!==null;){var N=u.alternate;if((u.childLanes&f)!==f?(u.childLanes|=f,N!==null&&(N.childLanes|=f)):N!==null&&(N.childLanes&f)!==f&&(N.childLanes|=f),u===y)break;u=u.return}}function u1(u,f,y,N){var L=u.child;for(L!==null&&(L.return=u);L!==null;){var D=L.dependencies;if(D!==null){var Y=L.child;D=D.firstContext;e:for(;D!==null;){var me=D;D=L;for(var _e=0;_e<f.length;_e++)if(me.context===f[_e]){D.lanes|=y,me=D.alternate,me!==null&&(me.lanes|=y),d1(D.return,y,u),N||(Y=null);break e}D=me.next}}else if(L.tag===18){if(Y=L.return,Y===null)throw Error(r(341));Y.lanes|=y,D=Y.alternate,D!==null&&(D.lanes|=y),d1(Y,y,u),Y=null}else Y=L.child;if(Y!==null)Y.return=L;else for(Y=L;Y!==null;){if(Y===u){Y=null;break}if(L=Y.sibling,L!==null){L.return=Y.return,Y=L;break}Y=Y.return}L=Y}}function Uu(u,f,y,N){u=null;for(var L=f,D=!1;L!==null;){if(!D){if((L.flags&524288)!==0)D=!0;else if((L.flags&262144)!==0)break}if(L.tag===10){var Y=L.alternate;if(Y===null)throw Error(r(387));if(Y=Y.memoizedProps,Y!==null){var me=L.type;Qr(L.pendingProps.value,Y.value)||(u!==null?u.push(me):u=[me])}}else if(L===Ae.current){if(Y=L.alternate,Y===null)throw Error(r(387));Y.memoizedState.memoizedState!==L.memoizedState.memoizedState&&(u!==null?u.push(wh):u=[wh])}L=L.return}u!==null&&u1(f,u,y,N),f.flags|=262144}function d0(u){for(u=u.firstContext;u!==null;){if(!Qr(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function Bc(u){Fc=u,ho=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function Va(u){return SD(Fc,u)}function u0(u,f){return Fc===null&&Bc(u),SD(u,f)}function SD(u,f){var y=f._currentValue;if(f={context:f,memoizedValue:y,next:null},ho===null){if(u===null)throw Error(r(308));ho=f,u.dependencies={lanes:0,firstContext:f},u.flags|=524288}else ho=ho.next=f;return y}var oZ=typeof AbortController<"u"?AbortController:function(){var u=[],f=this.signal={aborted:!1,addEventListener:function(y,N){u.push(N)}};this.abort=function(){f.aborted=!0,u.forEach(function(y){return y()})}},lZ=e.unstable_scheduleCallback,cZ=e.unstable_NormalPriority,la={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function m1(){return{controller:new oZ,data:new Map,refCount:0}}function Kf(u){u.refCount--,u.refCount===0&&lZ(cZ,function(){u.controller.abort()})}var Qf=null,f1=0,Fu=0,Bu=null;function dZ(u,f){if(Qf===null){var y=Qf=[];f1=0,Fu=pC(),Bu={status:"pending",value:void 0,then:function(N){y.push(N)}}}return f1++,f.then(_D,_D),f}function _D(){if(--f1===0&&Qf!==null){Bu!==null&&(Bu.status="fulfilled");var u=Qf;Qf=null,Fu=0,Bu=null;for(var f=0;f<u.length;f++)(0,u[f])()}}function uZ(u,f){var y=[],N={status:"pending",value:null,reason:null,then:function(L){y.push(L)}};return u.then(function(){N.status="fulfilled",N.value=f;for(var L=0;L<y.length;L++)(0,y[L])(f)},function(L){for(N.status="rejected",N.reason=L,L=0;L<y.length;L++)(0,y[L])(void 0)}),N}var AD=K.S;K.S=function(u,f){dM=k(),typeof f=="object"&&f!==null&&typeof f.then=="function"&&dZ(u,f),AD!==null&&AD(u,f)};var Hc=J(null);function h1(){var u=Hc.current;return u!==null?u:xn.pooledCache}function m0(u,f){f===null?pe(Hc,Hc.current):pe(Hc,f.pool)}function ED(){var u=h1();return u===null?null:{parent:la._currentValue,pool:u}}var Hu=Error(r(460)),g1=Error(r(474)),f0=Error(r(542)),h0={then:function(){}};function TD(u){return u=u.status,u==="fulfilled"||u==="rejected"}function LD(u,f,y){switch(y=u[y],y===void 0?u.push(f):y!==f&&(f.then(co,co),f=y),f.status){case"fulfilled":return f.value;case"rejected":throw u=f.reason,PD(u),u;default:if(typeof f.status=="string")f.then(co,co);else{if(u=xn,u!==null&&100<u.shellSuspendCounter)throw Error(r(482));u=f,u.status="pending",u.then(function(N){if(f.status==="pending"){var L=f;L.status="fulfilled",L.value=N}},function(N){if(f.status==="pending"){var L=f;L.status="rejected",L.reason=N}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw u=f.reason,PD(u),u}throw Vc=f,Hu}}function Gc(u){try{var f=u._init;return f(u._payload)}catch(y){throw y!==null&&typeof y=="object"&&typeof y.then=="function"?(Vc=y,Hu):y}}var Vc=null;function kD(){if(Vc===null)throw Error(r(459));var u=Vc;return Vc=null,u}function PD(u){if(u===Hu||u===f0)throw Error(r(483))}var Gu=null,Xf=0;function g0(u){var f=Xf;return Xf+=1,Gu===null&&(Gu=[]),LD(Gu,u,f)}function Zf(u,f){f=f.props.ref,u.ref=f!==void 0?f:null}function p0(u,f){throw f.$$typeof===p?Error(r(525)):(u=Object.prototype.toString.call(f),Error(r(31,u==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":u)))}function DD(u){function f(Oe,Le){if(u){var $e=Oe.deletions;$e===null?(Oe.deletions=[Le],Oe.flags|=16):$e.push(Le)}}function y(Oe,Le){if(!u)return null;for(;Le!==null;)f(Oe,Le),Le=Le.sibling;return null}function N(Oe){for(var Le=new Map;Oe!==null;)Oe.key!==null?Le.set(Oe.key,Oe):Le.set(Oe.index,Oe),Oe=Oe.sibling;return Le}function L(Oe,Le){return Oe=mo(Oe,Le),Oe.index=0,Oe.sibling=null,Oe}function D(Oe,Le,$e){return Oe.index=$e,u?($e=Oe.alternate,$e!==null?($e=$e.index,$e<Le?(Oe.flags|=67108866,Le):$e):(Oe.flags|=67108866,Le)):(Oe.flags|=1048576,Le)}function Y(Oe){return u&&Oe.alternate===null&&(Oe.flags|=67108866),Oe}function me(Oe,Le,$e,Qe){return Le===null||Le.tag!==6?(Le=a1($e,Oe.mode,Qe),Le.return=Oe,Le):(Le=L(Le,$e),Le.return=Oe,Le)}function _e(Oe,Le,$e,Qe){var xt=$e.type;return xt===x?qe(Oe,Le,$e.props.children,Qe,$e.key):Le!==null&&(Le.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===R&&Gc(xt)===Le.type)?(Le=L(Le,$e.props),Zf(Le,$e),Le.return=Oe,Le):(Le=l0($e.type,$e.key,$e.props,null,Oe.mode,Qe),Zf(Le,$e),Le.return=Oe,Le)}function Re(Oe,Le,$e,Qe){return Le===null||Le.tag!==4||Le.stateNode.containerInfo!==$e.containerInfo||Le.stateNode.implementation!==$e.implementation?(Le=r1($e,Oe.mode,Qe),Le.return=Oe,Le):(Le=L(Le,$e.children||[]),Le.return=Oe,Le)}function qe(Oe,Le,$e,Qe,xt){return Le===null||Le.tag!==7?(Le=zc($e,Oe.mode,Qe,xt),Le.return=Oe,Le):(Le=L(Le,$e),Le.return=Oe,Le)}function Xe(Oe,Le,$e){if(typeof Le=="string"&&Le!==""||typeof Le=="number"||typeof Le=="bigint")return Le=a1(""+Le,Oe.mode,$e),Le.return=Oe,Le;if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case b:return $e=l0(Le.type,Le.key,Le.props,null,Oe.mode,$e),Zf($e,Le),$e.return=Oe,$e;case v:return Le=r1(Le,Oe.mode,$e),Le.return=Oe,Le;case R:return Le=Gc(Le),Xe(Oe,Le,$e)}if(ae(Le)||M(Le))return Le=zc(Le,Oe.mode,$e,null),Le.return=Oe,Le;if(typeof Le.then=="function")return Xe(Oe,g0(Le),$e);if(Le.$$typeof===S)return Xe(Oe,u0(Oe,Le),$e);p0(Oe,Le)}return null}function Ue(Oe,Le,$e,Qe){var xt=Le!==null?Le.key:null;if(typeof $e=="string"&&$e!==""||typeof $e=="number"||typeof $e=="bigint")return xt!==null?null:me(Oe,Le,""+$e,Qe);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case b:return $e.key===xt?_e(Oe,Le,$e,Qe):null;case v:return $e.key===xt?Re(Oe,Le,$e,Qe):null;case R:return $e=Gc($e),Ue(Oe,Le,$e,Qe)}if(ae($e)||M($e))return xt!==null?null:qe(Oe,Le,$e,Qe,null);if(typeof $e.then=="function")return Ue(Oe,Le,g0($e),Qe);if($e.$$typeof===S)return Ue(Oe,Le,u0(Oe,$e),Qe);p0(Oe,$e)}return null}function Be(Oe,Le,$e,Qe,xt){if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number"||typeof Qe=="bigint")return Oe=Oe.get($e)||null,me(Le,Oe,""+Qe,xt);if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case b:return Oe=Oe.get(Qe.key===null?$e:Qe.key)||null,_e(Le,Oe,Qe,xt);case v:return Oe=Oe.get(Qe.key===null?$e:Qe.key)||null,Re(Le,Oe,Qe,xt);case R:return Qe=Gc(Qe),Be(Oe,Le,$e,Qe,xt)}if(ae(Qe)||M(Qe))return Oe=Oe.get($e)||null,qe(Le,Oe,Qe,xt,null);if(typeof Qe.then=="function")return Be(Oe,Le,$e,g0(Qe),xt);if(Qe.$$typeof===S)return Be(Oe,Le,$e,u0(Le,Qe),xt);p0(Le,Qe)}return null}function lt(Oe,Le,$e,Qe){for(var xt=null,Ht=null,dt=Le,Tt=Le=0,It=null;dt!==null&&Tt<$e.length;Tt++){dt.index>Tt?(It=dt,dt=null):It=dt.sibling;var Gt=Ue(Oe,dt,$e[Tt],Qe);if(Gt===null){dt===null&&(dt=It);break}u&&dt&&Gt.alternate===null&&f(Oe,dt),Le=D(Gt,Le,Tt),Ht===null?xt=Gt:Ht.sibling=Gt,Ht=Gt,dt=It}if(Tt===$e.length)return y(Oe,dt),zt&&fo(Oe,Tt),xt;if(dt===null){for(;Tt<$e.length;Tt++)dt=Xe(Oe,$e[Tt],Qe),dt!==null&&(Le=D(dt,Le,Tt),Ht===null?xt=dt:Ht.sibling=dt,Ht=dt);return zt&&fo(Oe,Tt),xt}for(dt=N(dt);Tt<$e.length;Tt++)It=Be(dt,Oe,Tt,$e[Tt],Qe),It!==null&&(u&&It.alternate!==null&&dt.delete(It.key===null?Tt:It.key),Le=D(It,Le,Tt),Ht===null?xt=It:Ht.sibling=It,Ht=It);return u&&dt.forEach(function(ql){return f(Oe,ql)}),zt&&fo(Oe,Tt),xt}function wt(Oe,Le,$e,Qe){if($e==null)throw Error(r(151));for(var xt=null,Ht=null,dt=Le,Tt=Le=0,It=null,Gt=$e.next();dt!==null&&!Gt.done;Tt++,Gt=$e.next()){dt.index>Tt?(It=dt,dt=null):It=dt.sibling;var ql=Ue(Oe,dt,Gt.value,Qe);if(ql===null){dt===null&&(dt=It);break}u&&dt&&ql.alternate===null&&f(Oe,dt),Le=D(ql,Le,Tt),Ht===null?xt=ql:Ht.sibling=ql,Ht=ql,dt=It}if(Gt.done)return y(Oe,dt),zt&&fo(Oe,Tt),xt;if(dt===null){for(;!Gt.done;Tt++,Gt=$e.next())Gt=Xe(Oe,Gt.value,Qe),Gt!==null&&(Le=D(Gt,Le,Tt),Ht===null?xt=Gt:Ht.sibling=Gt,Ht=Gt);return zt&&fo(Oe,Tt),xt}for(dt=N(dt);!Gt.done;Tt++,Gt=$e.next())Gt=Be(dt,Oe,Tt,Gt.value,Qe),Gt!==null&&(u&&Gt.alternate!==null&&dt.delete(Gt.key===null?Tt:Gt.key),Le=D(Gt,Le,Tt),Ht===null?xt=Gt:Ht.sibling=Gt,Ht=Gt);return u&&dt.forEach(function(NJ){return f(Oe,NJ)}),zt&&fo(Oe,Tt),xt}function hn(Oe,Le,$e,Qe){if(typeof $e=="object"&&$e!==null&&$e.type===x&&$e.key===null&&($e=$e.props.children),typeof $e=="object"&&$e!==null){switch($e.$$typeof){case b:e:{for(var xt=$e.key;Le!==null;){if(Le.key===xt){if(xt=$e.type,xt===x){if(Le.tag===7){y(Oe,Le.sibling),Qe=L(Le,$e.props.children),Qe.return=Oe,Oe=Qe;break e}}else if(Le.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===R&&Gc(xt)===Le.type){y(Oe,Le.sibling),Qe=L(Le,$e.props),Zf(Qe,$e),Qe.return=Oe,Oe=Qe;break e}y(Oe,Le);break}else f(Oe,Le);Le=Le.sibling}$e.type===x?(Qe=zc($e.props.children,Oe.mode,Qe,$e.key),Qe.return=Oe,Oe=Qe):(Qe=l0($e.type,$e.key,$e.props,null,Oe.mode,Qe),Zf(Qe,$e),Qe.return=Oe,Oe=Qe)}return Y(Oe);case v:e:{for(xt=$e.key;Le!==null;){if(Le.key===xt)if(Le.tag===4&&Le.stateNode.containerInfo===$e.containerInfo&&Le.stateNode.implementation===$e.implementation){y(Oe,Le.sibling),Qe=L(Le,$e.children||[]),Qe.return=Oe,Oe=Qe;break e}else{y(Oe,Le);break}else f(Oe,Le);Le=Le.sibling}Qe=r1($e,Oe.mode,Qe),Qe.return=Oe,Oe=Qe}return Y(Oe);case R:return $e=Gc($e),hn(Oe,Le,$e,Qe)}if(ae($e))return lt(Oe,Le,$e,Qe);if(M($e)){if(xt=M($e),typeof xt!="function")throw Error(r(150));return $e=xt.call($e),wt(Oe,Le,$e,Qe)}if(typeof $e.then=="function")return hn(Oe,Le,g0($e),Qe);if($e.$$typeof===S)return hn(Oe,Le,u0(Oe,$e),Qe);p0(Oe,$e)}return typeof $e=="string"&&$e!==""||typeof $e=="number"||typeof $e=="bigint"?($e=""+$e,Le!==null&&Le.tag===6?(y(Oe,Le.sibling),Qe=L(Le,$e),Qe.return=Oe,Oe=Qe):(y(Oe,Le),Qe=a1($e,Oe.mode,Qe),Qe.return=Oe,Oe=Qe),Y(Oe)):y(Oe,Le)}return function(Oe,Le,$e,Qe){try{Xf=0;var xt=hn(Oe,Le,$e,Qe);return Gu=null,xt}catch(dt){if(dt===Hu||dt===f0)throw dt;var Ht=Xr(29,dt,null,Oe.mode);return Ht.lanes=Qe,Ht.return=Oe,Ht}finally{}}}var Wc=DD(!0),OD=DD(!1),Ll=!1;function p1(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function x1(u,f){u=u.updateQueue,f.updateQueue===u&&(f.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function kl(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function Pl(u,f,y){var N=u.updateQueue;if(N===null)return null;if(N=N.shared,(qt&2)!==0){var L=N.pending;return L===null?f.next=f:(f.next=L.next,L.next=f),N.pending=f,f=o0(u),xD(u,null,y),f}return i0(u,N,f,y),o0(u)}function Jf(u,f,y){if(f=f.updateQueue,f!==null&&(f=f.shared,(y&4194048)!==0)){var N=f.lanes;N&=u.pendingLanes,y|=N,f.lanes=y,Ie(u,y)}}function y1(u,f){var y=u.updateQueue,N=u.alternate;if(N!==null&&(N=N.updateQueue,y===N)){var L=null,D=null;if(y=y.firstBaseUpdate,y!==null){do{var Y={lane:y.lane,tag:y.tag,payload:y.payload,callback:null,next:null};D===null?L=D=Y:D=D.next=Y,y=y.next}while(y!==null);D===null?L=D=f:D=D.next=f}else L=D=f;y={baseState:N.baseState,firstBaseUpdate:L,lastBaseUpdate:D,shared:N.shared,callbacks:N.callbacks},u.updateQueue=y;return}u=y.lastBaseUpdate,u===null?y.firstBaseUpdate=f:u.next=f,y.lastBaseUpdate=f}var b1=!1;function eh(){if(b1){var u=Bu;if(u!==null)throw u}}function th(u,f,y,N){b1=!1;var L=u.updateQueue;Ll=!1;var D=L.firstBaseUpdate,Y=L.lastBaseUpdate,me=L.shared.pending;if(me!==null){L.shared.pending=null;var _e=me,Re=_e.next;_e.next=null,Y===null?D=Re:Y.next=Re,Y=_e;var qe=u.alternate;qe!==null&&(qe=qe.updateQueue,me=qe.lastBaseUpdate,me!==Y&&(me===null?qe.firstBaseUpdate=Re:me.next=Re,qe.lastBaseUpdate=_e))}if(D!==null){var Xe=L.baseState;Y=0,qe=Re=_e=null,me=D;do{var Ue=me.lane&-536870913,Be=Ue!==me.lane;if(Be?(Mt&Ue)===Ue:(N&Ue)===Ue){Ue!==0&&Ue===Fu&&(b1=!0),qe!==null&&(qe=qe.next={lane:0,tag:me.tag,payload:me.payload,callback:null,next:null});e:{var lt=u,wt=me;Ue=f;var hn=y;switch(wt.tag){case 1:if(lt=wt.payload,typeof lt=="function"){Xe=lt.call(hn,Xe,Ue);break e}Xe=lt;break e;case 3:lt.flags=lt.flags&-65537|128;case 0:if(lt=wt.payload,Ue=typeof lt=="function"?lt.call(hn,Xe,Ue):lt,Ue==null)break e;Xe=h({},Xe,Ue);break e;case 2:Ll=!0}}Ue=me.callback,Ue!==null&&(u.flags|=64,Be&&(u.flags|=8192),Be=L.callbacks,Be===null?L.callbacks=[Ue]:Be.push(Ue))}else Be={lane:Ue,tag:me.tag,payload:me.payload,callback:me.callback,next:null},qe===null?(Re=qe=Be,_e=Xe):qe=qe.next=Be,Y|=Ue;if(me=me.next,me===null){if(me=L.shared.pending,me===null)break;Be=me,me=Be.next,Be.next=null,L.lastBaseUpdate=Be,L.shared.pending=null}}while(!0);qe===null&&(_e=Xe),L.baseState=_e,L.firstBaseUpdate=Re,L.lastBaseUpdate=qe,D===null&&(L.shared.lanes=0),$l|=Y,u.lanes=Y,u.memoizedState=Xe}}function MD(u,f){if(typeof u!="function")throw Error(r(191,u));u.call(f)}function ID(u,f){var y=u.callbacks;if(y!==null)for(u.callbacks=null,u=0;u<y.length;u++)MD(y[u],f)}var Vu=J(null),x0=J(0);function $D(u,f){u=Co,pe(x0,u),pe(Vu,f),Co=u|f.baseLanes}function v1(){pe(x0,Co),pe(Vu,Vu.current)}function w1(){Co=x0.current,ne(Vu),ne(x0)}var Zr=J(null),As=null;function Dl(u){var f=u.alternate;pe(ea,ea.current&1),pe(Zr,u),As===null&&(f===null||Vu.current!==null||f.memoizedState!==null)&&(As=u)}function N1(u){pe(ea,ea.current),pe(Zr,u),As===null&&(As=u)}function RD(u){u.tag===22?(pe(ea,ea.current),pe(Zr,u),As===null&&(As=u)):Ol()}function Ol(){pe(ea,ea.current),pe(Zr,Zr.current)}function Jr(u){ne(Zr),As===u&&(As=null),ne(ea)}var ea=J(0);function y0(u){for(var f=u;f!==null;){if(f.tag===13){var y=f.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||EC(y)||TC(y)))return f}else if(f.tag===19&&(f.memoizedProps.revealOrder==="forwards"||f.memoizedProps.revealOrder==="backwards"||f.memoizedProps.revealOrder==="unstable_legacy-backwards"||f.memoizedProps.revealOrder==="together")){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var po=0,_t=null,mn=null,ca=null,b0=!1,Wu=!1,qc=!1,v0=0,nh=0,qu=null,mZ=0;function Vn(){throw Error(r(321))}function j1(u,f){if(f===null)return!1;for(var y=0;y<f.length&&y<u.length;y++)if(!Qr(u[y],f[y]))return!1;return!0}function C1(u,f,y,N,L,D){return po=D,_t=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,K.H=u===null||u.memoizedState===null?wO:z1,qc=!1,D=y(N,L),qc=!1,Wu&&(D=UD(f,y,N,L)),zD(u),D}function zD(u){K.H=sh;var f=mn!==null&&mn.next!==null;if(po=0,ca=mn=_t=null,b0=!1,nh=0,qu=null,f)throw Error(r(300));u===null||da||(u=u.dependencies,u!==null&&d0(u)&&(da=!0))}function UD(u,f,y,N){_t=u;var L=0;do{if(Wu&&(qu=null),nh=0,Wu=!1,25<=L)throw Error(r(301));if(L+=1,ca=mn=null,u.updateQueue!=null){var D=u.updateQueue;D.lastEffect=null,D.events=null,D.stores=null,D.memoCache!=null&&(D.memoCache.index=0)}K.H=NO,D=f(y,N)}while(Wu);return D}function fZ(){var u=K.H,f=u.useState()[0];return f=typeof f.then=="function"?ah(f):f,u=u.useState()[0],(mn!==null?mn.memoizedState:null)!==u&&(_t.flags|=1024),f}function S1(){var u=v0!==0;return v0=0,u}function _1(u,f,y){f.updateQueue=u.updateQueue,f.flags&=-2053,u.lanes&=~y}function A1(u){if(b0){for(u=u.memoizedState;u!==null;){var f=u.queue;f!==null&&(f.pending=null),u=u.next}b0=!1}po=0,ca=mn=_t=null,Wu=!1,nh=v0=0,qu=null}function xr(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ca===null?_t.memoizedState=ca=u:ca=ca.next=u,ca}function ta(){if(mn===null){var u=_t.alternate;u=u!==null?u.memoizedState:null}else u=mn.next;var f=ca===null?_t.memoizedState:ca.next;if(f!==null)ca=f,mn=u;else{if(u===null)throw _t.alternate===null?Error(r(467)):Error(r(310));mn=u,u={memoizedState:mn.memoizedState,baseState:mn.baseState,baseQueue:mn.baseQueue,queue:mn.queue,next:null},ca===null?_t.memoizedState=ca=u:ca=ca.next=u}return ca}function w0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ah(u){var f=nh;return nh+=1,qu===null&&(qu=[]),u=LD(qu,u,f),f=_t,(ca===null?f.memoizedState:ca.next)===null&&(f=f.alternate,K.H=f===null||f.memoizedState===null?wO:z1),u}function N0(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return ah(u);if(u.$$typeof===S)return Va(u)}throw Error(r(438,String(u)))}function E1(u){var f=null,y=_t.updateQueue;if(y!==null&&(f=y.memoCache),f==null){var N=_t.alternate;N!==null&&(N=N.updateQueue,N!==null&&(N=N.memoCache,N!=null&&(f={data:N.data.map(function(L){return L.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),y===null&&(y=w0(),_t.updateQueue=y),y.memoCache=f,y=f.data[f.index],y===void 0)for(y=f.data[f.index]=Array(u),N=0;N<u;N++)y[N]=W;return f.index++,y}function xo(u,f){return typeof f=="function"?f(u):f}function j0(u){var f=ta();return T1(f,mn,u)}function T1(u,f,y){var N=u.queue;if(N===null)throw Error(r(311));N.lastRenderedReducer=y;var L=u.baseQueue,D=N.pending;if(D!==null){if(L!==null){var Y=L.next;L.next=D.next,D.next=Y}f.baseQueue=L=D,N.pending=null}if(D=u.baseState,L===null)u.memoizedState=D;else{f=L.next;var me=Y=null,_e=null,Re=f,qe=!1;do{var Xe=Re.lane&-536870913;if(Xe!==Re.lane?(Mt&Xe)===Xe:(po&Xe)===Xe){var Ue=Re.revertLane;if(Ue===0)_e!==null&&(_e=_e.next={lane:0,revertLane:0,gesture:null,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null}),Xe===Fu&&(qe=!0);else if((po&Ue)===Ue){Re=Re.next,Ue===Fu&&(qe=!0);continue}else Xe={lane:0,revertLane:Re.revertLane,gesture:null,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null},_e===null?(me=_e=Xe,Y=D):_e=_e.next=Xe,_t.lanes|=Ue,$l|=Ue;Xe=Re.action,qc&&y(D,Xe),D=Re.hasEagerState?Re.eagerState:y(D,Xe)}else Ue={lane:Xe,revertLane:Re.revertLane,gesture:Re.gesture,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null},_e===null?(me=_e=Ue,Y=D):_e=_e.next=Ue,_t.lanes|=Xe,$l|=Xe;Re=Re.next}while(Re!==null&&Re!==f);if(_e===null?Y=D:_e.next=me,!Qr(D,u.memoizedState)&&(da=!0,qe&&(y=Bu,y!==null)))throw y;u.memoizedState=D,u.baseState=Y,u.baseQueue=_e,N.lastRenderedState=D}return L===null&&(N.lanes=0),[u.memoizedState,N.dispatch]}function L1(u){var f=ta(),y=f.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=u;var N=y.dispatch,L=y.pending,D=f.memoizedState;if(L!==null){y.pending=null;var Y=L=L.next;do D=u(D,Y.action),Y=Y.next;while(Y!==L);Qr(D,f.memoizedState)||(da=!0),f.memoizedState=D,f.baseQueue===null&&(f.baseState=D),y.lastRenderedState=D}return[D,N]}function FD(u,f,y){var N=_t,L=ta(),D=zt;if(D){if(y===void 0)throw Error(r(407));y=y()}else y=f();var Y=!Qr((mn||L).memoizedState,y);if(Y&&(L.memoizedState=y,da=!0),L=L.queue,D1(GD.bind(null,N,L,u),[u]),L.getSnapshot!==f||Y||ca!==null&&ca.memoizedState.tag&1){if(N.flags|=2048,Yu(9,{destroy:void 0},HD.bind(null,N,L,y,f),null),xn===null)throw Error(r(349));D||(po&127)!==0||BD(N,f,y)}return y}function BD(u,f,y){u.flags|=16384,u={getSnapshot:f,value:y},f=_t.updateQueue,f===null?(f=w0(),_t.updateQueue=f,f.stores=[u]):(y=f.stores,y===null?f.stores=[u]:y.push(u))}function HD(u,f,y,N){f.value=y,f.getSnapshot=N,VD(f)&&WD(u)}function GD(u,f,y){return y(function(){VD(f)&&WD(u)})}function VD(u){var f=u.getSnapshot;u=u.value;try{var y=f();return!Qr(u,y)}catch{return!0}}function WD(u){var f=Rc(u,2);f!==null&&kr(f,u,2)}function k1(u){var f=xr();if(typeof u=="function"){var y=u;if(u=y(),qc){ge(!0);try{y()}finally{ge(!1)}}}return f.memoizedState=f.baseState=u,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:u},f}function qD(u,f,y,N){return u.baseState=y,T1(u,mn,typeof N=="function"?N:xo)}function hZ(u,f,y,N,L){if(_0(u))throw Error(r(485));if(u=f.action,u!==null){var D={payload:L,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Y){D.listeners.push(Y)}};K.T!==null?y(!0):D.isTransition=!1,N(D),y=f.pending,y===null?(D.next=f.pending=D,YD(f,D)):(D.next=y.next,f.pending=y.next=D)}}function YD(u,f){var y=f.action,N=f.payload,L=u.state;if(f.isTransition){var D=K.T,Y={};K.T=Y;try{var me=y(L,N),_e=K.S;_e!==null&&_e(Y,me),KD(u,f,me)}catch(Re){P1(u,f,Re)}finally{D!==null&&Y.types!==null&&(D.types=Y.types),K.T=D}}else try{D=y(L,N),KD(u,f,D)}catch(Re){P1(u,f,Re)}}function KD(u,f,y){y!==null&&typeof y=="object"&&typeof y.then=="function"?y.then(function(N){QD(u,f,N)},function(N){return P1(u,f,N)}):QD(u,f,y)}function QD(u,f,y){f.status="fulfilled",f.value=y,XD(f),u.state=y,f=u.pending,f!==null&&(y=f.next,y===f?u.pending=null:(y=y.next,f.next=y,YD(u,y)))}function P1(u,f,y){var N=u.pending;if(u.pending=null,N!==null){N=N.next;do f.status="rejected",f.reason=y,XD(f),f=f.next;while(f!==N)}u.action=null}function XD(u){u=u.listeners;for(var f=0;f<u.length;f++)(0,u[f])()}function ZD(u,f){return f}function JD(u,f){if(zt){var y=xn.formState;if(y!==null){e:{var N=_t;if(zt){if(Cn){t:{for(var L=Cn,D=_s;L.nodeType!==8;){if(!D){L=null;break t}if(L=Es(L.nextSibling),L===null){L=null;break t}}D=L.data,L=D==="F!"||D==="F"?L:null}if(L){Cn=Es(L.nextSibling),N=L.data==="F!";break e}}El(N)}N=!1}N&&(f=y[0])}}return y=xr(),y.memoizedState=y.baseState=f,N={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ZD,lastRenderedState:f},y.queue=N,y=yO.bind(null,_t,N),N.dispatch=y,N=k1(!1),D=R1.bind(null,_t,!1,N.queue),N=xr(),L={state:f,dispatch:null,action:u,pending:null},N.queue=L,y=hZ.bind(null,_t,L,D,y),L.dispatch=y,N.memoizedState=u,[f,y,!1]}function eO(u){var f=ta();return tO(f,mn,u)}function tO(u,f,y){if(f=T1(u,f,ZD)[0],u=j0(xo)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var N=ah(f)}catch(Y){throw Y===Hu?f0:Y}else N=f;f=ta();var L=f.queue,D=L.dispatch;return y!==f.memoizedState&&(_t.flags|=2048,Yu(9,{destroy:void 0},gZ.bind(null,L,y),null)),[N,D,u]}function gZ(u,f){u.action=f}function nO(u){var f=ta(),y=mn;if(y!==null)return tO(f,y,u);ta(),f=f.memoizedState,y=ta();var N=y.queue.dispatch;return y.memoizedState=u,[f,N,!1]}function Yu(u,f,y,N){return u={tag:u,create:y,deps:N,inst:f,next:null},f=_t.updateQueue,f===null&&(f=w0(),_t.updateQueue=f),y=f.lastEffect,y===null?f.lastEffect=u.next=u:(N=y.next,y.next=u,u.next=N,f.lastEffect=u),u}function aO(){return ta().memoizedState}function C0(u,f,y,N){var L=xr();_t.flags|=u,L.memoizedState=Yu(1|f,{destroy:void 0},y,N===void 0?null:N)}function S0(u,f,y,N){var L=ta();N=N===void 0?null:N;var D=L.memoizedState.inst;mn!==null&&N!==null&&j1(N,mn.memoizedState.deps)?L.memoizedState=Yu(f,D,y,N):(_t.flags|=u,L.memoizedState=Yu(1|f,D,y,N))}function rO(u,f){C0(8390656,8,u,f)}function D1(u,f){S0(2048,8,u,f)}function pZ(u){_t.flags|=4;var f=_t.updateQueue;if(f===null)f=w0(),_t.updateQueue=f,f.events=[u];else{var y=f.events;y===null?f.events=[u]:y.push(u)}}function sO(u){var f=ta().memoizedState;return pZ({ref:f,nextImpl:u}),function(){if((qt&2)!==0)throw Error(r(440));return f.impl.apply(void 0,arguments)}}function iO(u,f){return S0(4,2,u,f)}function oO(u,f){return S0(4,4,u,f)}function lO(u,f){if(typeof f=="function"){u=u();var y=f(u);return function(){typeof y=="function"?y():f(null)}}if(f!=null)return u=u(),f.current=u,function(){f.current=null}}function cO(u,f,y){y=y!=null?y.concat([u]):null,S0(4,4,lO.bind(null,f,u),y)}function O1(){}function dO(u,f){var y=ta();f=f===void 0?null:f;var N=y.memoizedState;return f!==null&&j1(f,N[1])?N[0]:(y.memoizedState=[u,f],u)}function uO(u,f){var y=ta();f=f===void 0?null:f;var N=y.memoizedState;if(f!==null&&j1(f,N[1]))return N[0];if(N=u(),qc){ge(!0);try{u()}finally{ge(!1)}}return y.memoizedState=[N,f],N}function M1(u,f,y){return y===void 0||(po&1073741824)!==0&&(Mt&261930)===0?u.memoizedState=f:(u.memoizedState=y,u=mM(),_t.lanes|=u,$l|=u,y)}function mO(u,f,y,N){return Qr(y,f)?y:Vu.current!==null?(u=M1(u,y,N),Qr(u,f)||(da=!0),u):(po&42)===0||(po&1073741824)!==0&&(Mt&261930)===0?(da=!0,u.memoizedState=y):(u=mM(),_t.lanes|=u,$l|=u,f)}function fO(u,f,y,N,L){var D=B.p;B.p=D!==0&&8>D?D:8;var Y=K.T,me={};K.T=me,R1(u,!1,f,y);try{var _e=L(),Re=K.S;if(Re!==null&&Re(me,_e),_e!==null&&typeof _e=="object"&&typeof _e.then=="function"){var qe=uZ(_e,N);rh(u,f,qe,ns(u))}else rh(u,f,N,ns(u))}catch(Xe){rh(u,f,{then:function(){},status:"rejected",reason:Xe},ns())}finally{B.p=D,Y!==null&&me.types!==null&&(Y.types=me.types),K.T=Y}}function xZ(){}function I1(u,f,y,N){if(u.tag!==5)throw Error(r(476));var L=hO(u).queue;fO(u,L,f,X,y===null?xZ:function(){return gO(u),y(N)})}function hO(u){var f=u.memoizedState;if(f!==null)return f;f={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:X},next:null};var y={};return f.next={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:y},next:null},u.memoizedState=f,u=u.alternate,u!==null&&(u.memoizedState=f),f}function gO(u){var f=hO(u);f.next===null&&(f=u.alternate.memoizedState),rh(u,f.next.queue,{},ns())}function $1(){return Va(wh)}function pO(){return ta().memoizedState}function xO(){return ta().memoizedState}function yZ(u){for(var f=u.return;f!==null;){switch(f.tag){case 24:case 3:var y=ns();u=kl(y);var N=Pl(f,u,y);N!==null&&(kr(N,f,y),Jf(N,f,y)),f={cache:m1()},u.payload=f;return}f=f.return}}function bZ(u,f,y){var N=ns();y={lane:N,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},_0(u)?bO(f,y):(y=t1(u,f,y,N),y!==null&&(kr(y,u,N),vO(y,f,N)))}function yO(u,f,y){var N=ns();rh(u,f,y,N)}function rh(u,f,y,N){var L={lane:N,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null};if(_0(u))bO(f,L);else{var D=u.alternate;if(u.lanes===0&&(D===null||D.lanes===0)&&(D=f.lastRenderedReducer,D!==null))try{var Y=f.lastRenderedState,me=D(Y,y);if(L.hasEagerState=!0,L.eagerState=me,Qr(me,Y))return i0(u,f,L,0),xn===null&&s0(),!1}catch{}finally{}if(y=t1(u,f,L,N),y!==null)return kr(y,u,N),vO(y,f,N),!0}return!1}function R1(u,f,y,N){if(N={lane:2,revertLane:pC(),gesture:null,action:N,hasEagerState:!1,eagerState:null,next:null},_0(u)){if(f)throw Error(r(479))}else f=t1(u,y,N,2),f!==null&&kr(f,u,2)}function _0(u){var f=u.alternate;return u===_t||f!==null&&f===_t}function bO(u,f){Wu=b0=!0;var y=u.pending;y===null?f.next=f:(f.next=y.next,y.next=f),u.pending=f}function vO(u,f,y){if((y&4194048)!==0){var N=f.lanes;N&=u.pendingLanes,y|=N,f.lanes=y,Ie(u,y)}}var sh={readContext:Va,use:N0,useCallback:Vn,useContext:Vn,useEffect:Vn,useImperativeHandle:Vn,useLayoutEffect:Vn,useInsertionEffect:Vn,useMemo:Vn,useReducer:Vn,useRef:Vn,useState:Vn,useDebugValue:Vn,useDeferredValue:Vn,useTransition:Vn,useSyncExternalStore:Vn,useId:Vn,useHostTransitionStatus:Vn,useFormState:Vn,useActionState:Vn,useOptimistic:Vn,useMemoCache:Vn,useCacheRefresh:Vn};sh.useEffectEvent=Vn;var wO={readContext:Va,use:N0,useCallback:function(u,f){return xr().memoizedState=[u,f===void 0?null:f],u},useContext:Va,useEffect:rO,useImperativeHandle:function(u,f,y){y=y!=null?y.concat([u]):null,C0(4194308,4,lO.bind(null,f,u),y)},useLayoutEffect:function(u,f){return C0(4194308,4,u,f)},useInsertionEffect:function(u,f){C0(4,2,u,f)},useMemo:function(u,f){var y=xr();f=f===void 0?null:f;var N=u();if(qc){ge(!0);try{u()}finally{ge(!1)}}return y.memoizedState=[N,f],N},useReducer:function(u,f,y){var N=xr();if(y!==void 0){var L=y(f);if(qc){ge(!0);try{y(f)}finally{ge(!1)}}}else L=f;return N.memoizedState=N.baseState=L,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:L},N.queue=u,u=u.dispatch=bZ.bind(null,_t,u),[N.memoizedState,u]},useRef:function(u){var f=xr();return u={current:u},f.memoizedState=u},useState:function(u){u=k1(u);var f=u.queue,y=yO.bind(null,_t,f);return f.dispatch=y,[u.memoizedState,y]},useDebugValue:O1,useDeferredValue:function(u,f){var y=xr();return M1(y,u,f)},useTransition:function(){var u=k1(!1);return u=fO.bind(null,_t,u.queue,!0,!1),xr().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,f,y){var N=_t,L=xr();if(zt){if(y===void 0)throw Error(r(407));y=y()}else{if(y=f(),xn===null)throw Error(r(349));(Mt&127)!==0||BD(N,f,y)}L.memoizedState=y;var D={value:y,getSnapshot:f};return L.queue=D,rO(GD.bind(null,N,D,u),[u]),N.flags|=2048,Yu(9,{destroy:void 0},HD.bind(null,N,D,y,f),null),y},useId:function(){var u=xr(),f=xn.identifierPrefix;if(zt){var y=Ai,N=_i;y=(N&~(1<<32-Me(N)-1)).toString(32)+y,f="_"+f+"R_"+y,y=v0++,0<y&&(f+="H"+y.toString(32)),f+="_"}else y=mZ++,f="_"+f+"r_"+y.toString(32)+"_";return u.memoizedState=f},useHostTransitionStatus:$1,useFormState:JD,useActionState:JD,useOptimistic:function(u){var f=xr();f.memoizedState=f.baseState=u;var y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=y,f=R1.bind(null,_t,!0,y),y.dispatch=f,[u,f]},useMemoCache:E1,useCacheRefresh:function(){return xr().memoizedState=yZ.bind(null,_t)},useEffectEvent:function(u){var f=xr(),y={impl:u};return f.memoizedState=y,function(){if((qt&2)!==0)throw Error(r(440));return y.impl.apply(void 0,arguments)}}},z1={readContext:Va,use:N0,useCallback:dO,useContext:Va,useEffect:D1,useImperativeHandle:cO,useInsertionEffect:iO,useLayoutEffect:oO,useMemo:uO,useReducer:j0,useRef:aO,useState:function(){return j0(xo)},useDebugValue:O1,useDeferredValue:function(u,f){var y=ta();return mO(y,mn.memoizedState,u,f)},useTransition:function(){var u=j0(xo)[0],f=ta().memoizedState;return[typeof u=="boolean"?u:ah(u),f]},useSyncExternalStore:FD,useId:pO,useHostTransitionStatus:$1,useFormState:eO,useActionState:eO,useOptimistic:function(u,f){var y=ta();return qD(y,mn,u,f)},useMemoCache:E1,useCacheRefresh:xO};z1.useEffectEvent=sO;var NO={readContext:Va,use:N0,useCallback:dO,useContext:Va,useEffect:D1,useImperativeHandle:cO,useInsertionEffect:iO,useLayoutEffect:oO,useMemo:uO,useReducer:L1,useRef:aO,useState:function(){return L1(xo)},useDebugValue:O1,useDeferredValue:function(u,f){var y=ta();return mn===null?M1(y,u,f):mO(y,mn.memoizedState,u,f)},useTransition:function(){var u=L1(xo)[0],f=ta().memoizedState;return[typeof u=="boolean"?u:ah(u),f]},useSyncExternalStore:FD,useId:pO,useHostTransitionStatus:$1,useFormState:nO,useActionState:nO,useOptimistic:function(u,f){var y=ta();return mn!==null?qD(y,mn,u,f):(y.baseState=u,[u,y.queue.dispatch])},useMemoCache:E1,useCacheRefresh:xO};NO.useEffectEvent=sO;function U1(u,f,y,N){f=u.memoizedState,y=y(N,f),y=y==null?f:h({},f,y),u.memoizedState=y,u.lanes===0&&(u.updateQueue.baseState=y)}var F1={enqueueSetState:function(u,f,y){u=u._reactInternals;var N=ns(),L=kl(N);L.payload=f,y!=null&&(L.callback=y),f=Pl(u,L,N),f!==null&&(kr(f,u,N),Jf(f,u,N))},enqueueReplaceState:function(u,f,y){u=u._reactInternals;var N=ns(),L=kl(N);L.tag=1,L.payload=f,y!=null&&(L.callback=y),f=Pl(u,L,N),f!==null&&(kr(f,u,N),Jf(f,u,N))},enqueueForceUpdate:function(u,f){u=u._reactInternals;var y=ns(),N=kl(y);N.tag=2,f!=null&&(N.callback=f),f=Pl(u,N,y),f!==null&&(kr(f,u,y),Jf(f,u,y))}};function jO(u,f,y,N,L,D,Y){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(N,D,Y):f.prototype&&f.prototype.isPureReactComponent?!Vf(y,N)||!Vf(L,D):!0}function CO(u,f,y,N){u=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(y,N),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(y,N),f.state!==u&&F1.enqueueReplaceState(f,f.state,null)}function Yc(u,f){var y=f;if("ref"in f){y={};for(var N in f)N!=="ref"&&(y[N]=f[N])}if(u=u.defaultProps){y===f&&(y=h({},y));for(var L in u)y[L]===void 0&&(y[L]=u[L])}return y}function SO(u){r0(u)}function _O(u){console.error(u)}function AO(u){r0(u)}function A0(u,f){try{var y=u.onUncaughtError;y(f.value,{componentStack:f.stack})}catch(N){setTimeout(function(){throw N})}}function EO(u,f,y){try{var N=u.onCaughtError;N(y.value,{componentStack:y.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(L){setTimeout(function(){throw L})}}function B1(u,f,y){return y=kl(y),y.tag=3,y.payload={element:null},y.callback=function(){A0(u,f)},y}function TO(u){return u=kl(u),u.tag=3,u}function LO(u,f,y,N){var L=y.type.getDerivedStateFromError;if(typeof L=="function"){var D=N.value;u.payload=function(){return L(D)},u.callback=function(){EO(f,y,N)}}var Y=y.stateNode;Y!==null&&typeof Y.componentDidCatch=="function"&&(u.callback=function(){EO(f,y,N),typeof L!="function"&&(Rl===null?Rl=new Set([this]):Rl.add(this));var me=N.stack;this.componentDidCatch(N.value,{componentStack:me!==null?me:""})})}function vZ(u,f,y,N,L){if(y.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){if(f=y.alternate,f!==null&&Uu(f,y,L,!0),y=Zr.current,y!==null){switch(y.tag){case 31:case 13:return As===null?z0():y.alternate===null&&Wn===0&&(Wn=3),y.flags&=-257,y.flags|=65536,y.lanes=L,N===h0?y.flags|=16384:(f=y.updateQueue,f===null?y.updateQueue=new Set([N]):f.add(N),fC(u,N,L)),!1;case 22:return y.flags|=65536,N===h0?y.flags|=16384:(f=y.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([N])},y.updateQueue=f):(y=f.retryQueue,y===null?f.retryQueue=new Set([N]):y.add(N)),fC(u,N,L)),!1}throw Error(r(435,y.tag))}return fC(u,N,L),z0(),!1}if(zt)return f=Zr.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=L,N!==o1&&(u=Error(r(422),{cause:N}),Yf(js(u,y)))):(N!==o1&&(f=Error(r(423),{cause:N}),Yf(js(f,y))),u=u.current.alternate,u.flags|=65536,L&=-L,u.lanes|=L,N=js(N,y),L=B1(u.stateNode,N,L),y1(u,L),Wn!==4&&(Wn=2)),!1;var D=Error(r(520),{cause:N});if(D=js(D,y),fh===null?fh=[D]:fh.push(D),Wn!==4&&(Wn=2),f===null)return!0;N=js(N,y),y=f;do{switch(y.tag){case 3:return y.flags|=65536,u=L&-L,y.lanes|=u,u=B1(y.stateNode,N,u),y1(y,u),!1;case 1:if(f=y.type,D=y.stateNode,(y.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(Rl===null||!Rl.has(D))))return y.flags|=65536,L&=-L,y.lanes|=L,L=TO(L),LO(L,u,y,N),y1(y,L),!1}y=y.return}while(y!==null);return!1}var H1=Error(r(461)),da=!1;function Wa(u,f,y,N){f.child=u===null?OD(f,null,y,N):Wc(f,u.child,y,N)}function kO(u,f,y,N,L){y=y.render;var D=f.ref;if("ref"in N){var Y={};for(var me in N)me!=="ref"&&(Y[me]=N[me])}else Y=N;return Bc(f),N=C1(u,f,y,Y,D,L),me=S1(),u!==null&&!da?(_1(u,f,L),yo(u,f,L)):(zt&&me&&s1(f),f.flags|=1,Wa(u,f,N,L),f.child)}function PO(u,f,y,N,L){if(u===null){var D=y.type;return typeof D=="function"&&!n1(D)&&D.defaultProps===void 0&&y.compare===null?(f.tag=15,f.type=D,DO(u,f,D,N,L)):(u=l0(y.type,null,N,f,f.mode,L),u.ref=f.ref,u.return=f,f.child=u)}if(D=u.child,!X1(u,L)){var Y=D.memoizedProps;if(y=y.compare,y=y!==null?y:Vf,y(Y,N)&&u.ref===f.ref)return yo(u,f,L)}return f.flags|=1,u=mo(D,N),u.ref=f.ref,u.return=f,f.child=u}function DO(u,f,y,N,L){if(u!==null){var D=u.memoizedProps;if(Vf(D,N)&&u.ref===f.ref)if(da=!1,f.pendingProps=N=D,X1(u,L))(u.flags&131072)!==0&&(da=!0);else return f.lanes=u.lanes,yo(u,f,L)}return G1(u,f,y,N,L)}function OO(u,f,y,N){var L=N.children,D=u!==null?u.memoizedState:null;if(u===null&&f.stateNode===null&&(f.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),N.mode==="hidden"){if((f.flags&128)!==0){if(D=D!==null?D.baseLanes|y:y,u!==null){for(N=f.child=u.child,L=0;N!==null;)L=L|N.lanes|N.childLanes,N=N.sibling;N=L&~D}else N=0,f.child=null;return MO(u,f,D,y,N)}if((y&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},u!==null&&m0(f,D!==null?D.cachePool:null),D!==null?$D(f,D):v1(),RD(f);else return N=f.lanes=536870912,MO(u,f,D!==null?D.baseLanes|y:y,y,N)}else D!==null?(m0(f,D.cachePool),$D(f,D),Ol(),f.memoizedState=null):(u!==null&&m0(f,null),v1(),Ol());return Wa(u,f,L,y),f.child}function ih(u,f){return u!==null&&u.tag===22||f.stateNode!==null||(f.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.sibling}function MO(u,f,y,N,L){var D=h1();return D=D===null?null:{parent:la._currentValue,pool:D},f.memoizedState={baseLanes:y,cachePool:D},u!==null&&m0(f,null),v1(),RD(f),u!==null&&Uu(u,f,N,!0),f.childLanes=L,null}function E0(u,f){return f=L0({mode:f.mode,children:f.children},u.mode),f.ref=u.ref,u.child=f,f.return=u,f}function IO(u,f,y){return Wc(f,u.child,null,y),u=E0(f,f.pendingProps),u.flags|=2,Jr(f),f.memoizedState=null,u}function wZ(u,f,y){var N=f.pendingProps,L=(f.flags&128)!==0;if(f.flags&=-129,u===null){if(zt){if(N.mode==="hidden")return u=E0(f,N),f.lanes=536870912,ih(null,u);if(N1(f),(u=Cn)?(u=YM(u,_s),u=u!==null&&u.data==="&"?u:null,u!==null&&(f.memoizedState={dehydrated:u,treeContext:_l!==null?{id:_i,overflow:Ai}:null,retryLane:536870912,hydrationErrors:null},y=bD(u),y.return=f,f.child=y,Ga=f,Cn=null)):u=null,u===null)throw El(f);return f.lanes=536870912,null}return E0(f,N)}var D=u.memoizedState;if(D!==null){var Y=D.dehydrated;if(N1(f),L)if(f.flags&256)f.flags&=-257,f=IO(u,f,y);else if(f.memoizedState!==null)f.child=u.child,f.flags|=128,f=null;else throw Error(r(558));else if(da||Uu(u,f,y,!1),L=(y&u.childLanes)!==0,da||L){if(N=xn,N!==null&&(Y=tt(N,y),Y!==0&&Y!==D.retryLane))throw D.retryLane=Y,Rc(u,Y),kr(N,u,Y),H1;z0(),f=IO(u,f,y)}else u=D.treeContext,Cn=Es(Y.nextSibling),Ga=f,zt=!0,Al=null,_s=!1,u!==null&&ND(f,u),f=E0(f,N),f.flags|=4096;return f}return u=mo(u.child,{mode:N.mode,children:N.children}),u.ref=f.ref,f.child=u,u.return=f,u}function T0(u,f){var y=f.ref;if(y===null)u!==null&&u.ref!==null&&(f.flags|=4194816);else{if(typeof y!="function"&&typeof y!="object")throw Error(r(284));(u===null||u.ref!==y)&&(f.flags|=4194816)}}function G1(u,f,y,N,L){return Bc(f),y=C1(u,f,y,N,void 0,L),N=S1(),u!==null&&!da?(_1(u,f,L),yo(u,f,L)):(zt&&N&&s1(f),f.flags|=1,Wa(u,f,y,L),f.child)}function $O(u,f,y,N,L,D){return Bc(f),f.updateQueue=null,y=UD(f,N,y,L),zD(u),N=S1(),u!==null&&!da?(_1(u,f,D),yo(u,f,D)):(zt&&N&&s1(f),f.flags|=1,Wa(u,f,y,D),f.child)}function RO(u,f,y,N,L){if(Bc(f),f.stateNode===null){var D=Iu,Y=y.contextType;typeof Y=="object"&&Y!==null&&(D=Va(Y)),D=new y(N,D),f.memoizedState=D.state!==null&&D.state!==void 0?D.state:null,D.updater=F1,f.stateNode=D,D._reactInternals=f,D=f.stateNode,D.props=N,D.state=f.memoizedState,D.refs={},p1(f),Y=y.contextType,D.context=typeof Y=="object"&&Y!==null?Va(Y):Iu,D.state=f.memoizedState,Y=y.getDerivedStateFromProps,typeof Y=="function"&&(U1(f,y,Y,N),D.state=f.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof D.getSnapshotBeforeUpdate=="function"||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(Y=D.state,typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount(),Y!==D.state&&F1.enqueueReplaceState(D,D.state,null),th(f,N,D,L),eh(),D.state=f.memoizedState),typeof D.componentDidMount=="function"&&(f.flags|=4194308),N=!0}else if(u===null){D=f.stateNode;var me=f.memoizedProps,_e=Yc(y,me);D.props=_e;var Re=D.context,qe=y.contextType;Y=Iu,typeof qe=="object"&&qe!==null&&(Y=Va(qe));var Xe=y.getDerivedStateFromProps;qe=typeof Xe=="function"||typeof D.getSnapshotBeforeUpdate=="function",me=f.pendingProps!==me,qe||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(me||Re!==Y)&&CO(f,D,N,Y),Ll=!1;var Ue=f.memoizedState;D.state=Ue,th(f,N,D,L),eh(),Re=f.memoizedState,me||Ue!==Re||Ll?(typeof Xe=="function"&&(U1(f,y,Xe,N),Re=f.memoizedState),(_e=Ll||jO(f,y,_e,N,Ue,Re,Y))?(qe||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(f.flags|=4194308)):(typeof D.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=N,f.memoizedState=Re),D.props=N,D.state=Re,D.context=Y,N=_e):(typeof D.componentDidMount=="function"&&(f.flags|=4194308),N=!1)}else{D=f.stateNode,x1(u,f),Y=f.memoizedProps,qe=Yc(y,Y),D.props=qe,Xe=f.pendingProps,Ue=D.context,Re=y.contextType,_e=Iu,typeof Re=="object"&&Re!==null&&(_e=Va(Re)),me=y.getDerivedStateFromProps,(Re=typeof me=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(Y!==Xe||Ue!==_e)&&CO(f,D,N,_e),Ll=!1,Ue=f.memoizedState,D.state=Ue,th(f,N,D,L),eh();var Be=f.memoizedState;Y!==Xe||Ue!==Be||Ll||u!==null&&u.dependencies!==null&&d0(u.dependencies)?(typeof me=="function"&&(U1(f,y,me,N),Be=f.memoizedState),(qe=Ll||jO(f,y,qe,N,Ue,Be,_e)||u!==null&&u.dependencies!==null&&d0(u.dependencies))?(Re||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(N,Be,_e),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(N,Be,_e)),typeof D.componentDidUpdate=="function"&&(f.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof D.componentDidUpdate!="function"||Y===u.memoizedProps&&Ue===u.memoizedState||(f.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||Y===u.memoizedProps&&Ue===u.memoizedState||(f.flags|=1024),f.memoizedProps=N,f.memoizedState=Be),D.props=N,D.state=Be,D.context=_e,N=qe):(typeof D.componentDidUpdate!="function"||Y===u.memoizedProps&&Ue===u.memoizedState||(f.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||Y===u.memoizedProps&&Ue===u.memoizedState||(f.flags|=1024),N=!1)}return D=N,T0(u,f),N=(f.flags&128)!==0,D||N?(D=f.stateNode,y=N&&typeof y.getDerivedStateFromError!="function"?null:D.render(),f.flags|=1,u!==null&&N?(f.child=Wc(f,u.child,null,L),f.child=Wc(f,null,y,L)):Wa(u,f,y,L),f.memoizedState=D.state,u=f.child):u=yo(u,f,L),u}function zO(u,f,y,N){return Uc(),f.flags|=256,Wa(u,f,y,N),f.child}var V1={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function W1(u){return{baseLanes:u,cachePool:ED()}}function q1(u,f,y){return u=u!==null?u.childLanes&~y:0,f&&(u|=ts),u}function UO(u,f,y){var N=f.pendingProps,L=!1,D=(f.flags&128)!==0,Y;if((Y=D)||(Y=u!==null&&u.memoizedState===null?!1:(ea.current&2)!==0),Y&&(L=!0,f.flags&=-129),Y=(f.flags&32)!==0,f.flags&=-33,u===null){if(zt){if(L?Dl(f):Ol(),(u=Cn)?(u=YM(u,_s),u=u!==null&&u.data!=="&"?u:null,u!==null&&(f.memoizedState={dehydrated:u,treeContext:_l!==null?{id:_i,overflow:Ai}:null,retryLane:536870912,hydrationErrors:null},y=bD(u),y.return=f,f.child=y,Ga=f,Cn=null)):u=null,u===null)throw El(f);return TC(u)?f.lanes=32:f.lanes=536870912,null}var me=N.children;return N=N.fallback,L?(Ol(),L=f.mode,me=L0({mode:"hidden",children:me},L),N=zc(N,L,y,null),me.return=f,N.return=f,me.sibling=N,f.child=me,N=f.child,N.memoizedState=W1(y),N.childLanes=q1(u,Y,y),f.memoizedState=V1,ih(null,N)):(Dl(f),Y1(f,me))}var _e=u.memoizedState;if(_e!==null&&(me=_e.dehydrated,me!==null)){if(D)f.flags&256?(Dl(f),f.flags&=-257,f=K1(u,f,y)):f.memoizedState!==null?(Ol(),f.child=u.child,f.flags|=128,f=null):(Ol(),me=N.fallback,L=f.mode,N=L0({mode:"visible",children:N.children},L),me=zc(me,L,y,null),me.flags|=2,N.return=f,me.return=f,N.sibling=me,f.child=N,Wc(f,u.child,null,y),N=f.child,N.memoizedState=W1(y),N.childLanes=q1(u,Y,y),f.memoizedState=V1,f=ih(null,N));else if(Dl(f),TC(me)){if(Y=me.nextSibling&&me.nextSibling.dataset,Y)var Re=Y.dgst;Y=Re,N=Error(r(419)),N.stack="",N.digest=Y,Yf({value:N,source:null,stack:null}),f=K1(u,f,y)}else if(da||Uu(u,f,y,!1),Y=(y&u.childLanes)!==0,da||Y){if(Y=xn,Y!==null&&(N=tt(Y,y),N!==0&&N!==_e.retryLane))throw _e.retryLane=N,Rc(u,N),kr(Y,u,N),H1;EC(me)||z0(),f=K1(u,f,y)}else EC(me)?(f.flags|=192,f.child=u.child,f=null):(u=_e.treeContext,Cn=Es(me.nextSibling),Ga=f,zt=!0,Al=null,_s=!1,u!==null&&ND(f,u),f=Y1(f,N.children),f.flags|=4096);return f}return L?(Ol(),me=N.fallback,L=f.mode,_e=u.child,Re=_e.sibling,N=mo(_e,{mode:"hidden",children:N.children}),N.subtreeFlags=_e.subtreeFlags&65011712,Re!==null?me=mo(Re,me):(me=zc(me,L,y,null),me.flags|=2),me.return=f,N.return=f,N.sibling=me,f.child=N,ih(null,N),N=f.child,me=u.child.memoizedState,me===null?me=W1(y):(L=me.cachePool,L!==null?(_e=la._currentValue,L=L.parent!==_e?{parent:_e,pool:_e}:L):L=ED(),me={baseLanes:me.baseLanes|y,cachePool:L}),N.memoizedState=me,N.childLanes=q1(u,Y,y),f.memoizedState=V1,ih(u.child,N)):(Dl(f),y=u.child,u=y.sibling,y=mo(y,{mode:"visible",children:N.children}),y.return=f,y.sibling=null,u!==null&&(Y=f.deletions,Y===null?(f.deletions=[u],f.flags|=16):Y.push(u)),f.child=y,f.memoizedState=null,y)}function Y1(u,f){return f=L0({mode:"visible",children:f},u.mode),f.return=u,u.child=f}function L0(u,f){return u=Xr(22,u,null,f),u.lanes=0,u}function K1(u,f,y){return Wc(f,u.child,null,y),u=Y1(f,f.pendingProps.children),u.flags|=2,f.memoizedState=null,u}function FO(u,f,y){u.lanes|=f;var N=u.alternate;N!==null&&(N.lanes|=f),d1(u.return,f,y)}function Q1(u,f,y,N,L,D){var Y=u.memoizedState;Y===null?u.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:N,tail:y,tailMode:L,treeForkCount:D}:(Y.isBackwards=f,Y.rendering=null,Y.renderingStartTime=0,Y.last=N,Y.tail=y,Y.tailMode=L,Y.treeForkCount=D)}function BO(u,f,y){var N=f.pendingProps,L=N.revealOrder,D=N.tail;N=N.children;var Y=ea.current,me=(Y&2)!==0;if(me?(Y=Y&1|2,f.flags|=128):Y&=1,pe(ea,Y),Wa(u,f,N,y),N=zt?qf:0,!me&&u!==null&&(u.flags&128)!==0)e:for(u=f.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&FO(u,y,f);else if(u.tag===19)FO(u,y,f);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===f)break e;for(;u.sibling===null;){if(u.return===null||u.return===f)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}switch(L){case"forwards":for(y=f.child,L=null;y!==null;)u=y.alternate,u!==null&&y0(u)===null&&(L=y),y=y.sibling;y=L,y===null?(L=f.child,f.child=null):(L=y.sibling,y.sibling=null),Q1(f,!1,L,y,D,N);break;case"backwards":case"unstable_legacy-backwards":for(y=null,L=f.child,f.child=null;L!==null;){if(u=L.alternate,u!==null&&y0(u)===null){f.child=L;break}u=L.sibling,L.sibling=y,y=L,L=u}Q1(f,!0,y,null,D,N);break;case"together":Q1(f,!1,null,null,void 0,N);break;default:f.memoizedState=null}return f.child}function yo(u,f,y){if(u!==null&&(f.dependencies=u.dependencies),$l|=f.lanes,(y&f.childLanes)===0)if(u!==null){if(Uu(u,f,y,!1),(y&f.childLanes)===0)return null}else return null;if(u!==null&&f.child!==u.child)throw Error(r(153));if(f.child!==null){for(u=f.child,y=mo(u,u.pendingProps),f.child=y,y.return=f;u.sibling!==null;)u=u.sibling,y=y.sibling=mo(u,u.pendingProps),y.return=f;y.sibling=null}return f.child}function X1(u,f){return(u.lanes&f)!==0?!0:(u=u.dependencies,!!(u!==null&&d0(u)))}function NZ(u,f,y){switch(f.tag){case 3:Pe(f,f.stateNode.containerInfo),Tl(f,la,u.memoizedState.cache),Uc();break;case 27:case 5:Ne(f);break;case 4:Pe(f,f.stateNode.containerInfo);break;case 10:Tl(f,f.type,f.memoizedProps.value);break;case 31:if(f.memoizedState!==null)return f.flags|=128,N1(f),null;break;case 13:var N=f.memoizedState;if(N!==null)return N.dehydrated!==null?(Dl(f),f.flags|=128,null):(y&f.child.childLanes)!==0?UO(u,f,y):(Dl(f),u=yo(u,f,y),u!==null?u.sibling:null);Dl(f);break;case 19:var L=(u.flags&128)!==0;if(N=(y&f.childLanes)!==0,N||(Uu(u,f,y,!1),N=(y&f.childLanes)!==0),L){if(N)return BO(u,f,y);f.flags|=128}if(L=f.memoizedState,L!==null&&(L.rendering=null,L.tail=null,L.lastEffect=null),pe(ea,ea.current),N)break;return null;case 22:return f.lanes=0,OO(u,f,y,f.pendingProps);case 24:Tl(f,la,u.memoizedState.cache)}return yo(u,f,y)}function HO(u,f,y){if(u!==null)if(u.memoizedProps!==f.pendingProps)da=!0;else{if(!X1(u,y)&&(f.flags&128)===0)return da=!1,NZ(u,f,y);da=(u.flags&131072)!==0}else da=!1,zt&&(f.flags&1048576)!==0&&wD(f,qf,f.index);switch(f.lanes=0,f.tag){case 16:e:{var N=f.pendingProps;if(u=Gc(f.elementType),f.type=u,typeof u=="function")n1(u)?(N=Yc(u,N),f.tag=1,f=RO(null,f,u,N,y)):(f.tag=0,f=G1(null,f,u,N,y));else{if(u!=null){var L=u.$$typeof;if(L===_){f.tag=11,f=kO(null,f,u,N,y);break e}else if(L===T){f.tag=14,f=PO(null,f,u,N,y);break e}}throw f=q(u)||u,Error(r(306,f,""))}}return f;case 0:return G1(u,f,f.type,f.pendingProps,y);case 1:return N=f.type,L=Yc(N,f.pendingProps),RO(u,f,N,L,y);case 3:e:{if(Pe(f,f.stateNode.containerInfo),u===null)throw Error(r(387));N=f.pendingProps;var D=f.memoizedState;L=D.element,x1(u,f),th(f,N,null,y);var Y=f.memoizedState;if(N=Y.cache,Tl(f,la,N),N!==D.cache&&u1(f,[la],y,!0),eh(),N=Y.element,D.isDehydrated)if(D={element:N,isDehydrated:!1,cache:Y.cache},f.updateQueue.baseState=D,f.memoizedState=D,f.flags&256){f=zO(u,f,N,y);break e}else if(N!==L){L=js(Error(r(424)),f),Yf(L),f=zO(u,f,N,y);break e}else{switch(u=f.stateNode.containerInfo,u.nodeType){case 9:u=u.body;break;default:u=u.nodeName==="HTML"?u.ownerDocument.body:u}for(Cn=Es(u.firstChild),Ga=f,zt=!0,Al=null,_s=!0,y=OD(f,null,N,y),f.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling}else{if(Uc(),N===L){f=yo(u,f,y);break e}Wa(u,f,N,y)}f=f.child}return f;case 26:return T0(u,f),u===null?(y=e3(f.type,null,f.pendingProps,null))?f.memoizedState=y:zt||(y=f.type,u=f.pendingProps,N=W0(Te.current).createElement(y),N[Ha]=f,N[Sr]=u,qa(N,y,u),Da(N),f.stateNode=N):f.memoizedState=e3(f.type,u.memoizedProps,f.pendingProps,u.memoizedState),null;case 27:return Ne(f),u===null&&zt&&(N=f.stateNode=XM(f.type,f.pendingProps,Te.current),Ga=f,_s=!0,L=Cn,Bl(f.type)?(LC=L,Cn=Es(N.firstChild)):Cn=L),Wa(u,f,f.pendingProps.children,y),T0(u,f),u===null&&(f.flags|=4194304),f.child;case 5:return u===null&&zt&&((L=N=Cn)&&(N=ZZ(N,f.type,f.pendingProps,_s),N!==null?(f.stateNode=N,Ga=f,Cn=Es(N.firstChild),_s=!1,L=!0):L=!1),L||El(f)),Ne(f),L=f.type,D=f.pendingProps,Y=u!==null?u.memoizedProps:null,N=D.children,SC(L,D)?N=null:Y!==null&&SC(L,Y)&&(f.flags|=32),f.memoizedState!==null&&(L=C1(u,f,fZ,null,null,y),wh._currentValue=L),T0(u,f),Wa(u,f,N,y),f.child;case 6:return u===null&&zt&&((u=y=Cn)&&(y=JZ(y,f.pendingProps,_s),y!==null?(f.stateNode=y,Ga=f,Cn=null,u=!0):u=!1),u||El(f)),null;case 13:return UO(u,f,y);case 4:return Pe(f,f.stateNode.containerInfo),N=f.pendingProps,u===null?f.child=Wc(f,null,N,y):Wa(u,f,N,y),f.child;case 11:return kO(u,f,f.type,f.pendingProps,y);case 7:return Wa(u,f,f.pendingProps,y),f.child;case 8:return Wa(u,f,f.pendingProps.children,y),f.child;case 12:return Wa(u,f,f.pendingProps.children,y),f.child;case 10:return N=f.pendingProps,Tl(f,f.type,N.value),Wa(u,f,N.children,y),f.child;case 9:return L=f.type._context,N=f.pendingProps.children,Bc(f),L=Va(L),N=N(L),f.flags|=1,Wa(u,f,N,y),f.child;case 14:return PO(u,f,f.type,f.pendingProps,y);case 15:return DO(u,f,f.type,f.pendingProps,y);case 19:return BO(u,f,y);case 31:return wZ(u,f,y);case 22:return OO(u,f,y,f.pendingProps);case 24:return Bc(f),N=Va(la),u===null?(L=h1(),L===null&&(L=xn,D=m1(),L.pooledCache=D,D.refCount++,D!==null&&(L.pooledCacheLanes|=y),L=D),f.memoizedState={parent:N,cache:L},p1(f),Tl(f,la,L)):((u.lanes&y)!==0&&(x1(u,f),th(f,null,null,y),eh()),L=u.memoizedState,D=f.memoizedState,L.parent!==N?(L={parent:N,cache:N},f.memoizedState=L,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=L),Tl(f,la,N)):(N=D.cache,Tl(f,la,N),N!==L.cache&&u1(f,[la],y,!0))),Wa(u,f,f.pendingProps.children,y),f.child;case 29:throw f.pendingProps}throw Error(r(156,f.tag))}function bo(u){u.flags|=4}function Z1(u,f,y,N,L){if((f=(u.mode&32)!==0)&&(f=!1),f){if(u.flags|=16777216,(L&335544128)===L)if(u.stateNode.complete)u.flags|=8192;else if(pM())u.flags|=8192;else throw Vc=h0,g1}else u.flags&=-16777217}function GO(u,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)u.flags&=-16777217;else if(u.flags|=16777216,!s3(f))if(pM())u.flags|=8192;else throw Vc=h0,g1}function k0(u,f){f!==null&&(u.flags|=4),u.flags&16384&&(f=u.tag!==22?he():536870912,u.lanes|=f,Zu|=f)}function oh(u,f){if(!zt)switch(u.tailMode){case"hidden":f=u.tail;for(var y=null;f!==null;)f.alternate!==null&&(y=f),f=f.sibling;y===null?u.tail=null:y.sibling=null;break;case"collapsed":y=u.tail;for(var N=null;y!==null;)y.alternate!==null&&(N=y),y=y.sibling;N===null?f||u.tail===null?u.tail=null:u.tail.sibling=null:N.sibling=null}}function Sn(u){var f=u.alternate!==null&&u.alternate.child===u.child,y=0,N=0;if(f)for(var L=u.child;L!==null;)y|=L.lanes|L.childLanes,N|=L.subtreeFlags&65011712,N|=L.flags&65011712,L.return=u,L=L.sibling;else for(L=u.child;L!==null;)y|=L.lanes|L.childLanes,N|=L.subtreeFlags,N|=L.flags,L.return=u,L=L.sibling;return u.subtreeFlags|=N,u.childLanes=y,f}function jZ(u,f,y){var N=f.pendingProps;switch(i1(f),f.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Sn(f),null;case 1:return Sn(f),null;case 3:return y=f.stateNode,N=null,u!==null&&(N=u.memoizedState.cache),f.memoizedState.cache!==N&&(f.flags|=2048),go(la),$(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(u===null||u.child===null)&&(zu(f)?bo(f):u===null||u.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,l1())),Sn(f),null;case 26:var L=f.type,D=f.memoizedState;return u===null?(bo(f),D!==null?(Sn(f),GO(f,D)):(Sn(f),Z1(f,L,null,N,y))):D?D!==u.memoizedState?(bo(f),Sn(f),GO(f,D)):(Sn(f),f.flags&=-16777217):(u=u.memoizedProps,u!==N&&bo(f),Sn(f),Z1(f,L,u,N,y)),null;case 27:if(fe(f),y=Te.current,L=f.type,u!==null&&f.stateNode!=null)u.memoizedProps!==N&&bo(f);else{if(!N){if(f.stateNode===null)throw Error(r(166));return Sn(f),null}u=we.current,zu(f)?jD(f):(u=XM(L,N,y),f.stateNode=u,bo(f))}return Sn(f),null;case 5:if(fe(f),L=f.type,u!==null&&f.stateNode!=null)u.memoizedProps!==N&&bo(f);else{if(!N){if(f.stateNode===null)throw Error(r(166));return Sn(f),null}if(D=we.current,zu(f))jD(f);else{var Y=W0(Te.current);switch(D){case 1:D=Y.createElementNS("http://www.w3.org/2000/svg",L);break;case 2:D=Y.createElementNS("http://www.w3.org/1998/Math/MathML",L);break;default:switch(L){case"svg":D=Y.createElementNS("http://www.w3.org/2000/svg",L);break;case"math":D=Y.createElementNS("http://www.w3.org/1998/Math/MathML",L);break;case"script":D=Y.createElement("div"),D.innerHTML="<script><\/script>",D=D.removeChild(D.firstChild);break;case"select":D=typeof N.is=="string"?Y.createElement("select",{is:N.is}):Y.createElement("select"),N.multiple?D.multiple=!0:N.size&&(D.size=N.size);break;default:D=typeof N.is=="string"?Y.createElement(L,{is:N.is}):Y.createElement(L)}}D[Ha]=f,D[Sr]=N;e:for(Y=f.child;Y!==null;){if(Y.tag===5||Y.tag===6)D.appendChild(Y.stateNode);else if(Y.tag!==4&&Y.tag!==27&&Y.child!==null){Y.child.return=Y,Y=Y.child;continue}if(Y===f)break e;for(;Y.sibling===null;){if(Y.return===null||Y.return===f)break e;Y=Y.return}Y.sibling.return=Y.return,Y=Y.sibling}f.stateNode=D;e:switch(qa(D,L,N),L){case"button":case"input":case"select":case"textarea":N=!!N.autoFocus;break e;case"img":N=!0;break e;default:N=!1}N&&bo(f)}}return Sn(f),Z1(f,f.type,u===null?null:u.memoizedProps,f.pendingProps,y),null;case 6:if(u&&f.stateNode!=null)u.memoizedProps!==N&&bo(f);else{if(typeof N!="string"&&f.stateNode===null)throw Error(r(166));if(u=Te.current,zu(f)){if(u=f.stateNode,y=f.memoizedProps,N=null,L=Ga,L!==null)switch(L.tag){case 27:case 5:N=L.memoizedProps}u[Ha]=f,u=!!(u.nodeValue===y||N!==null&&N.suppressHydrationWarning===!0||UM(u.nodeValue,y)),u||El(f,!0)}else u=W0(u).createTextNode(N),u[Ha]=f,f.stateNode=u}return Sn(f),null;case 31:if(y=f.memoizedState,u===null||u.memoizedState!==null){if(N=zu(f),y!==null){if(u===null){if(!N)throw Error(r(318));if(u=f.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(557));u[Ha]=f}else Uc(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;Sn(f),u=!1}else y=l1(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=y),u=!0;if(!u)return f.flags&256?(Jr(f),f):(Jr(f),null);if((f.flags&128)!==0)throw Error(r(558))}return Sn(f),null;case 13:if(N=f.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(L=zu(f),N!==null&&N.dehydrated!==null){if(u===null){if(!L)throw Error(r(318));if(L=f.memoizedState,L=L!==null?L.dehydrated:null,!L)throw Error(r(317));L[Ha]=f}else Uc(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;Sn(f),L=!1}else L=l1(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=L),L=!0;if(!L)return f.flags&256?(Jr(f),f):(Jr(f),null)}return Jr(f),(f.flags&128)!==0?(f.lanes=y,f):(y=N!==null,u=u!==null&&u.memoizedState!==null,y&&(N=f.child,L=null,N.alternate!==null&&N.alternate.memoizedState!==null&&N.alternate.memoizedState.cachePool!==null&&(L=N.alternate.memoizedState.cachePool.pool),D=null,N.memoizedState!==null&&N.memoizedState.cachePool!==null&&(D=N.memoizedState.cachePool.pool),D!==L&&(N.flags|=2048)),y!==u&&y&&(f.child.flags|=8192),k0(f,f.updateQueue),Sn(f),null);case 4:return $(),u===null&&vC(f.stateNode.containerInfo),Sn(f),null;case 10:return go(f.type),Sn(f),null;case 19:if(ne(ea),N=f.memoizedState,N===null)return Sn(f),null;if(L=(f.flags&128)!==0,D=N.rendering,D===null)if(L)oh(N,!1);else{if(Wn!==0||u!==null&&(u.flags&128)!==0)for(u=f.child;u!==null;){if(D=y0(u),D!==null){for(f.flags|=128,oh(N,!1),u=D.updateQueue,f.updateQueue=u,k0(f,u),f.subtreeFlags=0,u=y,y=f.child;y!==null;)yD(y,u),y=y.sibling;return pe(ea,ea.current&1|2),zt&&fo(f,N.treeForkCount),f.child}u=u.sibling}N.tail!==null&&k()>I0&&(f.flags|=128,L=!0,oh(N,!1),f.lanes=4194304)}else{if(!L)if(u=y0(D),u!==null){if(f.flags|=128,L=!0,u=u.updateQueue,f.updateQueue=u,k0(f,u),oh(N,!0),N.tail===null&&N.tailMode==="hidden"&&!D.alternate&&!zt)return Sn(f),null}else 2*k()-N.renderingStartTime>I0&&y!==536870912&&(f.flags|=128,L=!0,oh(N,!1),f.lanes=4194304);N.isBackwards?(D.sibling=f.child,f.child=D):(u=N.last,u!==null?u.sibling=D:f.child=D,N.last=D)}return N.tail!==null?(u=N.tail,N.rendering=u,N.tail=u.sibling,N.renderingStartTime=k(),u.sibling=null,y=ea.current,pe(ea,L?y&1|2:y&1),zt&&fo(f,N.treeForkCount),u):(Sn(f),null);case 22:case 23:return Jr(f),w1(),N=f.memoizedState!==null,u!==null?u.memoizedState!==null!==N&&(f.flags|=8192):N&&(f.flags|=8192),N?(y&536870912)!==0&&(f.flags&128)===0&&(Sn(f),f.subtreeFlags&6&&(f.flags|=8192)):Sn(f),y=f.updateQueue,y!==null&&k0(f,y.retryQueue),y=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),N=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(N=f.memoizedState.cachePool.pool),N!==y&&(f.flags|=2048),u!==null&&ne(Hc),null;case 24:return y=null,u!==null&&(y=u.memoizedState.cache),f.memoizedState.cache!==y&&(f.flags|=2048),go(la),Sn(f),null;case 25:return null;case 30:return null}throw Error(r(156,f.tag))}function CZ(u,f){switch(i1(f),f.tag){case 1:return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 3:return go(la),$(),u=f.flags,(u&65536)!==0&&(u&128)===0?(f.flags=u&-65537|128,f):null;case 26:case 27:case 5:return fe(f),null;case 31:if(f.memoizedState!==null){if(Jr(f),f.alternate===null)throw Error(r(340));Uc()}return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 13:if(Jr(f),u=f.memoizedState,u!==null&&u.dehydrated!==null){if(f.alternate===null)throw Error(r(340));Uc()}return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 19:return ne(ea),null;case 4:return $(),null;case 10:return go(f.type),null;case 22:case 23:return Jr(f),w1(),u!==null&&ne(Hc),u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 24:return go(la),null;case 25:return null;default:return null}}function VO(u,f){switch(i1(f),f.tag){case 3:go(la),$();break;case 26:case 27:case 5:fe(f);break;case 4:$();break;case 31:f.memoizedState!==null&&Jr(f);break;case 13:Jr(f);break;case 19:ne(ea);break;case 10:go(f.type);break;case 22:case 23:Jr(f),w1(),u!==null&&ne(Hc);break;case 24:go(la)}}function lh(u,f){try{var y=f.updateQueue,N=y!==null?y.lastEffect:null;if(N!==null){var L=N.next;y=L;do{if((y.tag&u)===u){N=void 0;var D=y.create,Y=y.inst;N=D(),Y.destroy=N}y=y.next}while(y!==L)}}catch(me){an(f,f.return,me)}}function Ml(u,f,y){try{var N=f.updateQueue,L=N!==null?N.lastEffect:null;if(L!==null){var D=L.next;N=D;do{if((N.tag&u)===u){var Y=N.inst,me=Y.destroy;if(me!==void 0){Y.destroy=void 0,L=f;var _e=y,Re=me;try{Re()}catch(qe){an(L,_e,qe)}}}N=N.next}while(N!==D)}}catch(qe){an(f,f.return,qe)}}function WO(u){var f=u.updateQueue;if(f!==null){var y=u.stateNode;try{ID(f,y)}catch(N){an(u,u.return,N)}}}function qO(u,f,y){y.props=Yc(u.type,u.memoizedProps),y.state=u.memoizedState;try{y.componentWillUnmount()}catch(N){an(u,f,N)}}function ch(u,f){try{var y=u.ref;if(y!==null){switch(u.tag){case 26:case 27:case 5:var N=u.stateNode;break;case 30:N=u.stateNode;break;default:N=u.stateNode}typeof y=="function"?u.refCleanup=y(N):y.current=N}}catch(L){an(u,f,L)}}function Ei(u,f){var y=u.ref,N=u.refCleanup;if(y!==null)if(typeof N=="function")try{N()}catch(L){an(u,f,L)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof y=="function")try{y(null)}catch(L){an(u,f,L)}else y.current=null}function YO(u){var f=u.type,y=u.memoizedProps,N=u.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":y.autoFocus&&N.focus();break e;case"img":y.src?N.src=y.src:y.srcSet&&(N.srcset=y.srcSet)}}catch(L){an(u,u.return,L)}}function J1(u,f,y){try{var N=u.stateNode;WZ(N,u.type,y,f),N[Sr]=f}catch(L){an(u,u.return,L)}}function KO(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&Bl(u.type)||u.tag===4}function eC(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||KO(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&Bl(u.type)||u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function tC(u,f,y){var N=u.tag;if(N===5||N===6)u=u.stateNode,f?(y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y).insertBefore(u,f):(f=y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y,f.appendChild(u),y=y._reactRootContainer,y!=null||f.onclick!==null||(f.onclick=co));else if(N!==4&&(N===27&&Bl(u.type)&&(y=u.stateNode,f=null),u=u.child,u!==null))for(tC(u,f,y),u=u.sibling;u!==null;)tC(u,f,y),u=u.sibling}function P0(u,f,y){var N=u.tag;if(N===5||N===6)u=u.stateNode,f?y.insertBefore(u,f):y.appendChild(u);else if(N!==4&&(N===27&&Bl(u.type)&&(y=u.stateNode),u=u.child,u!==null))for(P0(u,f,y),u=u.sibling;u!==null;)P0(u,f,y),u=u.sibling}function QO(u){var f=u.stateNode,y=u.memoizedProps;try{for(var N=u.type,L=f.attributes;L.length;)f.removeAttributeNode(L[0]);qa(f,N,y),f[Ha]=u,f[Sr]=y}catch(D){an(u,u.return,D)}}var vo=!1,ua=!1,nC=!1,XO=typeof WeakSet=="function"?WeakSet:Set,Oa=null;function SZ(u,f){if(u=u.containerInfo,jC=J0,u=cD(u),Kj(u)){if("selectionStart"in u)var y={start:u.selectionStart,end:u.selectionEnd};else e:{y=(y=u.ownerDocument)&&y.defaultView||window;var N=y.getSelection&&y.getSelection();if(N&&N.rangeCount!==0){y=N.anchorNode;var L=N.anchorOffset,D=N.focusNode;N=N.focusOffset;try{y.nodeType,D.nodeType}catch{y=null;break e}var Y=0,me=-1,_e=-1,Re=0,qe=0,Xe=u,Ue=null;t:for(;;){for(var Be;Xe!==y||L!==0&&Xe.nodeType!==3||(me=Y+L),Xe!==D||N!==0&&Xe.nodeType!==3||(_e=Y+N),Xe.nodeType===3&&(Y+=Xe.nodeValue.length),(Be=Xe.firstChild)!==null;)Ue=Xe,Xe=Be;for(;;){if(Xe===u)break t;if(Ue===y&&++Re===L&&(me=Y),Ue===D&&++qe===N&&(_e=Y),(Be=Xe.nextSibling)!==null)break;Xe=Ue,Ue=Xe.parentNode}Xe=Be}y=me===-1||_e===-1?null:{start:me,end:_e}}else y=null}y=y||{start:0,end:0}}else y=null;for(CC={focusedElem:u,selectionRange:y},J0=!1,Oa=f;Oa!==null;)if(f=Oa,u=f.child,(f.subtreeFlags&1028)!==0&&u!==null)u.return=f,Oa=u;else for(;Oa!==null;){switch(f=Oa,D=f.alternate,u=f.flags,f.tag){case 0:if((u&4)!==0&&(u=f.updateQueue,u=u!==null?u.events:null,u!==null))for(y=0;y<u.length;y++)L=u[y],L.ref.impl=L.nextImpl;break;case 11:case 15:break;case 1:if((u&1024)!==0&&D!==null){u=void 0,y=f,L=D.memoizedProps,D=D.memoizedState,N=y.stateNode;try{var lt=Yc(y.type,L);u=N.getSnapshotBeforeUpdate(lt,D),N.__reactInternalSnapshotBeforeUpdate=u}catch(wt){an(y,y.return,wt)}}break;case 3:if((u&1024)!==0){if(u=f.stateNode.containerInfo,y=u.nodeType,y===9)AC(u);else if(y===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":AC(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(r(163))}if(u=f.sibling,u!==null){u.return=f.return,Oa=u;break}Oa=f.return}}function ZO(u,f,y){var N=y.flags;switch(y.tag){case 0:case 11:case 15:No(u,y),N&4&&lh(5,y);break;case 1:if(No(u,y),N&4)if(u=y.stateNode,f===null)try{u.componentDidMount()}catch(Y){an(y,y.return,Y)}else{var L=Yc(y.type,f.memoizedProps);f=f.memoizedState;try{u.componentDidUpdate(L,f,u.__reactInternalSnapshotBeforeUpdate)}catch(Y){an(y,y.return,Y)}}N&64&&WO(y),N&512&&ch(y,y.return);break;case 3:if(No(u,y),N&64&&(u=y.updateQueue,u!==null)){if(f=null,y.child!==null)switch(y.child.tag){case 27:case 5:f=y.child.stateNode;break;case 1:f=y.child.stateNode}try{ID(u,f)}catch(Y){an(y,y.return,Y)}}break;case 27:f===null&&N&4&&QO(y);case 26:case 5:No(u,y),f===null&&N&4&&YO(y),N&512&&ch(y,y.return);break;case 12:No(u,y);break;case 31:No(u,y),N&4&&tM(u,y);break;case 13:No(u,y),N&4&&nM(u,y),N&64&&(u=y.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(y=OZ.bind(null,y),eJ(u,y))));break;case 22:if(N=y.memoizedState!==null||vo,!N){f=f!==null&&f.memoizedState!==null||ua,L=vo;var D=ua;vo=N,(ua=f)&&!D?jo(u,y,(y.subtreeFlags&8772)!==0):No(u,y),vo=L,ua=D}break;case 30:break;default:No(u,y)}}function JO(u){var f=u.alternate;f!==null&&(u.alternate=null,JO(f)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(f=u.stateNode,f!==null&&Pj(f)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var Pn=null,Ar=!1;function wo(u,f,y){for(y=y.child;y!==null;)eM(u,f,y),y=y.sibling}function eM(u,f,y){if(xe&&typeof xe.onCommitFiberUnmount=="function")try{xe.onCommitFiberUnmount(se,y)}catch{}switch(y.tag){case 26:ua||Ei(y,f),wo(u,f,y),y.memoizedState?y.memoizedState.count--:y.stateNode&&(y=y.stateNode,y.parentNode.removeChild(y));break;case 27:ua||Ei(y,f);var N=Pn,L=Ar;Bl(y.type)&&(Pn=y.stateNode,Ar=!1),wo(u,f,y),yh(y.stateNode),Pn=N,Ar=L;break;case 5:ua||Ei(y,f);case 6:if(N=Pn,L=Ar,Pn=null,wo(u,f,y),Pn=N,Ar=L,Pn!==null)if(Ar)try{(Pn.nodeType===9?Pn.body:Pn.nodeName==="HTML"?Pn.ownerDocument.body:Pn).removeChild(y.stateNode)}catch(D){an(y,f,D)}else try{Pn.removeChild(y.stateNode)}catch(D){an(y,f,D)}break;case 18:Pn!==null&&(Ar?(u=Pn,WM(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,y.stateNode),im(u)):WM(Pn,y.stateNode));break;case 4:N=Pn,L=Ar,Pn=y.stateNode.containerInfo,Ar=!0,wo(u,f,y),Pn=N,Ar=L;break;case 0:case 11:case 14:case 15:Ml(2,y,f),ua||Ml(4,y,f),wo(u,f,y);break;case 1:ua||(Ei(y,f),N=y.stateNode,typeof N.componentWillUnmount=="function"&&qO(y,f,N)),wo(u,f,y);break;case 21:wo(u,f,y);break;case 22:ua=(N=ua)||y.memoizedState!==null,wo(u,f,y),ua=N;break;default:wo(u,f,y)}}function tM(u,f){if(f.memoizedState===null&&(u=f.alternate,u!==null&&(u=u.memoizedState,u!==null))){u=u.dehydrated;try{im(u)}catch(y){an(f,f.return,y)}}}function nM(u,f){if(f.memoizedState===null&&(u=f.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{im(u)}catch(y){an(f,f.return,y)}}function _Z(u){switch(u.tag){case 31:case 13:case 19:var f=u.stateNode;return f===null&&(f=u.stateNode=new XO),f;case 22:return u=u.stateNode,f=u._retryCache,f===null&&(f=u._retryCache=new XO),f;default:throw Error(r(435,u.tag))}}function D0(u,f){var y=_Z(u);f.forEach(function(N){if(!y.has(N)){y.add(N);var L=MZ.bind(null,u,N);N.then(L,L)}})}function Er(u,f){var y=f.deletions;if(y!==null)for(var N=0;N<y.length;N++){var L=y[N],D=u,Y=f,me=Y;e:for(;me!==null;){switch(me.tag){case 27:if(Bl(me.type)){Pn=me.stateNode,Ar=!1;break e}break;case 5:Pn=me.stateNode,Ar=!1;break e;case 3:case 4:Pn=me.stateNode.containerInfo,Ar=!0;break e}me=me.return}if(Pn===null)throw Error(r(160));eM(D,Y,L),Pn=null,Ar=!1,D=L.alternate,D!==null&&(D.return=null),L.return=null}if(f.subtreeFlags&13886)for(f=f.child;f!==null;)aM(f,u),f=f.sibling}var ai=null;function aM(u,f){var y=u.alternate,N=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:Er(f,u),Tr(u),N&4&&(Ml(3,u,u.return),lh(3,u),Ml(5,u,u.return));break;case 1:Er(f,u),Tr(u),N&512&&(ua||y===null||Ei(y,y.return)),N&64&&vo&&(u=u.updateQueue,u!==null&&(N=u.callbacks,N!==null&&(y=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=y===null?N:y.concat(N))));break;case 26:var L=ai;if(Er(f,u),Tr(u),N&512&&(ua||y===null||Ei(y,y.return)),N&4){var D=y!==null?y.memoizedState:null;if(N=u.memoizedState,y===null)if(N===null)if(u.stateNode===null){e:{N=u.type,y=u.memoizedProps,L=L.ownerDocument||L;t:switch(N){case"title":D=L.getElementsByTagName("title")[0],(!D||D[If]||D[Ha]||D.namespaceURI==="http://www.w3.org/2000/svg"||D.hasAttribute("itemprop"))&&(D=L.createElement(N),L.head.insertBefore(D,L.querySelector("head > title"))),qa(D,N,y),D[Ha]=u,Da(D),N=D;break e;case"link":var Y=a3("link","href",L).get(N+(y.href||""));if(Y){for(var me=0;me<Y.length;me++)if(D=Y[me],D.getAttribute("href")===(y.href==null||y.href===""?null:y.href)&&D.getAttribute("rel")===(y.rel==null?null:y.rel)&&D.getAttribute("title")===(y.title==null?null:y.title)&&D.getAttribute("crossorigin")===(y.crossOrigin==null?null:y.crossOrigin)){Y.splice(me,1);break t}}D=L.createElement(N),qa(D,N,y),L.head.appendChild(D);break;case"meta":if(Y=a3("meta","content",L).get(N+(y.content||""))){for(me=0;me<Y.length;me++)if(D=Y[me],D.getAttribute("content")===(y.content==null?null:""+y.content)&&D.getAttribute("name")===(y.name==null?null:y.name)&&D.getAttribute("property")===(y.property==null?null:y.property)&&D.getAttribute("http-equiv")===(y.httpEquiv==null?null:y.httpEquiv)&&D.getAttribute("charset")===(y.charSet==null?null:y.charSet)){Y.splice(me,1);break t}}D=L.createElement(N),qa(D,N,y),L.head.appendChild(D);break;default:throw Error(r(468,N))}D[Ha]=u,Da(D),N=D}u.stateNode=N}else r3(L,u.type,u.stateNode);else u.stateNode=n3(L,N,u.memoizedProps);else D!==N?(D===null?y.stateNode!==null&&(y=y.stateNode,y.parentNode.removeChild(y)):D.count--,N===null?r3(L,u.type,u.stateNode):n3(L,N,u.memoizedProps)):N===null&&u.stateNode!==null&&J1(u,u.memoizedProps,y.memoizedProps)}break;case 27:Er(f,u),Tr(u),N&512&&(ua||y===null||Ei(y,y.return)),y!==null&&N&4&&J1(u,u.memoizedProps,y.memoizedProps);break;case 5:if(Er(f,u),Tr(u),N&512&&(ua||y===null||Ei(y,y.return)),u.flags&32){L=u.stateNode;try{Tu(L,"")}catch(lt){an(u,u.return,lt)}}N&4&&u.stateNode!=null&&(L=u.memoizedProps,J1(u,L,y!==null?y.memoizedProps:L)),N&1024&&(nC=!0);break;case 6:if(Er(f,u),Tr(u),N&4){if(u.stateNode===null)throw Error(r(162));N=u.memoizedProps,y=u.stateNode;try{y.nodeValue=N}catch(lt){an(u,u.return,lt)}}break;case 3:if(K0=null,L=ai,ai=q0(f.containerInfo),Er(f,u),ai=L,Tr(u),N&4&&y!==null&&y.memoizedState.isDehydrated)try{im(f.containerInfo)}catch(lt){an(u,u.return,lt)}nC&&(nC=!1,rM(u));break;case 4:N=ai,ai=q0(u.stateNode.containerInfo),Er(f,u),Tr(u),ai=N;break;case 12:Er(f,u),Tr(u);break;case 31:Er(f,u),Tr(u),N&4&&(N=u.updateQueue,N!==null&&(u.updateQueue=null,D0(u,N)));break;case 13:Er(f,u),Tr(u),u.child.flags&8192&&u.memoizedState!==null!=(y!==null&&y.memoizedState!==null)&&(M0=k()),N&4&&(N=u.updateQueue,N!==null&&(u.updateQueue=null,D0(u,N)));break;case 22:L=u.memoizedState!==null;var _e=y!==null&&y.memoizedState!==null,Re=vo,qe=ua;if(vo=Re||L,ua=qe||_e,Er(f,u),ua=qe,vo=Re,Tr(u),N&8192)e:for(f=u.stateNode,f._visibility=L?f._visibility&-2:f._visibility|1,L&&(y===null||_e||vo||ua||Kc(u)),y=null,f=u;;){if(f.tag===5||f.tag===26){if(y===null){_e=y=f;try{if(D=_e.stateNode,L)Y=D.style,typeof Y.setProperty=="function"?Y.setProperty("display","none","important"):Y.display="none";else{me=_e.stateNode;var Xe=_e.memoizedProps.style,Ue=Xe!=null&&Xe.hasOwnProperty("display")?Xe.display:null;me.style.display=Ue==null||typeof Ue=="boolean"?"":(""+Ue).trim()}}catch(lt){an(_e,_e.return,lt)}}}else if(f.tag===6){if(y===null){_e=f;try{_e.stateNode.nodeValue=L?"":_e.memoizedProps}catch(lt){an(_e,_e.return,lt)}}}else if(f.tag===18){if(y===null){_e=f;try{var Be=_e.stateNode;L?qM(Be,!0):qM(_e.stateNode,!1)}catch(lt){an(_e,_e.return,lt)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===u)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break e;for(;f.sibling===null;){if(f.return===null||f.return===u)break e;y===f&&(y=null),f=f.return}y===f&&(y=null),f.sibling.return=f.return,f=f.sibling}N&4&&(N=u.updateQueue,N!==null&&(y=N.retryQueue,y!==null&&(N.retryQueue=null,D0(u,y))));break;case 19:Er(f,u),Tr(u),N&4&&(N=u.updateQueue,N!==null&&(u.updateQueue=null,D0(u,N)));break;case 30:break;case 21:break;default:Er(f,u),Tr(u)}}function Tr(u){var f=u.flags;if(f&2){try{for(var y,N=u.return;N!==null;){if(KO(N)){y=N;break}N=N.return}if(y==null)throw Error(r(160));switch(y.tag){case 27:var L=y.stateNode,D=eC(u);P0(u,D,L);break;case 5:var Y=y.stateNode;y.flags&32&&(Tu(Y,""),y.flags&=-33);var me=eC(u);P0(u,me,Y);break;case 3:case 4:var _e=y.stateNode.containerInfo,Re=eC(u);tC(u,Re,_e);break;default:throw Error(r(161))}}catch(qe){an(u,u.return,qe)}u.flags&=-3}f&4096&&(u.flags&=-4097)}function rM(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var f=u;rM(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),u=u.sibling}}function No(u,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)ZO(u,f.alternate,f),f=f.sibling}function Kc(u){for(u=u.child;u!==null;){var f=u;switch(f.tag){case 0:case 11:case 14:case 15:Ml(4,f,f.return),Kc(f);break;case 1:Ei(f,f.return);var y=f.stateNode;typeof y.componentWillUnmount=="function"&&qO(f,f.return,y),Kc(f);break;case 27:yh(f.stateNode);case 26:case 5:Ei(f,f.return),Kc(f);break;case 22:f.memoizedState===null&&Kc(f);break;case 30:Kc(f);break;default:Kc(f)}u=u.sibling}}function jo(u,f,y){for(y=y&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var N=f.alternate,L=u,D=f,Y=D.flags;switch(D.tag){case 0:case 11:case 15:jo(L,D,y),lh(4,D);break;case 1:if(jo(L,D,y),N=D,L=N.stateNode,typeof L.componentDidMount=="function")try{L.componentDidMount()}catch(Re){an(N,N.return,Re)}if(N=D,L=N.updateQueue,L!==null){var me=N.stateNode;try{var _e=L.shared.hiddenCallbacks;if(_e!==null)for(L.shared.hiddenCallbacks=null,L=0;L<_e.length;L++)MD(_e[L],me)}catch(Re){an(N,N.return,Re)}}y&&Y&64&&WO(D),ch(D,D.return);break;case 27:QO(D);case 26:case 5:jo(L,D,y),y&&N===null&&Y&4&&YO(D),ch(D,D.return);break;case 12:jo(L,D,y);break;case 31:jo(L,D,y),y&&Y&4&&tM(L,D);break;case 13:jo(L,D,y),y&&Y&4&&nM(L,D);break;case 22:D.memoizedState===null&&jo(L,D,y),ch(D,D.return);break;case 30:break;default:jo(L,D,y)}f=f.sibling}}function aC(u,f){var y=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),u=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(u=f.memoizedState.cachePool.pool),u!==y&&(u!=null&&u.refCount++,y!=null&&Kf(y))}function rC(u,f){u=null,f.alternate!==null&&(u=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==u&&(f.refCount++,u!=null&&Kf(u))}function ri(u,f,y,N){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)sM(u,f,y,N),f=f.sibling}function sM(u,f,y,N){var L=f.flags;switch(f.tag){case 0:case 11:case 15:ri(u,f,y,N),L&2048&&lh(9,f);break;case 1:ri(u,f,y,N);break;case 3:ri(u,f,y,N),L&2048&&(u=null,f.alternate!==null&&(u=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==u&&(f.refCount++,u!=null&&Kf(u)));break;case 12:if(L&2048){ri(u,f,y,N),u=f.stateNode;try{var D=f.memoizedProps,Y=D.id,me=D.onPostCommit;typeof me=="function"&&me(Y,f.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(_e){an(f,f.return,_e)}}else ri(u,f,y,N);break;case 31:ri(u,f,y,N);break;case 13:ri(u,f,y,N);break;case 23:break;case 22:D=f.stateNode,Y=f.alternate,f.memoizedState!==null?D._visibility&2?ri(u,f,y,N):dh(u,f):D._visibility&2?ri(u,f,y,N):(D._visibility|=2,Ku(u,f,y,N,(f.subtreeFlags&10256)!==0||!1)),L&2048&&aC(Y,f);break;case 24:ri(u,f,y,N),L&2048&&rC(f.alternate,f);break;default:ri(u,f,y,N)}}function Ku(u,f,y,N,L){for(L=L&&((f.subtreeFlags&10256)!==0||!1),f=f.child;f!==null;){var D=u,Y=f,me=y,_e=N,Re=Y.flags;switch(Y.tag){case 0:case 11:case 15:Ku(D,Y,me,_e,L),lh(8,Y);break;case 23:break;case 22:var qe=Y.stateNode;Y.memoizedState!==null?qe._visibility&2?Ku(D,Y,me,_e,L):dh(D,Y):(qe._visibility|=2,Ku(D,Y,me,_e,L)),L&&Re&2048&&aC(Y.alternate,Y);break;case 24:Ku(D,Y,me,_e,L),L&&Re&2048&&rC(Y.alternate,Y);break;default:Ku(D,Y,me,_e,L)}f=f.sibling}}function dh(u,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var y=u,N=f,L=N.flags;switch(N.tag){case 22:dh(y,N),L&2048&&aC(N.alternate,N);break;case 24:dh(y,N),L&2048&&rC(N.alternate,N);break;default:dh(y,N)}f=f.sibling}}var uh=8192;function Qu(u,f,y){if(u.subtreeFlags&uh)for(u=u.child;u!==null;)iM(u,f,y),u=u.sibling}function iM(u,f,y){switch(u.tag){case 26:Qu(u,f,y),u.flags&uh&&u.memoizedState!==null&&mJ(y,ai,u.memoizedState,u.memoizedProps);break;case 5:Qu(u,f,y);break;case 3:case 4:var N=ai;ai=q0(u.stateNode.containerInfo),Qu(u,f,y),ai=N;break;case 22:u.memoizedState===null&&(N=u.alternate,N!==null&&N.memoizedState!==null?(N=uh,uh=16777216,Qu(u,f,y),uh=N):Qu(u,f,y));break;default:Qu(u,f,y)}}function oM(u){var f=u.alternate;if(f!==null&&(u=f.child,u!==null)){f.child=null;do f=u.sibling,u.sibling=null,u=f;while(u!==null)}}function mh(u){var f=u.deletions;if((u.flags&16)!==0){if(f!==null)for(var y=0;y<f.length;y++){var N=f[y];Oa=N,cM(N,u)}oM(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)lM(u),u=u.sibling}function lM(u){switch(u.tag){case 0:case 11:case 15:mh(u),u.flags&2048&&Ml(9,u,u.return);break;case 3:mh(u);break;case 12:mh(u);break;case 22:var f=u.stateNode;u.memoizedState!==null&&f._visibility&2&&(u.return===null||u.return.tag!==13)?(f._visibility&=-3,O0(u)):mh(u);break;default:mh(u)}}function O0(u){var f=u.deletions;if((u.flags&16)!==0){if(f!==null)for(var y=0;y<f.length;y++){var N=f[y];Oa=N,cM(N,u)}oM(u)}for(u=u.child;u!==null;){switch(f=u,f.tag){case 0:case 11:case 15:Ml(8,f,f.return),O0(f);break;case 22:y=f.stateNode,y._visibility&2&&(y._visibility&=-3,O0(f));break;default:O0(f)}u=u.sibling}}function cM(u,f){for(;Oa!==null;){var y=Oa;switch(y.tag){case 0:case 11:case 15:Ml(8,y,f);break;case 23:case 22:if(y.memoizedState!==null&&y.memoizedState.cachePool!==null){var N=y.memoizedState.cachePool.pool;N!=null&&N.refCount++}break;case 24:Kf(y.memoizedState.cache)}if(N=y.child,N!==null)N.return=y,Oa=N;else e:for(y=u;Oa!==null;){N=Oa;var L=N.sibling,D=N.return;if(JO(N),N===y){Oa=null;break e}if(L!==null){L.return=D,Oa=L;break e}Oa=D}}}var AZ={getCacheForType:function(u){var f=Va(la),y=f.data.get(u);return y===void 0&&(y=u(),f.data.set(u,y)),y},cacheSignal:function(){return Va(la).controller.signal}},EZ=typeof WeakMap=="function"?WeakMap:Map,qt=0,xn=null,Dt=null,Mt=0,nn=0,es=null,Il=!1,Xu=!1,sC=!1,Co=0,Wn=0,$l=0,Qc=0,iC=0,ts=0,Zu=0,fh=null,Lr=null,oC=!1,M0=0,dM=0,I0=1/0,$0=null,Rl=null,ya=0,zl=null,Ju=null,So=0,lC=0,cC=null,uM=null,hh=0,dC=null;function ns(){return(qt&2)!==0&&Mt!==0?Mt&-Mt:K.T!==null?pC():un()}function mM(){if(ts===0)if((Mt&536870912)===0||zt){var u=Pt;Pt<<=1,(Pt&3932160)===0&&(Pt=262144),ts=u}else ts=536870912;return u=Zr.current,u!==null&&(u.flags|=32),ts}function kr(u,f,y){(u===xn&&(nn===2||nn===9)||u.cancelPendingCommit!==null)&&(em(u,0),Ul(u,Mt,ts,!1)),te(u,y),((qt&2)===0||u!==xn)&&(u===xn&&((qt&2)===0&&(Qc|=y),Wn===4&&Ul(u,Mt,ts,!1)),Ti(u))}function fM(u,f,y){if((qt&6)!==0)throw Error(r(327));var N=!y&&(f&127)===0&&(f&u.expiredLanes)===0||Jn(u,f),L=N?kZ(u,f):mC(u,f,!0),D=N;do{if(L===0){Xu&&!N&&Ul(u,f,0,!1);break}else{if(y=u.current.alternate,D&&!TZ(y)){L=mC(u,f,!1),D=!1;continue}if(L===2){if(D=f,u.errorRecoveryDisabledLanes&D)var Y=0;else Y=u.pendingLanes&-536870913,Y=Y!==0?Y:Y&536870912?536870912:0;if(Y!==0){f=Y;e:{var me=u;L=fh;var _e=me.current.memoizedState.isDehydrated;if(_e&&(em(me,Y).flags|=256),Y=mC(me,Y,!1),Y!==2){if(sC&&!_e){me.errorRecoveryDisabledLanes|=D,Qc|=D,L=4;break e}D=Lr,Lr=L,D!==null&&(Lr===null?Lr=D:Lr.push.apply(Lr,D))}L=Y}if(D=!1,L!==2)continue}}if(L===1){em(u,0),Ul(u,f,0,!0);break}e:{switch(N=u,D=L,D){case 0:case 1:throw Error(r(345));case 4:if((f&4194048)!==f)break;case 6:Ul(N,f,ts,!Il);break e;case 2:Lr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((f&62914560)===f&&(L=M0+300-k(),10<L)){if(Ul(N,f,ts,!Il),oa(N,0,!0)!==0)break e;So=f,N.timeoutHandle=GM(hM.bind(null,N,y,Lr,$0,oC,f,ts,Qc,Zu,Il,D,"Throttled",-0,0),L);break e}hM(N,y,Lr,$0,oC,f,ts,Qc,Zu,Il,D,null,-0,0)}}break}while(!0);Ti(u)}function hM(u,f,y,N,L,D,Y,me,_e,Re,qe,Xe,Ue,Be){if(u.timeoutHandle=-1,Xe=f.subtreeFlags,Xe&8192||(Xe&16785408)===16785408){Xe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:co},iM(f,D,Xe);var lt=(D&62914560)===D?M0-k():(D&4194048)===D?dM-k():0;if(lt=fJ(Xe,lt),lt!==null){So=D,u.cancelPendingCommit=lt(NM.bind(null,u,f,D,y,N,L,Y,me,_e,qe,Xe,null,Ue,Be)),Ul(u,D,Y,!Re);return}}NM(u,f,D,y,N,L,Y,me,_e)}function TZ(u){for(var f=u;;){var y=f.tag;if((y===0||y===11||y===15)&&f.flags&16384&&(y=f.updateQueue,y!==null&&(y=y.stores,y!==null)))for(var N=0;N<y.length;N++){var L=y[N],D=L.getSnapshot;L=L.value;try{if(!Qr(D(),L))return!1}catch{return!1}}if(y=f.child,f.subtreeFlags&16384&&y!==null)y.return=f,f=y;else{if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Ul(u,f,y,N){f&=~iC,f&=~Qc,u.suspendedLanes|=f,u.pingedLanes&=~f,N&&(u.warmLanes|=f),N=u.expirationTimes;for(var L=f;0<L;){var D=31-Me(L),Y=1<<D;N[D]=-1,L&=~Y}y!==0&&je(u,y,f)}function R0(){return(qt&6)===0?(gh(0),!1):!0}function uC(){if(Dt!==null){if(nn===0)var u=Dt.return;else u=Dt,ho=Fc=null,A1(u),Gu=null,Xf=0,u=Dt;for(;u!==null;)VO(u.alternate,u),u=u.return;Dt=null}}function em(u,f){var y=u.timeoutHandle;y!==-1&&(u.timeoutHandle=-1,KZ(y)),y=u.cancelPendingCommit,y!==null&&(u.cancelPendingCommit=null,y()),So=0,uC(),xn=u,Dt=y=mo(u.current,null),Mt=f,nn=0,es=null,Il=!1,Xu=Jn(u,f),sC=!1,Zu=ts=iC=Qc=$l=Wn=0,Lr=fh=null,oC=!1,(f&8)!==0&&(f|=f&32);var N=u.entangledLanes;if(N!==0)for(u=u.entanglements,N&=f;0<N;){var L=31-Me(N),D=1<<L;f|=u[L],N&=~D}return Co=f,s0(),y}function gM(u,f){_t=null,K.H=sh,f===Hu||f===f0?(f=kD(),nn=3):f===g1?(f=kD(),nn=4):nn=f===H1?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,es=f,Dt===null&&(Wn=1,A0(u,js(f,u.current)))}function pM(){var u=Zr.current;return u===null?!0:(Mt&4194048)===Mt?As===null:(Mt&62914560)===Mt||(Mt&536870912)!==0?u===As:!1}function xM(){var u=K.H;return K.H=sh,u===null?sh:u}function yM(){var u=K.A;return K.A=AZ,u}function z0(){Wn=4,Il||(Mt&4194048)!==Mt&&Zr.current!==null||(Xu=!0),($l&134217727)===0&&(Qc&134217727)===0||xn===null||Ul(xn,Mt,ts,!1)}function mC(u,f,y){var N=qt;qt|=2;var L=xM(),D=yM();(xn!==u||Mt!==f)&&($0=null,em(u,f)),f=!1;var Y=Wn;e:do try{if(nn!==0&&Dt!==null){var me=Dt,_e=es;switch(nn){case 8:uC(),Y=6;break e;case 3:case 2:case 9:case 6:Zr.current===null&&(f=!0);var Re=nn;if(nn=0,es=null,tm(u,me,_e,Re),y&&Xu){Y=0;break e}break;default:Re=nn,nn=0,es=null,tm(u,me,_e,Re)}}LZ(),Y=Wn;break}catch(qe){gM(u,qe)}while(!0);return f&&u.shellSuspendCounter++,ho=Fc=null,qt=N,K.H=L,K.A=D,Dt===null&&(xn=null,Mt=0,s0()),Y}function LZ(){for(;Dt!==null;)bM(Dt)}function kZ(u,f){var y=qt;qt|=2;var N=xM(),L=yM();xn!==u||Mt!==f?($0=null,I0=k()+500,em(u,f)):Xu=Jn(u,f);e:do try{if(nn!==0&&Dt!==null){f=Dt;var D=es;t:switch(nn){case 1:nn=0,es=null,tm(u,f,D,1);break;case 2:case 9:if(TD(D)){nn=0,es=null,vM(f);break}f=function(){nn!==2&&nn!==9||xn!==u||(nn=7),Ti(u)},D.then(f,f);break e;case 3:nn=7;break e;case 4:nn=5;break e;case 7:TD(D)?(nn=0,es=null,vM(f)):(nn=0,es=null,tm(u,f,D,7));break;case 5:var Y=null;switch(Dt.tag){case 26:Y=Dt.memoizedState;case 5:case 27:var me=Dt;if(Y?s3(Y):me.stateNode.complete){nn=0,es=null;var _e=me.sibling;if(_e!==null)Dt=_e;else{var Re=me.return;Re!==null?(Dt=Re,U0(Re)):Dt=null}break t}}nn=0,es=null,tm(u,f,D,5);break;case 6:nn=0,es=null,tm(u,f,D,6);break;case 8:uC(),Wn=6;break e;default:throw Error(r(462))}}PZ();break}catch(qe){gM(u,qe)}while(!0);return ho=Fc=null,K.H=N,K.A=L,qt=y,Dt!==null?0:(xn=null,Mt=0,s0(),Wn)}function PZ(){for(;Dt!==null&&!Se();)bM(Dt)}function bM(u){var f=HO(u.alternate,u,Co);u.memoizedProps=u.pendingProps,f===null?U0(u):Dt=f}function vM(u){var f=u,y=f.alternate;switch(f.tag){case 15:case 0:f=$O(y,f,f.pendingProps,f.type,void 0,Mt);break;case 11:f=$O(y,f,f.pendingProps,f.type.render,f.ref,Mt);break;case 5:A1(f);default:VO(y,f),f=Dt=yD(f,Co),f=HO(y,f,Co)}u.memoizedProps=u.pendingProps,f===null?U0(u):Dt=f}function tm(u,f,y,N){ho=Fc=null,A1(f),Gu=null,Xf=0;var L=f.return;try{if(vZ(u,L,f,y,Mt)){Wn=1,A0(u,js(y,u.current)),Dt=null;return}}catch(D){if(L!==null)throw Dt=L,D;Wn=1,A0(u,js(y,u.current)),Dt=null;return}f.flags&32768?(zt||N===1?u=!0:Xu||(Mt&536870912)!==0?u=!1:(Il=u=!0,(N===2||N===9||N===3||N===6)&&(N=Zr.current,N!==null&&N.tag===13&&(N.flags|=16384))),wM(f,u)):U0(f)}function U0(u){var f=u;do{if((f.flags&32768)!==0){wM(f,Il);return}u=f.return;var y=jZ(f.alternate,f,Co);if(y!==null){Dt=y;return}if(f=f.sibling,f!==null){Dt=f;return}Dt=f=u}while(f!==null);Wn===0&&(Wn=5)}function wM(u,f){do{var y=CZ(u.alternate,u);if(y!==null){y.flags&=32767,Dt=y;return}if(y=u.return,y!==null&&(y.flags|=32768,y.subtreeFlags=0,y.deletions=null),!f&&(u=u.sibling,u!==null)){Dt=u;return}Dt=u=y}while(u!==null);Wn=6,Dt=null}function NM(u,f,y,N,L,D,Y,me,_e){u.cancelPendingCommit=null;do F0();while(ya!==0);if((qt&6)!==0)throw Error(r(327));if(f!==null){if(f===u.current)throw Error(r(177));if(D=f.lanes|f.childLanes,D|=e1,ve(u,y,D,Y,me,_e),u===xn&&(Dt=xn=null,Mt=0),Ju=f,zl=u,So=y,lC=D,cC=L,uM=N,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,IZ(z,function(){return AM(),null})):(u.callbackNode=null,u.callbackPriority=0),N=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||N){N=K.T,K.T=null,L=B.p,B.p=2,Y=qt,qt|=4;try{SZ(u,f,y)}finally{qt=Y,B.p=L,K.T=N}}ya=1,jM(),CM(),SM()}}function jM(){if(ya===1){ya=0;var u=zl,f=Ju,y=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||y){y=K.T,K.T=null;var N=B.p;B.p=2;var L=qt;qt|=4;try{aM(f,u);var D=CC,Y=cD(u.containerInfo),me=D.focusedElem,_e=D.selectionRange;if(Y!==me&&me&&me.ownerDocument&&lD(me.ownerDocument.documentElement,me)){if(_e!==null&&Kj(me)){var Re=_e.start,qe=_e.end;if(qe===void 0&&(qe=Re),"selectionStart"in me)me.selectionStart=Re,me.selectionEnd=Math.min(qe,me.value.length);else{var Xe=me.ownerDocument||document,Ue=Xe&&Xe.defaultView||window;if(Ue.getSelection){var Be=Ue.getSelection(),lt=me.textContent.length,wt=Math.min(_e.start,lt),hn=_e.end===void 0?wt:Math.min(_e.end,lt);!Be.extend&&wt>hn&&(Y=hn,hn=wt,wt=Y);var Oe=oD(me,wt),Le=oD(me,hn);if(Oe&&Le&&(Be.rangeCount!==1||Be.anchorNode!==Oe.node||Be.anchorOffset!==Oe.offset||Be.focusNode!==Le.node||Be.focusOffset!==Le.offset)){var $e=Xe.createRange();$e.setStart(Oe.node,Oe.offset),Be.removeAllRanges(),wt>hn?(Be.addRange($e),Be.extend(Le.node,Le.offset)):($e.setEnd(Le.node,Le.offset),Be.addRange($e))}}}}for(Xe=[],Be=me;Be=Be.parentNode;)Be.nodeType===1&&Xe.push({element:Be,left:Be.scrollLeft,top:Be.scrollTop});for(typeof me.focus=="function"&&me.focus(),me=0;me<Xe.length;me++){var Qe=Xe[me];Qe.element.scrollLeft=Qe.left,Qe.element.scrollTop=Qe.top}}J0=!!jC,CC=jC=null}finally{qt=L,B.p=N,K.T=y}}u.current=f,ya=2}}function CM(){if(ya===2){ya=0;var u=zl,f=Ju,y=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||y){y=K.T,K.T=null;var N=B.p;B.p=2;var L=qt;qt|=4;try{ZO(u,f.alternate,f)}finally{qt=L,B.p=N,K.T=y}}ya=3}}function SM(){if(ya===4||ya===3){ya=0,Ve();var u=zl,f=Ju,y=So,N=uM;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?ya=5:(ya=0,Ju=zl=null,_M(u,u.pendingLanes));var L=u.pendingLanes;if(L===0&&(Rl=null),tn(y),f=f.stateNode,xe&&typeof xe.onCommitFiberRoot=="function")try{xe.onCommitFiberRoot(se,f,void 0,(f.current.flags&128)===128)}catch{}if(N!==null){f=K.T,L=B.p,B.p=2,K.T=null;try{for(var D=u.onRecoverableError,Y=0;Y<N.length;Y++){var me=N[Y];D(me.value,{componentStack:me.stack})}}finally{K.T=f,B.p=L}}(So&3)!==0&&F0(),Ti(u),L=u.pendingLanes,(y&261930)!==0&&(L&42)!==0?u===dC?hh++:(hh=0,dC=u):hh=0,gh(0)}}function _M(u,f){(u.pooledCacheLanes&=f)===0&&(f=u.pooledCache,f!=null&&(u.pooledCache=null,Kf(f)))}function F0(){return jM(),CM(),SM(),AM()}function AM(){if(ya!==5)return!1;var u=zl,f=lC;lC=0;var y=tn(So),N=K.T,L=B.p;try{B.p=32>y?32:y,K.T=null,y=cC,cC=null;var D=zl,Y=So;if(ya=0,Ju=zl=null,So=0,(qt&6)!==0)throw Error(r(331));var me=qt;if(qt|=4,lM(D.current),sM(D,D.current,Y,y),qt=me,gh(0,!1),xe&&typeof xe.onPostCommitFiberRoot=="function")try{xe.onPostCommitFiberRoot(se,D)}catch{}return!0}finally{B.p=L,K.T=N,_M(u,f)}}function EM(u,f,y){f=js(y,f),f=B1(u.stateNode,f,2),u=Pl(u,f,2),u!==null&&(te(u,2),Ti(u))}function an(u,f,y){if(u.tag===3)EM(u,u,y);else for(;f!==null;){if(f.tag===3){EM(f,u,y);break}else if(f.tag===1){var N=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof N.componentDidCatch=="function"&&(Rl===null||!Rl.has(N))){u=js(y,u),y=TO(2),N=Pl(f,y,2),N!==null&&(LO(y,N,f,u),te(N,2),Ti(N));break}}f=f.return}}function fC(u,f,y){var N=u.pingCache;if(N===null){N=u.pingCache=new EZ;var L=new Set;N.set(f,L)}else L=N.get(f),L===void 0&&(L=new Set,N.set(f,L));L.has(y)||(sC=!0,L.add(y),u=DZ.bind(null,u,f,y),f.then(u,u))}function DZ(u,f,y){var N=u.pingCache;N!==null&&N.delete(f),u.pingedLanes|=u.suspendedLanes&y,u.warmLanes&=~y,xn===u&&(Mt&y)===y&&(Wn===4||Wn===3&&(Mt&62914560)===Mt&&300>k()-M0?(qt&2)===0&&em(u,0):iC|=y,Zu===Mt&&(Zu=0)),Ti(u)}function TM(u,f){f===0&&(f=he()),u=Rc(u,f),u!==null&&(te(u,f),Ti(u))}function OZ(u){var f=u.memoizedState,y=0;f!==null&&(y=f.retryLane),TM(u,y)}function MZ(u,f){var y=0;switch(u.tag){case 31:case 13:var N=u.stateNode,L=u.memoizedState;L!==null&&(y=L.retryLane);break;case 19:N=u.stateNode;break;case 22:N=u.stateNode._retryCache;break;default:throw Error(r(314))}N!==null&&N.delete(f),TM(u,y)}function IZ(u,f){return Ke(u,f)}var B0=null,nm=null,hC=!1,H0=!1,gC=!1,Fl=0;function Ti(u){u!==nm&&u.next===null&&(nm===null?B0=nm=u:nm=nm.next=u),H0=!0,hC||(hC=!0,RZ())}function gh(u,f){if(!gC&&H0){gC=!0;do for(var y=!1,N=B0;N!==null;){if(u!==0){var L=N.pendingLanes;if(L===0)var D=0;else{var Y=N.suspendedLanes,me=N.pingedLanes;D=(1<<31-Me(42|u)+1)-1,D&=L&~(Y&~me),D=D&201326741?D&201326741|1:D?D|2:0}D!==0&&(y=!0,DM(N,D))}else D=Mt,D=oa(N,N===xn?D:0,N.cancelPendingCommit!==null||N.timeoutHandle!==-1),(D&3)===0||Jn(N,D)||(y=!0,DM(N,D));N=N.next}while(y);gC=!1}}function $Z(){LM()}function LM(){H0=hC=!1;var u=0;Fl!==0&&YZ()&&(u=Fl);for(var f=k(),y=null,N=B0;N!==null;){var L=N.next,D=kM(N,f);D===0?(N.next=null,y===null?B0=L:y.next=L,L===null&&(nm=y)):(y=N,(u!==0||(D&3)!==0)&&(H0=!0)),N=L}ya!==0&&ya!==5||gh(u),Fl!==0&&(Fl=0)}function kM(u,f){for(var y=u.suspendedLanes,N=u.pingedLanes,L=u.expirationTimes,D=u.pendingLanes&-62914561;0<D;){var Y=31-Me(D),me=1<<Y,_e=L[Y];_e===-1?((me&y)===0||(me&N)!==0)&&(L[Y]=P(me,f)):_e<=f&&(u.expiredLanes|=me),D&=~me}if(f=xn,y=Mt,y=oa(u,u===f?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),N=u.callbackNode,y===0||u===f&&(nn===2||nn===9)||u.cancelPendingCommit!==null)return N!==null&&N!==null&&He(N),u.callbackNode=null,u.callbackPriority=0;if((y&3)===0||Jn(u,y)){if(f=y&-y,f===u.callbackPriority)return f;switch(N!==null&&He(N),tn(y)){case 2:case 8:y=be;break;case 32:y=z;break;case 268435456:y=ie;break;default:y=z}return N=PM.bind(null,u),y=Ke(y,N),u.callbackPriority=f,u.callbackNode=y,f}return N!==null&&N!==null&&He(N),u.callbackPriority=2,u.callbackNode=null,2}function PM(u,f){if(ya!==0&&ya!==5)return u.callbackNode=null,u.callbackPriority=0,null;var y=u.callbackNode;if(F0()&&u.callbackNode!==y)return null;var N=Mt;return N=oa(u,u===xn?N:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),N===0?null:(fM(u,N,f),kM(u,k()),u.callbackNode!=null&&u.callbackNode===y?PM.bind(null,u):null)}function DM(u,f){if(F0())return null;fM(u,f,!0)}function RZ(){QZ(function(){(qt&6)!==0?Ke(re,$Z):LM()})}function pC(){if(Fl===0){var u=Fu;u===0&&(u=Nt,Nt<<=1,(Nt&261888)===0&&(Nt=256)),Fl=u}return Fl}function OM(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:Xx(""+u)}function MM(u,f){var y=f.ownerDocument.createElement("input");return y.name=f.name,y.value=f.value,u.id&&y.setAttribute("form",u.id),f.parentNode.insertBefore(y,f),u=new FormData(u),y.parentNode.removeChild(y),u}function zZ(u,f,y,N,L){if(f==="submit"&&y&&y.stateNode===L){var D=OM((L[Sr]||null).action),Y=N.submitter;Y&&(f=(f=Y[Sr]||null)?OM(f.formAction):Y.getAttribute("formAction"),f!==null&&(D=f,Y=null));var me=new t0("action","action",null,N,L);u.push({event:me,listeners:[{instance:null,listener:function(){if(N.defaultPrevented){if(Fl!==0){var _e=Y?MM(L,Y):new FormData(L);I1(y,{pending:!0,data:_e,method:L.method,action:D},null,_e)}}else typeof D=="function"&&(me.preventDefault(),_e=Y?MM(L,Y):new FormData(L),I1(y,{pending:!0,data:_e,method:L.method,action:D},D,_e))},currentTarget:L}]})}}for(var xC=0;xC<Jj.length;xC++){var yC=Jj[xC],UZ=yC.toLowerCase(),FZ=yC[0].toUpperCase()+yC.slice(1);ni(UZ,"on"+FZ)}ni(mD,"onAnimationEnd"),ni(fD,"onAnimationIteration"),ni(hD,"onAnimationStart"),ni("dblclick","onDoubleClick"),ni("focusin","onFocus"),ni("focusout","onBlur"),ni(aZ,"onTransitionRun"),ni(rZ,"onTransitionStart"),ni(sZ,"onTransitionCancel"),ni(gD,"onTransitionEnd"),Au("onMouseEnter",["mouseout","mouseover"]),Au("onMouseLeave",["mouseout","mouseover"]),Au("onPointerEnter",["pointerout","pointerover"]),Au("onPointerLeave",["pointerout","pointerover"]),Oc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Oc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Oc("onBeforeInput",["compositionend","keypress","textInput","paste"]),Oc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Oc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Oc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ph="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BZ=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ph));function IM(u,f){f=(f&4)!==0;for(var y=0;y<u.length;y++){var N=u[y],L=N.event;N=N.listeners;e:{var D=void 0;if(f)for(var Y=N.length-1;0<=Y;Y--){var me=N[Y],_e=me.instance,Re=me.currentTarget;if(me=me.listener,_e!==D&&L.isPropagationStopped())break e;D=me,L.currentTarget=Re;try{D(L)}catch(qe){r0(qe)}L.currentTarget=null,D=_e}else for(Y=0;Y<N.length;Y++){if(me=N[Y],_e=me.instance,Re=me.currentTarget,me=me.listener,_e!==D&&L.isPropagationStopped())break e;D=me,L.currentTarget=Re;try{D(L)}catch(qe){r0(qe)}L.currentTarget=null,D=_e}}}}function Ot(u,f){var y=f[kj];y===void 0&&(y=f[kj]=new Set);var N=u+"__bubble";y.has(N)||($M(f,u,2,!1),y.add(N))}function bC(u,f,y){var N=0;f&&(N|=4),$M(y,u,N,f)}var G0="_reactListening"+Math.random().toString(36).slice(2);function vC(u){if(!u[G0]){u[G0]=!0,LP.forEach(function(y){y!=="selectionchange"&&(BZ.has(y)||bC(y,!1,u),bC(y,!0,u))});var f=u.nodeType===9?u:u.ownerDocument;f===null||f[G0]||(f[G0]=!0,bC("selectionchange",!1,f))}}function $M(u,f,y,N){switch(m3(f)){case 2:var L=pJ;break;case 8:L=xJ;break;default:L=MC}y=L.bind(null,f,y,u),L=void 0,!Uj||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(L=!0),N?L!==void 0?u.addEventListener(f,y,{capture:!0,passive:L}):u.addEventListener(f,y,!0):L!==void 0?u.addEventListener(f,y,{passive:L}):u.addEventListener(f,y,!1)}function wC(u,f,y,N,L){var D=N;if((f&1)===0&&(f&2)===0&&N!==null)e:for(;;){if(N===null)return;var Y=N.tag;if(Y===3||Y===4){var me=N.stateNode.containerInfo;if(me===L)break;if(Y===4)for(Y=N.return;Y!==null;){var _e=Y.tag;if((_e===3||_e===4)&&Y.stateNode.containerInfo===L)return;Y=Y.return}for(;me!==null;){if(Y=Cu(me),Y===null)return;if(_e=Y.tag,_e===5||_e===6||_e===26||_e===27){N=D=Y;continue e}me=me.parentNode}}N=N.return}BP(function(){var Re=D,qe=Rj(y),Xe=[];e:{var Ue=pD.get(u);if(Ue!==void 0){var Be=t0,lt=u;switch(u){case"keypress":if(Jx(y)===0)break e;case"keydown":case"keyup":Be=MX;break;case"focusin":lt="focus",Be=Gj;break;case"focusout":lt="blur",Be=Gj;break;case"beforeblur":case"afterblur":Be=Gj;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Be=VP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Be=jX;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Be=RX;break;case mD:case fD:case hD:Be=_X;break;case gD:Be=UX;break;case"scroll":case"scrollend":Be=wX;break;case"wheel":Be=BX;break;case"copy":case"cut":case"paste":Be=EX;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Be=qP;break;case"toggle":case"beforetoggle":Be=GX}var wt=(f&4)!==0,hn=!wt&&(u==="scroll"||u==="scrollend"),Oe=wt?Ue!==null?Ue+"Capture":null:Ue;wt=[];for(var Le=Re,$e;Le!==null;){var Qe=Le;if($e=Qe.stateNode,Qe=Qe.tag,Qe!==5&&Qe!==26&&Qe!==27||$e===null||Oe===null||(Qe=Rf(Le,Oe),Qe!=null&&wt.push(xh(Le,Qe,$e))),hn)break;Le=Le.return}0<wt.length&&(Ue=new Be(Ue,lt,null,y,qe),Xe.push({event:Ue,listeners:wt}))}}if((f&7)===0){e:{if(Ue=u==="mouseover"||u==="pointerover",Be=u==="mouseout"||u==="pointerout",Ue&&y!==$j&&(lt=y.relatedTarget||y.fromElement)&&(Cu(lt)||lt[ju]))break e;if((Be||Ue)&&(Ue=qe.window===qe?qe:(Ue=qe.ownerDocument)?Ue.defaultView||Ue.parentWindow:window,Be?(lt=y.relatedTarget||y.toElement,Be=Re,lt=lt?Cu(lt):null,lt!==null&&(hn=i(lt),wt=lt.tag,lt!==hn||wt!==5&&wt!==27&&wt!==6)&&(lt=null)):(Be=null,lt=Re),Be!==lt)){if(wt=VP,Qe="onMouseLeave",Oe="onMouseEnter",Le="mouse",(u==="pointerout"||u==="pointerover")&&(wt=qP,Qe="onPointerLeave",Oe="onPointerEnter",Le="pointer"),hn=Be==null?Ue:$f(Be),$e=lt==null?Ue:$f(lt),Ue=new wt(Qe,Le+"leave",Be,y,qe),Ue.target=hn,Ue.relatedTarget=$e,Qe=null,Cu(qe)===Re&&(wt=new wt(Oe,Le+"enter",lt,y,qe),wt.target=$e,wt.relatedTarget=hn,Qe=wt),hn=Qe,Be&&lt)t:{for(wt=HZ,Oe=Be,Le=lt,$e=0,Qe=Oe;Qe;Qe=wt(Qe))$e++;Qe=0;for(var xt=Le;xt;xt=wt(xt))Qe++;for(;0<$e-Qe;)Oe=wt(Oe),$e--;for(;0<Qe-$e;)Le=wt(Le),Qe--;for(;$e--;){if(Oe===Le||Le!==null&&Oe===Le.alternate){wt=Oe;break t}Oe=wt(Oe),Le=wt(Le)}wt=null}else wt=null;Be!==null&&RM(Xe,Ue,Be,wt,!1),lt!==null&&hn!==null&&RM(Xe,hn,lt,wt,!0)}}e:{if(Ue=Re?$f(Re):window,Be=Ue.nodeName&&Ue.nodeName.toLowerCase(),Be==="select"||Be==="input"&&Ue.type==="file")var Ht=tD;else if(JP(Ue))if(nD)Ht=eZ;else{Ht=ZX;var dt=XX}else Be=Ue.nodeName,!Be||Be.toLowerCase()!=="input"||Ue.type!=="checkbox"&&Ue.type!=="radio"?Re&&Ij(Re.elementType)&&(Ht=tD):Ht=JX;if(Ht&&(Ht=Ht(u,Re))){eD(Xe,Ht,y,qe);break e}dt&&dt(u,Ue,Re),u==="focusout"&&Re&&Ue.type==="number"&&Re.memoizedProps.value!=null&&Mj(Ue,"number",Ue.value)}switch(dt=Re?$f(Re):window,u){case"focusin":(JP(dt)||dt.contentEditable==="true")&&(Du=dt,Qj=Re,Wf=null);break;case"focusout":Wf=Qj=Du=null;break;case"mousedown":Xj=!0;break;case"contextmenu":case"mouseup":case"dragend":Xj=!1,dD(Xe,y,qe);break;case"selectionchange":if(nZ)break;case"keydown":case"keyup":dD(Xe,y,qe)}var Tt;if(Wj)e:{switch(u){case"compositionstart":var It="onCompositionStart";break e;case"compositionend":It="onCompositionEnd";break e;case"compositionupdate":It="onCompositionUpdate";break e}It=void 0}else Pu?XP(u,y)&&(It="onCompositionEnd"):u==="keydown"&&y.keyCode===229&&(It="onCompositionStart");It&&(YP&&y.locale!=="ko"&&(Pu||It!=="onCompositionStart"?It==="onCompositionEnd"&&Pu&&(Tt=HP()):(Sl=qe,Fj="value"in Sl?Sl.value:Sl.textContent,Pu=!0)),dt=V0(Re,It),0<dt.length&&(It=new WP(It,u,null,y,qe),Xe.push({event:It,listeners:dt}),Tt?It.data=Tt:(Tt=ZP(y),Tt!==null&&(It.data=Tt)))),(Tt=WX?qX(u,y):YX(u,y))&&(It=V0(Re,"onBeforeInput"),0<It.length&&(dt=new WP("onBeforeInput","beforeinput",null,y,qe),Xe.push({event:dt,listeners:It}),dt.data=Tt)),zZ(Xe,u,Re,y,qe)}IM(Xe,f)})}function xh(u,f,y){return{instance:u,listener:f,currentTarget:y}}function V0(u,f){for(var y=f+"Capture",N=[];u!==null;){var L=u,D=L.stateNode;if(L=L.tag,L!==5&&L!==26&&L!==27||D===null||(L=Rf(u,y),L!=null&&N.unshift(xh(u,L,D)),L=Rf(u,f),L!=null&&N.push(xh(u,L,D))),u.tag===3)return N;u=u.return}return[]}function HZ(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function RM(u,f,y,N,L){for(var D=f._reactName,Y=[];y!==null&&y!==N;){var me=y,_e=me.alternate,Re=me.stateNode;if(me=me.tag,_e!==null&&_e===N)break;me!==5&&me!==26&&me!==27||Re===null||(_e=Re,L?(Re=Rf(y,D),Re!=null&&Y.unshift(xh(y,Re,_e))):L||(Re=Rf(y,D),Re!=null&&Y.push(xh(y,Re,_e)))),y=y.return}Y.length!==0&&u.push({event:f,listeners:Y})}var GZ=/\r\n?/g,VZ=/\u0000|\uFFFD/g;function zM(u){return(typeof u=="string"?u:""+u).replace(GZ,`
`).replace(VZ,"")}function UM(u,f){return f=zM(f),zM(u)===f}function fn(u,f,y,N,L,D){switch(y){case"children":typeof N=="string"?f==="body"||f==="textarea"&&N===""||Tu(u,N):(typeof N=="number"||typeof N=="bigint")&&f!=="body"&&Tu(u,""+N);break;case"className":Kx(u,"class",N);break;case"tabIndex":Kx(u,"tabindex",N);break;case"dir":case"role":case"viewBox":case"width":case"height":Kx(u,y,N);break;case"style":UP(u,N,D);break;case"data":if(f!=="object"){Kx(u,"data",N);break}case"src":case"href":if(N===""&&(f!=="a"||y!=="href")){u.removeAttribute(y);break}if(N==null||typeof N=="function"||typeof N=="symbol"||typeof N=="boolean"){u.removeAttribute(y);break}N=Xx(""+N),u.setAttribute(y,N);break;case"action":case"formAction":if(typeof N=="function"){u.setAttribute(y,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof D=="function"&&(y==="formAction"?(f!=="input"&&fn(u,f,"name",L.name,L,null),fn(u,f,"formEncType",L.formEncType,L,null),fn(u,f,"formMethod",L.formMethod,L,null),fn(u,f,"formTarget",L.formTarget,L,null)):(fn(u,f,"encType",L.encType,L,null),fn(u,f,"method",L.method,L,null),fn(u,f,"target",L.target,L,null)));if(N==null||typeof N=="symbol"||typeof N=="boolean"){u.removeAttribute(y);break}N=Xx(""+N),u.setAttribute(y,N);break;case"onClick":N!=null&&(u.onclick=co);break;case"onScroll":N!=null&&Ot("scroll",u);break;case"onScrollEnd":N!=null&&Ot("scrollend",u);break;case"dangerouslySetInnerHTML":if(N!=null){if(typeof N!="object"||!("__html"in N))throw Error(r(61));if(y=N.__html,y!=null){if(L.children!=null)throw Error(r(60));u.innerHTML=y}}break;case"multiple":u.multiple=N&&typeof N!="function"&&typeof N!="symbol";break;case"muted":u.muted=N&&typeof N!="function"&&typeof N!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(N==null||typeof N=="function"||typeof N=="boolean"||typeof N=="symbol"){u.removeAttribute("xlink:href");break}y=Xx(""+N),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",y);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":N!=null&&typeof N!="function"&&typeof N!="symbol"?u.setAttribute(y,""+N):u.removeAttribute(y);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":N&&typeof N!="function"&&typeof N!="symbol"?u.setAttribute(y,""):u.removeAttribute(y);break;case"capture":case"download":N===!0?u.setAttribute(y,""):N!==!1&&N!=null&&typeof N!="function"&&typeof N!="symbol"?u.setAttribute(y,N):u.removeAttribute(y);break;case"cols":case"rows":case"size":case"span":N!=null&&typeof N!="function"&&typeof N!="symbol"&&!isNaN(N)&&1<=N?u.setAttribute(y,N):u.removeAttribute(y);break;case"rowSpan":case"start":N==null||typeof N=="function"||typeof N=="symbol"||isNaN(N)?u.removeAttribute(y):u.setAttribute(y,N);break;case"popover":Ot("beforetoggle",u),Ot("toggle",u),Yx(u,"popover",N);break;case"xlinkActuate":lo(u,"http://www.w3.org/1999/xlink","xlink:actuate",N);break;case"xlinkArcrole":lo(u,"http://www.w3.org/1999/xlink","xlink:arcrole",N);break;case"xlinkRole":lo(u,"http://www.w3.org/1999/xlink","xlink:role",N);break;case"xlinkShow":lo(u,"http://www.w3.org/1999/xlink","xlink:show",N);break;case"xlinkTitle":lo(u,"http://www.w3.org/1999/xlink","xlink:title",N);break;case"xlinkType":lo(u,"http://www.w3.org/1999/xlink","xlink:type",N);break;case"xmlBase":lo(u,"http://www.w3.org/XML/1998/namespace","xml:base",N);break;case"xmlLang":lo(u,"http://www.w3.org/XML/1998/namespace","xml:lang",N);break;case"xmlSpace":lo(u,"http://www.w3.org/XML/1998/namespace","xml:space",N);break;case"is":Yx(u,"is",N);break;case"innerText":case"textContent":break;default:(!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(y=bX.get(y)||y,Yx(u,y,N))}}function NC(u,f,y,N,L,D){switch(y){case"style":UP(u,N,D);break;case"dangerouslySetInnerHTML":if(N!=null){if(typeof N!="object"||!("__html"in N))throw Error(r(61));if(y=N.__html,y!=null){if(L.children!=null)throw Error(r(60));u.innerHTML=y}}break;case"children":typeof N=="string"?Tu(u,N):(typeof N=="number"||typeof N=="bigint")&&Tu(u,""+N);break;case"onScroll":N!=null&&Ot("scroll",u);break;case"onScrollEnd":N!=null&&Ot("scrollend",u);break;case"onClick":N!=null&&(u.onclick=co);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!kP.hasOwnProperty(y))e:{if(y[0]==="o"&&y[1]==="n"&&(L=y.endsWith("Capture"),f=y.slice(2,L?y.length-7:void 0),D=u[Sr]||null,D=D!=null?D[y]:null,typeof D=="function"&&u.removeEventListener(f,D,L),typeof N=="function")){typeof D!="function"&&D!==null&&(y in u?u[y]=null:u.hasAttribute(y)&&u.removeAttribute(y)),u.addEventListener(f,N,L);break e}y in u?u[y]=N:N===!0?u.setAttribute(y,""):Yx(u,y,N)}}}function qa(u,f,y){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ot("error",u),Ot("load",u);var N=!1,L=!1,D;for(D in y)if(y.hasOwnProperty(D)){var Y=y[D];if(Y!=null)switch(D){case"src":N=!0;break;case"srcSet":L=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:fn(u,f,D,Y,y,null)}}L&&fn(u,f,"srcSet",y.srcSet,y,null),N&&fn(u,f,"src",y.src,y,null);return;case"input":Ot("invalid",u);var me=D=Y=L=null,_e=null,Re=null;for(N in y)if(y.hasOwnProperty(N)){var qe=y[N];if(qe!=null)switch(N){case"name":L=qe;break;case"type":Y=qe;break;case"checked":_e=qe;break;case"defaultChecked":Re=qe;break;case"value":D=qe;break;case"defaultValue":me=qe;break;case"children":case"dangerouslySetInnerHTML":if(qe!=null)throw Error(r(137,f));break;default:fn(u,f,N,qe,y,null)}}IP(u,D,me,_e,Re,Y,L,!1);return;case"select":Ot("invalid",u),N=Y=D=null;for(L in y)if(y.hasOwnProperty(L)&&(me=y[L],me!=null))switch(L){case"value":D=me;break;case"defaultValue":Y=me;break;case"multiple":N=me;default:fn(u,f,L,me,y,null)}f=D,y=Y,u.multiple=!!N,f!=null?Eu(u,!!N,f,!1):y!=null&&Eu(u,!!N,y,!0);return;case"textarea":Ot("invalid",u),D=L=N=null;for(Y in y)if(y.hasOwnProperty(Y)&&(me=y[Y],me!=null))switch(Y){case"value":N=me;break;case"defaultValue":L=me;break;case"children":D=me;break;case"dangerouslySetInnerHTML":if(me!=null)throw Error(r(91));break;default:fn(u,f,Y,me,y,null)}RP(u,N,L,D);return;case"option":for(_e in y)if(y.hasOwnProperty(_e)&&(N=y[_e],N!=null))switch(_e){case"selected":u.selected=N&&typeof N!="function"&&typeof N!="symbol";break;default:fn(u,f,_e,N,y,null)}return;case"dialog":Ot("beforetoggle",u),Ot("toggle",u),Ot("cancel",u),Ot("close",u);break;case"iframe":case"object":Ot("load",u);break;case"video":case"audio":for(N=0;N<ph.length;N++)Ot(ph[N],u);break;case"image":Ot("error",u),Ot("load",u);break;case"details":Ot("toggle",u);break;case"embed":case"source":case"link":Ot("error",u),Ot("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Re in y)if(y.hasOwnProperty(Re)&&(N=y[Re],N!=null))switch(Re){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:fn(u,f,Re,N,y,null)}return;default:if(Ij(f)){for(qe in y)y.hasOwnProperty(qe)&&(N=y[qe],N!==void 0&&NC(u,f,qe,N,y,void 0));return}}for(me in y)y.hasOwnProperty(me)&&(N=y[me],N!=null&&fn(u,f,me,N,y,null))}function WZ(u,f,y,N){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var L=null,D=null,Y=null,me=null,_e=null,Re=null,qe=null;for(Be in y){var Xe=y[Be];if(y.hasOwnProperty(Be)&&Xe!=null)switch(Be){case"checked":break;case"value":break;case"defaultValue":_e=Xe;default:N.hasOwnProperty(Be)||fn(u,f,Be,null,N,Xe)}}for(var Ue in N){var Be=N[Ue];if(Xe=y[Ue],N.hasOwnProperty(Ue)&&(Be!=null||Xe!=null))switch(Ue){case"type":D=Be;break;case"name":L=Be;break;case"checked":Re=Be;break;case"defaultChecked":qe=Be;break;case"value":Y=Be;break;case"defaultValue":me=Be;break;case"children":case"dangerouslySetInnerHTML":if(Be!=null)throw Error(r(137,f));break;default:Be!==Xe&&fn(u,f,Ue,Be,N,Xe)}}Oj(u,Y,me,_e,Re,qe,D,L);return;case"select":Be=Y=me=Ue=null;for(D in y)if(_e=y[D],y.hasOwnProperty(D)&&_e!=null)switch(D){case"value":break;case"multiple":Be=_e;default:N.hasOwnProperty(D)||fn(u,f,D,null,N,_e)}for(L in N)if(D=N[L],_e=y[L],N.hasOwnProperty(L)&&(D!=null||_e!=null))switch(L){case"value":Ue=D;break;case"defaultValue":me=D;break;case"multiple":Y=D;default:D!==_e&&fn(u,f,L,D,N,_e)}f=me,y=Y,N=Be,Ue!=null?Eu(u,!!y,Ue,!1):!!N!=!!y&&(f!=null?Eu(u,!!y,f,!0):Eu(u,!!y,y?[]:"",!1));return;case"textarea":Be=Ue=null;for(me in y)if(L=y[me],y.hasOwnProperty(me)&&L!=null&&!N.hasOwnProperty(me))switch(me){case"value":break;case"children":break;default:fn(u,f,me,null,N,L)}for(Y in N)if(L=N[Y],D=y[Y],N.hasOwnProperty(Y)&&(L!=null||D!=null))switch(Y){case"value":Ue=L;break;case"defaultValue":Be=L;break;case"children":break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(r(91));break;default:L!==D&&fn(u,f,Y,L,N,D)}$P(u,Ue,Be);return;case"option":for(var lt in y)if(Ue=y[lt],y.hasOwnProperty(lt)&&Ue!=null&&!N.hasOwnProperty(lt))switch(lt){case"selected":u.selected=!1;break;default:fn(u,f,lt,null,N,Ue)}for(_e in N)if(Ue=N[_e],Be=y[_e],N.hasOwnProperty(_e)&&Ue!==Be&&(Ue!=null||Be!=null))switch(_e){case"selected":u.selected=Ue&&typeof Ue!="function"&&typeof Ue!="symbol";break;default:fn(u,f,_e,Ue,N,Be)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var wt in y)Ue=y[wt],y.hasOwnProperty(wt)&&Ue!=null&&!N.hasOwnProperty(wt)&&fn(u,f,wt,null,N,Ue);for(Re in N)if(Ue=N[Re],Be=y[Re],N.hasOwnProperty(Re)&&Ue!==Be&&(Ue!=null||Be!=null))switch(Re){case"children":case"dangerouslySetInnerHTML":if(Ue!=null)throw Error(r(137,f));break;default:fn(u,f,Re,Ue,N,Be)}return;default:if(Ij(f)){for(var hn in y)Ue=y[hn],y.hasOwnProperty(hn)&&Ue!==void 0&&!N.hasOwnProperty(hn)&&NC(u,f,hn,void 0,N,Ue);for(qe in N)Ue=N[qe],Be=y[qe],!N.hasOwnProperty(qe)||Ue===Be||Ue===void 0&&Be===void 0||NC(u,f,qe,Ue,N,Be);return}}for(var Oe in y)Ue=y[Oe],y.hasOwnProperty(Oe)&&Ue!=null&&!N.hasOwnProperty(Oe)&&fn(u,f,Oe,null,N,Ue);for(Xe in N)Ue=N[Xe],Be=y[Xe],!N.hasOwnProperty(Xe)||Ue===Be||Ue==null&&Be==null||fn(u,f,Xe,Ue,N,Be)}function FM(u){switch(u){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function qZ(){if(typeof performance.getEntriesByType=="function"){for(var u=0,f=0,y=performance.getEntriesByType("resource"),N=0;N<y.length;N++){var L=y[N],D=L.transferSize,Y=L.initiatorType,me=L.duration;if(D&&me&&FM(Y)){for(Y=0,me=L.responseEnd,N+=1;N<y.length;N++){var _e=y[N],Re=_e.startTime;if(Re>me)break;var qe=_e.transferSize,Xe=_e.initiatorType;qe&&FM(Xe)&&(_e=_e.responseEnd,Y+=qe*(_e<me?1:(me-Re)/(_e-Re)))}if(--N,f+=8*(D+Y)/(L.duration/1e3),u++,10<u)break}}if(0<u)return f/u/1e6}return navigator.connection&&(u=navigator.connection.downlink,typeof u=="number")?u:5}var jC=null,CC=null;function W0(u){return u.nodeType===9?u:u.ownerDocument}function BM(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function HM(u,f){if(u===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&f==="foreignObject"?0:u}function SC(u,f){return u==="textarea"||u==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var _C=null;function YZ(){var u=window.event;return u&&u.type==="popstate"?u===_C?!1:(_C=u,!0):(_C=null,!1)}var GM=typeof setTimeout=="function"?setTimeout:void 0,KZ=typeof clearTimeout=="function"?clearTimeout:void 0,VM=typeof Promise=="function"?Promise:void 0,QZ=typeof queueMicrotask=="function"?queueMicrotask:typeof VM<"u"?function(u){return VM.resolve(null).then(u).catch(XZ)}:GM;function XZ(u){setTimeout(function(){throw u})}function Bl(u){return u==="head"}function WM(u,f){var y=f,N=0;do{var L=y.nextSibling;if(u.removeChild(y),L&&L.nodeType===8)if(y=L.data,y==="/$"||y==="/&"){if(N===0){u.removeChild(L),im(f);return}N--}else if(y==="$"||y==="$?"||y==="$~"||y==="$!"||y==="&")N++;else if(y==="html")yh(u.ownerDocument.documentElement);else if(y==="head"){y=u.ownerDocument.head,yh(y);for(var D=y.firstChild;D;){var Y=D.nextSibling,me=D.nodeName;D[If]||me==="SCRIPT"||me==="STYLE"||me==="LINK"&&D.rel.toLowerCase()==="stylesheet"||y.removeChild(D),D=Y}}else y==="body"&&yh(u.ownerDocument.body);y=L}while(y);im(f)}function qM(u,f){var y=u;u=0;do{var N=y.nextSibling;if(y.nodeType===1?f?(y._stashedDisplay=y.style.display,y.style.display="none"):(y.style.display=y._stashedDisplay||"",y.getAttribute("style")===""&&y.removeAttribute("style")):y.nodeType===3&&(f?(y._stashedText=y.nodeValue,y.nodeValue=""):y.nodeValue=y._stashedText||""),N&&N.nodeType===8)if(y=N.data,y==="/$"){if(u===0)break;u--}else y!=="$"&&y!=="$?"&&y!=="$~"&&y!=="$!"||u++;y=N}while(y)}function AC(u){var f=u.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var y=f;switch(f=f.nextSibling,y.nodeName){case"HTML":case"HEAD":case"BODY":AC(y),Pj(y);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(y.rel.toLowerCase()==="stylesheet")continue}u.removeChild(y)}}function ZZ(u,f,y,N){for(;u.nodeType===1;){var L=y;if(u.nodeName.toLowerCase()!==f.toLowerCase()){if(!N&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(N){if(!u[If])switch(f){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if(D=u.getAttribute("rel"),D==="stylesheet"&&u.hasAttribute("data-precedence"))break;if(D!==L.rel||u.getAttribute("href")!==(L.href==null||L.href===""?null:L.href)||u.getAttribute("crossorigin")!==(L.crossOrigin==null?null:L.crossOrigin)||u.getAttribute("title")!==(L.title==null?null:L.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if(D=u.getAttribute("src"),(D!==(L.src==null?null:L.src)||u.getAttribute("type")!==(L.type==null?null:L.type)||u.getAttribute("crossorigin")!==(L.crossOrigin==null?null:L.crossOrigin))&&D&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(f==="input"&&u.type==="hidden"){var D=L.name==null?null:""+L.name;if(L.type==="hidden"&&u.getAttribute("name")===D)return u}else return u;if(u=Es(u.nextSibling),u===null)break}return null}function JZ(u,f,y){if(f==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!y||(u=Es(u.nextSibling),u===null))return null;return u}function YM(u,f){for(;u.nodeType!==8;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!f||(u=Es(u.nextSibling),u===null))return null;return u}function EC(u){return u.data==="$?"||u.data==="$~"}function TC(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState!=="loading"}function eJ(u,f){var y=u.ownerDocument;if(u.data==="$~")u._reactRetry=f;else if(u.data!=="$?"||y.readyState!=="loading")f();else{var N=function(){f(),y.removeEventListener("DOMContentLoaded",N)};y.addEventListener("DOMContentLoaded",N),u._reactRetry=N}}function Es(u){for(;u!=null;u=u.nextSibling){var f=u.nodeType;if(f===1||f===3)break;if(f===8){if(f=u.data,f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"||f==="F!"||f==="F")break;if(f==="/$"||f==="/&")return null}}return u}var LC=null;function KM(u){u=u.nextSibling;for(var f=0;u;){if(u.nodeType===8){var y=u.data;if(y==="/$"||y==="/&"){if(f===0)return Es(u.nextSibling);f--}else y!=="$"&&y!=="$!"&&y!=="$?"&&y!=="$~"&&y!=="&"||f++}u=u.nextSibling}return null}function QM(u){u=u.previousSibling;for(var f=0;u;){if(u.nodeType===8){var y=u.data;if(y==="$"||y==="$!"||y==="$?"||y==="$~"||y==="&"){if(f===0)return u;f--}else y!=="/$"&&y!=="/&"||f++}u=u.previousSibling}return null}function XM(u,f,y){switch(f=W0(y),u){case"html":if(u=f.documentElement,!u)throw Error(r(452));return u;case"head":if(u=f.head,!u)throw Error(r(453));return u;case"body":if(u=f.body,!u)throw Error(r(454));return u;default:throw Error(r(451))}}function yh(u){for(var f=u.attributes;f.length;)u.removeAttributeNode(f[0]);Pj(u)}var Ts=new Map,ZM=new Set;function q0(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var _o=B.d;B.d={f:tJ,r:nJ,D:aJ,C:rJ,L:sJ,m:iJ,X:lJ,S:oJ,M:cJ};function tJ(){var u=_o.f(),f=R0();return u||f}function nJ(u){var f=Su(u);f!==null&&f.tag===5&&f.type==="form"?gO(f):_o.r(u)}var am=typeof document>"u"?null:document;function JM(u,f,y){var N=am;if(N&&typeof f=="string"&&f){var L=ws(f);L='link[rel="'+u+'"][href="'+L+'"]',typeof y=="string"&&(L+='[crossorigin="'+y+'"]'),ZM.has(L)||(ZM.add(L),u={rel:u,crossOrigin:y,href:f},N.querySelector(L)===null&&(f=N.createElement("link"),qa(f,"link",u),Da(f),N.head.appendChild(f)))}}function aJ(u){_o.D(u),JM("dns-prefetch",u,null)}function rJ(u,f){_o.C(u,f),JM("preconnect",u,f)}function sJ(u,f,y){_o.L(u,f,y);var N=am;if(N&&u&&f){var L='link[rel="preload"][as="'+ws(f)+'"]';f==="image"&&y&&y.imageSrcSet?(L+='[imagesrcset="'+ws(y.imageSrcSet)+'"]',typeof y.imageSizes=="string"&&(L+='[imagesizes="'+ws(y.imageSizes)+'"]')):L+='[href="'+ws(u)+'"]';var D=L;switch(f){case"style":D=rm(u);break;case"script":D=sm(u)}Ts.has(D)||(u=h({rel:"preload",href:f==="image"&&y&&y.imageSrcSet?void 0:u,as:f},y),Ts.set(D,u),N.querySelector(L)!==null||f==="style"&&N.querySelector(bh(D))||f==="script"&&N.querySelector(vh(D))||(f=N.createElement("link"),qa(f,"link",u),Da(f),N.head.appendChild(f)))}}function iJ(u,f){_o.m(u,f);var y=am;if(y&&u){var N=f&&typeof f.as=="string"?f.as:"script",L='link[rel="modulepreload"][as="'+ws(N)+'"][href="'+ws(u)+'"]',D=L;switch(N){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":D=sm(u)}if(!Ts.has(D)&&(u=h({rel:"modulepreload",href:u},f),Ts.set(D,u),y.querySelector(L)===null)){switch(N){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(y.querySelector(vh(D)))return}N=y.createElement("link"),qa(N,"link",u),Da(N),y.head.appendChild(N)}}}function oJ(u,f,y){_o.S(u,f,y);var N=am;if(N&&u){var L=_u(N).hoistableStyles,D=rm(u);f=f||"default";var Y=L.get(D);if(!Y){var me={loading:0,preload:null};if(Y=N.querySelector(bh(D)))me.loading=5;else{u=h({rel:"stylesheet",href:u,"data-precedence":f},y),(y=Ts.get(D))&&kC(u,y);var _e=Y=N.createElement("link");Da(_e),qa(_e,"link",u),_e._p=new Promise(function(Re,qe){_e.onload=Re,_e.onerror=qe}),_e.addEventListener("load",function(){me.loading|=1}),_e.addEventListener("error",function(){me.loading|=2}),me.loading|=4,Y0(Y,f,N)}Y={type:"stylesheet",instance:Y,count:1,state:me},L.set(D,Y)}}}function lJ(u,f){_o.X(u,f);var y=am;if(y&&u){var N=_u(y).hoistableScripts,L=sm(u),D=N.get(L);D||(D=y.querySelector(vh(L)),D||(u=h({src:u,async:!0},f),(f=Ts.get(L))&&PC(u,f),D=y.createElement("script"),Da(D),qa(D,"link",u),y.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},N.set(L,D))}}function cJ(u,f){_o.M(u,f);var y=am;if(y&&u){var N=_u(y).hoistableScripts,L=sm(u),D=N.get(L);D||(D=y.querySelector(vh(L)),D||(u=h({src:u,async:!0,type:"module"},f),(f=Ts.get(L))&&PC(u,f),D=y.createElement("script"),Da(D),qa(D,"link",u),y.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},N.set(L,D))}}function e3(u,f,y,N){var L=(L=Te.current)?q0(L):null;if(!L)throw Error(r(446));switch(u){case"meta":case"title":return null;case"style":return typeof y.precedence=="string"&&typeof y.href=="string"?(f=rm(y.href),y=_u(L).hoistableStyles,N=y.get(f),N||(N={type:"style",instance:null,count:0,state:null},y.set(f,N)),N):{type:"void",instance:null,count:0,state:null};case"link":if(y.rel==="stylesheet"&&typeof y.href=="string"&&typeof y.precedence=="string"){u=rm(y.href);var D=_u(L).hoistableStyles,Y=D.get(u);if(Y||(L=L.ownerDocument||L,Y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},D.set(u,Y),(D=L.querySelector(bh(u)))&&!D._p&&(Y.instance=D,Y.state.loading=5),Ts.has(u)||(y={rel:"preload",as:"style",href:y.href,crossOrigin:y.crossOrigin,integrity:y.integrity,media:y.media,hrefLang:y.hrefLang,referrerPolicy:y.referrerPolicy},Ts.set(u,y),D||dJ(L,u,y,Y.state))),f&&N===null)throw Error(r(528,""));return Y}if(f&&N!==null)throw Error(r(529,""));return null;case"script":return f=y.async,y=y.src,typeof y=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=sm(y),y=_u(L).hoistableScripts,N=y.get(f),N||(N={type:"script",instance:null,count:0,state:null},y.set(f,N)),N):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,u))}}function rm(u){return'href="'+ws(u)+'"'}function bh(u){return'link[rel="stylesheet"]['+u+"]"}function t3(u){return h({},u,{"data-precedence":u.precedence,precedence:null})}function dJ(u,f,y,N){u.querySelector('link[rel="preload"][as="style"]['+f+"]")?N.loading=1:(f=u.createElement("link"),N.preload=f,f.addEventListener("load",function(){return N.loading|=1}),f.addEventListener("error",function(){return N.loading|=2}),qa(f,"link",y),Da(f),u.head.appendChild(f))}function sm(u){return'[src="'+ws(u)+'"]'}function vh(u){return"script[async]"+u}function n3(u,f,y){if(f.count++,f.instance===null)switch(f.type){case"style":var N=u.querySelector('style[data-href~="'+ws(y.href)+'"]');if(N)return f.instance=N,Da(N),N;var L=h({},y,{"data-href":y.href,"data-precedence":y.precedence,href:null,precedence:null});return N=(u.ownerDocument||u).createElement("style"),Da(N),qa(N,"style",L),Y0(N,y.precedence,u),f.instance=N;case"stylesheet":L=rm(y.href);var D=u.querySelector(bh(L));if(D)return f.state.loading|=4,f.instance=D,Da(D),D;N=t3(y),(L=Ts.get(L))&&kC(N,L),D=(u.ownerDocument||u).createElement("link"),Da(D);var Y=D;return Y._p=new Promise(function(me,_e){Y.onload=me,Y.onerror=_e}),qa(D,"link",N),f.state.loading|=4,Y0(D,y.precedence,u),f.instance=D;case"script":return D=sm(y.src),(L=u.querySelector(vh(D)))?(f.instance=L,Da(L),L):(N=y,(L=Ts.get(D))&&(N=h({},y),PC(N,L)),u=u.ownerDocument||u,L=u.createElement("script"),Da(L),qa(L,"link",N),u.head.appendChild(L),f.instance=L);case"void":return null;default:throw Error(r(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(N=f.instance,f.state.loading|=4,Y0(N,y.precedence,u));return f.instance}function Y0(u,f,y){for(var N=y.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),L=N.length?N[N.length-1]:null,D=L,Y=0;Y<N.length;Y++){var me=N[Y];if(me.dataset.precedence===f)D=me;else if(D!==L)break}D?D.parentNode.insertBefore(u,D.nextSibling):(f=y.nodeType===9?y.head:y,f.insertBefore(u,f.firstChild))}function kC(u,f){u.crossOrigin==null&&(u.crossOrigin=f.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=f.referrerPolicy),u.title==null&&(u.title=f.title)}function PC(u,f){u.crossOrigin==null&&(u.crossOrigin=f.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=f.referrerPolicy),u.integrity==null&&(u.integrity=f.integrity)}var K0=null;function a3(u,f,y){if(K0===null){var N=new Map,L=K0=new Map;L.set(y,N)}else L=K0,N=L.get(y),N||(N=new Map,L.set(y,N));if(N.has(u))return N;for(N.set(u,null),y=y.getElementsByTagName(u),L=0;L<y.length;L++){var D=y[L];if(!(D[If]||D[Ha]||u==="link"&&D.getAttribute("rel")==="stylesheet")&&D.namespaceURI!=="http://www.w3.org/2000/svg"){var Y=D.getAttribute(f)||"";Y=u+Y;var me=N.get(Y);me?me.push(D):N.set(Y,[D])}}return N}function r3(u,f,y){u=u.ownerDocument||u,u.head.insertBefore(y,f==="title"?u.querySelector("head > title"):null)}function uJ(u,f,y){if(y===1||f.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return u=f.disabled,typeof f.precedence=="string"&&u==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function s3(u){return!(u.type==="stylesheet"&&(u.state.loading&3)===0)}function mJ(u,f,y,N){if(y.type==="stylesheet"&&(typeof N.media!="string"||matchMedia(N.media).matches!==!1)&&(y.state.loading&4)===0){if(y.instance===null){var L=rm(N.href),D=f.querySelector(bh(L));if(D){f=D._p,f!==null&&typeof f=="object"&&typeof f.then=="function"&&(u.count++,u=Q0.bind(u),f.then(u,u)),y.state.loading|=4,y.instance=D,Da(D);return}D=f.ownerDocument||f,N=t3(N),(L=Ts.get(L))&&kC(N,L),D=D.createElement("link"),Da(D);var Y=D;Y._p=new Promise(function(me,_e){Y.onload=me,Y.onerror=_e}),qa(D,"link",N),y.instance=D}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(y,f),(f=y.state.preload)&&(y.state.loading&3)===0&&(u.count++,y=Q0.bind(u),f.addEventListener("load",y),f.addEventListener("error",y))}}var DC=0;function fJ(u,f){return u.stylesheets&&u.count===0&&Z0(u,u.stylesheets),0<u.count||0<u.imgCount?function(y){var N=setTimeout(function(){if(u.stylesheets&&Z0(u,u.stylesheets),u.unsuspend){var D=u.unsuspend;u.unsuspend=null,D()}},6e4+f);0<u.imgBytes&&DC===0&&(DC=62500*qZ());var L=setTimeout(function(){if(u.waitingForImages=!1,u.count===0&&(u.stylesheets&&Z0(u,u.stylesheets),u.unsuspend)){var D=u.unsuspend;u.unsuspend=null,D()}},(u.imgBytes>DC?50:800)+f);return u.unsuspend=y,function(){u.unsuspend=null,clearTimeout(N),clearTimeout(L)}}:null}function Q0(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Z0(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var X0=null;function Z0(u,f){u.stylesheets=null,u.unsuspend!==null&&(u.count++,X0=new Map,f.forEach(hJ,u),X0=null,Q0.call(u))}function hJ(u,f){if(!(f.state.loading&4)){var y=X0.get(u);if(y)var N=y.get(null);else{y=new Map,X0.set(u,y);for(var L=u.querySelectorAll("link[data-precedence],style[data-precedence]"),D=0;D<L.length;D++){var Y=L[D];(Y.nodeName==="LINK"||Y.getAttribute("media")!=="not all")&&(y.set(Y.dataset.precedence,Y),N=Y)}N&&y.set(null,N)}L=f.instance,Y=L.getAttribute("data-precedence"),D=y.get(Y)||N,D===N&&y.set(null,L),y.set(Y,L),this.count++,N=Q0.bind(this),L.addEventListener("load",N),L.addEventListener("error",N),D?D.parentNode.insertBefore(L,D.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(L,u.firstChild)),f.state.loading|=4}}var wh={$$typeof:S,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function gJ(u,f,y,N,L,D,Y,me,_e){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=G(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=G(0),this.hiddenUpdates=G(null),this.identifierPrefix=N,this.onUncaughtError=L,this.onCaughtError=D,this.onRecoverableError=Y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_e,this.incompleteTransitions=new Map}function i3(u,f,y,N,L,D,Y,me,_e,Re,qe,Xe){return u=new gJ(u,f,y,Y,_e,Re,qe,Xe,me),f=1,D===!0&&(f|=24),D=Xr(3,null,null,f),u.current=D,D.stateNode=u,f=m1(),f.refCount++,u.pooledCache=f,f.refCount++,D.memoizedState={element:N,isDehydrated:y,cache:f},p1(D),u}function o3(u){return u?(u=Iu,u):Iu}function l3(u,f,y,N,L,D){L=o3(L),N.context===null?N.context=L:N.pendingContext=L,N=kl(f),N.payload={element:y},D=D===void 0?null:D,D!==null&&(N.callback=D),y=Pl(u,N,f),y!==null&&(kr(y,u,f),Jf(y,u,f))}function c3(u,f){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var y=u.retryLane;u.retryLane=y!==0&&y<f?y:f}}function OC(u,f){c3(u,f),(u=u.alternate)&&c3(u,f)}function d3(u){if(u.tag===13||u.tag===31){var f=Rc(u,67108864);f!==null&&kr(f,u,67108864),OC(u,67108864)}}function u3(u){if(u.tag===13||u.tag===31){var f=ns();f=vt(f);var y=Rc(u,f);y!==null&&kr(y,u,f),OC(u,f)}}var J0=!0;function pJ(u,f,y,N){var L=K.T;K.T=null;var D=B.p;try{B.p=2,MC(u,f,y,N)}finally{B.p=D,K.T=L}}function xJ(u,f,y,N){var L=K.T;K.T=null;var D=B.p;try{B.p=8,MC(u,f,y,N)}finally{B.p=D,K.T=L}}function MC(u,f,y,N){if(J0){var L=IC(N);if(L===null)wC(u,f,N,ey,y),f3(u,N);else if(bJ(L,u,f,y,N))N.stopPropagation();else if(f3(u,N),f&4&&-1<yJ.indexOf(u)){for(;L!==null;){var D=Su(L);if(D!==null)switch(D.tag){case 3:if(D=D.stateNode,D.current.memoizedState.isDehydrated){var Y=jn(D.pendingLanes);if(Y!==0){var me=D;for(me.pendingLanes|=2,me.entangledLanes|=2;Y;){var _e=1<<31-Me(Y);me.entanglements[1]|=_e,Y&=~_e}Ti(D),(qt&6)===0&&(I0=k()+500,gh(0))}}break;case 31:case 13:me=Rc(D,2),me!==null&&kr(me,D,2),R0(),OC(D,2)}if(D=IC(N),D===null&&wC(u,f,N,ey,y),D===L)break;L=D}L!==null&&N.stopPropagation()}else wC(u,f,N,null,y)}}function IC(u){return u=Rj(u),$C(u)}var ey=null;function $C(u){if(ey=null,u=Cu(u),u!==null){var f=i(u);if(f===null)u=null;else{var y=f.tag;if(y===13){if(u=o(f),u!==null)return u;u=null}else if(y===31){if(u=l(f),u!==null)return u;u=null}else if(y===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;u=null}else f!==u&&(u=null)}}return ey=u,null}function m3(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Z()){case re:return 2;case be:return 8;case z:case ee:return 32;case ie:return 268435456;default:return 32}default:return 32}}var RC=!1,Hl=null,Gl=null,Vl=null,Nh=new Map,jh=new Map,Wl=[],yJ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function f3(u,f){switch(u){case"focusin":case"focusout":Hl=null;break;case"dragenter":case"dragleave":Gl=null;break;case"mouseover":case"mouseout":Vl=null;break;case"pointerover":case"pointerout":Nh.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":jh.delete(f.pointerId)}}function Ch(u,f,y,N,L,D){return u===null||u.nativeEvent!==D?(u={blockedOn:f,domEventName:y,eventSystemFlags:N,nativeEvent:D,targetContainers:[L]},f!==null&&(f=Su(f),f!==null&&d3(f)),u):(u.eventSystemFlags|=N,f=u.targetContainers,L!==null&&f.indexOf(L)===-1&&f.push(L),u)}function bJ(u,f,y,N,L){switch(f){case"focusin":return Hl=Ch(Hl,u,f,y,N,L),!0;case"dragenter":return Gl=Ch(Gl,u,f,y,N,L),!0;case"mouseover":return Vl=Ch(Vl,u,f,y,N,L),!0;case"pointerover":var D=L.pointerId;return Nh.set(D,Ch(Nh.get(D)||null,u,f,y,N,L)),!0;case"gotpointercapture":return D=L.pointerId,jh.set(D,Ch(jh.get(D)||null,u,f,y,N,L)),!0}return!1}function h3(u){var f=Cu(u.target);if(f!==null){var y=i(f);if(y!==null){if(f=y.tag,f===13){if(f=o(y),f!==null){u.blockedOn=f,Si(u.priority,function(){u3(y)});return}}else if(f===31){if(f=l(y),f!==null){u.blockedOn=f,Si(u.priority,function(){u3(y)});return}}else if(f===3&&y.stateNode.current.memoizedState.isDehydrated){u.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}u.blockedOn=null}function ty(u){if(u.blockedOn!==null)return!1;for(var f=u.targetContainers;0<f.length;){var y=IC(u.nativeEvent);if(y===null){y=u.nativeEvent;var N=new y.constructor(y.type,y);$j=N,y.target.dispatchEvent(N),$j=null}else return f=Su(y),f!==null&&d3(f),u.blockedOn=y,!1;f.shift()}return!0}function g3(u,f,y){ty(u)&&y.delete(f)}function vJ(){RC=!1,Hl!==null&&ty(Hl)&&(Hl=null),Gl!==null&&ty(Gl)&&(Gl=null),Vl!==null&&ty(Vl)&&(Vl=null),Nh.forEach(g3),jh.forEach(g3)}function ny(u,f){u.blockedOn===f&&(u.blockedOn=null,RC||(RC=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,vJ)))}var ay=null;function p3(u){ay!==u&&(ay=u,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){ay===u&&(ay=null);for(var f=0;f<u.length;f+=3){var y=u[f],N=u[f+1],L=u[f+2];if(typeof N!="function"){if($C(N||y)===null)continue;break}var D=Su(y);D!==null&&(u.splice(f,3),f-=3,I1(D,{pending:!0,data:L,method:y.method,action:N},N,L))}}))}function im(u){function f(_e){return ny(_e,u)}Hl!==null&&ny(Hl,u),Gl!==null&&ny(Gl,u),Vl!==null&&ny(Vl,u),Nh.forEach(f),jh.forEach(f);for(var y=0;y<Wl.length;y++){var N=Wl[y];N.blockedOn===u&&(N.blockedOn=null)}for(;0<Wl.length&&(y=Wl[0],y.blockedOn===null);)h3(y),y.blockedOn===null&&Wl.shift();if(y=(u.ownerDocument||u).$$reactFormReplay,y!=null)for(N=0;N<y.length;N+=3){var L=y[N],D=y[N+1],Y=L[Sr]||null;if(typeof D=="function")Y||p3(y);else if(Y){var me=null;if(D&&D.hasAttribute("formAction")){if(L=D,Y=D[Sr]||null)me=Y.formAction;else if($C(L)!==null)continue}else me=Y.action;typeof me=="function"?y[N+1]=me:(y.splice(N,3),N-=3),p3(y)}}}function x3(){function u(D){D.canIntercept&&D.info==="react-transition"&&D.intercept({handler:function(){return new Promise(function(Y){return L=Y})},focusReset:"manual",scroll:"manual"})}function f(){L!==null&&(L(),L=null),N||setTimeout(y,20)}function y(){if(!N&&!navigation.transition){var D=navigation.currentEntry;D&&D.url!=null&&navigation.navigate(D.url,{state:D.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var N=!1,L=null;return navigation.addEventListener("navigate",u),navigation.addEventListener("navigatesuccess",f),navigation.addEventListener("navigateerror",f),setTimeout(y,100),function(){N=!0,navigation.removeEventListener("navigate",u),navigation.removeEventListener("navigatesuccess",f),navigation.removeEventListener("navigateerror",f),L!==null&&(L(),L=null)}}}function zC(u){this._internalRoot=u}ry.prototype.render=zC.prototype.render=function(u){var f=this._internalRoot;if(f===null)throw Error(r(409));var y=f.current,N=ns();l3(y,N,u,f,null,null)},ry.prototype.unmount=zC.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var f=u.containerInfo;l3(u.current,2,null,u,null,null),R0(),f[ju]=null}};function ry(u){this._internalRoot=u}ry.prototype.unstable_scheduleHydration=function(u){if(u){var f=un();u={blockedOn:null,target:u,priority:f};for(var y=0;y<Wl.length&&f!==0&&f<Wl[y].priority;y++);Wl.splice(y,0,u),y===0&&h3(u)}};var y3=t.version;if(y3!=="19.2.0")throw Error(r(527,y3,"19.2.0"));B.findDOMNode=function(u){var f=u._reactInternals;if(f===void 0)throw typeof u.render=="function"?Error(r(188)):(u=Object.keys(u).join(","),Error(r(268,u)));return u=d(f),u=u!==null?m(u):null,u=u===null?null:u.stateNode,u};var wJ={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sy.isDisabled&&sy.supportsFiber)try{se=sy.inject(wJ),xe=sy}catch{}}return _h.createRoot=function(u,f){if(!s(u))throw Error(r(299));var y=!1,N="",L=SO,D=_O,Y=AO;return f!=null&&(f.unstable_strictMode===!0&&(y=!0),f.identifierPrefix!==void 0&&(N=f.identifierPrefix),f.onUncaughtError!==void 0&&(L=f.onUncaughtError),f.onCaughtError!==void 0&&(D=f.onCaughtError),f.onRecoverableError!==void 0&&(Y=f.onRecoverableError)),f=i3(u,1,!1,null,null,y,N,null,L,D,Y,x3),u[ju]=f.current,vC(u),new zC(f)},_h.hydrateRoot=function(u,f,y){if(!s(u))throw Error(r(299));var N=!1,L="",D=SO,Y=_O,me=AO,_e=null;return y!=null&&(y.unstable_strictMode===!0&&(N=!0),y.identifierPrefix!==void 0&&(L=y.identifierPrefix),y.onUncaughtError!==void 0&&(D=y.onUncaughtError),y.onCaughtError!==void 0&&(Y=y.onCaughtError),y.onRecoverableError!==void 0&&(me=y.onRecoverableError),y.formState!==void 0&&(_e=y.formState)),f=i3(u,1,!0,f,y??null,N,L,_e,D,Y,me,x3),f.context=o3(null),y=f.current,N=ns(),N=vt(N),L=kl(N),L.callback=null,Pl(y,L,N),y=N,f.current.lanes=y,te(f,y),Ti(f),u[ju]=f.current,vC(u),new ry(f)},_h.version="19.2.0",_h}var E3;function kJ(){if(E3)return BC.exports;E3=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),BC.exports=LJ(),BC.exports}var PJ=kJ();/**
 * react-router v7.9.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var T3="popstate";function DJ(e={}){function t(r,s){let{pathname:i,search:o,hash:l}=r.location;return LA("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Zg(s)}return MJ(t,n,null,e)}function In(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Fs(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function OJ(){return Math.random().toString(36).substring(2,10)}function L3(e,t){return{usr:e.state,key:e.key,idx:t}}function LA(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?gf(t):t,state:n,key:t&&t.key||r||OJ()}}function Zg({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function gf(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function MJ(e,t,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l="POP",c=null,d=m();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function m(){return(o.state||{idx:null}).idx}function h(){l="POP";let w=m(),j=w==null?null:w-d;d=w,c&&c({action:l,location:x.location,delta:j})}function p(w,j){l="PUSH";let C=LA(x.location,w,j);d=m()+1;let S=L3(C,d),_=x.createHref(C);try{o.pushState(S,"",_)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;s.location.assign(_)}i&&c&&c({action:l,location:x.location,delta:1})}function b(w,j){l="REPLACE";let C=LA(x.location,w,j);d=m();let S=L3(C,d),_=x.createHref(C);o.replaceState(S,"",_),i&&c&&c({action:l,location:x.location,delta:0})}function v(w){return IJ(w)}let x={get action(){return l},get location(){return e(s,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(T3,h),c=w,()=>{s.removeEventListener(T3,h),c=null}},createHref(w){return t(s,w)},createURL:v,encodeLocation(w){let j=v(w);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:p,replace:b,go(w){return o.go(w)}};return x}function IJ(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),In(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:Zg(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function XF(e,t,n="/"){return $J(e,t,n,!1)}function $J(e,t,n,r){let s=typeof t=="string"?gf(t):t,i=Qo(s.pathname||"/",n);if(i==null)return null;let o=ZF(e);RJ(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=KJ(i);l=qJ(o[c],d,r)}return l}function ZF(e,t=[],n=[],r="",s=!1){let i=(o,l,c=s,d)=>{let m={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(r)&&c)return;In(m.relativePath.startsWith(r),`Absolute route path "${m.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(r.length)}let h=Wo([r,m.relativePath]),p=n.concat(m);o.children&&o.children.length>0&&(In(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),ZF(o.children,t,p,h,c)),!(o.path==null&&!o.index)&&t.push({path:h,score:VJ(h,o.index),routesMeta:p})};return e.forEach((o,l)=>{if(o.path===""||!o.path?.includes("?"))i(o,l);else for(let c of JF(o.path))i(o,l,!0,c)}),t}function JF(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=JF(r.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function RJ(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:WJ(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var zJ=/^:[\w-]+$/,UJ=3,FJ=2,BJ=1,HJ=10,GJ=-2,k3=e=>e==="*";function VJ(e,t){let n=e.split("/"),r=n.length;return n.some(k3)&&(r+=GJ),t&&(r+=FJ),n.filter(s=>!k3(s)).reduce((s,i)=>s+(zJ.test(i)?UJ:i===""?BJ:HJ),r)}function WJ(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function qJ(e,t,n=!1){let{routesMeta:r}=e,s={},i="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],d=l===r.length-1,m=i==="/"?t:t.slice(i.length)||"/",h=Rb({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},m),p=c.route;if(!h&&d&&n&&!r[r.length-1].route.index&&(h=Rb({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},m)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Wo([i,h.pathname]),pathnameBase:JJ(Wo([i,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(i=Wo([i,h.pathnameBase]))}return o}function Rb(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=YJ(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,{paramName:m,isOptional:h},p)=>{if(m==="*"){let v=l[p]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const b=l[p];return h&&!b?d[m]=void 0:d[m]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function YJ(e,t=!1,n=!0){Fs(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function KJ(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Fs(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Qo(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function QJ(e,t="/"){let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?gf(e):e;return{pathname:n?n.startsWith("/")?n:XJ(n,t):t,search:eee(r),hash:tee(s)}}function XJ(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function WC(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ZJ(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function zT(e){let t=ZJ(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function UT(e,t,n,r=!1){let s;typeof e=="string"?s=gf(e):(s={...e},In(!s.pathname||!s.pathname.includes("?"),WC("?","pathname","search",s)),In(!s.pathname||!s.pathname.includes("#"),WC("#","pathname","hash",s)),In(!s.search||!s.search.includes("#"),WC("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let h=t.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;s.pathname=p.join("/")}l=h>=0?t[h]:"/"}let c=QJ(s,l),d=o&&o!=="/"&&o.endsWith("/"),m=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||m)&&(c.pathname+="/"),c}var Wo=e=>e.join("/").replace(/\/\/+/g,"/"),JJ=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),eee=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,tee=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function nee(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var e8=["POST","PUT","PATCH","DELETE"];new Set(e8);var aee=["GET",...e8];new Set(aee);var pf=g.createContext(null);pf.displayName="DataRouter";var ow=g.createContext(null);ow.displayName="DataRouterState";g.createContext(!1);var t8=g.createContext({isTransitioning:!1});t8.displayName="ViewTransition";var ree=g.createContext(new Map);ree.displayName="Fetchers";var see=g.createContext(null);see.displayName="Await";var wi=g.createContext(null);wi.displayName="Navigation";var Ip=g.createContext(null);Ip.displayName="Location";var Qs=g.createContext({outlet:null,matches:[],isDataRoute:!1});Qs.displayName="Route";var FT=g.createContext(null);FT.displayName="RouteError";function iee(e,{relative:t}={}){In(xf(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=g.useContext(wi),{hash:s,pathname:i,search:o}=$p(e,{relative:t}),l=i;return n!=="/"&&(l=i==="/"?n:Wo([n,i])),r.createHref({pathname:l,search:o,hash:s})}function xf(){return g.useContext(Ip)!=null}function Xt(){return In(xf(),"useLocation() may be used only in the context of a <Router> component."),g.useContext(Ip).location}var n8="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function a8(e){g.useContext(wi).static||g.useLayoutEffect(e)}function rt(){let{isDataRoute:e}=g.useContext(Qs);return e?wee():oee()}function oee(){In(xf(),"useNavigate() may be used only in the context of a <Router> component.");let e=g.useContext(pf),{basename:t,navigator:n}=g.useContext(wi),{matches:r}=g.useContext(Qs),{pathname:s}=Xt(),i=JSON.stringify(zT(r)),o=g.useRef(!1);return a8(()=>{o.current=!0}),g.useCallback((c,d={})=>{if(Fs(o.current,n8),!o.current)return;if(typeof c=="number"){n.go(c);return}let m=UT(c,JSON.parse(i),s,d.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:Wo([t,m.pathname])),(d.replace?n.replace:n.push)(m,d.state,d)},[t,n,i,s,e])}var lee=g.createContext(null);function cee(e){let t=g.useContext(Qs).outlet;return g.useMemo(()=>t&&g.createElement(lee.Provider,{value:e},t),[t,e])}function ul(){let{matches:e}=g.useContext(Qs),t=e[e.length-1];return t?t.params:{}}function $p(e,{relative:t}={}){let{matches:n}=g.useContext(Qs),{pathname:r}=Xt(),s=JSON.stringify(zT(n));return g.useMemo(()=>UT(e,JSON.parse(s),r,t==="path"),[e,s,r,t])}function dee(e,t){return r8(e,t)}function r8(e,t,n,r,s){In(xf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=g.useContext(wi),{matches:o}=g.useContext(Qs),l=o[o.length-1],c=l?l.params:{},d=l?l.pathname:"/",m=l?l.pathnameBase:"/",h=l&&l.route;{let C=h&&h.path||"";s8(d,!h||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let p=Xt(),b;if(t){let C=typeof t=="string"?gf(t):t;In(m==="/"||C.pathname?.startsWith(m),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${C.pathname}" was given in the \`location\` prop.`),b=C}else b=p;let v=b.pathname||"/",x=v;if(m!=="/"){let C=m.replace(/^\//,"").split("/");x="/"+v.replace(/^\//,"").split("/").slice(C.length).join("/")}let w=XF(e,{pathname:x});Fs(h||w!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),Fs(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=gee(w&&w.map(C=>Object.assign({},C,{params:Object.assign({},c,C.params),pathname:Wo([m,i.encodeLocation?i.encodeLocation(C.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?m:Wo([m,i.encodeLocation?i.encodeLocation(C.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathnameBase])})),o,n,r,s);return t&&j?g.createElement(Ip.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},j):j}function uee(){let e=vee(),t=nee(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=g.createElement(g.Fragment,null,g.createElement("p",null," Hey developer "),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",g.createElement("code",{style:i},"ErrorBoundary")," or"," ",g.createElement("code",{style:i},"errorElement")," prop on your route.")),g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),n?g.createElement("pre",{style:s},n):null,o)}var mee=g.createElement(uee,null),fee=class extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?g.createElement(Qs.Provider,{value:this.props.routeContext},g.createElement(FT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function hee({routeContext:e,match:t,children:n}){let r=g.useContext(pf);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),g.createElement(Qs.Provider,{value:e},n)}function gee(e,t=[],n=null,r=null,s=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,o=n?.errors;if(o!=null){let d=i.findIndex(m=>m.route.id&&o?.[m.route.id]!==void 0);In(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,d+1))}let l=!1,c=-1;if(n)for(let d=0;d<i.length;d++){let m=i[d];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(c=d),m.route.id){let{loaderData:h,errors:p}=n,b=m.route.loader&&!h.hasOwnProperty(m.route.id)&&(!p||p[m.route.id]===void 0);if(m.route.lazy||b){l=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((d,m,h)=>{let p,b=!1,v=null,x=null;n&&(p=o&&m.route.id?o[m.route.id]:void 0,v=m.route.errorElement||mee,l&&(c<0&&h===0?(s8("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,x=null):c===h&&(b=!0,x=m.route.hydrateFallbackElement||null)));let w=t.concat(i.slice(0,h+1)),j=()=>{let C;return p?C=v:b?C=x:m.route.Component?C=g.createElement(m.route.Component,null):m.route.element?C=m.route.element:C=d,g.createElement(hee,{match:m,routeContext:{outlet:d,matches:w,isDataRoute:n!=null},children:C})};return n&&(m.route.ErrorBoundary||m.route.errorElement||h===0)?g.createElement(fee,{location:n.location,revalidation:n.revalidation,component:v,error:p,children:j(),routeContext:{outlet:null,matches:w,isDataRoute:!0},unstable_onError:r}):j()},null)}function BT(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function pee(e){let t=g.useContext(pf);return In(t,BT(e)),t}function xee(e){let t=g.useContext(ow);return In(t,BT(e)),t}function yee(e){let t=g.useContext(Qs);return In(t,BT(e)),t}function HT(e){let t=yee(e),n=t.matches[t.matches.length-1];return In(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function bee(){return HT("useRouteId")}function vee(){let e=g.useContext(FT),t=xee("useRouteError"),n=HT("useRouteError");return e!==void 0?e:t.errors?.[n]}function wee(){let{router:e}=pee("useNavigate"),t=HT("useNavigate"),n=g.useRef(!1);return a8(()=>{n.current=!0}),g.useCallback(async(s,i={})=>{Fs(n.current,n8),n.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...i}))},[e,t])}var P3={};function s8(e,t,n){!t&&!P3[e]&&(P3[e]=!0,Fs(!1,n))}g.memo(Nee);function Nee({routes:e,future:t,state:n,unstable_onError:r}){return r8(e,void 0,n,r,t)}function os({to:e,replace:t,state:n,relative:r}){In(xf(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=g.useContext(wi);Fs(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=g.useContext(Qs),{pathname:o}=Xt(),l=rt(),c=UT(e,zT(i),o,r==="path"),d=JSON.stringify(c);return g.useEffect(()=>{l(JSON.parse(d),{replace:t,state:n,relative:r})},[l,d,r,t,n]),null}function yf(e){return cee(e.context)}function Ze(e){In(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function jee({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:s,static:i=!1}){In(!xf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),l=g.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);typeof n=="string"&&(n=gf(n));let{pathname:c="/",search:d="",hash:m="",state:h=null,key:p="default"}=n,b=g.useMemo(()=>{let v=Qo(c,o);return v==null?null:{location:{pathname:v,search:d,hash:m,state:h,key:p},navigationType:r}},[o,c,d,m,h,p,r]);return Fs(b!=null,`<Router basename="${o}"> is not able to match the URL "${c}${d}${m}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:g.createElement(wi.Provider,{value:l},g.createElement(Ip.Provider,{children:t,value:b}))}function Cee({children:e,location:t}){return dee(kA(e),t)}function kA(e,t=[]){let n=[];return g.Children.forEach(e,(r,s)=>{if(!g.isValidElement(r))return;let i=[...t,s];if(r.type===g.Fragment){n.push.apply(n,kA(r.props.children,i));return}In(r.type===Ze,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),In(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=kA(r.props.children,i)),n.push(o)}),n}var bb="get",vb="application/x-www-form-urlencoded";function lw(e){return e!=null&&typeof e.tagName=="string"}function See(e){return lw(e)&&e.tagName.toLowerCase()==="button"}function _ee(e){return lw(e)&&e.tagName.toLowerCase()==="form"}function Aee(e){return lw(e)&&e.tagName.toLowerCase()==="input"}function Eee(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Tee(e,t){return e.button===0&&(!t||t==="_self")&&!Eee(e)}function PA(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function Lee(e,t){let n=PA(e);return t&&t.forEach((r,s)=>{n.has(s)||t.getAll(s).forEach(i=>{n.append(s,i)})}),n}var iy=null;function kee(){if(iy===null)try{new FormData(document.createElement("form"),0),iy=!1}catch{iy=!0}return iy}var Pee=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function qC(e){return e!=null&&!Pee.has(e)?(Fs(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${vb}"`),null):e}function Dee(e,t){let n,r,s,i,o;if(_ee(e)){let l=e.getAttribute("action");r=l?Qo(l,t):null,n=e.getAttribute("method")||bb,s=qC(e.getAttribute("enctype"))||vb,i=new FormData(e)}else if(See(e)||Aee(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||l.getAttribute("action");if(r=c?Qo(c,t):null,n=e.getAttribute("formmethod")||l.getAttribute("method")||bb,s=qC(e.getAttribute("formenctype"))||qC(l.getAttribute("enctype"))||vb,i=new FormData(l,e),!kee()){let{name:d,type:m,value:h}=e;if(m==="image"){let p=d?`${d}.`:"";i.append(`${p}x`,"0"),i.append(`${p}y`,"0")}else d&&i.append(d,h)}}else{if(lw(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=bb,r=null,s=vb,o=e}return i&&s==="text/plain"&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function GT(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Oee(e,t,n){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${n}`:t&&Qo(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function Mee(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Iee(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function $ee(e,t,n){let r=await Promise.all(e.map(async s=>{let i=t.routes[s.route.id];if(i){let o=await Mee(i,n);return o.links?o.links():[]}return[]}));return Fee(r.flat(1).filter(Iee).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function D3(e,t,n,r,s,i){let o=(c,d)=>n[d]?c.route.id!==n[d].route.id:!0,l=(c,d)=>n[d].pathname!==c.pathname||n[d].route.path?.endsWith("*")&&n[d].params["*"]!==c.params["*"];return i==="assets"?t.filter((c,d)=>o(c,d)||l(c,d)):i==="data"?t.filter((c,d)=>{let m=r.routes[c.route.id];if(!m||!m.hasLoader)return!1;if(o(c,d)||l(c,d))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function Ree(e,t,{includeHydrateFallback:n}={}){return zee(e.map(r=>{let s=t.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function zee(e){return[...new Set(e)]}function Uee(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function Fee(e,t){let n=new Set;return new Set(t),e.reduce((r,s)=>{let i=JSON.stringify(Uee(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}function i8(){let e=g.useContext(pf);return GT(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Bee(){let e=g.useContext(ow);return GT(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var VT=g.createContext(void 0);VT.displayName="FrameworkContext";function o8(){let e=g.useContext(VT);return GT(e,"You must render this element inside a <HydratedRouter> element"),e}function Hee(e,t){let n=g.useContext(VT),[r,s]=g.useState(!1),[i,o]=g.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:m,onTouchStart:h}=t,p=g.useRef(null);g.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let x=j=>{j.forEach(C=>{o(C.isIntersecting)})},w=new IntersectionObserver(x,{threshold:.5});return p.current&&w.observe(p.current),()=>{w.disconnect()}}},[e]),g.useEffect(()=>{if(r){let x=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(x)}}},[r]);let b=()=>{s(!0)},v=()=>{s(!1),o(!1)};return n?e!=="intent"?[i,p,{}]:[i,p,{onFocus:Ah(l,b),onBlur:Ah(c,v),onMouseEnter:Ah(d,b),onMouseLeave:Ah(m,v),onTouchStart:Ah(h,b)}]:[!1,p,{}]}function Ah(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function Gee({page:e,...t}){let{router:n}=i8(),r=g.useMemo(()=>XF(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?g.createElement(Wee,{page:e,matches:r,...t}):null}function Vee(e){let{manifest:t,routeModules:n}=o8(),[r,s]=g.useState([]);return g.useEffect(()=>{let i=!1;return $ee(e,t,n).then(o=>{i||s(o)}),()=>{i=!0}},[e,t,n]),r}function Wee({page:e,matches:t,...n}){let r=Xt(),{manifest:s,routeModules:i}=o8(),{basename:o}=i8(),{loaderData:l,matches:c}=Bee(),d=g.useMemo(()=>D3(e,t,c,s,r,"data"),[e,t,c,s,r]),m=g.useMemo(()=>D3(e,t,c,s,r,"assets"),[e,t,c,s,r]),h=g.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let v=new Set,x=!1;if(t.forEach(j=>{let C=s.routes[j.route.id];!C||!C.hasLoader||(!d.some(S=>S.route.id===j.route.id)&&j.route.id in l&&i[j.route.id]?.shouldRevalidate||C.hasClientLoader?x=!0:v.add(j.route.id))}),v.size===0)return[];let w=Oee(e,o,"data");return x&&v.size>0&&w.searchParams.set("_routes",t.filter(j=>v.has(j.route.id)).map(j=>j.route.id).join(",")),[w.pathname+w.search]},[o,l,r,s,d,t,e,i]),p=g.useMemo(()=>Ree(m,s),[m,s]),b=Vee(m);return g.createElement(g.Fragment,null,h.map(v=>g.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...n})),p.map(v=>g.createElement("link",{key:v,rel:"modulepreload",href:v,...n})),b.map(({key:v,link:x})=>g.createElement("link",{key:v,nonce:n.nonce,...x})))}function qee(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var l8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{l8&&(window.__reactRouterVersion="7.9.3")}catch{}function Yee({basename:e,children:t,window:n}){let r=g.useRef();r.current==null&&(r.current=DJ({window:n,v5Compat:!0}));let s=r.current,[i,o]=g.useState({action:s.action,location:s.location}),l=g.useCallback(c=>{g.startTransition(()=>o(c))},[o]);return g.useLayoutEffect(()=>s.listen(l),[s,l]),g.createElement(jee,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:s})}var c8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,d8=g.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:m,viewTransition:h,...p},b){let{basename:v}=g.useContext(wi),x=typeof d=="string"&&c8.test(d),w,j=!1;if(typeof d=="string"&&x&&(w=d,l8))try{let U=new URL(window.location.href),W=d.startsWith("//")?new URL(U.protocol+d):new URL(d),I=Qo(W.pathname,v);W.origin===U.origin&&I!=null?d=I+W.search+W.hash:j=!0}catch{Fs(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=iee(d,{relative:s}),[S,_,E]=Hee(r,p),A=Xee(d,{replace:o,state:l,target:c,preventScrollReset:m,relative:s,viewTransition:h});function T(U){t&&t(U),U.defaultPrevented||A(U)}let R=g.createElement("a",{...p,...E,href:w||C,onClick:j||i?t:T,ref:qee(b,_),target:c,"data-discover":!x&&n==="render"?"true":void 0});return S&&!x?g.createElement(g.Fragment,null,R,g.createElement(Gee,{page:C})):R});d8.displayName="Link";var st=g.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:o,viewTransition:l,children:c,...d},m){let h=$p(o,{relative:d.relative}),p=Xt(),b=g.useContext(ow),{navigator:v,basename:x}=g.useContext(wi),w=b!=null&&nte(h)&&l===!0,j=v.encodeLocation?v.encodeLocation(h).pathname:h.pathname,C=p.pathname,S=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;n||(C=C.toLowerCase(),S=S?S.toLowerCase():null,j=j.toLowerCase()),S&&x&&(S=Qo(S,x)||S);const _=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let E=C===j||!s&&C.startsWith(j)&&C.charAt(_)==="/",A=S!=null&&(S===j||!s&&S.startsWith(j)&&S.charAt(j.length)==="/"),T={isActive:E,isPending:A,isTransitioning:w},R=E?t:void 0,U;typeof r=="function"?U=r(T):U=[r,E?"active":null,A?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let W=typeof i=="function"?i(T):i;return g.createElement(d8,{...d,"aria-current":R,className:U,ref:m,style:W,to:o,viewTransition:l},typeof c=="function"?c(T):c)});st.displayName="NavLink";var Kee=g.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:s,state:i,method:o=bb,action:l,onSubmit:c,relative:d,preventScrollReset:m,viewTransition:h,...p},b)=>{let v=ete(),x=tte(l,{relative:d}),w=o.toLowerCase()==="get"?"get":"post",j=typeof l=="string"&&c8.test(l),C=S=>{if(c&&c(S),S.defaultPrevented)return;S.preventDefault();let _=S.nativeEvent.submitter,E=_?.getAttribute("formmethod")||o;v(_||S.currentTarget,{fetcherKey:t,method:E,navigate:n,replace:s,state:i,relative:d,preventScrollReset:m,viewTransition:h})};return g.createElement("form",{ref:b,method:w,action:x,onSubmit:r?c:C,...p,"data-discover":!j&&e==="render"?"true":void 0})});Kee.displayName="Form";function Qee(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function u8(e){let t=g.useContext(pf);return In(t,Qee(e)),t}function Xee(e,{target:t,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:o}={}){let l=rt(),c=Xt(),d=$p(e,{relative:i});return g.useCallback(m=>{if(Tee(m,t)){m.preventDefault();let h=n!==void 0?n:Zg(c)===Zg(d);l(e,{replace:h,state:r,preventScrollReset:s,relative:i,viewTransition:o})}},[c,l,d,n,r,t,e,s,i,o])}function gr(e){Fs(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=g.useRef(PA(e)),n=g.useRef(!1),r=Xt(),s=g.useMemo(()=>Lee(r.search,n.current?null:t.current),[r.search]),i=rt(),o=g.useCallback((l,c)=>{const d=PA(typeof l=="function"?l(new URLSearchParams(s)):l);n.current=!0,i("?"+d,c)},[i,s]);return[s,o]}var Zee=0,Jee=()=>`__${String(++Zee)}__`;function ete(){let{router:e}=u8("useSubmit"),{basename:t}=g.useContext(wi),n=bee();return g.useCallback(async(r,s={})=>{let{action:i,method:o,encType:l,formData:c,body:d}=Dee(r,t);if(s.navigate===!1){let m=s.fetcherKey||Jee();await e.fetch(m,n,s.action||i,{preventScrollReset:s.preventScrollReset,formData:c,body:d,formMethod:s.method||o,formEncType:s.encType||l,flushSync:s.flushSync})}else await e.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:c,body:d,formMethod:s.method||o,formEncType:s.encType||l,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,n])}function tte(e,{relative:t}={}){let{basename:n}=g.useContext(wi),r=g.useContext(Qs);In(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...$p(e||".",{relative:t})},o=Xt();if(e==null){i.search=o.search;let l=new URLSearchParams(i.search),c=l.getAll("index");if(c.some(m=>m==="")){l.delete("index"),c.filter(h=>h).forEach(h=>l.append("index",h));let m=l.toString();i.search=m?`?${m}`:""}}return(!e||e===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:Wo([n,i.pathname])),Zg(i)}function nte(e,{relative:t}={}){let n=g.useContext(t8);In(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=u8("useViewTransitionState"),s=$p(e,{relative:t});if(!n.isTransitioning)return!1;let i=Qo(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Qo(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Rb(s.pathname,o)!=null||Rb(s.pathname,i)!=null}var Rp=QF();const oy=vi(Rp);function m8(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=m8(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function ct(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=m8(e))&&(r&&(r+=" "),r+=t);return r}function ate(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}ate(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var zp=e=>typeof e=="number"&&!isNaN(e),Bd=e=>typeof e=="string",Xo=e=>typeof e=="function",rte=e=>Bd(e)||zp(e),DA=e=>Bd(e)||Xo(e)?e:null,ste=(e,t)=>e===!1||zp(e)&&e>0?e:t,OA=e=>g.isValidElement(e)||Bd(e)||Xo(e)||zp(e);function ite(e,t,n=300){let{scrollHeight:r,style:s}=e;requestAnimationFrame(()=>{s.minHeight="initial",s.height=r+"px",s.transition=`all ${n}ms`,requestAnimationFrame(()=>{s.height="0",s.padding="0",s.margin="0",setTimeout(t,n)})})}function ote({enter:e,exit:t,appendPosition:n=!1,collapse:r=!0,collapseDuration:s=300}){return function({children:i,position:o,preventExitTransition:l,done:c,nodeRef:d,isIn:m,playToast:h}){let p=n?`${e}--${o}`:e,b=n?`${t}--${o}`:t,v=g.useRef(0);return g.useLayoutEffect(()=>{let x=d.current,w=p.split(" "),j=C=>{C.target===d.current&&(h(),x.removeEventListener("animationend",j),x.removeEventListener("animationcancel",j),v.current===0&&C.type!=="animationcancel"&&x.classList.remove(...w))};x.classList.add(...w),x.addEventListener("animationend",j),x.addEventListener("animationcancel",j)},[]),g.useEffect(()=>{let x=d.current,w=()=>{x.removeEventListener("animationend",w),r?ite(x,c,s):c()};m||(l?w():(v.current=1,x.className+=` ${b}`,x.addEventListener("animationend",w)))},[m]),nt.createElement(nt.Fragment,null,i)}}function O3(e,t){return{content:f8(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function f8(e,t,n=!1){return g.isValidElement(e)&&!Bd(e.type)?g.cloneElement(e,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:n}):Xo(e)?e({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:n}):e}function lte({closeToast:e,theme:t,ariaLabel:n="close"}){return nt.createElement("button",{className:`Toastify__close-button Toastify__close-button--${t}`,type:"button",onClick:r=>{r.stopPropagation(),e(!0)},"aria-label":n},nt.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},nt.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function cte({delay:e,isRunning:t,closeToast:n,type:r="default",hide:s,className:i,controlledProgress:o,progress:l,rtl:c,isIn:d,theme:m}){let h=s||o&&l===0,p={animationDuration:`${e}ms`,animationPlayState:t?"running":"paused"};o&&(p.transform=`scaleX(${l})`);let b=ct("Toastify__progress-bar",o?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${m}`,`Toastify__progress-bar--${r}`,{"Toastify__progress-bar--rtl":c}),v=Xo(i)?i({rtl:c,type:r,defaultClassName:b}):ct(b,i),x={[o&&l>=1?"onTransitionEnd":"onAnimationEnd"]:o&&l<1?null:()=>{d&&n()}};return nt.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":h},nt.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${m} Toastify__progress-bar--${r}`}),nt.createElement("div",{role:"progressbar","aria-hidden":h?"true":"false","aria-label":"notification timer",className:v,style:p,...x}))}var dte=1,h8=()=>`${dte++}`;function ute(e,t,n){let r=1,s=0,i=[],o=[],l=t,c=new Map,d=new Set,m=C=>(d.add(C),()=>d.delete(C)),h=()=>{o=Array.from(c.values()),d.forEach(C=>C())},p=({containerId:C,toastId:S,updateId:_})=>{let E=C?C!==e:e!==1,A=c.has(S)&&_==null;return E||A},b=(C,S)=>{c.forEach(_=>{var E;(S==null||S===_.props.toastId)&&((E=_.toggle)==null||E.call(_,C))})},v=C=>{var S,_;(_=(S=C.props)==null?void 0:S.onClose)==null||_.call(S,C.removalReason),C.isActive=!1},x=C=>{if(C==null)c.forEach(v);else{let S=c.get(C);S&&v(S)}h()},w=()=>{s-=i.length,i=[]},j=C=>{var S,_;let{toastId:E,updateId:A}=C.props,T=A==null;C.staleId&&c.delete(C.staleId),C.isActive=!0,c.set(E,C),h(),n(O3(C,T?"added":"updated")),T&&((_=(S=C.props).onOpen)==null||_.call(S))};return{id:e,props:l,observe:m,toggle:b,removeToast:x,toasts:c,clearQueue:w,buildToast:(C,S)=>{if(p(S))return;let{toastId:_,updateId:E,data:A,staleId:T,delay:R}=S,U=E==null;U&&s++;let W={...l,style:l.toastStyle,key:r++,...Object.fromEntries(Object.entries(S).filter(([M,H])=>H!=null)),toastId:_,updateId:E,data:A,isIn:!1,className:DA(S.className||l.toastClassName),progressClassName:DA(S.progressClassName||l.progressClassName),autoClose:S.isLoading?!1:ste(S.autoClose,l.autoClose),closeToast(M){c.get(_).removalReason=M,x(_)},deleteToast(){let M=c.get(_);if(M!=null){if(n(O3(M,"removed")),c.delete(_),s--,s<0&&(s=0),i.length>0){j(i.shift());return}h()}}};W.closeButton=l.closeButton,S.closeButton===!1||OA(S.closeButton)?W.closeButton=S.closeButton:S.closeButton===!0&&(W.closeButton=OA(l.closeButton)?l.closeButton:!0);let I={content:C,props:W,staleId:T};l.limit&&l.limit>0&&s>l.limit&&U?i.push(I):zp(R)?setTimeout(()=>{j(I)},R):j(I)},setProps(C){l=C},setToggle:(C,S)=>{let _=c.get(C);_&&(_.toggle=S)},isToastActive:C=>{var S;return(S=c.get(C))==null?void 0:S.isActive},getSnapshot:()=>o}}var br=new Map,Jg=[],MA=new Set,mte=e=>MA.forEach(t=>t(e)),g8=()=>br.size>0;function fte(){Jg.forEach(e=>x8(e.content,e.options)),Jg=[]}var hte=(e,{containerId:t})=>{var n;return(n=br.get(t||1))==null?void 0:n.toasts.get(e)};function p8(e,t){var n;if(t)return!!((n=br.get(t))!=null&&n.isToastActive(e));let r=!1;return br.forEach(s=>{s.isToastActive(e)&&(r=!0)}),r}function gte(e){if(!g8()){Jg=Jg.filter(t=>e!=null&&t.options.toastId!==e);return}if(e==null||rte(e))br.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=br.get(e.containerId);t?t.removeToast(e.id):br.forEach(n=>{n.removeToast(e.id)})}}var pte=(e={})=>{br.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})};function x8(e,t){OA(e)&&(g8()||Jg.push({content:e,options:t}),br.forEach(n=>{n.buildToast(e,t)}))}function xte(e){var t;(t=br.get(e.containerId||1))==null||t.setToggle(e.id,e.fn)}function y8(e,t){br.forEach(n=>{(t==null||!(t!=null&&t.containerId)||t?.containerId===n.id)&&n.toggle(e,t?.id)})}function yte(e){let t=e.containerId||1;return{subscribe(n){let r=ute(t,e,mte);br.set(t,r);let s=r.observe(n);return fte(),()=>{s(),br.delete(t)}},setProps(n){var r;(r=br.get(t))==null||r.setProps(n)},getSnapshot(){var n;return(n=br.get(t))==null?void 0:n.getSnapshot()}}}function bte(e){return MA.add(e),()=>{MA.delete(e)}}function vte(e){return e&&(Bd(e.toastId)||zp(e.toastId))?e.toastId:h8()}function Up(e,t){return x8(e,t),t.toastId}function cw(e,t){return{...t,type:t&&t.type||e,toastId:vte(t)}}function dw(e){return(t,n)=>Up(t,cw(e,n))}function Q(e,t){return Up(e,cw("default",t))}Q.loading=(e,t)=>Up(e,cw("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t}));function wte(e,{pending:t,error:n,success:r},s){let i;t&&(i=Bd(t)?Q.loading(t,s):Q.loading(t.render,{...s,...t}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(d,m,h)=>{if(m==null){Q.dismiss(i);return}let p={type:d,...o,...s,data:h},b=Bd(m)?{render:m}:m;return i?Q.update(i,{...p,...b}):Q(b.render,{...p,...b}),h},c=Xo(e)?e():e;return c.then(d=>l("success",r,d)).catch(d=>l("error",n,d)),c}Q.promise=wte;Q.success=dw("success");Q.info=dw("info");Q.error=dw("error");Q.warning=dw("warning");Q.warn=Q.warning;Q.dark=(e,t)=>Up(e,cw("default",{theme:"dark",...t}));function Nte(e){gte(e)}Q.dismiss=Nte;Q.clearWaitingQueue=pte;Q.isActive=p8;Q.update=(e,t={})=>{let n=hte(e,t);if(n){let{props:r,content:s}=n,i={delay:100,...r,...t,toastId:t.toastId||e,updateId:h8()};i.toastId!==e&&(i.staleId=e);let o=i.render||s;delete i.render,Up(o,i)}};Q.done=e=>{Q.update(e,{progress:1})};Q.onChange=bte;Q.play=e=>y8(!0,e);Q.pause=e=>y8(!1,e);function jte(e){var t;let{subscribe:n,getSnapshot:r,setProps:s}=g.useRef(yte(e)).current;s(e);let i=(t=g.useSyncExternalStore(n,r,r))==null?void 0:t.slice();function o(l){if(!i)return[];let c=new Map;return e.newestOnTop&&i.reverse(),i.forEach(d=>{let{position:m}=d.props;c.has(m)||c.set(m,[]),c.get(m).push(d)}),Array.from(c,d=>l(d[0],d[1]))}return{getToastToRender:o,isToastActive:p8,count:i?.length}}function Cte(e){let[t,n]=g.useState(!1),[r,s]=g.useState(!1),i=g.useRef(null),o=g.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:l,pauseOnHover:c,closeToast:d,onClick:m,closeOnClick:h}=e;xte({id:e.toastId,containerId:e.containerId,fn:n}),g.useEffect(()=>{if(e.pauseOnFocusLoss)return p(),()=>{b()}},[e.pauseOnFocusLoss]);function p(){document.hasFocus()||j(),window.addEventListener("focus",w),window.addEventListener("blur",j)}function b(){window.removeEventListener("focus",w),window.removeEventListener("blur",j)}function v(T){if(e.draggable===!0||e.draggable===T.pointerType){C();let R=i.current;o.canCloseOnClick=!0,o.canDrag=!0,R.style.transition="none",e.draggableDirection==="x"?(o.start=T.clientX,o.removalDistance=R.offsetWidth*(e.draggablePercent/100)):(o.start=T.clientY,o.removalDistance=R.offsetHeight*(e.draggablePercent===80?e.draggablePercent*1.5:e.draggablePercent)/100)}}function x(T){let{top:R,bottom:U,left:W,right:I}=i.current.getBoundingClientRect();T.nativeEvent.type!=="touchend"&&e.pauseOnHover&&T.clientX>=W&&T.clientX<=I&&T.clientY>=R&&T.clientY<=U?j():w()}function w(){n(!0)}function j(){n(!1)}function C(){o.didMove=!1,document.addEventListener("pointermove",_),document.addEventListener("pointerup",E)}function S(){document.removeEventListener("pointermove",_),document.removeEventListener("pointerup",E)}function _(T){let R=i.current;if(o.canDrag&&R){o.didMove=!0,t&&j(),e.draggableDirection==="x"?o.delta=T.clientX-o.start:o.delta=T.clientY-o.start,o.start!==T.clientX&&(o.canCloseOnClick=!1);let U=e.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`;R.style.transform=`translate3d(${U},0)`,R.style.opacity=`${1-Math.abs(o.delta/o.removalDistance)}`}}function E(){S();let T=i.current;if(o.canDrag&&o.didMove&&T){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance){s(!0),e.closeToast(!0),e.collapseAll();return}T.style.transition="transform 0.2s, opacity 0.2s",T.style.removeProperty("transform"),T.style.removeProperty("opacity")}}let A={onPointerDown:v,onPointerUp:x};return l&&c&&(A.onMouseEnter=j,e.stacked||(A.onMouseLeave=w)),h&&(A.onClick=T=>{m&&m(T),o.canCloseOnClick&&d(!0)}),{playToast:w,pauseToast:j,isRunning:t,preventExitTransition:r,toastRef:i,eventHandlers:A}}var Ste=typeof window<"u"?g.useLayoutEffect:g.useEffect,uw=({theme:e,type:t,isLoading:n,...r})=>nt.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${t})`,...r});function _te(e){return nt.createElement(uw,{...e},nt.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function Ate(e){return nt.createElement(uw,{...e},nt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function Ete(e){return nt.createElement(uw,{...e},nt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function Tte(e){return nt.createElement(uw,{...e},nt.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function Lte(){return nt.createElement("div",{className:"Toastify__spinner"})}var IA={info:Ate,warning:_te,success:Ete,error:Tte,spinner:Lte},kte=e=>e in IA;function Pte({theme:e,type:t,isLoading:n,icon:r}){let s=null,i={theme:e,type:t};return r===!1||(Xo(r)?s=r({...i,isLoading:n}):g.isValidElement(r)?s=g.cloneElement(r,i):n?s=IA.spinner():kte(t)&&(s=IA[t](i))),s}var Dte=e=>{let{isRunning:t,preventExitTransition:n,toastRef:r,eventHandlers:s,playToast:i}=Cte(e),{closeButton:o,children:l,autoClose:c,onClick:d,type:m,hideProgressBar:h,closeToast:p,transition:b,position:v,className:x,style:w,progressClassName:j,updateId:C,role:S,progress:_,rtl:E,toastId:A,deleteToast:T,isIn:R,isLoading:U,closeOnClick:W,theme:I,ariaLabel:M}=e,H=ct("Toastify__toast",`Toastify__toast-theme--${I}`,`Toastify__toast--${m}`,{"Toastify__toast--rtl":E},{"Toastify__toast--close-on-click":W}),q=Xo(x)?x({rtl:E,position:v,type:m,defaultClassName:H}):ct(H,x),ae=Pte(e),K=!!_||!c,B={closeToast:p,type:m,theme:I},X=null;return o===!1||(Xo(o)?X=o(B):g.isValidElement(o)?X=g.cloneElement(o,B):X=lte(B)),nt.createElement(b,{isIn:R,done:T,position:v,preventExitTransition:n,nodeRef:r,playToast:i},nt.createElement("div",{id:A,tabIndex:0,onClick:d,"data-in":R,className:q,...s,style:w,ref:r,...R&&{role:S,"aria-label":M}},ae!=null&&nt.createElement("div",{className:ct("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!U})},ae),f8(l,e,!t),X,!e.customProgressBar&&nt.createElement(cte,{...C&&!K?{key:`p-${C}`}:{},rtl:E,theme:I,delay:c,isRunning:t,isIn:R,closeToast:p,hide:h,type:m,className:j,controlledProgress:K,progress:_||0})))},Ote=(e,t=!1)=>({enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}),Mte=ote(Ote("bounce",!0)),Ite={position:"top-right",transition:Mte,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&e.code==="KeyT"};function $te(e){let t={...Ite,...e},n=e.stacked,[r,s]=g.useState(!0),i=g.useRef(null),{getToastToRender:o,isToastActive:l,count:c}=jte(t),{className:d,style:m,rtl:h,containerId:p,hotKeys:b}=t;function v(w){let j=ct("Toastify__toast-container",`Toastify__toast-container--${w}`,{"Toastify__toast-container--rtl":h});return Xo(d)?d({position:w,rtl:h,defaultClassName:j}):ct(j,DA(d))}function x(){n&&(s(!0),Q.play())}return Ste(()=>{var w;if(n){let j=i.current.querySelectorAll('[data-in="true"]'),C=12,S=(w=t.position)==null?void 0:w.includes("top"),_=0,E=0;Array.from(j).reverse().forEach((A,T)=>{let R=A;R.classList.add("Toastify__toast--stacked"),T>0&&(R.dataset.collapsed=`${r}`),R.dataset.pos||(R.dataset.pos=S?"top":"bot");let U=_*(r?.2:1)+(r?0:C*T);R.style.setProperty("--y",`${S?U:U*-1}px`),R.style.setProperty("--g",`${C}`),R.style.setProperty("--s",`${1-(r?E:0)}`),_+=R.offsetHeight,E+=.025})}},[r,c,n]),g.useEffect(()=>{function w(j){var C;let S=i.current;b(j)&&((C=S.querySelector('[tabIndex="0"]'))==null||C.focus(),s(!1),Q.pause()),j.key==="Escape"&&(document.activeElement===S||S!=null&&S.contains(document.activeElement))&&(s(!0),Q.play())}return document.addEventListener("keydown",w),()=>{document.removeEventListener("keydown",w)}},[b]),nt.createElement("section",{ref:i,className:"Toastify",id:p,onMouseEnter:()=>{n&&(s(!1),Q.pause())},onMouseLeave:x,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},o((w,j)=>{let C=j.length?{...m}:{...m,pointerEvents:"none"};return nt.createElement("div",{tabIndex:-1,className:v(w),"data-stacked":n,style:C,key:`c-${w}`},j.map(({content:S,props:_})=>nt.createElement(Dte,{..._,stacked:n,collapseAll:x,isIn:l(_.toastId,_.containerId),key:`t-${_.key}`},S)))}))}function b8(e,t){return function(){return e.apply(t,arguments)}}const{toString:Rte}=Object.prototype,{getPrototypeOf:WT}=Object,{iterator:mw,toStringTag:v8}=Symbol,fw=(e=>t=>{const n=Rte.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ni=e=>(e=e.toLowerCase(),t=>fw(t)===e),hw=e=>t=>typeof t===e,{isArray:bf}=Array,qm=hw("undefined");function Fp(e){return e!==null&&!qm(e)&&e.constructor!==null&&!qm(e.constructor)&&Ir(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const w8=Ni("ArrayBuffer");function zte(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&w8(e.buffer),t}const Ute=hw("string"),Ir=hw("function"),N8=hw("number"),Bp=e=>e!==null&&typeof e=="object",Fte=e=>e===!0||e===!1,wb=e=>{if(fw(e)!=="object")return!1;const t=WT(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(v8 in e)&&!(mw in e)},Bte=e=>{if(!Bp(e)||Fp(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Hte=Ni("Date"),Gte=Ni("File"),Vte=Ni("Blob"),Wte=Ni("FileList"),qte=e=>Bp(e)&&Ir(e.pipe),Yte=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Ir(e.append)&&((t=fw(e))==="formdata"||t==="object"&&Ir(e.toString)&&e.toString()==="[object FormData]"))},Kte=Ni("URLSearchParams"),[Qte,Xte,Zte,Jte]=["ReadableStream","Request","Response","Headers"].map(Ni),ene=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Hp(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,s;if(typeof e!="object"&&(e=[e]),bf(e))for(r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else{if(Fp(e))return;const i=n?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let l;for(r=0;r<o;r++)l=i[r],t.call(null,e[l],l,e)}}function j8(e,t){if(Fp(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r=n.length,s;for(;r-- >0;)if(s=n[r],t===s.toLowerCase())return s;return null}const jd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,C8=e=>!qm(e)&&e!==jd;function $A(){const{caseless:e,skipUndefined:t}=C8(this)&&this||{},n={},r=(s,i)=>{const o=e&&j8(n,i)||i;wb(n[o])&&wb(s)?n[o]=$A(n[o],s):wb(s)?n[o]=$A({},s):bf(s)?n[o]=s.slice():(!t||!qm(s))&&(n[o]=s)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&Hp(arguments[s],r);return n}const tne=(e,t,n,{allOwnKeys:r}={})=>(Hp(t,(s,i)=>{n&&Ir(s)?e[i]=b8(s,n):e[i]=s},{allOwnKeys:r}),e),nne=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),ane=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},rne=(e,t,n,r)=>{let s,i,o;const l={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)o=s[i],(!r||r(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=n!==!1&&WT(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},sne=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},ine=e=>{if(!e)return null;if(bf(e))return e;let t=e.length;if(!N8(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},one=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&WT(Uint8Array)),lne=(e,t)=>{const r=(e&&e[mw]).call(e);let s;for(;(s=r.next())&&!s.done;){const i=s.value;t.call(e,i[0],i[1])}},cne=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},dne=Ni("HTMLFormElement"),une=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),M3=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),mne=Ni("RegExp"),S8=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Hp(n,(s,i)=>{let o;(o=t(s,i,e))!==!1&&(r[i]=o||s)}),Object.defineProperties(e,r)},fne=e=>{S8(e,(t,n)=>{if(Ir(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(Ir(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},hne=(e,t)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return bf(e)?r(e):r(String(e).split(t)),n},gne=()=>{},pne=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function xne(e){return!!(e&&Ir(e.append)&&e[v8]==="FormData"&&e[mw])}const yne=e=>{const t=new Array(10),n=(r,s)=>{if(Bp(r)){if(t.indexOf(r)>=0)return;if(Fp(r))return r;if(!("toJSON"in r)){t[s]=r;const i=bf(r)?[]:{};return Hp(r,(o,l)=>{const c=n(o,s+1);!qm(c)&&(i[l]=c)}),t[s]=void 0,i}}return r};return n(e,0)},bne=Ni("AsyncFunction"),vne=e=>e&&(Bp(e)||Ir(e))&&Ir(e.then)&&Ir(e.catch),_8=((e,t)=>e?setImmediate:t?((n,r)=>(jd.addEventListener("message",({source:s,data:i})=>{s===jd&&i===n&&r.length&&r.shift()()},!1),s=>{r.push(s),jd.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Ir(jd.postMessage)),wne=typeof queueMicrotask<"u"?queueMicrotask.bind(jd):typeof process<"u"&&process.nextTick||_8,Nne=e=>e!=null&&Ir(e[mw]),Fe={isArray:bf,isArrayBuffer:w8,isBuffer:Fp,isFormData:Yte,isArrayBufferView:zte,isString:Ute,isNumber:N8,isBoolean:Fte,isObject:Bp,isPlainObject:wb,isEmptyObject:Bte,isReadableStream:Qte,isRequest:Xte,isResponse:Zte,isHeaders:Jte,isUndefined:qm,isDate:Hte,isFile:Gte,isBlob:Vte,isRegExp:mne,isFunction:Ir,isStream:qte,isURLSearchParams:Kte,isTypedArray:one,isFileList:Wte,forEach:Hp,merge:$A,extend:tne,trim:ene,stripBOM:nne,inherits:ane,toFlatObject:rne,kindOf:fw,kindOfTest:Ni,endsWith:sne,toArray:ine,forEachEntry:lne,matchAll:cne,isHTMLForm:dne,hasOwnProperty:M3,hasOwnProp:M3,reduceDescriptors:S8,freezeMethods:fne,toObjectSet:hne,toCamelCase:une,noop:gne,toFiniteNumber:pne,findKey:j8,global:jd,isContextDefined:C8,isSpecCompliantForm:xne,toJSONObject:yne,isAsyncFn:bne,isThenable:vne,setImmediate:_8,asap:wne,isIterable:Nne};function At(e,t,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}Fe.inherits(At,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Fe.toJSONObject(this.config),code:this.code,status:this.status}}});const A8=At.prototype,E8={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{E8[e]={value:e}});Object.defineProperties(At,E8);Object.defineProperty(A8,"isAxiosError",{value:!0});At.from=(e,t,n,r,s,i)=>{const o=Object.create(A8);Fe.toFlatObject(e,o,function(m){return m!==Error.prototype},d=>d!=="isAxiosError");const l=e&&e.message?e.message:"Error",c=t==null&&e?e.code:t;return At.call(o,l,c,n,r,s),e&&o.cause==null&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",i&&Object.assign(o,i),o};const jne=null;function RA(e){return Fe.isPlainObject(e)||Fe.isArray(e)}function T8(e){return Fe.endsWith(e,"[]")?e.slice(0,-2):e}function I3(e,t,n){return e?e.concat(t).map(function(s,i){return s=T8(s),!n&&i?"["+s+"]":s}).join(n?".":""):t}function Cne(e){return Fe.isArray(e)&&!e.some(RA)}const Sne=Fe.toFlatObject(Fe,{},null,function(t){return/^is[A-Z]/.test(t)});function gw(e,t,n){if(!Fe.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=Fe.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,w){return!Fe.isUndefined(w[x])});const r=n.metaTokens,s=n.visitor||m,i=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&Fe.isSpecCompliantForm(t);if(!Fe.isFunction(s))throw new TypeError("visitor must be a function");function d(v){if(v===null)return"";if(Fe.isDate(v))return v.toISOString();if(Fe.isBoolean(v))return v.toString();if(!c&&Fe.isBlob(v))throw new At("Blob is not supported. Use a Buffer instead.");return Fe.isArrayBuffer(v)||Fe.isTypedArray(v)?c&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function m(v,x,w){let j=v;if(v&&!w&&typeof v=="object"){if(Fe.endsWith(x,"{}"))x=r?x:x.slice(0,-2),v=JSON.stringify(v);else if(Fe.isArray(v)&&Cne(v)||(Fe.isFileList(v)||Fe.endsWith(x,"[]"))&&(j=Fe.toArray(v)))return x=T8(x),j.forEach(function(S,_){!(Fe.isUndefined(S)||S===null)&&t.append(o===!0?I3([x],_,i):o===null?x:x+"[]",d(S))}),!1}return RA(v)?!0:(t.append(I3(w,x,i),d(v)),!1)}const h=[],p=Object.assign(Sne,{defaultVisitor:m,convertValue:d,isVisitable:RA});function b(v,x){if(!Fe.isUndefined(v)){if(h.indexOf(v)!==-1)throw Error("Circular reference detected in "+x.join("."));h.push(v),Fe.forEach(v,function(j,C){(!(Fe.isUndefined(j)||j===null)&&s.call(t,j,Fe.isString(C)?C.trim():C,x,p))===!0&&b(j,x?x.concat(C):[C])}),h.pop()}}if(!Fe.isObject(e))throw new TypeError("data must be an object");return b(e),t}function $3(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function qT(e,t){this._pairs=[],e&&gw(e,this,t)}const L8=qT.prototype;L8.append=function(t,n){this._pairs.push([t,n])};L8.toString=function(t){const n=t?function(r){return t.call(this,r,$3)}:$3;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function _ne(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function k8(e,t,n){if(!t)return e;const r=n&&n.encode||_ne;Fe.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(s?i=s(t,n):i=Fe.isURLSearchParams(t)?t.toString():new qT(t,n).toString(r),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class R3{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Fe.forEach(this.handlers,function(r){r!==null&&t(r)})}}const P8={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ane=typeof URLSearchParams<"u"?URLSearchParams:qT,Ene=typeof FormData<"u"?FormData:null,Tne=typeof Blob<"u"?Blob:null,Lne={isBrowser:!0,classes:{URLSearchParams:Ane,FormData:Ene,Blob:Tne},protocols:["http","https","file","blob","url","data"]},YT=typeof window<"u"&&typeof document<"u",zA=typeof navigator=="object"&&navigator||void 0,kne=YT&&(!zA||["ReactNative","NativeScript","NS"].indexOf(zA.product)<0),Pne=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Dne=YT&&window.location.href||"http://localhost",One=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:YT,hasStandardBrowserEnv:kne,hasStandardBrowserWebWorkerEnv:Pne,navigator:zA,origin:Dne},Symbol.toStringTag,{value:"Module"})),lr={...One,...Lne};function Mne(e,t){return gw(e,new lr.classes.URLSearchParams,{visitor:function(n,r,s,i){return lr.isNode&&Fe.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function Ine(e){return Fe.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function $ne(e){const t={},n=Object.keys(e);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],t[i]=e[i];return t}function D8(e){function t(n,r,s,i){let o=n[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=n.length;return o=!o&&Fe.isArray(s)?s.length:o,c?(Fe.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!l):((!s[o]||!Fe.isObject(s[o]))&&(s[o]=[]),t(n,r,s[o],i)&&Fe.isArray(s[o])&&(s[o]=$ne(s[o])),!l)}if(Fe.isFormData(e)&&Fe.isFunction(e.entries)){const n={};return Fe.forEachEntry(e,(r,s)=>{t(Ine(r),s,n,0)}),n}return null}function Rne(e,t,n){if(Fe.isString(e))try{return(t||JSON.parse)(e),Fe.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const Gp={transitional:P8,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=Fe.isObject(t);if(i&&Fe.isHTMLForm(t)&&(t=new FormData(t)),Fe.isFormData(t))return s?JSON.stringify(D8(t)):t;if(Fe.isArrayBuffer(t)||Fe.isBuffer(t)||Fe.isStream(t)||Fe.isFile(t)||Fe.isBlob(t)||Fe.isReadableStream(t))return t;if(Fe.isArrayBufferView(t))return t.buffer;if(Fe.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Mne(t,this.formSerializer).toString();if((l=Fe.isFileList(t))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return gw(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),Rne(t)):t}],transformResponse:[function(t){const n=this.transitional||Gp.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(Fe.isResponse(t)||Fe.isReadableStream(t))return t;if(t&&Fe.isString(t)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t,this.parseReviver)}catch(l){if(o)throw l.name==="SyntaxError"?At.from(l,At.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:lr.classes.FormData,Blob:lr.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Fe.forEach(["delete","get","head","post","put","patch"],e=>{Gp.headers[e]={}});const zne=Fe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Une=e=>{const t={};let n,r,s;return e&&e.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||t[n]&&zne[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},z3=Symbol("internals");function Eh(e){return e&&String(e).trim().toLowerCase()}function Nb(e){return e===!1||e==null?e:Fe.isArray(e)?e.map(Nb):String(e)}function Fne(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const Bne=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function YC(e,t,n,r,s){if(Fe.isFunction(r))return r.call(this,t,n);if(s&&(t=n),!!Fe.isString(t)){if(Fe.isString(r))return t.indexOf(r)!==-1;if(Fe.isRegExp(r))return r.test(t)}}function Hne(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function Gne(e,t){const n=Fe.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(s,i,o){return this[r].call(this,t,s,i,o)},configurable:!0})})}let $r=class{constructor(t){t&&this.set(t)}set(t,n,r){const s=this;function i(l,c,d){const m=Eh(c);if(!m)throw new Error("header name must be a non-empty string");const h=Fe.findKey(s,m);(!h||s[h]===void 0||d===!0||d===void 0&&s[h]!==!1)&&(s[h||c]=Nb(l))}const o=(l,c)=>Fe.forEach(l,(d,m)=>i(d,m,c));if(Fe.isPlainObject(t)||t instanceof this.constructor)o(t,n);else if(Fe.isString(t)&&(t=t.trim())&&!Bne(t))o(Une(t),n);else if(Fe.isObject(t)&&Fe.isIterable(t)){let l={},c,d;for(const m of t){if(!Fe.isArray(m))throw TypeError("Object iterator must return a key-value pair");l[d=m[0]]=(c=l[d])?Fe.isArray(c)?[...c,m[1]]:[c,m[1]]:m[1]}o(l,n)}else t!=null&&i(n,t,r);return this}get(t,n){if(t=Eh(t),t){const r=Fe.findKey(this,t);if(r){const s=this[r];if(!n)return s;if(n===!0)return Fne(s);if(Fe.isFunction(n))return n.call(this,s,r);if(Fe.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Eh(t),t){const r=Fe.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||YC(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let s=!1;function i(o){if(o=Eh(o),o){const l=Fe.findKey(r,o);l&&(!n||YC(r,r[l],l,n))&&(delete r[l],s=!0)}}return Fe.isArray(t)?t.forEach(i):i(t),s}clear(t){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!t||YC(this,this[i],i,t,!0))&&(delete this[i],s=!0)}return s}normalize(t){const n=this,r={};return Fe.forEach(this,(s,i)=>{const o=Fe.findKey(r,i);if(o){n[o]=Nb(s),delete n[i];return}const l=t?Hne(i):String(i).trim();l!==i&&delete n[i],n[l]=Nb(s),r[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return Fe.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=t&&Fe.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(s=>r.set(s)),r}static accessor(t){const r=(this[z3]=this[z3]={accessors:{}}).accessors,s=this.prototype;function i(o){const l=Eh(o);r[l]||(Gne(s,o),r[l]=!0)}return Fe.isArray(t)?t.forEach(i):i(t),this}};$r.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Fe.reduceDescriptors($r.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});Fe.freezeMethods($r);function KC(e,t){const n=this||Gp,r=t||n,s=$r.from(r.headers);let i=r.data;return Fe.forEach(e,function(l){i=l.call(n,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function O8(e){return!!(e&&e.__CANCEL__)}function vf(e,t,n){At.call(this,e??"canceled",At.ERR_CANCELED,t,n),this.name="CanceledError"}Fe.inherits(vf,At,{__CANCEL__:!0});function M8(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new At("Request failed with status code "+n.status,[At.ERR_BAD_REQUEST,At.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Vne(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Wne(e,t){e=e||10;const n=new Array(e),r=new Array(e);let s=0,i=0,o;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),m=r[i];o||(o=d),n[s]=c,r[s]=d;let h=i,p=0;for(;h!==s;)p+=n[h++],h=h%e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),d-o<t)return;const b=m&&d-m;return b?Math.round(p*1e3/b):void 0}}function qne(e,t){let n=0,r=1e3/t,s,i;const o=(d,m=Date.now())=>{n=m,s=null,i&&(clearTimeout(i),i=null),e(...d)};return[(...d)=>{const m=Date.now(),h=m-n;h>=r?o(d,m):(s=d,i||(i=setTimeout(()=>{i=null,o(s)},r-h)))},()=>s&&o(s)]}const zb=(e,t,n=3)=>{let r=0;const s=Wne(50,250);return qne(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-r,d=s(c),m=o<=l;r=o;const h={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&m?(l-o)/d:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(h)},n)},U3=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},F3=e=>(...t)=>Fe.asap(()=>e(...t)),Yne=lr.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,lr.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(lr.origin),lr.navigator&&/(msie|trident)/i.test(lr.navigator.userAgent)):()=>!0,Kne=lr.hasStandardBrowserEnv?{write(e,t,n,r,s,i){const o=[e+"="+encodeURIComponent(t)];Fe.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Fe.isString(r)&&o.push("path="+r),Fe.isString(s)&&o.push("domain="+s),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Qne(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Xne(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function I8(e,t,n){let r=!Qne(t);return e&&(r||n==!1)?Xne(e,t):t}const B3=e=>e instanceof $r?{...e}:e;function Hd(e,t){t=t||{};const n={};function r(d,m,h,p){return Fe.isPlainObject(d)&&Fe.isPlainObject(m)?Fe.merge.call({caseless:p},d,m):Fe.isPlainObject(m)?Fe.merge({},m):Fe.isArray(m)?m.slice():m}function s(d,m,h,p){if(Fe.isUndefined(m)){if(!Fe.isUndefined(d))return r(void 0,d,h,p)}else return r(d,m,h,p)}function i(d,m){if(!Fe.isUndefined(m))return r(void 0,m)}function o(d,m){if(Fe.isUndefined(m)){if(!Fe.isUndefined(d))return r(void 0,d)}else return r(void 0,m)}function l(d,m,h){if(h in t)return r(d,m);if(h in e)return r(void 0,d)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(d,m,h)=>s(B3(d),B3(m),h,!0)};return Fe.forEach(Object.keys({...e,...t}),function(m){const h=c[m]||s,p=h(e[m],t[m],m);Fe.isUndefined(p)&&h!==l||(n[m]=p)}),n}const $8=e=>{const t=Hd({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:l}=t;if(t.headers=o=$r.from(o),t.url=k8(I8(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),Fe.isFormData(n)){if(lr.hasStandardBrowserEnv||lr.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(Fe.isFunction(n.getHeaders)){const c=n.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([m,h])=>{d.includes(m.toLowerCase())&&o.set(m,h)})}}if(lr.hasStandardBrowserEnv&&(r&&Fe.isFunction(r)&&(r=r(t)),r||r!==!1&&Yne(t.url))){const c=s&&i&&Kne.read(i);c&&o.set(s,c)}return t},Zne=typeof XMLHttpRequest<"u",Jne=Zne&&function(e){return new Promise(function(n,r){const s=$8(e);let i=s.data;const o=$r.from(s.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=s,m,h,p,b,v;function x(){b&&b(),v&&v(),s.cancelToken&&s.cancelToken.unsubscribe(m),s.signal&&s.signal.removeEventListener("abort",m)}let w=new XMLHttpRequest;w.open(s.method.toUpperCase(),s.url,!0),w.timeout=s.timeout;function j(){if(!w)return;const S=$r.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),E={data:!l||l==="text"||l==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:S,config:e,request:w};M8(function(T){n(T),x()},function(T){r(T),x()},E),w=null}"onloadend"in w?w.onloadend=j:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(j)},w.onabort=function(){w&&(r(new At("Request aborted",At.ECONNABORTED,e,w)),w=null)},w.onerror=function(_){const E=_&&_.message?_.message:"Network Error",A=new At(E,At.ERR_NETWORK,e,w);A.event=_||null,r(A),w=null},w.ontimeout=function(){let _=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const E=s.transitional||P8;s.timeoutErrorMessage&&(_=s.timeoutErrorMessage),r(new At(_,E.clarifyTimeoutError?At.ETIMEDOUT:At.ECONNABORTED,e,w)),w=null},i===void 0&&o.setContentType(null),"setRequestHeader"in w&&Fe.forEach(o.toJSON(),function(_,E){w.setRequestHeader(E,_)}),Fe.isUndefined(s.withCredentials)||(w.withCredentials=!!s.withCredentials),l&&l!=="json"&&(w.responseType=s.responseType),d&&([p,v]=zb(d,!0),w.addEventListener("progress",p)),c&&w.upload&&([h,b]=zb(c),w.upload.addEventListener("progress",h),w.upload.addEventListener("loadend",b)),(s.cancelToken||s.signal)&&(m=S=>{w&&(r(!S||S.type?new vf(null,e,w):S),w.abort(),w=null)},s.cancelToken&&s.cancelToken.subscribe(m),s.signal&&(s.signal.aborted?m():s.signal.addEventListener("abort",m)));const C=Vne(s.url);if(C&&lr.protocols.indexOf(C)===-1){r(new At("Unsupported protocol "+C+":",At.ERR_BAD_REQUEST,e));return}w.send(i||null)})},eae=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,s;const i=function(d){if(!s){s=!0,l();const m=d instanceof Error?d:this.reason;r.abort(m instanceof At?m:new vf(m instanceof Error?m.message:m))}};let o=t&&setTimeout(()=>{o=null,i(new At(`timeout ${t} of ms exceeded`,At.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),e=null)};e.forEach(d=>d.addEventListener("abort",i));const{signal:c}=r;return c.unsubscribe=()=>Fe.asap(l),c}},tae=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,s;for(;r<n;)s=r+t,yield e.slice(r,s),r=s},nae=async function*(e,t){for await(const n of aae(e))yield*tae(n,t)},aae=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},H3=(e,t,n,r)=>{const s=nae(e,t);let i=0,o,l=c=>{o||(o=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:d,value:m}=await s.next();if(d){l(),c.close();return}let h=m.byteLength;if(n){let p=i+=h;n(p)}c.enqueue(new Uint8Array(m))}catch(d){throw l(d),d}},cancel(c){return l(c),s.return()}},{highWaterMark:2})},G3=64*1024,{isFunction:ly}=Fe,rae=(({Request:e,Response:t})=>({Request:e,Response:t}))(Fe.global),{ReadableStream:V3,TextEncoder:W3}=Fe.global,q3=(e,...t)=>{try{return!!e(...t)}catch{return!1}},sae=e=>{e=Fe.merge.call({skipUndefined:!0},rae,e);const{fetch:t,Request:n,Response:r}=e,s=t?ly(t):typeof fetch=="function",i=ly(n),o=ly(r);if(!s)return!1;const l=s&&ly(V3),c=s&&(typeof W3=="function"?(v=>x=>v.encode(x))(new W3):async v=>new Uint8Array(await new n(v).arrayBuffer())),d=i&&l&&q3(()=>{let v=!1;const x=new n(lr.origin,{body:new V3,method:"POST",get duplex(){return v=!0,"half"}}).headers.has("Content-Type");return v&&!x}),m=o&&l&&q3(()=>Fe.isReadableStream(new r("").body)),h={stream:m&&(v=>v.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(v=>{!h[v]&&(h[v]=(x,w)=>{let j=x&&x[v];if(j)return j.call(x);throw new At(`Response type '${v}' is not supported`,At.ERR_NOT_SUPPORT,w)})});const p=async v=>{if(v==null)return 0;if(Fe.isBlob(v))return v.size;if(Fe.isSpecCompliantForm(v))return(await new n(lr.origin,{method:"POST",body:v}).arrayBuffer()).byteLength;if(Fe.isArrayBufferView(v)||Fe.isArrayBuffer(v))return v.byteLength;if(Fe.isURLSearchParams(v)&&(v=v+""),Fe.isString(v))return(await c(v)).byteLength},b=async(v,x)=>{const w=Fe.toFiniteNumber(v.getContentLength());return w??p(x)};return async v=>{let{url:x,method:w,data:j,signal:C,cancelToken:S,timeout:_,onDownloadProgress:E,onUploadProgress:A,responseType:T,headers:R,withCredentials:U="same-origin",fetchOptions:W}=$8(v),I=t||fetch;T=T?(T+"").toLowerCase():"text";let M=eae([C,S&&S.toAbortSignal()],_),H=null;const q=M&&M.unsubscribe&&(()=>{M.unsubscribe()});let ae;try{if(A&&d&&w!=="get"&&w!=="head"&&(ae=await b(R,j))!==0){let J=new n(x,{method:"POST",body:j,duplex:"half"}),ne;if(Fe.isFormData(j)&&(ne=J.headers.get("content-type"))&&R.setContentType(ne),J.body){const[pe,we]=U3(ae,zb(F3(A)));j=H3(J.body,G3,pe,we)}}Fe.isString(U)||(U=U?"include":"omit");const K=i&&"credentials"in n.prototype,B={...W,signal:M,method:w.toUpperCase(),headers:R.normalize().toJSON(),body:j,duplex:"half",credentials:K?U:void 0};H=i&&new n(x,B);let X=await(i?I(H,W):I(x,B));const le=m&&(T==="stream"||T==="response");if(m&&(E||le&&q)){const J={};["status","statusText","headers"].forEach(ye=>{J[ye]=X[ye]});const ne=Fe.toFiniteNumber(X.headers.get("content-length")),[pe,we]=E&&U3(ne,zb(F3(E),!0))||[];X=new r(H3(X.body,G3,pe,()=>{we&&we(),q&&q()}),J)}T=T||"text";let ue=await h[Fe.findKey(h,T)||"text"](X,v);return!le&&q&&q(),await new Promise((J,ne)=>{M8(J,ne,{data:ue,headers:$r.from(X.headers),status:X.status,statusText:X.statusText,config:v,request:H})})}catch(K){throw q&&q(),K&&K.name==="TypeError"&&/Load failed|fetch/i.test(K.message)?Object.assign(new At("Network Error",At.ERR_NETWORK,v,H),{cause:K.cause||K}):At.from(K,K&&K.code,v,H)}}},iae=new Map,R8=e=>{let t=e?e.env:{};const{fetch:n,Request:r,Response:s}=t,i=[r,s,n];let o=i.length,l=o,c,d,m=iae;for(;l--;)c=i[l],d=m.get(c),d===void 0&&m.set(c,d=l?new Map:sae(t)),m=d;return d};R8();const UA={http:jne,xhr:Jne,fetch:{get:R8}};Fe.forEach(UA,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Y3=e=>`- ${e}`,oae=e=>Fe.isFunction(e)||e===null||e===!1,z8={getAdapter:(e,t)=>{e=Fe.isArray(e)?e:[e];const{length:n}=e;let r,s;const i={};for(let o=0;o<n;o++){r=e[o];let l;if(s=r,!oae(r)&&(s=UA[(l=String(r)).toLowerCase()],s===void 0))throw new At(`Unknown adapter '${l}'`);if(s&&(Fe.isFunction(s)||(s=s.get(t))))break;i[l||"#"+o]=s}if(!s){const o=Object.entries(i).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let l=n?o.length>1?`since :
`+o.map(Y3).join(`
`):" "+Y3(o[0]):"as no adapter specified";throw new At("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return s},adapters:UA};function QC(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new vf(null,e)}function K3(e){return QC(e),e.headers=$r.from(e.headers),e.data=KC.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),z8.getAdapter(e.adapter||Gp.adapter,e)(e).then(function(r){return QC(e),r.data=KC.call(e,e.transformResponse,r),r.headers=$r.from(r.headers),r},function(r){return O8(r)||(QC(e),r&&r.response&&(r.response.data=KC.call(e,e.transformResponse,r.response),r.response.headers=$r.from(r.response.headers))),Promise.reject(r)})}const U8="1.12.2",pw={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{pw[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const Q3={};pw.transitional=function(t,n,r){function s(i,o){return"[Axios v"+U8+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,l)=>{if(t===!1)throw new At(s(o," has been removed"+(n?" in "+n:"")),At.ERR_DEPRECATED);return n&&!Q3[o]&&(Q3[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(i,o,l):!0}};pw.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function lae(e,t,n){if(typeof e!="object")throw new At("options must be an object",At.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const i=r[s],o=t[i];if(o){const l=e[i],c=l===void 0||o(l,i,e);if(c!==!0)throw new At("option "+i+" must be "+c,At.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new At("Unknown option "+i,At.ERR_BAD_OPTION)}}const jb={assertOptions:lae,validators:pw},Li=jb.validators;let Pd=class{constructor(t){this.defaults=t||{},this.interceptors={request:new R3,response:new R3}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Hd(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&jb.assertOptions(r,{silentJSONParsing:Li.transitional(Li.boolean),forcedJSONParsing:Li.transitional(Li.boolean),clarifyTimeoutError:Li.transitional(Li.boolean)},!1),s!=null&&(Fe.isFunction(s)?n.paramsSerializer={serialize:s}:jb.assertOptions(s,{encode:Li.function,serialize:Li.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),jb.assertOptions(n,{baseUrl:Li.spelling("baseURL"),withXsrfToken:Li.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&Fe.merge(i.common,i[n.method]);i&&Fe.forEach(["delete","get","head","post","put","patch","common"],v=>{delete i[v]}),n.headers=$r.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(n)===!1||(c=c&&x.synchronous,l.unshift(x.fulfilled,x.rejected))});const d=[];this.interceptors.response.forEach(function(x){d.push(x.fulfilled,x.rejected)});let m,h=0,p;if(!c){const v=[K3.bind(this),void 0];for(v.unshift(...l),v.push(...d),p=v.length,m=Promise.resolve(n);h<p;)m=m.then(v[h++],v[h++]);return m}p=l.length;let b=n;for(;h<p;){const v=l[h++],x=l[h++];try{b=v(b)}catch(w){x.call(this,w);break}}try{m=K3.call(this,b)}catch(v){return Promise.reject(v)}for(h=0,p=d.length;h<p;)m=m.then(d[h++],d[h++]);return m}getUri(t){t=Hd(this.defaults,t);const n=I8(t.baseURL,t.url,t.allowAbsoluteUrls);return k8(n,t.params,t.paramsSerializer)}};Fe.forEach(["delete","get","head","options"],function(t){Pd.prototype[t]=function(n,r){return this.request(Hd(r||{},{method:t,url:n,data:(r||{}).data}))}});Fe.forEach(["post","put","patch"],function(t){function n(r){return function(i,o,l){return this.request(Hd(l||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}Pd.prototype[t]=n(),Pd.prototype[t+"Form"]=n(!0)});let cae=class F8{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(l=>{r.subscribe(l),i=l}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},t(function(i,o,l){r.reason||(r.reason=new vf(i,o,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new F8(function(s){t=s}),cancel:t}}};function dae(e){return function(n){return e.apply(null,n)}}function uae(e){return Fe.isObject(e)&&e.isAxiosError===!0}const FA={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(FA).forEach(([e,t])=>{FA[t]=e});function B8(e){const t=new Pd(e),n=b8(Pd.prototype.request,t);return Fe.extend(n,Pd.prototype,t,{allOwnKeys:!0}),Fe.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return B8(Hd(e,s))},n}const ra=B8(Gp);ra.Axios=Pd;ra.CanceledError=vf;ra.CancelToken=cae;ra.isCancel=O8;ra.VERSION=U8;ra.toFormData=gw;ra.AxiosError=At;ra.Cancel=ra.CanceledError;ra.all=function(t){return Promise.all(t)};ra.spread=dae;ra.isAxiosError=uae;ra.mergeConfig=Hd;ra.AxiosHeaders=$r;ra.formToJSON=e=>D8(Fe.isHTMLForm(e)?new FormData(e):e);ra.getAdapter=z8.getAdapter;ra.HttpStatusCode=FA;ra.default=ra;const{Axios:c8e,AxiosError:d8e,CanceledError:u8e,isCancel:m8e,CancelToken:f8e,VERSION:h8e,all:g8e,Cancel:p8e,isAxiosError:x8e,spread:y8e,toFormData:b8e,AxiosHeaders:v8e,HttpStatusCode:w8e,formToJSON:N8e,getAdapter:j8e,mergeConfig:C8e}=ra,mae="https://crm.sari-sari.com",oe=ra.create({baseURL:`${mae}/api`,withCredentials:!0,headers:{"Content-Type":"application/json"}});oe.interceptors.request.use(e=>(console.log(` [${e.method?.toUpperCase()}] ${e.url}`),e),e=>Promise.reject(e));oe.interceptors.response.use(e=>e,e=>(e.response?.status===401&&(console.warn(" Unauthorized  possible expired token or not logged in."),localStorage.clear(),window.location.href="/login"),Promise.reject(e)));const fae="isLoggedIn",cy="userRole",er=()=>{const[e,t]=g.useState(!!localStorage.getItem(cy)),[n,r]=g.useState(localStorage.getItem(cy)||""),s=rt();g.useEffect(()=>{const d=localStorage.getItem(cy);d?(t(!0),r(d)):o()},[]);const i=d=>{localStorage.setItem(cy,d.role),localStorage.setItem(fae,!0),t(!0),r(d.role)},o=()=>{localStorage.clear(),t(!1),r("")};return{isLoggedIn:e,logout:async()=>{try{await oe.post("/auth/logout")}catch(d){console.log("Failed to logout from server:",d)}o(),s("/")},userRole:n,setUserRole:r,login:d=>{i(d),d.role==="CEO"||d.role==="Admin"?s("/admin"):d.role==="Manager"?s("/manager/dashboard"):s("/")}}},Th=({children:e,requiredRole:t})=>{const{isLoggedIn:n,userRole:r}=er();if(!n)return a.jsx(os,{to:"/",replace:!0});if(!t)return r.toUpperCase()==="ADMIN"||r.toUpperCase()==="CEO"?a.jsx(os,{to:"/admin/dashboard",replace:!0}):r==="GROUP MANAGER"?a.jsx(os,{to:"/group-manager/dashboard",replace:!0}):r==="MANAGER"?a.jsx(os,{to:"/manager/dashboard",replace:!0}):r==="SALES"?a.jsx(os,{to:"/sales/dashboard",replace:!0}):a.jsx(os,{to:"/",replace:!0});const s=r.toLowerCase(),i=t.toLowerCase();return s!==i?a.jsx(os,{to:"/",replace:!0}):e};var H8={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},X3=nt.createContext&&nt.createContext(H8),hae=["attr","size","title"];function gae(e,t){if(e==null)return{};var n=pae(e,t),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function pae(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Ub(){return Ub=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ub.apply(this,arguments)}function Z3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Fb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Z3(Object(n),!0).forEach(function(r){xae(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function xae(e,t,n){return t=yae(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yae(e){var t=bae(e,"string");return typeof t=="symbol"?t:t+""}function bae(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function G8(e){return e&&e.map((t,n)=>nt.createElement(t.tag,Fb({key:n},t.attr),G8(t.child)))}function it(e){return t=>nt.createElement(vae,Ub({attr:Fb({},e.attr)},t),G8(e.child))}function vae(e){var t=n=>{var{attr:r,size:s,title:i}=e,o=gae(e,hae),l=s||n.size||"1em",c;return n.className&&(c=n.className),e.className&&(c=(c?c+" ":"")+e.className),nt.createElement("svg",Ub({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:c,style:Fb(Fb({color:e.color||n.color},n.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&nt.createElement("title",null,i),e.children)};return X3!==void 0?nt.createElement(X3.Consumer,null,n=>t(n)):t(H8)}function Bs(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(e)}function Vp(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(e)}function KT(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"7",y1:"7",x2:"17",y2:"17"},child:[]},{tag:"polyline",attr:{points:"17 7 17 17 7 17"},child:[]}]})(e)}function wae(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(e)}function QT(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 5 19 12 12 19"},child:[]}]})(e)}function xw(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"7",y1:"17",x2:"17",y2:"7"},child:[]},{tag:"polyline",attr:{points:"7 7 17 7 17 17"},child:[]}]})(e)}function Wp(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"},child:[]},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"},child:[]}]})(e)}function XT(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"},child:[]}]})(e)}function $n(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"},child:[]}]})(e)}function ft(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(e)}function V8(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"13",r:"4"},child:[]}]})(e)}function Fn(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(e)}function kn(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 11 12 14 22 4"},child:[]},{tag:"path",attr:{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"},child:[]}]})(e)}function W8(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(e)}function Rr(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(e)}function Nae(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"},child:[]}]})(e)}function jae(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"},child:[]}]})(e)}function mr(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"},child:[]},{tag:"rect",attr:{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"},child:[]}]})(e)}function Za(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(e)}function Cc(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(e)}function Sc(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"7 10 12 15 17 10"},child:[]},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"},child:[]}]})(e)}function pn(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(e)}function Rn(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(e)}function Gd(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},child:[]},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"},child:[]}]})(e)}function Vd(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(e)}function Br(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(e)}function Cae(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(e)}function Sae(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"14",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"3",y:"14",width:"7",height:"7"},child:[]}]})(e)}function qp(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(e)}function q8(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"},child:[]}]})(e)}function _ae(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"3",y1:"9",x2:"21",y2:"9"},child:[]},{tag:"line",attr:{x1:"9",y1:"21",x2:"9",y2:"9"},child:[]}]})(e)}function Hi(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(e)}function Tn(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(e)}function Aae(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(e)}function Yp(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(e)}function fr(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M15.05 5A5 5 0 0 1 19 8.95M15.05 1A9 9 0 0 1 23 8.94m-1 7.98v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(e)}function pt(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(e)}function Rt(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(e)}function Y8(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},child:[]},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"},child:[]},{tag:"polyline",attr:{points:"7 3 7 8 15 8"},child:[]}]})(e)}function bt(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(e)}function Eae(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"2",x2:"11",y2:"13"},child:[]},{tag:"polygon",attr:{points:"22 2 15 22 11 13 2 9 22 2"},child:[]}]})(e)}function ZT(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(e)}function JT(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"},child:[]}]})(e)}function xc(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"5",y:"2",width:"14",height:"20",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"12",y1:"18",x2:"12.01",y2:"18"},child:[]}]})(e)}function ml(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"},child:[]}]})(e)}function ms(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"6"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"2"},child:[]}]})(e)}function jt(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(e)}function Wd(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(e)}function Xi(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"polyline",attr:{points:"17 11 19 13 23 9"},child:[]}]})(e)}function Ln(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"20",y1:"8",x2:"20",y2:"14"},child:[]},{tag:"line",attr:{x1:"23",y1:"11",x2:"17",y2:"11"},child:[]}]})(e)}function Zi(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"18",y1:"8",x2:"23",y2:"13"},child:[]},{tag:"line",attr:{x1:"23",y1:"8",x2:"18",y2:"13"},child:[]}]})(e)}function Qt(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(e)}function en(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(e)}function hr(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"15",y1:"9",x2:"9",y2:"15"},child:[]},{tag:"line",attr:{x1:"9",y1:"9",x2:"15",y2:"15"},child:[]}]})(e)}function St(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(e)}const K8=()=>{const[e,t]=g.useState(!1),n=g.useRef(null);return g.useEffect(()=>{const r=s=>{n.current&&!n.current.contains(s.target)&&t(!1)};return document.addEventListener("mousedown",r),()=>{document.removeEventListener("mousedown",r)}},[]),g.useEffect(()=>{const r=()=>{e&&t(!1)};return window.addEventListener("scroll",r),()=>{window.removeEventListener("scroll",r)}},[e]),a.jsx("header",{className:"sticky top-0 z-50 bg-tertiary shadow-xl border-b border-tertiary",children:a.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex items-center justify-between h-16",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsxs("span",{className:"text-2xl font-black text-white",children:["Sari-Sari ",a.jsx("span",{className:"text-accent",children:" CRM"})]})}),a.jsxs("nav",{className:"hidden md:flex space-x-8 text-white font-medium",children:[a.jsx("a",{href:"#platform",className:"hover:text-accent transition duration-150",children:"Platform"}),a.jsx("a",{href:"#solutions",className:"hover:text-accent transition duration-150",children:"Solutions"}),a.jsx("a",{href:"#insights",className:"hover:text-accent transition duration-150",children:"Insights"}),a.jsx("a",{href:"#pricing",className:"hover:text-accent transition duration-150",children:"Pricing"})]}),a.jsxs("div",{className:"hidden sm:flex items-center space-x-4",children:[a.jsx("a",{href:"/login",className:"text-sm font-medium text-white hover:text-accent transition duration-500",children:"Log In"}),a.jsx("a",{href:"/signup",className:"inline-flex items-center justify-center px-4 py-2 text-sm font-semibold rounded-full shadow-lg border border-secondary text-white bg-secondary hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-500",children:"Start for Free"})]}),a.jsxs("div",{className:"flex sm:hidden items-center relative",ref:n,children:[a.jsx("button",{onClick:()=>t(!e),children:e?a.jsx(St,{className:"w-6 h-6 text-white"}):a.jsx(Yp,{className:"w-6 h-6 text-white"})}),e&&a.jsx("div",{className:"absolute top-11 right-0 mt-2 w-48 border border-tertiary rounded-lg shadow-lg z-50 bg-primary",children:a.jsxs("nav",{className:"flex flex-col",children:[a.jsx("a",{href:"/login",className:"block px-4 py-2 text-center text-tertiary bg-white hover:bg-accent hover:text-secondary transition rounded-t-lg",children:"Log In"}),a.jsx("a",{href:"/signup",className:"block px-4 py-2 text-center text-tertiary bg-white hover:bg-secondary hover:text-white transition rounded-b-lg",children:"Start for Free"})]})})]})]})})})};function Tae(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m12 14 4-4"},child:[]},{tag:"path",attr:{d:"M3.34 19a10 10 0 1 1 17.32 0"},child:[]}]})(e)}function _c(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(e)}function Lae(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z"},child:[]}]})(e)}function yw(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"10",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M10.3 15H7a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"17",cy:"17",r:"3"},child:[]},{tag:"path",attr:{d:"m21 21-1.9-1.9"},child:[]}]})(e)}function kae(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M22 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(e)}function Pae(e){return it({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"},child:[]}]})(e)}const Dae=()=>{const e=["/image/Dashboard1.png","/image/lead1.png","/image/dashboard.jpg"],[t,n]=g.useState(0),[r,s]=g.useState(!1),i=g.useRef(null),[o,l]=g.useState(0),[c,d]=g.useState(0);g.useEffect(()=>(r||(i.current=setInterval(()=>{n(b=>(b+1)%e.length)},4e3)),()=>clearInterval(i.current)),[r,e.length]);const m=b=>l(b.targetTouches[0].clientX),h=b=>d(b.targetTouches[0].clientX),p=()=>{o-c>75&&n(b=>(b+1)%e.length),c-o>75&&n(b=>(b-1+e.length)%e.length)};return a.jsx("section",{className:"bg-paper-white text-white py-15 lg:py-32",children:a.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[a.jsxs("div",{className:"lg:text-left text-center",children:[a.jsxs("h1",{className:"text-5xl sm:text-6xl lg:text-7xl font-lg text-secondary mb-6 leading-tight",children:["Sari-Sari"," ",a.jsx("span",{className:"text-accent font-extrabold",children:"CRM"})]}),a.jsx("p",{className:"max-w-xl mx-auto lg:mx-0 text-lg sm:text-xl text-secondary mb-10 italic",children:"The CRM that keeps your customers organized and your sales growing."}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-center lg:justify-start space-y-4 sm:space-y-0 sm:space-x-4",children:[a.jsx("a",{href:"#",className:"px-10 py-3 rounded-lg border border-secondary text-white bg-secondary font-semibold hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-500",children:"Get Started Now"}),a.jsx("a",{href:"#",className:"px-10 py-3 rounded-lg border border-secondary text-white bg-secondary hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-500",children:"Watch Demo (2 min)"})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"hidden lg:block absolute inset-0 -top-10 -bottom-10 right-4 bg-accent rounded-3xl transform rotate-3 z-0"}),a.jsxs("div",{className:"relative z-10 overflow-hidden rounded-xl shadow-2xl border-4 border-gray-800 h-[400px] bg-gray-900 flex items-center justify-center",onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),onTouchStart:m,onTouchMove:h,onTouchEnd:p,children:[e.map((b,v)=>a.jsx("img",{src:b,alt:`Slide ${v+1}`,className:`absolute inset-0 w-full h-full object-contain bg-gray-50 transition-opacity duration-1000 ease-in-out ${v===t?"opacity-100":"opacity-0"}`},v)),a.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex space-x-2",children:e.map((b,v)=>a.jsx("button",{onClick:()=>n(v),className:`w-3 h-3 rounded-full transition-all ${v===t?"bg-accent":"bg-gray-400 opacity-50"}`},v))})]})]})]})})},Oae=({Icon:e,title:t,description:n})=>a.jsxs("div",{className:"bg-gray-800 p-8 rounded-2xl border border-gray-700 hover:border-accent transition transform hover:-translate-y-1",children:[a.jsx("div",{className:"w-14 h-14 flex items-center justify-center rounded-full text-accent mb-6",children:a.jsx(e,{className:"w-8 h-8"})}),a.jsx("h3",{className:"text-xl font-semibold text-white mb-3",children:t}),a.jsx("p",{className:"text-gray-400",children:n})]}),Mae=()=>{const e=[{Icon:Pae,title:"Automated Workflows",description:"Automate tasks and focus on engagement."},{Icon:Tae,title:"Predictive Analytics",description:"Harness AI to forecast sales and risks."},{Icon:kae,title:"Unified Customer View",description:"360-degree profile for every customer."},{Icon:Lae,title:"Multi-Channel Support",description:"Engage across email, chat, and more."}];return a.jsx("section",{id:"platform",className:"py-20 bg-gray-900 border-t border-gray-800",children:a.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[a.jsx("h2",{className:"text-4xl sm:text-5xl font-bold text-white mb-4",children:"Engineered for Enterprise Scale"}),a.jsx("p",{className:"text-xl text-gray-400 mb-16",children:"Pillows is the neural network powering your customer relationships."}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:e.map((t,n)=>a.jsx(Oae,{...t},n))})]})})},Iae=()=>a.jsxs("section",{id:"pricing",className:"py-20 bg-paper-white border-t border-gray-800 text-center",children:[a.jsx("h2",{className:"text-4xl sm:text-5xl font-bold text-secondary mb-4",children:"Start Building Your Future, Today."}),a.jsx("p",{className:"text-xl text-gray-400 mb-10",children:"Join thousands leveraging Sari-Sari CRM's intelligent platform."}),a.jsx("a",{href:"/signup",className:"px-12 py-4 text-lg font-bold rounded-xl shadow-2xl bg-accent border border-secondary text-white bg-secondary hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-400",children:"Start 15-Day Free Trial"})]}),$ae=()=>a.jsx("footer",{className:"bg-secondary text-white border-t py-10",children:a.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 grid grid-cols-2 md:grid-cols-5 gap-8",children:[a.jsxs("div",{children:[a.jsxs("span",{className:"text-xl font-white",children:["Sari-Sari ",a.jsx("span",{className:"text-accent",children:"CRM"})]}),a.jsx("p",{className:"text-sm text-white mt-4",children:" 2025 Sari-Sari CRM"})]}),[{title:"Platform",links:["AI Features","Automation","Integrations","APIs"]},{title:"Resources",links:["Case Studies","Webinars","Security","Support"]},{title:"Company",links:["Leadership","Partnerships","Careers","Newsroom"]},{title:"Legal",links:["Terms","Privacy","SLA","Compliance"]}].map((e,t)=>a.jsxs("div",{children:[a.jsx("h5",{className:"text-md font-semibold mb-4 text-accent",children:e.title}),a.jsx("ul",{className:"space-y-2 text-sm text-white",children:e.links.map((n,r)=>a.jsx("li",{children:a.jsx("a",{href:"#",className:"hover:text-accent",children:n})},r))})]},t))]})}),Rae=()=>(g.useEffect(()=>{document.title="Sari-Sari CRM"},[]),a.jsxs("main",{className:"font-inter",children:[a.jsx(K8,{}),a.jsx(Dae,{}),a.jsx(Mae,{}),a.jsx(Iae,{}),a.jsx($ae,{})]}));function du(e){return it({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"},child:[]}]})(e)}function wn(e){return it({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(e)}function eL(e){return it({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"},child:[]}]})(e)}class _g extends Error{}_g.prototype.name="InvalidTokenError";function zae(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,n)=>{let r=n.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function Uae(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return zae(t)}catch{return atob(t)}}function Q8(e,t){if(typeof e!="string")throw new _g("Invalid token specified: must be a string");t||(t={});const n=t.header===!0?0:1,r=e.split(".")[n];if(typeof r!="string")throw new _g(`Invalid token specified: missing part #${n+1}`);let s;try{s=Uae(r)}catch(i){throw new _g(`Invalid token specified: invalid base64 for part #${n+1} (${i.message})`)}try{return JSON.parse(s)}catch(i){throw new _g(`Invalid token specified: invalid json for part #${n+1} (${i.message})`)}}function pa(e,t,n=void 0){const r={};for(const s in e){const i=e[s];let o="",l=!0;for(let c=0;c<i.length;c+=1){const d=i[c];d&&(o+=(l===!0?"":" ")+t(d),l=!1,n&&n[d]&&(o+=" "+n[d]))}r[s]=o}return r}function qd(e,...t){const n=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(r=>n.searchParams.append("args[]",r)),`Minified MUI error #${e}; visit ${n} for the full message.`}function yn(e){if(typeof e!="string")throw new Error(qd(7));return e.charAt(0).toUpperCase()+e.slice(1)}var XC={exports:{}},gn={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J3;function Fae(){if(J3)return gn;J3=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.for("react.view_transition"),b=Symbol.for("react.client.reference");function v(x){if(typeof x=="object"&&x!==null){var w=x.$$typeof;switch(w){case e:switch(x=x.type,x){case n:case s:case r:case c:case d:case p:return x;default:switch(x=x&&x.$$typeof,x){case o:case l:case h:case m:return x;case i:return x;default:return w}}case t:return w}}}return gn.ContextConsumer=i,gn.ContextProvider=o,gn.Element=e,gn.ForwardRef=l,gn.Fragment=n,gn.Lazy=h,gn.Memo=m,gn.Portal=t,gn.Profiler=s,gn.StrictMode=r,gn.Suspense=c,gn.SuspenseList=d,gn.isContextConsumer=function(x){return v(x)===i},gn.isContextProvider=function(x){return v(x)===o},gn.isElement=function(x){return typeof x=="object"&&x!==null&&x.$$typeof===e},gn.isForwardRef=function(x){return v(x)===l},gn.isFragment=function(x){return v(x)===n},gn.isLazy=function(x){return v(x)===h},gn.isMemo=function(x){return v(x)===m},gn.isPortal=function(x){return v(x)===t},gn.isProfiler=function(x){return v(x)===s},gn.isStrictMode=function(x){return v(x)===r},gn.isSuspense=function(x){return v(x)===c},gn.isSuspenseList=function(x){return v(x)===d},gn.isValidElementType=function(x){return typeof x=="string"||typeof x=="function"||x===n||x===s||x===r||x===c||x===d||typeof x=="object"&&x!==null&&(x.$$typeof===h||x.$$typeof===m||x.$$typeof===o||x.$$typeof===i||x.$$typeof===l||x.$$typeof===b||x.getModuleId!==void 0)},gn.typeOf=v,gn}var eI;function Bae(){return eI||(eI=1,XC.exports=Fae()),XC.exports}var tL=Bae();function zi(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function X8(e){if(g.isValidElement(e)||tL.isValidElementType(e)||!zi(e))return e;const t={};return Object.keys(e).forEach(n=>{t[n]=X8(e[n])}),t}function fs(e,t,n={clone:!0}){const r=n.clone?{...e}:e;return zi(e)&&zi(t)&&Object.keys(t).forEach(s=>{g.isValidElement(t[s])||tL.isValidElementType(t[s])?r[s]=t[s]:zi(t[s])&&Object.prototype.hasOwnProperty.call(e,s)&&zi(e[s])?r[s]=fs(e[s],t[s],n):n.clone?r[s]=zi(t[s])?X8(t[s]):t[s]:r[s]=t[s]}),r}function Fg(e,t){return t?fs(e,t,{clone:!1}):e}function tI(e,t){if(!e.containerQueries)return t;const n=Object.keys(t).filter(r=>r.startsWith("@container")).sort((r,s)=>{const i=/min-width:\s*([0-9.]+)/;return+(r.match(i)?.[1]||0)-+(s.match(i)?.[1]||0)});return n.length?n.reduce((r,s)=>{const i=t[s];return delete r[s],r[s]=i,r},{...t}):t}function Hae(e,t){return t==="@"||t.startsWith("@")&&(e.some(n=>t.startsWith(`@${n}`))||!!t.match(/^@\d/))}function Gae(e,t){const n=t.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,s]=n,i=Number.isNaN(+r)?r||0:+r;return e.containerQueries(s).up(i)}function Vae(e){const t=(i,o)=>i.replace("@media",o?`@container ${o}`:"@container");function n(i,o){i.up=(...l)=>t(e.breakpoints.up(...l),o),i.down=(...l)=>t(e.breakpoints.down(...l),o),i.between=(...l)=>t(e.breakpoints.between(...l),o),i.only=(...l)=>t(e.breakpoints.only(...l),o),i.not=(...l)=>{const c=t(e.breakpoints.not(...l),o);return c.includes("not all and")?c.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):c}}const r={},s=i=>(n(r,i),r);return n(s),{...e,containerQueries:s}}const bw={xs:0,sm:600,md:900,lg:1200,xl:1536},nI={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${bw[e]}px)`},Wae={containerQueries:e=>({up:t=>{let n=typeof t=="number"?t:bw[t]||t;return typeof n=="number"&&(n=`${n}px`),e?`@container ${e} (min-width:${n})`:`@container (min-width:${n})`}})};function Zo(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const i=r.breakpoints||nI;return t.reduce((o,l,c)=>(o[i.up(i.keys[c])]=n(t[c]),o),{})}if(typeof t=="object"){const i=r.breakpoints||nI;return Object.keys(t).reduce((o,l)=>{if(Hae(i.keys,l)){const c=Gae(r.containerQueries?r:Wae,l);c&&(o[c]=n(t[l],l))}else if(Object.keys(i.values||bw).includes(l)){const c=i.up(l);o[c]=n(t[l],l)}else{const c=l;o[c]=t[c]}return o},{})}return n(t)}function qae(e={}){return e.keys?.reduce((n,r)=>{const s=e.up(r);return n[s]={},n},{})||{}}function aI(e,t){return e.reduce((n,r)=>{const s=n[r];return(!s||Object.keys(s).length===0)&&delete n[r],n},t)}function vw(e,t,n=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&n){const r=`vars.${t}`.split(".").reduce((s,i)=>s&&s[i]?s[i]:null,e);if(r!=null)return r}return t.split(".").reduce((r,s)=>r&&r[s]!=null?r[s]:null,e)}function Bb(e,t,n,r=n){let s;return typeof e=="function"?s=e(n):Array.isArray(e)?s=e[n]||r:s=vw(e,n)||r,t&&(s=t(s,r,e)),s}function sa(e){const{prop:t,cssProperty:n=e.prop,themeKey:r,transform:s}=e,i=o=>{if(o[t]==null)return null;const l=o[t],c=o.theme,d=vw(c,r)||{};return Zo(o,l,h=>{let p=Bb(d,s,h);return h===p&&typeof h=="string"&&(p=Bb(d,s,`${t}${h==="default"?"":yn(h)}`,h)),n===!1?p:{[n]:p}})};return i.propTypes={},i.filterProps=[t],i}function Yae(e){const t={};return n=>(t[n]===void 0&&(t[n]=e(n)),t[n])}const Kae={m:"margin",p:"padding"},Qae={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},rI={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Xae=Yae(e=>{if(e.length>2)if(rI[e])e=rI[e];else return[e];const[t,n]=e.split(""),r=Kae[t],s=Qae[n]||"";return Array.isArray(s)?s.map(i=>r+i):[r+s]}),nL=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],aL=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...nL,...aL];function Kp(e,t,n,r){const s=vw(e,t,!0)??n;return typeof s=="number"||typeof s=="string"?i=>typeof i=="string"?i:typeof s=="string"?s.startsWith("var(")&&i===0?0:s.startsWith("var(")&&i===1?s:`calc(${i} * ${s})`:s*i:Array.isArray(s)?i=>{if(typeof i=="string")return i;const o=Math.abs(i),l=s[o];return i>=0?l:typeof l=="number"?-l:typeof l=="string"&&l.startsWith("var(")?`calc(-1 * ${l})`:`-${l}`}:typeof s=="function"?s:()=>{}}function rL(e){return Kp(e,"spacing",8)}function Qp(e,t){return typeof t=="string"||t==null?t:e(t)}function Zae(e,t){return n=>e.reduce((r,s)=>(r[s]=Qp(t,n),r),{})}function Jae(e,t,n,r){if(!t.includes(n))return null;const s=Xae(n),i=Zae(s,r),o=e[n];return Zo(e,o,i)}function Z8(e,t){const n=rL(e.theme);return Object.keys(e).map(r=>Jae(e,t,r,n)).reduce(Fg,{})}function qn(e){return Z8(e,nL)}qn.propTypes={};qn.filterProps=nL;function Yn(e){return Z8(e,aL)}Yn.propTypes={};Yn.filterProps=aL;function ww(...e){const t=e.reduce((r,s)=>(s.filterProps.forEach(i=>{r[i]=s}),r),{}),n=r=>Object.keys(r).reduce((s,i)=>t[i]?Fg(s,t[i](r)):s,{});return n.propTypes={},n.filterProps=e.reduce((r,s)=>r.concat(s.filterProps),[]),n}function Is(e){return typeof e!="number"?e:`${e}px solid`}function Xs(e,t){return sa({prop:e,themeKey:"borders",transform:t})}const ere=Xs("border",Is),tre=Xs("borderTop",Is),nre=Xs("borderRight",Is),are=Xs("borderBottom",Is),rre=Xs("borderLeft",Is),sre=Xs("borderColor"),ire=Xs("borderTopColor"),ore=Xs("borderRightColor"),lre=Xs("borderBottomColor"),cre=Xs("borderLeftColor"),dre=Xs("outline",Is),ure=Xs("outlineColor"),Nw=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=Kp(e.theme,"shape.borderRadius",4),n=r=>({borderRadius:Qp(t,r)});return Zo(e,e.borderRadius,n)}return null};Nw.propTypes={};Nw.filterProps=["borderRadius"];ww(ere,tre,nre,are,rre,sre,ire,ore,lre,cre,Nw,dre,ure);const jw=e=>{if(e.gap!==void 0&&e.gap!==null){const t=Kp(e.theme,"spacing",8),n=r=>({gap:Qp(t,r)});return Zo(e,e.gap,n)}return null};jw.propTypes={};jw.filterProps=["gap"];const Cw=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=Kp(e.theme,"spacing",8),n=r=>({columnGap:Qp(t,r)});return Zo(e,e.columnGap,n)}return null};Cw.propTypes={};Cw.filterProps=["columnGap"];const Sw=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=Kp(e.theme,"spacing",8),n=r=>({rowGap:Qp(t,r)});return Zo(e,e.rowGap,n)}return null};Sw.propTypes={};Sw.filterProps=["rowGap"];const mre=sa({prop:"gridColumn"}),fre=sa({prop:"gridRow"}),hre=sa({prop:"gridAutoFlow"}),gre=sa({prop:"gridAutoColumns"}),pre=sa({prop:"gridAutoRows"}),xre=sa({prop:"gridTemplateColumns"}),yre=sa({prop:"gridTemplateRows"}),bre=sa({prop:"gridTemplateAreas"}),vre=sa({prop:"gridArea"});ww(jw,Cw,Sw,mre,fre,hre,gre,pre,xre,yre,bre,vre);function zm(e,t){return t==="grey"?t:e}const wre=sa({prop:"color",themeKey:"palette",transform:zm}),Nre=sa({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:zm}),jre=sa({prop:"backgroundColor",themeKey:"palette",transform:zm});ww(wre,Nre,jre);function cs(e){return e<=1&&e!==0?`${e*100}%`:e}const Cre=sa({prop:"width",transform:cs}),sL=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=n=>{const r=e.theme?.breakpoints?.values?.[n]||bw[n];return r?e.theme?.breakpoints?.unit!=="px"?{maxWidth:`${r}${e.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:cs(n)}};return Zo(e,e.maxWidth,t)}return null};sL.filterProps=["maxWidth"];const Sre=sa({prop:"minWidth",transform:cs}),_re=sa({prop:"height",transform:cs}),Are=sa({prop:"maxHeight",transform:cs}),Ere=sa({prop:"minHeight",transform:cs});sa({prop:"size",cssProperty:"width",transform:cs});sa({prop:"size",cssProperty:"height",transform:cs});const Tre=sa({prop:"boxSizing"});ww(Cre,sL,Sre,_re,Are,Ere,Tre);const Xp={border:{themeKey:"borders",transform:Is},borderTop:{themeKey:"borders",transform:Is},borderRight:{themeKey:"borders",transform:Is},borderBottom:{themeKey:"borders",transform:Is},borderLeft:{themeKey:"borders",transform:Is},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Is},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Nw},color:{themeKey:"palette",transform:zm},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:zm},backgroundColor:{themeKey:"palette",transform:zm},p:{style:Yn},pt:{style:Yn},pr:{style:Yn},pb:{style:Yn},pl:{style:Yn},px:{style:Yn},py:{style:Yn},padding:{style:Yn},paddingTop:{style:Yn},paddingRight:{style:Yn},paddingBottom:{style:Yn},paddingLeft:{style:Yn},paddingX:{style:Yn},paddingY:{style:Yn},paddingInline:{style:Yn},paddingInlineStart:{style:Yn},paddingInlineEnd:{style:Yn},paddingBlock:{style:Yn},paddingBlockStart:{style:Yn},paddingBlockEnd:{style:Yn},m:{style:qn},mt:{style:qn},mr:{style:qn},mb:{style:qn},ml:{style:qn},mx:{style:qn},my:{style:qn},margin:{style:qn},marginTop:{style:qn},marginRight:{style:qn},marginBottom:{style:qn},marginLeft:{style:qn},marginX:{style:qn},marginY:{style:qn},marginInline:{style:qn},marginInlineStart:{style:qn},marginInlineEnd:{style:qn},marginBlock:{style:qn},marginBlockStart:{style:qn},marginBlockEnd:{style:qn},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:jw},rowGap:{style:Sw},columnGap:{style:Cw},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:cs},maxWidth:{style:sL},minWidth:{transform:cs},height:{transform:cs},maxHeight:{transform:cs},minHeight:{transform:cs},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function Lre(...e){const t=e.reduce((r,s)=>r.concat(Object.keys(s)),[]),n=new Set(t);return e.every(r=>n.size===Object.keys(r).length)}function kre(e,t){return typeof e=="function"?e(t):e}function Pre(){function e(n,r,s,i){const o={[n]:r,theme:s},l=i[n];if(!l)return{[n]:r};const{cssProperty:c=n,themeKey:d,transform:m,style:h}=l;if(r==null)return null;if(d==="typography"&&r==="inherit")return{[n]:r};const p=vw(s,d)||{};return h?h(o):Zo(o,r,v=>{let x=Bb(p,m,v);return v===x&&typeof v=="string"&&(x=Bb(p,m,`${n}${v==="default"?"":yn(v)}`,v)),c===!1?x:{[c]:x}})}function t(n){const{sx:r,theme:s={},nested:i}=n||{};if(!r)return null;const o=s.unstable_sxConfig??Xp;function l(c){let d=c;if(typeof c=="function")d=c(s);else if(typeof c!="object")return c;if(!d)return null;const m=qae(s.breakpoints),h=Object.keys(m);let p=m;return Object.keys(d).forEach(b=>{const v=kre(d[b],s);if(v!=null)if(typeof v=="object")if(o[b])p=Fg(p,e(b,v,s,o));else{const x=Zo({theme:s},v,w=>({[b]:w}));Lre(x,v)?p[b]=t({sx:v,theme:s,nested:!0}):p=Fg(p,x)}else p=Fg(p,e(b,v,s,o))}),!i&&s.modularCssLayers?{"@layer sx":tI(s,aI(h,p))}:tI(s,aI(h,p))}return Array.isArray(r)?r.map(l):l(r)}return t}const Ym=Pre();Ym.filterProps=["sx"];const Dre=e=>{const t={systemProps:{},otherProps:{}},n=e?.theme?.unstable_sxConfig??Xp;return Object.keys(e).forEach(r=>{n[r]?t.systemProps[r]=e[r]:t.otherProps[r]=e[r]}),t};function Ore(e){const{sx:t,...n}=e,{systemProps:r,otherProps:s}=Dre(n);let i;return Array.isArray(t)?i=[r,...t]:typeof t=="function"?i=(...o)=>{const l=t(...o);return zi(l)?{...r,...l}:r}:i={...r,...t},{...s,sx:i}}function ke(){return ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ke.apply(null,arguments)}function Mre(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function Ire(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var $re=(function(){function e(n){var r=this;this._insertTag=function(s){var i;r.tags.length===0?r.insertionPoint?i=r.insertionPoint.nextSibling:r.prepend?i=r.container.firstChild:i=r.before:i=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(s,i),r.tags.push(s)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Ire(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var i=Mre(s);try{i.insertRule(r,i.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){var s;return(s=r.parentNode)==null?void 0:s.removeChild(r)}),this.tags=[],this.ctr=0},e})(),ar="-ms-",Hb="-moz-",Yt="-webkit-",J8="comm",iL="rule",oL="decl",Rre="@import",eB="@keyframes",zre="@layer",Ure=Math.abs,_w=String.fromCharCode,Fre=Object.assign;function Bre(e,t){return Xa(e,0)^45?(((t<<2^Xa(e,0))<<2^Xa(e,1))<<2^Xa(e,2))<<2^Xa(e,3):0}function tB(e){return e.trim()}function Hre(e,t){return(e=t.exec(e))?e[0]:e}function Kt(e,t,n){return e.replace(t,n)}function BA(e,t){return e.indexOf(t)}function Xa(e,t){return e.charCodeAt(t)|0}function ep(e,t,n){return e.slice(t,n)}function $i(e){return e.length}function lL(e){return e.length}function dy(e,t){return t.push(e),e}function Gre(e,t){return e.map(t).join("")}var Aw=1,Km=1,nB=0,Hr=0,fa=0,wf="";function Ew(e,t,n,r,s,i,o){return{value:e,root:t,parent:n,type:r,props:s,children:i,line:Aw,column:Km,length:o,return:""}}function Lh(e,t){return Fre(Ew("",null,null,"",null,null,0),e,{length:-e.length},t)}function Vre(){return fa}function Wre(){return fa=Hr>0?Xa(wf,--Hr):0,Km--,fa===10&&(Km=1,Aw--),fa}function hs(){return fa=Hr<nB?Xa(wf,Hr++):0,Km++,fa===10&&(Km=1,Aw++),fa}function Wi(){return Xa(wf,Hr)}function Cb(){return Hr}function Zp(e,t){return ep(wf,e,t)}function tp(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function aB(e){return Aw=Km=1,nB=$i(wf=e),Hr=0,[]}function rB(e){return wf="",e}function Sb(e){return tB(Zp(Hr-1,HA(e===91?e+2:e===40?e+1:e)))}function qre(e){for(;(fa=Wi())&&fa<33;)hs();return tp(e)>2||tp(fa)>3?"":" "}function Yre(e,t){for(;--t&&hs()&&!(fa<48||fa>102||fa>57&&fa<65||fa>70&&fa<97););return Zp(e,Cb()+(t<6&&Wi()==32&&hs()==32))}function HA(e){for(;hs();)switch(fa){case e:return Hr;case 34:case 39:e!==34&&e!==39&&HA(fa);break;case 40:e===41&&HA(e);break;case 92:hs();break}return Hr}function Kre(e,t){for(;hs()&&e+fa!==57;)if(e+fa===84&&Wi()===47)break;return"/*"+Zp(t,Hr-1)+"*"+_w(e===47?e:hs())}function Qre(e){for(;!tp(Wi());)hs();return Zp(e,Hr)}function Xre(e){return rB(_b("",null,null,null,[""],e=aB(e),0,[0],e))}function _b(e,t,n,r,s,i,o,l,c){for(var d=0,m=0,h=o,p=0,b=0,v=0,x=1,w=1,j=1,C=0,S="",_=s,E=i,A=r,T=S;w;)switch(v=C,C=hs()){case 40:if(v!=108&&Xa(T,h-1)==58){BA(T+=Kt(Sb(C),"&","&\f"),"&\f")!=-1&&(j=-1);break}case 34:case 39:case 91:T+=Sb(C);break;case 9:case 10:case 13:case 32:T+=qre(v);break;case 92:T+=Yre(Cb()-1,7);continue;case 47:switch(Wi()){case 42:case 47:dy(Zre(Kre(hs(),Cb()),t,n),c);break;default:T+="/"}break;case 123*x:l[d++]=$i(T)*j;case 125*x:case 59:case 0:switch(C){case 0:case 125:w=0;case 59+m:j==-1&&(T=Kt(T,/\f/g,"")),b>0&&$i(T)-h&&dy(b>32?iI(T+";",r,n,h-1):iI(Kt(T," ","")+";",r,n,h-2),c);break;case 59:T+=";";default:if(dy(A=sI(T,t,n,d,m,s,l,S,_=[],E=[],h),i),C===123)if(m===0)_b(T,t,A,A,_,i,h,l,E);else switch(p===99&&Xa(T,3)===110?100:p){case 100:case 108:case 109:case 115:_b(e,A,A,r&&dy(sI(e,A,A,0,0,s,l,S,s,_=[],h),E),s,E,h,l,r?_:E);break;default:_b(T,A,A,A,[""],E,0,l,E)}}d=m=b=0,x=j=1,S=T="",h=o;break;case 58:h=1+$i(T),b=v;default:if(x<1){if(C==123)--x;else if(C==125&&x++==0&&Wre()==125)continue}switch(T+=_w(C),C*x){case 38:j=m>0?1:(T+="\f",-1);break;case 44:l[d++]=($i(T)-1)*j,j=1;break;case 64:Wi()===45&&(T+=Sb(hs())),p=Wi(),m=h=$i(S=T+=Qre(Cb())),C++;break;case 45:v===45&&$i(T)==2&&(x=0)}}return i}function sI(e,t,n,r,s,i,o,l,c,d,m){for(var h=s-1,p=s===0?i:[""],b=lL(p),v=0,x=0,w=0;v<r;++v)for(var j=0,C=ep(e,h+1,h=Ure(x=o[v])),S=e;j<b;++j)(S=tB(x>0?p[j]+" "+C:Kt(C,/&\f/g,p[j])))&&(c[w++]=S);return Ew(e,t,n,s===0?iL:l,c,d,m)}function Zre(e,t,n){return Ew(e,t,n,J8,_w(Vre()),ep(e,2,-2),0)}function iI(e,t,n,r){return Ew(e,t,n,oL,ep(e,0,r),ep(e,r+1,-1),r)}function Um(e,t){for(var n="",r=lL(e),s=0;s<r;s++)n+=t(e[s],s,e,t)||"";return n}function Jre(e,t,n,r){switch(e.type){case zre:if(e.children.length)break;case Rre:case oL:return e.return=e.return||e.value;case J8:return"";case eB:return e.return=e.value+"{"+Um(e.children,r)+"}";case iL:e.value=e.props.join(",")}return $i(n=Um(e.children,r))?e.return=e.value+"{"+n+"}":""}function ese(e){var t=lL(e);return function(n,r,s,i){for(var o="",l=0;l<t;l++)o+=e[l](n,r,s,i)||"";return o}}function tse(e){return function(t){t.root||(t=t.return)&&e(t)}}function sB(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var nse=function(t,n,r){for(var s=0,i=0;s=i,i=Wi(),s===38&&i===12&&(n[r]=1),!tp(i);)hs();return Zp(t,Hr)},ase=function(t,n){var r=-1,s=44;do switch(tp(s)){case 0:s===38&&Wi()===12&&(n[r]=1),t[r]+=nse(Hr-1,n,r);break;case 2:t[r]+=Sb(s);break;case 4:if(s===44){t[++r]=Wi()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=_w(s)}while(s=hs());return t},rse=function(t,n){return rB(ase(aB(t),n))},oI=new WeakMap,sse=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,s=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!oI.get(r))&&!s){oI.set(t,!0);for(var i=[],o=rse(n,i),l=r.props,c=0,d=0;c<o.length;c++)for(var m=0;m<l.length;m++,d++)t.props[d]=i[c]?o[c].replace(/&\f/g,l[m]):l[m]+" "+o[c]}}},ise=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function iB(e,t){switch(Bre(e,t)){case 5103:return Yt+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Yt+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Yt+e+Hb+e+ar+e+e;case 6828:case 4268:return Yt+e+ar+e+e;case 6165:return Yt+e+ar+"flex-"+e+e;case 5187:return Yt+e+Kt(e,/(\w+).+(:[^]+)/,Yt+"box-$1$2"+ar+"flex-$1$2")+e;case 5443:return Yt+e+ar+"flex-item-"+Kt(e,/flex-|-self/,"")+e;case 4675:return Yt+e+ar+"flex-line-pack"+Kt(e,/align-content|flex-|-self/,"")+e;case 5548:return Yt+e+ar+Kt(e,"shrink","negative")+e;case 5292:return Yt+e+ar+Kt(e,"basis","preferred-size")+e;case 6060:return Yt+"box-"+Kt(e,"-grow","")+Yt+e+ar+Kt(e,"grow","positive")+e;case 4554:return Yt+Kt(e,/([^-])(transform)/g,"$1"+Yt+"$2")+e;case 6187:return Kt(Kt(Kt(e,/(zoom-|grab)/,Yt+"$1"),/(image-set)/,Yt+"$1"),e,"")+e;case 5495:case 3959:return Kt(e,/(image-set\([^]*)/,Yt+"$1$`$1");case 4968:return Kt(Kt(e,/(.+:)(flex-)?(.*)/,Yt+"box-pack:$3"+ar+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Yt+e+e;case 4095:case 3583:case 4068:case 2532:return Kt(e,/(.+)-inline(.+)/,Yt+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if($i(e)-1-t>6)switch(Xa(e,t+1)){case 109:if(Xa(e,t+4)!==45)break;case 102:return Kt(e,/(.+:)(.+)-([^]+)/,"$1"+Yt+"$2-$3$1"+Hb+(Xa(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~BA(e,"stretch")?iB(Kt(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Xa(e,t+1)!==115)break;case 6444:switch(Xa(e,$i(e)-3-(~BA(e,"!important")&&10))){case 107:return Kt(e,":",":"+Yt)+e;case 101:return Kt(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Yt+(Xa(e,14)===45?"inline-":"")+"box$3$1"+Yt+"$2$3$1"+ar+"$2box$3")+e}break;case 5936:switch(Xa(e,t+11)){case 114:return Yt+e+ar+Kt(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Yt+e+ar+Kt(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Yt+e+ar+Kt(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Yt+e+ar+e+e}return e}var ose=function(t,n,r,s){if(t.length>-1&&!t.return)switch(t.type){case oL:t.return=iB(t.value,t.length);break;case eB:return Um([Lh(t,{value:Kt(t.value,"@","@"+Yt)})],s);case iL:if(t.length)return Gre(t.props,function(i){switch(Hre(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Um([Lh(t,{props:[Kt(i,/:(read-\w+)/,":"+Hb+"$1")]})],s);case"::placeholder":return Um([Lh(t,{props:[Kt(i,/:(plac\w+)/,":"+Yt+"input-$1")]}),Lh(t,{props:[Kt(i,/:(plac\w+)/,":"+Hb+"$1")]}),Lh(t,{props:[Kt(i,/:(plac\w+)/,ar+"input-$1")]})],s)}return""})}},lse=[ose],cse=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(x){var w=x.getAttribute("data-emotion");w.indexOf(" ")!==-1&&(document.head.appendChild(x),x.setAttribute("data-s",""))})}var s=t.stylisPlugins||lse,i={},o,l=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(x){for(var w=x.getAttribute("data-emotion").split(" "),j=1;j<w.length;j++)i[w[j]]=!0;l.push(x)});var c,d=[sse,ise];{var m,h=[Jre,tse(function(x){m.insert(x)})],p=ese(d.concat(s,h)),b=function(w){return Um(Xre(w),p)};c=function(w,j,C,S){m=C,b(w?w+"{"+j.styles+"}":j.styles),S&&(v.inserted[j.name]=!0)}}var v={key:n,sheet:new $re({key:n,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:i,registered:{},insert:c};return v.sheet.hydrate(l),v},ZC={exports:{}},Zt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lI;function dse(){if(lI)return Zt;lI=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,n=e?Symbol.for("react.portal"):60106,r=e?Symbol.for("react.fragment"):60107,s=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,l=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,d=e?Symbol.for("react.concurrent_mode"):60111,m=e?Symbol.for("react.forward_ref"):60112,h=e?Symbol.for("react.suspense"):60113,p=e?Symbol.for("react.suspense_list"):60120,b=e?Symbol.for("react.memo"):60115,v=e?Symbol.for("react.lazy"):60116,x=e?Symbol.for("react.block"):60121,w=e?Symbol.for("react.fundamental"):60117,j=e?Symbol.for("react.responder"):60118,C=e?Symbol.for("react.scope"):60119;function S(E){if(typeof E=="object"&&E!==null){var A=E.$$typeof;switch(A){case t:switch(E=E.type,E){case c:case d:case r:case i:case s:case h:return E;default:switch(E=E&&E.$$typeof,E){case l:case m:case v:case b:case o:return E;default:return A}}case n:return A}}}function _(E){return S(E)===d}return Zt.AsyncMode=c,Zt.ConcurrentMode=d,Zt.ContextConsumer=l,Zt.ContextProvider=o,Zt.Element=t,Zt.ForwardRef=m,Zt.Fragment=r,Zt.Lazy=v,Zt.Memo=b,Zt.Portal=n,Zt.Profiler=i,Zt.StrictMode=s,Zt.Suspense=h,Zt.isAsyncMode=function(E){return _(E)||S(E)===c},Zt.isConcurrentMode=_,Zt.isContextConsumer=function(E){return S(E)===l},Zt.isContextProvider=function(E){return S(E)===o},Zt.isElement=function(E){return typeof E=="object"&&E!==null&&E.$$typeof===t},Zt.isForwardRef=function(E){return S(E)===m},Zt.isFragment=function(E){return S(E)===r},Zt.isLazy=function(E){return S(E)===v},Zt.isMemo=function(E){return S(E)===b},Zt.isPortal=function(E){return S(E)===n},Zt.isProfiler=function(E){return S(E)===i},Zt.isStrictMode=function(E){return S(E)===s},Zt.isSuspense=function(E){return S(E)===h},Zt.isValidElementType=function(E){return typeof E=="string"||typeof E=="function"||E===r||E===d||E===i||E===s||E===h||E===p||typeof E=="object"&&E!==null&&(E.$$typeof===v||E.$$typeof===b||E.$$typeof===o||E.$$typeof===l||E.$$typeof===m||E.$$typeof===w||E.$$typeof===j||E.$$typeof===C||E.$$typeof===x)},Zt.typeOf=S,Zt}var cI;function use(){return cI||(cI=1,ZC.exports=dse()),ZC.exports}var JC,dI;function mse(){if(dI)return JC;dI=1;var e=use(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};i[e.ForwardRef]=r,i[e.Memo]=s;function o(v){return e.isMemo(v)?s:i[v.$$typeof]||t}var l=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,m=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,p=Object.prototype;function b(v,x,w){if(typeof x!="string"){if(p){var j=h(x);j&&j!==p&&b(v,j,w)}var C=c(x);d&&(C=C.concat(d(x)));for(var S=o(v),_=o(x),E=0;E<C.length;++E){var A=C[E];if(!n[A]&&!(w&&w[A])&&!(_&&_[A])&&!(S&&S[A])){var T=m(x,A);try{l(v,A,T)}catch{}}}}return v}return JC=b,JC}mse();var fse=!0;function oB(e,t,n){var r="";return n.split(" ").forEach(function(s){e[s]!==void 0?t.push(e[s]+";"):s&&(r+=s+" ")}),r}var cL=function(t,n,r){var s=t.key+"-"+n.name;(r===!1||fse===!1)&&t.registered[s]===void 0&&(t.registered[s]=n.styles)},lB=function(t,n,r){cL(t,n,r);var s=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var i=n;do t.insert(n===i?"."+s:"",i,t.sheet,!0),i=i.next;while(i!==void 0)}};function hse(e){for(var t=0,n,r=0,s=e.length;s>=4;++r,s-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(s){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var gse={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},pse=/[A-Z]|^ms/g,xse=/_EMO_([^_]+?)_([^]*?)_EMO_/g,cB=function(t){return t.charCodeAt(1)===45},uI=function(t){return t!=null&&typeof t!="boolean"},eS=sB(function(e){return cB(e)?e:e.replace(pse,"-$&").toLowerCase()}),mI=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(xse,function(r,s,i){return Ri={name:s,styles:i,next:Ri},s})}return gse[t]!==1&&!cB(t)&&typeof n=="number"&&n!==0?n+"px":n};function np(e,t,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var s=n;if(s.anim===1)return Ri={name:s.name,styles:s.styles,next:Ri},s.name;var i=n;if(i.styles!==void 0){var o=i.next;if(o!==void 0)for(;o!==void 0;)Ri={name:o.name,styles:o.styles,next:Ri},o=o.next;var l=i.styles+";";return l}return yse(e,t,n)}case"function":{if(e!==void 0){var c=Ri,d=n(e);return Ri=c,np(e,t,d)}break}}var m=n;if(t==null)return m;var h=t[m];return h!==void 0?h:m}function yse(e,t,n){var r="";if(Array.isArray(n))for(var s=0;s<n.length;s++)r+=np(e,t,n[s])+";";else for(var i in n){var o=n[i];if(typeof o!="object"){var l=o;t!=null&&t[l]!==void 0?r+=i+"{"+t[l]+"}":uI(l)&&(r+=eS(i)+":"+mI(i,l)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&(t==null||t[o[0]]===void 0))for(var c=0;c<o.length;c++)uI(o[c])&&(r+=eS(i)+":"+mI(i,o[c])+";");else{var d=np(e,t,o);switch(i){case"animation":case"animationName":{r+=eS(i)+":"+d+";";break}default:r+=i+"{"+d+"}"}}}return r}var fI=/label:\s*([^\s;{]+)\s*(;|$)/g,Ri;function Tw(e,t,n){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var r=!0,s="";Ri=void 0;var i=e[0];if(i==null||i.raw===void 0)r=!1,s+=np(n,t,i);else{var o=i;s+=o[0]}for(var l=1;l<e.length;l++)if(s+=np(n,t,e[l]),r){var c=i;s+=c[l]}fI.lastIndex=0;for(var d="",m;(m=fI.exec(s))!==null;)d+="-"+m[1];var h=hse(s)+d;return{name:h,styles:s,next:Ri}}var bse=function(t){return t()},vse=Fd.useInsertionEffect?Fd.useInsertionEffect:!1,dB=vse||bse,uB=g.createContext(typeof HTMLElement<"u"?cse({key:"css"}):null);uB.Provider;var mB=function(t){return g.forwardRef(function(n,r){var s=g.useContext(uB);return t(n,s,r)})},dL=g.createContext({}),uL={}.hasOwnProperty,GA="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",wse=function(t,n){var r={};for(var s in n)uL.call(n,s)&&(r[s]=n[s]);return r[GA]=t,r},Nse=function(t){var n=t.cache,r=t.serialized,s=t.isStringTag;return cL(n,r,s),dB(function(){return lB(n,r,s)}),null},jse=mB(function(e,t,n){var r=e.css;typeof r=="string"&&t.registered[r]!==void 0&&(r=t.registered[r]);var s=e[GA],i=[r],o="";typeof e.className=="string"?o=oB(t.registered,i,e.className):e.className!=null&&(o=e.className+" ");var l=Tw(i,void 0,g.useContext(dL));o+=t.key+"-"+l.name;var c={};for(var d in e)uL.call(e,d)&&d!=="css"&&d!==GA&&(c[d]=e[d]);return c.className=o,n&&(c.ref=n),g.createElement(g.Fragment,null,g.createElement(Nse,{cache:t,serialized:l,isStringTag:typeof s=="string"}),g.createElement(s,c))}),Cse=jse,hI=function(t,n){var r=arguments;if(n==null||!uL.call(n,"css"))return g.createElement.apply(void 0,r);var s=r.length,i=new Array(s);i[0]=Cse,i[1]=wse(t,n);for(var o=2;o<s;o++)i[o]=r[o];return g.createElement.apply(null,i)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(hI||(hI={}));function mL(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Tw(t)}function Jp(){var e=mL.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var Sse=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,_se=sB(function(e){return Sse.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),Ase=_se,Ese=function(t){return t!=="theme"},gI=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?Ase:Ese},pI=function(t,n,r){var s;if(n){var i=n.shouldForwardProp;s=t.__emotion_forwardProp&&i?function(o){return t.__emotion_forwardProp(o)&&i(o)}:i}return typeof s!="function"&&r&&(s=t.__emotion_forwardProp),s},Tse=function(t){var n=t.cache,r=t.serialized,s=t.isStringTag;return cL(n,r,s),dB(function(){return lB(n,r,s)}),null},Lse=function e(t,n){var r=t.__emotion_real===t,s=r&&t.__emotion_base||t,i,o;n!==void 0&&(i=n.label,o=n.target);var l=pI(t,n,r),c=l||gI(s),d=!c("as");return function(){var m=arguments,h=r&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(i!==void 0&&h.push("label:"+i+";"),m[0]==null||m[0].raw===void 0)h.push.apply(h,m);else{var p=m[0];h.push(p[0]);for(var b=m.length,v=1;v<b;v++)h.push(m[v],p[v])}var x=mB(function(w,j,C){var S=d&&w.as||s,_="",E=[],A=w;if(w.theme==null){A={};for(var T in w)A[T]=w[T];A.theme=g.useContext(dL)}typeof w.className=="string"?_=oB(j.registered,E,w.className):w.className!=null&&(_=w.className+" ");var R=Tw(h.concat(E),j.registered,A);_+=j.key+"-"+R.name,o!==void 0&&(_+=" "+o);var U=d&&l===void 0?gI(S):c,W={};for(var I in w)d&&I==="as"||U(I)&&(W[I]=w[I]);return W.className=_,C&&(W.ref=C),g.createElement(g.Fragment,null,g.createElement(Tse,{cache:j,serialized:R,isStringTag:typeof S=="string"}),g.createElement(S,W))});return x.displayName=i!==void 0?i:"Styled("+(typeof s=="string"?s:s.displayName||s.name||"Component")+")",x.defaultProps=t.defaultProps,x.__emotion_real=x,x.__emotion_base=s,x.__emotion_styles=h,x.__emotion_forwardProp=l,Object.defineProperty(x,"toString",{value:function(){return"."+o}}),x.withComponent=function(w,j){var C=e(w,ke({},n,j,{shouldForwardProp:pI(x,j,!0)}));return C.apply(void 0,h)},x}},kse=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],VA=Lse.bind(null);kse.forEach(function(e){VA[e]=VA(e)});function Pse(e,t){return VA(e,t)}function Dse(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const xI=[];function Dd(e){return xI[0]=e,Tw(xI)}const Ose=e=>{const t=Object.keys(e).map(n=>({key:n,val:e[n]}))||[];return t.sort((n,r)=>n.val-r.val),t.reduce((n,r)=>({...n,[r.key]:r.val}),{})};function Mse(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5,...s}=e,i=Ose(t),o=Object.keys(i);function l(p){return`@media (min-width:${typeof t[p]=="number"?t[p]:p}${n})`}function c(p){return`@media (max-width:${(typeof t[p]=="number"?t[p]:p)-r/100}${n})`}function d(p,b){const v=o.indexOf(b);return`@media (min-width:${typeof t[p]=="number"?t[p]:p}${n}) and (max-width:${(v!==-1&&typeof t[o[v]]=="number"?t[o[v]]:b)-r/100}${n})`}function m(p){return o.indexOf(p)+1<o.length?d(p,o[o.indexOf(p)+1]):l(p)}function h(p){const b=o.indexOf(p);return b===0?l(o[1]):b===o.length-1?c(o[b]):d(p,o[o.indexOf(p)+1]).replace("@media","@media not all and")}return{keys:o,values:i,up:l,down:c,between:d,only:m,not:h,unit:n,...s}}const Ise={borderRadius:4};function fB(e=8,t=rL({spacing:e})){if(e.mui)return e;const n=(...r)=>(r.length===0?[1]:r).map(i=>{const o=t(i);return typeof o=="number"?`${o}px`:o}).join(" ");return n.mui=!0,n}function $se(e,t){const n=this;if(n.vars){if(!n.colorSchemes?.[e]||typeof n.getColorSchemeSelector!="function")return{};let r=n.getColorSchemeSelector(e);return r==="&"?t:((r.includes("data-")||r.includes("."))&&(r=`*:where(${r.replace(/\s*&$/,"")}) &`),{[r]:t})}return n.palette.mode===e?t:{}}function fL(e={},...t){const{breakpoints:n={},palette:r={},spacing:s,shape:i={},...o}=e,l=Mse(n),c=fB(s);let d=fs({breakpoints:l,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:c,shape:{...Ise,...i}},o);return d=Vae(d),d.applyStyles=$se,d=t.reduce((m,h)=>fs(m,h),d),d.unstable_sxConfig={...Xp,...o?.unstable_sxConfig},d.unstable_sx=function(h){return Ym({sx:h,theme:this})},d}function Rse(e){return Object.keys(e).length===0}function hB(e=null){const t=g.useContext(dL);return!t||Rse(t)?e:t}const zse=fL();function gB(e=zse){return hB(e)}const yI=e=>e,Use=()=>{let e=yI;return{configure(t){e=t},generate(t){return e(t)},reset(){e=yI}}},Fse=Use(),Bse={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function xa(e,t,n="Mui"){const r=Bse[t];return r?`${n}-${r}`:`${Fse.generate(e)}-${t}`}function Zn(e,t,n="Mui"){const r={};return t.forEach(s=>{r[s]=xa(e,s,n)}),r}function pB(e){const{variants:t,...n}=e,r={variants:t,style:Dd(n),isProcessed:!0};return r.style===n||t&&t.forEach(s=>{typeof s.style!="function"&&(s.style=Dd(s.style))}),r}const Hse=fL();function Ab(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function Cd(e,t){return t&&e&&typeof e=="object"&&e.styles&&!e.styles.startsWith("@layer")&&(e.styles=`@layer ${t}{${String(e.styles)}}`),e}function Gse(e){return e?(t,n)=>n[e]:null}function Vse(e,t,n){e.theme=Yse(e.theme)?n:e.theme[t]||e.theme}function Eb(e,t,n){const r=typeof t=="function"?t(e):t;if(Array.isArray(r))return r.flatMap(s=>Eb(e,s,n));if(Array.isArray(r?.variants)){let s;if(r.isProcessed)s=n?Cd(r.style,n):r.style;else{const{variants:i,...o}=r;s=n?Cd(Dd(o),n):o}return xB(e,r.variants,[s],n)}return r?.isProcessed?n?Cd(Dd(r.style),n):r.style:n?Cd(Dd(r),n):r}function xB(e,t,n=[],r=void 0){let s;e:for(let i=0;i<t.length;i+=1){const o=t[i];if(typeof o.props=="function"){if(s??={...e,...e.ownerState,ownerState:e.ownerState},!o.props(s))continue}else for(const l in o.props)if(e[l]!==o.props[l]&&e.ownerState?.[l]!==o.props[l])continue e;typeof o.style=="function"?(s??={...e,...e.ownerState,ownerState:e.ownerState},n.push(r?Cd(Dd(o.style(s)),r):o.style(s))):n.push(r?Cd(Dd(o.style),r):o.style)}return n}function Wse(e={}){const{themeId:t,defaultTheme:n=Hse,rootShouldForwardProp:r=Ab,slotShouldForwardProp:s=Ab}=e;function i(l){Vse(l,t,n)}return(l,c={})=>{Dse(l,A=>A.filter(T=>T!==Ym));const{name:d,slot:m,skipVariantsResolver:h,skipSx:p,overridesResolver:b=Gse(Qse(m)),...v}=c,x=d&&d.startsWith("Mui")||m?"components":"custom",w=h!==void 0?h:m&&m!=="Root"&&m!=="root"||!1,j=p||!1;let C=Ab;m==="Root"||m==="root"?C=r:m?C=s:Kse(l)&&(C=void 0);const S=Pse(l,{shouldForwardProp:C,label:qse(),...v}),_=A=>{if(A.__emotion_real===A)return A;if(typeof A=="function")return function(R){return Eb(R,A,R.theme.modularCssLayers?x:void 0)};if(zi(A)){const T=pB(A);return function(U){return T.variants?Eb(U,T,U.theme.modularCssLayers?x:void 0):U.theme.modularCssLayers?Cd(T.style,x):T.style}}return A},E=(...A)=>{const T=[],R=A.map(_),U=[];if(T.push(i),d&&b&&U.push(function(H){const ae=H.theme.components?.[d]?.styleOverrides;if(!ae)return null;const K={};for(const B in ae)K[B]=Eb(H,ae[B],H.theme.modularCssLayers?"theme":void 0);return b(H,K)}),d&&!w&&U.push(function(H){const ae=H.theme?.components?.[d]?.variants;return ae?xB(H,ae,[],H.theme.modularCssLayers?"theme":void 0):null}),j||U.push(Ym),Array.isArray(R[0])){const M=R.shift(),H=new Array(T.length).fill(""),q=new Array(U.length).fill("");let ae;ae=[...H,...M,...q],ae.raw=[...H,...M.raw,...q],T.unshift(ae)}const W=[...T,...R,...U],I=S(...W);return l.muiName&&(I.muiName=l.muiName),I};return S.withConfig&&(E.withConfig=S.withConfig),E}}function qse(e,t){return void 0}function Yse(e){for(const t in e)return!1;return!0}function Kse(e){return typeof e=="string"&&e.charCodeAt(0)>96}function Qse(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}function Yd(e,t,n=!1){const r={...t};for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)){const i=s;if(i==="components"||i==="slots")r[i]={...e[i],...r[i]};else if(i==="componentsProps"||i==="slotProps"){const o=e[i],l=t[i];if(!l)r[i]=o||{};else if(!o)r[i]=l;else{r[i]={...l};for(const c in o)if(Object.prototype.hasOwnProperty.call(o,c)){const d=c;r[i][d]=Yd(o[d],l[d],n)}}}else i==="className"&&n&&t.className?r.className=ct(e?.className,t?.className):i==="style"&&n&&t.style?r.style={...e?.style,...t?.style}:r[i]===void 0&&(r[i]=e[i])}return r}function yB(e){const{theme:t,name:n,props:r}=e;return!t||!t.components||!t.components[n]||!t.components[n].defaultProps?r:Yd(t.components[n].defaultProps,r)}function Xse({props:e,name:t,defaultTheme:n,themeId:r}){let s=gB(n);return s=s[r]||s,yB({theme:s,name:t,props:e})}const Ea=typeof window<"u"?g.useLayoutEffect:g.useEffect;function Zse(e,t,n,r,s){const[i,o]=g.useState(()=>s&&n?n(e).matches:r?r(e).matches:t);return Ea(()=>{if(!n)return;const l=n(e),c=()=>{o(l.matches)};return c(),l.addEventListener("change",c),()=>{l.removeEventListener("change",c)}},[e,n]),i}const Jse={...Fd},bB=Jse.useSyncExternalStore;function eie(e,t,n,r,s){const i=g.useCallback(()=>t,[t]),o=g.useMemo(()=>{if(s&&n)return()=>n(e).matches;if(r!==null){const{matches:m}=r(e);return()=>m}return i},[i,e,r,s,n]),[l,c]=g.useMemo(()=>{if(n===null)return[i,()=>()=>{}];const m=n(e);return[()=>m.matches,h=>(m.addEventListener("change",h),()=>{m.removeEventListener("change",h)})]},[i,n,e]);return bB(c,l,o)}function vB(e={}){const{themeId:t}=e;return function(r,s={}){let i=hB();i&&t&&(i=i[t]||i);const o=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:l=!1,matchMedia:c=o?window.matchMedia:null,ssrMatchMedia:d=null,noSsr:m=!1}=yB({name:"MuiUseMediaQuery",props:s,theme:i});let h=typeof r=="function"?r(i):r;return h=h.replace(/^@media( ?)/m,""),h.includes("print")&&console.warn(["MUI: You have provided a `print` query to the `useMediaQuery` hook.","Using the print media query to modify print styles can lead to unexpected results.","Consider using the `displayPrint` field in the `sx` prop instead.","More information about `displayPrint` on our docs: https://mui.com/system/display/#display-in-print."].join(`
`)),(bB!==void 0?eie:Zse)(h,l,c,d,m)}}vB();function tie(e,t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,n))}function hL(e,t=0,n=1){return tie(e,t,n)}function nie(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,s)=>s<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function yc(e){if(e.type)return e;if(e.charAt(0)==="#")return yc(nie(e));const t=e.indexOf("("),n=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(qd(9,e));let r=e.substring(t+1,e.length-1),s;if(n==="color"){if(r=r.split(" "),s=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(s))throw new Error(qd(10,s))}else r=r.split(",");return r=r.map(i=>parseFloat(i)),{type:n,values:r,colorSpace:s}}const aie=e=>{const t=yc(e);return t.values.slice(0,3).map((n,r)=>t.type.includes("hsl")&&r!==0?`${n}%`:n).join(" ")},Ag=(e,t)=>{try{return aie(e)}catch{return e}};function Lw(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return t.includes("rgb")?r=r.map((s,i)=>i<3?parseInt(s,10):s):t.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),t.includes("color")?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${t}(${r})`}function wB(e){e=yc(e);const{values:t}=e,n=t[0],r=t[1]/100,s=t[2]/100,i=r*Math.min(s,1-s),o=(d,m=(d+n/30)%12)=>s-i*Math.max(Math.min(m-3,9-m,1),-1);let l="rgb";const c=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return e.type==="hsla"&&(l+="a",c.push(t[3])),Lw({type:l,values:c})}function WA(e){e=yc(e);let t=e.type==="hsl"||e.type==="hsla"?yc(wB(e)).values:e.values;return t=t.map(n=>(e.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function rie(e,t){const n=WA(e),r=WA(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function NB(e,t){return e=yc(e),t=hL(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,Lw(e)}function Xc(e,t,n){try{return NB(e,t)}catch{return e}}function kw(e,t){if(e=yc(e),t=hL(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return Lw(e)}function rn(e,t,n){try{return kw(e,t)}catch{return e}}function Pw(e,t){if(e=yc(e),t=hL(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return Lw(e)}function sn(e,t,n){try{return Pw(e,t)}catch{return e}}function sie(e,t=.15){return WA(e)>.5?kw(e,t):Pw(e,t)}function uy(e,t,n){try{return sie(e,t)}catch{return e}}const iie=g.createContext(),ex=()=>g.useContext(iie)??!1,oie=g.createContext(void 0);function lie(e){const{theme:t,name:n,props:r}=e;if(!t||!t.components||!t.components[n])return r;const s=t.components[n];return s.defaultProps?Yd(s.defaultProps,r,t.components.mergeClassNameAndStyle):!s.styleOverrides&&!s.variants?Yd(s,r,t.components.mergeClassNameAndStyle):r}function cie({props:e,name:t}){const n=g.useContext(oie);return lie({props:e,name:t,theme:{components:n}})}let bI=0;function die(e){const[t,n]=g.useState(e),r=e||t;return g.useEffect(()=>{t==null&&(bI+=1,n(`mui-${bI}`))},[t]),r}const uie={...Fd},vI=uie.useId;function Dw(e){if(vI!==void 0){const t=vI();return e??t}return die(e)}const wI={theme:void 0};function mie(e){let t,n;return function(s){let i=t;return(i===void 0||s.theme!==n)&&(wI.theme=s.theme,i=pB(e(wI)),t=i,n=s.theme),i}}function fie(e=""){function t(...r){if(!r.length)return"";const s=r[0];return typeof s=="string"&&!s.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${s}${t(...r.slice(1))})`:`, ${s}`}return(r,...s)=>`var(--${e?`${e}-`:""}${r}${t(...s)})`}const NI=(e,t,n,r=[])=>{let s=e;t.forEach((i,o)=>{o===t.length-1?Array.isArray(s)?s[Number(i)]=n:s&&typeof s=="object"&&(s[i]=n):s&&typeof s=="object"&&(s[i]||(s[i]=r.includes(i)?[]:{}),s=s[i])})},hie=(e,t,n)=>{function r(s,i=[],o=[]){Object.entries(s).forEach(([l,c])=>{(!n||n&&!n([...i,l]))&&c!=null&&(typeof c=="object"&&Object.keys(c).length>0?r(c,[...i,l],Array.isArray(c)?[...o,l]:o):t([...i,l],c,o))})}r(e)},gie=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>e.includes(r))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function tS(e,t){const{prefix:n,shouldSkipGeneratingVar:r}=t||{},s={},i={},o={};return hie(e,(l,c,d)=>{if((typeof c=="string"||typeof c=="number")&&(!r||!r(l,c))){const m=`--${n?`${n}-`:""}${l.join("-")}`,h=gie(l,c);Object.assign(s,{[m]:h}),NI(i,l,`var(${m})`,d),NI(o,l,`var(${m}, ${h})`,d)}},l=>l[0]==="vars"),{css:s,vars:i,varsWithDefaults:o}}function pie(e,t={}){const{getSelector:n=j,disableCssColorScheme:r,colorSchemeSelector:s,enableContrastVars:i}=t,{colorSchemes:o={},components:l,defaultColorScheme:c="light",...d}=e,{vars:m,css:h,varsWithDefaults:p}=tS(d,t);let b=p;const v={},{[c]:x,...w}=o;if(Object.entries(w||{}).forEach(([_,E])=>{const{vars:A,css:T,varsWithDefaults:R}=tS(E,t);b=fs(b,R),v[_]={css:T,vars:A}}),x){const{css:_,vars:E,varsWithDefaults:A}=tS(x,t);b=fs(b,A),v[c]={css:_,vars:E}}function j(_,E){let A=s;if(s==="class"&&(A=".%s"),s==="data"&&(A="[data-%s]"),s?.startsWith("data-")&&!s.includes("%s")&&(A=`[${s}="%s"]`),_){if(A==="media")return e.defaultColorScheme===_?":root":{[`@media (prefers-color-scheme: ${o[_]?.palette?.mode||_})`]:{":root":E}};if(A)return e.defaultColorScheme===_?`:root, ${A.replace("%s",String(_))}`:A.replace("%s",String(_))}return":root"}return{vars:b,generateThemeVars:()=>{let _={...m};return Object.entries(v).forEach(([,{vars:E}])=>{_=fs(_,E)}),_},generateStyleSheets:()=>{const _=[],E=e.defaultColorScheme||"light";function A(U,W){Object.keys(W).length&&_.push(typeof U=="string"?{[U]:{...W}}:U)}A(n(void 0,{...h}),h);const{[E]:T,...R}=v;if(T){const{css:U}=T,W=o[E]?.palette?.mode,I=!r&&W?{colorScheme:W,...U}:{...U};A(n(E,{...I}),I)}return Object.entries(R).forEach(([U,{css:W}])=>{const I=o[U]?.palette?.mode,M=!r&&I?{colorScheme:I,...W}:{...W};A(n(U,{...M}),M)}),i&&_.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),_}}}function xie(e){return function(n){return e==="media"?`@media (prefers-color-scheme: ${n})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${n}"] &`:e==="class"?`.${n} &`:e==="data"?`[data-${n}] &`:`${e.replace("%s",n)} &`:"&"}}const ap={black:"#000",white:"#fff"},yie={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},om={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},lm={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},kh={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},cm={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},dm={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},um={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function jB(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:ap.white,default:ap.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const CB=jB();function SB(){return{text:{primary:ap.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:ap.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const qA=SB();function jI(e,t,n,r){const s=r.light||r,i=r.dark||r*1.5;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:t==="light"?e.light=Pw(e.main,s):t==="dark"&&(e.dark=kw(e.main,i)))}function CI(e,t,n,r,s){const i=s.light||s,o=s.dark||s*1.5;t[n]||(t.hasOwnProperty(r)?t[n]=t[r]:n==="light"?t.light=`color-mix(in ${e}, ${t.main}, #fff ${(i*100).toFixed(0)}%)`:n==="dark"&&(t.dark=`color-mix(in ${e}, ${t.main}, #000 ${(o*100).toFixed(0)}%)`))}function bie(e="light"){return e==="dark"?{main:cm[200],light:cm[50],dark:cm[400]}:{main:cm[700],light:cm[400],dark:cm[800]}}function vie(e="light"){return e==="dark"?{main:om[200],light:om[50],dark:om[400]}:{main:om[500],light:om[300],dark:om[700]}}function wie(e="light"){return e==="dark"?{main:lm[500],light:lm[300],dark:lm[700]}:{main:lm[700],light:lm[400],dark:lm[800]}}function Nie(e="light"){return e==="dark"?{main:dm[400],light:dm[300],dark:dm[700]}:{main:dm[700],light:dm[500],dark:dm[900]}}function jie(e="light"){return e==="dark"?{main:um[400],light:um[300],dark:um[700]}:{main:um[800],light:um[500],dark:um[900]}}function Cie(e="light"){return e==="dark"?{main:kh[400],light:kh[300],dark:kh[700]}:{main:"#ed6c02",light:kh[500],dark:kh[900]}}function Sie(e){return`oklch(from ${e} var(--__l) 0 h / var(--__a))`}function gL(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:r=.2,colorSpace:s,...i}=e,o=e.primary||bie(t),l=e.secondary||vie(t),c=e.error||wie(t),d=e.info||Nie(t),m=e.success||jie(t),h=e.warning||Cie(t);function p(w){return s?Sie(w):rie(w,qA.text.primary)>=n?qA.text.primary:CB.text.primary}const b=({color:w,name:j,mainShade:C=500,lightShade:S=300,darkShade:_=700})=>{if(w={...w},!w.main&&w[C]&&(w.main=w[C]),!w.hasOwnProperty("main"))throw new Error(qd(11,j?` (${j})`:"",C));if(typeof w.main!="string")throw new Error(qd(12,j?` (${j})`:"",JSON.stringify(w.main)));return s?(CI(s,w,"light",S,r),CI(s,w,"dark",_,r)):(jI(w,"light",S,r),jI(w,"dark",_,r)),w.contrastText||(w.contrastText=p(w.main)),w};let v;return t==="light"?v=jB():t==="dark"&&(v=SB()),fs({common:{...ap},mode:t,primary:b({color:o,name:"primary"}),secondary:b({color:l,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:b({color:c,name:"error"}),warning:b({color:h,name:"warning"}),info:b({color:d,name:"info"}),success:b({color:m,name:"success"}),grey:yie,contrastThreshold:n,getContrastText:p,augmentColor:b,tonalOffset:r,...v},i)}function _ie(e){const t={};return Object.entries(e).forEach(r=>{const[s,i]=r;typeof i=="object"&&(t[s]=`${i.fontStyle?`${i.fontStyle} `:""}${i.fontVariant?`${i.fontVariant} `:""}${i.fontWeight?`${i.fontWeight} `:""}${i.fontStretch?`${i.fontStretch} `:""}${i.fontSize||""}${i.lineHeight?`/${i.lineHeight} `:""}${i.fontFamily||""}`)}),t}function Aie(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function Eie(e){return Math.round(e*1e5)/1e5}const SI={textTransform:"uppercase"},_I='"Roboto", "Helvetica", "Arial", sans-serif';function Tie(e,t){const{fontFamily:n=_I,fontSize:r=14,fontWeightLight:s=300,fontWeightRegular:i=400,fontWeightMedium:o=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:d,pxToRem:m,...h}=typeof t=="function"?t(e):t,p=r/14,b=m||(w=>`${w/c*p}rem`),v=(w,j,C,S,_)=>({fontFamily:n,fontWeight:w,fontSize:b(j),lineHeight:C,...n===_I?{letterSpacing:`${Eie(S/j)}em`}:{},..._,...d}),x={h1:v(s,96,1.167,-1.5),h2:v(s,60,1.2,-.5),h3:v(i,48,1.167,0),h4:v(i,34,1.235,.25),h5:v(i,24,1.334,0),h6:v(o,20,1.6,.15),subtitle1:v(i,16,1.75,.15),subtitle2:v(o,14,1.57,.1),body1:v(i,16,1.5,.15),body2:v(i,14,1.43,.15),button:v(o,14,1.75,.4,SI),caption:v(i,12,1.66,.4),overline:v(i,12,2.66,1,SI),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return fs({htmlFontSize:c,pxToRem:b,fontFamily:n,fontSize:r,fontWeightLight:s,fontWeightRegular:i,fontWeightMedium:o,fontWeightBold:l,...x},h,{clone:!1})}const Lie=.2,kie=.14,Pie=.12;function Dn(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${Lie})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${kie})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${Pie})`].join(",")}const Die=["none",Dn(0,2,1,-1,0,1,1,0,0,1,3,0),Dn(0,3,1,-2,0,2,2,0,0,1,5,0),Dn(0,3,3,-2,0,3,4,0,0,1,8,0),Dn(0,2,4,-1,0,4,5,0,0,1,10,0),Dn(0,3,5,-1,0,5,8,0,0,1,14,0),Dn(0,3,5,-1,0,6,10,0,0,1,18,0),Dn(0,4,5,-2,0,7,10,1,0,2,16,1),Dn(0,5,5,-3,0,8,10,1,0,3,14,2),Dn(0,5,6,-3,0,9,12,1,0,3,16,2),Dn(0,6,6,-3,0,10,14,1,0,4,18,3),Dn(0,6,7,-4,0,11,15,1,0,4,20,3),Dn(0,7,8,-4,0,12,17,2,0,5,22,4),Dn(0,7,8,-4,0,13,19,2,0,5,24,4),Dn(0,7,9,-4,0,14,21,2,0,5,26,4),Dn(0,8,9,-5,0,15,22,2,0,6,28,5),Dn(0,8,10,-5,0,16,24,2,0,6,30,5),Dn(0,8,11,-5,0,17,26,2,0,6,32,5),Dn(0,9,11,-5,0,18,28,2,0,7,34,6),Dn(0,9,12,-6,0,19,29,2,0,7,36,6),Dn(0,10,13,-6,0,20,31,3,0,8,38,7),Dn(0,10,13,-6,0,21,33,3,0,8,40,7),Dn(0,10,14,-6,0,22,35,3,0,8,42,7),Dn(0,11,14,-7,0,23,36,3,0,9,44,8),Dn(0,11,15,-7,0,24,38,3,0,9,46,8)],Oie={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Mie={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function AI(e){return`${Math.round(e)}ms`}function Iie(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function $ie(e){const t={...Oie,...e.easing},n={...Mie,...e.duration};return{getAutoHeightDuration:Iie,create:(s=["all"],i={})=>{const{duration:o=n.standard,easing:l=t.easeInOut,delay:c=0,...d}=i;return(Array.isArray(s)?s:[s]).map(m=>`${m} ${typeof o=="string"?o:AI(o)} ${l} ${typeof c=="string"?c:AI(c)}`).join(",")},...e,easing:t,duration:n}}const Rie={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function zie(e){return zi(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function _B(e={}){const t={...e};function n(r){const s=Object.entries(r);for(let i=0;i<s.length;i++){const[o,l]=s[i];!zie(l)||o.startsWith("unstable_")?delete r[o]:zi(l)&&(r[o]={...l},n(r[o]))}}return n(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function EI(e){return typeof e=="number"?`${(e*100).toFixed(0)}%`:`calc((${e}) * 100%)`}const Uie=e=>{if(!Number.isNaN(+e))return+e;const t=e.match(/\d*\.?\d+/g);if(!t)return 0;let n=0;for(let r=0;r<t.length;r+=1)n+=+t[r];return n};function Fie(e){Object.assign(e,{alpha(t,n){const r=this||e;return r.colorSpace?`oklch(from ${t} l c h / ${typeof n=="string"?`calc(${n})`:n})`:r.vars?`rgba(${t.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")} / ${typeof n=="string"?`calc(${n})`:n})`:NB(t,Uie(n))},lighten(t,n){const r=this||e;return r.colorSpace?`color-mix(in ${r.colorSpace}, ${t}, #fff ${EI(n)})`:Pw(t,n)},darken(t,n){const r=this||e;return r.colorSpace?`color-mix(in ${r.colorSpace}, ${t}, #000 ${EI(n)})`:kw(t,n)}})}function YA(e={},...t){const{breakpoints:n,mixins:r={},spacing:s,palette:i={},transitions:o={},typography:l={},shape:c,colorSpace:d,...m}=e;if(e.vars&&e.generateThemeVars===void 0)throw new Error(qd(20));const h=gL({...i,colorSpace:d}),p=fL(e);let b=fs(p,{mixins:Aie(p.breakpoints,r),palette:h,shadows:Die.slice(),typography:Tie(h,l),transitions:$ie(o),zIndex:{...Rie}});return b=fs(b,m),b=t.reduce((v,x)=>fs(v,x),b),b.unstable_sxConfig={...Xp,...m?.unstable_sxConfig},b.unstable_sx=function(x){return Ym({sx:x,theme:this})},b.toRuntimeSource=_B,Fie(b),b}function Bie(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const Hie=[...Array(25)].map((e,t)=>{if(t===0)return"none";const n=Bie(t);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function AB(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function EB(e){return e==="dark"?Hie:[]}function Gie(e){const{palette:t={mode:"light"},opacity:n,overlays:r,colorSpace:s,...i}=e,o=gL({...t,colorSpace:s});return{palette:o,opacity:{...AB(o.mode),...n},overlays:r||EB(o.mode),...i}}function Vie(e){return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!e[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const Wie=e=>[...[...Array(25)].map((t,n)=>`--${e?`${e}-`:""}overlays-${n}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],qie=e=>(t,n)=>{const r=e.rootSelector||":root",s=e.colorSchemeSelector;let i=s;if(s==="class"&&(i=".%s"),s==="data"&&(i="[data-%s]"),s?.startsWith("data-")&&!s.includes("%s")&&(i=`[${s}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const o={};return Wie(e.cssVarPrefix).forEach(l=>{o[l]=n[l],delete n[l]}),i==="media"?{[r]:n,"@media (prefers-color-scheme: dark)":{[r]:o}}:i?{[i.replace("%s",t)]:o,[`${r}, ${i.replace("%s",t)}`]:n}:{[r]:{...n,...o}}}if(i&&i!=="media")return`${r}, ${i.replace("%s",String(t))}`}else if(t){if(i==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[r]:n}};if(i)return i.replace("%s",String(t))}return r};function Yie(e,t){t.forEach(n=>{e[n]||(e[n]={})})}function Ye(e,t,n){!e[t]&&n&&(e[t]=n)}function Eg(e){return typeof e!="string"||!e.startsWith("hsl")?e:wB(e)}function Ao(e,t){`${t}Channel`in e||(e[`${t}Channel`]=Ag(Eg(e[t])))}function Kie(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const ki=e=>{try{return e()}catch{}},Qie=(e="mui")=>fie(e);function nS(e,t,n,r,s){if(!n)return;n=n===!0?{}:n;const i=s==="dark"?"dark":"light";if(!r){t[s]=Gie({...n,palette:{mode:i,...n?.palette},colorSpace:e});return}const{palette:o,...l}=YA({...r,palette:{mode:i,...n?.palette},colorSpace:e});return t[s]={...n,palette:o,opacity:{...AB(i),...n?.opacity},overlays:n?.overlays||EB(i)},l}function Xie(e={},...t){const{colorSchemes:n={light:!0},defaultColorScheme:r,disableCssColorScheme:s=!1,cssVarPrefix:i="mui",nativeColor:o=!1,shouldSkipGeneratingVar:l=Vie,colorSchemeSelector:c=n.light&&n.dark?"media":void 0,rootSelector:d=":root",...m}=e,h=Object.keys(n)[0],p=r||(n.light&&h!=="light"?"light":h),b=Qie(i),{[p]:v,light:x,dark:w,...j}=n,C={...j};let S=v;if((p==="dark"&&!("dark"in n)||p==="light"&&!("light"in n))&&(S=!0),!S)throw new Error(qd(21,p));let _;o&&(_="oklch");const E=nS(_,C,S,m,p);x&&!C.light&&nS(_,C,x,void 0,"light"),w&&!C.dark&&nS(_,C,w,void 0,"dark");let A={defaultColorScheme:p,...E,cssVarPrefix:i,colorSchemeSelector:c,rootSelector:d,getCssVar:b,colorSchemes:C,font:{..._ie(E.typography),...E.font},spacing:Kie(m.spacing)};Object.keys(A.colorSchemes).forEach(I=>{const M=A.colorSchemes[I].palette,H=ae=>{const K=ae.split("-"),B=K[1],X=K[2];return b(ae,M[B][X])};M.mode==="light"&&(Ye(M.common,"background","#fff"),Ye(M.common,"onBackground","#000")),M.mode==="dark"&&(Ye(M.common,"background","#000"),Ye(M.common,"onBackground","#fff"));function q(ae,K,B){if(_){let X;return ae===Xc&&(X=`transparent ${((1-B)*100).toFixed(0)}%`),ae===rn&&(X=`#000 ${(B*100).toFixed(0)}%`),ae===sn&&(X=`#fff ${(B*100).toFixed(0)}%`),`color-mix(in ${_}, ${K}, ${X})`}return ae(K,B)}if(Yie(M,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),M.mode==="light"){Ye(M.Alert,"errorColor",q(rn,M.error.light,.6)),Ye(M.Alert,"infoColor",q(rn,M.info.light,.6)),Ye(M.Alert,"successColor",q(rn,M.success.light,.6)),Ye(M.Alert,"warningColor",q(rn,M.warning.light,.6)),Ye(M.Alert,"errorFilledBg",H("palette-error-main")),Ye(M.Alert,"infoFilledBg",H("palette-info-main")),Ye(M.Alert,"successFilledBg",H("palette-success-main")),Ye(M.Alert,"warningFilledBg",H("palette-warning-main")),Ye(M.Alert,"errorFilledColor",ki(()=>M.getContrastText(M.error.main))),Ye(M.Alert,"infoFilledColor",ki(()=>M.getContrastText(M.info.main))),Ye(M.Alert,"successFilledColor",ki(()=>M.getContrastText(M.success.main))),Ye(M.Alert,"warningFilledColor",ki(()=>M.getContrastText(M.warning.main))),Ye(M.Alert,"errorStandardBg",q(sn,M.error.light,.9)),Ye(M.Alert,"infoStandardBg",q(sn,M.info.light,.9)),Ye(M.Alert,"successStandardBg",q(sn,M.success.light,.9)),Ye(M.Alert,"warningStandardBg",q(sn,M.warning.light,.9)),Ye(M.Alert,"errorIconColor",H("palette-error-main")),Ye(M.Alert,"infoIconColor",H("palette-info-main")),Ye(M.Alert,"successIconColor",H("palette-success-main")),Ye(M.Alert,"warningIconColor",H("palette-warning-main")),Ye(M.AppBar,"defaultBg",H("palette-grey-100")),Ye(M.Avatar,"defaultBg",H("palette-grey-400")),Ye(M.Button,"inheritContainedBg",H("palette-grey-300")),Ye(M.Button,"inheritContainedHoverBg",H("palette-grey-A100")),Ye(M.Chip,"defaultBorder",H("palette-grey-400")),Ye(M.Chip,"defaultAvatarColor",H("palette-grey-700")),Ye(M.Chip,"defaultIconColor",H("palette-grey-700")),Ye(M.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),Ye(M.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),Ye(M.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),Ye(M.LinearProgress,"primaryBg",q(sn,M.primary.main,.62)),Ye(M.LinearProgress,"secondaryBg",q(sn,M.secondary.main,.62)),Ye(M.LinearProgress,"errorBg",q(sn,M.error.main,.62)),Ye(M.LinearProgress,"infoBg",q(sn,M.info.main,.62)),Ye(M.LinearProgress,"successBg",q(sn,M.success.main,.62)),Ye(M.LinearProgress,"warningBg",q(sn,M.warning.main,.62)),Ye(M.Skeleton,"bg",_?q(Xc,M.text.primary,.11):`rgba(${H("palette-text-primaryChannel")} / 0.11)`),Ye(M.Slider,"primaryTrack",q(sn,M.primary.main,.62)),Ye(M.Slider,"secondaryTrack",q(sn,M.secondary.main,.62)),Ye(M.Slider,"errorTrack",q(sn,M.error.main,.62)),Ye(M.Slider,"infoTrack",q(sn,M.info.main,.62)),Ye(M.Slider,"successTrack",q(sn,M.success.main,.62)),Ye(M.Slider,"warningTrack",q(sn,M.warning.main,.62));const ae=_?q(rn,M.background.default,.6825):uy(M.background.default,.8);Ye(M.SnackbarContent,"bg",ae),Ye(M.SnackbarContent,"color",ki(()=>_?qA.text.primary:M.getContrastText(ae))),Ye(M.SpeedDialAction,"fabHoverBg",uy(M.background.paper,.15)),Ye(M.StepConnector,"border",H("palette-grey-400")),Ye(M.StepContent,"border",H("palette-grey-400")),Ye(M.Switch,"defaultColor",H("palette-common-white")),Ye(M.Switch,"defaultDisabledColor",H("palette-grey-100")),Ye(M.Switch,"primaryDisabledColor",q(sn,M.primary.main,.62)),Ye(M.Switch,"secondaryDisabledColor",q(sn,M.secondary.main,.62)),Ye(M.Switch,"errorDisabledColor",q(sn,M.error.main,.62)),Ye(M.Switch,"infoDisabledColor",q(sn,M.info.main,.62)),Ye(M.Switch,"successDisabledColor",q(sn,M.success.main,.62)),Ye(M.Switch,"warningDisabledColor",q(sn,M.warning.main,.62)),Ye(M.TableCell,"border",q(sn,q(Xc,M.divider,1),.88)),Ye(M.Tooltip,"bg",q(Xc,M.grey[700],.92))}if(M.mode==="dark"){Ye(M.Alert,"errorColor",q(sn,M.error.light,.6)),Ye(M.Alert,"infoColor",q(sn,M.info.light,.6)),Ye(M.Alert,"successColor",q(sn,M.success.light,.6)),Ye(M.Alert,"warningColor",q(sn,M.warning.light,.6)),Ye(M.Alert,"errorFilledBg",H("palette-error-dark")),Ye(M.Alert,"infoFilledBg",H("palette-info-dark")),Ye(M.Alert,"successFilledBg",H("palette-success-dark")),Ye(M.Alert,"warningFilledBg",H("palette-warning-dark")),Ye(M.Alert,"errorFilledColor",ki(()=>M.getContrastText(M.error.dark))),Ye(M.Alert,"infoFilledColor",ki(()=>M.getContrastText(M.info.dark))),Ye(M.Alert,"successFilledColor",ki(()=>M.getContrastText(M.success.dark))),Ye(M.Alert,"warningFilledColor",ki(()=>M.getContrastText(M.warning.dark))),Ye(M.Alert,"errorStandardBg",q(rn,M.error.light,.9)),Ye(M.Alert,"infoStandardBg",q(rn,M.info.light,.9)),Ye(M.Alert,"successStandardBg",q(rn,M.success.light,.9)),Ye(M.Alert,"warningStandardBg",q(rn,M.warning.light,.9)),Ye(M.Alert,"errorIconColor",H("palette-error-main")),Ye(M.Alert,"infoIconColor",H("palette-info-main")),Ye(M.Alert,"successIconColor",H("palette-success-main")),Ye(M.Alert,"warningIconColor",H("palette-warning-main")),Ye(M.AppBar,"defaultBg",H("palette-grey-900")),Ye(M.AppBar,"darkBg",H("palette-background-paper")),Ye(M.AppBar,"darkColor",H("palette-text-primary")),Ye(M.Avatar,"defaultBg",H("palette-grey-600")),Ye(M.Button,"inheritContainedBg",H("palette-grey-800")),Ye(M.Button,"inheritContainedHoverBg",H("palette-grey-700")),Ye(M.Chip,"defaultBorder",H("palette-grey-700")),Ye(M.Chip,"defaultAvatarColor",H("palette-grey-300")),Ye(M.Chip,"defaultIconColor",H("palette-grey-300")),Ye(M.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),Ye(M.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),Ye(M.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),Ye(M.LinearProgress,"primaryBg",q(rn,M.primary.main,.5)),Ye(M.LinearProgress,"secondaryBg",q(rn,M.secondary.main,.5)),Ye(M.LinearProgress,"errorBg",q(rn,M.error.main,.5)),Ye(M.LinearProgress,"infoBg",q(rn,M.info.main,.5)),Ye(M.LinearProgress,"successBg",q(rn,M.success.main,.5)),Ye(M.LinearProgress,"warningBg",q(rn,M.warning.main,.5)),Ye(M.Skeleton,"bg",_?q(Xc,M.text.primary,.13):`rgba(${H("palette-text-primaryChannel")} / 0.13)`),Ye(M.Slider,"primaryTrack",q(rn,M.primary.main,.5)),Ye(M.Slider,"secondaryTrack",q(rn,M.secondary.main,.5)),Ye(M.Slider,"errorTrack",q(rn,M.error.main,.5)),Ye(M.Slider,"infoTrack",q(rn,M.info.main,.5)),Ye(M.Slider,"successTrack",q(rn,M.success.main,.5)),Ye(M.Slider,"warningTrack",q(rn,M.warning.main,.5));const ae=_?q(sn,M.background.default,.985):uy(M.background.default,.98);Ye(M.SnackbarContent,"bg",ae),Ye(M.SnackbarContent,"color",ki(()=>_?CB.text.primary:M.getContrastText(ae))),Ye(M.SpeedDialAction,"fabHoverBg",uy(M.background.paper,.15)),Ye(M.StepConnector,"border",H("palette-grey-600")),Ye(M.StepContent,"border",H("palette-grey-600")),Ye(M.Switch,"defaultColor",H("palette-grey-300")),Ye(M.Switch,"defaultDisabledColor",H("palette-grey-600")),Ye(M.Switch,"primaryDisabledColor",q(rn,M.primary.main,.55)),Ye(M.Switch,"secondaryDisabledColor",q(rn,M.secondary.main,.55)),Ye(M.Switch,"errorDisabledColor",q(rn,M.error.main,.55)),Ye(M.Switch,"infoDisabledColor",q(rn,M.info.main,.55)),Ye(M.Switch,"successDisabledColor",q(rn,M.success.main,.55)),Ye(M.Switch,"warningDisabledColor",q(rn,M.warning.main,.55)),Ye(M.TableCell,"border",q(rn,q(Xc,M.divider,1),.68)),Ye(M.Tooltip,"bg",q(Xc,M.grey[700],.92))}Ao(M.background,"default"),Ao(M.background,"paper"),Ao(M.common,"background"),Ao(M.common,"onBackground"),Ao(M,"divider"),Object.keys(M).forEach(ae=>{const K=M[ae];ae!=="tonalOffset"&&K&&typeof K=="object"&&(K.main&&Ye(M[ae],"mainChannel",Ag(Eg(K.main))),K.light&&Ye(M[ae],"lightChannel",Ag(Eg(K.light))),K.dark&&Ye(M[ae],"darkChannel",Ag(Eg(K.dark))),K.contrastText&&Ye(M[ae],"contrastTextChannel",Ag(Eg(K.contrastText))),ae==="text"&&(Ao(M[ae],"primary"),Ao(M[ae],"secondary")),ae==="action"&&(K.active&&Ao(M[ae],"active"),K.selected&&Ao(M[ae],"selected")))})}),A=t.reduce((I,M)=>fs(I,M),A);const T={prefix:i,disableCssColorScheme:s,shouldSkipGeneratingVar:l,getSelector:qie(A),enableContrastVars:o},{vars:R,generateThemeVars:U,generateStyleSheets:W}=pie(A,T);return A.vars=R,Object.entries(A.colorSchemes[A.defaultColorScheme]).forEach(([I,M])=>{A[I]=M}),A.generateThemeVars=U,A.generateStyleSheets=W,A.generateSpacing=function(){return fB(m.spacing,rL(this))},A.getColorSchemeSelector=xie(c),A.spacing=A.generateSpacing(),A.shouldSkipGeneratingVar=l,A.unstable_sxConfig={...Xp,...m?.unstable_sxConfig},A.unstable_sx=function(M){return Ym({sx:M,theme:this})},A.toRuntimeSource=_B,A}function TI(e,t,n){e.colorSchemes&&n&&(e.colorSchemes[t]={...n!==!0&&n,palette:gL({...n===!0?{}:n.palette,mode:t})})}function Zie(e={},...t){const{palette:n,cssVariables:r=!1,colorSchemes:s=n?void 0:{light:!0},defaultColorScheme:i=n?.mode,...o}=e,l=i||"light",c=s?.[l],d={...s,...n?{[l]:{...typeof c!="boolean"&&c,palette:n}}:void 0};if(r===!1){if(!("colorSchemes"in e))return YA(e,...t);let m=n;"palette"in e||d[l]&&(d[l]!==!0?m=d[l].palette:l==="dark"&&(m={mode:"dark"}));const h=YA({...e,palette:m},...t);return h.defaultColorScheme=l,h.colorSchemes=d,h.palette.mode==="light"&&(h.colorSchemes.light={...d.light!==!0&&d.light,palette:h.palette},TI(h,"dark",d.dark)),h.palette.mode==="dark"&&(h.colorSchemes.dark={...d.dark!==!0&&d.dark,palette:h.palette},TI(h,"light",d.light)),h}return!n&&!("light"in d)&&l==="light"&&(d.light=!0),Xie({...o,colorSchemes:d,defaultColorScheme:l,...typeof r!="boolean"&&r},...t)}const pL=Zie(),Ow="$$material";function ro(){const e=gB(pL);return e[Ow]||e}function Jie(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const TB=e=>Jie(e)&&e!=="classes",kt=Wse({themeId:Ow,defaultTheme:pL,rootShouldForwardProp:TB});function eoe(){return Ore}function Ac(e){return cie(e)}function Ji(...e){const t=g.useRef(void 0),n=g.useCallback(r=>{const s=e.map(i=>{if(i==null)return null;if(typeof i=="function"){const o=i,l=o(r);return typeof l=="function"?l:()=>{o(null)}}return i.current=r,()=>{i.current=null}});return()=>{s.forEach(i=>i?.())}},e);return g.useMemo(()=>e.every(r=>r==null)?null:r=>{t.current&&(t.current(),t.current=void 0),r!=null&&(t.current=n(r))},e)}function toe(e){return typeof e=="string"}function LB(e,t,n){return e===void 0||toe(e)?t:{...t,ownerState:{...t.ownerState,...n}}}function kB(e,t,n){return typeof e=="function"?e(t,n):e}function noe(e,t=[]){if(e===void 0)return{};const n={};return Object.keys(e).filter(r=>r.match(/^on[A-Z]/)&&typeof e[r]=="function"&&!t.includes(r)).forEach(r=>{n[r]=e[r]}),n}function LI(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(n=>!(n.match(/^on[A-Z]/)&&typeof e[n]=="function")).forEach(n=>{t[n]=e[n]}),t}function PB(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:r,externalForwardedProps:s,className:i}=e;if(!t){const b=ct(n?.className,i,s?.className,r?.className),v={...n?.style,...s?.style,...r?.style},x={...n,...s,...r};return b.length>0&&(x.className=b),Object.keys(v).length>0&&(x.style=v),{props:x,internalRef:void 0}}const o=noe({...s,...r}),l=LI(r),c=LI(s),d=t(o),m=ct(d?.className,n?.className,i,s?.className,r?.className),h={...d?.style,...n?.style,...s?.style,...r?.style},p={...d,...n,...c,...l};return m.length>0&&(p.className=m),Object.keys(h).length>0&&(p.style=h),{props:p,internalRef:d.ref}}function kI(e,t){const{className:n,elementType:r,ownerState:s,externalForwardedProps:i,internalForwardedProps:o,shouldForwardComponentProp:l=!1,...c}=t,{component:d,slots:m={[e]:void 0},slotProps:h={[e]:void 0},...p}=i,b=m[e]||r,v=kB(h[e],s),{props:{component:x,...w},internalRef:j}=PB({className:n,...c,externalForwardedProps:e==="root"?p:void 0,externalSlotProps:v}),C=Ji(j,v?.ref,t.ref),S=e==="root"?x||d:x,_=LB(b,{...e==="root"&&!d&&!m[e]&&o,...e!=="root"&&!m[e]&&o,...w,...S&&!l&&{as:S},...S&&l&&{component:S},ref:C},s);return[b,_]}function $t(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function KA(e,t){return KA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},KA(e,t)}function DB(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,KA(e,t)}const PI={disabled:!1},Gb=nt.createContext(null);var aoe=function(t){return t.scrollTop},Tg="unmounted",fd="exited",hd="entering",Tm="entered",QA="exiting",fl=(function(e){DB(t,e);function t(r,s){var i;i=e.call(this,r,s)||this;var o=s,l=o&&!o.isMounting?r.enter:r.appear,c;return i.appearStatus=null,r.in?l?(c=fd,i.appearStatus=hd):c=Tm:r.unmountOnExit||r.mountOnEnter?c=Tg:c=fd,i.state={status:c},i.nextCallback=null,i}t.getDerivedStateFromProps=function(s,i){var o=s.in;return o&&i.status===Tg?{status:fd}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(s){var i=null;if(s!==this.props){var o=this.state.status;this.props.in?o!==hd&&o!==Tm&&(i=hd):(o===hd||o===Tm)&&(i=QA)}this.updateStatus(!1,i)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var s=this.props.timeout,i,o,l;return i=o=l=s,s!=null&&typeof s!="number"&&(i=s.exit,o=s.enter,l=s.appear!==void 0?s.appear:o),{exit:i,enter:o,appear:l}},n.updateStatus=function(s,i){if(s===void 0&&(s=!1),i!==null)if(this.cancelNextCallback(),i===hd){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:oy.findDOMNode(this);o&&aoe(o)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===fd&&this.setState({status:Tg})},n.performEnter=function(s){var i=this,o=this.props.enter,l=this.context?this.context.isMounting:s,c=this.props.nodeRef?[l]:[oy.findDOMNode(this),l],d=c[0],m=c[1],h=this.getTimeouts(),p=l?h.appear:h.enter;if(!s&&!o||PI.disabled){this.safeSetState({status:Tm},function(){i.props.onEntered(d)});return}this.props.onEnter(d,m),this.safeSetState({status:hd},function(){i.props.onEntering(d,m),i.onTransitionEnd(p,function(){i.safeSetState({status:Tm},function(){i.props.onEntered(d,m)})})})},n.performExit=function(){var s=this,i=this.props.exit,o=this.getTimeouts(),l=this.props.nodeRef?void 0:oy.findDOMNode(this);if(!i||PI.disabled){this.safeSetState({status:fd},function(){s.props.onExited(l)});return}this.props.onExit(l),this.safeSetState({status:QA},function(){s.props.onExiting(l),s.onTransitionEnd(o.exit,function(){s.safeSetState({status:fd},function(){s.props.onExited(l)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(s,i){i=this.setNextCallback(i),this.setState(s,i)},n.setNextCallback=function(s){var i=this,o=!0;return this.nextCallback=function(l){o&&(o=!1,i.nextCallback=null,s(l))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(s,i){this.setNextCallback(i);var o=this.props.nodeRef?this.props.nodeRef.current:oy.findDOMNode(this),l=s==null&&!this.props.addEndListener;if(!o||l){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var c=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],d=c[0],m=c[1];this.props.addEndListener(d,m)}s!=null&&setTimeout(this.nextCallback,s)},n.render=function(){var s=this.state.status;if(s===Tg)return null;var i=this.props,o=i.children;i.in,i.mountOnEnter,i.unmountOnExit,i.appear,i.enter,i.exit,i.timeout,i.addEndListener,i.onEnter,i.onEntering,i.onEntered,i.onExit,i.onExiting,i.onExited,i.nodeRef;var l=$t(i,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return nt.createElement(Gb.Provider,{value:null},typeof o=="function"?o(s,l):nt.cloneElement(nt.Children.only(o),l))},t})(nt.Component);fl.contextType=Gb;fl.propTypes={};function mm(){}fl.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:mm,onEntering:mm,onEntered:mm,onExit:mm,onExiting:mm,onExited:mm};fl.UNMOUNTED=Tg;fl.EXITED=fd;fl.ENTERING=hd;fl.ENTERED=Tm;fl.EXITING=QA;function roe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xL(e,t){var n=function(i){return t&&g.isValidElement(i)?t(i):i},r=Object.create(null);return e&&g.Children.map(e,function(s){return s}).forEach(function(s){r[s.key]=n(s)}),r}function soe(e,t){e=e||{},t=t||{};function n(m){return m in t?t[m]:e[m]}var r=Object.create(null),s=[];for(var i in e)i in t?s.length&&(r[i]=s,s=[]):s.push(i);var o,l={};for(var c in t){if(r[c])for(o=0;o<r[c].length;o++){var d=r[c][o];l[r[c][o]]=n(d)}l[c]=n(c)}for(o=0;o<s.length;o++)l[s[o]]=n(s[o]);return l}function Sd(e,t,n){return n[t]!=null?n[t]:e.props[t]}function ioe(e,t){return xL(e.children,function(n){return g.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:Sd(n,"appear",e),enter:Sd(n,"enter",e),exit:Sd(n,"exit",e)})})}function ooe(e,t,n){var r=xL(e.children),s=soe(t,r);return Object.keys(s).forEach(function(i){var o=s[i];if(g.isValidElement(o)){var l=i in t,c=i in r,d=t[i],m=g.isValidElement(d)&&!d.props.in;c&&(!l||m)?s[i]=g.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:Sd(o,"exit",e),enter:Sd(o,"enter",e)}):!c&&l&&!m?s[i]=g.cloneElement(o,{in:!1}):c&&l&&g.isValidElement(d)&&(s[i]=g.cloneElement(o,{onExited:n.bind(null,o),in:d.props.in,exit:Sd(o,"exit",e),enter:Sd(o,"enter",e)}))}}),s}var loe=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},coe={component:"div",childFactory:function(t){return t}},yL=(function(e){DB(t,e);function t(r,s){var i;i=e.call(this,r,s)||this;var o=i.handleExited.bind(roe(i));return i.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},i}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(s,i){var o=i.children,l=i.handleExited,c=i.firstRender;return{children:c?ioe(s,l):ooe(s,o,l),firstRender:!1}},n.handleExited=function(s,i){var o=xL(this.props.children);s.key in o||(s.props.onExited&&s.props.onExited(i),this.mounted&&this.setState(function(l){var c=ke({},l.children);return delete c[s.key],{children:c}}))},n.render=function(){var s=this.props,i=s.component,o=s.childFactory,l=$t(s,["component","childFactory"]),c=this.state.contextValue,d=loe(this.state.children).map(o);return delete l.appear,delete l.enter,delete l.exit,i===null?nt.createElement(Gb.Provider,{value:c},d):nt.createElement(Gb.Provider,{value:c},nt.createElement(i,l,d))},t})(nt.Component);yL.propTypes={};yL.defaultProps=coe;function OB(e){return parseInt(g.version,10)>=19?e?.props?.ref||null:e?.ref||null}const doe=e=>e.scrollTop;function DI(e,t){const{timeout:n,easing:r,style:s={}}=e;return{duration:s.transitionDuration??(typeof n=="number"?n:n[t.mode]||0),easing:s.transitionTimingFunction??(typeof r=="object"?r[t.mode]:r),delay:s.transitionDelay}}const uoe={entering:{opacity:1},entered:{opacity:1}},moe=g.forwardRef(function(t,n){const r=ro(),s={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:i,appear:o=!0,children:l,easing:c,in:d,onEnter:m,onEntered:h,onEntering:p,onExit:b,onExited:v,onExiting:x,style:w,timeout:j=s,TransitionComponent:C=fl,...S}=t,_=g.useRef(null),E=Ji(_,OB(l),n),A=q=>ae=>{if(q){const K=_.current;ae===void 0?q(K):q(K,ae)}},T=A(p),R=A((q,ae)=>{doe(q);const K=DI({style:w,timeout:j,easing:c},{mode:"enter"});q.style.webkitTransition=r.transitions.create("opacity",K),q.style.transition=r.transitions.create("opacity",K),m&&m(q,ae)}),U=A(h),W=A(x),I=A(q=>{const ae=DI({style:w,timeout:j,easing:c},{mode:"exit"});q.style.webkitTransition=r.transitions.create("opacity",ae),q.style.transition=r.transitions.create("opacity",ae),b&&b(q)}),M=A(v),H=q=>{i&&i(_.current,q)};return a.jsx(C,{appear:o,in:d,nodeRef:_,onEnter:R,onEntered:U,onEntering:T,onExit:I,onExited:M,onExiting:W,addEndListener:H,timeout:j,...S,children:(q,{ownerState:ae,...K})=>g.cloneElement(l,{style:{opacity:0,visibility:q==="exited"&&!d?"hidden":void 0,...uoe[q],...w,...l.props.style},ref:E,...K})})});function foe(e){return xa("MuiBackdrop",e)}Zn("MuiBackdrop",["root","invisible"]);const hoe=e=>{const{classes:t,invisible:n}=e;return pa({root:["root",n&&"invisible"]},foe,t)},goe=kt("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),poe=g.forwardRef(function(t,n){const r=Ac({props:t,name:"MuiBackdrop"}),{children:s,className:i,component:o="div",invisible:l=!1,open:c,components:d={},componentsProps:m={},slotProps:h={},slots:p={},TransitionComponent:b,transitionDuration:v,...x}=r,w={...r,component:o,invisible:l},j=hoe(w),C={transition:b,root:d.Root,...p},S={...m,...h},_={component:o,slots:C,slotProps:S},[E,A]=kI("root",{elementType:goe,externalForwardedProps:_,className:ct(j.root,i),ownerState:w}),[T,R]=kI("transition",{elementType:moe,externalForwardedProps:_,ownerState:w});return a.jsx(T,{in:c,timeout:v,...x,...R,children:a.jsx(E,{"aria-hidden":!0,...A,classes:j,ref:n,children:s})})}),Kd=mie;function xoe(e){return typeof e.main=="string"}function yoe(e,t=[]){if(!xoe(e))return!1;for(const n of t)if(!e.hasOwnProperty(n)||typeof e[n]!="string")return!1;return!0}function rp(e=[]){return([,t])=>t&&yoe(t,e)}function boe(e){return xa("MuiCircularProgress",e)}Zn("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","track","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const si=44,XA=Jp`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,ZA=Jp`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,voe=typeof XA!="string"?mL`
        animation: ${XA} 1.4s linear infinite;
      `:null,woe=typeof ZA!="string"?mL`
        animation: ${ZA} 1.4s ease-in-out infinite;
      `:null,Noe=e=>{const{classes:t,variant:n,color:r,disableShrink:s}=e,i={root:["root",n,`color${yn(r)}`],svg:["svg"],track:["track"],circle:["circle",`circle${yn(n)}`,s&&"circleDisableShrink"]};return pa(i,boe,t)},joe=kt("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${yn(n.color)}`]]}})(Kd(({theme:e})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("transform")}},{props:{variant:"indeterminate"},style:voe||{animation:`${XA} 1.4s linear infinite`}},...Object.entries(e.palette).filter(rp()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}}))]}))),Coe=kt("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),Soe=kt("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${yn(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})(Kd(({theme:e})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink,style:woe||{animation:`${ZA} 1.4s ease-in-out infinite`}}]}))),_oe=kt("circle",{name:"MuiCircularProgress",slot:"Track"})(Kd(({theme:e})=>({stroke:"currentColor",opacity:(e.vars||e).palette.action.activatedOpacity}))),bL=g.forwardRef(function(t,n){const r=Ac({props:t,name:"MuiCircularProgress"}),{className:s,color:i="primary",disableShrink:o=!1,enableTrackSlot:l=!1,size:c=40,style:d,thickness:m=3.6,value:h=0,variant:p="indeterminate",...b}=r,v={...r,color:i,disableShrink:o,size:c,thickness:m,value:h,variant:p,enableTrackSlot:l},x=Noe(v),w={},j={},C={};if(p==="determinate"){const S=2*Math.PI*((si-m)/2);w.strokeDasharray=S.toFixed(3),C["aria-valuenow"]=Math.round(h),w.strokeDashoffset=`${((100-h)/100*S).toFixed(3)}px`,j.transform="rotate(-90deg)"}return a.jsx(joe,{className:ct(x.root,s),style:{width:c,height:c,...j,...d},ownerState:v,ref:n,role:"progressbar",...C,...b,children:a.jsxs(Coe,{className:x.svg,ownerState:v,viewBox:`${si/2} ${si/2} ${si} ${si}`,children:[l?a.jsx(_oe,{className:x.track,ownerState:v,cx:si,cy:si,r:(si-m)/2,fill:"none",strokeWidth:m,"aria-hidden":"true"}):null,a.jsx(Soe,{className:x.circle,style:w,ownerState:v,cx:si,cy:si,r:(si-m)/2,fill:"none",strokeWidth:m})]})})});function MB(e){return a.jsx(poe,{sx:t=>({color:"#fff",zIndex:t.zIndex.drawer+1}),open:e,children:a.jsx(bL,{color:"inherit"})})}var Ya={},my={},OI;function Aoe(){if(OI)return my;OI=1,Object.defineProperty(my,"__esModule",{value:!0});function e(t,n){return t.reduce((r,s)=>{const i=String(s[n]);return r[i]||(r[i]=[]),r[i].push(s),r},{})}return my.default=e,my}var fy={},MI;function Eoe(){if(MI)return fy;MI=1,Object.defineProperty(fy,"__esModule",{value:!0});function e(t,n){return t.replace(/{([^{}]*)}/g,(r,s)=>{const i=n[s];return typeof i=="string"||typeof i=="number"?i.toString():r})}return fy.default=e,fy}var hy={},II;function Toe(){if(II)return hy;II=1,Object.defineProperty(hy,"__esModule",{value:!0});const e=[{countryNameEn:"Andorra",countryNameLocal:"Andorra",countryCode:"AD",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"ca",officialLanguageNameEn:"Catalan, Valencian",officialLanguageNameLocal:"Catal, Valenci",countryCallingCode:"376",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Afghanistan",countryNameLocal:"     ,   ",countryCode:"AF",currencyCode:"AFN",currencyNameEn:"Afghan afghani",tinType:"",tinName:"",officialLanguageCode:"fa",officialLanguageNameEn:"Persian",officialLanguageNameLocal:"",countryCallingCode:"93",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Antigua and Barbuda",countryNameLocal:"Antigua and Barbuda",countryCode:"AG",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1268",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Anguilla",countryNameLocal:"Anguilla",countryCode:"AI",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1264",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Albania",countryNameLocal:"Shqipria",countryCode:"AL",currencyCode:"ALL",currencyNameEn:"Albanian lek",tinType:"NIPT",tinName:"Numri i Identifikimit pr Personin e Tatueshm",officialLanguageCode:"sq",officialLanguageNameEn:"Albanian",officialLanguageNameLocal:"Shqip",countryCallingCode:"355",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Armenia",countryNameLocal:"",countryCode:"AM",currencyCode:"AMD",currencyNameEn:"Armenian dram",tinType:"",tinName:"",officialLanguageCode:"hy",officialLanguageNameEn:"Armenian",officialLanguageNameLocal:"",countryCallingCode:"374",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Angola",countryNameLocal:"Angola",countryCode:"AO",currencyCode:"AOA",currencyNameEn:"Angolan kwanza",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"244",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Antarctica",countryNameLocal:"Antarctica, Antrtico, Antarctique, ",countryCode:"AQ",currencyCode:"",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"672",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Argentina",countryNameLocal:"Argentina",countryCode:"AR",currencyCode:"ARS",currencyNameEn:"Argentine peso",tinType:"CUIT",tinName:"Cdigo nico de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"54",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"American Samoa",countryNameLocal:"American Samoa",countryCode:"AS",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1684",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Austria",countryNameLocal:"sterreich",countryCode:"AT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"UID",tinName:"Umsatzsteuer-Identifikationsnummer",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"43",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Australia",countryNameLocal:"Australia",countryCode:"AU",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"ABN",tinName:"Australian Business Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"61",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Aruba",countryNameLocal:"Aruba",countryCode:"AW",currencyCode:"AWG",currencyNameEn:"Aruban florin",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"297",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"land Islands",countryNameLocal:"land",countryCode:"AX",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"sv",officialLanguageNameEn:"Swedish",officialLanguageNameLocal:"Svenska",countryCallingCode:"358",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Azerbaijan",countryNameLocal:"Azrbaycan",countryCode:"AZ",currencyCode:"AZN",currencyNameEn:"Azerbaijani manat",tinType:"",tinName:"",officialLanguageCode:"az",officialLanguageNameEn:"Azerbaijani",officialLanguageNameLocal:"azrbaycan dili",countryCallingCode:"994",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Bosnia and Herzegovina",countryNameLocal:"Bosna i Hercegovina",countryCode:"BA",currencyCode:"BAM",currencyNameEn:"Bosnia and Herzegovina convertible mark",tinType:"",tinName:"",officialLanguageCode:"bs",officialLanguageNameEn:"Bosnian",officialLanguageNameLocal:"bosanski jezik",countryCallingCode:"387",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Barbados",countryNameLocal:"Barbados",countryCode:"BB",currencyCode:"BBD",currencyNameEn:"Barbados dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1246",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bangladesh",countryNameLocal:" ",countryCode:"BD",currencyCode:"BDT",currencyNameEn:"Bangladeshi taka",tinType:"",tinName:"",officialLanguageCode:"bn",officialLanguageNameEn:"Bengali",officialLanguageNameLocal:"",countryCallingCode:"880",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Belgium",countryNameLocal:"Belgi, Belgique, Belgien",countryCode:"BE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"n TVABTW-nr Mwst-nr",tinName:"BTW identificatienummer / Numro de TVA",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"32",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Burkina Faso",countryNameLocal:"Burkina Faso",countryCode:"BF",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"226",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Bulgaria",countryNameLocal:"",countryCode:"BG",currencyCode:"BGN",currencyNameEn:"Bulgarian lev",tinType:" ",tinName:"   ",officialLanguageCode:"bg",officialLanguageNameEn:"Bulgarian",officialLanguageNameLocal:" ",countryCallingCode:"359",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Bahrain",countryNameLocal:"",countryCode:"BH",currencyCode:"BHD",currencyNameEn:"Bahraini dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"973",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Burundi",countryNameLocal:"Burundi",countryCode:"BI",currencyCode:"BIF",currencyNameEn:"Burundian franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"257",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Benin",countryNameLocal:"Bnin",countryCode:"BJ",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"229",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Saint Barthlemy",countryNameLocal:"Saint-Barthlemy",countryCode:"BL",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"590",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bermuda",countryNameLocal:"Bermuda",countryCode:"BM",currencyCode:"BMD",currencyNameEn:"Bermudian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1441",areaCodes:[],region:"North America",flag:""},{countryNameEn:"Brunei Darussalam",countryNameLocal:"Brunei Darussalam",countryCode:"BN",currencyCode:"BND",currencyNameEn:"Brunei dollar",tinType:"",tinName:"",officialLanguageCode:"ms",officialLanguageNameEn:"Malay",officialLanguageNameLocal:"Bahasa Melayu,  ",countryCallingCode:"673",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Bolivia (Plurinational State of)",countryNameLocal:"Bolivia, Bulibiya, Volvia, Wuliwya",countryCode:"BO",currencyCode:"BOP",currencyNameEn:"",tinType:"NIT",tinName:"Nmero de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"591",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bonaire, Sint Eustatius and Saba",countryNameLocal:"Caribisch Nederland",countryCode:"BQ",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"5997",areaCodes:[],region:"Unknown",flag:""},{countryNameEn:"Brazil",countryNameLocal:"Brasil",countryCode:"BR",currencyCode:"BRL",currencyNameEn:"Brazilian real",tinType:"CNPJ",tinName:"Cadastro Nacional de Pessoa Jurdica",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"55",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bhutan",countryNameLocal:"",countryCode:"BT",currencyCode:"BTN",currencyNameEn:"Bhutanese ngultrum",tinType:"",tinName:"",officialLanguageCode:"dz",officialLanguageNameEn:"Dzongkha",officialLanguageNameLocal:"",countryCallingCode:"975",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Bouvet Island",countryNameLocal:"Bouvetya",countryCode:"BV",currencyCode:"NOK",currencyNameEn:"Norwegian krone",tinType:"",tinName:"",officialLanguageCode:"no",officialLanguageNameEn:"Norwegian",officialLanguageNameLocal:"Norsk",countryCallingCode:"47",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Botswana",countryNameLocal:"Botswana",countryCode:"BW",currencyCode:"BWP",currencyNameEn:"Botswana pula",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"267",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Belarus",countryNameLocal:"",countryCode:"BY",currencyCode:"BYR",currencyNameEn:"",tinType:" (UNP)",tinName:"  ",officialLanguageCode:"be",officialLanguageNameEn:"Belarusian",officialLanguageNameLocal:" ",countryCallingCode:"375",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Belize",countryNameLocal:"Belize",countryCode:"BZ",currencyCode:"BZD",currencyNameEn:"Belize dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"501",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Canada",countryNameLocal:"Canada",countryCode:"CA",currencyCode:"CAD",currencyNameEn:"Canadian dollar",tinType:"BN / NE",tinName:"Business Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:["403","587","780","825","236","250","604","672","778","204","431","506","709","782","902","226","249","289","343","365","416","437","519","548","613","647","705","807","905","367","418","438","450","514","579","581","819","873","306","639","867"],region:"North America",flag:""},{countryNameEn:"Switzerland",countryNameLocal:"Schweiz, Suisse, Svizzera, Svizra",countryCode:"CH",currencyCode:"CHF",currencyNameEn:"Swiss franc",tinType:"MWST/TVA/IVA",tinName:"Mehrwertsteuernummer",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"41",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Cte d'Ivoire",countryNameLocal:"Cte d'Ivoire",countryCode:"CI",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"225",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Chile",countryNameLocal:"Chile",countryCode:"CL",currencyCode:"CLP",currencyNameEn:"Chilean peso",tinType:"RUT",tinName:"Rol nico Tributario",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"56",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Cameroon",countryNameLocal:"Cameroun, Cameroon",countryCode:"CM",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"237",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"China",countryNameLocal:"",countryCode:"CN",currencyCode:"CNY",currencyNameEn:"Renminbi (Chinese) yuan",tinType:"",tinName:"",officialLanguageCode:"zh-hans",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"86",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Colombia",countryNameLocal:"Colombia",countryCode:"CO",currencyCode:"COP",currencyNameEn:"Colombian peso",tinType:"NIT",tinName:"Nmero De Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"57",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Costa Rica",countryNameLocal:"Costa Rica",countryCode:"CR",currencyCode:"CRC",currencyNameEn:"Costa Rican colon",tinType:"",tinName:"Cdula Jurdica",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"506",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Cuba",countryNameLocal:"Cuba",countryCode:"CU",currencyCode:"CUC",currencyNameEn:"Cuban convertible peso",tinType:"",tinName:"",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"53",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Cabo Verde",countryNameLocal:"Cabo Verde",countryCode:"CV",currencyCode:"CVE",currencyNameEn:"Cape Verdean escudo",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"238",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Curaao",countryNameLocal:"Curaao",countryCode:"CW",currencyCode:"ANG",currencyNameEn:"Netherlands Antillean guilder",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"599",areaCodes:[],region:"Unknown",flag:""},{countryNameEn:"Christmas Island",countryNameLocal:"Christmas Island",countryCode:"CX",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"61",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Cyprus",countryNameLocal:", Kibris",countryCode:"CY",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"  ...",officialLanguageCode:"el",officialLanguageNameEn:"Greek, Modern (1453-)",officialLanguageNameLocal:"",countryCallingCode:"357",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Germany",countryNameLocal:"Deutschland",countryCode:"DE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"USt-IdNr.",tinName:"Umsatzsteuer-Identifikationsnummer",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"49",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Djibouti",countryNameLocal:"Djibouti, , Jabuuti, Gabuutih",countryCode:"DJ",currencyCode:"DJF",currencyNameEn:"Djiboutian franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"253",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Denmark",countryNameLocal:"Danmark",countryCode:"DK",currencyCode:"DKK",currencyNameEn:"Danish krone",tinType:"CVR",tinName:"Momsregistreringsnummer",officialLanguageCode:"da",officialLanguageNameEn:"Danish",officialLanguageNameLocal:"dansk",countryCallingCode:"45",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Dominica",countryNameLocal:"Dominica",countryCode:"DM",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"767",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Algeria",countryNameLocal:"",countryCode:"DZ",currencyCode:"DZD",currencyNameEn:"Algerian dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"213",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Ecuador",countryNameLocal:"Ecuador",countryCode:"EC",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"RUC",tinName:"Nmero de Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"593",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Estonia",countryNameLocal:"Eesti",countryCode:"EE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"KMKR",tinName:"Kibemaksukohustuslase number",officialLanguageCode:"et",officialLanguageNameEn:"Estonian",officialLanguageNameLocal:"eesti, eesti keel",countryCallingCode:"372",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Egypt",countryNameLocal:"",countryCode:"EG",currencyCode:"EGP",currencyNameEn:"Egyptian pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"20",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Western Sahara",countryNameLocal:"Sahara Occidental",countryCode:"EH",currencyCode:"MAD",currencyNameEn:"Moroccan dirham",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"212",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Eritrea",countryNameLocal:", , Eritrea",countryCode:"ER",currencyCode:"ERN",currencyNameEn:"Eritrean nakfa",tinType:"",tinName:"",officialLanguageCode:"ti",officialLanguageNameEn:"Tigrinya",officialLanguageNameLocal:"",countryCallingCode:"291",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Spain",countryNameLocal:"Espaa",countryCode:"ES",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"NIF (CIF)",tinName:"Nmero de Identificacin Fiscal (formerly named Cdigo de Identificacin Fiscal)",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"34",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Ethiopia",countryNameLocal:", Itoophiyaa",countryCode:"ET",currencyCode:"ETB",currencyNameEn:"Ethiopian birr",tinType:"",tinName:"",officialLanguageCode:"am",officialLanguageNameEn:"Amharic",officialLanguageNameLocal:"",countryCallingCode:"251",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Finland",countryNameLocal:"Suomi",countryCode:"FI",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"ALV nro",tinName:"Arvonlisveronumero",officialLanguageCode:"fi",officialLanguageNameEn:"Finnish",officialLanguageNameLocal:"suomi, suomen kieli",countryCallingCode:"358",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Fiji",countryNameLocal:"Fiji",countryCode:"FJ",currencyCode:"FJD",currencyNameEn:"Fiji dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"679",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Micronesia (Federated States of)",countryNameLocal:"Micronesia",countryCode:"FM",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"691",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"France",countryNameLocal:"France",countryCode:"FR",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"n TVA",tinName:"Numro d'identification  la taxe sur la valeur ajoute / Numro de TVA intracommunautaire",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"33",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Gabon",countryNameLocal:"Gabon",countryCode:"GA",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"241",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Grenada",countryNameLocal:"Grenada",countryCode:"GD",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1473",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Georgia",countryNameLocal:"",countryCode:"GE",currencyCode:"GEL",currencyNameEn:"Georgian lari",tinType:"",tinName:"",officialLanguageCode:"ka",officialLanguageNameEn:"Georgian",officialLanguageNameLocal:"",countryCallingCode:"995",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"French Guiana",countryNameLocal:"Guyane franaise",countryCode:"GF",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"594",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Guernsey",countryNameLocal:"Guernsey",countryCode:"GG",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Ghana",countryNameLocal:"Ghana",countryCode:"GH",currencyCode:"GHS",currencyNameEn:"Ghanaian cedi",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"233",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Gibraltar",countryNameLocal:"Gibraltar",countryCode:"GI",currencyCode:"GIP",currencyNameEn:"Gibraltar pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"350",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Greenland",countryNameLocal:"Kalaallit Nunaat, Grnland",countryCode:"GL",currencyCode:"DKK",currencyNameEn:"Danish krone",tinType:"",tinName:"",officialLanguageCode:"kl",officialLanguageNameEn:"Kalaallisut, Greenlandic",officialLanguageNameLocal:"kalaallisut, kalaallit oqaasii",countryCallingCode:"299",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Guinea",countryNameLocal:"Guine",countryCode:"GN",currencyCode:"GNF",currencyNameEn:"Guinean franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"224",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Guadeloupe",countryNameLocal:"Guadeloupe",countryCode:"GP",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"590",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Equatorial Guinea",countryNameLocal:"Guiena ecuatorial, Guine quatoriale, Guin Equatorial",countryCode:"GQ",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"240",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Greece",countryNameLocal:"",countryCode:"GR",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"el",officialLanguageNameEn:"Greek, Modern (1453-)",officialLanguageNameLocal:"",countryCallingCode:"30",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"South Georgia and the South Sandwich Islands",countryNameLocal:"South Georgia and the South Sandwich Islands",countryCode:"GS",currencyCode:"",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"500",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Guatemala",countryNameLocal:"Guatemala",countryCode:"GT",currencyCode:"GTQ",currencyNameEn:"Guatemalan quetzal",tinType:"NIT",tinName:"Nmero de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"502",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Guam",countryNameLocal:"Guam, Guhn",countryCode:"GU",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Guinea-Bissau",countryNameLocal:"Guin-Bissau",countryCode:"GW",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"245",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Guyana",countryNameLocal:"Guyana",countryCode:"GY",currencyCode:"GYD",currencyNameEn:"Guyanese dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"592",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Hong Kong",countryNameLocal:", Hong Kong",countryCode:"HK",currencyCode:"HKD",currencyNameEn:"Hong Kong dollar",tinType:"",tinName:"",officialLanguageCode:"zh-hant",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"852",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Honduras",countryNameLocal:"Honduras",countryCode:"HN",currencyCode:"HNL",currencyNameEn:"Honduran lempira",tinType:"RTN",tinName:"Registro Tributario Nacional",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"504",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Croatia",countryNameLocal:"Hrvatska",countryCode:"HR",currencyCode:"HRK",currencyNameEn:"Croatian kuna",tinType:"PDV-ID; OIB",tinName:"PDV Id. Broj OIB",officialLanguageCode:"hr",officialLanguageNameEn:"Croatian",officialLanguageNameLocal:"hrvatski jezik",countryCallingCode:"385",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Haiti",countryNameLocal:"Hati, Ayiti",countryCode:"HT",currencyCode:"HTG",currencyNameEn:"Haitian gourde",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"509",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Hungary",countryNameLocal:"Magyarorszg",countryCode:"HU",currencyCode:"HUF",currencyNameEn:"Hungarian forint",tinType:"ANUM",tinName:"Kzssgi adszm",officialLanguageCode:"hu",officialLanguageNameEn:"Hungarian",officialLanguageNameLocal:"magyar",countryCallingCode:"36",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Indonesia",countryNameLocal:"Indonesia",countryCode:"ID",currencyCode:"IDR",currencyNameEn:"Indonesian rupiah",tinType:"NPWP",tinName:"Nomor Pokok Wajib Pajak",officialLanguageCode:"id",officialLanguageNameEn:"Indonesian",officialLanguageNameLocal:"Bahasa Indonesia",countryCallingCode:"62",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Ireland",countryNameLocal:"Ireland, ire",countryCode:"IE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"VAT or CBL",tinName:"Value added tax identification no.",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"353",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Israel",countryNameLocal:"",countryCode:"IL",currencyCode:"ILS",currencyNameEn:"Israeli new shekel",tinType:"",tinName:`'   / "`,officialLanguageCode:"he",officialLanguageNameEn:"Hebrew",officialLanguageNameLocal:"",countryCallingCode:"972",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Isle of Man",countryNameLocal:"Isle of Man",countryCode:"IM",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"India",countryNameLocal:", India",countryCode:"IN",currencyCode:"INR",currencyNameEn:"Indian rupee",tinType:"VAT TIN / CST TIN",tinName:"Value Added Tax - Taxpayer Identification Number / Central Sales Tax - Taxpayer Identification Number (In most states)Not applicable",officialLanguageCode:"hi",officialLanguageNameEn:"Hindi",officialLanguageNameLocal:", ",countryCallingCode:"91",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"British Indian Ocean Territories",countryNameLocal:"British Indian Ocean Territories",countryCode:"IO",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"246",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"Iraq",countryNameLocal:", Iraq",countryCode:"IQ",currencyCode:"IQD",currencyNameEn:"Iraqi dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"964",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Iran (Islamic Republic of)",countryNameLocal:"",countryCode:"IR",currencyCode:"IRR",currencyNameEn:"Iranian rial",tinType:"",tinName:"",officialLanguageCode:"fa",officialLanguageNameEn:"Persian",officialLanguageNameLocal:"",countryCallingCode:"98",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Iceland",countryNameLocal:"sland",countryCode:"IS",currencyCode:"ISK",currencyNameEn:"Icelandic krna",tinType:"VSK / VASK",tinName:"Virisaukaskattsnmer",officialLanguageCode:"is",officialLanguageNameEn:"Icelandic",officialLanguageNameLocal:"slenska",countryCallingCode:"354",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Italy",countryNameLocal:"Italia",countryCode:"IT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"P.IVA",tinName:"Partita IVA(IVA = Imposta sul Valore Aggiunto)",officialLanguageCode:"it",officialLanguageNameEn:"Italian",officialLanguageNameLocal:"Italiano",countryCallingCode:"39",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Jersey",countryNameLocal:"Jersey",countryCode:"JE",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Jamaica",countryNameLocal:"Jamaica",countryCode:"JM",currencyCode:"JMD",currencyNameEn:"Jamaican dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"876",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Jordan",countryNameLocal:"",countryCode:"JO",currencyCode:"JOD",currencyNameEn:"Jordanian dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"962",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Japan",countryNameLocal:"",countryCode:"JP",currencyCode:"JPY",currencyNameEn:"Japanese yen",tinType:"",tinName:"",officialLanguageCode:"ja",officialLanguageNameEn:"Japanese",officialLanguageNameLocal:" ()",countryCallingCode:"81",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Kenya",countryNameLocal:"Kenya",countryCode:"KE",currencyCode:"KES",currencyNameEn:"Kenyan shilling",tinType:"",tinName:"",officialLanguageCode:"sw",officialLanguageNameEn:"Swahili",officialLanguageNameLocal:"Kiswahili",countryCallingCode:"254",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Kyrgyzstan",countryNameLocal:", ",countryCode:"KG",currencyCode:"KGS",currencyNameEn:"Kyrgyzstani som",tinType:"",tinName:"",officialLanguageCode:"ky",officialLanguageNameEn:"Kirghiz, Kyrgyz",officialLanguageNameLocal:",  ",countryCallingCode:"996",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Cambodia",countryNameLocal:"",countryCode:"KH",currencyCode:"KHR",currencyNameEn:"Cambodian riel",tinType:"",tinName:"",officialLanguageCode:"km",officialLanguageNameEn:"Central Khmer",officialLanguageNameLocal:", , ",countryCallingCode:"855",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"North Korea",countryNameLocal:"",countryCode:"KP",currencyCode:"KPW",currencyNameEn:"North Korean won",tinType:"",tinName:"",officialLanguageCode:"ko",officialLanguageNameEn:"Korean",officialLanguageNameLocal:"",countryCallingCode:"850",areaCodes:[],region:"Asia",flag:""},{countryNameEn:"South Korea",countryNameLocal:"",countryCode:"KR",currencyCode:"KRW",currencyNameEn:"South Korean won",tinType:"",tinName:"",officialLanguageCode:"ko",officialLanguageNameEn:"Korean",officialLanguageNameLocal:"",countryCallingCode:"82",areaCodes:[],region:"Asia",flag:""},{countryNameEn:"Kiribati",countryNameLocal:"Kiribati",countryCode:"KI",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"686",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Saint Kitts and Nevis",countryNameLocal:"Saint Kitts and Nevis",countryCode:"KN",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1869",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Kuwait",countryNameLocal:"",countryCode:"KW",currencyCode:"KWD",currencyNameEn:"Kuwaiti dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"965",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Kazakhstan",countryNameLocal:", ",countryCode:"KZ",currencyCode:"KZT",currencyNameEn:"Kazakhstani tenge",tinType:"",tinName:"",officialLanguageCode:"kk",officialLanguageNameEn:"Kazakh",officialLanguageNameLocal:" ",countryCallingCode:"7",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Lebanon",countryNameLocal:", Liban",countryCode:"LB",currencyCode:"LBP",currencyNameEn:"Lebanese pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"961",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Saint Lucia",countryNameLocal:"Saint Lucia",countryCode:"LC",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1758",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Liechtenstein",countryNameLocal:"Liechtenstein",countryCode:"LI",currencyCode:"CHF",currencyNameEn:"Swiss franc",tinType:"",tinName:"",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"423",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Sri Lanka",countryNameLocal:" , ",countryCode:"LK",currencyCode:"LKR",currencyNameEn:"Sri Lankan rupee",tinType:"",tinName:"",officialLanguageCode:"si",officialLanguageNameEn:"Sinhala, Sinhalese",officialLanguageNameLocal:"",countryCallingCode:"94",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Liberia",countryNameLocal:"Liberia",countryCode:"LR",currencyCode:"LRD",currencyNameEn:"Liberian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"231",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Lesotho",countryNameLocal:"Lesotho",countryCode:"LS",currencyCode:"LSL",currencyNameEn:"Lesotho loti",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"266",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Lithuania",countryNameLocal:"Lietuva",countryCode:"LT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"PVM kodas",tinName:"PVM (abbrev. Pridtins verts mokestis) moktojo kodas",officialLanguageCode:"lt",officialLanguageNameEn:"Lithuanian",officialLanguageNameLocal:"lietuvi kalba",countryCallingCode:"370",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Luxembourg",countryNameLocal:"Ltzebuerg, Luxembourg, Luxemburg",countryCode:"LU",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"No. TVA",tinName:"Numro d'identification  la taxe sur la valeur ajoute",officialLanguageCode:"lb",officialLanguageNameEn:"Luxembourgish, Letzeburgesch",officialLanguageNameLocal:"Ltzebuergesch",countryCallingCode:"352",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Latvia",countryNameLocal:"Latvija",countryCode:"LV",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"PVN",tinName:"Pievienots vrtbas nodoka (PVN) reistrcijas numurs",officialLanguageCode:"lv",officialLanguageNameEn:"Latvian",officialLanguageNameLocal:"latvieu valoda",countryCallingCode:"371",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Libya",countryNameLocal:"",countryCode:"LY",currencyCode:"LYD",currencyNameEn:"Libyan dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"218",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Morocco",countryNameLocal:"Maroc, , ",countryCode:"MA",currencyCode:"MAD",currencyNameEn:"Moroccan dirham",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"212",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Monaco",countryNameLocal:"Monaco",countryCode:"MC",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"377",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Montenegro",countryNameLocal:"Crna Gora,  ",countryCode:"ME",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"srp",officialLanguageNameEn:" ",officialLanguageNameLocal:"",countryCallingCode:"382",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Saint Martin (French part)",countryNameLocal:"Saint-Martin",countryCode:"MF",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"590",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Madagascar",countryNameLocal:"Madagasikara, Madagascar",countryCode:"MG",currencyCode:"MGA",currencyNameEn:"Malagasy ariary",tinType:"",tinName:"",officialLanguageCode:"mg",officialLanguageNameEn:"Malagasy",officialLanguageNameLocal:"fiteny malagasy",countryCallingCode:"261",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Mali",countryNameLocal:"Mali",countryCode:"ML",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"223",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Myanmar",countryNameLocal:"",countryCode:"MM",currencyCode:"MMK",currencyNameEn:"Myanmar kyat",tinType:"",tinName:"",officialLanguageCode:"my",officialLanguageNameEn:"Burmese",officialLanguageNameLocal:"",countryCallingCode:"95",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Mongolia",countryNameLocal:" ",countryCode:"MN",currencyCode:"MNT",currencyNameEn:"Mongolian tgrg",tinType:"",tinName:"",officialLanguageCode:"mn",officialLanguageNameEn:"Mongolian",officialLanguageNameLocal:" ",countryCallingCode:"976",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Macao",countryNameLocal:", Macau",countryCode:"MO",currencyCode:"MOP",currencyNameEn:"Macanese pataca",tinType:"",tinName:"",officialLanguageCode:"zh-hant",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"853",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Martinique",countryNameLocal:"Martinique",countryCode:"MQ",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"596",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Mauritania",countryNameLocal:", Mauritanie",countryCode:"MR",currencyCode:"MRU",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"222",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Montserrat",countryNameLocal:"Montserrat",countryCode:"MS",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1664",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Malta",countryNameLocal:"Malta",countryCode:"MT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"Vat No.",tinName:"Vat reg. no.",officialLanguageCode:"mt",officialLanguageNameEn:"Maltese",officialLanguageNameLocal:"Malti",countryCallingCode:"356",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Mauritius",countryNameLocal:"Maurice, Mauritius",countryCode:"MU",currencyCode:"MUR",currencyNameEn:"Mauritian rupee",tinType:"",tinName:"",officialLanguageCode:"mfe",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"230",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Maldives",countryNameLocal:"",countryCode:"MV",currencyCode:"MVR",currencyNameEn:"Maldivian rufiyaa",tinType:"",tinName:"",officialLanguageCode:"dv",officialLanguageNameEn:"Divehi, Dhivehi, Maldivian",officialLanguageNameLocal:"",countryCallingCode:"960",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Malawi",countryNameLocal:"Malawi",countryCode:"MW",currencyCode:"MWK",currencyNameEn:"Malawian kwacha",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"265",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Mexico",countryNameLocal:"Mxico",countryCode:"MX",currencyCode:"MXN",currencyNameEn:"Mexican peso",tinType:"RFC",tinName:"Registro Federal de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"52",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Malaysia",countryNameLocal:"",countryCode:"MY",currencyCode:"MYR",currencyNameEn:"Malaysian ringgit",tinType:"",tinName:"",officialLanguageCode:"ms",officialLanguageNameEn:"Malay",officialLanguageNameLocal:"Bahasa Melayu,  ",countryCallingCode:"60",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Mozambique",countryNameLocal:"Mozambique",countryCode:"MZ",currencyCode:"MZN",currencyNameEn:"Mozambican metical",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"258",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Namibia",countryNameLocal:"Namibia",countryCode:"NA",currencyCode:"NAD",currencyNameEn:"Namibian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"264",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"New Caledonia",countryNameLocal:"Nouvelle-Caldonie",countryCode:"NC",currencyCode:"XPF",currencyNameEn:"CFP franc (franc Pacifique)",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"687",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Norfolk Island",countryNameLocal:"Norfolk Island",countryCode:"NF",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"672",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Nigeria",countryNameLocal:"Nigeria",countryCode:"NG",currencyCode:"NGN",currencyNameEn:"Nigerian naira",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"234",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Nicaragua",countryNameLocal:"Nicaragua",countryCode:"NI",currencyCode:"NIO",currencyNameEn:"Nicaraguan crdoba",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"505",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Norway",countryNameLocal:"Norge, Noreg",countryCode:"NO",currencyCode:"NOK",currencyNameEn:"Norwegian krone",tinType:"Orgnr",tinName:"Organisasjonsnummer",officialLanguageCode:"nb",officialLanguageNameEn:"Norwegian Bokml",officialLanguageNameLocal:"Norsk Bokml",countryCallingCode:"47",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Nepal",countryNameLocal:"",countryCode:"NP",currencyCode:"NPR",currencyNameEn:"Nepalese rupee",tinType:"",tinName:"",officialLanguageCode:"ne",officialLanguageNameEn:"Nepali",officialLanguageNameLocal:"",countryCallingCode:"977",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Nauru",countryNameLocal:"Nauru",countryCode:"NR",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"na",officialLanguageNameEn:"Nauru",officialLanguageNameLocal:"Dorerin Naoero",countryCallingCode:"674",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Niue",countryNameLocal:"Niue",countryCode:"NU",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"niu",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"683",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"New Zealand",countryNameLocal:"New Zealand",countryCode:"NZ",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"NZBN",tinName:"NZ Business Number",officialLanguageCode:"mi",officialLanguageNameEn:"Maori",officialLanguageNameLocal:"te reo Mori",countryCallingCode:"64",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Oman",countryNameLocal:" ",countryCode:"OM",currencyCode:"OMR",currencyNameEn:"Omani rial",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"968",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Panama",countryNameLocal:"Panama",countryCode:"PA",currencyCode:"PAB",currencyNameEn:"Panamanian balboa",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"507",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Peru",countryNameLocal:"Per",countryCode:"PE",currencyCode:"PEN",currencyNameEn:"Peruvian sol",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"51",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"French Polynesia",countryNameLocal:"Polynsie franaise",countryCode:"PF",currencyCode:"XPF",currencyNameEn:"CFP franc (franc Pacifique)",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"689",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Papua New Guinea",countryNameLocal:"Papua New Guinea",countryCode:"PG",currencyCode:"PGK",currencyNameEn:"Papua New Guinean kina",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"675",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Pakistan",countryNameLocal:"",countryCode:"PK",currencyCode:"PKR",currencyNameEn:"Pakistani rupee",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"92",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Poland",countryNameLocal:"Polska",countryCode:"PL",currencyCode:"PLN",currencyNameEn:"Polish zoty",tinType:"NIP",tinName:"numer identyfikacji podatkowej",officialLanguageCode:"pl",officialLanguageNameEn:"Polish",officialLanguageNameLocal:"jzyk polski, polszczyzna",countryCallingCode:"48",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Saint Pierre and Miquelon",countryNameLocal:"Saint-Pierre-et-Miquelon",countryCode:"PM",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"508",areaCodes:[],region:"North America",flag:""},{countryNameEn:"Pitcairn",countryNameLocal:"Pitcairn",countryCode:"PN",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"64",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Puerto Rico",countryNameLocal:"Puerto Rico",countryCode:"PR",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"1",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Palestine, State of",countryNameLocal:"Palestinian Territory",countryCode:"PS",currencyCode:"",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"970",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Portugal",countryNameLocal:"Portugal",countryCode:"PT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"NIPC",tinName:"Nmero de Identificao de Pessoa Coletiva (NIPC)",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"351",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Palau",countryNameLocal:"Palau",countryCode:"PW",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"680",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Paraguay",countryNameLocal:"Paraguay",countryCode:"PY",currencyCode:"PYG",currencyNameEn:"Paraguayan guaran",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"595",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Qatar",countryNameLocal:"",countryCode:"QA",currencyCode:"QAR",currencyNameEn:"Qatari riyal",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"974",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Runion",countryNameLocal:"La Runion",countryCode:"RE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"262",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Romania",countryNameLocal:"Romnia",countryCode:"RO",currencyCode:"RON",currencyNameEn:"Romanian leu",tinType:"CIF",tinName:"Codul de identificare fiscal",officialLanguageCode:"ro",officialLanguageNameEn:"Romanian, Moldavian, Moldovan",officialLanguageNameLocal:"Romn",countryCallingCode:"40",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Serbia",countryNameLocal:"",countryCode:"RS",currencyCode:"RSD",currencyNameEn:"Serbian dinar",tinType:"PIB",tinName:"Poreski identifikacioni broj",officialLanguageCode:"sr",officialLanguageNameEn:"Serbian",officialLanguageNameLocal:" ",countryCallingCode:"381",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Russia",countryNameLocal:"",countryCode:"RU",currencyCode:"RUB",currencyNameEn:"Russian ruble",tinType:"",tinName:"  ",officialLanguageCode:"ru",officialLanguageNameEn:"Russian",officialLanguageNameLocal:"",countryCallingCode:"7",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Rwanda",countryNameLocal:"Rwanda",countryCode:"RW",currencyCode:"RWF",currencyNameEn:"Rwandan franc",tinType:"",tinName:"",officialLanguageCode:"rw",officialLanguageNameEn:"Kinyarwanda",officialLanguageNameLocal:"Ikinyarwanda",countryCallingCode:"250",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Saudi Arabia",countryNameLocal:"",countryCode:"SA",currencyCode:"SAR",currencyNameEn:"Saudi riyal",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"966",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Solomon Islands",countryNameLocal:"Solomon Islands",countryCode:"SB",currencyCode:"SBD",currencyNameEn:"Solomon Islands dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"677",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Seychelles",countryNameLocal:"Seychelles",countryCode:"SC",currencyCode:"SCR",currencyNameEn:"Seychelles rupee",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"248",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Sweden",countryNameLocal:"Sverige",countryCode:"SE",currencyCode:"SEK",currencyNameEn:"Swedish krona/kronor",tinType:"Momsnr.",tinName:"VAT-nummer",officialLanguageCode:"sv",officialLanguageNameEn:"Swedish",officialLanguageNameLocal:"Svenska",countryCallingCode:"46",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Singapore",countryNameLocal:"Singapore",countryCode:"SG",currencyCode:"SGD",currencyNameEn:"Singapore dollar",tinType:"",tinName:"",officialLanguageCode:"zh-hans",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"65",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Saint Helena, Ascension and Tristan da Cunha",countryNameLocal:"Saint Helena",countryCode:"SH",currencyCode:"SHP",currencyNameEn:"Saint Helena pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"290",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Slovenia",countryNameLocal:"Slovenija",countryCode:"SI",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"ID za DDV",tinName:"Davna tevilka",officialLanguageCode:"sl",officialLanguageNameEn:"Slovenian",officialLanguageNameLocal:"Slovenski Jezik, Slovenina",countryCallingCode:"386",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Svalbard and Jan Mayen",countryNameLocal:"Svalbard and Jan Mayen",countryCode:"SJ",currencyCode:"NOK",currencyNameEn:"Norwegian krone",tinType:"",tinName:"",officialLanguageCode:"no",officialLanguageNameEn:"Norwegian",officialLanguageNameLocal:"Norsk",countryCallingCode:"4779",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Slovakia",countryNameLocal:"Slovensko",countryCode:"SK",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"I DPH",tinName:"Identifikan slo pre da z pridanej hodnoty",officialLanguageCode:"sk",officialLanguageNameEn:"Slovak",officialLanguageNameLocal:"Slovenina, Slovensk Jazyk",countryCallingCode:"421",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Sierra Leone",countryNameLocal:"Sierra Leone",countryCode:"SL",currencyCode:"SLL",currencyNameEn:"Sierra Leonean leone",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"232",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Republic of San Marino",countryNameLocal:"Repubblica di San Marino",countryCode:"SM",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"C.O.E.",tinName:"Codice operatore economico",officialLanguageCode:"it",officialLanguageNameEn:"Italian",officialLanguageNameLocal:"Italiano",countryCallingCode:"378",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Senegal",countryNameLocal:"Sngal",countryCode:"SN",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"221",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Somalia",countryNameLocal:"Somalia, ",countryCode:"SO",currencyCode:"SOS",currencyNameEn:"Somali shilling",tinType:"",tinName:"",officialLanguageCode:"so",officialLanguageNameEn:"Somali",officialLanguageNameLocal:"Soomaaliga, af Soomaali",countryCallingCode:"252",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Suriname",countryNameLocal:"Suriname",countryCode:"SR",currencyCode:"SRD",currencyNameEn:"Surinamese dollar",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"597",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"South Sudan",countryNameLocal:"South Sudan",countryCode:"SS",currencyCode:"SSP",currencyNameEn:"South Sudanese pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"211",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Sao Tome and Principe",countryNameLocal:"So Tom e Prncipe",countryCode:"ST",currencyCode:"STN",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"239",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"El Salvador",countryNameLocal:"El Salvador",countryCode:"SV",currencyCode:"SVC",currencyNameEn:"Salvadoran coln",tinType:"NIT",tinName:"Nmero de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"503",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Sint Maarten (Dutch part)",countryNameLocal:"Sint Maarten",countryCode:"SX",currencyCode:"ANG",currencyNameEn:"Netherlands Antillean guilder",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"1721",areaCodes:[],region:"Unknown",flag:""},{countryNameEn:"Syrian Arab Republic",countryNameLocal:", Sriyya",countryCode:"SY",currencyCode:"SYP",currencyNameEn:"Syrian pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"963",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Chad",countryNameLocal:"Tchad, ",countryCode:"TD",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"235",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Togo",countryNameLocal:"Togo",countryCode:"TG",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"228",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Thailand",countryNameLocal:"",countryCode:"TH",currencyCode:"THB",currencyNameEn:"Thai baht",tinType:"",tinName:"",officialLanguageCode:"th",officialLanguageNameEn:"Thai",officialLanguageNameLocal:"",countryCallingCode:"66",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Tajikistan",countryNameLocal:",",countryCode:"TJ",currencyCode:"TJS",currencyNameEn:"Tajikistani somoni",tinType:"",tinName:"",officialLanguageCode:"tg",officialLanguageNameEn:"Tajik",officialLanguageNameLocal:", toik, ",countryCallingCode:"992",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Tokelau",countryNameLocal:"Tokelau",countryCode:"TK",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"tkl",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"690",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Timor-Leste",countryNameLocal:"Timor-Leste, Timor Lorosa'e",countryCode:"TL",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"670",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Turkmenistan",countryNameLocal:"Trkmenistan",countryCode:"TM",currencyCode:"TMT",currencyNameEn:"Turkmenistan manat",tinType:"",tinName:"",officialLanguageCode:"tk",officialLanguageNameEn:"Turkmen",officialLanguageNameLocal:"Trkmen, ",countryCallingCode:"993",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Tunisia",countryNameLocal:", Tunisie",countryCode:"TN",currencyCode:"TND",currencyNameEn:"Tunisian dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"216",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Tonga",countryNameLocal:"Tonga",countryCode:"TO",currencyCode:"TOP",currencyNameEn:"Tongan paanga",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"676",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Turkey",countryNameLocal:"Trkiye",countryCode:"TR",currencyCode:"TRY",currencyNameEn:"Turkish lira",tinType:"KDV",tinName:"Vergi Kimlik Numaras",officialLanguageCode:"tr",officialLanguageNameEn:"Turkish",officialLanguageNameLocal:"Trke",countryCallingCode:"90",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Trinidad and Tobago",countryNameLocal:"Trinidad and Tobago",countryCode:"TT",currencyCode:"TTD",currencyNameEn:"Trinidad and Tobago dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"868",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Tuvalu",countryNameLocal:"Tuvalu",countryCode:"TV",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"688",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"United Republic of Tanzania",countryNameLocal:"Tanzania",countryCode:"TZ",currencyCode:"TZS",currencyNameEn:"Tanzanian shilling",tinType:"",tinName:"",officialLanguageCode:"sw",officialLanguageNameEn:"Swahili",officialLanguageNameLocal:"Kiswahili",countryCallingCode:"255",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Ukraine",countryNameLocal:"",countryCode:"UA",currencyCode:"UAH",currencyNameEn:"Ukrainian hryvnia",tinType:"",tinName:"   ",officialLanguageCode:"uk",officialLanguageNameEn:"Ukrainian",officialLanguageNameLocal:"",countryCallingCode:"380",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Uganda",countryNameLocal:"Uganda",countryCode:"UG",currencyCode:"UGX",currencyNameEn:"Ugandan shilling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"256",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"United States of America",countryNameLocal:"United States of America",countryCode:"US",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"EIN",tinName:"Tax Identification Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:[],region:"North America",flag:""},{countryNameEn:"Uruguay",countryNameLocal:"Uruguay",countryCode:"UY",currencyCode:"UYU",currencyNameEn:"Uruguayan peso",tinType:"RUT",tinName:"Registro nico Tributario",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"598",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Uzbekistan",countryNameLocal:"",countryCode:"UZ",currencyCode:"UZS",currencyNameEn:"Uzbekistan som",tinType:"",tinName:"   ",officialLanguageCode:"uz",officialLanguageNameEn:"Uzbek",officialLanguageNameLocal:"Ozbek, , ",countryCallingCode:"998",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Saint Vincent and the Grenadines",countryNameLocal:"Saint Vincent and the Grenadines",countryCode:"VC",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1784",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Venezuela (Bolivarian Republic of)",countryNameLocal:"Venezuela",countryCode:"VE",currencyCode:"VES",currencyNameEn:"",tinType:"RIF",tinName:"Registro de Informacion Fiscal",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"58",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Virgin Islands (British)",countryNameLocal:"British Virgin Islands",countryCode:"VG",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1284",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Virgin Islands (U.S.)",countryNameLocal:"United States Virgin Islands",countryCode:"VI",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1340",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Vietnam",countryNameLocal:"Vit Nam",countryCode:"VN",currencyCode:"VND",currencyNameEn:"Vietnamese ng",tinType:"",tinName:"",officialLanguageCode:"vi",officialLanguageNameEn:"Vietnamese",officialLanguageNameLocal:"Ting Vit",countryCallingCode:"84",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Vanuatu",countryNameLocal:"Vanuatu",countryCode:"VU",currencyCode:"VUV",currencyNameEn:"Vanuatu vatu",tinType:"",tinName:"",officialLanguageCode:"bi",officialLanguageNameEn:"Bislama",officialLanguageNameLocal:"Bislama",countryCallingCode:"678",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Wallis and Futuna",countryNameLocal:"Wallis-et-Futuna",countryCode:"WF",currencyCode:"XPF",currencyNameEn:"CFP franc (franc Pacifique)",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"681",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Samoa",countryNameLocal:"Samoa",countryCode:"WS",currencyCode:"WST",currencyNameEn:"Samoan tala",tinType:"",tinName:"",officialLanguageCode:"sm",officialLanguageNameEn:"Samoan",officialLanguageNameLocal:"gagana fa'a Samoa",countryCallingCode:"685",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Yemen",countryNameLocal:"",countryCode:"YE",currencyCode:"YER",currencyNameEn:"Yemeni rial",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"967",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Mayotte",countryNameLocal:"Mayotte",countryCode:"YT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"262",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"South Africa",countryNameLocal:"South Africa",countryCode:"ZA",currencyCode:"ZAR",currencyNameEn:"South African rand",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"27",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Zambia",countryNameLocal:"Zambia",countryCode:"ZM",currencyCode:"ZMW",currencyNameEn:"Zambian kwacha",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"260",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Zimbabwe",countryNameLocal:"Zimbabwe",countryCode:"ZW",currencyCode:"ZWL",currencyNameEn:"Zimbabwean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"263",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Eswatini",countryNameLocal:"Swaziland",countryCode:"SZ",currencyCode:"SZL",currencyNameEn:"Swazi lilangeni",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"268",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"North Macedonia",countryNameLocal:"",countryCode:"MK",currencyCode:"MKD",currencyNameEn:"Macedonian denar",tinType:"",tinName:"",officialLanguageCode:"mk",officialLanguageNameEn:"Macedonian",officialLanguageNameLocal:" ",countryCallingCode:"389",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Philippines",countryNameLocal:"Philippines",countryCode:"PH",currencyCode:"PHP",currencyNameEn:"Philippine peso",tinType:"TIN",tinName:"Tax Identification Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"63",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Netherlands",countryNameLocal:"Nederland",countryCode:"NL",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"Btw-nr.",tinName:"Btw-nummer",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"31",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"United Arab Emirates",countryNameLocal:"   ",countryCode:"AE",currencyCode:"AED",currencyNameEn:"United Arab Emirates dirham",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"971",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Republic of Moldova",countryNameLocal:"Moldova, ",countryCode:"MD",currencyCode:"MDL",currencyNameEn:"Moldovan leu",tinType:"",tinName:"",officialLanguageCode:"ro",officialLanguageNameEn:"Romanian, Moldavian, Moldovan",officialLanguageNameLocal:"Romn",countryCallingCode:"373",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Gambia",countryNameLocal:"The Gambia",countryCode:"GM",currencyCode:"GMD",currencyNameEn:"Gambian dalasi",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"220",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Dominican Republic",countryNameLocal:"Repblica Dominicana",countryCode:"DO",currencyCode:"DOP",currencyNameEn:"Dominican peso",tinType:"RNC",tinName:"Registro Nacional del Contribuyente",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"1",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Sudan",countryNameLocal:"",countryCode:"SD",currencyCode:"SDG",currencyNameEn:"Sudanese pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"249",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Lao People's Democratic Republic",countryNameLocal:"",countryCode:"LA",currencyCode:"LAK",currencyNameEn:"Lao kip",tinType:"",tinName:"",officialLanguageCode:"lo",officialLanguageNameEn:"Lao",officialLanguageNameLocal:"",countryCallingCode:"856",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Taiwan, Province of China",countryNameLocal:"Taiwan",countryCode:"TW",currencyCode:"TWD",currencyNameEn:"New Taiwan dollar",tinType:"",tinName:"",officialLanguageCode:"zh-hant",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"886",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Republic of the Congo",countryNameLocal:"Rpublique du Congo",countryCode:"CG",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"242",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Czechia",countryNameLocal:"esk republika",countryCode:"CZ",currencyCode:"CZK",currencyNameEn:"Czech koruna",tinType:"DI",tinName:"Daov identifikan slo",officialLanguageCode:"cs",officialLanguageNameEn:"Czech",officialLanguageNameLocal:"etina",countryCallingCode:"420",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"United Kingdom",countryNameLocal:"Great Britain",countryCode:"GB",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"VAT Reg No",tinName:"Value added tax registration number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Niger",countryNameLocal:"Niger",countryCode:"NE",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"227",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Democratic Republic of the Congo",countryNameLocal:"Democratic Republic of the Congo",countryCode:"CD",currencyCode:"CDF",currencyNameEn:"Congolese franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"243",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Commonwealth of The Bahamas",countryNameLocal:"Commonwealth of The Bahamas",countryCode:"BS",currencyCode:"BSD",currencyNameEn:"Bahamian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 242",areaCodes:[],region:"Caribbean",flag:""},{countryNameEn:"Cocos (Keeling) Islands",countryNameLocal:"Pulu Kokos (Keeling)",countryCode:"CC",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"61 891",areaCodes:[],region:"Australia",flag:""},{countryNameEn:"Central African Republic",countryNameLocal:"Rpublique centrafricaine",countryCode:"CF",currencyCode:"XAF",currencyNameEn:"Central African CFA",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"236",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Cook Islands",countryNameLocal:"Kki 'irani",countryCode:"CK",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"682",areaCodes:[],region:"South Pacific Ocean",flag:""},{countryNameEn:"Falkland Islands",countryNameLocal:"Falkland Islands",countryCode:"FK",currencyCode:"FKP",currencyNameEn:"Falklands pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"500",areaCodes:[],region:"South Atlantic Ocean",flag:""},{countryNameEn:"Faroe Islands",countryNameLocal:"Frerne",countryCode:"FO",currencyCode:"DKK",currencyNameEn:"Faroese krna",tinType:"",tinName:"",officialLanguageCode:"da",officialLanguageNameEn:"Danish",officialLanguageNameLocal:"dansk",countryCallingCode:"298",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Territory of Heard Island and McDonald Islands",countryNameLocal:"Territory of Heard Island and McDonald Islands",countryCode:"HM",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"672",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"British Indian Ocean Territory",countryNameLocal:"British Indian Ocean Territory",countryCode:"IO",currencyCode:"USD",currencyNameEn:"United States Dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"246",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"Comoros",countryNameLocal:"Umoja wa Komori",countryCode:"KM",currencyCode:"KMF",currencyNameEn:"Comorian franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"269",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"Cayman Islands",countryNameLocal:"Cayman Islands",countryCode:"KY",currencyCode:"KYD",currencyNameEn:"Cayman Islands dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 345",areaCodes:[],region:"Caribbean Sea",flag:""},{countryNameEn:"Republic of the Marshall Islands",countryNameLocal:"Aolepn Aorkin aje",countryCode:"MH",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"692",areaCodes:[],region:"Pacific Ocean",flag:""},{countryNameEn:"Commonwealth of the Northern Mariana Islands",countryNameLocal:"Sankattan Siha Na Islas Marinas",countryCode:"MP",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 670",areaCodes:[],region:"Pacific Ocean",flag:""},{countryNameEn:"Turks and Caicos Islands",countryNameLocal:"Turks and Caicos Islands",countryCode:"TC",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 649",areaCodes:[],region:"Atlantic Ocean",flag:""},{countryNameEn:"French Southern and Antarctic Lands",countryNameLocal:"Terres australes et antarctiques franaises",countryCode:"TF",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"672",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"United States Minor Outlying Islands",countryNameLocal:"United States Minor Outlying Islands",countryCode:"UM",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:[],region:"Pacific Ocean",flag:""},{countryNameEn:"Holy See",countryNameLocal:"Sancta Sedes",countryCode:"VA",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"la",officialLanguageNameEn:"Latin",officialLanguageNameLocal:"lingua latna",countryCallingCode:"39",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Republic of Kosovo",countryNameLocal:"Republika e Kosovs",countryCode:"XK",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"sq",officialLanguageNameEn:"Albanian",officialLanguageNameLocal:"Shqip",countryCallingCode:"383",region:"Europe",flag:""},{countryNameEn:"Netherlands Antilles",countryNameLocal:"Nederlandse Antillen",countryCode:"AN",currencyCode:"ANG",currencyNameEn:"Netherlands Antillean guilder",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"599",region:"Europe",flag:""}];return hy.default=e,hy}var $I;function Loe(){if($I)return Ya;$I=1;var e=Ya&&Ya.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(Ya,"__esModule",{value:!0}),Ya.customList=Ya.customArray=Ya.findOne=Ya.filter=Ya.all=Ya.utils=void 0;const t=e(Aoe()),n=e(Eoe()),r=e(Toe());Ya.utils={groupBy:t.default};function s(){return r.default}Ya.all=s;function i(d,m){return r.default.filter(h=>h[d]===m)}Ya.filter=i;function o(d,m){return r.default.find(h=>h[d]===m)}Ya.findOne=o;function l(d={name:"{countryNameEn} ({countryCode})",value:"{countryCode}"},{sortBy:m,sortDataBy:h,filter:p}={}){const b=[];let v=r.default;if(typeof p=="function"&&(v=v.filter(p)),h){const x=new Intl.Collator([],{sensitivity:"accent"});v.sort((w,j)=>x.compare(w[h],j[h]))}if(v.forEach(x=>{const w={};for(const j in d)w[j]=(0,n.default)(d[j],x);b.push(w)}),m&&d[m]){const x=new Intl.Collator([],{sensitivity:"accent"});b.sort((w,j)=>x.compare(w[m],j[m]))}return b}Ya.customArray=l;function c(d="countryCode",m="{countryNameEn} ({countryCode})",{filter:h}={}){const p={};let b=r.default;return typeof h=="function"&&(b=b.filter(h)),b.forEach(v=>{const x=(0,n.default)(m,v);p[String(v[d])]=x}),p}return Ya.customList=c,Ya}var Nf=Loe();const JA=(...e)=>e.flat().filter(Boolean).join(" "),koe=Nf.all(),IB=koe.map(e=>({code:`+${e.countryCallingCode}`,name:e.countryCode})),eE=[{id:1,title:"Your Account",subtitle:"Personal & Login Details"},{id:2,title:"Company Setup",subtitle:"Business Information"}],Poe=()=>{const e=rt();return a.jsxs("button",{onClick:()=>e("/"),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 transition cursor-pointer",children:[a.jsx(du,{className:"size-4 mr-1"})," Back to Home"]})},Doe=g.memo(({label:e,id:t,placeholder:n,type:r="text",value:s,onChange:i,isVisible:o,onTogglePass:l,error:c,isSelect:d,options:m})=>{const h=t.toLowerCase().includes("password"),p=h?o?"text":"password":r,b=JA("w-full bg-gray-50 border px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:outline-none cursor-pointer",h?"pr-10":"",c?"border-red-500 focus:border-red-500 focus:ring-2 focus:ring-red-500/50":"border-gray-200 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50");return a.jsxs("div",{className:"flex flex-col space-y-2",children:[a.jsx("label",{htmlFor:t,className:"text-sm font-medium text-gray-700 cursor-pointer",children:e}),a.jsxs("div",{className:"relative",children:[d?a.jsx("select",{id:t,value:s,onChange:i,required:!0,className:b,children:m.map(v=>a.jsx("option",{value:v,children:v},v))}):a.jsx("input",{id:t,type:p,placeholder:n,value:s,onChange:i,required:!0,className:b}),h&&a.jsx("button",{type:"button",onClick:()=>l(t),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":o?"Hide password":"Show password",children:o?a.jsx(Gd,{className:"size-5"}):a.jsx(Vd,{className:"size-5"})})]}),c&&a.jsx("p",{className:"mt-1 text-sm text-red-600 font-semibold",children:c})]})}),wd=Doe,Ooe=g.memo(({currentStep:e,totalSteps:t})=>a.jsx("div",{className:"flex justify-between items-center mb-10 w-full max-w-xs mx-auto",children:eE.map(n=>a.jsxs(g.Fragment,{children:[a.jsxs("div",{className:"flex flex-col items-center cursor-pointer",children:[a.jsx("div",{className:JA("size-10 flex items-center justify-center rounded-full font-bold transition-all duration-300",n.id===e?"bg-amber-500 text-white shadow-lg":n.id<e?"bg-green-500 text-white":"bg-gray-100 text-gray-500 border-2 border-gray-300"),children:n.id<e?a.jsx(W8,{className:"size-5"}):n.id}),a.jsx("span",{className:JA("mt-2 text-xs font-medium hidden sm:block",n.id===e?"text-amber-600":"text-gray-500"),children:n.title})]}),n.id<t&&a.jsx("div",{className:"flex-1 h-0.5 mx-1 transition-colors duration-300 bg-gray-300"})]},n.id))})),Moe=g.memo(({formData:e,handleChange:t,handleCodeChange:n,handleTogglePass:r,isPassVisible:s,formError:i,signupError:o,termsAccepted:l,handleTerms:c,isButtonDisabled:d,handleSubmit:m,handleGoogleLogin:h})=>a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center my-6",children:[a.jsx("div",{className:"flex-grow border-t border-gray-300"}),a.jsx("span",{className:"flex-shrink mx-4 text-sm text-gray-500",children:"OR"}),a.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"md:flex md:space-x-4 space-y-6 md:space-y-0",children:[a.jsx("div",{className:"md:w-1/2",children:a.jsx(wd,{label:"First Name",id:"first_name",placeholder:"John",value:e.first_name,onChange:t})}),a.jsx("div",{className:"md:w-1/2",children:a.jsx(wd,{label:"Last Name",id:"last_name",placeholder:"Doe",value:e.last_name,onChange:t})})]}),a.jsxs("div",{className:"flex flex-col space-y-2",children:[a.jsx("label",{htmlFor:"phoneNumber",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Contact Number"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("select",{id:"countryCode",value:e.countryCode,onChange:n,className:"flex-shrink-0 bg-gray-50 border border-gray-200 px-3 py-2.5 rounded-lg text-gray-800 transition shadow-inner focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer",children:IB.map(p=>a.jsxs("option",{value:p.code,children:[p.name," ",p.code]},p.code))}),a.jsx("input",{id:"phone_number",type:"tel",placeholder:"0000000000",maxLength:10,value:e.phone_number,onChange:t,className:"w-full bg-gray-50 border border-gray-200 px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"})]})]}),a.jsx(wd,{label:"Email Address",id:"email",type:"email",placeholder:"you@company.com",value:e.email,onChange:t}),a.jsx(wd,{label:"Password",id:"password",placeholder:"Min 8 characters",value:e.password,onChange:t,isVisible:s.password,onTogglePass:r}),a.jsx(wd,{label:"Confirm Password",id:"confirmPassword",placeholder:"Confirm your password",value:e.confirmPassword,onChange:t,isVisible:s.confirmPassword,onTogglePass:r,error:i}),o&&a.jsx("div",{className:"bg-red-100 border border-red-300 py-2 px-3 text-red-600",children:o}),a.jsxs("div",{className:"flex items-start pt-2",children:[a.jsx("input",{id:"terms",type:"checkbox",checked:l,onChange:c,className:"size-4 mt-1 rounded text-amber-500 border-gray-300 focus:ring-amber-500 cursor-pointer"}),a.jsxs("label",{htmlFor:"terms",className:"ml-3 text-sm font-medium text-gray-700 cursor-pointer",children:["I accept the ",a.jsx("a",{href:"#",className:"text-amber-600 hover:text-amber-700 font-semibold",children:"Terms"})," and ",a.jsx("a",{href:"#",className:"text-amber-600 hover:text-amber-700 font-semibold",children:"Policy"}),"."]})]})]}),a.jsx("button",{type:"submit",onClick:m,disabled:d,className:"w-full mt-8 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all duration-300 bg-secondary hover:bg-tertiary shadow-lg shadow-tertiary disabled:shadow-none focus-visible:outline-none cursor-pointer",children:"Continue to Company Details"})]})),Ioe=g.memo(({companyData:e,handleCodeChange1:t,handleSubmit:n,handleCompanyChange:r,formError:s,isSubmitted:i,isButtonDisabled:o,setStep:l,setIsSubmitted:c,setFormError:d})=>a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"space-y-6",children:[a.jsx(wd,{label:"Company Name",id:"company_name",placeholder:"Acme Corp",value:e.company_name,onChange:r}),a.jsxs("div",{className:"flex flex-col space-y-2",children:[a.jsx("label",{htmlFor:"phoneNumber",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Company Number"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("select",{id:"countryCode",value:e.countryCode,onChange:t,className:"flex-shrink-0 bg-gray-50 border border-gray-200 px-3 py-2.5 rounded-lg text-gray-800 transition shadow-inner focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer",children:IB.map(m=>a.jsxs("option",{value:m.code,children:[m.name," ",m.code]},m.code))}),a.jsx("input",{id:"company_number",type:"tel",placeholder:"0000000000",maxLength:10,value:e.company_number,onChange:r,className:"w-full bg-gray-50 border border-gray-200 px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"})]})]}),a.jsx(wd,{label:"Company Website",id:"company_website",type:"url",placeholder:"https://www.acme.com",value:e.company_website,onChange:r})]}),s&&a.jsx("div",{className:"p-3 text-sm rounded-lg bg-red-100 text-red-700 border border-red-300 font-medium my-6",children:s}),i&&a.jsx("div",{className:"p-3 text-sm rounded-lg bg-green-100 text-green-700 border border-green-300 font-medium my-6",children:"Account and Company Setup simulated successfully! Welcome aboard."}),a.jsxs("div",{className:"flex space-x-4 mt-8",children:[a.jsxs("button",{type:"button",onClick:()=>{l(1),c(!1),d(null)},className:"flex-1 inline-flex items-center justify-center rounded-lg h-12 px-6 text-gray-700 font-bold tracking-wide border border-gray-300 bg-white hover:bg-tertiary hover:text-white transition-colors focus-visible:ring-2 focus-visible:ring-gray-300 focus-visible:outline-none cursor-pointer",children:[a.jsx(wae,{className:"size-4 mr-2"})," Back"]}),a.jsx("button",{onClick:n,type:"submit",disabled:o,className:"flex-1 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all duration-300 bg-tertiary hover:bg-accent hover:text-secondary shadow-xl shadow-amber-500/30 disabled:shadow-none focus-visible:ring-2 focus-visible:ring-amber-500/50 focus-visible:outline-none cursor-pointer",children:"Create Account"})]})]})),$oe=()=>{const e=["first_name","email","password"],t=["company_name","company_number","company_website"],[n,r]=g.useState(1),[s,i]=g.useState({first_name:"",last_name:"",countryCode:"+63",phone_number:"",email:"",password:"",confirmPassword:"",role:"CEO"}),[o,l]=g.useState({company_name:"",company_number:"",company_website:"",countryCode:"+63"}),[c,d]=g.useState({}),[m,h]=g.useState(!1),[p,b]=g.useState(null),[v,x]=g.useState(!1),{login:w}=er(),[j,C]=g.useState({plan_name:"Free",price:0}),[S,_]=g.useState(!1),[E,A]=g.useState(null);g.useEffect(()=>{document.title="Sign Up | Sari-Sari CRM"},[]),g.useEffect(()=>{const X=()=>{window.google&&window.google.accounts?(window.google.accounts.id.initialize({client_id:"222789237297-r8mebl46fdacgpsnlnjca4eu0crn8hf6.apps.googleusercontent.com",callback:T}),window.google.accounts.id.renderButton(document.getElementById("googleSignupBtn"),{theme:"outline",size:"large",text:"signup_with"})):console.error("Google API not loaded properly.")};if(window.google&&window.google.accounts){X();return}const le=document.createElement("script");le.src="https://accounts.google.com/gsi/client",le.async=!0,le.defer=!0,le.onload=X,document.body.appendChild(le)},[]);const T=async X=>{_(!0);try{const le=Q8(X.credential);console.log("Google user:",le);try{await oe.post("/auth/google/signup",{id_token:X.credential})}catch(ue){const J=ue.response?.data?.detail||"An error occurred.";A(J),_(!1);return}i(ue=>({...ue,email:le.email,first_name:le.given_name||"",last_name:le.family_name||"",password:le.password||"",profilePicture:le.picture||"",googleId:le.sub,auth_provider:"google",id_token:X.credential})),r(2)}catch(le){console.error("Google signup error:",le),b("Failed to process Google account. Please try again.")}finally{A(null),b(null),_(!1)}},R=g.useCallback(X=>{const{id:le,value:ue}=X.target;x(!1),i(J=>{const ne={...J,[le]:ue};if(n===1&&(le==="password"||le==="confirmPassword")){const{password:pe,confirmPassword:we}=ne,ye=pe.length>0&&we.length>0&&pe!==we?"Password doesn't match. Please try again.":null;b(Te=>Te!==ye?ye:Te)}return ne})},[n]),U=g.useCallback(X=>{const{id:le,value:ue}=X.target;x(!1),l(J=>({...J,[le]:ue}))},[]),W=g.useCallback(X=>i(le=>({...le,countryCode:X.target.value})),[]),I=g.useCallback(X=>l(le=>({...le,countryCode:X.target.value})),[]),M=g.useCallback(X=>d(le=>({...le,[X]:!le[X]})),[]),H=g.useCallback(X=>h(X.target.checked),[]),q=async X=>{if(X.preventDefault(),x(!1),b(null),_(!0),n===1){if(!e.every(ue=>s[ue].trim()!=="")||!m){b("Please fill in all required fields and accept the terms.");return}if(s.password!==s.confirmPassword){b("The passwords you entered do not match. Please try again.");return}if(s.auth_provider==="google"){r(2);return}try{(await oe.post("/auth/email-check",{email:s.email})).data.detail==="No existing email"&&(b(null),r(2))}catch(ue){ue.response&&ue.response.data&&ue.response.data.detail?b(ue.response.data.detail):b("Something went wrong. Please try again.")}finally{_(!1)}}else if(n===2){if(!t.every(ue=>(o[ue]||"").trim()!=="")){b("Please fill in all required company details.");return}try{const{confirmPassword:ue,...J}=s,ne={...o,company_number:`${o.countryCode} ${o.company_number}`},we=(await oe.post("/company/create",ne)).data.id,ye={...J,company_id:we,phone_number:`${J.countryCode} ${J.phone_number}`};if(console.log(" Sending payload:",ye),J.auth_provider==="google"){const Te=await oe.post("/auth/google/signup",ye),Ae={...j,company_id:we,status:"Active"},Pe=await oe.post("/subscription/subscribe",Ae);b(null),x(!0),w(Te.data)}else{const Te=await oe.post("/auth/signup",ye),Ae={...j,company_id:we,status:"Active"},Pe=await oe.post("/subscription/subscribe",Ae);b(null),x(!0),w(Te.data)}}catch(ue){if(ue.response?.data?.detail){const J=ue.response.data.detail;if(Array.isArray(J)){const ne=J.map(pe=>pe.msg).join(", ");b(ne)}else b(typeof J=="object"?J.msg||JSON.stringify(J):J)}else b("Something went wrong. Please try again.")}finally{_(!1)}}},ae=g.useCallback(()=>{try{window.google.accounts.id.initialize({client_id:"222789237297-r8mebl46fdacgpsnlnjca4eu0crn8hf6.apps.googleusercontent.com",callback:X=>{const{credential:le}=X;i(ue=>({...ue,first_name:le.given_name||"",last_name:le.family_name||"",email:le.email||"",profile_picture:le.picture||"",auth_provider:"google",id_token:le})),r(2)}}),window.google.accounts.id.prompt()}catch(X){console.error("Google login error:",X),b("Google login failed. Please try again.")}},[i,b,r]),K=g.useMemo(()=>{if(n===1){const X=e.every(le=>(s[le]||"").trim()!=="");return!m||!!p||!X}return n===2?!t.every(le=>(o[le]||"").trim()!==""):!0},[n,m,p,s,e,t]),B=eE.find(X=>X.id===n);return a.jsxs("div",{className:"min-h-screen w-full bg-gray-100 font-sans text-gray-800 flex flex-col items-center",children:[a.jsx("div",{className:"w-full py-6 px-4 sm:px-12 lg:px-20 max-w-7xl",children:a.jsxs("div",{className:"flex items-center text-gray-800",children:[a.jsx($n,{className:"size-6 text-amber-500 mr-2"}),a.jsx("span",{className:"text-xl font-extrabold tracking-wider",children:"CRM"})]})}),S&&a.jsx(MB,{isLoading:S}),a.jsx("div",{className:"w-full max-w-lg px-4 pt-6",children:a.jsx(Poe,{})}),a.jsx("main",{className:"w-full max-w-lg font-inter mx-auto px-4 pt-3 pb-12",children:a.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-xl p-6 md:p-10",children:[a.jsxs("header",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:B.title}),a.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:B.subtitle})]}),a.jsx(Ooe,{currentStep:n,totalSteps:eE.length}),n===1&&a.jsx("div",{id:"googleSignupBtn"}),a.jsxs("form",{className:"mt-8",children:[n===1&&a.jsx(Moe,{formData:s,handleChange:R,handleCodeChange:W,handleTogglePass:M,isPassVisible:c,formError:p,signupError:E,termsAccepted:m,handleTerms:H,isButtonDisabled:K,handleSubmit:q,handleGoogleLogin:ae}),n===2&&a.jsx(Ioe,{handleSubmit:q,companyData:o,handleCompanyChange:U,formError:p,isSubmitted:v,isButtonDisabled:K,setStep:r,setIsSubmitted:x,setFormError:b,handleCodeChange1:I}),n===1&&a.jsx("div",{className:"text-center mt-6",children:a.jsxs("p",{className:"text-sm text-gray-700",children:["Already have an account?",a.jsx("a",{href:"/login",className:"font-bold text-amber-600 hover:text-amber-700 ml-1 cursor-pointer",children:"Log in"})]})})]})]})})]})},Roe=()=>{const e=rt();return a.jsxs("button",{onClick:()=>e("/"),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 transition mb-3 cursor-pointer",children:[a.jsx(du,{className:"size-4 mr-1"})," Back to Home"]})},RI=({label:e,id:t,placeholder:n,type:r="text",value:s,onChange:i,isPassVisible:o,onTogglePass:l})=>{const c=t.toLowerCase().includes("password"),d=c?o?"text":"password":r;return a.jsxs("div",{className:"flex flex-col space-y-2",children:[a.jsx("label",{htmlFor:t,className:"text-sm font-medium text-gray-700",children:e}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:t,type:d,placeholder:n,value:s,onChange:i,required:!0,className:"w-full bg-gray-50 border border-gray-200 px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"}),c&&a.jsx("button",{type:"button",onClick:l,className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":o?"Hide password":"Show password",children:o?a.jsx(Gd,{className:"size-5"}):a.jsx(Vd,{className:"size-5"})})]})]})},zoe=()=>{const[e,t]=g.useState({email:"",password:""}),[n,r]=g.useState(!1),[s,i]=g.useState(null),[o,l]=g.useState(!1),{isLoggedIn:c,login:d,userRole:m}=er(),h=rt();g.useEffect(()=>{document.title="Login | Sari-Sari CRM"},[]),g.useEffect(()=>{c&&(m==="CEO"||m==="Admin"?h("/admin"):m==="Group Manager"?h("/group-manager"):m==="Manager"?h("/manager"):m==="Marketing"?h("/marketing"):m==="Sales"&&h("/sales"))},[c,h,m]);const p=x=>{const{id:w,value:j}=x.target;t(C=>({...C,[w]:j}))},b=async x=>{x.preventDefault(),i(null);try{const w=await oe.post("/auth/login",e);d(w.data),i(null)}catch(w){w.response&&w.response.data&&w.response.data.detail?i(w.response.data.detail):i("Something went wrong. Please try again.")}};g.useEffect(()=>{const x=document.createElement("script");return x.src="https://accounts.google.com/gsi/client",x.async=!0,x.defer=!0,x.onload=()=>{window.google&&(window.google.accounts.id.initialize({client_id:"222789237297-r8mebl46fdacgpsnlnjca4eu0crn8hf6.apps.googleusercontent.com",callback:v}),window.google.accounts.id.renderButton(document.getElementById("googleLoginBtn"),{theme:"outline",size:"large",text:"signin_with"}))},document.body.appendChild(x),()=>{document.body.contains(x)&&document.body.removeChild(x)}},[]);const v=async x=>{l(!0);try{const w=Q8(x.credential),j=await oe.post("/auth/google/login",{id_token:x.credential});d(j.data)}catch(w){console.error("Google login failed:",w);const j=w.response?.data?.detail||"Google login failed. Please try again.";i(j)}finally{l(!1)}};return a.jsxs("div",{className:"min-h-screen w-full bg-gray-100 font-sans text-gray-800 flex flex-col items-center",children:[a.jsx("div",{className:"w-full py-6 px-4 sm:px-12 lg:px-20 max-w-7xl",children:a.jsx("div",{className:"flex items-center text-gray-800",children:a.jsx("span",{className:"text-xl font-extrabold tracking-wider",children:"CRM"})})}),o&&a.jsx(MB,{isLoading:o}),a.jsxs("main",{className:"w-full max-w-lg font-inter mx-auto px-4 pt-6 pb-12",children:[a.jsx(Roe,{}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-xl p-6 md:p-10",children:[a.jsxs("header",{className:"text-center mb-6",children:[a.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Login"}),a.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:"Sign in to access your dashboard."})]}),a.jsx("div",{id:"googleLoginBtn"}),a.jsxs("div",{className:"flex items-center my-6",children:[a.jsx("div",{className:"flex-grow border-t border-gray-300"}),a.jsx("span",{className:"flex-shrink mx-4 text-sm text-gray-500",children:"OR"}),a.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),a.jsxs("form",{onSubmit:b,className:"space-y-6 cursor-pointer",children:[a.jsx(RI,{label:"Email",id:"email",type:"email",placeholder:"you@example.com",value:e.email,onChange:p}),a.jsx(RI,{label:"Password",id:"password",type:"password",placeholder:"Enter your password",value:e.password,onChange:p,isPassVisible:n,onTogglePass:()=>r(x=>!x)}),s&&a.jsx("div",{className:"bg-red-100 border border-red-300 py-2 px-3 text-red-600",children:s}),a.jsx("button",{type:"submit",className:"w-full mt-2 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all disabled:opacity-50 bg-secondary text-gray-900 hover:bg-tertiary shadow-xl focus-visible:ring-2 focus-visible:ring-amber-500/50 cursor-pointer",children:"Log In"}),a.jsx("div",{className:"text-center mt-1",children:a.jsx("a",{href:"/forgot-password",className:"text-sm font-medium text-amber-600 hover:text-amber-700 cursor-pointer",children:"Forgot Password?"})})]}),a.jsx("div",{className:"text-center mt-6",children:a.jsxs("p",{className:"text-sm text-gray-700",children:["Don't have an account?",a.jsx("a",{href:"/signup",className:"font-bold text-amber-600 hover:text-amber-700 ml-1 cursor-pointer",children:"Sign Up"})]})})]})]})]})},Uoe=({onClick:e})=>a.jsxs("button",{onClick:e,className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 transition mb-3 cursor-pointer",children:[a.jsx(du,{className:"size-4 mr-1"})," Back"]}),aS=({label:e,id:t,placeholder:n,type:r="text",value:s,onChange:i,icon:o})=>{const[l,c]=g.useState(!1),d=r==="password";return a.jsxs("div",{className:"flex flex-col space-y-2",children:[a.jsx("label",{htmlFor:t,className:"text-sm font-medium text-gray-700",children:e}),a.jsxs("div",{className:"relative flex items-center",children:[o&&a.jsx(o,{className:"absolute left-3 text-gray-500 size-5"}),a.jsx("input",{id:t,type:d&&l?"text":r,placeholder:n,value:s,onChange:i,required:!0,className:"w-full bg-gray-50 border border-gray-200 pl-10 pr-10 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"}),d&&a.jsx("button",{type:"button",onClick:()=>c(m=>!m),className:"absolute right-3 text-gray-500",children:l?a.jsx(Gd,{className:"size-5"}):a.jsx(Vd,{className:"size-5"})})]})]})},Foe=({otp:e,setOtp:t})=>a.jsx("div",{className:"flex justify-between gap-2",children:[...Array(6)].map((n,r)=>a.jsx("input",{type:"text",maxLength:"1",className:"w-12 h-12 text-center text-lg font-bold border border-gray-300 rounded-lg focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50",value:e[r]||"",onChange:s=>{const i=s.target.value;if(/\d/.test(i)||i===""){const o=[...e];o[r]=i,t(o)}}},r))}),Boe=()=>{const e=rt(),[t,n]=g.useState(1),[r,s]=g.useState(""),[i,o]=g.useState(["","","","","",""]),[l,c]=g.useState(""),[d,m]=g.useState(""),h=x=>{x.preventDefault(),n(2)},p=x=>{x.preventDefault(),n(3)},b=x=>{if(x.preventDefault(),l!==d){alert("Passwords do not match!");return}alert("Password reset successfully!")},v=()=>{t>1?n(t-1):e("/login")};return a.jsxs("div",{className:"min-h-screen w-full bg-gray-100 font-sans text-gray-800 flex flex-col items-center",children:[a.jsx("div",{className:"w-full py-6 px-4 sm:px-12 lg:px-20 max-w-7xl",children:a.jsx("div",{className:"flex items-center text-gray-800",children:a.jsx("span",{className:"text-xl font-extrabold tracking-wider",children:"CRM"})})}),a.jsxs("main",{className:"w-full max-w-lg font-inter mx-auto px-4 pt-6 pb-12",children:[a.jsx(Uoe,{onClick:v}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-xl p-6 md:p-10",children:[t===1&&a.jsxs(a.Fragment,{children:[a.jsxs("header",{className:"text-center mb-6",children:[a.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Forgot Password"}),a.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:"Enter your email and we'll send you a verification code."})]}),a.jsxs("form",{onSubmit:h,className:"space-y-6 cursor-pointer",children:[a.jsx(aS,{label:"Email Address",id:"email",type:"email",placeholder:"you@example.com",value:r,onChange:x=>s(x.target.value),icon:Tn}),a.jsx("button",{className:"w-full mt-3 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all bg-secondary text-gray-900 hover:bg-tertiary shadow-xl",children:"Send OTP"})]})]}),t===2&&a.jsxs(a.Fragment,{children:[a.jsxs("header",{className:"text-center mb-6",children:[a.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Enter Verification Code"}),a.jsxs("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:["We've sent a 6-digit code to ",a.jsx("strong",{children:r}),"."]})]}),a.jsxs("form",{onSubmit:p,className:"space-y-6",children:[a.jsx(Foe,{otp:i,setOtp:o}),a.jsx("button",{className:"w-full mt-3 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all bg-secondary text-gray-900 hover:bg-tertiary shadow-xl",children:"Verify Code"})]})]}),t===3&&a.jsxs(a.Fragment,{children:[a.jsxs("header",{className:"text-center mb-6",children:[a.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Reset Password"}),a.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:"Enter your new password below."})]}),a.jsxs("form",{onSubmit:b,className:"space-y-6",children:[a.jsx(aS,{label:"New Password",id:"password",type:"password",placeholder:"Enter new password",value:l,onChange:x=>c(x.target.value),icon:Hi}),a.jsx(aS,{label:"Confirm Password",id:"confirm-password",type:"password",placeholder:"Confirm new password",value:d,onChange:x=>m(x.target.value),icon:Hi}),a.jsx("button",{className:"w-full mt-3 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all bg-secondary text-gray-900 hover:bg-tertiary shadow-xl",children:"Reset Password"})]})]})]})]})]})},Ut=()=>{const[e,t]=g.useState(null),[n,r]=g.useState(!1),[s,i]=g.useState(!0),o=rt(),l=async()=>{try{const d=await oe.get("/auth/me");t(d.data),r(!0)}catch(d){t(null),r(!1),console.warn("Unauthorized  possible expired token or not logged in.",d)}finally{i(!1)}};return g.useEffect(()=>{l()},[]),{user:e,isLoggedIn:n,loading:s,fetchUser:l,logout:async()=>{try{await oe.post("/auth/logout")}catch{}t(null),r(!1),o("/login")}}};function yt({message:e="Loading..."}){return a.jsx("div",{className:"absolute inset-0 bg-primary/90 flex items-center justify-center z-40 lg:flex hidden",children:a.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[a.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0ms",animationDuration:"0.6s"}}),a.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"150ms",animationDuration:"0.6s"}}),a.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"300ms",animationDuration:"0.6s"}})]})})}const Hoe=(e,t)=>{const n=e?.trim()?.[0]??"",r=t?.trim()?.[0]??"";return`${n}${r}`.toUpperCase()||"U"};function gy(){const{user:e,loading:t,fetchUser:n}=Ut(),[r,s]=g.useState(!1),[i,o]=g.useState(!1),[l,c]=g.useState(!1),[d,m]=g.useState(!1),[h,p]=g.useState(!1),[b,v]=g.useState(!1),[x,w]=g.useState(!1),[j,C]=g.useState(!1),[S,_]=g.useState(null),[E,A]=g.useState(null),T=g.useRef(null),[R,U]=g.useState({firstName:"",lastName:"",email:"",phoneNumber:""}),[W,I]=g.useState({currentPassword:"",newPassword:"",confirmPassword:""});g.useEffect(()=>{e&&(U({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),A(e.profile_picture||null))},[e]),g.useEffect(()=>{document.title="Manage Account | Sari-Sari CRM"},[]);const M=(B,X)=>{U(le=>({...le,[B]:X}))},H=(B,X)=>{I(le=>({...le,[B]:X}))},q=B=>{const X=B.target.files?.[0];if(!X)return;if(!X.type.startsWith("image/")){Q.error("Please select an image file");return}if(X.size>5*1024*1024){Q.error("Image size should be less than 5MB");return}const le=new FileReader;le.onloadend=()=>{_(le.result),A(le.result)},le.readAsDataURL(X)},ae=async B=>{if(B.preventDefault(),!R.firstName.trim()||!R.lastName.trim()){Q.warn("Please fill in all required fields.");return}o(!0);try{const X={first_name:R.firstName.trim(),last_name:R.lastName.trim(),phone_number:R.phoneNumber.trim()||null};S!==null&&(X.profile_picture=S),await oe.put("/users/me",X),await n(),c(!1),_(null),window.dispatchEvent(new CustomEvent("userProfileUpdated")),Q.success("Account information updated successfully!")}catch(X){console.error("Error updating account:",X);const le=X.response?.data?.detail||"Failed to update account information. Please try again.";Q.error(le)}finally{o(!1)}},K=async B=>{if(B.preventDefault(),!W.newPassword||!W.confirmPassword){Q.warn("Please fill in all password fields.");return}if(W.newPassword.length<8){Q.warn("Password must be at least 8 characters long.");return}if(W.newPassword!==W.confirmPassword){Q.warn("New password and confirm password do not match.");return}C(!0);try{const X={password:W.newPassword};await oe.put("/users/me",X),await n(),I({currentPassword:"",newPassword:"",confirmPassword:""}),window.dispatchEvent(new CustomEvent("userProfileUpdated")),C(!1),Q.success("Password changed successfully!")}catch(X){console.error("Error changing password:",X);const le=X.response?.data?.detail||"Failed to change password. Please try again.";Q.error(le)}finally{C(!1)}};return a.jsxs("div",{className:"p-2 lg:p-8 font-inter relative",children:[(t||!e)&&a.jsx(yt,{}),e&&a.jsxs("div",{children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-gray-800 mb-2",children:"Manage Your Account"}),a.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Update your account information and change your password"})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mb-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2",children:[a.jsx(Qt,{className:"text-blue-600"}),"Profile Information"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:!l&&a.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition text-sm",children:[a.jsx(pn,{}),"Edit Profile"]})})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 mb-6 pb-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex-shrink-0 relative group",children:[E?a.jsx("div",{className:"relative",children:a.jsx("img",{src:E,alt:`${e.first_name} ${e.last_name}`,className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full object-cover border-2 border-gray-200 shadow-sm"})}):a.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 text-white flex items-center justify-center text-2xl sm:text-3xl font-semibold border-2 border-gray-200 shadow-sm",children:Hoe(e.first_name,e.last_name)}),l&&a.jsxs("div",{className:"absolute bottom-0 right-0",children:[a.jsx("input",{type:"file",ref:T,accept:"image/*",onChange:q,className:"hidden",id:"profile-picture-upload"}),a.jsx("label",{htmlFor:"profile-picture-upload",className:"cursor-pointer bg-gray-900 text-white p-1.5 rounded-full shadow-lg hover:bg-gray-800 transition flex items-center justify-center border-2 border-white",title:"Change profile picture",children:a.jsx(V8,{size:14})})]})]}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[e.first_name," ",e.last_name]}),a.jsx("p",{className:"text-gray-600 text-sm",children:e.email}),a.jsx("span",{className:"inline-block mt-2 px-3 py-1 bg-blue-100 text-blue-700 text-xs font-semibold rounded-md",children:e.role})]})]}),l?a.jsxs("form",{onSubmit:ae,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["First Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",value:R.firstName,onChange:B=>M("firstName",B.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Last Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",value:R.lastName,onChange:B=>M("lastName",B.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),a.jsxs("div",{className:"sm:col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Email"}),a.jsxs("div",{className:"relative",children:[a.jsx(Tn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"email",value:R.email,disabled:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-600 cursor-not-allowed outline-none",readOnly:!0})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),a.jsxs("div",{className:"sm:col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Phone Number"}),a.jsxs("div",{className:"relative",children:[a.jsx(pt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"tel",value:R.phoneNumber,onChange:B=>M("phoneNumber",B.target.value),placeholder:"+1 (555) 123-4567",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t border-gray-200",children:[a.jsx("button",{type:"button",onClick:()=>{c(!1),U({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),_(null),A(e.profile_picture||null),T.current&&(T.current.value="")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition",disabled:i,children:"Cancel"}),a.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:i,children:[a.jsx(Y8,{}),i?"Saving...":"Save Changes"]})]})]}):a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"First Name"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.first_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Name"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.last_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Email"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.email||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Phone Number"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.phone_number||"N/A"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[a.jsx(Hi,{className:"text-blue-600"}),"Change Password"]}),a.jsxs("form",{onSubmit:K,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["New Password ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Hi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",value:W.newPassword,onChange:B=>H("newPassword",B.target.value),placeholder:"Enter new password (min. 8 characters)",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),a.jsx("button",{type:"button",onClick:()=>v(!b),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:b?a.jsx(Gd,{}):a.jsx(Vd,{})})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Confirm New Password ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Hi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",value:W.confirmPassword,onChange:B=>H("confirmPassword",B.target.value),placeholder:"Confirm new password",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),a.jsx("button",{type:"button",onClick:()=>w(!x),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:x?a.jsx(Gd,{}):a.jsx(Vd,{})})]})]}),a.jsx("div",{className:"pt-4 border-t border-gray-200 flex justify-center lg:justify-start",children:a.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:j,children:[a.jsx(Hi,{}),j?"Changing Password...":"Change Password"]})})]})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mt-6",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[a.jsx(q8,{className:"text-blue-600"}),"Account Information"]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Role"}),a.jsx("span",{className:"inline-block px-3 py-1 bg-blue-100 text-blue-700 text-sm font-semibold rounded-md",children:e.role})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Status"}),a.jsx("span",{className:`inline-block px-3 py-1 text-sm font-semibold rounded-md ${e.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:e.is_active?"Active":"Inactive"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Company"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.company?.company_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Auth Provider"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.auth_provider?e.auth_provider.charAt(0).toUpperCase()+e.auth_provider.slice(1):"N/A"})]}),e.created_at&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Account Created"}),a.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),e.last_login&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Login"}),a.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.last_login).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})})]})]})]})]})]})}function Goe({toggleSidebar:e}){const[t,n]=g.useState(!1),[r,s]=g.useState(!1),[i,o]=g.useState([]),[l,c]=g.useState(0),d=g.useRef(null),m=g.useRef(null),h=Xt(),p=rt(),{logout:b}=er(),{user:v,fetchUser:x}=Ut(),j={"/admin/dashboard":"Dashboard","/admin/accounts":"Accounts","/admin/contacts":"Contacts","/reports":"Reports","/leads":"Leads","/admin/Audit":"Audit","/admin/targets":"Targets","/admin/leads":"Leads","/admin/quotes":"Quotes","/admin/users":"Users","/admin/deals":"Deals"}[h.pathname]||"Admin Panel";return g.useEffect(()=>{const C=()=>{x()};return window.addEventListener("userProfileUpdated",C),()=>{window.removeEventListener("userProfileUpdated",C)}},[x]),g.useEffect(()=>{if(!v?.id)return;const C=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",S=window.location.protocol==="https:"?"wss:":"ws:",_=C?"localhost:8000":window.location.host,E=`${S}//${_}/ws/notifications?user_id=${v.id}`,A=new WebSocket(E);return A.onopen=()=>console.log("Admin WS Connected"),A.onmessage=T=>{const R=JSON.parse(T.data);o(U=>[R,...U]),c(U=>U+1)},A.onclose=()=>console.log("Admin WS Disconnected"),()=>A.close()},[v?.id]),g.useEffect(()=>{function C(S){d.current&&!d.current.contains(S.target)&&n(!1),m.current&&!m.current.contains(S.target)&&s(!1)}return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]),a.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:a.jsx(Yp,{className:"text-2xl"})}),a.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:j})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"relative",ref:m,children:[a.jsxs("button",{onClick:()=>s(!r),className:"relative text-gray-600 hover:text-gray-800 transition",children:[a.jsx(Wp,{className:"text-xl"}),l>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] w-4 h-4 flex items-center justify-center rounded-full font-semibold",children:l})]}),r&&a.jsxs("div",{className:"absolute right-0 mt-3 w-80 bg-white rounded-xl shadow-lg border z-50 overflow-hidden animate-fade-in",children:[a.jsxs("div",{className:"p-3 border-b bg-gray-50 flex justify-between items-center",children:[a.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:"Notifications"}),a.jsx("button",{onClick:()=>{o([]),c(0)},className:"text-xs text-blue-600 hover:underline",children:"Clear"})]}),a.jsx("div",{className:"max-h-60 overflow-y-auto",children:i.length>0?i.map((C,S)=>a.jsx("div",{className:"p-3 border-b text-sm hover:bg-gray-50 cursor-pointer",children:C.title||C.message||"New Update"},S)):a.jsx("div",{className:"p-4 text-center text-gray-500 text-xs",children:"No notifications"})})]})]}),a.jsxs("div",{className:"relative",ref:d,children:[a.jsxs("button",{onClick:()=>n(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[a.jsx("img",{src:v?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 aspect-square object-cover rounded-full"}),a.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[v?.first_name," ",v?.last_name]})]}),t&&a.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4",children:[a.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[a.jsx("img",{src:v?.profile_picture||"https://via.placeholder.com/80",alt:"Profile",className:"w-16 h-16 rounded-full object-cover"}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[v?.first_name," ",v?.middle_name," ",v?.last_name]}),a.jsx("p",{className:"text-[11px] text-gray-600 font-light w-full truncate",children:"Admin"})]})]}),a.jsxs("div",{className:"mt-6 space-y-1 px-4 text-left",children:[a.jsx("button",{onClick:()=>{p("/admin/users"),n(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Invite Your Team"}),a.jsx("button",{onClick:()=>{p("/admin/manage-account"),n(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Manage Your Account"}),a.jsx("div",{className:"border-t border-gray-200 my-2"}),a.jsx("button",{onClick:b,className:"block w-full text-sm text-red-600 hover:text-red-700 hover:bg-gray-50 py-2 rounded text-left",children:"Logout"})]})]})]})]})]})}function Voe(){const[e,t]=g.useState(!1),[n,r]=g.useState(!1),[s,i]=g.useState(!1),[o,l]=g.useState(!1),c=Xt(),{user:d}=Ut();g.useEffect(()=>{d&&console.log("Fetched user:",d)},[d]),g.useEffect(()=>{document.title="Admin Panel | Sari-Sari CRM"},[]);const h=["/admin/accounts","/admin/contacts","/admin/leads","/admin/deals","/admin/quotes","/admin/targets"].includes(c.pathname);g.useEffect(()=>{h&&t(!0)},[c.pathname]);const p="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",b="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition";return a.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[a.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${o?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[a.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[a.jsxs("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:[" Sari-Sari.CRM"," ",a.jsx("span",{className:"text-[12px] text-gray-700 font-medium align-bottom",children:"v2"})]}),d&&d.company&&a.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:d.company.company_name})]}),a.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[a.jsxs(st,{to:"/admin/dashboard",className:({isActive:v})=>v?p:b,children:[a.jsx(qp,{className:"text-lg"}),a.jsx("span",{children:"Dashboard"})]}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>t(!e),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx($n,{className:"text-lg"}),"Sales"]}),a.jsx(Rr,{className:`transition-transform ${e?"rotate-180":""}`})]}),e&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(st,{to:"/admin/accounts",className:({isActive:v})=>v?p:b,children:[a.jsx(en,{})," Accounts"]}),a.jsxs(st,{to:"/admin/contacts",className:({isActive:v})=>v?p:b,children:[a.jsx(Qt,{})," Contacts"]}),a.jsxs(st,{to:"/admin/leads",className:({isActive:v})=>v?p:b,children:[a.jsx(Ln,{})," Leads"]}),a.jsxs(st,{to:"/admin/deals",className:({isActive:v})=>v?p:b,children:[a.jsx($n,{})," Deals"]}),a.jsxs(st,{to:"/admin/quotes",className:({isActive:v})=>v?p:b,children:[a.jsx(Br,{})," Quotes"]}),a.jsxs(st,{to:"/admin/targets",className:({isActive:v})=>v?p:b,children:[a.jsx(ms,{})," Targets"]})]})]}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>r(!n),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(mr,{className:"text-lg"}),"Activity"]}),a.jsx(Rr,{className:`transition-transform ${n?"rotate-180":""}`})]}),n&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(st,{to:"/admin/tasks",className:({isActive:v})=>v?p:b,children:[a.jsx(kn,{})," Tasks"]}),a.jsxs(st,{to:"/admin/meetings",className:({isActive:v})=>v?p:b,children:[a.jsx(ft,{})," Meetings"]}),a.jsxs(st,{to:"/admin/calls",className:({isActive:v})=>v?p:b,children:[a.jsx(fr,{})," Calls"]}),a.jsxs(st,{to:"/admin/audit",className:({isActive:v})=>v?p:b,children:[a.jsx(mr,{})," Audit"]})]})]}),a.jsx("div",{children:a.jsx(st,{to:"/admin/territory",className:({isActive:v})=>v?p:b,children:a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(_c,{className:"text-lg"}),"Territory"]})})}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!s),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(ZT,{className:"text-lg"}),"User Management"]}),a.jsx(Rr,{className:`transition-transform ${s?"rotate-180":""}`})]}),s&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(st,{to:"/admin/users",className:({isActive:v})=>v?p:b,children:[a.jsx(en,{})," Users"]}),a.jsxs(st,{to:"/admin/manage-account",className:({isActive:v})=>v?p:b,children:[a.jsx(Qt,{})," Manage Account"]})]})]})]}),a.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),o&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>l(!1)}),a.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[a.jsx(Goe,{toggleSidebar:()=>l(!o)}),a.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:a.jsx(yf,{})})]})]})}function Woe(e){return it({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M544 248l0 3.3 69.7-69.7c21.9-21.9 21.9-57.3 0-79.2L535.6 24.4c-21.9-21.9-57.3-21.9-79.2 0L416.3 64.5c-2.7-.3-5.5-.5-8.3-.5L296 64c-37.1 0-67.6 28-71.6 64l-.4 0 0 120c0 22.1 17.9 40 40 40s40-17.9 40-40l0-72c0 0 0-.1 0-.1l0-15.9 16 0 136 0c0 0 0 0 .1 0l7.9 0c44.2 0 80 35.8 80 80l0 8zM336 192l0 56c0 39.8-32.2 72-72 72s-72-32.2-72-72l0-118.6c-35.9 6.2-65.8 32.3-76 68.2L99.5 255.2 26.3 328.4c-21.9 21.9-21.9 57.3 0 79.2l78.1 78.1c21.9 21.9 57.3 21.9 79.2 0l37.7-37.7c.9 0 1.8 .1 2.7 .1l160 0c26.5 0 48-21.5 48-48c0-5.6-1-11-2.7-16l2.7 0c26.5 0 48-21.5 48-48c0-12.8-5-24.4-13.2-33c25.7-5 45.1-27.6 45.2-54.8l0-.4c-.1-30.8-25.1-55.8-56-55.8c0 0 0 0 0 0l-120 0z"},child:[]}]})(e)}function Zs({props:e,name:t}){return Xse({props:e,name:t,defaultTheme:pL,themeId:Ow})}function Jo(e){const{elementType:t,externalSlotProps:n,ownerState:r,skipResolvingSlotProps:s=!1,...i}=e,o=s?{}:kB(n,r),{props:l,internalRef:c}=PB({...i,externalSlotProps:o}),d=Ji(c,o?.ref,e.additionalProps?.ref);return LB(t,{...l,ref:d},r)}function Ra(e){const t=g.useRef(e);return Ea(()=>{t.current=e}),g.useRef((...n)=>(0,t.current)(...n)).current}var Vb=Symbol("NOT_FOUND");function qoe(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Yoe(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Koe(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var zI=e=>Array.isArray(e)?e:[e];function Qoe(e){const t=Array.isArray(e[0])?e[0]:e;return Koe(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Xoe(e,t){const n=[],{length:r}=e;for(let s=0;s<r;s++)n.push(e[s].apply(null,t));return n}function Zoe(e){let t;return{get(n){return t&&e(t.key,n)?t.value:Vb},put(n,r){t={key:n,value:r}},getEntries(){return t?[t]:[]},clear(){t=void 0}}}function Joe(e,t){let n=[];function r(l){const c=n.findIndex(d=>t(l,d.key));if(c>-1){const d=n[c];return c>0&&(n.splice(c,1),n.unshift(d)),d.value}return Vb}function s(l,c){r(l)===Vb&&(n.unshift({key:l,value:c}),n.length>e&&n.pop())}function i(){return n}function o(){n=[]}return{get:r,put:s,getEntries:i,clear:o}}var ele=(e,t)=>e===t;function tle(e){return function(n,r){if(n===null||r===null||n.length!==r.length)return!1;const{length:s}=n;for(let i=0;i<s;i++)if(!e(n[i],r[i]))return!1;return!0}}function nle(e,t){const n=typeof t=="object"?t:{equalityCheck:t},{equalityCheck:r=ele,maxSize:s=1,resultEqualityCheck:i}=n,o=tle(r);let l=0;const c=s<=1?Zoe(o):Joe(s,o);function d(){let m=c.get(arguments);if(m===Vb){if(m=e.apply(null,arguments),l++,i){const p=c.getEntries().find(b=>i(b.value,m));p&&(m=p.value,l!==0&&l--)}c.put(arguments,m)}return m}return d.clearCache=()=>{c.clear(),d.resetResultsCount()},d.resultsCount=()=>l,d.resetResultsCount=()=>{l=0},d}var ale=class{constructor(e){this.value=e}deref(){return this.value}},rle=typeof WeakRef<"u"?WeakRef:ale,sle=0,UI=1;function py(){return{s:sle,v:void 0,o:null,p:null}}function $B(e,t={}){let n=py();const{resultEqualityCheck:r}=t;let s,i=0;function o(){let l=n;const{length:c}=arguments;for(let h=0,p=c;h<p;h++){const b=arguments[h];if(typeof b=="function"||typeof b=="object"&&b!==null){let v=l.o;v===null&&(l.o=v=new WeakMap);const x=v.get(b);x===void 0?(l=py(),v.set(b,l)):l=x}else{let v=l.p;v===null&&(l.p=v=new Map);const x=v.get(b);x===void 0?(l=py(),v.set(b,l)):l=x}}const d=l;let m;if(l.s===UI)m=l.v;else if(m=e.apply(null,arguments),i++,r){const h=s?.deref?.()??s;h!=null&&r(h,m)&&(m=h,i!==0&&i--),s=typeof m=="object"&&m!==null||typeof m=="function"?new rle(m):m}return d.s=UI,d.v=m,m}return o.clearCache=()=>{n=py(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function RB(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...s)=>{let i=0,o=0,l,c={},d=s.pop();typeof d=="object"&&(c=d,d=s.pop()),qoe(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const m={...n,...c},{memoize:h,memoizeOptions:p=[],argsMemoize:b=$B,argsMemoizeOptions:v=[]}=m,x=zI(p),w=zI(v),j=Qoe(s),C=h(function(){return i++,d.apply(null,arguments)},...x),S=b(function(){o++;const E=Xoe(j,arguments);return l=C.apply(null,E),l},...w);return Object.assign(S,{resultFunc:d,memoizedResultFunc:C,dependencies:j,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:h,argsMemoize:b})};return Object.assign(r,{withTypes:()=>r}),r}var ze=RB($B),ile=Object.assign((e,t=ze)=>{Yoe(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(i=>e[i]);return t(r,(...i)=>i.reduce((o,l,c)=>(o[n[c]]=l,o),{}))},{withTypes:()=>ile});const ole=RB({memoize:nle,memoizeOptions:{maxSize:1,equalityCheck:Object.is}}),at=(e,t,n,r,s,i,o,l,...c)=>{if(c.length>0)throw new Error("Unsupported number of selectors");let d;if(e&&t&&n&&r&&s&&i&&o&&l)d=(m,h,p,b)=>{const v=e(m,h,p,b),x=t(m,h,p,b),w=n(m,h,p,b),j=r(m,h,p,b),C=s(m,h,p,b),S=i(m,h,p,b),_=o(m,h,p,b);return l(v,x,w,j,C,S,_,h,p,b)};else if(e&&t&&n&&r&&s&&i&&o)d=(m,h,p,b)=>{const v=e(m,h,p,b),x=t(m,h,p,b),w=n(m,h,p,b),j=r(m,h,p,b),C=s(m,h,p,b),S=i(m,h,p,b);return o(v,x,w,j,C,S,h,p,b)};else if(e&&t&&n&&r&&s&&i)d=(m,h,p,b)=>{const v=e(m,h,p,b),x=t(m,h,p,b),w=n(m,h,p,b),j=r(m,h,p,b),C=s(m,h,p,b);return i(v,x,w,j,C,h,p,b)};else if(e&&t&&n&&r&&s)d=(m,h,p,b)=>{const v=e(m,h,p,b),x=t(m,h,p,b),w=n(m,h,p,b),j=r(m,h,p,b);return s(v,x,w,j,h,p,b)};else if(e&&t&&n&&r)d=(m,h,p,b)=>{const v=e(m,h,p,b),x=t(m,h,p,b),w=n(m,h,p,b);return r(v,x,w,h,p,b)};else if(e&&t&&n)d=(m,h,p,b)=>{const v=e(m,h,p,b),x=t(m,h,p,b);return n(v,x,h,p,b)};else if(e&&t)d=(m,h,p,b)=>{const v=e(m,h,p,b);return t(v,h,p,b)};else if(e)d=e;else throw new Error("Missing arguments");return d},Mw=e=>(...t)=>{const n=new WeakMap;let r=1;const s=t[t.length-1],i=t.length-1||1,o=Math.max(s.length-i,0);if(o>3)throw new Error("Unsupported number of arguments");return(c,d,m,h)=>{let p=c.__cacheKey__;p||(p={id:r},c.__cacheKey__=p,r+=1);let b=n.get(p);if(!b){const v=t.length===1?[j=>j,s]:t;let x=t;const w=[void 0,void 0,void 0];switch(o){case 0:break;case 1:{x=[...v.slice(0,-1),()=>w[0],s];break}case 2:{x=[...v.slice(0,-1),()=>w[0],()=>w[1],s];break}case 3:{x=[...v.slice(0,-1),()=>w[0],()=>w[1],()=>w[2],s];break}default:throw new Error("Unsupported number of arguments")}e&&(x=[...x,e]),b=ole(...x),b.selectorArgs=w,n.set(p,b)}switch(o){case 3:b.selectorArgs[2]=h;case 2:b.selectorArgs[1]=m;case 1:b.selectorArgs[0]=d}switch(o){case 0:return b(c);case 1:return b(c,d);case 2:return b(c,d,m);case 3:return b(c,d,m,h);default:throw new Error("unreachable")}}},ia=Mw();var rS={exports:{}},sS={},iS={exports:{}},oS={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FI;function lle(){if(FI)return oS;FI=1;var e=hf();function t(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,s=e.useEffect,i=e.useLayoutEffect,o=e.useDebugValue;function l(h,p){var b=p(),v=r({inst:{value:b,getSnapshot:p}}),x=v[0].inst,w=v[1];return i(function(){x.value=b,x.getSnapshot=p,c(x)&&w({inst:x})},[h,b,p]),s(function(){return c(x)&&w({inst:x}),h(function(){c(x)&&w({inst:x})})},[h]),o(b),b}function c(h){var p=h.getSnapshot;h=h.value;try{var b=p();return!n(h,b)}catch{return!0}}function d(h,p){return p()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return oS.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:m,oS}var BI;function cle(){return BI||(BI=1,iS.exports=lle()),iS.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HI;function dle(){if(HI)return sS;HI=1;var e=hf(),t=cle();function n(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var r=typeof Object.is=="function"?Object.is:n,s=t.useSyncExternalStore,i=e.useRef,o=e.useEffect,l=e.useMemo,c=e.useDebugValue;return sS.useSyncExternalStoreWithSelector=function(d,m,h,p,b){var v=i(null);if(v.current===null){var x={hasValue:!1,value:null};v.current=x}else x=v.current;v=l(function(){function j(A){if(!C){if(C=!0,S=A,A=p(A),b!==void 0&&x.hasValue){var T=x.value;if(b(T,A))return _=T}return _=A}if(T=_,r(S,A))return T;var R=p(A);return b!==void 0&&b(T,R)?(S=A,T):(S=A,_=R)}var C=!1,S,_,E=h===void 0?null:h;return[function(){return j(m())},E===null?void 0:function(){return j(E())}]},[m,h,p,b]);var w=s(d,v[0],v[1]);return o(function(){x.hasValue=!0,x.value=w},[w]),c(w),w},sS}var GI;function ule(){return GI||(GI=1,rS.exports=dle()),rS.exports}var zB=ule();function mle(e,t,n,r,s){const i=o=>t(o,n,r,s);return zB.useSyncExternalStoreWithSelector(e.subscribe,e.getSnapshot,e.getSnapshot,i)}const VI={};function Iw(e,t){const n=g.useRef(VI);return n.current===VI&&(n.current=e(t)),n}const fle=[];function UB(e){g.useEffect(e,fle)}const hle=()=>{};function gle(e,t,n){const r=Iw(ple,{store:e,selector:t}).current;r.effect=n,UB(r.onMount)}function ple(e){const{store:t,selector:n}=e;let r=n(t.state);const s={effect:hle,dispose:null,subscribe:()=>{s.dispose??=t.subscribe(i=>{const o=n(i);if(!Object.is(r,o)){const l=r;r=o,s.effect(l,o)}})},onMount:()=>(s.subscribe(),()=>{s.dispose?.(),s.dispose=null})};return s.subscribe(),s}class vL{static create(t){return new vL(t)}constructor(t){this.state=t,this.listeners=new Set,this.updateTick=0}subscribe=t=>(this.listeners.add(t),()=>{this.listeners.delete(t)});getSnapshot=()=>this.state;setState(t){this.state=t,this.updateTick+=1;const n=this.updateTick,r=this.listeners.values();let s;for(;s=r.next(),!s.done;){if(n!==this.updateTick)return;const i=s.value;i(t)}}update(t){for(const n in t)if(!Object.is(this.state[n],t[n])){this.setState(ke({},this.state,t));return}}set(t,n){Object.is(this.state[t],n)||this.setState(ke({},this.state,{[t]:n}))}}const $w=({params:e,store:t})=>{g.useEffect(()=>{t.set("animation",ke({},t.state.animation,{skip:e.skipAnimation}))},[t,e.skipAnimation]);const n=g.useCallback(()=>{let r=!1;return t.set("animation",ke({},t.state.animation,{skipAnimationRequests:t.state.animation.skipAnimationRequests+1})),()=>{r||(r=!0,t.set("animation",ke({},t.state.animation,{skipAnimationRequests:t.state.animation.skipAnimationRequests-1})))}},[t]);return Ea(()=>{if(typeof window>"u"||!window?.matchMedia)return;let s;const i=l=>{l.matches?s=n():s?.()},o=window.matchMedia("(prefers-reduced-motion)");return i(o),o.addEventListener("change",i),()=>{o.removeEventListener("change",i)}},[n,t]),{instance:{disableAnimation:n}}};$w.params={skipAnimation:!0};$w.getDefaultizedParams=({params:e})=>ke({},e,{skipAnimation:e.skipAnimation??!1});$w.getInitialState=({skipAnimation:e})=>({animation:{skip:e,skipAnimationRequests:0}});const xle=e=>e.animation,yle=at(xle,e=>e.skip||e.skipAnimationRequests>0);function ble(e,t){const n=g.useRef(!0);g.useEffect(()=>{if(n.current){n.current=!1;return}return e()},t)}function tE(e){return e&&e.ownerDocument||document}function vle(e){return tE(e).defaultView||window}const mt=mle,Rw="DEFAULT_X_AXIS_KEY",wle="DEFAULT_Y_AXIS_KEY",Nle={top:20,bottom:20,left:20,right:20},jle=45,Cle=25,FB=20,so=e=>e.cartesianAxis?.x,hl=e=>e.cartesianAxis?.y,Sle=at(hl,function(t){return(t??[]).reduce((n,r)=>r.position==="left"?n+(r.width||0)+(r.zoom?.slider.enabled?r.zoom.slider.size:0):n,0)}),_le=at(hl,function(t){return(t??[]).reduce((n,r)=>r.position==="right"?n+(r.width||0)+(r.zoom?.slider.enabled?r.zoom.slider.size:0):n,0)}),Ale=at(so,function(t){return(t??[]).reduce((n,r)=>r.position==="top"?n+(r.height||0)+(r.zoom?.slider.enabled?r.zoom.slider.size:0):n,0)}),Ele=at(so,function(t){return(t??[]).reduce((n,r)=>r.position==="bottom"?n+(r.height||0)+(r.zoom?.slider.enabled?r.zoom.slider.size:0):n,0)}),Tle=ia(Sle,_le,Ale,Ele,function(t,n,r,s){return{left:t,right:n,top:r,bottom:s}}),tx=e=>e.dimensions,Lle=e=>e.dimensions.margin,Gr=ia(tx,Lle,Tle,function({width:t,height:n},{top:r,right:s,bottom:i,left:o},{left:l,right:c,top:d,bottom:m}){return{width:t-o-s-l-c,left:o+l,right:s+c,height:n-r-i-d-m,top:r+d,bottom:i+m}}),kle=at(tx,e=>e.width),Ple=at(tx,e=>e.height),BB=at(tx,e=>e.propsWidth),HB=at(tx,e=>e.propsHeight);function Dle(e,t){return typeof e=="number"?{top:e,bottom:e,left:e,right:e}:t?ke({},t,e):e}const Ole=10,zw=({params:e,store:t,svgRef:n})=>{const r=e.width!==void 0&&e.height!==void 0,s=g.useRef({displayError:!1,initialCompute:!0,computeRun:0}),[i,o]=g.useState(0),[l,c]=g.useState(0),d=g.useCallback(()=>{const v=n?.current;if(!v)return{};const w=vle(v).getComputedStyle(v),j=Math.floor(parseFloat(w.height))||0,C=Math.floor(parseFloat(w.width))||0;return(t.state.dimensions.width!==C||t.state.dimensions.height!==j)&&t.set("dimensions",{margin:{top:e.margin.top,right:e.margin.right,bottom:e.margin.bottom,left:e.margin.left},width:e.width??C,height:e.height??j,propsWidth:e.width,propsHeight:e.height}),{height:j,width:C}},[t,n,e.height,e.width,e.margin.left,e.margin.right,e.margin.top,e.margin.bottom]);ble(()=>{const v=e.width??t.state.dimensions.width,x=e.height??t.state.dimensions.height;t.set("dimensions",{margin:{top:e.margin.top,right:e.margin.right,bottom:e.margin.bottom,left:e.margin.left},width:v,height:x,propsHeight:e.height,propsWidth:e.width})},[t,e.height,e.width,e.margin.left,e.margin.right,e.margin.top,e.margin.bottom]),g.useEffect(()=>{s.current.displayError=!0},[]),Ea(()=>{if(r||!s.current.initialCompute||s.current.computeRun>Ole)return;const v=d();v.width!==i||v.height!==l?(s.current.computeRun+=1,v.width!==void 0&&o(v.width),v.height!==void 0&&c(v.height)):s.current.initialCompute&&(s.current.initialCompute=!1)},[l,i,d,r]),Ea(()=>{if(r)return()=>{};d();const v=n.current;if(typeof ResizeObserver>"u")return()=>{};let x;const w=new ResizeObserver(()=>{x=requestAnimationFrame(()=>{d()})});return v&&w.observe(v),()=>{x&&cancelAnimationFrame(x),v&&w.unobserve(v)}},[d,r,n]);const m=mt(t,Gr),h=g.useCallback(v=>v>=m.left-1&&v<=m.left+m.width,[m.left,m.width]),p=g.useCallback(v=>v>=m.top-1&&v<=m.top+m.height,[m.height,m.top]);return{instance:{isPointInside:g.useCallback((v,x,w)=>w&&"closest"in w&&w.closest("[data-drawing-container]")?!0:h(v)&&p(x),[h,p]),isXInside:h,isYInside:p}}};zw.params={width:!0,height:!0,margin:!0};zw.getDefaultizedParams=({params:e})=>ke({},e,{margin:Dle(e.margin,Nle)});zw.getInitialState=({width:e,height:t,margin:n})=>({dimensions:{margin:n,width:e??0,height:t??0,propsWidth:e,propsHeight:t}});const wL=({params:e,store:t})=>(Ea(()=>{t.set("experimentalFeatures",e.experimentalFeatures)},[t,e.experimentalFeatures]),{});wL.params={experimentalFeatures:!0};wL.getInitialState=({experimentalFeatures:e})=>({experimentalFeatures:e});const Mle=e=>e.experimentalFeatures,Uw=at(Mle,e=>!!e?.preferStrictDomainInLineCharts);let WI=0;const Ile=()=>(WI+=1,`mui-chart-${WI}`),NL=({params:e,store:t})=>(g.useEffect(()=>{e.id===void 0||e.id===t.state.id.providedChartId&&t.state.id.chartId!==void 0||t.set("id",ke({},t.state.id,{chartId:e.id??Ile()}))},[t,e.id]),{});NL.params={id:!0};NL.getInitialState=({id:e})=>({id:{chartId:e,providedChartId:e}});const $le=e=>e.id,Rle=at($le,e=>e.chartId),zle=["#4254FB","#FFB422","#FA4F58","#0DBEFF","#22BF75","#FA83B4","#FF7511"],Ule=["#495AFB","#FFC758","#F35865","#30C8FF","#44CE8D","#F286B3","#FF8C39"],GB=e=>e==="dark"?Ule:zle,VB=({series:e,colors:t,seriesConfig:n})=>{const r={};return e.forEach((s,i)=>{const o=n[s.type].getSeriesWithDefaultValues(s,i,t),l=o.id;if(r[s.type]===void 0&&(r[s.type]={series:{},seriesOrder:[]}),r[s.type]?.series[l]!==void 0)throw new Error(`MUI X Charts: series' id "${l}" is not unique.`);r[s.type].series[l]=o,r[s.type].seriesOrder.push(l)}),r},Fle=(e,t,n)=>{const r={};return Object.keys(t).forEach(s=>{const i=e[s];i!==void 0&&(r[s]=t[s]?.seriesProcessor?.(i,n)??i)}),r},Fw=({params:e,store:t,seriesConfig:n})=>{const{series:r,dataset:s,theme:i,colors:o}=e,l=g.useRef(!0);return g.useEffect(()=>{if(l.current){l.current=!1;return}t.set("series",ke({},t.state.series,{defaultizedSeries:VB({series:r,colors:typeof o=="function"?o(i):o,seriesConfig:n}),dataset:s}))},[o,s,r,i,n,t]),{}};Fw.params={dataset:!0,series:!0,colors:!0,theme:!0};const Ble=[];Fw.getDefaultizedParams=({params:e})=>ke({},e,{series:e.series?.length?e.series:Ble,colors:e.colors??GB,theme:e.theme??"light"});Fw.getInitialState=({series:e=[],colors:t,theme:n,dataset:r},s,i)=>({series:{seriesConfig:i,defaultizedSeries:VB({series:e,colors:typeof t=="function"?t(n):t,seriesConfig:i}),dataset:r}});const jL=e=>e.series,Hle=at(jL,e=>e.defaultizedSeries),ys=at(jL,e=>e.seriesConfig),Gle=at(jL,e=>e.dataset),Hn=ia(Hle,ys,Gle,function(t,n,r){return Fle(t,n,r)}),Vle={abort:!0,animationcancel:!0,animationend:!0,animationiteration:!0,animationstart:!0,auxclick:!0,beforeinput:!0,beforetoggle:!0,blur:!0,cancel:!0,canplay:!0,canplaythrough:!0,change:!0,click:!0,close:!0,compositionend:!0,compositionstart:!0,compositionupdate:!0,contextlost:!0,contextmenu:!0,contextrestored:!0,copy:!0,cuechange:!0,cut:!0,dblclick:!0,drag:!0,dragend:!0,dragenter:!0,dragleave:!0,dragover:!0,dragstart:!0,drop:!0,durationchange:!0,emptied:!0,ended:!0,error:!0,focus:!0,focusin:!0,focusout:!0,formdata:!0,gotpointercapture:!0,input:!0,invalid:!0,keydown:!0,keypress:!0,keyup:!0,load:!0,loadeddata:!0,loadedmetadata:!0,loadstart:!0,lostpointercapture:!0,mousedown:!0,mouseenter:!0,mouseleave:!0,mousemove:!0,mouseout:!0,mouseover:!0,mouseup:!0,paste:!0,pause:!0,play:!0,playing:!0,pointercancel:!0,pointerdown:!0,pointerenter:!0,pointerleave:!0,pointermove:!0,pointerout:!0,pointerover:!0,pointerup:!0,progress:!0,ratechange:!0,reset:!0,resize:!0,scroll:!0,scrollend:!0,securitypolicyviolation:!0,seeked:!0,seeking:!0,select:!0,selectionchange:!0,selectstart:!0,slotchange:!0,stalled:!0,submit:!0,suspend:!0,timeupdate:!0,toggle:!0,touchcancel:!0,touchend:!0,touchmove:!0,touchstart:!0,transitioncancel:!0,transitionend:!0,transitionrun:!0,transitionstart:!0,volumechange:!0,waiting:!0,webkitanimationend:!0,webkitanimationiteration:!0,webkitanimationstart:!0,webkittransitionend:!0,wheel:!0,beforematch:!0,pointerrawupdate:!0};class WB{customData={};constructor(t){if(!t||!t.name)throw new Error("Gesture must be initialized with a valid name.");if(t.name in Vle)throw new Error(`Gesture can't be created with a native event name. Tried to use "${t.name}". Please use a custom name instead.`);this.name=t.name,this.preventDefault=t.preventDefault??!1,this.stopPropagation=t.stopPropagation??!1,this.preventIf=t.preventIf??[],this.requiredKeys=t.requiredKeys??[],this.pointerMode=t.pointerMode??[],this.pointerOptions=t.pointerOptions??{}}init(t,n,r,s){this.element=t,this.pointerManager=n,this.gesturesRegistry=r,this.keyboardManager=s;const i=`${this.name}ChangeOptions`;this.element.addEventListener(i,this.handleOptionsChange);const o=`${this.name}ChangeState`;this.element.addEventListener(o,this.handleStateChange)}handleOptionsChange=t=>{t&&t.detail&&this.updateOptions(t.detail)};updateOptions(t){this.preventDefault=t.preventDefault??this.preventDefault,this.stopPropagation=t.stopPropagation??this.stopPropagation,this.preventIf=t.preventIf??this.preventIf,this.requiredKeys=t.requiredKeys??this.requiredKeys,this.pointerMode=t.pointerMode??this.pointerMode,this.pointerOptions=t.pointerOptions??this.pointerOptions}getBaseConfig(){return{requiredKeys:this.requiredKeys}}getEffectiveConfig(t,n){if(t!=="mouse"&&t!=="touch"&&t!=="pen")return n;const r=this.pointerOptions[t];return r?ke({},n,r):n}handleStateChange=t=>{t&&t.detail&&this.updateState(t.detail)};updateState(t){Object.assign(this.state,t)}getTargetElement(t){return this.isActive||this.element===t.target||"contains"in this.element&&this.element.contains(t.target)||"getRootNode"in this.element&&this.element.getRootNode()instanceof ShadowRoot&&t.composedPath().includes(this.element)?this.element:null}set isActive(t){t?this.gesturesRegistry.registerActiveGesture(this.element,this):this.gesturesRegistry.unregisterActiveGesture(this.element,this)}get isActive(){return this.gesturesRegistry.isGestureActive(this.element,this)??!1}shouldPreventGesture(t,n){const r=this.getEffectiveConfig(n,this.getBaseConfig());if(!this.keyboardManager.areKeysPressed(r.requiredKeys))return!0;if(this.preventIf.length===0)return!1;const s=this.gesturesRegistry.getActiveGestures(t);return this.preventIf.some(i=>s[i])}isPointerTypeAllowed(t){return!this.pointerMode||this.pointerMode.length===0?!0:this.pointerMode.includes(t)}destroy(){const t=`${this.name}ChangeOptions`;this.element.removeEventListener(t,this.handleOptionsChange);const n=`${this.name}ChangeState`;this.element.removeEventListener(n,this.handleStateChange)}}class Wle{activeGestures=new Map;registerActiveGesture(t,n){this.activeGestures.has(t)||this.activeGestures.set(t,new Set);const r=this.activeGestures.get(t),s={gesture:n,element:t};r.add(s)}unregisterActiveGesture(t,n){const r=this.activeGestures.get(t);r&&(r.forEach(s=>{s.gesture===n&&r.delete(s)}),r.size===0&&this.activeGestures.delete(t))}getActiveGestures(t){const n=this.activeGestures.get(t);return n?Array.from(n).reduce((r,s)=>(r[s.gesture.name]=!0,r),{}):{}}isGestureActive(t,n){const r=this.activeGestures.get(t);return r?Array.from(r).some(s=>s.gesture===n):!1}destroy(){this.activeGestures.clear()}unregisterElement(t){this.activeGestures.delete(t)}}class qle{pressedKeys=new Set;constructor(){this.initialize()}initialize(){typeof window>"u"||(window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp),window.addEventListener("blur",this.clearKeys))}handleKeyDown=t=>{this.pressedKeys.add(t.key)};handleKeyUp=t=>{this.pressedKeys.delete(t.key)};clearKeys=()=>{this.pressedKeys.clear()};areKeysPressed(t){return!t||t.length===0?!0:t.every(n=>n==="ControlOrMeta"?navigator.platform.includes("Mac")?this.pressedKeys.has("Meta"):this.pressedKeys.has("Control"):this.pressedKeys.has(n))}destroy(){typeof window<"u"&&(window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp),window.removeEventListener("blur",this.clearKeys)),this.clearKeys()}}class Yle{preventEventInterruption=!0;pointers=new Map;gestureHandlers=new Set;constructor(t){this.root=t.root??document.getRootNode({composed:!0})??document.body,this.touchAction=t.touchAction||"auto",this.passive=t.passive??!1,this.preventEventInterruption=t.preventEventInterruption??!0,this.setupEventListeners()}registerGestureHandler(t){return this.gestureHandlers.add(t),()=>{this.gestureHandlers.delete(t)}}getPointers(){return new Map(this.pointers)}setupEventListeners(){this.touchAction!=="auto"&&(this.root.style.touchAction=this.touchAction),this.root.addEventListener("pointerdown",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointermove",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointerup",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointercancel",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("forceCancel",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("blur",this.handleInterruptEvents),this.root.addEventListener("contextmenu",this.handleInterruptEvents)}handleInterruptEvents=t=>{if(this.preventEventInterruption&&"pointerType"in t&&t.pointerType==="touch"){t.preventDefault();return}const n=new PointerEvent("forceCancel",{bubbles:!1,cancelable:!1}),r=this.pointers.values().next().value;if(this.pointers.size>0&&r){Object.defineProperties(n,{clientX:{value:r.clientX},clientY:{value:r.clientY},pointerId:{value:r.pointerId},pointerType:{value:r.pointerType}});for(const[s,i]of this.pointers.entries()){const o=ke({},i,{type:"forceCancel"});this.pointers.set(s,o)}}this.notifyHandlers(n),this.pointers.clear()};handlePointerEvent=t=>{const{type:n,pointerId:r}=t;if(n==="pointerdown"||n==="pointermove")this.pointers.set(r,this.createPointerData(t));else if(n==="pointerup"||n==="pointercancel"||n==="forceCancel"){this.pointers.set(r,this.createPointerData(t)),this.notifyHandlers(t),this.pointers.delete(r);return}this.notifyHandlers(t)};notifyHandlers(t){this.gestureHandlers.forEach(n=>n(this.pointers,t))}createPointerData(t){return{pointerId:t.pointerId,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,target:t.target,timeStamp:t.timeStamp,type:t.type,isPrimary:t.isPrimary,pressure:t.pressure,width:t.width,height:t.height,pointerType:t.pointerType,srcEvent:t}}destroy(){this.root.removeEventListener("pointerdown",this.handlePointerEvent),this.root.removeEventListener("pointermove",this.handlePointerEvent),this.root.removeEventListener("pointerup",this.handlePointerEvent),this.root.removeEventListener("pointercancel",this.handlePointerEvent),this.root.removeEventListener("forceCancel",this.handlePointerEvent),this.root.removeEventListener("blur",this.handleInterruptEvents),this.root.removeEventListener("contextmenu",this.handleInterruptEvents),this.pointers.clear(),this.gestureHandlers.clear()}}class Kle{gestureTemplates=new Map;elementGestureMap=new Map;activeGesturesRegistry=new Wle;keyboardManager=new qle;constructor(t){this.pointerManager=new Yle({root:t.root,touchAction:t.touchAction,passive:t.passive}),t.gestures&&t.gestures.length>0&&t.gestures.forEach(n=>{this.addGestureTemplate(n)})}addGestureTemplate(t){this.gestureTemplates.has(t.name)&&console.warn(`Gesture template with name "${t.name}" already exists. It will be overwritten.`),this.gestureTemplates.set(t.name,t)}setGestureOptions(t,n,r){const s=this.elementGestureMap.get(n);if(!s||!s.has(t)){console.error(`Gesture "${t}" not found on the provided element.`);return}const i=new CustomEvent(`${t}ChangeOptions`,{detail:r,bubbles:!1,cancelable:!1,composed:!1});n.dispatchEvent(i)}setGestureState(t,n,r){const s=this.elementGestureMap.get(n);if(!s||!s.has(t)){console.error(`Gesture "${t}" not found on the provided element.`);return}const i=new CustomEvent(`${t}ChangeState`,{detail:r,bubbles:!1,cancelable:!1,composed:!1});n.dispatchEvent(i)}registerElement(t,n,r){return Array.isArray(t)||(t=[t]),t.forEach(s=>{const i=r?.[s];this.registerSingleGesture(s,n,i)}),n}registerSingleGesture(t,n,r){const s=this.gestureTemplates.get(t);if(!s)return console.error(`Gesture template "${t}" not found.`),!1;this.elementGestureMap.has(n)||this.elementGestureMap.set(n,new Map);const i=this.elementGestureMap.get(n);i.has(t)&&(console.warn(`Element already has gesture "${t}" registered. It will be replaced.`),this.unregisterElement(t,n));const o=s.clone(r);return o.init(n,this.pointerManager,this.activeGesturesRegistry,this.keyboardManager),i.set(t,o),!0}unregisterElement(t,n){const r=this.elementGestureMap.get(n);return!r||!r.has(t)?!1:(r.get(t).destroy(),r.delete(t),this.activeGesturesRegistry.unregisterElement(n),r.size===0&&this.elementGestureMap.delete(n),!0)}unregisterAllGestures(t){const n=this.elementGestureMap.get(t);if(n){for(const[,r]of n)r.destroy(),this.activeGesturesRegistry.unregisterElement(t);this.elementGestureMap.delete(t)}}destroy(){for(const[t]of this.elementGestureMap)this.unregisterAllGestures(t);this.gestureTemplates.clear(),this.elementGestureMap.clear(),this.activeGesturesRegistry.destroy(),this.keyboardManager.destroy(),this.pointerManager.destroy()}}class uu extends WB{unregisterHandler=null;originalTarget=null;constructor(t){super(t),this.minPointers=t.minPointers??1,this.maxPointers=t.maxPointers??1/0}init(t,n,r,s){super.init(t,n,r,s),this.unregisterHandler=this.pointerManager.registerGestureHandler(this.handlePointerEvent)}updateOptions(t){super.updateOptions(t),this.minPointers=t.minPointers??this.minPointers,this.maxPointers=t.maxPointers??this.maxPointers}getBaseConfig(){return{requiredKeys:this.requiredKeys,minPointers:this.minPointers,maxPointers:this.maxPointers}}isWithinPointerCount(t,n){const r=this.getEffectiveConfig(n,this.getBaseConfig());return t.length>=r.minPointers&&t.length<=r.maxPointers}getRelevantPointers(t,n){return t.filter(r=>this.isPointerTypeAllowed(r.pointerType)&&(n===r.target||r.target===this.originalTarget||n===this.originalTarget||"contains"in n&&n.contains(r.target))||"getRootNode"in n&&n.getRootNode()instanceof ShadowRoot&&r.srcEvent.composedPath().includes(n))}destroy(){this.unregisterHandler&&(this.unregisterHandler(),this.unregisterHandler=null),super.destroy()}}function Qle(e,t){const n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}function lS(e){if(e.length<2)return 0;let t=0,n=0;for(let r=0;r<e.length;r+=1)for(let s=r+1;s<e.length;s+=1)t+=Qle({x:e[r].clientX,y:e[r].clientY},{x:e[s].clientX,y:e[s].clientY}),n+=1;return n>0?t/n:0}function el(e){if(e.length===0)return{x:0,y:0};const t=e.reduce((n,r)=>(n.x+=r.clientX,n.y+=r.clientY,n),{x:0,y:0});return{x:t.x/e.length,y:t.y/e.length}}function zs(e,t){return`${e}${t==="ongoing"?"":t.charAt(0).toUpperCase()+t.slice(1)}`}const xy=1e-5,Yl=1e-5,qI=.15;function Xle(e,t){const n=t.x-e.x,r=t.y-e.y,s={vertical:null,horizontal:null,mainAxis:null},i=Zle(t,e),o=Math.abs(n)>Math.abs(r)?"horizontal":"vertical",l=i||o==="horizontal"?xy:qI,c=i?xy:o==="horizontal"?qI:xy;return Math.abs(n)>l&&(s.horizontal=n>0?"right":"left"),Math.abs(r)>c&&(s.vertical=r>0?"down":"up"),s.mainAxis=i?"diagonal":o,s}function Zle(e,t){const n=t.x-e.x,r=t.y-e.y,s=Math.atan2(r,n)*180/Math.PI;return s>=-45+Yl&&s<=-22.5+Yl||s>=22.5+Yl&&s<=45+Yl||s>=135+Yl&&s<=157.5+Yl||s>=-157.5+Yl&&s<=-135+Yl}function Jle(e,t){if(!e.vertical&&!e.horizontal)return!1;if(t.length===0)return!0;const n=e.vertical===null||t.includes(e.vertical),r=e.horizontal===null||t.includes(e.horizontal);return n&&r}const YI=0,ece=e=>e>YI?1:e<-YI?-1:0,ec=e=>{e.cancelable&&e.preventDefault()};class CL extends uu{state={lastPosition:null};constructor(t){super(t),this.threshold=t.threshold||0}clone(t){return new CL(ke({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}init(t,n,r,s){super.init(t,n,r,s),this.element.addEventListener("pointerenter",this.handleElementEnter),this.element.addEventListener("pointerleave",this.handleElementLeave)}destroy(){this.element.removeEventListener("pointerenter",this.handleElementEnter),this.element.removeEventListener("pointerleave",this.handleElementLeave),this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t)}resetState(){this.isActive=!1,this.state={lastPosition:null}}handleElementEnter=t=>{if(t.pointerType!=="mouse"&&t.pointerType!=="pen")return;const n=this.pointerManager.getPointers()||new Map,r=Array.from(n.values());if(this.isWithinPointerCount(r,t.pointerType)){this.isActive=!0;const s={x:t.clientX,y:t.clientY};this.state.lastPosition=s,this.emitMoveEvent(this.element,"start",r,t),this.emitMoveEvent(this.element,"ongoing",r,t)}};handleElementLeave=t=>{if(t.pointerType!=="mouse"&&t.pointerType!=="pen"||!this.isActive)return;const n=this.pointerManager.getPointers()||new Map,r=Array.from(n.values());this.emitMoveEvent(this.element,"end",r,t),this.resetState()};handlePointerEvent=(t,n)=>{if(n.type!=="pointermove"||n.pointerType!=="mouse"&&n.pointerType!=="pen")return;this.preventDefault&&n.preventDefault(),this.stopPropagation&&n.stopPropagation();const r=Array.from(t.values()),s=this.getTargetElement(n);if(!s||!this.isWithinPointerCount(r,n.pointerType))return;if(this.shouldPreventGesture(s,n.pointerType)){if(!this.isActive)return;this.resetState(),this.emitMoveEvent(s,"end",r,n);return}const i={x:n.clientX,y:n.clientY};this.state.lastPosition=i,this.isActive||(this.isActive=!0,this.emitMoveEvent(s,"start",r,n)),this.emitMoveEvent(s,"ongoing",r,n)};emitMoveEvent(t,n,r,s){const i=this.state.lastPosition||el(r),o=this.gesturesRegistry.getActiveGestures(t),l={gestureName:this.name,centroid:i,target:s.target,srcEvent:s,phase:n,pointers:r,timeStamp:s.timeStamp,activeGestures:o,customData:this.customData},c=zs(this.name,n),d=new CustomEvent(c,{bubbles:!0,cancelable:!0,composed:!0,detail:l});t.dispatchEvent(d)}}class Od extends uu{state={startPointers:new Map,startCentroid:null,lastCentroid:null,movementThresholdReached:!1,totalDeltaX:0,totalDeltaY:0,activeDeltaX:0,activeDeltaY:0,lastDirection:{vertical:null,horizontal:null,mainAxis:null},lastDeltas:null};constructor(t){super(t),this.direction=t.direction||["up","down","left","right"],this.threshold=t.threshold||0}clone(t){return new Od(ke({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,direction:[...this.direction],requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}destroy(){this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t),this.direction=t.direction||this.direction,this.threshold=t.threshold??this.threshold}resetState(){this.isActive=!1,this.state=ke({},this.state,{startPointers:new Map,startCentroid:null,lastCentroid:null,lastDeltas:null,activeDeltaX:0,activeDeltaY:0,movementThresholdReached:!1,lastDirection:{vertical:null,horizontal:null,mainAxis:null}})}handlePointerEvent=(t,n)=>{const r=Array.from(t.values());if(n.type==="forceCancel"){this.cancel(n.target,r,n);return}const s=this.getTargetElement(n);if(!s)return;if(this.shouldPreventGesture(s,n.pointerType)){this.cancel(s,r,n);return}const i=this.getRelevantPointers(r,s);if(!this.isWithinPointerCount(i,n.pointerType)){this.cancel(s,i,n);return}switch(n.type){case"pointerdown":!this.isActive&&!this.state.startCentroid&&(i.forEach(o=>{this.state.startPointers.set(o.pointerId,o)}),this.originalTarget=s,this.state.startCentroid=el(i),this.state.lastCentroid=ke({},this.state.startCentroid));break;case"pointermove":if(this.state.startCentroid&&this.isWithinPointerCount(r,n.pointerType)){const o=el(i),l=o.x-this.state.startCentroid.x,c=o.y-this.state.startCentroid.y,d=Math.sqrt(l*l+c*c),m=Xle(this.state.lastCentroid??this.state.startCentroid,o),h=this.state.lastCentroid?o.x-this.state.lastCentroid.x:0,p=this.state.lastCentroid?o.y-this.state.lastCentroid.y:0;!this.state.movementThresholdReached&&d>=this.threshold&&Jle(m,this.direction)?(this.state.movementThresholdReached=!0,this.isActive=!0,this.state.lastDeltas={x:h,y:p},this.state.totalDeltaX+=h,this.state.totalDeltaY+=p,this.state.activeDeltaX+=h,this.state.activeDeltaY+=p,this.emitPanEvent(s,"start",i,n,o),this.emitPanEvent(s,"ongoing",i,n,o)):this.state.movementThresholdReached&&this.isActive&&(this.state.lastDeltas={x:h,y:p},this.state.totalDeltaX+=h,this.state.totalDeltaY+=p,this.state.activeDeltaX+=h,this.state.activeDeltaY+=p,this.emitPanEvent(s,"ongoing",i,n,o)),this.state.lastCentroid=o,this.state.lastDirection=m}break;case"pointerup":case"pointercancel":case"forceCancel":if(this.isActive&&this.state.movementThresholdReached){const o=i.filter(l=>l.type!=="pointerup"&&l.type!=="pointercancel");if(!this.isWithinPointerCount(o,n.pointerType)){const l=this.state.lastCentroid||this.state.startCentroid;n.type==="pointercancel"&&this.emitPanEvent(s,"cancel",i,n,l),this.emitPanEvent(s,"end",i,n,l),this.resetState()}}else this.resetState();break}};emitPanEvent(t,n,r,s,i){if(!this.state.startCentroid)return;const o=this.state.lastDeltas?.x??0,l=this.state.lastDeltas?.y??0,c=this.state.startPointers.values().next().value,d=c?(s.timeStamp-c.timeStamp)/1e3:0,m=d>0?o/d:0,h=d>0?l/d:0,p=Math.sqrt(m*m+h*h),b=this.gesturesRegistry.getActiveGestures(t),v={gestureName:this.name,initialCentroid:this.state.startCentroid,centroid:i,target:s.target,srcEvent:s,phase:n,pointers:r,timeStamp:s.timeStamp,deltaX:o,deltaY:l,direction:this.state.lastDirection,velocityX:m,velocityY:h,velocity:p,totalDeltaX:this.state.totalDeltaX,totalDeltaY:this.state.totalDeltaY,activeDeltaX:this.state.activeDeltaX,activeDeltaY:this.state.activeDeltaY,activeGestures:b,customData:this.customData},x=zs(this.name,n),w=new CustomEvent(x,{bubbles:!0,cancelable:!0,composed:!0,detail:v});t.dispatchEvent(w),this.preventDefault&&s.preventDefault(),this.stopPropagation&&s.stopPropagation()}cancel(t,n,r){if(this.isActive){const s=t??this.element;this.emitPanEvent(s,"cancel",n,r,this.state.lastCentroid),this.emitPanEvent(s,"end",n,r,this.state.lastCentroid)}this.resetState()}}class SL extends uu{state={startDistance:0,lastDistance:0,lastScale:1,lastTime:0,velocity:0,totalScale:1,deltaScale:0};constructor(t){super(ke({},t,{minPointers:t.minPointers??2})),this.threshold=t.threshold??0}clone(t){return new SL(ke({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}destroy(){this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t)}resetState(){this.isActive=!1,this.state=ke({},this.state,{startDistance:0,lastDistance:0,lastScale:1,lastTime:0,velocity:0,deltaScale:0})}handlePointerEvent=(t,n)=>{const r=Array.from(t.values()),s=this.getTargetElement(n);if(!s)return;if(this.shouldPreventGesture(s,n.pointerType)){this.isActive&&(this.emitPinchEvent(s,"cancel",r,n),this.resetState());return}const i=this.getRelevantPointers(r,s);switch(n.type){case"pointerdown":if(i.length>=2&&!this.isActive){const o=lS(i);this.state.startDistance=o,this.state.lastDistance=o,this.state.lastTime=n.timeStamp,this.originalTarget=s}break;case"pointermove":if(this.state.startDistance&&this.isWithinPointerCount(i,n.pointerType)){const o=lS(i),l=Math.abs(o-this.state.lastDistance);if(l!==0&&l>=this.threshold){const c=this.state.startDistance?o/this.state.startDistance:1,d=c/this.state.lastScale;this.state.totalScale*=d;const m=(n.timeStamp-this.state.lastTime)/1e3;if(this.state.lastDistance){const p=(o-this.state.lastDistance)/m;this.state.velocity=Number.isNaN(p)?0:p}this.state.lastDistance=o,this.state.deltaScale=c-this.state.lastScale,this.state.lastScale=c,this.state.lastTime=n.timeStamp,this.isActive?this.emitPinchEvent(s,"ongoing",i,n):(this.isActive=!0,this.emitPinchEvent(s,"start",i,n),this.emitPinchEvent(s,"ongoing",i,n))}}break;case"pointerup":case"pointercancel":case"forceCancel":if(this.isActive){const o=i.filter(l=>l.type!=="pointerup"&&l.type!=="pointercancel");if(!this.isWithinPointerCount(o,n.pointerType))n.type==="pointercancel"&&this.emitPinchEvent(s,"cancel",i,n),this.emitPinchEvent(s,"end",i,n),this.resetState();else if(o.length>=2){const l=lS(o);this.state.startDistance=l/this.state.lastScale}}break}};emitPinchEvent(t,n,r,s){const i=el(r),o=this.state.lastDistance,l=this.state.lastScale,c=this.gesturesRegistry.getActiveGestures(t),d={gestureName:this.name,centroid:i,target:s.target,srcEvent:s,phase:n,pointers:r,timeStamp:s.timeStamp,scale:l,deltaScale:this.state.deltaScale,totalScale:this.state.totalScale,distance:o,velocity:this.state.velocity,activeGestures:c,direction:ece(this.state.velocity),customData:this.customData};this.preventDefault&&s.preventDefault(),this.stopPropagation&&s.stopPropagation();const m=zs(this.name,n),h=new CustomEvent(m,{bubbles:!0,cancelable:!0,composed:!0,detail:d});t.dispatchEvent(h)}}class Bw extends uu{state={startCentroid:null,lastPosition:null,timerId:null,startTime:0,pressThresholdReached:!1};constructor(t){super(t),this.duration=t.duration??500,this.maxDistance=t.maxDistance??10}clone(t){return new Bw(ke({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,duration:this.duration,maxDistance:this.maxDistance,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}destroy(){this.clearPressTimer(),this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t),this.duration=t.duration??this.duration,this.maxDistance=t.maxDistance??this.maxDistance}resetState(){this.clearPressTimer(),this.isActive=!1,this.state=ke({},this.state,{startCentroid:null,lastPosition:null,timerId:null,startTime:0,pressThresholdReached:!1})}clearPressTimer(){this.state.timerId!==null&&(clearTimeout(this.state.timerId),this.state.timerId=null)}handlePointerEvent=(t,n)=>{const r=Array.from(t.values());if(n.type==="forceCancel"){this.cancelPress(n.target,r,n);return}const s=this.getTargetElement(n);if(!s)return;if(this.shouldPreventGesture(s,n.pointerType)){this.isActive&&this.cancelPress(s,r,n);return}const i=this.getRelevantPointers(r,s);if(!this.isWithinPointerCount(i,n.pointerType)){this.isActive&&this.cancelPress(s,i,n);return}switch(n.type){case"pointerdown":!this.isActive&&!this.state.startCentroid&&(this.state.startCentroid=el(i),this.state.lastPosition=ke({},this.state.startCentroid),this.state.startTime=n.timeStamp,this.isActive=!0,this.originalTarget=s,this.clearPressTimer(),this.state.timerId=setTimeout(()=>{if(this.isActive&&this.state.startCentroid){this.state.pressThresholdReached=!0;const o=this.state.lastPosition;this.emitPressEvent(s,"start",i,n,o),this.emitPressEvent(s,"ongoing",i,n,o)}},this.duration));break;case"pointermove":if(this.isActive&&this.state.startCentroid){const o=el(i);this.state.lastPosition=o;const l=o.x-this.state.startCentroid.x,c=o.y-this.state.startCentroid.y;Math.sqrt(l*l+c*c)>this.maxDistance&&this.cancelPress(s,i,n)}break;case"pointerup":if(this.isActive){if(this.state.pressThresholdReached){const o=this.state.lastPosition||this.state.startCentroid;this.emitPressEvent(s,"end",i,n,o)}this.resetState()}break;case"pointercancel":case"forceCancel":this.cancelPress(s,i,n);break}};emitPressEvent(t,n,r,s,i){const o=this.gesturesRegistry.getActiveGestures(t),l=s.timeStamp-this.state.startTime,c={gestureName:this.name,centroid:i,target:s.target,srcEvent:s,phase:n,pointers:r,timeStamp:s.timeStamp,x:i.x,y:i.y,duration:l,activeGestures:o,customData:this.customData},d=zs(this.name,n),m=new CustomEvent(d,{bubbles:!0,cancelable:!0,composed:!0,detail:c});t.dispatchEvent(m),this.preventDefault&&s.preventDefault(),this.stopPropagation&&s.stopPropagation()}cancelPress(t,n,r){if(this.isActive&&this.state.pressThresholdReached){const s=this.state.lastPosition||this.state.startCentroid;this.emitPressEvent(t??this.element,"cancel",n,r,s),this.emitPressEvent(t??this.element,"end",n,r,s)}this.resetState()}}class _L extends uu{state={phase:"waitingForPress",dragTimeoutId:null};constructor(t){super(t),this.pressDuration=t.pressDuration??500,this.pressMaxDistance=t.pressMaxDistance??10,this.dragTimeout=t.dragTimeout??1e3,this.dragThreshold=t.dragThreshold??0,this.dragDirection=t.dragDirection||["up","down","left","right"],this.pressGesture=new Bw({name:`${this.name}-press`,duration:this.pressDuration,maxDistance:this.pressMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}),this.panGesture=new Od({name:`${this.name}-pan`,minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)})}clone(t){return new _L(ke({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,pressDuration:this.pressDuration,pressMaxDistance:this.pressMaxDistance,dragTimeout:this.dragTimeout,dragThreshold:this.dragThreshold,dragDirection:[...this.dragDirection],requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}init(t,n,r,s){super.init(t,n,r,s),this.pressGesture.init(t,n,r,s),this.panGesture.init(t,n,r,s),this.element.addEventListener(this.pressGesture.name,this.pressHandler),this.element.addEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.addEventListener(this.panGesture.name,this.dragMoveHandler),this.element.addEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.addEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler)}destroy(){this.resetState(),this.pressGesture.destroy(),this.panGesture.destroy(),this.element.removeEventListener(this.pressGesture.name,this.pressHandler),this.element.removeEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.removeEventListener(this.panGesture.name,this.dragMoveHandler),this.element.removeEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.removeEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler),super.destroy()}updateOptions(t){super.updateOptions(t),this.pressDuration=t.pressDuration??this.pressDuration,this.pressMaxDistance=t.pressMaxDistance??this.pressMaxDistance,this.dragTimeout=t.dragTimeout??this.dragTimeout,this.dragThreshold=t.dragThreshold??this.dragThreshold,this.dragDirection=t.dragDirection||this.dragDirection,this.element.dispatchEvent(new CustomEvent(`${this.panGesture.name}ChangeOptions`,{detail:{minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}})),this.element.dispatchEvent(new CustomEvent(`${this.pressGesture.name}ChangeOptions`,{detail:{duration:this.pressDuration,maxDistance:this.pressMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}}))}resetState(){this.state.dragTimeoutId!==null&&clearTimeout(this.state.dragTimeoutId),this.restoreTouchAction(),this.isActive=!1,this.state={phase:"waitingForPress",dragTimeoutId:null}}handlePointerEvent(){}pressHandler=()=>{this.state.phase==="waitingForPress"&&(this.state.phase="pressDetected",this.setTouchAction(),this.state.dragTimeoutId=setTimeout(()=>{this.resetState()},this.dragTimeout))};dragStartHandler=t=>{this.state.phase==="pressDetected"&&(this.state.dragTimeoutId!==null&&(clearTimeout(this.state.dragTimeoutId),this.state.dragTimeoutId=null),this.restoreTouchAction(),this.state.phase="dragging",this.isActive=!0,this.element.dispatchEvent(new CustomEvent(zs(this.name,t.detail.phase),t)))};dragMoveHandler=t=>{this.state.phase==="dragging"&&this.element.dispatchEvent(new CustomEvent(zs(this.name,t.detail.phase),t))};dragEndHandler=t=>{this.state.phase==="dragging"&&(this.resetState(),this.element.dispatchEvent(new CustomEvent(zs(this.name,t.detail.phase),t)))};setTouchAction(){this.element.addEventListener("touchstart",ec,{passive:!1}),this.element.addEventListener("touchmove",ec,{passive:!1}),this.element.addEventListener("touchend",ec,{passive:!1})}restoreTouchAction(){this.element.removeEventListener("touchstart",ec),this.element.removeEventListener("touchmove",ec),this.element.removeEventListener("touchend",ec)}}class sp extends uu{state={startCentroid:null,currentTapCount:0,lastTapTime:0,lastPosition:null};constructor(t){super(t),this.maxDistance=t.maxDistance??10,this.taps=t.taps??1}clone(t){return new sp(ke({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,maxDistance:this.maxDistance,taps:this.taps,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}destroy(){this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t),this.maxDistance=t.maxDistance??this.maxDistance,this.taps=t.taps??this.taps}resetState(){this.isActive=!1,this.state={startCentroid:null,currentTapCount:0,lastTapTime:0,lastPosition:null}}handlePointerEvent=(t,n)=>{const r=Array.from(t.values()),s=this.getTargetElement(n);if(!s)return;const i=this.getRelevantPointers(r,s);if(this.shouldPreventGesture(s,n.pointerType)||!this.isWithinPointerCount(i,n.pointerType)){this.isActive&&this.cancelTap(s,i,n);return}switch(n.type){case"pointerdown":this.isActive||(this.state.startCentroid=el(i),this.state.lastPosition=ke({},this.state.startCentroid),this.isActive=!0,this.originalTarget=s);break;case"pointermove":if(this.isActive&&this.state.startCentroid){const o=el(i);this.state.lastPosition=o;const l=o.x-this.state.startCentroid.x,c=o.y-this.state.startCentroid.y;Math.sqrt(l*l+c*c)>this.maxDistance&&this.cancelTap(s,i,n)}break;case"pointerup":if(this.isActive){this.state.currentTapCount+=1;const o=this.state.lastPosition||this.state.startCentroid;if(!o){this.cancelTap(s,i,n);return}this.state.currentTapCount>=this.taps?(this.fireTapEvent(s,i,n,o),this.resetState()):(this.state.lastTapTime=n.timeStamp,this.isActive=!1,this.state.startCentroid=null,setTimeout(()=>{this.state&&this.state.currentTapCount>0&&this.state.currentTapCount<this.taps&&(this.state.currentTapCount=0)},300))}break;case"pointercancel":case"forceCancel":this.cancelTap(s,i,n);break}};fireTapEvent(t,n,r,s){const i=this.gesturesRegistry.getActiveGestures(t),o={gestureName:this.name,centroid:s,target:r.target,srcEvent:r,phase:"end",pointers:n,timeStamp:r.timeStamp,x:s.x,y:s.y,tapCount:this.state.currentTapCount,activeGestures:i,customData:this.customData},l=new CustomEvent(this.name,{bubbles:!0,cancelable:!0,composed:!0,detail:o});t.dispatchEvent(l),this.preventDefault&&r.preventDefault(),this.stopPropagation&&r.stopPropagation()}cancelTap(t,n,r){if(this.state.startCentroid||this.state.lastPosition){const s=this.state.lastPosition||this.state.startCentroid,i=this.gesturesRegistry.getActiveGestures(t),o={gestureName:this.name,centroid:s,target:r.target,srcEvent:r,phase:"cancel",pointers:n,timeStamp:r.timeStamp,x:s.x,y:s.y,tapCount:this.state.currentTapCount,activeGestures:i,customData:this.customData},l=zs(this.name,"cancel"),c=new CustomEvent(l,{bubbles:!0,cancelable:!0,composed:!0,detail:o});t.dispatchEvent(c)}this.resetState()}}class AL extends uu{state={phase:"waitingForTap",dragTimeoutId:null};constructor(t){super(t),this.tapMaxDistance=t.tapMaxDistance??10,this.dragTimeout=t.dragTimeout??1e3,this.dragThreshold=t.dragThreshold??0,this.dragDirection=t.dragDirection||["up","down","left","right"],this.tapGesture=new sp({name:`${this.name}-tap`,maxDistance:this.tapMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}),this.panGesture=new Od({name:`${this.name}-pan`,minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)})}clone(t){return new AL(ke({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,tapMaxDistance:this.tapMaxDistance,dragTimeout:this.dragTimeout,dragThreshold:this.dragThreshold,dragDirection:[...this.dragDirection],requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}init(t,n,r,s){super.init(t,n,r,s),this.tapGesture.init(t,n,r,s),this.panGesture.init(t,n,r,s),this.element.addEventListener(this.tapGesture.name,this.tapHandler),this.element.addEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.addEventListener(this.panGesture.name,this.dragMoveHandler),this.element.addEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.addEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler)}destroy(){this.resetState(),this.tapGesture.destroy(),this.panGesture.destroy(),this.element.removeEventListener(this.tapGesture.name,this.tapHandler),this.element.removeEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.removeEventListener(this.panGesture.name,this.dragMoveHandler),this.element.removeEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.removeEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler),super.destroy()}updateOptions(t){super.updateOptions(t),this.tapMaxDistance=t.tapMaxDistance??this.tapMaxDistance,this.dragTimeout=t.dragTimeout??this.dragTimeout,this.dragThreshold=t.dragThreshold??this.dragThreshold,this.dragDirection=t.dragDirection||this.dragDirection,this.element.dispatchEvent(new CustomEvent(`${this.panGesture.name}ChangeOptions`,{detail:{minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}})),this.element.dispatchEvent(new CustomEvent(`${this.tapGesture.name}ChangeOptions`,{detail:{maxDistance:this.tapMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}}))}resetState(){this.state.dragTimeoutId!==null&&clearTimeout(this.state.dragTimeoutId),this.restoreTouchAction(),this.isActive=!1,this.state={phase:"waitingForTap",dragTimeoutId:null}}handlePointerEvent(){}tapHandler=()=>{this.state.phase==="waitingForTap"&&(this.state.phase="tapDetected",this.setTouchAction(),this.state.dragTimeoutId=setTimeout(()=>{this.resetState()},this.dragTimeout))};dragStartHandler=t=>{this.state.phase==="tapDetected"&&(this.state.dragTimeoutId!==null&&(clearTimeout(this.state.dragTimeoutId),this.state.dragTimeoutId=null),this.restoreTouchAction(),this.state.phase="dragging",this.isActive=!0,this.element.dispatchEvent(new CustomEvent(zs(this.name,t.detail.phase),t)))};dragMoveHandler=t=>{this.state.phase==="dragging"&&this.element.dispatchEvent(new CustomEvent(zs(this.name,t.detail.phase),t))};dragEndHandler=t=>{this.state.phase==="dragging"&&(this.resetState(),this.element.dispatchEvent(new CustomEvent(zs(this.name,t.detail.phase),t)))};setTouchAction(){this.element.addEventListener("touchstart",ec,{passive:!1})}restoreTouchAction(){this.element.removeEventListener("touchstart",ec)}}class Wb extends WB{state={totalDeltaX:0,totalDeltaY:0,totalDeltaZ:0};constructor(t){super(t),this.sensitivity=t.sensitivity??1,this.max=t.max??Number.MAX_SAFE_INTEGER,this.min=t.min??Number.MIN_SAFE_INTEGER,this.initialDelta=t.initialDelta??0,this.invert=t.invert??!1,this.state.totalDeltaX=this.initialDelta,this.state.totalDeltaY=this.initialDelta,this.state.totalDeltaZ=this.initialDelta}clone(t){return new Wb(ke({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,sensitivity:this.sensitivity,max:this.max,min:this.min,initialDelta:this.initialDelta,invert:this.invert,requiredKeys:[...this.requiredKeys],preventIf:[...this.preventIf]},t))}init(t,n,r,s){super.init(t,n,r,s),this.element.addEventListener("wheel",this.handleWheelEvent)}destroy(){this.element.removeEventListener("wheel",this.handleWheelEvent),this.resetState(),super.destroy()}resetState(){this.isActive=!1,this.state={totalDeltaX:0,totalDeltaY:0,totalDeltaZ:0}}updateOptions(t){super.updateOptions(t),this.sensitivity=t.sensitivity??this.sensitivity,this.max=t.max??this.max,this.min=t.min??this.min,this.initialDelta=t.initialDelta??this.initialDelta,this.invert=t.invert??this.invert}handleWheelEvent=t=>{if(this.shouldPreventGesture(this.element,"mouse"))return;const n=this.pointerManager.getPointers()||new Map,r=Array.from(n.values());this.state.totalDeltaX+=t.deltaX*this.sensitivity*(this.invert?-1:1),this.state.totalDeltaY+=t.deltaY*this.sensitivity*(this.invert?-1:1),this.state.totalDeltaZ+=t.deltaZ*this.sensitivity*(this.invert?-1:1),["totalDeltaX","totalDeltaY","totalDeltaZ"].forEach(s=>{this.state[s]<this.min&&(this.state[s]=this.min),this.state[s]>this.max&&(this.state[s]=this.max)}),this.emitWheelEvent(r,t)};emitWheelEvent(t,n){const r=t.length>0?el(t):{x:n.clientX,y:n.clientY},s=this.gesturesRegistry.getActiveGestures(this.element),i={gestureName:this.name,centroid:r,target:n.target,srcEvent:n,phase:"ongoing",pointers:t,timeStamp:n.timeStamp,deltaX:n.deltaX*this.sensitivity*(this.invert?-1:1),deltaY:n.deltaY*this.sensitivity*(this.invert?-1:1),deltaZ:n.deltaZ*this.sensitivity*(this.invert?-1:1),deltaMode:n.deltaMode,totalDeltaX:this.state.totalDeltaX,totalDeltaY:this.state.totalDeltaY,totalDeltaZ:this.state.totalDeltaZ,activeGestures:s,customData:this.customData};this.preventDefault&&n.preventDefault(),this.stopPropagation&&n.stopPropagation();const o=zs(this.name,"ongoing"),l=new CustomEvent(o,{bubbles:!0,cancelable:!0,composed:!0,detail:i});this.element.dispatchEvent(l)}}const fm=e=>e.preventDefault(),EL=({svgRef:e})=>{const t=g.useRef(null);g.useEffect(()=>{const s=e.current;t.current||(t.current=new Kle({gestures:[new Od({name:"pan",threshold:0,maxPointers:1}),new CL({name:"move",preventIf:["pan","zoomPinch","zoomPan"]}),new sp({name:"tap",preventIf:["pan","zoomPinch","zoomPan"]}),new Bw({name:"quickPress",duration:50}),new Od({name:"brush",threshold:0,maxPointers:1}),new Od({name:"zoomPan",threshold:0,preventIf:["zoomTapAndDrag","zoomPressAndDrag"]}),new SL({name:"zoomPinch",threshold:5}),new Wb({name:"zoomTurnWheel",sensitivity:.01,initialDelta:1}),new Wb({name:"panTurnWheel",sensitivity:.5}),new AL({name:"zoomTapAndDrag",dragThreshold:10}),new _L({name:"zoomPressAndDrag",dragThreshold:10,preventIf:["zoomPinch"]}),new sp({name:"zoomDoubleTapReset",taps:2})]}));const i=t.current;if(!(!s||!i))return i.registerElement(["pan","move","zoomPinch","zoomPan","zoomTurnWheel","panTurnWheel","tap","quickPress","zoomTapAndDrag","zoomPressAndDrag","zoomDoubleTapReset","brush"],s),()=>{i.unregisterAllGestures(s)}},[e,t]);const n=g.useCallback((s,i,o)=>{const l=e.current;return l?.addEventListener(s,i,o),{cleanup:()=>l?.removeEventListener(s,i)}},[e]),r=g.useCallback((s,i)=>{const o=e.current,l=t.current;!l||!o||l.setGestureOptions(s,o,i??{})},[e,t]);return g.useEffect(()=>{const s=e.current;return s?.addEventListener("gesturestart",fm),s?.addEventListener("gesturechange",fm),s?.addEventListener("gestureend",fm),()=>{s?.removeEventListener("gesturestart",fm),s?.removeEventListener("gesturechange",fm),s?.removeEventListener("gestureend",fm)}},[e]),{instance:{addInteractionListener:n,updateZoomInteractionListeners:r}}};EL.params={};EL.getInitialState=()=>({});const tce=[NL,wL,zw,Fw,EL,$w],nce=["apiRef"],ace=e=>{let{plugins:t}=e,n=$t(e.props,nce);const r={};t.forEach(o=>{Object.assign(r,o.params)});const s={};return Object.keys(n).forEach(o=>{const l=n[o];r[o]&&(s[o]=l)}),t.reduce((o,l)=>l.getDefaultizedParams?l.getDefaultizedParams({params:o}):o,s)};let KI=0;function rce(e,t,n){const r=Dw(),s=g.useMemo(()=>[...tce,...e],[e]),i=ace({plugins:s,props:t});i.id=i.id??r;const l=g.useRef({}).current,c=ice(t.apiRef),d=g.useRef(null),m=g.useRef(null),h=g.useRef(null);if(h.current==null){KI+=1;const v={cacheKey:{id:KI}};s.forEach(x=>{x.getInitialState&&Object.assign(v,x.getInitialState(i,v,n))}),h.current=new vL(v)}const p=v=>{const x=v({instance:l,params:i,plugins:s,store:h.current,svgRef:m,chartRootRef:d,seriesConfig:n});x.publicAPI&&Object.assign(c.current,x.publicAPI),x.instance&&Object.assign(l,x.instance)};return s.forEach(p),{contextValue:g.useMemo(()=>({store:h.current,publicAPI:c.current,instance:l,svgRef:m,chartRootRef:d}),[l,c])}}function sce(e){return e.current==null&&(e.current={}),e}function ice(e){const t=g.useRef({});return e?sce(e):t}const qB=g.createContext(null);const YB=()=>{},KB=4,QB=20+2*KB,oce=40+2*KB,lce="hover",yy={minStart:0,maxEnd:100,step:5,minSpan:10,maxSpan:100,panning:!0,filterMode:"keep",reverse:!1,slider:{enabled:!1,preview:!1,size:QB,showTooltip:lce}},TL=(e,t,n,r)=>{if(e)return e===!0?ke({axisId:t,axisDirection:n},yy,{reverse:r??!1}):ke({axisId:t,axisDirection:n},yy,{reverse:r??!1},e,{slider:ke({},yy.slider,{size:e.slider?.preview??yy.slider.preview?oce:QB},e.slider)})};function XB(e,t){const n={top:0,bottom:0,none:0};return(e&&e.length>0?e:[{id:Rw,scaleType:"linear"}]).map((i,o)=>{const l=i.dataKey,c=o===0?"bottom":"none",d=i.position??c,m=Cle+(i.label?FB:0),h=i.id??`defaultized-x-axis-${o}`,p=ke({offset:n[d]},i,{id:h,position:d,height:i.height??m,zoom:TL(i.zoom,h,"x",i.reverse)});if(d!=="none"&&(n[d]+=p.height,p.zoom?.slider.enabled&&(n[d]+=p.zoom.slider.size)),l===void 0||i.data!==void 0)return p;if(t===void 0)throw new Error("MUI X Charts: x-axis uses `dataKey` but no `dataset` is provided.");return ke({},p,{data:t.map(b=>b[l])})})}function ZB(e,t){const n={right:0,left:0,none:0};return(e&&e.length>0?e:[{id:wle,scaleType:"linear"}]).map((i,o)=>{const l=i.dataKey,c=o===0?"left":"none",d=i.position??c,m=jle+(i.label?FB:0),h=i.id??`defaultized-y-axis-${o}`,p=ke({offset:n[d]},i,{id:h,position:d,width:i.width??m,zoom:TL(i.zoom,h,"y",i.reverse)});if(d!=="none"&&(n[d]+=p.width,p.zoom?.slider.enabled&&(n[d]+=p.zoom.slider.size)),l===void 0||i.data!==void 0)return p;if(t===void 0)throw new Error("MUI X Charts: y-axis uses `dataKey` but no `dataset` is provided.");return ke({},p,{data:t.map(b=>b[l])})})}function cce(e,t){return function(r,s){if(s.location==="tick"){const i=s.scale.domain();return i[0]===i[1]?s.scale.tickFormat(1)(r):s.scale.tickFormat(e)(r)}return s.location==="zoom-slider-tooltip"?t.tickFormat(2)(r):`${r}`}}function mu(e){return e.scaleType==="band"}function fu(e){return e.scaleType==="point"}function dce(e){return e.scaleType!=="point"&&e.scaleType!=="band"}function uce(e){return e.scaleType==="symlog"}function nx(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function LL(e){let t=e,n=e;e.length===1&&(t=(o,l)=>e(o)-l,n=mce(e));function r(o,l,c,d){for(c==null&&(c=0),d==null&&(d=o.length);c<d;){const m=c+d>>>1;n(o[m],l)<0?c=m+1:d=m}return c}function s(o,l,c,d){for(c==null&&(c=0),d==null&&(d=o.length);c<d;){const m=c+d>>>1;n(o[m],l)>0?d=m:c=m+1}return c}function i(o,l,c,d){c==null&&(c=0),d==null&&(d=o.length);const m=r(o,l,c,d-1);return m>c&&t(o[m-1],l)>-t(o[m],l)?m-1:m}return{left:r,center:i,right:s}}function mce(e){return(t,n)=>nx(e(t),n)}function JB(e){return e===null?NaN:+e}function*fce(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const hce=LL(nx),ax=hce.right;LL(JB).center;class qb extends Map{constructor(t,n=xce){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,s]of t)this.set(r,s)}get(t){return super.get(QI(this,t))}has(t){return super.has(QI(this,t))}set(t,n){return super.set(gce(this,t),n)}delete(t){return super.delete(pce(this,t))}}function QI({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function gce({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function pce({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(n),e.delete(r)),n}function xce(e){return e!==null&&typeof e=="object"?e.valueOf():e}var nE=Math.sqrt(50),aE=Math.sqrt(10),rE=Math.sqrt(2);function sE(e,t,n){var r,s=-1,i,o,l;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),(l=eH(e,t,n))===0||!isFinite(l))return[];if(l>0){let c=Math.round(e/l),d=Math.round(t/l);for(c*l<e&&++c,d*l>t&&--d,o=new Array(i=d-c+1);++s<i;)o[s]=(c+s)*l}else{l=-l;let c=Math.round(e*l),d=Math.round(t*l);for(c/l<e&&++c,d/l>t&&--d,o=new Array(i=d-c+1);++s<i;)o[s]=(c+s)/l}return r&&o.reverse(),o}function eH(e,t,n){var r=(t-e)/Math.max(0,n),s=Math.floor(Math.log(r)/Math.LN10),i=r/Math.pow(10,s);return s>=0?(i>=nE?10:i>=aE?5:i>=rE?2:1)*Math.pow(10,s):-Math.pow(10,-s)/(i>=nE?10:i>=aE?5:i>=rE?2:1)}function iE(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),s=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),i=r/s;return i>=nE?s*=10:i>=aE?s*=5:i>=rE&&(s*=2),t<e?-s:s}function XI(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function ZI(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function tH(e,t,n=0,r=e.length-1,s=nx){for(;r>n;){if(r-n>600){const c=r-n+1,d=t-n+1,m=Math.log(c),h=.5*Math.exp(2*m/3),p=.5*Math.sqrt(m*h*(c-h)/c)*(d-c/2<0?-1:1),b=Math.max(n,Math.floor(t-d*h/c+p)),v=Math.min(r,Math.floor(t+(c-d)*h/c+p));tH(e,t,b,v,s)}const i=e[t];let o=n,l=r;for(Ph(e,n,t),s(e[r],i)>0&&Ph(e,n,r);o<l;){for(Ph(e,o,l),++o,--l;s(e[o],i)<0;)++o;for(;s(e[l],i)>0;)--l}s(e[n],i)===0?Ph(e,n,l):(++l,Ph(e,l,r)),l<=t&&(n=l+1),t<=l&&(r=l-1)}return e}function Ph(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function yce(e,t,n){if(e=Float64Array.from(fce(e)),!!(r=e.length)){if((t=+t)<=0||r<2)return ZI(e);if(t>=1)return XI(e);var r,s=(r-1)*t,i=Math.floor(s),o=XI(tH(e,i).subarray(0,i+1)),l=ZI(e.subarray(i+1));return o+(l-o)*(s-i)}}function bce(e,t,n=JB){if(r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,s=(r-1)*t,i=Math.floor(s),o=+n(e[i],i,e),l=+n(e[i+1],i+1,e);return o+(l-o)*(s-i)}}function nH(e,t,n){e=+e,t=+t,n=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+n;for(var r=-1,s=Math.max(0,Math.ceil((t-e)/n))|0,i=new Array(s);++r<s;)i[r]=e+r*n;return i}function Js(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function gl(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const oE=Symbol("implicit");function ip(){var e=new qb,t=[],n=[],r=oE;function s(i){let o=e.get(i);if(o===void 0){if(r!==oE)return r;e.set(i,o=t.push(i)-1)}return n[o%n.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new qb;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(n=Array.from(i),s):n.slice()},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return ip(t,n).unknown(r)},Js.apply(s,arguments),s}function kL(){var e=ip().unknown(void 0),t=e.domain,n=e.range,r=0,s=1,i,o,l=!1,c=0,d=0,m=.5;delete e.unknown;function h(){var p=t().length,b=s<r,v=b?s:r,x=b?r:s;i=(x-v)/Math.max(1,p-c+d*2),l&&(i=Math.floor(i)),v+=(x-v-i*(p-c))*m,o=i*(1-c),l&&(v=Math.round(v),o=Math.round(o));var w=nH(p).map(function(j){return v+i*j});return n(b?w.reverse():w)}return e.domain=function(p){return arguments.length?(t(p),h()):t()},e.range=function(p){return arguments.length?([r,s]=p,r=+r,s=+s,h()):[r,s]},e.rangeRound=function(p){return[r,s]=p,r=+r,s=+s,l=!0,h()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(p){return arguments.length?(l=!!p,h()):l},e.padding=function(p){return arguments.length?(c=Math.min(1,d=+p),h()):c},e.paddingInner=function(p){return arguments.length?(c=Math.min(1,p),h()):c},e.paddingOuter=function(p){return arguments.length?(d=+p,h()):d},e.align=function(p){return arguments.length?(m=Math.max(0,Math.min(1,p)),h()):m},e.copy=function(){return kL(t(),[r,s]).round(l).paddingInner(c).paddingOuter(d).align(m)},Js.apply(h(),arguments)}function aH(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return aH(t())},e}function vce(){return aH(kL.apply(null,arguments).paddingInner(1))}function PL(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function rH(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function rx(){}var op=.7,Yb=1/op,Fm="\\s*([+-]?\\d+)\\s*",lp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",qi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",wce=/^#([0-9a-f]{3,8})$/,Nce=new RegExp(`^rgb\\(${Fm},${Fm},${Fm}\\)$`),jce=new RegExp(`^rgb\\(${qi},${qi},${qi}\\)$`),Cce=new RegExp(`^rgba\\(${Fm},${Fm},${Fm},${lp}\\)$`),Sce=new RegExp(`^rgba\\(${qi},${qi},${qi},${lp}\\)$`),_ce=new RegExp(`^hsl\\(${lp},${qi},${qi}\\)$`),Ace=new RegExp(`^hsla\\(${lp},${qi},${qi},${lp}\\)$`),JI={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};PL(rx,cp,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:e5,formatHex:e5,formatHex8:Ece,formatHsl:Tce,formatRgb:t5,toString:t5});function e5(){return this.rgb().formatHex()}function Ece(){return this.rgb().formatHex8()}function Tce(){return sH(this).formatHsl()}function t5(){return this.rgb().formatRgb()}function cp(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=wce.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?n5(t):n===3?new Mr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?by(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?by(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Nce.exec(e))?new Mr(t[1],t[2],t[3],1):(t=jce.exec(e))?new Mr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Cce.exec(e))?by(t[1],t[2],t[3],t[4]):(t=Sce.exec(e))?by(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=_ce.exec(e))?s5(t[1],t[2]/100,t[3]/100,1):(t=Ace.exec(e))?s5(t[1],t[2]/100,t[3]/100,t[4]):JI.hasOwnProperty(e)?n5(JI[e]):e==="transparent"?new Mr(NaN,NaN,NaN,0):null}function n5(e){return new Mr(e>>16&255,e>>8&255,e&255,1)}function by(e,t,n,r){return r<=0&&(e=t=n=NaN),new Mr(e,t,n,r)}function Lce(e){return e instanceof rx||(e=cp(e)),e?(e=e.rgb(),new Mr(e.r,e.g,e.b,e.opacity)):new Mr}function lE(e,t,n,r){return arguments.length===1?Lce(e):new Mr(e,t,n,r??1)}function Mr(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}PL(Mr,lE,rH(rx,{brighter(e){return e=e==null?Yb:Math.pow(Yb,e),new Mr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?op:Math.pow(op,e),new Mr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Mr(Md(this.r),Md(this.g),Md(this.b),Kb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:a5,formatHex:a5,formatHex8:kce,formatRgb:r5,toString:r5}));function a5(){return`#${_d(this.r)}${_d(this.g)}${_d(this.b)}`}function kce(){return`#${_d(this.r)}${_d(this.g)}${_d(this.b)}${_d((isNaN(this.opacity)?1:this.opacity)*255)}`}function r5(){const e=Kb(this.opacity);return`${e===1?"rgb(":"rgba("}${Md(this.r)}, ${Md(this.g)}, ${Md(this.b)}${e===1?")":`, ${e})`}`}function Kb(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Md(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function _d(e){return e=Md(e),(e<16?"0":"")+e.toString(16)}function s5(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ui(e,t,n,r)}function sH(e){if(e instanceof ui)return new ui(e.h,e.s,e.l,e.opacity);if(e instanceof rx||(e=cp(e)),!e)return new ui;if(e instanceof ui)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,s=Math.min(t,n,r),i=Math.max(t,n,r),o=NaN,l=i-s,c=(i+s)/2;return l?(t===i?o=(n-r)/l+(n<r)*6:n===i?o=(r-t)/l+2:o=(t-n)/l+4,l/=c<.5?i+s:2-i-s,o*=60):l=c>0&&c<1?0:o,new ui(o,l,c,e.opacity)}function Pce(e,t,n,r){return arguments.length===1?sH(e):new ui(e,t,n,r??1)}function ui(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}PL(ui,Pce,rH(rx,{brighter(e){return e=e==null?Yb:Math.pow(Yb,e),new ui(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?op:Math.pow(op,e),new ui(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,s=2*n-r;return new Mr(cS(e>=240?e-240:e+120,s,r),cS(e,s,r),cS(e<120?e+240:e-120,s,r),this.opacity)},clamp(){return new ui(i5(this.h),vy(this.s),vy(this.l),Kb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Kb(this.opacity);return`${e===1?"hsl(":"hsla("}${i5(this.h)}, ${vy(this.s)*100}%, ${vy(this.l)*100}%${e===1?")":`, ${e})`}`}}));function i5(e){return e=(e||0)%360,e<0?e+360:e}function vy(e){return Math.max(0,Math.min(1,e||0))}function cS(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const DL=e=>()=>e;function Dce(e,t){return function(n){return e+n*t}}function Oce(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Mce(e){return(e=+e)==1?iH:function(t,n){return n-t?Oce(t,n,e):DL(isNaN(t)?n:t)}}function iH(e,t){var n=t-e;return n?Dce(e,n):DL(isNaN(e)?t:e)}const o5=(function e(t){var n=Mce(t);function r(s,i){var o=n((s=lE(s)).r,(i=lE(i)).r),l=n(s.g,i.g),c=n(s.b,i.b),d=iH(s.opacity,i.opacity);return function(m){return s.r=o(m),s.g=l(m),s.b=c(m),s.opacity=d(m),s+""}}return r.gamma=e,r})(1);function Ice(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),s;return function(i){for(s=0;s<n;++s)r[s]=e[s]*(1-i)+t[s]*i;return r}}function $ce(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Rce(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,s=new Array(r),i=new Array(n),o;for(o=0;o<r;++o)s[o]=jf(e[o],t[o]);for(;o<n;++o)i[o]=t[o];return function(l){for(o=0;o<r;++o)i[o]=s[o](l);return i}}function OL(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Qm(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function zce(e,t){var n={},r={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?n[s]=jf(e[s],t[s]):r[s]=t[s];return function(i){for(s in n)r[s]=n[s](i);return r}}var cE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dS=new RegExp(cE.source,"g");function Uce(e){return function(){return e}}function Fce(e){return function(t){return e(t)+""}}function ML(e,t){var n=cE.lastIndex=dS.lastIndex=0,r,s,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(r=cE.exec(e))&&(s=dS.exec(t));)(i=s.index)>n&&(i=t.slice(n,i),l[o]?l[o]+=i:l[++o]=i),(r=r[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,c.push({i:o,x:Qm(r,s)})),n=dS.lastIndex;return n<t.length&&(i=t.slice(n),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?Fce(c[0].x):Uce(t):(t=c.length,function(d){for(var m=0,h;m<t;++m)l[(h=c[m]).i]=h.x(d);return l.join("")})}function jf(e,t){var n=typeof t,r;return t==null||n==="boolean"?DL(t):(n==="number"?Qm:n==="string"?(r=cp(t))?(t=r,o5):ML:t instanceof cp?o5:t instanceof Date?OL:$ce(t)?Ice:Array.isArray(t)?Rce:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?zce:Qm)(e,t)}function IL(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Bce(e,t){t===void 0&&(t=e,e=jf);for(var n=0,r=t.length-1,s=t[0],i=new Array(r<0?0:r);n<r;)i[n]=e(s,s=t[++n]);return function(o){var l=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return i[l](o-l)}}function Hce(e){return function(){return e}}function Qb(e){return+e}var l5=[0,1];function vr(e){return e}function dE(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Hce(isNaN(t)?NaN:.5)}function Gce(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Vce(e,t,n){var r=e[0],s=e[1],i=t[0],o=t[1];return s<r?(r=dE(s,r),i=n(o,i)):(r=dE(r,s),i=n(i,o)),function(l){return i(r(l))}}function Wce(e,t,n){var r=Math.min(e.length,t.length)-1,s=new Array(r),i=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)s[o]=dE(e[o],e[o+1]),i[o]=n(t[o],t[o+1]);return function(l){var c=ax(e,l,1,r)-1;return i[c](s[c](l))}}function sx(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Hw(){var e=l5,t=l5,n=jf,r,s,i,o=vr,l,c,d;function m(){var p=Math.min(e.length,t.length);return o!==vr&&(o=Gce(e[0],e[p-1])),l=p>2?Wce:Vce,c=d=null,h}function h(p){return p==null||isNaN(p=+p)?i:(c||(c=l(e.map(r),t,n)))(r(o(p)))}return h.invert=function(p){return o(s((d||(d=l(t,e.map(r),Qm)))(p)))},h.domain=function(p){return arguments.length?(e=Array.from(p,Qb),m()):e.slice()},h.range=function(p){return arguments.length?(t=Array.from(p),m()):t.slice()},h.rangeRound=function(p){return t=Array.from(p),n=IL,m()},h.clamp=function(p){return arguments.length?(o=p?!0:vr,m()):o!==vr},h.interpolate=function(p){return arguments.length?(n=p,m()):n},h.unknown=function(p){return arguments.length?(i=p,h):i},function(p,b){return r=p,s=b,m()}}function $L(){return Hw()(vr,vr)}function qce(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Xb(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Xm(e){return e=Xb(Math.abs(e)),e?e[1]:NaN}function Yce(e,t){return function(n,r){for(var s=n.length,i=[],o=0,l=e[0],c=0;s>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),i.push(n.substring(s-=l,s+l)),!((c+=l+1)>r));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function Kce(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Qce=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function dp(e){if(!(t=Qce.exec(e)))throw new Error("invalid format: "+e);var t;return new RL({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}dp.prototype=RL.prototype;function RL(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}RL.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Xce(e){e:for(var t=e.length,n=1,r=-1,s;n<t;++n)switch(e[n]){case".":r=s=n;break;case"0":r===0&&(r=n),s=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(s+1):e}var oH;function Zce(e,t){var n=Xb(e,t);if(!n)return e+"";var r=n[0],s=n[1],i=s-(oH=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+Xb(e,Math.max(0,t+i-1))[0]}function c5(e,t){var n=Xb(e,t);if(!n)return e+"";var r=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+r:r.length>s+1?r.slice(0,s+1)+"."+r.slice(s+1):r+new Array(s-r.length+2).join("0")}const d5={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:qce,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>c5(e*100,t),r:c5,s:Zce,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function u5(e){return e}var m5=Array.prototype.map,f5=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Jce(e){var t=e.grouping===void 0||e.thousands===void 0?u5:Yce(m5.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?u5:Kce(m5.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(h){h=dp(h);var p=h.fill,b=h.align,v=h.sign,x=h.symbol,w=h.zero,j=h.width,C=h.comma,S=h.precision,_=h.trim,E=h.type;E==="n"?(C=!0,E="g"):d5[E]||(S===void 0&&(S=12),_=!0,E="g"),(w||p==="0"&&b==="=")&&(w=!0,p="0",b="=");var A=x==="$"?n:x==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",T=x==="$"?r:/[%p]/.test(E)?o:"",R=d5[E],U=/[defgprs%]/.test(E);S=S===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function W(I){var M=A,H=T,q,ae,K;if(E==="c")H=R(I)+H,I="";else{I=+I;var B=I<0||1/I<0;if(I=isNaN(I)?c:R(Math.abs(I),S),_&&(I=Xce(I)),B&&+I==0&&v!=="+"&&(B=!1),M=(B?v==="("?v:l:v==="-"||v==="("?"":v)+M,H=(E==="s"?f5[8+oH/3]:"")+H+(B&&v==="("?")":""),U){for(q=-1,ae=I.length;++q<ae;)if(K=I.charCodeAt(q),48>K||K>57){H=(K===46?s+I.slice(q+1):I.slice(q))+H,I=I.slice(0,q);break}}}C&&!w&&(I=t(I,1/0));var X=M.length+I.length+H.length,le=X<j?new Array(j-X+1).join(p):"";switch(C&&w&&(I=t(le+I,le.length?j-H.length:1/0),le=""),b){case"<":I=M+I+H+le;break;case"=":I=M+le+I+H;break;case"^":I=le.slice(0,X=le.length>>1)+M+I+H+le.slice(X);break;default:I=le+M+I+H;break}return i(I)}return W.toString=function(){return h+""},W}function m(h,p){var b=d((h=dp(h),h.type="f",h)),v=Math.max(-8,Math.min(8,Math.floor(Xm(p)/3)))*3,x=Math.pow(10,-v),w=f5[8+v/3];return function(j){return b(x*j)+w}}return{format:d,formatPrefix:m}}var wy,zL,lH;ede({thousands:",",grouping:[3],currency:["$",""]});function ede(e){return wy=Jce(e),zL=wy.format,lH=wy.formatPrefix,wy}function tde(e){return Math.max(0,-Xm(Math.abs(e)))}function nde(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Xm(t)/3)))*3-Xm(Math.abs(e)))}function ade(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Xm(t)-Xm(e))+1}function cH(e,t,n,r){var s=iE(e,t,n),i;switch(r=dp(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(i=nde(s,o))&&(r.precision=i),lH(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=ade(s,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=tde(s))&&(r.precision=i-(r.type==="%")*2);break}}return zL(r)}function Ec(e){var t=e.domain;return e.ticks=function(n){var r=t();return sE(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var s=t();return cH(s[0],s[s.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),s=0,i=r.length-1,o=r[s],l=r[i],c,d,m=10;for(l<o&&(d=o,o=l,l=d,d=s,s=i,i=d);m-- >0;){if(d=eH(o,l,n),d===c)return r[s]=o,r[i]=l,t(r);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return e},e}function Gw(){var e=$L();return e.copy=function(){return sx(e,Gw())},Js.apply(e,arguments),Ec(e)}function dH(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Qb),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return dH(e).unknown(t)},e=arguments.length?Array.from(e,Qb):[0,1],Ec(n)}function uH(e,t){e=e.slice();var n=0,r=e.length-1,s=e[n],i=e[r],o;return i<s&&(o=n,n=r,r=o,o=s,s=i,i=o),e[n]=t.floor(s),e[r]=t.ceil(i),e}function h5(e){return Math.log(e)}function g5(e){return Math.exp(e)}function rde(e){return-Math.log(-e)}function sde(e){return-Math.exp(-e)}function ide(e){return isFinite(e)?+("1e"+e):e<0?0:e}function ode(e){return e===10?ide:e===Math.E?Math.exp:t=>Math.pow(e,t)}function lde(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function p5(e){return(t,n)=>-e(-t,n)}function UL(e){const t=e(h5,g5),n=t.domain;let r=10,s,i;function o(){return s=lde(r),i=ode(r),n()[0]<0?(s=p5(s),i=p5(i),e(rde,sde)):e(h5,g5),t}return t.base=function(l){return arguments.length?(r=+l,o()):r},t.domain=function(l){return arguments.length?(n(l),o()):n()},t.ticks=l=>{const c=n();let d=c[0],m=c[c.length-1];const h=m<d;h&&([d,m]=[m,d]);let p=s(d),b=s(m),v,x;const w=l==null?10:+l;let j=[];if(!(r%1)&&b-p<w){if(p=Math.floor(p),b=Math.ceil(b),d>0){for(;p<=b;++p)for(v=1;v<r;++v)if(x=p<0?v/i(-p):v*i(p),!(x<d)){if(x>m)break;j.push(x)}}else for(;p<=b;++p)for(v=r-1;v>=1;--v)if(x=p>0?v/i(-p):v*i(p),!(x<d)){if(x>m)break;j.push(x)}j.length*2<w&&(j=sE(d,m,w))}else j=sE(p,b,Math.min(b-p,w)).map(i);return h?j.reverse():j},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=dp(c)).precision==null&&(c.trim=!0),c=zL(c)),l===1/0)return c;const d=Math.max(1,r*l/t.ticks().length);return m=>{let h=m/i(Math.round(s(m)));return h*r<r-.5&&(h*=r),h<=d?c(m):""}},t.nice=()=>n(uH(n(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),t}function up(){const e=UL(Hw()).domain([1,10]);return e.copy=()=>sx(e,up()).base(e.base()),Js.apply(e,arguments),e}function x5(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function y5(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function FL(e){var t=1,n=e(x5(t),y5(t));return n.constant=function(r){return arguments.length?e(x5(t=+r),y5(t)):t},Ec(n)}function BL(){var e=FL(Hw());return e.copy=function(){return sx(e,BL()).constant(e.constant())},Js.apply(e,arguments)}function b5(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function cde(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function dde(e){return e<0?-e*e:e*e}function HL(e){var t=e(vr,vr),n=1;function r(){return n===1?e(vr,vr):n===.5?e(cde,dde):e(b5(n),b5(1/n))}return t.exponent=function(s){return arguments.length?(n=+s,r()):n},Ec(t)}function Vw(){var e=HL(Hw());return e.copy=function(){return sx(e,Vw()).exponent(e.exponent())},Js.apply(e,arguments),e}function mH(){return Vw.apply(null,arguments).exponent(.5)}function v5(e){return Math.sign(e)*e*e}function ude(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function fH(){var e=$L(),t=[0,1],n=!1,r;function s(i){var o=ude(e(i));return isNaN(o)?r:n?Math.round(o):o}return s.invert=function(i){return e.invert(v5(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,Qb)).map(v5)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(n=!!i,s):n},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return fH(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},Js.apply(s,arguments),Ec(s)}function hH(){var e=[],t=[],n=[],r;function s(){var o=0,l=Math.max(1,t.length);for(n=new Array(l-1);++o<l;)n[o-1]=bce(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?r:t[ax(n,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(nx),s()},i.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.quantiles=function(){return n.slice()},i.copy=function(){return hH().domain(e).range(t).unknown(r)},Js.apply(i,arguments)}function gH(){var e=0,t=1,n=1,r=[.5],s=[0,1],i;function o(c){return c!=null&&c<=c?s[ax(r,c,0,n)]:i}function l(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*t-(c-n)*e)/(n+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(n=(s=Array.from(c)).length-1,l()):s.slice()},o.invertExtent=function(c){var d=s.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,r[0]]:d>=n?[r[n-1],t]:[r[d-1],r[d]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return r.slice()},o.copy=function(){return gH().domain([e,t]).range(s).unknown(i)},Js.apply(Ec(o),arguments)}function GL(){var e=[.5],t=[0,1],n,r=1;function s(i){return i!=null&&i<=i?t[ax(e,i,0,r)]:n}return s.domain=function(i){return arguments.length?(e=Array.from(i),r=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),r=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return GL().domain(e).range(t).unknown(n)},Js.apply(s,arguments)}const uS=new Date,mS=new Date;function Ta(e,t,n,r){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const o=s(i),l=s.ceil(i);return i-o<l-i?o:l},s.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,l)=>{const c=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let d;do c.push(d=new Date(+i)),t(i,l),e(i);while(d<i&&i<o);return c},s.filter=i=>Ta(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),n&&(s.count=(i,o)=>(uS.setTime(+i),mS.setTime(+o),e(uS),e(mS),Math.floor(n(uS,mS))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(r?o=>r(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const Zb=Ta(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Zb.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ta(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Zb);Zb.range;const Ho=1e3,$s=Ho*60,Go=$s*60,tl=Go*24,VL=tl*7,w5=tl*30,fS=tl*365,Ad=Ta(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ho)},(e,t)=>(t-e)/Ho,e=>e.getUTCSeconds());Ad.range;const WL=Ta(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ho)},(e,t)=>{e.setTime(+e+t*$s)},(e,t)=>(t-e)/$s,e=>e.getMinutes());WL.range;const qL=Ta(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*$s)},(e,t)=>(t-e)/$s,e=>e.getUTCMinutes());qL.range;const YL=Ta(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ho-e.getMinutes()*$s)},(e,t)=>{e.setTime(+e+t*Go)},(e,t)=>(t-e)/Go,e=>e.getHours());YL.range;const KL=Ta(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Go)},(e,t)=>(t-e)/Go,e=>e.getUTCHours());KL.range;const ix=Ta(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*$s)/tl,e=>e.getDate()-1);ix.range;const Ww=Ta(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/tl,e=>e.getUTCDate()-1);Ww.range;const pH=Ta(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/tl,e=>Math.floor(e/tl));pH.range;function hu(e){return Ta(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*$s)/VL)}const qw=hu(0),Jb=hu(1),mde=hu(2),fde=hu(3),Zm=hu(4),hde=hu(5),gde=hu(6);qw.range;Jb.range;mde.range;fde.range;Zm.range;hde.range;gde.range;function gu(e){return Ta(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/VL)}const Yw=gu(0),ev=gu(1),pde=gu(2),xde=gu(3),Jm=gu(4),yde=gu(5),bde=gu(6);Yw.range;ev.range;pde.range;xde.range;Jm.range;yde.range;bde.range;const QL=Ta(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());QL.range;const XL=Ta(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());XL.range;const nl=Ta(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());nl.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ta(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});nl.range;const al=Ta(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());al.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ta(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});al.range;function xH(e,t,n,r,s,i){const o=[[Ad,1,Ho],[Ad,5,5*Ho],[Ad,15,15*Ho],[Ad,30,30*Ho],[i,1,$s],[i,5,5*$s],[i,15,15*$s],[i,30,30*$s],[s,1,Go],[s,3,3*Go],[s,6,6*Go],[s,12,12*Go],[r,1,tl],[r,2,2*tl],[n,1,VL],[t,1,w5],[t,3,3*w5],[e,1,fS]];function l(d,m,h){const p=m<d;p&&([d,m]=[m,d]);const b=h&&typeof h.range=="function"?h:c(d,m,h),v=b?b.range(d,+m+1):[];return p?v.reverse():v}function c(d,m,h){const p=Math.abs(m-d)/h,b=LL(([,,w])=>w).right(o,p);if(b===o.length)return e.every(iE(d/fS,m/fS,h));if(b===0)return Zb.every(Math.max(iE(d,m,h),1));const[v,x]=o[p/o[b-1][2]<o[b][2]/p?b-1:b];return v.every(x)}return[l,c]}const[vde,wde]=xH(al,XL,Yw,pH,KL,qL),[Nde,jde]=xH(nl,QL,qw,ix,YL,WL);function hS(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function gS(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Dh(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Cde(e){var t=e.dateTime,n=e.date,r=e.time,s=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,d=Oh(s),m=Mh(s),h=Oh(i),p=Mh(i),b=Oh(o),v=Mh(o),x=Oh(l),w=Mh(l),j=Oh(c),C=Mh(c),S={a:B,A:X,b:le,B:ue,c:null,d:A5,e:A5,f:qde,g:aue,G:sue,H:Gde,I:Vde,j:Wde,L:yH,m:Yde,M:Kde,p:J,q:ne,Q:L5,s:k5,S:Qde,u:Xde,U:Zde,V:Jde,w:eue,W:tue,x:null,X:null,y:nue,Y:rue,Z:iue,"%":T5},_={a:pe,A:we,b:ye,B:Te,c:null,d:E5,e:E5,f:due,g:vue,G:Nue,H:oue,I:lue,j:cue,L:vH,m:uue,M:mue,p:Ae,q:Pe,Q:L5,s:k5,S:fue,u:hue,U:gue,V:pue,w:xue,W:yue,x:null,X:null,y:bue,Y:wue,Z:jue,"%":T5},E={a:W,A:I,b:M,B:H,c:q,d:S5,e:S5,f:Ude,g:C5,G:j5,H:_5,I:_5,j:Ide,L:zde,m:Mde,M:$de,p:U,q:Ode,Q:Bde,s:Hde,S:Rde,u:Tde,U:Lde,V:kde,w:Ede,W:Pde,x:ae,X:K,y:C5,Y:j5,Z:Dde,"%":Fde};S.x=A(n,S),S.X=A(r,S),S.c=A(t,S),_.x=A(n,_),_.X=A(r,_),_.c=A(t,_);function A($,Ne){return function(fe){var O=[],ce=-1,de=0,Ce=$.length,Ee,Ge,Je;for(fe instanceof Date||(fe=new Date(+fe));++ce<Ce;)$.charCodeAt(ce)===37&&(O.push($.slice(de,ce)),(Ge=N5[Ee=$.charAt(++ce)])!=null?Ee=$.charAt(++ce):Ge=Ee==="e"?" ":"0",(Je=Ne[Ee])&&(Ee=Je(fe,Ge)),O.push(Ee),de=ce+1);return O.push($.slice(de,ce)),O.join("")}}function T($,Ne){return function(fe){var O=Dh(1900,void 0,1),ce=R(O,$,fe+="",0),de,Ce;if(ce!=fe.length)return null;if("Q"in O)return new Date(O.Q);if("s"in O)return new Date(O.s*1e3+("L"in O?O.L:0));if(Ne&&!("Z"in O)&&(O.Z=0),"p"in O&&(O.H=O.H%12+O.p*12),O.m===void 0&&(O.m="q"in O?O.q:0),"V"in O){if(O.V<1||O.V>53)return null;"w"in O||(O.w=1),"Z"in O?(de=gS(Dh(O.y,0,1)),Ce=de.getUTCDay(),de=Ce>4||Ce===0?ev.ceil(de):ev(de),de=Ww.offset(de,(O.V-1)*7),O.y=de.getUTCFullYear(),O.m=de.getUTCMonth(),O.d=de.getUTCDate()+(O.w+6)%7):(de=hS(Dh(O.y,0,1)),Ce=de.getDay(),de=Ce>4||Ce===0?Jb.ceil(de):Jb(de),de=ix.offset(de,(O.V-1)*7),O.y=de.getFullYear(),O.m=de.getMonth(),O.d=de.getDate()+(O.w+6)%7)}else("W"in O||"U"in O)&&("w"in O||(O.w="u"in O?O.u%7:"W"in O?1:0),Ce="Z"in O?gS(Dh(O.y,0,1)).getUTCDay():hS(Dh(O.y,0,1)).getDay(),O.m=0,O.d="W"in O?(O.w+6)%7+O.W*7-(Ce+5)%7:O.w+O.U*7-(Ce+6)%7);return"Z"in O?(O.H+=O.Z/100|0,O.M+=O.Z%100,gS(O)):hS(O)}}function R($,Ne,fe,O){for(var ce=0,de=Ne.length,Ce=fe.length,Ee,Ge;ce<de;){if(O>=Ce)return-1;if(Ee=Ne.charCodeAt(ce++),Ee===37){if(Ee=Ne.charAt(ce++),Ge=E[Ee in N5?Ne.charAt(ce++):Ee],!Ge||(O=Ge($,fe,O))<0)return-1}else if(Ee!=fe.charCodeAt(O++))return-1}return O}function U($,Ne,fe){var O=d.exec(Ne.slice(fe));return O?($.p=m.get(O[0].toLowerCase()),fe+O[0].length):-1}function W($,Ne,fe){var O=b.exec(Ne.slice(fe));return O?($.w=v.get(O[0].toLowerCase()),fe+O[0].length):-1}function I($,Ne,fe){var O=h.exec(Ne.slice(fe));return O?($.w=p.get(O[0].toLowerCase()),fe+O[0].length):-1}function M($,Ne,fe){var O=j.exec(Ne.slice(fe));return O?($.m=C.get(O[0].toLowerCase()),fe+O[0].length):-1}function H($,Ne,fe){var O=x.exec(Ne.slice(fe));return O?($.m=w.get(O[0].toLowerCase()),fe+O[0].length):-1}function q($,Ne,fe){return R($,t,Ne,fe)}function ae($,Ne,fe){return R($,n,Ne,fe)}function K($,Ne,fe){return R($,r,Ne,fe)}function B($){return o[$.getDay()]}function X($){return i[$.getDay()]}function le($){return c[$.getMonth()]}function ue($){return l[$.getMonth()]}function J($){return s[+($.getHours()>=12)]}function ne($){return 1+~~($.getMonth()/3)}function pe($){return o[$.getUTCDay()]}function we($){return i[$.getUTCDay()]}function ye($){return c[$.getUTCMonth()]}function Te($){return l[$.getUTCMonth()]}function Ae($){return s[+($.getUTCHours()>=12)]}function Pe($){return 1+~~($.getUTCMonth()/3)}return{format:function($){var Ne=A($+="",S);return Ne.toString=function(){return $},Ne},parse:function($){var Ne=T($+="",!1);return Ne.toString=function(){return $},Ne},utcFormat:function($){var Ne=A($+="",_);return Ne.toString=function(){return $},Ne},utcParse:function($){var Ne=T($+="",!0);return Ne.toString=function(){return $},Ne}}}var N5={"-":"",_:" ",0:"0"},Fa=/^\s*\d+/,Sde=/^%/,_de=/[\\^$*+?|[\]().{}]/g;function Vt(e,t,n){var r=e<0?"-":"",s=(r?-e:e)+"",i=s.length;return r+(i<n?new Array(n-i+1).join(t)+s:s)}function Ade(e){return e.replace(_de,"\\$&")}function Oh(e){return new RegExp("^(?:"+e.map(Ade).join("|")+")","i")}function Mh(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Ede(e,t,n){var r=Fa.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Tde(e,t,n){var r=Fa.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Lde(e,t,n){var r=Fa.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function kde(e,t,n){var r=Fa.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Pde(e,t,n){var r=Fa.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function j5(e,t,n){var r=Fa.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function C5(e,t,n){var r=Fa.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Dde(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Ode(e,t,n){var r=Fa.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Mde(e,t,n){var r=Fa.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function S5(e,t,n){var r=Fa.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Ide(e,t,n){var r=Fa.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function _5(e,t,n){var r=Fa.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function $de(e,t,n){var r=Fa.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Rde(e,t,n){var r=Fa.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function zde(e,t,n){var r=Fa.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Ude(e,t,n){var r=Fa.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Fde(e,t,n){var r=Sde.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Bde(e,t,n){var r=Fa.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Hde(e,t,n){var r=Fa.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function A5(e,t){return Vt(e.getDate(),t,2)}function Gde(e,t){return Vt(e.getHours(),t,2)}function Vde(e,t){return Vt(e.getHours()%12||12,t,2)}function Wde(e,t){return Vt(1+ix.count(nl(e),e),t,3)}function yH(e,t){return Vt(e.getMilliseconds(),t,3)}function qde(e,t){return yH(e,t)+"000"}function Yde(e,t){return Vt(e.getMonth()+1,t,2)}function Kde(e,t){return Vt(e.getMinutes(),t,2)}function Qde(e,t){return Vt(e.getSeconds(),t,2)}function Xde(e){var t=e.getDay();return t===0?7:t}function Zde(e,t){return Vt(qw.count(nl(e)-1,e),t,2)}function bH(e){var t=e.getDay();return t>=4||t===0?Zm(e):Zm.ceil(e)}function Jde(e,t){return e=bH(e),Vt(Zm.count(nl(e),e)+(nl(e).getDay()===4),t,2)}function eue(e){return e.getDay()}function tue(e,t){return Vt(Jb.count(nl(e)-1,e),t,2)}function nue(e,t){return Vt(e.getFullYear()%100,t,2)}function aue(e,t){return e=bH(e),Vt(e.getFullYear()%100,t,2)}function rue(e,t){return Vt(e.getFullYear()%1e4,t,4)}function sue(e,t){var n=e.getDay();return e=n>=4||n===0?Zm(e):Zm.ceil(e),Vt(e.getFullYear()%1e4,t,4)}function iue(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Vt(t/60|0,"0",2)+Vt(t%60,"0",2)}function E5(e,t){return Vt(e.getUTCDate(),t,2)}function oue(e,t){return Vt(e.getUTCHours(),t,2)}function lue(e,t){return Vt(e.getUTCHours()%12||12,t,2)}function cue(e,t){return Vt(1+Ww.count(al(e),e),t,3)}function vH(e,t){return Vt(e.getUTCMilliseconds(),t,3)}function due(e,t){return vH(e,t)+"000"}function uue(e,t){return Vt(e.getUTCMonth()+1,t,2)}function mue(e,t){return Vt(e.getUTCMinutes(),t,2)}function fue(e,t){return Vt(e.getUTCSeconds(),t,2)}function hue(e){var t=e.getUTCDay();return t===0?7:t}function gue(e,t){return Vt(Yw.count(al(e)-1,e),t,2)}function wH(e){var t=e.getUTCDay();return t>=4||t===0?Jm(e):Jm.ceil(e)}function pue(e,t){return e=wH(e),Vt(Jm.count(al(e),e)+(al(e).getUTCDay()===4),t,2)}function xue(e){return e.getUTCDay()}function yue(e,t){return Vt(ev.count(al(e)-1,e),t,2)}function bue(e,t){return Vt(e.getUTCFullYear()%100,t,2)}function vue(e,t){return e=wH(e),Vt(e.getUTCFullYear()%100,t,2)}function wue(e,t){return Vt(e.getUTCFullYear()%1e4,t,4)}function Nue(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Jm(e):Jm.ceil(e),Vt(e.getUTCFullYear()%1e4,t,4)}function jue(){return"+0000"}function T5(){return"%"}function L5(e){return+e}function k5(e){return Math.floor(+e/1e3)}var hm,NH,jH;Cue({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Cue(e){return hm=Cde(e),NH=hm.format,hm.parse,jH=hm.utcFormat,hm.utcParse,hm}function Sue(e){return new Date(e)}function _ue(e){return e instanceof Date?+e:+new Date(+e)}function ZL(e,t,n,r,s,i,o,l,c,d){var m=$L(),h=m.invert,p=m.domain,b=d(".%L"),v=d(":%S"),x=d("%I:%M"),w=d("%I %p"),j=d("%a %d"),C=d("%b %d"),S=d("%B"),_=d("%Y");function E(A){return(c(A)<A?b:l(A)<A?v:o(A)<A?x:i(A)<A?w:r(A)<A?s(A)<A?j:C:n(A)<A?S:_)(A)}return m.invert=function(A){return new Date(h(A))},m.domain=function(A){return arguments.length?p(Array.from(A,_ue)):p().map(Sue)},m.ticks=function(A){var T=p();return e(T[0],T[T.length-1],A??10)},m.tickFormat=function(A,T){return T==null?E:d(T)},m.nice=function(A){var T=p();return(!A||typeof A.range!="function")&&(A=t(T[0],T[T.length-1],A??10)),A?p(uH(T,A)):m},m.copy=function(){return sx(m,ZL(e,t,n,r,s,i,o,l,c,d))},m}function JL(){return Js.apply(ZL(Nde,jde,nl,QL,qw,ix,YL,WL,Ad,NH).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function CH(){return Js.apply(ZL(vde,wde,al,XL,Yw,Ww,KL,qL,Ad,jH).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Kw(){var e=0,t=1,n,r,s,i,o=vr,l=!1,c;function d(h){return h==null||isNaN(h=+h)?c:o(s===0?.5:(h=(i(h)-n)*s,l?Math.max(0,Math.min(1,h)):h))}d.domain=function(h){return arguments.length?([e,t]=h,n=i(e=+e),r=i(t=+t),s=n===r?0:1/(r-n),d):[e,t]},d.clamp=function(h){return arguments.length?(l=!!h,d):l},d.interpolator=function(h){return arguments.length?(o=h,d):o};function m(h){return function(p){var b,v;return arguments.length?([b,v]=p,o=h(b,v),d):[o(0),o(1)]}}return d.range=m(jf),d.rangeRound=m(IL),d.unknown=function(h){return arguments.length?(c=h,d):c},function(h){return i=h,n=h(e),r=h(t),s=n===r?0:1/(r-n),d}}function Tc(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function ek(){var e=Ec(Kw()(vr));return e.copy=function(){return Tc(e,ek())},gl.apply(e,arguments)}function SH(){var e=UL(Kw()).domain([1,10]);return e.copy=function(){return Tc(e,SH()).base(e.base())},gl.apply(e,arguments)}function _H(){var e=FL(Kw());return e.copy=function(){return Tc(e,_H()).constant(e.constant())},gl.apply(e,arguments)}function tk(){var e=HL(Kw());return e.copy=function(){return Tc(e,tk()).exponent(e.exponent())},gl.apply(e,arguments)}function Aue(){return tk.apply(null,arguments).exponent(.5)}function AH(){var e=[],t=vr;function n(r){if(r!=null&&!isNaN(r=+r))return t((ax(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let s of r)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(nx),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,s)=>t(s/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(s,i)=>yce(e,i/r))},n.copy=function(){return AH(t).domain(e)},gl.apply(n,arguments)}function Qw(){var e=0,t=.5,n=1,r=1,s,i,o,l,c,d=vr,m,h=!1,p;function b(x){return isNaN(x=+x)?p:(x=.5+((x=+m(x))-i)*(r*x<r*i?l:c),d(h?Math.max(0,Math.min(1,x)):x))}b.domain=function(x){return arguments.length?([e,t,n]=x,s=m(e=+e),i=m(t=+t),o=m(n=+n),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),r=i<s?-1:1,b):[e,t,n]},b.clamp=function(x){return arguments.length?(h=!!x,b):h},b.interpolator=function(x){return arguments.length?(d=x,b):d};function v(x){return function(w){var j,C,S;return arguments.length?([j,C,S]=w,d=Bce(x,[j,C,S]),b):[d(0),d(.5),d(1)]}}return b.range=v(jf),b.rangeRound=v(IL),b.unknown=function(x){return arguments.length?(p=x,b):p},function(x){return m=x,s=x(e),i=x(t),o=x(n),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),r=i<s?-1:1,b}}function EH(){var e=Ec(Qw()(vr));return e.copy=function(){return Tc(e,EH())},gl.apply(e,arguments)}function TH(){var e=UL(Qw()).domain([.1,1,10]);return e.copy=function(){return Tc(e,TH()).base(e.base())},gl.apply(e,arguments)}function LH(){var e=FL(Qw());return e.copy=function(){return Tc(e,LH()).constant(e.constant())},gl.apply(e,arguments)}function nk(){var e=HL(Qw());return e.copy=function(){return Tc(e,nk()).exponent(e.exponent())},gl.apply(e,arguments)}function Eue(){return nk.apply(null,arguments).exponent(.5)}function kH(e){return e.type==="piecewise"?GL(e.thresholds,e.colors):ek([e.min??0,e.max??100],e.color)}function ef(e){return e.values?ip(e.values,e.colors).unknown(e.unknownColor??null):ip(e.colors.map((t,n)=>n),e.colors).unknown(e.unknownColor??null)}function Bm(e){return e.type==="ordinal"?ef(e):kH(e)}function PH(e,t,n){const{tickMaxStep:r,tickMinStep:s,tickNumber:i}=e,o=s===void 0?999:Math.floor(Math.abs(t[1]-t[0])/s),l=r===void 0?2:Math.ceil(Math.abs(t[1]-t[0])/r);return Math.min(o,Math.max(l,i??n))}function DH(e,t){return t[1]-t[0]===0?1:e/((t[1]-t[0])/100)}function ak(e){return Math.floor(Math.abs(e)/50)}function P5(e){return Array.isArray(e)?JSON.stringify(e):typeof e=="object"&&e!==null?e.valueOf():e}function Xw(...e){let t=new qb(void 0,P5),n=[],r=[],s=0,i=1,o,l,c=!1,d=0,m=0,h=.5;const p=w=>{const j=t.get(w);if(j!==void 0)return r[j%r.length]},b=()=>{const w=n.length,j=i<s,C=j?i:s,S=j?s:i;o=(S-C)/Math.max(1,w-d+m*2),c&&(o=Math.floor(o));const _=C+(S-C-o*(w-d))*h;l=o*(1-d);const E=c?Math.round(_):_;l=c?Math.round(l):l;const T=nH(w).map(R=>E+o*R);return r=j?T.reverse():T,p};p.domain=function(w){if(!arguments.length)return n.slice();n=[],t=new qb(void 0,P5);for(const j of w)t.has(j)||t.set(j,n.push(j)-1);return b()},p.range=function(w){if(!arguments.length)return[s,i];const[j,C]=w;return s=+j,i=+C,b()},p.rangeRound=function(w){const[j,C]=w;return s=+j,i=+C,c=!0,b()},p.bandwidth=function(){return l},p.step=function(){return o},p.round=function(w){return arguments.length?(c=!!w,b()):c},p.padding=function(w){return arguments.length?(d=Math.min(1,m=+w),b()):d},p.paddingInner=function(w){return arguments.length?(d=Math.min(1,w),b()):d},p.paddingOuter=function(w){return arguments.length?(m=+w,b()):m},p.align=function(w){return arguments.length?(h=Math.max(0,Math.min(1,w)),b()):h},p.copy=()=>Xw(n,[s,i]).round(c).paddingInner(d).paddingOuter(m).align(h);const[v,x]=e;return e.length>1?(p.domain(v),p.range(x)):v?p.range(v):b(),p}function OH(...e){const t=Xw(...e).paddingInner(1),n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=()=>{const r=n();return r.padding=r.paddingOuter,delete r.paddingInner,delete r.paddingOuter,r.copy=t.copy,r},t}function MH(...e){const t=BL(...e),n=t.ticks,{negativeScale:r,linearScale:s,positiveScale:i}=Tue(t);return t.ticks=o=>{const l=n(o),c=t.constant();let d=0,m=0,h=0;l.forEach(b=>{b>-c&&b<c&&(m+=1),b<=-c&&(d+=1),b>=c&&(h+=1)});const p=[];if(d>0&&p.push(...r.ticks(d)),m>0){const b=s.ticks(m);p.at(-1)===b[0]?p.push(...b.slice(1)):p.push(...b)}if(h>0){const b=i.ticks(h);p.at(-1)===b[0]?p.push(...b.slice(1)):p.push(...b)}return p},t.tickFormat=(o=10,l)=>{const c=t.constant(),[d,m]=t.domain(),h=m-d,p=r.domain(),b=p[1]-p[0],x=(h===0?0:b/h)*o,w=s.domain(),j=w[1]-w[0],S=(h===0?0:j/h)*o,_=i.domain(),E=_[1]-_[0],T=(h===0?0:E/h)*o,R=r.tickFormat(x,l),U=s.tickFormat(S,l),W=i.tickFormat(T,l);return I=>(I.valueOf()<=-c?R:I.valueOf()>=c?W:U)(I)},t.copy=()=>MH(t.domain(),t.range()).constant(t.constant()),t}function Tue(e){const t=e.constant(),n=e.domain(),r=[n[0],Math.min(n[1],-t)],s=up(r,e.range()),i=[Math.max(n[0],-t),Math.min(n[1],t)],o=Gw(i,e.range()),l=[Math.max(n[0],t),n[1]],c=up(l,e.range());return{negativeScale:s,linearScale:o,positiveScale:c}}function Zw(e,t,n){switch(e){case"log":return up(t,n);case"pow":return Vw(t,n);case"sqrt":return mH(t,n);case"time":return JL(t,n);case"utc":return CH(t,n);case"symlog":return MH(t,n);default:return Gw(t,n)}}const uE=e=>e?.[0]instanceof Date;function mE(e,t,n){const r=JL(e,t);return(s,{location:i})=>i==="tick"?r.tickFormat(n)(s):`${s.toLocaleString()}`}let D5,O5;class Lue{types=new Set;constructor(){if(D5)throw new Error("You can only create one instance!");D5=this.types}addType(t){this.types.add(t)}getTypes(){return this.types}}class kue{types=new Set;constructor(){if(O5)throw new Error("You can only create one instance!");O5=this.types}addType(t){this.types.add(t)}getTypes(){return this.types}}const Jw=new Lue;Jw.addType("bar");Jw.addType("line");Jw.addType("scatter");const IH=new kue;IH.addType("radar");function eN(e){return Jw.getTypes().has(e)}function tv(e){return eN(e.type)}const Pue=(e,t,n,r)=>{const s=new Set;return Object.keys(t).filter(eN).forEach(o=>{const l=n[o]?.series??{},c=t[o].axisTooltipGetter?.(l);c!==void 0&&c.forEach(({axisId:d,direction:m})=>{m===e&&s.add(d??r)})}),s};function Ba(e){return e.bandwidth!==void 0}function Due(e){return Ba(e)&&e.paddingOuter!==void 0}function Oue(e,t,n){const r=t==="x"?[e.left,e.left+e.width]:[e.top+e.height,e.top];return n?[r[1],r[0]]:r}const Mue=.2,Iue=.1;function $H({scales:e,drawingArea:t,formattedSeries:n,axis:r,seriesConfig:s,axisDirection:i,zoomMap:o,domains:l}){if(r===void 0)return{axis:{},axisIds:[]};const c=Pue(i,s,n,r[0].id),d={};return r.forEach(m=>{const h=m,p=e[h.id],b=o?.get(h.id),v=b?[b.start,b.end]:[0,100],x=Oue(t,i,h.reverse??!1),w=!h.ignoreTooltip&&c.has(h.id),j=h.data??[];if(Ba(p)){const A=i==="y"?[x[1],x[0]]:x;if(Due(p)&&mu(h)){const T=h.categoryGapRatio??Mue,R=h.barGapRatio??Iue;d[h.id]=ke({offset:0,height:0,categoryGapRatio:T,barGapRatio:R,triggerTooltip:w},h,{data:j,scale:p,tickNumber:h.data.length,colorScale:h.colorMap&&(h.colorMap.type==="ordinal"?ef(ke({values:h.data},h.colorMap)):Bm(h.colorMap))})}if(fu(h)&&(d[h.id]=ke({offset:0,height:0,triggerTooltip:w},h,{data:j,scale:p,tickNumber:h.data.length,colorScale:h.colorMap&&(h.colorMap.type==="ordinal"?ef(ke({values:h.data},h.colorMap)):Bm(h.colorMap))})),uE(h.data)){const T=mE(h.data,A,h.tickNumber);d[h.id].valueFormatter=h.valueFormatter??T}return}if(h.scaleType==="band"||h.scaleType==="point")return;const C=l[h.id].tickNumber,S=h,_=S.scaleType??"linear",E=DH(C,v);d[h.id]=ke({offset:0,height:0,triggerTooltip:w},S,{data:j,scaleType:_,scale:p,tickNumber:E,colorScale:S.colorMap&&kH(S.colorMap),valueFormatter:h.valueFormatter??cce(E,Zw(_,x.map(A=>p.invert(A)),x))})}),{axis:d,axisIds:r.map(({id:m})=>m)}}function $ue(e){return e!=null}function Rue(e,t,n,r){const s=e?.length??0,i=Math.floor(t*s/100),o=Math.ceil(n*s/100);return function(c,d){return(c[r]??e?.[d])==null?!0:d>=i&&d<o}}function zue(e,t,n,r,s){const i=e[0].valueOf(),o=e[1].valueOf(),l=i+t*(o-i)/100,c=i+n*(o-i)/100;return function(m,h){const p=m[r]??s?.[h];return p==null?!0:p>=l&&p<=c}}const Uue=e=>({currentAxisId:t,seriesXAxisId:n,seriesYAxisId:r,isDefaultAxis:s})=>(i,o)=>!(t===n?r:n)||s?Object.values(e??{})[0]?.(i,o)??!0:[r,n].filter(d=>d!==t).map(d=>e[d??""]).filter($ue).every(d=>d(i,o)),M5=e=>(t=[])=>t.reduce((n,r)=>{const{zoom:s,id:i,reverse:o}=r,l=TL(s,i,e,o);return l&&(n[i]=l),n},{}),Fue=.2;function RH(e,t,n){const r=t==="x"?[e.left,e.left+e.width]:[e.top+e.height,e.top];return n.reverse?[r[1],r[0]]:r}function zH(e,t){const n=[0,1];if(mu(e)){const i=e.categoryGapRatio??Fue;return Xw(t,n).paddingInner(i).paddingOuter(i/2)}if(fu(e))return OH(t,n);const r=e.scaleType??"linear",s=Zw(r,t,n);return uce(e)&&e.constant!=null&&s.constant(e.constant),s}const UH=(e,t)=>{const n=e[1]-e[0],r=t[1]-t[0],s=e[0]-t[0]*n/r,i=e[1]+(100-t[1])*n/r;return[s,i]},Bue=(e,t,n,r,s,i,o)=>{const l=n==="x"?r[e].xExtremumGetter:r[e].yExtremumGetter,c=i[e]?.series??{};return l?.({series:c,axis:t,axisIndex:s,isDefaultAxis:s===0,getFilters:o})??[1/0,-1/0]};function tN(e,t,n,r,s,i){const o=Object.keys(n).filter(eN);let l=[1/0,-1/0];for(const c of o){const[d,m]=Bue(c,e,t,n,r,s,i);l=[Math.min(l[0],d),Math.max(l[1],m)]}return Number.isNaN(l[0])||Number.isNaN(l[1])?[1/0,-1/0]:l}const Hue=(e,t,n,r)=>{if(e.domainLimit!==void 0)return e.domainLimit;if(t==="x")for(const s of r.line?.seriesOrder??[]){const i=r.line.series[s];if(i.xAxisId===e.id||i.xAxisId===void 0&&n===0)return"strict"}return"nice"};function FH(e,t,n){return Zw(e??"linear",t,[0,1]).nice(n).domain()}function BH(e,t,n,r,[s,i],o,l){const c=GH(e,t,n,r,l);let d=VH(e,s,i);if(typeof c=="function"){const{min:h,max:p}=c(s.valueOf(),i.valueOf());d[0]=h,d[1]=p}const m=PH(e,d,o);return c==="nice"&&(d=FH(e.scaleType,d,m)),d=["min"in e?e.min??d[0]:d[0],"max"in e?e.max??d[1]:d[1]],{domain:d,tickNumber:m}}function HH(e,t,n,r,[s,i],o,l){const c=GH(e,t,n,r,l);let d=VH(e,s,i);if(typeof c=="function"){const{min:m,max:h}=c(s.valueOf(),i.valueOf());d[0]=m,d[1]=h}return c==="nice"&&(d=FH(e.scaleType,d,o)),[e.min??d[0],e.max??d[1]]}function GH(e,t,n,r,s){return s?Hue(e,t,n,r):e.domainLimit??"nice"}function VH(e,t,n){let r=t,s=n;return"max"in e&&e.max!=null&&e.max<t&&(r=e.max),"min"in e&&e.min!=null&&e.min>t&&(s=e.min),!("min"in e)&&!("max"in e)?[r,s]:[e.min??r,e.max??s]}class Gue{constructor(){this.ids=[],this.values=[],this.length=0}clear(){this.length=0}push(t,n){let r=this.length++;for(;r>0;){const s=r-1>>1,i=this.values[s];if(n>=i)break;this.ids[r]=this.ids[s],this.values[r]=i,r=s}this.ids[r]=t,this.values[r]=n}pop(){if(this.length===0)return;const t=this.ids,n=this.values,r=t[0],s=--this.length;if(s>0){const i=t[s],o=n[s];let l=0;const c=s>>1;for(;l<c;){const d=(l<<1)+1,m=d+1,h=d+(+(m<s)&+(n[m]<n[d]));if(n[h]>=o)break;t[l]=t[h],n[l]=n[h],l=h}t[l]=i,n[l]=o}return r}peek(){return this.length>0?this.ids[0]:void 0}peekValue(){return this.length>0?this.values[0]:void 0}shrink(){this.ids.length=this.values.length=this.length}}const I5=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],pS=3;class rk{static from(t,n=0){if(n%8!==0)throw new Error("byteOffset must be 8-byte aligned.");if(!t||t.byteLength===void 0||t.buffer)throw new Error("Data must be an instance of ArrayBuffer or SharedArrayBuffer.");const[r,s]=new Uint8Array(t,n+0,2);if(r!==251)throw new Error("Data does not appear to be in a Flatbush format.");const i=s>>4;if(i!==pS)throw new Error(`Got v${i} data when expected v${pS}.`);const o=I5[s&15];if(!o)throw new Error("Unrecognized array type.");const[l]=new Uint16Array(t,n+2,1),[c]=new Uint32Array(t,n+4,1);return new rk(c,l,o,void 0,t,n)}constructor(t,n=16,r=Float64Array,s=ArrayBuffer,i,o=0){if(t===void 0)throw new Error("Missing required argument: numItems.");if(isNaN(t)||t<=0)throw new Error(`Unexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+n,2),65535),this.byteOffset=o;let l=t,c=l;this._levelBounds=[l*4];do l=Math.ceil(l/this.nodeSize),c+=l,this._levelBounds.push(c*4);while(l!==1);this.ArrayType=r,this.IndexArrayType=c<16384?Uint16Array:Uint32Array;const d=I5.indexOf(r),m=c*4*r.BYTES_PER_ELEMENT;if(d<0)throw new Error(`Unexpected typed array class: ${r}.`);if(i)this.data=i,this._boxes=new r(i,o+8,c*4),this._indices=new this.IndexArrayType(i,o+8+m,c),this._pos=c*4,this.minX=this._boxes[this._pos-4],this.minY=this._boxes[this._pos-3],this.maxX=this._boxes[this._pos-2],this.maxY=this._boxes[this._pos-1];else{const h=this.data=new s(8+m+c*this.IndexArrayType.BYTES_PER_ELEMENT);this._boxes=new r(h,8,c*4),this._indices=new this.IndexArrayType(h,8+m,c),this._pos=0,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,new Uint8Array(h,0,2).set([251,(pS<<4)+d]),new Uint16Array(h,2,1)[0]=n,new Uint32Array(h,4,1)[0]=t}this._queue=new Gue}add(t,n,r=t,s=n){const i=this._pos>>2,o=this._boxes;return this._indices[i]=i,o[this._pos++]=t,o[this._pos++]=n,o[this._pos++]=r,o[this._pos++]=s,t<this.minX&&(this.minX=t),n<this.minY&&(this.minY=n),r>this.maxX&&(this.maxX=r),s>this.maxY&&(this.maxY=s),i}finish(){if(this._pos>>2!==this.numItems)throw new Error(`Added ${this._pos>>2} items when expected ${this.numItems}.`);const t=this._boxes;if(this.numItems<=this.nodeSize){t[this._pos++]=this.minX,t[this._pos++]=this.minY,t[this._pos++]=this.maxX,t[this._pos++]=this.maxY;return}const n=this.maxX-this.minX||1,r=this.maxY-this.minY||1,s=new Uint32Array(this.numItems),i=65535;for(let o=0,l=0;o<this.numItems;o++){const c=t[l++],d=t[l++],m=t[l++],h=t[l++],p=Math.floor(i*((c+m)/2-this.minX)/n),b=Math.floor(i*((d+h)/2-this.minY)/r);s[o]=que(p,b)}fE(s,t,this._indices,0,this.numItems-1,this.nodeSize);for(let o=0,l=0;o<this._levelBounds.length-1;o++){const c=this._levelBounds[o];for(;l<c;){const d=l;let m=t[l++],h=t[l++],p=t[l++],b=t[l++];for(let v=1;v<this.nodeSize&&l<c;v++)m=Math.min(m,t[l++]),h=Math.min(h,t[l++]),p=Math.max(p,t[l++]),b=Math.max(b,t[l++]);this._indices[this._pos>>2]=d,t[this._pos++]=m,t[this._pos++]=h,t[this._pos++]=p,t[this._pos++]=b}}}search(t,n,r,s,i){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let o=this._boxes.length-4;const l=[],c=[];for(;o!==void 0;){const d=Math.min(o+this.nodeSize*4,$5(o,this._levelBounds));for(let m=o;m<d;m+=4){if(r<this._boxes[m]||s<this._boxes[m+1]||t>this._boxes[m+2]||n>this._boxes[m+3])continue;const h=this._indices[m>>2]|0;o>=this.numItems*4?l.push(h):(i===void 0||i(h))&&(c.push(h),c.push(this._boxes[m]),c.push(this._boxes[m+1]))}o=l.pop()}return c}neighbors(t,n,r=1/0,s=1/0,i,o=Vue){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let l=this._boxes.length-4;const c=this._queue,d=[];e:for(;l!==void 0;){const m=Math.min(l+this.nodeSize*4,$5(l,this._levelBounds));for(let h=l;h<m;h+=4){const p=this._indices[h>>2]|0,b=this._boxes[h],v=this._boxes[h+1],x=this._boxes[h+2],w=this._boxes[h+3],j=t<b?b-t:t>x?t-x:0,C=n<v?v-n:n>w?n-w:0,S=o(j,C);S>s||(l>=this.numItems*4?c.push(p<<1,S):(i===void 0||i(p))&&c.push((p<<1)+1,S))}for(;c.length&&c.peek()&1;)if(c.peekValue()>s||(d.push(c.pop()>>1),d.length===r))break e;l=c.length?c.pop()>>1:void 0}return c.clear(),d}}function Vue(e,t){return e*e+t*t}function $5(e,t){let n=0,r=t.length-1;for(;n<r;){const s=n+r>>1;t[s]>e?r=s:n=s+1}return t[n]}function fE(e,t,n,r,s,i){if(Math.floor(r/i)>=Math.floor(s/i))return;const o=e[r],l=e[r+s>>1],c=e[s];let d=c;const m=Math.max(o,l);c>m?d=m:m===o?d=Math.max(l,c):m===l&&(d=Math.max(o,c));let h=r-1,p=s+1;for(;;){do h++;while(e[h]<d);do p--;while(e[p]>d);if(h>=p)break;Wue(e,t,n,h,p)}fE(e,t,n,r,p,i),fE(e,t,n,p+1,s,i)}function Wue(e,t,n,r,s){const i=e[r];e[r]=e[s],e[s]=i;const o=4*r,l=4*s,c=t[o],d=t[o+1],m=t[o+2],h=t[o+3];t[o]=t[l],t[o+1]=t[l+1],t[o+2]=t[l+2],t[o+3]=t[l+3],t[l]=c,t[l+1]=d,t[l+2]=m,t[l+3]=h;const p=n[r];n[r]=n[s],n[s]=p}function que(e,t){let n=e^t,r=65535^n,s=65535^(e|t),i=e&(t^65535),o=n|r>>1,l=n>>1^n,c=s>>1^r&i>>1^s,d=n&s>>1^i>>1^i;n=o,r=l,s=c,i=d,o=n&n>>2^r&r>>2,l=n&r>>2^r&(n^r)>>2,c^=n&s>>2^r&i>>2,d^=r&s>>2^(n^r)&i>>2,n=o,r=l,s=c,i=d,o=n&n>>4^r&r>>4,l=n&r>>4^r&(n^r)>>4,c^=n&s>>4^r&i>>4,d^=r&s>>4^(n^r)&i>>4,n=o,r=l,s=c,i=d,c^=n&s>>8^r&i>>8,d^=r&s>>8^(n^r)&i>>8,n=c^c>>1,r=d^d>>1;let m=e^t,h=r|65535^(m|n);return m=(m|m<<8)&16711935,m=(m|m<<4)&252645135,m=(m|m<<2)&858993459,m=(m|m<<1)&1431655765,h=(h|h<<8)&16711935,h=(h|h<<4)&252645135,h=(h|h<<2)&858993459,h=(h|h<<1)&1431655765,(h<<1|m)>>>0}const Yue=e=>{const t=new Map;return e.forEach(n=>{t.set(n.axisId,n)}),t},WH=e=>e.zoom,Kue=at(so,hl,(e,t)=>e?.some(n=>!!n.zoom)||t?.some(n=>!!n.zoom)||!1),qH=at(WH,e=>e?.isInteracting),Lc=ia(WH,function(t){return t?.zoomData&&Yue(t?.zoomData)}),R5=at(Lc,(e,t)=>e?.get(t)),ox=ia(so,hl,function(t,n){return ke({},M5("x")(t),M5("y")(n))});at(ox,(e,t)=>e[t]);const Que=at(Gr,function(t){return ak(t.width)}),Xue=at(Gr,function(t){return ak(t.height)}),sk=ia(so,Hn,ys,Uw,Que,function(t,n,r,s,i){const l={};return t?.forEach((c,d)=>{const m=c;if(mu(m)||fu(m)){l[m.id]={domain:m.data};return}const h=tN(m,"x",r,d,n);l[m.id]=BH(m,"x",d,n,h,i,s)}),{axes:t,domains:l}}),ik=ia(hl,Hn,ys,Uw,Xue,function(t,n,r,s,i){const l={};return t?.forEach((c,d)=>{const m=c;if(mu(m)||fu(m)){l[m.id]={domain:m.data};return}const h=tN(m,"y",r,d,n);l[m.id]=BH(m,"y",d,n,h,i,s)}),{axes:t,domains:l}}),YH=ia(Lc,ox,sk,ik,function(t,n,{axes:r,domains:s},{axes:i,domains:o}){if(!t||!n)return;let l=!1;const c={},d=[...r??[],...i??[]];for(let m=0;m<d.length;m+=1){const h=d[m];if(!n[h.id]||n[h.id].filterMode!=="discard")continue;const p=t.get(h.id);if(p===void 0||p.start<=0&&p.end>=100)continue;const b=m<(r?.length??0)?"x":"y";if(h.scaleType==="band"||h.scaleType==="point")c[h.id]=Rue(h.data,p.start,p.end,b);else{const{domain:v}=b==="x"?s[h.id]:o[h.id];c[h.id]=zue(v,p.start,p.end,b,h.data)}l=!0}if(l)return Uue(c)}),Zue=ia(Hn,ys,Lc,ox,YH,Uw,sk,function(t,n,r,s,i,o,{axes:l,domains:c}){const d={};return l?.forEach((m,h)=>{const p=c[m.id].domain;if(mu(m)||fu(m)){d[m.id]=p;return}const b=r?.get(m.id),v=s?.[m.id],x=b===void 0&&!v?i:void 0;if(!x){d[m.id]=p;return}const w=c[m.id].tickNumber,j=tN(m,"x",n,h,t,x);d[m.id]=HH(m,"x",h,t,j,w,o)}),d}),Jue=ia(Hn,ys,Lc,ox,YH,Uw,ik,function(t,n,r,s,i,o,{axes:l,domains:c}){const d={};return l?.forEach((m,h)=>{const p=c[m.id].domain;if(mu(m)||fu(m)){d[m.id]=p;return}const b=r?.get(m.id),v=s?.[m.id],x=b===void 0&&!v?i:void 0;if(!x){d[m.id]=p;return}const w=c[m.id].tickNumber,j=tN(m,"y",n,h,t,x);d[m.id]=HH(m,"y",h,t,j,w,o)}),d}),KH=ia(so,Zue,function(t,n){const r={};return t?.forEach(s=>{const i=s,o=n[i.id];r[i.id]=zH(i,o)}),r}),QH=ia(hl,Jue,function(t,n){const r={};return t?.forEach(s=>{const i=s,o=n[i.id];r[i.id]=zH(i,o)}),r}),eme=ia(so,KH,Gr,Lc,function(t,n,r,s){const i={};return t?.forEach(o=>{const l=o,c=s?.get(l.id),d=c?[c.start,c.end]:[0,100],m=RH(r,"x",l),h=n[l.id].copy(),p=UH(m,d);h.range(p),i[l.id]=h}),i}),tme=ia(hl,QH,Gr,Lc,function(t,n,r,s){const i={};return t?.forEach(o=>{const l=o,c=s?.get(l.id),d=c?[c.start,c.end]:[0,100],m=RH(r,"y",l),h=n[l.id].copy(),p=Ba(h)?m.reverse():m,b=UH(p,d);h.range(b),i[l.id]=h}),i}),jr=ia(Gr,Hn,ys,Lc,sk,eme,function(t,n,r,s,{axes:i,domains:o},l){return $H({scales:l,drawingArea:t,formattedSeries:n,axis:i,seriesConfig:r,axisDirection:"x",zoomMap:s,domains:o})}),Cr=ia(Gr,Hn,ys,Lc,ik,tme,function(t,n,r,s,{axes:i,domains:o},l){return $H({scales:l,drawingArea:t,formattedSeries:n,axis:i,seriesConfig:r,axisDirection:"y",zoomMap:s,domains:o})});at(jr,Cr,(e,t,n)=>e?.axis[n]??t?.axis[n]);at(so,hl,(e,t,n)=>{const r=e?.find(s=>s.id===n)??t?.find(s=>s.id===n)??null;if(r)return r});const nme=at(so,e=>e[0].id),ame=at(hl,e=>e[0].id),rme=new Map,sme=()=>rme,ime=ia(Hn,KH,QH,nme,ame,function(t,n,r,s,i){const o=t.scatter,l=new Map;return o&&o.seriesOrder.forEach(c=>{const{data:d,xAxisId:m=s,yAxisId:h=i}=o.series[c],p=new rk(d.length),b=n[m],v=r[h];for(const x of d)p.add(b(x.x),v(x.y));p.finish(),l.set(c,p)}),l});function gm(e){return e instanceof Date?e.getTime():e}function tf(e,t){const{scale:n,data:r,reverse:s}=e;if(!Ba(n)){const o=n.invert(t);if(r===void 0)return-1;const l=gm(o);return r?.findIndex((d,m)=>{const h=gm(d);return h>l&&(m===0||Math.abs(l-h)<=Math.abs(l-gm(r[m-1])))||h<=l&&(m===r.length-1||Math.abs(gm(o)-h)<Math.abs(gm(o)-gm(r[m+1])))})}const i=n.bandwidth()===0?Math.floor((t-Math.min(...n.range())+n.step()/2)/n.step()):Math.floor((t-Math.min(...n.range()))/n.step());return i<0||i>=r.length?-1:s?r.length-1-i:i}function z5(e,t,n,r){if(!Ba(e)){if(r===null){const s=e.invert(n);return Number.isNaN(s)?null:s}return t[r]}return r===null||r<0||r>=t.length?null:t[r]}function mp(e,t){const n=e.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,n.matrixTransform(e.getScreenCTM().inverse())}const ome=Object.is;function XH(e,t){if(e===t)return!0;if(!(e instanceof Object)||!(t instanceof Object))return!1;let n=0,r=0;for(const s in e)if(n+=1,!ome(e[s],t[s])||!(s in t))return!1;for(const s in t)r+=1;return n===r}const lx=({store:e})=>{const t=Ra(function(){e.set("interaction",ke({},e.state.interaction,{pointer:null,item:null}))}),n=Ra(function(o){const l=e.state.interaction.item;if(!o){l!==null&&e.set("interaction",ke({},e.state.interaction,{item:null}));return}l===null||Object.keys(o).some(c=>o[c]!==l[c])||e.set("interaction",ke({},e.state.interaction,{item:null}))}),r=Ra(function(o,l){XH(e.state.interaction.item,o)||e.set("interaction",ke({},e.state.interaction,{lastUpdate:l.interaction,item:o}))}),s=Ra(function(o){e.set("interaction",ke({},e.state.interaction,{pointer:o,lastUpdate:o!==null?"pointer":e.state.interaction.lastUpdate}))});return{instance:{cleanInteraction:t,setItemInteraction:r,removeItemInteraction:n,setPointerCoordinate:s}}};lx.getInitialState=()=>({interaction:{item:null,pointer:null,lastUpdate:"pointer"}});lx.params={};const nN=e=>e.interaction,lme=at(nN,e=>e!==void 0),ZH=at(nN,e=>e?.item??null),JH=at(nN,e=>e?.pointer??null),cx=at(JH,e=>e&&e.x),dx=at(JH,e=>e&&e.y),cme=at(ZH,e=>e!==null),ux=at(nN,e=>e?.lastUpdate),dme=new Set(["bar","line","scatter","pie"]);function e9(e){return dme.has(e)}function t9(e,t,n){const r=Object.keys(e),s=t!==void 0&&e[t]?r.indexOf(t):0,i=t!==void 0&&n!==void 0&&e[t]&&e[t].series[n]?e[t].seriesOrder.indexOf(n):-1,o=r.filter(e9);for(let m=0;m<o.length;m+=1){const h=(s+m)%o.length,p=e[o[h]],b=m===0?i+1:0;for(let v=b;v<p.seriesOrder.length;v+=1)if(p.series[p.seriesOrder[v]].data.length>0)return{type:o[h],seriesId:p.seriesOrder[v]}}const l=s,c=e[o[l]],d=i;for(let m=0;m<d;m+=1)if(c.series[c.seriesOrder[m]].data.length>0)return{type:o[l],seriesId:c.seriesOrder[m]};return null}function n9(e,t,n){const r=Object.keys(e),s=t!==void 0&&e[t]?r.indexOf(t):0,i=t!==void 0&&n!==void 0&&e[t]&&e[t].series[n]?e[t].seriesOrder.indexOf(n):1,o=r.filter(e9);for(let m=0;m<o.length;m+=1){const h=(o.length+s-m)%o.length,p=e[o[h]],b=m===0?i+1:p.seriesOrder.length;for(let v=1;v<b;v+=1){const x=(p.seriesOrder.length+i-v)%p.seriesOrder.length;if(p.series[p.seriesOrder[x]].data.length>0)return{type:o[h],seriesId:p.seriesOrder[x]}}}const l=s,c=e[o[l]],d=c.seriesOrder;for(let m=d.length-1;m>i;m-=1)if(c.series[c.seriesOrder[m]].data.length>0)return{type:o[l],seriesId:c.seriesOrder[m]};return null}function a9(e,t,n){if(t==="sankey")return!1;const r=e[t]?.series[n]?.data;return r&&r.length>0}function ume(e){const t=Hn(e);let{type:n,seriesId:r}=e.keyboardNavigation.item??{};if(n===void 0||n==="sankey"||r===void 0||!a9(t,n,r)){const i=t9(t,n,r);if(i===null)return null;n=i.type,r=i.seriesId}const s=t[n].series[r].data.length;return{type:n,seriesId:r,dataIndex:((e.keyboardNavigation.item?.dataIndex??-1)+1)%s}}function mme(e){const t=Hn(e);let{type:n,seriesId:r}=e.keyboardNavigation.item??{};if(n===void 0||n==="sankey"||r===void 0||!a9(t,n,r)){const i=n9(t,n,r);if(i===null)return null;n=i.type,r=i.seriesId}const s=t[n].series[r].data.length;return{type:n,seriesId:r,dataIndex:(s+(e.keyboardNavigation.item?.dataIndex??1)-1)%s}}function fme(e){const t=Hn(e);let{type:n,seriesId:r}=e.keyboardNavigation.item??{};const s=t9(t,n,r);if(s===null)return null;n=s.type,r=s.seriesId;const i=t[n].series[r].data.length;return{type:n,seriesId:r,dataIndex:Math.min(i-1,e.keyboardNavigation.item?.dataIndex??0)}}function hme(e){const t=Hn(e);let{type:n,seriesId:r}=e.keyboardNavigation.item??{};const s=n9(t,n,r);if(s===null)return null;n=s.type,r=s.seriesId;const i=t[n].series[r].data.length;return{type:n,seriesId:r,dataIndex:Math.min(i-1,e.keyboardNavigation.item?.dataIndex??0)}}const aN=({params:e,store:t,svgRef:n})=>{const r=Ra(function(){t.state.keyboardNavigation.item!==null&&t.set("keyboardNavigation",ke({},t.state.keyboardNavigation,{item:null}))});return g.useEffect(()=>{const s=n.current;if(!s||!e.enableKeyboardNavigation)return;function i(o){let l=t.state.keyboardNavigation.item;switch(o.key){case"ArrowRight":l=ume(t.state);break;case"ArrowLeft":l=mme(t.state);break;case"ArrowDown":{l=hme(t.state);break}case"ArrowUp":{l=fme(t.state);break}}l!==t.state.keyboardNavigation.item&&(o.preventDefault(),t.update(ke({},t.state.highlight&&{highlight:ke({},t.state.highlight,{lastUpdate:"keyboard"})},t.state.interaction&&{interaction:ke({},t.state.interaction,{lastUpdate:"keyboard"})},{keyboardNavigation:ke({},t.state.keyboardNavigation,{item:l})})))}return s.addEventListener("keydown",i),s.addEventListener("blur",r),()=>{s.removeEventListener("keydown",i),s.removeEventListener("blur",r)}},[n,r,e.enableKeyboardNavigation,t]),Ea(()=>{t.state.keyboardNavigation.enableKeyboardNavigation!==e.enableKeyboardNavigation&&t.set("keyboardNavigation",ke({},t.state.keyboardNavigation,{enableKeyboardNavigation:!!e.enableKeyboardNavigation}))},[t,e.enableKeyboardNavigation]),{}};aN.getInitialState=e=>({keyboardNavigation:{item:null,enableKeyboardNavigation:!!e.enableKeyboardNavigation}});aN.params={enableKeyboardNavigation:!0};const pu=e=>e.keyboardNavigation;at(pu,(e,t)=>e?.item!=null&&e.item.type===t.seriesType&&e.item.seriesId===t.seriesId&&e.item.dataIndex===t.dataIndex);const gme=at(pu,e=>e?.item!=null),rN=at(pu,e=>e?.item?.type),sN=at(pu,e=>e?.item?.seriesId),iN=at(pu,e=>e?.item?.dataIndex),pme=at(pu,e=>!!e?.enableKeyboardNavigation),r9=e=>(t,n,r,s,i)=>{if(t===void 0||n===void 0||r===void 0)return;const o=i[t]?.series[n];if(!o)return;let l=e==="x"?"xAxisId"in o&&o.xAxisId:"yAxisId"in o&&o.yAxisId;return(l===void 0||l===!1)&&(l=s.axisIds[0]),{axisId:l,dataIndex:r}},xme=at(rN,sN,iN,jr,Hn,r9("x")),yme=at(rN,sN,iN,Cr,Hn,r9("y")),s9=at(pu,function(t){if(t?.item==null)return null;const{type:n,seriesId:r}=t.item;return n===void 0||r===void 0?null:t.item}),bme=at(rN,sN,iN,function(t,n,r){return n!==void 0&&r!==void 0}),i9=at(ux,ZH,s9,(e,t,n)=>e==="keyboard"?n:t??null),vme=at(ux,cme,bme,(e,t,n)=>e==="keyboard"?n:t),wme=at(i9,Gr,ys,jr,Cr,Hn,function(t,n,r,{axis:s,axisIds:i},{axis:o,axisIds:l},c,d="top"){if(!t)return null;const m=c[t.type]?.series[t.seriesId];if(m){const h={},p=tv(m)?m.xAxisId??i[0]:void 0,b=tv(m)?m.yAxisId??l[0]:void 0;return p!==void 0&&(h.x=s[p]),b!==void 0&&(h.y=o[b]),r[m.type].tooltipItemPositionGetter?.({series:c,drawingArea:n,axesConfig:h,identifier:t,placement:d})??null}return null});function Hm(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;if(Array.isArray(e)){const s=e.length;if(s!==t.length)return!1;for(let i=0;i<s;i+=1)if(!Hm(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;const s=Array.from(e.entries());for(let i=0;i<s.length;i+=1)if(!t.has(s[i][0]))return!1;for(let i=0;i<s.length;i+=1){const o=s[i];if(!Hm(o[1],t.get(o[0])))return!1}return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;const s=Array.from(e.entries());for(let i=0;i<s.length;i+=1)if(!t.has(s[i][0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){const s=e.length;if(s!==t.length)return!1;for(let i=0;i<s;i+=1)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();const n=Object.keys(e),r=n.length;if(r!==Object.keys(t).length)return!1;for(let s=0;s<r;s+=1)if(!Object.prototype.hasOwnProperty.call(t,n[s]))return!1;for(let s=0;s<r;s+=1){const i=n[s];if(!Hm(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function hE(e,t,n=t.axisIds[0]){return Array.isArray(n)?n.map(r=>tf(t.axis[r],e)):tf(t.axis[n],e)}const o9=(e,t,n)=>{if(e===null)return null;const r=hE(e,t,n);return r===-1?null:r},ok=at(cx,jr,o9),lk=at(dx,Cr,o9),Nme=at(cx,dx,jr,Cr,(e,t,n,r)=>[...e===null?[]:n.axisIds.map(s=>({axisId:s,dataIndex:hE(e,n,s)})),...t===null?[]:r.axisIds.map(s=>({axisId:s,dataIndex:hE(t,r,s)}))].filter(s=>s.dataIndex!==null&&s.dataIndex>=0));function l9(e,t,n,r=t.axisIds[0]){return Array.isArray(r)?r.map((s,i)=>{const o=t.axis[s];return z5(o.scale,o.data,e,n[i])}):z5(t.axis[r].scale,t.axis[r].data,e,n)}const jme=at(cx,jr,ok,(e,t,n,r)=>e===null||t.axisIds.length===0?null:l9(e,t,n,r)),Cme=at(dx,Cr,lk,(e,t,n,r)=>e===null||t.axisIds.length===0?null:l9(e,t,n,r)),c9=[],d9=Mw({memoizeOptions:{resultEqualityCheck:Hm}})(cx,jr,(e,t)=>e===null?c9:t.axisIds.filter(n=>t.axis[n].triggerTooltip).map(n=>({axisId:n,dataIndex:tf(t.axis[n],e)})).filter(({dataIndex:n})=>n>=0)),u9=Mw({memoizeOptions:{resultEqualityCheck:Hm}})(dx,Cr,(e,t)=>e===null?c9:t.axisIds.filter(n=>t.axis[n].triggerTooltip).map(n=>({axisId:n,dataIndex:tf(t.axis[n],e)})).filter(({dataIndex:n})=>n>=0)),Sme=at(d9,u9,(e,t)=>e.length>0||t.length>0);function _me(e){return e.setPointerCoordinate!==void 0}const Cf=({params:e,store:t,seriesConfig:n,svgRef:r,instance:s})=>{const{xAxis:i,yAxis:o,dataset:l,onHighlightedAxisChange:c}=e,d=mt(t,Gr),m=mt(t,Hn),h=mt(t,lme),{axis:p,axisIds:b}=mt(t,jr),{axis:v,axisIds:x}=mt(t,Cr);YB({controlled:e.highlightedAxis}),Ea(()=>{e.highlightedAxis!==void 0&&t.set("controlledCartesianAxisHighlight",e.highlightedAxis)},[t,e.highlightedAxis]);const w=g.useRef(!0);g.useEffect(()=>{if(w.current){w.current=!1;return}t.set("cartesianAxis",{x:XB(i,l),y:ZB(o,l)})},[n,d,i,o,l,t]);const j=b[0],C=x[0];gle(t,Nme,(_,E)=>{if(c&&!Object.is(_,E)){if(_.length!==E.length){c(E);return}_?.some(({axisId:A,dataIndex:T},R)=>E[R].axisId!==A||E[R].dataIndex!==T)&&c(E)}});const S=_me(s);return g.useEffect(()=>{const _=r.current;if(!h||!S||!_||e.disableAxisListener)return()=>{};const E=s.addInteractionListener("moveEnd",M=>{M.detail.activeGestures.pan||s.cleanInteraction()}),A=s.addInteractionListener("panEnd",M=>{M.detail.activeGestures.move||s.cleanInteraction()}),T=s.addInteractionListener("quickPressEnd",M=>{!M.detail.activeGestures.move&&!M.detail.activeGestures.pan&&s.cleanInteraction()}),R=M=>{const H=M.detail.srcEvent,q=M.detail.target,ae=mp(_,H);if(M.detail.srcEvent.buttons>=1&&q?.hasPointerCapture(M.detail.srcEvent.pointerId)&&!q?.closest("[data-charts-zoom-slider]")&&q?.releasePointerCapture(M.detail.srcEvent.pointerId),!s.isPointInside(ae.x,ae.y,q)){s.cleanInteraction?.();return}s.setPointerCoordinate(ae)},U=s.addInteractionListener("move",R),W=s.addInteractionListener("pan",R),I=s.addInteractionListener("quickPress",R);return()=>{U.cleanup(),E.cleanup(),W.cleanup(),A.cleanup(),I.cleanup(),T.cleanup()}},[r,t,p,j,v,C,s,e.disableAxisListener,h,S]),g.useEffect(()=>{const _=r.current,E=e.onAxisClick;if(_===null||!E)return()=>{};const A=s.addInteractionListener("tap",T=>{let R=null,U=!1;const W=mp(_,T.detail.srcEvent),I=tf(p[j],W.x);U=I!==-1,R=U?I:tf(v[C],W.y);const M=U?b[0]:x[0];if(R==null||R===-1)return;const H=(U?p:v)[M].data[R],q={};Object.keys(m).filter(ae=>["bar","line"].includes(ae)).forEach(ae=>{m[ae]?.seriesOrder.forEach(K=>{const B=m[ae].series[K],X=B.xAxisId,le=B.yAxisId,ue=U?X:le;(ue===void 0||ue===M)&&(q[K]=B.data[R])})}),E(T.detail.srcEvent,{dataIndex:R,axisValue:H,seriesValues:q})});return()=>{A.cleanup()}},[e.onAxisClick,m,r,p,b,v,x,j,C,s]),{}};Cf.params={xAxis:!0,yAxis:!0,dataset:!0,onAxisClick:!0,disableAxisListener:!0,onHighlightedAxisChange:!0,highlightedAxis:!0};Cf.getDefaultizedParams=({params:e})=>ke({},e,{colors:e.colors??GB,theme:e.theme??"light",defaultizedXAxis:XB(e.xAxis,e.dataset),defaultizedYAxis:ZB(e.yAxis,e.dataset)});Cf.getInitialState=e=>ke({cartesianAxis:{x:e.defaultizedXAxis,y:e.defaultizedYAxis}},e.highlightedAxis===void 0?{}:{controlledCartesianAxisHighlight:e.highlightedAxis});const io=e=>e.brush;at(io,e=>e?.start);at(io,e=>e?.current);const Ame=at(io,e=>e?.start?.x??null),Eme=at(io,e=>e?.start?.y??null),Tme=at(io,e=>e?.current?.x??null),Lme=at(io,e=>e?.current?.y??null);at(Ame,Eme,Tme,Lme,(e,t,n,r)=>e===null||t===null||n===null||r===null?null:{start:{x:e,y:t},current:{x:n,y:r}});const kme=at(Hn,e=>{let t=!1,n=!1;return e&&Object.entries(e).forEach(([r,s])=>{Object.values(s.series).some(i=>i.layout==="horizontal")&&(t=!0),r==="scatter"&&s.seriesOrder.length>0&&(n=!0)}),n?"xy":t?"y":"x"}),Pme=at(ox,function(t){let n=!1,r=!1;return Object.values(t).forEach(s=>{s.axisDirection==="y"&&(r=!0),s.axisDirection==="x"&&(n=!0)}),n&&r?"xy":r?"y":n?"x":null});at(kme,Pme,(e,t)=>t??e);const m9=at(io,e=>e?.enabled||e?.isZoomBrushEnabled),f9=at(m9,io,(e,t)=>e&&t?.start!==null&&t?.current!==null),oN=at(io,f9,(e,t)=>t&&e?.preventHighlight),Dme=at(io,f9,(e,t)=>t&&e?.preventTooltip),mx=({store:e,svgRef:t,instance:n,params:r})=>{const s=mt(e,m9);Ea(()=>{e.set("brush",ke({},e.state.brush,{enabled:r.brushConfig.enabled,preventTooltip:r.brushConfig.preventTooltip,preventHighlight:r.brushConfig.preventHighlight}))},[e,r.brushConfig.enabled,r.brushConfig.preventTooltip,r.brushConfig.preventHighlight]);const i=Ra(function(d){e.set("brush",ke({},e.state.brush,{start:e.state.brush.start??d,current:d}))}),o=Ra(function(){e.set("brush",ke({},e.state.brush,{start:null,current:null}))}),l=Ra(function(d){e.state.brush.isZoomBrushEnabled!==d&&e.set("brush",ke({},e.state.brush,{isZoomBrushEnabled:d}))});return g.useEffect(()=>{const c=t.current;if(c===null||!s)return()=>{};const d=x=>{if(x.detail.target?.closest("[data-charts-zoom-slider]"))return;const w=mp(c,{clientX:x.detail.initialCentroid.x,clientY:x.detail.initialCentroid.y});i(w)},m=x=>{const w=mp(c,{clientX:x.detail.centroid.x,clientY:x.detail.centroid.y});i(w)},h=n.addInteractionListener("brushStart",d),p=n.addInteractionListener("brush",m),b=n.addInteractionListener("brushCancel",o),v=n.addInteractionListener("brushEnd",o);return()=>{h.cleanup(),p.cleanup(),v.cleanup(),b.cleanup()}},[t,n,e,o,i,s]),{instance:{setBrushCoordinates:i,clearBrush:o,setZoomBrushEnabled:l}}};mx.params={brushConfig:!0};mx.getDefaultizedParams=({params:e})=>ke({},e,{brushConfig:{enabled:e?.brushConfig?.enabled??!1,preventTooltip:e?.brushConfig?.preventTooltip??!0,preventHighlight:e?.brushConfig?.preventHighlight??!0}});mx.getInitialState=e=>({brush:{enabled:e.brushConfig.enabled,isZoomBrushEnabled:!1,preventTooltip:e.brushConfig.preventTooltip,preventHighlight:e.brushConfig.preventHighlight,start:null,current:null}});const Sf=e=>e.controlledCartesianAxisHighlight,h9=(e,t,n,r)=>r?[]:n!==void 0?n.filter(s=>t.axis[s.axisId]!==void 0).map(s=>s):e===null?[]:[{axisId:t.axisIds[0],dataIndex:e}],g9=ia(ok,jr,Sf,oN,h9);ia(lk,Cr,Sf,oN,h9);const p9=(e,t,n,r,s,i,o)=>{if(o)return[];if(r!==void 0)return r.map(m=>ke({},m,{value:n.axis[m.axisId]?.data?.[m.dataIndex]})).filter(({value:m})=>m!==void 0);const l=t!==null&&{axisId:n.axisIds[0],dataIndex:e,value:t},c=s&&n.axis[s.axisId]?.data?.[s.dataIndex],d=s&&c!=null&&ke({},s,{value:c});if(i==="pointer"){if(l)return[l];if(d)return[d]}if(i==="keyboard"){if(d)return[d];if(l)return[l]}return[]},Ome=at(ok,jme,jr,Sf,xme,ux,oN,p9),Mme=at(lk,Cme,Cr,Sf,yme,ux,oN,p9),x9=(e,t)=>e===void 0?[t.axis[t.axisIds[0]]]:e.map(r=>t.axis[r.axisId]??null).filter(r=>r!==null);at(Sf,jr,x9);at(Sf,Cr,x9);function U5(e,t){return e.id!==void 0?e:ke({id:t},e)}function F5(e){return e.colorMap?ke({},e,{colorScale:e.colorMap.type==="ordinal"&&e.data?ef(ke({values:e.data},e.colorMap)):Bm(e.colorMap.type==="continuous"?ke({min:e.min,max:e.max},e.colorMap):e.colorMap)}):e}function y9(e,t){if(!e||e.length===0)return{axis:{},axisIds:[]};const n={},r=[];return e.forEach((s,i)=>{const o=s.dataKey,l=s.id??`defaultized-z-axis-${i}`;if(o===void 0||s.data!==void 0){n[l]=F5(U5(s,l)),r.push(l);return}if(t===void 0)throw new Error("MUI X Charts: z-axis uses `dataKey` but no `dataset` is provided.");n[l]=F5(U5(ke({},s,{data:t.map(c=>c[o])}),l)),r.push(l)}),{axis:n,axisIds:r}}const fx=({params:e,store:t})=>{const{zAxis:n,dataset:r}=e,s=g.useRef(!0);return g.useEffect(()=>{if(s.current){s.current=!1;return}t.set("zAxis",y9(n,r))},[n,r,t]),{}};fx.params={zAxis:!0,dataset:!0};fx.getInitialState=e=>({zAxis:y9(e.zAxis,e.dataset)});const Ime=e=>e,$me=at(Ime,e=>e.zAxis),hx=({store:e,params:t})=>{YB({controlled:t.highlightedItem}),Ea(()=>{e.state.highlight.item!==t.highlightedItem&&e.set("highlight",ke({},e.state.highlight,{item:t.highlightedItem}))},[e,t.highlightedItem]);const n=Ra(()=>{t.onHighlightChange?.(null);const s=e.getSnapshot().highlight;s.item===null||s.isControlled||e.set("highlight",{item:null,lastUpdate:"pointer",isControlled:!1})}),r=Ra(s=>{const i=e.getSnapshot().highlight;i.isControlled||XH(i.item,s)||(t.onHighlightChange?.(s),e.set("highlight",{item:s,lastUpdate:"pointer",isControlled:!1}))});return{instance:{clearHighlight:n,setHighlight:r}}};hx.getInitialState=e=>({highlight:{item:e.highlightedItem,lastUpdate:"pointer",isControlled:e.highlightedItem!==void 0}});hx.params={highlightedItem:!0,onHighlightChange:!0};function nv(e){let t=1/0,n=-1/0;for(const r of e??[])r<t&&(t=r),r>n&&(n=r);return[t,n]}const B5=(e,t)=>t==="x"?{x:e,y:null}:{x:null,y:e},b9=e=>{const{axis:t,getFilters:n,isDefaultAxis:r}=e,s=n?.({currentAxisId:t.id,isDefaultAxis:r}),i=s?t.data?.filter((o,l)=>s({x:null,y:null},l)):t.data;return nv(i??[])},v9=e=>t=>{const{series:n,axis:r,getFilters:s,isDefaultAxis:i}=t;return Object.keys(n).filter(o=>{const l=e==="x"?n[o].xAxisId:n[o].yAxisId;return l===r.id||i&&l===void 0}).reduce((o,l)=>{const{stackedData:c}=n[l],d=s?.({currentAxisId:r.id,isDefaultAxis:i,seriesXAxisId:n[l].xAxisId,seriesYAxisId:n[l].yAxisId}),[m,h]=c?.reduce((p,b,v)=>d&&(!d(B5(b[0],e),v)||!d(B5(b[1],e),v))?p:[Math.min(...b,p[0]),Math.max(...b,p[1])],[1/0,-1/0])??[1/0,-1/0];return[Math.min(m,o[0]),Math.max(h,o[1])]},[1/0,-1/0])},Rme=e=>Object.keys(e.series).some(n=>e.series[n].layout==="horizontal")?v9("x")(e):b9(e),zme=e=>Object.keys(e.series).some(n=>e.series[n].layout==="horizontal")?b9(e):v9("y")(e);function Ft(e){return function(){return e}}const w9=Math.cos,av=Math.sin,ji=Math.sqrt,H5=1e-12,rv=Math.PI,Id=2*rv,gE=Math.PI,pE=2*gE,gd=1e-6,Ume=pE-gd;function N9(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Fme(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return N9;const n=10**t;return function(r){this._+=r[0];for(let s=1,i=r.length;s<i;++s)this._+=Math.round(arguments[s]*n)/n+r[s]}}class Bme{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?N9:Fme(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,s){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+s}`}bezierCurveTo(t,n,r,s,i,o){this._append`C${+t},${+n},${+r},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,n,r,s,i){if(t=+t,n=+n,r=+r,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=r-t,d=s-n,m=o-t,h=l-n,p=m*m+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(p>gd)if(!(Math.abs(h*c-d*m)>gd)||!i)this._append`L${this._x1=t},${this._y1=n}`;else{let b=r-o,v=s-l,x=c*c+d*d,w=b*b+v*v,j=Math.sqrt(x),C=Math.sqrt(p),S=i*Math.tan((gE-Math.acos((x+p-w)/(2*j*C)))/2),_=S/C,E=S/j;Math.abs(_-1)>gd&&this._append`L${t+_*m},${n+_*h}`,this._append`A${i},${i},0,0,${+(h*b>m*v)},${this._x1=t+E*c},${this._y1=n+E*d}`}}arc(t,n,r,s,i,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(s),c=r*Math.sin(s),d=t+l,m=n+c,h=1^o,p=o?s-i:i-s;this._x1===null?this._append`M${d},${m}`:(Math.abs(this._x1-d)>gd||Math.abs(this._y1-m)>gd)&&this._append`L${d},${m}`,r&&(p<0&&(p=p%pE+pE),p>Ume?this._append`A${r},${r},0,1,${h},${t-l},${n-c}A${r},${r},0,1,${h},${this._x1=d},${this._y1=m}`:p>gd&&this._append`A${r},${r},0,${+(p>=gE)},${h},${this._x1=t+r*Math.cos(i)},${this._y1=n+r*Math.sin(i)}`)}rect(t,n,r,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+s}h${-r}Z`}toString(){return this._}}function ck(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Bme(t)}function lN(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function j9(e){this._context=e}j9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function gx(e){return new j9(e)}function C9(e){return e[0]}function S9(e){return e[1]}function dk(e,t){var n=Ft(!0),r=null,s=gx,i=null,o=ck(l);e=typeof e=="function"?e:e===void 0?C9:Ft(e),t=typeof t=="function"?t:t===void 0?S9:Ft(t);function l(c){var d,m=(c=lN(c)).length,h,p=!1,b;for(r==null&&(i=s(b=o())),d=0;d<=m;++d)!(d<m&&n(h=c[d],d,c))===p&&((p=!p)?i.lineStart():i.lineEnd()),p&&i.point(+e(h,d,c),+t(h,d,c));if(b)return i=null,b+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Ft(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Ft(+c),l):t},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Ft(!!c),l):n},l.curve=function(c){return arguments.length?(s=c,r!=null&&(i=s(r)),l):s},l.context=function(c){return arguments.length?(c==null?r=i=null:i=s(r=c),l):r},l}function Lg(e,t,n){var r=null,s=Ft(!0),i=null,o=gx,l=null,c=ck(d);e=typeof e=="function"?e:e===void 0?C9:Ft(+e),t=typeof t=="function"?t:Ft(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?S9:Ft(+n);function d(h){var p,b,v,x=(h=lN(h)).length,w,j=!1,C,S=new Array(x),_=new Array(x);for(i==null&&(l=o(C=c())),p=0;p<=x;++p){if(!(p<x&&s(w=h[p],p,h))===j)if(j=!j)b=p,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=p-1;v>=b;--v)l.point(S[v],_[v]);l.lineEnd(),l.areaEnd()}j&&(S[p]=+e(w,p,h),_[p]=+t(w,p,h),l.point(r?+r(w,p,h):S[p],n?+n(w,p,h):_[p]))}if(C)return l=null,C+""||null}function m(){return dk().defined(s).curve(o).context(i)}return d.x=function(h){return arguments.length?(e=typeof h=="function"?h:Ft(+h),r=null,d):e},d.x0=function(h){return arguments.length?(e=typeof h=="function"?h:Ft(+h),d):e},d.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:Ft(+h),d):r},d.y=function(h){return arguments.length?(t=typeof h=="function"?h:Ft(+h),n=null,d):t},d.y0=function(h){return arguments.length?(t=typeof h=="function"?h:Ft(+h),d):t},d.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:Ft(+h),d):n},d.lineX0=d.lineY0=function(){return m().x(e).y(t)},d.lineY1=function(){return m().x(e).y(n)},d.lineX1=function(){return m().x(r).y(t)},d.defined=function(h){return arguments.length?(s=typeof h=="function"?h:Ft(!!h),d):s},d.curve=function(h){return arguments.length?(o=h,i!=null&&(l=o(i)),d):o},d.context=function(h){return arguments.length?(h==null?i=l=null:l=o(i=h),d):i},d}function Hme(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function Gme(e){return e}function Vme(){var e=Gme,t=Hme,n=null,r=Ft(0),s=Ft(Id),i=Ft(0);function o(l){var c,d=(l=lN(l)).length,m,h,p=0,b=new Array(d),v=new Array(d),x=+r.apply(this,arguments),w=Math.min(Id,Math.max(-Id,s.apply(this,arguments)-x)),j,C=Math.min(Math.abs(w)/d,i.apply(this,arguments)),S=C*(w<0?-1:1),_;for(c=0;c<d;++c)(_=v[b[c]=c]=+e(l[c],c,l))>0&&(p+=_);for(t!=null?b.sort(function(E,A){return t(v[E],v[A])}):n!=null&&b.sort(function(E,A){return n(l[E],l[A])}),c=0,h=p?(w-d*S)/p:0;c<d;++c,x=j)m=b[c],_=v[m],j=x+(_>0?_*h:0)+S,v[m]={data:l[m],index:c,value:_,startAngle:x,endAngle:j,padAngle:C};return v}return o.value=function(l){return arguments.length?(e=typeof l=="function"?l:Ft(+l),o):e},o.sortValues=function(l){return arguments.length?(t=l,n=null,o):t},o.sort=function(l){return arguments.length?(n=l,t=null,o):n},o.startAngle=function(l){return arguments.length?(r=typeof l=="function"?l:Ft(+l),o):r},o.endAngle=function(l){return arguments.length?(s=typeof l=="function"?l:Ft(+l),o):s},o.padAngle=function(l){return arguments.length?(i=typeof l=="function"?l:Ft(+l),o):i},o}class _9{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function A9(e){return new _9(e,!0)}function E9(e){return new _9(e,!1)}const cN={draw(e,t){const n=ji(t/rv);e.moveTo(n,0),e.arc(0,0,n,0,Id)}},T9={draw(e,t){const n=ji(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},L9=ji(1/3),Wme=L9*2,k9={draw(e,t){const n=ji(t/Wme),r=n*L9;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},P9={draw(e,t){const n=ji(t),r=-n/2;e.rect(r,r,n,n)}},qme=.8908130915292852,D9=av(rv/10)/av(7*rv/10),Yme=av(Id/10)*D9,Kme=-w9(Id/10)*D9,O9={draw(e,t){const n=ji(t*qme),r=Yme*n,s=Kme*n;e.moveTo(0,-n),e.lineTo(r,s);for(let i=1;i<5;++i){const o=Id*i/5,l=w9(o),c=av(o);e.lineTo(c*n,-l*n),e.lineTo(l*r-c*s,c*r+l*s)}e.closePath()}},xS=ji(3),M9={draw(e,t){const n=-ji(t/(xS*3));e.moveTo(0,n*2),e.lineTo(-xS*n,-n),e.lineTo(xS*n,-n),e.closePath()}},Ls=-.5,ks=ji(3)/2,xE=1/ji(12),Qme=(xE/2+1)*3,I9={draw(e,t){const n=ji(t/Qme),r=n/2,s=n*xE,i=r,o=n*xE+n,l=-i,c=o;e.moveTo(r,s),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(Ls*r-ks*s,ks*r+Ls*s),e.lineTo(Ls*i-ks*o,ks*i+Ls*o),e.lineTo(Ls*l-ks*c,ks*l+Ls*c),e.lineTo(Ls*r+ks*s,Ls*s-ks*r),e.lineTo(Ls*i+ks*o,Ls*o-ks*i),e.lineTo(Ls*l+ks*c,Ls*c-ks*l),e.closePath()}},$9=[cN,T9,k9,P9,O9,M9,I9];function uk(e,t){let n=null,r=ck(s);e=typeof e=="function"?e:Ft(e||cN),t=typeof t=="function"?t:Ft(t===void 0?64:+t);function s(){let i;if(n||(n=i=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:Ft(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:Ft(+i),s):t},s.context=function(i){return arguments.length?(n=i??null,s):n},s}function sv(){}function iv(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function R9(e){this._context=e}R9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:iv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:iv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Xme(e){return new R9(e)}function z9(e){this._context=e}z9.prototype={areaStart:sv,areaEnd:sv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:iv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Zme(e){return new z9(e)}function U9(e){this._context=e}U9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:iv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Jme(e){return new U9(e)}function G5(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function mk(e,t){this._context=e,this._k=(1-t)/6}mk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:G5(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:G5(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};(function e(t){function n(r){return new mk(r,t)}return n.tension=function(r){return e(+r)},n})(0);function efe(e,t,n){var r=e._x1,s=e._y1,i=e._x2,o=e._y2;if(e._l01_a>H5){var l=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,c=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*l-e._x0*e._l12_2a+e._x2*e._l01_2a)/c,s=(s*l-e._y0*e._l12_2a+e._y2*e._l01_2a)/c}if(e._l23_a>H5){var d=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,m=3*e._l23_a*(e._l23_a+e._l12_a);i=(i*d+e._x1*e._l23_2a-t*e._l12_2a)/m,o=(o*d+e._y1*e._l23_2a-n*e._l12_2a)/m}e._context.bezierCurveTo(r,s,i,o,e._x2,e._y2)}function F9(e,t){this._context=e,this._alpha=t}F9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:efe(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const tfe=(function e(t){function n(r){return t?new F9(r,t):new mk(r,0)}return n.alpha=function(r){return e(+r)},n})(.5);function B9(e){this._context=e}B9.prototype={areaStart:sv,areaEnd:sv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function nfe(e){return new B9(e)}function V5(e){return e<0?-1:1}function W5(e,t,n){var r=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(r||s<0&&-0),o=(n-e._y1)/(s||r<0&&-0),l=(i*s+o*r)/(r+s);return(V5(i)+V5(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function q5(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function yS(e,t,n){var r=e._x0,s=e._y0,i=e._x1,o=e._y1,l=(i-r)/3;e._context.bezierCurveTo(r+l,s+l*t,i-l,o-l*n,i,o)}function ov(e){this._context=e}ov.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:yS(this,this._t0,q5(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,yS(this,q5(this,n=W5(this,e,t)),n);break;default:yS(this,this._t0,n=W5(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function H9(e){this._context=new G9(e)}(H9.prototype=Object.create(ov.prototype)).point=function(e,t){ov.prototype.point.call(this,t,e)};function G9(e){this._context=e}G9.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,s,i){this._context.bezierCurveTo(t,e,r,n,i,s)}};function yE(e){return new ov(e)}function V9(e){return new H9(e)}function W9(e){this._context=e}W9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Y5(e),s=Y5(t),i=0,o=1;o<n;++i,++o)this._context.bezierCurveTo(r[0][i],s[0][i],r[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Y5(e){var t,n=e.length-1,r,s=new Array(n),i=new Array(n),o=new Array(n);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[n-1]=2,i[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=s[t]/i[t-1],i[t]-=r,o[t]-=r*o[t-1];for(s[n-1]=o[n-1]/i[n-1],t=n-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[n-1]=(e[n]+s[n-1])/2,t=0;t<n-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function q9(e){return new W9(e)}function dN(e,t){this._context=e,this._t=t}dN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Y9(e){return new dN(e,.5)}function K9(e){return new dN(e,0)}function Q9(e){return new dN(e,1)}function bc(e,t){if((o=e.length)>1)for(var n=1,r,s,i=e[t[0]],o,l=i.length;n<o;++n)for(s=i,i=e[t[n]],r=0;r<l;++r)i[r][1]+=i[r][0]=isNaN(s[r][1])?s[r][0]:s[r][1]}function Qd(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function afe(e,t){return e[t]}function rfe(e){const t=[];return t.key=e,t}function fk(){var e=Ft([]),t=Qd,n=bc,r=afe;function s(i){var o=Array.from(e.apply(this,arguments),rfe),l,c=o.length,d=-1,m;for(const h of i)for(l=0,++d;l<c;++l)(o[l][d]=[0,+r(h,o[l].key,d,i)]).data=h;for(l=0,m=lN(t(o));l<c;++l)o[m[l]].index=l;return n(o,m),o}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Ft(Array.from(i)),s):e},s.value=function(i){return arguments.length?(r=typeof i=="function"?i:Ft(+i),s):r},s.order=function(i){return arguments.length?(t=i==null?Qd:typeof i=="function"?i:Ft(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(n=i??bc,s):n},s}function X9(e,t){if((r=e.length)>0){for(var n,r,s=0,i=e[0].length,o;s<i;++s){for(o=n=0;n<r;++n)o+=e[n][s][1]||0;if(o)for(n=0;n<r;++n)e[n][s][1]/=o}bc(e,t)}}function sfe(e,t){if((c=e.length)>0)for(var n,r=0,s,i,o,l,c,d=e[t[0]].length;r<d;++r)for(o=l=0,n=0;n<c;++n)(i=(s=e[t[n]][r])[1]-s[0])>0?(s[0]=o,s[1]=o+=i):i<0?(s[1]=l,s[0]=l+=i):(s[0]=0,s[1]=i)}function Z9(e,t){if((s=e.length)>0){for(var n=0,r=e[t[0]],s,i=r.length;n<i;++n){for(var o=0,l=0;o<s;++o)l+=e[o][n][1]||0;r[n][1]+=r[n][0]=-l/2}bc(e,t)}}function J9(e,t){if(!(!((o=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var n=0,r=1,s,i,o;r<i;++r){for(var l=0,c=0,d=0;l<o;++l){for(var m=e[t[l]],h=m[r][1]||0,p=m[r-1][1]||0,b=(h-p)/2,v=0;v<l;++v){var x=e[t[v]],w=x[r][1]||0,j=x[r-1][1]||0;b+=w-j}c+=h,d+=b*h}s[r-1][1]+=s[r-1][0]=n,c&&(n-=d/c)}s[r-1][1]+=s[r-1][0]=n,bc(e,t)}}function eG(e){var t=e.map(ife);return Qd(e).sort(function(n,r){return t[n]-t[r]})}function ife(e){for(var t=-1,n=0,r=e.length,s,i=-1/0;++t<r;)(s=+e[t][1])>i&&(i=s,n=t);return n}function tG(e){var t=e.map(nG);return Qd(e).sort(function(n,r){return t[n]-t[r]})}function nG(e){for(var t=0,n=-1,r=e.length,s;++n<r;)(s=+e[n][1])&&(t+=s);return t}function ofe(e){return tG(e).reverse()}function lfe(e){var t=e.length,n,r,s=e.map(nG),i=eG(e),o=0,l=0,c=[],d=[];for(n=0;n<t;++n)r=i[n],o<l?(o+=s[r],c.push(r)):(l+=s[r],d.push(r));return d.reverse().concat(c)}function cfe(e){return Qd(e).reverse()}const bS={appearance:eG,ascending:tG,descending:ofe,insideOut:lfe,none:Qd,reverse:cfe},vS={expand:X9,diverging:sfe,none:bc,silhouette:Z9,wiggle:J9},aG=e=>{const{series:t,seriesOrder:n,defaultStrategy:r}=e,s=[],i={};return n.forEach(o=>{const{stack:l,stackOrder:c,stackOffset:d}=t[o];l===void 0?s.push({ids:[o],stackingOrder:bS.none,stackingOffset:vS.none}):i[l]===void 0?(i[l]=s.length,s.push({ids:[o],stackingOrder:bS[c??r?.stackOrder??"none"],stackingOffset:vS[d??r?.stackOffset??"diverging"]})):(s[i[l]].ids.push(o),c!==void 0&&(s[i[l]].stackingOrder=bS[c]),d!==void 0&&(s[i[l]].stackingOffset=vS[d]))}),s},dfe=e=>e==null?"":e.toLocaleString(),ufe=(e,t)=>{const{seriesOrder:n,series:r}=e,s=aG(e),i=t??[];n.forEach(l=>{const c=r[l].data;if(c!==void 0)c.forEach((d,m)=>{i.length<=m?i.push({[l]:d}):i[m][l]=d});else if(t===void 0)throw new Error([`MUI X Charts: bar series with id='${l}' has no data.`,"Either provide a data property to the series or use the dataset prop."].join(`
`))});const o={};return s.forEach(l=>{const{ids:c,stackingOffset:d,stackingOrder:m}=l,h=fk().keys(c.map(p=>{const b=r[p].dataKey;return r[p].data===void 0&&b!==void 0?b:p})).value((p,b)=>p[b]??0).order(m).offset(d)(i);c.forEach((p,b)=>{const v=r[p].dataKey;o[p]=ke({layout:"vertical",labelMarkType:"square",minBarSize:0,valueFormatter:r[p].valueFormatter??dfe},r[p],{data:v?t.map(x=>{const w=x[v];return typeof w=="number"?w:null}):r[p].data,stackedData:h[b].map(([x,w])=>[x,w])})})}),{seriesOrder:n,stackingGroups:s,series:o}};function pi(e,t){return typeof e=="function"?e(t):e}const mfe=e=>{const{seriesOrder:t,series:n}=e;return t.reduce((r,s)=>{const i=pi(n[s].label,"legend");return i===void 0||r.push({markType:n[s].labelMarkType,id:s,seriesId:s,color:n[s].color,label:i}),r},[])};function hk(e){return e.colorGetter?e.colorGetter:()=>e.color}const ffe=(e,t,n)=>{const r=e.layout==="vertical",s=r?t?.colorScale:n?.colorScale,i=r?n?.colorScale:t?.colorScale,o=r?t?.data:n?.data,l=hk(e);return i?c=>{if(c===void 0)return e.color;const d=e.data[c],m=d===null?l({value:d,dataIndex:c}):i(d);return m===null?l({value:d,dataIndex:c}):m}:s&&o?c=>{if(c===void 0)return e.color;const d=o[c],m=d===null?l({value:d,dataIndex:c}):s(d);return m===null?l({value:d,dataIndex:c}):m}:c=>{if(c===void 0)return e.color;const d=e.data[c];return l({value:d,dataIndex:c})}},hfe=e=>{const{series:t,getColor:n,identifier:r}=e;if(!r||r.dataIndex===void 0)return null;const s=pi(t.label,"tooltip"),i=t.data[r.dataIndex];if(i==null)return null;const o=t.valueFormatter(i,{dataIndex:r.dataIndex});return{identifier:r,color:n(r.dataIndex),label:s,value:i,formattedValue:o,markType:t.labelMarkType}},gfe=e=>Object.values(e).map(t=>t.layout==="horizontal"?{direction:"y",axisId:t.yAxisId}:{direction:"x",axisId:t.xAxisId});function Nn(){const e=bs();if(!e)throw new Error(["MUI X Charts: Could not find the charts context.","It looks like you rendered your component outside of a ChartContainer parent component."].join(`
`));return e.store}function ei(){const e=Nn();return mt(e,Gr)}function uN(){const e=Nn();return mt(e,Rle)}function gk(e){return IH.getTypes().has(e)}const pfe=(e,t,n,r,s,i,o)=>{const l=r==="rotation"?s[t].rotationExtremumGetter:s[t].radiusExtremumGetter,c=o[t]?.series??{},[d,m]=l?.({series:c,axis:n,axisIndex:i,isDefaultAxis:i===0})??[1/0,-1/0],[h,p]=e;return[Math.min(d,h),Math.max(m,p)]},xfe=(e,t,n,r,s)=>{const o=Object.keys(n).filter(gk).reduce((l,c)=>pfe(l,c,e,t,n,r,s),[1/0,-1/0]);return Number.isNaN(o[0])||Number.isNaN(o[1])?[1/0,-1/0]:o},ic=(e,t)=>e===void 0?t:Math.PI*e/180,yfe=(e,t,n,r)=>{const s=new Set;return Object.keys(t).filter(gk).forEach(o=>{const l=n[o]?.series??{},c=t[o].axisTooltipGetter?.(l);c!==void 0&&c.forEach(({axisId:d,direction:m})=>{m===e&&s.add(d??r)})}),s};function bfe(e,t,n){if(t==="rotation"){if(n.scaleType==="point"){const r=[ic(n.startAngle,0),ic(n.endAngle,2*Math.PI)],s=r[1]-r[0];return s>Math.PI*2-.1&&(r[1]-=s/n.data.length),r}return[ic(n.startAngle,0),ic(n.endAngle,2*Math.PI)]}return[0,Math.min(e.height,e.width)/2]}const vfe=.2,wfe=.1;function rG({drawingArea:e,formattedSeries:t,axis:n,seriesConfig:r,axisDirection:s}){if(n===void 0)return{axis:{},axisIds:[]};const i=yfe(s,r,t,n[0].id),o={};return n.forEach((l,c)=>{const d=l,m=bfe(e,s,d),[h,p]=xfe(d,s,r,c,t),b=!d.ignoreTooltip&&i.has(d.id),v=d.data??[];if(mu(d)){const U=d.categoryGapRatio??vfe,W=d.barGapRatio??wfe;if(o[d.id]=ke({offset:0,categoryGapRatio:U,barGapRatio:W,triggerTooltip:b},d,{data:v,scale:Xw(d.data,m).paddingInner(U).paddingOuter(U/2),tickNumber:d.data.length,colorScale:d.colorMap&&(d.colorMap.type==="ordinal"?ef(ke({values:d.data},d.colorMap)):Bm(d.colorMap))}),uE(d.data)){const I=mE(d.data,m,d.tickNumber);o[d.id].valueFormatter=d.valueFormatter??I}}if(fu(d)&&(o[d.id]=ke({offset:0,triggerTooltip:b},d,{data:v,scale:OH(d.data,m),tickNumber:d.data.length,colorScale:d.colorMap&&(d.colorMap.type==="ordinal"?ef(ke({values:d.data},d.colorMap)):Bm(d.colorMap))}),uE(d.data))){const U=mE(d.data,m,d.tickNumber);o[d.id].valueFormatter=d.valueFormatter??U}if(!dce(d))return;const x=d.scaleType??"linear",w=d.domainLimit??"nice",j=[d.min??h,d.max??p];if(typeof w=="function"){const{min:U,max:W}=w(h,p);j[0]=U,j[1]=W}const C=PH(d,j,ak(Math.abs(m[1]-m[0]))),S=DH(C,m),_=Zw(x,j,m),E=w==="nice"?_.nice(C):_,[A,T]=E.domain(),R=[d.min??A,d.max??T];o[d.id]=ke({offset:0,triggerTooltip:b},d,{data:v,scaleType:x,scale:E.domain(R),tickNumber:S,colorScale:d.colorMap&&Bm(d.colorMap)})}),{axis:o,axisIds:n.map(({id:l})=>l)}}const sG=e=>e.polarAxis,iG=at(sG,e=>e?.rotation),Nfe=at(sG,e=>e?.radius),xu=at(iG,Gr,Hn,ys,(e,t,n,r)=>rG({drawingArea:t,formattedSeries:n,axis:e,seriesConfig:r,axisDirection:"rotation"}));at(Nfe,Gr,Hn,ys,(e,t,n,r)=>rG({drawingArea:t,formattedSeries:n,axis:e,seriesConfig:r,axisDirection:"radius"}));const jfe=at(Gr,e=>({cx:e.left+e.width/2,cy:e.top+e.height/2})),Cfe=e=>(t,n)=>Math.atan2(t-e.cx,e.cy-n);function mN(e){return(e%360+360)%360}const wS=2*Math.PI;function Sfe(e){return(e%wS+wS)%wS}function K5(e,t){const{scale:n,data:r,reverse:s}=e;if(!Ba(n))throw new Error("MUI X Charts: getAxisValue is not implemented for polare continuous axes.");if(!r)return-1;const i=Sfe(t-Math.min(...n.range())),o=n.bandwidth()===0?Math.floor((i+n.step()/2)/n.step())%r.length:Math.floor(i/n.step());return o<0||o>=r.length?-1:s?r.length-1-o:o}function Vr(){const e=Nn(),{axis:t,axisIds:n}=mt(e,jr);return{xAxis:t,xAxisIds:n}}function Wr(){const e=Nn(),{axis:t,axisIds:n}=mt(e,Cr);return{yAxis:t,yAxisIds:n}}function _fe(e){const t=Nn(),{axis:n,axisIds:r}=mt(t,jr),s=r[0];return n[s]}function Afe(e){const t=Nn(),{axis:n,axisIds:r}=mt(t,Cr),s=r[0];return n[s]}function oG(){const e=Nn(),{axis:t,axisIds:n}=mt(e,xu);return{rotationAxis:t,rotationAxisIds:n}}function Efe(e){const t=Nn(),{axis:n,axisIds:r}=mt(t,xu),s=r[0];return n[s]}function _f(e){if(Ba(e))return n=>(e(n)??0)+e.bandwidth()/2;const t=e.domain();return t[0]===t[1]?n=>n===t[0]?e(n):NaN:n=>e(n)}function pk(){const e=Nn(),{axis:t,axisIds:n}=mt(e,$me)??{axis:{},axisIds:[]};return{zAxis:t,zAxisIds:n}}function xk(){const e=bs();if(!e)throw new Error(["MUI X Charts: Could not find the svg ref context.","It looks like you rendered your component outside of a ChartContainer parent component."].join(`
`));return e.svgRef}function fN(){const e=Nn();return mt(e,Hn)}const Tfe=at(Hn,(e,t)=>e[t]);ia(Hn,(e,t,n)=>{if(!n||Array.isArray(n)&&n.length===0)return e[t]?.seriesOrder?.map(s=>e[t]?.series[s])??[];if(!Array.isArray(n))return e[t]?.series?.[n];const r=[];for(const s of n){const i=e[t]?.series?.[s];i&&r.push(i)}return r});const Lfe=e=>{const t=Nn();return mt(t,Tfe,e)};function px(){return Lfe("line")}function kfe(){return!1}function lG(e,t){return!e||!t?kfe:function(r){return r?e.highlight==="series"?r.seriesId===t.seriesId:e.highlight==="item"?r.dataIndex===t.dataIndex&&r.seriesId===t.seriesId:!1:!1}}function Pfe(){return!1}function cG(e,t){return!e||!t?Pfe:function(r){return r?e.fade==="series"?r.seriesId===t.seriesId&&r.dataIndex!==t.dataIndex:e.fade==="global"?r.seriesId!==t.seriesId||r.dataIndex!==t.dataIndex:!1:!1}}function yk(e,t,n){return e?.highlight==="series"&&t?.seriesId===n}function Dfe(e,t,n){return yk(e,t,n)?!1:e?.fade==="global"&&t!=null||e?.fade==="series"&&t?.seriesId===n}function dG(e,t,n){return e?.highlight==="item"&&t?.seriesId===n?t.dataIndex:null}function Ofe(e,t,n){return yk(e,t,n)||dG(e,t,n)===t?.dataIndex?null:(e?.fade==="series"||e?.fade==="global")&&t?.seriesId===n?t.dataIndex:null}const Mfe=e=>e.highlight,Ife=at(Hn,e=>{const t=new Map;return Object.keys(e).forEach(n=>{const r=e[n];r?.seriesOrder?.forEach(s=>{const i=r?.series[s];t.set(s,i?.highlightScope)})}),t}),pl=ia(Mfe,s9,function(t,n){return t.isControlled||t.lastUpdate==="pointer"?t.item:n}),kc=at(Ife,pl,function(t,n){if(!n)return null;const r=t.get(n.seriesId);return r===void 0?null:r}),$fe=at(kc,pl,lG),Rfe=at(kc,pl,cG),zfe=at(kc,pl,function(t,n,r){return lG(t,n)(r)});at(kc,pl,yk);at(kc,pl,Dfe);at(kc,pl,Ofe);at(kc,pl,dG);const Ufe=at(kc,pl,function(t,n,r){return cG(t,n)(r)});function uG(e){const t=Nn(),n=mt(t,zfe,e),r=mt(t,Ufe,e);return{isHighlighted:n,isFaded:!n&&r}}function Ffe(){const e=Nn(),t=mt(e,$fe),n=mt(e,Rfe);return{isHighlighted:t,isFaded:n}}function Bfe(e,t){return Object.keys(e).flatMap(n=>{const r=t[n].legendGetter;return r===void 0?[]:r(e[n])})}function Hfe(){const e=fN(),t=Nn(),n=mt(t,ys);return{items:Bfe(e,n)}}function bk(){const e=uN();return g.useCallback(t=>`${e}-gradient-${t}`,[e])}function Gfe(){const e=uN();return g.useCallback(t=>`${e}-gradient-${t}-object-bound`,[e])}var NS,Q5;function Vfe(){if(Q5)return NS;Q5=1;var e=4,t=.001,n=1e-7,r=10,s=11,i=1/(s-1),o=typeof Float32Array=="function";function l(x,w){return 1-3*w+3*x}function c(x,w){return 3*w-6*x}function d(x){return 3*x}function m(x,w,j){return((l(w,j)*x+c(w,j))*x+d(w))*x}function h(x,w,j){return 3*l(w,j)*x*x+2*c(w,j)*x+d(w)}function p(x,w,j,C,S){var _,E,A=0;do E=w+(j-w)/2,_=m(E,C,S)-x,_>0?j=E:w=E;while(Math.abs(_)>n&&++A<r);return E}function b(x,w,j,C){for(var S=0;S<e;++S){var _=h(w,j,C);if(_===0)return w;var E=m(w,j,C)-x;w-=E/_}return w}function v(x){return x}return NS=function(w,j,C,S){if(!(0<=w&&w<=1&&0<=C&&C<=1))throw new Error("bezier x values must be in [0, 1] range");if(w===j&&C===S)return v;for(var _=o?new Float32Array(s):new Array(s),E=0;E<s;++E)_[E]=m(E*i,w,C);function A(T){for(var R=0,U=1,W=s-1;U!==W&&_[U]<=T;++U)R+=i;--U;var I=(T-_[U])/(_[U+1]-_[U]),M=R+I*i,H=h(M,w,C);return H>=t?b(T,M,w,C):H===0?M:p(T,R,R+i,w,C)}return function(R){return R===0?0:R===1?1:m(A(R),j,S)}},NS}var Wfe=Vfe();const qfe=vi(Wfe),hN=300,vk="cubic-bezier(0.66, 0, 0.34, 1)",Yfe=qfe(.66,0,.34,1);var nf=0,kg=0,Ih=0,mG=1e3,lv,Pg,cv=0,Xd=0,gN=0,fp=typeof performance=="object"&&performance.now?performance:Date,fG=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function wk(){return Xd||(fG(Kfe),Xd=fp.now()+gN)}function Kfe(){Xd=0}function dv(){this._call=this._time=this._next=null}dv.prototype=hG.prototype={constructor:dv,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?wk():+n)+(t==null?0:+t),!this._next&&Pg!==this&&(Pg?Pg._next=this:lv=this,Pg=this),this._call=e,this._time=n,bE()},stop:function(){this._call&&(this._call=null,this._time=1/0,bE())}};function hG(e,t,n){var r=new dv;return r.restart(e,t,n),r}function Qfe(){wk(),++nf;for(var e=lv,t;e;)(t=Xd-e._time)>=0&&e._call.call(void 0,t),e=e._next;--nf}function X5(){Xd=(cv=fp.now())+gN,nf=kg=0;try{Qfe()}finally{nf=0,Zfe(),Xd=0}}function Xfe(){var e=fp.now(),t=e-cv;t>mG&&(gN-=t,cv=e)}function Zfe(){for(var e,t=lv,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:lv=n);Pg=e,bE(r)}function bE(e){if(!nf){kg&&(kg=clearTimeout(kg));var t=e-Xd;t>24?(e<1/0&&(kg=setTimeout(X5,e-fp.now()-gN)),Ih&&(Ih=clearInterval(Ih))):(Ih||(cv=fp.now(),Ih=setInterval(Xfe,mG)),nf=1,fG(X5))}}function Jfe(e,t,n){var r=new dv;return t=t==null?0:+t,r.restart(s=>{r.stop(),e(s+t)},t,n),r}class ehe{elapsed=0;timer=null;constructor(t,n,r){this.duration=t,this.easingFn=n,this.onTickCallback=r,this.resume()}get running(){return this.timer!==null}timerCallback(t){this.elapsed=Math.min(t,this.duration);const n=this.duration===0?1:this.elapsed/this.duration,r=this.easingFn(n);this.onTickCallback(r),this.elapsed>=this.duration&&this.stop()}resume(){if(this.running||this.elapsed>=this.duration)return this;const t=wk()-this.elapsed;return this.timer=hG(n=>this.timerCallback(n),0,t),this}stop(){return this.running?(this.timer&&(this.timer.stop(),this.timer=null),this):this}finish(){return this.stop(),Jfe(()=>this.timerCallback(this.duration)),this}}function the(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let s=0;s<n.length;s+=1){const i=n[s];if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(e[i],t[i]))return!1}return!0}function nhe(e,{createInterpolator:t,applyProps:n,skip:r,initialProps:s=e}){const i=g.useRef(s),o=g.useRef(null),l=g.useRef(null),c=g.useRef(e);Ea(()=>{c.current=e},[e]),Ea(()=>{r&&(o.current?.finish(),o.current=null,l.current=null,i.current=e)},[e,r]);const d=g.useCallback(h=>{const p=i.current,b=t(p,e);o.current=new ehe(hN,Yfe,v=>{const x=b(v);i.current=x,n(h,x)})},[n,t,e]);return[g.useCallback(h=>{if(h===null){o.current?.stop();return}const p=l.current;if(p===h){if(the(c.current,e)){o.current?.resume();return}o.current?.stop()}p&&o.current?.stop(),l.current=h,(o.current||!r)&&d(h)},[d,e,r]),i.current]}function gG(e,{createInterpolator:t,transformProps:n,applyProps:r,skip:s,initialProps:i=e,ref:o}){const l=n??(h=>h),[c,d]=nhe(e,{initialProps:i,createInterpolator:t,applyProps:(h,p)=>r(h,l(p)),skip:s}),m=n(s?e:d);return ke({},m,{ref:Ji(c,o)})}function ahe(e){return gG({d:e.d},{createInterpolator:(t,n)=>{const r=ML(t.d,n.d);return s=>({d:r(s)})},applyProps:(t,{d:n})=>t.setAttribute("d",n),transformProps:t=>t,skip:e.skipAnimation,ref:e.ref})}function rhe(e){return gG({d:e.d},{createInterpolator:(t,n)=>{const r=ML(t.d,n.d);return s=>({d:r(s)})},applyProps:(t,{d:n})=>t.setAttribute("d",n),skip:e.skipAnimation,transformProps:t=>t,ref:e.ref})}function she(){return bs().chartRootRef}const ihe={"image/png":"PNG","image/jpeg":"JPEG","image/webp":"WebP"},ohe=e=>({components:{MuiChartsLocalizationProvider:{defaultProps:{localeText:ke({},e)}}}}),pG={loading:"Loading data",noData:"No data to display",zoomIn:"Zoom in",zoomOut:"Zoom out",toolbarExport:"Export",toolbarExportPrint:"Print",toolbarExportImage:e=>`Export as ${ihe[e]??e}`,chartTypeBar:"Bar",chartTypeColumn:"Column",chartTypeLine:"Line",chartTypeArea:"Area",chartTypePie:"Pie",chartPaletteLabel:"Color palette",chartPaletteNameRainbowSurge:"Rainbow Surge",chartPaletteNameBlueberryTwilight:"Blueberry Twilight",chartPaletteNameMangoFusion:"Mango Fusion",chartPaletteNameCheerfulFiesta:"Cheerful Fiesta",chartPaletteNameStrawberrySky:"Strawberry Sky",chartPaletteNameBlue:"Blue",chartPaletteNameGreen:"Green",chartPaletteNamePurple:"Purple",chartPaletteNameRed:"Red",chartPaletteNameOrange:"Orange",chartPaletteNameYellow:"Yellow",chartPaletteNameCyan:"Cyan",chartPaletteNamePink:"Pink",chartConfigurationSectionChart:"Chart",chartConfigurationSectionColumns:"Columns",chartConfigurationSectionBars:"Bars",chartConfigurationSectionAxes:"Axes",chartConfigurationGrid:"Grid",chartConfigurationBorderRadius:"Border radius",chartConfigurationCategoryGapRatio:"Category gap ratio",chartConfigurationBarGapRatio:"Series gap ratio",chartConfigurationStacked:"Stacked",chartConfigurationShowToolbar:"Show toolbar",chartConfigurationSkipAnimation:"Skip animation",chartConfigurationInnerRadius:"Inner radius",chartConfigurationOuterRadius:"Outer radius",chartConfigurationColors:"Colors",chartConfigurationHideLegend:"Hide legend",chartConfigurationShowMark:"Show mark",chartConfigurationHeight:"Height",chartConfigurationWidth:"Width",chartConfigurationSeriesGap:"Series gap",chartConfigurationTickPlacement:"Tick placement",chartConfigurationTickLabelPlacement:"Tick label placement",chartConfigurationCategoriesAxisLabel:"Categories axis label",chartConfigurationSeriesAxisLabel:"Series axis label",chartConfigurationXAxisPosition:"X-axis position",chartConfigurationYAxisPosition:"Y-axis position",chartConfigurationSeriesAxisReverse:"Reverse series axis",chartConfigurationTooltipPlacement:"Placement",chartConfigurationTooltipTrigger:"Trigger",chartConfigurationLegendPosition:"Position",chartConfigurationLegendDirection:"Direction",chartConfigurationBarLabels:"Bar labels",chartConfigurationColumnLabels:"Column labels",chartConfigurationInterpolation:"Interpolation",chartConfigurationSectionTooltip:"Tooltip",chartConfigurationSectionLegend:"Legend",chartConfigurationSectionLines:"Lines",chartConfigurationSectionAreas:"Areas",chartConfigurationSectionArcs:"Arcs",chartConfigurationPaddingAngle:"Padding angle",chartConfigurationCornerRadius:"Corner radius",chartConfigurationArcLabels:"Arc labels",chartConfigurationStartAngle:"Start angle",chartConfigurationEndAngle:"End angle",chartConfigurationPieTooltipTrigger:"Trigger",chartConfigurationPieLegendPosition:"Position",chartConfigurationPieLegendDirection:"Direction",chartConfigurationOptionNone:"None",chartConfigurationOptionValue:"Value",chartConfigurationOptionAuto:"Auto",chartConfigurationOptionTop:"Top",chartConfigurationOptionTopLeft:"Top Left",chartConfigurationOptionTopRight:"Top Right",chartConfigurationOptionBottom:"Bottom",chartConfigurationOptionBottomLeft:"Bottom Left",chartConfigurationOptionBottomRight:"Bottom Right",chartConfigurationOptionLeft:"Left",chartConfigurationOptionRight:"Right",chartConfigurationOptionAxis:"Axis",chartConfigurationOptionItem:"Item",chartConfigurationOptionHorizontal:"Horizontal",chartConfigurationOptionVertical:"Vertical",chartConfigurationOptionBoth:"Both",chartConfigurationOptionStart:"Start",chartConfigurationOptionMiddle:"Middle",chartConfigurationOptionEnd:"End",chartConfigurationOptionExtremities:"Extremities",chartConfigurationOptionTick:"Tick",chartConfigurationOptionMonotoneX:"Monotone X",chartConfigurationOptionMonotoneY:"Monotone Y",chartConfigurationOptionCatmullRom:"Catmull-Rom",chartConfigurationOptionLinear:"Linear",chartConfigurationOptionNatural:"Natural",chartConfigurationOptionStep:"Step",chartConfigurationOptionStepBefore:"Step Before",chartConfigurationOptionStepAfter:"Step After",chartConfigurationOptionBumpX:"Bump X",chartConfigurationOptionBumpY:"Bump Y"},lhe=pG;ohe(pG);const che=["localeText"],vE=g.createContext(null);function dhe(e){const{localeText:t}=e,n=$t(e,che),{localeText:r}=g.useContext(vE)??{localeText:void 0},s=Zs({props:n,name:"MuiChartsLocalizationProvider"}),{children:i,localeText:o}=s,l=g.useMemo(()=>ke({},lhe,o,r,t),[o,r,t]),c=g.useMemo(()=>({localeText:l}),[l]);return a.jsx(vE.Provider,{value:c,children:i})}const xG=()=>{const e=g.useContext(vE);if(e===null)throw new Error(["MUI X Charts: Can not find the charts localization context.","It looks like you forgot to wrap your component in ChartsLocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-charts` package"].join(`
`));return e};function uhe({bandWidth:e,numberOfGroups:t,gapRatio:n}){if(n===0)return{barWidth:e/t,offset:0};const r=e/(t+(t-1)*n),s=n*r;return{barWidth:r,offset:s}}function mhe(e,t,n){const r=e&&t>0,s=!e&&t<0,i=r||s;return n?!i:i}function fhe(e){const{verticalLayout:t,xAxisConfig:n,yAxisConfig:r,series:s,dataIndex:i,numberOfGroups:o,groupIndex:l}=e,c=t?n:r,d=(t?r.reverse:n.reverse)??!1,{barWidth:m,offset:h}=uhe({bandWidth:c.scale.bandwidth(),numberOfGroups:o,gapRatio:c.barGapRatio}),p=l*(m+h),b=n.scale,v=r.scale,x=c.data[i],w=s.data[i];if(w==null)return null;const C=s.stackedData[i].map(T=>t?v(T):b(T)),S=Math.round(Math.min(...C)),_=Math.round(Math.max(...C)),E=w===0?0:Math.max(s.minBarSize,_-S),A=mhe(t,w,d)?_-E:S;return{x:t?b(x)+p:A,y:t?A:v(x)+p,height:t?E:m,width:t?m:E}}const hhe=e=>{const{series:t,identifier:n,axesConfig:r,placement:s}=e;if(!n||n.dataIndex===void 0)return null;const i=t.bar?.series[n.seriesId];if(t.bar==null||i==null||r.x===void 0||r.y===void 0)return null;const o=fhe({verticalLayout:i.layout==="vertical",xAxisConfig:r.x,yAxisConfig:r.y,series:i,dataIndex:n.dataIndex,numberOfGroups:t.bar.stackingGroups.length,groupIndex:t.bar.stackingGroups.findIndex(h=>h.ids.includes(i.id))});if(o==null)return null;const{x:l,y:c,width:d,height:m}=o;switch(s){case"right":return{x:l+d,y:c+m/2};case"bottom":return{x:l+d/2,y:c+m};case"left":return{x:l,y:c+m/2};case"top":default:return{x:l+d/2,y:c}}},ghe=(e,t,n)=>ke({},e,{id:e.id??`auto-generated-id-${t}`,color:e.color??n[t%n.length]}),phe={seriesProcessor:ufe,colorProcessor:ffe,legendGetter:mfe,tooltipGetter:hfe,tooltipItemPositionGetter:hhe,axisTooltipGetter:gfe,xExtremumGetter:Rme,yExtremumGetter:zme,getSeriesWithDefaultValues:ghe},xhe=e=>{const{series:t,axis:n,isDefaultAxis:r,getFilters:s}=e;let i=1/0,o=-1/0;for(const l in t){if(!Object.hasOwn(t,l))continue;const c=t[l].xAxisId;if(!(c===n.id||c===void 0&&r))continue;const d=s?.({currentAxisId:n.id,isDefaultAxis:r,seriesXAxisId:t[l].xAxisId,seriesYAxisId:t[l].yAxisId}),m=t[l].data??[];for(let h=0;h<m.length;h+=1){const p=m[h];d&&!d(p,h)||p.x!==null&&(p.x<i&&(i=p.x),p.x>o&&(o=p.x))}}return[i,o]},yhe=e=>{const{series:t,axis:n,isDefaultAxis:r,getFilters:s}=e;let i=1/0,o=-1/0;for(const l in t){if(!Object.hasOwn(t,l))continue;const c=t[l].yAxisId;if(!(c===n.id||c===void 0&&r))continue;const d=s?.({currentAxisId:n.id,isDefaultAxis:r,seriesXAxisId:t[l].xAxisId,seriesYAxisId:t[l].yAxisId}),m=t[l].data??[];for(let h=0;h<m.length;h+=1){const p=m[h];d&&!d(p,h)||p.y!==null&&(p.y<i&&(i=p.y),p.y>o&&(o=p.y))}}return[i,o]},bhe=({series:e,seriesOrder:t},n)=>({series:Object.fromEntries(Object.entries(e).map(([s,i])=>{const o=i?.datasetKeys,l=["x","y"].filter(d=>typeof o?.[d]!="string");if(i?.datasetKeys&&l.length>0)throw new Error([`MUI X Charts: scatter series with id='${s}' has incomplete datasetKeys.`,`Properties ${l.map(d=>`"${d}"`).join(", ")} are missing.`].join(`
`));const c=o?n?.map(d=>({x:d[o.x]??null,y:d[o.y]??null,z:o.z&&d[o.z],id:o.id&&d[o.id]}))??[]:i.data??[];return[s,ke({labelMarkType:"circle",markerSize:4},i,{preview:ke({markerSize:1},i?.preview),data:c,valueFormatter:i.valueFormatter??(d=>d&&`(${d.x}, ${d.y})`)})]})),seriesOrder:t}),vhe=(e,t,n,r)=>{const s=r?.colorScale,i=n?.colorScale,o=t?.colorScale,l=hk(e);return s?c=>{if(c===void 0)return e.color;if(r?.data?.[c]!==void 0){const h=s(r?.data?.[c]);if(h!==null)return h}const d=e.data[c],m=d===null?l({value:d,dataIndex:c}):s(d.z);return m===null?l({value:d,dataIndex:c}):m}:i?c=>{if(c===void 0)return e.color;const d=e.data[c],m=d===null?l({value:d,dataIndex:c}):i(d.y);return m===null?l({value:d,dataIndex:c}):m}:o?c=>{if(c===void 0)return e.color;const d=e.data[c],m=d===null?l({value:d,dataIndex:c}):o(d.x);return m===null?l({value:d,dataIndex:c}):m}:c=>{if(c===void 0)return e.color;const d=e.data[c];return l({value:d,dataIndex:c})}},whe=e=>{const{seriesOrder:t,series:n}=e;return t.reduce((r,s)=>{const i=pi(n[s].label,"legend");return i===void 0||r.push({markType:n[s].labelMarkType,id:s,seriesId:s,color:n[s].color,label:i}),r},[])},Nhe=e=>{const{series:t,getColor:n,identifier:r}=e;if(!r||r.dataIndex===void 0)return null;const s=pi(t.label,"tooltip"),i=t.data[r.dataIndex],o=t.valueFormatter(i,{dataIndex:r.dataIndex});return{identifier:r,color:n(r.dataIndex),label:s,value:i,formattedValue:o,markType:t.labelMarkType}},jhe=(e,t,n)=>ke({},e,{id:e.id??`auto-generated-id-${t}`,color:e.color??n[t%n.length]}),Che=e=>{const{series:t,identifier:n,axesConfig:r}=e;if(!n||n.dataIndex===void 0)return null;const s=t.scatter?.series[n.seriesId];if(s==null||r.x===void 0||r.y===void 0)return null;const i=s.data?.[n.dataIndex].x,o=s.data?.[n.dataIndex].y;return i==null||o==null?null:{x:r.x.scale(i),y:r.y.scale(o)}},She={seriesProcessor:bhe,colorProcessor:vhe,legendGetter:whe,tooltipGetter:Nhe,tooltipItemPositionGetter:Che,xExtremumGetter:xhe,yExtremumGetter:yhe,getSeriesWithDefaultValues:jhe},_he=e=>{const{axis:t}=e;return nv(t.data??[])};function Ahe(e,t,n,r){return n.reduce((s,i,o)=>{if(t[o]===null)return s;const[l,c]=e(i);return r&&(!r({y:l,x:null},o)||!r({y:c,x:null},o))?s:[Math.min(l,c,s[0]),Math.max(l,c,s[1])]},[1/0,-1/0])}const Ehe=e=>{const{series:t,axis:n,isDefaultAxis:r,getFilters:s}=e;return Object.keys(t).filter(i=>{const o=t[i].yAxisId;return o===n.id||r&&o===void 0}).reduce((i,o)=>{const{area:l,stackedData:c,data:d}=t[o],m=l!==void 0,h=s?.({currentAxisId:n.id,isDefaultAxis:r,seriesXAxisId:t[o].xAxisId,seriesYAxisId:t[o].yAxisId}),p=m&&n.scaleType!=="log"&&typeof t[o].baseline!="string"?w=>w:w=>[w[1],w[1]],b=Ahe(p,d,c,h),[v,x]=b;return[Math.min(v,i[0]),Math.max(x,i[1])]},[1/0,-1/0])};function The(e,t){const n={};return Object.keys(e).forEach(r=>{n[r]=ke({},e[r],{valueFormatter:e[r].valueFormatter??t})}),n}const Lhe=(e,t)=>{const{seriesOrder:n,series:r}=e,s=aG(ke({},e,{defaultStrategy:{stackOffset:"none"}})),i=t??[];n.forEach(l=>{const c=r[l].data;c!==void 0&&c.forEach((d,m)=>{i.length<=m?i.push({[l]:d}):i[m][l]=d})});const o={};return s.forEach(l=>{const{ids:c,stackingOrder:d,stackingOffset:m}=l,h=fk().keys(c.map(p=>{const b=r[p].dataKey;return r[p].data===void 0&&b!==void 0?b:p})).value((p,b)=>p[b]??0).order(d).offset(m)(i);c.forEach((p,b)=>{const v=r[p].dataKey;o[p]=ke({labelMarkType:"line"},r[p],{data:v?t.map(x=>{const w=x[v];return typeof w=="number"?w:null}):r[p].data,stackedData:h[b].map(([x,w])=>[x,w])})})}),{seriesOrder:n,stackingGroups:s,series:The(o,l=>l==null?"":l.toLocaleString())}},Nk=(e,t,n)=>{const r=n?.colorScale,s=t?.colorScale,i=hk(e);return r?o=>{if(o===void 0)return e.color;const l=e.data[o],c=l===null?i({value:l,dataIndex:o}):r(l);return c===null?i({value:l,dataIndex:o}):c}:s?o=>{if(o===void 0)return e.color;const l=t.data?.[o],c=l===null?i({value:l,dataIndex:o}):s(l);return c===null?i({value:l,dataIndex:o}):c}:o=>{if(o===void 0)return e.color;const l=e.data[o];return i({value:l,dataIndex:o})}},khe=e=>{const{seriesOrder:t,series:n}=e;return t.reduce((r,s)=>{const i=pi(n[s].label,"legend");return i===void 0||r.push({markType:n[s].labelMarkType,id:s,seriesId:s,color:n[s].color,label:i}),r},[])},Phe=e=>{const{series:t,getColor:n,identifier:r}=e;if(!r||r.dataIndex===void 0)return null;const s=pi(t.label,"tooltip"),i=t.data[r.dataIndex],o=t.valueFormatter(i,{dataIndex:r.dataIndex});return{identifier:r,color:n(r.dataIndex),label:s,value:i,formattedValue:o,markType:t.labelMarkType}},Dhe=e=>Object.values(e).map(t=>({direction:"x",axisId:t.xAxisId})),Ohe=(e,t,n)=>ke({},e,{id:e.id??`auto-generated-id-${t}`,color:e.color??n[t%n.length]}),Mhe=e=>{const{series:t,identifier:n,axesConfig:r}=e;if(!n||n.dataIndex===void 0)return null;const s=t.line?.series[n.seriesId];if(s==null||r.x===void 0||r.y===void 0)return null;const i=r.x.data?.[n.dataIndex],o=s.data[n.dataIndex];return i==null||o==null?null:{x:r.x.scale(i),y:r.y.scale(o)}},Ihe={colorProcessor:Nk,seriesProcessor:Lhe,legendGetter:khe,tooltipGetter:Phe,tooltipItemPositionGetter:Mhe,axisTooltipGetter:Dhe,xExtremumGetter:_he,yExtremumGetter:Ehe,getSeriesWithDefaultValues:Ohe},$he=(e="none")=>{if(typeof e=="function")return e;switch(e){case"none":return null;case"desc":return(t,n)=>n-t;case"asc":return(t,n)=>t-n;default:return null}},Rhe=e=>{const{seriesOrder:t,series:n}=e,r={};return t.forEach(s=>{const i=Vme().startAngle(ic(n[s].startAngle??0)).endAngle(ic(n[s].endAngle??360)).padAngle(ic(n[s].paddingAngle??0)).sortValues($he(n[s].sortingValues??"none"))(n[s].data.map(o=>o.value));r[s]=ke({labelMarkType:"circle",valueFormatter:o=>o.value.toLocaleString()},n[s],{data:n[s].data.map((o,l)=>ke({},o,{id:o.id??`auto-generated-pie-id-${s}-${l}`},i[l])).map((o,l)=>ke({labelMarkType:"circle"},o,{formattedValue:n[s].valueFormatter?.(ke({},o,{label:pi(o.label,"arc")}),{dataIndex:l})??o.value.toLocaleString()}))})}),{seriesOrder:t,series:r}},zhe=e=>t=>e.data[t].color,Uhe=e=>{const{seriesOrder:t,series:n}=e;return t.reduce((r,s)=>(n[s].data.forEach((i,o)=>{const l=pi(i.label,"legend");l!==void 0&&r.push({markType:i.labelMarkType??n[s].labelMarkType,id:i.id??o,seriesId:s,color:i.color,label:l,itemId:i.id??o})}),r),[])},Fhe=e=>{const{series:t,getColor:n,identifier:r}=e;if(!r||r.dataIndex===void 0)return null;const s=t.data[r.dataIndex];if(s==null)return null;const i=pi(s.label,"tooltip"),o=ke({},s,{label:i}),l=t.valueFormatter(o,{dataIndex:r.dataIndex});return{identifier:r,color:n(r.dataIndex),label:i,value:o,formattedValue:l,markType:s.labelMarkType??t.labelMarkType}},Bhe=(e,t,n)=>ke({},e,{id:e.id??`auto-generated-id-${t}`,data:e.data.map((r,s)=>ke({},r,{color:r.color??n[s%n.length]}))});function uv(e,t){if(typeof e=="number")return e;if(e==="100%")return t;if(e.endsWith("%")){const n=Number.parseFloat(e.slice(0,e.length-1));if(!Number.isNaN(n))return n*t/100}if(e.endsWith("px")){const n=Number.parseFloat(e.slice(0,e.length-2));if(!Number.isNaN(n))return n}throw new Error(`MUI X Charts: Received an unknown value "${e}". It should be a number, or a string with a percentage value.`)}function Hhe(e,t){const{height:n,width:r}=t,{cx:s,cy:i}=e,o=Math.min(r,n)/2,l=uv(s??"50%",r),c=uv(i??"50%",n);return{cx:l,cy:c,availableRadius:o}}const Ghe=e=>{const{series:t,drawingArea:n,identifier:r,placement:s}=e;if(!r||r.dataIndex===void 0)return null;const i=t.pie?.series[r.seriesId];if(i==null)return null;const{cx:o,cy:l,availableRadius:c}=Hhe({cx:i.cx,cy:i.cy},n),{data:d,innerRadius:m=0,outerRadius:h}=i,p=Math.max(0,uv(m??0,c)),b=Math.max(0,uv(h??c,c)),v=d[r.dataIndex];if(!v)return null;const x=[[p,v.startAngle],[p,v.endAngle],[b,v.startAngle],[b,v.endAngle]].map(([_,E])=>({x:o+_*Math.sin(E),y:l-_*Math.cos(E)})),[w,j]=nv(x.map(_=>_.x)),[C,S]=nv(x.map(_=>_.y));switch(s){case"bottom":return{x:(j+w)/2,y:S};case"left":return{x:w,y:(S+C)/2};case"right":return{x:j,y:(S+C)/2};case"top":default:return{x:(j+w)/2,y:C}}},Vhe={colorProcessor:zhe,seriesProcessor:Rhe,legendGetter:Uhe,tooltipGetter:Fhe,tooltipItemPositionGetter:Ghe,getSeriesWithDefaultValues:Bhe},Whe={bar:phe,scatter:She,line:Ihe,pie:Vhe},qhe=[fx,lx,Cf,hx];function Yhe(e){const{children:t,plugins:n=qhe,pluginParams:r={},seriesConfig:s=Whe}=e,{contextValue:i}=rce(n,r,s);return a.jsx(qB.Provider,{value:i,children:t})}const bs=()=>{const e=g.useContext(qB);if(e==null)throw new Error(["MUI X Charts: Could not find the Chart context.","It looks like you rendered your component outside of a ChartDataProvider.","This can also happen if you are bundling multiple versions of the library."].join(`
`));return e};function Khe(e){"hasPointerCapture"in e.currentTarget&&e.currentTarget.hasPointerCapture(e.pointerId)&&e.currentTarget.releasePointerCapture(e.pointerId)}const pN=(e,t)=>{const{instance:n}=bs(),r=g.useRef(!1),s=Ra(()=>{r.current=!0,n.setItemInteraction(e,{interaction:"pointer"}),n.setHighlight(e)}),i=Ra(()=>{r.current=!1,n.removeItemInteraction(e),n.clearHighlight()});return g.useEffect(()=>()=>{r.current&&i()},[i]),g.useMemo(()=>({onPointerEnter:s,onPointerLeave:i,onPointerDown:Khe}),[t,s,i])};function yG(e){return e.replace(" ","_")}const bG=Zn("MuiAppearingMask",["animate"]),Qhe=kt("rect")({animationName:"animate-width",animationTimingFunction:vk,animationDuration:"0s",[`&.${bG.animate}`]:{animationDuration:`${hN}ms`},"@keyframes animate-width":{from:{width:0}}});function vG(e){const t=ei(),n=uN(),r=yG(`${n}-${e.id}`);return a.jsxs(g.Fragment,{children:[a.jsx("clipPath",{id:r,children:a.jsx(Qhe,{className:e.skipAnimation?"":bG.animate,x:0,y:0,width:t.left+t.width+t.right,height:t.top+t.height+t.bottom})}),a.jsx("g",{clipPath:`url(#${r})`,children:e.children})]})}const Xhe=["skipAnimation","ownerState"];function Zhe(e){const{skipAnimation:t,ownerState:n}=e,r=$t(e,Xhe),s=ahe(e);return a.jsx(vG,{skipAnimation:t,id:`${n.id}-area-clip`,children:a.jsx("path",ke({fill:n.gradientId?`url(#${n.gradientId})`:n.color,filter:n.isHighlighted?"brightness(140%)":n.gradientId?void 0:"brightness(120%)",opacity:n.isFaded?.3:1,stroke:"none","data-series":n.id,"data-highlighted":n.isHighlighted||void 0,"data-faded":n.isFaded||void 0},r,s))})}const Jhe=["id","classes","color","gradientId","slots","slotProps","onClick"];function ege(e){return xa("MuiAreaElement",e)}const tge=Zn("MuiAreaElement",["root","highlighted","faded","series"]),nge=e=>{const{classes:t,id:n,isFaded:r,isHighlighted:s}=e,i={root:["root",`series-${n}`,s&&"highlighted",r&&"faded"]};return pa(i,ege,t)};function age(e){const{id:t,classes:n,color:r,gradientId:s,slots:i,slotProps:o,onClick:l}=e,c=$t(e,Jhe),d=pN({type:"line",seriesId:t}),{isFaded:m,isHighlighted:h}=uG({seriesId:t}),p={id:t,classes:n,color:r,gradientId:s,isFaded:m,isHighlighted:h},b=nge(p),v=i?.area??Zhe,x=Jo({elementType:v,externalSlotProps:o?.area,additionalProps:ke({},d,{onClick:l,cursor:l?"pointer":"unset"}),className:b.root,ownerState:p});return a.jsx(v,ke({},c,x))}function jk(e){const t=Nn(),n=mt(t,yle);return e||n}function Ck(){const e=Nn();return mt(e,qH)}function wG(e){switch(e){case"catmullRom":return tfe.alpha(.5);case"linear":return gx;case"monotoneX":return yE;case"monotoneY":return V9;case"natural":return q9;case"step":return Y9;case"stepBefore":return K9;case"stepAfter":return Q9;case"bumpY":return E9;case"bumpX":return A9;default:return yE}}function rge(e,t){const n=px(),r=Vr().xAxisIds[0],s=Wr().yAxisIds[0],i=bk();return g.useMemo(()=>{if(n===void 0)return[];const{series:l,stackingGroups:c}=n,d=[];for(const m of c){const h=m.ids;for(let p=h.length-1;p>=0;p-=1){const b=h[p],{xAxisId:v=r,yAxisId:x=s,stackedData:w,data:j,connectNulls:C,baseline:S,curve:_,strictStepCurve:E,area:A}=l[b];if(!A||!(v in e)||!(x in t))continue;const T=e[v].scale,R=_f(T),U=t[x].scale,W=e[v].data,I=t[x].colorScale&&i(x)||e[v].colorScale&&i(v)||void 0,M=_?.includes("step")&&!E&&Ba(T),H=W?.flatMap((B,X)=>{const le=j[X]==null;if(M){const ue=[{x:B,y:w[X],nullData:le,isExtension:!1}];return!le&&(X===0||j[X-1]==null)&&ue.unshift({x:(T(B)??0)-(T.step()-T.bandwidth())/2,y:w[X],nullData:le,isExtension:!0}),!le&&(X===j.length-1||j[X+1]==null)&&ue.push({x:(T(B)??0)+(T.step()+T.bandwidth())/2,y:w[X],nullData:le,isExtension:!0}),ue}return{x:B,y:w[X],nullData:le}})??[],q=C?H.filter(B=>!B.nullData):H,K=Lg().x(B=>B.isExtension?B.x:R(B.x)).defined(B=>C||!B.nullData||!!B.isExtension).y0(B=>{if(typeof S=="number")return U(S);if(S==="max")return U.range()[1];if(S==="min")return U.range()[0];const X=B.y&&U(B.y[0]);return Number.isNaN(X)?U.range()[0]:X}).y1(B=>B.y&&U(B.y[1])).curve(wG(_))(q)||"";d.push({area:l[b].area,color:l[b].color,gradientId:I,d:K,seriesId:b})}}return d},[n,r,s,e,t,i])}const sge=["slots","slotProps","onItemClick","skipAnimation"],ige=kt("g",{name:"MuiAreaPlot",slot:"Root"})({[`& .${tge.root}`]:{transition:"opacity 0.2s ease-in, fill 0.2s ease-in"}}),oge=()=>{const{xAxis:e}=Vr(),{yAxis:t}=Wr();return rge(e,t)};function lge(e){const{slots:t,slotProps:n,onItemClick:r,skipAnimation:s}=e,i=$t(e,sge),o=Ck(),l=jk(o||s),c=oge();return a.jsx(ige,ke({},i,{children:c.map(({d,seriesId:m,color:h,area:p,gradientId:b})=>!!p&&a.jsx(age,{id:m,d,color:h,gradientId:b,slots:t,slotProps:n,onClick:r&&(v=>r(v,{type:"line",seriesId:m})),skipAnimation:l},m))}))}const cge=["skipAnimation","ownerState"],dge=g.forwardRef(function(t,n){const{skipAnimation:r,ownerState:s}=t,i=$t(t,cge),o=rhe(ke({},t,{ref:n}));return a.jsx(vG,{skipAnimation:r,id:`${s.id}-line-clip`,children:a.jsx("path",ke({stroke:s.gradientId?`url(#${s.gradientId})`:s.color,strokeWidth:2,strokeLinejoin:"round",fill:"none",filter:s.isHighlighted?"brightness(120%)":void 0,opacity:s.isFaded?.3:1,"data-series":s.id,"data-highlighted":s.isHighlighted||void 0,"data-faded":s.isFaded||void 0},i,o))})}),uge=["id","classes","color","gradientId","slots","slotProps","onClick"];function mge(e){return xa("MuiLineElement",e)}const fge=Zn("MuiLineElement",["root","highlighted","faded","series"]),hge=e=>{const{classes:t,id:n,isFaded:r,isHighlighted:s}=e,i={root:["root",`series-${n}`,s&&"highlighted",r&&"faded"]};return pa(i,mge,t)};function gge(e){const{id:t,classes:n,color:r,gradientId:s,slots:i,slotProps:o,onClick:l}=e,c=$t(e,uge),d=pN({type:"line",seriesId:t}),{isFaded:m,isHighlighted:h}=uG({seriesId:t}),p={id:t,classes:n,color:r,gradientId:s,isFaded:m,isHighlighted:h},b=hge(p),v=i?.line??dge,x=Jo({elementType:v,externalSlotProps:o?.line,additionalProps:ke({},d,{onClick:l,cursor:l?"pointer":"unset"}),className:b.root,ownerState:p});return a.jsx(v,ke({},c,x))}function pge(e,t){const n=px(),r=Vr().xAxisIds[0],s=Wr().yAxisIds[0],i=bk();return g.useMemo(()=>{if(n===void 0)return[];const{series:l,stackingGroups:c}=n,d=[];for(const m of c){const h=m.ids;for(const p of h){const{xAxisId:b=r,yAxisId:v=s,stackedData:x,data:w,connectNulls:j,curve:C,strictStepCurve:S}=l[p];if(!(b in e)||!(v in t))continue;const _=e[b].scale,E=_f(_),A=t[v].scale,T=e[b].data,R=t[v].colorScale&&i(v)||e[b].colorScale&&i(b)||void 0,U=C?.includes("step")&&!S&&Ba(_),W=T?.flatMap((q,ae)=>{const K=w[ae]==null;if(U){const B=[{x:q,y:x[ae],nullData:K,isExtension:!1}];return!K&&(ae===0||w[ae-1]==null)&&B.unshift({x:(_(q)??0)-(_.step()-_.bandwidth())/2,y:x[ae],nullData:K,isExtension:!0}),!K&&(ae===w.length-1||w[ae+1]==null)&&B.push({x:(_(q)??0)+(_.step()+_.bandwidth())/2,y:x[ae],nullData:K,isExtension:!0}),B}return{x:q,y:x[ae],nullData:K}})??[],I=j?W.filter(q=>!q.nullData):W,H=dk().x(q=>q.isExtension?q.x:E(q.x)).defined(q=>j||!q.nullData||!!q.isExtension).y(q=>A(q.y[1])).curve(wG(C))(I)||"";d.push({color:l[p].color,gradientId:R,d:H,seriesId:p})}}return d},[n,r,s,e,t,i])}const xge=["slots","slotProps","skipAnimation","onItemClick"],yge=kt("g",{name:"MuiAreaPlot",slot:"Root"})({[`& .${fge.root}`]:{transition:"opacity 0.2s ease-in, fill 0.2s ease-in"}}),bge=()=>{const{xAxis:e}=Vr(),{yAxis:t}=Wr();return pge(e,t)};function vge(e){const{slots:t,slotProps:n,skipAnimation:r,onItemClick:s}=e,i=$t(e,xge),o=Ck(),l=jk(o||r),c=bge();return a.jsx(yge,ke({},i,{children:c.map(({d,seriesId:m,color:h,gradientId:p})=>a.jsx(gge,{id:m,d,color:h,gradientId:p,skipAnimation:l,slots:t,slotProps:n,onClick:s&&(b=>s(b,{type:"line",seriesId:m}))},m))}))}function wge(e){return xa("MuiMarkElement",e)}const NG=Zn("MuiMarkElement",["root","highlighted","faded","animate","series"]),jG=e=>{const{classes:t,id:n,isFaded:r,isHighlighted:s,skipAnimation:i}=e,o={root:["root",`series-${n}`,s&&"highlighted",r&&"faded",i?void 0:"animate"]};return pa(o,wge,t)},Nge=["x","y","id","classes","color","dataIndex","onClick","skipAnimation","isFaded","isHighlighted"],jge=kt("circle")({[`&.${NG.animate}`]:{transitionDuration:`${hN}ms`,transitionProperty:"cx, cy",transitionTimingFunction:vk}});function Cge(e){const{x:t,y:n,id:r,classes:s,color:i,dataIndex:o,onClick:l,skipAnimation:c,isFaded:d=!1,isHighlighted:m=!1}=e,h=$t(e,Nge),p=ro(),b=pN({type:"line",seriesId:r,dataIndex:o}),x=jG({id:r,classes:s,isHighlighted:m,isFaded:d,skipAnimation:c});return a.jsx(jge,ke({},h,{cx:t,cy:n,r:5,fill:(p.vars||p).palette.background.paper,stroke:i,strokeWidth:2,className:x.root,onClick:l,cursor:l?"pointer":"unset"},b,{"data-highlighted":m||void 0,"data-faded":d||void 0}))}function CG(e){switch(e){case"circle":return 0;case"cross":return 1;case"diamond":return 2;case"square":return 3;case"star":return 4;case"triangle":return 5;case"wye":return 6;default:return 0}}const Sge=["x","y","id","classes","color","shape","dataIndex","onClick","skipAnimation","isFaded","isHighlighted"],_ge=kt("path",{name:"MuiMarkElement",slot:"Root"})(({ownerState:e,theme:t})=>({fill:(t.vars||t).palette.background.paper,stroke:e.color,strokeWidth:2,[`&.${NG.animate}`]:{transitionDuration:`${hN}ms`,transitionProperty:"transform, transform-origin",transitionTimingFunction:vk}}));function Age(e){const{x:t,y:n,id:r,classes:s,color:i,shape:o,dataIndex:l,onClick:c,skipAnimation:d,isFaded:m=!1,isHighlighted:h=!1}=e,p=$t(e,Sge),b=pN({type:"line",seriesId:r,dataIndex:l}),v={id:r,classes:s,isHighlighted:h,isFaded:m,color:i,skipAnimation:d},x=jG(v);return a.jsx(_ge,ke({},p,{style:{transform:`translate(${t}px, ${n}px)`,transformOrigin:`${t}px ${n}px`},ownerState:v,className:x.root,d:uk($9[CG(o)])(),onClick:c,cursor:c?"pointer":"unset"},b,{"data-highlighted":h||void 0,"data-faded":m||void 0}))}const Ege=["slots","slotProps","skipAnimation","onItemClick"];function Tge(e){const{slots:t,slotProps:n,skipAnimation:r,onItemClick:s}=e,i=$t(e,Ege),o=Ck(),l=jk(o||r),c=px(),{xAxis:d,xAxisIds:m}=Vr(),{yAxis:h,yAxisIds:p}=Wr(),b=uN(),{instance:v,store:x}=bs(),{isFaded:w,isHighlighted:j}=Ffe(),C=mt(x,g9),S=g.useMemo(()=>{const R={};for(const{dataIndex:U,axisId:W}of C)R[W]===void 0?R[W]=new Set([U]):R[W].add(U);return R},[C]);if(c===void 0)return null;const{series:_,stackingGroups:E}=c,A=m[0],T=p[0];return a.jsx("g",ke({},i,{children:E.flatMap(({ids:R})=>R.map(U=>{const{xAxisId:W=A,yAxisId:I=T,stackedData:M,data:H,showMark:q=!0,shape:ae="circle"}=_[U];if(q===!1)return null;const K=_f(d[W].scale),B=h[I].scale,X=d[W].data;if(X===void 0)throw new Error(`MUI X Charts: ${W===Rw?"The first `xAxis`":`The x-axis with id "${W}"`} should have data property to be able to display a line plot.`);const le=yG(`${b}-${U}-line-clip`),ue=Nk(_[U],d[W],h[I]),J=t?.mark??(ae==="circle"?Cge:Age),ne=j({seriesId:U}),pe=!ne&&w({seriesId:U});return a.jsx("g",{clipPath:`url(#${le})`,"data-series":U,children:X?.map((we,ye)=>{const Te=H[ye]==null?null:M[ye][1];return{x:K(we),y:Te===null?null:B(Te),position:we,value:Te,index:ye}}).filter(({x:we,y:ye,index:Te,position:Ae,value:Pe})=>Pe===null||ye===null||!v.isPointInside(we,ye)?!1:q===!0?!0:q({x:we,y:ye,index:Te,position:Ae,value:Pe})).map(({x:we,y:ye,index:Te})=>a.jsx(J,ke({id:U,dataIndex:Te,shape:ae,color:ue(Te),x:we,y:ye,skipAnimation:l,onClick:s&&(Ae=>s(Ae,{type:"line",seriesId:U,dataIndex:Te})),isHighlighted:S[W]?.has(Te)||ne,isFaded:pe},n?.mark),`${U}-${Te}`))},U)}))}))}function xN(){const[e,t]=g.useState(typeof window<"u"||!1);return g.useEffect(()=>{t(!0)},[]),e}function Sk(e){return typeof e=="number"&&!Number.isFinite(e)}const wE={start:0,extremities:0,end:1,middle:.5};function jS(e,t,n){return e(t)-(e.step()-e.bandwidth())/2+wE[n]*e.step()}function Lge(e){const{scale:t,tickNumber:n,valueFormatter:r,tickInterval:s,tickPlacement:i="extremities",tickLabelPlacement:o,isInside:l}=e;if(Ba(t)){const p=t.domain(),b=o??"middle";if(t.bandwidth()>0){const x=typeof s=="function"&&p.filter(s)||typeof s=="object"&&s||p,w=t.range()[0]>t.range()[1],j=x.findIndex(S=>l(jS(t,S,w?"start":"end"))),C=x.findLastIndex(S=>l(jS(t,S,w?"end":"start")));return[...x.slice(j,C+1).map(S=>{const _=`${S}`;return{value:S,formattedValue:r?.(S,{location:"tick",scale:t,tickNumber:n,defaultTickLabel:_})??_,offset:jS(t,S,i),labelOffset:b==="tick"?0:t.step()*(wE[b]-wE[i])}}),...i==="extremities"&&C===p.length-1&&l(t.range()[1])?[{formattedValue:void 0,offset:t.range()[1],labelOffset:0}]:[]]}return(typeof s=="function"&&p.filter(s)||typeof s=="object"&&s||p).map(x=>{const w=`${x}`;return{value:x,formattedValue:r?.(x,{location:"tick",scale:t,tickNumber:n,defaultTickLabel:w})??w,offset:t(x),labelOffset:0}})}if(t.domain().some(Sk))return[];const d=o,m=typeof s=="object"?s:kge(t,n),h=[];for(let p=0;p<m.length;p+=1){const b=m[p],v=t(b);if(l(v)){const x=t.tickFormat(n)(b);h.push({value:b,formattedValue:r?.(b,{location:"tick",scale:t,tickNumber:n,defaultTickLabel:x})??x,offset:v,labelOffset:d==="middle"?t(m[p-1]??0)-(v+t(m[p-1]??0))/2:0})}}return h}function kge(e,t){const n=e.domain();return n[0]===n[1]?[n[0]]:e.ticks(t)}function yN(e){const{scale:t,tickNumber:n,valueFormatter:r,tickInterval:s,tickPlacement:i="extremities",tickLabelPlacement:o,direction:l}=e,{instance:c}=bs(),d=l==="x"?c.isXInside:c.isYInside;return g.useMemo(()=>Lge({scale:t,tickNumber:n,tickPlacement:i,tickInterval:s,tickLabelPlacement:o,valueFormatter:r,isInside:d}),[t,n,i,s,o,r,d])}function Pge(e=!1){const[t,n]=g.useState(!1);return Ea(()=>{e||n(!0)},[e]),g.useEffect(()=>{e&&n(!0)},[e]),t}const SG=typeof window<"u"&&"Intl"in window&&"Segmenter"in Intl?new Intl.Segmenter(void 0,{granularity:"grapheme"}):null;function Dge(e){return e.length}function Oge(e){const t=SG.segment(e);let n=0;for(const r of t)n+=1;return n}const Mge=SG?Oge:Dge;function Ige(e){return e*(Math.PI/180)}const _G=typeof window<"u"&&"Intl"in window&&"Segmenter"in Intl?new Intl.Segmenter(void 0,{granularity:"grapheme"}):null;function $ge(e,t){return e.slice(0,t)}function Rge(e,t){const n=_G.segment(e);let r="",s=0;for(const i of n)if(r+=i.segment,s+=1,s>=t)break;return r}const zge=_G?Rge:$ge,Z5="";function AG(e,t){const{width:n,height:r,measureText:s}=t,i=Ige(t.angle),o=s(e),l=Math.abs(o.width*Math.cos(i))+Math.abs(o.height*Math.sin(i)),c=Math.abs(o.width*Math.sin(i))+Math.abs(o.height*Math.cos(i));return l<=n&&c<=r}function EG(e,t){if(t(e))return e;let n=e,r=1,s=1/2;const i=Mge(e);let o=i,l=i,c=null;do{if(l=o,o=Math.floor(i*s),o===0)break;n=zge(e,o).trim();const d=t(n+Z5);r+=1,d?(c=n,s+=1/2**r):s-=1/2**r}while(Math.abs(o-l)!==1);return c?c+Z5:""}function TG(){return typeof window>"u"}const oc=new Map,LG=2e3,Uge=new Set(["minWidth","maxWidth","width","minHeight","maxHeight","height","top","left","fontSize","padding","margin","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom"]);function _k(e,t){return Uge.has(e)&&t===+t?`${t}px`:t}const Fge=/([A-Z])/g;function Ak(e){return String(e).replace(Fge,t=>`-${t.toLowerCase()}`)}function kG(e){let t="";for(const n in e)if(Object.hasOwn(e,n)){const r=n,s=e[r];if(s===void 0)continue;t+=`${Ak(r)}:${_k(r,s)};`}return t}const xx=(e,t={})=>{if(e==null||TG())return{width:0,height:0};const n=String(e),r=kG(t),s=`${n}-${r}`,i=oc.get(s);if(i)return i;try{const o=DG(),l=document.createElementNS("http://www.w3.org/2000/svg","text");Object.keys(t).map(d=>(l.style[Ak(d)]=_k(d,t[d]),d)),l.textContent=n,o.replaceChildren(l);const c=PG(l);return oc.set(s,c),oc.size+1>LG&&oc.clear(),c}catch{return{width:0,height:0}}};function Bge(e,t={}){if(TG())return new Map(Array.from(e).map(c=>[c,{width:0,height:0}]));const n=new Map,r=[],s=kG(t);for(const c of e){const d=`${c}-${s}`,m=oc.get(d);m?n.set(c,m):r.push(c)}const i=DG(),o=ke({},t);Object.keys(o).map(c=>(i.style[Ak(c)]=_k(c,o[c]),c));const l=[];for(const c of r){const d=document.createElementNS("http://www.w3.org/2000/svg","text");d.textContent=`${c}`,l.push(d)}i.replaceChildren(...l);for(let c=0;c<r.length;c+=1){const d=r[c],m=i.children[c],h=PG(m),p=`${d}-${s}`;oc.set(p,h),n.set(d,h)}return oc.size+1>LG&&oc.clear(),n}function PG(e){try{const t=e.getBBox();return{width:t.width,height:t.height}}catch{const t=e.getBoundingClientRect();return{width:t.width,height:t.height}}}let Pr=null;function DG(){return Pr===null&&(Pr=document.createElementNS("http://www.w3.org/2000/svg","svg"),Pr.setAttribute("aria-hidden","true"),Pr.style.position="absolute",Pr.style.top="-20000px",Pr.style.left="0",Pr.style.padding="0",Pr.style.margin="0",Pr.style.border="none",Pr.style.pointerEvents="none",Pr.style.visibility="hidden",Pr.style.contain="strict",document.body.appendChild(Pr)),Pr}function Hge(e,t,n,r,s){const i=new Map,o=mN(s?.angle??0);let l=1,c=1;s?.textAnchor==="start"?(l=1/0,c=1):s?.textAnchor==="end"?(l=1,c=1/0):(l=2,c=2),o>90&&o<270&&([l,c]=[c,l]),r&&([l,c]=[c,l]);for(const d of e)if(d.formattedValue){const m=Math.min((d.offset+d.labelOffset)*l,(t.left+t.width+t.right-d.offset-d.labelOffset)*c),h=p=>AG(p,{width:m,height:n,angle:o,measureText:b=>xx(b,s)});i.set(d,EG(d.formattedValue.toString(),h))}return i}const J5=5;function Gge(e,t,n=0){const r=Math.min(Math.abs(n)%180,Math.abs(Math.abs(n)%180-180)%180);if(r<J5)return e;if(r>90-J5)return t;const s=ic(r),i=Math.atan2(t,e);return s<i?e/Math.cos(s):t/Math.sin(s)}function Vge(e,{tickLabelStyle:t,tickLabelInterval:n,tickLabelMinGap:r,reverse:s,isMounted:i,isXInside:o}){if(typeof n=="function")return new Set(e.filter((h,p)=>n(h.value,p)));let l=0;const c=s?-1:1,d=e.filter(h=>{const{offset:p,labelOffset:b,formattedValue:v}=h;if(v==="")return!1;const x=p+b;return o(x)}),m=qge(d,t);return new Set(d.filter((h,p)=>{const{offset:b,labelOffset:v}=h,x=b+v;if(p>0&&c*x<c*(l+r))return!1;const{width:w,height:j}=i?Wge(m,h):{width:0,height:0},C=Gge(w,j,t?.angle),S=x-c*C/2;return p>0&&c*S<c*(l+r)?!1:(l=x+c*C/2,!0)}))}function Wge(e,t){if(t.formattedValue===void 0)return{width:0,height:0};let n=0,r=0;for(const s of t.formattedValue.split(`
`)){const i=e.get(s);i&&(n=Math.max(n,i.width),r+=i.height)}return{width:n,height:r}}function qge(e,t){const n=new Set;for(const r of e)r.formattedValue&&r.formattedValue.split(`
`).forEach(s=>n.add(s));return Bge(n,t)}function OG(e){return xa("MuiChartsAxis",e)}const Ny=Zn("MuiChartsAxis",["root","line","tickContainer","tick","tickLabel","label","directionX","directionY","top","bottom","left","right","id"]),MG=e=>{const{classes:t,position:n,id:r}=e,s={root:["root","directionX",n,`id-${r}`],line:["line"],tickContainer:["tickContainer"],tick:["tick"],tickLabel:["tickLabel"],label:["label"]};return pa(s,OG,t)},NE=3,Yge=4,IG={disableLine:!1,disableTicks:!1,tickSize:6,tickLabelMinGap:4};function Kge({style:e,needsComputation:t,text:n}){return n.split(`
`).map(r=>ke({text:r},t?xx(r,e):{width:0,height:0}))}const Qge=["x","y","style","text","ownerState"],Xge=["angle","textAnchor","dominantBaseline"];function bN(e){const{x:t,y:n,style:r,text:s}=e,i=$t(e,Qge),o=r??{},{angle:l,textAnchor:c,dominantBaseline:d}=o,m=$t(o,Xge),h=xN(),p=g.useMemo(()=>Kge({style:m,needsComputation:h&&s.includes(`
`),text:s}),[m,s,h]);let b;switch(d){case"hanging":case"text-before-edge":b=0;break;case"central":b=(p.length-1)/2*-p[0].height;break;default:b=(p.length-1)*-p[0].height;break}return a.jsx("text",ke({},i,{transform:l?`rotate(${l}, ${t}, ${n})`:void 0,x:t,y:n,textAnchor:c,dominantBaseline:d,style:m,children:p.map((v,x)=>a.jsx("tspan",{x:t,dy:`${x===0?b:p[0].height}px`,dominantBaseline:d,children:v.text},x))}))}function $G(e){const t=mN(e);return t<=30||t>=330||t<=210&&t>=150?"middle":t<=180?"end":"start"}function RG(e){const t=mN(e);return t<=30||t>=330?"hanging":t<=210&&t>=150?"auto":"central"}function zG(e){switch(e){case"start":return"end";case"end":return"start";default:return e}}const Zge=["scale","tickNumber","reverse"];function UG(e){const{xAxis:t,xAxisIds:n}=Vr(),r=t[e.axisId??n[0]],{scale:s,tickNumber:i,reverse:o}=r,l=$t(r,Zge),c=Zs({props:ke({},l,e),name:"MuiChartsXAxis"}),d=ke({},IG,c),{position:m,tickLabelStyle:h,slots:p,slotProps:b}=d,v=ro(),x=ex(),w=MG(d),j=m==="bottom"?1:-1,C=p?.axisTick??"line",S=p?.axisTickLabel??bN,_=$G((m==="bottom"?0:180)-(h?.angle??0)),E=RG((m==="bottom"?0:180)-(h?.angle??0)),A=Jo({elementType:S,externalSlotProps:b?.axisTickLabel,additionalProps:{style:ke({},v.typography.caption,{fontSize:12,lineHeight:1.25,textAnchor:x?zG(_):_,dominantBaseline:E},h)},className:w.tickLabel,ownerState:{}});return{xScale:s,defaultizedProps:d,tickNumber:i,positionSign:j,classes:w,Tick:C,TickLabel:S,axisTickLabelProps:A,reverse:o}}function Jge(e){const{axisLabelHeight:t}=e,{xScale:n,defaultizedProps:r,tickNumber:s,positionSign:i,classes:o,Tick:l,TickLabel:c,axisTickLabelProps:d,reverse:m}=UG(e),h=ex(),p=Pge(),{disableTicks:b,tickSize:v,valueFormatter:x,slotProps:w,tickInterval:j,tickLabelInterval:C,tickPlacement:S,tickLabelPlacement:_,tickLabelMinGap:E,height:A}=r,T=ei(),{instance:R}=bs(),U=xN(),W=b?4:v,I=yN({scale:n,tickNumber:s,valueFormatter:x,tickInterval:j,tickPlacement:S,tickLabelPlacement:_,direction:"x"}),M=Vge(I,{tickLabelStyle:d.style,tickLabelInterval:C,tickLabelMinGap:E,reverse:m,isMounted:p,isXInside:R.isXInside}),H=Math.max(0,A-(t>0?t+Yge:0)-W-NE),q=U?Hge(M,T,H,h,d.style):new Map(Array.from(M).map(ae=>[ae,ae.formattedValue]));return a.jsx(g.Fragment,{children:I.map((ae,K)=>{const{offset:B,labelOffset:X}=ae,le=X??0,ue=i*(W+NE),J=R.isXInside(B),ne=q.get(ae),pe=M.has(ae);return a.jsxs("g",{transform:`translate(${B}, 0)`,className:o.tickContainer,children:[!b&&J&&a.jsx(l,ke({y2:i*W,className:o.tick},w?.axisTick)),ne!==void 0&&pe&&a.jsx(c,ke({x:le,y:ue},d,{text:ne}))]},K)})})}const $h={start:0,extremities:0,end:1,middle:.5,tick:0};function FG(e){const{scale:t,tickInterval:n,tickLabelPlacement:r="middle",tickPlacement:s="extremities",groups:i}=e;return g.useMemo(()=>{const o=t.domain(),l=typeof n=="function"&&o.filter(n)||typeof n=="object"&&n||o;if(t.bandwidth()>0){const c=e$(l,i,s,r,t);return c[0]&&(c[0].ignoreTick=!0),[{formattedValue:void 0,offset:t.range()[0],labelOffset:0,groupIndex:i.length-1},...c,{formattedValue:void 0,offset:t.range()[1],labelOffset:0,groupIndex:i.length-1}]}return e$(l,i,s,r,t)},[t,n,i,s,r])}function e$(e,t,n,r,s){const i=[],o=new Map;let l=0;for(let c=0;c<t.length;c+=1)for(let d=0;d<e.length;d+=1){const m=e[d],h=t[c].getValue(m,d),p=i[i.length-1];if(p?.value!==h||p?.groupIndex!==c){l=1;const v=Ba(s)?s(m)-(s.step()-s.bandwidth())/2+$h[n]*s.step():s(m),x=s.step()*l*($h[r]-$h[n]);i.push({value:h,formattedValue:`${h}`,offset:v,groupIndex:c,dataIndex:d,ignoreTick:!1,labelOffset:x}),o.has(d)||o.set(d,new Set);const w=o.get(d);for(const j of w.values())i[j].ignoreTick=!0;w.add(i.length-1)}else{l+=1;const v=s.step()*l*($h[r]-$h[n]);p.labelOffset=v}}return i}const t$={tickSize:6},epe=(e,t,n)=>{const r=e[t]??{},s=n??t$.tickSize,i=s*t*2+s;return ke({},t$,r,{tickSize:r.tickSize??i})};function tpe(e){const{xScale:t,defaultizedProps:n,positionSign:r,classes:s,Tick:i,TickLabel:o,axisTickLabelProps:l}=UG(e);if(!Ba(t))throw new Error("MUI X Charts: ChartsGroupedXAxis only supports the `band` and `point` scale types.");const{disableTicks:c,tickSize:d,valueFormatter:m,slotProps:h,tickInterval:p,tickPlacement:b,tickLabelPlacement:v}=n,x=n.groups,{instance:w}=bs(),j=FG({scale:t,tickInterval:p,tickPlacement:b,tickLabelPlacement:v,groups:x});return a.jsx(g.Fragment,{children:j.map((C,S)=>{const{offset:_,labelOffset:E}=C,A=E??0,T=w.isXInside(_),R=C.formattedValue,U=C.ignoreTick??!1,W=C.groupIndex??0,I=epe(x,W,d),M=r*I.tickSize,H=r*(I.tickSize+NE);return a.jsxs("g",{transform:`translate(${_}, 0)`,className:s.tickContainer,"data-group-index":W,children:[!c&&!U&&T&&a.jsx(i,ke({y2:M,className:s.tick},h?.axisTick)),R!==void 0&&a.jsx(o,ke({x:A,y:H},l,{style:ke({},l.style,I.tickLabelStyle),text:R}))]},S)})})}const BG=kt("g",{name:"MuiChartsAxis",slot:"Root"})(({theme:e})=>({[`& .${Ny.tickLabel}`]:ke({},e.typography.caption,{fill:(e.vars||e).palette.text.primary}),[`& .${Ny.label}`]:{fill:(e.vars||e).palette.text.primary},[`& .${Ny.line}`]:{stroke:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges",strokeWidth:1},[`& .${Ny.tick}`]:{stroke:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges"}})),npe=["axis"],ape=["scale","tickNumber","reverse"],rpe=kt(BG,{name:"MuiChartsXAxis",slot:"Root"})({});function spe(e){let{axis:t}=e,n=$t(e,npe);const{scale:r}=t,s=$t(t,ape),i=Zs({props:ke({},s,n),name:"MuiChartsXAxis"}),o=ke({},IG,i),{position:l,labelStyle:c,offset:d,slots:m,slotProps:h,sx:p,disableLine:b,label:v,height:x}=o,w=ro(),j=MG(o),{left:C,top:S,width:_,height:E}=ei(),A=l==="bottom"?1:-1,T=m?.axisLine??"line",R=m?.axisLabel??bN,U=Jo({elementType:R,externalSlotProps:h?.axisLabel,additionalProps:{style:ke({},w.typography.body1,{lineHeight:1,fontSize:14,textAnchor:"middle",dominantBaseline:l==="bottom"?"text-after-edge":"text-before-edge"},c)},ownerState:{}});if(l==="none")return null;const W=v?xx(v,U.style).height:0,I=r.domain(),H=Ba(r)?I.length===0:I.some(Sk);let q=null;H||(q="groups"in t&&Array.isArray(t.groups)?a.jsx(tpe,ke({},n)):a.jsx(Jge,ke({},n,{axisLabelHeight:W})));const ae={x:C+_/2,y:A*x};return a.jsxs(rpe,{transform:`translate(0, ${l==="bottom"?S+E+d:S-d})`,className:j.root,sx:p,children:[!b&&a.jsx(T,ke({x1:C,x2:C+_,className:j.line},h?.axisLine)),q,v&&a.jsx("g",{className:j.label,children:a.jsx(R,ke({},ae,U,{text:v}))})]})}function ipe(e){const{xAxis:t,xAxisIds:n}=Vr(),r=t[e.axisId??n[0]];return r?a.jsx(spe,ke({},e,{axis:r})):(`${e.axisId}`,null)}function ope(e,t,n,r,s){const i=new Map,o=mN(s?.angle??0);let l=1,c=1;s?.textAnchor==="start"?(l=1/0,c=1):s?.textAnchor==="end"?(l=1,c=1/0):(l=2,c=2),o>180&&([l,c]=[c,l]),r&&([l,c]=[c,l]);for(const d of e)if(d.formattedValue){const m=Math.min((d.offset+d.labelOffset)*l,(t.top+t.height+t.bottom-d.offset-d.labelOffset)*c),h=p=>AG(p,{width:n,height:m,angle:o,measureText:b=>xx(b,s)});i.set(d,EG(d.formattedValue.toString(),h))}return i}const HG=e=>{const{classes:t,position:n,id:r}=e,s={root:["root","directionY",n,`id-${r}`],line:["line"],tickContainer:["tickContainer"],tick:["tick"],tickLabel:["tickLabel"],label:["label"]};return pa(s,OG,t)},jE=2,lpe=2,GG={disableLine:!1,disableTicks:!1,tickSize:6},cpe=["scale","tickNumber","reverse"];function VG(e){const{yAxis:t,yAxisIds:n}=Wr(),r=t[e.axisId??n[0]],{scale:s,tickNumber:i}=r,o=$t(r,cpe),l=Zs({props:ke({},o,e),name:"MuiChartsYAxis"}),c=ke({},GG,l),{position:d,tickLabelStyle:m,slots:h,slotProps:p}=c,b=ro(),v=ex(),x=HG(c),w=d==="right"?1:-1,j=typeof m?.fontSize=="number"?m.fontSize:12,C=h?.axisTick??"line",S=h?.axisTickLabel??bN,_=$G((d==="right"?-90:90)-(m?.angle??0)),E=RG((d==="right"?-90:90)-(m?.angle??0)),A=Jo({elementType:S,externalSlotProps:p?.axisTickLabel,additionalProps:{style:ke({},b.typography.caption,{fontSize:j,textAnchor:v?zG(_):_,dominantBaseline:E},m)},className:x.tickLabel,ownerState:{}});return{yScale:s,defaultizedProps:c,tickNumber:i,positionSign:w,classes:x,Tick:C,TickLabel:S,axisTickLabelProps:A}}function dpe(e){const{axisLabelHeight:t}=e,{yScale:n,defaultizedProps:r,tickNumber:s,positionSign:i,classes:o,Tick:l,TickLabel:c,axisTickLabelProps:d}=VG(e),m=ex(),{disableTicks:h,tickSize:p,valueFormatter:b,slotProps:v,tickPlacement:x,tickLabelPlacement:w,tickInterval:j,tickLabelInterval:C,width:S}=r,_=ei(),{instance:E}=bs(),A=xN(),T=h?4:p,R=yN({scale:n,tickNumber:s,valueFormatter:b,tickPlacement:x,tickLabelPlacement:w,tickInterval:j,direction:"y"}),U=Math.max(0,S-(t>0?t+lpe:0)-T-jE),W=A?ope(R,_,U,m,d.style):new Map(Array.from(R).map(I=>[I,I.formattedValue]));return a.jsx(g.Fragment,{children:R.map((I,M)=>{const{offset:H,labelOffset:q,value:ae}=I,K=i*(T+jE),B=q,X=typeof C=="function"&&!C?.(ae,M),le=E.isYInside(H),ue=W.get(I);return le?a.jsxs("g",{transform:`translate(0, ${H})`,className:o.tickContainer,children:[!h&&a.jsx(l,ke({x2:i*T,className:o.tick},v?.axisTick)),ue!==void 0&&!X&&a.jsx(c,ke({x:K,y:B,text:ue},d))]},M):null})})}const n$={tickSize:6},upe=(e,t,n)=>{const r=e[t]??{},s=n??n$.tickSize,i=s*t*2+s;return ke({},n$,r,{tickSize:r.tickSize??i})};function mpe(e){const{yScale:t,defaultizedProps:n,positionSign:r,classes:s,Tick:i,TickLabel:o,axisTickLabelProps:l}=VG(e);if(!Ba(t))throw new Error("MUI X Charts: ChartsGroupedYAxis only supports the `band` and `point` scale types.");const{disableTicks:c,tickSize:d,valueFormatter:m,slotProps:h,tickInterval:p,tickPlacement:b,tickLabelPlacement:v}=n,x=n.groups,{instance:w}=bs(),j=FG({scale:t,tickInterval:p,tickPlacement:b,tickLabelPlacement:v,groups:x});return a.jsx(g.Fragment,{children:j.map((C,S)=>{const{offset:_,labelOffset:E}=C,A=E??0,T=w.isYInside(_),R=C.formattedValue,U=C.ignoreTick??!1,W=C.groupIndex??0,I=upe(x,W,d),M=r*I.tickSize,H=r*(I.tickSize+jE);return a.jsxs("g",{transform:`translate(0, ${_})`,className:s.tickContainer,"data-group-index":W,children:[!c&&!U&&T&&a.jsx(i,ke({x2:M,className:s.tick},h?.axisTick)),R!==void 0&&a.jsx(o,ke({x:H,y:A},l,{style:ke({},l.style,I.tickLabelStyle),text:R}))]},S)})})}const fpe=["axis"],hpe=["scale","tickNumber","reverse"],gpe=kt(BG,{name:"MuiChartsYAxis",slot:"Root"})({});function ppe(e){let{axis:t}=e,n=$t(e,fpe);const{scale:r}=t,s=$t(t,hpe),i=xN(),o=Zs({props:ke({},s,n),name:"MuiChartsYAxis"}),l=ke({},GG,o),{position:c,disableLine:d,label:m,labelStyle:h,offset:p,width:b,sx:v,slots:x,slotProps:w}=l,j=ro(),C=HG(l),{left:S,top:_,width:E,height:A}=ei(),T=c==="right"?1:-1,R=x?.axisLine??"line",U=x?.axisLabel??bN,W=Jo({elementType:R,externalSlotProps:w?.axisLine,additionalProps:{strokeLinecap:"square"},ownerState:{}}),I=Jo({elementType:U,externalSlotProps:w?.axisLabel,additionalProps:{style:ke({},j.typography.body1,{lineHeight:1,fontSize:14,angle:T*90,textAnchor:"middle",dominantBaseline:"text-before-edge"},h)},ownerState:{}});if(c==="none")return null;const M={x:T*b,y:_+A/2},H=m==null?0:xx(m,I.style).height,q=r.domain(),K=Ba(r)?q.length===0:q.some(Sk);let B=null;return K||(B="groups"in t&&Array.isArray(t.groups)?a.jsx(mpe,ke({},n)):a.jsx(dpe,ke({},n,{axisLabelHeight:H}))),a.jsxs(gpe,{transform:`translate(${c==="right"?S+E+p:S-p}, 0)`,className:C.root,sx:v,children:[!d&&a.jsx(R,ke({y1:_,y2:_+A,className:C.line},W)),B,m&&i&&a.jsx("g",{className:C.label,children:a.jsx(U,ke({},M,I,{text:m}))})]})}function xpe(e){const{yAxis:t,yAxisIds:n}=Wr(),r=t[e.axisId??n[0]];return r?a.jsx(ppe,ke({},e,{axis:r})):(`${e.axisId}`,null)}function ype(e){const{slots:t,slotProps:n}=e,{xAxisIds:r,xAxis:s}=Vr(),{yAxisIds:i,yAxis:o}=Wr();return a.jsxs(g.Fragment,{children:[r.map(l=>!s[l].position||s[l].position==="none"?null:a.jsx(ipe,{slots:t,slotProps:n,axisId:l},l)),i.map(l=>!o[l].position||o[l].position==="none"?null:a.jsx(xpe,{slots:t,slotProps:n,axisId:l},l))]})}function bpe(e){return xa("MuiTypography",e)}Zn("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const vpe={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},wpe=eoe(),Npe=e=>{const{align:t,gutterBottom:n,noWrap:r,paragraph:s,variant:i,classes:o}=e,l={root:["root",i,e.align!=="inherit"&&`align${yn(t)}`,n&&"gutterBottom",r&&"noWrap",s&&"paragraph"]};return pa(l,bpe,o)},jpe=kt("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],n.align!=="inherit"&&t[`align${yn(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(Kd(({theme:e})=>({margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(e.typography).filter(([t,n])=>t!=="inherit"&&n&&typeof n=="object").map(([t,n])=>({props:{variant:t},style:n})),...Object.entries(e.palette).filter(rp()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette?.text||{}).filter(([,t])=>typeof t=="string").map(([t])=>({props:{color:`text${yn(t)}`},style:{color:(e.vars||e).palette.text[t]}})),{props:({ownerState:t})=>t.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:t})=>t.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:t})=>t.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:t})=>t.paragraph,style:{marginBottom:16}}]}))),a$={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Ek=g.forwardRef(function(t,n){const{color:r,...s}=Ac({props:t,name:"MuiTypography"}),i=!vpe[r],o=wpe({...s,...i&&{color:r}}),{align:l="inherit",className:c,component:d,gutterBottom:m=!1,noWrap:h=!1,paragraph:p=!1,variant:b="body1",variantMapping:v=a$,...x}=o,w={...o,align:l,color:r,className:c,component:d,gutterBottom:m,noWrap:h,paragraph:p,variant:b,variantMapping:v},j=d||(p?"p":v[b]||a$[b])||"span",C=Npe(w);return a.jsx(jpe,{as:j,ref:n,className:ct(C.root,c),...x,ownerState:w,style:{...l!=="inherit"&&{"--Typography-textAlign":l},...x.style}})});function Cpe(e){return xa("MuiChartsTooltip",e)}const Lm=Zn("MuiChartsTooltip",["root","paper","table","row","cell","mark","markContainer","labelCell","valueCell","axisValueCell"]),vN=e=>pa({root:["root"],paper:["paper"],table:["table"],row:["row"],cell:["cell"],mark:["mark"],markContainer:["markContainer"],labelCell:["labelCell"],valueCell:["valueCell"],axisValueCell:["axisValueCell"]},Cpe,e);function Spe(){const e=Nn(),t=mt(e,i9),n=mt(e,ys),r=fN(),{xAxis:s,xAxisIds:i}=Vr(),{yAxis:o,yAxisIds:l}=Wr(),{zAxis:c,zAxisIds:d}=pk(),{rotationAxis:m,rotationAxisIds:h}=oG();if(!t)return null;const p=r[t.type]?.series[t.seriesId];if(!p)return null;const b=tv(p)?p.xAxisId??i[0]:void 0,v=tv(p)?p.yAxisId??l[0]:void 0,x="zAxisId"in p?p.zAxisId??d[0]:d[0],w=h[0],j=n[p.type].colorProcessor?.(p,b!==void 0?s[b]:void 0,v!==void 0?o[v]:void 0,x!==void 0?c[x]:void 0)??(()=>""),C={};return b!==void 0&&(C.x=s[b]),v!==void 0&&(C.y=o[v]),w!==void 0&&(C.rotation=m[w]),n[p.type].tooltipGetter({series:p,axesConfig:C,getColor:j,identifier:t})}const CE=kt("div",{name:"MuiChartsTooltip",slot:"Container",overridesResolver:(e,t)=>t.paper})(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,borderRadius:(e.vars||e).shape?.borderRadius,border:`solid ${(e.vars||e).palette.divider} 1px`})),SE=kt("table",{name:"MuiChartsTooltip",slot:"Table"})(({theme:e})=>({borderSpacing:0,[`& .${Lm.markContainer}`]:{display:"inline-block",width:`calc(20px + ${e.spacing(1.5)})`,verticalAlign:"middle"},"& caption":{borderBottom:`solid ${(e.vars||e).palette.divider} 1px`,padding:e.spacing(.5,1.5),textAlign:"start",whiteSpace:"nowrap","& span":{marginRight:e.spacing(1.5)}}})),_E=kt("tr",{name:"MuiChartsTooltip",slot:"Row"})(({theme:e})=>({"tr:first-of-type& td":{paddingTop:e.spacing(.5)},"tr:last-of-type& td":{paddingBottom:e.spacing(.5)}})),Pm=kt(Ek,{name:"MuiChartsTooltip",slot:"Cell"})(({theme:e})=>({verticalAlign:"middle",color:(e.vars||e).palette.text.secondary,textAlign:"start",[`&.${Lm.cell}`]:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)},[`&.${Lm.labelCell}`]:{whiteSpace:"nowrap",fontWeight:e.typography.fontWeightRegular},[`&.${Lm.valueCell}, &.${Lm.axisValueCell}`]:{color:(e.vars||e).palette.text.primary,fontWeight:e.typography.fontWeightMedium},[`&.${Lm.valueCell}`]:{paddingLeft:e.spacing(1.5),paddingRight:e.spacing(1.5)},"td:first-of-type&, th:first-of-type&":{paddingLeft:e.spacing(1.5)},"td:last-of-type&, th:last-of-type&":{paddingRight:e.spacing(1.5)}}));function _pe(e){return xa("MuiChartsLabelMark",e)}const pm=Zn("MuiChartsLabelMark",["root","line","square","circle","mask","fill"]),Ape=e=>{const{type:t}=e;return pa({root:typeof t=="function"?["root"]:["root",t],mask:["mask"],fill:["fill"]},_pe,e.classes)},WG=(e,t,n)=>g.forwardRef(function(s,i){const o=Zs({props:s,name:e}),l=typeof t.defaultProps=="function"?t.defaultProps(o):t.defaultProps??{},c=Yd(l,o),d=ro(),m=t.classesResolver?.(c,d),h=g.forwardRef(n);return a.jsx(h,ke({},c,{classes:m,ref:i}))}),Epe=["type","color","className","classes"],Tpe=kt("div",{name:"MuiChartsLabelMark",slot:"Root"})(()=>({display:"flex",width:14,height:14,[`&.${pm.line}`]:{width:16,height:"unset",alignItems:"center",[`.${pm.mask}`]:{height:4,width:"100%",borderRadius:1,overflow:"hidden"}},[`&.${pm.square}`]:{height:13,width:13,borderRadius:2,overflow:"hidden"},[`&.${pm.circle}`]:{height:15,width:15},svg:{display:"block"},[`& .${pm.mask} > *`]:{height:"100%",width:"100%"},[`& .${pm.mask}`]:{height:"100%",width:"100%"}})),mv=WG("MuiChartsLabelMark",{defaultProps:{type:"square"},classesResolver:Ape},function(t,n){const{type:r,color:s,className:i,classes:o}=t,l=$t(t,Epe),c=r;return a.jsx(Tpe,ke({className:ct(o?.root,i),ownerState:t,"aria-hidden":"true",ref:n},l,{children:a.jsx("div",{className:o?.mask,children:typeof c=="function"?a.jsx(c,{className:o?.fill,color:s}):a.jsx("svg",{viewBox:"0 0 24 24",preserveAspectRatio:r==="line"?"none":void 0,children:r==="circle"?a.jsx("circle",{className:o?.fill,r:"12",cx:"12",cy:"12",fill:s}):a.jsx("rect",{className:o?.fill,width:"24",height:"24",fill:s})})})}))});function Lpe(e){const{classes:t,sx:n}=e,r=Spe(),s=vN(t);if(!r)return null;if("values"in r){const{label:d,color:m,markType:h}=r;return a.jsx(CE,{sx:n,className:s.paper,children:a.jsxs(SE,{className:s.table,children:[a.jsxs(Ek,{component:"caption",children:[a.jsx("div",{className:s.markContainer,children:a.jsx(mv,{type:h,color:m,className:s.mark})}),d]}),a.jsx("tbody",{children:r.values.map(({formattedValue:p,label:b})=>a.jsxs(_E,{className:s.row,children:[a.jsx(Pm,{className:ct(s.labelCell,s.cell),component:"th",children:b}),a.jsx(Pm,{className:ct(s.valueCell,s.cell),component:"td",children:p})]},b))})]})})}const{color:i,label:o,formattedValue:l,markType:c}=r;return a.jsx(CE,{sx:n,className:s.paper,children:a.jsx(SE,{className:s.table,children:a.jsx("tbody",{children:a.jsxs(_E,{className:s.row,children:[a.jsxs(Pm,{className:ct(s.labelCell,s.cell),component:"th",children:[a.jsx("div",{className:s.markContainer,children:a.jsx(mv,{type:c,color:i,className:s.mark})}),o]}),a.jsx(Pm,{className:ct(s.valueCell,s.cell),component:"td",children:l})]})})})})}function kpe(e){const t=Nn(),n=mt(t,ys);return g.useMemo(()=>{const s={};return Object.keys(n).forEach(i=>{s[i]=n[i].colorProcessor}),s},[n])}const Ppe=vB({themeId:Ow});function Dpe(){const e=xk(),[t,n]=g.useState(null);return g.useEffect(()=>{const r=e.current;if(r===null)return()=>{};const s=o=>{o.pointerType!=="mouse"&&n(null)},i=o=>{n({pointerType:o.pointerType})};return r.addEventListener("pointerenter",i),r.addEventListener("pointerup",s),()=>{r.removeEventListener("pointerenter",i),r.removeEventListener("pointerup",s)}},[e]),t}function Ope(e){return e instanceof Date?e.toUTCString():e.toLocaleString()}const Mpe="@media (pointer: fine)",Ipe=()=>Ppe(Mpe,{defaultMatches:!0}),qG=(e,t)=>t,YG=(e,t)=>t;function KG(e,t,n){return Array.isArray(n)?n.map(r=>K5(t.axis[r],e)):K5(t.axis[n],e)}const QG=at(cx,dx,jfe,(e,t,n)=>e===null||t===null?null:Cfe(n)(e,t)),$pe=at(QG,xu,qG,(e,t,n=t.axisIds[0])=>e===null?null:KG(e,t,n)),XG=at(QG,xu,YG,(e,t,n=t.axisIds)=>e===null?null:KG(e,t,n));at(xu,$pe,qG,(e,t,n=e.axisIds[0])=>{if(t===null||t===-1||e.axisIds.length===0)return null;const r=e.axis[n]?.data;return r?r[t]:null});at(xu,XG,YG,(e,t,n=e.axisIds)=>t===null?null:n.map((r,s)=>{const i=t[s];return i===-1?null:e.axis[r].data?.[i]}));const ZG=Mw({memoizeOptions:{resultEqualityCheck:Hm}})(XG,xu,(e,t)=>e===null?[]:t.axisIds.map((n,r)=>({axisId:n,dataIndex:e[r]})).filter(({axisId:n,dataIndex:r})=>t.axis[n].triggerTooltip&&r>=0)),Rpe=at(ZG,e=>e.length>0);function CS(e,t,n){const r=e.data?.[t]??null,i=(e.valueFormatter??(o=>e.scaleType==="utc"?Ope(o):o.toLocaleString()))(r,{location:"tooltip",scale:e.scale});return{axisDirection:n,axisId:e.id,mainAxis:e,dataIndex:t,axisValue:r,axisFormattedValue:i,seriesItems:[]}}function zpe(e={}){const{multipleAxes:t,directions:n}=e,r=_fe(),s=Afe(),i=Efe(),o=Nn(),l=mt(o,d9),c=mt(o,u9),d=mt(o,ZG),m=fN(),{xAxis:h}=Vr(),{yAxis:p}=Wr(),{zAxis:b,zAxisIds:v}=pk(),{rotationAxis:x}=oG(),w=kpe();if(l.length===0&&c.length===0&&d.length===0)return null;const j=[];return(n===void 0||n.includes("x"))&&l.forEach(({axisId:C,dataIndex:S})=>{!t&&j.length>1||j.push(CS(h[C],S,"x"))}),(n===void 0||n.includes("y"))&&c.forEach(({axisId:C,dataIndex:S})=>{!t&&j.length>1||j.push(CS(p[C],S,"y"))}),(n===void 0||n.includes("rotation"))&&d.forEach(({axisId:C,dataIndex:S})=>{!t&&j.length>1||j.push(CS(x[C],S,"rotation"))}),Object.keys(m).filter(eN).forEach(C=>{const S=m[C];return S?S.seriesOrder.forEach(_=>{const E=S.series[_],A=E.xAxisId??r.id,T=E.yAxisId??s.id,R=j.findIndex(({axisDirection:U,axisId:W})=>U==="x"&&W===A||U==="y"&&W===T);if(R>=0){const U="zAxisId"in E?E.zAxisId:v[0],{dataIndex:W}=j[R],I=w[C]?.(E,h[A],p[T],U?b[U]:void 0)(W)??"",M=E.data[W]??null,H=E.valueFormatter(M,{dataIndex:W}),q=pi(E.label,"tooltip")??null;j[R].seriesItems.push({seriesId:_,color:I,value:M,formattedValue:H,formattedLabel:q,markType:E.labelMarkType})}}):[]}),Object.keys(m).filter(gk).forEach(C=>{const S=m[C];return S?S.seriesOrder.forEach(_=>{const E=S.series[_],A=E.rotationAxisId??i?.id,T=j.findIndex(({axisDirection:R,axisId:U})=>R==="rotation"&&U===A);if(T>=0){const{dataIndex:R}=j[T],U=w[C]?.(E)(R)??"",W=E.data[R]??null,I=E.valueFormatter(W,{dataIndex:R}),M=pi(E.label,"tooltip")??null;j[T].seriesItems.push({seriesId:_,color:U,value:W,formattedValue:I,formattedLabel:M,markType:E.labelMarkType})}}):[]}),t?j:j.length===0?j[0]:null}function Upe(e){return zpe(ke({},e,{multipleAxes:!0}))}function Fpe(e){const t=vN(e.classes),n=Upe();return n===null?null:a.jsx(CE,{sx:e.sx,className:t.paper,children:n.map(({axisId:r,mainAxis:s,axisValue:i,axisFormattedValue:o,seriesItems:l})=>a.jsxs(SE,{className:t.table,children:[i!=null&&!s.hideTooltip&&a.jsx(Ek,{component:"caption",children:o}),a.jsx("tbody",{children:l.map(({seriesId:c,color:d,formattedValue:m,formattedLabel:h,markType:p})=>m==null?null:a.jsxs(_E,{className:t.row,children:[a.jsxs(Pm,{className:ct(t.labelCell,t.cell),component:"th",children:[a.jsx("div",{className:t.markContainer,children:a.jsx(mv,{type:p,color:d,className:t.mark})}),h||null]}),a.jsx(Pm,{className:ct(t.valueCell,t.cell),component:"td",children:m})]},c))})]},r))})}var zr="top",Hs="bottom",Gs="right",Ur="left",Tk="auto",yx=[zr,Hs,Gs,Ur],af="start",hp="end",Bpe="clippingParents",JG="viewport",Rh="popper",Hpe="reference",r$=yx.reduce(function(e,t){return e.concat([t+"-"+af,t+"-"+hp])},[]),eV=[].concat(yx,[Tk]).reduce(function(e,t){return e.concat([t,t+"-"+af,t+"-"+hp])},[]),Gpe="beforeRead",Vpe="read",Wpe="afterRead",qpe="beforeMain",Ype="main",Kpe="afterMain",Qpe="beforeWrite",Xpe="write",Zpe="afterWrite",Jpe=[Gpe,Vpe,Wpe,qpe,Ype,Kpe,Qpe,Xpe,Zpe];function eo(e){return e?(e.nodeName||"").toLowerCase():null}function ps(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Zd(e){var t=ps(e).Element;return e instanceof t||e instanceof Element}function Us(e){var t=ps(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Lk(e){if(typeof ShadowRoot>"u")return!1;var t=ps(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function exe(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var r=t.styles[n]||{},s=t.attributes[n]||{},i=t.elements[n];!Us(i)||!eo(i)||(Object.assign(i.style,r),Object.keys(s).forEach(function(o){var l=s[o];l===!1?i.removeAttribute(o):i.setAttribute(o,l===!0?"":l)}))})}function txe(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(r){var s=t.elements[r],i=t.attributes[r]||{},o=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:n[r]),l=o.reduce(function(c,d){return c[d]="",c},{});!Us(s)||!eo(s)||(Object.assign(s.style,l),Object.keys(i).forEach(function(c){s.removeAttribute(c)}))})}}const nxe={name:"applyStyles",enabled:!0,phase:"write",fn:exe,effect:txe,requires:["computeStyles"]};function Yi(e){return e.split("-")[0]}var $d=Math.max,fv=Math.min,rf=Math.round;function AE(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function tV(){return!/^((?!chrome|android).)*safari/i.test(AE())}function sf(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var r=e.getBoundingClientRect(),s=1,i=1;t&&Us(e)&&(s=e.offsetWidth>0&&rf(r.width)/e.offsetWidth||1,i=e.offsetHeight>0&&rf(r.height)/e.offsetHeight||1);var o=Zd(e)?ps(e):window,l=o.visualViewport,c=!tV()&&n,d=(r.left+(c&&l?l.offsetLeft:0))/s,m=(r.top+(c&&l?l.offsetTop:0))/i,h=r.width/s,p=r.height/i;return{width:h,height:p,top:m,right:d+h,bottom:m+p,left:d,x:d,y:m}}function kk(e){var t=sf(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function nV(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Lk(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function rl(e){return ps(e).getComputedStyle(e)}function axe(e){return["table","td","th"].indexOf(eo(e))>=0}function Pc(e){return((Zd(e)?e.ownerDocument:e.document)||window.document).documentElement}function wN(e){return eo(e)==="html"?e:e.assignedSlot||e.parentNode||(Lk(e)?e.host:null)||Pc(e)}function s$(e){return!Us(e)||rl(e).position==="fixed"?null:e.offsetParent}function rxe(e){var t=/firefox/i.test(AE()),n=/Trident/i.test(AE());if(n&&Us(e)){var r=rl(e);if(r.position==="fixed")return null}var s=wN(e);for(Lk(s)&&(s=s.host);Us(s)&&["html","body"].indexOf(eo(s))<0;){var i=rl(s);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||t&&i.willChange==="filter"||t&&i.filter&&i.filter!=="none")return s;s=s.parentNode}return null}function bx(e){for(var t=ps(e),n=s$(e);n&&axe(n)&&rl(n).position==="static";)n=s$(n);return n&&(eo(n)==="html"||eo(n)==="body"&&rl(n).position==="static")?t:n||rxe(e)||t}function Pk(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Bg(e,t,n){return $d(e,fv(t,n))}function sxe(e,t,n){var r=Bg(e,t,n);return r>n?n:r}function aV(){return{top:0,right:0,bottom:0,left:0}}function rV(e){return Object.assign({},aV(),e)}function sV(e,t){return t.reduce(function(n,r){return n[r]=e,n},{})}var ixe=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,rV(typeof t!="number"?t:sV(t,yx))};function oxe(e){var t,n=e.state,r=e.name,s=e.options,i=n.elements.arrow,o=n.modifiersData.popperOffsets,l=Yi(n.placement),c=Pk(l),d=[Ur,Gs].indexOf(l)>=0,m=d?"height":"width";if(!(!i||!o)){var h=ixe(s.padding,n),p=kk(i),b=c==="y"?zr:Ur,v=c==="y"?Hs:Gs,x=n.rects.reference[m]+n.rects.reference[c]-o[c]-n.rects.popper[m],w=o[c]-n.rects.reference[c],j=bx(i),C=j?c==="y"?j.clientHeight||0:j.clientWidth||0:0,S=x/2-w/2,_=h[b],E=C-p[m]-h[v],A=C/2-p[m]/2+S,T=Bg(_,A,E),R=c;n.modifiersData[r]=(t={},t[R]=T,t.centerOffset=T-A,t)}}function lxe(e){var t=e.state,n=e.options,r=n.element,s=r===void 0?"[data-popper-arrow]":r;s!=null&&(typeof s=="string"&&(s=t.elements.popper.querySelector(s),!s)||nV(t.elements.popper,s)&&(t.elements.arrow=s))}const cxe={name:"arrow",enabled:!0,phase:"main",fn:oxe,effect:lxe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function of(e){return e.split("-")[1]}var dxe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function uxe(e,t){var n=e.x,r=e.y,s=t.devicePixelRatio||1;return{x:rf(n*s)/s||0,y:rf(r*s)/s||0}}function i$(e){var t,n=e.popper,r=e.popperRect,s=e.placement,i=e.variation,o=e.offsets,l=e.position,c=e.gpuAcceleration,d=e.adaptive,m=e.roundOffsets,h=e.isFixed,p=o.x,b=p===void 0?0:p,v=o.y,x=v===void 0?0:v,w=typeof m=="function"?m({x:b,y:x}):{x:b,y:x};b=w.x,x=w.y;var j=o.hasOwnProperty("x"),C=o.hasOwnProperty("y"),S=Ur,_=zr,E=window;if(d){var A=bx(n),T="clientHeight",R="clientWidth";if(A===ps(n)&&(A=Pc(n),rl(A).position!=="static"&&l==="absolute"&&(T="scrollHeight",R="scrollWidth")),A=A,s===zr||(s===Ur||s===Gs)&&i===hp){_=Hs;var U=h&&A===E&&E.visualViewport?E.visualViewport.height:A[T];x-=U-r.height,x*=c?1:-1}if(s===Ur||(s===zr||s===Hs)&&i===hp){S=Gs;var W=h&&A===E&&E.visualViewport?E.visualViewport.width:A[R];b-=W-r.width,b*=c?1:-1}}var I=Object.assign({position:l},d&&dxe),M=m===!0?uxe({x:b,y:x},ps(n)):{x:b,y:x};if(b=M.x,x=M.y,c){var H;return Object.assign({},I,(H={},H[_]=C?"0":"",H[S]=j?"0":"",H.transform=(E.devicePixelRatio||1)<=1?"translate("+b+"px, "+x+"px)":"translate3d("+b+"px, "+x+"px, 0)",H))}return Object.assign({},I,(t={},t[_]=C?x+"px":"",t[S]=j?b+"px":"",t.transform="",t))}function mxe(e){var t=e.state,n=e.options,r=n.gpuAcceleration,s=r===void 0?!0:r,i=n.adaptive,o=i===void 0?!0:i,l=n.roundOffsets,c=l===void 0?!0:l,d={placement:Yi(t.placement),variation:of(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,i$(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:c})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,i$(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const fxe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:mxe,data:{}};var jy={passive:!0};function hxe(e){var t=e.state,n=e.instance,r=e.options,s=r.scroll,i=s===void 0?!0:s,o=r.resize,l=o===void 0?!0:o,c=ps(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&d.forEach(function(m){m.addEventListener("scroll",n.update,jy)}),l&&c.addEventListener("resize",n.update,jy),function(){i&&d.forEach(function(m){m.removeEventListener("scroll",n.update,jy)}),l&&c.removeEventListener("resize",n.update,jy)}}const gxe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:hxe,data:{}};var pxe={left:"right",right:"left",bottom:"top",top:"bottom"};function Tb(e){return e.replace(/left|right|bottom|top/g,function(t){return pxe[t]})}var xxe={start:"end",end:"start"};function o$(e){return e.replace(/start|end/g,function(t){return xxe[t]})}function Dk(e){var t=ps(e),n=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:n,scrollTop:r}}function Ok(e){return sf(Pc(e)).left+Dk(e).scrollLeft}function yxe(e,t){var n=ps(e),r=Pc(e),s=n.visualViewport,i=r.clientWidth,o=r.clientHeight,l=0,c=0;if(s){i=s.width,o=s.height;var d=tV();(d||!d&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:l+Ok(e),y:c}}function bxe(e){var t,n=Pc(e),r=Dk(e),s=(t=e.ownerDocument)==null?void 0:t.body,i=$d(n.scrollWidth,n.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=$d(n.scrollHeight,n.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),l=-r.scrollLeft+Ok(e),c=-r.scrollTop;return rl(s||n).direction==="rtl"&&(l+=$d(n.clientWidth,s?s.clientWidth:0)-i),{width:i,height:o,x:l,y:c}}function Mk(e){var t=rl(e),n=t.overflow,r=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+s+r)}function iV(e){return["html","body","#document"].indexOf(eo(e))>=0?e.ownerDocument.body:Us(e)&&Mk(e)?e:iV(wN(e))}function Hg(e,t){var n;t===void 0&&(t=[]);var r=iV(e),s=r===((n=e.ownerDocument)==null?void 0:n.body),i=ps(r),o=s?[i].concat(i.visualViewport||[],Mk(r)?r:[]):r,l=t.concat(o);return s?l:l.concat(Hg(wN(o)))}function EE(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function vxe(e,t){var n=sf(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function l$(e,t,n){return t===JG?EE(yxe(e,n)):Zd(t)?vxe(t,n):EE(bxe(Pc(e)))}function wxe(e){var t=Hg(wN(e)),n=["absolute","fixed"].indexOf(rl(e).position)>=0,r=n&&Us(e)?bx(e):e;return Zd(r)?t.filter(function(s){return Zd(s)&&nV(s,r)&&eo(s)!=="body"}):[]}function Nxe(e,t,n,r){var s=t==="clippingParents"?wxe(e):[].concat(t),i=[].concat(s,[n]),o=i[0],l=i.reduce(function(c,d){var m=l$(e,d,r);return c.top=$d(m.top,c.top),c.right=fv(m.right,c.right),c.bottom=fv(m.bottom,c.bottom),c.left=$d(m.left,c.left),c},l$(e,o,r));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function oV(e){var t=e.reference,n=e.element,r=e.placement,s=r?Yi(r):null,i=r?of(r):null,o=t.x+t.width/2-n.width/2,l=t.y+t.height/2-n.height/2,c;switch(s){case zr:c={x:o,y:t.y-n.height};break;case Hs:c={x:o,y:t.y+t.height};break;case Gs:c={x:t.x+t.width,y:l};break;case Ur:c={x:t.x-n.width,y:l};break;default:c={x:t.x,y:t.y}}var d=s?Pk(s):null;if(d!=null){var m=d==="y"?"height":"width";switch(i){case af:c[d]=c[d]-(t[m]/2-n[m]/2);break;case hp:c[d]=c[d]+(t[m]/2-n[m]/2);break}}return c}function gp(e,t){t===void 0&&(t={});var n=t,r=n.placement,s=r===void 0?e.placement:r,i=n.strategy,o=i===void 0?e.strategy:i,l=n.boundary,c=l===void 0?Bpe:l,d=n.rootBoundary,m=d===void 0?JG:d,h=n.elementContext,p=h===void 0?Rh:h,b=n.altBoundary,v=b===void 0?!1:b,x=n.padding,w=x===void 0?0:x,j=rV(typeof w!="number"?w:sV(w,yx)),C=p===Rh?Hpe:Rh,S=e.rects.popper,_=e.elements[v?C:p],E=Nxe(Zd(_)?_:_.contextElement||Pc(e.elements.popper),c,m,o),A=sf(e.elements.reference),T=oV({reference:A,element:S,placement:s}),R=EE(Object.assign({},S,T)),U=p===Rh?R:A,W={top:E.top-U.top+j.top,bottom:U.bottom-E.bottom+j.bottom,left:E.left-U.left+j.left,right:U.right-E.right+j.right},I=e.modifiersData.offset;if(p===Rh&&I){var M=I[s];Object.keys(W).forEach(function(H){var q=[Gs,Hs].indexOf(H)>=0?1:-1,ae=[zr,Hs].indexOf(H)>=0?"y":"x";W[H]+=M[ae]*q})}return W}function jxe(e,t){t===void 0&&(t={});var n=t,r=n.placement,s=n.boundary,i=n.rootBoundary,o=n.padding,l=n.flipVariations,c=n.allowedAutoPlacements,d=c===void 0?eV:c,m=of(r),h=m?l?r$:r$.filter(function(v){return of(v)===m}):yx,p=h.filter(function(v){return d.indexOf(v)>=0});p.length===0&&(p=h);var b=p.reduce(function(v,x){return v[x]=gp(e,{placement:x,boundary:s,rootBoundary:i,padding:o})[Yi(x)],v},{});return Object.keys(b).sort(function(v,x){return b[v]-b[x]})}function Cxe(e){if(Yi(e)===Tk)return[];var t=Tb(e);return[o$(e),t,o$(t)]}function Sxe(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var s=n.mainAxis,i=s===void 0?!0:s,o=n.altAxis,l=o===void 0?!0:o,c=n.fallbackPlacements,d=n.padding,m=n.boundary,h=n.rootBoundary,p=n.altBoundary,b=n.flipVariations,v=b===void 0?!0:b,x=n.allowedAutoPlacements,w=t.options.placement,j=Yi(w),C=j===w,S=c||(C||!v?[Tb(w)]:Cxe(w)),_=[w].concat(S).reduce(function(we,ye){return we.concat(Yi(ye)===Tk?jxe(t,{placement:ye,boundary:m,rootBoundary:h,padding:d,flipVariations:v,allowedAutoPlacements:x}):ye)},[]),E=t.rects.reference,A=t.rects.popper,T=new Map,R=!0,U=_[0],W=0;W<_.length;W++){var I=_[W],M=Yi(I),H=of(I)===af,q=[zr,Hs].indexOf(M)>=0,ae=q?"width":"height",K=gp(t,{placement:I,boundary:m,rootBoundary:h,altBoundary:p,padding:d}),B=q?H?Gs:Ur:H?Hs:zr;E[ae]>A[ae]&&(B=Tb(B));var X=Tb(B),le=[];if(i&&le.push(K[M]<=0),l&&le.push(K[B]<=0,K[X]<=0),le.every(function(we){return we})){U=I,R=!1;break}T.set(I,le)}if(R)for(var ue=v?3:1,J=function(ye){var Te=_.find(function(Ae){var Pe=T.get(Ae);if(Pe)return Pe.slice(0,ye).every(function($){return $})});if(Te)return U=Te,"break"},ne=ue;ne>0;ne--){var pe=J(ne);if(pe==="break")break}t.placement!==U&&(t.modifiersData[r]._skip=!0,t.placement=U,t.reset=!0)}}const _xe={name:"flip",enabled:!0,phase:"main",fn:Sxe,requiresIfExists:["offset"],data:{_skip:!1}};function c$(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function d$(e){return[zr,Gs,Hs,Ur].some(function(t){return e[t]>=0})}function Axe(e){var t=e.state,n=e.name,r=t.rects.reference,s=t.rects.popper,i=t.modifiersData.preventOverflow,o=gp(t,{elementContext:"reference"}),l=gp(t,{altBoundary:!0}),c=c$(o,r),d=c$(l,s,i),m=d$(c),h=d$(d);t.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:d,isReferenceHidden:m,hasPopperEscaped:h},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":m,"data-popper-escaped":h})}const Exe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Axe};function Txe(e,t,n){var r=Yi(e),s=[Ur,zr].indexOf(r)>=0?-1:1,i=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,o=i[0],l=i[1];return o=o||0,l=(l||0)*s,[Ur,Gs].indexOf(r)>=0?{x:l,y:o}:{x:o,y:l}}function Lxe(e){var t=e.state,n=e.options,r=e.name,s=n.offset,i=s===void 0?[0,0]:s,o=eV.reduce(function(m,h){return m[h]=Txe(h,t.rects,i),m},{}),l=o[t.placement],c=l.x,d=l.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=d),t.modifiersData[r]=o}const kxe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Lxe};function Pxe(e){var t=e.state,n=e.name;t.modifiersData[n]=oV({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const Dxe={name:"popperOffsets",enabled:!0,phase:"read",fn:Pxe,data:{}};function Oxe(e){return e==="x"?"y":"x"}function Mxe(e){var t=e.state,n=e.options,r=e.name,s=n.mainAxis,i=s===void 0?!0:s,o=n.altAxis,l=o===void 0?!1:o,c=n.boundary,d=n.rootBoundary,m=n.altBoundary,h=n.padding,p=n.tether,b=p===void 0?!0:p,v=n.tetherOffset,x=v===void 0?0:v,w=gp(t,{boundary:c,rootBoundary:d,padding:h,altBoundary:m}),j=Yi(t.placement),C=of(t.placement),S=!C,_=Pk(j),E=Oxe(_),A=t.modifiersData.popperOffsets,T=t.rects.reference,R=t.rects.popper,U=typeof x=="function"?x(Object.assign({},t.rects,{placement:t.placement})):x,W=typeof U=="number"?{mainAxis:U,altAxis:U}:Object.assign({mainAxis:0,altAxis:0},U),I=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,M={x:0,y:0};if(A){if(i){var H,q=_==="y"?zr:Ur,ae=_==="y"?Hs:Gs,K=_==="y"?"height":"width",B=A[_],X=B+w[q],le=B-w[ae],ue=b?-R[K]/2:0,J=C===af?T[K]:R[K],ne=C===af?-R[K]:-T[K],pe=t.elements.arrow,we=b&&pe?kk(pe):{width:0,height:0},ye=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:aV(),Te=ye[q],Ae=ye[ae],Pe=Bg(0,T[K],we[K]),$=S?T[K]/2-ue-Pe-Te-W.mainAxis:J-Pe-Te-W.mainAxis,Ne=S?-T[K]/2+ue+Pe+Ae+W.mainAxis:ne+Pe+Ae+W.mainAxis,fe=t.elements.arrow&&bx(t.elements.arrow),O=fe?_==="y"?fe.clientTop||0:fe.clientLeft||0:0,ce=(H=I?.[_])!=null?H:0,de=B+$-ce-O,Ce=B+Ne-ce,Ee=Bg(b?fv(X,de):X,B,b?$d(le,Ce):le);A[_]=Ee,M[_]=Ee-B}if(l){var Ge,Je=_==="x"?zr:Ur,We=_==="x"?Hs:Gs,Ke=A[E],He=E==="y"?"height":"width",Se=Ke+w[Je],Ve=Ke-w[We],k=[zr,Ur].indexOf(j)!==-1,Z=(Ge=I?.[E])!=null?Ge:0,re=k?Se:Ke-T[He]-R[He]-Z+W.altAxis,be=k?Ke+T[He]+R[He]-Z-W.altAxis:Ve,z=b&&k?sxe(re,Ke,be):Bg(b?re:Se,Ke,b?be:Ve);A[E]=z,M[E]=z-Ke}t.modifiersData[r]=M}}const Ixe={name:"preventOverflow",enabled:!0,phase:"main",fn:Mxe,requiresIfExists:["offset"]};function $xe(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Rxe(e){return e===ps(e)||!Us(e)?Dk(e):$xe(e)}function zxe(e){var t=e.getBoundingClientRect(),n=rf(t.width)/e.offsetWidth||1,r=rf(t.height)/e.offsetHeight||1;return n!==1||r!==1}function Uxe(e,t,n){n===void 0&&(n=!1);var r=Us(t),s=Us(t)&&zxe(t),i=Pc(t),o=sf(e,s,n),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(r||!r&&!n)&&((eo(t)!=="body"||Mk(i))&&(l=Rxe(t)),Us(t)?(c=sf(t,!0),c.x+=t.clientLeft,c.y+=t.clientTop):i&&(c.x=Ok(i))),{x:o.left+l.scrollLeft-c.x,y:o.top+l.scrollTop-c.y,width:o.width,height:o.height}}function Fxe(e){var t=new Map,n=new Set,r=[];e.forEach(function(i){t.set(i.name,i)});function s(i){n.add(i.name);var o=[].concat(i.requires||[],i.requiresIfExists||[]);o.forEach(function(l){if(!n.has(l)){var c=t.get(l);c&&s(c)}}),r.push(i)}return e.forEach(function(i){n.has(i.name)||s(i)}),r}function Bxe(e){var t=Fxe(e);return Jpe.reduce(function(n,r){return n.concat(t.filter(function(s){return s.phase===r}))},[])}function Hxe(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function Gxe(e){var t=e.reduce(function(n,r){var s=n[r.name];return n[r.name]=s?Object.assign({},s,r,{options:Object.assign({},s.options,r.options),data:Object.assign({},s.data,r.data)}):r,n},{});return Object.keys(t).map(function(n){return t[n]})}var u$={placement:"bottom",modifiers:[],strategy:"absolute"};function m$(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Vxe(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,r=n===void 0?[]:n,s=t.defaultOptions,i=s===void 0?u$:s;return function(l,c,d){d===void 0&&(d=i);var m={placement:"bottom",orderedModifiers:[],options:Object.assign({},u$,i),modifiersData:{},elements:{reference:l,popper:c},attributes:{},styles:{}},h=[],p=!1,b={state:m,setOptions:function(j){var C=typeof j=="function"?j(m.options):j;x(),m.options=Object.assign({},i,m.options,C),m.scrollParents={reference:Zd(l)?Hg(l):l.contextElement?Hg(l.contextElement):[],popper:Hg(c)};var S=Bxe(Gxe([].concat(r,m.options.modifiers)));return m.orderedModifiers=S.filter(function(_){return _.enabled}),v(),b.update()},forceUpdate:function(){if(!p){var j=m.elements,C=j.reference,S=j.popper;if(m$(C,S)){m.rects={reference:Uxe(C,bx(S),m.options.strategy==="fixed"),popper:kk(S)},m.reset=!1,m.placement=m.options.placement,m.orderedModifiers.forEach(function(W){return m.modifiersData[W.name]=Object.assign({},W.data)});for(var _=0;_<m.orderedModifiers.length;_++){if(m.reset===!0){m.reset=!1,_=-1;continue}var E=m.orderedModifiers[_],A=E.fn,T=E.options,R=T===void 0?{}:T,U=E.name;typeof A=="function"&&(m=A({state:m,options:R,name:U,instance:b})||m)}}}},update:Hxe(function(){return new Promise(function(w){b.forceUpdate(),w(m)})}),destroy:function(){x(),p=!0}};if(!m$(l,c))return b;b.setOptions(d).then(function(w){!p&&d.onFirstUpdate&&d.onFirstUpdate(w)});function v(){m.orderedModifiers.forEach(function(w){var j=w.name,C=w.options,S=C===void 0?{}:C,_=w.effect;if(typeof _=="function"){var E=_({state:m,name:j,instance:b,options:S}),A=function(){};h.push(E||A)}})}function x(){h.forEach(function(w){return w()}),h=[]}return b}}var Wxe=[gxe,Dxe,fxe,nxe,kxe,_xe,Ixe,cxe,Exe],qxe=Vxe({defaultModifiers:Wxe});function f$(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function Yxe(e){return typeof e=="function"?e():e}const Kxe=g.forwardRef(function(t,n){const{children:r,container:s,disablePortal:i=!1}=t,[o,l]=g.useState(null),c=Ji(g.isValidElement(r)?OB(r):null,n);if(Ea(()=>{i||l(Yxe(s)||document.body)},[s,i]),Ea(()=>{if(o&&!i)return f$(n,o),()=>{f$(n,null)}},[n,o,i]),i){if(g.isValidElement(r)){const d={ref:c};return g.cloneElement(r,d)}return r}return o&&Rp.createPortal(r,o)});function Qxe(e){return xa("MuiPopper",e)}Zn("MuiPopper",["root"]);function Xxe(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function TE(e){return typeof e=="function"?e():e}function Zxe(e){return e.nodeType!==void 0}const Jxe=e=>{const{classes:t}=e;return pa({root:["root"]},Qxe,t)},e0e={},t0e=g.forwardRef(function(t,n){const{anchorEl:r,children:s,direction:i,disablePortal:o,modifiers:l,open:c,placement:d,popperOptions:m,popperRef:h,slotProps:p={},slots:b={},TransitionProps:v,ownerState:x,...w}=t,j=g.useRef(null),C=Ji(j,n),S=g.useRef(null),_=Ji(S,h),E=g.useRef(_);Ea(()=>{E.current=_},[_]),g.useImperativeHandle(h,()=>S.current,[]);const A=Xxe(d,i),[T,R]=g.useState(A),[U,W]=g.useState(TE(r));g.useEffect(()=>{S.current&&S.current.forceUpdate()}),g.useEffect(()=>{r&&W(TE(r))},[r]),Ea(()=>{if(!U||!c)return;const ae=X=>{R(X.placement)};let K=[{name:"preventOverflow",options:{altBoundary:o}},{name:"flip",options:{altBoundary:o}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:X})=>{ae(X)}}];l!=null&&(K=K.concat(l)),m&&m.modifiers!=null&&(K=K.concat(m.modifiers));const B=qxe(U,j.current,{placement:A,...m,modifiers:K});return E.current(B),()=>{B.destroy(),E.current(null)}},[U,o,l,c,m,A]);const I={placement:T};v!==null&&(I.TransitionProps=v);const M=Jxe(t),H=b.root??"div",q=Jo({elementType:H,externalSlotProps:p.root,externalForwardedProps:w,additionalProps:{role:"tooltip",ref:C},ownerState:t,className:M.root});return a.jsx(H,{...q,children:typeof s=="function"?s(I):s})}),n0e=g.forwardRef(function(t,n){const{anchorEl:r,children:s,container:i,direction:o="ltr",disablePortal:l=!1,keepMounted:c=!1,modifiers:d,open:m,placement:h="bottom",popperOptions:p=e0e,popperRef:b,style:v,transition:x=!1,slotProps:w={},slots:j={},...C}=t,[S,_]=g.useState(!0),E=()=>{_(!1)},A=()=>{_(!0)};if(!c&&!m&&(!x||S))return null;let T;if(i)T=i;else if(r){const W=TE(r);T=W&&Zxe(W)?tE(W).body:tE(null).body}const R=!m&&c&&(!x||S)?"none":void 0,U=x?{in:m,onEnter:E,onExited:A}:void 0;return a.jsx(Kxe,{disablePortal:l,container:T,children:a.jsx(t0e,{anchorEl:r,direction:o,disablePortal:l,modifiers:d,ref:n,open:x?!S:m,placement:h,popperOptions:p,popperRef:b,slotProps:w,slots:j,...C,style:{position:"fixed",top:0,left:0,display:R,...v},TransitionProps:U,children:s})})}),a0e=kt(n0e,{name:"MuiPopper",slot:"Root"})({}),r0e=g.forwardRef(function(t,n){const r=ex(),s=Ac({props:t,name:"MuiPopper"}),{anchorEl:i,component:o,components:l,componentsProps:c,container:d,disablePortal:m,keepMounted:h,modifiers:p,open:b,placement:v,popperOptions:x,popperRef:w,transition:j,slots:C,slotProps:S,..._}=s,E=C?.root??l?.Root,A={anchorEl:i,container:d,disablePortal:m,keepMounted:h,modifiers:p,open:b,placement:v,popperOptions:x,popperRef:w,transition:j,..._};return a.jsx(a0e,{as:o,direction:r?"rtl":"ltr",slots:{root:E},slotProps:S??c,...A,ref:n})});function s0e(e){const{children:t,defer:n=!1,fallback:r=null}=e,[s,i]=g.useState(!1);return Ea(()=>{n||i(!0)},[n]),g.useEffect(()=>{n&&i(!0)},[n]),s?t:r}function h$(e){let t,n;const r=()=>{n=null,e(...t)};function s(...i){t=i,n||(n=requestAnimationFrame(r))}return s.clear=()=>{n&&(cancelAnimationFrame(n),n=null)},s}function i0e(){const e=Nn(),t=mt(e,iG),n=mt(e,so);return t!==void 0?"polar":n!==void 0?"cartesian":"none"}const o0e=["trigger","position","anchor","classes","children"],g$=()=>!1;function l0e(e,t,n){return n?g$:e==="item"?vme:t==="polar"?Rpe:t==="cartesian"?Sme:g$}const c0e=kt(r0e,{name:"MuiChartsTooltip",slot:"Root"})(({theme:e})=>({pointerEvents:"none",zIndex:e.zIndex.modal}));function d0e(e){const t=Zs({props:e,name:"MuiChartsTooltipContainer"}),{trigger:n="axis",position:r,anchor:s="pointer",classes:i,children:o}=t,l=$t(t,o0e),c=xk(),d=vN(i),m=Dpe(),h=Ipe(),p=g.useRef(null),b=Iw(()=>({x:0,y:0})),v=i0e(),x=Nn(),w=mt(x,Dme),j=mt(x,l0e(n,v,w)),S=mt(x,ux)==="keyboard"?"node":s,_=mt(x,n==="item"&&S==="node"?wme:()=>null,r);g.useEffect(()=>{const U=c.current;if(U===null)return()=>{};if(_!==null){const M=h$(()=>{b.current={x:U.getBoundingClientRect().left+(_?.x??0),y:U.getBoundingClientRect().top+(_?.y??0)},p.current?.update()});return M(),()=>M.clear()}const W=h$((M,H)=>{b.current={x:M,y:H},p.current?.update()}),I=M=>{W(M.clientX,M.clientY)};return U.addEventListener("pointerdown",I),U.addEventListener("pointermove",I),U.addEventListener("pointerenter",I),()=>{U.removeEventListener("pointerdown",I),U.removeEventListener("pointermove",I),U.removeEventListener("pointerenter",I),W.clear()}},[c,b,_]);const E=g.useMemo(()=>({getBoundingClientRect:()=>({x:b.current.x,y:b.current.y,top:b.current.y,left:b.current.x,right:b.current.x,bottom:b.current.y,width:0,height:0,toJSON:()=>""})}),[b]),A=m?.pointerType==="mouse"||h,T=m?.pointerType==="touch"||!h,R=g.useMemo(()=>[{name:"offset",options:{offset:()=>T?[0,64]:[0,8]}},...A?[]:[{name:"flip",options:{fallbackPlacements:["top-end","top-start","bottom-end","bottom"]}}],{name:"preventOverflow",options:{altAxis:!0}}],[A,T]);return n==="none"?null:a.jsx(s0e,{children:j&&a.jsx(c0e,ke({},l,{className:d?.root,open:j,placement:l.placement??r??(A?"right-start":"top"),popperRef:p,anchorEl:E,modifiers:R,children:o}))})}function u0e(e){const{classes:t,trigger:n="axis"}=e,r=vN(t);return a.jsx(d0e,ke({},e,{classes:t,children:n==="axis"?a.jsx(Fpe,{classes:r}):a.jsx(Lpe,{classes:r})}))}const m0e=e=>({type:"series",color:e.color,label:e.label,seriesId:e.seriesId,itemId:e.itemId});function f0e(e){return xa("MuiChartsLegend",e)}const h0e=e=>{const{classes:t,direction:n}=e;return pa({root:["root",n],item:["item"],mark:["mark"],label:["label"],series:["series"]},f0e,t)},p$=Zn("MuiChartsLegend",["root","item","series","mark","label","vertical","horizontal"]),g0e=["slots","slotProps"],p0e=["ownerState"],x0e=(e,t,n,r)=>{function s(i,o){const l=Zs({props:i,name:e}),c=typeof n.defaultProps=="function"?n.defaultProps(l):n.defaultProps??{},d=Yd(c,l),m=d,{slots:h,slotProps:p}=m,b=$t(m,g0e),v=ro(),x=n.classesResolver?.(d,v),w=h?.[t]??r,j=n.propagateSlots&&!h?.[t],C=Jo({elementType:w,externalSlotProps:p?.[t],additionalProps:ke({},b,{classes:x},j&&{slots:h,slotProps:p}),ownerState:{}}),S=$t(C,p0e),_=ke({},S);for(const E of n.omitProps??[])delete _[E];return a.jsx(w,ke({},_,{ref:o}))}return g.forwardRef(s)};function y0e(e){return xa("MuiChartsLabel",e)}Zn("MuiChartsLabel",["root"]);const b0e=e=>pa({root:["root"]},y0e,e.classes),v0e=["children","className","classes"],w0e=WG("MuiChartsLabel",{classesResolver:b0e},function(t,n){const{children:r,className:s,classes:i}=t,o=$t(t,v0e);return a.jsx("span",ke({className:ct(i?.root,s),ref:n},o,{children:r}))}),N0e=["direction","onItemClick","className","classes"],j0e=kt("ul",{name:"MuiChartsLegend",slot:"Root"})(({ownerState:e,theme:t})=>ke({},t.typography.caption,{color:(t.vars||t).palette.text.primary,lineHeight:"100%",display:"flex",flexDirection:e.direction==="vertical"?"column":"row",alignItems:e.direction==="vertical"?void 0:"center",flexShrink:0,gap:t.spacing(2),listStyleType:"none",paddingInlineStart:0,marginBlock:t.spacing(1),marginInline:t.spacing(1),flexWrap:"wrap",li:{display:e.direction==="horizontal"?"inline-flex":void 0},[`button.${p$.series}`]:{background:"none",border:"none",padding:0,fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",letterSpacing:"inherit",color:"inherit"},[`& .${p$.series}`]:{display:e.direction==="vertical"?"flex":"inline-flex",alignItems:"center",gap:t.spacing(1)},gridArea:"legend"})),C0e=x0e("MuiChartsLegend","legend",{defaultProps:{direction:"horizontal"},omitProps:["position"],classesResolver:h0e},g.forwardRef(function(t,n){const r=Hfe(),{onItemClick:s,className:i,classes:o}=t,l=$t(t,N0e);if(r.items.length===0)return null;const c=s?"button":"div";return a.jsx(j0e,ke({className:ct(o?.root,i),ref:n},l,{ownerState:t,children:r.items.map((d,m)=>a.jsx("li",{className:o?.item,"data-series":d.id,children:a.jsxs(c,{className:o?.series,role:s?"button":void 0,type:s?"button":void 0,onClick:s?(h=>s(h,m0e(d),m)):void 0,children:[a.jsx(mv,{className:o?.mark,color:d.color,type:d.markType}),a.jsx(w0e,{className:o?.label,children:d.label})]})},d.id))}))}));function S0e(e){return xa("MuiChartsAxisHighlight",e)}Zn("MuiChartsAxisHighlight",["root"]);const hv=kt("path",{name:"MuiChartsAxisHighlight",slot:"Root"})(({theme:e})=>({pointerEvents:"none",variants:[{props:{axisHighlight:"band"},style:ke({fill:"white",fillOpacity:.1},e.applyStyles("light",{fill:"gray"}))},{props:{axisHighlight:"line"},style:ke({strokeDasharray:"5 2",stroke:"#ffffff"},e.applyStyles("light",{stroke:"#000000"}))}]}));function _0e(e){const{type:t,classes:n}=e,{left:r,width:s}=ei(),i=Nn(),o=mt(i,Mme),l=mt(i,Cr);return o.length===0?null:o.map(({axisId:c,value:d})=>{const h=l.axis[c].scale,p=_f(h),b=t==="band"&&d!==null&&Ba(h);return a.jsxs(g.Fragment,{children:[b&&h(d)!==void 0&&a.jsx(hv,{d:`M ${r} ${h(d)-(h.step()-h.bandwidth())/2} l 0 ${h.step()} l ${s} 0 l 0 ${-h.step()} Z`,className:n.root,ownerState:{axisHighlight:"band"}}),t==="line"&&d!==null&&a.jsx(hv,{d:`M ${r} ${p(d)} L ${r+s} ${p(d)}`,className:n.root,ownerState:{axisHighlight:"line"}})]},`${c}-${d}`)})}function A0e(e){const{type:t,classes:n}=e,{top:r,height:s}=ei(),i=Nn(),o=mt(i,Ome),l=mt(i,jr);return o.length===0?null:o.map(({axisId:c,value:d})=>{const h=l.axis[c].scale,p=_f(h),b=t==="band"&&d!==null&&Ba(h);return a.jsxs(g.Fragment,{children:[b&&h(d)!==void 0&&a.jsx(hv,{d:`M ${h(d)-(h.step()-h.bandwidth())/2} ${r} l ${h.step()} 0 l 0 ${s} l ${-h.step()} 0 Z`,className:n.root,ownerState:{axisHighlight:"band"}}),t==="line"&&d!==null&&a.jsx(hv,{d:`M ${p(d)} ${r} L ${p(d)} ${r+s}`,className:n.root,ownerState:{axisHighlight:"line"}})]},`${c}-${d}`)})}const E0e=()=>pa({root:["root"]},S0e);function T0e(e){const{x:t,y:n}=e,r=E0e();return a.jsxs(g.Fragment,{children:[t&&t!=="none"&&a.jsx(A0e,{type:t,classes:r}),n&&n!=="none"&&a.jsx(_0e,{type:n,classes:r})]})}function L0e(e){const{id:t,offset:n}=e,{left:r,top:s,width:i,height:o}=ei(),l=ke({top:0,right:0,bottom:0,left:0},n);return a.jsx("clipPath",{id:t,children:a.jsx("rect",{x:r-l.left,y:s-l.top,width:i+l.left+l.right,height:o+l.top+l.bottom})})}const k0e=parseInt(g.version,10),P0e=["x","y","id","classes","color","shape"];function D0e(e){return xa("MuiHighlightElement",e)}Zn("MuiHighlightElement",["root"]);const O0e=e=>{const{classes:t,id:n}=e,r={root:["root",`series-${n}`]};return pa(r,D0e,t)};function M0e(e){const{x:t,y:n,color:r,shape:s}=e,i=$t(e,P0e),o=O0e(e),l=s==="circle"?"circle":"path",c=s==="circle"?{cx:0,cy:0,r:i.r===void 0?5:i.r}:{d:uk($9[CG(s)])()},d=k0e>18?{transformOrigin:`${t} ${n}`}:{"transform-origin":`${t} ${n}`};return a.jsx(l,ke({pointerEvents:"none",className:o.root,transform:`translate(${t} ${n})`,fill:r},d,c,i))}const I0e=["slots","slotProps"];function $0e(e){const{slots:t,slotProps:n}=e,r=$t(e,I0e),s=px(),{xAxis:i,xAxisIds:o}=Vr(),{yAxis:l,yAxisIds:c}=Wr(),{instance:d}=bs(),m=Nn(),h=mt(m,g9);if(h.length===0||s===void 0)return null;const{series:p,stackingGroups:b}=s,v=o[0],x=c[0],w=t?.lineHighlight??M0e;return a.jsx("g",ke({},r,{children:h.flatMap(({dataIndex:j,axisId:C})=>b.flatMap(({ids:S})=>S.flatMap(_=>{const{xAxisId:E=v,yAxisId:A=x,stackedData:T,data:R,disableHighlight:U,shape:W="circle"}=p[_];if(U||R[j]==null||C!==E)return null;const I=_f(i[E].scale),M=l[A].scale,H=i[E].data;if(H===void 0)throw new Error(`MUI X Charts: ${E===Rw?"The first `xAxis`":`The x-axis with id "${E}"`} should have data property to be able to display a line plot.`);const q=I(H[j]),ae=M(T[j][1]);if(!d.isPointInside(q,ae))return null;const K=Nk(p[_],i[E],l[A]);return a.jsx(w,ke({id:_,color:K(j),x:q,y:ae,shape:W},n?.lineHighlight),`${_}`)})))}))}function R0e(e){return xa("MuiChartsGrid",e)}const x$=Zn("MuiChartsGrid",["root","line","horizontalLine","verticalLine"]),z0e=kt("g",{name:"MuiChartsGrid",slot:"Root",overridesResolver:(e,t)=>[{[`&.${x$.verticalLine}`]:t.verticalLine},{[`&.${x$.horizontalLine}`]:t.horizontalLine},t.root]})({}),lV=kt("line",{name:"MuiChartsGrid",slot:"Line"})(({theme:e})=>({stroke:(e.vars||e).palette.divider,shapeRendering:"crispEdges",strokeWidth:1}));function U0e(e){const{instance:t}=bs(),{axis:n,start:r,end:s,classes:i}=e,{scale:o,tickNumber:l,tickInterval:c}=n,d=yN({scale:o,tickNumber:l,tickInterval:c,direction:"x"});return a.jsx(g.Fragment,{children:d.map(({value:m,offset:h})=>t.isXInside(h)?a.jsx(lV,{y1:r,y2:s,x1:h,x2:h,className:i.verticalLine},`vertical-${m?.getTime?.()??m}`):null)})}function F0e(e){const{instance:t}=bs(),{axis:n,start:r,end:s,classes:i}=e,{scale:o,tickNumber:l,tickInterval:c}=n,d=yN({scale:o,tickNumber:l,tickInterval:c,direction:"y"});return a.jsx(g.Fragment,{children:d.map(({value:m,offset:h})=>t.isYInside(h)?a.jsx(lV,{y1:h,y2:h,x1:r,x2:s,className:i.horizontalLine},`horizontal-${m?.getTime?.()??m}`):null)})}const B0e=["vertical","horizontal"],H0e=({classes:e})=>pa({root:["root"],verticalLine:["line","verticalLine"],horizontalLine:["line","horizontalLine"]},R0e,e);function G0e(e){const t=Zs({props:e,name:"MuiChartsGrid"}),n=ei(),{vertical:r,horizontal:s}=t,i=$t(t,B0e),{xAxis:o,xAxisIds:l}=Vr(),{yAxis:c,yAxisIds:d}=Wr(),m=H0e(t),h=c[d[0]],p=o[l[0]];return a.jsxs(z0e,ke({},i,{className:m.root,children:[r&&a.jsx(U0e,{axis:p,start:n.top,end:n.height+n.top,classes:m}),s&&a.jsx(F0e,{axis:h,start:n.left,end:n.width+n.left,classes:m})]}))}const V0e=["message"],W0e=kt("text")(({theme:e})=>ke({},e.typography.body2,{stroke:"none",fill:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges",textAnchor:"middle",dominantBaseline:"middle"}));function q0e(e){const{message:t}=e,n=$t(e,V0e),{top:r,left:s,height:i,width:o}=ei(),{localeText:l}=xG();return a.jsx(W0e,ke({x:s+o/2,y:r+i/2},n,{children:t??l.loading}))}const Y0e=["message"],K0e=kt("text")(({theme:e})=>ke({},e.typography.body2,{stroke:"none",fill:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges",textAnchor:"middle",dominantBaseline:"middle"}));function Q0e(e){const{message:t}=e,n=$t(e,Y0e),{top:r,left:s,height:i,width:o}=ei(),{localeText:l}=xG();return a.jsx(K0e,ke({x:s+o/2,y:r+i/2},n,{children:t??l.noData}))}function X0e(){const e=fN();return Object.values(e).every(t=>{if(!t)return!0;const{series:n,seriesOrder:r}=t;return r.every(s=>{const i=n[s];return i.type==="sankey"?i.data.links.length===0:i.data.length===0})})}function Z0e(e){const t=X0e();if(e.loading){const n=e.slots?.loadingOverlay??q0e;return a.jsx(n,ke({},e.slotProps?.loadingOverlay))}if(t){const n=e.slots?.noDataOverlay??Q0e;return a.jsx(n,ke({},e.slotProps?.noDataOverlay))}return null}const J0e=[fx,mx,lx,Cf,hx,aN],eye=["xAxis","yAxis","series","width","height","margin","colors","dataset","sx","onAreaClick","onLineClick","onMarkClick","axisHighlight","disableLineItemHighlight","hideLegend","grid","children","slots","slotProps","skipAnimation","loading","highlightedItem","onHighlightChange","className","showToolbar","brushConfig"],tye=e=>{const{xAxis:t,yAxis:n,series:r,width:s,height:i,margin:o,colors:l,dataset:c,sx:d,onAreaClick:m,onLineClick:h,onMarkClick:p,axisHighlight:b,disableLineItemHighlight:v,grid:x,children:w,slots:j,slotProps:C,skipAnimation:S,loading:_,highlightedItem:E,onHighlightChange:A,className:T,brushConfig:R}=e,U=$t(e,eye),I=`${Dw()}-clip-path`,M=g.useMemo(()=>r.map(Te=>ke({disableHighlight:!!v,type:"line"},Te)),[v,r]),H=ke({},U,{series:M,width:s,height:i,margin:o,colors:l,dataset:c,xAxis:t??[{id:Rw,scaleType:"point",data:Array.from({length:Math.max(...r.map(Te=>(Te.data??c??[]).length))},(Te,Ae)=>Ae)}],yAxis:n,highlightedItem:E,onHighlightChange:A,disableAxisListener:C?.tooltip?.trigger!=="axis"&&b?.x==="none"&&b?.y==="none",className:T,skipAnimation:S,brushConfig:R,plugins:J0e}),q={vertical:x?.vertical,horizontal:x?.horizontal},ae={clipPath:`url(#${I})`},K={id:I},B={slots:j,slotProps:C,onItemClick:m},X={slots:j,slotProps:C,onItemClick:h},le={slots:j,slotProps:C,onItemClick:p,skipAnimation:S},ue={slots:j,slotProps:C,loading:_},J={slots:j,slotProps:C},ne=ke({x:"line"},b),pe={slots:j,slotProps:C},we={slots:j,slotProps:C};return{chartsWrapperProps:{sx:d,legendPosition:e.slotProps?.legend?.position,legendDirection:e.slotProps?.legend?.direction,hideLegend:e.hideLegend??!1},chartContainerProps:H,gridProps:q,clipPathProps:K,clipPathGroupProps:ae,areaPlotProps:B,linePlotProps:X,markPlotProps:le,overlayProps:ue,chartsAxisProps:J,axisHighlightProps:ne,lineHighlightPlotProps:pe,legendProps:we,children:w}};function nye(e,t,n,r,s,i,o,l,c,d,m,h=1/0,p=1){const b=r.copy(),v=s.copy();b.range([0,1]),v.range([0,1]);const x=function(R){const U=b(n[R].x),W=v(n[R].y);return U>=i&&U<=o&&W>=l&&W<=c},w=r.range()[1]-r.range()[0],j=s.range()[1]-s.range()[0],C=w*w,S=j*j;function _(T,R){return C*T*T+S*R*R}const E=b(y$(r,d,T=>n[T]?.x)),A=v(y$(s,m,T=>n[T]?.y));return e.neighbors(E,A,p,h!=null?h*h:1/0,x,_)}function y$(e,t,n){if(Ba(e)){const r=e.bandwidth()===0?Math.floor((t-Math.min(...e.range())+e.step()/2)/e.step()):Math.floor((t-Math.min(...e.range()))/e.step());return n(r)}return e.invert(t)}const NN=({svgRef:e,params:t,store:n,instance:r})=>{const{disableVoronoi:s,voronoiMaxRadius:i,onItemClick:o}=t,l=mt(n,Gr),{axis:c,axisIds:d}=mt(n,jr),{axis:m,axisIds:h}=mt(n,Cr),p=mt(n,qH),{series:b,seriesOrder:v}=mt(n,Hn)?.scatter??{},x=mt(n,p?sme:ime),w=d[0],j=h[0];Ea(()=>{n.set("voronoi",{isVoronoiEnabled:!s})},[n,s]),g.useEffect(()=>{if(e.current===null||s)return;const _=e.current;function E(q){const ae=mp(_,q);if(!r.isPointInside(ae.x,ae.y))return"outside-chart";let K;for(const B of v??[]){const X=(b??{})[B],le=x.get(B);if(!le)continue;const ue=X.xAxisId??w,J=X.yAxisId??j,ne=R5(n.getSnapshot(),ue),pe=R5(n.getSnapshot(),J),we=i==="item"?X.markerSize:i,ye=(ne?.start??0)/100,Te=(ne?.end??100)/100,Ae=(pe?.start??0)/100,Pe=(pe?.end??100)/100,$=c[ue].scale,Ne=m[J].scale,fe=nye(le,l,X.data,$,Ne,ye,Te,Ae,Pe,ae.x,ae.y,we)[0];if(fe===void 0)continue;const O=X.data[fe],ce=$(O.x),de=Ne(O.y),Ce=(ce-ae.x)**2+(de-ae.y)**2;(K===void 0||Ce<K.distanceSq)&&(K={dataIndex:fe,seriesId:B,distanceSq:Ce})}return K===void 0?"no-point-found":{seriesId:K.seriesId,dataIndex:K.dataIndex}}const A=r.addInteractionListener("moveEnd",q=>{q.detail.activeGestures.pan||(r.cleanInteraction?.(),r.clearHighlight?.())}),T=r.addInteractionListener("panEnd",q=>{q.detail.activeGestures.move||(r.cleanInteraction?.(),r.clearHighlight?.())}),R=r.addInteractionListener("quickPressEnd",q=>{!q.detail.activeGestures.move&&!q.detail.activeGestures.pan&&(r.cleanInteraction?.(),r.clearHighlight?.())}),U=q=>{const ae=E(q.detail.srcEvent);if(ae==="outside-chart"){r.cleanInteraction?.(),r.clearHighlight?.();return}if(ae==="outside-voronoi-max-radius"||ae==="no-point-found"){r.removeItemInteraction?.(),r.clearHighlight?.();return}const{seriesId:K,dataIndex:B}=ae;r.setItemInteraction?.({type:"scatter",seriesId:K,dataIndex:B},{interaction:"pointer"}),r.setHighlight?.({seriesId:K,dataIndex:B})},W=r.addInteractionListener("tap",q=>{const ae=E(q.detail.srcEvent);if(typeof ae!="string"&&o){const{seriesId:K,dataIndex:B}=ae;o(q.detail.srcEvent,{type:"scatter",seriesId:K,dataIndex:B})}}),I=r.addInteractionListener("move",U),M=r.addInteractionListener("pan",U),H=r.addInteractionListener("quickPress",U);return()=>{W.cleanup(),I.cleanup(),A.cleanup(),M.cleanup(),T.cleanup(),H.cleanup(),R.cleanup()}},[e,m,c,i,o,s,l,r,v,b,x,w,j,n]);const C=Ra(()=>{n.set("voronoi",{isVoronoiEnabled:!0})}),S=Ra(()=>{n.set("voronoi",{isVoronoiEnabled:!1})});return{instance:{enableVoronoi:C,disableVoronoi:S}}};NN.getDefaultizedParams=({params:e})=>ke({},e,{disableVoronoi:e.disableVoronoi??!e.series.some(t=>t.type==="scatter")});NN.getInitialState=e=>({voronoi:{isVoronoiEnabled:!e.disableVoronoi}});NN.params={disableVoronoi:!0,voronoiMaxRadius:!0,onItemClick:!0};const cV=[fx,mx,lx,Cf,hx,NN,aN],aye=["width","height","margin","children","series","colors","dataset","desc","onAxisClick","highlightedAxis","onHighlightedAxisChange","disableVoronoi","voronoiMaxRadius","onItemClick","disableAxisListener","highlightedItem","onHighlightChange","sx","title","xAxis","yAxis","zAxis","rotationAxis","radiusAxis","skipAnimation","seriesConfig","plugins","localeText","slots","slotProps","experimentalFeatures","enableKeyboardNavigation","brushConfig"],rye=(e,t)=>{const n=e,{width:r,height:s,margin:i,children:o,series:l,colors:c,dataset:d,desc:m,onAxisClick:h,highlightedAxis:p,onHighlightedAxisChange:b,disableVoronoi:v,voronoiMaxRadius:x,onItemClick:w,disableAxisListener:j,highlightedItem:C,onHighlightChange:S,sx:_,title:E,xAxis:A,yAxis:T,zAxis:R,rotationAxis:U,radiusAxis:W,skipAnimation:I,seriesConfig:M,plugins:H,localeText:q,slots:ae,slotProps:K,experimentalFeatures:B,enableKeyboardNavigation:X,brushConfig:le}=n,ue=$t(n,aye),J=ke({title:E,desc:m,sx:_,ref:t},ue);return{chartDataProviderProps:{margin:i,series:l,colors:c,dataset:d,disableAxisListener:j,highlightedItem:C,onHighlightChange:S,onAxisClick:h,highlightedAxis:p,onHighlightedAxisChange:b,disableVoronoi:v,voronoiMaxRadius:x,onItemClick:w,xAxis:A,yAxis:T,zAxis:R,rotationAxis:U,radiusAxis:W,skipAnimation:I,width:r,height:s,localeText:q,seriesConfig:M,experimentalFeatures:B,enableKeyboardNavigation:X,brushConfig:le,plugins:H??cV,slots:ae,slotProps:K},chartsSurfaceProps:J,children:o}};function b$(e){try{return e.matches(":focus-visible")}catch{}return!1}class gv{static create(){return new gv}static use(){const t=Iw(gv.create).current,[n,r]=g.useState(!1);return t.shouldMount=n,t.setShouldMount=r,g.useEffect(t.mountEffect,[n]),t}constructor(){this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=iye(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}mountEffect=()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())};start(...t){this.mount().then(()=>this.ref.current?.start(...t))}stop(...t){this.mount().then(()=>this.ref.current?.stop(...t))}pulsate(...t){this.mount().then(()=>this.ref.current?.pulsate(...t))}}function sye(){return gv.use()}function iye(){let e,t;const n=new Promise((r,s)=>{e=r,t=s});return n.resolve=e,n.reject=t,n}class Ik{static create(){return new Ik}currentId=null;start(t,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},t)}clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)};disposeEffect=()=>this.clear}function oye(){const e=Iw(Ik.create).current;return UB(e.disposeEffect),e}function lye(e){const{className:t,classes:n,pulsate:r=!1,rippleX:s,rippleY:i,rippleSize:o,in:l,onExited:c,timeout:d}=e,[m,h]=g.useState(!1),p=ct(t,n.ripple,n.rippleVisible,r&&n.ripplePulsate),b={width:o,height:o,top:-(o/2)+i,left:-(o/2)+s},v=ct(n.child,m&&n.childLeaving,r&&n.childPulsate);return!l&&!m&&h(!0),g.useEffect(()=>{if(!l&&c!=null){const x=setTimeout(c,d);return()=>{clearTimeout(x)}}},[c,l,d]),a.jsx("span",{className:p,style:b,children:a.jsx("span",{className:v})})}const Ms=Zn("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),LE=550,cye=80,dye=Jp`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,uye=Jp`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,mye=Jp`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,fye=kt("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),hye=kt(lye,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${Ms.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${dye};
    animation-duration: ${LE}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  &.${Ms.ripplePulsate} {
    animation-duration: ${({theme:e})=>e.transitions.duration.shorter}ms;
  }

  & .${Ms.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${Ms.childLeaving} {
    opacity: 0;
    animation-name: ${uye};
    animation-duration: ${LE}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  & .${Ms.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${mye};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,gye=g.forwardRef(function(t,n){const r=Ac({props:t,name:"MuiTouchRipple"}),{center:s=!1,classes:i={},className:o,...l}=r,[c,d]=g.useState([]),m=g.useRef(0),h=g.useRef(null);g.useEffect(()=>{h.current&&(h.current(),h.current=null)},[c]);const p=g.useRef(!1),b=oye(),v=g.useRef(null),x=g.useRef(null),w=g.useCallback(_=>{const{pulsate:E,rippleX:A,rippleY:T,rippleSize:R,cb:U}=_;d(W=>[...W,a.jsx(hye,{classes:{ripple:ct(i.ripple,Ms.ripple),rippleVisible:ct(i.rippleVisible,Ms.rippleVisible),ripplePulsate:ct(i.ripplePulsate,Ms.ripplePulsate),child:ct(i.child,Ms.child),childLeaving:ct(i.childLeaving,Ms.childLeaving),childPulsate:ct(i.childPulsate,Ms.childPulsate)},timeout:LE,pulsate:E,rippleX:A,rippleY:T,rippleSize:R},m.current)]),m.current+=1,h.current=U},[i]),j=g.useCallback((_={},E={},A=()=>{})=>{const{pulsate:T=!1,center:R=s||E.pulsate,fakeElement:U=!1}=E;if(_?.type==="mousedown"&&p.current){p.current=!1;return}_?.type==="touchstart"&&(p.current=!0);const W=U?null:x.current,I=W?W.getBoundingClientRect():{width:0,height:0,left:0,top:0};let M,H,q;if(R||_===void 0||_.clientX===0&&_.clientY===0||!_.clientX&&!_.touches)M=Math.round(I.width/2),H=Math.round(I.height/2);else{const{clientX:ae,clientY:K}=_.touches&&_.touches.length>0?_.touches[0]:_;M=Math.round(ae-I.left),H=Math.round(K-I.top)}if(R)q=Math.sqrt((2*I.width**2+I.height**2)/3),q%2===0&&(q+=1);else{const ae=Math.max(Math.abs((W?W.clientWidth:0)-M),M)*2+2,K=Math.max(Math.abs((W?W.clientHeight:0)-H),H)*2+2;q=Math.sqrt(ae**2+K**2)}_?.touches?v.current===null&&(v.current=()=>{w({pulsate:T,rippleX:M,rippleY:H,rippleSize:q,cb:A})},b.start(cye,()=>{v.current&&(v.current(),v.current=null)})):w({pulsate:T,rippleX:M,rippleY:H,rippleSize:q,cb:A})},[s,w,b]),C=g.useCallback(()=>{j({},{pulsate:!0})},[j]),S=g.useCallback((_,E)=>{if(b.clear(),_?.type==="touchend"&&v.current){v.current(),v.current=null,b.start(0,()=>{S(_,E)});return}v.current=null,d(A=>A.length>0?A.slice(1):A),h.current=E},[b]);return g.useImperativeHandle(n,()=>({pulsate:C,start:j,stop:S}),[C,j,S]),a.jsx(fye,{className:ct(Ms.root,i.root,o),ref:x,...l,children:a.jsx(yL,{component:null,exit:!0,children:c})})});function pye(e){return xa("MuiButtonBase",e)}const xye=Zn("MuiButtonBase",["root","disabled","focusVisible"]),yye=e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:r,classes:s}=e,o=pa({root:["root",t&&"disabled",n&&"focusVisible"]},pye,s);return n&&r&&(o.root+=` ${r}`),o},bye=kt("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${xye.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),dV=g.forwardRef(function(t,n){const r=Ac({props:t,name:"MuiButtonBase"}),{action:s,centerRipple:i=!1,children:o,className:l,component:c="button",disabled:d=!1,disableRipple:m=!1,disableTouchRipple:h=!1,focusRipple:p=!1,focusVisibleClassName:b,LinkComponent:v="a",onBlur:x,onClick:w,onContextMenu:j,onDragLeave:C,onFocus:S,onFocusVisible:_,onKeyDown:E,onKeyUp:A,onMouseDown:T,onMouseLeave:R,onMouseUp:U,onTouchEnd:W,onTouchMove:I,onTouchStart:M,tabIndex:H=0,TouchRippleProps:q,touchRippleRef:ae,type:K,...B}=r,X=g.useRef(null),le=sye(),ue=Ji(le.ref,ae),[J,ne]=g.useState(!1);d&&J&&ne(!1),g.useImperativeHandle(s,()=>({focusVisible:()=>{ne(!0),X.current.focus()}}),[]);const pe=le.shouldMount&&!m&&!d;g.useEffect(()=>{J&&p&&!m&&le.pulsate()},[m,p,J,le]);const we=Eo(le,"start",T,h),ye=Eo(le,"stop",j,h),Te=Eo(le,"stop",C,h),Ae=Eo(le,"stop",U,h),Pe=Eo(le,"stop",Se=>{J&&Se.preventDefault(),R&&R(Se)},h),$=Eo(le,"start",M,h),Ne=Eo(le,"stop",W,h),fe=Eo(le,"stop",I,h),O=Eo(le,"stop",Se=>{b$(Se.target)||ne(!1),x&&x(Se)},!1),ce=Ra(Se=>{X.current||(X.current=Se.currentTarget),b$(Se.target)&&(ne(!0),_&&_(Se)),S&&S(Se)}),de=()=>{const Se=X.current;return c&&c!=="button"&&!(Se.tagName==="A"&&Se.href)},Ce=Ra(Se=>{p&&!Se.repeat&&J&&Se.key===" "&&le.stop(Se,()=>{le.start(Se)}),Se.target===Se.currentTarget&&de()&&Se.key===" "&&Se.preventDefault(),E&&E(Se),Se.target===Se.currentTarget&&de()&&Se.key==="Enter"&&!d&&(Se.preventDefault(),w&&w(Se))}),Ee=Ra(Se=>{p&&Se.key===" "&&J&&!Se.defaultPrevented&&le.stop(Se,()=>{le.pulsate(Se)}),A&&A(Se),w&&Se.target===Se.currentTarget&&de()&&Se.key===" "&&!Se.defaultPrevented&&w(Se)});let Ge=c;Ge==="button"&&(B.href||B.to)&&(Ge=v);const Je={};Ge==="button"?(Je.type=K===void 0?"button":K,Je.disabled=d):(!B.href&&!B.to&&(Je.role="button"),d&&(Je["aria-disabled"]=d));const We=Ji(n,X),Ke={...r,centerRipple:i,component:c,disabled:d,disableRipple:m,disableTouchRipple:h,focusRipple:p,tabIndex:H,focusVisible:J},He=yye(Ke);return a.jsxs(bye,{as:Ge,className:ct(He.root,l),ownerState:Ke,onBlur:O,onClick:w,onContextMenu:ye,onFocus:ce,onKeyDown:Ce,onKeyUp:Ee,onMouseDown:we,onMouseLeave:Pe,onMouseUp:Ae,onDragLeave:Te,onTouchEnd:Ne,onTouchMove:fe,onTouchStart:$,ref:We,tabIndex:d?-1:H,type:K,...Je,...B,children:[o,pe?a.jsx(gye,{ref:ue,center:i,...q}):null]})});function Eo(e,t,n,r=!1){return Ra(s=>(n&&n(s),r||e[t](s),!0))}function vye(e){return xa("MuiIconButton",e)}const v$=Zn("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),wye=e=>{const{classes:t,disabled:n,color:r,edge:s,size:i,loading:o}=e,l={root:["root",o&&"loading",n&&"disabled",r!=="default"&&`color${yn(r)}`,s&&`edge${yn(s)}`,`size${yn(i)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return pa(l,vye,t)},Nye=kt(dV,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.loading&&t.loading,n.color!=="default"&&t[`color${yn(n.color)}`],n.edge&&t[`edge${yn(n.edge)}`],t[`size${yn(n.size)}`]]}})(Kd(({theme:e})=>({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),variants:[{props:t=>!t.disableRipple,style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),Kd(({theme:e})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(e.palette).filter(rp()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette).filter(rp()).map(([t])=>({props:{color:t},style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:e.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:e.typography.pxToRem(28)}}],[`&.${v$.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled},[`&.${v$.loading}`]:{color:"transparent"}}))),jye=kt("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(e.vars||e).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),Cye=g.forwardRef(function(t,n){const r=Ac({props:t,name:"MuiIconButton"}),{edge:s=!1,children:i,className:o,color:l="default",disabled:c=!1,disableFocusRipple:d=!1,size:m="medium",id:h,loading:p=null,loadingIndicator:b,...v}=r,x=Dw(h),w=b??a.jsx(bL,{"aria-labelledby":x,color:"inherit",size:16}),j={...r,edge:s,color:l,disabled:c,disableFocusRipple:d,loading:p,loadingIndicator:w,size:m},C=wye(j);return a.jsxs(Nye,{id:p?x:h,className:ct(C.root,o),centerRipple:!0,focusRipple:!d,disabled:c||p,ref:n,...v,ownerState:j,children:[typeof p=="boolean"&&a.jsx("span",{className:C.loadingWrapper,style:{display:"contents"},children:a.jsx(jye,{className:C.loadingIndicator,ownerState:j,children:p&&w})}),i]})});function Sye(e){return xa("MuiButton",e)}const Zc=Zn("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),_ye=g.createContext({}),Aye=g.createContext(void 0),Eye=e=>{const{color:t,disableElevation:n,fullWidth:r,size:s,variant:i,loading:o,loadingPosition:l,classes:c}=e,d={root:["root",o&&"loading",i,`${i}${yn(t)}`,`size${yn(s)}`,`${i}Size${yn(s)}`,`color${yn(t)}`,n&&"disableElevation",r&&"fullWidth",o&&`loadingPosition${yn(l)}`],startIcon:["icon","startIcon",`iconSize${yn(s)}`],endIcon:["icon","endIcon",`iconSize${yn(s)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},m=pa(d,Sye,c);return{...c,...m}},uV=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],Tye=kt(dV,{shouldForwardProp:e=>TB(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${yn(n.color)}`],t[`size${yn(n.size)}`],t[`${n.variant}Size${yn(n.size)}`],n.color==="inherit"&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth,n.loading&&t.loading]}})(Kd(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],n=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return{...e.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${Zc.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(e.vars||e).shadows[2],"&:hover":{boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2]}},"&:active":{boxShadow:(e.vars||e).shadows[8]},[`&.${Zc.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},[`&.${Zc.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${Zc.disabled}`]:{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(e.palette).filter(rp()).map(([r])=>({props:{color:r},style:{"--variant-textColor":(e.vars||e).palette[r].main,"--variant-outlinedColor":(e.vars||e).palette[r].main,"--variant-outlinedBorder":e.alpha((e.vars||e).palette[r].main,.5),"--variant-containedColor":(e.vars||e).palette[r].contrastText,"--variant-containedBg":(e.vars||e).palette[r].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(e.vars||e).palette[r].dark,"--variant-textBg":e.alpha((e.vars||e).palette[r].main,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBorder":(e.vars||e).palette[r].main,"--variant-outlinedBg":e.alpha((e.vars||e).palette[r].main,(e.vars||e).palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedBg:t,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedHoverBg:n,"--variant-textBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${Zc.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${Zc.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),[`&.${Zc.loading}`]:{color:"transparent"}}}]}})),Lye=kt("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,n.loading&&t.startIconLoadingStart,t[`iconSize${yn(n.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...uV]})),kye=kt("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,n.loading&&t.endIconLoadingEnd,t[`iconSize${yn(n.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...uV]})),Pye=kt("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(e.vars||e).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),w$=kt("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),Dye=g.forwardRef(function(t,n){const r=g.useContext(_ye),s=g.useContext(Aye),i=Yd(r,t),o=Ac({props:i,name:"MuiButton"}),{children:l,color:c="primary",component:d="button",className:m,disabled:h=!1,disableElevation:p=!1,disableFocusRipple:b=!1,endIcon:v,focusVisibleClassName:x,fullWidth:w=!1,id:j,loading:C=null,loadingIndicator:S,loadingPosition:_="center",size:E="medium",startIcon:A,type:T,variant:R="text",...U}=o,W=Dw(j),I=S??a.jsx(bL,{"aria-labelledby":W,color:"inherit",size:16}),M={...o,color:c,component:d,disabled:h,disableElevation:p,disableFocusRipple:b,fullWidth:w,loading:C,loadingIndicator:I,loadingPosition:_,size:E,type:T,variant:R},H=Eye(M),q=(A||C&&_==="start")&&a.jsx(Lye,{className:H.startIcon,ownerState:M,children:A||a.jsx(w$,{className:H.loadingIconPlaceholder,ownerState:M})}),ae=(v||C&&_==="end")&&a.jsx(kye,{className:H.endIcon,ownerState:M,children:v||a.jsx(w$,{className:H.loadingIconPlaceholder,ownerState:M})}),K=s||"",B=typeof C=="boolean"?a.jsx("span",{className:H.loadingWrapper,style:{display:"contents"},children:C&&a.jsx(Pye,{className:H.loadingIndicator,ownerState:M,children:I})}):null;return a.jsxs(Tye,{ownerState:M,className:ct(r.className,H.root,m,K),component:d,disabled:h||C,focusRipple:!b,focusVisibleClassName:ct(H.focusVisible,x),ref:n,type:T,id:C?W:j,...U,classes:H,children:[q,_!=="end"&&B,l,_==="end"&&B,ae]})}),Oye={baseButton:Dye,baseIconButton:Cye},Mye={},Iye=ke({},Oye,Mye),$ye=g.createContext(null);function Rye(e){const{slots:t,slotProps:n={},defaultSlots:r,children:s}=e,i=g.useMemo(()=>({slots:ke({},r,t),slotProps:n}),[r,t,n]);return a.jsx($ye.Provider,{value:i,children:s})}const zye=["children","localeText","plugins","seriesConfig","slots","slotProps"],Uye=e=>{const t=Zs({props:e,name:"MuiChartDataProvider"}),{children:n,localeText:r,plugins:s=cV,seriesConfig:i,slots:o,slotProps:l}=t,c=$t(t,zye),d=ro(),m={plugins:s,seriesConfig:i,pluginParams:ke({theme:d.palette.mode},c)};return{children:n,localeText:r,chartProviderProps:m,slots:o,slotProps:l}};function Fye(e){const{children:t,localeText:n,chartProviderProps:r,slots:s,slotProps:i}=Uye(e);return a.jsx(Yhe,ke({},r,{children:a.jsx(dhe,{localeText:n,children:a.jsx(Rye,{slots:s,slotProps:i,defaultSlots:Iye,children:t})})}))}function N$(e){const{isReversed:t,gradientId:n,size:r,direction:s,scale:i,colorMap:o}=e;return r<=0?null:a.jsx("linearGradient",{id:n,x1:"0",x2:"0",y1:"0",y2:"0",[`${s}${t?1:2}`]:`${r}px`,gradientUnits:"userSpaceOnUse",children:o.thresholds.map((l,c)=>{const d=i(l);if(d===void 0)return null;const m=t?1-d/r:d/r;return Number.isNaN(m)?null:a.jsxs(g.Fragment,{children:[a.jsx("stop",{offset:m,stopColor:o.colors[c],stopOpacity:1}),a.jsx("stop",{offset:m,stopColor:o.colors[c+1],stopOpacity:1})]},l.toString()+c)})})}const Bye=10;function j$(e){const{gradientUnits:t,isReversed:n,gradientId:r,size:s,direction:i,scale:o,colorScale:l,colorMap:c}=e,d=[c.min??0,c.max??100],m=d.map(o).filter(v=>v!==void 0);if(m.length!==2)return null;const h=typeof d[0]=="number"?Qm(d[0],d[1]):OL(d[0],d[1]),p=Math.round((Math.max(...m)-Math.min(...m))/Bye),b=`${d[0]}-${d[1]}-`;return a.jsx("linearGradient",{id:r,x1:"0",x2:"0",y1:"0",y2:"0",[`${i}${n?1:2}`]:t==="objectBoundingBox"?1:`${s}px`,gradientUnits:t??"userSpaceOnUse",children:Array.from({length:p+1},(v,x)=>{const w=h(x/p);if(w===void 0)return null;const j=o(w);if(j===void 0)return null;const C=n?1-j/s:j/s,S=l(w);return S===null?null:a.jsx("stop",{offset:C,stopColor:S,stopOpacity:1},b+x)})})}const Hye=10,Gye=e=>e?{x1:"1",x2:"0",y1:"0",y2:"0"}:{x1:"0",x2:"1",y1:"0",y2:"0"};function SS(e){const{isReversed:t,gradientId:n,colorScale:r,colorMap:s}=e,i=[s.min??0,s.max??100],o=typeof i[0]=="number"?Qm(i[0],i[1]):OL(i[0],i[1]),l=Hye,c=`${i[0]}-${i[1]}-`;return a.jsx("linearGradient",ke({id:n},Gye(t),{gradientUnits:"objectBoundingBox",children:Array.from({length:l+1},(d,m)=>{const h=m/l,p=o(h);if(p===void 0)return null;const b=r(p);return b===null?null:a.jsx("stop",{offset:h,stopColor:b,stopOpacity:1},c+m)})}))}function Vye(){const{top:e,height:t,bottom:n,left:r,width:s,right:i}=ei(),o=e+t+n,l=r+s+i,c=bk(),d=Gfe(),{xAxis:m,xAxisIds:h}=Vr(),{yAxis:p,yAxisIds:b}=Wr(),{zAxis:v,zAxisIds:x}=pk(),w=b.filter(S=>p[S].colorMap!==void 0),j=h.filter(S=>m[S].colorMap!==void 0),C=x.filter(S=>v[S].colorMap!==void 0);return w.length===0&&j.length===0&&C.length===0?null:a.jsxs("defs",{children:[w.map(S=>{const _=c(S),E=d(S),{colorMap:A,scale:T,colorScale:R,reverse:U}=p[S];return A?.type==="piecewise"?a.jsx(N$,{isReversed:!U,scale:T,colorMap:A,size:o,gradientId:_,direction:"y"},_):A?.type==="continuous"?a.jsxs(g.Fragment,{children:[a.jsx(j$,{isReversed:!U,scale:T,colorScale:R,colorMap:A,size:o,gradientId:_,direction:"y"}),a.jsx(SS,{isReversed:U,colorScale:R,colorMap:A,gradientId:E})]},_):null}),j.map(S=>{const _=c(S),E=d(S),{colorMap:A,scale:T,reverse:R,colorScale:U}=m[S];return A?.type==="piecewise"?a.jsx(N$,{isReversed:R,scale:T,colorMap:A,size:l,gradientId:_,direction:"x"},_):A?.type==="continuous"?a.jsxs(g.Fragment,{children:[a.jsx(j$,{isReversed:R,scale:T,colorScale:U,colorMap:A,size:l,gradientId:_,direction:"x"}),a.jsx(SS,{isReversed:R,colorScale:U,colorMap:A,gradientId:E})]},_):null}),C.map(S=>{const _=d(S),{colorMap:E,colorScale:A}=v[S];return E?.type==="continuous"?a.jsx(SS,{colorScale:A,colorMap:E,gradientId:_},_):null})]})}function Wye(e){return xa("MuiChartsSurface",e)}const qye=()=>pa({root:["root"]},Wye);Zn("MuiChartsSurface",["root"]);const Yye=["children","className","title","desc"],Kye=kt("svg",{name:"MuiChartsSurface",slot:"Root"})(({ownerState:e,theme:t})=>({width:e.width??"100%",height:e.height??"100%",display:"flex",position:"relative",flexDirection:"column",alignItems:"center",justifyContent:"center",overflow:"hidden",touchAction:e.hasZoom?"pan-y":void 0,userSelect:"none",gridArea:"chart","&:focus":{outline:"none"},"&:focus-visible":{outline:`${(t.vars??t).palette.text.primary} solid 2px`,"&[data-has-focused-item=true]":{outline:"none"}},"& [data-focused=true]":{outline:`${(t.vars??t).palette.text.primary} solid 2px`}})),Qye=g.forwardRef(function(t,n){const r=Nn(),s=mt(r,kle),i=mt(r,Ple),o=mt(r,BB),l=mt(r,HB),c=mt(r,pme),d=mt(r,gme),m=mt(r,Kue),h=xk(),p=Ji(h,n),b=Zs({props:t,name:"MuiChartsSurface"}),{children:v,className:x,title:w,desc:j}=b,C=$t(b,Yye),S=qye(),_=i>0&&s>0;return a.jsxs(Kye,ke({ownerState:{width:o,height:l,hasZoom:m},viewBox:`0 0 ${s} ${i}`,className:ct(S.root,x),tabIndex:c?0:void 0,"data-has-focused-item":d||void 0},C,{ref:p,children:[w&&a.jsx("title",{children:w}),j&&a.jsx("desc",{children:j}),a.jsx(Vye,{}),_&&v]}))}),C$=Zn("MuiChartsToolbar",["root"]),Xye=e=>e?.horizontal==="start"?"start":e?.horizontal==="end"?"end":"center",Zye=e=>e?.vertical==="top"?"flex-start":e?.vertical==="bottom"?"flex-end":"center",Jye=(e,t,n)=>e?'"chart"':t==="vertical"?n?.horizontal==="start"?'"legend chart"':'"chart legend"':n?.vertical==="bottom"?`"chart"
            "legend"`:`"legend"
          "chart"`,ebe=(e=!1,t="horizontal",n="end",r=void 0)=>{const s=r?"auto":"1fr";return t==="horizontal"||e?s:n==="start"?`auto ${s}`:`${s} auto`},tbe=(e=!1,t="horizontal",n="top")=>t==="vertical"||e?"1fr":n==="bottom"?"1fr auto":"auto 1fr",nbe=kt("div",{name:"MuiChartsWrapper",slot:"Root",shouldForwardProp:e=>Ab(e)&&e!=="extendVertically"&&e!=="width"})(({ownerState:e,width:t})=>{const n=ebe(e.hideLegend,e.legendDirection,e.legendPosition?.horizontal,t),r=tbe(e.hideLegend,e.legendDirection,e.legendPosition?.vertical),s=Jye(e.hideLegend,e.legendDirection,e.legendPosition);return{variants:[{props:{extendVertically:!0},style:{height:"100%",minHeight:0}}],flex:1,display:"grid",gridTemplateColumns:n,gridTemplateRows:r,gridTemplateAreas:s,[`&:has(.${C$.root})`]:{gridTemplateRows:`auto ${r}`,gridTemplateAreas:`"${n.split(" ").map(()=>"toolbar").join(" ")}"
        ${s}`},[`& .${C$.root}`]:{gridArea:"toolbar",justifySelf:"center"},justifyContent:"safe center",justifyItems:Xye(e.legendPosition),alignItems:Zye(e.legendPosition)}});function abe(e){const{children:t,sx:n,extendVertically:r}=e,s=she(),i=Nn(),o=mt(i,BB),l=mt(i,HB);return a.jsx(nbe,{ref:s,ownerState:e,sx:n,extendVertically:r??l===void 0,width:o,children:t})}function rbe(){const e=Nn(),t=mt(e,rN),n=mt(e,sN),r=mt(e,iN);return g.useMemo(()=>t===void 0||n===void 0||r===void 0?null:{seriesType:t,seriesId:n,dataIndex:r},[t,n,r])}const Cy=6;function sbe(){const e=ro(),t=rbe(),n=px(),{xAxis:r,xAxisIds:s}=Vr(),{yAxis:i,yAxisIds:o}=Wr();if(t===null||t.seriesType!=="line"||!n)return null;const l=n?.series[t.seriesId],c=l.xAxisId??s[0],d=l.yAxisId??o[0];return a.jsx("rect",{fill:"none",stroke:(e.vars??e).palette.text.primary,strokeWidth:2,x:r[c].scale(r[c].data[t.dataIndex])-Cy,y:i[d].scale(l.stackedData[t.dataIndex][1])-Cy,width:2*Cy,height:2*Cy,rx:3,ry:3})}const $k=g.forwardRef(function(t,n){const r=Zs({props:t,name:"MuiLineChart"}),{chartsWrapperProps:s,chartContainerProps:i,gridProps:o,clipPathProps:l,clipPathGroupProps:c,areaPlotProps:d,linePlotProps:m,markPlotProps:h,overlayProps:p,chartsAxisProps:b,axisHighlightProps:v,lineHighlightPlotProps:x,legendProps:w,children:j}=tye(r),{chartDataProviderProps:C,chartsSurfaceProps:S}=rye(i,n),_=r.slots?.tooltip??u0e,E=r.slots?.toolbar;return a.jsx(Fye,ke({},C,{children:a.jsxs(abe,ke({},s,{children:[r.showToolbar&&E?a.jsx(E,ke({},r.slotProps?.toolbar)):null,!r.hideLegend&&a.jsx(C0e,ke({},w)),a.jsxs(Qye,ke({},S,{children:[a.jsx(G0e,ke({},o)),a.jsxs("g",ke({},c,{children:[a.jsx(lge,ke({},d)),a.jsx(vge,ke({},m)),a.jsx(Z0e,ke({},p)),a.jsx(T0e,ke({},v))]})),a.jsx(sbe,{}),a.jsx(ype,ke({},b)),a.jsx("g",{"data-drawing-container":!0,children:a.jsx(Tge,ke({},h))}),a.jsx($0e,ke({},x)),a.jsx(L0e,ke({},l)),j]})),!r.loading&&a.jsx(_,ke({},r.slotProps?.tooltip))]}))}))}),ibe=e=>a.jsx(bt,{...e}),obe=e=>a.jsx(Cc,{...e}),lbe=e=>a.jsx(eL,{...e}),mV=e=>a.jsx(Za,{...e}),cbe=e=>a.jsx(xw,{...e}),dbe=e=>a.jsx(KT,{...e}),ube=e=>a.jsx(ft,{...e}),mbe=e=>a.jsx(pt,{...e}),fbe=e=>a.jsx(XT,{...e}),fV=e=>a.jsx(QT,{...e}),hV=e=>a.jsx(en,{...e}),gV=e=>a.jsx(Qt,{...e}),hbe=e=>a.jsx(Ln,{...e}),gbe=e=>a.jsx($n,{...e}),pbe=e=>a.jsx(Br,{...e}),xbe=e=>a.jsx(ms,{...e}),ybe=e=>a.jsx(Fn,{...e}),bbe=e=>a.jsx(ft,{...e}),vbe=e=>a.jsx(fr,{...e}),wbe=e=>a.jsx(_c,{...e}),Nbe=e=>a.jsx(mr,{...e}),pV=e=>`P ${new Intl.NumberFormat("en-PH",{minimumFractionDigits:0}).format(e)}`,jbe=e=>{switch(e){case"Negotiation":return{text:"text-purple-700",bg:"bg-purple-100"};case"Proposal":return{text:"text-red-700",bg:"bg-red-100"};case"Qualification":return{text:"text-yellow-700",bg:"bg-yellow-100"};case"Prospecting":return{text:"text-blue-700",bg:"bg-blue-100"};case"Closed Won":return{text:"text-green-700",bg:"bg-green-100"};case"Closed Lost":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},Cbe=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},Sbe=e=>{switch(e){case"call":return{Icon:mbe,color:"text-red-500",bgColor:"bg-red-100"};case"qualification":return{Icon:fbe,color:"text-green-600",bgColor:"bg-green-100"};case"meeting":default:return{Icon:ube,color:"text-blue-500",bgColor:"bg-blue-100"}}},_be=e=>{switch(e.toUpperCase()){case"HIGH":return{text:"text-red-700",bg:"bg-red-100"};case"LOW":return{text:"text-blue-700",bg:"bg-blue-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},Abe=({searchQuery:e,onSearchChange:t,searchResults:n,onSearchResultClick:r})=>{const s=rt(),[i,o]=g.useState(!1),l=g.useRef(null),c=[{icon:hV,label:"Account"},{icon:gV,label:"Contact"},{icon:hbe,label:"Leads"},{icon:gbe,label:"Deals"},{icon:pbe,label:"Quotes"},{icon:xbe,label:"Target"},{icon:ybe,label:"Task"},{icon:bbe,label:"Meeting"},{icon:vbe,label:"Call"},{icon:Nbe,label:"Audit"},{icon:wbe,label:"Territory"}];g.useEffect(()=>{const h=p=>{l.current&&!l.current.contains(p.target)&&o(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]);const d=h=>{t(h.target.value),o(h.target.value.trim().length>0)},m=h=>{r&&r(h),o(!1)};return a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 sm:p-4 flex flex-col items-start space-y-4 w-full",children:[a.jsxs("div",{className:"w-full flex justify-center relative",ref:l,children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg lg:mt-3 px-4 py-2 w-full max-w-md md:max-w-2xl lg:max-w-2xl focus-within:ring-2 focus-within:ring-blue-500 transition duration-150",children:[a.jsx(ibe,{size:20,className:"text-gray-400 mr-3 flex-shrink-0"}),a.jsx("input",{type:"text",placeholder:"Search Leads, Deals, or Accounts...",className:"focus:outline-none text-base w-full",value:e,onChange:d,onFocus:()=>e.trim().length>0&&o(!0)})]}),i&&Array.isArray(n)&&n.length>0&&a.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:n.map((h,p)=>a.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition duration-150",onClick:()=>m(h),children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:h.name}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:h.type}),h.details&&a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:h.details})]}),a.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${h.type==="Lead"?"bg-blue-100 text-blue-600":h.type==="Deal"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:h.type})]})},p))}),i&&e.trim().length>0&&(!Array.isArray(n)||n.length===0)&&a.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 p-4 text-center text-sm text-gray-500",children:"No results found"})]}),a.jsx("div",{className:"w-full overflow-x-auto lg:overflow-x-hidden scroll-smooth flex justify-center",children:a.jsx("div",{className:"flex flex-nowrap space-x-3 lg:space-x-4 xl:space-x-3 px-2 sm:px-0",children:c.map((h,p)=>a.jsxs("div",{className:"relative flex-shrink-0 group",children:[a.jsx("button",{className:"p-3 text-gray-500 hover:text-gray-900 transition duration-150 rounded-full hover:bg-gray-100 focus:outline-none cursor-pointer","aria-label":h.label,onClick:()=>{switch(h.label){case"Account":s("/admin/accounts");break;case"Contact":s("/admin/contacts");break;case"Leads":s("/admin/leads");break;case"Deals":s("/admin/deals");break;case"Quotes":s("/admin/quotes");break;case"Target":s("/admin/targets");break;case"Task":s("/admin/tasks");break;case"Meeting":s("/admin/meetings");break;case"Call":s("/admin/calls");break;case"Audit":s("/admin/audit");break;case"Territory":s("/admin/territory");break;default:console.log(`Clicked ${h.label}`)}},children:a.jsx(h.icon,{size:24,className:"lg:scale-95"})}),a.jsx("span",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-1 bg-gray-700 text-white text-xs font-medium rounded-lg whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition duration-200 pointer-events-none z-20 shadow-md",children:h.label})]},p))})})]})},Ebe=({action:e,description:t,entity_type:n,entity_name:r,timestamp:s})=>{const i=rt(),o=m=>{if(!m)return"Unknown";const h=new Date(m),b=new Date-h,v=Math.floor(b/6e4),x=Math.floor(b/36e5),w=Math.floor(b/864e5);return v<1?"Just now":v<60?`${v} min ago`:x<24?`${x} hour${x>1?"s":""} ago`:w<7?`${w} day${w>1?"s":""} ago`:h.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},l=e||t||"Action",c=r||n||"System",d=o(s);return a.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i("/admin/audit"),children:[a.jsxs("p",{className:"text-sm text-gray-800 flex-grow font-medium",children:[l," ",a.jsxs("span",{className:"text-gray-500 italic text-xs",children:["(",c,")"]})]}),a.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-4",children:d})]})},Tbe=({logs:e,loading:t})=>{const n=rt();return a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Recent Logs"}),a.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>n("/admin/audit"),children:[a.jsx("span",{children:"See All"}),a.jsx(fV,{size:14,className:"transform -rotate-45"})]})]}),e&&e.length>0?a.jsx("ul",{className:"space-y-1",children:e.slice(0,3).map((r,s)=>a.jsx(Ebe,{...r},s))}):a.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No recent logs"})]})},Lbe=({icon:e,title:t,value:n,color:r,bgColor:s,loading:i,onClick:o})=>a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o||(()=>console.log(`Clicked metric card: ${t}`)),children:[a.jsx("div",{className:`p-3 rounded-full ${s} ${r} mr-4`,children:a.jsx(e,{size:20})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n||0})]})]}),kbe=({revenueData:e,loading:t})=>{const n=rt(),r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=g.useMemo(()=>{if(console.log("=== RevenueChart calculateRevenueData ==="),console.log("revenueData:",e),console.log("revenueData length:",e?.length),!e||e.length===0){console.log("No revenue data, returning empty chart");const w=new Date;w.getFullYear();const j=w.getMonth(),C=[],S=[];for(let _=0;_<=j;_++)C.push(r[_]),S.push(0);return{labels:C,revenues:S,maxRevenue:0}}const l={};let c=0,d=0;console.log("Processing deals:",e.length),e.forEach((w,j)=>{const C=w.close_date||w.closeDate||null,S=C&&C!==null&&C!=="",_=w.stage||"",E=_.toUpperCase()==="CLOSED_WON"||_==="CLOSED_WON";let A=w.amount;A&&typeof A=="object"&&A.toString?A=parseFloat(A.toString()):A=parseFloat(A)||0;const T=A>0;if(E&&(d++,console.log(`Deal ${j+1} (CLOSED_WON):`,{id:w.id,name:w.name,stage:_,close_date:C,close_date_type:typeof C,amount:A,amount_type:typeof w.amount,hasCloseDate:S,hasAmount:T,willBeAdded:S&&T,allFields:Object.keys(w)})),S&&E&&T)try{let R=new Date(C);if(isNaN(R.getTime())){const U=String(C).split("T")[0];R=new Date(U+"T00:00:00")}if(isNaN(R.getTime()))console.warn(` Invalid date for deal ${w.id}:`,C,"Type:",typeof C);else{const U=R.getFullYear(),W=R.getMonth()+1,I=`${U}-${String(W).padStart(2,"0")}`;l[I]||(l[I]=0),l[I]+=A,c++,console.log(` Added deal ${w.id} to month ${I}: ${A}, total: ${l[I]}`),console.log(`  - Close date: ${C} -> Parsed: ${R.toISOString()} -> Month: ${I} (Year: ${U}, Month: ${W})`)}}catch(R){console.error("Error parsing deal date:",C,R)}else E&&console.warn(` Deal ${w.id} is CLOSED_WON but missing data:`,{hasCloseDate:S,hasAmount:T,closeDate:C,amount:A,originalAmount:w.amount})}),console.log("Summary:",{totalDeals:e.length,closedWonDeals:d,validDealsForGraph:c,monthlyRevenue:l});const m=Object.keys(l).map(w=>parseInt(w.split("-")[0])),h=m.length>0?[...new Set(m)].sort():[],p=new Date().getFullYear();new Date().getMonth();const b=[],v=[];for(let w=0;w<12;w++){const j=`${p}-${String(w+1).padStart(2,"0")}`;b.push(r[w]);const C=l[j]||0;v.push(C),C>0&&console.log(`Month ${r[w]} (${j}): ${C}`)}if(h.length>0){const w=Math.max(...h);if(w>p)for(let j=p+1;j<=w;j++)for(let C=0;C<12;C++){const S=`${j}-${String(C+1).padStart(2,"0")}`,_=l[S]||0;b.push(`${r[C]} ${j}`),v.push(_),_>0&&console.log(`Month ${r[C]} ${j} (${S}): ${_}`)}}const x=Math.max(...v,1);return console.log("Final chart data:",{labels:b,revenues:v,maxRevenue:x,hasData:v.some(w=>w>0)}),{labels:b,revenues:v,maxRevenue:x}},[e]),i=s.labels,o=s.revenues;return console.log("=== FINAL CHART DATA ==="),console.log("X Axis (Months):",i),console.log("Y Axis (Revenue):",o),console.log("Has any revenue > 0:",o.some(l=>l>0)),console.log("All revenue values:",o),console.log("Max revenue:",s.maxRevenue),a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Overview"}),a.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>n("/admin/deals"),children:[a.jsx("span",{children:"See All"}),a.jsx(fV,{size:14,className:"transform -rotate-45"})]})]}),a.jsx("div",{className:"h-80 relative flex-1 flex items-center justify-center p-6",children:a.jsx("div",{className:"w-full h-full flex items-center justify-start lg:justify-center overflow-x-auto sm:overflow-x-hidden",children:i&&i.length>0&&o&&o.length>0?a.jsx($k,{xAxis:[{data:i,scaleType:"point"}],yAxis:[{valueFormatter:l=>l>=1e3?`${(l/1e3).toFixed(0)}k`:l.toString()}],series:[{data:o,showMark:!0,area:!0}],height:320,width:void 0,grid:{vertical:!0,horizontal:!0},margin:{top:40,right:40,bottom:50,left:50},sx:{width:"100%",maxWidth:"100%",minWidth:{xs:600,lg:"100%"}}}):a.jsxs("div",{className:"text-center text-gray-500",children:[a.jsx("p",{className:"text-sm",children:"No revenue data available"}),a.jsx("p",{className:"text-xs mt-2",children:"Closed won deals with close dates will appear here"})]})})})]})},Pbe=({pipelineData:e,loading:t})=>{const n=rt(),r=o=>{const l=(o||"").toUpperCase(),c={PROSPECTING:{name:"Prospecting",color:"bg-blue-500"},QUALIFICATION:{name:"Qualification",color:"bg-yellow-500"},PROPOSAL:{name:"Proposal",color:"bg-orange-500"},NEGOTIATION:{name:"Negotiation",color:"bg-purple-500"},CLOSED_WON:{name:"Closed Won",color:"bg-green-500"},CLOSED_LOST:{name:"Closed Lost",color:"bg-red-500"}};if(c[l])return c[l];const d=["bg-blue-500","bg-yellow-500","bg-orange-500","bg-purple-500","bg-green-500","bg-red-500"],m=Math.abs(l.split("").reduce((h,p)=>h+p.charCodeAt(0),0))%d.length;return{name:o||"Unknown",color:d[m]}},i=(()=>{if(!e||e.length===0)return["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"].map(h=>{const p=r(h);return{stage:p.name,value:0,deals:0,color:p.color}});const o={};e.forEach(m=>{const h=m.stage||"PROSPECTING";o[h]||(o[h]={deals:0,value:0}),o[h].deals+=1,o[h].value+=parseFloat(m.amount||0)});const l=Math.max(...Object.values(o).map(m=>m.value),1),c=["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"],d=[];return c.forEach(m=>{const h=r(m),p=o[m]||{deals:0,value:0};d.push({stage:h.name,value:p.value,deals:p.deals,color:h.color,percentage:l>0?p.value/l*100:0})}),d})();return a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Sales Pipeline"}),a.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:()=>n("/admin/deals"),children:"See All"})]}),a.jsx("div",{className:"space-y-4 flex-grow",children:i.slice(0,6).map(o=>a.jsxs("div",{className:"flex flex-col cursor-pointer hover:opacity-85 transition duration-150",onClick:()=>n("/admin/deals"),children:[a.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[a.jsx("span",{className:"font-medium text-gray-700",children:o.stage}),a.jsx("span",{className:"font-semibold text-gray-800",children:pV(o.value)})]}),a.jsx("div",{className:"relative h-2 rounded-full bg-gray-200",children:a.jsx("div",{className:`absolute top-0 left-0 h-full rounded-full ${o.color}`,style:{width:`${Math.min(o.percentage,100)}%`}})}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[o.deals," Deals"]})]},o.stage))})]})},_S=({title:e,items:t,children:n,onSeeAll:r})=>{const s=rt(),i=()=>{if(r)r();else{const o={"Latest Leads":"/admin/leads","Latest Deals":"/admin/deals","Upcoming Activities":"/admin/tasks"};o[e]&&s(o[e])}};return a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e}),a.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:i,children:"See All"})]}),n]})},Dbe=({first_name:e,last_name:t,company_name:n,source:r,created_at:s,id:i})=>{const o=rt(),{text:l,bg:c}=Cbe(r||"Website"),d=b=>{if(!b)return"Unknown";const v=new Date(b),w=new Date-v,j=Math.floor(w/6e4),C=Math.floor(w/36e5),S=Math.floor(w/864e5);return j<60?`${j} min ago`:C<24?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):S<7?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):v.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},m=`${e||""} ${t||""}`.trim()||"Unknown",h=n||"Unknown Company",p=d(s);return a.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&o(`/admin/leads/${i}`),children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:m}),a.jsx("p",{className:"text-xs text-gray-500",children:h})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs text-gray-400",children:p}),a.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${l} ${c} px-2 py-0.5 rounded-full`,children:r||"Website"})]})]})})},Obe=({name:e,amount:t,account:n,stage:r,created_at:s,id:i,previousAmount:o})=>{const l=rt(),d={PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"}[r]||r||"Unknown",{text:m,bg:h}=jbe(d),p=parseFloat(t||0),b=o?p>=o?"up":"down":"up",v=b==="up"?cbe:dbe,x=b==="up"?"text-green-400":"text-red-400",w=n?.name||"Unknown Company";return a.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&l(`/admin/deals/info?id=${i}`),children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex-shrink",children:[a.jsx("p",{className:"font-semibold text-sm text-gray-900",children:e||"Unnamed Deal"}),a.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:w}),a.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${m} ${h} px-2 py-0.5 rounded-full`,children:d})]}),a.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[a.jsx("p",{className:"text-md font-bold text-gray-800",children:pV(p)}),a.jsx(v,{size:16,className:`${x} mt-1`})]})]})})},Mbe=({type:e,title:t,assignedTo:n,dueDate:r,scheduledDate:s,priority:i,id:o,activityType:l,fullData:c})=>{const d=rt(),h=l||{Call:"call",Meeting:"meeting",Task:"qualification"}[e]||"meeting",{Icon:p,color:b,bgColor:v}=Sbe(h),{text:x,bg:w}=_be(i||"MEDIUM"),S=(A=>{if(!A)return"No date set";const T=new Date(A),U=T-new Date,W=Math.floor(U/864e5);return W===0?`Today, ${T.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:W===1?`Tomorrow, ${T.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:W===-1?`Yesterday, ${T.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:T.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(r||s),_=n||"Unassigned",E=()=>{o&&(c?h==="call"?(sessionStorage.setItem("callDetailData",JSON.stringify(c)),d(`/admin/calls/info?id=${o}`)):h==="meeting"?(sessionStorage.setItem("meetingDetailData",JSON.stringify(c)),d(`/admin/meetings/info?id=${o}`)):d("/admin/tasks"):d(h==="call"?`/admin/calls/info?id=${o}`:h==="meeting"?`/admin/meetings/info?id=${o}`:"/admin/tasks"))};return a.jsxs("div",{className:"flex items-start py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:E,children:[a.jsx("div",{className:`p-2 rounded-lg ${v} mr-3 flex-shrink-0 mt-1`,children:a.jsx(p,{size:20,className:`${b}`})}),a.jsxs("div",{className:"flex-grow",children:[a.jsxs("p",{className:"font-medium text-gray-800 flex items-center mb-1",children:[a.jsx("span",{className:"text-xl leading-none mr-2",children:""}),t||"Untitled Activity"]}),a.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[a.jsxs("p",{className:"flex items-center",children:[a.jsx(mV,{size:14,className:"mr-1.5 text-gray-400"}),S]}),a.jsxs("p",{className:"flex items-center",children:[a.jsx(gV,{size:14,className:"mr-1.5 text-gray-400"}),"Assigned to: ",_]})]})]}),a.jsx("span",{className:`inline-block text-xs font-medium ${x} ${w} px-2 py-0.5 rounded-full flex-shrink-0 self-center ml-4`,children:(i||"MEDIUM").toUpperCase()})]})},Ibe=()=>{const e=rt(),{user:t}=Ut(),[n,r]=g.useState({activeLeads:0,totalDeals:0,activeAccounts:0,overdueTasks:0}),[s,i]=g.useState([]),[o,l]=g.useState([]),[c,d]=g.useState([]),[m,h]=g.useState([]),[p,b]=g.useState([]),[v,x]=g.useState([]),[w,j]=g.useState(!0),[C,S]=g.useState(null),[_,E]=g.useState(""),[A,T]=g.useState([]),[R,U]=g.useState([]),[W,I]=g.useState([]),[M,H]=g.useState(new Date),q=g.useRef(null),ae=g.useRef(null),K=g.useMemo(()=>{try{if(!_.trim())return[];const ue=_.toLowerCase().trim(),J=[];return Array.isArray(A)&&A.forEach(ne=>{const pe=`${ne.first_name||""} ${ne.last_name||""}`.trim().toLowerCase(),we=(ne.company_name||"").toLowerCase(),ye=(ne.email||"").toLowerCase(),Te=(ne.phone||"").toLowerCase();(pe.includes(ue)||we.includes(ue)||ye.includes(ue)||Te.includes(ue))&&J.push({id:ne.id,name:`${ne.first_name||""} ${ne.last_name||""}`.trim()||"Unnamed Lead",type:"Lead",details:ne.company_name||"No company",route:`/admin/leads/${ne.id}`})}),Array.isArray(R)&&R.forEach(ne=>{const pe=(ne.name||"").toLowerCase(),we=(ne.account?.name||"").toLowerCase(),ye=(ne.description||"").toLowerCase();(pe.includes(ue)||we.includes(ue)||ye.includes(ue))&&J.push({id:ne.id,name:ne.name||"Unnamed Deal",type:"Deal",details:ne.account?.name||"No account",route:`/admin/deals/info?id=${ne.id}`})}),Array.isArray(W)&&W.forEach(ne=>{const pe=(ne.name||"").toLowerCase(),we=(ne.email||"").toLowerCase(),ye=(ne.phone||"").toLowerCase(),Te=(ne.website||"").toLowerCase();(pe.includes(ue)||we.includes(ue)||ye.includes(ue)||Te.includes(ue))&&J.push({id:ne.id,name:ne.name||"Unnamed Account",type:"Account",details:ne.email||ne.phone||"No contact info",route:"/admin/accounts"})}),J.slice(0,10)}catch(ue){return console.error("Error in search:",ue),[]}},[_,A,R,W]),B=ue=>{ue.route&&(e(ue.route),E(""))},X=g.useCallback(async()=>{j(!0),S(null);try{const[ue,J,ne,pe,we,ye,Te]=await Promise.all([oe.get("/leads/admin/getLeads").catch(k=>(console.error("Error fetching leads:",k),{data:[]})),oe.get("/deals/admin/fetch-all").catch(k=>(console.error("Error fetching deals:",k),{data:[]})),oe.get("/accounts/admin/fetch-all").catch(k=>(console.error("Error fetching accounts:",k),{data:[]})),oe.get("/tasks/all").catch(k=>(console.error("Error fetching tasks:",k),{data:[]})),oe.get("/meetings/admin/fetch-all").catch(k=>(console.error("Error fetching meetings:",k),{data:[]})),oe.get("/calls/admin/fetch-all").catch(k=>(console.error("Error fetching calls:",k),{data:[]})),oe.get("/logs/read-all").catch(k=>(console.error("Error fetching logs:",k),{data:[]}))]),Ae=Array.isArray(ue.data)?ue.data:[],Pe=Array.isArray(J.data)?J.data:[],$=Array.isArray(ne.data)?ne.data:[],Ne=Array.isArray(pe.data)?pe.data:[],fe=Array.isArray(we.data)?we.data:[],O=Array.isArray(ye.data)?ye.data:[],ce=Array.isArray(Te.data)?Te.data:[];console.log("=== RAW DEALS API RESPONSE ==="),console.log("Deals count:",Pe.length),Pe.length>0&&(console.log("First deal sample (raw):",JSON.stringify(Pe[0],null,2)),console.log("First deal keys:",Object.keys(Pe[0]))),T(Ae),U(Pe),I($);const de=Ae.filter(k=>k.status&&!["Lost","Converted"].includes(k.status)).length,Ce=Ne.filter(k=>!k.dueDate||k.status==="Completed"?!1:new Date(k.dueDate)<new Date).length;r({activeLeads:de,totalDeals:Pe.length,activeAccounts:$.length,overdueTasks:Ce});const Ee=[...Ae].sort((k,Z)=>new Date(Z.created_at||0)-new Date(k.created_at||0)).slice(0,5);i(Ee);const Ge=[...Pe].sort((k,Z)=>new Date(Z.created_at||0)-new Date(k.created_at||0)).slice(0,5);l(Ge);const Je=new Date,We=[];O.forEach(k=>{const Z=k.due_date||k.call_time,re=(k.status||"").toUpperCase();if(Z){const be=new Date(Z);re==="COMPLETED"||re==="MISSED"||re==="NOT_HELD"||re==="HELD"||We.push({type:"Call",title:k.subject||"Untitled Call",assignedTo:k.assigned_to||(k.call_assign_to?`${k.call_assign_to.first_name||""} ${k.call_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:Z,priority:(k.priority||"MEDIUM").toUpperCase(),id:k.id,activityType:"call",fullData:k})}}),fe.forEach(k=>{const Z=k.dueDate||k.start_time,re=(k.status||"").toUpperCase();if(Z){const be=new Date(Z);re==="COMPLETED"||re==="CANCELLED"||re==="DONE"||We.push({type:"Meeting",title:k.subject||k.activity||"Untitled Meeting",assignedTo:k.assignedTo||(k.meet_assign_to?`${k.meet_assign_to.first_name||""} ${k.meet_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:Z,priority:(k.priority||"MEDIUM").toUpperCase(),id:k.id,activityType:"meeting",fullData:k})}});const Ke={HIGH:1,MEDIUM:2,LOW:3},He=We.sort((k,Z)=>{const re=Ke[k.priority]||3,be=Ke[Z.priority]||3;if(re!==be)return re-be;const z=new Date(k.scheduledDate||0),ee=new Date(Z.scheduledDate||0);return z-ee}).slice(0,5);d(He),h(Pe),console.log("=== ALL DEALS DATA ==="),console.log("Total deals:",Pe.length);const Se=Pe.filter(k=>(k.stage||"").toUpperCase()==="CLOSED_WON");console.log("CLOSED_WON deals:",Se.length),Se.length>0?(console.log("=== CLOSED_WON DEALS DETAILS ==="),Se.forEach((k,Z)=>{let re=k.amount;re&&typeof re=="object"?re.toString?re=parseFloat(re.toString()):re=parseFloat(re):re=parseFloat(re)||0,console.log(`Deal ${Z+1}:`,{id:k.id,name:k.name,stage:k.stage,stage_upper:(k.stage||"").toUpperCase(),amount:k.amount,amount_parsed:re,amount_type:typeof k.amount,close_date:k.close_date,close_date_type:typeof k.close_date,close_date_value:k.close_date?new Date(k.close_date):null,has_close_date:!!k.close_date,has_amount:re>0,all_keys:Object.keys(k),full_deal:k})})):(console.log(" No CLOSED_WON deals found!"),console.log("All deal stages:",Pe.map(k=>k.stage))),x(Pe);const Ve=[...ce].sort((k,Z)=>new Date(Z.timestamp||0)-new Date(k.timestamp||0));b(Ve)}catch(ue){console.error("Error fetching dashboard data:",ue),S("Failed to load dashboard data. Please refresh the page.")}finally{j(!1)}},[]);g.useEffect(()=>(document.title="Dashboard | Sari-Sari CRM",console.log("AdminDashboard mounted, fetching data..."),X(),q.current=setInterval(()=>{console.log("Auto-refreshing dashboard data..."),X(),H(new Date)},3e4),()=>{q.current&&clearInterval(q.current)}),[X]),g.useEffect(()=>{if(!t||!t.id)return;let ue=0;const J=3;let ne=null;const pe=()=>{const we=window.location.protocol==="https:"?"wss:":"ws:",ye=window.location.hostname==="localhost"?"localhost:8000":window.location.host,Te=`${we}//${ye}/ws/notifications?user_id=${t.id}`;try{const Ae=new WebSocket(Te);ae.current=Ae,Ae.onopen=()=>{console.log(" WebSocket connected for dashboard updates"),ue=0},Ae.onmessage=Pe=>{try{const $=JSON.parse(Pe.data);console.log(" Real-time notification received:",$),$.event&&["new_task","task_updated","new_lead","lead_updated","new_deal","deal_updated","new_account","account_updated","new_meeting","meeting_updated","new_call","call_updated"].includes($.event)&&(console.log(" Refreshing dashboard due to:",$.event),X(),H(new Date))}catch($){console.error("Error parsing WebSocket message:",$)}},Ae.onerror=Pe=>{ue===0&&console.warn(" WebSocket connection unavailable (this is optional)")},Ae.onclose=()=>{ue<J&&(ue++,ne=setTimeout(()=>{t&&t.id&&pe()},5e3))}}catch{console.warn(" WebSocket not available (optional feature)")}};return pe(),()=>{ne&&clearTimeout(ne),ae.current&&(ae.current.close(),ae.current=null)}},[t,X]);const le=[{icon:hV,title:"Active Leads",value:n.activeLeads,color:"text-blue-600",bgColor:"bg-blue-50",onClick:()=>e("/admin/leads")},{icon:obe,title:"Total Deals",value:n.totalDeals,color:"text-yellow-600",bgColor:"bg-yellow-50",onClick:()=>e("/admin/deals")},{icon:lbe,title:"Active Account",value:n.activeAccounts,color:"text-green-600",bgColor:"bg-green-50",onClick:()=>e("/admin/accounts")},{icon:mV,title:"Overdue Tasks",value:n.overdueTasks,color:"text-red-600",bgColor:"bg-red-50",onClick:()=>e("/admin/tasks")}];return console.log("AdminDashboard rendering, loading:",w,"error:",C),a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative w-full",children:[w&&a.jsx(yt,{}),a.jsxs("div",{className:"max-w-screen-2xl mx-auto",children:[C&&a.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:a.jsx("p",{className:"font-medium",children:C})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 mb-8",children:[a.jsxs("div",{className:"lg:col-span-9 flex flex-col space-y-4",children:[a.jsx(Abe,{searchQuery:_,onSearchChange:E,searchResults:K,onSearchResultClick:B}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-4 gap-4",children:le.map(ue=>a.jsx(Lbe,{...ue,loading:w},ue.title))})]}),a.jsx("div",{className:"lg:col-span-3",children:a.jsx(Tbe,{logs:p,loading:w})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsx(kbe,{revenueData:v,loading:w})}),a.jsx("div",{children:a.jsx(Pbe,{pipelineData:m,loading:w})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx(_S,{title:"Latest Leads",children:s.length>0?s.map((ue,J)=>a.jsx(Dbe,{...ue},ue.id||J)):a.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No leads found"})}),a.jsx(_S,{title:"Latest Deals",children:w?a.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mb-2"}),a.jsx("div",{className:"text-sm text-gray-500",children:"Loading deals..."})]}):o.length>0?o.map((ue,J)=>a.jsx(Obe,{...ue},ue.id||J)):a.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No deals found"})}),a.jsx(_S,{title:"Upcoming Activities",children:c.length>0?c.map((ue,J)=>a.jsx(Mbe,{...ue},ue.id||J)):a.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No upcoming activities"})})]})]})]})};function Et({totalItems:e=0,pageSize:t=10,currentPage:n=1,onPrev:r,onNext:s,className:i="",label:o="records"}){const l=e===0?1:Math.ceil(e/t),c=e===0?0:(n-1)*t+1,d=Math.min(n*t,e),m=n<=1||e===0,h=n>=l||e===0,p="inline-flex items-center gap-1 px-3 sm:px-4 py-2 text-sm font-semibold rounded-lg transition focus:outline-none focus:ring-2 focus:ring-offset-1",b="bg-black text-white hover:bg-gray-900",v="bg-gray-200 text-gray-500 cursor-not-allowed focus:ring-transparent";return a.jsxs("div",{className:`flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 ${i}`,children:[a.jsxs("div",{className:"text-sm text-gray-600 font-medium text-center sm:text-left w-full sm:w-auto",children:["Showing ",e===0?0:c,"-",d," of ",e," ",o]}),a.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-end w-full sm:w-auto",children:[a.jsxs("button",{type:"button",onClick:r,disabled:m,className:`${p} ${m?v:b}`,children:[a.jsx(Nae,{className:"text-base"}),"Prev"]}),a.jsxs("div",{className:"text-sm font-semibold text-white bg-gray-900 border border-gray-900 shadow-sm px-3 py-1.5 rounded-full",children:["Page ",e===0?0:n," of"," ",e===0?0:l]}),a.jsxs("button",{type:"button",onClick:s,disabled:h,className:`${p} ${h?v:b}`,children:["Next",a.jsx(jae,{className:"text-base"})]})]})]})}const AS=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Active"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Former"}],ES={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"PROSPECT",territory_id:"",assigned_to:""},as=e=>e?e.toUpperCase():"",TS=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",$be=e=>{switch(as(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},Rbe=e=>{switch(as(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}},Jc=10;function zbe(){const e=rt();g.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[t,n]=g.useState(!1),[r,s]=g.useState(!1),[i,o]=g.useState(!1),[l,c]=g.useState(null),[d,m]=g.useState(null),[h,p]=g.useState(ES),[b,v]=g.useState(null),[x,w]=g.useState([]),[j,C]=g.useState(!1),[S,_]=g.useState([]),[E,A]=g.useState(null),[T,R]=g.useState([]),[U,W]=g.useState("Filter by Status"),[I,M]=g.useState(""),[H,q]=g.useState(null),[ae,K]=g.useState(!1),[B,X]=g.useState(1),[le,ue]=g.useState("Overview"),[J,ne]=g.useState(""),[pe,we]=g.useState(!1),ye=g.useCallback(async(P=null)=>{C(!0);try{const he=await oe.get("/accounts/admin/fetch-all"),te=[...Array.isArray(he.data)?he.data:[]].sort((ve,je)=>{const Ie=ve?.created_at||ve?.updated_at||0,tt=je?.created_at||je?.updated_at||0;return new Date(tt)-new Date(Ie)});if(w(te),console.log("Fetch from backend: ",he.data),P){const ve=te.find(je=>je.id===P);v(ve||null)}}catch(he){console.error(he),w([]),he.response?.status===403?Q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):Q.error("Failed to fetch accounts. Please try again later.")}finally{C(!1)}},[v]),Te=g.useCallback(async()=>{try{const P=await oe.get("/users/all");_(Array.isArray(P.data)?P.data:[])}catch(P){console.error(P),P.response?.status===403&&Q.warn("Unable to load users for assignment (permission denied).")}},[]),Ae=g.useCallback(async()=>{try{const P=await oe.get("/territories/fetch");R(Array.isArray(P.data)?P.data:[])}catch(P){console.error(P),P.response?.status===403&&Q.warn("Unable to load territories (permission denied).")}},[]);g.useEffect(()=>{ye(),Te(),Ae()},[ye,Te,Ae]),g.useEffect(()=>{b&&ne(as(b.status)||"PROSPECT")},[b]);const Pe=x.length,$=g.useMemo(()=>x.filter(P=>P.status?.toLowerCase()==="customer").length,[x]),Ne=g.useMemo(()=>x.filter(P=>P.status?.toLowerCase()==="prospect").length,[x]),fe=g.useMemo(()=>x.filter(P=>P.status?.toLowerCase()==="partner").length,[x]),O=g.useMemo(()=>x.filter(P=>P.status?.toLowerCase()==="active").length,[x]),ce=g.useMemo(()=>x.filter(P=>P.status?.toLowerCase()==="inactive").length,[x]),de=g.useMemo(()=>x.filter(P=>P.status?.toLowerCase()==="former").length,[x]),Ce=g.useMemo(()=>[{title:"Total",value:Pe,icon:en,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:$,icon:Xi,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:Ne,icon:Ln,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:fe,icon:Qt,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:O,icon:Xi,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:ce,icon:Zi,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:de,icon:Zi,color:"text-orange-600",bgColor:"bg-orange-100"}],[Pe,$,Ne,fe,O,ce,de]),Ee=g.useMemo(()=>{const P=I.trim().toLowerCase(),he=U.trim().toUpperCase();return x.filter(G=>{const te=[G?.name,G?.website,G?.industry,G?.territory?.name,G?.phone_number],ve=P===""||te.some(Ie=>Ie==null?!1:Ie.toString().toLowerCase().includes(P)),je=he==="FILTER BY STATUS"||as(G.status)===he;return ve&&je})},[x,I,U]),Ge=Math.max(1,Math.ceil(Ee.length/Jc)||1);g.useEffect(()=>{X(1)},[I,U]),g.useEffect(()=>{X(P=>{const he=Math.max(1,Math.ceil(Ee.length/Jc)||1);return P>he?he:P})},[Ee.length]);const Je=g.useMemo(()=>{const P=(B-1)*Jc;return Ee.slice(P,P+Jc)},[Ee,B]);Ee.length===0||(B-1)*Jc+1,Math.min(B*Jc,Ee.length);const We=()=>X(P=>Math.max(P-1,1)),Ke=()=>X(P=>Math.min(P+1,Ge)),He=P=>{v(P),ue("Overview"),ne(as(P?.status)||"PROSPECT")},Se=()=>v(null),Ve=P=>{P.target.id==="accountModalBackdrop"&&!ae&&Se()},k=()=>{n(!1),s(!1),m(null),p(ES),o(!1),A(null)},Z=P=>{P.target.id==="modalBackdrop"&&k()},re=P=>P?new Date(P).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",be=P=>{const{name:he,value:G}=P.target;p(te=>({...te,[he]:G}))},z=()=>{p(ES),s(!1),m(null),n(!0)},ee=P=>{v(null),console.log("edit: ",P),P.assigned_accs?A(P.assigned_accs):A(null),p({name:P.name||"",website:P.website||"",phone_number:P.phone_number||"",billing_address:P.billing_address||"",shipping_address:P.shipping_address||"",industry:P.industry||"",status:as(P.status)||"PROSPECT",territory_id:P.territory?.id?String(P.territory.id):"",assigned_to:P.assigned_accs?.id?String(P.assigned_accs.id):""}),s(!0),m(P.id),n(!0)},ie=P=>{P&&q({title:"Delete Account",message:a.jsxs("span",{children:["Are you sure you want to permanently delete the account"," ",a.jsx("span",{className:"font-semibold",children:P.name}),"? This action cannot be undone."]}),confirmLabel:"Delete Account",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:P.id,name:P.name}})},V=async()=>{if(!H?.action){q(null);return}const{action:P}=H,{type:he,payload:G,targetId:te,name:ve}=P;K(!0);try{if(he==="create"){o(!0);const je=await oe.post("/accounts/admin",G);Q.success(`Account "${ve}" created successfully.`);const Ie=b?.id||null;k(),await ye(Ie),!b&&je.data?.id}else if(he==="update"){if(!te)throw new Error("Missing account identifier for update.");o(!0),await oe.put(`/accounts/admin/${te}`,G),Q.success(`Account "${ve}" updated successfully.`);const je=b?.id&&b.id===te?te:null;k(),await ye(je),b?.id===te&&v(null)}else if(he==="delete"){if(!te)throw new Error("Missing account identifier for deletion.");const je=b?.id;c(te),await oe.delete(`/accounts/admin/${te}`),Q.success(`Account "${ve}" deleted successfully.`),await ye(je&&je!==te?je:null),je===te&&v(null)}}catch(je){console.error(je);const Ie=he==="create"?"Failed to create account. Please review the details and try again.":he==="update"?"Failed to update account. Please review the details and try again.":"Failed to delete account. Please try again.",tt=je.response?.data?.detail||Ie;Q.error(tt),(he==="create"||he==="update")&&o(!1),he==="delete"&&c(null)}finally{(he==="create"||he==="update")&&o(!1),he==="delete"&&c(null),K(!1),q(null)}},F=()=>{ae||q(null)},se=async()=>{if(!b||!J)return;const P=as(J),he=as(b.status);if(P!==he){we(!0);try{await oe.put(`/accounts/admin/${b.id}`,{status:P}),Q.success(`Account status updated to ${TS(P)}`),w(G=>G.map(te=>te.id===b.id?{...te,status:P}:te)),v(null)}catch(G){console.error(G);const te=G.response?.data?.detail||"Failed to update account status. Please try again.";Q.error(te)}finally{we(!1)}}},[xe,ge]=g.useState(!1),Me=P=>{P.preventDefault(),ge(!0);const he=h.name.trim();if(!he){Q.error("Account name is required.");return}if(!h.assigned_to){Q.error("Assigned To is required.");return}const te={name:he,website:h.website?.trim()||null,phone_number:h.phone_number?.trim()||null,billing_address:h.billing_address?.trim()||null,shipping_address:h.shipping_address?.trim()||null,industry:h.industry?.trim()||null,status:h.status||"PROSPECT",territory_id:h.territory_id?Number(h.territory_id):null,assigned_to:h.assigned_to?Number(h.assigned_to):null},ve=r&&d?"update":"create";q({title:ve==="create"?"Confirm New Account":"Confirm Update",message:ve==="create"?a.jsxs("span",{children:["Are you sure you want to create the account"," ",a.jsx("span",{className:"font-semibold",children:he}),"?"]}):a.jsxs("span",{children:["Save changes to the account"," ",a.jsx("span",{className:"font-semibold",children:he}),"?"]}),confirmLabel:ve==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:ve,payload:te,targetId:d||null,name:he}})},De=[{label:"Filter by Status",value:"Filter by Status"},...AS.map(P=>({label:P.label,value:P.value}))],et=H?.action?.type==="delete"?H.action.targetId:null,gt=b&&(l===b.id||et===b.id),Nt=b&&l===b.id,Pt=b?$be(b.status):"",dn=b?a.jsx("div",{id:"accountModalBackdrop",onClick:Ve,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:P=>P.stopPropagation(),children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),a.jsx("button",{onClick:Se,className:"text-gray-400 hover:text-white cursor-pointer",children:a.jsx(wn,{size:25})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:b.name}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${Pt}`,children:TS(b.status)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>ee(b),disabled:H?.action?.type==="update"&&H.action.targetId===b.id,children:[a.jsx(Rn,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>ie(b),disabled:!!gt,children:Nt?"Deleting...":a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"mr-2"}),"Delete"]})})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(P=>a.jsx("button",{onClick:()=>ue(P),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${le===P?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:P},P))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[le==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Website:"}),a.jsx("p",{children:b.website?a.jsx("a",{href:b.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:b.website}):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Industry:"}),a.jsx("p",{children:b.industry||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Territory:"}),a.jsx("p",{children:b.territory?.name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Phone Number:"}),a.jsx("p",{children:b.phone_number||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Billing Address:"}),a.jsx("p",{children:b.billing_address||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),a.jsx("p",{children:b.shipping_address||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:b.assigned_accs?`${b.assigned_accs.first_name} ${b.assigned_accs.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:b.acc_creator?`${b.acc_creator.first_name} ${b.acc_creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:re(b.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:re(b.updated_at)||"N/A"})]})]})}),le==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:x.notes||"No notes available."})]})]}),le==="Activities"&&a.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:pt,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:ft,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((P,he)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[a.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-gray-600 mt-1",children:a.jsx(P.icon,{size:24})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-gray-900 break-words",children:P.title}),a.jsx("p",{className:"text-sm text-gray-500 break-words",children:P.desc}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),a.jsx("p",{className:"text-sm text-gray-700 break-words",children:P.user})]})]})]}),a.jsx("p",{className:"text-sm text-gray-500 break-words",children:P.date})]},he))]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Account"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(pt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Account"}}}),children:[a.jsx(ft,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Account"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(kn,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:J||as(b?.status)||"PROSPECT",onChange:P=>ne(P.target.value),children:AS.map(P=>a.jsx("option",{value:P.value,children:P.label},P.value))}),a.jsx("button",{onClick:se,disabled:pe||!J||as(J)===as(b?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${pe||!J||as(J)===as(b?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:pe?"Updating...":"Update"})]})]})]})]})]})}):null,jn=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[j&&a.jsx(yt,{message:"Loading accounts..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(en,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{z(),ge(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(Rt,{className:"mr-2"})," Add Account"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ce.map(P=>a.jsx(Ube,{...P},P.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search accounts",value:I,onChange:P=>M(P.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:U,onChange:P=>W(P.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:De.map(P=>a.jsx("option",{value:P.value,children:P.label},P.value))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4",children:"Industry"}),a.jsx("th",{className:"py-3 px-4",children:"Territory"}),a.jsx("th",{className:"py-3 px-4",children:"Phone"})]})}),a.jsx("tbody",{children:j?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"Loading accounts..."})}):Ee.length>0?Je.map(P=>a.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>He(P),children:[a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:P.name}),a.jsx("div",{className:"text-gray-500 text-xs break-all",children:P.website||"--"})]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${Rbe(P.status)}`,children:TS(P.status)})}),a.jsx("td",{className:"py-3 px-4 text-sm",children:P.industry||"--"}),a.jsx("td",{className:"py-3 px-4 text-sm",children:P.territory?.name||"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[a.jsx(pt,{className:"text-gray-500"}),a.jsx("span",{children:P.phone_number||"--"})]})})]},P.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"No accounts found."})})})]})}),a.jsx(Et,{className:"mt-4",totalItems:Ee.length,pageSize:Jc,currentPage:B,onPrev:We,onNext:Ke,label:"accounts"})]}),oa=t?a.jsx("div",{id:"modalBackdrop",onClick:Z,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto hide-scrollbar max-h-[90vh]",onClick:P=>P.stopPropagation(),children:[a.jsx("button",{onClick:()=>{k(),ge(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:i||ae,children:a.jsx(St,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:r?"Edit Account":"Add New Account"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:Me,noValidate:!0,children:[a.jsx("div",{className:"md:col-span-2",children:a.jsx(xm,{label:"Name",name:"name",value:h.name,onChange:be,placeholder:"Company name",required:!0,isSubmitted:xe})}),a.jsx(xm,{label:"Website",name:"website",value:h.website,onChange:be,placeholder:"https://example.com",disabled:i}),a.jsx(xm,{label:"Phone Number",name:"phone_number",value:h.phone_number,onChange:be,placeholder:"09xx xxx xxxx",type:"tel",disabled:i}),a.jsx(xm,{label:"Industry",name:"industry",value:h.industry,onChange:be,placeholder:"Industry",disabled:i}),a.jsx(xm,{label:"Billing Address",name:"billing_address",value:h.billing_address,onChange:be,placeholder:"Billing address",disabled:i}),a.jsx(xm,{label:"Shipping Address",name:"shipping_address",value:h.shipping_address,onChange:be,placeholder:"Shipping address",disabled:i}),a.jsx(S$,{label:"Status",name:"status",value:h.status,onChange:be,options:[{value:"",label:"Select status"},...AS],required:!0,disabled:i}),a.jsx(Fbe,{label:"Assigned To",value:h.assigned_to,onChange:P=>{const he=S.find(te=>String(te.id)===String(P));A(he);let G=null;he&&he.assigned_territory&&he.assigned_territory.length===1&&(G=he.assigned_territory[0].id),p(te=>({...te,assigned_to:P,territory_id:G}))},items:S||[],getLabel:P=>`${P?.first_name??""} ${P?.last_name??""} (${P?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:xe,disabled:i||S.length===0}),a.jsx(S$,{label:"Territory",name:"territory_id",value:h.territory_id||"",onChange:be,options:[{value:"",label:E?E.assigned_territory&&E.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"},...E&&E.assigned_territory&&E.assigned_territory.map(P=>({value:String(P.id),label:P.name}))||[]],disabled:i||!E||!E.assigned_territory||E.assigned_territory.length===0}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[a.jsx("button",{type:"button",onClick:()=>{k(),ge(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i||ae,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i||ae,children:i?"Saving...":r?"Update Account":"Save Account"})]})]})]})}):null,Jn=H?a.jsx(Hbe,{open:!0,title:H.title,message:H.message,confirmLabel:H.confirmLabel,cancelLabel:H.cancelLabel,variant:H.variant,onConfirm:V,onCancel:F,loading:ae}):null;return a.jsxs(a.Fragment,{children:[jn,dn,oa,Jn]})}function Ube({icon:e,title:t,value:n,color:r="text-blue-600",bgColor:s="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${s} ${r} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function xm({label:e,name:t,value:n,onChange:r,placeholder:s,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const m=d&&!n?.trim();return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:r,placeholder:s,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${m?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function S$({label:e,name:t,value:n,onChange:r,options:s,required:i=!1,disabled:o=!1}){return a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:n??"",onChange:r,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:s.map(l=>a.jsx("option",{value:l.value,children:l.label},l.value))})]})}function Fbe({label:e,items:t=[],value:n="",onChange:r,getLabel:s,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const m=d&&c&&!n;return a.jsxs("div",{className:l,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(Bbe,{items:t,value:n??"",onChange:r,getLabel:s,placeholder:i,disabled:o,hasError:m})]})}function Bbe({items:e=[],value:t="",onChange:n,getLabel:r,placeholder:s="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=g.useState(!1),[m,h]=g.useState(""),p=g.useRef(null),b=e.find(w=>String(w.id)===String(t)),v=b?r(b):"",x=g.useMemo(()=>{const w=m.trim().toLowerCase();return(w?e.filter(C=>(r(C)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,m,r,o]);return g.useEffect(()=>{const w=j=>{p.current&&!p.current.contains(j.target)&&d(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),g.useEffect(()=>{c||h("")},[c]),a.jsxs("div",{ref:p,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:c?m:v,placeholder:s,onFocus:()=>!i&&d(!0),onChange:w=>{h(w.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:x.length>0?x.map(w=>{const j=String(w.id),C=r(w),S=String(t)===j;return a.jsx("button",{type:"button",onClick:()=>{n(j),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:C||"--"},j)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function Hbe({open:e,title:t,message:n,confirmLabel:r,cancelLabel:s="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:s}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":r})]})]})})}function vx(e){return it({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M4 2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zm3 0a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zm3.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zM4 5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zM7.5 5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm2.5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zM4.5 8a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm2.5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zm3.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5z"},child:[]},{tag:"path",attr:{d:"M2 1a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1zm11 0H3v14h3v-2.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5V15h3z"},child:[]}]})(e)}const zh=10,LS={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:""},ym=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),Uh=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function Gbe(){const e=rt();g.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[t,n]=g.useState([]),[r,s]=g.useState(!1),[i,o]=g.useState([]),[l,c]=g.useState([]),[d,m]=g.useState(null),[h,p]=g.useState(!1),[b,v]=g.useState(!1),[x,w]=g.useState(!1),[j,C]=g.useState(null),[S,_]=g.useState(!1),[E,A]=g.useState(null),[T,R]=g.useState(LS),[U,W]=g.useState(""),[I,M]=g.useState("Filter by Accounts"),[H,q]=g.useState(null),[ae,K]=g.useState("Overview"),[B,X]=g.useState(1),le=g.useCallback(async(ee=null)=>{s(!0);try{const ie=await oe.get("/contacts/admin/fetch-all"),F=[...Array.isArray(ie.data)?ie.data:[]].sort((se,xe)=>{const ge=se?.created_at||se?.updated_at||0,Me=xe?.created_at||xe?.updated_at||0;return new Date(Me)-new Date(ge)});if(n(F),ee){const se=F.find(xe=>xe.id===ee);m(se||null)}}catch(ie){console.error(ie),n([]),ie.response?.status===403?Q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):Q.error("Failed to fetch contacts. Please try again later.")}finally{s(!1)}},[m]),ue=g.useCallback(async()=>{try{const ee=await oe.get("/accounts/admin/fetch-all"),V=[...Array.isArray(ee.data)?ee.data:[]].sort((F,se)=>(F?.name||"").localeCompare(se?.name||""));o(V)}catch(ee){console.error(ee),o([]),ee.response?.status===403&&Q.warn("Unable to load accounts (permission denied).")}},[]),J=g.useCallback(async()=>{try{const ee=await oe.get("/users/all"),V=[...Array.isArray(ee.data)?ee.data:[]].sort((F,se)=>ym(F).localeCompare(ym(se)));c(V)}catch(ee){console.error(ee),c([]),ee.response?.status===403&&Q.warn("Unable to load users for assignment (permission denied).")}},[]);g.useEffect(()=>{le(),ue(),J()},[le,ue,J]);const ne=g.useMemo(()=>{const ee=new Map;i.forEach(V=>{V?.id&&V?.name&&ee.set(String(V.id),V.name)}),t.forEach(V=>{V?.account_id&&V?.account?.name&&ee.set(String(V.account_id),V.account.name)});const ie=Array.from(ee.entries()).sort((V,F)=>V[1].localeCompare(F[1])).map(([V,F])=>({value:V,label:F}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...ie]},[i,t]),pe=g.useMemo(()=>{const ee=U.trim().toLowerCase(),ie=I.trim();return t.filter(V=>{const F=[V?.first_name,V?.last_name,V?.email,V?.title,V?.department,V?.account?.name,V?.account?.status,V?.work_phone,V?.mobile_phone_1,V?.mobile_phone_2,V?.assigned_contact?.first_name,V?.assigned_contact?.last_name,V?.contact_creator?.first_name,V?.contact_creator?.last_name,V?.notes,Uh(V?.created_at),Uh(V?.updated_at)],se=ee===""||F.some(ge=>ge==null?!1:ge.toString().toLowerCase().includes(ee)),xe=ie==="Filter by Accounts"||String(V.account_id)===ie;return se&&xe})},[t,U,I]),we=Math.max(1,Math.ceil(pe.length/zh)||1);g.useEffect(()=>{X(1)},[U,I]),g.useEffect(()=>{X(ee=>{const ie=Math.max(1,Math.ceil(pe.length/zh)||1);return ee>ie?ie:ee})},[pe.length]);const ye=g.useMemo(()=>{const ee=(B-1)*zh;return pe.slice(ee,ee+zh)},[pe,B]),Te=()=>X(ee=>Math.max(ee-1,1)),Ae=()=>X(ee=>Math.min(ee+1,we)),Pe=g.useCallback(()=>{p(!1),v(!1),A(null),R(LS),w(!1),Ce(!1)},[]),$=ee=>{ee.target.id==="modalBackdrop"&&!x&&!S&&Pe()},Ne=ee=>{const{name:ie,value:V}=ee.target;R(F=>({...F,[ie]:V}))},fe=()=>{R(LS),v(!1),A(null),p(!0)},O=ee=>{ee&&(R({first_name:ee.first_name||"",last_name:ee.last_name||"",account_id:ee.account_id?String(ee.account_id):"",title:ee.title||"",department:ee.department||"",email:ee.email||"",work_phone:ee.work_phone||"",mobile_phone_1:ee.mobile_phone_1||"",mobile_phone_2:ee.mobile_phone_2||"",notes:ee.notes||"",assigned_to:ee.assigned_to?String(ee.assigned_to):""}),v(!0),A(ee.id),p(!0),m(null))},ce=ee=>{if(!ee)return;const ie=ym(ee)||"this contact";C({title:"Delete Contact",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:ie}),"? This action cannot be undone."]}),confirmLabel:"Delete Contact",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:ee.id,name:ie}})},[de,Ce]=g.useState(!1),Ee=ee=>{ee.preventDefault(),Ce(!0);const ie=T.first_name.trim(),V=T.last_name.trim();if(!ie||!V){Q.error("First name and last name are required.");return}if(!T.account_id){Q.error("Account is required.");return}if(!T.assigned_to){Q.error("Assigned To is required.");return}const se=T.email?.trim();if(!se){Q.error("Email is required.");return}if(!se.includes("@")){Q.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(se)){Q.error("Please enter a valid email address.");return}const ge={first_name:ie,last_name:V,account_id:Number(T.account_id),title:T.title?.trim()||null,department:T.department?.trim()||null,email:T.email?.trim().toLowerCase()||null,work_phone:T.work_phone?.trim()||null,mobile_phone_1:T.mobile_phone_1?.trim()||null,mobile_phone_2:T.mobile_phone_2?.trim()||null,notes:T.notes?.trim()||null,assigned_to:T.assigned_to?Number(T.assigned_to):null},Me=b&&E?"update":"create",De=`${ie} ${V}`.trim();C({title:Me==="create"?"Confirm New Contact":"Confirm Update",message:Me==="create"?a.jsxs("span",{children:["Are you sure you want to add"," ",a.jsx("span",{className:"font-semibold",children:De})," to your contacts?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:De}),"?"]}),confirmLabel:Me==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:Me,payload:ge,targetId:E||null,name:De}})},Ge=async()=>{if(!j?.action){C(null);return}const{action:ee}=j,{type:ie,payload:V,targetId:F,name:se}=ee;_(!0);try{if(ie==="create"){w(!0),await oe.post("/contacts/admin",V),Q.success(`Contact "${se}" created successfully.`);const xe=d?.id||null;Pe(),await le(xe)}else if(ie==="update"){if(!F)throw new Error("Missing contact identifier for update.");w(!0),await oe.put(`/contacts/admin/${F}`,V),Q.success(`Contact "${se}" updated successfully.`);const xe=d?.id&&d.id===F?F:d?.id||null;Pe(),await le(xe),d?.id===F&&m(null)}else if(ie==="delete"){if(!F)throw new Error("Missing contact identifier for deletion.");const xe=d?.id;q(F),await oe.delete(`/contacts/admin/${F}`),Q.success(`Contact "${se}" deleted successfully.`),await le(xe&&xe!==F?xe:null),xe===F&&m(null)}}catch(xe){console.error(xe);const ge=ie==="create"?"Failed to create contact. Please review the details and try again.":ie==="update"?"Failed to update contact. Please review the details and try again.":"Failed to delete contact. Please try again.",Me=xe.response?.data?.detail||ge;Q.error(Me)}finally{(ie==="create"||ie==="update")&&w(!1),ie==="delete"&&q(null),_(!1),C(null)}},Je=()=>{S||C(null)},We=ee=>{m(ee),K("Overview")},Ke=()=>m(null),He=ee=>{ee.target.id==="contactModalBackdrop"&&!S&&Ke()},Se=j?.action?.type==="delete"?j.action.targetId:null,Ve=d&&(H===d.id||Se===d.id),k=d&&H===d.id,Z=d?a.jsx("div",{id:"contactModalBackdrop",onClick:He,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:ee=>ee.stopPropagation(),children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),a.jsx("button",{onClick:Ke,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:a.jsx(wn,{size:25})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:ym(d)||"Unnamed contact"})}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>O(d),disabled:S||j?.action?.type==="update"&&j.action.targetId===d.id,children:[a.jsx(Rn,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>ce(d),disabled:!!Ve,children:k?"Deleting...":a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"mr-2"}),"Delete"]})})]})]}),a.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:a.jsx("p",{className:"text-sm text-gray-500",children:d.account?.name||"No associated account"})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(ee=>a.jsx("button",{onClick:()=>K(ee),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${ae===ee?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:ee},ee))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[ae==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Contact Name:"}),a.jsx("p",{children:ym(d)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Title:"}),a.jsx("p",{children:d.title||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:d.email?a.jsx("a",{href:`mailto:${d.email}`,className:"text-blue-600 hover:underline break-all",children:d.email}):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Department:"}),a.jsx("p",{children:d.department||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Work Phone:"}),a.jsx("p",{children:d.work_phone||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),a.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),a.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:d.assigned_contact?`${d.assigned_contact.first_name} ${d.assigned_contact.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:d.contact_creator?`${d.contact_creator.first_name} ${d.contact_creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:Uh(d.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:Uh(d.updated_at)||"N/A"})]})]})}),ae==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]})]}),ae==="Activities"&&a.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:pt,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:ft,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((ee,ie)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[a.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-gray-600 mt-1",children:a.jsx(ee.icon,{size:24})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-gray-900 break-words",children:ee.title}),a.jsx("p",{className:"text-sm text-gray-500 break-words",children:ee.desc}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),a.jsx("p",{className:"text-sm text-gray-700 break-words",children:ee.user})]})]})]}),a.jsx("p",{className:"text-sm text-gray-500 break-words",children:ee.date})]},ie))]})]}),a.jsx("div",{className:"flex flex-col gap-4",children:a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Contact"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(pt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const ee=encodeURIComponent(d.email),ie=encodeURIComponent(""),V=encodeURIComponent(""),F=`https://mail.google.com/mail/?view=cm&fs=1&to=${ee}&su=${ie}&body=${V}`;window.open(F,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Tn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Contact"}}}),children:[a.jsx(ft,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Contact"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(kn,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]})})]})]})]})}):null,re=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&a.jsx(yt,{message:"Loading contacts..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(en,{className:"mr-2 text-blue-600"})," Contacts Management"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{fe(),Ce(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(Rt,{className:"mr-2"})," Add Contact"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search contacts",value:U,onChange:ee=>W(ee.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:I,onChange:ee=>M(ee.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:ne.map(ee=>a.jsx("option",{value:ee.value,children:ee.label},ee.value??ee.label))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),a.jsx("th",{className:"py-3 px-4",children:"Department"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Created"})]})}),a.jsx("tbody",{children:r?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"Loading contacts..."})}):pe.length>0?ye.map(ee=>{const ie=[{Icon:Tn,value:ee.email,key:"email"},{Icon:pt,value:ee.work_phone,key:"work_phone"},{Icon:xc,value:ee.mobile_phone_1,key:"mobile_phone_1"},{Icon:xc,value:ee.mobile_phone_2,key:"mobile_phone_2"}].filter(V=>!!V.value);return a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>We(ee),children:[a.jsxs("td",{className:"py-3 px-4 align-top",children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:ym(ee)||"--"}),a.jsx("div",{className:"text-xs text-gray-500",children:ee.title||"No title"})]}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[a.jsx(vx,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{className:"break-words",children:ee.account?.name||"--"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",children:ie.length>0?a.jsx("div",{className:"space-y-1 text-gray-700",children:ie.map(({Icon:V,value:F,key:se})=>{const xe=nt.createElement(V,{className:"text-gray-500 flex-shrink-0"});return a.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[xe,a.jsx("span",{children:F})]},se)})}):a.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[a.jsx($n,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{children:ee.department||"--"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[a.jsx(Qt,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{children:ee.assigned_contact?`${ee.assigned_contact.first_name} ${ee.assigned_contact.last_name}`:"Unassigned"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[a.jsx(ft,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{className:"text-xs",children:Uh(ee.created_at)||"--"})]})})]},ee.id)}):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"No contacts found."})})})]})}),a.jsx(Et,{className:"mt-4",totalItems:pe.length,pageSize:zh,currentPage:B,onPrev:Te,onNext:Ae,label:"contacts"})]}),be=h?a.jsx("div",{id:"modalBackdrop",onClick:$,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:ee=>ee.stopPropagation(),children:[a.jsx("button",{onClick:()=>{Pe(),Ce(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:x||S,children:a.jsx(St,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:b?"Edit Contact":"Add New Contact"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:Ee,noValidate:!0,children:[a.jsx(Kl,{label:"First Name",name:"first_name",value:T.first_name,onChange:Ne,placeholder:"First name",required:!0,isSubmitted:de}),a.jsx(Kl,{label:"Last Name",name:"last_name",value:T.last_name,onChange:Ne,placeholder:"Last name",required:!0,isSubmitted:de}),a.jsx(_$,{label:"Account",value:T.account_id,onChange:ee=>R(ie=>({...ie,account_id:ee})),items:i||[],getLabel:ee=>ee?.name??"",placeholder:"Search account...",required:!0,isSubmitted:de,disabled:x||i.length===0}),a.jsx(_$,{label:"Assigned To",value:T.assigned_to,onChange:ee=>R(ie=>({...ie,assigned_to:ee})),items:l||[],getLabel:ee=>`${ee?.first_name??""} ${ee?.last_name??""} (${ee?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:de,disabled:x||l.length===0}),a.jsx(Kl,{label:"Title",name:"title",value:T.title,onChange:Ne,placeholder:"Job title",disabled:x}),a.jsx(Kl,{label:"Department",name:"department",value:T.department,onChange:Ne,placeholder:"Department",disabled:x}),a.jsx(Kl,{label:"Email",name:"email",type:"email",value:T.email,onChange:Ne,placeholder:"example@email.com",required:!0,isSubmitted:de}),a.jsx(Kl,{label:"Work Phone",name:"work_phone",value:T.work_phone,onChange:Ne,placeholder:"09xx xxx xxxx",disabled:x}),a.jsx(Kl,{label:"Mobile Phone 1",name:"mobile_phone_1",value:T.mobile_phone_1,onChange:Ne,placeholder:"09xx xxx xxxx",disabled:x}),a.jsx(Kl,{label:"Mobile Phone 2",name:"mobile_phone_2",value:T.mobile_phone_2,onChange:Ne,placeholder:"09xx xxx xxxx",disabled:x}),a.jsx(Wbe,{label:"Notes",name:"notes",value:T.notes,onChange:Ne,placeholder:"Additional details...",rows:3,disabled:x,className:"md:col-span-2"}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:()=>{Pe(),Ce(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:x||S,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:x||S,children:x?"Saving...":b?"Update Contact":"Save Contact"})]})]})]})}):null,z=j?a.jsx(qbe,{open:!0,title:j.title,message:j.message,confirmLabel:j.confirmLabel,cancelLabel:j.cancelLabel,variant:j.variant,onConfirm:Ge,onCancel:Je,loading:S}):null;return a.jsxs(a.Fragment,{children:[re,Z,be,z]})}function Kl({label:e,name:t,value:n,onChange:r,placeholder:s,type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const m=c&&!n?.trim();return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:r,placeholder:s,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${m?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${d}
        `})]})}function _$({label:e,items:t=[],value:n="",onChange:r,getLabel:s,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const m=d&&c&&!n;return a.jsxs("div",{className:l,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(Vbe,{items:t,value:n??"",onChange:r,getLabel:s,placeholder:i,disabled:o,hasError:m})]})}function Vbe({items:e=[],value:t="",onChange:n,getLabel:r,placeholder:s="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=g.useState(!1),[m,h]=g.useState(""),p=g.useRef(null),b=e.find(w=>String(w.id)===String(t)),v=b?r(b):"",x=g.useMemo(()=>{const w=m.trim().toLowerCase();return(w?e.filter(C=>(r(C)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,m,r,o]);return g.useEffect(()=>{const w=j=>{p.current&&!p.current.contains(j.target)&&d(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),g.useEffect(()=>{c||h("")},[c]),a.jsxs("div",{ref:p,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:c?m:v,placeholder:s,onFocus:()=>!i&&d(!0),onChange:w=>{h(w.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:x.length>0?x.map(w=>{const j=String(w.id),C=r(w),S=String(t)===j;return a.jsx("button",{type:"button",onClick:()=>{n(j),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:C||"--"},j)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function Wbe({label:e,name:t,value:n,onChange:r,placeholder:s,rows:i=3,disabled:o=!1,className:l=""}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:r,placeholder:s,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function qbe({open:e,title:t,message:n,confirmLabel:r,cancelLabel:s="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:s}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":r})]})]})})}function xV({lead:e,onBack:t,fetchLeads:n,onEdit:r,onDelete:s,setSelectedLead:i}){const o=rt(),{leadID:l}=ul(),[c,d]=g.useState(e||null),[m,h]=g.useState("Overview"),[p,b]=g.useState(""),v=c?.status?.toUpperCase()==="QUALIFIED",[x,w]=g.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[j,C]=g.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[S,_]=g.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),E=async()=>{try{if(e){d(e),b(e.status||"New");return}if(!l)return;const W=await oe.get(`/leads/get/${l}`);d(W.data),b(W.data.status||"New"),w({name:W.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:W.data.territory?.id||null,assigned_to:W.data.assigned_to?.id||null,created_by:W.data.creator?.id||null}),C({last_name:W.data.last_name||"",first_name:W.data.first_name||"",account_id:null,title:W.data.title||"",department:W.data.department||"",email:W.data.email||"",work_phone:W.data.work_phone||"",mobile_phone_1:W.data.mobile_phone_1||"",mobile_phone_2:W.data.mobile_phone_2||"",notes:"",assigned_to:W.data.assigned_to?.id||null,created_by:W.data.creator?.id||null}),_({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:W.data.assigned_to?.id||null,created_by:W.data.creator?.id||null})}catch(W){console.error(W)}};g.useEffect(()=>{e?(d(e),b(e.status||"New")):l&&E()},[l,e]);const A=async()=>{try{if(p==="Converted"&&c?.status?.toUpperCase()!=="QUALIFIED"){Q.error("Lead must be Qualified before it can be converted.");return}const W=await oe.put(`/leads/${c.id}/update/status`,{status:p});Q.success("Lead status updated successfully");const I={...c,status:W.data.status};d(I),i&&i(I),n&&n(),t&&t()}catch(W){console.error(W),Q.error("Failed to update lead status")}},T=async W=>{const I={...x,assigned_to:W.assigned_to?.id,billing_address:W.address,shipping_address:W.address,created_by:W.creator?.id,industry:null,name:W.company_name,phone_number:W.work_phone,status:"Prospect",territory_id:W.territory?.id,website:""};console.log("Account data: ",I),console.log("Contact data: ",j),console.log("Deal data: ",S),console.log("Lead data: ",W);try{const H=(await oe.post("/accounts/convertedLead",I)).data.id,q={...j,account_id:H,assigned_to:W.assigned_to?.id,created_by:W.creator?.id,department:W.department,email:W.email,first_name:W.first_name,last_name:W.last_name,mobile_phone_1:W.mobile_phone_1,mobile_phone_2:W.mobile_phone_2,notes:W.notes,title:W.title,work_phone:W.work_phone},K=(await oe.post("/contacts/convertedLead",q)).data.id,B=()=>{switch(S.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},X=S.amount&&S.amount!==""?parseFloat(S.amount):0,le={...S,account_id:H,assigned_to:W.assigned_to?.id,created_by:W.creator?.id,primary_contact_id:K,probability:B(),stage:"Prospecting"},ue=await oe.post("/deals/convertedLead",le),J=await oe.put(`/leads/convert/${W.id}`);i&&i(null),n(),Q.success("Lead converted successfully!"),t()}catch(M){console.error("Error during conversion:",M);const H=M.response?.data?.detail||M.message||"Failed to convert lead. Please try again.";Q.error(H)}},R=W=>{switch((W||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},U=W=>W.toString().toLowerCase().replace(/\b\w/g,I=>I.toUpperCase());return c?a.jsx(a.Fragment,{children:a.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:a.jsxs("div",{className:"flex items-start justify-between w-full",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),a.jsx("button",{onClick:()=>{t?t():o(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:a.jsx(wn,{size:25})})]})}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[c.first_name," ",c.last_name]}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${R(c.status)}`,children:U(c.status||"New")}),a.jsx("div",{className:"flex flex-col",children:a.jsx("button",{onClick:()=>T(c),disabled:!v,title:v?"Convert Lead":"Lead must be Qualified before converting",className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2
      ${v?"bg-green-600 hover:bg-green-700 text-white focus:ring-green-400":"bg-gray-200 text-gray-400 cursor-not-allowed"}
    `,children:"Convert"})})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{type:"button",onClick:()=>{r&&c&&r(c)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[a.jsx(pn,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{type:"button",onClick:()=>{s&&c&&s(c)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[a.jsx(jt,{className:"mr-2"}),"Delete"]})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-4 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(W=>a.jsx("button",{onClick:()=>h(W),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${m===W?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:W},W))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[m==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Name:"}),a.jsxs("p",{children:[c.first_name," ",c.last_name||"N/A"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Company:"}),a.jsx("p",{children:c.company_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Job Title:"}),a.jsx("p",{children:c.title||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Department:"}),a.jsx("p",{children:c.department||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:c.email||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Territory:"}),a.jsx("p",{children:c.territory?.name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:c.assigned_to?`${c.assigned_to.first_name} ${c.assigned_to.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:c.creator?`${c.creator.first_name} ${c.creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Work Phone:"}),a.jsx("p",{children:c.work_phone||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),a.jsx("p",{children:c.mobile_phone_1||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),a.jsx("p",{children:c.mobile_phone_2||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Source:"}),a.jsx("p",{children:c.source||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Address:"}),a.jsx("p",{children:c.address||"N/A"})]})]})}),m==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:c.notes||"No notes available."})]})]}),m==="Activities"&&a.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:pt,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:ft,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((W,I)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[a.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-gray-600 mt-1",children:a.jsx(W.icon,{size:24})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-gray-900 break-words",children:W.title}),a.jsx("p",{className:"text-sm text-gray-500 break-words",children:W.desc}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),a.jsx("p",{className:"text-sm text-gray-700 break-words",children:W.user})]})]})]}),a.jsx("p",{className:"text-sm text-gray-500 break-words",children:W.date})]},I))]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>o("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Lead"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(pt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!c?.email){alert("No email address available");return}const W=encodeURIComponent(c.email),I=encodeURIComponent(""),M=encodeURIComponent(""),H=`https://mail.google.com/mail/?view=cm&fs=1&to=${W}&su=${I}&body=${M}`;window.open(H,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Tn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>o("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Lead"}}}),children:[a.jsx(ft,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>o("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Lead"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(kn,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:p,onChange:W=>b(W.target.value),children:[a.jsx("option",{value:"New",children:"New"}),a.jsx("option",{value:"Contacted",children:"Contacted"}),a.jsx("option",{value:"Qualified",children:"Qualified"}),c?.status?.toUpperCase()==="QUALIFIED"&&a.jsx("option",{value:"Converted",children:"Converted"}),a.jsx("option",{value:"Lost",children:"Lost"})]}),a.jsx("button",{onClick:A,disabled:p===c.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${p===c.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const Ybe=Nf.all(),kS=Ybe.map((e,t)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${t}`})),Kbe=e=>e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()),Qbe=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},Fh=10,PS={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function Xbe(){const e=rt(),{leadID:t}=ul();gr();const[n,r]=g.useState(null),[s,i]=g.useState(!1),[o,l]=g.useState(null),[c,d]=g.useState(null),[m,h]=g.useState([]),[p,b]=g.useState(!1),[v,x]=g.useState(""),[w,j]=g.useState("Filter by Status"),[C,S]=g.useState(""),[_,E]=g.useState(1),[A,T]=g.useState(PS),[R,U]=g.useState(!1),[W,I]=g.useState(null),[M,H]=g.useState(!1),[q,ae]=g.useState(null),[K,B]=g.useState(!1);g.useRef(null);const[X,le]=g.useState(!1),[ue,J]=g.useState(null),[ne,pe]=g.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[we,ye]=g.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[Te,Ae]=g.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});g.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const Pe=async()=>{try{const ge=await oe.get("/leads/getUsers");l(ge.data)}catch(ge){console.error(`Error fetching users: ${ge}`)}},$=async()=>{b(!0);try{const ge=await oe.get("/leads/admin/getLeads");h(ge.data),console.log(ge.data)}catch(ge){console.error(`Error fetching leads: ${ge}`)}finally{b(!1)}};g.useEffect(()=>{Pe(),$()},[]),g.useEffect(()=>{if(t&&m.length>0&&!s&&!R){const ge=m.find(Me=>Me.id===Number(t));ge&&r(ge)}else!t&&!n&&r(null)},[t,m,s,R]),g.useEffect(()=>{if(ue){const Me=(gt=>{if(!gt)return{code:"+63",number:""};const Nt=gt.match(/^(\+\d+)\s(.+)$/);if(Nt)return{code:Nt[1],number:Nt[2]};if(gt.startsWith("+")){const Pt=gt.match(/^(\+\d{1,3})/);if(Pt)return{code:Pt[1],number:gt.substring(Pt[1].length).trim()}}return{code:"+63",number:gt}})(ue.work_phone),De=[];ue.work_phone&&De.push(`Work: ${ue.work_phone}`),ue.mobile_phone_1&&De.push(`Mobile 1: ${ue.mobile_phone_1}`),ue.mobile_phone_2&&De.push(`Mobile 2: ${ue.mobile_phone_2}`);const et=De.length>0?De.join(" | "):"";pe({name:ue.company_name||"",website:"",countryCode:Me.code,phone_number:Me.number,combinedPhoneNumbers:et,billing_address:ue.address||"",shipping_address:ue.address||"",industry:"",status:"Prospect",territory_id:ue.assigned_to?.territory?.id||null,assigned_to:ue.assigned_to?.id||null,created_by:ue.creator?.id||null}),ye({last_name:ue.last_name||"",first_name:ue.first_name||"",account_id:null,title:ue.title||"",department:ue.department||"",email:ue.email||"",work_phone:ue.work_phone||"",mobile_phone_1:ue.mobile_phone_1||"",mobile_phone_2:ue.mobile_phone_2||"",notes:ue.notes||"",assigned_to:ue.assigned_to?.id||null,created_by:ue.creator?.id||null}),Ae({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:ue.assigned_to?.id||null,created_by:ue.creator?.id||null})}},[ue]);const Ne=ge=>x(ge.target.value),fe=g.useMemo(()=>{let ge=[...m];const Me=v.trim().toLowerCase();Me&&(ge=ge.filter(et=>[et?.first_name,et?.last_name,et?.company_name,et?.title,et?.email,et?.work_phone,et?.assigned_to?`${et.assigned_to.first_name} ${et.assigned_to.last_name}`:""].some(Nt=>Nt&&Nt.toString().toLowerCase().includes(Me))));const De=w.trim().toUpperCase();return De&&De!=="FILTER BY STATUS"?ge=ge.filter(et=>(et.status?et.status.toUpperCase():"")===De):ge=ge.filter(et=>(et.status?et.status.toUpperCase():"")!=="CONVERTED"),C&&ge.sort((et,gt)=>{const Nt=`${et.first_name} ${et.last_name}`,Pt=`${gt.first_name} ${gt.last_name}`;return C==="asc"?Nt.localeCompare(Pt):Pt.localeCompare(Nt)}),ge},[m,v,w,C]),O=Math.max(1,Math.ceil(fe.length/Fh)||1);g.useEffect(()=>{E(1)},[v,w]),g.useEffect(()=>{E(ge=>{const Me=Math.max(1,Math.ceil(fe.length/Fh)||1);return ge>Me?Me:ge})},[fe.length]);const ce=g.useMemo(()=>{const ge=(_-1)*Fh;return fe.slice(ge,ge+Fh)},[fe,_]),de=()=>E(ge=>Math.max(ge-1,1)),Ce=()=>E(ge=>Math.min(ge+1,O)),Ee=ge=>{r(ge)},Ge=()=>{r(null),t&&e("/admin/leads",{replace:!0})},Je=()=>{i(!1),T(PS),U(!1),I(null),H(!1),d(null),sessionStorage.removeItem("editLeadData")},We=ge=>{ge.target.id==="modalBackdrop"&&Je()},Ke=()=>{T(PS),U(!1),I(null),d(null),i(!0)},He=ge=>{if(!ge){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",ge),console.log("Current state - leadID:",t,"selectedLead:",n,"showModal:",s);const Me=Pt=>{if(!Pt)return{code:"+63",number:""};const dn=Pt.match(/^(\+\d+)\s(.+)$/);return dn?{code:dn[1],number:dn[2]}:{code:"+63",number:Pt}},De=Me(ge.work_phone),et=Me(ge.mobile_phone_1),gt=Me(ge.mobile_phone_2);let Nt="";if(ge.assigned_to){Nt=String(ge.assigned_to.id);const Pt=o?.find(dn=>dn.id===ge.assigned_to.id);d(Pt)}T({first_name:ge.first_name||"",last_name:ge.last_name||"",company_name:ge.company_name||"",title:ge.title||"",department:ge.department||"",email:ge.email||"",work_ccode:De.code,work_phone:De.number,m1_ccode:et.code,mobile_phone_1:et.number,m2_ccode:gt.code,mobile_phone_2:gt.number,address:ge.address||"",notes:ge.notes||"",source:ge.source||"",territory_id:ge.territory?.id||null,lead_owner:Nt,status:ge.status||"New"}),U(!0),I(ge.id),n?(console.log("Coming from detail view - closing detail modal and showing edit form"),r(null),i(!0)):(console.log("Already in list view - showing modal"),i(!0))},Se=ge=>{if(!ge){console.error("handleDelete: lead is null or undefined");return}console.log("handleDelete called with lead:",ge);const Me=`${ge.first_name} ${ge.last_name}`||"this lead";ae({title:"Delete Lead",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:Me}),"? This action cannot be undone."]}),confirmLabel:"Delete Lead",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:ge.id,name:Me}})},Ve=ge=>{const{name:Me,value:De}=ge.target;if(T(et=>({...et,[Me]:De})),Me==="lead_owner"){const et=o.find(gt=>gt.id===parseInt(De));d(et)}},[k,Z]=g.useState(!1),re=ge=>{if(ge.preventDefault(),Z(!0),!A.last_name?.trim()){Q.error("Last name is required.");return}if(!A.company_name?.trim()){Q.error("Company is required.");return}if(!A.title?.trim()){Q.error("Job title is required.");return}if(!A.email?.trim()){Q.error("Email is required.");return}if(!A.lead_owner){Q.error("Please assign a lead owner.");return}const Me={...A,territory_id:A.territory_id?parseInt(A.territory_id):null,lead_owner:parseInt(A.lead_owner),work_phone:`${A.work_ccode} ${A.work_phone}`,mobile_phone_1:`${A.m1_ccode} ${A.mobile_phone_1}`,mobile_phone_2:`${A.m2_ccode} ${A.mobile_phone_2}`},De=R&&W?"update":"create",et=`${A.first_name} ${A.last_name}`;ae({title:De==="create"?"Confirm New Lead":"Confirm Update",message:De==="create"?a.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",a.jsx("span",{className:"font-semibold",children:et}),"?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:et}),"?"]}),confirmLabel:De==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:De,payload:Me,targetId:W||null,name:et}})},be=async()=>{if(!q?.action){ae(null);return}const{action:ge}=q,{type:Me,payload:De,targetId:et,name:gt,lead:Nt}=ge;console.log(De),B(!0);try{if(Me==="create")H(!0),await oe.post("/leads/create",De),Q.success(`Lead "${gt}" created successfully.`),Je(),await $();else if(Me==="update"){if(!et)throw new Error("Missing lead identifier for update.");H(!0);const Pt=await oe.put(`/leads/${et}`,De);Q.success(`Lead "${gt}" updated successfully.`),n&&n.id===et&&r(null),Je(),await $()}else if(Me==="delete"){if(!et)throw new Error("Missing lead identifier for deletion.");await oe.delete(`/leads/${et}`),Q.success(`Lead "${gt}" deleted successfully.`),n?.id===et&&r(null),await $()}}catch(Pt){console.error(Pt);const dn=Me==="create"?"Failed to create lead. Please review the details and try again.":Me==="update"?"Failed to update lead. Please review the details and try again.":"Failed to delete lead. Please try again.",jn=Pt.response?.data?.detail||dn;Q.error(jn)}finally{(Me==="create"||Me==="update")&&H(!1),Me!=="edit"&&(B(!1),ae(null))}},z=()=>{K||ae(null)},ee=m.filter(ge=>ge.status==="New").length,ie=m.filter(ge=>ge.status==="Contacted").length,V=m.filter(ge=>ge.status==="Qualified").length,F=m.filter(ge=>ge.status==="Converted").length,se=m.filter(ge=>ge.status==="Lost").length,xe=[{title:"New",value:ee,icon:Ln,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:ie,icon:pt,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:V,icon:Fn,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:F,icon:ml,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:se,icon:hr,color:"text-red-600",bgColor:"bg-red-100"}];return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[p&&a.jsx(yt,{message:"Loading leads..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(Ln,{className:"mr-2 text-blue-600"}),"Leads"]}),a.jsxs("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:[a.jsxs("button",{onClick:()=>{Q.info("Download functionality coming soon")},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(Sc,{className:"mr-2"})," Download"]}),a.jsxs("button",{onClick:()=>{Ke(),Z(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(Rt,{className:"mr-2"})," Add Lead"]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:xe.map(ge=>a.jsx(Jbe,{...ge},ge.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search leads",value:v,onChange:Ne,className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:w,onChange:ge=>j(ge.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),a.jsx("option",{value:"New",children:"New"}),a.jsx("option",{value:"Contacted",children:"Contacted"}),a.jsx("option",{value:"Qualified",children:"Qualified"}),a.jsx("option",{value:"Converted",children:"Converted"}),a.jsx("option",{value:"Lost",children:"Lost"})]})}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:C,onChange:ge=>S(ge.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"",children:"Sort by Name"}),a.jsx("option",{value:"asc",children:"A-Z"}),a.jsx("option",{value:"desc",children:"Z-A"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Name"}),a.jsx("th",{className:"py-3 px-4",children:"Company"}),a.jsx("th",{className:"py-3 px-4",children:"Job Title"}),a.jsx("th",{className:"py-3 px-4",children:"Email"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),a.jsx("tbody",{children:fe.length>0?ce.map(ge=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>Ee(ge),children:[a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[ge.first_name," ",ge.last_name]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:ge.company_name||"--"})}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:ge.title||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:ge.email||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:ge.assigned_to?`${ge.assigned_to.first_name} ${ge.assigned_to.last_name}`:"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Qbe(ge.status||"New")}`,children:Kbe(ge.status||"New")})})]},ge.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No leads found."})})})]})}),a.jsx(Et,{className:"mt-4",totalItems:fe.length,pageSize:Fh,currentPage:_,onPrev:de,onNext:Ce,label:"leads"}),s&&a.jsx("div",{id:"modalBackdrop",onClick:We,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:ge=>ge.stopPropagation(),children:[a.jsx("button",{onClick:()=>{Je(),Z(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(St,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:R?"Edit Lead":"Add New Lead"}),a.jsxs("form",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),a.jsx("input",{type:"text",name:"first_name",value:A.first_name,onChange:Ve,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Last Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"last_name",placeholder:"Smith",value:A.last_name,onChange:Ve,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
              ${k&&!A.last_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
          focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Company ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:A.company_name,onChange:Ve,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${k&&!A.company_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Job Title",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:A.title,onChange:Ve,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${k&&!A.title?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),a.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:A.department,onChange:Ve,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Email",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:A.email,onChange:Ve,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${k&&!A.email?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"work_ccode",value:A.work_ccode,onChange:Ve,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:kS.map(ge=>a.jsx("option",{value:ge.code,children:ge.code},ge.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:A.work_phone,onChange:Ve,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"m1_ccode",value:A.m1_ccode,onChange:Ve,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:kS.map(ge=>a.jsx("option",{value:ge.code,children:ge.code},ge.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:A.mobile_phone_1,onChange:Ve,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"m2_ccode",value:A.m2_ccode,onChange:Ve,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:kS.map(ge=>a.jsx("option",{value:ge.code,children:ge.code},ge.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:A.mobile_phone_2,onChange:Ve,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),a.jsx("input",{type:"text",name:"address",value:A.address,onChange:Ve,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("div",{className:`w-full rounded-lg ${k&&!A.lead_owner?"border border-red-400":"border border-gray-300"}`,children:a.jsx(eve,{items:Array.isArray(o)?o:[],value:A.lead_owner??"",placeholder:"Search a user...",getLabel:ge=>`${ge.first_name} ${ge.last_name}`,onChange:ge=>{const Me=o.find(et=>String(et.id)===String(ge));d(Me);let De=null;Me&&Me.assigned_territory&&Me.assigned_territory.length===1&&(De=Me.assigned_territory[0].id),T(et=>({...et,lead_owner:ge,territory_id:De}))}})})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),a.jsxs("select",{name:"territory_id",value:A.territory_id||"",onChange:Ve,disabled:!c||!c.assigned_territory||c.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[a.jsx("option",{value:"",disabled:!0,children:c?c.assigned_territory&&c.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),c&&c.assigned_territory&&c.assigned_territory.map(ge=>a.jsx("option",{value:ge.id,children:ge.name},ge.id))]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),a.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:A.source,onChange:Ve,children:[a.jsx("option",{value:"",disabled:!0,children:"Select Source"}),a.jsx("option",{value:"Website",children:"Website"}),a.jsx("option",{value:"Referral",children:"Referral"}),a.jsx("option",{value:"Cold call",children:"Cold call"}),a.jsx("option",{value:"Event",children:"Event"}),a.jsx("option",{value:"Other",children:"Other"})]})]}),a.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),a.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:A.notes,onChange:Ve,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("button",{type:"button",onClick:()=>{Je(),Z(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:M||K,children:"Cancel"}),a.jsx("button",{type:"submit",onClick:re,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:M||K,children:M||K?"Processing...":R?"Update Lead":"Save Lead"})]})]})]})}),q&&a.jsx(Zbe,{open:!0,title:q.title,message:q.message,confirmLabel:q.confirmLabel,cancelLabel:q.cancelLabel,variant:q.variant,onConfirm:be,onCancel:z,loading:K}),n&&!s&&!R&&a.jsx(xV,{lead:n,onBack:Ge,fetchLeads:$,setSelectedLead:r,onEdit:He,onDelete:Se})]})}function Zbe({open:e,title:t,message:n,confirmLabel:r,cancelLabel:s="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:s}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":r})]})]})})}function Jbe({icon:e,title:t,value:n,color:r="text-blue-600",bgColor:s="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${s} ${r} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function eve({items:e=[],value:t="",onChange:n,getLabel:r,placeholder:s="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=g.useState(!1),[d,m]=g.useState(""),h=g.useRef(null),p=e.find(x=>String(x.id)===String(t)),b=p?r(p):"",v=g.useMemo(()=>{const x=d.trim().toLowerCase();return(x?e.filter(j=>(r(j)||"").toLowerCase().includes(x)):e).slice(0,o)},[e,d,r,o]);return g.useEffect(()=>{const x=w=>{h.current&&!h.current.contains(w.target)&&c(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]),g.useEffect(()=>{l||m("")},[l]),a.jsxs("div",{ref:h,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:l?d:b,placeholder:s,onFocus:()=>!i&&c(!0),onChange:x=>{m(x.target.value),l||c(!0)},className:"w-full rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:v.length>0?v.map(x=>{const w=String(x.id),j=r(x),C=String(t)===w;return a.jsx("button",{type:"button",onClick:()=>{n(w),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${C?"bg-blue-50":""}`,children:j||"--"},w)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}let tve={data:""},nve=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||tve},ave=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,rve=/\/\*[^]*?\*\/|  +/g,A$=/\n+/g,ac=(e,t)=>{let n="",r="",s="";for(let i in e){let o=e[i];i[0]=="@"?i[1]=="i"?n=i+" "+o+";":r+=i[1]=="f"?ac(o,i):i+"{"+ac(o,i[1]=="k"?"":t)+"}":typeof o=="object"?r+=ac(o,t?t.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=ac.p?ac.p(i,o):i+":"+o+";")}return n+(t&&s?t+"{"+s+"}":s)+r},To={},yV=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+yV(e[n]);return t}return e},sve=(e,t,n,r,s)=>{let i=yV(e),o=To[i]||(To[i]=(c=>{let d=0,m=11;for(;d<c.length;)m=101*m+c.charCodeAt(d++)>>>0;return"go"+m})(i));if(!To[o]){let c=i!==e?e:(d=>{let m,h,p=[{}];for(;m=ave.exec(d.replace(rve,""));)m[4]?p.shift():m[3]?(h=m[3].replace(A$," ").trim(),p.unshift(p[0][h]=p[0][h]||{})):p[0][m[1]]=m[2].replace(A$," ").trim();return p[0]})(e);To[o]=ac(s?{["@keyframes "+o]:c}:c,n?"":"."+o)}let l=n&&To.g?To.g:null;return n&&(To.g=To[o]),((c,d,m,h)=>{h?d.data=d.data.replace(h,c):d.data.indexOf(c)===-1&&(d.data=m?c+d.data:d.data+c)})(To[o],t,r,l),o},ive=(e,t,n)=>e.reduce((r,s,i)=>{let o=t[i];if(o&&o.call){let l=o(n),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":ac(l,""):l===!1?"":l}return r+s+(o??"")},"");function jN(e){let t=this||{},n=e.call?e(t.p):e;return sve(n.unshift?n.raw?ive(n,[].slice.call(arguments,1),t.p):n.reduce((r,s)=>Object.assign(r,s&&s.call?s(t.p):s),{}):n,nve(t.target),t.g,t.o,t.k)}let bV,kE,PE;jN.bind({g:1});let sl=jN.bind({k:1});function ove(e,t,n,r){ac.p=t,bV=e,kE=n,PE=r}function Dc(e,t){let n=this||{};return function(){let r=arguments;function s(i,o){let l=Object.assign({},i),c=l.className||s.className;n.p=Object.assign({theme:kE&&kE()},l),n.o=/ *go\d+/.test(c),l.className=jN.apply(n,r)+(c?" "+c:"");let d=e;return e[0]&&(d=l.as||e,delete l.as),PE&&d[0]&&PE(l),bV(d,l)}return s}}var lve=e=>typeof e=="function",pv=(e,t)=>lve(e)?e(t):e,cve=(()=>{let e=0;return()=>(++e).toString()})(),vV=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),dve=20,Rk="default",wV=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,n)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:r}=t;return wV(e,{type:e.toasts.find(o=>o.id===r.id)?1:0,toast:r});case 3:let{toastId:s}=t;return{...e,toasts:e.toasts.map(o=>o.id===s||s===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},Lb=[],NV={toasts:[],pausedAt:void 0,settings:{toastLimit:dve}},Gi={},jV=(e,t=Rk)=>{Gi[t]=wV(Gi[t]||NV,e),Lb.forEach(([n,r])=>{n===t&&r(Gi[t])})},CV=e=>Object.keys(Gi).forEach(t=>jV(e,t)),uve=e=>Object.keys(Gi).find(t=>Gi[t].toasts.some(n=>n.id===e)),CN=(e=Rk)=>t=>{jV(t,e)},mve={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},fve=(e={},t=Rk)=>{let[n,r]=g.useState(Gi[t]||NV),s=g.useRef(Gi[t]);g.useEffect(()=>(s.current!==Gi[t]&&r(Gi[t]),Lb.push([t,r]),()=>{let o=Lb.findIndex(([l])=>l===t);o>-1&&Lb.splice(o,1)}),[t]);let i=n.toasts.map(o=>{var l,c,d;return{...e,...e[o.type],...o,removeDelay:o.removeDelay||((l=e[o.type])==null?void 0:l.removeDelay)||e?.removeDelay,duration:o.duration||((c=e[o.type])==null?void 0:c.duration)||e?.duration||mve[o.type],style:{...e.style,...(d=e[o.type])==null?void 0:d.style,...o.style}}});return{...n,toasts:i}},hve=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:n?.id||cve()}),wx=e=>(t,n)=>{let r=hve(t,e,n);return CN(r.toasterId||uve(r.id))({type:2,toast:r}),r.id},Sa=(e,t)=>wx("blank")(e,t);Sa.error=wx("error");Sa.success=wx("success");Sa.loading=wx("loading");Sa.custom=wx("custom");Sa.dismiss=(e,t)=>{let n={type:3,toastId:e};t?CN(t)(n):CV(n)};Sa.dismissAll=e=>Sa.dismiss(void 0,e);Sa.remove=(e,t)=>{let n={type:4,toastId:e};t?CN(t)(n):CV(n)};Sa.removeAll=e=>Sa.remove(void 0,e);Sa.promise=(e,t,n)=>{let r=Sa.loading(t.loading,{...n,...n?.loading});return typeof e=="function"&&(e=e()),e.then(s=>{let i=t.success?pv(t.success,s):void 0;return i?Sa.success(i,{id:r,...n,...n?.success}):Sa.dismiss(r),s}).catch(s=>{let i=t.error?pv(t.error,s):void 0;i?Sa.error(i,{id:r,...n,...n?.error}):Sa.dismiss(r)}),e};var gve=1e3,pve=(e,t="default")=>{let{toasts:n,pausedAt:r}=fve(e,t),s=g.useRef(new Map).current,i=g.useCallback((h,p=gve)=>{if(s.has(h))return;let b=setTimeout(()=>{s.delete(h),o({type:4,toastId:h})},p);s.set(h,b)},[]);g.useEffect(()=>{if(r)return;let h=Date.now(),p=n.map(b=>{if(b.duration===1/0)return;let v=(b.duration||0)+b.pauseDuration-(h-b.createdAt);if(v<0){b.visible&&Sa.dismiss(b.id);return}return setTimeout(()=>Sa.dismiss(b.id,t),v)});return()=>{p.forEach(b=>b&&clearTimeout(b))}},[n,r,t]);let o=g.useCallback(CN(t),[t]),l=g.useCallback(()=>{o({type:5,time:Date.now()})},[o]),c=g.useCallback((h,p)=>{o({type:1,toast:{id:h,height:p}})},[o]),d=g.useCallback(()=>{r&&o({type:6,time:Date.now()})},[r,o]),m=g.useCallback((h,p)=>{let{reverseOrder:b=!1,gutter:v=8,defaultPosition:x}=p||{},w=n.filter(S=>(S.position||x)===(h.position||x)&&S.height),j=w.findIndex(S=>S.id===h.id),C=w.filter((S,_)=>_<j&&S.visible).length;return w.filter(S=>S.visible).slice(...b?[C+1]:[0,C]).reduce((S,_)=>S+(_.height||0)+v,0)},[n]);return g.useEffect(()=>{n.forEach(h=>{if(h.dismissed)i(h.id,h.removeDelay);else{let p=s.get(h.id);p&&(clearTimeout(p),s.delete(h.id))}})},[n,i]),{toasts:n,handlers:{updateHeight:c,startPause:l,endPause:d,calculateOffset:m}}},xve=sl`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,yve=sl`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,bve=sl`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,vve=Dc("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${xve} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${yve} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${bve} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,wve=sl`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Nve=Dc("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${wve} 1s linear infinite;
`,jve=sl`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Cve=sl`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Sve=Dc("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${jve} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Cve} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,_ve=Dc("div")`
  position: absolute;
`,Ave=Dc("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Eve=sl`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Tve=Dc("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Eve} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Lve=({toast:e})=>{let{icon:t,type:n,iconTheme:r}=e;return t!==void 0?typeof t=="string"?g.createElement(Tve,null,t):t:n==="blank"?null:g.createElement(Ave,null,g.createElement(Nve,{...r}),n!=="loading"&&g.createElement(_ve,null,n==="error"?g.createElement(vve,{...r}):g.createElement(Sve,{...r})))},kve=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Pve=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,Dve="0%{opacity:0;} 100%{opacity:1;}",Ove="0%{opacity:1;} 100%{opacity:0;}",Mve=Dc("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Ive=Dc("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,$ve=(e,t)=>{let n=e.includes("top")?1:-1,[r,s]=vV()?[Dve,Ove]:[kve(n),Pve(n)];return{animation:t?`${sl(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${sl(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Rve=g.memo(({toast:e,position:t,style:n,children:r})=>{let s=e.height?$ve(e.position||t||"top-center",e.visible):{opacity:0},i=g.createElement(Lve,{toast:e}),o=g.createElement(Ive,{...e.ariaProps},pv(e.message,e));return g.createElement(Mve,{className:e.className,style:{...s,...n,...e.style}},typeof r=="function"?r({icon:i,message:o}):g.createElement(g.Fragment,null,i,o))});ove(g.createElement);var zve=({id:e,className:t,style:n,onHeightUpdate:r,children:s})=>{let i=g.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;r(e,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return g.createElement("div",{ref:i,className:t,style:n},s)},Uve=(e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:vV()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...r,...s}},Fve=jN`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Sy=16,Nx=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:r,children:s,toasterId:i,containerStyle:o,containerClassName:l})=>{let{toasts:c,handlers:d}=pve(n,i);return g.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:Sy,left:Sy,right:Sy,bottom:Sy,pointerEvents:"none",...o},className:l,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map(m=>{let h=m.position||t,p=d.calculateOffset(m,{reverseOrder:e,gutter:r,defaultPosition:t}),b=Uve(h,p);return g.createElement(zve,{id:m.id,key:m.id,onHeightUpdate:d.updateHeight,className:m.visible?Fve:"",style:b},m.type==="custom"?pv(m.message,m):s?s(m):g.createElement(Rve,{toast:m,position:h}))}))},jx=Sa;const ed=10;function Bve(){g.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,t]=g.useState(null),[n,r]=g.useState(""),[s,i]=g.useState("Filter by Actions"),[o,l]=g.useState(1),c=async()=>{try{const w=await oe.get("/logs/read-all");t(w.data)}catch(w){console.error("Error fetching audit logs:",w)}};g.useEffect(()=>{c()},[]);const d=g.useMemo(()=>{if(!Array.isArray(e))return[];const w=n.trim().toLowerCase(),j=s?.toUpperCase?.()||"ALL";return e.filter(S=>{const _=S.timestamp?new Date(S.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",E=`${S.entity_type||""} ${S.entity_name||S.entity_details?.name||S.entity_details?.title||S.entity_id||""}`,A=`${S.logger?.first_name||""} ${S.logger?.last_name||""}`,T=[_,A,S.action,S.entity_type,E,S.description],R=w===""||T.some(W=>W==null?!1:W.toString().toLowerCase().includes(w)),U=j==="FILTER BY ACTIONS"||(S.action||"").toUpperCase()===j;return R&&U}).sort((S,_)=>{const E=S.timestamp?new Date(S.timestamp).getTime():0;return(_.timestamp?new Date(_.timestamp).getTime():0)-E})},[e,n,s]),m=Math.max(1,Math.ceil(d.length/ed)||1);g.useEffect(()=>{l(1)},[n,s]),g.useEffect(()=>{l(w=>{const j=Math.max(1,Math.ceil(d.length/ed)||1);return w>j?j:w})},[d.length]);const h=g.useMemo(()=>{const w=(o-1)*ed;return d.slice(w,w+ed)},[d,o]);d.length===0||(o-1)*ed+1,Math.min(o*ed,d.length);const p=()=>l(w=>Math.max(w-1,1)),b=()=>l(w=>Math.min(w+1,m)),v=()=>{if(!d.length){jx.error("No logs to export!");return}const w=["Timestamp","User","Action","Resource","Details"],j=d.map(A=>[new Date(A.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${A.logger?.first_name||""} ${A.logger?.last_name||""}`.trim(),A.action,`${A.entity_type}: ${A.entity_id}`,A.description||""]),C=[w.join(","),...j.map(A=>A.map(T=>`"${String(T).replace(/"/g,'""')}"`).join(","))].join(`
`),S=new Blob([C],{type:"text/csv;charset=utf-8;"}),_=URL.createObjectURL(S),E=document.createElement("a");E.href=_,E.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL(_)},x=w=>{switch((w||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&a.jsx(yt,{message:"Loading audit logs..."}),a.jsx(Nx,{toastOptions:{duration:1e3}}),a.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[a.jsx(ft,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),a.jsxs("p",{className:"text-sm text-blue-700",children:[a.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(mr,{className:"text-blue-600",size:20}),a.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:v,children:[a.jsx(Sc,{className:"mr-2"}),"Export Logs"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[a.jsx(bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search audit logs",value:n,onChange:w=>r(w.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:s,onChange:w=>i(w.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),a.jsx("option",{value:"CREATE",children:"CREATE"}),a.jsx("option",{value:"DELETE",children:"DELETE"}),a.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),a.jsx("th",{className:"py-3 px-4",children:"User"}),a.jsx("th",{className:"py-3 px-4",children:"Action"}),a.jsx("th",{className:"py-3 px-4",children:"Resource"}),a.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),a.jsx("tbody",{children:Array.isArray(d)&&d.length>0?h.map((w,j)=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(w.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),a.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.name}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${x(w.action)}`,children:w.action})}),a.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[w.entity_type,": ",w.entity_id]}),a.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.description})]},j)):a.jsx("tr",{children:a.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),a.jsx(Et,{className:"mt-4",totalItems:d.length,pageSize:ed,currentPage:o,onPrev:p,onNext:b,label:"logs"})]})}var Hve=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function zk(e){if(typeof e!="string")return!1;var t=Hve;return t.includes(e)}var Gve=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Vve=new Set(Gve);function SV(e){return typeof e!="string"?!1:Vve.has(e)}function _V(e){return typeof e=="string"&&e.startsWith("data-")}function xi(e){if(typeof e!="object"||e===null)return{};var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(SV(n)||_V(n))&&(t[n]=e[n]);return t}function pp(e){if(e==null)return null;if(g.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return xi(t)}return typeof e=="object"&&!Array.isArray(e)?xi(e):null}function Vs(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(SV(n)||_V(n)||zk(n))&&(t[n]=e[n]);return t}var Wve=["children","width","height","viewBox","className","style","title","desc"];function DE(){return DE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},DE.apply(null,arguments)}function qve(e,t){if(e==null)return{};var n,r,s=Yve(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function Yve(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var AV=g.forwardRef((e,t)=>{var{children:n,width:r,height:s,viewBox:i,className:o,style:l,title:c,desc:d}=e,m=qve(e,Wve),h=i||{width:r,height:s,x:0,y:0},p=ct("recharts-surface",o);return g.createElement("svg",DE({},Vs(m),{className:p,width:r,height:s,style:l,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:t}),g.createElement("title",null,c),g.createElement("desc",null,d),n)}),Kve=["children","className"];function OE(){return OE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},OE.apply(null,arguments)}function Qve(e,t){if(e==null)return{};var n,r,s=Xve(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function Xve(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var wr=g.forwardRef((e,t)=>{var{children:n,className:r}=e,s=Qve(e,Kve),i=ct("recharts-layer",r);return g.createElement("g",OE({className:i},Vs(s),{ref:t}),n)}),Zve=g.createContext(null),DS={},OS={},E$;function Jve(){return E$||(E$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(OS)),OS}var MS={},T$;function EV(){return T$||(T$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(MS)),MS}var IS={},L$;function Uk(){return L$||(L$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}e.toKey=t})(IS)),IS}var $S={},RS={},k$;function ewe(){return k$||(k$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(t).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}e.toString=t})(RS)),RS}var P$;function Fk(){return P$||(P$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ewe(),n=Uk();function r(s){if(Array.isArray(s))return s.map(n.toKey);if(typeof s=="symbol")return[s];s=t.toString(s);const i=[],o=s.length;if(o===0)return i;let l=0,c="",d="",m=!1;for(s.charCodeAt(0)===46&&(i.push(""),l++);l<o;){const h=s[l];d?h==="\\"&&l+1<o?(l++,c+=s[l]):h===d?d="":c+=h:m?h==='"'||h==="'"?d=h:h==="]"?(m=!1,i.push(c),c=""):c+=h:h==="["?(m=!0,c&&(i.push(c),c="")):h==="."?c&&(i.push(c),c=""):c+=h,l++}return c&&i.push(c),i}e.toPath=r})($S)),$S}var D$;function Bk(){return D$||(D$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Jve(),n=EV(),r=Uk(),s=Fk();function i(l,c,d){if(l==null)return d;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return d;const m=l[c];return m===void 0?n.isDeepKey(c)?i(l,s.toPath(c),d):d:m}case"number":case"symbol":{typeof c=="number"&&(c=r.toKey(c));const m=l[c];return m===void 0?d:m}default:{if(Array.isArray(c))return o(l,c,d);if(Object.is(c?.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return d;const m=l[c];return m===void 0?d:m}}}function o(l,c,d){if(c.length===0)return d;let m=l;for(let h=0;h<c.length;h++){if(m==null||t.isUnsafeProperty(c[h]))return d;m=m[c[h]]}return m===void 0?d:m}e.get=i})(DS)),DS}var zS,O$;function twe(){return O$||(O$=1,zS=Bk().get),zS}var nwe=twe();const Jd=vi(nwe);var awe=4;function lc(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:awe,n=10**t,r=Math.round(e*n)/n;return Object.is(r,-0)?0:r}function Kn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.reduce((s,i,o)=>{var l=n[o-1];return typeof l=="string"?s+l+i:l!==void 0?s+lc(l)+i:s+i},"")}var za=e=>e===0?0:e>0?1:-1,yi=e=>typeof e=="number"&&e!=+e,il=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,ut=e=>(typeof e=="number"||e instanceof Number)&&!yi(e),to=e=>ut(e)||typeof e=="string",rwe=0,xp=e=>{var t=++rwe;return"".concat(e||"").concat(t)},ur=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ut(t)&&typeof t!="string")return r;var i;if(il(t)){if(n==null)return r;var o=t.indexOf("%");i=n*parseFloat(t.slice(0,o))/100}else i=+t;return yi(i)&&(i=r),s&&n!=null&&i>n&&(i=n),i},TV=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++)if(!n[String(e[r])])n[String(e[r])]=!0;else return!0;return!1};function ba(e,t,n){return ut(e)&&ut(t)?lc(e+n*(t-e)):t}function swe(e,t,n){if(!(!e||!e.length))return e.find(r=>r&&(typeof t=="function"?t(r):Jd(r,t))===n)}var Ua=e=>e===null||typeof e>"u",Cx=e=>Ua(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function iwe(e){return e!=null}function Sx(){}var owe=["type","size","sizeType"];function ME(){return ME=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ME.apply(null,arguments)}function M$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function I$(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?M$(Object(n),!0).forEach(function(r){lwe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M$(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function lwe(e,t,n){return(t=cwe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cwe(e){var t=dwe(e,"string");return typeof t=="symbol"?t:t+""}function dwe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uwe(e,t){if(e==null)return{};var n,r,s=mwe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function mwe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var LV={symbolCircle:cN,symbolCross:T9,symbolDiamond:k9,symbolSquare:P9,symbolStar:O9,symbolTriangle:M9,symbolWye:I9},fwe=Math.PI/180,hwe=e=>{var t="symbol".concat(Cx(e));return LV[t]||cN},gwe=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var r=18*fwe;return 1.25*e*e*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},pwe=(e,t)=>{LV["symbol".concat(Cx(e))]=t},kV=e=>{var{type:t="circle",size:n=64,sizeType:r="area"}=e,s=uwe(e,owe),i=I$(I$({},s),{},{type:t,size:n,sizeType:r}),o="circle";typeof t=="string"&&(o=t);var l=()=>{var p=hwe(o),b=uk().type(p).size(gwe(n,r,o)),v=b();if(v!==null)return v},{className:c,cx:d,cy:m}=i,h=Vs(i);return ut(d)&&ut(m)&&ut(n)?g.createElement("path",ME({},h,{className:ct("recharts-symbols",c),transform:"translate(".concat(d,", ").concat(m,")"),d:l()})):null};kV.registerSymbol=pwe;var PV=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,xwe=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(g.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(s=>{zk(s)&&(r[s]=(i=>n[s](n,i)))}),r},ywe=(e,t,n)=>r=>(e(t,n,r),null),SN=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var r=null;return Object.keys(e).forEach(s=>{var i=e[s];zk(s)&&typeof i=="function"&&(r||(r={}),r[s]=ywe(i,t,n))}),r};function $$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function bwe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$$(Object(n),!0).forEach(function(r){vwe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$$(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function vwe(e,t,n){return(t=wwe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wwe(e){var t=Nwe(e,"string");return typeof t=="symbol"?t:t+""}function Nwe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pr(e,t){var n=bwe({},e),r=t,s=Object.keys(t),i=s.reduce((o,l)=>(o[l]===void 0&&r[l]!==void 0&&(o[l]=r[l]),o),n);return i}var US={},FS={},R$;function jwe(){return R$||(R$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){const s=new Map;for(let i=0;i<n.length;i++){const o=n[i],l=r(o);s.has(l)||s.set(l,o)}return Array.from(s.values())}e.uniqBy=t})(FS)),FS}var BS={},z$;function DV(){return z$||(z$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(BS)),BS}var HS={},GS={},VS={},U$;function Cwe(){return U$||(U$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(VS)),VS}var F$;function Hk(){return F$||(F$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Cwe();function n(r){return r!=null&&typeof r!="function"&&t.isLength(r.length)}e.isArrayLike=n})(GS)),GS}var WS={},B$;function Swe(){return B$||(B$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(WS)),WS}var H$;function _we(){return H$||(H$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Hk(),n=Swe();function r(s){return n.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=r})(HS)),HS}var qS={},YS={},G$;function Awe(){return G$||(G$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Bk();function n(r){return function(s){return t.get(s,r)}}e.property=n})(YS)),YS}var KS={},QS={},XS={},ZS={},V$;function OV(){return V$||(V$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(ZS)),ZS}var JS={},W$;function MV(){return W$||(W$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(JS)),JS}var e2={},q$;function IV(){return q$||(q$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}e.eq=t})(e2)),e2}var Y$;function Ewe(){return Y$||(Y$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OV(),n=MV(),r=IV();function s(m,h,p){return typeof p!="function"?s(m,h,()=>{}):i(m,h,function b(v,x,w,j,C,S){const _=p(v,x,w,j,C,S);return _!==void 0?!!_:i(v,x,b,S)},new Map)}function i(m,h,p,b){if(h===m)return!0;switch(typeof h){case"object":return o(m,h,p,b);case"function":return Object.keys(h).length>0?i(m,{...h},p,b):r.eq(m,h);default:return t.isObject(m)?typeof h=="string"?h==="":!0:r.eq(m,h)}}function o(m,h,p,b){if(h==null)return!0;if(Array.isArray(h))return c(m,h,p,b);if(h instanceof Map)return l(m,h,p,b);if(h instanceof Set)return d(m,h,p,b);const v=Object.keys(h);if(m==null||n.isPrimitive(m))return v.length===0;if(v.length===0)return!0;if(b?.has(h))return b.get(h)===m;b?.set(h,m);try{for(let x=0;x<v.length;x++){const w=v[x];if(!n.isPrimitive(m)&&!(w in m)||h[w]===void 0&&m[w]!==void 0||h[w]===null&&m[w]!==null||!p(m[w],h[w],w,m,h,b))return!1}return!0}finally{b?.delete(h)}}function l(m,h,p,b){if(h.size===0)return!0;if(!(m instanceof Map))return!1;for(const[v,x]of h.entries()){const w=m.get(v);if(p(w,x,v,m,h,b)===!1)return!1}return!0}function c(m,h,p,b){if(h.length===0)return!0;if(!Array.isArray(m))return!1;const v=new Set;for(let x=0;x<h.length;x++){const w=h[x];let j=!1;for(let C=0;C<m.length;C++){if(v.has(C))continue;const S=m[C];let _=!1;if(p(S,w,x,m,h,b)&&(_=!0),_){v.add(C),j=!0;break}}if(!j)return!1}return!0}function d(m,h,p,b){return h.size===0?!0:m instanceof Set?c([...m],[...h],p,b):!1}e.isMatchWith=s,e.isSetMatch=d})(XS)),XS}var K$;function $V(){return K$||(K$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ewe();function n(r,s){return t.isMatchWith(r,s,()=>{})}e.isMatch=n})(QS)),QS}var t2={},n2={},a2={},Q$;function Twe(){return Q$||(Q$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}e.getSymbols=t})(a2)),a2}var r2={},X$;function RV(){return X$||(X$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(r2)),r2}var s2={},Z$;function zV(){return Z$||(Z$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",r="[object Number]",s="[object Boolean]",i="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",d="[object Set]",m="[object Array]",h="[object Function]",p="[object ArrayBuffer]",b="[object Object]",v="[object Error]",x="[object DataView]",w="[object Uint8Array]",j="[object Uint8ClampedArray]",C="[object Uint16Array]",S="[object Uint32Array]",_="[object BigUint64Array]",E="[object Int8Array]",A="[object Int16Array]",T="[object Int32Array]",R="[object BigInt64Array]",U="[object Float32Array]",W="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=p,e.arrayTag=m,e.bigInt64ArrayTag=R,e.bigUint64ArrayTag=_,e.booleanTag=s,e.dataViewTag=x,e.dateTag=l,e.errorTag=v,e.float32ArrayTag=U,e.float64ArrayTag=W,e.functionTag=h,e.int16ArrayTag=A,e.int32ArrayTag=T,e.int8ArrayTag=E,e.mapTag=c,e.numberTag=r,e.objectTag=b,e.regexpTag=t,e.setTag=d,e.stringTag=n,e.symbolTag=o,e.uint16ArrayTag=C,e.uint32ArrayTag=S,e.uint8ArrayTag=w,e.uint8ClampedArrayTag=j})(s2)),s2}var i2={},J$;function Lwe(){return J$||(J$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(i2)),i2}var e6;function UV(){return e6||(e6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Twe(),n=RV(),r=zV(),s=MV(),i=Lwe();function o(m,h){return l(m,void 0,m,new Map,h)}function l(m,h,p,b=new Map,v=void 0){const x=v?.(m,h,p,b);if(x!==void 0)return x;if(s.isPrimitive(m))return m;if(b.has(m))return b.get(m);if(Array.isArray(m)){const w=new Array(m.length);b.set(m,w);for(let j=0;j<m.length;j++)w[j]=l(m[j],j,p,b,v);return Object.hasOwn(m,"index")&&(w.index=m.index),Object.hasOwn(m,"input")&&(w.input=m.input),w}if(m instanceof Date)return new Date(m.getTime());if(m instanceof RegExp){const w=new RegExp(m.source,m.flags);return w.lastIndex=m.lastIndex,w}if(m instanceof Map){const w=new Map;b.set(m,w);for(const[j,C]of m)w.set(j,l(C,j,p,b,v));return w}if(m instanceof Set){const w=new Set;b.set(m,w);for(const j of m)w.add(l(j,void 0,p,b,v));return w}if(typeof Buffer<"u"&&Buffer.isBuffer(m))return m.subarray();if(i.isTypedArray(m)){const w=new(Object.getPrototypeOf(m)).constructor(m.length);b.set(m,w);for(let j=0;j<m.length;j++)w[j]=l(m[j],j,p,b,v);return w}if(m instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&m instanceof SharedArrayBuffer)return m.slice(0);if(m instanceof DataView){const w=new DataView(m.buffer.slice(0),m.byteOffset,m.byteLength);return b.set(m,w),c(w,m,p,b,v),w}if(typeof File<"u"&&m instanceof File){const w=new File([m],m.name,{type:m.type});return b.set(m,w),c(w,m,p,b,v),w}if(typeof Blob<"u"&&m instanceof Blob){const w=new Blob([m],{type:m.type});return b.set(m,w),c(w,m,p,b,v),w}if(m instanceof Error){const w=new m.constructor;return b.set(m,w),w.message=m.message,w.name=m.name,w.stack=m.stack,w.cause=m.cause,c(w,m,p,b,v),w}if(m instanceof Boolean){const w=new Boolean(m.valueOf());return b.set(m,w),c(w,m,p,b,v),w}if(m instanceof Number){const w=new Number(m.valueOf());return b.set(m,w),c(w,m,p,b,v),w}if(m instanceof String){const w=new String(m.valueOf());return b.set(m,w),c(w,m,p,b,v),w}if(typeof m=="object"&&d(m)){const w=Object.create(Object.getPrototypeOf(m));return b.set(m,w),c(w,m,p,b,v),w}return m}function c(m,h,p=m,b,v){const x=[...Object.keys(h),...t.getSymbols(h)];for(let w=0;w<x.length;w++){const j=x[w],C=Object.getOwnPropertyDescriptor(m,j);(C==null||C.writable)&&(m[j]=l(h[j],j,p,b,v))}}function d(m){switch(n.getTag(m)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=l,e.copyProperties=c})(n2)),n2}var t6;function kwe(){return t6||(t6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UV();function n(r){return t.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}e.cloneDeep=n})(t2)),t2}var n6;function Pwe(){return n6||(n6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$V(),n=kwe();function r(s){return s=n.cloneDeep(s),i=>t.isMatch(i,s)}e.matches=r})(KS)),KS}var o2={},l2={},c2={},a6;function Dwe(){return a6||(a6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UV(),n=zV();function r(s,i){return t.cloneDeepWith(s,(o,l,c,d)=>{const m=i?.(o,l,c,d);if(m!==void 0)return m;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case n.numberTag:case n.stringTag:case n.booleanTag:{const h=new s.constructor(s?.valueOf());return t.copyProperties(h,s),h}case n.argumentsTag:{const h={};return t.copyProperties(h,s),h.length=s.length,h[Symbol.iterator]=s[Symbol.iterator],h}default:return}})}e.cloneDeepWith=r})(c2)),c2}var r6;function Owe(){return r6||(r6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Dwe();function n(r){return t.cloneDeepWith(r)}e.cloneDeep=n})(l2)),l2}var d2={},u2={},s6;function FV(){return s6||(s6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(r,s=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<s;case"symbol":return!1;case"string":return t.test(r)}}e.isIndex=n})(u2)),u2}var m2={},i6;function Mwe(){return i6||(i6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=RV();function n(r){return r!==null&&typeof r=="object"&&t.getTag(r)==="[object Arguments]"}e.isArguments=n})(m2)),m2}var o6;function Iwe(){return o6||(o6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=EV(),n=FV(),r=Mwe(),s=Fk();function i(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&t.isDeepKey(l)&&o?.[l]==null?c=s.toPath(l):c=[l],c.length===0)return!1;let d=o;for(let m=0;m<c.length;m++){const h=c[m];if((d==null||!Object.hasOwn(d,h))&&!((Array.isArray(d)||r.isArguments(d))&&n.isIndex(h)&&h<d.length))return!1;d=d[h]}return!0}e.has=i})(d2)),d2}var l6;function $we(){return l6||(l6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$V(),n=Uk(),r=Owe(),s=Bk(),i=Iwe();function o(l,c){switch(typeof l){case"object":{Object.is(l?.valueOf(),-0)&&(l="-0");break}case"number":{l=n.toKey(l);break}}return c=r.cloneDeep(c),function(d){const m=s.get(d,l);return m===void 0?i.has(d,l):c===void 0?m===void 0:t.isMatch(m,c)}}e.matchesProperty=o})(o2)),o2}var c6;function Rwe(){return c6||(c6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=DV(),n=Awe(),r=Pwe(),s=$we();function i(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?s.matchesProperty(o[0],o[1]):r.matches(o);case"string":case"symbol":case"number":return n.property(o)}}e.iteratee=i})(qS)),qS}var d6;function zwe(){return d6||(d6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jwe(),n=DV(),r=_we(),s=Rwe();function i(o,l=n.identity){return r.isArrayLikeObject(o)?t.uniqBy(Array.from(o),s.iteratee(l)):[]}e.uniqBy=i})(US)),US}var f2,u6;function Uwe(){return u6||(u6=1,f2=zwe().uniqBy),f2}var Fwe=Uwe();const m6=vi(Fwe);function Bwe(e,t,n){return t===!0?m6(e,n):typeof t=="function"?m6(e,t):e}var Gk=g.createContext(null),Hwe=e=>e,zn=()=>{var e=g.useContext(Gk);return e?e.store.dispatch:Hwe},kb=()=>{},Gwe=()=>kb,Vwe=(e,t)=>e===t;function ht(e){var t=g.useContext(Gk);return zB.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:Gwe,t?t.store.getState:kb,t?t.store.getState:kb,t?e:kb,Vwe)}var h2={},g2={},p2={},f6;function Wwe(){return f6||(f6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,s,i)=>{if(r!==s){const o=t(r),l=t(s);if(o===l&&o===0){if(r<s)return i==="desc"?1:-1;if(r>s)return i==="desc"?-1:1}return i==="desc"?l-o:o-l}return 0};e.compareValues=n})(p2)),p2}var x2={},y2={},h6;function BV(){return h6||(h6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(y2)),y2}var g6;function qwe(){return g6||(g6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BV(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function s(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(r.test(i)||!n.test(i))||o!=null&&Object.hasOwn(o,i)}e.isKey=s})(x2)),x2}var p6;function Ywe(){return p6||(p6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Wwe(),n=qwe(),r=Fk();function s(i,o,l,c){if(i==null)return[];l=c?void 0:l,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(b=>String(b));const d=(b,v)=>{let x=b;for(let w=0;w<v.length&&x!=null;++w)x=x[v[w]];return x},m=(b,v)=>v==null||b==null?v:typeof b=="object"&&"key"in b?Object.hasOwn(v,b.key)?v[b.key]:d(v,b.path):typeof b=="function"?b(v):Array.isArray(b)?d(v,b):typeof v=="object"?v[b]:v,h=o.map(b=>(Array.isArray(b)&&b.length===1&&(b=b[0]),b==null||typeof b=="function"||Array.isArray(b)||n.isKey(b)?b:{key:b,path:r.toPath(b)}));return i.map(b=>({original:b,criteria:h.map(v=>m(v,b))})).slice().sort((b,v)=>{for(let x=0;x<h.length;x++){const w=t.compareValues(b.criteria[x],v.criteria[x],l[x]);if(w!==0)return w}return 0}).map(b=>b.original)}e.orderBy=s})(g2)),g2}var b2={},x6;function Kwe(){return x6||(x6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r=1){const s=[],i=Math.floor(r),o=(l,c)=>{for(let d=0;d<l.length;d++){const m=l[d];Array.isArray(m)&&c<i?o(m,c+1):s.push(m)}};return o(n,0),s}e.flatten=t})(b2)),b2}var v2={},y6;function HV(){return y6||(y6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FV(),n=Hk(),r=OV(),s=IV();function i(o,l,c){return r.isObject(c)&&(typeof l=="number"&&n.isArrayLike(c)&&t.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?s.eq(c[l],o):!1}e.isIterateeCall=i})(v2)),v2}var b6;function Qwe(){return b6||(b6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ywe(),n=Kwe(),r=HV();function s(i,...o){const l=o.length;return l>1&&r.isIterateeCall(i,o[0],o[1])?o=[]:l>2&&r.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(i,n.flatten(o),["asc"])}e.sortBy=s})(h2)),h2}var w2,v6;function Xwe(){return v6||(v6=1,w2=Qwe().sortBy),w2}var Zwe=Xwe();const _N=vi(Zwe);var GV=e=>e.legend.settings,Jwe=e=>e.legend.size,eNe=e=>e.legend.payload;ze([eNe,GV],(e,t)=>{var{itemSorter:n}=t,r=e.flat(1);return n?_N(r,n):r});var _y=1;function tNe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=g.useState({height:0,left:0,top:0,width:0}),r=g.useCallback(s=>{if(s!=null){var i=s.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-t.height)>_y||Math.abs(o.left-t.left)>_y||Math.abs(o.top-t.top)>_y||Math.abs(o.width-t.width)>_y)&&n({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,r]}function Ka(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var nNe=typeof Symbol=="function"&&Symbol.observable||"@@observable",w6=nNe,N2=()=>Math.random().toString(36).substring(7).split("").join("."),aNe={INIT:`@@redux/INIT${N2()}`,REPLACE:`@@redux/REPLACE${N2()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${N2()}`},xv=aNe;function Vk(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function VV(e,t,n){if(typeof e!="function")throw new Error(Ka(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Ka(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Ka(1));return n(VV)(e,t)}let r=e,s=t,i=new Map,o=i,l=0,c=!1;function d(){o===i&&(o=new Map,i.forEach((w,j)=>{o.set(j,w)}))}function m(){if(c)throw new Error(Ka(3));return s}function h(w){if(typeof w!="function")throw new Error(Ka(4));if(c)throw new Error(Ka(5));let j=!0;d();const C=l++;return o.set(C,w),function(){if(j){if(c)throw new Error(Ka(6));j=!1,d(),o.delete(C),i=null}}}function p(w){if(!Vk(w))throw new Error(Ka(7));if(typeof w.type>"u")throw new Error(Ka(8));if(typeof w.type!="string")throw new Error(Ka(17));if(c)throw new Error(Ka(9));try{c=!0,s=r(s,w)}finally{c=!1}return(i=o).forEach(C=>{C()}),w}function b(w){if(typeof w!="function")throw new Error(Ka(10));r=w,p({type:xv.REPLACE})}function v(){const w=h;return{subscribe(j){if(typeof j!="object"||j===null)throw new Error(Ka(11));function C(){const _=j;_.next&&_.next(m())}return C(),{unsubscribe:w(C)}},[w6](){return this}}}return p({type:xv.INIT}),{dispatch:p,subscribe:h,getState:m,replaceReducer:b,[w6]:v}}function rNe(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:xv.INIT})>"u")throw new Error(Ka(12));if(typeof n(void 0,{type:xv.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ka(13))})}function WV(e){const t=Object.keys(e),n={};for(let i=0;i<t.length;i++){const o=t[i];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let s;try{rNe(n)}catch(i){s=i}return function(o={},l){if(s)throw s;let c=!1;const d={};for(let m=0;m<r.length;m++){const h=r[m],p=n[h],b=o[h],v=p(b,l);if(typeof v>"u")throw l&&l.type,new Error(Ka(14));d[h]=v,c=c||v!==b}return c=c||r.length!==Object.keys(o).length,c?d:o}}function yv(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function sNe(...e){return t=>(n,r)=>{const s=t(n,r);let i=()=>{throw new Error(Ka(15))};const o={getState:s.getState,dispatch:(c,...d)=>i(c,...d)},l=e.map(c=>c(o));return i=yv(...l)(s.dispatch),{...s,dispatch:i}}}function qV(e){return Vk(e)&&"type"in e&&typeof e.type=="string"}var YV=Symbol.for("immer-nothing"),N6=Symbol.for("immer-draftable"),Nr=Symbol.for("immer-state");function mi(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var us=Object,lf=us.getPrototypeOf,bv="constructor",AN="prototype",IE="configurable",vv="enumerable",Pb="writable",yp="value",ol=e=>!!e&&!!e[Nr];function bi(e){return e?KV(e)||EN(e)||!!e[N6]||!!e[bv]?.[N6]||TN(e)||LN(e):!1}var iNe=us[AN][bv].toString(),j6=new WeakMap;function KV(e){if(!e||!Wk(e))return!1;const t=lf(e);if(t===null||t===us[AN])return!0;const n=us.hasOwnProperty.call(t,bv)&&t[bv];if(n===Object)return!0;if(!km(n))return!1;let r=j6.get(n);return r===void 0&&(r=Function.toString.call(n),j6.set(n,r)),r===iNe}function _x(e,t,n=!0){Ax(e)===0?(n?Reflect.ownKeys(e):us.keys(e)).forEach(s=>{t(s,e[s],e)}):e.forEach((r,s)=>t(s,r,e))}function Ax(e){const t=e[Nr];return t?t.type_:EN(e)?1:TN(e)?2:LN(e)?3:0}var C6=(e,t,n=Ax(e))=>n===2?e.has(t):us[AN].hasOwnProperty.call(e,t),$E=(e,t,n=Ax(e))=>n===2?e.get(t):e[t],wv=(e,t,n,r=Ax(e))=>{r===2?e.set(t,n):r===3?e.add(n):e[t]=n};function oNe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var EN=Array.isArray,TN=e=>e instanceof Map,LN=e=>e instanceof Set,Wk=e=>typeof e=="object",km=e=>typeof e=="function",j2=e=>typeof e=="boolean";function lNe(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var $o=e=>e.copy_||e.base_,qk=e=>e.modified_?e.copy_:e.base_;function RE(e,t){if(TN(e))return new Map(e);if(LN(e))return new Set(e);if(EN(e))return Array[AN].slice.call(e);const n=KV(e);if(t===!0||t==="class_only"&&!n){const r=us.getOwnPropertyDescriptors(e);delete r[Nr];let s=Reflect.ownKeys(r);for(let i=0;i<s.length;i++){const o=s[i],l=r[o];l[Pb]===!1&&(l[Pb]=!0,l[IE]=!0),(l.get||l.set)&&(r[o]={[IE]:!0,[Pb]:!0,[vv]:l[vv],[yp]:e[o]})}return us.create(lf(e),r)}else{const r=lf(e);if(r!==null&&n)return{...e};const s=us.create(r);return us.assign(s,e)}}function Yk(e,t=!1){return kN(e)||ol(e)||!bi(e)||(Ax(e)>1&&us.defineProperties(e,{set:Ay,add:Ay,clear:Ay,delete:Ay}),us.freeze(e),t&&_x(e,(n,r)=>{Yk(r,!0)},!1)),e}function cNe(){mi(2)}var Ay={[yp]:cNe};function kN(e){return e===null||!Wk(e)?!0:us.isFrozen(e)}var Nv="MapSet",zE="Patches",S6="ArrayMethods",QV={};function eu(e){const t=QV[e];return t||mi(0,e),t}var _6=e=>!!QV[e],bp,XV=()=>bp,dNe=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:_6(Nv)?eu(Nv):void 0,arrayMethodsPlugin_:_6(S6)?eu(S6):void 0});function A6(e,t){t&&(e.patchPlugin_=eu(zE),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function UE(e){FE(e),e.drafts_.forEach(uNe),e.drafts_=null}function FE(e){e===bp&&(bp=e.parent_)}var E6=e=>bp=dNe(bp,e);function uNe(e){const t=e[Nr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function T6(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(e!==void 0&&e!==n){n[Nr].modified_&&(UE(t),mi(4)),bi(e)&&(e=L6(t,e));const{patchPlugin_:s}=t;s&&s.generateReplacementPatches_(n[Nr].base_,e,t)}else e=L6(t,n);return mNe(t,e,!0),UE(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==YV?e:void 0}function L6(e,t){if(kN(t))return t;const n=t[Nr];if(!n)return Kk(t,e.handledSet_,e);if(!PN(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(e);eW(n,e)}return n.copy_}function mNe(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Yk(t,n)}function ZV(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var PN=(e,t)=>e.scope_===t,fNe=[];function JV(e,t,n,r){const s=$o(e),i=e.type_;if(r!==void 0&&$E(s,r,i)===t){wv(s,r,n,i);return}if(!e.draftLocations_){const l=e.draftLocations_=new Map;_x(s,(c,d)=>{if(ol(d)){const m=l.get(d)||[];m.push(c),l.set(d,m)}})}const o=e.draftLocations_.get(t)??fNe;for(const l of o)wv(s,l,n,i)}function hNe(e,t,n){e.callbacks_.push(function(s){const i=t;if(!i||!PN(i,s))return;s.mapSetPlugin_?.fixSetContents(i);const o=qk(i);JV(e,i.draft_??i,o,n),eW(i,s)})}function eW(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){const{patchPlugin_:r}=t;if(r){const s=r.getPath(e);s&&r.generatePatches_(e,s,t)}ZV(e)}}function gNe(e,t,n){const{scope_:r}=e;if(ol(n)){const s=n[Nr];PN(s,r)&&s.callbacks_.push(function(){Db(e);const o=qk(s);JV(e,n,o,t)})}else bi(n)&&e.callbacks_.push(function(){const i=$o(e);$E(i,t,e.type_)===n&&r.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&Kk($E(e.copy_,t,e.type_),r.handledSet_,r)})}function Kk(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||ol(e)||t.has(e)||!bi(e)||kN(e)||(t.add(e),_x(e,(r,s)=>{if(ol(s)){const i=s[Nr];if(PN(i,n)){const o=qk(i);wv(e,r,o,e.type_),ZV(i)}}else bi(s)&&Kk(s,t,n)})),e}function pNe(e,t){const n=EN(e),r={type_:n?1:0,scope_:t?t.scope_:XV(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let s=r,i=Qk;n&&(s=[r],i=vp);const{revoke:o,proxy:l}=Proxy.revocable(s,i);return r.draft_=l,r.revoke_=o,[l,r]}var Qk={get(e,t){if(t===Nr)return e;let n=e.scope_.arrayMethodsPlugin_;const r=e.type_===1&&typeof t=="string";if(r&&n?.isArrayOperationMethod(t))return n.createMethodInterceptor(e,t);const s=$o(e);if(!C6(s,t,e.type_))return xNe(e,s,t);const i=s[t];if(e.finalized_||!bi(i)||r&&e.operationMethod&&n?.isMutatingArrayMethod(e.operationMethod)&&lNe(t))return i;if(i===C2(e.base_,t)){Db(e);const o=e.type_===1?+t:t,l=HE(e.scope_,i,e,o);return e.copy_[o]=l}return i},has(e,t){return t in $o(e)},ownKeys(e){return Reflect.ownKeys($o(e))},set(e,t,n){const r=tW($o(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const s=C2($o(e),t),i=s?.[Nr];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if(oNe(n,s)&&(n!==void 0||C6(e.base_,t,e.type_)))return!0;Db(e),BE(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),gNe(e,t,n)),!0},deleteProperty(e,t){return Db(e),C2(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),BE(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=$o(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{[Pb]:!0,[IE]:e.type_!==1||t!=="length",[vv]:r[vv],[yp]:n[t]}},defineProperty(){mi(11)},getPrototypeOf(e){return lf(e.base_)},setPrototypeOf(){mi(12)}},vp={};_x(Qk,(e,t)=>{vp[e]=function(){const n=arguments;return n[0]=n[0][0],t.apply(this,n)}});vp.deleteProperty=function(e,t){return vp.set.call(this,e,t,void 0)};vp.set=function(e,t,n){return Qk.set.call(this,e[0],t,n,e[0])};function C2(e,t){const n=e[Nr];return(n?$o(n):e)[t]}function xNe(e,t,n){const r=tW(t,n);return r?yp in r?r[yp]:r.get?.call(e.draft_):void 0}function tW(e,t){if(!(t in e))return;let n=lf(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=lf(n)}}function BE(e){e.modified_||(e.modified_=!0,e.parent_&&BE(e.parent_))}function Db(e){e.copy_||(e.assigned_=new Map,e.copy_=RE(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var yNe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,s)=>{if(km(n)&&!km(r)){const o=r;r=n;const l=this;return function(d=o,...m){return l.produce(d,h=>r.call(this,h,...m))}}km(r)||mi(6),s!==void 0&&!km(s)&&mi(7);let i;if(bi(n)){const o=E6(this),l=HE(o,n,void 0);let c=!0;try{i=r(l),c=!1}finally{c?UE(o):FE(o)}return A6(o,s),T6(i,o)}else if(!n||!Wk(n)){if(i=r(n),i===void 0&&(i=n),i===YV&&(i=void 0),this.autoFreeze_&&Yk(i,!0),s){const o=[],l=[];eu(zE).generateReplacementPatches_(n,i,{patches_:o,inversePatches_:l}),s(o,l)}return i}else mi(1,n)},this.produceWithPatches=(n,r)=>{if(km(n))return(l,...c)=>this.produceWithPatches(l,d=>n(d,...c));let s,i;return[this.produce(n,r,(l,c)=>{s=l,i=c}),s,i]},j2(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),j2(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),j2(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){bi(t)||mi(8),ol(t)&&(t=gi(t));const n=E6(this),r=HE(n,t,void 0);return r[Nr].isManual_=!0,FE(n),r}finishDraft(t,n){const r=t&&t[Nr];(!r||!r.isManual_)&&mi(9);const{scope_:s}=r;return A6(s,n),T6(void 0,s)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,n){let r;for(r=n.length-1;r>=0;r--){const i=n[r];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}r>-1&&(n=n.slice(r+1));const s=eu(zE).applyPatches_;return ol(t)?s(t,n):this.produce(t,i=>s(i,n))}};function HE(e,t,n,r){const[s,i]=TN(t)?eu(Nv).proxyMap_(t,n):LN(t)?eu(Nv).proxySet_(t,n):pNe(t,n);return(n?.scope_??XV()).drafts_.push(s),i.callbacks_=n?.callbacks_??[],i.key_=r,n&&r!==void 0?hNe(n,i,r):i.callbacks_.push(function(c){c.mapSetPlugin_?.fixSetContents(i);const{patchPlugin_:d}=c;i.modified_&&d&&d.generatePatches_(i,[],c)}),s}function gi(e){return ol(e)||mi(10,e),nW(e)}function nW(e){if(!bi(e)||kN(e))return e;const t=e[Nr];let n,r=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=RE(e,t.scope_.immer_.useStrictShallowCopy_),r=t.scope_.immer_.shouldUseStrictIteration()}else n=RE(e,!0);return _x(n,(s,i)=>{wv(n,s,nW(i))},r),t&&(t.finalized_=!1),n}var bNe=new yNe,aW=bNe.produce;function rW(e){return({dispatch:n,getState:r})=>s=>i=>typeof i=="function"?i(n,r,e):s(i)}var vNe=rW(),wNe=rW,NNe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?yv:yv.apply(null,arguments)};function Ws(e,t){function n(...r){if(t){let s=t(...r);if(!s)throw new Error(gs(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>qV(r)&&r.type===e,n}var sW=class Dg extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Dg.prototype)}static get[Symbol.species](){return Dg}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Dg(...t[0].concat(this)):new Dg(...t.concat(this))}};function k6(e){return bi(e)?aW(e,()=>{}):e}function Ey(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function jNe(e){return typeof e=="boolean"}var CNe=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=t??{};let o=new sW;return n&&(jNe(n)?o.push(vNe):o.push(wNe(n.extraArgument))),o},iW="RTK_autoBatch",On=()=>e=>({payload:e,meta:{[iW]:!0}}),P6=e=>t=>{setTimeout(t,e)},oW=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let s=!0,i=!1,o=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:P6(10):e.type==="callback"?e.queueNotification:P6(e.timeout),d=()=>{o=!1,i&&(i=!1,l.forEach(m=>m()))};return Object.assign({},r,{subscribe(m){const h=()=>s&&m(),p=r.subscribe(h);return l.add(m),()=>{p(),l.delete(m)}},dispatch(m){try{return s=!m?.meta?.[iW],i=!s,i&&(o||(o=!0,c(d))),r.dispatch(m)}finally{s=!0}}})},SNe=e=>function(n){const{autoBatch:r=!0}=n??{};let s=new sW(e);return r&&s.push(oW(typeof r=="object"?r:void 0)),s};function _Ne(e){const t=CNe(),{reducer:n=void 0,middleware:r,devTools:s=!0,preloadedState:i=void 0,enhancers:o=void 0}=e||{};let l;if(typeof n=="function")l=n;else if(Vk(n))l=WV(n);else throw new Error(gs(1));let c;typeof r=="function"?c=r(t):c=t();let d=yv;s&&(d=NNe({trace:!1,...typeof s=="object"&&s}));const m=sNe(...c),h=SNe(m);let p=typeof o=="function"?o(h):h();const b=d(...p);return VV(l,i,b)}function lW(e){const t={},n=[];let r;const s={addCase(i,o){const l=typeof i=="string"?i:i.type;if(!l)throw new Error(gs(28));if(l in t)throw new Error(gs(29));return t[l]=o,s},addAsyncThunk(i,o){return o.pending&&(t[i.pending.type]=o.pending),o.rejected&&(t[i.rejected.type]=o.rejected),o.fulfilled&&(t[i.fulfilled.type]=o.fulfilled),o.settled&&n.push({matcher:i.settled,reducer:o.settled}),s},addMatcher(i,o){return n.push({matcher:i,reducer:o}),s},addDefaultCase(i){return r=i,s}};return e(s),[t,n,r]}function ANe(e){return typeof e=="function"}function ENe(e,t){let[n,r,s]=lW(t),i;if(ANe(e))i=()=>k6(e());else{const l=k6(e);i=()=>l}function o(l=i(),c){let d=[n[c.type],...r.filter(({matcher:m})=>m(c)).map(({reducer:m})=>m)];return d.filter(m=>!!m).length===0&&(d=[s]),d.reduce((m,h)=>{if(h)if(ol(m)){const b=h(m,c);return b===void 0?m:b}else{if(bi(m))return aW(m,p=>h(p,c));{const p=h(m,c);if(p===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return p}}return m},l)}return o.getInitialState=i,o}var TNe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",LNe=(e=21)=>{let t="",n=e;for(;n--;)t+=TNe[Math.random()*64|0];return t},kNe=Symbol.for("rtk-slice-createasyncthunk");function PNe(e,t){return`${e}/${t}`}function DNe({creators:e}={}){const t=e?.asyncThunk?.[kNe];return function(r){const{name:s,reducerPath:i=s}=r;if(!s)throw new Error(gs(11));const o=(typeof r.reducers=="function"?r.reducers(MNe()):r.reducers)||{},l=Object.keys(o),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(S,_){const E=typeof S=="string"?S:S.type;if(!E)throw new Error(gs(12));if(E in c.sliceCaseReducersByType)throw new Error(gs(13));return c.sliceCaseReducersByType[E]=_,d},addMatcher(S,_){return c.sliceMatchers.push({matcher:S,reducer:_}),d},exposeAction(S,_){return c.actionCreators[S]=_,d},exposeCaseReducer(S,_){return c.sliceCaseReducersByName[S]=_,d}};l.forEach(S=>{const _=o[S],E={reducerName:S,type:PNe(s,S),createNotation:typeof r.reducers=="function"};$Ne(_)?zNe(E,_,d,t):INe(E,_,d)});function m(){const[S={},_=[],E=void 0]=typeof r.extraReducers=="function"?lW(r.extraReducers):[r.extraReducers],A={...S,...c.sliceCaseReducersByType};return ENe(r.initialState,T=>{for(let R in A)T.addCase(R,A[R]);for(let R of c.sliceMatchers)T.addMatcher(R.matcher,R.reducer);for(let R of _)T.addMatcher(R.matcher,R.reducer);E&&T.addDefaultCase(E)})}const h=S=>S,p=new Map,b=new WeakMap;let v;function x(S,_){return v||(v=m()),v(S,_)}function w(){return v||(v=m()),v.getInitialState()}function j(S,_=!1){function E(T){let R=T[S];return typeof R>"u"&&_&&(R=Ey(b,E,w)),R}function A(T=h){const R=Ey(p,_,()=>new WeakMap);return Ey(R,T,()=>{const U={};for(const[W,I]of Object.entries(r.selectors??{}))U[W]=ONe(I,T,()=>Ey(b,T,w),_);return U})}return{reducerPath:S,getSelectors:A,get selectors(){return A(E)},selectSlice:E}}const C={name:s,reducer:x,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:w,...j(i),injectInto(S,{reducerPath:_,...E}={}){const A=_??i;return S.inject({reducerPath:A,reducer:x},E),{...C,...j(A,!0)}}};return C}}function ONe(e,t,n,r){function s(i,...o){let l=t(i);return typeof l>"u"&&r&&(l=n()),e(l,...o)}return s.unwrapped=e,s}var qr=DNe();function MNe(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function INe({type:e,reducerName:t,createNotation:n},r,s){let i,o;if("reducer"in r){if(n&&!RNe(r))throw new Error(gs(17));i=r.reducer,o=r.prepare}else i=r;s.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?Ws(e,o):Ws(e))}function $Ne(e){return e._reducerDefinitionType==="asyncThunk"}function RNe(e){return e._reducerDefinitionType==="reducerWithPrepare"}function zNe({type:e,reducerName:t},n,r,s){if(!s)throw new Error(gs(18));const{payloadCreator:i,fulfilled:o,pending:l,rejected:c,settled:d,options:m}=n,h=s(e,i,m);r.exposeAction(t,h),o&&r.addCase(h.fulfilled,o),l&&r.addCase(h.pending,l),c&&r.addCase(h.rejected,c),d&&r.addMatcher(h.settled,d),r.exposeCaseReducer(t,{fulfilled:o||Ty,pending:l||Ty,rejected:c||Ty,settled:d||Ty})}function Ty(){}var UNe="task",cW="listener",dW="completed",Xk="cancelled",FNe=`task-${Xk}`,BNe=`task-${dW}`,GE=`${cW}-${Xk}`,HNe=`${cW}-${dW}`,DN=class{constructor(e){this.code=e,this.message=`${UNe} ${Xk} (reason: ${e})`}name="TaskAbortError";message},Zk=(e,t)=>{if(typeof e!="function")throw new TypeError(gs(32))},jv=()=>{},uW=(e,t=jv)=>(e.catch(t),e),mW=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Rd=e=>{if(e.aborted)throw new DN(e.reason)};function fW(e,t){let n=jv;return new Promise((r,s)=>{const i=()=>s(new DN(e.reason));if(e.aborted){i();return}n=mW(e,i),t.finally(()=>n()).then(r,s)}).finally(()=>{n=jv})}var GNe=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof DN?"cancelled":"rejected",error:n}}finally{t?.()}},Cv=e=>t=>uW(fW(e,t).then(n=>(Rd(e),n))),hW=e=>{const t=Cv(e);return n=>t(new Promise(r=>setTimeout(r,n)))},{assign:Gm}=Object,D6={},ON="listenerMiddleware",VNe=(e,t)=>{const n=r=>mW(e,()=>r.abort(e.reason));return(r,s)=>{Zk(r);const i=new AbortController;n(i);const o=GNe(async()=>{Rd(e),Rd(i.signal);const l=await r({pause:Cv(i.signal),delay:hW(i.signal),signal:i.signal});return Rd(i.signal),l},()=>i.abort(BNe));return s?.autoJoin&&t.push(o.catch(jv)),{result:Cv(e)(o),cancel(){i.abort(FNe)}}}},WNe=(e,t)=>{const n=async(r,s)=>{Rd(t);let i=()=>{};const l=[new Promise((c,d)=>{let m=e({predicate:r,effect:(h,p)=>{p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});i=()=>{m(),d()}})];s!=null&&l.push(new Promise(c=>setTimeout(c,s,null)));try{const c=await fW(t,Promise.race(l));return Rd(t),c}finally{i()}};return(r,s)=>uW(n(r,s))},gW=e=>{let{type:t,actionCreator:n,matcher:r,predicate:s,effect:i}=e;if(t)s=Ws(t).match;else if(n)t=n.type,s=n.match;else if(r)s=r;else if(!s)throw new Error(gs(21));return Zk(i),{predicate:s,type:t,effect:i}},pW=Gm(e=>{const{type:t,predicate:n,effect:r}=gW(e);return{id:LNe(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(gs(22))}}},{withTypes:()=>pW}),O6=(e,t)=>{const{type:n,effect:r,predicate:s}=gW(t);return Array.from(e.values()).find(i=>(typeof n=="string"?i.type===n:i.predicate===s)&&i.effect===r)},VE=e=>{e.pending.forEach(t=>{t.abort(GE)})},qNe=(e,t)=>()=>{for(const n of t.keys())VE(n);e.clear()},M6=(e,t,n)=>{try{e(t,n)}catch(r){setTimeout(()=>{throw r},0)}},xW=Gm(Ws(`${ON}/add`),{withTypes:()=>xW}),YNe=Ws(`${ON}/removeAll`),yW=Gm(Ws(`${ON}/remove`),{withTypes:()=>yW}),KNe=(...e)=>{console.error(`${ON}/error`,...e)},Ex=(e={})=>{const t=new Map,n=new Map,r=b=>{const v=n.get(b)??0;n.set(b,v+1)},s=b=>{const v=n.get(b)??1;v===1?n.delete(b):n.set(b,v-1)},{extra:i,onError:o=KNe}=e;Zk(o);const l=b=>(b.unsubscribe=()=>t.delete(b.id),t.set(b.id,b),v=>{b.unsubscribe(),v?.cancelActive&&VE(b)}),c=b=>{const v=O6(t,b)??pW(b);return l(v)};Gm(c,{withTypes:()=>c});const d=b=>{const v=O6(t,b);return v&&(v.unsubscribe(),b.cancelActive&&VE(v)),!!v};Gm(d,{withTypes:()=>d});const m=async(b,v,x,w)=>{const j=new AbortController,C=WNe(c,j.signal),S=[];try{b.pending.add(j),r(b),await Promise.resolve(b.effect(v,Gm({},x,{getOriginalState:w,condition:(_,E)=>C(_,E).then(Boolean),take:C,delay:hW(j.signal),pause:Cv(j.signal),extra:i,signal:j.signal,fork:VNe(j.signal,S),unsubscribe:b.unsubscribe,subscribe:()=>{t.set(b.id,b)},cancelActiveListeners:()=>{b.pending.forEach((_,E,A)=>{_!==j&&(_.abort(GE),A.delete(_))})},cancel:()=>{j.abort(GE),b.pending.delete(j)},throwIfCancelled:()=>{Rd(j.signal)}})))}catch(_){_ instanceof DN||M6(o,_,{raisedBy:"effect"})}finally{await Promise.all(S),j.abort(HNe),s(b),b.pending.delete(j)}},h=qNe(t,n);return{middleware:b=>v=>x=>{if(!qV(x))return v(x);if(xW.match(x))return c(x.payload);if(YNe.match(x)){h();return}if(yW.match(x))return d(x.payload);let w=b.getState();const j=()=>{if(w===D6)throw new Error(gs(23));return w};let C;try{if(C=v(x),t.size>0){const S=b.getState(),_=Array.from(t.values());for(const E of _){let A=!1;try{A=E.predicate(x,S,w)}catch(T){A=!1,M6(o,T,{raisedBy:"predicate"})}A&&m(E,x,b,j)}}}finally{w=D6}return C},startListening:c,stopListening:d,clearListeners:h}};function gs(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var QNe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},bW=qr({name:"chartLayout",initialState:QNe,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,r,s,i;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(r=t.payload.right)!==null&&r!==void 0?r:0,e.margin.bottom=(s=t.payload.bottom)!==null&&s!==void 0?s:0,e.margin.left=(i=t.payload.left)!==null&&i!==void 0?i:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:XNe,setLayout:ZNe,setChartSize:JNe,setScale:eje}=bW.actions,tje=bW.reducer;function vW(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function Bn(e){return Number.isFinite(e)}function no(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function I6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Dm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?I6(Object(n),!0).forEach(function(r){nje(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function nje(e,t,n){return(t=aje(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aje(e){var t=rje(e,"string");return typeof t=="symbol"?t:t+""}function rje(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function En(e,t,n){return Ua(e)||Ua(t)?n:to(t)?Jd(e,t,n):typeof t=="function"?t(e):n}var sje=(e,t,n)=>{if(t&&n){var{width:r,height:s}=n,{align:i,verticalAlign:o,layout:l}=t;if((l==="vertical"||l==="horizontal"&&o==="middle")&&i!=="center"&&ut(e[i]))return Dm(Dm({},e),{},{[i]:e[i]+(r||0)});if((l==="horizontal"||l==="vertical"&&i==="center")&&o!=="middle"&&ut(e[o]))return Dm(Dm({},e),{},{[o]:e[o]+(s||0)})}return e},yu=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",wW=(e,t,n,r)=>{if(r)return e.map(l=>l.coordinate);var s,i,o=e.map(l=>(l.coordinate===t&&(s=!0),l.coordinate===n&&(i=!0),l.coordinate));return s||o.push(t),i||o.push(n),o},NW=(e,t,n)=>{if(!e)return null;var{duplicateDomain:r,type:s,range:i,scale:o,realScaleType:l,isCategorical:c,categoricalDomain:d,tickCount:m,ticks:h,niceTicks:p,axisType:b}=e;if(!o)return null;var v=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,x=s==="category"&&o.bandwidth?o.bandwidth()/v:0;if(x=b==="angleAxis"&&i&&i.length>=2?za(i[0]-i[1])*2*x:x,h||p){var w=(h||p||[]).map((j,C)=>{var S=r?r.indexOf(j):j;return{coordinate:o(S)+x,value:j,offset:x,index:C}});return w.filter(j=>!yi(j.coordinate))}return c&&d?d.map((j,C)=>({coordinate:o(j)+x,value:j,index:C,offset:x})):o.ticks&&m!=null?o.ticks(m).map((j,C)=>({coordinate:o(j)+x,value:j,offset:x,index:C})):o.domain().map((j,C)=>({coordinate:o(j)+x,value:r?r[j]:j,index:C,offset:x}))},$6=1e-4,ije=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,r=e.range(),s=Math.min(r[0],r[1])-$6,i=Math.max(r[0],r[1])+$6,o=e(t[0]),l=e(t[n-1]);(o<s||o>i||l<s||l>i)&&e.domain([t[0],t[n-1]])}},oje=(e,t)=>{if(!t||t.length!==2||!ut(t[0])||!ut(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),s=[e[0],e[1]];return(!ut(e[0])||e[0]<n)&&(s[0]=n),(!ut(e[1])||e[1]>r)&&(s[1]=r),s[0]>r&&(s[0]=r),s[1]<n&&(s[1]=n),s},lje=e=>{var t,n=e.length;if(!(n<=0)){var r=(t=e[0])===null||t===void 0?void 0:t.length;if(!(r==null||r<=0))for(var s=0;s<r;++s)for(var i=0,o=0,l=0;l<n;++l){var c=e[l],d=c?.[s];if(d!=null){var m=d[1],h=d[0],p=yi(m)?h:m;p>=0?(d[0]=i,d[1]=i+p,i=m):(d[0]=o,d[1]=o+p,o=m)}}}},cje=e=>{var t,n=e.length;if(!(n<=0)){var r=(t=e[0])===null||t===void 0?void 0:t.length;if(!(r==null||r<=0))for(var s=0;s<r;++s)for(var i=0,o=0;o<n;++o){var l=e[o],c=l?.[s];if(c!=null){var d=yi(c[1])?c[0]:c[1];d>=0?(c[0]=i,c[1]=i+d,i=c[1]):(c[0]=0,c[1]=0)}}}},dje={sign:lje,expand:X9,none:bc,silhouette:Z9,wiggle:J9,positive:cje},uje=(e,t,n)=>{var r,s=(r=dje[n])!==null&&r!==void 0?r:bc,i=fk().keys(t).value((l,c)=>Number(En(l,c,0))).order(Qd).offset(s),o=i(e);return o.forEach((l,c)=>{l.forEach((d,m)=>{var h=En(e[m],t[c],0);Array.isArray(h)&&h.length===2&&ut(h[0])&&ut(h[1])&&(d[0]=h[0],d[1]=h[1])})}),o};function mje(e){return e==null?void 0:String(e)}var R6=e=>{var{axis:t,ticks:n,offset:r,bandSize:s,entry:i,index:o}=e;if(t.type==="category")return n[o]?n[o].coordinate+r:null;var l=En(i,t.dataKey,t.scale.domain()[o]);return Ua(l)?null:t.scale(l)-s/2+r},fje=e=>{var{numericAxis:t}=e,n=t.scale.domain();if(t.type==="number"){var r=Math.min(n[0],n[1]),s=Math.max(n[0],n[1]);return r<=0&&s>=0?0:s<0?s:r}return n[0]},hje=e=>{var t=e.flat(2).filter(ut);return[Math.min(...t),Math.max(...t)]},gje=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],pje=(e,t,n)=>{if(e!=null)return gje(Object.keys(e).reduce((r,s)=>{var i=e[s];if(!i)return r;var{stackedData:o}=i,l=o.reduce((c,d)=>{var m=vW(d,t,n),h=hje(m);return!Bn(h[0])||!Bn(h[1])?c:[Math.min(c[0],h[0]),Math.max(c[1],h[1])]},[1/0,-1/0]);return[Math.min(l[0],r[0]),Math.max(l[1],r[1])]},[1/0,-1/0]))},z6=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,U6=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Sv=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var s=_N(t,m=>m.coordinate),i=1/0,o=1,l=s.length;o<l;o++){var c=s[o],d=s[o-1];i=Math.min((c?.coordinate||0)-(d?.coordinate||0),i)}return i===1/0?0:i}return n?void 0:0};function F6(e){var{tooltipEntrySettings:t,dataKey:n,payload:r,value:s,name:i}=e;return Dm(Dm({},t),{},{dataKey:n,payload:r,value:s,name:i})}function MN(e,t){if(e)return String(e);if(typeof t=="string")return t}var xje=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},yje=(e,t)=>t==="centric"?e.angle:e.radius,xl=e=>e.layout.width,yl=e=>e.layout.height,bje=e=>e.layout.scale,jW=e=>e.layout.margin,IN=ze(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),$N=ze(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),CW="data-recharts-item-index",SW="data-recharts-item-id",Tx=60;function B6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Ly(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?B6(Object(n),!0).forEach(function(r){vje(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function vje(e,t,n){return(t=wje(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wje(e){var t=Nje(e,"string");return typeof t=="symbol"?t:t+""}function Nje(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jje=e=>e.brush.height;function Cje(e){var t=$N(e);return t.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var s=typeof r.width=="number"?r.width:Tx;return n+s}return n},0)}function Sje(e){var t=$N(e);return t.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var s=typeof r.width=="number"?r.width:Tx;return n+s}return n},0)}function _je(e){var t=IN(e);return t.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function Aje(e){var t=IN(e);return t.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var La=ze([xl,yl,jW,jje,Cje,Sje,_je,Aje,GV,Jwe],(e,t,n,r,s,i,o,l,c,d)=>{var m={left:(n.left||0)+s,right:(n.right||0)+i},h={top:(n.top||0)+o,bottom:(n.bottom||0)+l},p=Ly(Ly({},h),m),b=p.bottom;p.bottom+=r,p=sje(p,c,d);var v=e-p.left-p.right,x=t-p.top-p.bottom;return Ly(Ly({brushBottom:b},p),{},{width:Math.max(v,0),height:Math.max(x,0)})}),Eje=ze(La,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Jk=ze(xl,yl,(e,t)=>({x:0,y:0,width:e,height:t})),Tje=g.createContext(null),Yr=()=>g.useContext(Tje)!=null,RN=e=>e.brush,zN=ze([RN,La,jW],(e,t,n)=>({height:e.height,x:ut(e.x)?e.x:t.left,y:ut(e.y)?e.y:t.top+t.height+t.brushBottom-(n?.bottom||0),width:ut(e.width)?e.width:t.width})),S2={},_2={},A2={},H6;function Lje(){return H6||(H6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r,{signal:s,edges:i}={}){let o,l=null;const c=i!=null&&i.includes("leading"),d=i==null||i.includes("trailing"),m=()=>{l!==null&&(n.apply(o,l),o=void 0,l=null)},h=()=>{d&&m(),x()};let p=null;const b=()=>{p!=null&&clearTimeout(p),p=setTimeout(()=>{p=null,h()},r)},v=()=>{p!==null&&(clearTimeout(p),p=null)},x=()=>{v(),o=void 0,l=null},w=()=>{m()},j=function(...C){if(s?.aborted)return;o=this,l=C;const S=p==null;b(),c&&S&&m()};return j.schedule=b,j.cancel=x,j.flush=w,s?.addEventListener("abort",x,{once:!0}),j}e.debounce=t})(A2)),A2}var G6;function kje(){return G6||(G6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Lje();function n(r,s=0,i={}){typeof i!="object"&&(i={});const{leading:o=!1,trailing:l=!0,maxWait:c}=i,d=Array(2);o&&(d[0]="leading"),l&&(d[1]="trailing");let m,h=null;const p=t.debounce(function(...x){m=r.apply(this,x),h=null},s,{edges:d}),b=function(...x){return c!=null&&(h===null&&(h=Date.now()),Date.now()-h>=c)?(m=r.apply(this,x),h=Date.now(),p.cancel(),p.schedule(),m):(p.apply(this,x),m)},v=()=>(p.flush(),m);return b.cancel=p.cancel,b.flush=v,b}e.debounce=n})(_2)),_2}var V6;function Pje(){return V6||(V6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kje();function n(r,s=0,i={}){const{leading:o=!0,trailing:l=!0}=i;return t.debounce(r,s,{leading:o,maxWait:s,trailing:l})}e.throttle=n})(S2)),S2}var E2,W6;function Dje(){return W6||(W6=1,E2=Pje().throttle),E2}var Oje=Dje();const Mje=vi(Oje);var _v=function(t,n){for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;console.warn(n.replace(/%s/g,()=>s[o++]))}},_W=(e,t,n)=>{var{width:r="100%",height:s="100%",aspect:i,maxHeight:o}=n,l=il(r)?e:Number(r),c=il(s)?t:Number(s);return i&&i>0&&(l?c=l/i:c&&(l=c*i),o&&c!=null&&c>o&&(c=o)),{calculatedWidth:l,calculatedHeight:c}},Ije={width:0,height:0,overflow:"visible"},$je={width:0,overflowX:"visible"},Rje={height:0,overflowY:"visible"},zje={},Uje=e=>{var{width:t,height:n}=e,r=il(t),s=il(n);return r&&s?Ije:r?$je:s?Rje:zje};function Fje(e){var{width:t,height:n,aspect:r}=e,s=t,i=n;return s===void 0&&i===void 0?(s="100%",i="100%"):s===void 0?s=r&&r>0?void 0:"100%":i===void 0&&(i=r&&r>0?void 0:"100%"),{width:s,height:i}}function WE(){return WE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},WE.apply(null,arguments)}function q6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Y6(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?q6(Object(n),!0).forEach(function(r){Bje(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Bje(e,t,n){return(t=Hje(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hje(e){var t=Gje(e,"string");return typeof t=="symbol"?t:t+""}function Gje(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var AW=g.createContext({width:-1,height:-1});function Vje(e){return no(e.width)&&no(e.height)}function EW(e){var{children:t,width:n,height:r}=e,s=g.useMemo(()=>({width:n,height:r}),[n,r]);return Vje(s)?g.createElement(AW.Provider,{value:s},t):null}var e4=()=>g.useContext(AW),Wje=g.forwardRef((e,t)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:s,height:i,minWidth:o=0,minHeight:l,maxHeight:c,children:d,debounce:m=0,id:h,className:p,onResize:b,style:v={}}=e,x=g.useRef(null),w=g.useRef();w.current=b,g.useImperativeHandle(t,()=>x.current);var[j,C]=g.useState({containerWidth:r.width,containerHeight:r.height}),S=g.useCallback((R,U)=>{C(W=>{var I=Math.round(R),M=Math.round(U);return W.containerWidth===I&&W.containerHeight===M?W:{containerWidth:I,containerHeight:M}})},[]);g.useEffect(()=>{if(x.current==null||typeof ResizeObserver>"u")return Sx;var R=M=>{var H,{width:q,height:ae}=M[0].contentRect;S(q,ae),(H=w.current)===null||H===void 0||H.call(w,q,ae)};m>0&&(R=Mje(R,m,{trailing:!0,leading:!1}));var U=new ResizeObserver(R),{width:W,height:I}=x.current.getBoundingClientRect();return S(W,I),U.observe(x.current),()=>{U.disconnect()}},[S,m]);var{containerWidth:_,containerHeight:E}=j;_v(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:A,calculatedHeight:T}=_W(_,E,{width:s,height:i,aspect:n,maxHeight:c});return _v(A!=null&&A>0||T!=null&&T>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,A,T,s,i,o,l,n),g.createElement("div",{id:h?"".concat(h):void 0,className:ct("recharts-responsive-container",p),style:Y6(Y6({},v),{},{width:s,height:i,minWidth:o,minHeight:l,maxHeight:c}),ref:x},g.createElement("div",{style:Uje({width:s,height:i})},g.createElement(EW,{width:A,height:T},d)))}),K6=g.forwardRef((e,t)=>{var n=e4();if(no(n.width)&&no(n.height))return e.children;var{width:r,height:s}=Fje({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:i,calculatedHeight:o}=_W(void 0,void 0,{width:r,height:s,aspect:e.aspect,maxHeight:e.maxHeight});return ut(i)&&ut(o)?g.createElement(EW,{width:i,height:o},e.children):g.createElement(Wje,WE({},e,{width:r,height:s,ref:t}))});function TW(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var UN=()=>{var e,t=Yr(),n=ht(Eje),r=ht(zN),s=(e=ht(RN))===null||e===void 0?void 0:e.padding;return!t||!r||!s?n:{width:r.width-s.left-s.right,height:r.height-s.top-s.bottom,x:s.left,y:s.top}},qje={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},LW=()=>{var e;return(e=ht(La))!==null&&e!==void 0?e:qje},kW=()=>ht(xl),PW=()=>ht(yl),Wt=e=>e.layout.layoutType,Lx=()=>ht(Wt),Yje=()=>{var e=Lx();return e!==void 0},FN=e=>{var t=zn(),n=Yr(),{width:r,height:s}=e,i=e4(),o=r,l=s;return i&&(o=i.width>0?i.width:r,l=i.height>0?i.height:s),g.useEffect(()=>{!n&&no(o)&&no(l)&&t(JNe({width:o,height:l}))},[t,n,o,l]),null},DW=Symbol.for("immer-nothing"),Q6=Symbol.for("immer-draftable"),xs=Symbol.for("immer-state");function fi(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var wp=Object.getPrototypeOf;function cf(e){return!!e&&!!e[xs]}function tu(e){return e?OW(e)||Array.isArray(e)||!!e[Q6]||!!e.constructor?.[Q6]||kx(e)||HN(e):!1}var Kje=Object.prototype.constructor.toString(),X6=new WeakMap;function OW(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=X6.get(n);return r===void 0&&(r=Function.toString.call(n),X6.set(n,r)),r===Kje}function Av(e,t,n=!0){BN(e)===0?(n?Reflect.ownKeys(e):Object.keys(e)).forEach(s=>{t(s,e[s],e)}):e.forEach((r,s)=>t(s,r,e))}function BN(e){const t=e[xs];return t?t.type_:Array.isArray(e)?1:kx(e)?2:HN(e)?3:0}function qE(e,t){return BN(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function MW(e,t,n){const r=BN(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Qje(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function kx(e){return e instanceof Map}function HN(e){return e instanceof Set}function pd(e){return e.copy_||e.base_}function YE(e,t){if(kx(e))return new Map(e);if(HN(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=OW(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[xs];let s=Reflect.ownKeys(r);for(let i=0;i<s.length;i++){const o=s[i],l=r[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(r[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(wp(e),r)}else{const r=wp(e);if(r!==null&&n)return{...e};const s=Object.create(r);return Object.assign(s,e)}}function t4(e,t=!1){return GN(e)||cf(e)||!tu(e)||(BN(e)>1&&Object.defineProperties(e,{set:ky,add:ky,clear:ky,delete:ky}),Object.freeze(e),t&&Object.values(e).forEach(n=>t4(n,!0))),e}function Xje(){fi(2)}var ky={value:Xje};function GN(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var Zje={};function nu(e){const t=Zje[e];return t||fi(0,e),t}var Np;function IW(){return Np}function Jje(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Z6(e,t){t&&(nu("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function KE(e){QE(e),e.drafts_.forEach(e1e),e.drafts_=null}function QE(e){e===Np&&(Np=e.parent_)}function J6(e){return Np=Jje(Np,e)}function e1e(e){const t=e[xs];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function eR(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[xs].modified_&&(KE(t),fi(4)),tu(e)&&(e=Ev(t,e),t.parent_||Tv(t,e)),t.patches_&&nu("Patches").generateReplacementPatches_(n[xs].base_,e,t.patches_,t.inversePatches_)):e=Ev(t,n,[]),KE(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==DW?e:void 0}function Ev(e,t,n){if(GN(t))return t;const r=e.immer_.shouldUseStrictIteration(),s=t[xs];if(!s)return Av(t,(i,o)=>tR(e,s,t,i,o,n),r),t;if(s.scope_!==e)return t;if(!s.modified_)return Tv(e,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const i=s.copy_;let o=i,l=!1;s.type_===3&&(o=new Set(i),i.clear(),l=!0),Av(o,(c,d)=>tR(e,s,i,c,d,n,l),r),Tv(e,i,!1),n&&e.patches_&&nu("Patches").generatePatches_(s,n,e.patches_,e.inversePatches_)}return s.copy_}function tR(e,t,n,r,s,i,o){if(s==null||typeof s!="object"&&!o)return;const l=GN(s);if(!(l&&!o)){if(cf(s)){const c=i&&t&&t.type_!==3&&!qE(t.assigned_,r)?i.concat(r):void 0,d=Ev(e,s,c);if(MW(n,r,d),cf(d))e.canAutoFreeze_=!1;else return}else o&&n.add(s);if(tu(s)&&!l){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[r]===s&&l)return;Ev(e,s),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&(kx(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&Tv(e,s)}}}function Tv(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&t4(t,n)}function t1e(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:IW(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=r,i=n4;n&&(s=[r],i=jp);const{revoke:o,proxy:l}=Proxy.revocable(s,i);return r.draft_=l,r.revoke_=o,l}var n4={get(e,t){if(t===xs)return e;const n=pd(e);if(!qE(n,t))return n1e(e,n,t);const r=n[t];return e.finalized_||!tu(r)?r:r===T2(e.base_,t)?(L2(e),e.copy_[t]=ZE(r,e)):r},has(e,t){return t in pd(e)},ownKeys(e){return Reflect.ownKeys(pd(e))},set(e,t,n){const r=$W(pd(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const s=T2(pd(e),t),i=s?.[xs];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Qje(n,s)&&(n!==void 0||qE(e.base_,t)))return!0;L2(e),XE(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return T2(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,L2(e),XE(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=pd(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){fi(11)},getPrototypeOf(e){return wp(e.base_)},setPrototypeOf(){fi(12)}},jp={};Av(n4,(e,t)=>{jp[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});jp.deleteProperty=function(e,t){return jp.set.call(this,e,t,void 0)};jp.set=function(e,t,n){return n4.set.call(this,e[0],t,n,e[0])};function T2(e,t){const n=e[xs];return(n?pd(n):e)[t]}function n1e(e,t,n){const r=$W(t,n);return r?"value"in r?r.value:r.get?.call(e.draft_):void 0}function $W(e,t){if(!(t in e))return;let n=wp(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=wp(n)}}function XE(e){e.modified_||(e.modified_=!0,e.parent_&&XE(e.parent_))}function L2(e){e.copy_||(e.copy_=YE(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var a1e=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const i=n;n=t;const o=this;return function(c=i,...d){return o.produce(c,m=>n.call(this,m,...d))}}typeof n!="function"&&fi(6),r!==void 0&&typeof r!="function"&&fi(7);let s;if(tu(t)){const i=J6(this),o=ZE(t,void 0);let l=!0;try{s=n(o),l=!1}finally{l?KE(i):QE(i)}return Z6(i,r),eR(s,i)}else if(!t||typeof t!="object"){if(s=n(t),s===void 0&&(s=t),s===DW&&(s=void 0),this.autoFreeze_&&t4(s,!0),r){const i=[],o=[];nu("Patches").generateReplacementPatches_(t,s,i,o),r(i,o)}return s}else fi(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let r,s;return[this.produce(t,n,(o,l)=>{r=o,s=l}),r,s]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){tu(e)||fi(8),cf(e)&&(e=r1e(e));const t=J6(this),n=ZE(e,void 0);return n[xs].isManual_=!0,QE(t),n}finishDraft(e,t){const n=e&&e[xs];(!n||!n.isManual_)&&fi(9);const{scope_:r}=n;return Z6(r,t),eR(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const s=t[n];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}n>-1&&(t=t.slice(n+1));const r=nu("Patches").applyPatches_;return cf(e)?r(e,t):this.produce(e,s=>r(s,t))}};function ZE(e,t){const n=kx(e)?nu("MapSet").proxyMap_(e,t):HN(e)?nu("MapSet").proxySet_(e,t):t1e(e,t);return(t?t.scope_:IW()).drafts_.push(n),n}function r1e(e){return cf(e)||fi(10,e),RW(e)}function RW(e){if(!tu(e)||GN(e))return e;const t=e[xs];let n,r=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=YE(e,t.scope_.immer_.useStrictShallowCopy_),r=t.scope_.immer_.shouldUseStrictIteration()}else n=YE(e,!0);return Av(n,(s,i)=>{MW(n,s,RW(i))},r),t&&(t.finalized_=!1),n}var s1e=new a1e;s1e.produce;var i1e={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},zW=qr({name:"legend",initialState:i1e,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:On()},replaceLegendPayload:{reducer(e,t){var{prev:n,next:r}=t.payload,s=gi(e).payload.indexOf(n);s>-1&&(e.payload[s]=r)},prepare:On()},removeLegendPayload:{reducer(e,t){var n=gi(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)},prepare:On()}}}),{setLegendSize:_8e,setLegendSettings:A8e,addLegendPayload:UW,replaceLegendPayload:FW,removeLegendPayload:BW}=zW.actions,o1e=zW.reducer;function JE(){return JE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},JE.apply(null,arguments)}function nR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function k2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nR(Object(n),!0).forEach(function(r){l1e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function l1e(e,t,n){return(t=c1e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c1e(e){var t=d1e(e,"string");return typeof t=="symbol"?t:t+""}function d1e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function u1e(e){return Array.isArray(e)&&to(e[0])&&to(e[1])?e.join(" ~ "):e}var m1e=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:r={},labelStyle:s={},payload:i,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:d,label:m,labelFormatter:h,accessibilityLayer:p=!1}=e,b=()=>{if(i&&i.length){var E={padding:0,margin:0},A=(l?_N(i,l):i).map((T,R)=>{if(T.type==="none")return null;var U=T.formatter||o||u1e,{value:W,name:I}=T,M=W,H=I;if(U){var q=U(W,I,T,R,i);if(Array.isArray(q))[M,H]=q;else if(q!=null)M=q;else return null}var ae=k2({display:"block",paddingTop:4,paddingBottom:4,color:T.color||"#000"},r);return g.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(R),style:ae},to(H)?g.createElement("span",{className:"recharts-tooltip-item-name"},H):null,to(H)?g.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,g.createElement("span",{className:"recharts-tooltip-item-value"},M),g.createElement("span",{className:"recharts-tooltip-item-unit"},T.unit||""))});return g.createElement("ul",{className:"recharts-tooltip-item-list",style:E},A)}return null},v=k2({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),x=k2({margin:0},s),w=!Ua(m),j=w?m:"",C=ct("recharts-default-tooltip",c),S=ct("recharts-tooltip-label",d);w&&h&&i!==void 0&&i!==null&&(j=h(m,i));var _=p?{role:"status","aria-live":"assertive"}:{};return g.createElement("div",JE({className:C,style:v},_),g.createElement("p",{className:S,style:x},g.isValidElement(j)?j:"".concat(j)),b())},Bh="recharts-tooltip-wrapper",f1e={visibility:"hidden"};function h1e(e){var{coordinate:t,translateX:n,translateY:r}=e;return ct(Bh,{["".concat(Bh,"-right")]:ut(n)&&t&&ut(t.x)&&n>=t.x,["".concat(Bh,"-left")]:ut(n)&&t&&ut(t.x)&&n<t.x,["".concat(Bh,"-bottom")]:ut(r)&&t&&ut(t.y)&&r>=t.y,["".concat(Bh,"-top")]:ut(r)&&t&&ut(t.y)&&r<t.y})}function aR(e){var{allowEscapeViewBox:t,coordinate:n,key:r,offsetTopLeft:s,position:i,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:d}=e;if(i&&ut(i[r]))return i[r];var m=n[r]-l-(s>0?s:0),h=n[r]+s;if(t[r])return o[r]?m:h;var p=c[r];if(p==null)return 0;if(o[r]){var b=m,v=p;return b<v?Math.max(h,p):Math.max(m,p)}if(d==null)return 0;var x=h+l,w=p+d;return x>w?Math.max(m,p):Math.max(h,p)}function g1e(e){var{translateX:t,translateY:n,useTranslate3d:r}=e;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function p1e(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:r,position:s,reverseDirection:i,tooltipBox:o,useTranslate3d:l,viewBox:c}=e,d,m,h;return o.height>0&&o.width>0&&n?(m=aR({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),h=aR({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=g1e({translateX:m,translateY:h,useTranslate3d:l})):d=f1e,{cssProperties:d,cssClasses:h1e({translateX:m,translateY:h,coordinate:n})}}function rR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Py(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rR(Object(n),!0).forEach(function(r){eT(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function eT(e,t,n){return(t=x1e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x1e(e){var t=y1e(e,"string");return typeof t=="symbol"?t:t+""}function y1e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class b1e extends g.PureComponent{constructor(){super(...arguments),eT(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),eT(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,r,s,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(s=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:r,animationEasing:s,children:i,coordinate:o,hasPayload:l,isAnimationActive:c,offset:d,position:m,reverseDirection:h,useTranslate3d:p,viewBox:b,wrapperStyle:v,lastBoundingBox:x,innerRef:w,hasPortalFromProps:j}=this.props,{cssClasses:C,cssProperties:S}=p1e({allowEscapeViewBox:n,coordinate:o,offsetTopLeft:d,position:m,reverseDirection:h,tooltipBox:{height:x.height,width:x.width},useTranslate3d:p,viewBox:b}),_=j?{}:Py(Py({transition:c&&t?"transform ".concat(r,"ms ").concat(s):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),E=Py(Py({},_),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},v);return g.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:C,style:E,ref:w},i)}}var HW=()=>{var e;return(e=ht(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function tT(){return tT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tT.apply(null,arguments)}function sR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function iR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sR(Object(n),!0).forEach(function(r){v1e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function v1e(e,t,n){return(t=w1e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w1e(e){var t=N1e(e,"string");return typeof t=="symbol"?t:t+""}function N1e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oR={curveBasisClosed:Zme,curveBasisOpen:Jme,curveBasis:Xme,curveBumpX:A9,curveBumpY:E9,curveLinearClosed:nfe,curveLinear:gx,curveMonotoneX:yE,curveMonotoneY:V9,curveNatural:q9,curveStep:Y9,curveStepAfter:Q9,curveStepBefore:K9},Lv=e=>Bn(e.x)&&Bn(e.y),lR=e=>e.base!=null&&Lv(e.base)&&Lv(e),Hh=e=>e.x,Gh=e=>e.y,j1e=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(Cx(e));return(n==="curveMonotone"||n==="curveBump")&&t?oR["".concat(n).concat(t==="vertical"?"Y":"X")]:oR[n]||gx},C1e=e=>{var{type:t="linear",points:n=[],baseLine:r,layout:s,connectNulls:i=!1}=e,o=j1e(t,s),l=i?n.filter(Lv):n,c;if(Array.isArray(r)){var d=n.map((b,v)=>iR(iR({},b),{},{base:r[v]}));s==="vertical"?c=Lg().y(Gh).x1(Hh).x0(b=>b.base.x):c=Lg().x(Hh).y1(Gh).y0(b=>b.base.y);var m=c.defined(lR).curve(o),h=i?d.filter(lR):d;return m(h)}s==="vertical"&&ut(r)?c=Lg().y(Gh).x1(Hh).x0(r):ut(r)?c=Lg().x(Hh).y1(Gh).y0(r):c=dk().x(Hh).y(Gh);var p=c.defined(Lv).curve(o);return p(l)},a4=e=>{var{className:t,points:n,path:r,pathRef:s}=e,i=Lx();if((!n||!n.length)&&!r)return null;var o={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||i,connectNulls:e.connectNulls},l=n&&n.length?C1e(o):r;return g.createElement("path",tT({},xi(e),xwe(e),{className:ct("recharts-curve",t),d:l===null?void 0:l,ref:s}))},S1e=["x","y","top","left","width","height","className"];function nT(){return nT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nT.apply(null,arguments)}function cR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function _1e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cR(Object(n),!0).forEach(function(r){A1e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function A1e(e,t,n){return(t=E1e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E1e(e){var t=T1e(e,"string");return typeof t=="symbol"?t:t+""}function T1e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function L1e(e,t){if(e==null)return{};var n,r,s=k1e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function k1e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var P1e=(e,t,n,r,s,i)=>"M".concat(e,",").concat(s,"v").concat(r,"M").concat(i,",").concat(t,"h").concat(n),D1e=e=>{var{x:t=0,y:n=0,top:r=0,left:s=0,width:i=0,height:o=0,className:l}=e,c=L1e(e,S1e),d=_1e({x:t,y:n,top:r,left:s,width:i,height:o},c);return!ut(t)||!ut(n)||!ut(i)||!ut(o)||!ut(r)||!ut(s)?null:g.createElement("path",nT({},Vs(d),{className:ct("recharts-cross",l),d:P1e(t,n,i,o,r,s)}))};function O1e(e,t,n,r){var s=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-s,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function dR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function uR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dR(Object(n),!0).forEach(function(r){M1e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function M1e(e,t,n){return(t=I1e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I1e(e){var t=$1e(e,"string");return typeof t=="symbol"?t:t+""}function $1e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var R1e=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),GW=(e,t,n)=>e.map(r=>"".concat(R1e(r)," ").concat(t,"ms ").concat(n)).join(","),z1e=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,r)=>n.filter(s=>r.includes(s))),Cp=(e,t)=>Object.keys(t).reduce((n,r)=>uR(uR({},n),{},{[r]:e(r,t[r])}),{});function mR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function va(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mR(Object(n),!0).forEach(function(r){U1e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function U1e(e,t,n){return(t=F1e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F1e(e){var t=B1e(e,"string");return typeof t=="symbol"?t:t+""}function B1e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kv=(e,t,n)=>e+(t-e)*n,aT=e=>{var{from:t,to:n}=e;return t!==n},VW=(e,t,n)=>{var r=Cp((s,i)=>{if(aT(i)){var[o,l]=e(i.from,i.to,i.velocity);return va(va({},i),{},{from:o,velocity:l})}return i},t);return n<1?Cp((s,i)=>aT(i)&&r[s]!=null?va(va({},i),{},{velocity:kv(i.velocity,r[s].velocity,n),from:kv(i.from,r[s].from,n)}):i,t):VW(e,r,n-1)};function H1e(e,t,n,r,s,i){var o,l=r.reduce((p,b)=>va(va({},p),{},{[b]:{from:e[b],velocity:0,to:t[b]}}),{}),c=()=>Cp((p,b)=>b.from,l),d=()=>!Object.values(l).filter(aT).length,m=null,h=p=>{o||(o=p);var b=p-o,v=b/n.dt;l=VW(n,l,v),s(va(va(va({},e),t),c())),o=p,d()||(m=i.setTimeout(h))};return()=>(m=i.setTimeout(h),()=>{var p;(p=m)===null||p===void 0||p()})}function G1e(e,t,n,r,s,i,o){var l=null,c=s.reduce((h,p)=>{var b=e[p],v=t[p];return b==null||v==null?h:va(va({},h),{},{[p]:[b,v]})},{}),d,m=h=>{d||(d=h);var p=(h-d)/r,b=Cp((x,w)=>kv(...w,n(p)),c);if(i(va(va(va({},e),t),b)),p<1)l=o.setTimeout(m);else{var v=Cp((x,w)=>kv(...w,n(1)),c);i(va(va(va({},e),t),v))}};return()=>(l=o.setTimeout(m),()=>{var h;(h=l)===null||h===void 0||h()})}const V1e=(e,t,n,r,s,i)=>{var o=z1e(e,t);return n==null?()=>(s(va(va({},e),t)),()=>{}):n.isStepper===!0?H1e(e,t,n,o,s,i):G1e(e,t,n,r,o,s,i)};var Pv=1e-4,WW=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],qW=(e,t)=>e.map((n,r)=>n*t**r).reduce((n,r)=>n+r),fR=(e,t)=>n=>{var r=WW(e,t);return qW(r,n)},W1e=(e,t)=>n=>{var r=WW(e,t),s=[...r.map((i,o)=>i*o).slice(1),0];return qW(s,n)},q1e=e=>{var t,n=e.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var r=(t=n[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(r==null||r.length!==4)return null;var s=r.map(i=>parseFloat(i));return[s[0],s[1],s[2],s[3]]},Y1e=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var s=q1e(n[0]);if(s)return s}}return n.length===4?n:[0,0,1,1]},K1e=(e,t,n,r)=>{var s=fR(e,n),i=fR(t,r),o=W1e(e,n),l=d=>d>1?1:d<0?0:d,c=d=>{for(var m=d>1?1:d,h=m,p=0;p<8;++p){var b=s(h)-m,v=o(h);if(Math.abs(b-m)<Pv||v<Pv)return i(h);h=l(h-b/v)}return i(h)};return c.isStepper=!1,c},hR=function(){return K1e(...Y1e(...arguments))},Q1e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:s=17}=t,i=(o,l,c)=>{var d=-(o-l)*n,m=c*r,h=c+(d-m)*s/1e3,p=c*s/1e3+o;return Math.abs(p-l)<Pv&&Math.abs(h)<Pv?[l,0]:[p,h]};return i.isStepper=!0,i.dt=s,i},X1e=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return hR(e);case"spring":return Q1e();default:if(e.split("(")[0]==="cubic-bezier")return hR(e)}return typeof e=="function"?e:null};function Z1e(e){var t,n=()=>null,r=!1,s=null,i=o=>{if(!r){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...d]=l;if(typeof c=="number"){s=e.setTimeout(i.bind(null,d),c);return}i(c),s=e.setTimeout(i.bind(null,d));return}typeof o=="string"&&(t=o,n(t)),typeof o=="object"&&(t=o,n(t)),typeof o=="function"&&o()}};return{stop:()=>{r=!0},start:o=>{r=!1,s&&(s(),s=null),i(o)},subscribe:o=>(n=o,()=>{n=()=>null}),getTimeoutController:()=>e}}class J1e{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),s=null,i=o=>{o-r>=n?t(o):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(i))};return s=requestAnimationFrame(i),()=>{s!=null&&cancelAnimationFrame(s)}}}function eCe(){return Z1e(new J1e)}var tCe=g.createContext(eCe);function nCe(e,t){var n=g.useContext(tCe);return g.useMemo(()=>t??n(e),[e,t,n])}var aCe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),VN={isSsr:aCe()},rCe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},gR={t:0},P2={t:1};function WN(e){var t=pr(e,rCe),{isActive:n,canBegin:r,duration:s,easing:i,begin:o,onAnimationEnd:l,onAnimationStart:c,children:d}=t,m=n==="auto"?!VN.isSsr:n,h=nCe(t.animationId,t.animationManager),[p,b]=g.useState(m?gR:P2),v=g.useRef(null);return g.useEffect(()=>{m||b(P2)},[m]),g.useEffect(()=>{if(!m||!r)return Sx;var x=V1e(gR,P2,X1e(i),s,b,h.getTimeoutController()),w=()=>{v.current=x()};return h.start([c,o,w,s,l]),()=>{h.stop(),v.current&&v.current(),l()}},[m,r,s,i,o,c,l,h]),d(p.t)}function qN(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=g.useRef(xp(t)),r=g.useRef(e);return r.current!==e&&(n.current=xp(t),r.current=e),n.current}var sCe=["radius"],iCe=["radius"],pR,xR,yR,bR,vR,wR,NR,jR,CR,SR;function _R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function AR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_R(Object(n),!0).forEach(function(r){oCe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_R(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function oCe(e,t,n){return(t=lCe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lCe(e){var t=cCe(e,"string");return typeof t=="symbol"?t:t+""}function cCe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Dv(){return Dv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dv.apply(null,arguments)}function ER(e,t){if(e==null)return{};var n,r,s=dCe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function dCe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Pi(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var TR=(e,t,n,r,s)=>{var i=lc(n),o=lc(r),l=Math.min(Math.abs(i)/2,Math.abs(o)/2),c=o>=0?1:-1,d=i>=0?1:-1,m=o>=0&&i>=0||o<0&&i<0?1:0,h;if(l>0&&s instanceof Array){for(var p=[0,0,0,0],b=0,v=4;b<v;b++)p[b]=s[b]>l?l:s[b];h=Kn(pR||(pR=Pi(["M",",",""])),e,t+c*p[0]),p[0]>0&&(h+=Kn(xR||(xR=Pi(["A ",",",",0,0,",",",",",""])),p[0],p[0],m,e+d*p[0],t)),h+=Kn(yR||(yR=Pi(["L ",",",""])),e+n-d*p[1],t),p[1]>0&&(h+=Kn(bR||(bR=Pi(["A ",",",",0,0,",`,
        `,",",""])),p[1],p[1],m,e+n,t+c*p[1])),h+=Kn(vR||(vR=Pi(["L ",",",""])),e+n,t+r-c*p[2]),p[2]>0&&(h+=Kn(wR||(wR=Pi(["A ",",",",0,0,",`,
        `,",",""])),p[2],p[2],m,e+n-d*p[2],t+r)),h+=Kn(NR||(NR=Pi(["L ",",",""])),e+d*p[3],t+r),p[3]>0&&(h+=Kn(jR||(jR=Pi(["A ",",",",0,0,",`,
        `,",",""])),p[3],p[3],m,e,t+r-c*p[3])),h+="Z"}else if(l>0&&s===+s&&s>0){var x=Math.min(l,s);h=Kn(CR||(CR=Pi(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+c*x,x,x,m,e+d*x,t,e+n-d*x,t,x,x,m,e+n,t+c*x,e+n,t+r-c*x,x,x,m,e+n-d*x,t+r,e+d*x,t+r,x,x,m,e,t+r-c*x)}else h=Kn(SR||(SR=Pi(["M ",","," h "," v "," h "," Z"])),e,t,n,r,-n);return h},LR={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},YW=e=>{var t=pr(e,LR),n=g.useRef(null),[r,s]=g.useState(-1);g.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var B=n.current.getTotalLength();B&&s(B)}catch{}},[]);var{x:i,y:o,width:l,height:c,radius:d,className:m}=t,{animationEasing:h,animationDuration:p,animationBegin:b,isAnimationActive:v,isUpdateAnimationActive:x}=t,w=g.useRef(l),j=g.useRef(c),C=g.useRef(i),S=g.useRef(o),_=g.useMemo(()=>({x:i,y:o,width:l,height:c,radius:d}),[i,o,l,c,d]),E=qN(_,"rectangle-");if(i!==+i||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var A=ct("recharts-rectangle",m);if(!x){var T=Vs(t),{radius:R}=T,U=ER(T,sCe);return g.createElement("path",Dv({},U,{x:lc(i),y:lc(o),width:lc(l),height:lc(c),radius:typeof d=="number"?d:void 0,className:A,d:TR(i,o,l,c,d)}))}var W=w.current,I=j.current,M=C.current,H=S.current,q="0px ".concat(r===-1?1:r,"px"),ae="".concat(r,"px 0px"),K=GW(["strokeDasharray"],p,typeof h=="string"?h:LR.animationEasing);return g.createElement(WN,{animationId:E,key:E,canBegin:r>0,duration:p,easing:h,isActive:x,begin:b},B=>{var X=ba(W,l,B),le=ba(I,c,B),ue=ba(M,i,B),J=ba(H,o,B);n.current&&(w.current=X,j.current=le,C.current=ue,S.current=J);var ne;v?B>0?ne={transition:K,strokeDasharray:ae}:ne={strokeDasharray:q}:ne={strokeDasharray:ae};var pe=Vs(t),{radius:we}=pe,ye=ER(pe,iCe);return g.createElement("path",Dv({},ye,{radius:typeof d=="number"?d:void 0,className:A,d:TR(ue,J,X,le,d),ref:n,style:AR(AR({},ne),t.style)}))})};function kR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function PR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kR(Object(n),!0).forEach(function(r){uCe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function uCe(e,t,n){return(t=mCe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mCe(e){var t=fCe(e,"string");return typeof t=="symbol"?t:t+""}function fCe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ov=Math.PI/180,hCe=e=>e*180/Math.PI,ha=(e,t,n,r)=>({x:e+Math.cos(-Ov*r)*n,y:t+Math.sin(-Ov*r)*n}),KW=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},gCe=(e,t)=>{var{x:n,y:r}=e,{x:s,y:i}=t;return Math.sqrt((n-s)**2+(r-i)**2)},pCe=(e,t)=>{var{x:n,y:r}=e,{cx:s,cy:i}=t,o=gCe({x:n,y:r},{x:s,y:i});if(o<=0)return{radius:o,angle:0};var l=(n-s)/o,c=Math.acos(l);return r>i&&(c=2*Math.PI-c),{radius:o,angle:hCe(c),angleInRadian:c}},xCe=e=>{var{startAngle:t,endAngle:n}=e,r=Math.floor(t/360),s=Math.floor(n/360),i=Math.min(r,s);return{startAngle:t-i*360,endAngle:n-i*360}},yCe=(e,t)=>{var{startAngle:n,endAngle:r}=t,s=Math.floor(n/360),i=Math.floor(r/360),o=Math.min(s,i);return e+o*360},bCe=(e,t)=>{var{chartX:n,chartY:r}=e,{radius:s,angle:i}=pCe({x:n,y:r},t),{innerRadius:o,outerRadius:l}=t;if(s<o||s>l||s===0)return null;var{startAngle:c,endAngle:d}=xCe(t),m=i,h;if(c<=d){for(;m>d;)m-=360;for(;m<c;)m+=360;h=m>=c&&m<=d}else{for(;m>c;)m-=360;for(;m<d;)m+=360;h=m>=d&&m<=c}return h?PR(PR({},t),{},{radius:s,angle:yCe(m,t)}):null};function QW(e){var{cx:t,cy:n,radius:r,startAngle:s,endAngle:i}=e,o=ha(t,n,r,s),l=ha(t,n,r,i);return{points:[o,l],cx:t,cy:n,radius:r,startAngle:s,endAngle:i}}var DR,OR,MR,IR,$R,RR,zR;function rT(){return rT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rT.apply(null,arguments)}function Ed(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var vCe=(e,t)=>{var n=za(t-e),r=Math.min(Math.abs(t-e),359.999);return n*r},Dy=e=>{var{cx:t,cy:n,radius:r,angle:s,sign:i,isExternal:o,cornerRadius:l,cornerIsExternal:c}=e,d=l*(o?1:-1)+r,m=Math.asin(l/d)/Ov,h=c?s:s+i*m,p=ha(t,n,d,h),b=ha(t,n,r,h),v=c?s-i*m:s,x=ha(t,n,d*Math.cos(m*Ov),v);return{center:p,circleTangency:b,lineTangency:x,theta:m}},XW=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:s,startAngle:i,endAngle:o}=e,l=vCe(i,o),c=i+l,d=ha(t,n,s,i),m=ha(t,n,s,c),h=Kn(DR||(DR=Ed(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),d.x,d.y,s,s,+(Math.abs(l)>180),+(i>c),m.x,m.y);if(r>0){var p=ha(t,n,r,i),b=ha(t,n,r,c);h+=Kn(OR||(OR=Ed(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),b.x,b.y,r,r,+(Math.abs(l)>180),+(i<=c),p.x,p.y)}else h+=Kn(MR||(MR=Ed(["L ",","," Z"])),t,n);return h},wCe=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:s,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:d}=e,m=za(d-c),{circleTangency:h,lineTangency:p,theta:b}=Dy({cx:t,cy:n,radius:s,angle:c,sign:m,cornerRadius:i,cornerIsExternal:l}),{circleTangency:v,lineTangency:x,theta:w}=Dy({cx:t,cy:n,radius:s,angle:d,sign:-m,cornerRadius:i,cornerIsExternal:l}),j=l?Math.abs(c-d):Math.abs(c-d)-b-w;if(j<0)return o?Kn(IR||(IR=Ed(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),p.x,p.y,i,i,i*2,i,i,-i*2):XW({cx:t,cy:n,innerRadius:r,outerRadius:s,startAngle:c,endAngle:d});var C=Kn($R||($R=Ed(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),p.x,p.y,i,i,+(m<0),h.x,h.y,s,s,+(j>180),+(m<0),v.x,v.y,i,i,+(m<0),x.x,x.y);if(r>0){var{circleTangency:S,lineTangency:_,theta:E}=Dy({cx:t,cy:n,radius:r,angle:c,sign:m,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),{circleTangency:A,lineTangency:T,theta:R}=Dy({cx:t,cy:n,radius:r,angle:d,sign:-m,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),U=l?Math.abs(c-d):Math.abs(c-d)-E-R;if(U<0&&i===0)return"".concat(C,"L").concat(t,",").concat(n,"Z");C+=Kn(RR||(RR=Ed(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),T.x,T.y,i,i,+(m<0),A.x,A.y,r,r,+(U>180),+(m>0),S.x,S.y,i,i,+(m<0),_.x,_.y)}else C+=Kn(zR||(zR=Ed(["L",",","Z"])),t,n);return C},NCe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},ZW=e=>{var t=pr(e,NCe),{cx:n,cy:r,innerRadius:s,outerRadius:i,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:m,className:h}=t;if(i<s||d===m)return null;var p=ct("recharts-sector",h),b=i-s,v=ur(o,b,0,!0),x;return v>0&&Math.abs(d-m)<360?x=wCe({cx:n,cy:r,innerRadius:s,outerRadius:i,cornerRadius:Math.min(v,b/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:m}):x=XW({cx:n,cy:r,innerRadius:s,outerRadius:i,startAngle:d,endAngle:m}),g.createElement("path",rT({},Vs(t),{className:p,d:x}))};function jCe(e,t,n){if(e==="horizontal")return[{x:t.x,y:n.top},{x:t.x,y:n.top+n.height}];if(e==="vertical")return[{x:n.left,y:t.y},{x:n.left+n.width,y:t.y}];if(PV(t)){if(e==="centric"){var{cx:r,cy:s,innerRadius:i,outerRadius:o,angle:l}=t,c=ha(r,s,i,l),d=ha(r,s,o,l);return[{x:c.x,y:c.y},{x:d.x,y:d.y}]}return QW(t)}}var D2={},O2={},M2={},UR;function CCe(){return UR||(UR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BV();function n(r){return t.isSymbol(r)?NaN:Number(r)}e.toNumber=n})(M2)),M2}var FR;function SCe(){return FR||(FR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=CCe();function n(r){return r?(r=t.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}e.toFinite=n})(O2)),O2}var BR;function _Ce(){return BR||(BR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HV(),n=SCe();function r(s,i,o){o&&typeof o!="number"&&t.isIterateeCall(s,i,o)&&(i=o=void 0),s=n.toFinite(s),i===void 0?(i=s,s=0):i=n.toFinite(i),o=o===void 0?s<i?1:-1:n.toFinite(o);const l=Math.max(Math.ceil((i-s)/(o||1)),0),c=new Array(l);for(let d=0;d<l;d++)c[d]=s,s+=o;return c}e.range=r})(D2)),D2}var I2,HR;function ACe(){return HR||(HR=1,I2=_Ce().range),I2}var ECe=ACe();const JW=vi(ECe),Og=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:kL,scaleDiverging:EH,scaleDivergingLog:TH,scaleDivergingPow:nk,scaleDivergingSqrt:Eue,scaleDivergingSymlog:LH,scaleIdentity:dH,scaleImplicit:oE,scaleLinear:Gw,scaleLog:up,scaleOrdinal:ip,scalePoint:vce,scalePow:Vw,scaleQuantile:hH,scaleQuantize:gH,scaleRadial:fH,scaleSequential:ek,scaleSequentialLog:SH,scaleSequentialPow:tk,scaleSequentialQuantile:AH,scaleSequentialSqrt:Aue,scaleSequentialSymlog:_H,scaleSqrt:mH,scaleSymlog:BL,scaleThreshold:GL,scaleTime:JL,scaleUtc:CH,tickFormat:cH},Symbol.toStringTag,{value:"Module"}));var bl=e=>e.chartData,YN=ze([bl],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),eq=(e,t,n,r)=>r?YN(e):bl(e),TCe=(e,t,n)=>n?YN(e):bl(e);function vc(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(Bn(t)&&Bn(n))return!0}return!1}function GR(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function tq(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,r]=e,s,i;if(Bn(n))s=n;else if(typeof n=="function")return;if(Bn(r))i=r;else if(typeof r=="function")return;var o=[s,i];if(vc(o))return o}}function LCe(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var r=e(t,n);if(vc(r))return GR(r,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[s,i]=e,o,l;if(s==="auto")t!=null&&(o=Math.min(...t));else if(ut(s))o=s;else if(typeof s=="function")try{t!=null&&(o=s(t?.[0]))}catch{}else if(typeof s=="string"&&z6.test(s)){var c=z6.exec(s);if(c==null||c[1]==null||t==null)o=void 0;else{var d=+c[1];o=t[0]-d}}else o=t?.[0];if(i==="auto")t!=null&&(l=Math.max(...t));else if(ut(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t?.[1]))}catch{}else if(typeof i=="string"&&U6.test(i)){var m=U6.exec(i);if(m==null||m[1]==null||t==null)l=void 0;else{var h=+m[1];l=t[1]+h}}else l=t?.[1];var p=[o,l];if(vc(p))return t==null?p:GR(p,t,n)}}}var Af=1e9,kCe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},s4,Mn=!0,qs="[DecimalError] ",zd=qs+"Invalid argument: ",r4=qs+"Exponent out of range: ",Ef=Math.floor,xd=Math.pow,PCe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ds,$a=1e7,An=7,nq=9007199254740991,Mv=Ef(nq/An),ot={};ot.absoluteValue=ot.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};ot.comparedTo=ot.cmp=function(e){var t,n,r,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(r=i.d.length,s=e.d.length,t=0,n=r<s?r:s;t<n;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return r===s?0:r>s^i.s<0?1:-1};ot.decimalPlaces=ot.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*An;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};ot.dividedBy=ot.div=function(e){return qo(this,new this.constructor(e))};ot.dividedToIntegerBy=ot.idiv=function(e){var t=this,n=t.constructor;return bn(qo(t,new n(e),0,1),n.precision)};ot.equals=ot.eq=function(e){return!this.cmp(e)};ot.exponent=function(){return ga(this)};ot.greaterThan=ot.gt=function(e){return this.cmp(e)>0};ot.greaterThanOrEqualTo=ot.gte=function(e){return this.cmp(e)>=0};ot.isInteger=ot.isint=function(){return this.e>this.d.length-2};ot.isNegative=ot.isneg=function(){return this.s<0};ot.isPositive=ot.ispos=function(){return this.s>0};ot.isZero=function(){return this.s===0};ot.lessThan=ot.lt=function(e){return this.cmp(e)<0};ot.lessThanOrEqualTo=ot.lte=function(e){return this.cmp(e)<1};ot.logarithm=ot.log=function(e){var t,n=this,r=n.constructor,s=r.precision,i=s+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(ds))throw Error(qs+"NaN");if(n.s<1)throw Error(qs+(n.s?"NaN":"-Infinity"));return n.eq(ds)?new r(0):(Mn=!1,t=qo(Sp(n,i),Sp(e,i),i),Mn=!0,bn(t,s))};ot.minus=ot.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?sq(t,e):aq(t,(e.s=-e.s,e))};ot.modulo=ot.mod=function(e){var t,n=this,r=n.constructor,s=r.precision;if(e=new r(e),!e.s)throw Error(qs+"NaN");return n.s?(Mn=!1,t=qo(n,e,0,1).times(e),Mn=!0,n.minus(t)):bn(new r(n),s)};ot.naturalExponential=ot.exp=function(){return rq(this)};ot.naturalLogarithm=ot.ln=function(){return Sp(this)};ot.negated=ot.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};ot.plus=ot.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?aq(t,e):sq(t,(e.s=-e.s,e))};ot.precision=ot.sd=function(e){var t,n,r,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(zd+e);if(t=ga(s)+1,r=s.d.length-1,n=r*An+1,r=s.d[r],r){for(;r%10==0;r/=10)n--;for(r=s.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};ot.squareRoot=ot.sqrt=function(){var e,t,n,r,s,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(qs+"NaN")}for(e=ga(l),Mn=!1,s=Math.sqrt(+l),s==0||s==1/0?(t=Vi(l.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=Ef((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new c(t)):r=new c(s.toString()),n=c.precision,s=o=n+3;;)if(i=r,r=i.plus(qo(l,i,o+2)).times(.5),Vi(i.d).slice(0,o)===(t=Vi(r.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if(bn(i,n+1,0),i.times(i).eq(l)){r=i;break}}else if(t!="9999")break;o+=4}return Mn=!0,bn(r,n)};ot.times=ot.mul=function(e){var t,n,r,s,i,o,l,c,d,m=this,h=m.constructor,p=m.d,b=(e=new h(e)).d;if(!m.s||!e.s)return new h(0);for(e.s*=m.s,n=m.e+e.e,c=p.length,d=b.length,c<d&&(i=p,p=b,b=i,o=c,c=d,d=o),i=[],o=c+d,r=o;r--;)i.push(0);for(r=d;--r>=0;){for(t=0,s=c+r;s>r;)l=i[s]+b[r]*p[s-r-1]+t,i[s--]=l%$a|0,t=l/$a|0;i[s]=(i[s]+t)%$a|0}for(;!i[--o];)i.pop();return t?++n:i.shift(),e.d=i,e.e=n,Mn?bn(e,h.precision):e};ot.toDecimalPlaces=ot.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(ao(e,0,Af),t===void 0?t=r.rounding:ao(t,0,8),bn(n,e+ga(n)+1,t))};ot.toExponential=function(e,t){var n,r=this,s=r.constructor;return e===void 0?n=au(r,!0):(ao(e,0,Af),t===void 0?t=s.rounding:ao(t,0,8),r=bn(new s(r),e+1,t),n=au(r,!0,e+1)),n};ot.toFixed=function(e,t){var n,r,s=this,i=s.constructor;return e===void 0?au(s):(ao(e,0,Af),t===void 0?t=i.rounding:ao(t,0,8),r=bn(new i(s),e+ga(s)+1,t),n=au(r.abs(),!1,e+ga(r)+1),s.isneg()&&!s.isZero()?"-"+n:n)};ot.toInteger=ot.toint=function(){var e=this,t=e.constructor;return bn(new t(e),ga(e)+1,t.rounding)};ot.toNumber=function(){return+this};ot.toPower=ot.pow=function(e){var t,n,r,s,i,o,l=this,c=l.constructor,d=12,m=+(e=new c(e));if(!e.s)return new c(ds);if(l=new c(l),!l.s){if(e.s<1)throw Error(qs+"Infinity");return l}if(l.eq(ds))return l;if(r=c.precision,e.eq(ds))return bn(l,r);if(t=e.e,n=e.d.length-1,o=t>=n,i=l.s,o){if((n=m<0?-m:m)<=nq){for(s=new c(ds),t=Math.ceil(r/An+4),Mn=!1;n%2&&(s=s.times(l),WR(s.d,t)),n=Ef(n/2),n!==0;)l=l.times(l),WR(l.d,t);return Mn=!0,e.s<0?new c(ds).div(s):bn(s,r)}}else if(i<0)throw Error(qs+"NaN");return i=i<0&&e.d[Math.max(t,n)]&1?-1:1,l.s=1,Mn=!1,s=e.times(Sp(l,r+d)),Mn=!0,s=rq(s),s.s=i,s};ot.toPrecision=function(e,t){var n,r,s=this,i=s.constructor;return e===void 0?(n=ga(s),r=au(s,n<=i.toExpNeg||n>=i.toExpPos)):(ao(e,1,Af),t===void 0?t=i.rounding:ao(t,0,8),s=bn(new i(s),e,t),n=ga(s),r=au(s,e<=n||n<=i.toExpNeg,e)),r};ot.toSignificantDigits=ot.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(ao(e,1,Af),t===void 0?t=r.rounding:ao(t,0,8)),bn(new r(n),e,t)};ot.toString=ot.valueOf=ot.val=ot.toJSON=ot[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=ga(e),n=e.constructor;return au(e,t<=n.toExpNeg||t>=n.toExpPos)};function aq(e,t){var n,r,s,i,o,l,c,d,m=e.constructor,h=m.precision;if(!e.s||!t.s)return t.s||(t=new m(e)),Mn?bn(t,h):t;if(c=e.d,d=t.d,o=e.e,s=t.e,c=c.slice(),i=o-s,i){for(i<0?(r=c,i=-i,l=d.length):(r=d,s=o,l=c.length),o=Math.ceil(h/An),l=o>l?o+1:l+1,i>l&&(i=l,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(l=c.length,i=d.length,l-i<0&&(i=l,r=d,d=c,c=r),n=0;i;)n=(c[--i]=c[i]+d[i]+n)/$a|0,c[i]%=$a;for(n&&(c.unshift(n),++s),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=s,Mn?bn(t,h):t}function ao(e,t,n){if(e!==~~e||e<t||e>n)throw Error(zd+e)}function Vi(e){var t,n,r,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)r=e[t]+"",n=An-r.length,n&&(i+=tc(n)),i+=r;o=e[t],r=o+"",n=An-r.length,n&&(i+=tc(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var qo=(function(){function e(r,s){var i,o=0,l=r.length;for(r=r.slice();l--;)i=r[l]*s+o,r[l]=i%$a|0,o=i/$a|0;return o&&r.unshift(o),r}function t(r,s,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(r[l]!=s[l]){c=r[l]>s[l]?1:-1;break}return c}function n(r,s,i){for(var o=0;i--;)r[i]-=o,o=r[i]<s[i]?1:0,r[i]=o*$a+r[i]-s[i];for(;!r[0]&&r.length>1;)r.shift()}return function(r,s,i,o){var l,c,d,m,h,p,b,v,x,w,j,C,S,_,E,A,T,R,U=r.constructor,W=r.s==s.s?1:-1,I=r.d,M=s.d;if(!r.s)return new U(r);if(!s.s)throw Error(qs+"Division by zero");for(c=r.e-s.e,T=M.length,E=I.length,b=new U(W),v=b.d=[],d=0;M[d]==(I[d]||0);)++d;if(M[d]>(I[d]||0)&&--c,i==null?C=i=U.precision:o?C=i+(ga(r)-ga(s))+1:C=i,C<0)return new U(0);if(C=C/An+2|0,d=0,T==1)for(m=0,M=M[0],C++;(d<E||m)&&C--;d++)S=m*$a+(I[d]||0),v[d]=S/M|0,m=S%M|0;else{for(m=$a/(M[0]+1)|0,m>1&&(M=e(M,m),I=e(I,m),T=M.length,E=I.length),_=T,x=I.slice(0,T),w=x.length;w<T;)x[w++]=0;R=M.slice(),R.unshift(0),A=M[0],M[1]>=$a/2&&++A;do m=0,l=t(M,x,T,w),l<0?(j=x[0],T!=w&&(j=j*$a+(x[1]||0)),m=j/A|0,m>1?(m>=$a&&(m=$a-1),h=e(M,m),p=h.length,w=x.length,l=t(h,x,p,w),l==1&&(m--,n(h,T<p?R:M,p))):(m==0&&(l=m=1),h=M.slice()),p=h.length,p<w&&h.unshift(0),n(x,h,w),l==-1&&(w=x.length,l=t(M,x,T,w),l<1&&(m++,n(x,T<w?R:M,w))),w=x.length):l===0&&(m++,x=[0]),v[d++]=m,l&&x[0]?x[w++]=I[_]||0:(x=[I[_]],w=1);while((_++<E||x[0]!==void 0)&&C--)}return v[0]||v.shift(),b.e=c,bn(b,o?i+ga(b)+1:i)}})();function rq(e,t){var n,r,s,i,o,l,c=0,d=0,m=e.constructor,h=m.precision;if(ga(e)>16)throw Error(r4+ga(e));if(!e.s)return new m(ds);for(Mn=!1,l=h,o=new m(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(r=Math.log(xd(2,d))/Math.LN10*2+5|0,l+=r,n=s=i=new m(ds),m.precision=l;;){if(s=bn(s.times(e),l),n=n.times(++c),o=i.plus(qo(s,n,l)),Vi(o.d).slice(0,l)===Vi(i.d).slice(0,l)){for(;d--;)i=bn(i.times(i),l);return m.precision=h,t==null?(Mn=!0,bn(i,h)):i}i=o}}function ga(e){for(var t=e.e*An,n=e.d[0];n>=10;n/=10)t++;return t}function $2(e,t,n){if(t>e.LN10.sd())throw Mn=!0,n&&(e.precision=n),Error(qs+"LN10 precision limit exceeded");return bn(new e(e.LN10),t)}function tc(e){for(var t="";e--;)t+="0";return t}function Sp(e,t){var n,r,s,i,o,l,c,d,m,h=1,p=10,b=e,v=b.d,x=b.constructor,w=x.precision;if(b.s<1)throw Error(qs+(b.s?"NaN":"-Infinity"));if(b.eq(ds))return new x(0);if(t==null?(Mn=!1,d=w):d=t,b.eq(10))return t==null&&(Mn=!0),$2(x,d);if(d+=p,x.precision=d,n=Vi(v),r=n.charAt(0),i=ga(b),Math.abs(i)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)b=b.times(e),n=Vi(b.d),r=n.charAt(0),h++;i=ga(b),r>1?(b=new x("0."+n),i++):b=new x(r+"."+n.slice(1))}else return c=$2(x,d+2,w).times(i+""),b=Sp(new x(r+"."+n.slice(1)),d-p).plus(c),x.precision=w,t==null?(Mn=!0,bn(b,w)):b;for(l=o=b=qo(b.minus(ds),b.plus(ds),d),m=bn(b.times(b),d),s=3;;){if(o=bn(o.times(m),d),c=l.plus(qo(o,new x(s),d)),Vi(c.d).slice(0,d)===Vi(l.d).slice(0,d))return l=l.times(2),i!==0&&(l=l.plus($2(x,d+2,w).times(i+""))),l=qo(l,new x(h),d),x.precision=w,t==null?(Mn=!0,bn(l,w)):l;l=c,s+=2}}function VR(e,t){var n,r,s;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(r,s),t){if(s-=r,n=n-r-1,e.e=Ef(n/An),e.d=[],r=(n+1)%An,n<0&&(r+=An),r<s){for(r&&e.d.push(+t.slice(0,r)),s-=An;r<s;)e.d.push(+t.slice(r,r+=An));t=t.slice(r),r=An-t.length}else r-=s;for(;r--;)t+="0";if(e.d.push(+t),Mn&&(e.e>Mv||e.e<-Mv))throw Error(r4+n)}else e.s=0,e.e=0,e.d=[0];return e}function bn(e,t,n){var r,s,i,o,l,c,d,m,h=e.d;for(o=1,i=h[0];i>=10;i/=10)o++;if(r=t-o,r<0)r+=An,s=t,d=h[m=0];else{if(m=Math.ceil((r+1)/An),i=h.length,m>=i)return e;for(d=i=h[m],o=1;i>=10;i/=10)o++;r%=An,s=r-An+o}if(n!==void 0&&(i=xd(10,o-s-1),l=d/i%10|0,c=t<0||h[m+1]!==void 0||d%i,c=n<4?(l||c)&&(n==0||n==(e.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(r>0?s>0?d/xd(10,o-s):0:h[m-1])%10&1||n==(e.s<0?8:7))),t<1||!h[0])return c?(i=ga(e),h.length=1,t=t-i-1,h[0]=xd(10,(An-t%An)%An),e.e=Ef(-t/An)||0):(h.length=1,h[0]=e.e=e.s=0),e;if(r==0?(h.length=m,i=1,m--):(h.length=m+1,i=xd(10,An-r),h[m]=s>0?(d/xd(10,o-s)%xd(10,s)|0)*i:0),c)for(;;)if(m==0){(h[0]+=i)==$a&&(h[0]=1,++e.e);break}else{if(h[m]+=i,h[m]!=$a)break;h[m--]=0,i=1}for(r=h.length;h[--r]===0;)h.pop();if(Mn&&(e.e>Mv||e.e<-Mv))throw Error(r4+ga(e));return e}function sq(e,t){var n,r,s,i,o,l,c,d,m,h,p=e.constructor,b=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),Mn?bn(t,b):t;if(c=e.d,h=t.d,r=t.e,d=e.e,c=c.slice(),o=d-r,o){for(m=o<0,m?(n=c,o=-o,l=h.length):(n=h,r=d,l=c.length),s=Math.max(Math.ceil(b/An),l)+2,o>s&&(o=s,n.length=1),n.reverse(),s=o;s--;)n.push(0);n.reverse()}else{for(s=c.length,l=h.length,m=s<l,m&&(l=s),s=0;s<l;s++)if(c[s]!=h[s]){m=c[s]<h[s];break}o=0}for(m&&(n=c,c=h,h=n,t.s=-t.s),l=c.length,s=h.length-l;s>0;--s)c[l++]=0;for(s=h.length;s>o;){if(c[--s]<h[s]){for(i=s;i&&c[--i]===0;)c[i]=$a-1;--c[i],c[s]+=$a}c[s]-=h[s]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(t.d=c,t.e=r,Mn?bn(t,b):t):new p(0)}function au(e,t,n){var r,s=ga(e),i=Vi(e.d),o=i.length;return t?(n&&(r=n-o)>0?i=i.charAt(0)+"."+i.slice(1)+tc(r):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+tc(-s-1)+i,n&&(r=n-o)>0&&(i+=tc(r))):s>=o?(i+=tc(s+1-o),n&&(r=n-s-1)>0&&(i=i+"."+tc(r))):((r=s+1)<o&&(i=i.slice(0,r)+"."+i.slice(r)),n&&(r=n-o)>0&&(s+1===o&&(i+="."),i+=tc(r))),e.s<0?"-"+i:i}function WR(e,t){if(e.length>t)return e.length=t,!0}function iq(e){var t,n,r;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(zd+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return VR(o,i.toString())}else if(typeof i!="string")throw Error(zd+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,PCe.test(i))VR(o,i);else throw Error(zd+i)}if(s.prototype=ot,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=iq,s.config=s.set=DCe,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return s.config(e),s}function DCe(e){if(!e||typeof e!="object")throw Error(qs+"Object expected");var t,n,r,s=["precision",1,Af,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((r=e[n=s[t]])!==void 0)if(Ef(r)===r&&r>=s[t+1]&&r<=s[t+2])this[n]=r;else throw Error(zd+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(zd+n+": "+r);return this}var s4=iq(kCe);ds=new s4(1);const ln=s4;var OCe=e=>e,oq={},lq=e=>e===oq,qR=e=>function t(){return arguments.length===0||arguments.length===1&&lq(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},cq=(e,t)=>e===1?t:qR(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];var i=r.filter(o=>o!==oq).length;return i>=e?t(...r):cq(e-i,qR(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var d=r.map(m=>lq(m)?l.shift():m);return t(...d,...l)}))}),MCe=e=>cq(e.length,e),sT=(e,t)=>{for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},ICe=MCe((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),$Ce=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return OCe;var s=n.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce((l,c)=>c(l),i(...arguments))}};function dq(e){var t;return e===0?t=1:t=Math.floor(new ln(e).abs().log(10).toNumber())+1,t}function uq(e,t,n){for(var r=new ln(e),s=0,i=[];r.lt(t)&&s<1e5;)i.push(r.toNumber()),r=r.add(n),s++;return i}var mq=e=>{var[t,n]=e,[r,s]=[t,n];return t>n&&([r,s]=[n,t]),[r,s]},fq=(e,t,n)=>{if(e.lte(0))return new ln(0);var r=dq(e.toNumber()),s=new ln(10).pow(r),i=e.div(s),o=r!==1?.05:.1,l=new ln(Math.ceil(i.div(o).toNumber())).add(n).mul(o),c=l.mul(s);return t?new ln(c.toNumber()):new ln(Math.ceil(c.toNumber()))},RCe=(e,t,n)=>{var r=new ln(1),s=new ln(e);if(!s.isint()&&n){var i=Math.abs(e);i<1?(r=new ln(10).pow(dq(e)-1),s=new ln(Math.floor(s.div(r).toNumber())).mul(r)):i>1&&(s=new ln(Math.floor(e)))}else e===0?s=new ln(Math.floor((t-1)/2)):n||(s=new ln(Math.floor(e)));var o=Math.floor((t-1)/2),l=$Ce(ICe(c=>s.add(new ln(c-o).mul(r)).toNumber()),sT);return l(0,t)},hq=function(t,n,r,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(r-1)))return{step:new ln(0),tickMin:new ln(0),tickMax:new ln(0)};var o=fq(new ln(n).sub(t).div(r-1),s,i),l;t<=0&&n>=0?l=new ln(0):(l=new ln(t).add(n).div(2),l=l.sub(new ln(l).mod(o)));var c=Math.ceil(l.sub(t).div(o).toNumber()),d=Math.ceil(new ln(n).sub(l).div(o).toNumber()),m=c+d+1;return m>r?hq(t,n,r,s,i+1):(m<r&&(d=n>0?d+(r-m):d,c=n>0?c:c+(r-m)),{step:o,tickMin:l.sub(new ln(c).mul(o)),tickMax:l.add(new ln(d).mul(o))})},zCe=function(t){var[n,r]=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(s,2),[l,c]=mq([n,r]);if(l===-1/0||c===1/0){var d=c===1/0?[l,...sT(0,s-1).map(()=>1/0)]:[...sT(0,s-1).map(()=>-1/0),c];return n>r?d.reverse():d}if(l===c)return RCe(l,s,i);var{step:m,tickMin:h,tickMax:p}=hq(l,c,o,i,0),b=uq(h,p.add(new ln(.1).mul(m)),m);return n>r?b.reverse():b},UCe=function(t,n){var[r,s]=t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,l]=mq([r,s]);if(o===-1/0||l===1/0)return[r,s];if(o===l)return[o];var c=Math.max(n,2),d=fq(new ln(l).sub(o).div(c-1),i,0),m=[...uq(new ln(o),new ln(l),d),l];return i===!1&&(m=m.map(h=>Math.round(h))),r>s?m.reverse():m},gq=e=>e.rootProps.maxBarSize,FCe=e=>e.rootProps.barGap,pq=e=>e.rootProps.barCategoryGap,BCe=e=>e.rootProps.barSize,Px=e=>e.rootProps.stackOffset,xq=e=>e.rootProps.reverseStackOrder,i4=e=>e.options.chartName,o4=e=>e.rootProps.syncId,yq=e=>e.rootProps.syncMethod,l4=e=>e.options.eventEmitter,Ja={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Uo={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},ls={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},KN=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},HCe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Uo.angleAxisId,includeHidden:!1,name:void 0,reversed:Uo.reversed,scale:Uo.scale,tick:Uo.tick,tickCount:void 0,ticks:void 0,type:Uo.type,unit:void 0},GCe={allowDataOverflow:ls.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ls.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ls.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ls.scale,tick:ls.tick,tickCount:ls.tickCount,ticks:void 0,type:ls.type,unit:void 0},VCe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Uo.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Uo.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Uo.scale,tick:Uo.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},WCe={allowDataOverflow:ls.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ls.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ls.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ls.scale,tick:ls.tick,tickCount:ls.tickCount,ticks:void 0,type:"category",unit:void 0},c4=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?VCe:HCe,d4=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?WCe:GCe,QN=e=>e.polarOptions,u4=ze([xl,yl,La],KW),bq=ze([QN,u4],(e,t)=>{if(e!=null)return ur(e.innerRadius,t,0)}),vq=ze([QN,u4],(e,t)=>{if(e!=null)return ur(e.outerRadius,t,t*.8)}),qCe=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},wq=ze([QN],qCe);ze([c4,wq],KN);var Nq=ze([u4,bq,vq],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});ze([d4,Nq],KN);var jq=ze([Wt,QN,bq,vq,xl,yl],(e,t,n,r,s,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||r==null)){var{cx:o,cy:l,startAngle:c,endAngle:d}=t;return{cx:ur(o,s,s/2),cy:ur(l,i,i/2),innerRadius:n,outerRadius:r,startAngle:c,endAngle:d,clockWise:!1}}}),Un=(e,t)=>t,Dx=(e,t,n)=>n;function m4(e){return e?.id}function Cq(e,t,n){var{chartData:r=[]}=t,{allowDuplicatedCategory:s,dataKey:i}=n,o=new Map;return e.forEach(l=>{var c,d=(c=l.data)!==null&&c!==void 0?c:r;if(!(d==null||d.length===0)){var m=m4(l);d.forEach((h,p)=>{var b=i==null||s?p:String(En(h,i,null)),v=En(h,l.dataKey,0),x;o.has(b)?x=o.get(b):x={},Object.assign(x,{[m]:v}),o.set(b,x)})}}),Array.from(o.values())}function XN(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var ZN=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function JN(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function YCe(e,t){if(e.length===t.length){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return!1}var ka=e=>{var t=Wt(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Tf=e=>e.tooltip.settings.axisId;function YR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Iv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YR(Object(n),!0).forEach(function(r){KCe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function KCe(e,t,n){return(t=QCe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QCe(e){var t=XCe(e,"string");return typeof t=="symbol"?t:t+""}function XCe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var iT=[0,"auto"],Ma={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Sq=(e,t)=>e.cartesianAxis.xAxis[t],vl=(e,t)=>{var n=Sq(e,t);return n??Ma},Ia={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:iT,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Tx},_q=(e,t)=>e.cartesianAxis.yAxis[t],wl=(e,t)=>{var n=_q(e,t);return n??Ia},ZCe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},f4=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??ZCe},Gn=(e,t,n)=>{switch(t){case"xAxis":return vl(e,n);case"yAxis":return wl(e,n);case"zAxis":return f4(e,n);case"angleAxis":return c4(e,n);case"radiusAxis":return d4(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},JCe=(e,t,n)=>{switch(t){case"xAxis":return vl(e,n);case"yAxis":return wl(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},Ox=(e,t,n)=>{switch(t){case"xAxis":return vl(e,n);case"yAxis":return wl(e,n);case"angleAxis":return c4(e,n);case"radiusAxis":return d4(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},Aq=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function h4(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var g4=e=>e.graphicalItems.cartesianItems,eSe=ze([Un,Dx],h4),p4=(e,t,n)=>e.filter(n).filter(r=>t?.includeHidden===!0?!0:!r.hide),Mx=ze([g4,Gn,eSe],p4,{memoizeOptions:{resultEqualityCheck:JN}}),Eq=ze([Mx],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(XN)),Tq=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),tSe=ze([Mx],Tq),x4=e=>e.map(t=>t.data).filter(Boolean).flat(1),nSe=ze([Mx],x4,{memoizeOptions:{resultEqualityCheck:JN}}),y4=(e,t)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:s}=t;return e.length>0?e:n.slice(r,s+1)},b4=ze([nSe,eq],y4),v4=(e,t,n)=>t?.dataKey!=null?e.map(r=>({value:En(r,t.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>e.map(s=>({value:En(s,r)}))):e.map(r=>({value:r})),ej=ze([b4,Gn,Mx],v4);function Lq(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Ob(e){if(to(e)||e instanceof Date){var t=Number(e);if(Bn(t))return t}}function KR(e){if(Array.isArray(e)){var t=[Ob(e[0]),Ob(e[1])];return vc(t)?t:void 0}var n=Ob(e);if(n!=null)return[n,n]}function ll(e){return e.map(Ob).filter(iwe)}function aSe(e,t,n){return!n||typeof t!="number"||yi(t)?[]:n.length?ll(n.flatMap(r=>{var s=En(e,r.dataKey),i,o;if(Array.isArray(s)?[i,o]=s:i=o=s,!(!Bn(i)||!Bn(o)))return[t-i,t+o]})):[]}var Pa=e=>{var t=ka(e),n=Tf(e);return Ox(e,t,n)},Ix=ze([Pa],e=>e?.dataKey),rSe=ze([Eq,eq,Pa],Cq),kq=(e,t,n,r)=>{var s={},i=t.reduce((o,l)=>{if(l.stackId==null)return o;var c=o[l.stackId];return c==null&&(c=[]),c.push(l),o[l.stackId]=c,o},s);return Object.fromEntries(Object.entries(i).map(o=>{var[l,c]=o,d=r?[...c].reverse():c,m=d.map(m4);return[l,{stackedData:uje(e,m,n),graphicalItems:d}]}))},oT=ze([rSe,Eq,Px,xq],kq),Pq=(e,t,n,r)=>{var{dataStartIndex:s,dataEndIndex:i}=t;if(r==null&&n!=="zAxis"){var o=pje(e,s,i);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},sSe=ze([Gn],e=>e.allowDataOverflow),w4=e=>{var t;if(e==null||!("domain"in e))return iT;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var n=ll(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:iT},N4=ze([Gn],w4),j4=ze([N4,sSe],tq),iSe=ze([oT,bl,Un,j4],Pq,{memoizeOptions:{resultEqualityCheck:ZN}}),tj=e=>e.errorBars,oSe=(e,t,n)=>e.flatMap(r=>t[r.id]).filter(Boolean).filter(r=>Lq(n,r)),$v=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var s=n.filter(Boolean);if(s.length!==0){var i=s.flat(),o=Math.min(...i),l=Math.max(...i);return[o,l]}},C4=(e,t,n,r,s)=>{var i,o;if(n.length>0&&e.forEach(l=>{n.forEach(c=>{var d,m,h=(d=r[c.id])===null||d===void 0?void 0:d.filter(j=>Lq(s,j)),p=En(l,(m=t.dataKey)!==null&&m!==void 0?m:c.dataKey),b=aSe(l,p,h);if(b.length>=2){var v=Math.min(...b),x=Math.max(...b);(i==null||v<i)&&(i=v),(o==null||x>o)&&(o=x)}var w=KR(p);w!=null&&(i=i==null?w[0]:Math.min(i,w[0]),o=o==null?w[1]:Math.max(o,w[1]))})}),t?.dataKey!=null&&e.forEach(l=>{var c=KR(En(l,t.dataKey));c!=null&&(i=i==null?c[0]:Math.min(i,c[0]),o=o==null?c[1]:Math.max(o,c[1]))}),Bn(i)&&Bn(o))return[i,o]},lSe=ze([b4,Gn,tSe,tj,Un],C4,{memoizeOptions:{resultEqualityCheck:ZN}});function cSe(e){var{value:t}=e;if(to(t)||t instanceof Date)return t}var dSe=(e,t,n)=>{var r=e.map(cSe).filter(s=>s!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&TV(r))?JW(0,e.length):t.allowDuplicatedCategory?r:Array.from(new Set(r))},Dq=e=>e.referenceElements.dots,Lf=(e,t,n)=>e.filter(r=>r.ifOverflow==="extendDomain").filter(r=>t==="xAxis"?r.xAxisId===n:r.yAxisId===n),uSe=ze([Dq,Un,Dx],Lf),Oq=e=>e.referenceElements.areas,mSe=ze([Oq,Un,Dx],Lf),Mq=e=>e.referenceElements.lines,fSe=ze([Mq,Un,Dx],Lf),Iq=(e,t)=>{if(e!=null){var n=ll(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},hSe=ze(uSe,Un,Iq),$q=(e,t)=>{if(e!=null){var n=ll(e.flatMap(r=>[t==="xAxis"?r.x1:r.y1,t==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},gSe=ze([mSe,Un],$q);function pSe(e){var t;if(e.x!=null)return ll([e.x]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(r=>r.x);return n==null||n.length===0?[]:ll(n)}function xSe(e){var t;if(e.y!=null)return ll([e.y]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(r=>r.y);return n==null||n.length===0?[]:ll(n)}var Rq=(e,t)=>{if(e!=null){var n=e.flatMap(r=>t==="xAxis"?pSe(r):xSe(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},ySe=ze([fSe,Un],Rq),bSe=ze(hSe,ySe,gSe,(e,t,n)=>$v(e,n,t)),S4=(e,t,n,r,s,i,o,l)=>{if(n!=null)return n;var c=o==="vertical"&&l==="xAxis"||o==="horizontal"&&l==="yAxis",d=c?$v(r,i,s):$v(i,s);return LCe(t,d,e.allowDataOverflow)},vSe=ze([Gn,N4,j4,iSe,lSe,bSe,Wt,Un],S4,{memoizeOptions:{resultEqualityCheck:ZN}}),wSe=[0,1],_4=(e,t,n,r,s,i,o)=>{if(!((e==null||n==null||n.length===0)&&o===void 0)){var{dataKey:l,type:c}=e,d=yu(t,i);if(d&&l==null){var m;return JW(0,(m=n?.length)!==null&&m!==void 0?m:0)}return c==="category"?dSe(r,e,d):s==="expand"?wSe:o}},A4=ze([Gn,Wt,b4,ej,Px,Un,vSe],_4),zq=(e,t,n,r,s)=>{if(e!=null){var{scale:i,type:o}=e;if(i==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":o==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":o==="category"?"band":"linear";if(typeof i=="string"){var l="scale".concat(Cx(i));return l in Og?l:"point"}}},kf=ze([Gn,Wt,Aq,i4,Un],zq);function NSe(e){if(e!=null){if(e in Og)return Og[e]();var t="scale".concat(Cx(e));if(t in Og)return Og[t]()}}function E4(e,t,n,r){if(!(n==null||r==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(r);var s=NSe(t);if(s!=null){var i=s.domain(n).range(r);return ije(i),i}}}var T4=(e,t,n)=>{var r=w4(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&vc(e))return zCe(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&vc(e))return UCe(e,t.tickCount,t.allowDecimals)}},L4=ze([A4,Ox,kf],T4),k4=(e,t,n,r)=>{if(r!=="angleAxis"&&e?.type==="number"&&vc(t)&&Array.isArray(n)&&n.length>0){var s=t[0],i=n[0],o=t[1],l=n[n.length-1];return[Math.min(s,i),Math.max(o,l)]}return t},jSe=ze([Gn,A4,L4,Un],k4),CSe=ze(ej,Gn,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,r=Array.from(ll(e.map(h=>h.value))).sort((h,p)=>h-p),s=r[0],i=r[r.length-1];if(s==null||i==null)return 1/0;var o=i-s;if(o===0)return 1/0;for(var l=0;l<r.length-1;l++){var c=r[l],d=r[l+1];if(!(c==null||d==null)){var m=d-c;n=Math.min(n,m)}}return n/o}}),Uq=ze(CSe,Wt,pq,La,(e,t,n,r,s)=>s,(e,t,n,r,s)=>{if(!Bn(e))return 0;var i=t==="vertical"?r.height:r.width;if(s==="gap")return e*i/2;if(s==="no-gap"){var o=ur(n,e*i),l=e*i/2;return l-o-(l-o)/i*o}return 0}),SSe=(e,t,n)=>{var r=vl(e,t);return r==null||typeof r.padding!="string"?0:Uq(e,"xAxis",t,n,r.padding)},_Se=(e,t,n)=>{var r=wl(e,t);return r==null||typeof r.padding!="string"?0:Uq(e,"yAxis",t,n,r.padding)},ASe=ze(vl,SSe,(e,t)=>{var n,r;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((n=s.left)!==null&&n!==void 0?n:0)+t,right:((r=s.right)!==null&&r!==void 0?r:0)+t}}),ESe=ze(wl,_Se,(e,t)=>{var n,r;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((n=s.top)!==null&&n!==void 0?n:0)+t,bottom:((r=s.bottom)!==null&&r!==void 0?r:0)+t}}),TSe=ze([La,ASe,zN,RN,(e,t,n)=>n],(e,t,n,r,s)=>{var{padding:i}=r;return s?[i.left,n.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),LSe=ze([La,Wt,ESe,zN,RN,(e,t,n)=>n],(e,t,n,r,s,i)=>{var{padding:o}=s;return i?[r.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),$x=(e,t,n,r)=>{var s;switch(t){case"xAxis":return TSe(e,n,r);case"yAxis":return LSe(e,n,r);case"zAxis":return(s=f4(e,n))===null||s===void 0?void 0:s.range;case"angleAxis":return wq(e);case"radiusAxis":return Nq(e,n);default:return}},Fq=ze([Gn,$x],KN),nj=ze([Gn,kf,jSe,Fq],E4);ze([Mx,tj,Un],oSe);function Bq(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var aj=(e,t)=>t,rj=(e,t,n)=>n,kSe=ze(IN,aj,rj,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(Bq)),PSe=ze($N,aj,rj,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(Bq)),Hq=(e,t)=>({width:e.width,height:t.height}),DSe=(e,t)=>{var n=typeof t.width=="number"?t.width:Tx;return{width:n,height:e.height}},Gq=ze(La,vl,Hq),OSe=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},MSe=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},ISe=ze(yl,La,kSe,aj,rj,(e,t,n,r,s)=>{var i={},o;return n.forEach(l=>{var c=Hq(t,l);o==null&&(o=OSe(t,r,e));var d=r==="top"&&!s||r==="bottom"&&s;i[l.id]=o-Number(d)*c.height,o+=(d?-1:1)*c.height}),i}),$Se=ze(xl,La,PSe,aj,rj,(e,t,n,r,s)=>{var i={},o;return n.forEach(l=>{var c=DSe(t,l);o==null&&(o=MSe(t,r,e));var d=r==="left"&&!s||r==="right"&&s;i[l.id]=o-Number(d)*c.width,o+=(d?-1:1)*c.width}),i}),RSe=(e,t)=>{var n=vl(e,t);if(n!=null)return ISe(e,n.orientation,n.mirror)},zSe=ze([La,vl,RSe,(e,t)=>t],(e,t,n,r)=>{if(t!=null){var s=n?.[r];return s==null?{x:e.left,y:0}:{x:e.left,y:s}}}),USe=(e,t)=>{var n=wl(e,t);if(n!=null)return $Se(e,n.orientation,n.mirror)},FSe=ze([La,wl,USe,(e,t)=>t],(e,t,n,r)=>{if(t!=null){var s=n?.[r];return s==null?{x:0,y:e.top}:{x:s,y:e.top}}}),Vq=ze(La,wl,(e,t)=>{var n=typeof t.width=="number"?t.width:Tx;return{width:n,height:e.height}}),QR=(e,t,n)=>{switch(t){case"xAxis":return Gq(e,n).width;case"yAxis":return Vq(e,n).height;default:return}},Wq=(e,t,n,r)=>{if(n!=null){var{allowDuplicatedCategory:s,type:i,dataKey:o}=n,l=yu(e,r),c=t.map(d=>d.value);if(o&&l&&i==="category"&&s&&TV(c))return c}},P4=ze([Wt,ej,Gn,Un],Wq),qq=(e,t,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:s,scale:i}=n,o=yu(e,r);if(o&&(s==="number"||i!=="auto"))return t.map(l=>l.value)}},D4=ze([Wt,ej,Ox,Un],qq),XR=ze([Wt,JCe,kf,nj,P4,D4,$x,L4,Un],(e,t,n,r,s,i,o,l,c)=>{if(t!=null){var d=yu(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:i,duplicateDomain:s,isCategorical:d,niceTicks:l,range:o,realScaleType:n,scale:r}}}),BSe=(e,t,n,r,s,i,o,l,c)=>{if(!(t==null||r==null)){var d=yu(e,c),{type:m,ticks:h,tickCount:p}=t,b=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,v=m==="category"&&r.bandwidth?r.bandwidth()/b:0;v=c==="angleAxis"&&i!=null&&i.length>=2?za(i[0]-i[1])*2*v:v;var x=h||s;if(x){var w=x.map((j,C)=>{var S=o?o.indexOf(j):j;return{index:C,coordinate:r(S)+v,value:j,offset:v}});return w.filter(j=>Bn(j.coordinate))}return d&&l?l.map((j,C)=>({coordinate:r(j)+v,value:j,index:C,offset:v})).filter(j=>Bn(j.coordinate)):r.ticks?r.ticks(p).map(j=>({coordinate:r(j)+v,value:j,offset:v})):r.domain().map((j,C)=>({coordinate:r(j)+v,value:o?o[j]:j,index:C,offset:v}))}},Yq=ze([Wt,Ox,kf,nj,L4,$x,P4,D4,Un],BSe),HSe=(e,t,n,r,s,i,o)=>{if(!(t==null||n==null||r==null||r[0]===r[1])){var l=yu(e,o),{tickCount:c}=t,d=0;return d=o==="angleAxis"&&r?.length>=2?za(r[0]-r[1])*2*d:d,l&&i?i.map((m,h)=>({coordinate:n(m)+d,value:m,index:h,offset:d})):n.ticks?n.ticks(c).map(m=>({coordinate:n(m)+d,value:m,offset:d})):n.domain().map((m,h)=>({coordinate:n(m)+d,value:s?s[m]:m,index:h,offset:d}))}},df=ze([Wt,Ox,nj,$x,P4,D4,Un],HSe),uf=ze(Gn,nj,(e,t)=>{if(!(e==null||t==null))return Iv(Iv({},e),{},{scale:t})}),GSe=ze([Gn,kf,A4,Fq],E4);ze((e,t,n)=>f4(e,n),GSe,(e,t)=>{if(!(e==null||t==null))return Iv(Iv({},e),{},{scale:t})});var VSe=ze([Wt,IN,$N],(e,t,n)=>{switch(e){case"horizontal":return t.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Kq=e=>e.options.defaultTooltipEventType,Qq=e=>e.options.validateTooltipEventTypes;function Xq(e,t,n){if(e==null)return t;var r=e?"axis":"item";return n==null?t:n.includes(r)?r:t}function O4(e,t){var n=Kq(e),r=Qq(e);return Xq(t,n,r)}function WSe(e){return ht(t=>O4(t,e))}var Zq=(e,t)=>{var n,r=Number(t);if(!(yi(r)||t==null))return r>=0?e==null||(n=e[r])===null||n===void 0?void 0:n.value:void 0},qSe=e=>e.tooltip.settings,rc={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},YSe={itemInteraction:{click:rc,hover:rc},axisInteraction:{click:rc,hover:rc},keyboardInteraction:rc,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Jq=qr({name:"tooltip",initialState:YSe,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:On()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:n,next:r}=t.payload,s=gi(e).tooltipItemPayloads.indexOf(n);s>-1&&(e.tooltipItemPayloads[s]=r)},prepare:On()},removeTooltipEntrySettings:{reducer(e,t){var n=gi(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},prepare:On()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:KSe,replaceTooltipEntrySettings:QSe,removeTooltipEntrySettings:XSe,setTooltipSettingsState:ZSe,setActiveMouseOverItemIndex:eY,mouseLeaveItem:JSe,mouseLeaveChart:tY,setActiveClickItemIndex:e2e,setMouseOverAxisIndex:nY,setMouseClickAxisIndex:t2e,setSyncInteraction:lT,setKeyboardInteraction:cT}=Jq.actions,n2e=Jq.reducer;function ZR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Oy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ZR(Object(n),!0).forEach(function(r){a2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function a2e(e,t,n){return(t=r2e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r2e(e){var t=s2e(e,"string");return typeof t=="symbol"?t:t+""}function s2e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function i2e(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function o2e(e){return e.index!=null}var aY=(e,t,n,r)=>{if(t==null)return rc;var s=i2e(e,t,n);if(s==null)return rc;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(o2e(s)){if(i)return Oy(Oy({},s),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return Oy(Oy({},rc),{},{coordinate:s.coordinate})};function l2e(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var n=Number(e);return Number.isFinite(n)?n:void 0}function c2e(e,t){var n=l2e(e),r=t[0],s=t[1];if(n===void 0)return!1;var i=Math.min(r,s),o=Math.max(r,s);return n>=i&&n<=o}function d2e(e,t,n){if(n==null||t==null)return!0;var r=En(e,t);return r==null||!vc(n)?!0:c2e(r,n)}var M4=(e,t,n,r)=>{var s=e?.index;if(s==null)return null;var i=Number(s);if(!Bn(i))return s;var o=0,l=1/0;t.length>0&&(l=t.length-1);var c=Math.max(o,Math.min(i,l)),d=t[c];return d==null||d2e(d,n,r)?String(c):null},rY=(e,t,n,r,s,i,o,l)=>{if(!(i==null||l==null)){var c=o[0],d=c==null?void 0:l(c.positions,i);if(d!=null)return d;var m=s?.[Number(i)];if(m)switch(n){case"horizontal":return{x:m.coordinate,y:(r.top+t)/2};default:return{x:(r.left+e)/2,y:m.coordinate}}}},sY=(e,t,n,r)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;if(n==="hover"?s=e.itemInteraction.hover.graphicalItemId:s=e.itemInteraction.click.graphicalItemId,s==null&&r!=null){var i=e.tooltipItemPayloads[0];return i!=null?[i]:[]}return e.tooltipItemPayloads.filter(o=>{var l;return((l=o.settings)===null||l===void 0?void 0:l.graphicalItemId)===s})},Rx=e=>e.options.tooltipPayloadSearcher,Pf=e=>e.tooltip;function JR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function ez(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JR(Object(n),!0).forEach(function(r){u2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function u2e(e,t,n){return(t=m2e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m2e(e){var t=f2e(e,"string");return typeof t=="symbol"?t:t+""}function f2e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function h2e(e,t){return e??t}var iY=(e,t,n,r,s,i,o)=>{if(!(t==null||i==null)){var{chartData:l,computedData:c,dataStartIndex:d,dataEndIndex:m}=n,h=[];return e.reduce((p,b)=>{var v,{dataDefinedOnItem:x,settings:w}=b,j=h2e(x,l),C=Array.isArray(j)?vW(j,d,m):j,S=(v=w?.dataKey)!==null&&v!==void 0?v:r,_=w?.nameKey,E;if(r&&Array.isArray(C)&&!Array.isArray(C[0])&&o==="axis"?E=swe(C,r,s):E=i(C,t,c,_),Array.isArray(E))E.forEach(T=>{var R=ez(ez({},w),{},{name:T.name,unit:T.unit,color:void 0,fill:void 0});p.push(F6({tooltipEntrySettings:R,dataKey:T.dataKey,payload:T.payload,value:En(T.payload,T.dataKey),name:T.name}))});else{var A;p.push(F6({tooltipEntrySettings:w,dataKey:S,payload:E,value:En(E,S),name:(A=En(E,_))!==null&&A!==void 0?A:w?.name}))}return p},h)}},I4=ze([Pa,Wt,Aq,i4,ka],zq),g2e=ze([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),p2e=ze([ka,Tf],h4),Df=ze([g2e,Pa,p2e],p4,{memoizeOptions:{resultEqualityCheck:JN}}),x2e=ze([Df],e=>e.filter(XN)),y2e=ze([Df],x4,{memoizeOptions:{resultEqualityCheck:JN}}),Of=ze([y2e,bl],y4),b2e=ze([x2e,bl,Pa],Cq),$4=ze([Of,Pa,Df],v4),oY=ze([Pa],w4),v2e=ze([Pa],e=>e.allowDataOverflow),lY=ze([oY,v2e],tq),w2e=ze([Df],e=>e.filter(XN)),N2e=ze([b2e,w2e,Px,xq],kq),j2e=ze([N2e,bl,ka,lY],Pq),C2e=ze([Df],Tq),S2e=ze([Of,Pa,C2e,tj,ka],C4,{memoizeOptions:{resultEqualityCheck:ZN}}),_2e=ze([Dq,ka,Tf],Lf),A2e=ze([_2e,ka],Iq),E2e=ze([Oq,ka,Tf],Lf),T2e=ze([E2e,ka],$q),L2e=ze([Mq,ka,Tf],Lf),k2e=ze([L2e,ka],Rq),P2e=ze([A2e,k2e,T2e],$v),D2e=ze([Pa,oY,lY,j2e,S2e,P2e,Wt,ka],S4),zx=ze([Pa,Wt,Of,$4,Px,ka,D2e],_4),O2e=ze([zx,Pa,I4],T4),M2e=ze([Pa,zx,O2e,ka],k4),cY=e=>{var t=ka(e),n=Tf(e),r=!1;return $x(e,t,n,r)},dY=ze([Pa,cY],KN),uY=ze([Pa,I4,M2e,dY],E4),I2e=ze([Wt,$4,Pa,ka],Wq),$2e=ze([Wt,$4,Pa,ka],qq),R2e=(e,t,n,r,s,i,o,l)=>{if(t){var{type:c}=t,d=yu(e,l);if(r){var m=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,h=c==="category"&&r.bandwidth?r.bandwidth()/m:0;return h=l==="angleAxis"&&s!=null&&s?.length>=2?za(s[0]-s[1])*2*h:h,d&&o?o.map((p,b)=>({coordinate:r(p)+h,value:p,index:b,offset:h})):r.domain().map((p,b)=>({coordinate:r(p)+h,value:i?i[p]:p,index:b,offset:h}))}}},Nl=ze([Wt,Pa,I4,uY,cY,I2e,$2e,ka],R2e),R4=ze([Kq,Qq,qSe],(e,t,n)=>Xq(n.shared,e,t)),mY=e=>e.tooltip.settings.trigger,z4=e=>e.tooltip.settings.defaultIndex,Ux=ze([Pf,R4,mY,z4],aY),ru=ze([Ux,Of,Ix,zx],M4),fY=ze([Nl,ru],Zq),U4=ze([Ux],e=>{if(e)return e.dataKey}),z2e=ze([Ux],e=>{if(e)return e.graphicalItemId}),hY=ze([Pf,R4,mY,z4],sY),U2e=ze([xl,yl,Wt,La,Nl,z4,hY,Rx],rY),F2e=ze([Ux,U2e],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),B2e=ze([Ux],e=>{var t;return(t=e?.active)!==null&&t!==void 0?t:!1}),H2e=ze([hY,ru,bl,Ix,fY,Rx,R4],iY);ze([H2e],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function tz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function nz(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tz(Object(n),!0).forEach(function(r){G2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function G2e(e,t,n){return(t=V2e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V2e(e){var t=W2e(e,"string");return typeof t=="symbol"?t:t+""}function W2e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var q2e=()=>ht(Pa),Y2e=()=>{var e=q2e(),t=ht(Nl),n=ht(uY);return Sv(!e||!n?void 0:nz(nz({},e),{},{scale:n}),t)};function az(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function bm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?az(Object(n),!0).forEach(function(r){K2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):az(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function K2e(e,t,n){return(t=Q2e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q2e(e){var t=X2e(e,"string");return typeof t=="symbol"?t:t+""}function X2e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Z2e=(e,t,n,r)=>{var s=t.find(i=>i&&i.index===n);if(s){if(e==="horizontal")return{x:s.coordinate,y:r.chartY};if(e==="vertical")return{x:r.chartX,y:s.coordinate}}return{x:0,y:0}},J2e=(e,t,n,r)=>{var s=t.find(d=>d&&d.index===n);if(s){if(e==="centric"){var i=s.coordinate,{radius:o}=r;return bm(bm(bm({},r),ha(r.cx,r.cy,o,i)),{},{angle:i,radius:o})}var l=s.coordinate,{angle:c}=r;return bm(bm(bm({},r),ha(r.cx,r.cy,l,c)),{},{angle:c,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function e_e(e,t){var{chartX:n,chartY:r}=e;return n>=t.left&&n<=t.left+t.width&&r>=t.top&&r<=t.top+t.height}var gY=(e,t,n,r,s)=>{var i,o=(i=t?.length)!==null&&i!==void 0?i:0;if(o<=1||e==null)return 0;if(r==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var l=0;l<o;l++){var c,d,m,h,p,b=l>0?(c=n[l-1])===null||c===void 0?void 0:c.coordinate:(d=n[o-1])===null||d===void 0?void 0:d.coordinate,v=(m=n[l])===null||m===void 0?void 0:m.coordinate,x=l>=o-1?(h=n[0])===null||h===void 0?void 0:h.coordinate:(p=n[l+1])===null||p===void 0?void 0:p.coordinate,w=void 0;if(!(b==null||v==null||x==null))if(za(v-b)!==za(x-v)){var j=[];if(za(x-v)===za(s[1]-s[0])){w=x;var C=v+s[1]-s[0];j[0]=Math.min(C,(C+b)/2),j[1]=Math.max(C,(C+b)/2)}else{w=b;var S=x+s[1]-s[0];j[0]=Math.min(v,(S+v)/2),j[1]=Math.max(v,(S+v)/2)}var _=[Math.min(v,(w+v)/2),Math.max(v,(w+v)/2)];if(e>_[0]&&e<=_[1]||e>=j[0]&&e<=j[1]){var E;return(E=n[l])===null||E===void 0?void 0:E.index}}else{var A=Math.min(b,x),T=Math.max(b,x);if(e>(A+v)/2&&e<=(T+v)/2){var R;return(R=n[l])===null||R===void 0?void 0:R.index}}}else if(t)for(var U=0;U<o;U++){var W=t[U];if(W!=null){var I=t[U+1],M=t[U-1];if(U===0&&I!=null&&e<=(W.coordinate+I.coordinate)/2||U===o-1&&M!=null&&e>(W.coordinate+M.coordinate)/2||U>0&&U<o-1&&M!=null&&I!=null&&e>(W.coordinate+M.coordinate)/2&&e<=(W.coordinate+I.coordinate)/2)return W.index}}return-1},t_e=()=>ht(i4),F4=(e,t)=>t,pY=(e,t,n)=>n,B4=(e,t,n,r)=>r,n_e=ze(Nl,e=>_N(e,t=>t.coordinate)),H4=ze([Pf,F4,pY,B4],aY),G4=ze([H4,Of,Ix,zx],M4),a_e=(e,t,n)=>{if(t!=null){var r=Pf(e);return t==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},xY=ze([Pf,F4,pY,B4],sY),Rv=ze([xl,yl,Wt,La,Nl,B4,xY,Rx],rY),r_e=ze([H4,Rv],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),yY=ze([Nl,G4],Zq),s_e=ze([xY,G4,bl,Ix,yY,Rx,F4],iY),i_e=ze([H4,G4],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),o_e=(e,t,n,r,s,i,o)=>{if(!(!e||!n||!r||!s)&&e_e(e,o)){var l=xje(e,t),c=gY(l,i,s,n,r),d=Z2e(t,s,c,e);return{activeIndex:String(c),activeCoordinate:d}}},l_e=(e,t,n,r,s,i,o)=>{if(!(!e||!r||!s||!i||!n)){var l=bCe(e,n);if(l){var c=yje(l,t),d=gY(c,o,i,r,s),m=J2e(t,i,d,l);return{activeIndex:String(d),activeCoordinate:m}}}},c_e=(e,t,n,r,s,i,o,l)=>{if(!(!e||!t||!r||!s||!i))return t==="horizontal"||t==="vertical"?o_e(e,t,r,s,i,o,l):l_e(e,t,n,r,s,i,o)},d_e=ze(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,n)=>n,(e,t,n)=>{if(t!=null){var r=e[t];if(r!=null)return n?r.panoramaElement:r.element}}),u_e=ze(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(r=>parseInt(r,10)).concat(Object.values(Ja)),n=Array.from(new Set(t));return n.sort((r,s)=>r-s)},{memoizeOptions:{resultEqualityCheck:YCe}});function rz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function sz(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rz(Object(n),!0).forEach(function(r){m_e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function m_e(e,t,n){return(t=f_e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f_e(e){var t=h_e(e,"string");return typeof t=="symbol"?t:t+""}function h_e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var g_e={},p_e={zIndexMap:Object.values(Ja).reduce((e,t)=>sz(sz({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),g_e)},x_e=new Set(Object.values(Ja));function y_e(e){return x_e.has(e)}var bY=qr({name:"zIndex",initialState:p_e,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]?e.zIndexMap[n].consumers+=1:e.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:On()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(e.zIndexMap[n].consumers-=1,e.zIndexMap[n].consumers<=0&&!y_e(n)&&delete e.zIndexMap[n])},prepare:On()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:n,element:r,isPanorama:s}=t.payload;e.zIndexMap[n]?s?e.zIndexMap[n].panoramaElement=r:e.zIndexMap[n].element=r:e.zIndexMap[n]={consumers:0,element:s?void 0:r,panoramaElement:s?r:void 0}},prepare:On()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(t.payload.isPanorama?e.zIndexMap[n].panoramaElement=void 0:e.zIndexMap[n].element=void 0)},prepare:On()}}}),{registerZIndexPortal:b_e,unregisterZIndexPortal:v_e,registerZIndexPortalElement:w_e,unregisterZIndexPortalElement:N_e}=bY.actions,j_e=bY.reducer;function Ci(e){var{zIndex:t,children:n}=e,r=Yje(),s=r&&t!==void 0&&t!==0,i=Yr(),o=zn();g.useLayoutEffect(()=>s?(o(b_e({zIndex:t})),()=>{o(v_e({zIndex:t}))}):Sx,[o,t,s]);var l=ht(c=>d_e(c,t,i));return s?l?Rp.createPortal(n,l):null:n}function dT(){return dT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dT.apply(null,arguments)}function iz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function My(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iz(Object(n),!0).forEach(function(r){C_e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function C_e(e,t,n){return(t=S_e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S_e(e){var t=__e(e,"string");return typeof t=="symbol"?t:t+""}function __e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function A_e(e){var{cursor:t,cursorComp:n,cursorProps:r}=e;return g.isValidElement(t)?g.cloneElement(t,r):g.createElement(n,r)}function E_e(e){var t,{coordinate:n,payload:r,index:s,offset:i,tooltipAxisBandSize:o,layout:l,cursor:c,tooltipEventType:d,chartName:m}=e,h=n,p=r,b=s;if(!c||!h||m!=="ScatterChart"&&d!=="axis")return null;var v,x,w;if(m==="ScatterChart")v=h,x=D1e,w=Ja.cursorLine;else if(m==="BarChart")v=O1e(l,h,i,o),x=YW,w=Ja.cursorRectangle;else if(l==="radial"&&PV(h)){var{cx:j,cy:C,radius:S,startAngle:_,endAngle:E}=QW(h);v={cx:j,cy:C,startAngle:_,endAngle:E,innerRadius:S,outerRadius:S},x=ZW,w=Ja.cursorLine}else v={points:jCe(l,h,i)},x=a4,w=Ja.cursorLine;var A=typeof c=="object"&&"className"in c?c.className:void 0,T=My(My(My(My({stroke:"#ccc",pointerEvents:"none"},i),v),pp(c)),{},{payload:p,payloadIndex:b,className:ct("recharts-tooltip-cursor",A)});return g.createElement(Ci,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:w},g.createElement(A_e,{cursor:c,cursorComp:x,cursorProps:T}))}function T_e(e){var t=Y2e(),n=LW(),r=Lx(),s=t_e();return t==null||n==null||r==null||s==null?null:g.createElement(E_e,dT({},e,{offset:n,layout:r,tooltipAxisBandSize:t,chartName:s}))}var vY=g.createContext(null),L_e=()=>g.useContext(vY),R2={exports:{}},oz;function k_e(){return oz||(oz=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,d,m){this.fn=c,this.context=d,this.once=m||!1}function i(c,d,m,h,p){if(typeof m!="function")throw new TypeError("The listener must be a function");var b=new s(m,h||c,p),v=n?n+d:d;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],b]:c._events[v].push(b):(c._events[v]=b,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new r:delete c._events[d]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],m,h;if(this._eventsCount===0)return d;for(h in m=this._events)t.call(m,h)&&d.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(m)):d},l.prototype.listeners=function(d){var m=n?n+d:d,h=this._events[m];if(!h)return[];if(h.fn)return[h.fn];for(var p=0,b=h.length,v=new Array(b);p<b;p++)v[p]=h[p].fn;return v},l.prototype.listenerCount=function(d){var m=n?n+d:d,h=this._events[m];return h?h.fn?1:h.length:0},l.prototype.emit=function(d,m,h,p,b,v){var x=n?n+d:d;if(!this._events[x])return!1;var w=this._events[x],j=arguments.length,C,S;if(w.fn){switch(w.once&&this.removeListener(d,w.fn,void 0,!0),j){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,m),!0;case 3:return w.fn.call(w.context,m,h),!0;case 4:return w.fn.call(w.context,m,h,p),!0;case 5:return w.fn.call(w.context,m,h,p,b),!0;case 6:return w.fn.call(w.context,m,h,p,b,v),!0}for(S=1,C=new Array(j-1);S<j;S++)C[S-1]=arguments[S];w.fn.apply(w.context,C)}else{var _=w.length,E;for(S=0;S<_;S++)switch(w[S].once&&this.removeListener(d,w[S].fn,void 0,!0),j){case 1:w[S].fn.call(w[S].context);break;case 2:w[S].fn.call(w[S].context,m);break;case 3:w[S].fn.call(w[S].context,m,h);break;case 4:w[S].fn.call(w[S].context,m,h,p);break;default:if(!C)for(E=1,C=new Array(j-1);E<j;E++)C[E-1]=arguments[E];w[S].fn.apply(w[S].context,C)}}return!0},l.prototype.on=function(d,m,h){return i(this,d,m,h,!1)},l.prototype.once=function(d,m,h){return i(this,d,m,h,!0)},l.prototype.removeListener=function(d,m,h,p){var b=n?n+d:d;if(!this._events[b])return this;if(!m)return o(this,b),this;var v=this._events[b];if(v.fn)v.fn===m&&(!p||v.once)&&(!h||v.context===h)&&o(this,b);else{for(var x=0,w=[],j=v.length;x<j;x++)(v[x].fn!==m||p&&!v[x].once||h&&v[x].context!==h)&&w.push(v[x]);w.length?this._events[b]=w.length===1?w[0]:w:o(this,b)}return this},l.prototype.removeAllListeners=function(d){var m;return d?(m=n?n+d:d,this._events[m]&&o(this,m)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l})(R2)),R2.exports}var P_e=k_e();const D_e=vi(P_e);var _p=new D_e,uT="recharts.syncEvent.tooltip",lz="recharts.syncEvent.brush";function wY(e,t){if(t){var n=Number.parseInt(t,10);if(!yi(n))return e?.[n]}}var O_e={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},NY=qr({name:"options",initialState:O_e,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),M_e=NY.reducer,{createEventEmitter:I_e}=NY.actions;function $_e(e){return e.tooltip.syncInteraction}var R_e={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},jY=qr({name:"chartData",initialState:R_e,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:r}=t.payload;n!=null&&(e.dataStartIndex=n),r!=null&&(e.dataEndIndex=r)}}}),{setChartData:cz,setDataStartEndIndexes:z_e,setComputedData:E8e}=jY.actions,U_e=jY.reducer,F_e=["x","y"];function dz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function vm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dz(Object(n),!0).forEach(function(r){B_e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function B_e(e,t,n){return(t=H_e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H_e(e){var t=G_e(e,"string");return typeof t=="symbol"?t:t+""}function G_e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function V_e(e,t){if(e==null)return{};var n,r,s=W_e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function W_e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function q_e(){var e=ht(o4),t=ht(l4),n=zn(),r=ht(yq),s=ht(Nl),i=Lx(),o=UN(),l=ht(c=>c.rootProps.className);g.useEffect(()=>{if(e==null)return Sx;var c=(d,m,h)=>{if(t!==h&&e===d){if(r==="index"){var p;if(o&&m!==null&&m!==void 0&&(p=m.payload)!==null&&p!==void 0&&p.coordinate&&m.payload.sourceViewBox){var b=m.payload.coordinate,{x:v,y:x}=b,w=V_e(b,F_e),{x:j,y:C,width:S,height:_}=m.payload.sourceViewBox,E=vm(vm({},w),{},{x:o.x+(S?(v-j)/S:0)*o.width,y:o.y+(_?(x-C)/_:0)*o.height});n(vm(vm({},m),{},{payload:vm(vm({},m.payload),{},{coordinate:E})}))}else n(m);return}if(s!=null){var A;if(typeof r=="function"){var T={activeTooltipIndex:m.payload.index==null?void 0:Number(m.payload.index),isTooltipActive:m.payload.active,activeIndex:m.payload.index==null?void 0:Number(m.payload.index),activeLabel:m.payload.label,activeDataKey:m.payload.dataKey,activeCoordinate:m.payload.coordinate},R=r(s,T);A=s[R]}else r==="value"&&(A=s.find(K=>String(K.value)===m.payload.label));var{coordinate:U}=m.payload;if(A==null||m.payload.active===!1||U==null||o==null){n(lT({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:W,y:I}=U,M=Math.min(W,o.x+o.width),H=Math.min(I,o.y+o.height),q={x:i==="horizontal"?A.coordinate:M,y:i==="horizontal"?H:A.coordinate},ae=lT({active:m.payload.active,coordinate:q,dataKey:m.payload.dataKey,index:String(A.index),label:m.payload.label,sourceViewBox:m.payload.sourceViewBox,graphicalItemId:m.payload.graphicalItemId});n(ae)}}};return _p.on(uT,c),()=>{_p.off(uT,c)}},[l,n,t,e,r,s,i,o])}function Y_e(){var e=ht(o4),t=ht(l4),n=zn();g.useEffect(()=>{if(e==null)return Sx;var r=(s,i,o)=>{t!==o&&e===s&&n(z_e(i))};return _p.on(lz,r),()=>{_p.off(lz,r)}},[n,t,e])}function K_e(){var e=zn();g.useEffect(()=>{e(I_e())},[e]),q_e(),Y_e()}function Q_e(e,t,n,r,s,i){var o=ht(b=>a_e(b,e,t)),l=ht(l4),c=ht(o4),d=ht(yq),m=ht($_e),h=m?.active,p=UN();g.useEffect(()=>{if(!h&&c!=null&&l!=null){var b=lT({active:i,coordinate:n,dataKey:o,index:s,label:typeof r=="number"?String(r):r,sourceViewBox:p,graphicalItemId:void 0});_p.emit(uT,c,b,l)}},[h,n,o,s,r,l,c,d,i,p])}function uz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function mz(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uz(Object(n),!0).forEach(function(r){X_e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function X_e(e,t,n){return(t=Z_e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z_e(e){var t=J_e(e,"string");return typeof t=="symbol"?t:t+""}function J_e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eAe(e){return e.dataKey}function tAe(e,t){return g.isValidElement(e)?g.cloneElement(e,t):typeof e=="function"?g.createElement(e,t):g.createElement(m1e,t)}var fz=[],nAe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function hz(e){var t,n,r=pr(e,nAe),{active:s,allowEscapeViewBox:i,animationDuration:o,animationEasing:l,content:c,filterNull:d,isAnimationActive:m,offset:h,payloadUniqBy:p,position:b,reverseDirection:v,useTranslate3d:x,wrapperStyle:w,cursor:j,shared:C,trigger:S,defaultIndex:_,portal:E,axisId:A}=r,T=zn(),R=typeof _=="number"?String(_):_;g.useEffect(()=>{T(ZSe({shared:C,trigger:S,axisId:A,active:s,defaultIndex:R}))},[T,C,S,A,s,R]);var U=UN(),W=HW(),I=WSe(C),{activeIndex:M,isActive:H}=(t=ht(Ae=>i_e(Ae,I,S,R)))!==null&&t!==void 0?t:{},q=ht(Ae=>s_e(Ae,I,S,R)),ae=ht(Ae=>yY(Ae,I,S,R)),K=ht(Ae=>r_e(Ae,I,S,R)),B=q,X=L_e(),le=(n=s??H)!==null&&n!==void 0?n:!1,[ue,J]=tNe([B,le]),ne=I==="axis"?ae:void 0;Q_e(I,S,K,ne,M,le);var pe=E??X;if(pe==null||U==null||I==null)return null;var we=B??fz;le||(we=fz),d&&we.length&&(we=Bwe(we.filter(Ae=>Ae.value!=null&&(Ae.hide!==!0||r.includeHidden)),p,eAe));var ye=we.length>0,Te=g.createElement(b1e,{allowEscapeViewBox:i,animationDuration:o,animationEasing:l,isAnimationActive:m,active:le,coordinate:K,hasPayload:ye,offset:h,position:b,reverseDirection:v,useTranslate3d:x,viewBox:U,wrapperStyle:w,lastBoundingBox:ue,innerRef:J,hasPortalFromProps:!!E},tAe(c,mz(mz({},r),{},{payload:we,label:ne,active:le,activeIndex:M,coordinate:K,accessibilityLayer:W})));return g.createElement(g.Fragment,null,Rp.createPortal(Te,pe),le&&g.createElement(T_e,{cursor:j,tooltipEventType:I,coordinate:K,payload:we,index:M}))}var sj=e=>null;sj.displayName="Cell";function aAe(e,t,n){return(t=rAe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rAe(e){var t=sAe(e,"string");return typeof t=="symbol"?t:t+""}function sAe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class iAe{constructor(t){aAe(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function gz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function oAe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gz(Object(n),!0).forEach(function(r){lAe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function lAe(e,t,n){return(t=cAe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cAe(e){var t=dAe(e,"string");return typeof t=="symbol"?t:t+""}function dAe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uAe={cacheSize:2e3,enableCache:!0},CY=oAe({},uAe),pz=new iAe(CY.cacheSize),mAe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},xz="recharts_measurement_span";function fAe(e,t){var n=t.fontSize||"",r=t.fontFamily||"",s=t.fontWeight||"",i=t.fontStyle||"",o=t.letterSpacing||"",l=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(r,"|").concat(s,"|").concat(i,"|").concat(o,"|").concat(l)}var yz=(e,t)=>{try{var n=document.getElementById(xz);n||(n=document.createElement("span"),n.setAttribute("id",xz),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,mAe,t),n.textContent="".concat(e);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},Gg=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||VN.isSsr)return{width:0,height:0};if(!CY.enableCache)return yz(t,n);var r=fAe(t,n),s=pz.get(r);if(s)return s;var i=yz(t,n);return pz.set(r,i),i},SY;function hAe(e,t,n){return(t=gAe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gAe(e){var t=pAe(e,"string");return typeof t=="symbol"?t:t+""}function pAe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bz=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,vz=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,xAe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,yAe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,bAe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},vAe=["cm","mm","pt","pc","in","Q","px"];function wAe(e){return vAe.includes(e)}var Om="NaN";function NAe(e,t){return e*bAe[t]}class Qa{static parse(t){var n,[,r,s]=(n=yAe.exec(t))!==null&&n!==void 0?n:[];return r==null?Qa.NaN:new Qa(parseFloat(r),s??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,yi(t)&&(this.unit=""),n!==""&&!xAe.test(n)&&(this.num=NaN,this.unit=""),wAe(n)&&(this.num=NAe(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new Qa(NaN,""):new Qa(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Qa(NaN,""):new Qa(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Qa(NaN,""):new Qa(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Qa(NaN,""):new Qa(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return yi(this.num)}}SY=Qa;hAe(Qa,"NaN",new SY(NaN,""));function _Y(e){if(e==null||e.includes(Om))return Om;for(var t=e;t.includes("*")||t.includes("/");){var n,[,r,s,i]=(n=bz.exec(t))!==null&&n!==void 0?n:[],o=Qa.parse(r??""),l=Qa.parse(i??""),c=s==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return Om;t=t.replace(bz,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,[,m,h,p]=(d=vz.exec(t))!==null&&d!==void 0?d:[],b=Qa.parse(m??""),v=Qa.parse(p??""),x=h==="+"?b.add(v):b.subtract(v);if(x.isNaN())return Om;t=t.replace(vz,x.toString())}return t}var wz=/\(([^()]*)\)/;function jAe(e){for(var t=e,n;(n=wz.exec(t))!=null;){var[,r]=n;t=t.replace(wz,_Y(r))}return t}function CAe(e){var t=e.replace(/\s+/g,"");return t=jAe(t),t=_Y(t),t}function SAe(e){try{return CAe(e)}catch{return Om}}function z2(e){var t=SAe(e.slice(5,-1));return t===Om?"":t}var _Ae=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],AAe=["dx","dy","angle","className","breakAll"];function mT(){return mT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mT.apply(null,arguments)}function Nz(e,t){if(e==null)return{};var n,r,s=EAe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function EAe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var AY=/[ \f\n\r\t\v\u2028\u2029]+/,EY=e=>{var{children:t,breakAll:n,style:r}=e;try{var s=[];Ua(t)||(n?s=t.toString().split(""):s=t.toString().split(AY));var i=s.map(l=>({word:l,width:Gg(l,r).width})),o=n?0:Gg("",r).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}};function TAe(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var TY=(e,t,n,r)=>e.reduce((s,i)=>{var{word:o,width:l}=i,c=s[s.length-1];if(c&&l!=null&&(t==null||r||c.width+l+n<Number(t)))c.words.push(o),c.width+=l+n;else{var d={words:[o],width:l};s.push(d)}return s},[]),LY=e=>e.reduce((t,n)=>t.width>n.width?t:n),LAe="",jz=(e,t,n,r,s,i,o,l)=>{var c=e.slice(0,t),d=EY({breakAll:n,style:r,children:c+LAe});if(!d)return[!1,[]];var m=TY(d.wordsWithComputedWidth,i,o,l),h=m.length>s||LY(m).width>Number(i);return[h,m]},kAe=(e,t,n,r,s)=>{var{maxLines:i,children:o,style:l,breakAll:c}=e,d=ut(i),m=String(o),h=TY(t,r,n,s);if(!d||s)return h;var p=h.length>i||LY(h).width>Number(r);if(!p)return h;for(var b=0,v=m.length-1,x=0,w;b<=v&&x<=m.length-1;){var j=Math.floor((b+v)/2),C=j-1,[S,_]=jz(m,C,c,l,i,r,n,s),[E]=jz(m,j,c,l,i,r,n,s);if(!S&&!E&&(b=j+1),S&&E&&(v=j-1),!S&&E){w=_;break}x++}return w||h},Cz=e=>{var t=Ua(e)?[]:e.toString().split(AY);return[{words:t,width:void 0}]},PAe=e=>{var{width:t,scaleToFit:n,children:r,style:s,breakAll:i,maxLines:o}=e;if((t||n)&&!VN.isSsr){var l,c,d=EY({breakAll:i,children:r,style:s});if(d){var{wordsWithComputedWidth:m,spaceWidth:h}=d;l=m,c=h}else return Cz(r);return kAe({breakAll:i,children:r,maxLines:o,style:s},l,c,t,!!n)}return Cz(r)},kY="#808080",DAe={angle:0,breakAll:!1,capHeight:"0.71em",fill:kY,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},ij=g.forwardRef((e,t)=>{var n=pr(e,DAe),{x:r,y:s,lineHeight:i,capHeight:o,fill:l,scaleToFit:c,textAnchor:d,verticalAnchor:m}=n,h=Nz(n,_Ae),p=g.useMemo(()=>PAe({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:c,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,c,h.style,h.width]),{dx:b,dy:v,angle:x,className:w,breakAll:j}=h,C=Nz(h,AAe);if(!to(r)||!to(s)||p.length===0)return null;var S=Number(r)+(ut(b)?b:0),_=Number(s)+(ut(v)?v:0);if(!Bn(S)||!Bn(_))return null;var E;switch(m){case"start":E=z2("calc(".concat(o,")"));break;case"middle":E=z2("calc(".concat((p.length-1)/2," * -").concat(i," + (").concat(o," / 2))"));break;default:E=z2("calc(".concat(p.length-1," * -").concat(i,")"));break}var A=[];if(c){var T=p[0].width,{width:R}=h;A.push("scale(".concat(ut(R)&&ut(T)?R/T:1,")"))}return x&&A.push("rotate(".concat(x,", ").concat(S,", ").concat(_,")")),A.length&&(C.transform=A.join(" ")),g.createElement("text",mT({},Vs(C),{ref:t,x:S,y:_,className:ct("recharts-text",w),textAnchor:d,fill:l.includes("url")?kY:l}),p.map((U,W)=>{var I=U.words.join(j?"":" ");return g.createElement("tspan",{x:S,dy:W===0?E:i,key:"".concat(I,"-").concat(W)},I)}))});ij.displayName="Text";var OAe=["labelRef"],MAe=["content"];function Sz(e,t){if(e==null)return{};var n,r,s=IAe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function IAe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function _z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function na(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_z(Object(n),!0).forEach(function(r){$Ae(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_z(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $Ae(e,t,n){return(t=RAe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RAe(e){var t=zAe(e,"string");return typeof t=="symbol"?t:t+""}function zAe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fo(){return Fo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fo.apply(null,arguments)}var PY=g.createContext(null),UAe=e=>{var{x:t,y:n,upperWidth:r,lowerWidth:s,width:i,height:o,children:l}=e,c=g.useMemo(()=>({x:t,y:n,upperWidth:r,lowerWidth:s,width:i,height:o}),[t,n,r,s,i,o]);return g.createElement(PY.Provider,{value:c},l)},DY=()=>{var e=g.useContext(PY),t=UN();return e||TW(t)},FAe=g.createContext(null),BAe=()=>{var e=g.useContext(FAe),t=ht(jq);return e||t},HAe=e=>{var{value:t,formatter:n}=e,r=Ua(e.children)?t:e.children;return typeof n=="function"?n(r):r},V4=e=>e!=null&&typeof e=="function",GAe=(e,t)=>{var n=za(t-e),r=Math.min(Math.abs(t-e),360);return n*r},VAe=(e,t,n,r,s)=>{var{offset:i,className:o}=e,{cx:l,cy:c,innerRadius:d,outerRadius:m,startAngle:h,endAngle:p,clockWise:b}=s,v=(d+m)/2,x=GAe(h,p),w=x>=0?1:-1,j,C;switch(t){case"insideStart":j=h+w*i,C=b;break;case"insideEnd":j=p-w*i,C=!b;break;case"end":j=p+w*i,C=b;break;default:throw new Error("Unsupported position ".concat(t))}C=x<=0?C:!C;var S=ha(l,c,v,j),_=ha(l,c,v,j+(C?1:-1)*359),E="M".concat(S.x,",").concat(S.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(C?0:1,`,
    `).concat(_.x,",").concat(_.y),A=Ua(e.id)?xp("recharts-radial-line-"):e.id;return g.createElement("text",Fo({},r,{dominantBaseline:"central",className:ct("recharts-radial-bar-label",o)}),g.createElement("defs",null,g.createElement("path",{id:A,d:E})),g.createElement("textPath",{xlinkHref:"#".concat(A)},n))},WAe=(e,t,n)=>{var{cx:r,cy:s,innerRadius:i,outerRadius:o,startAngle:l,endAngle:c}=e,d=(l+c)/2;if(n==="outside"){var{x:m,y:h}=ha(r,s,o+t,d);return{x:m,y:h,textAnchor:m>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:s,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:s,textAnchor:"middle",verticalAnchor:"end"};var p=(i+o)/2,{x:b,y:v}=ha(r,s,p,d);return{x:b,y:v,textAnchor:"middle",verticalAnchor:"middle"}},fT=e=>"cx"in e&&ut(e.cx),qAe=(e,t)=>{var{parentViewBox:n,offset:r,position:s}=e,i;n!=null&&!fT(n)&&(i=n);var{x:o,y:l,upperWidth:c,lowerWidth:d,height:m}=t,h=o,p=o+(c-d)/2,b=(h+p)/2,v=(c+d)/2,x=h+c/2,w=m>=0?1:-1,j=w*r,C=w>0?"end":"start",S=w>0?"start":"end",_=c>=0?1:-1,E=_*r,A=_>0?"end":"start",T=_>0?"start":"end";if(s==="top"){var R={x:h+c/2,y:l-j,textAnchor:"middle",verticalAnchor:C};return na(na({},R),i?{height:Math.max(l-i.y,0),width:c}:{})}if(s==="bottom"){var U={x:p+d/2,y:l+m+j,textAnchor:"middle",verticalAnchor:S};return na(na({},U),i?{height:Math.max(i.y+i.height-(l+m),0),width:d}:{})}if(s==="left"){var W={x:b-E,y:l+m/2,textAnchor:A,verticalAnchor:"middle"};return na(na({},W),i?{width:Math.max(W.x-i.x,0),height:m}:{})}if(s==="right"){var I={x:b+v+E,y:l+m/2,textAnchor:T,verticalAnchor:"middle"};return na(na({},I),i?{width:Math.max(i.x+i.width-I.x,0),height:m}:{})}var M=i?{width:v,height:m}:{};return s==="insideLeft"?na({x:b+E,y:l+m/2,textAnchor:T,verticalAnchor:"middle"},M):s==="insideRight"?na({x:b+v-E,y:l+m/2,textAnchor:A,verticalAnchor:"middle"},M):s==="insideTop"?na({x:h+c/2,y:l+j,textAnchor:"middle",verticalAnchor:S},M):s==="insideBottom"?na({x:p+d/2,y:l+m-j,textAnchor:"middle",verticalAnchor:C},M):s==="insideTopLeft"?na({x:h+E,y:l+j,textAnchor:T,verticalAnchor:S},M):s==="insideTopRight"?na({x:h+c-E,y:l+j,textAnchor:A,verticalAnchor:S},M):s==="insideBottomLeft"?na({x:p+E,y:l+m-j,textAnchor:T,verticalAnchor:C},M):s==="insideBottomRight"?na({x:p+d-E,y:l+m-j,textAnchor:A,verticalAnchor:C},M):s&&typeof s=="object"&&(ut(s.x)||il(s.x))&&(ut(s.y)||il(s.y))?na({x:o+ur(s.x,v),y:l+ur(s.y,m),textAnchor:"end",verticalAnchor:"end"},M):na({x,y:l+m/2,textAnchor:"middle",verticalAnchor:"middle"},M)},YAe={angle:0,offset:5,zIndex:Ja.label,position:"middle",textBreakAll:!1};function nc(e){var t=pr(e,YAe),{viewBox:n,position:r,value:s,children:i,content:o,className:l="",textBreakAll:c,labelRef:d}=t,m=BAe(),h=DY(),p=r==="center"?h:m??h,b,v,x;if(n==null?b=p:fT(n)?b=n:b=TW(n),!b||Ua(s)&&Ua(i)&&!g.isValidElement(o)&&typeof o!="function")return null;var w=na(na({},t),{},{viewBox:b});if(g.isValidElement(o)){var{labelRef:j}=w,C=Sz(w,OAe);return g.cloneElement(o,C)}if(typeof o=="function"){var{content:S}=w,_=Sz(w,MAe);if(v=g.createElement(o,_),g.isValidElement(v))return v}else v=HAe(t);var E=Vs(t);if(fT(b)){if(r==="insideStart"||r==="insideEnd"||r==="end")return VAe(t,r,v,E,b);x=WAe(b,t.offset,t.position)}else x=qAe(t,b);return g.createElement(Ci,{zIndex:t.zIndex},g.createElement(ij,Fo({ref:d,className:ct("recharts-label",l)},E,x,{textAnchor:TAe(E.textAnchor)?E.textAnchor:x.textAnchor,breakAll:c}),v))}nc.displayName="Label";var KAe=(e,t,n)=>{if(!e)return null;var r={viewBox:t,labelRef:n};return e===!0?g.createElement(nc,Fo({key:"label-implicit"},r)):to(e)?g.createElement(nc,Fo({key:"label-implicit",value:e},r)):g.isValidElement(e)?e.type===nc?g.cloneElement(e,na({key:"label-implicit"},r)):g.createElement(nc,Fo({key:"label-implicit",content:e},r)):V4(e)?g.createElement(nc,Fo({key:"label-implicit",content:e},r)):e&&typeof e=="object"?g.createElement(nc,Fo({},e,{key:"label-implicit"},r)):null};function QAe(e){var{label:t,labelRef:n}=e,r=DY();return KAe(t,r,n)||null}var U2={},F2={},Az;function XAe(){return Az||(Az=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(F2)),F2}var B2={},Ez;function ZAe(){return Ez||(Ez=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(B2)),B2}var Tz;function JAe(){return Tz||(Tz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=XAe(),n=ZAe(),r=Hk();function s(i){if(r.isArrayLike(i))return t.last(n.toArray(i))}e.last=s})(U2)),U2}var H2,Lz;function eEe(){return Lz||(Lz=1,H2=JAe().last),H2}var tEe=eEe();const nEe=vi(tEe);var aEe=["valueAccessor"],rEe=["dataKey","clockWise","id","textBreakAll","zIndex"];function zv(){return zv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zv.apply(null,arguments)}function kz(e,t){if(e==null)return{};var n,r,s=sEe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function sEe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var iEe=e=>Array.isArray(e.value)?nEe(e.value):e.value,OY=g.createContext(void 0),oEe=OY.Provider,MY=g.createContext(void 0),lEe=MY.Provider;function cEe(){return g.useContext(OY)}function dEe(){return g.useContext(MY)}function Mb(e){var{valueAccessor:t=iEe}=e,n=kz(e,aEe),{dataKey:r,clockWise:s,id:i,textBreakAll:o,zIndex:l}=n,c=kz(n,rEe),d=cEe(),m=dEe(),h=d||m;return!h||!h.length?null:g.createElement(Ci,{zIndex:l??Ja.label},g.createElement(wr,{className:"recharts-label-list"},h.map((p,b)=>{var v,x=Ua(r)?t(p,b):En(p&&p.payload,r),w=Ua(i)?{}:{id:"".concat(i,"-").concat(b)};return g.createElement(nc,zv({key:"label-".concat(b)},Vs(p),c,w,{fill:(v=n.fill)!==null&&v!==void 0?v:p.fill,parentViewBox:p.parentViewBox,value:x,textBreakAll:o,viewBox:p.viewBox,index:b,zIndex:0}))})))}Mb.displayName="LabelList";function IY(e){var{label:t}=e;return t?t===!0?g.createElement(Mb,{key:"labelList-implicit"}):g.isValidElement(t)||V4(t)?g.createElement(Mb,{key:"labelList-implicit",content:t}):typeof t=="object"?g.createElement(Mb,zv({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var $Y=e=>e.graphicalItems.polarItems,uEe=ze([Un,Dx],h4),oj=ze([$Y,Gn,uEe],p4),mEe=ze([oj],x4),lj=ze([mEe,YN],y4),fEe=ze([lj,Gn,oj],v4);ze([lj,Gn,oj],(e,t,n)=>n.length>0?e.flatMap(r=>n.flatMap(s=>{var i,o=En(r,(i=t.dataKey)!==null&&i!==void 0?i:s.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(r=>({value:En(r,t.dataKey),errorDomain:[]})):e.map(r=>({value:r,errorDomain:[]})));var Pz=()=>{},hEe=ze([lj,Gn,oj,tj,Un],C4),gEe=ze([Gn,N4,j4,Pz,hEe,Pz,Wt,Un],S4),RY=ze([Gn,Wt,lj,fEe,Px,Un,gEe],_4),pEe=ze([RY,Gn,kf],T4);ze([Gn,RY,pEe,Un],k4);var xEe={radiusAxis:{},angleAxis:{}},zY=qr({name:"polarAxis",initialState:xEe,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:T8e,removeRadiusAxis:L8e,addAngleAxis:k8e,removeAngleAxis:P8e}=zY.actions,yEe=zY.reducer;function Dz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Oz(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Dz(Object(n),!0).forEach(function(r){bEe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bEe(e,t,n){return(t=vEe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vEe(e){var t=wEe(e,"string");return typeof t=="symbol"?t:t+""}function wEe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var NEe=(e,t)=>t,W4=ze([$Y,NEe],(e,t)=>e.filter(n=>n.type==="pie").find(n=>n.id===t)),jEe=[],q4=(e,t,n)=>n?.length===0?jEe:n,UY=ze([YN,W4,q4],(e,t,n)=>{var{chartData:r}=e;if(t!=null){var s;if(t?.data!=null&&t.data.length>0?s=t.data:s=r,(!s||!s.length)&&n!=null&&(s=n.map(i=>Oz(Oz({},t.presentationProps),i.props))),s!=null)return s}}),CEe=ze([UY,W4,q4],(e,t,n)=>{if(!(e==null||t==null))return e.map((r,s)=>{var i,o=En(r,t.nameKey,t.name),l;return n!=null&&(i=n[s])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?l=n[s].props.fill:typeof r=="object"&&r!=null&&"fill"in r?l=r.fill:l=t.fill,{value:MN(o,t.dataKey),color:l,payload:r,type:t.legendType}})}),SEe=ze([UY,W4,q4,La],(e,t,n,r)=>{if(!(t==null||e==null))return _Te({offset:r,pieSettings:t,displayedData:e,cells:n})}),Mz=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",Iz=null,G2=null,FY=e=>{if(e===Iz&&Array.isArray(G2))return G2;var t=[];return g.Children.forEach(e,n=>{Ua(n)||(tL.isFragment(n)?t=t.concat(FY(n.props.children)):t.push(n))}),G2=t,Iz=e,t};function Y4(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(s=>Mz(s)):r=[Mz(t)],FY(e).forEach(s=>{var i=Jd(s,"type.displayName")||Jd(s,"type.name");i&&r.indexOf(i)!==-1&&n.push(s)}),n}var V2={},$z;function _Ee(){return $z||($z=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const s=n[Symbol.toStringTag];return s==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${s}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}e.isPlainObject=t})(V2)),V2}var W2,Rz;function AEe(){return Rz||(Rz=1,W2=_Ee().isPlainObject),W2}var EEe=AEe();const TEe=vi(EEe);var zz,Uz,Fz,Bz,Hz;function Gz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Vz(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Gz(Object(n),!0).forEach(function(r){LEe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function LEe(e,t,n){return(t=kEe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kEe(e){var t=PEe(e,"string");return typeof t=="symbol"?t:t+""}function PEe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Uv(){return Uv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Uv.apply(null,arguments)}function Vh(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Wz=(e,t,n,r,s)=>{var i=n-r,o;return o=Kn(zz||(zz=Vh(["M ",",",""])),e,t),o+=Kn(Uz||(Uz=Vh(["L ",",",""])),e+n,t),o+=Kn(Fz||(Fz=Vh(["L ",",",""])),e+n-i/2,t+s),o+=Kn(Bz||(Bz=Vh(["L ",",",""])),e+n-i/2-r,t+s),o+=Kn(Hz||(Hz=Vh(["L ",","," Z"])),e,t),o},DEe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},OEe=e=>{var t=pr(e,DEe),{x:n,y:r,upperWidth:s,lowerWidth:i,height:o,className:l}=t,{animationEasing:c,animationDuration:d,animationBegin:m,isUpdateAnimationActive:h}=t,p=g.useRef(null),[b,v]=g.useState(-1),x=g.useRef(s),w=g.useRef(i),j=g.useRef(o),C=g.useRef(n),S=g.useRef(r),_=qN(e,"trapezoid-");if(g.useEffect(()=>{if(p.current&&p.current.getTotalLength)try{var q=p.current.getTotalLength();q&&v(q)}catch{}},[]),n!==+n||r!==+r||s!==+s||i!==+i||o!==+o||s===0&&i===0||o===0)return null;var E=ct("recharts-trapezoid",l);if(!h)return g.createElement("g",null,g.createElement("path",Uv({},Vs(t),{className:E,d:Wz(n,r,s,i,o)})));var A=x.current,T=w.current,R=j.current,U=C.current,W=S.current,I="0px ".concat(b===-1?1:b,"px"),M="".concat(b,"px 0px"),H=GW(["strokeDasharray"],d,c);return g.createElement(WN,{animationId:_,key:_,canBegin:b>0,duration:d,easing:c,isActive:h,begin:m},q=>{var ae=ba(A,s,q),K=ba(T,i,q),B=ba(R,o,q),X=ba(U,n,q),le=ba(W,r,q);p.current&&(x.current=ae,w.current=K,j.current=B,C.current=X,S.current=le);var ue=q>0?{transition:H,strokeDasharray:M}:{strokeDasharray:I};return g.createElement("path",Uv({},Vs(t),{className:E,d:Wz(X,le,ae,K,B),ref:p,style:Vz(Vz({},ue),t.style)}))})},MEe=["option","shapeType","activeClassName"];function IEe(e,t){if(e==null)return{};var n,r,s=$Ee(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function $Ee(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function qz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Fv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qz(Object(n),!0).forEach(function(r){REe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function REe(e,t,n){return(t=zEe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zEe(e){var t=UEe(e,"string");return typeof t=="symbol"?t:t+""}function UEe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function FEe(e,t){return Fv(Fv({},t),e)}function BEe(e,t){return e==="symbols"}function Yz(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return g.createElement(YW,n);case"trapezoid":return g.createElement(OEe,n);case"sector":return g.createElement(ZW,n);case"symbols":if(BEe(t))return g.createElement(kV,n);break;case"curve":return g.createElement(a4,n);default:return null}}function HEe(e){return g.isValidElement(e)?e.props:e}function BY(e){var{option:t,shapeType:n,activeClassName:r="recharts-active-shape"}=e,s=IEe(e,MEe),i;if(g.isValidElement(t))i=g.cloneElement(t,Fv(Fv({},s),HEe(t)));else if(typeof t=="function")i=t(s,s.index);else if(TEe(t)&&typeof t!="boolean"){var o=FEe(t,s);i=g.createElement(Yz,{shapeType:n,elementProps:o})}else{var l=s;i=g.createElement(Yz,{shapeType:n,elementProps:l})}return s.isActive?g.createElement(wr,{className:r},i):i}var K4=(e,t,n)=>{var r=zn();return(s,i)=>o=>{e?.(s,i,o),r(eY({activeIndex:String(i),activeDataKey:t,activeCoordinate:s.tooltipPosition,activeGraphicalItemId:n}))}},Q4=e=>{var t=zn();return(n,r)=>s=>{e?.(n,r,s),t(JSe())}},X4=(e,t,n)=>{var r=zn();return(s,i)=>o=>{e?.(s,i,o),r(e2e({activeIndex:String(i),activeDataKey:t,activeCoordinate:s.tooltipPosition,activeGraphicalItemId:n}))}};function HY(e){var{tooltipEntrySettings:t}=e,n=zn(),r=Yr(),s=g.useRef(null);return g.useLayoutEffect(()=>{r||(s.current===null?n(KSe(t)):s.current!==t&&n(QSe({prev:s.current,next:t})),s.current=t)},[t,n,r]),g.useLayoutEffect(()=>()=>{s.current&&(n(XSe(s.current)),s.current=null)},[n]),null}function GEe(e){var{legendPayload:t}=e,n=zn(),r=Yr(),s=g.useRef(null);return g.useLayoutEffect(()=>{r||(s.current===null?n(UW(t)):s.current!==t&&n(FW({prev:s.current,next:t})),s.current=t)},[n,r,t]),g.useLayoutEffect(()=>()=>{s.current&&(n(BW(s.current)),s.current=null)},[n]),null}function VEe(e){var{legendPayload:t}=e,n=zn(),r=ht(Wt),s=g.useRef(null);return g.useLayoutEffect(()=>{r!=="centric"&&r!=="radial"||(s.current===null?n(UW(t)):s.current!==t&&n(FW({prev:s.current,next:t})),s.current=t)},[n,r,t]),g.useLayoutEffect(()=>()=>{s.current&&(n(BW(s.current)),s.current=null)},[n]),null}var q2,WEe=()=>{var[e]=g.useState(()=>xp("uid-"));return e},qEe=(q2=Fd.useId)!==null&&q2!==void 0?q2:WEe;function YEe(e,t){var n=qEe();return t||(e?"".concat(e,"-").concat(n):n)}var KEe=g.createContext(void 0),GY=e=>{var{id:t,type:n,children:r}=e,s=YEe("recharts-".concat(n),t);return g.createElement(KEe.Provider,{value:s},r(s))},QEe={cartesianItems:[],polarItems:[]},VY=qr({name:"graphicalItems",initialState:QEe,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:On()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:n,next:r}=t.payload,s=gi(e).cartesianItems.indexOf(n);s>-1&&(e.cartesianItems[s]=r)},prepare:On()},removeCartesianGraphicalItem:{reducer(e,t){var n=gi(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},prepare:On()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:On()},removePolarGraphicalItem:{reducer(e,t){var n=gi(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)},prepare:On()}}}),{addCartesianGraphicalItem:XEe,replaceCartesianGraphicalItem:ZEe,removeCartesianGraphicalItem:JEe,addPolarGraphicalItem:eTe,removePolarGraphicalItem:tTe}=VY.actions,nTe=VY.reducer,aTe=e=>{var t=zn(),n=g.useRef(null);return g.useLayoutEffect(()=>{n.current===null?t(XEe(e)):n.current!==e&&t(ZEe({prev:n.current,next:e})),n.current=e},[t,e]),g.useLayoutEffect(()=>()=>{n.current&&(t(JEe(n.current)),n.current=null)},[t]),null},rTe=g.memo(aTe);function sTe(e){var t=zn();return g.useLayoutEffect(()=>(t(eTe(e)),()=>{t(tTe(e))}),[t,e]),null}var iTe=["key"],oTe=["onMouseEnter","onClick","onMouseLeave"],lTe=["id"],cTe=["id"];function Kz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Qn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Kz(Object(n),!0).forEach(function(r){dTe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function dTe(e,t,n){return(t=uTe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uTe(e){var t=mTe(e,"string");return typeof t=="symbol"?t:t+""}function mTe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wc(){return wc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wc.apply(null,arguments)}function cj(e,t){if(e==null)return{};var n,r,s=fTe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function fTe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function hTe(e){var t=g.useMemo(()=>Y4(e.children,sj),[e.children]),n=ht(r=>CEe(r,e.id,t));return n==null?null:g.createElement(VEe,{legendPayload:n})}var gTe=g.memo(e=>{var{dataKey:t,nameKey:n,sectors:r,stroke:s,strokeWidth:i,fill:o,name:l,hide:c,tooltipType:d,id:m}=e,h={dataDefinedOnItem:r.map(p=>p.tooltipPayload),positions:r.map(p=>p.tooltipPosition),settings:{stroke:s,strokeWidth:i,fill:o,dataKey:t,nameKey:n,name:MN(l,t),hide:c,type:d,color:o,unit:"",graphicalItemId:m}};return g.createElement(HY,{tooltipEntrySettings:h})}),pTe=(e,t)=>e>t?"start":e<t?"end":"middle",xTe=(e,t,n)=>ur(typeof t=="function"?t(e):t,n,n*.8),yTe=(e,t,n)=>{var{top:r,left:s,width:i,height:o}=t,l=KW(i,o),c=s+ur(e.cx,i,i/2),d=r+ur(e.cy,o,o/2),m=ur(e.innerRadius,l,0),h=xTe(n,e.outerRadius,l),p=e.maxRadius||Math.sqrt(i*i+o*o)/2;return{cx:c,cy:d,innerRadius:m,outerRadius:h,maxRadius:p}},bTe=(e,t)=>{var n=za(t-e),r=Math.min(Math.abs(t-e),360);return n*r};function vTe(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var wTe=(e,t)=>{if(g.isValidElement(e))return g.cloneElement(e,t);if(typeof e=="function")return e(t);var n=ct("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:r}=t,s=cj(t,iTe);return g.createElement(a4,wc({},s,{type:"linear",className:n}))},NTe=(e,t,n)=>{if(g.isValidElement(e))return g.cloneElement(e,t);var r=n;if(typeof e=="function"&&(r=e(t),g.isValidElement(r)))return r;var s=ct("recharts-pie-label-text",vTe(e));return g.createElement(ij,wc({},t,{alignmentBaseline:"middle",className:s}),r)};function jTe(e){var{sectors:t,props:n,showLabels:r}=e,{label:s,labelLine:i,dataKey:o}=n;if(!r||!s||!t)return null;var l=xi(n),c=pp(s),d=pp(i),m=typeof s=="object"&&"offsetRadius"in s&&typeof s.offsetRadius=="number"&&s.offsetRadius||20,h=t.map((p,b)=>{var v=(p.startAngle+p.endAngle)/2,x=ha(p.cx,p.cy,p.outerRadius+m,v),w=Qn(Qn(Qn(Qn({},l),p),{},{stroke:"none"},c),{},{index:b,textAnchor:pTe(x.x,p.cx)},x),j=Qn(Qn(Qn(Qn({},l),p),{},{fill:"none",stroke:p.fill},d),{},{index:b,points:[ha(p.cx,p.cy,p.outerRadius,v),x],key:"line"});return g.createElement(Ci,{zIndex:Ja.label,key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(b)},g.createElement(wr,null,i&&wTe(i,j),NTe(s,w,En(p,o))))});return g.createElement(wr,{className:"recharts-pie-labels"},h)}function CTe(e){var{sectors:t,props:n,showLabels:r}=e,{label:s}=n;return typeof s=="object"&&s!=null&&"position"in s?g.createElement(IY,{label:s}):g.createElement(jTe,{sectors:t,props:n,showLabels:r})}function STe(e){var{sectors:t,activeShape:n,inactiveShape:r,allOtherPieProps:s,shape:i,id:o}=e,l=ht(ru),c=ht(U4),d=ht(z2e),{onMouseEnter:m,onClick:h,onMouseLeave:p}=s,b=cj(s,oTe),v=K4(m,s.dataKey,o),x=Q4(p),w=X4(h,s.dataKey,o);return t==null||t.length===0?null:g.createElement(g.Fragment,null,t.map((j,C)=>{if(j?.startAngle===0&&j?.endAngle===0&&t.length!==1)return null;var S=d==null||d===o,_=String(C)===l&&(c==null||s.dataKey===c)&&S,E=l?r:null,A=n&&_?n:E,T=Qn(Qn({},j),{},{stroke:j.stroke,tabIndex:-1,[CW]:C,[SW]:o});return g.createElement(wr,wc({key:"sector-".concat(j?.startAngle,"-").concat(j?.endAngle,"-").concat(j.midAngle,"-").concat(C),tabIndex:-1,className:"recharts-pie-sector"},SN(b,j,C),{onMouseEnter:v(j,C),onMouseLeave:x(j,C),onClick:w(j,C)}),g.createElement(BY,wc({option:i??A,index:C,shapeType:"sector",isActive:_},T)))}))}function _Te(e){var t,{pieSettings:n,displayedData:r,cells:s,offset:i}=e,{cornerRadius:o,startAngle:l,endAngle:c,dataKey:d,nameKey:m,tooltipType:h}=n,p=Math.abs(n.minAngle),b=bTe(l,c),v=Math.abs(b),x=r.length<=1?0:(t=n.paddingAngle)!==null&&t!==void 0?t:0,w=r.filter(A=>En(A,d,0)!==0).length,j=(v>=360?w:w-1)*x,C=v-w*p-j,S=r.reduce((A,T)=>{var R=En(T,d,0);return A+(ut(R)?R:0)},0),_;if(S>0){var E;_=r.map((A,T)=>{var R=En(A,d,0),U=En(A,m,T),W=yTe(n,i,A),I=(ut(R)?R:0)/S,M,H=Qn(Qn({},A),s&&s[T]&&s[T].props);T?M=E.endAngle+za(b)*x*(R!==0?1:0):M=l;var q=M+za(b)*((R!==0?p:0)+I*C),ae=(M+q)/2,K=(W.innerRadius+W.outerRadius)/2,B=[{name:U,value:R,payload:H,dataKey:d,type:h,graphicalItemId:n.id}],X=ha(W.cx,W.cy,K,ae);return E=Qn(Qn(Qn(Qn({},n.presentationProps),{},{percent:I,cornerRadius:typeof o=="string"?parseFloat(o):o,name:U,tooltipPayload:B,midAngle:ae,middleRadius:K,tooltipPosition:X},H),W),{},{value:R,dataKey:d,startAngle:M,endAngle:q,payload:H,paddingAngle:za(b)*x}),E})}return _}function ATe(e){var{showLabels:t,sectors:n,children:r}=e,s=g.useMemo(()=>!t||!n?[]:n.map(i=>({value:i.value,payload:i.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:i.cx,cy:i.cy,innerRadius:i.innerRadius,outerRadius:i.outerRadius,startAngle:i.startAngle,endAngle:i.endAngle,clockWise:!1},fill:i.fill})),[n,t]);return g.createElement(lEe,{value:t?s:void 0},r)}function ETe(e){var{props:t,previousSectorsRef:n,id:r}=e,{sectors:s,isAnimationActive:i,animationBegin:o,animationDuration:l,animationEasing:c,activeShape:d,inactiveShape:m,onAnimationStart:h,onAnimationEnd:p}=t,b=qN(t,"recharts-pie-"),v=n.current,[x,w]=g.useState(!1),j=g.useCallback(()=>{typeof p=="function"&&p(),w(!1)},[p]),C=g.useCallback(()=>{typeof h=="function"&&h(),w(!0)},[h]);return g.createElement(ATe,{showLabels:!x,sectors:s},g.createElement(WN,{animationId:b,begin:o,duration:l,isActive:i,easing:c,onAnimationStart:C,onAnimationEnd:j,key:b},S=>{var _=[],E=s&&s[0],A=E?.startAngle;return s?.forEach((T,R)=>{var U=v&&v[R],W=R>0?Jd(T,"paddingAngle",0):0;if(U){var I=ba(U.endAngle-U.startAngle,T.endAngle-T.startAngle,S),M=Qn(Qn({},T),{},{startAngle:A+W,endAngle:A+I+W});_.push(M),A=M.endAngle}else{var{endAngle:H,startAngle:q}=T,ae=ba(0,H-q,S),K=Qn(Qn({},T),{},{startAngle:A+W,endAngle:A+ae+W});_.push(K),A=K.endAngle}}),n.current=_,g.createElement(wr,null,g.createElement(STe,{sectors:_,activeShape:d,inactiveShape:m,allOtherPieProps:t,shape:t.shape,id:r}))}),g.createElement(CTe,{showLabels:!x,sectors:s,props:t}),t.children)}var TTe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Ja.area};function LTe(e){var{id:t}=e,n=cj(e,lTe),{hide:r,className:s,rootTabIndex:i}=e,o=g.useMemo(()=>Y4(e.children,sj),[e.children]),l=ht(m=>SEe(m,t,o)),c=g.useRef(null),d=ct("recharts-pie",s);return r||l==null?(c.current=null,g.createElement(wr,{tabIndex:i,className:d})):g.createElement(Ci,{zIndex:e.zIndex},g.createElement(gTe,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:l,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),g.createElement(wr,{tabIndex:i,className:d},g.createElement(ETe,{props:Qn(Qn({},n),{},{sectors:l}),previousSectorsRef:c,id:t})))}function WY(e){var t=pr(e,TTe),{id:n}=t,r=cj(t,cTe),s=xi(r);return g.createElement(GY,{id:n,type:"pie"},i=>g.createElement(g.Fragment,null,g.createElement(sTe,{type:"pie",id:i,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:s,maxRadius:t.maxRadius}),g.createElement(hTe,wc({},r,{id:i})),g.createElement(LTe,wc({},r,{id:i}))))}WY.displayName="Pie";function Qz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Xz(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Qz(Object(n),!0).forEach(function(r){kTe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function kTe(e,t,n){return(t=PTe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PTe(e){var t=DTe(e,"string");return typeof t=="symbol"?t:t+""}function DTe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qY=0,OTe={xAxis:{},yAxis:{},zAxis:{}},YY=qr({name:"cartesianAxis",initialState:OTe,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:On()},replaceXAxis:{reducer(e,t){var{prev:n,next:r}=t.payload;e.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete e.xAxis[n.id],e.xAxis[r.id]=r)},prepare:On()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:On()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:On()},replaceYAxis:{reducer(e,t){var{prev:n,next:r}=t.payload;e.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete e.yAxis[n.id],e.yAxis[r.id]=r)},prepare:On()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:On()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:On()},replaceZAxis:{reducer(e,t){var{prev:n,next:r}=t.payload;e.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete e.zAxis[n.id],e.zAxis[r.id]=r)},prepare:On()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:On()},updateYAxisWidth(e,t){var{id:n,width:r}=t.payload,s=e.yAxis[n];if(s){var i=s.widthHistory||[];if(i.length===3&&i[0]===i[2]&&r===i[1]&&r!==s.width&&Math.abs(r-i[0])<=1)return;var o=[...i,r].slice(-3);e.yAxis[n]=Xz(Xz({},e.yAxis[n]),{},{width:r,widthHistory:o})}}}}),{addXAxis:MTe,replaceXAxis:ITe,removeXAxis:$Te,addYAxis:RTe,replaceYAxis:zTe,removeYAxis:UTe,addZAxis:D8e,replaceZAxis:O8e,removeZAxis:M8e,updateYAxisWidth:FTe}=YY.actions,BTe=YY.reducer,HTe=ze([La],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),GTe=ze([HTe,xl,yl],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),KY=()=>ht(GTe),Zz=(e,t,n)=>{var r=n??e;if(!Ua(r))return ur(r,t,0)},VTe=(e,t,n)=>{var r={},s=e.filter(XN),i=e.filter(d=>d.stackId==null),o=s.reduce((d,m)=>(d[m.stackId]||(d[m.stackId]=[]),d[m.stackId].push(m),d),r),l=Object.entries(o).map(d=>{var[m,h]=d,p=h.map(v=>v.dataKey),b=Zz(t,n,h[0].barSize);return{stackId:m,dataKeys:p,barSize:b}}),c=i.map(d=>{var m=[d.dataKey].filter(p=>p!=null),h=Zz(t,n,d.barSize);return{stackId:void 0,dataKeys:m,barSize:h}});return[...l,...c]};function Jz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Iy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Jz(Object(n),!0).forEach(function(r){WTe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function WTe(e,t,n){return(t=qTe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qTe(e){var t=YTe(e,"string");return typeof t=="symbol"?t:t+""}function YTe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function KTe(e,t,n,r,s){var i=r.length;if(!(i<1)){var o=ur(e,n,0,!0),l,c=[];if(Bn(r[0].barSize)){var d=!1,m=n/i,h=r.reduce((j,C)=>j+(C.barSize||0),0);h+=(i-1)*o,h>=n&&(h-=(i-1)*o,o=0),h>=n&&m>0&&(d=!0,m*=.9,h=i*m);var p=(n-h)/2>>0,b={offset:p-o,size:0};l=r.reduce((j,C)=>{var S,_={stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:b.offset+b.size+o,size:d?m:(S=C.barSize)!==null&&S!==void 0?S:0}},E=[...j,_];return b=E[E.length-1].position,E},c)}else{var v=ur(t,n,0,!0);n-2*v-(i-1)*o<=0&&(o=0);var x=(n-2*v-(i-1)*o)/i;x>1&&(x>>=0);var w=Bn(s)?Math.min(x,s):x;l=r.reduce((j,C,S)=>[...j,{stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:v+(x+o)*S+(x-w)/2,size:w}}],c)}return l}}var QTe=(e,t,n,r,s,i,o)=>{var l=Ua(o)?t:o,c=KTe(n,r,s!==i?s:i,e,l);return s!==i&&c!=null&&(c=c.map(d=>Iy(Iy({},d),{},{position:Iy(Iy({},d.position),{},{offset:d.position.offset-s/2})}))),c},XTe=(e,t)=>{var n=m4(t);if(!(!e||n==null||t==null)){var{stackId:r}=t;if(r!=null){var s=e[r];if(s){var{stackedData:i}=s;if(i)return i.find(o=>o.key===n)}}}};function ZTe(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&Bn(e.zIndex)?e.zIndex:t}var QY=e=>{var{chartData:t}=e,n=zn(),r=Yr();return g.useEffect(()=>r?()=>{}:(n(cz(t)),()=>{n(cz(void 0))}),[t,n,r]),null},e7={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},XY=qr({name:"brush",initialState:e7,reducers:{setBrushSettings(e,t){return t.payload==null?e7:t.payload}}}),{setBrushSettings:I8e}=XY.actions,JTe=XY.reducer;function eLe(e,t,n){return(t=tLe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tLe(e){var t=nLe(e,"string");return typeof t=="symbol"?t:t+""}function nLe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Z4{static create(t){return new Z4(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(r)switch(r){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(n){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var n=this.range(),r=n[0],s=n[n.length-1];return r<=s?t>=r&&t<=s:t>=s&&t<=r}}eLe(Z4,"EPS",1e-4);function aLe(e){return(e%180+180)%180}var rLe=function(t){var{width:n,height:r}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=aLe(s),o=i*Math.PI/180,l=Math.atan(r/n),c=o>l&&o<Math.PI-l?r/Math.sin(o):n/Math.cos(o);return Math.abs(c)},sLe={dots:[],areas:[],lines:[]},ZY=qr({name:"referenceElements",initialState:sLe,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=gi(e).dots.findIndex(r=>r===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=gi(e).areas.findIndex(r=>r===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=gi(e).lines.findIndex(r=>r===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:$8e,removeDot:R8e,addArea:z8e,removeArea:U8e,addLine:F8e,removeLine:B8e}=ZY.actions,iLe=ZY.reducer,oLe=g.createContext(void 0),lLe=e=>{var{children:t}=e,[n]=g.useState("".concat(xp("recharts"),"-clip")),r=KY();if(r==null)return null;var{x:s,y:i,width:o,height:l}=r;return g.createElement(oLe.Provider,{value:n},g.createElement("defs",null,g.createElement("clipPath",{id:n},g.createElement("rect",{x:s,y:i,height:l,width:o}))),t)};function JY(e,t){if(t<1)return[];if(t===1)return e;for(var n=[],r=0;r<e.length;r+=t){var s=e[r];s!==void 0&&n.push(s)}return n}function cLe(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return rLe(r,n)}function dLe(e,t,n){var r=n==="width",{x:s,y:i,width:o,height:l}=e;return t===1?{start:r?s:i,end:r?s+o:i+l}:{start:r?s+o:i+l,end:r?s:i}}function Ap(e,t,n,r,s){if(e*t<e*r||e*t>e*s)return!1;var i=n();return e*(t-e*i/2-r)>=0&&e*(t+e*i/2-s)<=0}function uLe(e,t){return JY(e,t+1)}function mLe(e,t,n,r,s){for(var i=(r||[]).slice(),{start:o,end:l}=t,c=0,d=1,m=o,h=function(){var v=r?.[c];if(v===void 0)return{v:JY(r,d)};var x=c,w,j=()=>(w===void 0&&(w=n(v,x)),w),C=v.coordinate,S=c===0||Ap(e,C,j,m,l);S||(c=0,m=o,d+=1),S&&(m=C+e*(j()/2+s),c+=d)},p;d<=i.length;)if(p=h(),p)return p.v;return[]}function fLe(e,t,n,r,s){var i=(r||[]).slice(),o=i.length;if(o===0)return[];for(var{start:l,end:c}=t,d=1;d<=o;d++){for(var m=(o-1)%d,h=l,p=!0,b=function(){var C=r[v],S=v,_,E=()=>(_===void 0&&(_=n(C,S)),_),A=C.coordinate,T=v===m||Ap(e,A,E,h,c);if(!T)return p=!1,1;T&&(h=A+e*(E()/2+s))},v=m;v<o&&!b();v+=d);if(p){for(var x=[],w=m;w<o;w+=d)x.push(r[w]);return x}}return[]}function t7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function sr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?t7(Object(n),!0).forEach(function(r){hLe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t7(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hLe(e,t,n){return(t=gLe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gLe(e){var t=pLe(e,"string");return typeof t=="symbol"?t:t+""}function pLe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xLe(e,t,n,r,s){for(var i=(r||[]).slice(),o=i.length,{start:l}=t,{end:c}=t,d=function(p){var b=i[p],v,x=()=>(v===void 0&&(v=n(b,p)),v);if(p===o-1){var w=e*(b.coordinate+e*x()/2-c);i[p]=b=sr(sr({},b),{},{tickCoord:w>0?b.coordinate-w*e:b.coordinate})}else i[p]=b=sr(sr({},b),{},{tickCoord:b.coordinate});if(b.tickCoord!=null){var j=Ap(e,b.tickCoord,x,l,c);j&&(c=b.tickCoord-e*(x()/2+s),i[p]=sr(sr({},b),{},{isShow:!0}))}},m=o-1;m>=0;m--)d(m);return i}function yLe(e,t,n,r,s,i){var o=(r||[]).slice(),l=o.length,{start:c,end:d}=t;if(i){var m=r[l-1],h=n(m,l-1),p=e*(m.coordinate+e*h/2-d);if(o[l-1]=m=sr(sr({},m),{},{tickCoord:p>0?m.coordinate-p*e:m.coordinate}),m.tickCoord!=null){var b=Ap(e,m.tickCoord,()=>h,c,d);b&&(d=m.tickCoord-e*(h/2+s),o[l-1]=sr(sr({},m),{},{isShow:!0}))}}for(var v=i?l-1:l,x=function(C){var S=o[C],_,E=()=>(_===void 0&&(_=n(S,C)),_);if(C===0){var A=e*(S.coordinate-e*E()/2-c);o[C]=S=sr(sr({},S),{},{tickCoord:A<0?S.coordinate-A*e:S.coordinate})}else o[C]=S=sr(sr({},S),{},{tickCoord:S.coordinate});if(S.tickCoord!=null){var T=Ap(e,S.tickCoord,E,c,d);T&&(c=S.tickCoord+e*(E()/2+s),o[C]=sr(sr({},S),{},{isShow:!0}))}},w=0;w<v;w++)x(w);return o}function J4(e,t,n){var{tick:r,ticks:s,viewBox:i,minTickGap:o,orientation:l,interval:c,tickFormatter:d,unit:m,angle:h}=e;if(!s||!s.length||!r)return[];if(ut(c)||VN.isSsr){var p;return(p=uLe(s,ut(c)?c:0))!==null&&p!==void 0?p:[]}var b=[],v=l==="top"||l==="bottom"?"width":"height",x=m&&v==="width"?Gg(m,{fontSize:t,letterSpacing:n}):{width:0,height:0},w=(S,_)=>{var E=typeof d=="function"?d(S.value,_):S.value;return v==="width"?cLe(Gg(E,{fontSize:t,letterSpacing:n}),x,h):Gg(E,{fontSize:t,letterSpacing:n})[v]},j=s.length>=2?za(s[1].coordinate-s[0].coordinate):1,C=dLe(i,j,v);return c==="equidistantPreserveStart"?mLe(j,C,w,s,o):c==="equidistantPreserveEnd"?fLe(j,C,w,s,o):(c==="preserveStart"||c==="preserveStartEnd"?b=yLe(j,C,w,s,o,c==="preserveStartEnd"):b=xLe(j,C,w,s,o),b.filter(S=>S.isShow))}var bLe=e=>{var{ticks:t,label:n,labelGapWithTick:r=5,tickSize:s=0,tickMargin:i=0}=e,o=0;if(t){Array.from(t).forEach(m=>{if(m){var h=m.getBoundingClientRect();h.width>o&&(o=h.width)}});var l=n?n.getBoundingClientRect().width:0,c=s+i,d=o+c+l+(n?r:0);return Math.round(d)}return 0},vLe=["axisLine","width","height","className","hide","ticks","axisType"];function wLe(e,t){if(e==null)return{};var n,r,s=NLe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function NLe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function su(){return su=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},su.apply(null,arguments)}function n7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function ma(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?n7(Object(n),!0).forEach(function(r){jLe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):n7(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function jLe(e,t,n){return(t=CLe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CLe(e){var t=SLe(e,"string");return typeof t=="symbol"?t:t+""}function SLe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Yo={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Ja.axis};function _Le(e){var{x:t,y:n,width:r,height:s,orientation:i,mirror:o,axisLine:l,otherSvgProps:c}=e;if(!l)return null;var d=ma(ma(ma({},c),xi(l)),{},{fill:"none"});if(i==="top"||i==="bottom"){var m=+(i==="top"&&!o||i==="bottom"&&o);d=ma(ma({},d),{},{x1:t,y1:n+m*s,x2:t+r,y2:n+m*s})}else{var h=+(i==="left"&&!o||i==="right"&&o);d=ma(ma({},d),{},{x1:t+h*r,y1:n,x2:t+h*r,y2:n+s})}return g.createElement("line",su({},d,{className:ct("recharts-cartesian-axis-line",Jd(l,"className"))}))}function ALe(e,t,n,r,s,i,o,l,c){var d,m,h,p,b,v,x=l?-1:1,w=e.tickSize||o,j=ut(e.tickCoord)?e.tickCoord:e.coordinate;switch(i){case"top":d=m=e.coordinate,p=n+ +!l*s,h=p-x*w,v=h-x*c,b=j;break;case"left":h=p=e.coordinate,m=t+ +!l*r,d=m-x*w,b=d-x*c,v=j;break;case"right":h=p=e.coordinate,m=t+ +l*r,d=m+x*w,b=d+x*c,v=j;break;default:d=m=e.coordinate,p=n+ +l*s,h=p+x*w,v=h+x*c,b=j;break}return{line:{x1:d,y1:h,x2:m,y2:p},tick:{x:b,y:v}}}function ELe(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function TLe(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function LLe(e){var{option:t,tickProps:n,value:r}=e,s,i=ct(n.className,"recharts-cartesian-axis-tick-value");if(g.isValidElement(t))s=g.cloneElement(t,ma(ma({},n),{},{className:i}));else if(typeof t=="function")s=t(ma(ma({},n),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=ct(o,t?.className)),s=g.createElement(ij,su({},n,{className:o}),r)}return s}var kLe=g.forwardRef((e,t)=>{var{ticks:n=[],tick:r,tickLine:s,stroke:i,tickFormatter:o,unit:l,padding:c,tickTextProps:d,orientation:m,mirror:h,x:p,y:b,width:v,height:x,tickSize:w,tickMargin:j,fontSize:C,letterSpacing:S,getTicksConfig:_,events:E,axisType:A}=e,T=J4(ma(ma({},_),{},{ticks:n}),C,S),R=ELe(m,h),U=TLe(m,h),W=xi(_),I=pp(r),M={};typeof s=="object"&&(M=s);var H=ma(ma({},W),{},{fill:"none"},M),q=T.map(B=>ma({entry:B},ALe(B,p,b,v,x,m,w,h,j))),ae=q.map(B=>{var{entry:X,line:le}=B;return g.createElement(wr,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(X.value,"-").concat(X.coordinate,"-").concat(X.tickCoord)},s&&g.createElement("line",su({},H,le,{className:ct("recharts-cartesian-axis-tick-line",Jd(s,"className"))})))}),K=q.map((B,X)=>{var{entry:le,tick:ue}=B,J=ma(ma(ma(ma({textAnchor:R,verticalAnchor:U},W),{},{stroke:"none",fill:i},I),ue),{},{index:X,payload:le,visibleTicksCount:T.length,tickFormatter:o,padding:c},d);return g.createElement(wr,su({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(le.value,"-").concat(le.coordinate,"-").concat(le.tickCoord)},SN(E,le,X)),r&&g.createElement(LLe,{option:r,tickProps:J,value:"".concat(typeof o=="function"?o(le.value,X):le.value).concat(l||"")}))});return g.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(A,"-ticks")},K.length>0&&g.createElement(Ci,{zIndex:Ja.label},g.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(A,"-tick-labels"),ref:t},K)),ae.length>0&&g.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(A,"-tick-lines")},ae))}),PLe=g.forwardRef((e,t)=>{var{axisLine:n,width:r,height:s,className:i,hide:o,ticks:l,axisType:c}=e,d=wLe(e,vLe),[m,h]=g.useState(""),[p,b]=g.useState(""),v=g.useRef(null);g.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var w;return bLe({ticks:v.current,label:(w=e.labelRef)===null||w===void 0?void 0:w.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var x=g.useCallback(w=>{if(w){var j=w.getElementsByClassName("recharts-cartesian-axis-tick-value");v.current=j;var C=j[0];if(C){var S=window.getComputedStyle(C),_=S.fontSize,E=S.letterSpacing;(_!==m||E!==p)&&(h(_),b(E))}}},[m,p]);return o||r!=null&&r<=0||s!=null&&s<=0?null:g.createElement(Ci,{zIndex:e.zIndex},g.createElement(wr,{className:ct("recharts-cartesian-axis",i)},g.createElement(_Le,{x:e.x,y:e.y,width:r,height:s,orientation:e.orientation,mirror:e.mirror,axisLine:n,otherSvgProps:xi(e)}),g.createElement(kLe,{ref:x,axisType:c,events:d,fontSize:m,getTicksConfig:e,height:e.height,letterSpacing:p,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:l,unit:e.unit,width:e.width,x:e.x,y:e.y}),g.createElement(UAe,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},g.createElement(QAe,{label:e.label,labelRef:e.labelRef}),e.children)))}),eP=g.forwardRef((e,t)=>{var n=pr(e,Yo);return g.createElement(PLe,su({},n,{ref:t}))});eP.displayName="CartesianAxis";var DLe=["x1","y1","x2","y2","key"],OLe=["offset"],MLe=["xAxisId","yAxisId"],ILe=["xAxisId","yAxisId"];function a7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function or(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?a7(Object(n),!0).forEach(function(r){$Le(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a7(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $Le(e,t,n){return(t=RLe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RLe(e){var t=zLe(e,"string");return typeof t=="symbol"?t:t+""}function zLe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Td(){return Td=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Td.apply(null,arguments)}function Bv(e,t){if(e==null)return{};var n,r,s=ULe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function ULe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var FLe=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:r,y:s,width:i,height:o,ry:l}=e;return g.createElement("rect",{x:r,y:s,ry:l,width:i,height:o,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function eK(e){var{option:t,lineItemProps:n}=e,r;if(g.isValidElement(t))r=g.cloneElement(t,n);else if(typeof t=="function")r=t(n);else{var s,{x1:i,y1:o,x2:l,y2:c,key:d}=n,m=Bv(n,DLe),h=(s=xi(m))!==null&&s!==void 0?s:{},{offset:p}=h,b=Bv(h,OLe);r=g.createElement("line",Td({},b,{x1:i,y1:o,x2:l,y2:c,fill:"none",key:d}))}return r}function BLe(e){var{x:t,width:n,horizontal:r=!0,horizontalPoints:s}=e;if(!r||!s||!s.length)return null;var{xAxisId:i,yAxisId:o}=e,l=Bv(e,MLe),c=s.map((d,m)=>{var h=or(or({},l),{},{x1:t,y1:d,x2:t+n,y2:d,key:"line-".concat(m),index:m});return g.createElement(eK,{key:"line-".concat(m),option:r,lineItemProps:h})});return g.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function HLe(e){var{y:t,height:n,vertical:r=!0,verticalPoints:s}=e;if(!r||!s||!s.length)return null;var{xAxisId:i,yAxisId:o}=e,l=Bv(e,ILe),c=s.map((d,m)=>{var h=or(or({},l),{},{x1:d,y1:t,x2:d,y2:t+n,key:"line-".concat(m),index:m});return g.createElement(eK,{option:r,lineItemProps:h,key:"line-".concat(m)})});return g.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function GLe(e){var{horizontalFill:t,fillOpacity:n,x:r,y:s,width:i,height:o,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length||l==null)return null;var d=l.map(h=>Math.round(h+s-s)).sort((h,p)=>h-p);s!==d[0]&&d.unshift(0);var m=d.map((h,p)=>{var b=!d[p+1],v=b?s+o-h:d[p+1]-h;if(v<=0)return null;var x=p%t.length;return g.createElement("rect",{key:"react-".concat(p),y:h,x:r,height:v,width:i,stroke:"none",fill:t[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return g.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function VLe(e){var{vertical:t=!0,verticalFill:n,fillOpacity:r,x:s,y:i,width:o,height:l,verticalPoints:c}=e;if(!t||!n||!n.length)return null;var d=c.map(h=>Math.round(h+s-s)).sort((h,p)=>h-p);s!==d[0]&&d.unshift(0);var m=d.map((h,p)=>{var b=!d[p+1],v=b?s+o-h:d[p+1]-h;if(v<=0)return null;var x=p%n.length;return g.createElement("rect",{key:"react-".concat(p),x:h,y:i,width:v,height:l,stroke:"none",fill:n[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return g.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var WLe=(e,t)=>{var{xAxis:n,width:r,height:s,offset:i}=e;return wW(J4(or(or(or({},Yo),n),{},{ticks:NW(n),viewBox:{x:0,y:0,width:r,height:s}})),i.left,i.left+i.width,t)},qLe=(e,t)=>{var{yAxis:n,width:r,height:s,offset:i}=e;return wW(J4(or(or(or({},Yo),n),{},{ticks:NW(n),viewBox:{x:0,y:0,width:r,height:s}})),i.top,i.top+i.height,t)},YLe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Ja.grid};function tK(e){var t=kW(),n=PW(),r=LW(),s=or(or({},pr(e,YLe)),{},{x:ut(e.x)?e.x:r.left,y:ut(e.y)?e.y:r.top,width:ut(e.width)?e.width:r.width,height:ut(e.height)?e.height:r.height}),{xAxisId:i,yAxisId:o,x:l,y:c,width:d,height:m,syncWithTicks:h,horizontalValues:p,verticalValues:b}=s,v=Yr(),x=ht(U=>XR(U,"xAxis",i,v)),w=ht(U=>XR(U,"yAxis",o,v));if(!no(d)||!no(m)||!ut(l)||!ut(c))return null;var j=s.verticalCoordinatesGenerator||WLe,C=s.horizontalCoordinatesGenerator||qLe,{horizontalPoints:S,verticalPoints:_}=s;if((!S||!S.length)&&typeof C=="function"){var E=p&&p.length,A=C({yAxis:w?or(or({},w),{},{ticks:E?p:w.ticks}):void 0,width:t??d,height:n??m,offset:r},E?!0:h);_v(Array.isArray(A),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof A,"]")),Array.isArray(A)&&(S=A)}if((!_||!_.length)&&typeof j=="function"){var T=b&&b.length,R=j({xAxis:x?or(or({},x),{},{ticks:T?b:x.ticks}):void 0,width:t??d,height:n??m,offset:r},T?!0:h);_v(Array.isArray(R),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof R,"]")),Array.isArray(R)&&(_=R)}return g.createElement(Ci,{zIndex:s.zIndex},g.createElement("g",{className:"recharts-cartesian-grid"},g.createElement(FLe,{fill:s.fill,fillOpacity:s.fillOpacity,x:s.x,y:s.y,width:s.width,height:s.height,ry:s.ry}),g.createElement(GLe,Td({},s,{horizontalPoints:S})),g.createElement(VLe,Td({},s,{verticalPoints:_})),g.createElement(BLe,Td({},s,{offset:r,horizontalPoints:S,xAxis:x,yAxis:w})),g.createElement(HLe,Td({},s,{offset:r,verticalPoints:_,xAxis:x,yAxis:w}))))}tK.displayName="CartesianGrid";var KLe={},nK=qr({name:"errorBars",initialState:KLe,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]||(e[n]=[]),e[n].push(r)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:r,next:s}=t.payload;e[n]&&(e[n]=e[n].map(i=>i.dataKey===r.dataKey&&i.direction===r.direction?s:i))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]&&(e[n]=e[n].filter(s=>s.dataKey!==r.dataKey||s.direction!==r.direction))}}}),{addErrorBar:H8e,replaceErrorBar:G8e,removeErrorBar:V8e}=nK.actions,QLe=nK.reducer,XLe=["children"];function ZLe(e,t){if(e==null)return{};var n,r,s=JLe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function JLe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var eke={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},tke=g.createContext(eke);function nke(e){var{children:t}=e,n=ZLe(e,XLe);return g.createElement(tke.Provider,{value:n},t)}function aK(e,t){var n,r,s=ht(d=>vl(d,e)),i=ht(d=>wl(d,t)),o=(n=s?.allowDataOverflow)!==null&&n!==void 0?n:Ma.allowDataOverflow,l=(r=i?.allowDataOverflow)!==null&&r!==void 0?r:Ia.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function ake(e){var{xAxisId:t,yAxisId:n,clipPathId:r}=e,s=KY(),{needClipX:i,needClipY:o,needClip:l}=aK(t,n);if(!l||!s)return null;var{x:c,y:d,width:m,height:h}=s;return g.createElement("clipPath",{id:"clipPath-".concat(r)},g.createElement("rect",{x:i?c:c-m/2,y:o?d:d-h/2,width:i?m:m*2,height:o?h:h*2}))}var Y2={exports:{}},K2={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r7;function rke(){if(r7)return K2;r7=1;var e=hf();function t(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,s=e.useRef,i=e.useEffect,o=e.useMemo,l=e.useDebugValue;return K2.useSyncExternalStoreWithSelector=function(c,d,m,h,p){var b=s(null);if(b.current===null){var v={hasValue:!1,value:null};b.current=v}else v=b.current;b=o(function(){function w(E){if(!j){if(j=!0,C=E,E=h(E),p!==void 0&&v.hasValue){var A=v.value;if(p(A,E))return S=A}return S=E}if(A=S,n(C,E))return A;var T=h(E);return p!==void 0&&p(A,T)?(C=E,A):(C=E,S=T)}var j=!1,C,S,_=m===void 0?null:m;return[function(){return w(d())},_===null?void 0:function(){return w(_())}]},[d,m,h,p]);var x=r(c,b[0],b[1]);return i(function(){v.hasValue=!0,v.value=x},[x]),l(x),x},K2}var s7;function ske(){return s7||(s7=1,Y2.exports=rke()),Y2.exports}var ike=ske();function oke(e){e()}function lke(){let e=null,t=null;return{clear(){e=null,t=null},notify(){oke(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const s=t={callback:n,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!r||e===null||(r=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var i7={notify(){},get:()=>[]};function cke(e,t){let n,r=i7,s=0,i=!1;function o(x){m();const w=r.subscribe(x);let j=!1;return()=>{j||(j=!0,w(),h())}}function l(){r.notify()}function c(){v.onStateChange&&v.onStateChange()}function d(){return i}function m(){s++,n||(n=e.subscribe(c),r=lke())}function h(){s--,n&&s===0&&(n(),n=void 0,r.clear(),r=i7)}function p(){i||(i=!0,m())}function b(){i&&(i=!1,h())}const v={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:d,trySubscribe:p,tryUnsubscribe:b,getListeners:()=>r};return v}var dke=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",uke=dke(),mke=()=>typeof navigator<"u"&&navigator.product==="ReactNative",fke=mke(),hke=()=>uke||fke?g.useLayoutEffect:g.useEffect,gke=hke();function o7(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function pke(e,t){if(o7(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(!Object.prototype.hasOwnProperty.call(t,n[s])||!o7(e[n[s]],t[n[s]]))return!1;return!0}var xke=Symbol.for("react-redux-context"),yke=typeof globalThis<"u"?globalThis:{};function bke(){if(!g.createContext)return{};const e=yke[xke]??=new Map;let t=e.get(g.createContext);return t||(t=g.createContext(null),e.set(g.createContext,t)),t}var vke=bke();function wke(e){const{children:t,context:n,serverState:r,store:s}=e,i=g.useMemo(()=>{const c=cke(s);return{store:s,subscription:c,getServerState:r?()=>r:void 0}},[s,r]),o=g.useMemo(()=>s.getState(),[s]);gke(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==s.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,o]);const l=n||vke;return g.createElement(l.Provider,{value:i},t)}var Nke=wke,jke=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function Cke(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function tP(e,t){var n=new Set([...Object.keys(e),...Object.keys(t)]);for(var r of n)if(jke.has(r)){if(e[r]==null&&t[r]==null)continue;if(!pke(e[r],t[r]))return!1}else if(!Cke(e[r],t[r]))return!1;return!0}function bu(e,t){var n,r;return(n=(r=e.graphicalItems.cartesianItems.find(s=>s.id===t))===null||r===void 0?void 0:r.xAxisId)!==null&&n!==void 0?n:qY}function vu(e,t){var n,r;return(n=(r=e.graphicalItems.cartesianItems.find(s=>s.id===t))===null||r===void 0?void 0:r.yAxisId)!==null&&n!==void 0?n:qY}var Ske="Invariant failed";function _ke(e,t){throw new Error(Ske)}function hT(){return hT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hT.apply(null,arguments)}function Hv(e){return g.createElement(BY,hT({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var Ake=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,s)=>{if(ut(t))return t;var i=ut(r)||Ua(r);return i?t(r,s):(i||_ke(),n)}},Eke=(e,t,n)=>n,Tke=(e,t)=>t,Fx=ze([g4,Tke],(e,t)=>e.filter(n=>n.type==="bar").find(n=>n.id===t)),Lke=ze([Fx],e=>e?.maxBarSize),kke=(e,t,n,r)=>r,Pke=ze([Wt,g4,bu,vu,Eke],(e,t,n,r,s)=>t.filter(i=>e==="horizontal"?i.xAxisId===n:i.yAxisId===r).filter(i=>i.isPanorama===s).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),Dke=(e,t,n)=>{var r=Wt(e),s=bu(e,t),i=vu(e,t);if(!(s==null||i==null))return r==="horizontal"?oT(e,"yAxis",i,n):oT(e,"xAxis",s,n)},Oke=(e,t)=>{var n=Wt(e),r=bu(e,t),s=vu(e,t);if(!(r==null||s==null))return n==="horizontal"?QR(e,"xAxis",r):QR(e,"yAxis",s)},Mke=ze([Pke,BCe,Oke],VTe),Ike=(e,t,n)=>{var r,s,i=Fx(e,t);if(i!=null){var o=bu(e,t),l=vu(e,t);if(!(o==null||l==null)){var c=Wt(e),d=gq(e),{maxBarSize:m}=i,h=Ua(m)?d:m,p,b;return c==="horizontal"?(p=uf(e,"xAxis",o,n),b=df(e,"xAxis",o,n)):(p=uf(e,"yAxis",l,n),b=df(e,"yAxis",l,n)),(r=(s=Sv(p,b,!0))!==null&&s!==void 0?s:h)!==null&&r!==void 0?r:0}}},rK=(e,t,n)=>{var r=Wt(e),s=bu(e,t),i=vu(e,t);if(!(s==null||i==null)){var o,l;return r==="horizontal"?(o=uf(e,"xAxis",s,n),l=df(e,"xAxis",s,n)):(o=uf(e,"yAxis",i,n),l=df(e,"yAxis",i,n)),Sv(o,l)}},$ke=ze([Mke,gq,FCe,pq,Ike,rK,Lke],QTe),Rke=(e,t,n)=>{var r=bu(e,t);if(r!=null)return uf(e,"xAxis",r,n)},zke=(e,t,n)=>{var r=vu(e,t);if(r!=null)return uf(e,"yAxis",r,n)},Uke=(e,t,n)=>{var r=bu(e,t);if(r!=null)return df(e,"xAxis",r,n)},Fke=(e,t,n)=>{var r=vu(e,t);if(r!=null)return df(e,"yAxis",r,n)},Bke=ze([$ke,Fx],(e,t)=>{if(!(e==null||t==null)){var n=e.find(r=>r.stackId===t.stackId&&t.dataKey!=null&&r.dataKeys.includes(t.dataKey));if(n!=null)return n.position}}),Hke=ze([Dke,Fx],XTe),Gke=ze([La,Jk,Rke,zke,Uke,Fke,Bke,Wt,TCe,rK,Hke,Fx,kke],(e,t,n,r,s,i,o,l,c,d,m,h,p)=>{var{chartData:b,dataStartIndex:v,dataEndIndex:x}=c;if(!(h==null||o==null||t==null||l!=="horizontal"&&l!=="vertical"||n==null||r==null||s==null||i==null||d==null)){var{data:w}=h,j;if(w!=null&&w.length>0?j=w:j=b?.slice(v,x+1),j!=null)return b4e({layout:l,barSettings:h,pos:o,parentViewBox:t,bandSize:d,xAxis:n,yAxis:r,xAxisTicks:s,yAxisTicks:i,stackedData:m,displayedData:j,offset:e,cells:p,dataStartIndex:v})}}),Vke=["index"];function gT(){return gT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gT.apply(null,arguments)}function Wke(e,t){if(e==null)return{};var n,r,s=qke(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function qke(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var sK=g.createContext(void 0),Yke=e=>{var t=g.useContext(sK);if(t!=null)return t.stackId;if(e!=null)return mje(e)},Kke=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),Qke=e=>{var t=g.useContext(sK);if(t!=null){var{stackId:n}=t;return"url(#".concat(Kke(n,e),")")}},Xke=e=>{var{index:t}=e,n=Wke(e,Vke),r=Qke(t);return g.createElement(wr,gT({className:"recharts-bar-stack-layer",clipPath:r},n))},Zke=["onMouseEnter","onMouseLeave","onClick"],Jke=["value","background","tooltipPosition"],e4e=["id"],t4e=["onMouseEnter","onClick","onMouseLeave"];function cl(){return cl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cl.apply(null,arguments)}function l7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function yr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?l7(Object(n),!0).forEach(function(r){n4e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l7(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function n4e(e,t,n){return(t=a4e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a4e(e){var t=r4e(e,"string");return typeof t=="symbol"?t:t+""}function r4e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gv(e,t){if(e==null)return{};var n,r,s=s4e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function s4e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var i4e=e=>{var{dataKey:t,name:n,fill:r,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:r,value:MN(n,t),payload:e}]},o4e=g.memo(e=>{var{dataKey:t,stroke:n,strokeWidth:r,fill:s,name:i,hide:o,unit:l,tooltipType:c,id:d}=e,m={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:s,dataKey:t,nameKey:void 0,name:MN(i,t),hide:o,type:c,color:s,unit:l,graphicalItemId:d}};return g.createElement(HY,{tooltipEntrySettings:m})});function l4e(e){var t=ht(ru),{data:n,dataKey:r,background:s,allOtherBarProps:i}=e,{onMouseEnter:o,onMouseLeave:l,onClick:c}=i,d=Gv(i,Zke),m=K4(o,r,i.id),h=Q4(l),p=X4(c,r,i.id);if(!s||n==null)return null;var b=pp(s);return g.createElement(Ci,{zIndex:ZTe(s,Ja.barBackground)},n.map((v,x)=>{var{value:w,background:j,tooltipPosition:C}=v,S=Gv(v,Jke);if(!j)return null;var _=m(v,x),E=h(v,x),A=p(v,x),T=yr(yr(yr(yr(yr({option:s,isActive:String(x)===t},S),{},{fill:"#eee"},j),b),SN(d,v,x)),{},{onMouseEnter:_,onMouseLeave:E,onClick:A,dataKey:r,index:x,className:"recharts-bar-background-rectangle"});return g.createElement(Hv,cl({key:"background-bar-".concat(x)},T))}))}function c4e(e){var{showLabels:t,children:n,rects:r}=e,s=r?.map(i=>{var o={x:i.x,y:i.y,width:i.width,lowerWidth:i.width,upperWidth:i.width,height:i.height};return yr(yr({},o),{},{value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:o,fill:i.fill})});return g.createElement(oEe,{value:t?s:void 0},n)}function d4e(e){var{shape:t,activeBar:n,baseProps:r,entry:s,index:i,dataKey:o}=e,l=ht(ru),c=ht(U4),d=n&&String(i)===l&&(c==null||o===c),m=d?n:t;return d?g.createElement(Ci,{zIndex:Ja.activeBar},g.createElement(Hv,cl({},r,{name:String(r.name)},s,{isActive:d,option:m,index:i,dataKey:o}))):g.createElement(Hv,cl({},r,{name:String(r.name)},s,{isActive:d,option:m,index:i,dataKey:o}))}function u4e(e){var{shape:t,baseProps:n,entry:r,index:s,dataKey:i}=e;return g.createElement(Hv,cl({},n,{name:String(n.name)},r,{isActive:!1,option:t,index:s,dataKey:i}))}function m4e(e){var t,{data:n,props:r}=e,s=(t=xi(r))!==null&&t!==void 0?t:{},{id:i}=s,o=Gv(s,e4e),{shape:l,dataKey:c,activeBar:d}=r,{onMouseEnter:m,onClick:h,onMouseLeave:p}=r,b=Gv(r,t4e),v=K4(m,c,i),x=Q4(p),w=X4(h,c,i);return n?g.createElement(g.Fragment,null,n.map((j,C)=>g.createElement(Xke,cl({index:C,key:"rectangle-".concat(j?.x,"-").concat(j?.y,"-").concat(j?.value,"-").concat(C),className:"recharts-bar-rectangle"},SN(b,j,C),{onMouseEnter:v(j,C),onMouseLeave:x(j,C),onClick:w(j,C)}),d?g.createElement(d4e,{shape:l,activeBar:d,baseProps:o,entry:j,index:C,dataKey:c}):g.createElement(u4e,{shape:l,baseProps:o,entry:j,index:C,dataKey:c})))):null}function f4e(e){var{props:t,previousRectanglesRef:n}=e,{data:r,layout:s,isAnimationActive:i,animationBegin:o,animationDuration:l,animationEasing:c,onAnimationEnd:d,onAnimationStart:m}=t,h=n.current,p=qN(t,"recharts-bar-"),[b,v]=g.useState(!1),x=!b,w=g.useCallback(()=>{typeof d=="function"&&d(),v(!1)},[d]),j=g.useCallback(()=>{typeof m=="function"&&m(),v(!0)},[m]);return g.createElement(c4e,{showLabels:x,rects:r},g.createElement(WN,{animationId:p,begin:o,duration:l,isActive:i,easing:c,onAnimationEnd:w,onAnimationStart:j,key:p},C=>{var S=C===1?r:r?.map((_,E)=>{var A=h&&h[E];if(A)return yr(yr({},_),{},{x:ba(A.x,_.x,C),y:ba(A.y,_.y,C),width:ba(A.width,_.width,C),height:ba(A.height,_.height,C)});if(s==="horizontal"){var T=ba(0,_.height,C),R=ba(_.stackedBarStart,_.y,C);return yr(yr({},_),{},{y:R,height:T})}var U=ba(0,_.width,C),W=ba(_.stackedBarStart,_.x,C);return yr(yr({},_),{},{width:U,x:W})});return C>0&&(n.current=S??null),S==null?null:g.createElement(wr,null,g.createElement(m4e,{props:t,data:S}))}),g.createElement(IY,{label:t.label}),t.children)}function h4e(e){var t=g.useRef(null);return g.createElement(f4e,{previousRectanglesRef:t,props:e})}var iK=0,g4e=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:En(e,t)}};class p4e extends g.PureComponent{render(){var{hide:t,data:n,dataKey:r,className:s,xAxisId:i,yAxisId:o,needClip:l,background:c,id:d}=this.props;if(t||n==null)return null;var m=ct("recharts-bar",s),h=d;return g.createElement(wr,{className:m,id:d},l&&g.createElement("defs",null,g.createElement(ake,{clipPathId:h,xAxisId:i,yAxisId:o})),g.createElement(wr,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(h,")"):void 0},g.createElement(l4e,{data:n,dataKey:r,background:c,allOtherBarProps:this.props}),g.createElement(h4e,this.props)))}}var x4e={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:iK,xAxisId:0,yAxisId:0,zIndex:Ja.bar};function y4e(e){var{xAxisId:t,yAxisId:n,hide:r,legendType:s,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:d,isAnimationActive:m}=e,{needClip:h}=aK(t,n),p=Lx(),b=Yr(),v=Y4(e.children,sj),x=ht(C=>Gke(C,e.id,b,v));if(p!=="vertical"&&p!=="horizontal")return null;var w,j=x?.[0];return j==null||j.height==null||j.width==null?w=0:w=p==="vertical"?j.height/2:j.width/2,g.createElement(nke,{xAxisId:t,yAxisId:n,data:x,dataPointFormatter:g4e,errorBarOffset:w},g.createElement(p4e,cl({},e,{layout:p,needClip:h,data:x,xAxisId:t,yAxisId:n,hide:r,legendType:s,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:d,isAnimationActive:m})))}function b4e(e){var{layout:t,barSettings:{dataKey:n,minPointSize:r},pos:s,bandSize:i,xAxis:o,yAxis:l,xAxisTicks:c,yAxisTicks:d,stackedData:m,displayedData:h,offset:p,cells:b,parentViewBox:v,dataStartIndex:x}=e,w=t==="horizontal"?l:o,j=m?w.scale.domain():null,C=fje({numericAxis:w}),S=w.scale(C);return h.map((_,E)=>{var A,T,R,U,W,I;if(m){var M=m[E+x];if(M==null)return null;A=oje(M,j)}else A=En(_,n),Array.isArray(A)||(A=[C,A]);var H=Ake(r,iK)(A[1],E);if(t==="horizontal"){var q,[ae,K]=[l.scale(A[0]),l.scale(A[1])];T=R6({axis:o,ticks:c,bandSize:i,offset:s.offset,entry:_,index:E}),R=(q=K??ae)!==null&&q!==void 0?q:void 0,U=s.size;var B=ae-K;if(W=yi(B)?0:B,I={x:T,y:p.top,width:U,height:p.height},Math.abs(H)>0&&Math.abs(W)<Math.abs(H)){var X=za(W||H)*(Math.abs(H)-Math.abs(W));R-=X,W+=X}}else{var[le,ue]=[o.scale(A[0]),o.scale(A[1])];if(T=le,R=R6({axis:l,ticks:d,bandSize:i,offset:s.offset,entry:_,index:E}),U=ue-le,W=s.size,I={x:p.left,y:R,width:p.width,height:W},Math.abs(H)>0&&Math.abs(U)<Math.abs(H)){var J=za(U||H)*(Math.abs(H)-Math.abs(U));U+=J}}if(T==null||R==null||U==null||W==null)return null;var ne=yr(yr({},_),{},{stackedBarStart:S,x:T,y:R,width:U,height:W,value:m?A:A[1],payload:_,background:I,tooltipPosition:{x:T+U/2,y:R+W/2},parentViewBox:v},b&&b[E]&&b[E].props);return ne}).filter(Boolean)}function v4e(e){var t=pr(e,x4e),n=Yke(t.stackId),r=Yr();return g.createElement(GY,{id:t.id,type:"bar"},s=>g.createElement(g.Fragment,null,g.createElement(GEe,{legendPayload:i4e(t)}),g.createElement(o4e,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:s}),g.createElement(rTe,{type:"bar",id:s,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:n,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),g.createElement(Ci,{zIndex:t.zIndex},g.createElement(y4e,cl({},t,{id:s})))))}var pT=g.memo(v4e,tP);pT.displayName="Bar";var w4e=["domain","range"],N4e=["domain","range"];function c7(e,t){if(e==null)return{};var n,r,s=j4e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function j4e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function d7(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function oK(e,t){if(e===t)return!0;var{domain:n,range:r}=e,s=c7(e,w4e),{domain:i,range:o}=t,l=c7(t,N4e);return!d7(n,i)||!d7(r,o)?!1:tP(s,l)}var C4e=["dangerouslySetInnerHTML","ticks","scale"],S4e=["id","scale"];function xT(){return xT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xT.apply(null,arguments)}function u7(e,t){if(e==null)return{};var n,r,s=_4e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function _4e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function A4e(e){var t=zn(),n=g.useRef(null);return g.useLayoutEffect(()=>{n.current===null?t(MTe(e)):n.current!==e&&t(ITe({prev:n.current,next:e})),n.current=e},[e,t]),g.useLayoutEffect(()=>()=>{n.current&&(t($Te(n.current)),n.current=null)},[t]),null}var E4e=e=>{var{xAxisId:t,className:n}=e,r=ht(Jk),s=Yr(),i="xAxis",o=ht(j=>Yq(j,i,t,s)),l=ht(j=>Gq(j,t)),c=ht(j=>zSe(j,t)),d=ht(j=>Sq(j,t));if(l==null||c==null||d==null)return null;var{dangerouslySetInnerHTML:m,ticks:h,scale:p}=e,b=u7(e,C4e),{id:v,scale:x}=d,w=u7(d,S4e);return g.createElement(eP,xT({},b,w,{x:c.x,y:c.y,width:l.width,height:l.height,className:ct("recharts-".concat(i," ").concat(i),n),viewBox:r,ticks:o,axisType:i}))},T4e={allowDataOverflow:Ma.allowDataOverflow,allowDecimals:Ma.allowDecimals,allowDuplicatedCategory:Ma.allowDuplicatedCategory,angle:Ma.angle,axisLine:Yo.axisLine,height:Ma.height,hide:!1,includeHidden:Ma.includeHidden,interval:Ma.interval,minTickGap:Ma.minTickGap,mirror:Ma.mirror,orientation:Ma.orientation,padding:Ma.padding,reversed:Ma.reversed,scale:Ma.scale,tick:Ma.tick,tickCount:Ma.tickCount,tickLine:Yo.tickLine,tickSize:Yo.tickSize,type:Ma.type,xAxisId:0},L4e=e=>{var t=pr(e,T4e);return g.createElement(g.Fragment,null,g.createElement(A4e,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),g.createElement(E4e,t))},lK=g.memo(L4e,oK);lK.displayName="XAxis";var k4e=["dangerouslySetInnerHTML","ticks","scale"],P4e=["id","scale"];function yT(){return yT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yT.apply(null,arguments)}function m7(e,t){if(e==null)return{};var n,r,s=D4e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function D4e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function O4e(e){var t=zn(),n=g.useRef(null);return g.useLayoutEffect(()=>{n.current===null?t(RTe(e)):n.current!==e&&t(zTe({prev:n.current,next:e})),n.current=e},[e,t]),g.useLayoutEffect(()=>()=>{n.current&&(t(UTe(n.current)),n.current=null)},[t]),null}var M4e=e=>{var{yAxisId:t,className:n,width:r,label:s}=e,i=g.useRef(null),o=g.useRef(null),l=ht(Jk),c=Yr(),d=zn(),m="yAxis",h=ht(A=>Vq(A,t)),p=ht(A=>FSe(A,t)),b=ht(A=>Yq(A,m,t,c)),v=ht(A=>_q(A,t));if(g.useLayoutEffect(()=>{if(!(r!=="auto"||!h||V4(s)||g.isValidElement(s)||v==null)){var A=i.current;if(A){var T=A.getCalculatedWidth();Math.round(h.width)!==Math.round(T)&&d(FTe({id:t,width:T}))}}},[b,h,d,s,t,r,v]),h==null||p==null||v==null)return null;var{dangerouslySetInnerHTML:x,ticks:w,scale:j}=e,C=m7(e,k4e),{id:S,scale:_}=v,E=m7(v,P4e);return g.createElement(eP,yT({},C,E,{ref:i,labelRef:o,x:p.x,y:p.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:h.width,height:h.height,className:ct("recharts-".concat(m," ").concat(m),n),viewBox:l,ticks:b,axisType:m}))},I4e={allowDataOverflow:Ia.allowDataOverflow,allowDecimals:Ia.allowDecimals,allowDuplicatedCategory:Ia.allowDuplicatedCategory,angle:Ia.angle,axisLine:Yo.axisLine,hide:!1,includeHidden:Ia.includeHidden,interval:Ia.interval,minTickGap:Ia.minTickGap,mirror:Ia.mirror,orientation:Ia.orientation,padding:Ia.padding,reversed:Ia.reversed,scale:Ia.scale,tick:Ia.tick,tickCount:Ia.tickCount,tickLine:Yo.tickLine,tickSize:Yo.tickSize,type:Ia.type,width:Ia.width,yAxisId:0},$4e=e=>{var t=pr(e,I4e);return g.createElement(g.Fragment,null,g.createElement(O4e,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),g.createElement(M4e,t))},cK=g.memo($4e,oK);cK.displayName="YAxis";var R4e=(e,t)=>t,nP=ze([R4e,Wt,jq,ka,dY,Nl,n_e,La],c_e),aP=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,r=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/r)}},dK=Ws("mouseClick"),uK=Ex();uK.startListening({actionCreator:dK,effect:(e,t)=>{var n=e.payload,r=nP(t.getState(),aP(n));r?.activeIndex!=null&&t.dispatch(t2e({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var bT=Ws("mouseMove"),mK=Ex(),$y=null;mK.startListening({actionCreator:bT,effect:(e,t)=>{var n=e.payload;$y!==null&&cancelAnimationFrame($y);var r=aP(n);$y=requestAnimationFrame(()=>{var s=t.getState(),i=O4(s,s.tooltip.settings.shared);if(i==="axis"){var o=nP(s,r);o?.activeIndex!=null?t.dispatch(nY({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):t.dispatch(tY())}$y=null})}});function z4e(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var f7={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},fK=qr({name:"rootProps",initialState:f7,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:f7.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),U4e=fK.reducer,{updateOptions:F4e}=fK.actions,hK=qr({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:B4e}=hK.actions,H4e=hK.reducer,gK=Ws("keyDown"),pK=Ws("focus"),rP=Ex();rP.startListening({actionCreator:gK,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:s}=n.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=M4(s,Of(n),Ix(n),zx(n)),l=o==null?-1:Number(o);if(!(!Number.isFinite(l)||l<0)){var c=Nl(n);if(i==="Enter"){var d=Rv(n,"axis","hover",String(s.index));t.dispatch(cT({active:!s.active,activeIndex:s.index,activeCoordinate:d}));return}var m=VSe(n),h=m==="left-to-right"?1:-1,p=i==="ArrowRight"?1:-1,b=l+p*h;if(!(c==null||b>=c.length||b<0)){var v=Rv(n,"axis","hover",String(b));t.dispatch(cT({active:!0,activeIndex:b.toString(),activeCoordinate:v}))}}}}}});rP.startListening({actionCreator:pK,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:s}=n.tooltip;if(!s.active&&s.index==null){var i="0",o=Rv(n,"axis","hover",String(i));t.dispatch(cT({active:!0,activeIndex:i,activeCoordinate:o}))}}}});var Os=Ws("externalEvent"),xK=Ex(),Q2=new Map;xK.startListening({actionCreator:Os,effect:(e,t)=>{var{handler:n,reactEvent:r}=e.payload;if(n!=null){r.persist();var s=r.type,i=Q2.get(s);i!==void 0&&cancelAnimationFrame(i);var o=requestAnimationFrame(()=>{try{var l=t.getState(),c={activeCoordinate:F2e(l),activeDataKey:U4(l),activeIndex:ru(l),activeLabel:fY(l),activeTooltipIndex:ru(l),isTooltipActive:B2e(l)};n(c,r)}finally{Q2.delete(s)}});Q2.set(s,o)}}});var G4e=ze([Pf],e=>e.tooltipItemPayloads),V4e=ze([G4e,Rx,(e,t)=>t,(e,t,n)=>n],(e,t,n,r)=>{var s=e.find(l=>l.settings.graphicalItemId===r);if(s!=null){var{positions:i}=s;if(i!=null){var o=t(i,n);return o}}}),yK=Ws("touchMove"),bK=Ex();bK.startListening({actionCreator:yK,effect:(e,t)=>{var n=e.payload;if(!(n.touches==null||n.touches.length===0)){var r=t.getState(),s=O4(r,r.tooltip.settings.shared);if(s==="axis"){var i=n.touches[0];if(i==null)return;var o=nP(r,aP({clientX:i.clientX,clientY:i.clientY,currentTarget:n.currentTarget}));o?.activeIndex!=null&&t.dispatch(nY({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(s==="item"){var l,c=n.touches[0];if(document.elementFromPoint==null||c==null)return;var d=document.elementFromPoint(c.clientX,c.clientY);if(!d||!d.getAttribute)return;var m=d.getAttribute(CW),h=(l=d.getAttribute(SW))!==null&&l!==void 0?l:void 0,p=Df(r).find(x=>x.id===h);if(m==null||p==null||h==null)return;var{dataKey:b}=p,v=V4e(r,m,h);t.dispatch(eY({activeDataKey:b,activeIndex:m,activeCoordinate:v,activeGraphicalItemId:h}))}}}});var W4e=WV({brush:JTe,cartesianAxis:BTe,chartData:U_e,errorBars:QLe,graphicalItems:nTe,layout:tje,legend:o1e,options:M_e,polarAxis:yEe,polarOptions:H4e,referenceElements:iLe,rootProps:U4e,tooltip:n2e,zIndex:j_e}),q4e=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return _Ne({reducer:W4e,preloadedState:t,middleware:r=>{var s;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((s="es6")!==null&&s!==void 0?s:"")}).concat([uK.middleware,mK.middleware,rP.middleware,xK.middleware,bK.middleware])},enhancers:r=>{var s=r;return typeof r=="function"&&(s=r()),s.concat(oW({type:"raf"}))},devTools:{serialize:{replacer:z4e},name:"recharts-".concat(n)}})};function vK(e){var{preloadedState:t,children:n,reduxStoreName:r}=e,s=Yr(),i=g.useRef(null);if(s)return n;i.current==null&&(i.current=q4e(t,r));var o=Gk;return g.createElement(Nke,{context:o,store:i.current},n)}function Y4e(e){var{layout:t,margin:n}=e,r=zn(),s=Yr();return g.useEffect(()=>{s||(r(ZNe(t)),r(XNe(n)))},[r,s,t,n]),null}var wK=g.memo(Y4e,tP);function NK(e){var t=zn();return g.useEffect(()=>{t(F4e(e))},[t,e]),null}function h7(e){var{zIndex:t,isPanorama:n}=e,r=g.useRef(null),s=zn();return g.useLayoutEffect(()=>(r.current&&s(w_e({zIndex:t,element:r.current,isPanorama:n})),()=>{s(N_e({zIndex:t,isPanorama:n}))}),[s,t,n]),g.createElement("g",{tabIndex:-1,ref:r})}function g7(e){var{children:t,isPanorama:n}=e,r=ht(u_e);if(!r||r.length===0)return t;var s=r.filter(o=>o<0),i=r.filter(o=>o>0);return g.createElement(g.Fragment,null,s.map(o=>g.createElement(h7,{key:o,zIndex:o,isPanorama:n})),t,i.map(o=>g.createElement(h7,{key:o,zIndex:o,isPanorama:n})))}var K4e=["children"];function Q4e(e,t){if(e==null)return{};var n,r,s=X4e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function X4e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Vv(){return Vv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vv.apply(null,arguments)}var Z4e={width:"100%",height:"100%",display:"block"},J4e=g.forwardRef((e,t)=>{var n=kW(),r=PW(),s=HW();if(!no(n)||!no(r))return null;var{children:i,otherAttributes:o,title:l,desc:c}=e,d,m;return o!=null&&(typeof o.tabIndex=="number"?d=o.tabIndex:d=s?0:void 0,typeof o.role=="string"?m=o.role:m=s?"application":void 0),g.createElement(AV,Vv({},o,{title:l,desc:c,role:m,tabIndex:d,width:n,height:r,style:Z4e,ref:t}),i)}),ePe=e=>{var{children:t}=e,n=ht(zN);if(!n)return null;var{width:r,height:s,y:i,x:o}=n;return g.createElement(AV,{width:r,height:s,x:o,y:i},t)},p7=g.forwardRef((e,t)=>{var{children:n}=e,r=Q4e(e,K4e),s=Yr();return s?g.createElement(ePe,null,g.createElement(g7,{isPanorama:!0},n)):g.createElement(J4e,Vv({ref:t},r),g.createElement(g7,{isPanorama:!1},n))});function tPe(){var e=zn(),[t,n]=g.useState(null),r=ht(bje);return g.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),i=s.width/t.offsetWidth;Bn(i)&&i!==r&&e(eje(i))}},[t,e,r]),n}function x7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function nPe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?x7(Object(n),!0).forEach(function(r){aPe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x7(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function aPe(e,t,n){return(t=rPe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rPe(e){var t=sPe(e,"string");return typeof t=="symbol"?t:t+""}function sPe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iu(){return iu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iu.apply(null,arguments)}var iPe=()=>(K_e(),null);function Wv(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var oPe=g.forwardRef((e,t)=>{var n,r,s=g.useRef(null),[i,o]=g.useState({containerWidth:Wv((n=e.style)===null||n===void 0?void 0:n.width),containerHeight:Wv((r=e.style)===null||r===void 0?void 0:r.height)}),l=g.useCallback((d,m)=>{o(h=>{var p=Math.round(d),b=Math.round(m);return h.containerWidth===p&&h.containerHeight===b?h:{containerWidth:p,containerHeight:b}})},[]),c=g.useCallback(d=>{if(typeof t=="function"&&t(d),d!=null&&typeof ResizeObserver<"u"){var{width:m,height:h}=d.getBoundingClientRect();l(m,h);var p=v=>{var{width:x,height:w}=v[0].contentRect;l(x,w)},b=new ResizeObserver(p);b.observe(d),s.current=b}},[t,l]);return g.useEffect(()=>()=>{var d=s.current;d?.disconnect()},[l]),g.createElement(g.Fragment,null,g.createElement(FN,{width:i.containerWidth,height:i.containerHeight}),g.createElement("div",iu({ref:c},e)))}),lPe=g.forwardRef((e,t)=>{var{width:n,height:r}=e,[s,i]=g.useState({containerWidth:Wv(n),containerHeight:Wv(r)}),o=g.useCallback((c,d)=>{i(m=>{var h=Math.round(c),p=Math.round(d);return m.containerWidth===h&&m.containerHeight===p?m:{containerWidth:h,containerHeight:p}})},[]),l=g.useCallback(c=>{if(typeof t=="function"&&t(c),c!=null){var{width:d,height:m}=c.getBoundingClientRect();o(d,m)}},[t,o]);return g.createElement(g.Fragment,null,g.createElement(FN,{width:s.containerWidth,height:s.containerHeight}),g.createElement("div",iu({ref:l},e)))}),cPe=g.forwardRef((e,t)=>{var{width:n,height:r}=e;return g.createElement(g.Fragment,null,g.createElement(FN,{width:n,height:r}),g.createElement("div",iu({ref:t},e)))}),dPe=g.forwardRef((e,t)=>{var{width:n,height:r}=e;return il(n)||il(r)?g.createElement(lPe,iu({},e,{ref:t})):g.createElement(cPe,iu({},e,{ref:t}))});function uPe(e){return e===!0?oPe:dPe}var mPe=g.forwardRef((e,t)=>{var{children:n,className:r,height:s,onClick:i,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:d,onMouseLeave:m,onMouseMove:h,onMouseUp:p,onTouchEnd:b,onTouchMove:v,onTouchStart:x,style:w,width:j,responsive:C,dispatchTouchEvents:S=!0}=e,_=g.useRef(null),E=zn(),[A,T]=g.useState(null),[R,U]=g.useState(null),W=tPe(),I=e4(),M=I?.width>0?I.width:j,H=I?.height>0?I.height:s,q=g.useCallback($=>{W($),typeof t=="function"&&t($),T($),U($),$!=null&&(_.current=$)},[W,t,T,U]),ae=g.useCallback($=>{E(dK($)),E(Os({handler:i,reactEvent:$}))},[E,i]),K=g.useCallback($=>{E(bT($)),E(Os({handler:d,reactEvent:$}))},[E,d]),B=g.useCallback($=>{E(tY()),E(Os({handler:m,reactEvent:$}))},[E,m]),X=g.useCallback($=>{E(bT($)),E(Os({handler:h,reactEvent:$}))},[E,h]),le=g.useCallback(()=>{E(pK())},[E]),ue=g.useCallback($=>{E(gK($.key))},[E]),J=g.useCallback($=>{E(Os({handler:o,reactEvent:$}))},[E,o]),ne=g.useCallback($=>{E(Os({handler:l,reactEvent:$}))},[E,l]),pe=g.useCallback($=>{E(Os({handler:c,reactEvent:$}))},[E,c]),we=g.useCallback($=>{E(Os({handler:p,reactEvent:$}))},[E,p]),ye=g.useCallback($=>{E(Os({handler:x,reactEvent:$}))},[E,x]),Te=g.useCallback($=>{S&&E(yK($)),E(Os({handler:v,reactEvent:$}))},[E,S,v]),Ae=g.useCallback($=>{E(Os({handler:b,reactEvent:$}))},[E,b]),Pe=uPe(C);return g.createElement(vY.Provider,{value:A},g.createElement(Zve.Provider,{value:R},g.createElement(Pe,{width:M??w?.width,height:H??w?.height,className:ct("recharts-wrapper",r),style:nPe({position:"relative",cursor:"default",width:M,height:H},w),onClick:ae,onContextMenu:J,onDoubleClick:ne,onFocus:le,onKeyDown:ue,onMouseDown:pe,onMouseEnter:K,onMouseLeave:B,onMouseMove:X,onMouseUp:we,onTouchEnd:Ae,onTouchMove:Te,onTouchStart:ye,ref:q},g.createElement(iPe,null),n)))}),fPe=["width","height","responsive","children","className","style","compact","title","desc"];function hPe(e,t){if(e==null)return{};var n,r,s=gPe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function gPe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var jK=g.forwardRef((e,t)=>{var{width:n,height:r,responsive:s,children:i,className:o,style:l,compact:c,title:d,desc:m}=e,h=hPe(e,fPe),p=xi(h);return c?g.createElement(g.Fragment,null,g.createElement(FN,{width:n,height:r}),g.createElement(p7,{otherAttributes:p,title:d,desc:m},i)):g.createElement(mPe,{className:o,style:l,width:n,height:r,responsive:s??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},g.createElement(p7,{otherAttributes:p,title:d,desc:m,ref:t},g.createElement(lLe,null,i)))});function vT(){return vT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vT.apply(null,arguments)}var pPe={top:5,right:5,bottom:5,left:5},xPe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:pPe,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},yPe=g.forwardRef(function(t,n){var r,s=pr(t.categoricalChartProps,xPe),{chartName:i,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,categoricalChartProps:d}=t,m={chartName:i,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,eventEmitter:void 0};return g.createElement(vK,{preloadedState:{options:m},reduxStoreName:(r=d.id)!==null&&r!==void 0?r:i},g.createElement(QY,{chartData:d.data}),g.createElement(wK,{layout:s.layout,margin:s.margin}),g.createElement(NK,{baseValue:s.baseValue,accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className,reverseStackOrder:s.reverseStackOrder}),g.createElement(jK,vT({},s,{ref:n})))}),bPe=["axis","item"],vPe=g.forwardRef((e,t)=>g.createElement(yPe,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:bPe,tooltipPayloadSearcher:wY,categoricalChartProps:e,ref:t}));function wPe(e){var t=zn();return g.useEffect(()=>{t(B4e(e))},[t,e]),null}var NPe=["layout"];function wT(){return wT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wT.apply(null,arguments)}function jPe(e,t){if(e==null)return{};var n,r,s=CPe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function CPe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var SPe={top:5,right:5,bottom:5,left:5},CK={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:SPe,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},_Pe=g.forwardRef(function(t,n){var r,s=pr(t.categoricalChartProps,CK),{layout:i}=s,o=jPe(s,NPe),{chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:d,tooltipPayloadSearcher:m}=t,h={chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:d,tooltipPayloadSearcher:m,eventEmitter:void 0};return g.createElement(vK,{preloadedState:{options:h},reduxStoreName:(r=s.id)!==null&&r!==void 0?r:l},g.createElement(QY,{chartData:s.data}),g.createElement(wK,{layout:i,margin:s.margin}),g.createElement(NK,{baseValue:void 0,accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className,reverseStackOrder:s.reverseStackOrder}),g.createElement(wPe,{cx:s.cx,cy:s.cy,startAngle:s.startAngle,endAngle:s.endAngle,innerRadius:s.innerRadius,outerRadius:s.outerRadius}),g.createElement(jK,wT({},o,{ref:n})))});function y7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function b7(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?y7(Object(n),!0).forEach(function(r){APe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y7(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function APe(e,t,n){return(t=EPe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function EPe(e){var t=TPe(e,"string");return typeof t=="symbol"?t:t+""}function TPe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var LPe=["item"],kPe=b7(b7({},CK),{},{layout:"centric",startAngle:0,endAngle:360}),PPe=g.forwardRef((e,t)=>{var n=pr(e,kPe);return g.createElement(_Pe,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:LPe,tooltipPayloadSearcher:wY,categoricalChartProps:n,ref:t})});const Ry=10,v7={user_id:"",start_date:"",end_date:"",target_amount:""},w7=["#6366f1","#22c55e","#f97316","#0ea5e9","#a855f7","#f43f5e","#eab308","#8b5cf6","#10b981","#ec4899","#14b8a6","#f59e0b"];function DPe({name:e,items:t=[],value:n="",onChange:r,getLabel:s,placeholder:i="Search..."}){const[o,l]=g.useState(!1),[c,d]=g.useState(""),m=g.useRef(null),h=t.find(v=>String(v.id)===String(n)),p=h?s(h):"",b=g.useMemo(()=>{const v=c.toLowerCase();return v?t.filter(x=>s(x).toLowerCase().includes(v)):t},[t,c,s]);return g.useEffect(()=>{const v=x=>{m.current&&!m.current.contains(x.target)&&l(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),a.jsxs("div",{ref:m,className:"relative flex justify-center w-full",children:[a.jsx("input",{value:o?c:p,placeholder:i,onFocus:()=>l(!0),onChange:v=>{d(v.target.value),l(!0)},className:"w-full max-w-md border text-gray-500 border-gray-300 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"}),o&&a.jsx("div",{className:"absolute top-full left-0 z-50 mt-1 w-full bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:b.length?b.map(v=>a.jsx("button",{type:"button",onClick:()=>{r({target:{name:e,value:String(v.id)}}),l(!1),d("")},className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-50",children:s(v)},v.id)):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results found"})})]})}function dj({currentUserRole:e,currentUserId:t}){g.useEffect(()=>{document.title="Targets | Sari-Sari CRM"},[]);const[n,r]=g.useState([]),[s,i]=g.useState([]),[o,l]=g.useState(!1),[c,d]=g.useState(""),[m,h]=g.useState(1),[p,b]=g.useState(!1),[v,x]=g.useState(!1),[w,j]=g.useState(!1),[C,S]=g.useState(null),[_,E]=g.useState(v7),[A,T]=g.useState(null),[R,U]=g.useState(null),[W,I]=g.useState(!1),[M,H]=g.useState("annual"),[q,ae]=g.useState(1),K=g.useMemo(()=>["CEO","ADMIN","GROUP MANAGER","MANAGER","SALES"].includes(e?.toUpperCase()),[e]),B=g.useCallback(async()=>{l(!0);try{const fe=await oe.get("/targets/admin/fetch-all");r(fe.data)}catch(fe){console.error(fe),Q.error("Failed to load targets.")}finally{l(!1)}},[]),X=g.useCallback(async()=>{try{if(K){const fe=await oe.get("/targets/admin/get-users");i(fe.data)}}catch(fe){console.error(fe)}},[K]);g.useEffect(()=>{B(),X()},[B,X]);const le=g.useMemo(()=>{const fe=n.reduce((Ce,Ee)=>Ce+(Number(Ee.target_amount)||0),0),O=n.reduce((Ce,Ee)=>Ce+(Number(Ee.achieved_amount)||0),0),ce=fe>0?(O/fe*100).toFixed(1):0,de=Math.max(0,fe-O);return{totalTarget:fe,totalAchieved:O,achievement:ce,remaining:de,totalCount:n.length}},[n]),ue=g.useCallback(()=>(O=>M==="annual"?O:O.filter(ce=>{const de=new Date(ce.start_date),Ce=new Date(ce.end_date),Ee=de.getMonth(),Ge=Ce.getMonth();let Je=!1;if(M==="semiannual")q===1?Je=Ee<=5&&Ge>=0:Je=Ee<=11&&Ge>=6;else if(M==="trimester"){const Ke=[{start:0,end:3},{start:4,end:7},{start:8,end:11}][q-1];Je=Ee<=Ke.end&&Ge>=Ke.start}else if(M==="quarterly"){const Ke=[{start:0,end:2},{start:3,end:5},{start:6,end:8},{start:9,end:11}][q-1];Je=Ee<=Ke.end&&Ge>=Ke.start}return Je}))(n),[n,M,q]),J=g.useMemo(()=>{const fe=ue(),O={};fe.forEach(Ee=>{const Ge=Ee.user_id,Je=Ee.user?`${Ee.user.first_name} ${Ee.user.last_name}`:"Unknown";O[Ge]||(O[Ge]={userId:Ge,name:Je,targetAmount:0,achievedAmount:0}),O[Ge].targetAmount+=Number(Ee.target_amount)||0,O[Ge].achievedAmount+=Number(Ee.achieved_amount)||0});const ce=Object.values(O).map((Ee,Ge)=>({...Ee,fill:w7[Ge%w7.length]})),de=ce.reduce((Ee,Ge)=>Ee+Ge.targetAmount,0);return ce.map(Ee=>({...Ee,percentage:de>0?(Ee.targetAmount/de*100).toFixed(1):0}))},[ue]),ne=g.useMemo(()=>J.slice(0,8).map(fe=>({name:fe.name.split(" ")[0],achievement:Number(fe.achievedAmount),target:Number(fe.targetAmount)})),[J]),pe=g.useMemo(()=>{const fe=c.toLowerCase();return n.filter(O=>(O.user?`${O.user.first_name} ${O.user.last_name}`.toLowerCase():"").includes(fe)||O.start_date?.includes(fe)||O.end_date?.includes(fe))},[n,c]),we=Math.max(1,Math.ceil(pe.length/Ry)),ye=g.useMemo(()=>{const fe=(m-1)*Ry;return pe.slice(fe,fe+Ry)},[pe,m]),Te=fe=>{const{name:O,value:ce}=fe.target;E(de=>({...de,[O]:ce}))},Ae=()=>{E(v7),x(!1),S(null),b(!0)},Pe=fe=>{E({user_id:fe.user?.id?String(fe.user.id):"",start_date:fe.start_date||"",end_date:fe.end_date||"",target_amount:fe.target_amount?.toString()||""}),x(!0),S(fe.id),b(!0),T(null)},$=fe=>{const O=fe.user?`${fe.user.first_name} ${fe.user.last_name}`:"Unknown";U({title:"Delete Target",message:a.jsxs("span",{children:["Are you sure you want to delete the target for"," ",a.jsx("span",{className:"font-semibold",children:O}),"?"]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:async()=>{await oe.delete(`/targets/admin/${fe.id}`),Q.success("Target deleted successfully."),B(),T(null)}})},Ne=fe=>{if(fe.preventDefault(),!_.user_id||!_.start_date||!_.end_date||!_.target_amount){Q.error("All fields are required.");return}if(new Date(_.end_date)<new Date(_.start_date)){Q.error("End date must be after start date.");return}const O={user_id:Number(_.user_id),target_amount:Number(_.target_amount),start_date:_.start_date,end_date:_.end_date},ce=v?"Update Target":"Create Target";U({title:ce,message:"Are you sure you want to proceed?",confirmLabel:ce,cancelLabel:"Cancel",variant:"primary",action:async()=>{j(!0);try{v?(await oe.put(`/targets/admin/${C}`,O),Q.success("Target updated successfully.")):(await oe.post("/targets/admin/create",O),Q.success("Target created successfully.")),b(!1),B()}catch(de){console.error(de);const Ce=de.response?.data?.detail||de.message||"Operation failed.";Q.error(Ce)}finally{j(!1)}}})};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[o&&a.jsx(yt,{message:"Loading targets..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold",children:[a.jsx(ms,{className:"mr-2 text-blue-600"})," Targets"]}),K&&e.toLowerCase()!=="sales"&&a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:Ae,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(Rt,{className:"mr-2"})," Add Target"]})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[a.jsx(zy,{title:"Total Targets",value:le.totalCount,icon:a.jsx(ms,{size:22}),color:"blue"}),a.jsx(zy,{title:"Target Amount",value:`${le.totalTarget.toLocaleString("en-US",{maximumFractionDigits:0})}`,icon:a.jsx(Cc,{size:22}),color:"green"}),a.jsx(zy,{title:"Achieved Amount",value:`${le.totalAchieved.toLocaleString("en-US",{maximumFractionDigits:0})}`,icon:a.jsx(Wd,{size:22}),color:"purple"}),a.jsx(zy,{title:"Achievement Rate",value:`${le.achievement}%`,icon:a.jsx(ms,{size:22}),color:"orange"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow p-4 md:h-[420px] h-[350px]",children:[a.jsx("div",{className:"mb-4 text-center",children:a.jsx("h2",{className:"text-lg font-semibold",children:"Sales Achievement"})}),a.jsx(K6,{width:"100%",height:"85%",children:a.jsxs(vPe,{data:ne,children:[a.jsx(tK,{strokeDasharray:"3 3",vertical:!1}),a.jsx(lK,{dataKey:"name",tickLine:!1,axisLine:!1,tick:{fontSize:12,fill:"#6b7280"}}),a.jsx(cK,{tickLine:!1,axisLine:!1,label:{value:"Amount",angle:-90,position:"insideLeft",offset:3},domain:[0,fe=>Math.ceil(fe/50)*50],tick:{fontSize:12,fill:"#6b7280"}}),a.jsx(hz,{cursor:{fill:"rgba(0, 0, 0, 0.15)"},wrapperStyle:{outline:"none",zIndex:9999,pointerEvents:"auto"},contentStyle:{backgroundColor:"#ffffff",border:"2px solid #1f2937",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.2)",zIndex:9999,pointerEvents:"auto"},labelFormatter:fe=>`Sales: ${fe}`,formatter:(fe,O,ce)=>{if(!ce||!ce.payload)return[fe,O];const de=ce.payload,Ce=Number(de.achievement)||0,Ee=Number(de.target)||0,Ge=Math.max(0,Ee-Ce),Je=Ee>0?(Ce/Ee*100).toFixed(1):0;return O==="Achieved"?[`${Ce.toLocaleString()} (${Je}%)`,"Achieved"]:O==="Remaining"?[`${Ge.toLocaleString()}`,"Remaining"]:[fe,O]}}),a.jsx(pT,{dataKey:"achievement",stackId:"a",fill:"#10b981",name:"Achieved",label:({x:fe,y:O,width:ce,value:de,payload:Ce})=>{if(!Ce||Ce.target===void 0)return null;const Ee=(de/Ce.target*100).toFixed(0),Ge=O-10<0?10:O-10;return a.jsxs("text",{x:fe+ce/2,y:Ge,textAnchor:"middle",fill:"#111827",fontSize:10,fontWeight:500,children:[Ee,"%"]})}}),a.jsx(pT,{dataKey:fe=>Math.max(0,fe.target-fe.achievement),stackId:"a",fill:"#e5e7eb",name:"Remaining",radius:[0,4,4,0]})]})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow p-4 md:h-[420px] h-[350px]",children:[a.jsxs("div",{className:"text-center mb-4",children:[a.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Target Distribution by Sales"}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center items-center flex-wrap",children:[a.jsxs("select",{value:M,onChange:fe=>{H(fe.target.value),ae(1)},className:"border border-gray-300 rounded px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"annual",children:"Annual"}),a.jsx("option",{value:"semiannual",children:"Every 6 Months"}),a.jsx("option",{value:"trimester",children:"Every 4 Months"}),a.jsx("option",{value:"quarterly",children:"Quarterly"})]}),M!=="annual"&&a.jsxs("select",{value:q,onChange:fe=>ae(parseInt(fe.target.value)),className:"border border-gray-300 rounded px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[M==="semiannual"&&a.jsxs(a.Fragment,{children:[a.jsx("option",{value:1,children:"Jan - Jun"}),a.jsx("option",{value:2,children:"Jul - Dec"})]}),M==="trimester"&&a.jsxs(a.Fragment,{children:[a.jsx("option",{value:1,children:"Jan - Apr"}),a.jsx("option",{value:2,children:"May - Aug"}),a.jsx("option",{value:3,children:"Sep - Dec"})]}),M==="quarterly"&&a.jsxs(a.Fragment,{children:[a.jsx("option",{value:1,children:"Q1 (Jan - Mar)"}),a.jsx("option",{value:2,children:"Q2 (Apr - Jun)"}),a.jsx("option",{value:3,children:"Q3 (Jul - Sep)"}),a.jsx("option",{value:4,children:"Q4 (Oct - Dec)"})]})]})]})]}),a.jsx(K6,{width:"100%",height:"85%",children:J.length>0?a.jsxs(PPe,{children:[a.jsx(hz,{contentStyle:{backgroundColor:"#fff",border:"1px solid #333",borderRadius:"6px",padding:"10px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",outline:"none"},content:({active:fe,payload:O})=>{if(fe&&O&&O.length>0){const ce=O[0].payload;return a.jsxs("div",{className:"bg-white p-3 border border-gray-300 rounded shadow-lg",children:[a.jsx("p",{className:"text-sm font-semibold text-gray-800",children:ce.name}),a.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[a.jsx("span",{className:"font-semibold",children:"Target Amount:"})," ",Number(ce.targetAmount||0).toLocaleString("en-US",{maximumFractionDigits:0})]}),a.jsxs("p",{className:"text-xs text-purple-600 font-semibold mt-2",children:["Distribution: ",ce.percentage,"%"]})]})}return null}}),a.jsx(WY,{data:J,dataKey:"targetAmount",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:({name:fe,percentage:O,fill:ce})=>a.jsxs("text",{fill:ce,fontSize:12,fontWeight:600,children:[fe.split(" ")[0],": ",O,"%"]}),labelLine:!1,isAnimationActive:!0,animationDuration:800})]}):a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx("p",{className:"text-gray-500 text-center",children:"No targets data available"})})})]})]}),K&&e.toLowerCase()!=="sales"&&a.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(bt,{className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search targets...",value:c,onChange:fe=>d(fe.target.value),className:"w-full outline-none"})]})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 font-semibold text-gray-600",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 text-left",children:"User"}),a.jsx("th",{className:"py-3 px-4 text-left",children:"Target Amount"}),a.jsx("th",{className:"py-3 px-4 text-left",children:"Achieved Amount"}),a.jsx("th",{className:"py-3 px-4 text-left",children:"Achievement %"}),a.jsx("th",{className:"py-3 px-4 text-left",children:"Start Date"}),a.jsx("th",{className:"py-3 px-4 text-left",children:"End Date"})]})}),a.jsx("tbody",{children:ye.length>0?ye.map(fe=>{const O=Number(fe.target_amount)>0?(Number(fe.achieved_amount)/Number(fe.target_amount)*100).toFixed(1):0;return a.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer border-b border-gray-200",onClick:()=>T(fe),children:[a.jsx("td",{className:"py-3 px-4 text-left font-medium",children:fe.user?`${fe.user.first_name} ${fe.user.last_name}`:"Unknown"}),a.jsxs("td",{className:"py-3 px-4 text-left",children:["",Number(fe.target_amount).toLocaleString()]}),a.jsxs("td",{className:"py-3 px-4 text-left",children:["",Number(fe.achieved_amount).toLocaleString()]}),a.jsx("td",{className:"py-3 px-4 text-left",children:a.jsxs("span",{className:`px-2 py-1 rounded text-white text-xs font-semibold ${O>=100?"bg-green-500":O>=75?"bg-blue-500":O>=50?"bg-yellow-500":"bg-red-500"}`,children:[O,"%"]})}),a.jsx("td",{className:"py-3 px-4 text-left",children:fe.start_date}),a.jsx("td",{className:"py-3 px-4 text-left",children:fe.end_date})]},fe.id)}):a.jsx("tr",{children:a.jsx("td",{colSpan:"6",className:"py-4 px-4 text-center text-gray-500",children:"No targets found"})})})]})}),ye.length>0&&a.jsx(Et,{className:"mt-4",totalItems:pe.length,pageSize:Ry,currentPage:m,onPrev:()=>h(fe=>Math.max(fe-1,1)),onNext:()=>h(fe=>Math.min(fe+1,we)),label:"targets"})]}),A&&a.jsx(OPe,{target:A,onClose:()=>T(null),onEdit:()=>Pe(A),onDelete:()=>$(A),canEdit:K}),p&&K&&a.jsx(MPe,{formData:_,users:s,isEditing:v,isSubmitting:w,onChange:Te,onClose:()=>b(!1),onSubmit:Ne}),R&&a.jsx(IPe,{...R,loading:W,onConfirm:async()=>{I(!0),await R.action(),I(!1),U(null)},onCancel:()=>U(null)})]})}function zy({title:e,value:t,icon:n,color:r="blue"}){const s={blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",purple:"bg-purple-100 text-purple-600",orange:"bg-orange-100 text-orange-600"};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200",children:[a.jsx("div",{className:`p-3 rounded-full ${s[r]} mr-4`,children:n}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:e}),a.jsx("p",{className:"text-2xl font-bold",children:t})]})]})}function OPe({target:e,onClose:t,onEdit:n,onDelete:r,canEdit:s}){const i=Number(e.target_amount)>0?(Number(e.achieved_amount)/Number(e.target_amount)*100).toFixed(1):0;return a.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",onClick:t,children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:o=>o.stopPropagation(),children:[a.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-4 rounded-t-xl",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Target Details"}),a.jsx("button",{onClick:t,className:"text-gray-200 hover:text-white transition cursor-pointer",children:a.jsx(wn,{size:25})})]}),s&&a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:e.user&&`${e.user.first_name} ${e.user.last_name}`})}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 cursor-pointer",onClick:n,children:[a.jsx(Rn,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400 cursor-pointer",onClick:r,children:[a.jsx(jt,{className:"mr-2"}),"Delete"]})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"})]}),a.jsxs("div",{className:"p-4 lg:p-6",children:[a.jsx("div",{className:"flex w-full bg-gray-600 text-white overflow-x-auto",children:a.jsx("button",{className:"flex-1 min-w-[90px] px-4 py-2 lg:text-lg text-sm font-medium text-center text-white",children:"Overview"})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm sm:p-6 lg:p-5 border border-gray-200 text-sm text-gray-700",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-900",children:"Sales Person:"}),a.jsx("p",{children:e.user?`${e.user.first_name} ${e.user.last_name}`:"Unknown"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-900",children:"Target Amount:"}),a.jsxs("p",{className:"text-green-600 font-semibold",children:["",Number(e.target_amount).toLocaleString()]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-900",children:"Achieved Amount:"}),a.jsxs("p",{className:"text-blue-600 font-semibold",children:["",Number(e.achieved_amount).toLocaleString()]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-900",children:"Achievement Rate:"}),a.jsxs("p",{className:`font-semibold ${i>=100?"text-green-600":i>=75?"text-blue-600":i>=50?"text-yellow-600":"text-red-600"}`,children:[i,"%"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-900",children:"Start Date:"}),a.jsx("p",{children:e.start_date})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-900",children:"End Date:"}),a.jsx("p",{children:e.end_date})]})]})})]})]})})}function MPe({formData:e,users:t,isEditing:n,isSubmitting:r,onChange:s,onClose:i,onSubmit:o}){return a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl p-8 relative overflow-y-auto min-h-[50vh]",children:[a.jsx("button",{onClick:i,className:"absolute top-5 right-5",children:a.jsx(St,{size:24})}),a.jsx("h2",{className:"text-2xl font-semibold text-center mb-8",children:n?"Edit Target":"Add New Target"}),a.jsxs("form",{onSubmit:o,className:"grid gap-5 text-base",children:[a.jsxs("div",{className:"flex flex-col gap-1 relative",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Assign User"}),a.jsx(DPe,{name:"user_id",items:t,value:e.user_id,onChange:s,getLabel:l=>`${l.first_name} ${l.last_name}`,placeholder:"Search user..."})]}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:"Target Amount"}),a.jsx("div",{className:"flex justify-center w-full",children:a.jsx("input",{type:"number",name:"target_amount",placeholder:"0.00",value:e.target_amount,onChange:s,required:!0,className:"w-full max-w-md border text-gray-500 border-gray-300 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"})})]}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:"Start Date"}),a.jsx("div",{className:"flex justify-center w-full",children:a.jsx("input",{type:"date",name:"start_date",value:e.start_date,onChange:s,required:!0,className:"w-full max-w-md border text-gray-500 border-gray-300 text-gray-500 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"})})]}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:"End Date"}),a.jsx("div",{className:"flex justify-center w-full",children:a.jsx("input",{type:"date",name:"end_date",value:e.end_date,onChange:s,required:!0,className:"w-full max-w-md border text-gray-500 border-gray-300 text-gray-500 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"})})]}),a.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[a.jsx("button",{type:"button",onClick:i,className:"bg-red-400 text-white px-5 py-2 rounded-lg",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:r,className:"bg-tertiary text-white px-5 py-2 rounded-lg hover:bg-tertiary/90 disabled:opacity-50",children:r?"Saving...":"Save Target"})]})]})]})})}function IPe({title:e,message:t,confirmLabel:n,cancelLabel:r,variant:s,loading:i,onConfirm:o,onCancel:l}){return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:e}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:t}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{onClick:l,disabled:i,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:r}),a.jsx("button",{onClick:o,disabled:i,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${s==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-tertiary/90 border border-tertiary"}`,children:i?"Processing...":n})]})]})})}function $Pe(){const{userRole:e}=er();return a.jsx(dj,{currentUserRole:e,currentUserId:null})}const Wh=10,X2=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],Z2={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:""},ii=e=>{if(!e)return"Draft";const t=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[t]||"Draft"},J2=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",RPe=e=>{switch(ii(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},zPe=e=>{switch(ii(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},Uy=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",qh=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",UPe=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const t=new Date(e);if(isNaN(t.getTime()))return"";const n=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0");return`${n}-${r}-${s}`}catch{return""}},e_=(e,t)=>{if(!e||t==null||t==="")return"";const n=Number(t);if(Number.isNaN(n))return"";const r=new Date(e);return isNaN(r.getTime())?"":(r.setDate(r.getDate()+n),r.toISOString().slice(0,10))},N7=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},j7=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},qv=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},FPe=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const r of e){const s=localStorage.getItem(r);if(s)try{const i=JSON.parse(s),o=qv(i);if(o)return o}catch{}}const t=localStorage.getItem("user_id"),n=qv(t);return n||null},BPe=e=>{if(!e)return"";const n=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(r=>r!=null&&String(r).trim()!=="");return n?String(n):""},HPe=e=>{if(!e)return"";const n=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(r=>r!=null&&String(r).trim()!=="");return n?String(n):""};function GPe(){const e=rt();g.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[t,n]=g.useState([]),[r,s]=g.useState(!1),[i,o]=g.useState([]),[l,c]=g.useState([]),[d,m]=g.useState([]),[h,p]=g.useState([]),[b,v]=g.useState(null),[x,w]=g.useState(null),[j,C]=g.useState(!1),[S,_]=g.useState(!1),[E,A]=g.useState(!1),[T,R]=g.useState(null),[U,W]=g.useState(!1),[I,M]=g.useState(null),[H,q]=g.useState(Z2),[ae,K]=g.useState(""),[B,X]=g.useState("Filter by Status"),[le,ue]=g.useState(null),[J,ne]=g.useState(1),[pe,we]=g.useState("Overview"),[ye,Te]=g.useState("Draft");g.useEffect(()=>{let P=!0;return(async()=>{const G=FPe();if(G&&P){v(G);return}try{const te=await oe.get("/auth/me"),ve=qv(te?.data);if(ve&&P){v(ve);return}}catch{}try{const te=await oe.get("/users/me"),ve=qv(te?.data);if(ve&&P){v(ve);return}}catch{}P&&v(null)})(),()=>{P=!1}},[]);const Ae=g.useCallback(P=>P&&l.find(G=>String(G.id)===String(P))?.name||"",[l]),Pe=g.useCallback(P=>{if(!P)return"";const he=d.find(G=>String(G.id)===String(P));return he?`${he.first_name} ${he.last_name}`.trim():""},[d]),$=g.useCallback(P=>{if(!P)return"--";const he=i.find(G=>String(G.id)===String(P));return he?.deal_name||he?.name||`Deal #${N7(P)}`},[i]),Ne=g.useCallback(P=>{const he=i.find(ve=>String(ve.id)===String(P)),G=BPe(he);let te=HPe(he);if(!te&&G){const ve=d.filter(je=>String(je.account_id||"")===String(G));if(ve.length>0){const je=[...ve].sort((Ie,tt)=>{const vt=`${Ie.first_name||""} ${Ie.last_name||""}`.trim().toLowerCase(),tn=`${tt.first_name||""} ${tt.last_name||""}`.trim().toLowerCase();return vt.localeCompare(tn)});te=String(je[0].id)}}if(G&&te){const ve=d.find(je=>String(je.id)===String(te));ve?.account_id&&String(ve.account_id)!==String(G)&&(te="")}return{accountId:G||"",contactId:te||""}},[i,d]),fe=g.useCallback(P=>{if(!P)return"--";if(P.deal?.deal_name)return P.deal.deal_name;if(P.deal?.name)return P.deal.name;const he=P.deal_id||P.deal?.id;return he?$(he):"--"},[$]),O=g.useCallback(P=>{if(!P)return"--";if(P.account?.name)return P.account.name;let he=P.account_id||P.account?.id;if(!he){const G=P.deal_id||P.deal?.id;G&&(he=Ne(G).accountId)}return he?Ae(he)||`Account #${he}`:"--"},[Ne,Ae]),ce=g.useCallback(P=>{if(!P)return"--";if(P.contact?.first_name||P.contact?.last_name)return`${P.contact?.first_name||""} ${P.contact?.last_name||""}`.trim()||"--";let he=P.contact_id||P.contact?.id;if(!he){const te=P.deal_id||P.deal?.id;te&&(he=Ne(te).contactId)}return(he?Pe(he):"")||(he?`Contact #${he}`:"--")},[Ne,Pe]),de=g.useCallback(async(P=null)=>{s(!0);try{const he=await oe.get("/quotes/admin/fetch-all"),te=[...Array.isArray(he.data)?he.data:[]].sort((ve,je)=>{const Ie=ve?.created_at||ve?.updated_at||0,tt=je?.created_at||je?.updated_at||0;return new Date(tt)-new Date(Ie)});if(n(te),P){const ve=te.find(je=>je.id===P);w(ve||null)}}catch(he){console.error(he),n([]),he.response?.status===403?Q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):Q.error("Failed to fetch quotes. Please try again later.")}finally{s(!1)}},[]),Ce=g.useCallback(async()=>{try{const P=await oe.get("/deals/admin/fetch-all");o(Array.isArray(P.data)?P.data:[])}catch(P){console.error(P),P.response?.status===403&&Q.warn("Unable to load deals (permission denied).")}},[]),Ee=g.useCallback(async()=>{try{const P=await oe.get("/accounts/admin/fetch-all");c(Array.isArray(P.data)?P.data:[])}catch(P){console.error(P),P.response?.status===403&&Q.warn("Unable to load accounts (permission denied).")}},[]),Ge=g.useCallback(async()=>{try{const P=await oe.get("/contacts/admin/fetch-all");m(Array.isArray(P.data)?P.data:[])}catch(P){console.error(P),P.response?.status===403&&Q.warn("Unable to load contacts (permission denied).")}},[]),Je=g.useCallback(async()=>{try{const P=await oe.get("/users/all");p(Array.isArray(P.data)?P.data:[])}catch(P){console.error(P),P.response?.status===403&&Q.warn("Unable to load users (permission denied).")}},[]);g.useEffect(()=>{de(),Ce(),Ee(),Ge(),Je()},[de,Ce,Ee,Ge,Je]);const We=g.useMemo(()=>{const P=ae.trim().toLowerCase(),he=B.trim();return t.filter(G=>{const te=fe(G),ve=O(G),je=ce(G),Ie=e_(G.presented_date,G.validity_days),tt=[G.quote_id,te,ve,je,G.total_amount?.toString(),G.validity_days?.toString(),G.presented_date?qh(G.presented_date):"",Ie?qh(Ie):"",G.assigned_user?.first_name,G.assigned_user?.last_name,G.creator?.first_name,G.creator?.last_name,G.status,G.notes,Uy(G.created_at),Uy(G.updated_at)],vt=P===""||tt.some(un=>un==null?!1:un.toString().toLowerCase().includes(P)),tn=he==="Filter by Status"||ii(G.status)===he;return vt&&tn})},[t,ae,B,fe,O,ce]),Ke=Math.max(1,Math.ceil(We.length/Wh)||1);g.useEffect(()=>ne(1),[ae,B]),g.useEffect(()=>{ne(P=>{const he=Math.max(1,Math.ceil(We.length/Wh)||1);return P>he?he:P})},[We.length]);const He=g.useMemo(()=>{const P=(J-1)*Wh;return We.slice(P,P+Wh)},[We,J]),Se=()=>ne(P=>Math.max(P-1,1)),Ve=()=>ne(P=>Math.min(P+1,Ke)),k=P=>{w(P),we("Overview"),Te(ii(P?.status)||"Draft")},Z=()=>{w(null),we("Overview")},re=P=>{P.target.id==="quoteModalBackdrop"&&!U&&Z()},be=g.useCallback(()=>{C(!1),_(!1),M(null),q(Z2),A(!1)},[]),z=P=>{P.target.id==="modalBackdrop"&&!E&&!U&&be()},ee=P=>{const{name:he,value:G}=P.target;if(he==="deal_id"){const{accountId:te,contactId:ve}=Ne(G);q(je=>({...je,deal_id:G,account_id:te,contact_id:ve}));return}q(te=>({...te,[he]:G}))},ie=()=>{q(Z2),_(!1),M(null),C(!0)},V=P=>{if(!P)return;w(null);const he=P.deal?.id?String(P.deal.id):P.deal_id?String(P.deal_id):"",G=he?Ne(he):{accountId:"",contactId:""},te=P.account?.id?String(P.account.id):P.account_id?String(P.account_id):G.accountId,ve=P.contact?.id?String(P.contact.id):P.contact_id?String(P.contact_id):G.contactId,je=P.assigned_user?.id?String(P.assigned_user.id):P.assigned_to?String(P.assigned_to):"";q({deal_id:he,account_id:te||"",contact_id:ve||"",total_amount:P.total_amount?.toString()||"",presented_date:UPe(P.presented_date),validity_days:P.validity_days!==null&&P.validity_days!==void 0?String(P.validity_days):"",status:ii(P.status)||"Draft",assigned_to:je,notes:P.notes||""}),_(!0),M(P.id),C(!0)},F=P=>{if(!P)return;const he=P.quote_id||"this quote";R({title:"Delete Quote",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:he}),"? This action cannot be undone."]}),confirmLabel:"Delete Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:P.id,name:he}})},se=P=>{if(P.preventDefault(),!b){Q.error("Unable to determine current user. Please log in again.");return}if(!H.deal_id){Q.error("Deal is required.");return}if(!H.total_amount||Number(H.total_amount)<=0){Q.error("Total amount must be greater than 0.");return}if(H.validity_days!==""&&Number(H.validity_days)<0){Q.error("Validity days must be 0 or higher.");return}const he=Ne(H.deal_id),G={deal_id:Number(H.deal_id),account_id:he.accountId?Number(he.accountId):null,contact_id:he.contactId?Number(he.contactId):null,total_amount:Number(H.total_amount),presented_date:H.presented_date||null,validity_days:H.validity_days===""?null:Number(H.validity_days),status:H.status||"Draft",assigned_to:H.assigned_to?Number(H.assigned_to):null,notes:H.notes?.trim()||null},te=S&&I?"update":"create",ve=$(H.deal_id),je=te==="create"?{...G,created_by_id:Number(b)}:G;R({title:te==="create"?"Confirm New Quote":"Confirm Update",message:te==="create"?a.jsxs("span",{children:["Are you sure you want to create a quote for"," ",a.jsx("span",{className:"font-semibold",children:ve}),"?"]}):a.jsxs("span",{children:["Save changes to"," ",a.jsx("span",{className:"font-semibold",children:ve}),"?"]}),confirmLabel:te==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:te,payload:je,targetId:I||null,name:ve}})},xe=async()=>{if(!T?.action){R(null);return}const{action:P}=T,{type:he,payload:G,targetId:te,name:ve}=P;W(!0);try{if(he==="create")A(!0),await oe.post("/quotes/admin",G),Q.success("Quote created successfully."),be(),await de();else if(he==="update"){if(!te)throw new Error("Missing quote identifier for update.");A(!0),await oe.put(`/quotes/admin/${te}`,G),Q.success("Quote updated successfully."),be(),await de(),x?.id===te&&w(null)}else if(he==="delete"){if(!te)throw new Error("Missing quote identifier for deletion.");const je=x?.id;ue(te),await oe.delete(`/quotes/admin/${te}`),Q.success(`Quote "${ve}" deleted successfully.`),await de(je&&je!==te?je:null),je===te&&w(null)}}catch(je){console.error(je);const Ie=he==="create"?"Failed to create quote. Please review the details and try again.":he==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";Q.error(Ie),(he==="create"||he==="update")&&A(!1),he==="delete"&&ue(null)}finally{(he==="create"||he==="update")&&A(!1),he==="delete"&&ue(null),W(!1),R(null)}},ge=()=>{U||R(null)},Me=g.useCallback((P,he)=>{const G=P?.deal_id??P?.deal?.id??"",te=G?Number(G):null,ve=te?Ne(String(te)):{accountId:"",contactId:""},je=P?.account_id??P?.account?.id??ve.accountId??null,Ie=P?.contact_id??P?.contact?.id??ve.contactId??null,tt=P?.total_amount??0,vt=P?.assigned_to??P?.assigned_user?.id??null;return{deal_id:te,account_id:je!=null&&String(je).trim()!==""?Number(je):null,contact_id:Ie!=null&&String(Ie).trim()!==""?Number(Ie):null,total_amount:Number(tt),presented_date:P?.presented_date||null,validity_days:P?.validity_days===""||P?.validity_days===void 0||P?.validity_days===null?null:Number(P.validity_days),status:he,assigned_to:vt!=null&&String(vt).trim()!==""?Number(vt):null,notes:P?.notes?.trim()||null}},[Ne]),De=g.useCallback(async()=>{if(!x?.id)return;const P=ii(ye),he=[P,P.toLowerCase()],G=async te=>oe.patch(`/quotes/admin/${x.id}/status`,{status:te},{headers:{"Content-Type":"application/json"}});try{let te=!1;for(const ve of he)try{await G(ve),te=!0;break}catch(je){if(je?.response?.status===422)continue;throw je}if(!te){const ve=Me(x,P);if(!ve.deal_id){Q.error("Cannot update status: missing deal_id on selected quote.");return}if(!ve.total_amount||ve.total_amount<=0){Q.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await oe.put(`/quotes/admin/${x.id}`,ve)}Q.success(`Quote status updated to ${P}`),w(null),we("Overview"),await de()}catch(te){console.error(te);const ve=te?.response?.data?.message||(te?.response?.data?.errors?Object.values(te.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";Q.error(ve)}},[x,ye,de,Me]),et=[{label:"Filter by Status",value:"Filter by Status"},...X2.map(P=>({label:P.label,value:P.value}))],gt=T?.action?.type==="delete"?T.action.targetId:null,Nt=x&&(le===x.id||gt===x.id),Pt=x&&le===x.id,dn=x?a.jsx("div",{id:"quoteModalBackdrop",onClick:re,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:P=>P.stopPropagation(),children:[a.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:a.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),a.jsx("button",{onClick:Z,className:"text-gray-500 hover:text-white transition cursor-pointer",children:a.jsx(wn,{size:25})})]})}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:fe(x)}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${zPe(x.status)}`,children:J2(x.status)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>V(x),disabled:U||T?.action?.type==="update"&&T.action.targetId===x.id,children:[a.jsx(Rn,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>F(x),disabled:!!Nt,children:Pt?"Deleting...":a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"mr-2"}),"Delete"]})})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-1 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(P=>a.jsx("button",{onClick:()=>we(P),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${pe===P?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:P},P))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[pe==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Quote ID:"}),a.jsx("p",{children:j7(x.quote_id)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Deal:"}),a.jsx("p",{children:fe(x)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Account:"}),a.jsx("p",{children:O(x)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Contact:"}),a.jsx("p",{children:ce(x)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Total Amount:"}),a.jsx("p",{children:x.total_amount?`${Number(x.total_amount).toLocaleString()}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Presented Date:"}),a.jsx("p",{children:qh(x.presented_date)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Validity Days:"}),a.jsx("p",{children:x.validity_days!==null&&x.validity_days!==void 0?x.validity_days:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),a.jsx("p",{children:qh(e_(x.presented_date,x.validity_days))||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Status:"}),a.jsx("p",{children:J2(x.status)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:x.assigned_user?`${x.assigned_user.first_name} ${x.assigned_user.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:x.creator?`${x.creator.first_name} ${x.creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:Uy(x.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:Uy(x.updated_at)||"N/A"})]})]})}),pe==="Notes"&&a.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),a.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:x.notes||"No notes available."})]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(pt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Quotes"}}}),children:[a.jsx(ft,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(kn,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:ye||ii(x.status)||"Draft",onChange:P=>Te(P.target.value),children:X2.map(P=>a.jsx("option",{value:P.value,children:P.label},P.value))}),a.jsx("button",{onClick:De,disabled:ii(ye)===ii(x.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${ii(ye)===ii(x.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,jn=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&a.jsx(yt,{message:"Loading quotes..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(Br,{className:"mr-2 text-blue-600"})," Quotes"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:ie,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(Rt,{className:"mr-2"})," Add Quote"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search quotes",value:ae,onChange:P=>K(P.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:B,onChange:P=>X(P.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:et.map(P=>a.jsx("option",{value:P.value,children:P.label},P.value))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),a.jsx("th",{className:"py-3 px-4",children:"Deal"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Expiry Date"})]})}),a.jsx("tbody",{children:r?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"Loading quotes..."})}):We.length>0?He.map(P=>{const he=e_(P.presented_date,P.validity_days);return a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>k(P),children:[a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:j7(P.quote_id)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"break-words",children:fe(P)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-sm text-gray-700 break-words",children:O(P)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"break-words",children:ce(P)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-gray-700",children:P.total_amount?`${Number(P.total_amount).toLocaleString()}`:"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${RPe(P.status)}`,children:J2(P.status)})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{children:P.assigned_user?`${P.assigned_user.first_name} ${P.assigned_user.last_name}`:"Unassigned"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-gray-500 text-xs",children:qh(he)||"--"})})]},P.id)}):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No quotes found."})})})]})}),a.jsx(Et,{className:"mt-4",totalItems:We.length,pageSize:Wh,currentPage:J,onPrev:Se,onNext:Ve,label:"quotes"})]}),oa=j?a.jsx("div",{id:"modalBackdrop",onClick:z,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:P=>P.stopPropagation(),children:[a.jsx("button",{onClick:be,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:E||U,children:a.jsx(St,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:S?"Edit Quote":"Add New Quote"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:se,children:[a.jsx(S7,{label:"Deal",name:"deal_id",value:H.deal_id,onChange:P=>{const{accountId:he,contactId:G}=Ne(P);q(te=>({...te,deal_id:P,account_id:he,contact_id:G}))},items:Array.isArray(i)?i:[],getLabel:P=>`${N7(P?.deal_id??"")} ${P?.name??""}`.trim(),placeholder:"Search deal...",disabled:E||i.length===0,className:"md:col-span-2"}),a.jsx(C7,{label:"Account",value:Ae(H.account_id)||(H.account_id?`Account #${H.account_id}`:""),disabled:!0}),a.jsx(C7,{label:"Contact",value:Pe(H.contact_id)||(H.contact_id?`Contact #${H.contact_id}`:""),disabled:!0}),a.jsx(t_,{label:"Total Amount",name:"total_amount",type:"number",value:H.total_amount,onChange:ee,placeholder:"0.00",required:!0,disabled:E}),a.jsx(t_,{label:"Presented Date",name:"presented_date",type:"date",value:H.presented_date,onChange:ee,disabled:E}),a.jsx(t_,{label:"Validity Days",name:"validity_days",type:"number",value:H.validity_days,onChange:ee,placeholder:"30",disabled:E}),a.jsx(S7,{label:"Assigned To",value:H.assigned_to||"",onChange:P=>q(he=>({...he,assigned_to:P})),items:Array.isArray(h)?h:[],getLabel:P=>{const he=`${P?.first_name??""} ${P?.last_name??""}`.trim();return he?P?.role?`${he} (${P.role})`:he:P?.email||""},placeholder:"Search assignee...",disabled:E}),a.jsx(VPe,{label:"Status",name:"status",value:H.status,onChange:ee,options:X2,required:!0,disabled:E,className:"md:col-span-2"}),a.jsx(qPe,{label:"Notes",name:"notes",value:H.notes,onChange:ee,placeholder:"Additional details...",rows:3,disabled:E,className:"md:col-span-2"}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:be,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:E||U,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:E||U,children:E?"Saving...":S?"Update Quote":"Save Quote"})]})]})]})}):null,Jn=T?a.jsx(YPe,{open:!0,title:T.title,message:T.message,confirmLabel:T.confirmLabel,cancelLabel:T.cancelLabel,variant:T.variant,onConfirm:xe,onCancel:ge,loading:U}):null;return a.jsxs(a.Fragment,{children:[x?dn:jn,oa,Jn]})}function t_({label:e,name:t,value:n,onChange:r,placeholder:s,type:i="text",required:o=!1,disabled:l=!1,className:c=""}){return a.jsxs("div",{className:c,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("input",{type:i,name:t,value:n??"",onChange:r,placeholder:s,required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]})}function C7({label:e,value:t,className:n="",disabled:r=!0}){return a.jsxs("div",{className:n,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("input",{type:"text",value:t??"",disabled:r,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function VPe({label:e,name:t,value:n,onChange:r,options:s,required:i=!1,disabled:o=!1,className:l=""}){const c=n!=null?String(n):"",m=s.some(h=>String(h.value)===c)?c:"";return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:m,onChange:r,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:s.map(h=>a.jsx("option",{value:String(h.value??""),children:h.label},h.value??h.label))})]})}function S7({label:e,items:t=[],value:n="",onChange:r,getLabel:s,placeholder:i="Search...",disabled:o=!1,className:l=""}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx(WPe,{items:t,value:n??"",onChange:r,getLabel:s,placeholder:i,disabled:o})]})}function WPe({items:e=[],value:t="",onChange:n,getLabel:r,placeholder:s="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=g.useState(!1),[d,m]=g.useState(""),h=g.useRef(null),p=e.find(x=>String(x.id)===String(t)),b=p?r(p):"",v=g.useMemo(()=>{const x=d.trim().toLowerCase();return(x?e.filter(j=>(r(j)||"").toLowerCase().includes(x)):e).slice(0,o)},[e,d,r,o]);return g.useEffect(()=>{const x=w=>{h.current&&!h.current.contains(w.target)&&c(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]),g.useEffect(()=>{l||m("")},[l]),a.jsxs("div",{ref:h,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:l?d:b,placeholder:s,onFocus:()=>!i&&c(!0),onChange:x=>{m(x.target.value),l||c(!0)},className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:v.length>0?v.map(x=>{const w=String(x.id),j=r(x),C=String(t)===w;return a.jsx("button",{type:"button",onClick:()=>{n(w),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${C?"bg-blue-50":""}`,children:j||"--"},w)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function qPe({label:e,name:t,value:n,onChange:r,placeholder:s,rows:i=3,disabled:o=!1,className:l=""}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:r,placeholder:s,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function YPe({open:e,title:t,message:n,confirmLabel:r,cancelLabel:s="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:s}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":r})]})]})})}const uj=[{value:"CEO",label:"CEO"},{value:"Admin",label:"Admin"},{value:"Group Manager",label:"Group Manager"},{value:"Manager",label:"Manager"},{value:"Marketing",label:"Marketing"},{value:"Sales",label:"Sales"}],Yh={firstName:"",lastName:"",email:"",password:"",role:""},KPe={CEO:"bg-purple-100 text-purple-700",ADMIN:"bg-purple-100 text-purple-700",GROUP_MANAGER:"bg-indigo-100 text-indigo-700",MANAGER:"bg-blue-100 text-blue-700",MARKETING:"bg-yellow-100 text-yellow-700",SALES:"bg-green-100 text-green-700"},Ui=e=>e?e.toString().trim().replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/\s+/g,"_").toUpperCase():"",QPe=e=>{const t=Ui(e),n=uj.find(r=>Ui(r.value)===t);return n?n.value:e||""},NT=e=>{const t=Ui(e),n=uj.find(r=>Ui(r.value)===t);return n?n.label:typeof e=="string"?e.toLowerCase().replace(/\b\w/g,r=>r.toUpperCase()):"--"},_7=e=>{if(!e)return"--";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",","")},n_=(e,{size:t="sm"}={})=>{const n=Ui(e),r=KPe[n]||"bg-gray-100 text-gray-700",s=t==="lg"?"px-3 py-1 text-sm":t==="md"?"px-2.5 py-1 text-sm":"px-2 py-1 text-xs";return a.jsx("span",{className:`${s} font-semibold rounded-md inline-flex items-center justify-center ${r}`,children:NT(e)})},td=10,XPe=(e,t)=>{const n=e?.trim()?.[0]??"",r=t?.trim()?.[0]??"";return`${n}${r}`.toUpperCase()||"U"},A7=e=>[...e].sort((t,n)=>{const r=t.created_at?new Date(t.created_at).getTime():0;return(n.created_at?new Date(n.created_at).getTime():0)-r});function ZPe(){const{user:e,loading:t}=Ut(),[n,r]=g.useState([]),[s,i]=g.useState(!1),[o,l]=g.useState(""),[c,d]=g.useState(""),[m,h]=g.useState(null),[p,b]=g.useState(!1),[v,x]=g.useState(!1),[w,j]=g.useState(null),[C,S]=g.useState(Yh),[_,E]=g.useState(!1),[A,T]=g.useState(null),[R,U]=g.useState(!1),[W,I]=g.useState(1),[M,H]=g.useState("Overview"),[q,ae]=g.useState(""),[K,B]=g.useState(!1),X=Ui(e?.role),le=["ADMIN","CEO"].includes(X),ue=!t&&le,J=g.useMemo(()=>{const k=uj.filter(Z=>Ui(Z.value)!=="CEO");return[{label:"Filter by Roles",value:""},{label:"CEO",value:"CEO"},...k]},[]),ne=g.useCallback(k=>{k&&(r(Z=>Z.map(re=>re.id===k?{...re,highlight:!0}:re)),setTimeout(()=>{r(Z=>Z.map(re=>re.id===k?{...re,highlight:!1}:re))},2e3))},[]),pe=g.useCallback(async()=>{i(!0);try{const k=await oe.get("/users/all"),Z=Array.isArray(k.data)?k.data:[],re=A7(Z);r(re),h(be=>be&&(re.find(ee=>ee.id===be.id)||null)),console.log(k.data)}catch(k){console.error("Error fetching users:",k);const Z=k.response?.data?.detail||"Failed to load users. Please try again later.";Q.error(Z)}finally{i(!1)}},[]);g.useEffect(()=>{!t&&!le&&e&&Q.error("You are not authorized to access User Management.")},[le,t,e]),g.useEffect(()=>{t||!le||pe()},[t,le,pe]),g.useEffect(()=>{document.title="Users | Sari-Sari CRM"},[]);const we=g.useMemo(()=>{const k=o.trim().toLowerCase(),Z=Ui(c);return A7(n.filter(re=>{if(!re)return!1;const be=k===""||[re.first_name,re.last_name,`${re.first_name||""} ${re.last_name||""}`,re.email,NT(re.role)].filter(Boolean).some(ee=>ee.toString().toLowerCase().includes(k)),z=Z===""||Z==="CEO"&&["CEO","ADMIN"].includes(Ui(re.role))||Ui(re.role)===Z;return be&&z}))},[n,o,c]),ye=Math.max(1,Math.ceil(we.length/td)||1);g.useEffect(()=>{I(1)},[o,c]),g.useEffect(()=>{I(k=>{const Z=Math.max(1,Math.ceil(we.length/td)||1);return k>Z?Z:k})},[we.length]);const Te=g.useMemo(()=>{const k=(W-1)*td;return we.slice(k,k+td)},[we,W]);we.length===0||(W-1)*td+1,Math.min(W*td,we.length);const Ae=()=>I(k=>Math.max(k-1,1)),Pe=()=>I(k=>Math.min(k+1,ye)),$=()=>{S(Yh),x(!1),j(null),b(!0)},Ne=k=>{h(k),H("Overview"),ae(k?.is_active?"Active":"Inactive")},fe=k=>{k.target.id==="userModalBackdrop"&&!R&&O()},O=()=>{h(null)},ce=(k,Z)=>{S(re=>({...re,[k]:Z}))},de=()=>{const k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let Z="";for(let re=0;re<10;re+=1)Z+=k.charAt(Math.floor(Math.random()*k.length));ce("password",Z)},Ce=()=>{_||R||(b(!1),S(Yh),j(null),x(!1))},Ee=k=>{S({firstName:k.first_name||"",lastName:k.last_name||"",email:k.email||"",password:"",role:QPe(k.role)}),x(!0),j(k.id),b(!0),h(null)},Ge=k=>{T({title:"Delete User",message:a.jsxs("span",{children:["Are you sure you want to delete"," ",a.jsxs("span",{className:"font-semibold",children:[k.first_name," ",k.last_name]}),"? This action cannot be undone."]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:k.id,name:`${k.first_name||""} ${k.last_name||""}`.trim()||k.email||"user"}})},Je=k=>{k.preventDefault();const Z=C.firstName.trim(),re=C.lastName.trim(),be=C.email.trim(),z=C.password.trim(),ee=C.role,ie=!(v&&w);if(!Z||!be||!ee){Q.warn("Please fill in all required fields.");return}if(ie&&!z){Q.warn("Please fill in all required fields.");return}if(z&&z.length<8){Q.warn("Password should be at least 8 characters long.");return}const V={first_name:Z,last_name:re,email:be,role:ee};(ie||z)&&(V.password=z);const F=`${Z} ${re}`.trim(),se=ie?"create":"update";T({title:se==="create"?"Confirm New User":"Confirm User Update",message:se==="create"?a.jsxs("span",{children:["Create user ",a.jsx("span",{className:"font-semibold",children:F})," with role"," ",a.jsx("span",{className:"font-semibold",children:NT(ee)}),"?"]}):a.jsxs("span",{children:["Save changes for"," ",a.jsx("span",{className:"font-semibold",children:F||be}),"?"]}),confirmLabel:se==="create"?"Create User":"Update User",cancelLabel:"Cancel",variant:"primary",action:{type:se,payload:V,targetId:w,name:F||be}})},We=async()=>{if(!A?.action){T(null);return}const{action:k}=A,{type:Z,payload:re,targetId:be,name:z}=k;U(!0),(Z==="create"||Z==="update")&&E(!0);try{if(Z==="create"){const ie=(await oe.post("/users/createuser",re)).data;await pe(),ne(ie.id),Q.success(`User "${z}" created successfully.`),b(!1),S(Yh),j(null),x(!1)}else if(Z==="update"){if(!be)throw new Error("Missing user identifier for update.");const ie=(await oe.put(`/users/updateuser/${be}`,re)).data;await pe(),h(null),ne(ie.id),Q.success(`User "${z}" updated successfully.`),b(!1),S(Yh),j(null),x(!1)}else if(Z==="delete"){if(!be)throw new Error("Missing user identifier for deletion.");await oe.delete(`/users/deleteuser/${be}`),r(ee=>ee.map(ie=>ie.id===be?{...ie,is_active:!1}:ie)),m&&m.id===be&&(h(null),ae("")),Q.success(`User "${z}" deactivated successfully.`)}}catch(ee){console.error("User management error:",ee);const ie=Z==="create"?"Failed to create user. Please review the details and try again.":Z==="update"?"Failed to update user. Please review the details and try again.":"Failed to delete user. Please try again.",V=ee.response?.data?.detail||ie;Q.error(V)}finally{(Z==="create"||Z==="update")&&E(!1),U(!1),T(null)}},Ke=()=>{R||T(null)},He=async()=>{if(!m||!q)return;const k=m.is_active?"Active":"Inactive";if(q===k)return;const Z=q==="Active";B(!0);try{const be=(await oe.put(`/users/updateuser/${m.id}`,{is_active:Z})).data;r(z=>z.map(ee=>ee.id===be.id?be:ee)),h(null),ae(""),Q.success(`User status updated to ${q}`)}catch(re){console.error("Failed to update user status:",re);const be=re.response?.data?.detail||"Failed to update user status. Please try again.";Q.error(be)}finally{B(!1)}},Se=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[(s||t||!ue)&&a.jsx(yt,{}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(JT,{className:"mr-2 text-blue-600"}),"User Management"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{type:"button",onClick:$,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(Ln,{className:"mr-2"})," Add User"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search users",value:o,onChange:k=>l(k.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:c,onChange:k=>d(k.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:J.map(k=>a.jsx("option",{value:k.value,children:k.label},k.value))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Fullname"}),a.jsx("th",{className:"py-3 px-4",children:"Email"}),a.jsx("th",{className:"py-3 px-4",children:"Role"}),a.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),a.jsx("tbody",{children:s?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:3,children:"Loading users..."})}):we.length===0?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-400",colSpan:4,children:"No users found."})}):Te.map(k=>a.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${k.highlight?"bg-green-50":""} ${k.is_active?"":"opacity-60 bg-gray-50"}`,children:[a.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>Ne(k),children:a.jsxs("div",{className:"font-medium text-blue-600 hover:underline text-sm",children:[k.first_name," ",k.last_name]})}),a.jsx("td",{className:"py-3 px-4 cursor-pointer text-sm",onClick:()=>Ne(k),children:k.email}),a.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>Ne(k),children:n_(k.role)}),a.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>Ne(k),children:a.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-md ${k.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:k.is_active?"Active":"Inactive"})})]},k.id))})]})}),a.jsx(Et,{className:"mt-4",totalItems:we.length,pageSize:td,currentPage:W,onPrev:Ae,onNext:Pe,label:"users"})]}),Ve=m?a.jsx("div",{id:"userModalBackdrop",onClick:fe,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in p-4 sm:p-6 md:p-8 font-inter relative",children:[a.jsx("div",{className:"flex justify-end w-full",children:a.jsx("button",{onClick:O,className:"text-gray-500 hover:text-gray-700 transition mb-5 cursor-pointer",children:a.jsx(wn,{size:30})})}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7 mb-4 lg:mb-6 md:mb-4",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[m.profile_picture?a.jsx("img",{src:m.profile_picture,alt:`${m.first_name} ${m.last_name}`,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover border border-gray-200 shadow-sm"}):a.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-200 text-gray-700 flex items-center justify-center text-lg sm:text-xl font-semibold border border-gray-200 shadow-sm",children:XPe(m.first_name,m.last_name)}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[m.first_name," ",m.last_name]}),a.jsx("p",{className:"text-sm text-gray-500 break-all",children:m.email})]})]}),n_(m.role,{size:"md"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Ee(m),disabled:R,children:[a.jsx(pn,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>Ge(m),disabled:R,children:[a.jsx(jt,{className:"mr-2"}),"Delete"]})]})]}),a.jsx("div",{className:"border-b border-gray-200 mb-6"}),a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview"].map(k=>a.jsx("button",{onClick:()=>H(k),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${M===k?"bg-[#5c636d] text-white border-white":"text-white hover:bg-[#5c636d]"}`,children:k},k))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsx("div",{className:"lg:col-span-3",children:M==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:m.email||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Role:"}),a.jsx("p",{children:n_(m.role,{size:"sm"})})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Status:"}),a.jsx("p",{children:m.is_active?"Active":"Inactive"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Auth Provider:"}),a.jsx("p",{children:m.auth_provider?m.auth_provider.toString().replace(/\b\w/g,k=>k.toUpperCase()):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Phone Number:"}),a.jsx("p",{children:m.phone_number||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Company:"}),a.jsx("p",{children:m.company?.company_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Company Number:"}),a.jsx("p",{children:m.company?.company_number||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Related to CEO:"}),a.jsx("p",{children:m.manager?`${m.manager.first_name} ${m.manager.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:_7(m.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Login:"}),a.jsx("p",{children:m.last_login?_7(m.last_login):"Never"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Profile Picture:"}),a.jsx("p",{children:m.profile_picture?a.jsx("a",{href:m.profile_picture,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline break-all",children:"View image"}):"N/A"})]})]})})}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsx("div",{className:"flex flex-col gap-2 w-full",children:a.jsxs("button",{type:"button",onClick:()=>{if(!m.email){alert("No email address available");return}const k=encodeURIComponent(m.email),Z=encodeURIComponent(""),re=encodeURIComponent(""),be=`https://mail.google.com/mail/?view=cm&fs=1&to=${k}&su=${Z}&body=${re}`;window.open(be,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Tn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]})})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:q||(m.is_active?"Active":"Inactive"),onChange:k=>ae(k.target.value),children:[a.jsx("option",{value:"Active",children:"Active"}),a.jsx("option",{value:"Inactive",children:"Inactive"})]}),a.jsx("button",{onClick:He,disabled:K||q===(m.is_active?"Active":"Inactive"),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${K||q===(m.is_active?"Active":"Inactive")?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:K?"Updating...":"Update"})]})]})]})]})}):null;return a.jsxs(a.Fragment,{children:[Se,Ve,a.jsx(JPe,{open:p,isEditing:v,isSubmitting:_,confirmProcessing:R,formData:C,onClose:Ce,onSubmit:Je,onChange:ce,onGeneratePassword:de}),a.jsx(eDe,{open:!!A,title:A?.title,message:A?.message,confirmLabel:A?.confirmLabel,cancelLabel:A?.cancelLabel,variant:A?.variant,loading:R,onConfirm:We,onCancel:Ke})]})}function JPe({open:e,isEditing:t,isSubmitting:n,confirmProcessing:r,formData:s,onClose:i,onSubmit:o,onChange:l,onGeneratePassword:c}){if(!e)return null;const d=n||r;return a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-lg border border-gray-200 p-6 sm:p-8 relative overflow-y-auto max-h-[90vh]",children:[a.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:d,children:a.jsx(St,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-6 text-center",children:t?"Edit User":"Add New User"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:o,children:[a.jsx(Fy,{label:"First Name",value:s.firstName,onChange:m=>l("firstName",m),placeholder:"John",required:!0,disabled:d}),a.jsx(Fy,{label:"Last Name",value:s.lastName,onChange:m=>l("lastName",m),placeholder:"Doe",required:!0,disabled:d}),a.jsx(Fy,{label:"Email",type:"email",value:s.email,onChange:m=>l("email",m),placeholder:"john.doe@company.com",required:!0,disabled:d||t}),a.jsx(Fy,{label:"Role",type:"select",value:s.role,onChange:m=>l("role",m),options:[{value:"",label:"Select role"},...uj],required:!0,disabled:d}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Password"}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[a.jsx("input",{type:"text",value:s.password,onChange:m=>l("password",m.target.value),placeholder:t?"Leave blank to keep current password":"Enter or generate password",required:!t,disabled:d,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"}),a.jsx("button",{type:"button",onClick:c,className:"flex items-center justify-center px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-60",disabled:d,children:"Generate"})]}),t?a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Setting a password will reset the user's credentials; leave it blank to keep the current password."}):a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long."})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:i,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:d,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:d,children:n?"Saving...":t?"Update User":"Save User"})]})]})]})})}function Fy({label:e,type:t="text",value:n,onChange:r,placeholder:s,options:i=[],required:o=!1,disabled:l=!1}){return a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t==="select"?a.jsx("select",{value:n??"",onChange:c=>r(c.target.value),required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100",children:i.map(c=>a.jsx("option",{value:c.value,children:c.label},c.value))}):a.jsx("input",{type:t,value:n??"",onChange:c=>r(c.target.value),placeholder:s,required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"})]})}function eDe({open:e,title:t,message:n,confirmLabel:r,cancelLabel:s="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-black hover:bg-gray-800 border border-black";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("div",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:s}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":r})]})]})})}const tDe=(e,t)=>{const n=e?.trim()?.[0]??"",r=t?.trim()?.[0]??"";return`${n}${r}`.toUpperCase()||"U"};function nDe(){const{user:e,loading:t,fetchUser:n}=Ut(),[r,s]=g.useState(!1),[i,o]=g.useState(!1),[l,c]=g.useState(!1),[d,m]=g.useState(!1),[h,p]=g.useState(!1),[b,v]=g.useState(null),[x,w]=g.useState(null),j=g.useRef(null),[C,S]=g.useState({firstName:"",lastName:"",email:"",phoneNumber:""}),[_,E]=g.useState({currentPassword:"",newPassword:"",confirmPassword:""});g.useEffect(()=>{e&&(S({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),w(e.profile_picture||null))},[e]),g.useEffect(()=>{document.title="Manage Account | Sari-Sari CRM"},[]);const A=(I,M)=>{S(H=>({...H,[I]:M}))},T=(I,M)=>{E(H=>({...H,[I]:M}))},R=I=>{const M=I.target.files?.[0];if(!M)return;if(!M.type.startsWith("image/")){Q.error("Please select an image file");return}if(M.size>5*1024*1024){Q.error("Image size should be less than 5MB");return}const H=new FileReader;H.onloadend=()=>{v(H.result),w(H.result)},H.readAsDataURL(M)},U=async I=>{if(I.preventDefault(),!C.firstName.trim()||!C.lastName.trim()){Q.warn("Please fill in all required fields.");return}s(!0);try{const M={first_name:C.firstName.trim(),last_name:C.lastName.trim(),phone_number:C.phoneNumber.trim()||null};b!==null&&(M.profile_picture=b),await oe.put("/users/me",M),await n(),o(!1),v(null),window.dispatchEvent(new CustomEvent("userProfileUpdated")),Q.success("Account information updated successfully!")}catch(M){console.error("Error updating account:",M);const H=M.response?.data?.detail||"Failed to update account information. Please try again.";Q.error(H)}finally{s(!1)}},W=async I=>{if(I.preventDefault(),!_.newPassword||!_.confirmPassword){Q.warn("Please fill in all password fields.");return}if(_.newPassword.length<8){Q.warn("Password must be at least 8 characters long.");return}if(_.newPassword!==_.confirmPassword){Q.warn("New password and confirm password do not match.");return}p(!0);try{const M={password:_.newPassword};await oe.put("/users/me",M),await n(),E({currentPassword:"",newPassword:"",confirmPassword:""}),window.dispatchEvent(new CustomEvent("userProfileUpdated")),p(!1),Q.success("Password changed successfully!")}catch(M){console.error("Error changing password:",M);const H=M.response?.data?.detail||"Failed to change password. Please try again.";Q.error(H)}finally{p(!1)}};return a.jsxs("div",{className:"p-2 lg:p-8 font-inter relative",children:[(t||!e)&&a.jsx(yt,{}),e&&a.jsxs("div",{children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-gray-800 mb-2",children:"Manage Your Account"}),a.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Update your account information and change your password"})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mb-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2",children:[a.jsx(Qt,{className:"text-blue-600"}),"Profile Information"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:!i&&a.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition text-sm",children:[a.jsx(pn,{}),"Edit Profile"]})})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 mb-6 pb-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex-shrink-0 relative group",children:[x?a.jsx("div",{className:"relative",children:a.jsx("img",{src:x,alt:`${e.first_name} ${e.last_name}`,className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full object-cover border-2 border-gray-200 shadow-sm"})}):a.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 text-white flex items-center justify-center text-2xl sm:text-3xl font-semibold border-2 border-gray-200 shadow-sm",children:tDe(e.first_name,e.last_name)}),i&&a.jsxs("div",{className:"absolute bottom-0 right-0",children:[a.jsx("input",{type:"file",ref:j,accept:"image/*",onChange:R,className:"hidden",id:"profile-picture-upload"}),a.jsx("label",{htmlFor:"profile-picture-upload",className:"cursor-pointer bg-gray-900 text-white p-1.5 rounded-full shadow-lg hover:bg-gray-800 transition flex items-center justify-center border-2 border-white",title:"Change profile picture",children:a.jsx(V8,{size:14})})]})]}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[i?C.firstName:e.first_name," ",i?C.lastName:e.last_name]}),a.jsx("p",{className:"text-gray-600 text-sm",children:e.email}),a.jsx("span",{className:"inline-block mt-2 px-3 py-1 bg-blue-100 text-blue-700 text-xs font-semibold rounded-md",children:e.role})]})]}),i?a.jsxs("form",{onSubmit:U,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["First Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",value:C.firstName,onChange:I=>A("firstName",I.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Last Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",value:C.lastName,onChange:I=>A("lastName",I.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),a.jsxs("div",{className:"sm:col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Email"}),a.jsxs("div",{className:"relative",children:[a.jsx(Tn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"email",value:C.email,disabled:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-600 cursor-not-allowed outline-none",readOnly:!0})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),a.jsxs("div",{className:"sm:col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Phone Number"}),a.jsxs("div",{className:"relative",children:[a.jsx(pt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"tel",value:C.phoneNumber,onChange:I=>A("phoneNumber",I.target.value),placeholder:"+1 (555) 123-4567",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t border-gray-200",children:[a.jsx("button",{type:"button",onClick:()=>{o(!1),S({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),v(null),w(e.profile_picture||null),j.current&&(j.current.value="")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition",disabled:r,children:"Cancel"}),a.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:r,children:[a.jsx(Y8,{}),r?"Saving...":"Save Changes"]})]})]}):a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"First Name"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.first_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Name"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.last_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Email"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.email||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Phone Number"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.phone_number||"N/A"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[a.jsx(Hi,{className:"text-blue-600"}),"Change Password"]}),a.jsxs("form",{onSubmit:W,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["New Password ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Hi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",style:l?void 0:{WebkitTextSecurity:"disc"},value:_.newPassword,onChange:I=>T("newPassword",I.target.value),placeholder:"Enter new password (min. 8 characters)",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),a.jsx("button",{type:"button",onClick:()=>c(I=>!I),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":l?"Hide password":"Show password",children:l?a.jsx(Gd,{className:"size-5"}):a.jsx(Vd,{className:"size-5"})})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Confirm New Password ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Hi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",style:d?void 0:{WebkitTextSecurity:"disc"},value:_.confirmPassword,onChange:I=>T("confirmPassword",I.target.value),placeholder:"Confirm new password",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),a.jsx("button",{type:"button",onClick:()=>m(I=>!I),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":d?"Hide password":"Show password",children:d?a.jsx(Gd,{className:"size-5"}):a.jsx(Vd,{className:"size-5"})})]})]}),a.jsx("div",{className:"pt-4 border-t border-gray-200 flex justify-center lg:justify-start",children:a.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:h,children:[a.jsx(Hi,{}),h?"Changing Password...":"Change Password"]})})]})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mt-6",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[a.jsx(q8,{className:"text-blue-600"}),"Account Information"]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Role"}),a.jsx("span",{className:"inline-block px-3 py-1 bg-blue-100 text-blue-700 text-sm font-semibold rounded-md",children:e.role})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Status"}),a.jsx("span",{className:`inline-block px-3 py-1 text-sm font-semibold rounded-md ${e.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:e.is_active?"Active":"Inactive"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Company"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.company?.company_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Auth Provider"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.auth_provider?e.auth_provider.charAt(0).toUpperCase()+e.auth_provider.slice(1):"N/A"})]}),e.created_at&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Account Created"}),a.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),e.last_login&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Login"}),a.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.last_login).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})})]})]})]})]})]})}function SK({selectedDeal:e,onStatusUpdate:t,onClose:n}){const[r,s]=g.useState(e?.stage||""),[i,o]=g.useState(!1),l=rt(),c=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}];g.useEffect(()=>{e?.stage&&s(e.stage)},[e]);const d=async()=>{if(!e||!e.id){Q.error("No deal selected");return}if(!r||r===e.stage){Q.info("Please select a different stage");return}const m=e.id;o(!0);try{await oe.put(`/deals/admin/${m}`,{stage:r}),n&&n(),t&&setTimeout(async()=>{await t(!0)},100),setTimeout(()=>{Q.success("Deal status updated successfully")},300)}catch(h){console.error(h);const p=h.response?.data?.detail||"Failed to update deal status";Q.error(p)}finally{o(!1)}};return e?a.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>l("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Deal"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(pt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const m=encodeURIComponent(e.contact.email),h=encodeURIComponent(""),p=encodeURIComponent(""),b=`https://mail.google.com/mail/?view=cm&fs=1&to=${m}&su=${h}&body=${p}`;window.open(b,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Tn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>l("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Deal"}}}),children:[a.jsx(ft,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>l("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Deal"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(kn,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:r,onChange:m=>s(m.target.value),disabled:i,children:c.map(m=>a.jsx("option",{value:m.value,children:m.label},m.value))}),a.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:d,disabled:i||!r||r===e.stage,children:i?"Updating...":"Update"})]})]}):null}function Bx({selectedDeal:e,show:t,onClose:n,activeTab:r,setActiveTab:s,onEdit:i,onDelete:o,onStatusUpdate:l}){const c=rt(),[d]=gr(),m=d.get("id"),[h,p]=g.useState(e||null),[b,v]=g.useState(r||"Overview"),x=r!==void 0?r:b;if(g.useEffect(()=>{(async()=>{if(m&&!e)try{console.log("Fetching deal from route, ID:",m);const _=(await oe.get("/deals/admin/fetch-all")).data||[];console.log("All deals fetched:",_.length);const E=_.find(A=>A.id===parseInt(m));if(console.log("Found deal:",E),E){console.log("Deal data structure:",{id:E.id,name:E.name,amount:E.amount,stage:E.stage,account:E.account,contact:E.contact,assigned_deals:E.assigned_deals,deal_creator:E.deal_creator,allKeys:Object.keys(E)});const A={...E,amount:typeof E.amount=="number"?E.amount:parseFloat(E.amount||0),probability:E.probability||0};p(A)}else console.warn("Deal not found with ID:",m)}catch(S){console.error("Error fetching deal:",S)}})()},[m,e]),!h&&!m||m&&!h)return null;const w=C=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[C]||"bg-gray-100 text-gray-700";function j(C){return C?new Date(C).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:a.jsxs("div",{className:"flex items-start justify-between w-full",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),a.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:a.jsx("button",{onClick:()=>{n?n():c(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:a.jsx(St,{size:25})})})]})}),a.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:a.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[a.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:h.name}),a.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${w(h.stage)}`,children:h.stage})]}),a.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",j(h.created_at)]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-2",children:[a.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[" ",h.amount?h.amount.toLocaleString():"0"]}),a.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${h.probability}%`}})}),a.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",h.probability,"% Complete "]}),a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[a.jsxs("button",{type:"button",onClick:()=>{i&&i(h)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[a.jsx(pn,{className:"mr-1 sm:mr-2",size:16}),a.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),a.jsxs("button",{type:"button",onClick:()=>{o&&o(h)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[a.jsx(jt,{className:"mr-1 sm:mr-2",size:16}),a.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})]})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(C=>a.jsx("button",{onClick:()=>{s?s(C):v(C)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${x===C?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:C},C))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[x==="Overview"&&a.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),a.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[a.jsx("strong",{children:"Description:"})," ",h.description]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[a.jsx("strong",{children:"Expected Close Date:"})," ",h.close_date]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("div",{className:"mt-4 py-3 w-full",children:[a.jsxs("div",{className:"relative flex flex-col w-full",children:[a.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const C=(h?.stage||"PROSPECTING").toUpperCase(),_=(A=>A==="PROSPECTING"?0:A==="QUALIFICATION"?1:A==="PROPOSAL"?2:A==="NEGOTIATION"?3:A==="CLOSED_WON"||A==="CLOSED_LOST"?4:-1)(C);return[0,1,2,3,4].map(A=>_===A?"orange":_>A?"green":"gray").map((A,T)=>a.jsxs(nt.Fragment,{children:[a.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${A==="green"?"bg-green-500 border-green-500":A==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),T<4&&a.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},T))})()}),a.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((C,S)=>a.jsx("span",{className:"text-center flex-1 break-words",children:C},S))})]}),a.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:h.stage})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),a.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Account:"})," ",h.account?.name]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Primary Contact:"})," ",h.contact?.first_name," ",h.contact?.last_name]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Phone:"})," ",h.contact?.work_phone]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Email:"})," ",h.contact?.email]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Assigned To:"})," ",h.assigned_deals?.first_name," ",h.assigned_deals?.last_name]})]})]})]}),x==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:h.description||"No notes available."})]})]}),x==="Activities"&&a.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:pt,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:ft,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((C,S)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[a.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-gray-600 mt-1",children:a.jsx(C.icon,{size:24})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-gray-900 break-words",children:C.title}),a.jsx("p",{className:"text-sm text-gray-500 break-words",children:C.desc}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),a.jsx("p",{className:"text-sm text-gray-700 break-words",children:C.user})]})]})]}),a.jsx("p",{className:"text-sm text-gray-500 break-words",children:C.date})]},S))]}),x==="Edit"&&a.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[a.jsxs("label",{className:"block mb-3 break-words",children:[a.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),a.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:h.name})]}),a.jsxs("label",{className:"block mb-3 break-words",children:[a.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),a.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:h.description})]}),a.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),a.jsx("div",{className:"w-full lg:w-auto",children:a.jsx(SK,{selectedDeal:h,onStatusUpdate:l,onClose:n})})]})]})]})})}const Kh=10;function aDe(){g.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const[e,t]=g.useState(""),[n,r]=g.useState("Filter by Stage"),[s,i]=g.useState("Filter by Owner"),[o,l]=g.useState(null),[c,d]=g.useState("Overview"),[m,h]=g.useState(!1),[p,b]=g.useState(null),[v,x]=g.useState(!1),[w,j]=g.useState(1),[C,S]=g.useState(!1),[_,E]=g.useState(null),[A,T]=g.useState(!1),[R,U]=g.useState(!1),[W,I]=g.useState(null),[M,H]=g.useState([]),[q,ae]=g.useState([]),[K,B]=g.useState([]),[X,le]=g.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),ue={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST","Closed Cancelled Stage":"CLOSED_CANCELLED"},J=z=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost",CLOSED_CANCELLED:"Closed Cancelled"})[z]||z||"--",ne=z=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700",CLOSED_CANCELLED:"bg-red-100 text-red-700"})[z]||"bg-gray-100 text-gray-700",pe=g.useMemo(()=>{const z=e.trim().toLowerCase(),ee=n.trim(),ie=s.trim();return(p??[]).filter(V=>{const F=[V?.name,V?.description,V?.account?.name,V?.contact?.first_name,V?.contact?.last_name,V?.assigned_deals?.first_name,V?.assigned_deals?.last_name],se=z===""||F.some(Me=>Me==null||Me===""?!1:Me.toString().toLowerCase().includes(z)),xe=ee==="Filter by Stage"||ee===""||V.stage===ue[ee]||V.stage===ee,ge=ie==="Filter by Owner"||ie===""||`${V.assigned_deals?.first_name||""} ${V.assigned_deals?.last_name||""}`.trim().toLowerCase()===ie.toLowerCase();return se&&xe&&ge})},[p,e,n,s]),we=Math.max(1,Math.ceil(pe.length/Kh)||1);g.useEffect(()=>{j(1)},[e,n,s]),g.useEffect(()=>{j(z=>{const ee=Math.max(1,Math.ceil(pe.length/Kh)||1);return z>ee?ee:z})},[pe.length]);const ye=g.useMemo(()=>{const z=(w-1)*Kh;return pe.slice(z,z+Kh)},[pe,w]),Te=()=>j(z=>Math.max(z-1,1)),Ae=()=>j(z=>Math.min(z+1,we)),Pe=()=>{le({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),U(!1),I(null),h(!0)},$=async()=>{x(!0);try{const z=await oe.get("/deals/admin/fetch-all"),ie=[...Array.isArray(z.data)?z.data:[]].sort((V,F)=>{const se=V?.created_at?new Date(V.created_at).getTime():0;return(F?.created_at?new Date(F.created_at).getTime():0)-se});b(ie)}catch(z){z.response&&z.response.status===403?Q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):Q.error("Failed to fetch deals. Please try again later."),console.error(z)}finally{x(!1)}},Ne=async()=>{try{const z=await oe.get("/accounts/admin/fetch-all");H(Array.isArray(z.data)?z.data:[])}catch(z){console.error(z),z.response?.status===403&&Q.warn("Unable to load accounts (permission denied).")}},fe=async()=>{try{const z=await oe.get("/contacts/admin/fetch-all");ae(Array.isArray(z.data)?z.data:[])}catch(z){console.error(z),z.response?.status===403&&Q.warn("Unable to load contacts (permission denied).")}},O=async()=>{try{const z=await oe.get("/users/all");B(Array.isArray(z.data)?z.data:[])}catch(z){console.error(z),z.response?.status===403&&Q.warn("Unable to load users (permission denied).")}};g.useEffect(()=>{$(),Ne(),fe(),O()},[]);const ce=z=>{z&&(le({id:z.id||null,name:z.name||"",account_id:z.account_id?.toString()||"",primary_contact_id:z.primary_contact_id?.toString()||"",stage:z.stage||"PROPOSAL",amount:z.amount?.toString()||"",close_date:z.close_date?new Date(z.close_date).toISOString().split("T")[0]:"",assigned_to:z.assigned_to?.toString()||"",currency:z.currency||"PHP",description:z.description||""}),U(!0),I(z.id),l(null),h(!0))},de=async(z=!1)=>{try{const ee=await oe.get("/deals/admin/fetch-all"),V=[...Array.isArray(ee.data)?ee.data:[]].sort((F,se)=>{const xe=F?.created_at?new Date(F.created_at).getTime():0;return(se?.created_at?new Date(se.created_at).getTime():0)-xe});if(b(V),!z&&o&&o.id){const F=V.find(se=>se.id===o.id);F&&l({...F})}}catch(ee){console.error("Failed to refresh deal data:",ee),await $()}},Ce=z=>{const ee=z.name.trim();if(!ee){Q.error("Deal name is required.");return}if(!z.account_id){Q.error("Account is required.");return}const ie=R&&W?"update":"create",V=ee;E({title:ie==="create"?"Confirm New Deal":"Confirm Update",message:ie==="create"?a.jsxs("span",{children:["Are you sure you want to create"," ",a.jsx("span",{className:"font-semibold",children:V}),"?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:V}),"?"]}),confirmLabel:ie==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:ie,formData:z,targetId:W||null,name:V}})},Ee=z=>{if(!z)return;const ee=z.name||"this deal";E({title:"Delete Deal",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:ee}),"? This action cannot be undone."]}),confirmLabel:"Delete Deal",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:z.id,name:ee}})},Ge=async()=>{if(!_?.action){E(null);return}const{action:z}=_,{type:ee,formData:ie,targetId:V,name:F}=z;T(!0);try{if(ee==="create"){S(!0);const se={name:ie.name.trim(),account_id:parseInt(ie.account_id),primary_contact_id:ie.primary_contact_id?parseInt(ie.primary_contact_id):null,stage:ie.stage,amount:ie.amount?parseFloat(ie.amount):null,currency:ie.currency||"PHP",close_date:ie.close_date||null,description:ie.description||null,assigned_to:ie.assigned_to?parseInt(ie.assigned_to):null};await oe.post("/deals/admin/create",se),Q.success(`Deal "${F}" created successfully.`),h(!1),await $()}else if(ee==="update"){if(!V)throw new Error("Missing deal identifier for update.");S(!0);const se={};ie.name!==void 0&&(se.name=ie.name.trim()),ie.account_id!==void 0&&ie.account_id!==""&&(se.account_id=parseInt(ie.account_id)),ie.primary_contact_id!==void 0&&(se.primary_contact_id=ie.primary_contact_id?parseInt(ie.primary_contact_id):null),ie.stage!==void 0&&(se.stage=ie.stage),ie.amount!==void 0&&ie.amount!==""&&(se.amount=parseFloat(ie.amount)),ie.currency!==void 0&&(se.currency=ie.currency),ie.close_date!==void 0&&(se.close_date=ie.close_date||null),ie.description!==void 0&&(se.description=ie.description||null),ie.assigned_to!==void 0&&(se.assigned_to=ie.assigned_to?parseInt(ie.assigned_to):null),await oe.put(`/deals/admin/${V}`,se),Q.success(`Deal "${F}" updated successfully.`),h(!1),await $()}else if(ee==="delete"){if(!V)throw new Error("Missing deal identifier for deletion.");await oe.delete(`/deals/admin/${V}`),Q.success(`Deal "${F}" deleted successfully.`),o?.id===V&&l(null),await $()}}catch(se){console.error(se);const xe=ee==="create"?"Failed to create deal. Please review the details and try again.":ee==="update"?"Failed to update deal. Please review the details and try again.":"Failed to delete deal. Please try again.",ge=se.response?.data?.detail||xe;Q.error(ge)}finally{(ee==="create"||ee==="update")&&S(!1),T(!1),E(null)}},Je=()=>{A||E(null)},We=()=>{h(!1),le({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),U(!1),I(null),S(!1)},Ke=(p??[]).filter(z=>z.stage==="PROSPECTING").length,He=(p??[]).filter(z=>z.stage==="QUALIFICATION").length,Se=(p??[]).filter(z=>z.stage==="PROPOSAL").length,Ve=(p??[]).filter(z=>z.stage==="NEGOTIATION").length,k=(p??[]).filter(z=>z.stage==="CLOSED_WON").length,Z=(p??[]).filter(z=>z.stage==="CLOSED_LOST").length,re=(p??[]).filter(z=>z.stage==="CLOSED_CANCELLED").length,be=[{title:"Prospecting",value:Ke,icon:yw,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:He,icon:Rn,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:Se,icon:$n,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:Ve,icon:Wd,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:k,icon:Fn,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:Z,icon:hr,color:"text-red-600",bgColor:"bg-red-100"},{title:"Closed Cancelled",value:re,icon:hr,color:"text-gray-600",bgColor:"bg-gray-100"}];return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[v&&a.jsx(yt,{message:"Loading deals..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx($n,{className:"mr-2 text-blue-600"}),"Deals"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:Pe,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(Rt,{className:"mr-2"})," Add Deal"]})})]}),a.jsx("div",{className:"grid grid-cols-1 p-2 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden",children:be.map(z=>a.jsx(sDe,{...z},z.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search deals",value:e,onChange:z=>t(z.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[a.jsxs("select",{value:n,onChange:z=>r(z.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),a.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),a.jsx("option",{value:"Qualification Stage",children:"Qualification"}),a.jsx("option",{value:"Proposal Stage",children:"Proposal"}),a.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),a.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),a.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"}),a.jsx("option",{value:"Closed Cancelled Stage",children:"Closed Cancelled"})]}),a.jsxs("select",{value:s,onChange:z=>i(z.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((p??[]).map(z=>`${z.assigned_deals?.first_name} ${z.assigned_deals?.last_name}`))].map((z,ee)=>a.jsx("option",{value:z,children:z},ee))]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Stage"}),a.jsx("th",{className:"py-3 px-4",children:"Value"}),a.jsx("th",{className:"py-3 px-4",children:"Close Date"}),a.jsx("th",{className:"py-3 px-4",children:"Owner"})]})}),a.jsx("tbody",{children:pe.length>0?ye.map(z=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{l({...z})},children:[a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:z.deal_id?z.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:z.name}),a.jsx("div",{className:"text-gray-500 text-xs break-all",children:z.description||"--"})]})}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:z.account?.name||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:z.contact?.first_name&&z.contact?.last_name?`${z.contact.first_name} ${z.contact.last_name}`:z.contact?.first_name||z.contact?.last_name||"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ne(z.stage)}`,children:J(z.stage)})}),a.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",z.amount?.toLocaleString()||"0"]}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:z.close_date||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:z.assigned_deals?.first_name&&z.assigned_deals?.last_name?`${z.assigned_deals.first_name} ${z.assigned_deals.last_name}`:z.assigned_deals?.first_name||z.assigned_deals?.last_name||"--"})]},z.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No deals found."})})})]})}),a.jsx(Et,{className:"mt-4",totalItems:pe.length,pageSize:Kh,currentPage:w,onPrev:Te,onNext:Ae,label:"deals"}),m&&a.jsx(iDe,{onClose:We,formData:X,setFormData:le,isEditing:R,onSubmit:Ce,isSubmitting:C||A,accounts:M,contacts:q,users:K}),o&&a.jsx(Bx,{selectedDeal:o,show:!!o,onClose:()=>l(null),activeTab:c,setActiveTab:d,onEdit:ce,onDelete:Ee,onStatusUpdate:de}),_&&a.jsx(rDe,{open:!0,title:_.title,message:_.message,confirmLabel:_.confirmLabel,cancelLabel:_.cancelLabel,variant:_.variant,onConfirm:Ge,onCancel:Je,loading:A})]})}function rDe({open:e,title:t,message:n,confirmLabel:r,cancelLabel:s="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:s}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":r})]})]})})}function sDe({icon:e,title:t,value:n,color:r="text-blue-600",bgColor:s="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${s} ${r} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function iDe({onClose:e,formData:t,setFormData:n,isEditing:r=!1,onSubmit:s,isSubmitting:i=!1,accounts:o=[],contacts:l=[],users:c=[]}){const d=p=>{p.preventDefault(),s&&s(t)},m=p=>{p.target.id==="modalBackdrop"&&e()},h=g.useMemo(()=>{const p=String(t.account_id||"").trim(),b=Array.isArray(l)?l:[];return p?b.filter(v=>{const w=[v?.account_id,v?.accountId,v?.account?.id,v?.account?.account_id,v?.account?.accountId].find(j=>j!=null&&String(j).trim()!=="");return w?String(w)===p:!1}):b},[l,t.account_id]);return g.useEffect(()=>{const p=String(t.account_id||"").trim(),b=String(t.primary_contact_id||"").trim();if(!b||!p)return;h.some(x=>String(x?.id)===b)||n(x=>({...x,primary_contact_id:""}))},[t.account_id,t.primary_contact_id,h,n]),a.jsx("div",{id:"modalBackdrop",onClick:m,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:p=>p.stopPropagation(),children:[a.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(St,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:r?"Edit Deal":"Create Deal"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:d,children:[a.jsx(a_,{label:"Deal Name",name:"name",value:t.name,onChange:p=>n({...t,name:p.target.value}),placeholder:"Enter deal name",required:!0,disabled:i,className:"md:col-span-2"}),a.jsx(r_,{label:"Account",value:t.account_id||"",onChange:p=>n({...t,account_id:p}),items:o||[],getLabel:p=>p?.name??"",placeholder:"Search account...",disabled:i}),a.jsx(r_,{label:"Primary Contact",value:t.primary_contact_id||"",onChange:p=>n({...t,primary_contact_id:p}),items:h||[],getLabel:p=>`${p?.first_name??""} ${p?.last_name??""}`.trim()||p?.email||"",placeholder:"Search contact...",disabled:i}),a.jsx(E7,{label:"Stage",name:"stage",value:t.stage,onChange:p=>n({...t,stage:p.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}],disabled:i}),a.jsx(a_,{label:"Amount",name:"amount",type:"number",step:"0.01",value:t.amount,onChange:p=>n({...t,amount:p.target.value}),placeholder:"0",disabled:i}),a.jsx(E7,{label:"Currency",name:"currency",value:t.currency||"PHP",onChange:p=>n({...t,currency:p.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),a.jsx(a_,{label:"Close Date",name:"close_date",type:"date",value:t.close_date||"",onChange:p=>n({...t,close_date:p.target.value}),disabled:i}),a.jsx(r_,{label:"Assign To",value:t.assigned_to||"",onChange:p=>n({...t,assigned_to:p}),items:c||[],getLabel:p=>`${p?.first_name??""} ${p?.last_name??""}`.trim()||p?.email||"",placeholder:"Search assignee...",disabled:i,className:"md:col-span-2"}),a.jsx(lDe,{label:"Description",name:"description",value:t.description,onChange:p=>n({...t,description:p.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":r?"Update Deal":"Save Deal"})]})]})]})})}function a_({label:e,name:t,value:n,onChange:r,placeholder:s,type:i="text",required:o=!1,disabled:l=!1,className:c=""}){return a.jsxs("div",{className:c,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("input",{type:i,name:t,value:n??"",onChange:r,placeholder:s,required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]})}function E7({label:e,name:t,value:n,onChange:r,options:s,required:i=!1,disabled:o=!1,className:l=""}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:n??"",onChange:r,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:s.map(c=>a.jsx("option",{value:c.value,children:c.label},c.value))})]})}function r_({label:e,items:t=[],value:n="",onChange:r,getLabel:s,placeholder:i="Search...",disabled:o=!1,className:l=""}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx(oDe,{items:t,value:n??"",onChange:r,getLabel:s,placeholder:i,disabled:o})]})}function oDe({items:e=[],value:t="",onChange:n,getLabel:r,placeholder:s="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=g.useState(!1),[d,m]=g.useState(""),h=g.useRef(null),p=e.find(x=>String(x.id)===String(t)),b=p?r(p):"",v=g.useMemo(()=>{const x=d.trim().toLowerCase();return(x?e.filter(j=>(r(j)||"").toLowerCase().includes(x)):e).slice(0,o)},[e,d,r,o]);return g.useEffect(()=>{const x=w=>{h.current&&!h.current.contains(w.target)&&c(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]),g.useEffect(()=>{l||m("")},[l]),a.jsxs("div",{ref:h,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:l?d:b,placeholder:s,onFocus:()=>!i&&c(!0),onChange:x=>{m(x.target.value),l||c(!0)},className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:v.length>0?v.map(x=>{const w=String(x.id),j=r(x),C=String(t)===w;return a.jsx("button",{type:"button",onClick:()=>{n(w),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${C?"bg-blue-50":""}`,children:j||"--"},w)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function lDe({label:e,name:t,value:n,onChange:r,placeholder:s,required:i=!1,disabled:o=!1,className:l="",rows:c=3}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:r,placeholder:s,required:i,disabled:o,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}var cDe=Object.defineProperty,dDe=(e,t,n)=>t in e?cDe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,s_=(e,t,n)=>(dDe(e,typeof t!="symbol"?t+"":t,n),n);let uDe=class{constructor(){s_(this,"current",this.detect()),s_(this,"handoffState","pending"),s_(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Ki=new uDe;function Hx(e){var t;return Ki.isServer?null:e==null?document:(t=e?.ownerDocument)!=null?t:document}function jT(e){var t,n;return Ki.isServer?null:e==null?document:(n=(t=e?.getRootNode)==null?void 0:t.call(e))!=null?n:document}function _K(e){var t,n;return(n=(t=jT(e))==null?void 0:t.activeElement)!=null?n:null}function mDe(e){return _K(e)===e}function mj(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function jl(){let e=[],t={addEventListener(n,r,s,i){return n.addEventListener(r,s,i),t.add(()=>n.removeEventListener(r,s,i))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return t.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return mj(()=>{r.current&&n[0]()}),t.add(()=>{r.current=!1})},style(n,r,s){let i=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:s}),this.add(()=>{Object.assign(n.style,{[r]:i})})},group(n){let r=jl();return n(r),this.add(()=>r.dispose())},add(n){return e.includes(n)||e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let s of e.splice(r,1))s()}},dispose(){for(let n of e.splice(0))n()}};return t}function fj(){let[e]=g.useState(jl);return g.useEffect(()=>()=>e.dispose(),[e]),e}let Fr=(e,t)=>{Ki.isServer?g.useEffect(e,t):g.useLayoutEffect(e,t)};function wu(e){let t=g.useRef(e);return Fr(()=>{t.current=e},[e]),t}let vn=function(e){let t=wu(e);return nt.useCallback((...n)=>t.current(...n),[t])};function Gx(e){return g.useMemo(()=>e,Object.values(e))}let fDe=g.createContext(void 0);function hDe(){return g.useContext(fDe)}function CT(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function dl(e,t,...n){if(e in t){let s=t[e];return typeof s=="function"?s(...n):s}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(s=>`"${s}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,dl),r}var Yv=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Yv||{}),cc=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(cc||{});function ti(){let e=pDe();return g.useCallback(t=>gDe({mergeRefs:e,...t}),[e])}function gDe({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:s,visible:i=!0,name:o,mergeRefs:l}){l=l??xDe;let c=AK(t,e);if(i)return By(c,n,r,o,l);let d=s??0;if(d&2){let{static:m=!1,...h}=c;if(m)return By(h,n,r,o,l)}if(d&1){let{unmount:m=!0,...h}=c;return dl(m?0:1,{0(){return null},1(){return By({...h,hidden:!0,style:{display:"none"}},n,r,o,l)}})}return By(c,n,r,o,l)}function By(e,t={},n,r,s){let{as:i=n,children:o,refName:l="ref",...c}=i_(e,["unmount","static"]),d=e.ref!==void 0?{[l]:e.ref}:{},m=typeof o=="function"?o(t):o;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(t)),c["aria-labelledby"]&&c["aria-labelledby"]===c.id&&(c["aria-labelledby"]=void 0);let h={};if(t){let p=!1,b=[];for(let[v,x]of Object.entries(t))typeof x=="boolean"&&(p=!0),x===!0&&b.push(v.replace(/([A-Z])/g,w=>`-${w.toLowerCase()}`));if(p){h["data-headlessui-state"]=b.join(" ");for(let v of b)h[`data-${v}`]=""}}if(Vg(i)&&(Object.keys(yd(c)).length>0||Object.keys(yd(h)).length>0))if(!g.isValidElement(m)||Array.isArray(m)&&m.length>1||bDe(m)){if(Object.keys(yd(c)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(yd(c)).concat(Object.keys(yd(h))).map(p=>`  - ${p}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(p=>`  - ${p}`).join(`
`)].join(`
`))}else{let p=m.props,b=p?.className,v=typeof b=="function"?(...j)=>CT(b(...j),c.className):CT(b,c.className),x=v?{className:v}:{},w=AK(m.props,yd(i_(c,["ref"])));for(let j in h)j in w&&delete h[j];return g.cloneElement(m,Object.assign({},w,h,d,{ref:s(yDe(m),d.ref)},x))}return g.createElement(i,Object.assign({},i_(c,["ref"]),!Vg(i)&&d,!Vg(i)&&h),m)}function pDe(){let e=g.useRef([]),t=g.useCallback(n=>{for(let r of e.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return e.current=n,t}}function xDe(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function AK(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let s in r)s.startsWith("on")&&typeof r[s]=="function"?(n[s]!=null||(n[s]=[]),n[s].push(r[s])):t[s]=r[s];if(t.disabled||t["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[s=>{var i;return(i=s?.preventDefault)==null?void 0:i.call(s)}]);for(let r in n)Object.assign(t,{[r](s,...i){let o=n[r];for(let l of o){if((s instanceof Event||s?.nativeEvent instanceof Event)&&s.defaultPrevented)return;l(s,...i)}}});return t}function Kr(e){var t;return Object.assign(g.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function yd(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function i_(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function yDe(e){return nt.version.split(".")[0]>="19"?e.props.ref:e.ref}function Vg(e){return e===g.Fragment||e===Symbol.for("react.fragment")}function bDe(e){return Vg(e.type)}let vDe="span";var Kv=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Kv||{});function wDe(e,t){var n;let{features:r=1,...s}=e,i={ref:t,"aria-hidden":(r&2)===2?!0:(n=s["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return ti()({ourProps:i,theirProps:s,slot:{},defaultTag:vDe,name:"Hidden"})}let ST=Kr(wDe);function NDe(e){return typeof e!="object"||e===null?!1:"nodeType"in e}function gc(e){return NDe(e)&&"tagName"in e}function ou(e){return gc(e)&&"accessKey"in e}function dc(e){return gc(e)&&"tabIndex"in e}function jDe(e){return gc(e)&&"style"in e}function CDe(e){return ou(e)&&e.nodeName==="IFRAME"}function SDe(e){return ou(e)&&e.nodeName==="INPUT"}let EK=Symbol();function _De(e,t=!0){return Object.assign(e,{[EK]:t})}function oo(...e){let t=g.useRef(e);g.useEffect(()=>{t.current=e},[e]);let n=vn(r=>{for(let s of t.current)s!=null&&(typeof s=="function"?s(r):s.current=r)});return e.every(r=>r==null||r?.[EK])?void 0:n}let sP=g.createContext(null);sP.displayName="DescriptionContext";function TK(){let e=g.useContext(sP);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,TK),t}return e}function ADe(){let[e,t]=g.useState([]);return[e.length>0?e.join(" "):void 0,g.useMemo(()=>function(n){let r=vn(i=>(t(o=>[...o,i]),()=>t(o=>{let l=o.slice(),c=l.indexOf(i);return c!==-1&&l.splice(c,1),l}))),s=g.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return nt.createElement(sP.Provider,{value:s},n.children)},[t])]}let EDe="p";function TDe(e,t){let n=g.useId(),r=hDe(),{id:s=`headlessui-description-${n}`,...i}=e,o=TK(),l=oo(t);Fr(()=>o.register(s),[s,o.register]);let c=Gx({...o.slot,disabled:r||!1}),d={ref:l,...o.props,id:s};return ti()({ourProps:d,theirProps:i,slot:c,defaultTag:EDe,name:o.name||"Description"})}let LDe=Kr(TDe),kDe=Object.assign(LDe,{});var LK=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(LK||{});let PDe=g.createContext(()=>{});function DDe({value:e,children:t}){return nt.createElement(PDe.Provider,{value:e},t)}let kK=class extends Map{constructor(t){super(),this.factory=t}get(t){let n=super.get(t);return n===void 0&&(n=this.factory(t),this.set(t,n)),n}};var ODe=Object.defineProperty,MDe=(e,t,n)=>t in e?ODe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,IDe=(e,t,n)=>(MDe(e,t+"",n),n),PK=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Ps=(e,t,n)=>(PK(e,t,"read from private field"),n?n.call(e):t.get(e)),o_=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},T7=(e,t,n,r)=>(PK(e,t,"write to private field"),t.set(e,n),n),Oi,Mg,Ig;let $De=class{constructor(t){o_(this,Oi,{}),o_(this,Mg,new kK(()=>new Set)),o_(this,Ig,new Set),IDe(this,"disposables",jl()),T7(this,Oi,t),Ki.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return Ps(this,Oi)}subscribe(t,n){if(Ki.isServer)return()=>{};let r={selector:t,callback:n,current:t(Ps(this,Oi))};return Ps(this,Ig).add(r),this.disposables.add(()=>{Ps(this,Ig).delete(r)})}on(t,n){return Ki.isServer?()=>{}:(Ps(this,Mg).get(t).add(n),this.disposables.add(()=>{Ps(this,Mg).get(t).delete(n)}))}send(t){let n=this.reduce(Ps(this,Oi),t);if(n!==Ps(this,Oi)){T7(this,Oi,n);for(let r of Ps(this,Ig)){let s=r.selector(Ps(this,Oi));DK(r.current,s)||(r.current=s,r.callback(s))}for(let r of Ps(this,Mg).get(t.type))r(Ps(this,Oi),t)}}};Oi=new WeakMap,Mg=new WeakMap,Ig=new WeakMap;function DK(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:Array.isArray(e)&&Array.isArray(t)?e.length!==t.length?!1:l_(e[Symbol.iterator](),t[Symbol.iterator]()):e instanceof Map&&t instanceof Map||e instanceof Set&&t instanceof Set?e.size!==t.size?!1:l_(e.entries(),t.entries()):L7(e)&&L7(t)?l_(Object.entries(e)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()):!1}function l_(e,t){do{let n=e.next(),r=t.next();if(n.done&&r.done)return!0;if(n.done||r.done||!Object.is(n.value,r.value))return!1}while(!0)}function L7(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||Object.getPrototypeOf(t)===null}var RDe=Object.defineProperty,zDe=(e,t,n)=>t in e?RDe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,k7=(e,t,n)=>(zDe(e,typeof t!="symbol"?t+"":t,n),n),UDe=(e=>(e[e.Push=0]="Push",e[e.Pop=1]="Pop",e))(UDe||{});let FDe={0(e,t){let n=t.id,r=e.stack,s=e.stack.indexOf(n);if(s!==-1){let i=e.stack.slice();return i.splice(s,1),i.push(n),r=i,{...e,stack:r}}return{...e,stack:[...e.stack,n]}},1(e,t){let n=t.id,r=e.stack.indexOf(n);if(r===-1)return e;let s=e.stack.slice();return s.splice(r,1),{...e,stack:s}}},BDe=class OK extends $De{constructor(){super(...arguments),k7(this,"actions",{push:t=>this.send({type:0,id:t}),pop:t=>this.send({type:1,id:t})}),k7(this,"selectors",{isTop:(t,n)=>t.stack[t.stack.length-1]===n,inStack:(t,n)=>t.stack.includes(n)})}static new(){return new OK({stack:[]})}reduce(t,n){return dl(n.type,FDe,t,n)}};const MK=new kK(()=>BDe.new());function IK(e,t,n=DK){return ike.useSyncExternalStoreWithSelector(vn(r=>e.subscribe(HDe,r)),vn(()=>e.state),vn(()=>e.state),vn(t),n)}function HDe(e){return e}function Vx(e,t){let n=g.useId(),r=MK.get(t),[s,i]=IK(r,g.useCallback(o=>[r.selectors.isTop(o,n),r.selectors.inStack(o,n)],[r,n]));return Fr(()=>{if(e)return r.actions.push(n),()=>r.actions.pop(n)},[r,e,n]),e?i?s:!0:!1}let _T=new Map,Wg=new Map;function P7(e){var t;let n=(t=Wg.get(e))!=null?t:0;return Wg.set(e,n+1),n!==0?()=>D7(e):(_T.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>D7(e))}function D7(e){var t;let n=(t=Wg.get(e))!=null?t:1;if(n===1?Wg.delete(e):Wg.set(e,n-1),n!==1)return;let r=_T.get(e);r&&(r["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r["aria-hidden"]),e.inert=r.inert,_T.delete(e))}function GDe(e,{allowed:t,disallowed:n}={}){let r=Vx(e,"inert-others");Fr(()=>{var s,i;if(!r)return;let o=jl();for(let c of(s=n?.())!=null?s:[])c&&o.add(P7(c));let l=(i=t?.())!=null?i:[];for(let c of l){if(!c)continue;let d=Hx(c);if(!d)continue;let m=c.parentElement;for(;m&&m!==d.body;){for(let h of m.children)l.some(p=>h.contains(p))||o.add(P7(h));m=m.parentElement}}return o.dispose},[r,t,n])}function VDe(e,t,n){let r=wu(s=>{let i=s.getBoundingClientRect();i.x===0&&i.y===0&&i.width===0&&i.height===0&&n()});g.useEffect(()=>{if(!e)return;let s=t===null?null:ou(t)?t:t.current;if(!s)return;let i=jl();if(typeof ResizeObserver<"u"){let o=new ResizeObserver(()=>r.current(s));o.observe(s),i.add(()=>o.disconnect())}if(typeof IntersectionObserver<"u"){let o=new IntersectionObserver(()=>r.current(s));o.observe(s),i.add(()=>o.disconnect())}return()=>i.dispose()},[t,r,e])}let Qv=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","details>summary","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),WDe=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var Bo=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(Bo||{}),AT=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(AT||{}),qDe=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(qDe||{});function YDe(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Qv)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function KDe(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(WDe)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var $K=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))($K||{});function QDe(e,t=0){var n;return e===((n=Hx(e))==null?void 0:n.body)?!1:dl(t,{0(){return e.matches(Qv)},1(){let r=e;for(;r!==null;){if(r.matches(Qv))return!0;r=r.parentElement}return!1}})}var XDe=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(XDe||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Ko(e){e?.focus({preventScroll:!0})}let ZDe=["textarea","input"].join(",");function JDe(e){var t,n;return(n=(t=e?.matches)==null?void 0:t.call(e,ZDe))!=null?n:!1}function eOe(e,t=n=>n){return e.slice().sort((n,r)=>{let s=t(n),i=t(r);if(s===null||i===null)return 0;let o=s.compareDocumentPosition(i);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function qg(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:s=[]}={}){let i=Array.isArray(e)?e.length>0?jT(e[0]):document:jT(e),o=Array.isArray(e)?n?eOe(e):e:t&64?KDe(e):YDe(e);s.length>0&&o.length>1&&(o=o.filter(b=>!s.some(v=>v!=null&&"current"in v?v?.current===b:v===b))),r=r??i?.activeElement;let l=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,o.indexOf(r))-1;if(t&4)return Math.max(0,o.indexOf(r))+1;if(t&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=t&32?{preventScroll:!0}:{},m=0,h=o.length,p;do{if(m>=h||m+h<=0)return 0;let b=c+m;if(t&16)b=(b+h)%h;else{if(b<0)return 3;if(b>=h)return 1}p=o[b],p?.focus(d),m+=l}while(p!==_K(p));return t&6&&JDe(p)&&p.select(),2}function RK(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function tOe(){return/Android/gi.test(window.navigator.userAgent)}function O7(){return RK()||tOe()}function Hy(e,t,n,r){let s=wu(n);g.useEffect(()=>{if(!e)return;function i(o){s.current(o)}return document.addEventListener(t,i,r),()=>document.removeEventListener(t,i,r)},[e,t,r])}function zK(e,t,n,r){let s=wu(n);g.useEffect(()=>{if(!e)return;function i(o){s.current(o)}return window.addEventListener(t,i,r),()=>window.removeEventListener(t,i,r)},[e,t,r])}const M7=30;function nOe(e,t,n){let r=wu(n),s=g.useCallback(function(l,c){if(l.defaultPrevented)return;let d=c(l);if(d===null||!d.getRootNode().contains(d)||!d.isConnected)return;let m=(function h(p){return typeof p=="function"?h(p()):Array.isArray(p)||p instanceof Set?p:[p]})(t);for(let h of m)if(h!==null&&(h.contains(d)||l.composed&&l.composedPath().includes(h)))return;return!QDe(d,$K.Loose)&&d.tabIndex!==-1&&l.preventDefault(),r.current(l,d)},[r,t]),i=g.useRef(null);Hy(e,"pointerdown",l=>{var c,d;O7()||(i.current=((d=(c=l.composedPath)==null?void 0:c.call(l))==null?void 0:d[0])||l.target)},!0),Hy(e,"pointerup",l=>{if(O7()||!i.current)return;let c=i.current;return i.current=null,s(l,()=>c)},!0);let o=g.useRef({x:0,y:0});Hy(e,"touchstart",l=>{o.current.x=l.touches[0].clientX,o.current.y=l.touches[0].clientY},!0),Hy(e,"touchend",l=>{let c={x:l.changedTouches[0].clientX,y:l.changedTouches[0].clientY};if(!(Math.abs(c.x-o.current.x)>=M7||Math.abs(c.y-o.current.y)>=M7))return s(l,()=>dc(l.target)?l.target:null)},!0),zK(e,"blur",l=>s(l,()=>CDe(window.document.activeElement)?window.document.activeElement:null),!0)}function iP(...e){return g.useMemo(()=>Hx(...e),[...e])}function UK(e,t,n,r){let s=wu(n);g.useEffect(()=>{e=e??window;function i(o){s.current(o)}return e.addEventListener(t,i,r),()=>e.removeEventListener(t,i,r)},[e,t,r])}function aOe(e){return g.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}function rOe(e,t){let n=e(),r=new Set;return{getSnapshot(){return n},subscribe(s){return r.add(s),()=>r.delete(s)},dispatch(s,...i){let o=t[s].call(n,...i);o&&(n=o,r.forEach(l=>l()))}}}function sOe(){let e;return{before({doc:t}){var n;let r=t.documentElement,s=(n=t.defaultView)!=null?n:window;e=Math.max(0,s.innerWidth-r.clientWidth)},after({doc:t,d:n}){let r=t.documentElement,s=Math.max(0,r.clientWidth-r.offsetWidth),i=Math.max(0,e-s);n.style(r,"paddingRight",`${i}px`)}}}function iOe(){return RK()?{before({doc:e,d:t,meta:n}){function r(s){for(let i of n().containers)for(let o of i())if(o.contains(s))return!0;return!1}t.microTask(()=>{var s;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let l=jl();l.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>l.dispose()))}let i=(s=window.scrollY)!=null?s:window.pageYOffset,o=null;t.addEventListener(e,"click",l=>{if(dc(l.target))try{let c=l.target.closest("a");if(!c)return;let{hash:d}=new URL(c.href),m=e.querySelector(d);dc(m)&&!r(m)&&(o=m)}catch{}},!0),t.group(l=>{t.addEventListener(e,"touchstart",c=>{if(l.dispose(),dc(c.target)&&jDe(c.target))if(r(c.target)){let d=c.target;for(;d.parentElement&&r(d.parentElement);)d=d.parentElement;l.style(d,"overscrollBehavior","contain")}else l.style(c.target,"touchAction","none")})}),t.addEventListener(e,"touchmove",l=>{if(dc(l.target)){if(SDe(l.target))return;if(r(l.target)){let c=l.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&l.preventDefault()}else l.preventDefault()}},{passive:!1}),t.add(()=>{var l;let c=(l=window.scrollY)!=null?l:window.pageYOffset;i!==c&&window.scrollTo(0,i),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function oOe(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function I7(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let Ld=rOe(()=>new Map,{PUSH(e,t){var n;let r=(n=this.get(e))!=null?n:{doc:e,count:0,d:jl(),meta:new Set,computedMeta:{}};return r.count++,r.meta.add(t),r.computedMeta=I7(r.meta),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t),n.computedMeta=I7(n.meta)),this},SCROLL_PREVENT(e){let t={doc:e.doc,d:e.d,meta(){return e.computedMeta}},n=[iOe(),sOe(),oOe()];n.forEach(({before:r})=>r?.(t)),n.forEach(({after:r})=>r?.(t))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});Ld.subscribe(()=>{let e=Ld.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let r=t.get(n.doc)==="hidden",s=n.count!==0;(s&&!r||!s&&r)&&Ld.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&Ld.dispatch("TEARDOWN",n)}});function lOe(e,t,n=()=>({containers:[]})){let r=aOe(Ld),s=t?r.get(t):void 0,i=s?s.count>0:!1;return Fr(()=>{if(!(!t||!e))return Ld.dispatch("PUSH",t,n),()=>Ld.dispatch("POP",t,n)},[e,t]),i}function cOe(e,t,n=()=>[document.body]){let r=Vx(e,"scroll-lock");lOe(r,t,s=>{var i;return{containers:[...(i=s.containers)!=null?i:[],n]}})}function dOe(e=0){let[t,n]=g.useState(e),r=g.useCallback(c=>n(c),[]),s=g.useCallback(c=>n(d=>d|c),[]),i=g.useCallback(c=>(t&c)===c,[t]),o=g.useCallback(c=>n(d=>d&~c),[]),l=g.useCallback(c=>n(d=>d^c),[]);return{flags:t,setFlag:r,addFlag:s,hasFlag:i,removeFlag:o,toggleFlag:l}}var uOe={},$7,R7;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&(($7=process==null?void 0:uOe)==null?void 0:$7.NODE_ENV)==="test"&&typeof((R7=Element?.prototype)==null?void 0:R7.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var mOe=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(mOe||{});function fOe(e){let t={};for(let n in e)e[n]===!0&&(t[`data-${n}`]="");return t}function hOe(e,t,n,r){let[s,i]=g.useState(n),{hasFlag:o,addFlag:l,removeFlag:c}=dOe(e&&s?3:0),d=g.useRef(!1),m=g.useRef(!1),h=fj();return Fr(()=>{var p;if(e){if(n&&i(!0),!t){n&&l(3);return}return(p=r?.start)==null||p.call(r,n),gOe(t,{inFlight:d,prepare(){m.current?m.current=!1:m.current=d.current,d.current=!0,!m.current&&(n?(l(3),c(4)):(l(4),c(2)))},run(){m.current?n?(c(3),l(4)):(c(4),l(3)):n?c(1):l(1)},done(){var b;m.current&&yOe(t)||(d.current=!1,c(7),n||i(!1),(b=r?.end)==null||b.call(r,n))}})}},[e,n,t,h]),e?[s,{closed:o(1),enter:o(2),leave:o(4),transition:o(2)||o(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function gOe(e,{prepare:t,run:n,done:r,inFlight:s}){let i=jl();return xOe(e,{prepare:t,inFlight:s}),i.nextFrame(()=>{n(),i.requestAnimationFrame(()=>{i.add(pOe(e,r))})}),i.dispose}function pOe(e,t){var n,r;let s=jl();if(!e)return s.dispose;let i=!1;s.add(()=>{i=!0});let o=(r=(n=e.getAnimations)==null?void 0:n.call(e).filter(l=>l instanceof CSSTransition))!=null?r:[];return o.length===0?(t(),s.dispose):(Promise.allSettled(o.map(l=>l.finished)).then(()=>{i||t()}),s.dispose)}function xOe(e,{inFlight:t,prepare:n}){if(t!=null&&t.current){n();return}let r=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=r}function yOe(e){var t,n;return((n=(t=e.getAnimations)==null?void 0:t.call(e))!=null?n:[]).some(r=>r instanceof CSSTransition&&r.playState!=="finished")}function oP(e,t){let n=g.useRef([]),r=vn(e);g.useEffect(()=>{let s=[...n.current];for(let[i,o]of t.entries())if(n.current[i]!==o){let l=r(t,s);return n.current=t,l}},[r,...t])}let hj=g.createContext(null);hj.displayName="OpenClosedContext";var hi=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(hi||{});function gj(){return g.useContext(hj)}function bOe({value:e,children:t}){return nt.createElement(hj.Provider,{value:e},t)}function vOe({children:e}){return nt.createElement(hj.Provider,{value:null},e)}function wOe(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let sc=[];wOe(()=>{function e(t){if(!dc(t.target)||t.target===document.body||sc[0]===t.target)return;let n=t.target;n=n.closest(Qv),sc.unshift(n??t.target),sc=sc.filter(r=>r!=null&&r.isConnected),sc.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function FK(e){let t=vn(e),n=g.useRef(!1);g.useEffect(()=>(n.current=!1,()=>{n.current=!0,mj(()=>{n.current&&t()})}),[t])}let BK=g.createContext(!1);function NOe(){return g.useContext(BK)}function z7(e){return nt.createElement(BK.Provider,{value:e.force},e.children)}function jOe(e){let t=NOe(),n=g.useContext(GK),[r,s]=g.useState(()=>{var i;if(!t&&n!==null)return(i=n.current)!=null?i:null;if(Ki.isServer)return null;let o=e?.getElementById("headlessui-portal-root");if(o)return o;if(e===null)return null;let l=e.createElement("div");return l.setAttribute("id","headlessui-portal-root"),e.body.appendChild(l)});return g.useEffect(()=>{r!==null&&(e!=null&&e.body.contains(r)||e==null||e.body.appendChild(r))},[r,e]),g.useEffect(()=>{t||n!==null&&s(n.current)},[n,s,t]),r}let HK=g.Fragment,COe=Kr(function(e,t){let{ownerDocument:n=null,...r}=e,s=g.useRef(null),i=oo(_De(p=>{s.current=p}),t),o=iP(s.current),l=n??o,c=jOe(l),d=g.useContext(ET),m=fj(),h=ti();return FK(()=>{var p;c&&c.childNodes.length<=0&&((p=c.parentElement)==null||p.removeChild(c))}),c?Rp.createPortal(nt.createElement("div",{"data-headlessui-portal":"",ref:p=>{m.dispose(),d&&p&&m.add(d.register(p))}},h({ourProps:{ref:i},theirProps:r,slot:{},defaultTag:HK,name:"Portal"})),c):null});function SOe(e,t){let n=oo(t),{enabled:r=!0,ownerDocument:s,...i}=e,o=ti();return r?nt.createElement(COe,{...i,ownerDocument:s,ref:n}):o({ourProps:{ref:n},theirProps:i,slot:{},defaultTag:HK,name:"Portal"})}let _Oe=g.Fragment,GK=g.createContext(null);function AOe(e,t){let{target:n,...r}=e,s={ref:oo(t)},i=ti();return nt.createElement(GK.Provider,{value:n},i({ourProps:s,theirProps:r,defaultTag:_Oe,name:"Popover.Group"}))}let ET=g.createContext(null);function EOe(){let e=g.useContext(ET),t=g.useRef([]),n=vn(i=>(t.current.push(i),e&&e.register(i),()=>r(i))),r=vn(i=>{let o=t.current.indexOf(i);o!==-1&&t.current.splice(o,1),e&&e.unregister(i)}),s=g.useMemo(()=>({register:n,unregister:r,portals:t}),[n,r,t]);return[t,g.useMemo(()=>function({children:i}){return nt.createElement(ET.Provider,{value:s},i)},[s])]}let TOe=Kr(SOe),VK=Kr(AOe),LOe=Object.assign(TOe,{Group:VK});function kOe(e,t=typeof document<"u"?document.defaultView:null,n){let r=Vx(e,"escape");UK(t,"keydown",s=>{r&&(s.defaultPrevented||s.key===LK.Escape&&n(s))})}function POe(){var e;let[t]=g.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,r]=g.useState((e=t?.matches)!=null?e:!1);return Fr(()=>{if(!t)return;function s(i){r(i.matches)}return t.addEventListener("change",s),()=>t.removeEventListener("change",s)},[t]),n}function DOe({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let r=vn(()=>{var s,i;let o=Hx(n),l=[];for(let c of e)c!==null&&(gc(c)?l.push(c):"current"in c&&gc(c.current)&&l.push(c.current));if(t!=null&&t.current)for(let c of t.current)l.push(c);for(let c of(s=o?.querySelectorAll("html > *, body > *"))!=null?s:[])c!==document.body&&c!==document.head&&gc(c)&&c.id!=="headlessui-portal-root"&&(n&&(c.contains(n)||c.contains((i=n?.getRootNode())==null?void 0:i.host))||l.some(d=>c.contains(d))||l.push(c));return l});return{resolveContainers:r,contains:vn(s=>r().some(i=>i.contains(s)))}}let WK=g.createContext(null);function U7({children:e,node:t}){let[n,r]=g.useState(null),s=qK(t??n);return nt.createElement(WK.Provider,{value:s},e,s===null&&nt.createElement(ST,{features:Kv.Hidden,ref:i=>{var o,l;if(i){for(let c of(l=(o=Hx(i))==null?void 0:o.querySelectorAll("html > *, body > *"))!=null?l:[])if(c!==document.body&&c!==document.head&&gc(c)&&c!=null&&c.contains(i)){r(c);break}}}}))}function qK(e=null){var t;return(t=g.useContext(WK))!=null?t:e}function OOe(){let e=typeof document>"u";return"useSyncExternalStore"in Fd?(t=>t.useSyncExternalStore)(Fd)(()=>()=>{},()=>!1,()=>!e):!1}function pj(){let e=OOe(),[t,n]=g.useState(Ki.isHandoffComplete);return t&&Ki.isHandoffComplete===!1&&n(!1),g.useEffect(()=>{t!==!0&&n(!0)},[t]),g.useEffect(()=>Ki.handoff(),[]),e?!1:t}function lP(){let e=g.useRef(!1);return Fr(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var $g=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))($g||{});function MOe(){let e=g.useRef(0);return zK(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function YK(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)gc(n.current)&&t.add(n.current);return t}let IOe="div";var Nd=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(Nd||{});function $Oe(e,t){let n=g.useRef(null),r=oo(n,t),{initialFocus:s,initialFocusFallback:i,containers:o,features:l=15,...c}=e;pj()||(l=0);let d=iP(n.current);FOe(l,{ownerDocument:d});let m=BOe(l,{ownerDocument:d,container:n,initialFocus:s,initialFocusFallback:i});HOe(l,{ownerDocument:d,container:n,containers:o,previousActiveElement:m});let h=MOe(),p=vn(C=>{if(!ou(n.current))return;let S=n.current;(_=>_())(()=>{dl(h.current,{[$g.Forwards]:()=>{qg(S,Bo.First,{skipElements:[C.relatedTarget,i]})},[$g.Backwards]:()=>{qg(S,Bo.Last,{skipElements:[C.relatedTarget,i]})}})})}),b=Vx(!!(l&2),"focus-trap#tab-lock"),v=fj(),x=g.useRef(!1),w={ref:r,onKeyDown(C){C.key=="Tab"&&(x.current=!0,v.requestAnimationFrame(()=>{x.current=!1}))},onBlur(C){if(!(l&4))return;let S=YK(o);ou(n.current)&&S.add(n.current);let _=C.relatedTarget;dc(_)&&_.dataset.headlessuiFocusGuard!=="true"&&(KK(S,_)||(x.current?qg(n.current,dl(h.current,{[$g.Forwards]:()=>Bo.Next,[$g.Backwards]:()=>Bo.Previous})|Bo.WrapAround,{relativeTo:C.target}):dc(C.target)&&Ko(C.target)))}},j=ti();return nt.createElement(nt.Fragment,null,b&&nt.createElement(ST,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:Kv.Focusable}),j({ourProps:w,theirProps:c,defaultTag:IOe,name:"FocusTrap"}),b&&nt.createElement(ST,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:Kv.Focusable}))}let ROe=Kr($Oe),zOe=Object.assign(ROe,{features:Nd});function UOe(e=!0){let t=g.useRef(sc.slice());return oP(([n],[r])=>{r===!0&&n===!1&&mj(()=>{t.current.splice(0)}),r===!1&&n===!0&&(t.current=sc.slice())},[e,sc,t]),vn(()=>{var n;return(n=t.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function FOe(e,{ownerDocument:t}){let n=!!(e&8),r=UOe(n);oP(()=>{n||mDe(t?.body)&&Ko(r())},[n]),FK(()=>{n&&Ko(r())})}function BOe(e,{ownerDocument:t,container:n,initialFocus:r,initialFocusFallback:s}){let i=g.useRef(null),o=Vx(!!(e&1),"focus-trap#initial-focus"),l=lP();return oP(()=>{if(e===0)return;if(!o){s!=null&&s.current&&Ko(s.current);return}let c=n.current;c&&mj(()=>{if(!l.current)return;let d=t?.activeElement;if(r!=null&&r.current){if(r?.current===d){i.current=d;return}}else if(c.contains(d)){i.current=d;return}if(r!=null&&r.current)Ko(r.current);else{if(e&16){if(qg(c,Bo.First|Bo.AutoFocus)!==AT.Error)return}else if(qg(c,Bo.First)!==AT.Error)return;if(s!=null&&s.current&&(Ko(s.current),t?.activeElement===s.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}i.current=t?.activeElement})},[s,o,e]),i}function HOe(e,{ownerDocument:t,container:n,containers:r,previousActiveElement:s}){let i=lP(),o=!!(e&4);UK(t?.defaultView,"focus",l=>{if(!o||!i.current)return;let c=YK(r);ou(n.current)&&c.add(n.current);let d=s.current;if(!d)return;let m=l.target;ou(m)?KK(c,m)?(s.current=m,Ko(m)):(l.preventDefault(),l.stopPropagation(),Ko(d)):Ko(s.current)},!0)}function KK(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function QK(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||!Vg((t=e.as)!=null?t:ZK)||nt.Children.count(e.children)===1}let xj=g.createContext(null);xj.displayName="TransitionContext";var GOe=(e=>(e.Visible="visible",e.Hidden="hidden",e))(GOe||{});function VOe(){let e=g.useContext(xj);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function WOe(){let e=g.useContext(yj);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let yj=g.createContext(null);yj.displayName="NestingContext";function bj(e){return"children"in e?bj(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function XK(e,t){let n=wu(e),r=g.useRef([]),s=lP(),i=fj(),o=vn((b,v=cc.Hidden)=>{let x=r.current.findIndex(({el:w})=>w===b);x!==-1&&(dl(v,{[cc.Unmount](){r.current.splice(x,1)},[cc.Hidden](){r.current[x].state="hidden"}}),i.microTask(()=>{var w;!bj(r)&&s.current&&((w=n.current)==null||w.call(n))}))}),l=vn(b=>{let v=r.current.find(({el:x})=>x===b);return v?v.state!=="visible"&&(v.state="visible"):r.current.push({el:b,state:"visible"}),()=>o(b,cc.Unmount)}),c=g.useRef([]),d=g.useRef(Promise.resolve()),m=g.useRef({enter:[],leave:[]}),h=vn((b,v,x)=>{c.current.splice(0),t&&(t.chains.current[v]=t.chains.current[v].filter(([w])=>w!==b)),t?.chains.current[v].push([b,new Promise(w=>{c.current.push(w)})]),t?.chains.current[v].push([b,new Promise(w=>{Promise.all(m.current[v].map(([j,C])=>C)).then(()=>w())})]),v==="enter"?d.current=d.current.then(()=>t?.wait.current).then(()=>x(v)):x(v)}),p=vn((b,v,x)=>{Promise.all(m.current[v].splice(0).map(([w,j])=>j)).then(()=>{var w;(w=c.current.shift())==null||w()}).then(()=>x(v))});return g.useMemo(()=>({children:r,register:l,unregister:o,onStart:h,onStop:p,wait:d,chains:m}),[l,o,r,h,p,m,d])}let ZK=g.Fragment,JK=Yv.RenderStrategy;function qOe(e,t){var n,r;let{transition:s=!0,beforeEnter:i,afterEnter:o,beforeLeave:l,afterLeave:c,enter:d,enterFrom:m,enterTo:h,entered:p,leave:b,leaveFrom:v,leaveTo:x,...w}=e,[j,C]=g.useState(null),S=g.useRef(null),_=QK(e),E=oo(..._?[S,t,C]:t===null?[]:[t]),A=(n=w.unmount)==null||n?cc.Unmount:cc.Hidden,{show:T,appear:R,initial:U}=VOe(),[W,I]=g.useState(T?"visible":"hidden"),M=WOe(),{register:H,unregister:q}=M;Fr(()=>H(S),[H,S]),Fr(()=>{if(A===cc.Hidden&&S.current){if(T&&W!=="visible"){I("visible");return}return dl(W,{hidden:()=>q(S),visible:()=>H(S)})}},[W,S,H,q,T,A]);let ae=pj();Fr(()=>{if(_&&ae&&W==="visible"&&S.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[S,W,ae,_]);let K=U&&!R,B=R&&T&&U,X=g.useRef(!1),le=XK(()=>{X.current||(I("hidden"),q(S))},M),ue=vn(Ae=>{X.current=!0;let Pe=Ae?"enter":"leave";le.onStart(S,Pe,$=>{$==="enter"?i?.():$==="leave"&&l?.()})}),J=vn(Ae=>{let Pe=Ae?"enter":"leave";X.current=!1,le.onStop(S,Pe,$=>{$==="enter"?o?.():$==="leave"&&c?.()}),Pe==="leave"&&!bj(le)&&(I("hidden"),q(S))});g.useEffect(()=>{_&&s||(ue(T),J(T))},[T,_,s]);let ne=!(!s||!_||!ae||K),[,pe]=hOe(ne,j,T,{start:ue,end:J}),we=yd({ref:E,className:((r=CT(w.className,B&&d,B&&m,pe.enter&&d,pe.enter&&pe.closed&&m,pe.enter&&!pe.closed&&h,pe.leave&&b,pe.leave&&!pe.closed&&v,pe.leave&&pe.closed&&x,!pe.transition&&T&&p))==null?void 0:r.trim())||void 0,...fOe(pe)}),ye=0;W==="visible"&&(ye|=hi.Open),W==="hidden"&&(ye|=hi.Closed),T&&W==="hidden"&&(ye|=hi.Opening),!T&&W==="visible"&&(ye|=hi.Closing);let Te=ti();return nt.createElement(yj.Provider,{value:le},nt.createElement(bOe,{value:ye},Te({ourProps:we,theirProps:w,defaultTag:ZK,features:JK,visible:W==="visible",name:"Transition.Child"})))}function YOe(e,t){let{show:n,appear:r=!1,unmount:s=!0,...i}=e,o=g.useRef(null),l=QK(e),c=oo(...l?[o,t]:t===null?[]:[t]);pj();let d=gj();if(n===void 0&&d!==null&&(n=(d&hi.Open)===hi.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[m,h]=g.useState(n?"visible":"hidden"),p=XK(()=>{n||h("hidden")}),[b,v]=g.useState(!0),x=g.useRef([n]);Fr(()=>{b!==!1&&x.current[x.current.length-1]!==n&&(x.current.push(n),v(!1))},[x,n]);let w=g.useMemo(()=>({show:n,appear:r,initial:b}),[n,r,b]);Fr(()=>{n?h("visible"):!bj(p)&&o.current!==null&&h("hidden")},[n,p]);let j={unmount:s},C=vn(()=>{var E;b&&v(!1),(E=e.beforeEnter)==null||E.call(e)}),S=vn(()=>{var E;b&&v(!1),(E=e.beforeLeave)==null||E.call(e)}),_=ti();return nt.createElement(yj.Provider,{value:p},nt.createElement(xj.Provider,{value:w},_({ourProps:{...j,as:g.Fragment,children:nt.createElement(eQ,{ref:c,...j,...i,beforeEnter:C,beforeLeave:S})},theirProps:{},defaultTag:g.Fragment,features:JK,visible:m==="visible",name:"Transition"})))}function KOe(e,t){let n=g.useContext(xj)!==null,r=gj()!==null;return nt.createElement(nt.Fragment,null,!n&&r?nt.createElement(TT,{ref:t,...e}):nt.createElement(eQ,{ref:t,...e}))}let TT=Kr(YOe),eQ=Kr(qOe),cP=Kr(KOe),ir=Object.assign(TT,{Child:cP,Root:TT});var QOe=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(QOe||{}),XOe=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(XOe||{});let ZOe={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},dP=g.createContext(null);dP.displayName="DialogContext";function vj(e){let t=g.useContext(dP);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,vj),n}return t}function JOe(e,t){return dl(t.type,ZOe,e,t)}let F7=Kr(function(e,t){let n=g.useId(),{id:r=`headlessui-dialog-${n}`,open:s,onClose:i,initialFocus:o,role:l="dialog",autoFocus:c=!0,__demoMode:d=!1,unmount:m=!1,...h}=e,p=g.useRef(!1);l=(function(){return l==="dialog"||l==="alertdialog"?l:(p.current||(p.current=!0,console.warn(`Invalid role [${l}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")})();let b=gj();s===void 0&&b!==null&&(s=(b&hi.Open)===hi.Open);let v=g.useRef(null),x=oo(v,t),w=iP(v.current),j=s?0:1,[C,S]=g.useReducer(JOe,{titleId:null,descriptionId:null,panelRef:g.createRef()}),_=vn(()=>i(!1)),E=vn(pe=>S({type:0,id:pe})),A=pj()?j===0:!1,[T,R]=EOe(),U={get current(){var pe;return(pe=C.panelRef.current)!=null?pe:v.current}},W=qK(),{resolveContainers:I}=DOe({mainTreeNode:W,portals:T,defaultContainers:[U]}),M=b!==null?(b&hi.Closing)===hi.Closing:!1;GDe(d||M?!1:A,{allowed:vn(()=>{var pe,we;return[(we=(pe=v.current)==null?void 0:pe.closest("[data-headlessui-portal]"))!=null?we:null]}),disallowed:vn(()=>{var pe;return[(pe=W?.closest("body > *:not(#headlessui-portal-root)"))!=null?pe:null]})});let H=MK.get(null);Fr(()=>{if(A)return H.actions.push(r),()=>H.actions.pop(r)},[H,r,A]);let q=IK(H,g.useCallback(pe=>H.selectors.isTop(pe,r),[H,r]));nOe(q,I,pe=>{pe.preventDefault(),_()}),kOe(q,w?.defaultView,pe=>{pe.preventDefault(),pe.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),_()}),cOe(d||M?!1:A,w,I),VDe(A,v,_);let[ae,K]=ADe(),B=g.useMemo(()=>[{dialogState:j,close:_,setTitleId:E,unmount:m},C],[j,_,E,m,C]),X=Gx({open:j===0}),le={ref:x,id:r,role:l,tabIndex:-1,"aria-modal":d?void 0:j===0?!0:void 0,"aria-labelledby":C.titleId,"aria-describedby":ae,unmount:m},ue=!POe(),J=Nd.None;A&&!d&&(J|=Nd.RestoreFocus,J|=Nd.TabLock,c&&(J|=Nd.AutoFocus),ue&&(J|=Nd.InitialFocus));let ne=ti();return nt.createElement(vOe,null,nt.createElement(z7,{force:!0},nt.createElement(LOe,null,nt.createElement(dP.Provider,{value:B},nt.createElement(VK,{target:v},nt.createElement(z7,{force:!1},nt.createElement(K,{slot:X},nt.createElement(R,null,nt.createElement(zOe,{initialFocus:o,initialFocusFallback:v,containers:I,features:J},nt.createElement(DDe,{value:_},ne({ourProps:le,theirProps:h,slot:X,defaultTag:eMe,features:tMe,visible:j===0,name:"Dialog"})))))))))))}),eMe="div",tMe=Yv.RenderStrategy|Yv.Static;function nMe(e,t){let{transition:n=!1,open:r,...s}=e,i=gj(),o=e.hasOwnProperty("open")||i!==null,l=e.hasOwnProperty("onClose");if(!o&&!l)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!o)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!l)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!i&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(r!==void 0||n)&&!s.static?nt.createElement(U7,null,nt.createElement(ir,{show:r,transition:n,unmount:s.unmount},nt.createElement(F7,{ref:t,...s}))):nt.createElement(U7,null,nt.createElement(F7,{ref:t,open:r,...s}))}let aMe="div";function rMe(e,t){let n=g.useId(),{id:r=`headlessui-dialog-panel-${n}`,transition:s=!1,...i}=e,[{dialogState:o,unmount:l},c]=vj("Dialog.Panel"),d=oo(t,c.panelRef),m=Gx({open:o===0}),h=vn(w=>{w.stopPropagation()}),p={ref:d,id:r,onClick:h},b=s?cP:g.Fragment,v=s?{unmount:l}:{},x=ti();return nt.createElement(b,{...v},x({ourProps:p,theirProps:i,slot:m,defaultTag:aMe,name:"Dialog.Panel"}))}let sMe="div";function iMe(e,t){let{transition:n=!1,...r}=e,[{dialogState:s,unmount:i}]=vj("Dialog.Backdrop"),o=Gx({open:s===0}),l={ref:t,"aria-hidden":!0},c=n?cP:g.Fragment,d=n?{unmount:i}:{},m=ti();return nt.createElement(c,{...d},m({ourProps:l,theirProps:r,slot:o,defaultTag:sMe,name:"Dialog.Backdrop"}))}let oMe="h2";function lMe(e,t){let n=g.useId(),{id:r=`headlessui-dialog-title-${n}`,...s}=e,[{dialogState:i,setTitleId:o}]=vj("Dialog.Title"),l=oo(t);g.useEffect(()=>(o(r),()=>o(null)),[r,o]);let c=Gx({open:i===0}),d={ref:l,id:r};return ti()({ourProps:d,theirProps:s,slot:c,defaultTag:oMe,name:"Dialog.Title"})}let cMe=Kr(nMe),dMe=Kr(rMe);Kr(iMe);let uMe=Kr(lMe),Ro=Object.assign(cMe,{Panel:dMe,Title:uMe,Description:kDe});function Wx({isOpen:e,onClose:t,onSave:n,onEdit:r,setFormData:s,formData:i,isEditing:o=!1,viewMode:l=!1,users:c=[],onDelete:d}){const[m,h]=g.useState([]),[p,b]=g.useState([]),v=j=>{const{name:C,value:S}=j.target;s(_=>{const E={..._,[C]:S};return C==="relatedType1"&&(E.relatedTo1="",S==="Lead"?(E.relatedType2=null,E.relatedTo2=null,b([])):S==="Account"&&(E.relatedType2="Contact")),C==="relatedType2"&&(E.relatedTo2=""),E})};g.useEffect(()=>{if(!e)return;(async()=>{try{h([]);let C;i.relatedType1==="Lead"?C=await oe.get("/leads/admin/getLeads"):i.relatedType1==="Account"&&(C=await oe.get("/accounts/admin/fetch-all"));let S=[];if(C&&Array.isArray(C.data)&&(S=C.data),o&&i.relatedTo1)try{let _;i.relatedType1==="Lead"?_=await oe.get(`/leads/get/${i.relatedTo1}`):i.relatedType1==="Account"&&(_=await oe.get(`/accounts/get/${i.relatedTo1}`)),_&&_.data&&(S.some(A=>String(A.id)===String(i.relatedTo1))||(S=[_.data,...S]))}catch(_){console.error("Error fetching specific related item:",_)}h(S)}catch(C){console.error("Error fetching related 1 data:",C),h([])}})()},[i.relatedType1,e,o,i.relatedTo1]),g.useEffect(()=>{if(!e||l)return;(async()=>{try{if(b([]),i.relatedType1==="Account"&&i.relatedTo1){let C;i.relatedType2==="Contact"?C=await oe.get(`/contacts/from-acc/${i.relatedTo1}`):i.relatedType2==="Deal"&&(C=await oe.get(`/deals/from-acc/${i.relatedTo1}`));let S=[];if(C&&Array.isArray(C.data)&&(S=C.data),o&&i.relatedTo2)try{let _;i.relatedType2==="Contact"?_=await oe.get(`/contacts/get/${i.relatedTo2}`):i.relatedType2==="Deal"&&(_=await oe.get(`/deals/get/${i.relatedTo2}`)),_&&_.data&&(S.some(A=>String(A.id)===String(i.relatedTo2))||(S=[_.data,...S]))}catch(_){console.error("Error fetching specific related item:",_)}b(S)}}catch(C){console.error("Error fetching related 2 data:",C),b([])}})()},[i.relatedType1,i.relatedTo1,i.relatedType2,i.relatedTo2,e,l,o]);const x=j=>{j.preventDefault(),n?.(i)},w=l?"Task Details":o?"Edit Task":"Create Task";return a.jsx(ir,{appear:!0,show:e,as:g.Fragment,children:a.jsxs(Ro,{as:"div",className:"relative z-50",onClose:t,children:[a.jsx(ir.Child,{as:g.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:a.jsx("div",{className:"fixed inset-0 bg-black/40"})}),a.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 overflow-y-auto",children:a.jsx("div",{className:"flex min-h-full items-center justify-center text-center",children:a.jsx(ir.Child,{as:g.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:a.jsx(Ro.Panel,{className:"w-full max-w-full sm:max-w-3xl text-left align-middle transform transition-all",children:a.jsxs("div",{className:"bg-white w-full min-w-sm md:min-w-lg rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] flex flex-col hide-scrollbar",children:[a.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(wn,{size:25})}),a.jsx("h3",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:w}),l&&a.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",onClick:t,children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[90vh] overflow-y-auto hide-scrollbar font-manrope relative",onClick:j=>j.stopPropagation(),children:[a.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-4 rounded-t-xl",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Tasks"}),a.jsx("button",{onClick:t,className:"text-gray-500 hover:text-white transition cursor-pointer",children:a.jsx(wn,{size:25})})]}),a.jsx("div",{className:"p-6 lg:p-4",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:i.subject||"No Title"})}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 cursor-pointer",onClick:()=>{s&&s(i),typeof r=="function"&&r()},children:"Edit"}),a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400 cursor-pointer",onClick:()=>d(i),children:[a.jsx(jt,{className:"mr-2"}),"Delete"]})]})]})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white overflow-x-auto",children:a.jsx("button",{className:"flex-1 min-w-[90px] px-4 py-2 lg:text-lg text-sm font-medium text-center text-white",children:"Overview"})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 lg:p-5 border border-gray-200 text-sm text-gray-700",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Title:"}),a.jsx("p",{children:i.subject||""})]}),i.relatedType1Text&&i.relatedTo1Text&&a.jsxs("div",{children:[a.jsxs("p",{className:"font-semibold",children:[i.relatedType1Text,":"]}),a.jsx("p",{children:i.relatedTo1Text})]}),i.relatedType2Text&&i.relatedTo2Text&&a.jsxs("div",{children:[a.jsxs("p",{className:"font-semibold",children:[i.relatedType2,":"]}),a.jsx("p",{children:i.relatedTo2Text})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Priority:"}),a.jsx("p",{children:i.priority||""})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Status:"}),a.jsx("p",{children:i.status||""})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Due Date:"}),a.jsx("p",{children:i.dueDate||""})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("p",{className:"font-semibold",children:"Description:"}),a.jsx("p",{className:"whitespace-pre-wrap",children:i.description||""})]})]})})]})]})}),!l&&a.jsxs("form",{onSubmit:x,className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm flex-1",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Title"}),a.jsx("input",{type:"text",name:"subject",value:i.subject,onChange:v,required:!0,disabled:l,placeholder:"Enter task title",className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${l?"bg-gray-50 cursor-not-allowed":""}`})]}),a.jsxs("div",{className:"w-full flex flex-col",children:[a.jsxs("select",{name:"relatedType1",onChange:v,value:i.relatedType1,disabled:l,className:`w-23 rounded-md text-sm focus:ring-2 focus:ring-blue-400 outline-none mb-2 disabled:text-gray-400 ${l?"cursor-not-allowed":""}`,children:[a.jsx("option",{value:"Lead",children:"Lead"}),a.jsx("option",{value:"Account",children:"Account"})]}),a.jsx(c_,{disabled:!1,items:Array.isArray(m)?m:[],value:i.relatedTo1??"",placeholder:`Search ${i.relatedType1||"here"}...`,getLabel:j=>i.relatedType1==="Lead"?j.title:j.name??"",onChange:j=>s(C=>({...C,relatedTo1:j}))})]}),a.jsxs("div",{className:"w-full flex flex-col",children:[a.jsxs("select",{name:"relatedType2",onChange:v,value:i.relatedType2??"Contact",className:"w-23 rounded-md text-sm focus:ring-2 focus:ring-blue-400 outline-none mb-2 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:l||i.relatedType1==="Lead",children:[a.jsx("option",{value:"Contact",children:"Contact"}),a.jsx("option",{value:"Deal",children:"Deal"})]}),a.jsx(c_,{disabled:i.relatedType1==="Lead",items:Array.isArray(p)?p:[],value:i.relatedTo2??"",placeholder:i.relatedType1==="Lead"?"":Array.isArray(p)&&p.length>0?`Search ${i.relatedType2||"Contact"}...`:`No ${i.relatedType2||""} data found`,getLabel:j=>i.relatedType2==="Contact"?`${j.first_name??""} ${j.last_name??""}`.trim():j.name??"",onChange:j=>s(C=>({...C,relatedTo2:j}))})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Description"}),a.jsx("textarea",{name:"description",value:i.description,onChange:v,disabled:l,placeholder:"Enter task description",rows:3,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${l?"bg-gray-50 cursor-not-allowed":""}`})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Priority"}),a.jsxs("select",{name:"priority",value:i.priority,onChange:v,disabled:l,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${l?"bg-gray-50 cursor-not-allowed":""}`,children:[a.jsx("option",{value:"Low",children:"Low"}),a.jsx("option",{value:"Normal",children:"Normal"}),a.jsx("option",{value:"High",children:"High"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Due Date"}),a.jsx("input",{type:"datetime-local",name:"dueDate",value:i.dueDate,onChange:v,required:!0,disabled:l,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${l?"bg-gray-50 cursor-not-allowed":""}`})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Assign To"}),a.jsx(c_,{items:Array.isArray(c)?c:[],value:i.assignedTo??"",placeholder:"Search an account...",getLabel:j=>`${j.first_name} ${j.last_name}`,onChange:j=>s(C=>({...C,assignedTo:j}))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),a.jsxs("select",{name:"status",value:i.status,onChange:v,disabled:l,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${l?"bg-gray-50 cursor-not-allowed":""}`,children:[a.jsx("option",{value:"Not started",children:"Not started"}),a.jsx("option",{value:"In progress",children:"In Progress"}),a.jsx("option",{value:"Deferred",children:"Deferred"}),a.jsx("option",{value:"Completed",children:"Completed"})]})]}),!l&&a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[a.jsx("button",{type:"button",onClick:t,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition",children:o?"Update Task":"Create Task"})]})]})]})})})})})]})})}function c_({items:e=[],value:t="",onChange:n,getLabel:r,placeholder:s="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=g.useState(!1),[d,m]=g.useState(""),h=g.useRef(null),p=e.find(x=>String(x.id)===String(t)),b=p?r(p):"",v=g.useMemo(()=>{const x=d.trim().toLowerCase();return(x?e.filter(j=>(r(j)||"").toLowerCase().includes(x)):e).slice(0,o)},[e,d,r,o]);return g.useEffect(()=>{const x=w=>{h.current&&!h.current.contains(w.target)&&c(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]),g.useEffect(()=>{l||m("")},[l]),a.jsxs("div",{ref:h,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:l?d:b,placeholder:s,onFocus:()=>!i&&c(!0),onChange:x=>{m(x.target.value),l||c(!0)},className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:v.length>0?v.map(x=>{const w=String(x.id),j=r(x),C=String(t)===w;return a.jsx("button",{type:"button",onClick:()=>{n(w),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${C?"bg-blue-50":""}`,children:j||"--"},w)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const B7=["To Do","In Progress","Review","Completed"],Qh=10,mMe=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const n=t.getTimezoneOffset();return new Date(t.getTime()-n*60*1e3).toISOString().slice(0,16)},H7=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},fMe=e=>{const t=e.subject?.trim()??"",n=e.description?.trim()??"",r=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),e.status&&String(e.status).toUpperCase();let s=null,i=null,o=null,l=null;e.relatedType1==="Lead"&&e.relatedTo1?s=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?o=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2&&(l=Number(e.relatedTo2)));const c=e.assignedTo?Number(e.assignedTo):null,d=o||l||i||s,m=o?"Contact":l?"Deal":i?"Account":s?"Lead":null;return{title:t,description:n,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:c,notes:r,is_personal:!1,lead_id:s,account_id:i,contact_id:o,deal_id:l,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:d,related_type:m}},hMe=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",n=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",r=e.due_date||e.dueDate||null,s=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",o=()=>e.lead?.id||e.lead_id,l=()=>e.account?.id||e.account_id,c=()=>e.contact?.id||e.contact_id,d=()=>e.deal?.id||e.deal_id,m=()=>e.task_assign_to?.id||e.assigned_to,h=()=>e.lead?.title||e.lead_id,p=()=>e.account?.name||e.account_id,b=()=>i||e.contact_id,v=()=>e.deal?.name||e.deal_id;let x="Lead",w="",j="",C="",S="Lead",_="",E="",A="";const T=l(),R=p(),U=o(),W=h();if(T){x="Account",S="Account",_=R,w=String(T);const I=c(),M=d(),H=b(),q=v();I?(j="Contact",E="Contact",A=H,C=String(I)):M&&(E="Deal",j="Deal",A=q,C=String(M))}else U?(S="Lead",_=W,x="Lead",w=String(U)):e.related_type==="Account"&&(x="Account",w=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:e.status||"Not started",dueDate:r,dateAssigned:s,assignedToId:m()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:n,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:S,relatedTo1Text:_,relatedType2Text:E,relatedTo2Text:A,subject:e.title,relatedType1:x,relatedTo1:w,relatedType2:j,relatedTo2:C}};function gMe(){g.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=Ut(),[n,r]=g.useState("board"),[s,i]=g.useState(!1),[o,l]=g.useState(null),[c,d]=g.useState(!1),[m,h]=g.useState([]),[p,b]=g.useState(!0),[v,x]=g.useState(""),[w,j]=g.useState("Filter by Status"),[C,S]=g.useState("Filter by Priority"),[_,E]=g.useState([]),[A,T]=g.useState(1),[R,U]=g.useState(null),[W,I]=g.useState(!1),M=rt(),H=Xt(),[q,ae]=g.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""});g.useEffect(()=>{const O=H.state?.openTaskModal,ce=H.state?.initialTaskData;O&&(i(!0),ce&&ae(de=>({...de,...ce})),M(H.pathname,{replace:!0,state:{}}))},[H,M]);const K=async()=>{try{const O=await oe.get("/users/all");E(Array.isArray(O.data)?O.data:[])}catch(O){console.error("Failed to fetch users:",O),Q.error("Failed to fetch users.")}},B=async()=>{try{b(!0);const O=await oe.get("/tasks/all"),de=(Array.isArray(O.data)?O.data:[]).map(hMe);de.sort((Ce,Ee)=>{const Ge=Ce.createdAt?new Date(Ce.createdAt):0;return(Ee.createdAt?new Date(Ee.createdAt):0)-Ge}),console.log("Fetched Tasks:",de),h(de),n==="list"&&T(1)}catch(O){console.error("Failed to load tasks:",O),Q.error("Failed to load tasks.")}finally{b(!1)}};g.useEffect(()=>{!t&&e&&(K(),B())},[t,e]);const X=()=>{l(null),ae({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},le=(O=null,ce=!1)=>{l(O),d(ce),O?ae({id:O.id,subject:O.title||"",description:O.description||"",priority:O.priority||"Normal",status:O.status||"Not started",dueDate:mMe(O.dueDate),assignedTo:O.assignedToId?String(O.assignedToId):"",notes:O.notes||"",relatedType1Text:O.relatedType1Text||"",relatedTo1Text:O.relatedTo1Text||"",relatedType2Text:O.relatedType2Text||"",relatedTo2Text:O.relatedTo2Text||"",relatedType1:O.relatedType1||"",relatedTo1:O.relatedTo1||"",relatedType2:O.relatedType2||"",relatedTo2:O.relatedTo2||""}):X(),i(!0)},ue=()=>{i(!1),l(null),d(!1),X()},J=async O=>{const ce=fMe(O);try{o&&!c?(await oe.put(`/tasks/${o.id}`,ce),Q.success("Task updated successfully.")):(await oe.post("/tasks/create",ce),Q.success("Task created successfully.")),i(!1),await B()}catch(de){console.error("Failed to save task:",de);const Ce=de.response?.data?.detail||"Failed to save task.";Q.error(Ce)}},ne=O=>{O&&U({title:"Delete Task",message:a.jsxs(a.Fragment,{children:["Are you sure you want to delete ",a.jsx("span",{className:"font-semibold",children:O.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:O.id}})},pe=async()=>{if(!R?.action){U(null);return}const{action:O}=R;I(!0);try{O.type==="delete"&&(await oe.delete(`/tasks/${O.targetId}`),Q.success("Task deleted successfully."),await B())}catch(ce){console.error("Task action failed:",ce),Q.error("Failed to delete task.")}finally{I(!1),U(null)}},we=()=>{W||U(null)},ye=g.useMemo(()=>{const O=v.trim().toLowerCase();return[...m].sort((de,Ce)=>{const Ee=de.createdAt?new Date(de.createdAt):0;return(Ce.createdAt?new Date(Ce.createdAt):0)-Ee}).filter(de=>{const Ce=O===""||de.title?.toLowerCase().includes(O)||de.description?.toLowerCase().includes(O)||de.assignedToName?.toLowerCase().includes(O)||de.createdBy?.toLowerCase().includes(O),Ee=w==="Filter by Status"||de.status===w,Ge=C==="Filter by Priority"||de.priority===C;return Ce&&Ee&&Ge})},[m,v,w,C]);g.useEffect(()=>{T(1)},[v,w,C,n]),g.useEffect(()=>{if(n==="list"){const O=ye.length===0?1:Math.ceil(ye.length/Qh);A>O&&T(O)}},[ye.length,A,n]);const Te=g.useMemo(()=>{if(n==="board")return ye;const O=(A-1)*Qh;return ye.slice(O,O+Qh)},[ye,A,n]),Ae=g.useMemo(()=>{const O=new Date;return[{title:"To Do",value:m.filter(ce=>ce.status==="Not started").length,icon:Za,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:m.filter(ce=>ce.status==="In progress").length,icon:Bs,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:m.filter(ce=>ce.status==="Completed").length,icon:Fn,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:m.filter(ce=>ce.dueDate&&new Date(ce.dueDate)<O&&ce.status!=="Completed").length,icon:Vp,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:m.filter(ce=>ce.priority==="High").length,icon:ml,color:"text-orange-600",bgColor:"bg-orange-100"}]},[m]),Pe=O=>O.dueDate&&new Date(O.dueDate)<new Date&&O.status!=="Completed",$=O=>{switch(O.status){case"To Do":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In Progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Review":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},Ne=O=>{switch(O){case"To Do":return"bg-blue-100 text-blue-700";case"In Progress":return"bg-purple-100 text-purple-700";case"Review":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},fe=O=>{switch(O){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&a.jsx(yt,{message:"Loading tasks..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(Bs,{className:"text-blue-600"})," Tasks Board"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{type:"button",onClick:()=>le(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[a.jsx(Rt,{})," Create Task"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ae.map(O=>a.jsx(pMe,{...O},O.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search tasks",value:v,onChange:O=>x(O.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[a.jsxs("select",{value:w,onChange:O=>j(O.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"Filter by Status"}),B7.map(O=>a.jsx("option",{children:O},O))]}),a.jsxs("select",{value:C,onChange:O=>S(O.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"Filter by Priority"}),a.jsx("option",{children:"High"}),a.jsx("option",{children:"Normal"}),a.jsx("option",{children:"Low"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("button",{type:"button",onClick:()=>r("board"),className:`px-4 py-2 rounded-full text-sm ${n==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),a.jsx("button",{type:"button",onClick:()=>r("list"),className:`px-4 py-2 rounded-full text-sm ${n==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&ye.length===0&&a.jsx("p",{className:"text-center text-gray-500 mt-10 p-4 bg-white shadow rounded-lg",children:"No tasks found matching current filters."}),!p&&!t&&ye.length>0&&n==="board"&&a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:B7.map(O=>{const ce=Te.filter(de=>de.status===O);return a.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),a.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:O}),a.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:ce.length})]}),a.jsx("div",{className:`space-y-3 ${ce.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:ce.length>0?ce.map(de=>a.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${$(de)}`,onClick:()=>le(de,!0),children:[a.jsxs("div",{className:"text-left flex-1",children:[a.jsx("p",{className:"font-medium text-gray-800 text-sm",children:de.title}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",de.priority]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",de.assignedToName]}),a.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",a.jsx("span",{className:Pe(de)?"text-red-600":"text-gray-600",children:de.dateAssigned?H7(de.dateAssigned):""})]})]}),a.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[a.jsx("button",{type:"button",onClick:Ce=>{Ce.stopPropagation(),le(de)},className:"text-blue-500 hover:text-blue-700",children:a.jsx(pn,{})}),a.jsx("button",{type:"button",onClick:Ce=>{Ce.stopPropagation(),ne(de)},className:"text-red-500 hover:text-red-700",children:a.jsx(jt,{})})]})]},de.id)):a.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No tasks"})})]},O)})}),!p&&!t&&ye.length>0&&n==="list"&&a.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Actions"})]})}),a.jsx("tbody",{children:Te.map(O=>a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",onClick:()=>{console.log("Opening task in view mode:",O),le(O,!0)},children:[a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",children:O.title}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Ne(O.status||"To Do")}`,children:O.status||"To Do"})}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${fe(O.priority||"Low")}`,children:O.priority||"Low"})}),a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:O.assignedToName||"Unassigned"}),a.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${Pe(O)?"text-red-600 font-medium":""}`,children:O.dateAssigned?H7(O.dateAssigned):""}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-3",onClick:ce=>ce.stopPropagation(),children:[a.jsxs("button",{type:"button",onClick:()=>le(O),className:"text-blue-500 hover:text-blue-700 flex items-center gap-1",children:[a.jsx(pn,{})," Edit"]}),a.jsxs("button",{type:"button",onClick:()=>ne(O),className:"text-red-500 hover:text-red-700 flex items-center gap-1",children:[a.jsx(jt,{})," Delete"]})]})})]},O.id))})]})})}),!p&&!t&&n==="list"&&a.jsx(Et,{className:"mt-6",totalItems:ye.length,pageSize:Qh,currentPage:ye.length===0?0:A,onPrev:()=>T(O=>Math.max(O-1,1)),onNext:()=>T(O=>Math.min(O+1,Math.max(1,Math.ceil(ye.length/Qh)||1))),label:"tasks"}),a.jsx(Wx,{isOpen:s,onClose:ue,onSave:J,onEdit:()=>d(!1),setFormData:ae,formData:q,isEditing:!c&&!!o,viewMode:c,users:_,currentUser:e,onDelete:ne}),R&&a.jsx(xMe,{open:!0,title:R.title,message:R.message,confirmLabel:R.confirmLabel,cancelLabel:R.cancelLabel,variant:R.variant,onConfirm:pe,onCancel:we,loading:W})]})}function pMe({icon:e,title:t,value:n,color:r,bgColor:s,onClick:i}){return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${s} ${r} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function xMe({open:e,title:t,message:n,confirmLabel:r,cancelLabel:s,variant:i,loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:s}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":r})]})]})})}function yMe(e){return it({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M235.4 172.2c0-11.4 9.3-19.9 20.5-19.9 11.4 0 20.7 8.5 20.7 19.9s-9.3 20-20.7 20c-11.2 0-20.5-8.6-20.5-20zm1.4 35.7H275V352h-38.2V207.9z"},child:[]},{tag:"path",attr:{d:"M256 76c48.1 0 93.3 18.7 127.3 52.7S436 207.9 436 256s-18.7 93.3-52.7 127.3S304.1 436 256 436c-48.1 0-93.3-18.7-127.3-52.7S76 304.1 76 256s18.7-93.3 52.7-127.3S207.9 76 256 76m0-28C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48z"},child:[]}]})(e)}const d_={name:"",description:"",manager_id:"",user_ids:[],company_id:""},Gy=12,Vy=10;function bMe({label:e,options:t,selectedValues:n,onChange:r,disabled:s=!1,placeholder:i="Select users..."}){const[o,l]=g.useState(!1),[c,d]=g.useState(""),m=g.useRef(null);g.useEffect(()=>{function x(w){m.current&&!m.current.contains(w.target)&&(l(!1),d(""))}return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const h=t.filter(x=>x.label.toLowerCase().includes(c.toLowerCase())),p=x=>{const w=n.includes(x);let j;w?j=n.filter(C=>C!==x):j=[...n,x],r(j)},b=(x,w)=>{x.stopPropagation(),r(n.filter(j=>j!==w))},v=t.filter(x=>n.includes(x.value));return a.jsxs("div",{className:"relative",ref:m,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsxs("div",{onClick:()=>!s&&l(!o),className:`w-full border ${o?"border-gray-500 ring-1 ring-gray-400":"border-gray-300"} 
          rounded-md px-3 py-2 text-sm bg-white cursor-pointer min-h-[38px] flex flex-wrap items-center gap-2
          ${s?"bg-gray-100 cursor-not-allowed":""}`,children:[n.length===0&&a.jsx("span",{className:"text-gray-400 select-none",children:i}),v.map(x=>a.jsxs("span",{className:"bg-indigo-100 text-indigo-700 px-2 py-0.5 rounded text-xs flex items-center gap-1 border border-indigo-200",children:[x.label,!s&&a.jsx(St,{className:"cursor-pointer hover:text-indigo-900",onClick:w=>b(w,x.value)})]},x.value)),a.jsx("div",{className:"ml-auto text-gray-400",children:a.jsx(Rr,{})})]}),o&&!s&&a.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden flex flex-col",children:[a.jsx("div",{className:"p-2 border-b border-gray-100 sticky top-0 bg-white",children:a.jsxs("div",{className:"flex items-center px-2 py-1 bg-gray-50 rounded border border-gray-200",children:[a.jsx(bt,{className:"text-gray-400 mr-2"}),a.jsx("input",{type:"text",className:"bg-transparent outline-none w-full text-sm",placeholder:"Search...",value:c,onChange:x=>d(x.target.value),autoFocus:!0})]})}),a.jsx("div",{className:"overflow-y-auto flex-1",children:h.length>0?h.map(x=>{const w=n.includes(x.value);return a.jsxs("div",{onClick:()=>p(x.value),className:`px-4 py-2 text-sm cursor-pointer flex items-center justify-between hover:bg-gray-50 
                      ${w?"bg-indigo-50 text-indigo-700":"text-gray-700"}`,children:[a.jsx("span",{children:x.label}),w&&a.jsx(W8,{className:"text-indigo-600"})]},x.value)}):a.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:"No results found"})})]})]})}function Ql(){g.useEffect(()=>{document.title="Territory | Sari-Sari CRM"},[]);const e=rt(),{id:t}=ul(),[n,r]=g.useState(""),[s,i]=g.useState(""),[o,l]=g.useState(""),[c,d]=g.useState(null),[m,h]=g.useState(!1),[p,b]=g.useState([]),[v,x]=g.useState(!1),[w,j]=g.useState([]),[C,S]=g.useState(d_),[_,E]=g.useState(!1),[A,T]=g.useState(!1),[R,U]=g.useState(null),[W,I]=g.useState(null),[M,H]=g.useState("board"),[q,ae]=g.useState(null),[K,B]=g.useState(!1),[X,le]=g.useState(null),[ue,J]=g.useState(1),ne=g.useRef(!1),{userRole:pe}=er(),we=g.useMemo(()=>{const Se=new Map;return p.forEach(Ve=>{const k=`${Ve.name}-${Ve.manager_id||"no-manager"}`;if(!Se.has(k))Se.set(k,{...Ve,assigned_users_list:Ve.assigned_to?[Ve.assigned_to]:[]});else{const Z=Se.get(k);Ve.assigned_to&&(Z.assigned_users_list.some(re=>re.id===Ve.assigned_to.id)||Z.assigned_users_list.push(Ve.assigned_to))}}),Array.from(Se.values())},[p]),ye=g.useMemo(()=>{const Se=n.trim().toLowerCase(),Ve=s.trim().toLowerCase(),k=o.trim();return[...we].sort((re,be)=>{const z=re?.created_at?new Date(re.created_at):0;return(be?.created_at?new Date(be.created_at):0)-z}).filter(re=>{const be=re.name?.toLowerCase()||"",z=re.description?.toLowerCase()||"",ee=re.managed_by?`${re.managed_by.first_name} ${re.managed_by.last_name}`.toLowerCase():"",ie=re.status?.toString().toLowerCase()||"",V=re.assigned_users_list.map(Me=>`${Me.first_name} ${Me.last_name}`.toLowerCase()).join(" "),se=Se===""||[be,z,ee,ie,V].some(Me=>Me&&Me.includes(Se)),xe=Ve===""||ie===Ve,ge=k===""||String(re.managed_by?.id||"")===k||re.assigned_users_list.some(Me=>String(Me.id)===k);return se&&xe&&ge})},[we,n,s,o]);g.useEffect(()=>{if(ne.current){ne.current=!1;return}if(t&&we.length>0&&!_&&!m&&!A){const Se=we.find(Ve=>Ve.id===parseInt(t));Se&&d(Se)}!t&&!_&&!m&&d(null)},[t,we,_,m,A]),g.useEffect(()=>{J(1)},[n,s,o]),g.useEffect(()=>{J(Se=>{const Ve=Math.max(1,Math.ceil(ye.length/(M==="board"?Gy:Vy))||1);return Se>Ve?Ve:Se})},[ye.length,M]);const Te=async()=>{try{const Se=await oe.get("/users/read/territory");j(Se.data)}catch(Se){console.error("Error fetching users:",Se)}},Ae=async()=>{x(!0);try{const Se=await oe.get("/territories/fetch"),Ve=Array.isArray(Se.data)?Se.data:[];b(Ve),console.log(Se.data)}catch(Se){console.error("Error fetching territories:",Se)}finally{x(!1)}};g.useEffect(()=>{Te(),Ae()},[]);const Pe=Se=>{const{name:Ve,value:k}=Se.target;S(Z=>({...Z,[Ve]:k}))},$=Se=>{S(Ve=>({...Ve,user_ids:Se}))},Ne=()=>{S(d_),E(!1),U(null),h(!0)},fe=(Se=!0)=>{h(!1),E(!1),U(null),S(d_)},O=Se=>{if(!Se)return;const Ve=Se.assigned_users_list?Se.assigned_users_list.map(k=>String(k.id)):[];S({name:Se.name||"",description:Se.description||"",manager_id:Se.managed_by?String(Se.managed_by.id):"",user_ids:Ve,company_id:Se.company_id?String(Se.company_id):""}),E(!0),U(Se.id),d(null),h(!0)},ce=Se=>{Se.preventDefault();const Ve=C.name.trim();if(!Ve){Q.error("Territory name is required.");return}if(C.user_ids.length===0){Q.error("Please assign at least one user.");return}let k=C.company_id?Number(C.company_id):null;if(!k&&C.user_ids.length>0){const be=C.user_ids[0],z=w.find(ee=>String(ee.id)===String(be));z&&z.company&&(k=z.company.id)}const Z={name:Ve,description:C.description?.trim()||"",manager_id:C.manager_id?Number(C.manager_id):null,user_ids:C.user_ids.map(be=>Number(be)),company_id:k},re=_&&R?"update":"create";ae({title:re==="create"?"Confirm New Territory":"Confirm Update",message:a.jsxs("span",{children:[re==="create"?"Create":"Update"," territory ",a.jsx("span",{className:"font-semibold",children:Ve})," with ",Z.user_ids.length," assigned users?"]}),confirmLabel:re==="create"?"Create":"Update",cancelLabel:"Cancel",variant:"primary",action:{type:re,payload:Z,targetId:R,name:Ve}})},de=Se=>{Se&&ae({title:"Delete Territory Group",message:a.jsxs("span",{children:["Are you sure you want to delete ",a.jsx("span",{className:"font-semibold",children:Se.name}),"?",a.jsx("br",{}),a.jsxs("span",{className:"text-xs text-red-500",children:["This will remove assignments for all ",Se.assigned_users_list.length," users in this group."]})]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:Se.id,name:Se.name}})},Ce=async()=>{if(!q?.action){ae(null);return}const{action:Se}=q,{type:Ve,payload:k,targetId:Z,name:re}=Se;B(!0);try{Ve==="create"?(T(!0),await oe.post("/territories/assign",k),Q.success(`Territory "${re}" created.`),await Ae(),await Te(),fe(!1)):Ve==="update"?(T(!0),await oe.put(`/territories/${Z}`,k),Q.success(`Territory "${re}" updated.`),ne.current=!0,fe(!1),d(null),t&&e("/admin/territory"),await Ae(),await Te()):Ve==="delete"&&(le(Z),await oe.delete(`/territories/${Z}`),Q.success(`Territory "${re}" deleted.`),await Ae(),c?.id===Z&&d(null))}catch(be){console.error(be),Q.error("An error occurred.")}finally{T(!1),le(null),B(!1),ae(null)}},Ee=()=>{K||ae(null)},Ge=g.useMemo(()=>{const Se=M==="board"?Gy:Vy,Ve=(ue-1)*Se;return ye.slice(Ve,Ve+Se)},[ye,ue,M]),Je=ye.length>0,We=()=>J(Se=>Math.max(Se-1,1)),Ke=()=>J(Se=>Math.min(Se+1,Math.ceil(ye.length/(M==="board"?Gy:Vy))||1)),He=Se=>!Se||Se.length===0?"Unassigned":Se.length===1?`${Se[0].first_name} ${Se[0].last_name}`:`${Se[0].first_name} ${Se[0].last_name} +${Se.length-1} more`;return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[v&&a.jsx(yt,{message:"Loading territories..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-0 mb-7",children:[a.jsxs("h2",{className:"flex items-center text-2xl font-semibold text-gray-800",children:[a.jsx(_c,{className:"mr-2 text-blue-600"})," Territory"]}),a.jsx("div",{className:"flex justify-center lg:justify-end md:justify-end w-full",children:["ceo","admin","group manager","group_manager"].includes(pe.toLowerCase())&&(Array.isArray(w)&&w.length>0?a.jsxs("button",{onClick:Ne,className:"flex items-center bg-black text-white px-3 py-2 rounded-md hover:bg-gray-800 text-sm",children:[a.jsx(Rt,{})," Create Territory"]}):a.jsxs("div",{className:"text-xs bg-red-50 p-2 rounded-lg ring ring-red-300 text-red-700 flex items-center gap-1",children:[a.jsx(yMe,{})," Add users to assign territories"]}))})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mt-6 mb-4 flex flex-col md:flex-row items-center gap-2",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full md:w-4/4",children:[a.jsx(bt,{className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search territory",className:"focus:outline-none w-full",value:n,onChange:Se=>r(Se.target.value)})]}),pe.toLowerCase()!=="sales"&&a.jsx("div",{className:"flex flex-col md:flex-row gap-2 w-full md:w-1/2",children:a.jsxs("select",{className:"border border-gray-300 rounded-lg px-3 h-11 w-full text-sm",value:o,onChange:Se=>l(Se.target.value),children:[a.jsx("option",{value:"",children:"Filter by Users"}),w.map(Se=>a.jsxs("option",{value:String(Se.id),children:[Se.first_name," ",Se.last_name]},Se.id))]})})]}),a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("button",{onClick:()=>H("board"),className:`px-4 py-2 rounded-full text-sm ${M==="board"?"bg-gray-800 text-white":"bg-gray-100"}`,children:"Board View"}),a.jsx("button",{onClick:()=>H("list"),className:`px-4 py-2 rounded-full text-sm ${M==="list"?"bg-gray-800 text-white":"bg-gray-100"}`,children:"List View"})]}),M==="board"&&a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:Je?Ge.map(Se=>a.jsxs("div",{onClick:()=>{d(Se);let Ve;pe.toLowerCase()==="ceo"||pe.toLowerCase()==="admin"?Ve="admin":pe.toLowerCase()==="group manager"||pe.toLowerCase()==="group_manager"?Ve="group-manager":pe.toLowerCase()==="manager"?Ve="manager":Ve="sales",e(`/${Ve}/territory/${Se.id}`)},className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative cursor-pointer hover:shadow-md transition",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),a.jsx("h3",{className:"font-medium text-gray-900 mb-2 pt-7",children:Se.name}),Se.description&&a.jsx("p",{className:"text-xs text-gray-600 mb-2 line-clamp-2",children:Se.description}),a.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-2",children:[a.jsx(Qt,{})," ",He(Se.assigned_users_list)]}),a.jsx("div",{className:"h-px bg-gray-200 w-full mb-2"}),a.jsx("div",{className:"text-gray-400 text-xs text-right",children:Se.created_at?new Date(Se.created_at).toLocaleDateString():""})]},Se.id)):a.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No territories found."})}),M==="list"&&a.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Territory"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Manager"})]})}),a.jsx("tbody",{children:Je?Ge.map(Se=>a.jsxs("tr",{onClick:()=>{d(Se);let Ve;pe.toLowerCase()==="ceo"||pe.toLowerCase()==="admin"?Ve="admin":pe.toLowerCase()==="group manager"||pe.toLowerCase()==="group_manager"?Ve="group-manager":pe.toLowerCase()==="manager"?Ve="manager":Ve="sales",e(`/${Ve}/territory/${Se.id}`)},className:"hover:bg-gray-50 cursor-pointer",children:[a.jsx("td",{className:"py-3 px-4 font-medium",children:Se.name}),a.jsx("td",{className:"py-3 px-4",children:He(Se.assigned_users_list)}),a.jsx("td",{className:"py-3 px-4",children:Se.managed_by?`${Se.managed_by.first_name}`:""})]},Se.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:4,className:"text-center py-4 text-gray-500",children:"No territories found."})})})]})}),c&&a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-xl p-8 relative",children:[a.jsx("button",{className:"absolute top-2 right-4 text-gray-500 hover:text-black",onClick:()=>{d(null);let Se;pe.toLowerCase()==="ceo"||pe.toLowerCase()==="admin"?Se="admin":pe.toLowerCase()==="group manager"||pe.toLowerCase()==="group_manager"?Se="group-manager":pe.toLowerCase()==="manager"?Se="manager":Se="sales",e(`/${Se}/territory`)},children:a.jsx(St,{size:24})}),a.jsx("h2",{className:"text-3xl font-semibold mb-1",children:c.name}),a.jsx("div",{className:"h-px bg-gray-200 w-full mb-4"}),a.jsx("p",{className:"text-gray-500 mb-1",children:"Description"}),a.jsx("p",{className:"text-gray-700 text-sm mb-6",children:c.description||""}),a.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500",children:"Manager"}),a.jsx("div",{className:"font-medium",children:c.managed_by?`${c.managed_by.first_name} ${c.managed_by.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500",children:"Assigned To"}),a.jsx("div",{className:"flex flex-col gap-1 mt-1 max-h-32 overflow-y-auto",children:c.assigned_users_list&&c.assigned_users_list.length>0?c.assigned_users_list.map(Se=>a.jsxs("div",{className:"flex items-center gap-2 text-gray-800 font-medium",children:[a.jsx(Qt,{})," ",Se.first_name," ",Se.last_name]},Se.id)):"Unassigned"})]})]}),!["sales","manager"].includes(pe.toLowerCase())&&a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsxs("button",{onClick:()=>O(c),className:"bg-blue-500 text-white px-4 py-2 rounded flex items-center gap-2",children:[a.jsx(pn,{})," Edit"]}),a.jsxs("button",{onClick:()=>de(c),className:"bg-red-500 text-white px-4 py-2 rounded flex items-center gap-2",children:[a.jsx(jt,{})," Delete"]})]})]})}),m&&a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg w-full max-w-xl p-6 relative",children:[a.jsx("button",{className:"absolute top-4 right-4",onClick:()=>fe(),children:a.jsx(St,{size:22})}),a.jsx("h2",{className:"text-xl font-semibold text-center mb-6",children:_?"Edit Territory":"Create Territory"}),a.jsxs("form",{className:"space-y-4",onSubmit:ce,children:[a.jsx(vMe,{label:"Territory Name",name:"name",value:C.name,onChange:Pe,required:!0}),a.jsx(wMe,{label:"Territory Manager",name:"manager_id",value:C.manager_id,onChange:Pe,options:[{value:"",label:"Assign Manager"},...w.map(Se=>({value:String(Se.id),label:`${Se.first_name} ${Se.last_name}`}))]}),a.jsx(bMe,{label:"Assign Users",placeholder:"Search and select users...",options:w.map(Se=>({value:String(Se.id),label:`${Se.first_name} ${Se.last_name}`})),selectedValues:C.user_ids,onChange:$}),a.jsx(NMe,{label:"Description",name:"description",value:C.description,onChange:Pe}),a.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[a.jsx("button",{type:"button",onClick:()=>fe(),className:"px-4 py-2 bg-red-400 text-white rounded",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:A,className:"px-4 py-2 bg-tertiary text-white rounded",children:A?"Saving...":"Save Territory"})]})]})]})}),a.jsx(Et,{className:"mt-4",totalItems:ye.length,pageSize:M==="board"?Gy:Vy,currentPage:ue,onPrev:We,onNext:Ke,label:"territories"}),q&&a.jsx(jMe,{open:!0,title:q.title,message:q.message,confirmLabel:q.confirmLabel,cancelLabel:q.cancelLabel,variant:q.variant,onConfirm:Ce,onCancel:Ee,loading:K})]})})}function vMe({label:e,name:t,value:n,onChange:r,placeholder:s,type:i="text",required:o=!1,disabled:l=!1}){return a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("input",{type:i,name:t,value:n??"",onChange:r,placeholder:s,required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-gray-400 outline-none disabled:bg-gray-100"})]})}function wMe({label:e,name:t,value:n,onChange:r,options:s,disabled:i=!1}){return a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:n??"",onChange:r,disabled:i,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm bg-white focus:ring-2 focus:ring-gray-400 outline-none disabled:bg-gray-100",children:s.map(o=>a.jsx("option",{value:o.value,children:o.label},o.value))})]})}function NMe({label:e,name:t,value:n,onChange:r,placeholder:s,rows:i=3,disabled:o=!1}){return a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:r,placeholder:s,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-gray-400 outline-none disabled:bg-gray-100"})]})}function jMe({open:e,title:t,message:n,confirmLabel:r,cancelLabel:s="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:s}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":r})]})]})})}const CMe=10,SMe=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"}],_Me=e=>e?String(e).toUpperCase():"",Mm=e=>{const t=_Me(e);return t==="PLANNED"||t==="PENDING"?"PLANNED":t==="HELD"||t==="COMPLETED"?"HELD":t==="NOT HELD"||t==="NOT_HELD"||t==="CANCELLED"?"NOT_HELD":"PLANNED"},u_=e=>{const t=Mm(e);return t==="PLANNED"?"PLANNED":t==="HELD"?"HELD":t==="NOT_HELD"?"NOT HELD":"--"},G7=e=>{switch(Mm(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},V7=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function W7(){const[e,t]=g.useState(!1),[n,r]=g.useState(null),[s,i]=g.useState(null),[o,l]=g.useState(null),[c,d]=g.useState(null),[m,h]=g.useState([]),[p,b]=g.useState(null),[v,x]=g.useState(!1),[w,j]=g.useState(null),[C,S]=g.useState(!1),[_,E]=g.useState(!1),[A,T]=g.useState("PLANNED"),[R,U]=g.useState(!1),[W,I]=g.useState(!1),[M]=gr(),H=rt(),q=Xt(),K={subject:"",call_time:(()=>{const k=new Date,Z=k.getFullYear(),re=String(k.getMonth()+1).padStart(2,"0"),be=String(k.getDate()).padStart(2,"0");return`${Z}-${re}-${be}T08:00`})(),duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[B,X]=g.useState(K);g.useEffect(()=>{const k=q.state?.openCallModal,Z=q.state?.initialCallData?.relatedTo1||M.get("id");(k||Z)&&(t(!0),q.state?.initialCallData&&X(re=>({...re,...q.state.initialCallData})),Z&&X(re=>({...re,relatedTo1:Z})),H(q.pathname,{replace:!0,state:{}}))},[q,M,H]);const le=async()=>{try{I(!0);const k=await oe.get("/calls/admin/fetch-all"),re=[...Array.isArray(k.data)?k.data:[]].sort((be,z)=>{const ee=be?.created_at?new Date(be.created_at):0;return(z?.created_at?new Date(z.created_at):0)-ee});h(re)}catch(k){console.error("Error fetching calls:",k),Q.error("Failed to load calls")}finally{I(!1)}},ue=async()=>{try{const k=await oe.get("/users/all");b(k.data)}catch(k){console.error("Error fetching users: ",k)}};g.useEffect(()=>{ue(),le()},[]);const J=[],ne="",pe="Filter by Status",we="Filter by Users",ye=1,Te=m,Ae=m,Pe=m.length,$=m.filter(k=>Mm(k.status)==="PLANNED").length,Ne=m.filter(k=>Mm(k.status)==="HELD").length,fe=m.filter(k=>Mm(k.status)==="NOT_HELD").length,O=[{title:"Total",value:Pe,icon:fr,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:$,icon:Za,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:Ne,icon:Fn,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:fe,icon:hr,color:"text-gray-600",bgColor:"bg-gray-100"}],[ce,de]=g.useState("Overview"),Ce=k=>{const{name:Z,value:re}=k.target;X(be=>{const z={...be,[Z]:re};return Z==="relatedType1"&&(z.relatedTo1="",re==="Lead"?(z.relatedType2=null,z.relatedTo2=null,d([])):re==="Account"&&(z.relatedType2="Contact")),Z==="relatedType2"&&(z.relatedTo2=""),z})};g.useEffect(()=>{const k=async()=>{try{l([]);let Z;B.relatedType1==="Lead"?Z=await oe.get("/leads/admin/getLeads"):B.relatedType1==="Account"&&(Z=await oe.get("/accounts/admin/fetch-all")),Z&&Array.isArray(Z.data)?l(Z.data):l([])}catch(Z){console.error("Error fetching data:",Z),l([])}};B.relatedType1&&k()},[B.relatedType1]),g.useEffect(()=>{const k=async()=>{try{d([]);let Z;if(B.relatedType1==="Account"&&B.relatedTo1)B.relatedType2==="Contact"?Z=await oe.get(`/contacts/from-acc/${B.relatedTo1}`):B.relatedType2==="Deal"&&(Z=await oe.get(`/deals/from-acc/${B.relatedTo1}`));else{d([]);return}Z&&Array.isArray(Z.data)?d(Z.data):d([])}catch(Z){console.error("Error fetching data:",Z),d([])}};B.relatedType2&&k()},[B.relatedType2,B.relatedTo1,B.relatedType1]);const Ee=k=>{if(k.preventDefault(),!B.assigned_to){Q.error("Please assign the call to a user.");return}const Z={...B,duration_minutes:B.duration_minutes?parseInt(B.duration_minutes,10):null,relatedTo1:B.relatedTo1?parseInt(B.relatedTo1,10):null,relatedTo2:B.relatedType1==="Lead"?null:B.relatedTo2?parseInt(B.relatedTo2,10):null,relatedType2:B.relatedType1==="Lead"?null:B.relatedType2,assigned_to:B.assigned_to?parseInt(B.assigned_to,10):null},re=v&&w?"update":"create",be=(B.subject||"").trim()||"Untitled Call";i({title:re==="create"?"Confirm New Call":"Confirm Update",message:re==="create"?`Create "${be}"?`:`Save changes to "${be}"?`,confirmLabel:re==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:re,payload:Z,targetId:w||null,name:be}})},Ge=k=>r(k),Je=()=>{t(!1),x(!1),j(null)},We=async()=>{if(!s?.action){i(null);return}const{action:k}=s,{type:Z,payload:re,targetId:be,name:z}=k;E(!0);try{if(Z==="create")S(!0),await oe.post("/calls/create",re),Q.success(`Call "${z}" created successfully.`),t(!1),X(K),x(!1),j(null),await le();else if(Z==="update"){if(!be)throw new Error("Missing call identifier for update.");S(!0),await oe.put(`/calls/${be}`,re),Q.success(`Call "${z}" updated successfully.`),t(!1),X(K),x(!1),j(null),await le()}else if(Z==="delete"){if(!be)throw new Error("Missing call identifier for deletion.");await oe.delete(`/calls/${be}`),Q.success(`Call "${z}" deleted successfully.`),n?.id===be&&r(null),await le()}}catch(ee){const ie=Z==="create"?"Failed to create call. Please review the details and try again.":Z==="update"?"Failed to update call. Please review the details and try again.":"Failed to delete call. Please try again.",V=ee?.response?.data?.detail||ie;Q.error(V)}finally{(Z==="create"||Z==="update")&&S(!1),E(!1),i(null)}},Ke=()=>{_||i(null)},He=async()=>{if(n?.id)try{U(!0),await oe.put(`/calls/${n.id}`,{status:A}),Q.success(`Status updated to ${u_(A)}`),h(k=>Array.isArray(k)?k.map(Z=>Z.id===n.id?{...Z,status:A}:Z):k),r(null)}catch(k){const Z=k.response?.data?.detail||"Failed to update status.";Q.error(Z)}finally{U(!1)}};g.useEffect(()=>{n&&T(Mm(n.status))},[n]);const Se=n?a.jsxs("div",{id:"callModalBackdrop",onClick:k=>k.target.id==="callModalBackdrop"&&r(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[W&&a.jsx(yt,{message:"Loading call details..."}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),a.jsx("button",{onClick:()=>r(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:a.jsx(wn,{size:25})})]}),a.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:n.subject}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${G7(n.status)}`,children:u_(n.status)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const k=ee=>{if(!ee)return"";const ie=new Date(ee),V=ie.getFullYear(),F=String(ie.getMonth()+1).padStart(2,"0"),se=String(ie.getDate()).padStart(2,"0"),xe=String(ie.getHours()).padStart(2,"0"),ge=String(ie.getMinutes()).padStart(2,"0");return`${V}-${F}-${se}T${xe}:${ge}`},Z=n.lead?"Lead":n.account?"Account":"Lead",re=n.lead?n.lead.id:n.account?n.account.id:null,be=Z==="Lead"?null:n.contact?"Contact":n.deal?"Deal":"Contact",z=Z==="Lead"?null:n.contact?n.contact.id:n.deal?n.deal.id:null;X({subject:n.subject||"",call_time:k(n.call_time),duration_minutes:n.duration_minutes?String(n.duration_minutes):"",direction:n.direction||"Outgoing",status:n.status||"Planned",notes:n.notes||"",relatedType1:Z,relatedType2:be,relatedTo1:re?String(re):"",relatedTo2:z?String(z):"",assigned_to:n.call_assign_to?.id?String(n.call_assign_to.id):""}),x(!0),j(n.id),r(null),t(!0)},children:[a.jsx(Rn,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>{const k=n.subject||"this call";i({title:"Delete Call",message:`Are you sure you want to permanently delete "${k}"? This action cannot be undone.`,confirmLabel:"Delete Call",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:n.id,name:k}})},children:[a.jsx(jt,{className:"mr-2"}),"Delete"]})]})]})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(k=>a.jsx("button",{onClick:()=>de(k),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${ce===k?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:k},k))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[ce==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsx(Lo,{label:"Call Time",value:V7(n.call_time)}),a.jsx(Lo,{label:"Duration",value:n.duration_minutes?`${n.duration_minutes} min`:null}),a.jsx(Lo,{label:"Direction",value:n.direction||"--"}),a.jsx(Lo,{label:"Assigned To",value:`${n.call_assign_to.first_name} ${n.call_assign_to.last_name}`}),n.lead&&a.jsx(Lo,{label:"Lead",value:n.lead.title}),n.account&&a.jsx(Lo,{label:"Account",value:n.account.name}),n.contact&&a.jsx(Lo,{label:"Contact",value:`${n.contact.first_name} ${n.contact.last_name}`}),n.deal&&a.jsx(Lo,{label:"Deal",value:n.deal.name}),a.jsx(Lo,{label:"Created At",value:V7(n.created_at)})]})}),ce==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Call Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:n.notes||"No notes available."})]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:A,onChange:k=>T(k.target.value),children:[a.jsx("option",{value:"PLANNED",children:"PLANNED"}),a.jsx("option",{value:"HELD",children:"HELD"}),a.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),a.jsx("button",{onClick:He,disabled:R,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:R?"Updating...":"Update"})]})]})]})]})]}):null,Ve=e?a.jsx("div",{id:"modalBackdrop",onClick:k=>k.target.id==="modalBackdrop"&&Je(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[a.jsx("button",{onClick:Je,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(St,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:v?"Edit Call":"Add New Call"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:Ee,children:[a.jsx(EMe,{label:"Subject",className:"md:col-span-2",name:"subject",value:B.subject,onChange:Ce,disabled:C,required:!0}),a.jsxs("div",{className:"w-full flex flex-col",children:[a.jsxs("select",{name:"relatedType1",onChange:Ce,value:B.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:C||v,children:[a.jsx("option",{value:"Lead",children:"Lead"}),a.jsx("option",{value:"Account",children:"Account"})]}),a.jsx(m_,{items:Array.isArray(o)?o:[],value:B.relatedTo1??"",placeholder:`Search ${B.relatedType1||"here"}...`,getLabel:k=>B.relatedType1==="Lead"?k.title:k.name??"",onChange:k=>X(Z=>({...Z,relatedTo1:k})),disabled:C||v})]}),a.jsxs("div",{className:"w-full flex flex-col",children:[a.jsxs("select",{name:"relatedType2",onChange:Ce,value:B.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:B.relatedType1==="Lead"||C||v,children:[a.jsx("option",{value:"Contact",children:"Contact"}),a.jsx("option",{value:"Deal",children:"Deal"})]}),a.jsx(m_,{disabled:B.relatedType1==="Lead"||C||v,items:Array.isArray(c)?c:[],value:B.relatedTo2??"",placeholder:B.relatedType1==="Lead"?"":Array.isArray(c)&&c.length>0?`Search ${B.relatedType2||"Contact"}...`:`No ${B.relatedType2||""} data found`,getLabel:k=>B.relatedType2==="Contact"?`${k.first_name??""} ${k.last_name??""}`.trim():k.name??"",onChange:k=>X(Z=>({...Z,relatedTo2:k}))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),a.jsx("input",{type:"datetime-local",value:B.call_time,onChange:Ce,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),a.jsxs("div",{className:"w-full",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),a.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[a.jsx("input",{type:"tel",value:B.duration_minutes,onChange:Ce,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),a.jsx("p",{children:"minutes"})]})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Assign To"}),a.jsx(m_,{items:Array.isArray(p)?p:[],value:B.assigned_to??"",placeholder:"Search an account...",getLabel:k=>`${k.first_name} ${k.last_name}`,onChange:k=>X(Z=>({...Z,assigned_to:k}))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),a.jsxs("select",{name:"direction",onChange:Ce,value:B.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[a.jsx("option",{value:"Incoming",children:"Incoming"}),a.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),a.jsxs("select",{name:"status",onChange:Ce,value:B.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[a.jsx("option",{value:"Planned",children:"Planned"}),a.jsx("option",{value:"Held",children:"Held"}),a.jsx("option",{value:"Not held",children:"Not held"})]})]}),a.jsx(TMe,{className:"col-span-2",label:"Notes",value:B.notes,onChange:Ce,name:"notes"}),a.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[a.jsx("button",{type:"button",onClick:Je,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:C,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:C?"Saving...":v?"Update Call":"Save Call"})]})]})]})}):null;return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(fr,{className:"mr-2 text-blue-600"})," Calls"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{X(K),x(!1),j(null),t(!0)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(Rt,{className:"mr-2"})," Add Call"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:O.map(k=>a.jsx(AMe,{...k},k.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[a.jsx(bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",defaultValue:ne})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[a.jsxs("select",{defaultValue:pe,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[a.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),SMe.map(k=>a.jsx("option",{value:k.value,children:k.label},k.value))]}),a.jsxs("select",{defaultValue:we,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[a.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),J.map(k=>a.jsx("option",{value:k.name,children:k.name},k.id))]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Subject"}),a.jsx("th",{className:"py-3 px-4",children:"Related To"}),a.jsx("th",{className:"py-3 px-4",children:"Call Time"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),a.jsx("tbody",{children:W?a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"py-10",children:a.jsx(yt,{message:"Loading calls..."})})}):Ae.length>0?Ae.map(k=>a.jsxs("tr",{onClick:()=>Ge(k),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[a.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:k.subject||"--"}),a.jsxs("td",{className:"py-3 px-4",children:[k.lead&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:k.lead.title}),k.account&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:k.account.name}),k.contact&&a.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[k.contact.first_name," ",k.contact.last_name]}),k.deal&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:k.deal.name})]}),a.jsx("td",{className:"py-3 px-4 text-gray-800",children:k.call_time?new Date(k.call_time).toLocaleString():"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800",children:k?.call_assign_to?`${k.call_assign_to.first_name} ${k.call_assign_to.last_name}`:"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${G7(k.status)}`,children:u_(k.status)})})]},k.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),a.jsx(Et,{totalItems:Te.length,pageSize:CMe,currentPage:ye,onPrev:()=>{},onNext:()=>{},label:"calls"})]}),Se,Ve,s&&a.jsx(LMe,{open:!0,title:s.title,message:s.message,confirmLabel:s.confirmLabel,onConfirm:We,onCancel:Ke,loading:_})]})}function AMe({icon:e,title:t,value:n,color:r,bgColor:s}){return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[a.jsx("div",{className:`p-3 rounded-full ${s} ${r} mr-4`,children:a.jsx(e,{size:22})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function EMe(e){return a.jsxs("div",{className:e.className,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),a.jsx("input",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]})}function TMe(e){return a.jsxs("div",{className:e.className,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),a.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function Lo({label:e,value:t}){return a.jsxs("p",{children:[a.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",a.jsx("br",{}),a.jsx("span",{className:"break-words",children:t||"--"})]})}function LMe({open:e,title:t,message:n,confirmLabel:r,cancelLabel:s="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:s}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":r})]})]})})}function m_({items:e=[],value:t="",onChange:n,getLabel:r,placeholder:s="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=g.useState(!1),[d,m]=g.useState(""),h=g.useRef(null),p=e.find(x=>String(x.id)===String(t)),b=p?r(p):"",v=g.useMemo(()=>{const x=d.trim().toLowerCase();return(x?e.filter(j=>(r(j)||"").toLowerCase().includes(x)):e).slice(0,o)},[e,d,r,o]);return g.useEffect(()=>{const x=w=>{h.current&&!h.current.contains(w.target)&&c(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]),g.useEffect(()=>{l||m("")},[l]),a.jsxs("div",{ref:h,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:l?d:b,placeholder:s,onFocus:()=>!i&&c(!0),onChange:x=>{m(x.target.value),l||c(!0)},className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:v.length>0?v.map(x=>{const w=String(x.id),j=r(x),C=String(t)===w;return a.jsx("button",{type:"button",onClick:()=>{n(w),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${C?"bg-blue-50":""}`,children:j||"--"},w)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const wj=({onClose:e,formData:t,setFormData:n,isEditing:r=!1,onSubmit:s,isSubmitting:i=!1,users:o=[]})=>{const c=(()=>{const _=new Date,E=_.getFullYear(),A=String(_.getMonth()+1).padStart(2,"0"),T=String(_.getDate()).padStart(2,"0");return{startTime:`${E}-${A}-${T}T08:00`,endTime:`${E}-${A}-${T}T09:00`}})(),[d,m]=g.useState({subject:"",startTime:c.startTime,endTime:c.endTime,location:"",status:"Planned",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:"Contact",relatedTo2:""}),[h,p]=g.useState([]),[b,v]=g.useState([]);g.useEffect(()=>{t!==void 0&&n&&(!t.startTime||!t.endTime)&&n(_=>({..._,startTime:_.startTime||c.startTime,endTime:_.endTime||c.endTime}))},[]);const x=t!==void 0?t:d,w=n||m,{userRole:j}=er();g.useEffect(()=>{const _=async()=>{try{p([]);let E;x.relatedType1==="Lead"?E=await oe.get("/leads/admin/getLeads"):x.relatedType1==="Account"&&(E=await oe.get("/accounts/admin/fetch-all"));let A=[];if(E&&Array.isArray(E.data)&&(A=E.data),r&&x.relatedTo1)try{let T;x.relatedType1==="Lead"?T=await oe.get(`/leads/get/${x.relatedTo1}`):x.relatedType1==="Account"&&(T=await oe.get(`/accounts/get/${x.relatedTo1}`)),T&&T.data&&(A.some(U=>String(U.id)===String(x.relatedTo1))||(A=[T.data,...A]))}catch(T){console.error("Error fetching specific related item:",T)}p(A)}catch(E){console.error("Error fetching relatedTo1 data:",E),p([])}};x.relatedType1&&_()},[x.relatedType1,j,r,x.relatedTo1]),g.useEffect(()=>{const _=async()=>{try{if(v([]),x.relatedType1==="Account"&&x.relatedTo1){let E;x.relatedType2==="Contact"?E=await oe.get(`/contacts/from-acc/${x.relatedTo1}`):x.relatedType2==="Deal"&&(E=await oe.get(`/deals/from-acc/${x.relatedTo1}`)),E&&Array.isArray(E.data)?v(E.data):v([])}else v([])}catch(E){console.error("Error fetching relatedTo2 data:",E),v([])}};x.relatedType2&&_()},[x.relatedType2,x.relatedTo1,x.relatedType1]);const C=_=>{const{name:E,value:A}=_.target;w(T=>{const R={...T,[E]:A};return E==="relatedType1"&&(T.relatedType1!==A&&(R.relatedTo1=""),A==="Lead"?(R.relatedType2=null,R.relatedTo2=null,v([])):A==="Account"&&(R.relatedType2="Contact",R.relatedTo2="")),E==="relatedType2"&&T.relatedType2!==A&&(R.relatedTo2=""),R})},S=_=>{if(_.preventDefault(),x.status==="--"){Q.warn("Please select a valid status.");return}s?s(x):(console.log("Meeting Scheduled:",x),e())};return a.jsx("div",{id:"modalBackdrop",onClick:_=>_.target.id==="modalBackdrop"&&e(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-60 p-2 sm:p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-3 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[a.jsx("button",{onClick:e,className:"absolute top-3 right-3 sm:top-4 sm:right-4 text-gray-500 hover:text-black transition",children:a.jsx(St,{size:22})}),a.jsx("h2",{className:"text-lg sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 text-center",children:r?"Edit Meeting":"Schedule Meeting"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4 text-sm",onSubmit:S,children:[a.jsx(Wy,{label:"Subject",name:"subject",value:x.subject,onChange:C,placeholder:"e.g. Meeting with Client",required:!0,disabled:i,className:"md:col-span-2"}),a.jsxs("div",{className:"flex flex-col w-full",children:[a.jsxs("select",{name:"relatedType1",onChange:C,value:x.relatedType1||"Lead",className:"w-full outline-none cursor-pointer mb-1 rounded p-2 text-gray-700 disabled:text-gray-400",disabled:i,children:[a.jsx("option",{value:"Lead",children:"Lead"}),a.jsx("option",{value:"Account",children:"Account"})]}),a.jsx(f_,{items:Array.isArray(h)?h:[],disabled:i,value:x.relatedTo1??"",placeholder:`Search ${x.relatedType1||"here"}...`,getLabel:_=>x.relatedType1==="Lead"?_.title:_.name??"",onChange:_=>w(E=>({...E,relatedTo1:_}))})]}),a.jsxs("div",{className:"flex flex-col w-full",children:[a.jsxs("select",{name:"relatedType2",onChange:C,value:x.relatedType2||"Contact",className:"w-full outline-none cursor-pointer mb-1 rounded p-2 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:i||x.relatedType1==="Lead",children:[a.jsx("option",{value:"Contact",children:"Contact"}),a.jsx("option",{value:"Deal",children:"Deal"})]}),a.jsx(f_,{items:Array.isArray(b)?b:[],value:x.relatedTo2??"",placeholder:x.relatedType1==="Lead"?"":b?.length?`Search ${x.relatedType2}...`:`No ${x.relatedType2} data found`,getLabel:_=>x.relatedType2==="Contact"?`${_.first_name??""} ${_.last_name??""}`.trim():_.name??"",onChange:_=>w(E=>({...E,relatedTo2:_})),disabled:x.relatedType1==="Lead"})]}),a.jsx(Wy,{label:"Location",name:"location",className:"md:col-span-2",value:x.location,onChange:C,disabled:i}),a.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[a.jsx(Wy,{label:"Start Time",name:"startTime",type:"datetime-local",value:x.startTime,onChange:C,required:!0,disabled:i}),a.jsx(Wy,{label:"End Time",name:"endTime",type:"datetime-local",value:x.endTime,onChange:C,required:!0,disabled:i})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Assign To"}),a.jsx(f_,{items:Array.isArray(o)?o:[],value:x.assignedTo??"",placeholder:"Search an account...",getLabel:_=>`${_.first_name} ${_.last_name}`,onChange:_=>w(E=>({...E,assignedTo:_}))})]}),a.jsx(kMe,{label:"Status",name:"status",value:x.status,onChange:C,options:["--","Planned","Held","Not held"].map(_=>({value:_,label:_.replace("_"," ")})),disabled:i}),a.jsx(PMe,{label:"Notes",name:"notes",value:x.notes,onChange:C,rows:3,className:"md:col-span-2",disabled:i}),a.jsxs("div",{className:"md:col-span-2 flex flex-col sm:flex-row justify-end gap-2 mt-4",children:[a.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":r?"Update Meeting":"Save Meeting"})]})]})]})})};function Wy({label:e,name:t,value:n,onChange:r,placeholder:s,type:i="text",required:o=!1,disabled:l=!1,className:c=""}){return a.jsxs("div",{className:c,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("input",{type:i,name:t,value:n??"",onChange:r,placeholder:s,required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]})}function kMe({label:e,name:t,value:n,onChange:r,options:s,required:i=!1,disabled:o=!1,className:l=""}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:n??"",onChange:r,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:s.map(c=>a.jsx("option",{value:c.value,children:c.label},c.value))})]})}function PMe({label:e,name:t,value:n,onChange:r,placeholder:s,required:i=!1,disabled:o=!1,className:l="",rows:c=3}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:r,placeholder:s,required:i,disabled:o,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function f_({items:e=[],value:t="",onChange:n,getLabel:r,placeholder:s="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=g.useState(!1),[d,m]=g.useState(""),h=g.useRef(null),p=e.find(x=>String(x.id)===String(t)),b=p?r(p):"",v=g.useMemo(()=>{const x=d.trim().toLowerCase();return(x?e.filter(j=>(r(j)||"").toLowerCase().includes(x)):e).slice(0,o)},[e,d,r,o]);return g.useEffect(()=>{const x=w=>{h.current&&!h.current.contains(w.target)&&c(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]),g.useEffect(()=>{l||m("")},[l]),a.jsxs("div",{ref:h,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:l?d:b,placeholder:s,onFocus:()=>!i&&c(!0),onChange:x=>{m(x.target.value),l||c(!0)},className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:v.length>0?v.map(x=>{const w=String(x.id),j=r(x),C=String(t)===w;return a.jsx("button",{type:"button",onClick:()=>{n(w),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${C?"bg-blue-50":""}`,children:j||"--"},w)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const Nc=({meeting:e,onClose:t,onEdit:n,onDelete:r,onStatusUpdate:s})=>{rt();const[i,o]=g.useState("Overview"),l=v=>{const x=(v||"").toUpperCase();return x==="PLANNED"||x==="IN PROGRESS"?"PLANNED":x==="HELD"||x==="DONE"?"HELD":x==="NOT HELD"?"NOT_HELD":"PLANNED"},c=v=>{const x=(v||"").toUpperCase();return x==="PLANNED"?"PLANNED":x==="HELD"?"HELD":x==="NOT HELD"||x==="NOT_HELD"?"NOT HELD":"PENDING"},[d,m]=g.useState(l(e?.status||"PENDING")),[h,p]=g.useState(!1);if(!e)return null;const b=v=>{const x=(v||"").toUpperCase(),w=x==="PLANNED"?"PENDING":x==="HELD"?"COMPLETED":x==="NOT_HELD"?"CANCELLED":x;switch(x){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:switch(w){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}}};return a.jsx(a.Fragment,{children:a.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Meeting"}),a.jsx("button",{onClick:t,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:a.jsx(wn,{size:25})})]}),a.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:e.subject||"Meeting"}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${b(l(e.status))}`,children:l(e.status||"PENDING").replace("_"," ")})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{type:"button",onClick:()=>{n&&n(e)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[a.jsx(pn,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{type:"button",onClick:()=>{r&&r(e)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[a.jsx(jt,{className:"mr-2"}),"Delete"]})]})]})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(v=>a.jsx("button",{onClick:()=>o(v),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${i===v?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:v},v))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[i==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Start Time:"}),a.jsx("p",{children:e.start_time?new Date(e.start_time).toLocaleString():"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"End Time:"}),a.jsx("p",{children:e.end_time?new Date(e.end_time).toLocaleString():"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Meeting Title:"}),a.jsx("p",{children:e.subject||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Location:"}),a.jsx("p",{children:e.location||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsxs("p",{children:[e.meet_assign_to.first_name," ",e.meet_assign_to.last_name]})]}),e.lead&&a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Lead:"}),a.jsx("p",{children:e.lead.title})]}),e.account&&a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Account:"}),a.jsx("p",{children:e.account.name})]}),e.contact&&a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Contact:"}),a.jsxs("p",{children:[e.contact.first_name," ",e.contact.last_name]})]}),e.deal&&a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Deal:"}),a.jsx("p",{children:e.deal.name})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Status:"}),a.jsx("p",{children:l(e.status||"PENDING").replace("_"," ")})]})]})}),i==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Meeting Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:e.notes||"No notes available."})]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:d,onChange:v=>m(v.target.value),children:[a.jsx("option",{value:"PLANNED",children:"PLANNED"}),a.jsx("option",{value:"HELD",children:"HELD"}),a.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),a.jsx("button",{onClick:async()=>{if(!s||!e?.id)return;const v=c(d);if(l(e.status)!==d){p(!0);try{await s(e.id,v)}catch(x){console.error("Failed to update status:",x)}finally{p(!1)}}},disabled:d===e.status||h,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${d===e.status||h?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:h?"Updating...":"Update"})]})]})]})]})})})},tQ=e=>e?e.toUpperCase():"",qy=e=>{const t=tQ(e);return t==="PLANNED"||t==="IN PROGRESS"?"PLANNED":t==="HELD"||t==="DONE"?"HELD":t==="NOT_HELD"||t==="NOT HELD"?"NOT_HELD":"PLANNED"},DMe=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},OMe=e=>{const t=tQ(e);switch(t==="PLANNED"?"PENDING":t==="HELD"?"COMPLETED":t==="NOT_HELD"?"CANCELLED":t){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},h_=10,g_={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},q7=()=>{const e=rt(),t=Xt(),[n]=gr(),r=n.get("id"),s=t.pathname==="/admin/meetings/info";g.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[i,o]=g.useState([]),[l,c]=g.useState(!1),[d,m]=g.useState([]),[h,p]=g.useState(""),[b,v]=g.useState("Filter by Status"),[x,w]=g.useState(!1),[j,C]=g.useState(null),[S,_]=g.useState(1),[E,A]=g.useState(g_),[T,R]=g.useState(!1),[U,W]=g.useState(null),[I,M]=g.useState(!1),[H,q]=g.useState(null),[ae,K]=g.useState(!1);g.useEffect(()=>{const $=t.state?.openMeetingModal,Ne=t.state?.initialMeetingData?.relatedTo||n.get("id");($||Ne)&&(w(!0),t.state?.initialMeetingData&&A(fe=>({...fe,...t.state.initialMeetingData})),e(t.pathname,{replace:!0,state:{}}))},[t,n,e]);const B=async()=>{if(r&&s){const $=sessionStorage.getItem("meetingDetailData");if($)try{const Ne=JSON.parse($);if(Ne.id===parseInt(r)){C(Ne),sessionStorage.removeItem("meetingDetailData");return}}catch(Ne){console.error(Ne)}}c(!0);try{const $=await oe.get("/meetings/admin/fetch-all"),fe=[...Array.isArray($.data)?$.data:[]].sort((O,ce)=>{const de=O?.createdAt?new Date(O.createdAt).getTime():0;return(ce?.createdAt?new Date(ce.createdAt).getTime():0)-de});if(o(fe),r&&!j){const O=fe.find(ce=>ce.id===parseInt(r));O&&C(O)}console.log($.data)}catch{Q.error("Failed to load meetings.")}finally{c(!1)}},X=async()=>{try{const $=await oe.get("/users/all");m(Array.isArray($.data)?$.data:[])}catch($){console.error($)}};g.useEffect(()=>{B(),X()},[]);const le=$=>p($.target.value),ue=g.useMemo(()=>{const $=h.trim().toLowerCase(),Ne=b.trim().toUpperCase();return i.filter(fe=>{const O=[fe?.activity,fe?.description,fe?.relatedTo,fe?.assignedTo],ce=$===""||O.some(Ce=>Ce&&Ce.toString().toLowerCase().includes($)),de=Ne==="FILTER BY STATUS"||qy(fe.status||"PENDING")===Ne;return ce&&de})},[i,h,b]),J=g.useMemo(()=>{const $=(S-1)*h_;return ue.slice($,$+h_)},[ue,S]),ne=()=>{w(!1),A(g_),R(!1),W(null),M(!1)},pe=()=>{A(g_),R(!1),W(null),w(!0)},we=$=>{let Ne="";if($.meet_assign_to?.id)Ne=String($.meet_assign_to.id);else if($.assignedTo){const We=d.find(Ke=>`${Ke.first_name} ${Ke.last_name}`===$.assignedTo);Ne=We?String(We.id):""}const fe=We=>{if(!We)return"";try{const Ke=new Date(We),He=Ke.getTimezoneOffset()*6e4;return new Date(Ke.getTime()-He).toISOString().slice(0,16)}catch{return""}};let O="Lead",ce="",de="Contact",Ce="";if($.lead)O="Lead",ce=String($.lead.id);else if($.account)O="Account",ce=String($.account.id),$.contact?(de="Contact",Ce=String($.contact.id)):$.deal&&(de="Deal",Ce=String($.deal.id));else if($.relatedType||$.related_type){const We=$.relatedType||$.related_type,Ke=$.related_to||$.relatedToId;We==="Lead"?(O="Lead",ce=String(Ke)):(O="Account",ce=$.account_id?String($.account_id):"")}const Ee={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},Ge=qy($.status),Je=Ee[Ge]||"Planned";A({subject:$.subject||$.activity||"",location:$.location||"",startTime:fe($.start_time||$.startTime),endTime:fe($.end_time||$.endTime),status:Je,notes:$.description||$.notes||"",assignedTo:Ne,relatedType1:O,relatedTo1:ce,relatedType2:de,relatedTo2:Ce}),R(!0),W($.id),C(null),w(!0)},ye=$=>{if(!$.subject?.trim())return Q.error("Subject is required.");if(!$.startTime)return Q.error("Start time is required.");if($.endTime&&!(new Date($.endTime)-new Date($.startTime)>0))return Q.error("End time must be after start time.");$.relatedType1,$.relatedTo1,$.relatedType1==="Account"&&$.relatedType2&&$.relatedTo2&&($.relatedType2,$.relatedTo2);const Ne={...$,assignedTo:parseInt($.assignedTo),relatedTo1:parseInt($.relatedTo1),relatedTo2:parseInt($.relatedTo2)},fe=T&&U?"update":"create";q({title:fe==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${fe} "${Ne.subject}"?`,confirmLabel:fe==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:fe,payload:Ne,targetId:U,name:Ne.subject}})},Te=async()=>{if(!H?.action)return;const{type:$,payload:Ne,targetId:fe,name:O}=H.action;console.log(Ne),K(!0);try{$==="create"?(M(!0),await oe.post("/meetings/create",Ne),Q.success(`Meeting "${O}" created.`),ne(),await B()):$==="update"?(M(!0),await oe.put(`/meetings/${fe}`,Ne),Q.success(`Meeting "${O}" updated.`),ne(),await B()):$==="delete"&&(await oe.delete(`/meetings/${fe}`),Q.success(`Meeting "${O}" deleted.`),j?.id===fe&&C(null),await B())}catch(ce){const de=ce.response?.data?.detail||"Action failed.";Q.error(typeof de=="string"?de:JSON.stringify(de)),console.error(de)}finally{M(!1),K(!1),q(null)}},Ae=$=>{q({title:"Delete Meeting",message:`Permanently delete "${$.activity}"?`,confirmLabel:"Delete",variant:"danger",action:{type:"delete",targetId:$.id,name:$.activity}})},Pe=async($,Ne)=>{try{await oe.put(`/meetings/${$}`,{status:Ne}),Q.success("Status updated"),B(),C(null)}catch{Q.error("Failed to update status")}};return s&&r?j?a.jsx(Nc,{meeting:j,onClose:()=>{C(null),e("/admin/dashboard")},onEdit:we,onDelete:Ae,onStatusUpdate:Pe}):a.jsx(yt,{message:"Loading meeting..."}):a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[l&&a.jsx(yt,{message:"Loading meetings..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[a.jsx(ft,{className:"mr-2 text-blue-600"})," Meetings"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:pe,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[a.jsx(Rt,{className:"mr-2"})," Add Meeting"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[a.jsx(bt,{className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search meetings",value:h,onChange:le,className:"w-full outline-none"})]}),a.jsxs("select",{value:b,onChange:$=>v($.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[a.jsx("option",{children:"Filter by Status"}),a.jsx("option",{value:"PLANNED",children:"PLANNED"}),a.jsx("option",{value:"HELD",children:"HELD"}),a.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Subject"}),a.jsx("th",{className:"py-3 px-4",children:"Related To"}),a.jsx("th",{className:"py-3 px-4",children:"Start Time"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned"}),a.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),a.jsx("tbody",{children:J.length>0?J.map($=>a.jsxs("tr",{onClick:()=>C($),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[a.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:$.subject}),a.jsxs("td",{className:"py-3 px-4",children:[$.lead&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:$.lead.title}),$.account&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:$.account.name}),$.contact&&a.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[$.contact.first_name," ",$.contact.last_name]}),$.deal&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:$.deal.name})]}),a.jsx("td",{className:"py-3 px-4",children:DMe($.start_time)}),a.jsxs("td",{className:"py-3 px-4",children:[$.meet_assign_to.first_name," ",$.meet_assign_to.last_name]}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${OMe(qy($.status))}`,children:qy($.status).replace("_"," ")})})]},$.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),a.jsx(Et,{totalItems:ue.length,pageSize:h_,currentPage:S,onPrev:()=>_($=>Math.max(1,$-1)),onNext:()=>_($=>$+1),label:"meetings"}),x&&a.jsx(wj,{onClose:ne,formData:E,setFormData:A,isEditing:T,onSubmit:ye,isSubmitting:I||ae,users:d}),j&&a.jsx(Nc,{meeting:j,onClose:()=>C(null),onEdit:we,onDelete:Ae,onStatusUpdate:Pe}),H&&a.jsx(MMe,{open:!0,title:H.title,message:H.message,confirmLabel:H.confirmLabel,variant:H.variant,onConfirm:Te,onCancel:()=>q(null),loading:ae})]})};function MMe({open:e,title:t,message:n,confirmLabel:r,cancelLabel:s="Cancel",variant:i="primary",loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{onClick:c,disabled:o,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),a.jsx("button",{onClick:l,disabled:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${d}`,children:o?"...":r})]})]})})}function IMe({toggleSidebar:e}){const[t,n]=g.useState(!1),[r,s]=g.useState(!1),[i,o]=g.useState([]),[l,c]=g.useState(0),d=g.useRef(null),m=g.useRef(null),h=Xt(),p=rt(),{logout:b}=er(),{user:v,fetchUser:x}=Ut(),j={"/sales/overview":"Overview","/sales/hub":"Sales Hub","/sales/accounts":"Accounts","/sales/contacts":"Contacts","/sales/leads":"Leads","/sales/deals":"Deals","/sales/quotes":"Quotes","/sales/targets":"Targets","/sales/reports":"Reports","/sales/tasks":"Tasks"}[h.pathname]||"Sales Panel";g.useEffect(()=>{x()},[]);const C=A=>{const T=String(A.action||A.type||"").toLowerCase(),R=String(A.title||A.description||"").toLowerCase(),U=T.includes("create"),W=T.includes("update");return R.includes("task")?"task_assignment":R.includes("territory")?"territory_assignment":R.includes("lead")?U?"lead_assignment":"lead_update":R.includes("contact")?U?"contact_assignment":"contact_update":R.includes("deal")?U?"deal_assignment":"deal_update":R.includes("account")?U?"account_assignment":"account_update":"info"},S=A=>{const T={...A};switch(T.read=!!T.read,T.type){case"territory_assignment":T.title=T.title||`You have been assigned to ${T.territoryName||"a territory"}`;break;case"lead_assigned":T.type="lead_assignment",T.title=T.title||`New lead assigned: ${T.leadName||T.company||"Lead"}`;break;case"lead_assignment":T.title=T.title||`New lead assigned: ${T.leadName||T.company||"Lead"}`;break;case"lead_update":T.title=T.title||`Lead updated: ${T.leadName||T.company||"Lead"}`;break;case"task_assignment":T.title=T.title||`New Task Assigned: ${T.taskTitle||"Task"}`;break;case"contact_assignment":T.title=T.title||`New contact assigned: ${T.contactName||T.contact||"Contact"}`;break;case"contact_update":T.title=T.title||`Contact updated: ${T.contactName||T.contact||"Contact"}`;break;case"deal_assignment":T.title=T.title||`New deal assigned: ${T.dealName||T.name||"Deal"}`;break;case"deal_update":T.title=T.title||`Deal updated: ${T.dealName||T.name||"Deal"}`;break;case"account_assignment":T.title=T.title||`New account assigned: ${T.accountName||T.name||"Account"}`;break;case"account_update":T.title=T.title||`Account updated: ${T.accountName||T.name||"Account"}`;break;default:T.title=T.title||"New Notification"}return T},_=A=>{switch(A.type){case"task_assignment":p(`/sales/hub/${A.taskId||A.task_id||""}`);break;case"lead_assignment":case"lead_update":p(`/sales/leads/${A.leadId||A.lead_id||""}`);break;case"contact_assignment":case"contact_update":p(`/sales/contacts/${A.contactId||A.contact_id||""}`);break;case"deal_assignment":case"deal_update":p(`/sales/deals/${A.dealId||A.deal_id||""}`);break;case"account_assignment":case"account_update":p(`/sales/accounts/${A.accountId||A.account_id||""}`);break;default:p("/sales/overview")}},E=async A=>{if(A.read){_(A);return}try{await oe.patch(`/logs/mark-read/${A.id}`),o(T=>T.map(R=>R.id===A.id?{...R,read:!0}:R)),c(T=>T>0?T-1:0),_(A)}catch(T){console.error("Failed to mark notification as read",T),_(A)}};return g.useEffect(()=>{if(!v?.id)return;const A=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",T=window.location.protocol==="https:"?"wss:":"ws:",R=A?"localhost:8000":window.location.host,U=`${T}//${R}/ws/notifications?user_id=${v.id}`,W=new WebSocket(U);return W.onopen=()=>console.log("WS Connected to:",U),W.onmessage=I=>{const M=JSON.parse(I.data),H=S(M);o(q=>[H,...q]),c(q=>q+1)},W.onclose=()=>console.log("WS Disconnected"),W.onerror=I=>console.error("WS Error",I),()=>W.close()},[v?.id]),g.useEffect(()=>{const A=async()=>{try{const R=((await oe.get("/logs/read-all")).data||[]).map(U=>S({id:U.id,type:U.notif_type||U.notification_type||U.type||C(U),title:U.title||U.description,assignedBy:U.assignedBy||U.name,createdAt:U.createdAt||U.timestamp,read:U.is_read??U.read??!1,leadId:U.leadId||U.lead_id,taskId:U.taskId||U.task_id,contactId:U.contactId||U.contact_id,dealId:U.dealId||U.deal_id,accountId:U.accountId||U.account_id}));o(R),c(R.filter(U=>!U.read).length)}catch(T){console.error("Failed to load history notifications",T)}};v?.id&&A()},[v?.id]),g.useEffect(()=>{function A(T){d.current&&!d.current.contains(T.target)&&n(!1),m.current&&!m.current.contains(T.target)&&s(!1)}return document.addEventListener("mousedown",A),()=>document.removeEventListener("mousedown",A)},[]),a.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:a.jsx(Yp,{className:"text-2xl"})}),a.jsx("h1",{className:"text-lg sm:text-xl font-semibold text-gray-800 truncate max-w-[150px] sm:max-w-none",children:j})]}),a.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[a.jsxs("div",{className:"relative",ref:m,children:[a.jsxs("button",{onClick:()=>s(!r),className:"relative text-gray-600 hover:text-gray-800 transition",children:[a.jsx(Wp,{className:"text-xl sm:text-2xl"}),l>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] w-4 h-4 flex items-center justify-center rounded-full font-semibold",children:l})]}),r&&a.jsxs("div",{className:"absolute right-0 mt-3 w-80 bg-white rounded-xl shadow-lg border z-50 overflow-hidden animate-fade-in",children:[a.jsxs("div",{className:"p-3 border-b bg-gray-50 flex justify-between items-center",children:[a.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:"Notifications"}),i.length>0&&a.jsx("button",{onClick:()=>{o([]),c(0)},className:"text-xs text-blue-600 hover:underline",children:"Clear all"})]}),a.jsx("div",{className:"max-h-80 overflow-y-auto",children:i.length>0?i.map((A,T)=>a.jsxs("div",{onClick:()=>E(A),className:`p-4 border-b hover:bg-gray-50 cursor-pointer transition ${A.read?"bg-gray-50":"bg-white"}`,children:[a.jsxs("div",{className:"flex justify-between items-center mb-1",children:[a.jsx("span",{className:`text-[10px] px-2 py-1 rounded-full font-semibold uppercase
                            ${A.type==="task_assignment"?"bg-purple-100 text-purple-700":A.type==="lead_assignment"||A.type==="lead_update"?"bg-green-100 text-green-700":A.type==="contact_assignment"||A.type==="contact_update"?"bg-amber-100 text-amber-700":A.type==="deal_assignment"||A.type==="deal_update"?"bg-indigo-100 text-indigo-700":A.type==="account_assignment"||A.type==="account_update"?"bg-cyan-100 text-cyan-700":A.type==="territory_assignment"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:A.type==="task_assignment"?"Task":A.type==="lead_assignment"?"Lead":A.type==="lead_update"?"Lead Update":A.type==="contact_assignment"?"Contact":A.type==="contact_update"?"Contact Update":A.type==="deal_assignment"?"Deal":A.type==="deal_update"?"Deal Update":A.type==="account_assignment"?"Account":A.type==="account_update"?"Account Update":A.type==="territory_assignment"?"Territory":"Info"}),!A.read&&a.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"font-medium text-gray-800 text-sm",children:A.title}),a.jsx("span",{className:"text-xs text-gray-600 mt-0.5",children:A.assignedBy?`Assigned by ${A.assignedBy}`:"System"}),a.jsx("span",{className:"text-[11px] text-gray-400 mt-1",children:A.createdAt?new Date(A.createdAt).toLocaleString():""})]})]},A.id??T)):a.jsx("div",{className:"p-6 text-center text-gray-500 text-sm",children:"No new notifications"})})]})]}),a.jsxs("div",{className:"relative",ref:d,children:[a.jsxs("button",{onClick:()=>n(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[a.jsx("img",{src:v?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 aspect-square object-cover rounded-full"}),a.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[v?.first_name," ",v?.last_name]})]}),t&&a.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4",children:[a.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[a.jsx("img",{src:v?.profile_picture||"https://via.placeholder.com/80",alt:"Profile",className:"w-16 h-16 rounded-full object-cover"}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[v?.first_name," ",v?.middle_name," ",v?.last_name]}),a.jsx("p",{className:"text-[11px] text-gray-600 font-light w-full truncate",children:"Sales"})]})]}),a.jsxs("div",{className:"mt-4 space-y-1 px-4 text-left",children:[a.jsx("button",{className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-2 rounded text-left",onClick:()=>{p("/sales/manage-account"),n(!1)},children:"Manage Your Account"}),a.jsx("div",{className:"border-t border-gray-200 my-2"}),a.jsx("button",{onClick:b,className:"block w-full text-sm text-red-600 hover:text-red-700 hover:bg-gray-50 py-2 rounded text-left",children:"Logout"})]})]})]})]})]})}function $Me(){const[e,t]=g.useState(!1),[n,r]=g.useState(!1),{user:s}=Ut();g.useEffect(()=>{s&&console.log("Fetched user:",s)},[s]);const i="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",o="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition";return a.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[a.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
        ${e?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[a.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[a.jsxs("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:[" Sari-Sari.CRM"," ",a.jsx("span",{className:"text-[12px] text-gray-700 font-medium align-bottom",children:"v2"})]}),s&&s.company&&a.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:s.company.company_name})]}),a.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[a.jsxs(st,{to:"/sales/overview",className:({isActive:l})=>l?i:o,children:[a.jsx(qp,{className:"text-lg"}),a.jsx("span",{children:"Overview"})]}),a.jsxs(st,{to:"/sales/hub",className:({isActive:l})=>l?i:o,children:[a.jsx(Sae,{className:"text-lg"}),a.jsx("span",{children:"Sales Hub"})]}),a.jsxs(st,{to:"/sales/accounts",className:({isActive:l})=>l?i:o,children:[a.jsx(en,{className:"text-lg"}),a.jsx("span",{children:"Accounts"})]}),a.jsxs(st,{to:"/sales/contacts",className:({isActive:l})=>l?i:o,children:[a.jsx(Qt,{className:"text-lg"}),a.jsx("span",{children:"Contacts"})]}),a.jsxs(st,{to:"/sales/leads",className:({isActive:l})=>l?i:o,children:[a.jsx(Ln,{className:"text-lg"}),a.jsx("span",{children:"Leads"})]}),a.jsxs(st,{to:"/sales/deals",className:({isActive:l})=>l?i:o,children:[a.jsx($n,{className:"text-lg"}),a.jsx("span",{children:"Deals"})]}),a.jsxs(st,{to:"/sales/quotes",className:({isActive:l})=>l?i:o,children:[a.jsx(Br,{className:"text-lg"}),a.jsx("span",{children:"Quotes"})]}),a.jsxs(st,{to:"/sales/targets",className:({isActive:l})=>l?i:o,children:[a.jsx(ms,{className:"text-lg"}),a.jsx("span",{children:"Targets"})]}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>r(!n),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(mr,{className:"text-lg"}),"Activity"]}),a.jsx(Rr,{className:`transition-transform ${n?"rotate-180":""}`})]}),n&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(st,{to:"/sales/tasks",className:({isActive:l})=>l?i:o,children:[a.jsx(kn,{})," Tasks"]}),a.jsxs(st,{to:"/sales/meetings",className:({isActive:l})=>l?i:o,children:[a.jsx(ft,{})," Meetings"]}),a.jsxs(st,{to:"/sales/calls",className:({isActive:l})=>l?i:o,children:[a.jsx(fr,{})," Calls"]}),a.jsxs(st,{to:"/sales/audit",className:({isActive:l})=>l?i:o,children:[a.jsx(mr,{})," Audit"]})]})]}),a.jsx("div",{children:a.jsx(st,{to:"/sales/territory",className:({isActive:l})=>l?i:o,children:a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(_c,{className:"text-lg"}),"Territory"]})})}),a.jsxs(st,{to:"/sales/manage-account",className:({isActive:l})=>l?i:o,children:[a.jsx(Qt,{className:"text-lg"}),a.jsx("span",{children:"Manage Account"})]})]}),a.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),e&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>t(!1)}),a.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[a.jsx(IMe,{toggleSidebar:()=>t(!0)}),a.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:a.jsx(yf,{})})]})]})}function RMe(){g.useEffect(()=>{document.title="SalesOverview | Sari-Sari CRM"},[]);const{user:e,loading:t}=Ut(),[n,r]=g.useState({contacts:0,leads:0,calls_today:0,target_progress:0}),[s,i]=g.useState([]);return g.useEffect(()=>{(async()=>{try{const l=await oe.get("/sales/overview");r(l.data)}catch(l){console.error("Error fetching sales overview:",l)}})()},[]),g.useEffect(()=>{(async()=>{if(e)try{const l=await oe.get("/territories/myterritory");i(l.data)}catch(l){console.error("Error fetching territories:",l)}})()},[e]),t?a.jsx("p",{className:"text-gray-500",children:"Loading user data..."}):a.jsxs("div",{className:"space-y-10",children:[a.jsxs("div",{className:"flex items-center mb-8",children:[a.jsx(Qt,{className:"text-2xl text-gray-700 mr-2"}),a.jsx("h1",{className:"text-2xl font-semibold text-gray-800",children:"SALES Dashboard"})]}),a.jsxs("div",{className:"bg-white shadow-sm rounded-lg p-6 grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Full Name"}),a.jsxs("p",{className:"font-medium text-gray-900",children:[e?.first_name," ",e?.last_name]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Last Login"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ft,{className:"text-gray-600"}),a.jsx("p",{className:"font-medium text-gray-900",children:e?.last_login?new Date(e.last_login).toLocaleString("en-PH",{timeZone:"Asia/Manila",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"N/A"})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Date Joined"}),a.jsx("p",{className:"font-medium text-gray-900",children:e?.created_at?new Date(e.created_at).toLocaleDateString():"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),a.jsx("p",{className:"font-medium text-gray-900",children:e?.email})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Territories"}),a.jsx("div",{className:"flex flex-col gap-2",children:s.length>0?s.map(o=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Aae,{className:"text-gray-600"}),a.jsx("p",{className:"font-medium text-gray-900",children:o.name})]},o.id)):a.jsx("p",{className:"font-medium text-gray-900",children:"No territories assigned"})})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),a.jsx("span",{className:"bg-black text-white text-xs font-semibold px-3 py-1 rounded-full",children:e?.is_active?"Active":"Inactive"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md flex flex-col items-center",children:[a.jsx(en,{className:"text-blue-600 text-3xl mb-2"}),a.jsx("p",{className:"text-sm text-gray-500",children:"My Contacts"}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n.contacts??0})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md flex flex-col items-center",children:[a.jsx(ms,{className:"text-green-600 text-3xl mb-2"}),a.jsx("p",{className:"text-sm text-gray-500",children:"My Leads"}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n.leads??0})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md flex flex-col items-center",children:[a.jsx(fr,{className:"text-orange-500 text-3xl mb-2"}),a.jsx("p",{className:"text-sm text-gray-500",children:"My Calls Today"}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n.calls_today??0})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md flex flex-col items-center",children:[a.jsx(Bs,{className:"text-purple-600 text-3xl mb-2"}),a.jsx("p",{className:"text-sm text-gray-500",children:"My Target Progress"}),a.jsxs("p",{className:"text-2xl font-bold text-gray-800",children:[n.target_progress??0,"%"]})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Recent Activities"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mt-2"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-800 font-medium",children:"Deal moved to negotiation: TechStart Inc."}),a.jsx("p",{className:"text-sm text-gray-500",children:"1 hour ago"})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-800 font-medium",children:"Follow-up call scheduled with Global Solutions"}),a.jsx("p",{className:"text-sm text-gray-500",children:"3 hours ago"})]})]})]})]})]})}function zMe({isOpen:e,onClose:t}){const[n,r]=g.useState(""),[s,i]=g.useState("Call"),[o,l]=g.useState("Medium"),[c,d]=g.useState(""),[m,h]=g.useState("Lead"),[p,b]=g.useState(""),[v,x]=g.useState(""),w=j=>{j.preventDefault(),console.log({title:n,type:s,priority:o,dueDate:c,relatedTo:m,description:p,notes:v}),t()};return a.jsx(ir,{appear:!0,show:e,as:g.Fragment,children:a.jsxs(Ro,{as:"div",className:"relative z-50",onClose:t,children:[a.jsx(ir.Child,{as:g.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:a.jsx("div",{className:"fixed inset-0 bg-black/40"})}),a.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:a.jsx(ir.Child,{as:g.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-150",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-6 lg:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh]",children:[a.jsx("button",{onClick:t,"aria-label":"Close modal",className:"absolute top-3 right-3 p-2 text-2xl leading-none rounded-full text-gray-500 hover:text-black hover:bg-gray-100 transition",children:""}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:"Create New Task"}),a.jsxs("form",{onSubmit:w,className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Title *"}),a.jsx("input",{type:"text",value:n,onChange:j=>r(j.target.value),required:!0,placeholder:"Enter task title",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Description"}),a.jsx("textarea",{value:p,onChange:j=>b(j.target.value),placeholder:"Optional details about the task",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",rows:3})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Type"}),a.jsxs("select",{value:s,onChange:j=>i(j.target.value),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",children:[a.jsx("option",{children:"Call"}),a.jsx("option",{children:"Email"}),a.jsx("option",{children:"Meeting"}),a.jsx("option",{children:"Follow-up"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Priority"}),a.jsxs("select",{value:o,onChange:j=>l(j.target.value),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",children:[a.jsx("option",{children:"Low"}),a.jsx("option",{children:"Medium"}),a.jsx("option",{children:"High"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Due Date *"}),a.jsx("input",{type:"datetime-local",value:c,onChange:j=>d(j.target.value),required:!0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Related To"}),a.jsxs("select",{value:m,onChange:j=>h(j.target.value),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",children:[a.jsx("option",{children:"Lead"}),a.jsx("option",{children:"Account"}),a.jsx("option",{children:"Deal"}),a.jsx("option",{children:"Contact"})]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),a.jsx("textarea",{value:v,onChange:j=>x(j.target.value),placeholder:"Add any internal notes or comments",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",rows:3})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[a.jsx("button",{type:"button",onClick:t,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition",children:"Create Task"})]})]})]})})})]})})}function UMe(){const[e,t]=g.useState(!1);return a.jsxs("div",{className:"p-6 min-h-screen hide-scrollbar",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx(ms,{className:"text-blue-600"})," Sales Dashboard"]}),a.jsx("p",{className:"text-gray-600 text-sm",children:"Manage your leads, tasks, and sales activities"})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("button",{onClick:()=>t(!0),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base ml-auto sm:ml-0 cursor-pointer",children:[a.jsx(Rt,{className:"text-lg"})," New Task"]}),a.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base ml-auto sm:ml-0 cursor-pointer",children:[a.jsx(Bs,{className:"text-lg"})," Log Activity"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[a.jsxs("div",{className:"p-4 bg-white rounded-xl shadow-md border-l-4 border-blue-500",children:[a.jsx("p",{className:"text-gray-500 text-sm mb-2",children:"Target Progress"}),a.jsx("h2",{className:"text-2xl font-bold",children:"0%"}),a.jsx("div",{className:"mt-2 w-full bg-gray-200 h-2 rounded-full",children:a.jsx("div",{className:"bg-blue-500 h-2 rounded-full w-0"})})]}),a.jsxs("div",{className:"p-4 bg-white rounded-xl shadow-md border-l-4 border-green-500",children:[a.jsx("p",{className:"text-gray-500 text-sm mb-2",children:"Revenue (Won)"}),a.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-1",children:[a.jsx(Cc,{})," 0"]}),a.jsx("p",{className:"text-sm text-gray-400",children:"0 won deals"})]}),a.jsxs("div",{className:"p-4 bg-white rounded-xl shadow-md border-l-4 border-purple-500",children:[a.jsx("p",{className:"text-gray-500 text-sm mb-2",children:"Active Deals"}),a.jsx("h2",{className:"text-2xl font-bold",children:"2"}),a.jsx("p",{className:"text-sm text-gray-400",children:"2 leads in pipeline"})]}),a.jsxs("div",{className:"p-4 bg-white rounded-xl shadow-md border-l-4 border-orange-500",children:[a.jsx("p",{className:"text-gray-500 text-sm mb-2",children:"Tasks Today"}),a.jsx("h2",{className:"text-2xl font-bold",children:"0"}),a.jsx("p",{className:"text-sm text-gray-400",children:"1 pending task"})]})]}),a.jsxs("div",{className:"flex space-x-3 mb-6",children:[a.jsx(st,{to:"/sales/hub/mytasks",className:({isActive:n})=>`px-4 py-2 rounded-full text-sm font-medium ${n?"bg-tertiary text-white":"text-gray-600 hover:bg-gray-100"}`,children:"My Tasks"}),a.jsx(st,{to:"/sales/hub/activities",className:({isActive:n})=>`px-4 py-2 rounded-full text-sm font-medium ${n?"bg-tertiary text-white":"text-gray-600 hover:bg-gray-100"}`,children:"Activities"}),a.jsx(st,{to:"/sales/hub/pipeline",className:({isActive:n})=>`px-4 py-2 rounded-full text-sm font-medium ${n?"bg-tertiary text-white":"text-gray-600 hover:bg-gray-100"}`,children:"My Pipeline"}),a.jsx(st,{to:"/sales/hub/performance",className:({isActive:n})=>`px-4 py-2 rounded-full text-sm font-medium ${n?"bg-tertiary text-white":"text-gray-600 hover:bg-gray-100"}`,children:"Performance"})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4",children:a.jsx(yf,{})}),a.jsx(zMe,{isOpen:e,onClose:()=>t(!1)})]})}function FMe(){const e=[{id:1,type:"call",title:"Discovery call with Acme Corp",status:"COMPLETED",description:"Discussed requirements and pain points",outcome:"Positive - moving to proposal stage",duration:"30 min",date:"10/12/2025",account:"Acme Enterprise License"},{id:2,type:"email",title:"Pricing information request",status:"COMPLETED",description:"Sent detailed pricing breakdown for enterprise package",date:"10/12/2025",contact:"Emma Wilson"}];return a.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 min-h-[80vh] p-6 rounded-lg",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("h1",{className:"text-xl font-semibold flex items-center gap-2 text-gray-800",children:[a.jsx("span",{className:"text-purple-600",children:""})," Sales Activities"]}),a.jsxs("div",{className:"flex items-center gap-2 bg-white shadow-sm border rounded-lg px-3 py-2 cursor-pointer hover:bg-gray-50",children:[a.jsx(Cae,{className:"text-gray-500"}),a.jsx("span",{className:"text-sm text-gray-700",children:"All Time "})]})]}),a.jsx("div",{className:"space-y-4",children:e.map(t=>a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-5 border border-gray-100 flex flex-col gap-3 hover:shadow-md transition",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[t.type==="call"?a.jsx(pt,{className:"text-green-600 text-xl"}):a.jsx(Tn,{className:"text-green-600 text-xl"}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[t.title,a.jsx("span",{className:"text-xs bg-green-100 text-green-700 font-medium px-2 py-0.5 rounded-full",children:t.status})]}),a.jsx("p",{className:"text-gray-600 text-sm",children:t.description})]})]}),a.jsxs("div",{className:"flex gap-3 text-lg text-gray-500",children:[a.jsx("button",{className:"hover:text-blue-600",children:a.jsx(pn,{})}),a.jsx("button",{className:"hover:text-red-600",children:a.jsx(jt,{})})]})]}),t.outcome&&a.jsxs("div",{className:"bg-green-50 border border-green-100 text-green-700 text-sm px-4 py-2 rounded-lg flex items-center gap-2",children:[" Outcome: ",t.outcome]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-500",children:[t.duration&&a.jsxs("p",{className:"flex items-center gap-1",children:[" ",t.duration]}),a.jsxs("p",{className:"flex items-center gap-1",children:[" ",t.date]}),t.account&&a.jsxs("p",{className:"flex items-center gap-1",children:[" ",t.account]}),t.contact&&a.jsxs("p",{className:"flex items-center gap-1",children:[" ",t.contact]})]})]},t.id))})]})}function BMe(){g.useEffect(()=>{document.title="Saleshub | Sari-Sari CRM"},[]);const[e,t]=g.useState([]),[n,r]=g.useState([]),[s,i]=g.useState([]),[o,l]=g.useState(null),[c,d]=g.useState({title:"",description:"",type:"Call",priority:"MEDIUM",status:"To Do",dueDate:"",assignedTo:"",relatedTo:"",notes:""}),[m,h]=g.useState(!1),[p,b]=g.useState(null),[v,x]=g.useState(!1),[w,j]=g.useState("All Tasks"),[C,S]=g.useState(!1),_=new Date,E=K=>K.dueDate&&new Date(K.dueDate)<_&&K.status!=="Completed",A=async()=>{try{const B=(await oe.get("/tasks/assigned")).data.sort((X,le)=>{const ue=new Date(X.dueDate||X.dateAssigned);return new Date(le.dueDate||le.dateAssigned)-ue});t(B),r(B)}catch(K){console.error("Error fetching tasks:",K)}},T=async()=>{try{const K=await oe.get("/sales");i(K.data)}catch(K){console.error("Error fetching sales list:",K)}};g.useEffect(()=>{A(),T()},[]);const R=K=>{if(j(K),K==="All Tasks")r(e);else{const B=e.filter(X=>X.status===K);r(B)}S(!1)},U=K=>{l(K),d({title:K.title||"",description:K.description||"",type:K.type||"Call",priority:K.priority||"MEDIUM",status:K.status||"To Do",dueDate:K.dueDate||"",assignedTo:K.assignedTo||"",relatedTo:K.relatedTo||"",notes:K.notes||""})},W=K=>{d({...c,[K.target.name]:K.target.value})},I=K=>{K.preventDefault(),x(!0)},M=async()=>{try{await oe.put(`/tasks/${o.id}`,c),A(),l(null),x(!1)}catch(K){console.error("Error updating task:",K)}},H=async()=>{try{await oe.delete(`/tasks/${p.id}`),A(),h(!1),b(null)}catch(K){console.error("Error deleting task:",K)}},q={HIGH:"bg-orange-100 text-orange-700",MEDIUM:"bg-yellow-100 text-yellow-700",LOW:"bg-green-100 text-green-700"},ae=["All Tasks","To Do","In Progress","Completed"];return a.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 min-h-[80vh] p-6 rounded-lg",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2 text-blue-700",children:[a.jsx(Za,{className:"text-blue-600"})," My Tasks & Follow-ups"]}),a.jsxs("div",{className:"relative w-full max-w-3xs",children:[a.jsx("div",{className:"flex items-center w-full gap-2 bg-white shadow-sm border rounded-lg px-3 py-2 cursor-pointer hover:bg-gray-50",onClick:()=>S(!C),children:a.jsxs("span",{className:"text-sm text-gray-700",children:[w," "]})}),C&&a.jsx("div",{className:"absolute mt-1 w-full bg-white border border-gray-300 rounded-lg shadow-md z-10",children:ae.map(K=>a.jsx("div",{className:"px-3 py-2 hover:bg-gray-100 w-full cursor-pointer text-sm text-gray-700",onClick:()=>R(K),children:K},K))})]})]}),a.jsx("div",{className:"space-y-4",children:Array.isArray(n)&&n.length>0?n.map(K=>a.jsxs("div",{className:`rounded-xl shadow-sm p-5 flex flex-col gap-3 hover:shadow-md transition
                ${E(K)?"bg-red-50 border border-red-200":"bg-white border border-gray-100"}`,children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(pt,{className:"text-blue-600 text-xl"}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[K.title,a.jsx("span",{className:`text-xs font-medium px-2 py-0.5 rounded-full ${E(K)?"bg-red-100 text-red-700":q[K.priority]}`,children:K.priority})]}),a.jsx("p",{className:"text-gray-600 text-sm",children:K.description})]})]}),a.jsxs("div",{className:"flex gap-3 text-lg text-gray-500",children:[a.jsx("button",{className:"hover:text-blue-600",onClick:()=>U(K),children:a.jsx(pn,{})}),a.jsx("button",{className:"hover:text-red-600",onClick:()=>{b(K),h(!0)},children:a.jsx(jt,{})})]})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm",children:[a.jsxs("p",{className:`flex items-center gap-1 ${E(K)?"text-red-600 font-medium":"text-gray-500"}`,children:[" ",K.dueDate?.split("T")[0]]}),a.jsxs("p",{className:"text-gray-500 flex items-center gap-1",children:[" ",K.assignedTo]}),a.jsxs("p",{className:"text-gray-500 flex items-center gap-1",children:[" ",K.type]})]})]},K.id)):a.jsx("p",{className:"text-gray-500 text-sm text-center",children:"No tasks assigned yet."})}),a.jsx(ir,{appear:!0,show:!!o,as:g.Fragment,children:a.jsxs(Ro,{as:"div",className:"relative z-50",onClose:()=>l(null),children:[a.jsx(ir.Child,{as:g.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm"})}),a.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 overflow-y-auto",children:a.jsx("div",{className:"flex min-h-full items-center justify-center text-center",children:a.jsx(ir.Child,{as:g.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-150",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:a.jsxs(Ro.Panel,{className:"w-full max-w-xl rounded-2xl bg-white shadow-2xl ring-1 ring-gray-100 p-6 text-left align-middle transform transition-all max-h-[90vh] flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-start gap-4 mb-4",children:[a.jsx("div",{children:a.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Edit Task"})}),a.jsx("button",{onClick:()=>l(null),"aria-label":"Close modal",className:"text-gray-400 hover:text-gray-600 transition text-xl leading-none",children:""})]}),a.jsxs("form",{onSubmit:I,className:"space-y-5 overflow-y-auto pr-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Title *"}),a.jsx("input",{type:"text",name:"title",value:c.title,onChange:W,required:!0,placeholder:"Enter task title",className:"w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Description"}),a.jsx("textarea",{name:"description",value:c.description,onChange:W,placeholder:"Enter task description",rows:2,className:"w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Type"}),a.jsxs("select",{name:"type",value:c.type,onChange:W,className:"w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{children:"Call"}),a.jsx("option",{children:"Meeting"}),a.jsx("option",{children:"Email"}),a.jsx("option",{children:"Follow-up"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Priority"}),a.jsxs("select",{name:"priority",value:c.priority,onChange:W,className:"w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{children:"Low"}),a.jsx("option",{children:"Medium"}),a.jsx("option",{children:"High"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Status"}),a.jsxs("select",{name:"status",value:c.status,onChange:W,className:"w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{children:"To Do"}),a.jsx("option",{children:"In Progress"}),a.jsx("option",{children:"Completed"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Due Date *"}),a.jsx("input",{type:"datetime-local",name:"dueDate",value:c.dueDate,onChange:W,required:!0,className:"w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Assign To"}),a.jsxs("select",{name:"assignedTo",value:c.assignedTo,onChange:W,className:"w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Select sales representative"}),s.map(K=>a.jsxs("option",{value:K.id,children:[K.first_name," ",K.last_name]},K.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Related To"}),a.jsxs("select",{name:"relatedTo",value:c.relatedTo,onChange:W,className:"w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Select type"}),a.jsx("option",{children:"Lead"}),a.jsx("option",{children:"Opportunity"}),a.jsx("option",{children:"Customer"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Notes"}),a.jsx("textarea",{name:"notes",value:c.notes,onChange:W,placeholder:"Additional notes...",rows:2,className:"w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t mt-6",children:[a.jsx("button",{type:"button",onClick:()=>l(null),className:"px-4 py-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50 transition",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 focus:ring-2 focus:ring-blue-400 transition",children:"Update Task"})]})]})]})})})})]})}),a.jsx(ir,{appear:!0,show:v,as:g.Fragment,children:a.jsxs(Ro,{as:"div",className:"relative z-50",onClose:()=>x(!1),children:[a.jsx(ir.Child,{as:g.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm"})}),a.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:a.jsx(ir.Child,{as:g.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-150",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:a.jsxs(Ro.Panel,{className:"w-full max-w-sm rounded-2xl bg-white shadow-2xl ring-1 ring-gray-100 p-6 text-center transform transition-all",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Confirm Update"}),a.jsx("p",{className:"text-gray-600 text-sm mb-6",children:"Are you sure you want to update this task?"}),a.jsxs("div",{className:"flex justify-center gap-3",children:[a.jsx("button",{onClick:()=>x(!1),className:"px-4 py-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50 transition",children:"Cancel"}),a.jsx("button",{onClick:M,className:"px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 transition",children:"Confirm"})]})]})})})]})}),a.jsx(ir,{appear:!0,show:m,as:g.Fragment,children:a.jsxs(Ro,{as:"div",className:"relative z-50",onClose:()=>h(!1),children:[a.jsx(ir.Child,{as:g.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm"})}),a.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:a.jsx(ir.Child,{as:g.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-150",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:a.jsxs(Ro.Panel,{className:"w-full max-w-sm rounded-2xl bg-white shadow-2xl ring-1 ring-gray-100 p-6 text-center transform transition-all",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Delete Task"}),a.jsxs("p",{className:"text-gray-600 text-sm mb-6",children:["Are you sure you want to delete this task? ",a.jsx("br",{}),"This action cannot be undone."]}),a.jsxs("div",{className:"flex justify-center gap-3",children:[a.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50 transition",children:"Cancel"}),a.jsx("button",{onClick:H,className:"px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 transition",children:"Delete"})]})]})})})]})})]})}function HMe(){return a.jsx("div",{className:"p-6 bg-gradient-to-b from-blue-50 to-white rounded-2xl",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-green-50 border border-green-100 rounded-2xl shadow-sm",children:[a.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-green-100",children:[a.jsxs("h2",{className:"text-green-700 font-semibold flex items-center gap-2",children:[a.jsx(en,{})," My Leads"]}),a.jsx("span",{className:"bg-green-100 text-green-700 text-xs px-2 py-1 rounded-full font-medium",children:"2"})]}),a.jsxs("div",{className:"p-4 space-y-3",children:[a.jsxs("div",{className:"bg-white border border-green-100 rounded-xl p-4 hover:shadow-md transition",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:"Emma Wilson"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Startup Ventures"})]}),a.jsxs("p",{className:"text-xs text-gray-400 flex items-center gap-1",children:[a.jsx(Za,{})," 1/20/2024"]})]}),a.jsx("div",{className:"mt-3",children:a.jsx("span",{className:"text-xs font-medium bg-green-100 text-green-700 px-3 py-1 rounded-md",children:"QUALIFIED"})})]}),a.jsxs("div",{className:"bg-white border border-green-100 rounded-xl p-4 hover:shadow-md transition",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:"Robert Davis"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Manufacturing Plus"})]}),a.jsxs("p",{className:"text-xs text-gray-400 flex items-center gap-1",children:[a.jsx(Za,{})," 1/25/2024"]})]}),a.jsxs("div",{className:"mt-3 flex justify-between items-center",children:[a.jsx("span",{className:"text-xs font-medium bg-blue-50 text-blue-700 px-3 py-1 rounded-md",children:"NEW"}),a.jsx("button",{className:"bg-green-600 text-white text-xs px-3 py-1 rounded-lg hover:bg-green-700 transition",children:"Contact"})]})]})]})]}),a.jsxs("div",{className:"bg-yellow-50 border border-yellow-100 rounded-2xl shadow-sm",children:[a.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-yellow-100",children:[a.jsxs("h2",{className:"text-yellow-700 font-semibold flex items-center gap-2",children:[a.jsx(Cc,{})," My Deals"]}),a.jsx("span",{className:"bg-yellow-100 text-yellow-700 text-xs px-2 py-1 rounded-full font-medium",children:"2"})]}),a.jsxs("div",{className:"p-4 space-y-3",children:[a.jsxs("div",{className:"bg-white border border-yellow-100 rounded-xl p-4 hover:shadow-md transition",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:"Acme Enterprise License"}),a.jsx("p",{className:"text-sm text-gray-500",children:"$150,000"})]}),a.jsxs("p",{className:"text-xs text-gray-400 flex items-center gap-1",children:[a.jsx(Za,{})," 3/15/2024"]})]}),a.jsxs("div",{className:"mt-3 flex justify-between items-center",children:[a.jsx("span",{className:"text-xs font-medium bg-orange-100 text-orange-700 px-3 py-1 rounded-md",children:"NEGOTIATION"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-24 h-2 bg-gray-200 rounded-full",children:a.jsx("div",{className:"w-[75%] h-2 bg-gray-900 rounded-full"})}),a.jsx("span",{className:"text-xs text-gray-700",children:"75%"})]})]})]}),a.jsxs("div",{className:"bg-white border border-yellow-100 rounded-xl p-4 hover:shadow-md transition",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:"TechStart Cloud Migration"}),a.jsx("p",{className:"text-sm text-gray-500",children:"$75,000"})]}),a.jsxs("p",{className:"text-xs text-gray-400 flex items-center gap-1",children:[a.jsx(Za,{})," 2/28/2024"]})]}),a.jsxs("div",{className:"mt-3 flex justify-between items-center",children:[a.jsx("span",{className:"text-xs font-medium bg-blue-50 text-blue-700 px-3 py-1 rounded-md",children:"PROPOSAL"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-24 h-2 bg-gray-200 rounded-full",children:a.jsx("div",{className:"w-[60%] h-2 bg-gray-900 rounded-full"})}),a.jsx("span",{className:"text-xs text-gray-700",children:"60%"})]})]})]})]})]})]})})}function GMe(){return a.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-2xl shadow-sm p-6",children:[a.jsx("div",{className:"flex items-center justify-between mb-6",children:a.jsxs("h2",{className:"text-xl font-semibold text-gray-700 flex items-center gap-2",children:[a.jsx(Wd,{})," Sales Performance"]})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center text-gray-700",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(en,{className:"text-gray-400"})," Total Leads"]}),a.jsx("span",{className:"font-semibold",children:"2"})]}),a.jsxs("div",{className:"flex justify-between items-center text-green-600",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Fn,{})," Qualified Leads"]}),a.jsx("span",{className:"font-semibold",children:"1"})]}),a.jsxs("div",{className:"flex justify-between items-center text-blue-600",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Wd,{})," Active Deals"]}),a.jsx("span",{className:"font-semibold",children:"2"})]}),a.jsxs("div",{className:"flex justify-between items-center text-yellow-600",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Cc,{})," Won Deals"]}),a.jsx("span",{className:"font-semibold",children:"0"})]})]}),a.jsxs("div",{className:"mt-6 p-4 bg-green-50 rounded-xl flex justify-between items-center font-semibold text-green-700",children:[a.jsx("span",{children:"Total Revenue"}),a.jsx("span",{children:"$0"})]})]}),a.jsxs("div",{className:"bg-orange-50 border border-orange-100 rounded-2xl shadow-sm p-6",children:[a.jsx("div",{className:"flex items-center justify-between mb-6",children:a.jsxs("h2",{className:"text-xl font-semibold text-gray-700 flex items-center gap-2",children:[a.jsx(Fn,{})," Task Completion"]})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center text-green-600",children:[a.jsx("span",{children:"Completed Tasks"}),a.jsx("span",{className:"font-semibold",children:"0"})]}),a.jsxs("div",{className:"flex justify-between items-center text-orange-600",children:[a.jsx("span",{children:"Pending Tasks"}),a.jsx("span",{className:"font-semibold",children:"1"})]}),a.jsxs("div",{className:"flex justify-between items-center text-blue-600",children:[a.jsx("span",{children:"Tasks Today"}),a.jsx("span",{className:"font-semibold",children:"0"})]})]}),a.jsxs("div",{className:"mt-6",children:[a.jsxs("div",{className:"flex justify-between mb-1 text-sm font-medium text-orange-600",children:[a.jsx("span",{children:"Completion Rate"}),a.jsx("span",{children:"0%"})]}),a.jsx("div",{className:"w-full h-3 bg-gray-200 rounded-full",children:a.jsx("div",{className:"w-0 h-3 bg-orange-500 rounded-full"})})]})]})]})}const p_=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Active"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Former"}],x_={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"PROSPECT",territory_id:"",assigned_to:""},rs=e=>e?e.toUpperCase():"",y_=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",VMe=e=>{switch(rs(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},WMe=e=>{switch(rs(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}},nd=10;function qMe(){const e=rt();g.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[t,n]=g.useState(!1),[r,s]=g.useState(!1),[i,o]=g.useState(!1),[l,c]=g.useState(null),[d,m]=g.useState(null),[h,p]=g.useState(x_),[b,v]=g.useState(null),[x,w]=g.useState([]),[j,C]=g.useState(!1),[S,_]=g.useState([]),[E,A]=g.useState(null),[T,R]=g.useState([]),[U,W]=g.useState("Filter by Status"),[I,M]=g.useState(""),[H,q]=g.useState(null),[ae,K]=g.useState(!1),[B,X]=g.useState(1),[le,ue]=g.useState("Overview"),[J,ne]=g.useState(""),[pe,we]=g.useState(!1),ye=g.useCallback(async(P=null)=>{C(!0);try{const he=await oe.get("/accounts/admin/fetch-all"),te=[...Array.isArray(he.data)?he.data:[]].sort((ve,je)=>{const Ie=ve?.created_at||ve?.updated_at||0,tt=je?.created_at||je?.updated_at||0;return new Date(tt)-new Date(Ie)});if(w(te),console.log("Fetch from backend: ",he.data),P){const ve=te.find(je=>je.id===P);v(ve||null)}}catch(he){console.error(he),w([]),he.response?.status===403?Q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):Q.error("Failed to fetch accounts. Please try again later.")}finally{C(!1)}},[v]),Te=g.useCallback(async()=>{try{const P=await oe.get("/users/all");_(Array.isArray(P.data)?P.data:[])}catch(P){console.error(P),P.response?.status===403&&Q.warn("Unable to load users for assignment (permission denied).")}},[]),Ae=g.useCallback(async()=>{try{const P=await oe.get("/territories/fetch");R(Array.isArray(P.data)?P.data:[])}catch(P){console.error(P),P.response?.status===403&&Q.warn("Unable to load territories (permission denied).")}},[]);g.useEffect(()=>{ye(),Te(),Ae()},[ye,Te,Ae]),g.useEffect(()=>{b&&ne(rs(b.status)||"PROSPECT")},[b]);const Pe=x.length,$=g.useMemo(()=>x.filter(P=>P.status?.toLowerCase()==="customer").length,[x]),Ne=g.useMemo(()=>x.filter(P=>P.status?.toLowerCase()==="prospect").length,[x]),fe=g.useMemo(()=>x.filter(P=>P.status?.toLowerCase()==="partner").length,[x]),O=g.useMemo(()=>x.filter(P=>P.status?.toLowerCase()==="active").length,[x]),ce=g.useMemo(()=>x.filter(P=>P.status?.toLowerCase()==="inactive").length,[x]),de=g.useMemo(()=>x.filter(P=>P.status?.toLowerCase()==="former").length,[x]),Ce=g.useMemo(()=>[{title:"Total",value:Pe,icon:en,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:$,icon:Xi,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:Ne,icon:Ln,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:fe,icon:Qt,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:O,icon:Xi,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:ce,icon:Zi,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:de,icon:Zi,color:"text-orange-600",bgColor:"bg-orange-100"}],[Pe,$,Ne,fe,O,ce,de]),Ee=g.useMemo(()=>{const P=I.trim().toLowerCase(),he=U.trim().toUpperCase();return x.filter(G=>{const te=[G?.name,G?.website,G?.industry,G?.territory?.name,G?.phone_number],ve=P===""||te.some(Ie=>Ie==null?!1:Ie.toString().toLowerCase().includes(P)),je=he==="FILTER BY STATUS"||rs(G.status)===he;return ve&&je})},[x,I,U]),Ge=Math.max(1,Math.ceil(Ee.length/nd)||1);g.useEffect(()=>{X(1)},[I,U]),g.useEffect(()=>{X(P=>{const he=Math.max(1,Math.ceil(Ee.length/nd)||1);return P>he?he:P})},[Ee.length]);const Je=g.useMemo(()=>{const P=(B-1)*nd;return Ee.slice(P,P+nd)},[Ee,B]);Ee.length===0||(B-1)*nd+1,Math.min(B*nd,Ee.length);const We=()=>X(P=>Math.max(P-1,1)),Ke=()=>X(P=>Math.min(P+1,Ge)),He=P=>{v(P),ue("Overview"),ne(rs(P?.status)||"PROSPECT")},Se=()=>v(null),Ve=P=>{P.target.id==="accountModalBackdrop"&&!ae&&Se()},k=()=>{n(!1),s(!1),m(null),p(x_),o(!1),A(null)},Z=P=>{P.target.id==="modalBackdrop"&&k()},re=P=>P?new Date(P).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",be=P=>{const{name:he,value:G}=P.target;p(te=>({...te,[he]:G}))},z=()=>{p(x_),s(!1),m(null),n(!0)},ee=P=>{v(null),console.log("edit: ",P),P.assigned_accs?A(P.assigned_accs):A(null),p({name:P.name||"",website:P.website||"",phone_number:P.phone_number||"",billing_address:P.billing_address||"",shipping_address:P.shipping_address||"",industry:P.industry||"",status:rs(P.status)||"PROSPECT",territory_id:P.territory?.id?String(P.territory.id):"",assigned_to:P.assigned_accs?.id?String(P.assigned_accs.id):""}),s(!0),m(P.id),n(!0)},ie=P=>{P&&q({title:"Delete Account",message:a.jsxs("span",{children:["Are you sure you want to permanently delete the account"," ",a.jsx("span",{className:"font-semibold",children:P.name}),"? This action cannot be undone."]}),confirmLabel:"Delete Account",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:P.id,name:P.name}})},V=async()=>{if(!H?.action){q(null);return}const{action:P}=H,{type:he,payload:G,targetId:te,name:ve}=P;K(!0);try{if(he==="create"){o(!0);const je=await oe.post("/accounts/admin",G);Q.success(`Account "${ve}" created successfully.`);const Ie=b?.id||null;k(),await ye(Ie),!b&&je.data?.id}else if(he==="update"){if(!te)throw new Error("Missing account identifier for update.");o(!0),await oe.put(`/accounts/admin/${te}`,G),Q.success(`Account "${ve}" updated successfully.`);const je=b?.id&&b.id===te?te:null;k(),await ye(je),b?.id===te&&v(null)}else if(he==="delete"){if(!te)throw new Error("Missing account identifier for deletion.");const je=b?.id;c(te),await oe.delete(`/accounts/admin/${te}`),Q.success(`Account "${ve}" deleted successfully.`),await ye(je&&je!==te?je:null),je===te&&v(null)}}catch(je){console.error(je);const Ie=he==="create"?"Failed to create account. Please review the details and try again.":he==="update"?"Failed to update account. Please review the details and try again.":"Failed to delete account. Please try again.",tt=je.response?.data?.detail||Ie;Q.error(tt),(he==="create"||he==="update")&&o(!1),he==="delete"&&c(null)}finally{(he==="create"||he==="update")&&o(!1),he==="delete"&&c(null),K(!1),q(null)}},F=()=>{ae||q(null)},se=async()=>{if(!b||!J)return;const P=rs(J),he=rs(b.status);if(P!==he){we(!0);try{await oe.put(`/accounts/admin/${b.id}`,{status:P}),Q.success(`Account status updated to ${y_(P)}`),w(G=>G.map(te=>te.id===b.id?{...te,status:P}:te)),v(null)}catch(G){console.error(G);const te=G.response?.data?.detail||"Failed to update account status. Please try again.";Q.error(te)}finally{we(!1)}}},[xe,ge]=g.useState(!1),Me=P=>{P.preventDefault(),ge(!0);const he=h.name.trim();if(!he){Q.error("Account name is required.");return}if(!h.assigned_to){Q.error("Assigned To is required.");return}const te={name:he,website:h.website?.trim()||null,phone_number:h.phone_number?.trim()||null,billing_address:h.billing_address?.trim()||null,shipping_address:h.shipping_address?.trim()||null,industry:h.industry?.trim()||null,status:h.status||"PROSPECT",territory_id:h.territory_id?Number(h.territory_id):null,assigned_to:h.assigned_to?Number(h.assigned_to):null},ve=r&&d?"update":"create";q({title:ve==="create"?"Confirm New Account":"Confirm Update",message:ve==="create"?a.jsxs("span",{children:["Are you sure you want to create the account"," ",a.jsx("span",{className:"font-semibold",children:he}),"?"]}):a.jsxs("span",{children:["Save changes to the account"," ",a.jsx("span",{className:"font-semibold",children:he}),"?"]}),confirmLabel:ve==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:ve,payload:te,targetId:d||null,name:he}})},De=[{label:"Filter by Status",value:"Filter by Status"},...p_.map(P=>({label:P.label,value:P.value}))],et=H?.action?.type==="delete"?H.action.targetId:null,gt=b&&(l===b.id||et===b.id),Nt=b&&l===b.id,Pt=b?VMe(b.status):"",dn=b?a.jsx("div",{id:"accountModalBackdrop",onClick:Ve,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:P=>P.stopPropagation(),children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),a.jsx("button",{onClick:Se,className:"text-gray-400 hover:text-white cursor-pointer",children:a.jsx(wn,{size:25})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:b.name}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${Pt}`,children:y_(b.status)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>ee(b),disabled:H?.action?.type==="update"&&H.action.targetId===b.id,children:[a.jsx(Rn,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>ie(b),disabled:!!gt,children:Nt?"Deleting...":a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"mr-2"}),"Delete"]})})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(P=>a.jsx("button",{onClick:()=>ue(P),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${le===P?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:P},P))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[le==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Website:"}),a.jsx("p",{children:b.website?a.jsx("a",{href:b.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:b.website}):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Industry:"}),a.jsx("p",{children:b.industry||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Territory:"}),a.jsx("p",{children:b.territory?.name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Phone Number:"}),a.jsx("p",{children:b.phone_number||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Billing Address:"}),a.jsx("p",{children:b.billing_address||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),a.jsx("p",{children:b.shipping_address||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:b.assigned_accs?`${b.assigned_accs.first_name} ${b.assigned_accs.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:b.acc_creator?`${b.acc_creator.first_name} ${b.acc_creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:re(b.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:re(b.updated_at)||"N/A"})]})]})}),le==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:x.notes||"No notes available."})]})]}),le==="Activities"&&a.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:pt,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:ft,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((P,he)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[a.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-gray-600 mt-1",children:a.jsx(P.icon,{size:24})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-gray-900 break-words",children:P.title}),a.jsx("p",{className:"text-sm text-gray-500 break-words",children:P.desc}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),a.jsx("p",{className:"text-sm text-gray-700 break-words",children:P.user})]})]})]}),a.jsx("p",{className:"text-sm text-gray-500 break-words",children:P.date})]},he))]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Account"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(pt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Account"}}}),children:[a.jsx(ft,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Account"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(kn,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:J||rs(b?.status)||"PROSPECT",onChange:P=>ne(P.target.value),children:p_.map(P=>a.jsx("option",{value:P.value,children:P.label},P.value))}),a.jsx("button",{onClick:se,disabled:pe||!J||rs(J)===rs(b?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${pe||!J||rs(J)===rs(b?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:pe?"Updating...":"Update"})]})]})]})]})]})}):null,jn=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[j&&a.jsx(yt,{message:"Loading accounts..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(en,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{z(),ge(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(Rt,{className:"mr-2"})," Add Account"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ce.map(P=>a.jsx(YMe,{...P},P.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search accounts",value:I,onChange:P=>M(P.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:U,onChange:P=>W(P.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:De.map(P=>a.jsx("option",{value:P.value,children:P.label},P.value))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4",children:"Industry"}),a.jsx("th",{className:"py-3 px-4",children:"Territory"}),a.jsx("th",{className:"py-3 px-4",children:"Phone"})]})}),a.jsx("tbody",{children:j?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"Loading accounts..."})}):Ee.length>0?Je.map(P=>a.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>He(P),children:[a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:P.name}),a.jsx("div",{className:"text-gray-500 text-xs break-all",children:P.website||"--"})]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${WMe(P.status)}`,children:y_(P.status)})}),a.jsx("td",{className:"py-3 px-4 text-sm",children:P.industry||"--"}),a.jsx("td",{className:"py-3 px-4 text-sm",children:P.territory?.name||"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[a.jsx(pt,{className:"text-gray-500"}),a.jsx("span",{children:P.phone_number||"--"})]})})]},P.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"No accounts found."})})})]})}),a.jsx(Et,{className:"mt-4",totalItems:Ee.length,pageSize:nd,currentPage:B,onPrev:We,onNext:Ke,label:"accounts"})]}),oa=t?a.jsx("div",{id:"modalBackdrop",onClick:Z,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto hide-scrollbar max-h-[90vh]",onClick:P=>P.stopPropagation(),children:[a.jsx("button",{onClick:()=>{k(),ge(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:i||ae,children:a.jsx(St,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:r?"Edit Account":"Add New Account"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:Me,noValidate:!0,children:[a.jsx("div",{className:"md:col-span-2",children:a.jsx(wm,{label:"Name",name:"name",value:h.name,onChange:be,placeholder:"Company name",required:!0,disabled:i,isSubmitted:xe})}),a.jsx(wm,{label:"Website",name:"website",value:h.website,onChange:be,placeholder:"https://example.com",disabled:i}),a.jsx(wm,{label:"Phone Number",name:"phone_number",value:h.phone_number,onChange:be,placeholder:"09xx xxx xxxx",type:"tel",disabled:i}),a.jsx(wm,{label:"Industry",name:"industry",value:h.industry,onChange:be,placeholder:"Industry",disabled:i}),a.jsx(wm,{label:"Billing Address",name:"billing_address",value:h.billing_address,onChange:be,placeholder:"Billing address",disabled:i}),a.jsx(wm,{label:"Shipping Address",name:"shipping_address",value:h.shipping_address,onChange:be,placeholder:"Shipping address",disabled:i}),a.jsx(Y7,{label:"Status",name:"status",value:h.status,onChange:be,options:[{value:"",label:"Select status"},...p_],required:!0,disabled:i}),a.jsx(KMe,{label:"Assigned To",value:h.assigned_to,onChange:P=>{const he=S.find(te=>String(te.id)===String(P));A(he);let G=null;he&&he.assigned_territory&&he.assigned_territory.length===1&&(G=he.assigned_territory[0].id),p(te=>({...te,assigned_to:P,territory_id:G}))},items:S||[],getLabel:P=>`${P?.first_name??""} ${P?.last_name??""} (${P?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:xe,disabled:i||S.length===0}),a.jsx(Y7,{label:"Territory",name:"territory_id",value:h.territory_id||"",onChange:be,options:[{value:"",label:E?E.assigned_territory&&E.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"},...E&&E.assigned_territory&&E.assigned_territory.map(P=>({value:String(P.id),label:P.name}))||[]],disabled:i||!E||!E.assigned_territory||E.assigned_territory.length===0}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[a.jsx("button",{type:"button",onClick:()=>{k(),ge(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i||ae,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i||ae,children:i?"Saving...":r?"Update Account":"Save Account"})]})]})]})}):null,Jn=H?a.jsx(XMe,{open:!0,title:H.title,message:H.message,confirmLabel:H.confirmLabel,cancelLabel:H.cancelLabel,variant:H.variant,onConfirm:V,onCancel:F,loading:ae}):null;return a.jsxs(a.Fragment,{children:[jn,dn,oa,Jn]})}function YMe({icon:e,title:t,value:n,color:r="text-blue-600",bgColor:s="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${s} ${r} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function wm({label:e,name:t,value:n,onChange:r,placeholder:s,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const m=d&&!n?.trim();return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:r,placeholder:s,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${m?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function Y7({label:e,name:t,value:n,onChange:r,options:s,required:i=!1,disabled:o=!1}){return a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:n??"",onChange:r,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:s.map(l=>a.jsx("option",{value:l.value,children:l.label},l.value))})]})}function KMe({label:e,items:t=[],value:n="",onChange:r,getLabel:s,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const m=d&&c&&!n;return a.jsxs("div",{className:l,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(QMe,{items:t,value:n??"",onChange:r,getLabel:s,placeholder:i,disabled:o,hasError:m})]})}function QMe({items:e=[],value:t="",onChange:n,getLabel:r,placeholder:s="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=g.useState(!1),[m,h]=g.useState(""),p=g.useRef(null),b=e.find(w=>String(w.id)===String(t)),v=b?r(b):"",x=g.useMemo(()=>{const w=m.trim().toLowerCase();return(w?e.filter(C=>(r(C)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,m,r,o]);return g.useEffect(()=>{const w=j=>{p.current&&!p.current.contains(j.target)&&d(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),g.useEffect(()=>{c||h("")},[c]),a.jsxs("div",{ref:p,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:c?m:v,placeholder:s,onFocus:()=>!i&&d(!0),onChange:w=>{h(w.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:x.length>0?x.map(w=>{const j=String(w.id),C=r(w),S=String(t)===j;return a.jsx("button",{type:"button",onClick:()=>{n(j),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:C||"--"},j)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function XMe({open:e,title:t,message:n,confirmLabel:r,cancelLabel:s="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:s}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":r})]})]})})}const Xh=10,b_={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:""},Nm=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),Zh=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function ZMe(){const e=rt();g.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[t,n]=g.useState([]),[r,s]=g.useState(!1),[i,o]=g.useState([]),[l,c]=g.useState([]),[d,m]=g.useState(null),[h,p]=g.useState(!1),[b,v]=g.useState(!1),[x,w]=g.useState(!1),[j,C]=g.useState(null),[S,_]=g.useState(!1),[E,A]=g.useState(null),[T,R]=g.useState(b_),[U,W]=g.useState(""),[I,M]=g.useState("Filter by Accounts"),[H,q]=g.useState(null),[ae,K]=g.useState("Overview"),[B,X]=g.useState(1),le=g.useCallback(async(z=null)=>{s(!0);try{const ee=await oe.get("/contacts/admin/fetch-all"),V=[...Array.isArray(ee.data)?ee.data:[]].sort((F,se)=>{const xe=F?.created_at||F?.updated_at||0,ge=se?.created_at||se?.updated_at||0;return new Date(ge)-new Date(xe)});if(n(V),z){const F=V.find(se=>se.id===z);m(F||null)}}catch(ee){console.error(ee),n([]),ee.response?.status===403?Q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):Q.error("Failed to fetch contacts. Please try again later.")}finally{s(!1)}},[m]),ue=g.useCallback(async()=>{try{const z=await oe.get("/accounts/admin/fetch-all"),ie=[...Array.isArray(z.data)?z.data:[]].sort((V,F)=>(V?.name||"").localeCompare(F?.name||""));o(ie)}catch(z){console.error(z),o([]),z.response?.status===403&&Q.warn("Unable to load accounts (permission denied).")}},[]),J=g.useCallback(async()=>{try{const z=await oe.get("/users/all"),ie=[...Array.isArray(z.data)?z.data:[]].sort((V,F)=>Nm(V).localeCompare(Nm(F)));c(ie)}catch(z){console.error(z),c([]),z.response?.status===403&&Q.warn("Unable to load users for assignment (permission denied).")}},[]);g.useEffect(()=>{le(),ue(),J()},[le,ue,J]);const ne=g.useMemo(()=>{const z=new Map;i.forEach(ie=>{ie?.id&&ie?.name&&z.set(String(ie.id),ie.name)}),t.forEach(ie=>{ie?.account_id&&ie?.account?.name&&z.set(String(ie.account_id),ie.account.name)});const ee=Array.from(z.entries()).sort((ie,V)=>ie[1].localeCompare(V[1])).map(([ie,V])=>({value:ie,label:V}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...ee]},[i,t]),pe=g.useMemo(()=>{const z=U.trim().toLowerCase(),ee=I.trim();return t.filter(ie=>{const V=[ie?.first_name,ie?.last_name,ie?.email,ie?.title,ie?.department,ie?.account?.name,ie?.account?.status,ie?.work_phone,ie?.mobile_phone_1,ie?.mobile_phone_2,ie?.assigned_contact?.first_name,ie?.assigned_contact?.last_name,ie?.contact_creator?.first_name,ie?.contact_creator?.last_name,ie?.notes,Zh(ie?.created_at),Zh(ie?.updated_at)],F=z===""||V.some(xe=>xe==null?!1:xe.toString().toLowerCase().includes(z)),se=ee==="Filter by Accounts"||String(ie.account_id)===ee;return F&&se})},[t,U,I]),we=Math.max(1,Math.ceil(pe.length/Xh)||1);g.useEffect(()=>{X(1)},[U,I]),g.useEffect(()=>{X(z=>{const ee=Math.max(1,Math.ceil(pe.length/Xh)||1);return z>ee?ee:z})},[pe.length]);const ye=g.useMemo(()=>{const z=(B-1)*Xh;return pe.slice(z,z+Xh)},[pe,B]),Te=()=>X(z=>Math.max(z-1,1)),Ae=()=>X(z=>Math.min(z+1,we)),Pe=g.useMemo(()=>{if(!b||!E)return i;const z=t.find(ie=>ie.id===E);return!z||!z.account||i.some(ie=>ie.id===z.account.id)?i:[...i,z.account]},[i,b,E,t]),$=g.useCallback(()=>{p(!1),v(!1),A(null),R(b_),w(!1)},[]),Ne=z=>{z.target.id==="modalBackdrop"&&!x&&!S&&$()},fe=z=>{const{name:ee,value:ie}=z.target;R(V=>({...V,[ee]:ie}))},O=()=>{R(b_),v(!1),A(null),p(!0)},ce=async z=>{if(!z)return;const ee=await oe.get(`/accounts/get/${z.account_id}`);R({first_name:z.first_name||"",last_name:z.last_name||"",account_id:ee.data.id?ee.data.id:"",title:z.title||"",department:z.department||"",email:z.email||"",work_phone:z.work_phone||"",mobile_phone_1:z.mobile_phone_1||"",mobile_phone_2:z.mobile_phone_2||"",notes:z.notes||"",assigned_to:z.assigned_to?String(z.assigned_to):""}),v(!0),A(z.id),p(!0),m(null)},de=z=>{if(!z)return;const ee=Nm(z)||"this contact";C({title:"Delete Contact",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:ee}),"? This action cannot be undone."]}),confirmLabel:"Delete Contact",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:z.id,name:ee}})},Ce=z=>{z.preventDefault();const ee=T.first_name.trim(),ie=T.last_name.trim();if(!ee||!ie){Q.error("First name and last name are required.");return}if(!T.account_id){Q.error("Account is required.");return}const V={first_name:ee,last_name:ie,account_id:Number(T.account_id),title:T.title?.trim()||null,department:T.department?.trim()||null,email:T.email?.trim().toLowerCase()||null,work_phone:T.work_phone?.trim()||null,mobile_phone_1:T.mobile_phone_1?.trim()||null,mobile_phone_2:T.mobile_phone_2?.trim()||null,notes:T.notes?.trim()||null,assigned_to:T.assigned_to?Number(T.assigned_to):null},F=b&&E?"update":"create",se=`${ee} ${ie}`.trim();C({title:F==="create"?"Confirm New Contact":"Confirm Update",message:F==="create"?a.jsxs("span",{children:["Are you sure you want to add"," ",a.jsx("span",{className:"font-semibold",children:se})," to your contacts?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:se}),"?"]}),confirmLabel:F==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:F,payload:V,targetId:E||null,name:se}})},Ee=async()=>{if(!j?.action){C(null);return}const{action:z}=j,{type:ee,payload:ie,targetId:V,name:F}=z;_(!0);try{if(ee==="create"){w(!0),await oe.post("/contacts/admin",ie),Q.success(`Contact "${F}" created successfully.`);const se=d?.id||null;$(),await le(se)}else if(ee==="update"){if(!V)throw new Error("Missing contact identifier for update.");w(!0),await oe.put(`/contacts/admin/${V}`,ie),Q.success(`Contact "${F}" updated successfully.`);const se=d?.id&&d.id===V?V:d?.id||null;$(),await le(se),d?.id===V&&m(null)}else if(ee==="delete"){if(!V)throw new Error("Missing contact identifier for deletion.");const se=d?.id;q(V),await oe.delete(`/contacts/admin/${V}`),Q.success(`Contact "${F}" deleted successfully.`),await le(se&&se!==V?se:null),se===V&&m(null)}}catch(se){console.error(se);const xe=ee==="create"?"Failed to create contact. Please review the details and try again.":ee==="update"?"Failed to update contact. Please review the details and try again.":"Failed to delete contact. Please try again.",ge=se.response?.data?.detail||xe;Q.error(ge)}finally{(ee==="create"||ee==="update")&&w(!1),ee==="delete"&&q(null),_(!1),C(null)}},Ge=()=>{S||C(null)},Je=z=>{m(z),K("Overview")},We=()=>m(null),Ke=z=>{z.target.id==="contactModalBackdrop"&&!S&&We()},He=j?.action?.type==="delete"?j.action.targetId:null,Se=d&&(H===d.id||He===d.id),Ve=d&&H===d.id,k=d?a.jsx("div",{id:"contactModalBackdrop",onClick:Ke,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:z=>z.stopPropagation(),children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),a.jsx("button",{onClick:We,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:a.jsx(wn,{size:25})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:Nm(d)||"Unnamed contact"})}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>ce(d),disabled:S||j?.action?.type==="update"&&j.action.targetId===d.id,children:[a.jsx(Rn,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>de(d),disabled:!!Se,children:Ve?"Deleting...":a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"mr-2"}),"Delete"]})})]})]}),a.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:a.jsx("p",{className:"text-sm text-gray-500",children:d.account?.name||"No associated account"})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(z=>a.jsx("button",{onClick:()=>K(z),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${ae===z?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:z},z))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[ae==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Contact Name:"}),a.jsx("p",{children:Nm(d)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Title:"}),a.jsx("p",{children:d.title||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:d.email?a.jsx("a",{href:`mailto:${d.email}`,className:"text-blue-600 hover:underline break-all",children:d.email}):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Department:"}),a.jsx("p",{children:d.department||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Work Phone:"}),a.jsx("p",{children:d.work_phone||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),a.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),a.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:d.assigned_contact?`${d.assigned_contact.first_name} ${d.assigned_contact.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:d.contact_creator?`${d.contact_creator.first_name} ${d.contact_creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:Zh(d.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:Zh(d.updated_at)||"N/A"})]})]})}),ae==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]})]}),ae==="Activities"&&a.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:pt,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:ft,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((z,ee)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[a.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-gray-600 mt-1",children:a.jsx(z.icon,{size:24})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-gray-900 break-words",children:z.title}),a.jsx("p",{className:"text-sm text-gray-500 break-words",children:z.desc}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),a.jsx("p",{className:"text-sm text-gray-700 break-words",children:z.user})]})]})]}),a.jsx("p",{className:"text-sm text-gray-500 break-words",children:z.date})]},ee))]})]}),a.jsx("div",{className:"flex flex-col gap-4",children:a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Contact"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(pt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const z=encodeURIComponent(d.email),ee=encodeURIComponent(""),ie=encodeURIComponent(""),V=`https://mail.google.com/mail/?view=cm&fs=1&to=${z}&su=${ee}&body=${ie}`;window.open(V,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Tn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Contact"}}}),children:[a.jsx(ft,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Contact"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(kn,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]})})]})]})]})}):null,Z=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&a.jsx(yt,{message:"Loading contacts..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(en,{className:"mr-2 text-blue-600"})," Contacts Management"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:O,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(Rt,{className:"mr-2"})," Add Contact"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search contacts",value:U,onChange:z=>W(z.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:I,onChange:z=>M(z.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:ne.map(z=>a.jsx("option",{value:z.value,children:z.label},z.value??z.label))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),a.jsx("th",{className:"py-3 px-4",children:"Department"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Created"})]})}),a.jsx("tbody",{children:r?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"Loading contacts..."})}):pe.length>0?ye.map(z=>{const ee=[{Icon:Tn,value:z.email,key:"email"},{Icon:pt,value:z.work_phone,key:"work_phone"},{Icon:xc,value:z.mobile_phone_1,key:"mobile_phone_1"},{Icon:xc,value:z.mobile_phone_2,key:"mobile_phone_2"}].filter(ie=>!!ie.value);return a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>Je(z),children:[a.jsxs("td",{className:"py-3 px-4 align-top",children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:Nm(z)||"--"}),a.jsx("div",{className:"text-xs text-gray-500",children:z.title||"No title"})]}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[a.jsx(vx,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{className:"break-words",children:z.account?.name||"--"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",children:ee.length>0?a.jsx("div",{className:"space-y-1 text-gray-700",children:ee.map(({Icon:ie,value:V,key:F})=>{const se=nt.createElement(ie,{className:"text-gray-500 flex-shrink-0"});return a.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[se,a.jsx("span",{children:V})]},F)})}):a.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[a.jsx($n,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{children:z.department||"--"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[a.jsx(Qt,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{children:z.assigned_contact?`${z.assigned_contact.first_name} ${z.assigned_contact.last_name}`:"Unassigned"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[a.jsx(ft,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{className:"text-xs",children:Zh(z.created_at)||"--"})]})})]},z.id)}):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"No contacts found."})})})]})}),a.jsx(Et,{className:"mt-4",totalItems:pe.length,pageSize:Xh,currentPage:B,onPrev:Te,onNext:Ae,label:"contacts"})]}),re=h?a.jsx("div",{id:"modalBackdrop",onClick:Ne,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:z=>z.stopPropagation(),children:[a.jsx("button",{onClick:$,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:x||S,children:a.jsx(St,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:b?"Edit Contact":"Add New Contact"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:Ce,children:[a.jsx(Xl,{label:"First Name",name:"first_name",value:T.first_name,onChange:fe,placeholder:"First name",required:!0,disabled:x}),a.jsx(Xl,{label:"Last Name",name:"last_name",value:T.last_name,onChange:fe,placeholder:"Last name",required:!0,disabled:x}),a.jsx(K7,{label:"Account",value:T.account_id,onChange:z=>R(ee=>({...ee,account_id:z})),items:b?Pe:i||[],getLabel:z=>z?.name??"",placeholder:"Search account...",disabled:x||(b?Pe.length===0:i.length===0)}),a.jsx(K7,{label:"Assigned To",value:T.assigned_to,onChange:z=>R(ee=>({...ee,assigned_to:z})),items:l||[],getLabel:z=>`${z?.first_name??""} ${z?.last_name??""} (${z?.role??""})`.trim(),placeholder:"Search assignee...",disabled:x||l.length===0}),a.jsx(Xl,{label:"Title",name:"title",value:T.title,onChange:fe,placeholder:"Job title",disabled:x}),a.jsx(Xl,{label:"Department",name:"department",value:T.department,onChange:fe,placeholder:"Department",disabled:x}),a.jsx(Xl,{label:"Email",name:"email",type:"email",value:T.email,onChange:fe,placeholder:"example@email.com",disabled:x}),a.jsx(Xl,{label:"Work Phone",name:"work_phone",value:T.work_phone,onChange:fe,placeholder:"09xx xxx xxxx",disabled:x}),a.jsx(Xl,{label:"Mobile Phone 1",name:"mobile_phone_1",value:T.mobile_phone_1,onChange:fe,placeholder:"09xx xxx xxxx",disabled:x}),a.jsx(Xl,{label:"Mobile Phone 2",name:"mobile_phone_2",value:T.mobile_phone_2,onChange:fe,placeholder:"09xx xxx xxxx",disabled:x}),a.jsx(e3e,{label:"Notes",name:"notes",value:T.notes,onChange:fe,placeholder:"Additional details...",rows:3,disabled:x,className:"md:col-span-2"}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:$,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:x||S,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:x||S,children:x?"Saving...":b?"Update Contact":"Save Contact"})]})]})]})}):null,be=j?a.jsx(t3e,{open:!0,title:j.title,message:j.message,confirmLabel:j.confirmLabel,cancelLabel:j.cancelLabel,variant:j.variant,onConfirm:Ee,onCancel:Ge,loading:S}):null;return a.jsxs(a.Fragment,{children:[Z,k,re,be]})}function Xl({label:e,name:t,value:n,onChange:r,placeholder:s,type:i="text",required:o=!1,disabled:l=!1}){return a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("input",{type:i,name:t,value:n??"",onChange:r,placeholder:s,required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]})}function K7({label:e,items:t=[],value:n="",onChange:r,getLabel:s,placeholder:i="Search...",disabled:o=!1,className:l=""}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx(JMe,{items:t,value:n??"",onChange:r,getLabel:s,placeholder:i,disabled:o})]})}function JMe({items:e=[],value:t="",onChange:n,getLabel:r,placeholder:s="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=g.useState(!1),[d,m]=g.useState(""),h=g.useRef(null),p=e.find(x=>String(x.id)===String(t)),b=p?r(p):"",v=g.useMemo(()=>{const x=d.trim().toLowerCase();return(x?e.filter(j=>(r(j)||"").toLowerCase().includes(x)):e).slice(0,o)},[e,d,r,o]);return g.useEffect(()=>{const x=w=>{h.current&&!h.current.contains(w.target)&&c(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]),g.useEffect(()=>{l||m("")},[l]),a.jsxs("div",{ref:h,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:l?d:b,placeholder:s,onFocus:()=>!i&&c(!0),onChange:x=>{m(x.target.value),l||c(!0)},className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:v.length>0?v.map(x=>{const w=String(x.id),j=r(x),C=String(t)===w;return a.jsx("button",{type:"button",onClick:()=>{n(w),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${C?"bg-blue-50":""}`,children:j||"--"},w)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function e3e({label:e,name:t,value:n,onChange:r,placeholder:s,rows:i=3,disabled:o=!1,className:l=""}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:r,placeholder:s,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function t3e({open:e,title:t,message:n,confirmLabel:r,cancelLabel:s="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:s}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":r})]})]})})}function nQ({lead:e,onBack:t,fetchLeads:n,onEdit:r,onDelete:s,setSelectedLead:i}){const o=rt(),{leadID:l}=ul(),[c,d]=g.useState(e||null),[m,h]=g.useState("Overview"),[p,b]=g.useState(""),{userRole:v}=er(),{user:x}=Ut();g.useEffect(()=>{console.log("mewo",v),console.log("asdads",x),console.log("lead",c)},[v,x,c]);const[w,j]=g.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[C,S]=g.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[_,E]=g.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),A=async()=>{try{if(e){d(e),b(e.status||"New");return}if(!l)return;const I=await oe.get(`/leads/get/${l}`);d(I.data),b(I.data.status||"New"),j({name:I.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:I.data.territory?.id||null,assigned_to:I.data.assigned_to?.id||null,created_by:I.data.creator?.id||null}),S({last_name:I.data.last_name||"",first_name:I.data.first_name||"",account_id:null,title:I.data.title||"",department:I.data.department||"",email:I.data.email||"",work_phone:I.data.work_phone||"",mobile_phone_1:I.data.mobile_phone_1||"",mobile_phone_2:I.data.mobile_phone_2||"",notes:"",assigned_to:I.data.assigned_to?.id||null,created_by:I.data.creator?.id||null}),E({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:I.data.assigned_to?.id||null,created_by:I.data.creator?.id||null})}catch(I){console.error(I)}};g.useEffect(()=>{e?(d(e),b(e.status||"New")):l&&A()},[l,e]);const T=async()=>{try{const I=await oe.put(`/leads/${c.id}/update/status`,{status:p});console.log(I.data),Q.success("Lead status updated successfully");const M={...c,status:I.data.status};d(M),i&&i(M),n&&n(),t&&t()}catch(I){console.error(I),Q.error("Failed to update lead status")}},R=async I=>{const M={...w,assigned_to:I.assigned_to?.id,billing_address:I.address,shipping_address:I.address,created_by:I.creator?.id,industry:null,name:I.company_name,phone_number:I.work_phone,status:"Prospect",territory_id:I.territory?.id,website:""};console.log("Account data: ",M),console.log("Contact data: ",C),console.log("Deal data: ",_),console.log("Lead data: ",I);try{const q=(await oe.post("/accounts/convertedLead",M)).data.id,ae={...C,account_id:q,assigned_to:I.assigned_to?.id,created_by:I.creator?.id,department:I.department,email:I.email,first_name:I.first_name,last_name:I.last_name,mobile_phone_1:I.mobile_phone_1,mobile_phone_2:I.mobile_phone_2,notes:I.notes,title:I.title,work_phone:I.work_phone},B=(await oe.post("/contacts/convertedLead",ae)).data.id,X=()=>{switch(_.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},le=_.amount&&_.amount!==""?parseFloat(_.amount):0,ue={..._,account_id:q,assigned_to:I.assigned_to?.id,created_by:I.creator?.id,primary_contact_id:B,probability:X(),stage:"Prospecting"},J=await oe.post("/deals/convertedLead",ue),ne=await oe.put(`/leads/convert/${I.id}`);i&&i(null),n(),Q.success("Lead converted successfully!"),t()}catch(H){console.error("Error during conversion:",H);const q=H.response?.data?.detail||H.message||"Failed to convert lead. Please try again.";Q.error(q)}},U=I=>{switch((I||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},W=I=>I.toString().toLowerCase().replace(/\b\w/g,M=>M.toUpperCase());return c?a.jsx(a.Fragment,{children:a.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:a.jsxs("div",{className:"flex items-start justify-between w-full",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),a.jsx("button",{onClick:()=>{t?t():o(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:a.jsx(wn,{size:25})})]})}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[c.first_name," ",c.last_name]}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${U(c.status)}`,children:W(c.status||"New")}),a.jsx("button",{onClick:()=>{c.status==="Qualified"?R(c):Q.warn("Cannot convert lead. Only leads with 'Qualified' status can be converted.")},className:"bg-green-600 hover:bg-green-700 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2 focus:ring-green-400",children:"Convert"})]}),(c.creator?.id===x?.id||c.assigned_to?.id===x?.id)&&a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{type:"button",onClick:()=>{r&&c&&r(c)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[a.jsx(pn,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{type:"button",onClick:()=>{s&&c&&s(c)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[a.jsx(jt,{className:"mr-2"}),"Delete"]})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-4 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(I=>a.jsx("button",{onClick:()=>h(I),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${m===I?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:I},I))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[m==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Name:"}),a.jsxs("p",{children:[c.first_name," ",c.last_name||"N/A"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Company:"}),a.jsx("p",{children:c.company_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Job Title:"}),a.jsx("p",{children:c.title||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Department:"}),a.jsx("p",{children:c.department||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:c.email||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Territory:"}),a.jsx("p",{children:c.territory?.name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:c.assigned_to?`${c.assigned_to.first_name} ${c.assigned_to.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:c.creator?`${c.creator.first_name} ${c.creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Work Phone:"}),a.jsx("p",{children:c.work_phone||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),a.jsx("p",{children:c.mobile_phone_1||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),a.jsx("p",{children:c.mobile_phone_2||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Source:"}),a.jsx("p",{children:c.source||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Address:"}),a.jsx("p",{children:c.address||"N/A"})]})]})}),m==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:c.notes||"No notes available."})]})]}),m==="Activities"&&a.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:pt,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:ft,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((I,M)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[a.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-gray-600 mt-1",children:a.jsx(I.icon,{size:24})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-gray-900 break-words",children:I.title}),a.jsx("p",{className:"text-sm text-gray-500 break-words",children:I.desc}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),a.jsx("p",{className:"text-sm text-gray-700 break-words",children:I.user})]})]})]}),a.jsx("p",{className:"text-sm text-gray-500 break-words",children:I.date})]},M))]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>o("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Lead"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(pt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!c?.email){alert("No email address available");return}const I=encodeURIComponent(c.email),M=encodeURIComponent(""),H=encodeURIComponent(""),q=`https://mail.google.com/mail/?view=cm&fs=1&to=${I}&su=${M}&body=${H}`;window.open(q,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Tn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>o("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Lead"}}}),children:[a.jsx(ft,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>o("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Lead"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(kn,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:p,disabled:c.creator?.id!==x?.id&&c.assigned_to?.id!==x?.id,onChange:I=>b(I.target.value),children:[a.jsx("option",{value:"New",children:"New"}),a.jsx("option",{value:"Contacted",children:"Contacted"}),a.jsx("option",{value:"Qualified",children:"Qualified"}),a.jsx("option",{value:"Converted",children:"Converted"}),a.jsx("option",{value:"Lost",children:"Lost"})]}),(c.creator?.id===x?.id||c.assigned_to?.id===x?.id)&&a.jsx("button",{onClick:T,disabled:p===c.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${p===c.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const n3e=Nf.all(),v_=n3e.map((e,t)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${t}`})),a3e=e=>e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()),r3e=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},Jh=10,w_={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function s3e(){const e=rt(),{leadID:t}=ul();gr();const[n,r]=g.useState(null),[s,i]=g.useState(!1),[o,l]=g.useState(null),[c,d]=g.useState(null),[m,h]=g.useState([]),[p,b]=g.useState(!1),[v,x]=g.useState(""),[w,j]=g.useState("Filter by Status"),[C,S]=g.useState(1),[_,E]=g.useState(w_),[A,T]=g.useState(!1),[R,U]=g.useState(null),[W,I]=g.useState(!1),[M,H]=g.useState(null),[q,ae]=g.useState(!1);g.useRef(null);const[K,B]=g.useState(!1),[X,le]=g.useState(null),[ue,J]=g.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[ne,pe]=g.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[we,ye]=g.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});g.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const Te=async()=>{try{const V=await oe.get("/leads/getUsers");l(V.data)}catch(V){console.error(`Error fetching users: ${V}`)}},Ae=async()=>{b(!0);try{const V=await oe.get("/leads/admin/getLeads");h(V.data),console.log(V.data)}catch(V){console.error(`Error fetching leads: ${V}`)}finally{b(!1)}};g.useEffect(()=>{Te(),Ae()},[]),g.useEffect(()=>{if(t&&m.length>0&&!s&&!A){const V=m.find(F=>F.id===Number(t));V&&r(V)}else!t&&!n&&r(null)},[t,m,s,A]),g.useEffect(()=>{if(X){const F=(ge=>{if(!ge)return{code:"+63",number:""};const Me=ge.match(/^(\+\d+)\s(.+)$/);if(Me)return{code:Me[1],number:Me[2]};if(ge.startsWith("+")){const De=ge.match(/^(\+\d{1,3})/);if(De)return{code:De[1],number:ge.substring(De[1].length).trim()}}return{code:"+63",number:ge}})(X.work_phone),se=[];X.work_phone&&se.push(`Work: ${X.work_phone}`),X.mobile_phone_1&&se.push(`Mobile 1: ${X.mobile_phone_1}`),X.mobile_phone_2&&se.push(`Mobile 2: ${X.mobile_phone_2}`);const xe=se.length>0?se.join(" | "):"";J({name:X.company_name||"",website:"",countryCode:F.code,phone_number:F.number,combinedPhoneNumbers:xe,billing_address:X.address||"",shipping_address:X.address||"",industry:"",status:"Prospect",territory_id:X.assigned_to?.territory?.id||null,assigned_to:X.assigned_to?.id||null,created_by:X.creator?.id||null}),pe({last_name:X.last_name||"",first_name:X.first_name||"",account_id:null,title:X.title||"",department:X.department||"",email:X.email||"",work_phone:X.work_phone||"",mobile_phone_1:X.mobile_phone_1||"",mobile_phone_2:X.mobile_phone_2||"",notes:X.notes||"",assigned_to:X.assigned_to?.id||null,created_by:X.creator?.id||null}),ye({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:X.assigned_to?.id||null,created_by:X.creator?.id||null})}},[X]);const Pe=V=>x(V.target.value),$=g.useMemo(()=>{const V=v.trim().toLowerCase(),F=w.trim().toUpperCase();return m.filter(se=>{const xe=[se?.first_name,se?.last_name,se?.company_name,se?.title,se?.email,se?.work_phone,se?.assigned_to?`${se.assigned_to.first_name} ${se.assigned_to.last_name}`:""],ge=V===""||xe.some(De=>De==null||De===""?!1:De.toString().toLowerCase().includes(V));let Me=!1;return F==="FILTER BY STATUS"?Me=(se.status?se.status.toUpperCase():"")!=="CONVERTED":Me=(se.status?se.status.toUpperCase():"")===F,ge&&Me})},[m,v,w]),Ne=Math.max(1,Math.ceil($.length/Jh)||1);g.useEffect(()=>{S(1)},[v,w]),g.useEffect(()=>{S(V=>{const F=Math.max(1,Math.ceil($.length/Jh)||1);return V>F?F:V})},[$.length]);const fe=g.useMemo(()=>{const V=(C-1)*Jh;return $.slice(V,V+Jh)},[$,C]),O=()=>S(V=>Math.max(V-1,1)),ce=()=>S(V=>Math.min(V+1,Ne)),de=V=>{r(V)},Ce=()=>{r(null),t&&e("/admin/leads",{replace:!0})},Ee=()=>{i(!1),E(w_),T(!1),U(null),I(!1),d(null),sessionStorage.removeItem("editLeadData")},Ge=V=>{V.target.id==="modalBackdrop"&&Ee()},Je=()=>{E(w_),T(!1),U(null),d(null),i(!0)},We=V=>{if(!V){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",V),console.log("Current state - leadID:",t,"selectedLead:",n,"showModal:",s);const F=De=>{if(!De)return{code:"+63",number:""};const et=De.match(/^(\+\d+)\s(.+)$/);return et?{code:et[1],number:et[2]}:{code:"+63",number:De}},se=F(V.work_phone),xe=F(V.mobile_phone_1),ge=F(V.mobile_phone_2);let Me="";if(V.assigned_to){Me=String(V.assigned_to.id);const De=o?.find(et=>et.id===V.assigned_to.id);d(De)}E({first_name:V.first_name||"",last_name:V.last_name||"",company_name:V.company_name||"",title:V.title||"",department:V.department||"",email:V.email||"",work_ccode:se.code,work_phone:se.number,m1_ccode:xe.code,mobile_phone_1:xe.number,m2_ccode:ge.code,mobile_phone_2:ge.number,address:V.address||"",notes:V.notes||"",source:V.source||"",territory_id:V.territory?.id||null,lead_owner:Me,status:V.status||"New"}),T(!0),U(V.id),n?(console.log("Coming from detail view - closing detail modal and showing edit form"),r(null),i(!0)):(console.log("Already in list view - showing modal"),i(!0))},Ke=V=>{if(!V){console.error("handleDelete: lead is null or undefined");return}console.log("handleDelete called with lead:",V);const F=`${V.first_name} ${V.last_name}`||"this lead";H({title:"Delete Lead",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:F}),"? This action cannot be undone."]}),confirmLabel:"Delete Lead",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:V.id,name:F}})},He=V=>{const{name:F,value:se}=V.target;if(E(xe=>({...xe,[F]:se})),F==="lead_owner"){const xe=o.find(ge=>ge.id===parseInt(se));d(xe)}},Se=V=>{if(V.preventDefault(),!_.first_name?.trim()||!_.last_name?.trim()){Q.error("First name and last name are required.");return}if(!_.lead_owner){Q.error("Please assign a lead owner.");return}const F={..._,territory_id:_.territory_id?parseInt(_.territory_id):null,lead_owner:parseInt(_.lead_owner),work_phone:`${_.work_ccode} ${_.work_phone}`,mobile_phone_1:`${_.m1_ccode} ${_.mobile_phone_1}`,mobile_phone_2:`${_.m2_ccode} ${_.mobile_phone_2}`},se=A&&R?"update":"create",xe=`${_.first_name} ${_.last_name}`;H({title:se==="create"?"Confirm New Lead":"Confirm Update",message:se==="create"?a.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",a.jsx("span",{className:"font-semibold",children:xe}),"?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:xe}),"?"]}),confirmLabel:se==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:se,payload:F,targetId:R||null,name:xe}})},Ve=async()=>{if(!M?.action){H(null);return}const{action:V}=M,{type:F,payload:se,targetId:xe,name:ge,lead:Me}=V;console.log(se),ae(!0);try{if(F==="create")I(!0),await oe.post("/leads/create",se),Q.success(`Lead "${ge}" created successfully.`),Ee(),await Ae();else if(F==="update"){if(!xe)throw new Error("Missing lead identifier for update.");I(!0);const De=await oe.put(`/leads/${xe}`,se);Q.success(`Lead "${ge}" updated successfully.`),n&&n.id===xe&&r(null),Ee(),await Ae()}else if(F==="delete"){if(!xe)throw new Error("Missing lead identifier for deletion.");await oe.delete(`/leads/${xe}`),Q.success(`Lead "${ge}" deleted successfully.`),n?.id===xe&&r(null),await Ae()}}catch(De){console.error(De);const et=F==="create"?"Failed to create lead. Please review the details and try again.":F==="update"?"Failed to update lead. Please review the details and try again.":"Failed to delete lead. Please try again.",gt=De.response?.data?.detail||et;Q.error(gt)}finally{(F==="create"||F==="update")&&I(!1),F!=="edit"&&(ae(!1),H(null))}},k=()=>{q||H(null)},Z=m.filter(V=>V.status==="New").length,re=m.filter(V=>V.status==="Contacted").length,be=m.filter(V=>V.status==="Qualified").length,z=m.filter(V=>V.status==="Converted").length,ee=m.filter(V=>V.status==="Lost").length,ie=[{title:"New",value:Z,icon:Ln,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:re,icon:pt,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:be,icon:Fn,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:z,icon:ml,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:ee,icon:hr,color:"text-red-600",bgColor:"bg-red-100"}];return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[p&&a.jsx(yt,{message:"Loading leads..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(Ln,{className:"mr-2 text-blue-600"}),"Leads"]}),a.jsx("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:a.jsxs("button",{onClick:Je,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(Rt,{className:"mr-2"})," Add Lead"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:ie.map(V=>a.jsx(o3e,{...V},V.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search leads",value:v,onChange:Pe,className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:w,onChange:V=>j(V.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),a.jsx("option",{value:"New",children:"New"}),a.jsx("option",{value:"Contacted",children:"Contacted"}),a.jsx("option",{value:"Qualified",children:"Qualified"}),a.jsx("option",{value:"Converted",children:"Converted"}),a.jsx("option",{value:"Lost",children:"Lost"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Name"}),a.jsx("th",{className:"py-3 px-4",children:"Company"}),a.jsx("th",{className:"py-3 px-4",children:"Job Title"}),a.jsx("th",{className:"py-3 px-4",children:"Email"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),a.jsx("tbody",{children:$.length>0?fe.map(V=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>de(V),children:[a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[V.first_name," ",V.last_name]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:V.company_name||"--"})}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:V.title||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:V.email||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:V.assigned_to?`${V.assigned_to.first_name} ${V.assigned_to.last_name}`:"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${r3e(V.status||"New")}`,children:a3e(V.status||"New")})})]},V.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No leads found."})})})]})}),a.jsx(Et,{className:"mt-4",totalItems:$.length,pageSize:Jh,currentPage:C,onPrev:O,onNext:ce,label:"leads"}),s&&a.jsx("div",{id:"modalBackdrop",onClick:Ge,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:V=>V.stopPropagation(),children:[a.jsx("button",{onClick:Ee,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(St,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:A?"Edit Lead":"Add New Lead"}),a.jsxs("form",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),a.jsx("input",{type:"text",name:"first_name",value:_.first_name,onChange:He,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Last Name"}),a.jsx("input",{type:"text",placeholder:"Smith",name:"last_name",value:_.last_name,onChange:He,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Company"}),a.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:_.company_name,onChange:He,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Job Title"}),a.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:_.title,onChange:He,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),a.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:_.department,onChange:He,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Email"}),a.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:_.email,onChange:He,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"work_ccode",value:_.work_ccode,onChange:He,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:v_.map(V=>a.jsx("option",{value:V.code,children:V.code},V.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:_.work_phone,onChange:He,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"m1_ccode",value:_.m1_ccode,onChange:He,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:v_.map(V=>a.jsx("option",{value:V.code,children:V.code},V.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:_.mobile_phone_1,onChange:He,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"m2_ccode",value:_.m2_ccode,onChange:He,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:v_.map(V=>a.jsx("option",{value:V.code,children:V.code},V.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:_.mobile_phone_2,onChange:He,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),a.jsx("input",{type:"text",name:"address",value:_.address,onChange:He,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Assign To"}),a.jsx(l3e,{items:Array.isArray(o)?o:[],value:_.lead_owner??"",placeholder:"Search a user...",getLabel:V=>`${V.first_name} ${V.last_name}`,onChange:V=>{const F=o.find(xe=>String(xe.id)===String(V));d(F);let se=null;F&&F.assigned_territory&&F.assigned_territory.length===1&&(se=F.assigned_territory[0].id),E(xe=>({...xe,lead_owner:V,territory_id:se}))}})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),a.jsxs("select",{name:"territory_id",value:_.territory_id||"",onChange:He,disabled:!c||!c.assigned_territory||c.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[a.jsx("option",{value:"",disabled:!0,children:c?c.assigned_territory&&c.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),c&&c.assigned_territory&&c.assigned_territory.map(V=>a.jsx("option",{value:V.id,children:V.name},V.id))]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),a.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:_.source,onChange:He,children:[a.jsx("option",{value:"",disabled:!0,children:"Select Source"}),a.jsx("option",{value:"Website",children:"Website"}),a.jsx("option",{value:"Referral",children:"Referral"}),a.jsx("option",{value:"Cold call",children:"Cold call"}),a.jsx("option",{value:"Event",children:"Event"}),a.jsx("option",{value:"Other",children:"Other"})]})]}),a.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),a.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:_.notes,onChange:He,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("button",{type:"button",onClick:Ee,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:W||q,children:"Cancel"}),a.jsx("button",{type:"submit",onClick:Se,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:W||q,children:W||q?"Processing...":A?"Update Lead":"Save Lead"})]})]})]})}),M&&a.jsx(i3e,{open:!0,title:M.title,message:M.message,confirmLabel:M.confirmLabel,cancelLabel:M.cancelLabel,variant:M.variant,onConfirm:Ve,onCancel:k,loading:q}),n&&!s&&!A&&a.jsx(nQ,{lead:n,onBack:Ce,fetchLeads:Ae,setSelectedLead:r,onEdit:We,onDelete:Ke})]})}function i3e({open:e,title:t,message:n,confirmLabel:r,cancelLabel:s="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:s}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":r})]})]})})}function o3e({icon:e,title:t,value:n,color:r="text-blue-600",bgColor:s="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${s} ${r} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function l3e({items:e=[],value:t="",onChange:n,getLabel:r,placeholder:s="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=g.useState(!1),[d,m]=g.useState(""),h=g.useRef(null),p=e.find(x=>String(x.id)===String(t)),b=p?r(p):"",v=g.useMemo(()=>{const x=d.trim().toLowerCase();return(x?e.filter(j=>(r(j)||"").toLowerCase().includes(x)):e).slice(0,o)},[e,d,r,o]);return g.useEffect(()=>{const x=w=>{h.current&&!h.current.contains(w.target)&&c(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]),g.useEffect(()=>{l||m("")},[l]),a.jsxs("div",{ref:h,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:l?d:b,placeholder:s,onFocus:()=>!i&&c(!0),onChange:x=>{m(x.target.value),l||c(!0)},className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:v.length>0?v.map(x=>{const w=String(x.id),j=r(x),C=String(t)===w;return a.jsx("button",{type:"button",onClick:()=>{n(w),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${C?"bg-blue-50":""}`,children:j||"--"},w)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3e=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),d3e=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),Q7=e=>{const t=d3e(e);return t.charAt(0).toUpperCase()+t.slice(1)},aQ=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),u3e=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var m3e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3e=g.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...l},c)=>g.createElement("svg",{ref:c,...m3e,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:aQ("lucide",s),...!i&&!u3e(l)&&{"aria-hidden":"true"},...l},[...o.map(([d,m])=>g.createElement(d,m)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3e=(e,t)=>{const n=g.forwardRef(({className:r,...s},i)=>g.createElement(f3e,{ref:i,iconNode:t,className:aQ(`lucide-${c3e(Q7(e))}`,`lucide-${e}`,r),...s}));return n.displayName=Q7(e),n};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3e=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Nj=h3e("x",g3e),Yy={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},wa=({label:e,value:t,name:n,className:r=""})=>a.jsxs("div",{className:`flex flex-col ${r}`,children:[a.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),a.jsx("input",{type:"text",name:n,defaultValue:t,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),p3e=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(wa,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),a.jsx(wa,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),a.jsx(wa,{label:"Industry",name:"industry",value:e.industry})]}),a.jsx(wa,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),a.jsx(wa,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),x3e=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(wa,{label:"First Name",name:"firstName",value:e.firstName}),a.jsx(wa,{label:"Last Name",name:"lastName",value:e.lastName}),a.jsx(wa,{label:"Department",name:"department",value:e.department}),a.jsx(wa,{label:"Title",name:"title",value:e.title}),a.jsx(wa,{label:"Work Phone",name:"workPhone",value:e.workPhone}),a.jsx(wa,{label:"Email",name:"email",value:e.email}),a.jsx(wa,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),a.jsx(wa,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),y3e=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(wa,{label:"Deal Name",name:"dealName",value:e.dealName}),a.jsxs("div",{className:"flex",children:[a.jsx(wa,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),a.jsx("div",{className:"flex flex-col justify-end ml-1",children:a.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),a.jsx(wa,{label:"Stage",name:"stage",value:e.stage}),a.jsx(wa,{label:"Territory",name:"territory",value:e.territory})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(wa,{label:"Description",name:"description",value:e.description}),a.jsx(wa,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function b3e({isOpen:e,onClose:t}){const[n,r]=g.useState(1),s=3;if(!e)return null;const i=()=>{n<s?r(n+1):(t(),r(1))},o=()=>{n>1&&r(n-1)},l=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],c=()=>{switch(n){case 1:return a.jsx(p3e,{data:Yy});case 2:return a.jsx(x3e,{data:Yy});case 3:return a.jsx(y3e,{data:Yy});default:return null}};return a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:Yy.accountName})]}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:a.jsx(Nj,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:l.map(d=>a.jsx("button",{onClick:()=>r(d.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${n===d.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:d.name},d.id))}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c()}),a.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[n>1&&a.jsx("button",{onClick:o,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),n<s?a.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):a.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}const eg=10;function v3e(){g.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const[e,t]=g.useState(""),[n,r]=g.useState("Filter by Stage"),[s,i]=g.useState("Filter by Owner"),[o,l]=g.useState(null),[c,d]=g.useState("Overview"),[m,h]=g.useState(!1),[p,b]=g.useState(null),[v,x]=g.useState(!1),[w,j]=g.useState(1),[C,S]=g.useState(!1),[_,E]=g.useState(null),[A,T]=g.useState(!1),[R,U]=g.useState(!1),[W,I]=g.useState(null),[M,H]=g.useState([]),[q,ae]=g.useState([]),[K,B]=g.useState([]),[X,le]=g.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),[ue,J]=g.useState(null),[ne,pe]=g.useState(null),we={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST","Closed Cancelled Stage":"CLOSED_CANCELLED"},ye=F=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost",CLOSED_CANCELLED:"Closed Cancelled"})[F]||F||"--",Te=F=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700",CLOSED_CANCELLED:"bg-red-100 text-red-700"})[F]||"bg-gray-100 text-gray-700",Ae=g.useMemo(()=>{const F=e.trim().toLowerCase(),se=n.trim(),xe=s.trim();return(p??[]).filter(ge=>{const Me=[ge?.name,ge?.description,ge?.account?.name,ge?.contact?.first_name,ge?.contact?.last_name,ge?.assigned_deals?.first_name,ge?.assigned_deals?.last_name],De=F===""||Me.some(Nt=>Nt==null||Nt===""?!1:Nt.toString().toLowerCase().includes(F)),et=se==="Filter by Stage"||se===""||ge.stage===we[se]||ge.stage===se,gt=xe==="Filter by Owner"||xe===""||`${ge.assigned_deals?.first_name||""} ${ge.assigned_deals?.last_name||""}`.trim().toLowerCase()===xe.toLowerCase();return De&&et&&gt})},[p,e,n,s]),Pe=Math.max(1,Math.ceil(Ae.length/eg)||1);g.useEffect(()=>{j(1)},[e,n,s]),g.useEffect(()=>{j(F=>{const se=Math.max(1,Math.ceil(Ae.length/eg)||1);return F>se?se:F})},[Ae.length]);const $=g.useMemo(()=>{const F=(w-1)*eg;return Ae.slice(F,F+eg)},[Ae,w]),Ne=()=>j(F=>Math.max(F-1,1)),fe=()=>j(F=>Math.min(F+1,Pe)),O=()=>{le({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),U(!1),I(null),h(!0)},ce=async()=>{x(!0);try{const F=await oe.get("/deals/admin/fetch-all"),xe=[...Array.isArray(F.data)?F.data:[]].sort((ge,Me)=>{const De=ge?.created_at?new Date(ge.created_at).getTime():0;return(Me?.created_at?new Date(Me.created_at).getTime():0)-De});b(xe)}catch(F){F.response&&F.response.status===403?Q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):Q.error("Failed to fetch deals. Please try again later."),console.error(F)}finally{x(!1)}},de=async()=>{try{const F=await oe.get("/accounts/admin/fetch-all");H(Array.isArray(F.data)?F.data:[])}catch(F){console.error(F),F.response?.status===403&&Q.warn("Unable to load accounts (permission denied).")}},Ce=async()=>{try{const F=await oe.get("/contacts/admin/fetch-all");ae(Array.isArray(F.data)?F.data:[])}catch(F){console.error(F),F.response?.status===403&&Q.warn("Unable to load contacts (permission denied).")}},Ee=async()=>{try{const F=await oe.get("/users/all");B(Array.isArray(F.data)?F.data:[])}catch(F){console.error(F),F.response?.status===403&&Q.warn("Unable to load users (permission denied).")}};g.useEffect(()=>{ce(),de(),Ce(),Ee()},[]);const Ge=async F=>{F&&(le({id:F.id||null,name:F.name||"",account_id:F.account_id?.toString()||"",primary_contact_id:F.primary_contact_id?.toString()||"",stage:F.stage||"PROPOSAL",amount:F.amount?.toString()||"",close_date:F.close_date?new Date(F.close_date).toISOString().split("T")[0]:"",assigned_to:F.assigned_to?.toString()||"",currency:F.currency||"PHP",description:F.description||""}),J(F.account||null),pe(F.contact||null),U(!0),I(F.id),l(null),h(!0))},Je=async(F=!1)=>{try{const se=await oe.get("/deals/admin/fetch-all"),ge=[...Array.isArray(se.data)?se.data:[]].sort((Me,De)=>{const et=Me?.created_at?new Date(Me.created_at).getTime():0;return(De?.created_at?new Date(De.created_at).getTime():0)-et});if(b(ge),!F&&o&&o.id){const Me=ge.find(De=>De.id===o.id);Me&&l({...Me})}}catch(se){console.error("Failed to refresh deal data:",se),await ce()}},We=F=>{const se=F.name.trim();if(!se){Q.error("Deal name is required.");return}if(!F.account_id){Q.error("Account is required.");return}const xe=R&&W?"update":"create",ge=se;E({title:xe==="create"?"Confirm New Deal":"Confirm Update",message:xe==="create"?a.jsxs("span",{children:["Are you sure you want to create"," ",a.jsx("span",{className:"font-semibold",children:ge}),"?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:ge}),"?"]}),confirmLabel:xe==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:xe,formData:F,targetId:W||null,name:ge}})},Ke=F=>{if(!F)return;const se=F.name||"this deal";E({title:"Delete Deal",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:se}),"? This action cannot be undone."]}),confirmLabel:"Delete Deal",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:F.id,name:se}})},He=async()=>{if(!_?.action){E(null);return}const{action:F}=_,{type:se,formData:xe,targetId:ge,name:Me}=F;T(!0);try{if(se==="create"){S(!0);const De={name:xe.name.trim(),account_id:parseInt(xe.account_id),primary_contact_id:xe.primary_contact_id?parseInt(xe.primary_contact_id):null,stage:xe.stage,amount:xe.amount?parseFloat(xe.amount):null,currency:xe.currency||"PHP",close_date:xe.close_date||null,description:xe.description||null,assigned_to:xe.assigned_to?parseInt(xe.assigned_to):null};await oe.post("/deals/admin/create",De),Q.success(`Deal "${Me}" created successfully.`),h(!1),await ce()}else if(se==="update"){if(!ge)throw new Error("Missing deal identifier for update.");S(!0);const De={};xe.name!==void 0&&(De.name=xe.name.trim()),xe.account_id!==void 0&&xe.account_id!==""&&(De.account_id=parseInt(xe.account_id)),xe.primary_contact_id!==void 0&&(De.primary_contact_id=xe.primary_contact_id?parseInt(xe.primary_contact_id):null),xe.stage!==void 0&&(De.stage=xe.stage),xe.amount!==void 0&&xe.amount!==""&&(De.amount=parseFloat(xe.amount)),xe.currency!==void 0&&(De.currency=xe.currency),xe.close_date!==void 0&&(De.close_date=xe.close_date||null),xe.description!==void 0&&(De.description=xe.description||null),xe.assigned_to!==void 0&&(De.assigned_to=xe.assigned_to?parseInt(xe.assigned_to):null),await oe.put(`/deals/admin/${ge}`,De),Q.success(`Deal "${Me}" updated successfully.`),h(!1),await ce()}else if(se==="delete"){if(!ge)throw new Error("Missing deal identifier for deletion.");await oe.delete(`/deals/admin/${ge}`),Q.success(`Deal "${Me}" deleted successfully.`),o?.id===ge&&l(null),await ce()}}catch(De){console.error(De);const et=se==="create"?"Failed to create deal. Please review the details and try again.":se==="update"?"Failed to update deal. Please review the details and try again.":"Failed to delete deal. Please try again.",gt=De.response?.data?.detail||et;Q.error(gt)}finally{(se==="create"||se==="update")&&S(!1),T(!1),E(null)}},Se=()=>{A||E(null)},Ve=()=>{h(!1),le({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),J(null),pe(null),U(!1),I(null),S(!1)},k=(p??[]).filter(F=>F.stage==="PROSPECTING").length,Z=(p??[]).filter(F=>F.stage==="QUALIFICATION").length,re=(p??[]).filter(F=>F.stage==="PROPOSAL").length,be=(p??[]).filter(F=>F.stage==="NEGOTIATION").length,z=(p??[]).filter(F=>F.stage==="CLOSED_WON").length,ee=(p??[]).filter(F=>F.stage==="CLOSED_LOST").length,ie=(p??[]).filter(F=>F.stage==="CLOSED_CANCELLED").length,V=[{title:"Prospecting",value:k,icon:yw,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:Z,icon:Rn,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:re,icon:$n,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:be,icon:Wd,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:z,icon:Fn,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:ee,icon:hr,color:"text-red-600",bgColor:"bg-red-100"},{title:"Closed Cancelled",value:ie,icon:hr,color:"text-gray-600",bgColor:"bg-gray-100"}];return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[v&&a.jsx(yt,{message:"Loading deals..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx($n,{className:"mr-2 text-blue-600"}),"Deals"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:O,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(Rt,{className:"mr-2"})," Add Deal"]})})]}),a.jsx("div",{className:"grid grid-cols-1 p-2 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden",children:V.map(F=>a.jsx(N3e,{...F},F.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search deals",value:e,onChange:F=>t(F.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[a.jsxs("select",{value:n,onChange:F=>r(F.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),a.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),a.jsx("option",{value:"Qualification Stage",children:"Qualification"}),a.jsx("option",{value:"Proposal Stage",children:"Proposal"}),a.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),a.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),a.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"}),a.jsx("option",{value:"Closed Cancelled Stage",children:"Closed Cancelled"})]}),a.jsxs("select",{value:s,onChange:F=>i(F.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((p??[]).map(F=>`${F.assigned_deals?.first_name} ${F.assigned_deals?.last_name}`))].map((F,se)=>a.jsx("option",{value:F,children:F},se))]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Stage"}),a.jsx("th",{className:"py-3 px-4",children:"Value"}),a.jsx("th",{className:"py-3 px-4",children:"Close Date"}),a.jsx("th",{className:"py-3 px-4",children:"Owner"})]})}),a.jsx("tbody",{children:Ae.length>0?$.map(F=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{l({...F})},children:[a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:F.deal_id?F.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:F.name}),a.jsx("div",{className:"text-gray-500 text-xs break-all",children:F.description||"--"})]})}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:F.account?.name||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:F.contact?.first_name&&F.contact?.last_name?`${F.contact.first_name} ${F.contact.last_name}`:F.contact?.first_name||F.contact?.last_name||"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Te(F.stage)}`,children:ye(F.stage)})}),a.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",F.amount?.toLocaleString()||"0"]}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:F.close_date||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:F.assigned_deals?.first_name&&F.assigned_deals?.last_name?`${F.assigned_deals.first_name} ${F.assigned_deals.last_name}`:F.assigned_deals?.first_name||F.assigned_deals?.last_name||"--"})]},F.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No deals found."})})})]})}),a.jsx(Et,{className:"mt-4",totalItems:Ae.length,pageSize:eg,currentPage:w,onPrev:Ne,onNext:fe,label:"deals"}),m&&a.jsx(j3e,{onClose:Ve,formData:X,setFormData:le,isEditing:R,onSubmit:We,isSubmitting:C||A,accounts:M,contacts:q,users:K,currentAccount:ue,currentContact:ne}),o&&a.jsx(Bx,{selectedDeal:o,show:!!o,onClose:()=>l(null),activeTab:c,setActiveTab:d,onEdit:Ge,onDelete:Ke,onStatusUpdate:Je}),_&&a.jsx(w3e,{open:!0,title:_.title,message:_.message,confirmLabel:_.confirmLabel,cancelLabel:_.cancelLabel,variant:_.variant,onConfirm:He,onCancel:Se,loading:A})]})}function w3e({open:e,title:t,message:n,confirmLabel:r,cancelLabel:s="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:s}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":r})]})]})})}function N3e({icon:e,title:t,value:n,color:r="text-blue-600",bgColor:s="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${s} ${r} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function j3e({onClose:e,formData:t,setFormData:n,isEditing:r=!1,onSubmit:s,isSubmitting:i=!1,accounts:o=[],contacts:l=[],users:c=[],currentAccount:d=null,currentContact:m=null}){const h=v=>{v.preventDefault(),s&&s(t)},p=v=>{v.target.id==="modalBackdrop"&&e()},b=g.useMemo(()=>{const v=String(t.account_id||"").trim(),x=Array.isArray(l)?l:[];return v?x.filter(w=>{const C=[w?.account_id,w?.accountId,w?.account?.id,w?.account?.account_id,w?.account?.accountId].find(S=>S!=null&&String(S).trim()!=="");return C?String(C)===v:!1}):x},[l,t.account_id]);return g.useEffect(()=>{const v=String(t.account_id||"").trim(),x=String(t.primary_contact_id||"").trim();if(!x||!v)return;b.some(j=>String(j?.id)===x)||n(j=>({...j,primary_contact_id:""}))},[t.account_id,t.primary_contact_id,b,n]),a.jsx("div",{id:"modalBackdrop",onClick:p,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:v=>v.stopPropagation(),children:[a.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(St,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:r?"Edit Deal":"Create Deal"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:h,children:[a.jsx(N_,{label:"Deal Name",name:"name",value:t.name,onChange:v=>n({...t,name:v.target.value}),placeholder:"Enter deal name",required:!0,disabled:i,className:"md:col-span-2"}),a.jsx(j_,{label:"Account",value:t.account_id||"",onChange:v=>n({...t,account_id:v}),items:o||[],getLabel:v=>v?.name??"",placeholder:"Search account...",disabled:i,currentItem:d}),a.jsx(j_,{label:"Primary Contact",value:t.primary_contact_id||"",onChange:v=>n({...t,primary_contact_id:v}),items:b||[],getLabel:v=>`${v?.first_name??""} ${v?.last_name??""}`.trim()||v?.email||"",placeholder:"Search contact...",disabled:i,currentItem:m}),a.jsx(X7,{label:"Stage",name:"stage",value:t.stage,onChange:v=>n({...t,stage:v.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}],disabled:i}),a.jsx(N_,{label:"Amount",name:"amount",type:"number",step:"0.01",value:t.amount,onChange:v=>n({...t,amount:v.target.value}),placeholder:"0",disabled:i}),a.jsx(X7,{label:"Currency",name:"currency",value:t.currency||"PHP",onChange:v=>n({...t,currency:v.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),a.jsx(N_,{label:"Close Date",name:"close_date",type:"date",value:t.close_date||"",onChange:v=>n({...t,close_date:v.target.value}),disabled:i}),a.jsx(j_,{label:"Assign To",value:t.assigned_to||"",onChange:v=>n({...t,assigned_to:v}),items:c||[],getLabel:v=>`${v?.first_name??""} ${v?.last_name??""}`.trim()||v?.email||"",placeholder:"Search assignee...",disabled:i,className:"md:col-span-2"}),a.jsx(S3e,{label:"Description",name:"description",value:t.description,onChange:v=>n({...t,description:v.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":r?"Update Deal":"Save Deal"})]})]})]})})}function N_({label:e,name:t,value:n,onChange:r,placeholder:s,type:i="text",required:o=!1,disabled:l=!1,className:c=""}){return a.jsxs("div",{className:c,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("input",{type:i,name:t,value:n??"",onChange:r,placeholder:s,required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]})}function X7({label:e,name:t,value:n,onChange:r,options:s,required:i=!1,disabled:o=!1,className:l=""}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:n??"",onChange:r,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:s.map(c=>a.jsx("option",{value:c.value,children:c.label},c.value))})]})}function j_({label:e,items:t=[],value:n="",onChange:r,getLabel:s,placeholder:i="Search...",disabled:o=!1,className:l="",currentItem:c=null}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx(C3e,{items:t,value:n??"",onChange:r,getLabel:s,placeholder:i,disabled:o,currentItem:c})]})}function C3e({items:e=[],value:t="",onChange:n,getLabel:r,placeholder:s="Search...",disabled:i=!1,maxRender:o=200,currentItem:l=null}){const[c,d]=g.useState(!1),[m,h]=g.useState(""),p=g.useRef(null),v=e.find(j=>String(j.id)===String(t))||l,x=v?r(v):"",w=g.useMemo(()=>{const j=m.trim().toLowerCase();return(j?e.filter(S=>(r(S)||"").toLowerCase().includes(j)):e).slice(0,o)},[e,m,r,o]);return g.useEffect(()=>{const j=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]),g.useEffect(()=>{c||h("")},[c]),a.jsxs("div",{ref:p,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:c?m:x,placeholder:s,onFocus:()=>!i&&d(!0),onChange:j=>{h(j.target.value),c||d(!0)},className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),c&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:w.length>0?w.map(j=>{const C=String(j.id),S=r(j),_=String(t)===C;return a.jsx("button",{type:"button",onClick:()=>{n(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${_?"bg-blue-50":""}`,children:S||"--"},C)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function S3e({label:e,name:t,value:n,onChange:r,placeholder:s,required:i=!1,disabled:o=!1,className:l="",rows:c=3}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:r,placeholder:s,required:i,disabled:o,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function jj({selectedDeal:e,onStatusUpdate:t,onClose:n}){const[r,s]=g.useState(e?.stage||""),[i,o]=g.useState(!1),l=rt(),{user:c}=Ut();g.useEffect(()=>{console.log("AdminDealsInformation mounted sahdksd",e),console.log("User sadad:",c)},[e,c]);const d=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}];g.useEffect(()=>{e?.stage&&s(e.stage)},[e]);const m=async()=>{if(!e||!e.id){Q.error("No deal selected");return}if(!r||r===e.stage){Q.info("Please select a different stage");return}const h=e.id;o(!0);try{await oe.put(`/deals/admin/${h}`,{stage:r}),n&&n(),t&&setTimeout(async()=>{await t(!0)},100),setTimeout(()=>{Q.success("Deal status updated successfully")},300)}catch(p){console.error(p);const b=p.response?.data?.detail||"Failed to update deal status";Q.error(b)}finally{o(!1)}};return e?a.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>l("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Deal"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(pt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const h=encodeURIComponent(e.contact.email),p=encodeURIComponent(""),b=encodeURIComponent(""),v=`https://mail.google.com/mail/?view=cm&fs=1&to=${h}&su=${p}&body=${b}`;window.open(v,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Tn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>l("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Deal"}}}),children:[a.jsx(ft,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>l("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Deal"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(kn,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:r,onChange:h=>s(h.target.value),disabled:i||e.created_by!==c?.id&&e.assigned_to!==c?.id,children:d.map(h=>a.jsx("option",{value:h.value,children:h.label},h.value))}),(e.created_by===c?.id||e.assigned_to===c?.id)&&a.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:m,disabled:i||!r||r===e.stage,children:i?"Updating...":"Update"})]})]}):null}function _3e({selectedDeal:e,show:t,onClose:n,activeTab:r,setActiveTab:s,onEdit:i,onDelete:o,onStatusUpdate:l}){const c=rt(),[d]=gr(),m=d.get("id"),[h,p]=g.useState(e||null),[b,v]=g.useState(r||"Overview"),{user:x}=Ut();g.useEffect(()=>{console.log("SalesDealsInformation mounted",h),console.log("User:",x)},[h,x]);const w=r!==void 0?r:b;if(g.useEffect(()=>{(async()=>{if(m&&!e)try{console.log("Fetching deal from route, ID:",m);const E=(await oe.get("/deals/admin/fetch-all")).data||[];console.log("All deals fetched:",E.length);const A=E.find(T=>T.id===parseInt(m));if(console.log("Found deal:",A),A){console.log("Deal data structure:",{id:A.id,name:A.name,amount:A.amount,stage:A.stage,account:A.account,contact:A.contact,assigned_deals:A.assigned_deals,deal_creator:A.deal_creator,allKeys:Object.keys(A)});const T={...A,amount:typeof A.amount=="number"?A.amount:parseFloat(A.amount||0),probability:A.probability||0};p(T)}else console.warn("Deal not found with ID:",m)}catch(_){console.error("Error fetching deal:",_)}})()},[m,e]),!h&&!m||m&&!h)return null;const j=S=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[S]||"bg-gray-100 text-gray-700";function C(S){return S?new Date(S).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:a.jsxs("div",{className:"flex items-start justify-between w-full",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),a.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:a.jsx("button",{onClick:()=>{n?n():c(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:a.jsx(St,{size:25})})})]})}),a.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:a.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[a.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:h.name}),a.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${j(h.stage)}`,children:h.stage})]}),a.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",C(h.created_at)]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-2",children:[a.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[" ",h.amount?h.amount.toLocaleString():"0"]}),a.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${h.probability}%`}})}),a.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",h.probability,"% Complete "]}),(h.created_by===x?.id||h.assigned_to===x?.id)&&a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[a.jsxs("button",{type:"button",onClick:()=>{i&&i(h)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[a.jsx(pn,{className:"mr-1 sm:mr-2",size:16}),a.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),a.jsxs("button",{type:"button",onClick:()=>{o&&o(h)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[a.jsx(jt,{className:"mr-1 sm:mr-2",size:16}),a.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})]})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(S=>a.jsx("button",{onClick:()=>{s?s(S):v(S)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${w===S?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:S},S))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[w==="Overview"&&a.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),a.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[a.jsx("strong",{children:"Description:"})," ",h.description]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[a.jsx("strong",{children:"Expected Close Date:"})," ",h.close_date]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("div",{className:"mt-4 py-3 w-full",children:[a.jsxs("div",{className:"relative flex flex-col w-full",children:[a.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const S=(h?.stage||"PROSPECTING").toUpperCase(),E=(T=>T==="PROSPECTING"?0:T==="QUALIFICATION"?1:T==="PROPOSAL"?2:T==="NEGOTIATION"?3:T==="CLOSED_WON"||T==="CLOSED_LOST"?4:-1)(S);return[0,1,2,3,4].map(T=>E===T?"orange":E>T?"green":"gray").map((T,R)=>a.jsxs(nt.Fragment,{children:[a.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${T==="green"?"bg-green-500 border-green-500":T==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),R<4&&a.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},R))})()}),a.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((S,_)=>a.jsx("span",{className:"text-center flex-1 break-words",children:S},_))})]}),a.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:h.stage})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),a.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Account:"})," ",h.account?.name]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Primary Contact:"})," ",h.contact?.first_name," ",h.contact?.last_name]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Phone:"})," ",h.contact?.work_phone]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Email:"})," ",h.contact?.email]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Assigned To:"})," ",h.assigned_deals?.first_name," ",h.assigned_deals?.last_name]})]})]})]}),w==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:h.description||"No notes available."})]})]}),w==="Activities"&&a.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:pt,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:ft,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((S,_)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[a.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-gray-600 mt-1",children:a.jsx(S.icon,{size:24})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-gray-900 break-words",children:S.title}),a.jsx("p",{className:"text-sm text-gray-500 break-words",children:S.desc}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),a.jsx("p",{className:"text-sm text-gray-700 break-words",children:S.user})]})]})]}),a.jsx("p",{className:"text-sm text-gray-500 break-words",children:S.date})]},_))]}),w==="Edit"&&a.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[a.jsxs("label",{className:"block mb-3 break-words",children:[a.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),a.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:h.name})]}),a.jsxs("label",{className:"block mb-3 break-words",children:[a.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),a.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:h.description})]}),a.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),a.jsx("div",{className:"w-full lg:w-auto",children:a.jsx(jj,{selectedDeal:h,onStatusUpdate:l,onClose:n})})]})]})]})})}function A3e({selectedDeal:e,onStatusUpdate:t,onClose:n}){const[r,s]=g.useState(e?.stage||""),[i,o]=g.useState(!1),l=rt(),{user:c}=Ut();g.useEffect(()=>{console.log("AdminDealsInformation mounted sahdksd",e),console.log("User sadad:",c)},[e,c]);const d=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"}];g.useEffect(()=>{e?.stage&&s(e.stage)},[e]);const m=async()=>{if(!e||!e.id){Q.error("No deal selected");return}if(!r||r===e.stage){Q.info("Please select a different stage");return}const h=e.id;o(!0);try{await oe.put(`/deals/admin/${h}`,{stage:r}),n&&n(),t&&setTimeout(async()=>{await t(!0)},100),setTimeout(()=>{Q.success("Deal status updated successfully")},300)}catch(p){console.error(p);const b=p.response?.data?.detail||"Failed to update deal status";Q.error(b)}finally{o(!1)}};return e?a.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>l("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Deal"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(pt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const h=encodeURIComponent(e.contact.email),p=encodeURIComponent(""),b=encodeURIComponent(""),v=`https://mail.google.com/mail/?view=cm&fs=1&to=${h}&su=${p}&body=${b}`;window.open(v,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Tn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>l("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Deal"}}}),children:[a.jsx(ft,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>l("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Deal"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(kn,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:r,onChange:h=>s(h.target.value),disabled:i||e.created_by!==c?.id&&e.assigned_to!==c?.id,children:d.map(h=>a.jsx("option",{value:h.value,children:h.label},h.value))}),(e.created_by===c?.id||e.assigned_to===c?.id)&&a.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:m,disabled:i||!r||r===e.stage,children:i?"Updating...":"Update"})]})]}):null}const tg=10,C_=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],S_={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:""},oi=e=>{if(!e)return"Draft";const t=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[t]||"Draft"},__=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",E3e=e=>{switch(oi(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},T3e=e=>{switch(oi(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},Ky=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",ng=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",L3e=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const t=new Date(e);if(isNaN(t.getTime()))return"";const n=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0");return`${n}-${r}-${s}`}catch{return""}},A_=(e,t)=>{if(!e||t==null||t==="")return"";const n=Number(t);if(Number.isNaN(n))return"";const r=new Date(e);return isNaN(r.getTime())?"":(r.setDate(r.getDate()+n),r.toISOString().slice(0,10))},Z7=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},J7=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},Xv=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},k3e=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const r of e){const s=localStorage.getItem(r);if(s)try{const i=JSON.parse(s),o=Xv(i);if(o)return o}catch{}}const t=localStorage.getItem("user_id"),n=Xv(t);return n||null},P3e=e=>{if(!e)return"";const n=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(r=>r!=null&&String(r).trim()!=="");return n?String(n):""},D3e=e=>{if(!e)return"";const n=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(r=>r!=null&&String(r).trim()!=="");return n?String(n):""};function O3e(){const e=rt();g.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[t,n]=g.useState([]),[r,s]=g.useState(!1),[i,o]=g.useState([]),[l,c]=g.useState([]),[d,m]=g.useState([]),[h,p]=g.useState([]),[b,v]=g.useState(null),[x,w]=g.useState(null),[j,C]=g.useState(!1),[S,_]=g.useState(!1),[E,A]=g.useState(!1),[T,R]=g.useState(null),[U,W]=g.useState(!1),[I,M]=g.useState(null),[H,q]=g.useState(S_),[ae,K]=g.useState(""),[B,X]=g.useState("Filter by Status"),[le,ue]=g.useState(null),[J,ne]=g.useState(1),[pe,we]=g.useState("Overview"),[ye,Te]=g.useState("Draft"),[Ae,Pe]=g.useState(null);g.useEffect(()=>{async function G(){try{const te=await oe.get("/auth/me");Pe(te.data)}catch(te){console.error(te)}}G()},[]),g.useEffect(()=>{let G=!0;return(async()=>{const ve=k3e();if(ve&&G){v(ve);return}try{const je=await oe.get("/auth/me"),Ie=Xv(je?.data);if(Ie&&G){v(Ie);return}}catch{}try{const je=await oe.get("/users/me"),Ie=Xv(je?.data);if(Ie&&G){v(Ie);return}}catch{}G&&v(null)})(),()=>{G=!1}},[]);const $=g.useCallback(G=>G&&l.find(ve=>String(ve.id)===String(G))?.name||"",[l]),Ne=g.useCallback(G=>{if(!G)return"";const te=d.find(ve=>String(ve.id)===String(G));return te?`${te.first_name} ${te.last_name}`.trim():""},[d]),fe=g.useCallback(G=>{if(!G)return"--";const te=i.find(ve=>String(ve.id)===String(G));return te?.deal_name||te?.name||`Deal #${Z7(G)}`},[i]),O=g.useCallback(G=>{const te=i.find(Ie=>String(Ie.id)===String(G)),ve=P3e(te);let je=D3e(te);if(!je&&ve){const Ie=d.filter(tt=>String(tt.account_id||"")===String(ve));if(Ie.length>0){const tt=[...Ie].sort((vt,tn)=>{const un=`${vt.first_name||""} ${vt.last_name||""}`.trim().toLowerCase(),Si=`${tn.first_name||""} ${tn.last_name||""}`.trim().toLowerCase();return un.localeCompare(Si)});je=String(tt[0].id)}}if(ve&&je){const Ie=d.find(tt=>String(tt.id)===String(je));Ie?.account_id&&String(Ie.account_id)!==String(ve)&&(je="")}return{accountId:ve||"",contactId:je||""}},[i,d]),ce=g.useCallback(G=>{if(!G)return"--";if(G.deal?.deal_name)return G.deal.deal_name;if(G.deal?.name)return G.deal.name;const te=G.deal_id||G.deal?.id;return te?fe(te):"--"},[fe]),de=g.useCallback(G=>{if(!G)return"--";if(G.account?.name)return G.account.name;let te=G.account_id||G.account?.id;if(!te){const ve=G.deal_id||G.deal?.id;ve&&(te=O(ve).accountId)}return te?$(te)||`Account #${te}`:"--"},[O,$]),Ce=g.useCallback(G=>{if(!G)return"--";if(G.contact?.first_name||G.contact?.last_name)return`${G.contact?.first_name||""} ${G.contact?.last_name||""}`.trim()||"--";let te=G.contact_id||G.contact?.id;if(!te){const je=G.deal_id||G.deal?.id;je&&(te=O(je).contactId)}return(te?Ne(te):"")||(te?`Contact #${te}`:"--")},[O,Ne]),Ee=g.useCallback(async(G=null)=>{s(!0);try{const te=await oe.get("/quotes/admin/fetch-all"),je=[...Array.isArray(te.data)?te.data:[]].sort((Ie,tt)=>{const vt=Ie?.created_at||Ie?.updated_at||0,tn=tt?.created_at||tt?.updated_at||0;return new Date(tn)-new Date(vt)});if(n(je),G){const Ie=je.find(tt=>tt.id===G);w(Ie||null)}}catch(te){console.error(te),n([]),te.response?.status===403?Q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):Q.error("Failed to fetch quotes. Please try again later.")}finally{s(!1)}},[]),Ge=g.useCallback(async()=>{try{const G=await oe.get("/deals/admin/fetch-all");o(Array.isArray(G.data)?G.data:[])}catch(G){console.error(G),G.response?.status===403&&Q.warn("Unable to load deals (permission denied).")}},[]),Je=g.useCallback(async()=>{try{const G=await oe.get("/accounts/admin/fetch-all");c(Array.isArray(G.data)?G.data:[])}catch(G){console.error(G),G.response?.status===403&&Q.warn("Unable to load accounts (permission denied).")}},[]),We=g.useCallback(async()=>{try{const G=await oe.get("/contacts/admin/fetch-all");m(Array.isArray(G.data)?G.data:[])}catch(G){console.error(G),G.response?.status===403&&Q.warn("Unable to load contacts (permission denied).")}},[]),Ke=g.useCallback(async()=>{try{const G=await oe.get("/users/all");p(Array.isArray(G.data)?G.data:[])}catch(G){console.error(G),G.response?.status===403&&Q.warn("Unable to load users (permission denied).")}},[]);g.useEffect(()=>{Ee(),Ge(),Je(),We(),Ke()},[Ee,Ge,Je,We,Ke]);const He=g.useMemo(()=>{const G=ae.trim().toLowerCase(),te=B.trim();return t.filter(ve=>{const je=ce(ve),Ie=de(ve),tt=Ce(ve),vt=A_(ve.presented_date,ve.validity_days),tn=[ve.quote_id,je,Ie,tt,ve.total_amount?.toString(),ve.validity_days?.toString(),ve.presented_date?ng(ve.presented_date):"",vt?ng(vt):"",ve.assigned_user?.first_name,ve.assigned_user?.last_name,ve.creator?.first_name,ve.creator?.last_name,ve.status,ve.notes,Ky(ve.created_at),Ky(ve.updated_at)],un=G===""||tn.some(tr=>tr==null?!1:tr.toString().toLowerCase().includes(G)),Si=te==="Filter by Status"||oi(ve.status)===te;return un&&Si})},[t,ae,B,ce,de,Ce]),Se=Math.max(1,Math.ceil(He.length/tg)||1);g.useEffect(()=>ne(1),[ae,B]),g.useEffect(()=>{ne(G=>{const te=Math.max(1,Math.ceil(He.length/tg)||1);return G>te?te:G})},[He.length]);const Ve=g.useMemo(()=>{const G=(J-1)*tg;return He.slice(G,G+tg)},[He,J]),k=()=>ne(G=>Math.max(G-1,1)),Z=()=>ne(G=>Math.min(G+1,Se)),re=G=>{w(G),we("Overview"),Te(oi(G?.status)||"Draft")},be=()=>{w(null),we("Overview")},z=G=>{G.target.id==="quoteModalBackdrop"&&!U&&be()},ee=g.useCallback(()=>{C(!1),_(!1),M(null),q(S_),A(!1)},[]),ie=G=>{G.target.id==="modalBackdrop"&&!E&&!U&&ee()},V=G=>{const{name:te,value:ve}=G.target;if(te==="deal_id"){const{accountId:je,contactId:Ie}=O(ve);q(tt=>({...tt,deal_id:ve,account_id:je,contact_id:Ie}));return}q(je=>({...je,[te]:ve}))},F=()=>{q(S_),_(!1),M(null),C(!0)},se=G=>{if(!G)return;w(null);const te=G.deal?.id?String(G.deal.id):G.deal_id?String(G.deal_id):"",ve=te?O(te):{accountId:"",contactId:""},je=G.account?.id?String(G.account.id):G.account_id?String(G.account_id):ve.accountId,Ie=G.contact?.id?String(G.contact.id):G.contact_id?String(G.contact_id):ve.contactId,tt=G.assigned_user?.id?String(G.assigned_user.id):G.assigned_to?String(G.assigned_to):"";q({deal_id:te,account_id:je||"",contact_id:Ie||"",total_amount:G.total_amount?.toString()||"",presented_date:L3e(G.presented_date),validity_days:G.validity_days!==null&&G.validity_days!==void 0?String(G.validity_days):"",status:oi(G.status)||"Draft",assigned_to:tt,notes:G.notes||""}),_(!0),M(G.id),C(!0)},xe=G=>{if(!G)return;const te=G.quote_id||"this quote";R({title:"Delete Quote",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:te}),"? This action cannot be undone."]}),confirmLabel:"Delete Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:G.id,name:te}})},ge=G=>{if(G.preventDefault(),!b){Q.error("Unable to determine current user. Please log in again.");return}if(!H.deal_id){Q.error("Deal is required.");return}if(!H.total_amount||Number(H.total_amount)<=0){Q.error("Total amount must be greater than 0.");return}if(H.validity_days!==""&&Number(H.validity_days)<0){Q.error("Validity days must be 0 or higher.");return}const te=O(H.deal_id),ve={deal_id:Number(H.deal_id),account_id:te.accountId?Number(te.accountId):null,contact_id:te.contactId?Number(te.contactId):null,total_amount:Number(H.total_amount),presented_date:H.presented_date||null,validity_days:H.validity_days===""?null:Number(H.validity_days),status:H.status||"Draft",assigned_to:H.assigned_to?Number(H.assigned_to):null,notes:H.notes?.trim()||null},je=S&&I?"update":"create",Ie=fe(H.deal_id),tt=je==="create"?{...ve,created_by_id:Number(b)}:ve;R({title:je==="create"?"Confirm New Quote":"Confirm Update",message:je==="create"?a.jsxs("span",{children:["Are you sure you want to create a quote for"," ",a.jsx("span",{className:"font-semibold",children:Ie}),"?"]}):a.jsxs("span",{children:["Save changes to"," ",a.jsx("span",{className:"font-semibold",children:Ie}),"?"]}),confirmLabel:je==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:je,payload:tt,targetId:I||null,name:Ie}})},Me=async()=>{if(!T?.action){R(null);return}const{action:G}=T,{type:te,payload:ve,targetId:je,name:Ie}=G;W(!0);try{if(te==="create")A(!0),await oe.post("/quotes/admin",ve),Q.success("Quote created successfully."),ee(),await Ee();else if(te==="update"){if(!je)throw new Error("Missing quote identifier for update.");A(!0),await oe.put(`/quotes/admin/${je}`,ve),Q.success("Quote updated successfully."),ee(),await Ee(),x?.id===je&&w(null)}else if(te==="delete"){if(!je)throw new Error("Missing quote identifier for deletion.");const tt=x?.id;ue(je),await oe.delete(`/quotes/admin/${je}`),Q.success(`Quote "${Ie}" deleted successfully.`),await Ee(tt&&tt!==je?tt:null),tt===je&&w(null)}}catch(tt){console.error(tt);const vt=te==="create"?"Failed to create quote. Please review the details and try again.":te==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";Q.error(vt),(te==="create"||te==="update")&&A(!1),te==="delete"&&ue(null)}finally{(te==="create"||te==="update")&&A(!1),te==="delete"&&ue(null),W(!1),R(null)}},De=()=>{U||R(null)},et=g.useCallback((G,te)=>{const ve=G?.deal_id??G?.deal?.id??"",je=ve?Number(ve):null,Ie=je?O(String(je)):{accountId:"",contactId:""},tt=G?.account_id??G?.account?.id??Ie.accountId??null,vt=G?.contact_id??G?.contact?.id??Ie.contactId??null,tn=G?.total_amount??0,un=G?.assigned_to??G?.assigned_user?.id??null;return{deal_id:je,account_id:tt!=null&&String(tt).trim()!==""?Number(tt):null,contact_id:vt!=null&&String(vt).trim()!==""?Number(vt):null,total_amount:Number(tn),presented_date:G?.presented_date||null,validity_days:G?.validity_days===""||G?.validity_days===void 0||G?.validity_days===null?null:Number(G.validity_days),status:te,assigned_to:un!=null&&String(un).trim()!==""?Number(un):null,notes:G?.notes?.trim()||null}},[O]),gt=g.useCallback(async()=>{if(!x?.id)return;const G=oi(ye),te=[G,G.toLowerCase()],ve=async je=>oe.patch(`/quotes/admin/${x.id}/status`,{status:je},{headers:{"Content-Type":"application/json"}});try{let je=!1;for(const Ie of te)try{await ve(Ie),je=!0;break}catch(tt){if(tt?.response?.status===422)continue;throw tt}if(!je){const Ie=et(x,G);if(!Ie.deal_id){Q.error("Cannot update status: missing deal_id on selected quote.");return}if(!Ie.total_amount||Ie.total_amount<=0){Q.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await oe.put(`/quotes/admin/${x.id}`,Ie)}Q.success(`Quote status updated to ${G}`),w(null),we("Overview"),await Ee()}catch(je){console.error(je);const Ie=je?.response?.data?.message||(je?.response?.data?.errors?Object.values(je.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";Q.error(Ie)}},[x,ye,Ee,et]),Nt=[{label:"Filter by Status",value:"Filter by Status"},...C_.map(G=>({label:G.label,value:G.value}))],Pt=T?.action?.type==="delete"?T.action.targetId:null,dn=x&&(le===x.id||Pt===x.id),jn=x&&le===x.id,oa=x?a.jsx("div",{id:"quoteModalBackdrop",onClick:z,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:G=>G.stopPropagation(),children:[a.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:a.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),a.jsx("button",{onClick:be,className:"text-gray-500 hover:text-white transition cursor-pointer",children:a.jsx(wn,{size:25})})]})}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:ce(x)}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${T3e(x.status)}`,children:__(x.status)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>se(x),disabled:U||T?.action?.type==="update"&&T.action.targetId===x.id,children:[a.jsx(Rn,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>xe(x),disabled:!!dn,children:jn?"Deleting...":a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"mr-2"}),"Delete"]})})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-1 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(G=>a.jsx("button",{onClick:()=>we(G),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${pe===G?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:G},G))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[pe==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Quote ID:"}),a.jsx("p",{children:J7(x.quote_id)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Deal:"}),a.jsx("p",{children:ce(x)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Account:"}),a.jsx("p",{children:de(x)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Contact:"}),a.jsx("p",{children:Ce(x)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Total Amount:"}),a.jsx("p",{children:x.total_amount?`${Number(x.total_amount).toLocaleString()}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Presented Date:"}),a.jsx("p",{children:ng(x.presented_date)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Validity Days:"}),a.jsx("p",{children:x.validity_days!==null&&x.validity_days!==void 0?x.validity_days:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),a.jsx("p",{children:ng(A_(x.presented_date,x.validity_days))||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Status:"}),a.jsx("p",{children:__(x.status)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:x.assigned_user?`${x.assigned_user.first_name} ${x.assigned_user.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:x.creator?`${x.creator.first_name} ${x.creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:Ky(x.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:Ky(x.updated_at)||"N/A"})]})]})}),pe==="Notes"&&a.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),a.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:x.notes||"No notes available."})]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/sales/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(pt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/sales/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Quotes"}}}),children:[a.jsx(ft,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/sales/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(kn,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:ye||oi(x.status)||"Draft",onChange:G=>Te(G.target.value),children:C_.map(G=>a.jsx("option",{value:G.value,children:G.label},G.value))}),a.jsx("button",{onClick:gt,disabled:oi(ye)===oi(x.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${oi(ye)===oi(x.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,Jn=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&a.jsx(yt,{message:"Loading quotes..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(Br,{className:"mr-2 text-blue-600"})," Quotes"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:F,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(Rt,{className:"mr-2"})," Add Quote"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search quotes",value:ae,onChange:G=>K(G.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:B,onChange:G=>X(G.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:Nt.map(G=>a.jsx("option",{value:G.value,children:G.label},G.value))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),a.jsx("th",{className:"py-3 px-4",children:"Deal"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Expiry Date"})]})}),a.jsx("tbody",{children:r?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"Loading quotes..."})}):He.length>0?Ve.map(G=>{const te=A_(G.presented_date,G.validity_days);return a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>re(G),children:[a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:J7(G.quote_id)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"break-words",children:ce(G)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-sm text-gray-700 break-words",children:de(G)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"break-words",children:Ce(G)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-gray-700",children:G.total_amount?`${Number(G.total_amount).toLocaleString()}`:"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${E3e(G.status)}`,children:__(G.status)})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{children:G.assigned_user?`${G.assigned_user.first_name} ${G.assigned_user.last_name}`:"Unassigned"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-gray-500 text-xs",children:ng(te)||"--"})})]},G.id)}):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No quotes found."})})})]})}),a.jsx(Et,{className:"mt-4",totalItems:He.length,pageSize:tg,currentPage:J,onPrev:k,onNext:Z,label:"quotes"})]}),P=j?a.jsx("div",{id:"modalBackdrop",onClick:ie,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:G=>G.stopPropagation(),children:[a.jsx("button",{onClick:ee,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:E||U,children:a.jsx(St,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:S?"Edit Quote":"Add New Quote"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:ge,children:[a.jsx(tU,{label:"Deal",name:"deal_id",value:H.deal_id,onChange:G=>{const{accountId:te,contactId:ve}=O(G);q(je=>({...je,deal_id:G,account_id:te,contact_id:ve}))},items:Array.isArray(i)?i:[],getLabel:G=>`${Z7(G?.deal_id??"")} ${G?.name??""}`.trim(),placeholder:"Search deal...",disabled:E||i.length===0,className:"md:col-span-2"}),a.jsx(eU,{label:"Account",value:$(H.account_id)||(H.account_id?`Account #${H.account_id}`:""),disabled:!0}),a.jsx(eU,{label:"Contact",value:Ne(H.contact_id)||(H.contact_id?`Contact #${H.contact_id}`:""),disabled:!0}),a.jsx(E_,{label:"Total Amount",name:"total_amount",type:"number",value:H.total_amount,onChange:V,placeholder:"0.00",required:!0,disabled:E}),a.jsx(E_,{label:"Presented Date",name:"presented_date",type:"date",value:H.presented_date,onChange:V,disabled:E}),a.jsx(E_,{label:"Validity Days",name:"validity_days",type:"number",value:H.validity_days,onChange:V,placeholder:"30",disabled:E}),a.jsx(tU,{label:"Assigned To",value:H.assigned_to||"",onChange:G=>q(te=>({...te,assigned_to:G})),items:Array.isArray(h)?h:[],getLabel:G=>{const te=`${G?.first_name??""} ${G?.last_name??""}`.trim();return te?G?.role?`${te} (${G.role})`:te:G?.email||""},placeholder:"Search assignee...",disabled:E}),a.jsx(M3e,{label:"Status",name:"status",value:H.status,onChange:V,options:C_,required:!0,disabled:E,className:"md:col-span-2"}),a.jsx($3e,{label:"Notes",name:"notes",value:H.notes,onChange:V,placeholder:"Additional details...",rows:3,disabled:E,className:"md:col-span-2"}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:ee,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:E||U,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:E||U,children:E?"Saving...":S?"Update Quote":"Save Quote"})]})]})]})}):null,he=T?a.jsx(R3e,{open:!0,title:T.title,message:T.message,confirmLabel:T.confirmLabel,cancelLabel:T.cancelLabel,variant:T.variant,onConfirm:Me,onCancel:De,loading:U}):null;return a.jsxs(a.Fragment,{children:[x?oa:Jn,P,he]})}function E_({label:e,name:t,value:n,onChange:r,placeholder:s,type:i="text",required:o=!1,disabled:l=!1,className:c=""}){return a.jsxs("div",{className:c,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("input",{type:i,name:t,value:n??"",onChange:r,placeholder:s,required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]})}function eU({label:e,value:t,className:n="",disabled:r=!0}){return a.jsxs("div",{className:n,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("input",{type:"text",value:t??"",disabled:r,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function M3e({label:e,name:t,value:n,onChange:r,options:s,required:i=!1,disabled:o=!1,className:l=""}){const c=n!=null?String(n):"",m=s.some(h=>String(h.value)===c)?c:"";return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:m,onChange:r,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:s.map(h=>a.jsx("option",{value:String(h.value??""),children:h.label},h.value??h.label))})]})}function tU({label:e,items:t=[],value:n="",onChange:r,getLabel:s,placeholder:i="Search...",disabled:o=!1,className:l=""}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx(I3e,{items:t,value:n??"",onChange:r,getLabel:s,placeholder:i,disabled:o})]})}function I3e({items:e=[],value:t="",onChange:n,getLabel:r,placeholder:s="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=g.useState(!1),[d,m]=g.useState(""),h=g.useRef(null),p=e.find(x=>String(x.id)===String(t)),b=p?r(p):"",v=g.useMemo(()=>{const x=d.trim().toLowerCase();return(x?e.filter(j=>(r(j)||"").toLowerCase().includes(x)):e).slice(0,o)},[e,d,r,o]);return g.useEffect(()=>{const x=w=>{h.current&&!h.current.contains(w.target)&&c(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]),g.useEffect(()=>{l||m("")},[l]),a.jsxs("div",{ref:h,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:l?d:b,placeholder:s,onFocus:()=>!i&&c(!0),onChange:x=>{m(x.target.value),l||c(!0)},className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:v.length>0?v.map(x=>{const w=String(x.id),j=r(x),C=String(t)===w;return a.jsx("button",{type:"button",onClick:()=>{n(w),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${C?"bg-blue-50":""}`,children:j||"--"},w)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function $3e({label:e,name:t,value:n,onChange:r,placeholder:s,rows:i=3,disabled:o=!1,className:l=""}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:r,placeholder:s,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function R3e({open:e,title:t,message:n,confirmLabel:r,cancelLabel:s="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:s}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":r})]})]})})}function z3e(){const{userRole:e}=er();return a.jsx(dj,{currentUserRole:e,currentUserId:null})}const ad=10;function U3e(){g.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,t]=g.useState(null),[n,r]=g.useState(""),[s,i]=g.useState("Filter by Actions"),[o,l]=g.useState(1),c=async()=>{try{const w=await oe.get("/logs/read-all");t(w.data)}catch(w){console.error("Error fetching audit logs:",w)}};g.useEffect(()=>{c()},[]);const d=g.useMemo(()=>{if(!Array.isArray(e))return[];const w=n.trim().toLowerCase(),j=s?.toUpperCase?.()||"ALL";return e.filter(S=>{const _=S.timestamp?new Date(S.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",E=`${S.entity_type||""} ${S.entity_name||S.entity_details?.name||S.entity_details?.title||S.entity_id||""}`,A=`${S.logger?.first_name||""} ${S.logger?.last_name||""}`,T=[_,A,S.action,S.entity_type,E,S.description],R=w===""||T.some(W=>W==null?!1:W.toString().toLowerCase().includes(w)),U=j==="FILTER BY ACTIONS"||(S.action||"").toUpperCase()===j;return R&&U}).sort((S,_)=>{const E=S.timestamp?new Date(S.timestamp).getTime():0;return(_.timestamp?new Date(_.timestamp).getTime():0)-E})},[e,n,s]),m=Math.max(1,Math.ceil(d.length/ad)||1);g.useEffect(()=>{l(1)},[n,s]),g.useEffect(()=>{l(w=>{const j=Math.max(1,Math.ceil(d.length/ad)||1);return w>j?j:w})},[d.length]);const h=g.useMemo(()=>{const w=(o-1)*ad;return d.slice(w,w+ad)},[d,o]);d.length===0||(o-1)*ad+1,Math.min(o*ad,d.length);const p=()=>l(w=>Math.max(w-1,1)),b=()=>l(w=>Math.min(w+1,m)),v=()=>{if(!d.length){jx.error("No logs to export!");return}const w=["Timestamp","User","Action","Resource","Details"],j=d.map(A=>[new Date(A.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${A.logger?.first_name||""} ${A.logger?.last_name||""}`.trim(),A.action,`${A.entity_type}: ${A.entity_id}`,A.description||""]),C=[w.join(","),...j.map(A=>A.map(T=>`"${String(T).replace(/"/g,'""')}"`).join(","))].join(`
`),S=new Blob([C],{type:"text/csv;charset=utf-8;"}),_=URL.createObjectURL(S),E=document.createElement("a");E.href=_,E.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL(_)},x=w=>{switch((w||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&a.jsx(yt,{message:"Loading audit logs..."}),a.jsx(Nx,{toastOptions:{duration:1e3}}),a.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[a.jsx(ft,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),a.jsxs("p",{className:"text-sm text-blue-700",children:[a.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(mr,{className:"text-blue-600",size:20}),a.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:v,children:[a.jsx(Sc,{className:"mr-2"}),"Export Logs"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[a.jsx(bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search audit logs",value:n,onChange:w=>r(w.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:s,onChange:w=>i(w.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),a.jsx("option",{value:"CREATE",children:"CREATE"}),a.jsx("option",{value:"DELETE",children:"DELETE"}),a.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),a.jsx("th",{className:"py-3 px-4",children:"User"}),a.jsx("th",{className:"py-3 px-4",children:"Action"}),a.jsx("th",{className:"py-3 px-4",children:"Resource"}),a.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),a.jsx("tbody",{children:Array.isArray(d)&&d.length>0?h.map((w,j)=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(w.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),a.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.name}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${x(w.action)}`,children:w.action})}),a.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[w.entity_type,": ",w.entity_id]}),a.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.description})]},j)):a.jsx("tr",{children:a.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),a.jsx(Et,{className:"mt-4",totalItems:d.length,pageSize:ad,currentPage:o,onPrev:p,onNext:b,label:"logs"})]})}const nU=["To Do","In Progress","Review","Completed"],ag=10,F3e=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const n=t.getTimezoneOffset();return new Date(t.getTime()-n*60*1e3).toISOString().slice(0,16)},aU=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},B3e=e=>{const t=e.subject?.trim()??"",n=e.description?.trim()??"",r=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),e.status&&String(e.status).toUpperCase();let s=null,i=null,o=null,l=null;e.relatedType1==="Lead"&&e.relatedTo1?s=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?o=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2&&(l=Number(e.relatedTo2)));const c=e.assignedTo?Number(e.assignedTo):null,d=o||l||i||s,m=o?"Contact":l?"Deal":i?"Account":s?"Lead":null;return{title:t,description:n,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:c,notes:r,is_personal:!1,lead_id:s,account_id:i,contact_id:o,deal_id:l,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:d,related_type:m}},H3e=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",n=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",r=e.due_date||e.dueDate||null,s=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",o=()=>e.lead?.id||e.lead_id,l=()=>e.account?.id||e.account_id,c=()=>e.contact?.id||e.contact_id,d=()=>e.deal?.id||e.deal_id,m=()=>e.task_assign_to?.id||e.assigned_to,h=()=>e.lead?.title||e.lead_id,p=()=>e.account?.name||e.account_id,b=()=>i||e.contact_id,v=()=>e.deal?.name||e.deal_id;let x="Lead",w="",j="",C="",S="Lead",_="",E="",A="";const T=l(),R=p(),U=o(),W=h();if(T){x="Account",S="Account",_=R,w=String(T);const I=c(),M=d(),H=b(),q=v();I?(j="Contact",E="Contact",A=H,C=String(I)):M&&(E="Deal",j="Deal",A=q,C=String(M))}else U?(S="Lead",_=W,x="Lead",w=String(U)):e.related_type==="Account"&&(x="Account",w=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:e.status||"Not started",dueDate:r,dateAssigned:s,assignedToId:m()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:n,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:S,relatedTo1Text:_,relatedType2Text:E,relatedTo2Text:A,subject:e.title,relatedType1:x,relatedTo1:w,relatedType2:j,relatedTo2:C}};function G3e(){g.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=Ut(),[n,r]=g.useState("board"),[s,i]=g.useState(!1),[o,l]=g.useState(null),[c,d]=g.useState(!1),[m,h]=g.useState([]),[p,b]=g.useState(!0),[v,x]=g.useState(""),[w,j]=g.useState("Filter by Status"),[C,S]=g.useState("Filter by Priority"),[_,E]=g.useState([]),[A,T]=g.useState(1),[R,U]=g.useState(null),[W,I]=g.useState(!1),M=rt(),H=Xt(),[q,ae]=g.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""});g.useEffect(()=>{const O=H.state?.openTaskModal,ce=H.state?.initialTaskData;O&&(i(!0),ce&&ae(de=>({...de,...ce})),M(H.pathname,{replace:!0,state:{}}))},[H,M]);const K=async()=>{try{const O=await oe.get("/users/all");E(Array.isArray(O.data)?O.data:[])}catch(O){console.error("Failed to fetch users:",O),Q.error("Failed to fetch users.")}},B=async()=>{try{b(!0);const O=await oe.get("/tasks/all"),de=(Array.isArray(O.data)?O.data:[]).map(H3e);de.sort((Ce,Ee)=>{const Ge=Ce.createdAt?new Date(Ce.createdAt):0;return(Ee.createdAt?new Date(Ee.createdAt):0)-Ge}),console.log("Fetched Tasks:",de),h(de),n==="list"&&T(1)}catch(O){console.error("Failed to load tasks:",O),Q.error("Failed to load tasks.")}finally{b(!1)}};g.useEffect(()=>{!t&&e&&(K(),B())},[t,e]);const X=()=>{l(null),ae({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},le=(O=null,ce=!1)=>{l(O),d(ce),O?ae({id:O.id,subject:O.title||"",description:O.description||"",priority:O.priority||"Normal",status:O.status||"Not started",dueDate:F3e(O.dueDate),assignedTo:O.assignedToId?String(O.assignedToId):"",notes:O.notes||"",relatedType1Text:O.relatedType1Text||"",relatedTo1Text:O.relatedTo1Text||"",relatedType2Text:O.relatedType2Text||"",relatedTo2Text:O.relatedTo2Text||"",relatedType1:O.relatedType1||"",relatedTo1:O.relatedTo1||"",relatedType2:O.relatedType2||"",relatedTo2:O.relatedTo2||""}):X(),i(!0)},ue=()=>{i(!1),l(null),d(!1),X()},J=async O=>{const ce=B3e(O);try{o&&!c?(await oe.put(`/tasks/${o.id}`,ce),Q.success("Task updated successfully.")):(await oe.post("/tasks/create",ce),Q.success("Task created successfully.")),i(!1),await B()}catch(de){console.error("Failed to save task:",de);const Ce=de.response?.data?.detail||"Failed to save task.";Q.error(Ce)}},ne=O=>{O&&U({title:"Delete Task",message:a.jsxs(a.Fragment,{children:["Are you sure you want to delete ",a.jsx("span",{className:"font-semibold",children:O.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:O.id}})},pe=async()=>{if(!R?.action){U(null);return}const{action:O}=R;I(!0);try{O.type==="delete"&&(await oe.delete(`/tasks/${O.targetId}`),Q.success("Task deleted successfully."),await B())}catch(ce){console.error("Task action failed:",ce),Q.error("Failed to delete task.")}finally{I(!1),U(null)}},we=()=>{W||U(null)},ye=g.useMemo(()=>{const O=v.trim().toLowerCase();return[...m].sort((de,Ce)=>{const Ee=de.createdAt?new Date(de.createdAt):0;return(Ce.createdAt?new Date(Ce.createdAt):0)-Ee}).filter(de=>{const Ce=O===""||de.title?.toLowerCase().includes(O)||de.description?.toLowerCase().includes(O)||de.assignedToName?.toLowerCase().includes(O)||de.createdBy?.toLowerCase().includes(O),Ee=w==="Filter by Status"||de.status===w,Ge=C==="Filter by Priority"||de.priority===C;return Ce&&Ee&&Ge})},[m,v,w,C]);g.useEffect(()=>{T(1)},[v,w,C,n]),g.useEffect(()=>{if(n==="list"){const O=ye.length===0?1:Math.ceil(ye.length/ag);A>O&&T(O)}},[ye.length,A,n]);const Te=g.useMemo(()=>{if(n==="board")return ye;const O=(A-1)*ag;return ye.slice(O,O+ag)},[ye,A,n]),Ae=g.useMemo(()=>{const O=new Date;return[{title:"To Do",value:m.filter(ce=>ce.status==="Not started").length,icon:Za,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:m.filter(ce=>ce.status==="In progress").length,icon:Bs,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:m.filter(ce=>ce.status==="Completed").length,icon:Fn,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:m.filter(ce=>ce.dueDate&&new Date(ce.dueDate)<O&&ce.status!=="Completed").length,icon:Vp,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:m.filter(ce=>ce.priority==="High").length,icon:ml,color:"text-orange-600",bgColor:"bg-orange-100"}]},[m]),Pe=O=>O.dueDate&&new Date(O.dueDate)<new Date&&O.status!=="Completed",$=O=>{switch(O.status){case"To Do":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In Progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Review":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},Ne=O=>{switch(O){case"To Do":return"bg-blue-100 text-blue-700";case"In Progress":return"bg-purple-100 text-purple-700";case"Review":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},fe=O=>{switch(O){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&a.jsx(yt,{message:"Loading tasks..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(Bs,{className:"text-blue-600"})," Tasks Board"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{type:"button",onClick:()=>le(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[a.jsx(Rt,{})," Create Task"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ae.map(O=>a.jsx(V3e,{...O},O.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search tasks",value:v,onChange:O=>x(O.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[a.jsxs("select",{value:w,onChange:O=>j(O.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"Filter by Status"}),nU.map(O=>a.jsx("option",{children:O},O))]}),a.jsxs("select",{value:C,onChange:O=>S(O.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"Filter by Priority"}),a.jsx("option",{children:"High"}),a.jsx("option",{children:"Normal"}),a.jsx("option",{children:"Low"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("button",{type:"button",onClick:()=>r("board"),className:`px-4 py-2 rounded-full text-sm ${n==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),a.jsx("button",{type:"button",onClick:()=>r("list"),className:`px-4 py-2 rounded-full text-sm ${n==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&ye.length===0&&a.jsx("p",{className:"text-center text-gray-500 mt-10 p-4 bg-white shadow rounded-lg",children:"No tasks found matching current filters."}),!p&&!t&&ye.length>0&&n==="board"&&a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:nU.map(O=>{const ce=Te.filter(de=>de.status===O);return a.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),a.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:O}),a.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:ce.length})]}),a.jsx("div",{className:`space-y-3 ${ce.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:ce.length>0?ce.map(de=>a.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${$(de)}`,onClick:()=>le(de,!0),children:[a.jsxs("div",{className:"text-left flex-1",children:[a.jsx("p",{className:"font-medium text-gray-800 text-sm",children:de.title}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",de.priority]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",de.assignedToName]}),a.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",a.jsx("span",{className:Pe(de)?"text-red-600":"text-gray-600",children:de.dateAssigned?aU(de.dateAssigned):""})]})]}),a.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[a.jsx("button",{type:"button",onClick:Ce=>{Ce.stopPropagation(),le(de)},className:"text-blue-500 hover:text-blue-700",children:a.jsx(pn,{})}),a.jsx("button",{type:"button",onClick:Ce=>{Ce.stopPropagation(),ne(de)},className:"text-red-500 hover:text-red-700",children:a.jsx(jt,{})})]})]},de.id)):a.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No tasks"})})]},O)})}),!p&&!t&&ye.length>0&&n==="list"&&a.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Actions"})]})}),a.jsx("tbody",{children:Te.map(O=>a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",onClick:()=>{console.log("Opening task in view mode:",O),le(O,!0)},children:[a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",children:O.title}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Ne(O.status||"To Do")}`,children:O.status||"To Do"})}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${fe(O.priority||"Low")}`,children:O.priority||"Low"})}),a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:O.assignedToName||"Unassigned"}),a.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${Pe(O)?"text-red-600 font-medium":""}`,children:O.dateAssigned?aU(O.dateAssigned):""}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-3",onClick:ce=>ce.stopPropagation(),children:[a.jsxs("button",{type:"button",onClick:()=>le(O),className:"text-blue-500 hover:text-blue-700 flex items-center gap-1",children:[a.jsx(pn,{})," Edit"]}),a.jsxs("button",{type:"button",onClick:()=>ne(O),className:"text-red-500 hover:text-red-700 flex items-center gap-1",children:[a.jsx(jt,{})," Delete"]})]})})]},O.id))})]})})}),!p&&!t&&n==="list"&&a.jsx(Et,{className:"mt-6",totalItems:ye.length,pageSize:ag,currentPage:ye.length===0?0:A,onPrev:()=>T(O=>Math.max(O-1,1)),onNext:()=>T(O=>Math.min(O+1,Math.max(1,Math.ceil(ye.length/ag)||1))),label:"tasks"}),a.jsx(Wx,{isOpen:s,onClose:ue,onSave:J,onEdit:()=>d(!1),setFormData:ae,formData:q,isEditing:!c&&!!o,viewMode:c,users:_,currentUser:e,onDelete:ne}),R&&a.jsx(W3e,{open:!0,title:R.title,message:R.message,confirmLabel:R.confirmLabel,cancelLabel:R.cancelLabel,variant:R.variant,onConfirm:pe,onCancel:we,loading:W})]})}function V3e({icon:e,title:t,value:n,color:r,bgColor:s,onClick:i}){return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${s} ${r} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function W3e({open:e,title:t,message:n,confirmLabel:r,cancelLabel:s,variant:i,loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:s}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":r})]})]})})}const rQ=e=>e?e.toUpperCase():"",Qy=e=>{const t=rQ(e);return t==="PLANNED"||t==="IN PROGRESS"?"PLANNED":t==="HELD"||t==="DONE"?"HELD":t==="NOT_HELD"||t==="NOT HELD"?"NOT_HELD":"PLANNED"},q3e=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},Y3e=e=>{const t=rQ(e);switch(t==="PLANNED"?"PENDING":t==="HELD"?"COMPLETED":t==="NOT_HELD"?"CANCELLED":t){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},T_=10,L_={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},K3e=()=>{const e=rt(),t=Xt(),[n]=gr(),r=n.get("id"),s=t.pathname==="/admin/meetings/info";g.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[i,o]=g.useState([]),[l,c]=g.useState(!1),[d,m]=g.useState([]),[h,p]=g.useState(""),[b,v]=g.useState("Filter by Status"),[x,w]=g.useState(!1),[j,C]=g.useState(null),[S,_]=g.useState(1),[E,A]=g.useState(L_),[T,R]=g.useState(!1),[U,W]=g.useState(null),[I,M]=g.useState(!1),[H,q]=g.useState(null),[ae,K]=g.useState(!1);g.useEffect(()=>{const $=t.state?.openMeetingModal,Ne=t.state?.initialMeetingData?.relatedTo||n.get("id");($||Ne)&&(w(!0),t.state?.initialMeetingData&&A(fe=>({...fe,...t.state.initialMeetingData})),e(t.pathname,{replace:!0,state:{}}))},[t,n,e]);const B=async()=>{if(r&&s){const $=sessionStorage.getItem("meetingDetailData");if($)try{const Ne=JSON.parse($);if(Ne.id===parseInt(r)){C(Ne),sessionStorage.removeItem("meetingDetailData");return}}catch(Ne){console.error(Ne)}}c(!0);try{const $=await oe.get("/meetings/admin/fetch-all"),fe=[...Array.isArray($.data)?$.data:[]].sort((O,ce)=>{const de=O?.createdAt?new Date(O.createdAt).getTime():0;return(ce?.createdAt?new Date(ce.createdAt).getTime():0)-de});if(o(fe),r&&!j){const O=fe.find(ce=>ce.id===parseInt(r));O&&C(O)}console.log($.data)}catch{Q.error("Failed to load meetings.")}finally{c(!1)}},X=async()=>{try{const $=await oe.get("/users/all");m(Array.isArray($.data)?$.data:[])}catch($){console.error($)}};g.useEffect(()=>{B(),X()},[]);const le=$=>p($.target.value),ue=g.useMemo(()=>{const $=h.trim().toLowerCase(),Ne=b.trim().toUpperCase();return i.filter(fe=>{const O=[fe?.activity,fe?.description,fe?.relatedTo,fe?.assignedTo],ce=$===""||O.some(Ce=>Ce&&Ce.toString().toLowerCase().includes($)),de=Ne==="FILTER BY STATUS"||Qy(fe.status||"PENDING")===Ne;return ce&&de})},[i,h,b]),J=g.useMemo(()=>{const $=(S-1)*T_;return ue.slice($,$+T_)},[ue,S]),ne=()=>{w(!1),A(L_),R(!1),W(null),M(!1)},pe=()=>{A(L_),R(!1),W(null),w(!0)},we=$=>{let Ne="";if($.meet_assign_to?.id)Ne=String($.meet_assign_to.id);else if($.assignedTo){const We=d.find(Ke=>`${Ke.first_name} ${Ke.last_name}`===$.assignedTo);Ne=We?String(We.id):""}const fe=We=>{if(!We)return"";try{const Ke=new Date(We),He=Ke.getTimezoneOffset()*6e4;return new Date(Ke.getTime()-He).toISOString().slice(0,16)}catch{return""}};let O="Lead",ce="",de="Contact",Ce="";if($.lead)O="Lead",ce=String($.lead.id);else if($.account)O="Account",ce=String($.account.id),$.contact?(de="Contact",Ce=String($.contact.id)):$.deal&&(de="Deal",Ce=String($.deal.id));else if($.relatedType||$.related_type){const We=$.relatedType||$.related_type,Ke=$.related_to||$.relatedToId;We==="Lead"?(O="Lead",ce=String(Ke)):(O="Account",ce=$.account_id?String($.account_id):"")}const Ee={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},Ge=Qy($.status),Je=Ee[Ge]||"Planned";A({subject:$.subject||$.activity||"",location:$.location||"",startTime:fe($.start_time||$.startTime),endTime:fe($.end_time||$.endTime),status:Je,notes:$.description||$.notes||"",assignedTo:Ne,relatedType1:O,relatedTo1:ce,relatedType2:de,relatedTo2:Ce}),R(!0),W($.id),C(null),w(!0)},ye=$=>{if(!$.subject?.trim())return Q.error("Subject is required.");if(!$.startTime)return Q.error("Start time is required.");if($.endTime&&!(new Date($.endTime)-new Date($.startTime)>0))return Q.error("End time must be after start time.");$.relatedType1,$.relatedTo1,$.relatedType1==="Account"&&$.relatedType2&&$.relatedTo2&&($.relatedType2,$.relatedTo2);const Ne={...$,assignedTo:parseInt($.assignedTo),relatedTo1:parseInt($.relatedTo1),relatedTo2:parseInt($.relatedTo2)},fe=T&&U?"update":"create";q({title:fe==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${fe} "${Ne.subject}"?`,confirmLabel:fe==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:fe,payload:Ne,targetId:U,name:Ne.subject}})},Te=async()=>{if(!H?.action)return;const{type:$,payload:Ne,targetId:fe,name:O}=H.action;console.log(Ne),K(!0);try{$==="create"?(M(!0),await oe.post("/meetings/create",Ne),Q.success(`Meeting "${O}" created.`),ne(),await B()):$==="update"?(M(!0),await oe.put(`/meetings/${fe}`,Ne),Q.success(`Meeting "${O}" updated.`),ne(),await B()):$==="delete"&&(await oe.delete(`/meetings/${fe}`),Q.success(`Meeting "${O}" deleted.`),j?.id===fe&&C(null),await B())}catch(ce){const de=ce.response?.data?.detail||"Action failed.";Q.error(typeof de=="string"?de:JSON.stringify(de)),console.error(de)}finally{M(!1),K(!1),q(null)}},Ae=$=>{q({title:"Delete Meeting",message:`Permanently delete "${$.activity}"?`,confirmLabel:"Delete",variant:"danger",action:{type:"delete",targetId:$.id,name:$.activity}})},Pe=async($,Ne)=>{try{await oe.put(`/meetings/${$}`,{status:Ne}),Q.success("Status updated"),B(),C(null)}catch{Q.error("Failed to update status")}};return s&&r?j?a.jsx(Nc,{meeting:j,onClose:()=>{C(null),e("/admin/dashboard")},onEdit:we,onDelete:Ae,onStatusUpdate:Pe}):a.jsx(yt,{message:"Loading meeting..."}):a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[l&&a.jsx(yt,{message:"Loading meetings..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[a.jsx(ft,{className:"mr-2 text-blue-600"})," Meetings"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:pe,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[a.jsx(Rt,{className:"mr-2"})," Add Meeting"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[a.jsx(bt,{className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search meetings",value:h,onChange:le,className:"w-full outline-none"})]}),a.jsxs("select",{value:b,onChange:$=>v($.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[a.jsx("option",{children:"Filter by Status"}),a.jsx("option",{value:"PLANNED",children:"PLANNED"}),a.jsx("option",{value:"HELD",children:"HELD"}),a.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Subject"}),a.jsx("th",{className:"py-3 px-4",children:"Related To"}),a.jsx("th",{className:"py-3 px-4",children:"Start Time"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned"}),a.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),a.jsx("tbody",{children:J.length>0?J.map($=>a.jsxs("tr",{onClick:()=>C($),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[a.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:$.subject}),a.jsxs("td",{className:"py-3 px-4",children:[$.lead&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:$.lead.title}),$.account&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:$.account.name}),$.contact&&a.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[$.contact.first_name," ",$.contact.last_name]}),$.deal&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:$.deal.name})]}),a.jsx("td",{className:"py-3 px-4",children:q3e($.start_time)}),a.jsxs("td",{className:"py-3 px-4",children:[$.meet_assign_to.first_name," ",$.meet_assign_to.last_name]}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Y3e(Qy($.status))}`,children:Qy($.status).replace("_"," ")})})]},$.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),a.jsx(Et,{totalItems:ue.length,pageSize:T_,currentPage:S,onPrev:()=>_($=>Math.max(1,$-1)),onNext:()=>_($=>$+1),label:"meetings"}),x&&a.jsx(wj,{onClose:ne,formData:E,setFormData:A,isEditing:T,onSubmit:ye,isSubmitting:I||ae,users:d}),j&&a.jsx(Nc,{meeting:j,onClose:()=>C(null),onEdit:we,onDelete:Ae,onStatusUpdate:Pe}),H&&a.jsx(Q3e,{open:!0,title:H.title,message:H.message,confirmLabel:H.confirmLabel,variant:H.variant,onConfirm:Te,onCancel:()=>q(null),loading:ae})]})};function Q3e({open:e,title:t,message:n,confirmLabel:r,cancelLabel:s="Cancel",variant:i="primary",loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{onClick:c,disabled:o,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),a.jsx("button",{onClick:l,disabled:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${d}`,children:o?"...":r})]})]})})}const X3e=10,Z3e=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"}],J3e=e=>e?String(e).toUpperCase():"",Im=e=>{const t=J3e(e);return t==="PLANNED"||t==="PENDING"?"PLANNED":t==="HELD"||t==="COMPLETED"?"HELD":t==="NOT HELD"||t==="NOT_HELD"||t==="CANCELLED"?"NOT_HELD":"PLANNED"},k_=e=>{const t=Im(e);return t==="PLANNED"?"PLANNED":t==="HELD"?"HELD":t==="NOT_HELD"?"NOT HELD":"--"},rU=e=>{switch(Im(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},sU=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function eIe(){const[e,t]=g.useState(!1),[n,r]=g.useState(null),[s,i]=g.useState(null),[o,l]=g.useState(null),[c,d]=g.useState(null),[m,h]=g.useState([]),[p,b]=g.useState(null),[v,x]=g.useState(!1),[w,j]=g.useState(null),[C,S]=g.useState(!1),[_,E]=g.useState(!1),[A,T]=g.useState("PLANNED"),[R,U]=g.useState(!1),[W,I]=g.useState(!1),[M]=gr(),H=rt(),q=Xt(),K={subject:"",call_time:(()=>{const k=new Date,Z=k.getFullYear(),re=String(k.getMonth()+1).padStart(2,"0"),be=String(k.getDate()).padStart(2,"0");return`${Z}-${re}-${be}T08:00`})(),duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[B,X]=g.useState(K);g.useEffect(()=>{const k=q.state?.openCallModal,Z=q.state?.initialCallData?.relatedTo1||M.get("id");(k||Z)&&(t(!0),q.state?.initialCallData&&X(re=>({...re,...q.state.initialCallData})),Z&&X(re=>({...re,relatedTo1:Z})),H(q.pathname,{replace:!0,state:{}}))},[q,M,H]);const le=async()=>{try{I(!0);const k=await oe.get("/calls/admin/fetch-all"),re=[...Array.isArray(k.data)?k.data:[]].sort((be,z)=>{const ee=be?.created_at?new Date(be.created_at):0;return(z?.created_at?new Date(z.created_at):0)-ee});h(re)}catch(k){console.error("Error fetching calls:",k),Q.error("Failed to load calls")}finally{I(!1)}},ue=async()=>{try{const k=await oe.get("/users/all");b(k.data)}catch(k){console.error("Error fetching users: ",k)}};g.useEffect(()=>{ue(),le()},[]);const J=[],ne="",pe="Filter by Status",we="Filter by Users",ye=1,Te=m,Ae=m,Pe=m.length,$=m.filter(k=>Im(k.status)==="PLANNED").length,Ne=m.filter(k=>Im(k.status)==="HELD").length,fe=m.filter(k=>Im(k.status)==="NOT_HELD").length,O=[{title:"Total",value:Pe,icon:fr,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:$,icon:Za,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:Ne,icon:Fn,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:fe,icon:hr,color:"text-gray-600",bgColor:"bg-gray-100"}],[ce,de]=g.useState("Overview"),Ce=k=>{const{name:Z,value:re}=k.target;X(be=>{const z={...be,[Z]:re};return Z==="relatedType1"&&(z.relatedTo1="",re==="Lead"?(z.relatedType2=null,z.relatedTo2=null,d([])):re==="Account"&&(z.relatedType2="Contact")),Z==="relatedType2"&&(z.relatedTo2=""),z})};g.useEffect(()=>{const k=async()=>{try{l([]);let Z;B.relatedType1==="Lead"?Z=await oe.get("/leads/admin/getLeads"):B.relatedType1==="Account"&&(Z=await oe.get("/accounts/admin/fetch-all"));let re=[];if(Z&&Array.isArray(Z.data)?re=Z.data:re=[],v&&B.relatedTo1)try{let be;B.relatedType1==="Lead"?be=await oe.get(`/leads/get/${B.relatedTo1}`):B.relatedType1==="Account"&&(be=await oe.get(`/accounts/get/${B.relatedTo1}`)),be&&be.data&&(re.some(ee=>String(ee.id)===String(B.relatedTo1))||(re=[be.data,...re]))}catch(be){console.error("Error fetching specific related item:",be)}l(re)}catch(Z){console.error("Error fetching data:",Z),l([])}};B.relatedType1&&k()},[B.relatedType1,v,B.relatedTo1]),g.useEffect(()=>{const k=async()=>{try{d([]);let Z;if(B.relatedType1==="Account"&&B.relatedTo1)B.relatedType2==="Contact"?Z=await oe.get(`/contacts/from-acc/${B.relatedTo1}`):B.relatedType2==="Deal"&&(Z=await oe.get(`/deals/from-acc/${B.relatedTo1}`));else{d([]);return}Z&&Array.isArray(Z.data)?d(Z.data):d([])}catch(Z){console.error("Error fetching data:",Z),d([])}};B.relatedType2&&k()},[B.relatedType2,B.relatedTo1,B.relatedType1]);const Ee=k=>{if(k.preventDefault(),!B.assigned_to){Q.error("Please assign the call to a user.");return}const Z={...B,duration_minutes:B.duration_minutes?parseInt(B.duration_minutes,10):null,relatedTo1:B.relatedTo1?parseInt(B.relatedTo1,10):null,relatedTo2:B.relatedType1==="Lead"?null:B.relatedTo2?parseInt(B.relatedTo2,10):null,relatedType2:B.relatedType1==="Lead"?null:B.relatedType2,assigned_to:B.assigned_to?parseInt(B.assigned_to,10):null},re=v&&w?"update":"create",be=(B.subject||"").trim()||"Untitled Call";i({title:re==="create"?"Confirm New Call":"Confirm Update",message:re==="create"?`Create "${be}"?`:`Save changes to "${be}"?`,confirmLabel:re==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:re,payload:Z,targetId:w||null,name:be}})},Ge=k=>r(k),Je=()=>{t(!1),x(!1),j(null)},We=async()=>{if(!s?.action){i(null);return}const{action:k}=s,{type:Z,payload:re,targetId:be,name:z}=k;E(!0);try{if(Z==="create")S(!0),await oe.post("/calls/create",re),Q.success(`Call "${z}" created successfully.`),t(!1),X(K),x(!1),j(null),await le();else if(Z==="update"){if(!be)throw new Error("Missing call identifier for update.");S(!0),await oe.put(`/calls/${be}`,re),Q.success(`Call "${z}" updated successfully.`),t(!1),X(K),x(!1),j(null),await le()}else if(Z==="delete"){if(!be)throw new Error("Missing call identifier for deletion.");await oe.delete(`/calls/${be}`),Q.success(`Call "${z}" deleted successfully.`),n?.id===be&&r(null),await le()}}catch(ee){const ie=Z==="create"?"Failed to create call. Please review the details and try again.":Z==="update"?"Failed to update call. Please review the details and try again.":"Failed to delete call. Please try again.",V=ee?.response?.data?.detail||ie;Q.error(V)}finally{(Z==="create"||Z==="update")&&S(!1),E(!1),i(null)}},Ke=()=>{_||i(null)},He=async()=>{if(n?.id)try{U(!0),await oe.put(`/calls/${n.id}`,{status:A}),Q.success(`Status updated to ${k_(A)}`),h(k=>Array.isArray(k)?k.map(Z=>Z.id===n.id?{...Z,status:A}:Z):k),r(null)}catch(k){const Z=k.response?.data?.detail||"Failed to update status.";Q.error(Z)}finally{U(!1)}};g.useEffect(()=>{n&&T(Im(n.status))},[n]);const Se=n?a.jsxs("div",{id:"callModalBackdrop",onClick:k=>k.target.id==="callModalBackdrop"&&r(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[W&&a.jsx(yt,{message:"Loading call details..."}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),a.jsx("button",{onClick:()=>r(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:a.jsx(wn,{size:25})})]}),a.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:n.subject}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${rU(n.status)}`,children:k_(n.status)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const k=ee=>{if(!ee)return"";const ie=new Date(ee),V=ie.getFullYear(),F=String(ie.getMonth()+1).padStart(2,"0"),se=String(ie.getDate()).padStart(2,"0"),xe=String(ie.getHours()).padStart(2,"0"),ge=String(ie.getMinutes()).padStart(2,"0");return`${V}-${F}-${se}T${xe}:${ge}`},Z=n.lead?"Lead":n.account?"Account":"Lead",re=n.lead?n.lead.id:n.account?n.account.id:null,be=Z==="Lead"?null:n.contact?"Contact":n.deal?"Deal":"Contact",z=Z==="Lead"?null:n.contact?n.contact.id:n.deal?n.deal.id:null;X({subject:n.subject||"",call_time:k(n.call_time),duration_minutes:n.duration_minutes?String(n.duration_minutes):"",direction:n.direction||"Outgoing",status:n.status||"Planned",notes:n.notes||"",relatedType1:Z,relatedType2:be,relatedTo1:re?String(re):"",relatedTo2:z?String(z):"",assigned_to:n.call_assign_to?.id?String(n.call_assign_to.id):""}),x(!0),j(n.id),r(null),t(!0)},children:[a.jsx(Rn,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>{const k=n.subject||"this call";i({title:"Delete Call",message:`Are you sure you want to permanently delete "${k}"? This action cannot be undone.`,confirmLabel:"Delete Call",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:n.id,name:k}})},children:[a.jsx(jt,{className:"mr-2"}),"Delete"]})]})]})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(k=>a.jsx("button",{onClick:()=>de(k),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${ce===k?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:k},k))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[ce==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsx(ko,{label:"Call Time",value:sU(n.call_time)}),a.jsx(ko,{label:"Duration",value:n.duration_minutes?`${n.duration_minutes} min`:null}),a.jsx(ko,{label:"Direction",value:n.direction||"--"}),a.jsx(ko,{label:"Assigned To",value:`${n.call_assign_to.first_name} ${n.call_assign_to.last_name}`}),n.lead&&a.jsx(ko,{label:"Lead",value:n.lead.title}),n.account&&a.jsx(ko,{label:"Account",value:n.account.name}),n.contact&&a.jsx(ko,{label:"Contact",value:`${n.contact.first_name} ${n.contact.last_name}`}),n.deal&&a.jsx(ko,{label:"Deal",value:n.deal.name}),a.jsx(ko,{label:"Created At",value:sU(n.created_at)})]})}),ce==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Call Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:n.notes||"No notes available."})]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:A,onChange:k=>T(k.target.value),children:[a.jsx("option",{value:"PLANNED",children:"PLANNED"}),a.jsx("option",{value:"HELD",children:"HELD"}),a.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),a.jsx("button",{onClick:He,disabled:R,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:R?"Updating...":"Update"})]})]})]})]})]}):null,Ve=e?a.jsx("div",{id:"modalBackdrop",onClick:k=>k.target.id==="modalBackdrop"&&Je(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[a.jsx("button",{onClick:Je,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(St,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:v?"Edit Call":"Add New Call"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:Ee,children:[a.jsx(nIe,{label:"Subject",className:"md:col-span-2",name:"subject",value:B.subject,onChange:Ce,disabled:C,required:!0}),a.jsxs("div",{className:"w-full flex flex-col",children:[a.jsxs("select",{name:"relatedType1",onChange:Ce,value:B.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:C,children:[a.jsx("option",{value:"Lead",children:"Lead"}),a.jsx("option",{value:"Account",children:"Account"})]}),a.jsx(P_,{items:Array.isArray(o)?o:[],value:B.relatedTo1??"",placeholder:`Search ${B.relatedType1||"here"}...`,getLabel:k=>B.relatedType1==="Lead"?k.title:k.name??"",onChange:k=>X(Z=>({...Z,relatedTo1:k})),disabled:C})]}),a.jsxs("div",{className:"w-full flex flex-col",children:[a.jsxs("select",{name:"relatedType2",onChange:Ce,value:B.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:B.relatedType1==="Lead"||C,children:[a.jsx("option",{value:"Contact",children:"Contact"}),a.jsx("option",{value:"Deal",children:"Deal"})]}),a.jsx(P_,{disabled:B.relatedType1==="Lead"||C,items:Array.isArray(c)?c:[],value:B.relatedTo2??"",placeholder:B.relatedType1==="Lead"?"":Array.isArray(c)&&c.length>0?`Search ${B.relatedType2||"Contact"}...`:`No ${B.relatedType2||""} data found`,getLabel:k=>B.relatedType2==="Contact"?`${k.first_name??""} ${k.last_name??""}`.trim():k.name??"",onChange:k=>X(Z=>({...Z,relatedTo2:k}))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),a.jsx("input",{type:"datetime-local",value:B.call_time,onChange:Ce,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),a.jsxs("div",{className:"w-full",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),a.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[a.jsx("input",{type:"tel",value:B.duration_minutes,onChange:Ce,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),a.jsx("p",{children:"minutes"})]})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Assign To"}),a.jsx(P_,{items:Array.isArray(p)?p:[],value:B.assigned_to??"",placeholder:"Search an account...",getLabel:k=>`${k.first_name} ${k.last_name}`,onChange:k=>X(Z=>({...Z,assigned_to:k}))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),a.jsxs("select",{name:"direction",onChange:Ce,value:B.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[a.jsx("option",{value:"Incoming",children:"Incoming"}),a.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),a.jsxs("select",{name:"status",onChange:Ce,value:B.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[a.jsx("option",{value:"Planned",children:"Planned"}),a.jsx("option",{value:"Held",children:"Held"}),a.jsx("option",{value:"Not held",children:"Not held"})]})]}),a.jsx(aIe,{className:"col-span-2",label:"Notes",value:B.notes,onChange:Ce,name:"notes"}),a.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[a.jsx("button",{type:"button",onClick:Je,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:C,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:C?"Saving...":v?"Update Call":"Save Call"})]})]})]})}):null;return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(fr,{className:"mr-2 text-blue-600"})," Calls"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{X(K),x(!1),j(null),t(!0)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(Rt,{className:"mr-2"})," Add Call"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:O.map(k=>a.jsx(tIe,{...k},k.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[a.jsx(bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",defaultValue:ne})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[a.jsxs("select",{defaultValue:pe,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[a.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),Z3e.map(k=>a.jsx("option",{value:k.value,children:k.label},k.value))]}),a.jsxs("select",{defaultValue:we,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[a.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),J.map(k=>a.jsx("option",{value:k.name,children:k.name},k.id))]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Subject"}),a.jsx("th",{className:"py-3 px-4",children:"Related To"}),a.jsx("th",{className:"py-3 px-4",children:"Call Time"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),a.jsx("tbody",{children:W?a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"py-10",children:a.jsx(yt,{message:"Loading calls..."})})}):Ae.length>0?Ae.map(k=>a.jsxs("tr",{onClick:()=>Ge(k),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[a.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:k.subject||"--"}),a.jsxs("td",{className:"py-3 px-4",children:[k.lead&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:k.lead.title}),k.account&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:k.account.name}),k.contact&&a.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[k.contact.first_name," ",k.contact.last_name]}),k.deal&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:k.deal.name})]}),a.jsx("td",{className:"py-3 px-4 text-gray-800",children:k.call_time?new Date(k.call_time).toLocaleString():"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800",children:k?.call_assign_to?`${k.call_assign_to.first_name} ${k.call_assign_to.last_name}`:"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${rU(k.status)}`,children:k_(k.status)})})]},k.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),a.jsx(Et,{totalItems:Te.length,pageSize:X3e,currentPage:ye,onPrev:()=>{},onNext:()=>{},label:"calls"})]}),Se,Ve,s&&a.jsx(rIe,{open:!0,title:s.title,message:s.message,confirmLabel:s.confirmLabel,onConfirm:We,onCancel:Ke,loading:_})]})}function tIe({icon:e,title:t,value:n,color:r,bgColor:s}){return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[a.jsx("div",{className:`p-3 rounded-full ${s} ${r} mr-4`,children:a.jsx(e,{size:22})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function nIe(e){return a.jsxs("div",{className:e.className,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),a.jsx("input",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]})}function aIe(e){return a.jsxs("div",{className:e.className,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),a.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function ko({label:e,value:t}){return a.jsxs("p",{children:[a.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",a.jsx("br",{}),a.jsx("span",{className:"break-words",children:t||"--"})]})}function rIe({open:e,title:t,message:n,confirmLabel:r,cancelLabel:s="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:s}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":r})]})]})})}function P_({items:e=[],value:t="",onChange:n,getLabel:r,placeholder:s="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=g.useState(!1),[d,m]=g.useState(""),h=g.useRef(null),p=e.find(x=>String(x.id)===String(t)),b=p?r(p):"",v=g.useMemo(()=>{const x=d.trim().toLowerCase();return(x?e.filter(j=>(r(j)||"").toLowerCase().includes(x)):e).slice(0,o)},[e,d,r,o]);return g.useEffect(()=>{const x=w=>{h.current&&!h.current.contains(w.target)&&c(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]),g.useEffect(()=>{l||m("")},[l]),a.jsxs("div",{ref:h,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:l?d:b,placeholder:s,onFocus:()=>!i&&c(!0),onChange:x=>{m(x.target.value),l||c(!0)},className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:v.length>0?v.map(x=>{const w=String(x.id),j=r(x),C=String(t)===w;return a.jsx("button",{type:"button",onClick:()=>{n(w),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${C?"bg-blue-50":""}`,children:j||"--"},w)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function sIe({toggleSidebar:e}){const[t,n]=g.useState(!1),[r,s]=g.useState(!1),[i,o]=g.useState([]),[l,c]=g.useState(0),d=g.useRef(null),m=g.useRef(null),h=Xt(),p=rt(),{logout:b}=er(),{user:v,fetchUser:x}=Ut(),j={"/manager/dashboard":"Dashboard","/manager/accounts":"Accounts","/manager/contacts":"Contacts","/reports":"Reports","/leads":"Leads","/manager/Audit":"Audit","/manager/targets":"Targets","/manager/leads":"Leads","/manager/quotes":"Quotes","/manager/users":"Users","/manager/deals":"Deals"}[h.pathname]||"Manager Panel";return g.useEffect(()=>{x()},[]),g.useEffect(()=>{const C=()=>x();return window.addEventListener("userProfileUpdated",C),()=>window.removeEventListener("userProfileUpdated",C)},[x]),g.useEffect(()=>{if(!v?.id)return;const C=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",S=window.location.protocol==="https:"?"wss:":"ws:",_=C?"localhost:8000":window.location.host,E=`${S}//${_}/ws/notifications?user_id=${v.id}`,A=new WebSocket(E);return A.onmessage=T=>{const R=JSON.parse(T.data);o(U=>[R,...U]),c(U=>U+1)},()=>A.close()},[v?.id]),g.useEffect(()=>{function C(S){d.current&&!d.current.contains(S.target)&&n(!1),m.current&&!m.current.contains(S.target)&&s(!1)}return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]),a.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative z-50",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:a.jsx(Yp,{className:"text-2xl"})}),a.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:j})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"relative",ref:m,children:[a.jsxs("button",{onClick:()=>s(!r),className:"relative text-gray-600 hover:text-gray-800 transition",children:[a.jsx(Wp,{className:"text-xl"}),l>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] w-4 h-4 flex items-center justify-center rounded-full font-semibold",children:l})]}),r&&a.jsxs("div",{className:"absolute right-0 mt-3 w-80 bg-white rounded-xl shadow-lg border z-50 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200",children:[a.jsxs("div",{className:"p-3 border-b bg-gray-50 flex justify-between items-center",children:[a.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:"Notifications"}),a.jsx("button",{onClick:()=>{o([]),c(0)},className:"text-xs text-blue-600 hover:underline",children:"Clear All"})]}),a.jsx("div",{className:"max-h-60 overflow-y-auto",children:i.length>0?i.map((C,S)=>a.jsx("div",{className:"p-3 border-b text-sm hover:bg-gray-50 cursor-pointer transition",children:C.title||C.message||"New Notification"},S)):a.jsx("div",{className:"p-4 text-center text-gray-500 text-xs",children:"No notifications"})})]})]}),a.jsxs("div",{className:"relative",ref:d,children:[a.jsxs("button",{onClick:()=>n(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded transition",children:[a.jsx("img",{src:v?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 h-8 object-cover rounded-full border border-gray-200"}),a.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[v?.first_name," ",v?.last_name]})]}),t&&a.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4 animate-in fade-in slide-in-from-top-2 duration-200",children:[a.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[a.jsx("img",{src:v?.profile_picture||"https://via.placeholder.com/80",alt:"Profile Large",className:"w-16 h-16 rounded-full object-cover border-2 border-gray-100"}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[v?.first_name," ",v?.middle_name," ",v?.last_name]}),a.jsx("p",{className:"text-[11px] text-gray-600 font-light w-full truncate",children:"Manager"})]})]}),a.jsxs("div",{className:"mt-6 space-y-1 px-2",children:[a.jsx("button",{onClick:()=>{p("/manager/users"),n(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 p-2 rounded text-left transition",children:"Invite Your Team"}),a.jsx("button",{onClick:()=>{p("/manager/manage-account"),n(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 p-2 rounded text-left transition",children:"Manage Your Account"}),a.jsx("div",{className:"border-t border-gray-100 my-2"}),a.jsx("button",{onClick:b,className:"block w-full text-sm text-red-600 hover:bg-red-50 p-2 rounded text-left transition font-medium",children:"Logout"})]})]})]})]})]})}function iIe(){const[e,t]=g.useState(!0),[n,r]=g.useState(!1),[s,i]=g.useState(!1),[o,l]=g.useState(!1),c=Xt(),{user:d}=Ut();g.useEffect(()=>{d&&console.log("Fetched user:",d)},[d]),g.useEffect(()=>{document.title="Panel | Sari-Sari CRM"},[]);const m="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",h="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition",b=["/manager/accounts","/manager/contacts","/manager/leads","/manager/deals","/manager/quotes","/manager/targets","/manager/meetings","/manager/manage-account"].includes(c.pathname);return a.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[a.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${o?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[a.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[a.jsxs("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:[" Sari-Sari.CRM"," ",a.jsx("span",{className:"text-[12px] text-gray-700 font-medium align-bottom",children:"v2"})]}),d&&d.company&&a.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:d.company.company_name})]}),a.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[a.jsxs(st,{to:"/manager/dashboard",className:({isActive:v})=>v?m:h,children:[a.jsx(qp,{className:"text-lg"}),a.jsx("span",{children:"Dashboard"})]}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>t(!e),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx($n,{className:"text-lg"}),"Sales"]}),a.jsx(Rr,{className:`transition-transform ${e||b?"rotate-180":""}`})]}),(e||b)&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(st,{to:"/manager/accounts",className:({isActive:v})=>v?m:h,children:[a.jsx(en,{})," Accounts"]}),a.jsxs(st,{to:"/manager/contacts",className:({isActive:v})=>v?m:h,children:[a.jsx(Qt,{})," Contacts"]}),a.jsxs(st,{to:"/manager/leads",className:({isActive:v})=>v?m:h,children:[a.jsx(Ln,{})," Leads"]}),a.jsxs(st,{to:"/manager/deals",className:({isActive:v})=>v?m:h,children:[a.jsx($n,{})," Deals"]}),a.jsxs(st,{to:"/manager/quotes",className:({isActive:v})=>v?m:h,children:[a.jsx(Br,{})," Quotes"]}),a.jsxs(st,{to:"/manager/targets",className:({isActive:v})=>v?m:h,children:[a.jsx(ms,{})," Targets"]})]})]}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>r(!n),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(mr,{className:"text-lg"}),"Activity"]}),a.jsx(Rr,{className:`transition-transform ${n?"rotate-180":""}`})]}),n&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(st,{to:"/manager/tasks",className:({isActive:v})=>v?m:h,children:[a.jsx(kn,{})," Tasks"]}),a.jsxs(st,{to:"/manager/meetings",className:({isActive:v})=>v?m:h,children:[a.jsx(ft,{})," Meetings"]}),a.jsxs(st,{to:"/manager/calls",className:({isActive:v})=>v?m:h,children:[a.jsx(fr,{})," Calls"]}),a.jsxs(st,{to:"/manager/audit",className:({isActive:v})=>v?m:h,children:[a.jsx(mr,{})," Audit"]})]})]}),a.jsx("div",{children:a.jsx(st,{to:"/manager/territory",className:({isActive:v})=>v?m:h,children:a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(_c,{className:"text-lg"}),"Territory"]})})}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!s),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(ZT,{className:"text-lg"}),"User Management"]}),a.jsx(Rr,{className:`transition-transform ${s?"rotate-180":""}`})]}),s&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(st,{to:"/manager/users",className:({isActive:v})=>v?m:h,children:[a.jsx(en,{})," Users"]}),a.jsxs(st,{to:"/manager/manage-account",className:({isActive:v})=>v?m:h,children:[a.jsx(Qt,{})," Manage Account"]})]})]})]}),a.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),o&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>l(!1)}),a.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[a.jsx(sIe,{toggleSidebar:()=>l(!o)}),a.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:a.jsx(yf,{})})]})]})}const oIe=e=>a.jsx(bt,{...e}),lIe=e=>a.jsx(Cc,{...e}),cIe=e=>a.jsx(eL,{...e}),sQ=e=>a.jsx(Za,{...e}),dIe=e=>a.jsx(xw,{...e}),uIe=e=>a.jsx(KT,{...e}),mIe=e=>a.jsx(ft,{...e}),fIe=e=>a.jsx(pt,{...e}),hIe=e=>a.jsx(XT,{...e}),iQ=e=>a.jsx(QT,{...e}),oQ=e=>a.jsx(en,{...e}),lQ=e=>a.jsx(Qt,{...e}),gIe=e=>a.jsx(Ln,{...e}),pIe=e=>a.jsx($n,{...e}),xIe=e=>a.jsx(Br,{...e}),yIe=e=>a.jsx(ms,{...e}),bIe=e=>a.jsx(Fn,{...e}),vIe=e=>a.jsx(ft,{...e}),wIe=e=>a.jsx(fr,{...e}),NIe=e=>a.jsx(_c,{...e}),jIe=e=>a.jsx(mr,{...e}),cQ=e=>`P ${new Intl.NumberFormat("en-PH",{minimumFractionDigits:0}).format(e)}`,CIe=e=>{switch(e){case"Negotiation":return{text:"text-purple-700",bg:"bg-purple-100"};case"Proposal":return{text:"text-red-700",bg:"bg-red-100"};case"Qualification":return{text:"text-yellow-700",bg:"bg-yellow-100"};case"Prospecting":return{text:"text-blue-700",bg:"bg-blue-100"};case"Closed Won":return{text:"text-green-700",bg:"bg-green-100"};case"Closed Lost":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},SIe=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},_Ie=e=>{switch(e){case"call":return{Icon:fIe,color:"text-red-500",bgColor:"bg-red-100"};case"qualification":return{Icon:hIe,color:"text-green-600",bgColor:"bg-green-100"};case"meeting":default:return{Icon:mIe,color:"text-blue-500",bgColor:"bg-blue-100"}}},AIe=e=>{switch(e.toUpperCase()){case"HIGH":return{text:"text-red-700",bg:"bg-red-100"};case"LOW":return{text:"text-blue-700",bg:"bg-blue-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},EIe=({searchQuery:e,onSearchChange:t,searchResults:n,onSearchResultClick:r})=>{const s=rt(),[i,o]=g.useState(!1),l=g.useRef(null),c=[{icon:oQ,label:"Account"},{icon:lQ,label:"Contact"},{icon:gIe,label:"Leads"},{icon:pIe,label:"Deals"},{icon:xIe,label:"Quotes"},{icon:yIe,label:"Target"},{icon:bIe,label:"Task"},{icon:vIe,label:"Meeting"},{icon:wIe,label:"Call"},{icon:jIe,label:"Audit"},{icon:NIe,label:"Territory"}];g.useEffect(()=>{const h=p=>{l.current&&!l.current.contains(p.target)&&o(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]);const d=h=>{t(h.target.value),o(h.target.value.trim().length>0)},m=h=>{r&&r(h),o(!1)};return a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 sm:p-4 flex flex-col items-start space-y-4 w-full",children:[a.jsxs("div",{className:"w-full flex justify-center relative",ref:l,children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg lg:mt-3 px-4 py-2 w-full max-w-md md:max-w-lg lg:max-w-2xl focus-within:ring-2 focus-within:ring-blue-500 transition duration-150",children:[a.jsx(oIe,{size:20,className:"text-gray-400 mr-3 flex-shrink-0"}),a.jsx("input",{type:"text",placeholder:"Search Leads, Deals, or Accounts...",className:"focus:outline-none text-base w-full",value:e,onChange:d,onFocus:()=>e.trim().length>0&&o(!0)})]}),i&&Array.isArray(n)&&n.length>0&&a.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:n.map((h,p)=>a.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition duration-150",onClick:()=>m(h),children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:h.name}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:h.type}),h.details&&a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:h.details})]}),a.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${h.type==="Lead"?"bg-blue-100 text-blue-600":h.type==="Deal"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:h.type})]})},p))}),i&&e.trim().length>0&&(!Array.isArray(n)||n.length===0)&&a.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 p-4 text-center text-sm text-gray-500",children:"No results found"})]}),a.jsx("div",{className:"w-full overflow-x-auto lg:overflow-x-hidden scroll-smooth flex justify-center",children:a.jsx("div",{className:"flex flex-nowrap space-x-3 lg:space-x-4 xl:space-x-3 px-2 sm:px-0",children:c.map((h,p)=>a.jsxs("div",{className:"relative flex-shrink-0 group",children:[a.jsx("button",{className:"p-3 text-gray-500 hover:text-gray-900 transition duration-150 rounded-full hover:bg-gray-100 focus:outline-none cursor-pointer","aria-label":h.label,onClick:()=>{switch(h.label){case"Account":s("/manager/accounts");break;case"Contact":s("/manager/contacts");break;case"Leads":s("/manager/leads");break;case"Deals":s("/manager/deals");break;case"Quotes":s("/manager/quotes");break;case"Target":s("/manager/targets");break;case"Task":s("/manager/tasks");break;case"Meeting":s("/manager/meetings");break;case"Call":s("/manager/calls");break;case"Audit":s("/manager/audit");break;case"Territory":s("/manager/territory");break;default:console.log(`Clicked ${h.label}`)}},children:a.jsx(h.icon,{size:24,className:"lg:scale-95"})}),a.jsx("span",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-1 bg-gray-700 text-white text-xs font-medium rounded-lg whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition duration-200 pointer-events-none z-20 shadow-md",children:h.label})]},p))})})]})},TIe=({action:e,description:t,entity_type:n,entity_name:r,timestamp:s})=>{const i=rt(),o=m=>{if(!m)return"Unknown";const h=new Date(m),b=new Date-h,v=Math.floor(b/6e4),x=Math.floor(b/36e5),w=Math.floor(b/864e5);return v<1?"Just now":v<60?`${v} min ago`:x<24?`${x} hour${x>1?"s":""} ago`:w<7?`${w} day${w>1?"s":""} ago`:h.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},l=e||t||"Action",c=r||n||"System",d=o(s);return a.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i("/manager/audit"),children:[a.jsxs("p",{className:"text-sm text-gray-800 flex-grow font-medium",children:[l," ",a.jsxs("span",{className:"text-gray-500 italic text-xs",children:["(",c,")"]})]}),a.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-4",children:d})]})},LIe=({logs:e,loading:t})=>{const n=rt();return a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Recent Logs"}),a.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>n("/manager/audit"),children:[a.jsx("span",{children:"See All"}),a.jsx(iQ,{size:14,className:"transform -rotate-45"})]})]}),e&&e.length>0?a.jsx("ul",{className:"space-y-1",children:e.slice(0,3).map((r,s)=>a.jsx(TIe,{...r},s))}):a.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No recent logs"})]})},kIe=({icon:e,title:t,value:n,color:r,bgColor:s,loading:i,onClick:o})=>a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o||(()=>console.log(`Clicked metric card: ${t}`)),children:[a.jsx("div",{className:`p-3 rounded-full ${s} ${r} mr-4`,children:a.jsx(e,{size:20})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n||0})]})]}),PIe=({revenueData:e,loading:t})=>{const n=rt(),r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=g.useMemo(()=>{if(console.log("=== RevenueChart calculateRevenueData ==="),console.log("revenueData:",e),console.log("revenueData length:",e?.length),!e||e.length===0){console.log("No revenue data, returning empty chart");const w=new Date;w.getFullYear();const j=w.getMonth(),C=[],S=[];for(let _=0;_<=j;_++)C.push(r[_]),S.push(0);return{labels:C,revenues:S,maxRevenue:0}}const l={};let c=0,d=0;console.log("Processing deals:",e.length),e.forEach((w,j)=>{const C=w.close_date||w.closeDate||null,S=C&&C!==null&&C!=="",_=w.stage||"",E=_.toUpperCase()==="CLOSED_WON"||_==="CLOSED_WON";let A=w.amount;A&&typeof A=="object"&&A.toString?A=parseFloat(A.toString()):A=parseFloat(A)||0;const T=A>0;if(E&&(d++,console.log(`Deal ${j+1} (CLOSED_WON):`,{id:w.id,name:w.name,stage:_,close_date:C,close_date_type:typeof C,amount:A,amount_type:typeof w.amount,hasCloseDate:S,hasAmount:T,willBeAdded:S&&T,allFields:Object.keys(w)})),S&&E&&T)try{let R=new Date(C);if(isNaN(R.getTime())){const U=String(C).split("T")[0];R=new Date(U+"T00:00:00")}if(isNaN(R.getTime()))console.warn(` Invalid date for deal ${w.id}:`,C,"Type:",typeof C);else{const U=R.getFullYear(),W=R.getMonth()+1,I=`${U}-${String(W).padStart(2,"0")}`;l[I]||(l[I]=0),l[I]+=A,c++,console.log(` Added deal ${w.id} to month ${I}: ${A}, total: ${l[I]}`),console.log(`  - Close date: ${C} -> Parsed: ${R.toISOString()} -> Month: ${I} (Year: ${U}, Month: ${W})`)}}catch(R){console.error("Error parsing deal date:",C,R)}else E&&console.warn(` Deal ${w.id} is CLOSED_WON but missing data:`,{hasCloseDate:S,hasAmount:T,closeDate:C,amount:A,originalAmount:w.amount})}),console.log("Summary:",{totalDeals:e.length,closedWonDeals:d,validDealsForGraph:c,monthlyRevenue:l});const m=Object.keys(l).map(w=>parseInt(w.split("-")[0])),h=m.length>0?[...new Set(m)].sort():[],p=new Date().getFullYear();new Date().getMonth();const b=[],v=[];for(let w=0;w<12;w++){const j=`${p}-${String(w+1).padStart(2,"0")}`;b.push(r[w]);const C=l[j]||0;v.push(C),C>0&&console.log(`Month ${r[w]} (${j}): ${C}`)}if(h.length>0){const w=Math.max(...h);if(w>p)for(let j=p+1;j<=w;j++)for(let C=0;C<12;C++){const S=`${j}-${String(C+1).padStart(2,"0")}`,_=l[S]||0;b.push(`${r[C]} ${j}`),v.push(_),_>0&&console.log(`Month ${r[C]} ${j} (${S}): ${_}`)}}const x=Math.max(...v,1);return console.log("Final chart data:",{labels:b,revenues:v,maxRevenue:x,hasData:v.some(w=>w>0)}),{labels:b,revenues:v,maxRevenue:x}},[e]),i=s.labels,o=s.revenues;return console.log("=== FINAL CHART DATA ==="),console.log("X Axis (Months):",i),console.log("Y Axis (Revenue):",o),console.log("Has any revenue > 0:",o.some(l=>l>0)),console.log("All revenue values:",o),console.log("Max revenue:",s.maxRevenue),a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Overview"}),a.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>n("/manager/deals"),children:[a.jsx("span",{children:"See All"}),a.jsx(iQ,{size:14,className:"transform -rotate-45"})]})]}),a.jsx("div",{className:"h-80 relative flex-1 flex items-center justify-center p-6",children:a.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i&&i.length>0&&o&&o.length>0?a.jsx($k,{xAxis:[{data:i,scaleType:"point"}],yAxis:[{valueFormatter:l=>l>=1e3?`${(l/1e3).toFixed(0)}k`:l.toString()}],series:[{data:o,showMark:!0,area:!0}],height:320,width:void 0,grid:{vertical:!0,horizontal:!0},margin:{top:40,right:40,bottom:50,left:50},sx:{width:"100%",maxWidth:"100%"}}):a.jsxs("div",{className:"text-center text-gray-500",children:[a.jsx("p",{className:"text-sm",children:"No revenue data available"}),a.jsx("p",{className:"text-xs mt-2",children:"Closed won deals with close dates will appear here"})]})})})]})},DIe=({pipelineData:e,loading:t})=>{const n=rt(),r=o=>{const l=(o||"").toUpperCase(),c={PROSPECTING:{name:"Prospecting",color:"bg-blue-500"},QUALIFICATION:{name:"Qualification",color:"bg-yellow-500"},PROPOSAL:{name:"Proposal",color:"bg-orange-500"},NEGOTIATION:{name:"Negotiation",color:"bg-purple-500"},CLOSED_WON:{name:"Closed Won",color:"bg-green-500"},CLOSED_LOST:{name:"Closed Lost",color:"bg-red-500"}};if(c[l])return c[l];const d=["bg-blue-500","bg-yellow-500","bg-orange-500","bg-purple-500","bg-green-500","bg-red-500"],m=Math.abs(l.split("").reduce((h,p)=>h+p.charCodeAt(0),0))%d.length;return{name:o||"Unknown",color:d[m]}},i=(()=>{if(!e||e.length===0)return["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"].map(h=>{const p=r(h);return{stage:p.name,value:0,deals:0,color:p.color}});const o={};e.forEach(m=>{const h=m.stage||"PROSPECTING";o[h]||(o[h]={deals:0,value:0}),o[h].deals+=1,o[h].value+=parseFloat(m.amount||0)});const l=Math.max(...Object.values(o).map(m=>m.value),1),c=["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"],d=[];return c.forEach(m=>{const h=r(m),p=o[m]||{deals:0,value:0};d.push({stage:h.name,value:p.value,deals:p.deals,color:h.color,percentage:l>0?p.value/l*100:0})}),d})();return a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Sales Pipeline"}),a.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:()=>n("/manager/deals"),children:"See All"})]}),a.jsx("div",{className:"space-y-4 flex-grow",children:i.slice(0,6).map(o=>a.jsxs("div",{className:"flex flex-col cursor-pointer hover:opacity-85 transition duration-150",onClick:()=>n("/manager/deals"),children:[a.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[a.jsx("span",{className:"font-medium text-gray-700",children:o.stage}),a.jsx("span",{className:"font-semibold text-gray-800",children:cQ(o.value)})]}),a.jsx("div",{className:"relative h-2 rounded-full bg-gray-200",children:a.jsx("div",{className:`absolute top-0 left-0 h-full rounded-full ${o.color}`,style:{width:`${Math.min(o.percentage,100)}%`}})}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[o.deals," Deals"]})]},o.stage))})]})},D_=({title:e,items:t,children:n,onSeeAll:r})=>{const s=rt(),i=()=>{if(r)r();else{const o={"Latest Leads":"/manager/leads","Latest Deals":"/manager/deals","Upcoming Activities":"/manager/tasks"};o[e]&&s(o[e])}};return a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e}),a.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:i,children:"See All"})]}),n]})},OIe=({first_name:e,last_name:t,company_name:n,source:r,created_at:s,id:i})=>{const o=rt(),{text:l,bg:c}=SIe(r||"Website"),d=b=>{if(!b)return"Unknown";const v=new Date(b),w=new Date-v,j=Math.floor(w/6e4),C=Math.floor(w/36e5),S=Math.floor(w/864e5);return j<60?`${j} min ago`:C<24?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):S<7?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):v.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},m=`${e||""} ${t||""}`.trim()||"Unknown",h=n||"Unknown Company",p=d(s);return a.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&o(`/manager/leads/${i}`),children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:m}),a.jsx("p",{className:"text-xs text-gray-500",children:h})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs text-gray-400",children:p}),a.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${l} ${c} px-2 py-0.5 rounded-full`,children:r||"Website"})]})]})})},MIe=({name:e,amount:t,account:n,stage:r,created_at:s,id:i,previousAmount:o})=>{const l=rt(),d={PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"}[r]||r||"Unknown",{text:m,bg:h}=CIe(d),p=parseFloat(t||0),b=o?p>=o?"up":"down":"up",v=b==="up"?dIe:uIe,x=b==="up"?"text-green-400":"text-red-400",w=n?.name||"Unknown Company";return a.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&l(`/manager/deals/info?id=${i}`),children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex-shrink",children:[a.jsx("p",{className:"font-semibold text-sm text-gray-900",children:e||"Unnamed Deal"}),a.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:w}),a.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${m} ${h} px-2 py-0.5 rounded-full`,children:d})]}),a.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[a.jsx("p",{className:"text-md font-bold text-gray-800",children:cQ(p)}),a.jsx(v,{size:16,className:`${x} mt-1`})]})]})})},IIe=({type:e,title:t,assignedTo:n,dueDate:r,scheduledDate:s,priority:i,id:o,activityType:l,fullData:c})=>{const d=rt(),h=l||{Call:"call",Meeting:"meeting",Task:"qualification"}[e]||"meeting",{Icon:p,color:b,bgColor:v}=_Ie(h),{text:x,bg:w}=AIe(i||"MEDIUM"),S=(A=>{if(!A)return"No date set";const T=new Date(A),U=T-new Date,W=Math.floor(U/864e5);return W===0?`Today, ${T.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:W===1?`Tomorrow, ${T.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:W===-1?`Yesterday, ${T.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:T.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(r||s),_=n||"Unassigned",E=()=>{o&&(c?h==="call"?(sessionStorage.setItem("callDetailData",JSON.stringify(c)),d(`/manager/calls/info?id=${o}`)):h==="meeting"?(sessionStorage.setItem("meetingDetailData",JSON.stringify(c)),d(`/manager/meetings/info?id=${o}`)):d("/manager/tasks"):d(h==="call"?`/manager/calls/info?id=${o}`:h==="meeting"?`/manager/meetings/info?id=${o}`:"/manager/tasks"))};return a.jsxs("div",{className:"flex items-start py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:E,children:[a.jsx("div",{className:`p-2 rounded-lg ${v} mr-3 flex-shrink-0 mt-1`,children:a.jsx(p,{size:20,className:`${b}`})}),a.jsxs("div",{className:"flex-grow",children:[a.jsxs("p",{className:"font-medium text-gray-800 flex items-center mb-1",children:[a.jsx("span",{className:"text-xl leading-none mr-2",children:""}),t||"Untitled Activity"]}),a.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[a.jsxs("p",{className:"flex items-center",children:[a.jsx(sQ,{size:14,className:"mr-1.5 text-gray-400"}),S]}),a.jsxs("p",{className:"flex items-center",children:[a.jsx(lQ,{size:14,className:"mr-1.5 text-gray-400"}),"Assigned to: ",_]})]})]}),a.jsx("span",{className:`inline-block text-xs font-medium ${x} ${w} px-2 py-0.5 rounded-full flex-shrink-0 self-center ml-4`,children:(i||"MEDIUM").toUpperCase()})]})},$Ie=()=>{const e=rt(),{user:t}=Ut(),[n,r]=g.useState({activeLeads:0,totalDeals:0,activeAccounts:0,overdueTasks:0}),[s,i]=g.useState([]),[o,l]=g.useState([]),[c,d]=g.useState([]),[m,h]=g.useState([]),[p,b]=g.useState([]),[v,x]=g.useState([]),[w,j]=g.useState(!0),[C,S]=g.useState(null),[_,E]=g.useState(""),[A,T]=g.useState([]),[R,U]=g.useState([]),[W,I]=g.useState([]),[M,H]=g.useState(new Date),q=g.useRef(null),ae=g.useRef(null),K=g.useMemo(()=>{try{if(!_.trim())return[];const ue=_.toLowerCase().trim(),J=[];return Array.isArray(A)&&A.forEach(ne=>{const pe=`${ne.first_name||""} ${ne.last_name||""}`.trim().toLowerCase(),we=(ne.company_name||"").toLowerCase(),ye=(ne.email||"").toLowerCase(),Te=(ne.phone||"").toLowerCase();(pe.includes(ue)||we.includes(ue)||ye.includes(ue)||Te.includes(ue))&&J.push({id:ne.id,name:`${ne.first_name||""} ${ne.last_name||""}`.trim()||"Unnamed Lead",type:"Lead",details:ne.company_name||"No company",route:`/manager/leads/${ne.id}`})}),Array.isArray(R)&&R.forEach(ne=>{const pe=(ne.name||"").toLowerCase(),we=(ne.account?.name||"").toLowerCase(),ye=(ne.description||"").toLowerCase();(pe.includes(ue)||we.includes(ue)||ye.includes(ue))&&J.push({id:ne.id,name:ne.name||"Unnamed Deal",type:"Deal",details:ne.account?.name||"No account",route:`/manager/deals/info?id=${ne.id}`})}),Array.isArray(W)&&W.forEach(ne=>{const pe=(ne.name||"").toLowerCase(),we=(ne.email||"").toLowerCase(),ye=(ne.phone||"").toLowerCase(),Te=(ne.website||"").toLowerCase();(pe.includes(ue)||we.includes(ue)||ye.includes(ue)||Te.includes(ue))&&J.push({id:ne.id,name:ne.name||"Unnamed Account",type:"Account",details:ne.email||ne.phone||"No contact info",route:"/manager/accounts"})}),J.slice(0,10)}catch(ue){return console.error("Error in search:",ue),[]}},[_,A,R,W]),B=ue=>{ue.route&&(e(ue.route),E(""))},X=g.useCallback(async()=>{j(!0),S(null);try{const[ue,J,ne,pe,we,ye,Te]=await Promise.all([oe.get("/leads/manager/getLeads").catch(k=>(console.error("Error fetching leads:",k),{data:[]})),oe.get("/deals/manager/fetch-all").catch(k=>(console.error("Error fetching deals:",k),{data:[]})),oe.get("/accounts/manager/fetch-all").catch(k=>(console.error("Error fetching accounts:",k),{data:[]})),oe.get("/tasks/all").catch(k=>(console.error("Error fetching tasks:",k),{data:[]})),oe.get("/meetings/manager/fetch-all").catch(k=>(console.error("Error fetching meetings:",k),{data:[]})),oe.get("/calls/manager/fetch-all").catch(k=>(console.error("Error fetching calls:",k),{data:[]})),oe.get("/logs/read-all").catch(k=>(console.error("Error fetching logs:",k),{data:[]}))]),Ae=Array.isArray(ue.data)?ue.data:[],Pe=Array.isArray(J.data)?J.data:[],$=Array.isArray(ne.data)?ne.data:[],Ne=Array.isArray(pe.data)?pe.data:[],fe=Array.isArray(we.data)?we.data:[],O=Array.isArray(ye.data)?ye.data:[],ce=Array.isArray(Te.data)?Te.data:[];console.log("=== RAW DEALS API RESPONSE ==="),console.log("Deals count:",Pe.length),Pe.length>0&&(console.log("First deal sample (raw):",JSON.stringify(Pe[0],null,2)),console.log("First deal keys:",Object.keys(Pe[0]))),T(Ae),U(Pe),I($);const de=Ae.filter(k=>k.status&&!["Lost","Converted"].includes(k.status)).length,Ce=Ne.filter(k=>!k.dueDate||k.status==="Completed"?!1:new Date(k.dueDate)<new Date).length;r({activeLeads:de,totalDeals:Pe.length,activeAccounts:$.length,overdueTasks:Ce});const Ee=[...Ae].sort((k,Z)=>new Date(Z.created_at||0)-new Date(k.created_at||0)).slice(0,5);i(Ee);const Ge=[...Pe].sort((k,Z)=>new Date(Z.created_at||0)-new Date(k.created_at||0)).slice(0,5);l(Ge);const Je=new Date,We=[];O.forEach(k=>{const Z=k.due_date||k.call_time,re=(k.status||"").toUpperCase();if(Z){const be=new Date(Z);re==="COMPLETED"||re==="MISSED"||re==="NOT_HELD"||re==="HELD"||We.push({type:"Call",title:k.subject||"Untitled Call",assignedTo:k.assigned_to||(k.call_assign_to?`${k.call_assign_to.first_name||""} ${k.call_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:Z,priority:(k.priority||"MEDIUM").toUpperCase(),id:k.id,activityType:"call",fullData:k})}}),fe.forEach(k=>{const Z=k.dueDate||k.start_time,re=(k.status||"").toUpperCase();if(Z){const be=new Date(Z);re==="COMPLETED"||re==="CANCELLED"||re==="DONE"||We.push({type:"Meeting",title:k.subject||k.activity||"Untitled Meeting",assignedTo:k.assignedTo||(k.meet_assign_to?`${k.meet_assign_to.first_name||""} ${k.meet_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:Z,priority:(k.priority||"MEDIUM").toUpperCase(),id:k.id,activityType:"meeting",fullData:k})}});const Ke={HIGH:1,MEDIUM:2,LOW:3},He=We.sort((k,Z)=>{const re=Ke[k.priority]||3,be=Ke[Z.priority]||3;if(re!==be)return re-be;const z=new Date(k.scheduledDate||0),ee=new Date(Z.scheduledDate||0);return z-ee}).slice(0,5);d(He),h(Pe),console.log("=== ALL DEALS DATA ==="),console.log("Total deals:",Pe.length);const Se=Pe.filter(k=>(k.stage||"").toUpperCase()==="CLOSED_WON");console.log("CLOSED_WON deals:",Se.length),Se.length>0?(console.log("=== CLOSED_WON DEALS DETAILS ==="),Se.forEach((k,Z)=>{let re=k.amount;re&&typeof re=="object"?re.toString?re=parseFloat(re.toString()):re=parseFloat(re):re=parseFloat(re)||0,console.log(`Deal ${Z+1}:`,{id:k.id,name:k.name,stage:k.stage,stage_upper:(k.stage||"").toUpperCase(),amount:k.amount,amount_parsed:re,amount_type:typeof k.amount,close_date:k.close_date,close_date_type:typeof k.close_date,close_date_value:k.close_date?new Date(k.close_date):null,has_close_date:!!k.close_date,has_amount:re>0,all_keys:Object.keys(k),full_deal:k})})):(console.log(" No CLOSED_WON deals found!"),console.log("All deal stages:",Pe.map(k=>k.stage))),x(Pe);const Ve=[...ce].sort((k,Z)=>new Date(Z.timestamp||0)-new Date(k.timestamp||0));b(Ve)}catch(ue){console.error("Error fetching dashboard data:",ue),S("Failed to load dashboard data. Please refresh the page.")}finally{j(!1)}},[]);g.useEffect(()=>(document.title="Dashboard | Sari-Sari CRM",console.log("ManagerDashboard mounted, fetching data..."),X(),q.current=setInterval(()=>{console.log("Auto-refreshing dashboard data..."),X(),H(new Date)},3e4),()=>{q.current&&clearInterval(q.current)}),[X]),g.useEffect(()=>{if(!t||!t.id)return;let ue=0;const J=3;let ne=null;const pe=()=>{const we=window.location.protocol==="https:"?"wss:":"ws:",ye=window.location.hostname==="localhost"?"localhost:8000":window.location.host,Te=`${we}//${ye}/ws/notifications?user_id=${t.id}`;try{const Ae=new WebSocket(Te);ae.current=Ae,Ae.onopen=()=>{console.log(" WebSocket connected for dashboard updates"),ue=0},Ae.onmessage=Pe=>{try{const $=JSON.parse(Pe.data);console.log(" Real-time notification received:",$),$.event&&["new_task","task_updated","new_lead","lead_updated","new_deal","deal_updated","new_account","account_updated","new_meeting","meeting_updated","new_call","call_updated"].includes($.event)&&(console.log(" Refreshing dashboard due to:",$.event),X(),H(new Date))}catch($){console.error("Error parsing WebSocket message:",$)}},Ae.onerror=Pe=>{ue===0&&console.warn(" WebSocket connection unavailable (this is optional)")},Ae.onclose=()=>{ue<J&&(ue++,ne=setTimeout(()=>{t&&t.id&&pe()},5e3))}}catch{console.warn(" WebSocket not available (optional feature)")}};return pe(),()=>{ne&&clearTimeout(ne),ae.current&&(ae.current.close(),ae.current=null)}},[t,X]);const le=[{icon:oQ,title:"Active Leads",value:n.activeLeads,color:"text-blue-600",bgColor:"bg-blue-50",onClick:()=>e("/manager/leads")},{icon:lIe,title:"Total Deals",value:n.totalDeals,color:"text-yellow-600",bgColor:"bg-yellow-50",onClick:()=>e("/manager/deals")},{icon:cIe,title:"Active Account",value:n.activeAccounts,color:"text-green-600",bgColor:"bg-green-50",onClick:()=>e("/manager/accounts")},{icon:sQ,title:"Overdue Tasks",value:n.overdueTasks,color:"text-red-600",bgColor:"bg-red-50",onClick:()=>e("/manager/tasks")}];return console.log("ManagerDashboard rendering, loading:",w,"error:",C),a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative w-full",children:[w&&a.jsx(yt,{}),a.jsxs("div",{className:"max-w-screen-2xl mx-auto",children:[C&&a.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:a.jsx("p",{className:"font-medium",children:C})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 mb-8",children:[a.jsxs("div",{className:"lg:col-span-9 flex flex-col space-y-4",children:[a.jsx(EIe,{searchQuery:_,onSearchChange:E,searchResults:K,onSearchResultClick:B}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:le.map(ue=>a.jsx(kIe,{...ue,loading:w},ue.title))})]}),a.jsx("div",{className:"lg:col-span-3",children:a.jsx(LIe,{logs:p,loading:w})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsx(PIe,{revenueData:v,loading:w})}),a.jsx("div",{children:a.jsx(DIe,{pipelineData:m,loading:w})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx(D_,{title:"Latest Leads",children:s.length>0?s.map((ue,J)=>a.jsx(OIe,{...ue},ue.id||J)):a.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No leads found"})}),a.jsx(D_,{title:"Latest Deals",children:w?a.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mb-2"}),a.jsx("div",{className:"text-sm text-gray-500",children:"Loading deals..."})]}):o.length>0?o.map((ue,J)=>a.jsx(MIe,{...ue},ue.id||J)):a.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No deals found"})}),a.jsx(D_,{title:"Upcoming Activities",children:c.length>0?c.map((ue,J)=>a.jsx(IIe,{...ue},ue.id||J)):a.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No upcoming activities"})})]})]})]})},O_=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Active"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Former"}],M_={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"PROSPECT",territory_id:"",assigned_to:""},ss=e=>e?e.toUpperCase():"",I_=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",RIe=e=>{switch(ss(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},zIe=e=>{switch(ss(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}},rd=10;function UIe(){const e=rt();g.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[t,n]=g.useState(!1),[r,s]=g.useState(!1),[i,o]=g.useState(!1),[l,c]=g.useState(null),[d,m]=g.useState(null),[h,p]=g.useState(M_),[b,v]=g.useState(null),[x,w]=g.useState([]),[j,C]=g.useState(!1),[S,_]=g.useState([]),[E,A]=g.useState(null),[T,R]=g.useState([]),[U,W]=g.useState("Filter by Status"),[I,M]=g.useState(""),[H,q]=g.useState(null),[ae,K]=g.useState(!1),[B,X]=g.useState(1),[le,ue]=g.useState("Overview"),[J,ne]=g.useState(""),[pe,we]=g.useState(!1),ye=g.useCallback(async(P=null)=>{C(!0);try{const he=await oe.get("/accounts/admin/fetch-all"),te=[...Array.isArray(he.data)?he.data:[]].sort((ve,je)=>{const Ie=ve?.created_at||ve?.updated_at||0,tt=je?.created_at||je?.updated_at||0;return new Date(tt)-new Date(Ie)});if(w(te),console.log("Fetch from backend: ",he.data),P){const ve=te.find(je=>je.id===P);v(ve||null)}}catch(he){console.error(he),w([]),he.response?.status===403?Q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):Q.error("Failed to fetch accounts. Please try again later.")}finally{C(!1)}},[v]),Te=g.useCallback(async()=>{try{const P=await oe.get("/users/all");_(Array.isArray(P.data)?P.data:[])}catch(P){console.error(P),P.response?.status===403&&Q.warn("Unable to load users for assignment (permission denied).")}},[]),Ae=g.useCallback(async()=>{try{const P=await oe.get("/territories/fetch");R(Array.isArray(P.data)?P.data:[])}catch(P){console.error(P),P.response?.status===403&&Q.warn("Unable to load territories (permission denied).")}},[]);g.useEffect(()=>{ye(),Te(),Ae()},[ye,Te,Ae]),g.useEffect(()=>{b&&ne(ss(b.status)||"PROSPECT")},[b]);const Pe=x.length,$=g.useMemo(()=>x.filter(P=>P.status?.toLowerCase()==="customer").length,[x]),Ne=g.useMemo(()=>x.filter(P=>P.status?.toLowerCase()==="prospect").length,[x]),fe=g.useMemo(()=>x.filter(P=>P.status?.toLowerCase()==="partner").length,[x]),O=g.useMemo(()=>x.filter(P=>P.status?.toLowerCase()==="active").length,[x]),ce=g.useMemo(()=>x.filter(P=>P.status?.toLowerCase()==="inactive").length,[x]),de=g.useMemo(()=>x.filter(P=>P.status?.toLowerCase()==="former").length,[x]),Ce=g.useMemo(()=>[{title:"Total",value:Pe,icon:en,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:$,icon:Xi,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:Ne,icon:Ln,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:fe,icon:Qt,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:O,icon:Xi,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:ce,icon:Zi,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:de,icon:Zi,color:"text-orange-600",bgColor:"bg-orange-100"}],[Pe,$,Ne,fe,O,ce,de]),Ee=g.useMemo(()=>{const P=I.trim().toLowerCase(),he=U.trim().toUpperCase();return x.filter(G=>{const te=[G?.name,G?.website,G?.industry,G?.territory?.name,G?.phone_number],ve=P===""||te.some(Ie=>Ie==null?!1:Ie.toString().toLowerCase().includes(P)),je=he==="FILTER BY STATUS"||ss(G.status)===he;return ve&&je})},[x,I,U]),Ge=Math.max(1,Math.ceil(Ee.length/rd)||1);g.useEffect(()=>{X(1)},[I,U]),g.useEffect(()=>{X(P=>{const he=Math.max(1,Math.ceil(Ee.length/rd)||1);return P>he?he:P})},[Ee.length]);const Je=g.useMemo(()=>{const P=(B-1)*rd;return Ee.slice(P,P+rd)},[Ee,B]);Ee.length===0||(B-1)*rd+1,Math.min(B*rd,Ee.length);const We=()=>X(P=>Math.max(P-1,1)),Ke=()=>X(P=>Math.min(P+1,Ge)),He=P=>{v(P),ue("Overview"),ne(ss(P?.status)||"PROSPECT")},Se=()=>v(null),Ve=P=>{P.target.id==="accountModalBackdrop"&&!ae&&Se()},k=()=>{n(!1),s(!1),m(null),p(M_),o(!1),A(null)},Z=P=>{P.target.id==="modalBackdrop"&&k()},re=P=>P?new Date(P).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",be=P=>{const{name:he,value:G}=P.target;p(te=>({...te,[he]:G}))},z=()=>{p(M_),s(!1),m(null),n(!0)},ee=P=>{v(null),console.log("edit: ",P),P.assigned_accs?A(P.assigned_accs):A(null),p({name:P.name||"",website:P.website||"",phone_number:P.phone_number||"",billing_address:P.billing_address||"",shipping_address:P.shipping_address||"",industry:P.industry||"",status:ss(P.status)||"PROSPECT",territory_id:P.territory?.id?String(P.territory.id):"",assigned_to:P.assigned_accs?.id?String(P.assigned_accs.id):""}),s(!0),m(P.id),n(!0)},ie=P=>{P&&q({title:"Delete Account",message:a.jsxs("span",{children:["Are you sure you want to permanently delete the account"," ",a.jsx("span",{className:"font-semibold",children:P.name}),"? This action cannot be undone."]}),confirmLabel:"Delete Account",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:P.id,name:P.name}})},V=async()=>{if(!H?.action){q(null);return}const{action:P}=H,{type:he,payload:G,targetId:te,name:ve}=P;K(!0);try{if(he==="create"){o(!0);const je=await oe.post("/accounts/admin",G);Q.success(`Account "${ve}" created successfully.`);const Ie=b?.id||null;k(),await ye(Ie),!b&&je.data?.id}else if(he==="update"){if(!te)throw new Error("Missing account identifier for update.");o(!0),await oe.put(`/accounts/admin/${te}`,G),Q.success(`Account "${ve}" updated successfully.`);const je=b?.id&&b.id===te?te:null;k(),await ye(je),b?.id===te&&v(null)}else if(he==="delete"){if(!te)throw new Error("Missing account identifier for deletion.");const je=b?.id;c(te),await oe.delete(`/accounts/admin/${te}`),Q.success(`Account "${ve}" deleted successfully.`),await ye(je&&je!==te?je:null),je===te&&v(null)}}catch(je){console.error(je);const Ie=he==="create"?"Failed to create account. Please review the details and try again.":he==="update"?"Failed to update account. Please review the details and try again.":"Failed to delete account. Please try again.",tt=je.response?.data?.detail||Ie;Q.error(tt),(he==="create"||he==="update")&&o(!1),he==="delete"&&c(null)}finally{(he==="create"||he==="update")&&o(!1),he==="delete"&&c(null),K(!1),q(null)}},F=()=>{ae||q(null)},se=async()=>{if(!b||!J)return;const P=ss(J),he=ss(b.status);if(P!==he){we(!0);try{await oe.put(`/accounts/admin/${b.id}`,{status:P}),Q.success(`Account status updated to ${I_(P)}`),w(G=>G.map(te=>te.id===b.id?{...te,status:P}:te)),v(null)}catch(G){console.error(G);const te=G.response?.data?.detail||"Failed to update account status. Please try again.";Q.error(te)}finally{we(!1)}}},[xe,ge]=g.useState(!1),Me=P=>{P.preventDefault(),ge(!0);const he=h.name.trim();if(!he){Q.error("Account name is required.");return}if(!h.assigned_to){Q.error("Assigned To is required.");return}const te={name:he,website:h.website?.trim()||null,phone_number:h.phone_number?.trim()||null,billing_address:h.billing_address?.trim()||null,shipping_address:h.shipping_address?.trim()||null,industry:h.industry?.trim()||null,status:h.status||"PROSPECT",territory_id:h.territory_id?Number(h.territory_id):null,assigned_to:h.assigned_to?Number(h.assigned_to):null},ve=r&&d?"update":"create";q({title:ve==="create"?"Confirm New Account":"Confirm Update",message:ve==="create"?a.jsxs("span",{children:["Are you sure you want to create the account"," ",a.jsx("span",{className:"font-semibold",children:he}),"?"]}):a.jsxs("span",{children:["Save changes to the account"," ",a.jsx("span",{className:"font-semibold",children:he}),"?"]}),confirmLabel:ve==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:ve,payload:te,targetId:d||null,name:he}})},De=[{label:"Filter by Status",value:"Filter by Status"},...O_.map(P=>({label:P.label,value:P.value}))],et=H?.action?.type==="delete"?H.action.targetId:null,gt=b&&(l===b.id||et===b.id),Nt=b&&l===b.id,Pt=b?RIe(b.status):"",dn=b?a.jsx("div",{id:"accountModalBackdrop",onClick:Ve,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:P=>P.stopPropagation(),children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),a.jsx("button",{onClick:Se,className:"text-gray-400 hover:text-white cursor-pointer",children:a.jsx(wn,{size:25})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:b.name}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${Pt}`,children:I_(b.status)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>ee(b),disabled:H?.action?.type==="update"&&H.action.targetId===b.id,children:[a.jsx(Rn,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>ie(b),disabled:!!gt,children:Nt?"Deleting...":a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"mr-2"}),"Delete"]})})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(P=>a.jsx("button",{onClick:()=>ue(P),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${le===P?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:P},P))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[le==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Website:"}),a.jsx("p",{children:b.website?a.jsx("a",{href:b.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:b.website}):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Industry:"}),a.jsx("p",{children:b.industry||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Territory:"}),a.jsx("p",{children:b.territory?.name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Phone Number:"}),a.jsx("p",{children:b.phone_number||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Billing Address:"}),a.jsx("p",{children:b.billing_address||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),a.jsx("p",{children:b.shipping_address||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:b.assigned_accs?`${b.assigned_accs.first_name} ${b.assigned_accs.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:b.acc_creator?`${b.acc_creator.first_name} ${b.acc_creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:re(b.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:re(b.updated_at)||"N/A"})]})]})}),le==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:x.notes||"No notes available."})]})]}),le==="Activities"&&a.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:pt,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:ft,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((P,he)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[a.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-gray-600 mt-1",children:a.jsx(P.icon,{size:24})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-gray-900 break-words",children:P.title}),a.jsx("p",{className:"text-sm text-gray-500 break-words",children:P.desc}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),a.jsx("p",{className:"text-sm text-gray-700 break-words",children:P.user})]})]})]}),a.jsx("p",{className:"text-sm text-gray-500 break-words",children:P.date})]},he))]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Account"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(pt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Account"}}}),children:[a.jsx(ft,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Account"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(kn,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:J||ss(b?.status)||"PROSPECT",onChange:P=>ne(P.target.value),children:O_.map(P=>a.jsx("option",{value:P.value,children:P.label},P.value))}),a.jsx("button",{onClick:se,disabled:pe||!J||ss(J)===ss(b?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${pe||!J||ss(J)===ss(b?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:pe?"Updating...":"Update"})]})]})]})]})]})}):null,jn=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[j&&a.jsx(yt,{message:"Loading accounts..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(en,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{z(),ge(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(Rt,{className:"mr-2"})," Add Account"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ce.map(P=>a.jsx(FIe,{...P},P.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search accounts",value:I,onChange:P=>M(P.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:U,onChange:P=>W(P.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:De.map(P=>a.jsx("option",{value:P.value,children:P.label},P.value))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4",children:"Industry"}),a.jsx("th",{className:"py-3 px-4",children:"Territory"}),a.jsx("th",{className:"py-3 px-4",children:"Phone"})]})}),a.jsx("tbody",{children:j?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"Loading accounts..."})}):Ee.length>0?Je.map(P=>a.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>He(P),children:[a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:P.name}),a.jsx("div",{className:"text-gray-500 text-xs break-all",children:P.website||"--"})]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${zIe(P.status)}`,children:I_(P.status)})}),a.jsx("td",{className:"py-3 px-4 text-sm",children:P.industry||"--"}),a.jsx("td",{className:"py-3 px-4 text-sm",children:P.territory?.name||"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[a.jsx(pt,{className:"text-gray-500"}),a.jsx("span",{children:P.phone_number||"--"})]})})]},P.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"No accounts found."})})})]})}),a.jsx(Et,{className:"mt-4",totalItems:Ee.length,pageSize:rd,currentPage:B,onPrev:We,onNext:Ke,label:"accounts"})]}),oa=t?a.jsx("div",{id:"modalBackdrop",onClick:Z,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto hide-scrollbar max-h-[90vh]",onClick:P=>P.stopPropagation(),children:[a.jsx("button",{onClick:()=>{k(),ge(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:i||ae,children:a.jsx(St,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:r?"Edit Account":"Add New Account"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:Me,noValidate:!0,children:[a.jsx("div",{className:"md:col-span-2",children:a.jsx(jm,{label:"Name",name:"name",value:h.name,onChange:be,placeholder:"Company name",required:!0,disabled:i,isSubmitted:xe})}),a.jsx(jm,{label:"Website",name:"website",value:h.website,onChange:be,placeholder:"https://example.com",disabled:i}),a.jsx(jm,{label:"Phone Number",name:"phone_number",value:h.phone_number,onChange:be,placeholder:"09xx xxx xxxx",type:"tel",disabled:i}),a.jsx(jm,{label:"Industry",name:"industry",value:h.industry,onChange:be,placeholder:"Industry",disabled:i}),a.jsx(jm,{label:"Billing Address",name:"billing_address",value:h.billing_address,onChange:be,placeholder:"Billing address",disabled:i}),a.jsx(jm,{label:"Shipping Address",name:"shipping_address",value:h.shipping_address,onChange:be,placeholder:"Shipping address",disabled:i}),a.jsx(iU,{label:"Status",name:"status",value:h.status,onChange:be,options:[{value:"",label:"Select status"},...O_],required:!0,disabled:i}),a.jsx(BIe,{label:"Assigned To",value:h.assigned_to,onChange:P=>{const he=S.find(te=>String(te.id)===String(P));A(he);let G=null;he&&he.assigned_territory&&he.assigned_territory.length===1&&(G=he.assigned_territory[0].id),p(te=>({...te,assigned_to:P,territory_id:G}))},items:S||[],getLabel:P=>`${P?.first_name??""} ${P?.last_name??""} (${P?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:xe,disabled:i||S.length===0}),a.jsx(iU,{label:"Territory",name:"territory_id",value:h.territory_id||"",onChange:be,options:[{value:"",label:E?E.assigned_territory&&E.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"},...E&&E.assigned_territory&&E.assigned_territory.map(P=>({value:String(P.id),label:P.name}))||[]],disabled:i||!E||!E.assigned_territory||E.assigned_territory.length===0}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[a.jsx("button",{type:"button",onClick:()=>{k(),ge(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i||ae,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i||ae,children:i?"Saving...":r?"Update Account":"Save Account"})]})]})]})}):null,Jn=H?a.jsx(GIe,{open:!0,title:H.title,message:H.message,confirmLabel:H.confirmLabel,cancelLabel:H.cancelLabel,variant:H.variant,onConfirm:V,onCancel:F,loading:ae}):null;return a.jsxs(a.Fragment,{children:[jn,dn,oa,Jn]})}function FIe({icon:e,title:t,value:n,color:r="text-blue-600",bgColor:s="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${s} ${r} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function jm({label:e,name:t,value:n,onChange:r,placeholder:s,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const m=d&&!n?.trim();return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:r,placeholder:s,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${m?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function iU({label:e,name:t,value:n,onChange:r,options:s,required:i=!1,disabled:o=!1}){return a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:n??"",onChange:r,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:s.map(l=>a.jsx("option",{value:l.value,children:l.label},l.value))})]})}function BIe({label:e,items:t=[],value:n="",onChange:r,getLabel:s,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const m=d&&c&&!n;return a.jsxs("div",{className:l,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(HIe,{items:t,value:n??"",onChange:r,getLabel:s,placeholder:i,disabled:o,hasError:m})]})}function HIe({items:e=[],value:t="",onChange:n,getLabel:r,placeholder:s="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=g.useState(!1),[m,h]=g.useState(""),p=g.useRef(null),b=e.find(w=>String(w.id)===String(t)),v=b?r(b):"",x=g.useMemo(()=>{const w=m.trim().toLowerCase();return(w?e.filter(C=>(r(C)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,m,r,o]);return g.useEffect(()=>{const w=j=>{p.current&&!p.current.contains(j.target)&&d(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),g.useEffect(()=>{c||h("")},[c]),a.jsxs("div",{ref:p,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:c?m:v,placeholder:s,onFocus:()=>!i&&d(!0),onChange:w=>{h(w.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:x.length>0?x.map(w=>{const j=String(w.id),C=r(w),S=String(t)===j;return a.jsx("button",{type:"button",onClick:()=>{n(j),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:C||"--"},j)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function GIe({open:e,title:t,message:n,confirmLabel:r,cancelLabel:s="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:s}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":r})]})]})})}const rg=10,$_={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:""},Cm=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),sg=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function VIe(){const e=rt();g.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[t,n]=g.useState([]),[r,s]=g.useState(!1),[i,o]=g.useState([]),[l,c]=g.useState([]),[d,m]=g.useState(null),[h,p]=g.useState(!1),[b,v]=g.useState(!1),[x,w]=g.useState(!1),[j,C]=g.useState(null),[S,_]=g.useState(!1),[E,A]=g.useState(null),[T,R]=g.useState($_),[U,W]=g.useState(""),[I,M]=g.useState("Filter by Accounts"),[H,q]=g.useState(null),[ae,K]=g.useState("Overview"),[B,X]=g.useState(1),le=g.useCallback(async(z=null)=>{s(!0);try{const ee=await oe.get("/contacts/admin/fetch-all"),V=[...Array.isArray(ee.data)?ee.data:[]].sort((F,se)=>{const xe=F?.created_at||F?.updated_at||0,ge=se?.created_at||se?.updated_at||0;return new Date(ge)-new Date(xe)});if(n(V),z){const F=V.find(se=>se.id===z);m(F||null)}}catch(ee){console.error(ee),n([]),ee.response?.status===403?Q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):Q.error("Failed to fetch contacts. Please try again later.")}finally{s(!1)}},[m]),ue=g.useCallback(async()=>{try{const z=await oe.get("/accounts/admin/fetch-all"),ie=[...Array.isArray(z.data)?z.data:[]].sort((V,F)=>(V?.name||"").localeCompare(F?.name||""));o(ie)}catch(z){console.error(z),o([]),z.response?.status===403&&Q.warn("Unable to load accounts (permission denied).")}},[]),J=g.useCallback(async()=>{try{const z=await oe.get("/users/all"),ie=[...Array.isArray(z.data)?z.data:[]].sort((V,F)=>Cm(V).localeCompare(Cm(F)));c(ie)}catch(z){console.error(z),c([]),z.response?.status===403&&Q.warn("Unable to load users for assignment (permission denied).")}},[]);g.useEffect(()=>{le(),ue(),J()},[le,ue,J]);const ne=g.useMemo(()=>{const z=new Map;i.forEach(ie=>{ie?.id&&ie?.name&&z.set(String(ie.id),ie.name)}),t.forEach(ie=>{ie?.account_id&&ie?.account?.name&&z.set(String(ie.account_id),ie.account.name)});const ee=Array.from(z.entries()).sort((ie,V)=>ie[1].localeCompare(V[1])).map(([ie,V])=>({value:ie,label:V}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...ee]},[i,t]),pe=g.useMemo(()=>{const z=U.trim().toLowerCase(),ee=I.trim();return t.filter(ie=>{const V=[ie?.first_name,ie?.last_name,ie?.email,ie?.title,ie?.department,ie?.account?.name,ie?.account?.status,ie?.work_phone,ie?.mobile_phone_1,ie?.mobile_phone_2,ie?.assigned_contact?.first_name,ie?.assigned_contact?.last_name,ie?.contact_creator?.first_name,ie?.contact_creator?.last_name,ie?.notes,sg(ie?.created_at),sg(ie?.updated_at)],F=z===""||V.some(xe=>xe==null?!1:xe.toString().toLowerCase().includes(z)),se=ee==="Filter by Accounts"||String(ie.account_id)===ee;return F&&se})},[t,U,I]),we=Math.max(1,Math.ceil(pe.length/rg)||1);g.useEffect(()=>{X(1)},[U,I]),g.useEffect(()=>{X(z=>{const ee=Math.max(1,Math.ceil(pe.length/rg)||1);return z>ee?ee:z})},[pe.length]);const ye=g.useMemo(()=>{const z=(B-1)*rg;return pe.slice(z,z+rg)},[pe,B]),Te=()=>X(z=>Math.max(z-1,1)),Ae=()=>X(z=>Math.min(z+1,we)),Pe=g.useMemo(()=>{if(!b||!E)return i;const z=t.find(ie=>ie.id===E);return!z||!z.account||i.some(ie=>ie.id===z.account.id)?i:[...i,z.account]},[i,b,E,t]),$=g.useCallback(()=>{p(!1),v(!1),A(null),R($_),w(!1)},[]),Ne=z=>{z.target.id==="modalBackdrop"&&!x&&!S&&$()},fe=z=>{const{name:ee,value:ie}=z.target;R(V=>({...V,[ee]:ie}))},O=()=>{R($_),v(!1),A(null),p(!0)},ce=async z=>{if(!z)return;const ee=await oe.get(`/accounts/get/${z.account_id}`);R({first_name:z.first_name||"",last_name:z.last_name||"",account_id:ee.data.id?ee.data.id:"",title:z.title||"",department:z.department||"",email:z.email||"",work_phone:z.work_phone||"",mobile_phone_1:z.mobile_phone_1||"",mobile_phone_2:z.mobile_phone_2||"",notes:z.notes||"",assigned_to:z.assigned_to?String(z.assigned_to):""}),v(!0),A(z.id),p(!0),m(null)},de=z=>{if(!z)return;const ee=Cm(z)||"this contact";C({title:"Delete Contact",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:ee}),"? This action cannot be undone."]}),confirmLabel:"Delete Contact",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:z.id,name:ee}})},Ce=z=>{z.preventDefault();const ee=T.first_name.trim(),ie=T.last_name.trim();if(!ee||!ie){Q.error("First name and last name are required.");return}if(!T.account_id){Q.error("Account is required.");return}const V={first_name:ee,last_name:ie,account_id:Number(T.account_id),title:T.title?.trim()||null,department:T.department?.trim()||null,email:T.email?.trim().toLowerCase()||null,work_phone:T.work_phone?.trim()||null,mobile_phone_1:T.mobile_phone_1?.trim()||null,mobile_phone_2:T.mobile_phone_2?.trim()||null,notes:T.notes?.trim()||null,assigned_to:T.assigned_to?Number(T.assigned_to):null},F=b&&E?"update":"create",se=`${ee} ${ie}`.trim();C({title:F==="create"?"Confirm New Contact":"Confirm Update",message:F==="create"?a.jsxs("span",{children:["Are you sure you want to add"," ",a.jsx("span",{className:"font-semibold",children:se})," to your contacts?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:se}),"?"]}),confirmLabel:F==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:F,payload:V,targetId:E||null,name:se}})},Ee=async()=>{if(!j?.action){C(null);return}const{action:z}=j,{type:ee,payload:ie,targetId:V,name:F}=z;_(!0);try{if(ee==="create"){w(!0),await oe.post("/contacts/admin",ie),Q.success(`Contact "${F}" created successfully.`);const se=d?.id||null;$(),await le(se)}else if(ee==="update"){if(!V)throw new Error("Missing contact identifier for update.");w(!0),await oe.put(`/contacts/admin/${V}`,ie),Q.success(`Contact "${F}" updated successfully.`);const se=d?.id&&d.id===V?V:d?.id||null;$(),await le(se),d?.id===V&&m(null)}else if(ee==="delete"){if(!V)throw new Error("Missing contact identifier for deletion.");const se=d?.id;q(V),await oe.delete(`/contacts/admin/${V}`),Q.success(`Contact "${F}" deleted successfully.`),await le(se&&se!==V?se:null),se===V&&m(null)}}catch(se){console.error(se);const xe=ee==="create"?"Failed to create contact. Please review the details and try again.":ee==="update"?"Failed to update contact. Please review the details and try again.":"Failed to delete contact. Please try again.",ge=se.response?.data?.detail||xe;Q.error(ge)}finally{(ee==="create"||ee==="update")&&w(!1),ee==="delete"&&q(null),_(!1),C(null)}},Ge=()=>{S||C(null)},Je=z=>{m(z),K("Overview")},We=()=>m(null),Ke=z=>{z.target.id==="contactModalBackdrop"&&!S&&We()},He=j?.action?.type==="delete"?j.action.targetId:null,Se=d&&(H===d.id||He===d.id),Ve=d&&H===d.id,k=d?a.jsx("div",{id:"contactModalBackdrop",onClick:Ke,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:z=>z.stopPropagation(),children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),a.jsx("button",{onClick:We,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:a.jsx(wn,{size:25})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:Cm(d)||"Unnamed contact"})}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>ce(d),disabled:S||j?.action?.type==="update"&&j.action.targetId===d.id,children:[a.jsx(Rn,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>de(d),disabled:!!Se,children:Ve?"Deleting...":a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"mr-2"}),"Delete"]})})]})]}),a.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:a.jsx("p",{className:"text-sm text-gray-500",children:d.account?.name||"No associated account"})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(z=>a.jsx("button",{onClick:()=>K(z),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${ae===z?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:z},z))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[ae==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Contact Name:"}),a.jsx("p",{children:Cm(d)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Title:"}),a.jsx("p",{children:d.title||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:d.email?a.jsx("a",{href:`mailto:${d.email}`,className:"text-blue-600 hover:underline break-all",children:d.email}):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Department:"}),a.jsx("p",{children:d.department||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Work Phone:"}),a.jsx("p",{children:d.work_phone||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),a.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),a.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:d.assigned_contact?`${d.assigned_contact.first_name} ${d.assigned_contact.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:d.contact_creator?`${d.contact_creator.first_name} ${d.contact_creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:sg(d.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:sg(d.updated_at)||"N/A"})]})]})}),ae==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]})]}),ae==="Activities"&&a.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:pt,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:ft,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((z,ee)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[a.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-gray-600 mt-1",children:a.jsx(z.icon,{size:24})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-gray-900 break-words",children:z.title}),a.jsx("p",{className:"text-sm text-gray-500 break-words",children:z.desc}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),a.jsx("p",{className:"text-sm text-gray-700 break-words",children:z.user})]})]})]}),a.jsx("p",{className:"text-sm text-gray-500 break-words",children:z.date})]},ee))]})]}),a.jsx("div",{className:"flex flex-col gap-4",children:a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Contact"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(pt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const z=encodeURIComponent(d.email),ee=encodeURIComponent(""),ie=encodeURIComponent(""),V=`https://mail.google.com/mail/?view=cm&fs=1&to=${z}&su=${ee}&body=${ie}`;window.open(V,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Tn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Contact"}}}),children:[a.jsx(ft,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Contact"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(kn,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]})})]})]})]})}):null,Z=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&a.jsx(yt,{message:"Loading contacts..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(en,{className:"mr-2 text-blue-600"})," Contacts Management"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:O,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(Rt,{className:"mr-2"})," Add Contact"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search contacts",value:U,onChange:z=>W(z.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:I,onChange:z=>M(z.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:ne.map(z=>a.jsx("option",{value:z.value,children:z.label},z.value??z.label))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),a.jsx("th",{className:"py-3 px-4",children:"Department"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Created"})]})}),a.jsx("tbody",{children:r?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"Loading contacts..."})}):pe.length>0?ye.map(z=>{const ee=[{Icon:Tn,value:z.email,key:"email"},{Icon:pt,value:z.work_phone,key:"work_phone"},{Icon:xc,value:z.mobile_phone_1,key:"mobile_phone_1"},{Icon:xc,value:z.mobile_phone_2,key:"mobile_phone_2"}].filter(ie=>!!ie.value);return a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>Je(z),children:[a.jsxs("td",{className:"py-3 px-4 align-top",children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:Cm(z)||"--"}),a.jsx("div",{className:"text-xs text-gray-500",children:z.title||"No title"})]}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[a.jsx(vx,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{className:"break-words",children:z.account?.name||"--"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",children:ee.length>0?a.jsx("div",{className:"space-y-1 text-gray-700",children:ee.map(({Icon:ie,value:V,key:F})=>{const se=nt.createElement(ie,{className:"text-gray-500 flex-shrink-0"});return a.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[se,a.jsx("span",{children:V})]},F)})}):a.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[a.jsx($n,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{children:z.department||"--"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[a.jsx(Qt,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{children:z.assigned_contact?`${z.assigned_contact.first_name} ${z.assigned_contact.last_name}`:"Unassigned"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[a.jsx(ft,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{className:"text-xs",children:sg(z.created_at)||"--"})]})})]},z.id)}):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"No contacts found."})})})]})}),a.jsx(Et,{className:"mt-4",totalItems:pe.length,pageSize:rg,currentPage:B,onPrev:Te,onNext:Ae,label:"contacts"})]}),re=h?a.jsx("div",{id:"modalBackdrop",onClick:Ne,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:z=>z.stopPropagation(),children:[a.jsx("button",{onClick:$,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:x||S,children:a.jsx(St,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:b?"Edit Contact":"Add New Contact"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:Ce,children:[a.jsx(Zl,{label:"First Name",name:"first_name",value:T.first_name,onChange:fe,placeholder:"First name",required:!0,disabled:x}),a.jsx(Zl,{label:"Last Name",name:"last_name",value:T.last_name,onChange:fe,placeholder:"Last name",required:!0,disabled:x}),a.jsx(oU,{label:"Account",value:T.account_id,onChange:z=>R(ee=>({...ee,account_id:z})),items:b?Pe:i||[],getLabel:z=>z?.name??"",placeholder:"Search account...",disabled:x||(b?Pe.length===0:i.length===0)}),a.jsx(oU,{label:"Assigned To",value:T.assigned_to,onChange:z=>R(ee=>({...ee,assigned_to:z})),items:l||[],getLabel:z=>`${z?.first_name??""} ${z?.last_name??""} (${z?.role??""})`.trim(),placeholder:"Search assignee...",disabled:x||l.length===0}),a.jsx(Zl,{label:"Title",name:"title",value:T.title,onChange:fe,placeholder:"Job title",disabled:x}),a.jsx(Zl,{label:"Department",name:"department",value:T.department,onChange:fe,placeholder:"Department",disabled:x}),a.jsx(Zl,{label:"Email",name:"email",type:"email",value:T.email,onChange:fe,placeholder:"example@email.com",disabled:x}),a.jsx(Zl,{label:"Work Phone",name:"work_phone",value:T.work_phone,onChange:fe,placeholder:"09xx xxx xxxx",disabled:x}),a.jsx(Zl,{label:"Mobile Phone 1",name:"mobile_phone_1",value:T.mobile_phone_1,onChange:fe,placeholder:"09xx xxx xxxx",disabled:x}),a.jsx(Zl,{label:"Mobile Phone 2",name:"mobile_phone_2",value:T.mobile_phone_2,onChange:fe,placeholder:"09xx xxx xxxx",disabled:x}),a.jsx(qIe,{label:"Notes",name:"notes",value:T.notes,onChange:fe,placeholder:"Additional details...",rows:3,disabled:x,className:"md:col-span-2"}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:$,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:x||S,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:x||S,children:x?"Saving...":b?"Update Contact":"Save Contact"})]})]})]})}):null,be=j?a.jsx(YIe,{open:!0,title:j.title,message:j.message,confirmLabel:j.confirmLabel,cancelLabel:j.cancelLabel,variant:j.variant,onConfirm:Ee,onCancel:Ge,loading:S}):null;return a.jsxs(a.Fragment,{children:[Z,k,re,be]})}function Zl({label:e,name:t,value:n,onChange:r,placeholder:s,type:i="text",required:o=!1,disabled:l=!1}){return a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("input",{type:i,name:t,value:n??"",onChange:r,placeholder:s,required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]})}function oU({label:e,items:t=[],value:n="",onChange:r,getLabel:s,placeholder:i="Search...",disabled:o=!1,className:l=""}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx(WIe,{items:t,value:n??"",onChange:r,getLabel:s,placeholder:i,disabled:o})]})}function WIe({items:e=[],value:t="",onChange:n,getLabel:r,placeholder:s="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=g.useState(!1),[d,m]=g.useState(""),h=g.useRef(null),p=e.find(x=>String(x.id)===String(t)),b=p?r(p):"",v=g.useMemo(()=>{const x=d.trim().toLowerCase();return(x?e.filter(j=>(r(j)||"").toLowerCase().includes(x)):e).slice(0,o)},[e,d,r,o]);return g.useEffect(()=>{const x=w=>{h.current&&!h.current.contains(w.target)&&c(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]),g.useEffect(()=>{l||m("")},[l]),a.jsxs("div",{ref:h,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:l?d:b,placeholder:s,onFocus:()=>!i&&c(!0),onChange:x=>{m(x.target.value),l||c(!0)},className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:v.length>0?v.map(x=>{const w=String(x.id),j=r(x),C=String(t)===w;return a.jsx("button",{type:"button",onClick:()=>{n(w),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${C?"bg-blue-50":""}`,children:j||"--"},w)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function qIe({label:e,name:t,value:n,onChange:r,placeholder:s,rows:i=3,disabled:o=!1,className:l=""}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:r,placeholder:s,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function YIe({open:e,title:t,message:n,confirmLabel:r,cancelLabel:s="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:s}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":r})]})]})})}function dQ({lead:e,onBack:t,fetchLeads:n,onEdit:r,onDelete:s,setSelectedLead:i}){const o=rt(),{leadID:l}=ul(),[c,d]=g.useState(e||null),[m,h]=g.useState("Overview"),[p,b]=g.useState(""),{userRole:v}=er(),{user:x}=Ut();g.useEffect(()=>{console.log("mewo",v),console.log("asdads",x),console.log("lead",c)},[v,x,c]);const[w,j]=g.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[C,S]=g.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[_,E]=g.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),A=async()=>{try{if(e){d(e),b(e.status||"New");return}if(!l)return;const I=await oe.get(`/leads/get/${l}`);d(I.data),b(I.data.status||"New"),j({name:I.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:I.data.territory?.id||null,assigned_to:I.data.assigned_to?.id||null,created_by:I.data.creator?.id||null}),S({last_name:I.data.last_name||"",first_name:I.data.first_name||"",account_id:null,title:I.data.title||"",department:I.data.department||"",email:I.data.email||"",work_phone:I.data.work_phone||"",mobile_phone_1:I.data.mobile_phone_1||"",mobile_phone_2:I.data.mobile_phone_2||"",notes:"",assigned_to:I.data.assigned_to?.id||null,created_by:I.data.creator?.id||null}),E({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:I.data.assigned_to?.id||null,created_by:I.data.creator?.id||null})}catch(I){console.error(I)}};g.useEffect(()=>{e?(d(e),b(e.status||"New")):l&&A()},[l,e]);const T=async()=>{try{const I=await oe.put(`/leads/${c.id}/update/status`,{status:p});console.log(I.data),Q.success("Lead status updated successfully");const M={...c,status:I.data.status};d(M),i&&i(M),n&&n(),t&&t()}catch(I){console.error(I),Q.error("Failed to update lead status")}},R=async I=>{const M={...w,assigned_to:I.assigned_to?.id,billing_address:I.address,shipping_address:I.address,created_by:I.creator?.id,industry:null,name:I.company_name,phone_number:I.work_phone,status:"Prospect",territory_id:I.territory?.id,website:""};console.log("Account data: ",M),console.log("Contact data: ",C),console.log("Deal data: ",_),console.log("Lead data: ",I);try{const q=(await oe.post("/accounts/convertedLead",M)).data.id,ae={...C,account_id:q,assigned_to:I.assigned_to?.id,created_by:I.creator?.id,department:I.department,email:I.email,first_name:I.first_name,last_name:I.last_name,mobile_phone_1:I.mobile_phone_1,mobile_phone_2:I.mobile_phone_2,notes:I.notes,title:I.title,work_phone:I.work_phone},B=(await oe.post("/contacts/convertedLead",ae)).data.id,X=()=>{switch(_.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},le=_.amount&&_.amount!==""?parseFloat(_.amount):0,ue={..._,account_id:q,assigned_to:I.assigned_to?.id,created_by:I.creator?.id,primary_contact_id:B,probability:X(),stage:"Prospecting"},J=await oe.post("/deals/convertedLead",ue),ne=await oe.put(`/leads/convert/${I.id}`);i&&i(null),n(),Q.success("Lead converted successfully!"),t()}catch(H){console.error("Error during conversion:",H);const q=H.response?.data?.detail||H.message||"Failed to convert lead. Please try again.";Q.error(q)}},U=I=>{switch((I||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},W=I=>I.toString().toLowerCase().replace(/\b\w/g,M=>M.toUpperCase());return c?a.jsx(a.Fragment,{children:a.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:a.jsxs("div",{className:"flex items-start justify-between w-full",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),a.jsx("button",{onClick:()=>{t?t():o(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:a.jsx(wn,{size:25})})]})}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[c.first_name," ",c.last_name]}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${U(c.status)}`,children:W(c.status||"New")}),a.jsx("button",{onClick:()=>{c.status==="Qualified"?R(c):Q.warn("Cannot convert lead. Only leads with 'Qualified' status can be converted.")},className:"bg-green-600 hover:bg-green-700 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2 focus:ring-green-400",children:"Convert"})]}),(c.creator?.id===x?.id||c.assigned_to?.id===x?.id)&&a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{type:"button",onClick:()=>{r&&c&&r(c)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[a.jsx(pn,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{type:"button",onClick:()=>{s&&c&&s(c)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[a.jsx(jt,{className:"mr-2"}),"Delete"]})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-4 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(I=>a.jsx("button",{onClick:()=>h(I),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${m===I?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:I},I))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[m==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Name:"}),a.jsxs("p",{children:[c.first_name," ",c.last_name||"N/A"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Company:"}),a.jsx("p",{children:c.company_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Job Title:"}),a.jsx("p",{children:c.title||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Department:"}),a.jsx("p",{children:c.department||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:c.email||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Territory:"}),a.jsx("p",{children:c.territory?.name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:c.assigned_to?`${c.assigned_to.first_name} ${c.assigned_to.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:c.creator?`${c.creator.first_name} ${c.creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Work Phone:"}),a.jsx("p",{children:c.work_phone||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),a.jsx("p",{children:c.mobile_phone_1||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),a.jsx("p",{children:c.mobile_phone_2||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Source:"}),a.jsx("p",{children:c.source||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Address:"}),a.jsx("p",{children:c.address||"N/A"})]})]})}),m==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:c.notes||"No notes available."})]})]}),m==="Activities"&&a.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:pt,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:ft,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((I,M)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[a.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-gray-600 mt-1",children:a.jsx(I.icon,{size:24})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-gray-900 break-words",children:I.title}),a.jsx("p",{className:"text-sm text-gray-500 break-words",children:I.desc}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),a.jsx("p",{className:"text-sm text-gray-700 break-words",children:I.user})]})]})]}),a.jsx("p",{className:"text-sm text-gray-500 break-words",children:I.date})]},M))]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>o("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Lead"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(pt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!c?.email){alert("No email address available");return}const I=encodeURIComponent(c.email),M=encodeURIComponent(""),H=encodeURIComponent(""),q=`https://mail.google.com/mail/?view=cm&fs=1&to=${I}&su=${M}&body=${H}`;window.open(q,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Tn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>o("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Lead"}}}),children:[a.jsx(ft,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>o("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Lead"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(kn,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:p,disabled:c.creator?.id!==x?.id&&c.assigned_to?.id!==x?.id,onChange:I=>b(I.target.value),children:[a.jsx("option",{value:"New",children:"New"}),a.jsx("option",{value:"Contacted",children:"Contacted"}),a.jsx("option",{value:"Qualified",children:"Qualified"}),a.jsx("option",{value:"Converted",children:"Converted"}),a.jsx("option",{value:"Lost",children:"Lost"})]}),(c.creator?.id===x?.id||c.assigned_to?.id===x?.id)&&a.jsx("button",{onClick:T,disabled:p===c.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${p===c.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const KIe=Nf.all(),R_=KIe.map((e,t)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${t}`})),QIe=e=>e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()),XIe=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},ig=10,z_={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function ZIe(){const e=rt(),{leadID:t}=ul();gr();const[n,r]=g.useState(null),[s,i]=g.useState(!1),[o,l]=g.useState(null),[c,d]=g.useState(null),[m,h]=g.useState([]),[p,b]=g.useState(!1),[v,x]=g.useState(""),[w,j]=g.useState("Filter by Status"),[C,S]=g.useState(1),[_,E]=g.useState(z_),[A,T]=g.useState(!1),[R,U]=g.useState(null),[W,I]=g.useState(!1),[M,H]=g.useState(null),[q,ae]=g.useState(!1);g.useRef(null);const[K,B]=g.useState(!1),[X,le]=g.useState(null),[ue,J]=g.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[ne,pe]=g.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[we,ye]=g.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});g.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const Te=async()=>{try{const V=await oe.get("/leads/getUsers");l(V.data)}catch(V){console.error(`Error fetching users: ${V}`)}},Ae=async()=>{b(!0);try{const V=await oe.get("/leads/admin/getLeads");h(V.data),console.log(V.data)}catch(V){console.error(`Error fetching leads: ${V}`)}finally{b(!1)}};g.useEffect(()=>{Te(),Ae()},[]),g.useEffect(()=>{if(t&&m.length>0&&!s&&!A){const V=m.find(F=>F.id===Number(t));V&&r(V)}else!t&&!n&&r(null)},[t,m,s,A]),g.useEffect(()=>{if(X){const F=(ge=>{if(!ge)return{code:"+63",number:""};const Me=ge.match(/^(\+\d+)\s(.+)$/);if(Me)return{code:Me[1],number:Me[2]};if(ge.startsWith("+")){const De=ge.match(/^(\+\d{1,3})/);if(De)return{code:De[1],number:ge.substring(De[1].length).trim()}}return{code:"+63",number:ge}})(X.work_phone),se=[];X.work_phone&&se.push(`Work: ${X.work_phone}`),X.mobile_phone_1&&se.push(`Mobile 1: ${X.mobile_phone_1}`),X.mobile_phone_2&&se.push(`Mobile 2: ${X.mobile_phone_2}`);const xe=se.length>0?se.join(" | "):"";J({name:X.company_name||"",website:"",countryCode:F.code,phone_number:F.number,combinedPhoneNumbers:xe,billing_address:X.address||"",shipping_address:X.address||"",industry:"",status:"Prospect",territory_id:X.assigned_to?.territory?.id||null,assigned_to:X.assigned_to?.id||null,created_by:X.creator?.id||null}),pe({last_name:X.last_name||"",first_name:X.first_name||"",account_id:null,title:X.title||"",department:X.department||"",email:X.email||"",work_phone:X.work_phone||"",mobile_phone_1:X.mobile_phone_1||"",mobile_phone_2:X.mobile_phone_2||"",notes:X.notes||"",assigned_to:X.assigned_to?.id||null,created_by:X.creator?.id||null}),ye({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:X.assigned_to?.id||null,created_by:X.creator?.id||null})}},[X]);const Pe=V=>x(V.target.value),$=g.useMemo(()=>{const V=v.trim().toLowerCase(),F=w.trim().toUpperCase();return m.filter(se=>{const xe=[se?.first_name,se?.last_name,se?.company_name,se?.title,se?.email,se?.work_phone,se?.assigned_to?`${se.assigned_to.first_name} ${se.assigned_to.last_name}`:""],ge=V===""||xe.some(De=>De==null||De===""?!1:De.toString().toLowerCase().includes(V));let Me=!1;return F==="FILTER BY STATUS"?Me=(se.status?se.status.toUpperCase():"")!=="CONVERTED":Me=(se.status?se.status.toUpperCase():"")===F,ge&&Me})},[m,v,w]),Ne=Math.max(1,Math.ceil($.length/ig)||1);g.useEffect(()=>{S(1)},[v,w]),g.useEffect(()=>{S(V=>{const F=Math.max(1,Math.ceil($.length/ig)||1);return V>F?F:V})},[$.length]);const fe=g.useMemo(()=>{const V=(C-1)*ig;return $.slice(V,V+ig)},[$,C]),O=()=>S(V=>Math.max(V-1,1)),ce=()=>S(V=>Math.min(V+1,Ne)),de=V=>{r(V)},Ce=()=>{r(null),t&&e("/admin/leads",{replace:!0})},Ee=()=>{i(!1),E(z_),T(!1),U(null),I(!1),d(null),sessionStorage.removeItem("editLeadData")},Ge=V=>{V.target.id==="modalBackdrop"&&Ee()},Je=()=>{E(z_),T(!1),U(null),d(null),i(!0)},We=V=>{if(!V){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",V),console.log("Current state - leadID:",t,"selectedLead:",n,"showModal:",s);const F=De=>{if(!De)return{code:"+63",number:""};const et=De.match(/^(\+\d+)\s(.+)$/);return et?{code:et[1],number:et[2]}:{code:"+63",number:De}},se=F(V.work_phone),xe=F(V.mobile_phone_1),ge=F(V.mobile_phone_2);let Me="";if(V.assigned_to){Me=String(V.assigned_to.id);const De=o?.find(et=>et.id===V.assigned_to.id);d(De)}E({first_name:V.first_name||"",last_name:V.last_name||"",company_name:V.company_name||"",title:V.title||"",department:V.department||"",email:V.email||"",work_ccode:se.code,work_phone:se.number,m1_ccode:xe.code,mobile_phone_1:xe.number,m2_ccode:ge.code,mobile_phone_2:ge.number,address:V.address||"",notes:V.notes||"",source:V.source||"",territory_id:V.territory?.id||null,lead_owner:Me,status:V.status||"New"}),T(!0),U(V.id),n?(console.log("Coming from detail view - closing detail modal and showing edit form"),r(null),i(!0)):(console.log("Already in list view - showing modal"),i(!0))},Ke=V=>{if(!V){console.error("handleDelete: lead is null or undefined");return}console.log("handleDelete called with lead:",V);const F=`${V.first_name} ${V.last_name}`||"this lead";H({title:"Delete Lead",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:F}),"? This action cannot be undone."]}),confirmLabel:"Delete Lead",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:V.id,name:F}})},He=V=>{const{name:F,value:se}=V.target;if(E(xe=>({...xe,[F]:se})),F==="lead_owner"){const xe=o.find(ge=>ge.id===parseInt(se));d(xe)}},Se=V=>{if(V.preventDefault(),!_.first_name?.trim()||!_.last_name?.trim()){Q.error("First name and last name are required.");return}if(!_.lead_owner){Q.error("Please assign a lead owner.");return}const F={..._,territory_id:_.territory_id?parseInt(_.territory_id):null,lead_owner:parseInt(_.lead_owner),work_phone:`${_.work_ccode} ${_.work_phone}`,mobile_phone_1:`${_.m1_ccode} ${_.mobile_phone_1}`,mobile_phone_2:`${_.m2_ccode} ${_.mobile_phone_2}`},se=A&&R?"update":"create",xe=`${_.first_name} ${_.last_name}`;H({title:se==="create"?"Confirm New Lead":"Confirm Update",message:se==="create"?a.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",a.jsx("span",{className:"font-semibold",children:xe}),"?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:xe}),"?"]}),confirmLabel:se==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:se,payload:F,targetId:R||null,name:xe}})},Ve=async()=>{if(!M?.action){H(null);return}const{action:V}=M,{type:F,payload:se,targetId:xe,name:ge,lead:Me}=V;console.log(se),ae(!0);try{if(F==="create")I(!0),await oe.post("/leads/create",se),Q.success(`Lead "${ge}" created successfully.`),Ee(),await Ae();else if(F==="update"){if(!xe)throw new Error("Missing lead identifier for update.");I(!0);const De=await oe.put(`/leads/${xe}`,se);Q.success(`Lead "${ge}" updated successfully.`),n&&n.id===xe&&r(null),Ee(),await Ae()}else if(F==="delete"){if(!xe)throw new Error("Missing lead identifier for deletion.");await oe.delete(`/leads/${xe}`),Q.success(`Lead "${ge}" deleted successfully.`),n?.id===xe&&r(null),await Ae()}}catch(De){console.error(De);const et=F==="create"?"Failed to create lead. Please review the details and try again.":F==="update"?"Failed to update lead. Please review the details and try again.":"Failed to delete lead. Please try again.",gt=De.response?.data?.detail||et;Q.error(gt)}finally{(F==="create"||F==="update")&&I(!1),F!=="edit"&&(ae(!1),H(null))}},k=()=>{q||H(null)},Z=m.filter(V=>V.status==="New").length,re=m.filter(V=>V.status==="Contacted").length,be=m.filter(V=>V.status==="Qualified").length,z=m.filter(V=>V.status==="Converted").length,ee=m.filter(V=>V.status==="Lost").length,ie=[{title:"New",value:Z,icon:Ln,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:re,icon:pt,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:be,icon:Fn,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:z,icon:ml,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:ee,icon:hr,color:"text-red-600",bgColor:"bg-red-100"}];return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[p&&a.jsx(yt,{message:"Loading leads..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(Ln,{className:"mr-2 text-blue-600"}),"Leads"]}),a.jsx("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:a.jsxs("button",{onClick:Je,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(Rt,{className:"mr-2"})," Add Lead"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:ie.map(V=>a.jsx(e5e,{...V},V.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search leads",value:v,onChange:Pe,className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:w,onChange:V=>j(V.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),a.jsx("option",{value:"New",children:"New"}),a.jsx("option",{value:"Contacted",children:"Contacted"}),a.jsx("option",{value:"Qualified",children:"Qualified"}),a.jsx("option",{value:"Converted",children:"Converted"}),a.jsx("option",{value:"Lost",children:"Lost"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Name"}),a.jsx("th",{className:"py-3 px-4",children:"Company"}),a.jsx("th",{className:"py-3 px-4",children:"Job Title"}),a.jsx("th",{className:"py-3 px-4",children:"Email"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),a.jsx("tbody",{children:$.length>0?fe.map(V=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>de(V),children:[a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[V.first_name," ",V.last_name]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:V.company_name||"--"})}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:V.title||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:V.email||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:V.assigned_to?`${V.assigned_to.first_name} ${V.assigned_to.last_name}`:"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${XIe(V.status||"New")}`,children:QIe(V.status||"New")})})]},V.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No leads found."})})})]})}),a.jsx(Et,{className:"mt-4",totalItems:$.length,pageSize:ig,currentPage:C,onPrev:O,onNext:ce,label:"leads"}),s&&a.jsx("div",{id:"modalBackdrop",onClick:Ge,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:V=>V.stopPropagation(),children:[a.jsx("button",{onClick:Ee,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(St,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:A?"Edit Lead":"Add New Lead"}),a.jsxs("form",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),a.jsx("input",{type:"text",name:"first_name",value:_.first_name,onChange:He,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Last Name"}),a.jsx("input",{type:"text",placeholder:"Smith",name:"last_name",value:_.last_name,onChange:He,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Company"}),a.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:_.company_name,onChange:He,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Job Title"}),a.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:_.title,onChange:He,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),a.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:_.department,onChange:He,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Email"}),a.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:_.email,onChange:He,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"work_ccode",value:_.work_ccode,onChange:He,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:R_.map(V=>a.jsx("option",{value:V.code,children:V.code},V.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:_.work_phone,onChange:He,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"m1_ccode",value:_.m1_ccode,onChange:He,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:R_.map(V=>a.jsx("option",{value:V.code,children:V.code},V.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:_.mobile_phone_1,onChange:He,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"m2_ccode",value:_.m2_ccode,onChange:He,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:R_.map(V=>a.jsx("option",{value:V.code,children:V.code},V.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:_.mobile_phone_2,onChange:He,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),a.jsx("input",{type:"text",name:"address",value:_.address,onChange:He,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Assign To"}),a.jsx(t5e,{items:Array.isArray(o)?o:[],value:_.lead_owner??"",placeholder:"Search a user...",getLabel:V=>`${V.first_name} ${V.last_name}`,onChange:V=>{const F=o.find(xe=>String(xe.id)===String(V));d(F);let se=null;F&&F.assigned_territory&&F.assigned_territory.length===1&&(se=F.assigned_territory[0].id),E(xe=>({...xe,lead_owner:V,territory_id:se}))}})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),a.jsxs("select",{name:"territory_id",value:_.territory_id||"",onChange:He,disabled:!c||!c.assigned_territory||c.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[a.jsx("option",{value:"",disabled:!0,children:c?c.assigned_territory&&c.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),c&&c.assigned_territory&&c.assigned_territory.map(V=>a.jsx("option",{value:V.id,children:V.name},V.id))]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),a.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:_.source,onChange:He,children:[a.jsx("option",{value:"",disabled:!0,children:"Select Source"}),a.jsx("option",{value:"Website",children:"Website"}),a.jsx("option",{value:"Referral",children:"Referral"}),a.jsx("option",{value:"Cold call",children:"Cold call"}),a.jsx("option",{value:"Event",children:"Event"}),a.jsx("option",{value:"Other",children:"Other"})]})]}),a.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),a.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:_.notes,onChange:He,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("button",{type:"button",onClick:Ee,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:W||q,children:"Cancel"}),a.jsx("button",{type:"submit",onClick:Se,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:W||q,children:W||q?"Processing...":A?"Update Lead":"Save Lead"})]})]})]})}),M&&a.jsx(JIe,{open:!0,title:M.title,message:M.message,confirmLabel:M.confirmLabel,cancelLabel:M.cancelLabel,variant:M.variant,onConfirm:Ve,onCancel:k,loading:q}),n&&!s&&!A&&a.jsx(dQ,{lead:n,onBack:Ce,fetchLeads:Ae,setSelectedLead:r,onEdit:We,onDelete:Ke})]})}function JIe({open:e,title:t,message:n,confirmLabel:r,cancelLabel:s="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:s}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":r})]})]})})}function e5e({icon:e,title:t,value:n,color:r="text-blue-600",bgColor:s="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${s} ${r} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function t5e({items:e=[],value:t="",onChange:n,getLabel:r,placeholder:s="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=g.useState(!1),[d,m]=g.useState(""),h=g.useRef(null),p=e.find(x=>String(x.id)===String(t)),b=p?r(p):"",v=g.useMemo(()=>{const x=d.trim().toLowerCase();return(x?e.filter(j=>(r(j)||"").toLowerCase().includes(x)):e).slice(0,o)},[e,d,r,o]);return g.useEffect(()=>{const x=w=>{h.current&&!h.current.contains(w.target)&&c(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]),g.useEffect(()=>{l||m("")},[l]),a.jsxs("div",{ref:h,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:l?d:b,placeholder:s,onFocus:()=>!i&&c(!0),onChange:x=>{m(x.target.value),l||c(!0)},className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:v.length>0?v.map(x=>{const w=String(x.id),j=r(x),C=String(t)===w;return a.jsx("button",{type:"button",onClick:()=>{n(w),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${C?"bg-blue-50":""}`,children:j||"--"},w)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const Xy={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},Na=({label:e,value:t,name:n,className:r=""})=>a.jsxs("div",{className:`flex flex-col ${r}`,children:[a.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),a.jsx("input",{type:"text",name:n,defaultValue:t,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),n5e=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(Na,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),a.jsx(Na,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),a.jsx(Na,{label:"Industry",name:"industry",value:e.industry})]}),a.jsx(Na,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),a.jsx(Na,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),a5e=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(Na,{label:"First Name",name:"firstName",value:e.firstName}),a.jsx(Na,{label:"Last Name",name:"lastName",value:e.lastName}),a.jsx(Na,{label:"Department",name:"department",value:e.department}),a.jsx(Na,{label:"Title",name:"title",value:e.title}),a.jsx(Na,{label:"Work Phone",name:"workPhone",value:e.workPhone}),a.jsx(Na,{label:"Email",name:"email",value:e.email}),a.jsx(Na,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),a.jsx(Na,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),r5e=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(Na,{label:"Deal Name",name:"dealName",value:e.dealName}),a.jsxs("div",{className:"flex",children:[a.jsx(Na,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),a.jsx("div",{className:"flex flex-col justify-end ml-1",children:a.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),a.jsx(Na,{label:"Stage",name:"stage",value:e.stage}),a.jsx(Na,{label:"Territory",name:"territory",value:e.territory})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(Na,{label:"Description",name:"description",value:e.description}),a.jsx(Na,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function s5e({isOpen:e,onClose:t}){const[n,r]=g.useState(1),s=3;if(!e)return null;const i=()=>{n<s?r(n+1):(t(),r(1))},o=()=>{n>1&&r(n-1)},l=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],c=()=>{switch(n){case 1:return a.jsx(n5e,{data:Xy});case 2:return a.jsx(a5e,{data:Xy});case 3:return a.jsx(r5e,{data:Xy});default:return null}};return a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:Xy.accountName})]}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:a.jsx(Nj,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:l.map(d=>a.jsx("button",{onClick:()=>r(d.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${n===d.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:d.name},d.id))}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c()}),a.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[n>1&&a.jsx("button",{onClick:o,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),n<s?a.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):a.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}const og=10;function i5e(){g.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const[e,t]=g.useState(""),[n,r]=g.useState("Filter by Stage"),[s,i]=g.useState("Filter by Owner"),[o,l]=g.useState(null),[c,d]=g.useState("Overview"),[m,h]=g.useState(!1),[p,b]=g.useState(null),[v,x]=g.useState(!1),[w,j]=g.useState(1),[C,S]=g.useState(!1),[_,E]=g.useState(null),[A,T]=g.useState(!1),[R,U]=g.useState(!1),[W,I]=g.useState(null),[M,H]=g.useState([]),[q,ae]=g.useState([]),[K,B]=g.useState([]),[X,le]=g.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),[ue,J]=g.useState(null),[ne,pe]=g.useState(null),we={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST","Closed Cancelled Stage":"CLOSED_CANCELLED"},ye=F=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost",CLOSED_CANCELLED:"Closed Cancelled"})[F]||F||"--",Te=F=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700",CLOSED_CANCELLED:"bg-red-100 text-red-700"})[F]||"bg-gray-100 text-gray-700",Ae=g.useMemo(()=>{const F=e.trim().toLowerCase(),se=n.trim(),xe=s.trim();return(p??[]).filter(ge=>{const Me=[ge?.name,ge?.description,ge?.account?.name,ge?.contact?.first_name,ge?.contact?.last_name,ge?.assigned_deals?.first_name,ge?.assigned_deals?.last_name],De=F===""||Me.some(Nt=>Nt==null||Nt===""?!1:Nt.toString().toLowerCase().includes(F)),et=se==="Filter by Stage"||se===""||ge.stage===we[se]||ge.stage===se,gt=xe==="Filter by Owner"||xe===""||`${ge.assigned_deals?.first_name||""} ${ge.assigned_deals?.last_name||""}`.trim().toLowerCase()===xe.toLowerCase();return De&&et&&gt})},[p,e,n,s]),Pe=Math.max(1,Math.ceil(Ae.length/og)||1);g.useEffect(()=>{j(1)},[e,n,s]),g.useEffect(()=>{j(F=>{const se=Math.max(1,Math.ceil(Ae.length/og)||1);return F>se?se:F})},[Ae.length]);const $=g.useMemo(()=>{const F=(w-1)*og;return Ae.slice(F,F+og)},[Ae,w]),Ne=()=>j(F=>Math.max(F-1,1)),fe=()=>j(F=>Math.min(F+1,Pe)),O=()=>{le({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),U(!1),I(null),h(!0)},ce=async()=>{x(!0);try{const F=await oe.get("/deals/admin/fetch-all"),xe=[...Array.isArray(F.data)?F.data:[]].sort((ge,Me)=>{const De=ge?.created_at?new Date(ge.created_at).getTime():0;return(Me?.created_at?new Date(Me.created_at).getTime():0)-De});b(xe)}catch(F){F.response&&F.response.status===403?Q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):Q.error("Failed to fetch deals. Please try again later."),console.error(F)}finally{x(!1)}},de=async()=>{try{const F=await oe.get("/accounts/admin/fetch-all");H(Array.isArray(F.data)?F.data:[])}catch(F){console.error(F),F.response?.status===403&&Q.warn("Unable to load accounts (permission denied).")}},Ce=async()=>{try{const F=await oe.get("/contacts/admin/fetch-all");ae(Array.isArray(F.data)?F.data:[])}catch(F){console.error(F),F.response?.status===403&&Q.warn("Unable to load contacts (permission denied).")}},Ee=async()=>{try{const F=await oe.get("/users/all");B(Array.isArray(F.data)?F.data:[])}catch(F){console.error(F),F.response?.status===403&&Q.warn("Unable to load users (permission denied).")}};g.useEffect(()=>{ce(),de(),Ce(),Ee()},[]);const Ge=async F=>{F&&(le({id:F.id||null,name:F.name||"",account_id:F.account_id?.toString()||"",primary_contact_id:F.primary_contact_id?.toString()||"",stage:F.stage||"PROPOSAL",amount:F.amount?.toString()||"",close_date:F.close_date?new Date(F.close_date).toISOString().split("T")[0]:"",assigned_to:F.assigned_to?.toString()||"",currency:F.currency||"PHP",description:F.description||""}),J(F.account||null),pe(F.contact||null),U(!0),I(F.id),l(null),h(!0))},Je=async(F=!1)=>{try{const se=await oe.get("/deals/admin/fetch-all"),ge=[...Array.isArray(se.data)?se.data:[]].sort((Me,De)=>{const et=Me?.created_at?new Date(Me.created_at).getTime():0;return(De?.created_at?new Date(De.created_at).getTime():0)-et});if(b(ge),!F&&o&&o.id){const Me=ge.find(De=>De.id===o.id);Me&&l({...Me})}}catch(se){console.error("Failed to refresh deal data:",se),await ce()}},We=F=>{const se=F.name.trim();if(!se){Q.error("Deal name is required.");return}if(!F.account_id){Q.error("Account is required.");return}const xe=R&&W?"update":"create",ge=se;E({title:xe==="create"?"Confirm New Deal":"Confirm Update",message:xe==="create"?a.jsxs("span",{children:["Are you sure you want to create"," ",a.jsx("span",{className:"font-semibold",children:ge}),"?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:ge}),"?"]}),confirmLabel:xe==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:xe,formData:F,targetId:W||null,name:ge}})},Ke=F=>{if(!F)return;const se=F.name||"this deal";E({title:"Delete Deal",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:se}),"? This action cannot be undone."]}),confirmLabel:"Delete Deal",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:F.id,name:se}})},He=async()=>{if(!_?.action){E(null);return}const{action:F}=_,{type:se,formData:xe,targetId:ge,name:Me}=F;T(!0);try{if(se==="create"){S(!0);const De={name:xe.name.trim(),account_id:parseInt(xe.account_id),primary_contact_id:xe.primary_contact_id?parseInt(xe.primary_contact_id):null,stage:xe.stage,amount:xe.amount?parseFloat(xe.amount):null,currency:xe.currency||"PHP",close_date:xe.close_date||null,description:xe.description||null,assigned_to:xe.assigned_to?parseInt(xe.assigned_to):null};await oe.post("/deals/admin/create",De),Q.success(`Deal "${Me}" created successfully.`),h(!1),await ce()}else if(se==="update"){if(!ge)throw new Error("Missing deal identifier for update.");S(!0);const De={};xe.name!==void 0&&(De.name=xe.name.trim()),xe.account_id!==void 0&&xe.account_id!==""&&(De.account_id=parseInt(xe.account_id)),xe.primary_contact_id!==void 0&&(De.primary_contact_id=xe.primary_contact_id?parseInt(xe.primary_contact_id):null),xe.stage!==void 0&&(De.stage=xe.stage),xe.amount!==void 0&&xe.amount!==""&&(De.amount=parseFloat(xe.amount)),xe.currency!==void 0&&(De.currency=xe.currency),xe.close_date!==void 0&&(De.close_date=xe.close_date||null),xe.description!==void 0&&(De.description=xe.description||null),xe.assigned_to!==void 0&&(De.assigned_to=xe.assigned_to?parseInt(xe.assigned_to):null),await oe.put(`/deals/admin/${ge}`,De),Q.success(`Deal "${Me}" updated successfully.`),h(!1),await ce()}else if(se==="delete"){if(!ge)throw new Error("Missing deal identifier for deletion.");await oe.delete(`/deals/admin/${ge}`),Q.success(`Deal "${Me}" deleted successfully.`),o?.id===ge&&l(null),await ce()}}catch(De){console.error(De);const et=se==="create"?"Failed to create deal. Please review the details and try again.":se==="update"?"Failed to update deal. Please review the details and try again.":"Failed to delete deal. Please try again.",gt=De.response?.data?.detail||et;Q.error(gt)}finally{(se==="create"||se==="update")&&S(!1),T(!1),E(null)}},Se=()=>{A||E(null)},Ve=()=>{h(!1),le({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),J(null),pe(null),U(!1),I(null),S(!1)},k=(p??[]).filter(F=>F.stage==="PROSPECTING").length,Z=(p??[]).filter(F=>F.stage==="QUALIFICATION").length,re=(p??[]).filter(F=>F.stage==="PROPOSAL").length,be=(p??[]).filter(F=>F.stage==="NEGOTIATION").length,z=(p??[]).filter(F=>F.stage==="CLOSED_WON").length,ee=(p??[]).filter(F=>F.stage==="CLOSED_LOST").length,ie=(p??[]).filter(F=>F.stage==="CLOSED_CANCELLED").length,V=[{title:"Prospecting",value:k,icon:yw,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:Z,icon:Rn,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:re,icon:$n,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:be,icon:Wd,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:z,icon:Fn,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:ee,icon:hr,color:"text-red-600",bgColor:"bg-red-100"},{title:"Closed Cancelled",value:ie,icon:hr,color:"text-gray-600",bgColor:"bg-gray-100"}];return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[v&&a.jsx(yt,{message:"Loading deals..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx($n,{className:"mr-2 text-blue-600"}),"Deals"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:O,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(Rt,{className:"mr-2"})," Add Deal"]})})]}),a.jsx("div",{className:"grid grid-cols-1 p-2 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden",children:V.map(F=>a.jsx(l5e,{...F},F.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search deals",value:e,onChange:F=>t(F.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[a.jsxs("select",{value:n,onChange:F=>r(F.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),a.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),a.jsx("option",{value:"Qualification Stage",children:"Qualification"}),a.jsx("option",{value:"Proposal Stage",children:"Proposal"}),a.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),a.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),a.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"}),a.jsx("option",{value:"Closed Cancelled Stage",children:"Closed Cancelled"})]}),a.jsxs("select",{value:s,onChange:F=>i(F.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((p??[]).map(F=>`${F.assigned_deals?.first_name} ${F.assigned_deals?.last_name}`))].map((F,se)=>a.jsx("option",{value:F,children:F},se))]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Stage"}),a.jsx("th",{className:"py-3 px-4",children:"Value"}),a.jsx("th",{className:"py-3 px-4",children:"Close Date"}),a.jsx("th",{className:"py-3 px-4",children:"Owner"})]})}),a.jsx("tbody",{children:Ae.length>0?$.map(F=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{l({...F})},children:[a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:F.deal_id?F.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:F.name}),a.jsx("div",{className:"text-gray-500 text-xs break-all",children:F.description||"--"})]})}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:F.account?.name||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:F.contact?.first_name&&F.contact?.last_name?`${F.contact.first_name} ${F.contact.last_name}`:F.contact?.first_name||F.contact?.last_name||"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Te(F.stage)}`,children:ye(F.stage)})}),a.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",F.amount?.toLocaleString()||"0"]}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:F.close_date||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:F.assigned_deals?.first_name&&F.assigned_deals?.last_name?`${F.assigned_deals.first_name} ${F.assigned_deals.last_name}`:F.assigned_deals?.first_name||F.assigned_deals?.last_name||"--"})]},F.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No deals found."})})})]})}),a.jsx(Et,{className:"mt-4",totalItems:Ae.length,pageSize:og,currentPage:w,onPrev:Ne,onNext:fe,label:"deals"}),m&&a.jsx(c5e,{onClose:Ve,formData:X,setFormData:le,isEditing:R,onSubmit:We,isSubmitting:C||A,accounts:M,contacts:q,users:K,currentAccount:ue,currentContact:ne}),o&&a.jsx(Bx,{selectedDeal:o,show:!!o,onClose:()=>l(null),activeTab:c,setActiveTab:d,onEdit:Ge,onDelete:Ke,onStatusUpdate:Je}),_&&a.jsx(o5e,{open:!0,title:_.title,message:_.message,confirmLabel:_.confirmLabel,cancelLabel:_.cancelLabel,variant:_.variant,onConfirm:He,onCancel:Se,loading:A})]})}function o5e({open:e,title:t,message:n,confirmLabel:r,cancelLabel:s="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:s}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":r})]})]})})}function l5e({icon:e,title:t,value:n,color:r="text-blue-600",bgColor:s="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${s} ${r} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function c5e({onClose:e,formData:t,setFormData:n,isEditing:r=!1,onSubmit:s,isSubmitting:i=!1,accounts:o=[],contacts:l=[],users:c=[],currentAccount:d=null,currentContact:m=null}){const h=v=>{v.preventDefault(),s&&s(t)},p=v=>{v.target.id==="modalBackdrop"&&e()},b=g.useMemo(()=>{const v=String(t.account_id||"").trim(),x=Array.isArray(l)?l:[];return v?x.filter(w=>{const C=[w?.account_id,w?.accountId,w?.account?.id,w?.account?.account_id,w?.account?.accountId].find(S=>S!=null&&String(S).trim()!=="");return C?String(C)===v:!1}):x},[l,t.account_id]);return g.useEffect(()=>{const v=String(t.account_id||"").trim(),x=String(t.primary_contact_id||"").trim();if(!x||!v)return;b.some(j=>String(j?.id)===x)||n(j=>({...j,primary_contact_id:""}))},[t.account_id,t.primary_contact_id,b,n]),a.jsx("div",{id:"modalBackdrop",onClick:p,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:v=>v.stopPropagation(),children:[a.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(St,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:r?"Edit Deal":"Create Deal"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:h,children:[a.jsx(U_,{label:"Deal Name",name:"name",value:t.name,onChange:v=>n({...t,name:v.target.value}),placeholder:"Enter deal name",required:!0,disabled:i,className:"md:col-span-2"}),a.jsx(F_,{label:"Account",value:t.account_id||"",onChange:v=>n({...t,account_id:v}),items:o||[],getLabel:v=>v?.name??"",placeholder:"Search account...",disabled:i,currentItem:d}),a.jsx(F_,{label:"Primary Contact",value:t.primary_contact_id||"",onChange:v=>n({...t,primary_contact_id:v}),items:b||[],getLabel:v=>`${v?.first_name??""} ${v?.last_name??""}`.trim()||v?.email||"",placeholder:"Search contact...",disabled:i,currentItem:m}),a.jsx(lU,{label:"Stage",name:"stage",value:t.stage,onChange:v=>n({...t,stage:v.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}],disabled:i}),a.jsx(U_,{label:"Amount",name:"amount",type:"number",step:"0.01",value:t.amount,onChange:v=>n({...t,amount:v.target.value}),placeholder:"0",disabled:i}),a.jsx(lU,{label:"Currency",name:"currency",value:t.currency||"PHP",onChange:v=>n({...t,currency:v.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),a.jsx(U_,{label:"Close Date",name:"close_date",type:"date",value:t.close_date||"",onChange:v=>n({...t,close_date:v.target.value}),disabled:i}),a.jsx(F_,{label:"Assign To",value:t.assigned_to||"",onChange:v=>n({...t,assigned_to:v}),items:c||[],getLabel:v=>`${v?.first_name??""} ${v?.last_name??""}`.trim()||v?.email||"",placeholder:"Search assignee...",disabled:i,className:"md:col-span-2"}),a.jsx(u5e,{label:"Description",name:"description",value:t.description,onChange:v=>n({...t,description:v.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":r?"Update Deal":"Save Deal"})]})]})]})})}function U_({label:e,name:t,value:n,onChange:r,placeholder:s,type:i="text",required:o=!1,disabled:l=!1,className:c=""}){return a.jsxs("div",{className:c,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("input",{type:i,name:t,value:n??"",onChange:r,placeholder:s,required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]})}function lU({label:e,name:t,value:n,onChange:r,options:s,required:i=!1,disabled:o=!1,className:l=""}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:n??"",onChange:r,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:s.map(c=>a.jsx("option",{value:c.value,children:c.label},c.value))})]})}function F_({label:e,items:t=[],value:n="",onChange:r,getLabel:s,placeholder:i="Search...",disabled:o=!1,className:l="",currentItem:c=null}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx(d5e,{items:t,value:n??"",onChange:r,getLabel:s,placeholder:i,disabled:o,currentItem:c})]})}function d5e({items:e=[],value:t="",onChange:n,getLabel:r,placeholder:s="Search...",disabled:i=!1,maxRender:o=200,currentItem:l=null}){const[c,d]=g.useState(!1),[m,h]=g.useState(""),p=g.useRef(null),v=e.find(j=>String(j.id)===String(t))||l,x=v?r(v):"",w=g.useMemo(()=>{const j=m.trim().toLowerCase();return(j?e.filter(S=>(r(S)||"").toLowerCase().includes(j)):e).slice(0,o)},[e,m,r,o]);return g.useEffect(()=>{const j=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]),g.useEffect(()=>{c||h("")},[c]),a.jsxs("div",{ref:p,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:c?m:x,placeholder:s,onFocus:()=>!i&&d(!0),onChange:j=>{h(j.target.value),c||d(!0)},className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),c&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:w.length>0?w.map(j=>{const C=String(j.id),S=r(j),_=String(t)===C;return a.jsx("button",{type:"button",onClick:()=>{n(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${_?"bg-blue-50":""}`,children:S||"--"},C)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function u5e({label:e,name:t,value:n,onChange:r,placeholder:s,required:i=!1,disabled:o=!1,className:l="",rows:c=3}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:r,placeholder:s,required:i,disabled:o,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function m5e({selectedDeal:e,show:t,onClose:n,activeTab:r,setActiveTab:s,onEdit:i,onDelete:o,onStatusUpdate:l}){const c=rt(),[d]=gr(),m=d.get("id"),[h,p]=g.useState(e||null),[b,v]=g.useState(r||"Overview"),{user:x}=Ut();g.useEffect(()=>{console.log("AdminDealsInformation mounted",h),console.log("User:",x)},[h,x]);const w=r!==void 0?r:b;if(g.useEffect(()=>{(async()=>{if(m&&!e)try{console.log("Fetching deal from route, ID:",m);const E=(await oe.get("/deals/admin/fetch-all")).data||[];console.log("All deals fetched:",E.length);const A=E.find(T=>T.id===parseInt(m));if(console.log("Found deal:",A),A){console.log("Deal data structure:",{id:A.id,name:A.name,amount:A.amount,stage:A.stage,account:A.account,contact:A.contact,assigned_deals:A.assigned_deals,deal_creator:A.deal_creator,allKeys:Object.keys(A)});const T={...A,amount:typeof A.amount=="number"?A.amount:parseFloat(A.amount||0),probability:A.probability||0};p(T)}else console.warn("Deal not found with ID:",m)}catch(_){console.error("Error fetching deal:",_)}})()},[m,e]),!h&&!m||m&&!h)return null;const j=S=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[S]||"bg-gray-100 text-gray-700";function C(S){return S?new Date(S).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:a.jsxs("div",{className:"flex items-start justify-between w-full",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),a.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:a.jsx("button",{onClick:()=>{n?n():c(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:a.jsx(St,{size:25})})})]})}),a.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:a.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[a.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:h.name}),a.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${j(h.stage)}`,children:h.stage})]}),a.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",C(h.created_at)]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-2",children:[a.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[" ",h.amount?h.amount.toLocaleString():"0"]}),a.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${h.probability}%`}})}),a.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",h.probability,"% Complete "]}),(h.created_by===x?.id||h.assigned_to===x?.id)&&a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[a.jsxs("button",{type:"button",onClick:()=>{i&&i(h)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[a.jsx(pn,{className:"mr-1 sm:mr-2",size:16}),a.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),a.jsxs("button",{type:"button",onClick:()=>{o&&o(h)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[a.jsx(jt,{className:"mr-1 sm:mr-2",size:16}),a.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})]})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(S=>a.jsx("button",{onClick:()=>{s?s(S):v(S)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${w===S?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:S},S))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[w==="Overview"&&a.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),a.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[a.jsx("strong",{children:"Description:"})," ",h.description]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[a.jsx("strong",{children:"Expected Close Date:"})," ",h.close_date]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("div",{className:"mt-4 py-3 w-full",children:[a.jsxs("div",{className:"relative flex flex-col w-full",children:[a.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const S=(h?.stage||"PROSPECTING").toUpperCase(),E=(T=>T==="PROSPECTING"?0:T==="QUALIFICATION"?1:T==="PROPOSAL"?2:T==="NEGOTIATION"?3:T==="CLOSED_WON"||T==="CLOSED_LOST"?4:-1)(S);return[0,1,2,3,4].map(T=>E===T?"orange":E>T?"green":"gray").map((T,R)=>a.jsxs(nt.Fragment,{children:[a.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${T==="green"?"bg-green-500 border-green-500":T==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),R<4&&a.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},R))})()}),a.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((S,_)=>a.jsx("span",{className:"text-center flex-1 break-words",children:S},_))})]}),a.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:h.stage})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),a.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Account:"})," ",h.account?.name]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Primary Contact:"})," ",h.contact?.first_name," ",h.contact?.last_name]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Phone:"})," ",h.contact?.work_phone]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Email:"})," ",h.contact?.email]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Assigned To:"})," ",h.assigned_deals?.first_name," ",h.assigned_deals?.last_name]})]})]})]}),w==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:h.description||"No notes available."})]})]}),w==="Activities"&&a.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:pt,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:ft,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((S,_)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[a.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-gray-600 mt-1",children:a.jsx(S.icon,{size:24})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-gray-900 break-words",children:S.title}),a.jsx("p",{className:"text-sm text-gray-500 break-words",children:S.desc}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),a.jsx("p",{className:"text-sm text-gray-700 break-words",children:S.user})]})]})]}),a.jsx("p",{className:"text-sm text-gray-500 break-words",children:S.date})]},_))]}),w==="Edit"&&a.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[a.jsxs("label",{className:"block mb-3 break-words",children:[a.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),a.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:h.name})]}),a.jsxs("label",{className:"block mb-3 break-words",children:[a.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),a.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:h.description})]}),a.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),a.jsx("div",{className:"w-full lg:w-auto",children:a.jsx(jj,{selectedDeal:h,onStatusUpdate:l,onClose:n})})]})]})]})})}function f5e({selectedDeal:e,onStatusUpdate:t,onClose:n}){const[r,s]=g.useState(e?.stage||""),[i,o]=g.useState(!1),l=rt(),{user:c}=Ut();g.useEffect(()=>{console.log("AdminDealsInformation mounted sahdksd",e),console.log("User sadad:",c)},[e,c]);const d=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"}];g.useEffect(()=>{e?.stage&&s(e.stage)},[e]);const m=async()=>{if(!e||!e.id){Q.error("No deal selected");return}if(!r||r===e.stage){Q.info("Please select a different stage");return}const h=e.id;o(!0);try{await oe.put(`/deals/admin/${h}`,{stage:r}),n&&n(),t&&setTimeout(async()=>{await t(!0)},100),setTimeout(()=>{Q.success("Deal status updated successfully")},300)}catch(p){console.error(p);const b=p.response?.data?.detail||"Failed to update deal status";Q.error(b)}finally{o(!1)}};return e?a.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>l("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Deal"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(pt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const h=encodeURIComponent(e.contact.email),p=encodeURIComponent(""),b=encodeURIComponent(""),v=`https://mail.google.com/mail/?view=cm&fs=1&to=${h}&su=${p}&body=${b}`;window.open(v,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Tn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>l("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Deal"}}}),children:[a.jsx(ft,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>l("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Deal"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(kn,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:r,onChange:h=>s(h.target.value),disabled:i||e.created_by!==c?.id&&e.assigned_to!==c?.id,children:d.map(h=>a.jsx("option",{value:h.value,children:h.label},h.value))}),(e.created_by===c?.id||e.assigned_to===c?.id)&&a.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:m,disabled:i||!r||r===e.stage,children:i?"Updating...":"Update"})]})]}):null}const lg=10,B_=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],H_={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:""},li=e=>{if(!e)return"Draft";const t=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[t]||"Draft"},G_=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",h5e=e=>{switch(li(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},g5e=e=>{switch(li(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},Zy=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",cg=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",p5e=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const t=new Date(e);if(isNaN(t.getTime()))return"";const n=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0");return`${n}-${r}-${s}`}catch{return""}},V_=(e,t)=>{if(!e||t==null||t==="")return"";const n=Number(t);if(Number.isNaN(n))return"";const r=new Date(e);return isNaN(r.getTime())?"":(r.setDate(r.getDate()+n),r.toISOString().slice(0,10))},cU=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},dU=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},Zv=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},x5e=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const r of e){const s=localStorage.getItem(r);if(s)try{const i=JSON.parse(s),o=Zv(i);if(o)return o}catch{}}const t=localStorage.getItem("user_id"),n=Zv(t);return n||null},y5e=e=>{if(!e)return"";const n=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(r=>r!=null&&String(r).trim()!=="");return n?String(n):""},b5e=e=>{if(!e)return"";const n=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(r=>r!=null&&String(r).trim()!=="");return n?String(n):""};function v5e(){const e=rt();g.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[t,n]=g.useState([]),[r,s]=g.useState(!1),[i,o]=g.useState([]),[l,c]=g.useState([]),[d,m]=g.useState([]),[h,p]=g.useState([]),[b,v]=g.useState(null),[x,w]=g.useState(null),[j,C]=g.useState(!1),[S,_]=g.useState(!1),[E,A]=g.useState(!1),[T,R]=g.useState(null),[U,W]=g.useState(!1),[I,M]=g.useState(null),[H,q]=g.useState(H_),[ae,K]=g.useState(""),[B,X]=g.useState("Filter by Status"),[le,ue]=g.useState(null),[J,ne]=g.useState(1),[pe,we]=g.useState("Overview"),[ye,Te]=g.useState("Draft"),[Ae,Pe]=g.useState(null);g.useEffect(()=>{async function G(){try{const te=await oe.get("/auth/me");Pe(te.data)}catch(te){console.error(te)}}G()},[]),g.useEffect(()=>{let G=!0;return(async()=>{const ve=x5e();if(ve&&G){v(ve);return}try{const je=await oe.get("/auth/me"),Ie=Zv(je?.data);if(Ie&&G){v(Ie);return}}catch{}try{const je=await oe.get("/users/me"),Ie=Zv(je?.data);if(Ie&&G){v(Ie);return}}catch{}G&&v(null)})(),()=>{G=!1}},[]);const $=g.useCallback(G=>G&&l.find(ve=>String(ve.id)===String(G))?.name||"",[l]),Ne=g.useCallback(G=>{if(!G)return"";const te=d.find(ve=>String(ve.id)===String(G));return te?`${te.first_name} ${te.last_name}`.trim():""},[d]),fe=g.useCallback(G=>{if(!G)return"--";const te=i.find(ve=>String(ve.id)===String(G));return te?.deal_name||te?.name||`Deal #${cU(G)}`},[i]),O=g.useCallback(G=>{const te=i.find(Ie=>String(Ie.id)===String(G)),ve=y5e(te);let je=b5e(te);if(!je&&ve){const Ie=d.filter(tt=>String(tt.account_id||"")===String(ve));if(Ie.length>0){const tt=[...Ie].sort((vt,tn)=>{const un=`${vt.first_name||""} ${vt.last_name||""}`.trim().toLowerCase(),Si=`${tn.first_name||""} ${tn.last_name||""}`.trim().toLowerCase();return un.localeCompare(Si)});je=String(tt[0].id)}}if(ve&&je){const Ie=d.find(tt=>String(tt.id)===String(je));Ie?.account_id&&String(Ie.account_id)!==String(ve)&&(je="")}return{accountId:ve||"",contactId:je||""}},[i,d]),ce=g.useCallback(G=>{if(!G)return"--";if(G.deal?.deal_name)return G.deal.deal_name;if(G.deal?.name)return G.deal.name;const te=G.deal_id||G.deal?.id;return te?fe(te):"--"},[fe]),de=g.useCallback(G=>{if(!G)return"--";if(G.account?.name)return G.account.name;let te=G.account_id||G.account?.id;if(!te){const ve=G.deal_id||G.deal?.id;ve&&(te=O(ve).accountId)}return te?$(te)||`Account #${te}`:"--"},[O,$]),Ce=g.useCallback(G=>{if(!G)return"--";if(G.contact?.first_name||G.contact?.last_name)return`${G.contact?.first_name||""} ${G.contact?.last_name||""}`.trim()||"--";let te=G.contact_id||G.contact?.id;if(!te){const je=G.deal_id||G.deal?.id;je&&(te=O(je).contactId)}return(te?Ne(te):"")||(te?`Contact #${te}`:"--")},[O,Ne]),Ee=g.useCallback(async(G=null)=>{s(!0);try{const te=await oe.get("/quotes/admin/fetch-all"),je=[...Array.isArray(te.data)?te.data:[]].sort((Ie,tt)=>{const vt=Ie?.created_at||Ie?.updated_at||0,tn=tt?.created_at||tt?.updated_at||0;return new Date(tn)-new Date(vt)});if(n(je),G){const Ie=je.find(tt=>tt.id===G);w(Ie||null)}}catch(te){console.error(te),n([]),te.response?.status===403?Q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):Q.error("Failed to fetch quotes. Please try again later.")}finally{s(!1)}},[]),Ge=g.useCallback(async()=>{try{const G=await oe.get("/deals/admin/fetch-all");o(Array.isArray(G.data)?G.data:[])}catch(G){console.error(G),G.response?.status===403&&Q.warn("Unable to load deals (permission denied).")}},[]),Je=g.useCallback(async()=>{try{const G=await oe.get("/accounts/admin/fetch-all");c(Array.isArray(G.data)?G.data:[])}catch(G){console.error(G),G.response?.status===403&&Q.warn("Unable to load accounts (permission denied).")}},[]),We=g.useCallback(async()=>{try{const G=await oe.get("/contacts/admin/fetch-all");m(Array.isArray(G.data)?G.data:[])}catch(G){console.error(G),G.response?.status===403&&Q.warn("Unable to load contacts (permission denied).")}},[]),Ke=g.useCallback(async()=>{try{const G=await oe.get("/users/all");p(Array.isArray(G.data)?G.data:[])}catch(G){console.error(G),G.response?.status===403&&Q.warn("Unable to load users (permission denied).")}},[]);g.useEffect(()=>{Ee(),Ge(),Je(),We(),Ke()},[Ee,Ge,Je,We,Ke]);const He=g.useMemo(()=>{const G=ae.trim().toLowerCase(),te=B.trim();return t.filter(ve=>{const je=ce(ve),Ie=de(ve),tt=Ce(ve),vt=V_(ve.presented_date,ve.validity_days),tn=[ve.quote_id,je,Ie,tt,ve.total_amount?.toString(),ve.validity_days?.toString(),ve.presented_date?cg(ve.presented_date):"",vt?cg(vt):"",ve.assigned_user?.first_name,ve.assigned_user?.last_name,ve.creator?.first_name,ve.creator?.last_name,ve.status,ve.notes,Zy(ve.created_at),Zy(ve.updated_at)],un=G===""||tn.some(tr=>tr==null?!1:tr.toString().toLowerCase().includes(G)),Si=te==="Filter by Status"||li(ve.status)===te;return un&&Si})},[t,ae,B,ce,de,Ce]),Se=Math.max(1,Math.ceil(He.length/lg)||1);g.useEffect(()=>ne(1),[ae,B]),g.useEffect(()=>{ne(G=>{const te=Math.max(1,Math.ceil(He.length/lg)||1);return G>te?te:G})},[He.length]);const Ve=g.useMemo(()=>{const G=(J-1)*lg;return He.slice(G,G+lg)},[He,J]),k=()=>ne(G=>Math.max(G-1,1)),Z=()=>ne(G=>Math.min(G+1,Se)),re=G=>{w(G),we("Overview"),Te(li(G?.status)||"Draft")},be=()=>{w(null),we("Overview")},z=G=>{G.target.id==="quoteModalBackdrop"&&!U&&be()},ee=g.useCallback(()=>{C(!1),_(!1),M(null),q(H_),A(!1)},[]),ie=G=>{G.target.id==="modalBackdrop"&&!E&&!U&&ee()},V=G=>{const{name:te,value:ve}=G.target;if(te==="deal_id"){const{accountId:je,contactId:Ie}=O(ve);q(tt=>({...tt,deal_id:ve,account_id:je,contact_id:Ie}));return}q(je=>({...je,[te]:ve}))},F=()=>{q(H_),_(!1),M(null),C(!0)},se=G=>{if(!G)return;w(null);const te=G.deal?.id?String(G.deal.id):G.deal_id?String(G.deal_id):"",ve=te?O(te):{accountId:"",contactId:""},je=G.account?.id?String(G.account.id):G.account_id?String(G.account_id):ve.accountId,Ie=G.contact?.id?String(G.contact.id):G.contact_id?String(G.contact_id):ve.contactId,tt=G.assigned_user?.id?String(G.assigned_user.id):G.assigned_to?String(G.assigned_to):"";q({deal_id:te,account_id:je||"",contact_id:Ie||"",total_amount:G.total_amount?.toString()||"",presented_date:p5e(G.presented_date),validity_days:G.validity_days!==null&&G.validity_days!==void 0?String(G.validity_days):"",status:li(G.status)||"Draft",assigned_to:tt,notes:G.notes||""}),_(!0),M(G.id),C(!0)},xe=G=>{if(!G)return;const te=G.quote_id||"this quote";R({title:"Delete Quote",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:te}),"? This action cannot be undone."]}),confirmLabel:"Delete Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:G.id,name:te}})},ge=G=>{if(G.preventDefault(),!b){Q.error("Unable to determine current user. Please log in again.");return}if(!H.deal_id){Q.error("Deal is required.");return}if(!H.total_amount||Number(H.total_amount)<=0){Q.error("Total amount must be greater than 0.");return}if(H.validity_days!==""&&Number(H.validity_days)<0){Q.error("Validity days must be 0 or higher.");return}const te=O(H.deal_id),ve={deal_id:Number(H.deal_id),account_id:te.accountId?Number(te.accountId):null,contact_id:te.contactId?Number(te.contactId):null,total_amount:Number(H.total_amount),presented_date:H.presented_date||null,validity_days:H.validity_days===""?null:Number(H.validity_days),status:H.status||"Draft",assigned_to:H.assigned_to?Number(H.assigned_to):null,notes:H.notes?.trim()||null},je=S&&I?"update":"create",Ie=fe(H.deal_id),tt=je==="create"?{...ve,created_by_id:Number(b)}:ve;R({title:je==="create"?"Confirm New Quote":"Confirm Update",message:je==="create"?a.jsxs("span",{children:["Are you sure you want to create a quote for"," ",a.jsx("span",{className:"font-semibold",children:Ie}),"?"]}):a.jsxs("span",{children:["Save changes to"," ",a.jsx("span",{className:"font-semibold",children:Ie}),"?"]}),confirmLabel:je==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:je,payload:tt,targetId:I||null,name:Ie}})},Me=async()=>{if(!T?.action){R(null);return}const{action:G}=T,{type:te,payload:ve,targetId:je,name:Ie}=G;W(!0);try{if(te==="create")A(!0),await oe.post("/quotes/admin",ve),Q.success("Quote created successfully."),ee(),await Ee();else if(te==="update"){if(!je)throw new Error("Missing quote identifier for update.");A(!0),await oe.put(`/quotes/admin/${je}`,ve),Q.success("Quote updated successfully."),ee(),await Ee(),x?.id===je&&w(null)}else if(te==="delete"){if(!je)throw new Error("Missing quote identifier for deletion.");const tt=x?.id;ue(je),await oe.delete(`/quotes/admin/${je}`),Q.success(`Quote "${Ie}" deleted successfully.`),await Ee(tt&&tt!==je?tt:null),tt===je&&w(null)}}catch(tt){console.error(tt);const vt=te==="create"?"Failed to create quote. Please review the details and try again.":te==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";Q.error(vt),(te==="create"||te==="update")&&A(!1),te==="delete"&&ue(null)}finally{(te==="create"||te==="update")&&A(!1),te==="delete"&&ue(null),W(!1),R(null)}},De=()=>{U||R(null)},et=g.useCallback((G,te)=>{const ve=G?.deal_id??G?.deal?.id??"",je=ve?Number(ve):null,Ie=je?O(String(je)):{accountId:"",contactId:""},tt=G?.account_id??G?.account?.id??Ie.accountId??null,vt=G?.contact_id??G?.contact?.id??Ie.contactId??null,tn=G?.total_amount??0,un=G?.assigned_to??G?.assigned_user?.id??null;return{deal_id:je,account_id:tt!=null&&String(tt).trim()!==""?Number(tt):null,contact_id:vt!=null&&String(vt).trim()!==""?Number(vt):null,total_amount:Number(tn),presented_date:G?.presented_date||null,validity_days:G?.validity_days===""||G?.validity_days===void 0||G?.validity_days===null?null:Number(G.validity_days),status:te,assigned_to:un!=null&&String(un).trim()!==""?Number(un):null,notes:G?.notes?.trim()||null}},[O]),gt=g.useCallback(async()=>{if(!x?.id)return;const G=li(ye),te=[G,G.toLowerCase()],ve=async je=>oe.patch(`/quotes/admin/${x.id}/status`,{status:je},{headers:{"Content-Type":"application/json"}});try{let je=!1;for(const Ie of te)try{await ve(Ie),je=!0;break}catch(tt){if(tt?.response?.status===422)continue;throw tt}if(!je){const Ie=et(x,G);if(!Ie.deal_id){Q.error("Cannot update status: missing deal_id on selected quote.");return}if(!Ie.total_amount||Ie.total_amount<=0){Q.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await oe.put(`/quotes/admin/${x.id}`,Ie)}Q.success(`Quote status updated to ${G}`),w(null),we("Overview"),await Ee()}catch(je){console.error(je);const Ie=je?.response?.data?.message||(je?.response?.data?.errors?Object.values(je.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";Q.error(Ie)}},[x,ye,Ee,et]),Nt=[{label:"Filter by Status",value:"Filter by Status"},...B_.map(G=>({label:G.label,value:G.value}))],Pt=T?.action?.type==="delete"?T.action.targetId:null,dn=x&&(le===x.id||Pt===x.id),jn=x&&le===x.id,oa=x?a.jsx("div",{id:"quoteModalBackdrop",onClick:z,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:G=>G.stopPropagation(),children:[a.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:a.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),a.jsx("button",{onClick:be,className:"text-gray-500 hover:text-white transition cursor-pointer",children:a.jsx(wn,{size:25})})]})}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:ce(x)}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${g5e(x.status)}`,children:G_(x.status)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>se(x),disabled:U||T?.action?.type==="update"&&T.action.targetId===x.id,children:[a.jsx(Rn,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>xe(x),disabled:!!dn,children:jn?"Deleting...":a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"mr-2"}),"Delete"]})})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-1 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(G=>a.jsx("button",{onClick:()=>we(G),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${pe===G?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:G},G))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[pe==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Quote ID:"}),a.jsx("p",{children:dU(x.quote_id)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Deal:"}),a.jsx("p",{children:ce(x)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Account:"}),a.jsx("p",{children:de(x)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Contact:"}),a.jsx("p",{children:Ce(x)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Total Amount:"}),a.jsx("p",{children:x.total_amount?`${Number(x.total_amount).toLocaleString()}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Presented Date:"}),a.jsx("p",{children:cg(x.presented_date)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Validity Days:"}),a.jsx("p",{children:x.validity_days!==null&&x.validity_days!==void 0?x.validity_days:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),a.jsx("p",{children:cg(V_(x.presented_date,x.validity_days))||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Status:"}),a.jsx("p",{children:G_(x.status)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:x.assigned_user?`${x.assigned_user.first_name} ${x.assigned_user.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:x.creator?`${x.creator.first_name} ${x.creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:Zy(x.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:Zy(x.updated_at)||"N/A"})]})]})}),pe==="Notes"&&a.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),a.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:x.notes||"No notes available."})]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/manager/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(pt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Quotes"}}}),children:[a.jsx(ft,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/manager/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(kn,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:ye||li(x.status)||"Draft",onChange:G=>Te(G.target.value),children:B_.map(G=>a.jsx("option",{value:G.value,children:G.label},G.value))}),a.jsx("button",{onClick:gt,disabled:li(ye)===li(x.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${li(ye)===li(x.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,Jn=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&a.jsx(yt,{message:"Loading quotes..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(Br,{className:"mr-2 text-blue-600"})," Quotes"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:F,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(Rt,{className:"mr-2"})," Add Quote"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search quotes",value:ae,onChange:G=>K(G.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:B,onChange:G=>X(G.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:Nt.map(G=>a.jsx("option",{value:G.value,children:G.label},G.value))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),a.jsx("th",{className:"py-3 px-4",children:"Deal"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Expiry Date"})]})}),a.jsx("tbody",{children:r?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"Loading quotes..."})}):He.length>0?Ve.map(G=>{const te=V_(G.presented_date,G.validity_days);return a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>re(G),children:[a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:dU(G.quote_id)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"break-words",children:ce(G)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-sm text-gray-700 break-words",children:de(G)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"break-words",children:Ce(G)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-gray-700",children:G.total_amount?`${Number(G.total_amount).toLocaleString()}`:"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${h5e(G.status)}`,children:G_(G.status)})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{children:G.assigned_user?`${G.assigned_user.first_name} ${G.assigned_user.last_name}`:"Unassigned"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-gray-500 text-xs",children:cg(te)||"--"})})]},G.id)}):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No quotes found."})})})]})}),a.jsx(Et,{className:"mt-4",totalItems:He.length,pageSize:lg,currentPage:J,onPrev:k,onNext:Z,label:"quotes"})]}),P=j?a.jsx("div",{id:"modalBackdrop",onClick:ie,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:G=>G.stopPropagation(),children:[a.jsx("button",{onClick:ee,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:E||U,children:a.jsx(St,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:S?"Edit Quote":"Add New Quote"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:ge,children:[a.jsx(mU,{label:"Deal",name:"deal_id",value:H.deal_id,onChange:G=>{const{accountId:te,contactId:ve}=O(G);q(je=>({...je,deal_id:G,account_id:te,contact_id:ve}))},items:Array.isArray(i)?i:[],getLabel:G=>`${cU(G?.deal_id??"")} ${G?.name??""}`.trim(),placeholder:"Search deal...",disabled:E||i.length===0,className:"md:col-span-2"}),a.jsx(uU,{label:"Account",value:$(H.account_id)||(H.account_id?`Account #${H.account_id}`:""),disabled:!0}),a.jsx(uU,{label:"Contact",value:Ne(H.contact_id)||(H.contact_id?`Contact #${H.contact_id}`:""),disabled:!0}),a.jsx(W_,{label:"Total Amount",name:"total_amount",type:"number",value:H.total_amount,onChange:V,placeholder:"0.00",required:!0,disabled:E}),a.jsx(W_,{label:"Presented Date",name:"presented_date",type:"date",value:H.presented_date,onChange:V,disabled:E}),a.jsx(W_,{label:"Validity Days",name:"validity_days",type:"number",value:H.validity_days,onChange:V,placeholder:"30",disabled:E}),a.jsx(mU,{label:"Assigned To",value:H.assigned_to||"",onChange:G=>q(te=>({...te,assigned_to:G})),items:Array.isArray(h)?h:[],getLabel:G=>{const te=`${G?.first_name??""} ${G?.last_name??""}`.trim();return te?G?.role?`${te} (${G.role})`:te:G?.email||""},placeholder:"Search assignee...",disabled:E}),a.jsx(w5e,{label:"Status",name:"status",value:H.status,onChange:V,options:B_,required:!0,disabled:E,className:"md:col-span-2"}),a.jsx(j5e,{label:"Notes",name:"notes",value:H.notes,onChange:V,placeholder:"Additional details...",rows:3,disabled:E,className:"md:col-span-2"}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:ee,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:E||U,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:E||U,children:E?"Saving...":S?"Update Quote":"Save Quote"})]})]})]})}):null,he=T?a.jsx(C5e,{open:!0,title:T.title,message:T.message,confirmLabel:T.confirmLabel,cancelLabel:T.cancelLabel,variant:T.variant,onConfirm:Me,onCancel:De,loading:U}):null;return a.jsxs(a.Fragment,{children:[x?oa:Jn,P,he]})}function W_({label:e,name:t,value:n,onChange:r,placeholder:s,type:i="text",required:o=!1,disabled:l=!1,className:c=""}){return a.jsxs("div",{className:c,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("input",{type:i,name:t,value:n??"",onChange:r,placeholder:s,required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]})}function uU({label:e,value:t,className:n="",disabled:r=!0}){return a.jsxs("div",{className:n,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("input",{type:"text",value:t??"",disabled:r,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function w5e({label:e,name:t,value:n,onChange:r,options:s,required:i=!1,disabled:o=!1,className:l=""}){const c=n!=null?String(n):"",m=s.some(h=>String(h.value)===c)?c:"";return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:m,onChange:r,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:s.map(h=>a.jsx("option",{value:String(h.value??""),children:h.label},h.value??h.label))})]})}function mU({label:e,items:t=[],value:n="",onChange:r,getLabel:s,placeholder:i="Search...",disabled:o=!1,className:l=""}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx(N5e,{items:t,value:n??"",onChange:r,getLabel:s,placeholder:i,disabled:o})]})}function N5e({items:e=[],value:t="",onChange:n,getLabel:r,placeholder:s="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=g.useState(!1),[d,m]=g.useState(""),h=g.useRef(null),p=e.find(x=>String(x.id)===String(t)),b=p?r(p):"",v=g.useMemo(()=>{const x=d.trim().toLowerCase();return(x?e.filter(j=>(r(j)||"").toLowerCase().includes(x)):e).slice(0,o)},[e,d,r,o]);return g.useEffect(()=>{const x=w=>{h.current&&!h.current.contains(w.target)&&c(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]),g.useEffect(()=>{l||m("")},[l]),a.jsxs("div",{ref:h,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:l?d:b,placeholder:s,onFocus:()=>!i&&c(!0),onChange:x=>{m(x.target.value),l||c(!0)},className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:v.length>0?v.map(x=>{const w=String(x.id),j=r(x),C=String(t)===w;return a.jsx("button",{type:"button",onClick:()=>{n(w),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${C?"bg-blue-50":""}`,children:j||"--"},w)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function j5e({label:e,name:t,value:n,onChange:r,placeholder:s,rows:i=3,disabled:o=!1,className:l=""}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:r,placeholder:s,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function C5e({open:e,title:t,message:n,confirmLabel:r,cancelLabel:s="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:s}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":r})]})]})})}function S5e(){const{userRole:e}=er();return a.jsx(dj,{currentUserRole:e,currentUserId:null})}const sd=10;function _5e(){g.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,t]=g.useState(null),[n,r]=g.useState(""),[s,i]=g.useState("Filter by Actions"),[o,l]=g.useState(1),c=async()=>{try{const w=await oe.get("/logs/read-all");t(w.data)}catch(w){console.error("Error fetching audit logs:",w)}};g.useEffect(()=>{c()},[]);const d=g.useMemo(()=>{if(!Array.isArray(e))return[];const w=n.trim().toLowerCase(),j=s?.toUpperCase?.()||"ALL";return e.filter(S=>{const _=S.timestamp?new Date(S.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",E=`${S.entity_type||""} ${S.entity_name||S.entity_details?.name||S.entity_details?.title||S.entity_id||""}`,A=`${S.logger?.first_name||""} ${S.logger?.last_name||""}`,T=[_,A,S.action,S.entity_type,E,S.description],R=w===""||T.some(W=>W==null?!1:W.toString().toLowerCase().includes(w)),U=j==="FILTER BY ACTIONS"||(S.action||"").toUpperCase()===j;return R&&U}).sort((S,_)=>{const E=S.timestamp?new Date(S.timestamp).getTime():0;return(_.timestamp?new Date(_.timestamp).getTime():0)-E})},[e,n,s]),m=Math.max(1,Math.ceil(d.length/sd)||1);g.useEffect(()=>{l(1)},[n,s]),g.useEffect(()=>{l(w=>{const j=Math.max(1,Math.ceil(d.length/sd)||1);return w>j?j:w})},[d.length]);const h=g.useMemo(()=>{const w=(o-1)*sd;return d.slice(w,w+sd)},[d,o]);d.length===0||(o-1)*sd+1,Math.min(o*sd,d.length);const p=()=>l(w=>Math.max(w-1,1)),b=()=>l(w=>Math.min(w+1,m)),v=()=>{if(!d.length){jx.error("No logs to export!");return}const w=["Timestamp","User","Action","Resource","Details"],j=d.map(A=>[new Date(A.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${A.logger?.first_name||""} ${A.logger?.last_name||""}`.trim(),A.action,`${A.entity_type}: ${A.entity_id}`,A.description||""]),C=[w.join(","),...j.map(A=>A.map(T=>`"${String(T).replace(/"/g,'""')}"`).join(","))].join(`
`),S=new Blob([C],{type:"text/csv;charset=utf-8;"}),_=URL.createObjectURL(S),E=document.createElement("a");E.href=_,E.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL(_)},x=w=>{switch((w||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&a.jsx(yt,{message:"Loading audit logs..."}),a.jsx(Nx,{toastOptions:{duration:1e3}}),a.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[a.jsx(ft,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),a.jsxs("p",{className:"text-sm text-blue-700",children:[a.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(mr,{className:"text-blue-600",size:20}),a.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:v,children:[a.jsx(Sc,{className:"mr-2"}),"Export Logs"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[a.jsx(bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search audit logs",value:n,onChange:w=>r(w.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:s,onChange:w=>i(w.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),a.jsx("option",{value:"CREATE",children:"CREATE"}),a.jsx("option",{value:"DELETE",children:"DELETE"}),a.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),a.jsx("th",{className:"py-3 px-4",children:"User"}),a.jsx("th",{className:"py-3 px-4",children:"Action"}),a.jsx("th",{className:"py-3 px-4",children:"Resource"}),a.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),a.jsx("tbody",{children:Array.isArray(d)&&d.length>0?h.map((w,j)=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(w.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),a.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.name}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${x(w.action)}`,children:w.action})}),a.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[w.entity_type,": ",w.entity_id]}),a.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.description})]},j)):a.jsx("tr",{children:a.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),a.jsx(Et,{className:"mt-4",totalItems:d.length,pageSize:sd,currentPage:o,onPrev:p,onNext:b,label:"logs"})]})}const A5e=10,E5e=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"}],T5e=e=>e?String(e).toUpperCase():"",$m=e=>{const t=T5e(e);return t==="PLANNED"||t==="PENDING"?"PLANNED":t==="HELD"||t==="COMPLETED"?"HELD":t==="NOT HELD"||t==="NOT_HELD"||t==="CANCELLED"?"NOT_HELD":"PLANNED"},q_=e=>{const t=$m(e);return t==="PLANNED"?"PLANNED":t==="HELD"?"HELD":t==="NOT_HELD"?"NOT HELD":"--"},fU=e=>{switch($m(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},hU=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function L5e(){const[e,t]=g.useState(!1),[n,r]=g.useState(null),[s,i]=g.useState(null),[o,l]=g.useState(null),[c,d]=g.useState(null),[m,h]=g.useState([]),[p,b]=g.useState(null),[v,x]=g.useState(!1),[w,j]=g.useState(null),[C,S]=g.useState(!1),[_,E]=g.useState(!1),[A,T]=g.useState("PLANNED"),[R,U]=g.useState(!1),[W,I]=g.useState(!1),[M]=gr(),H=rt(),q=Xt(),K={subject:"",call_time:(()=>{const k=new Date,Z=k.getFullYear(),re=String(k.getMonth()+1).padStart(2,"0"),be=String(k.getDate()).padStart(2,"0");return`${Z}-${re}-${be}T08:00`})(),duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[B,X]=g.useState(K);g.useEffect(()=>{const k=q.state?.openCallModal,Z=q.state?.initialCallData?.relatedTo1||M.get("id");(k||Z)&&(t(!0),q.state?.initialCallData&&X(re=>({...re,...q.state.initialCallData})),Z&&X(re=>({...re,relatedTo1:Z})),H(q.pathname,{replace:!0,state:{}}))},[q,M,H]);const le=async()=>{try{I(!0);const k=await oe.get("/calls/admin/fetch-all"),re=[...Array.isArray(k.data)?k.data:[]].sort((be,z)=>{const ee=be?.created_at?new Date(be.created_at):0;return(z?.created_at?new Date(z.created_at):0)-ee});h(re)}catch(k){console.error("Error fetching calls:",k),Q.error("Failed to load calls")}finally{I(!1)}},ue=async()=>{try{const k=await oe.get("/users/all");b(k.data)}catch(k){console.error("Error fetching users: ",k)}};g.useEffect(()=>{ue(),le()},[]);const J=[],ne="",pe="Filter by Status",we="Filter by Users",ye=1,Te=m,Ae=m,Pe=m.length,$=m.filter(k=>$m(k.status)==="PLANNED").length,Ne=m.filter(k=>$m(k.status)==="HELD").length,fe=m.filter(k=>$m(k.status)==="NOT_HELD").length,O=[{title:"Total",value:Pe,icon:fr,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:$,icon:Za,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:Ne,icon:Fn,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:fe,icon:hr,color:"text-gray-600",bgColor:"bg-gray-100"}],[ce,de]=g.useState("Overview"),Ce=k=>{const{name:Z,value:re}=k.target;X(be=>{const z={...be,[Z]:re};return Z==="relatedType1"&&(z.relatedTo1="",re==="Lead"?(z.relatedType2=null,z.relatedTo2=null,d([])):re==="Account"&&(z.relatedType2="Contact")),Z==="relatedType2"&&(z.relatedTo2=""),z})};g.useEffect(()=>{const k=async()=>{try{l([]);let Z;B.relatedType1==="Lead"?Z=await oe.get("/leads/admin/getLeads"):B.relatedType1==="Account"&&(Z=await oe.get("/accounts/admin/fetch-all"));let re=[];if(Z&&Array.isArray(Z.data)?re=Z.data:re=[],v&&B.relatedTo1)try{let be;B.relatedType1==="Lead"?be=await oe.get(`/leads/get/${B.relatedTo1}`):B.relatedType1==="Account"&&(be=await oe.get(`/accounts/get/${B.relatedTo1}`)),be&&be.data&&(re.some(ee=>String(ee.id)===String(B.relatedTo1))||(re=[be.data,...re]))}catch(be){console.error("Error fetching specific related item:",be)}l(re)}catch(Z){console.error("Error fetching data:",Z),l([])}};B.relatedType1&&k()},[B.relatedType1,v,B.relatedTo1]),g.useEffect(()=>{const k=async()=>{try{d([]);let Z;if(B.relatedType1==="Account"&&B.relatedTo1)B.relatedType2==="Contact"?Z=await oe.get(`/contacts/from-acc/${B.relatedTo1}`):B.relatedType2==="Deal"&&(Z=await oe.get(`/deals/from-acc/${B.relatedTo1}`));else{d([]);return}Z&&Array.isArray(Z.data)?d(Z.data):d([])}catch(Z){console.error("Error fetching data:",Z),d([])}};B.relatedType2&&k()},[B.relatedType2,B.relatedTo1,B.relatedType1]);const Ee=k=>{if(k.preventDefault(),!B.assigned_to){Q.error("Please assign the call to a user.");return}const Z={...B,duration_minutes:B.duration_minutes?parseInt(B.duration_minutes,10):null,relatedTo1:B.relatedTo1?parseInt(B.relatedTo1,10):null,relatedTo2:B.relatedType1==="Lead"?null:B.relatedTo2?parseInt(B.relatedTo2,10):null,relatedType2:B.relatedType1==="Lead"?null:B.relatedType2,assigned_to:B.assigned_to?parseInt(B.assigned_to,10):null},re=v&&w?"update":"create",be=(B.subject||"").trim()||"Untitled Call";i({title:re==="create"?"Confirm New Call":"Confirm Update",message:re==="create"?`Create "${be}"?`:`Save changes to "${be}"?`,confirmLabel:re==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:re,payload:Z,targetId:w||null,name:be}})},Ge=k=>r(k),Je=()=>{t(!1),x(!1),j(null)},We=async()=>{if(!s?.action){i(null);return}const{action:k}=s,{type:Z,payload:re,targetId:be,name:z}=k;E(!0);try{if(Z==="create")S(!0),await oe.post("/calls/create",re),Q.success(`Call "${z}" created successfully.`),t(!1),X(K),x(!1),j(null),await le();else if(Z==="update"){if(!be)throw new Error("Missing call identifier for update.");S(!0),await oe.put(`/calls/${be}`,re),Q.success(`Call "${z}" updated successfully.`),t(!1),X(K),x(!1),j(null),await le()}else if(Z==="delete"){if(!be)throw new Error("Missing call identifier for deletion.");await oe.delete(`/calls/${be}`),Q.success(`Call "${z}" deleted successfully.`),n?.id===be&&r(null),await le()}}catch(ee){const ie=Z==="create"?"Failed to create call. Please review the details and try again.":Z==="update"?"Failed to update call. Please review the details and try again.":"Failed to delete call. Please try again.",V=ee?.response?.data?.detail||ie;Q.error(V)}finally{(Z==="create"||Z==="update")&&S(!1),E(!1),i(null)}},Ke=()=>{_||i(null)},He=async()=>{if(n?.id)try{U(!0),await oe.put(`/calls/${n.id}`,{status:A}),Q.success(`Status updated to ${q_(A)}`),h(k=>Array.isArray(k)?k.map(Z=>Z.id===n.id?{...Z,status:A}:Z):k),r(null)}catch(k){const Z=k.response?.data?.detail||"Failed to update status.";Q.error(Z)}finally{U(!1)}};g.useEffect(()=>{n&&T($m(n.status))},[n]);const Se=n?a.jsxs("div",{id:"callModalBackdrop",onClick:k=>k.target.id==="callModalBackdrop"&&r(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[W&&a.jsx(yt,{message:"Loading call details..."}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),a.jsx("button",{onClick:()=>r(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:a.jsx(wn,{size:25})})]}),a.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:n.subject}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${fU(n.status)}`,children:q_(n.status)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const k=ee=>{if(!ee)return"";const ie=new Date(ee),V=ie.getFullYear(),F=String(ie.getMonth()+1).padStart(2,"0"),se=String(ie.getDate()).padStart(2,"0"),xe=String(ie.getHours()).padStart(2,"0"),ge=String(ie.getMinutes()).padStart(2,"0");return`${V}-${F}-${se}T${xe}:${ge}`},Z=n.lead?"Lead":n.account?"Account":"Lead",re=n.lead?n.lead.id:n.account?n.account.id:null,be=Z==="Lead"?null:n.contact?"Contact":n.deal?"Deal":"Contact",z=Z==="Lead"?null:n.contact?n.contact.id:n.deal?n.deal.id:null;X({subject:n.subject||"",call_time:k(n.call_time),duration_minutes:n.duration_minutes?String(n.duration_minutes):"",direction:n.direction||"Outgoing",status:n.status||"Planned",notes:n.notes||"",relatedType1:Z,relatedType2:be,relatedTo1:re?String(re):"",relatedTo2:z?String(z):"",assigned_to:n.call_assign_to?.id?String(n.call_assign_to.id):""}),x(!0),j(n.id),r(null),t(!0)},children:[a.jsx(Rn,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>{const k=n.subject||"this call";i({title:"Delete Call",message:`Are you sure you want to permanently delete "${k}"? This action cannot be undone.`,confirmLabel:"Delete Call",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:n.id,name:k}})},children:[a.jsx(jt,{className:"mr-2"}),"Delete"]})]})]})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(k=>a.jsx("button",{onClick:()=>de(k),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${ce===k?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:k},k))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[ce==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsx(Po,{label:"Call Time",value:hU(n.call_time)}),a.jsx(Po,{label:"Duration",value:n.duration_minutes?`${n.duration_minutes} min`:null}),a.jsx(Po,{label:"Direction",value:n.direction||"--"}),a.jsx(Po,{label:"Assigned To",value:`${n.call_assign_to.first_name} ${n.call_assign_to.last_name}`}),n.lead&&a.jsx(Po,{label:"Lead",value:n.lead.title}),n.account&&a.jsx(Po,{label:"Account",value:n.account.name}),n.contact&&a.jsx(Po,{label:"Contact",value:`${n.contact.first_name} ${n.contact.last_name}`}),n.deal&&a.jsx(Po,{label:"Deal",value:n.deal.name}),a.jsx(Po,{label:"Created At",value:hU(n.created_at)})]})}),ce==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Call Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:n.notes||"No notes available."})]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:A,onChange:k=>T(k.target.value),children:[a.jsx("option",{value:"PLANNED",children:"PLANNED"}),a.jsx("option",{value:"HELD",children:"HELD"}),a.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),a.jsx("button",{onClick:He,disabled:R,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:R?"Updating...":"Update"})]})]})]})]})]}):null,Ve=e?a.jsx("div",{id:"modalBackdrop",onClick:k=>k.target.id==="modalBackdrop"&&Je(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[a.jsx("button",{onClick:Je,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(St,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:v?"Edit Call":"Add New Call"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:Ee,children:[a.jsx(P5e,{label:"Subject",className:"md:col-span-2",name:"subject",value:B.subject,onChange:Ce,disabled:C,required:!0}),a.jsxs("div",{className:"w-full flex flex-col",children:[a.jsxs("select",{name:"relatedType1",onChange:Ce,value:B.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:C,children:[a.jsx("option",{value:"Lead",children:"Lead"}),a.jsx("option",{value:"Account",children:"Account"})]}),a.jsx(Y_,{items:Array.isArray(o)?o:[],value:B.relatedTo1??"",placeholder:`Search ${B.relatedType1||"here"}...`,getLabel:k=>B.relatedType1==="Lead"?k.title:k.name??"",onChange:k=>X(Z=>({...Z,relatedTo1:k})),disabled:C})]}),a.jsxs("div",{className:"w-full flex flex-col",children:[a.jsxs("select",{name:"relatedType2",onChange:Ce,value:B.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:B.relatedType1==="Lead"||C,children:[a.jsx("option",{value:"Contact",children:"Contact"}),a.jsx("option",{value:"Deal",children:"Deal"})]}),a.jsx(Y_,{disabled:B.relatedType1==="Lead"||C,items:Array.isArray(c)?c:[],value:B.relatedTo2??"",placeholder:B.relatedType1==="Lead"?"":Array.isArray(c)&&c.length>0?`Search ${B.relatedType2||"Contact"}...`:`No ${B.relatedType2||""} data found`,getLabel:k=>B.relatedType2==="Contact"?`${k.first_name??""} ${k.last_name??""}`.trim():k.name??"",onChange:k=>X(Z=>({...Z,relatedTo2:k}))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),a.jsx("input",{type:"datetime-local",value:B.call_time,onChange:Ce,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),a.jsxs("div",{className:"w-full",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),a.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[a.jsx("input",{type:"tel",value:B.duration_minutes,onChange:Ce,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),a.jsx("p",{children:"minutes"})]})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Assign To"}),a.jsx(Y_,{items:Array.isArray(p)?p:[],value:B.assigned_to??"",placeholder:"Search an account...",getLabel:k=>`${k.first_name} ${k.last_name}`,onChange:k=>X(Z=>({...Z,assigned_to:k}))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),a.jsxs("select",{name:"direction",onChange:Ce,value:B.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[a.jsx("option",{value:"Incoming",children:"Incoming"}),a.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),a.jsxs("select",{name:"status",onChange:Ce,value:B.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[a.jsx("option",{value:"Planned",children:"Planned"}),a.jsx("option",{value:"Held",children:"Held"}),a.jsx("option",{value:"Not held",children:"Not held"})]})]}),a.jsx(D5e,{className:"col-span-2",label:"Notes",value:B.notes,onChange:Ce,name:"notes"}),a.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[a.jsx("button",{type:"button",onClick:Je,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:C,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:C?"Saving...":v?"Update Call":"Save Call"})]})]})]})}):null;return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(fr,{className:"mr-2 text-blue-600"})," Calls"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{X(K),x(!1),j(null),t(!0)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(Rt,{className:"mr-2"})," Add Call"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:O.map(k=>a.jsx(k5e,{...k},k.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[a.jsx(bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",defaultValue:ne})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[a.jsxs("select",{defaultValue:pe,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[a.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),E5e.map(k=>a.jsx("option",{value:k.value,children:k.label},k.value))]}),a.jsxs("select",{defaultValue:we,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[a.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),J.map(k=>a.jsx("option",{value:k.name,children:k.name},k.id))]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Subject"}),a.jsx("th",{className:"py-3 px-4",children:"Related To"}),a.jsx("th",{className:"py-3 px-4",children:"Call Time"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),a.jsx("tbody",{children:W?a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"py-10",children:a.jsx(yt,{message:"Loading calls..."})})}):Ae.length>0?Ae.map(k=>a.jsxs("tr",{onClick:()=>Ge(k),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[a.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:k.subject||"--"}),a.jsxs("td",{className:"py-3 px-4",children:[k.lead&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:k.lead.title}),k.account&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:k.account.name}),k.contact&&a.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[k.contact.first_name," ",k.contact.last_name]}),k.deal&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:k.deal.name})]}),a.jsx("td",{className:"py-3 px-4 text-gray-800",children:k.call_time?new Date(k.call_time).toLocaleString():"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800",children:k?.call_assign_to?`${k.call_assign_to.first_name} ${k.call_assign_to.last_name}`:"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${fU(k.status)}`,children:q_(k.status)})})]},k.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),a.jsx(Et,{totalItems:Te.length,pageSize:A5e,currentPage:ye,onPrev:()=>{},onNext:()=>{},label:"calls"})]}),Se,Ve,s&&a.jsx(O5e,{open:!0,title:s.title,message:s.message,confirmLabel:s.confirmLabel,onConfirm:We,onCancel:Ke,loading:_})]})}function k5e({icon:e,title:t,value:n,color:r,bgColor:s}){return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[a.jsx("div",{className:`p-3 rounded-full ${s} ${r} mr-4`,children:a.jsx(e,{size:22})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function P5e(e){return a.jsxs("div",{className:e.className,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),a.jsx("input",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]})}function D5e(e){return a.jsxs("div",{className:e.className,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),a.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function Po({label:e,value:t}){return a.jsxs("p",{children:[a.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",a.jsx("br",{}),a.jsx("span",{className:"break-words",children:t||"--"})]})}function O5e({open:e,title:t,message:n,confirmLabel:r,cancelLabel:s="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:s}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":r})]})]})})}function Y_({items:e=[],value:t="",onChange:n,getLabel:r,placeholder:s="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=g.useState(!1),[d,m]=g.useState(""),h=g.useRef(null),p=e.find(x=>String(x.id)===String(t)),b=p?r(p):"",v=g.useMemo(()=>{const x=d.trim().toLowerCase();return(x?e.filter(j=>(r(j)||"").toLowerCase().includes(x)):e).slice(0,o)},[e,d,r,o]);return g.useEffect(()=>{const x=w=>{h.current&&!h.current.contains(w.target)&&c(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]),g.useEffect(()=>{l||m("")},[l]),a.jsxs("div",{ref:h,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:l?d:b,placeholder:s,onFocus:()=>!i&&c(!0),onChange:x=>{m(x.target.value),l||c(!0)},className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:v.length>0?v.map(x=>{const w=String(x.id),j=r(x),C=String(t)===w;return a.jsx("button",{type:"button",onClick:()=>{n(w),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${C?"bg-blue-50":""}`,children:j||"--"},w)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const gU=["To Do","In Progress","Review","Completed"],dg=10,M5e=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const n=t.getTimezoneOffset();return new Date(t.getTime()-n*60*1e3).toISOString().slice(0,16)},pU=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},I5e=e=>{const t=e.subject?.trim()??"",n=e.description?.trim()??"",r=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),e.status&&String(e.status).toUpperCase();let s=null,i=null,o=null,l=null;e.relatedType1==="Lead"&&e.relatedTo1?s=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?o=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2&&(l=Number(e.relatedTo2)));const c=e.assignedTo?Number(e.assignedTo):null,d=o||l||i||s,m=o?"Contact":l?"Deal":i?"Account":s?"Lead":null;return{title:t,description:n,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:c,notes:r,is_personal:!1,lead_id:s,account_id:i,contact_id:o,deal_id:l,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:d,related_type:m}},$5e=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",n=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",r=e.due_date||e.dueDate||null,s=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",o=()=>e.lead?.id||e.lead_id,l=()=>e.account?.id||e.account_id,c=()=>e.contact?.id||e.contact_id,d=()=>e.deal?.id||e.deal_id,m=()=>e.task_assign_to?.id||e.assigned_to,h=()=>e.lead?.title||e.lead_id,p=()=>e.account?.name||e.account_id,b=()=>i||e.contact_id,v=()=>e.deal?.name||e.deal_id;let x="Lead",w="",j="",C="",S="Lead",_="",E="",A="";const T=l(),R=p(),U=o(),W=h();if(T){x="Account",S="Account",_=R,w=String(T);const I=c(),M=d(),H=b(),q=v();I?(j="Contact",E="Contact",A=H,C=String(I)):M&&(E="Deal",j="Deal",A=q,C=String(M))}else U?(S="Lead",_=W,x="Lead",w=String(U)):e.related_type==="Account"&&(x="Account",w=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:e.status||"Not started",dueDate:r,dateAssigned:s,assignedToId:m()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:n,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:S,relatedTo1Text:_,relatedType2Text:E,relatedTo2Text:A,subject:e.title,relatedType1:x,relatedTo1:w,relatedType2:j,relatedTo2:C}};function R5e(){g.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=Ut(),[n,r]=g.useState("board"),[s,i]=g.useState(!1),[o,l]=g.useState(null),[c,d]=g.useState(!1),[m,h]=g.useState([]),[p,b]=g.useState(!0),[v,x]=g.useState(""),[w,j]=g.useState("Filter by Status"),[C,S]=g.useState("Filter by Priority"),[_,E]=g.useState([]),[A,T]=g.useState(1),[R,U]=g.useState(null),[W,I]=g.useState(!1),M=rt(),H=Xt(),[q,ae]=g.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""});g.useEffect(()=>{const O=H.state?.openTaskModal,ce=H.state?.initialTaskData;O&&(i(!0),ce&&ae(de=>({...de,...ce})),M(H.pathname,{replace:!0,state:{}}))},[H,M]);const K=async()=>{try{const O=await oe.get("/users/all");E(Array.isArray(O.data)?O.data:[])}catch(O){console.error("Failed to fetch users:",O),Q.error("Failed to fetch users.")}},B=async()=>{try{b(!0);const O=await oe.get("/tasks/all"),de=(Array.isArray(O.data)?O.data:[]).map($5e);de.sort((Ce,Ee)=>{const Ge=Ce.createdAt?new Date(Ce.createdAt):0;return(Ee.createdAt?new Date(Ee.createdAt):0)-Ge}),console.log("Fetched Tasks:",de),h(de),n==="list"&&T(1)}catch(O){console.error("Failed to load tasks:",O),Q.error("Failed to load tasks.")}finally{b(!1)}};g.useEffect(()=>{!t&&e&&(K(),B())},[t,e]);const X=()=>{l(null),ae({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},le=(O=null,ce=!1)=>{l(O),d(ce),O?ae({id:O.id,subject:O.title||"",description:O.description||"",priority:O.priority||"Normal",status:O.status||"Not started",dueDate:M5e(O.dueDate),assignedTo:O.assignedToId?String(O.assignedToId):"",notes:O.notes||"",relatedType1Text:O.relatedType1Text||"",relatedTo1Text:O.relatedTo1Text||"",relatedType2Text:O.relatedType2Text||"",relatedTo2Text:O.relatedTo2Text||"",relatedType1:O.relatedType1||"",relatedTo1:O.relatedTo1||"",relatedType2:O.relatedType2||"",relatedTo2:O.relatedTo2||""}):X(),i(!0)},ue=()=>{i(!1),l(null),d(!1),X()},J=async O=>{const ce=I5e(O);try{o&&!c?(await oe.put(`/tasks/${o.id}`,ce),Q.success("Task updated successfully.")):(await oe.post("/tasks/create",ce),Q.success("Task created successfully.")),i(!1),await B()}catch(de){console.error("Failed to save task:",de);const Ce=de.response?.data?.detail||"Failed to save task.";Q.error(Ce)}},ne=O=>{O&&U({title:"Delete Task",message:a.jsxs(a.Fragment,{children:["Are you sure you want to delete ",a.jsx("span",{className:"font-semibold",children:O.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:O.id}})},pe=async()=>{if(!R?.action){U(null);return}const{action:O}=R;I(!0);try{O.type==="delete"&&(await oe.delete(`/tasks/${O.targetId}`),Q.success("Task deleted successfully."),await B())}catch(ce){console.error("Task action failed:",ce),Q.error("Failed to delete task.")}finally{I(!1),U(null)}},we=()=>{W||U(null)},ye=g.useMemo(()=>{const O=v.trim().toLowerCase();return[...m].sort((de,Ce)=>{const Ee=de.createdAt?new Date(de.createdAt):0;return(Ce.createdAt?new Date(Ce.createdAt):0)-Ee}).filter(de=>{const Ce=O===""||de.title?.toLowerCase().includes(O)||de.description?.toLowerCase().includes(O)||de.assignedToName?.toLowerCase().includes(O)||de.createdBy?.toLowerCase().includes(O),Ee=w==="Filter by Status"||de.status===w,Ge=C==="Filter by Priority"||de.priority===C;return Ce&&Ee&&Ge})},[m,v,w,C]);g.useEffect(()=>{T(1)},[v,w,C,n]),g.useEffect(()=>{if(n==="list"){const O=ye.length===0?1:Math.ceil(ye.length/dg);A>O&&T(O)}},[ye.length,A,n]);const Te=g.useMemo(()=>{if(n==="board")return ye;const O=(A-1)*dg;return ye.slice(O,O+dg)},[ye,A,n]),Ae=g.useMemo(()=>{const O=new Date;return[{title:"To Do",value:m.filter(ce=>ce.status==="Not started").length,icon:Za,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:m.filter(ce=>ce.status==="In progress").length,icon:Bs,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:m.filter(ce=>ce.status==="Completed").length,icon:Fn,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:m.filter(ce=>ce.dueDate&&new Date(ce.dueDate)<O&&ce.status!=="Completed").length,icon:Vp,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:m.filter(ce=>ce.priority==="High").length,icon:ml,color:"text-orange-600",bgColor:"bg-orange-100"}]},[m]),Pe=O=>O.dueDate&&new Date(O.dueDate)<new Date&&O.status!=="Completed",$=O=>{switch(O.status){case"To Do":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In Progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Review":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},Ne=O=>{switch(O){case"To Do":return"bg-blue-100 text-blue-700";case"In Progress":return"bg-purple-100 text-purple-700";case"Review":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},fe=O=>{switch(O){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&a.jsx(yt,{message:"Loading tasks..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(Bs,{className:"text-blue-600"})," Tasks Board"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{type:"button",onClick:()=>le(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[a.jsx(Rt,{})," Create Task"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ae.map(O=>a.jsx(z5e,{...O},O.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search tasks",value:v,onChange:O=>x(O.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[a.jsxs("select",{value:w,onChange:O=>j(O.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"Filter by Status"}),gU.map(O=>a.jsx("option",{children:O},O))]}),a.jsxs("select",{value:C,onChange:O=>S(O.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"Filter by Priority"}),a.jsx("option",{children:"High"}),a.jsx("option",{children:"Normal"}),a.jsx("option",{children:"Low"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("button",{type:"button",onClick:()=>r("board"),className:`px-4 py-2 rounded-full text-sm ${n==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),a.jsx("button",{type:"button",onClick:()=>r("list"),className:`px-4 py-2 rounded-full text-sm ${n==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&ye.length===0&&a.jsx("p",{className:"text-center text-gray-500 mt-10 p-4 bg-white shadow rounded-lg",children:"No tasks found matching current filters."}),!p&&!t&&ye.length>0&&n==="board"&&a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:gU.map(O=>{const ce=Te.filter(de=>de.status===O);return a.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),a.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:O}),a.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:ce.length})]}),a.jsx("div",{className:`space-y-3 ${ce.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:ce.length>0?ce.map(de=>a.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${$(de)}`,onClick:()=>le(de,!0),children:[a.jsxs("div",{className:"text-left flex-1",children:[a.jsx("p",{className:"font-medium text-gray-800 text-sm",children:de.title}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",de.priority]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",de.assignedToName]}),a.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",a.jsx("span",{className:Pe(de)?"text-red-600":"text-gray-600",children:de.dateAssigned?pU(de.dateAssigned):""})]})]}),a.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[a.jsx("button",{type:"button",onClick:Ce=>{Ce.stopPropagation(),le(de)},className:"text-blue-500 hover:text-blue-700",children:a.jsx(pn,{})}),a.jsx("button",{type:"button",onClick:Ce=>{Ce.stopPropagation(),ne(de)},className:"text-red-500 hover:text-red-700",children:a.jsx(jt,{})})]})]},de.id)):a.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No tasks"})})]},O)})}),!p&&!t&&ye.length>0&&n==="list"&&a.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Actions"})]})}),a.jsx("tbody",{children:Te.map(O=>a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",onClick:()=>{console.log("Opening task in view mode:",O),le(O,!0)},children:[a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",children:O.title}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Ne(O.status||"To Do")}`,children:O.status||"To Do"})}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${fe(O.priority||"Low")}`,children:O.priority||"Low"})}),a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:O.assignedToName||"Unassigned"}),a.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${Pe(O)?"text-red-600 font-medium":""}`,children:O.dateAssigned?pU(O.dateAssigned):""}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-3",onClick:ce=>ce.stopPropagation(),children:[a.jsxs("button",{type:"button",onClick:()=>le(O),className:"text-blue-500 hover:text-blue-700 flex items-center gap-1",children:[a.jsx(pn,{})," Edit"]}),a.jsxs("button",{type:"button",onClick:()=>ne(O),className:"text-red-500 hover:text-red-700 flex items-center gap-1",children:[a.jsx(jt,{})," Delete"]})]})})]},O.id))})]})})}),!p&&!t&&n==="list"&&a.jsx(Et,{className:"mt-6",totalItems:ye.length,pageSize:dg,currentPage:ye.length===0?0:A,onPrev:()=>T(O=>Math.max(O-1,1)),onNext:()=>T(O=>Math.min(O+1,Math.max(1,Math.ceil(ye.length/dg)||1))),label:"tasks"}),a.jsx(Wx,{isOpen:s,onClose:ue,onSave:J,onEdit:()=>d(!1),setFormData:ae,formData:q,isEditing:!c&&!!o,viewMode:c,users:_,currentUser:e,onDelete:ne}),R&&a.jsx(U5e,{open:!0,title:R.title,message:R.message,confirmLabel:R.confirmLabel,cancelLabel:R.cancelLabel,variant:R.variant,onConfirm:pe,onCancel:we,loading:W})]})}function z5e({icon:e,title:t,value:n,color:r,bgColor:s,onClick:i}){return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${s} ${r} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function U5e({open:e,title:t,message:n,confirmLabel:r,cancelLabel:s,variant:i,loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:s}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":r})]})]})})}const uQ=e=>e?e.toUpperCase():"",Jy=e=>{const t=uQ(e);return t==="PLANNED"||t==="IN PROGRESS"?"PLANNED":t==="HELD"||t==="DONE"?"HELD":t==="NOT_HELD"||t==="NOT HELD"?"NOT_HELD":"PLANNED"},F5e=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},B5e=e=>{const t=uQ(e);switch(t==="PLANNED"?"PENDING":t==="HELD"?"COMPLETED":t==="NOT_HELD"?"CANCELLED":t){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},K_=10,Q_={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},H5e=()=>{const e=rt(),t=Xt(),[n]=gr(),r=n.get("id"),s=t.pathname==="/admin/meetings/info";g.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[i,o]=g.useState([]),[l,c]=g.useState(!1),[d,m]=g.useState([]),[h,p]=g.useState(""),[b,v]=g.useState("Filter by Status"),[x,w]=g.useState(!1),[j,C]=g.useState(null),[S,_]=g.useState(1),[E,A]=g.useState(Q_),[T,R]=g.useState(!1),[U,W]=g.useState(null),[I,M]=g.useState(!1),[H,q]=g.useState(null),[ae,K]=g.useState(!1);g.useEffect(()=>{const $=t.state?.openMeetingModal,Ne=t.state?.initialMeetingData?.relatedTo||n.get("id");($||Ne)&&(w(!0),t.state?.initialMeetingData&&A(fe=>({...fe,...t.state.initialMeetingData})),e(t.pathname,{replace:!0,state:{}}))},[t,n,e]);const B=async()=>{if(r&&s){const $=sessionStorage.getItem("meetingDetailData");if($)try{const Ne=JSON.parse($);if(Ne.id===parseInt(r)){C(Ne),sessionStorage.removeItem("meetingDetailData");return}}catch(Ne){console.error(Ne)}}c(!0);try{const $=await oe.get("/meetings/admin/fetch-all"),fe=[...Array.isArray($.data)?$.data:[]].sort((O,ce)=>{const de=O?.createdAt?new Date(O.createdAt).getTime():0;return(ce?.createdAt?new Date(ce.createdAt).getTime():0)-de});if(o(fe),r&&!j){const O=fe.find(ce=>ce.id===parseInt(r));O&&C(O)}console.log($.data)}catch{Q.error("Failed to load meetings.")}finally{c(!1)}},X=async()=>{try{const $=await oe.get("/users/all");m(Array.isArray($.data)?$.data:[])}catch($){console.error($)}};g.useEffect(()=>{B(),X()},[]);const le=$=>p($.target.value),ue=g.useMemo(()=>{const $=h.trim().toLowerCase(),Ne=b.trim().toUpperCase();return i.filter(fe=>{const O=[fe?.activity,fe?.description,fe?.relatedTo,fe?.assignedTo],ce=$===""||O.some(Ce=>Ce&&Ce.toString().toLowerCase().includes($)),de=Ne==="FILTER BY STATUS"||Jy(fe.status||"PENDING")===Ne;return ce&&de})},[i,h,b]),J=g.useMemo(()=>{const $=(S-1)*K_;return ue.slice($,$+K_)},[ue,S]),ne=()=>{w(!1),A(Q_),R(!1),W(null),M(!1)},pe=()=>{A(Q_),R(!1),W(null),w(!0)},we=$=>{let Ne="";if($.meet_assign_to?.id)Ne=String($.meet_assign_to.id);else if($.assignedTo){const We=d.find(Ke=>`${Ke.first_name} ${Ke.last_name}`===$.assignedTo);Ne=We?String(We.id):""}const fe=We=>{if(!We)return"";try{const Ke=new Date(We),He=Ke.getTimezoneOffset()*6e4;return new Date(Ke.getTime()-He).toISOString().slice(0,16)}catch{return""}};let O="Lead",ce="",de="Contact",Ce="";if($.lead)O="Lead",ce=String($.lead.id);else if($.account)O="Account",ce=String($.account.id),$.contact?(de="Contact",Ce=String($.contact.id)):$.deal&&(de="Deal",Ce=String($.deal.id));else if($.relatedType||$.related_type){const We=$.relatedType||$.related_type,Ke=$.related_to||$.relatedToId;We==="Lead"?(O="Lead",ce=String(Ke)):(O="Account",ce=$.account_id?String($.account_id):"")}const Ee={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},Ge=Jy($.status),Je=Ee[Ge]||"Planned";A({subject:$.subject||$.activity||"",location:$.location||"",startTime:fe($.start_time||$.startTime),endTime:fe($.end_time||$.endTime),status:Je,notes:$.description||$.notes||"",assignedTo:Ne,relatedType1:O,relatedTo1:ce,relatedType2:de,relatedTo2:Ce}),R(!0),W($.id),C(null),w(!0)},ye=$=>{if(!$.subject?.trim())return Q.error("Subject is required.");if(!$.startTime)return Q.error("Start time is required.");if($.endTime&&!(new Date($.endTime)-new Date($.startTime)>0))return Q.error("End time must be after start time.");$.relatedType1,$.relatedTo1,$.relatedType1==="Account"&&$.relatedType2&&$.relatedTo2&&($.relatedType2,$.relatedTo2);const Ne={...$,assignedTo:parseInt($.assignedTo),relatedTo1:parseInt($.relatedTo1),relatedTo2:parseInt($.relatedTo2)},fe=T&&U?"update":"create";q({title:fe==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${fe} "${Ne.subject}"?`,confirmLabel:fe==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:fe,payload:Ne,targetId:U,name:Ne.subject}})},Te=async()=>{if(!H?.action)return;const{type:$,payload:Ne,targetId:fe,name:O}=H.action;console.log(Ne),K(!0);try{$==="create"?(M(!0),await oe.post("/meetings/create",Ne),Q.success(`Meeting "${O}" created.`),ne(),await B()):$==="update"?(M(!0),await oe.put(`/meetings/${fe}`,Ne),Q.success(`Meeting "${O}" updated.`),ne(),await B()):$==="delete"&&(await oe.delete(`/meetings/${fe}`),Q.success(`Meeting "${O}" deleted.`),j?.id===fe&&C(null),await B())}catch(ce){const de=ce.response?.data?.detail||"Action failed.";Q.error(typeof de=="string"?de:JSON.stringify(de)),console.error(de)}finally{M(!1),K(!1),q(null)}},Ae=$=>{q({title:"Delete Meeting",message:`Permanently delete "${$.activity}"?`,confirmLabel:"Delete",variant:"danger",action:{type:"delete",targetId:$.id,name:$.activity}})},Pe=async($,Ne)=>{try{await oe.put(`/meetings/${$}`,{status:Ne}),Q.success("Status updated"),B(),C(null)}catch{Q.error("Failed to update status")}};return s&&r?j?a.jsx(Nc,{meeting:j,onClose:()=>{C(null),e("/admin/dashboard")},onEdit:we,onDelete:Ae,onStatusUpdate:Pe}):a.jsx(yt,{message:"Loading meeting..."}):a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[l&&a.jsx(yt,{message:"Loading meetings..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[a.jsx(ft,{className:"mr-2 text-blue-600"})," Meetings"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:pe,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[a.jsx(Rt,{className:"mr-2"})," Add Meeting"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[a.jsx(bt,{className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search meetings",value:h,onChange:le,className:"w-full outline-none"})]}),a.jsxs("select",{value:b,onChange:$=>v($.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[a.jsx("option",{children:"Filter by Status"}),a.jsx("option",{value:"PLANNED",children:"PLANNED"}),a.jsx("option",{value:"HELD",children:"HELD"}),a.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Subject"}),a.jsx("th",{className:"py-3 px-4",children:"Related To"}),a.jsx("th",{className:"py-3 px-4",children:"Start Time"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned"}),a.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),a.jsx("tbody",{children:J.length>0?J.map($=>a.jsxs("tr",{onClick:()=>C($),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[a.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:$.subject}),a.jsxs("td",{className:"py-3 px-4",children:[$.lead&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:$.lead.title}),$.account&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:$.account.name}),$.contact&&a.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[$.contact.first_name," ",$.contact.last_name]}),$.deal&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:$.deal.name})]}),a.jsx("td",{className:"py-3 px-4",children:F5e($.start_time)}),a.jsxs("td",{className:"py-3 px-4",children:[$.meet_assign_to.first_name," ",$.meet_assign_to.last_name]}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${B5e(Jy($.status))}`,children:Jy($.status).replace("_"," ")})})]},$.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),a.jsx(Et,{totalItems:ue.length,pageSize:K_,currentPage:S,onPrev:()=>_($=>Math.max(1,$-1)),onNext:()=>_($=>$+1),label:"meetings"}),x&&a.jsx(wj,{onClose:ne,formData:E,setFormData:A,isEditing:T,onSubmit:ye,isSubmitting:I||ae,users:d}),j&&a.jsx(Nc,{meeting:j,onClose:()=>C(null),onEdit:we,onDelete:Ae,onStatusUpdate:Pe}),H&&a.jsx(G5e,{open:!0,title:H.title,message:H.message,confirmLabel:H.confirmLabel,variant:H.variant,onConfirm:Te,onCancel:()=>q(null),loading:ae})]})};function G5e({open:e,title:t,message:n,confirmLabel:r,cancelLabel:s="Cancel",variant:i="primary",loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{onClick:c,disabled:o,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),a.jsx("button",{onClick:l,disabled:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${d}`,children:o?"...":r})]})]})})}const Cj=[{value:"CEO",label:"CEO"},{value:"Admin",label:"Admin"},{value:"Group Manager",label:"Group Manager"},{value:"Manager",label:"Manager"},{value:"Marketing",label:"Marketing"},{value:"Sales",label:"Sales"}],ug={firstName:"",lastName:"",email:"",password:"",role:""},V5e={CEO:"bg-purple-100 text-purple-700",ADMIN:"bg-purple-100 text-purple-700",GROUP_MANAGER:"bg-indigo-100 text-indigo-700",MANAGER:"bg-blue-100 text-blue-700",MARKETING:"bg-yellow-100 text-yellow-700",SALES:"bg-green-100 text-green-700"},Fi=e=>e?e.toString().trim().replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/\s+/g,"_").toUpperCase():"",W5e=e=>{const t=Fi(e),n=Cj.find(r=>Fi(r.value)===t);return n?n.value:e||""},LT=e=>{const t=Fi(e),n=Cj.find(r=>Fi(r.value)===t);return n?n.label:typeof e=="string"?e.toLowerCase().replace(/\b\w/g,r=>r.toUpperCase()):"--"},xU=e=>{if(!e)return"--";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",","")},X_=(e,{size:t="sm"}={})=>{const n=Fi(e),r=V5e[n]||"bg-gray-100 text-gray-700",s=t==="lg"?"px-3 py-1 text-sm":t==="md"?"px-2.5 py-1 text-sm":"px-2 py-1 text-xs";return a.jsx("span",{className:`${s} font-semibold rounded-md inline-flex items-center justify-center ${r}`,children:LT(e)})},id=10,q5e=(e,t)=>{const n=e?.trim()?.[0]??"",r=t?.trim()?.[0]??"";return`${n}${r}`.toUpperCase()||"U"},yU=e=>[...e].sort((t,n)=>{const r=t.created_at?new Date(t.created_at).getTime():0;return(n.created_at?new Date(n.created_at).getTime():0)-r});function Y5e(){const{user:e,loading:t}=Ut(),[n,r]=g.useState([]),[s,i]=g.useState(!1),[o,l]=g.useState(""),[c,d]=g.useState(""),[m,h]=g.useState(null),[p,b]=g.useState(!1),[v,x]=g.useState(!1),[w,j]=g.useState(null),[C,S]=g.useState(ug),[_,E]=g.useState(!1),[A,T]=g.useState(null),[R,U]=g.useState(!1),[W,I]=g.useState(1),[M,H]=g.useState("Overview"),[q,ae]=g.useState(""),[K,B]=g.useState(!1),X=Fi(e?.role),le=["ADMIN","CEO","GROUP MANAGER","MANAGER"].includes(X),ue=!t&&le,J=g.useMemo(()=>{const k=Cj.filter(Z=>Fi(Z.value)!=="CEO");return[{label:"Filter by Roles",value:""},{label:"CEO",value:"CEO"},...k]},[]),ne=g.useCallback(k=>{k&&(r(Z=>Z.map(re=>re.id===k?{...re,highlight:!0}:re)),setTimeout(()=>{r(Z=>Z.map(re=>re.id===k?{...re,highlight:!1}:re))},2e3))},[]),pe=g.useCallback(async()=>{i(!0);try{const k=await oe.get("/users/all"),Z=Array.isArray(k.data)?k.data:[],re=yU(Z);r(re),h(be=>be&&(re.find(ee=>ee.id===be.id)||null)),console.log(k.data)}catch(k){console.error("Error fetching users:",k);const Z=k.response?.data?.detail||"Failed to load users. Please try again later.";Q.error(Z)}finally{i(!1)}},[]);g.useEffect(()=>{!t&&!le&&e&&Q.error("You are not authorized to access User Management.")},[le,t,e]),g.useEffect(()=>{t||!le||pe()},[t,le,pe]),g.useEffect(()=>{document.title="Users | Sari-Sari CRM"},[]);const we=g.useMemo(()=>{const k=o.trim().toLowerCase(),Z=Fi(c);return yU(n.filter(re=>{if(!re)return!1;const be=k===""||[re.first_name,re.last_name,`${re.first_name||""} ${re.last_name||""}`,re.email,LT(re.role)].filter(Boolean).some(ee=>ee.toString().toLowerCase().includes(k)),z=Z===""||Z==="CEO"&&["CEO","ADMIN"].includes(Fi(re.role))||Fi(re.role)===Z;return be&&z}))},[n,o,c]),ye=Math.max(1,Math.ceil(we.length/id)||1);g.useEffect(()=>{I(1)},[o,c]),g.useEffect(()=>{I(k=>{const Z=Math.max(1,Math.ceil(we.length/id)||1);return k>Z?Z:k})},[we.length]);const Te=g.useMemo(()=>{const k=(W-1)*id;return we.slice(k,k+id)},[we,W]);we.length===0||(W-1)*id+1,Math.min(W*id,we.length);const Ae=()=>I(k=>Math.max(k-1,1)),Pe=()=>I(k=>Math.min(k+1,ye)),$=()=>{S(ug),x(!1),j(null),b(!0)},Ne=k=>{console.log(k),h(k),H("Overview"),ae(k?.is_active?"Active":"Inactive")},fe=k=>{k.target.id==="userModalBackdrop"&&!R&&O()},O=()=>{h(null)},ce=(k,Z)=>{S(re=>({...re,[k]:Z}))},de=()=>{const k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let Z="";for(let re=0;re<10;re+=1)Z+=k.charAt(Math.floor(Math.random()*k.length));ce("password",Z)},Ce=()=>{_||R||(b(!1),S(ug),j(null),x(!1))},Ee=k=>{S({firstName:k.first_name||"",lastName:k.last_name||"",email:k.email||"",password:"",role:W5e(k.role)}),x(!0),j(k.id),b(!0),h(null)},Ge=k=>{T({title:"Delete User",message:a.jsxs("span",{children:["Are you sure you want to delete"," ",a.jsxs("span",{className:"font-semibold",children:[k.first_name," ",k.last_name]}),"? This action cannot be undone."]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:k.id,name:`${k.first_name||""} ${k.last_name||""}`.trim()||k.email||"user"}})},Je=k=>{k.preventDefault();const Z=C.firstName.trim(),re=C.lastName.trim(),be=C.email.trim(),z=C.password.trim(),ee="Sales",ie=!(v&&w);if(!Z||!be||!ee){Q.warn("Please fill in all required fields.");return}if(ie&&!z){Q.warn("Please fill in all required fields.");return}if(z&&z.length<8){Q.warn("Password should be at least 8 characters long.");return}const V={first_name:Z,last_name:re,email:be,role:ee};console.log(V),(ie||z)&&(V.password=z);const F=`${Z} ${re}`.trim(),se=ie?"create":"update";T({title:se==="create"?"Confirm New User":"Confirm User Update",message:se==="create"?a.jsxs("span",{children:["Create user ",a.jsx("span",{className:"font-semibold",children:F})," with role"," ",a.jsx("span",{className:"font-semibold",children:LT(ee)}),"?"]}):a.jsxs("span",{children:["Save changes for"," ",a.jsx("span",{className:"font-semibold",children:F||be}),"?"]}),confirmLabel:se==="create"?"Create User":"Update User",cancelLabel:"Cancel",variant:"primary",action:{type:se,payload:V,targetId:w,name:F||be}})},We=async()=>{if(!A?.action){T(null);return}const{action:k}=A,{type:Z,payload:re,targetId:be,name:z}=k;U(!0),(Z==="create"||Z==="update")&&E(!0);try{if(Z==="create"){const ie=(await oe.post("/users/createuser",re)).data;await pe(),ne(ie.id),Q.success(`User "${z}" created successfully.`),b(!1),S(ug),j(null),x(!1)}else if(Z==="update"){if(!be)throw new Error("Missing user identifier for update.");const ie=(await oe.put(`/users/updateuser/${be}`,re)).data;await pe(),h(null),ne(ie.id),Q.success(`User "${z}" updated successfully.`),b(!1),S(ug),j(null),x(!1)}else if(Z==="delete"){if(!be)throw new Error("Missing user identifier for deletion.");await oe.delete(`/users/deleteuser/${be}`),r(ee=>ee.map(ie=>ie.id===be?{...ie,is_active:!1}:ie)),m&&m.id===be&&(h(null),ae("")),Q.success(`User "${z}" deactivated successfully.`)}}catch(ee){console.error("User management error:",ee);const ie=Z==="create"?"Failed to create user. Please review the details and try again.":Z==="update"?"Failed to update user. Please review the details and try again.":"Failed to delete user. Please try again.",V=ee.response?.data?.detail||ie;Q.error(V)}finally{(Z==="create"||Z==="update")&&E(!1),U(!1),T(null)}},Ke=()=>{R||T(null)},He=async()=>{if(!m||!q)return;const k=m.is_active?"Active":"Inactive";if(q===k)return;const Z=q==="Active";B(!0);try{const be=(await oe.put(`/users/updateuser/${m.id}`,{is_active:Z})).data;r(z=>z.map(ee=>ee.id===be.id?be:ee)),h(null),ae(""),Q.success(`User status updated to ${q}`)}catch(re){console.error("Failed to update user status:",re);const be=re.response?.data?.detail||"Failed to update user status. Please try again.";Q.error(be)}finally{B(!1)}},Se=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[(s||t||!ue)&&a.jsx(yt,{}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(JT,{className:"mr-2 text-blue-600"}),"User Management"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{type:"button",onClick:$,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(Ln,{className:"mr-2"})," Add User"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search users",value:o,onChange:k=>l(k.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:c,onChange:k=>d(k.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:J.map(k=>a.jsx("option",{value:k.value,children:k.label},k.value))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Fullname"}),a.jsx("th",{className:"py-3 px-4",children:"Email"}),a.jsx("th",{className:"py-3 px-4",children:"Role"}),a.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),a.jsx("tbody",{children:s?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:3,children:"Loading users..."})}):we.length===0?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-400",colSpan:4,children:"No users found."})}):Te.map(k=>a.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${k.highlight?"bg-green-50":""} ${k.is_active?"":"opacity-60 bg-gray-50"}`,children:[a.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>Ne(k),children:a.jsxs("div",{className:"font-medium text-blue-600 hover:underline text-sm",children:[k.first_name," ",k.last_name]})}),a.jsx("td",{className:"py-3 px-4 cursor-pointer text-sm",onClick:()=>Ne(k),children:k.email}),a.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>Ne(k),children:X_(k.role)}),a.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>Ne(k),children:a.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-md ${k.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:k.is_active?"Active":"Inactive"})})]},k.id))})]})}),a.jsx(Et,{className:"mt-4",totalItems:we.length,pageSize:id,currentPage:W,onPrev:Ae,onNext:Pe,label:"users"})]}),Ve=m?a.jsx("div",{id:"userModalBackdrop",onClick:fe,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in p-4 sm:p-6 md:p-8 font-inter relative",children:[a.jsx("div",{className:"flex justify-end w-full",children:a.jsx("button",{onClick:O,className:"text-gray-500 hover:text-gray-700 transition mb-5 cursor-pointer",children:a.jsx(wn,{size:30})})}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7 mb-4 lg:mb-6 md:mb-4",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[m.profile_picture?a.jsx("img",{src:m.profile_picture,alt:`${m.first_name} ${m.last_name}`,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover border border-gray-200 shadow-sm"}):a.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-200 text-gray-700 flex items-center justify-center text-lg sm:text-xl font-semibold border border-gray-200 shadow-sm",children:q5e(m.first_name,m.last_name)}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[m.first_name," ",m.last_name]}),a.jsx("p",{className:"text-sm text-gray-500 break-all",children:m.email})]})]}),X_(m.role,{size:"md"})]}),!["CEO","ADMIN","GROUP MANAGER","GROUP_MANAGER"].includes(m.role.toUpperCase())&&a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Ee(m),disabled:R,children:[a.jsx(pn,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>Ge(m),disabled:R,children:[a.jsx(jt,{className:"mr-2"}),"Delete"]})]})]}),a.jsx("div",{className:"border-b border-gray-200 mb-6"}),a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview"].map(k=>a.jsx("button",{onClick:()=>H(k),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${M===k?"bg-[#5c636d] text-white border-white":"text-white hover:bg-[#5c636d]"}`,children:k},k))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsx("div",{className:"lg:col-span-3",children:M==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:m.email||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Role:"}),a.jsx("p",{children:X_(m.role,{size:"sm"})})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Status:"}),a.jsx("p",{children:m.is_active?"Active":"Inactive"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Auth Provider:"}),a.jsx("p",{children:m.auth_provider?m.auth_provider.toString().replace(/\b\w/g,k=>k.toUpperCase()):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Phone Number:"}),a.jsx("p",{children:m.phone_number||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Company:"}),a.jsx("p",{children:m.company?.company_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Company Number:"}),a.jsx("p",{children:m.company?.company_number||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Related to CEO:"}),a.jsx("p",{children:m.manager?`${m.manager.first_name} ${m.manager.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:xU(m.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Login:"}),a.jsx("p",{children:m.last_login?xU(m.last_login):"Never"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Profile Picture:"}),a.jsx("p",{children:m.profile_picture?a.jsx("a",{href:m.profile_picture,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline break-all",children:"View image"}):"N/A"})]})]})})}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsx("div",{className:"flex flex-col gap-2 w-full",children:a.jsxs("button",{type:"button",onClick:()=>{if(!m.email){alert("No email address available");return}const k=encodeURIComponent(m.email),Z=encodeURIComponent(""),re=encodeURIComponent(""),be=`https://mail.google.com/mail/?view=cm&fs=1&to=${k}&su=${Z}&body=${re}`;window.open(be,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Tn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]})})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:q||(m.is_active?"Active":"Inactive"),onChange:k=>ae(k.target.value),children:[a.jsx("option",{value:"Active",children:"Active"}),a.jsx("option",{value:"Inactive",children:"Inactive"})]}),a.jsx("button",{onClick:He,disabled:K||q===(m.is_active?"Active":"Inactive"),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${K||q===(m.is_active?"Active":"Inactive")?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:K?"Updating...":"Update"})]})]})]})]})}):null;return a.jsxs(a.Fragment,{children:[Se,Ve,a.jsx(K5e,{open:p,isEditing:v,isSubmitting:_,confirmProcessing:R,formData:C,onClose:Ce,onSubmit:Je,onChange:ce,onGeneratePassword:de}),a.jsx(Q5e,{open:!!A,title:A?.title,message:A?.message,confirmLabel:A?.confirmLabel,cancelLabel:A?.cancelLabel,variant:A?.variant,loading:R,onConfirm:We,onCancel:Ke})]})}function K5e({open:e,isEditing:t,isSubmitting:n,confirmProcessing:r,formData:s,onClose:i,onSubmit:o,onChange:l,onGeneratePassword:c}){if(!e)return null;const d=n||r;return a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-lg border border-gray-200 p-6 sm:p-8 relative overflow-y-auto max-h-[90vh]",children:[a.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:d,children:a.jsx(St,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-6 text-center",children:t?"Edit User":"Add New User"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:o,children:[a.jsx(eb,{label:"First Name",value:s.firstName,onChange:m=>l("firstName",m),placeholder:"John",required:!0,disabled:d}),a.jsx(eb,{label:"Last Name",value:s.lastName,onChange:m=>l("lastName",m),placeholder:"Doe",required:!0,disabled:d}),a.jsx(eb,{label:"Email",type:"email",value:s.email,onChange:m=>l("email",m),placeholder:"john.doe@company.com",required:!0,disabled:d||t}),a.jsx(eb,{label:"Role",type:"select",disabled:!0,value:"Sales",onChange:m=>l("role",m),options:[{value:"",label:"Select role"},...Cj],required:!0}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Password"}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[a.jsx("input",{type:"text",value:s.password,onChange:m=>l("password",m.target.value),placeholder:t?"Leave blank to keep current password":"Enter or generate password",required:!t,disabled:d,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"}),a.jsx("button",{type:"button",onClick:c,className:"flex items-center justify-center px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-60",disabled:d,children:"Generate"})]}),t?a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Setting a password will reset the user's credentials; leave it blank to keep the current password."}):a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long."})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:i,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:d,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:d,children:n?"Saving...":t?"Update User":"Save User"})]})]})]})})}function eb({label:e,type:t="text",value:n,onChange:r,placeholder:s,options:i=[],required:o=!1,disabled:l=!1}){return a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t==="select"?a.jsx("select",{value:n??"",onChange:c=>r(c.target.value),required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100",children:i.map(c=>a.jsx("option",{value:c.value,children:c.label},c.value))}):a.jsx("input",{type:t,value:n??"",onChange:c=>r(c.target.value),placeholder:s,required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"})]})}function Q5e({open:e,title:t,message:n,confirmLabel:r,cancelLabel:s="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-black hover:bg-gray-800 border border-black";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("div",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:s}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":r})]})]})})}function X5e({toggleSidebar:e}){const[t,n]=g.useState(!1),r=g.useRef(null),s=Xt(),{logout:i}=er(),{user:o,fetchUser:l}=Ut(),c={"/marketing/dashboard":"Dashboard","/marketing/contacts":"Contacts","/marketing/accounts":"Accounts","/marketing/leads":"Leads","/marketing/tasks":"Tasks","/marketing/campaigns":"Campaign","/marketing/templates":"Templates"};g.useEffect(()=>{l()},[]);const d=c[s.pathname]||"Marketing Panel";return g.useEffect(()=>{function m(h){r.current&&!r.current.contains(h.target)&&n(!1)}return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]),a.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-6 py-3 border-b relative",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:a.jsx(Yp,{className:"text-2xl"})}),a.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:d})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("button",{className:"relative text-gray-600 hover:text-gray-800",children:[a.jsx(Wp,{className:"text-xl"}),a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs w-4 h-4 flex items-center justify-center rounded-full",children:"3"})]}),a.jsxs("div",{className:"relative",ref:r,children:[a.jsxs("button",{onClick:()=>n(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[a.jsx("img",{src:o?.profile_picture,alt:"",className:"w-8 aspect-square object-cover rounded-full"}),a.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[o?.first_name," ",o?.last_name]})]}),t&&a.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-gray-100 shadow-lg rounded border z-50",children:a.jsxs("div",{className:"flex flex-col",children:[a.jsx("button",{className:"px-4 py-2 text-sm hover:bg-gray-200 text-left",children:"Manage Account"}),a.jsx("div",{className:"border-t my-1"}),a.jsx("button",{onClick:i,className:"px-4 py-2 text-sm bg-red-500 text-white rounded mx-2 my-2 hover:bg-red-600",children:"Logout"})]})})]})]})]})}function Z5e(){const[e,t]=g.useState(!1),[n,r]=g.useState(!1),[s,i]=g.useState(!1),[o,l]=g.useState(!1),c=Xt(),{fetchUser:d}=Ut();g.useEffect(()=>{d()},[]),g.useEffect(()=>{document.title="Panel | Sari-Sari CRM"},[]);const m="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",h="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition",p=["/marketing/campaigns","/marketing/templates"],b=["/marketing/accounts","/marketing/contacts","/marketing/leads"],v=["/marketing/tasks"],x=p.includes(c.pathname),w=b.includes(c.pathname),j=v.includes(c.pathname);return g.useEffect(()=>{x&&t(!0),w&&r(!0),j&&i(!0)},[x,w,j]),a.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[a.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${o?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[a.jsx("div",{className:"bg-[#fbbf24] text-gray-900 font-bold text-xl px-6 py-4.5 tracking-wide",children:"Marketing CRM"}),a.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[a.jsxs(st,{to:"/marketing/dashboard",className:({isActive:C})=>C?m:h,children:[a.jsx(qp,{className:"text-lg"}),a.jsx("span",{children:"Dashboard"})]}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>r(!n),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx($n,{className:"text-lg"}),"Sales"]}),a.jsx(Rr,{className:`transition-transform ${n?"rotate-180":""}`})]}),n&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(st,{to:"/marketing/accounts",className:({isActive:C})=>C?m:h,children:[a.jsx(en,{})," Accounts"]}),a.jsxs(st,{to:"/marketing/contacts",className:({isActive:C})=>C?m:h,children:[a.jsx(Qt,{})," Contacts"]}),a.jsxs(st,{to:"/marketing/leads",className:({isActive:C})=>C?m:h,children:[a.jsx(Ln,{})," Leads"]})]})]}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>t(!e),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(ms,{className:"text-lg"}),"Tools"]}),a.jsx(Rr,{className:`transition-transform ${e?"rotate-180":""}`})]}),e&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(st,{to:"/marketing/campaigns",className:({isActive:C})=>C?m:h,children:[a.jsx(Eae,{})," Campaign"]}),a.jsxs(st,{to:"/marketing/templates",className:({isActive:C})=>C?m:h,children:[a.jsx(_ae,{})," Templates"]})]})]}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!s),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(mr,{className:"text-lg"}),"Activity"]}),a.jsx(Rr,{className:`transition-transform ${s?"rotate-180":""}`})]}),s&&a.jsx("div",{className:"ml-6 mt-2 space-y-1",children:a.jsxs(st,{to:"/marketing/tasks",className:({isActive:C})=>C?m:h,children:[a.jsx(kn,{})," Tasks"]})})]})]}),a.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Marketing CRM"]})]}),o&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>l(!1)}),a.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[a.jsx(X5e,{toggleSidebar:()=>l(!o)}),a.jsx("main",{className:"flex-1 p-6 overflow-auto",style:{backgroundColor:"#fffeee"},children:a.jsx(yf,{})})]})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function qx(e){return e+.5|0}const uc=(e,t,n)=>Math.max(Math.min(e,n),t);function Rg(e){return uc(qx(e*2.55),0,255)}function pc(e){return uc(qx(e*255),0,255)}function zo(e){return uc(qx(e/2.55)/100,0,1)}function bU(e){return uc(qx(e*100),0,100)}const Ds={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},kT=[..."0123456789ABCDEF"],J5e=e=>kT[e&15],e$e=e=>kT[(e&240)>>4]+kT[e&15],tb=e=>(e&240)>>4===(e&15),t$e=e=>tb(e.r)&&tb(e.g)&&tb(e.b)&&tb(e.a);function n$e(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&Ds[e[1]]*17,g:255&Ds[e[2]]*17,b:255&Ds[e[3]]*17,a:t===5?Ds[e[4]]*17:255}:(t===7||t===9)&&(n={r:Ds[e[1]]<<4|Ds[e[2]],g:Ds[e[3]]<<4|Ds[e[4]],b:Ds[e[5]]<<4|Ds[e[6]],a:t===9?Ds[e[7]]<<4|Ds[e[8]]:255})),n}const a$e=(e,t)=>e<255?t(e):"";function r$e(e){var t=t$e(e)?J5e:e$e;return e?"#"+t(e.r)+t(e.g)+t(e.b)+a$e(e.a,t):void 0}const s$e=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function mQ(e,t,n){const r=t*Math.min(n,1-n),s=(i,o=(i+e/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function i$e(e,t,n){const r=(s,i=(s+e/60)%6)=>n-n*t*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function o$e(e,t,n){const r=mQ(e,1,.5);let s;for(t+n>1&&(s=1/(t+n),t*=s,n*=s),s=0;s<3;s++)r[s]*=1-t-n,r[s]+=t;return r}function l$e(e,t,n,r,s){return e===s?(t-n)/r+(t<n?6:0):t===s?(n-e)/r+2:(e-t)/r+4}function uP(e){const n=e.r/255,r=e.g/255,s=e.b/255,i=Math.max(n,r,s),o=Math.min(n,r,s),l=(i+o)/2;let c,d,m;return i!==o&&(m=i-o,d=l>.5?m/(2-i-o):m/(i+o),c=l$e(n,r,s,m,i),c=c*60+.5),[c|0,d||0,l]}function mP(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(pc)}function fP(e,t,n){return mP(mQ,e,t,n)}function c$e(e,t,n){return mP(o$e,e,t,n)}function d$e(e,t,n){return mP(i$e,e,t,n)}function fQ(e){return(e%360+360)%360}function u$e(e){const t=s$e.exec(e);let n=255,r;if(!t)return;t[5]!==r&&(n=t[6]?Rg(+t[5]):pc(+t[5]));const s=fQ(+t[2]),i=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?r=c$e(s,i,o):t[1]==="hsv"?r=d$e(s,i,o):r=fP(s,i,o),{r:r[0],g:r[1],b:r[2],a:n}}function m$e(e,t){var n=uP(e);n[0]=fQ(n[0]+t),n=fP(n),e.r=n[0],e.g=n[1],e.b=n[2]}function f$e(e){if(!e)return;const t=uP(e),n=t[0],r=bU(t[1]),s=bU(t[2]);return e.a<255?`hsla(${n}, ${r}%, ${s}%, ${zo(e.a)})`:`hsl(${n}, ${r}%, ${s}%)`}const vU={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},wU={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function h$e(){const e={},t=Object.keys(wU),n=Object.keys(vU);let r,s,i,o,l;for(r=0;r<t.length;r++){for(o=l=t[r],s=0;s<n.length;s++)i=n[s],l=l.replace(i,vU[i]);i=parseInt(wU[o],16),e[l]=[i>>16&255,i>>8&255,i&255]}return e}let nb;function g$e(e){nb||(nb=h$e(),nb.transparent=[0,0,0,0]);const t=nb[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const p$e=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function x$e(e){const t=p$e.exec(e);let n=255,r,s,i;if(t){if(t[7]!==r){const o=+t[7];n=t[8]?Rg(o):uc(o*255,0,255)}return r=+t[1],s=+t[3],i=+t[5],r=255&(t[2]?Rg(r):uc(r,0,255)),s=255&(t[4]?Rg(s):uc(s,0,255)),i=255&(t[6]?Rg(i):uc(i,0,255)),{r,g:s,b:i,a:n}}}function y$e(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${zo(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const Z_=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Sm=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function b$e(e,t,n){const r=Sm(zo(e.r)),s=Sm(zo(e.g)),i=Sm(zo(e.b));return{r:pc(Z_(r+n*(Sm(zo(t.r))-r))),g:pc(Z_(s+n*(Sm(zo(t.g))-s))),b:pc(Z_(i+n*(Sm(zo(t.b))-i))),a:e.a+n*(t.a-e.a)}}function ab(e,t,n){if(e){let r=uP(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,t===0?360:1)),r=fP(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function hQ(e,t){return e&&Object.assign(t||{},e)}function NU(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=pc(e[3]))):(t=hQ(e,{r:0,g:0,b:0,a:1}),t.a=pc(t.a)),t}function v$e(e){return e.charAt(0)==="r"?x$e(e):u$e(e)}class Ep{constructor(t){if(t instanceof Ep)return t;const n=typeof t;let r;n==="object"?r=NU(t):n==="string"&&(r=n$e(t)||g$e(t)||v$e(t)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var t=hQ(this._rgb);return t&&(t.a=zo(t.a)),t}set rgb(t){this._rgb=NU(t)}rgbString(){return this._valid?y$e(this._rgb):void 0}hexString(){return this._valid?r$e(this._rgb):void 0}hslString(){return this._valid?f$e(this._rgb):void 0}mix(t,n){if(t){const r=this.rgb,s=t.rgb;let i;const o=n===i?.5:n,l=2*o-1,c=r.a-s.a,d=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;i=1-d,r.r=255&d*r.r+i*s.r+.5,r.g=255&d*r.g+i*s.g+.5,r.b=255&d*r.b+i*s.b+.5,r.a=o*r.a+(1-o)*s.a,this.rgb=r}return this}interpolate(t,n){return t&&(this._rgb=b$e(this._rgb,t._rgb,n)),this}clone(){return new Ep(this.rgb)}alpha(t){return this._rgb.a=pc(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=qx(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return ab(this._rgb,2,t),this}darken(t){return ab(this._rgb,2,-t),this}saturate(t){return ab(this._rgb,1,t),this}desaturate(t){return ab(this._rgb,1,-t),this}rotate(t){return m$e(this._rgb,t),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Do(){}const w$e=(()=>{let e=0;return()=>e++})();function Jt(e){return e==null}function _a(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Bt(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Ys(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Di(e,t){return Ys(e)?e:t}function Lt(e,t){return typeof e>"u"?t:e}const N$e=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,gQ=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function _n(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function on(e,t,n,r){let s,i,o;if(_a(e))for(i=e.length,s=0;s<i;s++)t.call(n,e[s],s);else if(Bt(e))for(o=Object.keys(e),i=o.length,s=0;s<i;s++)t.call(n,e[o[s]],o[s])}function Jv(e,t){let n,r,s,i;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(s=e[n],i=t[n],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function ew(e){if(_a(e))return e.map(ew);if(Bt(e)){const t=Object.create(null),n=Object.keys(e),r=n.length;let s=0;for(;s<r;++s)t[n[s]]=ew(e[n[s]]);return t}return e}function pQ(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function j$e(e,t,n,r){if(!pQ(e))return;const s=t[e],i=n[e];Bt(s)&&Bt(i)?Tp(s,i,r):t[e]=ew(i)}function Tp(e,t,n){const r=_a(t)?t:[t],s=r.length;if(!Bt(e))return e;n=n||{};const i=n.merger||j$e;let o;for(let l=0;l<s;++l){if(o=r[l],!Bt(o))continue;const c=Object.keys(o);for(let d=0,m=c.length;d<m;++d)i(c[d],e,o,n)}return e}function Yg(e,t){return Tp(e,t,{merger:C$e})}function C$e(e,t,n){if(!pQ(e))return;const r=t[e],s=n[e];Bt(r)&&Bt(s)?Yg(r,s):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=ew(s))}const jU={"":e=>e,x:e=>e.x,y:e=>e.y};function S$e(e){const t=e.split("."),n=[];let r="";for(const s of t)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function _$e(e){const t=S$e(e);return n=>{for(const r of t){if(r==="")break;n=n&&n[r]}return n}}function lu(e,t){return(jU[t]||(jU[t]=_$e(t)))(e)}function hP(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Lp=e=>typeof e<"u",jc=e=>typeof e=="function",CU=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function A$e(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const cn=Math.PI,Xn=2*cn,E$e=Xn+cn,tw=Number.POSITIVE_INFINITY,T$e=cn/180,Aa=cn/2,od=cn/4,SU=cn*2/3,xQ=Math.log10,Qi=Math.sign;function Kg(e,t,n){return Math.abs(e-t)<n}function _U(e){const t=Math.round(e);e=Kg(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(xQ(e))),r=e/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function L$e(e){const t=[],n=Math.sqrt(e);let r;for(r=1;r<n;r++)e%r===0&&(t.push(r),t.push(e/r));return n===(n|0)&&t.push(n),t.sort((s,i)=>s-i).pop(),t}function k$e(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function kp(e){return!k$e(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function P$e(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function D$e(e,t,n){let r,s,i;for(r=0,s=e.length;r<s;r++)i=e[r][n],isNaN(i)||(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i))}function Vo(e){return e*(cn/180)}function O$e(e){return e*(180/cn)}function AU(e){if(!Ys(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function yQ(e,t){const n=t.x-e.x,r=t.y-e.y,s=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n);return i<-.5*cn&&(i+=Xn),{angle:i,distance:s}}function PT(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function M$e(e,t){return(e-t+E$e)%Xn-cn}function di(e){return(e%Xn+Xn)%Xn}function Pp(e,t,n,r){const s=di(e),i=di(t),o=di(n),l=di(i-s),c=di(o-s),d=di(s-i),m=di(s-o);return s===i||s===o||r&&i===o||l>c&&d<m}function cr(e,t,n){return Math.max(t,Math.min(n,e))}function I$e(e){return cr(e,-32768,32767)}function mc(e,t,n,r=1e-6){return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}function gP(e,t,n){n=n||(o=>e[o]<t);let r=e.length-1,s=0,i;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const kd=(e,t,n,r)=>gP(e,n,r?s=>{const i=e[s][t];return i<n||i===n&&e[s+1][t]===n}:s=>e[s][t]<n),$$e=(e,t,n)=>gP(e,n,r=>e[r][t]>=n);function R$e(e,t,n){let r=0,s=e.length;for(;r<s&&e[r]<t;)r++;for(;s>r&&e[s-1]>n;)s--;return r>0||s<e.length?e.slice(r,s):e}const bQ=["push","pop","shift","splice","unshift"];function z$e(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),bQ.forEach(n=>{const r="_onData"+hP(n),s=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...i){const o=s.apply(this,i);return e._chartjs.listeners.forEach(l=>{typeof l[r]=="function"&&l[r](...i)}),o}})})}function EU(e,t){const n=e._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(t);s!==-1&&r.splice(s,1),!(r.length>0)&&(bQ.forEach(i=>{delete e[i]}),delete e._chartjs)}function vQ(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const wQ=(function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame})();function NQ(e,t){let n=[],r=!1;return function(...s){n=s,r||(r=!0,wQ.call(window,()=>{r=!1,e.apply(t,n)}))}}function U$e(e,t){let n;return function(...r){return t?(clearTimeout(n),n=setTimeout(e,t,r)):e.apply(this,r),t}}const pP=e=>e==="start"?"left":e==="end"?"right":"center",rr=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,F$e=(e,t,n,r)=>e===(r?"left":"right")?n:e==="center"?(t+n)/2:t;function B$e(e,t,n){const r=t.length;let s=0,i=r;if(e._sorted){const{iScale:o,vScale:l,_parsed:c}=e,d=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,m=o.axis,{min:h,max:p,minDefined:b,maxDefined:v}=o.getUserBounds();if(b){if(s=Math.min(kd(c,m,h).lo,n?r:kd(t,m,o.getPixelForValue(h)).lo),d){const x=c.slice(0,s+1).reverse().findIndex(w=>!Jt(w[l.axis]));s-=Math.max(0,x)}s=cr(s,0,r-1)}if(v){let x=Math.max(kd(c,o.axis,p,!0).hi+1,n?0:kd(t,m,o.getPixelForValue(p),!0).hi+1);if(d){const w=c.slice(x-1).findIndex(j=>!Jt(j[l.axis]));x+=Math.max(0,w)}i=cr(x,s,r)-s}else i=r-s}return{start:s,count:i}}function H$e(e){const{xScale:t,yScale:n,_scaleRanges:r}=e,s={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!r)return e._scaleRanges=s,!0;const i=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,s),i}const rb=e=>e===0||e===1,TU=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Xn/n)),LU=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*Xn/n)+1,Qg={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*Aa)+1,easeOutSine:e=>Math.sin(e*Aa),easeInOutSine:e=>-.5*(Math.cos(cn*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>rb(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>rb(e)?e:TU(e,.075,.3),easeOutElastic:e=>rb(e)?e:LU(e,.075,.3),easeInOutElastic(e){return rb(e)?e:e<.5?.5*TU(e*2,.1125,.45):.5+.5*LU(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-Qg.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?Qg.easeInBounce(e*2)*.5:Qg.easeOutBounce(e*2-1)*.5+.5};function xP(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function kU(e){return xP(e)?e:new Ep(e)}function J_(e){return xP(e)?e:new Ep(e).saturate(.5).darken(.1).hexString()}const G$e=["x","y","borderWidth","radius","tension"],V$e=["color","borderColor","backgroundColor"];function W$e(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:V$e},numbers:{type:"number",properties:G$e}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function q$e(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const PU=new Map;function Y$e(e,t){t=t||{};const n=e+JSON.stringify(t);let r=PU.get(n);return r||(r=new Intl.NumberFormat(e,t),PU.set(n,r)),r}function yP(e,t,n){return Y$e(t,n).format(e)}const K$e={values(e){return _a(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const r=this.chart.options.locale;let s,i=e;if(n.length>1){const d=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(d<1e-4||d>1e15)&&(s="scientific"),i=Q$e(e,n)}const o=xQ(Math.abs(i)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:s,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),yP(e,r,c)}};function Q$e(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var jQ={formatters:K$e};function X$e(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:jQ.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const cu=Object.create(null),DT=Object.create(null);function Xg(e,t){if(!t)return e;const n=t.split(".");for(let r=0,s=n.length;r<s;++r){const i=n[r];e=e[i]||(e[i]=Object.create(null))}return e}function eA(e,t,n){return typeof t=="string"?Tp(Xg(e,t),n):Tp(Xg(e,""),t)}class Z$e{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>J_(s.backgroundColor),this.hoverBorderColor=(r,s)=>J_(s.borderColor),this.hoverColor=(r,s)=>J_(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return eA(this,t,n)}get(t){return Xg(this,t)}describe(t,n){return eA(DT,t,n)}override(t,n){return eA(cu,t,n)}route(t,n,r,s){const i=Xg(this,t),o=Xg(this,r),l="_"+n;Object.defineProperties(i,{[l]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const c=this[l],d=o[s];return Bt(c)?Object.assign({},d,c):Lt(c,d)},set(c){this[l]=c}}})}apply(t){t.forEach(n=>n(this))}}var aa=new Z$e({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[W$e,q$e,X$e]);function J$e(e){return!e||Jt(e.size)||Jt(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function DU(e,t,n,r,s){let i=t[s];return i||(i=t[s]=e.measureText(s).width,n.push(s)),i>r&&(r=i),r}function ld(e,t,n){const r=e.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((t-s)*r)/r+s}function OU(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function OT(e,t,n,r){CQ(e,t,n,r,null)}function CQ(e,t,n,r,s){let i,o,l,c,d,m,h,p;const b=t.pointStyle,v=t.rotation,x=t.radius;let w=(v||0)*T$e;if(b&&typeof b=="object"&&(i=b.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){e.save(),e.translate(n,r),e.rotate(w),e.drawImage(b,-b.width/2,-b.height/2,b.width,b.height),e.restore();return}if(!(isNaN(x)||x<=0)){switch(e.beginPath(),b){default:s?e.ellipse(n,r,s/2,x,0,0,Xn):e.arc(n,r,x,0,Xn),e.closePath();break;case"triangle":m=s?s/2:x,e.moveTo(n+Math.sin(w)*m,r-Math.cos(w)*x),w+=SU,e.lineTo(n+Math.sin(w)*m,r-Math.cos(w)*x),w+=SU,e.lineTo(n+Math.sin(w)*m,r-Math.cos(w)*x),e.closePath();break;case"rectRounded":d=x*.516,c=x-d,o=Math.cos(w+od)*c,h=Math.cos(w+od)*(s?s/2-d:c),l=Math.sin(w+od)*c,p=Math.sin(w+od)*(s?s/2-d:c),e.arc(n-h,r-l,d,w-cn,w-Aa),e.arc(n+p,r-o,d,w-Aa,w),e.arc(n+h,r+l,d,w,w+Aa),e.arc(n-p,r+o,d,w+Aa,w+cn),e.closePath();break;case"rect":if(!v){c=Math.SQRT1_2*x,m=s?s/2:c,e.rect(n-m,r-c,2*m,2*c);break}w+=od;case"rectRot":h=Math.cos(w)*(s?s/2:x),o=Math.cos(w)*x,l=Math.sin(w)*x,p=Math.sin(w)*(s?s/2:x),e.moveTo(n-h,r-l),e.lineTo(n+p,r-o),e.lineTo(n+h,r+l),e.lineTo(n-p,r+o),e.closePath();break;case"crossRot":w+=od;case"cross":h=Math.cos(w)*(s?s/2:x),o=Math.cos(w)*x,l=Math.sin(w)*x,p=Math.sin(w)*(s?s/2:x),e.moveTo(n-h,r-l),e.lineTo(n+h,r+l),e.moveTo(n+p,r-o),e.lineTo(n-p,r+o);break;case"star":h=Math.cos(w)*(s?s/2:x),o=Math.cos(w)*x,l=Math.sin(w)*x,p=Math.sin(w)*(s?s/2:x),e.moveTo(n-h,r-l),e.lineTo(n+h,r+l),e.moveTo(n+p,r-o),e.lineTo(n-p,r+o),w+=od,h=Math.cos(w)*(s?s/2:x),o=Math.cos(w)*x,l=Math.sin(w)*x,p=Math.sin(w)*(s?s/2:x),e.moveTo(n-h,r-l),e.lineTo(n+h,r+l),e.moveTo(n+p,r-o),e.lineTo(n-p,r+o);break;case"line":o=s?s/2:Math.cos(w)*x,l=Math.sin(w)*x,e.moveTo(n-o,r-l),e.lineTo(n+o,r+l);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(w)*(s?s/2:x),r+Math.sin(w)*x);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function Dp(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function bP(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function vP(e){e.restore()}function e6e(e,t,n,r,s){if(!t)return e.lineTo(n.x,n.y);if(s==="middle"){const i=(t.x+n.x)/2;e.lineTo(i,t.y),e.lineTo(i,n.y)}else s==="after"!=!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function t6e(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function n6e(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Jt(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function a6e(e,t,n,r,s){if(s.strikethrough||s.underline){const i=e.measureText(r),o=t-i.actualBoundingBoxLeft,l=t+i.actualBoundingBoxRight,c=n-i.actualBoundingBoxAscent,d=n+i.actualBoundingBoxDescent,m=s.strikethrough?(c+d)/2:d;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=s.decorationWidth||2,e.moveTo(o,m),e.lineTo(l,m),e.stroke()}}function r6e(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function Op(e,t,n,r,s,i={}){const o=_a(t)?t:[t],l=i.strokeWidth>0&&i.strokeColor!=="";let c,d;for(e.save(),e.font=s.string,n6e(e,i),c=0;c<o.length;++c)d=o[c],i.backdrop&&r6e(e,i.backdrop),l&&(i.strokeColor&&(e.strokeStyle=i.strokeColor),Jt(i.strokeWidth)||(e.lineWidth=i.strokeWidth),e.strokeText(d,n,r,i.maxWidth)),e.fillText(d,n,r,i.maxWidth),a6e(e,n,r,d,i),r+=Number(s.lineHeight);e.restore()}function nw(e,t){const{x:n,y:r,w:s,h:i,radius:o}=t;e.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*cn,cn,!0),e.lineTo(n,r+i-o.bottomLeft),e.arc(n+o.bottomLeft,r+i-o.bottomLeft,o.bottomLeft,cn,Aa,!0),e.lineTo(n+s-o.bottomRight,r+i),e.arc(n+s-o.bottomRight,r+i-o.bottomRight,o.bottomRight,Aa,0,!0),e.lineTo(n+s,r+o.topRight),e.arc(n+s-o.topRight,r+o.topRight,o.topRight,0,-Aa,!0),e.lineTo(n+o.topLeft,r)}const s6e=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,i6e=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function o6e(e,t){const n=(""+e).match(s6e);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const l6e=e=>+e||0;function wP(e,t){const n={},r=Bt(t),s=r?Object.keys(t):t,i=Bt(e)?r?o=>Lt(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of s)n[o]=l6e(i(o));return n}function SQ(e){return wP(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Vm(e){return wP(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Ks(e){const t=SQ(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function dr(e,t){e=e||{},t=t||aa.font;let n=Lt(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let r=Lt(e.style,t.style);r&&!(""+r).match(i6e)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:Lt(e.family,t.family),lineHeight:o6e(Lt(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:Lt(e.weight,t.weight),string:""};return s.string=J$e(s),s}function sb(e,t,n,r){let s,i,o;for(s=0,i=e.length;s<i;++s)if(o=e[s],o!==void 0&&o!==void 0)return o}function c6e(e,t,n){const{min:r,max:s}=e,i=gQ(t,(s-r)/2),o=(l,c)=>n&&l===0?0:l+c;return{min:o(r,-Math.abs(i)),max:o(s,i)}}function Nu(e,t){return Object.assign(Object.create(e),t)}function NP(e,t=[""],n,r,s=()=>e[0]){const i=n||e;typeof r>"u"&&(r=TQ("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:r,_getTarget:s,override:l=>NP([l,...e],t,i,r)};return new Proxy(o,{deleteProperty(l,c){return delete l[c],delete l._keys,delete e[0][c],!0},get(l,c){return AQ(l,c,()=>x6e(c,t,e,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(l,c){return IU(l).includes(c)},ownKeys(l){return IU(l)},set(l,c,d){const m=l._storage||(l._storage=s());return l[c]=m[c]=d,delete l._keys,!0}})}function mf(e,t,n,r){const s={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:_Q(e,r),setContext:i=>mf(e,i,n,r),override:i=>mf(e.override(i),t,n,r)};return new Proxy(s,{deleteProperty(i,o){return delete i[o],delete e[o],!0},get(i,o,l){return AQ(i,o,()=>u6e(i,o,l))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(i,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(i,o,l){return e[o]=l,delete i[o],!0}})}function _Q(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:r=t.indexable,_allKeys:s=t.allKeys}=e;return{allKeys:s,scriptable:n,indexable:r,isScriptable:jc(n)?n:()=>n,isIndexable:jc(r)?r:()=>r}}const d6e=(e,t)=>e?e+hP(t):t,jP=(e,t)=>Bt(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function AQ(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const r=n();return e[t]=r,r}function u6e(e,t,n){const{_proxy:r,_context:s,_subProxy:i,_descriptors:o}=e;let l=r[t];return jc(l)&&o.isScriptable(t)&&(l=m6e(t,l,e,n)),_a(l)&&l.length&&(l=f6e(t,l,e,o.isIndexable)),jP(t,l)&&(l=mf(l,s,i&&i[t],o)),l}function m6e(e,t,n,r){const{_proxy:s,_context:i,_subProxy:o,_stack:l}=n;if(l.has(e))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+e);l.add(e);let c=t(i,o||r);return l.delete(e),jP(e,c)&&(c=CP(s._scopes,s,e,c)),c}function f6e(e,t,n,r){const{_proxy:s,_context:i,_subProxy:o,_descriptors:l}=n;if(typeof i.index<"u"&&r(e))return t[i.index%t.length];if(Bt(t[0])){const c=t,d=s._scopes.filter(m=>m!==c);t=[];for(const m of c){const h=CP(d,s,e,m);t.push(mf(h,i,o&&o[e],l))}}return t}function EQ(e,t,n){return jc(e)?e(t,n):e}const h6e=(e,t)=>e===!0?t:typeof e=="string"?lu(t,e):void 0;function g6e(e,t,n,r,s){for(const i of t){const o=h6e(n,i);if(o){e.add(o);const l=EQ(o._fallback,n,s);if(typeof l<"u"&&l!==n&&l!==r)return l}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function CP(e,t,n,r){const s=t._rootScopes,i=EQ(t._fallback,n,r),o=[...e,...s],l=new Set;l.add(r);let c=MU(l,o,n,i||n,r);return c===null||typeof i<"u"&&i!==n&&(c=MU(l,o,i,c,r),c===null)?!1:NP(Array.from(l),[""],s,i,()=>p6e(t,n,r))}function MU(e,t,n,r,s){for(;n;)n=g6e(e,t,n,r,s);return n}function p6e(e,t,n){const r=e._getTarget();t in r||(r[t]={});const s=r[t];return _a(s)&&Bt(n)?n:s||{}}function x6e(e,t,n,r){let s;for(const i of t)if(s=TQ(d6e(i,e),n),typeof s<"u")return jP(e,s)?CP(n,r,e,s):s}function TQ(e,t){for(const n of t){if(!n)continue;const r=n[e];if(typeof r<"u")return r}}function IU(e){let t=e._keys;return t||(t=e._keys=y6e(e._scopes)),t}function y6e(e){const t=new Set;for(const n of e)for(const r of Object.keys(n).filter(s=>!s.startsWith("_")))t.add(r);return Array.from(t)}const b6e=Number.EPSILON||1e-14,ff=(e,t)=>t<e.length&&!e[t].skip&&e[t],LQ=e=>e==="x"?"y":"x";function v6e(e,t,n,r){const s=e.skip?t:e,i=t,o=n.skip?t:n,l=PT(i,s),c=PT(o,i);let d=l/(l+c),m=c/(l+c);d=isNaN(d)?0:d,m=isNaN(m)?0:m;const h=r*d,p=r*m;return{previous:{x:i.x-h*(o.x-s.x),y:i.y-h*(o.y-s.y)},next:{x:i.x+p*(o.x-s.x),y:i.y+p*(o.y-s.y)}}}function w6e(e,t,n){const r=e.length;let s,i,o,l,c,d=ff(e,0);for(let m=0;m<r-1;++m)if(c=d,d=ff(e,m+1),!(!c||!d)){if(Kg(t[m],0,b6e)){n[m]=n[m+1]=0;continue}s=n[m]/t[m],i=n[m+1]/t[m],l=Math.pow(s,2)+Math.pow(i,2),!(l<=9)&&(o=3/Math.sqrt(l),n[m]=s*o*t[m],n[m+1]=i*o*t[m])}}function N6e(e,t,n="x"){const r=LQ(n),s=e.length;let i,o,l,c=ff(e,0);for(let d=0;d<s;++d){if(o=l,l=c,c=ff(e,d+1),!l)continue;const m=l[n],h=l[r];o&&(i=(m-o[n])/3,l[`cp1${n}`]=m-i,l[`cp1${r}`]=h-i*t[d]),c&&(i=(c[n]-m)/3,l[`cp2${n}`]=m+i,l[`cp2${r}`]=h+i*t[d])}}function j6e(e,t="x"){const n=LQ(t),r=e.length,s=Array(r).fill(0),i=Array(r);let o,l,c,d=ff(e,0);for(o=0;o<r;++o)if(l=c,c=d,d=ff(e,o+1),!!c){if(d){const m=d[t]-c[t];s[o]=m!==0?(d[n]-c[n])/m:0}i[o]=l?d?Qi(s[o-1])!==Qi(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}w6e(e,s,i),N6e(e,i,t)}function ib(e,t,n){return Math.max(Math.min(e,n),t)}function C6e(e,t){let n,r,s,i,o,l=Dp(e[0],t);for(n=0,r=e.length;n<r;++n)o=i,i=l,l=n<r-1&&Dp(e[n+1],t),i&&(s=e[n],o&&(s.cp1x=ib(s.cp1x,t.left,t.right),s.cp1y=ib(s.cp1y,t.top,t.bottom)),l&&(s.cp2x=ib(s.cp2x,t.left,t.right),s.cp2y=ib(s.cp2y,t.top,t.bottom)))}function S6e(e,t,n,r,s){let i,o,l,c;if(t.spanGaps&&(e=e.filter(d=>!d.skip)),t.cubicInterpolationMode==="monotone")j6e(e,s);else{let d=r?e[e.length-1]:e[0];for(i=0,o=e.length;i<o;++i)l=e[i],c=v6e(d,l,e[Math.min(i+1,o-(r?0:1))%o],t.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,d=l}t.capBezierPoints&&C6e(e,n)}function SP(){return typeof window<"u"&&typeof document<"u"}function _P(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function aw(e,t,n){let r;return typeof e=="string"?(r=parseInt(e,10),e.indexOf("%")!==-1&&(r=r/100*t.parentNode[n])):r=e,r}const Sj=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function _6e(e,t){return Sj(e).getPropertyValue(t)}const A6e=["top","right","bottom","left"];function Ud(e,t,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const i=A6e[s];r[i]=parseFloat(e[t+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const E6e=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function T6e(e,t){const n=e.touches,r=n&&n.length?n[0]:e,{offsetX:s,offsetY:i}=r;let o=!1,l,c;if(E6e(s,i,e.target))l=s,c=i;else{const d=t.getBoundingClientRect();l=r.clientX-d.left,c=r.clientY-d.top,o=!0}return{x:l,y:c,box:o}}function bd(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:r}=t,s=Sj(n),i=s.boxSizing==="border-box",o=Ud(s,"padding"),l=Ud(s,"border","width"),{x:c,y:d,box:m}=T6e(e,n),h=o.left+(m&&l.left),p=o.top+(m&&l.top);let{width:b,height:v}=t;return i&&(b-=o.width+l.width,v-=o.height+l.height),{x:Math.round((c-h)/b*n.width/r),y:Math.round((d-p)/v*n.height/r)}}function L6e(e,t,n){let r,s;if(t===void 0||n===void 0){const i=e&&_P(e);if(!i)t=e.clientWidth,n=e.clientHeight;else{const o=i.getBoundingClientRect(),l=Sj(i),c=Ud(l,"border","width"),d=Ud(l,"padding");t=o.width-d.width-c.width,n=o.height-d.height-c.height,r=aw(l.maxWidth,i,"clientWidth"),s=aw(l.maxHeight,i,"clientHeight")}}return{width:t,height:n,maxWidth:r||tw,maxHeight:s||tw}}const fc=e=>Math.round(e*10)/10;function k6e(e,t,n,r){const s=Sj(e),i=Ud(s,"margin"),o=aw(s.maxWidth,e,"clientWidth")||tw,l=aw(s.maxHeight,e,"clientHeight")||tw,c=L6e(e,t,n);let{width:d,height:m}=c;if(s.boxSizing==="content-box"){const p=Ud(s,"border","width"),b=Ud(s,"padding");d-=b.width+p.width,m-=b.height+p.height}return d=Math.max(0,d-i.width),m=Math.max(0,r?d/r:m-i.height),d=fc(Math.min(d,o,c.maxWidth)),m=fc(Math.min(m,l,c.maxHeight)),d&&!m&&(m=fc(d/2)),(t!==void 0||n!==void 0)&&r&&c.height&&m>c.height&&(m=c.height,d=fc(Math.floor(m*r))),{width:d,height:m}}function $U(e,t,n){const r=t||1,s=fc(e.height*r),i=fc(e.width*r);e.height=fc(e.height),e.width=fc(e.width);const o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==r||o.height!==s||o.width!==i?(e.currentDevicePixelRatio=r,o.height=s,o.width=i,e.ctx.setTransform(r,0,0,r,0,0),!0):!1}const P6e=(function(){let e=!1;try{const t={get passive(){return e=!0,!1}};SP()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e})();function RU(e,t){const n=_6e(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function vd(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function D6e(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:r==="middle"?n<.5?e.y:t.y:r==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function O6e(e,t,n,r){const s={x:e.cp2x,y:e.cp2y},i={x:t.cp1x,y:t.cp1y},o=vd(e,s,n),l=vd(s,i,n),c=vd(i,t,n),d=vd(o,l,n),m=vd(l,c,n);return vd(d,m,n)}const M6e=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},I6e=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function Wm(e,t,n){return e?M6e(t,n):I6e()}function kQ(e,t){let n,r;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function PQ(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function DQ(e){return e==="angle"?{between:Pp,compare:M$e,normalize:di}:{between:mc,compare:(t,n)=>t-n,normalize:t=>t}}function zU({start:e,end:t,count:n,loop:r,style:s}){return{start:e%n,end:t%n,loop:r&&(t-e+1)%n===0,style:s}}function $6e(e,t,n){const{property:r,start:s,end:i}=n,{between:o,normalize:l}=DQ(r),c=t.length;let{start:d,end:m,loop:h}=e,p,b;if(h){for(d+=c,m+=c,p=0,b=c;p<b&&o(l(t[d%c][r]),s,i);++p)d--,m--;d%=c,m%=c}return m<d&&(m+=c),{start:d,end:m,loop:h,style:e.style}}function R6e(e,t,n){if(!n)return[e];const{property:r,start:s,end:i}=n,o=t.length,{compare:l,between:c,normalize:d}=DQ(r),{start:m,end:h,loop:p,style:b}=$6e(e,t,n),v=[];let x=!1,w=null,j,C,S;const _=()=>c(s,S,j)&&l(s,S)!==0,E=()=>l(i,j)===0||c(i,S,j),A=()=>x||_(),T=()=>!x||E();for(let R=m,U=m;R<=h;++R)C=t[R%o],!C.skip&&(j=d(C[r]),j!==S&&(x=c(j,s,i),w===null&&A()&&(w=l(j,s)===0?R:U),w!==null&&T()&&(v.push(zU({start:w,end:R,loop:p,count:o,style:b})),w=null),U=R,S=j));return w!==null&&v.push(zU({start:w,end:h,loop:p,count:o,style:b})),v}function z6e(e,t){const n=[],r=e.segments;for(let s=0;s<r.length;s++){const i=R6e(r[s],e.points,t);i.length&&n.push(...i)}return n}function U6e(e,t,n,r){let s=0,i=t-1;if(n&&!r)for(;s<t&&!e[s].skip;)s++;for(;s<t&&e[s].skip;)s++;for(s%=t,n&&(i+=s);i>s&&e[i%t].skip;)i--;return i%=t,{start:s,end:i}}function F6e(e,t,n,r){const s=e.length,i=[];let o=t,l=e[t],c;for(c=t+1;c<=n;++c){const d=e[c%s];d.skip||d.stop?l.skip||(r=!1,i.push({start:t%s,end:(c-1)%s,loop:r}),t=o=d.stop?c:null):(o=c,l.skip&&(t=c)),l=d}return o!==null&&i.push({start:t%s,end:o%s,loop:r}),i}function B6e(e,t){const n=e.points,r=e.options.spanGaps,s=n.length;if(!s)return[];const i=!!e._loop,{start:o,end:l}=U6e(n,s,i,r);if(r===!0)return UU(e,[{start:o,end:l,loop:i}],n,t);const c=l<o?l+s:l,d=!!e._fullLoop&&o===0&&l===s-1;return UU(e,F6e(n,o,c,d),n,t)}function UU(e,t,n,r){return!r||!r.setContext||!n?t:H6e(e,t,n,r)}function H6e(e,t,n,r){const s=e._chart.getContext(),i=FU(e.options),{_datasetIndex:o,options:{spanGaps:l}}=e,c=n.length,d=[];let m=i,h=t[0].start,p=h;function b(v,x,w,j){const C=l?-1:1;if(v!==x){for(v+=c;n[v%c].skip;)v-=C;for(;n[x%c].skip;)x+=C;v%c!==x%c&&(d.push({start:v%c,end:x%c,loop:w,style:j}),m=j,h=x%c)}}for(const v of t){h=l?h:v.start;let x=n[h%c],w;for(p=h+1;p<=v.end;p++){const j=n[p%c];w=FU(r.setContext(Nu(s,{type:"segment",p0:x,p1:j,p0DataIndex:(p-1)%c,p1DataIndex:p%c,datasetIndex:o}))),G6e(w,m)&&b(h,p-1,v.loop,m),x=j,m=w}h<p-1&&b(h,p-1,v.loop,m)}return d}function FU(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function G6e(e,t){if(!t)return!1;const n=[],r=function(s,i){return xP(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(e,r)!==JSON.stringify(t,r)}function ob(e,t,n){return e.options.clip?e[n]:t[n]}function V6e(e,t){const{xScale:n,yScale:r}=e;return n&&r?{left:ob(n,t,"left"),right:ob(n,t,"right"),top:ob(r,t,"top"),bottom:ob(r,t,"bottom")}:t}function W6e(e,t){const n=t._clip;if(n.disabled)return!1;const r=V6e(t,e.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?e.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?e.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class q6e{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,r,s){const i=n.listeners[s],o=n.duration;i.forEach(l=>l({chart:t,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=wQ.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const i=r.items;let o=i.length-1,l=!1,c;for(;o>=0;--o)c=i[o],c._active?(c._total>r.duration&&(r.duration=c._total),c.tick(t),l=!0):(i[o]=i[i.length-1],i.pop());l&&(s.draw(),this._notify(s,r,t,"progress")),i.length||(r.running=!1,this._notify(s,r,t,"complete"),r.initial=!1),n+=i.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let r=n.get(t);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,r)),r}listen(t,n,r){this._getAnims(t).listeners[n].push(r)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const r=n.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Mo=new q6e;const BU="transparent",Y6e={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const r=kU(e||BU),s=r.valid&&kU(t||BU);return s&&s.valid?s.mix(r,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class K6e{constructor(t,n,r,s){const i=n[r];s=sb([t.to,s,i,t.from]);const o=sb([t.from,i,s]);this._active=!0,this._fn=t.fn||Y6e[t.type||typeof o],this._easing=Qg[t.easing]||Qg.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=r,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(t,n,r){if(this._active){this._notify(!1);const s=this._target[this._prop],i=r-this._start,o=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=i,this._loop=!!t.loop,this._to=sb([t.to,n,s,t.from]),this._from=sb([t.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,r=this._duration,s=this._prop,i=this._from,o=this._loop,l=this._to;let c;if(this._active=i!==l&&(o||n<r),!this._active){this._target[s]=l,this._notify(!0);return}if(n<0){this._target[s]=i;return}c=n/r%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[s]=this._fn(i,l,c)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,r)=>{t.push({res:n,rej:r})})}_notify(t){const n=t?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][n]()}}class OQ{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!Bt(t))return;const n=Object.keys(aa.animation),r=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{const i=t[s];if(!Bt(i))return;const o={};for(const l of n)o[l]=i[l];(_a(i.properties)&&i.properties||[s]).forEach(l=>{(l===s||!r.has(l))&&r.set(l,o)})})}_animateOptions(t,n){const r=n.options,s=X6e(t,r);if(!s)return[];const i=this._createAnimations(s,r);return r.$shared&&Q6e(t.options.$animations,r).then(()=>{t.options=r},()=>{}),i}_createAnimations(t,n){const r=this._properties,s=[],i=t.$animations||(t.$animations={}),o=Object.keys(n),l=Date.now();let c;for(c=o.length-1;c>=0;--c){const d=o[c];if(d.charAt(0)==="$")continue;if(d==="options"){s.push(...this._animateOptions(t,n));continue}const m=n[d];let h=i[d];const p=r.get(d);if(h)if(p&&h.active()){h.update(p,m,l);continue}else h.cancel();if(!p||!p.duration){t[d]=m;continue}i[d]=h=new K6e(p,t,d,m),s.push(h)}return s}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const r=this._createAnimations(t,n);if(r.length)return Mo.add(this._chart,r),!0}}function Q6e(e,t){const n=[],r=Object.keys(t);for(let s=0;s<r.length;s++){const i=e[r[s]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function X6e(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function HU(e,t){const n=e&&e.options||{},r=n.reverse,s=n.min===void 0?t:0,i=n.max===void 0?t:0;return{start:r?i:s,end:r?s:i}}function Z6e(e,t,n){if(n===!1)return!1;const r=HU(e,n),s=HU(t,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function J6e(e){let t,n,r,s;return Bt(e)?(t=e.top,n=e.right,r=e.bottom,s=e.left):t=n=r=s=e,{top:t,right:n,bottom:r,left:s,disabled:e===!1}}function MQ(e,t){const n=[],r=e._getSortedDatasetMetas(t);let s,i;for(s=0,i=r.length;s<i;++s)n.push(r[s].index);return n}function GU(e,t,n,r={}){const s=e.keys,i=r.mode==="single";let o,l,c,d;if(t===null)return;let m=!1;for(o=0,l=s.length;o<l;++o){if(c=+s[o],c===n){if(m=!0,r.all)continue;break}d=e.values[c],Ys(d)&&(i||t===0||Qi(t)===Qi(d))&&(t+=d)}return!m&&!r.all?0:t}function eRe(e,t){const{iScale:n,vScale:r}=t,s=n.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",o=Object.keys(e),l=new Array(o.length);let c,d,m;for(c=0,d=o.length;c<d;++c)m=o[c],l[c]={[s]:m,[i]:e[m]};return l}function tA(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function tRe(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function nRe(e){const{min:t,max:n,minDefined:r,maxDefined:s}=e.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function aRe(e,t,n){const r=e[t]||(e[t]={});return r[n]||(r[n]={})}function VU(e,t,n,r){for(const s of t.getMatchingVisibleMetas(r).reverse()){const i=e[s.index];if(n&&i>0||!n&&i<0)return s.index}return null}function WU(e,t){const{chart:n,_cachedMeta:r}=e,s=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:l}=r,c=i.axis,d=o.axis,m=tRe(i,o,r),h=t.length;let p;for(let b=0;b<h;++b){const v=t[b],{[c]:x,[d]:w}=v,j=v._stacks||(v._stacks={});p=j[d]=aRe(s,m,x),p[l]=w,p._top=VU(p,o,!0,r.type),p._bottom=VU(p,o,!1,r.type);const C=p._visualValues||(p._visualValues={});C[l]=w}}function nA(e,t){const n=e.scales;return Object.keys(n).filter(r=>n[r].axis===t).shift()}function rRe(e,t){return Nu(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function sRe(e,t,n){return Nu(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function mg(e,t){const n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;for(const s of t){const i=s._stacks;if(!i||i[r]===void 0||i[r][n]===void 0)return;delete i[r][n],i[r]._visualValues!==void 0&&i[r]._visualValues[n]!==void 0&&delete i[r]._visualValues[n]}}}const aA=e=>e==="reset"||e==="none",qU=(e,t)=>t?e:Object.assign({},e),iRe=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:MQ(n,!0),values:null};class _j{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=tA(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&mg(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(h,p,b,v)=>h==="x"?p:h==="r"?v:b,i=n.xAxisID=Lt(r.xAxisID,nA(t,"x")),o=n.yAxisID=Lt(r.yAxisID,nA(t,"y")),l=n.rAxisID=Lt(r.rAxisID,nA(t,"r")),c=n.indexAxis,d=n.iAxisID=s(c,i,o,l),m=n.vAxisID=s(c,o,i,l);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(l),n.iScale=this.getScaleForId(d),n.vScale=this.getScaleForId(m)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&EU(this._data,this),t._stacked&&mg(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),r=this._data;if(Bt(n)){const s=this._cachedMeta;this._data=eRe(n,s)}else if(r!==n){if(r){EU(r,this);const s=this._cachedMeta;mg(s),s._parsed=[]}n&&Object.isExtensible(n)&&z$e(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const i=n._stacked;n._stacked=tA(n.vScale,n),n.stack!==r.stack&&(s=!0,mg(n),n.stack=r.stack),this._resyncElements(t),(s||i!==n._stacked)&&(WU(this,n._parsed),n._stacked=tA(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),r=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:r,_data:s}=this,{iScale:i,_stacked:o}=r,l=i.axis;let c=t===0&&n===s.length?!0:r._sorted,d=t>0&&r._parsed[t-1],m,h,p;if(this._parsing===!1)r._parsed=s,r._sorted=!0,p=s;else{_a(s[t])?p=this.parseArrayData(r,s,t,n):Bt(s[t])?p=this.parseObjectData(r,s,t,n):p=this.parsePrimitiveData(r,s,t,n);const b=()=>h[l]===null||d&&h[l]<d[l];for(m=0;m<n;++m)r._parsed[m+t]=h=p[m],c&&(b()&&(c=!1),d=h);r._sorted=c}o&&WU(this,p)}parsePrimitiveData(t,n,r,s){const{iScale:i,vScale:o}=t,l=i.axis,c=o.axis,d=i.getLabels(),m=i===o,h=new Array(s);let p,b,v;for(p=0,b=s;p<b;++p)v=p+r,h[p]={[l]:m||i.parse(d[v],v),[c]:o.parse(n[v],v)};return h}parseArrayData(t,n,r,s){const{xScale:i,yScale:o}=t,l=new Array(s);let c,d,m,h;for(c=0,d=s;c<d;++c)m=c+r,h=n[m],l[c]={x:i.parse(h[0],m),y:o.parse(h[1],m)};return l}parseObjectData(t,n,r,s){const{xScale:i,yScale:o}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=new Array(s);let m,h,p,b;for(m=0,h=s;m<h;++m)p=m+r,b=n[p],d[m]={x:i.parse(lu(b,l),p),y:o.parse(lu(b,c),p)};return d}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,r){const s=this.chart,i=this._cachedMeta,o=n[t.axis],l={keys:MQ(s,!0),values:n._stacks[t.axis]._visualValues};return GU(l,o,i.index,{mode:r})}updateRangeFromParsed(t,n,r,s){const i=r[n.axis];let o=i===null?NaN:i;const l=s&&r._stacks[n.axis];s&&l&&(s.values=l,o=GU(s,i,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,n){const r=this._cachedMeta,s=r._parsed,i=r._sorted&&t===r.iScale,o=s.length,l=this._getOtherScale(t),c=iRe(n,r,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:m,max:h}=nRe(l);let p,b;function v(){b=s[p];const x=b[l.axis];return!Ys(b[t.axis])||m>x||h<x}for(p=0;p<o&&!(!v()&&(this.updateRangeFromParsed(d,t,b,c),i));++p);if(i){for(p=o-1;p>=0;--p)if(!v()){this.updateRangeFromParsed(d,t,b,c);break}}return d}getAllParsedValues(t){const n=this._cachedMeta._parsed,r=[];let s,i,o;for(s=0,i=n.length;s<i;++s)o=n[s][t.axis],Ys(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,r=n.iScale,s=n.vScale,i=this.getParsed(t);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:s?""+s.getLabelForValue(i[s.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=J6e(Lt(this.options.clip,Z6e(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],i=n.chartArea,o=[],l=this._drawStart||0,c=this._drawCount||s.length-l,d=this.options.drawActiveElementsOnTop;let m;for(r.dataset&&r.dataset.draw(t,i,l,c),m=l;m<l+c;++m){const h=s[m];h.hidden||(h.active&&d?o.push(h):h.draw(t,i))}for(m=0;m<o.length;++m)o[m].draw(t,i)}getStyle(t,n){const r=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(t||0,r)}getContext(t,n,r){const s=this.getDataset();let i;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];i=o.$context||(o.$context=sRe(this.getContext(),t,o)),i.parsed=this.getParsed(t),i.raw=s.data[t],i.index=i.dataIndex=t}else i=this.$context||(this.$context=rRe(this.chart.getContext(),this.index)),i.dataset=s,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=r,i}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",r){const s=n==="active",i=this._cachedDataOpts,o=t+"-"+n,l=i[o],c=this.enableOptionSharing&&Lp(r);if(l)return qU(l,c);const d=this.chart.config,m=d.datasetElementScopeKeys(this._type,t),h=s?[`${t}Hover`,"hover",t,""]:[t,""],p=d.getOptionScopes(this.getDataset(),m),b=Object.keys(aa.elements[t]),v=()=>this.getContext(r,s,n),x=d.resolveNamedOptions(p,b,v,h);return x.$shared&&(x.$shared=c,i[o]=Object.freeze(qU(x,c))),x}_resolveAnimations(t,n,r){const s=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,l=i[o];if(l)return l;let c;if(s.options.animation!==!1){const m=this.chart.config,h=m.datasetAnimationScopeKeys(this._type,n),p=m.getOptionScopes(this.getDataset(),h);c=m.createResolver(p,this.getContext(t,r,n))}const d=new OQ(s,c&&c.animations);return c&&c._cacheable&&(i[o]=Object.freeze(d)),d}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||aA(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const r=this.resolveDataElementOptions(t,n),s=this._sharedOptions,i=this.getSharedOptions(r),o=this.includeOptions(n,i)||i!==s;return this.updateSharedOptions(i,n,r),{sharedOptions:i,includeOptions:o}}updateElement(t,n,r,s){aA(s)?Object.assign(t,r):this._resolveAnimations(n,s).update(t,r)}updateSharedOptions(t,n,r){t&&!aA(n)&&this._resolveAnimations(void 0,n).update(t,r)}_setStyle(t,n,r,s){t.active=s;const i=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(t,{options:!s&&this.getSharedOptions(i)||i})}removeHoverStyle(t,n,r){this._setStyle(t,r,"active",!1)}setHoverStyle(t,n,r){this._setStyle(t,r,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,r=this._cachedMeta.data;for(const[l,c,d]of this._syncList)this[l](c,d);this._syncList=[];const s=r.length,i=n.length,o=Math.min(i,s);o&&this.parse(0,o),i>s?this._insertElements(s,i-s,t):i<s&&this._removeElements(i,s-i)}_insertElements(t,n,r=!0){const s=this._cachedMeta,i=s.data,o=t+n;let l;const c=d=>{for(d.length+=n,l=d.length-1;l>=o;l--)d[l]=d[l-n]};for(c(i),l=t;l<o;++l)i[l]=new this.dataElementType;this._parsing&&c(s._parsed),this.parse(t,n),r&&this.updateElements(i,t,n,"reset")}updateElements(t,n,r,s){}_removeElements(t,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(t,n);r._stacked&&mg(r,s)}r.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,r,s]=t;this[n](r,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",t,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function oRe(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let r=[];for(let s=0,i=n.length;s<i;s++)r=r.concat(n[s].controller.getAllParsedValues(e));e._cache.$bar=vQ(r.sort((s,i)=>s-i))}return e._cache.$bar}function lRe(e){const t=e.iScale,n=oRe(t,e.type);let r=t._length,s,i,o,l;const c=()=>{o===32767||o===-32768||(Lp(l)&&(r=Math.min(r,Math.abs(o-l)||r)),l=o)};for(s=0,i=n.length;s<i;++s)o=t.getPixelForValue(n[s]),c();for(l=void 0,s=0,i=t.ticks.length;s<i;++s)o=t.getPixelForTick(s),c();return r}function cRe(e,t,n,r){const s=n.barThickness;let i,o;return Jt(s)?(i=t.min*n.categoryPercentage,o=n.barPercentage):(i=s*r,o=1),{chunk:i/r,ratio:o,start:t.pixels[e]-i/2}}function dRe(e,t,n,r){const s=t.pixels,i=s[e];let o=e>0?s[e-1]:null,l=e<s.length-1?s[e+1]:null;const c=n.categoryPercentage;o===null&&(o=i-(l===null?t.end-t.start:l-i)),l===null&&(l=i+i-o);const d=i-(i-Math.min(o,l))/2*c;return{chunk:Math.abs(l-o)/2*c/r,ratio:n.barPercentage,start:d}}function uRe(e,t,n,r){const s=n.parse(e[0],r),i=n.parse(e[1],r),o=Math.min(s,i),l=Math.max(s,i);let c=o,d=l;Math.abs(o)>Math.abs(l)&&(c=l,d=o),t[n.axis]=d,t._custom={barStart:c,barEnd:d,start:s,end:i,min:o,max:l}}function IQ(e,t,n,r){return _a(e)?uRe(e,t,n,r):t[n.axis]=n.parse(e,r),t}function YU(e,t,n,r){const s=e.iScale,i=e.vScale,o=s.getLabels(),l=s===i,c=[];let d,m,h,p;for(d=n,m=n+r;d<m;++d)p=t[d],h={},h[s.axis]=l||s.parse(o[d],d),c.push(IQ(p,h,i,d));return c}function rA(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function mRe(e,t,n){return e!==0?Qi(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}function fRe(e){let t,n,r,s,i;return e.horizontal?(t=e.base>e.x,n="left",r="right"):(t=e.base<e.y,n="bottom",r="top"),t?(s="end",i="start"):(s="start",i="end"),{start:n,end:r,reverse:t,top:s,bottom:i}}function hRe(e,t,n,r){let s=t.borderSkipped;const i={};if(!s){e.borderSkipped=i;return}if(s===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:l,reverse:c,top:d,bottom:m}=fRe(e);s==="middle"&&n&&(e.enableBorderRadius=!0,(n._top||0)===r?s=d:(n._bottom||0)===r?s=m:(i[KU(m,o,l,c)]=!0,s=d)),i[KU(s,o,l,c)]=!0,e.borderSkipped=i}function KU(e,t,n,r){return r?(e=gRe(e,t,n),e=QU(e,n,t)):e=QU(e,t,n),e}function gRe(e,t,n){return e===t?n:e===n?t:e}function QU(e,t,n){return e==="start"?t:e==="end"?n:e}function pRe(e,{inflateAmount:t},n){e.inflateAmount=t==="auto"?n===1?.33:0:t}class xRe extends _j{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,n,r,s){return YU(t,n,r,s)}parseArrayData(t,n,r,s){return YU(t,n,r,s)}parseObjectData(t,n,r,s){const{iScale:i,vScale:o}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=i.axis==="x"?l:c,m=o.axis==="x"?l:c,h=[];let p,b,v,x;for(p=r,b=r+s;p<b;++p)x=n[p],v={},v[i.axis]=i.parse(lu(x,d),p),h.push(IQ(lu(x,m),v,o,p));return h}updateRangeFromParsed(t,n,r,s){super.updateRangeFromParsed(t,n,r,s);const i=r._custom;i&&n===this._cachedMeta.vScale&&(t.min=Math.min(t.min,i.min),t.max=Math.max(t.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const n=this._cachedMeta,{iScale:r,vScale:s}=n,i=this.getParsed(t),o=i._custom,l=rA(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(i[s.axis]);return{label:""+r.getLabelForValue(i[r.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,t)}updateElements(t,n,r,s){const i=s==="reset",{index:o,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),d=l.isHorizontal(),m=this._getRuler(),{sharedOptions:h,includeOptions:p}=this._getSharedOptions(n,s);for(let b=n;b<n+r;b++){const v=this.getParsed(b),x=i||Jt(v[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(b),w=this._calculateBarIndexPixels(b,m),j=(v._stacks||{})[l.axis],C={horizontal:d,base:x.base,enableBorderRadius:!j||rA(v._custom)||o===j._top||o===j._bottom,x:d?x.head:w.center,y:d?w.center:x.head,height:d?w.size:Math.abs(x.size),width:d?Math.abs(x.size):w.size};p&&(C.options=h||this.resolveDataElementOptions(b,t[b].active?"active":s));const S=C.options||t[b].options;hRe(C,S,j,o),pRe(C,S,m.ratio),this.updateElement(t[b],b,C,s)}}_getStacks(t,n){const{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(m=>m.controller.options.grouped),i=r.options.stacked,o=[],l=this._cachedMeta.controller.getParsed(n),c=l&&l[r.axis],d=m=>{const h=m._parsed.find(b=>b[r.axis]===c),p=h&&h[m.vScale.axis];if(Jt(p)||isNaN(p))return!0};for(const m of s)if(!(n!==void 0&&d(m))&&((i===!1||o.indexOf(m.stack)===-1||i===void 0&&m.stack===void 0)&&o.push(m.stack),m.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(t).filter(r=>t[r].axis===n).shift()}_getAxis(){const t={},n=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)t[Lt(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,n)]=!0;return Object.keys(t)}_getStackIndex(t,n,r){const s=this._getStacks(t,r),i=n!==void 0?s.indexOf(n):-1;return i===-1?s.length-1:i}_getRuler(){const t=this.options,n=this._cachedMeta,r=n.iScale,s=[];let i,o;for(i=0,o=n.data.length;i<o;++i)s.push(r.getPixelForValue(this.getParsed(i)[r.axis],i));const l=t.barThickness;return{min:l||lRe(n),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:t.grouped,ratio:l?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:n,_stacked:r,index:s},options:{base:i,minBarLength:o}}=this,l=i||0,c=this.getParsed(t),d=c._custom,m=rA(d);let h=c[n.axis],p=0,b=r?this.applyStack(n,c,r):h,v,x;b!==h&&(p=b-h,b=h),m&&(h=d.barStart,b=d.barEnd-d.barStart,h!==0&&Qi(h)!==Qi(d.barEnd)&&(p=0),p+=h);const w=!Jt(i)&&!m?i:p;let j=n.getPixelForValue(w);if(this.chart.getDataVisibility(t)?v=n.getPixelForValue(p+b):v=j,x=v-j,Math.abs(x)<o){x=mRe(x,n,l)*o,h===l&&(j-=x/2);const C=n.getPixelForDecimal(0),S=n.getPixelForDecimal(1),_=Math.min(C,S),E=Math.max(C,S);j=Math.max(Math.min(j,E),_),v=j+x,r&&!m&&(c._stacks[n.axis]._visualValues[s]=n.getValueForPixel(v)-n.getValueForPixel(j))}if(j===n.getPixelForValue(l)){const C=Qi(x)*n.getLineWidthForValue(l)/2;j+=C,x-=C}return{size:x,base:j,head:v,center:v+x/2}}_calculateBarIndexPixels(t,n){const r=n.scale,s=this.options,i=s.skipNull,o=Lt(s.maxBarThickness,1/0);let l,c;const d=this._getAxisCount();if(n.grouped){const m=i?this._getStackCount(t):n.stackCount,h=s.barThickness==="flex"?dRe(t,n,s,m*d):cRe(t,n,s,m*d),p=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,b=this._getAxis().indexOf(Lt(p,this.getFirstScaleIdForIndexAxis())),v=this._getStackIndex(this.index,this._cachedMeta.stack,i?t:void 0)+b;l=h.start+h.chunk*v+h.chunk/2,c=Math.min(o,h.chunk*h.ratio)}else l=r.getPixelForValue(this.getParsed(t)[r.axis],t),c=Math.min(o,n.min*n.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const t=this._cachedMeta,n=t.vScale,r=t.data,s=r.length;let i=0;for(;i<s;++i)this.getParsed(i)[n.axis]!==null&&!r[i].hidden&&r[i].draw(this._ctx)}}function yRe(e,t,n){let r=1,s=1,i=0,o=0;if(t<Xn){const l=e,c=l+t,d=Math.cos(l),m=Math.sin(l),h=Math.cos(c),p=Math.sin(c),b=(S,_,E)=>Pp(S,l,c,!0)?1:Math.max(_,_*n,E,E*n),v=(S,_,E)=>Pp(S,l,c,!0)?-1:Math.min(_,_*n,E,E*n),x=b(0,d,h),w=b(Aa,m,p),j=v(cn,d,h),C=v(cn+Aa,m,p);r=(x-j)/2,s=(w-C)/2,i=-(x+j)/2,o=-(w+C)/2}return{ratioX:r,ratioY:s,offsetX:i,offsetY:o}}class bRe extends _j{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data,{labels:{pointStyle:r,textAlign:s,color:i,useBorderRadius:o,borderRadius:l}}=t.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((c,d)=>{const h=t.getDatasetMeta(0).controller.getStyle(d);return{text:c,fillStyle:h.backgroundColor,fontColor:i,hidden:!t.getDataVisibility(d),lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:h.borderWidth,strokeStyle:h.borderColor,textAlign:s,pointStyle:r,borderRadius:o&&(l||h.borderRadius),index:d}}):[]}},onClick(t,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}};constructor(t,n){super(t,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const r=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=r;else{let i=c=>+r[c];if(Bt(r[t])){const{key:c="value"}=this._parsing;i=d=>+lu(r[d],c)}let o,l;for(o=t,l=t+n;o<l;++o)s._parsed[o]=i(o)}}_getRotation(){return Vo(this.options.rotation-90)}_getCircumference(){return Vo(this.options.circumference)}_getRotationExtents(){let t=Xn,n=-Xn;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const s=this.chart.getDatasetMeta(r).controller,i=s._getRotation(),o=s._getCircumference();t=Math.min(t,i),n=Math.max(n,i+o)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:r}=n,s=this._cachedMeta,i=s.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,l=Math.max((Math.min(r.width,r.height)-o)/2,0),c=Math.min(N$e(this.options.cutout,l),1),d=this._getRingWeight(this.index),{circumference:m,rotation:h}=this._getRotationExtents(),{ratioX:p,ratioY:b,offsetX:v,offsetY:x}=yRe(h,m,c),w=(r.width-o)/p,j=(r.height-o)/b,C=Math.max(Math.min(w,j)/2,0),S=gQ(this.options.radius,C),_=Math.max(S*c,0),E=(S-_)/this._getVisibleDatasetWeightTotal();this.offsetX=v*S,this.offsetY=x*S,s.total=this.calculateTotal(),this.outerRadius=S-E*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-E*d,0),this.updateElements(i,0,i.length,t)}_circumference(t,n){const r=this.options,s=this._cachedMeta,i=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(t)||s._parsed[t]===null||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*i/Xn)}updateElements(t,n,r,s){const i=s==="reset",o=this.chart,l=o.chartArea,d=o.options.animation,m=(l.left+l.right)/2,h=(l.top+l.bottom)/2,p=i&&d.animateScale,b=p?0:this.innerRadius,v=p?0:this.outerRadius,{sharedOptions:x,includeOptions:w}=this._getSharedOptions(n,s);let j=this._getRotation(),C;for(C=0;C<n;++C)j+=this._circumference(C,i);for(C=n;C<n+r;++C){const S=this._circumference(C,i),_=t[C],E={x:m+this.offsetX,y:h+this.offsetY,startAngle:j,endAngle:j+S,circumference:S,outerRadius:v,innerRadius:b};w&&(E.options=x||this.resolveDataElementOptions(C,_.active?"active":s)),j+=S,this.updateElement(_,C,E,s)}}calculateTotal(){const t=this._cachedMeta,n=t.data;let r=0,s;for(s=0;s<n.length;s++){const i=t._parsed[s];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(s)&&!n[s].hidden&&(r+=Math.abs(i))}return r}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?Xn*(Math.abs(t)/n):0}getLabelAndValue(t){const n=this._cachedMeta,r=this.chart,s=r.data.labels||[],i=yP(n._parsed[t],r.options.locale);return{label:s[t]||"",value:i}}getMaxBorderWidth(t){let n=0;const r=this.chart;let s,i,o,l,c;if(!t){for(s=0,i=r.data.datasets.length;s<i;++s)if(r.isDatasetVisible(s)){o=r.getDatasetMeta(s),t=o.data,l=o.controller;break}}if(!t)return 0;for(s=0,i=t.length;s<i;++s)c=l.resolveDataElementOptions(s),c.borderAlign!=="inner"&&(n=Math.max(n,c.borderWidth||0,c.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let r=0,s=t.length;r<s;++r){const i=this.resolveDataElementOptions(r);n=Math.max(n,i.offset||0,i.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let r=0;r<t;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(t){return Math.max(Lt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class vRe extends _j{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:r,data:s=[],_dataset:i}=n,o=this.chart._animationsDisabled;let{start:l,count:c}=B$e(n,s,o);this._drawStart=l,this._drawCount=c,H$e(n)&&(l=0,c=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!i._decimated,r.points=s;const d=this.resolveDatasetElementOptions(t);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:d},t),this.updateElements(s,l,c,t)}updateElements(t,n,r,s){const i=s==="reset",{iScale:o,vScale:l,_stacked:c,_dataset:d}=this._cachedMeta,{sharedOptions:m,includeOptions:h}=this._getSharedOptions(n,s),p=o.axis,b=l.axis,{spanGaps:v,segment:x}=this.options,w=kp(v)?v:Number.POSITIVE_INFINITY,j=this.chart._animationsDisabled||i||s==="none",C=n+r,S=t.length;let _=n>0&&this.getParsed(n-1);for(let E=0;E<S;++E){const A=t[E],T=j?A:{};if(E<n||E>=C){T.skip=!0;continue}const R=this.getParsed(E),U=Jt(R[b]),W=T[p]=o.getPixelForValue(R[p],E),I=T[b]=i||U?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,R,c):R[b],E);T.skip=isNaN(W)||isNaN(I)||U,T.stop=E>0&&Math.abs(R[p]-_[p])>w,x&&(T.parsed=R,T.raw=d.data[E]),h&&(T.options=m||this.resolveDataElementOptions(E,A.active?"active":s)),j||this.updateElement(A,E,T,s),_=R}}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,r=n.options&&n.options.borderWidth||0,s=t.data||[];if(!s.length)return r;const i=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,i,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}class wRe extends bRe{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}function cd(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class AP{static override(t){Object.assign(AP.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return cd()}parse(){return cd()}format(){return cd()}add(){return cd()}diff(){return cd()}startOf(){return cd()}endOf(){return cd()}}var NRe={_date:AP};function jRe(e,t,n,r){const{controller:s,data:i,_sorted:o}=e,l=s._cachedMeta.iScale,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(l&&t===l.axis&&t!=="r"&&o&&i.length){const d=l._reversePixels?$$e:kd;if(r){if(s._sharedOptions){const m=i[0],h=typeof m.getRange=="function"&&m.getRange(t);if(h){const p=d(i,t,n-h),b=d(i,t,n+h);return{lo:p.lo,hi:b.hi}}}}else{const m=d(i,t,n);if(c){const{vScale:h}=s._cachedMeta,{_parsed:p}=e,b=p.slice(0,m.lo+1).reverse().findIndex(x=>!Jt(x[h.axis]));m.lo-=Math.max(0,b);const v=p.slice(m.hi).findIndex(x=>!Jt(x[h.axis]));m.hi+=Math.max(0,v)}return m}}return{lo:0,hi:i.length-1}}function Aj(e,t,n,r,s){const i=e.getSortedVisibleDatasetMetas(),o=n[t];for(let l=0,c=i.length;l<c;++l){const{index:d,data:m}=i[l],{lo:h,hi:p}=jRe(i[l],t,o,s);for(let b=h;b<=p;++b){const v=m[b];v.skip||r(v,d,b)}}}function CRe(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(r,s){const i=t?Math.abs(r.x-s.x):0,o=n?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function sA(e,t,n,r,s){const i=[];return!s&&!e.isPointInArea(t)||Aj(e,n,t,function(l,c,d){!s&&!Dp(l,e.chartArea,0)||l.inRange(t.x,t.y,r)&&i.push({element:l,datasetIndex:c,index:d})},!0),i}function SRe(e,t,n,r){let s=[];function i(o,l,c){const{startAngle:d,endAngle:m}=o.getProps(["startAngle","endAngle"],r),{angle:h}=yQ(o,{x:t.x,y:t.y});Pp(h,d,m)&&s.push({element:o,datasetIndex:l,index:c})}return Aj(e,n,t,i),s}function _Re(e,t,n,r,s,i){let o=[];const l=CRe(n);let c=Number.POSITIVE_INFINITY;function d(m,h,p){const b=m.inRange(t.x,t.y,s);if(r&&!b)return;const v=m.getCenterPoint(s);if(!(!!i||e.isPointInArea(v))&&!b)return;const w=l(t,v);w<c?(o=[{element:m,datasetIndex:h,index:p}],c=w):w===c&&o.push({element:m,datasetIndex:h,index:p})}return Aj(e,n,t,d),o}function iA(e,t,n,r,s,i){return!i&&!e.isPointInArea(t)?[]:n==="r"&&!r?SRe(e,t,n,s):_Re(e,t,n,r,s,i)}function XU(e,t,n,r,s){const i=[],o=n==="x"?"inXRange":"inYRange";let l=!1;return Aj(e,n,t,(c,d,m)=>{c[o]&&c[o](t[n],s)&&(i.push({element:c,datasetIndex:d,index:m}),l=l||c.inRange(t.x,t.y,s))}),r&&!l?[]:i}var ARe={modes:{index(e,t,n,r){const s=bd(t,e),i=n.axis||"x",o=n.includeInvisible||!1,l=n.intersect?sA(e,s,i,r,o):iA(e,s,i,!1,r,o),c=[];return l.length?(e.getSortedVisibleDatasetMetas().forEach(d=>{const m=l[0].index,h=d.data[m];h&&!h.skip&&c.push({element:h,datasetIndex:d.index,index:m})}),c):[]},dataset(e,t,n,r){const s=bd(t,e),i=n.axis||"xy",o=n.includeInvisible||!1;let l=n.intersect?sA(e,s,i,r,o):iA(e,s,i,!1,r,o);if(l.length>0){const c=l[0].datasetIndex,d=e.getDatasetMeta(c).data;l=[];for(let m=0;m<d.length;++m)l.push({element:d[m],datasetIndex:c,index:m})}return l},point(e,t,n,r){const s=bd(t,e),i=n.axis||"xy",o=n.includeInvisible||!1;return sA(e,s,i,r,o)},nearest(e,t,n,r){const s=bd(t,e),i=n.axis||"xy",o=n.includeInvisible||!1;return iA(e,s,i,n.intersect,r,o)},x(e,t,n,r){const s=bd(t,e);return XU(e,s,"x",n.intersect,r)},y(e,t,n,r){const s=bd(t,e);return XU(e,s,"y",n.intersect,r)}}};const $Q=["left","top","right","bottom"];function fg(e,t){return e.filter(n=>n.pos===t)}function ZU(e,t){return e.filter(n=>$Q.indexOf(n.pos)===-1&&n.box.axis===t)}function hg(e,t){return e.sort((n,r)=>{const s=t?r:n,i=t?n:r;return s.weight===i.weight?s.index-i.index:s.weight-i.weight})}function ERe(e){const t=[];let n,r,s,i,o,l;for(n=0,r=(e||[]).length;n<r;++n)s=e[n],{position:i,options:{stack:o,stackWeight:l=1}}=s,t.push({index:n,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&i+o,stackWeight:l});return t}function TRe(e){const t={};for(const n of e){const{stack:r,pos:s,stackWeight:i}=n;if(!r||!$Q.includes(s))continue;const o=t[r]||(t[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return t}function LRe(e,t){const n=TRe(e),{vBoxMaxWidth:r,hBoxMaxHeight:s}=t;let i,o,l;for(i=0,o=e.length;i<o;++i){l=e[i];const{fullSize:c}=l.box,d=n[l.stack],m=d&&l.stackWeight/d.weight;l.horizontal?(l.width=m?m*r:c&&t.availableWidth,l.height=s):(l.width=r,l.height=m?m*s:c&&t.availableHeight)}return n}function kRe(e){const t=ERe(e),n=hg(t.filter(d=>d.box.fullSize),!0),r=hg(fg(t,"left"),!0),s=hg(fg(t,"right")),i=hg(fg(t,"top"),!0),o=hg(fg(t,"bottom")),l=ZU(t,"x"),c=ZU(t,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:s.concat(c).concat(o).concat(l),chartArea:fg(t,"chartArea"),vertical:r.concat(s).concat(c),horizontal:i.concat(o).concat(l)}}function JU(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function RQ(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function PRe(e,t,n,r){const{pos:s,box:i}=n,o=e.maxPadding;if(!Bt(s)){n.size&&(e[s]-=n.size);const h=r[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?i.height:i.width),n.size=h.size/h.count,e[s]+=n.size}i.getPadding&&RQ(o,i.getPadding());const l=Math.max(0,t.outerWidth-JU(o,e,"left","right")),c=Math.max(0,t.outerHeight-JU(o,e,"top","bottom")),d=l!==e.w,m=c!==e.h;return e.w=l,e.h=c,n.horizontal?{same:d,other:m}:{same:m,other:d}}function DRe(e){const t=e.maxPadding;function n(r){const s=Math.max(t[r]-e[r],0);return e[r]+=s,s}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function ORe(e,t){const n=t.maxPadding;function r(s){const i={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{i[o]=Math.max(t[o],n[o])}),i}return r(e?["left","right"]:["top","bottom"])}function zg(e,t,n,r){const s=[];let i,o,l,c,d,m;for(i=0,o=e.length,d=0;i<o;++i){l=e[i],c=l.box,c.update(l.width||t.w,l.height||t.h,ORe(l.horizontal,t));const{same:h,other:p}=PRe(t,n,l,r);d|=h&&s.length,m=m||p,c.fullSize||s.push(l)}return d&&zg(s,t,n,r)||m}function lb(e,t,n,r,s){e.top=n,e.left=t,e.right=t+r,e.bottom=n+s,e.width=r,e.height=s}function eF(e,t,n,r){const s=n.padding;let{x:i,y:o}=t;for(const l of e){const c=l.box,d=r[l.stack]||{placed:0,weight:1},m=l.stackWeight/d.weight||1;if(l.horizontal){const h=t.w*m,p=d.size||c.height;Lp(d.start)&&(o=d.start),c.fullSize?lb(c,s.left,o,n.outerWidth-s.right-s.left,p):lb(c,t.left+d.placed,o,h,p),d.start=o,d.placed+=h,o=c.bottom}else{const h=t.h*m,p=d.size||c.width;Lp(d.start)&&(i=d.start),c.fullSize?lb(c,i,s.top,p,n.outerHeight-s.bottom-s.top):lb(c,i,t.top+d.placed,p,h),d.start=i,d.placed+=h,i=c.right}}t.x=i,t.y=o}var Rs={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,r){if(!e)return;const s=Ks(e.options.layout.padding),i=Math.max(t-s.width,0),o=Math.max(n-s.height,0),l=kRe(e.boxes),c=l.vertical,d=l.horizontal;on(e.boxes,x=>{typeof x.beforeLayout=="function"&&x.beforeLayout()});const m=c.reduce((x,w)=>w.box.options&&w.box.options.display===!1?x:x+1,0)||1,h=Object.freeze({outerWidth:t,outerHeight:n,padding:s,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/m,hBoxMaxHeight:o/2}),p=Object.assign({},s);RQ(p,Ks(r));const b=Object.assign({maxPadding:p,w:i,h:o,x:s.left,y:s.top},s),v=LRe(c.concat(d),h);zg(l.fullSize,b,h,v),zg(c,b,h,v),zg(d,b,h,v)&&zg(c,b,h,v),DRe(b),eF(l.leftAndTop,b,h,v),b.x+=b.w,b.y+=b.h,eF(l.rightAndBottom,b,h,v),e.chartArea={left:b.left,top:b.top,right:b.left+b.w,bottom:b.top+b.h,height:b.h,width:b.w},on(l.chartArea,x=>{const w=x.box;Object.assign(w,e.chartArea),w.update(b.w,b.h,{left:0,top:0,right:0,bottom:0})})}};class zQ{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,r){}removeEventListener(t,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,r,s){return n=Math.max(0,n||t.width),r=r||t.height,{width:n,height:Math.max(0,s?Math.floor(n/s):r)}}isAttached(t){return!0}updateConfig(t){}}class MRe extends zQ{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Ib="$chartjs",IRe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},tF=e=>e===null||e==="";function $Re(e,t){const n=e.style,r=e.getAttribute("height"),s=e.getAttribute("width");if(e[Ib]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",tF(s)){const i=RU(e,"width");i!==void 0&&(e.width=i)}if(tF(r))if(e.style.height==="")e.height=e.width/(t||2);else{const i=RU(e,"height");i!==void 0&&(e.height=i)}return e}const UQ=P6e?{passive:!0}:!1;function RRe(e,t,n){e&&e.addEventListener(t,n,UQ)}function zRe(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,UQ)}function URe(e,t){const n=IRe[e.type]||e.type,{x:r,y:s}=bd(e,t);return{type:n,chart:t,native:e,x:r!==void 0?r:null,y:s!==void 0?s:null}}function rw(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function FRe(e,t,n){const r=e.canvas,s=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||rw(l.addedNodes,r),o=o&&!rw(l.removedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function BRe(e,t,n){const r=e.canvas,s=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||rw(l.removedNodes,r),o=o&&!rw(l.addedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const Mp=new Map;let nF=0;function FQ(){const e=window.devicePixelRatio;e!==nF&&(nF=e,Mp.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function HRe(e,t){Mp.size||window.addEventListener("resize",FQ),Mp.set(e,t)}function GRe(e){Mp.delete(e),Mp.size||window.removeEventListener("resize",FQ)}function VRe(e,t,n){const r=e.canvas,s=r&&_P(r);if(!s)return;const i=NQ((l,c)=>{const d=s.clientWidth;n(l,c),d<s.clientWidth&&n()},window),o=new ResizeObserver(l=>{const c=l[0],d=c.contentRect.width,m=c.contentRect.height;d===0&&m===0||i(d,m)});return o.observe(s),HRe(e,i),o}function oA(e,t,n){n&&n.disconnect(),t==="resize"&&GRe(e)}function WRe(e,t,n){const r=e.canvas,s=NQ(i=>{e.ctx!==null&&n(URe(i,e))},e);return RRe(r,t,s),s}class qRe extends zQ{acquireContext(t,n){const r=t&&t.getContext&&t.getContext("2d");return r&&r.canvas===t?($Re(t,n),r):null}releaseContext(t){const n=t.canvas;if(!n[Ib])return!1;const r=n[Ib].initial;["height","width"].forEach(i=>{const o=r[i];Jt(o)?n.removeAttribute(i):n.setAttribute(i,o)});const s=r.style||{};return Object.keys(s).forEach(i=>{n.style[i]=s[i]}),n.width=n.width,delete n[Ib],!0}addEventListener(t,n,r){this.removeEventListener(t,n);const s=t.$proxies||(t.$proxies={}),o={attach:FRe,detach:BRe,resize:VRe}[n]||WRe;s[n]=o(t,n,r)}removeEventListener(t,n){const r=t.$proxies||(t.$proxies={}),s=r[n];if(!s)return;({attach:oA,detach:oA,resize:oA}[n]||zRe)(t,n,s),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,r,s){return k6e(t,n,r,s)}isAttached(t){const n=t&&_P(t);return!!(n&&n.isConnected)}}function YRe(e){return!SP()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?MRe:qRe}let Cl=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:n,y:r}=this.getProps(["x","y"],t);return{x:n,y:r}}hasValue(){return kp(this.x)&&kp(this.y)}getProps(t,n){const r=this.$animations;if(!n||!r)return this;const s={};return t.forEach(i=>{s[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),s}};function KRe(e,t){const n=e.options.ticks,r=QRe(e),s=Math.min(n.maxTicksLimit||r,r),i=n.major.enabled?ZRe(t):[],o=i.length,l=i[0],c=i[o-1],d=[];if(o>s)return JRe(t,d,i,o/s),d;const m=XRe(i,t,s);if(o>0){let h,p;const b=o>1?Math.round((c-l)/(o-1)):null;for(cb(t,d,m,Jt(b)?0:l-b,l),h=0,p=o-1;h<p;h++)cb(t,d,m,i[h],i[h+1]);return cb(t,d,m,c,Jt(b)?t.length:c+b),d}return cb(t,d,m),d}function QRe(e){const t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),s=e._maxLength/n;return Math.floor(Math.min(r,s))}function XRe(e,t,n){const r=eze(e),s=t.length/n;if(!r)return Math.max(s,1);const i=L$e(r);for(let o=0,l=i.length-1;o<l;o++){const c=i[o];if(c>s)return c}return Math.max(s,1)}function ZRe(e){const t=[];let n,r;for(n=0,r=e.length;n<r;n++)e[n].major&&t.push(n);return t}function JRe(e,t,n,r){let s=0,i=n[0],o;for(r=Math.ceil(r),o=0;o<e.length;o++)o===i&&(t.push(e[o]),s++,i=n[s*r])}function cb(e,t,n,r,s){const i=Lt(r,0),o=Math.min(Lt(s,e.length),e.length);let l=0,c,d,m;for(n=Math.ceil(n),s&&(c=s-r,n=c/Math.floor(c/n)),m=i;m<0;)l++,m=Math.round(i+l*n);for(d=Math.max(i,0);d<o;d++)d===m&&(t.push(e[d]),l++,m=Math.round(i+l*n))}function eze(e){const t=e.length;let n,r;if(t<2)return!1;for(r=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==r)return!1;return r}const tze=e=>e==="left"?"right":e==="right"?"left":e,aF=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,rF=(e,t)=>Math.min(t||e,e);function sF(e,t){const n=[],r=e.length/t,s=e.length;let i=0;for(;i<s;i+=r)n.push(e[Math.floor(i)]);return n}function nze(e,t,n){const r=e.ticks.length,s=Math.min(t,r-1),i=e._startPixel,o=e._endPixel,l=1e-6;let c=e.getPixelForTick(s),d;if(!(n&&(r===1?d=Math.max(c-i,o-c):t===0?d=(e.getPixelForTick(1)-c)/2:d=(c-e.getPixelForTick(s-1))/2,c+=s<t?d:-d,c<i-l||c>o+l)))return c}function aze(e,t){on(e,n=>{const r=n.gc,s=r.length/2;let i;if(s>t){for(i=0;i<s;++i)delete n.data[r[i]];r.splice(0,s)}})}function gg(e){return e.drawTicks?e.tickLength:0}function iF(e,t){if(!e.display)return 0;const n=dr(e.font,t),r=Ks(e.padding);return(_a(e.text)?e.text.length:1)*n.lineHeight+r.height}function rze(e,t){return Nu(e,{scale:t,type:"scale"})}function sze(e,t,n){return Nu(e,{tick:n,index:t,type:"tick"})}function ize(e,t,n){let r=pP(e);return(n&&t!=="right"||!n&&t==="right")&&(r=tze(r)),r}function oze(e,t,n,r){const{top:s,left:i,bottom:o,right:l,chart:c}=e,{chartArea:d,scales:m}=c;let h=0,p,b,v;const x=o-s,w=l-i;if(e.isHorizontal()){if(b=rr(r,i,l),Bt(n)){const j=Object.keys(n)[0],C=n[j];v=m[j].getPixelForValue(C)+x-t}else n==="center"?v=(d.bottom+d.top)/2+x-t:v=aF(e,n,t);p=l-i}else{if(Bt(n)){const j=Object.keys(n)[0],C=n[j];b=m[j].getPixelForValue(C)-w+t}else n==="center"?b=(d.left+d.right)/2-w+t:b=aF(e,n,t);v=rr(r,o,s),h=n==="left"?-Aa:Aa}return{titleX:b,titleY:v,maxWidth:p,rotation:h}}class Mf extends Cl{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:r,_suggestedMax:s}=this;return t=Di(t,Number.POSITIVE_INFINITY),n=Di(n,Number.NEGATIVE_INFINITY),r=Di(r,Number.POSITIVE_INFINITY),s=Di(s,Number.NEGATIVE_INFINITY),{min:Di(t,r),max:Di(n,s),minDefined:Ys(t),maxDefined:Ys(n)}}getMinMax(t){let{min:n,max:r,minDefined:s,maxDefined:i}=this.getUserBounds(),o;if(s&&i)return{min:n,max:r};const l=this.getMatchingVisibleMetas();for(let c=0,d=l.length;c<d;++c)o=l[c].controller.getMinMax(this,t),s||(n=Math.min(n,o.min)),i||(r=Math.max(r,o.max));return n=i&&n>r?r:n,r=s&&n>r?n:r,{min:Di(n,Di(r,n)),max:Di(r,Di(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){_n(this.options.beforeUpdate,[this])}update(t,n,r){const{beginAtZero:s,grace:i,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=c6e(this,i,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?sF(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=KRe(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,t=!t),this._startPixel=n,this._endPixel=r,this._reversePixels=t,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){_n(this.options.afterUpdate,[this])}beforeSetDimensions(){_n(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){_n(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),_n(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){_n(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let r,s,i;for(r=0,s=t.length;r<s;r++)i=t[r],i.label=_n(n.callback,[i.value,r,t],this)}afterTickToLabelConversion(){_n(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){_n(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,r=rF(this.ticks.length,t.ticks.maxTicksLimit),s=n.minRotation||0,i=n.maxRotation;let o=s,l,c,d;if(!this._isVisible()||!n.display||s>=i||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const m=this._getLabelSizes(),h=m.widest.width,p=m.highest.height,b=cr(this.chart.width-h,0,this.maxWidth);l=t.offset?this.maxWidth/r:b/(r-1),h+6>l&&(l=b/(r-(t.offset?.5:1)),c=this.maxHeight-gg(t.grid)-n.padding-iF(t.title,this.chart.options.font),d=Math.sqrt(h*h+p*p),o=O$e(Math.min(Math.asin(cr((m.highest.height+6)/l,-1,1)),Math.asin(cr(c/d,-1,1))-Math.asin(cr(p/d,-1,1)))),o=Math.max(s,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){_n(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){_n(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:r,title:s,grid:i}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const c=iF(s,n.options.font);if(l?(t.width=this.maxWidth,t.height=gg(i)+c):(t.height=this.maxHeight,t.width=gg(i)+c),r.display&&this.ticks.length){const{first:d,last:m,widest:h,highest:p}=this._getLabelSizes(),b=r.padding*2,v=Vo(this.labelRotation),x=Math.cos(v),w=Math.sin(v);if(l){const j=r.mirror?0:w*h.width+x*p.height;t.height=Math.min(this.maxHeight,t.height+j+b)}else{const j=r.mirror?0:x*h.width+w*p.height;t.width=Math.min(this.maxWidth,t.width+j+b)}this._calculatePadding(d,m,w,x)}}this._handleMargins(),l?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,r,s){const{ticks:{align:i,padding:o},position:l}=this.options,c=this.labelRotation!==0,d=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const m=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,b=0;c?d?(p=s*t.width,b=r*n.height):(p=r*t.height,b=s*n.width):i==="start"?b=n.width:i==="end"?p=t.width:i!=="inner"&&(p=t.width/2,b=n.width/2),this.paddingLeft=Math.max((p-m+o)*this.width/(this.width-m),0),this.paddingRight=Math.max((b-h+o)*this.width/(this.width-h),0)}else{let m=n.height/2,h=t.height/2;i==="start"?(m=0,h=t.height):i==="end"&&(m=n.height,h=0),this.paddingTop=m+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){_n(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,r;for(n=0,r=t.length;n<r;n++)Jt(t[n].label)&&(t.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=sF(r,n)),this._labelSizes=t=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,r){const{ctx:s,_longestTextCache:i}=this,o=[],l=[],c=Math.floor(n/rF(n,r));let d=0,m=0,h,p,b,v,x,w,j,C,S,_,E;for(h=0;h<n;h+=c){if(v=t[h].label,x=this._resolveTickFontOptions(h),s.font=w=x.string,j=i[w]=i[w]||{data:{},gc:[]},C=x.lineHeight,S=_=0,!Jt(v)&&!_a(v))S=DU(s,j.data,j.gc,S,v),_=C;else if(_a(v))for(p=0,b=v.length;p<b;++p)E=v[p],!Jt(E)&&!_a(E)&&(S=DU(s,j.data,j.gc,S,E),_+=C);o.push(S),l.push(_),d=Math.max(S,d),m=Math.max(_,m)}aze(i,n);const A=o.indexOf(d),T=l.indexOf(m),R=U=>({width:o[U]||0,height:l[U]||0});return{first:R(0),last:R(n-1),widest:R(A),highest:R(T),widths:o,heights:l}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return I$e(this._alignToPixels?ld(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const r=n[t];return r.$context||(r.$context=sze(this.getContext(),t,r))}return this.$context||(this.$context=rze(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=Vo(this.labelRotation),r=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=t.autoSkipPadding||0,l=i?i.widest.width+o:0,c=i?i.highest.height+o:0;return this.isHorizontal()?c*r>l*s?l/r:c/s:c*s<l*r?c/r:l/s}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,r=this.chart,s=this.options,{grid:i,position:o,border:l}=s,c=i.offset,d=this.isHorizontal(),h=this.ticks.length+(c?1:0),p=gg(i),b=[],v=l.setContext(this.getContext()),x=v.display?v.width:0,w=x/2,j=function(K){return ld(r,K,x)};let C,S,_,E,A,T,R,U,W,I,M,H;if(o==="top")C=j(this.bottom),T=this.bottom-p,U=C-w,I=j(t.top)+w,H=t.bottom;else if(o==="bottom")C=j(this.top),I=t.top,H=j(t.bottom)-w,T=C+w,U=this.top+p;else if(o==="left")C=j(this.right),A=this.right-p,R=C-w,W=j(t.left)+w,M=t.right;else if(o==="right")C=j(this.left),W=t.left,M=j(t.right)-w,A=C+w,R=this.left+p;else if(n==="x"){if(o==="center")C=j((t.top+t.bottom)/2+.5);else if(Bt(o)){const K=Object.keys(o)[0],B=o[K];C=j(this.chart.scales[K].getPixelForValue(B))}I=t.top,H=t.bottom,T=C+w,U=T+p}else if(n==="y"){if(o==="center")C=j((t.left+t.right)/2);else if(Bt(o)){const K=Object.keys(o)[0],B=o[K];C=j(this.chart.scales[K].getPixelForValue(B))}A=C-w,R=A-p,W=t.left,M=t.right}const q=Lt(s.ticks.maxTicksLimit,h),ae=Math.max(1,Math.ceil(h/q));for(S=0;S<h;S+=ae){const K=this.getContext(S),B=i.setContext(K),X=l.setContext(K),le=B.lineWidth,ue=B.color,J=X.dash||[],ne=X.dashOffset,pe=B.tickWidth,we=B.tickColor,ye=B.tickBorderDash||[],Te=B.tickBorderDashOffset;_=nze(this,S,c),_!==void 0&&(E=ld(r,_,le),d?A=R=W=M=E:T=U=I=H=E,b.push({tx1:A,ty1:T,tx2:R,ty2:U,x1:W,y1:I,x2:M,y2:H,width:le,color:ue,borderDash:J,borderDashOffset:ne,tickWidth:pe,tickColor:we,tickBorderDash:ye,tickBorderDashOffset:Te}))}return this._ticksLength=h,this._borderValue=C,b}_computeLabelItems(t){const n=this.axis,r=this.options,{position:s,ticks:i}=r,o=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:d,padding:m,mirror:h}=i,p=gg(r.grid),b=p+m,v=h?-m:b,x=-Vo(this.labelRotation),w=[];let j,C,S,_,E,A,T,R,U,W,I,M,H="middle";if(s==="top")A=this.bottom-v,T=this._getXAxisLabelAlignment();else if(s==="bottom")A=this.top+v,T=this._getXAxisLabelAlignment();else if(s==="left"){const ae=this._getYAxisLabelAlignment(p);T=ae.textAlign,E=ae.x}else if(s==="right"){const ae=this._getYAxisLabelAlignment(p);T=ae.textAlign,E=ae.x}else if(n==="x"){if(s==="center")A=(t.top+t.bottom)/2+b;else if(Bt(s)){const ae=Object.keys(s)[0],K=s[ae];A=this.chart.scales[ae].getPixelForValue(K)+b}T=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")E=(t.left+t.right)/2-b;else if(Bt(s)){const ae=Object.keys(s)[0],K=s[ae];E=this.chart.scales[ae].getPixelForValue(K)}T=this._getYAxisLabelAlignment(p).textAlign}n==="y"&&(c==="start"?H="top":c==="end"&&(H="bottom"));const q=this._getLabelSizes();for(j=0,C=l.length;j<C;++j){S=l[j],_=S.label;const ae=i.setContext(this.getContext(j));R=this.getPixelForTick(j)+i.labelOffset,U=this._resolveTickFontOptions(j),W=U.lineHeight,I=_a(_)?_.length:1;const K=I/2,B=ae.color,X=ae.textStrokeColor,le=ae.textStrokeWidth;let ue=T;o?(E=R,T==="inner"&&(j===C-1?ue=this.options.reverse?"left":"right":j===0?ue=this.options.reverse?"right":"left":ue="center"),s==="top"?d==="near"||x!==0?M=-I*W+W/2:d==="center"?M=-q.highest.height/2-K*W+W:M=-q.highest.height+W/2:d==="near"||x!==0?M=W/2:d==="center"?M=q.highest.height/2-K*W:M=q.highest.height-I*W,h&&(M*=-1),x!==0&&!ae.showLabelBackdrop&&(E+=W/2*Math.sin(x))):(A=R,M=(1-I)*W/2);let J;if(ae.showLabelBackdrop){const ne=Ks(ae.backdropPadding),pe=q.heights[j],we=q.widths[j];let ye=M-ne.top,Te=0-ne.left;switch(H){case"middle":ye-=pe/2;break;case"bottom":ye-=pe;break}switch(T){case"center":Te-=we/2;break;case"right":Te-=we;break;case"inner":j===C-1?Te-=we:j>0&&(Te-=we/2);break}J={left:Te,top:ye,width:we+ne.width,height:pe+ne.height,color:ae.backdropColor}}w.push({label:_,font:U,textOffset:M,options:{rotation:x,color:B,strokeColor:X,strokeWidth:le,textAlign:ue,textBaseline:H,translation:[E,A],backdrop:J}})}return w}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-Vo(this.labelRotation))return t==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:r,mirror:s,padding:i}}=this.options,o=this._getLabelSizes(),l=t+i,c=o.widest.width;let d,m;return n==="left"?s?(m=this.right+i,r==="near"?d="left":r==="center"?(d="center",m+=c/2):(d="right",m+=c)):(m=this.right-l,r==="near"?d="right":r==="center"?(d="center",m-=c/2):(d="left",m=this.left)):n==="right"?s?(m=this.left+i,r==="near"?d="right":r==="center"?(d="center",m-=c/2):(d="left",m-=c)):(m=this.left+l,r==="near"?d="left":r==="center"?(d="center",m+=c/2):(d="right",m=this.right)):d="right",{textAlign:d,x:m}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:r,top:s,width:i,height:o}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(r,s,i,o),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(i=>i.value===t);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){const n=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let i,o;const l=(c,d,m)=>{!m.width||!m.color||(r.save(),r.lineWidth=m.width,r.strokeStyle=m.color,r.setLineDash(m.borderDash||[]),r.lineDashOffset=m.borderDashOffset,r.beginPath(),r.moveTo(c.x,c.y),r.lineTo(d.x,d.y),r.stroke(),r.restore())};if(n.display)for(i=0,o=s.length;i<o;++i){const c=s[i];n.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),n.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:r,grid:s}}=this,i=r.setContext(this.getContext()),o=r.display?i.width:0;if(!o)return;const l=s.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let d,m,h,p;this.isHorizontal()?(d=ld(t,this.left,o)-o/2,m=ld(t,this.right,l)+l/2,h=p=c):(h=ld(t,this.top,o)-o/2,p=ld(t,this.bottom,l)+l/2,d=m=c),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(d,h),n.lineTo(m,p),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&bP(r,s);const i=this.getLabelItems(t);for(const o of i){const l=o.options,c=o.font,d=o.label,m=o.textOffset;Op(r,d,0,m,c,l)}s&&vP(r)}drawTitle(){const{ctx:t,options:{position:n,title:r,reverse:s}}=this;if(!r.display)return;const i=dr(r.font),o=Ks(r.padding),l=r.align;let c=i.lineHeight/2;n==="bottom"||n==="center"||Bt(n)?(c+=o.bottom,_a(r.text)&&(c+=i.lineHeight*(r.text.length-1))):c+=o.top;const{titleX:d,titleY:m,maxWidth:h,rotation:p}=oze(this,c,n,l);Op(t,r.text,0,0,i,{color:r.color,maxWidth:h,rotation:p,textAlign:ize(l,n,s),textBaseline:"middle",translation:[d,m]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,r=Lt(t.grid&&t.grid.z,-1),s=Lt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Mf.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let i,o;for(i=0,o=n.length;i<o;++i){const l=n[i];l[r]===this.id&&(!t||l.type===t)&&s.push(l)}return s}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return dr(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class db{constructor(t,n,r){this.type=t,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let r;dze(n)&&(r=this.register(n));const s=this.items,i=t.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+t);return i in s||(s[i]=t,lze(t,o,r),this.override&&aa.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const n=this.items,r=t.id,s=this.scope;r in n&&delete n[r],s&&r in aa[s]&&(delete aa[s][r],this.override&&delete cu[r])}}function lze(e,t,n){const r=Tp(Object.create(null),[n?aa.get(n):{},aa.get(t),e.defaults]);aa.set(t,r),e.defaultRoutes&&cze(t,e.defaultRoutes),e.descriptors&&aa.describe(t,e.descriptors)}function cze(e,t){Object.keys(t).forEach(n=>{const r=n.split("."),s=r.pop(),i=[e].concat(r).join("."),o=t[n].split("."),l=o.pop(),c=o.join(".");aa.route(i,s,c,l)})}function dze(e){return"id"in e&&"defaults"in e}class uze{constructor(){this.controllers=new db(_j,"datasets",!0),this.elements=new db(Cl,"elements"),this.plugins=new db(Object,"plugins"),this.scales=new db(Mf,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,r){[...n].forEach(s=>{const i=r||this._getRegistryForType(s);r||i.isForType(s)||i===this.plugins&&s.id?this._exec(t,i,s):on(s,o=>{const l=r||this._getRegistryForType(o);this._exec(t,l,o)})})}_exec(t,n,r){const s=hP(t);_n(r["before"+s],[],r),n[t](r),_n(r["after"+s],[],r)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(t))return r}return this.plugins}_get(t,n,r){const s=n.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+r+".");return s}}var Ii=new uze;class mze{constructor(){this._init=void 0}notify(t,n,r,s){if(n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const i=s?this._descriptors(t).filter(s):this._descriptors(t),o=this._notify(i,t,n,r);return n==="afterDestroy"&&(this._notify(i,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),o}_notify(t,n,r,s){s=s||{};for(const i of t){const o=i.plugin,l=o[r],c=[n,s,i.options];if(_n(l,c,o)===!1&&s.cancelable)return!1}return!0}invalidate(){Jt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const r=t&&t.config,s=Lt(r.options&&r.options.plugins,{}),i=fze(r);return s===!1&&!n?[]:gze(t,i,s,n)}_notifyStateChanges(t){const n=this._oldCache||[],r=this._cache,s=(i,o)=>i.filter(l=>!o.some(c=>l.plugin.id===c.plugin.id));this._notify(s(n,r),t,"stop"),this._notify(s(r,n),t,"start")}}function fze(e){const t={},n=[],r=Object.keys(Ii.plugins.items);for(let i=0;i<r.length;i++)n.push(Ii.getPlugin(r[i]));const s=e.plugins||[];for(let i=0;i<s.length;i++){const o=s[i];n.indexOf(o)===-1&&(n.push(o),t[o.id]=!0)}return{plugins:n,localIds:t}}function hze(e,t){return!t&&e===!1?null:e===!0?{}:e}function gze(e,{plugins:t,localIds:n},r,s){const i=[],o=e.getContext();for(const l of t){const c=l.id,d=hze(r[c],s);d!==null&&i.push({plugin:l,options:pze(e.config,{plugin:l,local:n[c]},d,o)})}return i}function pze(e,{plugin:t,local:n},r,s){const i=e.pluginScopeKeys(t),o=e.getOptionScopes(r,i);return n&&t.defaults&&o.push(t.defaults),e.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function MT(e,t){const n=aa.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function xze(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function yze(e,t){return e===t?"_index_":"_value_"}function oF(e){if(e==="x"||e==="y"||e==="r")return e}function bze(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function IT(e,...t){if(oF(e))return e;for(const n of t){const r=n.axis||bze(n.position)||e.length>1&&oF(e[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function lF(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function vze(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(r=>r.xAxisID===e||r.yAxisID===e);if(n.length)return lF(e,"x",n[0])||lF(e,"y",n[0])}return{}}function wze(e,t){const n=cu[e.type]||{scales:{}},r=t.scales||{},s=MT(e.type,t),i=Object.create(null);return Object.keys(r).forEach(o=>{const l=r[o];if(!Bt(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=IT(o,l,vze(o,e),aa.scales[l.type]),d=yze(c,s),m=n.scales||{};i[o]=Yg(Object.create(null),[{axis:c},l,m[c],m[d]])}),e.data.datasets.forEach(o=>{const l=o.type||e.type,c=o.indexAxis||MT(l,t),m=(cu[l]||{}).scales||{};Object.keys(m).forEach(h=>{const p=xze(h,c),b=o[p+"AxisID"]||p;i[b]=i[b]||Object.create(null),Yg(i[b],[{axis:p},r[b],m[h]])})}),Object.keys(i).forEach(o=>{const l=i[o];Yg(l,[aa.scales[l.type],aa.scale])}),i}function BQ(e){const t=e.options||(e.options={});t.plugins=Lt(t.plugins,{}),t.scales=wze(e,t)}function HQ(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function Nze(e){return e=e||{},e.data=HQ(e.data),BQ(e),e}const cF=new Map,GQ=new Set;function ub(e,t){let n=cF.get(e);return n||(n=t(),cF.set(e,n),GQ.add(n)),n}const pg=(e,t,n)=>{const r=lu(t,n);r!==void 0&&e.add(r)};class jze{constructor(t){this._config=Nze(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=HQ(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),BQ(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return ub(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return ub(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return ub(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,r=this.type;return ub(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const r=this._scopeCache;let s=r.get(t);return(!s||n)&&(s=new Map,r.set(t,s)),s}getOptionScopes(t,n,r){const{options:s,type:i}=this,o=this._cachedScopes(t,r),l=o.get(n);if(l)return l;const c=new Set;n.forEach(m=>{t&&(c.add(t),m.forEach(h=>pg(c,t,h))),m.forEach(h=>pg(c,s,h)),m.forEach(h=>pg(c,cu[i]||{},h)),m.forEach(h=>pg(c,aa,h)),m.forEach(h=>pg(c,DT,h))});const d=Array.from(c);return d.length===0&&d.push(Object.create(null)),GQ.has(n)&&o.set(n,d),d}chartOptionScopes(){const{options:t,type:n}=this;return[t,cu[n]||{},aa.datasets[n]||{},{type:n},aa,DT]}resolveNamedOptions(t,n,r,s=[""]){const i={$shared:!0},{resolver:o,subPrefixes:l}=dF(this._resolverCache,t,s);let c=o;if(Sze(o,n)){i.$shared=!1,r=jc(r)?r():r;const d=this.createResolver(t,r,l);c=mf(o,r,d)}for(const d of n)i[d]=c[d];return i}createResolver(t,n,r=[""],s){const{resolver:i}=dF(this._resolverCache,t,r);return Bt(n)?mf(i,n,void 0,s):i}}function dF(e,t,n){let r=e.get(t);r||(r=new Map,e.set(t,r));const s=n.join();let i=r.get(s);return i||(i={resolver:NP(t,n),subPrefixes:n.filter(l=>!l.toLowerCase().includes("hover"))},r.set(s,i)),i}const Cze=e=>Bt(e)&&Object.getOwnPropertyNames(e).some(t=>jc(e[t]));function Sze(e,t){const{isScriptable:n,isIndexable:r}=_Q(e);for(const s of t){const i=n(s),o=r(s),l=(o||i)&&e[s];if(i&&(jc(l)||Cze(l))||o&&_a(l))return!0}return!1}var _ze="4.5.1";const Aze=["top","bottom","left","right","chartArea"];function uF(e,t){return e==="top"||e==="bottom"||Aze.indexOf(e)===-1&&t==="x"}function mF(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function fF(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),_n(n&&n.onComplete,[e],t)}function Eze(e){const t=e.chart,n=t.options.animation;_n(n&&n.onProgress,[e],t)}function VQ(e){return SP()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const $b={},hF=e=>{const t=VQ(e);return Object.values($b).filter(n=>n.canvas===t).pop()};function Tze(e,t,n){const r=Object.keys(e);for(const s of r){const i=+s;if(i>=t){const o=e[s];delete e[s],(n>0||i>t)&&(e[i+n]=o)}}}function Lze(e,t,n,r){return!n||e.type==="mouseout"?null:r?t:e}let Ej=class{static defaults=aa;static instances=$b;static overrides=cu;static registry=Ii;static version=_ze;static getChart=hF;static register(...t){Ii.add(...t),gF()}static unregister(...t){Ii.remove(...t),gF()}constructor(t,n){const r=this.config=new jze(n),s=VQ(t),i=hF(s);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||YRe(s)),this.platform.updateConfig(r);const l=this.platform.acquireContext(s,o.aspectRatio),c=l&&l.canvas,d=c&&c.height,m=c&&c.width;if(this.id=w$e(),this.ctx=l,this.canvas=c,this.width=m,this.height=d,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new mze,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=U$e(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],$b[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}Mo.listen(this,"complete",fF),Mo.listen(this,"progress",Eze),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:r,height:s,_aspectRatio:i}=this;return Jt(t)?n&&i?i:s?r/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Ii}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():$U(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return OU(this.canvas,this.ctx),this}stop(){return Mo.stop(this),this}resize(t,n){Mo.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const r=this.options,s=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,t,n,i),l=r.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,$U(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),_n(r.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};on(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){const t=this.options,n=t.scales,r=this.scales,s=Object.keys(r).reduce((o,l)=>(o[l]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const l=n[o],c=IT(o,l),d=c==="r",m=c==="x";return{options:l,dposition:d?"chartArea":m?"bottom":"left",dtype:d?"radialLinear":m?"category":"linear"}}))),on(i,o=>{const l=o.options,c=l.id,d=IT(c,l),m=Lt(l.type,o.dtype);(l.position===void 0||uF(l.position,d)!==uF(o.dposition))&&(l.position=o.dposition),s[c]=!0;let h=null;if(c in r&&r[c].type===m)h=r[c];else{const p=Ii.getScale(m);h=new p({id:c,type:m,ctx:this.ctx,chart:this}),r[h.id]=h}h.init(l,t)}),on(s,(o,l)=>{o||delete r[l]}),on(r,o=>{Rs.configure(this,o,o.options),Rs.addBox(this,o)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,r=t.length;if(t.sort((s,i)=>s.index-i.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);t.splice(n,r-n)}this._sortedMetasets=t.slice(0).sort(mF("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((r,s)=>{n.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){const i=n[r];let o=this.getDatasetMeta(r);const l=i.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=l,o.indexAxis=i.indexAxis||MT(l,this.options),o.order=i.order||0,o.index=r,o.label=""+i.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const c=Ii.getController(l),{datasetElementType:d,dataElementType:m}=aa.datasets[l];Object.assign(c,{dataElementType:Ii.getElement(m),datasetElementType:d&&Ii.getElement(d)}),o.controller=new c(this,r),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){on(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let d=0,m=this.data.datasets.length;d<m;d++){const{controller:h}=this.getDatasetMeta(d),p=!s&&i.indexOf(h)===-1;h.buildOrUpdateElements(p),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),s||on(i,d=>{d.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(mF("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){on(this.scales,t=>{Rs.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(t.events);(!CU(n,r)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:i}of n){const o=r==="_removeElements"?-i:i;Tze(t,s,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=i=>new Set(t.filter(o=>o[0]===i).map((o,l)=>l+","+o.splice(1).join(","))),s=r(0);for(let i=1;i<n;i++)if(!CU(s,r(i)))return;return Array.from(s).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Rs.update(this,this.width,this.height,t);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],on(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,i)=>{s._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,jc(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const r=this.getDatasetMeta(t),s={meta:r,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Mo.has(this)?this.attached&&!Mo.running(this)&&Mo.start(this):(this.draw(),fF({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,r=[];let s,i;for(s=0,i=n.length;s<i;++s){const o=n[s];(!t||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,r={meta:t,index:t.index,cancelable:!0},s=W6e(this,t);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&bP(n,s),t.controller.draw(),s&&vP(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(t){return Dp(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,r,s){const i=ARe.modes[n];return typeof i=="function"?i(this,t,r,s):[]}getDatasetMeta(t){const n=this.data.datasets[t],r=this._metasets;let s=r.filter(i=>i&&i._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=Nu(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const r=this.getDatasetMeta(t);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(t,n){const r=this.getDatasetMeta(t);r.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,r){const s=r?"show":"hide",i=this.getDatasetMeta(t),o=i.controller._resolveAnimations(void 0,s);Lp(n)?(i.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(t,r),o.update(i,{visible:r}),this.update(l=>l.datasetIndex===t?s:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),Mo.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),OU(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete $b[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,r=(i,o)=>{n.addEventListener(this,i,o),t[i]=o},s=(i,o,l)=>{i.offsetX=o,i.offsetY=l,this._eventHandler(i)};on(this.options.events,i=>r(i,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,r=(c,d)=>{n.addEventListener(this,c,d),t[c]=d},s=(c,d)=>{t[c]&&(n.removeEventListener(this,c,d),delete t[c])},i=(c,d)=>{this.canvas&&this.resize(c,d)};let o;const l=()=>{s("attach",l),this.attached=!0,this.resize(),r("resize",i),r("detach",o)};o=()=>{this.attached=!1,s("resize",i),this._stop(),this._resize(0,0),r("attach",l)},n.isAttached(this.canvas)?l():o()}unbindEvents(){on(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},on(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,r){const s=r?"set":"remove";let i,o,l,c;for(n==="dataset"&&(i=this.getDatasetMeta(t[0].datasetIndex),i.controller["_"+s+"DatasetHoverStyle"]()),l=0,c=t.length;l<c;++l){o=t[l];const d=o&&this.getDatasetMeta(o.datasetIndex).controller;d&&d[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],r=t.map(({datasetIndex:i,index:o})=>{const l=this.getDatasetMeta(i);if(!l)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:l.data[o],index:o}});!Jv(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(t,n,r){return this._plugins.notify(this,t,n,r)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,r){const s=this.options.hover,i=(c,d)=>c.filter(m=>!d.some(h=>m.datasetIndex===h.datasetIndex&&m.index===h.index)),o=i(n,t),l=r?t:i(t,n);o.length&&this.updateHoverStyle(o,s.mode,!1),l.length&&s.mode&&this.updateHoverStyle(l,s.mode,!0)}_eventHandler(t,n){const r={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},s=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const i=this._handleEvent(t,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(i||r.changed)&&this.render(),this}_handleEvent(t,n,r){const{_active:s=[],options:i}=this,o=n,l=this._getActiveElements(t,s,r,o),c=A$e(t),d=Lze(t,this._lastEvent,r,c);r&&(this._lastEvent=null,_n(i.onHover,[t,l,this],this),c&&_n(i.onClick,[t,l,this],this));const m=!Jv(l,s);return(m||n)&&(this._active=l,this._updateHoverStyles(l,s,n)),this._lastEvent=d,m}_getActiveElements(t,n,r,s){if(t.type==="mouseout")return[];if(!r)return n;const i=this.options.hover;return this.getElementsAtEventForMode(t,i.mode,i,s)}};function gF(){return on(Ej.instances,e=>e._plugins.invalidate())}function kze(e,t,n){const{startAngle:r,x:s,y:i,outerRadius:o,innerRadius:l,options:c}=t,{borderWidth:d,borderJoinStyle:m}=c,h=Math.min(d/o,di(r-n));if(e.beginPath(),e.arc(s,i,o-d/2,r+h/2,n-h/2),l>0){const p=Math.min(d/l,di(r-n));e.arc(s,i,l+d/2,n-p/2,r+p/2,!0)}else{const p=Math.min(d/2,o*di(r-n));if(m==="round")e.arc(s,i,p,n-cn/2,r+cn/2,!0);else if(m==="bevel"){const b=2*p*p,v=-b*Math.cos(n+cn/2)+s,x=-b*Math.sin(n+cn/2)+i,w=b*Math.cos(r+cn/2)+s,j=b*Math.sin(r+cn/2)+i;e.lineTo(v,x),e.lineTo(w,j)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}function Pze(e,t,n){const{startAngle:r,pixelMargin:s,x:i,y:o,outerRadius:l,innerRadius:c}=t;let d=s/l;e.beginPath(),e.arc(i,o,l,r-d,n+d),c>s?(d=s/c,e.arc(i,o,c,n+d,r-d,!0)):e.arc(i,o,s,n+Aa,r-Aa),e.closePath(),e.clip()}function Dze(e){return wP(e,["outerStart","outerEnd","innerStart","innerEnd"])}function Oze(e,t,n,r){const s=Dze(e.options.borderRadius),i=(n-t)/2,o=Math.min(i,r*t/2),l=c=>{const d=(n-Math.min(i,c))*r/2;return cr(c,0,Math.min(i,d))};return{outerStart:l(s.outerStart),outerEnd:l(s.outerEnd),innerStart:cr(s.innerStart,0,o),innerEnd:cr(s.innerEnd,0,o)}}function _m(e,t,n,r){return{x:n+e*Math.cos(t),y:r+e*Math.sin(t)}}function sw(e,t,n,r,s,i){const{x:o,y:l,startAngle:c,pixelMargin:d,innerRadius:m}=t,h=Math.max(t.outerRadius+r+n-d,0),p=m>0?m+r+n+d:0;let b=0;const v=s-c;if(r){const ae=m>0?m-r:0,K=h>0?h-r:0,B=(ae+K)/2,X=B!==0?v*B/(B+r):v;b=(v-X)/2}const x=Math.max(.001,v*h-n/cn)/h,w=(v-x)/2,j=c+w+b,C=s-w-b,{outerStart:S,outerEnd:_,innerStart:E,innerEnd:A}=Oze(t,p,h,C-j),T=h-S,R=h-_,U=j+S/T,W=C-_/R,I=p+E,M=p+A,H=j+E/I,q=C-A/M;if(e.beginPath(),i){const ae=(U+W)/2;if(e.arc(o,l,h,U,ae),e.arc(o,l,h,ae,W),_>0){const le=_m(R,W,o,l);e.arc(le.x,le.y,_,W,C+Aa)}const K=_m(M,C,o,l);if(e.lineTo(K.x,K.y),A>0){const le=_m(M,q,o,l);e.arc(le.x,le.y,A,C+Aa,q+Math.PI)}const B=(C-A/p+(j+E/p))/2;if(e.arc(o,l,p,C-A/p,B,!0),e.arc(o,l,p,B,j+E/p,!0),E>0){const le=_m(I,H,o,l);e.arc(le.x,le.y,E,H+Math.PI,j-Aa)}const X=_m(T,j,o,l);if(e.lineTo(X.x,X.y),S>0){const le=_m(T,U,o,l);e.arc(le.x,le.y,S,j-Aa,U)}}else{e.moveTo(o,l);const ae=Math.cos(U)*h+o,K=Math.sin(U)*h+l;e.lineTo(ae,K);const B=Math.cos(W)*h+o,X=Math.sin(W)*h+l;e.lineTo(B,X)}e.closePath()}function Mze(e,t,n,r,s){const{fullCircles:i,startAngle:o,circumference:l}=t;let c=t.endAngle;if(i){sw(e,t,n,r,c,s);for(let d=0;d<i;++d)e.fill();isNaN(l)||(c=o+(l%Xn||Xn))}return sw(e,t,n,r,c,s),e.fill(),c}function Ize(e,t,n,r,s){const{fullCircles:i,startAngle:o,circumference:l,options:c}=t,{borderWidth:d,borderJoinStyle:m,borderDash:h,borderDashOffset:p,borderRadius:b}=c,v=c.borderAlign==="inner";if(!d)return;e.setLineDash(h||[]),e.lineDashOffset=p,v?(e.lineWidth=d*2,e.lineJoin=m||"round"):(e.lineWidth=d,e.lineJoin=m||"bevel");let x=t.endAngle;if(i){sw(e,t,n,r,x,s);for(let w=0;w<i;++w)e.stroke();isNaN(l)||(x=o+(l%Xn||Xn))}v&&Pze(e,t,x),c.selfJoin&&x-o>=cn&&b===0&&m!=="miter"&&kze(e,t,x),i||(sw(e,t,n,r,x,s),e.stroke())}class $ze extends Cl{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,n,r){const s=this.getProps(["x","y"],r),{angle:i,distance:o}=yQ(s,{x:t,y:n}),{startAngle:l,endAngle:c,innerRadius:d,outerRadius:m,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),p=(this.options.spacing+this.options.borderWidth)/2,b=Lt(h,c-l),v=Pp(i,l,c)&&l!==c,x=b>=Xn||v,w=mc(o,d+p,m+p);return x&&w}getCenterPoint(t){const{x:n,y:r,startAngle:s,endAngle:i,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:c,spacing:d}=this.options,m=(s+i)/2,h=(o+l+d+c)/2;return{x:n+Math.cos(m)*h,y:r+Math.sin(m)*h}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:n,circumference:r}=this,s=(n.offset||0)/4,i=(n.spacing||0)/2,o=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=r>Xn?Math.floor(r/Xn):0,r===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const l=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(cn,r||0)),d=s*c;t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,Mze(t,this,d,i,o),Ize(t,this,d,i,o),t.restore()}}function WQ(e,t,n=t){e.lineCap=Lt(n.borderCapStyle,t.borderCapStyle),e.setLineDash(Lt(n.borderDash,t.borderDash)),e.lineDashOffset=Lt(n.borderDashOffset,t.borderDashOffset),e.lineJoin=Lt(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=Lt(n.borderWidth,t.borderWidth),e.strokeStyle=Lt(n.borderColor,t.borderColor)}function Rze(e,t,n){e.lineTo(n.x,n.y)}function zze(e){return e.stepped?e6e:e.tension||e.cubicInterpolationMode==="monotone"?t6e:Rze}function qQ(e,t,n={}){const r=e.length,{start:s=0,end:i=r-1}=n,{start:o,end:l}=t,c=Math.max(s,o),d=Math.min(i,l),m=s<o&&i<o||s>l&&i>l;return{count:r,start:c,loop:t.loop,ilen:d<c&&!m?r+d-c:d-c}}function Uze(e,t,n,r){const{points:s,options:i}=t,{count:o,start:l,loop:c,ilen:d}=qQ(s,n,r),m=zze(i);let{move:h=!0,reverse:p}=r||{},b,v,x;for(b=0;b<=d;++b)v=s[(l+(p?d-b:b))%o],!v.skip&&(h?(e.moveTo(v.x,v.y),h=!1):m(e,x,v,p,i.stepped),x=v);return c&&(v=s[(l+(p?d:0))%o],m(e,x,v,p,i.stepped)),!!c}function Fze(e,t,n,r){const s=t.points,{count:i,start:o,ilen:l}=qQ(s,n,r),{move:c=!0,reverse:d}=r||{};let m=0,h=0,p,b,v,x,w,j;const C=_=>(o+(d?l-_:_))%i,S=()=>{x!==w&&(e.lineTo(m,w),e.lineTo(m,x),e.lineTo(m,j))};for(c&&(b=s[C(0)],e.moveTo(b.x,b.y)),p=0;p<=l;++p){if(b=s[C(p)],b.skip)continue;const _=b.x,E=b.y,A=_|0;A===v?(E<x?x=E:E>w&&(w=E),m=(h*m+_)/++h):(S(),e.lineTo(_,E),v=A,h=0,x=w=E),j=E}S()}function $T(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?Fze:Uze}function Bze(e){return e.stepped?D6e:e.tension||e.cubicInterpolationMode==="monotone"?O6e:vd}function Hze(e,t,n,r){let s=t._path;s||(s=t._path=new Path2D,t.path(s,n,r)&&s.closePath()),WQ(e,t.options),e.stroke(s)}function Gze(e,t,n,r){const{segments:s,options:i}=t,o=$T(t);for(const l of s)WQ(e,i,l.style),e.beginPath(),o(e,t,l,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}const Vze=typeof Path2D=="function";function Wze(e,t,n,r){Vze&&!t.options.segment?Hze(e,t,n,r):Gze(e,t,n,r)}class qze extends Cl{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const s=r.spanGaps?this._loop:this._fullLoop;S6e(this._points,r,t,s,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=B6e(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,r=t.length;return r&&n[t[r-1].end]}interpolate(t,n){const r=this.options,s=t[n],i=this.points,o=z6e(this,{property:n,start:s,end:s});if(!o.length)return;const l=[],c=Bze(r);let d,m;for(d=0,m=o.length;d<m;++d){const{start:h,end:p}=o[d],b=i[h],v=i[p];if(b===v){l.push(b);continue}const x=Math.abs((s-b[n])/(v[n]-b[n])),w=c(b,v,x,r.stepped);w[n]=t[n],l.push(w)}return l.length===1?l[0]:l}pathSegment(t,n,r){return $T(this)(t,this,n,r)}path(t,n,r){const s=this.segments,i=$T(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const l of s)o&=i(t,this,l,{start:n,end:n+r-1});return!!o}draw(t,n,r,s){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(t.save(),Wze(t,this,r,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function pF(e,t,n,r){const s=e.options,{[n]:i}=e.getProps([n],r);return Math.abs(t-i)<s.radius+s.hitRadius}class Yze extends Cl{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,n,r){const s=this.options,{x:i,y:o}=this.getProps(["x","y"],r);return Math.pow(t-i,2)+Math.pow(n-o,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,n){return pF(this,t,"x",n)}inYRange(t,n){return pF(this,t,"y",n)}getCenterPoint(t){const{x:n,y:r}=this.getProps(["x","y"],t);return{x:n,y:r}}size(t){t=t||this.options||{};let n=t.radius||0;n=Math.max(n,n&&t.hoverRadius||0);const r=n&&t.borderWidth||0;return(n+r)*2}draw(t,n){const r=this.options;this.skip||r.radius<.1||!Dp(this,n,this.size(r)/2)||(t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.fillStyle=r.backgroundColor,OT(t,r,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function YQ(e,t){const{x:n,y:r,base:s,width:i,height:o}=e.getProps(["x","y","base","width","height"],t);let l,c,d,m,h;return e.horizontal?(h=o/2,l=Math.min(n,s),c=Math.max(n,s),d=r-h,m=r+h):(h=i/2,l=n-h,c=n+h,d=Math.min(r,s),m=Math.max(r,s)),{left:l,top:d,right:c,bottom:m}}function hc(e,t,n,r){return e?0:cr(t,n,r)}function Kze(e,t,n){const r=e.options.borderWidth,s=e.borderSkipped,i=SQ(r);return{t:hc(s.top,i.top,0,n),r:hc(s.right,i.right,0,t),b:hc(s.bottom,i.bottom,0,n),l:hc(s.left,i.left,0,t)}}function Qze(e,t,n){const{enableBorderRadius:r}=e.getProps(["enableBorderRadius"]),s=e.options.borderRadius,i=Vm(s),o=Math.min(t,n),l=e.borderSkipped,c=r||Bt(s);return{topLeft:hc(!c||l.top||l.left,i.topLeft,0,o),topRight:hc(!c||l.top||l.right,i.topRight,0,o),bottomLeft:hc(!c||l.bottom||l.left,i.bottomLeft,0,o),bottomRight:hc(!c||l.bottom||l.right,i.bottomRight,0,o)}}function Xze(e){const t=YQ(e),n=t.right-t.left,r=t.bottom-t.top,s=Kze(e,n/2,r/2),i=Qze(e,n/2,r/2);return{outer:{x:t.left,y:t.top,w:n,h:r,radius:i},inner:{x:t.left+s.l,y:t.top+s.t,w:n-s.l-s.r,h:r-s.t-s.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,i.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(s.b,s.r))}}}}function lA(e,t,n,r){const s=t===null,i=n===null,l=e&&!(s&&i)&&YQ(e,r);return l&&(s||mc(t,l.left,l.right))&&(i||mc(n,l.top,l.bottom))}function Zze(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function Jze(e,t){e.rect(t.x,t.y,t.w,t.h)}function cA(e,t,n={}){const r=e.x!==n.x?-t:0,s=e.y!==n.y?-t:0,i=(e.x+e.w!==n.x+n.w?t:0)-r,o=(e.y+e.h!==n.y+n.h?t:0)-s;return{x:e.x+r,y:e.y+s,w:e.w+i,h:e.h+o,radius:e.radius}}class e7e extends Cl{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:n,options:{borderColor:r,backgroundColor:s}}=this,{inner:i,outer:o}=Xze(this),l=Zze(o.radius)?nw:Jze;t.save(),(o.w!==i.w||o.h!==i.h)&&(t.beginPath(),l(t,cA(o,n,i)),t.clip(),l(t,cA(i,-n,o)),t.fillStyle=r,t.fill("evenodd")),t.beginPath(),l(t,cA(i,n)),t.fillStyle=s,t.fill(),t.restore()}inRange(t,n,r){return lA(this,t,n,r)}inXRange(t,n){return lA(this,t,null,n)}inYRange(t,n){return lA(this,null,t,n)}getCenterPoint(t){const{x:n,y:r,base:s,horizontal:i}=this.getProps(["x","y","base","horizontal"],t);return{x:i?(n+s)/2:n,y:i?r:(r+s)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}const xF=(e,t)=>{let{boxHeight:n=t,boxWidth:r=t}=e;return e.usePointStyle&&(n=Math.min(n,t),r=e.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(t,n)}},t7e=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class yF extends Cl{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,r){this.maxWidth=t,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=_n(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(r=>t.filter(r,this.chart.data))),t.sort&&(n=n.sort((r,s)=>t.sort(r,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const r=t.labels,s=dr(r.font),i=s.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=xF(r,i);let d,m;n.font=s.string,this.isHorizontal()?(d=this.maxWidth,m=this._fitRows(o,i,l,c)+10):(m=this.maxHeight,d=this._fitCols(o,s,l,c)+10),this.width=Math.min(d,t.maxWidth||this.maxWidth),this.height=Math.min(m,t.maxHeight||this.maxHeight)}_fitRows(t,n,r,s){const{ctx:i,maxWidth:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.lineWidths=[0],m=s+l;let h=t;i.textAlign="left",i.textBaseline="middle";let p=-1,b=-m;return this.legendItems.forEach((v,x)=>{const w=r+n/2+i.measureText(v.text).width;(x===0||d[d.length-1]+w+2*l>o)&&(h+=m,d[d.length-(x>0?0:1)]=0,b+=m,p++),c[x]={left:0,top:b,row:p,width:w,height:s},d[d.length-1]+=w+l}),h}_fitCols(t,n,r,s){const{ctx:i,maxHeight:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.columnSizes=[],m=o-t;let h=l,p=0,b=0,v=0,x=0;return this.legendItems.forEach((w,j)=>{const{itemWidth:C,itemHeight:S}=n7e(r,n,i,w,s);j>0&&b+S+2*l>m&&(h+=p+l,d.push({width:p,height:b}),v+=p+l,x++,p=b=0),c[j]={left:v,top:b,col:x,width:C,height:S},p=Math.max(p,C),b+=S+l}),h+=p,d.push({width:p,height:b}),h}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:s},rtl:i}}=this,o=Wm(i,this.left,this.width);if(this.isHorizontal()){let l=0,c=rr(r,this.left+s,this.right-this.lineWidths[l]);for(const d of n)l!==d.row&&(l=d.row,c=rr(r,this.left+s,this.right-this.lineWidths[l])),d.top+=this.top+t+s,d.left=o.leftForLtr(o.x(c),d.width),c+=d.width+s}else{let l=0,c=rr(r,this.top+t+s,this.bottom-this.columnSizes[l].height);for(const d of n)d.col!==l&&(l=d.col,c=rr(r,this.top+t+s,this.bottom-this.columnSizes[l].height)),d.top=c,d.left+=this.left+s,d.left=o.leftForLtr(o.x(d.left),d.width),c+=d.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;bP(t,this),this._draw(),vP(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:r,ctx:s}=this,{align:i,labels:o}=t,l=aa.color,c=Wm(t.rtl,this.left,this.width),d=dr(o.font),{padding:m}=o,h=d.size,p=h/2;let b;this.drawTitle(),s.textAlign=c.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=d.string;const{boxWidth:v,boxHeight:x,itemHeight:w}=xF(o,h),j=function(A,T,R){if(isNaN(v)||v<=0||isNaN(x)||x<0)return;s.save();const U=Lt(R.lineWidth,1);if(s.fillStyle=Lt(R.fillStyle,l),s.lineCap=Lt(R.lineCap,"butt"),s.lineDashOffset=Lt(R.lineDashOffset,0),s.lineJoin=Lt(R.lineJoin,"miter"),s.lineWidth=U,s.strokeStyle=Lt(R.strokeStyle,l),s.setLineDash(Lt(R.lineDash,[])),o.usePointStyle){const W={radius:x*Math.SQRT2/2,pointStyle:R.pointStyle,rotation:R.rotation,borderWidth:U},I=c.xPlus(A,v/2),M=T+p;CQ(s,W,I,M,o.pointStyleWidth&&v)}else{const W=T+Math.max((h-x)/2,0),I=c.leftForLtr(A,v),M=Vm(R.borderRadius);s.beginPath(),Object.values(M).some(H=>H!==0)?nw(s,{x:I,y:W,w:v,h:x,radius:M}):s.rect(I,W,v,x),s.fill(),U!==0&&s.stroke()}s.restore()},C=function(A,T,R){Op(s,R.text,A,T+w/2,d,{strikethrough:R.hidden,textAlign:c.textAlign(R.textAlign)})},S=this.isHorizontal(),_=this._computeTitleHeight();S?b={x:rr(i,this.left+m,this.right-r[0]),y:this.top+m+_,line:0}:b={x:this.left+m,y:rr(i,this.top+_+m,this.bottom-n[0].height),line:0},kQ(this.ctx,t.textDirection);const E=w+m;this.legendItems.forEach((A,T)=>{s.strokeStyle=A.fontColor,s.fillStyle=A.fontColor;const R=s.measureText(A.text).width,U=c.textAlign(A.textAlign||(A.textAlign=o.textAlign)),W=v+p+R;let I=b.x,M=b.y;c.setWidth(this.width),S?T>0&&I+W+m>this.right&&(M=b.y+=E,b.line++,I=b.x=rr(i,this.left+m,this.right-r[b.line])):T>0&&M+E>this.bottom&&(I=b.x=I+n[b.line].width+m,b.line++,M=b.y=rr(i,this.top+_+m,this.bottom-n[b.line].height));const H=c.x(I);if(j(H,M,A),I=F$e(U,I+v+p,S?I+W:this.right,t.rtl),C(c.x(I),M,A),S)b.x+=W+m;else if(typeof A.text!="string"){const q=d.lineHeight;b.y+=KQ(A,q)+m}else b.y+=E}),PQ(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,r=dr(n.font),s=Ks(n.padding);if(!n.display)return;const i=Wm(t.rtl,this.left,this.width),o=this.ctx,l=n.position,c=r.size/2,d=s.top+c;let m,h=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),m=this.top+d,h=rr(t.align,h,this.right-p);else{const v=this.columnSizes.reduce((x,w)=>Math.max(x,w.height),0);m=d+rr(t.align,this.top,this.bottom-v-t.labels.padding-this._computeTitleHeight())}const b=rr(l,h,h+p);o.textAlign=i.textAlign(pP(l)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,Op(o,n.text,b,m,r)}_computeTitleHeight(){const t=this.options.title,n=dr(t.font),r=Ks(t.padding);return t.display?n.lineHeight+r.height:0}_getLegendItemAt(t,n){let r,s,i;if(mc(t,this.left,this.right)&&mc(n,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(s=i[r],mc(t,s.left,s.left+s.width)&&mc(n,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(t){const n=this.options;if(!s7e(t.type,n))return;const r=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const s=this._hoveredItem,i=t7e(s,r);s&&!i&&_n(n.onLeave,[t,s,this],this),this._hoveredItem=r,r&&!i&&_n(n.onHover,[t,r,this],this)}else r&&_n(n.onClick,[t,r,this],this)}}function n7e(e,t,n,r,s){const i=a7e(r,e,t,n),o=r7e(s,r,t.lineHeight);return{itemWidth:i,itemHeight:o}}function a7e(e,t,n,r){let s=e.text;return s&&typeof s!="string"&&(s=s.reduce((i,o)=>i.length>o.length?i:o)),t+n.size/2+r.measureText(s).width}function r7e(e,t,n){let r=e;return typeof t.text!="string"&&(r=KQ(t,n)),r}function KQ(e,t){const n=e.text?e.text.length:0;return t*n}function s7e(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var i7e={id:"legend",_element:yF,start(e,t,n){const r=e.legend=new yF({ctx:e.ctx,options:n,chart:e});Rs.configure(e,r,n),Rs.addBox(e,r)},stop(e){Rs.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const r=e.legend;Rs.configure(e,r,n),r.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const r=t.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),t.hidden=!0):(s.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:i,useBorderRadius:o,borderRadius:l}}=e.legend.options;return e._getSortedDatasetMetas().map(c=>{const d=c.controller.getStyle(n?0:void 0),m=Ks(d.borderWidth);return{text:t[c.index].label,fillStyle:d.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(m.width+m.height)/4,strokeStyle:d.borderColor,pointStyle:r||d.pointStyle,rotation:d.rotation,textAlign:s||d.textAlign,borderRadius:o&&(l||d.borderRadius),datasetIndex:c.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class QQ extends Cl{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const s=_a(r.text)?r.text.length:1;this._padding=Ks(r.padding);const i=s*dr(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:r,bottom:s,right:i,options:o}=this,l=o.align;let c=0,d,m,h;return this.isHorizontal()?(m=rr(l,r,i),h=n+t,d=i-r):(o.position==="left"?(m=r+t,h=rr(l,s,n),c=cn*-.5):(m=i-t,h=rr(l,n,s),c=cn*.5),d=s-n),{titleX:m,titleY:h,maxWidth:d,rotation:c}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const r=dr(n.font),i=r.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:c,rotation:d}=this._drawArgs(i);Op(t,n.text,0,0,r,{color:n.color,maxWidth:c,rotation:d,textAlign:pP(n.align),textBaseline:"middle",translation:[o,l]})}}function o7e(e,t){const n=new QQ({ctx:e.ctx,options:t,chart:e});Rs.configure(e,n,t),Rs.addBox(e,n),e.titleBlock=n}var l7e={id:"title",_element:QQ,start(e,t,n){o7e(e,n)},stop(e){const t=e.titleBlock;Rs.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const r=e.titleBlock;Rs.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ug={average(e){if(!e.length)return!1;let t,n,r=new Set,s=0,i=0;for(t=0,n=e.length;t<n;++t){const l=e[t].element;if(l&&l.hasValue()){const c=l.tooltipPosition();r.add(c.x),s+=c.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((l,c)=>l+c)/r.size,y:s/i}},nearest(e,t){if(!e.length)return!1;let n=t.x,r=t.y,s=Number.POSITIVE_INFINITY,i,o,l;for(i=0,o=e.length;i<o;++i){const c=e[i].element;if(c&&c.hasValue()){const d=c.getCenterPoint(),m=PT(t,d);m<s&&(s=m,l=c)}}if(l){const c=l.tooltipPosition();n=c.x,r=c.y}return{x:n,y:r}}};function Mi(e,t){return t&&(_a(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Io(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function c7e(e,t){const{element:n,datasetIndex:r,index:s}=t,i=e.getDatasetMeta(r).controller,{label:o,value:l}=i.getLabelAndValue(s);return{chart:e,label:o,parsed:i.getParsed(s),raw:e.data.datasets[r].data[s],formattedValue:l,dataset:i.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function bF(e,t){const n=e.chart.ctx,{body:r,footer:s,title:i}=e,{boxWidth:o,boxHeight:l}=t,c=dr(t.bodyFont),d=dr(t.titleFont),m=dr(t.footerFont),h=i.length,p=s.length,b=r.length,v=Ks(t.padding);let x=v.height,w=0,j=r.reduce((_,E)=>_+E.before.length+E.lines.length+E.after.length,0);if(j+=e.beforeBody.length+e.afterBody.length,h&&(x+=h*d.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),j){const _=t.displayColors?Math.max(l,c.lineHeight):c.lineHeight;x+=b*_+(j-b)*c.lineHeight+(j-1)*t.bodySpacing}p&&(x+=t.footerMarginTop+p*m.lineHeight+(p-1)*t.footerSpacing);let C=0;const S=function(_){w=Math.max(w,n.measureText(_).width+C)};return n.save(),n.font=d.string,on(e.title,S),n.font=c.string,on(e.beforeBody.concat(e.afterBody),S),C=t.displayColors?o+2+t.boxPadding:0,on(r,_=>{on(_.before,S),on(_.lines,S),on(_.after,S)}),C=0,n.font=m.string,on(e.footer,S),n.restore(),w+=v.width,{width:w,height:x}}function d7e(e,t){const{y:n,height:r}=t;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}function u7e(e,t,n,r){const{x:s,width:i}=r,o=n.caretSize+n.caretPadding;if(e==="left"&&s+i+o>t.width||e==="right"&&s-i-o<0)return!0}function m7e(e,t,n,r){const{x:s,width:i}=n,{width:o,chartArea:{left:l,right:c}}=e;let d="center";return r==="center"?d=s<=(l+c)/2?"left":"right":s<=i/2?d="left":s>=o-i/2&&(d="right"),u7e(d,e,t,n)&&(d="center"),d}function vF(e,t,n){const r=n.yAlign||t.yAlign||d7e(e,n);return{xAlign:n.xAlign||t.xAlign||m7e(e,t,n,r),yAlign:r}}function f7e(e,t){let{x:n,width:r}=e;return t==="right"?n-=r:t==="center"&&(n-=r/2),n}function h7e(e,t,n){let{y:r,height:s}=e;return t==="top"?r+=n:t==="bottom"?r-=s+n:r-=s/2,r}function wF(e,t,n,r){const{caretSize:s,caretPadding:i,cornerRadius:o}=e,{xAlign:l,yAlign:c}=n,d=s+i,{topLeft:m,topRight:h,bottomLeft:p,bottomRight:b}=Vm(o);let v=f7e(t,l);const x=h7e(t,c,d);return c==="center"?l==="left"?v+=d:l==="right"&&(v-=d):l==="left"?v-=Math.max(m,p)+s:l==="right"&&(v+=Math.max(h,b)+s),{x:cr(v,0,r.width-t.width),y:cr(x,0,r.height-t.height)}}function mb(e,t,n){const r=Ks(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-r.right:e.x+r.left}function NF(e){return Mi([],Io(e))}function g7e(e,t,n){return Nu(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function jF(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const XQ={beforeTitle:Do,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:Do,beforeBody:Do,beforeLabel:Do,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return Jt(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Do,afterBody:Do,beforeFooter:Do,footer:Do,afterFooter:Do};function Dr(e,t,n,r){const s=e[t].call(n,r);return typeof s>"u"?XQ[t].call(n,r):s}class CF extends Cl{static positioners=Ug;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,i=new OQ(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=g7e(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:r}=n,s=Dr(r,"beforeTitle",this,t),i=Dr(r,"title",this,t),o=Dr(r,"afterTitle",this,t);let l=[];return l=Mi(l,Io(s)),l=Mi(l,Io(i)),l=Mi(l,Io(o)),l}getBeforeBody(t,n){return NF(Dr(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:r}=n,s=[];return on(t,i=>{const o={before:[],lines:[],after:[]},l=jF(r,i);Mi(o.before,Io(Dr(l,"beforeLabel",this,i))),Mi(o.lines,Dr(l,"label",this,i)),Mi(o.after,Io(Dr(l,"afterLabel",this,i))),s.push(o)}),s}getAfterBody(t,n){return NF(Dr(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:r}=n,s=Dr(r,"beforeFooter",this,t),i=Dr(r,"footer",this,t),o=Dr(r,"afterFooter",this,t);let l=[];return l=Mi(l,Io(s)),l=Mi(l,Io(i)),l=Mi(l,Io(o)),l}_createItems(t){const n=this._active,r=this.chart.data,s=[],i=[],o=[];let l=[],c,d;for(c=0,d=n.length;c<d;++c)l.push(c7e(this.chart,n[c]));return t.filter&&(l=l.filter((m,h,p)=>t.filter(m,h,p,r))),t.itemSort&&(l=l.sort((m,h)=>t.itemSort(m,h,r))),on(l,m=>{const h=jF(t.callbacks,m);s.push(Dr(h,"labelColor",this,m)),i.push(Dr(h,"labelPointStyle",this,m)),o.push(Dr(h,"labelTextColor",this,m))}),this.labelColors=s,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=l,l}update(t,n){const r=this.options.setContext(this.getContext()),s=this._active;let i,o=[];if(!s.length)this.opacity!==0&&(i={opacity:0});else{const l=Ug[r.position].call(this,s,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const c=this._size=bF(this,r),d=Object.assign({},l,c),m=vF(this.chart,r,d),h=wF(r,d,m,this.chart);this.xAlign=m.xAlign,this.yAlign=m.yAlign,i={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),t&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,r,s){const i=this.getCaretPosition(t,r,s);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(t,n,r){const{xAlign:s,yAlign:i}=this,{caretSize:o,cornerRadius:l}=r,{topLeft:c,topRight:d,bottomLeft:m,bottomRight:h}=Vm(l),{x:p,y:b}=t,{width:v,height:x}=n;let w,j,C,S,_,E;return i==="center"?(_=b+x/2,s==="left"?(w=p,j=w-o,S=_+o,E=_-o):(w=p+v,j=w+o,S=_-o,E=_+o),C=w):(s==="left"?j=p+Math.max(c,m)+o:s==="right"?j=p+v-Math.max(d,h)-o:j=this.caretX,i==="top"?(S=b,_=S-o,w=j-o,C=j+o):(S=b+x,_=S+o,w=j+o,C=j-o),E=S),{x1:w,x2:j,x3:C,y1:S,y2:_,y3:E}}drawTitle(t,n,r){const s=this.title,i=s.length;let o,l,c;if(i){const d=Wm(r.rtl,this.x,this.width);for(t.x=mb(this,r.titleAlign,r),n.textAlign=d.textAlign(r.titleAlign),n.textBaseline="middle",o=dr(r.titleFont),l=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,c=0;c<i;++c)n.fillText(s[c],d.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+l,c+1===i&&(t.y+=r.titleMarginBottom-l)}}_drawColorBox(t,n,r,s,i){const o=this.labelColors[r],l=this.labelPointStyles[r],{boxHeight:c,boxWidth:d}=i,m=dr(i.bodyFont),h=mb(this,"left",i),p=s.x(h),b=c<m.lineHeight?(m.lineHeight-c)/2:0,v=n.y+b;if(i.usePointStyle){const x={radius:Math.min(d,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},w=s.leftForLtr(p,d)+d/2,j=v+c/2;t.strokeStyle=i.multiKeyBackground,t.fillStyle=i.multiKeyBackground,OT(t,x,w,j),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,OT(t,x,w,j)}else{t.lineWidth=Bt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const x=s.leftForLtr(p,d),w=s.leftForLtr(s.xPlus(p,1),d-2),j=Vm(o.borderRadius);Object.values(j).some(C=>C!==0)?(t.beginPath(),t.fillStyle=i.multiKeyBackground,nw(t,{x,y:v,w:d,h:c,radius:j}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),nw(t,{x:w,y:v+1,w:d-2,h:c-2,radius:j}),t.fill()):(t.fillStyle=i.multiKeyBackground,t.fillRect(x,v,d,c),t.strokeRect(x,v,d,c),t.fillStyle=o.backgroundColor,t.fillRect(w,v+1,d-2,c-2))}t.fillStyle=this.labelTextColors[r]}drawBody(t,n,r){const{body:s}=this,{bodySpacing:i,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:d,boxPadding:m}=r,h=dr(r.bodyFont);let p=h.lineHeight,b=0;const v=Wm(r.rtl,this.x,this.width),x=function(R){n.fillText(R,v.x(t.x+b),t.y+p/2),t.y+=p+i},w=v.textAlign(o);let j,C,S,_,E,A,T;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,t.x=mb(this,w,r),n.fillStyle=r.bodyColor,on(this.beforeBody,x),b=l&&w!=="right"?o==="center"?d/2+m:d+2+m:0,_=0,A=s.length;_<A;++_){for(j=s[_],C=this.labelTextColors[_],n.fillStyle=C,on(j.before,x),S=j.lines,l&&S.length&&(this._drawColorBox(n,t,_,v,r),p=Math.max(h.lineHeight,c)),E=0,T=S.length;E<T;++E)x(S[E]),p=h.lineHeight;on(j.after,x)}b=0,p=h.lineHeight,on(this.afterBody,x),t.y-=i}drawFooter(t,n,r){const s=this.footer,i=s.length;let o,l;if(i){const c=Wm(r.rtl,this.x,this.width);for(t.x=mb(this,r.footerAlign,r),t.y+=r.footerMarginTop,n.textAlign=c.textAlign(r.footerAlign),n.textBaseline="middle",o=dr(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,l=0;l<i;++l)n.fillText(s[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+r.footerSpacing}}drawBackground(t,n,r,s){const{xAlign:i,yAlign:o}=this,{x:l,y:c}=t,{width:d,height:m}=r,{topLeft:h,topRight:p,bottomLeft:b,bottomRight:v}=Vm(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(l+h,c),o==="top"&&this.drawCaret(t,n,r,s),n.lineTo(l+d-p,c),n.quadraticCurveTo(l+d,c,l+d,c+p),o==="center"&&i==="right"&&this.drawCaret(t,n,r,s),n.lineTo(l+d,c+m-v),n.quadraticCurveTo(l+d,c+m,l+d-v,c+m),o==="bottom"&&this.drawCaret(t,n,r,s),n.lineTo(l+b,c+m),n.quadraticCurveTo(l,c+m,l,c+m-b),o==="center"&&i==="left"&&this.drawCaret(t,n,r,s),n.lineTo(l,c+h),n.quadraticCurveTo(l,c,l+h,c),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,r=this.$animations,s=r&&r.x,i=r&&r.y;if(s||i){const o=Ug[t.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=bF(this,t),c=Object.assign({},o,this._size),d=vF(n,t,c),m=wF(t,c,d,n);(s._to!==m.x||i._to!==m.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,m))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=Ks(n.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&l&&(t.save(),t.globalAlpha=r,this.drawBackground(i,t,s,n),kQ(t,n.textDirection),i.y+=o.top,this.drawTitle(i,t,n),this.drawBody(i,t,n),this.drawFooter(i,t,n),PQ(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const r=this._active,s=t.map(({datasetIndex:l,index:c})=>{const d=this.chart.getDatasetMeta(l);if(!d)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:d.data[c],index:c}}),i=!Jv(r,s),o=this._positionChanged(s,n);(i||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,i=this._active||[],o=this._getActiveElements(t,i,n,r),l=this._positionChanged(o,t),c=n||!Jv(o,i)||l;return c&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),c}_getActiveElements(t,n,r,s){const i=this.options;if(t.type==="mouseout")return[];if(!s)return n.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,i.mode,i,r);return i.reverse&&o.reverse(),o}_positionChanged(t,n){const{caretX:r,caretY:s,options:i}=this,o=Ug[i.position].call(this,t,n);return o!==!1&&(r!==o.x||s!==o.y)}}var p7e={id:"tooltip",_element:CF,positioners:Ug,afterInit(e,t,n){n&&(e.tooltip=new CF({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:XQ},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const x7e=(e,t,n,r)=>(typeof t=="string"?(n=e.push(t)-1,r.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function y7e(e,t,n,r){const s=e.indexOf(t);if(s===-1)return x7e(e,t,n,r);const i=e.lastIndexOf(t);return s!==i?n:s}const b7e=(e,t)=>e===null?null:cr(Math.round(e),0,t);function SF(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class v7e extends Mf{static id="category";static defaults={ticks:{callback:SF}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:s,label:i}of n)r[s]===i&&r.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(Jt(t))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===t?n:y7e(r,t,Lt(n,t),this._addedLabels),b7e(n,r.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(r=0),n||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const t=this.min,n=this.max,r=this.options.offset,s=[];let i=this.getLabels();i=t===0&&n===i.length-1?i:i.slice(t,n+1),this._valueRange=Math.max(i.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=t;o<=n;o++)s.push({value:o});return s}getLabelForValue(t){return SF.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function w7e(e,t){const n=[],{bounds:s,step:i,min:o,max:l,precision:c,count:d,maxTicks:m,maxDigits:h,includeBounds:p}=e,b=i||1,v=m-1,{min:x,max:w}=t,j=!Jt(o),C=!Jt(l),S=!Jt(d),_=(w-x)/(h+1);let E=_U((w-x)/v/b)*b,A,T,R,U;if(E<1e-14&&!j&&!C)return[{value:x},{value:w}];U=Math.ceil(w/E)-Math.floor(x/E),U>v&&(E=_U(U*E/v/b)*b),Jt(c)||(A=Math.pow(10,c),E=Math.ceil(E*A)/A),s==="ticks"?(T=Math.floor(x/E)*E,R=Math.ceil(w/E)*E):(T=x,R=w),j&&C&&i&&P$e((l-o)/i,E/1e3)?(U=Math.round(Math.min((l-o)/E,m)),E=(l-o)/U,T=o,R=l):S?(T=j?o:T,R=C?l:R,U=d-1,E=(R-T)/U):(U=(R-T)/E,Kg(U,Math.round(U),E/1e3)?U=Math.round(U):U=Math.ceil(U));const W=Math.max(AU(E),AU(T));A=Math.pow(10,Jt(c)?W:c),T=Math.round(T*A)/A,R=Math.round(R*A)/A;let I=0;for(j&&(p&&T!==o?(n.push({value:o}),T<o&&I++,Kg(Math.round((T+I*E)*A)/A,o,_F(o,_,e))&&I++):T<o&&I++);I<U;++I){const M=Math.round((T+I*E)*A)/A;if(C&&M>l)break;n.push({value:M})}return C&&p&&R!==l?n.length&&Kg(n[n.length-1].value,l,_F(l,_,e))?n[n.length-1].value=l:n.push({value:l}):(!C||R===l)&&n.push({value:R}),n}function _F(e,t,{horizontal:n,minRotation:r}){const s=Vo(r),i=(n?Math.sin(s):Math.cos(s))||.001,o=.75*t*(""+e).length;return Math.min(t/i,o)}class N7e extends Mf{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return Jt(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:s,max:i}=this;const o=c=>s=n?s:c,l=c=>i=r?i:c;if(t){const c=Qi(s),d=Qi(i);c<0&&d<0?l(0):c>0&&d>0&&o(0)}if(s===i){let c=i===0?1:Math.abs(i*.05);l(i+c),t||o(s-c)}this.min=s,this.max=i}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=t,s;return r?(s=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s={maxTicks:r,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=w7e(s,i);return t.bounds==="ticks"&&D$e(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&t.length){const s=(r-n)/Math.max(t.length-1,1)/2;n-=s,r+=s}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(t){return yP(t,this.chart.options.locale,this.options.ticks.format)}}class j7e extends N7e{static id="linear";static defaults={ticks:{callback:jQ.formatters.numeric}};determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=Ys(t)?t:0,this.max=Ys(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,r=Vo(this.options.ticks.minRotation),s=(t?Math.sin(r):Math.cos(r))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const Tj={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Or=Object.keys(Tj);function AF(e,t){return e-t}function EF(e,t){if(Jt(t))return null;const n=e._adapter,{parser:r,round:s,isoWeekday:i}=e._parseOpts;let o=t;return typeof r=="function"&&(o=r(o)),Ys(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(kp(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,s)),+o)}function TF(e,t,n,r){const s=Or.length;for(let i=Or.indexOf(e);i<s-1;++i){const o=Tj[Or[i]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-t)/(l*o.size))<=r)return Or[i]}return Or[s-1]}function C7e(e,t,n,r,s){for(let i=Or.length-1;i>=Or.indexOf(n);i--){const o=Or[i];if(Tj[o].common&&e._adapter.diff(s,r,o)>=t-1)return o}return Or[n?Or.indexOf(n):0]}function S7e(e){for(let t=Or.indexOf(e)+1,n=Or.length;t<n;++t)if(Tj[Or[t]].common)return Or[t]}function LF(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:r,hi:s}=gP(n,t),i=n[r]>=t?n[r]:n[s];e[i]=!0}}function _7e(e,t,n,r){const s=e._adapter,i=+s.startOf(t[0].value,r),o=t[t.length-1].value;let l,c;for(l=i;l<=o;l=+s.add(l,1,r))c=n[l],c>=0&&(t[c].major=!0);return t}function kF(e,t,n){const r=[],s={},i=t.length;let o,l;for(o=0;o<i;++o)l=t[o],s[l]=o,r.push({value:l,major:!1});return i===0||!n?r:_7e(e,r,s,n)}class PF extends Mf{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const r=t.time||(t.time={}),s=this._adapter=new NRe._date(t.adapters.date);s.init(n),Yg(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:EF(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,r=t.time.unit||"day";let{min:s,max:i,minDefined:o,maxDefined:l}=this.getUserBounds();function c(d){!o&&!isNaN(d.min)&&(s=Math.min(s,d.min)),!l&&!isNaN(d.max)&&(i=Math.max(i,d.max))}(!o||!l)&&(c(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&c(this.getMinMax(!1))),s=Ys(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),i=Ys(i)&&!isNaN(i)?i:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,i-1),this.max=Math.max(s+1,i)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],r=t[t.length-1]),{min:n,max:r}}buildTicks(){const t=this.options,n=t.time,r=t.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const i=this.min,o=this.max,l=R$e(s,i,o);return this._unit=n.unit||(r.autoSkip?TF(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):C7e(this,l.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:S7e(this._unit),this.initOffsets(s),t.reverse&&l.reverse(),kF(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,r=0,s,i;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?n=1-s:n=(this.getDecimalForValue(t[1])-s)/2,i=this.getDecimalForValue(t[t.length-1]),t.length===1?r=i:r=(i-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;n=cr(n,0,o),r=cr(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const t=this._adapter,n=this.min,r=this.max,s=this.options,i=s.time,o=i.unit||TF(i.minUnit,n,r,this._getLabelCapacity(n)),l=Lt(s.ticks.stepSize,1),c=o==="week"?i.isoWeekday:!1,d=kp(c)||c===!0,m={};let h=n,p,b;if(d&&(h=+t.startOf(h,"isoWeek",c)),h=+t.startOf(h,d?"day":o),t.diff(r,n,o)>1e5*l)throw new Error(n+" and "+r+" are too far apart with stepSize of "+l+" "+o);const v=s.ticks.source==="data"&&this.getDataTimestamps();for(p=h,b=0;p<r;p=+t.add(p,l,o),b++)LF(m,p,v);return(p===r||s.bounds==="ticks"||b===1)&&LF(m,p,v),Object.keys(m).sort(AF).map(x=>+x)}getLabelForValue(t){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(t,r.tooltipFormat):n.format(t,r.displayFormats.datetime)}format(t,n){const s=this.options.time.displayFormats,i=this._unit,o=n||s[i];return this._adapter.format(t,o)}_tickFormatFunction(t,n,r,s){const i=this.options,o=i.ticks.callback;if(o)return _n(o,[t,n,r],this);const l=i.time.displayFormats,c=this._unit,d=this._majorUnit,m=c&&l[c],h=d&&l[d],p=r[n],b=d&&h&&p&&p.major;return this._adapter.format(t,s||(b?h:m))}generateTickLabels(t){let n,r,s;for(n=0,r=t.length;n<r;++n)s=t[n],s.label=this._tickFormatFunction(s.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,r=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(t){const n=this._offsets,r=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,r=this.ctx.measureText(t).width,s=Vo(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(s),o=Math.sin(s),l=this._resolveTickFontOptions(0).size;return{w:r*i+l*o,h:r*o+l*i}}_getLabelCapacity(t){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,i=this._tickFormatFunction(t,0,kF(this,[t],this._majorUnit),s),o=this._getLabelSize(i),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let t=this._cache.data||[],n,r;if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)t=t.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,r;if(t.length)return t;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)t.push(EF(this,s[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return vQ(t.sort(AF))}}function fb(e,t,n){let r=0,s=e.length-1,i,o,l,c;n?(t>=e[r].pos&&t<=e[s].pos&&({lo:r,hi:s}=kd(e,"pos",t)),{pos:i,time:l}=e[r],{pos:o,time:c}=e[s]):(t>=e[r].time&&t<=e[s].time&&({lo:r,hi:s}=kd(e,"time",t)),{time:i,pos:l}=e[r],{time:o,pos:c}=e[s]);const d=o-i;return d?l+(c-l)*(t-i)/d:l}class X8e extends PF{static id="timeseries";static defaults=PF.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=fb(n,this.min),this._tableRange=fb(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:r}=this,s=[],i=[];let o,l,c,d,m;for(o=0,l=t.length;o<l;++o)d=t[o],d>=n&&d<=r&&s.push(d);if(s.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,l=s.length;o<l;++o)m=s[o+1],c=s[o-1],d=s[o],Math.round((m+c)/2)!==d&&i.push({time:d,pos:o/(l-1)});return i}_generate(){const t=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(t)||!r.length)&&r.splice(0,0,t),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((s,i)=>s-i)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?t=this.normalize(n.concat(r)):t=n.length?n:r,t=this._cache.all=t,t}getDecimalForValue(t){return(fb(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,r=this.getDecimalForPixel(t)/n.factor-n.end;return fb(this._table,r*this._tableRange+this._minPos,!0)}}const ZQ="label";function DF(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function A7e(e,t){const n=e.options;n&&t&&Object.assign(n,t)}function JQ(e,t){e.labels=t}function eX(e,t,n=ZQ){const r=[];e.datasets=t.map(s=>{const i=e.datasets.find(o=>o[n]===s[n]);return!i||!s.data||r.includes(i)?{...s}:(r.push(i),Object.assign(i,s),i)})}function E7e(e,t=ZQ){const n={labels:[],datasets:[]};return JQ(n,e.labels),eX(n,e.datasets,t),n}function T7e(e,t){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:i,type:o,data:l,options:c,plugins:d=[],fallbackContent:m,updateMode:h,...p}=e,b=g.useRef(null),v=g.useRef(null),x=()=>{b.current&&(v.current=new Ej(b.current,{type:o,data:E7e(l,i),options:c&&{...c},plugins:d}),DF(t,v.current))},w=()=>{DF(t,null),v.current&&(v.current.destroy(),v.current=null)};return g.useEffect(()=>{!s&&v.current&&c&&A7e(v.current,c)},[s,c]),g.useEffect(()=>{!s&&v.current&&JQ(v.current.config.data,l.labels)},[s,l.labels]),g.useEffect(()=>{!s&&v.current&&l.datasets&&eX(v.current.config.data,l.datasets,i)},[s,l.datasets]),g.useEffect(()=>{v.current&&(s?(w(),setTimeout(x)):v.current.update(h))},[s,c,l.labels,l.datasets,h]),g.useEffect(()=>{v.current&&(w(),setTimeout(x))},[o]),g.useEffect(()=>(x(),()=>w()),[]),a.jsx("canvas",{ref:b,role:"img",height:n,width:r,...p,children:m})}const L7e=g.forwardRef(T7e);function EP(e,t){return Ej.register(t),g.forwardRef((n,r)=>a.jsx(L7e,{...n,ref:r,type:e}))}const k7e=EP("line",vRe),P7e=EP("bar",xRe),D7e=EP("pie",wRe);Ej.register(v7e,j7e,e7e,qze,Yze,$ze,l7e,p7e,i7e);const tX=e=>a.jsx(en,{...e}),O7e=e=>a.jsx(Cc,{...e}),M7e=e=>a.jsx(xw,{...e}),I7e=e=>a.jsx(Fn,{...e}),nX=e=>a.jsx(Br,{...e}),$7e=e=>a.jsx(Woe,{...e}),R7e=[{icon:tX,title:"Total Contacts",value:128,color:"text-blue-600",bgColor:"bg-blue-50"},{icon:nX,title:"Emails Sent",value:450,color:"text-purple-600",bgColor:"bg-purple-50"},{icon:M7e,title:"Active Campaigns",value:9,color:"text-green-600",bgColor:"bg-green-50"},{icon:O7e,title:"Revenue",value:125e3,color:"text-yellow-600",bgColor:"bg-yellow-50"}],z7e=[{name:"Emma Watty",company:"Tech Interaction Inc.",assignedBy:"Alice Smith",source:"Website",date:"Oct 10, 2:10 PM"},{name:"John Johnny",company:"Capital Business Co.",assignedBy:"Bob Johnson",source:"Referral",date:"Oct 9, 12:00 AM"},{name:"Annie Arnty",company:"Dynamic Systems Inc.",assignedBy:"Catherine Lee",source:"Trade Show",date:"Oct 8, 1:25 PM"},{name:"James Wilson",company:"Global Services LLC",assignedBy:"David Kim",source:"Cold Call",date:"Oct 7, 11:15 AM"}],U7e={labels:["Week 1","Week 2","Week 3","Week 4"],datasets:[{label:"Leads",data:[50,75,60,90],backgroundColor:"rgba(96, 165, 250, 0.6)",borderColor:"rgba(96, 165, 250, 1)",borderWidth:1},{label:"Conversions",data:[10,20,15,25],backgroundColor:"rgba(34, 197, 94, 0.6)",borderColor:"rgba(34, 197, 94, 1)",borderWidth:1}]},F7e={responsive:!0,plugins:{legend:{position:"top",labels:{color:"#374151"}},title:{display:!0,color:"#111827",font:{size:18}}}},B7e={labels:["Leads","Conversions"],datasets:[{label:"Leads Status",data:[75,25],backgroundColor:["rgba(96, 165, 250, 0.6)","rgba(34, 197, 94, 0.6)"],borderColor:["rgba(96, 165, 250, 1)","rgba(34, 197, 94, 1)"],borderWidth:1}]},H7e={responsive:!0,plugins:{legend:{position:"top",labels:{color:"#374151"}},title:{display:!0,color:"#111827",font:{size:18}}}},G7e=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},V7e=()=>{const e=[{icon:tX,label:"New Contact"},{icon:nX,label:"New Campaign"},{icon:I7e,label:"New Task"},{icon:$7e,label:"New Leads"}];return a.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 flex flex-col md:flex-row items-center space-y-3 md:space-y-0 md:space-x-4",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 py-2 flex-grow focus-within:ring-2 focus-within:ring-indigo-500 transition w-full md:max-w-3xl",children:[a.jsx(bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search Contacts, Leads, or Campaigns...",className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"flex space-x-3 md:ml-auto",children:e.map((t,n)=>a.jsxs("div",{className:"relative group",children:[a.jsx("button",{className:"p-2 text-gray-500 hover:text-gray-900 transition rounded-full hover:bg-gray-100 focus:outline-none",children:a.jsx(t.icon,{size:20})}),a.jsx("span",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-1 bg-gray-800 text-white text-xs rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition",children:t.label})]},n))})]})},W7e=({icon:e,title:t,value:n,color:r,bgColor:s})=>a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-lg transition duration-300 hover:shadow-xl hover:ring-2 hover:ring-blue-500 cursor-pointer",onClick:()=>console.log(`Clicked metric card: ${t}`),children:[a.jsx("div",{className:`p-3 rounded-full ${s} ${r} mr-4`,children:a.jsx(e,{size:22})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]}),q7e=({name:e,company:t,assignedBy:n,source:r,date:s})=>{const{text:i,bg:o}=G7e(r);return a.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 px-2 -mx-2 rounded-md",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:e}),a.jsx("p",{className:"text-xs text-gray-500",children:t}),n&&a.jsxs("p",{className:"text-xs text-gray-500",children:["Assigned by:"," ",a.jsx("span",{className:"font-semibold text-gray-700",children:n})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs text-gray-400",children:s}),a.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${i} ${o} px-2 py-0.5 rounded-full`,children:r})]})]})})},Y7e=({title:e,children:t})=>a.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-md flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:e}),a.jsx("span",{className:"text-sm text-indigo-500 cursor-pointer hover:underline",children:"See All"})]}),t]}),K7e=({title:e,chartData:t,chartOptions:n})=>{const[r,s]=g.useState("bar"),i=r==="pie"?B7e:t,o=r==="pie"?H7e:n,l=r==="line"?k7e:r==="pie"?D7e:P7e,c=r==="pie"?250:300;return a.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md flex flex-col hover:shadow-lg transition",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:e}),a.jsxs("select",{value:r,onChange:d=>s(d.target.value),className:"border border-gray-300 rounded-md px-2 py-1 text-sm",children:[a.jsx("option",{value:"bar",children:"Bar"}),a.jsx("option",{value:"line",children:"Line"}),a.jsx("option",{value:"pie",children:"Pie"})]})]}),a.jsx("div",{className:"w-full flex justify-center",style:{height:c},children:a.jsx(l,{data:i,options:o})})]})};function Q7e(){const{user:e}=Ut();return g.useEffect(()=>{document.title="Dashboard | Sari-Sari CRM"},[]),a.jsx("div",{className:"min-h-screen pt-5 pb-10 font-sans",children:a.jsxs("main",{className:"max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"text-xl font-bold mb-4",children:["Welcome back, ",e?.name||"Marketing","! Heres your marketing overview."]}),a.jsx(V7e,{}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6",children:R7e.map(t=>a.jsx(W7e,{...t},t.title))}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[a.jsx(K7e,{title:"Leads & Conversions",chartData:U7e,chartOptions:F7e}),a.jsx(Y7e,{title:"Latest Leads",children:z7e.map((t,n)=>a.jsx(q7e,{...t},n))})]})]})})}function X7e(){g.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[e,t]=g.useState(null),[n,r]=g.useState(""),[s,i]=g.useState("All Statuses"),o=g.useMemo(()=>[{company:"Acme Corporation",url:"https://acme.com",status:"CUSTOMER",industry:"Technology",territory:"North Region",phone_number:"+1-555-0100",billing_address:"123 Main St, North City",shipping_address:"456 Elm St, North City",created_by:"John Appleseed",created_date:"2024-01-10",last_updated:"2025-09-25 14:30"},{company:"Beta Solutions",url:"https://beta.com",status:"PROSPECT",industry:"Finance",territory:"South Region",phone_number:"+1-555-0200",billing_address:"789 Pine St, South City",shipping_address:"101 Maple St, South City",created_by:"Jane Doe",created_date:"2024-03-05",last_updated:"2025-10-01 10:15"},{company:"Gamma Partners",url:"https://gamma.com",status:"PARTNER",industry:"Retail",territory:"East Region",phone_number:"+1-555-0300",billing_address:"234 Oak St, East City",shipping_address:"345 Birch St, East City",created_by:"Alice Smith",created_date:"2023-12-20",last_updated:"2025-08-15 09:45"},{company:"Delta Corp",url:"https://delta.com",status:"INACTIVE",industry:"Logistics",territory:"West Region",phone_number:"+1-555-0400",billing_address:"987 Cedar St, West City",shipping_address:"654 Pine St, West City",created_by:"Bob Johnson",created_date:"2023-11-15",last_updated:"2025-06-12 11:20"}],[]),l=h=>t(h),c=()=>t(null),d=g.useMemo(()=>[{title:"Total Accounts",value:o.length,color:"text-yellow-600",bgColor:"bg-yellow-50",icon:en},{title:"Customers",value:o.filter(h=>h.status==="CUSTOMER").length,color:"text-green-600",bgColor:"bg-green-50",icon:Xi},{title:"Prospects",value:o.filter(h=>h.status==="PROSPECT").length,color:"text-purple-600",bgColor:"bg-purple-50",icon:Ln},{title:"Partners",value:o.filter(h=>h.status==="PARTNER").length,color:"text-pink-600",bgColor:"bg-pink-50",icon:Qt},{title:"Active",value:o.filter(h=>h.status==="CUSTOMER"||h.status==="PARTNER").length,color:"text-blue-600",bgColor:"bg-blue-50",icon:Xi},{title:"Inactive",value:o.filter(h=>h.status==="INACTIVE").length,color:"text-gray-600",bgColor:"bg-gray-50",icon:Zi},{title:"Former",value:o.filter(h=>h.status==="FORMER").length,color:"text-orange-600",bgColor:"bg-orange-50",icon:Zi}],[o]);if(e)return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("button",{onClick:c,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-4 sm:mb-6 cursor-pointer",children:[a.jsx(du,{className:"mr-1 w-4 h-4 sm:w-5 sm:h-5"})," Back"]}),a.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:a.jsx("div",{children:a.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800 flex items-center gap-2",children:[e.company,a.jsx("span",{className:`inline-block text-xs px-2 py-0.5 rounded ${e.status==="CUSTOMER"?"bg-green-600 text-white":e.status==="PROSPECT"?"bg-purple-600 text-white":e.status==="PARTNER"?"bg-pink-600 text-white":"bg-gray-500 text-white"}`,children:e.status})]})})})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 sm:p-6 shadow-sm overflow-x-auto",children:[a.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4 text-gray-800",children:"Account Details"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm text-gray-700",children:[a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Website:"})," ",a.jsx("br",{}),a.jsx("a",{href:e.url,className:"text-blue-600 hover:underline break-words",children:e.url})]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Industry:"})," ",a.jsx("br",{}),e.industry]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Territory:"})," ",a.jsx("br",{}),e.territory]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Phone Number:"})," ",a.jsx("br",{}),e.phone_number]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Billing Address:"})," ",a.jsx("br",{}),e.billing_address]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Shipping Address:"})," ",a.jsx("br",{}),e.shipping_address]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Created By:"})," ",a.jsx("br",{}),e.created_by," on ",e.created_date]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Last Updated:"})," ",a.jsx("br",{}),e.last_updated]})]})]})]});const m=o.filter(h=>{const p=h.company.toLowerCase().includes(n.toLowerCase())||h.url.toLowerCase().includes(n.toLowerCase())||h.industry.toLowerCase().includes(n.toLowerCase())||h.territory.toLowerCase().includes(n.toLowerCase())||h.phone_number.toLowerCase().includes(n.toLowerCase()),b=s==="All Statuses"||s==="Active"&&(h.status==="CUSTOMER"||h.status==="PARTNER")||s==="Inactive"&&h.status==="INACTIVE"||s==="Former"&&h.status==="FORMER"||h.status.toLowerCase()===s.toLowerCase();return p&&b});return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-sans",children:[a.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(en,{className:"mr-2 text-blue-600"}),"Accounts List"]})}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 xl:grid-cols-4 md:grid-cols-4 gap-4 mb-6",children:d.map(h=>a.jsx(Z7e,{...h},h.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search by company, website, industry, territory, or phone...",value:n,onChange:h=>r(h.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:s,onChange:h=>i(h.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"All Statuses"}),a.jsx("option",{children:"Customer"}),a.jsx("option",{children:"Prospect"}),a.jsx("option",{children:"Partner"}),a.jsx("option",{children:"Active"}),a.jsx("option",{children:"Inactive"}),a.jsx("option",{children:"Former"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Company"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4",children:"Industry"}),a.jsx("th",{className:"py-3 px-4",children:"Territory"}),a.jsx("th",{className:"py-3 px-4",children:"Phone"})]})}),a.jsxs("tbody",{children:[m.map((h,p)=>a.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>l(h),children:[a.jsx("td",{className:"py-3 px-4 break-words",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-words",children:h.company}),a.jsx("div",{className:"text-gray-500 text-xs break-words",children:h.url})]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${h.status==="CUSTOMER"?"bg-green-100 text-green-700":h.status==="PROSPECT"?"bg-purple-100 text-purple-700":h.status==="PARTNER"?"bg-pink-100 text-pink-700":h.status==="INACTIVE"?"bg-gray-100 text-gray-700":"bg-orange-100 text-orange-700"}`,children:h.status})}),a.jsx("td",{className:"py-3 px-4 break-words",children:h.industry}),a.jsx("td",{className:"py-3 px-4 break-words",children:h.territory}),a.jsxs("td",{className:"py-3 px-4 flex items-center space-x-2 break-words",children:[a.jsx(pt,{className:"text-gray-500"}),a.jsx("span",{children:h.phone_number})]})]},p)),m.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"py-4 text-center text-gray-500",children:"No accounts match your search/filter."})})]})]})})]})}const Z7e=({icon:e,title:t,value:n,color:r,bgColor:s})=>a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md hover:shadow-lg hover:ring-2 hover:ring-blue-500 cursor-pointer transition-all duration-300",onClick:()=>console.log(`Clicked: ${t}`),children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${s} ${r} mr-4`,children:a.jsx(e,{size:22})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]});function J7e(){g.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[e,t]=g.useState(!1),[n,r]=g.useState(null),[s,i]=g.useState(!1),[o,l]=g.useState(""),[c,d]=g.useState("All Contacts"),[m,h]=g.useState([{id:1,name:"John Smith",title:"Marketing Director",account:"Acme Corporation",email:"john.smith@acme.com",phone1:"+1-555-0101",phone2:"+1-555-0102",department:"Marketing",assigned:"Jane Sales",created:"1/10/2024",mobile:"09217229846",workPhone:"(555) 123-4567",createdBy:"John Appleseed",lastUpdated:"2025-09-21 15:30",notes:"Key marketing partner for Q4 campaigns."}]),[p,b]=g.useState({id:null,name:"",email:"",workPhone:"",title:"",department:"",phone1:"",phone2:"",account:"",assigned:"",notes:""}),v=E=>{E.target.id==="modalBackdrop"&&t(!1)},x=E=>{r(E)},w=()=>{r(null)},j=()=>{i(!1),b({id:null,name:"",email:"",workPhone:"",title:"",department:"",phone1:"",phone2:"",account:"",assigned:"",notes:""}),t(!0)},C=(E,A)=>{A.stopPropagation(),i(!0),b(E),t(!0)},S=E=>{const{name:A,value:T}=E.target;b(R=>({...R,[A]:T}))},_=E=>{if(E.preventDefault(),s)h(A=>A.map(T=>T.id===p.id?{...p}:T));else{const A={...p,id:Date.now(),created:new Date().toLocaleDateString(),createdBy:"Admin User"};h(T=>[...T,A])}t(!1)};return n?a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[a.jsxs("button",{onClick:w,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-4 sm:mb-6 cursor-pointer",children:[a.jsx(du,{className:"mr-1 w-4 h-4 sm:w-5 sm:h-5"})," Back"]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:n.account}),a.jsx("span",{className:"mt-1 sm:mt-0 bg-blue-600 text-white text-xs sm:text-sm px-2 py-0.5 rounded w-fit",children:"Active"})]}),a.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0 mt-3 sm:mt-0",children:a.jsxs("button",{className:"w-full sm:w-auto bg-gray-800 text-white px-5 py-2 rounded-md hover:bg-gray-900 transition flex items-center gap-2",children:[a.jsx(Sc,{}),"Export"]})})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 sm:p-6 w-full max-w-full lg:max-w-6xl shadow-sm overflow-x-auto mx-auto",children:[a.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4 text-gray-800",children:"Contact Details"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 text-sm text-gray-700",children:[a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Primary Contact:"})," ",a.jsx("br",{}),n.name]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Email:"})," ",a.jsx("br",{}),n.email]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Created By:"})," ",a.jsx("br",{}),n.createdBy," on ",n.created]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Title:"})," ",a.jsx("br",{}),n.title]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Assigned To:"})," ",a.jsx("br",{}),n.assigned]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Work Phone:"})," ",a.jsx("br",{}),n.workPhone]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Account:"})," ",a.jsx("br",{}),n.account]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Mobile Phone:"})," ",a.jsx("br",{}),n.phone1]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Last Updated:"})," ",a.jsx("br",{}),n.lastUpdated]})]}),a.jsxs("div",{className:"mt-6 border-gray-200 pt-4",children:[a.jsx("h3",{className:"text-md sm:text-lg font-semibold text-gray-800 mb-2",children:"Notes"}),a.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:n.notes?n.notes:"No additional notes were provided for this contact."})]})]})]}):a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(en,{className:"mr-2 text-blue-600"})," Contacts Management"]}),a.jsx("button",{onClick:j,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base transition",children:" Add Contact"})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search Contacts...",value:o,onChange:E=>l(E.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:c,onChange:E=>d(E.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"All Contacts"}),a.jsx("option",{children:"Option 1"}),a.jsx("option",{children:"Option 2"}),a.jsx("option",{children:"Option 3"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-[600px] w-full border border-gray-200 rounded-lg bg-white shadow-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-sm text-gray-600",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Contact Info"}),a.jsx("th",{className:"py-3 px-4",children:"Department"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Created"}),a.jsx("th",{className:"py-3 px-4 text-center",children:"Actions"})]})}),a.jsx("tbody",{className:"text-xs text-gray-700",children:m.map((E,A)=>a.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>x(E),children:[a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all",children:E.name}),a.jsx("div",{className:"text-xs text-gray-500",children:E.title})]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(vx,{className:"text-gray-500"}),a.jsx("span",{children:E.account})]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Tn,{className:"text-gray-500"}),a.jsx("span",{children:E.email})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(pt,{className:"text-gray-500"}),a.jsx("span",{children:E.phone1})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(pt,{className:"text-gray-500"}),a.jsx("span",{children:E.phone2})]})]})}),a.jsx("td",{className:"py-3 px-4",children:E.department}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Qt,{className:"text-gray-500"}),a.jsx("span",{children:E.assigned})]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ft,{className:"text-gray-500"}),a.jsx("span",{children:E.created})]})}),a.jsx("td",{className:"py-3 px-4 text-center",children:a.jsx("div",{className:"flex justify-center",children:a.jsx("button",{onClick:T=>C(E,T),className:"text-blue-500 hover:text-blue-700",children:a.jsx(Rn,{})})})})]},A))})]})}),e&&a.jsx("div",{id:"modalBackdrop",onClick:v,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh]",onClick:E=>E.stopPropagation(),children:[a.jsx("button",{onClick:()=>t(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(St,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 text-center",children:s?"Edit Contact":"Add New Contact"}),a.jsxs("form",{onSubmit:_,className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Name"}),a.jsx("input",{type:"text",name:"name",value:p.name,onChange:S,placeholder:"Full name",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Email"}),a.jsx("input",{type:"email",name:"email",value:p.email,onChange:S,placeholder:"example@email.com",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),a.jsx("input",{type:"text",name:"workPhone",value:p.workPhone,onChange:S,placeholder:"09 --- --- ---",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Title"}),a.jsx("input",{type:"text",name:"title",value:p.title,onChange:S,placeholder:"Job title",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),a.jsx("input",{type:"text",name:"department",value:p.department,onChange:S,placeholder:"Marketing / Sales",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Phone Number 1"}),a.jsx("input",{type:"text",name:"phone1",value:p.phone1,onChange:S,placeholder:"09 --- --- ---",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Account"}),a.jsx("input",{type:"text",name:"account",value:p.account,onChange:S,placeholder:"Company name",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Assign To"}),a.jsxs("select",{name:"assigned",value:p.assigned,onChange:S,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",children:[a.jsx("option",{value:"",children:"Assign To"}),a.jsx("option",{value:"Smith",children:"Smith"}),a.jsx("option",{value:"Doe",children:"Doe"}),a.jsx("option",{value:"Jane Sales",children:"Jane Sales"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Phone Number 2"}),a.jsx("input",{type:"text",name:"phone2",value:p.phone2,onChange:S,placeholder:"09 --- --- ---",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),a.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 md:col-span-3",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),a.jsx("textarea",{name:"notes",value:p.notes,onChange:S,placeholder:"Additional details...",rows:3,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 md:col-span-3",children:[a.jsx("button",{type:"button",onClick:()=>t(!1),className:"px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 text-white bg-blue-600 border border-blue-500 rounded hover:bg-blue-700 transition",children:"Save Contact"})]})]})]})})]})}const hb={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},ja=({label:e,value:t,name:n,className:r=""})=>a.jsxs("div",{className:`flex flex-col ${r}`,children:[a.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),a.jsx("input",{type:"text",name:n,defaultValue:t,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),eUe=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(ja,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),a.jsx(ja,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),a.jsx(ja,{label:"Industry",name:"industry",value:e.industry})]}),a.jsx(ja,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),a.jsx(ja,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),tUe=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(ja,{label:"First Name",name:"firstName",value:e.firstName}),a.jsx(ja,{label:"Last Name",name:"lastName",value:e.lastName}),a.jsx(ja,{label:"Department",name:"department",value:e.department}),a.jsx(ja,{label:"Title",name:"title",value:e.title}),a.jsx(ja,{label:"Work Phone",name:"workPhone",value:e.workPhone}),a.jsx(ja,{label:"Email",name:"email",value:e.email}),a.jsx(ja,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),a.jsx(ja,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),nUe=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(ja,{label:"Deal Name",name:"dealName",value:e.dealName}),a.jsxs("div",{className:"flex",children:[a.jsx(ja,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),a.jsx("div",{className:"flex flex-col justify-end ml-1",children:a.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),a.jsx(ja,{label:"Stage",name:"stage",value:e.stage}),a.jsx(ja,{label:"Territory",name:"territory",value:e.territory})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(ja,{label:"Description",name:"description",value:e.description}),a.jsx(ja,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function aX({isOpen:e,onClose:t}){const[n,r]=g.useState(1),s=3;if(!e)return null;const i=()=>{n<s?r(n+1):(t(),r(1))},o=()=>{n>1&&r(n-1)},l=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],c=()=>{switch(n){case 1:return a.jsx(eUe,{data:hb});case 2:return a.jsx(tUe,{data:hb});case 3:return a.jsx(nUe,{data:hb});default:return null}};return a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:hb.accountName})]}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:a.jsx(Nj,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:l.map(d=>a.jsx("button",{onClick:()=>r(d.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${n===d.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:d.name},d.id))}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c()}),a.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[n>1&&a.jsx("button",{onClick:o,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),n<s?a.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):a.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}const aUe={name:"Josh Vergara",status:"New",company:"Josh Inc.",title:"CEO",department:"Administration",email:"josh@joshinc.com",territory:"Cavite",assignedTo:"Admin",createdBy:"Admin",workPhone:"09253677323",phone1:"09253677323",phone2:"0907452874",source:"Website",addressLine1:"#1 Pilar Las Pinas",addressLine2:"Suite 400",city:"Las Pinas",state:"Metro Manila",zipCode:"1740",notes:"Interested in our premium plan."};function rX({lead:e=aUe,onBack:t}){const[n,r]=g.useState(!1);return e?a.jsxs("div",{className:"p-4 sm:p-6 md:p-8 font-inter min-h-screen",children:[a.jsxs("button",{onClick:t,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-4 sm:mb-6 cursor-pointer",children:[a.jsx(du,{className:"mr-1 w-4 h-4 sm:w-5 sm:h-5"})," Back"]}),a.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-6 sm:mb-8 gap-2 sm:gap-4",children:a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold",children:e.name}),a.jsx("span",{className:"bg-blue-100 text-blue-700 text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full",children:e.status}),a.jsx("div",{className:"flex flex-wrap items-center ml-0 sm:ml-1",children:a.jsx("button",{onClick:()=>r(!0),className:"bg-green-600 hover:bg-green-700 text-white px-3 sm:px-5 py-1.5 sm:py-2 rounded-lg font-medium text-xs sm:text-sm",children:"Convert"})})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200 mb-6 sm:mb-8",children:[a.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-4 sm:mb-6",children:"Lead Details"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Name:"}),a.jsx("p",{children:e.name})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Company:"}),a.jsx("p",{children:e.company})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Title:"}),a.jsx("p",{children:e.title})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Department:"}),a.jsx("p",{children:e.department})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:e.email})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Territory:"}),a.jsx("p",{children:e.territory})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assign To:"}),a.jsx("p",{children:e.assignedTo})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:e.createdBy})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Work Phone:"}),a.jsx("p",{children:e.workPhone})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),a.jsx("p",{children:e.phone1})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),a.jsx("p",{children:e.phone2})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Source:"}),a.jsx("p",{children:e.source})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[a.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200",children:[a.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Address:"}),a.jsxs("p",{className:"text-sm text-gray-700 leading-relaxed",children:[e.addressLine1," ",a.jsx("br",{}),e.addressLine2," ",a.jsx("br",{}),e.city,", ",e.state," ",e.zipCode]})]}),a.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200",children:[a.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),a.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:e.notes||"No notes available."})]})]}),a.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200",children:[a.jsx("h3",{className:"font-semibold text-gray-800 mb-4 sm:mb-6",children:"Related Activities"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 sm:gap-8 text-sm",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-2",children:"Tasks (2)"}),a.jsxs("div",{className:"space-y-1 text-gray-700",children:[a.jsx("p",{children:"Schedule follow-up call"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Due: 2025-09-15 | In Progress"}),a.jsx("p",{children:"Schedule follow-up call"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Due: 2025-09-18 | In Progress"})]}),a.jsx("a",{href:"#",className:"text-blue-600 hover:underline text-xs font-medium mt-2 inline-block",children:"View All Tasks"})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-2",children:"Calls (2)"}),a.jsxs("div",{className:"space-y-1 text-gray-700",children:[a.jsx("p",{children:"Initial discovery call"}),a.jsx("p",{className:"text-xs text-gray-500",children:"2025-09-10 | Completed"}),a.jsx("p",{children:"Initial discovery call"}),a.jsx("p",{className:"text-xs text-gray-500",children:"2025-09-11 | Completed"})]}),a.jsx("a",{href:"#",className:"text-blue-600 hover:underline text-xs font-medium mt-2 inline-block",children:"View All Calls"})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-2",children:"Meeting (0)"}),a.jsx("p",{className:"text-gray-500",children:"No meetings associated."}),a.jsx("a",{href:"#",className:"text-blue-600 hover:underline text-xs font-medium mt-2 inline-block",children:"View All Meetings"})]})]})]}),a.jsx(aX,{isOpen:n,onClose:()=>r(!1)})]}):null}const rUe=Nf.all(),dA=rUe.map(e=>({code:`+${e.countryCallingCode}`,name:e.countryCode}));function sUe(){const[e,t]=g.useState(null),[n,r]=g.useState(!1),[s,i]=g.useState(null),[o,l]=g.useState([{id:1,first_name:"Jane",last_name:"Doe"},{id:2,first_name:"John",last_name:"Smith"},{id:3,first_name:"Mary",last_name:"Johnson"}]),[c,d]=g.useState([{id:1,name:"Joshua Vergara",status:"Qualified",title:"Marketing Director",email:"sarah.williams@innovateco.com",phone1:"9271229484",phone2:"---------",workPhone:"999123-4567",work_ccode:"+63",m1_ccode:"+63",m2_ccode:"+63",territory:"East Coast",department:"Marketing",company:"Innovate Co.",createdBy:"John Appleseed",createdAt:"2025-09-10 09:30",lastUpdated:"2025-09-12 14:45",source:"Website",assignedTo:"Jane Doe",address:"123 Main St, City, Country",notes:"Important client"}]),[m,h]=g.useState({work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:""});g.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const p=T=>t(T),b=()=>t(null),[v,x]=g.useState(""),[w,j]=g.useState("All Accounts"),C=()=>{r(!1),i(null),h({work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:""})},S=T=>{i(T),r(!0),h({work_ccode:T.work_ccode||"+63",work_phone:T.workPhone||"",m1_ccode:T.m1_ccode||"+63",mobile_phone_1:T.phone1||"",m2_ccode:T.m2_ccode||"+63",mobile_phone_2:T.phone2||""})},_=T=>{window.confirm("Are you sure you want to delete this lead?")&&d(c.filter(R=>R.id!==T))},E=T=>{const{name:R,value:U}=T.target;h(W=>({...W,[R]:U}))},A=T=>{T.preventDefault();const R=new FormData(T.target),U=Object.fromEntries(R.entries());U.name=`${U.firstName} ${U.lastName}`,U.assignedTo=o.find(W=>W.id.toString()===U.assignedTo)?.first_name+" "+o.find(W=>W.id.toString()===U.assignedTo)?.last_name,U.work_ccode=m.work_ccode,U.workPhone=m.work_phone,U.m1_ccode=m.m1_ccode,U.phone1=m.mobile_phone_1,U.m2_ccode=m.m2_ccode,U.phone2=m.mobile_phone_2,d(s?c.map(W=>W.id===s.id?{...W,...U}:W):[...c,{...U,id:c.length+1,createdAt:new Date().toISOString(),lastUpdated:new Date().toISOString()}]),C()};return e?a.jsx(rX,{lead:e,onBack:b}):a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-6 gap-3",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(Ln,{className:"mr-2 text-blue-600"})," Leads"]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full sm:w-auto",children:[a.jsxs("button",{className:"flex items-center justify-center border border-tertiary text-tertiary px-4 py-2 gap-2 rounded-md hover:bg-gray-800 hover:text-white transition w-full sm:w-auto",children:[a.jsx(Sc,{})," Download"]}),a.jsx("button",{onClick:()=>r(!0),className:"flex items-center justify-center bg-black text-white px-4 py-2 rounded-md hover:bg-gray-800 transition w-full sm:w-auto",children:" Add Leads"})]})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search Leads...",value:v,onChange:T=>x(T.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:w,onChange:T=>j(T.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"All Leads"}),a.jsx("option",{children:"New"}),a.jsx("option",{children:"Contacted"}),a.jsx("option",{children:"Qualified"}),a.jsx("option",{children:"Converted"}),a.jsx("option",{children:"Lost"})]})})]}),a.jsxs("div",{className:"bg-white shadow-sm overflow-x-auto rounded-md border border-gray-200",children:[a.jsxs("div",{className:"grid grid-cols-9 min-w-[800px] bg-gray-100 font-bold text-gray-600 text-sm px-4 py-3",children:[a.jsx("div",{children:"Name"}),a.jsx("div",{children:"Account"}),a.jsx("div",{children:"Title"}),a.jsx("div",{children:"Department"}),a.jsx("div",{children:"Email"}),a.jsx("div",{children:"Work Phone"}),a.jsx("div",{children:"Assigned To"}),a.jsx("div",{children:"Updated"}),a.jsx("div",{className:"text-center",children:"Actions"})]}),c.map(T=>a.jsxs("div",{className:"grid grid-cols-9 min-w-[800px] px-4 py-3 text-xs hover:bg-gray-100 transition cursor-pointer gap-x-4",onClick:()=>p(T),children:[a.jsx("div",{className:"truncate",children:T.name}),a.jsx("div",{className:"truncate",children:T.company}),a.jsx("div",{className:"truncate",children:T.title}),a.jsx("div",{className:"truncate",children:T.department}),a.jsx("div",{className:"truncate",children:T.email}),a.jsxs("div",{className:"truncate",children:[T.work_ccode," ",T.workPhone]}),a.jsx("div",{className:"truncate",children:T.assignedTo}),a.jsx("div",{className:"truncate",children:T.lastUpdated}),a.jsxs("div",{className:"flex justify-center space-x-2",children:[a.jsx("button",{className:"text-blue-500 hover:text-blue-700",onClick:R=>{R.stopPropagation(),S(T)},children:a.jsx(Rn,{})}),a.jsx("button",{className:"text-red-500 hover:text-red-700",onClick:R=>{R.stopPropagation(),_(T.id)},children:a.jsx(jt,{})})]})]},T.id))]}),n&&a.jsx("div",{id:"modalBackdrop",onClick:C,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-3xl rounded-xl shadow-lg p-5 sm:p-6 relative border border-gray-200 my-6 max-h-[90vh] overflow-y-auto",onClick:T=>T.stopPropagation(),children:[a.jsx("button",{onClick:C,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:a.jsx(St,{size:20})}),a.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:s?"Edit Lead":"Add New Lead"}),a.jsxs("form",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 text-xs sm:text-sm",onSubmit:A,children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"First Name"}),a.jsx("input",{name:"firstName",type:"text",placeholder:"Joe",defaultValue:s?s.name.split(" ")[0]:"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",required:!0})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Last Name"}),a.jsx("input",{name:"lastName",type:"text",placeholder:"Smith",defaultValue:s?s.name.split(" ")[1]:"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",required:!0})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Company"}),a.jsx("input",{name:"company",type:"text",placeholder:"ABC Company",defaultValue:s?.company||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Title"}),a.jsx("input",{name:"title",type:"text",placeholder:"ABC Agenda",defaultValue:s?.title||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Department"}),a.jsx("input",{name:"department",type:"text",placeholder:"Sales",defaultValue:s?.department||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Email"}),a.jsx("input",{name:"email",type:"text",placeholder:"abc@gmail.com",defaultValue:s?.email||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Work Phone"}),a.jsxs("div",{className:"border border-gray-300 rounded-md flex flex-row w-full gap-1",children:[a.jsx("select",{name:"work_ccode",value:m.work_ccode,onChange:E,className:"outline-none cursor-pointer py-2 border-r border-gray-400 w-15",children:dA.map(T=>a.jsx("option",{value:T.code,children:T.code},T.code))}),a.jsx("input",{type:"text",name:"work_phone",placeholder:"9----------",value:m.work_phone,onChange:E,className:"w-full outline-none"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Mobile Phone 1"}),a.jsxs("div",{className:"border border-gray-300 rounded-md flex flex-row w-full gap-1",children:[a.jsx("select",{name:"m1_ccode",value:m.m1_ccode,onChange:E,className:"outline-none cursor-pointer py-2 border-r border-gray-400 w-15",children:dA.map(T=>a.jsx("option",{value:T.code,children:T.code},T.code))}),a.jsx("input",{type:"text",name:"mobile_phone_1",placeholder:"9----------",value:m.mobile_phone_1,onChange:E,className:"w-full outline-none"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Mobile Phone 2"}),a.jsxs("div",{className:"border border-gray-300 rounded-md flex flex-row w-full gap-1",children:[a.jsx("select",{name:"m2_ccode",value:m.m2_ccode,onChange:E,className:"outline-none cursor-pointer py-2 border-r border-gray-400 w-15",children:dA.map(T=>a.jsx("option",{value:T.code,children:T.code},T.code))}),a.jsx("input",{type:"text",name:"mobile_phone_2",placeholder:"9----------",value:m.mobile_phone_2,onChange:E,className:"w-full outline-none"})]})]}),a.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Address"}),a.jsx("input",{name:"address",type:"text",placeholder:"Street No., Street Name, City, State/Province, Postal Code",defaultValue:s?.address||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Assign To"}),a.jsxs("select",{name:"assignedTo",defaultValue:o.find(T=>`${T.first_name} ${T.last_name}`===s?.assignedTo)?.id||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",children:[a.jsx("option",{value:"",disabled:!0,children:"Select user"}),o.map(T=>a.jsxs("option",{value:T.id,children:[T.first_name," ",T.last_name]},T.id))]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Territory"}),a.jsx("input",{type:"text",disabled:!0,name:"territory_id",placeholder:"Assign a user",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Source"}),a.jsxs("select",{className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:s?.source||"",name:"source",children:[a.jsx("option",{value:"",disabled:!0,children:"Select Source"}),a.jsx("option",{value:"Website",children:"Website"}),a.jsx("option",{value:"Referral",children:"Referral"}),a.jsx("option",{value:"Cold call",children:"Cold call"}),a.jsx("option",{value:"Event",children:"Event"}),a.jsx("option",{value:"Other",children:"Other"})]})]}),a.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Notes"}),a.jsx("textarea",{name:"notes",placeholder:"Additional details...",rows:3,defaultValue:s?.notes||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-2 col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("button",{type:"button",onClick:C,className:"px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition",children:s?"Update Lead":"Save Lead"})]})]})]})})]})}const OF=["To Do","In Progress","Review","Completed"],xg=10,iUe=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const n=t.getTimezoneOffset();return new Date(t.getTime()-n*60*1e3).toISOString().slice(0,16)},MF=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},oUe=e=>{const t=e.subject?.trim()??"",n=e.description?.trim()??"",r=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),e.status&&String(e.status).toUpperCase();let s=null,i=null,o=null,l=null;e.relatedType1==="Lead"&&e.relatedTo1?s=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?o=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2&&(l=Number(e.relatedTo2)));const c=e.assignedTo?Number(e.assignedTo):null,d=o||l||i||s,m=o?"Contact":l?"Deal":i?"Account":s?"Lead":null;return{title:t,description:n,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:c,notes:r,is_personal:!1,lead_id:s,account_id:i,contact_id:o,deal_id:l,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:d,related_type:m}},lUe=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",n=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",r=e.due_date||e.dueDate||null,s=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",o=()=>e.lead?.id||e.lead_id,l=()=>e.account?.id||e.account_id,c=()=>e.contact?.id||e.contact_id,d=()=>e.deal?.id||e.deal_id,m=()=>e.task_assign_to?.id||e.assigned_to,h=()=>e.lead?.title||e.lead_id,p=()=>e.account?.name||e.account_id,b=()=>i||e.contact_id,v=()=>e.deal?.name||e.deal_id;let x="Lead",w="",j="",C="",S="Lead",_="",E="",A="";const T=l(),R=p(),U=o(),W=h();if(T){x="Account",S="Account",_=R,w=String(T);const I=c(),M=d(),H=b(),q=v();I?(j="Contact",E="Contact",A=H,C=String(I)):M&&(E="Deal",j="Deal",A=q,C=String(M))}else U?(S="Lead",_=W,x="Lead",w=String(U)):e.related_type==="Account"&&(x="Account",w=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:e.status||"Not started",dueDate:r,dateAssigned:s,assignedToId:m()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:n,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:S,relatedTo1Text:_,relatedType2Text:E,relatedTo2Text:A,subject:e.title,relatedType1:x,relatedTo1:w,relatedType2:j,relatedTo2:C}};function cUe(){g.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=Ut(),[n,r]=g.useState("board"),[s,i]=g.useState(!1),[o,l]=g.useState(null),[c,d]=g.useState(!1),[m,h]=g.useState([]),[p,b]=g.useState(!0),[v,x]=g.useState(""),[w,j]=g.useState("Filter by Status"),[C,S]=g.useState("Filter by Priority"),[_,E]=g.useState([]),[A,T]=g.useState(1),[R,U]=g.useState(null),[W,I]=g.useState(!1),M=rt(),H=Xt(),[q,ae]=g.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""});g.useEffect(()=>{const O=H.state?.openTaskModal,ce=H.state?.initialTaskData;O&&(i(!0),ce&&ae(de=>({...de,...ce})),M(H.pathname,{replace:!0,state:{}}))},[H,M]);const K=async()=>{try{const O=await oe.get("/users/all");E(Array.isArray(O.data)?O.data:[])}catch(O){console.error("Failed to fetch users:",O),Q.error("Failed to fetch users.")}},B=async()=>{try{b(!0);const O=await oe.get("/tasks/all"),de=(Array.isArray(O.data)?O.data:[]).map(lUe);de.sort((Ce,Ee)=>{const Ge=Ce.createdAt?new Date(Ce.createdAt):0;return(Ee.createdAt?new Date(Ee.createdAt):0)-Ge}),console.log("Fetched Tasks:",de),h(de),n==="list"&&T(1)}catch(O){console.error("Failed to load tasks:",O),Q.error("Failed to load tasks.")}finally{b(!1)}};g.useEffect(()=>{!t&&e&&(K(),B())},[t,e]);const X=()=>{l(null),ae({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},le=(O=null,ce=!1)=>{l(O),d(ce),O?ae({id:O.id,subject:O.title||"",description:O.description||"",priority:O.priority||"Normal",status:O.status||"Not started",dueDate:iUe(O.dueDate),assignedTo:O.assignedToId?String(O.assignedToId):"",notes:O.notes||"",relatedType1Text:O.relatedType1Text||"",relatedTo1Text:O.relatedTo1Text||"",relatedType2Text:O.relatedType2Text||"",relatedTo2Text:O.relatedTo2Text||"",relatedType1:O.relatedType1||"",relatedTo1:O.relatedTo1||"",relatedType2:O.relatedType2||"",relatedTo2:O.relatedTo2||""}):X(),i(!0)},ue=()=>{i(!1),l(null),d(!1),X()},J=async O=>{const ce=oUe(O);try{o&&!c?(await oe.put(`/tasks/${o.id}`,ce),Q.success("Task updated successfully.")):(await oe.post("/tasks/create",ce),Q.success("Task created successfully.")),i(!1),await B()}catch(de){console.error("Failed to save task:",de);const Ce=de.response?.data?.detail||"Failed to save task.";Q.error(Ce)}},ne=O=>{O&&U({title:"Delete Task",message:a.jsxs(a.Fragment,{children:["Are you sure you want to delete ",a.jsx("span",{className:"font-semibold",children:O.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:O.id}})},pe=async()=>{if(!R?.action){U(null);return}const{action:O}=R;I(!0);try{O.type==="delete"&&(await oe.delete(`/tasks/${O.targetId}`),Q.success("Task deleted successfully."),await B())}catch(ce){console.error("Task action failed:",ce),Q.error("Failed to delete task.")}finally{I(!1),U(null)}},we=()=>{W||U(null)},ye=g.useMemo(()=>{const O=v.trim().toLowerCase();return[...m].sort((de,Ce)=>{const Ee=de.createdAt?new Date(de.createdAt):0;return(Ce.createdAt?new Date(Ce.createdAt):0)-Ee}).filter(de=>{const Ce=O===""||de.title?.toLowerCase().includes(O)||de.description?.toLowerCase().includes(O)||de.assignedToName?.toLowerCase().includes(O)||de.createdBy?.toLowerCase().includes(O),Ee=w==="Filter by Status"||de.status===w,Ge=C==="Filter by Priority"||de.priority===C;return Ce&&Ee&&Ge})},[m,v,w,C]);g.useEffect(()=>{T(1)},[v,w,C,n]),g.useEffect(()=>{if(n==="list"){const O=ye.length===0?1:Math.ceil(ye.length/xg);A>O&&T(O)}},[ye.length,A,n]);const Te=g.useMemo(()=>{if(n==="board")return ye;const O=(A-1)*xg;return ye.slice(O,O+xg)},[ye,A,n]),Ae=g.useMemo(()=>{const O=new Date;return[{title:"To Do",value:m.filter(ce=>ce.status==="Not started").length,icon:Za,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:m.filter(ce=>ce.status==="In progress").length,icon:Bs,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:m.filter(ce=>ce.status==="Completed").length,icon:Fn,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:m.filter(ce=>ce.dueDate&&new Date(ce.dueDate)<O&&ce.status!=="Completed").length,icon:Vp,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:m.filter(ce=>ce.priority==="High").length,icon:ml,color:"text-orange-600",bgColor:"bg-orange-100"}]},[m]),Pe=O=>O.dueDate&&new Date(O.dueDate)<new Date&&O.status!=="Completed",$=O=>{switch(O.status){case"To Do":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In Progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Review":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},Ne=O=>{switch(O){case"To Do":return"bg-blue-100 text-blue-700";case"In Progress":return"bg-purple-100 text-purple-700";case"Review":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},fe=O=>{switch(O){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&a.jsx(yt,{message:"Loading tasks..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(Bs,{className:"text-blue-600"})," Tasks Board"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{type:"button",onClick:()=>le(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[a.jsx(Rt,{})," Create Task"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ae.map(O=>a.jsx(dUe,{...O},O.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search tasks",value:v,onChange:O=>x(O.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[a.jsxs("select",{value:w,onChange:O=>j(O.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"Filter by Status"}),OF.map(O=>a.jsx("option",{children:O},O))]}),a.jsxs("select",{value:C,onChange:O=>S(O.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"Filter by Priority"}),a.jsx("option",{children:"High"}),a.jsx("option",{children:"Normal"}),a.jsx("option",{children:"Low"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("button",{type:"button",onClick:()=>r("board"),className:`px-4 py-2 rounded-full text-sm ${n==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),a.jsx("button",{type:"button",onClick:()=>r("list"),className:`px-4 py-2 rounded-full text-sm ${n==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&ye.length===0&&a.jsx("p",{className:"text-center text-gray-500 mt-10 p-4 bg-white shadow rounded-lg",children:"No tasks found matching current filters."}),!p&&!t&&ye.length>0&&n==="board"&&a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:OF.map(O=>{const ce=Te.filter(de=>de.status===O);return a.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),a.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:O}),a.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:ce.length})]}),a.jsx("div",{className:`space-y-3 ${ce.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:ce.length>0?ce.map(de=>a.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${$(de)}`,onClick:()=>le(de,!0),children:[a.jsxs("div",{className:"text-left flex-1",children:[a.jsx("p",{className:"font-medium text-gray-800 text-sm",children:de.title}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",de.priority]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",de.assignedToName]}),a.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",a.jsx("span",{className:Pe(de)?"text-red-600":"text-gray-600",children:de.dateAssigned?MF(de.dateAssigned):""})]})]}),a.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[a.jsx("button",{type:"button",onClick:Ce=>{Ce.stopPropagation(),le(de)},className:"text-blue-500 hover:text-blue-700",children:a.jsx(pn,{})}),a.jsx("button",{type:"button",onClick:Ce=>{Ce.stopPropagation(),ne(de)},className:"text-red-500 hover:text-red-700",children:a.jsx(jt,{})})]})]},de.id)):a.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No tasks"})})]},O)})}),!p&&!t&&ye.length>0&&n==="list"&&a.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Actions"})]})}),a.jsx("tbody",{children:Te.map(O=>a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",onClick:()=>{console.log("Opening task in view mode:",O),le(O,!0)},children:[a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",children:O.title}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Ne(O.status||"To Do")}`,children:O.status||"To Do"})}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${fe(O.priority||"Low")}`,children:O.priority||"Low"})}),a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:O.assignedToName||"Unassigned"}),a.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${Pe(O)?"text-red-600 font-medium":""}`,children:O.dateAssigned?MF(O.dateAssigned):""}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-3",onClick:ce=>ce.stopPropagation(),children:[a.jsxs("button",{type:"button",onClick:()=>le(O),className:"text-blue-500 hover:text-blue-700 flex items-center gap-1",children:[a.jsx(pn,{})," Edit"]}),a.jsxs("button",{type:"button",onClick:()=>ne(O),className:"text-red-500 hover:text-red-700 flex items-center gap-1",children:[a.jsx(jt,{})," Delete"]})]})})]},O.id))})]})})}),!p&&!t&&n==="list"&&a.jsx(Et,{className:"mt-6",totalItems:ye.length,pageSize:xg,currentPage:ye.length===0?0:A,onPrev:()=>T(O=>Math.max(O-1,1)),onNext:()=>T(O=>Math.min(O+1,Math.max(1,Math.ceil(ye.length/xg)||1))),label:"tasks"}),a.jsx(Wx,{isOpen:s,onClose:ue,onSave:J,onEdit:()=>d(!1),setFormData:ae,formData:q,isEditing:!c&&!!o,viewMode:c,users:_,currentUser:e,onDelete:ne}),R&&a.jsx(uUe,{open:!0,title:R.title,message:R.message,confirmLabel:R.confirmLabel,cancelLabel:R.cancelLabel,variant:R.variant,onConfirm:pe,onCancel:we,loading:W})]})}function dUe({icon:e,title:t,value:n,color:r,bgColor:s,onClick:i}){return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${s} ${r} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function uUe({open:e,title:t,message:n,confirmLabel:r,cancelLabel:s,variant:i,loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:s}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":r})]})]})})}function mUe(){g.useEffect(()=>{document.title="Campaign | Sari-Sari CRM"},[]);const[e,t]=g.useState(!1),[n,r]=g.useState(!1),[s,i]=g.useState(null),[o,l]=g.useState(""),[c,d]=g.useState("All Statuses"),[m,h]=g.useState({show:!1,action:null,campaign:null}),[p,b]=g.useState([{id:1,name:"Christmas Promo 2025",subject:" Holiday Discounts Await You!",content:"Spread holiday cheer with exclusive deals this Christmas season!",status:"Scheduled",recipients:1200,scheduleDate:"2025-12-15T10:00",created:"2025-10-20",createdBy:"Marketing Team"},{id:2,name:"New Year Kickoff",subject:"Start 2026 with Big Savings!",content:"Kick off your year right with amazing offers from us!",status:"Draft",recipients:"",scheduleDate:"",created:"2025-10-25",createdBy:"Marketing Team"}]),[v,x]=g.useState({id:null,name:"",subject:"",content:"",status:"Draft",recipients:"",scheduleDate:""}),w=p.filter(I=>{const M=c==="All Statuses"||I.status===c,H=I.name.toLowerCase().includes(o.toLowerCase())||I.subject.toLowerCase().includes(o.toLowerCase());return M&&H}),j=()=>{r(!1),x({id:null,name:"",subject:"",content:"",status:"Draft",recipients:"",scheduleDate:""}),t(!0)},C=(I,M)=>{M.stopPropagation(),r(!0),x(I),t(!0)},S=(I,M)=>{M.stopPropagation(),h({show:!0,action:"delete",campaign:I})},_=I=>{I.preventDefault(),h({show:!0,action:n?"edit":"add",campaign:{...v}})},E=()=>{if(m.action==="add"){const I={...m.campaign,id:Date.now(),created:new Date().toLocaleDateString(),createdBy:"Marketing Team"};b(M=>[...M,I]),t(!1)}else m.action==="edit"?(b(I=>I.map(M=>M.id===m.campaign.id?{...m.campaign}:M)),t(!1)):m.action==="delete"&&b(I=>I.filter(M=>M.id!==m.campaign.id));h({show:!1,action:null,campaign:null})},A=()=>{h({show:!1,action:null,campaign:null})},T=I=>i(I),R=()=>i(null),U=I=>{const{name:M,value:H}=I.target;x(q=>({...q,[M]:H}))},W=I=>{I.target.id==="modalBackdrop"&&t(!1)};return s?a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[a.jsxs("button",{onClick:R,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-6 cursor-pointer",children:[a.jsx(du,{className:"mr-1 w-5 h-5"})," Back"]}),a.jsx("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:s.name}),a.jsx("span",{className:`text-xs sm:text-sm px-2 py-0.5 rounded ${s.status==="Scheduled"?"bg-yellow-100 text-yellow-700":s.status==="Sent"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:s.status})]})}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Campaign Information"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm text-gray-700",children:[a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Subject:"})," ",a.jsx("br",{}),s.subject]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Created By:"})," ",a.jsx("br",{}),s.createdBy]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Created On:"})," ",a.jsx("br",{}),s.created]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Scheduled Date:"})," ",a.jsx("br",{}),s.scheduleDate?new Date(s.scheduleDate).toLocaleString():""]}),a.jsxs("p",{className:"sm:col-span-2",children:[a.jsx("span",{className:"font-semibold",children:"Email Content:"})," ",a.jsx("br",{}),s.content]}),s.status==="Scheduled"&&a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Recipients:"})," ",a.jsx("br",{}),s.recipients]})]})]})]}):a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(Tn,{className:"mr-2 text-blue-600"})," Email Campaigns"]}),a.jsx("button",{onClick:j,className:"flex items-center bg-black text-white px-4 py-2 rounded-md hover:bg-gray-800 transition text-sm sm:text-base shadow-sm",children:" New Campaign"})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search by campaign name or email subject...",value:o,onChange:I=>l(I.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:c,onChange:I=>d(I.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"All Statuses"}),a.jsx("option",{children:"Draft"}),a.jsx("option",{children:"Scheduled"}),a.jsx("option",{children:"Sent"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-[700px] w-full border border-gray-200 rounded-lg bg-white shadow-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-sm text-gray-600",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Campaign Name"}),a.jsx("th",{className:"py-3 px-4",children:"Email Subject"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4",children:"Recipients"}),a.jsx("th",{className:"py-3 px-4",children:"Scheduled Date"}),a.jsx("th",{className:"py-3 px-4 text-center",children:"Actions"})]})}),a.jsx("tbody",{className:"text-sm text-gray-700",children:w.map((I,M)=>a.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer transition",onClick:()=>T(I),children:[a.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:I.name}),a.jsx("td",{className:"py-3 px-4",children:I.subject}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${I.status==="Scheduled"?"bg-yellow-100 text-yellow-700":I.status==="Sent"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:I.status})}),a.jsx("td",{className:"py-3 px-4",children:I.recipients?`${I.recipients} emails`:""}),a.jsx("td",{className:"py-3 px-4",children:I.scheduleDate?new Date(I.scheduleDate).toLocaleString():""}),a.jsx("td",{className:"py-3 px-4 text-center",onClick:H=>H.stopPropagation(),children:a.jsxs("div",{className:"flex justify-center gap-3",children:[a.jsx("button",{onClick:H=>C(I,H),className:"text-blue-500 hover:text-blue-700",children:a.jsx(Rn,{})}),a.jsx("button",{onClick:H=>S(I,H),className:"text-red-500 hover:text-red-700",children:a.jsx(jt,{})})]})})]},M))})]})}),e&&a.jsx("div",{id:"modalBackdrop",onClick:W,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl shadow-lg p-5 sm:p-6 relative border border-gray-200 my-6 max-h-[90vh] overflow-y-auto",onClick:I=>I.stopPropagation(),children:[a.jsx("button",{onClick:()=>t(!1),className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:a.jsx(St,{size:20})}),a.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:n?"Edit Campaign":"Add New Campaign"}),a.jsxs("form",{onSubmit:_,className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Campaign Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"name",value:v.name,onChange:U,placeholder:"e.g. Summer Sale Blast",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Email Subject ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"subject",value:v.subject,onChange:U,placeholder:"e.g. Big discounts await you!",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[a.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Campaign Status ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{name:"status",value:v.status,onChange:U,required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",children:[a.jsx("option",{value:"Draft",children:"Draft"}),a.jsx("option",{value:"Scheduled",children:"Scheduled"}),a.jsx("option",{value:"Sent",children:"Sent"})]})]}),v.status==="Scheduled"&&a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:col-span-2",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Scheduled Date ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"datetime-local",name:"scheduleDate",value:v.scheduleDate,onChange:U,required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Recipient Count ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"number",name:"recipients",value:v.recipients,onChange:U,placeholder:"e.g. 500",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),a.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[a.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Email Content ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("textarea",{name:"content",rows:4,value:v.content,onChange:U,placeholder:"Write your email message here...",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),a.jsxs("div",{className:"flex justify-end gap-2 sm:col-span-2 pt-3 border-t border-gray-100 mt-2",children:[a.jsx("button",{type:"button",onClick:()=>t(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:"Save Campaign"})]})]})]})}),m.show&&a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 relative border border-gray-200",children:[a.jsx("button",{onClick:A,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:a.jsx(St,{size:20})}),a.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:m.action==="delete"?"Confirm Delete":m.action==="edit"?"Confirm Edit":"Confirm Add"}),a.jsx("p",{className:"text-center text-gray-600 mb-6",children:m.action==="delete"?a.jsxs(a.Fragment,{children:["Are you sure you want to delete the campaign"," ",a.jsx("span",{className:"font-semibold",children:m.campaign.name}),"?"]}):m.action==="edit"?a.jsxs(a.Fragment,{children:["Save changes to"," ",a.jsx("span",{className:"font-semibold",children:m.campaign.name}),"?"]}):a.jsxs(a.Fragment,{children:["Add new campaign"," ",a.jsx("span",{className:"font-semibold",children:m.campaign.name}),"?"]})}),a.jsxs("div",{className:"flex justify-center gap-4",children:[a.jsx("button",{onClick:A,className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),a.jsx("button",{onClick:E,className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:"Confirm"})]})]})})]})}const fUe=[{id:1,name:"Welcome E-mail",category:"Welcome",subject:"Welcome to {company}!",body:`Hi {name}, Welcome to {company}! We're excited to have you on board.

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed vel quam vitae erat venenatis feugiat. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.

Best regards, The Team`,createdBy:"Angel Angelo",date:"12/10/23"},{id:2,name:"Product Demo Follow-up",category:"Follow-up",subject:"Thanks for checking out our demo",body:`Hi {name}, Thank you for taking the time to view our product demo.
Do you have any questions? Let's schedule a call to discuss how we can help {company}.

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed vel quam vitae erat venenatis feugiat. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.

Best, Sales Team`,createdBy:"Angel Angelo",date:"12/10/23"}],IF={Welcome:"bg-orange-100 text-orange-700","Follow-up":"bg-blue-100 text-blue-700",Newsletter:"bg-green-100 text-green-700",Promotional:"bg-purple-100 text-purple-700",default:"bg-gray-100 text-gray-800"};function hUe(){g.useEffect(()=>{document.title="Templates | Sari-Sari CRM"},[]);const[e,t]=g.useState(fUe),[n,r]=g.useState(!1),[s,i]=g.useState(null),[o,l]=g.useState(null),[c,d]=g.useState(""),[m,h]=g.useState("All Categories"),[p,b]=g.useState({name:"",category:"",subject:"",body:""}),[v,x]=g.useState({show:!1,action:null,template:null}),w=()=>{l(null),i(null),r(!1)},j=M=>{b({...p,[M.target.name]:M.target.value})},C=()=>{x({show:!0,action:"add",template:{...p}})},S=M=>{i(M),b({name:M.name,category:M.category,subject:M.subject,body:M.body})},_=()=>{x({show:!0,action:"edit",template:{...p,id:s.id}})},E=M=>{x({show:!0,action:"delete",template:M})},A=M=>{jx.success(`Template "${M.name}" selected for use!`),x({show:!1,action:null,template:null})},T=()=>{const M=v.template;if(v.action==="add"){const H={...M,id:e.length+1,createdBy:"You",date:new Date().toLocaleDateString()};t(q=>[H,...q]),r(!1),b({name:"",category:"",subject:"",body:""})}else v.action==="edit"?(t(H=>H.map(q=>q.id===M.id?{...M}:q).sort((q,ae)=>new Date(ae.date).getTime()-new Date(q.date).getTime())),i(null),b({name:"",category:"",subject:"",body:""}),l(null)):v.action==="delete"&&(t(H=>H.filter(q=>q.id!==M.id)),l(null));x({show:!1,action:null,template:null})},R=()=>{x({show:!1,action:null,template:null})},U=M=>l(M),W=e.filter(M=>M.name.toLowerCase().includes(c.toLowerCase())&&(m==="All Categories"||M.category===m)),I=(M,H=!1)=>a.jsxs("div",{className:"flex flex-col justify-between h-full",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:M.name}),a.jsx("span",{className:`text-xs px-3 py-1 rounded-md ${IF[M.category]||IF.default}`,children:M.category})]}),a.jsx("p",{className:"text-gray-600 mb-2 text-sm",children:M.subject}),a.jsx("div",{className:`text-gray-800 text-sm p-2 rounded-md ${H?"bg-gray-50 max-h-40 overflow-y-auto":"truncate"} whitespace-pre-line`,style:H?{}:{display:"-webkit-box",WebkitLineClamp:7,WebkitBoxOrient:"vertical",overflow:"hidden"},children:M.body})]}),a.jsxs("div",{className:"flex justify-between items-center mt-4",children:[!H&&a.jsxs("button",{onClick:q=>{q.stopPropagation(),A(M)},className:"flex items-center gap-1 bg-black text-white px-3 py-1 rounded-md text-sm hover:bg-gray-900 transition",children:[a.jsx(Br,{})," Use Template"]}),H&&a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:q=>{q.stopPropagation(),S(M)},className:"flex items-center gap-1 bg-black text-white px-3 py-1 rounded-md text-sm hover:bg-gray-900 transition",children:[a.jsx(pn,{})," Edit"]}),a.jsxs("button",{onClick:q=>{q.stopPropagation(),E(M)},className:"flex items-center gap-1 bg-red-500 text-white px-3 py-1 rounded-md text-sm hover:bg-red-600 transition",children:[a.jsx(jt,{})," Delete"]})]}),a.jsxs("p",{className:"text-gray-400 text-xs text-right",children:["Created by: ",M.createdBy," | ",M.date]})]})]});return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter min-h-screen",children:[a.jsx(Nx,{position:"top-center",reverseOrder:!1}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(Br,{className:"mr-2 text-black"})," Templates"]}),a.jsx("button",{onClick:()=>{r(!0),i(null),b({name:"",category:"",subject:"",body:""})},className:"flex items-center bg-black text-white px-4 py-2 rounded-md hover:bg-gray-800 transition text-sm sm:text-base shadow-sm",children:" New Template"})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search by template name...",value:c,onChange:M=>d(M.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:m,onChange:M=>h(M.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"All Categories"}),a.jsx("option",{children:"Welcome"}),a.jsx("option",{children:"Follow-up"}),a.jsx("option",{children:"Newsletter"}),a.jsx("option",{children:"Promotional"})]})})]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:W.map(M=>a.jsxs("div",{onClick:()=>U(M),className:"bg-white rounded-2xl shadow-lg border border-gray-100 hover:shadow-xl cursor-pointer flex flex-col justify-between h-80 transition",children:[a.jsx("div",{className:"h-2 w-full rounded-t-2xl bg-black"}),a.jsx("div",{className:"p-4 flex-grow",children:I(M)})]},M.id))}),(n||s)&&a.jsx("div",{onClick:w,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl shadow-lg p-5 sm:p-6 relative border border-gray-200 my-6 max-h-[90vh] overflow-y-auto",onClick:M=>M.stopPropagation(),children:[a.jsx("button",{onClick:w,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:a.jsx(St,{size:20})}),a.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:s?"Edit Template":"Create New Template"}),a.jsxs("form",{onSubmit:M=>{M.preventDefault(),s?_():C()},className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Template Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"name",value:p.name,onChange:j,placeholder:"e.g. Welcome Email",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Category ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{name:"category",value:p.category,onChange:j,required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none",children:[a.jsx("option",{value:"",children:"Select Category"}),a.jsx("option",{value:"Welcome",children:"Welcome"}),a.jsx("option",{value:"Follow-up",children:"Follow-up"}),a.jsx("option",{value:"Newsletter",children:"Newsletter"}),a.jsx("option",{value:"Promotional",children:"Promotional"})]})]}),a.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[a.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Subject Line ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"subject",value:p.subject,onChange:j,placeholder:"e.g. Welcome to our service!",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none"})]}),a.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[a.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Email Body ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("textarea",{name:"body",rows:4,value:p.body,onChange:j,placeholder:"Write your email message here...",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none resize-none"})]}),a.jsxs("div",{className:"flex justify-end gap-2 sm:col-span-2 pt-3 border-t border-gray-100 mt-2",children:[a.jsx("button",{type:"button",onClick:w,className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:s?"Update Template":"Create Template"})]})]})]})}),o&&!s&&a.jsx("div",{onClick:w,className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"rounded-2xl shadow-lg cursor-default h-80 w-full max-w-md overflow-hidden flex flex-col",onClick:M=>M.stopPropagation(),children:[a.jsx("div",{className:"h-2 w-full rounded-t-2xl bg-black"}),a.jsx("div",{className:"p-4 flex-grow overflow-y-auto bg-gray-50",children:I(o,!0)})]})}),v.show&&a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 relative border border-gray-200",children:[a.jsx("button",{onClick:R,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:a.jsx(St,{size:20})}),a.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:v.action==="delete"?"Confirm Delete":v.action==="edit"?"Confirm Update":v.action==="add"?"Confirm Add":"Confirm Use"}),a.jsx("p",{className:"text-center text-gray-600 mb-6",children:v.action==="delete"?a.jsxs(a.Fragment,{children:["Are you sure you want to delete the template"," ",a.jsx("span",{className:"font-semibold",children:v.template.name}),"?"]}):v.action==="edit"?a.jsxs(a.Fragment,{children:["Save changes to"," ",a.jsx("span",{className:"font-semibold",children:v.template.name}),"?"]}):v.action==="add"?a.jsxs(a.Fragment,{children:["Add new template"," ",a.jsx("span",{className:"font-semibold",children:v.template.name}),"?"]}):a.jsxs(a.Fragment,{children:["Use template"," ",a.jsx("span",{className:"font-semibold",children:v.template.name}),"?"]})}),a.jsxs("div",{className:"flex justify-center gap-4",children:[a.jsx("button",{onClick:R,className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),a.jsx("button",{onClick:T,className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:"Confirm"})]})]})})]})}function gUe({toggleSidebar:e}){const[t,n]=g.useState(!1),r=g.useRef(null),s=Xt(),i=rt(),{logout:o}=er(),{user:l,fetchUser:c}=Ut(),d={"/group-manager/dashboard":"Dashboard","/group-manager/accounts":"Accounts","/group-manager/contacts":"Contacts","/reports":"Reports","/leads":"Leads","/group-manager/Audit":"Audit","/group-manager/targets":"Targets","/group-manager/leads":"Leads","/group-manager/quotes":"Quotes","/group-manager/users":"Users","/group-manager/deals":"Deals"};g.useEffect(()=>{c()},[]),g.useEffect(()=>{const h=()=>{c()};return window.addEventListener("userProfileUpdated",h),()=>{window.removeEventListener("userProfileUpdated",h)}},[c]);const m=d[s.pathname]||"Group Manager Panel";return g.useEffect(()=>{function h(p){r.current&&!r.current.contains(p.target)&&n(!1)}return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]),a.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})})}),a.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:m})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("button",{className:"relative text-gray-600 hover:text-gray-800",children:[a.jsx(Wp,{className:"text-xl"}),a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs w-4 h-4 flex items-center justify-center rounded-full",children:"3"})]}),a.jsxs("div",{className:"relative",ref:r,children:[a.jsxs("button",{onClick:()=>n(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[a.jsx("img",{src:l?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 aspect-square object-cover rounded-full"}),a.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[l?.first_name," ",l?.last_name]})]}),t&&a.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4",children:[a.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[a.jsx("img",{src:l?.profile_picture||"https://via.placeholder.com/80",alt:"Profile",className:"w-16 h-16 rounded-full object-cover"}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[l?.first_name," ",l?.middle_name," ",l?.last_name]}),a.jsx("p",{className:"text-[11px] text-gray-600 font-light w-full truncate",children:"Group Manager"})]})]}),a.jsxs("div",{className:"mt-6 space-y-1 px-4 text-left",children:[a.jsx("button",{onClick:()=>{i("/group-manager/users"),n(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Invite Your Team"}),a.jsx("button",{onClick:()=>{i("/group-manager/manage-account"),n(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Manage Your Account"}),a.jsx("div",{className:"border-t border-gray-200 my-2"}),a.jsx("button",{onClick:o,className:"block w-full text-sm text-red-600 hover:text-red-700 hover:bg-gray-50 py-2 rounded text-left",children:"Logout"})]})]})]})]})]})}function pUe(){const[e,t]=g.useState(!0),[n,r]=g.useState(!1),[s,i]=g.useState(!1),[o,l]=g.useState(!1),c=Xt(),{user:d}=Ut();g.useEffect(()=>{d&&console.log("Fetched user:",d)},[d]),g.useEffect(()=>{console.log("Simulating user fetch... (no backend)")},[]),g.useEffect(()=>{document.title="Panel | Sari-Sari CRM"},[]);const m="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",h="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition",b=["/group-manager/accounts","/group-manager/contacts","/group-manager/leads","/group-manager/deals","/group-manager/quotes","/group-manager/targets","/group-manager/meetings"].includes(c.pathname);return a.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[a.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${o?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[a.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[a.jsxs("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:[" Sari-Sari.CRM"," ",a.jsx("span",{className:"text-[12px] text-gray-700 font-medium align-bottom",children:"v2"})]}),d&&d.company&&a.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:d.company.company_name})]}),a.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[a.jsxs(st,{to:"/group-manager/dashboard",className:({isActive:v})=>v?m:h,children:[a.jsx(qp,{className:"text-lg"}),a.jsx("span",{children:"Dashboard"})]}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>t(!e),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx($n,{className:"text-lg"}),"Sales"]}),a.jsx(Rr,{className:`transition-transform ${e||b?"rotate-180":""}`})]}),(e||b)&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(st,{to:"/group-manager/accounts",className:({isActive:v})=>v?m:h,children:[a.jsx(en,{})," Accounts"]}),a.jsxs(st,{to:"/group-manager/contacts",className:({isActive:v})=>v?m:h,children:[a.jsx(Qt,{})," Contacts"]}),a.jsxs(st,{to:"/group-manager/leads",className:({isActive:v})=>v?m:h,children:[a.jsx(Ln,{})," Leads"]}),a.jsxs(st,{to:"/group-manager/deals",className:({isActive:v})=>v?m:h,children:[a.jsx($n,{})," Deals"]}),a.jsxs(st,{to:"/group-manager/quotes",className:({isActive:v})=>v?m:h,children:[a.jsx(Br,{})," Quotes"]}),a.jsxs(st,{to:"/group-manager/targets",className:({isActive:v})=>v?m:h,children:[a.jsx(ms,{})," Targets"]})]})]}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>r(!n),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(mr,{className:"text-lg"}),"Activity"]}),a.jsx(Rr,{className:`transition-transform ${n?"rotate-180":""}`})]}),n&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(st,{to:"/group-manager/tasks",className:({isActive:v})=>v?m:h,children:[a.jsx(kn,{})," Tasks"]}),a.jsxs(st,{to:"/group-manager/meetings",className:({isActive:v})=>v?m:h,children:[a.jsx(ft,{})," Meetings"]}),a.jsxs(st,{to:"/group-manager/calls",className:({isActive:v})=>v?m:h,children:[a.jsx(fr,{})," Calls"]}),a.jsxs(st,{to:"/group-manager/audit",className:({isActive:v})=>v?m:h,children:[a.jsx(mr,{})," Audit"]})]})]}),a.jsx("div",{children:a.jsx(st,{to:"/group-manager/territory",className:({isActive:v})=>v?m:h,children:a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(_c,{className:"text-lg"}),"Territory"]})})}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!s),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(ZT,{className:"text-lg"}),"User Management"]}),a.jsx(Rr,{className:`transition-transform ${s?"rotate-180":""}`})]}),s&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(st,{to:"/group-manager/users",className:({isActive:v})=>v?m:h,children:[a.jsx(en,{})," Users"]}),a.jsxs(st,{to:"/group-manager/manage-account",className:({isActive:v})=>v?m:h,children:[a.jsx(Qt,{})," Manage Account"]})]})]})]}),a.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),o&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>l(!1)}),a.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[a.jsx(gUe,{toggleSidebar:()=>l(!o)}),a.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:a.jsx(yf,{})})]})]})}const xUe=e=>a.jsx(bt,{...e}),yUe=e=>a.jsx(Cc,{...e}),bUe=e=>a.jsx(eL,{...e}),sX=e=>a.jsx(Za,{...e}),vUe=e=>a.jsx(xw,{...e}),wUe=e=>a.jsx(KT,{...e}),NUe=e=>a.jsx(ft,{...e}),jUe=e=>a.jsx(pt,{...e}),CUe=e=>a.jsx(XT,{...e}),iX=e=>a.jsx(QT,{...e}),oX=e=>a.jsx(en,{...e}),lX=e=>a.jsx(Qt,{...e}),SUe=e=>a.jsx(Ln,{...e}),_Ue=e=>a.jsx($n,{...e}),AUe=e=>a.jsx(Br,{...e}),EUe=e=>a.jsx(ms,{...e}),TUe=e=>a.jsx(Fn,{...e}),LUe=e=>a.jsx(ft,{...e}),kUe=e=>a.jsx(fr,{...e}),PUe=e=>a.jsx(_c,{...e}),DUe=e=>a.jsx(mr,{...e}),cX=e=>`P ${new Intl.NumberFormat("en-PH",{minimumFractionDigits:0}).format(e)}`,OUe=e=>{switch(e){case"Negotiation":return{text:"text-purple-700",bg:"bg-purple-100"};case"Proposal":return{text:"text-red-700",bg:"bg-red-100"};case"Qualification":return{text:"text-yellow-700",bg:"bg-yellow-100"};case"Prospecting":return{text:"text-blue-700",bg:"bg-blue-100"};case"Closed Won":return{text:"text-green-700",bg:"bg-green-100"};case"Closed Lost":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},MUe=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},IUe=e=>{switch(e){case"call":return{Icon:jUe,color:"text-red-500",bgColor:"bg-red-100"};case"qualification":return{Icon:CUe,color:"text-green-600",bgColor:"bg-green-100"};case"meeting":default:return{Icon:NUe,color:"text-blue-500",bgColor:"bg-blue-100"}}},$Ue=e=>{switch(e.toUpperCase()){case"HIGH":return{text:"text-red-700",bg:"bg-red-100"};case"LOW":return{text:"text-blue-700",bg:"bg-blue-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},RUe=({searchQuery:e,onSearchChange:t,searchResults:n,onSearchResultClick:r})=>{const s=rt(),[i,o]=g.useState(!1),l=g.useRef(null),c=[{icon:oX,label:"Account"},{icon:lX,label:"Contact"},{icon:SUe,label:"Leads"},{icon:_Ue,label:"Deals"},{icon:AUe,label:"Quotes"},{icon:EUe,label:"Target"},{icon:TUe,label:"Task"},{icon:LUe,label:"Meeting"},{icon:kUe,label:"Call"},{icon:DUe,label:"Audit"},{icon:PUe,label:"Territory"}];g.useEffect(()=>{const h=p=>{l.current&&!l.current.contains(p.target)&&o(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]);const d=h=>{t(h.target.value),o(h.target.value.trim().length>0)},m=h=>{r&&r(h),o(!1)};return a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 sm:p-4 flex flex-col items-start space-y-4 w-full",children:[a.jsxs("div",{className:"w-full flex justify-center relative",ref:l,children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg lg:mt-3 px-4 py-2 w-full max-w-md md:max-w-lg lg:max-w-2xl focus-within:ring-2 focus-within:ring-blue-500 transition duration-150",children:[a.jsx(xUe,{size:20,className:"text-gray-400 mr-3 flex-shrink-0"}),a.jsx("input",{type:"text",placeholder:"Search Leads, Deals, or Accounts...",className:"focus:outline-none text-base w-full",value:e,onChange:d,onFocus:()=>e.trim().length>0&&o(!0)})]}),i&&Array.isArray(n)&&n.length>0&&a.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:n.map((h,p)=>a.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition duration-150",onClick:()=>m(h),children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:h.name}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:h.type}),h.details&&a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:h.details})]}),a.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${h.type==="Lead"?"bg-blue-100 text-blue-600":h.type==="Deal"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:h.type})]})},p))}),i&&e.trim().length>0&&(!Array.isArray(n)||n.length===0)&&a.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 p-4 text-center text-sm text-gray-500",children:"No results found"})]}),a.jsx("div",{className:"w-full overflow-x-auto lg:overflow-x-hidden scroll-smooth flex justify-center",children:a.jsx("div",{className:"flex flex-nowrap space-x-3 lg:space-x-4 xl:space-x-3 px-2 sm:px-0",children:c.map((h,p)=>a.jsxs("div",{className:"relative flex-shrink-0 group",children:[a.jsx("button",{className:"p-3 text-gray-500 hover:text-gray-900 transition duration-150 rounded-full hover:bg-gray-100 focus:outline-none cursor-pointer","aria-label":h.label,onClick:()=>{switch(h.label){case"Account":s("/group-manager/accounts");break;case"Contact":s("/group-manager/contacts");break;case"Leads":s("/group-manager/leads");break;case"Deals":s("/group-manager/deals");break;case"Quotes":s("/group-manager/quotes");break;case"Target":s("/group-manager/targets");break;case"Task":s("/group-manager/tasks");break;case"Meeting":s("/group-manager/meetings");break;case"Call":s("/group-manager/calls");break;case"Audit":s("/group-manager/audit");break;case"Territory":s("/group-manager/territory");break;default:console.log(`Clicked ${h.label}`)}},children:a.jsx(h.icon,{size:24,className:"lg:scale-95"})}),a.jsx("span",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-1 bg-gray-700 text-white text-xs font-medium rounded-lg whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition duration-200 pointer-events-none z-20 shadow-md",children:h.label})]},p))})})]})},zUe=({action:e,description:t,entity_type:n,entity_name:r,timestamp:s})=>{const i=rt(),o=m=>{if(!m)return"Unknown";const h=new Date(m),b=new Date-h,v=Math.floor(b/6e4),x=Math.floor(b/36e5),w=Math.floor(b/864e5);return v<1?"Just now":v<60?`${v} min ago`:x<24?`${x} hour${x>1?"s":""} ago`:w<7?`${w} day${w>1?"s":""} ago`:h.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},l=e||t||"Action",c=r||n||"System",d=o(s);return a.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i("/group-manager/audit"),children:[a.jsxs("p",{className:"text-sm text-gray-800 flex-grow font-medium",children:[l," ",a.jsxs("span",{className:"text-gray-500 italic text-xs",children:["(",c,")"]})]}),a.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-4",children:d})]})},UUe=({logs:e,loading:t})=>{const n=rt();return a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Recent Logs"}),a.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>n("/group-manager/audit"),children:[a.jsx("span",{children:"See All"}),a.jsx(iX,{size:14,className:"transform -rotate-45"})]})]}),e&&e.length>0?a.jsx("ul",{className:"space-y-1",children:e.slice(0,3).map((r,s)=>a.jsx(zUe,{...r},s))}):a.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No recent logs"})]})},FUe=({icon:e,title:t,value:n,color:r,bgColor:s,loading:i,onClick:o})=>a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o||(()=>console.log(`Clicked metric card: ${t}`)),children:[a.jsx("div",{className:`p-3 rounded-full ${s} ${r} mr-4`,children:a.jsx(e,{size:20})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n||0})]})]}),BUe=({revenueData:e,loading:t})=>{const n=rt(),r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=g.useMemo(()=>{if(console.log("=== RevenueChart calculateRevenueData ==="),console.log("revenueData:",e),console.log("revenueData length:",e?.length),!e||e.length===0){console.log("No revenue data, returning empty chart");const w=new Date;w.getFullYear();const j=w.getMonth(),C=[],S=[];for(let _=0;_<=j;_++)C.push(r[_]),S.push(0);return{labels:C,revenues:S,maxRevenue:0}}const l={};let c=0,d=0;console.log("Processing deals:",e.length),e.forEach((w,j)=>{const C=w.close_date||w.closeDate||null,S=C&&C!==null&&C!=="",_=w.stage||"",E=_.toUpperCase()==="CLOSED_WON"||_==="CLOSED_WON";let A=w.amount;A&&typeof A=="object"&&A.toString?A=parseFloat(A.toString()):A=parseFloat(A)||0;const T=A>0;if(E&&(d++,console.log(`Deal ${j+1} (CLOSED_WON):`,{id:w.id,name:w.name,stage:_,close_date:C,close_date_type:typeof C,amount:A,amount_type:typeof w.amount,hasCloseDate:S,hasAmount:T,willBeAdded:S&&T,allFields:Object.keys(w)})),S&&E&&T)try{let R=new Date(C);if(isNaN(R.getTime())){const U=String(C).split("T")[0];R=new Date(U+"T00:00:00")}if(isNaN(R.getTime()))console.warn(` Invalid date for deal ${w.id}:`,C,"Type:",typeof C);else{const U=R.getFullYear(),W=R.getMonth()+1,I=`${U}-${String(W).padStart(2,"0")}`;l[I]||(l[I]=0),l[I]+=A,c++,console.log(` Added deal ${w.id} to month ${I}: ${A}, total: ${l[I]}`),console.log(`  - Close date: ${C} -> Parsed: ${R.toISOString()} -> Month: ${I} (Year: ${U}, Month: ${W})`)}}catch(R){console.error("Error parsing deal date:",C,R)}else E&&console.warn(` Deal ${w.id} is CLOSED_WON but missing data:`,{hasCloseDate:S,hasAmount:T,closeDate:C,amount:A,originalAmount:w.amount})}),console.log("Summary:",{totalDeals:e.length,closedWonDeals:d,validDealsForGraph:c,monthlyRevenue:l});const m=Object.keys(l).map(w=>parseInt(w.split("-")[0])),h=m.length>0?[...new Set(m)].sort():[],p=new Date().getFullYear();new Date().getMonth();const b=[],v=[];for(let w=0;w<12;w++){const j=`${p}-${String(w+1).padStart(2,"0")}`;b.push(r[w]);const C=l[j]||0;v.push(C),C>0&&console.log(`Month ${r[w]} (${j}): ${C}`)}if(h.length>0){const w=Math.max(...h);if(w>p)for(let j=p+1;j<=w;j++)for(let C=0;C<12;C++){const S=`${j}-${String(C+1).padStart(2,"0")}`,_=l[S]||0;b.push(`${r[C]} ${j}`),v.push(_),_>0&&console.log(`Month ${r[C]} ${j} (${S}): ${_}`)}}const x=Math.max(...v,1);return console.log("Final chart data:",{labels:b,revenues:v,maxRevenue:x,hasData:v.some(w=>w>0)}),{labels:b,revenues:v,maxRevenue:x}},[e]),i=s.labels,o=s.revenues;return console.log("=== FINAL CHART DATA ==="),console.log("X Axis (Months):",i),console.log("Y Axis (Revenue):",o),console.log("Has any revenue > 0:",o.some(l=>l>0)),console.log("All revenue values:",o),console.log("Max revenue:",s.maxRevenue),a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Overview"}),a.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>n("/group-manager/deals"),children:[a.jsx("span",{children:"See All"}),a.jsx(iX,{size:14,className:"transform -rotate-45"})]})]}),a.jsx("div",{className:"h-80 relative flex-1 flex items-center justify-center p-6",children:a.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i&&i.length>0&&o&&o.length>0?a.jsx($k,{xAxis:[{data:i,scaleType:"point"}],yAxis:[{valueFormatter:l=>l>=1e3?`${(l/1e3).toFixed(0)}k`:l.toString()}],series:[{data:o,showMark:!0,area:!0}],height:320,width:void 0,grid:{vertical:!0,horizontal:!0},margin:{top:40,right:40,bottom:50,left:50},sx:{width:"100%",maxWidth:"100%"}}):a.jsxs("div",{className:"text-center text-gray-500",children:[a.jsx("p",{className:"text-sm",children:"No revenue data available"}),a.jsx("p",{className:"text-xs mt-2",children:"Closed won deals with close dates will appear here"})]})})})]})},HUe=({pipelineData:e,loading:t})=>{const n=rt(),r=o=>{const l=(o||"").toUpperCase(),c={PROSPECTING:{name:"Prospecting",color:"bg-blue-500"},QUALIFICATION:{name:"Qualification",color:"bg-yellow-500"},PROPOSAL:{name:"Proposal",color:"bg-orange-500"},NEGOTIATION:{name:"Negotiation",color:"bg-purple-500"},CLOSED_WON:{name:"Closed Won",color:"bg-green-500"},CLOSED_LOST:{name:"Closed Lost",color:"bg-red-500"}};if(c[l])return c[l];const d=["bg-blue-500","bg-yellow-500","bg-orange-500","bg-purple-500","bg-green-500","bg-red-500"],m=Math.abs(l.split("").reduce((h,p)=>h+p.charCodeAt(0),0))%d.length;return{name:o||"Unknown",color:d[m]}},i=(()=>{if(!e||e.length===0)return["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"].map(h=>{const p=r(h);return{stage:p.name,value:0,deals:0,color:p.color}});const o={};e.forEach(m=>{const h=m.stage||"PROSPECTING";o[h]||(o[h]={deals:0,value:0}),o[h].deals+=1,o[h].value+=parseFloat(m.amount||0)});const l=Math.max(...Object.values(o).map(m=>m.value),1),c=["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"],d=[];return c.forEach(m=>{const h=r(m),p=o[m]||{deals:0,value:0};d.push({stage:h.name,value:p.value,deals:p.deals,color:h.color,percentage:l>0?p.value/l*100:0})}),d})();return a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Sales Pipeline"}),a.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:()=>n("/group-manager/deals"),children:"See All"})]}),a.jsx("div",{className:"space-y-4 flex-grow",children:i.slice(0,6).map(o=>a.jsxs("div",{className:"flex flex-col cursor-pointer hover:opacity-85 transition duration-150",onClick:()=>n("/group-manager/deals"),children:[a.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[a.jsx("span",{className:"font-medium text-gray-700",children:o.stage}),a.jsx("span",{className:"font-semibold text-gray-800",children:cX(o.value)})]}),a.jsx("div",{className:"relative h-2 rounded-full bg-gray-200",children:a.jsx("div",{className:`absolute top-0 left-0 h-full rounded-full ${o.color}`,style:{width:`${Math.min(o.percentage,100)}%`}})}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[o.deals," Deals"]})]},o.stage))})]})},uA=({title:e,items:t,children:n,onSeeAll:r})=>{const s=rt(),i=()=>{if(r)r();else{const o={"Latest Leads":"/group-manager/leads","Latest Deals":"/group-manager/deals","Upcoming Activities":"/group-manager/tasks"};o[e]&&s(o[e])}};return a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e}),a.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:i,children:"See All"})]}),n]})},GUe=({first_name:e,last_name:t,company_name:n,source:r,created_at:s,id:i})=>{const o=rt(),{text:l,bg:c}=MUe(r||"Website"),d=b=>{if(!b)return"Unknown";const v=new Date(b),w=new Date-v,j=Math.floor(w/6e4),C=Math.floor(w/36e5),S=Math.floor(w/864e5);return j<60?`${j} min ago`:C<24?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):S<7?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):v.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},m=`${e||""} ${t||""}`.trim()||"Unknown",h=n||"Unknown Company",p=d(s);return a.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&o(`/group-manager/leads/${i}`),children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:m}),a.jsx("p",{className:"text-xs text-gray-500",children:h})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs text-gray-400",children:p}),a.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${l} ${c} px-2 py-0.5 rounded-full`,children:r||"Website"})]})]})})},VUe=({name:e,amount:t,account:n,stage:r,created_at:s,id:i,previousAmount:o})=>{const l=rt(),d={PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"}[r]||r||"Unknown",{text:m,bg:h}=OUe(d),p=parseFloat(t||0),b=o?p>=o?"up":"down":"up",v=b==="up"?vUe:wUe,x=b==="up"?"text-green-400":"text-red-400",w=n?.name||"Unknown Company";return a.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&l(`/group-manager/deals/info?id=${i}`),children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex-shrink",children:[a.jsx("p",{className:"font-semibold text-sm text-gray-900",children:e||"Unnamed Deal"}),a.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:w}),a.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${m} ${h} px-2 py-0.5 rounded-full`,children:d})]}),a.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[a.jsx("p",{className:"text-md font-bold text-gray-800",children:cX(p)}),a.jsx(v,{size:16,className:`${x} mt-1`})]})]})})},WUe=({type:e,title:t,assignedTo:n,dueDate:r,scheduledDate:s,priority:i,id:o,activityType:l,fullData:c})=>{const d=rt(),h=l||{Call:"call",Meeting:"meeting",Task:"qualification"}[e]||"meeting",{Icon:p,color:b,bgColor:v}=IUe(h),{text:x,bg:w}=$Ue(i||"MEDIUM"),S=(A=>{if(!A)return"No date set";const T=new Date(A),U=T-new Date,W=Math.floor(U/864e5);return W===0?`Today, ${T.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:W===1?`Tomorrow, ${T.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:W===-1?`Yesterday, ${T.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:T.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(r||s),_=n||"Unassigned",E=()=>{o&&(c?h==="call"?(sessionStorage.setItem("callDetailData",JSON.stringify(c)),d(`/group-manager/calls/info?id=${o}`)):h==="meeting"?(sessionStorage.setItem("meetingDetailData",JSON.stringify(c)),d(`/group-manager/meetings/info?id=${o}`)):d("/group-manager/tasks"):d(h==="call"?`/group-manager/calls/info?id=${o}`:h==="meeting"?`/group-manager/meetings/info?id=${o}`:"/group-manager/tasks"))};return a.jsxs("div",{className:"flex items-start py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:E,children:[a.jsx("div",{className:`p-2 rounded-lg ${v} mr-3 flex-shrink-0 mt-1`,children:a.jsx(p,{size:20,className:`${b}`})}),a.jsxs("div",{className:"flex-grow",children:[a.jsxs("p",{className:"font-medium text-gray-800 flex items-center mb-1",children:[a.jsx("span",{className:"text-xl leading-none mr-2",children:""}),t||"Untitled Activity"]}),a.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[a.jsxs("p",{className:"flex items-center",children:[a.jsx(sX,{size:14,className:"mr-1.5 text-gray-400"}),S]}),a.jsxs("p",{className:"flex items-center",children:[a.jsx(lX,{size:14,className:"mr-1.5 text-gray-400"}),"Assigned to: ",_]})]})]}),a.jsx("span",{className:`inline-block text-xs font-medium ${x} ${w} px-2 py-0.5 rounded-full flex-shrink-0 self-center ml-4`,children:(i||"MEDIUM").toUpperCase()})]})},qUe=()=>{const e=rt(),{user:t}=Ut(),[n,r]=g.useState({activeLeads:0,totalDeals:0,activeAccounts:0,overdueTasks:0}),[s,i]=g.useState([]),[o,l]=g.useState([]),[c,d]=g.useState([]),[m,h]=g.useState([]),[p,b]=g.useState([]),[v,x]=g.useState([]),[w,j]=g.useState(!0),[C,S]=g.useState(null),[_,E]=g.useState(""),[A,T]=g.useState([]),[R,U]=g.useState([]),[W,I]=g.useState([]),[M,H]=g.useState(new Date),q=g.useRef(null),ae=g.useRef(null),K=g.useMemo(()=>{try{if(!_.trim())return[];const ue=_.toLowerCase().trim(),J=[];return Array.isArray(A)&&A.forEach(ne=>{const pe=`${ne.first_name||""} ${ne.last_name||""}`.trim().toLowerCase(),we=(ne.company_name||"").toLowerCase(),ye=(ne.email||"").toLowerCase(),Te=(ne.phone||"").toLowerCase();(pe.includes(ue)||we.includes(ue)||ye.includes(ue)||Te.includes(ue))&&J.push({id:ne.id,name:`${ne.first_name||""} ${ne.last_name||""}`.trim()||"Unnamed Lead",type:"Lead",details:ne.company_name||"No company",route:`/group-manager/leads/${ne.id}`})}),Array.isArray(R)&&R.forEach(ne=>{const pe=(ne.name||"").toLowerCase(),we=(ne.account?.name||"").toLowerCase(),ye=(ne.description||"").toLowerCase();(pe.includes(ue)||we.includes(ue)||ye.includes(ue))&&J.push({id:ne.id,name:ne.name||"Unnamed Deal",type:"Deal",details:ne.account?.name||"No account",route:`/group-manager/deals/info?id=${ne.id}`})}),Array.isArray(W)&&W.forEach(ne=>{const pe=(ne.name||"").toLowerCase(),we=(ne.email||"").toLowerCase(),ye=(ne.phone||"").toLowerCase(),Te=(ne.website||"").toLowerCase();(pe.includes(ue)||we.includes(ue)||ye.includes(ue)||Te.includes(ue))&&J.push({id:ne.id,name:ne.name||"Unnamed Account",type:"Account",details:ne.email||ne.phone||"No contact info",route:"/group-manager/accounts"})}),J.slice(0,10)}catch(ue){return console.error("Error in search:",ue),[]}},[_,A,R,W]),B=ue=>{ue.route&&(e(ue.route),E(""))},X=g.useCallback(async()=>{j(!0),S(null);try{const[ue,J,ne,pe,we,ye,Te]=await Promise.all([oe.get("/leads/group-manager/getLeads").catch(k=>(console.error("Error fetching leads:",k),{data:[]})),oe.get("/deals/group-manager/fetch-all").catch(k=>(console.error("Error fetching deals:",k),{data:[]})),oe.get("/accounts/group-manager/fetch-all").catch(k=>(console.error("Error fetching accounts:",k),{data:[]})),oe.get("/tasks/all").catch(k=>(console.error("Error fetching tasks:",k),{data:[]})),oe.get("/meetings/group-manager/fetch-all").catch(k=>(console.error("Error fetching meetings:",k),{data:[]})),oe.get("/calls/group-manager/fetch-all").catch(k=>(console.error("Error fetching calls:",k),{data:[]})),oe.get("/logs/read-all").catch(k=>(console.error("Error fetching logs:",k),{data:[]}))]),Ae=Array.isArray(ue.data)?ue.data:[],Pe=Array.isArray(J.data)?J.data:[],$=Array.isArray(ne.data)?ne.data:[],Ne=Array.isArray(pe.data)?pe.data:[],fe=Array.isArray(we.data)?we.data:[],O=Array.isArray(ye.data)?ye.data:[],ce=Array.isArray(Te.data)?Te.data:[];console.log("=== RAW DEALS API RESPONSE ==="),console.log("Deals count:",Pe.length),Pe.length>0&&(console.log("First deal sample (raw):",JSON.stringify(Pe[0],null,2)),console.log("First deal keys:",Object.keys(Pe[0]))),T(Ae),U(Pe),I($);const de=Ae.filter(k=>k.status&&!["Lost","Converted"].includes(k.status)).length,Ce=Ne.filter(k=>!k.dueDate||k.status==="Completed"?!1:new Date(k.dueDate)<new Date).length;r({activeLeads:de,totalDeals:Pe.length,activeAccounts:$.length,overdueTasks:Ce});const Ee=[...Ae].sort((k,Z)=>new Date(Z.created_at||0)-new Date(k.created_at||0)).slice(0,5);i(Ee);const Ge=[...Pe].sort((k,Z)=>new Date(Z.created_at||0)-new Date(k.created_at||0)).slice(0,5);l(Ge);const Je=new Date,We=[];O.forEach(k=>{const Z=k.due_date||k.call_time,re=(k.status||"").toUpperCase();if(Z){const be=new Date(Z);re==="COMPLETED"||re==="MISSED"||re==="NOT_HELD"||re==="HELD"||We.push({type:"Call",title:k.subject||"Untitled Call",assignedTo:k.assigned_to||(k.call_assign_to?`${k.call_assign_to.first_name||""} ${k.call_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:Z,priority:(k.priority||"MEDIUM").toUpperCase(),id:k.id,activityType:"call",fullData:k})}}),fe.forEach(k=>{const Z=k.dueDate||k.start_time,re=(k.status||"").toUpperCase();if(Z){const be=new Date(Z);re==="COMPLETED"||re==="CANCELLED"||re==="DONE"||We.push({type:"Meeting",title:k.subject||k.activity||"Untitled Meeting",assignedTo:k.assignedTo||(k.meet_assign_to?`${k.meet_assign_to.first_name||""} ${k.meet_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:Z,priority:(k.priority||"MEDIUM").toUpperCase(),id:k.id,activityType:"meeting",fullData:k})}});const Ke={HIGH:1,MEDIUM:2,LOW:3},He=We.sort((k,Z)=>{const re=Ke[k.priority]||3,be=Ke[Z.priority]||3;if(re!==be)return re-be;const z=new Date(k.scheduledDate||0),ee=new Date(Z.scheduledDate||0);return z-ee}).slice(0,5);d(He),h(Pe),console.log("=== ALL DEALS DATA ==="),console.log("Total deals:",Pe.length);const Se=Pe.filter(k=>(k.stage||"").toUpperCase()==="CLOSED_WON");console.log("CLOSED_WON deals:",Se.length),Se.length>0?(console.log("=== CLOSED_WON DEALS DETAILS ==="),Se.forEach((k,Z)=>{let re=k.amount;re&&typeof re=="object"?re.toString?re=parseFloat(re.toString()):re=parseFloat(re):re=parseFloat(re)||0,console.log(`Deal ${Z+1}:`,{id:k.id,name:k.name,stage:k.stage,stage_upper:(k.stage||"").toUpperCase(),amount:k.amount,amount_parsed:re,amount_type:typeof k.amount,close_date:k.close_date,close_date_type:typeof k.close_date,close_date_value:k.close_date?new Date(k.close_date):null,has_close_date:!!k.close_date,has_amount:re>0,all_keys:Object.keys(k),full_deal:k})})):(console.log(" No CLOSED_WON deals found!"),console.log("All deal stages:",Pe.map(k=>k.stage))),x(Pe);const Ve=[...ce].sort((k,Z)=>new Date(Z.timestamp||0)-new Date(k.timestamp||0));b(Ve)}catch(ue){console.error("Error fetching dashboard data:",ue),S("Failed to load dashboard data. Please refresh the page.")}finally{j(!1)}},[]);g.useEffect(()=>(document.title="Dashboard | Sari-Sari CRM",console.log("TManagerDashboard mounted, fetching data..."),X(),q.current=setInterval(()=>{console.log("Auto-refreshing dashboard data..."),X(),H(new Date)},3e4),()=>{q.current&&clearInterval(q.current)}),[X]),g.useEffect(()=>{if(!t||!t.id)return;let ue=0;const J=3;let ne=null;const pe=()=>{const we=window.location.protocol==="https:"?"wss:":"ws:",ye=window.location.hostname==="localhost"?"localhost:8000":window.location.host,Te=`${we}//${ye}/ws/notifications?user_id=${t.id}`;try{const Ae=new WebSocket(Te);ae.current=Ae,Ae.onopen=()=>{console.log(" WebSocket connected for dashboard updates"),ue=0},Ae.onmessage=Pe=>{try{const $=JSON.parse(Pe.data);console.log(" Real-time notification received:",$),$.event&&["new_task","task_updated","new_lead","lead_updated","new_deal","deal_updated","new_account","account_updated","new_meeting","meeting_updated","new_call","call_updated"].includes($.event)&&(console.log(" Refreshing dashboard due to:",$.event),X(),H(new Date))}catch($){console.error("Error parsing WebSocket message:",$)}},Ae.onerror=Pe=>{ue===0&&console.warn(" WebSocket connection unavailable (this is optional)")},Ae.onclose=()=>{ue<J&&(ue++,ne=setTimeout(()=>{t&&t.id&&pe()},5e3))}}catch{console.warn(" WebSocket not available (optional feature)")}};return pe(),()=>{ne&&clearTimeout(ne),ae.current&&(ae.current.close(),ae.current=null)}},[t,X]);const le=[{icon:oX,title:"Active Leads",value:n.activeLeads,color:"text-blue-600",bgColor:"bg-blue-50",onClick:()=>e("/group-manager/leads")},{icon:yUe,title:"Total Deals",value:n.totalDeals,color:"text-yellow-600",bgColor:"bg-yellow-50",onClick:()=>e("/group-manager/deals")},{icon:bUe,title:"Active Account",value:n.activeAccounts,color:"text-green-600",bgColor:"bg-green-50",onClick:()=>e("/group-manager/accounts")},{icon:sX,title:"Overdue Tasks",value:n.overdueTasks,color:"text-red-600",bgColor:"bg-red-50",onClick:()=>e("/group-manager/tasks")}];return console.log("TManagerDashboard rendering, loading:",w,"error:",C),a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative w-full",children:[w&&a.jsx(yt,{}),a.jsxs("div",{className:"max-w-screen-2xl mx-auto",children:[C&&a.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:a.jsx("p",{className:"font-medium",children:C})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 mb-8",children:[a.jsxs("div",{className:"lg:col-span-9 flex flex-col space-y-4",children:[a.jsx(RUe,{searchQuery:_,onSearchChange:E,searchResults:K,onSearchResultClick:B}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:le.map(ue=>a.jsx(FUe,{...ue,loading:w},ue.title))})]}),a.jsx("div",{className:"lg:col-span-3",children:a.jsx(UUe,{logs:p,loading:w})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsx(BUe,{revenueData:v,loading:w})}),a.jsx("div",{children:a.jsx(HUe,{pipelineData:m,loading:w})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx(uA,{title:"Latest Leads",children:s.length>0?s.map((ue,J)=>a.jsx(GUe,{...ue},ue.id||J)):a.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No leads found"})}),a.jsx(uA,{title:"Latest Deals",children:w?a.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mb-2"}),a.jsx("div",{className:"text-sm text-gray-500",children:"Loading deals..."})]}):o.length>0?o.map((ue,J)=>a.jsx(VUe,{...ue},ue.id||J)):a.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No deals found"})}),a.jsx(uA,{title:"Upcoming Activities",children:c.length>0?c.map((ue,J)=>a.jsx(WUe,{...ue},ue.id||J)):a.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No upcoming activities"})})]})]})]})},mA=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Active"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Former"}],fA={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"PROSPECT",territory_id:"",assigned_to:""},is=e=>e?e.toUpperCase():"",hA=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",YUe=e=>{switch(is(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},KUe=e=>{switch(is(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}},dd=10;function QUe(){const e=rt();g.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[t,n]=g.useState(!1),[r,s]=g.useState(!1),[i,o]=g.useState(!1),[l,c]=g.useState(null),[d,m]=g.useState(null),[h,p]=g.useState(fA),[b,v]=g.useState(null),[x,w]=g.useState([]),[j,C]=g.useState(!1),[S,_]=g.useState([]),[E,A]=g.useState(null),[T,R]=g.useState([]),[U,W]=g.useState("Filter by Status"),[I,M]=g.useState(""),[H,q]=g.useState(null),[ae,K]=g.useState(!1),[B,X]=g.useState(1),[le,ue]=g.useState("Overview"),[J,ne]=g.useState(""),[pe,we]=g.useState(!1),ye=g.useCallback(async(P=null)=>{C(!0);try{const he=await oe.get("/accounts/admin/fetch-all"),te=[...Array.isArray(he.data)?he.data:[]].sort((ve,je)=>{const Ie=ve?.created_at||ve?.updated_at||0,tt=je?.created_at||je?.updated_at||0;return new Date(tt)-new Date(Ie)});if(w(te),console.log("Fetch from backend: ",he.data),P){const ve=te.find(je=>je.id===P);v(ve||null)}}catch(he){console.error(he),w([]),he.response?.status===403?Q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):Q.error("Failed to fetch accounts. Please try again later.")}finally{C(!1)}},[v]),Te=g.useCallback(async()=>{try{const P=await oe.get("/users/all");_(Array.isArray(P.data)?P.data:[])}catch(P){console.error(P),P.response?.status===403&&Q.warn("Unable to load users for assignment (permission denied).")}},[]),Ae=g.useCallback(async()=>{try{const P=await oe.get("/territories/fetch");R(Array.isArray(P.data)?P.data:[])}catch(P){console.error(P),P.response?.status===403&&Q.warn("Unable to load territories (permission denied).")}},[]);g.useEffect(()=>{ye(),Te(),Ae()},[ye,Te,Ae]),g.useEffect(()=>{b&&ne(is(b.status)||"PROSPECT")},[b]);const Pe=x.length,$=g.useMemo(()=>x.filter(P=>P.status?.toLowerCase()==="customer").length,[x]),Ne=g.useMemo(()=>x.filter(P=>P.status?.toLowerCase()==="prospect").length,[x]),fe=g.useMemo(()=>x.filter(P=>P.status?.toLowerCase()==="partner").length,[x]),O=g.useMemo(()=>x.filter(P=>P.status?.toLowerCase()==="active").length,[x]),ce=g.useMemo(()=>x.filter(P=>P.status?.toLowerCase()==="inactive").length,[x]),de=g.useMemo(()=>x.filter(P=>P.status?.toLowerCase()==="former").length,[x]),Ce=g.useMemo(()=>[{title:"Total",value:Pe,icon:en,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:$,icon:Xi,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:Ne,icon:Ln,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:fe,icon:Qt,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:O,icon:Xi,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:ce,icon:Zi,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:de,icon:Zi,color:"text-orange-600",bgColor:"bg-orange-100"}],[Pe,$,Ne,fe,O,ce,de]),Ee=g.useMemo(()=>{const P=I.trim().toLowerCase(),he=U.trim().toUpperCase();return x.filter(G=>{const te=[G?.name,G?.website,G?.industry,G?.territory?.name,G?.phone_number],ve=P===""||te.some(Ie=>Ie==null?!1:Ie.toString().toLowerCase().includes(P)),je=he==="FILTER BY STATUS"||is(G.status)===he;return ve&&je})},[x,I,U]),Ge=Math.max(1,Math.ceil(Ee.length/dd)||1);g.useEffect(()=>{X(1)},[I,U]),g.useEffect(()=>{X(P=>{const he=Math.max(1,Math.ceil(Ee.length/dd)||1);return P>he?he:P})},[Ee.length]);const Je=g.useMemo(()=>{const P=(B-1)*dd;return Ee.slice(P,P+dd)},[Ee,B]);Ee.length===0||(B-1)*dd+1,Math.min(B*dd,Ee.length);const We=()=>X(P=>Math.max(P-1,1)),Ke=()=>X(P=>Math.min(P+1,Ge)),He=P=>{v(P),ue("Overview"),ne(is(P?.status)||"PROSPECT")},Se=()=>v(null),Ve=P=>{P.target.id==="accountModalBackdrop"&&!ae&&Se()},k=()=>{n(!1),s(!1),m(null),p(fA),o(!1),A(null)},Z=P=>{P.target.id==="modalBackdrop"&&k()},re=P=>P?new Date(P).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",be=P=>{const{name:he,value:G}=P.target;p(te=>({...te,[he]:G}))},z=()=>{p(fA),s(!1),m(null),n(!0)},ee=P=>{v(null),console.log("edit: ",P),P.assigned_accs?A(P.assigned_accs):A(null),p({name:P.name||"",website:P.website||"",phone_number:P.phone_number||"",billing_address:P.billing_address||"",shipping_address:P.shipping_address||"",industry:P.industry||"",status:is(P.status)||"PROSPECT",territory_id:P.territory?.id?String(P.territory.id):"",assigned_to:P.assigned_accs?.id?String(P.assigned_accs.id):""}),s(!0),m(P.id),n(!0)},ie=P=>{P&&q({title:"Delete Account",message:a.jsxs("span",{children:["Are you sure you want to permanently delete the account"," ",a.jsx("span",{className:"font-semibold",children:P.name}),"? This action cannot be undone."]}),confirmLabel:"Delete Account",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:P.id,name:P.name}})},V=async()=>{if(!H?.action){q(null);return}const{action:P}=H,{type:he,payload:G,targetId:te,name:ve}=P;K(!0);try{if(he==="create"){o(!0);const je=await oe.post("/accounts/admin",G);Q.success(`Account "${ve}" created successfully.`);const Ie=b?.id||null;k(),await ye(Ie),!b&&je.data?.id}else if(he==="update"){if(!te)throw new Error("Missing account identifier for update.");o(!0),await oe.put(`/accounts/admin/${te}`,G),Q.success(`Account "${ve}" updated successfully.`);const je=b?.id&&b.id===te?te:null;k(),await ye(je),b?.id===te&&v(null)}else if(he==="delete"){if(!te)throw new Error("Missing account identifier for deletion.");const je=b?.id;c(te),await oe.delete(`/accounts/admin/${te}`),Q.success(`Account "${ve}" deleted successfully.`),await ye(je&&je!==te?je:null),je===te&&v(null)}}catch(je){console.error(je);const Ie=he==="create"?"Failed to create account. Please review the details and try again.":he==="update"?"Failed to update account. Please review the details and try again.":"Failed to delete account. Please try again.",tt=je.response?.data?.detail||Ie;Q.error(tt),(he==="create"||he==="update")&&o(!1),he==="delete"&&c(null)}finally{(he==="create"||he==="update")&&o(!1),he==="delete"&&c(null),K(!1),q(null)}},F=()=>{ae||q(null)},se=async()=>{if(!b||!J)return;const P=is(J),he=is(b.status);if(P!==he){we(!0);try{await oe.put(`/accounts/admin/${b.id}`,{status:P}),Q.success(`Account status updated to ${hA(P)}`),w(G=>G.map(te=>te.id===b.id?{...te,status:P}:te)),v(null)}catch(G){console.error(G);const te=G.response?.data?.detail||"Failed to update account status. Please try again.";Q.error(te)}finally{we(!1)}}},[xe,ge]=g.useState(!1),Me=P=>{P.preventDefault(),ge(!0);const he=h.name.trim();if(!he){Q.error("Account name is required.");return}if(!h.assigned_to){Q.error("Assigned To is required.");return}const te={name:he,website:h.website?.trim()||null,phone_number:h.phone_number?.trim()||null,billing_address:h.billing_address?.trim()||null,shipping_address:h.shipping_address?.trim()||null,industry:h.industry?.trim()||null,status:h.status||"PROSPECT",territory_id:h.territory_id?Number(h.territory_id):null,assigned_to:h.assigned_to?Number(h.assigned_to):null},ve=r&&d?"update":"create";q({title:ve==="create"?"Confirm New Account":"Confirm Update",message:ve==="create"?a.jsxs("span",{children:["Are you sure you want to create the account"," ",a.jsx("span",{className:"font-semibold",children:he}),"?"]}):a.jsxs("span",{children:["Save changes to the account"," ",a.jsx("span",{className:"font-semibold",children:he}),"?"]}),confirmLabel:ve==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:ve,payload:te,targetId:d||null,name:he}})},De=[{label:"Filter by Status",value:"Filter by Status"},...mA.map(P=>({label:P.label,value:P.value}))],et=H?.action?.type==="delete"?H.action.targetId:null,gt=b&&(l===b.id||et===b.id),Nt=b&&l===b.id,Pt=b?YUe(b.status):"",dn=b?a.jsx("div",{id:"accountModalBackdrop",onClick:Ve,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:P=>P.stopPropagation(),children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),a.jsx("button",{onClick:Se,className:"text-gray-400 hover:text-white cursor-pointer",children:a.jsx(wn,{size:25})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:b.name}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${Pt}`,children:hA(b.status)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>ee(b),disabled:H?.action?.type==="update"&&H.action.targetId===b.id,children:[a.jsx(Rn,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>ie(b),disabled:!!gt,children:Nt?"Deleting...":a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"mr-2"}),"Delete"]})})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(P=>a.jsx("button",{onClick:()=>ue(P),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${le===P?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:P},P))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[le==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Website:"}),a.jsx("p",{children:b.website?a.jsx("a",{href:b.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:b.website}):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Industry:"}),a.jsx("p",{children:b.industry||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Territory:"}),a.jsx("p",{children:b.territory?.name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Phone Number:"}),a.jsx("p",{children:b.phone_number||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Billing Address:"}),a.jsx("p",{children:b.billing_address||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),a.jsx("p",{children:b.shipping_address||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:b.assigned_accs?`${b.assigned_accs.first_name} ${b.assigned_accs.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:b.acc_creator?`${b.acc_creator.first_name} ${b.acc_creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:re(b.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:re(b.updated_at)||"N/A"})]})]})}),le==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:x.notes||"No notes available."})]})]}),le==="Activities"&&a.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:pt,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:ft,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((P,he)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[a.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-gray-600 mt-1",children:a.jsx(P.icon,{size:24})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-gray-900 break-words",children:P.title}),a.jsx("p",{className:"text-sm text-gray-500 break-words",children:P.desc}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),a.jsx("p",{className:"text-sm text-gray-700 break-words",children:P.user})]})]})]}),a.jsx("p",{className:"text-sm text-gray-500 break-words",children:P.date})]},he))]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Account"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(pt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Account"}}}),children:[a.jsx(ft,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Account"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(kn,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:J||is(b?.status)||"PROSPECT",onChange:P=>ne(P.target.value),children:mA.map(P=>a.jsx("option",{value:P.value,children:P.label},P.value))}),a.jsx("button",{onClick:se,disabled:pe||!J||is(J)===is(b?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${pe||!J||is(J)===is(b?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:pe?"Updating...":"Update"})]})]})]})]})]})}):null,jn=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[j&&a.jsx(yt,{message:"Loading accounts..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(en,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{z(),ge(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(Rt,{className:"mr-2"})," Add Account"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ce.map(P=>a.jsx(XUe,{...P},P.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search accounts",value:I,onChange:P=>M(P.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:U,onChange:P=>W(P.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:De.map(P=>a.jsx("option",{value:P.value,children:P.label},P.value))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4",children:"Industry"}),a.jsx("th",{className:"py-3 px-4",children:"Territory"}),a.jsx("th",{className:"py-3 px-4",children:"Phone"})]})}),a.jsx("tbody",{children:j?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"Loading accounts..."})}):Ee.length>0?Je.map(P=>a.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>He(P),children:[a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:P.name}),a.jsx("div",{className:"text-gray-500 text-xs break-all",children:P.website||"--"})]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${KUe(P.status)}`,children:hA(P.status)})}),a.jsx("td",{className:"py-3 px-4 text-sm",children:P.industry||"--"}),a.jsx("td",{className:"py-3 px-4 text-sm",children:P.territory?.name||"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[a.jsx(pt,{className:"text-gray-500"}),a.jsx("span",{children:P.phone_number||"--"})]})})]},P.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"No accounts found."})})})]})}),a.jsx(Et,{className:"mt-4",totalItems:Ee.length,pageSize:dd,currentPage:B,onPrev:We,onNext:Ke,label:"accounts"})]}),oa=t?a.jsx("div",{id:"modalBackdrop",onClick:Z,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto hide-scrollbar max-h-[90vh]",onClick:P=>P.stopPropagation(),children:[a.jsx("button",{onClick:()=>{k(),ge(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:i||ae,children:a.jsx(St,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:r?"Edit Account":"Add New Account"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:Me,noValidate:!0,children:[a.jsx("div",{className:"md:col-span-2",children:a.jsx(Am,{label:"Name",name:"name",value:h.name,onChange:be,placeholder:"Company name",required:!0,disabled:i,isSubmitted:xe})}),a.jsx(Am,{label:"Website",name:"website",value:h.website,onChange:be,placeholder:"https://example.com",disabled:i}),a.jsx(Am,{label:"Phone Number",name:"phone_number",value:h.phone_number,onChange:be,placeholder:"09xx xxx xxxx",type:"tel",disabled:i}),a.jsx(Am,{label:"Industry",name:"industry",value:h.industry,onChange:be,placeholder:"Industry",disabled:i}),a.jsx(Am,{label:"Billing Address",name:"billing_address",value:h.billing_address,onChange:be,placeholder:"Billing address",disabled:i}),a.jsx(Am,{label:"Shipping Address",name:"shipping_address",value:h.shipping_address,onChange:be,placeholder:"Shipping address",disabled:i}),a.jsx($F,{label:"Status",name:"status",value:h.status,onChange:be,options:[{value:"",label:"Select status"},...mA],required:!0,disabled:i}),a.jsx(ZUe,{label:"Assigned To",value:h.assigned_to,onChange:P=>{const he=S.find(te=>String(te.id)===String(P));A(he);let G=null;he&&he.assigned_territory&&he.assigned_territory.length===1&&(G=he.assigned_territory[0].id),p(te=>({...te,assigned_to:P,territory_id:G}))},items:S||[],getLabel:P=>`${P?.first_name??""} ${P?.last_name??""} (${P?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:xe,disabled:i||S.length===0}),a.jsx($F,{label:"Territory",name:"territory_id",value:h.territory_id||"",onChange:be,options:[{value:"",label:E?E.assigned_territory&&E.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"},...E&&E.assigned_territory&&E.assigned_territory.map(P=>({value:String(P.id),label:P.name}))||[]],disabled:i||!E||!E.assigned_territory||E.assigned_territory.length===0}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[a.jsx("button",{type:"button",onClick:()=>{k(),ge(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i||ae,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i||ae,children:i?"Saving...":r?"Update Account":"Save Account"})]})]})]})}):null,Jn=H?a.jsx(eFe,{open:!0,title:H.title,message:H.message,confirmLabel:H.confirmLabel,cancelLabel:H.cancelLabel,variant:H.variant,onConfirm:V,onCancel:F,loading:ae}):null;return a.jsxs(a.Fragment,{children:[jn,dn,oa,Jn]})}function XUe({icon:e,title:t,value:n,color:r="text-blue-600",bgColor:s="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${s} ${r} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function Am({label:e,name:t,value:n,onChange:r,placeholder:s,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const m=d&&!n?.trim();return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:r,placeholder:s,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${m?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function $F({label:e,name:t,value:n,onChange:r,options:s,required:i=!1,disabled:o=!1}){return a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:n??"",onChange:r,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:s.map(l=>a.jsx("option",{value:l.value,children:l.label},l.value))})]})}function ZUe({label:e,items:t=[],value:n="",onChange:r,getLabel:s,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const m=d&&c&&!n;return a.jsxs("div",{className:l,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(JUe,{items:t,value:n??"",onChange:r,getLabel:s,placeholder:i,disabled:o,hasError:m})]})}function JUe({items:e=[],value:t="",onChange:n,getLabel:r,placeholder:s="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=g.useState(!1),[m,h]=g.useState(""),p=g.useRef(null),b=e.find(w=>String(w.id)===String(t)),v=b?r(b):"",x=g.useMemo(()=>{const w=m.trim().toLowerCase();return(w?e.filter(C=>(r(C)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,m,r,o]);return g.useEffect(()=>{const w=j=>{p.current&&!p.current.contains(j.target)&&d(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),g.useEffect(()=>{c||h("")},[c]),a.jsxs("div",{ref:p,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:c?m:v,placeholder:s,onFocus:()=>!i&&d(!0),onChange:w=>{h(w.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:x.length>0?x.map(w=>{const j=String(w.id),C=r(w),S=String(t)===j;return a.jsx("button",{type:"button",onClick:()=>{n(j),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:C||"--"},j)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function eFe({open:e,title:t,message:n,confirmLabel:r,cancelLabel:s="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:s}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":r})]})]})})}const yg=10,gA={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:""},Em=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),bg=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function tFe(){const e=rt();g.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[t,n]=g.useState([]),[r,s]=g.useState(!1),[i,o]=g.useState([]),[l,c]=g.useState([]),[d,m]=g.useState(null),[h,p]=g.useState(!1),[b,v]=g.useState(!1),[x,w]=g.useState(!1),[j,C]=g.useState(null),[S,_]=g.useState(!1),[E,A]=g.useState(null),[T,R]=g.useState(gA),[U,W]=g.useState(""),[I,M]=g.useState("Filter by Accounts"),[H,q]=g.useState(null),[ae,K]=g.useState("Overview"),[B,X]=g.useState(1),le=g.useCallback(async(z=null)=>{s(!0);try{const ee=await oe.get("/contacts/admin/fetch-all"),V=[...Array.isArray(ee.data)?ee.data:[]].sort((F,se)=>{const xe=F?.created_at||F?.updated_at||0,ge=se?.created_at||se?.updated_at||0;return new Date(ge)-new Date(xe)});if(n(V),z){const F=V.find(se=>se.id===z);m(F||null)}}catch(ee){console.error(ee),n([]),ee.response?.status===403?Q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):Q.error("Failed to fetch contacts. Please try again later.")}finally{s(!1)}},[m]),ue=g.useCallback(async()=>{try{const z=await oe.get("/accounts/admin/fetch-all"),ie=[...Array.isArray(z.data)?z.data:[]].sort((V,F)=>(V?.name||"").localeCompare(F?.name||""));o(ie)}catch(z){console.error(z),o([]),z.response?.status===403&&Q.warn("Unable to load accounts (permission denied).")}},[]),J=g.useCallback(async()=>{try{const z=await oe.get("/users/all"),ie=[...Array.isArray(z.data)?z.data:[]].sort((V,F)=>Em(V).localeCompare(Em(F)));c(ie)}catch(z){console.error(z),c([]),z.response?.status===403&&Q.warn("Unable to load users for assignment (permission denied).")}},[]);g.useEffect(()=>{le(),ue(),J()},[le,ue,J]);const ne=g.useMemo(()=>{const z=new Map;i.forEach(ie=>{ie?.id&&ie?.name&&z.set(String(ie.id),ie.name)}),t.forEach(ie=>{ie?.account_id&&ie?.account?.name&&z.set(String(ie.account_id),ie.account.name)});const ee=Array.from(z.entries()).sort((ie,V)=>ie[1].localeCompare(V[1])).map(([ie,V])=>({value:ie,label:V}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...ee]},[i,t]),pe=g.useMemo(()=>{const z=U.trim().toLowerCase(),ee=I.trim();return t.filter(ie=>{const V=[ie?.first_name,ie?.last_name,ie?.email,ie?.title,ie?.department,ie?.account?.name,ie?.account?.status,ie?.work_phone,ie?.mobile_phone_1,ie?.mobile_phone_2,ie?.assigned_contact?.first_name,ie?.assigned_contact?.last_name,ie?.contact_creator?.first_name,ie?.contact_creator?.last_name,ie?.notes,bg(ie?.created_at),bg(ie?.updated_at)],F=z===""||V.some(xe=>xe==null?!1:xe.toString().toLowerCase().includes(z)),se=ee==="Filter by Accounts"||String(ie.account_id)===ee;return F&&se})},[t,U,I]),we=Math.max(1,Math.ceil(pe.length/yg)||1);g.useEffect(()=>{X(1)},[U,I]),g.useEffect(()=>{X(z=>{const ee=Math.max(1,Math.ceil(pe.length/yg)||1);return z>ee?ee:z})},[pe.length]);const ye=g.useMemo(()=>{const z=(B-1)*yg;return pe.slice(z,z+yg)},[pe,B]),Te=()=>X(z=>Math.max(z-1,1)),Ae=()=>X(z=>Math.min(z+1,we)),Pe=g.useMemo(()=>{if(!b||!E)return i;const z=t.find(ie=>ie.id===E);return!z||!z.account||i.some(ie=>ie.id===z.account.id)?i:[...i,z.account]},[i,b,E,t]),$=g.useCallback(()=>{p(!1),v(!1),A(null),R(gA),w(!1)},[]),Ne=z=>{z.target.id==="modalBackdrop"&&!x&&!S&&$()},fe=z=>{const{name:ee,value:ie}=z.target;R(V=>({...V,[ee]:ie}))},O=()=>{R(gA),v(!1),A(null),p(!0)},ce=async z=>{if(!z)return;const ee=await oe.get(`/accounts/get/${z.account_id}`);R({first_name:z.first_name||"",last_name:z.last_name||"",account_id:ee.data.id?ee.data.id:"",title:z.title||"",department:z.department||"",email:z.email||"",work_phone:z.work_phone||"",mobile_phone_1:z.mobile_phone_1||"",mobile_phone_2:z.mobile_phone_2||"",notes:z.notes||"",assigned_to:z.assigned_to?String(z.assigned_to):""}),v(!0),A(z.id),p(!0),m(null)},de=z=>{if(!z)return;const ee=Em(z)||"this contact";C({title:"Delete Contact",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:ee}),"? This action cannot be undone."]}),confirmLabel:"Delete Contact",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:z.id,name:ee}})},Ce=z=>{z.preventDefault();const ee=T.first_name.trim(),ie=T.last_name.trim();if(!ee||!ie){Q.error("First name and last name are required.");return}if(!T.account_id){Q.error("Account is required.");return}const V={first_name:ee,last_name:ie,account_id:Number(T.account_id),title:T.title?.trim()||null,department:T.department?.trim()||null,email:T.email?.trim().toLowerCase()||null,work_phone:T.work_phone?.trim()||null,mobile_phone_1:T.mobile_phone_1?.trim()||null,mobile_phone_2:T.mobile_phone_2?.trim()||null,notes:T.notes?.trim()||null,assigned_to:T.assigned_to?Number(T.assigned_to):null},F=b&&E?"update":"create",se=`${ee} ${ie}`.trim();C({title:F==="create"?"Confirm New Contact":"Confirm Update",message:F==="create"?a.jsxs("span",{children:["Are you sure you want to add"," ",a.jsx("span",{className:"font-semibold",children:se})," to your contacts?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:se}),"?"]}),confirmLabel:F==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:F,payload:V,targetId:E||null,name:se}})},Ee=async()=>{if(!j?.action){C(null);return}const{action:z}=j,{type:ee,payload:ie,targetId:V,name:F}=z;_(!0);try{if(ee==="create"){w(!0),await oe.post("/contacts/admin",ie),Q.success(`Contact "${F}" created successfully.`);const se=d?.id||null;$(),await le(se)}else if(ee==="update"){if(!V)throw new Error("Missing contact identifier for update.");w(!0),await oe.put(`/contacts/admin/${V}`,ie),Q.success(`Contact "${F}" updated successfully.`);const se=d?.id&&d.id===V?V:d?.id||null;$(),await le(se),d?.id===V&&m(null)}else if(ee==="delete"){if(!V)throw new Error("Missing contact identifier for deletion.");const se=d?.id;q(V),await oe.delete(`/contacts/admin/${V}`),Q.success(`Contact "${F}" deleted successfully.`),await le(se&&se!==V?se:null),se===V&&m(null)}}catch(se){console.error(se);const xe=ee==="create"?"Failed to create contact. Please review the details and try again.":ee==="update"?"Failed to update contact. Please review the details and try again.":"Failed to delete contact. Please try again.",ge=se.response?.data?.detail||xe;Q.error(ge)}finally{(ee==="create"||ee==="update")&&w(!1),ee==="delete"&&q(null),_(!1),C(null)}},Ge=()=>{S||C(null)},Je=z=>{m(z),K("Overview")},We=()=>m(null),Ke=z=>{z.target.id==="contactModalBackdrop"&&!S&&We()},He=j?.action?.type==="delete"?j.action.targetId:null,Se=d&&(H===d.id||He===d.id),Ve=d&&H===d.id,k=d?a.jsx("div",{id:"contactModalBackdrop",onClick:Ke,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:z=>z.stopPropagation(),children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),a.jsx("button",{onClick:We,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:a.jsx(wn,{size:25})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:Em(d)||"Unnamed contact"})}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>ce(d),disabled:S||j?.action?.type==="update"&&j.action.targetId===d.id,children:[a.jsx(Rn,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>de(d),disabled:!!Se,children:Ve?"Deleting...":a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"mr-2"}),"Delete"]})})]})]}),a.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:a.jsx("p",{className:"text-sm text-gray-500",children:d.account?.name||"No associated account"})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(z=>a.jsx("button",{onClick:()=>K(z),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${ae===z?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:z},z))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[ae==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Contact Name:"}),a.jsx("p",{children:Em(d)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Title:"}),a.jsx("p",{children:d.title||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:d.email?a.jsx("a",{href:`mailto:${d.email}`,className:"text-blue-600 hover:underline break-all",children:d.email}):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Department:"}),a.jsx("p",{children:d.department||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Work Phone:"}),a.jsx("p",{children:d.work_phone||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),a.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),a.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:d.assigned_contact?`${d.assigned_contact.first_name} ${d.assigned_contact.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:d.contact_creator?`${d.contact_creator.first_name} ${d.contact_creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:bg(d.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:bg(d.updated_at)||"N/A"})]})]})}),ae==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]})]}),ae==="Activities"&&a.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:pt,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:ft,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((z,ee)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[a.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-gray-600 mt-1",children:a.jsx(z.icon,{size:24})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-gray-900 break-words",children:z.title}),a.jsx("p",{className:"text-sm text-gray-500 break-words",children:z.desc}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),a.jsx("p",{className:"text-sm text-gray-700 break-words",children:z.user})]})]})]}),a.jsx("p",{className:"text-sm text-gray-500 break-words",children:z.date})]},ee))]})]}),a.jsx("div",{className:"flex flex-col gap-4",children:a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Contact"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(pt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const z=encodeURIComponent(d.email),ee=encodeURIComponent(""),ie=encodeURIComponent(""),V=`https://mail.google.com/mail/?view=cm&fs=1&to=${z}&su=${ee}&body=${ie}`;window.open(V,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Tn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Contact"}}}),children:[a.jsx(ft,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Contact"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(kn,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]})})]})]})]})}):null,Z=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&a.jsx(yt,{message:"Loading contacts..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(en,{className:"mr-2 text-blue-600"})," Contacts Management"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:O,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(Rt,{className:"mr-2"})," Add Contact"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search contacts",value:U,onChange:z=>W(z.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:I,onChange:z=>M(z.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:ne.map(z=>a.jsx("option",{value:z.value,children:z.label},z.value??z.label))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),a.jsx("th",{className:"py-3 px-4",children:"Department"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Created"})]})}),a.jsx("tbody",{children:r?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"Loading contacts..."})}):pe.length>0?ye.map(z=>{const ee=[{Icon:Tn,value:z.email,key:"email"},{Icon:pt,value:z.work_phone,key:"work_phone"},{Icon:xc,value:z.mobile_phone_1,key:"mobile_phone_1"},{Icon:xc,value:z.mobile_phone_2,key:"mobile_phone_2"}].filter(ie=>!!ie.value);return a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>Je(z),children:[a.jsxs("td",{className:"py-3 px-4 align-top",children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:Em(z)||"--"}),a.jsx("div",{className:"text-xs text-gray-500",children:z.title||"No title"})]}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[a.jsx(vx,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{className:"break-words",children:z.account?.name||"--"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",children:ee.length>0?a.jsx("div",{className:"space-y-1 text-gray-700",children:ee.map(({Icon:ie,value:V,key:F})=>{const se=nt.createElement(ie,{className:"text-gray-500 flex-shrink-0"});return a.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[se,a.jsx("span",{children:V})]},F)})}):a.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[a.jsx($n,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{children:z.department||"--"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[a.jsx(Qt,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{children:z.assigned_contact?`${z.assigned_contact.first_name} ${z.assigned_contact.last_name}`:"Unassigned"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[a.jsx(ft,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{className:"text-xs",children:bg(z.created_at)||"--"})]})})]},z.id)}):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"No contacts found."})})})]})}),a.jsx(Et,{className:"mt-4",totalItems:pe.length,pageSize:yg,currentPage:B,onPrev:Te,onNext:Ae,label:"contacts"})]}),re=h?a.jsx("div",{id:"modalBackdrop",onClick:Ne,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:z=>z.stopPropagation(),children:[a.jsx("button",{onClick:$,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:x||S,children:a.jsx(St,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:b?"Edit Contact":"Add New Contact"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:Ce,children:[a.jsx(Jl,{label:"First Name",name:"first_name",value:T.first_name,onChange:fe,placeholder:"First name",required:!0,disabled:x}),a.jsx(Jl,{label:"Last Name",name:"last_name",value:T.last_name,onChange:fe,placeholder:"Last name",required:!0,disabled:x}),a.jsx(RF,{label:"Account",value:T.account_id,onChange:z=>R(ee=>({...ee,account_id:z})),items:b?Pe:i||[],getLabel:z=>z?.name??"",placeholder:"Search account...",disabled:x||(b?Pe.length===0:i.length===0)}),a.jsx(RF,{label:"Assigned To",value:T.assigned_to,onChange:z=>R(ee=>({...ee,assigned_to:z})),items:l||[],getLabel:z=>`${z?.first_name??""} ${z?.last_name??""} (${z?.role??""})`.trim(),placeholder:"Search assignee...",disabled:x||l.length===0}),a.jsx(Jl,{label:"Title",name:"title",value:T.title,onChange:fe,placeholder:"Job title",disabled:x}),a.jsx(Jl,{label:"Department",name:"department",value:T.department,onChange:fe,placeholder:"Department",disabled:x}),a.jsx(Jl,{label:"Email",name:"email",type:"email",value:T.email,onChange:fe,placeholder:"example@email.com",disabled:x}),a.jsx(Jl,{label:"Work Phone",name:"work_phone",value:T.work_phone,onChange:fe,placeholder:"09xx xxx xxxx",disabled:x}),a.jsx(Jl,{label:"Mobile Phone 1",name:"mobile_phone_1",value:T.mobile_phone_1,onChange:fe,placeholder:"09xx xxx xxxx",disabled:x}),a.jsx(Jl,{label:"Mobile Phone 2",name:"mobile_phone_2",value:T.mobile_phone_2,onChange:fe,placeholder:"09xx xxx xxxx",disabled:x}),a.jsx(aFe,{label:"Notes",name:"notes",value:T.notes,onChange:fe,placeholder:"Additional details...",rows:3,disabled:x,className:"md:col-span-2"}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:$,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:x||S,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:x||S,children:x?"Saving...":b?"Update Contact":"Save Contact"})]})]})]})}):null,be=j?a.jsx(rFe,{open:!0,title:j.title,message:j.message,confirmLabel:j.confirmLabel,cancelLabel:j.cancelLabel,variant:j.variant,onConfirm:Ee,onCancel:Ge,loading:S}):null;return a.jsxs(a.Fragment,{children:[Z,k,re,be]})}function Jl({label:e,name:t,value:n,onChange:r,placeholder:s,type:i="text",required:o=!1,disabled:l=!1}){return a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("input",{type:i,name:t,value:n??"",onChange:r,placeholder:s,required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]})}function RF({label:e,items:t=[],value:n="",onChange:r,getLabel:s,placeholder:i="Search...",disabled:o=!1,className:l=""}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx(nFe,{items:t,value:n??"",onChange:r,getLabel:s,placeholder:i,disabled:o})]})}function nFe({items:e=[],value:t="",onChange:n,getLabel:r,placeholder:s="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=g.useState(!1),[d,m]=g.useState(""),h=g.useRef(null),p=e.find(x=>String(x.id)===String(t)),b=p?r(p):"",v=g.useMemo(()=>{const x=d.trim().toLowerCase();return(x?e.filter(j=>(r(j)||"").toLowerCase().includes(x)):e).slice(0,o)},[e,d,r,o]);return g.useEffect(()=>{const x=w=>{h.current&&!h.current.contains(w.target)&&c(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]),g.useEffect(()=>{l||m("")},[l]),a.jsxs("div",{ref:h,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:l?d:b,placeholder:s,onFocus:()=>!i&&c(!0),onChange:x=>{m(x.target.value),l||c(!0)},className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:v.length>0?v.map(x=>{const w=String(x.id),j=r(x),C=String(t)===w;return a.jsx("button",{type:"button",onClick:()=>{n(w),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${C?"bg-blue-50":""}`,children:j||"--"},w)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function aFe({label:e,name:t,value:n,onChange:r,placeholder:s,rows:i=3,disabled:o=!1,className:l=""}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:r,placeholder:s,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function rFe({open:e,title:t,message:n,confirmLabel:r,cancelLabel:s="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:s}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":r})]})]})})}function dX({lead:e,onBack:t,fetchLeads:n,onEdit:r,onDelete:s,setSelectedLead:i}){const o=rt(),{leadID:l}=ul(),[c,d]=g.useState(e||null),[m,h]=g.useState("Overview"),[p,b]=g.useState(""),{userRole:v}=er(),{user:x}=Ut();g.useEffect(()=>{console.log("mewo",v),console.log("asdads",x),console.log("lead",c)},[v,x,c]);const[w,j]=g.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[C,S]=g.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[_,E]=g.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),A=async()=>{try{if(e){d(e),b(e.status||"New");return}if(!l)return;const I=await oe.get(`/leads/get/${l}`);d(I.data),b(I.data.status||"New"),j({name:I.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:I.data.territory?.id||null,assigned_to:I.data.assigned_to?.id||null,created_by:I.data.creator?.id||null}),S({last_name:I.data.last_name||"",first_name:I.data.first_name||"",account_id:null,title:I.data.title||"",department:I.data.department||"",email:I.data.email||"",work_phone:I.data.work_phone||"",mobile_phone_1:I.data.mobile_phone_1||"",mobile_phone_2:I.data.mobile_phone_2||"",notes:"",assigned_to:I.data.assigned_to?.id||null,created_by:I.data.creator?.id||null}),E({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:I.data.assigned_to?.id||null,created_by:I.data.creator?.id||null})}catch(I){console.error(I)}};g.useEffect(()=>{e?(d(e),b(e.status||"New")):l&&A()},[l,e]);const T=async()=>{try{const I=await oe.put(`/leads/${c.id}/update/status`,{status:p});console.log(I.data),Q.success("Lead status updated successfully");const M={...c,status:I.data.status};d(M),i&&i(M),n&&n(),t&&t()}catch(I){console.error(I),Q.error("Failed to update lead status")}},R=async I=>{const M={...w,assigned_to:I.assigned_to?.id,billing_address:I.address,shipping_address:I.address,created_by:I.creator?.id,industry:null,name:I.company_name,phone_number:I.work_phone,status:"Prospect",territory_id:I.territory?.id,website:""};console.log("Account data: ",M),console.log("Contact data: ",C),console.log("Deal data: ",_),console.log("Lead data: ",I);try{const q=(await oe.post("/accounts/convertedLead",M)).data.id,ae={...C,account_id:q,assigned_to:I.assigned_to?.id,created_by:I.creator?.id,department:I.department,email:I.email,first_name:I.first_name,last_name:I.last_name,mobile_phone_1:I.mobile_phone_1,mobile_phone_2:I.mobile_phone_2,notes:I.notes,title:I.title,work_phone:I.work_phone},B=(await oe.post("/contacts/convertedLead",ae)).data.id,X=()=>{switch(_.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},le=_.amount&&_.amount!==""?parseFloat(_.amount):0,ue={..._,account_id:q,assigned_to:I.assigned_to?.id,created_by:I.creator?.id,primary_contact_id:B,probability:X(),stage:"Prospecting"},J=await oe.post("/deals/convertedLead",ue),ne=await oe.put(`/leads/convert/${I.id}`);i&&i(null),n(),Q.success("Lead converted successfully!"),t()}catch(H){console.error("Error during conversion:",H);const q=H.response?.data?.detail||H.message||"Failed to convert lead. Please try again.";Q.error(q)}},U=I=>{switch((I||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},W=I=>I.toString().toLowerCase().replace(/\b\w/g,M=>M.toUpperCase());return c?a.jsx(a.Fragment,{children:a.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:a.jsxs("div",{className:"flex items-start justify-between w-full",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),a.jsx("button",{onClick:()=>{t?t():o(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:a.jsx(wn,{size:25})})]})}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[c.first_name," ",c.last_name]}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${U(c.status)}`,children:W(c.status||"New")}),(c.creator?.id===x?.id||c.assigned_to?.id===x?.id)&&a.jsx("button",{onClick:()=>{c.status==="Qualified"?R(c):Q.warn("Cannot convert lead. Only leads with 'Qualified' status can be converted.")},className:"bg-green-600 hover:bg-green-700 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2 focus:ring-green-400",children:"Convert"})]}),(c.creator?.id===x?.id||c.assigned_to?.id===x?.id)&&a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{type:"button",onClick:()=>{r&&c&&r(c)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[a.jsx(pn,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{type:"button",onClick:()=>{s&&c&&s(c)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[a.jsx(jt,{className:"mr-2"}),"Delete"]})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-4 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(I=>a.jsx("button",{onClick:()=>h(I),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${m===I?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:I},I))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[m==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Name:"}),a.jsxs("p",{children:[c.first_name," ",c.last_name||"N/A"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Company:"}),a.jsx("p",{children:c.company_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Job Title:"}),a.jsx("p",{children:c.title||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Department:"}),a.jsx("p",{children:c.department||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:c.email||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Territory:"}),a.jsx("p",{children:c.territory?.name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:c.assigned_to?`${c.assigned_to.first_name} ${c.assigned_to.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:c.creator?`${c.creator.first_name} ${c.creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Work Phone:"}),a.jsx("p",{children:c.work_phone||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),a.jsx("p",{children:c.mobile_phone_1||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),a.jsx("p",{children:c.mobile_phone_2||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Source:"}),a.jsx("p",{children:c.source||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Address:"}),a.jsx("p",{children:c.address||"N/A"})]})]})}),m==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:c.notes||"No notes available."})]})]}),m==="Activities"&&a.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:pt,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:ft,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((I,M)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[a.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-gray-600 mt-1",children:a.jsx(I.icon,{size:24})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-gray-900 break-words",children:I.title}),a.jsx("p",{className:"text-sm text-gray-500 break-words",children:I.desc}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),a.jsx("p",{className:"text-sm text-gray-700 break-words",children:I.user})]})]})]}),a.jsx("p",{className:"text-sm text-gray-500 break-words",children:I.date})]},M))]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>o("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Lead"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(pt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!c?.email){alert("No email address available");return}const I=encodeURIComponent(c.email),M=encodeURIComponent(""),H=encodeURIComponent(""),q=`https://mail.google.com/mail/?view=cm&fs=1&to=${I}&su=${M}&body=${H}`;window.open(q,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Tn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>o("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Lead"}}}),children:[a.jsx(ft,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>o("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Lead"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(kn,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:p,disabled:c.creator?.id!==x?.id&&c.assigned_to?.id!==x?.id,onChange:I=>b(I.target.value),children:[a.jsx("option",{value:"New",children:"New"}),a.jsx("option",{value:"Contacted",children:"Contacted"}),a.jsx("option",{value:"Qualified",children:"Qualified"}),a.jsx("option",{value:"Converted",children:"Converted"}),a.jsx("option",{value:"Lost",children:"Lost"})]}),(c.creator?.id===x?.id||c.assigned_to?.id===x?.id)&&a.jsx("button",{onClick:T,disabled:p===c.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${p===c.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const sFe=Nf.all(),pA=sFe.map((e,t)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${t}`})),iFe=e=>e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()),oFe=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},vg=10,xA={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function lFe(){const e=rt(),{leadID:t}=ul();gr();const[n,r]=g.useState(null),[s,i]=g.useState(!1),[o,l]=g.useState(null),[c,d]=g.useState(null),[m,h]=g.useState([]),[p,b]=g.useState(!1),[v,x]=g.useState(""),[w,j]=g.useState("Filter by Status"),[C,S]=g.useState(1),[_,E]=g.useState(xA),[A,T]=g.useState(!1),[R,U]=g.useState(null),[W,I]=g.useState(!1),[M,H]=g.useState(null),[q,ae]=g.useState(!1);g.useRef(null);const[K,B]=g.useState(!1),[X,le]=g.useState(null),[ue,J]=g.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[ne,pe]=g.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[we,ye]=g.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});g.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const Te=async()=>{try{const V=await oe.get("/leads/getUsers");l(V.data)}catch(V){console.error(`Error fetching users: ${V}`)}},Ae=async()=>{b(!0);try{const V=await oe.get("/leads/admin/getLeads");h(V.data),console.log(V.data)}catch(V){console.error(`Error fetching leads: ${V}`)}finally{b(!1)}};g.useEffect(()=>{Te(),Ae()},[]),g.useEffect(()=>{if(t&&m.length>0&&!s&&!A){const V=m.find(F=>F.id===Number(t));V&&r(V)}else!t&&!n&&r(null)},[t,m,s,A]),g.useEffect(()=>{if(X){const F=(ge=>{if(!ge)return{code:"+63",number:""};const Me=ge.match(/^(\+\d+)\s(.+)$/);if(Me)return{code:Me[1],number:Me[2]};if(ge.startsWith("+")){const De=ge.match(/^(\+\d{1,3})/);if(De)return{code:De[1],number:ge.substring(De[1].length).trim()}}return{code:"+63",number:ge}})(X.work_phone),se=[];X.work_phone&&se.push(`Work: ${X.work_phone}`),X.mobile_phone_1&&se.push(`Mobile 1: ${X.mobile_phone_1}`),X.mobile_phone_2&&se.push(`Mobile 2: ${X.mobile_phone_2}`);const xe=se.length>0?se.join(" | "):"";J({name:X.company_name||"",website:"",countryCode:F.code,phone_number:F.number,combinedPhoneNumbers:xe,billing_address:X.address||"",shipping_address:X.address||"",industry:"",status:"Prospect",territory_id:X.assigned_to?.territory?.id||null,assigned_to:X.assigned_to?.id||null,created_by:X.creator?.id||null}),pe({last_name:X.last_name||"",first_name:X.first_name||"",account_id:null,title:X.title||"",department:X.department||"",email:X.email||"",work_phone:X.work_phone||"",mobile_phone_1:X.mobile_phone_1||"",mobile_phone_2:X.mobile_phone_2||"",notes:X.notes||"",assigned_to:X.assigned_to?.id||null,created_by:X.creator?.id||null}),ye({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:X.assigned_to?.id||null,created_by:X.creator?.id||null})}},[X]);const Pe=V=>x(V.target.value),$=g.useMemo(()=>{const V=v.trim().toLowerCase(),F=w.trim().toUpperCase();return m.filter(se=>{const xe=[se?.first_name,se?.last_name,se?.company_name,se?.title,se?.email,se?.work_phone,se?.assigned_to?`${se.assigned_to.first_name} ${se.assigned_to.last_name}`:""],ge=V===""||xe.some(De=>De==null||De===""?!1:De.toString().toLowerCase().includes(V));let Me=!1;return F==="FILTER BY STATUS"?Me=(se.status?se.status.toUpperCase():"")!=="CONVERTED":Me=(se.status?se.status.toUpperCase():"")===F,ge&&Me})},[m,v,w]),Ne=Math.max(1,Math.ceil($.length/vg)||1);g.useEffect(()=>{S(1)},[v,w]),g.useEffect(()=>{S(V=>{const F=Math.max(1,Math.ceil($.length/vg)||1);return V>F?F:V})},[$.length]);const fe=g.useMemo(()=>{const V=(C-1)*vg;return $.slice(V,V+vg)},[$,C]),O=()=>S(V=>Math.max(V-1,1)),ce=()=>S(V=>Math.min(V+1,Ne)),de=V=>{r(V)},Ce=()=>{r(null),t&&e("/admin/leads",{replace:!0})},Ee=()=>{i(!1),E(xA),T(!1),U(null),I(!1),d(null),sessionStorage.removeItem("editLeadData")},Ge=V=>{V.target.id==="modalBackdrop"&&Ee()},Je=()=>{E(xA),T(!1),U(null),d(null),i(!0)},We=V=>{if(!V){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",V),console.log("Current state - leadID:",t,"selectedLead:",n,"showModal:",s);const F=De=>{if(!De)return{code:"+63",number:""};const et=De.match(/^(\+\d+)\s(.+)$/);return et?{code:et[1],number:et[2]}:{code:"+63",number:De}},se=F(V.work_phone),xe=F(V.mobile_phone_1),ge=F(V.mobile_phone_2);let Me="";if(V.assigned_to){Me=String(V.assigned_to.id);const De=o?.find(et=>et.id===V.assigned_to.id);d(De)}E({first_name:V.first_name||"",last_name:V.last_name||"",company_name:V.company_name||"",title:V.title||"",department:V.department||"",email:V.email||"",work_ccode:se.code,work_phone:se.number,m1_ccode:xe.code,mobile_phone_1:xe.number,m2_ccode:ge.code,mobile_phone_2:ge.number,address:V.address||"",notes:V.notes||"",source:V.source||"",territory_id:V.territory?.id||null,lead_owner:Me,status:V.status||"New"}),T(!0),U(V.id),n?(console.log("Coming from detail view - closing detail modal and showing edit form"),r(null),i(!0)):(console.log("Already in list view - showing modal"),i(!0))},Ke=V=>{if(!V){console.error("handleDelete: lead is null or undefined");return}console.log("handleDelete called with lead:",V);const F=`${V.first_name} ${V.last_name}`||"this lead";H({title:"Delete Lead",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:F}),"? This action cannot be undone."]}),confirmLabel:"Delete Lead",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:V.id,name:F}})},He=V=>{const{name:F,value:se}=V.target;if(E(xe=>({...xe,[F]:se})),F==="lead_owner"){const xe=o.find(ge=>ge.id===parseInt(se));d(xe)}},Se=V=>{if(V.preventDefault(),!_.first_name?.trim()||!_.last_name?.trim()){Q.error("First name and last name are required.");return}if(!_.lead_owner){Q.error("Please assign a lead owner.");return}const F={..._,territory_id:_.territory_id?parseInt(_.territory_id):null,lead_owner:parseInt(_.lead_owner),work_phone:`${_.work_ccode} ${_.work_phone}`,mobile_phone_1:`${_.m1_ccode} ${_.mobile_phone_1}`,mobile_phone_2:`${_.m2_ccode} ${_.mobile_phone_2}`},se=A&&R?"update":"create",xe=`${_.first_name} ${_.last_name}`;H({title:se==="create"?"Confirm New Lead":"Confirm Update",message:se==="create"?a.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",a.jsx("span",{className:"font-semibold",children:xe}),"?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:xe}),"?"]}),confirmLabel:se==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:se,payload:F,targetId:R||null,name:xe}})},Ve=async()=>{if(!M?.action){H(null);return}const{action:V}=M,{type:F,payload:se,targetId:xe,name:ge,lead:Me}=V;console.log(se),ae(!0);try{if(F==="create")I(!0),await oe.post("/leads/create",se),Q.success(`Lead "${ge}" created successfully.`),Ee(),await Ae();else if(F==="update"){if(!xe)throw new Error("Missing lead identifier for update.");I(!0);const De=await oe.put(`/leads/${xe}`,se);Q.success(`Lead "${ge}" updated successfully.`),n&&n.id===xe&&r(null),Ee(),await Ae()}else if(F==="delete"){if(!xe)throw new Error("Missing lead identifier for deletion.");await oe.delete(`/leads/${xe}`),Q.success(`Lead "${ge}" deleted successfully.`),n?.id===xe&&r(null),await Ae()}}catch(De){console.error(De);const et=F==="create"?"Failed to create lead. Please review the details and try again.":F==="update"?"Failed to update lead. Please review the details and try again.":"Failed to delete lead. Please try again.",gt=De.response?.data?.detail||et;Q.error(gt)}finally{(F==="create"||F==="update")&&I(!1),F!=="edit"&&(ae(!1),H(null))}},k=()=>{q||H(null)},Z=m.filter(V=>V.status==="New").length,re=m.filter(V=>V.status==="Contacted").length,be=m.filter(V=>V.status==="Qualified").length,z=m.filter(V=>V.status==="Converted").length,ee=m.filter(V=>V.status==="Lost").length,ie=[{title:"New",value:Z,icon:Ln,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:re,icon:pt,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:be,icon:Fn,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:z,icon:ml,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:ee,icon:hr,color:"text-red-600",bgColor:"bg-red-100"}];return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[p&&a.jsx(yt,{message:"Loading leads..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(Ln,{className:"mr-2 text-blue-600"}),"Leads"]}),a.jsxs("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:[a.jsxs("button",{onClick:()=>{Q.info("Download functionality coming soon")},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(Sc,{className:"mr-2"})," Download"]}),a.jsxs("button",{onClick:Je,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(Rt,{className:"mr-2"})," Add Lead"]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:ie.map(V=>a.jsx(dFe,{...V},V.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search leads",value:v,onChange:Pe,className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:w,onChange:V=>j(V.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),a.jsx("option",{value:"New",children:"New"}),a.jsx("option",{value:"Contacted",children:"Contacted"}),a.jsx("option",{value:"Qualified",children:"Qualified"}),a.jsx("option",{value:"Converted",children:"Converted"}),a.jsx("option",{value:"Lost",children:"Lost"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Name"}),a.jsx("th",{className:"py-3 px-4",children:"Company"}),a.jsx("th",{className:"py-3 px-4",children:"Job Title"}),a.jsx("th",{className:"py-3 px-4",children:"Email"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),a.jsx("tbody",{children:$.length>0?fe.map(V=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>de(V),children:[a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[V.first_name," ",V.last_name]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:V.company_name||"--"})}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:V.title||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:V.email||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:V.assigned_to?`${V.assigned_to.first_name} ${V.assigned_to.last_name}`:"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${oFe(V.status||"New")}`,children:iFe(V.status||"New")})})]},V.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No leads found."})})})]})}),a.jsx(Et,{className:"mt-4",totalItems:$.length,pageSize:vg,currentPage:C,onPrev:O,onNext:ce,label:"leads"}),s&&a.jsx("div",{id:"modalBackdrop",onClick:Ge,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:V=>V.stopPropagation(),children:[a.jsx("button",{onClick:Ee,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(St,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:A?"Edit Lead":"Add New Lead"}),a.jsxs("form",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),a.jsx("input",{type:"text",name:"first_name",value:_.first_name,onChange:He,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Last Name"}),a.jsx("input",{type:"text",placeholder:"Smith",name:"last_name",value:_.last_name,onChange:He,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Company"}),a.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:_.company_name,onChange:He,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Job Title"}),a.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:_.title,onChange:He,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),a.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:_.department,onChange:He,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Email"}),a.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:_.email,onChange:He,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"work_ccode",value:_.work_ccode,onChange:He,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:pA.map(V=>a.jsx("option",{value:V.code,children:V.code},V.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:_.work_phone,onChange:He,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"m1_ccode",value:_.m1_ccode,onChange:He,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:pA.map(V=>a.jsx("option",{value:V.code,children:V.code},V.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:_.mobile_phone_1,onChange:He,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"m2_ccode",value:_.m2_ccode,onChange:He,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:pA.map(V=>a.jsx("option",{value:V.code,children:V.code},V.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:_.mobile_phone_2,onChange:He,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),a.jsx("input",{type:"text",name:"address",value:_.address,onChange:He,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Assign To"}),a.jsx(uFe,{items:Array.isArray(o)?o:[],value:_.lead_owner??"",placeholder:"Search a user...",getLabel:V=>`${V.first_name} ${V.last_name}`,onChange:V=>{const F=o.find(xe=>String(xe.id)===String(V));d(F);let se=null;F&&F.assigned_territory&&F.assigned_territory.length===1&&(se=F.assigned_territory[0].id),E(xe=>({...xe,lead_owner:V,territory_id:se}))}})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),a.jsxs("select",{name:"territory_id",value:_.territory_id||"",onChange:He,disabled:!c||!c.assigned_territory||c.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[a.jsx("option",{value:"",disabled:!0,children:c?c.assigned_territory&&c.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),c&&c.assigned_territory&&c.assigned_territory.map(V=>a.jsx("option",{value:V.id,children:V.name},V.id))]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),a.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:_.source,onChange:He,children:[a.jsx("option",{value:"",disabled:!0,children:"Select Source"}),a.jsx("option",{value:"Website",children:"Website"}),a.jsx("option",{value:"Referral",children:"Referral"}),a.jsx("option",{value:"Cold call",children:"Cold call"}),a.jsx("option",{value:"Event",children:"Event"}),a.jsx("option",{value:"Other",children:"Other"})]})]}),a.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),a.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:_.notes,onChange:He,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("button",{type:"button",onClick:Ee,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:W||q,children:"Cancel"}),a.jsx("button",{type:"submit",onClick:Se,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:W||q,children:W||q?"Processing...":A?"Update Lead":"Save Lead"})]})]})]})}),M&&a.jsx(cFe,{open:!0,title:M.title,message:M.message,confirmLabel:M.confirmLabel,cancelLabel:M.cancelLabel,variant:M.variant,onConfirm:Ve,onCancel:k,loading:q}),n&&!s&&!A&&a.jsx(dX,{lead:n,onBack:Ce,fetchLeads:Ae,setSelectedLead:r,onEdit:We,onDelete:Ke})]})}function cFe({open:e,title:t,message:n,confirmLabel:r,cancelLabel:s="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:s}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":r})]})]})})}function dFe({icon:e,title:t,value:n,color:r="text-blue-600",bgColor:s="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${s} ${r} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function uFe({items:e=[],value:t="",onChange:n,getLabel:r,placeholder:s="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=g.useState(!1),[d,m]=g.useState(""),h=g.useRef(null),p=e.find(x=>String(x.id)===String(t)),b=p?r(p):"",v=g.useMemo(()=>{const x=d.trim().toLowerCase();return(x?e.filter(j=>(r(j)||"").toLowerCase().includes(x)):e).slice(0,o)},[e,d,r,o]);return g.useEffect(()=>{const x=w=>{h.current&&!h.current.contains(w.target)&&c(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]),g.useEffect(()=>{l||m("")},[l]),a.jsxs("div",{ref:h,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:l?d:b,placeholder:s,onFocus:()=>!i&&c(!0),onChange:x=>{m(x.target.value),l||c(!0)},className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:v.length>0?v.map(x=>{const w=String(x.id),j=r(x),C=String(t)===w;return a.jsx("button",{type:"button",onClick:()=>{n(w),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${C?"bg-blue-50":""}`,children:j||"--"},w)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const gb={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},Ca=({label:e,value:t,name:n,className:r=""})=>a.jsxs("div",{className:`flex flex-col ${r}`,children:[a.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),a.jsx("input",{type:"text",name:n,defaultValue:t,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),mFe=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(Ca,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),a.jsx(Ca,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),a.jsx(Ca,{label:"Industry",name:"industry",value:e.industry})]}),a.jsx(Ca,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),a.jsx(Ca,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),fFe=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(Ca,{label:"First Name",name:"firstName",value:e.firstName}),a.jsx(Ca,{label:"Last Name",name:"lastName",value:e.lastName}),a.jsx(Ca,{label:"Department",name:"department",value:e.department}),a.jsx(Ca,{label:"Title",name:"title",value:e.title}),a.jsx(Ca,{label:"Work Phone",name:"workPhone",value:e.workPhone}),a.jsx(Ca,{label:"Email",name:"email",value:e.email}),a.jsx(Ca,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),a.jsx(Ca,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),hFe=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(Ca,{label:"Deal Name",name:"dealName",value:e.dealName}),a.jsxs("div",{className:"flex",children:[a.jsx(Ca,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),a.jsx("div",{className:"flex flex-col justify-end ml-1",children:a.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),a.jsx(Ca,{label:"Stage",name:"stage",value:e.stage}),a.jsx(Ca,{label:"Territory",name:"territory",value:e.territory})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(Ca,{label:"Description",name:"description",value:e.description}),a.jsx(Ca,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function gFe({isOpen:e,onClose:t}){const[n,r]=g.useState(1),s=3;if(!e)return null;const i=()=>{n<s?r(n+1):(t(),r(1))},o=()=>{n>1&&r(n-1)},l=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],c=()=>{switch(n){case 1:return a.jsx(mFe,{data:gb});case 2:return a.jsx(fFe,{data:gb});case 3:return a.jsx(hFe,{data:gb});default:return null}};return a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:gb.accountName})]}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:a.jsx(Nj,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:l.map(d=>a.jsx("button",{onClick:()=>r(d.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${n===d.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:d.name},d.id))}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c()}),a.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[n>1&&a.jsx("button",{onClick:o,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),n<s?a.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):a.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}const wg=10;function pFe(){g.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const[e,t]=g.useState(""),[n,r]=g.useState("Filter by Stage"),[s,i]=g.useState("Filter by Owner"),[o,l]=g.useState(null),[c,d]=g.useState("Overview"),[m,h]=g.useState(!1),[p,b]=g.useState(null),[v,x]=g.useState(!1),[w,j]=g.useState(1),[C,S]=g.useState(!1),[_,E]=g.useState(null),[A,T]=g.useState(!1),[R,U]=g.useState(!1),[W,I]=g.useState(null),[M,H]=g.useState([]),[q,ae]=g.useState([]),[K,B]=g.useState([]),[X,le]=g.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),[ue,J]=g.useState(null),[ne,pe]=g.useState(null),we={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST","Closed Cancelled Stage":"CLOSED_CANCELLED"},ye=F=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost",CLOSED_CANCELLED:"Closed Cancelled"})[F]||F||"--",Te=F=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700",CLOSED_CANCELLED:"bg-red-100 text-red-700"})[F]||"bg-gray-100 text-gray-700",Ae=g.useMemo(()=>{const F=e.trim().toLowerCase(),se=n.trim(),xe=s.trim();return(p??[]).filter(ge=>{const Me=[ge?.name,ge?.description,ge?.account?.name,ge?.contact?.first_name,ge?.contact?.last_name,ge?.assigned_deals?.first_name,ge?.assigned_deals?.last_name],De=F===""||Me.some(Nt=>Nt==null||Nt===""?!1:Nt.toString().toLowerCase().includes(F)),et=se==="Filter by Stage"||se===""||ge.stage===we[se]||ge.stage===se,gt=xe==="Filter by Owner"||xe===""||`${ge.assigned_deals?.first_name||""} ${ge.assigned_deals?.last_name||""}`.trim().toLowerCase()===xe.toLowerCase();return De&&et&&gt})},[p,e,n,s]),Pe=Math.max(1,Math.ceil(Ae.length/wg)||1);g.useEffect(()=>{j(1)},[e,n,s]),g.useEffect(()=>{j(F=>{const se=Math.max(1,Math.ceil(Ae.length/wg)||1);return F>se?se:F})},[Ae.length]);const $=g.useMemo(()=>{const F=(w-1)*wg;return Ae.slice(F,F+wg)},[Ae,w]),Ne=()=>j(F=>Math.max(F-1,1)),fe=()=>j(F=>Math.min(F+1,Pe)),O=()=>{le({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),U(!1),I(null),h(!0)},ce=async()=>{x(!0);try{const F=await oe.get("/deals/admin/fetch-all"),xe=[...Array.isArray(F.data)?F.data:[]].sort((ge,Me)=>{const De=ge?.created_at?new Date(ge.created_at).getTime():0;return(Me?.created_at?new Date(Me.created_at).getTime():0)-De});b(xe)}catch(F){F.response&&F.response.status===403?Q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):Q.error("Failed to fetch deals. Please try again later."),console.error(F)}finally{x(!1)}},de=async()=>{try{const F=await oe.get("/accounts/admin/fetch-all");H(Array.isArray(F.data)?F.data:[])}catch(F){console.error(F),F.response?.status===403&&Q.warn("Unable to load accounts (permission denied).")}},Ce=async()=>{try{const F=await oe.get("/contacts/admin/fetch-all");ae(Array.isArray(F.data)?F.data:[])}catch(F){console.error(F),F.response?.status===403&&Q.warn("Unable to load contacts (permission denied).")}},Ee=async()=>{try{const F=await oe.get("/users/all");B(Array.isArray(F.data)?F.data:[])}catch(F){console.error(F),F.response?.status===403&&Q.warn("Unable to load users (permission denied).")}};g.useEffect(()=>{ce(),de(),Ce(),Ee()},[]);const Ge=async F=>{F&&(le({id:F.id||null,name:F.name||"",account_id:F.account_id?.toString()||"",primary_contact_id:F.primary_contact_id?.toString()||"",stage:F.stage||"PROPOSAL",amount:F.amount?.toString()||"",close_date:F.close_date?new Date(F.close_date).toISOString().split("T")[0]:"",assigned_to:F.assigned_to?.toString()||"",currency:F.currency||"PHP",description:F.description||""}),J(F.account||null),pe(F.contact||null),U(!0),I(F.id),l(null),h(!0))},Je=async(F=!1)=>{try{const se=await oe.get("/deals/admin/fetch-all"),ge=[...Array.isArray(se.data)?se.data:[]].sort((Me,De)=>{const et=Me?.created_at?new Date(Me.created_at).getTime():0;return(De?.created_at?new Date(De.created_at).getTime():0)-et});if(b(ge),!F&&o&&o.id){const Me=ge.find(De=>De.id===o.id);Me&&l({...Me})}}catch(se){console.error("Failed to refresh deal data:",se),await ce()}},We=F=>{const se=F.name.trim();if(!se){Q.error("Deal name is required.");return}if(!F.account_id){Q.error("Account is required.");return}const xe=R&&W?"update":"create",ge=se;E({title:xe==="create"?"Confirm New Deal":"Confirm Update",message:xe==="create"?a.jsxs("span",{children:["Are you sure you want to create"," ",a.jsx("span",{className:"font-semibold",children:ge}),"?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:ge}),"?"]}),confirmLabel:xe==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:xe,formData:F,targetId:W||null,name:ge}})},Ke=F=>{if(!F)return;const se=F.name||"this deal";E({title:"Delete Deal",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:se}),"? This action cannot be undone."]}),confirmLabel:"Delete Deal",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:F.id,name:se}})},He=async()=>{if(!_?.action){E(null);return}const{action:F}=_,{type:se,formData:xe,targetId:ge,name:Me}=F;T(!0);try{if(se==="create"){S(!0);const De={name:xe.name.trim(),account_id:parseInt(xe.account_id),primary_contact_id:xe.primary_contact_id?parseInt(xe.primary_contact_id):null,stage:xe.stage,amount:xe.amount?parseFloat(xe.amount):null,currency:xe.currency||"PHP",close_date:xe.close_date||null,description:xe.description||null,assigned_to:xe.assigned_to?parseInt(xe.assigned_to):null};await oe.post("/deals/admin/create",De),Q.success(`Deal "${Me}" created successfully.`),h(!1),await ce()}else if(se==="update"){if(!ge)throw new Error("Missing deal identifier for update.");S(!0);const De={};xe.name!==void 0&&(De.name=xe.name.trim()),xe.account_id!==void 0&&xe.account_id!==""&&(De.account_id=parseInt(xe.account_id)),xe.primary_contact_id!==void 0&&(De.primary_contact_id=xe.primary_contact_id?parseInt(xe.primary_contact_id):null),xe.stage!==void 0&&(De.stage=xe.stage),xe.amount!==void 0&&xe.amount!==""&&(De.amount=parseFloat(xe.amount)),xe.currency!==void 0&&(De.currency=xe.currency),xe.close_date!==void 0&&(De.close_date=xe.close_date||null),xe.description!==void 0&&(De.description=xe.description||null),xe.assigned_to!==void 0&&(De.assigned_to=xe.assigned_to?parseInt(xe.assigned_to):null),await oe.put(`/deals/admin/${ge}`,De),Q.success(`Deal "${Me}" updated successfully.`),h(!1),await ce()}else if(se==="delete"){if(!ge)throw new Error("Missing deal identifier for deletion.");await oe.delete(`/deals/admin/${ge}`),Q.success(`Deal "${Me}" deleted successfully.`),o?.id===ge&&l(null),await ce()}}catch(De){console.error(De);const et=se==="create"?"Failed to create deal. Please review the details and try again.":se==="update"?"Failed to update deal. Please review the details and try again.":"Failed to delete deal. Please try again.",gt=De.response?.data?.detail||et;Q.error(gt)}finally{(se==="create"||se==="update")&&S(!1),T(!1),E(null)}},Se=()=>{A||E(null)},Ve=()=>{h(!1),le({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),J(null),pe(null),U(!1),I(null),S(!1)},k=(p??[]).filter(F=>F.stage==="PROSPECTING").length,Z=(p??[]).filter(F=>F.stage==="QUALIFICATION").length,re=(p??[]).filter(F=>F.stage==="PROPOSAL").length,be=(p??[]).filter(F=>F.stage==="NEGOTIATION").length,z=(p??[]).filter(F=>F.stage==="CLOSED_WON").length,ee=(p??[]).filter(F=>F.stage==="CLOSED_LOST").length,ie=(p??[]).filter(F=>F.stage==="CLOSED_CANCELLED").length,V=[{title:"Prospecting",value:k,icon:yw,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:Z,icon:Rn,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:re,icon:$n,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:be,icon:Wd,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:z,icon:Fn,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:ee,icon:hr,color:"text-red-600",bgColor:"bg-red-100"},{title:"Closed Cancelled",value:ie,icon:hr,color:"text-gray-600",bgColor:"bg-gray-100"}];return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[v&&a.jsx(yt,{message:"Loading deals..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx($n,{className:"mr-2 text-blue-600"}),"Deals"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:O,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(Rt,{className:"mr-2"})," Add Deal"]})})]}),a.jsx("div",{className:"grid grid-cols-1 p-2 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden",children:V.map(F=>a.jsx(yFe,{...F},F.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search deals",value:e,onChange:F=>t(F.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[a.jsxs("select",{value:n,onChange:F=>r(F.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),a.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),a.jsx("option",{value:"Qualification Stage",children:"Qualification"}),a.jsx("option",{value:"Proposal Stage",children:"Proposal"}),a.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),a.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),a.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"}),a.jsx("option",{value:"Closed Cancelled Stage",children:"Closed Cancelled"})]}),a.jsxs("select",{value:s,onChange:F=>i(F.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((p??[]).map(F=>`${F.assigned_deals?.first_name} ${F.assigned_deals?.last_name}`))].map((F,se)=>a.jsx("option",{value:F,children:F},se))]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Stage"}),a.jsx("th",{className:"py-3 px-4",children:"Value"}),a.jsx("th",{className:"py-3 px-4",children:"Close Date"}),a.jsx("th",{className:"py-3 px-4",children:"Owner"})]})}),a.jsx("tbody",{children:Ae.length>0?$.map(F=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{l({...F})},children:[a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:F.deal_id?F.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:F.name}),a.jsx("div",{className:"text-gray-500 text-xs break-all",children:F.description||"--"})]})}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:F.account?.name||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:F.contact?.first_name&&F.contact?.last_name?`${F.contact.first_name} ${F.contact.last_name}`:F.contact?.first_name||F.contact?.last_name||"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Te(F.stage)}`,children:ye(F.stage)})}),a.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",F.amount?.toLocaleString()||"0"]}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:F.close_date||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:F.assigned_deals?.first_name&&F.assigned_deals?.last_name?`${F.assigned_deals.first_name} ${F.assigned_deals.last_name}`:F.assigned_deals?.first_name||F.assigned_deals?.last_name||"--"})]},F.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No deals found."})})})]})}),a.jsx(Et,{className:"mt-4",totalItems:Ae.length,pageSize:wg,currentPage:w,onPrev:Ne,onNext:fe,label:"deals"}),m&&a.jsx(bFe,{onClose:Ve,formData:X,setFormData:le,isEditing:R,onSubmit:We,isSubmitting:C||A,accounts:M,contacts:q,users:K,currentAccount:ue,currentContact:ne}),o&&a.jsx(Bx,{selectedDeal:o,show:!!o,onClose:()=>l(null),activeTab:c,setActiveTab:d,onEdit:Ge,onDelete:Ke,onStatusUpdate:Je}),_&&a.jsx(xFe,{open:!0,title:_.title,message:_.message,confirmLabel:_.confirmLabel,cancelLabel:_.cancelLabel,variant:_.variant,onConfirm:He,onCancel:Se,loading:A})]})}function xFe({open:e,title:t,message:n,confirmLabel:r,cancelLabel:s="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:s}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":r})]})]})})}function yFe({icon:e,title:t,value:n,color:r="text-blue-600",bgColor:s="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${s} ${r} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function bFe({onClose:e,formData:t,setFormData:n,isEditing:r=!1,onSubmit:s,isSubmitting:i=!1,accounts:o=[],contacts:l=[],users:c=[],currentAccount:d=null,currentContact:m=null}){const h=v=>{v.preventDefault(),s&&s(t)},p=v=>{v.target.id==="modalBackdrop"&&e()},b=g.useMemo(()=>{const v=String(t.account_id||"").trim(),x=Array.isArray(l)?l:[];return v?x.filter(w=>{const C=[w?.account_id,w?.accountId,w?.account?.id,w?.account?.account_id,w?.account?.accountId].find(S=>S!=null&&String(S).trim()!=="");return C?String(C)===v:!1}):x},[l,t.account_id]);return g.useEffect(()=>{const v=String(t.account_id||"").trim(),x=String(t.primary_contact_id||"").trim();if(!x||!v)return;b.some(j=>String(j?.id)===x)||n(j=>({...j,primary_contact_id:""}))},[t.account_id,t.primary_contact_id,b,n]),a.jsx("div",{id:"modalBackdrop",onClick:p,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:v=>v.stopPropagation(),children:[a.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(St,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:r?"Edit Deal":"Create Deal"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:h,children:[a.jsx(yA,{label:"Deal Name",name:"name",value:t.name,onChange:v=>n({...t,name:v.target.value}),placeholder:"Enter deal name",required:!0,disabled:i,className:"md:col-span-2"}),a.jsx(bA,{label:"Account",value:t.account_id||"",onChange:v=>n({...t,account_id:v}),items:o||[],getLabel:v=>v?.name??"",placeholder:"Search account...",disabled:i,currentItem:d}),a.jsx(bA,{label:"Primary Contact",value:t.primary_contact_id||"",onChange:v=>n({...t,primary_contact_id:v}),items:b||[],getLabel:v=>`${v?.first_name??""} ${v?.last_name??""}`.trim()||v?.email||"",placeholder:"Search contact...",disabled:i,currentItem:m}),a.jsx(zF,{label:"Stage",name:"stage",value:t.stage,onChange:v=>n({...t,stage:v.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}],disabled:i}),a.jsx(yA,{label:"Amount",name:"amount",type:"number",step:"0.01",value:t.amount,onChange:v=>n({...t,amount:v.target.value}),placeholder:"0",disabled:i}),a.jsx(zF,{label:"Currency",name:"currency",value:t.currency||"PHP",onChange:v=>n({...t,currency:v.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),a.jsx(yA,{label:"Close Date",name:"close_date",type:"date",value:t.close_date||"",onChange:v=>n({...t,close_date:v.target.value}),disabled:i}),a.jsx(bA,{label:"Assign To",value:t.assigned_to||"",onChange:v=>n({...t,assigned_to:v}),items:c||[],getLabel:v=>`${v?.first_name??""} ${v?.last_name??""}`.trim()||v?.email||"",placeholder:"Search assignee...",disabled:i,className:"md:col-span-2"}),a.jsx(wFe,{label:"Description",name:"description",value:t.description,onChange:v=>n({...t,description:v.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":r?"Update Deal":"Save Deal"})]})]})]})})}function yA({label:e,name:t,value:n,onChange:r,placeholder:s,type:i="text",required:o=!1,disabled:l=!1,className:c=""}){return a.jsxs("div",{className:c,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("input",{type:i,name:t,value:n??"",onChange:r,placeholder:s,required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]})}function zF({label:e,name:t,value:n,onChange:r,options:s,required:i=!1,disabled:o=!1,className:l=""}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:n??"",onChange:r,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:s.map(c=>a.jsx("option",{value:c.value,children:c.label},c.value))})]})}function bA({label:e,items:t=[],value:n="",onChange:r,getLabel:s,placeholder:i="Search...",disabled:o=!1,className:l="",currentItem:c=null}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx(vFe,{items:t,value:n??"",onChange:r,getLabel:s,placeholder:i,disabled:o,currentItem:c})]})}function vFe({items:e=[],value:t="",onChange:n,getLabel:r,placeholder:s="Search...",disabled:i=!1,maxRender:o=200,currentItem:l=null}){const[c,d]=g.useState(!1),[m,h]=g.useState(""),p=g.useRef(null),v=e.find(j=>String(j.id)===String(t))||l,x=v?r(v):"",w=g.useMemo(()=>{const j=m.trim().toLowerCase();return(j?e.filter(S=>(r(S)||"").toLowerCase().includes(j)):e).slice(0,o)},[e,m,r,o]);return g.useEffect(()=>{const j=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]),g.useEffect(()=>{c||h("")},[c]),a.jsxs("div",{ref:p,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:c?m:x,placeholder:s,onFocus:()=>!i&&d(!0),onChange:j=>{h(j.target.value),c||d(!0)},className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),c&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:w.length>0?w.map(j=>{const C=String(j.id),S=r(j),_=String(t)===C;return a.jsx("button",{type:"button",onClick:()=>{n(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${_?"bg-blue-50":""}`,children:S||"--"},C)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function wFe({label:e,name:t,value:n,onChange:r,placeholder:s,required:i=!1,disabled:o=!1,className:l="",rows:c=3}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:r,placeholder:s,required:i,disabled:o,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function NFe({selectedDeal:e,show:t,onClose:n,activeTab:r,setActiveTab:s,onEdit:i,onDelete:o,onStatusUpdate:l}){const c=rt(),[d]=gr(),m=d.get("id"),[h,p]=g.useState(e||null),[b,v]=g.useState(r||"Overview"),{user:x}=Ut();g.useEffect(()=>{console.log("AdminDealsInformation mounted",h),console.log("User:",x)},[h,x]);const w=r!==void 0?r:b;if(g.useEffect(()=>{(async()=>{if(m&&!e)try{console.log("Fetching deal from route, ID:",m);const E=(await oe.get("/deals/admin/fetch-all")).data||[];console.log("All deals fetched:",E.length);const A=E.find(T=>T.id===parseInt(m));if(console.log("Found deal:",A),A){console.log("Deal data structure:",{id:A.id,name:A.name,amount:A.amount,stage:A.stage,account:A.account,contact:A.contact,assigned_deals:A.assigned_deals,deal_creator:A.deal_creator,allKeys:Object.keys(A)});const T={...A,amount:typeof A.amount=="number"?A.amount:parseFloat(A.amount||0),probability:A.probability||0};p(T)}else console.warn("Deal not found with ID:",m)}catch(_){console.error("Error fetching deal:",_)}})()},[m,e]),!h&&!m||m&&!h)return null;const j=S=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[S]||"bg-gray-100 text-gray-700";function C(S){return S?new Date(S).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:a.jsxs("div",{className:"flex items-start justify-between w-full",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),a.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:a.jsx("button",{onClick:()=>{n?n():c(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:a.jsx(St,{size:25})})})]})}),a.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:a.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[a.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:h.name}),a.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${j(h.stage)}`,children:h.stage})]}),a.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",C(h.created_at)]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-2",children:[a.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[" ",h.amount?h.amount.toLocaleString():"0"]}),a.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${h.probability}%`}})}),a.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",h.probability,"% Complete "]}),(h.created_by===x?.id||h.assigned_to===x?.id)&&a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[a.jsxs("button",{type:"button",onClick:()=>{i&&i(h)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[a.jsx(pn,{className:"mr-1 sm:mr-2",size:16}),a.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),a.jsxs("button",{type:"button",onClick:()=>{o&&o(h)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[a.jsx(jt,{className:"mr-1 sm:mr-2",size:16}),a.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})]})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(S=>a.jsx("button",{onClick:()=>{s?s(S):v(S)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${w===S?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:S},S))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[w==="Overview"&&a.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),a.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[a.jsx("strong",{children:"Description:"})," ",h.description]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[a.jsx("strong",{children:"Expected Close Date:"})," ",h.close_date]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("div",{className:"mt-4 py-3 w-full",children:[a.jsxs("div",{className:"relative flex flex-col w-full",children:[a.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const S=(h?.stage||"PROSPECTING").toUpperCase(),E=(T=>T==="PROSPECTING"?0:T==="QUALIFICATION"?1:T==="PROPOSAL"?2:T==="NEGOTIATION"?3:T==="CLOSED_WON"||T==="CLOSED_LOST"?4:-1)(S);return[0,1,2,3,4].map(T=>E===T?"orange":E>T?"green":"gray").map((T,R)=>a.jsxs(nt.Fragment,{children:[a.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${T==="green"?"bg-green-500 border-green-500":T==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),R<4&&a.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},R))})()}),a.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((S,_)=>a.jsx("span",{className:"text-center flex-1 break-words",children:S},_))})]}),a.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:h.stage})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),a.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Account:"})," ",h.account?.name]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Primary Contact:"})," ",h.contact?.first_name," ",h.contact?.last_name]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Phone:"})," ",h.contact?.work_phone]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Email:"})," ",h.contact?.email]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Assigned To:"})," ",h.assigned_deals?.first_name," ",h.assigned_deals?.last_name]})]})]})]}),w==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:h.description||"No notes available."})]})]}),w==="Activities"&&a.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:pt,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:ft,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((S,_)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[a.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-gray-600 mt-1",children:a.jsx(S.icon,{size:24})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-gray-900 break-words",children:S.title}),a.jsx("p",{className:"text-sm text-gray-500 break-words",children:S.desc}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),a.jsx("p",{className:"text-sm text-gray-700 break-words",children:S.user})]})]})]}),a.jsx("p",{className:"text-sm text-gray-500 break-words",children:S.date})]},_))]}),w==="Edit"&&a.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[a.jsxs("label",{className:"block mb-3 break-words",children:[a.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),a.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:h.name})]}),a.jsxs("label",{className:"block mb-3 break-words",children:[a.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),a.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:h.description})]}),a.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),a.jsx("div",{className:"w-full lg:w-auto",children:a.jsx(jj,{selectedDeal:h,onStatusUpdate:l,onClose:n})})]})]})]})})}const Ng=10,vA=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],wA={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:""},ci=e=>{if(!e)return"Draft";const t=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[t]||"Draft"},NA=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",jFe=e=>{switch(ci(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},CFe=e=>{switch(ci(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},pb=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",jg=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",SFe=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const t=new Date(e);if(isNaN(t.getTime()))return"";const n=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0");return`${n}-${r}-${s}`}catch{return""}},jA=(e,t)=>{if(!e||t==null||t==="")return"";const n=Number(t);if(Number.isNaN(n))return"";const r=new Date(e);return isNaN(r.getTime())?"":(r.setDate(r.getDate()+n),r.toISOString().slice(0,10))},UF=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},FF=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},iw=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},_Fe=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const r of e){const s=localStorage.getItem(r);if(s)try{const i=JSON.parse(s),o=iw(i);if(o)return o}catch{}}const t=localStorage.getItem("user_id"),n=iw(t);return n||null},AFe=e=>{if(!e)return"";const n=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(r=>r!=null&&String(r).trim()!=="");return n?String(n):""},EFe=e=>{if(!e)return"";const n=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(r=>r!=null&&String(r).trim()!=="");return n?String(n):""};function TFe(){const e=rt();g.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[t,n]=g.useState([]),[r,s]=g.useState(!1),[i,o]=g.useState([]),[l,c]=g.useState([]),[d,m]=g.useState([]),[h,p]=g.useState([]),[b,v]=g.useState(null),[x,w]=g.useState(null),[j,C]=g.useState(!1),[S,_]=g.useState(!1),[E,A]=g.useState(!1),[T,R]=g.useState(null),[U,W]=g.useState(!1),[I,M]=g.useState(null),[H,q]=g.useState(wA),[ae,K]=g.useState(""),[B,X]=g.useState("Filter by Status"),[le,ue]=g.useState(null),[J,ne]=g.useState(1),[pe,we]=g.useState("Overview"),[ye,Te]=g.useState("Draft");g.useEffect(()=>{let P=!0;return(async()=>{const G=_Fe();if(G&&P){v(G);return}try{const te=await oe.get("/auth/me"),ve=iw(te?.data);if(ve&&P){v(ve);return}}catch{}try{const te=await oe.get("/users/me"),ve=iw(te?.data);if(ve&&P){v(ve);return}}catch{}P&&v(null)})(),()=>{P=!1}},[]);const Ae=g.useCallback(P=>P&&l.find(G=>String(G.id)===String(P))?.name||"",[l]),Pe=g.useCallback(P=>{if(!P)return"";const he=d.find(G=>String(G.id)===String(P));return he?`${he.first_name} ${he.last_name}`.trim():""},[d]),$=g.useCallback(P=>{if(!P)return"--";const he=i.find(G=>String(G.id)===String(P));return he?.deal_name||he?.name||`Deal #${UF(P)}`},[i]),Ne=g.useCallback(P=>{const he=i.find(ve=>String(ve.id)===String(P)),G=AFe(he);let te=EFe(he);if(!te&&G){const ve=d.filter(je=>String(je.account_id||"")===String(G));if(ve.length>0){const je=[...ve].sort((Ie,tt)=>{const vt=`${Ie.first_name||""} ${Ie.last_name||""}`.trim().toLowerCase(),tn=`${tt.first_name||""} ${tt.last_name||""}`.trim().toLowerCase();return vt.localeCompare(tn)});te=String(je[0].id)}}if(G&&te){const ve=d.find(je=>String(je.id)===String(te));ve?.account_id&&String(ve.account_id)!==String(G)&&(te="")}return{accountId:G||"",contactId:te||""}},[i,d]),fe=g.useCallback(P=>{if(!P)return"--";if(P.deal?.deal_name)return P.deal.deal_name;if(P.deal?.name)return P.deal.name;const he=P.deal_id||P.deal?.id;return he?$(he):"--"},[$]),O=g.useCallback(P=>{if(!P)return"--";if(P.account?.name)return P.account.name;let he=P.account_id||P.account?.id;if(!he){const G=P.deal_id||P.deal?.id;G&&(he=Ne(G).accountId)}return he?Ae(he)||`Account #${he}`:"--"},[Ne,Ae]),ce=g.useCallback(P=>{if(!P)return"--";if(P.contact?.first_name||P.contact?.last_name)return`${P.contact?.first_name||""} ${P.contact?.last_name||""}`.trim()||"--";let he=P.contact_id||P.contact?.id;if(!he){const te=P.deal_id||P.deal?.id;te&&(he=Ne(te).contactId)}return(he?Pe(he):"")||(he?`Contact #${he}`:"--")},[Ne,Pe]),de=g.useCallback(async(P=null)=>{s(!0);try{const he=await oe.get("/quotes/admin/fetch-all"),te=[...Array.isArray(he.data)?he.data:[]].sort((ve,je)=>{const Ie=ve?.created_at||ve?.updated_at||0,tt=je?.created_at||je?.updated_at||0;return new Date(tt)-new Date(Ie)});if(n(te),P){const ve=te.find(je=>je.id===P);w(ve||null)}}catch(he){console.error(he),n([]),he.response?.status===403?Q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):Q.error("Failed to fetch quotes. Please try again later.")}finally{s(!1)}},[]),Ce=g.useCallback(async()=>{try{const P=await oe.get("/deals/admin/fetch-all");o(Array.isArray(P.data)?P.data:[])}catch(P){console.error(P),P.response?.status===403&&Q.warn("Unable to load deals (permission denied).")}},[]),Ee=g.useCallback(async()=>{try{const P=await oe.get("/accounts/admin/fetch-all");c(Array.isArray(P.data)?P.data:[])}catch(P){console.error(P),P.response?.status===403&&Q.warn("Unable to load accounts (permission denied).")}},[]),Ge=g.useCallback(async()=>{try{const P=await oe.get("/contacts/admin/fetch-all");m(Array.isArray(P.data)?P.data:[])}catch(P){console.error(P),P.response?.status===403&&Q.warn("Unable to load contacts (permission denied).")}},[]),Je=g.useCallback(async()=>{try{const P=await oe.get("/users/all");p(Array.isArray(P.data)?P.data:[])}catch(P){console.error(P),P.response?.status===403&&Q.warn("Unable to load users (permission denied).")}},[]);g.useEffect(()=>{de(),Ce(),Ee(),Ge(),Je()},[de,Ce,Ee,Ge,Je]);const We=g.useMemo(()=>{const P=ae.trim().toLowerCase(),he=B.trim();return t.filter(G=>{const te=fe(G),ve=O(G),je=ce(G),Ie=jA(G.presented_date,G.validity_days),tt=[G.quote_id,te,ve,je,G.total_amount?.toString(),G.validity_days?.toString(),G.presented_date?jg(G.presented_date):"",Ie?jg(Ie):"",G.assigned_user?.first_name,G.assigned_user?.last_name,G.creator?.first_name,G.creator?.last_name,G.status,G.notes,pb(G.created_at),pb(G.updated_at)],vt=P===""||tt.some(un=>un==null?!1:un.toString().toLowerCase().includes(P)),tn=he==="Filter by Status"||ci(G.status)===he;return vt&&tn})},[t,ae,B,fe,O,ce]),Ke=Math.max(1,Math.ceil(We.length/Ng)||1);g.useEffect(()=>ne(1),[ae,B]),g.useEffect(()=>{ne(P=>{const he=Math.max(1,Math.ceil(We.length/Ng)||1);return P>he?he:P})},[We.length]);const He=g.useMemo(()=>{const P=(J-1)*Ng;return We.slice(P,P+Ng)},[We,J]),Se=()=>ne(P=>Math.max(P-1,1)),Ve=()=>ne(P=>Math.min(P+1,Ke)),k=P=>{w(P),we("Overview"),Te(ci(P?.status)||"Draft")},Z=()=>{w(null),we("Overview")},re=P=>{P.target.id==="quoteModalBackdrop"&&!U&&Z()},be=g.useCallback(()=>{C(!1),_(!1),M(null),q(wA),A(!1)},[]),z=P=>{P.target.id==="modalBackdrop"&&!E&&!U&&be()},ee=P=>{const{name:he,value:G}=P.target;if(he==="deal_id"){const{accountId:te,contactId:ve}=Ne(G);q(je=>({...je,deal_id:G,account_id:te,contact_id:ve}));return}q(te=>({...te,[he]:G}))},ie=()=>{q(wA),_(!1),M(null),C(!0)},V=P=>{if(!P)return;w(null);const he=P.deal?.id?String(P.deal.id):P.deal_id?String(P.deal_id):"",G=he?Ne(he):{accountId:"",contactId:""},te=P.account?.id?String(P.account.id):P.account_id?String(P.account_id):G.accountId,ve=P.contact?.id?String(P.contact.id):P.contact_id?String(P.contact_id):G.contactId,je=P.assigned_user?.id?String(P.assigned_user.id):P.assigned_to?String(P.assigned_to):"";q({deal_id:he,account_id:te||"",contact_id:ve||"",total_amount:P.total_amount?.toString()||"",presented_date:SFe(P.presented_date),validity_days:P.validity_days!==null&&P.validity_days!==void 0?String(P.validity_days):"",status:ci(P.status)||"Draft",assigned_to:je,notes:P.notes||""}),_(!0),M(P.id),C(!0)},F=P=>{if(!P)return;const he=P.quote_id||"this quote";R({title:"Delete Quote",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:he}),"? This action cannot be undone."]}),confirmLabel:"Delete Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:P.id,name:he}})},se=P=>{if(P.preventDefault(),!b){Q.error("Unable to determine current user. Please log in again.");return}if(!H.deal_id){Q.error("Deal is required.");return}if(!H.total_amount||Number(H.total_amount)<=0){Q.error("Total amount must be greater than 0.");return}if(H.validity_days!==""&&Number(H.validity_days)<0){Q.error("Validity days must be 0 or higher.");return}const he=Ne(H.deal_id),G={deal_id:Number(H.deal_id),account_id:he.accountId?Number(he.accountId):null,contact_id:he.contactId?Number(he.contactId):null,total_amount:Number(H.total_amount),presented_date:H.presented_date||null,validity_days:H.validity_days===""?null:Number(H.validity_days),status:H.status||"Draft",assigned_to:H.assigned_to?Number(H.assigned_to):null,notes:H.notes?.trim()||null},te=S&&I?"update":"create",ve=$(H.deal_id),je=te==="create"?{...G,created_by_id:Number(b)}:G;R({title:te==="create"?"Confirm New Quote":"Confirm Update",message:te==="create"?a.jsxs("span",{children:["Are you sure you want to create a quote for"," ",a.jsx("span",{className:"font-semibold",children:ve}),"?"]}):a.jsxs("span",{children:["Save changes to"," ",a.jsx("span",{className:"font-semibold",children:ve}),"?"]}),confirmLabel:te==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:te,payload:je,targetId:I||null,name:ve}})},xe=async()=>{if(!T?.action){R(null);return}const{action:P}=T,{type:he,payload:G,targetId:te,name:ve}=P;W(!0);try{if(he==="create")A(!0),await oe.post("/quotes/admin",G),Q.success("Quote created successfully."),be(),await de();else if(he==="update"){if(!te)throw new Error("Missing quote identifier for update.");A(!0),await oe.put(`/quotes/admin/${te}`,G),Q.success("Quote updated successfully."),be(),await de(),x?.id===te&&w(null)}else if(he==="delete"){if(!te)throw new Error("Missing quote identifier for deletion.");const je=x?.id;ue(te),await oe.delete(`/quotes/admin/${te}`),Q.success(`Quote "${ve}" deleted successfully.`),await de(je&&je!==te?je:null),je===te&&w(null)}}catch(je){console.error(je);const Ie=he==="create"?"Failed to create quote. Please review the details and try again.":he==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";Q.error(Ie),(he==="create"||he==="update")&&A(!1),he==="delete"&&ue(null)}finally{(he==="create"||he==="update")&&A(!1),he==="delete"&&ue(null),W(!1),R(null)}},ge=()=>{U||R(null)},Me=g.useCallback((P,he)=>{const G=P?.deal_id??P?.deal?.id??"",te=G?Number(G):null,ve=te?Ne(String(te)):{accountId:"",contactId:""},je=P?.account_id??P?.account?.id??ve.accountId??null,Ie=P?.contact_id??P?.contact?.id??ve.contactId??null,tt=P?.total_amount??0,vt=P?.assigned_to??P?.assigned_user?.id??null;return{deal_id:te,account_id:je!=null&&String(je).trim()!==""?Number(je):null,contact_id:Ie!=null&&String(Ie).trim()!==""?Number(Ie):null,total_amount:Number(tt),presented_date:P?.presented_date||null,validity_days:P?.validity_days===""||P?.validity_days===void 0||P?.validity_days===null?null:Number(P.validity_days),status:he,assigned_to:vt!=null&&String(vt).trim()!==""?Number(vt):null,notes:P?.notes?.trim()||null}},[Ne]),De=g.useCallback(async()=>{if(!x?.id)return;const P=ci(ye),he=[P,P.toLowerCase()],G=async te=>oe.patch(`/quotes/admin/${x.id}/status`,{status:te},{headers:{"Content-Type":"application/json"}});try{let te=!1;for(const ve of he)try{await G(ve),te=!0;break}catch(je){if(je?.response?.status===422)continue;throw je}if(!te){const ve=Me(x,P);if(!ve.deal_id){Q.error("Cannot update status: missing deal_id on selected quote.");return}if(!ve.total_amount||ve.total_amount<=0){Q.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await oe.put(`/quotes/admin/${x.id}`,ve)}Q.success(`Quote status updated to ${P}`),w(null),we("Overview"),await de()}catch(te){console.error(te);const ve=te?.response?.data?.message||(te?.response?.data?.errors?Object.values(te.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";Q.error(ve)}},[x,ye,de,Me]),et=[{label:"Filter by Status",value:"Filter by Status"},...vA.map(P=>({label:P.label,value:P.value}))],gt=T?.action?.type==="delete"?T.action.targetId:null,Nt=x&&(le===x.id||gt===x.id),Pt=x&&le===x.id,dn=x?a.jsx("div",{id:"quoteModalBackdrop",onClick:re,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:P=>P.stopPropagation(),children:[a.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:a.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),a.jsx("button",{onClick:Z,className:"text-gray-500 hover:text-white transition cursor-pointer",children:a.jsx(wn,{size:25})})]})}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:fe(x)}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${CFe(x.status)}`,children:NA(x.status)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>V(x),disabled:U||T?.action?.type==="update"&&T.action.targetId===x.id,children:[a.jsx(Rn,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>F(x),disabled:!!Nt,children:Pt?"Deleting...":a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"mr-2"}),"Delete"]})})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-1 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(P=>a.jsx("button",{onClick:()=>we(P),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${pe===P?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:P},P))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[pe==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Quote ID:"}),a.jsx("p",{children:FF(x.quote_id)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Deal:"}),a.jsx("p",{children:fe(x)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Account:"}),a.jsx("p",{children:O(x)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Contact:"}),a.jsx("p",{children:ce(x)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Total Amount:"}),a.jsx("p",{children:x.total_amount?`${Number(x.total_amount).toLocaleString()}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Presented Date:"}),a.jsx("p",{children:jg(x.presented_date)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Validity Days:"}),a.jsx("p",{children:x.validity_days!==null&&x.validity_days!==void 0?x.validity_days:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),a.jsx("p",{children:jg(jA(x.presented_date,x.validity_days))||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Status:"}),a.jsx("p",{children:NA(x.status)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:x.assigned_user?`${x.assigned_user.first_name} ${x.assigned_user.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:x.creator?`${x.creator.first_name} ${x.creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:pb(x.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:pb(x.updated_at)||"N/A"})]})]})}),pe==="Notes"&&a.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),a.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:x.notes||"No notes available."})]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/group-manager/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(pt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/group-manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Quotes"}}}),children:[a.jsx(ft,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/group-manager/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(kn,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:ye||ci(x.status)||"Draft",onChange:P=>Te(P.target.value),children:vA.map(P=>a.jsx("option",{value:P.value,children:P.label},P.value))}),a.jsx("button",{onClick:De,disabled:ci(ye)===ci(x.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${ci(ye)===ci(x.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,jn=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&a.jsx(yt,{message:"Loading quotes..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(Br,{className:"mr-2 text-blue-600"})," Quotes"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:ie,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(Rt,{className:"mr-2"})," Add Quote"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search quotes",value:ae,onChange:P=>K(P.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:B,onChange:P=>X(P.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:et.map(P=>a.jsx("option",{value:P.value,children:P.label},P.value))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),a.jsx("th",{className:"py-3 px-4",children:"Deal"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Expiry Date"})]})}),a.jsx("tbody",{children:r?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"Loading quotes..."})}):We.length>0?He.map(P=>{const he=jA(P.presented_date,P.validity_days);return a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>k(P),children:[a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:FF(P.quote_id)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"break-words",children:fe(P)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-sm text-gray-700 break-words",children:O(P)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"break-words",children:ce(P)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-gray-700",children:P.total_amount?`${Number(P.total_amount).toLocaleString()}`:"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${jFe(P.status)}`,children:NA(P.status)})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{children:P.assigned_user?`${P.assigned_user.first_name} ${P.assigned_user.last_name}`:"Unassigned"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-gray-500 text-xs",children:jg(he)||"--"})})]},P.id)}):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No quotes found."})})})]})}),a.jsx(Et,{className:"mt-4",totalItems:We.length,pageSize:Ng,currentPage:J,onPrev:Se,onNext:Ve,label:"quotes"})]}),oa=j?a.jsx("div",{id:"modalBackdrop",onClick:z,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:P=>P.stopPropagation(),children:[a.jsx("button",{onClick:be,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:E||U,children:a.jsx(St,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:S?"Edit Quote":"Add New Quote"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:se,children:[a.jsx(HF,{label:"Deal",name:"deal_id",value:H.deal_id,onChange:P=>{const{accountId:he,contactId:G}=Ne(P);q(te=>({...te,deal_id:P,account_id:he,contact_id:G}))},items:Array.isArray(i)?i:[],getLabel:P=>`${UF(P?.deal_id??"")} ${P?.name??""}`.trim(),placeholder:"Search deal...",disabled:E||i.length===0,className:"md:col-span-2"}),a.jsx(BF,{label:"Account",value:Ae(H.account_id)||(H.account_id?`Account #${H.account_id}`:""),disabled:!0}),a.jsx(BF,{label:"Contact",value:Pe(H.contact_id)||(H.contact_id?`Contact #${H.contact_id}`:""),disabled:!0}),a.jsx(CA,{label:"Total Amount",name:"total_amount",type:"number",value:H.total_amount,onChange:ee,placeholder:"0.00",required:!0,disabled:E}),a.jsx(CA,{label:"Presented Date",name:"presented_date",type:"date",value:H.presented_date,onChange:ee,disabled:E}),a.jsx(CA,{label:"Validity Days",name:"validity_days",type:"number",value:H.validity_days,onChange:ee,placeholder:"30",disabled:E}),a.jsx(HF,{label:"Assigned To",value:H.assigned_to||"",onChange:P=>q(he=>({...he,assigned_to:P})),items:Array.isArray(h)?h:[],getLabel:P=>{const he=`${P?.first_name??""} ${P?.last_name??""}`.trim();return he?P?.role?`${he} (${P.role})`:he:P?.email||""},placeholder:"Search assignee...",disabled:E}),a.jsx(kFe,{label:"Status",name:"status",value:H.status,onChange:ee,options:vA,required:!0,disabled:E,className:"md:col-span-2"}),a.jsx(PFe,{label:"Notes",name:"notes",value:H.notes,onChange:ee,placeholder:"Additional details...",rows:3,disabled:E,className:"md:col-span-2"}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:be,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:E||U,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:E||U,children:E?"Saving...":S?"Update Quote":"Save Quote"})]})]})]})}):null,Jn=T?a.jsx(DFe,{open:!0,title:T.title,message:T.message,confirmLabel:T.confirmLabel,cancelLabel:T.cancelLabel,variant:T.variant,onConfirm:xe,onCancel:ge,loading:U}):null;return a.jsxs(a.Fragment,{children:[x?dn:jn,oa,Jn]})}function CA({label:e,name:t,value:n,onChange:r,placeholder:s,type:i="text",required:o=!1,disabled:l=!1,className:c=""}){return a.jsxs("div",{className:c,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("input",{type:i,name:t,value:n??"",onChange:r,placeholder:s,required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]})}function BF({label:e,value:t,className:n="",disabled:r=!0}){return a.jsxs("div",{className:n,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("input",{type:"text",value:t??"",disabled:r,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function HF({label:e,items:t=[],value:n="",onChange:r,getLabel:s,placeholder:i="Search...",disabled:o=!1,className:l=""}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx(LFe,{items:t,value:n??"",onChange:r,getLabel:s,placeholder:i,disabled:o})]})}function LFe({items:e=[],value:t="",onChange:n,getLabel:r,placeholder:s="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=g.useState(!1),[d,m]=g.useState(""),h=g.useRef(null),p=e.find(x=>String(x.id)===String(t)),b=p?r(p):"",v=g.useMemo(()=>{const x=d.trim().toLowerCase();return(x?e.filter(j=>(r(j)||"").toLowerCase().includes(x)):e).slice(0,o)},[e,d,r,o]);return g.useEffect(()=>{const x=w=>{h.current&&!h.current.contains(w.target)&&c(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]),g.useEffect(()=>{l||m("")},[l]),a.jsxs("div",{ref:h,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:l?d:b,placeholder:s,onFocus:()=>!i&&c(!0),onChange:x=>{m(x.target.value),l||c(!0)},className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:v.length>0?v.map(x=>{const w=String(x.id),j=r(x),C=String(t)===w;return a.jsx("button",{type:"button",onClick:()=>{n(w),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${C?"bg-blue-50":""}`,children:j||"--"},w)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function kFe({label:e,name:t,value:n,onChange:r,options:s,required:i=!1,disabled:o=!1,className:l=""}){const c=n!=null?String(n):"",m=s.some(h=>String(h.value)===c)?c:"";return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:m,onChange:r,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:s.map(h=>a.jsx("option",{value:String(h.value??""),children:h.label},h.value??h.label))})]})}function PFe({label:e,name:t,value:n,onChange:r,placeholder:s,rows:i=3,disabled:o=!1,className:l=""}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:r,placeholder:s,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function DFe({open:e,title:t,message:n,confirmLabel:r,cancelLabel:s="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:s}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":r})]})]})})}function OFe(){const{userRole:e}=er();return a.jsx(dj,{currentUserRole:e,currentUserId:null})}const GF=["To Do","In Progress","Review","Completed"],Cg=10,MFe=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const n=t.getTimezoneOffset();return new Date(t.getTime()-n*60*1e3).toISOString().slice(0,16)},VF=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},IFe=e=>{const t=e.subject?.trim()??"",n=e.description?.trim()??"",r=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),e.status&&String(e.status).toUpperCase();let s=null,i=null,o=null,l=null;e.relatedType1==="Lead"&&e.relatedTo1?s=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?o=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2&&(l=Number(e.relatedTo2)));const c=e.assignedTo?Number(e.assignedTo):null,d=o||l||i||s,m=o?"Contact":l?"Deal":i?"Account":s?"Lead":null;return{title:t,description:n,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:c,notes:r,is_personal:!1,lead_id:s,account_id:i,contact_id:o,deal_id:l,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:d,related_type:m}},$Fe=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",n=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",r=e.due_date||e.dueDate||null,s=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",o=()=>e.lead?.id||e.lead_id,l=()=>e.account?.id||e.account_id,c=()=>e.contact?.id||e.contact_id,d=()=>e.deal?.id||e.deal_id,m=()=>e.task_assign_to?.id||e.assigned_to,h=()=>e.lead?.title||e.lead_id,p=()=>e.account?.name||e.account_id,b=()=>i||e.contact_id,v=()=>e.deal?.name||e.deal_id;let x="Lead",w="",j="",C="",S="Lead",_="",E="",A="";const T=l(),R=p(),U=o(),W=h();if(T){x="Account",S="Account",_=R,w=String(T);const I=c(),M=d(),H=b(),q=v();I?(j="Contact",E="Contact",A=H,C=String(I)):M&&(E="Deal",j="Deal",A=q,C=String(M))}else U?(S="Lead",_=W,x="Lead",w=String(U)):e.related_type==="Account"&&(x="Account",w=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:e.status||"Not started",dueDate:r,dateAssigned:s,assignedToId:m()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:n,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:S,relatedTo1Text:_,relatedType2Text:E,relatedTo2Text:A,subject:e.title,relatedType1:x,relatedTo1:w,relatedType2:j,relatedTo2:C}};function RFe(){g.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=Ut(),[n,r]=g.useState("board"),[s,i]=g.useState(!1),[o,l]=g.useState(null),[c,d]=g.useState(!1),[m,h]=g.useState([]),[p,b]=g.useState(!0),[v,x]=g.useState(""),[w,j]=g.useState("Filter by Status"),[C,S]=g.useState("Filter by Priority"),[_,E]=g.useState([]),[A,T]=g.useState(1),[R,U]=g.useState(null),[W,I]=g.useState(!1),M=rt(),H=Xt(),[q,ae]=g.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""});g.useEffect(()=>{const O=H.state?.openTaskModal,ce=H.state?.initialTaskData;O&&(i(!0),ce&&ae(de=>({...de,...ce})),M(H.pathname,{replace:!0,state:{}}))},[H,M]);const K=async()=>{try{const O=await oe.get("/users/all");E(Array.isArray(O.data)?O.data:[])}catch(O){console.error("Failed to fetch users:",O),Q.error("Failed to fetch users.")}},B=async()=>{try{b(!0);const O=await oe.get("/tasks/all"),de=(Array.isArray(O.data)?O.data:[]).map($Fe);de.sort((Ce,Ee)=>{const Ge=Ce.createdAt?new Date(Ce.createdAt):0;return(Ee.createdAt?new Date(Ee.createdAt):0)-Ge}),console.log("Fetched Tasks:",de),h(de),n==="list"&&T(1)}catch(O){console.error("Failed to load tasks:",O),Q.error("Failed to load tasks.")}finally{b(!1)}};g.useEffect(()=>{!t&&e&&(K(),B())},[t,e]);const X=()=>{l(null),ae({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},le=(O=null,ce=!1)=>{l(O),d(ce),O?ae({id:O.id,subject:O.title||"",description:O.description||"",priority:O.priority||"Normal",status:O.status||"Not started",dueDate:MFe(O.dueDate),assignedTo:O.assignedToId?String(O.assignedToId):"",notes:O.notes||"",relatedType1Text:O.relatedType1Text||"",relatedTo1Text:O.relatedTo1Text||"",relatedType2Text:O.relatedType2Text||"",relatedTo2Text:O.relatedTo2Text||"",relatedType1:O.relatedType1||"",relatedTo1:O.relatedTo1||"",relatedType2:O.relatedType2||"",relatedTo2:O.relatedTo2||""}):X(),i(!0)},ue=()=>{i(!1),l(null),d(!1),X()},J=async O=>{const ce=IFe(O);try{o&&!c?(await oe.put(`/tasks/${o.id}`,ce),Q.success("Task updated successfully.")):(await oe.post("/tasks/create",ce),Q.success("Task created successfully.")),i(!1),await B()}catch(de){console.error("Failed to save task:",de);const Ce=de.response?.data?.detail||"Failed to save task.";Q.error(Ce)}},ne=O=>{O&&U({title:"Delete Task",message:a.jsxs(a.Fragment,{children:["Are you sure you want to delete ",a.jsx("span",{className:"font-semibold",children:O.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:O.id}})},pe=async()=>{if(!R?.action){U(null);return}const{action:O}=R;I(!0);try{O.type==="delete"&&(await oe.delete(`/tasks/${O.targetId}`),Q.success("Task deleted successfully."),await B())}catch(ce){console.error("Task action failed:",ce),Q.error("Failed to delete task.")}finally{I(!1),U(null)}},we=()=>{W||U(null)},ye=g.useMemo(()=>{const O=v.trim().toLowerCase();return[...m].sort((de,Ce)=>{const Ee=de.createdAt?new Date(de.createdAt):0;return(Ce.createdAt?new Date(Ce.createdAt):0)-Ee}).filter(de=>{const Ce=O===""||de.title?.toLowerCase().includes(O)||de.description?.toLowerCase().includes(O)||de.assignedToName?.toLowerCase().includes(O)||de.createdBy?.toLowerCase().includes(O),Ee=w==="Filter by Status"||de.status===w,Ge=C==="Filter by Priority"||de.priority===C;return Ce&&Ee&&Ge})},[m,v,w,C]);g.useEffect(()=>{T(1)},[v,w,C,n]),g.useEffect(()=>{if(n==="list"){const O=ye.length===0?1:Math.ceil(ye.length/Cg);A>O&&T(O)}},[ye.length,A,n]);const Te=g.useMemo(()=>{if(n==="board")return ye;const O=(A-1)*Cg;return ye.slice(O,O+Cg)},[ye,A,n]),Ae=g.useMemo(()=>{const O=new Date;return[{title:"To Do",value:m.filter(ce=>ce.status==="Not started").length,icon:Za,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:m.filter(ce=>ce.status==="In progress").length,icon:Bs,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:m.filter(ce=>ce.status==="Completed").length,icon:Fn,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:m.filter(ce=>ce.dueDate&&new Date(ce.dueDate)<O&&ce.status!=="Completed").length,icon:Vp,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:m.filter(ce=>ce.priority==="High").length,icon:ml,color:"text-orange-600",bgColor:"bg-orange-100"}]},[m]),Pe=O=>O.dueDate&&new Date(O.dueDate)<new Date&&O.status!=="Completed",$=O=>{switch(O.status){case"To Do":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In Progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Review":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},Ne=O=>{switch(O){case"To Do":return"bg-blue-100 text-blue-700";case"In Progress":return"bg-purple-100 text-purple-700";case"Review":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},fe=O=>{switch(O){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&a.jsx(yt,{message:"Loading tasks..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(Bs,{className:"text-blue-600"})," Tasks Board"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{type:"button",onClick:()=>le(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[a.jsx(Rt,{})," Create Task"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ae.map(O=>a.jsx(zFe,{...O},O.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search tasks",value:v,onChange:O=>x(O.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[a.jsxs("select",{value:w,onChange:O=>j(O.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"Filter by Status"}),GF.map(O=>a.jsx("option",{children:O},O))]}),a.jsxs("select",{value:C,onChange:O=>S(O.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"Filter by Priority"}),a.jsx("option",{children:"High"}),a.jsx("option",{children:"Normal"}),a.jsx("option",{children:"Low"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("button",{type:"button",onClick:()=>r("board"),className:`px-4 py-2 rounded-full text-sm ${n==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),a.jsx("button",{type:"button",onClick:()=>r("list"),className:`px-4 py-2 rounded-full text-sm ${n==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&ye.length===0&&a.jsx("p",{className:"text-center text-gray-500 mt-10 p-4 bg-white shadow rounded-lg",children:"No tasks found matching current filters."}),!p&&!t&&ye.length>0&&n==="board"&&a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:GF.map(O=>{const ce=Te.filter(de=>de.status===O);return a.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),a.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:O}),a.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:ce.length})]}),a.jsx("div",{className:`space-y-3 ${ce.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:ce.length>0?ce.map(de=>a.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${$(de)}`,onClick:()=>le(de,!0),children:[a.jsxs("div",{className:"text-left flex-1",children:[a.jsx("p",{className:"font-medium text-gray-800 text-sm",children:de.title}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",de.priority]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",de.assignedToName]}),a.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",a.jsx("span",{className:Pe(de)?"text-red-600":"text-gray-600",children:de.dateAssigned?VF(de.dateAssigned):""})]})]}),a.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[a.jsx("button",{type:"button",onClick:Ce=>{Ce.stopPropagation(),le(de)},className:"text-blue-500 hover:text-blue-700",children:a.jsx(pn,{})}),a.jsx("button",{type:"button",onClick:Ce=>{Ce.stopPropagation(),ne(de)},className:"text-red-500 hover:text-red-700",children:a.jsx(jt,{})})]})]},de.id)):a.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No tasks"})})]},O)})}),!p&&!t&&ye.length>0&&n==="list"&&a.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Actions"})]})}),a.jsx("tbody",{children:Te.map(O=>a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",onClick:()=>{console.log("Opening task in view mode:",O),le(O,!0)},children:[a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",children:O.title}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Ne(O.status||"To Do")}`,children:O.status||"To Do"})}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${fe(O.priority||"Low")}`,children:O.priority||"Low"})}),a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:O.assignedToName||"Unassigned"}),a.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${Pe(O)?"text-red-600 font-medium":""}`,children:O.dateAssigned?VF(O.dateAssigned):""}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-3",onClick:ce=>ce.stopPropagation(),children:[a.jsxs("button",{type:"button",onClick:()=>le(O),className:"text-blue-500 hover:text-blue-700 flex items-center gap-1",children:[a.jsx(pn,{})," Edit"]}),a.jsxs("button",{type:"button",onClick:()=>ne(O),className:"text-red-500 hover:text-red-700 flex items-center gap-1",children:[a.jsx(jt,{})," Delete"]})]})})]},O.id))})]})})}),!p&&!t&&n==="list"&&a.jsx(Et,{className:"mt-6",totalItems:ye.length,pageSize:Cg,currentPage:ye.length===0?0:A,onPrev:()=>T(O=>Math.max(O-1,1)),onNext:()=>T(O=>Math.min(O+1,Math.max(1,Math.ceil(ye.length/Cg)||1))),label:"tasks"}),a.jsx(Wx,{isOpen:s,onClose:ue,onSave:J,onEdit:()=>d(!1),setFormData:ae,formData:q,isEditing:!c&&!!o,viewMode:c,users:_,currentUser:e,onDelete:ne}),R&&a.jsx(UFe,{open:!0,title:R.title,message:R.message,confirmLabel:R.confirmLabel,cancelLabel:R.cancelLabel,variant:R.variant,onConfirm:pe,onCancel:we,loading:W})]})}function zFe({icon:e,title:t,value:n,color:r,bgColor:s,onClick:i}){return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${s} ${r} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function UFe({open:e,title:t,message:n,confirmLabel:r,cancelLabel:s,variant:i,loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:s}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":r})]})]})})}const uX=e=>e?e.toUpperCase():"",xb=e=>{const t=uX(e);return t==="PLANNED"||t==="IN PROGRESS"?"PLANNED":t==="HELD"||t==="DONE"?"HELD":t==="NOT_HELD"||t==="NOT HELD"?"NOT_HELD":"PLANNED"},FFe=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},BFe=e=>{const t=uX(e);switch(t==="PLANNED"?"PENDING":t==="HELD"?"COMPLETED":t==="NOT_HELD"?"CANCELLED":t){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},SA=10,_A={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},HFe=()=>{const e=rt(),t=Xt(),[n]=gr(),r=n.get("id"),s=t.pathname==="/admin/meetings/info";g.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[i,o]=g.useState([]),[l,c]=g.useState(!1),[d,m]=g.useState([]),[h,p]=g.useState(""),[b,v]=g.useState("Filter by Status"),[x,w]=g.useState(!1),[j,C]=g.useState(null),[S,_]=g.useState(1),[E,A]=g.useState(_A),[T,R]=g.useState(!1),[U,W]=g.useState(null),[I,M]=g.useState(!1),[H,q]=g.useState(null),[ae,K]=g.useState(!1);g.useEffect(()=>{const $=t.state?.openMeetingModal,Ne=t.state?.initialMeetingData?.relatedTo||n.get("id");($||Ne)&&(w(!0),t.state?.initialMeetingData&&A(fe=>({...fe,...t.state.initialMeetingData})),e(t.pathname,{replace:!0,state:{}}))},[t,n,e]);const B=async()=>{if(r&&s){const $=sessionStorage.getItem("meetingDetailData");if($)try{const Ne=JSON.parse($);if(Ne.id===parseInt(r)){C(Ne),sessionStorage.removeItem("meetingDetailData");return}}catch(Ne){console.error(Ne)}}c(!0);try{const $=await oe.get("/meetings/admin/fetch-all"),fe=[...Array.isArray($.data)?$.data:[]].sort((O,ce)=>{const de=O?.createdAt?new Date(O.createdAt).getTime():0;return(ce?.createdAt?new Date(ce.createdAt).getTime():0)-de});if(o(fe),r&&!j){const O=fe.find(ce=>ce.id===parseInt(r));O&&C(O)}console.log($.data)}catch{Q.error("Failed to load meetings.")}finally{c(!1)}},X=async()=>{try{const $=await oe.get("/users/all");m(Array.isArray($.data)?$.data:[])}catch($){console.error($)}};g.useEffect(()=>{B(),X()},[]);const le=$=>p($.target.value),ue=g.useMemo(()=>{const $=h.trim().toLowerCase(),Ne=b.trim().toUpperCase();return i.filter(fe=>{const O=[fe?.activity,fe?.description,fe?.relatedTo,fe?.assignedTo],ce=$===""||O.some(Ce=>Ce&&Ce.toString().toLowerCase().includes($)),de=Ne==="FILTER BY STATUS"||xb(fe.status||"PENDING")===Ne;return ce&&de})},[i,h,b]),J=g.useMemo(()=>{const $=(S-1)*SA;return ue.slice($,$+SA)},[ue,S]),ne=()=>{w(!1),A(_A),R(!1),W(null),M(!1)},pe=()=>{A(_A),R(!1),W(null),w(!0)},we=$=>{let Ne="";if($.meet_assign_to?.id)Ne=String($.meet_assign_to.id);else if($.assignedTo){const We=d.find(Ke=>`${Ke.first_name} ${Ke.last_name}`===$.assignedTo);Ne=We?String(We.id):""}const fe=We=>{if(!We)return"";try{const Ke=new Date(We),He=Ke.getTimezoneOffset()*6e4;return new Date(Ke.getTime()-He).toISOString().slice(0,16)}catch{return""}};let O="Lead",ce="",de="Contact",Ce="";if($.lead)O="Lead",ce=String($.lead.id);else if($.account)O="Account",ce=String($.account.id),$.contact?(de="Contact",Ce=String($.contact.id)):$.deal&&(de="Deal",Ce=String($.deal.id));else if($.relatedType||$.related_type){const We=$.relatedType||$.related_type,Ke=$.related_to||$.relatedToId;We==="Lead"?(O="Lead",ce=String(Ke)):(O="Account",ce=$.account_id?String($.account_id):"")}const Ee={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},Ge=xb($.status),Je=Ee[Ge]||"Planned";A({subject:$.subject||$.activity||"",location:$.location||"",startTime:fe($.start_time||$.startTime),endTime:fe($.end_time||$.endTime),status:Je,notes:$.description||$.notes||"",assignedTo:Ne,relatedType1:O,relatedTo1:ce,relatedType2:de,relatedTo2:Ce}),R(!0),W($.id),C(null),w(!0)},ye=$=>{if(!$.subject?.trim())return Q.error("Subject is required.");if(!$.startTime)return Q.error("Start time is required.");if($.endTime&&!(new Date($.endTime)-new Date($.startTime)>0))return Q.error("End time must be after start time.");$.relatedType1,$.relatedTo1,$.relatedType1==="Account"&&$.relatedType2&&$.relatedTo2&&($.relatedType2,$.relatedTo2);const Ne={...$,assignedTo:parseInt($.assignedTo),relatedTo1:parseInt($.relatedTo1),relatedTo2:parseInt($.relatedTo2)},fe=T&&U?"update":"create";q({title:fe==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${fe} "${Ne.subject}"?`,confirmLabel:fe==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:fe,payload:Ne,targetId:U,name:Ne.subject}})},Te=async()=>{if(!H?.action)return;const{type:$,payload:Ne,targetId:fe,name:O}=H.action;console.log(Ne),K(!0);try{$==="create"?(M(!0),await oe.post("/meetings/create",Ne),Q.success(`Meeting "${O}" created.`),ne(),await B()):$==="update"?(M(!0),await oe.put(`/meetings/${fe}`,Ne),Q.success(`Meeting "${O}" updated.`),ne(),await B()):$==="delete"&&(await oe.delete(`/meetings/${fe}`),Q.success(`Meeting "${O}" deleted.`),j?.id===fe&&C(null),await B())}catch(ce){const de=ce.response?.data?.detail||"Action failed.";Q.error(typeof de=="string"?de:JSON.stringify(de)),console.error(de)}finally{M(!1),K(!1),q(null)}},Ae=$=>{q({title:"Delete Meeting",message:`Permanently delete "${$.activity}"?`,confirmLabel:"Delete",variant:"danger",action:{type:"delete",targetId:$.id,name:$.activity}})},Pe=async($,Ne)=>{try{await oe.put(`/meetings/${$}`,{status:Ne}),Q.success("Status updated"),B(),C(null)}catch{Q.error("Failed to update status")}};return s&&r?j?a.jsx(Nc,{meeting:j,onClose:()=>{C(null),e("/admin/dashboard")},onEdit:we,onDelete:Ae,onStatusUpdate:Pe}):a.jsx(yt,{message:"Loading meeting..."}):a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[l&&a.jsx(yt,{message:"Loading meetings..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[a.jsx(ft,{className:"mr-2 text-blue-600"})," Meetings"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:pe,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[a.jsx(Rt,{className:"mr-2"})," Add Meeting"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[a.jsx(bt,{className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search meetings",value:h,onChange:le,className:"w-full outline-none"})]}),a.jsxs("select",{value:b,onChange:$=>v($.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[a.jsx("option",{children:"Filter by Status"}),a.jsx("option",{value:"PLANNED",children:"PLANNED"}),a.jsx("option",{value:"HELD",children:"HELD"}),a.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Subject"}),a.jsx("th",{className:"py-3 px-4",children:"Related To"}),a.jsx("th",{className:"py-3 px-4",children:"Start Time"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned"}),a.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),a.jsx("tbody",{children:J.length>0?J.map($=>a.jsxs("tr",{onClick:()=>C($),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[a.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:$.subject}),a.jsxs("td",{className:"py-3 px-4",children:[$.lead&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:$.lead.title}),$.account&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:$.account.name}),$.contact&&a.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[$.contact.first_name," ",$.contact.last_name]}),$.deal&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:$.deal.name})]}),a.jsx("td",{className:"py-3 px-4",children:FFe($.start_time)}),a.jsxs("td",{className:"py-3 px-4",children:[$.meet_assign_to.first_name," ",$.meet_assign_to.last_name]}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${BFe(xb($.status))}`,children:xb($.status).replace("_"," ")})})]},$.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),a.jsx(Et,{totalItems:ue.length,pageSize:SA,currentPage:S,onPrev:()=>_($=>Math.max(1,$-1)),onNext:()=>_($=>$+1),label:"meetings"}),x&&a.jsx(wj,{onClose:ne,formData:E,setFormData:A,isEditing:T,onSubmit:ye,isSubmitting:I||ae,users:d}),j&&a.jsx(Nc,{meeting:j,onClose:()=>C(null),onEdit:we,onDelete:Ae,onStatusUpdate:Pe}),H&&a.jsx(GFe,{open:!0,title:H.title,message:H.message,confirmLabel:H.confirmLabel,variant:H.variant,onConfirm:Te,onCancel:()=>q(null),loading:ae})]})};function GFe({open:e,title:t,message:n,confirmLabel:r,cancelLabel:s="Cancel",variant:i="primary",loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{onClick:c,disabled:o,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),a.jsx("button",{onClick:l,disabled:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${d}`,children:o?"...":r})]})]})})}const VFe=10,WFe=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"}],qFe=e=>e?String(e).toUpperCase():"",Rm=e=>{const t=qFe(e);return t==="PLANNED"||t==="PENDING"?"PLANNED":t==="HELD"||t==="COMPLETED"?"HELD":t==="NOT HELD"||t==="NOT_HELD"||t==="CANCELLED"?"NOT_HELD":"PLANNED"},AA=e=>{const t=Rm(e);return t==="PLANNED"?"PLANNED":t==="HELD"?"HELD":t==="NOT_HELD"?"NOT HELD":"--"},WF=e=>{switch(Rm(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},qF=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function YFe(){const[e,t]=g.useState(!1),[n,r]=g.useState(null),[s,i]=g.useState(null),[o,l]=g.useState(null),[c,d]=g.useState(null),[m,h]=g.useState([]),[p,b]=g.useState(null),[v,x]=g.useState(!1),[w,j]=g.useState(null),[C,S]=g.useState(!1),[_,E]=g.useState(!1),[A,T]=g.useState("PLANNED"),[R,U]=g.useState(!1),[W,I]=g.useState(!1),[M]=gr(),H=rt(),q=Xt(),K={subject:"",call_time:(()=>{const k=new Date,Z=k.getFullYear(),re=String(k.getMonth()+1).padStart(2,"0"),be=String(k.getDate()).padStart(2,"0");return`${Z}-${re}-${be}T08:00`})(),duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[B,X]=g.useState(K);g.useEffect(()=>{const k=q.state?.openCallModal,Z=q.state?.initialCallData?.relatedTo1||M.get("id");(k||Z)&&(t(!0),q.state?.initialCallData&&X(re=>({...re,...q.state.initialCallData})),Z&&X(re=>({...re,relatedTo1:Z})),H(q.pathname,{replace:!0,state:{}}))},[q,M,H]);const le=async()=>{try{I(!0);const k=await oe.get("/calls/admin/fetch-all"),re=[...Array.isArray(k.data)?k.data:[]].sort((be,z)=>{const ee=be?.created_at?new Date(be.created_at):0;return(z?.created_at?new Date(z.created_at):0)-ee});h(re)}catch(k){console.error("Error fetching calls:",k),Q.error("Failed to load calls")}finally{I(!1)}},ue=async()=>{try{const k=await oe.get("/users/all");b(k.data)}catch(k){console.error("Error fetching users: ",k)}};g.useEffect(()=>{ue(),le()},[]);const J=[],ne="",pe="Filter by Status",we="Filter by Users",ye=1,Te=m,Ae=m,Pe=m.length,$=m.filter(k=>Rm(k.status)==="PLANNED").length,Ne=m.filter(k=>Rm(k.status)==="HELD").length,fe=m.filter(k=>Rm(k.status)==="NOT_HELD").length,O=[{title:"Total",value:Pe,icon:fr,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:$,icon:Za,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:Ne,icon:Fn,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:fe,icon:hr,color:"text-gray-600",bgColor:"bg-gray-100"}],[ce,de]=g.useState("Overview"),Ce=k=>{const{name:Z,value:re}=k.target;X(be=>{const z={...be,[Z]:re};return Z==="relatedType1"&&(z.relatedTo1="",re==="Lead"?(z.relatedType2=null,z.relatedTo2=null,d([])):re==="Account"&&(z.relatedType2="Contact")),Z==="relatedType2"&&(z.relatedTo2=""),z})};g.useEffect(()=>{const k=async()=>{try{l([]);let Z;B.relatedType1==="Lead"?Z=await oe.get("/leads/admin/getLeads"):B.relatedType1==="Account"&&(Z=await oe.get("/accounts/admin/fetch-all"));let re=[];if(Z&&Array.isArray(Z.data)?re=Z.data:re=[],v&&B.relatedTo1)try{let be;B.relatedType1==="Lead"?be=await oe.get(`/leads/get/${B.relatedTo1}`):B.relatedType1==="Account"&&(be=await oe.get(`/accounts/get/${B.relatedTo1}`)),be&&be.data&&(re.some(ee=>String(ee.id)===String(B.relatedTo1))||(re=[be.data,...re]))}catch(be){console.error("Error fetching specific related item:",be)}l(re)}catch(Z){console.error("Error fetching data:",Z),l([])}};B.relatedType1&&k()},[B.relatedType1,v,B.relatedTo1]),g.useEffect(()=>{const k=async()=>{try{d([]);let Z;if(B.relatedType1==="Account"&&B.relatedTo1)B.relatedType2==="Contact"?Z=await oe.get(`/contacts/from-acc/${B.relatedTo1}`):B.relatedType2==="Deal"&&(Z=await oe.get(`/deals/from-acc/${B.relatedTo1}`));else{d([]);return}let re=[];if(Z&&Array.isArray(Z.data)?re=Z.data:re=[],v&&B.relatedTo2)try{let be;B.relatedType2==="Contact"?be=await oe.get(`/contacts/get/${B.relatedTo2}`):B.relatedType2==="Deal"&&(be=await oe.get(`/deals/get/${B.relatedTo2}`)),be&&be.data&&(re.some(ee=>String(ee.id)===String(B.relatedTo2))||(re=[be.data,...re]))}catch(be){console.error("Error fetching specific related item:",be)}d(re)}catch(Z){console.error("Error fetching data:",Z),d([])}};B.relatedType2&&k()},[B.relatedType2,B.relatedTo1,B.relatedType1,v,B.relatedTo2]);const Ee=k=>{if(k.preventDefault(),!B.assigned_to){Q.error("Please assign the call to a user.");return}const Z={...B,duration_minutes:B.duration_minutes?parseInt(B.duration_minutes,10):null,relatedTo1:B.relatedTo1?parseInt(B.relatedTo1,10):null,relatedTo2:B.relatedType1==="Lead"?null:B.relatedTo2?parseInt(B.relatedTo2,10):null,relatedType2:B.relatedType1==="Lead"?null:B.relatedType2,assigned_to:B.assigned_to?parseInt(B.assigned_to,10):null},re=v&&w?"update":"create",be=(B.subject||"").trim()||"Untitled Call";i({title:re==="create"?"Confirm New Call":"Confirm Update",message:re==="create"?`Create "${be}"?`:`Save changes to "${be}"?`,confirmLabel:re==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:re,payload:Z,targetId:w||null,name:be}})},Ge=k=>r(k),Je=()=>{t(!1),x(!1),j(null)},We=async()=>{if(!s?.action){i(null);return}const{action:k}=s,{type:Z,payload:re,targetId:be,name:z}=k;E(!0);try{if(Z==="create")S(!0),await oe.post("/calls/create",re),Q.success(`Call "${z}" created successfully.`),t(!1),X(K),x(!1),j(null),await le();else if(Z==="update"){if(!be)throw new Error("Missing call identifier for update.");S(!0),await oe.put(`/calls/${be}`,re),Q.success(`Call "${z}" updated successfully.`),t(!1),X(K),x(!1),j(null),await le()}else if(Z==="delete"){if(!be)throw new Error("Missing call identifier for deletion.");await oe.delete(`/calls/${be}`),Q.success(`Call "${z}" deleted successfully.`),n?.id===be&&r(null),await le()}}catch(ee){const ie=Z==="create"?"Failed to create call. Please review the details and try again.":Z==="update"?"Failed to update call. Please review the details and try again.":"Failed to delete call. Please try again.",V=ee?.response?.data?.detail||ie;Q.error(V)}finally{(Z==="create"||Z==="update")&&S(!1),E(!1),i(null)}},Ke=()=>{_||i(null)},He=async()=>{if(n?.id)try{U(!0),await oe.put(`/calls/${n.id}`,{status:A}),Q.success(`Status updated to ${AA(A)}`),h(k=>Array.isArray(k)?k.map(Z=>Z.id===n.id?{...Z,status:A}:Z):k),r(null)}catch(k){const Z=k.response?.data?.detail||"Failed to update status.";Q.error(Z)}finally{U(!1)}};g.useEffect(()=>{n&&T(Rm(n.status))},[n]);const Se=n?a.jsxs("div",{id:"callModalBackdrop",onClick:k=>k.target.id==="callModalBackdrop"&&r(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[W&&a.jsx(yt,{message:"Loading call details..."}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),a.jsx("button",{onClick:()=>r(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:a.jsx(wn,{size:25})})]}),a.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:n.subject}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${WF(n.status)}`,children:AA(n.status)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const k=ee=>{if(!ee)return"";const ie=new Date(ee),V=ie.getFullYear(),F=String(ie.getMonth()+1).padStart(2,"0"),se=String(ie.getDate()).padStart(2,"0"),xe=String(ie.getHours()).padStart(2,"0"),ge=String(ie.getMinutes()).padStart(2,"0");return`${V}-${F}-${se}T${xe}:${ge}`},Z=n.lead?"Lead":n.account?"Account":"Lead",re=n.lead?n.lead.id:n.account?n.account.id:null,be=Z==="Lead"?null:n.contact?"Contact":n.deal?"Deal":"Contact",z=Z==="Lead"?null:n.contact?n.contact.id:n.deal?n.deal.id:null;X({subject:n.subject||"",call_time:k(n.call_time),duration_minutes:n.duration_minutes?String(n.duration_minutes):"",direction:n.direction||"Outgoing",status:n.status||"Planned",notes:n.notes||"",relatedType1:Z,relatedType2:be,relatedTo1:re?String(re):"",relatedTo2:z?String(z):"",assigned_to:n.call_assign_to?.id?String(n.call_assign_to.id):""}),x(!0),j(n.id),r(null),t(!0)},children:[a.jsx(Rn,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>{const k=n.subject||"this call";i({title:"Delete Call",message:`Are you sure you want to permanently delete "${k}"? This action cannot be undone.`,confirmLabel:"Delete Call",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:n.id,name:k}})},children:[a.jsx(jt,{className:"mr-2"}),"Delete"]})]})]})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(k=>a.jsx("button",{onClick:()=>de(k),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${ce===k?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:k},k))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[ce==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsx(Oo,{label:"Call Time",value:qF(n.call_time)}),a.jsx(Oo,{label:"Duration",value:n.duration_minutes?`${n.duration_minutes} min`:null}),a.jsx(Oo,{label:"Direction",value:n.direction||"--"}),a.jsx(Oo,{label:"Assigned To",value:`${n.call_assign_to.first_name} ${n.call_assign_to.last_name}`}),n.lead&&a.jsx(Oo,{label:"Lead",value:n.lead.title}),n.account&&a.jsx(Oo,{label:"Account",value:n.account.name}),n.contact&&a.jsx(Oo,{label:"Contact",value:`${n.contact.first_name} ${n.contact.last_name}`}),n.deal&&a.jsx(Oo,{label:"Deal",value:n.deal.name}),a.jsx(Oo,{label:"Created At",value:qF(n.created_at)})]})}),ce==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Call Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:n.notes||"No notes available."})]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:A,onChange:k=>T(k.target.value),children:[a.jsx("option",{value:"PLANNED",children:"PLANNED"}),a.jsx("option",{value:"HELD",children:"HELD"}),a.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),a.jsx("button",{onClick:He,disabled:R,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:R?"Updating...":"Update"})]})]})]})]})]}):null,Ve=e?a.jsx("div",{id:"modalBackdrop",onClick:k=>k.target.id==="modalBackdrop"&&Je(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[a.jsx("button",{onClick:Je,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(St,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:v?"Edit Call":"Add New Call"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:Ee,children:[a.jsx(QFe,{label:"Subject",className:"md:col-span-2",name:"subject",value:B.subject,onChange:Ce,disabled:C,required:!0}),a.jsxs("div",{className:"w-full flex flex-col",children:[a.jsxs("select",{name:"relatedType1",onChange:Ce,value:B.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:C,children:[a.jsx("option",{value:"Lead",children:"Lead"}),a.jsx("option",{value:"Account",children:"Account"})]}),a.jsx(EA,{items:Array.isArray(o)?o:[],value:B.relatedTo1??"",placeholder:`Search ${B.relatedType1||"here"}...`,getLabel:k=>B.relatedType1==="Lead"?k.title:k.name??"",onChange:k=>X(Z=>({...Z,relatedTo1:k})),disabled:C})]}),a.jsxs("div",{className:"w-full flex flex-col",children:[a.jsxs("select",{name:"relatedType2",onChange:Ce,value:B.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:B.relatedType1==="Lead"||C,children:[a.jsx("option",{value:"Contact",children:"Contact"}),a.jsx("option",{value:"Deal",children:"Deal"})]}),a.jsx(EA,{disabled:B.relatedType1==="Lead"||C,items:Array.isArray(c)?c:[],value:B.relatedTo2??"",placeholder:B.relatedType1==="Lead"?"":Array.isArray(c)&&c.length>0?`Search ${B.relatedType2||"Contact"}...`:`No ${B.relatedType2||""} data found`,getLabel:k=>B.relatedType2==="Contact"?`${k.first_name??""} ${k.last_name??""}`.trim():k.name??"",onChange:k=>X(Z=>({...Z,relatedTo2:k}))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),a.jsx("input",{type:"datetime-local",value:B.call_time,onChange:Ce,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),a.jsxs("div",{className:"w-full",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),a.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[a.jsx("input",{type:"tel",value:B.duration_minutes,onChange:Ce,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),a.jsx("p",{children:"minutes"})]})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Assign To"}),a.jsx(EA,{items:Array.isArray(p)?p:[],value:B.assigned_to??"",placeholder:"Search an account...",getLabel:k=>`${k.first_name} ${k.last_name}`,onChange:k=>X(Z=>({...Z,assigned_to:k}))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),a.jsxs("select",{name:"direction",onChange:Ce,value:B.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[a.jsx("option",{value:"Incoming",children:"Incoming"}),a.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),a.jsxs("select",{name:"status",onChange:Ce,value:B.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[a.jsx("option",{value:"Planned",children:"Planned"}),a.jsx("option",{value:"Held",children:"Held"}),a.jsx("option",{value:"Not held",children:"Not held"})]})]}),a.jsx(XFe,{className:"col-span-2",label:"Notes",value:B.notes,onChange:Ce,name:"notes"}),a.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[a.jsx("button",{type:"button",onClick:Je,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:C,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:C?"Saving...":v?"Update Call":"Save Call"})]})]})]})}):null;return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(fr,{className:"mr-2 text-blue-600"})," Calls"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{X(K),x(!1),j(null),t(!0)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(Rt,{className:"mr-2"})," Add Call"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:O.map(k=>a.jsx(KFe,{...k},k.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[a.jsx(bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",defaultValue:ne})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[a.jsxs("select",{defaultValue:pe,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[a.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),WFe.map(k=>a.jsx("option",{value:k.value,children:k.label},k.value))]}),a.jsxs("select",{defaultValue:we,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[a.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),J.map(k=>a.jsx("option",{value:k.name,children:k.name},k.id))]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Subject"}),a.jsx("th",{className:"py-3 px-4",children:"Related To"}),a.jsx("th",{className:"py-3 px-4",children:"Call Time"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),a.jsx("tbody",{children:W?a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"py-10",children:a.jsx(yt,{message:"Loading calls..."})})}):Ae.length>0?Ae.map(k=>a.jsxs("tr",{onClick:()=>Ge(k),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[a.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:k.subject||"--"}),a.jsxs("td",{className:"py-3 px-4",children:[k.lead&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:k.lead.title}),k.account&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:k.account.name}),k.contact&&a.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[k.contact.first_name," ",k.contact.last_name]}),k.deal&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:k.deal.name})]}),a.jsx("td",{className:"py-3 px-4 text-gray-800",children:k.call_time?new Date(k.call_time).toLocaleString():"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800",children:k?.call_assign_to?`${k.call_assign_to.first_name} ${k.call_assign_to.last_name}`:"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${WF(k.status)}`,children:AA(k.status)})})]},k.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),a.jsx(Et,{totalItems:Te.length,pageSize:VFe,currentPage:ye,onPrev:()=>{},onNext:()=>{},label:"calls"})]}),Se,Ve,s&&a.jsx(ZFe,{open:!0,title:s.title,message:s.message,confirmLabel:s.confirmLabel,onConfirm:We,onCancel:Ke,loading:_})]})}function KFe({icon:e,title:t,value:n,color:r,bgColor:s}){return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[a.jsx("div",{className:`p-3 rounded-full ${s} ${r} mr-4`,children:a.jsx(e,{size:22})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function QFe(e){return a.jsxs("div",{className:e.className,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),a.jsx("input",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]})}function XFe(e){return a.jsxs("div",{className:e.className,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),a.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function Oo({label:e,value:t}){return a.jsxs("p",{children:[a.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",a.jsx("br",{}),a.jsx("span",{className:"break-words",children:t||"--"})]})}function ZFe({open:e,title:t,message:n,confirmLabel:r,cancelLabel:s="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:s}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":r})]})]})})}function EA({items:e=[],value:t="",onChange:n,getLabel:r,placeholder:s="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=g.useState(!1),[d,m]=g.useState(""),h=g.useRef(null),p=e.find(x=>String(x.id)===String(t)),b=p?r(p):"",v=g.useMemo(()=>{const x=d.trim().toLowerCase();return(x?e.filter(j=>(r(j)||"").toLowerCase().includes(x)):e).slice(0,o)},[e,d,r,o]);return g.useEffect(()=>{const x=w=>{h.current&&!h.current.contains(w.target)&&c(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]),g.useEffect(()=>{l||m("")},[l]),a.jsxs("div",{ref:h,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:l?d:b,placeholder:s,onFocus:()=>!i&&c(!0),onChange:x=>{m(x.target.value),l||c(!0)},className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:v.length>0?v.map(x=>{const w=String(x.id),j=r(x),C=String(t)===w;return a.jsx("button",{type:"button",onClick:()=>{n(w),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${C?"bg-blue-50":""}`,children:j||"--"},w)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const ud=10;function JFe(){g.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,t]=g.useState(null),[n,r]=g.useState(""),[s,i]=g.useState("Filter by Actions"),[o,l]=g.useState(1),c=async()=>{try{const w=await oe.get("/logs/read-all");t(w.data)}catch(w){console.error("Error fetching audit logs:",w)}};g.useEffect(()=>{c()},[]);const d=g.useMemo(()=>{if(!Array.isArray(e))return[];const w=n.trim().toLowerCase(),j=s?.toUpperCase?.()||"ALL";return e.filter(S=>{const _=S.timestamp?new Date(S.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",E=`${S.entity_type||""} ${S.entity_name||S.entity_details?.name||S.entity_details?.title||S.entity_id||""}`,A=`${S.logger?.first_name||""} ${S.logger?.last_name||""}`,T=[_,A,S.action,S.entity_type,E,S.description],R=w===""||T.some(W=>W==null?!1:W.toString().toLowerCase().includes(w)),U=j==="FILTER BY ACTIONS"||(S.action||"").toUpperCase()===j;return R&&U}).sort((S,_)=>{const E=S.timestamp?new Date(S.timestamp).getTime():0;return(_.timestamp?new Date(_.timestamp).getTime():0)-E})},[e,n,s]),m=Math.max(1,Math.ceil(d.length/ud)||1);g.useEffect(()=>{l(1)},[n,s]),g.useEffect(()=>{l(w=>{const j=Math.max(1,Math.ceil(d.length/ud)||1);return w>j?j:w})},[d.length]);const h=g.useMemo(()=>{const w=(o-1)*ud;return d.slice(w,w+ud)},[d,o]);d.length===0||(o-1)*ud+1,Math.min(o*ud,d.length);const p=()=>l(w=>Math.max(w-1,1)),b=()=>l(w=>Math.min(w+1,m)),v=()=>{if(!d.length){jx.error("No logs to export!");return}const w=["Timestamp","User","Action","Resource","Details"],j=d.map(A=>[new Date(A.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${A.logger?.first_name||""} ${A.logger?.last_name||""}`.trim(),A.action,`${A.entity_type}: ${A.entity_id}`,A.description||""]),C=[w.join(","),...j.map(A=>A.map(T=>`"${String(T).replace(/"/g,'""')}"`).join(","))].join(`
`),S=new Blob([C],{type:"text/csv;charset=utf-8;"}),_=URL.createObjectURL(S),E=document.createElement("a");E.href=_,E.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL(_)},x=w=>{switch((w||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&a.jsx(yt,{message:"Loading audit logs..."}),a.jsx(Nx,{toastOptions:{duration:1e3}}),a.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[a.jsx(ft,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),a.jsxs("p",{className:"text-sm text-blue-700",children:[a.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(mr,{className:"text-blue-600",size:20}),a.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:v,children:[a.jsx(Sc,{className:"mr-2"}),"Export Logs"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[a.jsx(bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search audit logs",value:n,onChange:w=>r(w.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:s,onChange:w=>i(w.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),a.jsx("option",{value:"CREATE",children:"CREATE"}),a.jsx("option",{value:"DELETE",children:"DELETE"}),a.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),a.jsx("th",{className:"py-3 px-4",children:"User"}),a.jsx("th",{className:"py-3 px-4",children:"Action"}),a.jsx("th",{className:"py-3 px-4",children:"Resource"}),a.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),a.jsx("tbody",{children:Array.isArray(d)&&d.length>0?h.map((w,j)=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(w.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),a.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.name}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${x(w.action)}`,children:w.action})}),a.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[w.entity_type,": ",w.entity_id]}),a.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.description})]},j)):a.jsx("tr",{children:a.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),a.jsx(Et,{className:"mt-4",totalItems:d.length,pageSize:ud,currentPage:o,onPrev:p,onNext:b,label:"logs"})]})}const Lj=[{value:"Manager",label:"Manager"},{value:"Marketing",label:"Marketing"},{value:"Sales",label:"Sales"}],Sg={firstName:"",lastName:"",email:"",password:"",role:""},e8e={CEO:"bg-purple-100 text-purple-700",ADMIN:"bg-purple-100 text-purple-700",GROUP_MANAGER:"bg-indigo-100 text-indigo-700",MANAGER:"bg-blue-100 text-blue-700",MARKETING:"bg-yellow-100 text-yellow-700",SALES:"bg-green-100 text-green-700"},Bi=e=>e?e.toString().trim().replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/\s+/g,"_").toUpperCase():"",t8e=e=>{const t=Bi(e),n=Lj.find(r=>Bi(r.value)===t);return n?n.value:e||""},RT=e=>{const t=Bi(e),n=Lj.find(r=>Bi(r.value)===t);return n?n.label:typeof e=="string"?e.toLowerCase().replace(/\b\w/g,r=>r.toUpperCase()):"--"},YF=e=>{if(!e)return"--";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",","")},TA=(e,{size:t="sm"}={})=>{const n=Bi(e),r=e8e[n]||"bg-gray-100 text-gray-700",s=t==="lg"?"px-3 py-1 text-sm":t==="md"?"px-2.5 py-1 text-sm":"px-2 py-1 text-xs";return a.jsx("span",{className:`${s} font-semibold rounded-md inline-flex items-center justify-center ${r}`,children:RT(e)})},md=10,n8e=(e,t)=>{const n=e?.trim()?.[0]??"",r=t?.trim()?.[0]??"";return`${n}${r}`.toUpperCase()||"U"},KF=e=>[...e].sort((t,n)=>{const r=t.created_at?new Date(t.created_at).getTime():0;return(n.created_at?new Date(n.created_at).getTime():0)-r});function a8e(){const{user:e,loading:t}=Ut(),[n,r]=g.useState([]),[s,i]=g.useState(!1),[o,l]=g.useState(""),[c,d]=g.useState(""),[m,h]=g.useState(null),[p,b]=g.useState(!1),[v,x]=g.useState(!1),[w,j]=g.useState(null),[C,S]=g.useState(Sg),[_,E]=g.useState(!1),[A,T]=g.useState(null),[R,U]=g.useState(!1),[W,I]=g.useState(1),[M,H]=g.useState("Overview"),[q,ae]=g.useState(""),[K,B]=g.useState(!1),X=Bi(e?.role);console.log("meow",e);const le=["ADMIN","CEO","GROUP_MANAGER"].includes(X),ue=!t&&le,J=g.useMemo(()=>{const k=Lj.filter(Z=>Bi(Z.value)!=="CEO");return[{label:"Filter by Roles",value:""},{label:"CEO",value:"CEO"},...k]},[]),ne=g.useCallback(k=>{k&&(r(Z=>Z.map(re=>re.id===k?{...re,highlight:!0}:re)),setTimeout(()=>{r(Z=>Z.map(re=>re.id===k?{...re,highlight:!1}:re))},2e3))},[]),pe=g.useCallback(async()=>{i(!0);try{const k=await oe.get("/users/all"),Z=Array.isArray(k.data)?k.data:[],re=KF(Z);r(re),h(be=>be&&(re.find(ee=>ee.id===be.id)||null)),console.log(k.data)}catch(k){console.error("Error fetching users:",k);const Z=k.response?.data?.detail||"Failed to load users. Please try again later.";Q.error(Z)}finally{i(!1)}},[]);g.useEffect(()=>{!t&&!le&&e&&Q.error("You are not authorized to access User Management.")},[le,t,e]),g.useEffect(()=>{t||!le||pe()},[t,le,pe]),g.useEffect(()=>{document.title="Users | Sari-Sari CRM"},[]);const we=g.useMemo(()=>{const k=o.trim().toLowerCase(),Z=Bi(c);return KF(n.filter(re=>{if(!re)return!1;const be=k===""||[re.first_name,re.last_name,`${re.first_name||""} ${re.last_name||""}`,re.email,RT(re.role)].filter(Boolean).some(ee=>ee.toString().toLowerCase().includes(k)),z=Z===""||Z==="CEO"&&["CEO","ADMIN"].includes(Bi(re.role))||Bi(re.role)===Z;return be&&z}))},[n,o,c]),ye=Math.max(1,Math.ceil(we.length/md)||1);g.useEffect(()=>{I(1)},[o,c]),g.useEffect(()=>{I(k=>{const Z=Math.max(1,Math.ceil(we.length/md)||1);return k>Z?Z:k})},[we.length]);const Te=g.useMemo(()=>{const k=(W-1)*md;return we.slice(k,k+md)},[we,W]);we.length===0||(W-1)*md+1,Math.min(W*md,we.length);const Ae=()=>I(k=>Math.max(k-1,1)),Pe=()=>I(k=>Math.min(k+1,ye)),$=()=>{S(Sg),x(!1),j(null),b(!0)},Ne=k=>{h(k),H("Overview"),ae(k?.is_active?"Active":"Inactive")},fe=k=>{k.target.id==="userModalBackdrop"&&!R&&O()},O=()=>{h(null)},ce=(k,Z)=>{S(re=>({...re,[k]:Z}))},de=()=>{const k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let Z="";for(let re=0;re<10;re+=1)Z+=k.charAt(Math.floor(Math.random()*k.length));ce("password",Z)},Ce=()=>{_||R||(b(!1),S(Sg),j(null),x(!1))},Ee=k=>{S({firstName:k.first_name||"",lastName:k.last_name||"",email:k.email||"",password:"",role:t8e(k.role)}),x(!0),j(k.id),b(!0),h(null)},Ge=k=>{T({title:"Delete User",message:a.jsxs("span",{children:["Are you sure you want to delete"," ",a.jsxs("span",{className:"font-semibold",children:[k.first_name," ",k.last_name]}),"? This action cannot be undone."]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:k.id,name:`${k.first_name||""} ${k.last_name||""}`.trim()||k.email||"user"}})},Je=k=>{k.preventDefault();const Z=C.firstName.trim(),re=C.lastName.trim(),be=C.email.trim(),z=C.password.trim(),ee=C.role,ie=!(v&&w);if(!Z||!be||!ee){Q.warn("Please fill in all required fields.");return}if(ie&&!z){Q.warn("Please fill in all required fields.");return}if(z&&z.length<8){Q.warn("Password should be at least 8 characters long.");return}const V={first_name:Z,last_name:re,email:be,role:ee};(ie||z)&&(V.password=z);const F=`${Z} ${re}`.trim(),se=ie?"create":"update";T({title:se==="create"?"Confirm New User":"Confirm User Update",message:se==="create"?a.jsxs("span",{children:["Create user ",a.jsx("span",{className:"font-semibold",children:F})," with role"," ",a.jsx("span",{className:"font-semibold",children:RT(ee)}),"?"]}):a.jsxs("span",{children:["Save changes for"," ",a.jsx("span",{className:"font-semibold",children:F||be}),"?"]}),confirmLabel:se==="create"?"Create User":"Update User",cancelLabel:"Cancel",variant:"primary",action:{type:se,payload:V,targetId:w,name:F||be}})},We=async()=>{if(!A?.action){T(null);return}const{action:k}=A,{type:Z,payload:re,targetId:be,name:z}=k;U(!0),(Z==="create"||Z==="update")&&E(!0);try{if(Z==="create"){const ie=(await oe.post("/users/createuser",re)).data;await pe(),ne(ie.id),Q.success(`User "${z}" created successfully.`),b(!1),S(Sg),j(null),x(!1)}else if(Z==="update"){if(!be)throw new Error("Missing user identifier for update.");const ie=(await oe.put(`/users/updateuser/${be}`,re)).data;await pe(),h(null),ne(ie.id),Q.success(`User "${z}" updated successfully.`),b(!1),S(Sg),j(null),x(!1)}else if(Z==="delete"){if(!be)throw new Error("Missing user identifier for deletion.");await oe.delete(`/users/deleteuser/${be}`),r(ee=>ee.map(ie=>ie.id===be?{...ie,is_active:!1}:ie)),m&&m.id===be&&(h(null),ae("")),Q.success(`User "${z}" deactivated successfully.`)}}catch(ee){console.error("User management error:",ee);const ie=Z==="create"?"Failed to create user. Please review the details and try again.":Z==="update"?"Failed to update user. Please review the details and try again.":"Failed to delete user. Please try again.",V=ee.response?.data?.detail||ie;Q.error(V)}finally{(Z==="create"||Z==="update")&&E(!1),U(!1),T(null)}},Ke=()=>{R||T(null)},He=async()=>{if(!m||!q)return;const k=m.is_active?"Active":"Inactive";if(q===k)return;const Z=q==="Active";B(!0);try{const be=(await oe.put(`/users/updateuser/${m.id}`,{is_active:Z})).data;r(z=>z.map(ee=>ee.id===be.id?be:ee)),h(null),ae(""),Q.success(`User status updated to ${q}`)}catch(re){console.error("Failed to update user status:",re);const be=re.response?.data?.detail||"Failed to update user status. Please try again.";Q.error(be)}finally{B(!1)}},Se=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[(s||t||!ue)&&a.jsx(yt,{}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(JT,{className:"mr-2 text-blue-600"}),"User Management"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{type:"button",onClick:$,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(Ln,{className:"mr-2"})," Add User"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search users",value:o,onChange:k=>l(k.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:c,onChange:k=>d(k.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:J.map(k=>a.jsx("option",{value:k.value,children:k.label},k.value))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Fullname"}),a.jsx("th",{className:"py-3 px-4",children:"Email"}),a.jsx("th",{className:"py-3 px-4",children:"Role"}),a.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),a.jsx("tbody",{children:s?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:3,children:"Loading users..."})}):we.length===0?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-400",colSpan:4,children:"No users found."})}):Te.map(k=>a.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${k.highlight?"bg-green-50":""} ${k.is_active?"":"opacity-60 bg-gray-50"}`,children:[a.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>Ne(k),children:a.jsxs("div",{className:"font-medium text-blue-600 hover:underline text-sm",children:[k.first_name," ",k.last_name]})}),a.jsx("td",{className:"py-3 px-4 cursor-pointer text-sm",onClick:()=>Ne(k),children:k.email}),a.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>Ne(k),children:TA(k.role)}),a.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>Ne(k),children:a.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-md ${k.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:k.is_active?"Active":"Inactive"})})]},k.id))})]})}),a.jsx(Et,{className:"mt-4",totalItems:we.length,pageSize:md,currentPage:W,onPrev:Ae,onNext:Pe,label:"users"})]}),Ve=m?a.jsx("div",{id:"userModalBackdrop",onClick:fe,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in p-4 sm:p-6 md:p-8 font-inter relative",children:[a.jsx("div",{className:"flex justify-end w-full",children:a.jsx("button",{onClick:O,className:"text-gray-500 hover:text-gray-700 transition mb-5 cursor-pointer",children:a.jsx(wn,{size:30})})}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7 mb-4 lg:mb-6 md:mb-4",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[m.profile_picture?a.jsx("img",{src:m.profile_picture,alt:`${m.first_name} ${m.last_name}`,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover border border-gray-200 shadow-sm"}):a.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-200 text-gray-700 flex items-center justify-center text-lg sm:text-xl font-semibold border border-gray-200 shadow-sm",children:n8e(m.first_name,m.last_name)}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[m.first_name," ",m.last_name]}),a.jsx("p",{className:"text-sm text-gray-500 break-all",children:m.email})]})]}),TA(m.role,{size:"md"})]}),!["CEO","ADMIN","GROUP MANAGER","GROUP_MANAGER"].includes(m.role.toUpperCase())&&a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Ee(m),disabled:R,children:[a.jsx(pn,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>Ge(m),disabled:R,children:[a.jsx(jt,{className:"mr-2"}),"Delete"]})]})]}),a.jsx("div",{className:"border-b border-gray-200 mb-6"}),a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview"].map(k=>a.jsx("button",{onClick:()=>H(k),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${M===k?"bg-[#5c636d] text-white border-white":"text-white hover:bg-[#5c636d]"}`,children:k},k))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsx("div",{className:"lg:col-span-3",children:M==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:m.email||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Role:"}),a.jsx("p",{children:TA(m.role,{size:"sm"})})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Status:"}),a.jsx("p",{children:m.is_active?"Active":"Inactive"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Auth Provider:"}),a.jsx("p",{children:m.auth_provider?m.auth_provider.toString().replace(/\b\w/g,k=>k.toUpperCase()):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Phone Number:"}),a.jsx("p",{children:m.phone_number||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Company:"}),a.jsx("p",{children:m.company?.company_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Company Number:"}),a.jsx("p",{children:m.company?.company_number||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Related to CEO:"}),a.jsx("p",{children:m.manager?`${m.manager.first_name} ${m.manager.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:YF(m.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Login:"}),a.jsx("p",{children:m.last_login?YF(m.last_login):"Never"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Profile Picture:"}),a.jsx("p",{children:m.profile_picture?a.jsx("a",{href:m.profile_picture,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline break-all",children:"View image"}):"N/A"})]})]})})}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsx("div",{className:"flex flex-col gap-2 w-full",children:a.jsxs("button",{type:"button",onClick:()=>{if(!m.email){alert("No email address available");return}const k=encodeURIComponent(m.email),Z=encodeURIComponent(""),re=encodeURIComponent(""),be=`https://mail.google.com/mail/?view=cm&fs=1&to=${k}&su=${Z}&body=${re}`;window.open(be,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Tn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]})})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:q||(m.is_active?"Active":"Inactive"),onChange:k=>ae(k.target.value),children:[a.jsx("option",{value:"Active",children:"Active"}),a.jsx("option",{value:"Inactive",children:"Inactive"})]}),a.jsx("button",{onClick:He,disabled:K||q===(m.is_active?"Active":"Inactive"),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${K||q===(m.is_active?"Active":"Inactive")?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:K?"Updating...":"Update"})]})]})]})]})}):null;return a.jsxs(a.Fragment,{children:[Se,Ve,a.jsx(r8e,{open:p,isEditing:v,isSubmitting:_,confirmProcessing:R,formData:C,onClose:Ce,onSubmit:Je,onChange:ce,onGeneratePassword:de}),a.jsx(s8e,{open:!!A,title:A?.title,message:A?.message,confirmLabel:A?.confirmLabel,cancelLabel:A?.cancelLabel,variant:A?.variant,loading:R,onConfirm:We,onCancel:Ke})]})}function r8e({open:e,isEditing:t,isSubmitting:n,confirmProcessing:r,formData:s,onClose:i,onSubmit:o,onChange:l,onGeneratePassword:c}){if(!e)return null;const d=n||r;return a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-lg border border-gray-200 p-6 sm:p-8 relative overflow-y-auto max-h-[90vh]",children:[a.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:d,children:a.jsx(St,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-6 text-center",children:t?"Edit User":"Add New User"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:o,children:[a.jsx(yb,{label:"First Name",value:s.firstName,onChange:m=>l("firstName",m),placeholder:"John",required:!0,disabled:d}),a.jsx(yb,{label:"Last Name",value:s.lastName,onChange:m=>l("lastName",m),placeholder:"Doe",required:!0,disabled:d}),a.jsx(yb,{label:"Email",type:"email",value:s.email,onChange:m=>l("email",m),placeholder:"john.doe@company.com",required:!0,disabled:d||t}),a.jsx(yb,{label:"Role",type:"select",value:s.role,onChange:m=>l("role",m),options:[{value:"",label:"Select role"},...Lj],required:!0,disabled:d}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Password"}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[a.jsx("input",{type:"text",value:s.password,onChange:m=>l("password",m.target.value),placeholder:t?"Leave blank to keep current password":"Enter or generate password",required:!t,disabled:d,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"}),a.jsx("button",{type:"button",onClick:c,className:"flex items-center justify-center px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-60",disabled:d,children:"Generate"})]}),t?a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Setting a password will reset the user's credentials; leave it blank to keep the current password."}):a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long."})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:i,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:d,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:d,children:n?"Saving...":t?"Update User":"Save User"})]})]})]})})}function yb({label:e,type:t="text",value:n,onChange:r,placeholder:s,options:i=[],required:o=!1,disabled:l=!1}){return a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t==="select"?a.jsx("select",{value:n??"",onChange:c=>r(c.target.value),required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100",children:i.map(c=>a.jsx("option",{value:c.value,children:c.label},c.value))}):a.jsx("input",{type:t,value:n??"",onChange:c=>r(c.target.value),placeholder:s,required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"})]})}function s8e({open:e,title:t,message:n,confirmLabel:r,cancelLabel:s="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-black hover:bg-gray-800 border border-black";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("div",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:s}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":r})]})]})})}function i8e(){return a.jsxs(Yee,{children:[a.jsx($te,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"colored",className:"z-[9999]"}),a.jsxs(Cee,{children:[a.jsx(Ze,{path:"/",element:a.jsx(Rae,{})}),a.jsx(Ze,{path:"/header",element:a.jsx(K8,{})}),a.jsx(Ze,{path:"/signup",element:a.jsx($oe,{})}),a.jsx(Ze,{path:"/login",element:a.jsx(zoe,{})}),a.jsx(Ze,{path:"/forgot-password",element:a.jsx(Boe,{})}),a.jsxs(Ze,{path:"/admin",element:a.jsx(Th,{requiredRole:"ceo",children:a.jsx(Voe,{})}),children:[a.jsx(Ze,{index:!0,element:a.jsx(os,{to:"dashboard",replace:!0})}),a.jsx(Ze,{path:"dashboard",element:a.jsx(Ibe,{})}),a.jsx(Ze,{path:"accounts",element:a.jsx(zbe,{})}),a.jsx(Ze,{path:"contacts",element:a.jsx(Gbe,{})}),a.jsx(Ze,{path:"leads",element:a.jsx(Xbe,{})}),a.jsx(Ze,{path:"leads/:leadID",element:a.jsx(xV,{})}),a.jsx(Ze,{path:"audit",element:a.jsx(Bve,{})}),a.jsx(Ze,{path:"targets",element:a.jsx($Pe,{})}),a.jsx(Ze,{path:"quotes",element:a.jsx(GPe,{})}),a.jsx(Ze,{path:"users",element:a.jsx(ZPe,{})}),a.jsx(Ze,{path:"manage-account",element:a.jsx(nDe,{})}),a.jsx(Ze,{path:"deals",element:a.jsx(aDe,{})}),a.jsx(Ze,{path:"deals/info",element:a.jsx(Bx,{})}),a.jsx(Ze,{path:"deals/quickaction",element:a.jsx(SK,{})}),a.jsx(Ze,{path:"tasks",element:a.jsx(gMe,{})}),a.jsxs(Ze,{path:"/admin/territory",children:[a.jsx(Ze,{index:!0,element:a.jsx(Ql,{})}),a.jsx(Ze,{path:":id",element:a.jsx(Ql,{})})]}),a.jsx(Ze,{path:"calls",element:a.jsx(W7,{})}),a.jsx(Ze,{path:"calls/info",element:a.jsx(W7,{})}),a.jsx(Ze,{path:"meetings",element:a.jsx(q7,{})}),a.jsx(Ze,{path:"meetings/info",element:a.jsx(q7,{})})]}),a.jsxs(Ze,{path:"/sales",element:a.jsx(Th,{requiredRole:"sales",children:a.jsx($Me,{})}),children:[a.jsx(Ze,{index:!0,element:a.jsx(os,{to:"overview",replace:!0})}),a.jsx(Ze,{path:"overview",element:a.jsx(RMe,{})}),a.jsx(Ze,{path:"accounts",element:a.jsx(qMe,{})}),a.jsx(Ze,{path:"contacts",element:a.jsx(ZMe,{})}),a.jsx(Ze,{path:"leads",element:a.jsx(s3e,{})}),a.jsx(Ze,{path:"leads/info",element:a.jsx(nQ,{})}),a.jsx(Ze,{path:"leads/convert",element:a.jsx(b3e,{})}),a.jsx(Ze,{path:"deals",element:a.jsx(v3e,{})}),a.jsx(Ze,{path:"deals/info",element:a.jsx(_3e,{})}),a.jsx(Ze,{path:"deals/quickaction",element:a.jsx(A3e,{})}),a.jsx(Ze,{path:"quotes",element:a.jsx(O3e,{})}),a.jsx(Ze,{path:"targets",element:a.jsx(z3e,{})}),a.jsx(Ze,{path:"audit",element:a.jsx(U3e,{})}),a.jsx(Ze,{path:"manage-account",element:a.jsx(gy,{})}),a.jsxs(Ze,{path:"/sales/territory",children:[a.jsx(Ze,{index:!0,element:a.jsx(Ql,{})}),a.jsx(Ze,{path:":id",element:a.jsx(Ql,{})})]}),a.jsx(Ze,{path:"meetings",element:a.jsx(K3e,{})}),a.jsx(Ze,{path:"calls",element:a.jsx(eIe,{})}),a.jsx(Ze,{path:"tasks",element:a.jsx(G3e,{})}),a.jsxs(Ze,{path:"hub/*",element:a.jsx(UMe,{}),children:[a.jsx(Ze,{index:!0,element:a.jsx(os,{to:"mytasks",replace:!0})}),a.jsx(Ze,{path:"activities",element:a.jsx(FMe,{})}),a.jsx(Ze,{path:"mytasks",element:a.jsx(BMe,{})}),a.jsx(Ze,{path:"pipeline",element:a.jsx(HMe,{})}),a.jsx(Ze,{path:"performance",element:a.jsx(GMe,{})})]})]}),a.jsxs(Ze,{path:"/manager",element:a.jsx(Th,{requiredRole:"manager",children:a.jsx(iIe,{})}),children:[a.jsx(Ze,{index:!0,element:a.jsx(os,{to:"dashboard",replace:!0})}),a.jsx(Ze,{path:"dashboard",element:a.jsx($Ie,{})}),a.jsx(Ze,{path:"accounts",element:a.jsx(UIe,{})}),a.jsx(Ze,{path:"contacts",element:a.jsx(VIe,{})}),a.jsx(Ze,{path:"leads",element:a.jsx(ZIe,{})}),a.jsx(Ze,{path:"leads/info",element:a.jsx(dQ,{})}),a.jsx(Ze,{path:"leads/convert",element:a.jsx(s5e,{})}),a.jsx(Ze,{path:"deals",element:a.jsx(i5e,{})}),a.jsx(Ze,{path:"deals/info",element:a.jsx(m5e,{})}),a.jsx(Ze,{path:"deals/quickaction",element:a.jsx(f5e,{})}),a.jsx(Ze,{path:"quotes",element:a.jsx(v5e,{})}),a.jsx(Ze,{path:"targets",element:a.jsx(S5e,{})}),a.jsx(Ze,{path:"meetings",element:a.jsx(H5e,{})}),a.jsx(Ze,{path:"audit",element:a.jsx(_5e,{})}),a.jsx(Ze,{path:"calls",element:a.jsx(L5e,{})}),a.jsx(Ze,{path:"tasks",element:a.jsx(R5e,{})}),a.jsxs(Ze,{path:"/manager/territory",children:[a.jsx(Ze,{index:!0,element:a.jsx(Ql,{})}),a.jsx(Ze,{path:":id",element:a.jsx(Ql,{})})]}),a.jsx(Ze,{path:"users",element:a.jsx(Y5e,{})}),a.jsx(Ze,{path:"manage-account",element:a.jsx(gy,{})})]}),a.jsx(Ze,{children:a.jsxs(Ze,{path:"/marketing",element:a.jsx(Th,{requiredRole:"marketing",children:a.jsx(Z5e,{})}),children:[a.jsx(Ze,{index:!0,element:a.jsx(os,{to:"dashboard",replace:!0})}),a.jsx(Ze,{path:"dashboard",element:a.jsx(Q7e,{})}),a.jsx(Ze,{path:"accounts",element:a.jsx(X7e,{})}),a.jsx(Ze,{path:"contacts",element:a.jsx(J7e,{})}),a.jsx(Ze,{path:"leads",element:a.jsx(sUe,{})}),a.jsx(Ze,{path:"leads/info",element:a.jsx(rX,{})}),a.jsx(Ze,{path:"leads/convert",element:a.jsx(aX,{})}),a.jsx(Ze,{path:"tasks",element:a.jsx(cUe,{})}),a.jsx(Ze,{path:"campaigns",element:a.jsx(mUe,{})}),a.jsx(Ze,{path:"templates",element:a.jsx(hUe,{})}),a.jsx(Ze,{path:"manage-account",element:a.jsx(gy,{})})]})}),a.jsxs(Ze,{path:"/group-manager",element:a.jsx(Th,{requiredRole:"group manager",children:a.jsx(pUe,{})}),children:[a.jsx(Ze,{index:!0,element:a.jsx(os,{to:"dashboard",replace:!0})}),a.jsx(Ze,{path:"dashboard",element:a.jsx(qUe,{})}),a.jsx(Ze,{path:"accounts",element:a.jsx(QUe,{})}),a.jsx(Ze,{path:"contacts",element:a.jsx(tFe,{})}),a.jsx(Ze,{path:"leads",element:a.jsx(lFe,{})}),a.jsx(Ze,{path:"leads/info",element:a.jsx(dX,{})}),a.jsx(Ze,{path:"leads/convert",element:a.jsx(gFe,{})}),a.jsx(Ze,{path:"deals",element:a.jsx(pFe,{})}),a.jsx(Ze,{path:"deals/info",element:a.jsx(NFe,{})}),a.jsx(Ze,{path:"deals/quickaction",element:a.jsx(jj,{})}),a.jsx(Ze,{path:"quotes",element:a.jsx(TFe,{})}),a.jsx(Ze,{path:"targets",element:a.jsx(OFe,{})}),a.jsx(Ze,{path:"tasks",element:a.jsx(RFe,{})}),a.jsxs(Ze,{path:"/group-manager/territory",children:[a.jsx(Ze,{index:!0,element:a.jsx(Ql,{})}),a.jsx(Ze,{path:":id",element:a.jsx(Ql,{})})]}),a.jsx(Ze,{path:"meetings",element:a.jsx(HFe,{})}),a.jsx(Ze,{path:"calls",element:a.jsx(YFe,{})}),a.jsx(Ze,{path:"audit",element:a.jsx(JFe,{})}),a.jsx(Ze,{path:"users",element:a.jsx(a8e,{})}),a.jsx(Ze,{path:"manage-account",element:a.jsx(gy,{})})]})]})]})}PJ.createRoot(document.getElementById("root")).render(a.jsx(g.StrictMode,{children:a.jsx(i8e,{})}));
