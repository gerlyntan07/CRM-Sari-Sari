function Mne(e,t){for(var a=0;a<t.length;a++){const s=t[a];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in e)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function a(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=a(r);fetch(r.href,i)}})();function Zi(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var DS={exports:{}},og={};var sI;function Ine(){if(sI)return og;sI=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function a(s,r,i){var o=null;if(i!==void 0&&(o=""+i),r.key!==void 0&&(o=""+r.key),"key"in r){i={};for(var l in r)l!=="key"&&(i[l]=r[l])}else i=r;return r=i.ref,{$$typeof:e,type:s,key:o,ref:r!==void 0?r:null,props:i}}return og.Fragment=t,og.jsx=a,og.jsxs=a,og}var rI;function $ne(){return rI||(rI=1,DS.exports=Ine()),DS.exports}var n=$ne(),OS={exports:{}},en={};var iI;function Rne(){if(iI)return en;iI=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),p=Symbol.iterator;function x(te){return te===null||typeof te!="object"?null:(te=p&&te[p]||te["@@iterator"],typeof te=="function"?te:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,v={};function j(te,ae,ye){this.props=te,this.context=ae,this.refs=v,this.updater=ye||y}j.prototype.isReactComponent={},j.prototype.setState=function(te,ae){if(typeof te!="object"&&typeof te!="function"&&te!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,te,ae,"setState")},j.prototype.forceUpdate=function(te){this.updater.enqueueForceUpdate(this,te,"forceUpdate")};function w(){}w.prototype=j.prototype;function S(te,ae,ye){this.props=te,this.context=ae,this.refs=v,this.updater=ye||y}var _=S.prototype=new w;_.constructor=S,N(_,j.prototype),_.isPureReactComponent=!0;var E=Array.isArray;function T(){}var A={H:null,A:null,T:null,S:null},L=Object.prototype.hasOwnProperty;function M(te,ae,ye){var Ne=ye.ref;return{$$typeof:e,type:te,key:ae,ref:Ne!==void 0?Ne:null,props:ye}}function F(te,ae){return M(te.type,ae,te.props)}function $(te){return typeof te=="object"&&te!==null&&te.$$typeof===e}function D(te){var ae={"=":"=0",":":"=2"};return"$"+te.replace(/[=:]/g,function(ye){return ae[ye]})}var q=/\/+/g;function G(te,ae){return typeof te=="object"&&te!==null&&te.key!=null?D(""+te.key):ae.toString(36)}function U(te){switch(te.status){case"fulfilled":return te.value;case"rejected":throw te.reason;default:switch(typeof te.status=="string"?te.then(T,T):(te.status="pending",te.then(function(ae){te.status==="pending"&&(te.status="fulfilled",te.value=ae)},function(ae){te.status==="pending"&&(te.status="rejected",te.reason=ae)})),te.status){case"fulfilled":return te.value;case"rejected":throw te.reason}}throw te}function V(te,ae,ye,Ne,he){var ve=typeof te;(ve==="undefined"||ve==="boolean")&&(te=null);var ne=!1;if(te===null)ne=!0;else switch(ve){case"bigint":case"string":case"number":ne=!0;break;case"object":switch(te.$$typeof){case e:case t:ne=!0;break;case d:return ne=te._init,V(ne(te._payload),ae,ye,Ne,he)}}if(ne)return he=he(te),ne=Ne===""?"."+G(te,0):Ne,E(he)?(ye="",ne!=null&&(ye=ne.replace(q,"$&/")+"/"),V(he,ae,ye,"",function(ke){return ke})):he!=null&&($(he)&&(he=F(he,ye+(he.key==null||te&&te.key===he.key?"":(""+he.key).replace(q,"$&/")+"/")+ne)),ae.push(he)),1;ne=0;var Se=Ne===""?".":Ne+":";if(E(te))for(var de=0;de<te.length;de++)Ne=te[de],ve=Se+G(Ne,de),ne+=V(Ne,ae,ye,ve,he);else if(de=x(te),typeof de=="function")for(te=de.call(te),de=0;!(Ne=te.next()).done;)Ne=Ne.value,ve=Se+G(Ne,de++),ne+=V(Ne,ae,ye,ve,he);else if(ve==="object"){if(typeof te.then=="function")return V(U(te),ae,ye,Ne,he);throw ae=String(te),Error("Objects are not valid as a React child (found: "+(ae==="[object Object]"?"object with keys {"+Object.keys(te).join(", ")+"}":ae)+"). If you meant to render a collection of children, use an array instead.")}return ne}function Z(te,ae,ye){if(te==null)return te;var Ne=[],he=0;return V(te,Ne,"","",function(ve){return ae.call(ye,ve,he++)}),Ne}function Y(te){if(te._status===-1){var ae=te._result;ae=ae(),ae.then(function(ye){(te._status===0||te._status===-1)&&(te._status=1,te._result=ye)},function(ye){(te._status===0||te._status===-1)&&(te._status=2,te._result=ye)}),te._status===-1&&(te._status=0,te._result=ae)}if(te._status===1)return te._result.default;throw te._result}var le=typeof reportError=="function"?reportError:function(te){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof te=="object"&&te!==null&&typeof te.message=="string"?String(te.message):String(te),error:te});if(!window.dispatchEvent(ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",te);return}console.error(te)},_e={map:Z,forEach:function(te,ae,ye){Z(te,function(){ae.apply(this,arguments)},ye)},count:function(te){var ae=0;return Z(te,function(){ae++}),ae},toArray:function(te){return Z(te,function(ae){return ae})||[]},only:function(te){if(!$(te))throw Error("React.Children.only expected to receive a single React element child.");return te}};return en.Activity=f,en.Children=_e,en.Component=j,en.Fragment=a,en.Profiler=r,en.PureComponent=S,en.StrictMode=s,en.Suspense=c,en.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,en.__COMPILER_RUNTIME={__proto__:null,c:function(te){return A.H.useMemoCache(te)}},en.cache=function(te){return function(){return te.apply(null,arguments)}},en.cacheSignal=function(){return null},en.cloneElement=function(te,ae,ye){if(te==null)throw Error("The argument must be a React element, but you passed "+te+".");var Ne=N({},te.props),he=te.key;if(ae!=null)for(ve in ae.key!==void 0&&(he=""+ae.key),ae)!L.call(ae,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&ae.ref===void 0||(Ne[ve]=ae[ve]);var ve=arguments.length-2;if(ve===1)Ne.children=ye;else if(1<ve){for(var ne=Array(ve),Se=0;Se<ve;Se++)ne[Se]=arguments[Se+2];Ne.children=ne}return M(te.type,he,Ne)},en.createContext=function(te){return te={$$typeof:o,_currentValue:te,_currentValue2:te,_threadCount:0,Provider:null,Consumer:null},te.Provider=te,te.Consumer={$$typeof:i,_context:te},te},en.createElement=function(te,ae,ye){var Ne,he={},ve=null;if(ae!=null)for(Ne in ae.key!==void 0&&(ve=""+ae.key),ae)L.call(ae,Ne)&&Ne!=="key"&&Ne!=="__self"&&Ne!=="__source"&&(he[Ne]=ae[Ne]);var ne=arguments.length-2;if(ne===1)he.children=ye;else if(1<ne){for(var Se=Array(ne),de=0;de<ne;de++)Se[de]=arguments[de+2];he.children=Se}if(te&&te.defaultProps)for(Ne in ne=te.defaultProps,ne)he[Ne]===void 0&&(he[Ne]=ne[Ne]);return M(te,ve,he)},en.createRef=function(){return{current:null}},en.forwardRef=function(te){return{$$typeof:l,render:te}},en.isValidElement=$,en.lazy=function(te){return{$$typeof:d,_payload:{_status:-1,_result:te},_init:Y}},en.memo=function(te,ae){return{$$typeof:u,type:te,compare:ae===void 0?null:ae}},en.startTransition=function(te){var ae=A.T,ye={};A.T=ye;try{var Ne=te(),he=A.S;he!==null&&he(ye,Ne),typeof Ne=="object"&&Ne!==null&&typeof Ne.then=="function"&&Ne.then(T,le)}catch(ve){le(ve)}finally{ae!==null&&ye.types!==null&&(ae.types=ye.types),A.T=ae}},en.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},en.use=function(te){return A.H.use(te)},en.useActionState=function(te,ae,ye){return A.H.useActionState(te,ae,ye)},en.useCallback=function(te,ae){return A.H.useCallback(te,ae)},en.useContext=function(te){return A.H.useContext(te)},en.useDebugValue=function(){},en.useDeferredValue=function(te,ae){return A.H.useDeferredValue(te,ae)},en.useEffect=function(te,ae){return A.H.useEffect(te,ae)},en.useEffectEvent=function(te){return A.H.useEffectEvent(te)},en.useId=function(){return A.H.useId()},en.useImperativeHandle=function(te,ae,ye){return A.H.useImperativeHandle(te,ae,ye)},en.useInsertionEffect=function(te,ae){return A.H.useInsertionEffect(te,ae)},en.useLayoutEffect=function(te,ae){return A.H.useLayoutEffect(te,ae)},en.useMemo=function(te,ae){return A.H.useMemo(te,ae)},en.useOptimistic=function(te,ae){return A.H.useOptimistic(te,ae)},en.useReducer=function(te,ae,ye){return A.H.useReducer(te,ae,ye)},en.useRef=function(te){return A.H.useRef(te)},en.useState=function(te){return A.H.useState(te)},en.useSyncExternalStore=function(te,ae,ye){return A.H.useSyncExternalStore(te,ae,ye)},en.useTransition=function(){return A.H.useTransition()},en.version="19.2.0",en}var oI;function Gf(){return oI||(oI=1,OS.exports=Rne()),OS.exports}var h=Gf();const xt=Zi(h),_u=Mne({__proto__:null,default:xt},[h]);var MS={exports:{}},lg={},IS={exports:{}},$S={};var lI;function zne(){return lI||(lI=1,(function(e){function t(V,Z){var Y=V.length;V.push(Z);e:for(;0<Y;){var le=Y-1>>>1,_e=V[le];if(0<r(_e,Z))V[le]=Z,V[Y]=_e,Y=le;else break e}}function a(V){return V.length===0?null:V[0]}function s(V){if(V.length===0)return null;var Z=V[0],Y=V.pop();if(Y!==Z){V[0]=Y;e:for(var le=0,_e=V.length,te=_e>>>1;le<te;){var ae=2*(le+1)-1,ye=V[ae],Ne=ae+1,he=V[Ne];if(0>r(ye,Y))Ne<_e&&0>r(he,ye)?(V[le]=he,V[Ne]=Y,le=Ne):(V[le]=ye,V[ae]=Y,le=ae);else if(Ne<_e&&0>r(he,Y))V[le]=he,V[Ne]=Y,le=Ne;else break e}}return Z}function r(V,Z){var Y=V.sortIndex-Z.sortIndex;return Y!==0?Y:V.id-Z.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,p=3,x=!1,y=!1,N=!1,v=!1,j=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function _(V){for(var Z=a(u);Z!==null;){if(Z.callback===null)s(u);else if(Z.startTime<=V)s(u),Z.sortIndex=Z.expirationTime,t(c,Z);else break;Z=a(u)}}function E(V){if(N=!1,_(V),!y)if(a(c)!==null)y=!0,T||(T=!0,D());else{var Z=a(u);Z!==null&&U(E,Z.startTime-V)}}var T=!1,A=-1,L=5,M=-1;function F(){return v?!0:!(e.unstable_now()-M<L)}function $(){if(v=!1,T){var V=e.unstable_now();M=V;var Z=!0;try{e:{y=!1,N&&(N=!1,w(A),A=-1),x=!0;var Y=p;try{t:{for(_(V),f=a(c);f!==null&&!(f.expirationTime>V&&F());){var le=f.callback;if(typeof le=="function"){f.callback=null,p=f.priorityLevel;var _e=le(f.expirationTime<=V);if(V=e.unstable_now(),typeof _e=="function"){f.callback=_e,_(V),Z=!0;break t}f===a(c)&&s(c),_(V)}else s(c);f=a(c)}if(f!==null)Z=!0;else{var te=a(u);te!==null&&U(E,te.startTime-V),Z=!1}}break e}finally{f=null,p=Y,x=!1}Z=void 0}}finally{Z?D():T=!1}}}var D;if(typeof S=="function")D=function(){S($)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,G=q.port2;q.port1.onmessage=$,D=function(){G.postMessage(null)}}else D=function(){j($,0)};function U(V,Z){A=j(function(){V(e.unstable_now())},Z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(V){V.callback=null},e.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<V?Math.floor(1e3/V):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(V){switch(p){case 1:case 2:case 3:var Z=3;break;default:Z=p}var Y=p;p=Z;try{return V()}finally{p=Y}},e.unstable_requestPaint=function(){v=!0},e.unstable_runWithPriority=function(V,Z){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var Y=p;p=V;try{return Z()}finally{p=Y}},e.unstable_scheduleCallback=function(V,Z,Y){var le=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?le+Y:le):Y=le,V){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=Y+_e,V={id:d++,callback:Z,priorityLevel:V,startTime:Y,expirationTime:_e,sortIndex:-1},Y>le?(V.sortIndex=Y,t(u,V),a(c)===null&&V===a(u)&&(N?(w(A),A=-1):N=!0,U(E,Y-le))):(V.sortIndex=_e,t(c,V),y||x||(y=!0,T||(T=!0,D()))),V},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(V){var Z=p;return function(){var Y=p;p=Z;try{return V.apply(this,arguments)}finally{p=Y}}}})($S)),$S}var cI;function Fne(){return cI||(cI=1,IS.exports=zne()),IS.exports}var RS={exports:{}},Es={};var dI;function Une(){if(dI)return Es;dI=1;var e=Gf();function t(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var s={d:{f:a,r:function(){throw Error(t(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},r=Symbol.for("react.portal");function i(c,u,d){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:f==null?null:""+f,children:c,containerInfo:u,implementation:d}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Es.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Es.createPortal=function(c,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return i(c,u,null,d)},Es.flushSync=function(c){var u=o.T,d=s.p;try{if(o.T=null,s.p=2,c)return c()}finally{o.T=u,s.p=d,s.d.f()}},Es.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,s.d.C(c,u))},Es.prefetchDNS=function(c){typeof c=="string"&&s.d.D(c)},Es.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var d=u.as,f=l(d,u.crossOrigin),p=typeof u.integrity=="string"?u.integrity:void 0,x=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?s.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:f,integrity:p,fetchPriority:x}):d==="script"&&s.d.X(c,{crossOrigin:f,integrity:p,fetchPriority:x,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Es.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=l(u.as,u.crossOrigin);s.d.M(c,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&s.d.M(c)},Es.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,f=l(d,u.crossOrigin);s.d.L(c,d,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Es.preloadModule=function(c,u){if(typeof c=="string")if(u){var d=l(u.as,u.crossOrigin);s.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else s.d.m(c)},Es.requestFormReset=function(c){s.d.r(c)},Es.unstable_batchedUpdates=function(c,u){return c(u)},Es.useFormState=function(c,u,d){return o.H.useFormState(c,u,d)},Es.useFormStatus=function(){return o.H.useHostTransitionStatus()},Es.version="19.2.0",Es}var uI;function hH(){if(uI)return RS.exports;uI=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),RS.exports=Une(),RS.exports}var mI;function Bne(){if(mI)return lg;mI=1;var e=Fne(),t=Gf(),a=hH();function s(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)g+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)}function i(m){var g=m,b=m;if(m.alternate)for(;g.return;)g=g.return;else{m=g;do g=m,(g.flags&4098)!==0&&(b=g.return),m=g.return;while(m)}return g.tag===3?b:null}function o(m){if(m.tag===13){var g=m.memoizedState;if(g===null&&(m=m.alternate,m!==null&&(g=m.memoizedState)),g!==null)return g.dehydrated}return null}function l(m){if(m.tag===31){var g=m.memoizedState;if(g===null&&(m=m.alternate,m!==null&&(g=m.memoizedState)),g!==null)return g.dehydrated}return null}function c(m){if(i(m)!==m)throw Error(s(188))}function u(m){var g=m.alternate;if(!g){if(g=i(m),g===null)throw Error(s(188));return g!==m?null:m}for(var b=m,C=g;;){var P=b.return;if(P===null)break;var R=P.alternate;if(R===null){if(C=P.return,C!==null){b=C;continue}break}if(P.child===R.child){for(R=P.child;R;){if(R===b)return c(P),m;if(R===C)return c(P),g;R=R.sibling}throw Error(s(188))}if(b.return!==C.return)b=P,C=R;else{for(var J=!1,je=P.child;je;){if(je===b){J=!0,b=P,C=R;break}if(je===C){J=!0,C=P,b=R;break}je=je.sibling}if(!J){for(je=R.child;je;){if(je===b){J=!0,b=R,C=P;break}if(je===C){J=!0,C=R,b=P;break}je=je.sibling}if(!J)throw Error(s(189))}}if(b.alternate!==C)throw Error(s(190))}if(b.tag!==3)throw Error(s(188));return b.stateNode.current===b?m:g}function d(m){var g=m.tag;if(g===5||g===26||g===27||g===6)return m;for(m=m.child;m!==null;){if(g=d(m),g!==null)return g;m=m.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),w=Symbol.for("react.consumer"),S=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),$=Symbol.iterator;function D(m){return m===null||typeof m!="object"?null:(m=$&&m[$]||m["@@iterator"],typeof m=="function"?m:null)}var q=Symbol.for("react.client.reference");function G(m){if(m==null)return null;if(typeof m=="function")return m.$$typeof===q?null:m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case N:return"Fragment";case j:return"Profiler";case v:return"StrictMode";case E:return"Suspense";case T:return"SuspenseList";case M:return"Activity"}if(typeof m=="object")switch(m.$$typeof){case y:return"Portal";case S:return m.displayName||"Context";case w:return(m._context.displayName||"Context")+".Consumer";case _:var g=m.render;return m=m.displayName,m||(m=g.displayName||g.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case A:return g=m.displayName||null,g!==null?g:G(m.type)||"Memo";case L:g=m._payload,m=m._init;try{return G(m(g))}catch{}}return null}var U=Array.isArray,V=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},le=[],_e=-1;function te(m){return{current:m}}function ae(m){0>_e||(m.current=le[_e],le[_e]=null,_e--)}function ye(m,g){_e++,le[_e]=m.current,m.current=g}var Ne=te(null),he=te(null),ve=te(null),ne=te(null);function Se(m,g){switch(ye(ve,g),ye(he,m),ye(Ne,null),g.nodeType){case 9:case 11:m=(m=g.documentElement)&&(m=m.namespaceURI)?AM(m):0;break;default:if(m=g.tagName,g=g.namespaceURI)g=AM(g),m=TM(g,m);else switch(m){case"svg":m=1;break;case"math":m=2;break;default:m=0}}ae(Ne),ye(Ne,m)}function de(){ae(Ne),ae(he),ae(ve)}function ke(m){m.memoizedState!==null&&ye(ne,m);var g=Ne.current,b=TM(g,m.type);g!==b&&(ye(he,m),ye(Ne,b))}function Te(m){he.current===m&&(ae(Ne),ae(he)),ne.current===m&&(ae(ne),ag._currentValue=Y)}var pe,ze;function Pe(m){if(pe===void 0)try{throw Error()}catch(b){var g=b.stack.trim().match(/\n( *(at )?)/);pe=g&&g[1]||"",ze=-1<b.stack.indexOf(`
    at`)?" (<anonymous>)":-1<b.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pe+m+ze}var We=!1;function tt(m,g){if(!m||We)return"";We=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var C={DetermineComponentFrameRoot:function(){try{if(g){var bt=function(){throw Error()};if(Object.defineProperty(bt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(bt,[])}catch(ut){var ot=ut}Reflect.construct(m,[],bt)}else{try{bt.call()}catch(ut){ot=ut}m.call(bt.prototype)}}else{try{throw Error()}catch(ut){ot=ut}(bt=m())&&typeof bt.catch=="function"&&bt.catch(function(){})}}catch(ut){if(ut&&ot&&typeof ut.stack=="string")return[ut.stack,ot.stack]}return[null,null]}};C.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var P=Object.getOwnPropertyDescriptor(C.DetermineComponentFrameRoot,"name");P&&P.configurable&&Object.defineProperty(C.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var R=C.DetermineComponentFrameRoot(),J=R[0],je=R[1];if(J&&je){var qe=J.split(`
`),st=je.split(`
`);for(P=C=0;C<qe.length&&!qe[C].includes("DetermineComponentFrameRoot");)C++;for(;P<st.length&&!st[P].includes("DetermineComponentFrameRoot");)P++;if(C===qe.length||P===st.length)for(C=qe.length-1,P=st.length-1;1<=C&&0<=P&&qe[C]!==st[P];)P--;for(;1<=C&&0<=P;C--,P--)if(qe[C]!==st[P]){if(C!==1||P!==1)do if(C--,P--,0>P||qe[C]!==st[P]){var ft=`
`+qe[C].replace(" at new "," at ");return m.displayName&&ft.includes("<anonymous>")&&(ft=ft.replace("<anonymous>",m.displayName)),ft}while(1<=C&&0<=P);break}}}finally{We=!1,Error.prepareStackTrace=b}return(b=m?m.displayName||m.name:"")?Pe(b):""}function lt(m,g){switch(m.tag){case 26:case 27:case 5:return Pe(m.type);case 16:return Pe("Lazy");case 13:return m.child!==g&&g!==null?Pe("Suspense Fallback"):Pe("Suspense");case 19:return Pe("SuspenseList");case 0:case 15:return tt(m.type,!1);case 11:return tt(m.type.render,!1);case 1:return tt(m.type,!0);case 31:return Pe("Activity");default:return""}}function Ie(m){try{var g="",b=null;do g+=lt(m,b),b=m,m=m.return;while(m);return g}catch(C){return`
Error generating stack: `+C.message+`
`+C.stack}}var rt=Object.prototype.hasOwnProperty,He=e.unstable_scheduleCallback,Ke=e.unstable_cancelCallback,Je=e.unstable_shouldYield,Oe=e.unstable_requestPaint,Ce=e.unstable_now,fe=e.unstable_getCurrentPriorityLevel,ue=e.unstable_ImmediatePriority,H=e.unstable_UserBlockingPriority,K=e.unstable_NormalPriority,we=e.unstable_LowPriority,Me=e.unstable_IdlePriority,ce=e.log,oe=e.unstable_setDisableYieldValue,De=null,$e=null;function Xe(m){if(typeof ce=="function"&&oe(m),$e&&typeof $e.setStrictMode=="function")try{$e.setStrictMode(De,m)}catch{}}var Ze=Math.clz32?Math.clz32:Nt,mt=Math.log,nt=Math.LN2;function Nt(m){return m>>>=0,m===0?32:31-(mt(m)/nt|0)|0}var wt=256,Tt=262144,Re=4194304;function me(m){var g=m&42;if(g!==0)return g;switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return m&261888;case 262144:case 524288:case 1048576:case 2097152:return m&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return m&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return m}}function ie(m,g,b){var C=m.pendingLanes;if(C===0)return 0;var P=0,R=m.suspendedLanes,J=m.pingedLanes;m=m.warmLanes;var je=C&134217727;return je!==0?(C=je&~R,C!==0?P=me(C):(J&=je,J!==0?P=me(J):b||(b=je&~m,b!==0&&(P=me(b))))):(je=C&~R,je!==0?P=me(je):J!==0?P=me(J):b||(b=C&~m,b!==0&&(P=me(b)))),P===0?0:g!==0&&g!==P&&(g&R)===0&&(R=P&-P,b=g&-g,R>=b||R===32&&(b&4194048)!==0)?g:P}function Fe(m,g){return(m.pendingLanes&~(m.suspendedLanes&~m.pingedLanes)&g)===0}function Le(m,g){switch(m){case 1:case 2:case 4:case 8:case 64:return g+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function be(){var m=Re;return Re<<=1,(Re&62914560)===0&&(Re=4194304),m}function ee(m){for(var g=[],b=0;31>b;b++)g.push(m);return g}function O(m,g){m.pendingLanes|=g,g!==268435456&&(m.suspendedLanes=0,m.pingedLanes=0,m.warmLanes=0)}function z(m,g,b,C,P,R){var J=m.pendingLanes;m.pendingLanes=b,m.suspendedLanes=0,m.pingedLanes=0,m.warmLanes=0,m.expiredLanes&=b,m.entangledLanes&=b,m.errorRecoveryDisabledLanes&=b,m.shellSuspendCounter=0;var je=m.entanglements,qe=m.expirationTimes,st=m.hiddenUpdates;for(b=J&~b;0<b;){var ft=31-Ze(b),bt=1<<ft;je[ft]=0,qe[ft]=-1;var ot=st[ft];if(ot!==null)for(st[ft]=null,ft=0;ft<ot.length;ft++){var ut=ot[ft];ut!==null&&(ut.lane&=-536870913)}b&=~bt}C!==0&&I(m,C,0),R!==0&&P===0&&m.tag!==0&&(m.suspendedLanes|=R&~(J&~g))}function I(m,g,b){m.pendingLanes|=g,m.suspendedLanes&=~g;var C=31-Ze(g);m.entangledLanes|=g,m.entanglements[C]=m.entanglements[C]|1073741824|b&261930}function Q(m,g){var b=m.entangledLanes|=g;for(m=m.entanglements;b;){var C=31-Ze(b),P=1<<C;P&g|m[C]&g&&(m[C]|=g),b&=~P}}function ge(m,g){var b=g&-g;return b=(b&42)!==0?1:re(b),(b&(m.suspendedLanes|g))!==0?0:b}function re(m){switch(m){case 2:m=1;break;case 8:m=4;break;case 32:m=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:m=128;break;case 268435456:m=134217728;break;default:m=0}return m}function Ee(m){return m&=-m,2<m?8<m?(m&134217727)!==0?32:268435456:8:2}function Qe(){var m=Z.p;return m!==0?m:(m=window.event,m===void 0?32:XM(m.type))}function gt(m,g){var b=Z.p;try{return Z.p=m,g()}finally{Z.p=b}}var Ct=Math.random().toString(36).slice(2),kt="__reactFiber$"+Ct,Dt="__reactProps$"+Ct,on="__reactContainer$"+Ct,Qn="__reactEvents$"+Ct,ia="__reactListeners$"+Ct,Be="__reactHandles$"+Ct,_t="__reactResources$"+Ct,X="__reactMarker$"+Ct;function k(m){delete m[kt],delete m[Dt],delete m[Qn],delete m[ia],delete m[Be]}function B(m){var g=m[kt];if(g)return g;for(var b=m.parentNode;b;){if(g=b[on]||b[kt]){if(b=g.alternate,g.child!==null||b!==null&&b.child!==null)for(m=MM(m);m!==null;){if(b=m[kt])return b;m=MM(m)}return g}m=b,b=m.parentNode}return null}function xe(m){if(m=m[kt]||m[on]){var g=m.tag;if(g===5||g===6||g===13||g===31||g===26||g===27||g===3)return m}return null}function Ae(m){var g=m.tag;if(g===5||g===26||g===27||g===6)return m.stateNode;throw Error(s(33))}function Ue(m){var g=m[_t];return g||(g=m[_t]={hoistableStyles:new Map,hoistableScripts:new Map}),g}function Ge(m){m[X]=!0}var ct=new Set,yt={};function Et(m,g){Kt(m,g),Kt(m+"Capture",g)}function Kt(m,g){for(yt[m]=g,m=0;m<g.length;m++)ct.add(g[m])}var Ea=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),uc={},y3={};function Aee(m){return rt.call(y3,m)?!0:rt.call(uc,m)?!1:Ea.test(m)?y3[m]=!0:(uc[m]=!0,!1)}function w0(m,g,b){if(Aee(g))if(b===null)m.removeAttribute(g);else{switch(typeof b){case"undefined":case"function":case"symbol":m.removeAttribute(g);return;case"boolean":var C=g.toLowerCase().slice(0,5);if(C!=="data-"&&C!=="aria-"){m.removeAttribute(g);return}}m.setAttribute(g,""+b)}}function N0(m,g,b){if(b===null)m.removeAttribute(g);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":m.removeAttribute(g);return}m.setAttribute(g,""+b)}}function Qo(m,g,b,C){if(C===null)m.removeAttribute(b);else{switch(typeof C){case"undefined":case"function":case"symbol":case"boolean":m.removeAttribute(b);return}m.setAttributeNS(g,b,""+C)}}function Vr(m){switch(typeof m){case"bigint":case"boolean":case"number":case"string":case"undefined":return m;case"object":return m;default:return""}}function b3(m){var g=m.type;return(m=m.nodeName)&&m.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function Tee(m,g,b){var C=Object.getOwnPropertyDescriptor(m.constructor.prototype,g);if(!m.hasOwnProperty(g)&&typeof C<"u"&&typeof C.get=="function"&&typeof C.set=="function"){var P=C.get,R=C.set;return Object.defineProperty(m,g,{configurable:!0,get:function(){return P.call(this)},set:function(J){b=""+J,R.call(this,J)}}),Object.defineProperty(m,g,{enumerable:C.enumerable}),{getValue:function(){return b},setValue:function(J){b=""+J},stopTracking:function(){m._valueTracker=null,delete m[g]}}}}function _1(m){if(!m._valueTracker){var g=b3(m)?"checked":"value";m._valueTracker=Tee(m,g,""+m[g])}}function v3(m){if(!m)return!1;var g=m._valueTracker;if(!g)return!0;var b=g.getValue(),C="";return m&&(C=b3(m)?m.checked?"true":"false":m.value),m=C,m!==b?(g.setValue(m),!0):!1}function j0(m){if(m=m||(typeof document<"u"?document:void 0),typeof m>"u")return null;try{return m.activeElement||m.body}catch{return m.body}}var kee=/[\n"\\]/g;function Yr(m){return m.replace(kee,function(g){return"\\"+g.charCodeAt(0).toString(16)+" "})}function A1(m,g,b,C,P,R,J,je){m.name="",J!=null&&typeof J!="function"&&typeof J!="symbol"&&typeof J!="boolean"?m.type=J:m.removeAttribute("type"),g!=null?J==="number"?(g===0&&m.value===""||m.value!=g)&&(m.value=""+Vr(g)):m.value!==""+Vr(g)&&(m.value=""+Vr(g)):J!=="submit"&&J!=="reset"||m.removeAttribute("value"),g!=null?T1(m,J,Vr(g)):b!=null?T1(m,J,Vr(b)):C!=null&&m.removeAttribute("value"),P==null&&R!=null&&(m.defaultChecked=!!R),P!=null&&(m.checked=P&&typeof P!="function"&&typeof P!="symbol"),je!=null&&typeof je!="function"&&typeof je!="symbol"&&typeof je!="boolean"?m.name=""+Vr(je):m.removeAttribute("name")}function w3(m,g,b,C,P,R,J,je){if(R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(m.type=R),g!=null||b!=null){if(!(R!=="submit"&&R!=="reset"||g!=null)){_1(m);return}b=b!=null?""+Vr(b):"",g=g!=null?""+Vr(g):b,je||g===m.value||(m.value=g),m.defaultValue=g}C=C??P,C=typeof C!="function"&&typeof C!="symbol"&&!!C,m.checked=je?m.checked:!!C,m.defaultChecked=!!C,J!=null&&typeof J!="function"&&typeof J!="symbol"&&typeof J!="boolean"&&(m.name=J),_1(m)}function T1(m,g,b){g==="number"&&j0(m.ownerDocument)===m||m.defaultValue===""+b||(m.defaultValue=""+b)}function lm(m,g,b,C){if(m=m.options,g){g={};for(var P=0;P<b.length;P++)g["$"+b[P]]=!0;for(b=0;b<m.length;b++)P=g.hasOwnProperty("$"+m[b].value),m[b].selected!==P&&(m[b].selected=P),P&&C&&(m[b].defaultSelected=!0)}else{for(b=""+Vr(b),g=null,P=0;P<m.length;P++){if(m[P].value===b){m[P].selected=!0,C&&(m[P].defaultSelected=!0);return}g!==null||m[P].disabled||(g=m[P])}g!==null&&(g.selected=!0)}}function N3(m,g,b){if(g!=null&&(g=""+Vr(g),g!==m.value&&(m.value=g),b==null)){m.defaultValue!==g&&(m.defaultValue=g);return}m.defaultValue=b!=null?""+Vr(b):""}function j3(m,g,b,C){if(g==null){if(C!=null){if(b!=null)throw Error(s(92));if(U(C)){if(1<C.length)throw Error(s(93));C=C[0]}b=C}b==null&&(b=""),g=b}b=Vr(g),m.defaultValue=b,C=m.textContent,C===b&&C!==""&&C!==null&&(m.value=C),_1(m)}function cm(m,g){if(g){var b=m.firstChild;if(b&&b===m.lastChild&&b.nodeType===3){b.nodeValue=g;return}}m.textContent=g}var Eee=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function C3(m,g,b){var C=g.indexOf("--")===0;b==null||typeof b=="boolean"||b===""?C?m.setProperty(g,""):g==="float"?m.cssFloat="":m[g]="":C?m.setProperty(g,b):typeof b!="number"||b===0||Eee.has(g)?g==="float"?m.cssFloat=b:m[g]=(""+b).trim():m[g]=b+"px"}function S3(m,g,b){if(g!=null&&typeof g!="object")throw Error(s(62));if(m=m.style,b!=null){for(var C in b)!b.hasOwnProperty(C)||g!=null&&g.hasOwnProperty(C)||(C.indexOf("--")===0?m.setProperty(C,""):C==="float"?m.cssFloat="":m[C]="");for(var P in g)C=g[P],g.hasOwnProperty(P)&&b[P]!==C&&C3(m,P,C)}else for(var R in g)g.hasOwnProperty(R)&&C3(m,R,g[R])}function k1(m){if(m.indexOf("-")===-1)return!1;switch(m){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lee=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pee=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function C0(m){return Pee.test(""+m)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":m}function Ko(){}var E1=null;function L1(m){return m=m.target||m.srcElement||window,m.correspondingUseElement&&(m=m.correspondingUseElement),m.nodeType===3?m.parentNode:m}var dm=null,um=null;function _3(m){var g=xe(m);if(g&&(m=g.stateNode)){var b=m[Dt]||null;e:switch(m=g.stateNode,g.type){case"input":if(A1(m,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name),g=b.name,b.type==="radio"&&g!=null){for(b=m;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll('input[name="'+Yr(""+g)+'"][type="radio"]'),g=0;g<b.length;g++){var C=b[g];if(C!==m&&C.form===m.form){var P=C[Dt]||null;if(!P)throw Error(s(90));A1(C,P.value,P.defaultValue,P.defaultValue,P.checked,P.defaultChecked,P.type,P.name)}}for(g=0;g<b.length;g++)C=b[g],C.form===m.form&&v3(C)}break e;case"textarea":N3(m,b.value,b.defaultValue);break e;case"select":g=b.value,g!=null&&lm(m,!!b.multiple,g,!1)}}}var P1=!1;function A3(m,g,b){if(P1)return m(g,b);P1=!0;try{var C=m(g);return C}finally{if(P1=!1,(dm!==null||um!==null)&&(uy(),dm&&(g=dm,m=um,um=dm=null,_3(g),m)))for(g=0;g<m.length;g++)_3(m[g])}}function vh(m,g){var b=m.stateNode;if(b===null)return null;var C=b[Dt]||null;if(C===null)return null;b=C[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(C=!C.disabled)||(m=m.type,C=!(m==="button"||m==="input"||m==="select"||m==="textarea")),m=!C;break e;default:m=!1}if(m)return null;if(b&&typeof b!="function")throw Error(s(231,g,typeof b));return b}var Xo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),D1=!1;if(Xo)try{var wh={};Object.defineProperty(wh,"passive",{get:function(){D1=!0}}),window.addEventListener("test",wh,wh),window.removeEventListener("test",wh,wh)}catch{D1=!1}var mc=null,O1=null,S0=null;function T3(){if(S0)return S0;var m,g=O1,b=g.length,C,P="value"in mc?mc.value:mc.textContent,R=P.length;for(m=0;m<b&&g[m]===P[m];m++);var J=b-m;for(C=1;C<=J&&g[b-C]===P[R-C];C++);return S0=P.slice(m,1<C?1-C:void 0)}function _0(m){var g=m.keyCode;return"charCode"in m?(m=m.charCode,m===0&&g===13&&(m=13)):m=g,m===10&&(m=13),32<=m||m===13?m:0}function A0(){return!0}function k3(){return!1}function er(m){function g(b,C,P,R,J){this._reactName=b,this._targetInst=P,this.type=C,this.nativeEvent=R,this.target=J,this.currentTarget=null;for(var je in m)m.hasOwnProperty(je)&&(b=m[je],this[je]=b?b(R):R[je]);return this.isDefaultPrevented=(R.defaultPrevented!=null?R.defaultPrevented:R.returnValue===!1)?A0:k3,this.isPropagationStopped=k3,this}return f(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=A0)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=A0)},persist:function(){},isPersistent:A0}),g}var Ed={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(m){return m.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},T0=er(Ed),Nh=f({},Ed,{view:0,detail:0}),Dee=er(Nh),M1,I1,jh,k0=f({},Nh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:R1,button:0,buttons:0,relatedTarget:function(m){return m.relatedTarget===void 0?m.fromElement===m.srcElement?m.toElement:m.fromElement:m.relatedTarget},movementX:function(m){return"movementX"in m?m.movementX:(m!==jh&&(jh&&m.type==="mousemove"?(M1=m.screenX-jh.screenX,I1=m.screenY-jh.screenY):I1=M1=0,jh=m),M1)},movementY:function(m){return"movementY"in m?m.movementY:I1}}),E3=er(k0),Oee=f({},k0,{dataTransfer:0}),Mee=er(Oee),Iee=f({},Nh,{relatedTarget:0}),$1=er(Iee),$ee=f({},Ed,{animationName:0,elapsedTime:0,pseudoElement:0}),Ree=er($ee),zee=f({},Ed,{clipboardData:function(m){return"clipboardData"in m?m.clipboardData:window.clipboardData}}),Fee=er(zee),Uee=f({},Ed,{data:0}),L3=er(Uee),Bee={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hee={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qee={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wee(m){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(m):(m=qee[m])?!!g[m]:!1}function R1(){return Wee}var Gee=f({},Nh,{key:function(m){if(m.key){var g=Bee[m.key]||m.key;if(g!=="Unidentified")return g}return m.type==="keypress"?(m=_0(m),m===13?"Enter":String.fromCharCode(m)):m.type==="keydown"||m.type==="keyup"?Hee[m.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:R1,charCode:function(m){return m.type==="keypress"?_0(m):0},keyCode:function(m){return m.type==="keydown"||m.type==="keyup"?m.keyCode:0},which:function(m){return m.type==="keypress"?_0(m):m.type==="keydown"||m.type==="keyup"?m.keyCode:0}}),Vee=er(Gee),Yee=f({},k0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),P3=er(Yee),Qee=f({},Nh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:R1}),Kee=er(Qee),Xee=f({},Ed,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zee=er(Xee),Jee=f({},k0,{deltaX:function(m){return"deltaX"in m?m.deltaX:"wheelDeltaX"in m?-m.wheelDeltaX:0},deltaY:function(m){return"deltaY"in m?m.deltaY:"wheelDeltaY"in m?-m.wheelDeltaY:"wheelDelta"in m?-m.wheelDelta:0},deltaZ:0,deltaMode:0}),ete=er(Jee),tte=f({},Ed,{newState:0,oldState:0}),nte=er(tte),ate=[9,13,27,32],z1=Xo&&"CompositionEvent"in window,Ch=null;Xo&&"documentMode"in document&&(Ch=document.documentMode);var ste=Xo&&"TextEvent"in window&&!Ch,D3=Xo&&(!z1||Ch&&8<Ch&&11>=Ch),O3=" ",M3=!1;function I3(m,g){switch(m){case"keyup":return ate.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $3(m){return m=m.detail,typeof m=="object"&&"data"in m?m.data:null}var mm=!1;function rte(m,g){switch(m){case"compositionend":return $3(g);case"keypress":return g.which!==32?null:(M3=!0,O3);case"textInput":return m=g.data,m===O3&&M3?null:m;default:return null}}function ite(m,g){if(mm)return m==="compositionend"||!z1&&I3(m,g)?(m=T3(),S0=O1=mc=null,mm=!1,m):null;switch(m){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return D3&&g.locale!=="ko"?null:g.data;default:return null}}var ote={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function R3(m){var g=m&&m.nodeName&&m.nodeName.toLowerCase();return g==="input"?!!ote[m.type]:g==="textarea"}function z3(m,g,b,C){dm?um?um.push(C):um=[C]:dm=C,g=yy(g,"onChange"),0<g.length&&(b=new T0("onChange","change",null,b,C),m.push({event:b,listeners:g}))}var Sh=null,_h=null;function lte(m){wM(m,0)}function E0(m){var g=Ae(m);if(v3(g))return m}function F3(m,g){if(m==="change")return g}var U3=!1;if(Xo){var F1;if(Xo){var U1="oninput"in document;if(!U1){var B3=document.createElement("div");B3.setAttribute("oninput","return;"),U1=typeof B3.oninput=="function"}F1=U1}else F1=!1;U3=F1&&(!document.documentMode||9<document.documentMode)}function H3(){Sh&&(Sh.detachEvent("onpropertychange",q3),_h=Sh=null)}function q3(m){if(m.propertyName==="value"&&E0(_h)){var g=[];z3(g,_h,m,L1(m)),A3(lte,g)}}function cte(m,g,b){m==="focusin"?(H3(),Sh=g,_h=b,Sh.attachEvent("onpropertychange",q3)):m==="focusout"&&H3()}function dte(m){if(m==="selectionchange"||m==="keyup"||m==="keydown")return E0(_h)}function ute(m,g){if(m==="click")return E0(g)}function mte(m,g){if(m==="input"||m==="change")return E0(g)}function fte(m,g){return m===g&&(m!==0||1/m===1/g)||m!==m&&g!==g}var _r=typeof Object.is=="function"?Object.is:fte;function Ah(m,g){if(_r(m,g))return!0;if(typeof m!="object"||m===null||typeof g!="object"||g===null)return!1;var b=Object.keys(m),C=Object.keys(g);if(b.length!==C.length)return!1;for(C=0;C<b.length;C++){var P=b[C];if(!rt.call(g,P)||!_r(m[P],g[P]))return!1}return!0}function W3(m){for(;m&&m.firstChild;)m=m.firstChild;return m}function G3(m,g){var b=W3(m);m=0;for(var C;b;){if(b.nodeType===3){if(C=m+b.textContent.length,m<=g&&C>=g)return{node:b,offset:g-m};m=C}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=W3(b)}}function V3(m,g){return m&&g?m===g?!0:m&&m.nodeType===3?!1:g&&g.nodeType===3?V3(m,g.parentNode):"contains"in m?m.contains(g):m.compareDocumentPosition?!!(m.compareDocumentPosition(g)&16):!1:!1}function Y3(m){m=m!=null&&m.ownerDocument!=null&&m.ownerDocument.defaultView!=null?m.ownerDocument.defaultView:window;for(var g=j0(m.document);g instanceof m.HTMLIFrameElement;){try{var b=typeof g.contentWindow.location.href=="string"}catch{b=!1}if(b)m=g.contentWindow;else break;g=j0(m.document)}return g}function B1(m){var g=m&&m.nodeName&&m.nodeName.toLowerCase();return g&&(g==="input"&&(m.type==="text"||m.type==="search"||m.type==="tel"||m.type==="url"||m.type==="password")||g==="textarea"||m.contentEditable==="true")}var hte=Xo&&"documentMode"in document&&11>=document.documentMode,fm=null,H1=null,Th=null,q1=!1;function Q3(m,g,b){var C=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;q1||fm==null||fm!==j0(C)||(C=fm,"selectionStart"in C&&B1(C)?C={start:C.selectionStart,end:C.selectionEnd}:(C=(C.ownerDocument&&C.ownerDocument.defaultView||window).getSelection(),C={anchorNode:C.anchorNode,anchorOffset:C.anchorOffset,focusNode:C.focusNode,focusOffset:C.focusOffset}),Th&&Ah(Th,C)||(Th=C,C=yy(H1,"onSelect"),0<C.length&&(g=new T0("onSelect","select",null,g,b),m.push({event:g,listeners:C}),g.target=fm)))}function Ld(m,g){var b={};return b[m.toLowerCase()]=g.toLowerCase(),b["Webkit"+m]="webkit"+g,b["Moz"+m]="moz"+g,b}var hm={animationend:Ld("Animation","AnimationEnd"),animationiteration:Ld("Animation","AnimationIteration"),animationstart:Ld("Animation","AnimationStart"),transitionrun:Ld("Transition","TransitionRun"),transitionstart:Ld("Transition","TransitionStart"),transitioncancel:Ld("Transition","TransitionCancel"),transitionend:Ld("Transition","TransitionEnd")},W1={},K3={};Xo&&(K3=document.createElement("div").style,"AnimationEvent"in window||(delete hm.animationend.animation,delete hm.animationiteration.animation,delete hm.animationstart.animation),"TransitionEvent"in window||delete hm.transitionend.transition);function Pd(m){if(W1[m])return W1[m];if(!hm[m])return m;var g=hm[m],b;for(b in g)if(g.hasOwnProperty(b)&&b in K3)return W1[m]=g[b];return m}var X3=Pd("animationend"),Z3=Pd("animationiteration"),J3=Pd("animationstart"),gte=Pd("transitionrun"),pte=Pd("transitionstart"),xte=Pd("transitioncancel"),eO=Pd("transitionend"),tO=new Map,G1="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");G1.push("scrollEnd");function Ei(m,g){tO.set(m,g),Et(g,[m])}var L0=typeof reportError=="function"?reportError:function(m){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var g=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof m=="object"&&m!==null&&typeof m.message=="string"?String(m.message):String(m),error:m});if(!window.dispatchEvent(g))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",m);return}console.error(m)},Qr=[],gm=0,V1=0;function P0(){for(var m=gm,g=V1=gm=0;g<m;){var b=Qr[g];Qr[g++]=null;var C=Qr[g];Qr[g++]=null;var P=Qr[g];Qr[g++]=null;var R=Qr[g];if(Qr[g++]=null,C!==null&&P!==null){var J=C.pending;J===null?P.next=P:(P.next=J.next,J.next=P),C.pending=P}R!==0&&nO(b,P,R)}}function D0(m,g,b,C){Qr[gm++]=m,Qr[gm++]=g,Qr[gm++]=b,Qr[gm++]=C,V1|=C,m.lanes|=C,m=m.alternate,m!==null&&(m.lanes|=C)}function Y1(m,g,b,C){return D0(m,g,b,C),O0(m)}function Dd(m,g){return D0(m,null,null,g),O0(m)}function nO(m,g,b){m.lanes|=b;var C=m.alternate;C!==null&&(C.lanes|=b);for(var P=!1,R=m.return;R!==null;)R.childLanes|=b,C=R.alternate,C!==null&&(C.childLanes|=b),R.tag===22&&(m=R.stateNode,m===null||m._visibility&1||(P=!0)),m=R,R=R.return;return m.tag===3?(R=m.stateNode,P&&g!==null&&(P=31-Ze(b),m=R.hiddenUpdates,C=m[P],C===null?m[P]=[g]:C.push(g),g.lane=b|536870912),R):null}function O0(m){if(50<Kh)throw Kh=0,aS=null,Error(s(185));for(var g=m.return;g!==null;)m=g,g=m.return;return m.tag===3?m.stateNode:null}var pm={};function yte(m,g,b,C){this.tag=m,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ar(m,g,b,C){return new yte(m,g,b,C)}function Q1(m){return m=m.prototype,!(!m||!m.isReactComponent)}function Zo(m,g){var b=m.alternate;return b===null?(b=Ar(m.tag,g,m.key,m.mode),b.elementType=m.elementType,b.type=m.type,b.stateNode=m.stateNode,b.alternate=m,m.alternate=b):(b.pendingProps=g,b.type=m.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=m.flags&65011712,b.childLanes=m.childLanes,b.lanes=m.lanes,b.child=m.child,b.memoizedProps=m.memoizedProps,b.memoizedState=m.memoizedState,b.updateQueue=m.updateQueue,g=m.dependencies,b.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},b.sibling=m.sibling,b.index=m.index,b.ref=m.ref,b.refCleanup=m.refCleanup,b}function aO(m,g){m.flags&=65011714;var b=m.alternate;return b===null?(m.childLanes=0,m.lanes=g,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=b.childLanes,m.lanes=b.lanes,m.child=b.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=b.memoizedProps,m.memoizedState=b.memoizedState,m.updateQueue=b.updateQueue,m.type=b.type,g=b.dependencies,m.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),m}function M0(m,g,b,C,P,R){var J=0;if(C=m,typeof m=="function")Q1(m)&&(J=1);else if(typeof m=="string")J=jne(m,b,Ne.current)?26:m==="html"||m==="head"||m==="body"?27:5;else e:switch(m){case M:return m=Ar(31,b,g,P),m.elementType=M,m.lanes=R,m;case N:return Od(b.children,P,R,g);case v:J=8,P|=24;break;case j:return m=Ar(12,b,g,P|2),m.elementType=j,m.lanes=R,m;case E:return m=Ar(13,b,g,P),m.elementType=E,m.lanes=R,m;case T:return m=Ar(19,b,g,P),m.elementType=T,m.lanes=R,m;default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case S:J=10;break e;case w:J=9;break e;case _:J=11;break e;case A:J=14;break e;case L:J=16,C=null;break e}J=29,b=Error(s(130,m===null?"null":typeof m,"")),C=null}return g=Ar(J,b,g,P),g.elementType=m,g.type=C,g.lanes=R,g}function Od(m,g,b,C){return m=Ar(7,m,C,g),m.lanes=b,m}function K1(m,g,b){return m=Ar(6,m,null,g),m.lanes=b,m}function sO(m){var g=Ar(18,null,null,0);return g.stateNode=m,g}function X1(m,g,b){return g=Ar(4,m.children!==null?m.children:[],m.key,g),g.lanes=b,g.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},g}var rO=new WeakMap;function Kr(m,g){if(typeof m=="object"&&m!==null){var b=rO.get(m);return b!==void 0?b:(g={value:m,source:g,stack:Ie(g)},rO.set(m,g),g)}return{value:m,source:g,stack:Ie(g)}}var xm=[],ym=0,I0=null,kh=0,Xr=[],Zr=0,fc=null,to=1,no="";function Jo(m,g){xm[ym++]=kh,xm[ym++]=I0,I0=m,kh=g}function iO(m,g,b){Xr[Zr++]=to,Xr[Zr++]=no,Xr[Zr++]=fc,fc=m;var C=to;m=no;var P=32-Ze(C)-1;C&=~(1<<P),b+=1;var R=32-Ze(g)+P;if(30<R){var J=P-P%5;R=(C&(1<<J)-1).toString(32),C>>=J,P-=J,to=1<<32-Ze(g)+P|b<<P|C,no=R+m}else to=1<<R|b<<P|C,no=m}function Z1(m){m.return!==null&&(Jo(m,1),iO(m,1,0))}function J1(m){for(;m===I0;)I0=xm[--ym],xm[ym]=null,kh=xm[--ym],xm[ym]=null;for(;m===fc;)fc=Xr[--Zr],Xr[Zr]=null,no=Xr[--Zr],Xr[Zr]=null,to=Xr[--Zr],Xr[Zr]=null}function oO(m,g){Xr[Zr++]=to,Xr[Zr++]=no,Xr[Zr++]=fc,to=g.id,no=g.overflow,fc=m}var ws=null,Jn=null,yn=!1,hc=null,Jr=!1,eC=Error(s(519));function gc(m){var g=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Eh(Kr(g,m)),eC}function lO(m){var g=m.stateNode,b=m.type,C=m.memoizedProps;switch(g[kt]=m,g[Dt]=C,b){case"dialog":mn("cancel",g),mn("close",g);break;case"iframe":case"object":case"embed":mn("load",g);break;case"video":case"audio":for(b=0;b<Zh.length;b++)mn(Zh[b],g);break;case"source":mn("error",g);break;case"img":case"image":case"link":mn("error",g),mn("load",g);break;case"details":mn("toggle",g);break;case"input":mn("invalid",g),w3(g,C.value,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name,!0);break;case"select":mn("invalid",g);break;case"textarea":mn("invalid",g),j3(g,C.value,C.defaultValue,C.children)}b=C.children,typeof b!="string"&&typeof b!="number"&&typeof b!="bigint"||g.textContent===""+b||C.suppressHydrationWarning===!0||SM(g.textContent,b)?(C.popover!=null&&(mn("beforetoggle",g),mn("toggle",g)),C.onScroll!=null&&mn("scroll",g),C.onScrollEnd!=null&&mn("scrollend",g),C.onClick!=null&&(g.onclick=Ko),g=!0):g=!1,g||gc(m,!0)}function cO(m){for(ws=m.return;ws;)switch(ws.tag){case 5:case 31:case 13:Jr=!1;return;case 27:case 3:Jr=!0;return;default:ws=ws.return}}function bm(m){if(m!==ws)return!1;if(!yn)return cO(m),yn=!0,!1;var g=m.tag,b;if((b=g!==3&&g!==27)&&((b=g===5)&&(b=m.type,b=!(b!=="form"&&b!=="button")||yS(m.type,m.memoizedProps)),b=!b),b&&Jn&&gc(m),cO(m),g===13){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));Jn=OM(m)}else if(g===31){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));Jn=OM(m)}else g===27?(g=Jn,kc(m.type)?(m=jS,jS=null,Jn=m):Jn=g):Jn=ws?ti(m.stateNode.nextSibling):null;return!0}function Md(){Jn=ws=null,yn=!1}function tC(){var m=hc;return m!==null&&(sr===null?sr=m:sr.push.apply(sr,m),hc=null),m}function Eh(m){hc===null?hc=[m]:hc.push(m)}var nC=te(null),Id=null,el=null;function pc(m,g,b){ye(nC,g._currentValue),g._currentValue=b}function tl(m){m._currentValue=nC.current,ae(nC)}function aC(m,g,b){for(;m!==null;){var C=m.alternate;if((m.childLanes&g)!==g?(m.childLanes|=g,C!==null&&(C.childLanes|=g)):C!==null&&(C.childLanes&g)!==g&&(C.childLanes|=g),m===b)break;m=m.return}}function sC(m,g,b,C){var P=m.child;for(P!==null&&(P.return=m);P!==null;){var R=P.dependencies;if(R!==null){var J=P.child;R=R.firstContext;e:for(;R!==null;){var je=R;R=P;for(var qe=0;qe<g.length;qe++)if(je.context===g[qe]){R.lanes|=b,je=R.alternate,je!==null&&(je.lanes|=b),aC(R.return,b,m),C||(J=null);break e}R=je.next}}else if(P.tag===18){if(J=P.return,J===null)throw Error(s(341));J.lanes|=b,R=J.alternate,R!==null&&(R.lanes|=b),aC(J,b,m),J=null}else J=P.child;if(J!==null)J.return=P;else for(J=P;J!==null;){if(J===m){J=null;break}if(P=J.sibling,P!==null){P.return=J.return,J=P;break}J=J.return}P=J}}function vm(m,g,b,C){m=null;for(var P=g,R=!1;P!==null;){if(!R){if((P.flags&524288)!==0)R=!0;else if((P.flags&262144)!==0)break}if(P.tag===10){var J=P.alternate;if(J===null)throw Error(s(387));if(J=J.memoizedProps,J!==null){var je=P.type;_r(P.pendingProps.value,J.value)||(m!==null?m.push(je):m=[je])}}else if(P===ne.current){if(J=P.alternate,J===null)throw Error(s(387));J.memoizedState.memoizedState!==P.memoizedState.memoizedState&&(m!==null?m.push(ag):m=[ag])}P=P.return}m!==null&&sC(g,m,b,C),g.flags|=262144}function $0(m){for(m=m.firstContext;m!==null;){if(!_r(m.context._currentValue,m.memoizedValue))return!0;m=m.next}return!1}function $d(m){Id=m,el=null,m=m.dependencies,m!==null&&(m.firstContext=null)}function Ns(m){return dO(Id,m)}function R0(m,g){return Id===null&&$d(m),dO(m,g)}function dO(m,g){var b=g._currentValue;if(g={context:g,memoizedValue:b,next:null},el===null){if(m===null)throw Error(s(308));el=g,m.dependencies={lanes:0,firstContext:g},m.flags|=524288}else el=el.next=g;return b}var bte=typeof AbortController<"u"?AbortController:function(){var m=[],g=this.signal={aborted:!1,addEventListener:function(b,C){m.push(C)}};this.abort=function(){g.aborted=!0,m.forEach(function(b){return b()})}},vte=e.unstable_scheduleCallback,wte=e.unstable_NormalPriority,Ra={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function rC(){return{controller:new bte,data:new Map,refCount:0}}function Lh(m){m.refCount--,m.refCount===0&&vte(wte,function(){m.controller.abort()})}var Ph=null,iC=0,wm=0,Nm=null;function Nte(m,g){if(Ph===null){var b=Ph=[];iC=0,wm=cS(),Nm={status:"pending",value:void 0,then:function(C){b.push(C)}}}return iC++,g.then(uO,uO),g}function uO(){if(--iC===0&&Ph!==null){Nm!==null&&(Nm.status="fulfilled");var m=Ph;Ph=null,wm=0,Nm=null;for(var g=0;g<m.length;g++)(0,m[g])()}}function jte(m,g){var b=[],C={status:"pending",value:null,reason:null,then:function(P){b.push(P)}};return m.then(function(){C.status="fulfilled",C.value=g;for(var P=0;P<b.length;P++)(0,b[P])(g)},function(P){for(C.status="rejected",C.reason=P,P=0;P<b.length;P++)(0,b[P])(void 0)}),C}var mO=V.S;V.S=function(m,g){Q5=Ce(),typeof g=="object"&&g!==null&&typeof g.then=="function"&&Nte(m,g),mO!==null&&mO(m,g)};var Rd=te(null);function oC(){var m=Rd.current;return m!==null?m:qn.pooledCache}function z0(m,g){g===null?ye(Rd,Rd.current):ye(Rd,g.pool)}function fO(){var m=oC();return m===null?null:{parent:Ra._currentValue,pool:m}}var jm=Error(s(460)),lC=Error(s(474)),F0=Error(s(542)),U0={then:function(){}};function hO(m){return m=m.status,m==="fulfilled"||m==="rejected"}function gO(m,g,b){switch(b=m[b],b===void 0?m.push(g):b!==g&&(g.then(Ko,Ko),g=b),g.status){case"fulfilled":return g.value;case"rejected":throw m=g.reason,xO(m),m;default:if(typeof g.status=="string")g.then(Ko,Ko);else{if(m=qn,m!==null&&100<m.shellSuspendCounter)throw Error(s(482));m=g,m.status="pending",m.then(function(C){if(g.status==="pending"){var P=g;P.status="fulfilled",P.value=C}},function(C){if(g.status==="pending"){var P=g;P.status="rejected",P.reason=C}})}switch(g.status){case"fulfilled":return g.value;case"rejected":throw m=g.reason,xO(m),m}throw Fd=g,jm}}function zd(m){try{var g=m._init;return g(m._payload)}catch(b){throw b!==null&&typeof b=="object"&&typeof b.then=="function"?(Fd=b,jm):b}}var Fd=null;function pO(){if(Fd===null)throw Error(s(459));var m=Fd;return Fd=null,m}function xO(m){if(m===jm||m===F0)throw Error(s(483))}var Cm=null,Dh=0;function B0(m){var g=Dh;return Dh+=1,Cm===null&&(Cm=[]),gO(Cm,m,g)}function Oh(m,g){g=g.props.ref,m.ref=g!==void 0?g:null}function H0(m,g){throw g.$$typeof===p?Error(s(525)):(m=Object.prototype.toString.call(g),Error(s(31,m==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":m)))}function yO(m){function g(et,Ve){if(m){var at=et.deletions;at===null?(et.deletions=[Ve],et.flags|=16):at.push(Ve)}}function b(et,Ve){if(!m)return null;for(;Ve!==null;)g(et,Ve),Ve=Ve.sibling;return null}function C(et){for(var Ve=new Map;et!==null;)et.key!==null?Ve.set(et.key,et):Ve.set(et.index,et),et=et.sibling;return Ve}function P(et,Ve){return et=Zo(et,Ve),et.index=0,et.sibling=null,et}function R(et,Ve,at){return et.index=at,m?(at=et.alternate,at!==null?(at=at.index,at<Ve?(et.flags|=67108866,Ve):at):(et.flags|=67108866,Ve)):(et.flags|=1048576,Ve)}function J(et){return m&&et.alternate===null&&(et.flags|=67108866),et}function je(et,Ve,at,pt){return Ve===null||Ve.tag!==6?(Ve=K1(at,et.mode,pt),Ve.return=et,Ve):(Ve=P(Ve,at),Ve.return=et,Ve)}function qe(et,Ve,at,pt){var Gt=at.type;return Gt===N?ft(et,Ve,at.props.children,pt,at.key):Ve!==null&&(Ve.elementType===Gt||typeof Gt=="object"&&Gt!==null&&Gt.$$typeof===L&&zd(Gt)===Ve.type)?(Ve=P(Ve,at.props),Oh(Ve,at),Ve.return=et,Ve):(Ve=M0(at.type,at.key,at.props,null,et.mode,pt),Oh(Ve,at),Ve.return=et,Ve)}function st(et,Ve,at,pt){return Ve===null||Ve.tag!==4||Ve.stateNode.containerInfo!==at.containerInfo||Ve.stateNode.implementation!==at.implementation?(Ve=X1(at,et.mode,pt),Ve.return=et,Ve):(Ve=P(Ve,at.children||[]),Ve.return=et,Ve)}function ft(et,Ve,at,pt,Gt){return Ve===null||Ve.tag!==7?(Ve=Od(at,et.mode,pt,Gt),Ve.return=et,Ve):(Ve=P(Ve,at),Ve.return=et,Ve)}function bt(et,Ve,at){if(typeof Ve=="string"&&Ve!==""||typeof Ve=="number"||typeof Ve=="bigint")return Ve=K1(""+Ve,et.mode,at),Ve.return=et,Ve;if(typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case x:return at=M0(Ve.type,Ve.key,Ve.props,null,et.mode,at),Oh(at,Ve),at.return=et,at;case y:return Ve=X1(Ve,et.mode,at),Ve.return=et,Ve;case L:return Ve=zd(Ve),bt(et,Ve,at)}if(U(Ve)||D(Ve))return Ve=Od(Ve,et.mode,at,null),Ve.return=et,Ve;if(typeof Ve.then=="function")return bt(et,B0(Ve),at);if(Ve.$$typeof===S)return bt(et,R0(et,Ve),at);H0(et,Ve)}return null}function ot(et,Ve,at,pt){var Gt=Ve!==null?Ve.key:null;if(typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint")return Gt!==null?null:je(et,Ve,""+at,pt);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case x:return at.key===Gt?qe(et,Ve,at,pt):null;case y:return at.key===Gt?st(et,Ve,at,pt):null;case L:return at=zd(at),ot(et,Ve,at,pt)}if(U(at)||D(at))return Gt!==null?null:ft(et,Ve,at,pt,null);if(typeof at.then=="function")return ot(et,Ve,B0(at),pt);if(at.$$typeof===S)return ot(et,Ve,R0(et,at),pt);H0(et,at)}return null}function ut(et,Ve,at,pt,Gt){if(typeof pt=="string"&&pt!==""||typeof pt=="number"||typeof pt=="bigint")return et=et.get(at)||null,je(Ve,et,""+pt,Gt);if(typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case x:return et=et.get(pt.key===null?at:pt.key)||null,qe(Ve,et,pt,Gt);case y:return et=et.get(pt.key===null?at:pt.key)||null,st(Ve,et,pt,Gt);case L:return pt=zd(pt),ut(et,Ve,at,pt,Gt)}if(U(pt)||D(pt))return et=et.get(at)||null,ft(Ve,et,pt,Gt,null);if(typeof pt.then=="function")return ut(et,Ve,at,B0(pt),Gt);if(pt.$$typeof===S)return ut(et,Ve,at,R0(Ve,pt),Gt);H0(Ve,pt)}return null}function Rt(et,Ve,at,pt){for(var Gt=null,Cn=null,Bt=Ve,ln=Ve=0,gn=null;Bt!==null&&ln<at.length;ln++){Bt.index>ln?(gn=Bt,Bt=null):gn=Bt.sibling;var Sn=ot(et,Bt,at[ln],pt);if(Sn===null){Bt===null&&(Bt=gn);break}m&&Bt&&Sn.alternate===null&&g(et,Bt),Ve=R(Sn,Ve,ln),Cn===null?Gt=Sn:Cn.sibling=Sn,Cn=Sn,Bt=gn}if(ln===at.length)return b(et,Bt),yn&&Jo(et,ln),Gt;if(Bt===null){for(;ln<at.length;ln++)Bt=bt(et,at[ln],pt),Bt!==null&&(Ve=R(Bt,Ve,ln),Cn===null?Gt=Bt:Cn.sibling=Bt,Cn=Bt);return yn&&Jo(et,ln),Gt}for(Bt=C(Bt);ln<at.length;ln++)gn=ut(Bt,et,ln,at[ln],pt),gn!==null&&(m&&gn.alternate!==null&&Bt.delete(gn.key===null?ln:gn.key),Ve=R(gn,Ve,ln),Cn===null?Gt=gn:Cn.sibling=gn,Cn=gn);return m&&Bt.forEach(function(Oc){return g(et,Oc)}),yn&&Jo(et,ln),Gt}function Yt(et,Ve,at,pt){if(at==null)throw Error(s(151));for(var Gt=null,Cn=null,Bt=Ve,ln=Ve=0,gn=null,Sn=at.next();Bt!==null&&!Sn.done;ln++,Sn=at.next()){Bt.index>ln?(gn=Bt,Bt=null):gn=Bt.sibling;var Oc=ot(et,Bt,Sn.value,pt);if(Oc===null){Bt===null&&(Bt=gn);break}m&&Bt&&Oc.alternate===null&&g(et,Bt),Ve=R(Oc,Ve,ln),Cn===null?Gt=Oc:Cn.sibling=Oc,Cn=Oc,Bt=gn}if(Sn.done)return b(et,Bt),yn&&Jo(et,ln),Gt;if(Bt===null){for(;!Sn.done;ln++,Sn=at.next())Sn=bt(et,Sn.value,pt),Sn!==null&&(Ve=R(Sn,Ve,ln),Cn===null?Gt=Sn:Cn.sibling=Sn,Cn=Sn);return yn&&Jo(et,ln),Gt}for(Bt=C(Bt);!Sn.done;ln++,Sn=at.next())Sn=ut(Bt,et,ln,Sn.value,pt),Sn!==null&&(m&&Sn.alternate!==null&&Bt.delete(Sn.key===null?ln:Sn.key),Ve=R(Sn,Ve,ln),Cn===null?Gt=Sn:Cn.sibling=Sn,Cn=Sn);return m&&Bt.forEach(function(One){return g(et,One)}),yn&&Jo(et,ln),Gt}function Un(et,Ve,at,pt){if(typeof at=="object"&&at!==null&&at.type===N&&at.key===null&&(at=at.props.children),typeof at=="object"&&at!==null){switch(at.$$typeof){case x:e:{for(var Gt=at.key;Ve!==null;){if(Ve.key===Gt){if(Gt=at.type,Gt===N){if(Ve.tag===7){b(et,Ve.sibling),pt=P(Ve,at.props.children),pt.return=et,et=pt;break e}}else if(Ve.elementType===Gt||typeof Gt=="object"&&Gt!==null&&Gt.$$typeof===L&&zd(Gt)===Ve.type){b(et,Ve.sibling),pt=P(Ve,at.props),Oh(pt,at),pt.return=et,et=pt;break e}b(et,Ve);break}else g(et,Ve);Ve=Ve.sibling}at.type===N?(pt=Od(at.props.children,et.mode,pt,at.key),pt.return=et,et=pt):(pt=M0(at.type,at.key,at.props,null,et.mode,pt),Oh(pt,at),pt.return=et,et=pt)}return J(et);case y:e:{for(Gt=at.key;Ve!==null;){if(Ve.key===Gt)if(Ve.tag===4&&Ve.stateNode.containerInfo===at.containerInfo&&Ve.stateNode.implementation===at.implementation){b(et,Ve.sibling),pt=P(Ve,at.children||[]),pt.return=et,et=pt;break e}else{b(et,Ve);break}else g(et,Ve);Ve=Ve.sibling}pt=X1(at,et.mode,pt),pt.return=et,et=pt}return J(et);case L:return at=zd(at),Un(et,Ve,at,pt)}if(U(at))return Rt(et,Ve,at,pt);if(D(at)){if(Gt=D(at),typeof Gt!="function")throw Error(s(150));return at=Gt.call(at),Yt(et,Ve,at,pt)}if(typeof at.then=="function")return Un(et,Ve,B0(at),pt);if(at.$$typeof===S)return Un(et,Ve,R0(et,at),pt);H0(et,at)}return typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint"?(at=""+at,Ve!==null&&Ve.tag===6?(b(et,Ve.sibling),pt=P(Ve,at),pt.return=et,et=pt):(b(et,Ve),pt=K1(at,et.mode,pt),pt.return=et,et=pt),J(et)):b(et,Ve)}return function(et,Ve,at,pt){try{Dh=0;var Gt=Un(et,Ve,at,pt);return Cm=null,Gt}catch(Bt){if(Bt===jm||Bt===F0)throw Bt;var Cn=Ar(29,Bt,null,et.mode);return Cn.lanes=pt,Cn.return=et,Cn}}}var Ud=yO(!0),bO=yO(!1),xc=!1;function cC(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function dC(m,g){m=m.updateQueue,g.updateQueue===m&&(g.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,callbacks:null})}function yc(m){return{lane:m,tag:0,payload:null,callback:null,next:null}}function bc(m,g,b){var C=m.updateQueue;if(C===null)return null;if(C=C.shared,(An&2)!==0){var P=C.pending;return P===null?g.next=g:(g.next=P.next,P.next=g),C.pending=g,g=O0(m),nO(m,null,b),g}return D0(m,C,g,b),O0(m)}function Mh(m,g,b){if(g=g.updateQueue,g!==null&&(g=g.shared,(b&4194048)!==0)){var C=g.lanes;C&=m.pendingLanes,b|=C,g.lanes=b,Q(m,b)}}function uC(m,g){var b=m.updateQueue,C=m.alternate;if(C!==null&&(C=C.updateQueue,b===C)){var P=null,R=null;if(b=b.firstBaseUpdate,b!==null){do{var J={lane:b.lane,tag:b.tag,payload:b.payload,callback:null,next:null};R===null?P=R=J:R=R.next=J,b=b.next}while(b!==null);R===null?P=R=g:R=R.next=g}else P=R=g;b={baseState:C.baseState,firstBaseUpdate:P,lastBaseUpdate:R,shared:C.shared,callbacks:C.callbacks},m.updateQueue=b;return}m=b.lastBaseUpdate,m===null?b.firstBaseUpdate=g:m.next=g,b.lastBaseUpdate=g}var mC=!1;function Ih(){if(mC){var m=Nm;if(m!==null)throw m}}function $h(m,g,b,C){mC=!1;var P=m.updateQueue;xc=!1;var R=P.firstBaseUpdate,J=P.lastBaseUpdate,je=P.shared.pending;if(je!==null){P.shared.pending=null;var qe=je,st=qe.next;qe.next=null,J===null?R=st:J.next=st,J=qe;var ft=m.alternate;ft!==null&&(ft=ft.updateQueue,je=ft.lastBaseUpdate,je!==J&&(je===null?ft.firstBaseUpdate=st:je.next=st,ft.lastBaseUpdate=qe))}if(R!==null){var bt=P.baseState;J=0,ft=st=qe=null,je=R;do{var ot=je.lane&-536870913,ut=ot!==je.lane;if(ut?(hn&ot)===ot:(C&ot)===ot){ot!==0&&ot===wm&&(mC=!0),ft!==null&&(ft=ft.next={lane:0,tag:je.tag,payload:je.payload,callback:null,next:null});e:{var Rt=m,Yt=je;ot=g;var Un=b;switch(Yt.tag){case 1:if(Rt=Yt.payload,typeof Rt=="function"){bt=Rt.call(Un,bt,ot);break e}bt=Rt;break e;case 3:Rt.flags=Rt.flags&-65537|128;case 0:if(Rt=Yt.payload,ot=typeof Rt=="function"?Rt.call(Un,bt,ot):Rt,ot==null)break e;bt=f({},bt,ot);break e;case 2:xc=!0}}ot=je.callback,ot!==null&&(m.flags|=64,ut&&(m.flags|=8192),ut=P.callbacks,ut===null?P.callbacks=[ot]:ut.push(ot))}else ut={lane:ot,tag:je.tag,payload:je.payload,callback:je.callback,next:null},ft===null?(st=ft=ut,qe=bt):ft=ft.next=ut,J|=ot;if(je=je.next,je===null){if(je=P.shared.pending,je===null)break;ut=je,je=ut.next,ut.next=null,P.lastBaseUpdate=ut,P.shared.pending=null}}while(!0);ft===null&&(qe=bt),P.baseState=qe,P.firstBaseUpdate=st,P.lastBaseUpdate=ft,R===null&&(P.shared.lanes=0),Cc|=J,m.lanes=J,m.memoizedState=bt}}function vO(m,g){if(typeof m!="function")throw Error(s(191,m));m.call(g)}function wO(m,g){var b=m.callbacks;if(b!==null)for(m.callbacks=null,m=0;m<b.length;m++)vO(b[m],g)}var Sm=te(null),q0=te(0);function NO(m,g){m=dl,ye(q0,m),ye(Sm,g),dl=m|g.baseLanes}function fC(){ye(q0,dl),ye(Sm,Sm.current)}function hC(){dl=q0.current,ae(Sm),ae(q0)}var Tr=te(null),ei=null;function vc(m){var g=m.alternate;ye(La,La.current&1),ye(Tr,m),ei===null&&(g===null||Sm.current!==null||g.memoizedState!==null)&&(ei=m)}function gC(m){ye(La,La.current),ye(Tr,m),ei===null&&(ei=m)}function jO(m){m.tag===22?(ye(La,La.current),ye(Tr,m),ei===null&&(ei=m)):wc()}function wc(){ye(La,La.current),ye(Tr,Tr.current)}function kr(m){ae(Tr),ei===m&&(ei=null),ae(La)}var La=te(0);function W0(m){for(var g=m;g!==null;){if(g.tag===13){var b=g.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||wS(b)||NS(b)))return g}else if(g.tag===19&&(g.memoizedProps.revealOrder==="forwards"||g.memoizedProps.revealOrder==="backwards"||g.memoizedProps.revealOrder==="unstable_legacy-backwards"||g.memoizedProps.revealOrder==="together")){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===m)break;for(;g.sibling===null;){if(g.return===null||g.return===m)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var nl=0,an=null,zn=null,za=null,G0=!1,_m=!1,Bd=!1,V0=0,Rh=0,Am=null,Cte=0;function va(){throw Error(s(321))}function pC(m,g){if(g===null)return!1;for(var b=0;b<g.length&&b<m.length;b++)if(!_r(m[b],g[b]))return!1;return!0}function xC(m,g,b,C,P,R){return nl=R,an=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,V.H=m===null||m.memoizedState===null?i5:PC,Bd=!1,R=b(C,P),Bd=!1,_m&&(R=SO(g,b,C,P)),CO(m),R}function CO(m){V.H=Uh;var g=zn!==null&&zn.next!==null;if(nl=0,za=zn=an=null,G0=!1,Rh=0,Am=null,g)throw Error(s(300));m===null||Fa||(m=m.dependencies,m!==null&&$0(m)&&(Fa=!0))}function SO(m,g,b,C){an=m;var P=0;do{if(_m&&(Am=null),Rh=0,_m=!1,25<=P)throw Error(s(301));if(P+=1,za=zn=null,m.updateQueue!=null){var R=m.updateQueue;R.lastEffect=null,R.events=null,R.stores=null,R.memoCache!=null&&(R.memoCache.index=0)}V.H=o5,R=g(b,C)}while(_m);return R}function Ste(){var m=V.H,g=m.useState()[0];return g=typeof g.then=="function"?zh(g):g,m=m.useState()[0],(zn!==null?zn.memoizedState:null)!==m&&(an.flags|=1024),g}function yC(){var m=V0!==0;return V0=0,m}function bC(m,g,b){g.updateQueue=m.updateQueue,g.flags&=-2053,m.lanes&=~b}function vC(m){if(G0){for(m=m.memoizedState;m!==null;){var g=m.queue;g!==null&&(g.pending=null),m=m.next}G0=!1}nl=0,za=zn=an=null,_m=!1,Rh=V0=0,Am=null}function Hs(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return za===null?an.memoizedState=za=m:za=za.next=m,za}function Pa(){if(zn===null){var m=an.alternate;m=m!==null?m.memoizedState:null}else m=zn.next;var g=za===null?an.memoizedState:za.next;if(g!==null)za=g,zn=m;else{if(m===null)throw an.alternate===null?Error(s(467)):Error(s(310));zn=m,m={memoizedState:zn.memoizedState,baseState:zn.baseState,baseQueue:zn.baseQueue,queue:zn.queue,next:null},za===null?an.memoizedState=za=m:za=za.next=m}return za}function Y0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function zh(m){var g=Rh;return Rh+=1,Am===null&&(Am=[]),m=gO(Am,m,g),g=an,(za===null?g.memoizedState:za.next)===null&&(g=g.alternate,V.H=g===null||g.memoizedState===null?i5:PC),m}function Q0(m){if(m!==null&&typeof m=="object"){if(typeof m.then=="function")return zh(m);if(m.$$typeof===S)return Ns(m)}throw Error(s(438,String(m)))}function wC(m){var g=null,b=an.updateQueue;if(b!==null&&(g=b.memoCache),g==null){var C=an.alternate;C!==null&&(C=C.updateQueue,C!==null&&(C=C.memoCache,C!=null&&(g={data:C.data.map(function(P){return P.slice()}),index:0})))}if(g==null&&(g={data:[],index:0}),b===null&&(b=Y0(),an.updateQueue=b),b.memoCache=g,b=g.data[g.index],b===void 0)for(b=g.data[g.index]=Array(m),C=0;C<m;C++)b[C]=F;return g.index++,b}function al(m,g){return typeof g=="function"?g(m):g}function K0(m){var g=Pa();return NC(g,zn,m)}function NC(m,g,b){var C=m.queue;if(C===null)throw Error(s(311));C.lastRenderedReducer=b;var P=m.baseQueue,R=C.pending;if(R!==null){if(P!==null){var J=P.next;P.next=R.next,R.next=J}g.baseQueue=P=R,C.pending=null}if(R=m.baseState,P===null)m.memoizedState=R;else{g=P.next;var je=J=null,qe=null,st=g,ft=!1;do{var bt=st.lane&-536870913;if(bt!==st.lane?(hn&bt)===bt:(nl&bt)===bt){var ot=st.revertLane;if(ot===0)qe!==null&&(qe=qe.next={lane:0,revertLane:0,gesture:null,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null}),bt===wm&&(ft=!0);else if((nl&ot)===ot){st=st.next,ot===wm&&(ft=!0);continue}else bt={lane:0,revertLane:st.revertLane,gesture:null,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null},qe===null?(je=qe=bt,J=R):qe=qe.next=bt,an.lanes|=ot,Cc|=ot;bt=st.action,Bd&&b(R,bt),R=st.hasEagerState?st.eagerState:b(R,bt)}else ot={lane:bt,revertLane:st.revertLane,gesture:st.gesture,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null},qe===null?(je=qe=ot,J=R):qe=qe.next=ot,an.lanes|=bt,Cc|=bt;st=st.next}while(st!==null&&st!==g);if(qe===null?J=R:qe.next=je,!_r(R,m.memoizedState)&&(Fa=!0,ft&&(b=Nm,b!==null)))throw b;m.memoizedState=R,m.baseState=J,m.baseQueue=qe,C.lastRenderedState=R}return P===null&&(C.lanes=0),[m.memoizedState,C.dispatch]}function jC(m){var g=Pa(),b=g.queue;if(b===null)throw Error(s(311));b.lastRenderedReducer=m;var C=b.dispatch,P=b.pending,R=g.memoizedState;if(P!==null){b.pending=null;var J=P=P.next;do R=m(R,J.action),J=J.next;while(J!==P);_r(R,g.memoizedState)||(Fa=!0),g.memoizedState=R,g.baseQueue===null&&(g.baseState=R),b.lastRenderedState=R}return[R,C]}function _O(m,g,b){var C=an,P=Pa(),R=yn;if(R){if(b===void 0)throw Error(s(407));b=b()}else b=g();var J=!_r((zn||P).memoizedState,b);if(J&&(P.memoizedState=b,Fa=!0),P=P.queue,_C(kO.bind(null,C,P,m),[m]),P.getSnapshot!==g||J||za!==null&&za.memoizedState.tag&1){if(C.flags|=2048,Tm(9,{destroy:void 0},TO.bind(null,C,P,b,g),null),qn===null)throw Error(s(349));R||(nl&127)!==0||AO(C,g,b)}return b}function AO(m,g,b){m.flags|=16384,m={getSnapshot:g,value:b},g=an.updateQueue,g===null?(g=Y0(),an.updateQueue=g,g.stores=[m]):(b=g.stores,b===null?g.stores=[m]:b.push(m))}function TO(m,g,b,C){g.value=b,g.getSnapshot=C,EO(g)&&LO(m)}function kO(m,g,b){return b(function(){EO(g)&&LO(m)})}function EO(m){var g=m.getSnapshot;m=m.value;try{var b=g();return!_r(m,b)}catch{return!0}}function LO(m){var g=Dd(m,2);g!==null&&rr(g,m,2)}function CC(m){var g=Hs();if(typeof m=="function"){var b=m;if(m=b(),Bd){Xe(!0);try{b()}finally{Xe(!1)}}}return g.memoizedState=g.baseState=m,g.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:al,lastRenderedState:m},g}function PO(m,g,b,C){return m.baseState=b,NC(m,zn,typeof C=="function"?C:al)}function _te(m,g,b,C,P){if(J0(m))throw Error(s(485));if(m=g.action,m!==null){var R={payload:P,action:m,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(J){R.listeners.push(J)}};V.T!==null?b(!0):R.isTransition=!1,C(R),b=g.pending,b===null?(R.next=g.pending=R,DO(g,R)):(R.next=b.next,g.pending=b.next=R)}}function DO(m,g){var b=g.action,C=g.payload,P=m.state;if(g.isTransition){var R=V.T,J={};V.T=J;try{var je=b(P,C),qe=V.S;qe!==null&&qe(J,je),OO(m,g,je)}catch(st){SC(m,g,st)}finally{R!==null&&J.types!==null&&(R.types=J.types),V.T=R}}else try{R=b(P,C),OO(m,g,R)}catch(st){SC(m,g,st)}}function OO(m,g,b){b!==null&&typeof b=="object"&&typeof b.then=="function"?b.then(function(C){MO(m,g,C)},function(C){return SC(m,g,C)}):MO(m,g,b)}function MO(m,g,b){g.status="fulfilled",g.value=b,IO(g),m.state=b,g=m.pending,g!==null&&(b=g.next,b===g?m.pending=null:(b=b.next,g.next=b,DO(m,b)))}function SC(m,g,b){var C=m.pending;if(m.pending=null,C!==null){C=C.next;do g.status="rejected",g.reason=b,IO(g),g=g.next;while(g!==C)}m.action=null}function IO(m){m=m.listeners;for(var g=0;g<m.length;g++)(0,m[g])()}function $O(m,g){return g}function RO(m,g){if(yn){var b=qn.formState;if(b!==null){e:{var C=an;if(yn){if(Jn){t:{for(var P=Jn,R=Jr;P.nodeType!==8;){if(!R){P=null;break t}if(P=ti(P.nextSibling),P===null){P=null;break t}}R=P.data,P=R==="F!"||R==="F"?P:null}if(P){Jn=ti(P.nextSibling),C=P.data==="F!";break e}}gc(C)}C=!1}C&&(g=b[0])}}return b=Hs(),b.memoizedState=b.baseState=g,C={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$O,lastRenderedState:g},b.queue=C,b=a5.bind(null,an,C),C.dispatch=b,C=CC(!1),R=LC.bind(null,an,!1,C.queue),C=Hs(),P={state:g,dispatch:null,action:m,pending:null},C.queue=P,b=_te.bind(null,an,P,R,b),P.dispatch=b,C.memoizedState=m,[g,b,!1]}function zO(m){var g=Pa();return FO(g,zn,m)}function FO(m,g,b){if(g=NC(m,g,$O)[0],m=K0(al)[0],typeof g=="object"&&g!==null&&typeof g.then=="function")try{var C=zh(g)}catch(J){throw J===jm?F0:J}else C=g;g=Pa();var P=g.queue,R=P.dispatch;return b!==g.memoizedState&&(an.flags|=2048,Tm(9,{destroy:void 0},Ate.bind(null,P,b),null)),[C,R,m]}function Ate(m,g){m.action=g}function UO(m){var g=Pa(),b=zn;if(b!==null)return FO(g,b,m);Pa(),g=g.memoizedState,b=Pa();var C=b.queue.dispatch;return b.memoizedState=m,[g,C,!1]}function Tm(m,g,b,C){return m={tag:m,create:b,deps:C,inst:g,next:null},g=an.updateQueue,g===null&&(g=Y0(),an.updateQueue=g),b=g.lastEffect,b===null?g.lastEffect=m.next=m:(C=b.next,b.next=m,m.next=C,g.lastEffect=m),m}function BO(){return Pa().memoizedState}function X0(m,g,b,C){var P=Hs();an.flags|=m,P.memoizedState=Tm(1|g,{destroy:void 0},b,C===void 0?null:C)}function Z0(m,g,b,C){var P=Pa();C=C===void 0?null:C;var R=P.memoizedState.inst;zn!==null&&C!==null&&pC(C,zn.memoizedState.deps)?P.memoizedState=Tm(g,R,b,C):(an.flags|=m,P.memoizedState=Tm(1|g,R,b,C))}function HO(m,g){X0(8390656,8,m,g)}function _C(m,g){Z0(2048,8,m,g)}function Tte(m){an.flags|=4;var g=an.updateQueue;if(g===null)g=Y0(),an.updateQueue=g,g.events=[m];else{var b=g.events;b===null?g.events=[m]:b.push(m)}}function qO(m){var g=Pa().memoizedState;return Tte({ref:g,nextImpl:m}),function(){if((An&2)!==0)throw Error(s(440));return g.impl.apply(void 0,arguments)}}function WO(m,g){return Z0(4,2,m,g)}function GO(m,g){return Z0(4,4,m,g)}function VO(m,g){if(typeof g=="function"){m=m();var b=g(m);return function(){typeof b=="function"?b():g(null)}}if(g!=null)return m=m(),g.current=m,function(){g.current=null}}function YO(m,g,b){b=b!=null?b.concat([m]):null,Z0(4,4,VO.bind(null,g,m),b)}function AC(){}function QO(m,g){var b=Pa();g=g===void 0?null:g;var C=b.memoizedState;return g!==null&&pC(g,C[1])?C[0]:(b.memoizedState=[m,g],m)}function KO(m,g){var b=Pa();g=g===void 0?null:g;var C=b.memoizedState;if(g!==null&&pC(g,C[1]))return C[0];if(C=m(),Bd){Xe(!0);try{m()}finally{Xe(!1)}}return b.memoizedState=[C,g],C}function TC(m,g,b){return b===void 0||(nl&1073741824)!==0&&(hn&261930)===0?m.memoizedState=g:(m.memoizedState=b,m=X5(),an.lanes|=m,Cc|=m,b)}function XO(m,g,b,C){return _r(b,g)?b:Sm.current!==null?(m=TC(m,b,C),_r(m,g)||(Fa=!0),m):(nl&42)===0||(nl&1073741824)!==0&&(hn&261930)===0?(Fa=!0,m.memoizedState=b):(m=X5(),an.lanes|=m,Cc|=m,g)}function ZO(m,g,b,C,P){var R=Z.p;Z.p=R!==0&&8>R?R:8;var J=V.T,je={};V.T=je,LC(m,!1,g,b);try{var qe=P(),st=V.S;if(st!==null&&st(je,qe),qe!==null&&typeof qe=="object"&&typeof qe.then=="function"){var ft=jte(qe,C);Fh(m,g,ft,Pr(m))}else Fh(m,g,C,Pr(m))}catch(bt){Fh(m,g,{then:function(){},status:"rejected",reason:bt},Pr())}finally{Z.p=R,J!==null&&je.types!==null&&(J.types=je.types),V.T=J}}function kte(){}function kC(m,g,b,C){if(m.tag!==5)throw Error(s(476));var P=JO(m).queue;ZO(m,P,g,Y,b===null?kte:function(){return e5(m),b(C)})}function JO(m){var g=m.memoizedState;if(g!==null)return g;g={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:al,lastRenderedState:Y},next:null};var b={};return g.next={memoizedState:b,baseState:b,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:al,lastRenderedState:b},next:null},m.memoizedState=g,m=m.alternate,m!==null&&(m.memoizedState=g),g}function e5(m){var g=JO(m);g.next===null&&(g=m.alternate.memoizedState),Fh(m,g.next.queue,{},Pr())}function EC(){return Ns(ag)}function t5(){return Pa().memoizedState}function n5(){return Pa().memoizedState}function Ete(m){for(var g=m.return;g!==null;){switch(g.tag){case 24:case 3:var b=Pr();m=yc(b);var C=bc(g,m,b);C!==null&&(rr(C,g,b),Mh(C,g,b)),g={cache:rC()},m.payload=g;return}g=g.return}}function Lte(m,g,b){var C=Pr();b={lane:C,revertLane:0,gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null},J0(m)?s5(g,b):(b=Y1(m,g,b,C),b!==null&&(rr(b,m,C),r5(b,g,C)))}function a5(m,g,b){var C=Pr();Fh(m,g,b,C)}function Fh(m,g,b,C){var P={lane:C,revertLane:0,gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null};if(J0(m))s5(g,P);else{var R=m.alternate;if(m.lanes===0&&(R===null||R.lanes===0)&&(R=g.lastRenderedReducer,R!==null))try{var J=g.lastRenderedState,je=R(J,b);if(P.hasEagerState=!0,P.eagerState=je,_r(je,J))return D0(m,g,P,0),qn===null&&P0(),!1}catch{}if(b=Y1(m,g,P,C),b!==null)return rr(b,m,C),r5(b,g,C),!0}return!1}function LC(m,g,b,C){if(C={lane:2,revertLane:cS(),gesture:null,action:C,hasEagerState:!1,eagerState:null,next:null},J0(m)){if(g)throw Error(s(479))}else g=Y1(m,b,C,2),g!==null&&rr(g,m,2)}function J0(m){var g=m.alternate;return m===an||g!==null&&g===an}function s5(m,g){_m=G0=!0;var b=m.pending;b===null?g.next=g:(g.next=b.next,b.next=g),m.pending=g}function r5(m,g,b){if((b&4194048)!==0){var C=g.lanes;C&=m.pendingLanes,b|=C,g.lanes=b,Q(m,b)}}var Uh={readContext:Ns,use:Q0,useCallback:va,useContext:va,useEffect:va,useImperativeHandle:va,useLayoutEffect:va,useInsertionEffect:va,useMemo:va,useReducer:va,useRef:va,useState:va,useDebugValue:va,useDeferredValue:va,useTransition:va,useSyncExternalStore:va,useId:va,useHostTransitionStatus:va,useFormState:va,useActionState:va,useOptimistic:va,useMemoCache:va,useCacheRefresh:va};Uh.useEffectEvent=va;var i5={readContext:Ns,use:Q0,useCallback:function(m,g){return Hs().memoizedState=[m,g===void 0?null:g],m},useContext:Ns,useEffect:HO,useImperativeHandle:function(m,g,b){b=b!=null?b.concat([m]):null,X0(4194308,4,VO.bind(null,g,m),b)},useLayoutEffect:function(m,g){return X0(4194308,4,m,g)},useInsertionEffect:function(m,g){X0(4,2,m,g)},useMemo:function(m,g){var b=Hs();g=g===void 0?null:g;var C=m();if(Bd){Xe(!0);try{m()}finally{Xe(!1)}}return b.memoizedState=[C,g],C},useReducer:function(m,g,b){var C=Hs();if(b!==void 0){var P=b(g);if(Bd){Xe(!0);try{b(g)}finally{Xe(!1)}}}else P=g;return C.memoizedState=C.baseState=P,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:P},C.queue=m,m=m.dispatch=Lte.bind(null,an,m),[C.memoizedState,m]},useRef:function(m){var g=Hs();return m={current:m},g.memoizedState=m},useState:function(m){m=CC(m);var g=m.queue,b=a5.bind(null,an,g);return g.dispatch=b,[m.memoizedState,b]},useDebugValue:AC,useDeferredValue:function(m,g){var b=Hs();return TC(b,m,g)},useTransition:function(){var m=CC(!1);return m=ZO.bind(null,an,m.queue,!0,!1),Hs().memoizedState=m,[!1,m]},useSyncExternalStore:function(m,g,b){var C=an,P=Hs();if(yn){if(b===void 0)throw Error(s(407));b=b()}else{if(b=g(),qn===null)throw Error(s(349));(hn&127)!==0||AO(C,g,b)}P.memoizedState=b;var R={value:b,getSnapshot:g};return P.queue=R,HO(kO.bind(null,C,R,m),[m]),C.flags|=2048,Tm(9,{destroy:void 0},TO.bind(null,C,R,b,g),null),b},useId:function(){var m=Hs(),g=qn.identifierPrefix;if(yn){var b=no,C=to;b=(C&~(1<<32-Ze(C)-1)).toString(32)+b,g="_"+g+"R_"+b,b=V0++,0<b&&(g+="H"+b.toString(32)),g+="_"}else b=Cte++,g="_"+g+"r_"+b.toString(32)+"_";return m.memoizedState=g},useHostTransitionStatus:EC,useFormState:RO,useActionState:RO,useOptimistic:function(m){var g=Hs();g.memoizedState=g.baseState=m;var b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return g.queue=b,g=LC.bind(null,an,!0,b),b.dispatch=g,[m,g]},useMemoCache:wC,useCacheRefresh:function(){return Hs().memoizedState=Ete.bind(null,an)},useEffectEvent:function(m){var g=Hs(),b={impl:m};return g.memoizedState=b,function(){if((An&2)!==0)throw Error(s(440));return b.impl.apply(void 0,arguments)}}},PC={readContext:Ns,use:Q0,useCallback:QO,useContext:Ns,useEffect:_C,useImperativeHandle:YO,useInsertionEffect:WO,useLayoutEffect:GO,useMemo:KO,useReducer:K0,useRef:BO,useState:function(){return K0(al)},useDebugValue:AC,useDeferredValue:function(m,g){var b=Pa();return XO(b,zn.memoizedState,m,g)},useTransition:function(){var m=K0(al)[0],g=Pa().memoizedState;return[typeof m=="boolean"?m:zh(m),g]},useSyncExternalStore:_O,useId:t5,useHostTransitionStatus:EC,useFormState:zO,useActionState:zO,useOptimistic:function(m,g){var b=Pa();return PO(b,zn,m,g)},useMemoCache:wC,useCacheRefresh:n5};PC.useEffectEvent=qO;var o5={readContext:Ns,use:Q0,useCallback:QO,useContext:Ns,useEffect:_C,useImperativeHandle:YO,useInsertionEffect:WO,useLayoutEffect:GO,useMemo:KO,useReducer:jC,useRef:BO,useState:function(){return jC(al)},useDebugValue:AC,useDeferredValue:function(m,g){var b=Pa();return zn===null?TC(b,m,g):XO(b,zn.memoizedState,m,g)},useTransition:function(){var m=jC(al)[0],g=Pa().memoizedState;return[typeof m=="boolean"?m:zh(m),g]},useSyncExternalStore:_O,useId:t5,useHostTransitionStatus:EC,useFormState:UO,useActionState:UO,useOptimistic:function(m,g){var b=Pa();return zn!==null?PO(b,zn,m,g):(b.baseState=m,[m,b.queue.dispatch])},useMemoCache:wC,useCacheRefresh:n5};o5.useEffectEvent=qO;function DC(m,g,b,C){g=m.memoizedState,b=b(C,g),b=b==null?g:f({},g,b),m.memoizedState=b,m.lanes===0&&(m.updateQueue.baseState=b)}var OC={enqueueSetState:function(m,g,b){m=m._reactInternals;var C=Pr(),P=yc(C);P.payload=g,b!=null&&(P.callback=b),g=bc(m,P,C),g!==null&&(rr(g,m,C),Mh(g,m,C))},enqueueReplaceState:function(m,g,b){m=m._reactInternals;var C=Pr(),P=yc(C);P.tag=1,P.payload=g,b!=null&&(P.callback=b),g=bc(m,P,C),g!==null&&(rr(g,m,C),Mh(g,m,C))},enqueueForceUpdate:function(m,g){m=m._reactInternals;var b=Pr(),C=yc(b);C.tag=2,g!=null&&(C.callback=g),g=bc(m,C,b),g!==null&&(rr(g,m,b),Mh(g,m,b))}};function l5(m,g,b,C,P,R,J){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(C,R,J):g.prototype&&g.prototype.isPureReactComponent?!Ah(b,C)||!Ah(P,R):!0}function c5(m,g,b,C){m=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(b,C),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(b,C),g.state!==m&&OC.enqueueReplaceState(g,g.state,null)}function Hd(m,g){var b=g;if("ref"in g){b={};for(var C in g)C!=="ref"&&(b[C]=g[C])}if(m=m.defaultProps){b===g&&(b=f({},b));for(var P in m)b[P]===void 0&&(b[P]=m[P])}return b}function d5(m){L0(m)}function u5(m){console.error(m)}function m5(m){L0(m)}function ey(m,g){try{var b=m.onUncaughtError;b(g.value,{componentStack:g.stack})}catch(C){setTimeout(function(){throw C})}}function f5(m,g,b){try{var C=m.onCaughtError;C(b.value,{componentStack:b.stack,errorBoundary:g.tag===1?g.stateNode:null})}catch(P){setTimeout(function(){throw P})}}function MC(m,g,b){return b=yc(b),b.tag=3,b.payload={element:null},b.callback=function(){ey(m,g)},b}function h5(m){return m=yc(m),m.tag=3,m}function g5(m,g,b,C){var P=b.type.getDerivedStateFromError;if(typeof P=="function"){var R=C.value;m.payload=function(){return P(R)},m.callback=function(){f5(g,b,C)}}var J=b.stateNode;J!==null&&typeof J.componentDidCatch=="function"&&(m.callback=function(){f5(g,b,C),typeof P!="function"&&(Sc===null?Sc=new Set([this]):Sc.add(this));var je=C.stack;this.componentDidCatch(C.value,{componentStack:je!==null?je:""})})}function Pte(m,g,b,C,P){if(b.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){if(g=b.alternate,g!==null&&vm(g,b,P,!0),b=Tr.current,b!==null){switch(b.tag){case 31:case 13:return ei===null?my():b.alternate===null&&wa===0&&(wa=3),b.flags&=-257,b.flags|=65536,b.lanes=P,C===U0?b.flags|=16384:(g=b.updateQueue,g===null?b.updateQueue=new Set([C]):g.add(C),iS(m,C,P)),!1;case 22:return b.flags|=65536,C===U0?b.flags|=16384:(g=b.updateQueue,g===null?(g={transitions:null,markerInstances:null,retryQueue:new Set([C])},b.updateQueue=g):(b=g.retryQueue,b===null?g.retryQueue=new Set([C]):b.add(C)),iS(m,C,P)),!1}throw Error(s(435,b.tag))}return iS(m,C,P),my(),!1}if(yn)return g=Tr.current,g!==null?((g.flags&65536)===0&&(g.flags|=256),g.flags|=65536,g.lanes=P,C!==eC&&(m=Error(s(422),{cause:C}),Eh(Kr(m,b)))):(C!==eC&&(g=Error(s(423),{cause:C}),Eh(Kr(g,b))),m=m.current.alternate,m.flags|=65536,P&=-P,m.lanes|=P,C=Kr(C,b),P=MC(m.stateNode,C,P),uC(m,P),wa!==4&&(wa=2)),!1;var R=Error(s(520),{cause:C});if(R=Kr(R,b),Qh===null?Qh=[R]:Qh.push(R),wa!==4&&(wa=2),g===null)return!0;C=Kr(C,b),b=g;do{switch(b.tag){case 3:return b.flags|=65536,m=P&-P,b.lanes|=m,m=MC(b.stateNode,C,m),uC(b,m),!1;case 1:if(g=b.type,R=b.stateNode,(b.flags&128)===0&&(typeof g.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(Sc===null||!Sc.has(R))))return b.flags|=65536,P&=-P,b.lanes|=P,P=h5(P),g5(P,m,b,C),uC(b,P),!1}b=b.return}while(b!==null);return!1}var IC=Error(s(461)),Fa=!1;function js(m,g,b,C){g.child=m===null?bO(g,null,b,C):Ud(g,m.child,b,C)}function p5(m,g,b,C,P){b=b.render;var R=g.ref;if("ref"in C){var J={};for(var je in C)je!=="ref"&&(J[je]=C[je])}else J=C;return $d(g),C=xC(m,g,b,J,R,P),je=yC(),m!==null&&!Fa?(bC(m,g,P),sl(m,g,P)):(yn&&je&&Z1(g),g.flags|=1,js(m,g,C,P),g.child)}function x5(m,g,b,C,P){if(m===null){var R=b.type;return typeof R=="function"&&!Q1(R)&&R.defaultProps===void 0&&b.compare===null?(g.tag=15,g.type=R,y5(m,g,R,C,P)):(m=M0(b.type,null,C,g,g.mode,P),m.ref=g.ref,m.return=g,g.child=m)}if(R=m.child,!qC(m,P)){var J=R.memoizedProps;if(b=b.compare,b=b!==null?b:Ah,b(J,C)&&m.ref===g.ref)return sl(m,g,P)}return g.flags|=1,m=Zo(R,C),m.ref=g.ref,m.return=g,g.child=m}function y5(m,g,b,C,P){if(m!==null){var R=m.memoizedProps;if(Ah(R,C)&&m.ref===g.ref)if(Fa=!1,g.pendingProps=C=R,qC(m,P))(m.flags&131072)!==0&&(Fa=!0);else return g.lanes=m.lanes,sl(m,g,P)}return $C(m,g,b,C,P)}function b5(m,g,b,C){var P=C.children,R=m!==null?m.memoizedState:null;if(m===null&&g.stateNode===null&&(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),C.mode==="hidden"){if((g.flags&128)!==0){if(R=R!==null?R.baseLanes|b:b,m!==null){for(C=g.child=m.child,P=0;C!==null;)P=P|C.lanes|C.childLanes,C=C.sibling;C=P&~R}else C=0,g.child=null;return v5(m,g,R,b,C)}if((b&536870912)!==0)g.memoizedState={baseLanes:0,cachePool:null},m!==null&&z0(g,R!==null?R.cachePool:null),R!==null?NO(g,R):fC(),jO(g);else return C=g.lanes=536870912,v5(m,g,R!==null?R.baseLanes|b:b,b,C)}else R!==null?(z0(g,R.cachePool),NO(g,R),wc(),g.memoizedState=null):(m!==null&&z0(g,null),fC(),wc());return js(m,g,P,b),g.child}function Bh(m,g){return m!==null&&m.tag===22||g.stateNode!==null||(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.sibling}function v5(m,g,b,C,P){var R=oC();return R=R===null?null:{parent:Ra._currentValue,pool:R},g.memoizedState={baseLanes:b,cachePool:R},m!==null&&z0(g,null),fC(),jO(g),m!==null&&vm(m,g,C,!0),g.childLanes=P,null}function ty(m,g){return g=ay({mode:g.mode,children:g.children},m.mode),g.ref=m.ref,m.child=g,g.return=m,g}function w5(m,g,b){return Ud(g,m.child,null,b),m=ty(g,g.pendingProps),m.flags|=2,kr(g),g.memoizedState=null,m}function Dte(m,g,b){var C=g.pendingProps,P=(g.flags&128)!==0;if(g.flags&=-129,m===null){if(yn){if(C.mode==="hidden")return m=ty(g,C),g.lanes=536870912,Bh(null,m);if(gC(g),(m=Jn)?(m=DM(m,Jr),m=m!==null&&m.data==="&"?m:null,m!==null&&(g.memoizedState={dehydrated:m,treeContext:fc!==null?{id:to,overflow:no}:null,retryLane:536870912,hydrationErrors:null},b=sO(m),b.return=g,g.child=b,ws=g,Jn=null)):m=null,m===null)throw gc(g);return g.lanes=536870912,null}return ty(g,C)}var R=m.memoizedState;if(R!==null){var J=R.dehydrated;if(gC(g),P)if(g.flags&256)g.flags&=-257,g=w5(m,g,b);else if(g.memoizedState!==null)g.child=m.child,g.flags|=128,g=null;else throw Error(s(558));else if(Fa||vm(m,g,b,!1),P=(b&m.childLanes)!==0,Fa||P){if(C=qn,C!==null&&(J=ge(C,b),J!==0&&J!==R.retryLane))throw R.retryLane=J,Dd(m,J),rr(C,m,J),IC;my(),g=w5(m,g,b)}else m=R.treeContext,Jn=ti(J.nextSibling),ws=g,yn=!0,hc=null,Jr=!1,m!==null&&oO(g,m),g=ty(g,C),g.flags|=4096;return g}return m=Zo(m.child,{mode:C.mode,children:C.children}),m.ref=g.ref,g.child=m,m.return=g,m}function ny(m,g){var b=g.ref;if(b===null)m!==null&&m.ref!==null&&(g.flags|=4194816);else{if(typeof b!="function"&&typeof b!="object")throw Error(s(284));(m===null||m.ref!==b)&&(g.flags|=4194816)}}function $C(m,g,b,C,P){return $d(g),b=xC(m,g,b,C,void 0,P),C=yC(),m!==null&&!Fa?(bC(m,g,P),sl(m,g,P)):(yn&&C&&Z1(g),g.flags|=1,js(m,g,b,P),g.child)}function N5(m,g,b,C,P,R){return $d(g),g.updateQueue=null,b=SO(g,C,b,P),CO(m),C=yC(),m!==null&&!Fa?(bC(m,g,R),sl(m,g,R)):(yn&&C&&Z1(g),g.flags|=1,js(m,g,b,R),g.child)}function j5(m,g,b,C,P){if($d(g),g.stateNode===null){var R=pm,J=b.contextType;typeof J=="object"&&J!==null&&(R=Ns(J)),R=new b(C,R),g.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,R.updater=OC,g.stateNode=R,R._reactInternals=g,R=g.stateNode,R.props=C,R.state=g.memoizedState,R.refs={},cC(g),J=b.contextType,R.context=typeof J=="object"&&J!==null?Ns(J):pm,R.state=g.memoizedState,J=b.getDerivedStateFromProps,typeof J=="function"&&(DC(g,b,J,C),R.state=g.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(J=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),J!==R.state&&OC.enqueueReplaceState(R,R.state,null),$h(g,C,R,P),Ih(),R.state=g.memoizedState),typeof R.componentDidMount=="function"&&(g.flags|=4194308),C=!0}else if(m===null){R=g.stateNode;var je=g.memoizedProps,qe=Hd(b,je);R.props=qe;var st=R.context,ft=b.contextType;J=pm,typeof ft=="object"&&ft!==null&&(J=Ns(ft));var bt=b.getDerivedStateFromProps;ft=typeof bt=="function"||typeof R.getSnapshotBeforeUpdate=="function",je=g.pendingProps!==je,ft||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(je||st!==J)&&c5(g,R,C,J),xc=!1;var ot=g.memoizedState;R.state=ot,$h(g,C,R,P),Ih(),st=g.memoizedState,je||ot!==st||xc?(typeof bt=="function"&&(DC(g,b,bt,C),st=g.memoizedState),(qe=xc||l5(g,b,qe,C,ot,st,J))?(ft||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(g.flags|=4194308)):(typeof R.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=C,g.memoizedState=st),R.props=C,R.state=st,R.context=J,C=qe):(typeof R.componentDidMount=="function"&&(g.flags|=4194308),C=!1)}else{R=g.stateNode,dC(m,g),J=g.memoizedProps,ft=Hd(b,J),R.props=ft,bt=g.pendingProps,ot=R.context,st=b.contextType,qe=pm,typeof st=="object"&&st!==null&&(qe=Ns(st)),je=b.getDerivedStateFromProps,(st=typeof je=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(J!==bt||ot!==qe)&&c5(g,R,C,qe),xc=!1,ot=g.memoizedState,R.state=ot,$h(g,C,R,P),Ih();var ut=g.memoizedState;J!==bt||ot!==ut||xc||m!==null&&m.dependencies!==null&&$0(m.dependencies)?(typeof je=="function"&&(DC(g,b,je,C),ut=g.memoizedState),(ft=xc||l5(g,b,ft,C,ot,ut,qe)||m!==null&&m.dependencies!==null&&$0(m.dependencies))?(st||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(C,ut,qe),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(C,ut,qe)),typeof R.componentDidUpdate=="function"&&(g.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof R.componentDidUpdate!="function"||J===m.memoizedProps&&ot===m.memoizedState||(g.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||J===m.memoizedProps&&ot===m.memoizedState||(g.flags|=1024),g.memoizedProps=C,g.memoizedState=ut),R.props=C,R.state=ut,R.context=qe,C=ft):(typeof R.componentDidUpdate!="function"||J===m.memoizedProps&&ot===m.memoizedState||(g.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||J===m.memoizedProps&&ot===m.memoizedState||(g.flags|=1024),C=!1)}return R=C,ny(m,g),C=(g.flags&128)!==0,R||C?(R=g.stateNode,b=C&&typeof b.getDerivedStateFromError!="function"?null:R.render(),g.flags|=1,m!==null&&C?(g.child=Ud(g,m.child,null,P),g.child=Ud(g,null,b,P)):js(m,g,b,P),g.memoizedState=R.state,m=g.child):m=sl(m,g,P),m}function C5(m,g,b,C){return Md(),g.flags|=256,js(m,g,b,C),g.child}var RC={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zC(m){return{baseLanes:m,cachePool:fO()}}function FC(m,g,b){return m=m!==null?m.childLanes&~b:0,g&&(m|=Lr),m}function S5(m,g,b){var C=g.pendingProps,P=!1,R=(g.flags&128)!==0,J;if((J=R)||(J=m!==null&&m.memoizedState===null?!1:(La.current&2)!==0),J&&(P=!0,g.flags&=-129),J=(g.flags&32)!==0,g.flags&=-33,m===null){if(yn){if(P?vc(g):wc(),(m=Jn)?(m=DM(m,Jr),m=m!==null&&m.data!=="&"?m:null,m!==null&&(g.memoizedState={dehydrated:m,treeContext:fc!==null?{id:to,overflow:no}:null,retryLane:536870912,hydrationErrors:null},b=sO(m),b.return=g,g.child=b,ws=g,Jn=null)):m=null,m===null)throw gc(g);return NS(m)?g.lanes=32:g.lanes=536870912,null}var je=C.children;return C=C.fallback,P?(wc(),P=g.mode,je=ay({mode:"hidden",children:je},P),C=Od(C,P,b,null),je.return=g,C.return=g,je.sibling=C,g.child=je,C=g.child,C.memoizedState=zC(b),C.childLanes=FC(m,J,b),g.memoizedState=RC,Bh(null,C)):(vc(g),UC(g,je))}var qe=m.memoizedState;if(qe!==null&&(je=qe.dehydrated,je!==null)){if(R)g.flags&256?(vc(g),g.flags&=-257,g=BC(m,g,b)):g.memoizedState!==null?(wc(),g.child=m.child,g.flags|=128,g=null):(wc(),je=C.fallback,P=g.mode,C=ay({mode:"visible",children:C.children},P),je=Od(je,P,b,null),je.flags|=2,C.return=g,je.return=g,C.sibling=je,g.child=C,Ud(g,m.child,null,b),C=g.child,C.memoizedState=zC(b),C.childLanes=FC(m,J,b),g.memoizedState=RC,g=Bh(null,C));else if(vc(g),NS(je)){if(J=je.nextSibling&&je.nextSibling.dataset,J)var st=J.dgst;J=st,C=Error(s(419)),C.stack="",C.digest=J,Eh({value:C,source:null,stack:null}),g=BC(m,g,b)}else if(Fa||vm(m,g,b,!1),J=(b&m.childLanes)!==0,Fa||J){if(J=qn,J!==null&&(C=ge(J,b),C!==0&&C!==qe.retryLane))throw qe.retryLane=C,Dd(m,C),rr(J,m,C),IC;wS(je)||my(),g=BC(m,g,b)}else wS(je)?(g.flags|=192,g.child=m.child,g=null):(m=qe.treeContext,Jn=ti(je.nextSibling),ws=g,yn=!0,hc=null,Jr=!1,m!==null&&oO(g,m),g=UC(g,C.children),g.flags|=4096);return g}return P?(wc(),je=C.fallback,P=g.mode,qe=m.child,st=qe.sibling,C=Zo(qe,{mode:"hidden",children:C.children}),C.subtreeFlags=qe.subtreeFlags&65011712,st!==null?je=Zo(st,je):(je=Od(je,P,b,null),je.flags|=2),je.return=g,C.return=g,C.sibling=je,g.child=C,Bh(null,C),C=g.child,je=m.child.memoizedState,je===null?je=zC(b):(P=je.cachePool,P!==null?(qe=Ra._currentValue,P=P.parent!==qe?{parent:qe,pool:qe}:P):P=fO(),je={baseLanes:je.baseLanes|b,cachePool:P}),C.memoizedState=je,C.childLanes=FC(m,J,b),g.memoizedState=RC,Bh(m.child,C)):(vc(g),b=m.child,m=b.sibling,b=Zo(b,{mode:"visible",children:C.children}),b.return=g,b.sibling=null,m!==null&&(J=g.deletions,J===null?(g.deletions=[m],g.flags|=16):J.push(m)),g.child=b,g.memoizedState=null,b)}function UC(m,g){return g=ay({mode:"visible",children:g},m.mode),g.return=m,m.child=g}function ay(m,g){return m=Ar(22,m,null,g),m.lanes=0,m}function BC(m,g,b){return Ud(g,m.child,null,b),m=UC(g,g.pendingProps.children),m.flags|=2,g.memoizedState=null,m}function _5(m,g,b){m.lanes|=g;var C=m.alternate;C!==null&&(C.lanes|=g),aC(m.return,g,b)}function HC(m,g,b,C,P,R){var J=m.memoizedState;J===null?m.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:C,tail:b,tailMode:P,treeForkCount:R}:(J.isBackwards=g,J.rendering=null,J.renderingStartTime=0,J.last=C,J.tail=b,J.tailMode=P,J.treeForkCount=R)}function A5(m,g,b){var C=g.pendingProps,P=C.revealOrder,R=C.tail;C=C.children;var J=La.current,je=(J&2)!==0;if(je?(J=J&1|2,g.flags|=128):J&=1,ye(La,J),js(m,g,C,b),C=yn?kh:0,!je&&m!==null&&(m.flags&128)!==0)e:for(m=g.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&_5(m,b,g);else if(m.tag===19)_5(m,b,g);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===g)break e;for(;m.sibling===null;){if(m.return===null||m.return===g)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}switch(P){case"forwards":for(b=g.child,P=null;b!==null;)m=b.alternate,m!==null&&W0(m)===null&&(P=b),b=b.sibling;b=P,b===null?(P=g.child,g.child=null):(P=b.sibling,b.sibling=null),HC(g,!1,P,b,R,C);break;case"backwards":case"unstable_legacy-backwards":for(b=null,P=g.child,g.child=null;P!==null;){if(m=P.alternate,m!==null&&W0(m)===null){g.child=P;break}m=P.sibling,P.sibling=b,b=P,P=m}HC(g,!0,b,null,R,C);break;case"together":HC(g,!1,null,null,void 0,C);break;default:g.memoizedState=null}return g.child}function sl(m,g,b){if(m!==null&&(g.dependencies=m.dependencies),Cc|=g.lanes,(b&g.childLanes)===0)if(m!==null){if(vm(m,g,b,!1),(b&g.childLanes)===0)return null}else return null;if(m!==null&&g.child!==m.child)throw Error(s(153));if(g.child!==null){for(m=g.child,b=Zo(m,m.pendingProps),g.child=b,b.return=g;m.sibling!==null;)m=m.sibling,b=b.sibling=Zo(m,m.pendingProps),b.return=g;b.sibling=null}return g.child}function qC(m,g){return(m.lanes&g)!==0?!0:(m=m.dependencies,!!(m!==null&&$0(m)))}function Ote(m,g,b){switch(g.tag){case 3:Se(g,g.stateNode.containerInfo),pc(g,Ra,m.memoizedState.cache),Md();break;case 27:case 5:ke(g);break;case 4:Se(g,g.stateNode.containerInfo);break;case 10:pc(g,g.type,g.memoizedProps.value);break;case 31:if(g.memoizedState!==null)return g.flags|=128,gC(g),null;break;case 13:var C=g.memoizedState;if(C!==null)return C.dehydrated!==null?(vc(g),g.flags|=128,null):(b&g.child.childLanes)!==0?S5(m,g,b):(vc(g),m=sl(m,g,b),m!==null?m.sibling:null);vc(g);break;case 19:var P=(m.flags&128)!==0;if(C=(b&g.childLanes)!==0,C||(vm(m,g,b,!1),C=(b&g.childLanes)!==0),P){if(C)return A5(m,g,b);g.flags|=128}if(P=g.memoizedState,P!==null&&(P.rendering=null,P.tail=null,P.lastEffect=null),ye(La,La.current),C)break;return null;case 22:return g.lanes=0,b5(m,g,b,g.pendingProps);case 24:pc(g,Ra,m.memoizedState.cache)}return sl(m,g,b)}function T5(m,g,b){if(m!==null)if(m.memoizedProps!==g.pendingProps)Fa=!0;else{if(!qC(m,b)&&(g.flags&128)===0)return Fa=!1,Ote(m,g,b);Fa=(m.flags&131072)!==0}else Fa=!1,yn&&(g.flags&1048576)!==0&&iO(g,kh,g.index);switch(g.lanes=0,g.tag){case 16:e:{var C=g.pendingProps;if(m=zd(g.elementType),g.type=m,typeof m=="function")Q1(m)?(C=Hd(m,C),g.tag=1,g=j5(null,g,m,C,b)):(g.tag=0,g=$C(null,g,m,C,b));else{if(m!=null){var P=m.$$typeof;if(P===_){g.tag=11,g=p5(null,g,m,C,b);break e}else if(P===A){g.tag=14,g=x5(null,g,m,C,b);break e}}throw g=G(m)||m,Error(s(306,g,""))}}return g;case 0:return $C(m,g,g.type,g.pendingProps,b);case 1:return C=g.type,P=Hd(C,g.pendingProps),j5(m,g,C,P,b);case 3:e:{if(Se(g,g.stateNode.containerInfo),m===null)throw Error(s(387));C=g.pendingProps;var R=g.memoizedState;P=R.element,dC(m,g),$h(g,C,null,b);var J=g.memoizedState;if(C=J.cache,pc(g,Ra,C),C!==R.cache&&sC(g,[Ra],b,!0),Ih(),C=J.element,R.isDehydrated)if(R={element:C,isDehydrated:!1,cache:J.cache},g.updateQueue.baseState=R,g.memoizedState=R,g.flags&256){g=C5(m,g,C,b);break e}else if(C!==P){P=Kr(Error(s(424)),g),Eh(P),g=C5(m,g,C,b);break e}else for(m=g.stateNode.containerInfo,m.nodeType===9?m=m.body:m=m.nodeName==="HTML"?m.ownerDocument.body:m,Jn=ti(m.firstChild),ws=g,yn=!0,hc=null,Jr=!0,b=bO(g,null,C,b),g.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(Md(),C===P){g=sl(m,g,b);break e}js(m,g,C,b)}g=g.child}return g;case 26:return ny(m,g),m===null?(b=zM(g.type,null,g.pendingProps,null))?g.memoizedState=b:yn||(b=g.type,m=g.pendingProps,C=by(ve.current).createElement(b),C[kt]=g,C[Dt]=m,Cs(C,b,m),Ge(C),g.stateNode=C):g.memoizedState=zM(g.type,m.memoizedProps,g.pendingProps,m.memoizedState),null;case 27:return ke(g),m===null&&yn&&(C=g.stateNode=IM(g.type,g.pendingProps,ve.current),ws=g,Jr=!0,P=Jn,kc(g.type)?(jS=P,Jn=ti(C.firstChild)):Jn=P),js(m,g,g.pendingProps.children,b),ny(m,g),m===null&&(g.flags|=4194304),g.child;case 5:return m===null&&yn&&((P=C=Jn)&&(C=dne(C,g.type,g.pendingProps,Jr),C!==null?(g.stateNode=C,ws=g,Jn=ti(C.firstChild),Jr=!1,P=!0):P=!1),P||gc(g)),ke(g),P=g.type,R=g.pendingProps,J=m!==null?m.memoizedProps:null,C=R.children,yS(P,R)?C=null:J!==null&&yS(P,J)&&(g.flags|=32),g.memoizedState!==null&&(P=xC(m,g,Ste,null,null,b),ag._currentValue=P),ny(m,g),js(m,g,C,b),g.child;case 6:return m===null&&yn&&((m=b=Jn)&&(b=une(b,g.pendingProps,Jr),b!==null?(g.stateNode=b,ws=g,Jn=null,m=!0):m=!1),m||gc(g)),null;case 13:return S5(m,g,b);case 4:return Se(g,g.stateNode.containerInfo),C=g.pendingProps,m===null?g.child=Ud(g,null,C,b):js(m,g,C,b),g.child;case 11:return p5(m,g,g.type,g.pendingProps,b);case 7:return js(m,g,g.pendingProps,b),g.child;case 8:return js(m,g,g.pendingProps.children,b),g.child;case 12:return js(m,g,g.pendingProps.children,b),g.child;case 10:return C=g.pendingProps,pc(g,g.type,C.value),js(m,g,C.children,b),g.child;case 9:return P=g.type._context,C=g.pendingProps.children,$d(g),P=Ns(P),C=C(P),g.flags|=1,js(m,g,C,b),g.child;case 14:return x5(m,g,g.type,g.pendingProps,b);case 15:return y5(m,g,g.type,g.pendingProps,b);case 19:return A5(m,g,b);case 31:return Dte(m,g,b);case 22:return b5(m,g,b,g.pendingProps);case 24:return $d(g),C=Ns(Ra),m===null?(P=oC(),P===null&&(P=qn,R=rC(),P.pooledCache=R,R.refCount++,R!==null&&(P.pooledCacheLanes|=b),P=R),g.memoizedState={parent:C,cache:P},cC(g),pc(g,Ra,P)):((m.lanes&b)!==0&&(dC(m,g),$h(g,null,null,b),Ih()),P=m.memoizedState,R=g.memoizedState,P.parent!==C?(P={parent:C,cache:C},g.memoizedState=P,g.lanes===0&&(g.memoizedState=g.updateQueue.baseState=P),pc(g,Ra,C)):(C=R.cache,pc(g,Ra,C),C!==P.cache&&sC(g,[Ra],b,!0))),js(m,g,g.pendingProps.children,b),g.child;case 29:throw g.pendingProps}throw Error(s(156,g.tag))}function rl(m){m.flags|=4}function WC(m,g,b,C,P){if((g=(m.mode&32)!==0)&&(g=!1),g){if(m.flags|=16777216,(P&335544128)===P)if(m.stateNode.complete)m.flags|=8192;else if(tM())m.flags|=8192;else throw Fd=U0,lC}else m.flags&=-16777217}function k5(m,g){if(g.type!=="stylesheet"||(g.state.loading&4)!==0)m.flags&=-16777217;else if(m.flags|=16777216,!qM(g))if(tM())m.flags|=8192;else throw Fd=U0,lC}function sy(m,g){g!==null&&(m.flags|=4),m.flags&16384&&(g=m.tag!==22?be():536870912,m.lanes|=g,Pm|=g)}function Hh(m,g){if(!yn)switch(m.tailMode){case"hidden":g=m.tail;for(var b=null;g!==null;)g.alternate!==null&&(b=g),g=g.sibling;b===null?m.tail=null:b.sibling=null;break;case"collapsed":b=m.tail;for(var C=null;b!==null;)b.alternate!==null&&(C=b),b=b.sibling;C===null?g||m.tail===null?m.tail=null:m.tail.sibling=null:C.sibling=null}}function ea(m){var g=m.alternate!==null&&m.alternate.child===m.child,b=0,C=0;if(g)for(var P=m.child;P!==null;)b|=P.lanes|P.childLanes,C|=P.subtreeFlags&65011712,C|=P.flags&65011712,P.return=m,P=P.sibling;else for(P=m.child;P!==null;)b|=P.lanes|P.childLanes,C|=P.subtreeFlags,C|=P.flags,P.return=m,P=P.sibling;return m.subtreeFlags|=C,m.childLanes=b,g}function Mte(m,g,b){var C=g.pendingProps;switch(J1(g),g.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ea(g),null;case 1:return ea(g),null;case 3:return b=g.stateNode,C=null,m!==null&&(C=m.memoizedState.cache),g.memoizedState.cache!==C&&(g.flags|=2048),tl(Ra),de(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(m===null||m.child===null)&&(bm(g)?rl(g):m===null||m.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,tC())),ea(g),null;case 26:var P=g.type,R=g.memoizedState;return m===null?(rl(g),R!==null?(ea(g),k5(g,R)):(ea(g),WC(g,P,null,C,b))):R?R!==m.memoizedState?(rl(g),ea(g),k5(g,R)):(ea(g),g.flags&=-16777217):(m=m.memoizedProps,m!==C&&rl(g),ea(g),WC(g,P,m,C,b)),null;case 27:if(Te(g),b=ve.current,P=g.type,m!==null&&g.stateNode!=null)m.memoizedProps!==C&&rl(g);else{if(!C){if(g.stateNode===null)throw Error(s(166));return ea(g),null}m=Ne.current,bm(g)?lO(g):(m=IM(P,C,b),g.stateNode=m,rl(g))}return ea(g),null;case 5:if(Te(g),P=g.type,m!==null&&g.stateNode!=null)m.memoizedProps!==C&&rl(g);else{if(!C){if(g.stateNode===null)throw Error(s(166));return ea(g),null}if(R=Ne.current,bm(g))lO(g);else{var J=by(ve.current);switch(R){case 1:R=J.createElementNS("http://www.w3.org/2000/svg",P);break;case 2:R=J.createElementNS("http://www.w3.org/1998/Math/MathML",P);break;default:switch(P){case"svg":R=J.createElementNS("http://www.w3.org/2000/svg",P);break;case"math":R=J.createElementNS("http://www.w3.org/1998/Math/MathML",P);break;case"script":R=J.createElement("div"),R.innerHTML="<script><\/script>",R=R.removeChild(R.firstChild);break;case"select":R=typeof C.is=="string"?J.createElement("select",{is:C.is}):J.createElement("select"),C.multiple?R.multiple=!0:C.size&&(R.size=C.size);break;default:R=typeof C.is=="string"?J.createElement(P,{is:C.is}):J.createElement(P)}}R[kt]=g,R[Dt]=C;e:for(J=g.child;J!==null;){if(J.tag===5||J.tag===6)R.appendChild(J.stateNode);else if(J.tag!==4&&J.tag!==27&&J.child!==null){J.child.return=J,J=J.child;continue}if(J===g)break e;for(;J.sibling===null;){if(J.return===null||J.return===g)break e;J=J.return}J.sibling.return=J.return,J=J.sibling}g.stateNode=R;e:switch(Cs(R,P,C),P){case"button":case"input":case"select":case"textarea":C=!!C.autoFocus;break e;case"img":C=!0;break e;default:C=!1}C&&rl(g)}}return ea(g),WC(g,g.type,m===null?null:m.memoizedProps,g.pendingProps,b),null;case 6:if(m&&g.stateNode!=null)m.memoizedProps!==C&&rl(g);else{if(typeof C!="string"&&g.stateNode===null)throw Error(s(166));if(m=ve.current,bm(g)){if(m=g.stateNode,b=g.memoizedProps,C=null,P=ws,P!==null)switch(P.tag){case 27:case 5:C=P.memoizedProps}m[kt]=g,m=!!(m.nodeValue===b||C!==null&&C.suppressHydrationWarning===!0||SM(m.nodeValue,b)),m||gc(g,!0)}else m=by(m).createTextNode(C),m[kt]=g,g.stateNode=m}return ea(g),null;case 31:if(b=g.memoizedState,m===null||m.memoizedState!==null){if(C=bm(g),b!==null){if(m===null){if(!C)throw Error(s(318));if(m=g.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(557));m[kt]=g}else Md(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;ea(g),m=!1}else b=tC(),m!==null&&m.memoizedState!==null&&(m.memoizedState.hydrationErrors=b),m=!0;if(!m)return g.flags&256?(kr(g),g):(kr(g),null);if((g.flags&128)!==0)throw Error(s(558))}return ea(g),null;case 13:if(C=g.memoizedState,m===null||m.memoizedState!==null&&m.memoizedState.dehydrated!==null){if(P=bm(g),C!==null&&C.dehydrated!==null){if(m===null){if(!P)throw Error(s(318));if(P=g.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(s(317));P[kt]=g}else Md(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;ea(g),P=!1}else P=tC(),m!==null&&m.memoizedState!==null&&(m.memoizedState.hydrationErrors=P),P=!0;if(!P)return g.flags&256?(kr(g),g):(kr(g),null)}return kr(g),(g.flags&128)!==0?(g.lanes=b,g):(b=C!==null,m=m!==null&&m.memoizedState!==null,b&&(C=g.child,P=null,C.alternate!==null&&C.alternate.memoizedState!==null&&C.alternate.memoizedState.cachePool!==null&&(P=C.alternate.memoizedState.cachePool.pool),R=null,C.memoizedState!==null&&C.memoizedState.cachePool!==null&&(R=C.memoizedState.cachePool.pool),R!==P&&(C.flags|=2048)),b!==m&&b&&(g.child.flags|=8192),sy(g,g.updateQueue),ea(g),null);case 4:return de(),m===null&&fS(g.stateNode.containerInfo),ea(g),null;case 10:return tl(g.type),ea(g),null;case 19:if(ae(La),C=g.memoizedState,C===null)return ea(g),null;if(P=(g.flags&128)!==0,R=C.rendering,R===null)if(P)Hh(C,!1);else{if(wa!==0||m!==null&&(m.flags&128)!==0)for(m=g.child;m!==null;){if(R=W0(m),R!==null){for(g.flags|=128,Hh(C,!1),m=R.updateQueue,g.updateQueue=m,sy(g,m),g.subtreeFlags=0,m=b,b=g.child;b!==null;)aO(b,m),b=b.sibling;return ye(La,La.current&1|2),yn&&Jo(g,C.treeForkCount),g.child}m=m.sibling}C.tail!==null&&Ce()>cy&&(g.flags|=128,P=!0,Hh(C,!1),g.lanes=4194304)}else{if(!P)if(m=W0(R),m!==null){if(g.flags|=128,P=!0,m=m.updateQueue,g.updateQueue=m,sy(g,m),Hh(C,!0),C.tail===null&&C.tailMode==="hidden"&&!R.alternate&&!yn)return ea(g),null}else 2*Ce()-C.renderingStartTime>cy&&b!==536870912&&(g.flags|=128,P=!0,Hh(C,!1),g.lanes=4194304);C.isBackwards?(R.sibling=g.child,g.child=R):(m=C.last,m!==null?m.sibling=R:g.child=R,C.last=R)}return C.tail!==null?(m=C.tail,C.rendering=m,C.tail=m.sibling,C.renderingStartTime=Ce(),m.sibling=null,b=La.current,ye(La,P?b&1|2:b&1),yn&&Jo(g,C.treeForkCount),m):(ea(g),null);case 22:case 23:return kr(g),hC(),C=g.memoizedState!==null,m!==null?m.memoizedState!==null!==C&&(g.flags|=8192):C&&(g.flags|=8192),C?(b&536870912)!==0&&(g.flags&128)===0&&(ea(g),g.subtreeFlags&6&&(g.flags|=8192)):ea(g),b=g.updateQueue,b!==null&&sy(g,b.retryQueue),b=null,m!==null&&m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(b=m.memoizedState.cachePool.pool),C=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(C=g.memoizedState.cachePool.pool),C!==b&&(g.flags|=2048),m!==null&&ae(Rd),null;case 24:return b=null,m!==null&&(b=m.memoizedState.cache),g.memoizedState.cache!==b&&(g.flags|=2048),tl(Ra),ea(g),null;case 25:return null;case 30:return null}throw Error(s(156,g.tag))}function Ite(m,g){switch(J1(g),g.tag){case 1:return m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 3:return tl(Ra),de(),m=g.flags,(m&65536)!==0&&(m&128)===0?(g.flags=m&-65537|128,g):null;case 26:case 27:case 5:return Te(g),null;case 31:if(g.memoizedState!==null){if(kr(g),g.alternate===null)throw Error(s(340));Md()}return m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 13:if(kr(g),m=g.memoizedState,m!==null&&m.dehydrated!==null){if(g.alternate===null)throw Error(s(340));Md()}return m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 19:return ae(La),null;case 4:return de(),null;case 10:return tl(g.type),null;case 22:case 23:return kr(g),hC(),m!==null&&ae(Rd),m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 24:return tl(Ra),null;case 25:return null;default:return null}}function E5(m,g){switch(J1(g),g.tag){case 3:tl(Ra),de();break;case 26:case 27:case 5:Te(g);break;case 4:de();break;case 31:g.memoizedState!==null&&kr(g);break;case 13:kr(g);break;case 19:ae(La);break;case 10:tl(g.type);break;case 22:case 23:kr(g),hC(),m!==null&&ae(Rd);break;case 24:tl(Ra)}}function qh(m,g){try{var b=g.updateQueue,C=b!==null?b.lastEffect:null;if(C!==null){var P=C.next;b=P;do{if((b.tag&m)===m){C=void 0;var R=b.create,J=b.inst;C=R(),J.destroy=C}b=b.next}while(b!==P)}}catch(je){Dn(g,g.return,je)}}function Nc(m,g,b){try{var C=g.updateQueue,P=C!==null?C.lastEffect:null;if(P!==null){var R=P.next;C=R;do{if((C.tag&m)===m){var J=C.inst,je=J.destroy;if(je!==void 0){J.destroy=void 0,P=g;var qe=b,st=je;try{st()}catch(ft){Dn(P,qe,ft)}}}C=C.next}while(C!==R)}}catch(ft){Dn(g,g.return,ft)}}function L5(m){var g=m.updateQueue;if(g!==null){var b=m.stateNode;try{wO(g,b)}catch(C){Dn(m,m.return,C)}}}function P5(m,g,b){b.props=Hd(m.type,m.memoizedProps),b.state=m.memoizedState;try{b.componentWillUnmount()}catch(C){Dn(m,g,C)}}function Wh(m,g){try{var b=m.ref;if(b!==null){switch(m.tag){case 26:case 27:case 5:var C=m.stateNode;break;case 30:C=m.stateNode;break;default:C=m.stateNode}typeof b=="function"?m.refCleanup=b(C):b.current=C}}catch(P){Dn(m,g,P)}}function ao(m,g){var b=m.ref,C=m.refCleanup;if(b!==null)if(typeof C=="function")try{C()}catch(P){Dn(m,g,P)}finally{m.refCleanup=null,m=m.alternate,m!=null&&(m.refCleanup=null)}else if(typeof b=="function")try{b(null)}catch(P){Dn(m,g,P)}else b.current=null}function D5(m){var g=m.type,b=m.memoizedProps,C=m.stateNode;try{e:switch(g){case"button":case"input":case"select":case"textarea":b.autoFocus&&C.focus();break e;case"img":b.src?C.src=b.src:b.srcSet&&(C.srcset=b.srcSet)}}catch(P){Dn(m,m.return,P)}}function GC(m,g,b){try{var C=m.stateNode;sne(C,m.type,b,g),C[Dt]=g}catch(P){Dn(m,m.return,P)}}function O5(m){return m.tag===5||m.tag===3||m.tag===26||m.tag===27&&kc(m.type)||m.tag===4}function VC(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||O5(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&m.tag!==18;){if(m.tag===27&&kc(m.type)||m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function YC(m,g,b){var C=m.tag;if(C===5||C===6)m=m.stateNode,g?(b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b).insertBefore(m,g):(g=b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b,g.appendChild(m),b=b._reactRootContainer,b!=null||g.onclick!==null||(g.onclick=Ko));else if(C!==4&&(C===27&&kc(m.type)&&(b=m.stateNode,g=null),m=m.child,m!==null))for(YC(m,g,b),m=m.sibling;m!==null;)YC(m,g,b),m=m.sibling}function ry(m,g,b){var C=m.tag;if(C===5||C===6)m=m.stateNode,g?b.insertBefore(m,g):b.appendChild(m);else if(C!==4&&(C===27&&kc(m.type)&&(b=m.stateNode),m=m.child,m!==null))for(ry(m,g,b),m=m.sibling;m!==null;)ry(m,g,b),m=m.sibling}function M5(m){var g=m.stateNode,b=m.memoizedProps;try{for(var C=m.type,P=g.attributes;P.length;)g.removeAttributeNode(P[0]);Cs(g,C,b),g[kt]=m,g[Dt]=b}catch(R){Dn(m,m.return,R)}}var il=!1,Ua=!1,QC=!1,I5=typeof WeakSet=="function"?WeakSet:Set,us=null;function $te(m,g){if(m=m.containerInfo,pS=_y,m=Y3(m),B1(m)){if("selectionStart"in m)var b={start:m.selectionStart,end:m.selectionEnd};else e:{b=(b=m.ownerDocument)&&b.defaultView||window;var C=b.getSelection&&b.getSelection();if(C&&C.rangeCount!==0){b=C.anchorNode;var P=C.anchorOffset,R=C.focusNode;C=C.focusOffset;try{b.nodeType,R.nodeType}catch{b=null;break e}var J=0,je=-1,qe=-1,st=0,ft=0,bt=m,ot=null;t:for(;;){for(var ut;bt!==b||P!==0&&bt.nodeType!==3||(je=J+P),bt!==R||C!==0&&bt.nodeType!==3||(qe=J+C),bt.nodeType===3&&(J+=bt.nodeValue.length),(ut=bt.firstChild)!==null;)ot=bt,bt=ut;for(;;){if(bt===m)break t;if(ot===b&&++st===P&&(je=J),ot===R&&++ft===C&&(qe=J),(ut=bt.nextSibling)!==null)break;bt=ot,ot=bt.parentNode}bt=ut}b=je===-1||qe===-1?null:{start:je,end:qe}}else b=null}b=b||{start:0,end:0}}else b=null;for(xS={focusedElem:m,selectionRange:b},_y=!1,us=g;us!==null;)if(g=us,m=g.child,(g.subtreeFlags&1028)!==0&&m!==null)m.return=g,us=m;else for(;us!==null;){switch(g=us,R=g.alternate,m=g.flags,g.tag){case 0:if((m&4)!==0&&(m=g.updateQueue,m=m!==null?m.events:null,m!==null))for(b=0;b<m.length;b++)P=m[b],P.ref.impl=P.nextImpl;break;case 11:case 15:break;case 1:if((m&1024)!==0&&R!==null){m=void 0,b=g,P=R.memoizedProps,R=R.memoizedState,C=b.stateNode;try{var Rt=Hd(b.type,P);m=C.getSnapshotBeforeUpdate(Rt,R),C.__reactInternalSnapshotBeforeUpdate=m}catch(Yt){Dn(b,b.return,Yt)}}break;case 3:if((m&1024)!==0){if(m=g.stateNode.containerInfo,b=m.nodeType,b===9)vS(m);else if(b===1)switch(m.nodeName){case"HEAD":case"HTML":case"BODY":vS(m);break;default:m.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((m&1024)!==0)throw Error(s(163))}if(m=g.sibling,m!==null){m.return=g.return,us=m;break}us=g.return}}function $5(m,g,b){var C=b.flags;switch(b.tag){case 0:case 11:case 15:ll(m,b),C&4&&qh(5,b);break;case 1:if(ll(m,b),C&4)if(m=b.stateNode,g===null)try{m.componentDidMount()}catch(J){Dn(b,b.return,J)}else{var P=Hd(b.type,g.memoizedProps);g=g.memoizedState;try{m.componentDidUpdate(P,g,m.__reactInternalSnapshotBeforeUpdate)}catch(J){Dn(b,b.return,J)}}C&64&&L5(b),C&512&&Wh(b,b.return);break;case 3:if(ll(m,b),C&64&&(m=b.updateQueue,m!==null)){if(g=null,b.child!==null)switch(b.child.tag){case 27:case 5:g=b.child.stateNode;break;case 1:g=b.child.stateNode}try{wO(m,g)}catch(J){Dn(b,b.return,J)}}break;case 27:g===null&&C&4&&M5(b);case 26:case 5:ll(m,b),g===null&&C&4&&D5(b),C&512&&Wh(b,b.return);break;case 12:ll(m,b);break;case 31:ll(m,b),C&4&&F5(m,b);break;case 13:ll(m,b),C&4&&U5(m,b),C&64&&(m=b.memoizedState,m!==null&&(m=m.dehydrated,m!==null&&(b=Gte.bind(null,b),mne(m,b))));break;case 22:if(C=b.memoizedState!==null||il,!C){g=g!==null&&g.memoizedState!==null||Ua,P=il;var R=Ua;il=C,(Ua=g)&&!R?cl(m,b,(b.subtreeFlags&8772)!==0):ll(m,b),il=P,Ua=R}break;case 30:break;default:ll(m,b)}}function R5(m){var g=m.alternate;g!==null&&(m.alternate=null,R5(g)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(g=m.stateNode,g!==null&&k(g)),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}var oa=null,tr=!1;function ol(m,g,b){for(b=b.child;b!==null;)z5(m,g,b),b=b.sibling}function z5(m,g,b){if($e&&typeof $e.onCommitFiberUnmount=="function")try{$e.onCommitFiberUnmount(De,b)}catch{}switch(b.tag){case 26:Ua||ao(b,g),ol(m,g,b),b.memoizedState?b.memoizedState.count--:b.stateNode&&(b=b.stateNode,b.parentNode.removeChild(b));break;case 27:Ua||ao(b,g);var C=oa,P=tr;kc(b.type)&&(oa=b.stateNode,tr=!1),ol(m,g,b),eg(b.stateNode),oa=C,tr=P;break;case 5:Ua||ao(b,g);case 6:if(C=oa,P=tr,oa=null,ol(m,g,b),oa=C,tr=P,oa!==null)if(tr)try{(oa.nodeType===9?oa.body:oa.nodeName==="HTML"?oa.ownerDocument.body:oa).removeChild(b.stateNode)}catch(R){Dn(b,g,R)}else try{oa.removeChild(b.stateNode)}catch(R){Dn(b,g,R)}break;case 18:oa!==null&&(tr?(m=oa,LM(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,b.stateNode),Fm(m)):LM(oa,b.stateNode));break;case 4:C=oa,P=tr,oa=b.stateNode.containerInfo,tr=!0,ol(m,g,b),oa=C,tr=P;break;case 0:case 11:case 14:case 15:Nc(2,b,g),Ua||Nc(4,b,g),ol(m,g,b);break;case 1:Ua||(ao(b,g),C=b.stateNode,typeof C.componentWillUnmount=="function"&&P5(b,g,C)),ol(m,g,b);break;case 21:ol(m,g,b);break;case 22:Ua=(C=Ua)||b.memoizedState!==null,ol(m,g,b),Ua=C;break;default:ol(m,g,b)}}function F5(m,g){if(g.memoizedState===null&&(m=g.alternate,m!==null&&(m=m.memoizedState,m!==null))){m=m.dehydrated;try{Fm(m)}catch(b){Dn(g,g.return,b)}}}function U5(m,g){if(g.memoizedState===null&&(m=g.alternate,m!==null&&(m=m.memoizedState,m!==null&&(m=m.dehydrated,m!==null))))try{Fm(m)}catch(b){Dn(g,g.return,b)}}function Rte(m){switch(m.tag){case 31:case 13:case 19:var g=m.stateNode;return g===null&&(g=m.stateNode=new I5),g;case 22:return m=m.stateNode,g=m._retryCache,g===null&&(g=m._retryCache=new I5),g;default:throw Error(s(435,m.tag))}}function iy(m,g){var b=Rte(m);g.forEach(function(C){if(!b.has(C)){b.add(C);var P=Vte.bind(null,m,C);C.then(P,P)}})}function nr(m,g){var b=g.deletions;if(b!==null)for(var C=0;C<b.length;C++){var P=b[C],R=m,J=g,je=J;e:for(;je!==null;){switch(je.tag){case 27:if(kc(je.type)){oa=je.stateNode,tr=!1;break e}break;case 5:oa=je.stateNode,tr=!1;break e;case 3:case 4:oa=je.stateNode.containerInfo,tr=!0;break e}je=je.return}if(oa===null)throw Error(s(160));z5(R,J,P),oa=null,tr=!1,R=P.alternate,R!==null&&(R.return=null),P.return=null}if(g.subtreeFlags&13886)for(g=g.child;g!==null;)B5(g,m),g=g.sibling}var Li=null;function B5(m,g){var b=m.alternate,C=m.flags;switch(m.tag){case 0:case 11:case 14:case 15:nr(g,m),ar(m),C&4&&(Nc(3,m,m.return),qh(3,m),Nc(5,m,m.return));break;case 1:nr(g,m),ar(m),C&512&&(Ua||b===null||ao(b,b.return)),C&64&&il&&(m=m.updateQueue,m!==null&&(C=m.callbacks,C!==null&&(b=m.shared.hiddenCallbacks,m.shared.hiddenCallbacks=b===null?C:b.concat(C))));break;case 26:var P=Li;if(nr(g,m),ar(m),C&512&&(Ua||b===null||ao(b,b.return)),C&4){var R=b!==null?b.memoizedState:null;if(C=m.memoizedState,b===null)if(C===null)if(m.stateNode===null){e:{C=m.type,b=m.memoizedProps,P=P.ownerDocument||P;t:switch(C){case"title":R=P.getElementsByTagName("title")[0],(!R||R[X]||R[kt]||R.namespaceURI==="http://www.w3.org/2000/svg"||R.hasAttribute("itemprop"))&&(R=P.createElement(C),P.head.insertBefore(R,P.querySelector("head > title"))),Cs(R,C,b),R[kt]=m,Ge(R),C=R;break e;case"link":var J=BM("link","href",P).get(C+(b.href||""));if(J){for(var je=0;je<J.length;je++)if(R=J[je],R.getAttribute("href")===(b.href==null||b.href===""?null:b.href)&&R.getAttribute("rel")===(b.rel==null?null:b.rel)&&R.getAttribute("title")===(b.title==null?null:b.title)&&R.getAttribute("crossorigin")===(b.crossOrigin==null?null:b.crossOrigin)){J.splice(je,1);break t}}R=P.createElement(C),Cs(R,C,b),P.head.appendChild(R);break;case"meta":if(J=BM("meta","content",P).get(C+(b.content||""))){for(je=0;je<J.length;je++)if(R=J[je],R.getAttribute("content")===(b.content==null?null:""+b.content)&&R.getAttribute("name")===(b.name==null?null:b.name)&&R.getAttribute("property")===(b.property==null?null:b.property)&&R.getAttribute("http-equiv")===(b.httpEquiv==null?null:b.httpEquiv)&&R.getAttribute("charset")===(b.charSet==null?null:b.charSet)){J.splice(je,1);break t}}R=P.createElement(C),Cs(R,C,b),P.head.appendChild(R);break;default:throw Error(s(468,C))}R[kt]=m,Ge(R),C=R}m.stateNode=C}else HM(P,m.type,m.stateNode);else m.stateNode=UM(P,C,m.memoizedProps);else R!==C?(R===null?b.stateNode!==null&&(b=b.stateNode,b.parentNode.removeChild(b)):R.count--,C===null?HM(P,m.type,m.stateNode):UM(P,C,m.memoizedProps)):C===null&&m.stateNode!==null&&GC(m,m.memoizedProps,b.memoizedProps)}break;case 27:nr(g,m),ar(m),C&512&&(Ua||b===null||ao(b,b.return)),b!==null&&C&4&&GC(m,m.memoizedProps,b.memoizedProps);break;case 5:if(nr(g,m),ar(m),C&512&&(Ua||b===null||ao(b,b.return)),m.flags&32){P=m.stateNode;try{cm(P,"")}catch(Rt){Dn(m,m.return,Rt)}}C&4&&m.stateNode!=null&&(P=m.memoizedProps,GC(m,P,b!==null?b.memoizedProps:P)),C&1024&&(QC=!0);break;case 6:if(nr(g,m),ar(m),C&4){if(m.stateNode===null)throw Error(s(162));C=m.memoizedProps,b=m.stateNode;try{b.nodeValue=C}catch(Rt){Dn(m,m.return,Rt)}}break;case 3:if(Ny=null,P=Li,Li=vy(g.containerInfo),nr(g,m),Li=P,ar(m),C&4&&b!==null&&b.memoizedState.isDehydrated)try{Fm(g.containerInfo)}catch(Rt){Dn(m,m.return,Rt)}QC&&(QC=!1,H5(m));break;case 4:C=Li,Li=vy(m.stateNode.containerInfo),nr(g,m),ar(m),Li=C;break;case 12:nr(g,m),ar(m);break;case 31:nr(g,m),ar(m),C&4&&(C=m.updateQueue,C!==null&&(m.updateQueue=null,iy(m,C)));break;case 13:nr(g,m),ar(m),m.child.flags&8192&&m.memoizedState!==null!=(b!==null&&b.memoizedState!==null)&&(ly=Ce()),C&4&&(C=m.updateQueue,C!==null&&(m.updateQueue=null,iy(m,C)));break;case 22:P=m.memoizedState!==null;var qe=b!==null&&b.memoizedState!==null,st=il,ft=Ua;if(il=st||P,Ua=ft||qe,nr(g,m),Ua=ft,il=st,ar(m),C&8192)e:for(g=m.stateNode,g._visibility=P?g._visibility&-2:g._visibility|1,P&&(b===null||qe||il||Ua||qd(m)),b=null,g=m;;){if(g.tag===5||g.tag===26){if(b===null){qe=b=g;try{if(R=qe.stateNode,P)J=R.style,typeof J.setProperty=="function"?J.setProperty("display","none","important"):J.display="none";else{je=qe.stateNode;var bt=qe.memoizedProps.style,ot=bt!=null&&bt.hasOwnProperty("display")?bt.display:null;je.style.display=ot==null||typeof ot=="boolean"?"":(""+ot).trim()}}catch(Rt){Dn(qe,qe.return,Rt)}}}else if(g.tag===6){if(b===null){qe=g;try{qe.stateNode.nodeValue=P?"":qe.memoizedProps}catch(Rt){Dn(qe,qe.return,Rt)}}}else if(g.tag===18){if(b===null){qe=g;try{var ut=qe.stateNode;P?PM(ut,!0):PM(qe.stateNode,!1)}catch(Rt){Dn(qe,qe.return,Rt)}}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===m)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===m)break e;for(;g.sibling===null;){if(g.return===null||g.return===m)break e;b===g&&(b=null),g=g.return}b===g&&(b=null),g.sibling.return=g.return,g=g.sibling}C&4&&(C=m.updateQueue,C!==null&&(b=C.retryQueue,b!==null&&(C.retryQueue=null,iy(m,b))));break;case 19:nr(g,m),ar(m),C&4&&(C=m.updateQueue,C!==null&&(m.updateQueue=null,iy(m,C)));break;case 30:break;case 21:break;default:nr(g,m),ar(m)}}function ar(m){var g=m.flags;if(g&2){try{for(var b,C=m.return;C!==null;){if(O5(C)){b=C;break}C=C.return}if(b==null)throw Error(s(160));switch(b.tag){case 27:var P=b.stateNode,R=VC(m);ry(m,R,P);break;case 5:var J=b.stateNode;b.flags&32&&(cm(J,""),b.flags&=-33);var je=VC(m);ry(m,je,J);break;case 3:case 4:var qe=b.stateNode.containerInfo,st=VC(m);YC(m,st,qe);break;default:throw Error(s(161))}}catch(ft){Dn(m,m.return,ft)}m.flags&=-3}g&4096&&(m.flags&=-4097)}function H5(m){if(m.subtreeFlags&1024)for(m=m.child;m!==null;){var g=m;H5(g),g.tag===5&&g.flags&1024&&g.stateNode.reset(),m=m.sibling}}function ll(m,g){if(g.subtreeFlags&8772)for(g=g.child;g!==null;)$5(m,g.alternate,g),g=g.sibling}function qd(m){for(m=m.child;m!==null;){var g=m;switch(g.tag){case 0:case 11:case 14:case 15:Nc(4,g,g.return),qd(g);break;case 1:ao(g,g.return);var b=g.stateNode;typeof b.componentWillUnmount=="function"&&P5(g,g.return,b),qd(g);break;case 27:eg(g.stateNode);case 26:case 5:ao(g,g.return),qd(g);break;case 22:g.memoizedState===null&&qd(g);break;case 30:qd(g);break;default:qd(g)}m=m.sibling}}function cl(m,g,b){for(b=b&&(g.subtreeFlags&8772)!==0,g=g.child;g!==null;){var C=g.alternate,P=m,R=g,J=R.flags;switch(R.tag){case 0:case 11:case 15:cl(P,R,b),qh(4,R);break;case 1:if(cl(P,R,b),C=R,P=C.stateNode,typeof P.componentDidMount=="function")try{P.componentDidMount()}catch(st){Dn(C,C.return,st)}if(C=R,P=C.updateQueue,P!==null){var je=C.stateNode;try{var qe=P.shared.hiddenCallbacks;if(qe!==null)for(P.shared.hiddenCallbacks=null,P=0;P<qe.length;P++)vO(qe[P],je)}catch(st){Dn(C,C.return,st)}}b&&J&64&&L5(R),Wh(R,R.return);break;case 27:M5(R);case 26:case 5:cl(P,R,b),b&&C===null&&J&4&&D5(R),Wh(R,R.return);break;case 12:cl(P,R,b);break;case 31:cl(P,R,b),b&&J&4&&F5(P,R);break;case 13:cl(P,R,b),b&&J&4&&U5(P,R);break;case 22:R.memoizedState===null&&cl(P,R,b),Wh(R,R.return);break;case 30:break;default:cl(P,R,b)}g=g.sibling}}function KC(m,g){var b=null;m!==null&&m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(b=m.memoizedState.cachePool.pool),m=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(m=g.memoizedState.cachePool.pool),m!==b&&(m!=null&&m.refCount++,b!=null&&Lh(b))}function XC(m,g){m=null,g.alternate!==null&&(m=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==m&&(g.refCount++,m!=null&&Lh(m))}function Pi(m,g,b,C){if(g.subtreeFlags&10256)for(g=g.child;g!==null;)q5(m,g,b,C),g=g.sibling}function q5(m,g,b,C){var P=g.flags;switch(g.tag){case 0:case 11:case 15:Pi(m,g,b,C),P&2048&&qh(9,g);break;case 1:Pi(m,g,b,C);break;case 3:Pi(m,g,b,C),P&2048&&(m=null,g.alternate!==null&&(m=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==m&&(g.refCount++,m!=null&&Lh(m)));break;case 12:if(P&2048){Pi(m,g,b,C),m=g.stateNode;try{var R=g.memoizedProps,J=R.id,je=R.onPostCommit;typeof je=="function"&&je(J,g.alternate===null?"mount":"update",m.passiveEffectDuration,-0)}catch(qe){Dn(g,g.return,qe)}}else Pi(m,g,b,C);break;case 31:Pi(m,g,b,C);break;case 13:Pi(m,g,b,C);break;case 23:break;case 22:R=g.stateNode,J=g.alternate,g.memoizedState!==null?R._visibility&2?Pi(m,g,b,C):Gh(m,g):R._visibility&2?Pi(m,g,b,C):(R._visibility|=2,km(m,g,b,C,(g.subtreeFlags&10256)!==0||!1)),P&2048&&KC(J,g);break;case 24:Pi(m,g,b,C),P&2048&&XC(g.alternate,g);break;default:Pi(m,g,b,C)}}function km(m,g,b,C,P){for(P=P&&((g.subtreeFlags&10256)!==0||!1),g=g.child;g!==null;){var R=m,J=g,je=b,qe=C,st=J.flags;switch(J.tag){case 0:case 11:case 15:km(R,J,je,qe,P),qh(8,J);break;case 23:break;case 22:var ft=J.stateNode;J.memoizedState!==null?ft._visibility&2?km(R,J,je,qe,P):Gh(R,J):(ft._visibility|=2,km(R,J,je,qe,P)),P&&st&2048&&KC(J.alternate,J);break;case 24:km(R,J,je,qe,P),P&&st&2048&&XC(J.alternate,J);break;default:km(R,J,je,qe,P)}g=g.sibling}}function Gh(m,g){if(g.subtreeFlags&10256)for(g=g.child;g!==null;){var b=m,C=g,P=C.flags;switch(C.tag){case 22:Gh(b,C),P&2048&&KC(C.alternate,C);break;case 24:Gh(b,C),P&2048&&XC(C.alternate,C);break;default:Gh(b,C)}g=g.sibling}}var Vh=8192;function Em(m,g,b){if(m.subtreeFlags&Vh)for(m=m.child;m!==null;)W5(m,g,b),m=m.sibling}function W5(m,g,b){switch(m.tag){case 26:Em(m,g,b),m.flags&Vh&&m.memoizedState!==null&&Cne(b,Li,m.memoizedState,m.memoizedProps);break;case 5:Em(m,g,b);break;case 3:case 4:var C=Li;Li=vy(m.stateNode.containerInfo),Em(m,g,b),Li=C;break;case 22:m.memoizedState===null&&(C=m.alternate,C!==null&&C.memoizedState!==null?(C=Vh,Vh=16777216,Em(m,g,b),Vh=C):Em(m,g,b));break;default:Em(m,g,b)}}function G5(m){var g=m.alternate;if(g!==null&&(m=g.child,m!==null)){g.child=null;do g=m.sibling,m.sibling=null,m=g;while(m!==null)}}function Yh(m){var g=m.deletions;if((m.flags&16)!==0){if(g!==null)for(var b=0;b<g.length;b++){var C=g[b];us=C,Y5(C,m)}G5(m)}if(m.subtreeFlags&10256)for(m=m.child;m!==null;)V5(m),m=m.sibling}function V5(m){switch(m.tag){case 0:case 11:case 15:Yh(m),m.flags&2048&&Nc(9,m,m.return);break;case 3:Yh(m);break;case 12:Yh(m);break;case 22:var g=m.stateNode;m.memoizedState!==null&&g._visibility&2&&(m.return===null||m.return.tag!==13)?(g._visibility&=-3,oy(m)):Yh(m);break;default:Yh(m)}}function oy(m){var g=m.deletions;if((m.flags&16)!==0){if(g!==null)for(var b=0;b<g.length;b++){var C=g[b];us=C,Y5(C,m)}G5(m)}for(m=m.child;m!==null;){switch(g=m,g.tag){case 0:case 11:case 15:Nc(8,g,g.return),oy(g);break;case 22:b=g.stateNode,b._visibility&2&&(b._visibility&=-3,oy(g));break;default:oy(g)}m=m.sibling}}function Y5(m,g){for(;us!==null;){var b=us;switch(b.tag){case 0:case 11:case 15:Nc(8,b,g);break;case 23:case 22:if(b.memoizedState!==null&&b.memoizedState.cachePool!==null){var C=b.memoizedState.cachePool.pool;C!=null&&C.refCount++}break;case 24:Lh(b.memoizedState.cache)}if(C=b.child,C!==null)C.return=b,us=C;else e:for(b=m;us!==null;){C=us;var P=C.sibling,R=C.return;if(R5(C),C===b){us=null;break e}if(P!==null){P.return=R,us=P;break e}us=R}}}var zte={getCacheForType:function(m){var g=Ns(Ra),b=g.data.get(m);return b===void 0&&(b=m(),g.data.set(m,b)),b},cacheSignal:function(){return Ns(Ra).controller.signal}},Fte=typeof WeakMap=="function"?WeakMap:Map,An=0,qn=null,un=null,hn=0,Pn=0,Er=null,jc=!1,Lm=!1,ZC=!1,dl=0,wa=0,Cc=0,Wd=0,JC=0,Lr=0,Pm=0,Qh=null,sr=null,eS=!1,ly=0,Q5=0,cy=1/0,dy=null,Sc=null,Ka=0,_c=null,Dm=null,ul=0,tS=0,nS=null,K5=null,Kh=0,aS=null;function Pr(){return(An&2)!==0&&hn!==0?hn&-hn:V.T!==null?cS():Qe()}function X5(){if(Lr===0)if((hn&536870912)===0||yn){var m=Tt;Tt<<=1,(Tt&3932160)===0&&(Tt=262144),Lr=m}else Lr=536870912;return m=Tr.current,m!==null&&(m.flags|=32),Lr}function rr(m,g,b){(m===qn&&(Pn===2||Pn===9)||m.cancelPendingCommit!==null)&&(Om(m,0),Ac(m,hn,Lr,!1)),O(m,b),((An&2)===0||m!==qn)&&(m===qn&&((An&2)===0&&(Wd|=b),wa===4&&Ac(m,hn,Lr,!1)),so(m))}function Z5(m,g,b){if((An&6)!==0)throw Error(s(327));var C=!b&&(g&127)===0&&(g&m.expiredLanes)===0||Fe(m,g),P=C?Hte(m,g):rS(m,g,!0),R=C;do{if(P===0){Lm&&!C&&Ac(m,g,0,!1);break}else{if(b=m.current.alternate,R&&!Ute(b)){P=rS(m,g,!1),R=!1;continue}if(P===2){if(R=g,m.errorRecoveryDisabledLanes&R)var J=0;else J=m.pendingLanes&-536870913,J=J!==0?J:J&536870912?536870912:0;if(J!==0){g=J;e:{var je=m;P=Qh;var qe=je.current.memoizedState.isDehydrated;if(qe&&(Om(je,J).flags|=256),J=rS(je,J,!1),J!==2){if(ZC&&!qe){je.errorRecoveryDisabledLanes|=R,Wd|=R,P=4;break e}R=sr,sr=P,R!==null&&(sr===null?sr=R:sr.push.apply(sr,R))}P=J}if(R=!1,P!==2)continue}}if(P===1){Om(m,0),Ac(m,g,0,!0);break}e:{switch(C=m,R=P,R){case 0:case 1:throw Error(s(345));case 4:if((g&4194048)!==g)break;case 6:Ac(C,g,Lr,!jc);break e;case 2:sr=null;break;case 3:case 5:break;default:throw Error(s(329))}if((g&62914560)===g&&(P=ly+300-Ce(),10<P)){if(Ac(C,g,Lr,!jc),ie(C,0,!0)!==0)break e;ul=g,C.timeoutHandle=kM(J5.bind(null,C,b,sr,dy,eS,g,Lr,Wd,Pm,jc,R,"Throttled",-0,0),P);break e}J5(C,b,sr,dy,eS,g,Lr,Wd,Pm,jc,R,null,-0,0)}}break}while(!0);so(m)}function J5(m,g,b,C,P,R,J,je,qe,st,ft,bt,ot,ut){if(m.timeoutHandle=-1,bt=g.subtreeFlags,bt&8192||(bt&16785408)===16785408){bt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ko},W5(g,R,bt);var Rt=(R&62914560)===R?ly-Ce():(R&4194048)===R?Q5-Ce():0;if(Rt=Sne(bt,Rt),Rt!==null){ul=R,m.cancelPendingCommit=Rt(oM.bind(null,m,g,R,b,C,P,J,je,qe,ft,bt,null,ot,ut)),Ac(m,R,J,!st);return}}oM(m,g,R,b,C,P,J,je,qe)}function Ute(m){for(var g=m;;){var b=g.tag;if((b===0||b===11||b===15)&&g.flags&16384&&(b=g.updateQueue,b!==null&&(b=b.stores,b!==null)))for(var C=0;C<b.length;C++){var P=b[C],R=P.getSnapshot;P=P.value;try{if(!_r(R(),P))return!1}catch{return!1}}if(b=g.child,g.subtreeFlags&16384&&b!==null)b.return=g,g=b;else{if(g===m)break;for(;g.sibling===null;){if(g.return===null||g.return===m)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function Ac(m,g,b,C){g&=~JC,g&=~Wd,m.suspendedLanes|=g,m.pingedLanes&=~g,C&&(m.warmLanes|=g),C=m.expirationTimes;for(var P=g;0<P;){var R=31-Ze(P),J=1<<R;C[R]=-1,P&=~J}b!==0&&I(m,b,g)}function uy(){return(An&6)===0?(Xh(0),!1):!0}function sS(){if(un!==null){if(Pn===0)var m=un.return;else m=un,el=Id=null,vC(m),Cm=null,Dh=0,m=un;for(;m!==null;)E5(m.alternate,m),m=m.return;un=null}}function Om(m,g){var b=m.timeoutHandle;b!==-1&&(m.timeoutHandle=-1,one(b)),b=m.cancelPendingCommit,b!==null&&(m.cancelPendingCommit=null,b()),ul=0,sS(),qn=m,un=b=Zo(m.current,null),hn=g,Pn=0,Er=null,jc=!1,Lm=Fe(m,g),ZC=!1,Pm=Lr=JC=Wd=Cc=wa=0,sr=Qh=null,eS=!1,(g&8)!==0&&(g|=g&32);var C=m.entangledLanes;if(C!==0)for(m=m.entanglements,C&=g;0<C;){var P=31-Ze(C),R=1<<P;g|=m[P],C&=~R}return dl=g,P0(),b}function eM(m,g){an=null,V.H=Uh,g===jm||g===F0?(g=pO(),Pn=3):g===lC?(g=pO(),Pn=4):Pn=g===IC?8:g!==null&&typeof g=="object"&&typeof g.then=="function"?6:1,Er=g,un===null&&(wa=1,ey(m,Kr(g,m.current)))}function tM(){var m=Tr.current;return m===null?!0:(hn&4194048)===hn?ei===null:(hn&62914560)===hn||(hn&536870912)!==0?m===ei:!1}function nM(){var m=V.H;return V.H=Uh,m===null?Uh:m}function aM(){var m=V.A;return V.A=zte,m}function my(){wa=4,jc||(hn&4194048)!==hn&&Tr.current!==null||(Lm=!0),(Cc&134217727)===0&&(Wd&134217727)===0||qn===null||Ac(qn,hn,Lr,!1)}function rS(m,g,b){var C=An;An|=2;var P=nM(),R=aM();(qn!==m||hn!==g)&&(dy=null,Om(m,g)),g=!1;var J=wa;e:do try{if(Pn!==0&&un!==null){var je=un,qe=Er;switch(Pn){case 8:sS(),J=6;break e;case 3:case 2:case 9:case 6:Tr.current===null&&(g=!0);var st=Pn;if(Pn=0,Er=null,Mm(m,je,qe,st),b&&Lm){J=0;break e}break;default:st=Pn,Pn=0,Er=null,Mm(m,je,qe,st)}}Bte(),J=wa;break}catch(ft){eM(m,ft)}while(!0);return g&&m.shellSuspendCounter++,el=Id=null,An=C,V.H=P,V.A=R,un===null&&(qn=null,hn=0,P0()),J}function Bte(){for(;un!==null;)sM(un)}function Hte(m,g){var b=An;An|=2;var C=nM(),P=aM();qn!==m||hn!==g?(dy=null,cy=Ce()+500,Om(m,g)):Lm=Fe(m,g);e:do try{if(Pn!==0&&un!==null){g=un;var R=Er;t:switch(Pn){case 1:Pn=0,Er=null,Mm(m,g,R,1);break;case 2:case 9:if(hO(R)){Pn=0,Er=null,rM(g);break}g=function(){Pn!==2&&Pn!==9||qn!==m||(Pn=7),so(m)},R.then(g,g);break e;case 3:Pn=7;break e;case 4:Pn=5;break e;case 7:hO(R)?(Pn=0,Er=null,rM(g)):(Pn=0,Er=null,Mm(m,g,R,7));break;case 5:var J=null;switch(un.tag){case 26:J=un.memoizedState;case 5:case 27:var je=un;if(J?qM(J):je.stateNode.complete){Pn=0,Er=null;var qe=je.sibling;if(qe!==null)un=qe;else{var st=je.return;st!==null?(un=st,fy(st)):un=null}break t}}Pn=0,Er=null,Mm(m,g,R,5);break;case 6:Pn=0,Er=null,Mm(m,g,R,6);break;case 8:sS(),wa=6;break e;default:throw Error(s(462))}}qte();break}catch(ft){eM(m,ft)}while(!0);return el=Id=null,V.H=C,V.A=P,An=b,un!==null?0:(qn=null,hn=0,P0(),wa)}function qte(){for(;un!==null&&!Je();)sM(un)}function sM(m){var g=T5(m.alternate,m,dl);m.memoizedProps=m.pendingProps,g===null?fy(m):un=g}function rM(m){var g=m,b=g.alternate;switch(g.tag){case 15:case 0:g=N5(b,g,g.pendingProps,g.type,void 0,hn);break;case 11:g=N5(b,g,g.pendingProps,g.type.render,g.ref,hn);break;case 5:vC(g);default:E5(b,g),g=un=aO(g,dl),g=T5(b,g,dl)}m.memoizedProps=m.pendingProps,g===null?fy(m):un=g}function Mm(m,g,b,C){el=Id=null,vC(g),Cm=null,Dh=0;var P=g.return;try{if(Pte(m,P,g,b,hn)){wa=1,ey(m,Kr(b,m.current)),un=null;return}}catch(R){if(P!==null)throw un=P,R;wa=1,ey(m,Kr(b,m.current)),un=null;return}g.flags&32768?(yn||C===1?m=!0:Lm||(hn&536870912)!==0?m=!1:(jc=m=!0,(C===2||C===9||C===3||C===6)&&(C=Tr.current,C!==null&&C.tag===13&&(C.flags|=16384))),iM(g,m)):fy(g)}function fy(m){var g=m;do{if((g.flags&32768)!==0){iM(g,jc);return}m=g.return;var b=Mte(g.alternate,g,dl);if(b!==null){un=b;return}if(g=g.sibling,g!==null){un=g;return}un=g=m}while(g!==null);wa===0&&(wa=5)}function iM(m,g){do{var b=Ite(m.alternate,m);if(b!==null){b.flags&=32767,un=b;return}if(b=m.return,b!==null&&(b.flags|=32768,b.subtreeFlags=0,b.deletions=null),!g&&(m=m.sibling,m!==null)){un=m;return}un=m=b}while(m!==null);wa=6,un=null}function oM(m,g,b,C,P,R,J,je,qe){m.cancelPendingCommit=null;do hy();while(Ka!==0);if((An&6)!==0)throw Error(s(327));if(g!==null){if(g===m.current)throw Error(s(177));if(R=g.lanes|g.childLanes,R|=V1,z(m,b,R,J,je,qe),m===qn&&(un=qn=null,hn=0),Dm=g,_c=m,ul=b,tS=R,nS=P,K5=C,(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?(m.callbackNode=null,m.callbackPriority=0,Yte(K,function(){return mM(),null})):(m.callbackNode=null,m.callbackPriority=0),C=(g.flags&13878)!==0,(g.subtreeFlags&13878)!==0||C){C=V.T,V.T=null,P=Z.p,Z.p=2,J=An,An|=4;try{$te(m,g,b)}finally{An=J,Z.p=P,V.T=C}}Ka=1,lM(),cM(),dM()}}function lM(){if(Ka===1){Ka=0;var m=_c,g=Dm,b=(g.flags&13878)!==0;if((g.subtreeFlags&13878)!==0||b){b=V.T,V.T=null;var C=Z.p;Z.p=2;var P=An;An|=4;try{B5(g,m);var R=xS,J=Y3(m.containerInfo),je=R.focusedElem,qe=R.selectionRange;if(J!==je&&je&&je.ownerDocument&&V3(je.ownerDocument.documentElement,je)){if(qe!==null&&B1(je)){var st=qe.start,ft=qe.end;if(ft===void 0&&(ft=st),"selectionStart"in je)je.selectionStart=st,je.selectionEnd=Math.min(ft,je.value.length);else{var bt=je.ownerDocument||document,ot=bt&&bt.defaultView||window;if(ot.getSelection){var ut=ot.getSelection(),Rt=je.textContent.length,Yt=Math.min(qe.start,Rt),Un=qe.end===void 0?Yt:Math.min(qe.end,Rt);!ut.extend&&Yt>Un&&(J=Un,Un=Yt,Yt=J);var et=G3(je,Yt),Ve=G3(je,Un);if(et&&Ve&&(ut.rangeCount!==1||ut.anchorNode!==et.node||ut.anchorOffset!==et.offset||ut.focusNode!==Ve.node||ut.focusOffset!==Ve.offset)){var at=bt.createRange();at.setStart(et.node,et.offset),ut.removeAllRanges(),Yt>Un?(ut.addRange(at),ut.extend(Ve.node,Ve.offset)):(at.setEnd(Ve.node,Ve.offset),ut.addRange(at))}}}}for(bt=[],ut=je;ut=ut.parentNode;)ut.nodeType===1&&bt.push({element:ut,left:ut.scrollLeft,top:ut.scrollTop});for(typeof je.focus=="function"&&je.focus(),je=0;je<bt.length;je++){var pt=bt[je];pt.element.scrollLeft=pt.left,pt.element.scrollTop=pt.top}}_y=!!pS,xS=pS=null}finally{An=P,Z.p=C,V.T=b}}m.current=g,Ka=2}}function cM(){if(Ka===2){Ka=0;var m=_c,g=Dm,b=(g.flags&8772)!==0;if((g.subtreeFlags&8772)!==0||b){b=V.T,V.T=null;var C=Z.p;Z.p=2;var P=An;An|=4;try{$5(m,g.alternate,g)}finally{An=P,Z.p=C,V.T=b}}Ka=3}}function dM(){if(Ka===4||Ka===3){Ka=0,Oe();var m=_c,g=Dm,b=ul,C=K5;(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?Ka=5:(Ka=0,Dm=_c=null,uM(m,m.pendingLanes));var P=m.pendingLanes;if(P===0&&(Sc=null),Ee(b),g=g.stateNode,$e&&typeof $e.onCommitFiberRoot=="function")try{$e.onCommitFiberRoot(De,g,void 0,(g.current.flags&128)===128)}catch{}if(C!==null){g=V.T,P=Z.p,Z.p=2,V.T=null;try{for(var R=m.onRecoverableError,J=0;J<C.length;J++){var je=C[J];R(je.value,{componentStack:je.stack})}}finally{V.T=g,Z.p=P}}(ul&3)!==0&&hy(),so(m),P=m.pendingLanes,(b&261930)!==0&&(P&42)!==0?m===aS?Kh++:(Kh=0,aS=m):Kh=0,Xh(0)}}function uM(m,g){(m.pooledCacheLanes&=g)===0&&(g=m.pooledCache,g!=null&&(m.pooledCache=null,Lh(g)))}function hy(){return lM(),cM(),dM(),mM()}function mM(){if(Ka!==5)return!1;var m=_c,g=tS;tS=0;var b=Ee(ul),C=V.T,P=Z.p;try{Z.p=32>b?32:b,V.T=null,b=nS,nS=null;var R=_c,J=ul;if(Ka=0,Dm=_c=null,ul=0,(An&6)!==0)throw Error(s(331));var je=An;if(An|=4,V5(R.current),q5(R,R.current,J,b),An=je,Xh(0,!1),$e&&typeof $e.onPostCommitFiberRoot=="function")try{$e.onPostCommitFiberRoot(De,R)}catch{}return!0}finally{Z.p=P,V.T=C,uM(m,g)}}function fM(m,g,b){g=Kr(b,g),g=MC(m.stateNode,g,2),m=bc(m,g,2),m!==null&&(O(m,2),so(m))}function Dn(m,g,b){if(m.tag===3)fM(m,m,b);else for(;g!==null;){if(g.tag===3){fM(g,m,b);break}else if(g.tag===1){var C=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(Sc===null||!Sc.has(C))){m=Kr(b,m),b=h5(2),C=bc(g,b,2),C!==null&&(g5(b,C,g,m),O(C,2),so(C));break}}g=g.return}}function iS(m,g,b){var C=m.pingCache;if(C===null){C=m.pingCache=new Fte;var P=new Set;C.set(g,P)}else P=C.get(g),P===void 0&&(P=new Set,C.set(g,P));P.has(b)||(ZC=!0,P.add(b),m=Wte.bind(null,m,g,b),g.then(m,m))}function Wte(m,g,b){var C=m.pingCache;C!==null&&C.delete(g),m.pingedLanes|=m.suspendedLanes&b,m.warmLanes&=~b,qn===m&&(hn&b)===b&&(wa===4||wa===3&&(hn&62914560)===hn&&300>Ce()-ly?(An&2)===0&&Om(m,0):JC|=b,Pm===hn&&(Pm=0)),so(m)}function hM(m,g){g===0&&(g=be()),m=Dd(m,g),m!==null&&(O(m,g),so(m))}function Gte(m){var g=m.memoizedState,b=0;g!==null&&(b=g.retryLane),hM(m,b)}function Vte(m,g){var b=0;switch(m.tag){case 31:case 13:var C=m.stateNode,P=m.memoizedState;P!==null&&(b=P.retryLane);break;case 19:C=m.stateNode;break;case 22:C=m.stateNode._retryCache;break;default:throw Error(s(314))}C!==null&&C.delete(g),hM(m,b)}function Yte(m,g){return He(m,g)}var gy=null,Im=null,oS=!1,py=!1,lS=!1,Tc=0;function so(m){m!==Im&&m.next===null&&(Im===null?gy=Im=m:Im=Im.next=m),py=!0,oS||(oS=!0,Kte())}function Xh(m,g){if(!lS&&py){lS=!0;do for(var b=!1,C=gy;C!==null;){if(m!==0){var P=C.pendingLanes;if(P===0)var R=0;else{var J=C.suspendedLanes,je=C.pingedLanes;R=(1<<31-Ze(42|m)+1)-1,R&=P&~(J&~je),R=R&201326741?R&201326741|1:R?R|2:0}R!==0&&(b=!0,yM(C,R))}else R=hn,R=ie(C,C===qn?R:0,C.cancelPendingCommit!==null||C.timeoutHandle!==-1),(R&3)===0||Fe(C,R)||(b=!0,yM(C,R));C=C.next}while(b);lS=!1}}function Qte(){gM()}function gM(){py=oS=!1;var m=0;Tc!==0&&ine()&&(m=Tc);for(var g=Ce(),b=null,C=gy;C!==null;){var P=C.next,R=pM(C,g);R===0?(C.next=null,b===null?gy=P:b.next=P,P===null&&(Im=b)):(b=C,(m!==0||(R&3)!==0)&&(py=!0)),C=P}Ka!==0&&Ka!==5||Xh(m),Tc!==0&&(Tc=0)}function pM(m,g){for(var b=m.suspendedLanes,C=m.pingedLanes,P=m.expirationTimes,R=m.pendingLanes&-62914561;0<R;){var J=31-Ze(R),je=1<<J,qe=P[J];qe===-1?((je&b)===0||(je&C)!==0)&&(P[J]=Le(je,g)):qe<=g&&(m.expiredLanes|=je),R&=~je}if(g=qn,b=hn,b=ie(m,m===g?b:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),C=m.callbackNode,b===0||m===g&&(Pn===2||Pn===9)||m.cancelPendingCommit!==null)return C!==null&&C!==null&&Ke(C),m.callbackNode=null,m.callbackPriority=0;if((b&3)===0||Fe(m,b)){if(g=b&-b,g===m.callbackPriority)return g;switch(C!==null&&Ke(C),Ee(b)){case 2:case 8:b=H;break;case 32:b=K;break;case 268435456:b=Me;break;default:b=K}return C=xM.bind(null,m),b=He(b,C),m.callbackPriority=g,m.callbackNode=b,g}return C!==null&&C!==null&&Ke(C),m.callbackPriority=2,m.callbackNode=null,2}function xM(m,g){if(Ka!==0&&Ka!==5)return m.callbackNode=null,m.callbackPriority=0,null;var b=m.callbackNode;if(hy()&&m.callbackNode!==b)return null;var C=hn;return C=ie(m,m===qn?C:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),C===0?null:(Z5(m,C,g),pM(m,Ce()),m.callbackNode!=null&&m.callbackNode===b?xM.bind(null,m):null)}function yM(m,g){if(hy())return null;Z5(m,g,!0)}function Kte(){lne(function(){(An&6)!==0?He(ue,Qte):gM()})}function cS(){if(Tc===0){var m=wm;m===0&&(m=wt,wt<<=1,(wt&261888)===0&&(wt=256)),Tc=m}return Tc}function bM(m){return m==null||typeof m=="symbol"||typeof m=="boolean"?null:typeof m=="function"?m:C0(""+m)}function vM(m,g){var b=g.ownerDocument.createElement("input");return b.name=g.name,b.value=g.value,m.id&&b.setAttribute("form",m.id),g.parentNode.insertBefore(b,g),m=new FormData(m),b.parentNode.removeChild(b),m}function Xte(m,g,b,C,P){if(g==="submit"&&b&&b.stateNode===P){var R=bM((P[Dt]||null).action),J=C.submitter;J&&(g=(g=J[Dt]||null)?bM(g.formAction):J.getAttribute("formAction"),g!==null&&(R=g,J=null));var je=new T0("action","action",null,C,P);m.push({event:je,listeners:[{instance:null,listener:function(){if(C.defaultPrevented){if(Tc!==0){var qe=J?vM(P,J):new FormData(P);kC(b,{pending:!0,data:qe,method:P.method,action:R},null,qe)}}else typeof R=="function"&&(je.preventDefault(),qe=J?vM(P,J):new FormData(P),kC(b,{pending:!0,data:qe,method:P.method,action:R},R,qe))},currentTarget:P}]})}}for(var dS=0;dS<G1.length;dS++){var uS=G1[dS],Zte=uS.toLowerCase(),Jte=uS[0].toUpperCase()+uS.slice(1);Ei(Zte,"on"+Jte)}Ei(X3,"onAnimationEnd"),Ei(Z3,"onAnimationIteration"),Ei(J3,"onAnimationStart"),Ei("dblclick","onDoubleClick"),Ei("focusin","onFocus"),Ei("focusout","onBlur"),Ei(gte,"onTransitionRun"),Ei(pte,"onTransitionStart"),Ei(xte,"onTransitionCancel"),Ei(eO,"onTransitionEnd"),Kt("onMouseEnter",["mouseout","mouseover"]),Kt("onMouseLeave",["mouseout","mouseover"]),Kt("onPointerEnter",["pointerout","pointerover"]),Kt("onPointerLeave",["pointerout","pointerover"]),Et("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Et("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Et("onBeforeInput",["compositionend","keypress","textInput","paste"]),Et("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Et("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Et("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ene=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Zh));function wM(m,g){g=(g&4)!==0;for(var b=0;b<m.length;b++){var C=m[b],P=C.event;C=C.listeners;e:{var R=void 0;if(g)for(var J=C.length-1;0<=J;J--){var je=C[J],qe=je.instance,st=je.currentTarget;if(je=je.listener,qe!==R&&P.isPropagationStopped())break e;R=je,P.currentTarget=st;try{R(P)}catch(ft){L0(ft)}P.currentTarget=null,R=qe}else for(J=0;J<C.length;J++){if(je=C[J],qe=je.instance,st=je.currentTarget,je=je.listener,qe!==R&&P.isPropagationStopped())break e;R=je,P.currentTarget=st;try{R(P)}catch(ft){L0(ft)}P.currentTarget=null,R=qe}}}}function mn(m,g){var b=g[Qn];b===void 0&&(b=g[Qn]=new Set);var C=m+"__bubble";b.has(C)||(NM(g,m,2,!1),b.add(C))}function mS(m,g,b){var C=0;g&&(C|=4),NM(b,m,C,g)}var xy="_reactListening"+Math.random().toString(36).slice(2);function fS(m){if(!m[xy]){m[xy]=!0,ct.forEach(function(b){b!=="selectionchange"&&(ene.has(b)||mS(b,!1,m),mS(b,!0,m))});var g=m.nodeType===9?m:m.ownerDocument;g===null||g[xy]||(g[xy]=!0,mS("selectionchange",!1,g))}}function NM(m,g,b,C){switch(XM(g)){case 2:var P=Tne;break;case 8:P=kne;break;default:P=TS}b=P.bind(null,g,b,m),P=void 0,!D1||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(P=!0),C?P!==void 0?m.addEventListener(g,b,{capture:!0,passive:P}):m.addEventListener(g,b,!0):P!==void 0?m.addEventListener(g,b,{passive:P}):m.addEventListener(g,b,!1)}function hS(m,g,b,C,P){var R=C;if((g&1)===0&&(g&2)===0&&C!==null)e:for(;;){if(C===null)return;var J=C.tag;if(J===3||J===4){var je=C.stateNode.containerInfo;if(je===P)break;if(J===4)for(J=C.return;J!==null;){var qe=J.tag;if((qe===3||qe===4)&&J.stateNode.containerInfo===P)return;J=J.return}for(;je!==null;){if(J=B(je),J===null)return;if(qe=J.tag,qe===5||qe===6||qe===26||qe===27){C=R=J;continue e}je=je.parentNode}}C=C.return}A3(function(){var st=R,ft=L1(b),bt=[];e:{var ot=tO.get(m);if(ot!==void 0){var ut=T0,Rt=m;switch(m){case"keypress":if(_0(b)===0)break e;case"keydown":case"keyup":ut=Vee;break;case"focusin":Rt="focus",ut=$1;break;case"focusout":Rt="blur",ut=$1;break;case"beforeblur":case"afterblur":ut=$1;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ut=E3;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ut=Mee;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ut=Kee;break;case X3:case Z3:case J3:ut=Ree;break;case eO:ut=Zee;break;case"scroll":case"scrollend":ut=Dee;break;case"wheel":ut=ete;break;case"copy":case"cut":case"paste":ut=Fee;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ut=P3;break;case"toggle":case"beforetoggle":ut=nte}var Yt=(g&4)!==0,Un=!Yt&&(m==="scroll"||m==="scrollend"),et=Yt?ot!==null?ot+"Capture":null:ot;Yt=[];for(var Ve=st,at;Ve!==null;){var pt=Ve;if(at=pt.stateNode,pt=pt.tag,pt!==5&&pt!==26&&pt!==27||at===null||et===null||(pt=vh(Ve,et),pt!=null&&Yt.push(Jh(Ve,pt,at))),Un)break;Ve=Ve.return}0<Yt.length&&(ot=new ut(ot,Rt,null,b,ft),bt.push({event:ot,listeners:Yt}))}}if((g&7)===0){e:{if(ot=m==="mouseover"||m==="pointerover",ut=m==="mouseout"||m==="pointerout",ot&&b!==E1&&(Rt=b.relatedTarget||b.fromElement)&&(B(Rt)||Rt[on]))break e;if((ut||ot)&&(ot=ft.window===ft?ft:(ot=ft.ownerDocument)?ot.defaultView||ot.parentWindow:window,ut?(Rt=b.relatedTarget||b.toElement,ut=st,Rt=Rt?B(Rt):null,Rt!==null&&(Un=i(Rt),Yt=Rt.tag,Rt!==Un||Yt!==5&&Yt!==27&&Yt!==6)&&(Rt=null)):(ut=null,Rt=st),ut!==Rt)){if(Yt=E3,pt="onMouseLeave",et="onMouseEnter",Ve="mouse",(m==="pointerout"||m==="pointerover")&&(Yt=P3,pt="onPointerLeave",et="onPointerEnter",Ve="pointer"),Un=ut==null?ot:Ae(ut),at=Rt==null?ot:Ae(Rt),ot=new Yt(pt,Ve+"leave",ut,b,ft),ot.target=Un,ot.relatedTarget=at,pt=null,B(ft)===st&&(Yt=new Yt(et,Ve+"enter",Rt,b,ft),Yt.target=at,Yt.relatedTarget=Un,pt=Yt),Un=pt,ut&&Rt)t:{for(Yt=tne,et=ut,Ve=Rt,at=0,pt=et;pt;pt=Yt(pt))at++;pt=0;for(var Gt=Ve;Gt;Gt=Yt(Gt))pt++;for(;0<at-pt;)et=Yt(et),at--;for(;0<pt-at;)Ve=Yt(Ve),pt--;for(;at--;){if(et===Ve||Ve!==null&&et===Ve.alternate){Yt=et;break t}et=Yt(et),Ve=Yt(Ve)}Yt=null}else Yt=null;ut!==null&&jM(bt,ot,ut,Yt,!1),Rt!==null&&Un!==null&&jM(bt,Un,Rt,Yt,!0)}}e:{if(ot=st?Ae(st):window,ut=ot.nodeName&&ot.nodeName.toLowerCase(),ut==="select"||ut==="input"&&ot.type==="file")var Cn=F3;else if(R3(ot))if(U3)Cn=mte;else{Cn=dte;var Bt=cte}else ut=ot.nodeName,!ut||ut.toLowerCase()!=="input"||ot.type!=="checkbox"&&ot.type!=="radio"?st&&k1(st.elementType)&&(Cn=F3):Cn=ute;if(Cn&&(Cn=Cn(m,st))){z3(bt,Cn,b,ft);break e}Bt&&Bt(m,ot,st),m==="focusout"&&st&&ot.type==="number"&&st.memoizedProps.value!=null&&T1(ot,"number",ot.value)}switch(Bt=st?Ae(st):window,m){case"focusin":(R3(Bt)||Bt.contentEditable==="true")&&(fm=Bt,H1=st,Th=null);break;case"focusout":Th=H1=fm=null;break;case"mousedown":q1=!0;break;case"contextmenu":case"mouseup":case"dragend":q1=!1,Q3(bt,b,ft);break;case"selectionchange":if(hte)break;case"keydown":case"keyup":Q3(bt,b,ft)}var ln;if(z1)e:{switch(m){case"compositionstart":var gn="onCompositionStart";break e;case"compositionend":gn="onCompositionEnd";break e;case"compositionupdate":gn="onCompositionUpdate";break e}gn=void 0}else mm?I3(m,b)&&(gn="onCompositionEnd"):m==="keydown"&&b.keyCode===229&&(gn="onCompositionStart");gn&&(D3&&b.locale!=="ko"&&(mm||gn!=="onCompositionStart"?gn==="onCompositionEnd"&&mm&&(ln=T3()):(mc=ft,O1="value"in mc?mc.value:mc.textContent,mm=!0)),Bt=yy(st,gn),0<Bt.length&&(gn=new L3(gn,m,null,b,ft),bt.push({event:gn,listeners:Bt}),ln?gn.data=ln:(ln=$3(b),ln!==null&&(gn.data=ln)))),(ln=ste?rte(m,b):ite(m,b))&&(gn=yy(st,"onBeforeInput"),0<gn.length&&(Bt=new L3("onBeforeInput","beforeinput",null,b,ft),bt.push({event:Bt,listeners:gn}),Bt.data=ln)),Xte(bt,m,st,b,ft)}wM(bt,g)})}function Jh(m,g,b){return{instance:m,listener:g,currentTarget:b}}function yy(m,g){for(var b=g+"Capture",C=[];m!==null;){var P=m,R=P.stateNode;if(P=P.tag,P!==5&&P!==26&&P!==27||R===null||(P=vh(m,b),P!=null&&C.unshift(Jh(m,P,R)),P=vh(m,g),P!=null&&C.push(Jh(m,P,R))),m.tag===3)return C;m=m.return}return[]}function tne(m){if(m===null)return null;do m=m.return;while(m&&m.tag!==5&&m.tag!==27);return m||null}function jM(m,g,b,C,P){for(var R=g._reactName,J=[];b!==null&&b!==C;){var je=b,qe=je.alternate,st=je.stateNode;if(je=je.tag,qe!==null&&qe===C)break;je!==5&&je!==26&&je!==27||st===null||(qe=st,P?(st=vh(b,R),st!=null&&J.unshift(Jh(b,st,qe))):P||(st=vh(b,R),st!=null&&J.push(Jh(b,st,qe)))),b=b.return}J.length!==0&&m.push({event:g,listeners:J})}var nne=/\r\n?/g,ane=/\u0000|\uFFFD/g;function CM(m){return(typeof m=="string"?m:""+m).replace(nne,`
`).replace(ane,"")}function SM(m,g){return g=CM(g),CM(m)===g}function Fn(m,g,b,C,P,R){switch(b){case"children":typeof C=="string"?g==="body"||g==="textarea"&&C===""||cm(m,C):(typeof C=="number"||typeof C=="bigint")&&g!=="body"&&cm(m,""+C);break;case"className":N0(m,"class",C);break;case"tabIndex":N0(m,"tabindex",C);break;case"dir":case"role":case"viewBox":case"width":case"height":N0(m,b,C);break;case"style":S3(m,C,R);break;case"data":if(g!=="object"){N0(m,"data",C);break}case"src":case"href":if(C===""&&(g!=="a"||b!=="href")){m.removeAttribute(b);break}if(C==null||typeof C=="function"||typeof C=="symbol"||typeof C=="boolean"){m.removeAttribute(b);break}C=C0(""+C),m.setAttribute(b,C);break;case"action":case"formAction":if(typeof C=="function"){m.setAttribute(b,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof R=="function"&&(b==="formAction"?(g!=="input"&&Fn(m,g,"name",P.name,P,null),Fn(m,g,"formEncType",P.formEncType,P,null),Fn(m,g,"formMethod",P.formMethod,P,null),Fn(m,g,"formTarget",P.formTarget,P,null)):(Fn(m,g,"encType",P.encType,P,null),Fn(m,g,"method",P.method,P,null),Fn(m,g,"target",P.target,P,null)));if(C==null||typeof C=="symbol"||typeof C=="boolean"){m.removeAttribute(b);break}C=C0(""+C),m.setAttribute(b,C);break;case"onClick":C!=null&&(m.onclick=Ko);break;case"onScroll":C!=null&&mn("scroll",m);break;case"onScrollEnd":C!=null&&mn("scrollend",m);break;case"dangerouslySetInnerHTML":if(C!=null){if(typeof C!="object"||!("__html"in C))throw Error(s(61));if(b=C.__html,b!=null){if(P.children!=null)throw Error(s(60));m.innerHTML=b}}break;case"multiple":m.multiple=C&&typeof C!="function"&&typeof C!="symbol";break;case"muted":m.muted=C&&typeof C!="function"&&typeof C!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(C==null||typeof C=="function"||typeof C=="boolean"||typeof C=="symbol"){m.removeAttribute("xlink:href");break}b=C0(""+C),m.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",b);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":C!=null&&typeof C!="function"&&typeof C!="symbol"?m.setAttribute(b,""+C):m.removeAttribute(b);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":C&&typeof C!="function"&&typeof C!="symbol"?m.setAttribute(b,""):m.removeAttribute(b);break;case"capture":case"download":C===!0?m.setAttribute(b,""):C!==!1&&C!=null&&typeof C!="function"&&typeof C!="symbol"?m.setAttribute(b,C):m.removeAttribute(b);break;case"cols":case"rows":case"size":case"span":C!=null&&typeof C!="function"&&typeof C!="symbol"&&!isNaN(C)&&1<=C?m.setAttribute(b,C):m.removeAttribute(b);break;case"rowSpan":case"start":C==null||typeof C=="function"||typeof C=="symbol"||isNaN(C)?m.removeAttribute(b):m.setAttribute(b,C);break;case"popover":mn("beforetoggle",m),mn("toggle",m),w0(m,"popover",C);break;case"xlinkActuate":Qo(m,"http://www.w3.org/1999/xlink","xlink:actuate",C);break;case"xlinkArcrole":Qo(m,"http://www.w3.org/1999/xlink","xlink:arcrole",C);break;case"xlinkRole":Qo(m,"http://www.w3.org/1999/xlink","xlink:role",C);break;case"xlinkShow":Qo(m,"http://www.w3.org/1999/xlink","xlink:show",C);break;case"xlinkTitle":Qo(m,"http://www.w3.org/1999/xlink","xlink:title",C);break;case"xlinkType":Qo(m,"http://www.w3.org/1999/xlink","xlink:type",C);break;case"xmlBase":Qo(m,"http://www.w3.org/XML/1998/namespace","xml:base",C);break;case"xmlLang":Qo(m,"http://www.w3.org/XML/1998/namespace","xml:lang",C);break;case"xmlSpace":Qo(m,"http://www.w3.org/XML/1998/namespace","xml:space",C);break;case"is":w0(m,"is",C);break;case"innerText":case"textContent":break;default:(!(2<b.length)||b[0]!=="o"&&b[0]!=="O"||b[1]!=="n"&&b[1]!=="N")&&(b=Lee.get(b)||b,w0(m,b,C))}}function gS(m,g,b,C,P,R){switch(b){case"style":S3(m,C,R);break;case"dangerouslySetInnerHTML":if(C!=null){if(typeof C!="object"||!("__html"in C))throw Error(s(61));if(b=C.__html,b!=null){if(P.children!=null)throw Error(s(60));m.innerHTML=b}}break;case"children":typeof C=="string"?cm(m,C):(typeof C=="number"||typeof C=="bigint")&&cm(m,""+C);break;case"onScroll":C!=null&&mn("scroll",m);break;case"onScrollEnd":C!=null&&mn("scrollend",m);break;case"onClick":C!=null&&(m.onclick=Ko);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!yt.hasOwnProperty(b))e:{if(b[0]==="o"&&b[1]==="n"&&(P=b.endsWith("Capture"),g=b.slice(2,P?b.length-7:void 0),R=m[Dt]||null,R=R!=null?R[b]:null,typeof R=="function"&&m.removeEventListener(g,R,P),typeof C=="function")){typeof R!="function"&&R!==null&&(b in m?m[b]=null:m.hasAttribute(b)&&m.removeAttribute(b)),m.addEventListener(g,C,P);break e}b in m?m[b]=C:C===!0?m.setAttribute(b,""):w0(m,b,C)}}}function Cs(m,g,b){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":mn("error",m),mn("load",m);var C=!1,P=!1,R;for(R in b)if(b.hasOwnProperty(R)){var J=b[R];if(J!=null)switch(R){case"src":C=!0;break;case"srcSet":P=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,g));default:Fn(m,g,R,J,b,null)}}P&&Fn(m,g,"srcSet",b.srcSet,b,null),C&&Fn(m,g,"src",b.src,b,null);return;case"input":mn("invalid",m);var je=R=J=P=null,qe=null,st=null;for(C in b)if(b.hasOwnProperty(C)){var ft=b[C];if(ft!=null)switch(C){case"name":P=ft;break;case"type":J=ft;break;case"checked":qe=ft;break;case"defaultChecked":st=ft;break;case"value":R=ft;break;case"defaultValue":je=ft;break;case"children":case"dangerouslySetInnerHTML":if(ft!=null)throw Error(s(137,g));break;default:Fn(m,g,C,ft,b,null)}}w3(m,R,je,qe,st,J,P,!1);return;case"select":mn("invalid",m),C=J=R=null;for(P in b)if(b.hasOwnProperty(P)&&(je=b[P],je!=null))switch(P){case"value":R=je;break;case"defaultValue":J=je;break;case"multiple":C=je;default:Fn(m,g,P,je,b,null)}g=R,b=J,m.multiple=!!C,g!=null?lm(m,!!C,g,!1):b!=null&&lm(m,!!C,b,!0);return;case"textarea":mn("invalid",m),R=P=C=null;for(J in b)if(b.hasOwnProperty(J)&&(je=b[J],je!=null))switch(J){case"value":C=je;break;case"defaultValue":P=je;break;case"children":R=je;break;case"dangerouslySetInnerHTML":if(je!=null)throw Error(s(91));break;default:Fn(m,g,J,je,b,null)}j3(m,C,P,R);return;case"option":for(qe in b)b.hasOwnProperty(qe)&&(C=b[qe],C!=null)&&(qe==="selected"?m.selected=C&&typeof C!="function"&&typeof C!="symbol":Fn(m,g,qe,C,b,null));return;case"dialog":mn("beforetoggle",m),mn("toggle",m),mn("cancel",m),mn("close",m);break;case"iframe":case"object":mn("load",m);break;case"video":case"audio":for(C=0;C<Zh.length;C++)mn(Zh[C],m);break;case"image":mn("error",m),mn("load",m);break;case"details":mn("toggle",m);break;case"embed":case"source":case"link":mn("error",m),mn("load",m);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(st in b)if(b.hasOwnProperty(st)&&(C=b[st],C!=null))switch(st){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,g));default:Fn(m,g,st,C,b,null)}return;default:if(k1(g)){for(ft in b)b.hasOwnProperty(ft)&&(C=b[ft],C!==void 0&&gS(m,g,ft,C,b,void 0));return}}for(je in b)b.hasOwnProperty(je)&&(C=b[je],C!=null&&Fn(m,g,je,C,b,null))}function sne(m,g,b,C){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var P=null,R=null,J=null,je=null,qe=null,st=null,ft=null;for(ut in b){var bt=b[ut];if(b.hasOwnProperty(ut)&&bt!=null)switch(ut){case"checked":break;case"value":break;case"defaultValue":qe=bt;default:C.hasOwnProperty(ut)||Fn(m,g,ut,null,C,bt)}}for(var ot in C){var ut=C[ot];if(bt=b[ot],C.hasOwnProperty(ot)&&(ut!=null||bt!=null))switch(ot){case"type":R=ut;break;case"name":P=ut;break;case"checked":st=ut;break;case"defaultChecked":ft=ut;break;case"value":J=ut;break;case"defaultValue":je=ut;break;case"children":case"dangerouslySetInnerHTML":if(ut!=null)throw Error(s(137,g));break;default:ut!==bt&&Fn(m,g,ot,ut,C,bt)}}A1(m,J,je,qe,st,ft,R,P);return;case"select":ut=J=je=ot=null;for(R in b)if(qe=b[R],b.hasOwnProperty(R)&&qe!=null)switch(R){case"value":break;case"multiple":ut=qe;default:C.hasOwnProperty(R)||Fn(m,g,R,null,C,qe)}for(P in C)if(R=C[P],qe=b[P],C.hasOwnProperty(P)&&(R!=null||qe!=null))switch(P){case"value":ot=R;break;case"defaultValue":je=R;break;case"multiple":J=R;default:R!==qe&&Fn(m,g,P,R,C,qe)}g=je,b=J,C=ut,ot!=null?lm(m,!!b,ot,!1):!!C!=!!b&&(g!=null?lm(m,!!b,g,!0):lm(m,!!b,b?[]:"",!1));return;case"textarea":ut=ot=null;for(je in b)if(P=b[je],b.hasOwnProperty(je)&&P!=null&&!C.hasOwnProperty(je))switch(je){case"value":break;case"children":break;default:Fn(m,g,je,null,C,P)}for(J in C)if(P=C[J],R=b[J],C.hasOwnProperty(J)&&(P!=null||R!=null))switch(J){case"value":ot=P;break;case"defaultValue":ut=P;break;case"children":break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(s(91));break;default:P!==R&&Fn(m,g,J,P,C,R)}N3(m,ot,ut);return;case"option":for(var Rt in b)ot=b[Rt],b.hasOwnProperty(Rt)&&ot!=null&&!C.hasOwnProperty(Rt)&&(Rt==="selected"?m.selected=!1:Fn(m,g,Rt,null,C,ot));for(qe in C)ot=C[qe],ut=b[qe],C.hasOwnProperty(qe)&&ot!==ut&&(ot!=null||ut!=null)&&(qe==="selected"?m.selected=ot&&typeof ot!="function"&&typeof ot!="symbol":Fn(m,g,qe,ot,C,ut));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Yt in b)ot=b[Yt],b.hasOwnProperty(Yt)&&ot!=null&&!C.hasOwnProperty(Yt)&&Fn(m,g,Yt,null,C,ot);for(st in C)if(ot=C[st],ut=b[st],C.hasOwnProperty(st)&&ot!==ut&&(ot!=null||ut!=null))switch(st){case"children":case"dangerouslySetInnerHTML":if(ot!=null)throw Error(s(137,g));break;default:Fn(m,g,st,ot,C,ut)}return;default:if(k1(g)){for(var Un in b)ot=b[Un],b.hasOwnProperty(Un)&&ot!==void 0&&!C.hasOwnProperty(Un)&&gS(m,g,Un,void 0,C,ot);for(ft in C)ot=C[ft],ut=b[ft],!C.hasOwnProperty(ft)||ot===ut||ot===void 0&&ut===void 0||gS(m,g,ft,ot,C,ut);return}}for(var et in b)ot=b[et],b.hasOwnProperty(et)&&ot!=null&&!C.hasOwnProperty(et)&&Fn(m,g,et,null,C,ot);for(bt in C)ot=C[bt],ut=b[bt],!C.hasOwnProperty(bt)||ot===ut||ot==null&&ut==null||Fn(m,g,bt,ot,C,ut)}function _M(m){switch(m){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function rne(){if(typeof performance.getEntriesByType=="function"){for(var m=0,g=0,b=performance.getEntriesByType("resource"),C=0;C<b.length;C++){var P=b[C],R=P.transferSize,J=P.initiatorType,je=P.duration;if(R&&je&&_M(J)){for(J=0,je=P.responseEnd,C+=1;C<b.length;C++){var qe=b[C],st=qe.startTime;if(st>je)break;var ft=qe.transferSize,bt=qe.initiatorType;ft&&_M(bt)&&(qe=qe.responseEnd,J+=ft*(qe<je?1:(je-st)/(qe-st)))}if(--C,g+=8*(R+J)/(P.duration/1e3),m++,10<m)break}}if(0<m)return g/m/1e6}return navigator.connection&&(m=navigator.connection.downlink,typeof m=="number")?m:5}var pS=null,xS=null;function by(m){return m.nodeType===9?m:m.ownerDocument}function AM(m){switch(m){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function TM(m,g){if(m===0)switch(g){case"svg":return 1;case"math":return 2;default:return 0}return m===1&&g==="foreignObject"?0:m}function yS(m,g){return m==="textarea"||m==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.children=="bigint"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var bS=null;function ine(){var m=window.event;return m&&m.type==="popstate"?m===bS?!1:(bS=m,!0):(bS=null,!1)}var kM=typeof setTimeout=="function"?setTimeout:void 0,one=typeof clearTimeout=="function"?clearTimeout:void 0,EM=typeof Promise=="function"?Promise:void 0,lne=typeof queueMicrotask=="function"?queueMicrotask:typeof EM<"u"?function(m){return EM.resolve(null).then(m).catch(cne)}:kM;function cne(m){setTimeout(function(){throw m})}function kc(m){return m==="head"}function LM(m,g){var b=g,C=0;do{var P=b.nextSibling;if(m.removeChild(b),P&&P.nodeType===8)if(b=P.data,b==="/$"||b==="/&"){if(C===0){m.removeChild(P),Fm(g);return}C--}else if(b==="$"||b==="$?"||b==="$~"||b==="$!"||b==="&")C++;else if(b==="html")eg(m.ownerDocument.documentElement);else if(b==="head"){b=m.ownerDocument.head,eg(b);for(var R=b.firstChild;R;){var J=R.nextSibling,je=R.nodeName;R[X]||je==="SCRIPT"||je==="STYLE"||je==="LINK"&&R.rel.toLowerCase()==="stylesheet"||b.removeChild(R),R=J}}else b==="body"&&eg(m.ownerDocument.body);b=P}while(b);Fm(g)}function PM(m,g){var b=m;m=0;do{var C=b.nextSibling;if(b.nodeType===1?g?(b._stashedDisplay=b.style.display,b.style.display="none"):(b.style.display=b._stashedDisplay||"",b.getAttribute("style")===""&&b.removeAttribute("style")):b.nodeType===3&&(g?(b._stashedText=b.nodeValue,b.nodeValue=""):b.nodeValue=b._stashedText||""),C&&C.nodeType===8)if(b=C.data,b==="/$"){if(m===0)break;m--}else b!=="$"&&b!=="$?"&&b!=="$~"&&b!=="$!"||m++;b=C}while(b)}function vS(m){var g=m.firstChild;for(g&&g.nodeType===10&&(g=g.nextSibling);g;){var b=g;switch(g=g.nextSibling,b.nodeName){case"HTML":case"HEAD":case"BODY":vS(b),k(b);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(b.rel.toLowerCase()==="stylesheet")continue}m.removeChild(b)}}function dne(m,g,b,C){for(;m.nodeType===1;){var P=b;if(m.nodeName.toLowerCase()!==g.toLowerCase()){if(!C&&(m.nodeName!=="INPUT"||m.type!=="hidden"))break}else if(C){if(!m[X])switch(g){case"meta":if(!m.hasAttribute("itemprop"))break;return m;case"link":if(R=m.getAttribute("rel"),R==="stylesheet"&&m.hasAttribute("data-precedence"))break;if(R!==P.rel||m.getAttribute("href")!==(P.href==null||P.href===""?null:P.href)||m.getAttribute("crossorigin")!==(P.crossOrigin==null?null:P.crossOrigin)||m.getAttribute("title")!==(P.title==null?null:P.title))break;return m;case"style":if(m.hasAttribute("data-precedence"))break;return m;case"script":if(R=m.getAttribute("src"),(R!==(P.src==null?null:P.src)||m.getAttribute("type")!==(P.type==null?null:P.type)||m.getAttribute("crossorigin")!==(P.crossOrigin==null?null:P.crossOrigin))&&R&&m.hasAttribute("async")&&!m.hasAttribute("itemprop"))break;return m;default:return m}}else if(g==="input"&&m.type==="hidden"){var R=P.name==null?null:""+P.name;if(P.type==="hidden"&&m.getAttribute("name")===R)return m}else return m;if(m=ti(m.nextSibling),m===null)break}return null}function une(m,g,b){if(g==="")return null;for(;m.nodeType!==3;)if((m.nodeType!==1||m.nodeName!=="INPUT"||m.type!=="hidden")&&!b||(m=ti(m.nextSibling),m===null))return null;return m}function DM(m,g){for(;m.nodeType!==8;)if((m.nodeType!==1||m.nodeName!=="INPUT"||m.type!=="hidden")&&!g||(m=ti(m.nextSibling),m===null))return null;return m}function wS(m){return m.data==="$?"||m.data==="$~"}function NS(m){return m.data==="$!"||m.data==="$?"&&m.ownerDocument.readyState!=="loading"}function mne(m,g){var b=m.ownerDocument;if(m.data==="$~")m._reactRetry=g;else if(m.data!=="$?"||b.readyState!=="loading")g();else{var C=function(){g(),b.removeEventListener("DOMContentLoaded",C)};b.addEventListener("DOMContentLoaded",C),m._reactRetry=C}}function ti(m){for(;m!=null;m=m.nextSibling){var g=m.nodeType;if(g===1||g===3)break;if(g===8){if(g=m.data,g==="$"||g==="$!"||g==="$?"||g==="$~"||g==="&"||g==="F!"||g==="F")break;if(g==="/$"||g==="/&")return null}}return m}var jS=null;function OM(m){m=m.nextSibling;for(var g=0;m;){if(m.nodeType===8){var b=m.data;if(b==="/$"||b==="/&"){if(g===0)return ti(m.nextSibling);g--}else b!=="$"&&b!=="$!"&&b!=="$?"&&b!=="$~"&&b!=="&"||g++}m=m.nextSibling}return null}function MM(m){m=m.previousSibling;for(var g=0;m;){if(m.nodeType===8){var b=m.data;if(b==="$"||b==="$!"||b==="$?"||b==="$~"||b==="&"){if(g===0)return m;g--}else b!=="/$"&&b!=="/&"||g++}m=m.previousSibling}return null}function IM(m,g,b){switch(g=by(b),m){case"html":if(m=g.documentElement,!m)throw Error(s(452));return m;case"head":if(m=g.head,!m)throw Error(s(453));return m;case"body":if(m=g.body,!m)throw Error(s(454));return m;default:throw Error(s(451))}}function eg(m){for(var g=m.attributes;g.length;)m.removeAttributeNode(g[0]);k(m)}var ni=new Map,$M=new Set;function vy(m){return typeof m.getRootNode=="function"?m.getRootNode():m.nodeType===9?m:m.ownerDocument}var ml=Z.d;Z.d={f:fne,r:hne,D:gne,C:pne,L:xne,m:yne,X:vne,S:bne,M:wne};function fne(){var m=ml.f(),g=uy();return m||g}function hne(m){var g=xe(m);g!==null&&g.tag===5&&g.type==="form"?e5(g):ml.r(m)}var $m=typeof document>"u"?null:document;function RM(m,g,b){var C=$m;if(C&&typeof g=="string"&&g){var P=Yr(g);P='link[rel="'+m+'"][href="'+P+'"]',typeof b=="string"&&(P+='[crossorigin="'+b+'"]'),$M.has(P)||($M.add(P),m={rel:m,crossOrigin:b,href:g},C.querySelector(P)===null&&(g=C.createElement("link"),Cs(g,"link",m),Ge(g),C.head.appendChild(g)))}}function gne(m){ml.D(m),RM("dns-prefetch",m,null)}function pne(m,g){ml.C(m,g),RM("preconnect",m,g)}function xne(m,g,b){ml.L(m,g,b);var C=$m;if(C&&m&&g){var P='link[rel="preload"][as="'+Yr(g)+'"]';g==="image"&&b&&b.imageSrcSet?(P+='[imagesrcset="'+Yr(b.imageSrcSet)+'"]',typeof b.imageSizes=="string"&&(P+='[imagesizes="'+Yr(b.imageSizes)+'"]')):P+='[href="'+Yr(m)+'"]';var R=P;switch(g){case"style":R=Rm(m);break;case"script":R=zm(m)}ni.has(R)||(m=f({rel:"preload",href:g==="image"&&b&&b.imageSrcSet?void 0:m,as:g},b),ni.set(R,m),C.querySelector(P)!==null||g==="style"&&C.querySelector(tg(R))||g==="script"&&C.querySelector(ng(R))||(g=C.createElement("link"),Cs(g,"link",m),Ge(g),C.head.appendChild(g)))}}function yne(m,g){ml.m(m,g);var b=$m;if(b&&m){var C=g&&typeof g.as=="string"?g.as:"script",P='link[rel="modulepreload"][as="'+Yr(C)+'"][href="'+Yr(m)+'"]',R=P;switch(C){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":R=zm(m)}if(!ni.has(R)&&(m=f({rel:"modulepreload",href:m},g),ni.set(R,m),b.querySelector(P)===null)){switch(C){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(b.querySelector(ng(R)))return}C=b.createElement("link"),Cs(C,"link",m),Ge(C),b.head.appendChild(C)}}}function bne(m,g,b){ml.S(m,g,b);var C=$m;if(C&&m){var P=Ue(C).hoistableStyles,R=Rm(m);g=g||"default";var J=P.get(R);if(!J){var je={loading:0,preload:null};if(J=C.querySelector(tg(R)))je.loading=5;else{m=f({rel:"stylesheet",href:m,"data-precedence":g},b),(b=ni.get(R))&&CS(m,b);var qe=J=C.createElement("link");Ge(qe),Cs(qe,"link",m),qe._p=new Promise(function(st,ft){qe.onload=st,qe.onerror=ft}),qe.addEventListener("load",function(){je.loading|=1}),qe.addEventListener("error",function(){je.loading|=2}),je.loading|=4,wy(J,g,C)}J={type:"stylesheet",instance:J,count:1,state:je},P.set(R,J)}}}function vne(m,g){ml.X(m,g);var b=$m;if(b&&m){var C=Ue(b).hoistableScripts,P=zm(m),R=C.get(P);R||(R=b.querySelector(ng(P)),R||(m=f({src:m,async:!0},g),(g=ni.get(P))&&SS(m,g),R=b.createElement("script"),Ge(R),Cs(R,"link",m),b.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},C.set(P,R))}}function wne(m,g){ml.M(m,g);var b=$m;if(b&&m){var C=Ue(b).hoistableScripts,P=zm(m),R=C.get(P);R||(R=b.querySelector(ng(P)),R||(m=f({src:m,async:!0,type:"module"},g),(g=ni.get(P))&&SS(m,g),R=b.createElement("script"),Ge(R),Cs(R,"link",m),b.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},C.set(P,R))}}function zM(m,g,b,C){var P=(P=ve.current)?vy(P):null;if(!P)throw Error(s(446));switch(m){case"meta":case"title":return null;case"style":return typeof b.precedence=="string"&&typeof b.href=="string"?(g=Rm(b.href),b=Ue(P).hoistableStyles,C=b.get(g),C||(C={type:"style",instance:null,count:0,state:null},b.set(g,C)),C):{type:"void",instance:null,count:0,state:null};case"link":if(b.rel==="stylesheet"&&typeof b.href=="string"&&typeof b.precedence=="string"){m=Rm(b.href);var R=Ue(P).hoistableStyles,J=R.get(m);if(J||(P=P.ownerDocument||P,J={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},R.set(m,J),(R=P.querySelector(tg(m)))&&!R._p&&(J.instance=R,J.state.loading=5),ni.has(m)||(b={rel:"preload",as:"style",href:b.href,crossOrigin:b.crossOrigin,integrity:b.integrity,media:b.media,hrefLang:b.hrefLang,referrerPolicy:b.referrerPolicy},ni.set(m,b),R||Nne(P,m,b,J.state))),g&&C===null)throw Error(s(528,""));return J}if(g&&C!==null)throw Error(s(529,""));return null;case"script":return g=b.async,b=b.src,typeof b=="string"&&g&&typeof g!="function"&&typeof g!="symbol"?(g=zm(b),b=Ue(P).hoistableScripts,C=b.get(g),C||(C={type:"script",instance:null,count:0,state:null},b.set(g,C)),C):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,m))}}function Rm(m){return'href="'+Yr(m)+'"'}function tg(m){return'link[rel="stylesheet"]['+m+"]"}function FM(m){return f({},m,{"data-precedence":m.precedence,precedence:null})}function Nne(m,g,b,C){m.querySelector('link[rel="preload"][as="style"]['+g+"]")?C.loading=1:(g=m.createElement("link"),C.preload=g,g.addEventListener("load",function(){return C.loading|=1}),g.addEventListener("error",function(){return C.loading|=2}),Cs(g,"link",b),Ge(g),m.head.appendChild(g))}function zm(m){return'[src="'+Yr(m)+'"]'}function ng(m){return"script[async]"+m}function UM(m,g,b){if(g.count++,g.instance===null)switch(g.type){case"style":var C=m.querySelector('style[data-href~="'+Yr(b.href)+'"]');if(C)return g.instance=C,Ge(C),C;var P=f({},b,{"data-href":b.href,"data-precedence":b.precedence,href:null,precedence:null});return C=(m.ownerDocument||m).createElement("style"),Ge(C),Cs(C,"style",P),wy(C,b.precedence,m),g.instance=C;case"stylesheet":P=Rm(b.href);var R=m.querySelector(tg(P));if(R)return g.state.loading|=4,g.instance=R,Ge(R),R;C=FM(b),(P=ni.get(P))&&CS(C,P),R=(m.ownerDocument||m).createElement("link"),Ge(R);var J=R;return J._p=new Promise(function(je,qe){J.onload=je,J.onerror=qe}),Cs(R,"link",C),g.state.loading|=4,wy(R,b.precedence,m),g.instance=R;case"script":return R=zm(b.src),(P=m.querySelector(ng(R)))?(g.instance=P,Ge(P),P):(C=b,(P=ni.get(R))&&(C=f({},b),SS(C,P)),m=m.ownerDocument||m,P=m.createElement("script"),Ge(P),Cs(P,"link",C),m.head.appendChild(P),g.instance=P);case"void":return null;default:throw Error(s(443,g.type))}else g.type==="stylesheet"&&(g.state.loading&4)===0&&(C=g.instance,g.state.loading|=4,wy(C,b.precedence,m));return g.instance}function wy(m,g,b){for(var C=b.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),P=C.length?C[C.length-1]:null,R=P,J=0;J<C.length;J++){var je=C[J];if(je.dataset.precedence===g)R=je;else if(R!==P)break}R?R.parentNode.insertBefore(m,R.nextSibling):(g=b.nodeType===9?b.head:b,g.insertBefore(m,g.firstChild))}function CS(m,g){m.crossOrigin==null&&(m.crossOrigin=g.crossOrigin),m.referrerPolicy==null&&(m.referrerPolicy=g.referrerPolicy),m.title==null&&(m.title=g.title)}function SS(m,g){m.crossOrigin==null&&(m.crossOrigin=g.crossOrigin),m.referrerPolicy==null&&(m.referrerPolicy=g.referrerPolicy),m.integrity==null&&(m.integrity=g.integrity)}var Ny=null;function BM(m,g,b){if(Ny===null){var C=new Map,P=Ny=new Map;P.set(b,C)}else P=Ny,C=P.get(b),C||(C=new Map,P.set(b,C));if(C.has(m))return C;for(C.set(m,null),b=b.getElementsByTagName(m),P=0;P<b.length;P++){var R=b[P];if(!(R[X]||R[kt]||m==="link"&&R.getAttribute("rel")==="stylesheet")&&R.namespaceURI!=="http://www.w3.org/2000/svg"){var J=R.getAttribute(g)||"";J=m+J;var je=C.get(J);je?je.push(R):C.set(J,[R])}}return C}function HM(m,g,b){m=m.ownerDocument||m,m.head.insertBefore(b,g==="title"?m.querySelector("head > title"):null)}function jne(m,g,b){if(b===1||g.itemProp!=null)return!1;switch(m){case"meta":case"title":return!0;case"style":if(typeof g.precedence!="string"||typeof g.href!="string"||g.href==="")break;return!0;case"link":if(typeof g.rel!="string"||typeof g.href!="string"||g.href===""||g.onLoad||g.onError)break;return g.rel==="stylesheet"?(m=g.disabled,typeof g.precedence=="string"&&m==null):!0;case"script":if(g.async&&typeof g.async!="function"&&typeof g.async!="symbol"&&!g.onLoad&&!g.onError&&g.src&&typeof g.src=="string")return!0}return!1}function qM(m){return!(m.type==="stylesheet"&&(m.state.loading&3)===0)}function Cne(m,g,b,C){if(b.type==="stylesheet"&&(typeof C.media!="string"||matchMedia(C.media).matches!==!1)&&(b.state.loading&4)===0){if(b.instance===null){var P=Rm(C.href),R=g.querySelector(tg(P));if(R){g=R._p,g!==null&&typeof g=="object"&&typeof g.then=="function"&&(m.count++,m=jy.bind(m),g.then(m,m)),b.state.loading|=4,b.instance=R,Ge(R);return}R=g.ownerDocument||g,C=FM(C),(P=ni.get(P))&&CS(C,P),R=R.createElement("link"),Ge(R);var J=R;J._p=new Promise(function(je,qe){J.onload=je,J.onerror=qe}),Cs(R,"link",C),b.instance=R}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(b,g),(g=b.state.preload)&&(b.state.loading&3)===0&&(m.count++,b=jy.bind(m),g.addEventListener("load",b),g.addEventListener("error",b))}}var _S=0;function Sne(m,g){return m.stylesheets&&m.count===0&&Sy(m,m.stylesheets),0<m.count||0<m.imgCount?function(b){var C=setTimeout(function(){if(m.stylesheets&&Sy(m,m.stylesheets),m.unsuspend){var R=m.unsuspend;m.unsuspend=null,R()}},6e4+g);0<m.imgBytes&&_S===0&&(_S=62500*rne());var P=setTimeout(function(){if(m.waitingForImages=!1,m.count===0&&(m.stylesheets&&Sy(m,m.stylesheets),m.unsuspend)){var R=m.unsuspend;m.unsuspend=null,R()}},(m.imgBytes>_S?50:800)+g);return m.unsuspend=b,function(){m.unsuspend=null,clearTimeout(C),clearTimeout(P)}}:null}function jy(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Sy(this,this.stylesheets);else if(this.unsuspend){var m=this.unsuspend;this.unsuspend=null,m()}}}var Cy=null;function Sy(m,g){m.stylesheets=null,m.unsuspend!==null&&(m.count++,Cy=new Map,g.forEach(_ne,m),Cy=null,jy.call(m))}function _ne(m,g){if(!(g.state.loading&4)){var b=Cy.get(m);if(b)var C=b.get(null);else{b=new Map,Cy.set(m,b);for(var P=m.querySelectorAll("link[data-precedence],style[data-precedence]"),R=0;R<P.length;R++){var J=P[R];(J.nodeName==="LINK"||J.getAttribute("media")!=="not all")&&(b.set(J.dataset.precedence,J),C=J)}C&&b.set(null,C)}P=g.instance,J=P.getAttribute("data-precedence"),R=b.get(J)||C,R===C&&b.set(null,P),b.set(J,P),this.count++,C=jy.bind(this),P.addEventListener("load",C),P.addEventListener("error",C),R?R.parentNode.insertBefore(P,R.nextSibling):(m=m.nodeType===9?m.head:m,m.insertBefore(P,m.firstChild)),g.state.loading|=4}}var ag={$$typeof:S,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function Ane(m,g,b,C,P,R,J,je,qe){this.tag=1,this.containerInfo=m,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ee(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ee(0),this.hiddenUpdates=ee(null),this.identifierPrefix=C,this.onUncaughtError=P,this.onCaughtError=R,this.onRecoverableError=J,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=qe,this.incompleteTransitions=new Map}function WM(m,g,b,C,P,R,J,je,qe,st,ft,bt){return m=new Ane(m,g,b,J,qe,st,ft,bt,je),g=1,R===!0&&(g|=24),R=Ar(3,null,null,g),m.current=R,R.stateNode=m,g=rC(),g.refCount++,m.pooledCache=g,g.refCount++,R.memoizedState={element:C,isDehydrated:b,cache:g},cC(R),m}function GM(m){return m?(m=pm,m):pm}function VM(m,g,b,C,P,R){P=GM(P),C.context===null?C.context=P:C.pendingContext=P,C=yc(g),C.payload={element:b},R=R===void 0?null:R,R!==null&&(C.callback=R),b=bc(m,C,g),b!==null&&(rr(b,m,g),Mh(b,m,g))}function YM(m,g){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var b=m.retryLane;m.retryLane=b!==0&&b<g?b:g}}function AS(m,g){YM(m,g),(m=m.alternate)&&YM(m,g)}function QM(m){if(m.tag===13||m.tag===31){var g=Dd(m,67108864);g!==null&&rr(g,m,67108864),AS(m,67108864)}}function KM(m){if(m.tag===13||m.tag===31){var g=Pr();g=re(g);var b=Dd(m,g);b!==null&&rr(b,m,g),AS(m,g)}}var _y=!0;function Tne(m,g,b,C){var P=V.T;V.T=null;var R=Z.p;try{Z.p=2,TS(m,g,b,C)}finally{Z.p=R,V.T=P}}function kne(m,g,b,C){var P=V.T;V.T=null;var R=Z.p;try{Z.p=8,TS(m,g,b,C)}finally{Z.p=R,V.T=P}}function TS(m,g,b,C){if(_y){var P=kS(C);if(P===null)hS(m,g,C,Ay,b),ZM(m,C);else if(Lne(P,m,g,b,C))C.stopPropagation();else if(ZM(m,C),g&4&&-1<Ene.indexOf(m)){for(;P!==null;){var R=xe(P);if(R!==null)switch(R.tag){case 3:if(R=R.stateNode,R.current.memoizedState.isDehydrated){var J=me(R.pendingLanes);if(J!==0){var je=R;for(je.pendingLanes|=2,je.entangledLanes|=2;J;){var qe=1<<31-Ze(J);je.entanglements[1]|=qe,J&=~qe}so(R),(An&6)===0&&(cy=Ce()+500,Xh(0))}}break;case 31:case 13:je=Dd(R,2),je!==null&&rr(je,R,2),uy(),AS(R,2)}if(R=kS(C),R===null&&hS(m,g,C,Ay,b),R===P)break;P=R}P!==null&&C.stopPropagation()}else hS(m,g,C,null,b)}}function kS(m){return m=L1(m),ES(m)}var Ay=null;function ES(m){if(Ay=null,m=B(m),m!==null){var g=i(m);if(g===null)m=null;else{var b=g.tag;if(b===13){if(m=o(g),m!==null)return m;m=null}else if(b===31){if(m=l(g),m!==null)return m;m=null}else if(b===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;m=null}else g!==m&&(m=null)}}return Ay=m,null}function XM(m){switch(m){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(fe()){case ue:return 2;case H:return 8;case K:case we:return 32;case Me:return 268435456;default:return 32}default:return 32}}var LS=!1,Ec=null,Lc=null,Pc=null,sg=new Map,rg=new Map,Dc=[],Ene="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ZM(m,g){switch(m){case"focusin":case"focusout":Ec=null;break;case"dragenter":case"dragleave":Lc=null;break;case"mouseover":case"mouseout":Pc=null;break;case"pointerover":case"pointerout":sg.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":rg.delete(g.pointerId)}}function ig(m,g,b,C,P,R){return m===null||m.nativeEvent!==R?(m={blockedOn:g,domEventName:b,eventSystemFlags:C,nativeEvent:R,targetContainers:[P]},g!==null&&(g=xe(g),g!==null&&QM(g)),m):(m.eventSystemFlags|=C,g=m.targetContainers,P!==null&&g.indexOf(P)===-1&&g.push(P),m)}function Lne(m,g,b,C,P){switch(g){case"focusin":return Ec=ig(Ec,m,g,b,C,P),!0;case"dragenter":return Lc=ig(Lc,m,g,b,C,P),!0;case"mouseover":return Pc=ig(Pc,m,g,b,C,P),!0;case"pointerover":var R=P.pointerId;return sg.set(R,ig(sg.get(R)||null,m,g,b,C,P)),!0;case"gotpointercapture":return R=P.pointerId,rg.set(R,ig(rg.get(R)||null,m,g,b,C,P)),!0}return!1}function JM(m){var g=B(m.target);if(g!==null){var b=i(g);if(b!==null){if(g=b.tag,g===13){if(g=o(b),g!==null){m.blockedOn=g,gt(m.priority,function(){KM(b)});return}}else if(g===31){if(g=l(b),g!==null){m.blockedOn=g,gt(m.priority,function(){KM(b)});return}}else if(g===3&&b.stateNode.current.memoizedState.isDehydrated){m.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}m.blockedOn=null}function Ty(m){if(m.blockedOn!==null)return!1;for(var g=m.targetContainers;0<g.length;){var b=kS(m.nativeEvent);if(b===null){b=m.nativeEvent;var C=new b.constructor(b.type,b);E1=C,b.target.dispatchEvent(C),E1=null}else return g=xe(b),g!==null&&QM(g),m.blockedOn=b,!1;g.shift()}return!0}function eI(m,g,b){Ty(m)&&b.delete(g)}function Pne(){LS=!1,Ec!==null&&Ty(Ec)&&(Ec=null),Lc!==null&&Ty(Lc)&&(Lc=null),Pc!==null&&Ty(Pc)&&(Pc=null),sg.forEach(eI),rg.forEach(eI)}function ky(m,g){m.blockedOn===g&&(m.blockedOn=null,LS||(LS=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Pne)))}var Ey=null;function tI(m){Ey!==m&&(Ey=m,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Ey===m&&(Ey=null);for(var g=0;g<m.length;g+=3){var b=m[g],C=m[g+1],P=m[g+2];if(typeof C!="function"){if(ES(C||b)===null)continue;break}var R=xe(b);R!==null&&(m.splice(g,3),g-=3,kC(R,{pending:!0,data:P,method:b.method,action:C},C,P))}}))}function Fm(m){function g(qe){return ky(qe,m)}Ec!==null&&ky(Ec,m),Lc!==null&&ky(Lc,m),Pc!==null&&ky(Pc,m),sg.forEach(g),rg.forEach(g);for(var b=0;b<Dc.length;b++){var C=Dc[b];C.blockedOn===m&&(C.blockedOn=null)}for(;0<Dc.length&&(b=Dc[0],b.blockedOn===null);)JM(b),b.blockedOn===null&&Dc.shift();if(b=(m.ownerDocument||m).$$reactFormReplay,b!=null)for(C=0;C<b.length;C+=3){var P=b[C],R=b[C+1],J=P[Dt]||null;if(typeof R=="function")J||tI(b);else if(J){var je=null;if(R&&R.hasAttribute("formAction")){if(P=R,J=R[Dt]||null)je=J.formAction;else if(ES(P)!==null)continue}else je=J.action;typeof je=="function"?b[C+1]=je:(b.splice(C,3),C-=3),tI(b)}}}function nI(){function m(R){R.canIntercept&&R.info==="react-transition"&&R.intercept({handler:function(){return new Promise(function(J){return P=J})},focusReset:"manual",scroll:"manual"})}function g(){P!==null&&(P(),P=null),C||setTimeout(b,20)}function b(){if(!C&&!navigation.transition){var R=navigation.currentEntry;R&&R.url!=null&&navigation.navigate(R.url,{state:R.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var C=!1,P=null;return navigation.addEventListener("navigate",m),navigation.addEventListener("navigatesuccess",g),navigation.addEventListener("navigateerror",g),setTimeout(b,100),function(){C=!0,navigation.removeEventListener("navigate",m),navigation.removeEventListener("navigatesuccess",g),navigation.removeEventListener("navigateerror",g),P!==null&&(P(),P=null)}}}function PS(m){this._internalRoot=m}Ly.prototype.render=PS.prototype.render=function(m){var g=this._internalRoot;if(g===null)throw Error(s(409));var b=g.current,C=Pr();VM(b,C,m,g,null,null)},Ly.prototype.unmount=PS.prototype.unmount=function(){var m=this._internalRoot;if(m!==null){this._internalRoot=null;var g=m.containerInfo;VM(m.current,2,null,m,null,null),uy(),g[on]=null}};function Ly(m){this._internalRoot=m}Ly.prototype.unstable_scheduleHydration=function(m){if(m){var g=Qe();m={blockedOn:null,target:m,priority:g};for(var b=0;b<Dc.length&&g!==0&&g<Dc[b].priority;b++);Dc.splice(b,0,m),b===0&&JM(m)}};var aI=t.version;if(aI!=="19.2.0")throw Error(s(527,aI,"19.2.0"));Z.findDOMNode=function(m){var g=m._reactInternals;if(g===void 0)throw typeof m.render=="function"?Error(s(188)):(m=Object.keys(m).join(","),Error(s(268,m)));return m=u(g),m=m!==null?d(m):null,m=m===null?null:m.stateNode,m};var Dne={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Py=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Py.isDisabled&&Py.supportsFiber)try{De=Py.inject(Dne),$e=Py}catch{}}return lg.createRoot=function(m,g){if(!r(m))throw Error(s(299));var b=!1,C="",P=d5,R=u5,J=m5;return g!=null&&(g.unstable_strictMode===!0&&(b=!0),g.identifierPrefix!==void 0&&(C=g.identifierPrefix),g.onUncaughtError!==void 0&&(P=g.onUncaughtError),g.onCaughtError!==void 0&&(R=g.onCaughtError),g.onRecoverableError!==void 0&&(J=g.onRecoverableError)),g=WM(m,1,!1,null,null,b,C,null,P,R,J,nI),m[on]=g.current,fS(m),new PS(g)},lg.hydrateRoot=function(m,g,b){if(!r(m))throw Error(s(299));var C=!1,P="",R=d5,J=u5,je=m5,qe=null;return b!=null&&(b.unstable_strictMode===!0&&(C=!0),b.identifierPrefix!==void 0&&(P=b.identifierPrefix),b.onUncaughtError!==void 0&&(R=b.onUncaughtError),b.onCaughtError!==void 0&&(J=b.onCaughtError),b.onRecoverableError!==void 0&&(je=b.onRecoverableError),b.formState!==void 0&&(qe=b.formState)),g=WM(m,1,!0,g,b??null,C,P,qe,R,J,je,nI),g.context=GM(null),b=g.current,C=Pr(),C=re(C),P=yc(C),P.callback=null,bc(b,P,C),b=C,g.current.lanes=b,O(g,b),so(g),m[on]=g.current,fS(m),new Ly(g)},lg.version="19.2.0",lg}var fI;function Hne(){if(fI)return MS.exports;fI=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),MS.exports=Bne(),MS.exports}var qne=Hne();var hI="popstate";function Wne(e={}){function t(s,r){let{pathname:i,search:o,hash:l}=s.location;return UT("",{pathname:i,search:o,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function a(s,r){return typeof r=="string"?r:mp(r)}return Vne(t,a,null,e)}function ma(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function xi(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Gne(){return Math.random().toString(36).substring(2,10)}function gI(e,t){return{usr:e.state,key:e.key,idx:t}}function UT(e,t,a=null,s){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Vf(t):t,state:a,key:t&&t.key||s||Gne()}}function mp({pathname:e="/",search:t="",hash:a=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),a&&a!=="#"&&(e+=a.charAt(0)==="#"?a:"#"+a),e}function Vf(e){let t={};if(e){let a=e.indexOf("#");a>=0&&(t.hash=e.substring(a),e=e.substring(0,a));let s=e.indexOf("?");s>=0&&(t.search=e.substring(s),e=e.substring(0,s)),e&&(t.pathname=e)}return t}function Vne(e,t,a,s={}){let{window:r=document.defaultView,v5Compat:i=!1}=s,o=r.history,l="POP",c=null,u=d();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function d(){return(o.state||{idx:null}).idx}function f(){l="POP";let v=d(),j=v==null?null:v-u;u=v,c&&c({action:l,location:N.location,delta:j})}function p(v,j){l="PUSH";let w=UT(N.location,v,j);u=d()+1;let S=gI(w,u),_=N.createHref(w);try{o.pushState(S,"",_)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;r.location.assign(_)}i&&c&&c({action:l,location:N.location,delta:1})}function x(v,j){l="REPLACE";let w=UT(N.location,v,j);u=d();let S=gI(w,u),_=N.createHref(w);o.replaceState(S,"",_),i&&c&&c({action:l,location:N.location,delta:0})}function y(v){return Yne(v)}let N={get action(){return l},get location(){return e(r,o)},listen(v){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(hI,f),c=v,()=>{r.removeEventListener(hI,f),c=null}},createHref(v){return t(r,v)},createURL:y,encodeLocation(v){let j=y(v);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:p,replace:x,go(v){return o.go(v)}};return N}function Yne(e,t=!1){let a="http://localhost";typeof window<"u"&&(a=window.location.origin!=="null"?window.location.origin:window.location.href),ma(a,"No window.location.(origin|href) available to create URL");let s=typeof e=="string"?e:mp(e);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=a+s),new URL(s,a)}function gH(e,t,a="/"){return Qne(e,t,a,!1)}function Qne(e,t,a,s){let r=typeof t=="string"?Vf(t):t,i=Il(r.pathname||"/",a);if(i==null)return null;let o=pH(e);Kne(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=oae(i);l=rae(o[c],u,s)}return l}function pH(e,t=[],a=[],s="",r=!1){let i=(o,l,c=r,u)=>{let d={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(s)&&c)return;ma(d.relativePath.startsWith(s),`Absolute route path "${d.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(s.length)}let f=Pl([s,d.relativePath]),p=a.concat(d);o.children&&o.children.length>0&&(ma(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),pH(o.children,t,p,f,c)),!(o.path==null&&!o.index)&&t.push({path:f,score:aae(f,o.index),routesMeta:p})};return e.forEach((o,l)=>{if(o.path===""||!o.path?.includes("?"))i(o,l);else for(let c of xH(o.path))i(o,l,!0,c)}),t}function xH(e){let t=e.split("/");if(t.length===0)return[];let[a,...s]=t,r=a.endsWith("?"),i=a.replace(/\?$/,"");if(s.length===0)return r?[i,""]:[i];let o=xH(s.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),r&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function Kne(e){e.sort((t,a)=>t.score!==a.score?a.score-t.score:sae(t.routesMeta.map(s=>s.childrenIndex),a.routesMeta.map(s=>s.childrenIndex)))}var Xne=/^:[\w-]+$/,Zne=3,Jne=2,eae=1,tae=10,nae=-2,pI=e=>e==="*";function aae(e,t){let a=e.split("/"),s=a.length;return a.some(pI)&&(s+=nae),t&&(s+=Jne),a.filter(r=>!pI(r)).reduce((r,i)=>r+(Xne.test(i)?Zne:i===""?eae:tae),s)}function sae(e,t){return e.length===t.length&&e.slice(0,-1).every((s,r)=>s===t[r])?e[e.length-1]-t[t.length-1]:0}function rae(e,t,a=!1){let{routesMeta:s}=e,r={},i="/",o=[];for(let l=0;l<s.length;++l){let c=s[l],u=l===s.length-1,d=i==="/"?t:t.slice(i.length)||"/",f=hv({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),p=c.route;if(!f&&u&&a&&!s[s.length-1].route.index&&(f=hv({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(r,f.params),o.push({params:r,pathname:Pl([i,f.pathname]),pathnameBase:uae(Pl([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=Pl([i,f.pathnameBase]))}return o}function hv(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[a,s]=iae(e.path,e.caseSensitive,e.end),r=t.match(a);if(!r)return null;let i=r[0],o=i.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:s.reduce((u,{paramName:d,isOptional:f},p)=>{if(d==="*"){let y=l[p]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const x=l[p];return f&&!x?u[d]=void 0:u[d]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function iae(e,t=!1,a=!0){xi(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let s=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(s.push({paramName:"*"}),r+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?r+="\\/*$":e!==""&&e!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),s]}function oae(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return xi(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Il(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let a=t.endsWith("/")?t.length-1:t.length,s=e.charAt(a);return s&&s!=="/"?null:e.slice(a)||"/"}var lae=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function cae(e,t="/"){let{pathname:a,search:s="",hash:r=""}=typeof e=="string"?Vf(e):e,i;return a?(a=a.replace(/\/\/+/g,"/"),a.startsWith("/")?i=xI(a.substring(1),"/"):i=xI(a,t)):i=t,{pathname:i,search:mae(s),hash:fae(r)}}function xI(e,t){let a=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?a.length>1&&a.pop():r!=="."&&a.push(r)}),a.length>1?a.join("/"):"/"}function zS(e,t,a,s){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function dae(e){return e.filter((t,a)=>a===0||t.route.path&&t.route.path.length>0)}function cL(e){let t=dae(e);return t.map((a,s)=>s===t.length-1?a.pathname:a.pathnameBase)}function dL(e,t,a,s=!1){let r;typeof e=="string"?r=Vf(e):(r={...e},ma(!r.pathname||!r.pathname.includes("?"),zS("?","pathname","search",r)),ma(!r.pathname||!r.pathname.includes("#"),zS("#","pathname","hash",r)),ma(!r.search||!r.search.includes("#"),zS("#","search","hash",r)));let i=e===""||r.pathname==="",o=i?"/":r.pathname,l;if(o==null)l=a;else{let f=t.length-1;if(!s&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;r.pathname=p.join("/")}l=f>=0?t[f]:"/"}let c=cae(r,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&a.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var Pl=e=>e.join("/").replace(/\/\/+/g,"/"),uae=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),mae=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,fae=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,hae=class{constructor(e,t,a,s=!1){this.status=e,this.statusText=t||"",this.internal=s,a instanceof Error?(this.data=a.toString(),this.error=a):this.data=a}};function gae(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function pae(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var yH=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function bH(e,t){let a=e;if(typeof a!="string"||!lae.test(a))return{absoluteURL:void 0,isExternal:!1,to:a};let s=a,r=!1;if(yH)try{let i=new URL(window.location.href),o=a.startsWith("//")?new URL(i.protocol+a):new URL(a),l=Il(o.pathname,t);o.origin===i.origin&&l!=null?a=l+o.search+o.hash:r=!0}catch{xi(!1,`<Link to="${a}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:r,to:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var vH=["POST","PUT","PATCH","DELETE"];new Set(vH);var xae=["GET",...vH];new Set(xae);var Yf=h.createContext(null);Yf.displayName="DataRouter";var Vw=h.createContext(null);Vw.displayName="DataRouterState";var yae=h.createContext(!1),wH=h.createContext({isTransitioning:!1});wH.displayName="ViewTransition";var bae=h.createContext(new Map);bae.displayName="Fetchers";var vae=h.createContext(null);vae.displayName="Await";var qr=h.createContext(null);qr.displayName="Navigation";var Jp=h.createContext(null);Jp.displayName="Location";var Ci=h.createContext({outlet:null,matches:[],isDataRoute:!1});Ci.displayName="Route";var uL=h.createContext(null);uL.displayName="RouteError";var NH="REACT_ROUTER_ERROR",wae="REDIRECT",Nae="ROUTE_ERROR_RESPONSE";function jae(e){if(e.startsWith(`${NH}:${wae}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function Cae(e){if(e.startsWith(`${NH}:${Nae}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new hae(t.status,t.statusText,t.data)}catch{}}function Sae(e,{relative:t}={}){ma(Qf(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:s}=h.useContext(qr),{hash:r,pathname:i,search:o}=ex(e,{relative:t}),l=i;return a!=="/"&&(l=i==="/"?a:Pl([a,i])),s.createHref({pathname:l,search:o,hash:r})}function Qf(){return h.useContext(Jp)!=null}function Jt(){return ma(Qf(),"useLocation() may be used only in the context of a <Router> component."),h.useContext(Jp).location}var jH="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function CH(e){h.useContext(qr).static||h.useLayoutEffect(e)}function jt(){let{isDataRoute:e}=h.useContext(Ci);return e?Fae():_ae()}function _ae(){ma(Qf(),"useNavigate() may be used only in the context of a <Router> component.");let e=h.useContext(Yf),{basename:t,navigator:a}=h.useContext(qr),{matches:s}=h.useContext(Ci),{pathname:r}=Jt(),i=JSON.stringify(cL(s)),o=h.useRef(!1);return CH(()=>{o.current=!0}),h.useCallback((c,u={})=>{if(xi(o.current,jH),!o.current)return;if(typeof c=="number"){a.go(c);return}let d=dL(c,JSON.parse(i),r,u.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:Pl([t,d.pathname])),(u.replace?a.replace:a.push)(d,u.state,u)},[t,a,i,r,e])}var Aae=h.createContext(null);function Tae(e){let t=h.useContext(Ci).outlet;return h.useMemo(()=>t&&h.createElement(Aae.Provider,{value:e},t),[t,e])}function Ho(){let{matches:e}=h.useContext(Ci),t=e[e.length-1];return t?t.params:{}}function ex(e,{relative:t}={}){let{matches:a}=h.useContext(Ci),{pathname:s}=Jt(),r=JSON.stringify(cL(a));return h.useMemo(()=>dL(e,JSON.parse(r),s,t==="path"),[e,r,s,t])}function kae(e,t){return SH(e,t)}function SH(e,t,a,s,r){ma(Qf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=h.useContext(qr),{matches:o}=h.useContext(Ci),l=o[o.length-1],c=l?l.params:{},u=l?l.pathname:"/",d=l?l.pathnameBase:"/",f=l&&l.route;{let w=f&&f.path||"";AH(u,!f||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let p=Jt(),x;if(t){let w=typeof t=="string"?Vf(t):t;ma(d==="/"||w.pathname?.startsWith(d),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${w.pathname}" was given in the \`location\` prop.`),x=w}else x=p;let y=x.pathname||"/",N=y;if(d!=="/"){let w=d.replace(/^\//,"").split("/");N="/"+y.replace(/^\//,"").split("/").slice(w.length).join("/")}let v=gH(e,{pathname:N});xi(f||v!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),xi(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=Oae(v&&v.map(w=>Object.assign({},w,{params:Object.assign({},c,w.params),pathname:Pl([d,i.encodeLocation?i.encodeLocation(w.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?d:Pl([d,i.encodeLocation?i.encodeLocation(w.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathnameBase])})),o,a,s,r);return t&&j?h.createElement(Jp.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},j):j}function Eae(){let e=zae(),t=gae(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),a=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},i={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=h.createElement(h.Fragment,null,h.createElement("p",null," Hey developer "),h.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",h.createElement("code",{style:i},"ErrorBoundary")," or"," ",h.createElement("code",{style:i},"errorElement")," prop on your route.")),h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},t),a?h.createElement("pre",{style:r},a):null,o)}var Lae=h.createElement(Eae,null),_H=class extends h.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const a=Cae(e.digest);a&&(e=a)}let t=e!==void 0?h.createElement(Ci.Provider,{value:this.props.routeContext},h.createElement(uL.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?h.createElement(Pae,{error:e},t):t}};_H.contextType=yae;var FS=new WeakMap;function Pae({children:e,error:t}){let{basename:a}=h.useContext(qr);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let s=jae(t.digest);if(s){let r=FS.get(t);if(r)throw r;let i=bH(s.location,a);if(yH&&!FS.get(t))if(i.isExternal||s.reloadDocument)window.location.href=i.absoluteURL||i.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:s.replace}));throw FS.set(t,o),o}return h.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return e}function Dae({routeContext:e,match:t,children:a}){let s=h.useContext(Yf);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),h.createElement(Ci.Provider,{value:e},a)}function Oae(e,t=[],a=null,s=null,r=null){if(e==null){if(!a)return null;if(a.errors)e=a.matches;else if(t.length===0&&!a.initialized&&a.matches.length>0)e=a.matches;else return null}let i=e,o=a?.errors;if(o!=null){let d=i.findIndex(f=>f.route.id&&o?.[f.route.id]!==void 0);ma(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,d+1))}let l=!1,c=-1;if(a)for(let d=0;d<i.length;d++){let f=i[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=d),f.route.id){let{loaderData:p,errors:x}=a,y=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!x||x[f.route.id]===void 0);if(f.route.lazy||y){l=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}let u=a&&s?(d,f)=>{s(d,{location:a.location,params:a.matches?.[0]?.params??{},unstable_pattern:pae(a.matches),errorInfo:f})}:void 0;return i.reduceRight((d,f,p)=>{let x,y=!1,N=null,v=null;a&&(x=o&&f.route.id?o[f.route.id]:void 0,N=f.route.errorElement||Lae,l&&(c<0&&p===0?(AH("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,v=null):c===p&&(y=!0,v=f.route.hydrateFallbackElement||null)));let j=t.concat(i.slice(0,p+1)),w=()=>{let S;return x?S=N:y?S=v:f.route.Component?S=h.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=d,h.createElement(Dae,{match:f,routeContext:{outlet:d,matches:j,isDataRoute:a!=null},children:S})};return a&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?h.createElement(_H,{location:a.location,revalidation:a.revalidation,component:N,error:x,children:w(),routeContext:{outlet:null,matches:j,isDataRoute:!0},onError:u}):w()},null)}function mL(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Mae(e){let t=h.useContext(Yf);return ma(t,mL(e)),t}function Iae(e){let t=h.useContext(Vw);return ma(t,mL(e)),t}function $ae(e){let t=h.useContext(Ci);return ma(t,mL(e)),t}function fL(e){let t=$ae(e),a=t.matches[t.matches.length-1];return ma(a.route.id,`${e} can only be used on routes that contain a unique "id"`),a.route.id}function Rae(){return fL("useRouteId")}function zae(){let e=h.useContext(uL),t=Iae("useRouteError"),a=fL("useRouteError");return e!==void 0?e:t.errors?.[a]}function Fae(){let{router:e}=Mae("useNavigate"),t=fL("useNavigate"),a=h.useRef(!1);return CH(()=>{a.current=!0}),h.useCallback(async(r,i={})=>{xi(a.current,jH),a.current&&(typeof r=="number"?await e.navigate(r):await e.navigate(r,{fromRouteId:t,...i}))},[e,t])}var yI={};function AH(e,t,a){!t&&!yI[e]&&(yI[e]=!0,xi(!1,a))}h.memo(Uae);function Uae({routes:e,future:t,state:a,onError:s}){return SH(e,void 0,a,s,t)}function ci({to:e,replace:t,state:a,relative:s}){ma(Qf(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=h.useContext(qr);xi(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=h.useContext(Ci),{pathname:o}=Jt(),l=jt(),c=dL(e,cL(i),o,s==="path"),u=JSON.stringify(c);return h.useEffect(()=>{l(JSON.parse(u),{replace:t,state:a,relative:s})},[l,u,s,t,a]),null}function tx(e){return Tae(e.context)}function vt(e){ma(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Bae({basename:e="/",children:t=null,location:a,navigationType:s="POP",navigator:r,static:i=!1,unstable_useTransitions:o}){ma(!Qf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),c=h.useMemo(()=>({basename:l,navigator:r,static:i,unstable_useTransitions:o,future:{}}),[l,r,i,o]);typeof a=="string"&&(a=Vf(a));let{pathname:u="/",search:d="",hash:f="",state:p=null,key:x="default"}=a,y=h.useMemo(()=>{let N=Il(u,l);return N==null?null:{location:{pathname:N,search:d,hash:f,state:p,key:x},navigationType:s}},[l,u,d,f,p,x,s]);return xi(y!=null,`<Router basename="${l}"> is not able to match the URL "${u}${d}${f}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:h.createElement(qr.Provider,{value:c},h.createElement(Jp.Provider,{children:t,value:y}))}function Hae({children:e,location:t}){return kae(BT(e),t)}function BT(e,t=[]){let a=[];return h.Children.forEach(e,(s,r)=>{if(!h.isValidElement(s))return;let i=[...t,r];if(s.type===h.Fragment){a.push.apply(a,BT(s.props.children,i));return}ma(s.type===vt,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ma(!s.props.index||!s.props.children,"An index route cannot have child routes.");let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=BT(s.props.children,i)),a.push(o)}),a}var Gb="get",Vb="application/x-www-form-urlencoded";function Yw(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function qae(e){return Yw(e)&&e.tagName.toLowerCase()==="button"}function Wae(e){return Yw(e)&&e.tagName.toLowerCase()==="form"}function Gae(e){return Yw(e)&&e.tagName.toLowerCase()==="input"}function Vae(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Yae(e,t){return e.button===0&&(!t||t==="_self")&&!Vae(e)}function HT(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,a)=>{let s=e[a];return t.concat(Array.isArray(s)?s.map(r=>[a,r]):[[a,s]])},[]))}function Qae(e,t){let a=HT(e);return t&&t.forEach((s,r)=>{a.has(r)||t.getAll(r).forEach(i=>{a.append(r,i)})}),a}var Dy=null;function Kae(){if(Dy===null)try{new FormData(document.createElement("form"),0),Dy=!1}catch{Dy=!0}return Dy}var Xae=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function US(e){return e!=null&&!Xae.has(e)?(xi(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Vb}"`),null):e}function Zae(e,t){let a,s,r,i,o;if(Wae(e)){let l=e.getAttribute("action");s=l?Il(l,t):null,a=e.getAttribute("method")||Gb,r=US(e.getAttribute("enctype"))||Vb,i=new FormData(e)}else if(qae(e)||Gae(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||l.getAttribute("action");if(s=c?Il(c,t):null,a=e.getAttribute("formmethod")||l.getAttribute("method")||Gb,r=US(e.getAttribute("formenctype"))||US(l.getAttribute("enctype"))||Vb,i=new FormData(l,e),!Kae()){let{name:u,type:d,value:f}=e;if(d==="image"){let p=u?`${u}.`:"";i.append(`${p}x`,"0"),i.append(`${p}y`,"0")}else u&&i.append(u,f)}}else{if(Yw(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=Gb,s=null,r=Vb,o=e}return i&&r==="text/plain"&&(o=i,i=void 0),{action:s,method:a.toLowerCase(),encType:r,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function hL(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Jae(e,t,a,s){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return a?r.pathname.endsWith("/")?r.pathname=`${r.pathname}_.${s}`:r.pathname=`${r.pathname}.${s}`:r.pathname==="/"?r.pathname=`_root.${s}`:t&&Il(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${s}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${s}`,r}async function ese(e,t){if(e.id in t)return t[e.id];try{let a=await import(e.module);return t[e.id]=a,a}catch(a){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function tse(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function nse(e,t,a){let s=await Promise.all(e.map(async r=>{let i=t.routes[r.route.id];if(i){let o=await ese(i,a);return o.links?o.links():[]}return[]}));return ise(s.flat(1).filter(tse).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function bI(e,t,a,s,r,i){let o=(c,u)=>a[u]?c.route.id!==a[u].route.id:!0,l=(c,u)=>a[u].pathname!==c.pathname||a[u].route.path?.endsWith("*")&&a[u].params["*"]!==c.params["*"];return i==="assets"?t.filter((c,u)=>o(c,u)||l(c,u)):i==="data"?t.filter((c,u)=>{let d=s.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(o(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let f=c.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:a[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function ase(e,t,{includeHydrateFallback:a}={}){return sse(e.map(s=>{let r=t.routes[s.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),a&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function sse(e){return[...new Set(e)]}function rse(e){let t={},a=Object.keys(e).sort();for(let s of a)t[s]=e[s];return t}function ise(e,t){let a=new Set;return new Set(t),e.reduce((s,r)=>{let i=JSON.stringify(rse(r));return a.has(i)||(a.add(i),s.push({key:i,link:r})),s},[])}function TH(){let e=h.useContext(Yf);return hL(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function ose(){let e=h.useContext(Vw);return hL(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var gL=h.createContext(void 0);gL.displayName="FrameworkContext";function kH(){let e=h.useContext(gL);return hL(e,"You must render this element inside a <HydratedRouter> element"),e}function lse(e,t){let a=h.useContext(gL),[s,r]=h.useState(!1),[i,o]=h.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:f}=t,p=h.useRef(null);h.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let N=j=>{j.forEach(w=>{o(w.isIntersecting)})},v=new IntersectionObserver(N,{threshold:.5});return p.current&&v.observe(p.current),()=>{v.disconnect()}}},[e]),h.useEffect(()=>{if(s){let N=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(N)}}},[s]);let x=()=>{r(!0)},y=()=>{r(!1),o(!1)};return a?e!=="intent"?[i,p,{}]:[i,p,{onFocus:cg(l,x),onBlur:cg(c,y),onMouseEnter:cg(u,x),onMouseLeave:cg(d,y),onTouchStart:cg(f,x)}]:[!1,p,{}]}function cg(e,t){return a=>{e&&e(a),a.defaultPrevented||t(a)}}function cse({page:e,...t}){let{router:a}=TH(),s=h.useMemo(()=>gH(a.routes,e,a.basename),[a.routes,e,a.basename]);return s?h.createElement(use,{page:e,matches:s,...t}):null}function dse(e){let{manifest:t,routeModules:a}=kH(),[s,r]=h.useState([]);return h.useEffect(()=>{let i=!1;return nse(e,t,a).then(o=>{i||r(o)}),()=>{i=!0}},[e,t,a]),s}function use({page:e,matches:t,...a}){let s=Jt(),{future:r,manifest:i,routeModules:o}=kH(),{basename:l}=TH(),{loaderData:c,matches:u}=ose(),d=h.useMemo(()=>bI(e,t,u,i,s,"data"),[e,t,u,i,s]),f=h.useMemo(()=>bI(e,t,u,i,s,"assets"),[e,t,u,i,s]),p=h.useMemo(()=>{if(e===s.pathname+s.search+s.hash)return[];let N=new Set,v=!1;if(t.forEach(w=>{let S=i.routes[w.route.id];!S||!S.hasLoader||(!d.some(_=>_.route.id===w.route.id)&&w.route.id in c&&o[w.route.id]?.shouldRevalidate||S.hasClientLoader?v=!0:N.add(w.route.id))}),N.size===0)return[];let j=Jae(e,l,r.unstable_trailingSlashAwareDataRequests,"data");return v&&N.size>0&&j.searchParams.set("_routes",t.filter(w=>N.has(w.route.id)).map(w=>w.route.id).join(",")),[j.pathname+j.search]},[l,r.unstable_trailingSlashAwareDataRequests,c,s,i,d,t,e,o]),x=h.useMemo(()=>ase(f,i),[f,i]),y=dse(f);return h.createElement(h.Fragment,null,p.map(N=>h.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...a})),x.map(N=>h.createElement("link",{key:N,rel:"modulepreload",href:N,...a})),y.map(({key:N,link:v})=>h.createElement("link",{key:N,nonce:a.nonce,...v,crossOrigin:v.crossOrigin??a.crossOrigin})))}function mse(...e){return t=>{e.forEach(a=>{typeof a=="function"?a(t):a!=null&&(a.current=t)})}}var fse=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{fse&&(window.__reactRouterVersion="7.13.0")}catch{}function hse({basename:e,children:t,unstable_useTransitions:a,window:s}){let r=h.useRef();r.current==null&&(r.current=Wne({window:s,v5Compat:!0}));let i=r.current,[o,l]=h.useState({action:i.action,location:i.location}),c=h.useCallback(u=>{a===!1?l(u):h.startTransition(()=>l(u))},[a]);return h.useLayoutEffect(()=>i.listen(c),[i,c]),h.createElement(Bae,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:i,unstable_useTransitions:a})}var EH=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rd=h.forwardRef(function({onClick:t,discover:a="render",prefetch:s="none",relative:r,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f,unstable_defaultShouldRevalidate:p,...x},y){let{basename:N,unstable_useTransitions:v}=h.useContext(qr),j=typeof u=="string"&&EH.test(u),w=bH(u,N);u=w.to;let S=Sae(u,{relative:r}),[_,E,T]=lse(s,x),A=xse(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:r,viewTransition:f,unstable_defaultShouldRevalidate:p,unstable_useTransitions:v});function L(F){t&&t(F),F.defaultPrevented||A(F)}let M=h.createElement("a",{...x,...T,href:w.absoluteURL||S,onClick:w.isExternal||i?t:L,ref:mse(y,E),target:c,"data-discover":!j&&a==="render"?"true":void 0});return _&&!j?h.createElement(h.Fragment,null,M,h.createElement(cse,{page:S})):M});rd.displayName="Link";var Ft=h.forwardRef(function({"aria-current":t="page",caseSensitive:a=!1,className:s="",end:r=!1,style:i,to:o,viewTransition:l,children:c,...u},d){let f=ex(o,{relative:u.relative}),p=Jt(),x=h.useContext(Vw),{navigator:y,basename:N}=h.useContext(qr),v=x!=null&&Nse(f)&&l===!0,j=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,w=p.pathname,S=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;a||(w=w.toLowerCase(),S=S?S.toLowerCase():null,j=j.toLowerCase()),S&&N&&(S=Il(S,N)||S);const _=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let E=w===j||!r&&w.startsWith(j)&&w.charAt(_)==="/",T=S!=null&&(S===j||!r&&S.startsWith(j)&&S.charAt(j.length)==="/"),A={isActive:E,isPending:T,isTransitioning:v},L=E?t:void 0,M;typeof s=="function"?M=s(A):M=[s,E?"active":null,T?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let F=typeof i=="function"?i(A):i;return h.createElement(rd,{...u,"aria-current":L,className:M,ref:d,style:F,to:o,viewTransition:l},typeof c=="function"?c(A):c)});Ft.displayName="NavLink";var gse=h.forwardRef(({discover:e="render",fetcherKey:t,navigate:a,reloadDocument:s,replace:r,state:i,method:o=Gb,action:l,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:f,unstable_defaultShouldRevalidate:p,...x},y)=>{let{unstable_useTransitions:N}=h.useContext(qr),v=vse(),j=wse(l,{relative:u}),w=o.toLowerCase()==="get"?"get":"post",S=typeof l=="string"&&EH.test(l),_=E=>{if(c&&c(E),E.defaultPrevented)return;E.preventDefault();let T=E.nativeEvent.submitter,A=T?.getAttribute("formmethod")||o,L=()=>v(T||E.currentTarget,{fetcherKey:t,method:A,navigate:a,replace:r,state:i,relative:u,preventScrollReset:d,viewTransition:f,unstable_defaultShouldRevalidate:p});N&&a!==!1?h.startTransition(()=>L()):L()};return h.createElement("form",{ref:y,method:w,action:j,onSubmit:s?c:_,...x,"data-discover":!S&&e==="render"?"true":void 0})});gse.displayName="Form";function pse(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function LH(e){let t=h.useContext(Yf);return ma(t,pse(e)),t}function xse(e,{target:t,replace:a,state:s,preventScrollReset:r,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l,unstable_useTransitions:c}={}){let u=jt(),d=Jt(),f=ex(e,{relative:i});return h.useCallback(p=>{if(Yae(p,t)){p.preventDefault();let x=a!==void 0?a:mp(d)===mp(f),y=()=>u(e,{replace:x,state:s,preventScrollReset:r,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l});c?h.startTransition(()=>y()):y()}},[d,u,f,a,s,t,e,r,i,o,l,c])}function Us(e){xi(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=h.useRef(HT(e)),a=h.useRef(!1),s=Jt(),r=h.useMemo(()=>Qae(s.search,a.current?null:t.current),[s.search]),i=jt(),o=h.useCallback((l,c)=>{const u=HT(typeof l=="function"?l(new URLSearchParams(r)):l);a.current=!0,i("?"+u,c)},[i,r]);return[r,o]}var yse=0,bse=()=>`__${String(++yse)}__`;function vse(){let{router:e}=LH("useSubmit"),{basename:t}=h.useContext(qr),a=Rae(),s=e.fetch,r=e.navigate;return h.useCallback(async(i,o={})=>{let{action:l,method:c,encType:u,formData:d,body:f}=Zae(i,t);if(o.navigate===!1){let p=o.fetcherKey||bse();await s(p,a,o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:d,body:f,formMethod:o.method||c,formEncType:o.encType||u,flushSync:o.flushSync})}else await r(o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:d,body:f,formMethod:o.method||c,formEncType:o.encType||u,replace:o.replace,state:o.state,fromRouteId:a,flushSync:o.flushSync,viewTransition:o.viewTransition})},[s,r,t,a])}function wse(e,{relative:t}={}){let{basename:a}=h.useContext(qr),s=h.useContext(Ci);ma(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),i={...ex(e||".",{relative:t})},o=Jt();if(e==null){i.search=o.search;let l=new URLSearchParams(i.search),c=l.getAll("index");if(c.some(d=>d==="")){l.delete("index"),c.filter(f=>f).forEach(f=>l.append("index",f));let d=l.toString();i.search=d?`?${d}`:""}}return(!e||e===".")&&r.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(i.pathname=i.pathname==="/"?a:Pl([a,i.pathname])),mp(i)}function Nse(e,{relative:t}={}){let a=h.useContext(wH);ma(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=LH("useViewTransitionState"),r=ex(e,{relative:t});if(!a.isTransitioning)return!1;let i=Il(a.currentLocation.pathname,s)||a.currentLocation.pathname,o=Il(a.nextLocation.pathname,s)||a.nextLocation.pathname;return hv(r.pathname,o)!=null||hv(r.pathname,i)!=null}var Hi=hH();const Oy=Zi(Hi);function PH(e){var t,a,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(a=PH(e[t]))&&(s&&(s+=" "),s+=a)}else for(a in e)e[a]&&(s&&(s+=" "),s+=a);return s}function Mt(){for(var e,t,a=0,s="",r=arguments.length;a<r;a++)(e=arguments[a])&&(t=PH(e))&&(s&&(s+=" "),s+=t);return s}function jse(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",t.firstChild?t.insertBefore(a,t.firstChild):t.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}jse(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var nx=e=>typeof e=="number"&&!isNaN(e),Au=e=>typeof e=="string",$l=e=>typeof e=="function",Cse=e=>Au(e)||nx(e),qT=e=>Au(e)||$l(e)?e:null,Sse=(e,t)=>e===!1||nx(e)&&e>0?e:t,WT=e=>h.isValidElement(e)||Au(e)||$l(e)||nx(e);function _se(e,t,a=300){let{scrollHeight:s,style:r}=e;requestAnimationFrame(()=>{r.minHeight="initial",r.height=s+"px",r.transition=`all ${a}ms`,requestAnimationFrame(()=>{r.height="0",r.padding="0",r.margin="0",setTimeout(t,a)})})}function Ase({enter:e,exit:t,appendPosition:a=!1,collapse:s=!0,collapseDuration:r=300}){return function({children:i,position:o,preventExitTransition:l,done:c,nodeRef:u,isIn:d,playToast:f}){let p=a?`${e}--${o}`:e,x=a?`${t}--${o}`:t,y=h.useRef(0);return h.useLayoutEffect(()=>{let N=u.current,v=p.split(" "),j=w=>{w.target===u.current&&(f(),N.removeEventListener("animationend",j),N.removeEventListener("animationcancel",j),y.current===0&&w.type!=="animationcancel"&&N.classList.remove(...v))};N.classList.add(...v),N.addEventListener("animationend",j),N.addEventListener("animationcancel",j)},[]),h.useEffect(()=>{let N=u.current,v=()=>{N.removeEventListener("animationend",v),s?_se(N,c,r):c()};d||(l?v():(y.current=1,N.className+=` ${x}`,N.addEventListener("animationend",v)))},[d]),xt.createElement(xt.Fragment,null,i)}}function vI(e,t){return{content:DH(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function DH(e,t,a=!1){return h.isValidElement(e)&&!Au(e.type)?h.cloneElement(e,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:a}):$l(e)?e({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:a}):e}function Tse({closeToast:e,theme:t,ariaLabel:a="close"}){return xt.createElement("button",{className:`Toastify__close-button Toastify__close-button--${t}`,type:"button",onClick:s=>{s.stopPropagation(),e(!0)},"aria-label":a},xt.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},xt.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function kse({delay:e,isRunning:t,closeToast:a,type:s="default",hide:r,className:i,controlledProgress:o,progress:l,rtl:c,isIn:u,theme:d}){let f=r||o&&l===0,p={animationDuration:`${e}ms`,animationPlayState:t?"running":"paused"};o&&(p.transform=`scaleX(${l})`);let x=Mt("Toastify__progress-bar",o?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${d}`,`Toastify__progress-bar--${s}`,{"Toastify__progress-bar--rtl":c}),y=$l(i)?i({rtl:c,type:s,defaultClassName:x}):Mt(x,i),N={[o&&l>=1?"onTransitionEnd":"onAnimationEnd"]:o&&l<1?null:()=>{u&&a()}};return xt.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":f},xt.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${d} Toastify__progress-bar--${s}`}),xt.createElement("div",{role:"progressbar","aria-hidden":f?"true":"false","aria-label":"notification timer",className:y,style:p,...N}))}var Ese=1,OH=()=>`${Ese++}`;function Lse(e,t,a){let s=1,r=0,i=[],o=[],l=t,c=new Map,u=new Set,d=w=>(u.add(w),()=>u.delete(w)),f=()=>{o=Array.from(c.values()),u.forEach(w=>w())},p=({containerId:w,toastId:S,updateId:_})=>{let E=w?w!==e:e!==1,T=c.has(S)&&_==null;return E||T},x=(w,S)=>{c.forEach(_=>{var E;(S==null||S===_.props.toastId)&&((E=_.toggle)==null||E.call(_,w))})},y=w=>{var S,_;(_=(S=w.props)==null?void 0:S.onClose)==null||_.call(S,w.removalReason),w.isActive=!1},N=w=>{if(w==null)c.forEach(y);else{let S=c.get(w);S&&y(S)}f()},v=()=>{r-=i.length,i=[]},j=w=>{var S,_;let{toastId:E,updateId:T}=w.props,A=T==null;w.staleId&&c.delete(w.staleId),w.isActive=!0,c.set(E,w),f(),a(vI(w,A?"added":"updated")),A&&((_=(S=w.props).onOpen)==null||_.call(S))};return{id:e,props:l,observe:d,toggle:x,removeToast:N,toasts:c,clearQueue:v,buildToast:(w,S)=>{if(p(S))return;let{toastId:_,updateId:E,data:T,staleId:A,delay:L}=S,M=E==null;M&&r++;let F={...l,style:l.toastStyle,key:s++,...Object.fromEntries(Object.entries(S).filter(([D,q])=>q!=null)),toastId:_,updateId:E,data:T,isIn:!1,className:qT(S.className||l.toastClassName),progressClassName:qT(S.progressClassName||l.progressClassName),autoClose:S.isLoading?!1:Sse(S.autoClose,l.autoClose),closeToast(D){c.get(_).removalReason=D,N(_)},deleteToast(){let D=c.get(_);if(D!=null){if(a(vI(D,"removed")),c.delete(_),r--,r<0&&(r=0),i.length>0){j(i.shift());return}f()}}};F.closeButton=l.closeButton,S.closeButton===!1||WT(S.closeButton)?F.closeButton=S.closeButton:S.closeButton===!0&&(F.closeButton=WT(l.closeButton)?l.closeButton:!0);let $={content:w,props:F,staleId:A};l.limit&&l.limit>0&&r>l.limit&&M?i.push($):nx(L)?setTimeout(()=>{j($)},L):j($)},setProps(w){l=w},setToggle:(w,S)=>{let _=c.get(w);_&&(_.toggle=S)},isToastActive:w=>{var S;return(S=c.get(w))==null?void 0:S.isActive},getSnapshot:()=>o}}var Ws=new Map,fp=[],GT=new Set,Pse=e=>GT.forEach(t=>t(e)),MH=()=>Ws.size>0;function Dse(){fp.forEach(e=>$H(e.content,e.options)),fp=[]}var Ose=(e,{containerId:t})=>{var a;return(a=Ws.get(t||1))==null?void 0:a.toasts.get(e)};function IH(e,t){var a;if(t)return!!((a=Ws.get(t))!=null&&a.isToastActive(e));let s=!1;return Ws.forEach(r=>{r.isToastActive(e)&&(s=!0)}),s}function Mse(e){if(!MH()){fp=fp.filter(t=>e!=null&&t.options.toastId!==e);return}if(e==null||Cse(e))Ws.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=Ws.get(e.containerId);t?t.removeToast(e.id):Ws.forEach(a=>{a.removeToast(e.id)})}}var Ise=(e={})=>{Ws.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})};function $H(e,t){WT(e)&&(MH()||fp.push({content:e,options:t}),Ws.forEach(a=>{a.buildToast(e,t)}))}function $se(e){var t;(t=Ws.get(e.containerId||1))==null||t.setToggle(e.id,e.fn)}function RH(e,t){Ws.forEach(a=>{(t==null||!(t!=null&&t.containerId)||t?.containerId===a.id)&&a.toggle(e,t?.id)})}function Rse(e){let t=e.containerId||1;return{subscribe(a){let s=Lse(t,e,Pse);Ws.set(t,s);let r=s.observe(a);return Dse(),()=>{r(),Ws.delete(t)}},setProps(a){var s;(s=Ws.get(t))==null||s.setProps(a)},getSnapshot(){var a;return(a=Ws.get(t))==null?void 0:a.getSnapshot()}}}function zse(e){return GT.add(e),()=>{GT.delete(e)}}function Fse(e){return e&&(Au(e.toastId)||nx(e.toastId))?e.toastId:OH()}function ax(e,t){return $H(e,t),t.toastId}function Qw(e,t){return{...t,type:t&&t.type||e,toastId:Fse(t)}}function Kw(e){return(t,a)=>ax(t,Qw(e,a))}function W(e,t){return ax(e,Qw("default",t))}W.loading=(e,t)=>ax(e,Qw("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t}));function Use(e,{pending:t,error:a,success:s},r){let i;t&&(i=Au(t)?W.loading(t,r):W.loading(t.render,{...r,...t}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(u,d,f)=>{if(d==null){W.dismiss(i);return}let p={type:u,...o,...r,data:f},x=Au(d)?{render:d}:d;return i?W.update(i,{...p,...x}):W(x.render,{...p,...x}),f},c=$l(e)?e():e;return c.then(u=>l("success",s,u)).catch(u=>l("error",a,u)),c}W.promise=Use;W.success=Kw("success");W.info=Kw("info");W.error=Kw("error");W.warning=Kw("warning");W.warn=W.warning;W.dark=(e,t)=>ax(e,Qw("default",{theme:"dark",...t}));function Bse(e){Mse(e)}W.dismiss=Bse;W.clearWaitingQueue=Ise;W.isActive=IH;W.update=(e,t={})=>{let a=Ose(e,t);if(a){let{props:s,content:r}=a,i={delay:100,...s,...t,toastId:t.toastId||e,updateId:OH()};i.toastId!==e&&(i.staleId=e);let o=i.render||r;delete i.render,ax(o,i)}};W.done=e=>{W.update(e,{progress:1})};W.onChange=zse;W.play=e=>RH(!0,e);W.pause=e=>RH(!1,e);function Hse(e){var t;let{subscribe:a,getSnapshot:s,setProps:r}=h.useRef(Rse(e)).current;r(e);let i=(t=h.useSyncExternalStore(a,s,s))==null?void 0:t.slice();function o(l){if(!i)return[];let c=new Map;return e.newestOnTop&&i.reverse(),i.forEach(u=>{let{position:d}=u.props;c.has(d)||c.set(d,[]),c.get(d).push(u)}),Array.from(c,u=>l(u[0],u[1]))}return{getToastToRender:o,isToastActive:IH,count:i?.length}}function qse(e){let[t,a]=h.useState(!1),[s,r]=h.useState(!1),i=h.useRef(null),o=h.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:l,pauseOnHover:c,closeToast:u,onClick:d,closeOnClick:f}=e;$se({id:e.toastId,containerId:e.containerId,fn:a}),h.useEffect(()=>{if(e.pauseOnFocusLoss)return p(),()=>{x()}},[e.pauseOnFocusLoss]);function p(){document.hasFocus()||j(),window.addEventListener("focus",v),window.addEventListener("blur",j)}function x(){window.removeEventListener("focus",v),window.removeEventListener("blur",j)}function y(A){if(e.draggable===!0||e.draggable===A.pointerType){w();let L=i.current;o.canCloseOnClick=!0,o.canDrag=!0,L.style.transition="none",e.draggableDirection==="x"?(o.start=A.clientX,o.removalDistance=L.offsetWidth*(e.draggablePercent/100)):(o.start=A.clientY,o.removalDistance=L.offsetHeight*(e.draggablePercent===80?e.draggablePercent*1.5:e.draggablePercent)/100)}}function N(A){let{top:L,bottom:M,left:F,right:$}=i.current.getBoundingClientRect();A.nativeEvent.type!=="touchend"&&e.pauseOnHover&&A.clientX>=F&&A.clientX<=$&&A.clientY>=L&&A.clientY<=M?j():v()}function v(){a(!0)}function j(){a(!1)}function w(){o.didMove=!1,document.addEventListener("pointermove",_),document.addEventListener("pointerup",E)}function S(){document.removeEventListener("pointermove",_),document.removeEventListener("pointerup",E)}function _(A){let L=i.current;if(o.canDrag&&L){o.didMove=!0,t&&j(),e.draggableDirection==="x"?o.delta=A.clientX-o.start:o.delta=A.clientY-o.start,o.start!==A.clientX&&(o.canCloseOnClick=!1);let M=e.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`;L.style.transform=`translate3d(${M},0)`,L.style.opacity=`${1-Math.abs(o.delta/o.removalDistance)}`}}function E(){S();let A=i.current;if(o.canDrag&&o.didMove&&A){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance){r(!0),e.closeToast(!0),e.collapseAll();return}A.style.transition="transform 0.2s, opacity 0.2s",A.style.removeProperty("transform"),A.style.removeProperty("opacity")}}let T={onPointerDown:y,onPointerUp:N};return l&&c&&(T.onMouseEnter=j,e.stacked||(T.onMouseLeave=v)),f&&(T.onClick=A=>{d&&d(A),o.canCloseOnClick&&u(!0)}),{playToast:v,pauseToast:j,isRunning:t,preventExitTransition:s,toastRef:i,eventHandlers:T}}var Wse=typeof window<"u"?h.useLayoutEffect:h.useEffect,Xw=({theme:e,type:t,isLoading:a,...s})=>xt.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${t})`,...s});function Gse(e){return xt.createElement(Xw,{...e},xt.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function Vse(e){return xt.createElement(Xw,{...e},xt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function Yse(e){return xt.createElement(Xw,{...e},xt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function Qse(e){return xt.createElement(Xw,{...e},xt.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function Kse(){return xt.createElement("div",{className:"Toastify__spinner"})}var VT={info:Vse,warning:Gse,success:Yse,error:Qse,spinner:Kse},Xse=e=>e in VT;function Zse({theme:e,type:t,isLoading:a,icon:s}){let r=null,i={theme:e,type:t};return s===!1||($l(s)?r=s({...i,isLoading:a}):h.isValidElement(s)?r=h.cloneElement(s,i):a?r=VT.spinner():Xse(t)&&(r=VT[t](i))),r}var Jse=e=>{let{isRunning:t,preventExitTransition:a,toastRef:s,eventHandlers:r,playToast:i}=qse(e),{closeButton:o,children:l,autoClose:c,onClick:u,type:d,hideProgressBar:f,closeToast:p,transition:x,position:y,className:N,style:v,progressClassName:j,updateId:w,role:S,progress:_,rtl:E,toastId:T,deleteToast:A,isIn:L,isLoading:M,closeOnClick:F,theme:$,ariaLabel:D}=e,q=Mt("Toastify__toast",`Toastify__toast-theme--${$}`,`Toastify__toast--${d}`,{"Toastify__toast--rtl":E},{"Toastify__toast--close-on-click":F}),G=$l(N)?N({rtl:E,position:y,type:d,defaultClassName:q}):Mt(q,N),U=Zse(e),V=!!_||!c,Z={closeToast:p,type:d,theme:$},Y=null;return o===!1||($l(o)?Y=o(Z):h.isValidElement(o)?Y=h.cloneElement(o,Z):Y=Tse(Z)),xt.createElement(x,{isIn:L,done:A,position:y,preventExitTransition:a,nodeRef:s,playToast:i},xt.createElement("div",{id:T,tabIndex:0,onClick:u,"data-in":L,className:G,...r,style:v,ref:s,...L&&{role:S,"aria-label":D}},U!=null&&xt.createElement("div",{className:Mt("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!M})},U),DH(l,e,!t),Y,!e.customProgressBar&&xt.createElement(kse,{...w&&!V?{key:`p-${w}`}:{},rtl:E,theme:$,delay:c,isRunning:t,isIn:L,closeToast:p,hide:f,type:d,className:j,controlledProgress:V,progress:_||0})))},ere=(e,t=!1)=>({enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}),tre=Ase(ere("bounce",!0)),nre={position:"top-right",transition:tre,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&e.code==="KeyT"};function are(e){let t={...nre,...e},a=e.stacked,[s,r]=h.useState(!0),i=h.useRef(null),{getToastToRender:o,isToastActive:l,count:c}=Hse(t),{className:u,style:d,rtl:f,containerId:p,hotKeys:x}=t;function y(v){let j=Mt("Toastify__toast-container",`Toastify__toast-container--${v}`,{"Toastify__toast-container--rtl":f});return $l(u)?u({position:v,rtl:f,defaultClassName:j}):Mt(j,qT(u))}function N(){a&&(r(!0),W.play())}return Wse(()=>{var v;if(a){let j=i.current.querySelectorAll('[data-in="true"]'),w=12,S=(v=t.position)==null?void 0:v.includes("top"),_=0,E=0;Array.from(j).reverse().forEach((T,A)=>{let L=T;L.classList.add("Toastify__toast--stacked"),A>0&&(L.dataset.collapsed=`${s}`),L.dataset.pos||(L.dataset.pos=S?"top":"bot");let M=_*(s?.2:1)+(s?0:w*A);L.style.setProperty("--y",`${S?M:M*-1}px`),L.style.setProperty("--g",`${w}`),L.style.setProperty("--s",`${1-(s?E:0)}`),_+=L.offsetHeight,E+=.025})}},[s,c,a]),h.useEffect(()=>{function v(j){var w;let S=i.current;x(j)&&((w=S.querySelector('[tabIndex="0"]'))==null||w.focus(),r(!1),W.pause()),j.key==="Escape"&&(document.activeElement===S||S!=null&&S.contains(document.activeElement))&&(r(!0),W.play())}return document.addEventListener("keydown",v),()=>{document.removeEventListener("keydown",v)}},[x]),xt.createElement("section",{ref:i,className:"Toastify",id:p,onMouseEnter:()=>{a&&(r(!1),W.pause())},onMouseLeave:N,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},o((v,j)=>{let w=j.length?{...d}:{...d,pointerEvents:"none"};return xt.createElement("div",{tabIndex:-1,className:y(v),"data-stacked":a,style:w,key:`c-${v}`},j.map(({content:S,props:_})=>xt.createElement(Jse,{..._,stacked:a,collapseAll:N,isIn:l(_.toastId,_.containerId),key:`t-${_.key}`},S)))}))}function zH(e,t){return function(){return e.apply(t,arguments)}}const{toString:sre}=Object.prototype,{getPrototypeOf:pL}=Object,{iterator:Zw,toStringTag:FH}=Symbol,Jw=(e=>t=>{const a=sre.call(t);return e[a]||(e[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),Ji=e=>(e=e.toLowerCase(),t=>Jw(t)===e),eN=e=>t=>typeof t===e,{isArray:Kf}=Array,Sf=eN("undefined");function sx(e){return e!==null&&!Sf(e)&&e.constructor!==null&&!Sf(e.constructor)&&hr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const UH=Ji("ArrayBuffer");function rre(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&UH(e.buffer),t}const ire=eN("string"),hr=eN("function"),BH=eN("number"),rx=e=>e!==null&&typeof e=="object",ore=e=>e===!0||e===!1,Yb=e=>{if(Jw(e)!=="object")return!1;const t=pL(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(FH in e)&&!(Zw in e)},lre=e=>{if(!rx(e)||sx(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},cre=Ji("Date"),dre=Ji("File"),ure=Ji("Blob"),mre=Ji("FileList"),fre=e=>rx(e)&&hr(e.pipe),hre=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||hr(e.append)&&((t=Jw(e))==="formdata"||t==="object"&&hr(e.toString)&&e.toString()==="[object FormData]"))},gre=Ji("URLSearchParams"),[pre,xre,yre,bre]=["ReadableStream","Request","Response","Headers"].map(Ji),vre=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ix(e,t,{allOwnKeys:a=!1}={}){if(e===null||typeof e>"u")return;let s,r;if(typeof e!="object"&&(e=[e]),Kf(e))for(s=0,r=e.length;s<r;s++)t.call(null,e[s],s,e);else{if(sx(e))return;const i=a?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let l;for(s=0;s<o;s++)l=i[s],t.call(null,e[l],l,e)}}function HH(e,t){if(sx(e))return null;t=t.toLowerCase();const a=Object.keys(e);let s=a.length,r;for(;s-- >0;)if(r=a[s],t===r.toLowerCase())return r;return null}const lu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,qH=e=>!Sf(e)&&e!==lu;function YT(){const{caseless:e,skipUndefined:t}=qH(this)&&this||{},a={},s=(r,i)=>{const o=e&&HH(a,i)||i;Yb(a[o])&&Yb(r)?a[o]=YT(a[o],r):Yb(r)?a[o]=YT({},r):Kf(r)?a[o]=r.slice():(!t||!Sf(r))&&(a[o]=r)};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&ix(arguments[r],s);return a}const wre=(e,t,a,{allOwnKeys:s}={})=>(ix(t,(r,i)=>{a&&hr(r)?e[i]=zH(r,a):e[i]=r},{allOwnKeys:s}),e),Nre=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),jre=(e,t,a,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),a&&Object.assign(e.prototype,a)},Cre=(e,t,a,s)=>{let r,i,o;const l={};if(t=t||{},e==null)return t;do{for(r=Object.getOwnPropertyNames(e),i=r.length;i-- >0;)o=r[i],(!s||s(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=a!==!1&&pL(e)}while(e&&(!a||a(e,t))&&e!==Object.prototype);return t},Sre=(e,t,a)=>{e=String(e),(a===void 0||a>e.length)&&(a=e.length),a-=t.length;const s=e.indexOf(t,a);return s!==-1&&s===a},_re=e=>{if(!e)return null;if(Kf(e))return e;let t=e.length;if(!BH(t))return null;const a=new Array(t);for(;t-- >0;)a[t]=e[t];return a},Are=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&pL(Uint8Array)),Tre=(e,t)=>{const s=(e&&e[Zw]).call(e);let r;for(;(r=s.next())&&!r.done;){const i=r.value;t.call(e,i[0],i[1])}},kre=(e,t)=>{let a;const s=[];for(;(a=e.exec(t))!==null;)s.push(a);return s},Ere=Ji("HTMLFormElement"),Lre=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,s,r){return s.toUpperCase()+r}),wI=(({hasOwnProperty:e})=>(t,a)=>e.call(t,a))(Object.prototype),Pre=Ji("RegExp"),WH=(e,t)=>{const a=Object.getOwnPropertyDescriptors(e),s={};ix(a,(r,i)=>{let o;(o=t(r,i,e))!==!1&&(s[i]=o||r)}),Object.defineProperties(e,s)},Dre=e=>{WH(e,(t,a)=>{if(hr(e)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const s=e[a];if(hr(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},Ore=(e,t)=>{const a={},s=r=>{r.forEach(i=>{a[i]=!0})};return Kf(e)?s(e):s(String(e).split(t)),a},Mre=()=>{},Ire=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function $re(e){return!!(e&&hr(e.append)&&e[FH]==="FormData"&&e[Zw])}const Rre=e=>{const t=new Array(10),a=(s,r)=>{if(rx(s)){if(t.indexOf(s)>=0)return;if(sx(s))return s;if(!("toJSON"in s)){t[r]=s;const i=Kf(s)?[]:{};return ix(s,(o,l)=>{const c=a(o,r+1);!Sf(c)&&(i[l]=c)}),t[r]=void 0,i}}return s};return a(e,0)},zre=Ji("AsyncFunction"),Fre=e=>e&&(rx(e)||hr(e))&&hr(e.then)&&hr(e.catch),GH=((e,t)=>e?setImmediate:t?((a,s)=>(lu.addEventListener("message",({source:r,data:i})=>{r===lu&&i===a&&s.length&&s.shift()()},!1),r=>{s.push(r),lu.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",hr(lu.postMessage)),Ure=typeof queueMicrotask<"u"?queueMicrotask.bind(lu):typeof process<"u"&&process.nextTick||GH,Bre=e=>e!=null&&hr(e[Zw]),dt={isArray:Kf,isArrayBuffer:UH,isBuffer:sx,isFormData:hre,isArrayBufferView:rre,isString:ire,isNumber:BH,isBoolean:ore,isObject:rx,isPlainObject:Yb,isEmptyObject:lre,isReadableStream:pre,isRequest:xre,isResponse:yre,isHeaders:bre,isUndefined:Sf,isDate:cre,isFile:dre,isBlob:ure,isRegExp:Pre,isFunction:hr,isStream:fre,isURLSearchParams:gre,isTypedArray:Are,isFileList:mre,forEach:ix,merge:YT,extend:wre,trim:vre,stripBOM:Nre,inherits:jre,toFlatObject:Cre,kindOf:Jw,kindOfTest:Ji,endsWith:Sre,toArray:_re,forEachEntry:Tre,matchAll:kre,isHTMLForm:Ere,hasOwnProperty:wI,hasOwnProp:wI,reduceDescriptors:WH,freezeMethods:Dre,toObjectSet:Ore,toCamelCase:Lre,noop:Mre,toFiniteNumber:Ire,findKey:HH,global:lu,isContextDefined:qH,isSpecCompliantForm:$re,toJSONObject:Rre,isAsyncFn:zre,isThenable:Fre,setImmediate:GH,asap:Ure,isIterable:Bre};function sn(e,t,a,s,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),a&&(this.config=a),s&&(this.request=s),r&&(this.response=r,this.status=r.status?r.status:null)}dt.inherits(sn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:dt.toJSONObject(this.config),code:this.code,status:this.status}}});const VH=sn.prototype,YH={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{YH[e]={value:e}});Object.defineProperties(sn,YH);Object.defineProperty(VH,"isAxiosError",{value:!0});sn.from=(e,t,a,s,r,i)=>{const o=Object.create(VH);dt.toFlatObject(e,o,function(d){return d!==Error.prototype},u=>u!=="isAxiosError");const l=e&&e.message?e.message:"Error",c=t==null&&e?e.code:t;return sn.call(o,l,c,a,s,r),e&&o.cause==null&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",i&&Object.assign(o,i),o};const Hre=null;function QT(e){return dt.isPlainObject(e)||dt.isArray(e)}function QH(e){return dt.endsWith(e,"[]")?e.slice(0,-2):e}function NI(e,t,a){return e?e.concat(t).map(function(r,i){return r=QH(r),!a&&i?"["+r+"]":r}).join(a?".":""):t}function qre(e){return dt.isArray(e)&&!e.some(QT)}const Wre=dt.toFlatObject(dt,{},null,function(t){return/^is[A-Z]/.test(t)});function tN(e,t,a){if(!dt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,a=dt.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(N,v){return!dt.isUndefined(v[N])});const s=a.metaTokens,r=a.visitor||d,i=a.dots,o=a.indexes,c=(a.Blob||typeof Blob<"u"&&Blob)&&dt.isSpecCompliantForm(t);if(!dt.isFunction(r))throw new TypeError("visitor must be a function");function u(y){if(y===null)return"";if(dt.isDate(y))return y.toISOString();if(dt.isBoolean(y))return y.toString();if(!c&&dt.isBlob(y))throw new sn("Blob is not supported. Use a Buffer instead.");return dt.isArrayBuffer(y)||dt.isTypedArray(y)?c&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function d(y,N,v){let j=y;if(y&&!v&&typeof y=="object"){if(dt.endsWith(N,"{}"))N=s?N:N.slice(0,-2),y=JSON.stringify(y);else if(dt.isArray(y)&&qre(y)||(dt.isFileList(y)||dt.endsWith(N,"[]"))&&(j=dt.toArray(y)))return N=QH(N),j.forEach(function(S,_){!(dt.isUndefined(S)||S===null)&&t.append(o===!0?NI([N],_,i):o===null?N:N+"[]",u(S))}),!1}return QT(y)?!0:(t.append(NI(v,N,i),u(y)),!1)}const f=[],p=Object.assign(Wre,{defaultVisitor:d,convertValue:u,isVisitable:QT});function x(y,N){if(!dt.isUndefined(y)){if(f.indexOf(y)!==-1)throw Error("Circular reference detected in "+N.join("."));f.push(y),dt.forEach(y,function(j,w){(!(dt.isUndefined(j)||j===null)&&r.call(t,j,dt.isString(w)?w.trim():w,N,p))===!0&&x(j,N?N.concat(w):[w])}),f.pop()}}if(!dt.isObject(e))throw new TypeError("data must be an object");return x(e),t}function jI(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function xL(e,t){this._pairs=[],e&&tN(e,this,t)}const KH=xL.prototype;KH.append=function(t,a){this._pairs.push([t,a])};KH.toString=function(t){const a=t?function(s){return t.call(this,s,jI)}:jI;return this._pairs.map(function(r){return a(r[0])+"="+a(r[1])},"").join("&")};function Gre(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function XH(e,t,a){if(!t)return e;const s=a&&a.encode||Gre;dt.isFunction(a)&&(a={serialize:a});const r=a&&a.serialize;let i;if(r?i=r(t,a):i=dt.isURLSearchParams(t)?t.toString():new xL(t,a).toString(s),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class CI{constructor(){this.handlers=[]}use(t,a,s){return this.handlers.push({fulfilled:t,rejected:a,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){dt.forEach(this.handlers,function(s){s!==null&&t(s)})}}const ZH={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Vre=typeof URLSearchParams<"u"?URLSearchParams:xL,Yre=typeof FormData<"u"?FormData:null,Qre=typeof Blob<"u"?Blob:null,Kre={isBrowser:!0,classes:{URLSearchParams:Vre,FormData:Yre,Blob:Qre},protocols:["http","https","file","blob","url","data"]},yL=typeof window<"u"&&typeof document<"u",KT=typeof navigator=="object"&&navigator||void 0,Xre=yL&&(!KT||["ReactNative","NativeScript","NS"].indexOf(KT.product)<0),Zre=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Jre=yL&&window.location.href||"http://localhost",eie=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:yL,hasStandardBrowserEnv:Xre,hasStandardBrowserWebWorkerEnv:Zre,navigator:KT,origin:Jre},Symbol.toStringTag,{value:"Module"})),Ms={...eie,...Kre};function tie(e,t){return tN(e,new Ms.classes.URLSearchParams,{visitor:function(a,s,r,i){return Ms.isNode&&dt.isBuffer(a)?(this.append(s,a.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function nie(e){return dt.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function aie(e){const t={},a=Object.keys(e);let s;const r=a.length;let i;for(s=0;s<r;s++)i=a[s],t[i]=e[i];return t}function JH(e){function t(a,s,r,i){let o=a[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=a.length;return o=!o&&dt.isArray(r)?r.length:o,c?(dt.hasOwnProp(r,o)?r[o]=[r[o],s]:r[o]=s,!l):((!r[o]||!dt.isObject(r[o]))&&(r[o]=[]),t(a,s,r[o],i)&&dt.isArray(r[o])&&(r[o]=aie(r[o])),!l)}if(dt.isFormData(e)&&dt.isFunction(e.entries)){const a={};return dt.forEachEntry(e,(s,r)=>{t(nie(s),r,a,0)}),a}return null}function sie(e,t,a){if(dt.isString(e))try{return(t||JSON.parse)(e),dt.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(a||JSON.stringify)(e)}const ox={transitional:ZH,adapter:["xhr","http","fetch"],transformRequest:[function(t,a){const s=a.getContentType()||"",r=s.indexOf("application/json")>-1,i=dt.isObject(t);if(i&&dt.isHTMLForm(t)&&(t=new FormData(t)),dt.isFormData(t))return r?JSON.stringify(JH(t)):t;if(dt.isArrayBuffer(t)||dt.isBuffer(t)||dt.isStream(t)||dt.isFile(t)||dt.isBlob(t)||dt.isReadableStream(t))return t;if(dt.isArrayBufferView(t))return t.buffer;if(dt.isURLSearchParams(t))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return tie(t,this.formSerializer).toString();if((l=dt.isFileList(t))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return tN(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||r?(a.setContentType("application/json",!1),sie(t)):t}],transformResponse:[function(t){const a=this.transitional||ox.transitional,s=a&&a.forcedJSONParsing,r=this.responseType==="json";if(dt.isResponse(t)||dt.isReadableStream(t))return t;if(t&&dt.isString(t)&&(s&&!this.responseType||r)){const o=!(a&&a.silentJSONParsing)&&r;try{return JSON.parse(t,this.parseReviver)}catch(l){if(o)throw l.name==="SyntaxError"?sn.from(l,sn.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ms.classes.FormData,Blob:Ms.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};dt.forEach(["delete","get","head","post","put","patch"],e=>{ox.headers[e]={}});const rie=dt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),iie=e=>{const t={};let a,s,r;return e&&e.split(`
`).forEach(function(o){r=o.indexOf(":"),a=o.substring(0,r).trim().toLowerCase(),s=o.substring(r+1).trim(),!(!a||t[a]&&rie[a])&&(a==="set-cookie"?t[a]?t[a].push(s):t[a]=[s]:t[a]=t[a]?t[a]+", "+s:s)}),t},SI=Symbol("internals");function dg(e){return e&&String(e).trim().toLowerCase()}function Qb(e){return e===!1||e==null?e:dt.isArray(e)?e.map(Qb):String(e)}function oie(e){const t=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=a.exec(e);)t[s[1]]=s[2];return t}const lie=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function BS(e,t,a,s,r){if(dt.isFunction(s))return s.call(this,t,a);if(r&&(t=a),!!dt.isString(t)){if(dt.isString(s))return t.indexOf(s)!==-1;if(dt.isRegExp(s))return s.test(t)}}function cie(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,a,s)=>a.toUpperCase()+s)}function die(e,t){const a=dt.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+a,{value:function(r,i,o){return this[s].call(this,t,r,i,o)},configurable:!0})})}let gr=class{constructor(t){t&&this.set(t)}set(t,a,s){const r=this;function i(l,c,u){const d=dg(c);if(!d)throw new Error("header name must be a non-empty string");const f=dt.findKey(r,d);(!f||r[f]===void 0||u===!0||u===void 0&&r[f]!==!1)&&(r[f||c]=Qb(l))}const o=(l,c)=>dt.forEach(l,(u,d)=>i(u,d,c));if(dt.isPlainObject(t)||t instanceof this.constructor)o(t,a);else if(dt.isString(t)&&(t=t.trim())&&!lie(t))o(iie(t),a);else if(dt.isObject(t)&&dt.isIterable(t)){let l={},c,u;for(const d of t){if(!dt.isArray(d))throw TypeError("Object iterator must return a key-value pair");l[u=d[0]]=(c=l[u])?dt.isArray(c)?[...c,d[1]]:[c,d[1]]:d[1]}o(l,a)}else t!=null&&i(a,t,s);return this}get(t,a){if(t=dg(t),t){const s=dt.findKey(this,t);if(s){const r=this[s];if(!a)return r;if(a===!0)return oie(r);if(dt.isFunction(a))return a.call(this,r,s);if(dt.isRegExp(a))return a.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,a){if(t=dg(t),t){const s=dt.findKey(this,t);return!!(s&&this[s]!==void 0&&(!a||BS(this,this[s],s,a)))}return!1}delete(t,a){const s=this;let r=!1;function i(o){if(o=dg(o),o){const l=dt.findKey(s,o);l&&(!a||BS(s,s[l],l,a))&&(delete s[l],r=!0)}}return dt.isArray(t)?t.forEach(i):i(t),r}clear(t){const a=Object.keys(this);let s=a.length,r=!1;for(;s--;){const i=a[s];(!t||BS(this,this[i],i,t,!0))&&(delete this[i],r=!0)}return r}normalize(t){const a=this,s={};return dt.forEach(this,(r,i)=>{const o=dt.findKey(s,i);if(o){a[o]=Qb(r),delete a[i];return}const l=t?cie(i):String(i).trim();l!==i&&delete a[i],a[l]=Qb(r),s[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const a=Object.create(null);return dt.forEach(this,(s,r)=>{s!=null&&s!==!1&&(a[r]=t&&dt.isArray(s)?s.join(", "):s)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,a])=>t+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...a){const s=new this(t);return a.forEach(r=>s.set(r)),s}static accessor(t){const s=(this[SI]=this[SI]={accessors:{}}).accessors,r=this.prototype;function i(o){const l=dg(o);s[l]||(die(r,o),s[l]=!0)}return dt.isArray(t)?t.forEach(i):i(t),this}};gr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);dt.reduceDescriptors(gr.prototype,({value:e},t)=>{let a=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[a]=s}}});dt.freezeMethods(gr);function HS(e,t){const a=this||ox,s=t||a,r=gr.from(s.headers);let i=s.data;return dt.forEach(e,function(l){i=l.call(a,i,r.normalize(),t?t.status:void 0)}),r.normalize(),i}function e9(e){return!!(e&&e.__CANCEL__)}function Xf(e,t,a){sn.call(this,e??"canceled",sn.ERR_CANCELED,t,a),this.name="CanceledError"}dt.inherits(Xf,sn,{__CANCEL__:!0});function t9(e,t,a){const s=a.config.validateStatus;!a.status||!s||s(a.status)?e(a):t(new sn("Request failed with status code "+a.status,[sn.ERR_BAD_REQUEST,sn.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function uie(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function mie(e,t){e=e||10;const a=new Array(e),s=new Array(e);let r=0,i=0,o;return t=t!==void 0?t:1e3,function(c){const u=Date.now(),d=s[i];o||(o=u),a[r]=c,s[r]=u;let f=i,p=0;for(;f!==r;)p+=a[f++],f=f%e;if(r=(r+1)%e,r===i&&(i=(i+1)%e),u-o<t)return;const x=d&&u-d;return x?Math.round(p*1e3/x):void 0}}function fie(e,t){let a=0,s=1e3/t,r,i;const o=(u,d=Date.now())=>{a=d,r=null,i&&(clearTimeout(i),i=null),e(...u)};return[(...u)=>{const d=Date.now(),f=d-a;f>=s?o(u,d):(r=u,i||(i=setTimeout(()=>{i=null,o(r)},s-f)))},()=>r&&o(r)]}const gv=(e,t,a=3)=>{let s=0;const r=mie(50,250);return fie(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-s,u=r(c),d=o<=l;s=o;const f={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:u||void 0,estimated:u&&l&&d?(l-o)/u:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(f)},a)},_I=(e,t)=>{const a=e!=null;return[s=>t[0]({lengthComputable:a,total:e,loaded:s}),t[1]]},AI=e=>(...t)=>dt.asap(()=>e(...t)),hie=Ms.hasStandardBrowserEnv?((e,t)=>a=>(a=new URL(a,Ms.origin),e.protocol===a.protocol&&e.host===a.host&&(t||e.port===a.port)))(new URL(Ms.origin),Ms.navigator&&/(msie|trident)/i.test(Ms.navigator.userAgent)):()=>!0,gie=Ms.hasStandardBrowserEnv?{write(e,t,a,s,r,i){const o=[e+"="+encodeURIComponent(t)];dt.isNumber(a)&&o.push("expires="+new Date(a).toGMTString()),dt.isString(s)&&o.push("path="+s),dt.isString(r)&&o.push("domain="+r),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function pie(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function xie(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function n9(e,t,a){let s=!pie(t);return e&&(s||a==!1)?xie(e,t):t}const TI=e=>e instanceof gr?{...e}:e;function Tu(e,t){t=t||{};const a={};function s(u,d,f,p){return dt.isPlainObject(u)&&dt.isPlainObject(d)?dt.merge.call({caseless:p},u,d):dt.isPlainObject(d)?dt.merge({},d):dt.isArray(d)?d.slice():d}function r(u,d,f,p){if(dt.isUndefined(d)){if(!dt.isUndefined(u))return s(void 0,u,f,p)}else return s(u,d,f,p)}function i(u,d){if(!dt.isUndefined(d))return s(void 0,d)}function o(u,d){if(dt.isUndefined(d)){if(!dt.isUndefined(u))return s(void 0,u)}else return s(void 0,d)}function l(u,d,f){if(f in t)return s(u,d);if(f in e)return s(void 0,u)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(u,d,f)=>r(TI(u),TI(d),f,!0)};return dt.forEach(Object.keys({...e,...t}),function(d){const f=c[d]||r,p=f(e[d],t[d],d);dt.isUndefined(p)&&f!==l||(a[d]=p)}),a}const a9=e=>{const t=Tu({},e);let{data:a,withXSRFToken:s,xsrfHeaderName:r,xsrfCookieName:i,headers:o,auth:l}=t;if(t.headers=o=gr.from(o),t.url=XH(n9(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),dt.isFormData(a)){if(Ms.hasStandardBrowserEnv||Ms.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(dt.isFunction(a.getHeaders)){const c=a.getHeaders(),u=["content-type","content-length"];Object.entries(c).forEach(([d,f])=>{u.includes(d.toLowerCase())&&o.set(d,f)})}}if(Ms.hasStandardBrowserEnv&&(s&&dt.isFunction(s)&&(s=s(t)),s||s!==!1&&hie(t.url))){const c=r&&i&&gie.read(i);c&&o.set(r,c)}return t},yie=typeof XMLHttpRequest<"u",bie=yie&&function(e){return new Promise(function(a,s){const r=a9(e);let i=r.data;const o=gr.from(r.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:u}=r,d,f,p,x,y;function N(){x&&x(),y&&y(),r.cancelToken&&r.cancelToken.unsubscribe(d),r.signal&&r.signal.removeEventListener("abort",d)}let v=new XMLHttpRequest;v.open(r.method.toUpperCase(),r.url,!0),v.timeout=r.timeout;function j(){if(!v)return;const S=gr.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),E={data:!l||l==="text"||l==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:S,config:e,request:v};t9(function(A){a(A),N()},function(A){s(A),N()},E),v=null}"onloadend"in v?v.onloadend=j:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(j)},v.onabort=function(){v&&(s(new sn("Request aborted",sn.ECONNABORTED,e,v)),v=null)},v.onerror=function(_){const E=_&&_.message?_.message:"Network Error",T=new sn(E,sn.ERR_NETWORK,e,v);T.event=_||null,s(T),v=null},v.ontimeout=function(){let _=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const E=r.transitional||ZH;r.timeoutErrorMessage&&(_=r.timeoutErrorMessage),s(new sn(_,E.clarifyTimeoutError?sn.ETIMEDOUT:sn.ECONNABORTED,e,v)),v=null},i===void 0&&o.setContentType(null),"setRequestHeader"in v&&dt.forEach(o.toJSON(),function(_,E){v.setRequestHeader(E,_)}),dt.isUndefined(r.withCredentials)||(v.withCredentials=!!r.withCredentials),l&&l!=="json"&&(v.responseType=r.responseType),u&&([p,y]=gv(u,!0),v.addEventListener("progress",p)),c&&v.upload&&([f,x]=gv(c),v.upload.addEventListener("progress",f),v.upload.addEventListener("loadend",x)),(r.cancelToken||r.signal)&&(d=S=>{v&&(s(!S||S.type?new Xf(null,e,v):S),v.abort(),v=null)},r.cancelToken&&r.cancelToken.subscribe(d),r.signal&&(r.signal.aborted?d():r.signal.addEventListener("abort",d)));const w=uie(r.url);if(w&&Ms.protocols.indexOf(w)===-1){s(new sn("Unsupported protocol "+w+":",sn.ERR_BAD_REQUEST,e));return}v.send(i||null)})},vie=(e,t)=>{const{length:a}=e=e?e.filter(Boolean):[];if(t||a){let s=new AbortController,r;const i=function(u){if(!r){r=!0,l();const d=u instanceof Error?u:this.reason;s.abort(d instanceof sn?d:new Xf(d instanceof Error?d.message:d))}};let o=t&&setTimeout(()=>{o=null,i(new sn(`timeout ${t} of ms exceeded`,sn.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),e=null)};e.forEach(u=>u.addEventListener("abort",i));const{signal:c}=s;return c.unsubscribe=()=>dt.asap(l),c}},wie=function*(e,t){let a=e.byteLength;if(a<t){yield e;return}let s=0,r;for(;s<a;)r=s+t,yield e.slice(s,r),s=r},Nie=async function*(e,t){for await(const a of jie(e))yield*wie(a,t)},jie=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:a,value:s}=await t.read();if(a)break;yield s}}finally{await t.cancel()}},kI=(e,t,a,s)=>{const r=Nie(e,t);let i=0,o,l=c=>{o||(o=!0,s&&s(c))};return new ReadableStream({async pull(c){try{const{done:u,value:d}=await r.next();if(u){l(),c.close();return}let f=d.byteLength;if(a){let p=i+=f;a(p)}c.enqueue(new Uint8Array(d))}catch(u){throw l(u),u}},cancel(c){return l(c),r.return()}},{highWaterMark:2})},EI=64*1024,{isFunction:My}=dt,Cie=(({Request:e,Response:t})=>({Request:e,Response:t}))(dt.global),{ReadableStream:LI,TextEncoder:PI}=dt.global,DI=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Sie=e=>{e=dt.merge.call({skipUndefined:!0},Cie,e);const{fetch:t,Request:a,Response:s}=e,r=t?My(t):typeof fetch=="function",i=My(a),o=My(s);if(!r)return!1;const l=r&&My(LI),c=r&&(typeof PI=="function"?(y=>N=>y.encode(N))(new PI):async y=>new Uint8Array(await new a(y).arrayBuffer())),u=i&&l&&DI(()=>{let y=!1;const N=new a(Ms.origin,{body:new LI,method:"POST",get duplex(){return y=!0,"half"}}).headers.has("Content-Type");return y&&!N}),d=o&&l&&DI(()=>dt.isReadableStream(new s("").body)),f={stream:d&&(y=>y.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(y=>{!f[y]&&(f[y]=(N,v)=>{let j=N&&N[y];if(j)return j.call(N);throw new sn(`Response type '${y}' is not supported`,sn.ERR_NOT_SUPPORT,v)})});const p=async y=>{if(y==null)return 0;if(dt.isBlob(y))return y.size;if(dt.isSpecCompliantForm(y))return(await new a(Ms.origin,{method:"POST",body:y}).arrayBuffer()).byteLength;if(dt.isArrayBufferView(y)||dt.isArrayBuffer(y))return y.byteLength;if(dt.isURLSearchParams(y)&&(y=y+""),dt.isString(y))return(await c(y)).byteLength},x=async(y,N)=>{const v=dt.toFiniteNumber(y.getContentLength());return v??p(N)};return async y=>{let{url:N,method:v,data:j,signal:w,cancelToken:S,timeout:_,onDownloadProgress:E,onUploadProgress:T,responseType:A,headers:L,withCredentials:M="same-origin",fetchOptions:F}=a9(y),$=t||fetch;A=A?(A+"").toLowerCase():"text";let D=vie([w,S&&S.toAbortSignal()],_),q=null;const G=D&&D.unsubscribe&&(()=>{D.unsubscribe()});let U;try{if(T&&u&&v!=="get"&&v!=="head"&&(U=await x(L,j))!==0){let te=new a(N,{method:"POST",body:j,duplex:"half"}),ae;if(dt.isFormData(j)&&(ae=te.headers.get("content-type"))&&L.setContentType(ae),te.body){const[ye,Ne]=_I(U,gv(AI(T)));j=kI(te.body,EI,ye,Ne)}}dt.isString(M)||(M=M?"include":"omit");const V=i&&"credentials"in a.prototype,Z={...F,signal:D,method:v.toUpperCase(),headers:L.normalize().toJSON(),body:j,duplex:"half",credentials:V?M:void 0};q=i&&new a(N,Z);let Y=await(i?$(q,F):$(N,Z));const le=d&&(A==="stream"||A==="response");if(d&&(E||le&&G)){const te={};["status","statusText","headers"].forEach(he=>{te[he]=Y[he]});const ae=dt.toFiniteNumber(Y.headers.get("content-length")),[ye,Ne]=E&&_I(ae,gv(AI(E),!0))||[];Y=new s(kI(Y.body,EI,ye,()=>{Ne&&Ne(),G&&G()}),te)}A=A||"text";let _e=await f[dt.findKey(f,A)||"text"](Y,y);return!le&&G&&G(),await new Promise((te,ae)=>{t9(te,ae,{data:_e,headers:gr.from(Y.headers),status:Y.status,statusText:Y.statusText,config:y,request:q})})}catch(V){throw G&&G(),V&&V.name==="TypeError"&&/Load failed|fetch/i.test(V.message)?Object.assign(new sn("Network Error",sn.ERR_NETWORK,y,q),{cause:V.cause||V}):sn.from(V,V&&V.code,y,q)}}},_ie=new Map,s9=e=>{let t=e?e.env:{};const{fetch:a,Request:s,Response:r}=t,i=[s,r,a];let o=i.length,l=o,c,u,d=_ie;for(;l--;)c=i[l],u=d.get(c),u===void 0&&d.set(c,u=l?new Map:Sie(t)),d=u;return u};s9();const XT={http:Hre,xhr:bie,fetch:{get:s9}};dt.forEach(XT,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const OI=e=>`- ${e}`,Aie=e=>dt.isFunction(e)||e===null||e===!1,r9={getAdapter:(e,t)=>{e=dt.isArray(e)?e:[e];const{length:a}=e;let s,r;const i={};for(let o=0;o<a;o++){s=e[o];let l;if(r=s,!Aie(s)&&(r=XT[(l=String(s)).toLowerCase()],r===void 0))throw new sn(`Unknown adapter '${l}'`);if(r&&(dt.isFunction(r)||(r=r.get(t))))break;i[l||"#"+o]=r}if(!r){const o=Object.entries(i).map(([c,u])=>`adapter ${c} `+(u===!1?"is not supported by the environment":"is not available in the build"));let l=a?o.length>1?`since :
`+o.map(OI).join(`
`):" "+OI(o[0]):"as no adapter specified";throw new sn("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return r},adapters:XT};function qS(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Xf(null,e)}function MI(e){return qS(e),e.headers=gr.from(e.headers),e.data=HS.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),r9.getAdapter(e.adapter||ox.adapter,e)(e).then(function(s){return qS(e),s.data=HS.call(e,e.transformResponse,s),s.headers=gr.from(s.headers),s},function(s){return e9(s)||(qS(e),s&&s.response&&(s.response.data=HS.call(e,e.transformResponse,s.response),s.response.headers=gr.from(s.response.headers))),Promise.reject(s)})}const i9="1.12.2",nN={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{nN[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const II={};nN.transitional=function(t,a,s){function r(i,o){return"[Axios v"+i9+"] Transitional option '"+i+"'"+o+(s?". "+s:"")}return(i,o,l)=>{if(t===!1)throw new sn(r(o," has been removed"+(a?" in "+a:"")),sn.ERR_DEPRECATED);return a&&!II[o]&&(II[o]=!0,console.warn(r(o," has been deprecated since v"+a+" and will be removed in the near future"))),t?t(i,o,l):!0}};nN.spelling=function(t){return(a,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function Tie(e,t,a){if(typeof e!="object")throw new sn("options must be an object",sn.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let r=s.length;for(;r-- >0;){const i=s[r],o=t[i];if(o){const l=e[i],c=l===void 0||o(l,i,e);if(c!==!0)throw new sn("option "+i+" must be "+c,sn.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new sn("Unknown option "+i,sn.ERR_BAD_OPTION)}}const Kb={assertOptions:Tie,validators:nN},ro=Kb.validators;let xu=class{constructor(t){this.defaults=t||{},this.interceptors={request:new CI,response:new CI}}async request(t,a){try{return await this._request(t,a)}catch(s){if(s instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const i=r.stack?r.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(t,a){typeof t=="string"?(a=a||{},a.url=t):a=t||{},a=Tu(this.defaults,a);const{transitional:s,paramsSerializer:r,headers:i}=a;s!==void 0&&Kb.assertOptions(s,{silentJSONParsing:ro.transitional(ro.boolean),forcedJSONParsing:ro.transitional(ro.boolean),clarifyTimeoutError:ro.transitional(ro.boolean)},!1),r!=null&&(dt.isFunction(r)?a.paramsSerializer={serialize:r}:Kb.assertOptions(r,{encode:ro.function,serialize:ro.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),Kb.assertOptions(a,{baseUrl:ro.spelling("baseURL"),withXsrfToken:ro.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let o=i&&dt.merge(i.common,i[a.method]);i&&dt.forEach(["delete","get","head","post","put","patch","common"],y=>{delete i[y]}),a.headers=gr.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(N){typeof N.runWhen=="function"&&N.runWhen(a)===!1||(c=c&&N.synchronous,l.unshift(N.fulfilled,N.rejected))});const u=[];this.interceptors.response.forEach(function(N){u.push(N.fulfilled,N.rejected)});let d,f=0,p;if(!c){const y=[MI.bind(this),void 0];for(y.unshift(...l),y.push(...u),p=y.length,d=Promise.resolve(a);f<p;)d=d.then(y[f++],y[f++]);return d}p=l.length;let x=a;for(;f<p;){const y=l[f++],N=l[f++];try{x=y(x)}catch(v){N.call(this,v);break}}try{d=MI.call(this,x)}catch(y){return Promise.reject(y)}for(f=0,p=u.length;f<p;)d=d.then(u[f++],u[f++]);return d}getUri(t){t=Tu(this.defaults,t);const a=n9(t.baseURL,t.url,t.allowAbsoluteUrls);return XH(a,t.params,t.paramsSerializer)}};dt.forEach(["delete","get","head","options"],function(t){xu.prototype[t]=function(a,s){return this.request(Tu(s||{},{method:t,url:a,data:(s||{}).data}))}});dt.forEach(["post","put","patch"],function(t){function a(s){return function(i,o,l){return this.request(Tu(l||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}xu.prototype[t]=a(),xu.prototype[t+"Form"]=a(!0)});let kie=class o9{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(i){a=i});const s=this;this.promise.then(r=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](r);s._listeners=null}),this.promise.then=r=>{let i;const o=new Promise(l=>{s.subscribe(l),i=l}).then(r);return o.cancel=function(){s.unsubscribe(i)},o},t(function(i,o,l){s.reason||(s.reason=new Xf(i,o,l),a(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const a=this._listeners.indexOf(t);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const t=new AbortController,a=s=>{t.abort(s)};return this.subscribe(a),t.signal.unsubscribe=()=>this.unsubscribe(a),t.signal}static source(){let t;return{token:new o9(function(r){t=r}),cancel:t}}};function Eie(e){return function(a){return e.apply(null,a)}}function Lie(e){return dt.isObject(e)&&e.isAxiosError===!0}const ZT={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ZT).forEach(([e,t])=>{ZT[t]=e});function l9(e){const t=new xu(e),a=zH(xu.prototype.request,t);return dt.extend(a,xu.prototype,t,{allOwnKeys:!0}),dt.extend(a,t,null,{allOwnKeys:!0}),a.create=function(r){return l9(Tu(e,r))},a}const Ma=l9(ox);Ma.Axios=xu;Ma.CanceledError=Xf;Ma.CancelToken=kie;Ma.isCancel=e9;Ma.VERSION=i9;Ma.toFormData=tN;Ma.AxiosError=sn;Ma.Cancel=Ma.CanceledError;Ma.all=function(t){return Promise.all(t)};Ma.spread=Eie;Ma.isAxiosError=Lie;Ma.mergeConfig=Tu;Ma.AxiosHeaders=gr;Ma.formToJSON=e=>JH(dt.isHTMLForm(e)?new FormData(e):e);Ma.getAdapter=r9.getAdapter;Ma.HttpStatusCode=ZT;Ma.default=Ma;const{Axios:NVe,AxiosError:jVe,CanceledError:CVe,isCancel:SVe,CancelToken:_Ve,VERSION:AVe,all:TVe,Cancel:kVe,isAxiosError:EVe,spread:LVe,toFormData:PVe,AxiosHeaders:DVe,HttpStatusCode:OVe,formToJSON:MVe,getAdapter:IVe,mergeConfig:$Ve}=Ma,Pie="https://crm.sari-sari.com",se=Ma.create({baseURL:`${Pie}/api`,withCredentials:!0,headers:{"Content-Type":"application/json"}});se.interceptors.request.use(e=>(console.log(` [${e.method?.toUpperCase()}] ${e.url}`),e),e=>Promise.reject(e));se.interceptors.response.use(e=>e,e=>(e.response?.status===401&&(console.warn(" Unauthorized  possible expired token or not logged in."),localStorage.clear(),window.location.href="/login"),Promise.reject(e)));const Die="isLoggedIn",Iy="userRole",Ks=()=>{const[e,t]=h.useState(!!localStorage.getItem(Iy)),[a,s]=h.useState(localStorage.getItem(Iy)||""),r=jt();h.useEffect(()=>{const u=localStorage.getItem(Iy);u?(t(!0),s(u)):o()},[]);const i=u=>{localStorage.setItem(Iy,u.role),localStorage.setItem(Die,!0),t(!0),s(u.role)},o=()=>{localStorage.clear(),t(!1),s("")};return{isLoggedIn:e,logout:async()=>{try{await se.post("/auth/logout")}catch(u){console.log("Failed to logout from server:",u)}o(),r("/")},userRole:a,setUserRole:s,login:u=>{i(u),u.role==="CEO"||u.role==="Admin"?r("/admin"):u.role==="Manager"?r("/manager/dashboard"):r("/")}}},fl=({children:e,requiredRole:t})=>{const{isLoggedIn:a,userRole:s}=Ks();if(!a)return n.jsx(ci,{to:"/",replace:!0});if(!t)return s.toUpperCase()==="ADMIN"||s.toUpperCase()==="CEO"?n.jsx(ci,{to:"/admin/dashboard",replace:!0}):s==="GROUP MANAGER"?n.jsx(ci,{to:"/group-manager/dashboard",replace:!0}):s==="MANAGER"?n.jsx(ci,{to:"/manager/dashboard",replace:!0}):s==="SALES"?n.jsx(ci,{to:"/sales/dashboard",replace:!0}):n.jsx(ci,{to:"/",replace:!0});const r=s.toLowerCase(),i=t.toLowerCase();return r!==i?n.jsx(ci,{to:"/",replace:!0}):e};var c9={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},$I=xt.createContext&&xt.createContext(c9),Oie=["attr","size","title"];function Mie(e,t){if(e==null)return{};var a=Iie(e,t),s,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)s=i[r],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function Iie(e,t){if(e==null)return{};var a={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;a[s]=e[s]}return a}function pv(){return pv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},pv.apply(this,arguments)}function RI(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function xv(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?RI(Object(a),!0).forEach(function(s){$ie(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):RI(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function $ie(e,t,a){return t=Rie(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Rie(e){var t=zie(e,"string");return typeof t=="symbol"?t:t+""}function zie(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function d9(e){return e&&e.map((t,a)=>xt.createElement(t.tag,xv({key:a},t.attr),d9(t.child)))}function At(e){return t=>xt.createElement(Fie,pv({attr:xv({},e.attr)},t),d9(e.child))}function Fie(e){var t=a=>{var{attr:s,size:r,title:i}=e,o=Mie(e,Oie),l=r||a.size||"1em",c;return a.className&&(c=a.className),e.className&&(c=(c?c+" ":"")+e.className),xt.createElement("svg",pv({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,s,o,{className:c,style:xv(xv({color:e.color||a.color},a.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&xt.createElement("title",null,i),e.children)};return $I!==void 0?xt.createElement($I.Consumer,null,a=>t(a)):t(c9)}function Gi(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(e)}function Yu(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(e)}function Zt(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"21 8 21 21 3 21 3 8"},child:[]},{tag:"rect",attr:{x:"1",y:"3",width:"22",height:"5"},child:[]},{tag:"line",attr:{x1:"10",y1:"12",x2:"14",y2:"12"},child:[]}]})(e)}function aN(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"7",y1:"7",x2:"17",y2:"17"},child:[]},{tag:"polyline",attr:{points:"17 7 17 17 7 17"},child:[]}]})(e)}function JT(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"polyline",attr:{points:"19 12 12 19 5 12"},child:[]}]})(e)}function Uie(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(e)}function sN(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 5 19 12 12 19"},child:[]}]})(e)}function lx(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"7",y1:"17",x2:"17",y2:"7"},child:[]},{tag:"polyline",attr:{points:"7 7 17 7 17 17"},child:[]}]})(e)}function Bie(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"19",x2:"12",y2:"5"},child:[]},{tag:"polyline",attr:{points:"5 12 12 5 19 12"},child:[]}]})(e)}function WS(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"8",r:"7"},child:[]},{tag:"polyline",attr:{points:"8.21 13.89 7 23 12 20 17 23 15.79 13.88"},child:[]}]})(e)}function Hie(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(e)}function cx(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"},child:[]},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"},child:[]}]})(e)}function qie(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"},child:[]},{tag:"path",attr:{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"},child:[]}]})(e)}function rN(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"},child:[]}]})(e)}function tn(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"},child:[]}]})(e)}function Pt(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(e)}function u9(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"13",r:"4"},child:[]}]})(e)}function aa(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(e)}function Qt(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 11 12 14 22 4"},child:[]},{tag:"path",attr:{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"},child:[]}]})(e)}function bL(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(e)}function Lt(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(e)}function Wie(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"},child:[]}]})(e)}function It(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"},child:[]}]})(e)}function Gie(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"},child:[]}]})(e)}function ks(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"},child:[]},{tag:"rect",attr:{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"},child:[]}]})(e)}function Vs(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(e)}function m9(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(e)}function qo(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"7 10 12 15 17 10"},child:[]},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"},child:[]}]})(e)}function ha(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(e)}function ga(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(e)}function ku(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},child:[]},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"},child:[]}]})(e)}function Eu(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(e)}function fn(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(e)}function Vie(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(e)}function $y(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 18v-6a9 9 0 0 1 18 0v6"},child:[]},{tag:"path",attr:{d:"M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z"},child:[]}]})(e)}function Yie(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"path",attr:{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"},child:[]},{tag:"line",attr:{x1:"12",y1:"17",x2:"12.01",y2:"17"},child:[]}]})(e)}function dx(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(e)}function zI(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"8.5",r:"1.5"},child:[]},{tag:"polyline",attr:{points:"21 15 16 10 5 21"},child:[]}]})(e)}function f9(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"},child:[]}]})(e)}function vL(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"3",y1:"9",x2:"21",y2:"9"},child:[]},{tag:"line",attr:{x1:"9",y1:"21",x2:"9",y2:"9"},child:[]}]})(e)}function Ao(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(e)}function sa(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(e)}function Qie(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(e)}function Zf(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(e)}function FI(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"},child:[]}]})(e)}function Kie(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"5 9 2 12 5 15"},child:[]},{tag:"polyline",attr:{points:"9 5 12 2 15 5"},child:[]},{tag:"polyline",attr:{points:"15 19 12 22 9 19"},child:[]},{tag:"polyline",attr:{points:"19 9 22 12 19 15"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"2",x2:"12",y2:"22"},child:[]}]})(e)}function Xie(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"5",x2:"5",y2:"19"},child:[]},{tag:"circle",attr:{cx:"6.5",cy:"6.5",r:"2.5"},child:[]},{tag:"circle",attr:{cx:"17.5",cy:"17.5",r:"2.5"},child:[]}]})(e)}function zs(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M15.05 5A5 5 0 0 1 19 8.95M15.05 1A9 9 0 0 1 23 8.94m-1 7.98v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(e)}function Ot(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(e)}function UI(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21.21 15.89A10 10 0 1 1 8 2.83"},child:[]},{tag:"path",attr:{d:"M22 12A10 10 0 0 0 12 2v10z"},child:[]}]})(e)}function xn(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(e)}function wL(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},child:[]},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"},child:[]},{tag:"polyline",attr:{points:"7 3 7 8 15 8"},child:[]}]})(e)}function Vt(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(e)}function ek(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"2",x2:"11",y2:"13"},child:[]},{tag:"polygon",attr:{points:"22 2 15 22 11 13 2 9 22 2"},child:[]}]})(e)}function NL(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(e)}function iN(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"},child:[]}]})(e)}function cd(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"5",y:"2",width:"14",height:"20",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"12",y1:"18",x2:"12.01",y2:"18"},child:[]}]})(e)}function Xl(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"},child:[]}]})(e)}function mr(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"6"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"2"},child:[]}]})(e)}function vn(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(e)}function GS(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 18 13.5 8.5 8.5 13.5 1 6"},child:[]},{tag:"polyline",attr:{points:"17 18 23 18 23 12"},child:[]}]})(e)}function id(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(e)}function Zie(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"17 8 12 3 7 8"},child:[]},{tag:"line",attr:{x1:"12",y1:"3",x2:"12",y2:"15"},child:[]}]})(e)}function Io(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"polyline",attr:{points:"17 11 19 13 23 9"},child:[]}]})(e)}function Kn(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"20",y1:"8",x2:"20",y2:"14"},child:[]},{tag:"line",attr:{x1:"23",y1:"11",x2:"17",y2:"11"},child:[]}]})(e)}function $o(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"18",y1:"8",x2:"23",y2:"13"},child:[]},{tag:"line",attr:{x1:"23",y1:"8",x2:"18",y2:"13"},child:[]}]})(e)}function nn(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(e)}function ra(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(e)}function Fs(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"15",y1:"9",x2:"9",y2:"15"},child:[]},{tag:"line",attr:{x1:"9",y1:"9",x2:"15",y2:"15"},child:[]}]})(e)}function Xt(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(e)}const h9=()=>{const[e,t]=h.useState(!1),a=h.useRef(null);return h.useEffect(()=>{const s=r=>{a.current&&!a.current.contains(r.target)&&t(!1)};return document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[]),h.useEffect(()=>{const s=()=>{e&&t(!1)};return window.addEventListener("scroll",s),()=>{window.removeEventListener("scroll",s)}},[e]),n.jsx("header",{className:"sticky top-0 z-50 bg-tertiary shadow-xl border-b border-tertiary",children:n.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex items-center justify-between h-16",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsxs("span",{className:"text-2xl font-black text-white",children:["Sari-Sari ",n.jsx("span",{className:"text-accent",children:" CRM"})]})}),n.jsxs("nav",{className:"hidden md:flex space-x-8 text-white font-medium",children:[n.jsx("a",{href:"#platform",className:"hover:text-accent transition duration-150",children:"Platform"}),n.jsx("a",{href:"#pricing",className:"hover:text-accent transition duration-150",children:"Pricing"})]}),n.jsxs("div",{className:"hidden sm:flex items-center space-x-4",children:[n.jsx("a",{href:"/login",className:"text-sm font-medium text-white hover:text-accent transition duration-500",children:"Log In"}),n.jsx("a",{href:"/signup",className:"inline-flex items-center justify-center px-4 py-2 text-sm font-semibold rounded-full shadow-lg border border-secondary text-white bg-secondary hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-500",children:"Start for Free"})]}),n.jsxs("div",{className:"flex sm:hidden items-center relative",ref:a,children:[n.jsx("button",{onClick:()=>t(!e),children:e?n.jsx(Xt,{className:"w-6 h-6 text-white"}):n.jsx(Zf,{className:"w-6 h-6 text-white"})}),e&&n.jsx("div",{className:"absolute top-11 right-0 mt-2 w-48 border border-tertiary rounded-lg shadow-lg z-50 bg-primary",children:n.jsxs("nav",{className:"flex flex-col",children:[n.jsx("a",{href:"/login",className:"block px-4 py-2 text-center text-tertiary bg-white hover:bg-accent hover:text-secondary transition rounded-t-lg",children:"Log In"}),n.jsx("a",{href:"/signup",className:"block px-4 py-2 text-center text-tertiary bg-white hover:bg-secondary hover:text-white transition rounded-b-lg",children:"Start for Free"})]})})]})]})})})};function Jie(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m12 14 4-4"},child:[]},{tag:"path",attr:{d:"M3.34 19a10 10 0 1 1 17.32 0"},child:[]}]})(e)}function Zl(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(e)}function eoe(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z"},child:[]}]})(e)}function oN(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"10",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M10.3 15H7a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"17",cy:"17",r:"3"},child:[]},{tag:"path",attr:{d:"m21 21-1.9-1.9"},child:[]}]})(e)}function toe(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M22 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(e)}function noe(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"},child:[]}]})(e)}const aoe=()=>{const e=["/image/crm1.png","/image/crm2.png","/image/crm3.png","/image/crm4.png","/image/crm5.png","/image/crm7.png","/image/crm6.png"],[t,a]=h.useState(0),[s,r]=h.useState(!1),i=h.useRef(null),[o,l]=h.useState(0),[c,u]=h.useState(0);h.useEffect(()=>(s||(i.current=setInterval(()=>{a(x=>(x+1)%e.length)},4e3)),()=>clearInterval(i.current)),[s,e.length]);const d=x=>l(x.targetTouches[0].clientX),f=x=>u(x.targetTouches[0].clientX),p=()=>{o-c>75&&a(x=>(x+1)%e.length),c-o>75&&a(x=>(x-1+e.length)%e.length)};return n.jsx("section",{className:"bg-paper-white text-white py-15 lg:py-32",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[n.jsxs("div",{className:"lg:text-left text-center",children:[n.jsxs("h1",{className:"text-5xl sm:text-6xl lg:text-7xl font-lg text-secondary mb-6 leading-tight",children:["Sari-Sari"," ",n.jsx("span",{className:"text-accent font-extrabold",children:"CRM"})]}),n.jsx("p",{className:"max-w-xl mx-auto lg:mx-0 text-lg sm:text-xl text-secondary mb-10 italic",children:"The CRM that keeps your customers organized and your sales growing."}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-center lg:justify-start space-y-4 sm:space-y-0 sm:space-x-4",children:[n.jsx("a",{href:"#",className:"px-10 py-3 rounded-lg border border-secondary text-white bg-secondary font-semibold hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-500",children:"Get Started Now"}),n.jsx("a",{href:"#",className:"px-10 py-3 rounded-lg border border-secondary text-white bg-secondary hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-500",children:"Watch Demo (2 min)"})]})]}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"hidden lg:block absolute inset-0 -top-10 -bottom-10 right-4 bg-accent rounded-3xl transform rotate-3 z-0"}),n.jsxs("div",{className:"relative z-10 overflow-hidden rounded-xl shadow-2xl border-4 border-gray-800 h-[400px] bg-gray-900 flex items-center justify-center",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),onTouchStart:d,onTouchMove:f,onTouchEnd:p,children:[e.map((x,y)=>n.jsx("img",{src:x,alt:`Slide ${y+1}`,className:`absolute inset-0 w-full h-full object-contain bg-gray-50 transition-opacity duration-1000 ease-in-out ${y===t?"opacity-100":"opacity-0"}`},y)),n.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex space-x-2",children:e.map((x,y)=>n.jsx("button",{onClick:()=>a(y),className:`w-3 h-3 rounded-full transition-all ${y===t?"bg-accent":"bg-gray-400 opacity-50"}`},y))})]})]})]})})},soe=({Icon:e,title:t,description:a})=>n.jsxs("div",{className:"bg-gray-800 p-8 rounded-2xl border border-gray-700 hover:border-accent transition transform hover:-translate-y-1",children:[n.jsx("div",{className:"w-14 h-14 flex items-center justify-center rounded-full text-accent mb-6",children:n.jsx(e,{className:"w-8 h-8"})}),n.jsx("h3",{className:"text-xl font-semibold text-white mb-3",children:t}),n.jsx("p",{className:"text-gray-400",children:a})]}),roe=()=>{const e=[{Icon:noe,title:"Automated Workflows",description:"Automate tasks and focus on engagement."},{Icon:Jie,title:"Predictive Analytics",description:"Harness AI to forecast sales and risks."},{Icon:toe,title:"Unified Customer View",description:"360-degree profile for every customer."},{Icon:eoe,title:"Multi-Channel Support",description:"Engage across email, chat, and more."}];return n.jsx("section",{id:"platform",className:"py-20 bg-gray-900 border-t border-gray-800",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[n.jsx("h2",{className:"text-4xl sm:text-5xl font-bold text-white mb-4",children:"Engineered for Enterprise Scale"}),n.jsx("p",{className:"text-xl text-gray-400 mb-16",children:"Pillows is the neural network powering your customer relationships."}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:e.map((t,a)=>n.jsx(soe,{...t},a))})]})})},ioe=()=>n.jsxs("section",{id:"pricing",className:"py-20 bg-paper-white border-t border-gray-800 text-center",children:[n.jsx("h2",{className:"text-4xl sm:text-5xl font-bold text-secondary mb-4",children:"Start Building Your Future, Today."}),n.jsx("p",{className:"text-xl text-gray-400 mb-10",children:"Join thousands leveraging Sari-Sari CRM's intelligent platform."}),n.jsx("a",{href:"/signup",className:"px-12 py-4 text-lg font-bold rounded-xl shadow-2xl bg-accent border border-secondary text-white bg-secondary hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-400",children:"Start 15-Day Free Trial"})]}),ooe=()=>n.jsx("footer",{className:"bg-secondary text-white border-t py-10",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-5 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8",children:[n.jsxs("div",{children:[n.jsxs("span",{className:"text-xl font-white",children:["Sari-Sari ",n.jsx("span",{className:"text-accent",children:"CRM"})]}),n.jsx("p",{className:"text-sm text-white mt-4",children:" 2026 Sari-Sari CRM"})]}),[{title:"Resources",links:["Security","Support"],href:"/resources"},{title:"Legal",links:["Terms","Privacy","SLA","Compliance"],href:"/legal"}].map((e,t)=>n.jsxs("div",{children:[n.jsx("h5",{className:"text-md font-semibold mb-4 text-accent",children:e.title}),n.jsx("ul",{className:"space-y-2 text-sm text-white",children:e.links.map((a,s)=>n.jsx("li",{children:n.jsx("a",{href:e.href,target:"_blank",rel:"noopener noreferrer",className:"hover:text-accent",children:a})},s))})]},t))]})}),loe=()=>(h.useEffect(()=>{document.title="Sari-Sari CRM"},[]),n.jsxs("main",{className:"font-inter",children:[n.jsx(h9,{}),n.jsx(aoe,{}),n.jsx(roe,{}),n.jsx(ioe,{}),n.jsx(ooe,{})]}));function Qu(e){return At({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"},child:[]}]})(e)}function Xn(e){return At({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(e)}function wd(e){return At({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"},child:[]}]})(e)}class $g extends Error{}$g.prototype.name="InvalidTokenError";function coe(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,a)=>{let s=a.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s}))}function doe(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return coe(t)}catch{return atob(t)}}function g9(e,t){if(typeof e!="string")throw new $g("Invalid token specified: must be a string");t||(t={});const a=t.header===!0?0:1,s=e.split(".")[a];if(typeof s!="string")throw new $g(`Invalid token specified: missing part #${a+1}`);let r;try{r=doe(s)}catch(i){throw new $g(`Invalid token specified: invalid base64 for part #${a+1} (${i.message})`)}try{return JSON.parse(r)}catch(i){throw new $g(`Invalid token specified: invalid json for part #${a+1} (${i.message})`)}}function Va(e,t,a=void 0){const s={};for(const r in e){const i=e[r];let o="",l=!0;for(let c=0;c<i.length;c+=1){const u=i[c];u&&(o+=(l===!0?"":" ")+t(u),l=!1,a&&a[u]&&(o+=" "+a[u]))}s[r]=o}return s}function Lu(e,...t){const a=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(s=>a.searchParams.append("args[]",s)),`Minified MUI error #${e}; visit ${a} for the full message.`}function Wn(e){if(typeof e!="string")throw new Error(Lu(7));return e.charAt(0).toUpperCase()+e.slice(1)}var VS={exports:{}},Bn={};var BI;function uoe(){if(BI)return Bn;BI=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function y(N){if(typeof N=="object"&&N!==null){var v=N.$$typeof;switch(v){case e:switch(N=N.type,N){case a:case r:case s:case c:case u:case p:return N;default:switch(N=N&&N.$$typeof,N){case o:case l:case f:case d:return N;case i:return N;default:return v}}case t:return v}}}return Bn.ContextConsumer=i,Bn.ContextProvider=o,Bn.Element=e,Bn.ForwardRef=l,Bn.Fragment=a,Bn.Lazy=f,Bn.Memo=d,Bn.Portal=t,Bn.Profiler=r,Bn.StrictMode=s,Bn.Suspense=c,Bn.SuspenseList=u,Bn.isContextConsumer=function(N){return y(N)===i},Bn.isContextProvider=function(N){return y(N)===o},Bn.isElement=function(N){return typeof N=="object"&&N!==null&&N.$$typeof===e},Bn.isForwardRef=function(N){return y(N)===l},Bn.isFragment=function(N){return y(N)===a},Bn.isLazy=function(N){return y(N)===f},Bn.isMemo=function(N){return y(N)===d},Bn.isPortal=function(N){return y(N)===t},Bn.isProfiler=function(N){return y(N)===r},Bn.isStrictMode=function(N){return y(N)===s},Bn.isSuspense=function(N){return y(N)===c},Bn.isSuspenseList=function(N){return y(N)===u},Bn.isValidElementType=function(N){return typeof N=="string"||typeof N=="function"||N===a||N===r||N===s||N===c||N===u||typeof N=="object"&&N!==null&&(N.$$typeof===f||N.$$typeof===d||N.$$typeof===o||N.$$typeof===i||N.$$typeof===l||N.$$typeof===x||N.getModuleId!==void 0)},Bn.typeOf=y,Bn}var HI;function moe(){return HI||(HI=1,VS.exports=uoe()),VS.exports}var jL=moe();function jo(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function p9(e){if(h.isValidElement(e)||jL.isValidElementType(e)||!jo(e))return e;const t={};return Object.keys(e).forEach(a=>{t[a]=p9(e[a])}),t}function Rr(e,t,a={clone:!0}){const s=a.clone?{...e}:e;return jo(e)&&jo(t)&&Object.keys(t).forEach(r=>{h.isValidElement(t[r])||jL.isValidElementType(t[r])?s[r]=t[r]:jo(t[r])&&Object.prototype.hasOwnProperty.call(e,r)&&jo(e[r])?s[r]=Rr(e[r],t[r],a):a.clone?s[r]=jo(t[r])?p9(t[r]):t[r]:s[r]=t[r]}),s}function Zg(e,t){return t?Rr(e,t,{clone:!1}):e}function qI(e,t){if(!e.containerQueries)return t;const a=Object.keys(t).filter(s=>s.startsWith("@container")).sort((s,r)=>{const i=/min-width:\s*([0-9.]+)/;return+(s.match(i)?.[1]||0)-+(r.match(i)?.[1]||0)});return a.length?a.reduce((s,r)=>{const i=t[r];return delete s[r],s[r]=i,s},{...t}):t}function foe(e,t){return t==="@"||t.startsWith("@")&&(e.some(a=>t.startsWith(`@${a}`))||!!t.match(/^@\d/))}function hoe(e,t){const a=t.match(/^@([^/]+)?\/?(.+)?$/);if(!a)return null;const[,s,r]=a,i=Number.isNaN(+s)?s||0:+s;return e.containerQueries(r).up(i)}function goe(e){const t=(i,o)=>i.replace("@media",o?`@container ${o}`:"@container");function a(i,o){i.up=(...l)=>t(e.breakpoints.up(...l),o),i.down=(...l)=>t(e.breakpoints.down(...l),o),i.between=(...l)=>t(e.breakpoints.between(...l),o),i.only=(...l)=>t(e.breakpoints.only(...l),o),i.not=(...l)=>{const c=t(e.breakpoints.not(...l),o);return c.includes("not all and")?c.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):c}}const s={},r=i=>(a(s,i),s);return a(r),{...e,containerQueries:r}}const lN={xs:0,sm:600,md:900,lg:1200,xl:1536},WI={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${lN[e]}px)`},poe={containerQueries:e=>({up:t=>{let a=typeof t=="number"?t:lN[t]||t;return typeof a=="number"&&(a=`${a}px`),e?`@container ${e} (min-width:${a})`:`@container (min-width:${a})`}})};function Rl(e,t,a){const s=e.theme||{};if(Array.isArray(t)){const i=s.breakpoints||WI;return t.reduce((o,l,c)=>(o[i.up(i.keys[c])]=a(t[c]),o),{})}if(typeof t=="object"){const i=s.breakpoints||WI;return Object.keys(t).reduce((o,l)=>{if(foe(i.keys,l)){const c=hoe(s.containerQueries?s:poe,l);c&&(o[c]=a(t[l],l))}else if(Object.keys(i.values||lN).includes(l)){const c=i.up(l);o[c]=a(t[l],l)}else{const c=l;o[c]=t[c]}return o},{})}return a(t)}function xoe(e={}){return e.keys?.reduce((a,s)=>{const r=e.up(s);return a[r]={},a},{})||{}}function GI(e,t){return e.reduce((a,s)=>{const r=a[s];return(!r||Object.keys(r).length===0)&&delete a[s],a},t)}function cN(e,t,a=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&a){const s=`vars.${t}`.split(".").reduce((r,i)=>r&&r[i]?r[i]:null,e);if(s!=null)return s}return t.split(".").reduce((s,r)=>s&&s[r]!=null?s[r]:null,e)}function yv(e,t,a,s=a){let r;return typeof e=="function"?r=e(a):Array.isArray(e)?r=e[a]||s:r=cN(e,a)||s,t&&(r=t(r,s,e)),r}function Ia(e){const{prop:t,cssProperty:a=e.prop,themeKey:s,transform:r}=e,i=o=>{if(o[t]==null)return null;const l=o[t],c=o.theme,u=cN(c,s)||{};return Rl(o,l,f=>{let p=yv(u,r,f);return f===p&&typeof f=="string"&&(p=yv(u,r,`${t}${f==="default"?"":Wn(f)}`,f)),a===!1?p:{[a]:p}})};return i.propTypes={},i.filterProps=[t],i}function yoe(e){const t={};return a=>(t[a]===void 0&&(t[a]=e(a)),t[a])}const boe={m:"margin",p:"padding"},voe={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},VI={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},woe=yoe(e=>{if(e.length>2)if(VI[e])e=VI[e];else return[e];const[t,a]=e.split(""),s=boe[t],r=voe[a]||"";return Array.isArray(r)?r.map(i=>s+i):[s+r]}),CL=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],SL=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...CL,...SL];function ux(e,t,a,s){const r=cN(e,t,!0)??a;return typeof r=="number"||typeof r=="string"?i=>typeof i=="string"?i:typeof r=="string"?r.startsWith("var(")&&i===0?0:r.startsWith("var(")&&i===1?r:`calc(${i} * ${r})`:r*i:Array.isArray(r)?i=>{if(typeof i=="string")return i;const o=Math.abs(i),l=r[o];return i>=0?l:typeof l=="number"?-l:typeof l=="string"&&l.startsWith("var(")?`calc(-1 * ${l})`:`-${l}`}:typeof r=="function"?r:()=>{}}function _L(e){return ux(e,"spacing",8)}function mx(e,t){return typeof t=="string"||t==null?t:e(t)}function Noe(e,t){return a=>e.reduce((s,r)=>(s[r]=mx(t,a),s),{})}function joe(e,t,a,s){if(!t.includes(a))return null;const r=woe(a),i=Noe(r,s),o=e[a];return Rl(e,o,i)}function x9(e,t){const a=_L(e.theme);return Object.keys(e).map(s=>joe(e,t,s,a)).reduce(Zg,{})}function Na(e){return x9(e,CL)}Na.propTypes={};Na.filterProps=CL;function ja(e){return x9(e,SL)}ja.propTypes={};ja.filterProps=SL;function dN(...e){const t=e.reduce((s,r)=>(r.filterProps.forEach(i=>{s[i]=r}),s),{}),a=s=>Object.keys(s).reduce((r,i)=>t[i]?Zg(r,t[i](s)):r,{});return a.propTypes={},a.filterProps=e.reduce((s,r)=>s.concat(r.filterProps),[]),a}function mi(e){return typeof e!="number"?e:`${e}px solid`}function Si(e,t){return Ia({prop:e,themeKey:"borders",transform:t})}const Coe=Si("border",mi),Soe=Si("borderTop",mi),_oe=Si("borderRight",mi),Aoe=Si("borderBottom",mi),Toe=Si("borderLeft",mi),koe=Si("borderColor"),Eoe=Si("borderTopColor"),Loe=Si("borderRightColor"),Poe=Si("borderBottomColor"),Doe=Si("borderLeftColor"),Ooe=Si("outline",mi),Moe=Si("outlineColor"),uN=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=ux(e.theme,"shape.borderRadius",4),a=s=>({borderRadius:mx(t,s)});return Rl(e,e.borderRadius,a)}return null};uN.propTypes={};uN.filterProps=["borderRadius"];dN(Coe,Soe,_oe,Aoe,Toe,koe,Eoe,Loe,Poe,Doe,uN,Ooe,Moe);const mN=e=>{if(e.gap!==void 0&&e.gap!==null){const t=ux(e.theme,"spacing",8),a=s=>({gap:mx(t,s)});return Rl(e,e.gap,a)}return null};mN.propTypes={};mN.filterProps=["gap"];const fN=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=ux(e.theme,"spacing",8),a=s=>({columnGap:mx(t,s)});return Rl(e,e.columnGap,a)}return null};fN.propTypes={};fN.filterProps=["columnGap"];const hN=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=ux(e.theme,"spacing",8),a=s=>({rowGap:mx(t,s)});return Rl(e,e.rowGap,a)}return null};hN.propTypes={};hN.filterProps=["rowGap"];const Ioe=Ia({prop:"gridColumn"}),$oe=Ia({prop:"gridRow"}),Roe=Ia({prop:"gridAutoFlow"}),zoe=Ia({prop:"gridAutoColumns"}),Foe=Ia({prop:"gridAutoRows"}),Uoe=Ia({prop:"gridTemplateColumns"}),Boe=Ia({prop:"gridTemplateRows"}),Hoe=Ia({prop:"gridTemplateAreas"}),qoe=Ia({prop:"gridArea"});dN(mN,fN,hN,Ioe,$oe,Roe,zoe,Foe,Uoe,Boe,Hoe,qoe);function pf(e,t){return t==="grey"?t:e}const Woe=Ia({prop:"color",themeKey:"palette",transform:pf}),Goe=Ia({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:pf}),Voe=Ia({prop:"backgroundColor",themeKey:"palette",transform:pf});dN(Woe,Goe,Voe);function Mr(e){return e<=1&&e!==0?`${e*100}%`:e}const Yoe=Ia({prop:"width",transform:Mr}),AL=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=a=>{const s=e.theme?.breakpoints?.values?.[a]||lN[a];return s?e.theme?.breakpoints?.unit!=="px"?{maxWidth:`${s}${e.theme.breakpoints.unit}`}:{maxWidth:s}:{maxWidth:Mr(a)}};return Rl(e,e.maxWidth,t)}return null};AL.filterProps=["maxWidth"];const Qoe=Ia({prop:"minWidth",transform:Mr}),Koe=Ia({prop:"height",transform:Mr}),Xoe=Ia({prop:"maxHeight",transform:Mr}),Zoe=Ia({prop:"minHeight",transform:Mr});Ia({prop:"size",cssProperty:"width",transform:Mr});Ia({prop:"size",cssProperty:"height",transform:Mr});const Joe=Ia({prop:"boxSizing"});dN(Yoe,AL,Qoe,Koe,Xoe,Zoe,Joe);const fx={border:{themeKey:"borders",transform:mi},borderTop:{themeKey:"borders",transform:mi},borderRight:{themeKey:"borders",transform:mi},borderBottom:{themeKey:"borders",transform:mi},borderLeft:{themeKey:"borders",transform:mi},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:mi},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:uN},color:{themeKey:"palette",transform:pf},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:pf},backgroundColor:{themeKey:"palette",transform:pf},p:{style:ja},pt:{style:ja},pr:{style:ja},pb:{style:ja},pl:{style:ja},px:{style:ja},py:{style:ja},padding:{style:ja},paddingTop:{style:ja},paddingRight:{style:ja},paddingBottom:{style:ja},paddingLeft:{style:ja},paddingX:{style:ja},paddingY:{style:ja},paddingInline:{style:ja},paddingInlineStart:{style:ja},paddingInlineEnd:{style:ja},paddingBlock:{style:ja},paddingBlockStart:{style:ja},paddingBlockEnd:{style:ja},m:{style:Na},mt:{style:Na},mr:{style:Na},mb:{style:Na},ml:{style:Na},mx:{style:Na},my:{style:Na},margin:{style:Na},marginTop:{style:Na},marginRight:{style:Na},marginBottom:{style:Na},marginLeft:{style:Na},marginX:{style:Na},marginY:{style:Na},marginInline:{style:Na},marginInlineStart:{style:Na},marginInlineEnd:{style:Na},marginBlock:{style:Na},marginBlockStart:{style:Na},marginBlockEnd:{style:Na},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:mN},rowGap:{style:hN},columnGap:{style:fN},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Mr},maxWidth:{style:AL},minWidth:{transform:Mr},height:{transform:Mr},maxHeight:{transform:Mr},minHeight:{transform:Mr},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function ele(...e){const t=e.reduce((s,r)=>s.concat(Object.keys(r)),[]),a=new Set(t);return e.every(s=>a.size===Object.keys(s).length)}function tle(e,t){return typeof e=="function"?e(t):e}function nle(){function e(a,s,r,i){const o={[a]:s,theme:r},l=i[a];if(!l)return{[a]:s};const{cssProperty:c=a,themeKey:u,transform:d,style:f}=l;if(s==null)return null;if(u==="typography"&&s==="inherit")return{[a]:s};const p=cN(r,u)||{};return f?f(o):Rl(o,s,y=>{let N=yv(p,d,y);return y===N&&typeof y=="string"&&(N=yv(p,d,`${a}${y==="default"?"":Wn(y)}`,y)),c===!1?N:{[c]:N}})}function t(a){const{sx:s,theme:r={},nested:i}=a||{};if(!s)return null;const o=r.unstable_sxConfig??fx;function l(c){let u=c;if(typeof c=="function")u=c(r);else if(typeof c!="object")return c;if(!u)return null;const d=xoe(r.breakpoints),f=Object.keys(d);let p=d;return Object.keys(u).forEach(x=>{const y=tle(u[x],r);if(y!=null)if(typeof y=="object")if(o[x])p=Zg(p,e(x,y,r,o));else{const N=Rl({theme:r},y,v=>({[x]:v}));ele(N,y)?p[x]=t({sx:y,theme:r,nested:!0}):p=Zg(p,N)}else p=Zg(p,e(x,y,r,o))}),!i&&r.modularCssLayers?{"@layer sx":qI(r,GI(f,p))}:qI(r,GI(f,p))}return Array.isArray(s)?s.map(l):l(s)}return t}const _f=nle();_f.filterProps=["sx"];const ale=e=>{const t={systemProps:{},otherProps:{}},a=e?.theme?.unstable_sxConfig??fx;return Object.keys(e).forEach(s=>{a[s]?t.systemProps[s]=e[s]:t.otherProps[s]=e[s]}),t};function sle(e){const{sx:t,...a}=e,{systemProps:s,otherProps:r}=ale(a);let i;return Array.isArray(t)?i=[s,...t]:typeof t=="function"?i=(...o)=>{const l=t(...o);return jo(l)?{...s,...l}:s}:i={...s,...t},{...r,sx:i}}function Ye(){return Ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Ye.apply(null,arguments)}function rle(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function ile(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var ole=(function(){function e(a){var s=this;this._insertTag=function(r){var i;s.tags.length===0?s.insertionPoint?i=s.insertionPoint.nextSibling:s.prepend?i=s.container.firstChild:i=s.before:i=s.tags[s.tags.length-1].nextSibling,s.container.insertBefore(r,i),s.tags.push(r)},this.isSpeedy=a.speedy===void 0?!0:a.speedy,this.tags=[],this.ctr=0,this.nonce=a.nonce,this.key=a.key,this.container=a.container,this.prepend=a.prepend,this.insertionPoint=a.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(s){s.forEach(this._insertTag)},t.insert=function(s){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(ile(this));var r=this.tags[this.tags.length-1];if(this.isSpeedy){var i=rle(r);try{i.insertRule(s,i.cssRules.length)}catch{}}else r.appendChild(document.createTextNode(s));this.ctr++},t.flush=function(){this.tags.forEach(function(s){var r;return(r=s.parentNode)==null?void 0:r.removeChild(s)}),this.tags=[],this.ctr=0},e})(),Ls="-ms-",bv="-moz-",Tn="-webkit-",y9="comm",TL="rule",kL="decl",lle="@import",b9="@keyframes",cle="@layer",dle=Math.abs,gN=String.fromCharCode,ule=Object.assign;function mle(e,t){return Ts(e,0)^45?(((t<<2^Ts(e,0))<<2^Ts(e,1))<<2^Ts(e,2))<<2^Ts(e,3):0}function v9(e){return e.trim()}function fle(e,t){return(e=t.exec(e))?e[0]:e}function kn(e,t,a){return e.replace(t,a)}function tk(e,t){return e.indexOf(t)}function Ts(e,t){return e.charCodeAt(t)|0}function hp(e,t,a){return e.slice(t,a)}function vo(e){return e.length}function EL(e){return e.length}function Ry(e,t){return t.push(e),e}function hle(e,t){return e.map(t).join("")}var pN=1,Af=1,w9=0,br=0,Ha=0,Jf="";function xN(e,t,a,s,r,i,o){return{value:e,root:t,parent:a,type:s,props:r,children:i,line:pN,column:Af,length:o,return:""}}function ug(e,t){return ule(xN("",null,null,"",null,null,0),e,{length:-e.length},t)}function gle(){return Ha}function ple(){return Ha=br>0?Ts(Jf,--br):0,Af--,Ha===10&&(Af=1,pN--),Ha}function zr(){return Ha=br<w9?Ts(Jf,br++):0,Af++,Ha===10&&(Af=1,pN++),Ha}function Eo(){return Ts(Jf,br)}function Xb(){return br}function hx(e,t){return hp(Jf,e,t)}function gp(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function N9(e){return pN=Af=1,w9=vo(Jf=e),br=0,[]}function j9(e){return Jf="",e}function Zb(e){return v9(hx(br-1,nk(e===91?e+2:e===40?e+1:e)))}function xle(e){for(;(Ha=Eo())&&Ha<33;)zr();return gp(e)>2||gp(Ha)>3?"":" "}function yle(e,t){for(;--t&&zr()&&!(Ha<48||Ha>102||Ha>57&&Ha<65||Ha>70&&Ha<97););return hx(e,Xb()+(t<6&&Eo()==32&&zr()==32))}function nk(e){for(;zr();)switch(Ha){case e:return br;case 34:case 39:e!==34&&e!==39&&nk(Ha);break;case 40:e===41&&nk(e);break;case 92:zr();break}return br}function ble(e,t){for(;zr()&&e+Ha!==57;)if(e+Ha===84&&Eo()===47)break;return"/*"+hx(t,br-1)+"*"+gN(e===47?e:zr())}function vle(e){for(;!gp(Eo());)zr();return hx(e,br)}function wle(e){return j9(Jb("",null,null,null,[""],e=N9(e),0,[0],e))}function Jb(e,t,a,s,r,i,o,l,c){for(var u=0,d=0,f=o,p=0,x=0,y=0,N=1,v=1,j=1,w=0,S="",_=r,E=i,T=s,A=S;v;)switch(y=w,w=zr()){case 40:if(y!=108&&Ts(A,f-1)==58){tk(A+=kn(Zb(w),"&","&\f"),"&\f")!=-1&&(j=-1);break}case 34:case 39:case 91:A+=Zb(w);break;case 9:case 10:case 13:case 32:A+=xle(y);break;case 92:A+=yle(Xb()-1,7);continue;case 47:switch(Eo()){case 42:case 47:Ry(Nle(ble(zr(),Xb()),t,a),c);break;default:A+="/"}break;case 123*N:l[u++]=vo(A)*j;case 125*N:case 59:case 0:switch(w){case 0:case 125:v=0;case 59+d:j==-1&&(A=kn(A,/\f/g,"")),x>0&&vo(A)-f&&Ry(x>32?QI(A+";",s,a,f-1):QI(kn(A," ","")+";",s,a,f-2),c);break;case 59:A+=";";default:if(Ry(T=YI(A,t,a,u,d,r,l,S,_=[],E=[],f),i),w===123)if(d===0)Jb(A,t,T,T,_,i,f,l,E);else switch(p===99&&Ts(A,3)===110?100:p){case 100:case 108:case 109:case 115:Jb(e,T,T,s&&Ry(YI(e,T,T,0,0,r,l,S,r,_=[],f),E),r,E,f,l,s?_:E);break;default:Jb(A,T,T,T,[""],E,0,l,E)}}u=d=x=0,N=j=1,S=A="",f=o;break;case 58:f=1+vo(A),x=y;default:if(N<1){if(w==123)--N;else if(w==125&&N++==0&&ple()==125)continue}switch(A+=gN(w),w*N){case 38:j=d>0?1:(A+="\f",-1);break;case 44:l[u++]=(vo(A)-1)*j,j=1;break;case 64:Eo()===45&&(A+=Zb(zr())),p=Eo(),d=f=vo(S=A+=vle(Xb())),w++;break;case 45:y===45&&vo(A)==2&&(N=0)}}return i}function YI(e,t,a,s,r,i,o,l,c,u,d){for(var f=r-1,p=r===0?i:[""],x=EL(p),y=0,N=0,v=0;y<s;++y)for(var j=0,w=hp(e,f+1,f=dle(N=o[y])),S=e;j<x;++j)(S=v9(N>0?p[j]+" "+w:kn(w,/&\f/g,p[j])))&&(c[v++]=S);return xN(e,t,a,r===0?TL:l,c,u,d)}function Nle(e,t,a){return xN(e,t,a,y9,gN(gle()),hp(e,2,-2),0)}function QI(e,t,a,s){return xN(e,t,a,kL,hp(e,0,s),hp(e,s+1,-1),s)}function xf(e,t){for(var a="",s=EL(e),r=0;r<s;r++)a+=t(e[r],r,e,t)||"";return a}function jle(e,t,a,s){switch(e.type){case cle:if(e.children.length)break;case lle:case kL:return e.return=e.return||e.value;case y9:return"";case b9:return e.return=e.value+"{"+xf(e.children,s)+"}";case TL:e.value=e.props.join(",")}return vo(a=xf(e.children,s))?e.return=e.value+"{"+a+"}":""}function Cle(e){var t=EL(e);return function(a,s,r,i){for(var o="",l=0;l<t;l++)o+=e[l](a,s,r,i)||"";return o}}function Sle(e){return function(t){t.root||(t=t.return)&&e(t)}}function C9(e){var t=Object.create(null);return function(a){return t[a]===void 0&&(t[a]=e(a)),t[a]}}var _le=function(t,a,s){for(var r=0,i=0;r=i,i=Eo(),r===38&&i===12&&(a[s]=1),!gp(i);)zr();return hx(t,br)},Ale=function(t,a){var s=-1,r=44;do switch(gp(r)){case 0:r===38&&Eo()===12&&(a[s]=1),t[s]+=_le(br-1,a,s);break;case 2:t[s]+=Zb(r);break;case 4:if(r===44){t[++s]=Eo()===58?"&\f":"",a[s]=t[s].length;break}default:t[s]+=gN(r)}while(r=zr());return t},Tle=function(t,a){return j9(Ale(N9(t),a))},KI=new WeakMap,kle=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var a=t.value,s=t.parent,r=t.column===s.column&&t.line===s.line;s.type!=="rule";)if(s=s.parent,!s)return;if(!(t.props.length===1&&a.charCodeAt(0)!==58&&!KI.get(s))&&!r){KI.set(t,!0);for(var i=[],o=Tle(a,i),l=s.props,c=0,u=0;c<o.length;c++)for(var d=0;d<l.length;d++,u++)t.props[u]=i[c]?o[c].replace(/&\f/g,l[d]):l[d]+" "+o[c]}}},Ele=function(t){if(t.type==="decl"){var a=t.value;a.charCodeAt(0)===108&&a.charCodeAt(2)===98&&(t.return="",t.value="")}};function S9(e,t){switch(mle(e,t)){case 5103:return Tn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Tn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Tn+e+bv+e+Ls+e+e;case 6828:case 4268:return Tn+e+Ls+e+e;case 6165:return Tn+e+Ls+"flex-"+e+e;case 5187:return Tn+e+kn(e,/(\w+).+(:[^]+)/,Tn+"box-$1$2"+Ls+"flex-$1$2")+e;case 5443:return Tn+e+Ls+"flex-item-"+kn(e,/flex-|-self/,"")+e;case 4675:return Tn+e+Ls+"flex-line-pack"+kn(e,/align-content|flex-|-self/,"")+e;case 5548:return Tn+e+Ls+kn(e,"shrink","negative")+e;case 5292:return Tn+e+Ls+kn(e,"basis","preferred-size")+e;case 6060:return Tn+"box-"+kn(e,"-grow","")+Tn+e+Ls+kn(e,"grow","positive")+e;case 4554:return Tn+kn(e,/([^-])(transform)/g,"$1"+Tn+"$2")+e;case 6187:return kn(kn(kn(e,/(zoom-|grab)/,Tn+"$1"),/(image-set)/,Tn+"$1"),e,"")+e;case 5495:case 3959:return kn(e,/(image-set\([^]*)/,Tn+"$1$`$1");case 4968:return kn(kn(e,/(.+:)(flex-)?(.*)/,Tn+"box-pack:$3"+Ls+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Tn+e+e;case 4095:case 3583:case 4068:case 2532:return kn(e,/(.+)-inline(.+)/,Tn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(vo(e)-1-t>6)switch(Ts(e,t+1)){case 109:if(Ts(e,t+4)!==45)break;case 102:return kn(e,/(.+:)(.+)-([^]+)/,"$1"+Tn+"$2-$3$1"+bv+(Ts(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~tk(e,"stretch")?S9(kn(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Ts(e,t+1)!==115)break;case 6444:switch(Ts(e,vo(e)-3-(~tk(e,"!important")&&10))){case 107:return kn(e,":",":"+Tn)+e;case 101:return kn(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Tn+(Ts(e,14)===45?"inline-":"")+"box$3$1"+Tn+"$2$3$1"+Ls+"$2box$3")+e}break;case 5936:switch(Ts(e,t+11)){case 114:return Tn+e+Ls+kn(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Tn+e+Ls+kn(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Tn+e+Ls+kn(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Tn+e+Ls+e+e}return e}var Lle=function(t,a,s,r){if(t.length>-1&&!t.return)switch(t.type){case kL:t.return=S9(t.value,t.length);break;case b9:return xf([ug(t,{value:kn(t.value,"@","@"+Tn)})],r);case TL:if(t.length)return hle(t.props,function(i){switch(fle(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return xf([ug(t,{props:[kn(i,/:(read-\w+)/,":"+bv+"$1")]})],r);case"::placeholder":return xf([ug(t,{props:[kn(i,/:(plac\w+)/,":"+Tn+"input-$1")]}),ug(t,{props:[kn(i,/:(plac\w+)/,":"+bv+"$1")]}),ug(t,{props:[kn(i,/:(plac\w+)/,Ls+"input-$1")]})],r)}return""})}},Ple=[Lle],Dle=function(t){var a=t.key;if(a==="css"){var s=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(s,function(N){var v=N.getAttribute("data-emotion");v.indexOf(" ")!==-1&&(document.head.appendChild(N),N.setAttribute("data-s",""))})}var r=t.stylisPlugins||Ple,i={},o,l=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+a+' "]'),function(N){for(var v=N.getAttribute("data-emotion").split(" "),j=1;j<v.length;j++)i[v[j]]=!0;l.push(N)});var c,u=[kle,Ele];{var d,f=[jle,Sle(function(N){d.insert(N)})],p=Cle(u.concat(r,f)),x=function(v){return xf(wle(v),p)};c=function(v,j,w,S){d=w,x(v?v+"{"+j.styles+"}":j.styles),S&&(y.inserted[j.name]=!0)}}var y={key:a,sheet:new ole({key:a,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:i,registered:{},insert:c};return y.sheet.hydrate(l),y},YS={exports:{}},En={};var XI;function Ole(){if(XI)return En;XI=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,a=e?Symbol.for("react.portal"):60106,s=e?Symbol.for("react.fragment"):60107,r=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,l=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,p=e?Symbol.for("react.suspense_list"):60120,x=e?Symbol.for("react.memo"):60115,y=e?Symbol.for("react.lazy"):60116,N=e?Symbol.for("react.block"):60121,v=e?Symbol.for("react.fundamental"):60117,j=e?Symbol.for("react.responder"):60118,w=e?Symbol.for("react.scope"):60119;function S(E){if(typeof E=="object"&&E!==null){var T=E.$$typeof;switch(T){case t:switch(E=E.type,E){case c:case u:case s:case i:case r:case f:return E;default:switch(E=E&&E.$$typeof,E){case l:case d:case y:case x:case o:return E;default:return T}}case a:return T}}}function _(E){return S(E)===u}return En.AsyncMode=c,En.ConcurrentMode=u,En.ContextConsumer=l,En.ContextProvider=o,En.Element=t,En.ForwardRef=d,En.Fragment=s,En.Lazy=y,En.Memo=x,En.Portal=a,En.Profiler=i,En.StrictMode=r,En.Suspense=f,En.isAsyncMode=function(E){return _(E)||S(E)===c},En.isConcurrentMode=_,En.isContextConsumer=function(E){return S(E)===l},En.isContextProvider=function(E){return S(E)===o},En.isElement=function(E){return typeof E=="object"&&E!==null&&E.$$typeof===t},En.isForwardRef=function(E){return S(E)===d},En.isFragment=function(E){return S(E)===s},En.isLazy=function(E){return S(E)===y},En.isMemo=function(E){return S(E)===x},En.isPortal=function(E){return S(E)===a},En.isProfiler=function(E){return S(E)===i},En.isStrictMode=function(E){return S(E)===r},En.isSuspense=function(E){return S(E)===f},En.isValidElementType=function(E){return typeof E=="string"||typeof E=="function"||E===s||E===u||E===i||E===r||E===f||E===p||typeof E=="object"&&E!==null&&(E.$$typeof===y||E.$$typeof===x||E.$$typeof===o||E.$$typeof===l||E.$$typeof===d||E.$$typeof===v||E.$$typeof===j||E.$$typeof===w||E.$$typeof===N)},En.typeOf=S,En}var ZI;function Mle(){return ZI||(ZI=1,YS.exports=Ole()),YS.exports}var QS,JI;function Ile(){if(JI)return QS;JI=1;var e=Mle(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},r={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};i[e.ForwardRef]=s,i[e.Memo]=r;function o(y){return e.isMemo(y)?r:i[y.$$typeof]||t}var l=Object.defineProperty,c=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;function x(y,N,v){if(typeof N!="string"){if(p){var j=f(N);j&&j!==p&&x(y,j,v)}var w=c(N);u&&(w=w.concat(u(N)));for(var S=o(y),_=o(N),E=0;E<w.length;++E){var T=w[E];if(!a[T]&&!(v&&v[T])&&!(_&&_[T])&&!(S&&S[T])){var A=d(N,T);try{l(y,T,A)}catch{}}}}return y}return QS=x,QS}Ile();var $le=!0;function _9(e,t,a){var s="";return a.split(" ").forEach(function(r){e[r]!==void 0?t.push(e[r]+";"):r&&(s+=r+" ")}),s}var LL=function(t,a,s){var r=t.key+"-"+a.name;(s===!1||$le===!1)&&t.registered[r]===void 0&&(t.registered[r]=a.styles)},A9=function(t,a,s){LL(t,a,s);var r=t.key+"-"+a.name;if(t.inserted[a.name]===void 0){var i=a;do t.insert(a===i?"."+r:"",i,t.sheet,!0),i=i.next;while(i!==void 0)}};function Rle(e){for(var t=0,a,s=0,r=e.length;r>=4;++s,r-=4)a=e.charCodeAt(s)&255|(e.charCodeAt(++s)&255)<<8|(e.charCodeAt(++s)&255)<<16|(e.charCodeAt(++s)&255)<<24,a=(a&65535)*1540483477+((a>>>16)*59797<<16),a^=a>>>24,t=(a&65535)*1540483477+((a>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(r){case 3:t^=(e.charCodeAt(s+2)&255)<<16;case 2:t^=(e.charCodeAt(s+1)&255)<<8;case 1:t^=e.charCodeAt(s)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var zle={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Fle=/[A-Z]|^ms/g,Ule=/_EMO_([^_]+?)_([^]*?)_EMO_/g,T9=function(t){return t.charCodeAt(1)===45},e$=function(t){return t!=null&&typeof t!="boolean"},KS=C9(function(e){return T9(e)?e:e.replace(Fle,"-$&").toLowerCase()}),t$=function(t,a){switch(t){case"animation":case"animationName":if(typeof a=="string")return a.replace(Ule,function(s,r,i){return wo={name:r,styles:i,next:wo},r})}return zle[t]!==1&&!T9(t)&&typeof a=="number"&&a!==0?a+"px":a};function pp(e,t,a){if(a==null)return"";var s=a;if(s.__emotion_styles!==void 0)return s;switch(typeof a){case"boolean":return"";case"object":{var r=a;if(r.anim===1)return wo={name:r.name,styles:r.styles,next:wo},r.name;var i=a;if(i.styles!==void 0){var o=i.next;if(o!==void 0)for(;o!==void 0;)wo={name:o.name,styles:o.styles,next:wo},o=o.next;var l=i.styles+";";return l}return Ble(e,t,a)}case"function":{if(e!==void 0){var c=wo,u=a(e);return wo=c,pp(e,t,u)}break}}var d=a;if(t==null)return d;var f=t[d];return f!==void 0?f:d}function Ble(e,t,a){var s="";if(Array.isArray(a))for(var r=0;r<a.length;r++)s+=pp(e,t,a[r])+";";else for(var i in a){var o=a[i];if(typeof o!="object"){var l=o;t!=null&&t[l]!==void 0?s+=i+"{"+t[l]+"}":e$(l)&&(s+=KS(i)+":"+t$(i,l)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&(t==null||t[o[0]]===void 0))for(var c=0;c<o.length;c++)e$(o[c])&&(s+=KS(i)+":"+t$(i,o[c])+";");else{var u=pp(e,t,o);switch(i){case"animation":case"animationName":{s+=KS(i)+":"+u+";";break}default:s+=i+"{"+u+"}"}}}return s}var n$=/label:\s*([^\s;{]+)\s*(;|$)/g,wo;function yN(e,t,a){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var s=!0,r="";wo=void 0;var i=e[0];if(i==null||i.raw===void 0)s=!1,r+=pp(a,t,i);else{var o=i;r+=o[0]}for(var l=1;l<e.length;l++)if(r+=pp(a,t,e[l]),s){var c=i;r+=c[l]}n$.lastIndex=0;for(var u="",d;(d=n$.exec(r))!==null;)u+="-"+d[1];var f=Rle(r)+u;return{name:f,styles:r,next:wo}}var Hle=function(t){return t()},qle=_u.useInsertionEffect?_u.useInsertionEffect:!1,k9=qle||Hle,E9=h.createContext(typeof HTMLElement<"u"?Dle({key:"css"}):null);E9.Provider;var L9=function(t){return h.forwardRef(function(a,s){var r=h.useContext(E9);return t(a,r,s)})},PL=h.createContext({}),DL={}.hasOwnProperty,ak="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Wle=function(t,a){var s={};for(var r in a)DL.call(a,r)&&(s[r]=a[r]);return s[ak]=t,s},Gle=function(t){var a=t.cache,s=t.serialized,r=t.isStringTag;return LL(a,s,r),k9(function(){return A9(a,s,r)}),null},Vle=L9(function(e,t,a){var s=e.css;typeof s=="string"&&t.registered[s]!==void 0&&(s=t.registered[s]);var r=e[ak],i=[s],o="";typeof e.className=="string"?o=_9(t.registered,i,e.className):e.className!=null&&(o=e.className+" ");var l=yN(i,void 0,h.useContext(PL));o+=t.key+"-"+l.name;var c={};for(var u in e)DL.call(e,u)&&u!=="css"&&u!==ak&&(c[u]=e[u]);return c.className=o,a&&(c.ref=a),h.createElement(h.Fragment,null,h.createElement(Gle,{cache:t,serialized:l,isStringTag:typeof r=="string"}),h.createElement(r,c))}),Yle=Vle,a$=function(t,a){var s=arguments;if(a==null||!DL.call(a,"css"))return h.createElement.apply(void 0,s);var r=s.length,i=new Array(r);i[0]=Yle,i[1]=Wle(t,a);for(var o=2;o<r;o++)i[o]=s[o];return h.createElement.apply(null,i)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(a$||(a$={}));function OL(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return yN(t)}function gx(){var e=OL.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var Qle=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Kle=C9(function(e){return Qle.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),Xle=Kle,Zle=function(t){return t!=="theme"},s$=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?Xle:Zle},r$=function(t,a,s){var r;if(a){var i=a.shouldForwardProp;r=t.__emotion_forwardProp&&i?function(o){return t.__emotion_forwardProp(o)&&i(o)}:i}return typeof r!="function"&&s&&(r=t.__emotion_forwardProp),r},Jle=function(t){var a=t.cache,s=t.serialized,r=t.isStringTag;return LL(a,s,r),k9(function(){return A9(a,s,r)}),null},ece=function e(t,a){var s=t.__emotion_real===t,r=s&&t.__emotion_base||t,i,o;a!==void 0&&(i=a.label,o=a.target);var l=r$(t,a,s),c=l||s$(r),u=!c("as");return function(){var d=arguments,f=s&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(i!==void 0&&f.push("label:"+i+";"),d[0]==null||d[0].raw===void 0)f.push.apply(f,d);else{var p=d[0];f.push(p[0]);for(var x=d.length,y=1;y<x;y++)f.push(d[y],p[y])}var N=L9(function(v,j,w){var S=u&&v.as||r,_="",E=[],T=v;if(v.theme==null){T={};for(var A in v)T[A]=v[A];T.theme=h.useContext(PL)}typeof v.className=="string"?_=_9(j.registered,E,v.className):v.className!=null&&(_=v.className+" ");var L=yN(f.concat(E),j.registered,T);_+=j.key+"-"+L.name,o!==void 0&&(_+=" "+o);var M=u&&l===void 0?s$(S):c,F={};for(var $ in v)u&&$==="as"||M($)&&(F[$]=v[$]);return F.className=_,w&&(F.ref=w),h.createElement(h.Fragment,null,h.createElement(Jle,{cache:j,serialized:L,isStringTag:typeof S=="string"}),h.createElement(S,F))});return N.displayName=i!==void 0?i:"Styled("+(typeof r=="string"?r:r.displayName||r.name||"Component")+")",N.defaultProps=t.defaultProps,N.__emotion_real=N,N.__emotion_base=r,N.__emotion_styles=f,N.__emotion_forwardProp=l,Object.defineProperty(N,"toString",{value:function(){return"."+o}}),N.withComponent=function(v,j){var w=e(v,Ye({},a,j,{shouldForwardProp:r$(N,j,!0)}));return w.apply(void 0,f)},N}},tce=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],sk=ece.bind(null);tce.forEach(function(e){sk[e]=sk(e)});function nce(e,t){return sk(e,t)}function ace(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const i$=[];function yu(e){return i$[0]=e,yN(i$)}const sce=e=>{const t=Object.keys(e).map(a=>({key:a,val:e[a]}))||[];return t.sort((a,s)=>a.val-s.val),t.reduce((a,s)=>({...a,[s.key]:s.val}),{})};function rce(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:a="px",step:s=5,...r}=e,i=sce(t),o=Object.keys(i);function l(p){return`@media (min-width:${typeof t[p]=="number"?t[p]:p}${a})`}function c(p){return`@media (max-width:${(typeof t[p]=="number"?t[p]:p)-s/100}${a})`}function u(p,x){const y=o.indexOf(x);return`@media (min-width:${typeof t[p]=="number"?t[p]:p}${a}) and (max-width:${(y!==-1&&typeof t[o[y]]=="number"?t[o[y]]:x)-s/100}${a})`}function d(p){return o.indexOf(p)+1<o.length?u(p,o[o.indexOf(p)+1]):l(p)}function f(p){const x=o.indexOf(p);return x===0?l(o[1]):x===o.length-1?c(o[x]):u(p,o[o.indexOf(p)+1]).replace("@media","@media not all and")}return{keys:o,values:i,up:l,down:c,between:u,only:d,not:f,unit:a,...r}}const ice={borderRadius:4};function P9(e=8,t=_L({spacing:e})){if(e.mui)return e;const a=(...s)=>(s.length===0?[1]:s).map(i=>{const o=t(i);return typeof o=="number"?`${o}px`:o}).join(" ");return a.mui=!0,a}function oce(e,t){const a=this;if(a.vars){if(!a.colorSchemes?.[e]||typeof a.getColorSchemeSelector!="function")return{};let s=a.getColorSchemeSelector(e);return s==="&"?t:((s.includes("data-")||s.includes("."))&&(s=`*:where(${s.replace(/\s*&$/,"")}) &`),{[s]:t})}return a.palette.mode===e?t:{}}function ML(e={},...t){const{breakpoints:a={},palette:s={},spacing:r,shape:i={},...o}=e,l=rce(a),c=P9(r);let u=Rr({breakpoints:l,direction:"ltr",components:{},palette:{mode:"light",...s},spacing:c,shape:{...ice,...i}},o);return u=goe(u),u.applyStyles=oce,u=t.reduce((d,f)=>Rr(d,f),u),u.unstable_sxConfig={...fx,...o?.unstable_sxConfig},u.unstable_sx=function(f){return _f({sx:f,theme:this})},u}function lce(e){return Object.keys(e).length===0}function D9(e=null){const t=h.useContext(PL);return!t||lce(t)?e:t}const cce=ML();function O9(e=cce){return D9(e)}const o$=e=>e,dce=()=>{let e=o$;return{configure(t){e=t},generate(t){return e(t)},reset(){e=o$}}},uce=dce(),mce={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Ya(e,t,a="Mui"){const s=mce[t];return s?`${a}-${s}`:`${uce.generate(e)}-${t}`}function Aa(e,t,a="Mui"){const s={};return t.forEach(r=>{s[r]=Ya(e,r,a)}),s}function M9(e){const{variants:t,...a}=e,s={variants:t,style:yu(a),isProcessed:!0};return s.style===a||t&&t.forEach(r=>{typeof r.style!="function"&&(r.style=yu(r.style))}),s}const fce=ML();function ev(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function cu(e,t){return t&&e&&typeof e=="object"&&e.styles&&!e.styles.startsWith("@layer")&&(e.styles=`@layer ${t}{${String(e.styles)}}`),e}function hce(e){return e?(t,a)=>a[e]:null}function gce(e,t,a){e.theme=yce(e.theme)?a:e.theme[t]||e.theme}function tv(e,t,a){const s=typeof t=="function"?t(e):t;if(Array.isArray(s))return s.flatMap(r=>tv(e,r,a));if(Array.isArray(s?.variants)){let r;if(s.isProcessed)r=a?cu(s.style,a):s.style;else{const{variants:i,...o}=s;r=a?cu(yu(o),a):o}return I9(e,s.variants,[r],a)}return s?.isProcessed?a?cu(yu(s.style),a):s.style:a?cu(yu(s),a):s}function I9(e,t,a=[],s=void 0){let r;e:for(let i=0;i<t.length;i+=1){const o=t[i];if(typeof o.props=="function"){if(r??={...e,...e.ownerState,ownerState:e.ownerState},!o.props(r))continue}else for(const l in o.props)if(e[l]!==o.props[l]&&e.ownerState?.[l]!==o.props[l])continue e;typeof o.style=="function"?(r??={...e,...e.ownerState,ownerState:e.ownerState},a.push(s?cu(yu(o.style(r)),s):o.style(r))):a.push(s?cu(yu(o.style),s):o.style)}return a}function pce(e={}){const{themeId:t,defaultTheme:a=fce,rootShouldForwardProp:s=ev,slotShouldForwardProp:r=ev}=e;function i(l){gce(l,t,a)}return(l,c={})=>{ace(l,T=>T.filter(A=>A!==_f));const{name:u,slot:d,skipVariantsResolver:f,skipSx:p,overridesResolver:x=hce(vce(d)),...y}=c,N=u&&u.startsWith("Mui")||d?"components":"custom",v=f!==void 0?f:d&&d!=="Root"&&d!=="root"||!1,j=p||!1;let w=ev;d==="Root"||d==="root"?w=s:d?w=r:bce(l)&&(w=void 0);const S=nce(l,{shouldForwardProp:w,label:xce(),...y}),_=T=>{if(T.__emotion_real===T)return T;if(typeof T=="function")return function(L){return tv(L,T,L.theme.modularCssLayers?N:void 0)};if(jo(T)){const A=M9(T);return function(M){return A.variants?tv(M,A,M.theme.modularCssLayers?N:void 0):M.theme.modularCssLayers?cu(A.style,N):A.style}}return T},E=(...T)=>{const A=[],L=T.map(_),M=[];if(A.push(i),u&&x&&M.push(function(q){const U=q.theme.components?.[u]?.styleOverrides;if(!U)return null;const V={};for(const Z in U)V[Z]=tv(q,U[Z],q.theme.modularCssLayers?"theme":void 0);return x(q,V)}),u&&!v&&M.push(function(q){const U=q.theme?.components?.[u]?.variants;return U?I9(q,U,[],q.theme.modularCssLayers?"theme":void 0):null}),j||M.push(_f),Array.isArray(L[0])){const D=L.shift(),q=new Array(A.length).fill(""),G=new Array(M.length).fill("");let U;U=[...q,...D,...G],U.raw=[...q,...D.raw,...G],A.unshift(U)}const F=[...A,...L,...M],$=S(...F);return l.muiName&&($.muiName=l.muiName),$};return S.withConfig&&(E.withConfig=S.withConfig),E}}function xce(e,t){return void 0}function yce(e){for(const t in e)return!1;return!0}function bce(e){return typeof e=="string"&&e.charCodeAt(0)>96}function vce(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}function Pu(e,t,a=!1){const s={...t};for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const i=r;if(i==="components"||i==="slots")s[i]={...e[i],...s[i]};else if(i==="componentsProps"||i==="slotProps"){const o=e[i],l=t[i];if(!l)s[i]=o||{};else if(!o)s[i]=l;else{s[i]={...l};for(const c in o)if(Object.prototype.hasOwnProperty.call(o,c)){const u=c;s[i][u]=Pu(o[u],l[u],a)}}}else i==="className"&&a&&t.className?s.className=Mt(e?.className,t?.className):i==="style"&&a&&t.style?s.style={...e?.style,...t?.style}:s[i]===void 0&&(s[i]=e[i])}return s}function $9(e){const{theme:t,name:a,props:s}=e;return!t||!t.components||!t.components[a]||!t.components[a].defaultProps?s:Pu(t.components[a].defaultProps,s)}function wce({props:e,name:t,defaultTheme:a,themeId:s}){let r=O9(a);return r=r[s]||r,$9({theme:r,name:t,props:e})}const is=typeof window<"u"?h.useLayoutEffect:h.useEffect;function Nce(e,t,a,s,r){const[i,o]=h.useState(()=>r&&a?a(e).matches:s?s(e).matches:t);return is(()=>{if(!a)return;const l=a(e),c=()=>{o(l.matches)};return c(),l.addEventListener("change",c),()=>{l.removeEventListener("change",c)}},[e,a]),i}const jce={..._u},R9=jce.useSyncExternalStore;function Cce(e,t,a,s,r){const i=h.useCallback(()=>t,[t]),o=h.useMemo(()=>{if(r&&a)return()=>a(e).matches;if(s!==null){const{matches:d}=s(e);return()=>d}return i},[i,e,s,r,a]),[l,c]=h.useMemo(()=>{if(a===null)return[i,()=>()=>{}];const d=a(e);return[()=>d.matches,f=>(d.addEventListener("change",f),()=>{d.removeEventListener("change",f)})]},[i,a,e]);return R9(c,l,o)}function z9(e={}){const{themeId:t}=e;return function(s,r={}){let i=D9();i&&t&&(i=i[t]||i);const o=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:l=!1,matchMedia:c=o?window.matchMedia:null,ssrMatchMedia:u=null,noSsr:d=!1}=$9({name:"MuiUseMediaQuery",props:r,theme:i});let f=typeof s=="function"?s(i):s;return f=f.replace(/^@media( ?)/m,""),f.includes("print")&&console.warn(["MUI: You have provided a `print` query to the `useMediaQuery` hook.","Using the print media query to modify print styles can lead to unexpected results.","Consider using the `displayPrint` field in the `sx` prop instead.","More information about `displayPrint` on our docs: https://mui.com/system/display/#display-in-print."].join(`
`)),(R9!==void 0?Cce:Nce)(f,l,c,u,d)}}z9();function Sce(e,t=Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,a))}function IL(e,t=0,a=1){return Sce(e,t,a)}function _ce(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let a=e.match(t);return a&&a[0].length===1&&(a=a.map(s=>s+s)),a?`rgb${a.length===4?"a":""}(${a.map((s,r)=>r<3?parseInt(s,16):Math.round(parseInt(s,16)/255*1e3)/1e3).join(", ")})`:""}function dd(e){if(e.type)return e;if(e.charAt(0)==="#")return dd(_ce(e));const t=e.indexOf("("),a=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(a))throw new Error(Lu(9,e));let s=e.substring(t+1,e.length-1),r;if(a==="color"){if(s=s.split(" "),r=s.shift(),s.length===4&&s[3].charAt(0)==="/"&&(s[3]=s[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(r))throw new Error(Lu(10,r))}else s=s.split(",");return s=s.map(i=>parseFloat(i)),{type:a,values:s,colorSpace:r}}const Ace=e=>{const t=dd(e);return t.values.slice(0,3).map((a,s)=>t.type.includes("hsl")&&s!==0?`${a}%`:a).join(" ")},Rg=(e,t)=>{try{return Ace(e)}catch{return e}};function bN(e){const{type:t,colorSpace:a}=e;let{values:s}=e;return t.includes("rgb")?s=s.map((r,i)=>i<3?parseInt(r,10):r):t.includes("hsl")&&(s[1]=`${s[1]}%`,s[2]=`${s[2]}%`),t.includes("color")?s=`${a} ${s.join(" ")}`:s=`${s.join(", ")}`,`${t}(${s})`}function F9(e){e=dd(e);const{values:t}=e,a=t[0],s=t[1]/100,r=t[2]/100,i=s*Math.min(r,1-r),o=(u,d=(u+a/30)%12)=>r-i*Math.max(Math.min(d-3,9-d,1),-1);let l="rgb";const c=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return e.type==="hsla"&&(l+="a",c.push(t[3])),bN({type:l,values:c})}function rk(e){e=dd(e);let t=e.type==="hsl"||e.type==="hsla"?dd(F9(e)).values:e.values;return t=t.map(a=>(e.type!=="color"&&(a/=255),a<=.03928?a/12.92:((a+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function Tce(e,t){const a=rk(e),s=rk(t);return(Math.max(a,s)+.05)/(Math.min(a,s)+.05)}function U9(e,t){return e=dd(e),t=IL(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,bN(e)}function Gd(e,t,a){try{return U9(e,t)}catch{return e}}function vN(e,t){if(e=dd(e),t=IL(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let a=0;a<3;a+=1)e.values[a]*=1-t;return bN(e)}function On(e,t,a){try{return vN(e,t)}catch{return e}}function wN(e,t){if(e=dd(e),t=IL(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let a=0;a<3;a+=1)e.values[a]+=(255-e.values[a])*t;else if(e.type.includes("color"))for(let a=0;a<3;a+=1)e.values[a]+=(1-e.values[a])*t;return bN(e)}function Mn(e,t,a){try{return wN(e,t)}catch{return e}}function kce(e,t=.15){return rk(e)>.5?vN(e,t):wN(e,t)}function zy(e,t,a){try{return kce(e,t)}catch{return e}}const Ece=h.createContext(),px=()=>h.useContext(Ece)??!1,Lce=h.createContext(void 0);function Pce(e){const{theme:t,name:a,props:s}=e;if(!t||!t.components||!t.components[a])return s;const r=t.components[a];return r.defaultProps?Pu(r.defaultProps,s,t.components.mergeClassNameAndStyle):!r.styleOverrides&&!r.variants?Pu(r,s,t.components.mergeClassNameAndStyle):s}function Dce({props:e,name:t}){const a=h.useContext(Lce);return Pce({props:e,name:t,theme:{components:a}})}let l$=0;function Oce(e){const[t,a]=h.useState(e),s=e||t;return h.useEffect(()=>{t==null&&(l$+=1,a(`mui-${l$}`))},[t]),s}const Mce={..._u},c$=Mce.useId;function NN(e){if(c$!==void 0){const t=c$();return e??t}return Oce(e)}const d$={theme:void 0};function Ice(e){let t,a;return function(r){let i=t;return(i===void 0||r.theme!==a)&&(d$.theme=r.theme,i=M9(e(d$)),t=i,a=r.theme),i}}function $ce(e=""){function t(...s){if(!s.length)return"";const r=s[0];return typeof r=="string"&&!r.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${r}${t(...s.slice(1))})`:`, ${r}`}return(s,...r)=>`var(--${e?`${e}-`:""}${s}${t(...r)})`}const u$=(e,t,a,s=[])=>{let r=e;t.forEach((i,o)=>{o===t.length-1?Array.isArray(r)?r[Number(i)]=a:r&&typeof r=="object"&&(r[i]=a):r&&typeof r=="object"&&(r[i]||(r[i]=s.includes(i)?[]:{}),r=r[i])})},Rce=(e,t,a)=>{function s(r,i=[],o=[]){Object.entries(r).forEach(([l,c])=>{(!a||a&&!a([...i,l]))&&c!=null&&(typeof c=="object"&&Object.keys(c).length>0?s(c,[...i,l],Array.isArray(c)?[...o,l]:o):t([...i,l],c,o))})}s(e)},zce=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(s=>e.includes(s))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function XS(e,t){const{prefix:a,shouldSkipGeneratingVar:s}=t||{},r={},i={},o={};return Rce(e,(l,c,u)=>{if((typeof c=="string"||typeof c=="number")&&(!s||!s(l,c))){const d=`--${a?`${a}-`:""}${l.join("-")}`,f=zce(l,c);Object.assign(r,{[d]:f}),u$(i,l,`var(${d})`,u),u$(o,l,`var(${d}, ${f})`,u)}},l=>l[0]==="vars"),{css:r,vars:i,varsWithDefaults:o}}function Fce(e,t={}){const{getSelector:a=j,disableCssColorScheme:s,colorSchemeSelector:r,enableContrastVars:i}=t,{colorSchemes:o={},components:l,defaultColorScheme:c="light",...u}=e,{vars:d,css:f,varsWithDefaults:p}=XS(u,t);let x=p;const y={},{[c]:N,...v}=o;if(Object.entries(v||{}).forEach(([_,E])=>{const{vars:T,css:A,varsWithDefaults:L}=XS(E,t);x=Rr(x,L),y[_]={css:A,vars:T}}),N){const{css:_,vars:E,varsWithDefaults:T}=XS(N,t);x=Rr(x,T),y[c]={css:_,vars:E}}function j(_,E){let T=r;if(r==="class"&&(T=".%s"),r==="data"&&(T="[data-%s]"),r?.startsWith("data-")&&!r.includes("%s")&&(T=`[${r}="%s"]`),_){if(T==="media")return e.defaultColorScheme===_?":root":{[`@media (prefers-color-scheme: ${o[_]?.palette?.mode||_})`]:{":root":E}};if(T)return e.defaultColorScheme===_?`:root, ${T.replace("%s",String(_))}`:T.replace("%s",String(_))}return":root"}return{vars:x,generateThemeVars:()=>{let _={...d};return Object.entries(y).forEach(([,{vars:E}])=>{_=Rr(_,E)}),_},generateStyleSheets:()=>{const _=[],E=e.defaultColorScheme||"light";function T(M,F){Object.keys(F).length&&_.push(typeof M=="string"?{[M]:{...F}}:M)}T(a(void 0,{...f}),f);const{[E]:A,...L}=y;if(A){const{css:M}=A,F=o[E]?.palette?.mode,$=!s&&F?{colorScheme:F,...M}:{...M};T(a(E,{...$}),$)}return Object.entries(L).forEach(([M,{css:F}])=>{const $=o[M]?.palette?.mode,D=!s&&$?{colorScheme:$,...F}:{...F};T(a(M,{...D}),D)}),i&&_.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),_}}}function Uce(e){return function(a){return e==="media"?`@media (prefers-color-scheme: ${a})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${a}"] &`:e==="class"?`.${a} &`:e==="data"?`[data-${a}] &`:`${e.replace("%s",a)} &`:"&"}}const xp={black:"#000",white:"#fff"},Bce={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Um={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},Bm={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},mg={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},Hm={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},qm={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Wm={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function B9(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:xp.white,default:xp.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const H9=B9();function q9(){return{text:{primary:xp.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:xp.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const ik=q9();function m$(e,t,a,s){const r=s.light||s,i=s.dark||s*1.5;e[t]||(e.hasOwnProperty(a)?e[t]=e[a]:t==="light"?e.light=wN(e.main,r):t==="dark"&&(e.dark=vN(e.main,i)))}function f$(e,t,a,s,r){const i=r.light||r,o=r.dark||r*1.5;t[a]||(t.hasOwnProperty(s)?t[a]=t[s]:a==="light"?t.light=`color-mix(in ${e}, ${t.main}, #fff ${(i*100).toFixed(0)}%)`:a==="dark"&&(t.dark=`color-mix(in ${e}, ${t.main}, #000 ${(o*100).toFixed(0)}%)`))}function Hce(e="light"){return e==="dark"?{main:Hm[200],light:Hm[50],dark:Hm[400]}:{main:Hm[700],light:Hm[400],dark:Hm[800]}}function qce(e="light"){return e==="dark"?{main:Um[200],light:Um[50],dark:Um[400]}:{main:Um[500],light:Um[300],dark:Um[700]}}function Wce(e="light"){return e==="dark"?{main:Bm[500],light:Bm[300],dark:Bm[700]}:{main:Bm[700],light:Bm[400],dark:Bm[800]}}function Gce(e="light"){return e==="dark"?{main:qm[400],light:qm[300],dark:qm[700]}:{main:qm[700],light:qm[500],dark:qm[900]}}function Vce(e="light"){return e==="dark"?{main:Wm[400],light:Wm[300],dark:Wm[700]}:{main:Wm[800],light:Wm[500],dark:Wm[900]}}function Yce(e="light"){return e==="dark"?{main:mg[400],light:mg[300],dark:mg[700]}:{main:"#ed6c02",light:mg[500],dark:mg[900]}}function Qce(e){return`oklch(from ${e} var(--__l) 0 h / var(--__a))`}function $L(e){const{mode:t="light",contrastThreshold:a=3,tonalOffset:s=.2,colorSpace:r,...i}=e,o=e.primary||Hce(t),l=e.secondary||qce(t),c=e.error||Wce(t),u=e.info||Gce(t),d=e.success||Vce(t),f=e.warning||Yce(t);function p(v){return r?Qce(v):Tce(v,ik.text.primary)>=a?ik.text.primary:H9.text.primary}const x=({color:v,name:j,mainShade:w=500,lightShade:S=300,darkShade:_=700})=>{if(v={...v},!v.main&&v[w]&&(v.main=v[w]),!v.hasOwnProperty("main"))throw new Error(Lu(11,j?` (${j})`:"",w));if(typeof v.main!="string")throw new Error(Lu(12,j?` (${j})`:"",JSON.stringify(v.main)));return r?(f$(r,v,"light",S,s),f$(r,v,"dark",_,s)):(m$(v,"light",S,s),m$(v,"dark",_,s)),v.contrastText||(v.contrastText=p(v.main)),v};let y;return t==="light"?y=B9():t==="dark"&&(y=q9()),Rr({common:{...xp},mode:t,primary:x({color:o,name:"primary"}),secondary:x({color:l,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:x({color:c,name:"error"}),warning:x({color:f,name:"warning"}),info:x({color:u,name:"info"}),success:x({color:d,name:"success"}),grey:Bce,contrastThreshold:a,getContrastText:p,augmentColor:x,tonalOffset:s,...y},i)}function Kce(e){const t={};return Object.entries(e).forEach(s=>{const[r,i]=s;typeof i=="object"&&(t[r]=`${i.fontStyle?`${i.fontStyle} `:""}${i.fontVariant?`${i.fontVariant} `:""}${i.fontWeight?`${i.fontWeight} `:""}${i.fontStretch?`${i.fontStretch} `:""}${i.fontSize||""}${i.lineHeight?`/${i.lineHeight} `:""}${i.fontFamily||""}`)}),t}function Xce(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function Zce(e){return Math.round(e*1e5)/1e5}const h$={textTransform:"uppercase"},g$='"Roboto", "Helvetica", "Arial", sans-serif';function Jce(e,t){const{fontFamily:a=g$,fontSize:s=14,fontWeightLight:r=300,fontWeightRegular:i=400,fontWeightMedium:o=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:u,pxToRem:d,...f}=typeof t=="function"?t(e):t,p=s/14,x=d||(v=>`${v/c*p}rem`),y=(v,j,w,S,_)=>({fontFamily:a,fontWeight:v,fontSize:x(j),lineHeight:w,...a===g$?{letterSpacing:`${Zce(S/j)}em`}:{},..._,...u}),N={h1:y(r,96,1.167,-1.5),h2:y(r,60,1.2,-.5),h3:y(i,48,1.167,0),h4:y(i,34,1.235,.25),h5:y(i,24,1.334,0),h6:y(o,20,1.6,.15),subtitle1:y(i,16,1.75,.15),subtitle2:y(o,14,1.57,.1),body1:y(i,16,1.5,.15),body2:y(i,14,1.43,.15),button:y(o,14,1.75,.4,h$),caption:y(i,12,1.66,.4),overline:y(i,12,2.66,1,h$),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Rr({htmlFontSize:c,pxToRem:x,fontFamily:a,fontSize:s,fontWeightLight:r,fontWeightRegular:i,fontWeightMedium:o,fontWeightBold:l,...N},f,{clone:!1})}const ede=.2,tde=.14,nde=.12;function la(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${ede})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${tde})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${nde})`].join(",")}const ade=["none",la(0,2,1,-1,0,1,1,0,0,1,3,0),la(0,3,1,-2,0,2,2,0,0,1,5,0),la(0,3,3,-2,0,3,4,0,0,1,8,0),la(0,2,4,-1,0,4,5,0,0,1,10,0),la(0,3,5,-1,0,5,8,0,0,1,14,0),la(0,3,5,-1,0,6,10,0,0,1,18,0),la(0,4,5,-2,0,7,10,1,0,2,16,1),la(0,5,5,-3,0,8,10,1,0,3,14,2),la(0,5,6,-3,0,9,12,1,0,3,16,2),la(0,6,6,-3,0,10,14,1,0,4,18,3),la(0,6,7,-4,0,11,15,1,0,4,20,3),la(0,7,8,-4,0,12,17,2,0,5,22,4),la(0,7,8,-4,0,13,19,2,0,5,24,4),la(0,7,9,-4,0,14,21,2,0,5,26,4),la(0,8,9,-5,0,15,22,2,0,6,28,5),la(0,8,10,-5,0,16,24,2,0,6,30,5),la(0,8,11,-5,0,17,26,2,0,6,32,5),la(0,9,11,-5,0,18,28,2,0,7,34,6),la(0,9,12,-6,0,19,29,2,0,7,36,6),la(0,10,13,-6,0,20,31,3,0,8,38,7),la(0,10,13,-6,0,21,33,3,0,8,40,7),la(0,10,14,-6,0,22,35,3,0,8,42,7),la(0,11,14,-7,0,23,36,3,0,9,44,8),la(0,11,15,-7,0,24,38,3,0,9,46,8)],sde={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},rde={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function p$(e){return`${Math.round(e)}ms`}function ide(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function ode(e){const t={...sde,...e.easing},a={...rde,...e.duration};return{getAutoHeightDuration:ide,create:(r=["all"],i={})=>{const{duration:o=a.standard,easing:l=t.easeInOut,delay:c=0,...u}=i;return(Array.isArray(r)?r:[r]).map(d=>`${d} ${typeof o=="string"?o:p$(o)} ${l} ${typeof c=="string"?c:p$(c)}`).join(",")},...e,easing:t,duration:a}}const lde={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function cde(e){return jo(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function W9(e={}){const t={...e};function a(s){const r=Object.entries(s);for(let i=0;i<r.length;i++){const[o,l]=r[i];!cde(l)||o.startsWith("unstable_")?delete s[o]:jo(l)&&(s[o]={...l},a(s[o]))}}return a(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function x$(e){return typeof e=="number"?`${(e*100).toFixed(0)}%`:`calc((${e}) * 100%)`}const dde=e=>{if(!Number.isNaN(+e))return+e;const t=e.match(/\d*\.?\d+/g);if(!t)return 0;let a=0;for(let s=0;s<t.length;s+=1)a+=+t[s];return a};function ude(e){Object.assign(e,{alpha(t,a){const s=this||e;return s.colorSpace?`oklch(from ${t} l c h / ${typeof a=="string"?`calc(${a})`:a})`:s.vars?`rgba(${t.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")} / ${typeof a=="string"?`calc(${a})`:a})`:U9(t,dde(a))},lighten(t,a){const s=this||e;return s.colorSpace?`color-mix(in ${s.colorSpace}, ${t}, #fff ${x$(a)})`:wN(t,a)},darken(t,a){const s=this||e;return s.colorSpace?`color-mix(in ${s.colorSpace}, ${t}, #000 ${x$(a)})`:vN(t,a)}})}function ok(e={},...t){const{breakpoints:a,mixins:s={},spacing:r,palette:i={},transitions:o={},typography:l={},shape:c,colorSpace:u,...d}=e;if(e.vars&&e.generateThemeVars===void 0)throw new Error(Lu(20));const f=$L({...i,colorSpace:u}),p=ML(e);let x=Rr(p,{mixins:Xce(p.breakpoints,s),palette:f,shadows:ade.slice(),typography:Jce(f,l),transitions:ode(o),zIndex:{...lde}});return x=Rr(x,d),x=t.reduce((y,N)=>Rr(y,N),x),x.unstable_sxConfig={...fx,...d?.unstable_sxConfig},x.unstable_sx=function(N){return _f({sx:N,theme:this})},x.toRuntimeSource=W9,ude(x),x}function mde(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const fde=[...Array(25)].map((e,t)=>{if(t===0)return"none";const a=mde(t);return`linear-gradient(rgba(255 255 255 / ${a}), rgba(255 255 255 / ${a}))`});function G9(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function V9(e){return e==="dark"?fde:[]}function hde(e){const{palette:t={mode:"light"},opacity:a,overlays:s,colorSpace:r,...i}=e,o=$L({...t,colorSpace:r});return{palette:o,opacity:{...G9(o.mode),...a},overlays:s||V9(o.mode),...i}}function gde(e){return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!e[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const pde=e=>[...[...Array(25)].map((t,a)=>`--${e?`${e}-`:""}overlays-${a}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],xde=e=>(t,a)=>{const s=e.rootSelector||":root",r=e.colorSchemeSelector;let i=r;if(r==="class"&&(i=".%s"),r==="data"&&(i="[data-%s]"),r?.startsWith("data-")&&!r.includes("%s")&&(i=`[${r}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const o={};return pde(e.cssVarPrefix).forEach(l=>{o[l]=a[l],delete a[l]}),i==="media"?{[s]:a,"@media (prefers-color-scheme: dark)":{[s]:o}}:i?{[i.replace("%s",t)]:o,[`${s}, ${i.replace("%s",t)}`]:a}:{[s]:{...a,...o}}}if(i&&i!=="media")return`${s}, ${i.replace("%s",String(t))}`}else if(t){if(i==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[s]:a}};if(i)return i.replace("%s",String(t))}return s};function yde(e,t){t.forEach(a=>{e[a]||(e[a]={})})}function ht(e,t,a){!e[t]&&a&&(e[t]=a)}function zg(e){return typeof e!="string"||!e.startsWith("hsl")?e:F9(e)}function hl(e,t){`${t}Channel`in e||(e[`${t}Channel`]=Rg(zg(e[t])))}function bde(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const io=e=>{try{return e()}catch{}},vde=(e="mui")=>$ce(e);function ZS(e,t,a,s,r){if(!a)return;a=a===!0?{}:a;const i=r==="dark"?"dark":"light";if(!s){t[r]=hde({...a,palette:{mode:i,...a?.palette},colorSpace:e});return}const{palette:o,...l}=ok({...s,palette:{mode:i,...a?.palette},colorSpace:e});return t[r]={...a,palette:o,opacity:{...G9(i),...a?.opacity},overlays:a?.overlays||V9(i)},l}function wde(e={},...t){const{colorSchemes:a={light:!0},defaultColorScheme:s,disableCssColorScheme:r=!1,cssVarPrefix:i="mui",nativeColor:o=!1,shouldSkipGeneratingVar:l=gde,colorSchemeSelector:c=a.light&&a.dark?"media":void 0,rootSelector:u=":root",...d}=e,f=Object.keys(a)[0],p=s||(a.light&&f!=="light"?"light":f),x=vde(i),{[p]:y,light:N,dark:v,...j}=a,w={...j};let S=y;if((p==="dark"&&!("dark"in a)||p==="light"&&!("light"in a))&&(S=!0),!S)throw new Error(Lu(21,p));let _;o&&(_="oklch");const E=ZS(_,w,S,d,p);N&&!w.light&&ZS(_,w,N,void 0,"light"),v&&!w.dark&&ZS(_,w,v,void 0,"dark");let T={defaultColorScheme:p,...E,cssVarPrefix:i,colorSchemeSelector:c,rootSelector:u,getCssVar:x,colorSchemes:w,font:{...Kce(E.typography),...E.font},spacing:bde(d.spacing)};Object.keys(T.colorSchemes).forEach($=>{const D=T.colorSchemes[$].palette,q=U=>{const V=U.split("-"),Z=V[1],Y=V[2];return x(U,D[Z][Y])};D.mode==="light"&&(ht(D.common,"background","#fff"),ht(D.common,"onBackground","#000")),D.mode==="dark"&&(ht(D.common,"background","#000"),ht(D.common,"onBackground","#fff"));function G(U,V,Z){if(_){let Y;return U===Gd&&(Y=`transparent ${((1-Z)*100).toFixed(0)}%`),U===On&&(Y=`#000 ${(Z*100).toFixed(0)}%`),U===Mn&&(Y=`#fff ${(Z*100).toFixed(0)}%`),`color-mix(in ${_}, ${V}, ${Y})`}return U(V,Z)}if(yde(D,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),D.mode==="light"){ht(D.Alert,"errorColor",G(On,D.error.light,.6)),ht(D.Alert,"infoColor",G(On,D.info.light,.6)),ht(D.Alert,"successColor",G(On,D.success.light,.6)),ht(D.Alert,"warningColor",G(On,D.warning.light,.6)),ht(D.Alert,"errorFilledBg",q("palette-error-main")),ht(D.Alert,"infoFilledBg",q("palette-info-main")),ht(D.Alert,"successFilledBg",q("palette-success-main")),ht(D.Alert,"warningFilledBg",q("palette-warning-main")),ht(D.Alert,"errorFilledColor",io(()=>D.getContrastText(D.error.main))),ht(D.Alert,"infoFilledColor",io(()=>D.getContrastText(D.info.main))),ht(D.Alert,"successFilledColor",io(()=>D.getContrastText(D.success.main))),ht(D.Alert,"warningFilledColor",io(()=>D.getContrastText(D.warning.main))),ht(D.Alert,"errorStandardBg",G(Mn,D.error.light,.9)),ht(D.Alert,"infoStandardBg",G(Mn,D.info.light,.9)),ht(D.Alert,"successStandardBg",G(Mn,D.success.light,.9)),ht(D.Alert,"warningStandardBg",G(Mn,D.warning.light,.9)),ht(D.Alert,"errorIconColor",q("palette-error-main")),ht(D.Alert,"infoIconColor",q("palette-info-main")),ht(D.Alert,"successIconColor",q("palette-success-main")),ht(D.Alert,"warningIconColor",q("palette-warning-main")),ht(D.AppBar,"defaultBg",q("palette-grey-100")),ht(D.Avatar,"defaultBg",q("palette-grey-400")),ht(D.Button,"inheritContainedBg",q("palette-grey-300")),ht(D.Button,"inheritContainedHoverBg",q("palette-grey-A100")),ht(D.Chip,"defaultBorder",q("palette-grey-400")),ht(D.Chip,"defaultAvatarColor",q("palette-grey-700")),ht(D.Chip,"defaultIconColor",q("palette-grey-700")),ht(D.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),ht(D.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),ht(D.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),ht(D.LinearProgress,"primaryBg",G(Mn,D.primary.main,.62)),ht(D.LinearProgress,"secondaryBg",G(Mn,D.secondary.main,.62)),ht(D.LinearProgress,"errorBg",G(Mn,D.error.main,.62)),ht(D.LinearProgress,"infoBg",G(Mn,D.info.main,.62)),ht(D.LinearProgress,"successBg",G(Mn,D.success.main,.62)),ht(D.LinearProgress,"warningBg",G(Mn,D.warning.main,.62)),ht(D.Skeleton,"bg",_?G(Gd,D.text.primary,.11):`rgba(${q("palette-text-primaryChannel")} / 0.11)`),ht(D.Slider,"primaryTrack",G(Mn,D.primary.main,.62)),ht(D.Slider,"secondaryTrack",G(Mn,D.secondary.main,.62)),ht(D.Slider,"errorTrack",G(Mn,D.error.main,.62)),ht(D.Slider,"infoTrack",G(Mn,D.info.main,.62)),ht(D.Slider,"successTrack",G(Mn,D.success.main,.62)),ht(D.Slider,"warningTrack",G(Mn,D.warning.main,.62));const U=_?G(On,D.background.default,.6825):zy(D.background.default,.8);ht(D.SnackbarContent,"bg",U),ht(D.SnackbarContent,"color",io(()=>_?ik.text.primary:D.getContrastText(U))),ht(D.SpeedDialAction,"fabHoverBg",zy(D.background.paper,.15)),ht(D.StepConnector,"border",q("palette-grey-400")),ht(D.StepContent,"border",q("palette-grey-400")),ht(D.Switch,"defaultColor",q("palette-common-white")),ht(D.Switch,"defaultDisabledColor",q("palette-grey-100")),ht(D.Switch,"primaryDisabledColor",G(Mn,D.primary.main,.62)),ht(D.Switch,"secondaryDisabledColor",G(Mn,D.secondary.main,.62)),ht(D.Switch,"errorDisabledColor",G(Mn,D.error.main,.62)),ht(D.Switch,"infoDisabledColor",G(Mn,D.info.main,.62)),ht(D.Switch,"successDisabledColor",G(Mn,D.success.main,.62)),ht(D.Switch,"warningDisabledColor",G(Mn,D.warning.main,.62)),ht(D.TableCell,"border",G(Mn,G(Gd,D.divider,1),.88)),ht(D.Tooltip,"bg",G(Gd,D.grey[700],.92))}if(D.mode==="dark"){ht(D.Alert,"errorColor",G(Mn,D.error.light,.6)),ht(D.Alert,"infoColor",G(Mn,D.info.light,.6)),ht(D.Alert,"successColor",G(Mn,D.success.light,.6)),ht(D.Alert,"warningColor",G(Mn,D.warning.light,.6)),ht(D.Alert,"errorFilledBg",q("palette-error-dark")),ht(D.Alert,"infoFilledBg",q("palette-info-dark")),ht(D.Alert,"successFilledBg",q("palette-success-dark")),ht(D.Alert,"warningFilledBg",q("palette-warning-dark")),ht(D.Alert,"errorFilledColor",io(()=>D.getContrastText(D.error.dark))),ht(D.Alert,"infoFilledColor",io(()=>D.getContrastText(D.info.dark))),ht(D.Alert,"successFilledColor",io(()=>D.getContrastText(D.success.dark))),ht(D.Alert,"warningFilledColor",io(()=>D.getContrastText(D.warning.dark))),ht(D.Alert,"errorStandardBg",G(On,D.error.light,.9)),ht(D.Alert,"infoStandardBg",G(On,D.info.light,.9)),ht(D.Alert,"successStandardBg",G(On,D.success.light,.9)),ht(D.Alert,"warningStandardBg",G(On,D.warning.light,.9)),ht(D.Alert,"errorIconColor",q("palette-error-main")),ht(D.Alert,"infoIconColor",q("palette-info-main")),ht(D.Alert,"successIconColor",q("palette-success-main")),ht(D.Alert,"warningIconColor",q("palette-warning-main")),ht(D.AppBar,"defaultBg",q("palette-grey-900")),ht(D.AppBar,"darkBg",q("palette-background-paper")),ht(D.AppBar,"darkColor",q("palette-text-primary")),ht(D.Avatar,"defaultBg",q("palette-grey-600")),ht(D.Button,"inheritContainedBg",q("palette-grey-800")),ht(D.Button,"inheritContainedHoverBg",q("palette-grey-700")),ht(D.Chip,"defaultBorder",q("palette-grey-700")),ht(D.Chip,"defaultAvatarColor",q("palette-grey-300")),ht(D.Chip,"defaultIconColor",q("palette-grey-300")),ht(D.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),ht(D.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),ht(D.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),ht(D.LinearProgress,"primaryBg",G(On,D.primary.main,.5)),ht(D.LinearProgress,"secondaryBg",G(On,D.secondary.main,.5)),ht(D.LinearProgress,"errorBg",G(On,D.error.main,.5)),ht(D.LinearProgress,"infoBg",G(On,D.info.main,.5)),ht(D.LinearProgress,"successBg",G(On,D.success.main,.5)),ht(D.LinearProgress,"warningBg",G(On,D.warning.main,.5)),ht(D.Skeleton,"bg",_?G(Gd,D.text.primary,.13):`rgba(${q("palette-text-primaryChannel")} / 0.13)`),ht(D.Slider,"primaryTrack",G(On,D.primary.main,.5)),ht(D.Slider,"secondaryTrack",G(On,D.secondary.main,.5)),ht(D.Slider,"errorTrack",G(On,D.error.main,.5)),ht(D.Slider,"infoTrack",G(On,D.info.main,.5)),ht(D.Slider,"successTrack",G(On,D.success.main,.5)),ht(D.Slider,"warningTrack",G(On,D.warning.main,.5));const U=_?G(Mn,D.background.default,.985):zy(D.background.default,.98);ht(D.SnackbarContent,"bg",U),ht(D.SnackbarContent,"color",io(()=>_?H9.text.primary:D.getContrastText(U))),ht(D.SpeedDialAction,"fabHoverBg",zy(D.background.paper,.15)),ht(D.StepConnector,"border",q("palette-grey-600")),ht(D.StepContent,"border",q("palette-grey-600")),ht(D.Switch,"defaultColor",q("palette-grey-300")),ht(D.Switch,"defaultDisabledColor",q("palette-grey-600")),ht(D.Switch,"primaryDisabledColor",G(On,D.primary.main,.55)),ht(D.Switch,"secondaryDisabledColor",G(On,D.secondary.main,.55)),ht(D.Switch,"errorDisabledColor",G(On,D.error.main,.55)),ht(D.Switch,"infoDisabledColor",G(On,D.info.main,.55)),ht(D.Switch,"successDisabledColor",G(On,D.success.main,.55)),ht(D.Switch,"warningDisabledColor",G(On,D.warning.main,.55)),ht(D.TableCell,"border",G(On,G(Gd,D.divider,1),.68)),ht(D.Tooltip,"bg",G(Gd,D.grey[700],.92))}hl(D.background,"default"),hl(D.background,"paper"),hl(D.common,"background"),hl(D.common,"onBackground"),hl(D,"divider"),Object.keys(D).forEach(U=>{const V=D[U];U!=="tonalOffset"&&V&&typeof V=="object"&&(V.main&&ht(D[U],"mainChannel",Rg(zg(V.main))),V.light&&ht(D[U],"lightChannel",Rg(zg(V.light))),V.dark&&ht(D[U],"darkChannel",Rg(zg(V.dark))),V.contrastText&&ht(D[U],"contrastTextChannel",Rg(zg(V.contrastText))),U==="text"&&(hl(D[U],"primary"),hl(D[U],"secondary")),U==="action"&&(V.active&&hl(D[U],"active"),V.selected&&hl(D[U],"selected")))})}),T=t.reduce(($,D)=>Rr($,D),T);const A={prefix:i,disableCssColorScheme:r,shouldSkipGeneratingVar:l,getSelector:xde(T),enableContrastVars:o},{vars:L,generateThemeVars:M,generateStyleSheets:F}=Fce(T,A);return T.vars=L,Object.entries(T.colorSchemes[T.defaultColorScheme]).forEach(([$,D])=>{T[$]=D}),T.generateThemeVars=M,T.generateStyleSheets=F,T.generateSpacing=function(){return P9(d.spacing,_L(this))},T.getColorSchemeSelector=Uce(c),T.spacing=T.generateSpacing(),T.shouldSkipGeneratingVar=l,T.unstable_sxConfig={...fx,...d?.unstable_sxConfig},T.unstable_sx=function(D){return _f({sx:D,theme:this})},T.toRuntimeSource=W9,T}function y$(e,t,a){e.colorSchemes&&a&&(e.colorSchemes[t]={...a!==!0&&a,palette:$L({...a===!0?{}:a.palette,mode:t})})}function Nde(e={},...t){const{palette:a,cssVariables:s=!1,colorSchemes:r=a?void 0:{light:!0},defaultColorScheme:i=a?.mode,...o}=e,l=i||"light",c=r?.[l],u={...r,...a?{[l]:{...typeof c!="boolean"&&c,palette:a}}:void 0};if(s===!1){if(!("colorSchemes"in e))return ok(e,...t);let d=a;"palette"in e||u[l]&&(u[l]!==!0?d=u[l].palette:l==="dark"&&(d={mode:"dark"}));const f=ok({...e,palette:d},...t);return f.defaultColorScheme=l,f.colorSchemes=u,f.palette.mode==="light"&&(f.colorSchemes.light={...u.light!==!0&&u.light,palette:f.palette},y$(f,"dark",u.dark)),f.palette.mode==="dark"&&(f.colorSchemes.dark={...u.dark!==!0&&u.dark,palette:f.palette},y$(f,"light",u.light)),f}return!a&&!("light"in u)&&l==="light"&&(u.light=!0),wde({...o,colorSchemes:u,defaultColorScheme:l,...typeof s!="boolean"&&s},...t)}const RL=Nde(),jN="$$material";function Wo(){const e=O9(RL);return e[jN]||e}function jde(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const Y9=e=>jde(e)&&e!=="classes",dn=pce({themeId:jN,defaultTheme:RL,rootShouldForwardProp:Y9});function Cde(){return sle}function Nd(e){return Dce(e)}function Ro(...e){const t=h.useRef(void 0),a=h.useCallback(s=>{const r=e.map(i=>{if(i==null)return null;if(typeof i=="function"){const o=i,l=o(s);return typeof l=="function"?l:()=>{o(null)}}return i.current=s,()=>{i.current=null}});return()=>{r.forEach(i=>i?.())}},e);return h.useMemo(()=>e.every(s=>s==null)?null:s=>{t.current&&(t.current(),t.current=void 0),s!=null&&(t.current=a(s))},e)}function Sde(e){return typeof e=="string"}function Q9(e,t,a){return e===void 0||Sde(e)?t:{...t,ownerState:{...t.ownerState,...a}}}function K9(e,t,a){return typeof e=="function"?e(t,a):e}function _de(e,t=[]){if(e===void 0)return{};const a={};return Object.keys(e).filter(s=>s.match(/^on[A-Z]/)&&typeof e[s]=="function"&&!t.includes(s)).forEach(s=>{a[s]=e[s]}),a}function b$(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(a=>!(a.match(/^on[A-Z]/)&&typeof e[a]=="function")).forEach(a=>{t[a]=e[a]}),t}function X9(e){const{getSlotProps:t,additionalProps:a,externalSlotProps:s,externalForwardedProps:r,className:i}=e;if(!t){const x=Mt(a?.className,i,r?.className,s?.className),y={...a?.style,...r?.style,...s?.style},N={...a,...r,...s};return x.length>0&&(N.className=x),Object.keys(y).length>0&&(N.style=y),{props:N,internalRef:void 0}}const o=_de({...r,...s}),l=b$(s),c=b$(r),u=t(o),d=Mt(u?.className,a?.className,i,r?.className,s?.className),f={...u?.style,...a?.style,...r?.style,...s?.style},p={...u,...a,...c,...l};return d.length>0&&(p.className=d),Object.keys(f).length>0&&(p.style=f),{props:p,internalRef:u.ref}}function v$(e,t){const{className:a,elementType:s,ownerState:r,externalForwardedProps:i,internalForwardedProps:o,shouldForwardComponentProp:l=!1,...c}=t,{component:u,slots:d={[e]:void 0},slotProps:f={[e]:void 0},...p}=i,x=d[e]||s,y=K9(f[e],r),{props:{component:N,...v},internalRef:j}=X9({className:a,...c,externalForwardedProps:e==="root"?p:void 0,externalSlotProps:y}),w=Ro(j,y?.ref,t.ref),S=e==="root"?N||u:N,_=Q9(x,{...e==="root"&&!u&&!d[e]&&o,...e!=="root"&&!d[e]&&o,...v,...S&&!l&&{as:S},...S&&l&&{component:S},ref:w},r);return[x,_]}function pn(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function lk(e,t){return lk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},lk(e,t)}function Z9(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,lk(e,t)}const w$={disabled:!1},vv=xt.createContext(null);var Ade=function(t){return t.scrollTop},Fg="unmounted",Xd="exited",Zd="entering",of="entered",ck="exiting",Jl=(function(e){Z9(t,e);function t(s,r){var i;i=e.call(this,s,r)||this;var o=r,l=o&&!o.isMounting?s.enter:s.appear,c;return i.appearStatus=null,s.in?l?(c=Xd,i.appearStatus=Zd):c=of:s.unmountOnExit||s.mountOnEnter?c=Fg:c=Xd,i.state={status:c},i.nextCallback=null,i}t.getDerivedStateFromProps=function(r,i){var o=r.in;return o&&i.status===Fg?{status:Xd}:null};var a=t.prototype;return a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(r){var i=null;if(r!==this.props){var o=this.state.status;this.props.in?o!==Zd&&o!==of&&(i=Zd):(o===Zd||o===of)&&(i=ck)}this.updateStatus(!1,i)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var r=this.props.timeout,i,o,l;return i=o=l=r,r!=null&&typeof r!="number"&&(i=r.exit,o=r.enter,l=r.appear!==void 0?r.appear:o),{exit:i,enter:o,appear:l}},a.updateStatus=function(r,i){if(r===void 0&&(r=!1),i!==null)if(this.cancelNextCallback(),i===Zd){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:Oy.findDOMNode(this);o&&Ade(o)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Xd&&this.setState({status:Fg})},a.performEnter=function(r){var i=this,o=this.props.enter,l=this.context?this.context.isMounting:r,c=this.props.nodeRef?[l]:[Oy.findDOMNode(this),l],u=c[0],d=c[1],f=this.getTimeouts(),p=l?f.appear:f.enter;if(!r&&!o||w$.disabled){this.safeSetState({status:of},function(){i.props.onEntered(u)});return}this.props.onEnter(u,d),this.safeSetState({status:Zd},function(){i.props.onEntering(u,d),i.onTransitionEnd(p,function(){i.safeSetState({status:of},function(){i.props.onEntered(u,d)})})})},a.performExit=function(){var r=this,i=this.props.exit,o=this.getTimeouts(),l=this.props.nodeRef?void 0:Oy.findDOMNode(this);if(!i||w$.disabled){this.safeSetState({status:Xd},function(){r.props.onExited(l)});return}this.props.onExit(l),this.safeSetState({status:ck},function(){r.props.onExiting(l),r.onTransitionEnd(o.exit,function(){r.safeSetState({status:Xd},function(){r.props.onExited(l)})})})},a.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(r,i){i=this.setNextCallback(i),this.setState(r,i)},a.setNextCallback=function(r){var i=this,o=!0;return this.nextCallback=function(l){o&&(o=!1,i.nextCallback=null,r(l))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},a.onTransitionEnd=function(r,i){this.setNextCallback(i);var o=this.props.nodeRef?this.props.nodeRef.current:Oy.findDOMNode(this),l=r==null&&!this.props.addEndListener;if(!o||l){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var c=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],u=c[0],d=c[1];this.props.addEndListener(u,d)}r!=null&&setTimeout(this.nextCallback,r)},a.render=function(){var r=this.state.status;if(r===Fg)return null;var i=this.props,o=i.children;i.in,i.mountOnEnter,i.unmountOnExit,i.appear,i.enter,i.exit,i.timeout,i.addEndListener,i.onEnter,i.onEntering,i.onEntered,i.onExit,i.onExiting,i.onExited,i.nodeRef;var l=pn(i,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return xt.createElement(vv.Provider,{value:null},typeof o=="function"?o(r,l):xt.cloneElement(xt.Children.only(o),l))},t})(xt.Component);Jl.contextType=vv;Jl.propTypes={};function Gm(){}Jl.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Gm,onEntering:Gm,onEntered:Gm,onExit:Gm,onExiting:Gm,onExited:Gm};Jl.UNMOUNTED=Fg;Jl.EXITED=Xd;Jl.ENTERING=Zd;Jl.ENTERED=of;Jl.EXITING=ck;function Tde(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zL(e,t){var a=function(i){return t&&h.isValidElement(i)?t(i):i},s=Object.create(null);return e&&h.Children.map(e,function(r){return r}).forEach(function(r){s[r.key]=a(r)}),s}function kde(e,t){e=e||{},t=t||{};function a(d){return d in t?t[d]:e[d]}var s=Object.create(null),r=[];for(var i in e)i in t?r.length&&(s[i]=r,r=[]):r.push(i);var o,l={};for(var c in t){if(s[c])for(o=0;o<s[c].length;o++){var u=s[c][o];l[s[c][o]]=a(u)}l[c]=a(c)}for(o=0;o<r.length;o++)l[r[o]]=a(r[o]);return l}function du(e,t,a){return a[t]!=null?a[t]:e.props[t]}function Ede(e,t){return zL(e.children,function(a){return h.cloneElement(a,{onExited:t.bind(null,a),in:!0,appear:du(a,"appear",e),enter:du(a,"enter",e),exit:du(a,"exit",e)})})}function Lde(e,t,a){var s=zL(e.children),r=kde(t,s);return Object.keys(r).forEach(function(i){var o=r[i];if(h.isValidElement(o)){var l=i in t,c=i in s,u=t[i],d=h.isValidElement(u)&&!u.props.in;c&&(!l||d)?r[i]=h.cloneElement(o,{onExited:a.bind(null,o),in:!0,exit:du(o,"exit",e),enter:du(o,"enter",e)}):!c&&l&&!d?r[i]=h.cloneElement(o,{in:!1}):c&&l&&h.isValidElement(u)&&(r[i]=h.cloneElement(o,{onExited:a.bind(null,o),in:u.props.in,exit:du(o,"exit",e),enter:du(o,"enter",e)}))}}),r}var Pde=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},Dde={component:"div",childFactory:function(t){return t}},FL=(function(e){Z9(t,e);function t(s,r){var i;i=e.call(this,s,r)||this;var o=i.handleExited.bind(Tde(i));return i.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},i}var a=t.prototype;return a.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},a.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(r,i){var o=i.children,l=i.handleExited,c=i.firstRender;return{children:c?Ede(r,l):Lde(r,o,l),firstRender:!1}},a.handleExited=function(r,i){var o=zL(this.props.children);r.key in o||(r.props.onExited&&r.props.onExited(i),this.mounted&&this.setState(function(l){var c=Ye({},l.children);return delete c[r.key],{children:c}}))},a.render=function(){var r=this.props,i=r.component,o=r.childFactory,l=pn(r,["component","childFactory"]),c=this.state.contextValue,u=Pde(this.state.children).map(o);return delete l.appear,delete l.enter,delete l.exit,i===null?xt.createElement(vv.Provider,{value:c},u):xt.createElement(vv.Provider,{value:c},xt.createElement(i,l,u))},t})(xt.Component);FL.propTypes={};FL.defaultProps=Dde;function J9(e){return parseInt(h.version,10)>=19?e?.props?.ref||null:e?.ref||null}const Ode=e=>e.scrollTop;function N$(e,t){const{timeout:a,easing:s,style:r={}}=e;return{duration:r.transitionDuration??(typeof a=="number"?a:a[t.mode]||0),easing:r.transitionTimingFunction??(typeof s=="object"?s[t.mode]:s),delay:r.transitionDelay}}const Mde={entering:{opacity:1},entered:{opacity:1}},Ide=h.forwardRef(function(t,a){const s=Wo(),r={enter:s.transitions.duration.enteringScreen,exit:s.transitions.duration.leavingScreen},{addEndListener:i,appear:o=!0,children:l,easing:c,in:u,onEnter:d,onEntered:f,onEntering:p,onExit:x,onExited:y,onExiting:N,style:v,timeout:j=r,TransitionComponent:w=Jl,...S}=t,_=h.useRef(null),E=Ro(_,J9(l),a),T=G=>U=>{if(G){const V=_.current;U===void 0?G(V):G(V,U)}},A=T(p),L=T((G,U)=>{Ode(G);const V=N$({style:v,timeout:j,easing:c},{mode:"enter"});G.style.webkitTransition=s.transitions.create("opacity",V),G.style.transition=s.transitions.create("opacity",V),d&&d(G,U)}),M=T(f),F=T(N),$=T(G=>{const U=N$({style:v,timeout:j,easing:c},{mode:"exit"});G.style.webkitTransition=s.transitions.create("opacity",U),G.style.transition=s.transitions.create("opacity",U),x&&x(G)}),D=T(y),q=G=>{i&&i(_.current,G)};return n.jsx(w,{appear:o,in:u,nodeRef:_,onEnter:L,onEntered:M,onEntering:A,onExit:$,onExited:D,onExiting:F,addEndListener:q,timeout:j,...S,children:(G,{ownerState:U,...V})=>h.cloneElement(l,{style:{opacity:0,visibility:G==="exited"&&!u?"hidden":void 0,...Mde[G],...v,...l.props.style},ref:E,...V})})});function $de(e){return Ya("MuiBackdrop",e)}Aa("MuiBackdrop",["root","invisible"]);const Rde=e=>{const{classes:t,invisible:a}=e;return Va({root:["root",a&&"invisible"]},$de,t)},zde=dn("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),Fde=h.forwardRef(function(t,a){const s=Nd({props:t,name:"MuiBackdrop"}),{children:r,className:i,component:o="div",invisible:l=!1,open:c,components:u={},componentsProps:d={},slotProps:f={},slots:p={},TransitionComponent:x,transitionDuration:y,...N}=s,v={...s,component:o,invisible:l},j=Rde(v),w={transition:x,root:u.Root,...p},S={...d,...f},_={component:o,slots:w,slotProps:S},[E,T]=v$("root",{elementType:zde,externalForwardedProps:_,className:Mt(j.root,i),ownerState:v}),[A,L]=v$("transition",{elementType:Ide,externalForwardedProps:_,ownerState:v});return n.jsx(A,{in:c,timeout:y,...N,...L,children:n.jsx(E,{"aria-hidden":!0,...T,classes:j,ref:a,children:r})})}),Du=Ice;function Ude(e){return typeof e.main=="string"}function Bde(e,t=[]){if(!Ude(e))return!1;for(const a of t)if(!e.hasOwnProperty(a)||typeof e[a]!="string")return!1;return!0}function yp(e=[]){return([,t])=>t&&Bde(t,e)}function Hde(e){return Ya("MuiCircularProgress",e)}Aa("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","track","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Di=44,dk=gx`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,uk=gx`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,qde=typeof dk!="string"?OL`
        animation: ${dk} 1.4s linear infinite;
      `:null,Wde=typeof uk!="string"?OL`
        animation: ${uk} 1.4s ease-in-out infinite;
      `:null,Gde=e=>{const{classes:t,variant:a,color:s,disableShrink:r}=e,i={root:["root",a,`color${Wn(s)}`],svg:["svg"],track:["track"],circle:["circle",`circle${Wn(a)}`,r&&"circleDisableShrink"]};return Va(i,Hde,t)},Vde=dn("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[a.variant],t[`color${Wn(a.color)}`]]}})(Du(({theme:e})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("transform")}},{props:{variant:"indeterminate"},style:qde||{animation:`${dk} 1.4s linear infinite`}},...Object.entries(e.palette).filter(yp()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}}))]}))),Yde=dn("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),Qde=dn("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.circle,t[`circle${Wn(a.variant)}`],a.disableShrink&&t.circleDisableShrink]}})(Du(({theme:e})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink,style:Wde||{animation:`${uk} 1.4s ease-in-out infinite`}}]}))),Kde=dn("circle",{name:"MuiCircularProgress",slot:"Track"})(Du(({theme:e})=>({stroke:"currentColor",opacity:(e.vars||e).palette.action.activatedOpacity}))),UL=h.forwardRef(function(t,a){const s=Nd({props:t,name:"MuiCircularProgress"}),{className:r,color:i="primary",disableShrink:o=!1,enableTrackSlot:l=!1,size:c=40,style:u,thickness:d=3.6,value:f=0,variant:p="indeterminate",...x}=s,y={...s,color:i,disableShrink:o,size:c,thickness:d,value:f,variant:p,enableTrackSlot:l},N=Gde(y),v={},j={},w={};if(p==="determinate"){const S=2*Math.PI*((Di-d)/2);v.strokeDasharray=S.toFixed(3),w["aria-valuenow"]=Math.round(f),v.strokeDashoffset=`${((100-f)/100*S).toFixed(3)}px`,j.transform="rotate(-90deg)"}return n.jsx(Vde,{className:Mt(N.root,r),style:{width:c,height:c,...j,...u},ownerState:y,ref:a,role:"progressbar",...w,...x,children:n.jsxs(Yde,{className:N.svg,ownerState:y,viewBox:`${Di/2} ${Di/2} ${Di} ${Di}`,children:[l?n.jsx(Kde,{className:N.track,ownerState:y,cx:Di,cy:Di,r:(Di-d)/2,fill:"none",strokeWidth:d,"aria-hidden":"true"}):null,n.jsx(Qde,{className:N.circle,style:v,ownerState:y,cx:Di,cy:Di,r:(Di-d)/2,fill:"none",strokeWidth:d})]})})});function eq(e){return n.jsx(Fde,{sx:t=>({color:"#fff",zIndex:t.zIndex.drawer+1}),open:e,children:n.jsx(UL,{color:"inherit"})})}var Ss={},Fy={},j$;function Xde(){if(j$)return Fy;j$=1,Object.defineProperty(Fy,"__esModule",{value:!0});function e(t,a){return t.reduce((s,r)=>{const i=String(r[a]);return s[i]||(s[i]=[]),s[i].push(r),s},{})}return Fy.default=e,Fy}var Uy={},C$;function Zde(){if(C$)return Uy;C$=1,Object.defineProperty(Uy,"__esModule",{value:!0});function e(t,a){return t.replace(/{([^{}]*)}/g,(s,r)=>{const i=a[r];return typeof i=="string"||typeof i=="number"?i.toString():s})}return Uy.default=e,Uy}var By={},S$;function Jde(){if(S$)return By;S$=1,Object.defineProperty(By,"__esModule",{value:!0});const e=[{countryNameEn:"Andorra",countryNameLocal:"Andorra",countryCode:"AD",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"ca",officialLanguageNameEn:"Catalan, Valencian",officialLanguageNameLocal:"Catal, Valenci",countryCallingCode:"376",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Afghanistan",countryNameLocal:"     ,   ",countryCode:"AF",currencyCode:"AFN",currencyNameEn:"Afghan afghani",tinType:"",tinName:"",officialLanguageCode:"fa",officialLanguageNameEn:"Persian",officialLanguageNameLocal:"",countryCallingCode:"93",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Antigua and Barbuda",countryNameLocal:"Antigua and Barbuda",countryCode:"AG",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1268",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Anguilla",countryNameLocal:"Anguilla",countryCode:"AI",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1264",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Albania",countryNameLocal:"Shqipria",countryCode:"AL",currencyCode:"ALL",currencyNameEn:"Albanian lek",tinType:"NIPT",tinName:"Numri i Identifikimit pr Personin e Tatueshm",officialLanguageCode:"sq",officialLanguageNameEn:"Albanian",officialLanguageNameLocal:"Shqip",countryCallingCode:"355",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Armenia",countryNameLocal:"",countryCode:"AM",currencyCode:"AMD",currencyNameEn:"Armenian dram",tinType:"",tinName:"",officialLanguageCode:"hy",officialLanguageNameEn:"Armenian",officialLanguageNameLocal:"",countryCallingCode:"374",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Angola",countryNameLocal:"Angola",countryCode:"AO",currencyCode:"AOA",currencyNameEn:"Angolan kwanza",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"244",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Antarctica",countryNameLocal:"Antarctica, Antrtico, Antarctique, ",countryCode:"AQ",currencyCode:"",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"672",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Argentina",countryNameLocal:"Argentina",countryCode:"AR",currencyCode:"ARS",currencyNameEn:"Argentine peso",tinType:"CUIT",tinName:"Cdigo nico de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"54",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"American Samoa",countryNameLocal:"American Samoa",countryCode:"AS",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1684",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Austria",countryNameLocal:"sterreich",countryCode:"AT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"UID",tinName:"Umsatzsteuer-Identifikationsnummer",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"43",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Australia",countryNameLocal:"Australia",countryCode:"AU",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"ABN",tinName:"Australian Business Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"61",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Aruba",countryNameLocal:"Aruba",countryCode:"AW",currencyCode:"AWG",currencyNameEn:"Aruban florin",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"297",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"land Islands",countryNameLocal:"land",countryCode:"AX",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"sv",officialLanguageNameEn:"Swedish",officialLanguageNameLocal:"Svenska",countryCallingCode:"358",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Azerbaijan",countryNameLocal:"Azrbaycan",countryCode:"AZ",currencyCode:"AZN",currencyNameEn:"Azerbaijani manat",tinType:"",tinName:"",officialLanguageCode:"az",officialLanguageNameEn:"Azerbaijani",officialLanguageNameLocal:"azrbaycan dili",countryCallingCode:"994",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Bosnia and Herzegovina",countryNameLocal:"Bosna i Hercegovina",countryCode:"BA",currencyCode:"BAM",currencyNameEn:"Bosnia and Herzegovina convertible mark",tinType:"",tinName:"",officialLanguageCode:"bs",officialLanguageNameEn:"Bosnian",officialLanguageNameLocal:"bosanski jezik",countryCallingCode:"387",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Barbados",countryNameLocal:"Barbados",countryCode:"BB",currencyCode:"BBD",currencyNameEn:"Barbados dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1246",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bangladesh",countryNameLocal:" ",countryCode:"BD",currencyCode:"BDT",currencyNameEn:"Bangladeshi taka",tinType:"",tinName:"",officialLanguageCode:"bn",officialLanguageNameEn:"Bengali",officialLanguageNameLocal:"",countryCallingCode:"880",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Belgium",countryNameLocal:"Belgi, Belgique, Belgien",countryCode:"BE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"n TVABTW-nr Mwst-nr",tinName:"BTW identificatienummer / Numro de TVA",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"32",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Burkina Faso",countryNameLocal:"Burkina Faso",countryCode:"BF",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"226",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Bulgaria",countryNameLocal:"",countryCode:"BG",currencyCode:"BGN",currencyNameEn:"Bulgarian lev",tinType:" ",tinName:"   ",officialLanguageCode:"bg",officialLanguageNameEn:"Bulgarian",officialLanguageNameLocal:" ",countryCallingCode:"359",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Bahrain",countryNameLocal:"",countryCode:"BH",currencyCode:"BHD",currencyNameEn:"Bahraini dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"973",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Burundi",countryNameLocal:"Burundi",countryCode:"BI",currencyCode:"BIF",currencyNameEn:"Burundian franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"257",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Benin",countryNameLocal:"Bnin",countryCode:"BJ",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"229",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Saint Barthlemy",countryNameLocal:"Saint-Barthlemy",countryCode:"BL",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"590",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bermuda",countryNameLocal:"Bermuda",countryCode:"BM",currencyCode:"BMD",currencyNameEn:"Bermudian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1441",areaCodes:[],region:"North America",flag:""},{countryNameEn:"Brunei Darussalam",countryNameLocal:"Brunei Darussalam",countryCode:"BN",currencyCode:"BND",currencyNameEn:"Brunei dollar",tinType:"",tinName:"",officialLanguageCode:"ms",officialLanguageNameEn:"Malay",officialLanguageNameLocal:"Bahasa Melayu,  ",countryCallingCode:"673",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Bolivia (Plurinational State of)",countryNameLocal:"Bolivia, Bulibiya, Volvia, Wuliwya",countryCode:"BO",currencyCode:"BOP",currencyNameEn:"",tinType:"NIT",tinName:"Nmero de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"591",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bonaire, Sint Eustatius and Saba",countryNameLocal:"Caribisch Nederland",countryCode:"BQ",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"5997",areaCodes:[],region:"Unknown",flag:""},{countryNameEn:"Brazil",countryNameLocal:"Brasil",countryCode:"BR",currencyCode:"BRL",currencyNameEn:"Brazilian real",tinType:"CNPJ",tinName:"Cadastro Nacional de Pessoa Jurdica",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"55",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bhutan",countryNameLocal:"",countryCode:"BT",currencyCode:"BTN",currencyNameEn:"Bhutanese ngultrum",tinType:"",tinName:"",officialLanguageCode:"dz",officialLanguageNameEn:"Dzongkha",officialLanguageNameLocal:"",countryCallingCode:"975",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Bouvet Island",countryNameLocal:"Bouvetya",countryCode:"BV",currencyCode:"NOK",currencyNameEn:"Norwegian krone",tinType:"",tinName:"",officialLanguageCode:"no",officialLanguageNameEn:"Norwegian",officialLanguageNameLocal:"Norsk",countryCallingCode:"47",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Botswana",countryNameLocal:"Botswana",countryCode:"BW",currencyCode:"BWP",currencyNameEn:"Botswana pula",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"267",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Belarus",countryNameLocal:"",countryCode:"BY",currencyCode:"BYR",currencyNameEn:"",tinType:" (UNP)",tinName:"  ",officialLanguageCode:"be",officialLanguageNameEn:"Belarusian",officialLanguageNameLocal:" ",countryCallingCode:"375",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Belize",countryNameLocal:"Belize",countryCode:"BZ",currencyCode:"BZD",currencyNameEn:"Belize dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"501",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Canada",countryNameLocal:"Canada",countryCode:"CA",currencyCode:"CAD",currencyNameEn:"Canadian dollar",tinType:"BN / NE",tinName:"Business Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:["403","587","780","825","236","250","604","672","778","204","431","506","709","782","902","226","249","289","343","365","416","437","519","548","613","647","705","807","905","367","418","438","450","514","579","581","819","873","306","639","867"],region:"North America",flag:""},{countryNameEn:"Switzerland",countryNameLocal:"Schweiz, Suisse, Svizzera, Svizra",countryCode:"CH",currencyCode:"CHF",currencyNameEn:"Swiss franc",tinType:"MWST/TVA/IVA",tinName:"Mehrwertsteuernummer",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"41",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Cte d'Ivoire",countryNameLocal:"Cte d'Ivoire",countryCode:"CI",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"225",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Chile",countryNameLocal:"Chile",countryCode:"CL",currencyCode:"CLP",currencyNameEn:"Chilean peso",tinType:"RUT",tinName:"Rol nico Tributario",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"56",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Cameroon",countryNameLocal:"Cameroun, Cameroon",countryCode:"CM",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"237",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"China",countryNameLocal:"",countryCode:"CN",currencyCode:"CNY",currencyNameEn:"Renminbi (Chinese) yuan",tinType:"",tinName:"",officialLanguageCode:"zh-hans",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"86",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Colombia",countryNameLocal:"Colombia",countryCode:"CO",currencyCode:"COP",currencyNameEn:"Colombian peso",tinType:"NIT",tinName:"Nmero De Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"57",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Costa Rica",countryNameLocal:"Costa Rica",countryCode:"CR",currencyCode:"CRC",currencyNameEn:"Costa Rican colon",tinType:"",tinName:"Cdula Jurdica",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"506",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Cuba",countryNameLocal:"Cuba",countryCode:"CU",currencyCode:"CUC",currencyNameEn:"Cuban convertible peso",tinType:"",tinName:"",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"53",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Cabo Verde",countryNameLocal:"Cabo Verde",countryCode:"CV",currencyCode:"CVE",currencyNameEn:"Cape Verdean escudo",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"238",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Curaao",countryNameLocal:"Curaao",countryCode:"CW",currencyCode:"ANG",currencyNameEn:"Netherlands Antillean guilder",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"599",areaCodes:[],region:"Unknown",flag:""},{countryNameEn:"Christmas Island",countryNameLocal:"Christmas Island",countryCode:"CX",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"61",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Cyprus",countryNameLocal:", Kibris",countryCode:"CY",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"  ...",officialLanguageCode:"el",officialLanguageNameEn:"Greek, Modern (1453-)",officialLanguageNameLocal:"",countryCallingCode:"357",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Germany",countryNameLocal:"Deutschland",countryCode:"DE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"USt-IdNr.",tinName:"Umsatzsteuer-Identifikationsnummer",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"49",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Djibouti",countryNameLocal:"Djibouti, , Jabuuti, Gabuutih",countryCode:"DJ",currencyCode:"DJF",currencyNameEn:"Djiboutian franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"253",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Denmark",countryNameLocal:"Danmark",countryCode:"DK",currencyCode:"DKK",currencyNameEn:"Danish krone",tinType:"CVR",tinName:"Momsregistreringsnummer",officialLanguageCode:"da",officialLanguageNameEn:"Danish",officialLanguageNameLocal:"dansk",countryCallingCode:"45",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Dominica",countryNameLocal:"Dominica",countryCode:"DM",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"767",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Algeria",countryNameLocal:"",countryCode:"DZ",currencyCode:"DZD",currencyNameEn:"Algerian dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"213",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Ecuador",countryNameLocal:"Ecuador",countryCode:"EC",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"RUC",tinName:"Nmero de Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"593",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Estonia",countryNameLocal:"Eesti",countryCode:"EE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"KMKR",tinName:"Kibemaksukohustuslase number",officialLanguageCode:"et",officialLanguageNameEn:"Estonian",officialLanguageNameLocal:"eesti, eesti keel",countryCallingCode:"372",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Egypt",countryNameLocal:"",countryCode:"EG",currencyCode:"EGP",currencyNameEn:"Egyptian pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"20",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Western Sahara",countryNameLocal:"Sahara Occidental",countryCode:"EH",currencyCode:"MAD",currencyNameEn:"Moroccan dirham",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"212",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Eritrea",countryNameLocal:", , Eritrea",countryCode:"ER",currencyCode:"ERN",currencyNameEn:"Eritrean nakfa",tinType:"",tinName:"",officialLanguageCode:"ti",officialLanguageNameEn:"Tigrinya",officialLanguageNameLocal:"",countryCallingCode:"291",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Spain",countryNameLocal:"Espaa",countryCode:"ES",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"NIF (CIF)",tinName:"Nmero de Identificacin Fiscal (formerly named Cdigo de Identificacin Fiscal)",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"34",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Ethiopia",countryNameLocal:", Itoophiyaa",countryCode:"ET",currencyCode:"ETB",currencyNameEn:"Ethiopian birr",tinType:"",tinName:"",officialLanguageCode:"am",officialLanguageNameEn:"Amharic",officialLanguageNameLocal:"",countryCallingCode:"251",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Finland",countryNameLocal:"Suomi",countryCode:"FI",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"ALV nro",tinName:"Arvonlisveronumero",officialLanguageCode:"fi",officialLanguageNameEn:"Finnish",officialLanguageNameLocal:"suomi, suomen kieli",countryCallingCode:"358",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Fiji",countryNameLocal:"Fiji",countryCode:"FJ",currencyCode:"FJD",currencyNameEn:"Fiji dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"679",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Micronesia (Federated States of)",countryNameLocal:"Micronesia",countryCode:"FM",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"691",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"France",countryNameLocal:"France",countryCode:"FR",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"n TVA",tinName:"Numro d'identification  la taxe sur la valeur ajoute / Numro de TVA intracommunautaire",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"33",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Gabon",countryNameLocal:"Gabon",countryCode:"GA",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"241",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Grenada",countryNameLocal:"Grenada",countryCode:"GD",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1473",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Georgia",countryNameLocal:"",countryCode:"GE",currencyCode:"GEL",currencyNameEn:"Georgian lari",tinType:"",tinName:"",officialLanguageCode:"ka",officialLanguageNameEn:"Georgian",officialLanguageNameLocal:"",countryCallingCode:"995",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"French Guiana",countryNameLocal:"Guyane franaise",countryCode:"GF",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"594",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Guernsey",countryNameLocal:"Guernsey",countryCode:"GG",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Ghana",countryNameLocal:"Ghana",countryCode:"GH",currencyCode:"GHS",currencyNameEn:"Ghanaian cedi",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"233",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Gibraltar",countryNameLocal:"Gibraltar",countryCode:"GI",currencyCode:"GIP",currencyNameEn:"Gibraltar pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"350",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Greenland",countryNameLocal:"Kalaallit Nunaat, Grnland",countryCode:"GL",currencyCode:"DKK",currencyNameEn:"Danish krone",tinType:"",tinName:"",officialLanguageCode:"kl",officialLanguageNameEn:"Kalaallisut, Greenlandic",officialLanguageNameLocal:"kalaallisut, kalaallit oqaasii",countryCallingCode:"299",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Guinea",countryNameLocal:"Guine",countryCode:"GN",currencyCode:"GNF",currencyNameEn:"Guinean franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"224",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Guadeloupe",countryNameLocal:"Guadeloupe",countryCode:"GP",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"590",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Equatorial Guinea",countryNameLocal:"Guiena ecuatorial, Guine quatoriale, Guin Equatorial",countryCode:"GQ",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"240",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Greece",countryNameLocal:"",countryCode:"GR",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"el",officialLanguageNameEn:"Greek, Modern (1453-)",officialLanguageNameLocal:"",countryCallingCode:"30",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"South Georgia and the South Sandwich Islands",countryNameLocal:"South Georgia and the South Sandwich Islands",countryCode:"GS",currencyCode:"",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"500",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Guatemala",countryNameLocal:"Guatemala",countryCode:"GT",currencyCode:"GTQ",currencyNameEn:"Guatemalan quetzal",tinType:"NIT",tinName:"Nmero de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"502",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Guam",countryNameLocal:"Guam, Guhn",countryCode:"GU",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Guinea-Bissau",countryNameLocal:"Guin-Bissau",countryCode:"GW",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"245",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Guyana",countryNameLocal:"Guyana",countryCode:"GY",currencyCode:"GYD",currencyNameEn:"Guyanese dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"592",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Hong Kong",countryNameLocal:", Hong Kong",countryCode:"HK",currencyCode:"HKD",currencyNameEn:"Hong Kong dollar",tinType:"",tinName:"",officialLanguageCode:"zh-hant",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"852",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Honduras",countryNameLocal:"Honduras",countryCode:"HN",currencyCode:"HNL",currencyNameEn:"Honduran lempira",tinType:"RTN",tinName:"Registro Tributario Nacional",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"504",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Croatia",countryNameLocal:"Hrvatska",countryCode:"HR",currencyCode:"HRK",currencyNameEn:"Croatian kuna",tinType:"PDV-ID; OIB",tinName:"PDV Id. Broj OIB",officialLanguageCode:"hr",officialLanguageNameEn:"Croatian",officialLanguageNameLocal:"hrvatski jezik",countryCallingCode:"385",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Haiti",countryNameLocal:"Hati, Ayiti",countryCode:"HT",currencyCode:"HTG",currencyNameEn:"Haitian gourde",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"509",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Hungary",countryNameLocal:"Magyarorszg",countryCode:"HU",currencyCode:"HUF",currencyNameEn:"Hungarian forint",tinType:"ANUM",tinName:"Kzssgi adszm",officialLanguageCode:"hu",officialLanguageNameEn:"Hungarian",officialLanguageNameLocal:"magyar",countryCallingCode:"36",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Indonesia",countryNameLocal:"Indonesia",countryCode:"ID",currencyCode:"IDR",currencyNameEn:"Indonesian rupiah",tinType:"NPWP",tinName:"Nomor Pokok Wajib Pajak",officialLanguageCode:"id",officialLanguageNameEn:"Indonesian",officialLanguageNameLocal:"Bahasa Indonesia",countryCallingCode:"62",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Ireland",countryNameLocal:"Ireland, ire",countryCode:"IE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"VAT or CBL",tinName:"Value added tax identification no.",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"353",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Israel",countryNameLocal:"",countryCode:"IL",currencyCode:"ILS",currencyNameEn:"Israeli new shekel",tinType:"",tinName:`'   / "`,officialLanguageCode:"he",officialLanguageNameEn:"Hebrew",officialLanguageNameLocal:"",countryCallingCode:"972",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Isle of Man",countryNameLocal:"Isle of Man",countryCode:"IM",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"India",countryNameLocal:", India",countryCode:"IN",currencyCode:"INR",currencyNameEn:"Indian rupee",tinType:"VAT TIN / CST TIN",tinName:"Value Added Tax - Taxpayer Identification Number / Central Sales Tax - Taxpayer Identification Number (In most states)Not applicable",officialLanguageCode:"hi",officialLanguageNameEn:"Hindi",officialLanguageNameLocal:", ",countryCallingCode:"91",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"British Indian Ocean Territories",countryNameLocal:"British Indian Ocean Territories",countryCode:"IO",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"246",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"Iraq",countryNameLocal:", Iraq",countryCode:"IQ",currencyCode:"IQD",currencyNameEn:"Iraqi dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"964",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Iran (Islamic Republic of)",countryNameLocal:"",countryCode:"IR",currencyCode:"IRR",currencyNameEn:"Iranian rial",tinType:"",tinName:"",officialLanguageCode:"fa",officialLanguageNameEn:"Persian",officialLanguageNameLocal:"",countryCallingCode:"98",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Iceland",countryNameLocal:"sland",countryCode:"IS",currencyCode:"ISK",currencyNameEn:"Icelandic krna",tinType:"VSK / VASK",tinName:"Virisaukaskattsnmer",officialLanguageCode:"is",officialLanguageNameEn:"Icelandic",officialLanguageNameLocal:"slenska",countryCallingCode:"354",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Italy",countryNameLocal:"Italia",countryCode:"IT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"P.IVA",tinName:"Partita IVA(IVA = Imposta sul Valore Aggiunto)",officialLanguageCode:"it",officialLanguageNameEn:"Italian",officialLanguageNameLocal:"Italiano",countryCallingCode:"39",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Jersey",countryNameLocal:"Jersey",countryCode:"JE",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Jamaica",countryNameLocal:"Jamaica",countryCode:"JM",currencyCode:"JMD",currencyNameEn:"Jamaican dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"876",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Jordan",countryNameLocal:"",countryCode:"JO",currencyCode:"JOD",currencyNameEn:"Jordanian dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"962",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Japan",countryNameLocal:"",countryCode:"JP",currencyCode:"JPY",currencyNameEn:"Japanese yen",tinType:"",tinName:"",officialLanguageCode:"ja",officialLanguageNameEn:"Japanese",officialLanguageNameLocal:" ()",countryCallingCode:"81",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Kenya",countryNameLocal:"Kenya",countryCode:"KE",currencyCode:"KES",currencyNameEn:"Kenyan shilling",tinType:"",tinName:"",officialLanguageCode:"sw",officialLanguageNameEn:"Swahili",officialLanguageNameLocal:"Kiswahili",countryCallingCode:"254",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Kyrgyzstan",countryNameLocal:", ",countryCode:"KG",currencyCode:"KGS",currencyNameEn:"Kyrgyzstani som",tinType:"",tinName:"",officialLanguageCode:"ky",officialLanguageNameEn:"Kirghiz, Kyrgyz",officialLanguageNameLocal:",  ",countryCallingCode:"996",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Cambodia",countryNameLocal:"",countryCode:"KH",currencyCode:"KHR",currencyNameEn:"Cambodian riel",tinType:"",tinName:"",officialLanguageCode:"km",officialLanguageNameEn:"Central Khmer",officialLanguageNameLocal:", , ",countryCallingCode:"855",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"North Korea",countryNameLocal:"",countryCode:"KP",currencyCode:"KPW",currencyNameEn:"North Korean won",tinType:"",tinName:"",officialLanguageCode:"ko",officialLanguageNameEn:"Korean",officialLanguageNameLocal:"",countryCallingCode:"850",areaCodes:[],region:"Asia",flag:""},{countryNameEn:"South Korea",countryNameLocal:"",countryCode:"KR",currencyCode:"KRW",currencyNameEn:"South Korean won",tinType:"",tinName:"",officialLanguageCode:"ko",officialLanguageNameEn:"Korean",officialLanguageNameLocal:"",countryCallingCode:"82",areaCodes:[],region:"Asia",flag:""},{countryNameEn:"Kiribati",countryNameLocal:"Kiribati",countryCode:"KI",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"686",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Saint Kitts and Nevis",countryNameLocal:"Saint Kitts and Nevis",countryCode:"KN",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1869",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Kuwait",countryNameLocal:"",countryCode:"KW",currencyCode:"KWD",currencyNameEn:"Kuwaiti dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"965",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Kazakhstan",countryNameLocal:", ",countryCode:"KZ",currencyCode:"KZT",currencyNameEn:"Kazakhstani tenge",tinType:"",tinName:"",officialLanguageCode:"kk",officialLanguageNameEn:"Kazakh",officialLanguageNameLocal:" ",countryCallingCode:"7",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Lebanon",countryNameLocal:", Liban",countryCode:"LB",currencyCode:"LBP",currencyNameEn:"Lebanese pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"961",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Saint Lucia",countryNameLocal:"Saint Lucia",countryCode:"LC",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1758",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Liechtenstein",countryNameLocal:"Liechtenstein",countryCode:"LI",currencyCode:"CHF",currencyNameEn:"Swiss franc",tinType:"",tinName:"",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"423",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Sri Lanka",countryNameLocal:" , ",countryCode:"LK",currencyCode:"LKR",currencyNameEn:"Sri Lankan rupee",tinType:"",tinName:"",officialLanguageCode:"si",officialLanguageNameEn:"Sinhala, Sinhalese",officialLanguageNameLocal:"",countryCallingCode:"94",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Liberia",countryNameLocal:"Liberia",countryCode:"LR",currencyCode:"LRD",currencyNameEn:"Liberian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"231",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Lesotho",countryNameLocal:"Lesotho",countryCode:"LS",currencyCode:"LSL",currencyNameEn:"Lesotho loti",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"266",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Lithuania",countryNameLocal:"Lietuva",countryCode:"LT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"PVM kodas",tinName:"PVM (abbrev. Pridtins verts mokestis) moktojo kodas",officialLanguageCode:"lt",officialLanguageNameEn:"Lithuanian",officialLanguageNameLocal:"lietuvi kalba",countryCallingCode:"370",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Luxembourg",countryNameLocal:"Ltzebuerg, Luxembourg, Luxemburg",countryCode:"LU",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"No. TVA",tinName:"Numro d'identification  la taxe sur la valeur ajoute",officialLanguageCode:"lb",officialLanguageNameEn:"Luxembourgish, Letzeburgesch",officialLanguageNameLocal:"Ltzebuergesch",countryCallingCode:"352",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Latvia",countryNameLocal:"Latvija",countryCode:"LV",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"PVN",tinName:"Pievienots vrtbas nodoka (PVN) reistrcijas numurs",officialLanguageCode:"lv",officialLanguageNameEn:"Latvian",officialLanguageNameLocal:"latvieu valoda",countryCallingCode:"371",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Libya",countryNameLocal:"",countryCode:"LY",currencyCode:"LYD",currencyNameEn:"Libyan dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"218",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Morocco",countryNameLocal:"Maroc, , ",countryCode:"MA",currencyCode:"MAD",currencyNameEn:"Moroccan dirham",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"212",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Monaco",countryNameLocal:"Monaco",countryCode:"MC",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"377",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Montenegro",countryNameLocal:"Crna Gora,  ",countryCode:"ME",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"srp",officialLanguageNameEn:" ",officialLanguageNameLocal:"",countryCallingCode:"382",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Saint Martin (French part)",countryNameLocal:"Saint-Martin",countryCode:"MF",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"590",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Madagascar",countryNameLocal:"Madagasikara, Madagascar",countryCode:"MG",currencyCode:"MGA",currencyNameEn:"Malagasy ariary",tinType:"",tinName:"",officialLanguageCode:"mg",officialLanguageNameEn:"Malagasy",officialLanguageNameLocal:"fiteny malagasy",countryCallingCode:"261",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Mali",countryNameLocal:"Mali",countryCode:"ML",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"223",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Myanmar",countryNameLocal:"",countryCode:"MM",currencyCode:"MMK",currencyNameEn:"Myanmar kyat",tinType:"",tinName:"",officialLanguageCode:"my",officialLanguageNameEn:"Burmese",officialLanguageNameLocal:"",countryCallingCode:"95",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Mongolia",countryNameLocal:" ",countryCode:"MN",currencyCode:"MNT",currencyNameEn:"Mongolian tgrg",tinType:"",tinName:"",officialLanguageCode:"mn",officialLanguageNameEn:"Mongolian",officialLanguageNameLocal:" ",countryCallingCode:"976",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Macao",countryNameLocal:", Macau",countryCode:"MO",currencyCode:"MOP",currencyNameEn:"Macanese pataca",tinType:"",tinName:"",officialLanguageCode:"zh-hant",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"853",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Martinique",countryNameLocal:"Martinique",countryCode:"MQ",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"596",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Mauritania",countryNameLocal:", Mauritanie",countryCode:"MR",currencyCode:"MRU",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"222",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Montserrat",countryNameLocal:"Montserrat",countryCode:"MS",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1664",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Malta",countryNameLocal:"Malta",countryCode:"MT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"Vat No.",tinName:"Vat reg. no.",officialLanguageCode:"mt",officialLanguageNameEn:"Maltese",officialLanguageNameLocal:"Malti",countryCallingCode:"356",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Mauritius",countryNameLocal:"Maurice, Mauritius",countryCode:"MU",currencyCode:"MUR",currencyNameEn:"Mauritian rupee",tinType:"",tinName:"",officialLanguageCode:"mfe",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"230",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Maldives",countryNameLocal:"",countryCode:"MV",currencyCode:"MVR",currencyNameEn:"Maldivian rufiyaa",tinType:"",tinName:"",officialLanguageCode:"dv",officialLanguageNameEn:"Divehi, Dhivehi, Maldivian",officialLanguageNameLocal:"",countryCallingCode:"960",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Malawi",countryNameLocal:"Malawi",countryCode:"MW",currencyCode:"MWK",currencyNameEn:"Malawian kwacha",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"265",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Mexico",countryNameLocal:"Mxico",countryCode:"MX",currencyCode:"MXN",currencyNameEn:"Mexican peso",tinType:"RFC",tinName:"Registro Federal de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"52",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Malaysia",countryNameLocal:"",countryCode:"MY",currencyCode:"MYR",currencyNameEn:"Malaysian ringgit",tinType:"",tinName:"",officialLanguageCode:"ms",officialLanguageNameEn:"Malay",officialLanguageNameLocal:"Bahasa Melayu,  ",countryCallingCode:"60",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Mozambique",countryNameLocal:"Mozambique",countryCode:"MZ",currencyCode:"MZN",currencyNameEn:"Mozambican metical",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"258",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Namibia",countryNameLocal:"Namibia",countryCode:"NA",currencyCode:"NAD",currencyNameEn:"Namibian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"264",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"New Caledonia",countryNameLocal:"Nouvelle-Caldonie",countryCode:"NC",currencyCode:"XPF",currencyNameEn:"CFP franc (franc Pacifique)",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"687",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Norfolk Island",countryNameLocal:"Norfolk Island",countryCode:"NF",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"672",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Nigeria",countryNameLocal:"Nigeria",countryCode:"NG",currencyCode:"NGN",currencyNameEn:"Nigerian naira",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"234",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Nicaragua",countryNameLocal:"Nicaragua",countryCode:"NI",currencyCode:"NIO",currencyNameEn:"Nicaraguan crdoba",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"505",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Norway",countryNameLocal:"Norge, Noreg",countryCode:"NO",currencyCode:"NOK",currencyNameEn:"Norwegian krone",tinType:"Orgnr",tinName:"Organisasjonsnummer",officialLanguageCode:"nb",officialLanguageNameEn:"Norwegian Bokml",officialLanguageNameLocal:"Norsk Bokml",countryCallingCode:"47",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Nepal",countryNameLocal:"",countryCode:"NP",currencyCode:"NPR",currencyNameEn:"Nepalese rupee",tinType:"",tinName:"",officialLanguageCode:"ne",officialLanguageNameEn:"Nepali",officialLanguageNameLocal:"",countryCallingCode:"977",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Nauru",countryNameLocal:"Nauru",countryCode:"NR",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"na",officialLanguageNameEn:"Nauru",officialLanguageNameLocal:"Dorerin Naoero",countryCallingCode:"674",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Niue",countryNameLocal:"Niue",countryCode:"NU",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"niu",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"683",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"New Zealand",countryNameLocal:"New Zealand",countryCode:"NZ",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"NZBN",tinName:"NZ Business Number",officialLanguageCode:"mi",officialLanguageNameEn:"Maori",officialLanguageNameLocal:"te reo Mori",countryCallingCode:"64",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Oman",countryNameLocal:" ",countryCode:"OM",currencyCode:"OMR",currencyNameEn:"Omani rial",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"968",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Panama",countryNameLocal:"Panama",countryCode:"PA",currencyCode:"PAB",currencyNameEn:"Panamanian balboa",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"507",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Peru",countryNameLocal:"Per",countryCode:"PE",currencyCode:"PEN",currencyNameEn:"Peruvian sol",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"51",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"French Polynesia",countryNameLocal:"Polynsie franaise",countryCode:"PF",currencyCode:"XPF",currencyNameEn:"CFP franc (franc Pacifique)",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"689",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Papua New Guinea",countryNameLocal:"Papua New Guinea",countryCode:"PG",currencyCode:"PGK",currencyNameEn:"Papua New Guinean kina",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"675",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Pakistan",countryNameLocal:"",countryCode:"PK",currencyCode:"PKR",currencyNameEn:"Pakistani rupee",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"92",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Poland",countryNameLocal:"Polska",countryCode:"PL",currencyCode:"PLN",currencyNameEn:"Polish zoty",tinType:"NIP",tinName:"numer identyfikacji podatkowej",officialLanguageCode:"pl",officialLanguageNameEn:"Polish",officialLanguageNameLocal:"jzyk polski, polszczyzna",countryCallingCode:"48",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Saint Pierre and Miquelon",countryNameLocal:"Saint-Pierre-et-Miquelon",countryCode:"PM",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"508",areaCodes:[],region:"North America",flag:""},{countryNameEn:"Pitcairn",countryNameLocal:"Pitcairn",countryCode:"PN",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"64",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Puerto Rico",countryNameLocal:"Puerto Rico",countryCode:"PR",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"1",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Palestine, State of",countryNameLocal:"Palestinian Territory",countryCode:"PS",currencyCode:"",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"970",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Portugal",countryNameLocal:"Portugal",countryCode:"PT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"NIPC",tinName:"Nmero de Identificao de Pessoa Coletiva (NIPC)",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"351",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Palau",countryNameLocal:"Palau",countryCode:"PW",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"680",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Paraguay",countryNameLocal:"Paraguay",countryCode:"PY",currencyCode:"PYG",currencyNameEn:"Paraguayan guaran",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"595",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Qatar",countryNameLocal:"",countryCode:"QA",currencyCode:"QAR",currencyNameEn:"Qatari riyal",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"974",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Runion",countryNameLocal:"La Runion",countryCode:"RE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"262",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Romania",countryNameLocal:"Romnia",countryCode:"RO",currencyCode:"RON",currencyNameEn:"Romanian leu",tinType:"CIF",tinName:"Codul de identificare fiscal",officialLanguageCode:"ro",officialLanguageNameEn:"Romanian, Moldavian, Moldovan",officialLanguageNameLocal:"Romn",countryCallingCode:"40",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Serbia",countryNameLocal:"",countryCode:"RS",currencyCode:"RSD",currencyNameEn:"Serbian dinar",tinType:"PIB",tinName:"Poreski identifikacioni broj",officialLanguageCode:"sr",officialLanguageNameEn:"Serbian",officialLanguageNameLocal:" ",countryCallingCode:"381",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Russia",countryNameLocal:"",countryCode:"RU",currencyCode:"RUB",currencyNameEn:"Russian ruble",tinType:"",tinName:"  ",officialLanguageCode:"ru",officialLanguageNameEn:"Russian",officialLanguageNameLocal:"",countryCallingCode:"7",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Rwanda",countryNameLocal:"Rwanda",countryCode:"RW",currencyCode:"RWF",currencyNameEn:"Rwandan franc",tinType:"",tinName:"",officialLanguageCode:"rw",officialLanguageNameEn:"Kinyarwanda",officialLanguageNameLocal:"Ikinyarwanda",countryCallingCode:"250",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Saudi Arabia",countryNameLocal:"",countryCode:"SA",currencyCode:"SAR",currencyNameEn:"Saudi riyal",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"966",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Solomon Islands",countryNameLocal:"Solomon Islands",countryCode:"SB",currencyCode:"SBD",currencyNameEn:"Solomon Islands dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"677",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Seychelles",countryNameLocal:"Seychelles",countryCode:"SC",currencyCode:"SCR",currencyNameEn:"Seychelles rupee",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"248",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Sweden",countryNameLocal:"Sverige",countryCode:"SE",currencyCode:"SEK",currencyNameEn:"Swedish krona/kronor",tinType:"Momsnr.",tinName:"VAT-nummer",officialLanguageCode:"sv",officialLanguageNameEn:"Swedish",officialLanguageNameLocal:"Svenska",countryCallingCode:"46",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Singapore",countryNameLocal:"Singapore",countryCode:"SG",currencyCode:"SGD",currencyNameEn:"Singapore dollar",tinType:"",tinName:"",officialLanguageCode:"zh-hans",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"65",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Saint Helena, Ascension and Tristan da Cunha",countryNameLocal:"Saint Helena",countryCode:"SH",currencyCode:"SHP",currencyNameEn:"Saint Helena pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"290",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Slovenia",countryNameLocal:"Slovenija",countryCode:"SI",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"ID za DDV",tinName:"Davna tevilka",officialLanguageCode:"sl",officialLanguageNameEn:"Slovenian",officialLanguageNameLocal:"Slovenski Jezik, Slovenina",countryCallingCode:"386",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Svalbard and Jan Mayen",countryNameLocal:"Svalbard and Jan Mayen",countryCode:"SJ",currencyCode:"NOK",currencyNameEn:"Norwegian krone",tinType:"",tinName:"",officialLanguageCode:"no",officialLanguageNameEn:"Norwegian",officialLanguageNameLocal:"Norsk",countryCallingCode:"4779",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Slovakia",countryNameLocal:"Slovensko",countryCode:"SK",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"I DPH",tinName:"Identifikan slo pre da z pridanej hodnoty",officialLanguageCode:"sk",officialLanguageNameEn:"Slovak",officialLanguageNameLocal:"Slovenina, Slovensk Jazyk",countryCallingCode:"421",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Sierra Leone",countryNameLocal:"Sierra Leone",countryCode:"SL",currencyCode:"SLL",currencyNameEn:"Sierra Leonean leone",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"232",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Republic of San Marino",countryNameLocal:"Repubblica di San Marino",countryCode:"SM",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"C.O.E.",tinName:"Codice operatore economico",officialLanguageCode:"it",officialLanguageNameEn:"Italian",officialLanguageNameLocal:"Italiano",countryCallingCode:"378",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Senegal",countryNameLocal:"Sngal",countryCode:"SN",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"221",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Somalia",countryNameLocal:"Somalia, ",countryCode:"SO",currencyCode:"SOS",currencyNameEn:"Somali shilling",tinType:"",tinName:"",officialLanguageCode:"so",officialLanguageNameEn:"Somali",officialLanguageNameLocal:"Soomaaliga, af Soomaali",countryCallingCode:"252",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Suriname",countryNameLocal:"Suriname",countryCode:"SR",currencyCode:"SRD",currencyNameEn:"Surinamese dollar",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"597",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"South Sudan",countryNameLocal:"South Sudan",countryCode:"SS",currencyCode:"SSP",currencyNameEn:"South Sudanese pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"211",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Sao Tome and Principe",countryNameLocal:"So Tom e Prncipe",countryCode:"ST",currencyCode:"STN",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"239",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"El Salvador",countryNameLocal:"El Salvador",countryCode:"SV",currencyCode:"SVC",currencyNameEn:"Salvadoran coln",tinType:"NIT",tinName:"Nmero de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"503",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Sint Maarten (Dutch part)",countryNameLocal:"Sint Maarten",countryCode:"SX",currencyCode:"ANG",currencyNameEn:"Netherlands Antillean guilder",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"1721",areaCodes:[],region:"Unknown",flag:""},{countryNameEn:"Syrian Arab Republic",countryNameLocal:", Sriyya",countryCode:"SY",currencyCode:"SYP",currencyNameEn:"Syrian pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"963",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Chad",countryNameLocal:"Tchad, ",countryCode:"TD",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"235",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Togo",countryNameLocal:"Togo",countryCode:"TG",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"228",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Thailand",countryNameLocal:"",countryCode:"TH",currencyCode:"THB",currencyNameEn:"Thai baht",tinType:"",tinName:"",officialLanguageCode:"th",officialLanguageNameEn:"Thai",officialLanguageNameLocal:"",countryCallingCode:"66",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Tajikistan",countryNameLocal:",",countryCode:"TJ",currencyCode:"TJS",currencyNameEn:"Tajikistani somoni",tinType:"",tinName:"",officialLanguageCode:"tg",officialLanguageNameEn:"Tajik",officialLanguageNameLocal:", toik, ",countryCallingCode:"992",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Tokelau",countryNameLocal:"Tokelau",countryCode:"TK",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"tkl",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"690",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Timor-Leste",countryNameLocal:"Timor-Leste, Timor Lorosa'e",countryCode:"TL",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"670",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Turkmenistan",countryNameLocal:"Trkmenistan",countryCode:"TM",currencyCode:"TMT",currencyNameEn:"Turkmenistan manat",tinType:"",tinName:"",officialLanguageCode:"tk",officialLanguageNameEn:"Turkmen",officialLanguageNameLocal:"Trkmen, ",countryCallingCode:"993",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Tunisia",countryNameLocal:", Tunisie",countryCode:"TN",currencyCode:"TND",currencyNameEn:"Tunisian dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"216",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Tonga",countryNameLocal:"Tonga",countryCode:"TO",currencyCode:"TOP",currencyNameEn:"Tongan paanga",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"676",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Turkey",countryNameLocal:"Trkiye",countryCode:"TR",currencyCode:"TRY",currencyNameEn:"Turkish lira",tinType:"KDV",tinName:"Vergi Kimlik Numaras",officialLanguageCode:"tr",officialLanguageNameEn:"Turkish",officialLanguageNameLocal:"Trke",countryCallingCode:"90",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Trinidad and Tobago",countryNameLocal:"Trinidad and Tobago",countryCode:"TT",currencyCode:"TTD",currencyNameEn:"Trinidad and Tobago dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"868",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Tuvalu",countryNameLocal:"Tuvalu",countryCode:"TV",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"688",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"United Republic of Tanzania",countryNameLocal:"Tanzania",countryCode:"TZ",currencyCode:"TZS",currencyNameEn:"Tanzanian shilling",tinType:"",tinName:"",officialLanguageCode:"sw",officialLanguageNameEn:"Swahili",officialLanguageNameLocal:"Kiswahili",countryCallingCode:"255",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Ukraine",countryNameLocal:"",countryCode:"UA",currencyCode:"UAH",currencyNameEn:"Ukrainian hryvnia",tinType:"",tinName:"   ",officialLanguageCode:"uk",officialLanguageNameEn:"Ukrainian",officialLanguageNameLocal:"",countryCallingCode:"380",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Uganda",countryNameLocal:"Uganda",countryCode:"UG",currencyCode:"UGX",currencyNameEn:"Ugandan shilling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"256",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"United States of America",countryNameLocal:"United States of America",countryCode:"US",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"EIN",tinName:"Tax Identification Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:[],region:"North America",flag:""},{countryNameEn:"Uruguay",countryNameLocal:"Uruguay",countryCode:"UY",currencyCode:"UYU",currencyNameEn:"Uruguayan peso",tinType:"RUT",tinName:"Registro nico Tributario",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"598",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Uzbekistan",countryNameLocal:"",countryCode:"UZ",currencyCode:"UZS",currencyNameEn:"Uzbekistan som",tinType:"",tinName:"   ",officialLanguageCode:"uz",officialLanguageNameEn:"Uzbek",officialLanguageNameLocal:"Ozbek, , ",countryCallingCode:"998",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Saint Vincent and the Grenadines",countryNameLocal:"Saint Vincent and the Grenadines",countryCode:"VC",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1784",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Venezuela (Bolivarian Republic of)",countryNameLocal:"Venezuela",countryCode:"VE",currencyCode:"VES",currencyNameEn:"",tinType:"RIF",tinName:"Registro de Informacion Fiscal",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"58",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Virgin Islands (British)",countryNameLocal:"British Virgin Islands",countryCode:"VG",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1284",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Virgin Islands (U.S.)",countryNameLocal:"United States Virgin Islands",countryCode:"VI",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1340",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Vietnam",countryNameLocal:"Vit Nam",countryCode:"VN",currencyCode:"VND",currencyNameEn:"Vietnamese ng",tinType:"",tinName:"",officialLanguageCode:"vi",officialLanguageNameEn:"Vietnamese",officialLanguageNameLocal:"Ting Vit",countryCallingCode:"84",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Vanuatu",countryNameLocal:"Vanuatu",countryCode:"VU",currencyCode:"VUV",currencyNameEn:"Vanuatu vatu",tinType:"",tinName:"",officialLanguageCode:"bi",officialLanguageNameEn:"Bislama",officialLanguageNameLocal:"Bislama",countryCallingCode:"678",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Wallis and Futuna",countryNameLocal:"Wallis-et-Futuna",countryCode:"WF",currencyCode:"XPF",currencyNameEn:"CFP franc (franc Pacifique)",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"681",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Samoa",countryNameLocal:"Samoa",countryCode:"WS",currencyCode:"WST",currencyNameEn:"Samoan tala",tinType:"",tinName:"",officialLanguageCode:"sm",officialLanguageNameEn:"Samoan",officialLanguageNameLocal:"gagana fa'a Samoa",countryCallingCode:"685",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Yemen",countryNameLocal:"",countryCode:"YE",currencyCode:"YER",currencyNameEn:"Yemeni rial",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"967",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Mayotte",countryNameLocal:"Mayotte",countryCode:"YT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"262",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"South Africa",countryNameLocal:"South Africa",countryCode:"ZA",currencyCode:"ZAR",currencyNameEn:"South African rand",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"27",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Zambia",countryNameLocal:"Zambia",countryCode:"ZM",currencyCode:"ZMW",currencyNameEn:"Zambian kwacha",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"260",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Zimbabwe",countryNameLocal:"Zimbabwe",countryCode:"ZW",currencyCode:"ZWL",currencyNameEn:"Zimbabwean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"263",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Eswatini",countryNameLocal:"Swaziland",countryCode:"SZ",currencyCode:"SZL",currencyNameEn:"Swazi lilangeni",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"268",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"North Macedonia",countryNameLocal:"",countryCode:"MK",currencyCode:"MKD",currencyNameEn:"Macedonian denar",tinType:"",tinName:"",officialLanguageCode:"mk",officialLanguageNameEn:"Macedonian",officialLanguageNameLocal:" ",countryCallingCode:"389",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Philippines",countryNameLocal:"Philippines",countryCode:"PH",currencyCode:"PHP",currencyNameEn:"Philippine peso",tinType:"TIN",tinName:"Tax Identification Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"63",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Netherlands",countryNameLocal:"Nederland",countryCode:"NL",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"Btw-nr.",tinName:"Btw-nummer",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"31",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"United Arab Emirates",countryNameLocal:"   ",countryCode:"AE",currencyCode:"AED",currencyNameEn:"United Arab Emirates dirham",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"971",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Republic of Moldova",countryNameLocal:"Moldova, ",countryCode:"MD",currencyCode:"MDL",currencyNameEn:"Moldovan leu",tinType:"",tinName:"",officialLanguageCode:"ro",officialLanguageNameEn:"Romanian, Moldavian, Moldovan",officialLanguageNameLocal:"Romn",countryCallingCode:"373",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Gambia",countryNameLocal:"The Gambia",countryCode:"GM",currencyCode:"GMD",currencyNameEn:"Gambian dalasi",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"220",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Dominican Republic",countryNameLocal:"Repblica Dominicana",countryCode:"DO",currencyCode:"DOP",currencyNameEn:"Dominican peso",tinType:"RNC",tinName:"Registro Nacional del Contribuyente",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"1",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Sudan",countryNameLocal:"",countryCode:"SD",currencyCode:"SDG",currencyNameEn:"Sudanese pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"249",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Lao People's Democratic Republic",countryNameLocal:"",countryCode:"LA",currencyCode:"LAK",currencyNameEn:"Lao kip",tinType:"",tinName:"",officialLanguageCode:"lo",officialLanguageNameEn:"Lao",officialLanguageNameLocal:"",countryCallingCode:"856",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Taiwan, Province of China",countryNameLocal:"Taiwan",countryCode:"TW",currencyCode:"TWD",currencyNameEn:"New Taiwan dollar",tinType:"",tinName:"",officialLanguageCode:"zh-hant",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"886",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Republic of the Congo",countryNameLocal:"Rpublique du Congo",countryCode:"CG",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"242",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Czechia",countryNameLocal:"esk republika",countryCode:"CZ",currencyCode:"CZK",currencyNameEn:"Czech koruna",tinType:"DI",tinName:"Daov identifikan slo",officialLanguageCode:"cs",officialLanguageNameEn:"Czech",officialLanguageNameLocal:"etina",countryCallingCode:"420",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"United Kingdom",countryNameLocal:"Great Britain",countryCode:"GB",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"VAT Reg No",tinName:"Value added tax registration number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Niger",countryNameLocal:"Niger",countryCode:"NE",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"227",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Democratic Republic of the Congo",countryNameLocal:"Democratic Republic of the Congo",countryCode:"CD",currencyCode:"CDF",currencyNameEn:"Congolese franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"243",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Commonwealth of The Bahamas",countryNameLocal:"Commonwealth of The Bahamas",countryCode:"BS",currencyCode:"BSD",currencyNameEn:"Bahamian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 242",areaCodes:[],region:"Caribbean",flag:""},{countryNameEn:"Cocos (Keeling) Islands",countryNameLocal:"Pulu Kokos (Keeling)",countryCode:"CC",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"61 891",areaCodes:[],region:"Australia",flag:""},{countryNameEn:"Central African Republic",countryNameLocal:"Rpublique centrafricaine",countryCode:"CF",currencyCode:"XAF",currencyNameEn:"Central African CFA",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"236",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Cook Islands",countryNameLocal:"Kki 'irani",countryCode:"CK",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"682",areaCodes:[],region:"South Pacific Ocean",flag:""},{countryNameEn:"Falkland Islands",countryNameLocal:"Falkland Islands",countryCode:"FK",currencyCode:"FKP",currencyNameEn:"Falklands pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"500",areaCodes:[],region:"South Atlantic Ocean",flag:""},{countryNameEn:"Faroe Islands",countryNameLocal:"Frerne",countryCode:"FO",currencyCode:"DKK",currencyNameEn:"Faroese krna",tinType:"",tinName:"",officialLanguageCode:"da",officialLanguageNameEn:"Danish",officialLanguageNameLocal:"dansk",countryCallingCode:"298",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Territory of Heard Island and McDonald Islands",countryNameLocal:"Territory of Heard Island and McDonald Islands",countryCode:"HM",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"672",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"British Indian Ocean Territory",countryNameLocal:"British Indian Ocean Territory",countryCode:"IO",currencyCode:"USD",currencyNameEn:"United States Dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"246",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"Comoros",countryNameLocal:"Umoja wa Komori",countryCode:"KM",currencyCode:"KMF",currencyNameEn:"Comorian franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"269",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"Cayman Islands",countryNameLocal:"Cayman Islands",countryCode:"KY",currencyCode:"KYD",currencyNameEn:"Cayman Islands dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 345",areaCodes:[],region:"Caribbean Sea",flag:""},{countryNameEn:"Republic of the Marshall Islands",countryNameLocal:"Aolepn Aorkin aje",countryCode:"MH",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"692",areaCodes:[],region:"Pacific Ocean",flag:""},{countryNameEn:"Commonwealth of the Northern Mariana Islands",countryNameLocal:"Sankattan Siha Na Islas Marinas",countryCode:"MP",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 670",areaCodes:[],region:"Pacific Ocean",flag:""},{countryNameEn:"Turks and Caicos Islands",countryNameLocal:"Turks and Caicos Islands",countryCode:"TC",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 649",areaCodes:[],region:"Atlantic Ocean",flag:""},{countryNameEn:"French Southern and Antarctic Lands",countryNameLocal:"Terres australes et antarctiques franaises",countryCode:"TF",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"672",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"United States Minor Outlying Islands",countryNameLocal:"United States Minor Outlying Islands",countryCode:"UM",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:[],region:"Pacific Ocean",flag:""},{countryNameEn:"Holy See",countryNameLocal:"Sancta Sedes",countryCode:"VA",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"la",officialLanguageNameEn:"Latin",officialLanguageNameLocal:"lingua latna",countryCallingCode:"39",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Republic of Kosovo",countryNameLocal:"Republika e Kosovs",countryCode:"XK",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"sq",officialLanguageNameEn:"Albanian",officialLanguageNameLocal:"Shqip",countryCallingCode:"383",region:"Europe",flag:""},{countryNameEn:"Netherlands Antilles",countryNameLocal:"Nederlandse Antillen",countryCode:"AN",currencyCode:"ANG",currencyNameEn:"Netherlands Antillean guilder",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"599",region:"Europe",flag:""}];return By.default=e,By}var _$;function eue(){if(_$)return Ss;_$=1;var e=Ss&&Ss.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Ss,"__esModule",{value:!0}),Ss.customList=Ss.customArray=Ss.findOne=Ss.filter=Ss.all=Ss.utils=void 0;const t=e(Xde()),a=e(Zde()),s=e(Jde());Ss.utils={groupBy:t.default};function r(){return s.default}Ss.all=r;function i(u,d){return s.default.filter(f=>f[u]===d)}Ss.filter=i;function o(u,d){return s.default.find(f=>f[u]===d)}Ss.findOne=o;function l(u={name:"{countryNameEn} ({countryCode})",value:"{countryCode}"},{sortBy:d,sortDataBy:f,filter:p}={}){const x=[];let y=s.default;if(typeof p=="function"&&(y=y.filter(p)),f){const N=new Intl.Collator([],{sensitivity:"accent"});y.sort((v,j)=>N.compare(v[f],j[f]))}if(y.forEach(N=>{const v={};for(const j in u)v[j]=(0,a.default)(u[j],N);x.push(v)}),d&&u[d]){const N=new Intl.Collator([],{sensitivity:"accent"});x.sort((v,j)=>N.compare(v[d],j[d]))}return x}Ss.customArray=l;function c(u="countryCode",d="{countryNameEn} ({countryCode})",{filter:f}={}){const p={};let x=s.default;return typeof f=="function"&&(x=x.filter(f)),x.forEach(y=>{const N=(0,a.default)(d,y);p[String(y[u])]=N}),p}return Ss.customList=c,Ss}var eh=eue();const mk=(...e)=>e.flat().filter(Boolean).join(" "),tue=eh.all(),tq=tue.map(e=>({code:`+${e.countryCallingCode}`,name:e.countryCode})),fk=[{id:1,title:"Your Account",subtitle:"Personal & Login Details"},{id:2,title:"Company Setup",subtitle:"Business Information"}],nue=()=>{const e=jt();return n.jsxs("button",{onClick:()=>e("/"),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 transition cursor-pointer",children:[n.jsx(Qu,{className:"size-4 mr-1"})," Back to Home"]})},aue=h.memo(({label:e,id:t,placeholder:a,type:s="text",value:r,onChange:i,isVisible:o,onTogglePass:l,error:c,isSelect:u,options:d})=>{const f=t.toLowerCase().includes("password"),p=mk("w-full bg-gray-50 border px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:outline-none cursor-pointer",f?"pr-10":"",c?"border-red-500 focus:border-red-500 focus:ring-2 focus:ring-red-500/50":"border-gray-200 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50");return n.jsxs("div",{className:"flex flex-col space-y-2",children:[n.jsx("label",{htmlFor:t,className:"text-sm font-medium text-gray-700 cursor-pointer",children:e}),n.jsxs("div",{className:"relative",children:[u?n.jsx("select",{id:t,value:r,onChange:i,required:!0,className:p,children:d.map(x=>n.jsx("option",{value:x,children:x},x))}):n.jsx("input",{id:t,type:f?"text":s,style:f&&!o?{WebkitTextSecurity:"disc"}:void 0,placeholder:a,value:r,onChange:i,required:!0,className:p}),f&&n.jsx("button",{type:"button",onClick:()=>l(t),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":o?"Hide password":"Show password",children:o?n.jsx(ku,{className:"size-5"}):n.jsx(Eu,{className:"size-5"})})]}),c&&n.jsx("p",{className:"mt-1 text-sm text-red-600 font-semibold",children:c})]})}),ru=aue,sue=h.memo(({currentStep:e,totalSteps:t})=>n.jsx("div",{className:"flex justify-between items-center mb-10 w-full max-w-xs mx-auto",children:fk.map(a=>n.jsxs(h.Fragment,{children:[n.jsxs("div",{className:"flex flex-col items-center cursor-pointer",children:[n.jsx("div",{className:mk("size-10 flex items-center justify-center rounded-full font-bold transition-all duration-300",a.id===e?"bg-amber-500 text-white shadow-lg":a.id<e?"bg-green-500 text-white":"bg-gray-100 text-gray-500 border-2 border-gray-300"),children:a.id<e?n.jsx(bL,{className:"size-5"}):a.id}),n.jsx("span",{className:mk("mt-2 text-xs font-medium hidden sm:block",a.id===e?"text-amber-600":"text-gray-500"),children:a.title})]}),a.id<t&&n.jsx("div",{className:"flex-1 h-0.5 mx-1 transition-colors duration-300 bg-gray-300"})]},a.id))})),rue=h.memo(({formData:e,handleChange:t,handleCodeChange:a,handleTogglePass:s,isPassVisible:r,formError:i,signupError:o,termsAccepted:l,handleTerms:c,isButtonDisabled:u,handleSubmit:d,handleGoogleLogin:f})=>n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center my-6",children:[n.jsx("div",{className:"flex-grow border-t border-gray-300"}),n.jsx("span",{className:"flex-shrink mx-4 text-sm text-gray-500",children:"OR"}),n.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"md:flex md:space-x-4 space-y-6 md:space-y-0",children:[n.jsx("div",{className:"md:w-1/2",children:n.jsx(ru,{label:"First Name",id:"first_name",placeholder:"John",value:e.first_name,onChange:t})}),n.jsx("div",{className:"md:w-1/2",children:n.jsx(ru,{label:"Last Name",id:"last_name",placeholder:"Doe",value:e.last_name,onChange:t})})]}),n.jsxs("div",{className:"flex flex-col space-y-2",children:[n.jsx("label",{htmlFor:"phoneNumber",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Contact Number"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("select",{id:"countryCode",value:e.countryCode,onChange:a,className:"flex-shrink-0 bg-gray-50 border border-gray-200 px-3 py-2.5 rounded-lg text-gray-800 transition shadow-inner focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer",children:tq.map(p=>n.jsxs("option",{value:p.code,children:[p.name," ",p.code]},p.code))}),n.jsx("input",{id:"phone_number",type:"tel",placeholder:"0000000000",maxLength:10,value:e.phone_number,onChange:t,className:"w-full bg-gray-50 border border-gray-200 px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"})]})]}),n.jsx(ru,{label:"Email Address",id:"email",type:"email",placeholder:"you@company.com",value:e.email,onChange:t}),n.jsx(ru,{label:"Password",id:"password",placeholder:"Min 8 characters",value:e.password,onChange:t,isVisible:r.password,onTogglePass:s}),n.jsx(ru,{label:"Confirm Password",id:"confirmPassword",placeholder:"Confirm your password",value:e.confirmPassword,onChange:t,isVisible:r.confirmPassword,onTogglePass:s,error:i}),o&&n.jsx("div",{className:"bg-red-100 border border-red-300 py-2 px-3 text-red-600",children:o}),n.jsxs("div",{className:"flex items-start pt-2",children:[n.jsx("input",{id:"terms",type:"checkbox",checked:l,onChange:c,className:"size-4 mt-1 rounded text-amber-500 border-gray-300 focus:ring-amber-500 cursor-pointer"}),n.jsxs("label",{htmlFor:"terms",className:"ml-3 text-sm font-medium text-gray-700 cursor-pointer",children:["I accept the ",n.jsx("a",{href:"#",className:"text-amber-600 hover:text-amber-700 font-semibold",children:"Terms"})," and ",n.jsx("a",{href:"#",className:"text-amber-600 hover:text-amber-700 font-semibold",children:"Policy"}),"."]})]})]}),i&&n.jsx("div",{className:"mt-4 p-3 text-sm rounded-lg bg-red-100 text-red-700 border border-red-300 font-medium animate-pulse",children:i}),n.jsx("button",{type:"submit",onClick:d,disabled:u,className:"w-full mt-8 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all duration-300 bg-secondary hover:bg-tertiary shadow-lg shadow-tertiary disabled:shadow-none focus-visible:outline-none cursor-pointer",children:"Continue to Company Details"})]})),iue=h.memo(({companyData:e,handleCodeChange1:t,handleSubmit:a,handleCompanyChange:s,formError:r,isSubmitted:i,isButtonDisabled:o,setStep:l,setIsSubmitted:c,setFormError:u})=>n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-6",children:[n.jsx(ru,{label:"Company Name",id:"company_name",placeholder:"Acme Corp",value:e.company_name,onChange:s}),n.jsxs("div",{className:"flex flex-col space-y-2",children:[n.jsx("label",{htmlFor:"phoneNumber",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Company Number"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("select",{id:"countryCode",value:e.countryCode,onChange:t,className:"flex-shrink-0 bg-gray-50 border border-gray-200 px-3 py-2.5 rounded-lg text-gray-800 transition shadow-inner focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer",children:tq.map(d=>n.jsxs("option",{value:d.code,children:[d.name," ",d.code]},d.code))}),n.jsx("input",{id:"company_number",type:"tel",placeholder:"0000000000",maxLength:10,value:e.company_number,onChange:s,className:"w-full bg-gray-50 border border-gray-200 px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"})]})]}),n.jsx(ru,{label:"Company Website",id:"company_website",type:"url",placeholder:"https://www.acme.com",value:e.company_website,onChange:s})]}),r&&n.jsx("div",{className:"p-3 text-sm rounded-lg bg-red-100 text-red-700 border border-red-300 font-medium my-6",children:r}),i&&n.jsx("div",{className:"p-3 text-sm rounded-lg bg-green-100 text-green-700 border border-green-300 font-medium my-6",children:"Account and Company Setup simulated successfully! Welcome aboard."}),n.jsxs("div",{className:"flex space-x-4 mt-8",children:[n.jsxs("button",{type:"button",onClick:()=>{l(1),c(!1),u(null)},className:"flex-1 inline-flex items-center justify-center rounded-lg h-12 px-6 text-gray-700 font-bold tracking-wide border border-gray-300 bg-white hover:bg-tertiary hover:text-white transition-colors focus-visible:ring-2 focus-visible:ring-gray-300 focus-visible:outline-none cursor-pointer",children:[n.jsx(Uie,{className:"size-4 mr-2"})," Back"]}),n.jsx("button",{onClick:a,type:"submit",disabled:o,className:"flex-1 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all duration-300 bg-tertiary hover:bg-accent hover:text-secondary shadow-xl shadow-amber-500/30 disabled:shadow-none focus-visible:ring-2 focus-visible:ring-amber-500/50 focus-visible:outline-none cursor-pointer",children:"Create Account"})]})]})),oue=()=>{const e=["first_name","email","password"],t=["company_name","company_number","company_website"],[a,s]=h.useState(1),[r,i]=h.useState({first_name:"",last_name:"",countryCode:"+63",phone_number:"",email:"",password:"",confirmPassword:"",role:"CEO"}),[o,l]=h.useState({company_name:"",company_number:"",company_website:"",countryCode:"+63"}),[c,u]=h.useState({}),[d,f]=h.useState(!1),[p,x]=h.useState(null),[y,N]=h.useState(!1),{login:v}=Ks(),[j,w]=h.useState({plan_name:"Free",price:0}),[S,_]=h.useState(!1),[E,T]=h.useState(null);h.useEffect(()=>{document.title="Sign Up | Sari-Sari CRM"},[]),h.useEffect(()=>{const Y=()=>{window.google&&window.google.accounts?(window.google.accounts.id.initialize({client_id:"222789237297-r8mebl46fdacgpsnlnjca4eu0crn8hf6.apps.googleusercontent.com",callback:A}),window.google.accounts.id.renderButton(document.getElementById("googleSignupBtn"),{theme:"outline",size:"large",text:"signup_with"})):console.error("Google API not loaded properly.")};if(window.google&&window.google.accounts){Y();return}const le=document.createElement("script");le.src="https://accounts.google.com/gsi/client",le.async=!0,le.defer=!0,le.onload=Y,document.body.appendChild(le)},[]);const A=async Y=>{_(!0);try{const le=g9(Y.credential);console.log("Google user:",le);try{await se.post("/auth/email-check",{email:le.email})}catch(_e){const te=_e.response?.data?.detail||"An error occurred.";T(te),_(!1);return}i(_e=>({..._e,email:le.email,first_name:le.given_name||"",last_name:le.family_name||"",password:"",profilePicture:le.picture||"",googleId:le.sub,auth_provider:"google",id_token:Y.credential})),s(2)}catch(le){console.error("Google signup error:",le),x("Failed to process Google account. Please try again.")}finally{T(null),x(null),_(!1)}},L=h.useCallback(Y=>{const{id:le,value:_e}=Y.target;l(te=>({...te,[le]:_e})),x(null)},[]),M=h.useCallback(Y=>{const{id:le,value:_e}=Y.target;N(!1),i(te=>{const ae={...te,[le]:_e};if(a===1){let ye=null;if(le==="password"&&_e.length>0&&_e.length<8)ye="Password must be at least 8 characters.";else if(le==="password"||le==="confirmPassword"){const Ne=le==="password"?_e:ae.password,he=le==="confirmPassword"?_e:ae.confirmPassword;Ne&&he&&Ne!==he&&(ye="Passwords don't match.")}x(ye)}return ae})},[a]),F=h.useCallback(Y=>i(le=>({...le,countryCode:Y.target.value})),[]),$=h.useCallback(Y=>l(le=>({...le,countryCode:Y.target.value})),[]),D=h.useCallback(Y=>u(le=>({...le,[Y]:!le[Y]})),[]),q=h.useCallback(Y=>f(Y.target.checked),[]),G=async Y=>{if(Y.preventDefault(),N(!1),x(null),a===1){if(!e.every(_e=>r[_e].trim()!=="")||!d){x("Please fill in all required fields and accept the terms.");return}if(r.password!==r.confirmPassword){x("The passwords you entered do not match. Please try again.");return}if(r.password.length<8){x("Password must be at least 8 characters long.");return}if(r.auth_provider==="google"){s(2);return}try{(await se.post("/auth/email-check",{email:r.email})).data.detail==="No existing email"&&(x(null),s(2))}catch(_e){_e.response&&_e.response.data&&_e.response.data.detail?x(_e.response.data.detail):x("Something went wrong. Please try again.")}finally{_(!1)}}else if(a===2){if(!t.every(_e=>(o[_e]||"").trim()!=="")){x("Please fill in all required company details.");return}try{const{confirmPassword:_e,...te}=r,ae={...o,company_number:`${o.countryCode} ${o.company_number}`},Ne=(await se.post("/company/create",ae)).data.id,he={...te,company_id:Ne,phone_number:`${te.countryCode} ${te.phone_number}`};if(console.log(" Sending payload:",he),te.auth_provider==="google"){const ve=await se.post("/auth/google/signup",he),ne={...j,company_id:Ne,status:"Active"},Se=await se.post("/subscription/subscribe",ne);x(null),N(!0),v(ve.data)}else{const ve=await se.post("/auth/signup",he),ne={...j,company_id:Ne,status:"Active"},Se=await se.post("/subscription/subscribe",ne);x(null),N(!0),v(ve.data)}}catch(_e){if(_e.response?.data?.detail){const te=_e.response.data.detail;if(Array.isArray(te)){const ae=te.map(ye=>ye.msg).join(", ");x(ae)}else x(typeof te=="object"?te.msg||JSON.stringify(te):te)}else x("Something went wrong. Please try again.")}finally{_(!1)}}},U=h.useCallback(()=>{try{window.google.accounts.id.initialize({client_id:"222789237297-r8mebl46fdacgpsnlnjca4eu0crn8hf6.apps.googleusercontent.com",callback:Y=>{const{credential:le}=Y;i(_e=>({..._e,first_name:le.given_name||"",last_name:le.family_name||"",email:le.email||"",profile_picture:le.picture||"",auth_provider:"google",id_token:le})),s(2)}}),window.google.accounts.id.prompt()}catch(Y){console.error("Google login error:",Y),x("Google login failed. Please try again.")}},[i,x,s]),V=h.useMemo(()=>{if(a===1){const Y=e.every(te=>(r[te]||"").trim()!==""),le=r.password.length>=8,_e=r.password===r.confirmPassword;return!d||!!p||!Y||!le||!_e}return a===2?!t.every(le=>(o[le]||"").trim()!=="")||!!p:!1},[a,d,p,r,o]),Z=fk.find(Y=>Y.id===a);return n.jsxs("div",{className:"min-h-screen w-full bg-gray-100 font-sans text-gray-800 flex flex-col items-center",children:[n.jsx("div",{className:"w-full py-6 px-4 sm:px-12 lg:px-20 max-w-7xl",children:n.jsxs("div",{className:"flex items-center text-gray-800",children:[n.jsx(tn,{className:"size-6 text-amber-500 mr-2"}),n.jsx("span",{className:"text-xl font-extrabold tracking-wider",children:"CRM"})]})}),S&&n.jsx(eq,{isLoading:S}),n.jsx("div",{className:"w-full max-w-lg px-4 pt-6",children:n.jsx(nue,{})}),n.jsx("main",{className:"w-full max-w-lg font-inter mx-auto px-4 pt-3 pb-12",children:n.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-xl p-6 md:p-10",children:[n.jsxs("header",{className:"text-center mb-8",children:[n.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:Z.title}),n.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:Z.subtitle})]}),n.jsx(sue,{currentStep:a,totalSteps:fk.length}),a===1&&n.jsx("div",{id:"googleSignupBtn"}),n.jsxs("form",{className:"mt-8",children:[a===1&&n.jsx(rue,{formData:r,handleChange:M,handleCodeChange:F,handleTogglePass:D,isPassVisible:c,formError:p,signupError:E,termsAccepted:d,handleTerms:q,isButtonDisabled:V,handleSubmit:G,handleGoogleLogin:U}),a===2&&n.jsx(iue,{handleSubmit:G,companyData:o,handleCompanyChange:L,formError:p,isSubmitted:y,isButtonDisabled:V,setStep:s,setIsSubmitted:N,setFormError:x,handleCodeChange1:$}),a===1&&n.jsx("div",{className:"text-center mt-6",children:n.jsxs("p",{className:"text-sm text-gray-700",children:["Already have an account?",n.jsx("a",{href:"/login",className:"font-bold text-amber-600 hover:text-amber-700 ml-1 cursor-pointer",children:"Log in"})]})})]})]})})]})},lue=()=>{const e=jt();return n.jsxs("button",{onClick:()=>e("/"),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 transition mb-3 cursor-pointer",children:[n.jsx(Qu,{className:"size-4 mr-1"})," Back to Home"]})},A$=({label:e,id:t,placeholder:a,type:s="text",value:r,onChange:i,isPassVisible:o,onTogglePass:l})=>{const c=t.toLowerCase().includes("password");return n.jsxs("div",{className:"flex flex-col space-y-2",children:[n.jsx("label",{htmlFor:t,className:"text-sm font-medium text-gray-700",children:e}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{id:t,type:c?"text":s,style:c&&!o?{WebkitTextSecurity:"disc"}:void 0,placeholder:a,value:r,onChange:i,required:!0,className:"w-full bg-gray-50 border border-gray-200 px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"}),c&&n.jsx("button",{type:"button",onClick:l,className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":o?"Hide password":"Show password",children:o?n.jsx(ku,{className:"size-5"}):n.jsx(Eu,{className:"size-5"})})]})]})},cue=()=>{const[e,t]=h.useState({email:"",password:""}),[a,s]=h.useState(!1),[r,i]=h.useState(null),[o,l]=h.useState(!1),{isLoggedIn:c,login:u,userRole:d}=Ks(),f=jt();h.useEffect(()=>{document.title="Login | Sari-Sari CRM"},[]),h.useEffect(()=>{c&&(d==="CEO"||d==="Admin"?f("/admin"):d==="Group Manager"?f("/group-manager"):d==="Manager"?f("/manager"):d==="Marketing"?f("/marketing"):d==="Sales"&&f("/sales"))},[c,f,d]);const p=N=>{const{id:v,value:j}=N.target;t(w=>({...w,[v]:j}))},x=async N=>{N.preventDefault(),i(null);try{const v=await se.post("/auth/login",e);u(v.data),i(null)}catch(v){v.response&&v.response.data&&v.response.data.detail?i(v.response.data.detail):i("Something went wrong. Please try again.")}};h.useEffect(()=>{const N=document.createElement("script");return N.src="https://accounts.google.com/gsi/client",N.async=!0,N.defer=!0,N.onload=()=>{window.google&&(window.google.accounts.id.initialize({client_id:"222789237297-r8mebl46fdacgpsnlnjca4eu0crn8hf6.apps.googleusercontent.com",callback:y}),window.google.accounts.id.renderButton(document.getElementById("googleLoginBtn"),{theme:"outline",size:"large",text:"signin_with"}))},document.body.appendChild(N),()=>{document.body.contains(N)&&document.body.removeChild(N)}},[]);const y=async N=>{l(!0);try{const v=g9(N.credential),j=await se.post("/auth/google/login",{id_token:N.credential});u(j.data)}catch(v){console.error("Google login failed:",v);const j=v.response?.data?.detail||"Google login failed. Please try again.";i(j)}finally{l(!1)}};return n.jsxs("div",{className:"min-h-screen w-full bg-gray-100 font-sans text-gray-800 flex flex-col items-center",children:[n.jsx("div",{className:"w-full py-6 px-4 sm:px-12 lg:px-20 max-w-7xl",children:n.jsx("div",{className:"flex items-center text-gray-800",children:n.jsx("span",{className:"text-xl font-extrabold tracking-wider",children:"CRM"})})}),o&&n.jsx(eq,{isLoading:o}),n.jsxs("main",{className:"w-full max-w-lg font-inter mx-auto px-4 pt-6 pb-12",children:[n.jsx(lue,{}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-xl p-6 md:p-10",children:[n.jsxs("header",{className:"text-center mb-6",children:[n.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Login"}),n.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:"Sign in to access your dashboard."})]}),n.jsx("div",{id:"googleLoginBtn"}),n.jsxs("div",{className:"flex items-center my-6",children:[n.jsx("div",{className:"flex-grow border-t border-gray-300"}),n.jsx("span",{className:"flex-shrink mx-4 text-sm text-gray-500",children:"OR"}),n.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),n.jsxs("form",{onSubmit:x,className:"space-y-6 cursor-pointer",children:[n.jsx(A$,{label:"Email",id:"email",type:"email",placeholder:"you@example.com",value:e.email,onChange:p}),n.jsx(A$,{label:"Password",id:"password",type:"password",placeholder:"Enter your password",value:e.password,onChange:p,isPassVisible:a,onTogglePass:()=>s(N=>!N)}),r&&n.jsx("div",{className:"bg-red-100 border border-red-300 py-2 px-3 text-red-600",children:r}),n.jsx("button",{type:"submit",className:"w-full mt-2 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all disabled:opacity-50 bg-secondary text-gray-900 hover:bg-tertiary shadow-xl focus-visible:ring-2 focus-visible:ring-amber-500/50 cursor-pointer",children:"Log In"}),n.jsx("div",{className:"text-center mt-1",children:n.jsx("a",{href:"/forgot-password",className:"text-sm font-medium text-amber-600 hover:text-amber-700 cursor-pointer",children:"Forgot Password?"})})]}),n.jsx("div",{className:"text-center mt-6",children:n.jsxs("p",{className:"text-sm text-gray-700",children:["Don't have an account?",n.jsx("a",{href:"/signup",className:"font-bold text-amber-600 hover:text-amber-700 ml-1 cursor-pointer",children:"Sign Up"})]})})]})]})]})},due=({onClick:e})=>n.jsxs("button",{onClick:e,className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 transition mb-3 cursor-pointer",children:[n.jsx(Qu,{className:"size-4 mr-1"})," Back"]}),JS=({label:e,id:t,placeholder:a,type:s="text",value:r,onChange:i,icon:o})=>{const[l,c]=h.useState(!1),u=s==="password";return n.jsxs("div",{className:"flex flex-col space-y-2",children:[n.jsx("label",{htmlFor:t,className:"text-sm font-medium text-gray-700",children:e}),n.jsxs("div",{className:"relative flex items-center",children:[o&&n.jsx(o,{className:"absolute left-3 text-gray-500 size-5"}),n.jsx("input",{id:t,type:u?"text":s,style:u&&!l?{WebkitTextSecurity:"disc"}:void 0,placeholder:a,value:r,onChange:i,required:!0,className:"w-full bg-gray-50 border border-gray-200 pl-10 pr-10 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"}),u&&n.jsx("button",{type:"button",onClick:()=>c(d=>!d),className:"absolute right-3 text-gray-500",children:l?n.jsx(ku,{className:"size-5"}):n.jsx(Eu,{className:"size-5"})})]})]})},uue=({otp:e,setOtp:t})=>n.jsx("div",{className:"flex justify-between gap-2",children:[...Array(6)].map((a,s)=>n.jsx("input",{type:"text",maxLength:"1",className:"w-12 h-12 text-center text-lg font-bold border border-gray-300 rounded-lg focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50",value:e[s]||"",onChange:r=>{const i=r.target.value;if(/\d/.test(i)||i===""){const o=[...e];o[s]=i,t(o)}}},s))}),mue=()=>{const e=jt(),[t,a]=h.useState(1),[s,r]=h.useState(""),[i,o]=h.useState(["","","","","",""]),[l,c]=h.useState(""),[u,d]=h.useState(""),f=N=>{N.preventDefault(),a(2)},p=N=>{N.preventDefault(),a(3)},x=N=>{if(N.preventDefault(),l!==u){alert("Passwords do not match!");return}alert("Password reset successfully!")},y=()=>{t>1?a(t-1):e("/login")};return n.jsxs("div",{className:"min-h-screen w-full bg-gray-100 font-sans text-gray-800 flex flex-col items-center",children:[n.jsx("div",{className:"w-full py-6 px-4 sm:px-12 lg:px-20 max-w-7xl",children:n.jsx("div",{className:"flex items-center text-gray-800",children:n.jsx("span",{className:"text-xl font-extrabold tracking-wider",children:"CRM"})})}),n.jsxs("main",{className:"w-full max-w-lg font-inter mx-auto px-4 pt-6 pb-12",children:[n.jsx(due,{onClick:y}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-xl p-6 md:p-10",children:[t===1&&n.jsxs(n.Fragment,{children:[n.jsxs("header",{className:"text-center mb-6",children:[n.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Forgot Password"}),n.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:"Enter your email and we'll send you a verification code."})]}),n.jsxs("form",{onSubmit:f,className:"space-y-6 cursor-pointer",children:[n.jsx(JS,{label:"Email Address",id:"email",type:"email",placeholder:"you@example.com",value:s,onChange:N=>r(N.target.value),icon:sa}),n.jsx("button",{className:"w-full mt-3 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all bg-secondary text-gray-900 hover:bg-tertiary shadow-xl",children:"Send OTP"})]})]}),t===2&&n.jsxs(n.Fragment,{children:[n.jsxs("header",{className:"text-center mb-6",children:[n.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Enter Verification Code"}),n.jsxs("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:["We've sent a 6-digit code to ",n.jsx("strong",{children:s}),"."]})]}),n.jsxs("form",{onSubmit:p,className:"space-y-6",children:[n.jsx(uue,{otp:i,setOtp:o}),n.jsx("button",{className:"w-full mt-3 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all bg-secondary text-gray-900 hover:bg-tertiary shadow-xl",children:"Verify Code"})]})]}),t===3&&n.jsxs(n.Fragment,{children:[n.jsxs("header",{className:"text-center mb-6",children:[n.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Reset Password"}),n.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:"Enter your new password below."})]}),n.jsxs("form",{onSubmit:x,className:"space-y-6",children:[n.jsx(JS,{label:"New Password",id:"password",type:"password",placeholder:"Enter new password",value:l,onChange:N=>c(N.target.value),icon:Ao}),n.jsx(JS,{label:"Confirm Password",id:"confirm-password",type:"password",placeholder:"Confirm new password",value:u,onChange:N=>d(N.target.value),icon:Ao}),n.jsx("button",{className:"w-full mt-3 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all bg-secondary text-gray-900 hover:bg-tertiary shadow-xl",children:"Reset Password"})]})]})]})]})]})},qt=()=>{const[e,t]=h.useState(null),[a,s]=h.useState(!1),[r,i]=h.useState(!0),o=jt(),l=async()=>{try{const u=await se.get("/auth/me");t(u.data),s(!0)}catch(u){t(null),s(!1),console.warn("Unauthorized  possible expired token or not logged in.",u)}finally{i(!1)}};return h.useEffect(()=>{l()},[]),{user:e,isLoggedIn:a,loading:r,fetchUser:l,logout:async()=>{try{await se.post("/auth/logout")}catch{}t(null),s(!1),o("/login")}}};function Wt({message:e="Loading..."}){return n.jsx("div",{className:"absolute inset-0 bg-primary/90 flex items-center justify-center z-40 lg:flex hidden",children:n.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[n.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0ms",animationDuration:"0.6s"}}),n.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"150ms",animationDuration:"0.6s"}}),n.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"300ms",animationDuration:"0.6s"}})]})})}const fue=(e,t)=>{const a=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${a}${s}`.toUpperCase()||"U"};function Hy(){const{user:e,loading:t,fetchUser:a}=qt(),[s,r]=h.useState(!1),[i,o]=h.useState(!1),[l,c]=h.useState(!1),[u,d]=h.useState(!1),[f,p]=h.useState(!1),[x,y]=h.useState(!1),[N,v]=h.useState(!1),[j,w]=h.useState(!1),[S,_]=h.useState(null),[E,T]=h.useState(null),A=h.useRef(null),[L,M]=h.useState({firstName:"",lastName:"",email:"",phoneNumber:""}),[F,$]=h.useState({currentPassword:"",newPassword:"",confirmPassword:""});h.useEffect(()=>{e&&(M({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),T(e.profile_picture||null))},[e]),h.useEffect(()=>{document.title="Manage Account | Sari-Sari CRM"},[]);const D=(Z,Y)=>{M(le=>({...le,[Z]:Y}))},q=(Z,Y)=>{$(le=>({...le,[Z]:Y}))},G=Z=>{const Y=Z.target.files?.[0];if(!Y)return;if(!Y.type.startsWith("image/")){W.error("Please select an image file");return}if(Y.size>5*1024*1024){W.error("Image size should be less than 5MB");return}const le=new FileReader;le.onloadend=()=>{_(le.result),T(le.result)},le.readAsDataURL(Y)},U=async Z=>{if(Z.preventDefault(),!L.firstName.trim()||!L.lastName.trim()){W.warn("Please fill in all required fields.");return}o(!0);try{const Y={first_name:L.firstName.trim(),last_name:L.lastName.trim(),phone_number:L.phoneNumber.trim()||null};S!==null&&(Y.profile_picture=S),await se.put("/users/me",Y),await a(),c(!1),_(null),window.dispatchEvent(new CustomEvent("userProfileUpdated")),W.success("Account information updated successfully!")}catch(Y){console.error("Error updating account:",Y);const le=Y.response?.data?.detail||"Failed to update account information. Please try again.";W.error(le)}finally{o(!1)}},V=async Z=>{if(Z.preventDefault(),!F.newPassword||!F.confirmPassword){W.warn("Please fill in all password fields.");return}if(F.newPassword.length<8){W.warn("Password must be at least 8 characters long.");return}if(F.newPassword!==F.confirmPassword){W.warn("New password and confirm password do not match.");return}w(!0);try{const Y={password:F.newPassword};await se.put("/users/me",Y),await a(),$({currentPassword:"",newPassword:"",confirmPassword:""}),window.dispatchEvent(new CustomEvent("userProfileUpdated")),w(!1),W.success("Password changed successfully!")}catch(Y){console.error("Error changing password:",Y);const le=Y.response?.data?.detail||"Failed to change password. Please try again.";W.error(le)}finally{w(!1)}};return n.jsxs("div",{className:"p-2 lg:p-8 font-inter relative",children:[(t||!e)&&n.jsx(Wt,{}),e&&n.jsxs("div",{children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-gray-800 mb-2",children:"Manage Your Profile"}),n.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Update your account information and change your password"})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mb-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2",children:[n.jsx(nn,{className:"text-blue-600"}),"Profile Information"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:!l&&n.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition text-sm",children:[n.jsx(ha,{}),"Edit Profile"]})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 mb-6 pb-6 border-b border-gray-200",children:[n.jsxs("div",{className:"flex-shrink-0 relative group",children:[E?n.jsx("div",{className:"relative",children:n.jsx("img",{src:E,alt:`${e.first_name} ${e.last_name}`,className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full object-cover border-2 border-gray-200 shadow-sm"})}):n.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 text-white flex items-center justify-center text-2xl sm:text-3xl font-semibold border-2 border-gray-200 shadow-sm",children:fue(e.first_name,e.last_name)}),l&&n.jsxs("div",{className:"absolute bottom-0 right-0",children:[n.jsx("input",{type:"file",ref:A,accept:"image/*",onChange:G,className:"hidden",id:"profile-picture-upload"}),n.jsx("label",{htmlFor:"profile-picture-upload",className:"cursor-pointer bg-gray-900 text-white p-1.5 rounded-full shadow-lg hover:bg-gray-800 transition flex items-center justify-center border-2 border-white",title:"Change profile picture",children:n.jsx(u9,{size:14})})]})]}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[e.first_name," ",e.last_name]}),n.jsx("p",{className:"text-gray-600 text-sm",children:e.email}),n.jsx("span",{className:"inline-block mt-2 px-3 py-1 bg-blue-100 text-blue-700 text-xs font-semibold rounded-md",children:e.role})]})]}),l?n.jsxs("form",{onSubmit:U,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["First Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(nn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",value:L.firstName,onChange:Z=>D("firstName",Z.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(nn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",value:L.lastName,onChange:Z=>D("lastName",Z.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),n.jsxs("div",{className:"sm:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Email"}),n.jsxs("div",{className:"relative",children:[n.jsx(sa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"email",value:L.email,disabled:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-600 cursor-not-allowed outline-none",readOnly:!0})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),n.jsxs("div",{className:"sm:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Phone Number"}),n.jsxs("div",{className:"relative",children:[n.jsx(Ot,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"tel",value:L.phoneNumber,onChange:Z=>D("phoneNumber",Z.target.value),placeholder:"+1 (555) 123-4567",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t border-gray-200",children:[n.jsx("button",{type:"button",onClick:()=>{c(!1),M({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),_(null),T(e.profile_picture||null),A.current&&(A.current.value="")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition",disabled:i,children:"Cancel"}),n.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:i,children:[n.jsx(wL,{}),i?"Saving...":"Save Changes"]})]})]}):n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"First Name"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.first_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Name"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.last_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Email"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Phone Number"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.phone_number||"N/A"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[n.jsx(Ao,{className:"text-blue-600"}),"Change Password"]}),n.jsxs("form",{onSubmit:V,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["New Password ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Ao,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",style:x?void 0:{WebkitTextSecurity:"disc"},value:F.newPassword,onChange:Z=>q("newPassword",Z.target.value),placeholder:"Enter new password (min. 8 characters)",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),n.jsx("button",{type:"button",onClick:()=>y(Z=>!Z),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":x?"Hide password":"Show password",children:x?n.jsx(ku,{className:"size-5"}):n.jsx(Eu,{className:"size-5"})})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Confirm New Password ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Ao,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",style:N?void 0:{WebkitTextSecurity:"disc"},value:F.confirmPassword,onChange:Z=>q("confirmPassword",Z.target.value),placeholder:"Confirm new password",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),n.jsx("button",{type:"button",onClick:()=>v(Z=>!Z),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":N?"Hide password":"Show password",children:N?n.jsx(ku,{className:"size-5"}):n.jsx(Eu,{className:"size-5"})})]})]}),n.jsx("div",{className:"pt-4 border-t border-gray-200 flex justify-center lg:justify-start",children:n.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:j,children:[n.jsx(Ao,{}),j?"Changing Password...":"Change Password"]})})]})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mt-6",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[n.jsx(f9,{className:"text-blue-600"}),"Account Information"]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Role"}),n.jsx("span",{className:"inline-block px-3 py-1 bg-blue-100 text-blue-700 text-sm font-semibold rounded-md",children:e.role})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Status"}),n.jsx("span",{className:`inline-block px-3 py-1 text-sm font-semibold rounded-md ${e.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:e.is_active?"Active":"Inactive"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Company"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.company?.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Auth Provider"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.auth_provider?e.auth_provider.charAt(0).toUpperCase()+e.auth_provider.slice(1):"N/A"})]}),e.created_at&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Account Created"}),n.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),e.last_login&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Login"}),n.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.last_login).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})})]})]})]})]})]})}const hue=({isOpen:e,onClose:t})=>{if(!e)return null;const a=[{number:"1",title:"Enterprise Security Commitment",content:["Sari-Sari CRM maintains a security-first architecture designed to protect business data, preserve system integrity, and support continuous operational reliability. Security controls are implemented across administrative, technical, and operational layers to reduce risk and safeguard organizational information."]},{number:"2",title:"Access Governance",content:["The platform enforces strict role-based access controls to ensure that only authorized organizational users can access CRM records, including leads, contacts, accounts, deals, quotes, and scheduling information. Permission boundaries are applied according to user roles and operational responsibilities.","Internal and developer access is tightly restricted, monitored, and permitted only for essential system maintenance under controlled conditions."]},{number:"3",title:"Data Protection Controls",content:["Security measures are designed to:",` Protect confidentiality of business records
 Prevent unauthorized access or disclosure
 Preserve data integrity
 Maintain availability of services`,"Safeguards are reviewed periodically and updated to address evolving threats and operational needs."]},{number:"4",title:"Operational Security",content:["We maintain structured incident management, monitoring, and maintenance processes to support secure system performance. Security events are prioritized and addressed using defined response procedures."]},{number:"5",title:"Shared Responsibility",content:["Organizations are responsible for maintaining secure credential practices, enforcing internal access policies, and promptly reporting suspected security concerns."]},{number:"6",title:"Technical Security Framework",content:["Sari-Sari CRM employs layered security controls aligned with industry best practices to protect data and platform operations."]},{number:"7",title:"Access & Authentication",content:[` Role-based authorization controls
 Credential protection mechanisms
 Session management safeguards`]},{number:"8",title:"Data Protection",content:[` Controlled access to stored business records
 Logical isolation of organizational data
 Integrity protections to prevent unauthorized modification`,"Developer access to production environments is restricted, logged, and limited to operational necessity."]},{number:"9",title:"System Security Measures",content:[` Monitoring for abnormal system behavior
 Controlled maintenance workflows
 Incident response procedures
 Secure update and deployment processes`]},{number:"10",title:"Security Lifecycle",content:["Security practices are continuously evaluated and refined to maintain resilience against emerging risks."]}];return n.jsx("div",{className:"fixed inset-0 bg-black/40 bg-opacity-40 z-50 flex items-center justify-center p-4",onClick:t,children:n.jsxs("div",{className:"bg-white rounded-lg max-w-5xl w-full max-h-[90vh] overflow-hidden",onClick:s=>s.stopPropagation(),children:[n.jsxs("div",{className:"sticky top-0 bg-secondary text-white px-8 py-6 flex items-center justify-between border-b border-accent",children:[n.jsx("div",{children:n.jsx("h2",{className:"text-3xl font-bold",children:"Security Guidelines"})}),n.jsx("button",{onClick:t,className:"text-white hover:text-accent transition-colors text-4xl leading-none",children:""})]}),n.jsxs("div",{className:"overflow-y-auto max-h-[calc(90vh-120px)] px-8 py-6 scrollbar-hide",children:[n.jsx("p",{className:"text-gray-700 mb-6 leading-relaxed",children:"This document outlines the enterprise and technical security measures implemented to protect your business data and ensure the integrity, confidentiality, and availability of the Sari-Sari CRM platform."}),n.jsx("div",{className:"space-y-6",children:a.map((s,r)=>n.jsxs("div",{className:"border-l-4 border-accent pl-6 py-2",children:[n.jsxs("h3",{className:"text-xl font-semibold text-secondary mb-2",children:[s.number,". ",s.title]}),s.content.map((i,o)=>n.jsx("p",{className:"text-gray-700 mb-2 leading-relaxed whitespace-pre-line text-sm",children:i},o))]},r))}),n.jsx("div",{className:"mt-8 pt-6 mb-10 border-t border-gray-200",children:n.jsx("p",{className:"text-gray-600 text-xs leading-relaxed text-center",children:"Security is a shared responsibility. We are committed to maintaining robust protections while working with our customers to ensure secure and responsible use of the platform."})})]}),n.jsx("div",{className:"sticky bottom-0 bg-gray-50 px-8 py-4 border-t border-gray-200",children:n.jsx("button",{onClick:t,className:"w-full bg-accent text-white px-6 py-3 rounded-lg font-semibold hover:bg-secondary transition-colors",children:"Close"})})]})})},gue=({isOpen:e,onClose:t})=>{if(!e)return null;const a=[{number:"1",title:"Support Commitment",content:["Sari-Sari CRM provides operational support to help organizations maintain smooth and reliable use of the platform. Our goal is to resolve issues efficiently and minimize disruption to your business workflows."]},{number:"2",title:"Support Coverage",content:["Support services include assistance with:",` System or feature malfunctions
 Performance concerns
 General platform inquiries`,"Support does not include custom development, third-party integrations outside our platform, or user-side hardware/network issues."]},{number:"3",title:"User Responsibilities",content:["Organizations and users help maintain efficient support by:",` Reporting issues promptly
 Providing accurate information
 Following role permissions
 Maintaining secure account access`]},{number:"4",title:"Continuous Improvement",content:["Support feedback is used to improve system performance, reliability, and user experience."]},{number:"5",title:"Support & Reporting",content:["Users should submit support requests through designated communication channels, including:",n.jsx("strong",{children:"Sari-Sari CRM Administration"},"dept"),n.jsx("a",{href:"https://www.sari-sari.com/",className:"font-bold text-accent hover:underline",target:"_blank",rel:"noopener noreferrer",children:"sari-sari.com"},"email"),"Providing clear details helps accelerate resolution."]}];return n.jsx("div",{className:"fixed inset-0 bg-black/40 bg-opacity-40 z-50 flex items-center justify-center p-4",onClick:t,children:n.jsxs("div",{className:"bg-white rounded-lg max-w-5xl w-full max-h-[90vh] overflow-hidden",onClick:s=>s.stopPropagation(),children:[n.jsxs("div",{className:"sticky top-0 bg-secondary text-white px-8 py-6 flex items-center justify-between border-b border-accent",children:[n.jsx("div",{children:n.jsx("h2",{className:"text-3xl font-bold",children:"Support"})}),n.jsx("button",{onClick:t,className:"text-white hover:text-accent transition-colors text-4xl leading-none",children:""})]}),n.jsxs("div",{className:"overflow-y-auto max-h-[calc(90vh-120px)] px-8 py-6 scrollbar-hide",children:[n.jsx("p",{className:"text-gray-700 mb-6 leading-relaxed",children:"Sari-Sari CRM is committed to providing responsive and effective support to help your organization succeed. Our support team is here to assist with platform access, features, performance, and general questions."}),n.jsx("div",{className:"space-y-6",children:a.map((s,r)=>n.jsxs("div",{className:"border-l-4 border-accent pl-6 py-2",children:[n.jsxs("h3",{className:"text-xl font-semibold text-secondary mb-2",children:[s.number,". ",s.title]}),s.content.map((i,o)=>n.jsx("p",{className:"text-gray-700 mb-2 leading-relaxed whitespace-pre-line text-sm",children:i},o))]},r))}),n.jsx("div",{className:"mt-8 pt-6 mb-10 border-t border-gray-200",children:n.jsx("p",{className:"text-gray-600 text-xs leading-relaxed text-center",children:"We value your feedback and continuously improve our support services based on your experience. Thank you for using Sari-Sari CRM."})})]}),n.jsx("div",{className:"sticky bottom-0 bg-gray-50 px-8 py-4 border-t border-gray-200",children:n.jsx("button",{onClick:t,className:"w-full bg-accent text-white px-6 py-3 rounded-lg font-semibold hover:bg-secondary transition-colors",children:"Close"})})]})})},pue=()=>n.jsx("header",{className:"bg-secondary text-white py-4 border-b border-accent",children:n.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex items-center justify-between py-3",children:[n.jsxs(rd,{to:"/",className:"text-2xl font-bold",children:["Sari-Sari ",n.jsx("span",{className:"text-accent",children:"CRM"})]}),n.jsxs("nav",{className:"flex space-x-8",children:[n.jsx(rd,{to:"/resources",className:"hover:text-accent transition-colors",children:"Resources"}),n.jsx(rd,{to:"/legal",className:"hover:text-accent transition-colors",children:"Legal"})]})]})})}),xue=()=>{const[e,t]=h.useState(!1),[a,s]=h.useState(!1);h.useEffect(()=>{document.title="Resources - Sari-Sari CRM"},[]);const r=[{title:"Security",description:"Understand our security practices.",action:()=>t(!0)},{title:"Support",description:"Get help from our support team and knowledge base.",action:()=>s(!0)}];return n.jsxs("div",{className:"font-manrope",children:[n.jsx(pue,{}),n.jsx(hue,{isOpen:e,onClose:()=>t(!1)}),n.jsx(gue,{isOpen:a,onClose:()=>s(!1)}),n.jsx("main",{className:"bg-paper-white min-h-screen py-16",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsx("h1",{className:"text-5xl font-bold text-secondary mb-4",children:"Resources"}),n.jsx("p",{className:"text-lg text-secondary mb-12",children:"Everything you need to succeed with Sari-Sari CRM"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:r.map((i,o)=>n.jsxs("div",{className:"p-6 bg-white border border-gray-200 rounded-lg shadow-md hover:shadow-lg transition-shadow",children:[n.jsx("h3",{className:"text-2xl font-semibold text-secondary mb-2",children:i.title}),n.jsx("p",{className:"text-gray-600 mb-4",children:i.description}),i.action?n.jsx("button",{onClick:i.action,className:"text-accent font-semibold hover:text-secondary transition-colors",children:"Learn More "}):n.jsx("a",{href:i.link,className:"text-accent font-semibold hover:text-secondary transition-colors",children:"Learn More "})]},o))})]})})]})},yue=({isOpen:e,onClose:t})=>{if(!e)return null;const a=[{number:"1",title:"Authorized Use",content:["Sari-Sari CRM  is an internal company platform intended to manage leads, deals, accounts, contacts, scheduling, and task workflows.","Access is granted according to employment role and operational responsibilities. Users are required to safeguard their credentials and operate strictly within assigned permissions. Unauthorized access, credential sharing, or misuse of the System is prohibited and may result administrative action."]},{number:"2",title:"System Purpose",content:["The System supports company sales operations, including:",` Lead and deal pipeline management
 Account and contact records
 Scheduling of calls and meetings
 Task tracking and follow-ups
 Activity logging and reporting`]},{number:"3",title:"Role-Based Responsibilities",content:["Users are assigned permissions based on their role:","Administrator  Full configuration, oversight, and system governance.","Group Manager  Team supervision, reporting, and workflow monitoring.","Manager  Operational coordination and performance oversight.","Sales Users  Execution of sales activities and record maintenance.","Users must operate strictly within assigned permissions."]},{number:"4",title:"Data Integrity & Confidentiality",content:["All information stored in the System is confidential company data.",`Users must:
 Maintain accurate records
 Protect customer and sales information
 Avoid unauthorized disclosure or manipulation`,"Intentional misuse may lead to disciplinary action."]},{number:"5",title:"Activity Logging & Monitoring",content:["System actions may be recorded for accountability, performance review, and security purposes. Continued use indicates consent to such monitoring."]},{number:"6",title:"Acceptable Conduct",content:[`Users must not:
 Enter false or misleading information
 Delete or alter records without authorization
 Attempt to bypass security measures
 Use the System for personal or unrelated activities`,"Professional conduct is required at all times."]},{number:"7",title:"Scheduling & Task Accountability",content:["Users are responsible for maintaining accurate scheduling records and completing assigned tasks in good faith to support operational efficiency."]},{number:"8",title:"Security Responsibilities",content:["Users must safeguard login credentials and immediately report suspicious activity. Account sharing is prohibited."]},{number:"9",title:"Intellectual Property",content:["The System, including its interface, workflows, and software components, is proprietary company property and may not be copied or redistributed without authorization."]},{number:"10",title:"System Availability",content:["The company will maintain reasonable uptime but does not guarantee uninterrupted access due to maintenance or unforeseen technical issues."]},{number:"11",title:"Violations",content:[`Misuse of the System may result in:
 Access restriction or suspension
 Internal disciplinary action
 Further administrative review`,"depending on severity."]},{number:"12",title:"Support & Reporting",content:["Questions or concerns regarding System use should be directed to:",n.jsx("strong",{children:"Sari-Sari CRM Administration"},"dept"),n.jsx("a",{href:"https://www.sari-sari.com/",className:"font-bold text-accent hover:underline",target:"_blank",rel:"noopener noreferrer",children:"sari-sari.com"},"email")]}];return n.jsx("div",{className:"fixed inset-0 bg-black/40 bg-opacity-40 z-50 flex items-center justify-center p-4",onClick:t,children:n.jsxs("div",{className:"bg-white rounded-lg max-w-5xl w-full max-h-[90vh] overflow-hidden",onClick:s=>s.stopPropagation(),children:[n.jsxs("div",{className:"sticky top-0 bg-secondary text-white px-8 py-6 flex items-center justify-between border-b border-accent",children:[n.jsx("div",{children:n.jsx("h2",{className:"text-3xl font-bold",children:"Terms of Use"})}),n.jsx("button",{onClick:t,className:"text-white hover:text-accent transition-colors text-4xl leading-none",children:""})]}),n.jsxs("div",{className:"overflow-y-auto max-h-[calc(90vh-120px)] px-8 py-6 scrollbar-hide",children:[n.jsx("p",{className:"text-gray-700 mb-6 leading-relaxed",children:"These Terms of Use govern your access to and use of the Sari-Sari CRM system. By accessing or using the System, you acknowledge that you have read, understood, and agree to be bound by these terms."}),n.jsx("div",{className:"space-y-6",children:a.map((s,r)=>n.jsxs("div",{className:"border-l-4 border-accent pl-6 py-2",children:[n.jsxs("h3",{className:"text-xl font-semibold text-secondary mb-2",children:[s.number,". ",s.title]}),s.content.map((i,o)=>n.jsx("p",{className:"text-gray-700 mb-2 leading-relaxed whitespace-pre-line text-sm",children:i},o))]},r))}),n.jsx("div",{className:"mt-8 pt-6 mb-10 border-t border-gray-200",children:n.jsx("p",{className:"text-gray-600 text-xs leading-relaxed text-center",children:"By continuing to use Sari-Sari CRM, you acknowledge that you have read and agree to these Terms of Use. If you do not agree with any part of these terms, you must discontinue use of the System immediately."})})]}),n.jsx("div",{className:"sticky bottom-0 bg-gray-50 px-8 py-4 border-t border-gray-200",children:n.jsx("button",{onClick:t,className:"w-full bg-accent text-white px-6 py-3 rounded-lg font-semibold hover:bg-secondary transition-colors",children:"Close"})})]})})},bue=({isOpen:e,onClose:t})=>{if(!e)return null;const a=[{number:"1",title:"Users and Roles",content:["The system supports multiple roles with distinct access permissions:",`Admin  full system access and management.
Group Manager  oversees multiple teams and manages metrics.
Manager  manages teams and monitors pipeline progress.
Sales  accesses leads, contacts, accounts, deals, quotes, target and schedules.`,"Access to business data is strictly limited to authorized users in your organization based on role."]},{number:"2",title:"Data We Collect",content:["We may collect the following types of data:",`Account Information: Names, email addresses, phone numbers, company details, and login credentials.
Business Data: Leads, contacts, accounts, deals, quotes, notes, and pipeline information entered by your organization.
Scheduling Data: Tasks, meetings, and calls associated with your account or team.
Usage Data: IP addresses, device information, login activity, and feature usage for system analytics.
Cookies & Tracking: Cookies or similar technologies for authentication, and performance monitoring.`]},{number:"3",title:"Purpose of Data Processing",content:["Your data is processed only to:",` Provide, operate, and maintain the CRM platform.
 Manage user roles, permissions, and workflow operations.
 Facilitate collaboration and sales processes within your organization. 
 Comply with legal obligations and protect the security of the platform.`]},{number:"4",title:"Developer Access and Confidentiality",content:["We respect your business privacy. Our developers and internal staff cannot access business transaction information.","Developer access is limited to technical maintenance, bug fixing, system monitoring, and improvements. Access is strictly controlled, logged, and does not include the ability to view or extract business-specific information."]},{number:"5",title:"Data Sharing",content:["We do not sell or trade your data. Data may be shared only with:",`Service Providers: Vendors who help host, operate, or maintain the CRM. They are bound by confidentiality agreements.
Legal Requirements: Where disclosure is required by law, regulation, or legal process.`]},{number:"6",title:"Data Security",content:["We implement reasonable technical, administrative, and organizational measures to protect your data from unauthorized access, disclosure, alteration, or destruction. Users must also maintain secure login credentials and account access."]},{number:"7",title:"Data Retention",content:["We retain data only as long as necessary to provide services and comply with legal obligations. Your organization's Admins may request deletion of user accounts and associated business data."]},{number:"8",title:"Consent",content:["By using our CRM, your organization consents to the collection, processing, and storage of data as described in this Privacy Policy. Admins are responsible for ensuring that all users within their organization are aware of this policy and that proper consent has been obtained where required."]},{number:"9",title:"Third-Party Integrations",content:["Our CRM may integrate with third-party tools (e.g., email, calendar, analytics). We are not responsible for the privacy practices of these third parties."]},{number:"10",title:"Data Processing Agreement",content:["By using Sari-Sari CRM, your organization acknowledges and agrees that:",` Your organization is the Data Controller of all business and personal data entered into the CRM. 
 We implement technical and organizational measures to ensure data confidentiality, integrity, and security.
 Developer access to business transaction data is strictly restricted and logged, and we will not use or disclose your organization's business data for any purpose other than providing and maintaining the CRM services.`]}];return n.jsx("div",{className:"fixed inset-0 bg-black/40 bg-opacity-40 z-50 flex items-center justify-center p-4",onClick:t,children:n.jsxs("div",{className:"bg-white rounded-lg max-w-5xl w-full max-h-[90vh] overflow-hidden",onClick:s=>s.stopPropagation(),children:[n.jsxs("div",{className:"sticky top-0 bg-secondary text-white px-8 py-6 flex items-center justify-between border-b border-accent",children:[n.jsx("div",{children:n.jsx("h2",{className:"text-3xl font-bold",children:"Privacy Policy"})}),n.jsx("button",{onClick:t,className:"text-white hover:text-accent transition-colors text-4xl leading-none",children:""})]}),n.jsxs("div",{className:"overflow-y-auto max-h-[calc(90vh-120px)] px-8 py-6 scrollbar-hide",children:[n.jsx("p",{className:"text-gray-700 mb-6 leading-relaxed",children:"Sari-Sari CRM provides a B2B CRM platform designed to help manage businesses. Protecting your business and personal data is a top priority. This Privacy Policy explains how we collect, process, store, and protect data in compliance with applicable."}),n.jsx("div",{className:"space-y-6",children:a.map((s,r)=>n.jsxs("div",{className:"border-l-4 border-accent pl-6 py-2",children:[n.jsxs("h3",{className:"text-xl font-semibold text-secondary mb-2",children:[s.number,". ",s.title]}),s.content.map((i,o)=>n.jsx("p",{className:"text-gray-700 mb-2 leading-relaxed whitespace-pre-line text-sm",children:i},o))]},r))}),n.jsx("div",{className:"mt-8 pt-6 mb-10 border-t border-gray-200",children:n.jsx("p",{className:"text-gray-600 text-xs leading-relaxed text-center",children:"Your privacy and data security are important to us. If you have any questions about this Privacy Policy, please contact our CRM Administration team."})})]}),n.jsx("div",{className:"sticky bottom-0 bg-gray-50 px-8 py-4 border-t border-gray-200",children:n.jsx("button",{onClick:t,className:"w-full bg-accent text-white px-6 py-3 rounded-lg font-semibold hover:bg-secondary transition-colors",children:"Close"})})]})})},vue=({isOpen:e,onClose:t})=>{if(!e)return null;const a=[{number:"1",title:"Purpose",content:['This Service Level Agreement ("SLA") defines the service standards, availability commitments, support expectations, and responsibilities associated with the use of Sari-Sari CRM, a business-to-business customer relationship management platform.']},{number:"2",title:"Service Availability",content:["We work to keep the CRM available 99.5% of the time each month so your team can manage work without interruption.","Planned maintenance is announced in advance whenever possible. Emergency maintenance may happen if needed to keep the system secure and stable.","Downtime caused by scheduled maintenance, internet or third-party issues, user device problems, or events outside our control is not included in availability targets."]},{number:"3",title:"Performance Standards",content:["The CRM platform is designed to:",` Provide consistent access to business records and sales workflows
 Support role-based system operations`,"Performance may vary depending on user device, internet connection, and data volume."]},{number:"4",title:"Data Protection & Confidentiality",content:["We prioritize business data security:",` Access to CRM data is restricted to authorized organizational users
 Developers and internal staff do not access business transaction data
 Security safeguards are implemented to protect confidentiality and integrity`]},{number:"5",title:"Incident Management",content:["If a service disruption occurs:",` Issues are logged and prioritized based on severity
 Mitigation steps are started as quickly as possible
 Users are informed of significant incidents when appropriate`]},{number:"6",title:"Customer Responsibilities",content:["Organizations using the CRM agree to:",` Maintain secure login credentials
 Use the system in accordance with assigned roles
 Report issues promptly
 Ensure stable internet and device compatibility`]},{number:"7",title:"Maintenance & Updates",content:["We may perform:",` Routine maintenance
 Security updates
 Feature improvements`,"Maintenance may temporarily affect availability."]},{number:"8",title:"Limitations",content:["Service commitments do not apply to disruptions caused by:",` User misuse or unauthorized modifications
 Third-party service failures
 Network or infrastructure outside our control`]},{number:"9",title:"Review & Modification",content:["This SLA may be updated to reflect service improvements or operational changes. Continued use of the CRM indicates acceptance of updates."]}];return n.jsx("div",{className:"fixed inset-0 bg-black/40 bg-opacity-40 z-50 flex items-center justify-center p-4",onClick:t,children:n.jsxs("div",{className:"bg-white rounded-lg max-w-5xl w-full max-h-[90vh] overflow-hidden",onClick:s=>s.stopPropagation(),children:[n.jsxs("div",{className:"sticky top-0 bg-secondary text-white px-8 py-6 flex items-center justify-between border-b border-accent",children:[n.jsx("div",{children:n.jsx("h2",{className:"text-3xl font-bold",children:"Service Level Agreement"})}),n.jsx("button",{onClick:t,className:"text-white hover:text-accent transition-colors text-4xl leading-none",children:""})]}),n.jsxs("div",{className:"overflow-y-auto max-h-[calc(90vh-120px)] px-8 py-6 scrollbar-hide",children:[n.jsx("p",{className:"text-gray-700 mb-6 leading-relaxed",children:"This Service Level Agreement defines the service standards, availability commitments, support expectations, and responsibilities associated with the use of Sari-Sari CRM."}),n.jsx("div",{className:"space-y-6",children:a.map((s,r)=>n.jsxs("div",{className:"border-l-4 border-accent pl-6 py-2",children:[n.jsxs("h3",{className:"text-xl font-semibold text-secondary mb-2",children:[s.number,". ",s.title]}),s.content.map((i,o)=>n.jsx("p",{className:"text-gray-700 mb-2 leading-relaxed whitespace-pre-line text-sm",children:i},o))]},r))}),n.jsx("div",{className:"mt-8 pt-6 mb-10 border-t border-gray-200",children:n.jsx("p",{className:"text-gray-600 text-xs leading-relaxed text-center",children:"This SLA may be updated to reflect service improvements or operational changes. Continued use of the CRM indicates acceptance of updates."})})]}),n.jsx("div",{className:"sticky bottom-0 bg-gray-50 px-8 py-4 border-t border-gray-200",children:n.jsx("button",{onClick:t,className:"w-full bg-accent text-white px-6 py-3 rounded-lg font-semibold hover:bg-secondary transition-colors",children:"Close"})})]})})},wue=({isOpen:e,onClose:t})=>{if(!e)return null;const a=[{number:"1",title:"Data Privacy Compliance",content:["Our platform is built to align with applicable data protection regulations, including:",` Philippine Data Privacy Act (RA 10173)
 Applicable international privacy standards where required`,"We support lawful collection, processing, and storage of business and personal information handled within the CRM."]},{number:"2",title:"Access & Confidentiality Controls",content:["We enforce role-based access controls to ensure that only authorized users within an organization can view or manage business data such as leads, contacts, accounts, deals, and quotes.","Developer and internal access is restricted to system maintenance and operational support under controlled conditions."]},{number:"3",title:"Security Practices",content:["We implement reasonable administrative, technical, and organizational safeguards designed to:",` Protect data confidentiality
 Prevent unauthorized access
 Maintain system integrity
 Support operational reliability`,"Security measures are reviewed and improved as part of ongoing system maintenance."]},{number:"4",title:"Operational Compliance",content:["The CRM follows structured operational processes to support:",` System availability and maintenance standards
 Incident management and issue resolution
 Data handling accountability
 Responsible service delivery`]},{number:"5",title:"Continuous Improvement",content:["Compliance and security practices are regularly evaluated to adapt to evolving regulatory expectations and technology standards."]}];return n.jsx("div",{className:"fixed inset-0 bg-black/40 bg-opacity-40 z-50 flex items-center justify-center p-4",onClick:t,children:n.jsxs("div",{className:"bg-white rounded-lg max-w-5xl w-full max-h-[90vh] overflow-hidden",onClick:s=>s.stopPropagation(),children:[n.jsxs("div",{className:"sticky top-0 bg-secondary text-white px-8 py-6 flex items-center justify-between border-b border-accent",children:[n.jsx("div",{children:n.jsx("h2",{className:"text-3xl font-bold",children:"Compliance Standards & Commitments"})}),n.jsx("button",{onClick:t,className:"text-white hover:text-accent transition-colors text-4xl leading-none",children:""})]}),n.jsxs("div",{className:"overflow-y-auto max-h-[calc(90vh-120px)] px-8 py-6 scrollbar-hide",children:[n.jsx("p",{className:"text-gray-700 mb-6 leading-relaxed",children:"Sari-Sari CRM is designed to support responsible business data management while aligning with recognized privacy, security, and operational best practices. We are committed to maintaining safeguards that protect customer and organizational information."}),n.jsx("div",{className:"space-y-6",children:a.map((s,r)=>n.jsxs("div",{className:"border-l-4 border-accent pl-6 py-2",children:[n.jsxs("h3",{className:"text-xl font-semibold text-secondary mb-2",children:[s.number,". ",s.title]}),s.content.map((i,o)=>n.jsx("p",{className:"text-gray-700 mb-2 leading-relaxed whitespace-pre-line text-sm",children:i},o))]},r))}),n.jsx("div",{className:"mt-8 pt-6 mb-10 border-t border-gray-200",children:n.jsx("p",{className:"text-gray-600 text-xs leading-relaxed text-center",children:"Compliance and security practices are regularly evaluated to adapt to evolving regulatory expectations and technology standards."})})]}),n.jsx("div",{className:"sticky bottom-0 bg-gray-50 px-8 py-4 border-t border-gray-200",children:n.jsx("button",{onClick:t,className:"w-full bg-accent text-white px-6 py-3 rounded-lg font-semibold hover:bg-secondary transition-colors",children:"Close"})})]})})},Nue=()=>n.jsx("header",{className:"bg-secondary text-white py-4 border-b border-accent",children:n.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex items-center justify-between py-3",children:[n.jsxs(rd,{to:"/",className:"text-2xl font-bold",children:["Sari-Sari ",n.jsx("span",{className:"text-accent",children:"CRM"})]}),n.jsxs("nav",{className:"flex space-x-8",children:[n.jsx(rd,{to:"/resources",className:"hover:text-accent transition-colors",children:"Resources"}),n.jsx(rd,{to:"/legal",className:"hover:text-accent transition-colors",children:"Legal"})]})]})})}),jue=()=>{const[e,t]=h.useState(!1),[a,s]=h.useState(!1),[r,i]=h.useState(!1),[o,l]=h.useState(!1);h.useEffect(()=>{document.title="Legal - Sari-Sari CRM"},[]);const c=[{title:"Terms",description:"Our terms of service and conditions of use.",action:()=>t(!0)},{title:"Privacy",description:"How we protect and handle your personal data.",action:()=>s(!0)},{title:"Service Level Agreement (SLA)",description:"Service level agreements and guarantees.",action:()=>i(!0)},{title:"Compliance",description:"Our compliance standards.",action:()=>l(!0)}];return n.jsxs("div",{className:"font-manrope",children:[n.jsx(Nue,{}),n.jsx(yue,{isOpen:e,onClose:()=>t(!1)}),n.jsx(bue,{isOpen:a,onClose:()=>s(!1)}),n.jsx(vue,{isOpen:r,onClose:()=>i(!1)}),n.jsx(wue,{isOpen:o,onClose:()=>l(!1)}),n.jsx("main",{className:"bg-paper-white min-h-screen py-16",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsx("h1",{className:"text-5xl font-bold text-secondary mb-4",children:"Legal"}),n.jsx("p",{className:"text-lg text-secondary mb-12",children:"Important legal information and policies"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:c.map((u,d)=>n.jsxs("div",{className:"p-6 bg-white border border-gray-200 rounded-lg shadow-md hover:shadow-lg transition-shadow",children:[n.jsx("h3",{className:"text-2xl font-semibold text-secondary mb-2",children:u.title}),n.jsx("p",{className:"text-gray-600 mb-4",children:u.description}),u.action?n.jsx("button",{onClick:u.action,className:"text-accent font-semibold hover:text-secondary transition-colors",children:"Read More "}):n.jsx("a",{href:u.link,className:"text-accent font-semibold hover:text-secondary transition-colors",children:"Read More "})]},d))})]})})]})},CN=e=>{const t="https://crm.sari-sari.com";try{const a=new URL(t),s=a.protocol==="https:"?"wss":"ws",r=a.hostname,i=a.port||(a.protocol==="https:"?443:80),o=`${s}://${r}:${i}/ws/notifications?user_id=${e}`;return console.log(" WebSocket URL:",o),o}catch(a){return console.error("Error parsing API URL:",a),`ws://localhost:8000/ws/notifications?user_id=${e}`}};function Cue({toggleSidebar:e}){const[t,a]=h.useState(!1),[s,r]=h.useState(!1),[i,o]=h.useState([]),[l,c]=h.useState(0),u=h.useRef(null),d=h.useRef(null),f=Jt(),p=jt(),{logout:x}=Ks(),{user:y,fetchUser:N}=qt(),j={"/admin/dashboard":"Dashboard","/admin/accounts":"Accounts","/admin/contacts":"Contacts","/reports":"Reports","/leads":"Leads","/admin/Audit":"Audit","/admin/targets":"Targets","/admin/leads":"Leads","/admin/quotes":"Quotes","/admin/users":"Users","/admin/deals":"Deals"}[f.pathname]||"Admin Panel";return h.useEffect(()=>{const w=()=>{N()};return window.addEventListener("userProfileUpdated",w),()=>{window.removeEventListener("userProfileUpdated",w)}},[N]),h.useEffect(()=>{if(!y?.id)return;const w=CN(y.id);console.log(" Connecting to WebSocket:",w);const S=new WebSocket(w);let _;const E=()=>{_=setTimeout(()=>{console.log(" Attempting WebSocket reconnection...")},3e3)};return S.onopen=()=>{console.log(" Admin WS Connected"),clearTimeout(_)},S.onmessage=T=>{try{const A=JSON.parse(T.data);console.log(" Notification received:",A),o(L=>[A,...L]),c(L=>L+1)}catch(A){console.error("Error parsing notification:",A)}},S.onerror=T=>{console.error(" Admin WS Error:",T)},S.onclose=()=>{console.log(" Admin WS Disconnected"),E()},()=>{clearTimeout(_),S&&S.readyState===WebSocket.OPEN&&S.close()}},[y?.id]),h.useEffect(()=>{function w(S){u.current&&!u.current.contains(S.target)&&a(!1),d.current&&!d.current.contains(S.target)&&r(!1)}return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),n.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:n.jsx(Zf,{className:"text-2xl"})}),y?.company?.company_logo&&n.jsx("img",{src:y.company.company_logo,alt:"Company Logo",className:"w-20 h-10 object-contain rounded"}),n.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:j})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"relative",ref:d,children:[n.jsxs("button",{onClick:()=>r(!s),className:"relative text-gray-600 hover:text-gray-800 transition",children:[n.jsx(cx,{className:"text-xl"}),l>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] w-4 h-4 flex items-center justify-center rounded-full font-semibold",children:l})]}),s&&n.jsxs("div",{className:"absolute right-0 mt-3 w-80 bg-white rounded-xl shadow-lg border z-50 overflow-hidden animate-fade-in",children:[n.jsxs("div",{className:"p-3 border-b bg-gray-50 flex justify-between items-center",children:[n.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:"Notifications"}),n.jsx("button",{onClick:()=>{o([]),c(0)},className:"text-xs text-blue-600 hover:underline",children:"Clear"})]}),n.jsx("div",{className:"max-h-60 overflow-y-auto",children:i.length>0?i.map((w,S)=>n.jsx("div",{className:"p-3 border-b text-sm hover:bg-gray-50 cursor-pointer",children:w.title||w.message||"New Update"},S)):n.jsx("div",{className:"p-4 text-center text-gray-500 text-xs",children:"No notifications"})})]})]}),n.jsxs("div",{className:"relative",ref:u,children:[n.jsxs("button",{onClick:()=>a(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[n.jsx("img",{src:y?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 aspect-square object-cover rounded-full"}),n.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[y?.first_name," ",y?.last_name]})]}),t&&n.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4",children:[n.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[n.jsx("img",{src:y?.profile_picture||"https://via.placeholder.com/80",alt:"Profile",className:"w-16 h-16 rounded-full object-cover"}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[y?.first_name," ",y?.middle_name," ",y?.last_name]}),n.jsx("p",{className:"text-[11px] text-gray-600 font-light w-full truncate",children:"Admin"})]})]}),n.jsxs("div",{className:"mt-6 space-y-1 px-4 text-left",children:[n.jsx("button",{onClick:()=>{p("/admin/users"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Invite Your Team"}),n.jsx("button",{onClick:()=>{p("/admin/manage-account"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Manage Your Account"}),n.jsx("button",{onClick:()=>{p("/admin/help"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Help"}),n.jsx("div",{className:"border-t border-gray-200 my-2"}),n.jsx("button",{onClick:x,className:"block w-full text-sm text-red-600 hover:text-red-700 hover:bg-gray-50 py-2 rounded text-left",children:"Logout"})]})]})]})]})]})}function Sue(){const[e,t]=h.useState(!1),[a,s]=h.useState(!1),[r,i]=h.useState(!1),[o,l]=h.useState(!1),c=Jt(),{user:u}=qt();h.useEffect(()=>{u&&console.log("Fetched user:",u)},[u]),h.useEffect(()=>{document.title="Admin Panel | Sari-Sari CRM"},[]);const f=["/admin/accounts","/admin/contacts","/admin/leads","/admin/deals","/admin/quotes","/admin/targets"].includes(c.pathname);h.useEffect(()=>{f&&t(!0)},[c.pathname]);const p="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",x="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition";return n.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[n.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${o?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[n.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[n.jsxs("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:[" Sari-Sari.CRM"," ",n.jsx("span",{className:"text-[12px] text-gray-700 font-medium align-bottom",children:"v2"})]}),u&&u.company&&n.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:u.company.company_name})]}),n.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[n.jsxs(Ft,{to:"/admin/dashboard",className:({isActive:y})=>y?p:x,children:[n.jsx(dx,{className:"text-lg"}),n.jsx("span",{children:"Dashboard"})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>t(!e),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(tn,{className:"text-lg"}),"Sales"]}),n.jsx(Lt,{className:`transition-transform ${e?"rotate-180":""}`})]}),e&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(Ft,{to:"/admin/accounts",className:({isActive:y})=>y?p:x,children:[n.jsx(wd,{})," Accounts"]}),n.jsxs(Ft,{to:"/admin/contacts",className:({isActive:y})=>y?p:x,children:[n.jsx(nn,{})," Contacts"]}),n.jsxs(Ft,{to:"/admin/leads",className:({isActive:y})=>y?p:x,children:[n.jsx(Kn,{})," Leads"]}),n.jsxs(Ft,{to:"/admin/deals",className:({isActive:y})=>y?p:x,children:[n.jsx(tn,{})," Deals"]}),n.jsxs(Ft,{to:"/admin/quotes",className:({isActive:y})=>y?p:x,children:[n.jsx(fn,{})," Quotes"]}),n.jsxs(Ft,{to:"/admin/targets",className:({isActive:y})=>y?p:x,children:[n.jsx(mr,{})," Targets"]})]})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!a),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(ks,{className:"text-lg"}),"Activity"]}),n.jsx(Lt,{className:`transition-transform ${a?"rotate-180":""}`})]}),a&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(Ft,{to:"/admin/tasks",className:({isActive:y})=>y?p:x,children:[n.jsx(Qt,{})," Tasks"]}),n.jsxs(Ft,{to:"/admin/meetings",className:({isActive:y})=>y?p:x,children:[n.jsx(Pt,{})," Meetings"]}),n.jsxs(Ft,{to:"/admin/calls",className:({isActive:y})=>y?p:x,children:[n.jsx(zs,{})," Calls"]}),n.jsxs(Ft,{to:"/admin/audit",className:({isActive:y})=>y?p:x,children:[n.jsx(ks,{})," Audit"]})]})]}),n.jsx("div",{children:n.jsx(Ft,{to:"/admin/territory",className:({isActive:y})=>y?p:x,children:n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Zl,{className:"text-lg"}),"Territory"]})})}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!r),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(NL,{className:"text-lg"}),"Settings"]}),n.jsx(Lt,{className:`transition-transform ${r?"rotate-180":""}`})]}),r&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(Ft,{to:"/admin/users",className:({isActive:y})=>y?p:x,children:[n.jsx(ra,{})," Users"]}),n.jsxs(Ft,{to:"/admin/manage-account",className:({isActive:y})=>y?p:x,children:[n.jsx(nn,{}),"Your Profile"]}),n.jsxs(Ft,{to:"/admin/company-details",className:({isActive:y})=>y?p:x,children:[n.jsx(iN,{}),"Organization"]})]})]})]}),n.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),o&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>l(!1)}),n.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[n.jsx(Cue,{toggleSidebar:()=>l(!o)}),n.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:n.jsx(tx,{})})]})]})}function _ue(e){return At({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M160 0c17.7 0 32 14.3 32 32l0 35.7c1.6 .2 3.1 .4 4.7 .7c.4 .1 .7 .1 1.1 .2l48 8.8c17.4 3.2 28.9 19.9 25.7 37.2s-19.9 28.9-37.2 25.7l-47.5-8.7c-31.3-4.6-58.9-1.5-78.3 6.2s-27.2 18.3-29 28.1c-2 10.7-.5 16.7 1.2 20.4c1.8 3.9 5.5 8.3 12.8 13.2c16.3 10.7 41.3 17.7 73.7 26.3l2.9 .8c28.6 7.6 63.6 16.8 89.6 33.8c14.2 9.3 27.6 21.9 35.9 39.5c8.5 17.9 10.3 37.9 6.4 59.2c-6.9 38-33.1 63.4-65.6 76.7c-13.7 5.6-28.6 9.2-44.4 11l0 33.4c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-34.9c-.4-.1-.9-.1-1.3-.2l-.2 0s0 0 0 0c-24.4-3.8-64.5-14.3-91.5-26.3c-16.1-7.2-23.4-26.1-16.2-42.2s26.1-23.4 42.2-16.2c20.9 9.3 55.3 18.5 75.2 21.6c31.9 4.7 58.2 2 76-5.3c16.9-6.9 24.6-16.9 26.8-28.9c1.9-10.6 .4-16.7-1.3-20.4c-1.9-4-5.6-8.4-13-13.3c-16.4-10.7-41.5-17.7-74-26.3l-2.8-.7s0 0 0 0C119.4 279.3 84.4 270 58.4 253c-14.2-9.3-27.5-22-35.8-39.6c-8.4-17.9-10.1-37.9-6.1-59.2C23.7 116 52.3 91.2 84.8 78.3c13.3-5.3 27.9-8.9 43.2-11L128 32c0-17.7 14.3-32 32-32z"},child:[]}]})(e)}function Aue(e){return At({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M544 248l0 3.3 69.7-69.7c21.9-21.9 21.9-57.3 0-79.2L535.6 24.4c-21.9-21.9-57.3-21.9-79.2 0L416.3 64.5c-2.7-.3-5.5-.5-8.3-.5L296 64c-37.1 0-67.6 28-71.6 64l-.4 0 0 120c0 22.1 17.9 40 40 40s40-17.9 40-40l0-72c0 0 0-.1 0-.1l0-15.9 16 0 136 0c0 0 0 0 .1 0l7.9 0c44.2 0 80 35.8 80 80l0 8zM336 192l0 56c0 39.8-32.2 72-72 72s-72-32.2-72-72l0-118.6c-35.9 6.2-65.8 32.3-76 68.2L99.5 255.2 26.3 328.4c-21.9 21.9-21.9 57.3 0 79.2l78.1 78.1c21.9 21.9 57.3 21.9 79.2 0l37.7-37.7c.9 0 1.8 .1 2.7 .1l160 0c26.5 0 48-21.5 48-48c0-5.6-1-11-2.7-16l2.7 0c26.5 0 48-21.5 48-48c0-12.8-5-24.4-13.2-33c25.7-5 45.1-27.6 45.2-54.8l0-.4c-.1-30.8-25.1-55.8-56-55.8c0 0 0 0 0 0l-120 0z"},child:[]}]})(e)}function Tue(e){return At({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M64 32C46.3 32 32 46.3 32 64l0 64c-17.7 0-32 14.3-32 32s14.3 32 32 32l0 32c-17.7 0-32 14.3-32 32s14.3 32 32 32l0 64 0 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-64 80 0c68.4 0 127.7-39 156.8-96l19.2 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-.7 0c.5-5.3 .7-10.6 .7-16s-.2-10.7-.7-16l.7 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-19.2 0C303.7 71 244.4 32 176 32L64 32zm190.4 96L96 128l0-32 80 0c30.5 0 58.2 12.2 78.4 32zM96 192l190.9 0c.7 5.2 1.1 10.6 1.1 16s-.4 10.8-1.1 16L96 224l0-32zm158.4 96c-20.2 19.8-47.9 32-78.4 32l-80 0 0-32 158.4 0z"},child:[]}]})(e)}function _i({props:e,name:t}){return wce({props:e,name:t,defaultTheme:RL,themeId:jN})}function zl(e){const{elementType:t,externalSlotProps:a,ownerState:s,skipResolvingSlotProps:r=!1,...i}=e,o=r?{}:K9(a,s),{props:l,internalRef:c}=X9({...i,externalSlotProps:o}),u=Ro(c,o?.ref,e.additionalProps?.ref);return Q9(t,{...l,ref:u},s)}function ps(e){const t=h.useRef(e);return is(()=>{t.current=e}),h.useRef((...a)=>(0,t.current)(...a)).current}var wv=Symbol("NOT_FOUND");function kue(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Eue(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Lue(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(a=>typeof a=="function")){const a=e.map(s=>typeof s=="function"?`function ${s.name||"unnamed"}()`:typeof s).join(", ");throw new TypeError(`${t}[${a}]`)}}var T$=e=>Array.isArray(e)?e:[e];function Pue(e){const t=Array.isArray(e[0])?e[0]:e;return Lue(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Due(e,t){const a=[],{length:s}=e;for(let r=0;r<s;r++)a.push(e[r].apply(null,t));return a}function Oue(e){let t;return{get(a){return t&&e(t.key,a)?t.value:wv},put(a,s){t={key:a,value:s}},getEntries(){return t?[t]:[]},clear(){t=void 0}}}function Mue(e,t){let a=[];function s(l){const c=a.findIndex(u=>t(l,u.key));if(c>-1){const u=a[c];return c>0&&(a.splice(c,1),a.unshift(u)),u.value}return wv}function r(l,c){s(l)===wv&&(a.unshift({key:l,value:c}),a.length>e&&a.pop())}function i(){return a}function o(){a=[]}return{get:s,put:r,getEntries:i,clear:o}}var Iue=(e,t)=>e===t;function $ue(e){return function(a,s){if(a===null||s===null||a.length!==s.length)return!1;const{length:r}=a;for(let i=0;i<r;i++)if(!e(a[i],s[i]))return!1;return!0}}function Rue(e,t){const a=typeof t=="object"?t:{equalityCheck:t},{equalityCheck:s=Iue,maxSize:r=1,resultEqualityCheck:i}=a,o=$ue(s);let l=0;const c=r<=1?Oue(o):Mue(r,o);function u(){let d=c.get(arguments);if(d===wv){if(d=e.apply(null,arguments),l++,i){const p=c.getEntries().find(x=>i(x.value,d));p&&(d=p.value,l!==0&&l--)}c.put(arguments,d)}return d}return u.clearCache=()=>{c.clear(),u.resetResultsCount()},u.resultsCount=()=>l,u.resetResultsCount=()=>{l=0},u}var zue=class{constructor(e){this.value=e}deref(){return this.value}},Fue=typeof WeakRef<"u"?WeakRef:zue,Uue=0,k$=1;function qy(){return{s:Uue,v:void 0,o:null,p:null}}function nq(e,t={}){let a=qy();const{resultEqualityCheck:s}=t;let r,i=0;function o(){let l=a;const{length:c}=arguments;for(let f=0,p=c;f<p;f++){const x=arguments[f];if(typeof x=="function"||typeof x=="object"&&x!==null){let y=l.o;y===null&&(l.o=y=new WeakMap);const N=y.get(x);N===void 0?(l=qy(),y.set(x,l)):l=N}else{let y=l.p;y===null&&(l.p=y=new Map);const N=y.get(x);N===void 0?(l=qy(),y.set(x,l)):l=N}}const u=l;let d;if(l.s===k$)d=l.v;else if(d=e.apply(null,arguments),i++,s){const f=r?.deref?.()??r;f!=null&&s(f,d)&&(d=f,i!==0&&i--),r=typeof d=="object"&&d!==null||typeof d=="function"?new Fue(d):d}return u.s=k$,u.v=d,d}return o.clearCache=()=>{a=qy(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function aq(e,...t){const a=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,s=(...r)=>{let i=0,o=0,l,c={},u=r.pop();typeof u=="object"&&(c=u,u=r.pop()),kue(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...a,...c},{memoize:f,memoizeOptions:p=[],argsMemoize:x=nq,argsMemoizeOptions:y=[]}=d,N=T$(p),v=T$(y),j=Pue(r),w=f(function(){return i++,u.apply(null,arguments)},...N),S=x(function(){o++;const E=Due(j,arguments);return l=w.apply(null,E),l},...v);return Object.assign(S,{resultFunc:u,memoizedResultFunc:w,dependencies:j,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:f,argsMemoize:x})};return Object.assign(s,{withTypes:()=>s}),s}var it=aq(nq),Bue=Object.assign((e,t=it)=>{Eue(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const a=Object.keys(e),s=a.map(i=>e[i]);return t(s,(...i)=>i.reduce((o,l,c)=>(o[a[c]]=l,o),{}))},{withTypes:()=>Bue});const Hue=aq({memoize:Rue,memoizeOptions:{maxSize:1,equalityCheck:Object.is}}),St=(e,t,a,s,r,i,o,l,...c)=>{if(c.length>0)throw new Error("Unsupported number of selectors");let u;if(e&&t&&a&&s&&r&&i&&o&&l)u=(d,f,p,x)=>{const y=e(d,f,p,x),N=t(d,f,p,x),v=a(d,f,p,x),j=s(d,f,p,x),w=r(d,f,p,x),S=i(d,f,p,x),_=o(d,f,p,x);return l(y,N,v,j,w,S,_,f,p,x)};else if(e&&t&&a&&s&&r&&i&&o)u=(d,f,p,x)=>{const y=e(d,f,p,x),N=t(d,f,p,x),v=a(d,f,p,x),j=s(d,f,p,x),w=r(d,f,p,x),S=i(d,f,p,x);return o(y,N,v,j,w,S,f,p,x)};else if(e&&t&&a&&s&&r&&i)u=(d,f,p,x)=>{const y=e(d,f,p,x),N=t(d,f,p,x),v=a(d,f,p,x),j=s(d,f,p,x),w=r(d,f,p,x);return i(y,N,v,j,w,f,p,x)};else if(e&&t&&a&&s&&r)u=(d,f,p,x)=>{const y=e(d,f,p,x),N=t(d,f,p,x),v=a(d,f,p,x),j=s(d,f,p,x);return r(y,N,v,j,f,p,x)};else if(e&&t&&a&&s)u=(d,f,p,x)=>{const y=e(d,f,p,x),N=t(d,f,p,x),v=a(d,f,p,x);return s(y,N,v,f,p,x)};else if(e&&t&&a)u=(d,f,p,x)=>{const y=e(d,f,p,x),N=t(d,f,p,x);return a(y,N,f,p,x)};else if(e&&t)u=(d,f,p,x)=>{const y=e(d,f,p,x);return t(y,f,p,x)};else if(e)u=e;else throw new Error("Missing arguments");return u},SN=e=>(...t)=>{const a=new WeakMap;let s=1;const r=t[t.length-1],i=t.length-1||1,o=Math.max(r.length-i,0);if(o>3)throw new Error("Unsupported number of arguments");return(c,u,d,f)=>{let p=c.__cacheKey__;p||(p={id:s},c.__cacheKey__=p,s+=1);let x=a.get(p);if(!x){const y=t.length===1?[j=>j,r]:t;let N=t;const v=[void 0,void 0,void 0];switch(o){case 0:break;case 1:{N=[...y.slice(0,-1),()=>v[0],r];break}case 2:{N=[...y.slice(0,-1),()=>v[0],()=>v[1],r];break}case 3:{N=[...y.slice(0,-1),()=>v[0],()=>v[1],()=>v[2],r];break}default:throw new Error("Unsupported number of arguments")}e&&(N=[...N,e]),x=Hue(...N),x.selectorArgs=v,a.set(p,x)}switch(o){case 3:x.selectorArgs[2]=f;case 2:x.selectorArgs[1]=d;case 1:x.selectorArgs[0]=u}switch(o){case 0:return x(c);case 1:return x(c,u);case 2:return x(c,u,d);case 3:return x(c,u,d,f);default:throw new Error("unreachable")}}},$a=SN();var e2={exports:{}},t2={},n2={exports:{}},a2={};var E$;function que(){if(E$)return a2;E$=1;var e=Gf();function t(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var a=typeof Object.is=="function"?Object.is:t,s=e.useState,r=e.useEffect,i=e.useLayoutEffect,o=e.useDebugValue;function l(f,p){var x=p(),y=s({inst:{value:x,getSnapshot:p}}),N=y[0].inst,v=y[1];return i(function(){N.value=x,N.getSnapshot=p,c(N)&&v({inst:N})},[f,x,p]),r(function(){return c(N)&&v({inst:N}),f(function(){c(N)&&v({inst:N})})},[f]),o(x),x}function c(f){var p=f.getSnapshot;f=f.value;try{var x=p();return!a(f,x)}catch{return!0}}function u(f,p){return p()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:l;return a2.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:d,a2}var L$;function Wue(){return L$||(L$=1,n2.exports=que()),n2.exports}var P$;function Gue(){if(P$)return t2;P$=1;var e=Gf(),t=Wue();function a(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var s=typeof Object.is=="function"?Object.is:a,r=t.useSyncExternalStore,i=e.useRef,o=e.useEffect,l=e.useMemo,c=e.useDebugValue;return t2.useSyncExternalStoreWithSelector=function(u,d,f,p,x){var y=i(null);if(y.current===null){var N={hasValue:!1,value:null};y.current=N}else N=y.current;y=l(function(){function j(T){if(!w){if(w=!0,S=T,T=p(T),x!==void 0&&N.hasValue){var A=N.value;if(x(A,T))return _=A}return _=T}if(A=_,s(S,T))return A;var L=p(T);return x!==void 0&&x(A,L)?(S=T,A):(S=T,_=L)}var w=!1,S,_,E=f===void 0?null:f;return[function(){return j(d())},E===null?void 0:function(){return j(E())}]},[d,f,p,x]);var v=r(u,y[0],y[1]);return o(function(){N.hasValue=!0,N.value=v},[v]),c(v),v},t2}var D$;function Vue(){return D$||(D$=1,e2.exports=Gue()),e2.exports}var sq=Vue();function Yue(e,t,a,s,r){const i=o=>t(o,a,s,r);return sq.useSyncExternalStoreWithSelector(e.subscribe,e.getSnapshot,e.getSnapshot,i)}const O$={};function _N(e,t){const a=h.useRef(O$);return a.current===O$&&(a.current=e(t)),a}const Que=[];function rq(e){h.useEffect(e,Que)}const Kue=()=>{};function Xue(e,t,a){const s=_N(Zue,{store:e,selector:t}).current;s.effect=a,rq(s.onMount)}function Zue(e){const{store:t,selector:a}=e;let s=a(t.state);const r={effect:Kue,dispose:null,subscribe:()=>{r.dispose??=t.subscribe(i=>{const o=a(i);if(!Object.is(s,o)){const l=s;s=o,r.effect(l,o)}})},onMount:()=>(r.subscribe(),()=>{r.dispose?.(),r.dispose=null})};return r.subscribe(),r}class BL{static create(t){return new BL(t)}constructor(t){this.state=t,this.listeners=new Set,this.updateTick=0}subscribe=t=>(this.listeners.add(t),()=>{this.listeners.delete(t)});getSnapshot=()=>this.state;setState(t){this.state=t,this.updateTick+=1;const a=this.updateTick,s=this.listeners.values();let r;for(;r=s.next(),!r.done;){if(a!==this.updateTick)return;const i=r.value;i(t)}}update(t){for(const a in t)if(!Object.is(this.state[a],t[a])){this.setState(Ye({},this.state,t));return}}set(t,a){Object.is(this.state[t],a)||this.setState(Ye({},this.state,{[t]:a}))}}const AN=({params:e,store:t})=>{h.useEffect(()=>{t.set("animation",Ye({},t.state.animation,{skip:e.skipAnimation}))},[t,e.skipAnimation]);const a=h.useCallback(()=>{let s=!1;return t.set("animation",Ye({},t.state.animation,{skipAnimationRequests:t.state.animation.skipAnimationRequests+1})),()=>{s||(s=!0,t.set("animation",Ye({},t.state.animation,{skipAnimationRequests:t.state.animation.skipAnimationRequests-1})))}},[t]);return is(()=>{if(typeof window>"u"||!window?.matchMedia)return;let r;const i=l=>{l.matches?r=a():r?.()},o=window.matchMedia("(prefers-reduced-motion)");return i(o),o.addEventListener("change",i),()=>{o.removeEventListener("change",i)}},[a,t]),{instance:{disableAnimation:a}}};AN.params={skipAnimation:!0};AN.getDefaultizedParams=({params:e})=>Ye({},e,{skipAnimation:e.skipAnimation??!1});AN.getInitialState=({skipAnimation:e})=>({animation:{skip:e,skipAnimationRequests:0}});const Jue=e=>e.animation,eme=St(Jue,e=>e.skip||e.skipAnimationRequests>0);function tme(e,t){const a=h.useRef(!0);h.useEffect(()=>{if(a.current){a.current=!1;return}return e()},t)}function hk(e){return e&&e.ownerDocument||document}function nme(e){return hk(e).defaultView||window}const Ht=Yue,TN="DEFAULT_X_AXIS_KEY",ame="DEFAULT_Y_AXIS_KEY",sme={top:20,bottom:20,left:20,right:20},rme=45,ime=25,iq=20,Go=e=>e.cartesianAxis?.x,ec=e=>e.cartesianAxis?.y,ome=St(ec,function(t){return(t??[]).reduce((a,s)=>s.position==="left"?a+(s.width||0)+(s.zoom?.slider.enabled?s.zoom.slider.size:0):a,0)}),lme=St(ec,function(t){return(t??[]).reduce((a,s)=>s.position==="right"?a+(s.width||0)+(s.zoom?.slider.enabled?s.zoom.slider.size:0):a,0)}),cme=St(Go,function(t){return(t??[]).reduce((a,s)=>s.position==="top"?a+(s.height||0)+(s.zoom?.slider.enabled?s.zoom.slider.size:0):a,0)}),dme=St(Go,function(t){return(t??[]).reduce((a,s)=>s.position==="bottom"?a+(s.height||0)+(s.zoom?.slider.enabled?s.zoom.slider.size:0):a,0)}),ume=$a(ome,lme,cme,dme,function(t,a,s,r){return{left:t,right:a,top:s,bottom:r}}),xx=e=>e.dimensions,mme=e=>e.dimensions.margin,vr=$a(xx,mme,ume,function({width:t,height:a},{top:s,right:r,bottom:i,left:o},{left:l,right:c,top:u,bottom:d}){return{width:t-o-r-l-c,left:o+l,right:r+c,height:a-s-i-u-d,top:s+u,bottom:i+d}}),fme=St(xx,e=>e.width),hme=St(xx,e=>e.height),oq=St(xx,e=>e.propsWidth),lq=St(xx,e=>e.propsHeight);function gme(e,t){return typeof e=="number"?{top:e,bottom:e,left:e,right:e}:t?Ye({},t,e):e}const pme=10,kN=({params:e,store:t,svgRef:a})=>{const s=e.width!==void 0&&e.height!==void 0,r=h.useRef({displayError:!1,initialCompute:!0,computeRun:0}),[i,o]=h.useState(0),[l,c]=h.useState(0),u=h.useCallback(()=>{const y=a?.current;if(!y)return{};const v=nme(y).getComputedStyle(y),j=Math.floor(parseFloat(v.height))||0,w=Math.floor(parseFloat(v.width))||0;return(t.state.dimensions.width!==w||t.state.dimensions.height!==j)&&t.set("dimensions",{margin:{top:e.margin.top,right:e.margin.right,bottom:e.margin.bottom,left:e.margin.left},width:e.width??w,height:e.height??j,propsWidth:e.width,propsHeight:e.height}),{height:j,width:w}},[t,a,e.height,e.width,e.margin.left,e.margin.right,e.margin.top,e.margin.bottom]);tme(()=>{const y=e.width??t.state.dimensions.width,N=e.height??t.state.dimensions.height;t.set("dimensions",{margin:{top:e.margin.top,right:e.margin.right,bottom:e.margin.bottom,left:e.margin.left},width:y,height:N,propsHeight:e.height,propsWidth:e.width})},[t,e.height,e.width,e.margin.left,e.margin.right,e.margin.top,e.margin.bottom]),h.useEffect(()=>{r.current.displayError=!0},[]),is(()=>{if(s||!r.current.initialCompute||r.current.computeRun>pme)return;const y=u();y.width!==i||y.height!==l?(r.current.computeRun+=1,y.width!==void 0&&o(y.width),y.height!==void 0&&c(y.height)):r.current.initialCompute&&(r.current.initialCompute=!1)},[l,i,u,s]),is(()=>{if(s)return()=>{};u();const y=a.current;if(typeof ResizeObserver>"u")return()=>{};let N;const v=new ResizeObserver(()=>{N=requestAnimationFrame(()=>{u()})});return y&&v.observe(y),()=>{N&&cancelAnimationFrame(N),y&&v.unobserve(y)}},[u,s,a]);const d=Ht(t,vr),f=h.useCallback(y=>y>=d.left-1&&y<=d.left+d.width,[d.left,d.width]),p=h.useCallback(y=>y>=d.top-1&&y<=d.top+d.height,[d.height,d.top]);return{instance:{isPointInside:h.useCallback((y,N,v)=>v&&"closest"in v&&v.closest("[data-drawing-container]")?!0:f(y)&&p(N),[f,p]),isXInside:f,isYInside:p}}};kN.params={width:!0,height:!0,margin:!0};kN.getDefaultizedParams=({params:e})=>Ye({},e,{margin:gme(e.margin,sme)});kN.getInitialState=({width:e,height:t,margin:a})=>({dimensions:{margin:a,width:e??0,height:t??0,propsWidth:e,propsHeight:t}});const HL=({params:e,store:t})=>(is(()=>{t.set("experimentalFeatures",e.experimentalFeatures)},[t,e.experimentalFeatures]),{});HL.params={experimentalFeatures:!0};HL.getInitialState=({experimentalFeatures:e})=>({experimentalFeatures:e});const xme=e=>e.experimentalFeatures,EN=St(xme,e=>!!e?.preferStrictDomainInLineCharts);let M$=0;const yme=()=>(M$+=1,`mui-chart-${M$}`),qL=({params:e,store:t})=>(h.useEffect(()=>{e.id===void 0||e.id===t.state.id.providedChartId&&t.state.id.chartId!==void 0||t.set("id",Ye({},t.state.id,{chartId:e.id??yme()}))},[t,e.id]),{});qL.params={id:!0};qL.getInitialState=({id:e})=>({id:{chartId:e,providedChartId:e}});const bme=e=>e.id,vme=St(bme,e=>e.chartId),wme=["#4254FB","#FFB422","#FA4F58","#0DBEFF","#22BF75","#FA83B4","#FF7511"],Nme=["#495AFB","#FFC758","#F35865","#30C8FF","#44CE8D","#F286B3","#FF8C39"],cq=e=>e==="dark"?Nme:wme,dq=({series:e,colors:t,seriesConfig:a})=>{const s={};return e.forEach((r,i)=>{const o=a[r.type].getSeriesWithDefaultValues(r,i,t),l=o.id;if(s[r.type]===void 0&&(s[r.type]={series:{},seriesOrder:[]}),s[r.type]?.series[l]!==void 0)throw new Error(`MUI X Charts: series' id "${l}" is not unique.`);s[r.type].series[l]=o,s[r.type].seriesOrder.push(l)}),s},jme=(e,t,a)=>{const s={};return Object.keys(t).forEach(r=>{const i=e[r];i!==void 0&&(s[r]=t[r]?.seriesProcessor?.(i,a)??i)}),s},LN=({params:e,store:t,seriesConfig:a})=>{const{series:s,dataset:r,theme:i,colors:o}=e,l=h.useRef(!0);return h.useEffect(()=>{if(l.current){l.current=!1;return}t.set("series",Ye({},t.state.series,{defaultizedSeries:dq({series:s,colors:typeof o=="function"?o(i):o,seriesConfig:a}),dataset:r}))},[o,r,s,i,a,t]),{}};LN.params={dataset:!0,series:!0,colors:!0,theme:!0};const Cme=[];LN.getDefaultizedParams=({params:e})=>Ye({},e,{series:e.series?.length?e.series:Cme,colors:e.colors??cq,theme:e.theme??"light"});LN.getInitialState=({series:e=[],colors:t,theme:a,dataset:s},r,i)=>({series:{seriesConfig:i,defaultizedSeries:dq({series:e,colors:typeof t=="function"?t(a):t,seriesConfig:i}),dataset:s}});const WL=e=>e.series,Sme=St(WL,e=>e.defaultizedSeries),Wr=St(WL,e=>e.seriesConfig),_me=St(WL,e=>e.dataset),ya=$a(Sme,Wr,_me,function(t,a,s){return jme(t,a,s)}),Ame={abort:!0,animationcancel:!0,animationend:!0,animationiteration:!0,animationstart:!0,auxclick:!0,beforeinput:!0,beforetoggle:!0,blur:!0,cancel:!0,canplay:!0,canplaythrough:!0,change:!0,click:!0,close:!0,compositionend:!0,compositionstart:!0,compositionupdate:!0,contextlost:!0,contextmenu:!0,contextrestored:!0,copy:!0,cuechange:!0,cut:!0,dblclick:!0,drag:!0,dragend:!0,dragenter:!0,dragleave:!0,dragover:!0,dragstart:!0,drop:!0,durationchange:!0,emptied:!0,ended:!0,error:!0,focus:!0,focusin:!0,focusout:!0,formdata:!0,gotpointercapture:!0,input:!0,invalid:!0,keydown:!0,keypress:!0,keyup:!0,load:!0,loadeddata:!0,loadedmetadata:!0,loadstart:!0,lostpointercapture:!0,mousedown:!0,mouseenter:!0,mouseleave:!0,mousemove:!0,mouseout:!0,mouseover:!0,mouseup:!0,paste:!0,pause:!0,play:!0,playing:!0,pointercancel:!0,pointerdown:!0,pointerenter:!0,pointerleave:!0,pointermove:!0,pointerout:!0,pointerover:!0,pointerup:!0,progress:!0,ratechange:!0,reset:!0,resize:!0,scroll:!0,scrollend:!0,securitypolicyviolation:!0,seeked:!0,seeking:!0,select:!0,selectionchange:!0,selectstart:!0,slotchange:!0,stalled:!0,submit:!0,suspend:!0,timeupdate:!0,toggle:!0,touchcancel:!0,touchend:!0,touchmove:!0,touchstart:!0,transitioncancel:!0,transitionend:!0,transitionrun:!0,transitionstart:!0,volumechange:!0,waiting:!0,webkitanimationend:!0,webkitanimationiteration:!0,webkitanimationstart:!0,webkittransitionend:!0,wheel:!0,beforematch:!0,pointerrawupdate:!0};class uq{customData={};constructor(t){if(!t||!t.name)throw new Error("Gesture must be initialized with a valid name.");if(t.name in Ame)throw new Error(`Gesture can't be created with a native event name. Tried to use "${t.name}". Please use a custom name instead.`);this.name=t.name,this.preventDefault=t.preventDefault??!1,this.stopPropagation=t.stopPropagation??!1,this.preventIf=t.preventIf??[],this.requiredKeys=t.requiredKeys??[],this.pointerMode=t.pointerMode??[],this.pointerOptions=t.pointerOptions??{}}init(t,a,s,r){this.element=t,this.pointerManager=a,this.gesturesRegistry=s,this.keyboardManager=r;const i=`${this.name}ChangeOptions`;this.element.addEventListener(i,this.handleOptionsChange);const o=`${this.name}ChangeState`;this.element.addEventListener(o,this.handleStateChange)}handleOptionsChange=t=>{t&&t.detail&&this.updateOptions(t.detail)};updateOptions(t){this.preventDefault=t.preventDefault??this.preventDefault,this.stopPropagation=t.stopPropagation??this.stopPropagation,this.preventIf=t.preventIf??this.preventIf,this.requiredKeys=t.requiredKeys??this.requiredKeys,this.pointerMode=t.pointerMode??this.pointerMode,this.pointerOptions=t.pointerOptions??this.pointerOptions}getBaseConfig(){return{requiredKeys:this.requiredKeys}}getEffectiveConfig(t,a){if(t!=="mouse"&&t!=="touch"&&t!=="pen")return a;const s=this.pointerOptions[t];return s?Ye({},a,s):a}handleStateChange=t=>{t&&t.detail&&this.updateState(t.detail)};updateState(t){Object.assign(this.state,t)}getTargetElement(t){return this.isActive||this.element===t.target||"contains"in this.element&&this.element.contains(t.target)||"getRootNode"in this.element&&this.element.getRootNode()instanceof ShadowRoot&&t.composedPath().includes(this.element)?this.element:null}set isActive(t){t?this.gesturesRegistry.registerActiveGesture(this.element,this):this.gesturesRegistry.unregisterActiveGesture(this.element,this)}get isActive(){return this.gesturesRegistry.isGestureActive(this.element,this)??!1}shouldPreventGesture(t,a){const s=this.getEffectiveConfig(a,this.getBaseConfig());if(!this.keyboardManager.areKeysPressed(s.requiredKeys))return!0;if(this.preventIf.length===0)return!1;const r=this.gesturesRegistry.getActiveGestures(t);return this.preventIf.some(i=>r[i])}isPointerTypeAllowed(t){return!this.pointerMode||this.pointerMode.length===0?!0:this.pointerMode.includes(t)}destroy(){const t=`${this.name}ChangeOptions`;this.element.removeEventListener(t,this.handleOptionsChange);const a=`${this.name}ChangeState`;this.element.removeEventListener(a,this.handleStateChange)}}class Tme{activeGestures=new Map;registerActiveGesture(t,a){this.activeGestures.has(t)||this.activeGestures.set(t,new Set);const s=this.activeGestures.get(t),r={gesture:a,element:t};s.add(r)}unregisterActiveGesture(t,a){const s=this.activeGestures.get(t);s&&(s.forEach(r=>{r.gesture===a&&s.delete(r)}),s.size===0&&this.activeGestures.delete(t))}getActiveGestures(t){const a=this.activeGestures.get(t);return a?Array.from(a).reduce((s,r)=>(s[r.gesture.name]=!0,s),{}):{}}isGestureActive(t,a){const s=this.activeGestures.get(t);return s?Array.from(s).some(r=>r.gesture===a):!1}destroy(){this.activeGestures.clear()}unregisterElement(t){this.activeGestures.delete(t)}}class kme{pressedKeys=new Set;constructor(){this.initialize()}initialize(){typeof window>"u"||(window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp),window.addEventListener("blur",this.clearKeys))}handleKeyDown=t=>{this.pressedKeys.add(t.key)};handleKeyUp=t=>{this.pressedKeys.delete(t.key)};clearKeys=()=>{this.pressedKeys.clear()};areKeysPressed(t){return!t||t.length===0?!0:t.every(a=>a==="ControlOrMeta"?navigator.platform.includes("Mac")?this.pressedKeys.has("Meta"):this.pressedKeys.has("Control"):this.pressedKeys.has(a))}destroy(){typeof window<"u"&&(window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp),window.removeEventListener("blur",this.clearKeys)),this.clearKeys()}}class Eme{preventEventInterruption=!0;pointers=new Map;gestureHandlers=new Set;constructor(t){this.root=t.root??document.getRootNode({composed:!0})??document.body,this.touchAction=t.touchAction||"auto",this.passive=t.passive??!1,this.preventEventInterruption=t.preventEventInterruption??!0,this.setupEventListeners()}registerGestureHandler(t){return this.gestureHandlers.add(t),()=>{this.gestureHandlers.delete(t)}}getPointers(){return new Map(this.pointers)}setupEventListeners(){this.touchAction!=="auto"&&(this.root.style.touchAction=this.touchAction),this.root.addEventListener("pointerdown",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointermove",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointerup",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointercancel",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("forceCancel",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("blur",this.handleInterruptEvents),this.root.addEventListener("contextmenu",this.handleInterruptEvents)}handleInterruptEvents=t=>{if(this.preventEventInterruption&&"pointerType"in t&&t.pointerType==="touch"){t.preventDefault();return}const a=new PointerEvent("forceCancel",{bubbles:!1,cancelable:!1}),s=this.pointers.values().next().value;if(this.pointers.size>0&&s){Object.defineProperties(a,{clientX:{value:s.clientX},clientY:{value:s.clientY},pointerId:{value:s.pointerId},pointerType:{value:s.pointerType}});for(const[r,i]of this.pointers.entries()){const o=Ye({},i,{type:"forceCancel"});this.pointers.set(r,o)}}this.notifyHandlers(a),this.pointers.clear()};handlePointerEvent=t=>{const{type:a,pointerId:s}=t;if(a==="pointerdown"||a==="pointermove")this.pointers.set(s,this.createPointerData(t));else if(a==="pointerup"||a==="pointercancel"||a==="forceCancel"){this.pointers.set(s,this.createPointerData(t)),this.notifyHandlers(t),this.pointers.delete(s);return}this.notifyHandlers(t)};notifyHandlers(t){this.gestureHandlers.forEach(a=>a(this.pointers,t))}createPointerData(t){return{pointerId:t.pointerId,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,target:t.target,timeStamp:t.timeStamp,type:t.type,isPrimary:t.isPrimary,pressure:t.pressure,width:t.width,height:t.height,pointerType:t.pointerType,srcEvent:t}}destroy(){this.root.removeEventListener("pointerdown",this.handlePointerEvent),this.root.removeEventListener("pointermove",this.handlePointerEvent),this.root.removeEventListener("pointerup",this.handlePointerEvent),this.root.removeEventListener("pointercancel",this.handlePointerEvent),this.root.removeEventListener("forceCancel",this.handlePointerEvent),this.root.removeEventListener("blur",this.handleInterruptEvents),this.root.removeEventListener("contextmenu",this.handleInterruptEvents),this.pointers.clear(),this.gestureHandlers.clear()}}class Lme{gestureTemplates=new Map;elementGestureMap=new Map;activeGesturesRegistry=new Tme;keyboardManager=new kme;constructor(t){this.pointerManager=new Eme({root:t.root,touchAction:t.touchAction,passive:t.passive}),t.gestures&&t.gestures.length>0&&t.gestures.forEach(a=>{this.addGestureTemplate(a)})}addGestureTemplate(t){this.gestureTemplates.has(t.name)&&console.warn(`Gesture template with name "${t.name}" already exists. It will be overwritten.`),this.gestureTemplates.set(t.name,t)}setGestureOptions(t,a,s){const r=this.elementGestureMap.get(a);if(!r||!r.has(t)){console.error(`Gesture "${t}" not found on the provided element.`);return}const i=new CustomEvent(`${t}ChangeOptions`,{detail:s,bubbles:!1,cancelable:!1,composed:!1});a.dispatchEvent(i)}setGestureState(t,a,s){const r=this.elementGestureMap.get(a);if(!r||!r.has(t)){console.error(`Gesture "${t}" not found on the provided element.`);return}const i=new CustomEvent(`${t}ChangeState`,{detail:s,bubbles:!1,cancelable:!1,composed:!1});a.dispatchEvent(i)}registerElement(t,a,s){return Array.isArray(t)||(t=[t]),t.forEach(r=>{const i=s?.[r];this.registerSingleGesture(r,a,i)}),a}registerSingleGesture(t,a,s){const r=this.gestureTemplates.get(t);if(!r)return console.error(`Gesture template "${t}" not found.`),!1;this.elementGestureMap.has(a)||this.elementGestureMap.set(a,new Map);const i=this.elementGestureMap.get(a);i.has(t)&&(console.warn(`Element already has gesture "${t}" registered. It will be replaced.`),this.unregisterElement(t,a));const o=r.clone(s);return o.init(a,this.pointerManager,this.activeGesturesRegistry,this.keyboardManager),i.set(t,o),!0}unregisterElement(t,a){const s=this.elementGestureMap.get(a);return!s||!s.has(t)?!1:(s.get(t).destroy(),s.delete(t),this.activeGesturesRegistry.unregisterElement(a),s.size===0&&this.elementGestureMap.delete(a),!0)}unregisterAllGestures(t){const a=this.elementGestureMap.get(t);if(a){for(const[,s]of a)s.destroy(),this.activeGesturesRegistry.unregisterElement(t);this.elementGestureMap.delete(t)}}destroy(){for(const[t]of this.elementGestureMap)this.unregisterAllGestures(t);this.gestureTemplates.clear(),this.elementGestureMap.clear(),this.activeGesturesRegistry.destroy(),this.keyboardManager.destroy(),this.pointerManager.destroy()}}class Ku extends uq{unregisterHandler=null;originalTarget=null;constructor(t){super(t),this.minPointers=t.minPointers??1,this.maxPointers=t.maxPointers??1/0}init(t,a,s,r){super.init(t,a,s,r),this.unregisterHandler=this.pointerManager.registerGestureHandler(this.handlePointerEvent)}updateOptions(t){super.updateOptions(t),this.minPointers=t.minPointers??this.minPointers,this.maxPointers=t.maxPointers??this.maxPointers}getBaseConfig(){return{requiredKeys:this.requiredKeys,minPointers:this.minPointers,maxPointers:this.maxPointers}}isWithinPointerCount(t,a){const s=this.getEffectiveConfig(a,this.getBaseConfig());return t.length>=s.minPointers&&t.length<=s.maxPointers}getRelevantPointers(t,a){return t.filter(s=>this.isPointerTypeAllowed(s.pointerType)&&(a===s.target||s.target===this.originalTarget||a===this.originalTarget||"contains"in a&&a.contains(s.target))||"getRootNode"in a&&a.getRootNode()instanceof ShadowRoot&&s.srcEvent.composedPath().includes(a))}destroy(){this.unregisterHandler&&(this.unregisterHandler(),this.unregisterHandler=null),super.destroy()}}function Pme(e,t){const a=t.x-e.x,s=t.y-e.y;return Math.sqrt(a*a+s*s)}function s2(e){if(e.length<2)return 0;let t=0,a=0;for(let s=0;s<e.length;s+=1)for(let r=s+1;r<e.length;r+=1)t+=Pme({x:e[s].clientX,y:e[s].clientY},{x:e[r].clientX,y:e[r].clientY}),a+=1;return a>0?t/a:0}function Fl(e){if(e.length===0)return{x:0,y:0};const t=e.reduce((a,s)=>(a.x+=s.clientX,a.y+=s.clientY,a),{x:0,y:0});return{x:t.x/e.length,y:t.y/e.length}}function gi(e,t){return`${e}${t==="ongoing"?"":t.charAt(0).toUpperCase()+t.slice(1)}`}const Wy=1e-5,Mc=1e-5,I$=.15;function Dme(e,t){const a=t.x-e.x,s=t.y-e.y,r={vertical:null,horizontal:null,mainAxis:null},i=Ome(t,e),o=Math.abs(a)>Math.abs(s)?"horizontal":"vertical",l=i||o==="horizontal"?Wy:I$,c=i?Wy:o==="horizontal"?I$:Wy;return Math.abs(a)>l&&(r.horizontal=a>0?"right":"left"),Math.abs(s)>c&&(r.vertical=s>0?"down":"up"),r.mainAxis=i?"diagonal":o,r}function Ome(e,t){const a=t.x-e.x,s=t.y-e.y,r=Math.atan2(s,a)*180/Math.PI;return r>=-45+Mc&&r<=-22.5+Mc||r>=22.5+Mc&&r<=45+Mc||r>=135+Mc&&r<=157.5+Mc||r>=-157.5+Mc&&r<=-135+Mc}function Mme(e,t){if(!e.vertical&&!e.horizontal)return!1;if(t.length===0)return!0;const a=e.vertical===null||t.includes(e.vertical),s=e.horizontal===null||t.includes(e.horizontal);return a&&s}const $$=0,Ime=e=>e>$$?1:e<-$$?-1:0,Hc=e=>{e.cancelable&&e.preventDefault()};class GL extends Ku{state={lastPosition:null};constructor(t){super(t),this.threshold=t.threshold||0}clone(t){return new GL(Ye({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}init(t,a,s,r){super.init(t,a,s,r),this.element.addEventListener("pointerenter",this.handleElementEnter),this.element.addEventListener("pointerleave",this.handleElementLeave)}destroy(){this.element.removeEventListener("pointerenter",this.handleElementEnter),this.element.removeEventListener("pointerleave",this.handleElementLeave),this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t)}resetState(){this.isActive=!1,this.state={lastPosition:null}}handleElementEnter=t=>{if(t.pointerType!=="mouse"&&t.pointerType!=="pen")return;const a=this.pointerManager.getPointers()||new Map,s=Array.from(a.values());if(this.isWithinPointerCount(s,t.pointerType)){this.isActive=!0;const r={x:t.clientX,y:t.clientY};this.state.lastPosition=r,this.emitMoveEvent(this.element,"start",s,t),this.emitMoveEvent(this.element,"ongoing",s,t)}};handleElementLeave=t=>{if(t.pointerType!=="mouse"&&t.pointerType!=="pen"||!this.isActive)return;const a=this.pointerManager.getPointers()||new Map,s=Array.from(a.values());this.emitMoveEvent(this.element,"end",s,t),this.resetState()};handlePointerEvent=(t,a)=>{if(a.type!=="pointermove"||a.pointerType!=="mouse"&&a.pointerType!=="pen")return;this.preventDefault&&a.preventDefault(),this.stopPropagation&&a.stopPropagation();const s=Array.from(t.values()),r=this.getTargetElement(a);if(!r||!this.isWithinPointerCount(s,a.pointerType))return;if(this.shouldPreventGesture(r,a.pointerType)){if(!this.isActive)return;this.resetState(),this.emitMoveEvent(r,"end",s,a);return}const i={x:a.clientX,y:a.clientY};this.state.lastPosition=i,this.isActive||(this.isActive=!0,this.emitMoveEvent(r,"start",s,a)),this.emitMoveEvent(r,"ongoing",s,a)};emitMoveEvent(t,a,s,r){const i=this.state.lastPosition||Fl(s),o=this.gesturesRegistry.getActiveGestures(t),l={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:a,pointers:s,timeStamp:r.timeStamp,activeGestures:o,customData:this.customData},c=gi(this.name,a),u=new CustomEvent(c,{bubbles:!0,cancelable:!0,composed:!0,detail:l});t.dispatchEvent(u)}}class bu extends Ku{state={startPointers:new Map,startCentroid:null,lastCentroid:null,movementThresholdReached:!1,totalDeltaX:0,totalDeltaY:0,activeDeltaX:0,activeDeltaY:0,lastDirection:{vertical:null,horizontal:null,mainAxis:null},lastDeltas:null};constructor(t){super(t),this.direction=t.direction||["up","down","left","right"],this.threshold=t.threshold||0}clone(t){return new bu(Ye({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,direction:[...this.direction],requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}destroy(){this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t),this.direction=t.direction||this.direction,this.threshold=t.threshold??this.threshold}resetState(){this.isActive=!1,this.state=Ye({},this.state,{startPointers:new Map,startCentroid:null,lastCentroid:null,lastDeltas:null,activeDeltaX:0,activeDeltaY:0,movementThresholdReached:!1,lastDirection:{vertical:null,horizontal:null,mainAxis:null}})}handlePointerEvent=(t,a)=>{const s=Array.from(t.values());if(a.type==="forceCancel"){this.cancel(a.target,s,a);return}const r=this.getTargetElement(a);if(!r)return;if(this.shouldPreventGesture(r,a.pointerType)){this.cancel(r,s,a);return}const i=this.getRelevantPointers(s,r);if(!this.isWithinPointerCount(i,a.pointerType)){this.cancel(r,i,a);return}switch(a.type){case"pointerdown":!this.isActive&&!this.state.startCentroid&&(i.forEach(o=>{this.state.startPointers.set(o.pointerId,o)}),this.originalTarget=r,this.state.startCentroid=Fl(i),this.state.lastCentroid=Ye({},this.state.startCentroid));break;case"pointermove":if(this.state.startCentroid&&this.isWithinPointerCount(s,a.pointerType)){const o=Fl(i),l=o.x-this.state.startCentroid.x,c=o.y-this.state.startCentroid.y,u=Math.sqrt(l*l+c*c),d=Dme(this.state.lastCentroid??this.state.startCentroid,o),f=this.state.lastCentroid?o.x-this.state.lastCentroid.x:0,p=this.state.lastCentroid?o.y-this.state.lastCentroid.y:0;!this.state.movementThresholdReached&&u>=this.threshold&&Mme(d,this.direction)?(this.state.movementThresholdReached=!0,this.isActive=!0,this.state.lastDeltas={x:f,y:p},this.state.totalDeltaX+=f,this.state.totalDeltaY+=p,this.state.activeDeltaX+=f,this.state.activeDeltaY+=p,this.emitPanEvent(r,"start",i,a,o),this.emitPanEvent(r,"ongoing",i,a,o)):this.state.movementThresholdReached&&this.isActive&&(this.state.lastDeltas={x:f,y:p},this.state.totalDeltaX+=f,this.state.totalDeltaY+=p,this.state.activeDeltaX+=f,this.state.activeDeltaY+=p,this.emitPanEvent(r,"ongoing",i,a,o)),this.state.lastCentroid=o,this.state.lastDirection=d}break;case"pointerup":case"pointercancel":case"forceCancel":if(this.isActive&&this.state.movementThresholdReached){const o=i.filter(l=>l.type!=="pointerup"&&l.type!=="pointercancel");if(!this.isWithinPointerCount(o,a.pointerType)){const l=this.state.lastCentroid||this.state.startCentroid;a.type==="pointercancel"&&this.emitPanEvent(r,"cancel",i,a,l),this.emitPanEvent(r,"end",i,a,l),this.resetState()}}else this.resetState();break}};emitPanEvent(t,a,s,r,i){if(!this.state.startCentroid)return;const o=this.state.lastDeltas?.x??0,l=this.state.lastDeltas?.y??0,c=this.state.startPointers.values().next().value,u=c?(r.timeStamp-c.timeStamp)/1e3:0,d=u>0?o/u:0,f=u>0?l/u:0,p=Math.sqrt(d*d+f*f),x=this.gesturesRegistry.getActiveGestures(t),y={gestureName:this.name,initialCentroid:this.state.startCentroid,centroid:i,target:r.target,srcEvent:r,phase:a,pointers:s,timeStamp:r.timeStamp,deltaX:o,deltaY:l,direction:this.state.lastDirection,velocityX:d,velocityY:f,velocity:p,totalDeltaX:this.state.totalDeltaX,totalDeltaY:this.state.totalDeltaY,activeDeltaX:this.state.activeDeltaX,activeDeltaY:this.state.activeDeltaY,activeGestures:x,customData:this.customData},N=gi(this.name,a),v=new CustomEvent(N,{bubbles:!0,cancelable:!0,composed:!0,detail:y});t.dispatchEvent(v),this.preventDefault&&r.preventDefault(),this.stopPropagation&&r.stopPropagation()}cancel(t,a,s){if(this.isActive){const r=t??this.element;this.emitPanEvent(r,"cancel",a,s,this.state.lastCentroid),this.emitPanEvent(r,"end",a,s,this.state.lastCentroid)}this.resetState()}}class VL extends Ku{state={startDistance:0,lastDistance:0,lastScale:1,lastTime:0,velocity:0,totalScale:1,deltaScale:0};constructor(t){super(Ye({},t,{minPointers:t.minPointers??2})),this.threshold=t.threshold??0}clone(t){return new VL(Ye({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}destroy(){this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t)}resetState(){this.isActive=!1,this.state=Ye({},this.state,{startDistance:0,lastDistance:0,lastScale:1,lastTime:0,velocity:0,deltaScale:0})}handlePointerEvent=(t,a)=>{const s=Array.from(t.values()),r=this.getTargetElement(a);if(!r)return;if(this.shouldPreventGesture(r,a.pointerType)){this.isActive&&(this.emitPinchEvent(r,"cancel",s,a),this.resetState());return}const i=this.getRelevantPointers(s,r);switch(a.type){case"pointerdown":if(i.length>=2&&!this.isActive){const o=s2(i);this.state.startDistance=o,this.state.lastDistance=o,this.state.lastTime=a.timeStamp,this.originalTarget=r}break;case"pointermove":if(this.state.startDistance&&this.isWithinPointerCount(i,a.pointerType)){const o=s2(i),l=Math.abs(o-this.state.lastDistance);if(l!==0&&l>=this.threshold){const c=this.state.startDistance?o/this.state.startDistance:1,u=c/this.state.lastScale;this.state.totalScale*=u;const d=(a.timeStamp-this.state.lastTime)/1e3;if(this.state.lastDistance){const p=(o-this.state.lastDistance)/d;this.state.velocity=Number.isNaN(p)?0:p}this.state.lastDistance=o,this.state.deltaScale=c-this.state.lastScale,this.state.lastScale=c,this.state.lastTime=a.timeStamp,this.isActive?this.emitPinchEvent(r,"ongoing",i,a):(this.isActive=!0,this.emitPinchEvent(r,"start",i,a),this.emitPinchEvent(r,"ongoing",i,a))}}break;case"pointerup":case"pointercancel":case"forceCancel":if(this.isActive){const o=i.filter(l=>l.type!=="pointerup"&&l.type!=="pointercancel");if(!this.isWithinPointerCount(o,a.pointerType))a.type==="pointercancel"&&this.emitPinchEvent(r,"cancel",i,a),this.emitPinchEvent(r,"end",i,a),this.resetState();else if(o.length>=2){const l=s2(o);this.state.startDistance=l/this.state.lastScale}}break}};emitPinchEvent(t,a,s,r){const i=Fl(s),o=this.state.lastDistance,l=this.state.lastScale,c=this.gesturesRegistry.getActiveGestures(t),u={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:a,pointers:s,timeStamp:r.timeStamp,scale:l,deltaScale:this.state.deltaScale,totalScale:this.state.totalScale,distance:o,velocity:this.state.velocity,activeGestures:c,direction:Ime(this.state.velocity),customData:this.customData};this.preventDefault&&r.preventDefault(),this.stopPropagation&&r.stopPropagation();const d=gi(this.name,a),f=new CustomEvent(d,{bubbles:!0,cancelable:!0,composed:!0,detail:u});t.dispatchEvent(f)}}class PN extends Ku{state={startCentroid:null,lastPosition:null,timerId:null,startTime:0,pressThresholdReached:!1};constructor(t){super(t),this.duration=t.duration??500,this.maxDistance=t.maxDistance??10}clone(t){return new PN(Ye({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,duration:this.duration,maxDistance:this.maxDistance,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}destroy(){this.clearPressTimer(),this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t),this.duration=t.duration??this.duration,this.maxDistance=t.maxDistance??this.maxDistance}resetState(){this.clearPressTimer(),this.isActive=!1,this.state=Ye({},this.state,{startCentroid:null,lastPosition:null,timerId:null,startTime:0,pressThresholdReached:!1})}clearPressTimer(){this.state.timerId!==null&&(clearTimeout(this.state.timerId),this.state.timerId=null)}handlePointerEvent=(t,a)=>{const s=Array.from(t.values());if(a.type==="forceCancel"){this.cancelPress(a.target,s,a);return}const r=this.getTargetElement(a);if(!r)return;if(this.shouldPreventGesture(r,a.pointerType)){this.isActive&&this.cancelPress(r,s,a);return}const i=this.getRelevantPointers(s,r);if(!this.isWithinPointerCount(i,a.pointerType)){this.isActive&&this.cancelPress(r,i,a);return}switch(a.type){case"pointerdown":!this.isActive&&!this.state.startCentroid&&(this.state.startCentroid=Fl(i),this.state.lastPosition=Ye({},this.state.startCentroid),this.state.startTime=a.timeStamp,this.isActive=!0,this.originalTarget=r,this.clearPressTimer(),this.state.timerId=setTimeout(()=>{if(this.isActive&&this.state.startCentroid){this.state.pressThresholdReached=!0;const o=this.state.lastPosition;this.emitPressEvent(r,"start",i,a,o),this.emitPressEvent(r,"ongoing",i,a,o)}},this.duration));break;case"pointermove":if(this.isActive&&this.state.startCentroid){const o=Fl(i);this.state.lastPosition=o;const l=o.x-this.state.startCentroid.x,c=o.y-this.state.startCentroid.y;Math.sqrt(l*l+c*c)>this.maxDistance&&this.cancelPress(r,i,a)}break;case"pointerup":if(this.isActive){if(this.state.pressThresholdReached){const o=this.state.lastPosition||this.state.startCentroid;this.emitPressEvent(r,"end",i,a,o)}this.resetState()}break;case"pointercancel":case"forceCancel":this.cancelPress(r,i,a);break}};emitPressEvent(t,a,s,r,i){const o=this.gesturesRegistry.getActiveGestures(t),l=r.timeStamp-this.state.startTime,c={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:a,pointers:s,timeStamp:r.timeStamp,x:i.x,y:i.y,duration:l,activeGestures:o,customData:this.customData},u=gi(this.name,a),d=new CustomEvent(u,{bubbles:!0,cancelable:!0,composed:!0,detail:c});t.dispatchEvent(d),this.preventDefault&&r.preventDefault(),this.stopPropagation&&r.stopPropagation()}cancelPress(t,a,s){if(this.isActive&&this.state.pressThresholdReached){const r=this.state.lastPosition||this.state.startCentroid;this.emitPressEvent(t??this.element,"cancel",a,s,r),this.emitPressEvent(t??this.element,"end",a,s,r)}this.resetState()}}class YL extends Ku{state={phase:"waitingForPress",dragTimeoutId:null};constructor(t){super(t),this.pressDuration=t.pressDuration??500,this.pressMaxDistance=t.pressMaxDistance??10,this.dragTimeout=t.dragTimeout??1e3,this.dragThreshold=t.dragThreshold??0,this.dragDirection=t.dragDirection||["up","down","left","right"],this.pressGesture=new PN({name:`${this.name}-press`,duration:this.pressDuration,maxDistance:this.pressMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}),this.panGesture=new bu({name:`${this.name}-pan`,minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)})}clone(t){return new YL(Ye({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,pressDuration:this.pressDuration,pressMaxDistance:this.pressMaxDistance,dragTimeout:this.dragTimeout,dragThreshold:this.dragThreshold,dragDirection:[...this.dragDirection],requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}init(t,a,s,r){super.init(t,a,s,r),this.pressGesture.init(t,a,s,r),this.panGesture.init(t,a,s,r),this.element.addEventListener(this.pressGesture.name,this.pressHandler),this.element.addEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.addEventListener(this.panGesture.name,this.dragMoveHandler),this.element.addEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.addEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler)}destroy(){this.resetState(),this.pressGesture.destroy(),this.panGesture.destroy(),this.element.removeEventListener(this.pressGesture.name,this.pressHandler),this.element.removeEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.removeEventListener(this.panGesture.name,this.dragMoveHandler),this.element.removeEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.removeEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler),super.destroy()}updateOptions(t){super.updateOptions(t),this.pressDuration=t.pressDuration??this.pressDuration,this.pressMaxDistance=t.pressMaxDistance??this.pressMaxDistance,this.dragTimeout=t.dragTimeout??this.dragTimeout,this.dragThreshold=t.dragThreshold??this.dragThreshold,this.dragDirection=t.dragDirection||this.dragDirection,this.element.dispatchEvent(new CustomEvent(`${this.panGesture.name}ChangeOptions`,{detail:{minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}})),this.element.dispatchEvent(new CustomEvent(`${this.pressGesture.name}ChangeOptions`,{detail:{duration:this.pressDuration,maxDistance:this.pressMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}}))}resetState(){this.state.dragTimeoutId!==null&&clearTimeout(this.state.dragTimeoutId),this.restoreTouchAction(),this.isActive=!1,this.state={phase:"waitingForPress",dragTimeoutId:null}}handlePointerEvent(){}pressHandler=()=>{this.state.phase==="waitingForPress"&&(this.state.phase="pressDetected",this.setTouchAction(),this.state.dragTimeoutId=setTimeout(()=>{this.resetState()},this.dragTimeout))};dragStartHandler=t=>{this.state.phase==="pressDetected"&&(this.state.dragTimeoutId!==null&&(clearTimeout(this.state.dragTimeoutId),this.state.dragTimeoutId=null),this.restoreTouchAction(),this.state.phase="dragging",this.isActive=!0,this.element.dispatchEvent(new CustomEvent(gi(this.name,t.detail.phase),t)))};dragMoveHandler=t=>{this.state.phase==="dragging"&&this.element.dispatchEvent(new CustomEvent(gi(this.name,t.detail.phase),t))};dragEndHandler=t=>{this.state.phase==="dragging"&&(this.resetState(),this.element.dispatchEvent(new CustomEvent(gi(this.name,t.detail.phase),t)))};setTouchAction(){this.element.addEventListener("touchstart",Hc,{passive:!1}),this.element.addEventListener("touchmove",Hc,{passive:!1}),this.element.addEventListener("touchend",Hc,{passive:!1})}restoreTouchAction(){this.element.removeEventListener("touchstart",Hc),this.element.removeEventListener("touchmove",Hc),this.element.removeEventListener("touchend",Hc)}}class bp extends Ku{state={startCentroid:null,currentTapCount:0,lastTapTime:0,lastPosition:null};constructor(t){super(t),this.maxDistance=t.maxDistance??10,this.taps=t.taps??1}clone(t){return new bp(Ye({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,maxDistance:this.maxDistance,taps:this.taps,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}destroy(){this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t),this.maxDistance=t.maxDistance??this.maxDistance,this.taps=t.taps??this.taps}resetState(){this.isActive=!1,this.state={startCentroid:null,currentTapCount:0,lastTapTime:0,lastPosition:null}}handlePointerEvent=(t,a)=>{const s=Array.from(t.values()),r=this.getTargetElement(a);if(!r)return;const i=this.getRelevantPointers(s,r);if(this.shouldPreventGesture(r,a.pointerType)||!this.isWithinPointerCount(i,a.pointerType)){this.isActive&&this.cancelTap(r,i,a);return}switch(a.type){case"pointerdown":this.isActive||(this.state.startCentroid=Fl(i),this.state.lastPosition=Ye({},this.state.startCentroid),this.isActive=!0,this.originalTarget=r);break;case"pointermove":if(this.isActive&&this.state.startCentroid){const o=Fl(i);this.state.lastPosition=o;const l=o.x-this.state.startCentroid.x,c=o.y-this.state.startCentroid.y;Math.sqrt(l*l+c*c)>this.maxDistance&&this.cancelTap(r,i,a)}break;case"pointerup":if(this.isActive){this.state.currentTapCount+=1;const o=this.state.lastPosition||this.state.startCentroid;if(!o){this.cancelTap(r,i,a);return}this.state.currentTapCount>=this.taps?(this.fireTapEvent(r,i,a,o),this.resetState()):(this.state.lastTapTime=a.timeStamp,this.isActive=!1,this.state.startCentroid=null,setTimeout(()=>{this.state&&this.state.currentTapCount>0&&this.state.currentTapCount<this.taps&&(this.state.currentTapCount=0)},300))}break;case"pointercancel":case"forceCancel":this.cancelTap(r,i,a);break}};fireTapEvent(t,a,s,r){const i=this.gesturesRegistry.getActiveGestures(t),o={gestureName:this.name,centroid:r,target:s.target,srcEvent:s,phase:"end",pointers:a,timeStamp:s.timeStamp,x:r.x,y:r.y,tapCount:this.state.currentTapCount,activeGestures:i,customData:this.customData},l=new CustomEvent(this.name,{bubbles:!0,cancelable:!0,composed:!0,detail:o});t.dispatchEvent(l),this.preventDefault&&s.preventDefault(),this.stopPropagation&&s.stopPropagation()}cancelTap(t,a,s){if(this.state.startCentroid||this.state.lastPosition){const r=this.state.lastPosition||this.state.startCentroid,i=this.gesturesRegistry.getActiveGestures(t),o={gestureName:this.name,centroid:r,target:s.target,srcEvent:s,phase:"cancel",pointers:a,timeStamp:s.timeStamp,x:r.x,y:r.y,tapCount:this.state.currentTapCount,activeGestures:i,customData:this.customData},l=gi(this.name,"cancel"),c=new CustomEvent(l,{bubbles:!0,cancelable:!0,composed:!0,detail:o});t.dispatchEvent(c)}this.resetState()}}class QL extends Ku{state={phase:"waitingForTap",dragTimeoutId:null};constructor(t){super(t),this.tapMaxDistance=t.tapMaxDistance??10,this.dragTimeout=t.dragTimeout??1e3,this.dragThreshold=t.dragThreshold??0,this.dragDirection=t.dragDirection||["up","down","left","right"],this.tapGesture=new bp({name:`${this.name}-tap`,maxDistance:this.tapMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}),this.panGesture=new bu({name:`${this.name}-pan`,minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)})}clone(t){return new QL(Ye({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,tapMaxDistance:this.tapMaxDistance,dragTimeout:this.dragTimeout,dragThreshold:this.dragThreshold,dragDirection:[...this.dragDirection],requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}init(t,a,s,r){super.init(t,a,s,r),this.tapGesture.init(t,a,s,r),this.panGesture.init(t,a,s,r),this.element.addEventListener(this.tapGesture.name,this.tapHandler),this.element.addEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.addEventListener(this.panGesture.name,this.dragMoveHandler),this.element.addEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.addEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler)}destroy(){this.resetState(),this.tapGesture.destroy(),this.panGesture.destroy(),this.element.removeEventListener(this.tapGesture.name,this.tapHandler),this.element.removeEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.removeEventListener(this.panGesture.name,this.dragMoveHandler),this.element.removeEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.removeEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler),super.destroy()}updateOptions(t){super.updateOptions(t),this.tapMaxDistance=t.tapMaxDistance??this.tapMaxDistance,this.dragTimeout=t.dragTimeout??this.dragTimeout,this.dragThreshold=t.dragThreshold??this.dragThreshold,this.dragDirection=t.dragDirection||this.dragDirection,this.element.dispatchEvent(new CustomEvent(`${this.panGesture.name}ChangeOptions`,{detail:{minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}})),this.element.dispatchEvent(new CustomEvent(`${this.tapGesture.name}ChangeOptions`,{detail:{maxDistance:this.tapMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}}))}resetState(){this.state.dragTimeoutId!==null&&clearTimeout(this.state.dragTimeoutId),this.restoreTouchAction(),this.isActive=!1,this.state={phase:"waitingForTap",dragTimeoutId:null}}handlePointerEvent(){}tapHandler=()=>{this.state.phase==="waitingForTap"&&(this.state.phase="tapDetected",this.setTouchAction(),this.state.dragTimeoutId=setTimeout(()=>{this.resetState()},this.dragTimeout))};dragStartHandler=t=>{this.state.phase==="tapDetected"&&(this.state.dragTimeoutId!==null&&(clearTimeout(this.state.dragTimeoutId),this.state.dragTimeoutId=null),this.restoreTouchAction(),this.state.phase="dragging",this.isActive=!0,this.element.dispatchEvent(new CustomEvent(gi(this.name,t.detail.phase),t)))};dragMoveHandler=t=>{this.state.phase==="dragging"&&this.element.dispatchEvent(new CustomEvent(gi(this.name,t.detail.phase),t))};dragEndHandler=t=>{this.state.phase==="dragging"&&(this.resetState(),this.element.dispatchEvent(new CustomEvent(gi(this.name,t.detail.phase),t)))};setTouchAction(){this.element.addEventListener("touchstart",Hc,{passive:!1})}restoreTouchAction(){this.element.removeEventListener("touchstart",Hc)}}class Nv extends uq{state={totalDeltaX:0,totalDeltaY:0,totalDeltaZ:0};constructor(t){super(t),this.sensitivity=t.sensitivity??1,this.max=t.max??Number.MAX_SAFE_INTEGER,this.min=t.min??Number.MIN_SAFE_INTEGER,this.initialDelta=t.initialDelta??0,this.invert=t.invert??!1,this.state.totalDeltaX=this.initialDelta,this.state.totalDeltaY=this.initialDelta,this.state.totalDeltaZ=this.initialDelta}clone(t){return new Nv(Ye({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,sensitivity:this.sensitivity,max:this.max,min:this.min,initialDelta:this.initialDelta,invert:this.invert,requiredKeys:[...this.requiredKeys],preventIf:[...this.preventIf]},t))}init(t,a,s,r){super.init(t,a,s,r),this.element.addEventListener("wheel",this.handleWheelEvent)}destroy(){this.element.removeEventListener("wheel",this.handleWheelEvent),this.resetState(),super.destroy()}resetState(){this.isActive=!1,this.state={totalDeltaX:0,totalDeltaY:0,totalDeltaZ:0}}updateOptions(t){super.updateOptions(t),this.sensitivity=t.sensitivity??this.sensitivity,this.max=t.max??this.max,this.min=t.min??this.min,this.initialDelta=t.initialDelta??this.initialDelta,this.invert=t.invert??this.invert}handleWheelEvent=t=>{if(this.shouldPreventGesture(this.element,"mouse"))return;const a=this.pointerManager.getPointers()||new Map,s=Array.from(a.values());this.state.totalDeltaX+=t.deltaX*this.sensitivity*(this.invert?-1:1),this.state.totalDeltaY+=t.deltaY*this.sensitivity*(this.invert?-1:1),this.state.totalDeltaZ+=t.deltaZ*this.sensitivity*(this.invert?-1:1),["totalDeltaX","totalDeltaY","totalDeltaZ"].forEach(r=>{this.state[r]<this.min&&(this.state[r]=this.min),this.state[r]>this.max&&(this.state[r]=this.max)}),this.emitWheelEvent(s,t)};emitWheelEvent(t,a){const s=t.length>0?Fl(t):{x:a.clientX,y:a.clientY},r=this.gesturesRegistry.getActiveGestures(this.element),i={gestureName:this.name,centroid:s,target:a.target,srcEvent:a,phase:"ongoing",pointers:t,timeStamp:a.timeStamp,deltaX:a.deltaX*this.sensitivity*(this.invert?-1:1),deltaY:a.deltaY*this.sensitivity*(this.invert?-1:1),deltaZ:a.deltaZ*this.sensitivity*(this.invert?-1:1),deltaMode:a.deltaMode,totalDeltaX:this.state.totalDeltaX,totalDeltaY:this.state.totalDeltaY,totalDeltaZ:this.state.totalDeltaZ,activeGestures:r,customData:this.customData};this.preventDefault&&a.preventDefault(),this.stopPropagation&&a.stopPropagation();const o=gi(this.name,"ongoing"),l=new CustomEvent(o,{bubbles:!0,cancelable:!0,composed:!0,detail:i});this.element.dispatchEvent(l)}}const Vm=e=>e.preventDefault(),KL=({svgRef:e})=>{const t=h.useRef(null);h.useEffect(()=>{const r=e.current;t.current||(t.current=new Lme({gestures:[new bu({name:"pan",threshold:0,maxPointers:1}),new GL({name:"move",preventIf:["pan","zoomPinch","zoomPan"]}),new bp({name:"tap",preventIf:["pan","zoomPinch","zoomPan"]}),new PN({name:"quickPress",duration:50}),new bu({name:"brush",threshold:0,maxPointers:1}),new bu({name:"zoomPan",threshold:0,preventIf:["zoomTapAndDrag","zoomPressAndDrag"]}),new VL({name:"zoomPinch",threshold:5}),new Nv({name:"zoomTurnWheel",sensitivity:.01,initialDelta:1}),new Nv({name:"panTurnWheel",sensitivity:.5}),new QL({name:"zoomTapAndDrag",dragThreshold:10}),new YL({name:"zoomPressAndDrag",dragThreshold:10,preventIf:["zoomPinch"]}),new bp({name:"zoomDoubleTapReset",taps:2})]}));const i=t.current;if(!(!r||!i))return i.registerElement(["pan","move","zoomPinch","zoomPan","zoomTurnWheel","panTurnWheel","tap","quickPress","zoomTapAndDrag","zoomPressAndDrag","zoomDoubleTapReset","brush"],r),()=>{i.unregisterAllGestures(r)}},[e,t]);const a=h.useCallback((r,i,o)=>{const l=e.current;return l?.addEventListener(r,i,o),{cleanup:()=>l?.removeEventListener(r,i)}},[e]),s=h.useCallback((r,i)=>{const o=e.current,l=t.current;!l||!o||l.setGestureOptions(r,o,i??{})},[e,t]);return h.useEffect(()=>{const r=e.current;return r?.addEventListener("gesturestart",Vm),r?.addEventListener("gesturechange",Vm),r?.addEventListener("gestureend",Vm),()=>{r?.removeEventListener("gesturestart",Vm),r?.removeEventListener("gesturechange",Vm),r?.removeEventListener("gestureend",Vm)}},[e]),{instance:{addInteractionListener:a,updateZoomInteractionListeners:s}}};KL.params={};KL.getInitialState=()=>({});const $me=[qL,HL,kN,LN,KL,AN],Rme=["apiRef"],zme=e=>{let{plugins:t}=e,a=pn(e.props,Rme);const s={};t.forEach(o=>{Object.assign(s,o.params)});const r={};return Object.keys(a).forEach(o=>{const l=a[o];s[o]&&(r[o]=l)}),t.reduce((o,l)=>l.getDefaultizedParams?l.getDefaultizedParams({params:o}):o,r)};let R$=0;function Fme(e,t,a){const s=NN(),r=h.useMemo(()=>[...$me,...e],[e]),i=zme({plugins:r,props:t});i.id=i.id??s;const l=h.useRef({}).current,c=Bme(t.apiRef),u=h.useRef(null),d=h.useRef(null),f=h.useRef(null);if(f.current==null){R$+=1;const y={cacheKey:{id:R$}};r.forEach(N=>{N.getInitialState&&Object.assign(y,N.getInitialState(i,y,a))}),f.current=new BL(y)}const p=y=>{const N=y({instance:l,params:i,plugins:r,store:f.current,svgRef:d,chartRootRef:u,seriesConfig:a});N.publicAPI&&Object.assign(c.current,N.publicAPI),N.instance&&Object.assign(l,N.instance)};return r.forEach(p),{contextValue:h.useMemo(()=>({store:f.current,publicAPI:c.current,instance:l,svgRef:d,chartRootRef:u}),[l,c])}}function Ume(e){return e.current==null&&(e.current={}),e}function Bme(e){const t=h.useRef({});return e?Ume(e):t}const mq=h.createContext(null);const fq=()=>{},hq=4,gq=20+2*hq,Hme=40+2*hq,qme="hover",Gy={minStart:0,maxEnd:100,step:5,minSpan:10,maxSpan:100,panning:!0,filterMode:"keep",reverse:!1,slider:{enabled:!1,preview:!1,size:gq,showTooltip:qme}},XL=(e,t,a,s)=>{if(e)return e===!0?Ye({axisId:t,axisDirection:a},Gy,{reverse:s??!1}):Ye({axisId:t,axisDirection:a},Gy,{reverse:s??!1},e,{slider:Ye({},Gy.slider,{size:e.slider?.preview??Gy.slider.preview?Hme:gq},e.slider)})};function pq(e,t){const a={top:0,bottom:0,none:0};return(e&&e.length>0?e:[{id:TN,scaleType:"linear"}]).map((i,o)=>{const l=i.dataKey,c=o===0?"bottom":"none",u=i.position??c,d=ime+(i.label?iq:0),f=i.id??`defaultized-x-axis-${o}`,p=Ye({offset:a[u]},i,{id:f,position:u,height:i.height??d,zoom:XL(i.zoom,f,"x",i.reverse)});if(u!=="none"&&(a[u]+=p.height,p.zoom?.slider.enabled&&(a[u]+=p.zoom.slider.size)),l===void 0||i.data!==void 0)return p;if(t===void 0)throw new Error("MUI X Charts: x-axis uses `dataKey` but no `dataset` is provided.");return Ye({},p,{data:t.map(x=>x[l])})})}function xq(e,t){const a={right:0,left:0,none:0};return(e&&e.length>0?e:[{id:ame,scaleType:"linear"}]).map((i,o)=>{const l=i.dataKey,c=o===0?"left":"none",u=i.position??c,d=rme+(i.label?iq:0),f=i.id??`defaultized-y-axis-${o}`,p=Ye({offset:a[u]},i,{id:f,position:u,width:i.width??d,zoom:XL(i.zoom,f,"y",i.reverse)});if(u!=="none"&&(a[u]+=p.width,p.zoom?.slider.enabled&&(a[u]+=p.zoom.slider.size)),l===void 0||i.data!==void 0)return p;if(t===void 0)throw new Error("MUI X Charts: y-axis uses `dataKey` but no `dataset` is provided.");return Ye({},p,{data:t.map(x=>x[l])})})}function Wme(e,t){return function(s,r){if(r.location==="tick"){const i=r.scale.domain();return i[0]===i[1]?r.scale.tickFormat(1)(s):r.scale.tickFormat(e)(s)}return r.location==="zoom-slider-tooltip"?t.tickFormat(2)(s):`${s}`}}function Xu(e){return e.scaleType==="band"}function Zu(e){return e.scaleType==="point"}function Gme(e){return e.scaleType!=="point"&&e.scaleType!=="band"}function Vme(e){return e.scaleType==="symlog"}function yx(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ZL(e){let t=e,a=e;e.length===1&&(t=(o,l)=>e(o)-l,a=Yme(e));function s(o,l,c,u){for(c==null&&(c=0),u==null&&(u=o.length);c<u;){const d=c+u>>>1;a(o[d],l)<0?c=d+1:u=d}return c}function r(o,l,c,u){for(c==null&&(c=0),u==null&&(u=o.length);c<u;){const d=c+u>>>1;a(o[d],l)>0?u=d:c=d+1}return c}function i(o,l,c,u){c==null&&(c=0),u==null&&(u=o.length);const d=s(o,l,c,u-1);return d>c&&t(o[d-1],l)>-t(o[d],l)?d-1:d}return{left:s,center:i,right:r}}function Yme(e){return(t,a)=>yx(e(t),a)}function yq(e){return e===null?NaN:+e}function*Qme(e,t){for(let a of e)a!=null&&(a=+a)>=a&&(yield a)}const Kme=ZL(yx),bx=Kme.right;ZL(yq).center;class jv extends Map{constructor(t,a=Jme){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),t!=null)for(const[s,r]of t)this.set(s,r)}get(t){return super.get(z$(this,t))}has(t){return super.has(z$(this,t))}set(t,a){return super.set(Xme(this,t),a)}delete(t){return super.delete(Zme(this,t))}}function z$({_intern:e,_key:t},a){const s=t(a);return e.has(s)?e.get(s):a}function Xme({_intern:e,_key:t},a){const s=t(a);return e.has(s)?e.get(s):(e.set(s,a),a)}function Zme({_intern:e,_key:t},a){const s=t(a);return e.has(s)&&(a=e.get(a),e.delete(s)),a}function Jme(e){return e!==null&&typeof e=="object"?e.valueOf():e}var gk=Math.sqrt(50),pk=Math.sqrt(10),xk=Math.sqrt(2);function yk(e,t,a){var s,r=-1,i,o,l;if(t=+t,e=+e,a=+a,e===t&&a>0)return[e];if((s=t<e)&&(i=e,e=t,t=i),(l=bq(e,t,a))===0||!isFinite(l))return[];if(l>0){let c=Math.round(e/l),u=Math.round(t/l);for(c*l<e&&++c,u*l>t&&--u,o=new Array(i=u-c+1);++r<i;)o[r]=(c+r)*l}else{l=-l;let c=Math.round(e*l),u=Math.round(t*l);for(c/l<e&&++c,u/l>t&&--u,o=new Array(i=u-c+1);++r<i;)o[r]=(c+r)/l}return s&&o.reverse(),o}function bq(e,t,a){var s=(t-e)/Math.max(0,a),r=Math.floor(Math.log(s)/Math.LN10),i=s/Math.pow(10,r);return r>=0?(i>=gk?10:i>=pk?5:i>=xk?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(i>=gk?10:i>=pk?5:i>=xk?2:1)}function bk(e,t,a){var s=Math.abs(t-e)/Math.max(0,a),r=Math.pow(10,Math.floor(Math.log(s)/Math.LN10)),i=s/r;return i>=gk?r*=10:i>=pk?r*=5:i>=xk&&(r*=2),t<e?-r:r}function F$(e,t){let a;for(const s of e)s!=null&&(a<s||a===void 0&&s>=s)&&(a=s);return a}function U$(e,t){let a;for(const s of e)s!=null&&(a>s||a===void 0&&s>=s)&&(a=s);return a}function vq(e,t,a=0,s=e.length-1,r=yx){for(;s>a;){if(s-a>600){const c=s-a+1,u=t-a+1,d=Math.log(c),f=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),x=Math.max(a,Math.floor(t-u*f/c+p)),y=Math.min(s,Math.floor(t+(c-u)*f/c+p));vq(e,t,x,y,r)}const i=e[t];let o=a,l=s;for(fg(e,a,t),r(e[s],i)>0&&fg(e,a,s);o<l;){for(fg(e,o,l),++o,--l;r(e[o],i)<0;)++o;for(;r(e[l],i)>0;)--l}r(e[a],i)===0?fg(e,a,l):(++l,fg(e,l,s)),l<=t&&(a=l+1),t<=l&&(s=l-1)}return e}function fg(e,t,a){const s=e[t];e[t]=e[a],e[a]=s}function efe(e,t,a){if(e=Float64Array.from(Qme(e)),!!(s=e.length)){if((t=+t)<=0||s<2)return U$(e);if(t>=1)return F$(e);var s,r=(s-1)*t,i=Math.floor(r),o=F$(vq(e,i).subarray(0,i+1)),l=U$(e.subarray(i+1));return o+(l-o)*(r-i)}}function tfe(e,t,a=yq){if(s=e.length){if((t=+t)<=0||s<2)return+a(e[0],0,e);if(t>=1)return+a(e[s-1],s-1,e);var s,r=(s-1)*t,i=Math.floor(r),o=+a(e[i],i,e),l=+a(e[i+1],i+1,e);return o+(l-o)*(r-i)}}function wq(e,t,a){e=+e,t=+t,a=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+a;for(var s=-1,r=Math.max(0,Math.ceil((t-e)/a))|0,i=new Array(r);++s<r;)i[s]=e+s*a;return i}function Ai(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function tc(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const vk=Symbol("implicit");function vp(){var e=new jv,t=[],a=[],s=vk;function r(i){let o=e.get(i);if(o===void 0){if(s!==vk)return s;e.set(i,o=t.push(i)-1)}return a[o%a.length]}return r.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new jv;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return r},r.range=function(i){return arguments.length?(a=Array.from(i),r):a.slice()},r.unknown=function(i){return arguments.length?(s=i,r):s},r.copy=function(){return vp(t,a).unknown(s)},Ai.apply(r,arguments),r}function JL(){var e=vp().unknown(void 0),t=e.domain,a=e.range,s=0,r=1,i,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var p=t().length,x=r<s,y=x?r:s,N=x?s:r;i=(N-y)/Math.max(1,p-c+u*2),l&&(i=Math.floor(i)),y+=(N-y-i*(p-c))*d,o=i*(1-c),l&&(y=Math.round(y),o=Math.round(o));var v=wq(p).map(function(j){return y+i*j});return a(x?v.reverse():v)}return e.domain=function(p){return arguments.length?(t(p),f()):t()},e.range=function(p){return arguments.length?([s,r]=p,s=+s,r=+r,f()):[s,r]},e.rangeRound=function(p){return[s,r]=p,s=+s,r=+r,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(p){return arguments.length?(l=!!p,f()):l},e.padding=function(p){return arguments.length?(c=Math.min(1,u=+p),f()):c},e.paddingInner=function(p){return arguments.length?(c=Math.min(1,p),f()):c},e.paddingOuter=function(p){return arguments.length?(u=+p,f()):u},e.align=function(p){return arguments.length?(d=Math.max(0,Math.min(1,p)),f()):d},e.copy=function(){return JL(t(),[s,r]).round(l).paddingInner(c).paddingOuter(u).align(d)},Ai.apply(f(),arguments)}function Nq(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Nq(t())},e}function nfe(){return Nq(JL.apply(null,arguments).paddingInner(1))}function e4(e,t,a){e.prototype=t.prototype=a,a.constructor=e}function jq(e,t){var a=Object.create(e.prototype);for(var s in t)a[s]=t[s];return a}function vx(){}var wp=.7,Cv=1/wp,yf="\\s*([+-]?\\d+)\\s*",Np="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Lo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",afe=/^#([0-9a-f]{3,8})$/,sfe=new RegExp(`^rgb\\(${yf},${yf},${yf}\\)$`),rfe=new RegExp(`^rgb\\(${Lo},${Lo},${Lo}\\)$`),ife=new RegExp(`^rgba\\(${yf},${yf},${yf},${Np}\\)$`),ofe=new RegExp(`^rgba\\(${Lo},${Lo},${Lo},${Np}\\)$`),lfe=new RegExp(`^hsl\\(${Np},${Lo},${Lo}\\)$`),cfe=new RegExp(`^hsla\\(${Np},${Lo},${Lo},${Np}\\)$`),B$={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};e4(vx,jp,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:H$,formatHex:H$,formatHex8:dfe,formatHsl:ufe,formatRgb:q$,toString:q$});function H$(){return this.rgb().formatHex()}function dfe(){return this.rgb().formatHex8()}function ufe(){return Cq(this).formatHsl()}function q$(){return this.rgb().formatRgb()}function jp(e){var t,a;return e=(e+"").trim().toLowerCase(),(t=afe.exec(e))?(a=t[1].length,t=parseInt(t[1],16),a===6?W$(t):a===3?new fr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):a===8?Vy(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):a===4?Vy(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=sfe.exec(e))?new fr(t[1],t[2],t[3],1):(t=rfe.exec(e))?new fr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ife.exec(e))?Vy(t[1],t[2],t[3],t[4]):(t=ofe.exec(e))?Vy(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=lfe.exec(e))?Y$(t[1],t[2]/100,t[3]/100,1):(t=cfe.exec(e))?Y$(t[1],t[2]/100,t[3]/100,t[4]):B$.hasOwnProperty(e)?W$(B$[e]):e==="transparent"?new fr(NaN,NaN,NaN,0):null}function W$(e){return new fr(e>>16&255,e>>8&255,e&255,1)}function Vy(e,t,a,s){return s<=0&&(e=t=a=NaN),new fr(e,t,a,s)}function mfe(e){return e instanceof vx||(e=jp(e)),e?(e=e.rgb(),new fr(e.r,e.g,e.b,e.opacity)):new fr}function wk(e,t,a,s){return arguments.length===1?mfe(e):new fr(e,t,a,s??1)}function fr(e,t,a,s){this.r=+e,this.g=+t,this.b=+a,this.opacity=+s}e4(fr,wk,jq(vx,{brighter(e){return e=e==null?Cv:Math.pow(Cv,e),new fr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?wp:Math.pow(wp,e),new fr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new fr(vu(this.r),vu(this.g),vu(this.b),Sv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:G$,formatHex:G$,formatHex8:ffe,formatRgb:V$,toString:V$}));function G$(){return`#${uu(this.r)}${uu(this.g)}${uu(this.b)}`}function ffe(){return`#${uu(this.r)}${uu(this.g)}${uu(this.b)}${uu((isNaN(this.opacity)?1:this.opacity)*255)}`}function V$(){const e=Sv(this.opacity);return`${e===1?"rgb(":"rgba("}${vu(this.r)}, ${vu(this.g)}, ${vu(this.b)}${e===1?")":`, ${e})`}`}function Sv(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function vu(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function uu(e){return e=vu(e),(e<16?"0":"")+e.toString(16)}function Y$(e,t,a,s){return s<=0?e=t=a=NaN:a<=0||a>=1?e=t=NaN:t<=0&&(e=NaN),new Fi(e,t,a,s)}function Cq(e){if(e instanceof Fi)return new Fi(e.h,e.s,e.l,e.opacity);if(e instanceof vx||(e=jp(e)),!e)return new Fi;if(e instanceof Fi)return e;e=e.rgb();var t=e.r/255,a=e.g/255,s=e.b/255,r=Math.min(t,a,s),i=Math.max(t,a,s),o=NaN,l=i-r,c=(i+r)/2;return l?(t===i?o=(a-s)/l+(a<s)*6:a===i?o=(s-t)/l+2:o=(t-a)/l+4,l/=c<.5?i+r:2-i-r,o*=60):l=c>0&&c<1?0:o,new Fi(o,l,c,e.opacity)}function hfe(e,t,a,s){return arguments.length===1?Cq(e):new Fi(e,t,a,s??1)}function Fi(e,t,a,s){this.h=+e,this.s=+t,this.l=+a,this.opacity=+s}e4(Fi,hfe,jq(vx,{brighter(e){return e=e==null?Cv:Math.pow(Cv,e),new Fi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?wp:Math.pow(wp,e),new Fi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,a=this.l,s=a+(a<.5?a:1-a)*t,r=2*a-s;return new fr(r2(e>=240?e-240:e+120,r,s),r2(e,r,s),r2(e<120?e+240:e-120,r,s),this.opacity)},clamp(){return new Fi(Q$(this.h),Yy(this.s),Yy(this.l),Sv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Sv(this.opacity);return`${e===1?"hsl(":"hsla("}${Q$(this.h)}, ${Yy(this.s)*100}%, ${Yy(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Q$(e){return e=(e||0)%360,e<0?e+360:e}function Yy(e){return Math.max(0,Math.min(1,e||0))}function r2(e,t,a){return(e<60?t+(a-t)*e/60:e<180?a:e<240?t+(a-t)*(240-e)/60:t)*255}const t4=e=>()=>e;function gfe(e,t){return function(a){return e+a*t}}function pfe(e,t,a){return e=Math.pow(e,a),t=Math.pow(t,a)-e,a=1/a,function(s){return Math.pow(e+s*t,a)}}function xfe(e){return(e=+e)==1?Sq:function(t,a){return a-t?pfe(t,a,e):t4(isNaN(t)?a:t)}}function Sq(e,t){var a=t-e;return a?gfe(e,a):t4(isNaN(e)?t:e)}const K$=(function e(t){var a=xfe(t);function s(r,i){var o=a((r=wk(r)).r,(i=wk(i)).r),l=a(r.g,i.g),c=a(r.b,i.b),u=Sq(r.opacity,i.opacity);return function(d){return r.r=o(d),r.g=l(d),r.b=c(d),r.opacity=u(d),r+""}}return s.gamma=e,s})(1);function yfe(e,t){t||(t=[]);var a=e?Math.min(t.length,e.length):0,s=t.slice(),r;return function(i){for(r=0;r<a;++r)s[r]=e[r]*(1-i)+t[r]*i;return s}}function bfe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function vfe(e,t){var a=t?t.length:0,s=e?Math.min(a,e.length):0,r=new Array(s),i=new Array(a),o;for(o=0;o<s;++o)r[o]=th(e[o],t[o]);for(;o<a;++o)i[o]=t[o];return function(l){for(o=0;o<s;++o)i[o]=r[o](l);return i}}function n4(e,t){var a=new Date;return e=+e,t=+t,function(s){return a.setTime(e*(1-s)+t*s),a}}function Tf(e,t){return e=+e,t=+t,function(a){return e*(1-a)+t*a}}function wfe(e,t){var a={},s={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?a[r]=th(e[r],t[r]):s[r]=t[r];return function(i){for(r in a)s[r]=a[r](i);return s}}var Nk=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,i2=new RegExp(Nk.source,"g");function Nfe(e){return function(){return e}}function jfe(e){return function(t){return e(t)+""}}function a4(e,t){var a=Nk.lastIndex=i2.lastIndex=0,s,r,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(s=Nk.exec(e))&&(r=i2.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),l[o]?l[o]+=i:l[++o]=i),(s=s[0])===(r=r[0])?l[o]?l[o]+=r:l[++o]=r:(l[++o]=null,c.push({i:o,x:Tf(s,r)})),a=i2.lastIndex;return a<t.length&&(i=t.slice(a),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?jfe(c[0].x):Nfe(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function th(e,t){var a=typeof t,s;return t==null||a==="boolean"?t4(t):(a==="number"?Tf:a==="string"?(s=jp(t))?(t=s,K$):a4:t instanceof jp?K$:t instanceof Date?n4:bfe(t)?yfe:Array.isArray(t)?vfe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?wfe:Tf)(e,t)}function s4(e,t){return e=+e,t=+t,function(a){return Math.round(e*(1-a)+t*a)}}function Cfe(e,t){t===void 0&&(t=e,e=th);for(var a=0,s=t.length-1,r=t[0],i=new Array(s<0?0:s);a<s;)i[a]=e(r,r=t[++a]);return function(o){var l=Math.max(0,Math.min(s-1,Math.floor(o*=s)));return i[l](o-l)}}function Sfe(e){return function(){return e}}function _v(e){return+e}var X$=[0,1];function Gs(e){return e}function jk(e,t){return(t-=e=+e)?function(a){return(a-e)/t}:Sfe(isNaN(t)?NaN:.5)}function _fe(e,t){var a;return e>t&&(a=e,e=t,t=a),function(s){return Math.max(e,Math.min(t,s))}}function Afe(e,t,a){var s=e[0],r=e[1],i=t[0],o=t[1];return r<s?(s=jk(r,s),i=a(o,i)):(s=jk(s,r),i=a(i,o)),function(l){return i(s(l))}}function Tfe(e,t,a){var s=Math.min(e.length,t.length)-1,r=new Array(s),i=new Array(s),o=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<s;)r[o]=jk(e[o],e[o+1]),i[o]=a(t[o],t[o+1]);return function(l){var c=bx(e,l,1,s)-1;return i[c](r[c](l))}}function wx(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function DN(){var e=X$,t=X$,a=th,s,r,i,o=Gs,l,c,u;function d(){var p=Math.min(e.length,t.length);return o!==Gs&&(o=_fe(e[0],e[p-1])),l=p>2?Tfe:Afe,c=u=null,f}function f(p){return p==null||isNaN(p=+p)?i:(c||(c=l(e.map(s),t,a)))(s(o(p)))}return f.invert=function(p){return o(r((u||(u=l(t,e.map(s),Tf)))(p)))},f.domain=function(p){return arguments.length?(e=Array.from(p,_v),d()):e.slice()},f.range=function(p){return arguments.length?(t=Array.from(p),d()):t.slice()},f.rangeRound=function(p){return t=Array.from(p),a=s4,d()},f.clamp=function(p){return arguments.length?(o=p?!0:Gs,d()):o!==Gs},f.interpolate=function(p){return arguments.length?(a=p,d()):a},f.unknown=function(p){return arguments.length?(i=p,f):i},function(p,x){return s=p,r=x,d()}}function r4(){return DN()(Gs,Gs)}function kfe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Av(e,t){if((a=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var a,s=e.slice(0,a);return[s.length>1?s[0]+s.slice(2):s,+e.slice(a+1)]}function kf(e){return e=Av(Math.abs(e)),e?e[1]:NaN}function Efe(e,t){return function(a,s){for(var r=a.length,i=[],o=0,l=e[0],c=0;r>0&&l>0&&(c+l+1>s&&(l=Math.max(1,s-c)),i.push(a.substring(r-=l,r+l)),!((c+=l+1)>s));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function Lfe(e){return function(t){return t.replace(/[0-9]/g,function(a){return e[+a]})}}var Pfe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Cp(e){if(!(t=Pfe.exec(e)))throw new Error("invalid format: "+e);var t;return new i4({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Cp.prototype=i4.prototype;function i4(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}i4.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Dfe(e){e:for(var t=e.length,a=1,s=-1,r;a<t;++a)switch(e[a]){case".":s=r=a;break;case"0":s===0&&(s=a),r=a;break;default:if(!+e[a])break e;s>0&&(s=0);break}return s>0?e.slice(0,s)+e.slice(r+1):e}var _q;function Ofe(e,t){var a=Av(e,t);if(!a)return e+"";var s=a[0],r=a[1],i=r-(_q=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=s.length;return i===o?s:i>o?s+new Array(i-o+1).join("0"):i>0?s.slice(0,i)+"."+s.slice(i):"0."+new Array(1-i).join("0")+Av(e,Math.max(0,t+i-1))[0]}function Z$(e,t){var a=Av(e,t);if(!a)return e+"";var s=a[0],r=a[1];return r<0?"0."+new Array(-r).join("0")+s:s.length>r+1?s.slice(0,r+1)+"."+s.slice(r+1):s+new Array(r-s.length+2).join("0")}const J$={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:kfe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Z$(e*100,t),r:Z$,s:Ofe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function e6(e){return e}var t6=Array.prototype.map,n6=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Mfe(e){var t=e.grouping===void 0||e.thousands===void 0?e6:Efe(t6.call(e.grouping,Number),e.thousands+""),a=e.currency===void 0?"":e.currency[0]+"",s=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?e6:Lfe(t6.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=Cp(f);var p=f.fill,x=f.align,y=f.sign,N=f.symbol,v=f.zero,j=f.width,w=f.comma,S=f.precision,_=f.trim,E=f.type;E==="n"?(w=!0,E="g"):J$[E]||(S===void 0&&(S=12),_=!0,E="g"),(v||p==="0"&&x==="=")&&(v=!0,p="0",x="=");var T=N==="$"?a:N==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",A=N==="$"?s:/[%p]/.test(E)?o:"",L=J$[E],M=/[defgprs%]/.test(E);S=S===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function F($){var D=T,q=A,G,U,V;if(E==="c")q=L($)+q,$="";else{$=+$;var Z=$<0||1/$<0;if($=isNaN($)?c:L(Math.abs($),S),_&&($=Dfe($)),Z&&+$==0&&y!=="+"&&(Z=!1),D=(Z?y==="("?y:l:y==="-"||y==="("?"":y)+D,q=(E==="s"?n6[8+_q/3]:"")+q+(Z&&y==="("?")":""),M){for(G=-1,U=$.length;++G<U;)if(V=$.charCodeAt(G),48>V||V>57){q=(V===46?r+$.slice(G+1):$.slice(G))+q,$=$.slice(0,G);break}}}w&&!v&&($=t($,1/0));var Y=D.length+$.length+q.length,le=Y<j?new Array(j-Y+1).join(p):"";switch(w&&v&&($=t(le+$,le.length?j-q.length:1/0),le=""),x){case"<":$=D+$+q+le;break;case"=":$=D+le+$+q;break;case"^":$=le.slice(0,Y=le.length>>1)+D+$+q+le.slice(Y);break;default:$=le+D+$+q;break}return i($)}return F.toString=function(){return f+""},F}function d(f,p){var x=u((f=Cp(f),f.type="f",f)),y=Math.max(-8,Math.min(8,Math.floor(kf(p)/3)))*3,N=Math.pow(10,-y),v=n6[8+y/3];return function(j){return x(N*j)+v}}return{format:u,formatPrefix:d}}var Qy,o4,Aq;Ife({thousands:",",grouping:[3],currency:["$",""]});function Ife(e){return Qy=Mfe(e),o4=Qy.format,Aq=Qy.formatPrefix,Qy}function $fe(e){return Math.max(0,-kf(Math.abs(e)))}function Rfe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(kf(t)/3)))*3-kf(Math.abs(e)))}function zfe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,kf(t)-kf(e))+1}function Tq(e,t,a,s){var r=bk(e,t,a),i;switch(s=Cp(s??",f"),s.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return s.precision==null&&!isNaN(i=Rfe(r,o))&&(s.precision=i),Aq(s,o)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(i=zfe(r,Math.max(Math.abs(e),Math.abs(t))))&&(s.precision=i-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(i=$fe(r))&&(s.precision=i-(s.type==="%")*2);break}}return o4(s)}function jd(e){var t=e.domain;return e.ticks=function(a){var s=t();return yk(s[0],s[s.length-1],a??10)},e.tickFormat=function(a,s){var r=t();return Tq(r[0],r[r.length-1],a??10,s)},e.nice=function(a){a==null&&(a=10);var s=t(),r=0,i=s.length-1,o=s[r],l=s[i],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=r,r=i,i=u);d-- >0;){if(u=bq(o,l,a),u===c)return s[r]=o,s[i]=l,t(s);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function ON(){var e=r4();return e.copy=function(){return wx(e,ON())},Ai.apply(e,arguments),jd(e)}function kq(e){var t;function a(s){return s==null||isNaN(s=+s)?t:s}return a.invert=a,a.domain=a.range=function(s){return arguments.length?(e=Array.from(s,_v),a):e.slice()},a.unknown=function(s){return arguments.length?(t=s,a):t},a.copy=function(){return kq(e).unknown(t)},e=arguments.length?Array.from(e,_v):[0,1],jd(a)}function Eq(e,t){e=e.slice();var a=0,s=e.length-1,r=e[a],i=e[s],o;return i<r&&(o=a,a=s,s=o,o=r,r=i,i=o),e[a]=t.floor(r),e[s]=t.ceil(i),e}function a6(e){return Math.log(e)}function s6(e){return Math.exp(e)}function Ffe(e){return-Math.log(-e)}function Ufe(e){return-Math.exp(-e)}function Bfe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Hfe(e){return e===10?Bfe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function qfe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function r6(e){return(t,a)=>-e(-t,a)}function l4(e){const t=e(a6,s6),a=t.domain;let s=10,r,i;function o(){return r=qfe(s),i=Hfe(s),a()[0]<0?(r=r6(r),i=r6(i),e(Ffe,Ufe)):e(a6,s6),t}return t.base=function(l){return arguments.length?(s=+l,o()):s},t.domain=function(l){return arguments.length?(a(l),o()):a()},t.ticks=l=>{const c=a();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let p=r(u),x=r(d),y,N;const v=l==null?10:+l;let j=[];if(!(s%1)&&x-p<v){if(p=Math.floor(p),x=Math.ceil(x),u>0){for(;p<=x;++p)for(y=1;y<s;++y)if(N=p<0?y/i(-p):y*i(p),!(N<u)){if(N>d)break;j.push(N)}}else for(;p<=x;++p)for(y=s-1;y>=1;--y)if(N=p>0?y/i(-p):y*i(p),!(N<u)){if(N>d)break;j.push(N)}j.length*2<v&&(j=yk(u,d,v))}else j=yk(p,x,Math.min(x-p,v)).map(i);return f?j.reverse():j},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=s===10?"s":","),typeof c!="function"&&(!(s%1)&&(c=Cp(c)).precision==null&&(c.trim=!0),c=o4(c)),l===1/0)return c;const u=Math.max(1,s*l/t.ticks().length);return d=>{let f=d/i(Math.round(r(d)));return f*s<s-.5&&(f*=s),f<=u?c(d):""}},t.nice=()=>a(Eq(a(),{floor:l=>i(Math.floor(r(l))),ceil:l=>i(Math.ceil(r(l)))})),t}function Sp(){const e=l4(DN()).domain([1,10]);return e.copy=()=>wx(e,Sp()).base(e.base()),Ai.apply(e,arguments),e}function i6(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function o6(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function c4(e){var t=1,a=e(i6(t),o6(t));return a.constant=function(s){return arguments.length?e(i6(t=+s),o6(t)):t},jd(a)}function d4(){var e=c4(DN());return e.copy=function(){return wx(e,d4()).constant(e.constant())},Ai.apply(e,arguments)}function l6(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Wfe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Gfe(e){return e<0?-e*e:e*e}function u4(e){var t=e(Gs,Gs),a=1;function s(){return a===1?e(Gs,Gs):a===.5?e(Wfe,Gfe):e(l6(a),l6(1/a))}return t.exponent=function(r){return arguments.length?(a=+r,s()):a},jd(t)}function MN(){var e=u4(DN());return e.copy=function(){return wx(e,MN()).exponent(e.exponent())},Ai.apply(e,arguments),e}function Lq(){return MN.apply(null,arguments).exponent(.5)}function c6(e){return Math.sign(e)*e*e}function Vfe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Pq(){var e=r4(),t=[0,1],a=!1,s;function r(i){var o=Vfe(e(i));return isNaN(o)?s:a?Math.round(o):o}return r.invert=function(i){return e.invert(c6(i))},r.domain=function(i){return arguments.length?(e.domain(i),r):e.domain()},r.range=function(i){return arguments.length?(e.range((t=Array.from(i,_v)).map(c6)),r):t.slice()},r.rangeRound=function(i){return r.range(i).round(!0)},r.round=function(i){return arguments.length?(a=!!i,r):a},r.clamp=function(i){return arguments.length?(e.clamp(i),r):e.clamp()},r.unknown=function(i){return arguments.length?(s=i,r):s},r.copy=function(){return Pq(e.domain(),t).round(a).clamp(e.clamp()).unknown(s)},Ai.apply(r,arguments),jd(r)}function Dq(){var e=[],t=[],a=[],s;function r(){var o=0,l=Math.max(1,t.length);for(a=new Array(l-1);++o<l;)a[o-1]=tfe(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?s:t[bx(a,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?a[l-1]:e[0],l<a.length?a[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(yx),r()},i.range=function(o){return arguments.length?(t=Array.from(o),r()):t.slice()},i.unknown=function(o){return arguments.length?(s=o,i):s},i.quantiles=function(){return a.slice()},i.copy=function(){return Dq().domain(e).range(t).unknown(s)},Ai.apply(i,arguments)}function Oq(){var e=0,t=1,a=1,s=[.5],r=[0,1],i;function o(c){return c!=null&&c<=c?r[bx(s,c,0,a)]:i}function l(){var c=-1;for(s=new Array(a);++c<a;)s[c]=((c+1)*t-(c-a)*e)/(a+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(a=(r=Array.from(c)).length-1,l()):r.slice()},o.invertExtent=function(c){var u=r.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,s[0]]:u>=a?[s[a-1],t]:[s[u-1],s[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return s.slice()},o.copy=function(){return Oq().domain([e,t]).range(r).unknown(i)},Ai.apply(jd(o),arguments)}function m4(){var e=[.5],t=[0,1],a,s=1;function r(i){return i!=null&&i<=i?t[bx(e,i,0,s)]:a}return r.domain=function(i){return arguments.length?(e=Array.from(i),s=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(i){return arguments.length?(t=Array.from(i),s=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},r.unknown=function(i){return arguments.length?(a=i,r):a},r.copy=function(){return m4().domain(e).range(t).unknown(a)},Ai.apply(r,arguments)}const o2=new Date,l2=new Date;function os(e,t,a,s){function r(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return r.floor=i=>(e(i=new Date(+i)),i),r.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),r.round=i=>{const o=r(i),l=r.ceil(i);return i-o<l-i?o:l},r.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),r.range=(i,o,l)=>{const c=[];if(i=r.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let u;do c.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<o);return c},r.filter=i=>os(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),a&&(r.count=(i,o)=>(o2.setTime(+i),l2.setTime(+o),e(o2),e(l2),Math.floor(a(o2,l2))),r.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?r.filter(s?o=>s(o)%i===0:o=>r.count(0,o)%i===0):r)),r}const Tv=os(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Tv.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?os(t=>{t.setTime(Math.floor(t/e)*e)},(t,a)=>{t.setTime(+t+a*e)},(t,a)=>(a-t)/e):Tv);Tv.range;const kl=1e3,fi=kl*60,El=fi*60,Ul=El*24,f4=Ul*7,d6=Ul*30,c2=Ul*365,mu=os(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*kl)},(e,t)=>(t-e)/kl,e=>e.getUTCSeconds());mu.range;const h4=os(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*kl)},(e,t)=>{e.setTime(+e+t*fi)},(e,t)=>(t-e)/fi,e=>e.getMinutes());h4.range;const g4=os(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*fi)},(e,t)=>(t-e)/fi,e=>e.getUTCMinutes());g4.range;const p4=os(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*kl-e.getMinutes()*fi)},(e,t)=>{e.setTime(+e+t*El)},(e,t)=>(t-e)/El,e=>e.getHours());p4.range;const x4=os(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*El)},(e,t)=>(t-e)/El,e=>e.getUTCHours());x4.range;const Nx=os(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*fi)/Ul,e=>e.getDate()-1);Nx.range;const IN=os(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ul,e=>e.getUTCDate()-1);IN.range;const Mq=os(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ul,e=>Math.floor(e/Ul));Mq.range;function Ju(e){return os(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,a)=>{t.setDate(t.getDate()+a*7)},(t,a)=>(a-t-(a.getTimezoneOffset()-t.getTimezoneOffset())*fi)/f4)}const $N=Ju(0),kv=Ju(1),Yfe=Ju(2),Qfe=Ju(3),Ef=Ju(4),Kfe=Ju(5),Xfe=Ju(6);$N.range;kv.range;Yfe.range;Qfe.range;Ef.range;Kfe.range;Xfe.range;function em(e){return os(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,a)=>{t.setUTCDate(t.getUTCDate()+a*7)},(t,a)=>(a-t)/f4)}const RN=em(0),Ev=em(1),Zfe=em(2),Jfe=em(3),Lf=em(4),ehe=em(5),the=em(6);RN.range;Ev.range;Zfe.range;Jfe.range;Lf.range;ehe.range;the.range;const y4=os(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());y4.range;const b4=os(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());b4.range;const Bl=os(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Bl.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:os(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,a)=>{t.setFullYear(t.getFullYear()+a*e)});Bl.range;const Hl=os(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Hl.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:os(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,a)=>{t.setUTCFullYear(t.getUTCFullYear()+a*e)});Hl.range;function Iq(e,t,a,s,r,i){const o=[[mu,1,kl],[mu,5,5*kl],[mu,15,15*kl],[mu,30,30*kl],[i,1,fi],[i,5,5*fi],[i,15,15*fi],[i,30,30*fi],[r,1,El],[r,3,3*El],[r,6,6*El],[r,12,12*El],[s,1,Ul],[s,2,2*Ul],[a,1,f4],[t,1,d6],[t,3,3*d6],[e,1,c2]];function l(u,d,f){const p=d<u;p&&([u,d]=[d,u]);const x=f&&typeof f.range=="function"?f:c(u,d,f),y=x?x.range(u,+d+1):[];return p?y.reverse():y}function c(u,d,f){const p=Math.abs(d-u)/f,x=ZL(([,,v])=>v).right(o,p);if(x===o.length)return e.every(bk(u/c2,d/c2,f));if(x===0)return Tv.every(Math.max(bk(u,d,f),1));const[y,N]=o[p/o[x-1][2]<o[x][2]/p?x-1:x];return y.every(N)}return[l,c]}const[nhe,ahe]=Iq(Hl,b4,RN,Mq,x4,g4),[she,rhe]=Iq(Bl,y4,$N,Nx,p4,h4);function d2(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function u2(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function hg(e,t,a){return{y:e,m:t,d:a,H:0,M:0,S:0,L:0}}function ihe(e){var t=e.dateTime,a=e.date,s=e.time,r=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=gg(r),d=pg(r),f=gg(i),p=pg(i),x=gg(o),y=pg(o),N=gg(l),v=pg(l),j=gg(c),w=pg(c),S={a:Z,A:Y,b:le,B:_e,c:null,d:p6,e:p6,f:khe,g:zhe,G:Uhe,H:_he,I:Ahe,j:The,L:$q,m:Ehe,M:Lhe,p:te,q:ae,Q:b6,s:v6,S:Phe,u:Dhe,U:Ohe,V:Mhe,w:Ihe,W:$he,x:null,X:null,y:Rhe,Y:Fhe,Z:Bhe,"%":y6},_={a:ye,A:Ne,b:he,B:ve,c:null,d:x6,e:x6,f:Ghe,g:nge,G:sge,H:Hhe,I:qhe,j:Whe,L:zq,m:Vhe,M:Yhe,p:ne,q:Se,Q:b6,s:v6,S:Qhe,u:Khe,U:Xhe,V:Zhe,w:Jhe,W:ege,x:null,X:null,y:tge,Y:age,Z:rge,"%":y6},E={a:F,A:$,b:D,B:q,c:G,d:h6,e:h6,f:Nhe,g:f6,G:m6,H:g6,I:g6,j:yhe,L:whe,m:xhe,M:bhe,p:M,q:phe,Q:Che,s:She,S:vhe,u:uhe,U:mhe,V:fhe,w:dhe,W:hhe,x:U,X:V,y:f6,Y:m6,Z:ghe,"%":jhe};S.x=T(a,S),S.X=T(s,S),S.c=T(t,S),_.x=T(a,_),_.X=T(s,_),_.c=T(t,_);function T(de,ke){return function(Te){var pe=[],ze=-1,Pe=0,We=de.length,tt,lt,Ie;for(Te instanceof Date||(Te=new Date(+Te));++ze<We;)de.charCodeAt(ze)===37&&(pe.push(de.slice(Pe,ze)),(lt=u6[tt=de.charAt(++ze)])!=null?tt=de.charAt(++ze):lt=tt==="e"?" ":"0",(Ie=ke[tt])&&(tt=Ie(Te,lt)),pe.push(tt),Pe=ze+1);return pe.push(de.slice(Pe,ze)),pe.join("")}}function A(de,ke){return function(Te){var pe=hg(1900,void 0,1),ze=L(pe,de,Te+="",0),Pe,We;if(ze!=Te.length)return null;if("Q"in pe)return new Date(pe.Q);if("s"in pe)return new Date(pe.s*1e3+("L"in pe?pe.L:0));if(ke&&!("Z"in pe)&&(pe.Z=0),"p"in pe&&(pe.H=pe.H%12+pe.p*12),pe.m===void 0&&(pe.m="q"in pe?pe.q:0),"V"in pe){if(pe.V<1||pe.V>53)return null;"w"in pe||(pe.w=1),"Z"in pe?(Pe=u2(hg(pe.y,0,1)),We=Pe.getUTCDay(),Pe=We>4||We===0?Ev.ceil(Pe):Ev(Pe),Pe=IN.offset(Pe,(pe.V-1)*7),pe.y=Pe.getUTCFullYear(),pe.m=Pe.getUTCMonth(),pe.d=Pe.getUTCDate()+(pe.w+6)%7):(Pe=d2(hg(pe.y,0,1)),We=Pe.getDay(),Pe=We>4||We===0?kv.ceil(Pe):kv(Pe),Pe=Nx.offset(Pe,(pe.V-1)*7),pe.y=Pe.getFullYear(),pe.m=Pe.getMonth(),pe.d=Pe.getDate()+(pe.w+6)%7)}else("W"in pe||"U"in pe)&&("w"in pe||(pe.w="u"in pe?pe.u%7:"W"in pe?1:0),We="Z"in pe?u2(hg(pe.y,0,1)).getUTCDay():d2(hg(pe.y,0,1)).getDay(),pe.m=0,pe.d="W"in pe?(pe.w+6)%7+pe.W*7-(We+5)%7:pe.w+pe.U*7-(We+6)%7);return"Z"in pe?(pe.H+=pe.Z/100|0,pe.M+=pe.Z%100,u2(pe)):d2(pe)}}function L(de,ke,Te,pe){for(var ze=0,Pe=ke.length,We=Te.length,tt,lt;ze<Pe;){if(pe>=We)return-1;if(tt=ke.charCodeAt(ze++),tt===37){if(tt=ke.charAt(ze++),lt=E[tt in u6?ke.charAt(ze++):tt],!lt||(pe=lt(de,Te,pe))<0)return-1}else if(tt!=Te.charCodeAt(pe++))return-1}return pe}function M(de,ke,Te){var pe=u.exec(ke.slice(Te));return pe?(de.p=d.get(pe[0].toLowerCase()),Te+pe[0].length):-1}function F(de,ke,Te){var pe=x.exec(ke.slice(Te));return pe?(de.w=y.get(pe[0].toLowerCase()),Te+pe[0].length):-1}function $(de,ke,Te){var pe=f.exec(ke.slice(Te));return pe?(de.w=p.get(pe[0].toLowerCase()),Te+pe[0].length):-1}function D(de,ke,Te){var pe=j.exec(ke.slice(Te));return pe?(de.m=w.get(pe[0].toLowerCase()),Te+pe[0].length):-1}function q(de,ke,Te){var pe=N.exec(ke.slice(Te));return pe?(de.m=v.get(pe[0].toLowerCase()),Te+pe[0].length):-1}function G(de,ke,Te){return L(de,t,ke,Te)}function U(de,ke,Te){return L(de,a,ke,Te)}function V(de,ke,Te){return L(de,s,ke,Te)}function Z(de){return o[de.getDay()]}function Y(de){return i[de.getDay()]}function le(de){return c[de.getMonth()]}function _e(de){return l[de.getMonth()]}function te(de){return r[+(de.getHours()>=12)]}function ae(de){return 1+~~(de.getMonth()/3)}function ye(de){return o[de.getUTCDay()]}function Ne(de){return i[de.getUTCDay()]}function he(de){return c[de.getUTCMonth()]}function ve(de){return l[de.getUTCMonth()]}function ne(de){return r[+(de.getUTCHours()>=12)]}function Se(de){return 1+~~(de.getUTCMonth()/3)}return{format:function(de){var ke=T(de+="",S);return ke.toString=function(){return de},ke},parse:function(de){var ke=A(de+="",!1);return ke.toString=function(){return de},ke},utcFormat:function(de){var ke=T(de+="",_);return ke.toString=function(){return de},ke},utcParse:function(de){var ke=A(de+="",!0);return ke.toString=function(){return de},ke}}}var u6={"-":"",_:" ",0:"0"},bs=/^\s*\d+/,ohe=/^%/,lhe=/[\\^$*+?|[\]().{}]/g;function _n(e,t,a){var s=e<0?"-":"",r=(s?-e:e)+"",i=r.length;return s+(i<a?new Array(a-i+1).join(t)+r:r)}function che(e){return e.replace(lhe,"\\$&")}function gg(e){return new RegExp("^(?:"+e.map(che).join("|")+")","i")}function pg(e){return new Map(e.map((t,a)=>[t.toLowerCase(),a]))}function dhe(e,t,a){var s=bs.exec(t.slice(a,a+1));return s?(e.w=+s[0],a+s[0].length):-1}function uhe(e,t,a){var s=bs.exec(t.slice(a,a+1));return s?(e.u=+s[0],a+s[0].length):-1}function mhe(e,t,a){var s=bs.exec(t.slice(a,a+2));return s?(e.U=+s[0],a+s[0].length):-1}function fhe(e,t,a){var s=bs.exec(t.slice(a,a+2));return s?(e.V=+s[0],a+s[0].length):-1}function hhe(e,t,a){var s=bs.exec(t.slice(a,a+2));return s?(e.W=+s[0],a+s[0].length):-1}function m6(e,t,a){var s=bs.exec(t.slice(a,a+4));return s?(e.y=+s[0],a+s[0].length):-1}function f6(e,t,a){var s=bs.exec(t.slice(a,a+2));return s?(e.y=+s[0]+(+s[0]>68?1900:2e3),a+s[0].length):-1}function ghe(e,t,a){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(a,a+6));return s?(e.Z=s[1]?0:-(s[2]+(s[3]||"00")),a+s[0].length):-1}function phe(e,t,a){var s=bs.exec(t.slice(a,a+1));return s?(e.q=s[0]*3-3,a+s[0].length):-1}function xhe(e,t,a){var s=bs.exec(t.slice(a,a+2));return s?(e.m=s[0]-1,a+s[0].length):-1}function h6(e,t,a){var s=bs.exec(t.slice(a,a+2));return s?(e.d=+s[0],a+s[0].length):-1}function yhe(e,t,a){var s=bs.exec(t.slice(a,a+3));return s?(e.m=0,e.d=+s[0],a+s[0].length):-1}function g6(e,t,a){var s=bs.exec(t.slice(a,a+2));return s?(e.H=+s[0],a+s[0].length):-1}function bhe(e,t,a){var s=bs.exec(t.slice(a,a+2));return s?(e.M=+s[0],a+s[0].length):-1}function vhe(e,t,a){var s=bs.exec(t.slice(a,a+2));return s?(e.S=+s[0],a+s[0].length):-1}function whe(e,t,a){var s=bs.exec(t.slice(a,a+3));return s?(e.L=+s[0],a+s[0].length):-1}function Nhe(e,t,a){var s=bs.exec(t.slice(a,a+6));return s?(e.L=Math.floor(s[0]/1e3),a+s[0].length):-1}function jhe(e,t,a){var s=ohe.exec(t.slice(a,a+1));return s?a+s[0].length:-1}function Che(e,t,a){var s=bs.exec(t.slice(a));return s?(e.Q=+s[0],a+s[0].length):-1}function She(e,t,a){var s=bs.exec(t.slice(a));return s?(e.s=+s[0],a+s[0].length):-1}function p6(e,t){return _n(e.getDate(),t,2)}function _he(e,t){return _n(e.getHours(),t,2)}function Ahe(e,t){return _n(e.getHours()%12||12,t,2)}function The(e,t){return _n(1+Nx.count(Bl(e),e),t,3)}function $q(e,t){return _n(e.getMilliseconds(),t,3)}function khe(e,t){return $q(e,t)+"000"}function Ehe(e,t){return _n(e.getMonth()+1,t,2)}function Lhe(e,t){return _n(e.getMinutes(),t,2)}function Phe(e,t){return _n(e.getSeconds(),t,2)}function Dhe(e){var t=e.getDay();return t===0?7:t}function Ohe(e,t){return _n($N.count(Bl(e)-1,e),t,2)}function Rq(e){var t=e.getDay();return t>=4||t===0?Ef(e):Ef.ceil(e)}function Mhe(e,t){return e=Rq(e),_n(Ef.count(Bl(e),e)+(Bl(e).getDay()===4),t,2)}function Ihe(e){return e.getDay()}function $he(e,t){return _n(kv.count(Bl(e)-1,e),t,2)}function Rhe(e,t){return _n(e.getFullYear()%100,t,2)}function zhe(e,t){return e=Rq(e),_n(e.getFullYear()%100,t,2)}function Fhe(e,t){return _n(e.getFullYear()%1e4,t,4)}function Uhe(e,t){var a=e.getDay();return e=a>=4||a===0?Ef(e):Ef.ceil(e),_n(e.getFullYear()%1e4,t,4)}function Bhe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+_n(t/60|0,"0",2)+_n(t%60,"0",2)}function x6(e,t){return _n(e.getUTCDate(),t,2)}function Hhe(e,t){return _n(e.getUTCHours(),t,2)}function qhe(e,t){return _n(e.getUTCHours()%12||12,t,2)}function Whe(e,t){return _n(1+IN.count(Hl(e),e),t,3)}function zq(e,t){return _n(e.getUTCMilliseconds(),t,3)}function Ghe(e,t){return zq(e,t)+"000"}function Vhe(e,t){return _n(e.getUTCMonth()+1,t,2)}function Yhe(e,t){return _n(e.getUTCMinutes(),t,2)}function Qhe(e,t){return _n(e.getUTCSeconds(),t,2)}function Khe(e){var t=e.getUTCDay();return t===0?7:t}function Xhe(e,t){return _n(RN.count(Hl(e)-1,e),t,2)}function Fq(e){var t=e.getUTCDay();return t>=4||t===0?Lf(e):Lf.ceil(e)}function Zhe(e,t){return e=Fq(e),_n(Lf.count(Hl(e),e)+(Hl(e).getUTCDay()===4),t,2)}function Jhe(e){return e.getUTCDay()}function ege(e,t){return _n(Ev.count(Hl(e)-1,e),t,2)}function tge(e,t){return _n(e.getUTCFullYear()%100,t,2)}function nge(e,t){return e=Fq(e),_n(e.getUTCFullYear()%100,t,2)}function age(e,t){return _n(e.getUTCFullYear()%1e4,t,4)}function sge(e,t){var a=e.getUTCDay();return e=a>=4||a===0?Lf(e):Lf.ceil(e),_n(e.getUTCFullYear()%1e4,t,4)}function rge(){return"+0000"}function y6(){return"%"}function b6(e){return+e}function v6(e){return Math.floor(+e/1e3)}var Ym,Uq,Bq;ige({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ige(e){return Ym=ihe(e),Uq=Ym.format,Ym.parse,Bq=Ym.utcFormat,Ym.utcParse,Ym}function oge(e){return new Date(e)}function lge(e){return e instanceof Date?+e:+new Date(+e)}function v4(e,t,a,s,r,i,o,l,c,u){var d=r4(),f=d.invert,p=d.domain,x=u(".%L"),y=u(":%S"),N=u("%I:%M"),v=u("%I %p"),j=u("%a %d"),w=u("%b %d"),S=u("%B"),_=u("%Y");function E(T){return(c(T)<T?x:l(T)<T?y:o(T)<T?N:i(T)<T?v:s(T)<T?r(T)<T?j:w:a(T)<T?S:_)(T)}return d.invert=function(T){return new Date(f(T))},d.domain=function(T){return arguments.length?p(Array.from(T,lge)):p().map(oge)},d.ticks=function(T){var A=p();return e(A[0],A[A.length-1],T??10)},d.tickFormat=function(T,A){return A==null?E:u(A)},d.nice=function(T){var A=p();return(!T||typeof T.range!="function")&&(T=t(A[0],A[A.length-1],T??10)),T?p(Eq(A,T)):d},d.copy=function(){return wx(d,v4(e,t,a,s,r,i,o,l,c,u))},d}function w4(){return Ai.apply(v4(she,rhe,Bl,y4,$N,Nx,p4,h4,mu,Uq).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Hq(){return Ai.apply(v4(nhe,ahe,Hl,b4,RN,IN,x4,g4,mu,Bq).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function zN(){var e=0,t=1,a,s,r,i,o=Gs,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:o(r===0?.5:(f=(i(f)-a)*r,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,a=i(e=+e),s=i(t=+t),r=a===s?0:1/(s-a),u):[e,t]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(p){var x,y;return arguments.length?([x,y]=p,o=f(x,y),u):[o(0),o(1)]}}return u.range=d(th),u.rangeRound=d(s4),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return i=f,a=f(e),s=f(t),r=a===s?0:1/(s-a),u}}function Cd(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function N4(){var e=jd(zN()(Gs));return e.copy=function(){return Cd(e,N4())},tc.apply(e,arguments)}function qq(){var e=l4(zN()).domain([1,10]);return e.copy=function(){return Cd(e,qq()).base(e.base())},tc.apply(e,arguments)}function Wq(){var e=c4(zN());return e.copy=function(){return Cd(e,Wq()).constant(e.constant())},tc.apply(e,arguments)}function j4(){var e=u4(zN());return e.copy=function(){return Cd(e,j4()).exponent(e.exponent())},tc.apply(e,arguments)}function cge(){return j4.apply(null,arguments).exponent(.5)}function Gq(){var e=[],t=Gs;function a(s){if(s!=null&&!isNaN(s=+s))return t((bx(e,s,1)-1)/(e.length-1))}return a.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let r of s)r!=null&&!isNaN(r=+r)&&e.push(r);return e.sort(yx),a},a.interpolator=function(s){return arguments.length?(t=s,a):t},a.range=function(){return e.map((s,r)=>t(r/(e.length-1)))},a.quantiles=function(s){return Array.from({length:s+1},(r,i)=>efe(e,i/s))},a.copy=function(){return Gq(t).domain(e)},tc.apply(a,arguments)}function FN(){var e=0,t=.5,a=1,s=1,r,i,o,l,c,u=Gs,d,f=!1,p;function x(N){return isNaN(N=+N)?p:(N=.5+((N=+d(N))-i)*(s*N<s*i?l:c),u(f?Math.max(0,Math.min(1,N)):N))}x.domain=function(N){return arguments.length?([e,t,a]=N,r=d(e=+e),i=d(t=+t),o=d(a=+a),l=r===i?0:.5/(i-r),c=i===o?0:.5/(o-i),s=i<r?-1:1,x):[e,t,a]},x.clamp=function(N){return arguments.length?(f=!!N,x):f},x.interpolator=function(N){return arguments.length?(u=N,x):u};function y(N){return function(v){var j,w,S;return arguments.length?([j,w,S]=v,u=Cfe(N,[j,w,S]),x):[u(0),u(.5),u(1)]}}return x.range=y(th),x.rangeRound=y(s4),x.unknown=function(N){return arguments.length?(p=N,x):p},function(N){return d=N,r=N(e),i=N(t),o=N(a),l=r===i?0:.5/(i-r),c=i===o?0:.5/(o-i),s=i<r?-1:1,x}}function Vq(){var e=jd(FN()(Gs));return e.copy=function(){return Cd(e,Vq())},tc.apply(e,arguments)}function Yq(){var e=l4(FN()).domain([.1,1,10]);return e.copy=function(){return Cd(e,Yq()).base(e.base())},tc.apply(e,arguments)}function Qq(){var e=c4(FN());return e.copy=function(){return Cd(e,Qq()).constant(e.constant())},tc.apply(e,arguments)}function C4(){var e=u4(FN());return e.copy=function(){return Cd(e,C4()).exponent(e.exponent())},tc.apply(e,arguments)}function dge(){return C4.apply(null,arguments).exponent(.5)}function Kq(e){return e.type==="piecewise"?m4(e.thresholds,e.colors):N4([e.min??0,e.max??100],e.color)}function Pf(e){return e.values?vp(e.values,e.colors).unknown(e.unknownColor??null):vp(e.colors.map((t,a)=>a),e.colors).unknown(e.unknownColor??null)}function bf(e){return e.type==="ordinal"?Pf(e):Kq(e)}function Xq(e,t,a){const{tickMaxStep:s,tickMinStep:r,tickNumber:i}=e,o=r===void 0?999:Math.floor(Math.abs(t[1]-t[0])/r),l=s===void 0?2:Math.ceil(Math.abs(t[1]-t[0])/s);return Math.min(o,Math.max(l,i??a))}function Zq(e,t){return t[1]-t[0]===0?1:e/((t[1]-t[0])/100)}function S4(e){return Math.floor(Math.abs(e)/50)}function w6(e){return Array.isArray(e)?JSON.stringify(e):typeof e=="object"&&e!==null?e.valueOf():e}function UN(...e){let t=new jv(void 0,w6),a=[],s=[],r=0,i=1,o,l,c=!1,u=0,d=0,f=.5;const p=v=>{const j=t.get(v);if(j!==void 0)return s[j%s.length]},x=()=>{const v=a.length,j=i<r,w=j?i:r,S=j?r:i;o=(S-w)/Math.max(1,v-u+d*2),c&&(o=Math.floor(o));const _=w+(S-w-o*(v-u))*f;l=o*(1-u);const E=c?Math.round(_):_;l=c?Math.round(l):l;const A=wq(v).map(L=>E+o*L);return s=j?A.reverse():A,p};p.domain=function(v){if(!arguments.length)return a.slice();a=[],t=new jv(void 0,w6);for(const j of v)t.has(j)||t.set(j,a.push(j)-1);return x()},p.range=function(v){if(!arguments.length)return[r,i];const[j,w]=v;return r=+j,i=+w,x()},p.rangeRound=function(v){const[j,w]=v;return r=+j,i=+w,c=!0,x()},p.bandwidth=function(){return l},p.step=function(){return o},p.round=function(v){return arguments.length?(c=!!v,x()):c},p.padding=function(v){return arguments.length?(u=Math.min(1,d=+v),x()):u},p.paddingInner=function(v){return arguments.length?(u=Math.min(1,v),x()):u},p.paddingOuter=function(v){return arguments.length?(d=+v,x()):d},p.align=function(v){return arguments.length?(f=Math.max(0,Math.min(1,v)),x()):f},p.copy=()=>UN(a,[r,i]).round(c).paddingInner(u).paddingOuter(d).align(f);const[y,N]=e;return e.length>1?(p.domain(y),p.range(N)):y?p.range(y):x(),p}function Jq(...e){const t=UN(...e).paddingInner(1),a=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=()=>{const s=a();return s.padding=s.paddingOuter,delete s.paddingInner,delete s.paddingOuter,s.copy=t.copy,s},t}function eW(...e){const t=d4(...e),a=t.ticks,{negativeScale:s,linearScale:r,positiveScale:i}=uge(t);return t.ticks=o=>{const l=a(o),c=t.constant();let u=0,d=0,f=0;l.forEach(x=>{x>-c&&x<c&&(d+=1),x<=-c&&(u+=1),x>=c&&(f+=1)});const p=[];if(u>0&&p.push(...s.ticks(u)),d>0){const x=r.ticks(d);p.at(-1)===x[0]?p.push(...x.slice(1)):p.push(...x)}if(f>0){const x=i.ticks(f);p.at(-1)===x[0]?p.push(...x.slice(1)):p.push(...x)}return p},t.tickFormat=(o=10,l)=>{const c=t.constant(),[u,d]=t.domain(),f=d-u,p=s.domain(),x=p[1]-p[0],N=(f===0?0:x/f)*o,v=r.domain(),j=v[1]-v[0],S=(f===0?0:j/f)*o,_=i.domain(),E=_[1]-_[0],A=(f===0?0:E/f)*o,L=s.tickFormat(N,l),M=r.tickFormat(S,l),F=i.tickFormat(A,l);return $=>($.valueOf()<=-c?L:$.valueOf()>=c?F:M)($)},t.copy=()=>eW(t.domain(),t.range()).constant(t.constant()),t}function uge(e){const t=e.constant(),a=e.domain(),s=[a[0],Math.min(a[1],-t)],r=Sp(s,e.range()),i=[Math.max(a[0],-t),Math.min(a[1],t)],o=ON(i,e.range()),l=[Math.max(a[0],t),a[1]],c=Sp(l,e.range());return{negativeScale:r,linearScale:o,positiveScale:c}}function BN(e,t,a){switch(e){case"log":return Sp(t,a);case"pow":return MN(t,a);case"sqrt":return Lq(t,a);case"time":return w4(t,a);case"utc":return Hq(t,a);case"symlog":return eW(t,a);default:return ON(t,a)}}const Ck=e=>e?.[0]instanceof Date;function Sk(e,t,a){const s=w4(e,t);return(r,{location:i})=>i==="tick"?s.tickFormat(a)(r):`${r.toLocaleString()}`}let N6,j6;class mge{types=new Set;constructor(){if(N6)throw new Error("You can only create one instance!");N6=this.types}addType(t){this.types.add(t)}getTypes(){return this.types}}class fge{types=new Set;constructor(){if(j6)throw new Error("You can only create one instance!");j6=this.types}addType(t){this.types.add(t)}getTypes(){return this.types}}const HN=new mge;HN.addType("bar");HN.addType("line");HN.addType("scatter");const tW=new fge;tW.addType("radar");function qN(e){return HN.getTypes().has(e)}function Lv(e){return qN(e.type)}const hge=(e,t,a,s)=>{const r=new Set;return Object.keys(t).filter(qN).forEach(o=>{const l=a[o]?.series??{},c=t[o].axisTooltipGetter?.(l);c!==void 0&&c.forEach(({axisId:u,direction:d})=>{d===e&&r.add(u??s)})}),r};function vs(e){return e.bandwidth!==void 0}function gge(e){return vs(e)&&e.paddingOuter!==void 0}function pge(e,t,a){const s=t==="x"?[e.left,e.left+e.width]:[e.top+e.height,e.top];return a?[s[1],s[0]]:s}const xge=.2,yge=.1;function nW({scales:e,drawingArea:t,formattedSeries:a,axis:s,seriesConfig:r,axisDirection:i,zoomMap:o,domains:l}){if(s===void 0)return{axis:{},axisIds:[]};const c=hge(i,r,a,s[0].id),u={};return s.forEach(d=>{const f=d,p=e[f.id],x=o?.get(f.id),y=x?[x.start,x.end]:[0,100],N=pge(t,i,f.reverse??!1),v=!f.ignoreTooltip&&c.has(f.id),j=f.data??[];if(vs(p)){const T=i==="y"?[N[1],N[0]]:N;if(gge(p)&&Xu(f)){const A=f.categoryGapRatio??xge,L=f.barGapRatio??yge;u[f.id]=Ye({offset:0,height:0,categoryGapRatio:A,barGapRatio:L,triggerTooltip:v},f,{data:j,scale:p,tickNumber:f.data.length,colorScale:f.colorMap&&(f.colorMap.type==="ordinal"?Pf(Ye({values:f.data},f.colorMap)):bf(f.colorMap))})}if(Zu(f)&&(u[f.id]=Ye({offset:0,height:0,triggerTooltip:v},f,{data:j,scale:p,tickNumber:f.data.length,colorScale:f.colorMap&&(f.colorMap.type==="ordinal"?Pf(Ye({values:f.data},f.colorMap)):bf(f.colorMap))})),Ck(f.data)){const A=Sk(f.data,T,f.tickNumber);u[f.id].valueFormatter=f.valueFormatter??A}return}if(f.scaleType==="band"||f.scaleType==="point")return;const w=l[f.id].tickNumber,S=f,_=S.scaleType??"linear",E=Zq(w,y);u[f.id]=Ye({offset:0,height:0,triggerTooltip:v},S,{data:j,scaleType:_,scale:p,tickNumber:E,colorScale:S.colorMap&&Kq(S.colorMap),valueFormatter:f.valueFormatter??Wme(E,BN(_,N.map(T=>p.invert(T)),N))})}),{axis:u,axisIds:s.map(({id:d})=>d)}}function bge(e){return e!=null}function vge(e,t,a,s){const r=e?.length??0,i=Math.floor(t*r/100),o=Math.ceil(a*r/100);return function(c,u){return(c[s]??e?.[u])==null?!0:u>=i&&u<o}}function wge(e,t,a,s,r){const i=e[0].valueOf(),o=e[1].valueOf(),l=i+t*(o-i)/100,c=i+a*(o-i)/100;return function(d,f){const p=d[s]??r?.[f];return p==null?!0:p>=l&&p<=c}}const Nge=e=>({currentAxisId:t,seriesXAxisId:a,seriesYAxisId:s,isDefaultAxis:r})=>(i,o)=>!(t===a?s:a)||r?Object.values(e??{})[0]?.(i,o)??!0:[s,a].filter(u=>u!==t).map(u=>e[u??""]).filter(bge).every(u=>u(i,o)),C6=e=>(t=[])=>t.reduce((a,s)=>{const{zoom:r,id:i,reverse:o}=s,l=XL(r,i,e,o);return l&&(a[i]=l),a},{}),jge=.2;function aW(e,t,a){const s=t==="x"?[e.left,e.left+e.width]:[e.top+e.height,e.top];return a.reverse?[s[1],s[0]]:s}function sW(e,t){const a=[0,1];if(Xu(e)){const i=e.categoryGapRatio??jge;return UN(t,a).paddingInner(i).paddingOuter(i/2)}if(Zu(e))return Jq(t,a);const s=e.scaleType??"linear",r=BN(s,t,a);return Vme(e)&&e.constant!=null&&r.constant(e.constant),r}const rW=(e,t)=>{const a=e[1]-e[0],s=t[1]-t[0],r=e[0]-t[0]*a/s,i=e[1]+(100-t[1])*a/s;return[r,i]},Cge=(e,t,a,s,r,i,o)=>{const l=a==="x"?s[e].xExtremumGetter:s[e].yExtremumGetter,c=i[e]?.series??{};return l?.({series:c,axis:t,axisIndex:r,isDefaultAxis:r===0,getFilters:o})??[1/0,-1/0]};function WN(e,t,a,s,r,i){const o=Object.keys(a).filter(qN);let l=[1/0,-1/0];for(const c of o){const[u,d]=Cge(c,e,t,a,s,r,i);l=[Math.min(l[0],u),Math.max(l[1],d)]}return Number.isNaN(l[0])||Number.isNaN(l[1])?[1/0,-1/0]:l}const Sge=(e,t,a,s)=>{if(e.domainLimit!==void 0)return e.domainLimit;if(t==="x")for(const r of s.line?.seriesOrder??[]){const i=s.line.series[r];if(i.xAxisId===e.id||i.xAxisId===void 0&&a===0)return"strict"}return"nice"};function iW(e,t,a){return BN(e??"linear",t,[0,1]).nice(a).domain()}function oW(e,t,a,s,[r,i],o,l){const c=cW(e,t,a,s,l);let u=dW(e,r,i);if(typeof c=="function"){const{min:f,max:p}=c(r.valueOf(),i.valueOf());u[0]=f,u[1]=p}const d=Xq(e,u,o);return c==="nice"&&(u=iW(e.scaleType,u,d)),u=["min"in e?e.min??u[0]:u[0],"max"in e?e.max??u[1]:u[1]],{domain:u,tickNumber:d}}function lW(e,t,a,s,[r,i],o,l){const c=cW(e,t,a,s,l);let u=dW(e,r,i);if(typeof c=="function"){const{min:d,max:f}=c(r.valueOf(),i.valueOf());u[0]=d,u[1]=f}return c==="nice"&&(u=iW(e.scaleType,u,o)),[e.min??u[0],e.max??u[1]]}function cW(e,t,a,s,r){return r?Sge(e,t,a,s):e.domainLimit??"nice"}function dW(e,t,a){let s=t,r=a;return"max"in e&&e.max!=null&&e.max<t&&(s=e.max),"min"in e&&e.min!=null&&e.min>t&&(r=e.min),!("min"in e)&&!("max"in e)?[s,r]:[e.min??s,e.max??r]}class _ge{constructor(){this.ids=[],this.values=[],this.length=0}clear(){this.length=0}push(t,a){let s=this.length++;for(;s>0;){const r=s-1>>1,i=this.values[r];if(a>=i)break;this.ids[s]=this.ids[r],this.values[s]=i,s=r}this.ids[s]=t,this.values[s]=a}pop(){if(this.length===0)return;const t=this.ids,a=this.values,s=t[0],r=--this.length;if(r>0){const i=t[r],o=a[r];let l=0;const c=r>>1;for(;l<c;){const u=(l<<1)+1,d=u+1,f=u+(+(d<r)&+(a[d]<a[u]));if(a[f]>=o)break;t[l]=t[f],a[l]=a[f],l=f}t[l]=i,a[l]=o}return s}peek(){return this.length>0?this.ids[0]:void 0}peekValue(){return this.length>0?this.values[0]:void 0}shrink(){this.ids.length=this.values.length=this.length}}const S6=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],m2=3;class _4{static from(t,a=0){if(a%8!==0)throw new Error("byteOffset must be 8-byte aligned.");if(!t||t.byteLength===void 0||t.buffer)throw new Error("Data must be an instance of ArrayBuffer or SharedArrayBuffer.");const[s,r]=new Uint8Array(t,a+0,2);if(s!==251)throw new Error("Data does not appear to be in a Flatbush format.");const i=r>>4;if(i!==m2)throw new Error(`Got v${i} data when expected v${m2}.`);const o=S6[r&15];if(!o)throw new Error("Unrecognized array type.");const[l]=new Uint16Array(t,a+2,1),[c]=new Uint32Array(t,a+4,1);return new _4(c,l,o,void 0,t,a)}constructor(t,a=16,s=Float64Array,r=ArrayBuffer,i,o=0){if(t===void 0)throw new Error("Missing required argument: numItems.");if(isNaN(t)||t<=0)throw new Error(`Unexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+a,2),65535),this.byteOffset=o;let l=t,c=l;this._levelBounds=[l*4];do l=Math.ceil(l/this.nodeSize),c+=l,this._levelBounds.push(c*4);while(l!==1);this.ArrayType=s,this.IndexArrayType=c<16384?Uint16Array:Uint32Array;const u=S6.indexOf(s),d=c*4*s.BYTES_PER_ELEMENT;if(u<0)throw new Error(`Unexpected typed array class: ${s}.`);if(i)this.data=i,this._boxes=new s(i,o+8,c*4),this._indices=new this.IndexArrayType(i,o+8+d,c),this._pos=c*4,this.minX=this._boxes[this._pos-4],this.minY=this._boxes[this._pos-3],this.maxX=this._boxes[this._pos-2],this.maxY=this._boxes[this._pos-1];else{const f=this.data=new r(8+d+c*this.IndexArrayType.BYTES_PER_ELEMENT);this._boxes=new s(f,8,c*4),this._indices=new this.IndexArrayType(f,8+d,c),this._pos=0,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,new Uint8Array(f,0,2).set([251,(m2<<4)+u]),new Uint16Array(f,2,1)[0]=a,new Uint32Array(f,4,1)[0]=t}this._queue=new _ge}add(t,a,s=t,r=a){const i=this._pos>>2,o=this._boxes;return this._indices[i]=i,o[this._pos++]=t,o[this._pos++]=a,o[this._pos++]=s,o[this._pos++]=r,t<this.minX&&(this.minX=t),a<this.minY&&(this.minY=a),s>this.maxX&&(this.maxX=s),r>this.maxY&&(this.maxY=r),i}finish(){if(this._pos>>2!==this.numItems)throw new Error(`Added ${this._pos>>2} items when expected ${this.numItems}.`);const t=this._boxes;if(this.numItems<=this.nodeSize){t[this._pos++]=this.minX,t[this._pos++]=this.minY,t[this._pos++]=this.maxX,t[this._pos++]=this.maxY;return}const a=this.maxX-this.minX||1,s=this.maxY-this.minY||1,r=new Uint32Array(this.numItems),i=65535;for(let o=0,l=0;o<this.numItems;o++){const c=t[l++],u=t[l++],d=t[l++],f=t[l++],p=Math.floor(i*((c+d)/2-this.minX)/a),x=Math.floor(i*((u+f)/2-this.minY)/s);r[o]=kge(p,x)}_k(r,t,this._indices,0,this.numItems-1,this.nodeSize);for(let o=0,l=0;o<this._levelBounds.length-1;o++){const c=this._levelBounds[o];for(;l<c;){const u=l;let d=t[l++],f=t[l++],p=t[l++],x=t[l++];for(let y=1;y<this.nodeSize&&l<c;y++)d=Math.min(d,t[l++]),f=Math.min(f,t[l++]),p=Math.max(p,t[l++]),x=Math.max(x,t[l++]);this._indices[this._pos>>2]=u,t[this._pos++]=d,t[this._pos++]=f,t[this._pos++]=p,t[this._pos++]=x}}}search(t,a,s,r,i){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let o=this._boxes.length-4;const l=[],c=[];for(;o!==void 0;){const u=Math.min(o+this.nodeSize*4,_6(o,this._levelBounds));for(let d=o;d<u;d+=4){if(s<this._boxes[d]||r<this._boxes[d+1]||t>this._boxes[d+2]||a>this._boxes[d+3])continue;const f=this._indices[d>>2]|0;o>=this.numItems*4?l.push(f):(i===void 0||i(f))&&(c.push(f),c.push(this._boxes[d]),c.push(this._boxes[d+1]))}o=l.pop()}return c}neighbors(t,a,s=1/0,r=1/0,i,o=Age){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let l=this._boxes.length-4;const c=this._queue,u=[];e:for(;l!==void 0;){const d=Math.min(l+this.nodeSize*4,_6(l,this._levelBounds));for(let f=l;f<d;f+=4){const p=this._indices[f>>2]|0,x=this._boxes[f],y=this._boxes[f+1],N=this._boxes[f+2],v=this._boxes[f+3],j=t<x?x-t:t>N?t-N:0,w=a<y?y-a:a>v?a-v:0,S=o(j,w);S>r||(l>=this.numItems*4?c.push(p<<1,S):(i===void 0||i(p))&&c.push((p<<1)+1,S))}for(;c.length&&c.peek()&1;)if(c.peekValue()>r||(u.push(c.pop()>>1),u.length===s))break e;l=c.length?c.pop()>>1:void 0}return c.clear(),u}}function Age(e,t){return e*e+t*t}function _6(e,t){let a=0,s=t.length-1;for(;a<s;){const r=a+s>>1;t[r]>e?s=r:a=r+1}return t[a]}function _k(e,t,a,s,r,i){if(Math.floor(s/i)>=Math.floor(r/i))return;const o=e[s],l=e[s+r>>1],c=e[r];let u=c;const d=Math.max(o,l);c>d?u=d:d===o?u=Math.max(l,c):d===l&&(u=Math.max(o,c));let f=s-1,p=r+1;for(;;){do f++;while(e[f]<u);do p--;while(e[p]>u);if(f>=p)break;Tge(e,t,a,f,p)}_k(e,t,a,s,p,i),_k(e,t,a,p+1,r,i)}function Tge(e,t,a,s,r){const i=e[s];e[s]=e[r],e[r]=i;const o=4*s,l=4*r,c=t[o],u=t[o+1],d=t[o+2],f=t[o+3];t[o]=t[l],t[o+1]=t[l+1],t[o+2]=t[l+2],t[o+3]=t[l+3],t[l]=c,t[l+1]=u,t[l+2]=d,t[l+3]=f;const p=a[s];a[s]=a[r],a[r]=p}function kge(e,t){let a=e^t,s=65535^a,r=65535^(e|t),i=e&(t^65535),o=a|s>>1,l=a>>1^a,c=r>>1^s&i>>1^r,u=a&r>>1^i>>1^i;a=o,s=l,r=c,i=u,o=a&a>>2^s&s>>2,l=a&s>>2^s&(a^s)>>2,c^=a&r>>2^s&i>>2,u^=s&r>>2^(a^s)&i>>2,a=o,s=l,r=c,i=u,o=a&a>>4^s&s>>4,l=a&s>>4^s&(a^s)>>4,c^=a&r>>4^s&i>>4,u^=s&r>>4^(a^s)&i>>4,a=o,s=l,r=c,i=u,c^=a&r>>8^s&i>>8,u^=s&r>>8^(a^s)&i>>8,a=c^c>>1,s=u^u>>1;let d=e^t,f=s|65535^(d|a);return d=(d|d<<8)&16711935,d=(d|d<<4)&252645135,d=(d|d<<2)&858993459,d=(d|d<<1)&1431655765,f=(f|f<<8)&16711935,f=(f|f<<4)&252645135,f=(f|f<<2)&858993459,f=(f|f<<1)&1431655765,(f<<1|d)>>>0}const Ege=e=>{const t=new Map;return e.forEach(a=>{t.set(a.axisId,a)}),t},uW=e=>e.zoom,Lge=St(Go,ec,(e,t)=>e?.some(a=>!!a.zoom)||t?.some(a=>!!a.zoom)||!1),mW=St(uW,e=>e?.isInteracting),Sd=$a(uW,function(t){return t?.zoomData&&Ege(t?.zoomData)}),A6=St(Sd,(e,t)=>e?.get(t)),jx=$a(Go,ec,function(t,a){return Ye({},C6("x")(t),C6("y")(a))});St(jx,(e,t)=>e[t]);const Pge=St(vr,function(t){return S4(t.width)}),Dge=St(vr,function(t){return S4(t.height)}),A4=$a(Go,ya,Wr,EN,Pge,function(t,a,s,r,i){const l={};return t?.forEach((c,u)=>{const d=c;if(Xu(d)||Zu(d)){l[d.id]={domain:d.data};return}const f=WN(d,"x",s,u,a);l[d.id]=oW(d,"x",u,a,f,i,r)}),{axes:t,domains:l}}),T4=$a(ec,ya,Wr,EN,Dge,function(t,a,s,r,i){const l={};return t?.forEach((c,u)=>{const d=c;if(Xu(d)||Zu(d)){l[d.id]={domain:d.data};return}const f=WN(d,"y",s,u,a);l[d.id]=oW(d,"y",u,a,f,i,r)}),{axes:t,domains:l}}),fW=$a(Sd,jx,A4,T4,function(t,a,{axes:s,domains:r},{axes:i,domains:o}){if(!t||!a)return;let l=!1;const c={},u=[...s??[],...i??[]];for(let d=0;d<u.length;d+=1){const f=u[d];if(!a[f.id]||a[f.id].filterMode!=="discard")continue;const p=t.get(f.id);if(p===void 0||p.start<=0&&p.end>=100)continue;const x=d<(s?.length??0)?"x":"y";if(f.scaleType==="band"||f.scaleType==="point")c[f.id]=vge(f.data,p.start,p.end,x);else{const{domain:y}=x==="x"?r[f.id]:o[f.id];c[f.id]=wge(y,p.start,p.end,x,f.data)}l=!0}if(l)return Nge(c)}),Oge=$a(ya,Wr,Sd,jx,fW,EN,A4,function(t,a,s,r,i,o,{axes:l,domains:c}){const u={};return l?.forEach((d,f)=>{const p=c[d.id].domain;if(Xu(d)||Zu(d)){u[d.id]=p;return}const x=s?.get(d.id),y=r?.[d.id],N=x===void 0&&!y?i:void 0;if(!N){u[d.id]=p;return}const v=c[d.id].tickNumber,j=WN(d,"x",a,f,t,N);u[d.id]=lW(d,"x",f,t,j,v,o)}),u}),Mge=$a(ya,Wr,Sd,jx,fW,EN,T4,function(t,a,s,r,i,o,{axes:l,domains:c}){const u={};return l?.forEach((d,f)=>{const p=c[d.id].domain;if(Xu(d)||Zu(d)){u[d.id]=p;return}const x=s?.get(d.id),y=r?.[d.id],N=x===void 0&&!y?i:void 0;if(!N){u[d.id]=p;return}const v=c[d.id].tickNumber,j=WN(d,"y",a,f,t,N);u[d.id]=lW(d,"y",f,t,j,v,o)}),u}),hW=$a(Go,Oge,function(t,a){const s={};return t?.forEach(r=>{const i=r,o=a[i.id];s[i.id]=sW(i,o)}),s}),gW=$a(ec,Mge,function(t,a){const s={};return t?.forEach(r=>{const i=r,o=a[i.id];s[i.id]=sW(i,o)}),s}),Ige=$a(Go,hW,vr,Sd,function(t,a,s,r){const i={};return t?.forEach(o=>{const l=o,c=r?.get(l.id),u=c?[c.start,c.end]:[0,100],d=aW(s,"x",l),f=a[l.id].copy(),p=rW(d,u);f.range(p),i[l.id]=f}),i}),$ge=$a(ec,gW,vr,Sd,function(t,a,s,r){const i={};return t?.forEach(o=>{const l=o,c=r?.get(l.id),u=c?[c.start,c.end]:[0,100],d=aW(s,"y",l),f=a[l.id].copy(),p=vs(f)?d.reverse():d,x=rW(p,u);f.range(x),i[l.id]=f}),i}),Xs=$a(vr,ya,Wr,Sd,A4,Ige,function(t,a,s,r,{axes:i,domains:o},l){return nW({scales:l,drawingArea:t,formattedSeries:a,axis:i,seriesConfig:s,axisDirection:"x",zoomMap:r,domains:o})}),Zs=$a(vr,ya,Wr,Sd,T4,$ge,function(t,a,s,r,{axes:i,domains:o},l){return nW({scales:l,drawingArea:t,formattedSeries:a,axis:i,seriesConfig:s,axisDirection:"y",zoomMap:r,domains:o})});St(Xs,Zs,(e,t,a)=>e?.axis[a]??t?.axis[a]);St(Go,ec,(e,t,a)=>{const s=e?.find(r=>r.id===a)??t?.find(r=>r.id===a)??null;if(s)return s});const Rge=St(Go,e=>e[0].id),zge=St(ec,e=>e[0].id),Fge=new Map,Uge=()=>Fge,Bge=$a(ya,hW,gW,Rge,zge,function(t,a,s,r,i){const o=t.scatter,l=new Map;return o&&o.seriesOrder.forEach(c=>{const{data:u,xAxisId:d=r,yAxisId:f=i}=o.series[c],p=new _4(u.length),x=a[d],y=s[f];for(const N of u)p.add(x(N.x),y(N.y));p.finish(),l.set(c,p)}),l});function Qm(e){return e instanceof Date?e.getTime():e}function Df(e,t){const{scale:a,data:s,reverse:r}=e;if(!vs(a)){const o=a.invert(t);if(s===void 0)return-1;const l=Qm(o);return s?.findIndex((u,d)=>{const f=Qm(u);return f>l&&(d===0||Math.abs(l-f)<=Math.abs(l-Qm(s[d-1])))||f<=l&&(d===s.length-1||Math.abs(Qm(o)-f)<Math.abs(Qm(o)-Qm(s[d+1])))})}const i=a.bandwidth()===0?Math.floor((t-Math.min(...a.range())+a.step()/2)/a.step()):Math.floor((t-Math.min(...a.range()))/a.step());return i<0||i>=s.length?-1:r?s.length-1-i:i}function T6(e,t,a,s){if(!vs(e)){if(s===null){const r=e.invert(a);return Number.isNaN(r)?null:r}return t[s]}return s===null||s<0||s>=t.length?null:t[s]}function _p(e,t){const a=e.createSVGPoint();return a.x=t.clientX,a.y=t.clientY,a.matrixTransform(e.getScreenCTM().inverse())}const Hge=Object.is;function pW(e,t){if(e===t)return!0;if(!(e instanceof Object)||!(t instanceof Object))return!1;let a=0,s=0;for(const r in e)if(a+=1,!Hge(e[r],t[r])||!(r in t))return!1;for(const r in t)s+=1;return a===s}const Cx=({store:e})=>{const t=ps(function(){e.set("interaction",Ye({},e.state.interaction,{pointer:null,item:null}))}),a=ps(function(o){const l=e.state.interaction.item;if(!o){l!==null&&e.set("interaction",Ye({},e.state.interaction,{item:null}));return}l===null||Object.keys(o).some(c=>o[c]!==l[c])||e.set("interaction",Ye({},e.state.interaction,{item:null}))}),s=ps(function(o,l){pW(e.state.interaction.item,o)||e.set("interaction",Ye({},e.state.interaction,{lastUpdate:l.interaction,item:o}))}),r=ps(function(o){e.set("interaction",Ye({},e.state.interaction,{pointer:o,lastUpdate:o!==null?"pointer":e.state.interaction.lastUpdate}))});return{instance:{cleanInteraction:t,setItemInteraction:s,removeItemInteraction:a,setPointerCoordinate:r}}};Cx.getInitialState=()=>({interaction:{item:null,pointer:null,lastUpdate:"pointer"}});Cx.params={};const GN=e=>e.interaction,qge=St(GN,e=>e!==void 0),xW=St(GN,e=>e?.item??null),yW=St(GN,e=>e?.pointer??null),Sx=St(yW,e=>e&&e.x),_x=St(yW,e=>e&&e.y),Wge=St(xW,e=>e!==null),Ax=St(GN,e=>e?.lastUpdate),Gge=new Set(["bar","line","scatter","pie"]);function bW(e){return Gge.has(e)}function vW(e,t,a){const s=Object.keys(e),r=t!==void 0&&e[t]?s.indexOf(t):0,i=t!==void 0&&a!==void 0&&e[t]&&e[t].series[a]?e[t].seriesOrder.indexOf(a):-1,o=s.filter(bW);for(let d=0;d<o.length;d+=1){const f=(r+d)%o.length,p=e[o[f]],x=d===0?i+1:0;for(let y=x;y<p.seriesOrder.length;y+=1)if(p.series[p.seriesOrder[y]].data.length>0)return{type:o[f],seriesId:p.seriesOrder[y]}}const l=r,c=e[o[l]],u=i;for(let d=0;d<u;d+=1)if(c.series[c.seriesOrder[d]].data.length>0)return{type:o[l],seriesId:c.seriesOrder[d]};return null}function wW(e,t,a){const s=Object.keys(e),r=t!==void 0&&e[t]?s.indexOf(t):0,i=t!==void 0&&a!==void 0&&e[t]&&e[t].series[a]?e[t].seriesOrder.indexOf(a):1,o=s.filter(bW);for(let d=0;d<o.length;d+=1){const f=(o.length+r-d)%o.length,p=e[o[f]],x=d===0?i+1:p.seriesOrder.length;for(let y=1;y<x;y+=1){const N=(p.seriesOrder.length+i-y)%p.seriesOrder.length;if(p.series[p.seriesOrder[N]].data.length>0)return{type:o[f],seriesId:p.seriesOrder[N]}}}const l=r,c=e[o[l]],u=c.seriesOrder;for(let d=u.length-1;d>i;d-=1)if(c.series[c.seriesOrder[d]].data.length>0)return{type:o[l],seriesId:c.seriesOrder[d]};return null}function NW(e,t,a){if(t==="sankey")return!1;const s=e[t]?.series[a]?.data;return s&&s.length>0}function Vge(e){const t=ya(e);let{type:a,seriesId:s}=e.keyboardNavigation.item??{};if(a===void 0||a==="sankey"||s===void 0||!NW(t,a,s)){const i=vW(t,a,s);if(i===null)return null;a=i.type,s=i.seriesId}const r=t[a].series[s].data.length;return{type:a,seriesId:s,dataIndex:((e.keyboardNavigation.item?.dataIndex??-1)+1)%r}}function Yge(e){const t=ya(e);let{type:a,seriesId:s}=e.keyboardNavigation.item??{};if(a===void 0||a==="sankey"||s===void 0||!NW(t,a,s)){const i=wW(t,a,s);if(i===null)return null;a=i.type,s=i.seriesId}const r=t[a].series[s].data.length;return{type:a,seriesId:s,dataIndex:(r+(e.keyboardNavigation.item?.dataIndex??1)-1)%r}}function Qge(e){const t=ya(e);let{type:a,seriesId:s}=e.keyboardNavigation.item??{};const r=vW(t,a,s);if(r===null)return null;a=r.type,s=r.seriesId;const i=t[a].series[s].data.length;return{type:a,seriesId:s,dataIndex:Math.min(i-1,e.keyboardNavigation.item?.dataIndex??0)}}function Kge(e){const t=ya(e);let{type:a,seriesId:s}=e.keyboardNavigation.item??{};const r=wW(t,a,s);if(r===null)return null;a=r.type,s=r.seriesId;const i=t[a].series[s].data.length;return{type:a,seriesId:s,dataIndex:Math.min(i-1,e.keyboardNavigation.item?.dataIndex??0)}}const VN=({params:e,store:t,svgRef:a})=>{const s=ps(function(){t.state.keyboardNavigation.item!==null&&t.set("keyboardNavigation",Ye({},t.state.keyboardNavigation,{item:null}))});return h.useEffect(()=>{const r=a.current;if(!r||!e.enableKeyboardNavigation)return;function i(o){let l=t.state.keyboardNavigation.item;switch(o.key){case"ArrowRight":l=Vge(t.state);break;case"ArrowLeft":l=Yge(t.state);break;case"ArrowDown":{l=Kge(t.state);break}case"ArrowUp":{l=Qge(t.state);break}}l!==t.state.keyboardNavigation.item&&(o.preventDefault(),t.update(Ye({},t.state.highlight&&{highlight:Ye({},t.state.highlight,{lastUpdate:"keyboard"})},t.state.interaction&&{interaction:Ye({},t.state.interaction,{lastUpdate:"keyboard"})},{keyboardNavigation:Ye({},t.state.keyboardNavigation,{item:l})})))}return r.addEventListener("keydown",i),r.addEventListener("blur",s),()=>{r.removeEventListener("keydown",i),r.removeEventListener("blur",s)}},[a,s,e.enableKeyboardNavigation,t]),is(()=>{t.state.keyboardNavigation.enableKeyboardNavigation!==e.enableKeyboardNavigation&&t.set("keyboardNavigation",Ye({},t.state.keyboardNavigation,{enableKeyboardNavigation:!!e.enableKeyboardNavigation}))},[t,e.enableKeyboardNavigation]),{}};VN.getInitialState=e=>({keyboardNavigation:{item:null,enableKeyboardNavigation:!!e.enableKeyboardNavigation}});VN.params={enableKeyboardNavigation:!0};const tm=e=>e.keyboardNavigation;St(tm,(e,t)=>e?.item!=null&&e.item.type===t.seriesType&&e.item.seriesId===t.seriesId&&e.item.dataIndex===t.dataIndex);const Xge=St(tm,e=>e?.item!=null),YN=St(tm,e=>e?.item?.type),QN=St(tm,e=>e?.item?.seriesId),KN=St(tm,e=>e?.item?.dataIndex),Zge=St(tm,e=>!!e?.enableKeyboardNavigation),jW=e=>(t,a,s,r,i)=>{if(t===void 0||a===void 0||s===void 0)return;const o=i[t]?.series[a];if(!o)return;let l=e==="x"?"xAxisId"in o&&o.xAxisId:"yAxisId"in o&&o.yAxisId;return(l===void 0||l===!1)&&(l=r.axisIds[0]),{axisId:l,dataIndex:s}},Jge=St(YN,QN,KN,Xs,ya,jW("x")),epe=St(YN,QN,KN,Zs,ya,jW("y")),CW=St(tm,function(t){if(t?.item==null)return null;const{type:a,seriesId:s}=t.item;return a===void 0||s===void 0?null:t.item}),tpe=St(YN,QN,KN,function(t,a,s){return a!==void 0&&s!==void 0}),SW=St(Ax,xW,CW,(e,t,a)=>e==="keyboard"?a:t??null),npe=St(Ax,Wge,tpe,(e,t,a)=>e==="keyboard"?a:t),ape=St(SW,vr,Wr,Xs,Zs,ya,function(t,a,s,{axis:r,axisIds:i},{axis:o,axisIds:l},c,u="top"){if(!t)return null;const d=c[t.type]?.series[t.seriesId];if(d){const f={},p=Lv(d)?d.xAxisId??i[0]:void 0,x=Lv(d)?d.yAxisId??l[0]:void 0;return p!==void 0&&(f.x=r[p]),x!==void 0&&(f.y=o[x]),s[d.type].tooltipItemPositionGetter?.({series:c,drawingArea:a,axesConfig:f,identifier:t,placement:u})??null}return null});function vf(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;if(Array.isArray(e)){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;i+=1)if(!vf(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;const r=Array.from(e.entries());for(let i=0;i<r.length;i+=1)if(!t.has(r[i][0]))return!1;for(let i=0;i<r.length;i+=1){const o=r[i];if(!vf(o[1],t.get(o[0])))return!1}return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;const r=Array.from(e.entries());for(let i=0;i<r.length;i+=1)if(!t.has(r[i][0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;i+=1)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();const a=Object.keys(e),s=a.length;if(s!==Object.keys(t).length)return!1;for(let r=0;r<s;r+=1)if(!Object.prototype.hasOwnProperty.call(t,a[r]))return!1;for(let r=0;r<s;r+=1){const i=a[r];if(!vf(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function Ak(e,t,a=t.axisIds[0]){return Array.isArray(a)?a.map(s=>Df(t.axis[s],e)):Df(t.axis[a],e)}const _W=(e,t,a)=>{if(e===null)return null;const s=Ak(e,t,a);return s===-1?null:s},k4=St(Sx,Xs,_W),E4=St(_x,Zs,_W),spe=St(Sx,_x,Xs,Zs,(e,t,a,s)=>[...e===null?[]:a.axisIds.map(r=>({axisId:r,dataIndex:Ak(e,a,r)})),...t===null?[]:s.axisIds.map(r=>({axisId:r,dataIndex:Ak(t,s,r)}))].filter(r=>r.dataIndex!==null&&r.dataIndex>=0));function AW(e,t,a,s=t.axisIds[0]){return Array.isArray(s)?s.map((r,i)=>{const o=t.axis[r];return T6(o.scale,o.data,e,a[i])}):T6(t.axis[s].scale,t.axis[s].data,e,a)}const rpe=St(Sx,Xs,k4,(e,t,a,s)=>e===null||t.axisIds.length===0?null:AW(e,t,a,s)),ipe=St(_x,Zs,E4,(e,t,a,s)=>e===null||t.axisIds.length===0?null:AW(e,t,a,s)),TW=[],kW=SN({memoizeOptions:{resultEqualityCheck:vf}})(Sx,Xs,(e,t)=>e===null?TW:t.axisIds.filter(a=>t.axis[a].triggerTooltip).map(a=>({axisId:a,dataIndex:Df(t.axis[a],e)})).filter(({dataIndex:a})=>a>=0)),EW=SN({memoizeOptions:{resultEqualityCheck:vf}})(_x,Zs,(e,t)=>e===null?TW:t.axisIds.filter(a=>t.axis[a].triggerTooltip).map(a=>({axisId:a,dataIndex:Df(t.axis[a],e)})).filter(({dataIndex:a})=>a>=0)),ope=St(kW,EW,(e,t)=>e.length>0||t.length>0);function lpe(e){return e.setPointerCoordinate!==void 0}const nh=({params:e,store:t,seriesConfig:a,svgRef:s,instance:r})=>{const{xAxis:i,yAxis:o,dataset:l,onHighlightedAxisChange:c}=e,u=Ht(t,vr),d=Ht(t,ya),f=Ht(t,qge),{axis:p,axisIds:x}=Ht(t,Xs),{axis:y,axisIds:N}=Ht(t,Zs);fq({controlled:e.highlightedAxis}),is(()=>{e.highlightedAxis!==void 0&&t.set("controlledCartesianAxisHighlight",e.highlightedAxis)},[t,e.highlightedAxis]);const v=h.useRef(!0);h.useEffect(()=>{if(v.current){v.current=!1;return}t.set("cartesianAxis",{x:pq(i,l),y:xq(o,l)})},[a,u,i,o,l,t]);const j=x[0],w=N[0];Xue(t,spe,(_,E)=>{if(c&&!Object.is(_,E)){if(_.length!==E.length){c(E);return}_?.some(({axisId:T,dataIndex:A},L)=>E[L].axisId!==T||E[L].dataIndex!==A)&&c(E)}});const S=lpe(r);return h.useEffect(()=>{const _=s.current;if(!f||!S||!_||e.disableAxisListener)return()=>{};const E=r.addInteractionListener("moveEnd",D=>{D.detail.activeGestures.pan||r.cleanInteraction()}),T=r.addInteractionListener("panEnd",D=>{D.detail.activeGestures.move||r.cleanInteraction()}),A=r.addInteractionListener("quickPressEnd",D=>{!D.detail.activeGestures.move&&!D.detail.activeGestures.pan&&r.cleanInteraction()}),L=D=>{const q=D.detail.srcEvent,G=D.detail.target,U=_p(_,q);if(D.detail.srcEvent.buttons>=1&&G?.hasPointerCapture(D.detail.srcEvent.pointerId)&&!G?.closest("[data-charts-zoom-slider]")&&G?.releasePointerCapture(D.detail.srcEvent.pointerId),!r.isPointInside(U.x,U.y,G)){r.cleanInteraction?.();return}r.setPointerCoordinate(U)},M=r.addInteractionListener("move",L),F=r.addInteractionListener("pan",L),$=r.addInteractionListener("quickPress",L);return()=>{M.cleanup(),E.cleanup(),F.cleanup(),T.cleanup(),$.cleanup(),A.cleanup()}},[s,t,p,j,y,w,r,e.disableAxisListener,f,S]),h.useEffect(()=>{const _=s.current,E=e.onAxisClick;if(_===null||!E)return()=>{};const T=r.addInteractionListener("tap",A=>{let L=null,M=!1;const F=_p(_,A.detail.srcEvent),$=Df(p[j],F.x);M=$!==-1,L=M?$:Df(y[w],F.y);const D=M?x[0]:N[0];if(L==null||L===-1)return;const q=(M?p:y)[D].data[L],G={};Object.keys(d).filter(U=>["bar","line"].includes(U)).forEach(U=>{d[U]?.seriesOrder.forEach(V=>{const Z=d[U].series[V],Y=Z.xAxisId,le=Z.yAxisId,_e=M?Y:le;(_e===void 0||_e===D)&&(G[V]=Z.data[L])})}),E(A.detail.srcEvent,{dataIndex:L,axisValue:q,seriesValues:G})});return()=>{T.cleanup()}},[e.onAxisClick,d,s,p,x,y,N,j,w,r]),{}};nh.params={xAxis:!0,yAxis:!0,dataset:!0,onAxisClick:!0,disableAxisListener:!0,onHighlightedAxisChange:!0,highlightedAxis:!0};nh.getDefaultizedParams=({params:e})=>Ye({},e,{colors:e.colors??cq,theme:e.theme??"light",defaultizedXAxis:pq(e.xAxis,e.dataset),defaultizedYAxis:xq(e.yAxis,e.dataset)});nh.getInitialState=e=>Ye({cartesianAxis:{x:e.defaultizedXAxis,y:e.defaultizedYAxis}},e.highlightedAxis===void 0?{}:{controlledCartesianAxisHighlight:e.highlightedAxis});const Vo=e=>e.brush;St(Vo,e=>e?.start);St(Vo,e=>e?.current);const cpe=St(Vo,e=>e?.start?.x??null),dpe=St(Vo,e=>e?.start?.y??null),upe=St(Vo,e=>e?.current?.x??null),mpe=St(Vo,e=>e?.current?.y??null);St(cpe,dpe,upe,mpe,(e,t,a,s)=>e===null||t===null||a===null||s===null?null:{start:{x:e,y:t},current:{x:a,y:s}});const fpe=St(ya,e=>{let t=!1,a=!1;return e&&Object.entries(e).forEach(([s,r])=>{Object.values(r.series).some(i=>i.layout==="horizontal")&&(t=!0),s==="scatter"&&r.seriesOrder.length>0&&(a=!0)}),a?"xy":t?"y":"x"}),hpe=St(jx,function(t){let a=!1,s=!1;return Object.values(t).forEach(r=>{r.axisDirection==="y"&&(s=!0),r.axisDirection==="x"&&(a=!0)}),a&&s?"xy":s?"y":a?"x":null});St(fpe,hpe,(e,t)=>t??e);const LW=St(Vo,e=>e?.enabled||e?.isZoomBrushEnabled),PW=St(LW,Vo,(e,t)=>e&&t?.start!==null&&t?.current!==null),XN=St(Vo,PW,(e,t)=>t&&e?.preventHighlight),gpe=St(Vo,PW,(e,t)=>t&&e?.preventTooltip),Tx=({store:e,svgRef:t,instance:a,params:s})=>{const r=Ht(e,LW);is(()=>{e.set("brush",Ye({},e.state.brush,{enabled:s.brushConfig.enabled,preventTooltip:s.brushConfig.preventTooltip,preventHighlight:s.brushConfig.preventHighlight}))},[e,s.brushConfig.enabled,s.brushConfig.preventTooltip,s.brushConfig.preventHighlight]);const i=ps(function(u){e.set("brush",Ye({},e.state.brush,{start:e.state.brush.start??u,current:u}))}),o=ps(function(){e.set("brush",Ye({},e.state.brush,{start:null,current:null}))}),l=ps(function(u){e.state.brush.isZoomBrushEnabled!==u&&e.set("brush",Ye({},e.state.brush,{isZoomBrushEnabled:u}))});return h.useEffect(()=>{const c=t.current;if(c===null||!r)return()=>{};const u=N=>{if(N.detail.target?.closest("[data-charts-zoom-slider]"))return;const v=_p(c,{clientX:N.detail.initialCentroid.x,clientY:N.detail.initialCentroid.y});i(v)},d=N=>{const v=_p(c,{clientX:N.detail.centroid.x,clientY:N.detail.centroid.y});i(v)},f=a.addInteractionListener("brushStart",u),p=a.addInteractionListener("brush",d),x=a.addInteractionListener("brushCancel",o),y=a.addInteractionListener("brushEnd",o);return()=>{f.cleanup(),p.cleanup(),y.cleanup(),x.cleanup()}},[t,a,e,o,i,r]),{instance:{setBrushCoordinates:i,clearBrush:o,setZoomBrushEnabled:l}}};Tx.params={brushConfig:!0};Tx.getDefaultizedParams=({params:e})=>Ye({},e,{brushConfig:{enabled:e?.brushConfig?.enabled??!1,preventTooltip:e?.brushConfig?.preventTooltip??!0,preventHighlight:e?.brushConfig?.preventHighlight??!0}});Tx.getInitialState=e=>({brush:{enabled:e.brushConfig.enabled,isZoomBrushEnabled:!1,preventTooltip:e.brushConfig.preventTooltip,preventHighlight:e.brushConfig.preventHighlight,start:null,current:null}});const ah=e=>e.controlledCartesianAxisHighlight,DW=(e,t,a,s)=>s?[]:a!==void 0?a.filter(r=>t.axis[r.axisId]!==void 0).map(r=>r):e===null?[]:[{axisId:t.axisIds[0],dataIndex:e}],OW=$a(k4,Xs,ah,XN,DW);$a(E4,Zs,ah,XN,DW);const MW=(e,t,a,s,r,i,o)=>{if(o)return[];if(s!==void 0)return s.map(d=>Ye({},d,{value:a.axis[d.axisId]?.data?.[d.dataIndex]})).filter(({value:d})=>d!==void 0);const l=t!==null&&{axisId:a.axisIds[0],dataIndex:e,value:t},c=r&&a.axis[r.axisId]?.data?.[r.dataIndex],u=r&&c!=null&&Ye({},r,{value:c});if(i==="pointer"){if(l)return[l];if(u)return[u]}if(i==="keyboard"){if(u)return[u];if(l)return[l]}return[]},ppe=St(k4,rpe,Xs,ah,Jge,Ax,XN,MW),xpe=St(E4,ipe,Zs,ah,epe,Ax,XN,MW),IW=(e,t)=>e===void 0?[t.axis[t.axisIds[0]]]:e.map(s=>t.axis[s.axisId]??null).filter(s=>s!==null);St(ah,Xs,IW);St(ah,Zs,IW);function k6(e,t){return e.id!==void 0?e:Ye({id:t},e)}function E6(e){return e.colorMap?Ye({},e,{colorScale:e.colorMap.type==="ordinal"&&e.data?Pf(Ye({values:e.data},e.colorMap)):bf(e.colorMap.type==="continuous"?Ye({min:e.min,max:e.max},e.colorMap):e.colorMap)}):e}function $W(e,t){if(!e||e.length===0)return{axis:{},axisIds:[]};const a={},s=[];return e.forEach((r,i)=>{const o=r.dataKey,l=r.id??`defaultized-z-axis-${i}`;if(o===void 0||r.data!==void 0){a[l]=E6(k6(r,l)),s.push(l);return}if(t===void 0)throw new Error("MUI X Charts: z-axis uses `dataKey` but no `dataset` is provided.");a[l]=E6(k6(Ye({},r,{data:t.map(c=>c[o])}),l)),s.push(l)}),{axis:a,axisIds:s}}const kx=({params:e,store:t})=>{const{zAxis:a,dataset:s}=e,r=h.useRef(!0);return h.useEffect(()=>{if(r.current){r.current=!1;return}t.set("zAxis",$W(a,s))},[a,s,t]),{}};kx.params={zAxis:!0,dataset:!0};kx.getInitialState=e=>({zAxis:$W(e.zAxis,e.dataset)});const ype=e=>e,bpe=St(ype,e=>e.zAxis),Ex=({store:e,params:t})=>{fq({controlled:t.highlightedItem}),is(()=>{e.state.highlight.item!==t.highlightedItem&&e.set("highlight",Ye({},e.state.highlight,{item:t.highlightedItem}))},[e,t.highlightedItem]);const a=ps(()=>{t.onHighlightChange?.(null);const r=e.getSnapshot().highlight;r.item===null||r.isControlled||e.set("highlight",{item:null,lastUpdate:"pointer",isControlled:!1})}),s=ps(r=>{const i=e.getSnapshot().highlight;i.isControlled||pW(i.item,r)||(t.onHighlightChange?.(r),e.set("highlight",{item:r,lastUpdate:"pointer",isControlled:!1}))});return{instance:{clearHighlight:a,setHighlight:s}}};Ex.getInitialState=e=>({highlight:{item:e.highlightedItem,lastUpdate:"pointer",isControlled:e.highlightedItem!==void 0}});Ex.params={highlightedItem:!0,onHighlightChange:!0};function Pv(e){let t=1/0,a=-1/0;for(const s of e??[])s<t&&(t=s),s>a&&(a=s);return[t,a]}const L6=(e,t)=>t==="x"?{x:e,y:null}:{x:null,y:e},RW=e=>{const{axis:t,getFilters:a,isDefaultAxis:s}=e,r=a?.({currentAxisId:t.id,isDefaultAxis:s}),i=r?t.data?.filter((o,l)=>r({x:null,y:null},l)):t.data;return Pv(i??[])},zW=e=>t=>{const{series:a,axis:s,getFilters:r,isDefaultAxis:i}=t;return Object.keys(a).filter(o=>{const l=e==="x"?a[o].xAxisId:a[o].yAxisId;return l===s.id||i&&l===void 0}).reduce((o,l)=>{const{stackedData:c}=a[l],u=r?.({currentAxisId:s.id,isDefaultAxis:i,seriesXAxisId:a[l].xAxisId,seriesYAxisId:a[l].yAxisId}),[d,f]=c?.reduce((p,x,y)=>u&&(!u(L6(x[0],e),y)||!u(L6(x[1],e),y))?p:[Math.min(...x,p[0]),Math.max(...x,p[1])],[1/0,-1/0])??[1/0,-1/0];return[Math.min(d,o[0]),Math.max(f,o[1])]},[1/0,-1/0])},vpe=e=>Object.keys(e.series).some(a=>e.series[a].layout==="horizontal")?zW("x")(e):RW(e),wpe=e=>Object.keys(e.series).some(a=>e.series[a].layout==="horizontal")?RW(e):zW("y")(e);function Nn(e){return function(){return e}}const FW=Math.cos,Dv=Math.sin,eo=Math.sqrt,P6=1e-12,Ov=Math.PI,wu=2*Ov,Tk=Math.PI,kk=2*Tk,Jd=1e-6,Npe=kk-Jd;function UW(e){this._+=e[0];for(let t=1,a=e.length;t<a;++t)this._+=arguments[t]+e[t]}function jpe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return UW;const a=10**t;return function(s){this._+=s[0];for(let r=1,i=s.length;r<i;++r)this._+=Math.round(arguments[r]*a)/a+s[r]}}class Cpe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?UW:jpe(t)}moveTo(t,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+a}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,a){this._append`L${this._x1=+t},${this._y1=+a}`}quadraticCurveTo(t,a,s,r){this._append`Q${+t},${+a},${this._x1=+s},${this._y1=+r}`}bezierCurveTo(t,a,s,r,i,o){this._append`C${+t},${+a},${+s},${+r},${this._x1=+i},${this._y1=+o}`}arcTo(t,a,s,r,i){if(t=+t,a=+a,s=+s,r=+r,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=s-t,u=r-a,d=o-t,f=l-a,p=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=a}`;else if(p>Jd)if(!(Math.abs(f*c-u*d)>Jd)||!i)this._append`L${this._x1=t},${this._y1=a}`;else{let x=s-o,y=r-l,N=c*c+u*u,v=x*x+y*y,j=Math.sqrt(N),w=Math.sqrt(p),S=i*Math.tan((Tk-Math.acos((N+p-v)/(2*j*w)))/2),_=S/w,E=S/j;Math.abs(_-1)>Jd&&this._append`L${t+_*d},${a+_*f}`,this._append`A${i},${i},0,0,${+(f*x>d*y)},${this._x1=t+E*c},${this._y1=a+E*u}`}}arc(t,a,s,r,i,o){if(t=+t,a=+a,s=+s,o=!!o,s<0)throw new Error(`negative radius: ${s}`);let l=s*Math.cos(r),c=s*Math.sin(r),u=t+l,d=a+c,f=1^o,p=o?r-i:i-r;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Jd||Math.abs(this._y1-d)>Jd)&&this._append`L${u},${d}`,s&&(p<0&&(p=p%kk+kk),p>Npe?this._append`A${s},${s},0,1,${f},${t-l},${a-c}A${s},${s},0,1,${f},${this._x1=u},${this._y1=d}`:p>Jd&&this._append`A${s},${s},0,${+(p>=Tk)},${f},${this._x1=t+s*Math.cos(i)},${this._y1=a+s*Math.sin(i)}`)}rect(t,a,s,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+a}h${s=+s}v${+r}h${-s}Z`}toString(){return this._}}function L4(e){let t=3;return e.digits=function(a){if(!arguments.length)return t;if(a==null)t=null;else{const s=Math.floor(a);if(!(s>=0))throw new RangeError(`invalid digits: ${a}`);t=s}return e},()=>new Cpe(t)}function ZN(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function BW(e){this._context=e}BW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Lx(e){return new BW(e)}function HW(e){return e[0]}function qW(e){return e[1]}function P4(e,t){var a=Nn(!0),s=null,r=Lx,i=null,o=L4(l);e=typeof e=="function"?e:e===void 0?HW:Nn(e),t=typeof t=="function"?t:t===void 0?qW:Nn(t);function l(c){var u,d=(c=ZN(c)).length,f,p=!1,x;for(s==null&&(i=r(x=o())),u=0;u<=d;++u)!(u<d&&a(f=c[u],u,c))===p&&((p=!p)?i.lineStart():i.lineEnd()),p&&i.point(+e(f,u,c),+t(f,u,c));if(x)return i=null,x+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Nn(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Nn(+c),l):t},l.defined=function(c){return arguments.length?(a=typeof c=="function"?c:Nn(!!c),l):a},l.curve=function(c){return arguments.length?(r=c,s!=null&&(i=r(s)),l):r},l.context=function(c){return arguments.length?(c==null?s=i=null:i=r(s=c),l):s},l}function Ug(e,t,a){var s=null,r=Nn(!0),i=null,o=Lx,l=null,c=L4(u);e=typeof e=="function"?e:e===void 0?HW:Nn(+e),t=typeof t=="function"?t:Nn(t===void 0?0:+t),a=typeof a=="function"?a:a===void 0?qW:Nn(+a);function u(f){var p,x,y,N=(f=ZN(f)).length,v,j=!1,w,S=new Array(N),_=new Array(N);for(i==null&&(l=o(w=c())),p=0;p<=N;++p){if(!(p<N&&r(v=f[p],p,f))===j)if(j=!j)x=p,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),y=p-1;y>=x;--y)l.point(S[y],_[y]);l.lineEnd(),l.areaEnd()}j&&(S[p]=+e(v,p,f),_[p]=+t(v,p,f),l.point(s?+s(v,p,f):S[p],a?+a(v,p,f):_[p]))}if(w)return l=null,w+""||null}function d(){return P4().defined(r).curve(o).context(i)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Nn(+f),s=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Nn(+f),u):e},u.x1=function(f){return arguments.length?(s=f==null?null:typeof f=="function"?f:Nn(+f),u):s},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Nn(+f),a=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Nn(+f),u):t},u.y1=function(f){return arguments.length?(a=f==null?null:typeof f=="function"?f:Nn(+f),u):a},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(a)},u.lineX1=function(){return d().x(s).y(t)},u.defined=function(f){return arguments.length?(r=typeof f=="function"?f:Nn(!!f),u):r},u.curve=function(f){return arguments.length?(o=f,i!=null&&(l=o(i)),u):o},u.context=function(f){return arguments.length?(f==null?i=l=null:l=o(i=f),u):i},u}function Spe(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function _pe(e){return e}function Ape(){var e=_pe,t=Spe,a=null,s=Nn(0),r=Nn(wu),i=Nn(0);function o(l){var c,u=(l=ZN(l)).length,d,f,p=0,x=new Array(u),y=new Array(u),N=+s.apply(this,arguments),v=Math.min(wu,Math.max(-wu,r.apply(this,arguments)-N)),j,w=Math.min(Math.abs(v)/u,i.apply(this,arguments)),S=w*(v<0?-1:1),_;for(c=0;c<u;++c)(_=y[x[c]=c]=+e(l[c],c,l))>0&&(p+=_);for(t!=null?x.sort(function(E,T){return t(y[E],y[T])}):a!=null&&x.sort(function(E,T){return a(l[E],l[T])}),c=0,f=p?(v-u*S)/p:0;c<u;++c,N=j)d=x[c],_=y[d],j=N+(_>0?_*f:0)+S,y[d]={data:l[d],index:c,value:_,startAngle:N,endAngle:j,padAngle:w};return y}return o.value=function(l){return arguments.length?(e=typeof l=="function"?l:Nn(+l),o):e},o.sortValues=function(l){return arguments.length?(t=l,a=null,o):t},o.sort=function(l){return arguments.length?(a=l,t=null,o):a},o.startAngle=function(l){return arguments.length?(s=typeof l=="function"?l:Nn(+l),o):s},o.endAngle=function(l){return arguments.length?(r=typeof l=="function"?l:Nn(+l),o):r},o.padAngle=function(l){return arguments.length?(i=typeof l=="function"?l:Nn(+l),o):i},o}class WW{constructor(t,a){this._context=t,this._x=a}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,a){switch(t=+t,a=+a,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,a):this._context.moveTo(t,a);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,a,t,a):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+a)/2,t,this._y0,t,a);break}}this._x0=t,this._y0=a}}function GW(e){return new WW(e,!0)}function VW(e){return new WW(e,!1)}const JN={draw(e,t){const a=eo(t/Ov);e.moveTo(a,0),e.arc(0,0,a,0,wu)}},YW={draw(e,t){const a=eo(t/5)/2;e.moveTo(-3*a,-a),e.lineTo(-a,-a),e.lineTo(-a,-3*a),e.lineTo(a,-3*a),e.lineTo(a,-a),e.lineTo(3*a,-a),e.lineTo(3*a,a),e.lineTo(a,a),e.lineTo(a,3*a),e.lineTo(-a,3*a),e.lineTo(-a,a),e.lineTo(-3*a,a),e.closePath()}},QW=eo(1/3),Tpe=QW*2,KW={draw(e,t){const a=eo(t/Tpe),s=a*QW;e.moveTo(0,-a),e.lineTo(s,0),e.lineTo(0,a),e.lineTo(-s,0),e.closePath()}},XW={draw(e,t){const a=eo(t),s=-a/2;e.rect(s,s,a,a)}},kpe=.8908130915292852,ZW=Dv(Ov/10)/Dv(7*Ov/10),Epe=Dv(wu/10)*ZW,Lpe=-FW(wu/10)*ZW,JW={draw(e,t){const a=eo(t*kpe),s=Epe*a,r=Lpe*a;e.moveTo(0,-a),e.lineTo(s,r);for(let i=1;i<5;++i){const o=wu*i/5,l=FW(o),c=Dv(o);e.lineTo(c*a,-l*a),e.lineTo(l*s-c*r,c*s+l*r)}e.closePath()}},f2=eo(3),eG={draw(e,t){const a=-eo(t/(f2*3));e.moveTo(0,a*2),e.lineTo(-f2*a,-a),e.lineTo(f2*a,-a),e.closePath()}},ai=-.5,si=eo(3)/2,Ek=1/eo(12),Ppe=(Ek/2+1)*3,tG={draw(e,t){const a=eo(t/Ppe),s=a/2,r=a*Ek,i=s,o=a*Ek+a,l=-i,c=o;e.moveTo(s,r),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(ai*s-si*r,si*s+ai*r),e.lineTo(ai*i-si*o,si*i+ai*o),e.lineTo(ai*l-si*c,si*l+ai*c),e.lineTo(ai*s+si*r,ai*r-si*s),e.lineTo(ai*i+si*o,ai*o-si*i),e.lineTo(ai*l+si*c,ai*c-si*l),e.closePath()}},nG=[JN,YW,KW,XW,JW,eG,tG];function D4(e,t){let a=null,s=L4(r);e=typeof e=="function"?e:Nn(e||JN),t=typeof t=="function"?t:Nn(t===void 0?64:+t);function r(){let i;if(a||(a=i=s()),e.apply(this,arguments).draw(a,+t.apply(this,arguments)),i)return a=null,i+""||null}return r.type=function(i){return arguments.length?(e=typeof i=="function"?i:Nn(i),r):e},r.size=function(i){return arguments.length?(t=typeof i=="function"?i:Nn(+i),r):t},r.context=function(i){return arguments.length?(a=i??null,r):a},r}function Mv(){}function Iv(e,t,a){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+a)/6)}function aG(e){this._context=e}aG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Iv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Iv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Dpe(e){return new aG(e)}function sG(e){this._context=e}sG.prototype={areaStart:Mv,areaEnd:Mv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Iv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Ope(e){return new sG(e)}function rG(e){this._context=e}rG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var a=(this._x0+4*this._x1+e)/6,s=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(a,s):this._context.moveTo(a,s);break;case 3:this._point=4;default:Iv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Mpe(e){return new rG(e)}function D6(e,t,a){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-a),e._x2,e._y2)}function O4(e,t){this._context=e,this._k=(1-t)/6}O4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:D6(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:D6(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};(function e(t){function a(s){return new O4(s,t)}return a.tension=function(s){return e(+s)},a})(0);function Ipe(e,t,a){var s=e._x1,r=e._y1,i=e._x2,o=e._y2;if(e._l01_a>P6){var l=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,c=3*e._l01_a*(e._l01_a+e._l12_a);s=(s*l-e._x0*e._l12_2a+e._x2*e._l01_2a)/c,r=(r*l-e._y0*e._l12_2a+e._y2*e._l01_2a)/c}if(e._l23_a>P6){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,d=3*e._l23_a*(e._l23_a+e._l12_a);i=(i*u+e._x1*e._l23_2a-t*e._l12_2a)/d,o=(o*u+e._y1*e._l23_2a-a*e._l12_2a)/d}e._context.bezierCurveTo(s,r,i,o,e._x2,e._y2)}function iG(e,t){this._context=e,this._alpha=t}iG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var a=this._x2-e,s=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(a*a+s*s,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Ipe(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const $pe=(function e(t){function a(s){return t?new iG(s,t):new O4(s,0)}return a.alpha=function(s){return e(+s)},a})(.5);function oG(e){this._context=e}oG.prototype={areaStart:Mv,areaEnd:Mv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Rpe(e){return new oG(e)}function O6(e){return e<0?-1:1}function M6(e,t,a){var s=e._x1-e._x0,r=t-e._x1,i=(e._y1-e._y0)/(s||r<0&&-0),o=(a-e._y1)/(r||s<0&&-0),l=(i*r+o*s)/(s+r);return(O6(i)+O6(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function I6(e,t){var a=e._x1-e._x0;return a?(3*(e._y1-e._y0)/a-t)/2:t}function h2(e,t,a){var s=e._x0,r=e._y0,i=e._x1,o=e._y1,l=(i-s)/3;e._context.bezierCurveTo(s+l,r+l*t,i-l,o-l*a,i,o)}function $v(e){this._context=e}$v.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:h2(this,this._t0,I6(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var a=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,h2(this,I6(this,a=M6(this,e,t)),a);break;default:h2(this,this._t0,a=M6(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=a}}};function lG(e){this._context=new cG(e)}(lG.prototype=Object.create($v.prototype)).point=function(e,t){$v.prototype.point.call(this,t,e)};function cG(e){this._context=e}cG.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,a,s,r,i){this._context.bezierCurveTo(t,e,s,a,i,r)}};function Lk(e){return new $v(e)}function dG(e){return new lG(e)}function uG(e){this._context=e}uG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,a=e.length;if(a)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),a===2)this._context.lineTo(e[1],t[1]);else for(var s=$6(e),r=$6(t),i=0,o=1;o<a;++i,++o)this._context.bezierCurveTo(s[0][i],r[0][i],s[1][i],r[1][i],e[o],t[o]);(this._line||this._line!==0&&a===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function $6(e){var t,a=e.length-1,s,r=new Array(a),i=new Array(a),o=new Array(a);for(r[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<a-1;++t)r[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(r[a-1]=2,i[a-1]=7,o[a-1]=8*e[a-1]+e[a],t=1;t<a;++t)s=r[t]/i[t-1],i[t]-=s,o[t]-=s*o[t-1];for(r[a-1]=o[a-1]/i[a-1],t=a-2;t>=0;--t)r[t]=(o[t]-r[t+1])/i[t];for(i[a-1]=(e[a]+r[a-1])/2,t=0;t<a-1;++t)i[t]=2*e[t+1]-r[t+1];return[r,i]}function mG(e){return new uG(e)}function ej(e,t){this._context=e,this._t=t}ej.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var a=this._x*(1-this._t)+e*this._t;this._context.lineTo(a,this._y),this._context.lineTo(a,t)}break}}this._x=e,this._y=t}};function fG(e){return new ej(e,.5)}function hG(e){return new ej(e,0)}function gG(e){return new ej(e,1)}function ud(e,t){if((o=e.length)>1)for(var a=1,s,r,i=e[t[0]],o,l=i.length;a<o;++a)for(r=i,i=e[t[a]],s=0;s<l;++s)i[s][1]+=i[s][0]=isNaN(r[s][1])?r[s][0]:r[s][1]}function Ou(e){for(var t=e.length,a=new Array(t);--t>=0;)a[t]=t;return a}function zpe(e,t){return e[t]}function Fpe(e){const t=[];return t.key=e,t}function M4(){var e=Nn([]),t=Ou,a=ud,s=zpe;function r(i){var o=Array.from(e.apply(this,arguments),Fpe),l,c=o.length,u=-1,d;for(const f of i)for(l=0,++u;l<c;++l)(o[l][u]=[0,+s(f,o[l].key,u,i)]).data=f;for(l=0,d=ZN(t(o));l<c;++l)o[d[l]].index=l;return a(o,d),o}return r.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Nn(Array.from(i)),r):e},r.value=function(i){return arguments.length?(s=typeof i=="function"?i:Nn(+i),r):s},r.order=function(i){return arguments.length?(t=i==null?Ou:typeof i=="function"?i:Nn(Array.from(i)),r):t},r.offset=function(i){return arguments.length?(a=i??ud,r):a},r}function pG(e,t){if((s=e.length)>0){for(var a,s,r=0,i=e[0].length,o;r<i;++r){for(o=a=0;a<s;++a)o+=e[a][r][1]||0;if(o)for(a=0;a<s;++a)e[a][r][1]/=o}ud(e,t)}}function Upe(e,t){if((c=e.length)>0)for(var a,s=0,r,i,o,l,c,u=e[t[0]].length;s<u;++s)for(o=l=0,a=0;a<c;++a)(i=(r=e[t[a]][s])[1]-r[0])>0?(r[0]=o,r[1]=o+=i):i<0?(r[1]=l,r[0]=l+=i):(r[0]=0,r[1]=i)}function xG(e,t){if((r=e.length)>0){for(var a=0,s=e[t[0]],r,i=s.length;a<i;++a){for(var o=0,l=0;o<r;++o)l+=e[o][a][1]||0;s[a][1]+=s[a][0]=-l/2}ud(e,t)}}function yG(e,t){if(!(!((o=e.length)>0)||!((i=(r=e[t[0]]).length)>0))){for(var a=0,s=1,r,i,o;s<i;++s){for(var l=0,c=0,u=0;l<o;++l){for(var d=e[t[l]],f=d[s][1]||0,p=d[s-1][1]||0,x=(f-p)/2,y=0;y<l;++y){var N=e[t[y]],v=N[s][1]||0,j=N[s-1][1]||0;x+=v-j}c+=f,u+=x*f}r[s-1][1]+=r[s-1][0]=a,c&&(a-=u/c)}r[s-1][1]+=r[s-1][0]=a,ud(e,t)}}function bG(e){var t=e.map(Bpe);return Ou(e).sort(function(a,s){return t[a]-t[s]})}function Bpe(e){for(var t=-1,a=0,s=e.length,r,i=-1/0;++t<s;)(r=+e[t][1])>i&&(i=r,a=t);return a}function vG(e){var t=e.map(wG);return Ou(e).sort(function(a,s){return t[a]-t[s]})}function wG(e){for(var t=0,a=-1,s=e.length,r;++a<s;)(r=+e[a][1])&&(t+=r);return t}function Hpe(e){return vG(e).reverse()}function qpe(e){var t=e.length,a,s,r=e.map(wG),i=bG(e),o=0,l=0,c=[],u=[];for(a=0;a<t;++a)s=i[a],o<l?(o+=r[s],c.push(s)):(l+=r[s],u.push(s));return u.reverse().concat(c)}function Wpe(e){return Ou(e).reverse()}const g2={appearance:bG,ascending:vG,descending:Hpe,insideOut:qpe,none:Ou,reverse:Wpe},p2={expand:pG,diverging:Upe,none:ud,silhouette:xG,wiggle:yG},NG=e=>{const{series:t,seriesOrder:a,defaultStrategy:s}=e,r=[],i={};return a.forEach(o=>{const{stack:l,stackOrder:c,stackOffset:u}=t[o];l===void 0?r.push({ids:[o],stackingOrder:g2.none,stackingOffset:p2.none}):i[l]===void 0?(i[l]=r.length,r.push({ids:[o],stackingOrder:g2[c??s?.stackOrder??"none"],stackingOffset:p2[u??s?.stackOffset??"diverging"]})):(r[i[l]].ids.push(o),c!==void 0&&(r[i[l]].stackingOrder=g2[c]),u!==void 0&&(r[i[l]].stackingOffset=p2[u]))}),r},Gpe=e=>e==null?"":e.toLocaleString(),Vpe=(e,t)=>{const{seriesOrder:a,series:s}=e,r=NG(e),i=t??[];a.forEach(l=>{const c=s[l].data;if(c!==void 0)c.forEach((u,d)=>{i.length<=d?i.push({[l]:u}):i[d][l]=u});else if(t===void 0)throw new Error([`MUI X Charts: bar series with id='${l}' has no data.`,"Either provide a data property to the series or use the dataset prop."].join(`
`))});const o={};return r.forEach(l=>{const{ids:c,stackingOffset:u,stackingOrder:d}=l,f=M4().keys(c.map(p=>{const x=s[p].dataKey;return s[p].data===void 0&&x!==void 0?x:p})).value((p,x)=>p[x]??0).order(d).offset(u)(i);c.forEach((p,x)=>{const y=s[p].dataKey;o[p]=Ye({layout:"vertical",labelMarkType:"square",minBarSize:0,valueFormatter:s[p].valueFormatter??Gpe},s[p],{data:y?t.map(N=>{const v=N[y];return typeof v=="number"?v:null}):s[p].data,stackedData:f[x].map(([N,v])=>[N,v])})})}),{seriesOrder:a,stackingGroups:r,series:o}};function Vi(e,t){return typeof e=="function"?e(t):e}const Ype=e=>{const{seriesOrder:t,series:a}=e;return t.reduce((s,r)=>{const i=Vi(a[r].label,"legend");return i===void 0||s.push({markType:a[r].labelMarkType,id:r,seriesId:r,color:a[r].color,label:i}),s},[])};function I4(e){return e.colorGetter?e.colorGetter:()=>e.color}const Qpe=(e,t,a)=>{const s=e.layout==="vertical",r=s?t?.colorScale:a?.colorScale,i=s?a?.colorScale:t?.colorScale,o=s?t?.data:a?.data,l=I4(e);return i?c=>{if(c===void 0)return e.color;const u=e.data[c],d=u===null?l({value:u,dataIndex:c}):i(u);return d===null?l({value:u,dataIndex:c}):d}:r&&o?c=>{if(c===void 0)return e.color;const u=o[c],d=u===null?l({value:u,dataIndex:c}):r(u);return d===null?l({value:u,dataIndex:c}):d}:c=>{if(c===void 0)return e.color;const u=e.data[c];return l({value:u,dataIndex:c})}},Kpe=e=>{const{series:t,getColor:a,identifier:s}=e;if(!s||s.dataIndex===void 0)return null;const r=Vi(t.label,"tooltip"),i=t.data[s.dataIndex];if(i==null)return null;const o=t.valueFormatter(i,{dataIndex:s.dataIndex});return{identifier:s,color:a(s.dataIndex),label:r,value:i,formattedValue:o,markType:t.labelMarkType}},Xpe=e=>Object.values(e).map(t=>t.layout==="horizontal"?{direction:"y",axisId:t.yAxisId}:{direction:"x",axisId:t.xAxisId});function Yn(){const e=Gr();if(!e)throw new Error(["MUI X Charts: Could not find the charts context.","It looks like you rendered your component outside of a ChartContainer parent component."].join(`
`));return e.store}function Ti(){const e=Yn();return Ht(e,vr)}function tj(){const e=Yn();return Ht(e,vme)}function $4(e){return tW.getTypes().has(e)}const Zpe=(e,t,a,s,r,i,o)=>{const l=s==="rotation"?r[t].rotationExtremumGetter:r[t].radiusExtremumGetter,c=o[t]?.series??{},[u,d]=l?.({series:c,axis:a,axisIndex:i,isDefaultAxis:i===0})??[1/0,-1/0],[f,p]=e;return[Math.min(u,f),Math.max(d,p)]},Jpe=(e,t,a,s,r)=>{const o=Object.keys(a).filter($4).reduce((l,c)=>Zpe(l,c,e,t,a,s,r),[1/0,-1/0]);return Number.isNaN(o[0])||Number.isNaN(o[1])?[1/0,-1/0]:o},Kc=(e,t)=>e===void 0?t:Math.PI*e/180,exe=(e,t,a,s)=>{const r=new Set;return Object.keys(t).filter($4).forEach(o=>{const l=a[o]?.series??{},c=t[o].axisTooltipGetter?.(l);c!==void 0&&c.forEach(({axisId:u,direction:d})=>{d===e&&r.add(u??s)})}),r};function txe(e,t,a){if(t==="rotation"){if(a.scaleType==="point"){const s=[Kc(a.startAngle,0),Kc(a.endAngle,2*Math.PI)],r=s[1]-s[0];return r>Math.PI*2-.1&&(s[1]-=r/a.data.length),s}return[Kc(a.startAngle,0),Kc(a.endAngle,2*Math.PI)]}return[0,Math.min(e.height,e.width)/2]}const nxe=.2,axe=.1;function jG({drawingArea:e,formattedSeries:t,axis:a,seriesConfig:s,axisDirection:r}){if(a===void 0)return{axis:{},axisIds:[]};const i=exe(r,s,t,a[0].id),o={};return a.forEach((l,c)=>{const u=l,d=txe(e,r,u),[f,p]=Jpe(u,r,s,c,t),x=!u.ignoreTooltip&&i.has(u.id),y=u.data??[];if(Xu(u)){const M=u.categoryGapRatio??nxe,F=u.barGapRatio??axe;if(o[u.id]=Ye({offset:0,categoryGapRatio:M,barGapRatio:F,triggerTooltip:x},u,{data:y,scale:UN(u.data,d).paddingInner(M).paddingOuter(M/2),tickNumber:u.data.length,colorScale:u.colorMap&&(u.colorMap.type==="ordinal"?Pf(Ye({values:u.data},u.colorMap)):bf(u.colorMap))}),Ck(u.data)){const $=Sk(u.data,d,u.tickNumber);o[u.id].valueFormatter=u.valueFormatter??$}}if(Zu(u)&&(o[u.id]=Ye({offset:0,triggerTooltip:x},u,{data:y,scale:Jq(u.data,d),tickNumber:u.data.length,colorScale:u.colorMap&&(u.colorMap.type==="ordinal"?Pf(Ye({values:u.data},u.colorMap)):bf(u.colorMap))}),Ck(u.data))){const M=Sk(u.data,d,u.tickNumber);o[u.id].valueFormatter=u.valueFormatter??M}if(!Gme(u))return;const N=u.scaleType??"linear",v=u.domainLimit??"nice",j=[u.min??f,u.max??p];if(typeof v=="function"){const{min:M,max:F}=v(f,p);j[0]=M,j[1]=F}const w=Xq(u,j,S4(Math.abs(d[1]-d[0]))),S=Zq(w,d),_=BN(N,j,d),E=v==="nice"?_.nice(w):_,[T,A]=E.domain(),L=[u.min??T,u.max??A];o[u.id]=Ye({offset:0,triggerTooltip:x},u,{data:y,scaleType:N,scale:E.domain(L),tickNumber:S,colorScale:u.colorMap&&bf(u.colorMap)})}),{axis:o,axisIds:a.map(({id:l})=>l)}}const CG=e=>e.polarAxis,SG=St(CG,e=>e?.rotation),sxe=St(CG,e=>e?.radius),nm=St(SG,vr,ya,Wr,(e,t,a,s)=>jG({drawingArea:t,formattedSeries:a,axis:e,seriesConfig:s,axisDirection:"rotation"}));St(sxe,vr,ya,Wr,(e,t,a,s)=>jG({drawingArea:t,formattedSeries:a,axis:e,seriesConfig:s,axisDirection:"radius"}));const rxe=St(vr,e=>({cx:e.left+e.width/2,cy:e.top+e.height/2})),ixe=e=>(t,a)=>Math.atan2(t-e.cx,e.cy-a);function nj(e){return(e%360+360)%360}const x2=2*Math.PI;function oxe(e){return(e%x2+x2)%x2}function R6(e,t){const{scale:a,data:s,reverse:r}=e;if(!vs(a))throw new Error("MUI X Charts: getAxisValue is not implemented for polare continuous axes.");if(!s)return-1;const i=oxe(t-Math.min(...a.range())),o=a.bandwidth()===0?Math.floor((i+a.step()/2)/a.step())%s.length:Math.floor(i/a.step());return o<0||o>=s.length?-1:r?s.length-1-o:o}function wr(){const e=Yn(),{axis:t,axisIds:a}=Ht(e,Xs);return{xAxis:t,xAxisIds:a}}function Nr(){const e=Yn(),{axis:t,axisIds:a}=Ht(e,Zs);return{yAxis:t,yAxisIds:a}}function lxe(e){const t=Yn(),{axis:a,axisIds:s}=Ht(t,Xs),r=s[0];return a[r]}function cxe(e){const t=Yn(),{axis:a,axisIds:s}=Ht(t,Zs),r=s[0];return a[r]}function _G(){const e=Yn(),{axis:t,axisIds:a}=Ht(e,nm);return{rotationAxis:t,rotationAxisIds:a}}function dxe(e){const t=Yn(),{axis:a,axisIds:s}=Ht(t,nm),r=s[0];return a[r]}function sh(e){if(vs(e))return a=>(e(a)??0)+e.bandwidth()/2;const t=e.domain();return t[0]===t[1]?a=>a===t[0]?e(a):NaN:a=>e(a)}function R4(){const e=Yn(),{axis:t,axisIds:a}=Ht(e,bpe)??{axis:{},axisIds:[]};return{zAxis:t,zAxisIds:a}}function z4(){const e=Gr();if(!e)throw new Error(["MUI X Charts: Could not find the svg ref context.","It looks like you rendered your component outside of a ChartContainer parent component."].join(`
`));return e.svgRef}function aj(){const e=Yn();return Ht(e,ya)}const uxe=St(ya,(e,t)=>e[t]);$a(ya,(e,t,a)=>{if(!a||Array.isArray(a)&&a.length===0)return e[t]?.seriesOrder?.map(r=>e[t]?.series[r])??[];if(!Array.isArray(a))return e[t]?.series?.[a];const s=[];for(const r of a){const i=e[t]?.series?.[r];i&&s.push(i)}return s});const mxe=e=>{const t=Yn();return Ht(t,uxe,e)};function Px(){return mxe("line")}function fxe(){return!1}function AG(e,t){return!e||!t?fxe:function(s){return s?e.highlight==="series"?s.seriesId===t.seriesId:e.highlight==="item"?s.dataIndex===t.dataIndex&&s.seriesId===t.seriesId:!1:!1}}function hxe(){return!1}function TG(e,t){return!e||!t?hxe:function(s){return s?e.fade==="series"?s.seriesId===t.seriesId&&s.dataIndex!==t.dataIndex:e.fade==="global"?s.seriesId!==t.seriesId||s.dataIndex!==t.dataIndex:!1:!1}}function F4(e,t,a){return e?.highlight==="series"&&t?.seriesId===a}function gxe(e,t,a){return F4(e,t,a)?!1:e?.fade==="global"&&t!=null||e?.fade==="series"&&t?.seriesId===a}function kG(e,t,a){return e?.highlight==="item"&&t?.seriesId===a?t.dataIndex:null}function pxe(e,t,a){return F4(e,t,a)||kG(e,t,a)===t?.dataIndex?null:(e?.fade==="series"||e?.fade==="global")&&t?.seriesId===a?t.dataIndex:null}const xxe=e=>e.highlight,yxe=St(ya,e=>{const t=new Map;return Object.keys(e).forEach(a=>{const s=e[a];s?.seriesOrder?.forEach(r=>{const i=s?.series[r];t.set(r,i?.highlightScope)})}),t}),nc=$a(xxe,CW,function(t,a){return t.isControlled||t.lastUpdate==="pointer"?t.item:a}),_d=St(yxe,nc,function(t,a){if(!a)return null;const s=t.get(a.seriesId);return s===void 0?null:s}),bxe=St(_d,nc,AG),vxe=St(_d,nc,TG),wxe=St(_d,nc,function(t,a,s){return AG(t,a)(s)});St(_d,nc,F4);St(_d,nc,gxe);St(_d,nc,pxe);St(_d,nc,kG);const Nxe=St(_d,nc,function(t,a,s){return TG(t,a)(s)});function EG(e){const t=Yn(),a=Ht(t,wxe,e),s=Ht(t,Nxe,e);return{isHighlighted:a,isFaded:!a&&s}}function jxe(){const e=Yn(),t=Ht(e,bxe),a=Ht(e,vxe);return{isHighlighted:t,isFaded:a}}function Cxe(e,t){return Object.keys(e).flatMap(a=>{const s=t[a].legendGetter;return s===void 0?[]:s(e[a])})}function Sxe(){const e=aj(),t=Yn(),a=Ht(t,Wr);return{items:Cxe(e,a)}}function U4(){const e=tj();return h.useCallback(t=>`${e}-gradient-${t}`,[e])}function _xe(){const e=tj();return h.useCallback(t=>`${e}-gradient-${t}-object-bound`,[e])}var y2,z6;function Axe(){if(z6)return y2;z6=1;var e=4,t=.001,a=1e-7,s=10,r=11,i=1/(r-1),o=typeof Float32Array=="function";function l(N,v){return 1-3*v+3*N}function c(N,v){return 3*v-6*N}function u(N){return 3*N}function d(N,v,j){return((l(v,j)*N+c(v,j))*N+u(v))*N}function f(N,v,j){return 3*l(v,j)*N*N+2*c(v,j)*N+u(v)}function p(N,v,j,w,S){var _,E,T=0;do E=v+(j-v)/2,_=d(E,w,S)-N,_>0?j=E:v=E;while(Math.abs(_)>a&&++T<s);return E}function x(N,v,j,w){for(var S=0;S<e;++S){var _=f(v,j,w);if(_===0)return v;var E=d(v,j,w)-N;v-=E/_}return v}function y(N){return N}return y2=function(v,j,w,S){if(!(0<=v&&v<=1&&0<=w&&w<=1))throw new Error("bezier x values must be in [0, 1] range");if(v===j&&w===S)return y;for(var _=o?new Float32Array(r):new Array(r),E=0;E<r;++E)_[E]=d(E*i,v,w);function T(A){for(var L=0,M=1,F=r-1;M!==F&&_[M]<=A;++M)L+=i;--M;var $=(A-_[M])/(_[M+1]-_[M]),D=L+$*i,q=f(D,v,w);return q>=t?x(A,D,v,w):q===0?D:p(A,L,L+i,v,w)}return function(L){return L===0?0:L===1?1:d(T(L),j,S)}},y2}var Txe=Axe();const kxe=Zi(Txe),sj=300,B4="cubic-bezier(0.66, 0, 0.34, 1)",Exe=kxe(.66,0,.34,1);var Of=0,Bg=0,xg=0,LG=1e3,Rv,Hg,zv=0,Mu=0,rj=0,Ap=typeof performance=="object"&&performance.now?performance:Date,PG=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function H4(){return Mu||(PG(Lxe),Mu=Ap.now()+rj)}function Lxe(){Mu=0}function Fv(){this._call=this._time=this._next=null}Fv.prototype=DG.prototype={constructor:Fv,restart:function(e,t,a){if(typeof e!="function")throw new TypeError("callback is not a function");a=(a==null?H4():+a)+(t==null?0:+t),!this._next&&Hg!==this&&(Hg?Hg._next=this:Rv=this,Hg=this),this._call=e,this._time=a,Pk()},stop:function(){this._call&&(this._call=null,this._time=1/0,Pk())}};function DG(e,t,a){var s=new Fv;return s.restart(e,t,a),s}function Pxe(){H4(),++Of;for(var e=Rv,t;e;)(t=Mu-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Of}function F6(){Mu=(zv=Ap.now())+rj,Of=Bg=0;try{Pxe()}finally{Of=0,Oxe(),Mu=0}}function Dxe(){var e=Ap.now(),t=e-zv;t>LG&&(rj-=t,zv=e)}function Oxe(){for(var e,t=Rv,a,s=1/0;t;)t._call?(s>t._time&&(s=t._time),e=t,t=t._next):(a=t._next,t._next=null,t=e?e._next=a:Rv=a);Hg=e,Pk(s)}function Pk(e){if(!Of){Bg&&(Bg=clearTimeout(Bg));var t=e-Mu;t>24?(e<1/0&&(Bg=setTimeout(F6,e-Ap.now()-rj)),xg&&(xg=clearInterval(xg))):(xg||(zv=Ap.now(),xg=setInterval(Dxe,LG)),Of=1,PG(F6))}}function Mxe(e,t,a){var s=new Fv;return t=t==null?0:+t,s.restart(r=>{s.stop(),e(r+t)},t,a),s}class Ixe{elapsed=0;timer=null;constructor(t,a,s){this.duration=t,this.easingFn=a,this.onTickCallback=s,this.resume()}get running(){return this.timer!==null}timerCallback(t){this.elapsed=Math.min(t,this.duration);const a=this.duration===0?1:this.elapsed/this.duration,s=this.easingFn(a);this.onTickCallback(s),this.elapsed>=this.duration&&this.stop()}resume(){if(this.running||this.elapsed>=this.duration)return this;const t=H4()-this.elapsed;return this.timer=DG(a=>this.timerCallback(a),0,t),this}stop(){return this.running?(this.timer&&(this.timer.stop(),this.timer=null),this):this}finish(){return this.stop(),Mxe(()=>this.timerCallback(this.duration)),this}}function $xe(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;for(let r=0;r<a.length;r+=1){const i=a[r];if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(e[i],t[i]))return!1}return!0}function Rxe(e,{createInterpolator:t,applyProps:a,skip:s,initialProps:r=e}){const i=h.useRef(r),o=h.useRef(null),l=h.useRef(null),c=h.useRef(e);is(()=>{c.current=e},[e]),is(()=>{s&&(o.current?.finish(),o.current=null,l.current=null,i.current=e)},[e,s]);const u=h.useCallback(f=>{const p=i.current,x=t(p,e);o.current=new Ixe(sj,Exe,y=>{const N=x(y);i.current=N,a(f,N)})},[a,t,e]);return[h.useCallback(f=>{if(f===null){o.current?.stop();return}const p=l.current;if(p===f){if($xe(c.current,e)){o.current?.resume();return}o.current?.stop()}p&&o.current?.stop(),l.current=f,(o.current||!s)&&u(f)},[u,e,s]),i.current]}function OG(e,{createInterpolator:t,transformProps:a,applyProps:s,skip:r,initialProps:i=e,ref:o}){const l=a??(f=>f),[c,u]=Rxe(e,{initialProps:i,createInterpolator:t,applyProps:(f,p)=>s(f,l(p)),skip:r}),d=a(r?e:u);return Ye({},d,{ref:Ro(c,o)})}function zxe(e){return OG({d:e.d},{createInterpolator:(t,a)=>{const s=a4(t.d,a.d);return r=>({d:s(r)})},applyProps:(t,{d:a})=>t.setAttribute("d",a),transformProps:t=>t,skip:e.skipAnimation,ref:e.ref})}function Fxe(e){return OG({d:e.d},{createInterpolator:(t,a)=>{const s=a4(t.d,a.d);return r=>({d:s(r)})},applyProps:(t,{d:a})=>t.setAttribute("d",a),skip:e.skipAnimation,transformProps:t=>t,ref:e.ref})}function Uxe(){return Gr().chartRootRef}const Bxe={"image/png":"PNG","image/jpeg":"JPEG","image/webp":"WebP"},Hxe=e=>({components:{MuiChartsLocalizationProvider:{defaultProps:{localeText:Ye({},e)}}}}),MG={loading:"Loading data",noData:"No data to display",zoomIn:"Zoom in",zoomOut:"Zoom out",toolbarExport:"Export",toolbarExportPrint:"Print",toolbarExportImage:e=>`Export as ${Bxe[e]??e}`,chartTypeBar:"Bar",chartTypeColumn:"Column",chartTypeLine:"Line",chartTypeArea:"Area",chartTypePie:"Pie",chartPaletteLabel:"Color palette",chartPaletteNameRainbowSurge:"Rainbow Surge",chartPaletteNameBlueberryTwilight:"Blueberry Twilight",chartPaletteNameMangoFusion:"Mango Fusion",chartPaletteNameCheerfulFiesta:"Cheerful Fiesta",chartPaletteNameStrawberrySky:"Strawberry Sky",chartPaletteNameBlue:"Blue",chartPaletteNameGreen:"Green",chartPaletteNamePurple:"Purple",chartPaletteNameRed:"Red",chartPaletteNameOrange:"Orange",chartPaletteNameYellow:"Yellow",chartPaletteNameCyan:"Cyan",chartPaletteNamePink:"Pink",chartConfigurationSectionChart:"Chart",chartConfigurationSectionColumns:"Columns",chartConfigurationSectionBars:"Bars",chartConfigurationSectionAxes:"Axes",chartConfigurationGrid:"Grid",chartConfigurationBorderRadius:"Border radius",chartConfigurationCategoryGapRatio:"Category gap ratio",chartConfigurationBarGapRatio:"Series gap ratio",chartConfigurationStacked:"Stacked",chartConfigurationShowToolbar:"Show toolbar",chartConfigurationSkipAnimation:"Skip animation",chartConfigurationInnerRadius:"Inner radius",chartConfigurationOuterRadius:"Outer radius",chartConfigurationColors:"Colors",chartConfigurationHideLegend:"Hide legend",chartConfigurationShowMark:"Show mark",chartConfigurationHeight:"Height",chartConfigurationWidth:"Width",chartConfigurationSeriesGap:"Series gap",chartConfigurationTickPlacement:"Tick placement",chartConfigurationTickLabelPlacement:"Tick label placement",chartConfigurationCategoriesAxisLabel:"Categories axis label",chartConfigurationSeriesAxisLabel:"Series axis label",chartConfigurationXAxisPosition:"X-axis position",chartConfigurationYAxisPosition:"Y-axis position",chartConfigurationSeriesAxisReverse:"Reverse series axis",chartConfigurationTooltipPlacement:"Placement",chartConfigurationTooltipTrigger:"Trigger",chartConfigurationLegendPosition:"Position",chartConfigurationLegendDirection:"Direction",chartConfigurationBarLabels:"Bar labels",chartConfigurationColumnLabels:"Column labels",chartConfigurationInterpolation:"Interpolation",chartConfigurationSectionTooltip:"Tooltip",chartConfigurationSectionLegend:"Legend",chartConfigurationSectionLines:"Lines",chartConfigurationSectionAreas:"Areas",chartConfigurationSectionArcs:"Arcs",chartConfigurationPaddingAngle:"Padding angle",chartConfigurationCornerRadius:"Corner radius",chartConfigurationArcLabels:"Arc labels",chartConfigurationStartAngle:"Start angle",chartConfigurationEndAngle:"End angle",chartConfigurationPieTooltipTrigger:"Trigger",chartConfigurationPieLegendPosition:"Position",chartConfigurationPieLegendDirection:"Direction",chartConfigurationOptionNone:"None",chartConfigurationOptionValue:"Value",chartConfigurationOptionAuto:"Auto",chartConfigurationOptionTop:"Top",chartConfigurationOptionTopLeft:"Top Left",chartConfigurationOptionTopRight:"Top Right",chartConfigurationOptionBottom:"Bottom",chartConfigurationOptionBottomLeft:"Bottom Left",chartConfigurationOptionBottomRight:"Bottom Right",chartConfigurationOptionLeft:"Left",chartConfigurationOptionRight:"Right",chartConfigurationOptionAxis:"Axis",chartConfigurationOptionItem:"Item",chartConfigurationOptionHorizontal:"Horizontal",chartConfigurationOptionVertical:"Vertical",chartConfigurationOptionBoth:"Both",chartConfigurationOptionStart:"Start",chartConfigurationOptionMiddle:"Middle",chartConfigurationOptionEnd:"End",chartConfigurationOptionExtremities:"Extremities",chartConfigurationOptionTick:"Tick",chartConfigurationOptionMonotoneX:"Monotone X",chartConfigurationOptionMonotoneY:"Monotone Y",chartConfigurationOptionCatmullRom:"Catmull-Rom",chartConfigurationOptionLinear:"Linear",chartConfigurationOptionNatural:"Natural",chartConfigurationOptionStep:"Step",chartConfigurationOptionStepBefore:"Step Before",chartConfigurationOptionStepAfter:"Step After",chartConfigurationOptionBumpX:"Bump X",chartConfigurationOptionBumpY:"Bump Y"},qxe=MG;Hxe(MG);const Wxe=["localeText"],Dk=h.createContext(null);function Gxe(e){const{localeText:t}=e,a=pn(e,Wxe),{localeText:s}=h.useContext(Dk)??{localeText:void 0},r=_i({props:a,name:"MuiChartsLocalizationProvider"}),{children:i,localeText:o}=r,l=h.useMemo(()=>Ye({},qxe,o,s,t),[o,s,t]),c=h.useMemo(()=>({localeText:l}),[l]);return n.jsx(Dk.Provider,{value:c,children:i})}const IG=()=>{const e=h.useContext(Dk);if(e===null)throw new Error(["MUI X Charts: Can not find the charts localization context.","It looks like you forgot to wrap your component in ChartsLocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-charts` package"].join(`
`));return e};function Vxe({bandWidth:e,numberOfGroups:t,gapRatio:a}){if(a===0)return{barWidth:e/t,offset:0};const s=e/(t+(t-1)*a),r=a*s;return{barWidth:s,offset:r}}function Yxe(e,t,a){const s=e&&t>0,r=!e&&t<0,i=s||r;return a?!i:i}function Qxe(e){const{verticalLayout:t,xAxisConfig:a,yAxisConfig:s,series:r,dataIndex:i,numberOfGroups:o,groupIndex:l}=e,c=t?a:s,u=(t?s.reverse:a.reverse)??!1,{barWidth:d,offset:f}=Vxe({bandWidth:c.scale.bandwidth(),numberOfGroups:o,gapRatio:c.barGapRatio}),p=l*(d+f),x=a.scale,y=s.scale,N=c.data[i],v=r.data[i];if(v==null)return null;const w=r.stackedData[i].map(A=>t?y(A):x(A)),S=Math.round(Math.min(...w)),_=Math.round(Math.max(...w)),E=v===0?0:Math.max(r.minBarSize,_-S),T=Yxe(t,v,u)?_-E:S;return{x:t?x(N)+p:T,y:t?T:y(N)+p,height:t?E:d,width:t?d:E}}const Kxe=e=>{const{series:t,identifier:a,axesConfig:s,placement:r}=e;if(!a||a.dataIndex===void 0)return null;const i=t.bar?.series[a.seriesId];if(t.bar==null||i==null||s.x===void 0||s.y===void 0)return null;const o=Qxe({verticalLayout:i.layout==="vertical",xAxisConfig:s.x,yAxisConfig:s.y,series:i,dataIndex:a.dataIndex,numberOfGroups:t.bar.stackingGroups.length,groupIndex:t.bar.stackingGroups.findIndex(f=>f.ids.includes(i.id))});if(o==null)return null;const{x:l,y:c,width:u,height:d}=o;switch(r){case"right":return{x:l+u,y:c+d/2};case"bottom":return{x:l+u/2,y:c+d};case"left":return{x:l,y:c+d/2};default:return{x:l+u/2,y:c}}},Xxe=(e,t,a)=>Ye({},e,{id:e.id??`auto-generated-id-${t}`,color:e.color??a[t%a.length]}),Zxe={seriesProcessor:Vpe,colorProcessor:Qpe,legendGetter:Ype,tooltipGetter:Kpe,tooltipItemPositionGetter:Kxe,axisTooltipGetter:Xpe,xExtremumGetter:vpe,yExtremumGetter:wpe,getSeriesWithDefaultValues:Xxe},Jxe=e=>{const{series:t,axis:a,isDefaultAxis:s,getFilters:r}=e;let i=1/0,o=-1/0;for(const l in t){if(!Object.hasOwn(t,l))continue;const c=t[l].xAxisId;if(!(c===a.id||c===void 0&&s))continue;const u=r?.({currentAxisId:a.id,isDefaultAxis:s,seriesXAxisId:t[l].xAxisId,seriesYAxisId:t[l].yAxisId}),d=t[l].data??[];for(let f=0;f<d.length;f+=1){const p=d[f];u&&!u(p,f)||p.x!==null&&(p.x<i&&(i=p.x),p.x>o&&(o=p.x))}}return[i,o]},e0e=e=>{const{series:t,axis:a,isDefaultAxis:s,getFilters:r}=e;let i=1/0,o=-1/0;for(const l in t){if(!Object.hasOwn(t,l))continue;const c=t[l].yAxisId;if(!(c===a.id||c===void 0&&s))continue;const u=r?.({currentAxisId:a.id,isDefaultAxis:s,seriesXAxisId:t[l].xAxisId,seriesYAxisId:t[l].yAxisId}),d=t[l].data??[];for(let f=0;f<d.length;f+=1){const p=d[f];u&&!u(p,f)||p.y!==null&&(p.y<i&&(i=p.y),p.y>o&&(o=p.y))}}return[i,o]},t0e=({series:e,seriesOrder:t},a)=>({series:Object.fromEntries(Object.entries(e).map(([r,i])=>{const o=i?.datasetKeys,l=["x","y"].filter(u=>typeof o?.[u]!="string");if(i?.datasetKeys&&l.length>0)throw new Error([`MUI X Charts: scatter series with id='${r}' has incomplete datasetKeys.`,`Properties ${l.map(u=>`"${u}"`).join(", ")} are missing.`].join(`
`));const c=o?a?.map(u=>({x:u[o.x]??null,y:u[o.y]??null,z:o.z&&u[o.z],id:o.id&&u[o.id]}))??[]:i.data??[];return[r,Ye({labelMarkType:"circle",markerSize:4},i,{preview:Ye({markerSize:1},i?.preview),data:c,valueFormatter:i.valueFormatter??(u=>u&&`(${u.x}, ${u.y})`)})]})),seriesOrder:t}),n0e=(e,t,a,s)=>{const r=s?.colorScale,i=a?.colorScale,o=t?.colorScale,l=I4(e);return r?c=>{if(c===void 0)return e.color;if(s?.data?.[c]!==void 0){const f=r(s?.data?.[c]);if(f!==null)return f}const u=e.data[c],d=u===null?l({value:u,dataIndex:c}):r(u.z);return d===null?l({value:u,dataIndex:c}):d}:i?c=>{if(c===void 0)return e.color;const u=e.data[c],d=u===null?l({value:u,dataIndex:c}):i(u.y);return d===null?l({value:u,dataIndex:c}):d}:o?c=>{if(c===void 0)return e.color;const u=e.data[c],d=u===null?l({value:u,dataIndex:c}):o(u.x);return d===null?l({value:u,dataIndex:c}):d}:c=>{if(c===void 0)return e.color;const u=e.data[c];return l({value:u,dataIndex:c})}},a0e=e=>{const{seriesOrder:t,series:a}=e;return t.reduce((s,r)=>{const i=Vi(a[r].label,"legend");return i===void 0||s.push({markType:a[r].labelMarkType,id:r,seriesId:r,color:a[r].color,label:i}),s},[])},s0e=e=>{const{series:t,getColor:a,identifier:s}=e;if(!s||s.dataIndex===void 0)return null;const r=Vi(t.label,"tooltip"),i=t.data[s.dataIndex],o=t.valueFormatter(i,{dataIndex:s.dataIndex});return{identifier:s,color:a(s.dataIndex),label:r,value:i,formattedValue:o,markType:t.labelMarkType}},r0e=(e,t,a)=>Ye({},e,{id:e.id??`auto-generated-id-${t}`,color:e.color??a[t%a.length]}),i0e=e=>{const{series:t,identifier:a,axesConfig:s}=e;if(!a||a.dataIndex===void 0)return null;const r=t.scatter?.series[a.seriesId];if(r==null||s.x===void 0||s.y===void 0)return null;const i=r.data?.[a.dataIndex].x,o=r.data?.[a.dataIndex].y;return i==null||o==null?null:{x:s.x.scale(i),y:s.y.scale(o)}},o0e={seriesProcessor:t0e,colorProcessor:n0e,legendGetter:a0e,tooltipGetter:s0e,tooltipItemPositionGetter:i0e,xExtremumGetter:Jxe,yExtremumGetter:e0e,getSeriesWithDefaultValues:r0e},l0e=e=>{const{axis:t}=e;return Pv(t.data??[])};function c0e(e,t,a,s){return a.reduce((r,i,o)=>{if(t[o]===null)return r;const[l,c]=e(i);return s&&(!s({y:l,x:null},o)||!s({y:c,x:null},o))?r:[Math.min(l,c,r[0]),Math.max(l,c,r[1])]},[1/0,-1/0])}const d0e=e=>{const{series:t,axis:a,isDefaultAxis:s,getFilters:r}=e;return Object.keys(t).filter(i=>{const o=t[i].yAxisId;return o===a.id||s&&o===void 0}).reduce((i,o)=>{const{area:l,stackedData:c,data:u}=t[o],d=l!==void 0,f=r?.({currentAxisId:a.id,isDefaultAxis:s,seriesXAxisId:t[o].xAxisId,seriesYAxisId:t[o].yAxisId}),p=d&&a.scaleType!=="log"&&typeof t[o].baseline!="string"?v=>v:v=>[v[1],v[1]],x=c0e(p,u,c,f),[y,N]=x;return[Math.min(y,i[0]),Math.max(N,i[1])]},[1/0,-1/0])};function u0e(e,t){const a={};return Object.keys(e).forEach(s=>{a[s]=Ye({},e[s],{valueFormatter:e[s].valueFormatter??t})}),a}const m0e=(e,t)=>{const{seriesOrder:a,series:s}=e,r=NG(Ye({},e,{defaultStrategy:{stackOffset:"none"}})),i=t??[];a.forEach(l=>{const c=s[l].data;c!==void 0&&c.forEach((u,d)=>{i.length<=d?i.push({[l]:u}):i[d][l]=u})});const o={};return r.forEach(l=>{const{ids:c,stackingOrder:u,stackingOffset:d}=l,f=M4().keys(c.map(p=>{const x=s[p].dataKey;return s[p].data===void 0&&x!==void 0?x:p})).value((p,x)=>p[x]??0).order(u).offset(d)(i);c.forEach((p,x)=>{const y=s[p].dataKey;o[p]=Ye({labelMarkType:"line"},s[p],{data:y?t.map(N=>{const v=N[y];return typeof v=="number"?v:null}):s[p].data,stackedData:f[x].map(([N,v])=>[N,v])})})}),{seriesOrder:a,stackingGroups:r,series:u0e(o,l=>l==null?"":l.toLocaleString())}},q4=(e,t,a)=>{const s=a?.colorScale,r=t?.colorScale,i=I4(e);return s?o=>{if(o===void 0)return e.color;const l=e.data[o],c=l===null?i({value:l,dataIndex:o}):s(l);return c===null?i({value:l,dataIndex:o}):c}:r?o=>{if(o===void 0)return e.color;const l=t.data?.[o],c=l===null?i({value:l,dataIndex:o}):r(l);return c===null?i({value:l,dataIndex:o}):c}:o=>{if(o===void 0)return e.color;const l=e.data[o];return i({value:l,dataIndex:o})}},f0e=e=>{const{seriesOrder:t,series:a}=e;return t.reduce((s,r)=>{const i=Vi(a[r].label,"legend");return i===void 0||s.push({markType:a[r].labelMarkType,id:r,seriesId:r,color:a[r].color,label:i}),s},[])},h0e=e=>{const{series:t,getColor:a,identifier:s}=e;if(!s||s.dataIndex===void 0)return null;const r=Vi(t.label,"tooltip"),i=t.data[s.dataIndex],o=t.valueFormatter(i,{dataIndex:s.dataIndex});return{identifier:s,color:a(s.dataIndex),label:r,value:i,formattedValue:o,markType:t.labelMarkType}},g0e=e=>Object.values(e).map(t=>({direction:"x",axisId:t.xAxisId})),p0e=(e,t,a)=>Ye({},e,{id:e.id??`auto-generated-id-${t}`,color:e.color??a[t%a.length]}),x0e=e=>{const{series:t,identifier:a,axesConfig:s}=e;if(!a||a.dataIndex===void 0)return null;const r=t.line?.series[a.seriesId];if(r==null||s.x===void 0||s.y===void 0)return null;const i=s.x.data?.[a.dataIndex],o=r.data[a.dataIndex];return i==null||o==null?null:{x:s.x.scale(i),y:s.y.scale(o)}},y0e={colorProcessor:q4,seriesProcessor:m0e,legendGetter:f0e,tooltipGetter:h0e,tooltipItemPositionGetter:x0e,axisTooltipGetter:g0e,xExtremumGetter:l0e,yExtremumGetter:d0e,getSeriesWithDefaultValues:p0e},b0e=(e="none")=>{if(typeof e=="function")return e;switch(e){case"none":return null;case"desc":return(t,a)=>a-t;case"asc":return(t,a)=>t-a;default:return null}},v0e=e=>{const{seriesOrder:t,series:a}=e,s={};return t.forEach(r=>{const i=Ape().startAngle(Kc(a[r].startAngle??0)).endAngle(Kc(a[r].endAngle??360)).padAngle(Kc(a[r].paddingAngle??0)).sortValues(b0e(a[r].sortingValues??"none"))(a[r].data.map(o=>o.value));s[r]=Ye({labelMarkType:"circle",valueFormatter:o=>o.value.toLocaleString()},a[r],{data:a[r].data.map((o,l)=>Ye({},o,{id:o.id??`auto-generated-pie-id-${r}-${l}`},i[l])).map((o,l)=>Ye({labelMarkType:"circle"},o,{formattedValue:a[r].valueFormatter?.(Ye({},o,{label:Vi(o.label,"arc")}),{dataIndex:l})??o.value.toLocaleString()}))})}),{seriesOrder:t,series:s}},w0e=e=>t=>e.data[t].color,N0e=e=>{const{seriesOrder:t,series:a}=e;return t.reduce((s,r)=>(a[r].data.forEach((i,o)=>{const l=Vi(i.label,"legend");l!==void 0&&s.push({markType:i.labelMarkType??a[r].labelMarkType,id:i.id??o,seriesId:r,color:i.color,label:l,itemId:i.id??o})}),s),[])},j0e=e=>{const{series:t,getColor:a,identifier:s}=e;if(!s||s.dataIndex===void 0)return null;const r=t.data[s.dataIndex];if(r==null)return null;const i=Vi(r.label,"tooltip"),o=Ye({},r,{label:i}),l=t.valueFormatter(o,{dataIndex:s.dataIndex});return{identifier:s,color:a(s.dataIndex),label:i,value:o,formattedValue:l,markType:r.labelMarkType??t.labelMarkType}},C0e=(e,t,a)=>Ye({},e,{id:e.id??`auto-generated-id-${t}`,data:e.data.map((s,r)=>Ye({},s,{color:s.color??a[r%a.length]}))});function Uv(e,t){if(typeof e=="number")return e;if(e==="100%")return t;if(e.endsWith("%")){const a=Number.parseFloat(e.slice(0,e.length-1));if(!Number.isNaN(a))return a*t/100}if(e.endsWith("px")){const a=Number.parseFloat(e.slice(0,e.length-2));if(!Number.isNaN(a))return a}throw new Error(`MUI X Charts: Received an unknown value "${e}". It should be a number, or a string with a percentage value.`)}function S0e(e,t){const{height:a,width:s}=t,{cx:r,cy:i}=e,o=Math.min(s,a)/2,l=Uv(r??"50%",s),c=Uv(i??"50%",a);return{cx:l,cy:c,availableRadius:o}}const _0e=e=>{const{series:t,drawingArea:a,identifier:s,placement:r}=e;if(!s||s.dataIndex===void 0)return null;const i=t.pie?.series[s.seriesId];if(i==null)return null;const{cx:o,cy:l,availableRadius:c}=S0e({cx:i.cx,cy:i.cy},a),{data:u,innerRadius:d=0,outerRadius:f}=i,p=Math.max(0,Uv(d??0,c)),x=Math.max(0,Uv(f??c,c)),y=u[s.dataIndex];if(!y)return null;const N=[[p,y.startAngle],[p,y.endAngle],[x,y.startAngle],[x,y.endAngle]].map(([_,E])=>({x:o+_*Math.sin(E),y:l-_*Math.cos(E)})),[v,j]=Pv(N.map(_=>_.x)),[w,S]=Pv(N.map(_=>_.y));switch(r){case"bottom":return{x:(j+v)/2,y:S};case"left":return{x:v,y:(S+w)/2};case"right":return{x:j,y:(S+w)/2};default:return{x:(j+v)/2,y:w}}},A0e={colorProcessor:w0e,seriesProcessor:v0e,legendGetter:N0e,tooltipGetter:j0e,tooltipItemPositionGetter:_0e,getSeriesWithDefaultValues:C0e},T0e={bar:Zxe,scatter:o0e,line:y0e,pie:A0e},k0e=[kx,Cx,nh,Ex];function E0e(e){const{children:t,plugins:a=k0e,pluginParams:s={},seriesConfig:r=T0e}=e,{contextValue:i}=Fme(a,s,r);return n.jsx(mq.Provider,{value:i,children:t})}const Gr=()=>{const e=h.useContext(mq);if(e==null)throw new Error(["MUI X Charts: Could not find the Chart context.","It looks like you rendered your component outside of a ChartDataProvider.","This can also happen if you are bundling multiple versions of the library."].join(`
`));return e};function L0e(e){"hasPointerCapture"in e.currentTarget&&e.currentTarget.hasPointerCapture(e.pointerId)&&e.currentTarget.releasePointerCapture(e.pointerId)}const ij=(e,t)=>{const{instance:a}=Gr(),s=h.useRef(!1),r=ps(()=>{s.current=!0,a.setItemInteraction(e,{interaction:"pointer"}),a.setHighlight(e)}),i=ps(()=>{s.current=!1,a.removeItemInteraction(e),a.clearHighlight()});return h.useEffect(()=>()=>{s.current&&i()},[i]),h.useMemo(()=>({onPointerEnter:r,onPointerLeave:i,onPointerDown:L0e}),[t,r,i])};function $G(e){return e.replace(" ","_")}const RG=Aa("MuiAppearingMask",["animate"]),P0e=dn("rect")({animationName:"animate-width",animationTimingFunction:B4,animationDuration:"0s",[`&.${RG.animate}`]:{animationDuration:`${sj}ms`},"@keyframes animate-width":{from:{width:0}}});function zG(e){const t=Ti(),a=tj(),s=$G(`${a}-${e.id}`);return n.jsxs(h.Fragment,{children:[n.jsx("clipPath",{id:s,children:n.jsx(P0e,{className:e.skipAnimation?"":RG.animate,x:0,y:0,width:t.left+t.width+t.right,height:t.top+t.height+t.bottom})}),n.jsx("g",{clipPath:`url(#${s})`,children:e.children})]})}const D0e=["skipAnimation","ownerState"];function O0e(e){const{skipAnimation:t,ownerState:a}=e,s=pn(e,D0e),r=zxe(e);return n.jsx(zG,{skipAnimation:t,id:`${a.id}-area-clip`,children:n.jsx("path",Ye({fill:a.gradientId?`url(#${a.gradientId})`:a.color,filter:a.isHighlighted?"brightness(140%)":a.gradientId?void 0:"brightness(120%)",opacity:a.isFaded?.3:1,stroke:"none","data-series":a.id,"data-highlighted":a.isHighlighted||void 0,"data-faded":a.isFaded||void 0},s,r))})}const M0e=["id","classes","color","gradientId","slots","slotProps","onClick"];function I0e(e){return Ya("MuiAreaElement",e)}const $0e=Aa("MuiAreaElement",["root","highlighted","faded","series"]),R0e=e=>{const{classes:t,id:a,isFaded:s,isHighlighted:r}=e,i={root:["root",`series-${a}`,r&&"highlighted",s&&"faded"]};return Va(i,I0e,t)};function z0e(e){const{id:t,classes:a,color:s,gradientId:r,slots:i,slotProps:o,onClick:l}=e,c=pn(e,M0e),u=ij({type:"line",seriesId:t}),{isFaded:d,isHighlighted:f}=EG({seriesId:t}),p={id:t,classes:a,color:s,gradientId:r,isFaded:d,isHighlighted:f},x=R0e(p),y=i?.area??O0e,N=zl({elementType:y,externalSlotProps:o?.area,additionalProps:Ye({},u,{onClick:l,cursor:l?"pointer":"unset"}),className:x.root,ownerState:p});return n.jsx(y,Ye({},c,N))}function W4(e){const t=Yn(),a=Ht(t,eme);return e||a}function G4(){const e=Yn();return Ht(e,mW)}function FG(e){switch(e){case"catmullRom":return $pe.alpha(.5);case"linear":return Lx;case"monotoneX":return Lk;case"monotoneY":return dG;case"natural":return mG;case"step":return fG;case"stepBefore":return hG;case"stepAfter":return gG;case"bumpY":return VW;case"bumpX":return GW;default:return Lk}}function F0e(e,t){const a=Px(),s=wr().xAxisIds[0],r=Nr().yAxisIds[0],i=U4();return h.useMemo(()=>{if(a===void 0)return[];const{series:l,stackingGroups:c}=a,u=[];for(const d of c){const f=d.ids;for(let p=f.length-1;p>=0;p-=1){const x=f[p],{xAxisId:y=s,yAxisId:N=r,stackedData:v,data:j,connectNulls:w,baseline:S,curve:_,strictStepCurve:E,area:T}=l[x];if(!T||!(y in e)||!(N in t))continue;const A=e[y].scale,L=sh(A),M=t[N].scale,F=e[y].data,$=t[N].colorScale&&i(N)||e[y].colorScale&&i(y)||void 0,D=_?.includes("step")&&!E&&vs(A),q=F?.flatMap((Z,Y)=>{const le=j[Y]==null;if(D){const _e=[{x:Z,y:v[Y],nullData:le,isExtension:!1}];return!le&&(Y===0||j[Y-1]==null)&&_e.unshift({x:(A(Z)??0)-(A.step()-A.bandwidth())/2,y:v[Y],nullData:le,isExtension:!0}),!le&&(Y===j.length-1||j[Y+1]==null)&&_e.push({x:(A(Z)??0)+(A.step()+A.bandwidth())/2,y:v[Y],nullData:le,isExtension:!0}),_e}return{x:Z,y:v[Y],nullData:le}})??[],G=w?q.filter(Z=>!Z.nullData):q,V=Ug().x(Z=>Z.isExtension?Z.x:L(Z.x)).defined(Z=>w||!Z.nullData||!!Z.isExtension).y0(Z=>{if(typeof S=="number")return M(S);if(S==="max")return M.range()[1];if(S==="min")return M.range()[0];const Y=Z.y&&M(Z.y[0]);return Number.isNaN(Y)?M.range()[0]:Y}).y1(Z=>Z.y&&M(Z.y[1])).curve(FG(_))(G)||"";u.push({area:l[x].area,color:l[x].color,gradientId:$,d:V,seriesId:x})}}return u},[a,s,r,e,t,i])}const U0e=["slots","slotProps","onItemClick","skipAnimation"],B0e=dn("g",{name:"MuiAreaPlot",slot:"Root"})({[`& .${$0e.root}`]:{transition:"opacity 0.2s ease-in, fill 0.2s ease-in"}}),H0e=()=>{const{xAxis:e}=wr(),{yAxis:t}=Nr();return F0e(e,t)};function q0e(e){const{slots:t,slotProps:a,onItemClick:s,skipAnimation:r}=e,i=pn(e,U0e),o=G4(),l=W4(o||r),c=H0e();return n.jsx(B0e,Ye({},i,{children:c.map(({d:u,seriesId:d,color:f,area:p,gradientId:x})=>!!p&&n.jsx(z0e,{id:d,d:u,color:f,gradientId:x,slots:t,slotProps:a,onClick:s&&(y=>s(y,{type:"line",seriesId:d})),skipAnimation:l},d))}))}const W0e=["skipAnimation","ownerState"],G0e=h.forwardRef(function(t,a){const{skipAnimation:s,ownerState:r}=t,i=pn(t,W0e),o=Fxe(Ye({},t,{ref:a}));return n.jsx(zG,{skipAnimation:s,id:`${r.id}-line-clip`,children:n.jsx("path",Ye({stroke:r.gradientId?`url(#${r.gradientId})`:r.color,strokeWidth:2,strokeLinejoin:"round",fill:"none",filter:r.isHighlighted?"brightness(120%)":void 0,opacity:r.isFaded?.3:1,"data-series":r.id,"data-highlighted":r.isHighlighted||void 0,"data-faded":r.isFaded||void 0},i,o))})}),V0e=["id","classes","color","gradientId","slots","slotProps","onClick"];function Y0e(e){return Ya("MuiLineElement",e)}const Q0e=Aa("MuiLineElement",["root","highlighted","faded","series"]),K0e=e=>{const{classes:t,id:a,isFaded:s,isHighlighted:r}=e,i={root:["root",`series-${a}`,r&&"highlighted",s&&"faded"]};return Va(i,Y0e,t)};function X0e(e){const{id:t,classes:a,color:s,gradientId:r,slots:i,slotProps:o,onClick:l}=e,c=pn(e,V0e),u=ij({type:"line",seriesId:t}),{isFaded:d,isHighlighted:f}=EG({seriesId:t}),p={id:t,classes:a,color:s,gradientId:r,isFaded:d,isHighlighted:f},x=K0e(p),y=i?.line??G0e,N=zl({elementType:y,externalSlotProps:o?.line,additionalProps:Ye({},u,{onClick:l,cursor:l?"pointer":"unset"}),className:x.root,ownerState:p});return n.jsx(y,Ye({},c,N))}function Z0e(e,t){const a=Px(),s=wr().xAxisIds[0],r=Nr().yAxisIds[0],i=U4();return h.useMemo(()=>{if(a===void 0)return[];const{series:l,stackingGroups:c}=a,u=[];for(const d of c){const f=d.ids;for(const p of f){const{xAxisId:x=s,yAxisId:y=r,stackedData:N,data:v,connectNulls:j,curve:w,strictStepCurve:S}=l[p];if(!(x in e)||!(y in t))continue;const _=e[x].scale,E=sh(_),T=t[y].scale,A=e[x].data,L=t[y].colorScale&&i(y)||e[x].colorScale&&i(x)||void 0,M=w?.includes("step")&&!S&&vs(_),F=A?.flatMap((G,U)=>{const V=v[U]==null;if(M){const Z=[{x:G,y:N[U],nullData:V,isExtension:!1}];return!V&&(U===0||v[U-1]==null)&&Z.unshift({x:(_(G)??0)-(_.step()-_.bandwidth())/2,y:N[U],nullData:V,isExtension:!0}),!V&&(U===v.length-1||v[U+1]==null)&&Z.push({x:(_(G)??0)+(_.step()+_.bandwidth())/2,y:N[U],nullData:V,isExtension:!0}),Z}return{x:G,y:N[U],nullData:V}})??[],$=j?F.filter(G=>!G.nullData):F,q=P4().x(G=>G.isExtension?G.x:E(G.x)).defined(G=>j||!G.nullData||!!G.isExtension).y(G=>T(G.y[1])).curve(FG(w))($)||"";u.push({color:l[p].color,gradientId:L,d:q,seriesId:p})}}return u},[a,s,r,e,t,i])}const J0e=["slots","slotProps","skipAnimation","onItemClick"],eye=dn("g",{name:"MuiAreaPlot",slot:"Root"})({[`& .${Q0e.root}`]:{transition:"opacity 0.2s ease-in, fill 0.2s ease-in"}}),tye=()=>{const{xAxis:e}=wr(),{yAxis:t}=Nr();return Z0e(e,t)};function nye(e){const{slots:t,slotProps:a,skipAnimation:s,onItemClick:r}=e,i=pn(e,J0e),o=G4(),l=W4(o||s),c=tye();return n.jsx(eye,Ye({},i,{children:c.map(({d:u,seriesId:d,color:f,gradientId:p})=>n.jsx(X0e,{id:d,d:u,color:f,gradientId:p,skipAnimation:l,slots:t,slotProps:a,onClick:r&&(x=>r(x,{type:"line",seriesId:d}))},d))}))}function aye(e){return Ya("MuiMarkElement",e)}const UG=Aa("MuiMarkElement",["root","highlighted","faded","animate","series"]),BG=e=>{const{classes:t,id:a,isFaded:s,isHighlighted:r,skipAnimation:i}=e,o={root:["root",`series-${a}`,r&&"highlighted",s&&"faded",i?void 0:"animate"]};return Va(o,aye,t)},sye=["x","y","id","classes","color","dataIndex","onClick","skipAnimation","isFaded","isHighlighted"],rye=dn("circle")({[`&.${UG.animate}`]:{transitionDuration:`${sj}ms`,transitionProperty:"cx, cy",transitionTimingFunction:B4}});function iye(e){const{x:t,y:a,id:s,classes:r,color:i,dataIndex:o,onClick:l,skipAnimation:c,isFaded:u=!1,isHighlighted:d=!1}=e,f=pn(e,sye),p=Wo(),x=ij({type:"line",seriesId:s,dataIndex:o}),N=BG({id:s,classes:r,isHighlighted:d,isFaded:u,skipAnimation:c});return n.jsx(rye,Ye({},f,{cx:t,cy:a,r:5,fill:(p.vars||p).palette.background.paper,stroke:i,strokeWidth:2,className:N.root,onClick:l,cursor:l?"pointer":"unset"},x,{"data-highlighted":d||void 0,"data-faded":u||void 0}))}function HG(e){switch(e){case"circle":return 0;case"cross":return 1;case"diamond":return 2;case"square":return 3;case"star":return 4;case"triangle":return 5;case"wye":return 6;default:return 0}}const oye=["x","y","id","classes","color","shape","dataIndex","onClick","skipAnimation","isFaded","isHighlighted"],lye=dn("path",{name:"MuiMarkElement",slot:"Root"})(({ownerState:e,theme:t})=>({fill:(t.vars||t).palette.background.paper,stroke:e.color,strokeWidth:2,[`&.${UG.animate}`]:{transitionDuration:`${sj}ms`,transitionProperty:"transform, transform-origin",transitionTimingFunction:B4}}));function cye(e){const{x:t,y:a,id:s,classes:r,color:i,shape:o,dataIndex:l,onClick:c,skipAnimation:u,isFaded:d=!1,isHighlighted:f=!1}=e,p=pn(e,oye),x=ij({type:"line",seriesId:s,dataIndex:l}),y={id:s,classes:r,isHighlighted:f,isFaded:d,color:i,skipAnimation:u},N=BG(y);return n.jsx(lye,Ye({},p,{style:{transform:`translate(${t}px, ${a}px)`,transformOrigin:`${t}px ${a}px`},ownerState:y,className:N.root,d:D4(nG[HG(o)])(),onClick:c,cursor:c?"pointer":"unset"},x,{"data-highlighted":f||void 0,"data-faded":d||void 0}))}const dye=["slots","slotProps","skipAnimation","onItemClick"];function uye(e){const{slots:t,slotProps:a,skipAnimation:s,onItemClick:r}=e,i=pn(e,dye),o=G4(),l=W4(o||s),c=Px(),{xAxis:u,xAxisIds:d}=wr(),{yAxis:f,yAxisIds:p}=Nr(),x=tj(),{instance:y,store:N}=Gr(),{isFaded:v,isHighlighted:j}=jxe(),w=Ht(N,OW),S=h.useMemo(()=>{const L={};for(const{dataIndex:M,axisId:F}of w)L[F]===void 0?L[F]=new Set([M]):L[F].add(M);return L},[w]);if(c===void 0)return null;const{series:_,stackingGroups:E}=c,T=d[0],A=p[0];return n.jsx("g",Ye({},i,{children:E.flatMap(({ids:L})=>L.map(M=>{const{xAxisId:F=T,yAxisId:$=A,stackedData:D,data:q,showMark:G=!0,shape:U="circle"}=_[M];if(G===!1)return null;const V=sh(u[F].scale),Z=f[$].scale,Y=u[F].data;if(Y===void 0)throw new Error(`MUI X Charts: ${F===TN?"The first `xAxis`":`The x-axis with id "${F}"`} should have data property to be able to display a line plot.`);const le=$G(`${x}-${M}-line-clip`),_e=q4(_[M],u[F],f[$]),te=t?.mark??(U==="circle"?iye:cye),ae=j({seriesId:M}),ye=!ae&&v({seriesId:M});return n.jsx("g",{clipPath:`url(#${le})`,"data-series":M,children:Y?.map((Ne,he)=>{const ve=q[he]==null?null:D[he][1];return{x:V(Ne),y:ve===null?null:Z(ve),position:Ne,value:ve,index:he}}).filter(({x:Ne,y:he,index:ve,position:ne,value:Se})=>Se===null||he===null||!y.isPointInside(Ne,he)?!1:G===!0?!0:G({x:Ne,y:he,index:ve,position:ne,value:Se})).map(({x:Ne,y:he,index:ve})=>n.jsx(te,Ye({id:M,dataIndex:ve,shape:U,color:_e(ve),x:Ne,y:he,skipAnimation:l,onClick:r&&(ne=>r(ne,{type:"line",seriesId:M,dataIndex:ve})),isHighlighted:S[F]?.has(ve)||ae,isFaded:ye},a?.mark),`${M}-${ve}`))},M)}))}))}function oj(){const[e,t]=h.useState(typeof window<"u"||!1);return h.useEffect(()=>{t(!0)},[]),e}function V4(e){return typeof e=="number"&&!Number.isFinite(e)}const Ok={start:0,extremities:0,end:1,middle:.5};function b2(e,t,a){return e(t)-(e.step()-e.bandwidth())/2+Ok[a]*e.step()}function mye(e){const{scale:t,tickNumber:a,valueFormatter:s,tickInterval:r,tickPlacement:i="extremities",tickLabelPlacement:o,isInside:l}=e;if(vs(t)){const p=t.domain(),x=o??"middle";if(t.bandwidth()>0){const N=typeof r=="function"&&p.filter(r)||typeof r=="object"&&r||p,v=t.range()[0]>t.range()[1],j=N.findIndex(S=>l(b2(t,S,v?"start":"end"))),w=N.findLastIndex(S=>l(b2(t,S,v?"end":"start")));return[...N.slice(j,w+1).map(S=>{const _=`${S}`;return{value:S,formattedValue:s?.(S,{location:"tick",scale:t,tickNumber:a,defaultTickLabel:_})??_,offset:b2(t,S,i),labelOffset:x==="tick"?0:t.step()*(Ok[x]-Ok[i])}}),...i==="extremities"&&w===p.length-1&&l(t.range()[1])?[{formattedValue:void 0,offset:t.range()[1],labelOffset:0}]:[]]}return(typeof r=="function"&&p.filter(r)||typeof r=="object"&&r||p).map(N=>{const v=`${N}`;return{value:N,formattedValue:s?.(N,{location:"tick",scale:t,tickNumber:a,defaultTickLabel:v})??v,offset:t(N),labelOffset:0}})}if(t.domain().some(V4))return[];const u=o,d=typeof r=="object"?r:fye(t,a),f=[];for(let p=0;p<d.length;p+=1){const x=d[p],y=t(x);if(l(y)){const N=t.tickFormat(a)(x);f.push({value:x,formattedValue:s?.(x,{location:"tick",scale:t,tickNumber:a,defaultTickLabel:N})??N,offset:y,labelOffset:u==="middle"?t(d[p-1]??0)-(y+t(d[p-1]??0))/2:0})}}return f}function fye(e,t){const a=e.domain();return a[0]===a[1]?[a[0]]:e.ticks(t)}function lj(e){const{scale:t,tickNumber:a,valueFormatter:s,tickInterval:r,tickPlacement:i="extremities",tickLabelPlacement:o,direction:l}=e,{instance:c}=Gr(),u=l==="x"?c.isXInside:c.isYInside;return h.useMemo(()=>mye({scale:t,tickNumber:a,tickPlacement:i,tickInterval:r,tickLabelPlacement:o,valueFormatter:s,isInside:u}),[t,a,i,r,o,s,u])}function hye(e=!1){const[t,a]=h.useState(!1);return is(()=>{e||a(!0)},[e]),h.useEffect(()=>{e&&a(!0)},[e]),t}const qG=typeof window<"u"&&"Intl"in window&&"Segmenter"in Intl?new Intl.Segmenter(void 0,{granularity:"grapheme"}):null;function gye(e){return e.length}function pye(e){const t=qG.segment(e);let a=0;for(const s of t)a+=1;return a}const xye=qG?pye:gye;function yye(e){return e*(Math.PI/180)}const WG=typeof window<"u"&&"Intl"in window&&"Segmenter"in Intl?new Intl.Segmenter(void 0,{granularity:"grapheme"}):null;function bye(e,t){return e.slice(0,t)}function vye(e,t){const a=WG.segment(e);let s="",r=0;for(const i of a)if(s+=i.segment,r+=1,r>=t)break;return s}const wye=WG?vye:bye,U6="";function GG(e,t){const{width:a,height:s,measureText:r}=t,i=yye(t.angle),o=r(e),l=Math.abs(o.width*Math.cos(i))+Math.abs(o.height*Math.sin(i)),c=Math.abs(o.width*Math.sin(i))+Math.abs(o.height*Math.cos(i));return l<=a&&c<=s}function VG(e,t){if(t(e))return e;let a=e,s=1,r=1/2;const i=xye(e);let o=i,l=i,c=null;do{if(l=o,o=Math.floor(i*r),o===0)break;a=wye(e,o).trim();const u=t(a+U6);s+=1,u?(c=a,r+=1/2**s):r-=1/2**s}while(Math.abs(o-l)!==1);return c?c+U6:""}function YG(){return typeof window>"u"}const Xc=new Map,QG=2e3,Nye=new Set(["minWidth","maxWidth","width","minHeight","maxHeight","height","top","left","fontSize","padding","margin","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom"]);function Y4(e,t){return Nye.has(e)&&t===+t?`${t}px`:t}const jye=/([A-Z])/g;function Q4(e){return String(e).replace(jye,t=>`-${t.toLowerCase()}`)}function KG(e){let t="";for(const a in e)if(Object.hasOwn(e,a)){const s=a,r=e[s];if(r===void 0)continue;t+=`${Q4(s)}:${Y4(s,r)};`}return t}const Dx=(e,t={})=>{if(e==null||YG())return{width:0,height:0};const a=String(e),s=KG(t),r=`${a}-${s}`,i=Xc.get(r);if(i)return i;try{const o=ZG(),l=document.createElementNS("http://www.w3.org/2000/svg","text");Object.keys(t).map(u=>(l.style[Q4(u)]=Y4(u,t[u]),u)),l.textContent=a,o.replaceChildren(l);const c=XG(l);return Xc.set(r,c),Xc.size+1>QG&&Xc.clear(),c}catch{return{width:0,height:0}}};function Cye(e,t={}){if(YG())return new Map(Array.from(e).map(c=>[c,{width:0,height:0}]));const a=new Map,s=[],r=KG(t);for(const c of e){const u=`${c}-${r}`,d=Xc.get(u);d?a.set(c,d):s.push(c)}const i=ZG(),o=Ye({},t);Object.keys(o).map(c=>(i.style[Q4(c)]=Y4(c,o[c]),c));const l=[];for(const c of s){const u=document.createElementNS("http://www.w3.org/2000/svg","text");u.textContent=`${c}`,l.push(u)}i.replaceChildren(...l);for(let c=0;c<s.length;c+=1){const u=s[c],d=i.children[c],f=XG(d),p=`${u}-${r}`;Xc.set(p,f),a.set(u,f)}return Xc.size+1>QG&&Xc.clear(),a}function XG(e){try{const t=e.getBBox();return{width:t.width,height:t.height}}catch{const t=e.getBoundingClientRect();return{width:t.width,height:t.height}}}let ir=null;function ZG(){return ir===null&&(ir=document.createElementNS("http://www.w3.org/2000/svg","svg"),ir.setAttribute("aria-hidden","true"),ir.style.position="absolute",ir.style.top="-20000px",ir.style.left="0",ir.style.padding="0",ir.style.margin="0",ir.style.border="none",ir.style.pointerEvents="none",ir.style.visibility="hidden",ir.style.contain="strict",document.body.appendChild(ir)),ir}function Sye(e,t,a,s,r){const i=new Map,o=nj(r?.angle??0);let l=1,c=1;r?.textAnchor==="start"?(l=1/0,c=1):r?.textAnchor==="end"?(l=1,c=1/0):(l=2,c=2),o>90&&o<270&&([l,c]=[c,l]),s&&([l,c]=[c,l]);for(const u of e)if(u.formattedValue){const d=Math.min((u.offset+u.labelOffset)*l,(t.left+t.width+t.right-u.offset-u.labelOffset)*c),f=p=>GG(p,{width:d,height:a,angle:o,measureText:x=>Dx(x,r)});i.set(u,VG(u.formattedValue.toString(),f))}return i}const B6=5;function _ye(e,t,a=0){const s=Math.min(Math.abs(a)%180,Math.abs(Math.abs(a)%180-180)%180);if(s<B6)return e;if(s>90-B6)return t;const r=Kc(s),i=Math.atan2(t,e);return r<i?e/Math.cos(r):t/Math.sin(r)}function Aye(e,{tickLabelStyle:t,tickLabelInterval:a,tickLabelMinGap:s,reverse:r,isMounted:i,isXInside:o}){if(typeof a=="function")return new Set(e.filter((f,p)=>a(f.value,p)));let l=0;const c=r?-1:1,u=e.filter(f=>{const{offset:p,labelOffset:x,formattedValue:y}=f;if(y==="")return!1;const N=p+x;return o(N)}),d=kye(u,t);return new Set(u.filter((f,p)=>{const{offset:x,labelOffset:y}=f,N=x+y;if(p>0&&c*N<c*(l+s))return!1;const{width:v,height:j}=i?Tye(d,f):{width:0,height:0},w=_ye(v,j,t?.angle),S=N-c*w/2;return p>0&&c*S<c*(l+s)?!1:(l=N+c*w/2,!0)}))}function Tye(e,t){if(t.formattedValue===void 0)return{width:0,height:0};let a=0,s=0;for(const r of t.formattedValue.split(`
`)){const i=e.get(r);i&&(a=Math.max(a,i.width),s+=i.height)}return{width:a,height:s}}function kye(e,t){const a=new Set;for(const s of e)s.formattedValue&&s.formattedValue.split(`
`).forEach(r=>a.add(r));return Cye(a,t)}function JG(e){return Ya("MuiChartsAxis",e)}const Ky=Aa("MuiChartsAxis",["root","line","tickContainer","tick","tickLabel","label","directionX","directionY","top","bottom","left","right","id"]),eV=e=>{const{classes:t,position:a,id:s}=e,r={root:["root","directionX",a,`id-${s}`],line:["line"],tickContainer:["tickContainer"],tick:["tick"],tickLabel:["tickLabel"],label:["label"]};return Va(r,JG,t)},Mk=3,Eye=4,tV={disableLine:!1,disableTicks:!1,tickSize:6,tickLabelMinGap:4};function Lye({style:e,needsComputation:t,text:a}){return a.split(`
`).map(s=>Ye({text:s},t?Dx(s,e):{width:0,height:0}))}const Pye=["x","y","style","text","ownerState"],Dye=["angle","textAnchor","dominantBaseline"];function cj(e){const{x:t,y:a,style:s,text:r}=e,i=pn(e,Pye),o=s??{},{angle:l,textAnchor:c,dominantBaseline:u}=o,d=pn(o,Dye),f=oj(),p=h.useMemo(()=>Lye({style:d,needsComputation:f&&r.includes(`
`),text:r}),[d,r,f]);let x;switch(u){case"hanging":case"text-before-edge":x=0;break;case"central":x=(p.length-1)/2*-p[0].height;break;default:x=(p.length-1)*-p[0].height;break}return n.jsx("text",Ye({},i,{transform:l?`rotate(${l}, ${t}, ${a})`:void 0,x:t,y:a,textAnchor:c,dominantBaseline:u,style:d,children:p.map((y,N)=>n.jsx("tspan",{x:t,dy:`${N===0?x:p[0].height}px`,dominantBaseline:u,children:y.text},N))}))}function nV(e){const t=nj(e);return t<=30||t>=330||t<=210&&t>=150?"middle":t<=180?"end":"start"}function aV(e){const t=nj(e);return t<=30||t>=330?"hanging":t<=210&&t>=150?"auto":"central"}function sV(e){switch(e){case"start":return"end";case"end":return"start";default:return e}}const Oye=["scale","tickNumber","reverse"];function rV(e){const{xAxis:t,xAxisIds:a}=wr(),s=t[e.axisId??a[0]],{scale:r,tickNumber:i,reverse:o}=s,l=pn(s,Oye),c=_i({props:Ye({},l,e),name:"MuiChartsXAxis"}),u=Ye({},tV,c),{position:d,tickLabelStyle:f,slots:p,slotProps:x}=u,y=Wo(),N=px(),v=eV(u),j=d==="bottom"?1:-1,w=p?.axisTick??"line",S=p?.axisTickLabel??cj,_=nV((d==="bottom"?0:180)-(f?.angle??0)),E=aV((d==="bottom"?0:180)-(f?.angle??0)),T=zl({elementType:S,externalSlotProps:x?.axisTickLabel,additionalProps:{style:Ye({},y.typography.caption,{fontSize:12,lineHeight:1.25,textAnchor:N?sV(_):_,dominantBaseline:E},f)},className:v.tickLabel,ownerState:{}});return{xScale:r,defaultizedProps:u,tickNumber:i,positionSign:j,classes:v,Tick:w,TickLabel:S,axisTickLabelProps:T,reverse:o}}function Mye(e){const{axisLabelHeight:t}=e,{xScale:a,defaultizedProps:s,tickNumber:r,positionSign:i,classes:o,Tick:l,TickLabel:c,axisTickLabelProps:u,reverse:d}=rV(e),f=px(),p=hye(),{disableTicks:x,tickSize:y,valueFormatter:N,slotProps:v,tickInterval:j,tickLabelInterval:w,tickPlacement:S,tickLabelPlacement:_,tickLabelMinGap:E,height:T}=s,A=Ti(),{instance:L}=Gr(),M=oj(),F=x?4:y,$=lj({scale:a,tickNumber:r,valueFormatter:N,tickInterval:j,tickPlacement:S,tickLabelPlacement:_,direction:"x"}),D=Aye($,{tickLabelStyle:u.style,tickLabelInterval:w,tickLabelMinGap:E,reverse:d,isMounted:p,isXInside:L.isXInside}),q=Math.max(0,T-(t>0?t+Eye:0)-F-Mk),G=M?Sye(D,A,q,f,u.style):new Map(Array.from(D).map(U=>[U,U.formattedValue]));return n.jsx(h.Fragment,{children:$.map((U,V)=>{const{offset:Z,labelOffset:Y}=U,le=Y??0,_e=i*(F+Mk),te=L.isXInside(Z),ae=G.get(U),ye=D.has(U);return n.jsxs("g",{transform:`translate(${Z}, 0)`,className:o.tickContainer,children:[!x&&te&&n.jsx(l,Ye({y2:i*F,className:o.tick},v?.axisTick)),ae!==void 0&&ye&&n.jsx(c,Ye({x:le,y:_e},u,{text:ae}))]},V)})})}const yg={start:0,extremities:0,end:1,middle:.5,tick:0};function iV(e){const{scale:t,tickInterval:a,tickLabelPlacement:s="middle",tickPlacement:r="extremities",groups:i}=e;return h.useMemo(()=>{const o=t.domain(),l=typeof a=="function"&&o.filter(a)||typeof a=="object"&&a||o;if(t.bandwidth()>0){const c=H6(l,i,r,s,t);return c[0]&&(c[0].ignoreTick=!0),[{formattedValue:void 0,offset:t.range()[0],labelOffset:0,groupIndex:i.length-1},...c,{formattedValue:void 0,offset:t.range()[1],labelOffset:0,groupIndex:i.length-1}]}return H6(l,i,r,s,t)},[t,a,i,r,s])}function H6(e,t,a,s,r){const i=[],o=new Map;let l=0;for(let c=0;c<t.length;c+=1)for(let u=0;u<e.length;u+=1){const d=e[u],f=t[c].getValue(d,u),p=i[i.length-1];if(p?.value!==f||p?.groupIndex!==c){l=1;const y=vs(r)?r(d)-(r.step()-r.bandwidth())/2+yg[a]*r.step():r(d),N=r.step()*l*(yg[s]-yg[a]);i.push({value:f,formattedValue:`${f}`,offset:y,groupIndex:c,dataIndex:u,ignoreTick:!1,labelOffset:N}),o.has(u)||o.set(u,new Set);const v=o.get(u);for(const j of v.values())i[j].ignoreTick=!0;v.add(i.length-1)}else{l+=1;const y=r.step()*l*(yg[s]-yg[a]);p.labelOffset=y}}return i}const q6={tickSize:6},Iye=(e,t,a)=>{const s=e[t]??{},r=a??q6.tickSize,i=r*t*2+r;return Ye({},q6,s,{tickSize:s.tickSize??i})};function $ye(e){const{xScale:t,defaultizedProps:a,positionSign:s,classes:r,Tick:i,TickLabel:o,axisTickLabelProps:l}=rV(e);if(!vs(t))throw new Error("MUI X Charts: ChartsGroupedXAxis only supports the `band` and `point` scale types.");const{disableTicks:c,tickSize:u,valueFormatter:d,slotProps:f,tickInterval:p,tickPlacement:x,tickLabelPlacement:y}=a,N=a.groups,{instance:v}=Gr(),j=iV({scale:t,tickInterval:p,tickPlacement:x,tickLabelPlacement:y,groups:N});return n.jsx(h.Fragment,{children:j.map((w,S)=>{const{offset:_,labelOffset:E}=w,T=E??0,A=v.isXInside(_),L=w.formattedValue,M=w.ignoreTick??!1,F=w.groupIndex??0,$=Iye(N,F,u),D=s*$.tickSize,q=s*($.tickSize+Mk);return n.jsxs("g",{transform:`translate(${_}, 0)`,className:r.tickContainer,"data-group-index":F,children:[!c&&!M&&A&&n.jsx(i,Ye({y2:D,className:r.tick},f?.axisTick)),L!==void 0&&n.jsx(o,Ye({x:T,y:q},l,{style:Ye({},l.style,$.tickLabelStyle),text:L}))]},S)})})}const oV=dn("g",{name:"MuiChartsAxis",slot:"Root"})(({theme:e})=>({[`& .${Ky.tickLabel}`]:Ye({},e.typography.caption,{fill:(e.vars||e).palette.text.primary}),[`& .${Ky.label}`]:{fill:(e.vars||e).palette.text.primary},[`& .${Ky.line}`]:{stroke:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges",strokeWidth:1},[`& .${Ky.tick}`]:{stroke:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges"}})),Rye=["axis"],zye=["scale","tickNumber","reverse"],Fye=dn(oV,{name:"MuiChartsXAxis",slot:"Root"})({});function Uye(e){let{axis:t}=e,a=pn(e,Rye);const{scale:s}=t,r=pn(t,zye),i=_i({props:Ye({},r,a),name:"MuiChartsXAxis"}),o=Ye({},tV,i),{position:l,labelStyle:c,offset:u,slots:d,slotProps:f,sx:p,disableLine:x,label:y,height:N}=o,v=Wo(),j=eV(o),{left:w,top:S,width:_,height:E}=Ti(),T=l==="bottom"?1:-1,A=d?.axisLine??"line",L=d?.axisLabel??cj,M=zl({elementType:L,externalSlotProps:f?.axisLabel,additionalProps:{style:Ye({},v.typography.body1,{lineHeight:1,fontSize:14,textAnchor:"middle",dominantBaseline:l==="bottom"?"text-after-edge":"text-before-edge"},c)},ownerState:{}});if(l==="none")return null;const F=y?Dx(y,M.style).height:0,$=s.domain(),q=vs(s)?$.length===0:$.some(V4);let G=null;q||(G="groups"in t&&Array.isArray(t.groups)?n.jsx($ye,Ye({},a)):n.jsx(Mye,Ye({},a,{axisLabelHeight:F})));const U={x:w+_/2,y:T*N};return n.jsxs(Fye,{transform:`translate(0, ${l==="bottom"?S+E+u:S-u})`,className:j.root,sx:p,children:[!x&&n.jsx(A,Ye({x1:w,x2:w+_,className:j.line},f?.axisLine)),G,y&&n.jsx("g",{className:j.label,children:n.jsx(L,Ye({},U,M,{text:y}))})]})}function Bye(e){const{xAxis:t,xAxisIds:a}=wr(),s=t[e.axisId??a[0]];return s?n.jsx(Uye,Ye({},e,{axis:s})):(`${e.axisId}`,null)}function Hye(e,t,a,s,r){const i=new Map,o=nj(r?.angle??0);let l=1,c=1;r?.textAnchor==="start"?(l=1/0,c=1):r?.textAnchor==="end"?(l=1,c=1/0):(l=2,c=2),o>180&&([l,c]=[c,l]),s&&([l,c]=[c,l]);for(const u of e)if(u.formattedValue){const d=Math.min((u.offset+u.labelOffset)*l,(t.top+t.height+t.bottom-u.offset-u.labelOffset)*c),f=p=>GG(p,{width:a,height:d,angle:o,measureText:x=>Dx(x,r)});i.set(u,VG(u.formattedValue.toString(),f))}return i}const lV=e=>{const{classes:t,position:a,id:s}=e,r={root:["root","directionY",a,`id-${s}`],line:["line"],tickContainer:["tickContainer"],tick:["tick"],tickLabel:["tickLabel"],label:["label"]};return Va(r,JG,t)},Ik=2,qye=2,cV={disableLine:!1,disableTicks:!1,tickSize:6},Wye=["scale","tickNumber","reverse"];function dV(e){const{yAxis:t,yAxisIds:a}=Nr(),s=t[e.axisId??a[0]],{scale:r,tickNumber:i}=s,o=pn(s,Wye),l=_i({props:Ye({},o,e),name:"MuiChartsYAxis"}),c=Ye({},cV,l),{position:u,tickLabelStyle:d,slots:f,slotProps:p}=c,x=Wo(),y=px(),N=lV(c),v=u==="right"?1:-1,j=typeof d?.fontSize=="number"?d.fontSize:12,w=f?.axisTick??"line",S=f?.axisTickLabel??cj,_=nV((u==="right"?-90:90)-(d?.angle??0)),E=aV((u==="right"?-90:90)-(d?.angle??0)),T=zl({elementType:S,externalSlotProps:p?.axisTickLabel,additionalProps:{style:Ye({},x.typography.caption,{fontSize:j,textAnchor:y?sV(_):_,dominantBaseline:E},d)},className:N.tickLabel,ownerState:{}});return{yScale:r,defaultizedProps:c,tickNumber:i,positionSign:v,classes:N,Tick:w,TickLabel:S,axisTickLabelProps:T}}function Gye(e){const{axisLabelHeight:t}=e,{yScale:a,defaultizedProps:s,tickNumber:r,positionSign:i,classes:o,Tick:l,TickLabel:c,axisTickLabelProps:u}=dV(e),d=px(),{disableTicks:f,tickSize:p,valueFormatter:x,slotProps:y,tickPlacement:N,tickLabelPlacement:v,tickInterval:j,tickLabelInterval:w,width:S}=s,_=Ti(),{instance:E}=Gr(),T=oj(),A=f?4:p,L=lj({scale:a,tickNumber:r,valueFormatter:x,tickPlacement:N,tickLabelPlacement:v,tickInterval:j,direction:"y"}),M=Math.max(0,S-(t>0?t+qye:0)-A-Ik),F=T?Hye(L,_,M,d,u.style):new Map(Array.from(L).map($=>[$,$.formattedValue]));return n.jsx(h.Fragment,{children:L.map(($,D)=>{const{offset:q,labelOffset:G,value:U}=$,V=i*(A+Ik),Z=G,Y=typeof w=="function"&&!w?.(U,D),le=E.isYInside(q),_e=F.get($);return le?n.jsxs("g",{transform:`translate(0, ${q})`,className:o.tickContainer,children:[!f&&n.jsx(l,Ye({x2:i*A,className:o.tick},y?.axisTick)),_e!==void 0&&!Y&&n.jsx(c,Ye({x:V,y:Z,text:_e},u))]},D):null})})}const W6={tickSize:6},Vye=(e,t,a)=>{const s=e[t]??{},r=a??W6.tickSize,i=r*t*2+r;return Ye({},W6,s,{tickSize:s.tickSize??i})};function Yye(e){const{yScale:t,defaultizedProps:a,positionSign:s,classes:r,Tick:i,TickLabel:o,axisTickLabelProps:l}=dV(e);if(!vs(t))throw new Error("MUI X Charts: ChartsGroupedYAxis only supports the `band` and `point` scale types.");const{disableTicks:c,tickSize:u,valueFormatter:d,slotProps:f,tickInterval:p,tickPlacement:x,tickLabelPlacement:y}=a,N=a.groups,{instance:v}=Gr(),j=iV({scale:t,tickInterval:p,tickPlacement:x,tickLabelPlacement:y,groups:N});return n.jsx(h.Fragment,{children:j.map((w,S)=>{const{offset:_,labelOffset:E}=w,T=E??0,A=v.isYInside(_),L=w.formattedValue,M=w.ignoreTick??!1,F=w.groupIndex??0,$=Vye(N,F,u),D=s*$.tickSize,q=s*($.tickSize+Ik);return n.jsxs("g",{transform:`translate(0, ${_})`,className:r.tickContainer,"data-group-index":F,children:[!c&&!M&&A&&n.jsx(i,Ye({x2:D,className:r.tick},f?.axisTick)),L!==void 0&&n.jsx(o,Ye({x:q,y:T},l,{style:Ye({},l.style,$.tickLabelStyle),text:L}))]},S)})})}const Qye=["axis"],Kye=["scale","tickNumber","reverse"],Xye=dn(oV,{name:"MuiChartsYAxis",slot:"Root"})({});function Zye(e){let{axis:t}=e,a=pn(e,Qye);const{scale:s}=t,r=pn(t,Kye),i=oj(),o=_i({props:Ye({},r,a),name:"MuiChartsYAxis"}),l=Ye({},cV,o),{position:c,disableLine:u,label:d,labelStyle:f,offset:p,width:x,sx:y,slots:N,slotProps:v}=l,j=Wo(),w=lV(l),{left:S,top:_,width:E,height:T}=Ti(),A=c==="right"?1:-1,L=N?.axisLine??"line",M=N?.axisLabel??cj,F=zl({elementType:L,externalSlotProps:v?.axisLine,additionalProps:{strokeLinecap:"square"},ownerState:{}}),$=zl({elementType:M,externalSlotProps:v?.axisLabel,additionalProps:{style:Ye({},j.typography.body1,{lineHeight:1,fontSize:14,angle:A*90,textAnchor:"middle",dominantBaseline:"text-before-edge"},f)},ownerState:{}});if(c==="none")return null;const D={x:A*x,y:_+T/2},q=d==null?0:Dx(d,$.style).height,G=s.domain(),V=vs(s)?G.length===0:G.some(V4);let Z=null;return V||(Z="groups"in t&&Array.isArray(t.groups)?n.jsx(Yye,Ye({},a)):n.jsx(Gye,Ye({},a,{axisLabelHeight:q}))),n.jsxs(Xye,{transform:`translate(${c==="right"?S+E+p:S-p}, 0)`,className:w.root,sx:y,children:[!u&&n.jsx(L,Ye({y1:_,y2:_+T,className:w.line},F)),Z,d&&i&&n.jsx("g",{className:w.label,children:n.jsx(M,Ye({},D,$,{text:d}))})]})}function Jye(e){const{yAxis:t,yAxisIds:a}=Nr(),s=t[e.axisId??a[0]];return s?n.jsx(Zye,Ye({},e,{axis:s})):(`${e.axisId}`,null)}function ebe(e){const{slots:t,slotProps:a}=e,{xAxisIds:s,xAxis:r}=wr(),{yAxisIds:i,yAxis:o}=Nr();return n.jsxs(h.Fragment,{children:[s.map(l=>!r[l].position||r[l].position==="none"?null:n.jsx(Bye,{slots:t,slotProps:a,axisId:l},l)),i.map(l=>!o[l].position||o[l].position==="none"?null:n.jsx(Jye,{slots:t,slotProps:a,axisId:l},l))]})}function tbe(e){return Ya("MuiTypography",e)}Aa("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const nbe={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},abe=Cde(),sbe=e=>{const{align:t,gutterBottom:a,noWrap:s,paragraph:r,variant:i,classes:o}=e,l={root:["root",i,e.align!=="inherit"&&`align${Wn(t)}`,a&&"gutterBottom",s&&"noWrap",r&&"paragraph"]};return Va(l,tbe,o)},rbe=dn("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.variant&&t[a.variant],a.align!=="inherit"&&t[`align${Wn(a.align)}`],a.noWrap&&t.noWrap,a.gutterBottom&&t.gutterBottom,a.paragraph&&t.paragraph]}})(Du(({theme:e})=>({margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(e.typography).filter(([t,a])=>t!=="inherit"&&a&&typeof a=="object").map(([t,a])=>({props:{variant:t},style:a})),...Object.entries(e.palette).filter(yp()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette?.text||{}).filter(([,t])=>typeof t=="string").map(([t])=>({props:{color:`text${Wn(t)}`},style:{color:(e.vars||e).palette.text[t]}})),{props:({ownerState:t})=>t.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:t})=>t.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:t})=>t.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:t})=>t.paragraph,style:{marginBottom:16}}]}))),G6={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},K4=h.forwardRef(function(t,a){const{color:s,...r}=Nd({props:t,name:"MuiTypography"}),i=!nbe[s],o=abe({...r,...i&&{color:s}}),{align:l="inherit",className:c,component:u,gutterBottom:d=!1,noWrap:f=!1,paragraph:p=!1,variant:x="body1",variantMapping:y=G6,...N}=o,v={...o,align:l,color:s,className:c,component:u,gutterBottom:d,noWrap:f,paragraph:p,variant:x,variantMapping:y},j=u||(p?"p":y[x]||G6[x])||"span",w=sbe(v);return n.jsx(rbe,{as:j,ref:a,className:Mt(w.root,c),...N,ownerState:v,style:{...l!=="inherit"&&{"--Typography-textAlign":l},...N.style}})});function ibe(e){return Ya("MuiChartsTooltip",e)}const lf=Aa("MuiChartsTooltip",["root","paper","table","row","cell","mark","markContainer","labelCell","valueCell","axisValueCell"]),dj=e=>Va({root:["root"],paper:["paper"],table:["table"],row:["row"],cell:["cell"],mark:["mark"],markContainer:["markContainer"],labelCell:["labelCell"],valueCell:["valueCell"],axisValueCell:["axisValueCell"]},ibe,e);function obe(){const e=Yn(),t=Ht(e,SW),a=Ht(e,Wr),s=aj(),{xAxis:r,xAxisIds:i}=wr(),{yAxis:o,yAxisIds:l}=Nr(),{zAxis:c,zAxisIds:u}=R4(),{rotationAxis:d,rotationAxisIds:f}=_G();if(!t)return null;const p=s[t.type]?.series[t.seriesId];if(!p)return null;const x=Lv(p)?p.xAxisId??i[0]:void 0,y=Lv(p)?p.yAxisId??l[0]:void 0,N="zAxisId"in p?p.zAxisId??u[0]:u[0],v=f[0],j=a[p.type].colorProcessor?.(p,x!==void 0?r[x]:void 0,y!==void 0?o[y]:void 0,N!==void 0?c[N]:void 0)??(()=>""),w={};return x!==void 0&&(w.x=r[x]),y!==void 0&&(w.y=o[y]),v!==void 0&&(w.rotation=d[v]),a[p.type].tooltipGetter({series:p,axesConfig:w,getColor:j,identifier:t})}const $k=dn("div",{name:"MuiChartsTooltip",slot:"Container",overridesResolver:(e,t)=>t.paper})(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,borderRadius:(e.vars||e).shape?.borderRadius,border:`solid ${(e.vars||e).palette.divider} 1px`})),Rk=dn("table",{name:"MuiChartsTooltip",slot:"Table"})(({theme:e})=>({borderSpacing:0,[`& .${lf.markContainer}`]:{display:"inline-block",width:`calc(20px + ${e.spacing(1.5)})`,verticalAlign:"middle"},"& caption":{borderBottom:`solid ${(e.vars||e).palette.divider} 1px`,padding:e.spacing(.5,1.5),textAlign:"start",whiteSpace:"nowrap","& span":{marginRight:e.spacing(1.5)}}})),zk=dn("tr",{name:"MuiChartsTooltip",slot:"Row"})(({theme:e})=>({"tr:first-of-type& td":{paddingTop:e.spacing(.5)},"tr:last-of-type& td":{paddingBottom:e.spacing(.5)}})),df=dn(K4,{name:"MuiChartsTooltip",slot:"Cell"})(({theme:e})=>({verticalAlign:"middle",color:(e.vars||e).palette.text.secondary,textAlign:"start",[`&.${lf.cell}`]:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)},[`&.${lf.labelCell}`]:{whiteSpace:"nowrap",fontWeight:e.typography.fontWeightRegular},[`&.${lf.valueCell}, &.${lf.axisValueCell}`]:{color:(e.vars||e).palette.text.primary,fontWeight:e.typography.fontWeightMedium},[`&.${lf.valueCell}`]:{paddingLeft:e.spacing(1.5),paddingRight:e.spacing(1.5)},"td:first-of-type&, th:first-of-type&":{paddingLeft:e.spacing(1.5)},"td:last-of-type&, th:last-of-type&":{paddingRight:e.spacing(1.5)}}));function lbe(e){return Ya("MuiChartsLabelMark",e)}const Km=Aa("MuiChartsLabelMark",["root","line","square","circle","mask","fill"]),cbe=e=>{const{type:t}=e;return Va({root:typeof t=="function"?["root"]:["root",t],mask:["mask"],fill:["fill"]},lbe,e.classes)},uV=(e,t,a)=>h.forwardRef(function(r,i){const o=_i({props:r,name:e}),l=typeof t.defaultProps=="function"?t.defaultProps(o):t.defaultProps??{},c=Pu(l,o),u=Wo(),d=t.classesResolver?.(c,u),f=h.forwardRef(a);return n.jsx(f,Ye({},c,{classes:d,ref:i}))}),dbe=["type","color","className","classes"],ube=dn("div",{name:"MuiChartsLabelMark",slot:"Root"})(()=>({display:"flex",width:14,height:14,[`&.${Km.line}`]:{width:16,height:"unset",alignItems:"center",[`.${Km.mask}`]:{height:4,width:"100%",borderRadius:1,overflow:"hidden"}},[`&.${Km.square}`]:{height:13,width:13,borderRadius:2,overflow:"hidden"},[`&.${Km.circle}`]:{height:15,width:15},svg:{display:"block"},[`& .${Km.mask} > *`]:{height:"100%",width:"100%"},[`& .${Km.mask}`]:{height:"100%",width:"100%"}})),Bv=uV("MuiChartsLabelMark",{defaultProps:{type:"square"},classesResolver:cbe},function(t,a){const{type:s,color:r,className:i,classes:o}=t,l=pn(t,dbe),c=s;return n.jsx(ube,Ye({className:Mt(o?.root,i),ownerState:t,"aria-hidden":"true",ref:a},l,{children:n.jsx("div",{className:o?.mask,children:typeof c=="function"?n.jsx(c,{className:o?.fill,color:r}):n.jsx("svg",{viewBox:"0 0 24 24",preserveAspectRatio:s==="line"?"none":void 0,children:s==="circle"?n.jsx("circle",{className:o?.fill,r:"12",cx:"12",cy:"12",fill:r}):n.jsx("rect",{className:o?.fill,width:"24",height:"24",fill:r})})})}))});function mbe(e){const{classes:t,sx:a}=e,s=obe(),r=dj(t);if(!s)return null;if("values"in s){const{label:u,color:d,markType:f}=s;return n.jsx($k,{sx:a,className:r.paper,children:n.jsxs(Rk,{className:r.table,children:[n.jsxs(K4,{component:"caption",children:[n.jsx("div",{className:r.markContainer,children:n.jsx(Bv,{type:f,color:d,className:r.mark})}),u]}),n.jsx("tbody",{children:s.values.map(({formattedValue:p,label:x})=>n.jsxs(zk,{className:r.row,children:[n.jsx(df,{className:Mt(r.labelCell,r.cell),component:"th",children:x}),n.jsx(df,{className:Mt(r.valueCell,r.cell),component:"td",children:p})]},x))})]})})}const{color:i,label:o,formattedValue:l,markType:c}=s;return n.jsx($k,{sx:a,className:r.paper,children:n.jsx(Rk,{className:r.table,children:n.jsx("tbody",{children:n.jsxs(zk,{className:r.row,children:[n.jsxs(df,{className:Mt(r.labelCell,r.cell),component:"th",children:[n.jsx("div",{className:r.markContainer,children:n.jsx(Bv,{type:c,color:i,className:r.mark})}),o]}),n.jsx(df,{className:Mt(r.valueCell,r.cell),component:"td",children:l})]})})})})}function fbe(e){const t=Yn(),a=Ht(t,Wr);return h.useMemo(()=>{const r={};return Object.keys(a).forEach(i=>{r[i]=a[i].colorProcessor}),r},[a])}const hbe=z9({themeId:jN});function gbe(){const e=z4(),[t,a]=h.useState(null);return h.useEffect(()=>{const s=e.current;if(s===null)return()=>{};const r=o=>{o.pointerType!=="mouse"&&a(null)},i=o=>{a({pointerType:o.pointerType})};return s.addEventListener("pointerenter",i),s.addEventListener("pointerup",r),()=>{s.removeEventListener("pointerenter",i),s.removeEventListener("pointerup",r)}},[e]),t}function pbe(e){return e instanceof Date?e.toUTCString():e.toLocaleString()}const xbe="@media (pointer: fine)",ybe=()=>hbe(xbe,{defaultMatches:!0}),mV=(e,t)=>t,fV=(e,t)=>t;function hV(e,t,a){return Array.isArray(a)?a.map(s=>R6(t.axis[s],e)):R6(t.axis[a],e)}const gV=St(Sx,_x,rxe,(e,t,a)=>e===null||t===null?null:ixe(a)(e,t)),bbe=St(gV,nm,mV,(e,t,a=t.axisIds[0])=>e===null?null:hV(e,t,a)),pV=St(gV,nm,fV,(e,t,a=t.axisIds)=>e===null?null:hV(e,t,a));St(nm,bbe,mV,(e,t,a=e.axisIds[0])=>{if(t===null||t===-1||e.axisIds.length===0)return null;const s=e.axis[a]?.data;return s?s[t]:null});St(nm,pV,fV,(e,t,a=e.axisIds)=>t===null?null:a.map((s,r)=>{const i=t[r];return i===-1?null:e.axis[s].data?.[i]}));const xV=SN({memoizeOptions:{resultEqualityCheck:vf}})(pV,nm,(e,t)=>e===null?[]:t.axisIds.map((a,s)=>({axisId:a,dataIndex:e[s]})).filter(({axisId:a,dataIndex:s})=>t.axis[a].triggerTooltip&&s>=0)),vbe=St(xV,e=>e.length>0);function v2(e,t,a){const s=e.data?.[t]??null,i=(e.valueFormatter??(o=>e.scaleType==="utc"?pbe(o):o.toLocaleString()))(s,{location:"tooltip",scale:e.scale});return{axisDirection:a,axisId:e.id,mainAxis:e,dataIndex:t,axisValue:s,axisFormattedValue:i,seriesItems:[]}}function wbe(e={}){const{multipleAxes:t,directions:a}=e,s=lxe(),r=cxe(),i=dxe(),o=Yn(),l=Ht(o,kW),c=Ht(o,EW),u=Ht(o,xV),d=aj(),{xAxis:f}=wr(),{yAxis:p}=Nr(),{zAxis:x,zAxisIds:y}=R4(),{rotationAxis:N}=_G(),v=fbe();if(l.length===0&&c.length===0&&u.length===0)return null;const j=[];return(a===void 0||a.includes("x"))&&l.forEach(({axisId:w,dataIndex:S})=>{!t&&j.length>1||j.push(v2(f[w],S,"x"))}),(a===void 0||a.includes("y"))&&c.forEach(({axisId:w,dataIndex:S})=>{!t&&j.length>1||j.push(v2(p[w],S,"y"))}),(a===void 0||a.includes("rotation"))&&u.forEach(({axisId:w,dataIndex:S})=>{!t&&j.length>1||j.push(v2(N[w],S,"rotation"))}),Object.keys(d).filter(qN).forEach(w=>{const S=d[w];return S?S.seriesOrder.forEach(_=>{const E=S.series[_],T=E.xAxisId??s.id,A=E.yAxisId??r.id,L=j.findIndex(({axisDirection:M,axisId:F})=>M==="x"&&F===T||M==="y"&&F===A);if(L>=0){const M="zAxisId"in E?E.zAxisId:y[0],{dataIndex:F}=j[L],$=v[w]?.(E,f[T],p[A],M?x[M]:void 0)(F)??"",D=E.data[F]??null,q=E.valueFormatter(D,{dataIndex:F}),G=Vi(E.label,"tooltip")??null;j[L].seriesItems.push({seriesId:_,color:$,value:D,formattedValue:q,formattedLabel:G,markType:E.labelMarkType})}}):[]}),Object.keys(d).filter($4).forEach(w=>{const S=d[w];return S?S.seriesOrder.forEach(_=>{const E=S.series[_],T=E.rotationAxisId??i?.id,A=j.findIndex(({axisDirection:L,axisId:M})=>L==="rotation"&&M===T);if(A>=0){const{dataIndex:L}=j[A],M=v[w]?.(E)(L)??"",F=E.data[L]??null,$=E.valueFormatter(F,{dataIndex:L}),D=Vi(E.label,"tooltip")??null;j[A].seriesItems.push({seriesId:_,color:M,value:F,formattedValue:$,formattedLabel:D,markType:E.labelMarkType})}}):[]}),t?j:j.length===0?j[0]:null}function Nbe(e){return wbe(Ye({},e,{multipleAxes:!0}))}function jbe(e){const t=dj(e.classes),a=Nbe();return a===null?null:n.jsx($k,{sx:e.sx,className:t.paper,children:a.map(({axisId:s,mainAxis:r,axisValue:i,axisFormattedValue:o,seriesItems:l})=>n.jsxs(Rk,{className:t.table,children:[i!=null&&!r.hideTooltip&&n.jsx(K4,{component:"caption",children:o}),n.jsx("tbody",{children:l.map(({seriesId:c,color:u,formattedValue:d,formattedLabel:f,markType:p})=>d==null?null:n.jsxs(zk,{className:t.row,children:[n.jsxs(df,{className:Mt(t.labelCell,t.cell),component:"th",children:[n.jsx("div",{className:t.markContainer,children:n.jsx(Bv,{type:p,color:u,className:t.mark})}),f||null]}),n.jsx(df,{className:Mt(t.valueCell,t.cell),component:"td",children:d})]},c))})]},s))})}var pr="top",yi="bottom",bi="right",xr="left",X4="auto",Ox=[pr,yi,bi,xr],Mf="start",Tp="end",Cbe="clippingParents",yV="viewport",bg="popper",Sbe="reference",V6=Ox.reduce(function(e,t){return e.concat([t+"-"+Mf,t+"-"+Tp])},[]),bV=[].concat(Ox,[X4]).reduce(function(e,t){return e.concat([t,t+"-"+Mf,t+"-"+Tp])},[]),_be="beforeRead",Abe="read",Tbe="afterRead",kbe="beforeMain",Ebe="main",Lbe="afterMain",Pbe="beforeWrite",Dbe="write",Obe="afterWrite",Mbe=[_be,Abe,Tbe,kbe,Ebe,Lbe,Pbe,Dbe,Obe];function zo(e){return e?(e.nodeName||"").toLowerCase():null}function Ur(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Iu(e){var t=Ur(e).Element;return e instanceof t||e instanceof Element}function pi(e){var t=Ur(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Z4(e){if(typeof ShadowRoot>"u")return!1;var t=Ur(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Ibe(e){var t=e.state;Object.keys(t.elements).forEach(function(a){var s=t.styles[a]||{},r=t.attributes[a]||{},i=t.elements[a];!pi(i)||!zo(i)||(Object.assign(i.style,s),Object.keys(r).forEach(function(o){var l=r[o];l===!1?i.removeAttribute(o):i.setAttribute(o,l===!0?"":l)}))})}function $be(e){var t=e.state,a={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,a.popper),t.styles=a,t.elements.arrow&&Object.assign(t.elements.arrow.style,a.arrow),function(){Object.keys(t.elements).forEach(function(s){var r=t.elements[s],i=t.attributes[s]||{},o=Object.keys(t.styles.hasOwnProperty(s)?t.styles[s]:a[s]),l=o.reduce(function(c,u){return c[u]="",c},{});!pi(r)||!zo(r)||(Object.assign(r.style,l),Object.keys(i).forEach(function(c){r.removeAttribute(c)}))})}}const Rbe={name:"applyStyles",enabled:!0,phase:"write",fn:Ibe,effect:$be,requires:["computeStyles"]};function Po(e){return e.split("-")[0]}var Nu=Math.max,Hv=Math.min,If=Math.round;function Fk(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function vV(){return!/^((?!chrome|android).)*safari/i.test(Fk())}function $f(e,t,a){t===void 0&&(t=!1),a===void 0&&(a=!1);var s=e.getBoundingClientRect(),r=1,i=1;t&&pi(e)&&(r=e.offsetWidth>0&&If(s.width)/e.offsetWidth||1,i=e.offsetHeight>0&&If(s.height)/e.offsetHeight||1);var o=Iu(e)?Ur(e):window,l=o.visualViewport,c=!vV()&&a,u=(s.left+(c&&l?l.offsetLeft:0))/r,d=(s.top+(c&&l?l.offsetTop:0))/i,f=s.width/r,p=s.height/i;return{width:f,height:p,top:d,right:u+f,bottom:d+p,left:u,x:u,y:d}}function J4(e){var t=$f(e),a=e.offsetWidth,s=e.offsetHeight;return Math.abs(t.width-a)<=1&&(a=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:e.offsetLeft,y:e.offsetTop,width:a,height:s}}function wV(e,t){var a=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(a&&Z4(a)){var s=t;do{if(s&&e.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function ql(e){return Ur(e).getComputedStyle(e)}function zbe(e){return["table","td","th"].indexOf(zo(e))>=0}function Ad(e){return((Iu(e)?e.ownerDocument:e.document)||window.document).documentElement}function uj(e){return zo(e)==="html"?e:e.assignedSlot||e.parentNode||(Z4(e)?e.host:null)||Ad(e)}function Y6(e){return!pi(e)||ql(e).position==="fixed"?null:e.offsetParent}function Fbe(e){var t=/firefox/i.test(Fk()),a=/Trident/i.test(Fk());if(a&&pi(e)){var s=ql(e);if(s.position==="fixed")return null}var r=uj(e);for(Z4(r)&&(r=r.host);pi(r)&&["html","body"].indexOf(zo(r))<0;){var i=ql(r);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||t&&i.willChange==="filter"||t&&i.filter&&i.filter!=="none")return r;r=r.parentNode}return null}function Mx(e){for(var t=Ur(e),a=Y6(e);a&&zbe(a)&&ql(a).position==="static";)a=Y6(a);return a&&(zo(a)==="html"||zo(a)==="body"&&ql(a).position==="static")?t:a||Fbe(e)||t}function eP(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Jg(e,t,a){return Nu(e,Hv(t,a))}function Ube(e,t,a){var s=Jg(e,t,a);return s>a?a:s}function NV(){return{top:0,right:0,bottom:0,left:0}}function jV(e){return Object.assign({},NV(),e)}function CV(e,t){return t.reduce(function(a,s){return a[s]=e,a},{})}var Bbe=function(t,a){return t=typeof t=="function"?t(Object.assign({},a.rects,{placement:a.placement})):t,jV(typeof t!="number"?t:CV(t,Ox))};function Hbe(e){var t,a=e.state,s=e.name,r=e.options,i=a.elements.arrow,o=a.modifiersData.popperOffsets,l=Po(a.placement),c=eP(l),u=[xr,bi].indexOf(l)>=0,d=u?"height":"width";if(!(!i||!o)){var f=Bbe(r.padding,a),p=J4(i),x=c==="y"?pr:xr,y=c==="y"?yi:bi,N=a.rects.reference[d]+a.rects.reference[c]-o[c]-a.rects.popper[d],v=o[c]-a.rects.reference[c],j=Mx(i),w=j?c==="y"?j.clientHeight||0:j.clientWidth||0:0,S=N/2-v/2,_=f[x],E=w-p[d]-f[y],T=w/2-p[d]/2+S,A=Jg(_,T,E),L=c;a.modifiersData[s]=(t={},t[L]=A,t.centerOffset=A-T,t)}}function qbe(e){var t=e.state,a=e.options,s=a.element,r=s===void 0?"[data-popper-arrow]":s;r!=null&&(typeof r=="string"&&(r=t.elements.popper.querySelector(r),!r)||wV(t.elements.popper,r)&&(t.elements.arrow=r))}const Wbe={name:"arrow",enabled:!0,phase:"main",fn:Hbe,effect:qbe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Rf(e){return e.split("-")[1]}var Gbe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Vbe(e,t){var a=e.x,s=e.y,r=t.devicePixelRatio||1;return{x:If(a*r)/r||0,y:If(s*r)/r||0}}function Q6(e){var t,a=e.popper,s=e.popperRect,r=e.placement,i=e.variation,o=e.offsets,l=e.position,c=e.gpuAcceleration,u=e.adaptive,d=e.roundOffsets,f=e.isFixed,p=o.x,x=p===void 0?0:p,y=o.y,N=y===void 0?0:y,v=typeof d=="function"?d({x,y:N}):{x,y:N};x=v.x,N=v.y;var j=o.hasOwnProperty("x"),w=o.hasOwnProperty("y"),S=xr,_=pr,E=window;if(u){var T=Mx(a),A="clientHeight",L="clientWidth";if(T===Ur(a)&&(T=Ad(a),ql(T).position!=="static"&&l==="absolute"&&(A="scrollHeight",L="scrollWidth")),T=T,r===pr||(r===xr||r===bi)&&i===Tp){_=yi;var M=f&&T===E&&E.visualViewport?E.visualViewport.height:T[A];N-=M-s.height,N*=c?1:-1}if(r===xr||(r===pr||r===yi)&&i===Tp){S=bi;var F=f&&T===E&&E.visualViewport?E.visualViewport.width:T[L];x-=F-s.width,x*=c?1:-1}}var $=Object.assign({position:l},u&&Gbe),D=d===!0?Vbe({x,y:N},Ur(a)):{x,y:N};if(x=D.x,N=D.y,c){var q;return Object.assign({},$,(q={},q[_]=w?"0":"",q[S]=j?"0":"",q.transform=(E.devicePixelRatio||1)<=1?"translate("+x+"px, "+N+"px)":"translate3d("+x+"px, "+N+"px, 0)",q))}return Object.assign({},$,(t={},t[_]=w?N+"px":"",t[S]=j?x+"px":"",t.transform="",t))}function Ybe(e){var t=e.state,a=e.options,s=a.gpuAcceleration,r=s===void 0?!0:s,i=a.adaptive,o=i===void 0?!0:i,l=a.roundOffsets,c=l===void 0?!0:l,u={placement:Po(t.placement),variation:Rf(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Q6(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:c})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Q6(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const Qbe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Ybe,data:{}};var Xy={passive:!0};function Kbe(e){var t=e.state,a=e.instance,s=e.options,r=s.scroll,i=r===void 0?!0:r,o=s.resize,l=o===void 0?!0:o,c=Ur(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&u.forEach(function(d){d.addEventListener("scroll",a.update,Xy)}),l&&c.addEventListener("resize",a.update,Xy),function(){i&&u.forEach(function(d){d.removeEventListener("scroll",a.update,Xy)}),l&&c.removeEventListener("resize",a.update,Xy)}}const Xbe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Kbe,data:{}};var Zbe={left:"right",right:"left",bottom:"top",top:"bottom"};function nv(e){return e.replace(/left|right|bottom|top/g,function(t){return Zbe[t]})}var Jbe={start:"end",end:"start"};function K6(e){return e.replace(/start|end/g,function(t){return Jbe[t]})}function tP(e){var t=Ur(e),a=t.pageXOffset,s=t.pageYOffset;return{scrollLeft:a,scrollTop:s}}function nP(e){return $f(Ad(e)).left+tP(e).scrollLeft}function eve(e,t){var a=Ur(e),s=Ad(e),r=a.visualViewport,i=s.clientWidth,o=s.clientHeight,l=0,c=0;if(r){i=r.width,o=r.height;var u=vV();(u||!u&&t==="fixed")&&(l=r.offsetLeft,c=r.offsetTop)}return{width:i,height:o,x:l+nP(e),y:c}}function tve(e){var t,a=Ad(e),s=tP(e),r=(t=e.ownerDocument)==null?void 0:t.body,i=Nu(a.scrollWidth,a.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=Nu(a.scrollHeight,a.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),l=-s.scrollLeft+nP(e),c=-s.scrollTop;return ql(r||a).direction==="rtl"&&(l+=Nu(a.clientWidth,r?r.clientWidth:0)-i),{width:i,height:o,x:l,y:c}}function aP(e){var t=ql(e),a=t.overflow,s=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(a+r+s)}function SV(e){return["html","body","#document"].indexOf(zo(e))>=0?e.ownerDocument.body:pi(e)&&aP(e)?e:SV(uj(e))}function ep(e,t){var a;t===void 0&&(t=[]);var s=SV(e),r=s===((a=e.ownerDocument)==null?void 0:a.body),i=Ur(s),o=r?[i].concat(i.visualViewport||[],aP(s)?s:[]):s,l=t.concat(o);return r?l:l.concat(ep(uj(o)))}function Uk(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function nve(e,t){var a=$f(e,!1,t==="fixed");return a.top=a.top+e.clientTop,a.left=a.left+e.clientLeft,a.bottom=a.top+e.clientHeight,a.right=a.left+e.clientWidth,a.width=e.clientWidth,a.height=e.clientHeight,a.x=a.left,a.y=a.top,a}function X6(e,t,a){return t===yV?Uk(eve(e,a)):Iu(t)?nve(t,a):Uk(tve(Ad(e)))}function ave(e){var t=ep(uj(e)),a=["absolute","fixed"].indexOf(ql(e).position)>=0,s=a&&pi(e)?Mx(e):e;return Iu(s)?t.filter(function(r){return Iu(r)&&wV(r,s)&&zo(r)!=="body"}):[]}function sve(e,t,a,s){var r=t==="clippingParents"?ave(e):[].concat(t),i=[].concat(r,[a]),o=i[0],l=i.reduce(function(c,u){var d=X6(e,u,s);return c.top=Nu(d.top,c.top),c.right=Hv(d.right,c.right),c.bottom=Hv(d.bottom,c.bottom),c.left=Nu(d.left,c.left),c},X6(e,o,s));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function _V(e){var t=e.reference,a=e.element,s=e.placement,r=s?Po(s):null,i=s?Rf(s):null,o=t.x+t.width/2-a.width/2,l=t.y+t.height/2-a.height/2,c;switch(r){case pr:c={x:o,y:t.y-a.height};break;case yi:c={x:o,y:t.y+t.height};break;case bi:c={x:t.x+t.width,y:l};break;case xr:c={x:t.x-a.width,y:l};break;default:c={x:t.x,y:t.y}}var u=r?eP(r):null;if(u!=null){var d=u==="y"?"height":"width";switch(i){case Mf:c[u]=c[u]-(t[d]/2-a[d]/2);break;case Tp:c[u]=c[u]+(t[d]/2-a[d]/2);break}}return c}function kp(e,t){t===void 0&&(t={});var a=t,s=a.placement,r=s===void 0?e.placement:s,i=a.strategy,o=i===void 0?e.strategy:i,l=a.boundary,c=l===void 0?Cbe:l,u=a.rootBoundary,d=u===void 0?yV:u,f=a.elementContext,p=f===void 0?bg:f,x=a.altBoundary,y=x===void 0?!1:x,N=a.padding,v=N===void 0?0:N,j=jV(typeof v!="number"?v:CV(v,Ox)),w=p===bg?Sbe:bg,S=e.rects.popper,_=e.elements[y?w:p],E=sve(Iu(_)?_:_.contextElement||Ad(e.elements.popper),c,d,o),T=$f(e.elements.reference),A=_V({reference:T,element:S,placement:r}),L=Uk(Object.assign({},S,A)),M=p===bg?L:T,F={top:E.top-M.top+j.top,bottom:M.bottom-E.bottom+j.bottom,left:E.left-M.left+j.left,right:M.right-E.right+j.right},$=e.modifiersData.offset;if(p===bg&&$){var D=$[r];Object.keys(F).forEach(function(q){var G=[bi,yi].indexOf(q)>=0?1:-1,U=[pr,yi].indexOf(q)>=0?"y":"x";F[q]+=D[U]*G})}return F}function rve(e,t){t===void 0&&(t={});var a=t,s=a.placement,r=a.boundary,i=a.rootBoundary,o=a.padding,l=a.flipVariations,c=a.allowedAutoPlacements,u=c===void 0?bV:c,d=Rf(s),f=d?l?V6:V6.filter(function(y){return Rf(y)===d}):Ox,p=f.filter(function(y){return u.indexOf(y)>=0});p.length===0&&(p=f);var x=p.reduce(function(y,N){return y[N]=kp(e,{placement:N,boundary:r,rootBoundary:i,padding:o})[Po(N)],y},{});return Object.keys(x).sort(function(y,N){return x[y]-x[N]})}function ive(e){if(Po(e)===X4)return[];var t=nv(e);return[K6(e),t,K6(t)]}function ove(e){var t=e.state,a=e.options,s=e.name;if(!t.modifiersData[s]._skip){for(var r=a.mainAxis,i=r===void 0?!0:r,o=a.altAxis,l=o===void 0?!0:o,c=a.fallbackPlacements,u=a.padding,d=a.boundary,f=a.rootBoundary,p=a.altBoundary,x=a.flipVariations,y=x===void 0?!0:x,N=a.allowedAutoPlacements,v=t.options.placement,j=Po(v),w=j===v,S=c||(w||!y?[nv(v)]:ive(v)),_=[v].concat(S).reduce(function(Ne,he){return Ne.concat(Po(he)===X4?rve(t,{placement:he,boundary:d,rootBoundary:f,padding:u,flipVariations:y,allowedAutoPlacements:N}):he)},[]),E=t.rects.reference,T=t.rects.popper,A=new Map,L=!0,M=_[0],F=0;F<_.length;F++){var $=_[F],D=Po($),q=Rf($)===Mf,G=[pr,yi].indexOf(D)>=0,U=G?"width":"height",V=kp(t,{placement:$,boundary:d,rootBoundary:f,altBoundary:p,padding:u}),Z=G?q?bi:xr:q?yi:pr;E[U]>T[U]&&(Z=nv(Z));var Y=nv(Z),le=[];if(i&&le.push(V[D]<=0),l&&le.push(V[Z]<=0,V[Y]<=0),le.every(function(Ne){return Ne})){M=$,L=!1;break}A.set($,le)}if(L)for(var _e=y?3:1,te=function(he){var ve=_.find(function(ne){var Se=A.get(ne);if(Se)return Se.slice(0,he).every(function(de){return de})});if(ve)return M=ve,"break"},ae=_e;ae>0;ae--){var ye=te(ae);if(ye==="break")break}t.placement!==M&&(t.modifiersData[s]._skip=!0,t.placement=M,t.reset=!0)}}const lve={name:"flip",enabled:!0,phase:"main",fn:ove,requiresIfExists:["offset"],data:{_skip:!1}};function Z6(e,t,a){return a===void 0&&(a={x:0,y:0}),{top:e.top-t.height-a.y,right:e.right-t.width+a.x,bottom:e.bottom-t.height+a.y,left:e.left-t.width-a.x}}function J6(e){return[pr,bi,yi,xr].some(function(t){return e[t]>=0})}function cve(e){var t=e.state,a=e.name,s=t.rects.reference,r=t.rects.popper,i=t.modifiersData.preventOverflow,o=kp(t,{elementContext:"reference"}),l=kp(t,{altBoundary:!0}),c=Z6(o,s),u=Z6(l,r,i),d=J6(c),f=J6(u);t.modifiersData[a]={referenceClippingOffsets:c,popperEscapeOffsets:u,isReferenceHidden:d,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":f})}const dve={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:cve};function uve(e,t,a){var s=Po(e),r=[xr,pr].indexOf(s)>=0?-1:1,i=typeof a=="function"?a(Object.assign({},t,{placement:e})):a,o=i[0],l=i[1];return o=o||0,l=(l||0)*r,[xr,bi].indexOf(s)>=0?{x:l,y:o}:{x:o,y:l}}function mve(e){var t=e.state,a=e.options,s=e.name,r=a.offset,i=r===void 0?[0,0]:r,o=bV.reduce(function(d,f){return d[f]=uve(f,t.rects,i),d},{}),l=o[t.placement],c=l.x,u=l.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=u),t.modifiersData[s]=o}const fve={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:mve};function hve(e){var t=e.state,a=e.name;t.modifiersData[a]=_V({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const gve={name:"popperOffsets",enabled:!0,phase:"read",fn:hve,data:{}};function pve(e){return e==="x"?"y":"x"}function xve(e){var t=e.state,a=e.options,s=e.name,r=a.mainAxis,i=r===void 0?!0:r,o=a.altAxis,l=o===void 0?!1:o,c=a.boundary,u=a.rootBoundary,d=a.altBoundary,f=a.padding,p=a.tether,x=p===void 0?!0:p,y=a.tetherOffset,N=y===void 0?0:y,v=kp(t,{boundary:c,rootBoundary:u,padding:f,altBoundary:d}),j=Po(t.placement),w=Rf(t.placement),S=!w,_=eP(j),E=pve(_),T=t.modifiersData.popperOffsets,A=t.rects.reference,L=t.rects.popper,M=typeof N=="function"?N(Object.assign({},t.rects,{placement:t.placement})):N,F=typeof M=="number"?{mainAxis:M,altAxis:M}:Object.assign({mainAxis:0,altAxis:0},M),$=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,D={x:0,y:0};if(T){if(i){var q,G=_==="y"?pr:xr,U=_==="y"?yi:bi,V=_==="y"?"height":"width",Z=T[_],Y=Z+v[G],le=Z-v[U],_e=x?-L[V]/2:0,te=w===Mf?A[V]:L[V],ae=w===Mf?-L[V]:-A[V],ye=t.elements.arrow,Ne=x&&ye?J4(ye):{width:0,height:0},he=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:NV(),ve=he[G],ne=he[U],Se=Jg(0,A[V],Ne[V]),de=S?A[V]/2-_e-Se-ve-F.mainAxis:te-Se-ve-F.mainAxis,ke=S?-A[V]/2+_e+Se+ne+F.mainAxis:ae+Se+ne+F.mainAxis,Te=t.elements.arrow&&Mx(t.elements.arrow),pe=Te?_==="y"?Te.clientTop||0:Te.clientLeft||0:0,ze=(q=$?.[_])!=null?q:0,Pe=Z+de-ze-pe,We=Z+ke-ze,tt=Jg(x?Hv(Y,Pe):Y,Z,x?Nu(le,We):le);T[_]=tt,D[_]=tt-Z}if(l){var lt,Ie=_==="x"?pr:xr,rt=_==="x"?yi:bi,He=T[E],Ke=E==="y"?"height":"width",Je=He+v[Ie],Oe=He-v[rt],Ce=[pr,xr].indexOf(j)!==-1,fe=(lt=$?.[E])!=null?lt:0,ue=Ce?Je:He-A[Ke]-L[Ke]-fe+F.altAxis,H=Ce?He+A[Ke]+L[Ke]-fe-F.altAxis:Oe,K=x&&Ce?Ube(ue,He,H):Jg(x?ue:Je,He,x?H:Oe);T[E]=K,D[E]=K-He}t.modifiersData[s]=D}}const yve={name:"preventOverflow",enabled:!0,phase:"main",fn:xve,requiresIfExists:["offset"]};function bve(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function vve(e){return e===Ur(e)||!pi(e)?tP(e):bve(e)}function wve(e){var t=e.getBoundingClientRect(),a=If(t.width)/e.offsetWidth||1,s=If(t.height)/e.offsetHeight||1;return a!==1||s!==1}function Nve(e,t,a){a===void 0&&(a=!1);var s=pi(t),r=pi(t)&&wve(t),i=Ad(t),o=$f(e,r,a),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(s||!s&&!a)&&((zo(t)!=="body"||aP(i))&&(l=vve(t)),pi(t)?(c=$f(t,!0),c.x+=t.clientLeft,c.y+=t.clientTop):i&&(c.x=nP(i))),{x:o.left+l.scrollLeft-c.x,y:o.top+l.scrollTop-c.y,width:o.width,height:o.height}}function jve(e){var t=new Map,a=new Set,s=[];e.forEach(function(i){t.set(i.name,i)});function r(i){a.add(i.name);var o=[].concat(i.requires||[],i.requiresIfExists||[]);o.forEach(function(l){if(!a.has(l)){var c=t.get(l);c&&r(c)}}),s.push(i)}return e.forEach(function(i){a.has(i.name)||r(i)}),s}function Cve(e){var t=jve(e);return Mbe.reduce(function(a,s){return a.concat(t.filter(function(r){return r.phase===s}))},[])}function Sve(e){var t;return function(){return t||(t=new Promise(function(a){Promise.resolve().then(function(){t=void 0,a(e())})})),t}}function _ve(e){var t=e.reduce(function(a,s){var r=a[s.name];return a[s.name]=r?Object.assign({},r,s,{options:Object.assign({},r.options,s.options),data:Object.assign({},r.data,s.data)}):s,a},{});return Object.keys(t).map(function(a){return t[a]})}var eR={placement:"bottom",modifiers:[],strategy:"absolute"};function tR(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return!t.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function Ave(e){e===void 0&&(e={});var t=e,a=t.defaultModifiers,s=a===void 0?[]:a,r=t.defaultOptions,i=r===void 0?eR:r;return function(l,c,u){u===void 0&&(u=i);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},eR,i),modifiersData:{},elements:{reference:l,popper:c},attributes:{},styles:{}},f=[],p=!1,x={state:d,setOptions:function(j){var w=typeof j=="function"?j(d.options):j;N(),d.options=Object.assign({},i,d.options,w),d.scrollParents={reference:Iu(l)?ep(l):l.contextElement?ep(l.contextElement):[],popper:ep(c)};var S=Cve(_ve([].concat(s,d.options.modifiers)));return d.orderedModifiers=S.filter(function(_){return _.enabled}),y(),x.update()},forceUpdate:function(){if(!p){var j=d.elements,w=j.reference,S=j.popper;if(tR(w,S)){d.rects={reference:Nve(w,Mx(S),d.options.strategy==="fixed"),popper:J4(S)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(F){return d.modifiersData[F.name]=Object.assign({},F.data)});for(var _=0;_<d.orderedModifiers.length;_++){if(d.reset===!0){d.reset=!1,_=-1;continue}var E=d.orderedModifiers[_],T=E.fn,A=E.options,L=A===void 0?{}:A,M=E.name;typeof T=="function"&&(d=T({state:d,options:L,name:M,instance:x})||d)}}}},update:Sve(function(){return new Promise(function(v){x.forceUpdate(),v(d)})}),destroy:function(){N(),p=!0}};if(!tR(l,c))return x;x.setOptions(u).then(function(v){!p&&u.onFirstUpdate&&u.onFirstUpdate(v)});function y(){d.orderedModifiers.forEach(function(v){var j=v.name,w=v.options,S=w===void 0?{}:w,_=v.effect;if(typeof _=="function"){var E=_({state:d,name:j,instance:x,options:S}),T=function(){};f.push(E||T)}})}function N(){f.forEach(function(v){return v()}),f=[]}return x}}var Tve=[Xbe,gve,Qbe,Rbe,fve,lve,yve,Wbe,dve],kve=Ave({defaultModifiers:Tve});function nR(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function Eve(e){return typeof e=="function"?e():e}const Lve=h.forwardRef(function(t,a){const{children:s,container:r,disablePortal:i=!1}=t,[o,l]=h.useState(null),c=Ro(h.isValidElement(s)?J9(s):null,a);if(is(()=>{i||l(Eve(r)||document.body)},[r,i]),is(()=>{if(o&&!i)return nR(a,o),()=>{nR(a,null)}},[a,o,i]),i){if(h.isValidElement(s)){const u={ref:c};return h.cloneElement(s,u)}return s}return o&&Hi.createPortal(s,o)});function Pve(e){return Ya("MuiPopper",e)}Aa("MuiPopper",["root"]);function Dve(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function Bk(e){return typeof e=="function"?e():e}function Ove(e){return e.nodeType!==void 0}const Mve=e=>{const{classes:t}=e;return Va({root:["root"]},Pve,t)},Ive={},$ve=h.forwardRef(function(t,a){const{anchorEl:s,children:r,direction:i,disablePortal:o,modifiers:l,open:c,placement:u,popperOptions:d,popperRef:f,slotProps:p={},slots:x={},TransitionProps:y,ownerState:N,...v}=t,j=h.useRef(null),w=Ro(j,a),S=h.useRef(null),_=Ro(S,f),E=h.useRef(_);is(()=>{E.current=_},[_]),h.useImperativeHandle(f,()=>S.current,[]);const T=Dve(u,i),[A,L]=h.useState(T),[M,F]=h.useState(Bk(s));h.useEffect(()=>{S.current&&S.current.forceUpdate()}),h.useEffect(()=>{s&&F(Bk(s))},[s]),is(()=>{if(!M||!c)return;const U=Y=>{L(Y.placement)};let V=[{name:"preventOverflow",options:{altBoundary:o}},{name:"flip",options:{altBoundary:o}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:Y})=>{U(Y)}}];l!=null&&(V=V.concat(l)),d&&d.modifiers!=null&&(V=V.concat(d.modifiers));const Z=kve(M,j.current,{placement:T,...d,modifiers:V});return E.current(Z),()=>{Z.destroy(),E.current(null)}},[M,o,l,c,d,T]);const $={placement:A};y!==null&&($.TransitionProps=y);const D=Mve(t),q=x.root??"div",G=zl({elementType:q,externalSlotProps:p.root,externalForwardedProps:v,additionalProps:{role:"tooltip",ref:w},ownerState:t,className:D.root});return n.jsx(q,{...G,children:typeof r=="function"?r($):r})}),Rve=h.forwardRef(function(t,a){const{anchorEl:s,children:r,container:i,direction:o="ltr",disablePortal:l=!1,keepMounted:c=!1,modifiers:u,open:d,placement:f="bottom",popperOptions:p=Ive,popperRef:x,style:y,transition:N=!1,slotProps:v={},slots:j={},...w}=t,[S,_]=h.useState(!0),E=()=>{_(!1)},T=()=>{_(!0)};if(!c&&!d&&(!N||S))return null;let A;if(i)A=i;else if(s){const F=Bk(s);A=F&&Ove(F)?hk(F).body:hk(null).body}const L=!d&&c&&(!N||S)?"none":void 0,M=N?{in:d,onEnter:E,onExited:T}:void 0;return n.jsx(Lve,{disablePortal:l,container:A,children:n.jsx($ve,{anchorEl:s,direction:o,disablePortal:l,modifiers:u,ref:a,open:N?!S:d,placement:f,popperOptions:p,popperRef:x,slotProps:v,slots:j,...w,style:{position:"fixed",top:0,left:0,display:L,...y},TransitionProps:M,children:r})})}),zve=dn(Rve,{name:"MuiPopper",slot:"Root"})({}),Fve=h.forwardRef(function(t,a){const s=px(),r=Nd({props:t,name:"MuiPopper"}),{anchorEl:i,component:o,components:l,componentsProps:c,container:u,disablePortal:d,keepMounted:f,modifiers:p,open:x,placement:y,popperOptions:N,popperRef:v,transition:j,slots:w,slotProps:S,..._}=r,E=w?.root??l?.Root,T={anchorEl:i,container:u,disablePortal:d,keepMounted:f,modifiers:p,open:x,placement:y,popperOptions:N,popperRef:v,transition:j,..._};return n.jsx(zve,{as:o,direction:s?"rtl":"ltr",slots:{root:E},slotProps:S??c,...T,ref:a})});function Uve(e){const{children:t,defer:a=!1,fallback:s=null}=e,[r,i]=h.useState(!1);return is(()=>{a||i(!0)},[a]),h.useEffect(()=>{a&&i(!0)},[a]),r?t:s}function aR(e){let t,a;const s=()=>{a=null,e(...t)};function r(...i){t=i,a||(a=requestAnimationFrame(s))}return r.clear=()=>{a&&(cancelAnimationFrame(a),a=null)},r}function Bve(){const e=Yn(),t=Ht(e,SG),a=Ht(e,Go);return t!==void 0?"polar":a!==void 0?"cartesian":"none"}const Hve=["trigger","position","anchor","classes","children"],sR=()=>!1;function qve(e,t,a){return a?sR:e==="item"?npe:t==="polar"?vbe:t==="cartesian"?ope:sR}const Wve=dn(Fve,{name:"MuiChartsTooltip",slot:"Root"})(({theme:e})=>({pointerEvents:"none",zIndex:e.zIndex.modal}));function Gve(e){const t=_i({props:e,name:"MuiChartsTooltipContainer"}),{trigger:a="axis",position:s,anchor:r="pointer",classes:i,children:o}=t,l=pn(t,Hve),c=z4(),u=dj(i),d=gbe(),f=ybe(),p=h.useRef(null),x=_N(()=>({x:0,y:0})),y=Bve(),N=Yn(),v=Ht(N,gpe),j=Ht(N,qve(a,y,v)),S=Ht(N,Ax)==="keyboard"?"node":r,_=Ht(N,a==="item"&&S==="node"?ape:()=>null,s);h.useEffect(()=>{const M=c.current;if(M===null)return()=>{};if(_!==null){const D=aR(()=>{x.current={x:M.getBoundingClientRect().left+(_?.x??0),y:M.getBoundingClientRect().top+(_?.y??0)},p.current?.update()});return D(),()=>D.clear()}const F=aR((D,q)=>{x.current={x:D,y:q},p.current?.update()}),$=D=>{F(D.clientX,D.clientY)};return M.addEventListener("pointerdown",$),M.addEventListener("pointermove",$),M.addEventListener("pointerenter",$),()=>{M.removeEventListener("pointerdown",$),M.removeEventListener("pointermove",$),M.removeEventListener("pointerenter",$),F.clear()}},[c,x,_]);const E=h.useMemo(()=>({getBoundingClientRect:()=>({x:x.current.x,y:x.current.y,top:x.current.y,left:x.current.x,right:x.current.x,bottom:x.current.y,width:0,height:0,toJSON:()=>""})}),[x]),T=d?.pointerType==="mouse"||f,A=d?.pointerType==="touch"||!f,L=h.useMemo(()=>[{name:"offset",options:{offset:()=>A?[0,64]:[0,8]}},...T?[]:[{name:"flip",options:{fallbackPlacements:["top-end","top-start","bottom-end","bottom"]}}],{name:"preventOverflow",options:{altAxis:!0}}],[T,A]);return a==="none"?null:n.jsx(Uve,{children:j&&n.jsx(Wve,Ye({},l,{className:u?.root,open:j,placement:l.placement??s??(T?"right-start":"top"),popperRef:p,anchorEl:E,modifiers:L,children:o}))})}function Vve(e){const{classes:t,trigger:a="axis"}=e,s=dj(t);return n.jsx(Gve,Ye({},e,{classes:t,children:a==="axis"?n.jsx(jbe,{classes:s}):n.jsx(mbe,{classes:s})}))}const Yve=e=>({type:"series",color:e.color,label:e.label,seriesId:e.seriesId,itemId:e.itemId});function Qve(e){return Ya("MuiChartsLegend",e)}const Kve=e=>{const{classes:t,direction:a}=e;return Va({root:["root",a],item:["item"],mark:["mark"],label:["label"],series:["series"]},Qve,t)},rR=Aa("MuiChartsLegend",["root","item","series","mark","label","vertical","horizontal"]),Xve=["slots","slotProps"],Zve=["ownerState"],Jve=(e,t,a,s)=>{function r(i,o){const l=_i({props:i,name:e}),c=typeof a.defaultProps=="function"?a.defaultProps(l):a.defaultProps??{},u=Pu(c,l),d=u,{slots:f,slotProps:p}=d,x=pn(d,Xve),y=Wo(),N=a.classesResolver?.(u,y),v=f?.[t]??s,j=a.propagateSlots&&!f?.[t],w=zl({elementType:v,externalSlotProps:p?.[t],additionalProps:Ye({},x,{classes:N},j&&{slots:f,slotProps:p}),ownerState:{}}),S=pn(w,Zve),_=Ye({},S);for(const E of a.omitProps??[])delete _[E];return n.jsx(v,Ye({},_,{ref:o}))}return h.forwardRef(r)};function ewe(e){return Ya("MuiChartsLabel",e)}Aa("MuiChartsLabel",["root"]);const twe=e=>Va({root:["root"]},ewe,e.classes),nwe=["children","className","classes"],awe=uV("MuiChartsLabel",{classesResolver:twe},function(t,a){const{children:s,className:r,classes:i}=t,o=pn(t,nwe);return n.jsx("span",Ye({className:Mt(i?.root,r),ref:a},o,{children:s}))}),swe=["direction","onItemClick","className","classes"],rwe=dn("ul",{name:"MuiChartsLegend",slot:"Root"})(({ownerState:e,theme:t})=>Ye({},t.typography.caption,{color:(t.vars||t).palette.text.primary,lineHeight:"100%",display:"flex",flexDirection:e.direction==="vertical"?"column":"row",alignItems:e.direction==="vertical"?void 0:"center",flexShrink:0,gap:t.spacing(2),listStyleType:"none",paddingInlineStart:0,marginBlock:t.spacing(1),marginInline:t.spacing(1),flexWrap:"wrap",li:{display:e.direction==="horizontal"?"inline-flex":void 0},[`button.${rR.series}`]:{background:"none",border:"none",padding:0,fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",letterSpacing:"inherit",color:"inherit"},[`& .${rR.series}`]:{display:e.direction==="vertical"?"flex":"inline-flex",alignItems:"center",gap:t.spacing(1)},gridArea:"legend"})),iwe=Jve("MuiChartsLegend","legend",{defaultProps:{direction:"horizontal"},omitProps:["position"],classesResolver:Kve},h.forwardRef(function(t,a){const s=Sxe(),{onItemClick:r,className:i,classes:o}=t,l=pn(t,swe);if(s.items.length===0)return null;const c=r?"button":"div";return n.jsx(rwe,Ye({className:Mt(o?.root,i),ref:a},l,{ownerState:t,children:s.items.map((u,d)=>n.jsx("li",{className:o?.item,"data-series":u.id,children:n.jsxs(c,{className:o?.series,role:r?"button":void 0,type:r?"button":void 0,onClick:r?(f=>r(f,Yve(u),d)):void 0,children:[n.jsx(Bv,{className:o?.mark,color:u.color,type:u.markType}),n.jsx(awe,{className:o?.label,children:u.label})]})},u.id))}))}));function owe(e){return Ya("MuiChartsAxisHighlight",e)}Aa("MuiChartsAxisHighlight",["root"]);const qv=dn("path",{name:"MuiChartsAxisHighlight",slot:"Root"})(({theme:e})=>({pointerEvents:"none",variants:[{props:{axisHighlight:"band"},style:Ye({fill:"white",fillOpacity:.1},e.applyStyles("light",{fill:"gray"}))},{props:{axisHighlight:"line"},style:Ye({strokeDasharray:"5 2",stroke:"#ffffff"},e.applyStyles("light",{stroke:"#000000"}))}]}));function lwe(e){const{type:t,classes:a}=e,{left:s,width:r}=Ti(),i=Yn(),o=Ht(i,xpe),l=Ht(i,Zs);return o.length===0?null:o.map(({axisId:c,value:u})=>{const f=l.axis[c].scale,p=sh(f),x=t==="band"&&u!==null&&vs(f);return n.jsxs(h.Fragment,{children:[x&&f(u)!==void 0&&n.jsx(qv,{d:`M ${s} ${f(u)-(f.step()-f.bandwidth())/2} l 0 ${f.step()} l ${r} 0 l 0 ${-f.step()} Z`,className:a.root,ownerState:{axisHighlight:"band"}}),t==="line"&&u!==null&&n.jsx(qv,{d:`M ${s} ${p(u)} L ${s+r} ${p(u)}`,className:a.root,ownerState:{axisHighlight:"line"}})]},`${c}-${u}`)})}function cwe(e){const{type:t,classes:a}=e,{top:s,height:r}=Ti(),i=Yn(),o=Ht(i,ppe),l=Ht(i,Xs);return o.length===0?null:o.map(({axisId:c,value:u})=>{const f=l.axis[c].scale,p=sh(f),x=t==="band"&&u!==null&&vs(f);return n.jsxs(h.Fragment,{children:[x&&f(u)!==void 0&&n.jsx(qv,{d:`M ${f(u)-(f.step()-f.bandwidth())/2} ${s} l ${f.step()} 0 l 0 ${r} l ${-f.step()} 0 Z`,className:a.root,ownerState:{axisHighlight:"band"}}),t==="line"&&u!==null&&n.jsx(qv,{d:`M ${p(u)} ${s} L ${p(u)} ${s+r}`,className:a.root,ownerState:{axisHighlight:"line"}})]},`${c}-${u}`)})}const dwe=()=>Va({root:["root"]},owe);function uwe(e){const{x:t,y:a}=e,s=dwe();return n.jsxs(h.Fragment,{children:[t&&t!=="none"&&n.jsx(cwe,{type:t,classes:s}),a&&a!=="none"&&n.jsx(lwe,{type:a,classes:s})]})}function mwe(e){const{id:t,offset:a}=e,{left:s,top:r,width:i,height:o}=Ti(),l=Ye({top:0,right:0,bottom:0,left:0},a);return n.jsx("clipPath",{id:t,children:n.jsx("rect",{x:s-l.left,y:r-l.top,width:i+l.left+l.right,height:o+l.top+l.bottom})})}const fwe=parseInt(h.version,10),hwe=["x","y","id","classes","color","shape"];function gwe(e){return Ya("MuiHighlightElement",e)}Aa("MuiHighlightElement",["root"]);const pwe=e=>{const{classes:t,id:a}=e,s={root:["root",`series-${a}`]};return Va(s,gwe,t)};function xwe(e){const{x:t,y:a,color:s,shape:r}=e,i=pn(e,hwe),o=pwe(e),l=r==="circle"?"circle":"path",c=r==="circle"?{cx:0,cy:0,r:i.r===void 0?5:i.r}:{d:D4(nG[HG(r)])()},u=fwe>18?{transformOrigin:`${t} ${a}`}:{"transform-origin":`${t} ${a}`};return n.jsx(l,Ye({pointerEvents:"none",className:o.root,transform:`translate(${t} ${a})`,fill:s},u,c,i))}const ywe=["slots","slotProps"];function bwe(e){const{slots:t,slotProps:a}=e,s=pn(e,ywe),r=Px(),{xAxis:i,xAxisIds:o}=wr(),{yAxis:l,yAxisIds:c}=Nr(),{instance:u}=Gr(),d=Yn(),f=Ht(d,OW);if(f.length===0||r===void 0)return null;const{series:p,stackingGroups:x}=r,y=o[0],N=c[0],v=t?.lineHighlight??xwe;return n.jsx("g",Ye({},s,{children:f.flatMap(({dataIndex:j,axisId:w})=>x.flatMap(({ids:S})=>S.flatMap(_=>{const{xAxisId:E=y,yAxisId:T=N,stackedData:A,data:L,disableHighlight:M,shape:F="circle"}=p[_];if(M||L[j]==null||w!==E)return null;const $=sh(i[E].scale),D=l[T].scale,q=i[E].data;if(q===void 0)throw new Error(`MUI X Charts: ${E===TN?"The first `xAxis`":`The x-axis with id "${E}"`} should have data property to be able to display a line plot.`);const G=$(q[j]),U=D(A[j][1]);if(!u.isPointInside(G,U))return null;const V=q4(p[_],i[E],l[T]);return n.jsx(v,Ye({id:_,color:V(j),x:G,y:U,shape:F},a?.lineHighlight),`${_}`)})))}))}function vwe(e){return Ya("MuiChartsGrid",e)}const iR=Aa("MuiChartsGrid",["root","line","horizontalLine","verticalLine"]),wwe=dn("g",{name:"MuiChartsGrid",slot:"Root",overridesResolver:(e,t)=>[{[`&.${iR.verticalLine}`]:t.verticalLine},{[`&.${iR.horizontalLine}`]:t.horizontalLine},t.root]})({}),AV=dn("line",{name:"MuiChartsGrid",slot:"Line"})(({theme:e})=>({stroke:(e.vars||e).palette.divider,shapeRendering:"crispEdges",strokeWidth:1}));function Nwe(e){const{instance:t}=Gr(),{axis:a,start:s,end:r,classes:i}=e,{scale:o,tickNumber:l,tickInterval:c}=a,u=lj({scale:o,tickNumber:l,tickInterval:c,direction:"x"});return n.jsx(h.Fragment,{children:u.map(({value:d,offset:f})=>t.isXInside(f)?n.jsx(AV,{y1:s,y2:r,x1:f,x2:f,className:i.verticalLine},`vertical-${d?.getTime?.()??d}`):null)})}function jwe(e){const{instance:t}=Gr(),{axis:a,start:s,end:r,classes:i}=e,{scale:o,tickNumber:l,tickInterval:c}=a,u=lj({scale:o,tickNumber:l,tickInterval:c,direction:"y"});return n.jsx(h.Fragment,{children:u.map(({value:d,offset:f})=>t.isYInside(f)?n.jsx(AV,{y1:f,y2:f,x1:s,x2:r,className:i.horizontalLine},`horizontal-${d?.getTime?.()??d}`):null)})}const Cwe=["vertical","horizontal"],Swe=({classes:e})=>Va({root:["root"],verticalLine:["line","verticalLine"],horizontalLine:["line","horizontalLine"]},vwe,e);function _we(e){const t=_i({props:e,name:"MuiChartsGrid"}),a=Ti(),{vertical:s,horizontal:r}=t,i=pn(t,Cwe),{xAxis:o,xAxisIds:l}=wr(),{yAxis:c,yAxisIds:u}=Nr(),d=Swe(t),f=c[u[0]],p=o[l[0]];return n.jsxs(wwe,Ye({},i,{className:d.root,children:[s&&n.jsx(Nwe,{axis:p,start:a.top,end:a.height+a.top,classes:d}),r&&n.jsx(jwe,{axis:f,start:a.left,end:a.width+a.left,classes:d})]}))}const Awe=["message"],Twe=dn("text")(({theme:e})=>Ye({},e.typography.body2,{stroke:"none",fill:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges",textAnchor:"middle",dominantBaseline:"middle"}));function kwe(e){const{message:t}=e,a=pn(e,Awe),{top:s,left:r,height:i,width:o}=Ti(),{localeText:l}=IG();return n.jsx(Twe,Ye({x:r+o/2,y:s+i/2},a,{children:t??l.loading}))}const Ewe=["message"],Lwe=dn("text")(({theme:e})=>Ye({},e.typography.body2,{stroke:"none",fill:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges",textAnchor:"middle",dominantBaseline:"middle"}));function Pwe(e){const{message:t}=e,a=pn(e,Ewe),{top:s,left:r,height:i,width:o}=Ti(),{localeText:l}=IG();return n.jsx(Lwe,Ye({x:r+o/2,y:s+i/2},a,{children:t??l.noData}))}function Dwe(){const e=aj();return Object.values(e).every(t=>{if(!t)return!0;const{series:a,seriesOrder:s}=t;return s.every(r=>{const i=a[r];return i.type==="sankey"?i.data.links.length===0:i.data.length===0})})}function Owe(e){const t=Dwe();if(e.loading){const a=e.slots?.loadingOverlay??kwe;return n.jsx(a,Ye({},e.slotProps?.loadingOverlay))}if(t){const a=e.slots?.noDataOverlay??Pwe;return n.jsx(a,Ye({},e.slotProps?.noDataOverlay))}return null}const Mwe=[kx,Tx,Cx,nh,Ex,VN],Iwe=["xAxis","yAxis","series","width","height","margin","colors","dataset","sx","onAreaClick","onLineClick","onMarkClick","axisHighlight","disableLineItemHighlight","hideLegend","grid","children","slots","slotProps","skipAnimation","loading","highlightedItem","onHighlightChange","className","showToolbar","brushConfig"],$we=e=>{const{xAxis:t,yAxis:a,series:s,width:r,height:i,margin:o,colors:l,dataset:c,sx:u,onAreaClick:d,onLineClick:f,onMarkClick:p,axisHighlight:x,disableLineItemHighlight:y,grid:N,children:v,slots:j,slotProps:w,skipAnimation:S,loading:_,highlightedItem:E,onHighlightChange:T,className:A,brushConfig:L}=e,M=pn(e,Iwe),$=`${NN()}-clip-path`,D=h.useMemo(()=>s.map(ve=>Ye({disableHighlight:!!y,type:"line"},ve)),[y,s]),q=Ye({},M,{series:D,width:r,height:i,margin:o,colors:l,dataset:c,xAxis:t??[{id:TN,scaleType:"point",data:Array.from({length:Math.max(...s.map(ve=>(ve.data??c??[]).length))},(ve,ne)=>ne)}],yAxis:a,highlightedItem:E,onHighlightChange:T,disableAxisListener:w?.tooltip?.trigger!=="axis"&&x?.x==="none"&&x?.y==="none",className:A,skipAnimation:S,brushConfig:L,plugins:Mwe}),G={vertical:N?.vertical,horizontal:N?.horizontal},U={clipPath:`url(#${$})`},V={id:$},Z={slots:j,slotProps:w,onItemClick:d},Y={slots:j,slotProps:w,onItemClick:f},le={slots:j,slotProps:w,onItemClick:p,skipAnimation:S},_e={slots:j,slotProps:w,loading:_},te={slots:j,slotProps:w},ae=Ye({x:"line"},x),ye={slots:j,slotProps:w},Ne={slots:j,slotProps:w};return{chartsWrapperProps:{sx:u,legendPosition:e.slotProps?.legend?.position,legendDirection:e.slotProps?.legend?.direction,hideLegend:e.hideLegend??!1},chartContainerProps:q,gridProps:G,clipPathProps:V,clipPathGroupProps:U,areaPlotProps:Z,linePlotProps:Y,markPlotProps:le,overlayProps:_e,chartsAxisProps:te,axisHighlightProps:ae,lineHighlightPlotProps:ye,legendProps:Ne,children:v}};function Rwe(e,t,a,s,r,i,o,l,c,u,d,f=1/0,p=1){const x=s.copy(),y=r.copy();x.range([0,1]),y.range([0,1]);const N=function(L){const M=x(a[L].x),F=y(a[L].y);return M>=i&&M<=o&&F>=l&&F<=c},v=s.range()[1]-s.range()[0],j=r.range()[1]-r.range()[0],w=v*v,S=j*j;function _(A,L){return w*A*A+S*L*L}const E=x(oR(s,u,A=>a[A]?.x)),T=y(oR(r,d,A=>a[A]?.y));return e.neighbors(E,T,p,f!=null?f*f:1/0,N,_)}function oR(e,t,a){if(vs(e)){const s=e.bandwidth()===0?Math.floor((t-Math.min(...e.range())+e.step()/2)/e.step()):Math.floor((t-Math.min(...e.range()))/e.step());return a(s)}return e.invert(t)}const mj=({svgRef:e,params:t,store:a,instance:s})=>{const{disableVoronoi:r,voronoiMaxRadius:i,onItemClick:o}=t,l=Ht(a,vr),{axis:c,axisIds:u}=Ht(a,Xs),{axis:d,axisIds:f}=Ht(a,Zs),p=Ht(a,mW),{series:x,seriesOrder:y}=Ht(a,ya)?.scatter??{},N=Ht(a,p?Uge:Bge),v=u[0],j=f[0];is(()=>{a.set("voronoi",{isVoronoiEnabled:!r})},[a,r]),h.useEffect(()=>{if(e.current===null||r)return;const _=e.current;function E(G){const U=_p(_,G);if(!s.isPointInside(U.x,U.y))return"outside-chart";let V;for(const Z of y??[]){const Y=(x??{})[Z],le=N.get(Z);if(!le)continue;const _e=Y.xAxisId??v,te=Y.yAxisId??j,ae=A6(a.getSnapshot(),_e),ye=A6(a.getSnapshot(),te),Ne=i==="item"?Y.markerSize:i,he=(ae?.start??0)/100,ve=(ae?.end??100)/100,ne=(ye?.start??0)/100,Se=(ye?.end??100)/100,de=c[_e].scale,ke=d[te].scale,Te=Rwe(le,l,Y.data,de,ke,he,ve,ne,Se,U.x,U.y,Ne)[0];if(Te===void 0)continue;const pe=Y.data[Te],ze=de(pe.x),Pe=ke(pe.y),We=(ze-U.x)**2+(Pe-U.y)**2;(V===void 0||We<V.distanceSq)&&(V={dataIndex:Te,seriesId:Z,distanceSq:We})}return V===void 0?"no-point-found":{seriesId:V.seriesId,dataIndex:V.dataIndex}}const T=s.addInteractionListener("moveEnd",G=>{G.detail.activeGestures.pan||(s.cleanInteraction?.(),s.clearHighlight?.())}),A=s.addInteractionListener("panEnd",G=>{G.detail.activeGestures.move||(s.cleanInteraction?.(),s.clearHighlight?.())}),L=s.addInteractionListener("quickPressEnd",G=>{!G.detail.activeGestures.move&&!G.detail.activeGestures.pan&&(s.cleanInteraction?.(),s.clearHighlight?.())}),M=G=>{const U=E(G.detail.srcEvent);if(U==="outside-chart"){s.cleanInteraction?.(),s.clearHighlight?.();return}if(U==="outside-voronoi-max-radius"||U==="no-point-found"){s.removeItemInteraction?.(),s.clearHighlight?.();return}const{seriesId:V,dataIndex:Z}=U;s.setItemInteraction?.({type:"scatter",seriesId:V,dataIndex:Z},{interaction:"pointer"}),s.setHighlight?.({seriesId:V,dataIndex:Z})},F=s.addInteractionListener("tap",G=>{const U=E(G.detail.srcEvent);if(typeof U!="string"&&o){const{seriesId:V,dataIndex:Z}=U;o(G.detail.srcEvent,{type:"scatter",seriesId:V,dataIndex:Z})}}),$=s.addInteractionListener("move",M),D=s.addInteractionListener("pan",M),q=s.addInteractionListener("quickPress",M);return()=>{F.cleanup(),$.cleanup(),T.cleanup(),D.cleanup(),A.cleanup(),q.cleanup(),L.cleanup()}},[e,d,c,i,o,r,l,s,y,x,N,v,j,a]);const w=ps(()=>{a.set("voronoi",{isVoronoiEnabled:!0})}),S=ps(()=>{a.set("voronoi",{isVoronoiEnabled:!1})});return{instance:{enableVoronoi:w,disableVoronoi:S}}};mj.getDefaultizedParams=({params:e})=>Ye({},e,{disableVoronoi:e.disableVoronoi??!e.series.some(t=>t.type==="scatter")});mj.getInitialState=e=>({voronoi:{isVoronoiEnabled:!e.disableVoronoi}});mj.params={disableVoronoi:!0,voronoiMaxRadius:!0,onItemClick:!0};const TV=[kx,Tx,Cx,nh,Ex,mj,VN],zwe=["width","height","margin","children","series","colors","dataset","desc","onAxisClick","highlightedAxis","onHighlightedAxisChange","disableVoronoi","voronoiMaxRadius","onItemClick","disableAxisListener","highlightedItem","onHighlightChange","sx","title","xAxis","yAxis","zAxis","rotationAxis","radiusAxis","skipAnimation","seriesConfig","plugins","localeText","slots","slotProps","experimentalFeatures","enableKeyboardNavigation","brushConfig"],Fwe=(e,t)=>{const a=e,{width:s,height:r,margin:i,children:o,series:l,colors:c,dataset:u,desc:d,onAxisClick:f,highlightedAxis:p,onHighlightedAxisChange:x,disableVoronoi:y,voronoiMaxRadius:N,onItemClick:v,disableAxisListener:j,highlightedItem:w,onHighlightChange:S,sx:_,title:E,xAxis:T,yAxis:A,zAxis:L,rotationAxis:M,radiusAxis:F,skipAnimation:$,seriesConfig:D,plugins:q,localeText:G,slots:U,slotProps:V,experimentalFeatures:Z,enableKeyboardNavigation:Y,brushConfig:le}=a,_e=pn(a,zwe),te=Ye({title:E,desc:d,sx:_,ref:t},_e);return{chartDataProviderProps:{margin:i,series:l,colors:c,dataset:u,disableAxisListener:j,highlightedItem:w,onHighlightChange:S,onAxisClick:f,highlightedAxis:p,onHighlightedAxisChange:x,disableVoronoi:y,voronoiMaxRadius:N,onItemClick:v,xAxis:T,yAxis:A,zAxis:L,rotationAxis:M,radiusAxis:F,skipAnimation:$,width:s,height:r,localeText:G,seriesConfig:D,experimentalFeatures:Z,enableKeyboardNavigation:Y,brushConfig:le,plugins:q??TV,slots:U,slotProps:V},chartsSurfaceProps:te,children:o}};function lR(e){try{return e.matches(":focus-visible")}catch{}return!1}class Wv{static create(){return new Wv}static use(){const t=_N(Wv.create).current,[a,s]=h.useState(!1);return t.shouldMount=a,t.setShouldMount=s,h.useEffect(t.mountEffect,[a]),t}constructor(){this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=Bwe(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}mountEffect=()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())};start(...t){this.mount().then(()=>this.ref.current?.start(...t))}stop(...t){this.mount().then(()=>this.ref.current?.stop(...t))}pulsate(...t){this.mount().then(()=>this.ref.current?.pulsate(...t))}}function Uwe(){return Wv.use()}function Bwe(){let e,t;const a=new Promise((s,r)=>{e=s,t=r});return a.resolve=e,a.reject=t,a}class sP{static create(){return new sP}currentId=null;start(t,a){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,a()},t)}clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)};disposeEffect=()=>this.clear}function Hwe(){const e=_N(sP.create).current;return rq(e.disposeEffect),e}function qwe(e){const{className:t,classes:a,pulsate:s=!1,rippleX:r,rippleY:i,rippleSize:o,in:l,onExited:c,timeout:u}=e,[d,f]=h.useState(!1),p=Mt(t,a.ripple,a.rippleVisible,s&&a.ripplePulsate),x={width:o,height:o,top:-(o/2)+i,left:-(o/2)+r},y=Mt(a.child,d&&a.childLeaving,s&&a.childPulsate);return!l&&!d&&f(!0),h.useEffect(()=>{if(!l&&c!=null){const N=setTimeout(c,u);return()=>{clearTimeout(N)}}},[c,l,u]),n.jsx("span",{className:p,style:x,children:n.jsx("span",{className:y})})}const di=Aa("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),Hk=550,Wwe=80,Gwe=gx`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,Vwe=gx`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,Ywe=gx`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,Qwe=dn("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Kwe=dn(qwe,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${di.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${Gwe};
    animation-duration: ${Hk}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  &.${di.ripplePulsate} {
    animation-duration: ${({theme:e})=>e.transitions.duration.shorter}ms;
  }

  & .${di.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${di.childLeaving} {
    opacity: 0;
    animation-name: ${Vwe};
    animation-duration: ${Hk}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  & .${di.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${Ywe};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,Xwe=h.forwardRef(function(t,a){const s=Nd({props:t,name:"MuiTouchRipple"}),{center:r=!1,classes:i={},className:o,...l}=s,[c,u]=h.useState([]),d=h.useRef(0),f=h.useRef(null);h.useEffect(()=>{f.current&&(f.current(),f.current=null)},[c]);const p=h.useRef(!1),x=Hwe(),y=h.useRef(null),N=h.useRef(null),v=h.useCallback(_=>{const{pulsate:E,rippleX:T,rippleY:A,rippleSize:L,cb:M}=_;u(F=>[...F,n.jsx(Kwe,{classes:{ripple:Mt(i.ripple,di.ripple),rippleVisible:Mt(i.rippleVisible,di.rippleVisible),ripplePulsate:Mt(i.ripplePulsate,di.ripplePulsate),child:Mt(i.child,di.child),childLeaving:Mt(i.childLeaving,di.childLeaving),childPulsate:Mt(i.childPulsate,di.childPulsate)},timeout:Hk,pulsate:E,rippleX:T,rippleY:A,rippleSize:L},d.current)]),d.current+=1,f.current=M},[i]),j=h.useCallback((_={},E={},T=()=>{})=>{const{pulsate:A=!1,center:L=r||E.pulsate,fakeElement:M=!1}=E;if(_?.type==="mousedown"&&p.current){p.current=!1;return}_?.type==="touchstart"&&(p.current=!0);const F=M?null:N.current,$=F?F.getBoundingClientRect():{width:0,height:0,left:0,top:0};let D,q,G;if(L||_===void 0||_.clientX===0&&_.clientY===0||!_.clientX&&!_.touches)D=Math.round($.width/2),q=Math.round($.height/2);else{const{clientX:U,clientY:V}=_.touches&&_.touches.length>0?_.touches[0]:_;D=Math.round(U-$.left),q=Math.round(V-$.top)}if(L)G=Math.sqrt((2*$.width**2+$.height**2)/3),G%2===0&&(G+=1);else{const U=Math.max(Math.abs((F?F.clientWidth:0)-D),D)*2+2,V=Math.max(Math.abs((F?F.clientHeight:0)-q),q)*2+2;G=Math.sqrt(U**2+V**2)}_?.touches?y.current===null&&(y.current=()=>{v({pulsate:A,rippleX:D,rippleY:q,rippleSize:G,cb:T})},x.start(Wwe,()=>{y.current&&(y.current(),y.current=null)})):v({pulsate:A,rippleX:D,rippleY:q,rippleSize:G,cb:T})},[r,v,x]),w=h.useCallback(()=>{j({},{pulsate:!0})},[j]),S=h.useCallback((_,E)=>{if(x.clear(),_?.type==="touchend"&&y.current){y.current(),y.current=null,x.start(0,()=>{S(_,E)});return}y.current=null,u(T=>T.length>0?T.slice(1):T),f.current=E},[x]);return h.useImperativeHandle(a,()=>({pulsate:w,start:j,stop:S}),[w,j,S]),n.jsx(Qwe,{className:Mt(di.root,i.root,o),ref:N,...l,children:n.jsx(FL,{component:null,exit:!0,children:c})})});function Zwe(e){return Ya("MuiButtonBase",e)}const Jwe=Aa("MuiButtonBase",["root","disabled","focusVisible"]),eNe=e=>{const{disabled:t,focusVisible:a,focusVisibleClassName:s,classes:r}=e,o=Va({root:["root",t&&"disabled",a&&"focusVisible"]},Zwe,r);return a&&s&&(o.root+=` ${s}`),o},tNe=dn("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Jwe.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),kV=h.forwardRef(function(t,a){const s=Nd({props:t,name:"MuiButtonBase"}),{action:r,centerRipple:i=!1,children:o,className:l,component:c="button",disabled:u=!1,disableRipple:d=!1,disableTouchRipple:f=!1,focusRipple:p=!1,focusVisibleClassName:x,LinkComponent:y="a",onBlur:N,onClick:v,onContextMenu:j,onDragLeave:w,onFocus:S,onFocusVisible:_,onKeyDown:E,onKeyUp:T,onMouseDown:A,onMouseLeave:L,onMouseUp:M,onTouchEnd:F,onTouchMove:$,onTouchStart:D,tabIndex:q=0,TouchRippleProps:G,touchRippleRef:U,type:V,...Z}=s,Y=h.useRef(null),le=Uwe(),_e=Ro(le.ref,U),[te,ae]=h.useState(!1);u&&te&&ae(!1),h.useImperativeHandle(r,()=>({focusVisible:()=>{ae(!0),Y.current.focus()}}),[]);const ye=le.shouldMount&&!d&&!u;h.useEffect(()=>{te&&p&&!d&&le.pulsate()},[d,p,te,le]);const Ne=gl(le,"start",A,f),he=gl(le,"stop",j,f),ve=gl(le,"stop",w,f),ne=gl(le,"stop",M,f),Se=gl(le,"stop",Je=>{te&&Je.preventDefault(),L&&L(Je)},f),de=gl(le,"start",D,f),ke=gl(le,"stop",F,f),Te=gl(le,"stop",$,f),pe=gl(le,"stop",Je=>{lR(Je.target)||ae(!1),N&&N(Je)},!1),ze=ps(Je=>{Y.current||(Y.current=Je.currentTarget),lR(Je.target)&&(ae(!0),_&&_(Je)),S&&S(Je)}),Pe=()=>{const Je=Y.current;return c&&c!=="button"&&!(Je.tagName==="A"&&Je.href)},We=ps(Je=>{p&&!Je.repeat&&te&&Je.key===" "&&le.stop(Je,()=>{le.start(Je)}),Je.target===Je.currentTarget&&Pe()&&Je.key===" "&&Je.preventDefault(),E&&E(Je),Je.target===Je.currentTarget&&Pe()&&Je.key==="Enter"&&!u&&(Je.preventDefault(),v&&v(Je))}),tt=ps(Je=>{p&&Je.key===" "&&te&&!Je.defaultPrevented&&le.stop(Je,()=>{le.pulsate(Je)}),T&&T(Je),v&&Je.target===Je.currentTarget&&Pe()&&Je.key===" "&&!Je.defaultPrevented&&v(Je)});let lt=c;lt==="button"&&(Z.href||Z.to)&&(lt=y);const Ie={};lt==="button"?(Ie.type=V===void 0?"button":V,Ie.disabled=u):(!Z.href&&!Z.to&&(Ie.role="button"),u&&(Ie["aria-disabled"]=u));const rt=Ro(a,Y),He={...s,centerRipple:i,component:c,disabled:u,disableRipple:d,disableTouchRipple:f,focusRipple:p,tabIndex:q,focusVisible:te},Ke=eNe(He);return n.jsxs(tNe,{as:lt,className:Mt(Ke.root,l),ownerState:He,onBlur:pe,onClick:v,onContextMenu:he,onFocus:ze,onKeyDown:We,onKeyUp:tt,onMouseDown:Ne,onMouseLeave:Se,onMouseUp:ne,onDragLeave:ve,onTouchEnd:ke,onTouchMove:Te,onTouchStart:de,ref:rt,tabIndex:u?-1:q,type:V,...Ie,...Z,children:[o,ye?n.jsx(Xwe,{ref:_e,center:i,...G}):null]})});function gl(e,t,a,s=!1){return ps(r=>(a&&a(r),s||e[t](r),!0))}function nNe(e){return Ya("MuiIconButton",e)}const cR=Aa("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),aNe=e=>{const{classes:t,disabled:a,color:s,edge:r,size:i,loading:o}=e,l={root:["root",o&&"loading",a&&"disabled",s!=="default"&&`color${Wn(s)}`,r&&`edge${Wn(r)}`,`size${Wn(i)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return Va(l,nNe,t)},sNe=dn(kV,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.loading&&t.loading,a.color!=="default"&&t[`color${Wn(a.color)}`],a.edge&&t[`edge${Wn(a.edge)}`],t[`size${Wn(a.size)}`]]}})(Du(({theme:e})=>({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),variants:[{props:t=>!t.disableRipple,style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),Du(({theme:e})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(e.palette).filter(yp()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette).filter(yp()).map(([t])=>({props:{color:t},style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:e.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:e.typography.pxToRem(28)}}],[`&.${cR.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled},[`&.${cR.loading}`]:{color:"transparent"}}))),rNe=dn("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(e.vars||e).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),iNe=h.forwardRef(function(t,a){const s=Nd({props:t,name:"MuiIconButton"}),{edge:r=!1,children:i,className:o,color:l="default",disabled:c=!1,disableFocusRipple:u=!1,size:d="medium",id:f,loading:p=null,loadingIndicator:x,...y}=s,N=NN(f),v=x??n.jsx(UL,{"aria-labelledby":N,color:"inherit",size:16}),j={...s,edge:r,color:l,disabled:c,disableFocusRipple:u,loading:p,loadingIndicator:v,size:d},w=aNe(j);return n.jsxs(sNe,{id:p?N:f,className:Mt(w.root,o),centerRipple:!0,focusRipple:!u,disabled:c||p,ref:a,...y,ownerState:j,children:[typeof p=="boolean"&&n.jsx("span",{className:w.loadingWrapper,style:{display:"contents"},children:n.jsx(rNe,{className:w.loadingIndicator,ownerState:j,children:p&&v})}),i]})});function oNe(e){return Ya("MuiButton",e)}const Vd=Aa("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),lNe=h.createContext({}),cNe=h.createContext(void 0),dNe=e=>{const{color:t,disableElevation:a,fullWidth:s,size:r,variant:i,loading:o,loadingPosition:l,classes:c}=e,u={root:["root",o&&"loading",i,`${i}${Wn(t)}`,`size${Wn(r)}`,`${i}Size${Wn(r)}`,`color${Wn(t)}`,a&&"disableElevation",s&&"fullWidth",o&&`loadingPosition${Wn(l)}`],startIcon:["icon","startIcon",`iconSize${Wn(r)}`],endIcon:["icon","endIcon",`iconSize${Wn(r)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},d=Va(u,oNe,c);return{...c,...d}},EV=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],uNe=dn(kV,{shouldForwardProp:e=>Y9(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[a.variant],t[`${a.variant}${Wn(a.color)}`],t[`size${Wn(a.size)}`],t[`${a.variant}Size${Wn(a.size)}`],a.color==="inherit"&&t.colorInherit,a.disableElevation&&t.disableElevation,a.fullWidth&&t.fullWidth,a.loading&&t.loading]}})(Du(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],a=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return{...e.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${Vd.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(e.vars||e).shadows[2],"&:hover":{boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2]}},"&:active":{boxShadow:(e.vars||e).shadows[8]},[`&.${Vd.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},[`&.${Vd.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${Vd.disabled}`]:{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(e.palette).filter(yp()).map(([s])=>({props:{color:s},style:{"--variant-textColor":(e.vars||e).palette[s].main,"--variant-outlinedColor":(e.vars||e).palette[s].main,"--variant-outlinedBorder":e.alpha((e.vars||e).palette[s].main,.5),"--variant-containedColor":(e.vars||e).palette[s].contrastText,"--variant-containedBg":(e.vars||e).palette[s].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(e.vars||e).palette[s].dark,"--variant-textBg":e.alpha((e.vars||e).palette[s].main,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBorder":(e.vars||e).palette[s].main,"--variant-outlinedBg":e.alpha((e.vars||e).palette[s].main,(e.vars||e).palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedBg:t,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedHoverBg:a,"--variant-textBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${Vd.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${Vd.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),[`&.${Vd.loading}`]:{color:"transparent"}}}]}})),mNe=dn("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.startIcon,a.loading&&t.startIconLoadingStart,t[`iconSize${Wn(a.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...EV]})),fNe=dn("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.endIcon,a.loading&&t.endIconLoadingEnd,t[`iconSize${Wn(a.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...EV]})),hNe=dn("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(e.vars||e).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),dR=dn("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),gNe=h.forwardRef(function(t,a){const s=h.useContext(lNe),r=h.useContext(cNe),i=Pu(s,t),o=Nd({props:i,name:"MuiButton"}),{children:l,color:c="primary",component:u="button",className:d,disabled:f=!1,disableElevation:p=!1,disableFocusRipple:x=!1,endIcon:y,focusVisibleClassName:N,fullWidth:v=!1,id:j,loading:w=null,loadingIndicator:S,loadingPosition:_="center",size:E="medium",startIcon:T,type:A,variant:L="text",...M}=o,F=NN(j),$=S??n.jsx(UL,{"aria-labelledby":F,color:"inherit",size:16}),D={...o,color:c,component:u,disabled:f,disableElevation:p,disableFocusRipple:x,fullWidth:v,loading:w,loadingIndicator:$,loadingPosition:_,size:E,type:A,variant:L},q=dNe(D),G=(T||w&&_==="start")&&n.jsx(mNe,{className:q.startIcon,ownerState:D,children:T||n.jsx(dR,{className:q.loadingIconPlaceholder,ownerState:D})}),U=(y||w&&_==="end")&&n.jsx(fNe,{className:q.endIcon,ownerState:D,children:y||n.jsx(dR,{className:q.loadingIconPlaceholder,ownerState:D})}),V=r||"",Z=typeof w=="boolean"?n.jsx("span",{className:q.loadingWrapper,style:{display:"contents"},children:w&&n.jsx(hNe,{className:q.loadingIndicator,ownerState:D,children:$})}):null;return n.jsxs(uNe,{ownerState:D,className:Mt(s.className,q.root,d,V),component:u,disabled:f||w,focusRipple:!x,focusVisibleClassName:Mt(q.focusVisible,N),ref:a,type:A,id:w?F:j,...M,classes:q,children:[G,_!=="end"&&Z,l,_==="end"&&Z,U]})}),pNe={baseButton:gNe,baseIconButton:iNe},xNe={},yNe=Ye({},pNe,xNe),bNe=h.createContext(null);function vNe(e){const{slots:t,slotProps:a={},defaultSlots:s,children:r}=e,i=h.useMemo(()=>({slots:Ye({},s,t),slotProps:a}),[s,t,a]);return n.jsx(bNe.Provider,{value:i,children:r})}const wNe=["children","localeText","plugins","seriesConfig","slots","slotProps"],NNe=e=>{const t=_i({props:e,name:"MuiChartDataProvider"}),{children:a,localeText:s,plugins:r=TV,seriesConfig:i,slots:o,slotProps:l}=t,c=pn(t,wNe),u=Wo(),d={plugins:r,seriesConfig:i,pluginParams:Ye({theme:u.palette.mode},c)};return{children:a,localeText:s,chartProviderProps:d,slots:o,slotProps:l}};function jNe(e){const{children:t,localeText:a,chartProviderProps:s,slots:r,slotProps:i}=NNe(e);return n.jsx(E0e,Ye({},s,{children:n.jsx(Gxe,{localeText:a,children:n.jsx(vNe,{slots:r,slotProps:i,defaultSlots:yNe,children:t})})}))}function uR(e){const{isReversed:t,gradientId:a,size:s,direction:r,scale:i,colorMap:o}=e;return s<=0?null:n.jsx("linearGradient",{id:a,x1:"0",x2:"0",y1:"0",y2:"0",[`${r}${t?1:2}`]:`${s}px`,gradientUnits:"userSpaceOnUse",children:o.thresholds.map((l,c)=>{const u=i(l);if(u===void 0)return null;const d=t?1-u/s:u/s;return Number.isNaN(d)?null:n.jsxs(h.Fragment,{children:[n.jsx("stop",{offset:d,stopColor:o.colors[c],stopOpacity:1}),n.jsx("stop",{offset:d,stopColor:o.colors[c+1],stopOpacity:1})]},l.toString()+c)})})}const CNe=10;function mR(e){const{gradientUnits:t,isReversed:a,gradientId:s,size:r,direction:i,scale:o,colorScale:l,colorMap:c}=e,u=[c.min??0,c.max??100],d=u.map(o).filter(y=>y!==void 0);if(d.length!==2)return null;const f=typeof u[0]=="number"?Tf(u[0],u[1]):n4(u[0],u[1]),p=Math.round((Math.max(...d)-Math.min(...d))/CNe),x=`${u[0]}-${u[1]}-`;return n.jsx("linearGradient",{id:s,x1:"0",x2:"0",y1:"0",y2:"0",[`${i}${a?1:2}`]:t==="objectBoundingBox"?1:`${r}px`,gradientUnits:t??"userSpaceOnUse",children:Array.from({length:p+1},(y,N)=>{const v=f(N/p);if(v===void 0)return null;const j=o(v);if(j===void 0)return null;const w=a?1-j/r:j/r,S=l(v);return S===null?null:n.jsx("stop",{offset:w,stopColor:S,stopOpacity:1},x+N)})})}const SNe=10,_Ne=e=>e?{x1:"1",x2:"0",y1:"0",y2:"0"}:{x1:"0",x2:"1",y1:"0",y2:"0"};function w2(e){const{isReversed:t,gradientId:a,colorScale:s,colorMap:r}=e,i=[r.min??0,r.max??100],o=typeof i[0]=="number"?Tf(i[0],i[1]):n4(i[0],i[1]),l=SNe,c=`${i[0]}-${i[1]}-`;return n.jsx("linearGradient",Ye({id:a},_Ne(t),{gradientUnits:"objectBoundingBox",children:Array.from({length:l+1},(u,d)=>{const f=d/l,p=o(f);if(p===void 0)return null;const x=s(p);return x===null?null:n.jsx("stop",{offset:f,stopColor:x,stopOpacity:1},c+d)})}))}function ANe(){const{top:e,height:t,bottom:a,left:s,width:r,right:i}=Ti(),o=e+t+a,l=s+r+i,c=U4(),u=_xe(),{xAxis:d,xAxisIds:f}=wr(),{yAxis:p,yAxisIds:x}=Nr(),{zAxis:y,zAxisIds:N}=R4(),v=x.filter(S=>p[S].colorMap!==void 0),j=f.filter(S=>d[S].colorMap!==void 0),w=N.filter(S=>y[S].colorMap!==void 0);return v.length===0&&j.length===0&&w.length===0?null:n.jsxs("defs",{children:[v.map(S=>{const _=c(S),E=u(S),{colorMap:T,scale:A,colorScale:L,reverse:M}=p[S];return T?.type==="piecewise"?n.jsx(uR,{isReversed:!M,scale:A,colorMap:T,size:o,gradientId:_,direction:"y"},_):T?.type==="continuous"?n.jsxs(h.Fragment,{children:[n.jsx(mR,{isReversed:!M,scale:A,colorScale:L,colorMap:T,size:o,gradientId:_,direction:"y"}),n.jsx(w2,{isReversed:M,colorScale:L,colorMap:T,gradientId:E})]},_):null}),j.map(S=>{const _=c(S),E=u(S),{colorMap:T,scale:A,reverse:L,colorScale:M}=d[S];return T?.type==="piecewise"?n.jsx(uR,{isReversed:L,scale:A,colorMap:T,size:l,gradientId:_,direction:"x"},_):T?.type==="continuous"?n.jsxs(h.Fragment,{children:[n.jsx(mR,{isReversed:L,scale:A,colorScale:M,colorMap:T,size:l,gradientId:_,direction:"x"}),n.jsx(w2,{isReversed:L,colorScale:M,colorMap:T,gradientId:E})]},_):null}),w.map(S=>{const _=u(S),{colorMap:E,colorScale:T}=y[S];return E?.type==="continuous"?n.jsx(w2,{colorScale:T,colorMap:E,gradientId:_},_):null})]})}function TNe(e){return Ya("MuiChartsSurface",e)}const kNe=()=>Va({root:["root"]},TNe);Aa("MuiChartsSurface",["root"]);const ENe=["children","className","title","desc"],LNe=dn("svg",{name:"MuiChartsSurface",slot:"Root"})(({ownerState:e,theme:t})=>({width:e.width??"100%",height:e.height??"100%",display:"flex",position:"relative",flexDirection:"column",alignItems:"center",justifyContent:"center",overflow:"hidden",touchAction:e.hasZoom?"pan-y":void 0,userSelect:"none",gridArea:"chart","&:focus":{outline:"none"},"&:focus-visible":{outline:`${(t.vars??t).palette.text.primary} solid 2px`,"&[data-has-focused-item=true]":{outline:"none"}},"& [data-focused=true]":{outline:`${(t.vars??t).palette.text.primary} solid 2px`}})),PNe=h.forwardRef(function(t,a){const s=Yn(),r=Ht(s,fme),i=Ht(s,hme),o=Ht(s,oq),l=Ht(s,lq),c=Ht(s,Zge),u=Ht(s,Xge),d=Ht(s,Lge),f=z4(),p=Ro(f,a),x=_i({props:t,name:"MuiChartsSurface"}),{children:y,className:N,title:v,desc:j}=x,w=pn(x,ENe),S=kNe(),_=i>0&&r>0;return n.jsxs(LNe,Ye({ownerState:{width:o,height:l,hasZoom:d},viewBox:`0 0 ${r} ${i}`,className:Mt(S.root,N),tabIndex:c?0:void 0,"data-has-focused-item":u||void 0},w,{ref:p,children:[v&&n.jsx("title",{children:v}),j&&n.jsx("desc",{children:j}),n.jsx(ANe,{}),_&&y]}))}),fR=Aa("MuiChartsToolbar",["root"]),DNe=e=>e?.horizontal==="start"?"start":e?.horizontal==="end"?"end":"center",ONe=e=>e?.vertical==="top"?"flex-start":e?.vertical==="bottom"?"flex-end":"center",MNe=(e,t,a)=>e?'"chart"':t==="vertical"?a?.horizontal==="start"?'"legend chart"':'"chart legend"':a?.vertical==="bottom"?`"chart"
            "legend"`:`"legend"
          "chart"`,INe=(e=!1,t="horizontal",a="end",s=void 0)=>{const r=s?"auto":"1fr";return t==="horizontal"||e?r:a==="start"?`auto ${r}`:`${r} auto`},$Ne=(e=!1,t="horizontal",a="top")=>t==="vertical"||e?"1fr":a==="bottom"?"1fr auto":"auto 1fr",RNe=dn("div",{name:"MuiChartsWrapper",slot:"Root",shouldForwardProp:e=>ev(e)&&e!=="extendVertically"&&e!=="width"})(({ownerState:e,width:t})=>{const a=INe(e.hideLegend,e.legendDirection,e.legendPosition?.horizontal,t),s=$Ne(e.hideLegend,e.legendDirection,e.legendPosition?.vertical),r=MNe(e.hideLegend,e.legendDirection,e.legendPosition);return{variants:[{props:{extendVertically:!0},style:{height:"100%",minHeight:0}}],flex:1,display:"grid",gridTemplateColumns:a,gridTemplateRows:s,gridTemplateAreas:r,[`&:has(.${fR.root})`]:{gridTemplateRows:`auto ${s}`,gridTemplateAreas:`"${a.split(" ").map(()=>"toolbar").join(" ")}"
        ${r}`},[`& .${fR.root}`]:{gridArea:"toolbar",justifySelf:"center"},justifyContent:"safe center",justifyItems:DNe(e.legendPosition),alignItems:ONe(e.legendPosition)}});function zNe(e){const{children:t,sx:a,extendVertically:s}=e,r=Uxe(),i=Yn(),o=Ht(i,oq),l=Ht(i,lq);return n.jsx(RNe,{ref:r,ownerState:e,sx:a,extendVertically:s??l===void 0,width:o,children:t})}function FNe(){const e=Yn(),t=Ht(e,YN),a=Ht(e,QN),s=Ht(e,KN);return h.useMemo(()=>t===void 0||a===void 0||s===void 0?null:{seriesType:t,seriesId:a,dataIndex:s},[t,a,s])}const Zy=6;function UNe(){const e=Wo(),t=FNe(),a=Px(),{xAxis:s,xAxisIds:r}=wr(),{yAxis:i,yAxisIds:o}=Nr();if(t===null||t.seriesType!=="line"||!a)return null;const l=a?.series[t.seriesId],c=l.xAxisId??r[0],u=l.yAxisId??o[0];return n.jsx("rect",{fill:"none",stroke:(e.vars??e).palette.text.primary,strokeWidth:2,x:s[c].scale(s[c].data[t.dataIndex])-Zy,y:i[u].scale(l.stackedData[t.dataIndex][1])-Zy,width:2*Zy,height:2*Zy,rx:3,ry:3})}const Ix=h.forwardRef(function(t,a){const s=_i({props:t,name:"MuiLineChart"}),{chartsWrapperProps:r,chartContainerProps:i,gridProps:o,clipPathProps:l,clipPathGroupProps:c,areaPlotProps:u,linePlotProps:d,markPlotProps:f,overlayProps:p,chartsAxisProps:x,axisHighlightProps:y,lineHighlightPlotProps:N,legendProps:v,children:j}=$we(s),{chartDataProviderProps:w,chartsSurfaceProps:S}=Fwe(i,a),_=s.slots?.tooltip??Vve,E=s.slots?.toolbar;return n.jsx(jNe,Ye({},w,{children:n.jsxs(zNe,Ye({},r,{children:[s.showToolbar&&E?n.jsx(E,Ye({},s.slotProps?.toolbar)):null,!s.hideLegend&&n.jsx(iwe,Ye({},v)),n.jsxs(PNe,Ye({},S,{children:[n.jsx(_we,Ye({},o)),n.jsxs("g",Ye({},c,{children:[n.jsx(q0e,Ye({},u)),n.jsx(nye,Ye({},d)),n.jsx(Owe,Ye({},p)),n.jsx(uwe,Ye({},y))]})),n.jsx(UNe,{}),n.jsx(ebe,Ye({},x)),n.jsx("g",{"data-drawing-container":!0,children:n.jsx(uye,Ye({},f))}),n.jsx(bwe,Ye({},N)),n.jsx(mwe,Ye({},l)),j]})),!s.loading&&n.jsx(_,Ye({},s.slotProps?.tooltip))]}))}))});function BNe(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return h.useMemo(()=>s=>{t.forEach(r=>r(s))},t)}const fj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function rh(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function rP(e){return"nodeType"in e}function Js(e){var t,a;return e?rh(e)?e:rP(e)&&(t=(a=e.ownerDocument)==null?void 0:a.defaultView)!=null?t:window:window}function iP(e){const{Document:t}=Js(e);return e instanceof t}function $x(e){return rh(e)?!1:e instanceof Js(e).HTMLElement}function LV(e){return e instanceof Js(e).SVGElement}function ih(e){return e?rh(e)?e.document:rP(e)?iP(e)?e:$x(e)||LV(e)?e.ownerDocument:document:document:document}const Yi=fj?h.useLayoutEffect:h.useEffect;function hj(e){const t=h.useRef(e);return Yi(()=>{t.current=e}),h.useCallback(function(){for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return t.current==null?void 0:t.current(...s)},[])}function HNe(){const e=h.useRef(null),t=h.useCallback((s,r)=>{e.current=setInterval(s,r)},[]),a=h.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,a]}function Ep(e,t){t===void 0&&(t=[e]);const a=h.useRef(e);return Yi(()=>{a.current!==e&&(a.current=e)},t),a}function Rx(e,t){const a=h.useRef();return h.useMemo(()=>{const s=e(a.current);return a.current=s,s},[...t])}function Gv(e){const t=hj(e),a=h.useRef(null),s=h.useCallback(r=>{r!==a.current&&t?.(r,a.current),a.current=r},[]);return[a,s]}function Vv(e){const t=h.useRef();return h.useEffect(()=>{t.current=e},[e]),t.current}let N2={};function zx(e,t){return h.useMemo(()=>{if(t)return t;const a=N2[e]==null?0:N2[e]+1;return N2[e]=a,e+"-"+a},[e,t])}function PV(e){return function(t){for(var a=arguments.length,s=new Array(a>1?a-1:0),r=1;r<a;r++)s[r-1]=arguments[r];return s.reduce((i,o)=>{const l=Object.entries(o);for(const[c,u]of l){const d=i[c];d!=null&&(i[c]=d+e*u)}return i},{...t})}}const wf=PV(1),Lp=PV(-1);function qNe(e){return"clientX"in e&&"clientY"in e}function gj(e){if(!e)return!1;const{KeyboardEvent:t}=Js(e.target);return t&&e instanceof t}function WNe(e){if(!e)return!1;const{TouchEvent:t}=Js(e.target);return t&&e instanceof t}function Yv(e){if(WNe(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:a}=e.touches[0];return{x:t,y:a}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:a}=e.changedTouches[0];return{x:t,y:a}}}return qNe(e)?{x:e.clientX,y:e.clientY}:null}const md=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:a}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(a?Math.round(a):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:a}=e;return"scaleX("+t+") scaleY("+a+")"}},Transform:{toString(e){if(e)return[md.Translate.toString(e),md.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:a,easing:s}=e;return t+" "+a+"ms "+s}}}),hR="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function GNe(e){return e.matches(hR)?e:e.querySelector(hR)}const VNe={display:"none"};function YNe(e){let{id:t,value:a}=e;return xt.createElement("div",{id:t,style:VNe},a)}function QNe(e){let{id:t,announcement:a,ariaLiveType:s="assertive"}=e;const r={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return xt.createElement("div",{id:t,style:r,role:"status","aria-live":s,"aria-atomic":!0},a)}function KNe(){const[e,t]=h.useState("");return{announce:h.useCallback(s=>{s!=null&&t(s)},[]),announcement:e}}const DV=h.createContext(null);function XNe(e){const t=h.useContext(DV);h.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function ZNe(){const[e]=h.useState(()=>new Set),t=h.useCallback(s=>(e.add(s),()=>e.delete(s)),[e]);return[h.useCallback(s=>{let{type:r,event:i}=s;e.forEach(o=>{var l;return(l=o[r])==null?void 0:l.call(o,i)})},[e]),t]}const JNe={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},eje={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:a}=e;return a?"Draggable item "+t.id+" was moved over droppable area "+a.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:a}=e;return a?"Draggable item "+t.id+" was dropped over droppable area "+a.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function tje(e){let{announcements:t=eje,container:a,hiddenTextDescribedById:s,screenReaderInstructions:r=JNe}=e;const{announce:i,announcement:o}=KNe(),l=zx("DndLiveRegion"),[c,u]=h.useState(!1);if(h.useEffect(()=>{u(!0)},[]),XNe(h.useMemo(()=>({onDragStart(f){let{active:p}=f;i(t.onDragStart({active:p}))},onDragMove(f){let{active:p,over:x}=f;t.onDragMove&&i(t.onDragMove({active:p,over:x}))},onDragOver(f){let{active:p,over:x}=f;i(t.onDragOver({active:p,over:x}))},onDragEnd(f){let{active:p,over:x}=f;i(t.onDragEnd({active:p,over:x}))},onDragCancel(f){let{active:p,over:x}=f;i(t.onDragCancel({active:p,over:x}))}}),[i,t])),!c)return null;const d=xt.createElement(xt.Fragment,null,xt.createElement(YNe,{id:s,value:r.draggable}),xt.createElement(QNe,{id:l,announcement:o}));return a?Hi.createPortal(d,a):d}var ns;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(ns||(ns={}));function Qv(){}function zf(e,t){return h.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function Fx(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return h.useMemo(()=>[...t].filter(s=>s!=null),[...t])}const Qi=Object.freeze({x:0,y:0});function OV(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function nje(e,t){const a=Yv(e);if(!a)return"0 0";const s={x:(a.x-t.left)/t.width*100,y:(a.y-t.top)/t.height*100};return s.x+"% "+s.y+"%"}function MV(e,t){let{data:{value:a}}=e,{data:{value:s}}=t;return a-s}function aje(e,t){let{data:{value:a}}=e,{data:{value:s}}=t;return s-a}function gR(e){let{left:t,top:a,height:s,width:r}=e;return[{x:t,y:a},{x:t+r,y:a},{x:t,y:a+s},{x:t+r,y:a+s}]}function IV(e,t){if(!e||e.length===0)return null;const[a]=e;return a[t]}function pR(e,t,a){return t===void 0&&(t=e.left),a===void 0&&(a=e.top),{x:t+e.width*.5,y:a+e.height*.5}}const Ux=e=>{let{collisionRect:t,droppableRects:a,droppableContainers:s}=e;const r=pR(t,t.left,t.top),i=[];for(const o of s){const{id:l}=o,c=a.get(l);if(c){const u=OV(pR(c),r);i.push({id:l,data:{droppableContainer:o,value:u}})}}return i.sort(MV)},sje=e=>{let{collisionRect:t,droppableRects:a,droppableContainers:s}=e;const r=gR(t),i=[];for(const o of s){const{id:l}=o,c=a.get(l);if(c){const u=gR(c),d=r.reduce((p,x,y)=>p+OV(u[y],x),0),f=Number((d/4).toFixed(4));i.push({id:l,data:{droppableContainer:o,value:f}})}}return i.sort(MV)};function rje(e,t){const a=Math.max(t.top,e.top),s=Math.max(t.left,e.left),r=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),o=r-s,l=i-a;if(s<r&&a<i){const c=t.width*t.height,u=e.width*e.height,d=o*l,f=d/(c+u-d);return Number(f.toFixed(4))}return 0}const ije=e=>{let{collisionRect:t,droppableRects:a,droppableContainers:s}=e;const r=[];for(const i of s){const{id:o}=i,l=a.get(o);if(l){const c=rje(l,t);c>0&&r.push({id:o,data:{droppableContainer:i,value:c}})}}return r.sort(aje)};function oje(e,t,a){return{...e,scaleX:t&&a?t.width/a.width:1,scaleY:t&&a?t.height/a.height:1}}function $V(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Qi}function lje(e){return function(a){for(var s=arguments.length,r=new Array(s>1?s-1:0),i=1;i<s;i++)r[i-1]=arguments[i];return r.reduce((o,l)=>({...o,top:o.top+e*l.y,bottom:o.bottom+e*l.y,left:o.left+e*l.x,right:o.right+e*l.x}),{...a})}}const cje=lje(1);function RV(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function dje(e,t,a){const s=RV(t);if(!s)return e;const{scaleX:r,scaleY:i,x:o,y:l}=s,c=e.left-o-(1-r)*parseFloat(a),u=e.top-l-(1-i)*parseFloat(a.slice(a.indexOf(" ")+1)),d=r?e.width/r:e.width,f=i?e.height/i:e.height;return{width:d,height:f,top:u,right:c+d,bottom:u+f,left:c}}const uje={ignoreTransform:!1};function oh(e,t){t===void 0&&(t=uje);let a=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:d}=Js(e).getComputedStyle(e);u&&(a=dje(a,u,d))}const{top:s,left:r,width:i,height:o,bottom:l,right:c}=a;return{top:s,left:r,width:i,height:o,bottom:l,right:c}}function xR(e){return oh(e,{ignoreTransform:!0})}function mje(e){const t=e.innerWidth,a=e.innerHeight;return{top:0,left:0,right:t,bottom:a,width:t,height:a}}function fje(e,t){return t===void 0&&(t=Js(e).getComputedStyle(e)),t.position==="fixed"}function hje(e,t){t===void 0&&(t=Js(e).getComputedStyle(e));const a=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(r=>{const i=t[r];return typeof i=="string"?a.test(i):!1})}function pj(e,t){const a=[];function s(r){if(t!=null&&a.length>=t||!r)return a;if(iP(r)&&r.scrollingElement!=null&&!a.includes(r.scrollingElement))return a.push(r.scrollingElement),a;if(!$x(r)||LV(r)||a.includes(r))return a;const i=Js(e).getComputedStyle(r);return r!==e&&hje(r,i)&&a.push(r),fje(r,i)?a:s(r.parentNode)}return e?s(e):a}function zV(e){const[t]=pj(e,1);return t??null}function j2(e){return!fj||!e?null:rh(e)?e:rP(e)?iP(e)||e===ih(e).scrollingElement?window:$x(e)?e:null:null}function FV(e){return rh(e)?e.scrollX:e.scrollLeft}function UV(e){return rh(e)?e.scrollY:e.scrollTop}function qk(e){return{x:FV(e),y:UV(e)}}var gs;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(gs||(gs={}));function BV(e){return!fj||!e?!1:e===document.scrollingElement}function HV(e){const t={x:0,y:0},a=BV(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},s={x:e.scrollWidth-a.width,y:e.scrollHeight-a.height},r=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,o=e.scrollTop>=s.y,l=e.scrollLeft>=s.x;return{isTop:r,isLeft:i,isBottom:o,isRight:l,maxScroll:s,minScroll:t}}const gje={x:.2,y:.2};function pje(e,t,a,s,r){let{top:i,left:o,right:l,bottom:c}=a;s===void 0&&(s=10),r===void 0&&(r=gje);const{isTop:u,isBottom:d,isLeft:f,isRight:p}=HV(e),x={x:0,y:0},y={x:0,y:0},N={height:t.height*r.y,width:t.width*r.x};return!u&&i<=t.top+N.height?(x.y=gs.Backward,y.y=s*Math.abs((t.top+N.height-i)/N.height)):!d&&c>=t.bottom-N.height&&(x.y=gs.Forward,y.y=s*Math.abs((t.bottom-N.height-c)/N.height)),!p&&l>=t.right-N.width?(x.x=gs.Forward,y.x=s*Math.abs((t.right-N.width-l)/N.width)):!f&&o<=t.left+N.width&&(x.x=gs.Backward,y.x=s*Math.abs((t.left+N.width-o)/N.width)),{direction:x,speed:y}}function xje(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:t,left:a,right:s,bottom:r}=e.getBoundingClientRect();return{top:t,left:a,right:s,bottom:r,width:e.clientWidth,height:e.clientHeight}}function qV(e){return e.reduce((t,a)=>wf(t,qk(a)),Qi)}function yje(e){return e.reduce((t,a)=>t+FV(a),0)}function bje(e){return e.reduce((t,a)=>t+UV(a),0)}function WV(e,t){if(t===void 0&&(t=oh),!e)return;const{top:a,left:s,bottom:r,right:i}=t(e);zV(e)&&(r<=0||i<=0||a>=window.innerHeight||s>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const vje=[["x",["left","right"],yje],["y",["top","bottom"],bje]];class oP{constructor(t,a){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=pj(a),r=qV(s);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,o,l]of vje)for(const c of o)Object.defineProperty(this,c,{get:()=>{const u=l(s),d=r[i]-u;return this.rect[c]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class tp{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(a=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...a)})},this.target=t}add(t,a,s){var r;(r=this.target)==null||r.addEventListener(t,a,s),this.listeners.push([t,a,s])}}function wje(e){const{EventTarget:t}=Js(e);return e instanceof t?e:ih(e)}function C2(e,t){const a=Math.abs(e.x),s=Math.abs(e.y);return typeof t=="number"?Math.sqrt(a**2+s**2)>t:"x"in t&&"y"in t?a>t.x&&s>t.y:"x"in t?a>t.x:"y"in t?s>t.y:!1}var ui;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(ui||(ui={}));function yR(e){e.preventDefault()}function Nje(e){e.stopPropagation()}var bn;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(bn||(bn={}));const GV={start:[bn.Space,bn.Enter],cancel:[bn.Esc],end:[bn.Space,bn.Enter,bn.Tab]},jje=(e,t)=>{let{currentCoordinates:a}=t;switch(e.code){case bn.Right:return{...a,x:a.x+25};case bn.Left:return{...a,x:a.x-25};case bn.Down:return{...a,y:a.y+25};case bn.Up:return{...a,y:a.y-25}}};class lP{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:a}}=t;this.props=t,this.listeners=new tp(ih(a)),this.windowListeners=new tp(Js(a)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ui.Resize,this.handleCancel),this.windowListeners.add(ui.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ui.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:a}=this.props,s=t.node.current;s&&WV(s),a(Qi)}handleKeyDown(t){if(gj(t)){const{active:a,context:s,options:r}=this.props,{keyboardCodes:i=GV,coordinateGetter:o=jje,scrollBehavior:l="smooth"}=r,{code:c}=t;if(i.end.includes(c)){this.handleEnd(t);return}if(i.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:u}=s.current,d=u?{x:u.left,y:u.top}:Qi;this.referenceCoordinates||(this.referenceCoordinates=d);const f=o(t,{active:a,context:s.current,currentCoordinates:d});if(f){const p=Lp(f,d),x={x:0,y:0},{scrollableAncestors:y}=s.current;for(const N of y){const v=t.code,{isTop:j,isRight:w,isLeft:S,isBottom:_,maxScroll:E,minScroll:T}=HV(N),A=xje(N),L={x:Math.min(v===bn.Right?A.right-A.width/2:A.right,Math.max(v===bn.Right?A.left:A.left+A.width/2,f.x)),y:Math.min(v===bn.Down?A.bottom-A.height/2:A.bottom,Math.max(v===bn.Down?A.top:A.top+A.height/2,f.y))},M=v===bn.Right&&!w||v===bn.Left&&!S,F=v===bn.Down&&!_||v===bn.Up&&!j;if(M&&L.x!==f.x){const $=N.scrollLeft+p.x,D=v===bn.Right&&$<=E.x||v===bn.Left&&$>=T.x;if(D&&!p.y){N.scrollTo({left:$,behavior:l});return}D?x.x=N.scrollLeft-$:x.x=v===bn.Right?N.scrollLeft-E.x:N.scrollLeft-T.x,x.x&&N.scrollBy({left:-x.x,behavior:l});break}else if(F&&L.y!==f.y){const $=N.scrollTop+p.y,D=v===bn.Down&&$<=E.y||v===bn.Up&&$>=T.y;if(D&&!p.x){N.scrollTo({top:$,behavior:l});return}D?x.y=N.scrollTop-$:x.y=v===bn.Down?N.scrollTop-E.y:N.scrollTop-T.y,x.y&&N.scrollBy({top:-x.y,behavior:l});break}}this.handleMove(t,wf(Lp(f,this.referenceCoordinates),x))}}}handleMove(t,a){const{onMove:s}=this.props;t.preventDefault(),s(a)}handleEnd(t){const{onEnd:a}=this.props;t.preventDefault(),this.detach(),a()}handleCancel(t){const{onCancel:a}=this.props;t.preventDefault(),this.detach(),a()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}lP.activators=[{eventName:"onKeyDown",handler:(e,t,a)=>{let{keyboardCodes:s=GV,onActivation:r}=t,{active:i}=a;const{code:o}=e.nativeEvent;if(s.start.includes(o)){const l=i.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),r?.({event:e.nativeEvent}),!0)}return!1}}];function bR(e){return!!(e&&"distance"in e)}function vR(e){return!!(e&&"delay"in e)}class cP{constructor(t,a,s){var r;s===void 0&&(s=wje(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=a;const{event:i}=t,{target:o}=i;this.props=t,this.events=a,this.document=ih(o),this.documentListeners=new tp(this.document),this.listeners=new tp(s),this.windowListeners=new tp(Js(o)),this.initialCoordinates=(r=Yv(i))!=null?r:Qi,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:a,bypassActivationConstraint:s}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(ui.Resize,this.handleCancel),this.windowListeners.add(ui.DragStart,yR),this.windowListeners.add(ui.VisibilityChange,this.handleCancel),this.windowListeners.add(ui.ContextMenu,yR),this.documentListeners.add(ui.Keydown,this.handleKeydown),a){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(vR(a)){this.timeoutId=setTimeout(this.handleStart,a.delay),this.handlePending(a);return}if(bR(a)){this.handlePending(a);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,a){const{active:s,onPending:r}=this.props;r(s,t,this.initialCoordinates,a)}handleStart(){const{initialCoordinates:t}=this,{onStart:a}=this.props;t&&(this.activated=!0,this.documentListeners.add(ui.Click,Nje,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ui.SelectionChange,this.removeTextSelection),a(t))}handleMove(t){var a;const{activated:s,initialCoordinates:r,props:i}=this,{onMove:o,options:{activationConstraint:l}}=i;if(!r)return;const c=(a=Yv(t))!=null?a:Qi,u=Lp(r,c);if(!s&&l){if(bR(l)){if(l.tolerance!=null&&C2(u,l.tolerance))return this.handleCancel();if(C2(u,l.distance))return this.handleStart()}if(vR(l)&&C2(u,l.tolerance))return this.handleCancel();this.handlePending(l,u);return}t.cancelable&&t.preventDefault(),o(c)}handleEnd(){const{onAbort:t,onEnd:a}=this.props;this.detach(),this.activated||t(this.props.active),a()}handleCancel(){const{onAbort:t,onCancel:a}=this.props;this.detach(),this.activated||t(this.props.active),a()}handleKeydown(t){t.code===bn.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Cje={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class am extends cP{constructor(t){const{event:a}=t,s=ih(a.target);super(t,Cje,s)}}am.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:a}=e,{onActivation:s}=t;return!a.isPrimary||a.button!==0?!1:(s?.({event:a}),!0)}}];const Sje={move:{name:"mousemove"},end:{name:"mouseup"}};var Wk;(function(e){e[e.RightClick=2]="RightClick"})(Wk||(Wk={}));class _je extends cP{constructor(t){super(t,Sje,ih(t.event.target))}}_je.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:a}=e,{onActivation:s}=t;return a.button===Wk.RightClick?!1:(s?.({event:a}),!0)}}];const S2={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Aje extends cP{constructor(t){super(t,S2)}static setup(){return window.addEventListener(S2.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(S2.move.name,t)};function t(){}}}Aje.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:a}=e,{onActivation:s}=t;const{touches:r}=a;return r.length>1?!1:(s?.({event:a}),!0)}}];var np;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(np||(np={}));var Kv;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Kv||(Kv={}));function Tje(e){let{acceleration:t,activator:a=np.Pointer,canScroll:s,draggingRect:r,enabled:i,interval:o=5,order:l=Kv.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:d,delta:f,threshold:p}=e;const x=Eje({delta:f,disabled:!i}),[y,N]=HNe(),v=h.useRef({x:0,y:0}),j=h.useRef({x:0,y:0}),w=h.useMemo(()=>{switch(a){case np.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case np.DraggableRect:return r}},[a,r,c]),S=h.useRef(null),_=h.useCallback(()=>{const T=S.current;if(!T)return;const A=v.current.x*j.current.x,L=v.current.y*j.current.y;T.scrollBy(A,L)},[]),E=h.useMemo(()=>l===Kv.TreeOrder?[...u].reverse():u,[l,u]);h.useEffect(()=>{if(!i||!u.length||!w){N();return}for(const T of E){if(s?.(T)===!1)continue;const A=u.indexOf(T),L=d[A];if(!L)continue;const{direction:M,speed:F}=pje(T,L,w,t,p);for(const $ of["x","y"])x[$][M[$]]||(F[$]=0,M[$]=0);if(F.x>0||F.y>0){N(),S.current=T,y(_,o),v.current=F,j.current=M;return}}v.current={x:0,y:0},j.current={x:0,y:0},N()},[t,_,s,N,i,o,JSON.stringify(w),JSON.stringify(x),y,u,E,d,JSON.stringify(p)])}const kje={x:{[gs.Backward]:!1,[gs.Forward]:!1},y:{[gs.Backward]:!1,[gs.Forward]:!1}};function Eje(e){let{delta:t,disabled:a}=e;const s=Vv(t);return Rx(r=>{if(a||!s||!r)return kje;const i={x:Math.sign(t.x-s.x),y:Math.sign(t.y-s.y)};return{x:{[gs.Backward]:r.x[gs.Backward]||i.x===-1,[gs.Forward]:r.x[gs.Forward]||i.x===1},y:{[gs.Backward]:r.y[gs.Backward]||i.y===-1,[gs.Forward]:r.y[gs.Forward]||i.y===1}}},[a,t,s])}function Lje(e,t){const a=t!=null?e.get(t):void 0,s=a?a.node.current:null;return Rx(r=>{var i;return t==null?null:(i=s??r)!=null?i:null},[s,t])}function Pje(e,t){return h.useMemo(()=>e.reduce((a,s)=>{const{sensor:r}=s,i=r.activators.map(o=>({eventName:o.eventName,handler:t(o.handler,s)}));return[...a,...i]},[]),[e,t])}var Pp;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Pp||(Pp={}));var Gk;(function(e){e.Optimized="optimized"})(Gk||(Gk={}));const wR=new Map;function Dje(e,t){let{dragging:a,dependencies:s,config:r}=t;const[i,o]=h.useState(null),{frequency:l,measure:c,strategy:u}=r,d=h.useRef(e),f=v(),p=Ep(f),x=h.useCallback(function(j){j===void 0&&(j=[]),!p.current&&o(w=>w===null?j:w.concat(j.filter(S=>!w.includes(S))))},[p]),y=h.useRef(null),N=Rx(j=>{if(f&&!a)return wR;if(!j||j===wR||d.current!==e||i!=null){const w=new Map;for(let S of e){if(!S)continue;if(i&&i.length>0&&!i.includes(S.id)&&S.rect.current){w.set(S.id,S.rect.current);continue}const _=S.node.current,E=_?new oP(c(_),_):null;S.rect.current=E,E&&w.set(S.id,E)}return w}return j},[e,i,a,f,c]);return h.useEffect(()=>{d.current=e},[e]),h.useEffect(()=>{f||x()},[a,f]),h.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),h.useEffect(()=>{f||typeof l!="number"||y.current!==null||(y.current=setTimeout(()=>{x(),y.current=null},l))},[l,f,x,...s]),{droppableRects:N,measureDroppableContainers:x,measuringScheduled:i!=null};function v(){switch(u){case Pp.Always:return!1;case Pp.BeforeDragging:return a;default:return!a}}}function dP(e,t){return Rx(a=>e?a||(typeof t=="function"?t(e):e):null,[t,e])}function Oje(e,t){return dP(e,t)}function Mje(e){let{callback:t,disabled:a}=e;const s=hj(t),r=h.useMemo(()=>{if(a||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(s)},[s,a]);return h.useEffect(()=>()=>r?.disconnect(),[r]),r}function xj(e){let{callback:t,disabled:a}=e;const s=hj(t),r=h.useMemo(()=>{if(a||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(s)},[a]);return h.useEffect(()=>()=>r?.disconnect(),[r]),r}function Ije(e){return new oP(oh(e),e)}function NR(e,t,a){t===void 0&&(t=Ije);const[s,r]=h.useState(null);function i(){r(c=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=c??a)!=null?u:null}const d=t(e);return JSON.stringify(c)===JSON.stringify(d)?c:d})}const o=Mje({callback(c){if(e)for(const u of c){const{type:d,target:f}=u;if(d==="childList"&&f instanceof HTMLElement&&f.contains(e)){i();break}}}}),l=xj({callback:i});return Yi(()=>{i(),e?(l?.observe(e),o?.observe(document.body,{childList:!0,subtree:!0})):(l?.disconnect(),o?.disconnect())},[e]),s}function $je(e){const t=dP(e);return $V(e,t)}const jR=[];function Rje(e){const t=h.useRef(e),a=Rx(s=>e?s&&s!==jR&&e&&t.current&&e.parentNode===t.current.parentNode?s:pj(e):jR,[e]);return h.useEffect(()=>{t.current=e},[e]),a}function zje(e){const[t,a]=h.useState(null),s=h.useRef(e),r=h.useCallback(i=>{const o=j2(i.target);o&&a(l=>l?(l.set(o,qk(o)),new Map(l)):null)},[]);return h.useEffect(()=>{const i=s.current;if(e!==i){o(i);const l=e.map(c=>{const u=j2(c);return u?(u.addEventListener("scroll",r,{passive:!0}),[u,qk(u)]):null}).filter(c=>c!=null);a(l.length?new Map(l):null),s.current=e}return()=>{o(e),o(i)};function o(l){l.forEach(c=>{const u=j2(c);u?.removeEventListener("scroll",r)})}},[r,e]),h.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,o)=>wf(i,o),Qi):qV(e):Qi,[e,t])}function CR(e,t){t===void 0&&(t=[]);const a=h.useRef(null);return h.useEffect(()=>{a.current=null},t),h.useEffect(()=>{const s=e!==Qi;s&&!a.current&&(a.current=e),!s&&a.current&&(a.current=null)},[e]),a.current?Lp(e,a.current):Qi}function Fje(e){h.useEffect(()=>{if(!fj)return;const t=e.map(a=>{let{sensor:s}=a;return s.setup==null?void 0:s.setup()});return()=>{for(const a of t)a?.()}},e.map(t=>{let{sensor:a}=t;return a}))}function Uje(e,t){return h.useMemo(()=>e.reduce((a,s)=>{let{eventName:r,handler:i}=s;return a[r]=o=>{i(o,t)},a},{}),[e,t])}function VV(e){return h.useMemo(()=>e?mje(e):null,[e])}const SR=[];function Bje(e,t){t===void 0&&(t=oh);const[a]=e,s=VV(a?Js(a):null),[r,i]=h.useState(SR);function o(){i(()=>e.length?e.map(c=>BV(c)?s:new oP(t(c),c)):SR)}const l=xj({callback:o});return Yi(()=>{l?.disconnect(),o(),e.forEach(c=>l?.observe(c))},[e]),r}function YV(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return $x(t)?t:e}function Hje(e){let{measure:t}=e;const[a,s]=h.useState(null),r=h.useCallback(u=>{for(const{target:d}of u)if($x(d)){s(f=>{const p=t(d);return f?{...f,width:p.width,height:p.height}:p});break}},[t]),i=xj({callback:r}),o=h.useCallback(u=>{const d=YV(u);i?.disconnect(),d&&i?.observe(d),s(d?t(d):null)},[t,i]),[l,c]=Gv(o);return h.useMemo(()=>({nodeRef:l,rect:a,setRef:c}),[a,l,c])}const qje=[{sensor:am,options:{}},{sensor:lP,options:{}}],Wje={current:{}},av={draggable:{measure:xR},droppable:{measure:xR,strategy:Pp.WhileDragging,frequency:Gk.Optimized},dragOverlay:{measure:oh}};class ap extends Map{get(t){var a;return t!=null&&(a=super.get(t))!=null?a:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:a}=t;return!a})}getNodeFor(t){var a,s;return(a=(s=this.get(t))==null?void 0:s.node.current)!=null?a:void 0}}const Gje={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new ap,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Qv},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:av,measureDroppableContainers:Qv,windowRect:null,measuringScheduled:!1},QV={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Qv,draggableNodes:new Map,over:null,measureDroppableContainers:Qv},Bx=h.createContext(QV),KV=h.createContext(Gje);function Vje(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new ap}}}function Yje(e,t){switch(t.type){case ns.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case ns.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case ns.DragEnd:case ns.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case ns.RegisterDroppable:{const{element:a}=t,{id:s}=a,r=new ap(e.droppable.containers);return r.set(s,a),{...e,droppable:{...e.droppable,containers:r}}}case ns.SetDroppableDisabled:{const{id:a,key:s,disabled:r}=t,i=e.droppable.containers.get(a);if(!i||s!==i.key)return e;const o=new ap(e.droppable.containers);return o.set(a,{...i,disabled:r}),{...e,droppable:{...e.droppable,containers:o}}}case ns.UnregisterDroppable:{const{id:a,key:s}=t,r=e.droppable.containers.get(a);if(!r||s!==r.key)return e;const i=new ap(e.droppable.containers);return i.delete(a),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function Qje(e){let{disabled:t}=e;const{active:a,activatorEvent:s,draggableNodes:r}=h.useContext(Bx),i=Vv(s),o=Vv(a?.id);return h.useEffect(()=>{if(!t&&!s&&i&&o!=null){if(!gj(i)||document.activeElement===i.target)return;const l=r.get(o);if(!l)return;const{activatorNode:c,node:u}=l;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const d of[c.current,u.current]){if(!d)continue;const f=GNe(d);if(f){f.focus();break}}})}},[s,t,r,o,i]),null}function XV(e,t){let{transform:a,...s}=t;return e!=null&&e.length?e.reduce((r,i)=>i({transform:r,...s}),a):a}function Kje(e){return h.useMemo(()=>({draggable:{...av.draggable,...e?.draggable},droppable:{...av.droppable,...e?.droppable},dragOverlay:{...av.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function Xje(e){let{activeNode:t,measure:a,initialRect:s,config:r=!0}=e;const i=h.useRef(!1),{x:o,y:l}=typeof r=="boolean"?{x:r,y:r}:r;Yi(()=>{if(!o&&!l||!t){i.current=!1;return}if(i.current||!s)return;const u=t?.node.current;if(!u||u.isConnected===!1)return;const d=a(u),f=$V(d,s);if(o||(f.x=0),l||(f.y=0),i.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const p=zV(u);p&&p.scrollBy({top:f.y,left:f.x})}},[t,o,l,s,a])}const yj=h.createContext({...Qi,scaleX:1,scaleY:1});var qc;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(qc||(qc={}));const Hx=h.memo(function(t){var a,s,r,i;let{id:o,accessibility:l,autoScroll:c=!0,children:u,sensors:d=qje,collisionDetection:f=ije,measuring:p,modifiers:x,...y}=t;const N=h.useReducer(Yje,void 0,Vje),[v,j]=N,[w,S]=ZNe(),[_,E]=h.useState(qc.Uninitialized),T=_===qc.Initialized,{draggable:{active:A,nodes:L,translate:M},droppable:{containers:F}}=v,$=A!=null?L.get(A):null,D=h.useRef({initial:null,translated:null}),q=h.useMemo(()=>{var Re;return A!=null?{id:A,data:(Re=$?.data)!=null?Re:Wje,rect:D}:null},[A,$]),G=h.useRef(null),[U,V]=h.useState(null),[Z,Y]=h.useState(null),le=Ep(y,Object.values(y)),_e=zx("DndDescribedBy",o),te=h.useMemo(()=>F.getEnabled(),[F]),ae=Kje(p),{droppableRects:ye,measureDroppableContainers:Ne,measuringScheduled:he}=Dje(te,{dragging:T,dependencies:[M.x,M.y],config:ae.droppable}),ve=Lje(L,A),ne=h.useMemo(()=>Z?Yv(Z):null,[Z]),Se=Tt(),de=Oje(ve,ae.draggable.measure);Xje({activeNode:A!=null?L.get(A):null,config:Se.layoutShiftCompensation,initialRect:de,measure:ae.draggable.measure});const ke=NR(ve,ae.draggable.measure,de),Te=NR(ve?ve.parentElement:null),pe=h.useRef({activatorEvent:null,active:null,activeNode:ve,collisionRect:null,collisions:null,droppableRects:ye,draggableNodes:L,draggingNode:null,draggingNodeRect:null,droppableContainers:F,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ze=F.getNodeFor((a=pe.current.over)==null?void 0:a.id),Pe=Hje({measure:ae.dragOverlay.measure}),We=(s=Pe.nodeRef.current)!=null?s:ve,tt=T?(r=Pe.rect)!=null?r:ke:null,lt=!!(Pe.nodeRef.current&&Pe.rect),Ie=$je(lt?null:ke),rt=VV(We?Js(We):null),He=Rje(T?ze??ve:null),Ke=Bje(He),Je=XV(x,{transform:{x:M.x-Ie.x,y:M.y-Ie.y,scaleX:1,scaleY:1},activatorEvent:Z,active:q,activeNodeRect:ke,containerNodeRect:Te,draggingNodeRect:tt,over:pe.current.over,overlayNodeRect:Pe.rect,scrollableAncestors:He,scrollableAncestorRects:Ke,windowRect:rt}),Oe=ne?wf(ne,M):null,Ce=zje(He),fe=CR(Ce),ue=CR(Ce,[ke]),H=wf(Je,fe),K=tt?cje(tt,Je):null,we=q&&K?f({active:q,collisionRect:K,droppableRects:ye,droppableContainers:te,pointerCoordinates:Oe}):null,Me=IV(we,"id"),[ce,oe]=h.useState(null),De=lt?Je:wf(Je,ue),$e=oje(De,(i=ce?.rect)!=null?i:null,ke),Xe=h.useRef(null),Ze=h.useCallback((Re,me)=>{let{sensor:ie,options:Fe}=me;if(G.current==null)return;const Le=L.get(G.current);if(!Le)return;const be=Re.nativeEvent,ee=new ie({active:G.current,activeNode:Le,event:be,options:Fe,context:pe,onAbort(z){if(!L.get(z))return;const{onDragAbort:Q}=le.current,ge={id:z};Q?.(ge),w({type:"onDragAbort",event:ge})},onPending(z,I,Q,ge){if(!L.get(z))return;const{onDragPending:Ee}=le.current,Qe={id:z,constraint:I,initialCoordinates:Q,offset:ge};Ee?.(Qe),w({type:"onDragPending",event:Qe})},onStart(z){const I=G.current;if(I==null)return;const Q=L.get(I);if(!Q)return;const{onDragStart:ge}=le.current,re={activatorEvent:be,active:{id:I,data:Q.data,rect:D}};Hi.unstable_batchedUpdates(()=>{ge?.(re),E(qc.Initializing),j({type:ns.DragStart,initialCoordinates:z,active:I}),w({type:"onDragStart",event:re}),V(Xe.current),Y(be)})},onMove(z){j({type:ns.DragMove,coordinates:z})},onEnd:O(ns.DragEnd),onCancel:O(ns.DragCancel)});Xe.current=ee;function O(z){return async function(){const{active:Q,collisions:ge,over:re,scrollAdjustedTranslate:Ee}=pe.current;let Qe=null;if(Q&&Ee){const{cancelDrop:gt}=le.current;Qe={activatorEvent:be,active:Q,collisions:ge,delta:Ee,over:re},z===ns.DragEnd&&typeof gt=="function"&&await Promise.resolve(gt(Qe))&&(z=ns.DragCancel)}G.current=null,Hi.unstable_batchedUpdates(()=>{j({type:z}),E(qc.Uninitialized),oe(null),V(null),Y(null),Xe.current=null;const gt=z===ns.DragEnd?"onDragEnd":"onDragCancel";if(Qe){const Ct=le.current[gt];Ct?.(Qe),w({type:gt,event:Qe})}})}}},[L]),mt=h.useCallback((Re,me)=>(ie,Fe)=>{const Le=ie.nativeEvent,be=L.get(Fe);if(G.current!==null||!be||Le.dndKit||Le.defaultPrevented)return;const ee={active:be};Re(ie,me.options,ee)===!0&&(Le.dndKit={capturedBy:me.sensor},G.current=Fe,Ze(ie,me))},[L,Ze]),nt=Pje(d,mt);Fje(d),Yi(()=>{ke&&_===qc.Initializing&&E(qc.Initialized)},[ke,_]),h.useEffect(()=>{const{onDragMove:Re}=le.current,{active:me,activatorEvent:ie,collisions:Fe,over:Le}=pe.current;if(!me||!ie)return;const be={active:me,activatorEvent:ie,collisions:Fe,delta:{x:H.x,y:H.y},over:Le};Hi.unstable_batchedUpdates(()=>{Re?.(be),w({type:"onDragMove",event:be})})},[H.x,H.y]),h.useEffect(()=>{const{active:Re,activatorEvent:me,collisions:ie,droppableContainers:Fe,scrollAdjustedTranslate:Le}=pe.current;if(!Re||G.current==null||!me||!Le)return;const{onDragOver:be}=le.current,ee=Fe.get(Me),O=ee&&ee.rect.current?{id:ee.id,rect:ee.rect.current,data:ee.data,disabled:ee.disabled}:null,z={active:Re,activatorEvent:me,collisions:ie,delta:{x:Le.x,y:Le.y},over:O};Hi.unstable_batchedUpdates(()=>{oe(O),be?.(z),w({type:"onDragOver",event:z})})},[Me]),Yi(()=>{pe.current={activatorEvent:Z,active:q,activeNode:ve,collisionRect:K,collisions:we,droppableRects:ye,draggableNodes:L,draggingNode:We,draggingNodeRect:tt,droppableContainers:F,over:ce,scrollableAncestors:He,scrollAdjustedTranslate:H},D.current={initial:tt,translated:K}},[q,ve,we,K,L,We,tt,ye,F,ce,He,H]),Tje({...Se,delta:M,draggingRect:K,pointerCoordinates:Oe,scrollableAncestors:He,scrollableAncestorRects:Ke});const Nt=h.useMemo(()=>({active:q,activeNode:ve,activeNodeRect:ke,activatorEvent:Z,collisions:we,containerNodeRect:Te,dragOverlay:Pe,draggableNodes:L,droppableContainers:F,droppableRects:ye,over:ce,measureDroppableContainers:Ne,scrollableAncestors:He,scrollableAncestorRects:Ke,measuringConfiguration:ae,measuringScheduled:he,windowRect:rt}),[q,ve,ke,Z,we,Te,Pe,L,F,ye,ce,Ne,He,Ke,ae,he,rt]),wt=h.useMemo(()=>({activatorEvent:Z,activators:nt,active:q,activeNodeRect:ke,ariaDescribedById:{draggable:_e},dispatch:j,draggableNodes:L,over:ce,measureDroppableContainers:Ne}),[Z,nt,q,ke,j,_e,L,ce,Ne]);return xt.createElement(DV.Provider,{value:S},xt.createElement(Bx.Provider,{value:wt},xt.createElement(KV.Provider,{value:Nt},xt.createElement(yj.Provider,{value:$e},u)),xt.createElement(Qje,{disabled:l?.restoreFocus===!1})),xt.createElement(tje,{...l,hiddenTextDescribedById:_e}));function Tt(){const Re=U?.autoScrollEnabled===!1,me=typeof c=="object"?c.enabled===!1:c===!1,ie=T&&!Re&&!me;return typeof c=="object"?{...c,enabled:ie}:{enabled:ie}}}),Zje=h.createContext(null),_R="button",Jje="Draggable";function qx(e){let{id:t,data:a,disabled:s=!1,attributes:r}=e;const i=zx(Jje),{activators:o,activatorEvent:l,active:c,activeNodeRect:u,ariaDescribedById:d,draggableNodes:f,over:p}=h.useContext(Bx),{role:x=_R,roleDescription:y="draggable",tabIndex:N=0}=r??{},v=c?.id===t,j=h.useContext(v?yj:Zje),[w,S]=Gv(),[_,E]=Gv(),T=Uje(o,t),A=Ep(a);Yi(()=>(f.set(t,{id:t,key:i,node:w,activatorNode:_,data:A}),()=>{const M=f.get(t);M&&M.key===i&&f.delete(t)}),[f,t]);const L=h.useMemo(()=>({role:x,tabIndex:N,"aria-disabled":s,"aria-pressed":v&&x===_R?!0:void 0,"aria-roledescription":y,"aria-describedby":d.draggable}),[s,x,N,v,y,d.draggable]);return{active:c,activatorEvent:l,activeNodeRect:u,attributes:L,isDragging:v,listeners:s?void 0:T,node:w,over:p,setNodeRef:S,setActivatorNodeRef:E,transform:j}}function ZV(){return h.useContext(KV)}const e1e="Droppable",t1e={timeout:25};function Wx(e){let{data:t,disabled:a=!1,id:s,resizeObserverConfig:r}=e;const i=zx(e1e),{active:o,dispatch:l,over:c,measureDroppableContainers:u}=h.useContext(Bx),d=h.useRef({disabled:a}),f=h.useRef(!1),p=h.useRef(null),x=h.useRef(null),{disabled:y,updateMeasurementsFor:N,timeout:v}={...t1e,...r},j=Ep(N??s),w=h.useCallback(()=>{if(!f.current){f.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{u(Array.isArray(j.current)?j.current:[j.current]),x.current=null},v)},[v]),S=xj({callback:w,disabled:y||!o}),_=h.useCallback((L,M)=>{S&&(M&&(S.unobserve(M),f.current=!1),L&&S.observe(L))},[S]),[E,T]=Gv(_),A=Ep(t);return h.useEffect(()=>{!S||!E.current||(S.disconnect(),f.current=!1,S.observe(E.current))},[E,S]),h.useEffect(()=>(l({type:ns.RegisterDroppable,element:{id:s,key:i,disabled:a,node:E,rect:p,data:A}}),()=>l({type:ns.UnregisterDroppable,key:i,id:s})),[s]),h.useEffect(()=>{a!==d.current.disabled&&(l({type:ns.SetDroppableDisabled,id:s,key:i,disabled:a}),d.current.disabled=a)},[s,i,a,l]),{active:o,rect:p,isOver:c?.id===s,node:E,over:c,setNodeRef:T}}function n1e(e){let{animation:t,children:a}=e;const[s,r]=h.useState(null),[i,o]=h.useState(null),l=Vv(a);return!a&&!s&&l&&r(l),Yi(()=>{if(!i)return;const c=s?.key,u=s?.props.id;if(c==null||u==null){r(null);return}Promise.resolve(t(u,i)).then(()=>{r(null)})},[t,s,i]),xt.createElement(xt.Fragment,null,a,s?h.cloneElement(s,{ref:o}):null)}const a1e={x:0,y:0,scaleX:1,scaleY:1};function s1e(e){let{children:t}=e;return xt.createElement(Bx.Provider,{value:QV},xt.createElement(yj.Provider,{value:a1e},t))}const r1e={position:"fixed",touchAction:"none"},i1e=e=>gj(e)?"transform 250ms ease":void 0,o1e=h.forwardRef((e,t)=>{let{as:a,activatorEvent:s,adjustScale:r,children:i,className:o,rect:l,style:c,transform:u,transition:d=i1e}=e;if(!l)return null;const f=r?u:{...u,scaleX:1,scaleY:1},p={...r1e,width:l.width,height:l.height,top:l.top,left:l.left,transform:md.Transform.toString(f),transformOrigin:r&&s?nje(s,l):void 0,transition:typeof d=="function"?d(s):d,...c};return xt.createElement(a,{className:o,style:p,ref:t},i)}),l1e=e=>t=>{let{active:a,dragOverlay:s}=t;const r={},{styles:i,className:o}=e;if(i!=null&&i.active)for(const[l,c]of Object.entries(i.active))c!==void 0&&(r[l]=a.node.style.getPropertyValue(l),a.node.style.setProperty(l,c));if(i!=null&&i.dragOverlay)for(const[l,c]of Object.entries(i.dragOverlay))c!==void 0&&s.node.style.setProperty(l,c);return o!=null&&o.active&&a.node.classList.add(o.active),o!=null&&o.dragOverlay&&s.node.classList.add(o.dragOverlay),function(){for(const[c,u]of Object.entries(r))a.node.style.setProperty(c,u);o!=null&&o.active&&a.node.classList.remove(o.active)}},c1e=e=>{let{transform:{initial:t,final:a}}=e;return[{transform:md.Transform.toString(t)},{transform:md.Transform.toString(a)}]},d1e={duration:250,easing:"ease",keyframes:c1e,sideEffects:l1e({styles:{active:{opacity:"0"}}})};function u1e(e){let{config:t,draggableNodes:a,droppableContainers:s,measuringConfiguration:r}=e;return hj((i,o)=>{if(t===null)return;const l=a.get(i);if(!l)return;const c=l.node.current;if(!c)return;const u=YV(o);if(!u)return;const{transform:d}=Js(o).getComputedStyle(o),f=RV(d);if(!f)return;const p=typeof t=="function"?t:m1e(t);return WV(c,r.draggable.measure),p({active:{id:i,data:l.data,node:c,rect:r.draggable.measure(c)},draggableNodes:a,dragOverlay:{node:o,rect:r.dragOverlay.measure(u)},droppableContainers:s,measuringConfiguration:r,transform:f})})}function m1e(e){const{duration:t,easing:a,sideEffects:s,keyframes:r}={...d1e,...e};return i=>{let{active:o,dragOverlay:l,transform:c,...u}=i;if(!t)return;const d={x:l.rect.left-o.rect.left,y:l.rect.top-o.rect.top},f={scaleX:c.scaleX!==1?o.rect.width*c.scaleX/l.rect.width:1,scaleY:c.scaleY!==1?o.rect.height*c.scaleY/l.rect.height:1},p={x:c.x-d.x,y:c.y-d.y,...f},x=r({...u,active:o,dragOverlay:l,transform:{initial:c,final:p}}),[y]=x,N=x[x.length-1];if(JSON.stringify(y)===JSON.stringify(N))return;const v=s?.({active:o,dragOverlay:l,...u}),j=l.node.animate(x,{duration:t,easing:a,fill:"forwards"});return new Promise(w=>{j.onfinish=()=>{v?.(),w()}})}}let AR=0;function f1e(e){return h.useMemo(()=>{if(e!=null)return AR++,AR},[e])}const bj=xt.memo(e=>{let{adjustScale:t=!1,children:a,dropAnimation:s,style:r,transition:i,modifiers:o,wrapperElement:l="div",className:c,zIndex:u=999}=e;const{activatorEvent:d,active:f,activeNodeRect:p,containerNodeRect:x,draggableNodes:y,droppableContainers:N,dragOverlay:v,over:j,measuringConfiguration:w,scrollableAncestors:S,scrollableAncestorRects:_,windowRect:E}=ZV(),T=h.useContext(yj),A=f1e(f?.id),L=XV(o,{activatorEvent:d,active:f,activeNodeRect:p,containerNodeRect:x,draggingNodeRect:v.rect,over:j,overlayNodeRect:v.rect,scrollableAncestors:S,scrollableAncestorRects:_,transform:T,windowRect:E}),M=dP(p),F=u1e({config:s,draggableNodes:y,droppableContainers:N,measuringConfiguration:w}),$=M?v.setRef:void 0;return xt.createElement(s1e,null,xt.createElement(n1e,{animation:F},f&&A?xt.createElement(o1e,{key:A,id:f.id,ref:$,as:l,activatorEvent:d,adjustScale:t,className:c,transition:i,rect:M,style:{zIndex:u,...r},transform:L},a):null))});function uP(e,t,a){const s=e.slice();return s.splice(a<0?s.length+a:a,0,s.splice(t,1)[0]),s}function h1e(e,t){return e.reduce((a,s,r)=>{const i=t.get(s);return i&&(a[r]=i),a},Array(e.length))}function Jy(e){return e!==null&&e>=0}function g1e(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}function p1e(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const mP=e=>{let{rects:t,activeIndex:a,overIndex:s,index:r}=e;const i=uP(t,s,a),o=t[r],l=i[r];return!l||!o?null:{x:l.left-o.left,y:l.top-o.top,scaleX:l.width/o.width,scaleY:l.height/o.height}},JV="Sortable",eY=xt.createContext({activeIndex:-1,containerId:JV,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:mP,disabled:{draggable:!1,droppable:!1}});function x1e(e){let{children:t,id:a,items:s,strategy:r=mP,disabled:i=!1}=e;const{active:o,dragOverlay:l,droppableRects:c,over:u,measureDroppableContainers:d}=ZV(),f=zx(JV,a),p=l.rect!==null,x=h.useMemo(()=>s.map(T=>typeof T=="object"&&"id"in T?T.id:T),[s]),y=o!=null,N=o?x.indexOf(o.id):-1,v=u?x.indexOf(u.id):-1,j=h.useRef(x),w=!g1e(x,j.current),S=v!==-1&&N===-1||w,_=p1e(i);Yi(()=>{w&&y&&d(x)},[w,x,y,d]),h.useEffect(()=>{j.current=x},[x]);const E=h.useMemo(()=>({activeIndex:N,containerId:f,disabled:_,disableTransforms:S,items:x,overIndex:v,useDragOverlay:p,sortedRects:h1e(x,c),strategy:r}),[N,f,_.draggable,_.droppable,S,x,v,c,p,r]);return xt.createElement(eY.Provider,{value:E},t)}const y1e=e=>{let{id:t,items:a,activeIndex:s,overIndex:r}=e;return uP(a,s,r).indexOf(t)},b1e=e=>{let{containerId:t,isSorting:a,wasDragging:s,index:r,items:i,newIndex:o,previousItems:l,previousContainerId:c,transition:u}=e;return!u||!s||l!==i&&r===o?!1:a?!0:o!==r&&t===c},v1e={duration:200,easing:"ease"},tY="transform",w1e=md.Transition.toString({property:tY,duration:0,easing:"linear"}),N1e={roleDescription:"sortable"};function j1e(e){let{disabled:t,index:a,node:s,rect:r}=e;const[i,o]=h.useState(null),l=h.useRef(a);return Yi(()=>{if(!t&&a!==l.current&&s.current){const c=r.current;if(c){const u=oh(s.current,{ignoreTransform:!0}),d={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(d.x||d.y)&&o(d)}}a!==l.current&&(l.current=a)},[t,a,s,r]),h.useEffect(()=>{i&&o(null)},[i]),i}function C1e(e){let{animateLayoutChanges:t=b1e,attributes:a,disabled:s,data:r,getNewIndex:i=y1e,id:o,strategy:l,resizeObserverConfig:c,transition:u=v1e}=e;const{items:d,containerId:f,activeIndex:p,disabled:x,disableTransforms:y,sortedRects:N,overIndex:v,useDragOverlay:j,strategy:w}=h.useContext(eY),S=S1e(s,x),_=d.indexOf(o),E=h.useMemo(()=>({sortable:{containerId:f,index:_,items:d},...r}),[f,r,_,d]),T=h.useMemo(()=>d.slice(d.indexOf(o)),[d,o]),{rect:A,node:L,isOver:M,setNodeRef:F}=Wx({id:o,data:E,disabled:S.droppable,resizeObserverConfig:{updateMeasurementsFor:T,...c}}),{active:$,activatorEvent:D,activeNodeRect:q,attributes:G,setNodeRef:U,listeners:V,isDragging:Z,over:Y,setActivatorNodeRef:le,transform:_e}=qx({id:o,data:E,attributes:{...N1e,...a},disabled:S.draggable}),te=BNe(F,U),ae=!!$,ye=ae&&!y&&Jy(p)&&Jy(v),Ne=!j&&Z,he=Ne&&ye?_e:null,ne=ye?he??(l??w)({rects:N,activeNodeRect:q,activeIndex:p,overIndex:v,index:_}):null,Se=Jy(p)&&Jy(v)?i({id:o,items:d,activeIndex:p,overIndex:v}):_,de=$?.id,ke=h.useRef({activeId:de,items:d,newIndex:Se,containerId:f}),Te=d!==ke.current.items,pe=t({active:$,containerId:f,isDragging:Z,isSorting:ae,id:o,index:_,items:d,newIndex:ke.current.newIndex,previousItems:ke.current.items,previousContainerId:ke.current.containerId,transition:u,wasDragging:ke.current.activeId!=null}),ze=j1e({disabled:!pe,index:_,node:L,rect:A});return h.useEffect(()=>{ae&&ke.current.newIndex!==Se&&(ke.current.newIndex=Se),f!==ke.current.containerId&&(ke.current.containerId=f),d!==ke.current.items&&(ke.current.items=d)},[ae,Se,f,d]),h.useEffect(()=>{if(de===ke.current.activeId)return;if(de!=null&&ke.current.activeId==null){ke.current.activeId=de;return}const We=setTimeout(()=>{ke.current.activeId=de},50);return()=>clearTimeout(We)},[de]),{active:$,activeIndex:p,attributes:G,data:E,rect:A,index:_,newIndex:Se,items:d,isOver:M,isSorting:ae,isDragging:Z,listeners:V,node:L,overIndex:v,over:Y,setNodeRef:te,setActivatorNodeRef:le,setDroppableNodeRef:F,setDraggableNodeRef:U,transform:ze??ne,transition:Pe()};function Pe(){if(ze||Te&&ke.current.newIndex===_)return w1e;if(!(Ne&&!gj(D)||!u)&&(ae||pe))return md.Transition.toString({...u,property:tY})}}function S1e(e,t){var a,s;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(a=e?.draggable)!=null?a:t.draggable,droppable:(s=e?.droppable)!=null?s:t.droppable}}function Xv(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const _1e=[bn.Down,bn.Right,bn.Up,bn.Left],A1e=(e,t)=>{let{context:{active:a,collisionRect:s,droppableRects:r,droppableContainers:i,over:o,scrollableAncestors:l}}=t;if(_1e.includes(e.code)){if(e.preventDefault(),!a||!s)return;const c=[];i.getEnabled().forEach(f=>{if(!f||f!=null&&f.disabled)return;const p=r.get(f.id);if(p)switch(e.code){case bn.Down:s.top<p.top&&c.push(f);break;case bn.Up:s.top>p.top&&c.push(f);break;case bn.Left:s.left>p.left&&c.push(f);break;case bn.Right:s.left<p.left&&c.push(f);break}});const u=sje({collisionRect:s,droppableRects:r,droppableContainers:c});let d=IV(u,"id");if(d===o?.id&&u.length>1&&(d=u[1].id),d!=null){const f=i.get(a.id),p=i.get(d),x=p?r.get(p.id):null,y=p?.node.current;if(y&&x&&f&&p){const v=pj(y).some((T,A)=>l[A]!==T),j=nY(f,p),w=T1e(f,p),S=v||!j?{x:0,y:0}:{x:w?s.width-x.width:0,y:w?s.height-x.height:0},_={x:x.left,y:x.top};return S.x&&S.y?_:Lp(_,S)}}}};function nY(e,t){return!Xv(e)||!Xv(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function T1e(e,t){return!Xv(e)||!Xv(t)||!nY(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const Do=(e,t="")=>`${t} ${new Intl.NumberFormat("en-US",{minimumFractionDigits:0}).format(e||0)}`,Vk=e=>e?new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",k1e=e=>{if(!e)return 0;const t=new Date-new Date(e);return Math.floor(t/(1e3*60*60*24))},E1e=(e,t)=>{if(!e||e.length===0)return;const a=e.map(c=>({ID:c.id,Name:c.name||`${c.first_name} ${c.last_name}`,Company:c.company_name||c.account?.name||"",Stage:c.stage||c.status,Amount:c.amount||0,Date:Vk(c.created_at)})),s=Object.keys(a[0]).join(","),r=a.map(c=>Object.values(c).map(u=>typeof u=="string"?`"${u.replace(/"/g,'""')}"`:u).join(",")),i="data:text/csv;charset=utf-8,"+[s,...r].join(`
`),o=encodeURI(i),l=document.createElement("a");l.setAttribute("href",o),l.setAttribute("download",`${t}.csv`),document.body.appendChild(l),l.click(),document.body.removeChild(l)},Yk=({label:e,count:t,value:a,width:s,color:r,onClick:i,isActive:o,isLead:l,weightedValue:c,currencySymbol:u,conversionRate:d,compact:f=!1})=>n.jsxs("div",{className:"flex flex-col items-center w-full",children:[d&&n.jsx("div",{className:`flex justify-center relative z-0 ${f?"-my-1":"-my-2 mb-1"}`,children:n.jsxs("div",{className:`bg-gray-100 text-gray-500 font-bold rounded-full border border-white shadow-sm flex items-center ${f?"text-[8px] px-1.5":"text-[10px] px-2 py-0.5"}`,children:[n.jsx(JT,{className:"mr-1"})," ",d,"%"]})}),n.jsxs("div",{onClick:i,className:`w-full relative group cursor-pointer transition-all duration-300 transform ${o?"scale-105 z-10":"hover:scale-102 hover:opacity-90"}`,children:[n.jsxs("div",{className:"flex justify-between items-end mb-1 px-1",children:[n.jsx("span",{className:`${f?"text-[10px]":"text-xs"} font-bold uppercase tracking-wider ${o?"text-blue-700":"text-gray-500"}`,children:e}),n.jsx("span",{className:`${f?"text-[10px]":"text-xs"} text-gray-400`,children:t})]}),n.jsxs("div",{className:`${f?"h-6":"h-10"} w-full bg-gray-100 rounded-r-lg overflow-hidden flex items-center relative shadow-sm`,children:[n.jsx("div",{className:`h-full ${r} transition-all duration-700 ease-out flex items-center px-2 text-white font-bold relative overflow-hidden`,style:{width:s},children:n.jsx("span",{className:`z-10 drop-shadow-md ${f?"text-xs":"text-sm"}`,children:l?t:Do(a,u)})}),!l&&c>0&&n.jsx("div",{className:"absolute left-0 top-0 h-full bg-white opacity-20 z-20",style:{width:`${c/a*parseFloat(s)}%`}})]})]})]}),L1e=({id:e,children:t})=>{const{attributes:a,listeners:s,setNodeRef:r,transform:i,transition:o,isDragging:l}=C1e({id:e}),c={transform:md.Transform.toString(i),transition:o,zIndex:l?50:"auto",opacity:l?.5:1,position:"relative"};return n.jsx("div",{ref:r,style:c,className:"h-full",children:xt.cloneElement(t,{dragHandleProps:{...a,...s}})})},P1e=({user:e,metrics:t,stages:a,currencySymbol:s,target:r,dragHandleProps:i})=>{const o=t.metrics.CLOSED_WON?.value||0,l=t.metrics.CLOSED_LOST?.value||0,c=t.metrics.CLOSED_WON.count+t.metrics.CLOSED_LOST.count,u=c>0?(t.metrics.CLOSED_WON.count/c*100).toFixed(0):0,d=r>0?o/r*100:0;return n.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md border border-gray-100 flex flex-col h-full hover:shadow-lg transition-shadow relative group",children:[n.jsxs("div",{className:"flex flex-col mb-4 pb-4 border-b border-gray-100",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-bold mr-3 flex-shrink-0",children:e.name.charAt(0)}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-gray-800 text-sm",children:e.name}),n.jsxs("div",{className:"flex gap-2 text-[10px] mt-1",children:[n.jsxs("span",{className:"text-green-600 bg-green-50 px-1.5 py-0.5 rounded border border-green-100",children:["Win: ",u,"%"]}),n.jsxs("span",{className:"text-red-600 bg-red-50 px-1.5 py-0.5 rounded border border-red-100",children:["Lost: ",Do(l,s)]})]})]})]}),i&&n.jsx("button",{...i,className:"p-1.5 text-gray-300 hover:text-blue-500 hover:bg-blue-50 rounded-md cursor-grab active:cursor-grabbing transition-colors touch-none",title:"Drag to reorder",children:n.jsx(Kie,{size:16})})]}),r>0?n.jsxs("div",{className:"w-full mt-2 bg-gray-50 p-2 rounded-lg border border-gray-100",children:[n.jsxs("div",{className:"flex justify-between items-center text-[10px] text-gray-500 mb-1",children:[n.jsx("span",{className:"font-semibold text-gray-600",children:"Target Achievement"}),n.jsxs("span",{className:d>=100?"text-green-600 font-bold":"text-blue-600 font-bold",children:[d.toFixed(0),"%"]})]}),n.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden mb-1",children:n.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${d>=100?"bg-green-500":"bg-blue-500"}`,style:{width:`${Math.min(d,100)}%`}})}),n.jsxs("div",{className:"flex justify-between text-[9px] text-gray-400",children:[n.jsxs("span",{children:["Achieved: ",n.jsx("span",{className:"text-gray-700 font-medium",children:Do(o,s)})]}),n.jsxs("span",{children:["Target: ",Do(r,s)]})]})]}):n.jsx("div",{className:"text-[10px] text-gray-400 italic mt-1 text-center bg-gray-50 p-1 rounded",children:"No target assigned"})]}),n.jsx("div",{className:"flex-grow space-y-2",children:a.map((f,p)=>{const x=t.metrics[f.key];let y=null;if(p>0){const N=a[p-1].key,v=t.metrics[N].count;v>0&&(y=(x.count/v*100).toFixed(0))}return n.jsx(Yk,{label:f.label,count:x.count,value:x.value,width:x.width,color:x.color,isLead:!f.isDeal,weightedValue:x.weightedValue,currencySymbol:s,conversionRate:y,compact:!0,onClick:()=>{},isActive:!1},f.key)})})]})},D1e=({data:e,stageKey:t,currencySymbol:a,basePath:s="/admin"})=>{const r=jt(),[i,o]=h.useState({key:null,direction:"desc"}),l=t==="LEADS",c=t==="CLOSED_WON",u=t==="CLOSED_LOST",d=!l&&!c&&!u,f=h.useMemo(()=>i.key?[...e].sort((y,N)=>{let v=y[i.key],j=N[i.key];return(i.key==="amount"||i.key==="probability")&&(v=parseFloat(y[i.key]||0),j=parseFloat(N[i.key]||0)),v<j?i.direction==="asc"?-1:1:v>j?i.direction==="asc"?1:-1:0}):e,[e,i]),p=y=>{o({key:y,direction:i.key===y&&i.direction==="desc"?"asc":"desc"})},x=({columnKey:y})=>i.key!==y?n.jsx(JT,{className:"inline ml-1 opacity-0 group-hover:opacity-30"}):i.direction==="asc"?n.jsx(Bie,{className:"inline ml-1 text-blue-600"}):n.jsx(JT,{className:"inline ml-1 text-blue-600"});return!e||e.length===0?n.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-400 bg-gray-50 rounded-xl border-2 border-dashed border-gray-200",children:[n.jsx(vL,{size:48,className:"mb-4 opacity-50"}),n.jsx("p",{className:"font-medium",children:"No records in this stage"})]}):n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden flex flex-col h-full",children:n.jsx("div",{className:"overflow-x-auto flex-grow",children:n.jsxs("table",{className:"w-full text-left border-collapse",children:[n.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:n.jsxs("tr",{children:[n.jsxs("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer group",onClick:()=>p("name"),children:["Name ",n.jsx(x,{columnKey:"name"})]}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Company"}),l&&n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Contact Info"}),d&&n.jsxs(n.Fragment,{children:[n.jsxs("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right cursor-pointer group",onClick:()=>p("amount"),children:["Value ",n.jsx(x,{columnKey:"amount"})]}),n.jsxs("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-center cursor-pointer group",onClick:()=>p("probability"),children:["Prob. ",n.jsx(x,{columnKey:"probability"})]}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-center",children:"Age"})]}),c&&n.jsxs("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right text-green-600 cursor-pointer group",onClick:()=>p("amount"),children:["Booked ",n.jsx(x,{columnKey:"amount"})]}),u&&n.jsxs(n.Fragment,{children:[n.jsxs("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right text-red-600 cursor-pointer group",onClick:()=>p("amount"),children:["Lost Value ",n.jsx(x,{columnKey:"amount"})]}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-center",children:"Lost Date"})]}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right",children:"Owner"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-100",children:f.map(y=>{const N=l?0:k1e(y.stage_updated_at||y.created_at),v=N>30&&d;return n.jsxs("tr",{className:"hover:bg-blue-50 transition-colors cursor-pointer group",onClick:()=>r(l?`${s}/leads/${y.id}`:`${s}/deals/info?id=${y.id}`),children:[n.jsxs("td",{className:"p-4",children:[n.jsx("p",{className:"font-bold text-gray-800 text-sm group-hover:text-blue-600 transition-colors",children:l?`${y.first_name} ${y.last_name}`:y.name}),n.jsx("p",{className:"text-xs text-gray-400 mt-0.5",children:Vk(y.created_at)})]}),n.jsx("td",{className:"p-4 text-sm text-gray-600",children:l?y.company_name:y.account?.name}),l&&n.jsxs("td",{className:"p-4 text-xs text-gray-500",children:[y.email&&n.jsxs("div",{className:"flex items-center mb-1",children:[n.jsx(sa,{className:"mr-1"})," ",y.email]}),y.phone&&n.jsxs("div",{className:"flex items-center",children:[n.jsx(Ot,{className:"mr-1"})," ",y.phone]})]}),d&&n.jsxs(n.Fragment,{children:[n.jsx("td",{className:"p-4 text-right font-medium text-gray-700",children:Do(y.amount,a)}),n.jsx("td",{className:"p-4 text-center",children:n.jsxs("span",{className:`inline-block px-2 py-1 rounded text-xs font-bold ${y.probability>=80?"bg-green-100 text-green-700":y.probability>=50?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-600"}`,children:[y.probability,"%"]})}),n.jsx("td",{className:"p-4 text-center",children:v?n.jsxs("div",{className:"flex items-center justify-center text-red-600 bg-red-50 px-2 py-1 rounded border border-red-100",title:"Stuck for >30 days",children:[n.jsx(Gi,{size:14,className:"mr-1"}),n.jsxs("span",{className:"text-xs font-bold",children:[N,"d"]})]}):n.jsxs("span",{className:"text-xs text-gray-400",children:[N,"d"]})})]}),c&&n.jsx("td",{className:"p-4 text-right font-bold text-green-700",children:Do(y.amount,a)}),u&&n.jsxs(n.Fragment,{children:[n.jsx("td",{className:"p-4 text-right font-bold text-red-600 opacity-75",children:Do(y.amount,a)}),n.jsx("td",{className:"p-4 text-center text-xs text-gray-500",children:Vk(y.stage_updated_at)})]}),n.jsx("td",{className:"p-4 text-right",children:n.jsxs("div",{className:"flex items-center justify-end text-gray-500 text-xs",children:[n.jsx(nn,{className:"mr-1"}),l?y.lead_owner?.first_name||y.owner?.first_name||y.assigned_to?.first_name||"Unassigned":y.assigned_deals?.first_name||y.deal_creator?.first_name||"Unassigned"]})})]},y.id)})})]})})})},vj=({leads:e,deals:t,currencySymbol:a,targets:s=[],basePath:r="/admin",currentUser:i=null})=>{const[o,l]=h.useState("ALL"),[c,u]=h.useState("ALL"),[d,f]=h.useState("ALL"),[p,x]=h.useState("AGGREGATE"),y=i?i.id.toString():d,N=!!i,[v,j]=h.useState([]),w=Fx(zf(am,{activationConstraint:{distance:5}}),zf(lP,{coordinateGetter:A1e})),S=h.useMemo(()=>{const $=new Date;if(c==="THIS_MONTH")return{start:new Date($.getFullYear(),$.getMonth(),1),end:new Date($.getFullYear(),$.getMonth()+1,0)};if(c==="THIS_QUARTER"){const D=Math.floor($.getMonth()/3)*3;return{start:new Date($.getFullYear(),D,1),end:new Date($.getFullYear(),D+3,0)}}return c==="THIS_YEAR"?{start:new Date($.getFullYear(),0,1),end:new Date($.getFullYear(),11,31)}:null},[c]),_=h.useMemo(()=>s.filter($=>{if(d!=="ALL"){const D=$.user?.id||$.user_id||$.assigned_to;if(parseInt(D)!==parseInt(d))return!1}if(S){const D=new Date($.start_date),q=new Date($.end_date);return D<=S.end&&q>=S.start}return!0}),[s,d,S]),E=h.useMemo(()=>{const $=new Map,D=q=>{q&&q.id&&$.set(q.id,`${q.first_name} ${q.last_name}`)};return e.forEach(q=>D(q.lead_owner||q.owner||q.assigned_to)),t.forEach(q=>{D(q.assigned_deals),D(q.deal_creator)}),Array.from($.entries()).map(([q,G])=>({id:q,name:G}))},[e,t]),T=h.useMemo(()=>{const $=new Date;let D=null;c==="THIS_MONTH"?D=new Date($.getFullYear(),$.getMonth(),1):c==="THIS_QUARTER"?D=new Date($.getFullYear(),Math.floor($.getMonth()/3)*3,1):c==="THIS_YEAR"&&(D=new Date($.getFullYear(),0,1));const q=_e=>{const te=new Date(_e.created_at);if(D&&te<D)return!1;if(y!=="ALL"){const ae=parseInt(y);return!!(_e.lead_owner&&(_e.lead_owner.id||_e.lead_owner)===ae||_e.assigned_to?.id===ae||_e.owner?.id===ae||_e.assigned_deals?.id===ae||_e.created_by===ae)}return!0},G=e.filter(q),U=t.filter(q),V=[{key:"LEADS",label:"Top Leads",color:"bg-blue-400",isDeal:!1},{key:"PROSPECTING",label:"Prospecting",color:"bg-blue-600",isDeal:!0},{key:"QUALIFICATION",label:"Qualification",color:"bg-indigo-600",isDeal:!0},{key:"PROPOSAL",label:"Proposal",color:"bg-purple-600",isDeal:!0},{key:"NEGOTIATION",label:"Negotiation",color:"bg-pink-600",isDeal:!0},{key:"CLOSED_WON",label:"Closed Won",color:"bg-emerald-500",isDeal:!0},{key:"CLOSED_LOST",label:"Closed Lost",color:"bg-red-500",isDeal:!0}],Z=(_e,te)=>{const ae=V.reduce((Ne,he)=>(Ne[he.key]={...he,count:0,value:0,weightedValue:0,items:[]},Ne),{});ae.LEADS.count=_e.length,ae.LEADS.items=_e,te.forEach(Ne=>{const he=(Ne.stage||"").toUpperCase();if(ae[he]){ae[he].count++,ae[he].items.push(Ne);const ve=parseFloat(Ne.amount||0);ae[he].value+=ve,ae[he].weightedValue+=ve*((Ne.probability||0)/100)}});const ye=Math.max(...Object.values(ae).map(Ne=>Ne.count),1);return Object.keys(ae).forEach(Ne=>{const he=ae[Ne];he.width=he.count===0?"0%":`${Math.max(he.count/ye*100,15)}%`}),{metrics:ae,filteredDeals:te,filteredLeads:_e}},Y=Z(G,U),le=[];return p==="COMPARE"&&(y==="ALL"?E:E.filter(te=>te.id===parseInt(y))).forEach(te=>{const ae=parseInt(te.id),ye=G.filter(ne=>(ne.lead_owner?.id||ne.lead_owner||ne.assigned_to?.id||ne.owner?.id)===ae),Ne=U.filter(ne=>(ne.assigned_deals?.id||ne.created_by)===ae),he=_.find(ne=>{const Se=ne.user?.id||ne.user_id||ne.assigned_to;return parseInt(Se)===ae}),ve=parseFloat(he?.amount||he?.target_amount||he?.value||0);(ye.length>0||Ne.length>0||ve>0)&&le.push({user:te,data:Z(ye,Ne),target:ve})}),{stages:V,aggregate:Y,userGroups:le}},[t,e,c,y,p,E,_]),A=h.useMemo(()=>{if(!T.userGroups.length)return[];const $=[...T.userGroups];return v.length>0&&$.sort((D,q)=>{const G=v.indexOf(D.user.id),U=v.indexOf(q.user.id);return G!==-1&&U!==-1?G-U:G!==-1?-1:U!==-1?1:0}),$},[T.userGroups,v]),L=$=>{const{active:D,over:q}=$;D.id!==q.id&&j(()=>{const G=A.map(Z=>Z.user.id),U=G.indexOf(D.id),V=G.indexOf(q.id);return uP(G,U,V)})},M=h.useMemo(()=>{const $=_.reduce((ae,ye)=>ae+parseFloat(ye.amount||ye.target_amount||ye.value||0),0),D=T.aggregate.metrics,q=D.CLOSED_WON?.value||0,G=D.CLOSED_WON?.count||0,U=D.CLOSED_LOST?.value||0,V=D.CLOSED_LOST?.count||0,Z=D.LEADS?.count||0,Y=$>0?q/$*100:0,le=G+V,_e=le>0?G/le*100:0,te=Z>0?G/Z*100:0;return{totalTarget:$,totalWon:q,totalLost:U,progress:Y,winRate:_e,conversionRate:te}},[_,T]),F=h.useMemo(()=>o==="ALL"?[]:T.aggregate.metrics[o]?.items||[],[o,T]);return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 flex flex-col h-full",children:[n.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center",children:[n.jsx(vL,{className:"mr-2"})," ",N?"My Pipeline":"Pipeline Intelligence"]}),n.jsx("p",{className:"text-sm text-gray-500",children:N?"Your personal pipeline performance and metrics.":"Analyze pipeline velocity and bottlenecks."})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 mt-4 md:mt-0",children:[n.jsxs("select",{value:c,onChange:$=>u($.target.value),className:"bg-gray-50 border border-gray-200 text-gray-700 text-xs rounded-lg p-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"ALL",children:"All Time"}),n.jsx("option",{value:"THIS_MONTH",children:"This Month"}),n.jsx("option",{value:"THIS_QUARTER",children:"This Quarter"}),n.jsx("option",{value:"THIS_YEAR",children:"This Year"})]}),!N&&n.jsxs(n.Fragment,{children:[n.jsxs("select",{value:d,onChange:$=>f($.target.value),className:"bg-gray-50 border border-gray-200 text-gray-700 text-xs rounded-lg p-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"ALL",children:"All Users"}),E.map($=>n.jsx("option",{value:$.id,children:$.name},$.id))]}),n.jsxs("div",{className:"flex bg-gray-100 p-0.5 rounded-lg",children:[n.jsx("button",{onClick:()=>x("AGGREGATE"),className:`px-2 py-1 rounded-md text-xs font-medium transition-all ${p==="AGGREGATE"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Aggregate"}),n.jsx("button",{onClick:()=>x("COMPARE"),className:`px-2 py-1 rounded-md text-xs font-medium transition-all ${p==="COMPARE"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Compare"})]})]})]})]}),p==="COMPARE"?n.jsx(Hx,{sensors:w,collisionDetection:Ux,onDragEnd:L,children:n.jsx(x1e,{items:A.map($=>$.user.id),strategy:mP,children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 overflow-x-auto pb-4",children:[A.map($=>n.jsx(L1e,{id:$.user.id,children:n.jsx(P1e,{user:$.user,metrics:$.data,stages:T.stages.filter(D=>D.key!=="CLOSED_LOST"),currencySymbol:a,target:$.target})},$.user.id)),A.length===0&&n.jsx("div",{className:"col-span-full text-center py-10 text-gray-400",children:"No data for selected filters."})]})})}):n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[n.jsxs("div",{className:"lg:col-span-4 flex flex-col space-y-2 relative",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute left-6 top-4 bottom-4 w-0.5 bg-gray-100 -z-0"}),T.stages.filter($=>$.key!=="CLOSED_LOST").map(($,D)=>{const q=T.aggregate.metrics[$.key];let G=null;if(D>0){const U=T.stages[D-1].key,V=T.aggregate.metrics[U].count;V>0&&(G=(q.count/V*100).toFixed(0))}return n.jsx(Yk,{label:$.label,count:q.count,value:q.value,width:q.width,color:q.color,isLead:!$.isDeal,weightedValue:q.weightedValue,currencySymbol:a,isActive:o===$.key,conversionRate:G,onClick:()=>l($.key)},$.key)})]}),n.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[n.jsx("div",{className:"mb-2 text-xs font-bold text-gray-400 uppercase",children:"Funnel Health"}),n.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center mb-4",children:[n.jsxs("div",{className:"bg-green-50 rounded p-2 border border-green-100",children:[n.jsx("p",{className:"text-[9px] text-green-600 uppercase font-bold",children:"Win Rate"}),n.jsxs("p",{className:"text-sm font-bold text-gray-800",children:[M.winRate.toFixed(0),"%"]})]}),n.jsxs("div",{className:"bg-blue-50 rounded p-2 border border-blue-100",children:[n.jsx("p",{className:"text-[9px] text-blue-600 uppercase font-bold",children:"Conversion"}),n.jsxs("p",{className:"text-sm font-bold text-gray-800",children:[M.conversionRate.toFixed(0),"%"]})]}),n.jsxs("div",{className:"bg-red-50 rounded p-2 border border-red-100",children:[n.jsx("p",{className:"text-[9px] text-red-600 uppercase font-bold",children:"Lost Value"}),n.jsx("p",{className:"text-sm font-bold text-gray-800",children:Do(M.totalLost,a)})]})]}),n.jsx(Yk,{label:"Closed Lost",count:T.aggregate.metrics.CLOSED_LOST.count,value:T.aggregate.metrics.CLOSED_LOST.value,width:T.aggregate.metrics.CLOSED_LOST.width,color:"bg-red-500 opacity-90",isLead:!1,weightedValue:0,currencySymbol:a,isActive:o==="CLOSED_LOST",onClick:()=>l("CLOSED_LOST")},"CLOSED_LOST"),n.jsxs("div",{className:"bg-gray-50 p-2 rounded-lg border border-gray-100 mt-4",children:[n.jsxs("div",{className:"flex justify-between items-center text-[10px] mb-1",children:[n.jsxs("span",{className:"font-bold text-gray-600 flex items-center",children:[n.jsx(mr,{className:"mr-1"})," Total Target"]}),n.jsxs("span",{className:M.progress>=100?"text-green-600 font-bold":"text-blue-600 font-bold",children:[M.progress.toFixed(0),"%"]})]}),n.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden mb-1",children:n.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${M.progress>=100?"bg-green-500":"bg-blue-500"}`,style:{width:`${Math.min(M.progress,100)}%`}})}),n.jsxs("div",{className:"flex justify-between text-[9px] text-gray-400",children:[n.jsxs("span",{children:["Achieved: ",n.jsx("span",{className:"text-gray-700 font-medium",children:Do(M.totalWon,a)})]}),n.jsxs("span",{children:["Goal: ",Do(M.totalTarget,a)]})]})]})]})]}),n.jsxs("div",{className:"lg:col-span-8 h-[600px] flex flex-col",children:[n.jsxs("div",{className:"bg-gray-50 p-3 rounded-t-xl border-b border-gray-200 flex justify-between items-center",children:[n.jsx("h3",{className:"text-sm font-bold text-gray-800 flex items-center",children:o==="ALL"?n.jsx("span",{children:"Select a stage to view details"}):n.jsxs(n.Fragment,{children:[n.jsx("span",{className:`w-2.5 h-2.5 rounded-full mr-2 ${T.aggregate.metrics[o]?.color}`}),T.stages.find($=>$.key===o)?.label," Details",n.jsxs("span",{className:"ml-2 px-2 py-0.5 bg-white border border-gray-200 text-gray-600 text-[10px] rounded-full",children:[F.length," records"]})]})}),o!=="ALL"&&F.length>0&&n.jsxs("button",{onClick:()=>E1e(F,`Funnel_${o}`),className:"text-[10px] font-bold text-blue-600 hover:bg-blue-100 px-2 py-1 rounded transition-colors flex items-center",children:[n.jsx(qo,{className:"mr-1"})," Export"]})]}),o==="ALL"?n.jsxs("div",{className:"bg-white flex-grow rounded-b-xl border border-gray-100 flex flex-col items-center justify-center p-12 text-center text-gray-400",children:[n.jsx(Vie,{size:48,className:"mb-4 text-blue-100"}),n.jsx("p",{children:"Click on any stage bar (including Lost Deals) to inspect records."})]}):n.jsx(D1e,{data:F,stageKey:o,currencySymbol:a,basePath:r})]})]})]})},O1e=(e,t="")=>`${t} ${new Intl.NumberFormat("en-US",{minimumFractionDigits:0}).format(e)}`,M1e=e=>{const t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),a=t.getUTCDay()||7;t.setUTCDate(t.getUTCDate()+4-a);const s=new Date(Date.UTC(t.getUTCFullYear(),0,1));return Math.ceil(((t-s)/864e5+1)/7)},fP=({currencySymbol:e=""})=>{const[t,a]=h.useState("month"),[s,r]=h.useState([]),[i,o]=h.useState([]),[l,c]=h.useState([]),[u,d]=h.useState(!1),f=new Date,p=f.getFullYear(),x=f.getMonth()+1,y=M1e(f),N=h.useCallback(async()=>{d(!0);try{const S=new URLSearchParams;S.append("period_type","MONTHLY"),S.append("period_year",p),S.append("period_number",x);const _=await se.get(`/targets/leaderboard?${S.toString()}`).catch(()=>({data:{entries:[]}}));o(_.data?.entries||[]);const E=new URLSearchParams;E.append("period_type","ANNUAL"),E.append("period_year",p);const T=await se.get(`/targets/leaderboard?${E.toString()}`).catch(()=>({data:{entries:[]}}));c(T.data?.entries||[]);const A=new Date,L=new Date;L.setDate(L.getDate()-7);const M=new URLSearchParams;M.append("start_date",L.toISOString().split("T")[0]),M.append("end_date",A.toISOString().split("T")[0]);const F=await se.get(`/targets/leaderboard?${M.toString()}`).catch(()=>({data:{entries:[]}}));r(F.data?.entries||[])}catch(S){console.error("Error fetching leaderboard data:",S)}finally{d(!1)}},[p,x]);h.useEffect(()=>{N()},[N]);const v=h.useMemo(()=>{let S=[];switch(t){case"week":S=s;break;case"month":S=i;break;case"year":S=l;break;default:S=i}return Array.isArray(S)?S.slice(0,5):[]},[t,s,i,l]),j=[{id:"week",label:"Week"},{id:"month",label:"Month"},{id:"year",label:"Year"}],w=S=>{switch(S){case 0:return"bg-yellow-100 text-yellow-700 border-yellow-300";case 1:return"bg-gray-100 text-gray-600 border-gray-300";case 2:return"bg-orange-100 text-orange-700 border-orange-300";default:return"bg-gray-50 text-gray-500 border-gray-200"}};return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[n.jsx("div",{className:"flex justify-between items-center mb-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(id,{className:"text-blue-500",size:20}),n.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Top 5 Performers"})]})}),n.jsx("div",{className:"flex space-x-1 mb-4 bg-gray-100 rounded-lg p-1",children:j.map(S=>n.jsx("button",{onClick:()=>a(S.id),className:`flex-1 py-1.5 px-3 text-xs font-medium rounded-md transition-all duration-200 ${t===S.id?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:S.label},S.id))}),u?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"})}):v.length>0?n.jsx("div",{className:"space-y-3 flex-1",children:v.map((S,_)=>n.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-gray-50 transition-colors",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold border ${w(_)}`,children:_+1}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-800 truncate max-w-[120px]",children:S.user_name||"Unknown Rep"}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx("div",{className:"w-16 h-1.5 bg-gray-200 rounded-full overflow-hidden",children:n.jsx("div",{className:`h-full rounded-full ${S.achievement_percentage>=100?"bg-green-500":S.achievement_percentage>=50?"bg-yellow-500":"bg-red-400"}`,style:{width:`${Math.min(S.achievement_percentage,100)}%`}})}),n.jsxs("span",{className:"text-[10px] text-gray-500",children:[S.achievement_percentage?.toFixed(1),"%"]})]})]})]}),n.jsx("p",{className:"text-sm font-bold text-gray-900",children:O1e(S.achieved_amount||0,e)})]},S.user_id||_))}):n.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-gray-400",children:[n.jsx(Pt,{size:32,className:"mb-2 opacity-50"}),n.jsx("p",{className:"text-sm",children:"No data for this period"})]}),n.jsx("div",{className:"mt-auto pt-3 border-t border-gray-100",children:n.jsxs("p",{className:"text-[10px] text-gray-400 text-center",children:[t==="week"&&`Week ${y}, ${p}`,t==="month"&&`${f.toLocaleString("default",{month:"long"})} ${p}`,t==="year"&&`Year ${p}`]})})]})},I1e=e=>n.jsx(Vt,{...e}),$1e=e=>n.jsx(wd,{...e}),hP=e=>n.jsx(Vs,{...e}),R1e=e=>n.jsx(lx,{...e}),z1e=e=>n.jsx(aN,{...e}),F1e=e=>n.jsx(Pt,{...e}),U1e=e=>n.jsx(Ot,{...e}),B1e=e=>n.jsx(rN,{...e}),aY=e=>n.jsx(sN,{...e}),H1e=e=>n.jsx(ra,{...e}),sY=e=>n.jsx(nn,{...e}),q1e=e=>n.jsx(Kn,{...e}),rY=e=>n.jsx(tn,{...e}),W1e=e=>n.jsx(fn,{...e}),iY=e=>n.jsx(mr,{...e}),G1e=e=>n.jsx(aa,{...e}),V1e=e=>n.jsx(Pt,{...e}),Y1e=e=>n.jsx(zs,{...e}),Q1e=e=>n.jsx(Zl,{...e}),K1e=e=>n.jsx(ks,{...e}),oY=(e,t="")=>{const a=parseFloat(e)||0;return new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short",maximumFractionDigits:1}).format(a).replace(/^/,`${t} `)},X1e=e=>{if(!e)return 0;const t=new Date-new Date(e);return Math.floor(t/(1e3*60*60*24))},Z1e=e=>{switch(e){case"Negotiation":return{text:"text-purple-700",bg:"bg-purple-100"};case"Proposal":return{text:"text-red-700",bg:"bg-red-100"};case"Qualification":return{text:"text-yellow-700",bg:"bg-yellow-100"};case"Prospecting":return{text:"text-blue-700",bg:"bg-blue-100"};case"Closed Won":return{text:"text-green-700",bg:"bg-green-100"};case"Closed Lost":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},J1e=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},eCe=e=>{switch(e){case"call":return{Icon:U1e,color:"text-red-500",bgColor:"bg-red-100"};case"qualification":return{Icon:B1e,color:"text-green-600",bgColor:"bg-green-100"};default:return{Icon:F1e,color:"text-blue-500",bgColor:"bg-blue-100"}}},tCe=e=>{switch(e.toUpperCase()){case"HIGH":return{text:"text-red-700",bg:"bg-red-100"};case"LOW":return{text:"text-blue-700",bg:"bg-blue-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},nCe=({searchQuery:e,onSearchChange:t,searchResults:a,onSearchResultClick:s})=>{const r=jt(),[i,o]=h.useState(!1),l=h.useRef(null),c=[{icon:$1e,label:"Account"},{icon:sY,label:"Contact"},{icon:q1e,label:"Leads"},{icon:rY,label:"Deals"},{icon:W1e,label:"Quotes"},{icon:iY,label:"Target"},{icon:G1e,label:"Task"},{icon:V1e,label:"Meeting"},{icon:Y1e,label:"Call"},{icon:K1e,label:"Audit"},{icon:Q1e,label:"Territory"}];h.useEffect(()=>{const f=p=>{l.current&&!l.current.contains(p.target)&&o(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const u=f=>{t(f.target.value),o(f.target.value.trim().length>0)},d=f=>{s&&s(f),o(!1)};return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 sm:p-4 flex flex-col items-start space-y-4 w-full",children:[n.jsxs("div",{className:"w-full flex justify-center relative",ref:l,children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg lg:mt-3 px-4 py-2 w-full max-w-md md:max-w-2xl lg:max-w-2xl focus-within:ring-2 focus-within:ring-blue-500 transition duration-150",children:[n.jsx(I1e,{size:20,className:"text-gray-400 mr-3 flex-shrink-0"}),n.jsx("input",{type:"text",placeholder:"Search Leads, Deals, or Accounts...",className:"focus:outline-none text-base w-full",value:e,onChange:u,onFocus:()=>e.trim().length>0&&o(!0)})]}),i&&Array.isArray(a)&&a.length>0&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:a.map((f,p)=>n.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition duration-150",onClick:()=>d(f),children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:f.name}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:f.type}),f.details&&n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:f.details})]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${f.type==="Lead"?"bg-blue-100 text-blue-600":f.type==="Deal"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:f.type})]})},p))})]}),n.jsx("div",{className:"w-full overflow-x-auto lg:overflow-x-hidden scroll-smooth flex justify-center",children:n.jsx("div",{className:"flex flex-nowrap space-x-3 lg:space-x-4 xl:space-x-3 px-2 sm:px-0",children:c.map((f,p)=>n.jsxs("div",{className:"relative flex-shrink-0 group",children:[n.jsx("button",{className:"p-3 text-gray-500 hover:text-gray-900 transition duration-150 rounded-full hover:bg-gray-100 focus:outline-none cursor-pointer","aria-label":f.label,title:f.label,onClick:()=>{const x={Account:"/admin/accounts",Contact:"/admin/contacts",Leads:"/admin/leads",Deals:"/admin/deals",Quotes:"/admin/quotes",Target:"/admin/targets",Task:"/admin/tasks",Meeting:"/admin/meetings",Call:"/admin/calls",Audit:"/admin/audit",Territory:"/admin/territory"};x[f.label]&&r(x[f.label])},children:n.jsx(f.icon,{size:24,className:"lg:scale-95"})}),n.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-1.5 bg-gray-900 text-white text-xs font-semibold rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-75 ease-in-out z-50 shadow-lg",children:[f.label,n.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]},p))})})]})},aCe=({action:e,description:t,entity_type:a,entity_name:s,timestamp:r})=>{const i=jt(),o=d=>{if(!d)return"Unknown";const f=new Date(d),x=new Date-f,y=Math.floor(x/6e4),N=Math.floor(x/36e5),v=Math.floor(x/864e5);return y<1?"Just now":y<60?`${y} min ago`:N<24?`${N} hour${N>1?"s":""} ago`:v<7?`${v} day${v>1?"s":""} ago`:f.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},l=e||t||"Action",c=s||a||"System",u=o(r);return n.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i("/admin/audit"),children:[n.jsxs("p",{className:"text-sm text-gray-800 flex-grow font-medium",children:[l," ",n.jsxs("span",{className:"text-gray-500 italic text-xs",children:["(",c,")"]})]}),n.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-4",children:u})]})},sCe=({logs:e,loading:t})=>{const a=jt();return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Recent Logs"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/admin/audit"),children:[n.jsx("span",{children:"See All"}),n.jsx(aY,{size:14,className:"transform -rotate-45"})]})]}),e&&e.length>0?n.jsx("ul",{className:"space-y-1",children:e.slice(0,3).map((s,r)=>n.jsx(aCe,{...s},r))}):n.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No recent logs"})]})},rCe=({icon:e,title:t,value:a,color:s,bgColor:r,loading:i,onClick:o})=>n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o||(()=>console.log(`Clicked metric card: ${t}`)),children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:20})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a||0})]})]}),iCe=({revenueData:e,loading:t})=>{const a=jt(),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=h.useMemo(()=>{if(!e||e.length===0){const N=new Date().getMonth(),v=[],j=[];for(let w=0;w<=N;w++)v.push(s[w]),j.push(0);return{labels:v,revenues:j,maxRevenue:0}}const l={};e.forEach(y=>{const N=y.close_date||y.closeDate||null,v=y.stage||"",j=v.toUpperCase()==="CLOSED_WON"||v==="CLOSED_WON";let w=y.amount;w&&typeof w=="object"&&w.toString?w=parseFloat(w.toString()):w=parseFloat(w)||0;const S=w>0;if(N&&N!==null&&j&&S)try{let _=new Date(N);if(isNaN(_.getTime())){const E=String(N).split("T")[0];_=new Date(E+"T00:00:00")}if(!isNaN(_.getTime())){const E=_.getFullYear(),T=_.getMonth()+1,A=`${E}-${String(T).padStart(2,"0")}`;l[A]||(l[A]=0),l[A]+=w}}catch(_){console.error("Error parsing deal date:",N,_)}});const c=Object.keys(l).map(y=>parseInt(y.split("-")[0])),u=c.length>0?[...new Set(c)].sort():[],d=new Date().getFullYear(),f=[],p=[];for(let y=0;y<12;y++){const N=`${d}-${String(y+1).padStart(2,"0")}`;f.push(s[y]),p.push(l[N]||0)}if(u.length>0){const y=Math.max(...u);if(y>d)for(let N=d+1;N<=y;N++)for(let v=0;v<12;v++){const j=`${N}-${String(v+1).padStart(2,"0")}`,w=l[j]||0;f.push(`${s[v]} ${N}`),p.push(w)}}const x=Math.max(...p,1);return{labels:f,revenues:p,maxRevenue:x}},[e]),i=r.labels,o=r.revenues;return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Overview"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/admin/deals"),children:[n.jsx("span",{children:"See All"}),n.jsx(aY,{size:14,className:"transform -rotate-45"})]})]}),n.jsx("div",{className:"h-80 relative flex-1 flex items-center justify-center p-6",children:n.jsx("div",{className:"w-full h-full flex items-center justify-start lg:justify-center overflow-x-auto sm:overflow-x-hidden",children:i&&i.length>0&&o&&o.length>0?n.jsx(Ix,{xAxis:[{data:i,scaleType:"point"}],yAxis:[{valueFormatter:l=>l>=1e3?`${(l/1e3).toFixed(0)}k`:l.toString()}],series:[{data:o,showMark:!0,area:!0}],height:320,width:void 0,grid:{vertical:!0,horizontal:!0},margin:{top:40,right:40,bottom:50,left:50},sx:{width:"100%",maxWidth:"100%",minWidth:{xs:600,lg:"100%"}}}):n.jsxs("div",{className:"text-center text-gray-500",children:[n.jsx("p",{className:"text-sm",children:"No revenue data available"}),n.jsx("p",{className:"text-xs mt-2",children:"Closed won deals with close dates will appear here"})]})})})]})},_2=({title:e,items:t,children:a,onSeeAll:s})=>{const r=jt(),i=()=>{if(s)s();else{const o={"Latest Leads":"/admin/leads","Latest Deals":"/admin/deals","Upcoming Activities":"/admin/tasks"};o[e]&&r(o[e])}};return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col h-full",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e}),n.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:i,children:"See All"})]}),a]})},oCe=({first_name:e,last_name:t,company_name:a,source:s,created_at:r,id:i})=>{const o=jt(),{text:l,bg:c}=J1e(s||"Website"),u=x=>{if(!x)return"Unknown";const y=new Date(x),v=new Date-y,j=Math.floor(v/6e4),w=Math.floor(v/36e5),S=Math.floor(v/864e5);return j<60?`${j} min ago`:w<24?y.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):S<7?y.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):y.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},d=`${e||""} ${t||""}`.trim()||"Unknown",f=a||"Unknown Company",p=u(r);return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&o(`/admin/leads/${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800",children:d}),n.jsx("p",{className:"text-xs text-gray-500",children:f})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-400",children:p}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${l} ${c} px-2 py-0.5 rounded-full`,children:s||"Website"})]})]})})},lCe=({name:e,amount:t,account:a,stage:s,created_at:r,stage_updated_at:i,id:o,previousAmount:l,currencySymbol:c})=>{const u=jt(),f={PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"}[s]||s||"Unknown",{text:p,bg:x}=Z1e(f),y=X1e(i||r),N=y>30&&s!=="CLOSED_WON"&&s!=="CLOSED_LOST",v=parseFloat(t||0),j=l?v>=l?"up":"down":"up",w=j==="up"?R1e:z1e,S=j==="up"?"text-green-400":"text-red-400",_=a?.name||"Unknown Company";return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>o&&u(`/admin/deals/info?id=${o}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex-shrink",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("p",{className:"font-semibold text-sm text-gray-900",children:e||"Unnamed Deal"}),N&&n.jsxs("span",{className:"text-[10px] bg-red-100 text-red-600 px-1.5 py-0.5 rounded border border-red-200 font-bold flex items-center",children:[n.jsx(hP,{size:10,className:"mr-1"})," ",y," days stuck"]})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:_}),n.jsx("div",{className:"mt-1 flex items-center space-x-2",children:n.jsx("span",{className:`inline-block text-xs font-medium ${p} ${x} px-2 py-0.5 rounded-full`,children:f})})]}),n.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[n.jsx("p",{className:"text-md font-bold text-gray-800",children:oY(v,c)}),n.jsx(w,{size:16,className:`${S} mt-1`})]})]})})},cCe=({type:e,title:t,assignedTo:a,dueDate:s,scheduledDate:r,priority:i,id:o,activityType:l,fullData:c})=>{const u=jt(),f=l||{Call:"call",Meeting:"meeting",Task:"qualification"}[e]||"meeting",{Icon:p,color:x,bgColor:y}=eCe(f),{text:N,bg:v}=tCe(i||"MEDIUM"),S=(T=>{if(!T)return"No date set";const A=new Date(T),M=A-new Date,F=Math.floor(M/864e5);return F===0?`Today, ${A.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:F===1?`Tomorrow, ${A.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:F===-1?`Yesterday, ${A.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:A.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(s||r),_=a||"Unassigned",E=()=>{o&&(c?f==="call"?(sessionStorage.setItem("callDetailData",JSON.stringify(c)),u(`/admin/calls/info?id=${o}`)):f==="meeting"?(sessionStorage.setItem("meetingDetailData",JSON.stringify(c)),u(`/admin/meetings/info?id=${o}`)):u("/admin/tasks"):u(f==="call"?`/admin/calls/info?id=${o}`:f==="meeting"?`/admin/meetings/info?id=${o}`:"/admin/tasks"))};return n.jsxs("div",{className:"flex items-start py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:E,children:[n.jsx("div",{className:`p-2 rounded-lg ${y} mr-3 flex-shrink-0 mt-1`,children:n.jsx(p,{size:20,className:`${x}`})}),n.jsxs("div",{className:"flex-grow",children:[n.jsxs("p",{className:"font-medium text-gray-800 flex items-center mb-1",children:[n.jsx("span",{className:"text-xl leading-none mr-2",children:""}),t||"Untitled Activity"]}),n.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[n.jsxs("p",{className:"flex items-center",children:[n.jsx(hP,{size:14,className:"mr-1.5 text-gray-400"}),S]}),n.jsxs("p",{className:"flex items-center",children:[n.jsx(sY,{size:14,className:"mr-1.5 text-gray-400"}),"Assigned to: ",_]})]})]}),n.jsx("span",{className:`inline-block text-xs font-medium ${N} ${v} px-2 py-0.5 rounded-full flex-shrink-0 self-center ml-4`,children:(i||"MEDIUM").toUpperCase()})]})},dCe=()=>{const e=jt(),{user:t}=qt(),a=t?.company?.currency||"",[s,r]=h.useState([]),[i,o]=h.useState(0),[l,c]=h.useState({activeLeads:0,totalDeals:0,activeAccounts:0,overdueTasks:0}),[u,d]=h.useState([]),[f,p]=h.useState([]),[x,y]=h.useState([]),[N,v]=h.useState([]),[j,w]=h.useState([]),[S,_]=h.useState(!0),[E,T]=h.useState(null),[A,L]=h.useState(""),[M,F]=h.useState([]),[$,D]=h.useState([]),[q,G]=h.useState([]),[U,V]=h.useState(new Date),Z=h.useRef(null);h.useRef(null);const Y=h.useMemo(()=>{try{if(!A.trim())return[];const ae=A.toLowerCase().trim(),ye=[];return Array.isArray(M)&&M.forEach(Ne=>{const he=`${Ne.first_name||""} ${Ne.last_name||""}`.trim().toLowerCase(),ve=(Ne.company_name||"").toLowerCase(),ne=(Ne.email||"").toLowerCase(),Se=(Ne.phone||"").toLowerCase();(he.includes(ae)||ve.includes(ae)||ne.includes(ae)||Se.includes(ae))&&ye.push({id:Ne.id,name:`${Ne.first_name||""} ${Ne.last_name||""}`.trim()||"Unnamed Lead",type:"Lead",details:Ne.company_name||"No company",route:`/admin/leads/${Ne.id}`})}),Array.isArray($)&&$.forEach(Ne=>{const he=(Ne.name||"").toLowerCase(),ve=(Ne.account?.name||"").toLowerCase(),ne=(Ne.description||"").toLowerCase();(he.includes(ae)||ve.includes(ae)||ne.includes(ae))&&ye.push({id:Ne.id,name:Ne.name||"Unnamed Deal",type:"Deal",details:Ne.account?.name||"No account",route:`/admin/deals/info?id=${Ne.id}`})}),Array.isArray(q)&&q.forEach(Ne=>{const he=(Ne.name||"").toLowerCase(),ve=(Ne.email||"").toLowerCase(),ne=(Ne.phone||"").toLowerCase(),Se=(Ne.website||"").toLowerCase();(he.includes(ae)||ve.includes(ae)||ne.includes(ae)||Se.includes(ae))&&ye.push({id:Ne.id,name:Ne.name||"Unnamed Account",type:"Account",details:Ne.email||Ne.phone||"No contact info",route:"/admin/accounts"})}),ye.slice(0,10)}catch(ae){return console.error("Error in search:",ae),[]}},[A,M,$,q]),le=ae=>{ae.route&&(e(ae.route),L(""))},_e=h.useCallback(async()=>{_(!0),T(null);try{const[ae,ye,Ne,he,ve,ne,Se,de]=await Promise.all([se.get("/leads/admin/getLeads").catch(fe=>(console.error("Error fetching leads:",fe),{data:[]})),se.get("/deals/admin/fetch-all").catch(fe=>(console.error("Error fetching deals:",fe),{data:[]})),se.get("/accounts/admin/fetch-all").catch(fe=>(console.error("Error fetching accounts:",fe),{data:[]})),se.get("/tasks/all").catch(fe=>(console.error("Error fetching tasks:",fe),{data:[]})),se.get("/meetings/admin/fetch-all").catch(fe=>(console.error("Error fetching meetings:",fe),{data:[]})),se.get("/calls/admin/fetch-all").catch(fe=>(console.error("Error fetching calls:",fe),{data:[]})),se.get("/logs/read-all").catch(fe=>(console.error("Error fetching logs:",fe),{data:[]})),se.get("/targets/admin/fetch-all").catch(fe=>(console.error("Error fetching targets:",fe),{data:[]}))]),ke=Array.isArray(ae.data)?ae.data:[],Te=Array.isArray(ye.data)?ye.data:[],pe=Array.isArray(Ne.data)?Ne.data:[],ze=Array.isArray(he.data)?he.data:[],Pe=Array.isArray(ve.data)?ve.data:[],We=Array.isArray(ne.data)?ne.data:[],tt=Array.isArray(Se.data)?Se.data:[],lt=Array.isArray(de.data)?de.data:[];F(ke),D(Te),G(pe),r(lt);const Ie=lt.reduce((fe,ue)=>{const H=ue.amount||ue.value||ue.target_amount||0,K=parseFloat(typeof H=="string"?H.replace(/[^\d.-]/g,""):H);return fe+(isNaN(K)?0:K)},0);o(Ie),c({activeLeads:ke.filter(fe=>fe.status&&!["Lost","Converted"].includes(fe.status)).length,totalDeals:Te.length,activeAccounts:pe.length,overdueTasks:ze.filter(fe=>!fe.dueDate||fe.status==="Completed"?!1:new Date(fe.dueDate)<new Date).length});const rt=[...ke].sort((fe,ue)=>new Date(ue.created_at||0)-new Date(fe.created_at||0)).slice(0,5);d(rt);const He=[...Te].sort((fe,ue)=>new Date(ue.created_at||0)-new Date(fe.created_at||0)).slice(0,5);p(He);const Ke=[];We.forEach(fe=>{const ue=fe.due_date||fe.call_time,H=(fe.status||"").toUpperCase();ue&&!["COMPLETED","MISSED","NOT_HELD","HELD"].includes(H)&&Ke.push({type:"Call",title:fe.subject||"Untitled Call",assignedTo:fe.assigned_to||(fe.call_assign_to?`${fe.call_assign_to.first_name||""} ${fe.call_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:ue,priority:(fe.priority||"MEDIUM").toUpperCase(),id:fe.id,activityType:"call",fullData:fe})}),Pe.forEach(fe=>{const ue=fe.dueDate||fe.start_time,H=(fe.status||"").toUpperCase();ue&&!["COMPLETED","CANCELLED","DONE"].includes(H)&&Ke.push({type:"Meeting",title:fe.subject||fe.activity||"Untitled Meeting",assignedTo:fe.assignedTo||(fe.meet_assign_to?`${fe.meet_assign_to.first_name||""} ${fe.meet_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:ue,priority:(fe.priority||"MEDIUM").toUpperCase(),id:fe.id,activityType:"meeting",fullData:fe})});const Je={HIGH:1,MEDIUM:2,LOW:3},Oe=Ke.sort((fe,ue)=>{const H=Je[fe.priority]||3,K=Je[ue.priority]||3;return H!==K?H-K:new Date(fe.scheduledDate||0)-new Date(ue.scheduledDate||0)}).slice(0,5);y(Oe),w(Te);const Ce=[...tt].sort((fe,ue)=>new Date(ue.timestamp||0)-new Date(fe.timestamp||0));v(Ce)}catch(ae){console.error("Error fetching dashboard data:",ae),T("Failed to load dashboard data. Please refresh the page.")}finally{_(!1)}},[]);h.useEffect(()=>(document.title="Dashboard | Sari-Sari CRM",_e(),Z.current=setInterval(()=>{_e(),V(new Date)},3e4),()=>{Z.current&&clearInterval(Z.current)}),[_e]);const te=[{icon:H1e,title:"Active Leads",value:l.activeLeads,color:"text-blue-600",bgColor:"bg-blue-50",onClick:()=>e("/admin/leads")},{icon:iY,title:"Total Targets",value:oY(i,a),color:"text-purple-600",bgColor:"bg-purple-50",onClick:()=>e("/admin/targets")},{icon:rY,title:"Total Deals",value:l.totalDeals,color:"text-yellow-600",bgColor:"bg-yellow-50",onClick:()=>e("/admin/deals")},{icon:hP,title:"Overdue Tasks",value:l.overdueTasks,color:"text-red-600",bgColor:"bg-red-50",onClick:()=>e("/admin/tasks")}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative w-full",children:[S&&n.jsx(Wt,{}),n.jsxs("div",{className:"max-w-screen-2xl mx-auto",children:[E&&n.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:n.jsx("p",{className:"font-medium",children:E})}),n.jsx("div",{className:"mb-8",children:n.jsx(nCe,{searchQuery:A,onSearchChange:L,searchResults:Y,onSearchResultClick:le})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-8",children:te.map(ae=>n.jsx(rCe,{...ae,loading:S},ae.title))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[n.jsx(sCe,{logs:N,loading:S}),n.jsx(fP,{currencySymbol:a})]}),n.jsx("div",{className:"mb-8",children:n.jsx(vj,{leads:M,deals:$,targets:s,currencySymbol:a})}),n.jsx("div",{className:"grid grid-cols-1 mb-8",children:n.jsx(iCe,{revenueData:j,loading:S})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsx(_2,{title:"Latest Leads",children:u.length>0?u.map((ae,ye)=>n.jsx(oCe,{...ae},ae.id||ye)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No leads found"})}),n.jsx(_2,{title:"Latest Deals",children:f.length>0?f.map((ae,ye)=>n.jsx(lCe,{...ae,stage_updated_at:ae.stage_updated_at,currencySymbol:a},ae.id||ye)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No deals found"})}),n.jsx(_2,{title:"Upcoming Activities",children:x.length>0?x.map((ae,ye)=>n.jsx(cCe,{...ae},ae.id||ye)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No upcoming activities"})})]})]})]})};function rn({totalItems:e=0,pageSize:t=10,currentPage:a=1,onPrev:s,onNext:r,onPageSizeChange:i,pageSizeOptions:o=[10,20,30,40,50],className:l="",label:c="records"}){const u=e===0?1:Math.ceil(e/t),d=e===0?0:(a-1)*t+1,f=Math.min(a*t,e),p=a<=1||e===0,x=a>=u||e===0,y="inline-flex items-center gap-1 px-3 sm:px-4 py-2 text-sm font-semibold rounded-lg transition focus:outline-none focus:ring-2 focus:ring-offset-1",N="bg-black text-white hover:bg-gray-900",v="bg-gray-200 text-gray-500 cursor-not-allowed focus:ring-transparent";return n.jsxs("div",{className:`flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 ${l}`,children:[n.jsxs("div",{className:"text-sm text-gray-600 font-medium text-center sm:text-left w-full sm:w-auto order-1",children:["Showing ",e===0?0:d,"-",f," of ",e," ",c]}),i&&n.jsxs("div",{className:"flex items-center justify-center gap-2 w-full sm:w-auto order-3 sm:order-2",children:[n.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"Rows per page"}),n.jsx("select",{value:t,onChange:j=>i(Number(j.target.value)),className:"border border-gray-300 rounded-md text-sm py-1 pl-2 pr-6 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:o.map(j=>n.jsx("option",{value:j,children:j},j))})]}),n.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-end w-full sm:w-auto order-2 sm:order-3",children:[n.jsxs("button",{type:"button",onClick:s,disabled:p,className:`${y} ${p?v:N}`,children:[n.jsx(Wie,{className:"text-base"}),"Prev"]}),n.jsxs("div",{className:"text-sm font-semibold text-white bg-gray-900 border border-gray-900 shadow-sm px-3 py-1.5 rounded-full",children:["Page ",e===0?0:a," of"," ",e===0?0:u]}),n.jsxs("button",{type:"button",onClick:r,disabled:x,className:`${y} ${x?v:N}`,children:["Next",n.jsx(It,{className:"text-base"})]})]})]})}const uCe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mCe=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,a,s)=>s?s.toUpperCase():a.toLowerCase()),TR=e=>{const t=mCe(e);return t.charAt(0).toUpperCase()+t.slice(1)},lY=(...e)=>e.filter((t,a,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===a).join(" ").trim(),fCe=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var hCe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const gCe=h.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:r="",children:i,iconNode:o,...l},c)=>h.createElement("svg",{ref:c,...hCe,width:t,height:t,stroke:e,strokeWidth:s?Number(a)*24/Number(t):a,className:lY("lucide",r),...!i&&!fCe(l)&&{"aria-hidden":"true"},...l},[...o.map(([u,d])=>h.createElement(u,d)),...Array.isArray(i)?i:[i]]));const lh=(e,t)=>{const a=h.forwardRef(({className:s,...r},i)=>h.createElement(gCe,{ref:i,iconNode:t,className:lY(`lucide-${uCe(TR(e))}`,`lucide-${e}`,s),...r}));return a.displayName=TR(e),a};const pCe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],xCe=lh("globe",pCe);const yCe=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],kR=lh("lock",yCe);const bCe=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],vCe=lh("message-circle",bCe);const wCe=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],NCe=lh("message-square",wCe);const jCe=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],CCe=lh("send",jCe);const SCe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],wj=lh("x",SCe);function Ta({comments:e=[],onAddComment:t,currentUser:a}){const[s,r]=h.useState(""),[i,o]=h.useState(!1),[l,c]=h.useState(!1),u=async d=>{if(d.preventDefault(),!!s.trim()){c(!0);try{t&&await t({comment:s.trim(),is_private:i}),r("")}catch(f){console.error("Failed to add comment:",f)}finally{c(!1)}}};return n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200 mt-5",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2 flex items-center gap-2",children:[n.jsx(NCe,{className:"w-5 h-5 text-gray-600"}),"Comments",e.length>0&&n.jsxs("span",{className:"text-sm font-normal text-gray-500",children:["(",e.length,")"]})]}),n.jsx("div",{className:"mt-4",children:e.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:n.jsx(vCe,{className:"w-8 h-8 text-gray-400"})}),n.jsx("h4",{className:"text-lg font-medium text-gray-700 mb-1",children:"No comments yet"}),n.jsx("p",{className:"text-sm text-gray-500 max-w-sm",children:"Be the first to share your thoughts. Start a conversation by adding a comment below."})]}):n.jsx("div",{className:"space-y-3",children:e.map(d=>n.jsxs("div",{className:"flex gap-3 p-3 bg-gray-100 rounded-lg border border-gray-100",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"w-9 h-9 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold text-sm",children:d.comment_creator?.profile_picture?n.jsx("img",{src:`${d.comment_creator.profile_picture}`,alt:`${d.comment_creator?.first_name||d.comment_creator?.email||"User"}'s profile`,className:"w-9 h-9 rounded-full object-cover"}):d.comment_creator?.first_name?.[0]||d.comment_creator?.email?.[0]?.toUpperCase()||"U"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx("span",{className:"font-medium text-gray-800 text-sm",children:d.comment_creator?.first_name||d.comment_creator?.email||"Unknown User"}),n.jsx("span",{className:"text-xs text-gray-400",children:new Date(d.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}),d.is_private&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-amber-100 text-amber-700 rounded-full text-xs font-medium",children:[n.jsx(kR,{className:"w-3 h-3"}),"Private"]})]}),n.jsx("p",{className:"mt-1 text-gray-600 whitespace-pre-wrap break-words text-xs",children:d.comment})]})]},d.id))})}),n.jsxs("form",{onSubmit:u,className:"mt-6 pt-4 border-t border-gray-200 text-sm",children:[n.jsx("div",{className:"relative",children:n.jsx("textarea",{value:s,onChange:d=>r(d.target.value),placeholder:"Write a comment...",rows:2,className:"w-full px-4 py-3 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-700 placeholder-gray-400"})}),n.jsxs("div",{className:"flex items-center justify-between mt-3",children:[n.jsx("button",{type:"button",onClick:()=>o(!i),className:`cursor-pointer flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium transition-all duration-200 ${i?"bg-amber-100 text-amber-700 hover:bg-amber-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:i?n.jsxs(n.Fragment,{children:[n.jsx(kR,{className:"w-4 h-4"}),"Private"]}):n.jsxs(n.Fragment,{children:[n.jsx(xCe,{className:"w-4 h-4"}),"Public"]})}),n.jsxs("button",{type:"submit",disabled:!s.trim()||l,className:"cursor-pointer flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[n.jsx(CCe,{className:"w-4 h-4"}),l?"Posting...":"Post Comment"]})]})]})]})}async function _Ce({relatedType:e,relatedId:t}){const a=await se.get("/comments",{params:{related_type:e,related_id:t}});return Array.isArray(a.data)?a.data:[]}async function ACe({relatedType:e,relatedId:t,comment:a,isPrivate:s}){return(await se.post("/comments",{related_type:e,related_id:t,comment:a,is_private:!!s})).data}function ka({relatedType:e,relatedId:t}){const[a,s]=h.useState([]),[r,i]=h.useState(!1),o=h.useCallback(async()=>{if(!e||!t){s([]);return}i(!0);try{const c=await _Ce({relatedType:e,relatedId:t});s(c)}finally{i(!1)}},[e,t]),l=h.useCallback(async({comment:c,is_private:u})=>{!e||!t||(await ACe({relatedType:e,relatedId:t,comment:c,isPrivate:u}),await o())},[e,t,o]);return h.useEffect(()=>{o()},[o]),{comments:a,loading:r,refresh:o,addComment:l}}const A2=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Vendor"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Delete"}],T2={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",parent_company:"",status:"PROSPECT",territory_id:"",assigned_to:""},lr=e=>e?e.toUpperCase():"",k2=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",TCe=e=>{switch(lr(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},kCe=e=>{switch(lr(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}};function ECe(){const e=jt();h.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[t,a]=h.useState(!1),[s,r]=h.useState(!1),[i,o]=h.useState(!1),[l,c]=h.useState(null),[u,d]=h.useState(null),[f,p]=h.useState(T2),[x,y]=h.useState(null),[N,v]=h.useState([]),[j,w]=h.useState(!1),[S,_]=h.useState([]),[E,T]=h.useState(null),[A,L]=h.useState([]),[M,F]=h.useState([]),[$,D]=h.useState("Filter by Status"),[q,G]=h.useState(""),[U,V]=h.useState(null),[Z,Y]=h.useState(!1),[le,_e]=h.useState(1),[te,ae]=h.useState(10),[ye,Ne]=h.useState("Overview"),[he,ve]=h.useState(""),[ne,Se]=h.useState(!1),[de,ke]=h.useState([]),[Te,pe]=h.useState({}),[ze,Pe]=h.useState(null),{comments:We,addComment:tt,refresh:lt}=ka({relatedType:"account",relatedId:x?.id});h.useEffect(()=>{x?.id&&lt()},[x?.id,lt]);const Ie=h.useCallback(async(Be=null)=>{w(!0);try{const _t=await se.get("/accounts/admin/fetch-all"),k=[...Array.isArray(_t.data)?_t.data:[]].sort((B,xe)=>{const Ae=B?.created_at||B?.updated_at||0,Ue=xe?.created_at||xe?.updated_at||0;return new Date(Ue)-new Date(Ae)});if(v(k),Be){const B=k.find(xe=>xe.id===Be);y(B||null)}}catch(_t){console.error(_t),v([]),_t.response?.status===403?W.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):W.error("Failed to fetch accounts. Please try again later.")}finally{w(!1)}},[y]),rt=h.useCallback(async()=>{try{const Be=await se.get("/users/all");_(Array.isArray(Be.data)?Be.data:[])}catch(Be){console.error(Be),Be.response?.status===403&&W.warn("Unable to load users for assignment (permission denied).")}},[]),He=h.useCallback(async()=>{try{const Be=await se.get("/territories/fetch");L(Array.isArray(Be.data)?Be.data:[])}catch(Be){console.error(Be),Be.response?.status===403&&W.warn("Unable to load territories (permission denied).")}},[]),Ke=h.useCallback(async()=>{try{const Be=await se.get("/accounts/admin/parent-companies");F(Array.isArray(Be.data)?Be.data:[])}catch(Be){console.error(Be),Be.response?.status===403&&W.warn("Unable to load parent companies (permission denied).")}},[]),Je=h.useCallback(async Be=>{try{const _t=await se.get(`/activities/accounts/${Be}`);pe(_t.data&&typeof _t.data=="object"?_t.data:{})}catch(_t){console.error(_t),_t.response?.status===404&&(console.warn("No activities found for this account."),pe({}))}},[]);h.useEffect(()=>{Ie(),rt(),He(),Ke()},[Ie,rt,He,Ke]),h.useEffect(()=>{_e(1)},[q,$,te]);const Oe=h.useMemo(()=>{const Be=q.toLowerCase(),_t=$;return N.filter(X=>{const k=X.name?.toLowerCase().includes(Be)||X.website?.toLowerCase().includes(Be)||X.phone_number?.toLowerCase().includes(Be)||X.industry?.toLowerCase().includes(Be)||X.parent_company?.toLowerCase().includes(Be)||X.territory?.name?.toLowerCase().includes(Be),B=_t==="Filter by Status"||lr(X.status)===lr(_t);return k&&B})},[N,q,$]),Ce=Math.max(1,Math.ceil(Oe.length/te)||1);h.useEffect(()=>{_e(Be=>{const _t=Math.max(1,Math.ceil(Oe.length/te)||1);return Be>_t?_t:Be})},[Oe.length,te]);const fe=h.useMemo(()=>{const Be=(le-1)*te;return Oe.slice(Be,Be+te)},[Oe,le,te]),ue=Be=>{if(Be.target.checked){const _t=fe.map(X=>X.id);ke(_t)}else ke([])},H=Be=>{ke(_t=>_t.includes(Be)?_t.filter(X=>X!==Be):[..._t,Be])},K=async()=>{de.length!==0&&V({title:"Delete Accounts",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:de.length})," selected accounts? This action cannot be undone."]}),confirmLabel:`Delete ${de.length} Account(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",accountIds:de}})};Oe.length===0||(le-1)*te+1,Math.min(le*te,Oe.length);const we=()=>_e(Be=>Math.max(Be-1,1)),Me=()=>_e(Be=>Math.min(Be+1,Ce));h.useEffect(()=>{x&&ve(lr(x.status)||"PROSPECT")},[x]);const ce=N.length,oe=h.useMemo(()=>N.filter(Be=>Be.status?.toLowerCase()==="customer").length,[N]),De=h.useMemo(()=>N.filter(Be=>Be.status?.toLowerCase()==="prospect").length,[N]),$e=h.useMemo(()=>N.filter(Be=>Be.status?.toLowerCase()==="partner").length,[N]),Xe=h.useMemo(()=>N.filter(Be=>Be.status?.toLowerCase()==="active").length,[N]),Ze=h.useMemo(()=>N.filter(Be=>Be.status?.toLowerCase()==="inactive").length,[N]),mt=h.useMemo(()=>N.filter(Be=>Be.status?.toLowerCase()==="former").length,[N]),nt=h.useMemo(()=>[{title:"Total",value:ce,icon:ra,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:oe,icon:Io,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:De,icon:Kn,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:$e,icon:nn,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:Xe,icon:Io,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:Ze,icon:$o,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:mt,icon:$o,color:"text-orange-600",bgColor:"bg-orange-100"}],[ce,oe,De,$e,Xe,Ze,mt]),Nt=Be=>{y(Be),Ne("Overview"),ve(lr(Be?.status)||"PROSPECT")},wt=()=>y(null),Tt=Be=>{Be.target.id==="accountModalBackdrop"&&!Z&&wt()},Re=()=>{a(!1),r(!1),d(null),p(T2),o(!1),T(null)},me=Be=>{Be.target.id==="modalBackdrop"&&Re()},ie=Be=>Be?new Date(Be).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",Fe=Be=>{const{name:_t,value:X}=Be.target;p(k=>({...k,[_t]:X}))},Le=()=>{p(T2),r(!1),d(null),a(!0)},be=Be=>{y(null),Be.assigned_accs?T(Be.assigned_accs):T(null),p({name:Be.name||"",website:Be.website||"",phone_number:Be.phone_number||"",billing_address:Be.billing_address||"",shipping_address:Be.shipping_address||"",parent_company:Be.parent_company||"",industry:Be.industry||"",status:lr(Be.status)||"PROSPECT",territory_id:Be.territory?.id?String(Be.territory.id):"",assigned_to:Be.assigned_accs?.id?String(Be.assigned_accs.id):""}),r(!0),d(Be.id),a(!0)},ee=Be=>{Be&&V({title:"Delete Account",message:n.jsxs("span",{children:["Are you sure you want to permanently delete the account"," ",n.jsx("span",{className:"font-semibold",children:Be.name}),"? This action cannot be undone."]}),confirmLabel:"Delete Account",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:Be.id,name:Be.name}})},O=async()=>{if(!U?.action){V(null);return}const{action:Be}=U,{type:_t,payload:X,targetId:k,name:B,accountIds:xe}=Be;Y(!0);try{if(_t==="create"){o(!0);const Ae=await se.post("/accounts/admin",X);Ke(),W.success(`Account "${B}" created successfully.`);const Ue=x?.id||null;Re(),await Ie(Ue),!x&&Ae.data?.id}else if(_t==="update"){if(!k)throw new Error("Missing account identifier for update.");o(!0),await se.put(`/accounts/admin/${k}`,X),W.success(`Account "${B}" updated successfully.`);const Ae=x?.id&&x.id===k?k:null;Re(),await Ie(Ae),x?.id===k&&y(null)}else if(_t==="delete"){if(!k)throw new Error("Missing account identifier for deletion.");const Ae=x?.id;c(k),await se.delete(`/accounts/admin/${k}`),W.success(`Account "${B}" deleted successfully.`),await Ie(Ae&&Ae!==k?Ae:null),Ae===k&&y(null)}else _t==="bulk-delete"&&(await se.delete("/accounts/admin/bulk-delete",{data:{account_ids:xe}}),W.success(`Successfully deleted ${xe.length} accounts`),ke([]),await Ie())}catch(Ae){console.error(Ae);const Ue=_t==="create"?"Failed to create account. Please review the details and try again.":_t==="update"?"Failed to update account. Please review the details and try again.":_t==="bulk-delete"?"Failed to delete selected accounts.":"Failed to delete account. Please try again.",Ge=Ae.response?.data?.detail||Ue;W.error(Ge),(_t==="create"||_t==="update")&&o(!1),_t==="delete"&&c(null)}finally{(_t==="create"||_t==="update")&&o(!1),_t==="delete"&&c(null),Y(!1),V(null)}},z=()=>{Z||V(null)},I=async()=>{if(!x||!he)return;const Be=lr(he),_t=lr(x.status);if(Be!==_t){Se(!0);try{await se.put(`/accounts/admin/${x.id}`,{status:Be}),W.success(`Account status updated to ${k2(Be)}`),v(X=>X.map(k=>k.id===x.id?{...k,status:Be}:k)),y(null)}catch(X){console.error(X);const k=X.response?.data?.detail||"Failed to update account status. Please try again.";W.error(k)}finally{Se(!1)}}},[Q,ge]=h.useState(!1),re=Be=>{Be.preventDefault(),ge(!0);const _t=f.name.trim();if(!_t){W.error("Account name is required.");return}if(!f.assigned_to){W.error("Assigned To is required.");return}const k={name:_t,website:f.website?.trim()||null,phone_number:f.phone_number?.trim()||null,billing_address:f.billing_address?.trim()||null,shipping_address:f.shipping_address?.trim()||null,industry:f.industry?.trim()||null,parent_company:f.parent_company?.trim()||null,status:f.status||"PROSPECT",territory_id:f.territory_id?Number(f.territory_id):null,assigned_to:f.assigned_to?Number(f.assigned_to):null},B=s&&u?"update":"create";V({title:B==="create"?"Confirm New Account":"Confirm Update",message:B==="create"?n.jsxs("span",{children:["Are you sure you want to create the account"," ",n.jsx("span",{className:"font-semibold",children:_t}),"?"]}):n.jsxs("span",{children:["Save changes to the account"," ",n.jsx("span",{className:"font-semibold",children:_t}),"?"]}),confirmLabel:B==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:B,payload:k,targetId:u||null,name:_t}})},Ee=[{label:"Filter by Status",value:"Filter by Status"},...A2.map(Be=>({label:Be.label,value:Be.value}))],Qe=U?.action?.type==="delete"?U.action.targetId:null,gt=x&&(l===x.id||Qe===x.id),Ct=x&&l===x.id,kt=x?TCe(x.status):"",Dt=x?n.jsx("div",{id:"accountModalBackdrop",onClick:Tt,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:Be=>Be.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),n.jsx("button",{onClick:wt,className:"text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Xn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:x.name}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${kt}`,children:k2(x.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>be(x),disabled:U?.action?.type==="update"&&U.action.targetId===x.id,children:[n.jsx(ga,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>ee(x),disabled:!!gt,children:Ct?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(vn,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(Be=>n.jsx("button",{onClick:()=>Ne(Be),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${ye===Be?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:Be},Be))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[ye==="Overview"&&n.jsxs("div",{className:"h-full max-h-100 md:max-h-70 overflow-y-auto hide-scrollbar",children:[n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Website:"}),n.jsx("p",{children:x.website?n.jsx("a",{href:x.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:x.website}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Industry:"}),n.jsx("p",{children:x.industry||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Parent Company:"}),n.jsx("p",{children:x.parent_company||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:x.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:x.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Billing Address:"}),n.jsx("p",{children:x.billing_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),n.jsx("p",{children:x.shipping_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:x.assigned_accs?`${x.assigned_accs.first_name} ${x.assigned_accs.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:x.acc_creator?`${x.acc_creator.first_name} ${x.acc_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:ie(x.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:ie(x.updated_at)||"N/A"})]})]})}),n.jsx(Ta,{comments:We,onAddComment:tt})]}),ye==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:N.notes||"No notes available."})]})]}),ye==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[Te.tasks&&Te.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Pe(ze==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",Te.tasks.length,")"]})]}),ze==="tasks"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),ze==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Te.tasks.map((Be,_t)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/tasks",{state:{taskID:Be.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:Be.subject||Be.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:Be.description||"No description"}),Be.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",Be.assigned_to.first_name," ",Be.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ie(Be.due_date||Be.created_at)})]},`task-${_t}`))})]}),Te.meetings&&Te.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Pe(ze==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Pt,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",Te.meetings.length,")"]})]}),ze==="meetings"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),ze==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Te.meetings.map((Be,_t)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/meetings",{state:{meetingID:Be.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Pt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:Be.subject||Be.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:Be.description||Be.location||"No description"}),Be.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",Be.host.first_name," ",Be.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ie(Be.start_time||Be.created_at)})]},`meeting-${_t}`))})]}),Te.calls&&Te.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Pe(ze==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ot,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",Te.calls.length,")"]})]}),ze==="calls"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),ze==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Te.calls.map((Be,_t)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/calls",{state:{callID:Be.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Ot,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:Be.subject||Be.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:Be.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ie(Be.call_time||Be.created_at)})]},`call-${_t}`))})]}),Te.contacts&&Te.contacts.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Pe(ze==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(nn,{className:"text-teal-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",Te.contacts.length,")"]})]}),ze==="contacts"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),ze==="contacts"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Te.contacts.map((Be,_t)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/contacts",{state:{contactID:Be.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-teal-600 mt-1",children:n.jsx(nn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[Be.first_name?`${Be.first_name} `:"",Be.last_name]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Be.title||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ie(Be.created_at)})]},`contact-${_t}`))})]}),Te.deals&&Te.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Pe(ze==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(tn,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",Te.deals.length,")"]})]}),ze==="deals"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),ze==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Te.deals.map((Be,_t)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/deals",{state:{dealID:Be.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(tn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[Be.deal_id?Be.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",Be.name||Be.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:Be.stage||Be.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ie(Be.close_date||Be.created_at)})]},`deal-${_t}`))})]}),Te.quotes&&Te.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Pe(ze==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(fn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",Te.quotes.length,")"]})]}),ze==="quotes"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),ze==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Te.quotes.map((Be,_t)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/quotes",{state:{quoteID:Be.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(fn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(Be.quote_id?Be.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Be.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ie(Be.presented_date)||""})]},`quote-${_t}`))})]}),(!Te||(!Te.tasks||Te.tasks.length===0)&&(!Te.meetings||Te.meetings.length===0)&&(!Te.calls||Te.calls.length===0)&&(!Te.quotes||Te.quotes.length===0)&&(!Te.deals||Te.deals.length===0)&&(!Te.contacts||Te.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assigned_to:x.assigned_accs?.id?String(x.assigned_accs.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Ot,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assignedTo:x.assigned_accs?.id?String(x.assigned_accs.id):"",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Pt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assignedTo:x.assigned_accs?.id?String(x.assigned_accs.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:he||lr(x?.status)||"PROSPECT",onChange:Be=>ve(Be.target.value),children:A2.map(Be=>n.jsx("option",{value:Be.value,children:Be.label},Be.value))}),n.jsx("button",{onClick:I,disabled:ne||!he||lr(he)===lr(x?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${ne||!he||lr(he)===lr(x?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:ne?"Updating...":"Update"})]})]})]})]})]})}):null,on=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[j&&n.jsx(Wt,{message:"Loading accounts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(ra,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{Le(),ge(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(xn,{className:"mr-2"})," Add Account"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:nt.map(Be=>n.jsx(LCe,{...Be},Be.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Vt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search accounts",value:q,onChange:Be=>G(Be.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:$,onChange:Be=>D(Be.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:Ee.map(Be=>n.jsx("option",{value:Be.value,children:Be.label},Be.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-center w-12",children:n.jsx("input",{type:"checkbox",checked:fe.length>0&&fe.every(Be=>de.includes(Be.id)),onChange:ue,className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Industry"}),n.jsx("th",{className:"py-3 px-4",children:"Territory"}),n.jsx("th",{className:"py-3 px-4",children:"Phone"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:de.length>0?n.jsx("button",{onClick:K,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${de.length} selected items`,children:n.jsx(vn,{size:18})}):""})]})}),n.jsx("tbody",{children:j?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"Loading accounts..."})}):Oe.length>0?fe.map(Be=>n.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>{Nt(Be),Je(Be.id)},children:[n.jsx("td",{className:"py-3 px-4 text-center",children:n.jsx("input",{type:"checkbox",checked:de.includes(Be.id),onChange:()=>H(Be.id),onClick:_t=>_t.stopPropagation(),className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:Be.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:Be.website||"--"})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${kCe(Be.status)}`,children:k2(Be.status)})}),n.jsx("td",{className:"py-3 px-4 text-sm",children:Be.industry||"--"}),n.jsx("td",{className:"py-3 px-4 text-sm",children:Be.territory?.name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(Ot,{className:"text-gray-500"}),n.jsx("span",{children:Be.phone_number||"--"})]})}),n.jsx("td",{className:"py-3 px-4 text-center"})]},Be.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No accounts found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:Oe.length,pageSize:te,currentPage:le,onPrev:we,onNext:Me,onPageSizeChange:Be=>{ae(Be),_e(1)},pageSizeOptions:[10,20,30,40,50],label:"accounts"})]}),Qn=t?n.jsx("div",{id:"modalBackdrop",onClick:me,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto hide-scrollbar max-h-[90vh]",onClick:Be=>Be.stopPropagation(),children:[n.jsx("button",{onClick:()=>{Re(),ge(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:i||Z,children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Account":"Add New Account"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:re,noValidate:!0,children:[n.jsx("div",{className:"md:col-span-2",children:n.jsx(Xm,{label:"Name",name:"name",value:f.name,onChange:Fe,placeholder:"Company name",required:!0,isSubmitted:Q})}),n.jsx(LR,{label:"Parent Company",value:f.parent_company,onChange:Be=>{p(_t=>({..._t,parent_company:Be}))},items:M.map(Be=>({id:Be,name:Be})),getLabel:Be=>Be?.name||"",placeholder:"Select parent company...",disabled:i}),n.jsx(Xm,{label:"Website",name:"website",value:f.website,onChange:Fe,placeholder:"https://example.com",disabled:i}),n.jsx(Xm,{label:"Phone Number",name:"phone_number",value:f.phone_number,onChange:Fe,placeholder:"09xx xxx xxxx",type:"tel",disabled:i}),n.jsx(Xm,{label:"Industry",name:"industry",value:f.industry,onChange:Fe,placeholder:"Industry",disabled:i}),n.jsx(Xm,{label:"Billing Address",name:"billing_address",value:f.billing_address,onChange:Fe,placeholder:"Billing address",disabled:i}),n.jsx(Xm,{label:"Shipping Address",name:"shipping_address",value:f.shipping_address,onChange:Fe,placeholder:"Shipping address",disabled:i}),n.jsx(ER,{label:"Status",name:"status",value:f.status,onChange:Fe,options:[{value:"",label:"Select status"},...A2],required:!0,disabled:i}),n.jsx(LR,{label:"Assigned To",value:f.assigned_to,onChange:Be=>{const _t=S.find(k=>String(k.id)===String(Be));T(_t);let X=null;_t&&_t.assigned_territory&&_t.assigned_territory.length===1&&(X=_t.assigned_territory[0].id),p(k=>({...k,assigned_to:Be,territory_id:X}))},items:S||[],getLabel:Be=>`${Be?.first_name??""} ${Be?.last_name??""} (${Be?.role?.toUpperCase()==="CEO"?"Admin":Be?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:Q,disabled:i||S.length===0}),n.jsx("div",{className:"md:col-span-2",children:n.jsx(ER,{label:"Territory",name:"territory_id",value:f.territory_id||"",onChange:Fe,options:[{value:"",label:E?E.assigned_territory&&E.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"},...E&&E.assigned_territory&&E.assigned_territory.map(Be=>({value:String(Be.id),label:Be.name}))||[]],disabled:i||!E||!E.assigned_territory||E.assigned_territory.length===0})}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{Re(),ge(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i||Z,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i||Z,children:i?"Saving...":s?"Update Account":"Save Account"})]})]})]})}):null,ia=U?n.jsx(DCe,{open:!0,title:U.title,message:U.message,confirmLabel:U.confirmLabel,cancelLabel:U.cancelLabel,variant:U.variant,onConfirm:O,onCancel:z,loading:Z}):null;return n.jsxs(n.Fragment,{children:[on,Dt,Qn,ia]})}function LCe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function Xm({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:u=!1}){const d=u&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function ER({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(l=>n.jsx("option",{value:l.value,children:l.label},l.value))})]})}function LR({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:u=!1,allowFreeText:d=!1}){const f=u&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(PCe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:f,allowFreeText:d})]})}function PCe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1,allowFreeText:c=!1}){const[u,d]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),y=e.find(j=>String(j.id)===String(t)),N=y?s(y):t,v=h.useMemo(()=>{const j=f.trim().toLowerCase();return(j?e.filter(S=>(s(S)||"").toLowerCase().includes(j)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const j=w=>{x.current&&!x.current.contains(w.target)&&d(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]),h.useEffect(()=>{u||p("")},[u]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:u?f:N,placeholder:r,onFocus:()=>!i&&d(!0),onChange:j=>{p(j.target.value),u||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),u&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsxs("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:[c&&f.trim()&&!v.some(j=>s(j).toLowerCase()===f.trim().toLowerCase())&&n.jsxs("button",{type:"button",onClick:()=>{a(f.trim()),d(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-green-50 bg-blue-50 font-medium text-blue-700",children:['+ Add "',f.trim(),'" as new parent company']}),v.length>0?v.map(j=>{const w=String(j.id),S=s(j),_=String(t)===w;return n.jsx("button",{type:"button",onClick:()=>{a(w),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${_?"bg-blue-50":""}`,children:S||"--"},w)}):!c||!f.trim()?n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"}):null]}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function DCe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function Gx(e){return At({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M4 2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zm3 0a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zm3.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zM4 5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zM7.5 5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm2.5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zM4.5 8a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm2.5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zm3.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5z"},child:[]},{tag:"path",attr:{d:"M2 1a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1zm11 0H3v14h3v-2.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5V15h3z"},child:[]}]})(e)}const E2={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:""},pl=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),oo=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function OCe(){const e=jt(),t=Jt();h.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[a,s]=h.useState([]),[r,i]=h.useState(!1),[o,l]=h.useState([]),[c,u]=h.useState([]),[d,f]=h.useState(null),[p,x]=h.useState(!1),[y,N]=h.useState(!1),[v,j]=h.useState(!1),[w,S]=h.useState(null),[_,E]=h.useState(!1),[T,A]=h.useState(null),[L,M]=h.useState(E2),[F,$]=h.useState(""),[D,q]=h.useState("Filter by Accounts"),[G,U]=h.useState(null),[V,Z]=h.useState("Overview"),[Y,le]=h.useState(1),[_e,te]=h.useState(10),[ae,ye]=h.useState({}),[Ne,he]=h.useState(null),[ve,ne]=h.useState([]),[Se,de]=h.useState(null),{comments:ke,addComment:Te,refresh:pe}=ka({relatedType:"contact",relatedId:d?.id});h.useEffect(()=>{d?.id&&pe()},[d?.id,pe]),h.useEffect(()=>{const be=t.state?.contactID;be&&(de(be),e(t.pathname,{replace:!0,state:{}}))},[t,e]),h.useEffect(()=>{if(Se&&a.length>0&&!r){const be=a.find(ee=>ee.id===Se);be?f(be):W.error("Contact not found."),de(null)}},[Se,a,r]);const ze=h.useCallback(async(be=null)=>{i(!0);try{const ee=await se.get("/contacts/admin/fetch-all"),z=[...Array.isArray(ee.data)?ee.data:[]].sort((I,Q)=>{const ge=I?.created_at||I?.updated_at||0,re=Q?.created_at||Q?.updated_at||0;return new Date(re)-new Date(ge)});if(s(z),be){const I=z.find(Q=>Q.id===be);f(I||null)}}catch(ee){console.error(ee),s([]),ee.response?.status===403?W.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):W.error("Failed to fetch contacts. Please try again later.")}finally{i(!1)}},[f]),Pe=h.useCallback(async()=>{try{const be=await se.get("/accounts/admin/fetch-all"),O=[...Array.isArray(be.data)?be.data:[]].sort((z,I)=>(z?.name||"").localeCompare(I?.name||""));l(O)}catch(be){console.error(be),l([]),be.response?.status===403&&W.warn("Unable to load accounts (permission denied).")}},[]),We=h.useCallback(async()=>{try{const be=await se.get("/users/all"),O=[...Array.isArray(be.data)?be.data:[]].sort((z,I)=>pl(z).localeCompare(pl(I)));u(O)}catch(be){console.error(be),u([]),be.response?.status===403&&W.warn("Unable to load users for assignment (permission denied).")}},[]),tt=h.useCallback(async be=>{try{const ee=await se.get(`/activities/contact/${be}`);ye(ee.data&&typeof ee.data=="object"?ee.data:{})}catch(ee){console.error(ee),ee.response?.status===404&&(console.warn("No activities found for this account."),ye({}))}},[]);h.useEffect(()=>{ze(),Pe(),We()},[ze,Pe,We]);const lt=h.useMemo(()=>{const be=new Map;o.forEach(O=>{O?.id&&O?.name&&be.set(String(O.id),O.name)}),a.forEach(O=>{O?.account_id&&O?.account?.name&&be.set(String(O.account_id),O.account.name)});const ee=Array.from(be.entries()).sort((O,z)=>O[1].localeCompare(z[1])).map(([O,z])=>({value:O,label:z}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...ee]},[o,a]),Ie=h.useMemo(()=>{const be=F.trim().toLowerCase(),ee=D.trim();return a.filter(O=>{const z=[O?.first_name,O?.last_name,O?.email,O?.title,O?.department,O?.account?.name,O?.account?.status,O?.work_phone,O?.mobile_phone_1,O?.mobile_phone_2,O?.assigned_contact?.first_name,O?.assigned_contact?.last_name,O?.contact_creator?.first_name,O?.contact_creator?.last_name,O?.notes,oo(O?.created_at),oo(O?.updated_at)],I=be===""||z.some(ge=>ge==null?!1:ge.toString().toLowerCase().includes(be)),Q=ee==="Filter by Accounts"||String(O.account_id)===ee;return I&&Q})},[a,F,D]),rt=Math.max(1,Math.ceil(Ie.length/_e)||1);h.useEffect(()=>{le(1)},[F,D,_e]),h.useEffect(()=>{le(be=>{const ee=Math.max(1,Math.ceil(Ie.length/_e)||1);return be>ee?ee:be})},[Ie.length,_e]);const He=h.useMemo(()=>{const be=(Y-1)*_e;return Ie.slice(be,be+_e)},[Ie,Y,_e]),Ke=()=>le(be=>Math.max(be-1,1)),Je=()=>le(be=>Math.min(be+1,rt)),Oe=be=>{if(be.target.checked){const ee=He.map(O=>O.id);ne(ee)}else ne([])},Ce=be=>{ne(ee=>ee.includes(be)?ee.filter(O=>O!==be):[...ee,be])},fe=async()=>{ve.length!==0&&S({title:"Delete Contacts",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:ve.length})," selected contacts? This action cannot be undone."]}),confirmLabel:`Delete ${ve.length} Contact(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",contact_ids:ve}})},ue=h.useCallback(()=>{x(!1),N(!1),A(null),M(E2),j(!1),De(!1)},[]),H=be=>{be.target.id==="modalBackdrop"&&!v&&!_&&ue()},K=be=>{const{name:ee,value:O}=be.target;M(z=>({...z,[ee]:O}))},we=()=>{M(E2),N(!1),A(null),x(!0)},Me=be=>{be&&(M({first_name:be.first_name||"",last_name:be.last_name||"",account_id:be.account_id?String(be.account_id):"",title:be.title||"",department:be.department||"",email:be.email||"",work_phone:be.work_phone||"",mobile_phone_1:be.mobile_phone_1||"",mobile_phone_2:be.mobile_phone_2||"",notes:be.notes||"",assigned_to:be.assigned_to?String(be.assigned_to):""}),N(!0),A(be.id),x(!0),f(null))},ce=be=>{if(!be)return;const ee=pl(be)||"this contact";S({title:"Delete Contact",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:ee}),"? This action cannot be undone."]}),confirmLabel:"Delete Contact",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:be.id,name:ee}})},[oe,De]=h.useState(!1),$e=be=>{be.preventDefault(),De(!0);const ee=L.last_name.trim();if(!ee){W.error("Last name is required.");return}if(!L.account_id){W.error("Account is required.");return}if(!L.assigned_to){W.error("Assigned To is required.");return}const z=L.email?.trim();if(!z){W.error("Email is required.");return}if(!z.includes("@")){W.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(z)){W.error("Please enter a valid email address.");return}const Q=L.first_name?.trim()||"",ge={first_name:Q,last_name:ee,account_id:Number(L.account_id),title:L.title?.trim()||null,department:L.department?.trim()||null,email:L.email?.trim().toLowerCase()||null,work_phone:L.work_phone?.trim()||null,mobile_phone_1:L.mobile_phone_1?.trim()||null,mobile_phone_2:L.mobile_phone_2?.trim()||null,notes:L.notes?.trim()||null,assigned_to:L.assigned_to?Number(L.assigned_to):null},re=y&&T?"update":"create",Ee=`${Q} ${ee}`.trim();S({title:re==="create"?"Confirm New Contact":"Confirm Update",message:re==="create"?n.jsxs("span",{children:["Are you sure you want to add"," ",n.jsx("span",{className:"font-semibold",children:Ee})," to your contacts?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:Ee}),"?"]}),confirmLabel:re==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:re,payload:ge,targetId:T||null,name:Ee}})},Xe=async()=>{if(!w?.action){S(null);return}const{action:be}=w,{type:ee,payload:O,targetId:z,name:I}=be;E(!0);try{if(ee==="create"){j(!0),await se.post("/contacts/admin",O),W.success(`Contact "${I}" created successfully.`);const Q=d?.id||null;ue(),await ze(Q)}else if(ee==="update"){if(!z)throw new Error("Missing contact identifier for update.");j(!0),await se.put(`/contacts/admin/${z}`,O),W.success(`Contact "${I}" updated successfully.`);const Q=d?.id&&d.id===z?z:d?.id||null;ue(),await ze(Q),d?.id===z&&f(null)}else if(ee==="delete"){if(!z)throw new Error("Missing contact identifier for deletion.");const Q=d?.id;U(z),await se.delete(`/contacts/admin/${z}`),W.success(`Contact "${I}" deleted successfully.`),await ze(Q&&Q!==z?Q:null),Q===z&&f(null)}else if(ee==="bulk-delete"){const Q=be.contact_ids;await se.delete("/contacts/admin/bulk-delete",{data:{contact_ids:Q}}),W.success(`Successfully deleted ${Q.length} contacts`),ne([]),await ze()}}catch(Q){console.error(Q);const ge=ee==="create"?"Failed to create contact. Please review the details and try again.":ee==="update"?"Failed to update contact. Please review the details and try again.":ee==="bulk-delete"?"Failed to delete selected contacts.":"Failed to delete contact. Please try again.",re=Q.response?.data?.detail||ge;W.error(re)}finally{(ee==="create"||ee==="update")&&j(!1),ee==="delete"&&U(null),E(!1),S(null)}},Ze=()=>{_||S(null)},mt=be=>{f(be),Z("Overview")},nt=()=>f(null),Nt=be=>{be.target.id==="contactModalBackdrop"&&!_&&nt()},wt=w?.action?.type==="delete"?w.action.targetId:null,Tt=d&&(G===d.id||wt===d.id),Re=d&&G===d.id,me=d?n.jsx("div",{id:"contactModalBackdrop",onClick:Nt,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:be=>be.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),n.jsx("button",{onClick:nt,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Xn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:pl(d)||"Unnamed contact"})}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Me(d),disabled:_||w?.action?.type==="update"&&w.action.targetId===d.id,children:[n.jsx(ga,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>ce(d),disabled:!!Tt,children:Re?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(vn,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:n.jsx("p",{className:"text-sm text-gray-500",children:d.account?.name||"No associated account"})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(be=>n.jsx("button",{onClick:()=>Z(be),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${V===be?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:be},be))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[V==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact Name:"}),n.jsx("p",{children:pl(d)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Title:"}),n.jsx("p",{children:d.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:d.email?n.jsx("a",{href:`mailto:${d.email}`,className:"text-blue-600 hover:underline break-all",children:d.email}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:d.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:d.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:d.assigned_contact?`${d.assigned_contact.first_name} ${d.assigned_contact.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:d.contact_creator?`${d.contact_creator.first_name} ${d.contact_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:oo(d.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:oo(d.updated_at)||"N/A"})]})]})}),V==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]}),n.jsx(Ta,{comments:ke,onAddComment:Te})]}),V==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[ae.tasks&&ae.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(Ne==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",ae.tasks.length,")"]})]}),Ne==="tasks"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),Ne==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ae.tasks.map((be,ee)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/tasks",{state:{taskID:be.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:be.subject||be.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:be.description||"No description"}),be.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",be.assigned_to.first_name," ",be.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:oo(be.due_date||be.created_at)})]},`task-${ee}`))})]}),ae.meetings&&ae.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(Ne==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Pt,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",ae.meetings.length,")"]})]}),Ne==="meetings"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),Ne==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ae.meetings.map((be,ee)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/meetings",{state:{meetingID:be.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Pt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:be.subject||be.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:be.description||be.location||"No description"}),be.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",be.host.first_name," ",be.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:oo(be.start_time||be.created_at)})]},`meeting-${ee}`))})]}),ae.calls&&ae.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(Ne==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ot,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",ae.calls.length,")"]})]}),Ne==="calls"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),Ne==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ae.calls.map((be,ee)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/calls",{state:{callID:be.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Ot,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:be.subject||be.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:be.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:oo(be.call_time||be.created_at)})]},`call-${ee}`))})]}),ae.deals&&ae.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(Ne==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(tn,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",ae.deals.length,")"]})]}),Ne==="deals"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),Ne==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ae.deals.map((be,ee)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/deals",{state:{dealID:be.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(tn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[be.deal_id?be.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",be.name||be.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:be.stage||be.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:oo(be.close_date||be.created_at)})]},`deal-${ee}`))})]}),ae.quotes&&ae.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(Ne==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(fn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",ae.quotes.length,")"]})]}),Ne==="quotes"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),Ne==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ae.quotes.map((be,ee)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/quotes",{state:{quoteID:be.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(fn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(be.quote_id?be.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:be.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:oo(be.presented_date)||""})]},`quote-${ee}`))})]}),(!ae||(!ae.tasks||ae.tasks.length===0)&&(!ae.meetings||ae.meetings.length===0)&&(!ae.calls||ae.calls.length===0)&&(!ae.quotes||ae.quotes.length===0)&&(!ae.deals||ae.deals.length===0)&&(!ae.contacts||ae.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsx("div",{className:"flex flex-col gap-4",children:n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${pl(d)||""}`.trim(),relatedType1:"Account",relatedTo1:d?.account_id?String(d.account_id):d?.account?.id?String(d.account.id):"",relatedType2:"Contact",relatedTo2:d?.id?String(d.id):"",assigned_to:d?.assigned_contact?.id?String(d.assigned_contact.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Ot,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const be=encodeURIComponent(d.email),ee=encodeURIComponent(""),O=encodeURIComponent(""),z=`mailto:${be}?subject=${ee}&body=${O}`;window.location.href=z},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(sa,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${pl(d)||""}`.trim(),relatedType1:"Account",relatedTo1:d?.account_id?String(d.account_id):d?.account?.id?String(d.account.id):"",relatedType2:"Contact",relatedTo2:d?.id?String(d.id):"",assignedTo:d?.assigned_contact?.id?String(d.assigned_contact.id):"",status:"Planned"}}}),children:[n.jsx(Pt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Task for ${pl(d)||""}`.trim(),relatedType1:"Account",relatedTo1:d?.account_id?String(d.account_id):d?.account?.id?String(d.account.id):"",relatedType2:"Contact",relatedTo2:d?.id?String(d.id):"",assignedTo:d?.assigned_contact?.id?String(d.assigned_contact.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]})})]})]})]})}):null,ie=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&n.jsx(Wt,{message:"Loading contacts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(ra,{className:"mr-2 text-blue-600"})," Contacts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{we(),De(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(xn,{className:"mr-2"})," Add Contact"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Vt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search contacts",value:F,onChange:be=>$(be.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:D,onChange:be=>q(be.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:lt.map(be=>n.jsx("option",{value:be.value,children:be.label},be.value??be.label))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-center w-12",children:n.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer",checked:He.length>0&&ve.length===He.length,onChange:Oe})}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),n.jsx("th",{className:"py-3 px-4",children:"Department"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Created"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:ve.length>0?n.jsx("button",{onClick:fe,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${ve.length} selected items`,children:n.jsx(vn,{size:18})}):""})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:9,children:"Loading contacts..."})}):Ie.length>0?He.map(be=>{const ee=[{Icon:sa,value:be.email,key:"email"},{Icon:Ot,value:be.work_phone,key:"work_phone"},{Icon:cd,value:be.mobile_phone_1,key:"mobile_phone_1"},{Icon:cd,value:be.mobile_phone_2,key:"mobile_phone_2"}].filter(O=>!!O.value);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:O=>{O.target.closest('input[type="checkbox"]')||O.target.closest("button")||(mt(be),tt(be.id))},children:[n.jsx("td",{className:"py-3 px-4 text-center align-top",children:n.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer",checked:ve.includes(be.id),onChange:()=>Ce(be.id)})}),n.jsxs("td",{className:"py-3 px-4 align-top",children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:pl(be)||"--"}),n.jsx("div",{className:"text-xs text-gray-500",children:be.title||"No title"})]}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[n.jsx(Gx,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"break-words",children:be.account?.name||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:ee.length>0?n.jsx("div",{className:"space-y-1 text-gray-700",children:ee.map(({Icon:O,value:z,key:I})=>{const Q=xt.createElement(O,{className:"text-gray-500 flex-shrink-0"});return n.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[Q,n.jsx("span",{children:z})]},I)})}):n.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[n.jsx(tn,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:be.department||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(nn,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:be.assigned_contact?`${be.assigned_contact.first_name} ${be.assigned_contact.last_name}`:"Unassigned"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[n.jsx(Pt,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"text-xs",children:oo(be.created_at)||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${be.status==="Inactive"?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:be.status||"Active"})}),n.jsx("td",{className:"py-3 px-4 align-top"})]},be.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:9,children:"No contacts found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:Ie.length,pageSize:_e,currentPage:Y,onPrev:Ke,onNext:Je,onPageSizeChange:be=>{te(be),le(1)},pageSizeOptions:[10,20,30,40,50],label:"contacts"})]}),Fe=p?n.jsx("div",{id:"modalBackdrop",onClick:H,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:be=>be.stopPropagation(),children:[n.jsx("button",{onClick:()=>{ue(),De(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:v||_,children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:y?"Edit Contact":"Add New Contact"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:$e,noValidate:!0,children:[n.jsx(Ic,{label:"First Name",name:"first_name",value:L.first_name,onChange:K,placeholder:"First name",isSubmitted:oe}),n.jsx(Ic,{label:"Last Name",name:"last_name",value:L.last_name,onChange:K,placeholder:"Last name",required:!0,isSubmitted:oe}),n.jsx(PR,{label:"Account",value:L.account_id,onChange:be=>M(ee=>({...ee,account_id:be})),items:o||[],getLabel:be=>be?.name??"",placeholder:"Search account...",required:!0,isSubmitted:oe,disabled:v||o.length===0}),n.jsx(PR,{label:"Assigned To",value:L.assigned_to,onChange:be=>M(ee=>({...ee,assigned_to:be})),items:c||[],getLabel:be=>`${be?.first_name??""} ${be?.last_name??""} (${be?.role?.toUpperCase()==="CEO"?"Admin":be?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:oe,disabled:v||c.length===0}),n.jsx(Ic,{label:"Title",name:"title",value:L.title,onChange:K,placeholder:"Job title",disabled:v}),n.jsx(Ic,{label:"Department",name:"department",value:L.department,onChange:K,placeholder:"Department",disabled:v}),n.jsx(Ic,{label:"Email",name:"email",type:"email",value:L.email,onChange:K,placeholder:"example@email.com",required:!0,isSubmitted:oe}),n.jsx(Ic,{label:"Work Phone",name:"work_phone",value:L.work_phone,onChange:K,placeholder:"09xx xxx xxxx",disabled:v}),n.jsx(Ic,{label:"Mobile Phone 1",name:"mobile_phone_1",value:L.mobile_phone_1,onChange:K,placeholder:"09xx xxx xxxx",disabled:v}),n.jsx(Ic,{label:"Mobile Phone 2",name:"mobile_phone_2",value:L.mobile_phone_2,onChange:K,placeholder:"09xx xxx xxxx",disabled:v}),n.jsx(ICe,{label:"Notes",name:"notes",value:L.notes,onChange:K,placeholder:"Additional details...",rows:3,disabled:v,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{ue(),De(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:v||_,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:v||_,children:v?"Saving...":y?"Update Contact":"Save Contact"})]})]})]})}):null,Le=w?n.jsx($Ce,{open:!0,title:w.title,message:w.message,confirmLabel:w.confirmLabel,cancelLabel:w.cancelLabel,variant:w.variant,onConfirm:Xe,onCancel:Ze,loading:_}):null;return n.jsxs(n.Fragment,{children:[ie,me,Fe,Le]})}function Ic({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:u=""}){const d=c&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${u}
        `})]})}function PR({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:u=!1}){const d=u&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(MCe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:d})]})}function MCe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,u]=h.useState(!1),[d,f]=h.useState(""),p=h.useRef(null),x=e.find(v=>String(v.id)===String(t)),y=x?s(x):"",N=h.useMemo(()=>{const v=d.trim().toLowerCase();return(v?e.filter(w=>(s(w)||"").toLowerCase().includes(v)):e).slice(0,o)},[e,d,s,o]);return h.useEffect(()=>{const v=j=>{p.current&&!p.current.contains(j.target)&&u(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?d:y,placeholder:r,onFocus:()=>!i&&u(!0),onChange:v=>{f(v.target.value),c||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:N.length>0?N.map(v=>{const j=String(v.id),w=s(v),S=String(t)===j;return n.jsx("button",{type:"button",onClick:()=>{a(j),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},j)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function ICe({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function $Ce({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}const L2=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function cY({lead:e,onBack:t,fetchLeads:a,onEdit:s,onDelete:r,setSelectedLead:i,relatedActs:o}){const l=jt(),{leadID:c}=Ho(),[u,d]=h.useState(e||null),[f,p]=h.useState("Overview"),[x,y]=h.useState(""),N=u?.status?.toUpperCase()==="QUALIFIED",[v,j]=h.useState(null),[w,S]=h.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[_,E]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[T,A]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),L=async()=>{try{if(e){d(e),y(e.status||"New");return}if(!c)return;const q=await se.get(`/leads/get/${c}`);d(q.data),y(q.data.status||"New"),S({name:q.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:q.data.territory?.id||null,assigned_to:q.data.assigned_to?.id||null,created_by:q.data.creator?.id||null}),E({last_name:q.data.last_name||"",first_name:q.data.first_name||"",account_id:null,title:q.data.title||"",department:q.data.department||"",email:q.data.email||"",work_phone:q.data.work_phone||"",mobile_phone_1:q.data.mobile_phone_1||"",mobile_phone_2:q.data.mobile_phone_2||"",notes:"",assigned_to:q.data.assigned_to?.id||null,created_by:q.data.creator?.id||null}),A({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:q.data.assigned_to?.id||null,created_by:q.data.creator?.id||null})}catch(q){console.error(q)}};h.useEffect(()=>{e?(d(e),y(e.status||"New")):c&&L()},[c,e]);const M=async()=>{try{if(x==="Converted"&&u?.status?.toUpperCase()!=="QUALIFIED"){W.error("Lead must be Qualified before it can be converted.");return}const q=await se.put(`/leads/${u.id}/update/status`,{status:x});W.success("Lead status updated successfully");const G={...u,status:q.data.status};d(G),i&&i(G),a&&a(),t&&t()}catch(q){console.error(q),W.error("Failed to update lead status")}},F=async q=>{const G={...w,assigned_to:q.assigned_to?.id,billing_address:q.address,shipping_address:q.address,created_by:q.creator?.id,industry:null,name:q.company_name,phone_number:q.work_phone,status:"Prospect",territory_id:q.territory?.id,website:""};console.log("Account data: ",G),console.log("Contact data: ",_),console.log("Deal data: ",T),console.log("Lead data: ",q);try{const V=(await se.post("/accounts/convertedLead",G)).data.id,Z={..._,account_id:V,assigned_to:q.assigned_to?.id,created_by:q.creator?.id,department:q.department,email:q.email,first_name:q.first_name,last_name:q.last_name,mobile_phone_1:q.mobile_phone_1,mobile_phone_2:q.mobile_phone_2,notes:q.notes,title:q.title,work_phone:q.work_phone},le=(await se.post("/contacts/convertedLead",Z)).data.id,_e=()=>{switch(T.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},te=T.amount&&T.amount!==""?parseFloat(T.amount):0,ae={...T,account_id:V,assigned_to:q.assigned_to?.id,created_by:q.creator?.id,primary_contact_id:le,probability:_e(),stage:"Prospecting"},ye=await se.post("/deals/convertedLead",ae),Ne=await se.put(`/leads/convert/${q.id}`);i&&i(null),a(),W.success("Lead converted successfully!"),t()}catch(U){console.error("Error during conversion:",U);const V=U.response?.data?.detail||U.message||"Failed to convert lead. Please try again.";W.error(V)}},$=q=>{switch((q||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},D=q=>q.toString().toLowerCase().replace(/\b\w/g,G=>G.toUpperCase());return u?n.jsx(n.Fragment,{children:n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),n.jsx("button",{onClick:()=>{t?t():l(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Xn,{size:25})})]})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[u.first_name," ",u.last_name]}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${$(u.status)}`,children:D(u.status||"New")}),n.jsx("div",{className:"flex flex-col",children:n.jsx("button",{onClick:()=>F(u),disabled:!N,title:N?"Convert Lead":"Lead must be Qualified before converting",className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2
      ${N?"bg-green-600 hover:bg-green-700 text-white focus:ring-green-400":"bg-gray-200 text-gray-400 cursor-not-allowed"}
    `,children:"Convert"})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",onClick:()=>{s&&u&&s(u)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(ha,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",onClick:()=>{r&&u&&r(u)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(vn,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-4 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(q=>n.jsx("button",{onClick:()=>p(q),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${f===q?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:q},q))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[f==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Name:"}),n.jsxs("p",{children:[u.first_name," ",u.last_name||"N/A"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:u.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Job Title:"}),n.jsx("p",{children:u.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:u.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:u.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:u.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:u.assigned_to?`${u.assigned_to.first_name} ${u.assigned_to.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:u.creator?`${u.creator.first_name} ${u.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:u.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:u.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:u.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Source:"}),n.jsx("p",{children:u.source||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Address:"}),n.jsx("p",{children:u.address||"N/A"})]})]})}),f==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:u.notes||"No notes available."})]})]}),f==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[o.tasks&&o.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>j(v==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",o.tasks.length,")"]})]}),v==="tasks"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),v==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.tasks.map((q,G)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/admin/tasks",{state:{taskID:q.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:q.subject||q.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:q.description||"No description"}),q.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned:"," ",q.assigned_to.first_name," ",q.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:L2(q.due_date||q.created_at)})]},`task-${G}`))})]}),o.meetings&&o.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>j(v==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Pt,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",o.meetings.length,")"]})]}),v==="meetings"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),v==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.meetings.map((q,G)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/admin/meetings",{state:{meetingID:q.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Pt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:q.subject||q.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:q.description||q.location||"No description"}),q.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",q.host.first_name," ",q.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:L2(q.start_time||q.created_at)})]},`meeting-${G}`))})]}),o.calls&&o.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>j(v==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ot,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",o.calls.length,")"]})]}),v==="calls"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),v==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.calls.map((q,G)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/admin/calls",{state:{callID:q.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Ot,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:q.subject||q.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:q.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:L2(q.call_time||q.created_at)})]},`call-${G}`))})]}),(!o||(!o.tasks||o.tasks.length===0)&&(!o.meetings||o.meetings.length===0)&&(!o.calls||o.calls.length===0)&&(!o.quotes||o.quotes.length===0)&&(!o.deals||o.deals.length===0)&&(!o.contacts||o.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{u&&l("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:u.title?`Call regarding ${u.title}`:`Call with ${u.first_name} ${u.last_name}`,relatedType1:"Lead",relatedTo1:String(u.id),relatedType2:null,relatedTo2:null,assigned_to:u.assigned_to?.id?String(u.assigned_to.id):"",direction:"Outgoing",status:"Planned"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Ot,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!u?.email){alert("No email address available");return}const q=encodeURIComponent(u.email),G=encodeURIComponent(""),U=encodeURIComponent(""),V=`mailto:${q}?subject=${G}&body=${U}`;window.location.href=V},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(sa,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{u&&l("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:u.title?`Meeting regarding ${u.title}`:`Meeting with ${u.first_name||""} ${u.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(u.id),relatedType2:null,relatedTo2:null,assignedTo:u.assigned_to?.id?String(u.assigned_to.id):"",status:"Planned"}}})},children:[n.jsx(Pt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{u&&l("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:u.title?`Follow up on ${u.title}`:`Follow up with ${u.first_name||""} ${u.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(u.id),relatedType2:null,relatedTo2:null,assignedTo:u.assigned_to?.id?String(u.assigned_to.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:x,onChange:q=>y(q.target.value),children:[n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),u?.status?.toUpperCase()==="QUALIFIED"&&n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]}),n.jsx("button",{onClick:M,disabled:x===u.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${x===u.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const RCe=eh.all(),P2=RCe.map((e,t)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${t}`})),zCe=e=>e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()),FCe=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},D2={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function UCe(){const e=jt(),{leadID:t}=Ho();Us();const[a,s]=h.useState(null),[r,i]=h.useState(!1),[o,l]=h.useState(null),[c,u]=h.useState(null),[d,f]=h.useState([]),[p,x]=h.useState(!1),[y,N]=h.useState(""),[v,j]=h.useState("Filter by Status"),[w,S]=h.useState(""),[_,E]=h.useState(1),[T,A]=h.useState(10),[L,M]=h.useState(D2),[F,$]=h.useState(!1),[D,q]=h.useState(null),[G,U]=h.useState(!1),[V,Z]=h.useState(null),[Y,le]=h.useState(!1),[_e,te]=h.useState([]),[ae,ye]=h.useState({});h.useRef(null);const[Ne,he]=h.useState(!1),[ve,ne]=h.useState(null),[Se,de]=h.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[ke,Te]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[pe,ze]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});h.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const Pe=async()=>{try{const Le=await se.get("/leads/getUsers");l(Le.data)}catch(Le){console.error(`Error fetching users: ${Le}`)}},We=async()=>{x(!0);try{const Le=await se.get("/leads/admin/getLeads");f(Le.data),console.log(Le.data)}catch(Le){console.error(`Error fetching leads: ${Le}`)}finally{x(!1)}};h.useEffect(()=>{Pe(),We()},[]),h.useEffect(()=>{if(t&&d.length>0&&!r&&!F){const Le=d.find(be=>be.id===Number(t));Le&&s(Le)}else!t&&!a&&s(null)},[t,d,r,F]),h.useEffect(()=>{if(ve){const be=(z=>{if(!z)return{code:"+63",number:""};const I=z.match(/^(\+\d+)\s(.+)$/);if(I)return{code:I[1],number:I[2]};if(z.startsWith("+")){const Q=z.match(/^(\+\d{1,3})/);if(Q)return{code:Q[1],number:z.substring(Q[1].length).trim()}}return{code:"+63",number:z}})(ve.work_phone),ee=[];ve.work_phone&&ee.push(`Work: ${ve.work_phone}`),ve.mobile_phone_1&&ee.push(`Mobile 1: ${ve.mobile_phone_1}`),ve.mobile_phone_2&&ee.push(`Mobile 2: ${ve.mobile_phone_2}`);const O=ee.length>0?ee.join(" | "):"";de({name:ve.company_name||"",website:"",countryCode:be.code,phone_number:be.number,combinedPhoneNumbers:O,billing_address:ve.address||"",shipping_address:ve.address||"",industry:"",status:"Prospect",territory_id:ve.assigned_to?.territory?.id||null,assigned_to:ve.assigned_to?.id||null,created_by:ve.creator?.id||null}),Te({last_name:ve.last_name||"",first_name:ve.first_name||"",account_id:null,title:ve.title||"",department:ve.department||"",email:ve.email||"",work_phone:ve.work_phone||"",mobile_phone_1:ve.mobile_phone_1||"",mobile_phone_2:ve.mobile_phone_2||"",notes:ve.notes||"",assigned_to:ve.assigned_to?.id||null,created_by:ve.creator?.id||null}),ze({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:ve.assigned_to?.id||null,created_by:ve.creator?.id||null})}},[ve]);const tt=Le=>N(Le.target.value),lt=h.useMemo(()=>{let Le=[...d];const be=y.trim().toLowerCase();be&&(Le=Le.filter(O=>[O?.first_name,O?.last_name,O?.company_name,O?.title,O?.email,O?.work_phone,O?.assigned_to?`${O.assigned_to.first_name} ${O.assigned_to.last_name}`:""].some(I=>I&&I.toString().toLowerCase().includes(be))));const ee=v.trim().toUpperCase();return ee&&ee!=="FILTER BY STATUS"?Le=Le.filter(O=>(O.status?O.status.toUpperCase():"")===ee):Le=Le.filter(O=>(O.status?O.status.toUpperCase():"")!=="CONVERTED"),w?Le.sort((O,z)=>{const I=`${O.first_name} ${O.last_name}`,Q=`${z.first_name} ${z.last_name}`;return w==="asc"?I.localeCompare(Q):Q.localeCompare(I)}):Le.sort((O,z)=>{const I=new Date(O.created_at).getTime();return new Date(z.created_at).getTime()-I}),Le},[d,y,v,w]),Ie=Math.max(1,Math.ceil(lt.length/T)||1);h.useEffect(()=>{E(1)},[y,v]),h.useEffect(()=>{E(Le=>{const be=Math.max(1,Math.ceil(lt.length/T)||1);return Le>be?be:Le})},[lt.length,T]);const rt=h.useMemo(()=>{const Le=(_-1)*T;return lt.slice(Le,Le+T)},[lt,_,T]),He=()=>E(Le=>Math.max(Le-1,1)),Ke=()=>E(Le=>Math.min(Le+1,Ie)),Je=Le=>{A(Le),E(1)},Oe=h.useCallback(async Le=>{try{const be=await se.get(`/activities/lead/${Le}`);ye(be.data&&typeof be.data=="object"?be.data:{})}catch(be){console.error(be),be.response?.status===404&&(console.warn("No activities found for this account."),ye({}))}},[]),Ce=Le=>{s(Le),Oe(Le.id)},fe=()=>{s(null),t&&e("/admin/leads",{replace:!0})},ue=()=>{i(!1),M(D2),$(!1),q(null),U(!1),u(null),sessionStorage.removeItem("editLeadData")},H=Le=>{Le.target.id==="modalBackdrop"&&ue()},K=()=>{M(D2),$(!1),q(null),u(null),i(!0)},we=Le=>{if(!Le){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",Le),console.log("Current state - leadID:",t,"selectedLead:",a,"showModal:",r);const be=Q=>{if(!Q)return{code:"+63",number:""};const ge=Q.match(/^(\+\d+)\s(.+)$/);return ge?{code:ge[1],number:ge[2]}:{code:"+63",number:Q}},ee=be(Le.work_phone),O=be(Le.mobile_phone_1),z=be(Le.mobile_phone_2);let I="";if(Le.assigned_to){I=String(Le.assigned_to.id);const Q=o?.find(ge=>ge.id===Le.assigned_to.id);u(Q)}M({first_name:Le.first_name||"",last_name:Le.last_name||"",company_name:Le.company_name||"",title:Le.title||"",department:Le.department||"",email:Le.email||"",work_ccode:ee.code,work_phone:ee.number,m1_ccode:O.code,mobile_phone_1:O.number,m2_ccode:z.code,mobile_phone_2:z.number,address:Le.address||"",notes:Le.notes||"",source:Le.source||"",territory_id:Le.territory?.id||null,lead_owner:I,status:Le.status||"New"}),$(!0),q(Le.id),a?(console.log("Coming from detail view - closing detail modal and showing edit form"),s(null),i(!0)):(console.log("Already in list view - showing modal"),i(!0))},Me=Le=>{if(!Le){console.error("handleDelete: lead is null or undefined");return}console.log("handleDelete called with lead:",Le);const be=`${Le.first_name} ${Le.last_name}`||"this lead";Z({title:"Delete Lead",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:be}),"? This action cannot be undone."]}),confirmLabel:"Delete Lead",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:Le.id,name:be}})},ce=Le=>{const{name:be,value:ee}=Le.target;if(M(O=>({...O,[be]:ee})),be==="lead_owner"){const O=o.find(z=>z.id===parseInt(ee));u(O)}},[oe,De]=h.useState(!1),$e=Le=>{if(Le.preventDefault(),De(!0),!L.last_name?.trim()){W.error("Last name is required.");return}if(!L.company_name?.trim()){W.error("Company is required.");return}if(!L.title?.trim()){W.error("Job title is required.");return}if(!L.email?.trim()){W.error("Email is required.");return}if(!L.email.includes("@")){W.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(L.email)){W.error("Please enter a valid email address with a dot in the domain.");return}if(!L.lead_owner){W.error("Please assign a lead owner.");return}const ee={...L,territory_id:L.territory_id?parseInt(L.territory_id):null,lead_owner:parseInt(L.lead_owner),work_phone:`${L.work_ccode} ${L.work_phone}`,mobile_phone_1:`${L.m1_ccode} ${L.mobile_phone_1}`,mobile_phone_2:`${L.m2_ccode} ${L.mobile_phone_2}`},O=F&&D?"update":"create",z=`${L.first_name} ${L.last_name}`;Z({title:O==="create"?"Confirm New Lead":"Confirm Update",message:O==="create"?n.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",n.jsx("span",{className:"font-semibold",children:z}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:z}),"?"]}),confirmLabel:O==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:O,payload:ee,targetId:D||null,name:z}})},Xe=Le=>{if(Le.target.checked){const be=rt.map(ee=>ee.id);te(be)}else te([])},Ze=Le=>{te(be=>be.includes(Le)?be.filter(ee=>ee!==Le):[...be,Le])},mt=async()=>{_e.length!==0&&Z({title:"Delete Leads",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:_e.length})," selected leads? This action cannot be undone."]}),confirmLabel:`Delete ${_e.length} Lead(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",leadIds:_e}})},nt=async()=>{if(!V?.action){Z(null);return}const{action:Le}=V,{type:be,payload:ee,targetId:O,name:z,lead:I,leadIds:Q}=Le;console.log(ee),le(!0);try{if(be==="create")U(!0),await se.post("/leads/create",ee),W.success(`Lead "${z}" created successfully.`),ue(),await We();else if(be==="update"){if(!O)throw new Error("Missing lead identifier for update.");U(!0);const ge=await se.put(`/leads/${O}`,ee);W.success(`Lead "${z}" updated successfully.`),a&&a.id===O&&s(null),ue(),await We()}else if(be==="delete"){if(!O)throw new Error("Missing lead identifier for deletion.");await se.delete(`/leads/${O}`),W.success(`Lead "${z}" deleted successfully.`),a?.id===O&&s(null),await We()}else be==="bulk-delete"&&(await se.delete("/leads/admin/bulk-delete",{data:{lead_ids:Q}}),W.success(`Successfully deleted ${Q.length} leads`),te([]),await We())}catch(ge){console.error(ge);const re=be==="create"?"Failed to create lead. Please review the details and try again.":be==="update"?"Failed to update lead. Please review the details and try again.":"Failed to delete lead. Please try again.",Ee=ge.response?.data?.detail||re;W.error(Ee)}finally{(be==="create"||be==="update")&&U(!1),be!=="edit"&&(le(!1),Z(null))}},Nt=()=>{Y||Z(null)},wt=d.filter(Le=>Le.status==="New").length,Tt=d.filter(Le=>Le.status==="Contacted").length,Re=d.filter(Le=>Le.status==="Qualified").length,me=d.filter(Le=>Le.status==="Converted").length,ie=d.filter(Le=>Le.status==="Lost").length,Fe=[{title:"New",value:wt,icon:Kn,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:Tt,icon:Ot,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:Re,icon:aa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:me,icon:Xl,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:ie,icon:Fs,color:"text-red-600",bgColor:"bg-red-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[p&&n.jsx(Wt,{message:"Loading leads..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Kn,{className:"mr-2 text-blue-600"}),"Leads"]}),n.jsxs("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:[n.jsxs("button",{onClick:()=>{W.info("Download functionality coming soon")},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(qo,{className:"mr-2"})," Download"]}),n.jsxs("button",{onClick:()=>{K(),De(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(xn,{className:"mr-2"})," Add Lead"]})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Fe.map(Le=>n.jsx(HCe,{...Le},Le.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Vt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search leads",value:y,onChange:tt,className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:v,onChange:Le=>j(Le.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]})}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:w,onChange:Le=>S(Le.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"",children:"Sort by Name"}),n.jsx("option",{value:"asc",children:"A-Z"}),n.jsx("option",{value:"desc",children:"Z-A"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:rt.length>0&&rt.every(Le=>_e.includes(Le.id)),onChange:Xe})}),n.jsx("th",{className:"py-3 px-4",children:"Name"}),n.jsx("th",{className:"py-3 px-4",children:"Company"}),n.jsx("th",{className:"py-3 px-4",children:"Job Title"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:_e.length>0?n.jsx("button",{onClick:mt,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${_e.length} selected leads`,children:n.jsx(vn,{size:18})}):""})]})}),n.jsx("tbody",{children:lt.length>0?rt.map(Le=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",children:[n.jsx("td",{className:"py-3 px-4",onClick:be=>be.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:_e.includes(Le.id),onChange:()=>Ze(Le.id)})}),n.jsx("td",{className:"py-3 px-4",onClick:()=>Ce(Le),children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[Le.first_name," ",Le.last_name]})}),n.jsx("td",{className:"py-3 px-4",onClick:()=>Ce(Le),children:n.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:Le.company_name||"--"})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",onClick:()=>Ce(Le),children:Le.title||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",onClick:()=>Ce(Le),children:Le.email||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",onClick:()=>Ce(Le),children:Le.assigned_to?`${Le.assigned_to.first_name} ${Le.assigned_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",onClick:()=>Ce(Le),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${FCe(Le.status||"New")}`,children:zCe(Le.status||"New")})}),n.jsx("td",{})]},Le.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No leads found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:lt.length,pageSize:T,currentPage:_,onPrev:He,onNext:Ke,onPageSizeChange:Je,label:"leads"}),r&&n.jsx("div",{id:"modalBackdrop",onClick:H,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:Le=>Le.stopPropagation(),children:[n.jsx("button",{onClick:()=>{ue(),De(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:F?"Edit Lead":"Add New Lead"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),n.jsx("input",{type:"text",name:"first_name",value:L.first_name,onChange:ce,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"last_name",placeholder:"Smith",value:L.last_name,onChange:ce,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
              ${oe&&!L.last_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
          focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Company ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:L.company_name,onChange:ce,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${oe&&!L.company_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Job Title",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:L.title,onChange:ce,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${oe&&!L.title?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),n.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:L.department,onChange:ce,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Email",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:L.email,onChange:ce,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${oe&&!L.email?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col col-span-1 md:col-span-2 lg:col-span-1",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"work_ccode",value:L.work_ccode,onChange:ce,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:P2.map(Le=>n.jsx("option",{value:Le.code,children:Le.code},Le.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:L.work_phone,onChange:ce,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m1_ccode",value:L.m1_ccode,onChange:ce,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:P2.map(Le=>n.jsx("option",{value:Le.code,children:Le.code},Le.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:L.mobile_phone_1,onChange:ce,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m2_ccode",value:L.m2_ccode,onChange:ce,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:P2.map(Le=>n.jsx("option",{value:Le.code,children:Le.code},Le.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:L.mobile_phone_2,onChange:ce,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),n.jsx("input",{type:"text",name:"address",value:L.address,onChange:ce,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col col-span-1 md:col-span-2 lg:col-span-1",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:`w-full rounded-lg ${oe&&!L.lead_owner?"border border-red-400":"border border-gray-300"}`,children:n.jsx(qCe,{items:Array.isArray(o)?o:[],value:L.lead_owner??"",placeholder:"Search a user...",getLabel:Le=>`${Le.first_name} ${Le.last_name}`,onChange:Le=>{const be=o.find(O=>String(O.id)===String(Le));u(be);let ee=null;be&&be.assigned_territory&&be.assigned_territory.length===1&&(ee=be.assigned_territory[0].id),M(O=>({...O,lead_owner:Le,territory_id:ee}))}})})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),n.jsxs("select",{name:"territory_id",value:L.territory_id||"",onChange:ce,disabled:!c||!c.assigned_territory||c.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[n.jsx("option",{value:"",disabled:!0,children:c?c.assigned_territory&&c.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),c&&c.assigned_territory&&c.assigned_territory.map(Le=>n.jsx("option",{value:Le.id,children:Le.name},Le.id))]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),n.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:L.source,onChange:ce,children:[n.jsx("option",{value:"",disabled:!0,children:"Select Source"}),n.jsx("option",{value:"Website",children:"Website"}),n.jsx("option",{value:"Referral",children:"Referral"}),n.jsx("option",{value:"Cold call",children:"Cold call"}),n.jsx("option",{value:"Event",children:"Event"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),n.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:L.notes,onChange:ce,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("button",{type:"button",onClick:()=>{ue(),De(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:G||Y,children:"Cancel"}),n.jsx("button",{type:"submit",onClick:$e,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:G||Y,children:G||Y?"Processing...":F?"Update Lead":"Save Lead"})]})]})]})}),V&&n.jsx(BCe,{open:!0,title:V.title,message:V.message,confirmLabel:V.confirmLabel,cancelLabel:V.cancelLabel,variant:V.variant,onConfirm:nt,onCancel:Nt,loading:Y}),a&&!r&&!F&&n.jsx(cY,{relatedActs:ae,lead:a,onBack:fe,fetchLeads:We,setSelectedLead:s,onEdit:we,onDelete:Me})]})}function BCe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function HCe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function qCe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=h.useState(!1),[u,d]=h.useState(""),f=h.useRef(null),p=e.find(N=>String(N.id)===String(t)),x=p?s(p):"",y=h.useMemo(()=>{const N=u.trim().toLowerCase();return(N?e.filter(j=>(s(j)||"").toLowerCase().includes(N)):e).slice(0,o)},[e,u,s,o]);return h.useEffect(()=>{const N=v=>{f.current&&!f.current.contains(v.target)&&c(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),h.useEffect(()=>{l||d("")},[l]),n.jsxs("div",{ref:f,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:l?u:x,placeholder:r,onFocus:()=>!i&&c(!0),onChange:N=>{d(N.target.value),l||c(!0)},className:"w-full rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:y.length>0?y.map(N=>{const v=String(N.id),j=s(N),w=String(t)===v;return n.jsx("button",{type:"button",onClick:()=>{a(v),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${w?"bg-blue-50":""}`,children:j||"--"},v)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}let WCe={data:""},GCe=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||WCe},VCe=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,YCe=/\/\*[^]*?\*\/|  +/g,DR=/\n+/g,Vc=(e,t)=>{let a="",s="",r="";for(let i in e){let o=e[i];i[0]=="@"?i[1]=="i"?a=i+" "+o+";":s+=i[1]=="f"?Vc(o,i):i+"{"+Vc(o,i[1]=="k"?"":t)+"}":typeof o=="object"?s+=Vc(o,t?t.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=Vc.p?Vc.p(i,o):i+":"+o+";")}return a+(t&&r?t+"{"+r+"}":r)+s},xl={},dY=e=>{if(typeof e=="object"){let t="";for(let a in e)t+=a+dY(e[a]);return t}return e},QCe=(e,t,a,s,r)=>{let i=dY(e),o=xl[i]||(xl[i]=(c=>{let u=0,d=11;for(;u<c.length;)d=101*d+c.charCodeAt(u++)>>>0;return"go"+d})(i));if(!xl[o]){let c=i!==e?e:(u=>{let d,f,p=[{}];for(;d=VCe.exec(u.replace(YCe,""));)d[4]?p.shift():d[3]?(f=d[3].replace(DR," ").trim(),p.unshift(p[0][f]=p[0][f]||{})):p[0][d[1]]=d[2].replace(DR," ").trim();return p[0]})(e);xl[o]=Vc(r?{["@keyframes "+o]:c}:c,a?"":"."+o)}let l=a&&xl.g?xl.g:null;return a&&(xl.g=xl[o]),((c,u,d,f)=>{f?u.data=u.data.replace(f,c):u.data.indexOf(c)===-1&&(u.data=d?c+u.data:u.data+c)})(xl[o],t,s,l),o},KCe=(e,t,a)=>e.reduce((s,r,i)=>{let o=t[i];if(o&&o.call){let l=o(a),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":Vc(l,""):l===!1?"":l}return s+r+(o??"")},"");function Nj(e){let t=this||{},a=e.call?e(t.p):e;return QCe(a.unshift?a.raw?KCe(a,[].slice.call(arguments,1),t.p):a.reduce((s,r)=>Object.assign(s,r&&r.call?r(t.p):r),{}):a,GCe(t.target),t.g,t.o,t.k)}let uY,Qk,Kk;Nj.bind({g:1});let Wl=Nj.bind({k:1});function XCe(e,t,a,s){Vc.p=t,uY=e,Qk=a,Kk=s}function Td(e,t){let a=this||{};return function(){let s=arguments;function r(i,o){let l=Object.assign({},i),c=l.className||r.className;a.p=Object.assign({theme:Qk&&Qk()},l),a.o=/ *go\d+/.test(c),l.className=Nj.apply(a,s)+(c?" "+c:"");let u=e;return e[0]&&(u=l.as||e,delete l.as),Kk&&u[0]&&Kk(l),uY(u,l)}return r}}var ZCe=e=>typeof e=="function",Zv=(e,t)=>ZCe(e)?e(t):e,JCe=(()=>{let e=0;return()=>(++e).toString()})(),mY=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),eSe=20,gP="default",fY=(e,t)=>{let{toastLimit:a}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,a)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:s}=t;return fY(e,{type:e.toasts.find(o=>o.id===s.id)?1:0,toast:s});case 3:let{toastId:r}=t;return{...e,toasts:e.toasts.map(o=>o.id===r||r===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},sv=[],hY={toasts:[],pausedAt:void 0,settings:{toastLimit:eSe}},To={},gY=(e,t=gP)=>{To[t]=fY(To[t]||hY,e),sv.forEach(([a,s])=>{a===t&&s(To[t])})},pY=e=>Object.keys(To).forEach(t=>gY(e,t)),tSe=e=>Object.keys(To).find(t=>To[t].toasts.some(a=>a.id===e)),jj=(e=gP)=>t=>{gY(t,e)},nSe={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},aSe=(e={},t=gP)=>{let[a,s]=h.useState(To[t]||hY),r=h.useRef(To[t]);h.useEffect(()=>(r.current!==To[t]&&s(To[t]),sv.push([t,s]),()=>{let o=sv.findIndex(([l])=>l===t);o>-1&&sv.splice(o,1)}),[t]);let i=a.toasts.map(o=>{var l,c,u;return{...e,...e[o.type],...o,removeDelay:o.removeDelay||((l=e[o.type])==null?void 0:l.removeDelay)||e?.removeDelay,duration:o.duration||((c=e[o.type])==null?void 0:c.duration)||e?.duration||nSe[o.type],style:{...e.style,...(u=e[o.type])==null?void 0:u.style,...o.style}}});return{...a,toasts:i}},sSe=(e,t="blank",a)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...a,id:a?.id||JCe()}),Vx=e=>(t,a)=>{let s=sSe(t,e,a);return jj(s.toasterId||tSe(s.id))({type:2,toast:s}),s.id},as=(e,t)=>Vx("blank")(e,t);as.error=Vx("error");as.success=Vx("success");as.loading=Vx("loading");as.custom=Vx("custom");as.dismiss=(e,t)=>{let a={type:3,toastId:e};t?jj(t)(a):pY(a)};as.dismissAll=e=>as.dismiss(void 0,e);as.remove=(e,t)=>{let a={type:4,toastId:e};t?jj(t)(a):pY(a)};as.removeAll=e=>as.remove(void 0,e);as.promise=(e,t,a)=>{let s=as.loading(t.loading,{...a,...a?.loading});return typeof e=="function"&&(e=e()),e.then(r=>{let i=t.success?Zv(t.success,r):void 0;return i?as.success(i,{id:s,...a,...a?.success}):as.dismiss(s),r}).catch(r=>{let i=t.error?Zv(t.error,r):void 0;i?as.error(i,{id:s,...a,...a?.error}):as.dismiss(s)}),e};var rSe=1e3,iSe=(e,t="default")=>{let{toasts:a,pausedAt:s}=aSe(e,t),r=h.useRef(new Map).current,i=h.useCallback((f,p=rSe)=>{if(r.has(f))return;let x=setTimeout(()=>{r.delete(f),o({type:4,toastId:f})},p);r.set(f,x)},[]);h.useEffect(()=>{if(s)return;let f=Date.now(),p=a.map(x=>{if(x.duration===1/0)return;let y=(x.duration||0)+x.pauseDuration-(f-x.createdAt);if(y<0){x.visible&&as.dismiss(x.id);return}return setTimeout(()=>as.dismiss(x.id,t),y)});return()=>{p.forEach(x=>x&&clearTimeout(x))}},[a,s,t]);let o=h.useCallback(jj(t),[t]),l=h.useCallback(()=>{o({type:5,time:Date.now()})},[o]),c=h.useCallback((f,p)=>{o({type:1,toast:{id:f,height:p}})},[o]),u=h.useCallback(()=>{s&&o({type:6,time:Date.now()})},[s,o]),d=h.useCallback((f,p)=>{let{reverseOrder:x=!1,gutter:y=8,defaultPosition:N}=p||{},v=a.filter(S=>(S.position||N)===(f.position||N)&&S.height),j=v.findIndex(S=>S.id===f.id),w=v.filter((S,_)=>_<j&&S.visible).length;return v.filter(S=>S.visible).slice(...x?[w+1]:[0,w]).reduce((S,_)=>S+(_.height||0)+y,0)},[a]);return h.useEffect(()=>{a.forEach(f=>{if(f.dismissed)i(f.id,f.removeDelay);else{let p=r.get(f.id);p&&(clearTimeout(p),r.delete(f.id))}})},[a,i]),{toasts:a,handlers:{updateHeight:c,startPause:l,endPause:u,calculateOffset:d}}},oSe=Wl`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,lSe=Wl`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,cSe=Wl`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,dSe=Td("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${oSe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${lSe} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${cSe} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,uSe=Wl`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,mSe=Td("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${uSe} 1s linear infinite;
`,fSe=Wl`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,hSe=Wl`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,gSe=Td("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${fSe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${hSe} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,pSe=Td("div")`
  position: absolute;
`,xSe=Td("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,ySe=Wl`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,bSe=Td("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${ySe} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,vSe=({toast:e})=>{let{icon:t,type:a,iconTheme:s}=e;return t!==void 0?typeof t=="string"?h.createElement(bSe,null,t):t:a==="blank"?null:h.createElement(xSe,null,h.createElement(mSe,{...s}),a!=="loading"&&h.createElement(pSe,null,a==="error"?h.createElement(dSe,{...s}):h.createElement(gSe,{...s})))},wSe=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,NSe=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,jSe="0%{opacity:0;} 100%{opacity:1;}",CSe="0%{opacity:1;} 100%{opacity:0;}",SSe=Td("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,_Se=Td("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,ASe=(e,t)=>{let a=e.includes("top")?1:-1,[s,r]=mY()?[jSe,CSe]:[wSe(a),NSe(a)];return{animation:t?`${Wl(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Wl(r)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},TSe=h.memo(({toast:e,position:t,style:a,children:s})=>{let r=e.height?ASe(e.position||t||"top-center",e.visible):{opacity:0},i=h.createElement(vSe,{toast:e}),o=h.createElement(_Se,{...e.ariaProps},Zv(e.message,e));return h.createElement(SSe,{className:e.className,style:{...r,...a,...e.style}},typeof s=="function"?s({icon:i,message:o}):h.createElement(h.Fragment,null,i,o))});XCe(h.createElement);var kSe=({id:e,className:t,style:a,onHeightUpdate:s,children:r})=>{let i=h.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;s(e,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,s]);return h.createElement("div",{ref:i,className:t,style:a},r)},ESe=(e,t)=>{let a=e.includes("top"),s=a?{top:0}:{bottom:0},r=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:mY()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(a?1:-1)}px)`,...s,...r}},LSe=Nj`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,eb=16,Yx=({reverseOrder:e,position:t="top-center",toastOptions:a,gutter:s,children:r,toasterId:i,containerStyle:o,containerClassName:l})=>{let{toasts:c,handlers:u}=iSe(a,i);return h.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:eb,left:eb,right:eb,bottom:eb,pointerEvents:"none",...o},className:l,onMouseEnter:u.startPause,onMouseLeave:u.endPause},c.map(d=>{let f=d.position||t,p=u.calculateOffset(d,{reverseOrder:e,gutter:s,defaultPosition:t}),x=ESe(f,p);return h.createElement(kSe,{id:d.id,key:d.id,onHeightUpdate:u.updateHeight,className:d.visible?LSe:"",style:x},d.type==="custom"?Zv(d.message,d):r?r(d):h.createElement(TSe,{toast:d,position:f}))}))},Qx=as;function PSe(){h.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,t]=h.useState(null),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Actions"),[o,l]=h.useState(1),[c,u]=h.useState(10),d=async()=>{try{const w=await se.get("/logs/read-all");t(w.data)}catch(w){console.error("Error fetching audit logs:",w)}};h.useEffect(()=>{d()},[]);const f=h.useMemo(()=>{if(!Array.isArray(e))return[];const w=a.trim().toLowerCase(),S=r?.toUpperCase?.()||"ALL";return e.filter(E=>{const T=E.timestamp?new Date(E.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",A=`${E.entity_type||""} ${E.entity_name||E.entity_details?.name||E.entity_details?.title||E.entity_id||""}`,L=`${E.logger?.first_name||""} ${E.logger?.last_name||""}`,M=[T,L,E.action,E.entity_type,A,E.description],F=w===""||M.some(D=>D==null?!1:D.toString().toLowerCase().includes(w)),$=S==="FILTER BY ACTIONS"||(E.action||"").toUpperCase()===S;return F&&$}).sort((E,T)=>{const A=E.timestamp?new Date(E.timestamp).getTime():0;return(T.timestamp?new Date(T.timestamp).getTime():0)-A})},[e,a,r]),p=Math.max(1,Math.ceil(f.length/c)||1);h.useEffect(()=>{l(1)},[a,r]),h.useEffect(()=>{l(w=>{const S=Math.max(1,Math.ceil(f.length/c)||1);return w>S?S:w})},[f.length,c]);const x=h.useMemo(()=>{const w=(o-1)*c;return f.slice(w,w+c)},[f,o,c]);f.length===0||(o-1)*c+1,Math.min(o*c,f.length);const y=()=>l(w=>Math.max(w-1,1)),N=()=>l(w=>Math.min(w+1,p)),v=()=>{if(!f.length){Qx.error("No logs to export!");return}const w=["Timestamp","User","Action","Resource","Details"],S=f.map(L=>[new Date(L.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${L.logger?.first_name||""} ${L.logger?.last_name||""}`.trim(),L.action,`${L.entity_type}: ${L.entity_id}`,L.description||""]),_=[w.join(","),...S.map(L=>L.map(M=>`"${String(M).replace(/"/g,'""')}"`).join(","))].join(`
`),E=new Blob([_],{type:"text/csv;charset=utf-8;"}),T=URL.createObjectURL(E),A=document.createElement("a");A.href=T,A.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(A),A.click(),document.body.removeChild(A),URL.revokeObjectURL(T)},j=w=>{switch((w||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&n.jsx(Wt,{message:"Loading audit logs..."}),n.jsx(Yx,{toastOptions:{duration:1e3}}),n.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[n.jsx(Pt,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),n.jsxs("p",{className:"text-sm text-blue-700",children:[n.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ks,{className:"text-blue-600",size:20}),n.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:v,children:[n.jsx(qo,{className:"mr-2"}),"Export Logs"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[n.jsx(Vt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search audit logs",value:a,onChange:w=>s(w.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:r,onChange:w=>i(w.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),n.jsx("option",{value:"CREATE",children:"CREATE"}),n.jsx("option",{value:"DELETE",children:"DELETE"}),n.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),n.jsx("th",{className:"py-3 px-4",children:"User"}),n.jsx("th",{className:"py-3 px-4",children:"Action"}),n.jsx("th",{className:"py-3 px-4",children:"Resource"}),n.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),n.jsx("tbody",{children:Array.isArray(f)&&f.length>0?x.map((w,S)=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(w.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.name}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${j(w.action)}`,children:w.action})}),n.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[w.entity_type,": ",w.entity_id]}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.description})]},S)):n.jsx("tr",{children:n.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:f.length,pageSize:c,currentPage:o,onPrev:y,onNext:N,onPageSizeChange:w=>{u(w),l(1)},pageSizeOptions:[10,20,30,40,50],label:"logs"})]})}var DSe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function pP(e){if(typeof e!="string")return!1;var t=DSe;return t.includes(e)}var OSe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],MSe=new Set(OSe);function xY(e){return typeof e!="string"?!1:MSe.has(e)}function yY(e){return typeof e=="string"&&e.startsWith("data-")}function Br(e){if(typeof e!="object"||e===null)return{};var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(xY(a)||yY(a))&&(t[a]=e[a]);return t}function $u(e){if(e==null)return null;if(h.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Br(t)}return typeof e=="object"&&!Array.isArray(e)?Br(e):null}function Ys(e){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(xY(a)||yY(a)||pP(a))&&(t[a]=e[a]);return t}function ISe(e){return e==null?null:h.isValidElement(e)?Ys(e.props):typeof e=="object"&&!Array.isArray(e)?Ys(e):null}var $Se=["children","width","height","viewBox","className","style","title","desc"];function Xk(){return Xk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Xk.apply(null,arguments)}function RSe(e,t){if(e==null)return{};var a,s,r=zSe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function zSe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var xP=h.forwardRef((e,t)=>{var{children:a,width:s,height:r,viewBox:i,className:o,style:l,title:c,desc:u}=e,d=RSe(e,$Se),f=i||{width:s,height:r,x:0,y:0},p=Mt("recharts-surface",o);return h.createElement("svg",Xk({},Ys(d),{className:p,width:s,height:r,style:l,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),h.createElement("title",null,c),h.createElement("desc",null,u),a)}),FSe=["children","className"];function Zk(){return Zk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Zk.apply(null,arguments)}function USe(e,t){if(e==null)return{};var a,s,r=BSe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function BSe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var ys=h.forwardRef((e,t)=>{var{children:a,className:s}=e,r=USe(e,FSe),i=Mt("recharts-layer",s);return h.createElement("g",Zk({className:i},Ys(r),{ref:t}),a)}),bY=h.createContext(null),HSe=()=>h.useContext(bY),O2={},M2={},OR;function qSe(){return OR||(OR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a==="__proto__"}e.isUnsafeProperty=t})(M2)),M2}var I2={},MR;function vY(){return MR||(MR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){switch(typeof a){case"number":case"symbol":return!1;case"string":return a.includes(".")||a.includes("[")||a.includes("]")}}e.isDeepKey=t})(I2)),I2}var $2={},IR;function yP(){return IR||(IR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="string"||typeof a=="symbol"?a:Object.is(a?.valueOf?.(),-0)?"-0":String(a)}e.toKey=t})($2)),$2}var R2={},z2={},$R;function WSe(){return $R||($R=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){if(a==null)return"";if(typeof a=="string")return a;if(Array.isArray(a))return a.map(t).join(",");const s=String(a);return s==="0"&&Object.is(Number(a),-0)?"-0":s}e.toString=t})(z2)),z2}var RR;function bP(){return RR||(RR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=WSe(),a=yP();function s(r){if(Array.isArray(r))return r.map(a.toKey);if(typeof r=="symbol")return[r];r=t.toString(r);const i=[],o=r.length;if(o===0)return i;let l=0,c="",u="",d=!1;for(r.charCodeAt(0)===46&&(i.push(""),l++);l<o;){const f=r[l];u?f==="\\"&&l+1<o?(l++,c+=r[l]):f===u?u="":c+=f:d?f==='"'||f==="'"?u=f:f==="]"?(d=!1,i.push(c),c=""):c+=f:f==="["?(d=!0,c&&(i.push(c),c="")):f==="."?c&&(i.push(c),c=""):c+=f,l++}return c&&i.push(c),i}e.toPath=s})(R2)),R2}var zR;function vP(){return zR||(zR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qSe(),a=vY(),s=yP(),r=bP();function i(l,c,u){if(l==null)return u;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?a.isDeepKey(c)?i(l,r.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=s.toKey(c));const d=l[c];return d===void 0?u:d}default:{if(Array.isArray(c))return o(l,c,u);if(Object.is(c?.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?u:d}}}function o(l,c,u){if(c.length===0)return u;let d=l;for(let f=0;f<c.length;f++){if(d==null||t.isUnsafeProperty(c[f]))return u;d=d[c[f]]}return d===void 0?u:d}e.get=i})(O2)),O2}var F2,FR;function GSe(){return FR||(FR=1,F2=vP().get),F2}var VSe=GSe();const Ru=Zi(VSe);var YSe=4;function Zc(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:YSe,a=10**t,s=Math.round(e*a)/a;return Object.is(s,-0)?0:s}function Ca(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),s=1;s<t;s++)a[s-1]=arguments[s];return e.reduce((r,i,o)=>{var l=a[o-1];return typeof l=="string"?r+l+i:l!==void 0?r+Zc(l)+i:r+i},"")}var xs=e=>e===0?0:e>0?1:-1,Ki=e=>typeof e=="number"&&e!=+e,Gl=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,zt=e=>(typeof e=="number"||e instanceof Number)&&!Ki(e),Fo=e=>zt(e)||typeof e=="string",QSe=0,Dp=e=>{var t=++QSe;return"".concat(e||"").concat(t)},Rs=function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!zt(t)&&typeof t!="string")return s;var i;if(Gl(t)){if(a==null)return s;var o=t.indexOf("%");i=a*parseFloat(t.slice(0,o))/100}else i=+t;return Ki(i)&&(i=s),r&&a!=null&&i>a&&(i=a),i},wY=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,a={},s=0;s<t;s++)if(!a[String(e[s])])a[String(e[s])]=!0;else return!0;return!1};function da(e,t,a){return zt(e)&&zt(t)?Zc(e+a*(t-e)):t}function NY(e,t,a){if(!(!e||!e.length))return e.find(s=>s&&(typeof t=="function"?t(s):Ru(s,t))===a)}var fa=e=>e===null||typeof e>"u",Kx=e=>fa(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function KSe(e){return e!=null}function Xx(){}var XSe=["type","size","sizeType"];function Jk(){return Jk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Jk.apply(null,arguments)}function UR(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function BR(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?UR(Object(a),!0).forEach(function(s){ZSe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):UR(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function ZSe(e,t,a){return(t=JSe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function JSe(e){var t=e2e(e,"string");return typeof t=="symbol"?t:t+""}function e2e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function t2e(e,t){if(e==null)return{};var a,s,r=n2e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function n2e(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var jY={symbolCircle:JN,symbolCross:YW,symbolDiamond:KW,symbolSquare:XW,symbolStar:JW,symbolTriangle:eG,symbolWye:tG},a2e=Math.PI/180,s2e=e=>{var t="symbol".concat(Kx(e));return jY[t]||JN},r2e=(e,t,a)=>{if(t==="area")return e;switch(a){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var s=18*a2e;return 1.25*e*e*(Math.tan(s)-Math.tan(s*2)*Math.tan(s)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},i2e=(e,t)=>{jY["symbol".concat(Kx(e))]=t},wP=e=>{var{type:t="circle",size:a=64,sizeType:s="area"}=e,r=t2e(e,XSe),i=BR(BR({},r),{},{type:t,size:a,sizeType:s}),o="circle";typeof t=="string"&&(o=t);var l=()=>{var p=s2e(o),x=D4().type(p).size(r2e(a,s,o)),y=x();if(y!==null)return y},{className:c,cx:u,cy:d}=i,f=Ys(i);return zt(u)&&zt(d)&&zt(a)?h.createElement("path",Jk({},f,{className:Mt("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(d,")"),d:l()})):null};wP.registerSymbol=i2e;var CY=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,NP=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(h.isValidElement(e)&&(a=e.props),typeof a!="object"&&typeof a!="function")return null;var s={};return Object.keys(a).forEach(r=>{pP(r)&&(s[r]=(i=>a[r](a,i)))}),s},o2e=(e,t,a)=>s=>(e(t,a,s),null),Zx=(e,t,a)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var s=null;return Object.keys(e).forEach(r=>{var i=e[r];pP(r)&&typeof i=="function"&&(s||(s={}),s[r]=o2e(i,t,a))}),s};function HR(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function l2e(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?HR(Object(a),!0).forEach(function(s){c2e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):HR(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function c2e(e,t,a){return(t=d2e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function d2e(e){var t=u2e(e,"string");return typeof t=="symbol"?t:t+""}function u2e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qa(e,t){var a=l2e({},e),s=t,r=Object.keys(t),i=r.reduce((o,l)=>(o[l]===void 0&&s[l]!==void 0&&(o[l]=s[l]),o),a);return i}function Jv(){return Jv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Jv.apply(null,arguments)}function qR(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function m2e(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?qR(Object(a),!0).forEach(function(s){f2e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):qR(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function f2e(e,t,a){return(t=h2e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function h2e(e){var t=g2e(e,"string");return typeof t=="symbol"?t:t+""}function g2e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var li=32,p2e={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function x2e(e){var{data:t,iconType:a,inactiveColor:s}=e,r=li/2,i=li/6,o=li/3,l=t.inactive?s:t.color,c=a??t.type;if(c==="none")return null;if(c==="plainline"){var u;return h.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:(u=t.payload)===null||u===void 0?void 0:u.strokeDasharray,x1:0,y1:r,x2:li,y2:r,className:"recharts-legend-icon"})}if(c==="line")return h.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(r,"h").concat(o,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*o,",").concat(r,`
            H`).concat(li,"M").concat(2*o,",").concat(r,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(o,",").concat(r),className:"recharts-legend-icon"});if(c==="rect")return h.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(li/8,"h").concat(li,"v").concat(li*3/4,"h").concat(-li,"z"),className:"recharts-legend-icon"});if(h.isValidElement(t.legendIcon)){var d=m2e({},t);return delete d.legendIcon,h.cloneElement(t.legendIcon,d)}return h.createElement(wP,{fill:l,cx:r,cy:r,size:li,sizeType:"diameter",type:c})}function y2e(e){var{payload:t,iconSize:a,layout:s,formatter:r,inactiveColor:i,iconType:o}=e,l={x:0,y:0,width:li,height:li},c={display:s==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((d,f)=>{var p=d.formatter||r,x=Mt({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:d.inactive});if(d.type==="none")return null;var y=d.inactive?i:d.color,N=p?p(d.value,d,f):d.value;return h.createElement("li",Jv({className:x,style:c,key:"legend-item-".concat(f)},Zx(e,d,f)),h.createElement(xP,{width:a,height:a,viewBox:l,style:u,"aria-label":"".concat(N," legend icon")},h.createElement(x2e,{data:d,iconType:o,inactiveColor:i})),h.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},N))})}var b2e=e=>{var t=Qa(e,p2e),{payload:a,layout:s,align:r}=t;if(!a||!a.length)return null;var i={padding:0,margin:0,textAlign:s==="horizontal"?r:"left"};return h.createElement("ul",{className:"recharts-default-legend",style:i},h.createElement(y2e,Jv({},t,{payload:a})))},U2={},B2={},WR;function v2e(){return WR||(WR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a,s){const r=new Map;for(let i=0;i<a.length;i++){const o=a[i],l=s(o);r.has(l)||r.set(l,o)}return Array.from(r.values())}e.uniqBy=t})(B2)),B2}var H2={},GR;function SY(){return GR||(GR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a}e.identity=t})(H2)),H2}var q2={},W2={},G2={},VR;function w2e(){return VR||(VR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return Number.isSafeInteger(a)&&a>=0}e.isLength=t})(G2)),G2}var YR;function jP(){return YR||(YR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=w2e();function a(s){return s!=null&&typeof s!="function"&&t.isLength(s.length)}e.isArrayLike=a})(W2)),W2}var V2={},QR;function N2e(){return QR||(QR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="object"&&a!==null}e.isObjectLike=t})(V2)),V2}var KR;function j2e(){return KR||(KR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jP(),a=N2e();function s(r){return a.isObjectLike(r)&&t.isArrayLike(r)}e.isArrayLikeObject=s})(q2)),q2}var Y2={},Q2={},XR;function C2e(){return XR||(XR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vP();function a(s){return function(r){return t.get(r,s)}}e.property=a})(Q2)),Q2}var K2={},X2={},Z2={},J2={},ZR;function _Y(){return ZR||(ZR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a!==null&&(typeof a=="object"||typeof a=="function")}e.isObject=t})(J2)),J2}var e_={},JR;function AY(){return JR||(JR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a==null||typeof a!="object"&&typeof a!="function"}e.isPrimitive=t})(e_)),e_}var t_={},ez;function TY(){return ez||(ez=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a,s){return a===s||Number.isNaN(a)&&Number.isNaN(s)}e.eq=t})(t_)),t_}var tz;function S2e(){return tz||(tz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_Y(),a=AY(),s=TY();function r(d,f,p){return typeof p!="function"?r(d,f,()=>{}):i(d,f,function x(y,N,v,j,w,S){const _=p(y,N,v,j,w,S);return _!==void 0?!!_:i(y,N,x,S)},new Map)}function i(d,f,p,x){if(f===d)return!0;switch(typeof f){case"object":return o(d,f,p,x);case"function":return Object.keys(f).length>0?i(d,{...f},p,x):s.eq(d,f);default:return t.isObject(d)?typeof f=="string"?f==="":!0:s.eq(d,f)}}function o(d,f,p,x){if(f==null)return!0;if(Array.isArray(f))return c(d,f,p,x);if(f instanceof Map)return l(d,f,p,x);if(f instanceof Set)return u(d,f,p,x);const y=Object.keys(f);if(d==null||a.isPrimitive(d))return y.length===0;if(y.length===0)return!0;if(x?.has(f))return x.get(f)===d;x?.set(f,d);try{for(let N=0;N<y.length;N++){const v=y[N];if(!a.isPrimitive(d)&&!(v in d)||f[v]===void 0&&d[v]!==void 0||f[v]===null&&d[v]!==null||!p(d[v],f[v],v,d,f,x))return!1}return!0}finally{x?.delete(f)}}function l(d,f,p,x){if(f.size===0)return!0;if(!(d instanceof Map))return!1;for(const[y,N]of f.entries()){const v=d.get(y);if(p(v,N,y,d,f,x)===!1)return!1}return!0}function c(d,f,p,x){if(f.length===0)return!0;if(!Array.isArray(d))return!1;const y=new Set;for(let N=0;N<f.length;N++){const v=f[N];let j=!1;for(let w=0;w<d.length;w++){if(y.has(w))continue;const S=d[w];let _=!1;if(p(S,v,N,d,f,x)&&(_=!0),_){y.add(w),j=!0;break}}if(!j)return!1}return!0}function u(d,f,p,x){return f.size===0?!0:d instanceof Set?c([...d],[...f],p,x):!1}e.isMatchWith=r,e.isSetMatch=u})(Z2)),Z2}var nz;function kY(){return nz||(nz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=S2e();function a(s,r){return t.isMatchWith(s,r,()=>{})}e.isMatch=a})(X2)),X2}var n_={},a_={},s_={},az;function _2e(){return az||(az=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return Object.getOwnPropertySymbols(a).filter(s=>Object.prototype.propertyIsEnumerable.call(a,s))}e.getSymbols=t})(s_)),s_}var r_={},sz;function EY(){return sz||(sz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a==null?a===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(a)}e.getTag=t})(r_)),r_}var i_={},rz;function LY(){return rz||(rz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",a="[object String]",s="[object Number]",r="[object Boolean]",i="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",p="[object ArrayBuffer]",x="[object Object]",y="[object Error]",N="[object DataView]",v="[object Uint8Array]",j="[object Uint8ClampedArray]",w="[object Uint16Array]",S="[object Uint32Array]",_="[object BigUint64Array]",E="[object Int8Array]",T="[object Int16Array]",A="[object Int32Array]",L="[object BigInt64Array]",M="[object Float32Array]",F="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=p,e.arrayTag=d,e.bigInt64ArrayTag=L,e.bigUint64ArrayTag=_,e.booleanTag=r,e.dataViewTag=N,e.dateTag=l,e.errorTag=y,e.float32ArrayTag=M,e.float64ArrayTag=F,e.functionTag=f,e.int16ArrayTag=T,e.int32ArrayTag=A,e.int8ArrayTag=E,e.mapTag=c,e.numberTag=s,e.objectTag=x,e.regexpTag=t,e.setTag=u,e.stringTag=a,e.symbolTag=o,e.uint16ArrayTag=w,e.uint32ArrayTag=S,e.uint8ArrayTag=v,e.uint8ClampedArrayTag=j})(i_)),i_}var o_={},iz;function A2e(){return iz||(iz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)}e.isTypedArray=t})(o_)),o_}var oz;function PY(){return oz||(oz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_2e(),a=EY(),s=LY(),r=AY(),i=A2e();function o(d,f){return l(d,void 0,d,new Map,f)}function l(d,f,p,x=new Map,y=void 0){const N=y?.(d,f,p,x);if(N!==void 0)return N;if(r.isPrimitive(d))return d;if(x.has(d))return x.get(d);if(Array.isArray(d)){const v=new Array(d.length);x.set(d,v);for(let j=0;j<d.length;j++)v[j]=l(d[j],j,p,x,y);return Object.hasOwn(d,"index")&&(v.index=d.index),Object.hasOwn(d,"input")&&(v.input=d.input),v}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const v=new RegExp(d.source,d.flags);return v.lastIndex=d.lastIndex,v}if(d instanceof Map){const v=new Map;x.set(d,v);for(const[j,w]of d)v.set(j,l(w,j,p,x,y));return v}if(d instanceof Set){const v=new Set;x.set(d,v);for(const j of d)v.add(l(j,void 0,p,x,y));return v}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(i.isTypedArray(d)){const v=new(Object.getPrototypeOf(d)).constructor(d.length);x.set(d,v);for(let j=0;j<d.length;j++)v[j]=l(d[j],j,p,x,y);return v}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const v=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return x.set(d,v),c(v,d,p,x,y),v}if(typeof File<"u"&&d instanceof File){const v=new File([d],d.name,{type:d.type});return x.set(d,v),c(v,d,p,x,y),v}if(typeof Blob<"u"&&d instanceof Blob){const v=new Blob([d],{type:d.type});return x.set(d,v),c(v,d,p,x,y),v}if(d instanceof Error){const v=new d.constructor;return x.set(d,v),v.message=d.message,v.name=d.name,v.stack=d.stack,v.cause=d.cause,c(v,d,p,x,y),v}if(d instanceof Boolean){const v=new Boolean(d.valueOf());return x.set(d,v),c(v,d,p,x,y),v}if(d instanceof Number){const v=new Number(d.valueOf());return x.set(d,v),c(v,d,p,x,y),v}if(d instanceof String){const v=new String(d.valueOf());return x.set(d,v),c(v,d,p,x,y),v}if(typeof d=="object"&&u(d)){const v=Object.create(Object.getPrototypeOf(d));return x.set(d,v),c(v,d,p,x,y),v}return d}function c(d,f,p=d,x,y){const N=[...Object.keys(f),...t.getSymbols(f)];for(let v=0;v<N.length;v++){const j=N[v],w=Object.getOwnPropertyDescriptor(d,j);(w==null||w.writable)&&(d[j]=l(f[j],j,p,x,y))}}function u(d){switch(a.getTag(d)){case s.argumentsTag:case s.arrayTag:case s.arrayBufferTag:case s.dataViewTag:case s.booleanTag:case s.dateTag:case s.float32ArrayTag:case s.float64ArrayTag:case s.int8ArrayTag:case s.int16ArrayTag:case s.int32ArrayTag:case s.mapTag:case s.numberTag:case s.objectTag:case s.regexpTag:case s.setTag:case s.stringTag:case s.symbolTag:case s.uint8ArrayTag:case s.uint8ClampedArrayTag:case s.uint16ArrayTag:case s.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=l,e.copyProperties=c})(a_)),a_}var lz;function T2e(){return lz||(lz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=PY();function a(s){return t.cloneDeepWithImpl(s,void 0,s,new Map,void 0)}e.cloneDeep=a})(n_)),n_}var cz;function k2e(){return cz||(cz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kY(),a=T2e();function s(r){return r=a.cloneDeep(r),i=>t.isMatch(i,r)}e.matches=s})(K2)),K2}var l_={},c_={},d_={},dz;function E2e(){return dz||(dz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=PY(),a=LY();function s(r,i){return t.cloneDeepWith(r,(o,l,c,u)=>{const d=i?.(o,l,c,u);if(d!==void 0)return d;if(typeof r=="object")switch(Object.prototype.toString.call(r)){case a.numberTag:case a.stringTag:case a.booleanTag:{const f=new r.constructor(r?.valueOf());return t.copyProperties(f,r),f}case a.argumentsTag:{const f={};return t.copyProperties(f,r),f.length=r.length,f[Symbol.iterator]=r[Symbol.iterator],f}default:return}})}e.cloneDeepWith=s})(d_)),d_}var uz;function L2e(){return uz||(uz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=E2e();function a(s){return t.cloneDeepWith(s)}e.cloneDeep=a})(c_)),c_}var u_={},m_={},mz;function DY(){return mz||(mz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function a(s,r=Number.MAX_SAFE_INTEGER){switch(typeof s){case"number":return Number.isInteger(s)&&s>=0&&s<r;case"symbol":return!1;case"string":return t.test(s)}}e.isIndex=a})(m_)),m_}var f_={},fz;function P2e(){return fz||(fz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=EY();function a(s){return s!==null&&typeof s=="object"&&t.getTag(s)==="[object Arguments]"}e.isArguments=a})(f_)),f_}var hz;function D2e(){return hz||(hz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vY(),a=DY(),s=P2e(),r=bP();function i(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&t.isDeepKey(l)&&o?.[l]==null?c=r.toPath(l):c=[l],c.length===0)return!1;let u=o;for(let d=0;d<c.length;d++){const f=c[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||s.isArguments(u))&&a.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}e.has=i})(u_)),u_}var gz;function O2e(){return gz||(gz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kY(),a=yP(),s=L2e(),r=vP(),i=D2e();function o(l,c){switch(typeof l){case"object":{Object.is(l?.valueOf(),-0)&&(l="-0");break}case"number":{l=a.toKey(l);break}}return c=s.cloneDeep(c),function(u){const d=r.get(u,l);return d===void 0?i.has(u,l):c===void 0?d===void 0:t.isMatch(d,c)}}e.matchesProperty=o})(l_)),l_}var pz;function M2e(){return pz||(pz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=SY(),a=C2e(),s=k2e(),r=O2e();function i(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?r.matchesProperty(o[0],o[1]):s.matches(o);case"string":case"symbol":case"number":return a.property(o)}}e.iteratee=i})(Y2)),Y2}var xz;function I2e(){return xz||(xz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=v2e(),a=SY(),s=j2e(),r=M2e();function i(o,l=a.identity){return s.isArrayLikeObject(o)?t.uniqBy(Array.from(o),r.iteratee(l)):[]}e.uniqBy=i})(U2)),U2}var h_,yz;function $2e(){return yz||(yz=1,h_=I2e().uniqBy),h_}var R2e=$2e();const bz=Zi(R2e);function OY(e,t,a){return t===!0?bz(e,a):typeof t=="function"?bz(e,t):e}var CP=h.createContext(null),z2e=e=>e,Zn=()=>{var e=h.useContext(CP);return e?e.store.dispatch:z2e},rv=()=>{},F2e=()=>rv,U2e=(e,t)=>e===t;function Ut(e){var t=h.useContext(CP);return sq.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:F2e,t?t.store.getState:rv,t?t.store.getState:rv,t?e:rv,U2e)}var g_={},p_={},x_={},vz;function B2e(){return vz||(vz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return typeof s=="symbol"?1:s===null?2:s===void 0?3:s!==s?4:0}const a=(s,r,i)=>{if(s!==r){const o=t(s),l=t(r);if(o===l&&o===0){if(s<r)return i==="desc"?1:-1;if(s>r)return i==="desc"?-1:1}return i==="desc"?l-o:o-l}return 0};e.compareValues=a})(x_)),x_}var y_={},b_={},wz;function MY(){return wz||(wz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="symbol"||a instanceof Symbol}e.isSymbol=t})(b_)),b_}var Nz;function H2e(){return Nz||(Nz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=MY(),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;function r(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(s.test(i)||!a.test(i))||o!=null&&Object.hasOwn(o,i)}e.isKey=r})(y_)),y_}var jz;function q2e(){return jz||(jz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=B2e(),a=H2e(),s=bP();function r(i,o,l,c){if(i==null)return[];l=c?void 0:l,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(x=>String(x));const u=(x,y)=>{let N=x;for(let v=0;v<y.length&&N!=null;++v)N=N[y[v]];return N},d=(x,y)=>y==null||x==null?y:typeof x=="object"&&"key"in x?Object.hasOwn(y,x.key)?y[x.key]:u(y,x.path):typeof x=="function"?x(y):Array.isArray(x)?u(y,x):typeof y=="object"?y[x]:y,f=o.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||a.isKey(x)?x:{key:x,path:s.toPath(x)}));return i.map(x=>({original:x,criteria:f.map(y=>d(y,x))})).slice().sort((x,y)=>{for(let N=0;N<f.length;N++){const v=t.compareValues(x.criteria[N],y.criteria[N],l[N]);if(v!==0)return v}return 0}).map(x=>x.original)}e.orderBy=r})(p_)),p_}var v_={},Cz;function W2e(){return Cz||(Cz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a,s=1){const r=[],i=Math.floor(s),o=(l,c)=>{for(let u=0;u<l.length;u++){const d=l[u];Array.isArray(d)&&c<i?o(d,c+1):r.push(d)}};return o(a,0),r}e.flatten=t})(v_)),v_}var w_={},Sz;function IY(){return Sz||(Sz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=DY(),a=jP(),s=_Y(),r=TY();function i(o,l,c){return s.isObject(c)&&(typeof l=="number"&&a.isArrayLike(c)&&t.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?r.eq(c[l],o):!1}e.isIterateeCall=i})(w_)),w_}var _z;function G2e(){return _z||(_z=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=q2e(),a=W2e(),s=IY();function r(i,...o){const l=o.length;return l>1&&s.isIterateeCall(i,o[0],o[1])?o=[]:l>2&&s.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(i,a.flatten(o),["asc"])}e.sortBy=r})(g_)),g_}var N_,Az;function V2e(){return Az||(Az=1,N_=G2e().sortBy),N_}var Y2e=V2e();const Cj=Zi(Y2e);var $Y=e=>e.legend.settings,Q2e=e=>e.legend.size,K2e=e=>e.legend.payload,X2e=it([K2e,$Y],(e,t)=>{var{itemSorter:a}=t,s=e.flat(1);return a?Cj(s,a):s});function Z2e(){return Ut(X2e)}var tb=1;function RY(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,a]=h.useState({height:0,left:0,top:0,width:0}),s=h.useCallback(r=>{if(r!=null){var i=r.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-t.height)>tb||Math.abs(o.left-t.left)>tb||Math.abs(o.top-t.top)>tb||Math.abs(o.width-t.width)>tb)&&a({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,s]}function _s(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var J2e=typeof Symbol=="function"&&Symbol.observable||"@@observable",Tz=J2e,j_=()=>Math.random().toString(36).substring(7).split("").join("."),e_e={INIT:`@@redux/INIT${j_()}`,REPLACE:`@@redux/REPLACE${j_()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${j_()}`},ew=e_e;function SP(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function zY(e,t,a){if(typeof e!="function")throw new Error(_s(2));if(typeof t=="function"&&typeof a=="function"||typeof a=="function"&&typeof arguments[3]=="function")throw new Error(_s(0));if(typeof t=="function"&&typeof a>"u"&&(a=t,t=void 0),typeof a<"u"){if(typeof a!="function")throw new Error(_s(1));return a(zY)(e,t)}let s=e,r=t,i=new Map,o=i,l=0,c=!1;function u(){o===i&&(o=new Map,i.forEach((v,j)=>{o.set(j,v)}))}function d(){if(c)throw new Error(_s(3));return r}function f(v){if(typeof v!="function")throw new Error(_s(4));if(c)throw new Error(_s(5));let j=!0;u();const w=l++;return o.set(w,v),function(){if(j){if(c)throw new Error(_s(6));j=!1,u(),o.delete(w),i=null}}}function p(v){if(!SP(v))throw new Error(_s(7));if(typeof v.type>"u")throw new Error(_s(8));if(typeof v.type!="string")throw new Error(_s(17));if(c)throw new Error(_s(9));try{c=!0,r=s(r,v)}finally{c=!1}return(i=o).forEach(w=>{w()}),v}function x(v){if(typeof v!="function")throw new Error(_s(10));s=v,p({type:ew.REPLACE})}function y(){const v=f;return{subscribe(j){if(typeof j!="object"||j===null)throw new Error(_s(11));function w(){const _=j;_.next&&_.next(d())}return w(),{unsubscribe:v(w)}},[Tz](){return this}}}return p({type:ew.INIT}),{dispatch:p,subscribe:f,getState:d,replaceReducer:x,[Tz]:y}}function t_e(e){Object.keys(e).forEach(t=>{const a=e[t];if(typeof a(void 0,{type:ew.INIT})>"u")throw new Error(_s(12));if(typeof a(void 0,{type:ew.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(_s(13))})}function FY(e){const t=Object.keys(e),a={};for(let i=0;i<t.length;i++){const o=t[i];typeof e[o]=="function"&&(a[o]=e[o])}const s=Object.keys(a);let r;try{t_e(a)}catch(i){r=i}return function(o={},l){if(r)throw r;let c=!1;const u={};for(let d=0;d<s.length;d++){const f=s[d],p=a[f],x=o[f],y=p(x,l);if(typeof y>"u")throw l&&l.type,new Error(_s(14));u[f]=y,c=c||y!==x}return c=c||s.length!==Object.keys(o).length,c?u:o}}function tw(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,a)=>(...s)=>t(a(...s)))}function n_e(...e){return t=>(a,s)=>{const r=t(a,s);let i=()=>{throw new Error(_s(15))};const o={getState:r.getState,dispatch:(c,...u)=>i(c,...u)},l=e.map(c=>c(o));return i=tw(...l)(r.dispatch),{...r,dispatch:i}}}function UY(e){return SP(e)&&"type"in e&&typeof e.type=="string"}var BY=Symbol.for("immer-nothing"),kz=Symbol.for("immer-draftable"),Qs=Symbol.for("immer-state");function Ui(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var $r=Object,Ff=$r.getPrototypeOf,nw="constructor",Sj="prototype",eE="configurable",aw="enumerable",iv="writable",Op="value",Vl=e=>!!e&&!!e[Qs];function Xi(e){return e?HY(e)||_j(e)||!!e[kz]||!!e[nw]?.[kz]||Aj(e)||Tj(e):!1}var a_e=$r[Sj][nw].toString(),Ez=new WeakMap;function HY(e){if(!e||!_P(e))return!1;const t=Ff(e);if(t===null||t===$r[Sj])return!0;const a=$r.hasOwnProperty.call(t,nw)&&t[nw];if(a===Object)return!0;if(!cf(a))return!1;let s=Ez.get(a);return s===void 0&&(s=Function.toString.call(a),Ez.set(a,s)),s===a_e}function Jx(e,t,a=!0){e0(e)===0?(a?Reflect.ownKeys(e):$r.keys(e)).forEach(r=>{t(r,e[r],e)}):e.forEach((s,r)=>t(r,s,e))}function e0(e){const t=e[Qs];return t?t.type_:_j(e)?1:Aj(e)?2:Tj(e)?3:0}var Lz=(e,t,a=e0(e))=>a===2?e.has(t):$r[Sj].hasOwnProperty.call(e,t),tE=(e,t,a=e0(e))=>a===2?e.get(t):e[t],sw=(e,t,a,s=e0(e))=>{s===2?e.set(t,a):s===3?e.add(a):e[t]=a};function s_e(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var _j=Array.isArray,Aj=e=>e instanceof Map,Tj=e=>e instanceof Set,_P=e=>typeof e=="object",cf=e=>typeof e=="function",C_=e=>typeof e=="boolean";function r_e(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var Cl=e=>e.copy_||e.base_,AP=e=>e.modified_?e.copy_:e.base_;function nE(e,t){if(Aj(e))return new Map(e);if(Tj(e))return new Set(e);if(_j(e))return Array[Sj].slice.call(e);const a=HY(e);if(t===!0||t==="class_only"&&!a){const s=$r.getOwnPropertyDescriptors(e);delete s[Qs];let r=Reflect.ownKeys(s);for(let i=0;i<r.length;i++){const o=r[i],l=s[o];l[iv]===!1&&(l[iv]=!0,l[eE]=!0),(l.get||l.set)&&(s[o]={[eE]:!0,[iv]:!0,[aw]:l[aw],[Op]:e[o]})}return $r.create(Ff(e),s)}else{const s=Ff(e);if(s!==null&&a)return{...e};const r=$r.create(s);return $r.assign(r,e)}}function TP(e,t=!1){return kj(e)||Vl(e)||!Xi(e)||(e0(e)>1&&$r.defineProperties(e,{set:nb,add:nb,clear:nb,delete:nb}),$r.freeze(e),t&&Jx(e,(a,s)=>{TP(s,!0)},!1)),e}function i_e(){Ui(2)}var nb={[Op]:i_e};function kj(e){return e===null||!_P(e)?!0:$r.isFrozen(e)}var rw="MapSet",aE="Patches",Pz="ArrayMethods",qY={};function zu(e){const t=qY[e];return t||Ui(0,e),t}var Dz=e=>!!qY[e],Mp,WY=()=>Mp,o_e=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:Dz(rw)?zu(rw):void 0,arrayMethodsPlugin_:Dz(Pz)?zu(Pz):void 0});function Oz(e,t){t&&(e.patchPlugin_=zu(aE),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function sE(e){rE(e),e.drafts_.forEach(l_e),e.drafts_=null}function rE(e){e===Mp&&(Mp=e.parent_)}var Mz=e=>Mp=o_e(Mp,e);function l_e(e){const t=e[Qs];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Iz(e,t){t.unfinalizedDrafts_=t.drafts_.length;const a=t.drafts_[0];if(e!==void 0&&e!==a){a[Qs].modified_&&(sE(t),Ui(4)),Xi(e)&&(e=$z(t,e));const{patchPlugin_:r}=t;r&&r.generateReplacementPatches_(a[Qs].base_,e,t)}else e=$z(t,a);return c_e(t,e,!0),sE(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==BY?e:void 0}function $z(e,t){if(kj(t))return t;const a=t[Qs];if(!a)return kP(t,e.handledSet_,e);if(!Ej(a,e))return t;if(!a.modified_)return a.base_;if(!a.finalized_){const{callbacks_:s}=a;if(s)for(;s.length>0;)s.pop()(e);YY(a,e)}return a.copy_}function c_e(e,t,a=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&TP(t,a)}function GY(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var Ej=(e,t)=>e.scope_===t,d_e=[];function VY(e,t,a,s){const r=Cl(e),i=e.type_;if(s!==void 0&&tE(r,s,i)===t){sw(r,s,a,i);return}if(!e.draftLocations_){const l=e.draftLocations_=new Map;Jx(r,(c,u)=>{if(Vl(u)){const d=l.get(u)||[];d.push(c),l.set(u,d)}})}const o=e.draftLocations_.get(t)??d_e;for(const l of o)sw(r,l,a,i)}function u_e(e,t,a){e.callbacks_.push(function(r){const i=t;if(!i||!Ej(i,r))return;r.mapSetPlugin_?.fixSetContents(i);const o=AP(i);VY(e,i.draft_??i,o,a),YY(i,r)})}function YY(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){const{patchPlugin_:s}=t;if(s){const r=s.getPath(e);r&&s.generatePatches_(e,r,t)}GY(e)}}function m_e(e,t,a){const{scope_:s}=e;if(Vl(a)){const r=a[Qs];Ej(r,s)&&r.callbacks_.push(function(){ov(e);const o=AP(r);VY(e,a,o,t)})}else Xi(a)&&e.callbacks_.push(function(){const i=Cl(e);tE(i,t,e.type_)===a&&s.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&kP(tE(e.copy_,t,e.type_),s.handledSet_,s)})}function kP(e,t,a){return!a.immer_.autoFreeze_&&a.unfinalizedDrafts_<1||Vl(e)||t.has(e)||!Xi(e)||kj(e)||(t.add(e),Jx(e,(s,r)=>{if(Vl(r)){const i=r[Qs];if(Ej(i,a)){const o=AP(i);sw(e,s,o,e.type_),GY(i)}}else Xi(r)&&kP(r,t,a)})),e}function f_e(e,t){const a=_j(e),s={type_:a?1:0,scope_:t?t.scope_:WY(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let r=s,i=EP;a&&(r=[s],i=Ip);const{revoke:o,proxy:l}=Proxy.revocable(r,i);return s.draft_=l,s.revoke_=o,[l,s]}var EP={get(e,t){if(t===Qs)return e;let a=e.scope_.arrayMethodsPlugin_;const s=e.type_===1&&typeof t=="string";if(s&&a?.isArrayOperationMethod(t))return a.createMethodInterceptor(e,t);const r=Cl(e);if(!Lz(r,t,e.type_))return h_e(e,r,t);const i=r[t];if(e.finalized_||!Xi(i)||s&&e.operationMethod&&a?.isMutatingArrayMethod(e.operationMethod)&&r_e(t))return i;if(i===S_(e.base_,t)){ov(e);const o=e.type_===1?+t:t,l=oE(e.scope_,i,e,o);return e.copy_[o]=l}return i},has(e,t){return t in Cl(e)},ownKeys(e){return Reflect.ownKeys(Cl(e))},set(e,t,a){const s=QY(Cl(e),t);if(s?.set)return s.set.call(e.draft_,a),!0;if(!e.modified_){const r=S_(Cl(e),t),i=r?.[Qs];if(i&&i.base_===a)return e.copy_[t]=a,e.assigned_.set(t,!1),!0;if(s_e(a,r)&&(a!==void 0||Lz(e.base_,t,e.type_)))return!0;ov(e),iE(e)}return e.copy_[t]===a&&(a!==void 0||t in e.copy_)||Number.isNaN(a)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=a,e.assigned_.set(t,!0),m_e(e,t,a)),!0},deleteProperty(e,t){return ov(e),S_(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),iE(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const a=Cl(e),s=Reflect.getOwnPropertyDescriptor(a,t);return s&&{[iv]:!0,[eE]:e.type_!==1||t!=="length",[aw]:s[aw],[Op]:a[t]}},defineProperty(){Ui(11)},getPrototypeOf(e){return Ff(e.base_)},setPrototypeOf(){Ui(12)}},Ip={};Jx(EP,(e,t)=>{Ip[e]=function(){const a=arguments;return a[0]=a[0][0],t.apply(this,a)}});Ip.deleteProperty=function(e,t){return Ip.set.call(this,e,t,void 0)};Ip.set=function(e,t,a){return EP.set.call(this,e[0],t,a,e[0])};function S_(e,t){const a=e[Qs];return(a?Cl(a):e)[t]}function h_e(e,t,a){const s=QY(t,a);return s?Op in s?s[Op]:s.get?.call(e.draft_):void 0}function QY(e,t){if(!(t in e))return;let a=Ff(e);for(;a;){const s=Object.getOwnPropertyDescriptor(a,t);if(s)return s;a=Ff(a)}}function iE(e){e.modified_||(e.modified_=!0,e.parent_&&iE(e.parent_))}function ov(e){e.copy_||(e.assigned_=new Map,e.copy_=nE(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var g_e=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(a,s,r)=>{if(cf(a)&&!cf(s)){const o=s;s=a;const l=this;return function(u=o,...d){return l.produce(u,f=>s.call(this,f,...d))}}cf(s)||Ui(6),r!==void 0&&!cf(r)&&Ui(7);let i;if(Xi(a)){const o=Mz(this),l=oE(o,a,void 0);let c=!0;try{i=s(l),c=!1}finally{c?sE(o):rE(o)}return Oz(o,r),Iz(i,o)}else if(!a||!_P(a)){if(i=s(a),i===void 0&&(i=a),i===BY&&(i=void 0),this.autoFreeze_&&TP(i,!0),r){const o=[],l=[];zu(aE).generateReplacementPatches_(a,i,{patches_:o,inversePatches_:l}),r(o,l)}return i}else Ui(1,a)},this.produceWithPatches=(a,s)=>{if(cf(a))return(l,...c)=>this.produceWithPatches(l,u=>a(u,...c));let r,i;return[this.produce(a,s,(l,c)=>{r=l,i=c}),r,i]},C_(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),C_(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),C_(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Xi(t)||Ui(8),Vl(t)&&(t=Wi(t));const a=Mz(this),s=oE(a,t,void 0);return s[Qs].isManual_=!0,rE(a),s}finishDraft(t,a){const s=t&&t[Qs];(!s||!s.isManual_)&&Ui(9);const{scope_:r}=s;return Oz(r,a),Iz(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,a){let s;for(s=a.length-1;s>=0;s--){const i=a[s];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}s>-1&&(a=a.slice(s+1));const r=zu(aE).applyPatches_;return Vl(t)?r(t,a):this.produce(t,i=>r(i,a))}};function oE(e,t,a,s){const[r,i]=Aj(t)?zu(rw).proxyMap_(t,a):Tj(t)?zu(rw).proxySet_(t,a):f_e(t,a);return(a?.scope_??WY()).drafts_.push(r),i.callbacks_=a?.callbacks_??[],i.key_=s,a&&s!==void 0?u_e(a,i,s):i.callbacks_.push(function(c){c.mapSetPlugin_?.fixSetContents(i);const{patchPlugin_:u}=c;i.modified_&&u&&u.generatePatches_(i,[],c)}),r}function Wi(e){return Vl(e)||Ui(10,e),KY(e)}function KY(e){if(!Xi(e)||kj(e))return e;const t=e[Qs];let a,s=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,a=nE(e,t.scope_.immer_.useStrictShallowCopy_),s=t.scope_.immer_.shouldUseStrictIteration()}else a=nE(e,!0);return Jx(a,(r,i)=>{sw(a,r,KY(i))},s),t&&(t.finalized_=!1),a}var p_e=new g_e,XY=p_e.produce;function ZY(e){return({dispatch:a,getState:s})=>r=>i=>typeof i=="function"?i(a,s,e):r(i)}var x_e=ZY(),y_e=ZY,b_e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?tw:tw.apply(null,arguments)};function vi(e,t){function a(...s){if(t){let r=t(...s);if(!r)throw new Error(Fr(0));return{type:e,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:e,payload:s[0]}}return a.toString=()=>`${e}`,a.type=e,a.match=s=>UY(s)&&s.type===e,a}var JY=class qg extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,qg.prototype)}static get[Symbol.species](){return qg}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new qg(...t[0].concat(this)):new qg(...t.concat(this))}};function Rz(e){return Xi(e)?XY(e,()=>{}):e}function ab(e,t,a){return e.has(t)?e.get(t):e.set(t,a(t)).get(t)}function v_e(e){return typeof e=="boolean"}var w_e=()=>function(t){const{thunk:a=!0,immutableCheck:s=!0,serializableCheck:r=!0,actionCreatorCheck:i=!0}=t??{};let o=new JY;return a&&(v_e(a)?o.push(x_e):o.push(y_e(a.extraArgument))),o},eQ="RTK_autoBatch",ca=()=>e=>({payload:e,meta:{[eQ]:!0}}),zz=e=>t=>{setTimeout(t,e)},tQ=(e={type:"raf"})=>t=>(...a)=>{const s=t(...a);let r=!0,i=!1,o=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:zz(10):e.type==="callback"?e.queueNotification:zz(e.timeout),u=()=>{o=!1,i&&(i=!1,l.forEach(d=>d()))};return Object.assign({},s,{subscribe(d){const f=()=>r&&d(),p=s.subscribe(f);return l.add(d),()=>{p(),l.delete(d)}},dispatch(d){try{return r=!d?.meta?.[eQ],i=!r,i&&(o||(o=!0,c(u))),s.dispatch(d)}finally{r=!0}}})},N_e=e=>function(a){const{autoBatch:s=!0}=a??{};let r=new JY(e);return s&&r.push(tQ(typeof s=="object"?s:void 0)),r};function j_e(e){const t=w_e(),{reducer:a=void 0,middleware:s,devTools:r=!0,preloadedState:i=void 0,enhancers:o=void 0}=e||{};let l;if(typeof a=="function")l=a;else if(SP(a))l=FY(a);else throw new Error(Fr(1));let c;typeof s=="function"?c=s(t):c=t();let u=tw;r&&(u=b_e({trace:!1,...typeof r=="object"&&r}));const d=n_e(...c),f=N_e(d);let p=typeof o=="function"?o(f):f();const x=u(...p);return zY(l,i,x)}function nQ(e){const t={},a=[];let s;const r={addCase(i,o){const l=typeof i=="string"?i:i.type;if(!l)throw new Error(Fr(28));if(l in t)throw new Error(Fr(29));return t[l]=o,r},addAsyncThunk(i,o){return o.pending&&(t[i.pending.type]=o.pending),o.rejected&&(t[i.rejected.type]=o.rejected),o.fulfilled&&(t[i.fulfilled.type]=o.fulfilled),o.settled&&a.push({matcher:i.settled,reducer:o.settled}),r},addMatcher(i,o){return a.push({matcher:i,reducer:o}),r},addDefaultCase(i){return s=i,r}};return e(r),[t,a,s]}function C_e(e){return typeof e=="function"}function S_e(e,t){let[a,s,r]=nQ(t),i;if(C_e(e))i=()=>Rz(e());else{const l=Rz(e);i=()=>l}function o(l=i(),c){let u=[a[c.type],...s.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[r]),u.reduce((d,f)=>{if(f)if(Vl(d)){const x=f(d,c);return x===void 0?d:x}else{if(Xi(d))return XY(d,p=>f(p,c));{const p=f(d,c);if(p===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return p}}return d},l)}return o.getInitialState=i,o}var __e="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",A_e=(e=21)=>{let t="",a=e;for(;a--;)t+=__e[Math.random()*64|0];return t},T_e=Symbol.for("rtk-slice-createasyncthunk");function k_e(e,t){return`${e}/${t}`}function E_e({creators:e}={}){const t=e?.asyncThunk?.[T_e];return function(s){const{name:r,reducerPath:i=r}=s;if(!r)throw new Error(Fr(11));const o=(typeof s.reducers=="function"?s.reducers(P_e()):s.reducers)||{},l=Object.keys(o),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(S,_){const E=typeof S=="string"?S:S.type;if(!E)throw new Error(Fr(12));if(E in c.sliceCaseReducersByType)throw new Error(Fr(13));return c.sliceCaseReducersByType[E]=_,u},addMatcher(S,_){return c.sliceMatchers.push({matcher:S,reducer:_}),u},exposeAction(S,_){return c.actionCreators[S]=_,u},exposeCaseReducer(S,_){return c.sliceCaseReducersByName[S]=_,u}};l.forEach(S=>{const _=o[S],E={reducerName:S,type:k_e(r,S),createNotation:typeof s.reducers=="function"};O_e(_)?I_e(E,_,u,t):D_e(E,_,u)});function d(){const[S={},_=[],E=void 0]=typeof s.extraReducers=="function"?nQ(s.extraReducers):[s.extraReducers],T={...S,...c.sliceCaseReducersByType};return S_e(s.initialState,A=>{for(let L in T)A.addCase(L,T[L]);for(let L of c.sliceMatchers)A.addMatcher(L.matcher,L.reducer);for(let L of _)A.addMatcher(L.matcher,L.reducer);E&&A.addDefaultCase(E)})}const f=S=>S,p=new Map,x=new WeakMap;let y;function N(S,_){return y||(y=d()),y(S,_)}function v(){return y||(y=d()),y.getInitialState()}function j(S,_=!1){function E(A){let L=A[S];return typeof L>"u"&&_&&(L=ab(x,E,v)),L}function T(A=f){const L=ab(p,_,()=>new WeakMap);return ab(L,A,()=>{const M={};for(const[F,$]of Object.entries(s.selectors??{}))M[F]=L_e($,A,()=>ab(x,A,v),_);return M})}return{reducerPath:S,getSelectors:T,get selectors(){return T(E)},selectSlice:E}}const w={name:r,reducer:N,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:v,...j(i),injectInto(S,{reducerPath:_,...E}={}){const T=_??i;return S.inject({reducerPath:T,reducer:N},E),{...w,...j(T,!0)}}};return w}}function L_e(e,t,a,s){function r(i,...o){let l=t(i);return typeof l>"u"&&s&&(l=a()),e(l,...o)}return r.unwrapped=e,r}var jr=E_e();function P_e(){function e(t,a){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...a}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...a){return t(...a)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,a){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:a}},asyncThunk:e}}function D_e({type:e,reducerName:t,createNotation:a},s,r){let i,o;if("reducer"in s){if(a&&!M_e(s))throw new Error(Fr(17));i=s.reducer,o=s.prepare}else i=s;r.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?vi(e,o):vi(e))}function O_e(e){return e._reducerDefinitionType==="asyncThunk"}function M_e(e){return e._reducerDefinitionType==="reducerWithPrepare"}function I_e({type:e,reducerName:t},a,s,r){if(!r)throw new Error(Fr(18));const{payloadCreator:i,fulfilled:o,pending:l,rejected:c,settled:u,options:d}=a,f=r(e,i,d);s.exposeAction(t,f),o&&s.addCase(f.fulfilled,o),l&&s.addCase(f.pending,l),c&&s.addCase(f.rejected,c),u&&s.addMatcher(f.settled,u),s.exposeCaseReducer(t,{fulfilled:o||sb,pending:l||sb,rejected:c||sb,settled:u||sb})}function sb(){}var $_e="task",aQ="listener",sQ="completed",LP="cancelled",R_e=`task-${LP}`,z_e=`task-${sQ}`,lE=`${aQ}-${LP}`,F_e=`${aQ}-${sQ}`,Lj=class{constructor(e){this.code=e,this.message=`${$_e} ${LP} (reason: ${e})`}name="TaskAbortError";message},PP=(e,t)=>{if(typeof e!="function")throw new TypeError(Fr(32))},iw=()=>{},rQ=(e,t=iw)=>(e.catch(t),e),iQ=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),ju=e=>{if(e.aborted)throw new Lj(e.reason)};function oQ(e,t){let a=iw;return new Promise((s,r)=>{const i=()=>r(new Lj(e.reason));if(e.aborted){i();return}a=iQ(e,i),t.finally(()=>a()).then(s,r)}).finally(()=>{a=iw})}var U_e=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(a){return{status:a instanceof Lj?"cancelled":"rejected",error:a}}finally{t?.()}},ow=e=>t=>rQ(oQ(e,t).then(a=>(ju(e),a))),lQ=e=>{const t=ow(e);return a=>t(new Promise(s=>setTimeout(s,a)))},{assign:Nf}=Object,Fz={},Pj="listenerMiddleware",B_e=(e,t)=>{const a=s=>iQ(e,()=>s.abort(e.reason));return(s,r)=>{PP(s);const i=new AbortController;a(i);const o=U_e(async()=>{ju(e),ju(i.signal);const l=await s({pause:ow(i.signal),delay:lQ(i.signal),signal:i.signal});return ju(i.signal),l},()=>i.abort(z_e));return r?.autoJoin&&t.push(o.catch(iw)),{result:ow(e)(o),cancel(){i.abort(R_e)}}}},H_e=(e,t)=>{const a=async(s,r)=>{ju(t);let i=()=>{};const l=[new Promise((c,u)=>{let d=e({predicate:s,effect:(f,p)=>{p.unsubscribe(),c([f,p.getState(),p.getOriginalState()])}});i=()=>{d(),u()}})];r!=null&&l.push(new Promise(c=>setTimeout(c,r,null)));try{const c=await oQ(t,Promise.race(l));return ju(t),c}finally{i()}};return(s,r)=>rQ(a(s,r))},cQ=e=>{let{type:t,actionCreator:a,matcher:s,predicate:r,effect:i}=e;if(t)r=vi(t).match;else if(a)t=a.type,r=a.match;else if(s)r=s;else if(!r)throw new Error(Fr(21));return PP(i),{predicate:r,type:t,effect:i}},dQ=Nf(e=>{const{type:t,predicate:a,effect:s}=cQ(e);return{id:A_e(),effect:s,type:t,predicate:a,pending:new Set,unsubscribe:()=>{throw new Error(Fr(22))}}},{withTypes:()=>dQ}),Uz=(e,t)=>{const{type:a,effect:s,predicate:r}=cQ(t);return Array.from(e.values()).find(i=>(typeof a=="string"?i.type===a:i.predicate===r)&&i.effect===s)},cE=e=>{e.pending.forEach(t=>{t.abort(lE)})},q_e=(e,t)=>()=>{for(const a of t.keys())cE(a);e.clear()},Bz=(e,t,a)=>{try{e(t,a)}catch(s){setTimeout(()=>{throw s},0)}},uQ=Nf(vi(`${Pj}/add`),{withTypes:()=>uQ}),W_e=vi(`${Pj}/removeAll`),mQ=Nf(vi(`${Pj}/remove`),{withTypes:()=>mQ}),G_e=(...e)=>{console.error(`${Pj}/error`,...e)},t0=(e={})=>{const t=new Map,a=new Map,s=x=>{const y=a.get(x)??0;a.set(x,y+1)},r=x=>{const y=a.get(x)??1;y===1?a.delete(x):a.set(x,y-1)},{extra:i,onError:o=G_e}=e;PP(o);const l=x=>(x.unsubscribe=()=>t.delete(x.id),t.set(x.id,x),y=>{x.unsubscribe(),y?.cancelActive&&cE(x)}),c=x=>{const y=Uz(t,x)??dQ(x);return l(y)};Nf(c,{withTypes:()=>c});const u=x=>{const y=Uz(t,x);return y&&(y.unsubscribe(),x.cancelActive&&cE(y)),!!y};Nf(u,{withTypes:()=>u});const d=async(x,y,N,v)=>{const j=new AbortController,w=H_e(c,j.signal),S=[];try{x.pending.add(j),s(x),await Promise.resolve(x.effect(y,Nf({},N,{getOriginalState:v,condition:(_,E)=>w(_,E).then(Boolean),take:w,delay:lQ(j.signal),pause:ow(j.signal),extra:i,signal:j.signal,fork:B_e(j.signal,S),unsubscribe:x.unsubscribe,subscribe:()=>{t.set(x.id,x)},cancelActiveListeners:()=>{x.pending.forEach((_,E,T)=>{_!==j&&(_.abort(lE),T.delete(_))})},cancel:()=>{j.abort(lE),x.pending.delete(j)},throwIfCancelled:()=>{ju(j.signal)}})))}catch(_){_ instanceof Lj||Bz(o,_,{raisedBy:"effect"})}finally{await Promise.all(S),j.abort(F_e),r(x),x.pending.delete(j)}},f=q_e(t,a);return{middleware:x=>y=>N=>{if(!UY(N))return y(N);if(uQ.match(N))return c(N.payload);if(W_e.match(N)){f();return}if(mQ.match(N))return u(N.payload);let v=x.getState();const j=()=>{if(v===Fz)throw new Error(Fr(23));return v};let w;try{if(w=y(N),t.size>0){const S=x.getState(),_=Array.from(t.values());for(const E of _){let T=!1;try{T=E.predicate(N,S,v)}catch(A){T=!1,Bz(o,A,{raisedBy:"predicate"})}T&&d(E,N,x,j)}}}finally{v=Fz}return w},startListening:c,stopListening:u,clearListeners:f}};function Fr(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var V_e={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},fQ=jr({name:"chartLayout",initialState:V_e,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var a,s,r,i;e.margin.top=(a=t.payload.top)!==null&&a!==void 0?a:0,e.margin.right=(s=t.payload.right)!==null&&s!==void 0?s:0,e.margin.bottom=(r=t.payload.bottom)!==null&&r!==void 0?r:0,e.margin.left=(i=t.payload.left)!==null&&i!==void 0?i:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:Y_e,setLayout:Q_e,setChartSize:K_e,setScale:X_e}=fQ.actions,Z_e=fQ.reducer;function hQ(e,t,a){return Array.isArray(e)&&e&&t+a!==0?e.slice(t,a+1):e}function xa(e){return Number.isFinite(e)}function Uo(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function Hz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function uf(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Hz(Object(a),!0).forEach(function(s){J_e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Hz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function J_e(e,t,a){return(t=eAe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function eAe(e){var t=tAe(e,"string");return typeof t=="symbol"?t:t+""}function tAe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hn(e,t,a){return fa(e)||fa(t)?a:Fo(t)?Ru(e,t,a):typeof t=="function"?t(e):a}var nAe=(e,t,a)=>{if(t&&a){var{width:s,height:r}=a,{align:i,verticalAlign:o,layout:l}=t;if((l==="vertical"||l==="horizontal"&&o==="middle")&&i!=="center"&&zt(e[i]))return uf(uf({},e),{},{[i]:e[i]+(s||0)});if((l==="horizontal"||l==="vertical"&&i==="center")&&o!=="middle"&&zt(e[o]))return uf(uf({},e),{},{[o]:e[o]+(r||0)})}return e},kd=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",gQ=(e,t,a,s)=>{if(s)return e.map(l=>l.coordinate);var r,i,o=e.map(l=>(l.coordinate===t&&(r=!0),l.coordinate===a&&(i=!0),l.coordinate));return r||o.push(t),i||o.push(a),o},pQ=(e,t,a)=>{if(!e)return null;var{duplicateDomain:s,type:r,range:i,scale:o,realScaleType:l,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:f,niceTicks:p,axisType:x}=e;if(!o)return null;var y=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,N=r==="category"&&o.bandwidth?o.bandwidth()/y:0;if(N=x==="angleAxis"&&i&&i.length>=2?xs(i[0]-i[1])*2*N:N,f||p){var v=(f||p||[]).map((j,w)=>{var S=s?s.indexOf(j):j;return{coordinate:o(S)+N,value:j,offset:N,index:w}});return v.filter(j=>!Ki(j.coordinate))}return c&&u?u.map((j,w)=>({coordinate:o(j)+N,value:j,index:w,offset:N})):o.ticks&&d!=null?o.ticks(d).map((j,w)=>({coordinate:o(j)+N,value:j,offset:N,index:w})):o.domain().map((j,w)=>({coordinate:o(j)+N,value:s?s[j]:j,index:w,offset:N}))},qz=1e-4,aAe=e=>{var t=e.domain();if(!(!t||t.length<=2)){var a=t.length,s=e.range(),r=Math.min(s[0],s[1])-qz,i=Math.max(s[0],s[1])+qz,o=e(t[0]),l=e(t[a-1]);(o<r||o>i||l<r||l>i)&&e.domain([t[0],t[a-1]])}},sAe=(e,t)=>{if(!t||t.length!==2||!zt(t[0])||!zt(t[1]))return e;var a=Math.min(t[0],t[1]),s=Math.max(t[0],t[1]),r=[e[0],e[1]];return(!zt(e[0])||e[0]<a)&&(r[0]=a),(!zt(e[1])||e[1]>s)&&(r[1]=s),r[0]>s&&(r[0]=s),r[1]<a&&(r[1]=a),r},rAe=e=>{var t,a=e.length;if(!(a<=0)){var s=(t=e[0])===null||t===void 0?void 0:t.length;if(!(s==null||s<=0))for(var r=0;r<s;++r)for(var i=0,o=0,l=0;l<a;++l){var c=e[l],u=c?.[r];if(u!=null){var d=u[1],f=u[0],p=Ki(d)?f:d;p>=0?(u[0]=i,u[1]=i+p,i=d):(u[0]=o,u[1]=o+p,o=d)}}}},iAe=e=>{var t,a=e.length;if(!(a<=0)){var s=(t=e[0])===null||t===void 0?void 0:t.length;if(!(s==null||s<=0))for(var r=0;r<s;++r)for(var i=0,o=0;o<a;++o){var l=e[o],c=l?.[r];if(c!=null){var u=Ki(c[1])?c[0]:c[1];u>=0?(c[0]=i,c[1]=i+u,i=c[1]):(c[0]=0,c[1]=0)}}}},oAe={sign:rAe,expand:pG,none:ud,silhouette:xG,wiggle:yG,positive:iAe},lAe=(e,t,a)=>{var s,r=(s=oAe[a])!==null&&s!==void 0?s:ud,i=M4().keys(t).value((l,c)=>Number(Hn(l,c,0))).order(Ou).offset(r),o=i(e);return o.forEach((l,c)=>{l.forEach((u,d)=>{var f=Hn(e[d],t[c],0);Array.isArray(f)&&f.length===2&&zt(f[0])&&zt(f[1])&&(u[0]=f[0],u[1]=f[1])})}),o};function cAe(e){return e==null?void 0:String(e)}function Wz(e){var{axis:t,ticks:a,bandSize:s,entry:r,index:i,dataKey:o}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!fa(r[t.dataKey])){var l=NY(a,"value",r[t.dataKey]);if(l)return l.coordinate+s/2}return a[i]?a[i].coordinate+s/2:null}var c=Hn(r,fa(o)?t.dataKey:o);return fa(c)?null:t.scale(c)}var Gz=e=>{var{axis:t,ticks:a,offset:s,bandSize:r,entry:i,index:o}=e;if(t.type==="category")return a[o]?a[o].coordinate+s:null;var l=Hn(i,t.dataKey,t.scale.domain()[o]);return fa(l)?null:t.scale(l)-r/2+s},dAe=e=>{var{numericAxis:t}=e,a=t.scale.domain();if(t.type==="number"){var s=Math.min(a[0],a[1]),r=Math.max(a[0],a[1]);return s<=0&&r>=0?0:r<0?r:s}return a[0]},uAe=e=>{var t=e.flat(2).filter(zt);return[Math.min(...t),Math.max(...t)]},mAe=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],fAe=(e,t,a)=>{if(e!=null)return mAe(Object.keys(e).reduce((s,r)=>{var i=e[r];if(!i)return s;var{stackedData:o}=i,l=o.reduce((c,u)=>{var d=hQ(u,t,a),f=uAe(d);return!xa(f[0])||!xa(f[1])?c:[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],s[0]),Math.max(l[1],s[1])]},[1/0,-1/0]))},Vz=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Yz=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Uf=(e,t,a)=>{if(e&&e.scale&&e.scale.bandwidth){var s=e.scale.bandwidth();if(!a||s>0)return s}if(e&&t&&t.length>=2){for(var r=Cj(t,d=>d.coordinate),i=1/0,o=1,l=r.length;o<l;o++){var c=r[o],u=r[o-1];i=Math.min((c?.coordinate||0)-(u?.coordinate||0),i)}return i===1/0?0:i}return a?void 0:0};function Qz(e){var{tooltipEntrySettings:t,dataKey:a,payload:s,value:r,name:i}=e;return uf(uf({},t),{},{dataKey:a,payload:s,value:r,name:i})}function ch(e,t){if(e)return String(e);if(typeof t=="string")return t}var hAe=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},gAe=(e,t)=>t==="centric"?e.angle:e.radius,ac=e=>e.layout.width,sc=e=>e.layout.height,pAe=e=>e.layout.scale,xQ=e=>e.layout.margin,Dj=it(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Oj=it(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),yQ="data-recharts-item-index",bQ="data-recharts-item-id",n0=60;function Kz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function rb(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Kz(Object(a),!0).forEach(function(s){xAe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Kz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function xAe(e,t,a){return(t=yAe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function yAe(e){var t=bAe(e,"string");return typeof t=="symbol"?t:t+""}function bAe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vAe=e=>e.brush.height;function wAe(e){var t=Oj(e);return t.reduce((a,s)=>{if(s.orientation==="left"&&!s.mirror&&!s.hide){var r=typeof s.width=="number"?s.width:n0;return a+r}return a},0)}function NAe(e){var t=Oj(e);return t.reduce((a,s)=>{if(s.orientation==="right"&&!s.mirror&&!s.hide){var r=typeof s.width=="number"?s.width:n0;return a+r}return a},0)}function jAe(e){var t=Dj(e);return t.reduce((a,s)=>s.orientation==="top"&&!s.mirror&&!s.hide?a+s.height:a,0)}function CAe(e){var t=Dj(e);return t.reduce((a,s)=>s.orientation==="bottom"&&!s.mirror&&!s.hide?a+s.height:a,0)}var ls=it([ac,sc,xQ,vAe,wAe,NAe,jAe,CAe,$Y,Q2e],(e,t,a,s,r,i,o,l,c,u)=>{var d={left:(a.left||0)+r,right:(a.right||0)+i},f={top:(a.top||0)+o,bottom:(a.bottom||0)+l},p=rb(rb({},f),d),x=p.bottom;p.bottom+=s,p=nAe(p,c,u);var y=e-p.left-p.right,N=t-p.top-p.bottom;return rb(rb({brushBottom:x},p),{},{width:Math.max(y,0),height:Math.max(N,0)})}),SAe=it(ls,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),DP=it(ac,sc,(e,t)=>({x:0,y:0,width:e,height:t})),_Ae=h.createContext(null),Bs=()=>h.useContext(_Ae)!=null,Mj=e=>e.brush,Ij=it([Mj,ls,xQ],(e,t,a)=>({height:e.height,x:zt(e.x)?e.x:t.left,y:zt(e.y)?e.y:t.top+t.height+t.brushBottom-(a?.bottom||0),width:zt(e.width)?e.width:t.width})),__={},A_={},T_={},Xz;function AAe(){return Xz||(Xz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a,s,{signal:r,edges:i}={}){let o,l=null;const c=i!=null&&i.includes("leading"),u=i==null||i.includes("trailing"),d=()=>{l!==null&&(a.apply(o,l),o=void 0,l=null)},f=()=>{u&&d(),N()};let p=null;const x=()=>{p!=null&&clearTimeout(p),p=setTimeout(()=>{p=null,f()},s)},y=()=>{p!==null&&(clearTimeout(p),p=null)},N=()=>{y(),o=void 0,l=null},v=()=>{d()},j=function(...w){if(r?.aborted)return;o=this,l=w;const S=p==null;x(),c&&S&&d()};return j.schedule=x,j.cancel=N,j.flush=v,r?.addEventListener("abort",N,{once:!0}),j}e.debounce=t})(T_)),T_}var Zz;function TAe(){return Zz||(Zz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=AAe();function a(s,r=0,i={}){typeof i!="object"&&(i={});const{leading:o=!1,trailing:l=!0,maxWait:c}=i,u=Array(2);o&&(u[0]="leading"),l&&(u[1]="trailing");let d,f=null;const p=t.debounce(function(...N){d=s.apply(this,N),f=null},r,{edges:u}),x=function(...N){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(d=s.apply(this,N),f=Date.now(),p.cancel(),p.schedule(),d):(p.apply(this,N),d)},y=()=>(p.flush(),d);return x.cancel=p.cancel,x.flush=y,x}e.debounce=a})(A_)),A_}var Jz;function kAe(){return Jz||(Jz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=TAe();function a(s,r=0,i={}){const{leading:o=!0,trailing:l=!0}=i;return t.debounce(s,r,{leading:o,maxWait:r,trailing:l})}e.throttle=a})(__)),__}var k_,eF;function EAe(){return eF||(eF=1,k_=kAe().throttle),k_}var LAe=EAe();const PAe=Zi(LAe);var lw=function(t,a){for(var s=arguments.length,r=new Array(s>2?s-2:0),i=2;i<s;i++)r[i-2]=arguments[i];if(typeof console<"u"&&console.warn&&(a===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(a===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;console.warn(a.replace(/%s/g,()=>r[o++]))}},vQ=(e,t,a)=>{var{width:s="100%",height:r="100%",aspect:i,maxHeight:o}=a,l=Gl(s)?e:Number(s),c=Gl(r)?t:Number(r);return i&&i>0&&(l?c=l/i:c&&(l=c*i),o&&c!=null&&c>o&&(c=o)),{calculatedWidth:l,calculatedHeight:c}},DAe={width:0,height:0,overflow:"visible"},OAe={width:0,overflowX:"visible"},MAe={height:0,overflowY:"visible"},IAe={},$Ae=e=>{var{width:t,height:a}=e,s=Gl(t),r=Gl(a);return s&&r?DAe:s?OAe:r?MAe:IAe};function RAe(e){var{width:t,height:a,aspect:s}=e,r=t,i=a;return r===void 0&&i===void 0?(r="100%",i="100%"):r===void 0?r=s&&s>0?void 0:"100%":i===void 0&&(i=s&&s>0?void 0:"100%"),{width:r,height:i}}function dE(){return dE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},dE.apply(null,arguments)}function tF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function nF(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?tF(Object(a),!0).forEach(function(s){zAe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):tF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function zAe(e,t,a){return(t=FAe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function FAe(e){var t=UAe(e,"string");return typeof t=="symbol"?t:t+""}function UAe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wQ=h.createContext({width:-1,height:-1});function BAe(e){return Uo(e.width)&&Uo(e.height)}function NQ(e){var{children:t,width:a,height:s}=e,r=h.useMemo(()=>({width:a,height:s}),[a,s]);return BAe(r)?h.createElement(wQ.Provider,{value:r},t):null}var OP=()=>h.useContext(wQ),HAe=h.forwardRef((e,t)=>{var{aspect:a,initialDimension:s={width:-1,height:-1},width:r,height:i,minWidth:o=0,minHeight:l,maxHeight:c,children:u,debounce:d=0,id:f,className:p,onResize:x,style:y={}}=e,N=h.useRef(null),v=h.useRef();v.current=x,h.useImperativeHandle(t,()=>N.current);var[j,w]=h.useState({containerWidth:s.width,containerHeight:s.height}),S=h.useCallback((L,M)=>{w(F=>{var $=Math.round(L),D=Math.round(M);return F.containerWidth===$&&F.containerHeight===D?F:{containerWidth:$,containerHeight:D}})},[]);h.useEffect(()=>{if(N.current==null||typeof ResizeObserver>"u")return Xx;var L=D=>{var q,{width:G,height:U}=D[0].contentRect;S(G,U),(q=v.current)===null||q===void 0||q.call(v,G,U)};d>0&&(L=PAe(L,d,{trailing:!0,leading:!1}));var M=new ResizeObserver(L),{width:F,height:$}=N.current.getBoundingClientRect();return S(F,$),M.observe(N.current),()=>{M.disconnect()}},[S,d]);var{containerWidth:_,containerHeight:E}=j;lw(!a||a>0,"The aspect(%s) must be greater than zero.",a);var{calculatedWidth:T,calculatedHeight:A}=vQ(_,E,{width:r,height:i,aspect:a,maxHeight:c});return lw(T!=null&&T>0||A!=null&&A>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,T,A,r,i,o,l,a),h.createElement("div",{id:f?"".concat(f):void 0,className:Mt("recharts-responsive-container",p),style:nF(nF({},y),{},{width:r,height:i,minWidth:o,minHeight:l,maxHeight:c}),ref:N},h.createElement("div",{style:$Ae({width:r,height:i})},h.createElement(NQ,{width:T,height:A},u)))}),E_=h.forwardRef((e,t)=>{var a=OP();if(Uo(a.width)&&Uo(a.height))return e.children;var{width:s,height:r}=RAe({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:i,calculatedHeight:o}=vQ(void 0,void 0,{width:s,height:r,aspect:e.aspect,maxHeight:e.maxHeight});return zt(i)&&zt(o)?h.createElement(NQ,{width:i,height:o},e.children):h.createElement(HAe,dE({},e,{width:s,height:r,ref:t}))});function jQ(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var $j=()=>{var e,t=Bs(),a=Ut(SAe),s=Ut(Ij),r=(e=Ut(Mj))===null||e===void 0?void 0:e.padding;return!t||!s||!r?a:{width:s.width-r.left-r.right,height:s.height-r.top-r.bottom,x:r.left,y:r.top}},qAe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},CQ=()=>{var e;return(e=Ut(ls))!==null&&e!==void 0?e:qAe},MP=()=>Ut(ac),IP=()=>Ut(sc),WAe=()=>Ut(e=>e.layout.margin),wn=e=>e.layout.layoutType,dh=()=>Ut(wn),GAe=()=>{var e=dh();return e!==void 0},Rj=e=>{var t=Zn(),a=Bs(),{width:s,height:r}=e,i=OP(),o=s,l=r;return i&&(o=i.width>0?i.width:s,l=i.height>0?i.height:r),h.useEffect(()=>{!a&&Uo(o)&&Uo(l)&&t(K_e({width:o,height:l}))},[t,a,o,l]),null},SQ=Symbol.for("immer-nothing"),aF=Symbol.for("immer-draftable"),Hr=Symbol.for("immer-state");function Bi(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var $p=Object.getPrototypeOf;function Bf(e){return!!e&&!!e[Hr]}function Fu(e){return e?_Q(e)||Array.isArray(e)||!!e[aF]||!!e.constructor?.[aF]||a0(e)||Fj(e):!1}var VAe=Object.prototype.constructor.toString(),sF=new WeakMap;function _Q(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const a=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(a===Object)return!0;if(typeof a!="function")return!1;let s=sF.get(a);return s===void 0&&(s=Function.toString.call(a),sF.set(a,s)),s===VAe}function cw(e,t,a=!0){zj(e)===0?(a?Reflect.ownKeys(e):Object.keys(e)).forEach(r=>{t(r,e[r],e)}):e.forEach((s,r)=>t(r,s,e))}function zj(e){const t=e[Hr];return t?t.type_:Array.isArray(e)?1:a0(e)?2:Fj(e)?3:0}function uE(e,t){return zj(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function AQ(e,t,a){const s=zj(e);s===2?e.set(t,a):s===3?e.add(a):e[t]=a}function YAe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function a0(e){return e instanceof Map}function Fj(e){return e instanceof Set}function eu(e){return e.copy_||e.base_}function mE(e,t){if(a0(e))return new Map(e);if(Fj(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const a=_Q(e);if(t===!0||t==="class_only"&&!a){const s=Object.getOwnPropertyDescriptors(e);delete s[Hr];let r=Reflect.ownKeys(s);for(let i=0;i<r.length;i++){const o=r[i],l=s[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(s[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create($p(e),s)}else{const s=$p(e);if(s!==null&&a)return{...e};const r=Object.create(s);return Object.assign(r,e)}}function $P(e,t=!1){return Uj(e)||Bf(e)||!Fu(e)||(zj(e)>1&&Object.defineProperties(e,{set:ib,add:ib,clear:ib,delete:ib}),Object.freeze(e),t&&Object.values(e).forEach(a=>$P(a,!0))),e}function QAe(){Bi(2)}var ib={value:QAe};function Uj(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var KAe={};function Uu(e){const t=KAe[e];return t||Bi(0,e),t}var Rp;function TQ(){return Rp}function XAe(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function rF(e,t){t&&(Uu("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function fE(e){hE(e),e.drafts_.forEach(ZAe),e.drafts_=null}function hE(e){e===Rp&&(Rp=e.parent_)}function iF(e){return Rp=XAe(Rp,e)}function ZAe(e){const t=e[Hr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function oF(e,t){t.unfinalizedDrafts_=t.drafts_.length;const a=t.drafts_[0];return e!==void 0&&e!==a?(a[Hr].modified_&&(fE(t),Bi(4)),Fu(e)&&(e=dw(t,e),t.parent_||uw(t,e)),t.patches_&&Uu("Patches").generateReplacementPatches_(a[Hr].base_,e,t.patches_,t.inversePatches_)):e=dw(t,a,[]),fE(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==SQ?e:void 0}function dw(e,t,a){if(Uj(t))return t;const s=e.immer_.shouldUseStrictIteration(),r=t[Hr];if(!r)return cw(t,(i,o)=>lF(e,r,t,i,o,a),s),t;if(r.scope_!==e)return t;if(!r.modified_)return uw(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,l=!1;r.type_===3&&(o=new Set(i),i.clear(),l=!0),cw(o,(c,u)=>lF(e,r,i,c,u,a,l),s),uw(e,i,!1),a&&e.patches_&&Uu("Patches").generatePatches_(r,a,e.patches_,e.inversePatches_)}return r.copy_}function lF(e,t,a,s,r,i,o){if(r==null||typeof r!="object"&&!o)return;const l=Uj(r);if(!(l&&!o)){if(Bf(r)){const c=i&&t&&t.type_!==3&&!uE(t.assigned_,s)?i.concat(s):void 0,u=dw(e,r,c);if(AQ(a,s,u),Bf(u))e.canAutoFreeze_=!1;else return}else o&&a.add(r);if(Fu(r)&&!l){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[s]===r&&l)return;dw(e,r),(!t||!t.scope_.parent_)&&typeof s!="symbol"&&(a0(a)?a.has(s):Object.prototype.propertyIsEnumerable.call(a,s))&&uw(e,r)}}}function uw(e,t,a=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&$P(t,a)}function JAe(e,t){const a=Array.isArray(e),s={type_:a?1:0,scope_:t?t.scope_:TQ(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=s,i=RP;a&&(r=[s],i=zp);const{revoke:o,proxy:l}=Proxy.revocable(r,i);return s.draft_=l,s.revoke_=o,l}var RP={get(e,t){if(t===Hr)return e;const a=eu(e);if(!uE(a,t))return eTe(e,a,t);const s=a[t];return e.finalized_||!Fu(s)?s:s===L_(e.base_,t)?(P_(e),e.copy_[t]=pE(s,e)):s},has(e,t){return t in eu(e)},ownKeys(e){return Reflect.ownKeys(eu(e))},set(e,t,a){const s=kQ(eu(e),t);if(s?.set)return s.set.call(e.draft_,a),!0;if(!e.modified_){const r=L_(eu(e),t),i=r?.[Hr];if(i&&i.base_===a)return e.copy_[t]=a,e.assigned_[t]=!1,!0;if(YAe(a,r)&&(a!==void 0||uE(e.base_,t)))return!0;P_(e),gE(e)}return e.copy_[t]===a&&(a!==void 0||t in e.copy_)||Number.isNaN(a)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=a,e.assigned_[t]=!0),!0},deleteProperty(e,t){return L_(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,P_(e),gE(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const a=eu(e),s=Reflect.getOwnPropertyDescriptor(a,t);return s&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:s.enumerable,value:a[t]}},defineProperty(){Bi(11)},getPrototypeOf(e){return $p(e.base_)},setPrototypeOf(){Bi(12)}},zp={};cw(RP,(e,t)=>{zp[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});zp.deleteProperty=function(e,t){return zp.set.call(this,e,t,void 0)};zp.set=function(e,t,a){return RP.set.call(this,e[0],t,a,e[0])};function L_(e,t){const a=e[Hr];return(a?eu(a):e)[t]}function eTe(e,t,a){const s=kQ(t,a);return s?"value"in s?s.value:s.get?.call(e.draft_):void 0}function kQ(e,t){if(!(t in e))return;let a=$p(e);for(;a;){const s=Object.getOwnPropertyDescriptor(a,t);if(s)return s;a=$p(a)}}function gE(e){e.modified_||(e.modified_=!0,e.parent_&&gE(e.parent_))}function P_(e){e.copy_||(e.copy_=mE(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var tTe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,a,s)=>{if(typeof t=="function"&&typeof a!="function"){const i=a;a=t;const o=this;return function(c=i,...u){return o.produce(c,d=>a.call(this,d,...u))}}typeof a!="function"&&Bi(6),s!==void 0&&typeof s!="function"&&Bi(7);let r;if(Fu(t)){const i=iF(this),o=pE(t,void 0);let l=!0;try{r=a(o),l=!1}finally{l?fE(i):hE(i)}return rF(i,s),oF(r,i)}else if(!t||typeof t!="object"){if(r=a(t),r===void 0&&(r=t),r===SQ&&(r=void 0),this.autoFreeze_&&$P(r,!0),s){const i=[],o=[];Uu("Patches").generateReplacementPatches_(t,r,i,o),s(i,o)}return r}else Bi(1,t)},this.produceWithPatches=(t,a)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let s,r;return[this.produce(t,a,(o,l)=>{s=o,r=l}),s,r]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Fu(e)||Bi(8),Bf(e)&&(e=nTe(e));const t=iF(this),a=pE(e,void 0);return a[Hr].isManual_=!0,hE(t),a}finishDraft(e,t){const a=e&&e[Hr];(!a||!a.isManual_)&&Bi(9);const{scope_:s}=a;return rF(s,t),oF(void 0,s)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let a;for(a=t.length-1;a>=0;a--){const r=t[a];if(r.path.length===0&&r.op==="replace"){e=r.value;break}}a>-1&&(t=t.slice(a+1));const s=Uu("Patches").applyPatches_;return Bf(e)?s(e,t):this.produce(e,r=>s(r,t))}};function pE(e,t){const a=a0(e)?Uu("MapSet").proxyMap_(e,t):Fj(e)?Uu("MapSet").proxySet_(e,t):JAe(e,t);return(t?t.scope_:TQ()).drafts_.push(a),a}function nTe(e){return Bf(e)||Bi(10,e),EQ(e)}function EQ(e){if(!Fu(e)||Uj(e))return e;const t=e[Hr];let a,s=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,a=mE(e,t.scope_.immer_.useStrictShallowCopy_),s=t.scope_.immer_.shouldUseStrictIteration()}else a=mE(e,!0);return cw(a,(r,i)=>{AQ(a,r,EQ(i))},s),t&&(t.finalized_=!1),a}var aTe=new tTe;aTe.produce;var sTe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},LQ=jr({name:"legend",initialState:sTe,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:ca()},replaceLegendPayload:{reducer(e,t){var{prev:a,next:s}=t.payload,r=Wi(e).payload.indexOf(a);r>-1&&(e.payload[r]=s)},prepare:ca()},removeLegendPayload:{reducer(e,t){var a=Wi(e).payload.indexOf(t.payload);a>-1&&e.payload.splice(a,1)},prepare:ca()}}}),{setLegendSize:cF,setLegendSettings:rTe,addLegendPayload:PQ,replaceLegendPayload:DQ,removeLegendPayload:OQ}=LQ.actions,iTe=LQ.reducer,oTe=["contextPayload"];function xE(){return xE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},xE.apply(null,arguments)}function dF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Hf(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?dF(Object(a),!0).forEach(function(s){lTe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):dF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function lTe(e,t,a){return(t=cTe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function cTe(e){var t=dTe(e,"string");return typeof t=="symbol"?t:t+""}function dTe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uTe(e,t){if(e==null)return{};var a,s,r=mTe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function mTe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function fTe(e){return e.value}function hTe(e){var{contextPayload:t}=e,a=uTe(e,oTe),s=OY(t,e.payloadUniqBy,fTe),r=Hf(Hf({},a),{},{payload:s});return h.isValidElement(e.content)?h.cloneElement(e.content,r):typeof e.content=="function"?h.createElement(e.content,r):h.createElement(b2e,r)}function gTe(e,t,a,s,r,i){var{layout:o,align:l,verticalAlign:c}=t,u,d;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(l==="center"&&o==="vertical"?u={left:((s||0)-i.width)/2}:u=l==="right"?{right:a&&a.right||0}:{left:a&&a.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?d={top:((r||0)-i.height)/2}:d=c==="bottom"?{bottom:a&&a.bottom||0}:{top:a&&a.top||0}),Hf(Hf({},u),d)}function pTe(e){var t=Zn();return h.useEffect(()=>{t(rTe(e))},[t,e]),null}function xTe(e){var t=Zn();return h.useEffect(()=>(t(cF(e)),()=>{t(cF({width:0,height:0}))}),[t,e]),null}function yTe(e,t,a,s){return e==="vertical"&&zt(t)?{height:t}:e==="horizontal"?{width:a||s}:null}var bTe={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function MQ(e){var t=Qa(e,bTe),a=Z2e(),s=HSe(),r=WAe(),{width:i,height:o,wrapperStyle:l,portal:c}=t,[u,d]=RY([a]),f=MP(),p=IP();if(f==null||p==null)return null;var x=f-(r?.left||0)-(r?.right||0),y=yTe(t.layout,o,i,x),N=c?l:Hf(Hf({position:"absolute",width:y?.width||i||"auto",height:y?.height||o||"auto"},gTe(l,t,r,f,p,u)),l),v=c??s;if(v==null||a==null)return null;var j=h.createElement("div",{className:"recharts-legend-wrapper",style:N,ref:d},h.createElement(pTe,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),!c&&h.createElement(xTe,{width:u.width,height:u.height}),h.createElement(hTe,xE({},t,y,{margin:r,chartWidth:f,chartHeight:p,contextPayload:a})));return Hi.createPortal(j,v)}MQ.displayName="Legend";function yE(){return yE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},yE.apply(null,arguments)}function uF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function D_(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?uF(Object(a),!0).forEach(function(s){vTe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):uF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function vTe(e,t,a){return(t=wTe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function wTe(e){var t=NTe(e,"string");return typeof t=="symbol"?t:t+""}function NTe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jTe(e){return Array.isArray(e)&&Fo(e[0])&&Fo(e[1])?e.join(" ~ "):e}var CTe=e=>{var{separator:t=" : ",contentStyle:a={},itemStyle:s={},labelStyle:r={},payload:i,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:p=!1}=e,x=()=>{if(i&&i.length){var E={padding:0,margin:0},T=(l?Cj(i,l):i).map((A,L)=>{if(A.type==="none")return null;var M=A.formatter||o||jTe,{value:F,name:$}=A,D=F,q=$;if(M){var G=M(F,$,A,L,i);if(Array.isArray(G))[D,q]=G;else if(G!=null)D=G;else return null}var U=D_({display:"block",paddingTop:4,paddingBottom:4,color:A.color||"#000"},s);return h.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(L),style:U},Fo(q)?h.createElement("span",{className:"recharts-tooltip-item-name"},q):null,Fo(q)?h.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,h.createElement("span",{className:"recharts-tooltip-item-value"},D),h.createElement("span",{className:"recharts-tooltip-item-unit"},A.unit||""))});return h.createElement("ul",{className:"recharts-tooltip-item-list",style:E},T)}return null},y=D_({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),N=D_({margin:0},r),v=!fa(d),j=v?d:"",w=Mt("recharts-default-tooltip",c),S=Mt("recharts-tooltip-label",u);v&&f&&i!==void 0&&i!==null&&(j=f(d,i));var _=p?{role:"status","aria-live":"assertive"}:{};return h.createElement("div",yE({className:w,style:y},_),h.createElement("p",{className:S,style:N},h.isValidElement(j)?j:"".concat(j)),x())},vg="recharts-tooltip-wrapper",STe={visibility:"hidden"};function _Te(e){var{coordinate:t,translateX:a,translateY:s}=e;return Mt(vg,{["".concat(vg,"-right")]:zt(a)&&t&&zt(t.x)&&a>=t.x,["".concat(vg,"-left")]:zt(a)&&t&&zt(t.x)&&a<t.x,["".concat(vg,"-bottom")]:zt(s)&&t&&zt(t.y)&&s>=t.y,["".concat(vg,"-top")]:zt(s)&&t&&zt(t.y)&&s<t.y})}function mF(e){var{allowEscapeViewBox:t,coordinate:a,key:s,offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:u}=e;if(i&&zt(i[s]))return i[s];var d=a[s]-l-(r>0?r:0),f=a[s]+r;if(t[s])return o[s]?d:f;var p=c[s];if(p==null)return 0;if(o[s]){var x=d,y=p;return x<y?Math.max(f,p):Math.max(d,p)}if(u==null)return 0;var N=f+l,v=p+u;return N>v?Math.max(d,p):Math.max(f,p)}function ATe(e){var{translateX:t,translateY:a,useTranslate3d:s}=e;return{transform:s?"translate3d(".concat(t,"px, ").concat(a,"px, 0)"):"translate(".concat(t,"px, ").concat(a,"px)")}}function TTe(e){var{allowEscapeViewBox:t,coordinate:a,offsetTopLeft:s,position:r,reverseDirection:i,tooltipBox:o,useTranslate3d:l,viewBox:c}=e,u,d,f;return o.height>0&&o.width>0&&a?(d=mF({allowEscapeViewBox:t,coordinate:a,key:"x",offsetTopLeft:s,position:r,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=mF({allowEscapeViewBox:t,coordinate:a,key:"y",offsetTopLeft:s,position:r,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=ATe({translateX:d,translateY:f,useTranslate3d:l})):u=STe,{cssProperties:u,cssClasses:_Te({translateX:d,translateY:f,coordinate:a})}}function fF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function ob(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?fF(Object(a),!0).forEach(function(s){bE(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):fF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function bE(e,t,a){return(t=kTe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function kTe(e){var t=ETe(e,"string");return typeof t=="symbol"?t:t+""}function ETe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class LTe extends h.PureComponent{constructor(){super(...arguments),bE(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),bE(this,"handleKeyDown",t=>{if(t.key==="Escape"){var a,s,r,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.x)!==null&&a!==void 0?a:0,y:(r=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&r!==void 0?r:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,a;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:a,animationDuration:s,animationEasing:r,children:i,coordinate:o,hasPayload:l,isAnimationActive:c,offset:u,position:d,reverseDirection:f,useTranslate3d:p,viewBox:x,wrapperStyle:y,lastBoundingBox:N,innerRef:v,hasPortalFromProps:j}=this.props,{cssClasses:w,cssProperties:S}=TTe({allowEscapeViewBox:a,coordinate:o,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:N.height,width:N.width},useTranslate3d:p,viewBox:x}),_=j?{}:ob(ob({transition:c&&t?"transform ".concat(s,"ms ").concat(r):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),E=ob(ob({},_),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},y);return h.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:w,style:E,ref:v},i)}}var IQ=()=>{var e;return(e=Ut(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function vE(){return vE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},vE.apply(null,arguments)}function hF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function gF(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?hF(Object(a),!0).forEach(function(s){PTe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):hF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function PTe(e,t,a){return(t=DTe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function DTe(e){var t=OTe(e,"string");return typeof t=="symbol"?t:t+""}function OTe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pF={curveBasisClosed:Ope,curveBasisOpen:Mpe,curveBasis:Dpe,curveBumpX:GW,curveBumpY:VW,curveLinearClosed:Rpe,curveLinear:Lx,curveMonotoneX:Lk,curveMonotoneY:dG,curveNatural:mG,curveStep:fG,curveStepAfter:gG,curveStepBefore:hG},mw=e=>xa(e.x)&&xa(e.y),xF=e=>e.base!=null&&mw(e.base)&&mw(e),wg=e=>e.x,Ng=e=>e.y,MTe=(e,t)=>{if(typeof e=="function")return e;var a="curve".concat(Kx(e));return(a==="curveMonotone"||a==="curveBump")&&t?pF["".concat(a).concat(t==="vertical"?"Y":"X")]:pF[a]||Lx},ITe=e=>{var{type:t="linear",points:a=[],baseLine:s,layout:r,connectNulls:i=!1}=e,o=MTe(t,r),l=i?a.filter(mw):a,c;if(Array.isArray(s)){var u=a.map((x,y)=>gF(gF({},x),{},{base:s[y]}));r==="vertical"?c=Ug().y(Ng).x1(wg).x0(x=>x.base.x):c=Ug().x(wg).y1(Ng).y0(x=>x.base.y);var d=c.defined(xF).curve(o),f=i?u.filter(xF):u;return d(f)}r==="vertical"&&zt(s)?c=Ug().y(Ng).x1(wg).x0(s):zt(s)?c=Ug().x(wg).y1(Ng).y0(s):c=P4().x(wg).y(Ng);var p=c.defined(mw).curve(o);return p(l)},zP=e=>{var{className:t,points:a,path:s,pathRef:r}=e,i=dh();if((!a||!a.length)&&!s)return null;var o={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||i,connectNulls:e.connectNulls},l=a&&a.length?ITe(o):s;return h.createElement("path",vE({},Br(e),NP(e),{className:Mt("recharts-curve",t),d:l===null?void 0:l,ref:r}))},$Te=["x","y","top","left","width","height","className"];function wE(){return wE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},wE.apply(null,arguments)}function yF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function RTe(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?yF(Object(a),!0).forEach(function(s){zTe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):yF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function zTe(e,t,a){return(t=FTe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function FTe(e){var t=UTe(e,"string");return typeof t=="symbol"?t:t+""}function UTe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function BTe(e,t){if(e==null)return{};var a,s,r=HTe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function HTe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var qTe=(e,t,a,s,r,i)=>"M".concat(e,",").concat(r,"v").concat(s,"M").concat(i,",").concat(t,"h").concat(a),WTe=e=>{var{x:t=0,y:a=0,top:s=0,left:r=0,width:i=0,height:o=0,className:l}=e,c=BTe(e,$Te),u=RTe({x:t,y:a,top:s,left:r,width:i,height:o},c);return!zt(t)||!zt(a)||!zt(i)||!zt(o)||!zt(s)||!zt(r)?null:h.createElement("path",wE({},Ys(u),{className:Mt("recharts-cross",l),d:qTe(t,a,i,o,s,r)}))};function GTe(e,t,a,s){var r=s/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-r:a.left+.5,y:e==="horizontal"?a.top+.5:t.y-r,width:e==="horizontal"?s:a.width-1,height:e==="horizontal"?a.height-1:s}}function bF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function vF(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?bF(Object(a),!0).forEach(function(s){VTe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):bF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function VTe(e,t,a){return(t=YTe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function YTe(e){var t=QTe(e,"string");return typeof t=="symbol"?t:t+""}function QTe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var KTe=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),$Q=(e,t,a)=>e.map(s=>"".concat(KTe(s)," ").concat(t,"ms ").concat(a)).join(","),XTe=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((a,s)=>a.filter(r=>s.includes(r))),Fp=(e,t)=>Object.keys(t).reduce((a,s)=>vF(vF({},a),{},{[s]:e(s,t[s])}),{});function wF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Xa(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?wF(Object(a),!0).forEach(function(s){ZTe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):wF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function ZTe(e,t,a){return(t=JTe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function JTe(e){var t=eke(e,"string");return typeof t=="symbol"?t:t+""}function eke(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fw=(e,t,a)=>e+(t-e)*a,NE=e=>{var{from:t,to:a}=e;return t!==a},RQ=(e,t,a)=>{var s=Fp((r,i)=>{if(NE(i)){var[o,l]=e(i.from,i.to,i.velocity);return Xa(Xa({},i),{},{from:o,velocity:l})}return i},t);return a<1?Fp((r,i)=>NE(i)&&s[r]!=null?Xa(Xa({},i),{},{velocity:fw(i.velocity,s[r].velocity,a),from:fw(i.from,s[r].from,a)}):i,t):RQ(e,s,a-1)};function tke(e,t,a,s,r,i){var o,l=s.reduce((p,x)=>Xa(Xa({},p),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),c=()=>Fp((p,x)=>x.from,l),u=()=>!Object.values(l).filter(NE).length,d=null,f=p=>{o||(o=p);var x=p-o,y=x/a.dt;l=RQ(a,l,y),r(Xa(Xa(Xa({},e),t),c())),o=p,u()||(d=i.setTimeout(f))};return()=>(d=i.setTimeout(f),()=>{var p;(p=d)===null||p===void 0||p()})}function nke(e,t,a,s,r,i,o){var l=null,c=r.reduce((f,p)=>{var x=e[p],y=t[p];return x==null||y==null?f:Xa(Xa({},f),{},{[p]:[x,y]})},{}),u,d=f=>{u||(u=f);var p=(f-u)/s,x=Fp((N,v)=>fw(...v,a(p)),c);if(i(Xa(Xa(Xa({},e),t),x)),p<1)l=o.setTimeout(d);else{var y=Fp((N,v)=>fw(...v,a(1)),c);i(Xa(Xa(Xa({},e),t),y))}};return()=>(l=o.setTimeout(d),()=>{var f;(f=l)===null||f===void 0||f()})}const ake=(e,t,a,s,r,i)=>{var o=XTe(e,t);return a==null?()=>(r(Xa(Xa({},e),t)),()=>{}):a.isStepper===!0?tke(e,t,a,o,r,i):nke(e,t,a,s,o,r,i)};var hw=1e-4,zQ=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],FQ=(e,t)=>e.map((a,s)=>a*t**s).reduce((a,s)=>a+s),NF=(e,t)=>a=>{var s=zQ(e,t);return FQ(s,a)},ske=(e,t)=>a=>{var s=zQ(e,t),r=[...s.map((i,o)=>i*o).slice(1),0];return FQ(r,a)},rke=e=>{var t,a=e.split("(");if(a.length!==2||a[0]!=="cubic-bezier")return null;var s=(t=a[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(s==null||s.length!==4)return null;var r=s.map(i=>parseFloat(i));return[r[0],r[1],r[2],r[3]]},ike=function(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];if(a.length===1)switch(a[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var r=rke(a[0]);if(r)return r}}return a.length===4?a:[0,0,1,1]},oke=(e,t,a,s)=>{var r=NF(e,a),i=NF(t,s),o=ske(e,a),l=u=>u>1?1:u<0?0:u,c=u=>{for(var d=u>1?1:u,f=d,p=0;p<8;++p){var x=r(f)-d,y=o(f);if(Math.abs(x-d)<hw||y<hw)return i(f);f=l(f-x/y)}return i(f)};return c.isStepper=!1,c},jF=function(){return oke(...ike(...arguments))},lke=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:a=100,damping:s=8,dt:r=17}=t,i=(o,l,c)=>{var u=-(o-l)*a,d=c*s,f=c+(u-d)*r/1e3,p=c*r/1e3+o;return Math.abs(p-l)<hw&&Math.abs(f)<hw?[l,0]:[p,f]};return i.isStepper=!0,i.dt=r,i},cke=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return jF(e);case"spring":return lke();default:if(e.split("(")[0]==="cubic-bezier")return jF(e)}return typeof e=="function"?e:null};function dke(e){var t,a=()=>null,s=!1,r=null,i=o=>{if(!s){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...u]=l;if(typeof c=="number"){r=e.setTimeout(i.bind(null,u),c);return}i(c),r=e.setTimeout(i.bind(null,u));return}typeof o=="string"&&(t=o,a(t)),typeof o=="object"&&(t=o,a(t)),typeof o=="function"&&o()}};return{stop:()=>{s=!0},start:o=>{s=!1,r&&(r(),r=null),i(o)},subscribe:o=>(a=o,()=>{a=()=>null}),getTimeoutController:()=>e}}class uke{setTimeout(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=performance.now(),r=null,i=o=>{o-s>=a?t(o):typeof requestAnimationFrame=="function"&&(r=requestAnimationFrame(i))};return r=requestAnimationFrame(i),()=>{r!=null&&cancelAnimationFrame(r)}}}function mke(){return dke(new uke)}var fke=h.createContext(mke);function hke(e,t){var a=h.useContext(fke);return h.useMemo(()=>t??a(e),[e,t,a])}var gke=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Bj={isSsr:gke()},pke={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},CF={t:0},O_={t:1};function s0(e){var t=Qa(e,pke),{isActive:a,canBegin:s,duration:r,easing:i,begin:o,onAnimationEnd:l,onAnimationStart:c,children:u}=t,d=a==="auto"?!Bj.isSsr:a,f=hke(t.animationId,t.animationManager),[p,x]=h.useState(d?CF:O_),y=h.useRef(null);return h.useEffect(()=>{d||x(O_)},[d]),h.useEffect(()=>{if(!d||!s)return Xx;var N=ake(CF,O_,cke(i),r,x,f.getTimeoutController()),v=()=>{y.current=N()};return f.start([c,o,v,r,l]),()=>{f.stop(),y.current&&y.current(),l()}},[d,s,r,i,o,c,l,f]),u(p.t)}function r0(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",a=h.useRef(Dp(t)),s=h.useRef(e);return s.current!==e&&(a.current=Dp(t),s.current=e),a.current}var xke=["radius"],yke=["radius"],SF,_F,AF,TF,kF,EF,LF,PF,DF,OF;function MF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function IF(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?MF(Object(a),!0).forEach(function(s){bke(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):MF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function bke(e,t,a){return(t=vke(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function vke(e){var t=wke(e,"string");return typeof t=="symbol"?t:t+""}function wke(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gw(){return gw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},gw.apply(null,arguments)}function $F(e,t){if(e==null)return{};var a,s,r=Nke(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Nke(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function lo(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var RF=(e,t,a,s,r)=>{var i=Zc(a),o=Zc(s),l=Math.min(Math.abs(i)/2,Math.abs(o)/2),c=o>=0?1:-1,u=i>=0?1:-1,d=o>=0&&i>=0||o<0&&i<0?1:0,f;if(l>0&&r instanceof Array){for(var p=[0,0,0,0],x=0,y=4;x<y;x++)p[x]=r[x]>l?l:r[x];f=Ca(SF||(SF=lo(["M",",",""])),e,t+c*p[0]),p[0]>0&&(f+=Ca(_F||(_F=lo(["A ",",",",0,0,",",",",",""])),p[0],p[0],d,e+u*p[0],t)),f+=Ca(AF||(AF=lo(["L ",",",""])),e+a-u*p[1],t),p[1]>0&&(f+=Ca(TF||(TF=lo(["A ",",",",0,0,",`,
        `,",",""])),p[1],p[1],d,e+a,t+c*p[1])),f+=Ca(kF||(kF=lo(["L ",",",""])),e+a,t+s-c*p[2]),p[2]>0&&(f+=Ca(EF||(EF=lo(["A ",",",",0,0,",`,
        `,",",""])),p[2],p[2],d,e+a-u*p[2],t+s)),f+=Ca(LF||(LF=lo(["L ",",",""])),e+u*p[3],t+s),p[3]>0&&(f+=Ca(PF||(PF=lo(["A ",",",",0,0,",`,
        `,",",""])),p[3],p[3],d,e,t+s-c*p[3])),f+="Z"}else if(l>0&&r===+r&&r>0){var N=Math.min(l,r);f=Ca(DF||(DF=lo(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+c*N,N,N,d,e+u*N,t,e+a-u*N,t,N,N,d,e+a,t+c*N,e+a,t+s-c*N,N,N,d,e+a-u*N,t+s,e+u*N,t+s,N,N,d,e,t+s-c*N)}else f=Ca(OF||(OF=lo(["M ",","," h "," v "," h "," Z"])),e,t,a,s,-a);return f},zF={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},UQ=e=>{var t=Qa(e,zF),a=h.useRef(null),[s,r]=h.useState(-1);h.useEffect(()=>{if(a.current&&a.current.getTotalLength)try{var Z=a.current.getTotalLength();Z&&r(Z)}catch{}},[]);var{x:i,y:o,width:l,height:c,radius:u,className:d}=t,{animationEasing:f,animationDuration:p,animationBegin:x,isAnimationActive:y,isUpdateAnimationActive:N}=t,v=h.useRef(l),j=h.useRef(c),w=h.useRef(i),S=h.useRef(o),_=h.useMemo(()=>({x:i,y:o,width:l,height:c,radius:u}),[i,o,l,c,u]),E=r0(_,"rectangle-");if(i!==+i||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var T=Mt("recharts-rectangle",d);if(!N){var A=Ys(t),{radius:L}=A,M=$F(A,xke);return h.createElement("path",gw({},M,{x:Zc(i),y:Zc(o),width:Zc(l),height:Zc(c),radius:typeof u=="number"?u:void 0,className:T,d:RF(i,o,l,c,u)}))}var F=v.current,$=j.current,D=w.current,q=S.current,G="0px ".concat(s===-1?1:s,"px"),U="".concat(s,"px 0px"),V=$Q(["strokeDasharray"],p,typeof f=="string"?f:zF.animationEasing);return h.createElement(s0,{animationId:E,key:E,canBegin:s>0,duration:p,easing:f,isActive:N,begin:x},Z=>{var Y=da(F,l,Z),le=da($,c,Z),_e=da(D,i,Z),te=da(q,o,Z);a.current&&(v.current=Y,j.current=le,w.current=_e,S.current=te);var ae;y?Z>0?ae={transition:V,strokeDasharray:U}:ae={strokeDasharray:G}:ae={strokeDasharray:U};var ye=Ys(t),{radius:Ne}=ye,he=$F(ye,yke);return h.createElement("path",gw({},he,{radius:typeof u=="number"?u:void 0,className:T,d:RF(_e,te,Y,le,u),ref:a,style:IF(IF({},ae),t.style)}))})};function FF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function UF(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?FF(Object(a),!0).forEach(function(s){jke(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):FF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function jke(e,t,a){return(t=Cke(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Cke(e){var t=Ske(e,"string");return typeof t=="symbol"?t:t+""}function Ske(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pw=Math.PI/180,_ke=e=>e*180/Math.PI,qa=(e,t,a,s)=>({x:e+Math.cos(-pw*s)*a,y:t+Math.sin(-pw*s)*a}),BQ=function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(s.left||0)-(s.right||0)),Math.abs(a-(s.top||0)-(s.bottom||0)))/2},Ake=(e,t)=>{var{x:a,y:s}=e,{x:r,y:i}=t;return Math.sqrt((a-r)**2+(s-i)**2)},Tke=(e,t)=>{var{x:a,y:s}=e,{cx:r,cy:i}=t,o=Ake({x:a,y:s},{x:r,y:i});if(o<=0)return{radius:o,angle:0};var l=(a-r)/o,c=Math.acos(l);return s>i&&(c=2*Math.PI-c),{radius:o,angle:_ke(c),angleInRadian:c}},kke=e=>{var{startAngle:t,endAngle:a}=e,s=Math.floor(t/360),r=Math.floor(a/360),i=Math.min(s,r);return{startAngle:t-i*360,endAngle:a-i*360}},Eke=(e,t)=>{var{startAngle:a,endAngle:s}=t,r=Math.floor(a/360),i=Math.floor(s/360),o=Math.min(r,i);return e+o*360},Lke=(e,t)=>{var{chartX:a,chartY:s}=e,{radius:r,angle:i}=Tke({x:a,y:s},t),{innerRadius:o,outerRadius:l}=t;if(r<o||r>l||r===0)return null;var{startAngle:c,endAngle:u}=kke(t),d=i,f;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=c}return f?UF(UF({},t),{},{radius:r,angle:Eke(d,t)}):null};function HQ(e){var{cx:t,cy:a,radius:s,startAngle:r,endAngle:i}=e,o=qa(t,a,s,r),l=qa(t,a,s,i);return{points:[o,l],cx:t,cy:a,radius:s,startAngle:r,endAngle:i}}var BF,HF,qF,WF,GF,VF,YF;function jE(){return jE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},jE.apply(null,arguments)}function fu(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Pke=(e,t)=>{var a=xs(t-e),s=Math.min(Math.abs(t-e),359.999);return a*s},lb=e=>{var{cx:t,cy:a,radius:s,angle:r,sign:i,isExternal:o,cornerRadius:l,cornerIsExternal:c}=e,u=l*(o?1:-1)+s,d=Math.asin(l/u)/pw,f=c?r:r+i*d,p=qa(t,a,u,f),x=qa(t,a,s,f),y=c?r-i*d:r,N=qa(t,a,u*Math.cos(d*pw),y);return{center:p,circleTangency:x,lineTangency:N,theta:d}},qQ=e=>{var{cx:t,cy:a,innerRadius:s,outerRadius:r,startAngle:i,endAngle:o}=e,l=Pke(i,o),c=i+l,u=qa(t,a,r,i),d=qa(t,a,r,c),f=Ca(BF||(BF=fu(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),u.x,u.y,r,r,+(Math.abs(l)>180),+(i>c),d.x,d.y);if(s>0){var p=qa(t,a,s,i),x=qa(t,a,s,c);f+=Ca(HF||(HF=fu(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),x.x,x.y,s,s,+(Math.abs(l)>180),+(i<=c),p.x,p.y)}else f+=Ca(qF||(qF=fu(["L ",","," Z"])),t,a);return f},Dke=e=>{var{cx:t,cy:a,innerRadius:s,outerRadius:r,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:u}=e,d=xs(u-c),{circleTangency:f,lineTangency:p,theta:x}=lb({cx:t,cy:a,radius:r,angle:c,sign:d,cornerRadius:i,cornerIsExternal:l}),{circleTangency:y,lineTangency:N,theta:v}=lb({cx:t,cy:a,radius:r,angle:u,sign:-d,cornerRadius:i,cornerIsExternal:l}),j=l?Math.abs(c-u):Math.abs(c-u)-x-v;if(j<0)return o?Ca(WF||(WF=fu(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),p.x,p.y,i,i,i*2,i,i,-i*2):qQ({cx:t,cy:a,innerRadius:s,outerRadius:r,startAngle:c,endAngle:u});var w=Ca(GF||(GF=fu(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),p.x,p.y,i,i,+(d<0),f.x,f.y,r,r,+(j>180),+(d<0),y.x,y.y,i,i,+(d<0),N.x,N.y);if(s>0){var{circleTangency:S,lineTangency:_,theta:E}=lb({cx:t,cy:a,radius:s,angle:c,sign:d,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),{circleTangency:T,lineTangency:A,theta:L}=lb({cx:t,cy:a,radius:s,angle:u,sign:-d,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),M=l?Math.abs(c-u):Math.abs(c-u)-E-L;if(M<0&&i===0)return"".concat(w,"L").concat(t,",").concat(a,"Z");w+=Ca(VF||(VF=fu(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),A.x,A.y,i,i,+(d<0),T.x,T.y,s,s,+(M>180),+(d>0),S.x,S.y,i,i,+(d<0),_.x,_.y)}else w+=Ca(YF||(YF=fu(["L",",","Z"])),t,a);return w},Oke={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},WQ=e=>{var t=Qa(e,Oke),{cx:a,cy:s,innerRadius:r,outerRadius:i,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d,className:f}=t;if(i<r||u===d)return null;var p=Mt("recharts-sector",f),x=i-r,y=Rs(o,x,0,!0),N;return y>0&&Math.abs(u-d)<360?N=Dke({cx:a,cy:s,innerRadius:r,outerRadius:i,cornerRadius:Math.min(y,x/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):N=qQ({cx:a,cy:s,innerRadius:r,outerRadius:i,startAngle:u,endAngle:d}),h.createElement("path",jE({},Ys(t),{className:p,d:N}))};function Mke(e,t,a){if(e==="horizontal")return[{x:t.x,y:a.top},{x:t.x,y:a.top+a.height}];if(e==="vertical")return[{x:a.left,y:t.y},{x:a.left+a.width,y:t.y}];if(CY(t)){if(e==="centric"){var{cx:s,cy:r,innerRadius:i,outerRadius:o,angle:l}=t,c=qa(s,r,i,l),u=qa(s,r,o,l);return[{x:c.x,y:c.y},{x:u.x,y:u.y}]}return HQ(t)}}var M_={},I_={},$_={},QF;function Ike(){return QF||(QF=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=MY();function a(s){return t.isSymbol(s)?NaN:Number(s)}e.toNumber=a})($_)),$_}var KF;function $ke(){return KF||(KF=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ike();function a(s){return s?(s=t.toNumber(s),s===1/0||s===-1/0?(s<0?-1:1)*Number.MAX_VALUE:s===s?s:0):s===0?s:0}e.toFinite=a})(I_)),I_}var XF;function Rke(){return XF||(XF=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=IY(),a=$ke();function s(r,i,o){o&&typeof o!="number"&&t.isIterateeCall(r,i,o)&&(i=o=void 0),r=a.toFinite(r),i===void 0?(i=r,r=0):i=a.toFinite(i),o=o===void 0?r<i?1:-1:a.toFinite(o);const l=Math.max(Math.ceil((i-r)/(o||1)),0),c=new Array(l);for(let u=0;u<l;u++)c[u]=r,r+=o;return c}e.range=s})(M_)),M_}var R_,ZF;function zke(){return ZF||(ZF=1,R_=Rke().range),R_}var Fke=zke();const GQ=Zi(Fke),Wg=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:JL,scaleDiverging:Vq,scaleDivergingLog:Yq,scaleDivergingPow:C4,scaleDivergingSqrt:dge,scaleDivergingSymlog:Qq,scaleIdentity:kq,scaleImplicit:vk,scaleLinear:ON,scaleLog:Sp,scaleOrdinal:vp,scalePoint:nfe,scalePow:MN,scaleQuantile:Dq,scaleQuantize:Oq,scaleRadial:Pq,scaleSequential:N4,scaleSequentialLog:qq,scaleSequentialPow:j4,scaleSequentialQuantile:Gq,scaleSequentialSqrt:cge,scaleSequentialSymlog:Wq,scaleSqrt:Lq,scaleSymlog:d4,scaleThreshold:m4,scaleTime:w4,scaleUtc:Hq,tickFormat:Tq},Symbol.toStringTag,{value:"Module"}));var rc=e=>e.chartData,Hj=it([rc],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),FP=(e,t,a,s)=>s?Hj(e):rc(e),Uke=(e,t,a)=>a?Hj(e):rc(e);function fd(e){if(Array.isArray(e)&&e.length===2){var[t,a]=e;if(xa(t)&&xa(a))return!0}return!1}function JF(e,t,a){return a?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function VQ(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[a,s]=e,r,i;if(xa(a))r=a;else if(typeof a=="function")return;if(xa(s))i=s;else if(typeof s=="function")return;var o=[r,i];if(fd(o))return o}}function Bke(e,t,a){if(!(!a&&t==null)){if(typeof e=="function"&&t!=null)try{var s=e(t,a);if(fd(s))return JF(s,t,a)}catch{}if(Array.isArray(e)&&e.length===2){var[r,i]=e,o,l;if(r==="auto")t!=null&&(o=Math.min(...t));else if(zt(r))o=r;else if(typeof r=="function")try{t!=null&&(o=r(t?.[0]))}catch{}else if(typeof r=="string"&&Vz.test(r)){var c=Vz.exec(r);if(c==null||c[1]==null||t==null)o=void 0;else{var u=+c[1];o=t[0]-u}}else o=t?.[0];if(i==="auto")t!=null&&(l=Math.max(...t));else if(zt(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t?.[1]))}catch{}else if(typeof i=="string"&&Yz.test(i)){var d=Yz.exec(i);if(d==null||d[1]==null||t==null)l=void 0;else{var f=+d[1];l=t[1]+f}}else l=t?.[1];var p=[o,l];if(fd(p))return t==null?p:JF(p,t,a)}}}var uh=1e9,Hke={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},BP,ua=!0,wi="[DecimalError] ",Cu=wi+"Invalid argument: ",UP=wi+"Exponent out of range: ",mh=Math.floor,tu=Math.pow,qke=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ir,hs=1e7,na=7,YQ=9007199254740991,xw=mh(YQ/na),$t={};$t.absoluteValue=$t.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};$t.comparedTo=$t.cmp=function(e){var t,a,s,r,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(s=i.d.length,r=e.d.length,t=0,a=s<r?s:r;t<a;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return s===r?0:s>r^i.s<0?1:-1};$t.decimalPlaces=$t.dp=function(){var e=this,t=e.d.length-1,a=(t-e.e)*na;if(t=e.d[t],t)for(;t%10==0;t/=10)a--;return a<0?0:a};$t.dividedBy=$t.div=function(e){return Dl(this,new this.constructor(e))};$t.dividedToIntegerBy=$t.idiv=function(e){var t=this,a=t.constructor;return Gn(Dl(t,new a(e),0,1),a.precision)};$t.equals=$t.eq=function(e){return!this.cmp(e)};$t.exponent=function(){return Ga(this)};$t.greaterThan=$t.gt=function(e){return this.cmp(e)>0};$t.greaterThanOrEqualTo=$t.gte=function(e){return this.cmp(e)>=0};$t.isInteger=$t.isint=function(){return this.e>this.d.length-2};$t.isNegative=$t.isneg=function(){return this.s<0};$t.isPositive=$t.ispos=function(){return this.s>0};$t.isZero=function(){return this.s===0};$t.lessThan=$t.lt=function(e){return this.cmp(e)<0};$t.lessThanOrEqualTo=$t.lte=function(e){return this.cmp(e)<1};$t.logarithm=$t.log=function(e){var t,a=this,s=a.constructor,r=s.precision,i=r+5;if(e===void 0)e=new s(10);else if(e=new s(e),e.s<1||e.eq(Ir))throw Error(wi+"NaN");if(a.s<1)throw Error(wi+(a.s?"NaN":"-Infinity"));return a.eq(Ir)?new s(0):(ua=!1,t=Dl(Up(a,i),Up(e,i),i),ua=!0,Gn(t,r))};$t.minus=$t.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?XQ(t,e):QQ(t,(e.s=-e.s,e))};$t.modulo=$t.mod=function(e){var t,a=this,s=a.constructor,r=s.precision;if(e=new s(e),!e.s)throw Error(wi+"NaN");return a.s?(ua=!1,t=Dl(a,e,0,1).times(e),ua=!0,a.minus(t)):Gn(new s(a),r)};$t.naturalExponential=$t.exp=function(){return KQ(this)};$t.naturalLogarithm=$t.ln=function(){return Up(this)};$t.negated=$t.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};$t.plus=$t.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?QQ(t,e):XQ(t,(e.s=-e.s,e))};$t.precision=$t.sd=function(e){var t,a,s,r=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Cu+e);if(t=Ga(r)+1,s=r.d.length-1,a=s*na+1,s=r.d[s],s){for(;s%10==0;s/=10)a--;for(s=r.d[0];s>=10;s/=10)a++}return e&&t>a?t:a};$t.squareRoot=$t.sqrt=function(){var e,t,a,s,r,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(wi+"NaN")}for(e=Ga(l),ua=!1,r=Math.sqrt(+l),r==0||r==1/0?(t=ko(l.d),(t.length+e)%2==0&&(t+="0"),r=Math.sqrt(t),e=mh((e+1)/2)-(e<0||e%2),r==1/0?t="5e"+e:(t=r.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),s=new c(t)):s=new c(r.toString()),a=c.precision,r=o=a+3;;)if(i=s,s=i.plus(Dl(l,i,o+2)).times(.5),ko(i.d).slice(0,o)===(t=ko(s.d)).slice(0,o)){if(t=t.slice(o-3,o+1),r==o&&t=="4999"){if(Gn(i,a+1,0),i.times(i).eq(l)){s=i;break}}else if(t!="9999")break;o+=4}return ua=!0,Gn(s,a)};$t.times=$t.mul=function(e){var t,a,s,r,i,o,l,c,u,d=this,f=d.constructor,p=d.d,x=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,a=d.e+e.e,c=p.length,u=x.length,c<u&&(i=p,p=x,x=i,o=c,c=u,u=o),i=[],o=c+u,s=o;s--;)i.push(0);for(s=u;--s>=0;){for(t=0,r=c+s;r>s;)l=i[r]+x[s]*p[r-s-1]+t,i[r--]=l%hs|0,t=l/hs|0;i[r]=(i[r]+t)%hs|0}for(;!i[--o];)i.pop();return t?++a:i.shift(),e.d=i,e.e=a,ua?Gn(e,f.precision):e};$t.toDecimalPlaces=$t.todp=function(e,t){var a=this,s=a.constructor;return a=new s(a),e===void 0?a:(Bo(e,0,uh),t===void 0?t=s.rounding:Bo(t,0,8),Gn(a,e+Ga(a)+1,t))};$t.toExponential=function(e,t){var a,s=this,r=s.constructor;return e===void 0?a=Bu(s,!0):(Bo(e,0,uh),t===void 0?t=r.rounding:Bo(t,0,8),s=Gn(new r(s),e+1,t),a=Bu(s,!0,e+1)),a};$t.toFixed=function(e,t){var a,s,r=this,i=r.constructor;return e===void 0?Bu(r):(Bo(e,0,uh),t===void 0?t=i.rounding:Bo(t,0,8),s=Gn(new i(r),e+Ga(r)+1,t),a=Bu(s.abs(),!1,e+Ga(s)+1),r.isneg()&&!r.isZero()?"-"+a:a)};$t.toInteger=$t.toint=function(){var e=this,t=e.constructor;return Gn(new t(e),Ga(e)+1,t.rounding)};$t.toNumber=function(){return+this};$t.toPower=$t.pow=function(e){var t,a,s,r,i,o,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(Ir);if(l=new c(l),!l.s){if(e.s<1)throw Error(wi+"Infinity");return l}if(l.eq(Ir))return l;if(s=c.precision,e.eq(Ir))return Gn(l,s);if(t=e.e,a=e.d.length-1,o=t>=a,i=l.s,o){if((a=d<0?-d:d)<=YQ){for(r=new c(Ir),t=Math.ceil(s/na+4),ua=!1;a%2&&(r=r.times(l),tU(r.d,t)),a=mh(a/2),a!==0;)l=l.times(l),tU(l.d,t);return ua=!0,e.s<0?new c(Ir).div(r):Gn(r,s)}}else if(i<0)throw Error(wi+"NaN");return i=i<0&&e.d[Math.max(t,a)]&1?-1:1,l.s=1,ua=!1,r=e.times(Up(l,s+u)),ua=!0,r=KQ(r),r.s=i,r};$t.toPrecision=function(e,t){var a,s,r=this,i=r.constructor;return e===void 0?(a=Ga(r),s=Bu(r,a<=i.toExpNeg||a>=i.toExpPos)):(Bo(e,1,uh),t===void 0?t=i.rounding:Bo(t,0,8),r=Gn(new i(r),e,t),a=Ga(r),s=Bu(r,e<=a||a<=i.toExpNeg,e)),s};$t.toSignificantDigits=$t.tosd=function(e,t){var a=this,s=a.constructor;return e===void 0?(e=s.precision,t=s.rounding):(Bo(e,1,uh),t===void 0?t=s.rounding:Bo(t,0,8)),Gn(new s(a),e,t)};$t.toString=$t.valueOf=$t.val=$t.toJSON=$t[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ga(e),a=e.constructor;return Bu(e,t<=a.toExpNeg||t>=a.toExpPos)};function QQ(e,t){var a,s,r,i,o,l,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),ua?Gn(t,f):t;if(c=e.d,u=t.d,o=e.e,r=t.e,c=c.slice(),i=o-r,i){for(i<0?(s=c,i=-i,l=u.length):(s=u,r=o,l=c.length),o=Math.ceil(f/na),l=o>l?o+1:l+1,i>l&&(i=l,s.length=1),s.reverse();i--;)s.push(0);s.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,s=u,u=c,c=s),a=0;i;)a=(c[--i]=c[i]+u[i]+a)/hs|0,c[i]%=hs;for(a&&(c.unshift(a),++r),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=r,ua?Gn(t,f):t}function Bo(e,t,a){if(e!==~~e||e<t||e>a)throw Error(Cu+e)}function ko(e){var t,a,s,r=e.length-1,i="",o=e[0];if(r>0){for(i+=o,t=1;t<r;t++)s=e[t]+"",a=na-s.length,a&&(i+=Wc(a)),i+=s;o=e[t],s=o+"",a=na-s.length,a&&(i+=Wc(a))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Dl=(function(){function e(s,r){var i,o=0,l=s.length;for(s=s.slice();l--;)i=s[l]*r+o,s[l]=i%hs|0,o=i/hs|0;return o&&s.unshift(o),s}function t(s,r,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(s[l]!=r[l]){c=s[l]>r[l]?1:-1;break}return c}function a(s,r,i){for(var o=0;i--;)s[i]-=o,o=s[i]<r[i]?1:0,s[i]=o*hs+s[i]-r[i];for(;!s[0]&&s.length>1;)s.shift()}return function(s,r,i,o){var l,c,u,d,f,p,x,y,N,v,j,w,S,_,E,T,A,L,M=s.constructor,F=s.s==r.s?1:-1,$=s.d,D=r.d;if(!s.s)return new M(s);if(!r.s)throw Error(wi+"Division by zero");for(c=s.e-r.e,A=D.length,E=$.length,x=new M(F),y=x.d=[],u=0;D[u]==($[u]||0);)++u;if(D[u]>($[u]||0)&&--c,i==null?w=i=M.precision:o?w=i+(Ga(s)-Ga(r))+1:w=i,w<0)return new M(0);if(w=w/na+2|0,u=0,A==1)for(d=0,D=D[0],w++;(u<E||d)&&w--;u++)S=d*hs+($[u]||0),y[u]=S/D|0,d=S%D|0;else{for(d=hs/(D[0]+1)|0,d>1&&(D=e(D,d),$=e($,d),A=D.length,E=$.length),_=A,N=$.slice(0,A),v=N.length;v<A;)N[v++]=0;L=D.slice(),L.unshift(0),T=D[0],D[1]>=hs/2&&++T;do d=0,l=t(D,N,A,v),l<0?(j=N[0],A!=v&&(j=j*hs+(N[1]||0)),d=j/T|0,d>1?(d>=hs&&(d=hs-1),f=e(D,d),p=f.length,v=N.length,l=t(f,N,p,v),l==1&&(d--,a(f,A<p?L:D,p))):(d==0&&(l=d=1),f=D.slice()),p=f.length,p<v&&f.unshift(0),a(N,f,v),l==-1&&(v=N.length,l=t(D,N,A,v),l<1&&(d++,a(N,A<v?L:D,v))),v=N.length):l===0&&(d++,N=[0]),y[u++]=d,l&&N[0]?N[v++]=$[_]||0:(N=[$[_]],v=1);while((_++<E||N[0]!==void 0)&&w--)}return y[0]||y.shift(),x.e=c,Gn(x,o?i+Ga(x)+1:i)}})();function KQ(e,t){var a,s,r,i,o,l,c=0,u=0,d=e.constructor,f=d.precision;if(Ga(e)>16)throw Error(UP+Ga(e));if(!e.s)return new d(Ir);for(ua=!1,l=f,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(s=Math.log(tu(2,u))/Math.LN10*2+5|0,l+=s,a=r=i=new d(Ir),d.precision=l;;){if(r=Gn(r.times(e),l),a=a.times(++c),o=i.plus(Dl(r,a,l)),ko(o.d).slice(0,l)===ko(i.d).slice(0,l)){for(;u--;)i=Gn(i.times(i),l);return d.precision=f,t==null?(ua=!0,Gn(i,f)):i}i=o}}function Ga(e){for(var t=e.e*na,a=e.d[0];a>=10;a/=10)t++;return t}function z_(e,t,a){if(t>e.LN10.sd())throw ua=!0,a&&(e.precision=a),Error(wi+"LN10 precision limit exceeded");return Gn(new e(e.LN10),t)}function Wc(e){for(var t="";e--;)t+="0";return t}function Up(e,t){var a,s,r,i,o,l,c,u,d,f=1,p=10,x=e,y=x.d,N=x.constructor,v=N.precision;if(x.s<1)throw Error(wi+(x.s?"NaN":"-Infinity"));if(x.eq(Ir))return new N(0);if(t==null?(ua=!1,u=v):u=t,x.eq(10))return t==null&&(ua=!0),z_(N,u);if(u+=p,N.precision=u,a=ko(y),s=a.charAt(0),i=Ga(x),Math.abs(i)<15e14){for(;s<7&&s!=1||s==1&&a.charAt(1)>3;)x=x.times(e),a=ko(x.d),s=a.charAt(0),f++;i=Ga(x),s>1?(x=new N("0."+a),i++):x=new N(s+"."+a.slice(1))}else return c=z_(N,u+2,v).times(i+""),x=Up(new N(s+"."+a.slice(1)),u-p).plus(c),N.precision=v,t==null?(ua=!0,Gn(x,v)):x;for(l=o=x=Dl(x.minus(Ir),x.plus(Ir),u),d=Gn(x.times(x),u),r=3;;){if(o=Gn(o.times(d),u),c=l.plus(Dl(o,new N(r),u)),ko(c.d).slice(0,u)===ko(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(z_(N,u+2,v).times(i+""))),l=Dl(l,new N(f),u),N.precision=v,t==null?(ua=!0,Gn(l,v)):l;l=c,r+=2}}function eU(e,t){var a,s,r;for((a=t.indexOf("."))>-1&&(t=t.replace(".","")),(s=t.search(/e/i))>0?(a<0&&(a=s),a+=+t.slice(s+1),t=t.substring(0,s)):a<0&&(a=t.length),s=0;t.charCodeAt(s)===48;)++s;for(r=t.length;t.charCodeAt(r-1)===48;)--r;if(t=t.slice(s,r),t){if(r-=s,a=a-s-1,e.e=mh(a/na),e.d=[],s=(a+1)%na,a<0&&(s+=na),s<r){for(s&&e.d.push(+t.slice(0,s)),r-=na;s<r;)e.d.push(+t.slice(s,s+=na));t=t.slice(s),s=na-t.length}else s-=r;for(;s--;)t+="0";if(e.d.push(+t),ua&&(e.e>xw||e.e<-xw))throw Error(UP+a)}else e.s=0,e.e=0,e.d=[0];return e}function Gn(e,t,a){var s,r,i,o,l,c,u,d,f=e.d;for(o=1,i=f[0];i>=10;i/=10)o++;if(s=t-o,s<0)s+=na,r=t,u=f[d=0];else{if(d=Math.ceil((s+1)/na),i=f.length,d>=i)return e;for(u=i=f[d],o=1;i>=10;i/=10)o++;s%=na,r=s-na+o}if(a!==void 0&&(i=tu(10,o-r-1),l=u/i%10|0,c=t<0||f[d+1]!==void 0||u%i,c=a<4?(l||c)&&(a==0||a==(e.s<0?3:2)):l>5||l==5&&(a==4||c||a==6&&(s>0?r>0?u/tu(10,o-r):0:f[d-1])%10&1||a==(e.s<0?8:7))),t<1||!f[0])return c?(i=Ga(e),f.length=1,t=t-i-1,f[0]=tu(10,(na-t%na)%na),e.e=mh(-t/na)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(s==0?(f.length=d,i=1,d--):(f.length=d+1,i=tu(10,na-s),f[d]=r>0?(u/tu(10,o-r)%tu(10,r)|0)*i:0),c)for(;;)if(d==0){(f[0]+=i)==hs&&(f[0]=1,++e.e);break}else{if(f[d]+=i,f[d]!=hs)break;f[d--]=0,i=1}for(s=f.length;f[--s]===0;)f.pop();if(ua&&(e.e>xw||e.e<-xw))throw Error(UP+Ga(e));return e}function XQ(e,t){var a,s,r,i,o,l,c,u,d,f,p=e.constructor,x=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),ua?Gn(t,x):t;if(c=e.d,f=t.d,s=t.e,u=e.e,c=c.slice(),o=u-s,o){for(d=o<0,d?(a=c,o=-o,l=f.length):(a=f,s=u,l=c.length),r=Math.max(Math.ceil(x/na),l)+2,o>r&&(o=r,a.length=1),a.reverse(),r=o;r--;)a.push(0);a.reverse()}else{for(r=c.length,l=f.length,d=r<l,d&&(l=r),r=0;r<l;r++)if(c[r]!=f[r]){d=c[r]<f[r];break}o=0}for(d&&(a=c,c=f,f=a,t.s=-t.s),l=c.length,r=f.length-l;r>0;--r)c[l++]=0;for(r=f.length;r>o;){if(c[--r]<f[r]){for(i=r;i&&c[--i]===0;)c[i]=hs-1;--c[i],c[r]+=hs}c[r]-=f[r]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--s;return c[0]?(t.d=c,t.e=s,ua?Gn(t,x):t):new p(0)}function Bu(e,t,a){var s,r=Ga(e),i=ko(e.d),o=i.length;return t?(a&&(s=a-o)>0?i=i.charAt(0)+"."+i.slice(1)+Wc(s):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(r<0?"e":"e+")+r):r<0?(i="0."+Wc(-r-1)+i,a&&(s=a-o)>0&&(i+=Wc(s))):r>=o?(i+=Wc(r+1-o),a&&(s=a-r-1)>0&&(i=i+"."+Wc(s))):((s=r+1)<o&&(i=i.slice(0,s)+"."+i.slice(s)),a&&(s=a-o)>0&&(r+1===o&&(i+="."),i+=Wc(s))),e.s<0?"-"+i:i}function tU(e,t){if(e.length>t)return e.length=t,!0}function ZQ(e){var t,a,s;function r(i){var o=this;if(!(o instanceof r))return new r(i);if(o.constructor=r,i instanceof r){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Cu+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return eU(o,i.toString())}else if(typeof i!="string")throw Error(Cu+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,qke.test(i))eU(o,i);else throw Error(Cu+i)}if(r.prototype=$t,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.clone=ZQ,r.config=r.set=Wke,e===void 0&&(e={}),e)for(s=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<s.length;)e.hasOwnProperty(a=s[t++])||(e[a]=this[a]);return r.config(e),r}function Wke(e){if(!e||typeof e!="object")throw Error(wi+"Object expected");var t,a,s,r=["precision",1,uh,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<r.length;t+=3)if((s=e[a=r[t]])!==void 0)if(mh(s)===s&&s>=r[t+1]&&s<=r[t+2])this[a]=s;else throw Error(Cu+a+": "+s);if((s=e[a="LN10"])!==void 0)if(s==Math.LN10)this[a]=new this(s);else throw Error(Cu+a+": "+s);return this}var BP=ZQ(Hke);Ir=new BP(1);const $n=BP;var Gke=e=>e,JQ={},eK=e=>e===JQ,nU=e=>function t(){return arguments.length===0||arguments.length===1&&eK(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},tK=(e,t)=>e===1?t:nU(function(){for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];var i=s.filter(o=>o!==JQ).length;return i>=e?t(...s):tK(e-i,nU(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var u=s.map(d=>eK(d)?l.shift():d);return t(...u,...l)}))}),Vke=e=>tK(e.length,e),CE=(e,t)=>{for(var a=[],s=e;s<t;++s)a[s-e]=s;return a},Yke=Vke((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(a=>t[a]).map(e)),Qke=function(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];if(!a.length)return Gke;var r=a.reverse(),i=r[0],o=r.slice(1);return function(){return o.reduce((l,c)=>c(l),i(...arguments))}};function nK(e){var t;return e===0?t=1:t=Math.floor(new $n(e).abs().log(10).toNumber())+1,t}function aK(e,t,a){for(var s=new $n(e),r=0,i=[];s.lt(t)&&r<1e5;)i.push(s.toNumber()),s=s.add(a),r++;return i}var sK=e=>{var[t,a]=e,[s,r]=[t,a];return t>a&&([s,r]=[a,t]),[s,r]},rK=(e,t,a)=>{if(e.lte(0))return new $n(0);var s=nK(e.toNumber()),r=new $n(10).pow(s),i=e.div(r),o=s!==1?.05:.1,l=new $n(Math.ceil(i.div(o).toNumber())).add(a).mul(o),c=l.mul(r);return t?new $n(c.toNumber()):new $n(Math.ceil(c.toNumber()))},Kke=(e,t,a)=>{var s=new $n(1),r=new $n(e);if(!r.isint()&&a){var i=Math.abs(e);i<1?(s=new $n(10).pow(nK(e)-1),r=new $n(Math.floor(r.div(s).toNumber())).mul(s)):i>1&&(r=new $n(Math.floor(e)))}else e===0?r=new $n(Math.floor((t-1)/2)):a||(r=new $n(Math.floor(e)));var o=Math.floor((t-1)/2),l=Qke(Yke(c=>r.add(new $n(c-o).mul(s)).toNumber()),CE);return l(0,t)},iK=function(t,a,s,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((a-t)/(s-1)))return{step:new $n(0),tickMin:new $n(0),tickMax:new $n(0)};var o=rK(new $n(a).sub(t).div(s-1),r,i),l;t<=0&&a>=0?l=new $n(0):(l=new $n(t).add(a).div(2),l=l.sub(new $n(l).mod(o)));var c=Math.ceil(l.sub(t).div(o).toNumber()),u=Math.ceil(new $n(a).sub(l).div(o).toNumber()),d=c+u+1;return d>s?iK(t,a,s,r,i+1):(d<s&&(u=a>0?u+(s-d):u,c=a>0?c:c+(s-d)),{step:o,tickMin:l.sub(new $n(c).mul(o)),tickMax:l.add(new $n(u).mul(o))})},Xke=function(t){var[a,s]=t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(r,2),[l,c]=sK([a,s]);if(l===-1/0||c===1/0){var u=c===1/0?[l,...CE(0,r-1).map(()=>1/0)]:[...CE(0,r-1).map(()=>-1/0),c];return a>s?u.reverse():u}if(l===c)return Kke(l,r,i);var{step:d,tickMin:f,tickMax:p}=iK(l,c,o,i,0),x=aK(f,p.add(new $n(.1).mul(d)),d);return a>s?x.reverse():x},Zke=function(t,a){var[s,r]=t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,l]=sK([s,r]);if(o===-1/0||l===1/0)return[s,r];if(o===l)return[o];var c=Math.max(a,2),u=rK(new $n(l).sub(o).div(c-1),i,0),d=[...aK(new $n(o),new $n(l),u),l];return i===!1&&(d=d.map(f=>Math.round(f))),s>r?d.reverse():d},oK=e=>e.rootProps.maxBarSize,Jke=e=>e.rootProps.barGap,lK=e=>e.rootProps.barCategoryGap,eEe=e=>e.rootProps.barSize,i0=e=>e.rootProps.stackOffset,cK=e=>e.rootProps.reverseStackOrder,HP=e=>e.options.chartName,qP=e=>e.rootProps.syncId,dK=e=>e.rootProps.syncMethod,WP=e=>e.options.eventEmitter,Wa={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},_l={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Or={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},qj=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},tEe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:_l.angleAxisId,includeHidden:!1,name:void 0,reversed:_l.reversed,scale:_l.scale,tick:_l.tick,tickCount:void 0,ticks:void 0,type:_l.type,unit:void 0},nEe={allowDataOverflow:Or.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Or.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Or.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Or.scale,tick:Or.tick,tickCount:Or.tickCount,ticks:void 0,type:Or.type,unit:void 0},aEe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:_l.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:_l.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:_l.scale,tick:_l.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},sEe={allowDataOverflow:Or.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Or.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Or.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Or.scale,tick:Or.tick,tickCount:Or.tickCount,ticks:void 0,type:"category",unit:void 0},GP=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?aEe:tEe,VP=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?sEe:nEe,Wj=e=>e.polarOptions,YP=it([ac,sc,ls],BQ),uK=it([Wj,YP],(e,t)=>{if(e!=null)return Rs(e.innerRadius,t,0)}),mK=it([Wj,YP],(e,t)=>{if(e!=null)return Rs(e.outerRadius,t,t*.8)}),rEe=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:a}=e;return[t,a]},fK=it([Wj],rEe);it([GP,fK],qj);var hK=it([YP,uK,mK],(e,t,a)=>{if(!(e==null||t==null||a==null))return[t,a]});it([VP,hK],qj);var gK=it([wn,Wj,uK,mK,ac,sc],(e,t,a,s,r,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||a==null||s==null)){var{cx:o,cy:l,startAngle:c,endAngle:u}=t;return{cx:Rs(o,r,r/2),cy:Rs(l,i,i/2),innerRadius:a,outerRadius:s,startAngle:c,endAngle:u,clockWise:!1}}}),pa=(e,t)=>t,o0=(e,t,a)=>a;function QP(e){return e?.id}function pK(e,t,a){var{chartData:s=[]}=t,{allowDuplicatedCategory:r,dataKey:i}=a,o=new Map;return e.forEach(l=>{var c,u=(c=l.data)!==null&&c!==void 0?c:s;if(!(u==null||u.length===0)){var d=QP(l);u.forEach((f,p)=>{var x=i==null||r?p:String(Hn(f,i,null)),y=Hn(f,l.dataKey,0),N;o.has(x)?N=o.get(x):N={},Object.assign(N,{[d]:y}),o.set(x,N)})}}),Array.from(o.values())}function Gj(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var Vj=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Yj(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function iEe(e,t){if(e.length===t.length){for(var a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}return!1}var cs=e=>{var t=wn(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},fh=e=>e.tooltip.settings.axisId;function aU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function yw(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?aU(Object(a),!0).forEach(function(s){oEe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):aU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function oEe(e,t,a){return(t=lEe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function lEe(e){var t=cEe(e,"string");return typeof t=="symbol"?t:t+""}function cEe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var SE=[0,"auto"],ms={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},xK=(e,t)=>e.cartesianAxis.xAxis[t],ic=(e,t)=>{var a=xK(e,t);return a??ms},fs={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:SE,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:n0},yK=(e,t)=>e.cartesianAxis.yAxis[t],oc=(e,t)=>{var a=yK(e,t);return a??fs},dEe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},KP=(e,t)=>{var a=e.cartesianAxis.zAxis[t];return a??dEe},ba=(e,t,a)=>{switch(t){case"xAxis":return ic(e,a);case"yAxis":return oc(e,a);case"zAxis":return KP(e,a);case"angleAxis":return GP(e,a);case"radiusAxis":return VP(e,a);default:throw new Error("Unexpected axis type: ".concat(t))}},uEe=(e,t,a)=>{switch(t){case"xAxis":return ic(e,a);case"yAxis":return oc(e,a);default:throw new Error("Unexpected axis type: ".concat(t))}},l0=(e,t,a)=>{switch(t){case"xAxis":return ic(e,a);case"yAxis":return oc(e,a);case"angleAxis":return GP(e,a);case"radiusAxis":return VP(e,a);default:throw new Error("Unexpected axis type: ".concat(t))}},bK=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function XP(e,t){return a=>{switch(e){case"xAxis":return"xAxisId"in a&&a.xAxisId===t;case"yAxis":return"yAxisId"in a&&a.yAxisId===t;case"zAxis":return"zAxisId"in a&&a.zAxisId===t;case"angleAxis":return"angleAxisId"in a&&a.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in a&&a.radiusAxisId===t;default:return!1}}}var Qj=e=>e.graphicalItems.cartesianItems,mEe=it([pa,o0],XP),ZP=(e,t,a)=>e.filter(a).filter(s=>t?.includeHidden===!0?!0:!s.hide),c0=it([Qj,ba,mEe],ZP,{memoizeOptions:{resultEqualityCheck:Yj}}),vK=it([c0],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Gj)),wK=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),fEe=it([c0],wK),JP=e=>e.map(t=>t.data).filter(Boolean).flat(1),hEe=it([c0],JP,{memoizeOptions:{resultEqualityCheck:Yj}}),eD=(e,t)=>{var{chartData:a=[],dataStartIndex:s,dataEndIndex:r}=t;return e.length>0?e:a.slice(s,r+1)},tD=it([hEe,FP],eD),nD=(e,t,a)=>t?.dataKey!=null?e.map(s=>({value:Hn(s,t.dataKey)})):a.length>0?a.map(s=>s.dataKey).flatMap(s=>e.map(r=>({value:Hn(r,s)}))):e.map(s=>({value:s})),Kj=it([tD,ba,c0],nD);function NK(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function lv(e){if(Fo(e)||e instanceof Date){var t=Number(e);if(xa(t))return t}}function sU(e){if(Array.isArray(e)){var t=[lv(e[0]),lv(e[1])];return fd(t)?t:void 0}var a=lv(e);if(a!=null)return[a,a]}function Yl(e){return e.map(lv).filter(KSe)}function gEe(e,t,a){return!a||typeof t!="number"||Ki(t)?[]:a.length?Yl(a.flatMap(s=>{var r=Hn(e,s.dataKey),i,o;if(Array.isArray(r)?[i,o]=r:i=o=r,!(!xa(i)||!xa(o)))return[t-i,t+o]})):[]}var ds=e=>{var t=cs(e),a=fh(e);return l0(e,t,a)},d0=it([ds],e=>e?.dataKey),pEe=it([vK,FP,ds],pK),jK=(e,t,a,s)=>{var r={},i=t.reduce((o,l)=>{if(l.stackId==null)return o;var c=o[l.stackId];return c==null&&(c=[]),c.push(l),o[l.stackId]=c,o},r);return Object.fromEntries(Object.entries(i).map(o=>{var[l,c]=o,u=s?[...c].reverse():c,d=u.map(QP);return[l,{stackedData:lAe(e,d,a),graphicalItems:u}]}))},_E=it([pEe,vK,i0,cK],jK),CK=(e,t,a,s)=>{var{dataStartIndex:r,dataEndIndex:i}=t;if(s==null&&a!=="zAxis"){var o=fAe(e,r,i);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},xEe=it([ba],e=>e.allowDataOverflow),aD=e=>{var t;if(e==null||!("domain"in e))return SE;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var a=Yl(e.ticks);return[Math.min(...a),Math.max(...a)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:SE},sD=it([ba],aD),rD=it([sD,xEe],VQ),yEe=it([_E,rc,pa,rD],CK,{memoizeOptions:{resultEqualityCheck:Vj}}),Xj=e=>e.errorBars,bEe=(e,t,a)=>e.flatMap(s=>t[s.id]).filter(Boolean).filter(s=>NK(a,s)),bw=function(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];var r=a.filter(Boolean);if(r.length!==0){var i=r.flat(),o=Math.min(...i),l=Math.max(...i);return[o,l]}},iD=(e,t,a,s,r)=>{var i,o;if(a.length>0&&e.forEach(l=>{a.forEach(c=>{var u,d,f=(u=s[c.id])===null||u===void 0?void 0:u.filter(j=>NK(r,j)),p=Hn(l,(d=t.dataKey)!==null&&d!==void 0?d:c.dataKey),x=gEe(l,p,f);if(x.length>=2){var y=Math.min(...x),N=Math.max(...x);(i==null||y<i)&&(i=y),(o==null||N>o)&&(o=N)}var v=sU(p);v!=null&&(i=i==null?v[0]:Math.min(i,v[0]),o=o==null?v[1]:Math.max(o,v[1]))})}),t?.dataKey!=null&&e.forEach(l=>{var c=sU(Hn(l,t.dataKey));c!=null&&(i=i==null?c[0]:Math.min(i,c[0]),o=o==null?c[1]:Math.max(o,c[1]))}),xa(i)&&xa(o))return[i,o]},vEe=it([tD,ba,fEe,Xj,pa],iD,{memoizeOptions:{resultEqualityCheck:Vj}});function wEe(e){var{value:t}=e;if(Fo(t)||t instanceof Date)return t}var NEe=(e,t,a)=>{var s=e.map(wEe).filter(r=>r!=null);return a&&(t.dataKey==null||t.allowDuplicatedCategory&&wY(s))?GQ(0,e.length):t.allowDuplicatedCategory?s:Array.from(new Set(s))},SK=e=>e.referenceElements.dots,hh=(e,t,a)=>e.filter(s=>s.ifOverflow==="extendDomain").filter(s=>t==="xAxis"?s.xAxisId===a:s.yAxisId===a),jEe=it([SK,pa,o0],hh),_K=e=>e.referenceElements.areas,CEe=it([_K,pa,o0],hh),AK=e=>e.referenceElements.lines,SEe=it([AK,pa,o0],hh),TK=(e,t)=>{if(e!=null){var a=Yl(e.map(s=>t==="xAxis"?s.x:s.y));if(a.length!==0)return[Math.min(...a),Math.max(...a)]}},_Ee=it(jEe,pa,TK),kK=(e,t)=>{if(e!=null){var a=Yl(e.flatMap(s=>[t==="xAxis"?s.x1:s.y1,t==="xAxis"?s.x2:s.y2]));if(a.length!==0)return[Math.min(...a),Math.max(...a)]}},AEe=it([CEe,pa],kK);function TEe(e){var t;if(e.x!=null)return Yl([e.x]);var a=(t=e.segment)===null||t===void 0?void 0:t.map(s=>s.x);return a==null||a.length===0?[]:Yl(a)}function kEe(e){var t;if(e.y!=null)return Yl([e.y]);var a=(t=e.segment)===null||t===void 0?void 0:t.map(s=>s.y);return a==null||a.length===0?[]:Yl(a)}var EK=(e,t)=>{if(e!=null){var a=e.flatMap(s=>t==="xAxis"?TEe(s):kEe(s));if(a.length!==0)return[Math.min(...a),Math.max(...a)]}},EEe=it([SEe,pa],EK),LEe=it(_Ee,EEe,AEe,(e,t,a)=>bw(e,a,t)),oD=(e,t,a,s,r,i,o,l)=>{if(a!=null)return a;var c=o==="vertical"&&l==="xAxis"||o==="horizontal"&&l==="yAxis",u=c?bw(s,i,r):bw(i,r);return Bke(t,u,e.allowDataOverflow)},PEe=it([ba,sD,rD,yEe,vEe,LEe,wn,pa],oD,{memoizeOptions:{resultEqualityCheck:Vj}}),DEe=[0,1],lD=(e,t,a,s,r,i,o)=>{if(!((e==null||a==null||a.length===0)&&o===void 0)){var{dataKey:l,type:c}=e,u=kd(t,i);if(u&&l==null){var d;return GQ(0,(d=a?.length)!==null&&d!==void 0?d:0)}return c==="category"?NEe(s,e,u):r==="expand"?DEe:o}},cD=it([ba,wn,tD,Kj,i0,pa,PEe],lD),LK=(e,t,a,s,r)=>{if(e!=null){var{scale:i,type:o}=e;if(i==="auto")return t==="radial"&&r==="radiusAxis"?"band":t==="radial"&&r==="angleAxis"?"linear":o==="category"&&s&&(s.indexOf("LineChart")>=0||s.indexOf("AreaChart")>=0||s.indexOf("ComposedChart")>=0&&!a)?"point":o==="category"?"band":"linear";if(typeof i=="string"){var l="scale".concat(Kx(i));return l in Wg?l:"point"}}},gh=it([ba,wn,bK,HP,pa],LK);function OEe(e){if(e!=null){if(e in Wg)return Wg[e]();var t="scale".concat(Kx(e));if(t in Wg)return Wg[t]()}}function dD(e,t,a,s){if(!(a==null||s==null)){if(typeof e.scale=="function")return e.scale.copy().domain(a).range(s);var r=OEe(t);if(r!=null){var i=r.domain(a).range(s);return aAe(i),i}}}var uD=(e,t,a)=>{var s=aD(t);if(!(a!=="auto"&&a!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(s)&&(s[0]==="auto"||s[1]==="auto")&&fd(e))return Xke(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&fd(e))return Zke(e,t.tickCount,t.allowDecimals)}},mD=it([cD,l0,gh],uD),fD=(e,t,a,s)=>{if(s!=="angleAxis"&&e?.type==="number"&&fd(t)&&Array.isArray(a)&&a.length>0){var r=t[0],i=a[0],o=t[1],l=a[a.length-1];return[Math.min(r,i),Math.max(o,l)]}return t},MEe=it([ba,cD,mD,pa],fD),IEe=it(Kj,ba,(e,t)=>{if(!(!t||t.type!=="number")){var a=1/0,s=Array.from(Yl(e.map(f=>f.value))).sort((f,p)=>f-p),r=s[0],i=s[s.length-1];if(r==null||i==null)return 1/0;var o=i-r;if(o===0)return 1/0;for(var l=0;l<s.length-1;l++){var c=s[l],u=s[l+1];if(!(c==null||u==null)){var d=u-c;a=Math.min(a,d)}}return a/o}}),PK=it(IEe,wn,lK,ls,(e,t,a,s,r)=>r,(e,t,a,s,r)=>{if(!xa(e))return 0;var i=t==="vertical"?s.height:s.width;if(r==="gap")return e*i/2;if(r==="no-gap"){var o=Rs(a,e*i),l=e*i/2;return l-o-(l-o)/i*o}return 0}),$Ee=(e,t,a)=>{var s=ic(e,t);return s==null||typeof s.padding!="string"?0:PK(e,"xAxis",t,a,s.padding)},REe=(e,t,a)=>{var s=oc(e,t);return s==null||typeof s.padding!="string"?0:PK(e,"yAxis",t,a,s.padding)},zEe=it(ic,$Ee,(e,t)=>{var a,s;if(e==null)return{left:0,right:0};var{padding:r}=e;return typeof r=="string"?{left:t,right:t}:{left:((a=r.left)!==null&&a!==void 0?a:0)+t,right:((s=r.right)!==null&&s!==void 0?s:0)+t}}),FEe=it(oc,REe,(e,t)=>{var a,s;if(e==null)return{top:0,bottom:0};var{padding:r}=e;return typeof r=="string"?{top:t,bottom:t}:{top:((a=r.top)!==null&&a!==void 0?a:0)+t,bottom:((s=r.bottom)!==null&&s!==void 0?s:0)+t}}),UEe=it([ls,zEe,Ij,Mj,(e,t,a)=>a],(e,t,a,s,r)=>{var{padding:i}=s;return r?[i.left,a.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),BEe=it([ls,wn,FEe,Ij,Mj,(e,t,a)=>a],(e,t,a,s,r,i)=>{var{padding:o}=r;return i?[s.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-a.bottom,e.top+a.top]:[e.top+a.top,e.top+e.height-a.bottom]}),u0=(e,t,a,s)=>{var r;switch(t){case"xAxis":return UEe(e,a,s);case"yAxis":return BEe(e,a,s);case"zAxis":return(r=KP(e,a))===null||r===void 0?void 0:r.range;case"angleAxis":return fK(e);case"radiusAxis":return hK(e,a);default:return}},DK=it([ba,u0],qj),Zj=it([ba,gh,MEe,DK],dD);it([c0,Xj,pa],bEe);function OK(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Jj=(e,t)=>t,e1=(e,t,a)=>a,HEe=it(Dj,Jj,e1,(e,t,a)=>e.filter(s=>s.orientation===t).filter(s=>s.mirror===a).sort(OK)),qEe=it(Oj,Jj,e1,(e,t,a)=>e.filter(s=>s.orientation===t).filter(s=>s.mirror===a).sort(OK)),MK=(e,t)=>({width:e.width,height:t.height}),WEe=(e,t)=>{var a=typeof t.width=="number"?t.width:n0;return{width:a,height:e.height}},IK=it(ls,ic,MK),GEe=(e,t,a)=>{switch(t){case"top":return e.top;case"bottom":return a-e.bottom;default:return 0}},VEe=(e,t,a)=>{switch(t){case"left":return e.left;case"right":return a-e.right;default:return 0}},YEe=it(sc,ls,HEe,Jj,e1,(e,t,a,s,r)=>{var i={},o;return a.forEach(l=>{var c=MK(t,l);o==null&&(o=GEe(t,s,e));var u=s==="top"&&!r||s==="bottom"&&r;i[l.id]=o-Number(u)*c.height,o+=(u?-1:1)*c.height}),i}),QEe=it(ac,ls,qEe,Jj,e1,(e,t,a,s,r)=>{var i={},o;return a.forEach(l=>{var c=WEe(t,l);o==null&&(o=VEe(t,s,e));var u=s==="left"&&!r||s==="right"&&r;i[l.id]=o-Number(u)*c.width,o+=(u?-1:1)*c.width}),i}),KEe=(e,t)=>{var a=ic(e,t);if(a!=null)return YEe(e,a.orientation,a.mirror)},XEe=it([ls,ic,KEe,(e,t)=>t],(e,t,a,s)=>{if(t!=null){var r=a?.[s];return r==null?{x:e.left,y:0}:{x:e.left,y:r}}}),ZEe=(e,t)=>{var a=oc(e,t);if(a!=null)return QEe(e,a.orientation,a.mirror)},JEe=it([ls,oc,ZEe,(e,t)=>t],(e,t,a,s)=>{if(t!=null){var r=a?.[s];return r==null?{x:0,y:e.top}:{x:r,y:e.top}}}),$K=it(ls,oc,(e,t)=>{var a=typeof t.width=="number"?t.width:n0;return{width:a,height:e.height}}),rU=(e,t,a)=>{switch(t){case"xAxis":return IK(e,a).width;case"yAxis":return $K(e,a).height;default:return}},RK=(e,t,a,s)=>{if(a!=null){var{allowDuplicatedCategory:r,type:i,dataKey:o}=a,l=kd(e,s),c=t.map(u=>u.value);if(o&&l&&i==="category"&&r&&wY(c))return c}},hD=it([wn,Kj,ba,pa],RK),zK=(e,t,a,s)=>{if(!(a==null||a.dataKey==null)){var{type:r,scale:i}=a,o=kd(e,s);if(o&&(r==="number"||i!=="auto"))return t.map(l=>l.value)}},gD=it([wn,Kj,l0,pa],zK),iU=it([wn,uEe,gh,Zj,hD,gD,u0,mD,pa],(e,t,a,s,r,i,o,l,c)=>{if(t!=null){var u=kd(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:i,duplicateDomain:r,isCategorical:u,niceTicks:l,range:o,realScaleType:a,scale:s}}}),eLe=(e,t,a,s,r,i,o,l,c)=>{if(!(t==null||s==null)){var u=kd(e,c),{type:d,ticks:f,tickCount:p}=t,x=a==="scaleBand"&&typeof s.bandwidth=="function"?s.bandwidth()/2:2,y=d==="category"&&s.bandwidth?s.bandwidth()/x:0;y=c==="angleAxis"&&i!=null&&i.length>=2?xs(i[0]-i[1])*2*y:y;var N=f||r;if(N){var v=N.map((j,w)=>{var S=o?o.indexOf(j):j;return{index:w,coordinate:s(S)+y,value:j,offset:y}});return v.filter(j=>xa(j.coordinate))}return u&&l?l.map((j,w)=>({coordinate:s(j)+y,value:j,index:w,offset:y})).filter(j=>xa(j.coordinate)):s.ticks?s.ticks(p).map(j=>({coordinate:s(j)+y,value:j,offset:y})):s.domain().map((j,w)=>({coordinate:s(j)+y,value:o?o[j]:j,index:w,offset:y}))}},FK=it([wn,l0,gh,Zj,mD,u0,hD,gD,pa],eLe),tLe=(e,t,a,s,r,i,o)=>{if(!(t==null||a==null||s==null||s[0]===s[1])){var l=kd(e,o),{tickCount:c}=t,u=0;return u=o==="angleAxis"&&s?.length>=2?xs(s[0]-s[1])*2*u:u,l&&i?i.map((d,f)=>({coordinate:a(d)+u,value:d,index:f,offset:u})):a.ticks?a.ticks(c).map(d=>({coordinate:a(d)+u,value:d,offset:u})):a.domain().map((d,f)=>({coordinate:a(d)+u,value:r?r[d]:d,index:f,offset:u}))}},hd=it([wn,l0,Zj,u0,hD,gD,pa],tLe),gd=it(ba,Zj,(e,t)=>{if(!(e==null||t==null))return yw(yw({},e),{},{scale:t})}),nLe=it([ba,gh,cD,DK],dD);it((e,t,a)=>KP(e,a),nLe,(e,t)=>{if(!(e==null||t==null))return yw(yw({},e),{},{scale:t})});var aLe=it([wn,Dj,Oj],(e,t,a)=>{switch(e){case"horizontal":return t.some(s=>s.reversed)?"right-to-left":"left-to-right";case"vertical":return a.some(s=>s.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),UK=e=>e.options.defaultTooltipEventType,BK=e=>e.options.validateTooltipEventTypes;function HK(e,t,a){if(e==null)return t;var s=e?"axis":"item";return a==null?t:a.includes(s)?s:t}function pD(e,t){var a=UK(e),s=BK(e);return HK(t,a,s)}function sLe(e){return Ut(t=>pD(t,e))}var qK=(e,t)=>{var a,s=Number(t);if(!(Ki(s)||t==null))return s>=0?e==null||(a=e[s])===null||a===void 0?void 0:a.value:void 0},rLe=e=>e.tooltip.settings,Yc={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},iLe={itemInteraction:{click:Yc,hover:Yc},axisInteraction:{click:Yc,hover:Yc},keyboardInteraction:Yc,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},WK=jr({name:"tooltip",initialState:iLe,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:ca()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:a,next:s}=t.payload,r=Wi(e).tooltipItemPayloads.indexOf(a);r>-1&&(e.tooltipItemPayloads[r]=s)},prepare:ca()},removeTooltipEntrySettings:{reducer(e,t){var a=Wi(e).tooltipItemPayloads.indexOf(t.payload);a>-1&&e.tooltipItemPayloads.splice(a,1)},prepare:ca()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:oLe,replaceTooltipEntrySettings:lLe,removeTooltipEntrySettings:cLe,setTooltipSettingsState:dLe,setActiveMouseOverItemIndex:GK,mouseLeaveItem:uLe,mouseLeaveChart:VK,setActiveClickItemIndex:mLe,setMouseOverAxisIndex:YK,setMouseClickAxisIndex:fLe,setSyncInteraction:AE,setKeyboardInteraction:TE}=WK.actions,hLe=WK.reducer;function oU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function cb(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?oU(Object(a),!0).forEach(function(s){gLe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):oU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function gLe(e,t,a){return(t=pLe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function pLe(e){var t=xLe(e,"string");return typeof t=="symbol"?t:t+""}function xLe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yLe(e,t,a){return t==="axis"?a==="click"?e.axisInteraction.click:e.axisInteraction.hover:a==="click"?e.itemInteraction.click:e.itemInteraction.hover}function bLe(e){return e.index!=null}var QK=(e,t,a,s)=>{if(t==null)return Yc;var r=yLe(e,t,a);if(r==null)return Yc;if(r.active)return r;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(bLe(r)){if(i)return cb(cb({},r),{},{active:!0})}else if(s!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:s,graphicalItemId:void 0};return cb(cb({},Yc),{},{coordinate:r.coordinate})};function vLe(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var a=Number(e);return Number.isFinite(a)?a:void 0}function wLe(e,t){var a=vLe(e),s=t[0],r=t[1];if(a===void 0)return!1;var i=Math.min(s,r),o=Math.max(s,r);return a>=i&&a<=o}function NLe(e,t,a){if(a==null||t==null)return!0;var s=Hn(e,t);return s==null||!fd(a)?!0:wLe(s,a)}var xD=(e,t,a,s)=>{var r=e?.index;if(r==null)return null;var i=Number(r);if(!xa(i))return r;var o=0,l=1/0;t.length>0&&(l=t.length-1);var c=Math.max(o,Math.min(i,l)),u=t[c];return u==null||NLe(u,a,s)?String(c):null},KK=(e,t,a,s,r,i,o,l)=>{if(!(i==null||l==null)){var c=o[0],u=c==null?void 0:l(c.positions,i);if(u!=null)return u;var d=r?.[Number(i)];if(d)return a==="horizontal"?{x:d.coordinate,y:(s.top+t)/2}:{x:(s.left+e)/2,y:d.coordinate}}},XK=(e,t,a,s)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var r;if(a==="hover"?r=e.itemInteraction.hover.graphicalItemId:r=e.itemInteraction.click.graphicalItemId,r==null&&s!=null){var i=e.tooltipItemPayloads[0];return i!=null?[i]:[]}return e.tooltipItemPayloads.filter(o=>{var l;return((l=o.settings)===null||l===void 0?void 0:l.graphicalItemId)===r})},m0=e=>e.options.tooltipPayloadSearcher,ph=e=>e.tooltip;function lU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function cU(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?lU(Object(a),!0).forEach(function(s){jLe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):lU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function jLe(e,t,a){return(t=CLe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function CLe(e){var t=SLe(e,"string");return typeof t=="symbol"?t:t+""}function SLe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _Le(e,t){return e??t}var ZK=(e,t,a,s,r,i,o)=>{if(!(t==null||i==null)){var{chartData:l,computedData:c,dataStartIndex:u,dataEndIndex:d}=a,f=[];return e.reduce((p,x)=>{var y,{dataDefinedOnItem:N,settings:v}=x,j=_Le(N,l),w=Array.isArray(j)?hQ(j,u,d):j,S=(y=v?.dataKey)!==null&&y!==void 0?y:s,_=v?.nameKey,E;if(s&&Array.isArray(w)&&!Array.isArray(w[0])&&o==="axis"?E=NY(w,s,r):E=i(w,t,c,_),Array.isArray(E))E.forEach(A=>{var L=cU(cU({},v),{},{name:A.name,unit:A.unit,color:void 0,fill:void 0});p.push(Qz({tooltipEntrySettings:L,dataKey:A.dataKey,payload:A.payload,value:Hn(A.payload,A.dataKey),name:A.name}))});else{var T;p.push(Qz({tooltipEntrySettings:v,dataKey:S,payload:E,value:Hn(E,S),name:(T=Hn(E,_))!==null&&T!==void 0?T:v?.name}))}return p},f)}},yD=it([ds,wn,bK,HP,cs],LK),ALe=it([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),TLe=it([cs,fh],XP),xh=it([ALe,ds,TLe],ZP,{memoizeOptions:{resultEqualityCheck:Yj}}),kLe=it([xh],e=>e.filter(Gj)),ELe=it([xh],JP,{memoizeOptions:{resultEqualityCheck:Yj}}),yh=it([ELe,rc],eD),LLe=it([kLe,rc,ds],pK),bD=it([yh,ds,xh],nD),JK=it([ds],aD),PLe=it([ds],e=>e.allowDataOverflow),eX=it([JK,PLe],VQ),DLe=it([xh],e=>e.filter(Gj)),OLe=it([LLe,DLe,i0,cK],jK),MLe=it([OLe,rc,cs,eX],CK),ILe=it([xh],wK),$Le=it([yh,ds,ILe,Xj,cs],iD,{memoizeOptions:{resultEqualityCheck:Vj}}),RLe=it([SK,cs,fh],hh),zLe=it([RLe,cs],TK),FLe=it([_K,cs,fh],hh),ULe=it([FLe,cs],kK),BLe=it([AK,cs,fh],hh),HLe=it([BLe,cs],EK),qLe=it([zLe,HLe,ULe],bw),WLe=it([ds,JK,eX,MLe,$Le,qLe,wn,cs],oD),f0=it([ds,wn,yh,bD,i0,cs,WLe],lD),GLe=it([f0,ds,yD],uD),VLe=it([ds,f0,GLe,cs],fD),tX=e=>{var t=cs(e),a=fh(e),s=!1;return u0(e,t,a,s)},nX=it([ds,tX],qj),aX=it([ds,yD,VLe,nX],dD),YLe=it([wn,bD,ds,cs],RK),QLe=it([wn,bD,ds,cs],zK),KLe=(e,t,a,s,r,i,o,l)=>{if(t){var{type:c}=t,u=kd(e,l);if(s){var d=a==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,f=c==="category"&&s.bandwidth?s.bandwidth()/d:0;return f=l==="angleAxis"&&r!=null&&r?.length>=2?xs(r[0]-r[1])*2*f:f,u&&o?o.map((p,x)=>({coordinate:s(p)+f,value:p,index:x,offset:f})):s.domain().map((p,x)=>({coordinate:s(p)+f,value:i?i[p]:p,index:x,offset:f}))}}},lc=it([wn,ds,yD,aX,tX,YLe,QLe,cs],KLe),vD=it([UK,BK,rLe],(e,t,a)=>HK(a.shared,e,t)),sX=e=>e.tooltip.settings.trigger,wD=e=>e.tooltip.settings.defaultIndex,h0=it([ph,vD,sX,wD],QK),pd=it([h0,yh,d0,f0],xD),rX=it([lc,pd],qK),ND=it([h0],e=>{if(e)return e.dataKey}),XLe=it([h0],e=>{if(e)return e.graphicalItemId}),iX=it([ph,vD,sX,wD],XK),ZLe=it([ac,sc,wn,ls,lc,wD,iX,m0],KK),JLe=it([h0,ZLe],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),e4e=it([h0],e=>{var t;return(t=e?.active)!==null&&t!==void 0?t:!1}),t4e=it([iX,pd,rc,d0,rX,m0,vD],ZK),n4e=it([t4e],e=>{if(e!=null){var t=e.map(a=>a.payload).filter(a=>a!=null);return Array.from(new Set(t))}});function dU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function uU(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?dU(Object(a),!0).forEach(function(s){a4e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):dU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function a4e(e,t,a){return(t=s4e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s4e(e){var t=r4e(e,"string");return typeof t=="symbol"?t:t+""}function r4e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var i4e=()=>Ut(ds),o4e=()=>{var e=i4e(),t=Ut(lc),a=Ut(aX);return Uf(!e||!a?void 0:uU(uU({},e),{},{scale:a}),t)};function mU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Zm(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?mU(Object(a),!0).forEach(function(s){l4e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):mU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function l4e(e,t,a){return(t=c4e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function c4e(e){var t=d4e(e,"string");return typeof t=="symbol"?t:t+""}function d4e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var u4e=(e,t,a,s)=>{var r=t.find(i=>i&&i.index===a);if(r){if(e==="horizontal")return{x:r.coordinate,y:s.chartY};if(e==="vertical")return{x:s.chartX,y:r.coordinate}}return{x:0,y:0}},m4e=(e,t,a,s)=>{var r=t.find(u=>u&&u.index===a);if(r){if(e==="centric"){var i=r.coordinate,{radius:o}=s;return Zm(Zm(Zm({},s),qa(s.cx,s.cy,o,i)),{},{angle:i,radius:o})}var l=r.coordinate,{angle:c}=s;return Zm(Zm(Zm({},s),qa(s.cx,s.cy,l,c)),{},{angle:c,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function f4e(e,t){var{chartX:a,chartY:s}=e;return a>=t.left&&a<=t.left+t.width&&s>=t.top&&s<=t.top+t.height}var oX=(e,t,a,s,r)=>{var i,o=(i=t?.length)!==null&&i!==void 0?i:0;if(o<=1||e==null)return 0;if(s==="angleAxis"&&r!=null&&Math.abs(Math.abs(r[1]-r[0])-360)<=1e-6)for(var l=0;l<o;l++){var c,u,d,f,p,x=l>0?(c=a[l-1])===null||c===void 0?void 0:c.coordinate:(u=a[o-1])===null||u===void 0?void 0:u.coordinate,y=(d=a[l])===null||d===void 0?void 0:d.coordinate,N=l>=o-1?(f=a[0])===null||f===void 0?void 0:f.coordinate:(p=a[l+1])===null||p===void 0?void 0:p.coordinate,v=void 0;if(!(x==null||y==null||N==null))if(xs(y-x)!==xs(N-y)){var j=[];if(xs(N-y)===xs(r[1]-r[0])){v=N;var w=y+r[1]-r[0];j[0]=Math.min(w,(w+x)/2),j[1]=Math.max(w,(w+x)/2)}else{v=x;var S=N+r[1]-r[0];j[0]=Math.min(y,(S+y)/2),j[1]=Math.max(y,(S+y)/2)}var _=[Math.min(y,(v+y)/2),Math.max(y,(v+y)/2)];if(e>_[0]&&e<=_[1]||e>=j[0]&&e<=j[1]){var E;return(E=a[l])===null||E===void 0?void 0:E.index}}else{var T=Math.min(x,N),A=Math.max(x,N);if(e>(T+y)/2&&e<=(A+y)/2){var L;return(L=a[l])===null||L===void 0?void 0:L.index}}}else if(t)for(var M=0;M<o;M++){var F=t[M];if(F!=null){var $=t[M+1],D=t[M-1];if(M===0&&$!=null&&e<=(F.coordinate+$.coordinate)/2||M===o-1&&D!=null&&e>(F.coordinate+D.coordinate)/2||M>0&&M<o-1&&D!=null&&$!=null&&e>(F.coordinate+D.coordinate)/2&&e<=(F.coordinate+$.coordinate)/2)return F.index}}return-1},h4e=()=>Ut(HP),jD=(e,t)=>t,lX=(e,t,a)=>a,CD=(e,t,a,s)=>s,g4e=it(lc,e=>Cj(e,t=>t.coordinate)),SD=it([ph,jD,lX,CD],QK),_D=it([SD,yh,d0,f0],xD),p4e=(e,t,a)=>{if(t!=null){var s=ph(e);return t==="axis"?a==="hover"?s.axisInteraction.hover.dataKey:s.axisInteraction.click.dataKey:a==="hover"?s.itemInteraction.hover.dataKey:s.itemInteraction.click.dataKey}},cX=it([ph,jD,lX,CD],XK),vw=it([ac,sc,wn,ls,lc,CD,cX,m0],KK),x4e=it([SD,vw],(e,t)=>{var a;return(a=e.coordinate)!==null&&a!==void 0?a:t}),dX=it([lc,_D],qK),y4e=it([cX,_D,rc,d0,dX,m0,jD],ZK),b4e=it([SD,_D],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),v4e=(e,t,a,s,r,i,o)=>{if(!(!e||!a||!s||!r)&&f4e(e,o)){var l=hAe(e,t),c=oX(l,i,r,a,s),u=u4e(t,r,c,e);return{activeIndex:String(c),activeCoordinate:u}}},w4e=(e,t,a,s,r,i,o)=>{if(!(!e||!s||!r||!i||!a)){var l=Lke(e,a);if(l){var c=gAe(l,t),u=oX(c,o,i,s,r),d=m4e(t,i,u,l);return{activeIndex:String(u),activeCoordinate:d}}}},N4e=(e,t,a,s,r,i,o,l)=>{if(!(!e||!t||!s||!r||!i))return t==="horizontal"||t==="vertical"?v4e(e,t,s,r,i,o,l):w4e(e,t,a,s,r,i,o)},j4e=it(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,a)=>a,(e,t,a)=>{if(t!=null){var s=e[t];if(s!=null)return a?s.panoramaElement:s.element}}),C4e=it(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(s=>parseInt(s,10)).concat(Object.values(Wa)),a=Array.from(new Set(t));return a.sort((s,r)=>s-r)},{memoizeOptions:{resultEqualityCheck:iEe}});function fU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function hU(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?fU(Object(a),!0).forEach(function(s){S4e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):fU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function S4e(e,t,a){return(t=_4e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _4e(e){var t=A4e(e,"string");return typeof t=="symbol"?t:t+""}function A4e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var T4e={},k4e={zIndexMap:Object.values(Wa).reduce((e,t)=>hU(hU({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),T4e)},E4e=new Set(Object.values(Wa));function L4e(e){return E4e.has(e)}var uX=jr({name:"zIndex",initialState:k4e,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:a}=t.payload;e.zIndexMap[a]?e.zIndexMap[a].consumers+=1:e.zIndexMap[a]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:ca()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:a}=t.payload;e.zIndexMap[a]&&(e.zIndexMap[a].consumers-=1,e.zIndexMap[a].consumers<=0&&!L4e(a)&&delete e.zIndexMap[a])},prepare:ca()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:a,element:s,isPanorama:r}=t.payload;e.zIndexMap[a]?r?e.zIndexMap[a].panoramaElement=s:e.zIndexMap[a].element=s:e.zIndexMap[a]={consumers:0,element:r?void 0:s,panoramaElement:r?s:void 0}},prepare:ca()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:a}=t.payload;e.zIndexMap[a]&&(t.payload.isPanorama?e.zIndexMap[a].panoramaElement=void 0:e.zIndexMap[a].element=void 0)},prepare:ca()}}}),{registerZIndexPortal:P4e,unregisterZIndexPortal:D4e,registerZIndexPortalElement:O4e,unregisterZIndexPortalElement:M4e}=uX.actions,I4e=uX.reducer;function Cr(e){var{zIndex:t,children:a}=e,s=GAe(),r=s&&t!==void 0&&t!==0,i=Bs(),o=Zn();h.useLayoutEffect(()=>r?(o(P4e({zIndex:t})),()=>{o(D4e({zIndex:t}))}):Xx,[o,t,r]);var l=Ut(c=>j4e(c,t,i));return r?l?Hi.createPortal(a,l):null:a}function kE(){return kE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},kE.apply(null,arguments)}function gU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function db(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?gU(Object(a),!0).forEach(function(s){$4e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):gU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function $4e(e,t,a){return(t=R4e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function R4e(e){var t=z4e(e,"string");return typeof t=="symbol"?t:t+""}function z4e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function F4e(e){var{cursor:t,cursorComp:a,cursorProps:s}=e;return h.isValidElement(t)?h.cloneElement(t,s):h.createElement(a,s)}function U4e(e){var t,{coordinate:a,payload:s,index:r,offset:i,tooltipAxisBandSize:o,layout:l,cursor:c,tooltipEventType:u,chartName:d}=e,f=a,p=s,x=r;if(!c||!f||d!=="ScatterChart"&&u!=="axis")return null;var y,N,v;if(d==="ScatterChart")y=f,N=WTe,v=Wa.cursorLine;else if(d==="BarChart")y=GTe(l,f,i,o),N=UQ,v=Wa.cursorRectangle;else if(l==="radial"&&CY(f)){var{cx:j,cy:w,radius:S,startAngle:_,endAngle:E}=HQ(f);y={cx:j,cy:w,startAngle:_,endAngle:E,innerRadius:S,outerRadius:S},N=WQ,v=Wa.cursorLine}else y={points:Mke(l,f,i)},N=zP,v=Wa.cursorLine;var T=typeof c=="object"&&"className"in c?c.className:void 0,A=db(db(db(db({stroke:"#ccc",pointerEvents:"none"},i),y),$u(c)),{},{payload:p,payloadIndex:x,className:Mt("recharts-tooltip-cursor",T)});return h.createElement(Cr,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:v},h.createElement(F4e,{cursor:c,cursorComp:N,cursorProps:A}))}function B4e(e){var t=o4e(),a=CQ(),s=dh(),r=h4e();return t==null||a==null||s==null||r==null?null:h.createElement(U4e,kE({},e,{offset:a,layout:s,tooltipAxisBandSize:t,chartName:r}))}var mX=h.createContext(null),H4e=()=>h.useContext(mX),F_={exports:{}},pU;function q4e(){return pU||(pU=1,(function(e){var t=Object.prototype.hasOwnProperty,a="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(a=!1));function r(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,f,p){if(typeof d!="function")throw new TypeError("The listener must be a function");var x=new r(d,f||c,p),y=a?a+u:u;return c._events[y]?c._events[y].fn?c._events[y]=[c._events[y],x]:c._events[y].push(x):(c._events[y]=x,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new s:delete c._events[u]}function l(){this._events=new s,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(a?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=a?a+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,x=f.length,y=new Array(x);p<x;p++)y[p]=f[p].fn;return y},l.prototype.listenerCount=function(u){var d=a?a+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,p,x,y){var N=a?a+u:u;if(!this._events[N])return!1;var v=this._events[N],j=arguments.length,w,S;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),j){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,f),!0;case 4:return v.fn.call(v.context,d,f,p),!0;case 5:return v.fn.call(v.context,d,f,p,x),!0;case 6:return v.fn.call(v.context,d,f,p,x,y),!0}for(S=1,w=new Array(j-1);S<j;S++)w[S-1]=arguments[S];v.fn.apply(v.context,w)}else{var _=v.length,E;for(S=0;S<_;S++)switch(v[S].once&&this.removeListener(u,v[S].fn,void 0,!0),j){case 1:v[S].fn.call(v[S].context);break;case 2:v[S].fn.call(v[S].context,d);break;case 3:v[S].fn.call(v[S].context,d,f);break;case 4:v[S].fn.call(v[S].context,d,f,p);break;default:if(!w)for(E=1,w=new Array(j-1);E<j;E++)w[E-1]=arguments[E];v[S].fn.apply(v[S].context,w)}}return!0},l.prototype.on=function(u,d,f){return i(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return i(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,p){var x=a?a+u:u;if(!this._events[x])return this;if(!d)return o(this,x),this;var y=this._events[x];if(y.fn)y.fn===d&&(!p||y.once)&&(!f||y.context===f)&&o(this,x);else{for(var N=0,v=[],j=y.length;N<j;N++)(y[N].fn!==d||p&&!y[N].once||f&&y[N].context!==f)&&v.push(y[N]);v.length?this._events[x]=v.length===1?v[0]:v:o(this,x)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=a?a+u:u,this._events[d]&&o(this,d)):(this._events=new s,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=a,l.EventEmitter=l,e.exports=l})(F_)),F_.exports}var W4e=q4e();const G4e=Zi(W4e);var Bp=new G4e,EE="recharts.syncEvent.tooltip",xU="recharts.syncEvent.brush";function AD(e,t){if(t){var a=Number.parseInt(t,10);if(!Ki(a))return e?.[a]}}var V4e={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},fX=jr({name:"options",initialState:V4e,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Y4e=fX.reducer,{createEventEmitter:Q4e}=fX.actions;function K4e(e){return e.tooltip.syncInteraction}var X4e={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},hX=jr({name:"chartData",initialState:X4e,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:a,endIndex:s}=t.payload;a!=null&&(e.dataStartIndex=a),s!=null&&(e.dataEndIndex=s)}}}),{setChartData:yU,setDataStartEndIndexes:Z4e,setComputedData:zVe}=hX.actions,J4e=hX.reducer,ePe=["x","y"];function bU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Jm(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?bU(Object(a),!0).forEach(function(s){tPe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):bU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function tPe(e,t,a){return(t=nPe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function nPe(e){var t=aPe(e,"string");return typeof t=="symbol"?t:t+""}function aPe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sPe(e,t){if(e==null)return{};var a,s,r=rPe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function rPe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function iPe(){var e=Ut(qP),t=Ut(WP),a=Zn(),s=Ut(dK),r=Ut(lc),i=dh(),o=$j(),l=Ut(c=>c.rootProps.className);h.useEffect(()=>{if(e==null)return Xx;var c=(u,d,f)=>{if(t!==f&&e===u){if(s==="index"){var p;if(o&&d!==null&&d!==void 0&&(p=d.payload)!==null&&p!==void 0&&p.coordinate&&d.payload.sourceViewBox){var x=d.payload.coordinate,{x:y,y:N}=x,v=sPe(x,ePe),{x:j,y:w,width:S,height:_}=d.payload.sourceViewBox,E=Jm(Jm({},v),{},{x:o.x+(S?(y-j)/S:0)*o.width,y:o.y+(_?(N-w)/_:0)*o.height});a(Jm(Jm({},d),{},{payload:Jm(Jm({},d.payload),{},{coordinate:E})}))}else a(d);return}if(r!=null){var T;if(typeof s=="function"){var A={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},L=s(r,A);T=r[L]}else s==="value"&&(T=r.find(V=>String(V.value)===d.payload.label));var{coordinate:M}=d.payload;if(T==null||d.payload.active===!1||M==null||o==null){a(AE({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:F,y:$}=M,D=Math.min(F,o.x+o.width),q=Math.min($,o.y+o.height),G={x:i==="horizontal"?T.coordinate:D,y:i==="horizontal"?q:T.coordinate},U=AE({active:d.payload.active,coordinate:G,dataKey:d.payload.dataKey,index:String(T.index),label:d.payload.label,sourceViewBox:d.payload.sourceViewBox,graphicalItemId:d.payload.graphicalItemId});a(U)}}};return Bp.on(EE,c),()=>{Bp.off(EE,c)}},[l,a,t,e,s,r,i,o])}function oPe(){var e=Ut(qP),t=Ut(WP),a=Zn();h.useEffect(()=>{if(e==null)return Xx;var s=(r,i,o)=>{t!==o&&e===r&&a(Z4e(i))};return Bp.on(xU,s),()=>{Bp.off(xU,s)}},[a,t,e])}function lPe(){var e=Zn();h.useEffect(()=>{e(Q4e())},[e]),iPe(),oPe()}function cPe(e,t,a,s,r,i){var o=Ut(x=>p4e(x,e,t)),l=Ut(WP),c=Ut(qP),u=Ut(dK),d=Ut(K4e),f=d?.active,p=$j();h.useEffect(()=>{if(!f&&c!=null&&l!=null){var x=AE({active:i,coordinate:a,dataKey:o,index:r,label:typeof s=="number"?String(s):s,sourceViewBox:p,graphicalItemId:void 0});Bp.emit(EE,c,x,l)}},[f,a,o,r,s,l,c,u,i,p])}function vU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function wU(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?vU(Object(a),!0).forEach(function(s){dPe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):vU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function dPe(e,t,a){return(t=uPe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function uPe(e){var t=mPe(e,"string");return typeof t=="symbol"?t:t+""}function mPe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fPe(e){return e.dataKey}function hPe(e,t){return h.isValidElement(e)?h.cloneElement(e,t):typeof e=="function"?h.createElement(e,t):h.createElement(CTe,t)}var NU=[],gPe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function U_(e){var t,a,s=Qa(e,gPe),{active:r,allowEscapeViewBox:i,animationDuration:o,animationEasing:l,content:c,filterNull:u,isAnimationActive:d,offset:f,payloadUniqBy:p,position:x,reverseDirection:y,useTranslate3d:N,wrapperStyle:v,cursor:j,shared:w,trigger:S,defaultIndex:_,portal:E,axisId:T}=s,A=Zn(),L=typeof _=="number"?String(_):_;h.useEffect(()=>{A(dLe({shared:w,trigger:S,axisId:T,active:r,defaultIndex:L}))},[A,w,S,T,r,L]);var M=$j(),F=IQ(),$=sLe(w),{activeIndex:D,isActive:q}=(t=Ut(ne=>b4e(ne,$,S,L)))!==null&&t!==void 0?t:{},G=Ut(ne=>y4e(ne,$,S,L)),U=Ut(ne=>dX(ne,$,S,L)),V=Ut(ne=>x4e(ne,$,S,L)),Z=G,Y=H4e(),le=(a=r??q)!==null&&a!==void 0?a:!1,[_e,te]=RY([Z,le]),ae=$==="axis"?U:void 0;cPe($,S,V,ae,D,le);var ye=E??Y;if(ye==null||M==null||$==null)return null;var Ne=Z??NU;le||(Ne=NU),u&&Ne.length&&(Ne=OY(Ne.filter(ne=>ne.value!=null&&(ne.hide!==!0||s.includeHidden)),p,fPe));var he=Ne.length>0,ve=h.createElement(LTe,{allowEscapeViewBox:i,animationDuration:o,animationEasing:l,isAnimationActive:d,active:le,coordinate:V,hasPayload:he,offset:f,position:x,reverseDirection:y,useTranslate3d:N,viewBox:M,wrapperStyle:v,lastBoundingBox:_e,innerRef:te,hasPortalFromProps:!!E},hPe(c,wU(wU({},s),{},{payload:Ne,label:ae,active:le,activeIndex:D,coordinate:V,accessibilityLayer:F})));return h.createElement(h.Fragment,null,Hi.createPortal(ve,ye),le&&h.createElement(B4e,{cursor:j,tooltipEventType:$,coordinate:V,payload:Ne,index:D}))}var t1=e=>null;t1.displayName="Cell";function pPe(e,t,a){return(t=xPe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function xPe(e){var t=yPe(e,"string");return typeof t=="symbol"?t:t+""}function yPe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class bPe{constructor(t){pPe(this,"cache",new Map),this.maxSize=t}get(t){var a=this.cache.get(t);return a!==void 0&&(this.cache.delete(t),this.cache.set(t,a)),a}set(t,a){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var s=this.cache.keys().next().value;s!=null&&this.cache.delete(s)}this.cache.set(t,a)}clear(){this.cache.clear()}size(){return this.cache.size}}function jU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function vPe(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?jU(Object(a),!0).forEach(function(s){wPe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):jU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function wPe(e,t,a){return(t=NPe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function NPe(e){var t=jPe(e,"string");return typeof t=="symbol"?t:t+""}function jPe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var CPe={cacheSize:2e3,enableCache:!0},gX=vPe({},CPe),CU=new bPe(gX.cacheSize),SPe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},SU="recharts_measurement_span";function _Pe(e,t){var a=t.fontSize||"",s=t.fontFamily||"",r=t.fontWeight||"",i=t.fontStyle||"",o=t.letterSpacing||"",l=t.textTransform||"";return"".concat(e,"|").concat(a,"|").concat(s,"|").concat(r,"|").concat(i,"|").concat(o,"|").concat(l)}var _U=(e,t)=>{try{var a=document.getElementById(SU);a||(a=document.createElement("span"),a.setAttribute("id",SU),a.setAttribute("aria-hidden","true"),document.body.appendChild(a)),Object.assign(a.style,SPe,t),a.textContent="".concat(e);var s=a.getBoundingClientRect();return{width:s.width,height:s.height}}catch{return{width:0,height:0}}},sp=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Bj.isSsr)return{width:0,height:0};if(!gX.enableCache)return _U(t,a);var s=_Pe(t,a),r=CU.get(s);if(r)return r;var i=_U(t,a);return CU.set(s,i),i},pX;function APe(e,t,a){return(t=TPe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function TPe(e){var t=kPe(e,"string");return typeof t=="symbol"?t:t+""}function kPe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var AU=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,TU=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,EPe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,LPe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,PPe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},DPe=["cm","mm","pt","pc","in","Q","px"];function OPe(e){return DPe.includes(e)}var mf="NaN";function MPe(e,t){return e*PPe[t]}class As{static parse(t){var a,[,s,r]=(a=LPe.exec(t))!==null&&a!==void 0?a:[];return s==null?As.NaN:new As(parseFloat(s),r??"")}constructor(t,a){this.num=t,this.unit=a,this.num=t,this.unit=a,Ki(t)&&(this.unit=""),a!==""&&!EPe.test(a)&&(this.num=NaN,this.unit=""),OPe(a)&&(this.num=MPe(t,a),this.unit="px")}add(t){return this.unit!==t.unit?new As(NaN,""):new As(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new As(NaN,""):new As(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new As(NaN,""):new As(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new As(NaN,""):new As(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Ki(this.num)}}pX=As;APe(As,"NaN",new pX(NaN,""));function xX(e){if(e==null||e.includes(mf))return mf;for(var t=e;t.includes("*")||t.includes("/");){var a,[,s,r,i]=(a=AU.exec(t))!==null&&a!==void 0?a:[],o=As.parse(s??""),l=As.parse(i??""),c=r==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return mf;t=t.replace(AU,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,f,p]=(u=TU.exec(t))!==null&&u!==void 0?u:[],x=As.parse(d??""),y=As.parse(p??""),N=f==="+"?x.add(y):x.subtract(y);if(N.isNaN())return mf;t=t.replace(TU,N.toString())}return t}var kU=/\(([^()]*)\)/;function IPe(e){for(var t=e,a;(a=kU.exec(t))!=null;){var[,s]=a;t=t.replace(kU,xX(s))}return t}function $Pe(e){var t=e.replace(/\s+/g,"");return t=IPe(t),t=xX(t),t}function RPe(e){try{return $Pe(e)}catch{return mf}}function B_(e){var t=RPe(e.slice(5,-1));return t===mf?"":t}var zPe=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],FPe=["dx","dy","angle","className","breakAll"];function LE(){return LE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},LE.apply(null,arguments)}function EU(e,t){if(e==null)return{};var a,s,r=UPe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function UPe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var yX=/[ \f\n\r\t\v\u2028\u2029]+/,bX=e=>{var{children:t,breakAll:a,style:s}=e;try{var r=[];fa(t)||(a?r=t.toString().split(""):r=t.toString().split(yX));var i=r.map(l=>({word:l,width:sp(l,s).width})),o=a?0:sp("",s).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}};function BPe(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var vX=(e,t,a,s)=>e.reduce((r,i)=>{var{word:o,width:l}=i,c=r[r.length-1];if(c&&l!=null&&(t==null||s||c.width+l+a<Number(t)))c.words.push(o),c.width+=l+a;else{var u={words:[o],width:l};r.push(u)}return r},[]),wX=e=>e.reduce((t,a)=>t.width>a.width?t:a),HPe="",LU=(e,t,a,s,r,i,o,l)=>{var c=e.slice(0,t),u=bX({breakAll:a,style:s,children:c+HPe});if(!u)return[!1,[]];var d=vX(u.wordsWithComputedWidth,i,o,l),f=d.length>r||wX(d).width>Number(i);return[f,d]},qPe=(e,t,a,s,r)=>{var{maxLines:i,children:o,style:l,breakAll:c}=e,u=zt(i),d=String(o),f=vX(t,s,a,r);if(!u||r)return f;var p=f.length>i||wX(f).width>Number(s);if(!p)return f;for(var x=0,y=d.length-1,N=0,v;x<=y&&N<=d.length-1;){var j=Math.floor((x+y)/2),w=j-1,[S,_]=LU(d,w,c,l,i,s,a,r),[E]=LU(d,j,c,l,i,s,a,r);if(!S&&!E&&(x=j+1),S&&E&&(y=j-1),!S&&E){v=_;break}N++}return v||f},PU=e=>{var t=fa(e)?[]:e.toString().split(yX);return[{words:t,width:void 0}]},WPe=e=>{var{width:t,scaleToFit:a,children:s,style:r,breakAll:i,maxLines:o}=e;if((t||a)&&!Bj.isSsr){var l,c,u=bX({breakAll:i,children:s,style:r});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;l=d,c=f}else return PU(s);return qPe({breakAll:i,children:s,maxLines:o,style:r},l,c,t,!!a)}return PU(s)},NX="#808080",GPe={angle:0,breakAll:!1,capHeight:"0.71em",fill:NX,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},n1=h.forwardRef((e,t)=>{var a=Qa(e,GPe),{x:s,y:r,lineHeight:i,capHeight:o,fill:l,scaleToFit:c,textAnchor:u,verticalAnchor:d}=a,f=EU(a,zPe),p=h.useMemo(()=>WPe({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:c,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,c,f.style,f.width]),{dx:x,dy:y,angle:N,className:v,breakAll:j}=f,w=EU(f,FPe);if(!Fo(s)||!Fo(r)||p.length===0)return null;var S=Number(s)+(zt(x)?x:0),_=Number(r)+(zt(y)?y:0);if(!xa(S)||!xa(_))return null;var E;switch(d){case"start":E=B_("calc(".concat(o,")"));break;case"middle":E=B_("calc(".concat((p.length-1)/2," * -").concat(i," + (").concat(o," / 2))"));break;default:E=B_("calc(".concat(p.length-1," * -").concat(i,")"));break}var T=[];if(c){var A=p[0].width,{width:L}=f;T.push("scale(".concat(zt(L)&&zt(A)?L/A:1,")"))}return N&&T.push("rotate(".concat(N,", ").concat(S,", ").concat(_,")")),T.length&&(w.transform=T.join(" ")),h.createElement("text",LE({},Ys(w),{ref:t,x:S,y:_,className:Mt("recharts-text",v),textAnchor:u,fill:l.includes("url")?NX:l}),p.map((M,F)=>{var $=M.words.join(j?"":" ");return h.createElement("tspan",{x:S,dy:F===0?E:i,key:"".concat($,"-").concat(F)},$)}))});n1.displayName="Text";var VPe=["labelRef"],YPe=["content"];function DU(e,t){if(e==null)return{};var a,s,r=QPe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function QPe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function OU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Da(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?OU(Object(a),!0).forEach(function(s){KPe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):OU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function KPe(e,t,a){return(t=XPe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function XPe(e){var t=ZPe(e,"string");return typeof t=="symbol"?t:t+""}function ZPe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Al(){return Al=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Al.apply(null,arguments)}var jX=h.createContext(null),JPe=e=>{var{x:t,y:a,upperWidth:s,lowerWidth:r,width:i,height:o,children:l}=e,c=h.useMemo(()=>({x:t,y:a,upperWidth:s,lowerWidth:r,width:i,height:o}),[t,a,s,r,i,o]);return h.createElement(jX.Provider,{value:c},l)},CX=()=>{var e=h.useContext(jX),t=$j();return e||jQ(t)},eDe=h.createContext(null),tDe=()=>{var e=h.useContext(eDe),t=Ut(gK);return e||t},nDe=e=>{var{value:t,formatter:a}=e,s=fa(e.children)?t:e.children;return typeof a=="function"?a(s):s},TD=e=>e!=null&&typeof e=="function",aDe=(e,t)=>{var a=xs(t-e),s=Math.min(Math.abs(t-e),360);return a*s},sDe=(e,t,a,s,r)=>{var{offset:i,className:o}=e,{cx:l,cy:c,innerRadius:u,outerRadius:d,startAngle:f,endAngle:p,clockWise:x}=r,y=(u+d)/2,N=aDe(f,p),v=N>=0?1:-1,j,w;switch(t){case"insideStart":j=f+v*i,w=x;break;case"insideEnd":j=p-v*i,w=!x;break;case"end":j=p+v*i,w=x;break;default:throw new Error("Unsupported position ".concat(t))}w=N<=0?w:!w;var S=qa(l,c,y,j),_=qa(l,c,y,j+(w?1:-1)*359),E="M".concat(S.x,",").concat(S.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(w?0:1,`,
    `).concat(_.x,",").concat(_.y),T=fa(e.id)?Dp("recharts-radial-line-"):e.id;return h.createElement("text",Al({},s,{dominantBaseline:"central",className:Mt("recharts-radial-bar-label",o)}),h.createElement("defs",null,h.createElement("path",{id:T,d:E})),h.createElement("textPath",{xlinkHref:"#".concat(T)},a))},rDe=(e,t,a)=>{var{cx:s,cy:r,innerRadius:i,outerRadius:o,startAngle:l,endAngle:c}=e,u=(l+c)/2;if(a==="outside"){var{x:d,y:f}=qa(s,r,o+t,u);return{x:d,y:f,textAnchor:d>=s?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:s,y:r,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:s,y:r,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:s,y:r,textAnchor:"middle",verticalAnchor:"end"};var p=(i+o)/2,{x,y}=qa(s,r,p,u);return{x,y,textAnchor:"middle",verticalAnchor:"middle"}},PE=e=>"cx"in e&&zt(e.cx),iDe=(e,t)=>{var{parentViewBox:a,offset:s,position:r}=e,i;a!=null&&!PE(a)&&(i=a);var{x:o,y:l,upperWidth:c,lowerWidth:u,height:d}=t,f=o,p=o+(c-u)/2,x=(f+p)/2,y=(c+u)/2,N=f+c/2,v=d>=0?1:-1,j=v*s,w=v>0?"end":"start",S=v>0?"start":"end",_=c>=0?1:-1,E=_*s,T=_>0?"end":"start",A=_>0?"start":"end";if(r==="top"){var L={x:f+c/2,y:l-j,textAnchor:"middle",verticalAnchor:w};return Da(Da({},L),i?{height:Math.max(l-i.y,0),width:c}:{})}if(r==="bottom"){var M={x:p+u/2,y:l+d+j,textAnchor:"middle",verticalAnchor:S};return Da(Da({},M),i?{height:Math.max(i.y+i.height-(l+d),0),width:u}:{})}if(r==="left"){var F={x:x-E,y:l+d/2,textAnchor:T,verticalAnchor:"middle"};return Da(Da({},F),i?{width:Math.max(F.x-i.x,0),height:d}:{})}if(r==="right"){var $={x:x+y+E,y:l+d/2,textAnchor:A,verticalAnchor:"middle"};return Da(Da({},$),i?{width:Math.max(i.x+i.width-$.x,0),height:d}:{})}var D=i?{width:y,height:d}:{};return r==="insideLeft"?Da({x:x+E,y:l+d/2,textAnchor:A,verticalAnchor:"middle"},D):r==="insideRight"?Da({x:x+y-E,y:l+d/2,textAnchor:T,verticalAnchor:"middle"},D):r==="insideTop"?Da({x:f+c/2,y:l+j,textAnchor:"middle",verticalAnchor:S},D):r==="insideBottom"?Da({x:p+u/2,y:l+d-j,textAnchor:"middle",verticalAnchor:w},D):r==="insideTopLeft"?Da({x:f+E,y:l+j,textAnchor:A,verticalAnchor:S},D):r==="insideTopRight"?Da({x:f+c-E,y:l+j,textAnchor:T,verticalAnchor:S},D):r==="insideBottomLeft"?Da({x:p+E,y:l+d-j,textAnchor:A,verticalAnchor:w},D):r==="insideBottomRight"?Da({x:p+u-E,y:l+d-j,textAnchor:T,verticalAnchor:w},D):r&&typeof r=="object"&&(zt(r.x)||Gl(r.x))&&(zt(r.y)||Gl(r.y))?Da({x:o+Rs(r.x,y),y:l+Rs(r.y,d),textAnchor:"end",verticalAnchor:"end"},D):Da({x:N,y:l+d/2,textAnchor:"middle",verticalAnchor:"middle"},D)},oDe={angle:0,offset:5,zIndex:Wa.label,position:"middle",textBreakAll:!1};function Gc(e){var t=Qa(e,oDe),{viewBox:a,position:s,value:r,children:i,content:o,className:l="",textBreakAll:c,labelRef:u}=t,d=tDe(),f=CX(),p=s==="center"?f:d??f,x,y,N;if(a==null?x=p:PE(a)?x=a:x=jQ(a),!x||fa(r)&&fa(i)&&!h.isValidElement(o)&&typeof o!="function")return null;var v=Da(Da({},t),{},{viewBox:x});if(h.isValidElement(o)){var{labelRef:j}=v,w=DU(v,VPe);return h.cloneElement(o,w)}if(typeof o=="function"){var{content:S}=v,_=DU(v,YPe);if(y=h.createElement(o,_),h.isValidElement(y))return y}else y=nDe(t);var E=Ys(t);if(PE(x)){if(s==="insideStart"||s==="insideEnd"||s==="end")return sDe(t,s,y,E,x);N=rDe(x,t.offset,t.position)}else N=iDe(t,x);return h.createElement(Cr,{zIndex:t.zIndex},h.createElement(n1,Al({ref:u,className:Mt("recharts-label",l)},E,N,{textAnchor:BPe(E.textAnchor)?E.textAnchor:N.textAnchor,breakAll:c}),y))}Gc.displayName="Label";var lDe=(e,t,a)=>{if(!e)return null;var s={viewBox:t,labelRef:a};return e===!0?h.createElement(Gc,Al({key:"label-implicit"},s)):Fo(e)?h.createElement(Gc,Al({key:"label-implicit",value:e},s)):h.isValidElement(e)?e.type===Gc?h.cloneElement(e,Da({key:"label-implicit"},s)):h.createElement(Gc,Al({key:"label-implicit",content:e},s)):TD(e)?h.createElement(Gc,Al({key:"label-implicit",content:e},s)):e&&typeof e=="object"?h.createElement(Gc,Al({},e,{key:"label-implicit"},s)):null};function cDe(e){var{label:t,labelRef:a}=e,s=CX();return lDe(t,s,a)||null}var H_={},q_={},MU;function dDe(){return MU||(MU=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a[a.length-1]}e.last=t})(q_)),q_}var W_={},IU;function uDe(){return IU||(IU=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return Array.isArray(a)?a:Array.from(a)}e.toArray=t})(W_)),W_}var $U;function mDe(){return $U||($U=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dDe(),a=uDe(),s=jP();function r(i){if(s.isArrayLike(i))return t.last(a.toArray(i))}e.last=r})(H_)),H_}var G_,RU;function fDe(){return RU||(RU=1,G_=mDe().last),G_}var hDe=fDe();const gDe=Zi(hDe);var pDe=["valueAccessor"],xDe=["dataKey","clockWise","id","textBreakAll","zIndex"];function ww(){return ww=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},ww.apply(null,arguments)}function zU(e,t){if(e==null)return{};var a,s,r=yDe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function yDe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var bDe=e=>Array.isArray(e.value)?gDe(e.value):e.value,SX=h.createContext(void 0),_X=SX.Provider,AX=h.createContext(void 0),vDe=AX.Provider;function wDe(){return h.useContext(SX)}function NDe(){return h.useContext(AX)}function cv(e){var{valueAccessor:t=bDe}=e,a=zU(e,pDe),{dataKey:s,clockWise:r,id:i,textBreakAll:o,zIndex:l}=a,c=zU(a,xDe),u=wDe(),d=NDe(),f=u||d;return!f||!f.length?null:h.createElement(Cr,{zIndex:l??Wa.label},h.createElement(ys,{className:"recharts-label-list"},f.map((p,x)=>{var y,N=fa(s)?t(p,x):Hn(p&&p.payload,s),v=fa(i)?{}:{id:"".concat(i,"-").concat(x)};return h.createElement(Gc,ww({key:"label-".concat(x)},Ys(p),c,v,{fill:(y=a.fill)!==null&&y!==void 0?y:p.fill,parentViewBox:p.parentViewBox,value:N,textBreakAll:o,viewBox:p.viewBox,index:x,zIndex:0}))})))}cv.displayName="LabelList";function kD(e){var{label:t}=e;return t?t===!0?h.createElement(cv,{key:"labelList-implicit"}):h.isValidElement(t)||TD(t)?h.createElement(cv,{key:"labelList-implicit",content:t}):typeof t=="object"?h.createElement(cv,ww({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function DE(){return DE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},DE.apply(null,arguments)}var TX=e=>{var{cx:t,cy:a,r:s,className:r}=e,i=Mt("recharts-dot",r);return zt(t)&&zt(a)&&zt(s)?h.createElement("circle",DE({},Br(e),NP(e),{className:i,cx:t,cy:a,r:s})):null},kX=e=>e.graphicalItems.polarItems,jDe=it([pa,o0],XP),a1=it([kX,ba,jDe],ZP),CDe=it([a1],JP),s1=it([CDe,Hj],eD),SDe=it([s1,ba,a1],nD);it([s1,ba,a1],(e,t,a)=>a.length>0?e.flatMap(s=>a.flatMap(r=>{var i,o=Hn(s,(i=t.dataKey)!==null&&i!==void 0?i:r.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(s=>({value:Hn(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})));var FU=()=>{},_De=it([s1,ba,a1,Xj,pa],iD),ADe=it([ba,sD,rD,FU,_De,FU,wn,pa],oD),EX=it([ba,wn,s1,SDe,i0,pa,ADe],lD),TDe=it([EX,ba,gh],uD);it([ba,EX,TDe,pa],fD);var kDe={radiusAxis:{},angleAxis:{}},LX=jr({name:"polarAxis",initialState:kDe,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:FVe,removeRadiusAxis:UVe,addAngleAxis:BVe,removeAngleAxis:HVe}=LX.actions,EDe=LX.reducer;function UU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function BU(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?UU(Object(a),!0).forEach(function(s){LDe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):UU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function LDe(e,t,a){return(t=PDe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function PDe(e){var t=DDe(e,"string");return typeof t=="symbol"?t:t+""}function DDe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ODe=(e,t)=>t,ED=it([kX,ODe],(e,t)=>e.filter(a=>a.type==="pie").find(a=>a.id===t)),MDe=[],LD=(e,t,a)=>a?.length===0?MDe:a,PX=it([Hj,ED,LD],(e,t,a)=>{var{chartData:s}=e;if(t!=null){var r;if(t?.data!=null&&t.data.length>0?r=t.data:r=s,(!r||!r.length)&&a!=null&&(r=a.map(i=>BU(BU({},t.presentationProps),i.props))),r!=null)return r}}),IDe=it([PX,ED,LD],(e,t,a)=>{if(!(e==null||t==null))return e.map((s,r)=>{var i,o=Hn(s,t.nameKey,t.name),l;return a!=null&&(i=a[r])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?l=a[r].props.fill:typeof s=="object"&&s!=null&&"fill"in s?l=s.fill:l=t.fill,{value:ch(o,t.dataKey),color:l,payload:s,type:t.legendType}})}),$De=it([PX,ED,LD,ls],(e,t,a,s)=>{if(!(t==null||e==null))return I3e({offset:s,pieSettings:t,displayedData:e,cells:a})}),HU=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",qU=null,V_=null,DX=e=>{if(e===qU&&Array.isArray(V_))return V_;var t=[];return h.Children.forEach(e,a=>{fa(a)||(jL.isFragment(a)?t=t.concat(DX(a.props.children)):t.push(a))}),V_=t,qU=e,t};function PD(e,t){var a=[],s=[];return Array.isArray(t)?s=t.map(r=>HU(r)):s=[HU(t)],DX(e).forEach(r=>{var i=Ru(r,"type.displayName")||Ru(r,"type.name");i&&s.indexOf(i)!==-1&&a.push(r)}),a}var OX=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,Y_={},WU;function RDe(){return WU||(WU=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){if(typeof a!="object"||a==null)return!1;if(Object.getPrototypeOf(a)===null)return!0;if(Object.prototype.toString.call(a)!=="[object Object]"){const r=a[Symbol.toStringTag];return r==null||!Object.getOwnPropertyDescriptor(a,Symbol.toStringTag)?.writable?!1:a.toString()===`[object ${r}]`}let s=a;for(;Object.getPrototypeOf(s)!==null;)s=Object.getPrototypeOf(s);return Object.getPrototypeOf(a)===s}e.isPlainObject=t})(Y_)),Y_}var Q_,GU;function zDe(){return GU||(GU=1,Q_=RDe().isPlainObject),Q_}var FDe=zDe();const UDe=Zi(FDe);var VU,YU,QU,KU,XU;function ZU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function JU(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?ZU(Object(a),!0).forEach(function(s){BDe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ZU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function BDe(e,t,a){return(t=HDe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function HDe(e){var t=qDe(e,"string");return typeof t=="symbol"?t:t+""}function qDe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nw(){return Nw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Nw.apply(null,arguments)}function jg(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var e7=(e,t,a,s,r)=>{var i=a-s,o;return o=Ca(VU||(VU=jg(["M ",",",""])),e,t),o+=Ca(YU||(YU=jg(["L ",",",""])),e+a,t),o+=Ca(QU||(QU=jg(["L ",",",""])),e+a-i/2,t+r),o+=Ca(KU||(KU=jg(["L ",",",""])),e+a-i/2-s,t+r),o+=Ca(XU||(XU=jg(["L ",","," Z"])),e,t),o},WDe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},GDe=e=>{var t=Qa(e,WDe),{x:a,y:s,upperWidth:r,lowerWidth:i,height:o,className:l}=t,{animationEasing:c,animationDuration:u,animationBegin:d,isUpdateAnimationActive:f}=t,p=h.useRef(null),[x,y]=h.useState(-1),N=h.useRef(r),v=h.useRef(i),j=h.useRef(o),w=h.useRef(a),S=h.useRef(s),_=r0(e,"trapezoid-");if(h.useEffect(()=>{if(p.current&&p.current.getTotalLength)try{var G=p.current.getTotalLength();G&&y(G)}catch{}},[]),a!==+a||s!==+s||r!==+r||i!==+i||o!==+o||r===0&&i===0||o===0)return null;var E=Mt("recharts-trapezoid",l);if(!f)return h.createElement("g",null,h.createElement("path",Nw({},Ys(t),{className:E,d:e7(a,s,r,i,o)})));var T=N.current,A=v.current,L=j.current,M=w.current,F=S.current,$="0px ".concat(x===-1?1:x,"px"),D="".concat(x,"px 0px"),q=$Q(["strokeDasharray"],u,c);return h.createElement(s0,{animationId:_,key:_,canBegin:x>0,duration:u,easing:c,isActive:f,begin:d},G=>{var U=da(T,r,G),V=da(A,i,G),Z=da(L,o,G),Y=da(M,a,G),le=da(F,s,G);p.current&&(N.current=U,v.current=V,j.current=Z,w.current=Y,S.current=le);var _e=G>0?{transition:q,strokeDasharray:D}:{strokeDasharray:$};return h.createElement("path",Nw({},Ys(t),{className:E,d:e7(Y,le,U,V,Z),ref:p,style:JU(JU({},_e),t.style)}))})},VDe=["option","shapeType","activeClassName"];function YDe(e,t){if(e==null)return{};var a,s,r=QDe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function QDe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function t7(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function jw(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?t7(Object(a),!0).forEach(function(s){KDe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):t7(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function KDe(e,t,a){return(t=XDe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function XDe(e){var t=ZDe(e,"string");return typeof t=="symbol"?t:t+""}function ZDe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function JDe(e,t){return jw(jw({},t),e)}function e3e(e,t){return e==="symbols"}function n7(e){var{shapeType:t,elementProps:a}=e;switch(t){case"rectangle":return h.createElement(UQ,a);case"trapezoid":return h.createElement(GDe,a);case"sector":return h.createElement(WQ,a);case"symbols":if(e3e(t))return h.createElement(wP,a);break;case"curve":return h.createElement(zP,a);default:return null}}function t3e(e){return h.isValidElement(e)?e.props:e}function DD(e){var{option:t,shapeType:a,activeClassName:s="recharts-active-shape"}=e,r=YDe(e,VDe),i;if(h.isValidElement(t))i=h.cloneElement(t,jw(jw({},r),t3e(t)));else if(typeof t=="function")i=t(r,r.index);else if(UDe(t)&&typeof t!="boolean"){var o=JDe(t,r);i=h.createElement(n7,{shapeType:a,elementProps:o})}else{var l=r;i=h.createElement(n7,{shapeType:a,elementProps:l})}return r.isActive?h.createElement(ys,{className:s},i):i}var OD=(e,t,a)=>{var s=Zn();return(r,i)=>o=>{e?.(r,i,o),s(GK({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition,activeGraphicalItemId:a}))}},MD=e=>{var t=Zn();return(a,s)=>r=>{e?.(a,s,r),t(uLe())}},ID=(e,t,a)=>{var s=Zn();return(r,i)=>o=>{e?.(r,i,o),s(mLe({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition,activeGraphicalItemId:a}))}};function $D(e){var{tooltipEntrySettings:t}=e,a=Zn(),s=Bs(),r=h.useRef(null);return h.useLayoutEffect(()=>{s||(r.current===null?a(oLe(t)):r.current!==t&&a(lLe({prev:r.current,next:t})),r.current=t)},[t,a,s]),h.useLayoutEffect(()=>()=>{r.current&&(a(cLe(r.current)),r.current=null)},[a]),null}function MX(e){var{legendPayload:t}=e,a=Zn(),s=Bs(),r=h.useRef(null);return h.useLayoutEffect(()=>{s||(r.current===null?a(PQ(t)):r.current!==t&&a(DQ({prev:r.current,next:t})),r.current=t)},[a,s,t]),h.useLayoutEffect(()=>()=>{r.current&&(a(OQ(r.current)),r.current=null)},[a]),null}function n3e(e){var{legendPayload:t}=e,a=Zn(),s=Ut(wn),r=h.useRef(null);return h.useLayoutEffect(()=>{s!=="centric"&&s!=="radial"||(r.current===null?a(PQ(t)):r.current!==t&&a(DQ({prev:r.current,next:t})),r.current=t)},[a,s,t]),h.useLayoutEffect(()=>()=>{r.current&&(a(OQ(r.current)),r.current=null)},[a]),null}var K_,a3e=()=>{var[e]=h.useState(()=>Dp("uid-"));return e},s3e=(K_=_u.useId)!==null&&K_!==void 0?K_:a3e;function r3e(e,t){var a=s3e();return t||(e?"".concat(e,"-").concat(a):a)}var i3e=h.createContext(void 0),RD=e=>{var{id:t,type:a,children:s}=e,r=r3e("recharts-".concat(a),t);return h.createElement(i3e.Provider,{value:r},s(r))},o3e={cartesianItems:[],polarItems:[]},IX=jr({name:"graphicalItems",initialState:o3e,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:ca()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:a,next:s}=t.payload,r=Wi(e).cartesianItems.indexOf(a);r>-1&&(e.cartesianItems[r]=s)},prepare:ca()},removeCartesianGraphicalItem:{reducer(e,t){var a=Wi(e).cartesianItems.indexOf(t.payload);a>-1&&e.cartesianItems.splice(a,1)},prepare:ca()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:ca()},removePolarGraphicalItem:{reducer(e,t){var a=Wi(e).polarItems.indexOf(t.payload);a>-1&&e.polarItems.splice(a,1)},prepare:ca()}}}),{addCartesianGraphicalItem:l3e,replaceCartesianGraphicalItem:c3e,removeCartesianGraphicalItem:d3e,addPolarGraphicalItem:u3e,removePolarGraphicalItem:m3e}=IX.actions,f3e=IX.reducer,h3e=e=>{var t=Zn(),a=h.useRef(null);return h.useLayoutEffect(()=>{a.current===null?t(l3e(e)):a.current!==e&&t(c3e({prev:a.current,next:e})),a.current=e},[t,e]),h.useLayoutEffect(()=>()=>{a.current&&(t(d3e(a.current)),a.current=null)},[t]),null},$X=h.memo(h3e);function g3e(e){var t=Zn();return h.useLayoutEffect(()=>(t(u3e(e)),()=>{t(m3e(e))}),[t,e]),null}var p3e=["key"],x3e=["onMouseEnter","onClick","onMouseLeave"],y3e=["id"],b3e=["id"];function a7(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Sa(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?a7(Object(a),!0).forEach(function(s){v3e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):a7(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function v3e(e,t,a){return(t=w3e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function w3e(e){var t=N3e(e,"string");return typeof t=="symbol"?t:t+""}function N3e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xd(){return xd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},xd.apply(null,arguments)}function r1(e,t){if(e==null)return{};var a,s,r=j3e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function j3e(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function C3e(e){var t=h.useMemo(()=>PD(e.children,t1),[e.children]),a=Ut(s=>IDe(s,e.id,t));return a==null?null:h.createElement(n3e,{legendPayload:a})}var S3e=h.memo(e=>{var{dataKey:t,nameKey:a,sectors:s,stroke:r,strokeWidth:i,fill:o,name:l,hide:c,tooltipType:u,id:d}=e,f={dataDefinedOnItem:s.map(p=>p.tooltipPayload),positions:s.map(p=>p.tooltipPosition),settings:{stroke:r,strokeWidth:i,fill:o,dataKey:t,nameKey:a,name:ch(l,t),hide:c,type:u,color:o,unit:"",graphicalItemId:d}};return h.createElement($D,{tooltipEntrySettings:f})}),_3e=(e,t)=>e>t?"start":e<t?"end":"middle",A3e=(e,t,a)=>Rs(typeof t=="function"?t(e):t,a,a*.8),T3e=(e,t,a)=>{var{top:s,left:r,width:i,height:o}=t,l=BQ(i,o),c=r+Rs(e.cx,i,i/2),u=s+Rs(e.cy,o,o/2),d=Rs(e.innerRadius,l,0),f=A3e(a,e.outerRadius,l),p=e.maxRadius||Math.sqrt(i*i+o*o)/2;return{cx:c,cy:u,innerRadius:d,outerRadius:f,maxRadius:p}},k3e=(e,t)=>{var a=xs(t-e),s=Math.min(Math.abs(t-e),360);return a*s};function E3e(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var L3e=(e,t)=>{if(h.isValidElement(e))return h.cloneElement(e,t);if(typeof e=="function")return e(t);var a=Mt("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:s}=t,r=r1(t,p3e);return h.createElement(zP,xd({},r,{type:"linear",className:a}))},P3e=(e,t,a)=>{if(h.isValidElement(e))return h.cloneElement(e,t);var s=a;if(typeof e=="function"&&(s=e(t),h.isValidElement(s)))return s;var r=Mt("recharts-pie-label-text",E3e(e));return h.createElement(n1,xd({},t,{alignmentBaseline:"middle",className:r}),s)};function D3e(e){var{sectors:t,props:a,showLabels:s}=e,{label:r,labelLine:i,dataKey:o}=a;if(!s||!r||!t)return null;var l=Br(a),c=$u(r),u=$u(i),d=typeof r=="object"&&"offsetRadius"in r&&typeof r.offsetRadius=="number"&&r.offsetRadius||20,f=t.map((p,x)=>{var y=(p.startAngle+p.endAngle)/2,N=qa(p.cx,p.cy,p.outerRadius+d,y),v=Sa(Sa(Sa(Sa({},l),p),{},{stroke:"none"},c),{},{index:x,textAnchor:_3e(N.x,p.cx)},N),j=Sa(Sa(Sa(Sa({},l),p),{},{fill:"none",stroke:p.fill},u),{},{index:x,points:[qa(p.cx,p.cy,p.outerRadius,y),N],key:"line"});return h.createElement(Cr,{zIndex:Wa.label,key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(x)},h.createElement(ys,null,i&&L3e(i,j),P3e(r,v,Hn(p,o))))});return h.createElement(ys,{className:"recharts-pie-labels"},f)}function O3e(e){var{sectors:t,props:a,showLabels:s}=e,{label:r}=a;return typeof r=="object"&&r!=null&&"position"in r?h.createElement(kD,{label:r}):h.createElement(D3e,{sectors:t,props:a,showLabels:s})}function M3e(e){var{sectors:t,activeShape:a,inactiveShape:s,allOtherPieProps:r,shape:i,id:o}=e,l=Ut(pd),c=Ut(ND),u=Ut(XLe),{onMouseEnter:d,onClick:f,onMouseLeave:p}=r,x=r1(r,x3e),y=OD(d,r.dataKey,o),N=MD(p),v=ID(f,r.dataKey,o);return t==null||t.length===0?null:h.createElement(h.Fragment,null,t.map((j,w)=>{if(j?.startAngle===0&&j?.endAngle===0&&t.length!==1)return null;var S=u==null||u===o,_=String(w)===l&&(c==null||r.dataKey===c)&&S,E=l?s:null,T=a&&_?a:E,A=Sa(Sa({},j),{},{stroke:j.stroke,tabIndex:-1,[yQ]:w,[bQ]:o});return h.createElement(ys,xd({key:"sector-".concat(j?.startAngle,"-").concat(j?.endAngle,"-").concat(j.midAngle,"-").concat(w),tabIndex:-1,className:"recharts-pie-sector"},Zx(x,j,w),{onMouseEnter:y(j,w),onMouseLeave:N(j,w),onClick:v(j,w)}),h.createElement(DD,xd({option:i??T,index:w,shapeType:"sector",isActive:_},A)))}))}function I3e(e){var t,{pieSettings:a,displayedData:s,cells:r,offset:i}=e,{cornerRadius:o,startAngle:l,endAngle:c,dataKey:u,nameKey:d,tooltipType:f}=a,p=Math.abs(a.minAngle),x=k3e(l,c),y=Math.abs(x),N=s.length<=1?0:(t=a.paddingAngle)!==null&&t!==void 0?t:0,v=s.filter(T=>Hn(T,u,0)!==0).length,j=(y>=360?v:v-1)*N,w=y-v*p-j,S=s.reduce((T,A)=>{var L=Hn(A,u,0);return T+(zt(L)?L:0)},0),_;if(S>0){var E;_=s.map((T,A)=>{var L=Hn(T,u,0),M=Hn(T,d,A),F=T3e(a,i,T),$=(zt(L)?L:0)/S,D,q=Sa(Sa({},T),r&&r[A]&&r[A].props);A?D=E.endAngle+xs(x)*N*(L!==0?1:0):D=l;var G=D+xs(x)*((L!==0?p:0)+$*w),U=(D+G)/2,V=(F.innerRadius+F.outerRadius)/2,Z=[{name:M,value:L,payload:q,dataKey:u,type:f,graphicalItemId:a.id}],Y=qa(F.cx,F.cy,V,U);return E=Sa(Sa(Sa(Sa({},a.presentationProps),{},{percent:$,cornerRadius:typeof o=="string"?parseFloat(o):o,name:M,tooltipPayload:Z,midAngle:U,middleRadius:V,tooltipPosition:Y},q),F),{},{value:L,dataKey:u,startAngle:D,endAngle:G,payload:q,paddingAngle:xs(x)*N}),E})}return _}function $3e(e){var{showLabels:t,sectors:a,children:s}=e,r=h.useMemo(()=>!t||!a?[]:a.map(i=>({value:i.value,payload:i.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:i.cx,cy:i.cy,innerRadius:i.innerRadius,outerRadius:i.outerRadius,startAngle:i.startAngle,endAngle:i.endAngle,clockWise:!1},fill:i.fill})),[a,t]);return h.createElement(vDe,{value:t?r:void 0},s)}function R3e(e){var{props:t,previousSectorsRef:a,id:s}=e,{sectors:r,isAnimationActive:i,animationBegin:o,animationDuration:l,animationEasing:c,activeShape:u,inactiveShape:d,onAnimationStart:f,onAnimationEnd:p}=t,x=r0(t,"recharts-pie-"),y=a.current,[N,v]=h.useState(!1),j=h.useCallback(()=>{typeof p=="function"&&p(),v(!1)},[p]),w=h.useCallback(()=>{typeof f=="function"&&f(),v(!0)},[f]);return h.createElement($3e,{showLabels:!N,sectors:r},h.createElement(s0,{animationId:x,begin:o,duration:l,isActive:i,easing:c,onAnimationStart:w,onAnimationEnd:j,key:x},S=>{var _=[],E=r&&r[0],T=E?.startAngle;return r?.forEach((A,L)=>{var M=y&&y[L],F=L>0?Ru(A,"paddingAngle",0):0;if(M){var $=da(M.endAngle-M.startAngle,A.endAngle-A.startAngle,S),D=Sa(Sa({},A),{},{startAngle:T+F,endAngle:T+$+F});_.push(D),T=D.endAngle}else{var{endAngle:q,startAngle:G}=A,U=da(0,q-G,S),V=Sa(Sa({},A),{},{startAngle:T+F,endAngle:T+U+F});_.push(V),T=V.endAngle}}),a.current=_,h.createElement(ys,null,h.createElement(M3e,{sectors:_,activeShape:u,inactiveShape:d,allOtherPieProps:t,shape:t.shape,id:s}))}),h.createElement(O3e,{showLabels:!N,sectors:r,props:t}),t.children)}var z3e={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Wa.area};function F3e(e){var{id:t}=e,a=r1(e,y3e),{hide:s,className:r,rootTabIndex:i}=e,o=h.useMemo(()=>PD(e.children,t1),[e.children]),l=Ut(d=>$De(d,t,o)),c=h.useRef(null),u=Mt("recharts-pie",r);return s||l==null?(c.current=null,h.createElement(ys,{tabIndex:i,className:u})):h.createElement(Cr,{zIndex:e.zIndex},h.createElement(S3e,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:l,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),h.createElement(ys,{tabIndex:i,className:u},h.createElement(R3e,{props:Sa(Sa({},a),{},{sectors:l}),previousSectorsRef:c,id:t})))}function RX(e){var t=Qa(e,z3e),{id:a}=t,s=r1(t,b3e),r=Br(s);return h.createElement(RD,{id:a,type:"pie"},i=>h.createElement(h.Fragment,null,h.createElement(g3e,{type:"pie",id:i,data:s.data,dataKey:s.dataKey,hide:s.hide,angleAxisId:0,radiusAxisId:0,name:s.name,nameKey:s.nameKey,tooltipType:s.tooltipType,legendType:s.legendType,fill:s.fill,cx:s.cx,cy:s.cy,startAngle:s.startAngle,endAngle:s.endAngle,paddingAngle:s.paddingAngle,minAngle:s.minAngle,innerRadius:s.innerRadius,outerRadius:s.outerRadius,cornerRadius:s.cornerRadius,presentationProps:r,maxRadius:t.maxRadius}),h.createElement(C3e,xd({},s,{id:i})),h.createElement(F3e,xd({},s,{id:i}))))}RX.displayName="Pie";var U3e=["points"];function s7(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function X_(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?s7(Object(a),!0).forEach(function(s){B3e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s7(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function B3e(e,t,a){return(t=H3e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function H3e(e){var t=q3e(e,"string");return typeof t=="symbol"?t:t+""}function q3e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cw(){return Cw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Cw.apply(null,arguments)}function W3e(e,t){if(e==null)return{};var a,s,r=G3e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function G3e(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function V3e(e){var{option:t,dotProps:a,className:s}=e;if(h.isValidElement(t))return h.cloneElement(t,a);if(typeof t=="function")return t(a);var r=Mt(s,typeof t!="boolean"?t.className:""),i=a??{},{points:o}=i,l=W3e(i,U3e);return h.createElement(TX,Cw({},l,{className:r}))}function Y3e(e,t){return e==null?!1:t?!0:e.length===1}function Q3e(e){var{points:t,dot:a,className:s,dotClassName:r,dataKey:i,baseProps:o,needClip:l,clipPathId:c,zIndex:u=Wa.scatter}=e;if(!Y3e(t,a))return null;var d=OX(a),f=ISe(a),p=t.map((y,N)=>{var v,j,w=X_(X_(X_({r:3},o),f),{},{index:N,cx:(v=y.x)!==null&&v!==void 0?v:void 0,cy:(j=y.y)!==null&&j!==void 0?j:void 0,dataKey:i,value:y.value,payload:y.payload,points:t});return h.createElement(V3e,{key:"dot-".concat(N),option:a,dotProps:w,className:r})}),x={};return l&&c!=null&&(x.clipPath="url(#clipPath-".concat(d?"":"dots-").concat(c,")")),h.createElement(Cr,{zIndex:u},h.createElement(ys,Cw({className:s},x),p))}function r7(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function i7(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?r7(Object(a),!0).forEach(function(s){K3e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r7(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function K3e(e,t,a){return(t=X3e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function X3e(e){var t=Z3e(e,"string");return typeof t=="symbol"?t:t+""}function Z3e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zX=0,J3e={xAxis:{},yAxis:{},zAxis:{}},FX=jr({name:"cartesianAxis",initialState:J3e,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:ca()},replaceXAxis:{reducer(e,t){var{prev:a,next:s}=t.payload;e.xAxis[a.id]!==void 0&&(a.id!==s.id&&delete e.xAxis[a.id],e.xAxis[s.id]=s)},prepare:ca()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:ca()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:ca()},replaceYAxis:{reducer(e,t){var{prev:a,next:s}=t.payload;e.yAxis[a.id]!==void 0&&(a.id!==s.id&&delete e.yAxis[a.id],e.yAxis[s.id]=s)},prepare:ca()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:ca()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:ca()},replaceZAxis:{reducer(e,t){var{prev:a,next:s}=t.payload;e.zAxis[a.id]!==void 0&&(a.id!==s.id&&delete e.zAxis[a.id],e.zAxis[s.id]=s)},prepare:ca()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:ca()},updateYAxisWidth(e,t){var{id:a,width:s}=t.payload,r=e.yAxis[a];if(r){var i=r.widthHistory||[];if(i.length===3&&i[0]===i[2]&&s===i[1]&&s!==r.width&&Math.abs(s-i[0])<=1)return;var o=[...i,s].slice(-3);e.yAxis[a]=i7(i7({},e.yAxis[a]),{},{width:s,widthHistory:o})}}}}),{addXAxis:eOe,replaceXAxis:tOe,removeXAxis:nOe,addYAxis:aOe,replaceYAxis:sOe,removeYAxis:rOe,addZAxis:qVe,replaceZAxis:WVe,removeZAxis:GVe,updateYAxisWidth:iOe}=FX.actions,oOe=FX.reducer,lOe=it([ls],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),cOe=it([lOe,ac,sc],(e,t,a)=>{if(!(!e||t==null||a==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,a-e.top-e.bottom)}}),zD=()=>Ut(cOe),dOe=()=>Ut(n4e);function o7(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Z_(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?o7(Object(a),!0).forEach(function(s){uOe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o7(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function uOe(e,t,a){return(t=mOe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function mOe(e){var t=fOe(e,"string");return typeof t=="symbol"?t:t+""}function fOe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hOe=e=>{var{point:t,childIndex:a,mainColor:s,activeDot:r,dataKey:i,clipPath:o}=e;if(r===!1||t.x==null||t.y==null)return null;var l={index:a,dataKey:i,cx:t.x,cy:t.y,r:4,fill:s??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},c=Z_(Z_(Z_({},l),$u(r)),NP(r)),u;return h.isValidElement(r)?u=h.cloneElement(r,c):typeof r=="function"?u=r(c):u=h.createElement(TX,c),h.createElement(ys,{className:"recharts-active-dot",clipPath:o},u)};function gOe(e){var{points:t,mainColor:a,activeDot:s,itemDataKey:r,clipPath:i,zIndex:o=Wa.activeDot}=e,l=Ut(pd),c=dOe();if(t==null||c==null)return null;var u=t.find(d=>c.includes(d.payload));return fa(u)?null:h.createElement(Cr,{zIndex:o},h.createElement(hOe,{point:u,childIndex:Number(l),mainColor:a,dataKey:r,activeDot:s,clipPath:i}))}var l7=(e,t,a)=>{var s=a??e;if(!fa(s))return Rs(s,t,0)},pOe=(e,t,a)=>{var s={},r=e.filter(Gj),i=e.filter(u=>u.stackId==null),o=r.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),s),l=Object.entries(o).map(u=>{var[d,f]=u,p=f.map(y=>y.dataKey),x=l7(t,a,f[0].barSize);return{stackId:d,dataKeys:p,barSize:x}}),c=i.map(u=>{var d=[u.dataKey].filter(p=>p!=null),f=l7(t,a,u.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...l,...c]};function c7(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function ub(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?c7(Object(a),!0).forEach(function(s){xOe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c7(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function xOe(e,t,a){return(t=yOe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function yOe(e){var t=bOe(e,"string");return typeof t=="symbol"?t:t+""}function bOe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vOe(e,t,a,s,r){var i=s.length;if(!(i<1)){var o=Rs(e,a,0,!0),l,c=[];if(xa(s[0].barSize)){var u=!1,d=a/i,f=s.reduce((j,w)=>j+(w.barSize||0),0);f+=(i-1)*o,f>=a&&(f-=(i-1)*o,o=0),f>=a&&d>0&&(u=!0,d*=.9,f=i*d);var p=(a-f)/2>>0,x={offset:p-o,size:0};l=s.reduce((j,w)=>{var S,_={stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:x.offset+x.size+o,size:u?d:(S=w.barSize)!==null&&S!==void 0?S:0}},E=[...j,_];return x=E[E.length-1].position,E},c)}else{var y=Rs(t,a,0,!0);a-2*y-(i-1)*o<=0&&(o=0);var N=(a-2*y-(i-1)*o)/i;N>1&&(N>>=0);var v=xa(r)?Math.min(N,r):N;l=s.reduce((j,w,S)=>[...j,{stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:y+(N+o)*S+(N-v)/2,size:v}}],c)}return l}}var wOe=(e,t,a,s,r,i,o)=>{var l=fa(o)?t:o,c=vOe(a,s,r!==i?r:i,e,l);return r!==i&&c!=null&&(c=c.map(u=>ub(ub({},u),{},{position:ub(ub({},u.position),{},{offset:u.position.offset-r/2})}))),c},NOe=(e,t)=>{var a=QP(t);if(!(!e||a==null||t==null)){var{stackId:s}=t;if(s!=null){var r=e[s];if(r){var{stackedData:i}=r;if(i)return i.find(o=>o.key===a)}}}};function jOe(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&xa(e.zIndex)?e.zIndex:t}var UX=e=>{var{chartData:t}=e,a=Zn(),s=Bs();return h.useEffect(()=>s?()=>{}:(a(yU(t)),()=>{a(yU(void 0))}),[t,a,s]),null},d7={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},BX=jr({name:"brush",initialState:d7,reducers:{setBrushSettings(e,t){return t.payload==null?d7:t.payload}}}),{setBrushSettings:VVe}=BX.actions,COe=BX.reducer;function SOe(e,t,a){return(t=_Oe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _Oe(e){var t=AOe(e,"string");return typeof t=="symbol"?t:t+""}function AOe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class FD{static create(t){return new FD(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:a,position:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(s)switch(s){case"start":return this.scale(t);case"middle":{var r=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+r}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(a){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var a=this.range(),s=a[0],r=a[a.length-1];return s<=r?t>=s&&t<=r:t>=r&&t<=s}}SOe(FD,"EPS",1e-4);function TOe(e){return(e%180+180)%180}var kOe=function(t){var{width:a,height:s}=t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=TOe(r),o=i*Math.PI/180,l=Math.atan(s/a),c=o>l&&o<Math.PI-l?s/Math.sin(o):a/Math.cos(o);return Math.abs(c)},EOe={dots:[],areas:[],lines:[]},HX=jr({name:"referenceElements",initialState:EOe,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var a=Wi(e).dots.findIndex(s=>s===t.payload);a!==-1&&e.dots.splice(a,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var a=Wi(e).areas.findIndex(s=>s===t.payload);a!==-1&&e.areas.splice(a,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var a=Wi(e).lines.findIndex(s=>s===t.payload);a!==-1&&e.lines.splice(a,1)}}}),{addDot:YVe,removeDot:QVe,addArea:KVe,removeArea:XVe,addLine:ZVe,removeLine:JVe}=HX.actions,LOe=HX.reducer,POe=h.createContext(void 0),DOe=e=>{var{children:t}=e,[a]=h.useState("".concat(Dp("recharts"),"-clip")),s=zD();if(s==null)return null;var{x:r,y:i,width:o,height:l}=s;return h.createElement(POe.Provider,{value:a},h.createElement("defs",null,h.createElement("clipPath",{id:a},h.createElement("rect",{x:r,y:i,height:l,width:o}))),t)};function qX(e,t){if(t<1)return[];if(t===1)return e;for(var a=[],s=0;s<e.length;s+=t){var r=e[s];r!==void 0&&a.push(r)}return a}function OOe(e,t,a){var s={width:e.width+t.width,height:e.height+t.height};return kOe(s,a)}function MOe(e,t,a){var s=a==="width",{x:r,y:i,width:o,height:l}=e;return t===1?{start:s?r:i,end:s?r+o:i+l}:{start:s?r+o:i+l,end:s?r:i}}function Hp(e,t,a,s,r){if(e*t<e*s||e*t>e*r)return!1;var i=a();return e*(t-e*i/2-s)>=0&&e*(t+e*i/2-r)<=0}function IOe(e,t){return qX(e,t+1)}function $Oe(e,t,a,s,r){for(var i=(s||[]).slice(),{start:o,end:l}=t,c=0,u=1,d=o,f=function(){var y=s?.[c];if(y===void 0)return{v:qX(s,u)};var N=c,v,j=()=>(v===void 0&&(v=a(y,N)),v),w=y.coordinate,S=c===0||Hp(e,w,j,d,l);S||(c=0,d=o,u+=1),S&&(d=w+e*(j()/2+r),c+=u)},p;u<=i.length;)if(p=f(),p)return p.v;return[]}function ROe(e,t,a,s,r){var i=(s||[]).slice(),o=i.length;if(o===0)return[];for(var{start:l,end:c}=t,u=1;u<=o;u++){for(var d=(o-1)%u,f=l,p=!0,x=function(){var w=s[y],S=y,_,E=()=>(_===void 0&&(_=a(w,S)),_),T=w.coordinate,A=y===d||Hp(e,T,E,f,c);if(!A)return p=!1,1;A&&(f=T+e*(E()/2+r))},y=d;y<o&&!x();y+=u);if(p){for(var N=[],v=d;v<o;v+=u)N.push(s[v]);return N}}return[]}function u7(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Ds(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?u7(Object(a),!0).forEach(function(s){zOe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u7(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function zOe(e,t,a){return(t=FOe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function FOe(e){var t=UOe(e,"string");return typeof t=="symbol"?t:t+""}function UOe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function BOe(e,t,a,s,r){for(var i=(s||[]).slice(),o=i.length,{start:l}=t,{end:c}=t,u=function(p){var x=i[p],y,N=()=>(y===void 0&&(y=a(x,p)),y);if(p===o-1){var v=e*(x.coordinate+e*N()/2-c);i[p]=x=Ds(Ds({},x),{},{tickCoord:v>0?x.coordinate-v*e:x.coordinate})}else i[p]=x=Ds(Ds({},x),{},{tickCoord:x.coordinate});if(x.tickCoord!=null){var j=Hp(e,x.tickCoord,N,l,c);j&&(c=x.tickCoord-e*(N()/2+r),i[p]=Ds(Ds({},x),{},{isShow:!0}))}},d=o-1;d>=0;d--)u(d);return i}function HOe(e,t,a,s,r,i){var o=(s||[]).slice(),l=o.length,{start:c,end:u}=t;if(i){var d=s[l-1],f=a(d,l-1),p=e*(d.coordinate+e*f/2-u);if(o[l-1]=d=Ds(Ds({},d),{},{tickCoord:p>0?d.coordinate-p*e:d.coordinate}),d.tickCoord!=null){var x=Hp(e,d.tickCoord,()=>f,c,u);x&&(u=d.tickCoord-e*(f/2+r),o[l-1]=Ds(Ds({},d),{},{isShow:!0}))}}for(var y=i?l-1:l,N=function(w){var S=o[w],_,E=()=>(_===void 0&&(_=a(S,w)),_);if(w===0){var T=e*(S.coordinate-e*E()/2-c);o[w]=S=Ds(Ds({},S),{},{tickCoord:T<0?S.coordinate-T*e:S.coordinate})}else o[w]=S=Ds(Ds({},S),{},{tickCoord:S.coordinate});if(S.tickCoord!=null){var A=Hp(e,S.tickCoord,E,c,u);A&&(c=S.tickCoord+e*(E()/2+r),o[w]=Ds(Ds({},S),{},{isShow:!0}))}},v=0;v<y;v++)N(v);return o}function UD(e,t,a){var{tick:s,ticks:r,viewBox:i,minTickGap:o,orientation:l,interval:c,tickFormatter:u,unit:d,angle:f}=e;if(!r||!r.length||!s)return[];if(zt(c)||Bj.isSsr){var p;return(p=IOe(r,zt(c)?c:0))!==null&&p!==void 0?p:[]}var x=[],y=l==="top"||l==="bottom"?"width":"height",N=d&&y==="width"?sp(d,{fontSize:t,letterSpacing:a}):{width:0,height:0},v=(S,_)=>{var E=typeof u=="function"?u(S.value,_):S.value;return y==="width"?OOe(sp(E,{fontSize:t,letterSpacing:a}),N,f):sp(E,{fontSize:t,letterSpacing:a})[y]},j=r.length>=2?xs(r[1].coordinate-r[0].coordinate):1,w=MOe(i,j,y);return c==="equidistantPreserveStart"?$Oe(j,w,v,r,o):c==="equidistantPreserveEnd"?ROe(j,w,v,r,o):(c==="preserveStart"||c==="preserveStartEnd"?x=HOe(j,w,v,r,o,c==="preserveStartEnd"):x=BOe(j,w,v,r,o),x.filter(S=>S.isShow))}var qOe=e=>{var{ticks:t,label:a,labelGapWithTick:s=5,tickSize:r=0,tickMargin:i=0}=e,o=0;if(t){Array.from(t).forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>o&&(o=f.width)}});var l=a?a.getBoundingClientRect().width:0,c=r+i,u=o+c+l+(a?s:0);return Math.round(u)}return 0},WOe=["axisLine","width","height","className","hide","ticks","axisType"];function GOe(e,t){if(e==null)return{};var a,s,r=VOe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function VOe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function Hu(){return Hu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Hu.apply(null,arguments)}function m7(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Ba(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?m7(Object(a),!0).forEach(function(s){YOe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m7(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function YOe(e,t,a){return(t=QOe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function QOe(e){var t=KOe(e,"string");return typeof t=="symbol"?t:t+""}function KOe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ol={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Wa.axis};function XOe(e){var{x:t,y:a,width:s,height:r,orientation:i,mirror:o,axisLine:l,otherSvgProps:c}=e;if(!l)return null;var u=Ba(Ba(Ba({},c),Br(l)),{},{fill:"none"});if(i==="top"||i==="bottom"){var d=+(i==="top"&&!o||i==="bottom"&&o);u=Ba(Ba({},u),{},{x1:t,y1:a+d*r,x2:t+s,y2:a+d*r})}else{var f=+(i==="left"&&!o||i==="right"&&o);u=Ba(Ba({},u),{},{x1:t+f*s,y1:a,x2:t+f*s,y2:a+r})}return h.createElement("line",Hu({},u,{className:Mt("recharts-cartesian-axis-line",Ru(l,"className"))}))}function ZOe(e,t,a,s,r,i,o,l,c){var u,d,f,p,x,y,N=l?-1:1,v=e.tickSize||o,j=zt(e.tickCoord)?e.tickCoord:e.coordinate;switch(i){case"top":u=d=e.coordinate,p=a+ +!l*r,f=p-N*v,y=f-N*c,x=j;break;case"left":f=p=e.coordinate,d=t+ +!l*s,u=d-N*v,x=u-N*c,y=j;break;case"right":f=p=e.coordinate,d=t+ +l*s,u=d+N*v,x=u+N*c,y=j;break;default:u=d=e.coordinate,p=a+ +l*r,f=p+N*v,y=f+N*c,x=j;break}return{line:{x1:u,y1:f,x2:d,y2:p},tick:{x,y}}}function JOe(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function e5e(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function t5e(e){var{option:t,tickProps:a,value:s}=e,r,i=Mt(a.className,"recharts-cartesian-axis-tick-value");if(h.isValidElement(t))r=h.cloneElement(t,Ba(Ba({},a),{},{className:i}));else if(typeof t=="function")r=t(Ba(Ba({},a),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=Mt(o,t?.className)),r=h.createElement(n1,Hu({},a,{className:o}),s)}return r}var n5e=h.forwardRef((e,t)=>{var{ticks:a=[],tick:s,tickLine:r,stroke:i,tickFormatter:o,unit:l,padding:c,tickTextProps:u,orientation:d,mirror:f,x:p,y:x,width:y,height:N,tickSize:v,tickMargin:j,fontSize:w,letterSpacing:S,getTicksConfig:_,events:E,axisType:T}=e,A=UD(Ba(Ba({},_),{},{ticks:a}),w,S),L=JOe(d,f),M=e5e(d,f),F=Br(_),$=$u(s),D={};typeof r=="object"&&(D=r);var q=Ba(Ba({},F),{},{fill:"none"},D),G=A.map(Z=>Ba({entry:Z},ZOe(Z,p,x,y,N,d,v,f,j))),U=G.map(Z=>{var{entry:Y,line:le}=Z;return h.createElement(ys,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(Y.value,"-").concat(Y.coordinate,"-").concat(Y.tickCoord)},r&&h.createElement("line",Hu({},q,le,{className:Mt("recharts-cartesian-axis-tick-line",Ru(r,"className"))})))}),V=G.map((Z,Y)=>{var{entry:le,tick:_e}=Z,te=Ba(Ba(Ba(Ba({textAnchor:L,verticalAnchor:M},F),{},{stroke:"none",fill:i},$),_e),{},{index:Y,payload:le,visibleTicksCount:A.length,tickFormatter:o,padding:c},u);return h.createElement(ys,Hu({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(le.value,"-").concat(le.coordinate,"-").concat(le.tickCoord)},Zx(E,le,Y)),s&&h.createElement(t5e,{option:s,tickProps:te,value:"".concat(typeof o=="function"?o(le.value,Y):le.value).concat(l||"")}))});return h.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(T,"-ticks")},V.length>0&&h.createElement(Cr,{zIndex:Wa.label},h.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(T,"-tick-labels"),ref:t},V)),U.length>0&&h.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(T,"-tick-lines")},U))}),a5e=h.forwardRef((e,t)=>{var{axisLine:a,width:s,height:r,className:i,hide:o,ticks:l,axisType:c}=e,u=GOe(e,WOe),[d,f]=h.useState(""),[p,x]=h.useState(""),y=h.useRef(null);h.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var v;return qOe({ticks:y.current,label:(v=e.labelRef)===null||v===void 0?void 0:v.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var N=h.useCallback(v=>{if(v){var j=v.getElementsByClassName("recharts-cartesian-axis-tick-value");y.current=j;var w=j[0];if(w){var S=window.getComputedStyle(w),_=S.fontSize,E=S.letterSpacing;(_!==d||E!==p)&&(f(_),x(E))}}},[d,p]);return o||s!=null&&s<=0||r!=null&&r<=0?null:h.createElement(Cr,{zIndex:e.zIndex},h.createElement(ys,{className:Mt("recharts-cartesian-axis",i)},h.createElement(XOe,{x:e.x,y:e.y,width:s,height:r,orientation:e.orientation,mirror:e.mirror,axisLine:a,otherSvgProps:Br(e)}),h.createElement(n5e,{ref:N,axisType:c,events:u,fontSize:d,getTicksConfig:e,height:e.height,letterSpacing:p,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:l,unit:e.unit,width:e.width,x:e.x,y:e.y}),h.createElement(JPe,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},h.createElement(cDe,{label:e.label,labelRef:e.labelRef}),e.children)))}),BD=h.forwardRef((e,t)=>{var a=Qa(e,Ol);return h.createElement(a5e,Hu({},a,{ref:t}))});BD.displayName="CartesianAxis";var s5e=["x1","y1","x2","y2","key"],r5e=["offset"],i5e=["xAxisId","yAxisId"],o5e=["xAxisId","yAxisId"];function f7(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Os(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?f7(Object(a),!0).forEach(function(s){l5e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f7(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function l5e(e,t,a){return(t=c5e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function c5e(e){var t=d5e(e,"string");return typeof t=="symbol"?t:t+""}function d5e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hu(){return hu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},hu.apply(null,arguments)}function Sw(e,t){if(e==null)return{};var a,s,r=u5e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function u5e(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var m5e=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:a,x:s,y:r,width:i,height:o,ry:l}=e;return h.createElement("rect",{x:s,y:r,ry:l,width:i,height:o,stroke:"none",fill:t,fillOpacity:a,className:"recharts-cartesian-grid-bg"})};function WX(e){var{option:t,lineItemProps:a}=e,s;if(h.isValidElement(t))s=h.cloneElement(t,a);else if(typeof t=="function")s=t(a);else{var r,{x1:i,y1:o,x2:l,y2:c,key:u}=a,d=Sw(a,s5e),f=(r=Br(d))!==null&&r!==void 0?r:{},{offset:p}=f,x=Sw(f,r5e);s=h.createElement("line",hu({},x,{x1:i,y1:o,x2:l,y2:c,fill:"none",key:u}))}return s}function f5e(e){var{x:t,width:a,horizontal:s=!0,horizontalPoints:r}=e;if(!s||!r||!r.length)return null;var{xAxisId:i,yAxisId:o}=e,l=Sw(e,i5e),c=r.map((u,d)=>{var f=Os(Os({},l),{},{x1:t,y1:u,x2:t+a,y2:u,key:"line-".concat(d),index:d});return h.createElement(WX,{key:"line-".concat(d),option:s,lineItemProps:f})});return h.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function h5e(e){var{y:t,height:a,vertical:s=!0,verticalPoints:r}=e;if(!s||!r||!r.length)return null;var{xAxisId:i,yAxisId:o}=e,l=Sw(e,o5e),c=r.map((u,d)=>{var f=Os(Os({},l),{},{x1:u,y1:t,x2:u,y2:t+a,key:"line-".concat(d),index:d});return h.createElement(WX,{option:s,lineItemProps:f,key:"line-".concat(d)})});return h.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function g5e(e){var{horizontalFill:t,fillOpacity:a,x:s,y:r,width:i,height:o,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length||l==null)return null;var u=l.map(f=>Math.round(f+r-r)).sort((f,p)=>f-p);r!==u[0]&&u.unshift(0);var d=u.map((f,p)=>{var x=!u[p+1],y=x?r+o-f:u[p+1]-f;if(y<=0)return null;var N=p%t.length;return h.createElement("rect",{key:"react-".concat(p),y:f,x:s,height:y,width:i,stroke:"none",fill:t[N],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return h.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function p5e(e){var{vertical:t=!0,verticalFill:a,fillOpacity:s,x:r,y:i,width:o,height:l,verticalPoints:c}=e;if(!t||!a||!a.length)return null;var u=c.map(f=>Math.round(f+r-r)).sort((f,p)=>f-p);r!==u[0]&&u.unshift(0);var d=u.map((f,p)=>{var x=!u[p+1],y=x?r+o-f:u[p+1]-f;if(y<=0)return null;var N=p%a.length;return h.createElement("rect",{key:"react-".concat(p),x:f,y:i,width:y,height:l,stroke:"none",fill:a[N],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return h.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var x5e=(e,t)=>{var{xAxis:a,width:s,height:r,offset:i}=e;return gQ(UD(Os(Os(Os({},Ol),a),{},{ticks:pQ(a),viewBox:{x:0,y:0,width:s,height:r}})),i.left,i.left+i.width,t)},y5e=(e,t)=>{var{yAxis:a,width:s,height:r,offset:i}=e;return gQ(UD(Os(Os(Os({},Ol),a),{},{ticks:pQ(a),viewBox:{x:0,y:0,width:s,height:r}})),i.top,i.top+i.height,t)},b5e={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Wa.grid};function OE(e){var t=MP(),a=IP(),s=CQ(),r=Os(Os({},Qa(e,b5e)),{},{x:zt(e.x)?e.x:s.left,y:zt(e.y)?e.y:s.top,width:zt(e.width)?e.width:s.width,height:zt(e.height)?e.height:s.height}),{xAxisId:i,yAxisId:o,x:l,y:c,width:u,height:d,syncWithTicks:f,horizontalValues:p,verticalValues:x}=r,y=Bs(),N=Ut(M=>iU(M,"xAxis",i,y)),v=Ut(M=>iU(M,"yAxis",o,y));if(!Uo(u)||!Uo(d)||!zt(l)||!zt(c))return null;var j=r.verticalCoordinatesGenerator||x5e,w=r.horizontalCoordinatesGenerator||y5e,{horizontalPoints:S,verticalPoints:_}=r;if((!S||!S.length)&&typeof w=="function"){var E=p&&p.length,T=w({yAxis:v?Os(Os({},v),{},{ticks:E?p:v.ticks}):void 0,width:t??u,height:a??d,offset:s},E?!0:f);lw(Array.isArray(T),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof T,"]")),Array.isArray(T)&&(S=T)}if((!_||!_.length)&&typeof j=="function"){var A=x&&x.length,L=j({xAxis:N?Os(Os({},N),{},{ticks:A?x:N.ticks}):void 0,width:t??u,height:a??d,offset:s},A?!0:f);lw(Array.isArray(L),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof L,"]")),Array.isArray(L)&&(_=L)}return h.createElement(Cr,{zIndex:r.zIndex},h.createElement("g",{className:"recharts-cartesian-grid"},h.createElement(m5e,{fill:r.fill,fillOpacity:r.fillOpacity,x:r.x,y:r.y,width:r.width,height:r.height,ry:r.ry}),h.createElement(g5e,hu({},r,{horizontalPoints:S})),h.createElement(p5e,hu({},r,{verticalPoints:_})),h.createElement(f5e,hu({},r,{offset:s,horizontalPoints:S,xAxis:N,yAxis:v})),h.createElement(h5e,hu({},r,{offset:s,verticalPoints:_,xAxis:N,yAxis:v}))))}OE.displayName="CartesianGrid";var v5e={},GX=jr({name:"errorBars",initialState:v5e,reducers:{addErrorBar:(e,t)=>{var{itemId:a,errorBar:s}=t.payload;e[a]||(e[a]=[]),e[a].push(s)},replaceErrorBar:(e,t)=>{var{itemId:a,prev:s,next:r}=t.payload;e[a]&&(e[a]=e[a].map(i=>i.dataKey===s.dataKey&&i.direction===s.direction?r:i))},removeErrorBar:(e,t)=>{var{itemId:a,errorBar:s}=t.payload;e[a]&&(e[a]=e[a].filter(r=>r.dataKey!==s.dataKey||r.direction!==s.direction))}}}),{addErrorBar:eYe,replaceErrorBar:tYe,removeErrorBar:nYe}=GX.actions,w5e=GX.reducer,N5e=["children"];function j5e(e,t){if(e==null)return{};var a,s,r=C5e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function C5e(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var S5e={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},_5e=h.createContext(S5e);function VX(e){var{children:t}=e,a=j5e(e,N5e);return h.createElement(_5e.Provider,{value:a},t)}function HD(e,t){var a,s,r=Ut(u=>ic(u,e)),i=Ut(u=>oc(u,t)),o=(a=r?.allowDataOverflow)!==null&&a!==void 0?a:ms.allowDataOverflow,l=(s=i?.allowDataOverflow)!==null&&s!==void 0?s:fs.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function YX(e){var{xAxisId:t,yAxisId:a,clipPathId:s}=e,r=zD(),{needClipX:i,needClipY:o,needClip:l}=HD(t,a);if(!l||!r)return null;var{x:c,y:u,width:d,height:f}=r;return h.createElement("clipPath",{id:"clipPath-".concat(s)},h.createElement("rect",{x:i?c:c-d/2,y:o?u:u-f/2,width:i?d:d*2,height:o?f:f*2}))}var QX=(e,t,a,s)=>gd(e,"xAxis",t,s),KX=(e,t,a,s)=>hd(e,"xAxis",t,s),XX=(e,t,a,s)=>gd(e,"yAxis",a,s),ZX=(e,t,a,s)=>hd(e,"yAxis",a,s),A5e=it([wn,QX,XX,KX,ZX],(e,t,a,s,r)=>kd(e,"xAxis")?Uf(t,s,!1):Uf(a,r,!1)),T5e=(e,t,a,s,r)=>r;function k5e(e){return e.type==="line"}var E5e=it([Qj,T5e],(e,t)=>e.filter(k5e).find(a=>a.id===t)),L5e=it([wn,QX,XX,KX,ZX,E5e,A5e,FP],(e,t,a,s,r,i,o,l)=>{var{chartData:c,dataStartIndex:u,dataEndIndex:d}=l;if(!(i==null||t==null||a==null||s==null||r==null||s.length===0||r.length===0||o==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:f,data:p}=i,x;if(p!=null&&p.length>0?x=p:x=c?.slice(u,d+1),x!=null)return bMe({layout:e,xAxis:t,yAxis:a,xAxisTicks:s,yAxisTicks:r,dataKey:f,bandSize:o,displayedData:x})}});function P5e(e){var t=$u(e),a=3,s=2;if(t!=null){var{r,strokeWidth:i}=t,o=Number(r),l=Number(i);return(Number.isNaN(o)||o<0)&&(o=a),(Number.isNaN(l)||l<0)&&(l=s),{r:o,strokeWidth:l}}return{r:a,strokeWidth:s}}var J_={exports:{}},eA={};var h7;function D5e(){if(h7)return eA;h7=1;var e=Gf();function t(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var a=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,r=e.useRef,i=e.useEffect,o=e.useMemo,l=e.useDebugValue;return eA.useSyncExternalStoreWithSelector=function(c,u,d,f,p){var x=r(null);if(x.current===null){var y={hasValue:!1,value:null};x.current=y}else y=x.current;x=o(function(){function v(E){if(!j){if(j=!0,w=E,E=f(E),p!==void 0&&y.hasValue){var T=y.value;if(p(T,E))return S=T}return S=E}if(T=S,a(w,E))return T;var A=f(E);return p!==void 0&&p(T,A)?(w=E,T):(w=E,S=A)}var j=!1,w,S,_=d===void 0?null:d;return[function(){return v(u())},_===null?void 0:function(){return v(_())}]},[u,d,f,p]);var N=s(c,x[0],x[1]);return i(function(){y.hasValue=!0,y.value=N},[N]),l(N),N},eA}var g7;function O5e(){return g7||(g7=1,J_.exports=D5e()),J_.exports}var M5e=O5e();function I5e(e){e()}function $5e(){let e=null,t=null;return{clear(){e=null,t=null},notify(){I5e(()=>{let a=e;for(;a;)a.callback(),a=a.next})},get(){const a=[];let s=e;for(;s;)a.push(s),s=s.next;return a},subscribe(a){let s=!0;const r=t={callback:a,next:null,prev:t};return r.prev?r.prev.next=r:e=r,function(){!s||e===null||(s=!1,r.next?r.next.prev=r.prev:t=r.prev,r.prev?r.prev.next=r.next:e=r.next)}}}}var p7={notify(){},get:()=>[]};function R5e(e,t){let a,s=p7,r=0,i=!1;function o(N){d();const v=s.subscribe(N);let j=!1;return()=>{j||(j=!0,v(),f())}}function l(){s.notify()}function c(){y.onStateChange&&y.onStateChange()}function u(){return i}function d(){r++,a||(a=e.subscribe(c),s=$5e())}function f(){r--,a&&r===0&&(a(),a=void 0,s.clear(),s=p7)}function p(){i||(i=!0,d())}function x(){i&&(i=!1,f())}const y={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:p,tryUnsubscribe:x,getListeners:()=>s};return y}var z5e=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",F5e=z5e(),U5e=()=>typeof navigator<"u"&&navigator.product==="ReactNative",B5e=U5e(),H5e=()=>F5e||B5e?h.useLayoutEffect:h.useEffect,q5e=H5e();function x7(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function W5e(e,t){if(x7(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;for(let r=0;r<a.length;r++)if(!Object.prototype.hasOwnProperty.call(t,a[r])||!x7(e[a[r]],t[a[r]]))return!1;return!0}var G5e=Symbol.for("react-redux-context"),V5e=typeof globalThis<"u"?globalThis:{};function Y5e(){if(!h.createContext)return{};const e=V5e[G5e]??=new Map;let t=e.get(h.createContext);return t||(t=h.createContext(null),e.set(h.createContext,t)),t}var Q5e=Y5e();function K5e(e){const{children:t,context:a,serverState:s,store:r}=e,i=h.useMemo(()=>{const c=R5e(r);return{store:r,subscription:c,getServerState:s?()=>s:void 0}},[r,s]),o=h.useMemo(()=>r.getState(),[r]);q5e(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==r.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,o]);const l=a||Q5e;return h.createElement(l.Provider,{value:i},t)}var X5e=K5e,Z5e=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function J5e(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function i1(e,t){var a=new Set([...Object.keys(e),...Object.keys(t)]);for(var s of a)if(Z5e.has(s)){if(e[s]==null&&t[s]==null)continue;if(!W5e(e[s],t[s]))return!1}else if(!J5e(e[s],t[s]))return!1;return!0}var eMe=["id"],tMe=["type","layout","connectNulls","needClip","shape"],nMe=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function qp(){return qp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},qp.apply(null,arguments)}function y7(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function No(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?y7(Object(a),!0).forEach(function(s){aMe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y7(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function aMe(e,t,a){return(t=sMe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function sMe(e){var t=rMe(e,"string");return typeof t=="symbol"?t:t+""}function rMe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qD(e,t){if(e==null)return{};var a,s,r=iMe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function iMe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var oMe=e=>{var{dataKey:t,name:a,stroke:s,legendType:r,hide:i}=e;return[{inactive:i,dataKey:t,type:r,color:s,value:ch(a,t),payload:e}]},lMe=h.memo(e=>{var{dataKey:t,data:a,stroke:s,strokeWidth:r,fill:i,name:o,hide:l,unit:c,tooltipType:u,id:d}=e,f={dataDefinedOnItem:a,positions:void 0,settings:{stroke:s,strokeWidth:r,fill:i,dataKey:t,nameKey:void 0,name:ch(o,t),hide:l,type:u,color:s,unit:c,graphicalItemId:d}};return h.createElement($D,{tooltipEntrySettings:f})}),JX=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function cMe(e,t){for(var a=e.length%2!==0?[...e,0]:e,s=[],r=0;r<t;++r)s=[...s,...a];return s}var dMe=(e,t,a)=>{var s=a.reduce((f,p)=>f+p);if(!s)return JX(t,e);for(var r=Math.floor(e/s),i=e%s,o=t-e,l=[],c=0,u=0;c<a.length;u+=a[c],++c)if(u+a[c]>i){l=[...a.slice(0,c),i-u];break}var d=l.length%2===0?[0,o]:[o];return[...cMe(a,r),...l,...d].map(f=>"".concat(f,"px")).join(", ")};function uMe(e){var{clipPathId:t,points:a,props:s}=e,{dot:r,dataKey:i,needClip:o}=s,{id:l}=s,c=qD(s,eMe),u=Br(c);return h.createElement(Q3e,{points:a,dot:r,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:i,baseProps:u,needClip:o,clipPathId:t})}function mMe(e){var{showLabels:t,children:a,points:s}=e,r=h.useMemo(()=>s?.map(i=>{var o,l,c={x:(o=i.x)!==null&&o!==void 0?o:0,y:(l=i.y)!==null&&l!==void 0?l:0,width:0,lowerWidth:0,upperWidth:0,height:0};return No(No({},c),{},{value:i.value,payload:i.payload,viewBox:c,parentViewBox:void 0,fill:void 0})}),[s]);return h.createElement(_X,{value:t?r:void 0},a)}function b7(e){var{clipPathId:t,pathRef:a,points:s,strokeDasharray:r,props:i}=e,{type:o,layout:l,connectNulls:c,needClip:u,shape:d}=i,f=qD(i,tMe),p=No(No({},Ys(f)),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(t,")"):void 0,points:s,type:o,layout:l,connectNulls:c,strokeDasharray:r??i.strokeDasharray});return h.createElement(h.Fragment,null,s?.length>1&&h.createElement(DD,qp({shapeType:"curve",option:d},p,{pathRef:a})),h.createElement(uMe,{points:s,clipPathId:t,props:i}))}function fMe(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function hMe(e){var{clipPathId:t,props:a,pathRef:s,previousPointsRef:r,longestAnimatedLengthRef:i}=e,{points:o,strokeDasharray:l,isAnimationActive:c,animationBegin:u,animationDuration:d,animationEasing:f,animateNewValues:p,width:x,height:y,onAnimationEnd:N,onAnimationStart:v}=a,j=r.current,w=r0(o,"recharts-line-"),S=h.useRef(w),[_,E]=h.useState(!1),T=!_,A=h.useCallback(()=>{typeof N=="function"&&N(),E(!1)},[N]),L=h.useCallback(()=>{typeof v=="function"&&v(),E(!0)},[v]),M=fMe(s.current),F=h.useRef(0);S.current!==w&&(F.current=i.current,S.current=w);var $=F.current;return h.createElement(mMe,{points:o,showLabels:T},a.children,h.createElement(s0,{animationId:w,begin:u,duration:d,isActive:c,easing:f,onAnimationEnd:A,onAnimationStart:L,key:w},D=>{var q=da($,M+$,D),G=Math.min(q,M),U;if(c)if(l){var V="".concat(l).split(/[,\s]+/gim).map(le=>parseFloat(le));U=dMe(G,M,V)}else U=JX(M,G);else U=l==null?void 0:String(l);if(D>0&&M>0&&(r.current=o,i.current=Math.max(i.current,G)),j){var Z=j.length/o.length,Y=D===1?o:o.map((le,_e)=>{var te=Math.floor(_e*Z);if(j[te]){var ae=j[te];return No(No({},le),{},{x:da(ae.x,le.x,D),y:da(ae.y,le.y,D)})}return p?No(No({},le),{},{x:da(x*2,le.x,D),y:da(y/2,le.y,D)}):No(No({},le),{},{x:le.x,y:le.y})});return r.current=Y,h.createElement(b7,{props:a,points:Y,clipPathId:t,pathRef:s,strokeDasharray:U})}return h.createElement(b7,{props:a,points:o,clipPathId:t,pathRef:s,strokeDasharray:U})}),h.createElement(kD,{label:a.label}))}function gMe(e){var{clipPathId:t,props:a}=e,s=h.useRef(null),r=h.useRef(0),i=h.useRef(null);return h.createElement(hMe,{props:a,clipPathId:t,previousPointsRef:s,longestAnimatedLengthRef:r,pathRef:i})}var pMe=(e,t)=>{var a,s;return{x:(a=e.x)!==null&&a!==void 0?a:void 0,y:(s=e.y)!==null&&s!==void 0?s:void 0,value:e.value,errorVal:Hn(e.payload,t)}};class xMe extends h.Component{render(){var{hide:t,dot:a,points:s,className:r,xAxisId:i,yAxisId:o,top:l,left:c,width:u,height:d,id:f,needClip:p,zIndex:x}=this.props;if(t)return null;var y=Mt("recharts-line",r),N=f,{r:v,strokeWidth:j}=P5e(a),w=OX(a),S=v*2+j,_=p?"url(#clipPath-".concat(w?"":"dots-").concat(N,")"):void 0;return h.createElement(Cr,{zIndex:x},h.createElement(ys,{className:y},p&&h.createElement("defs",null,h.createElement(YX,{clipPathId:N,xAxisId:i,yAxisId:o}),!w&&h.createElement("clipPath",{id:"clipPath-dots-".concat(N)},h.createElement("rect",{x:c-S/2,y:l-S/2,width:u+S,height:d+S}))),h.createElement(VX,{xAxisId:i,yAxisId:o,data:s,dataPointFormatter:pMe,errorBarOffset:0},h.createElement(gMe,{props:this.props,clipPathId:N}))),h.createElement(gOe,{activeDot:this.props.activeDot,points:s,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:_}))}}var eZ={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:Wa.line,type:"linear"};function yMe(e){var t=Qa(e,eZ),{activeDot:a,animateNewValues:s,animationBegin:r,animationDuration:i,animationEasing:o,connectNulls:l,dot:c,hide:u,isAnimationActive:d,label:f,legendType:p,xAxisId:x,yAxisId:y,id:N}=t,v=qD(t,nMe),{needClip:j}=HD(x,y),w=zD(),S=dh(),_=Bs(),E=Ut(F=>L5e(F,x,y,_,N));if(S!=="horizontal"&&S!=="vertical"||E==null||w==null)return null;var{height:T,width:A,x:L,y:M}=w;return h.createElement(xMe,qp({},v,{id:N,connectNulls:l,dot:c,activeDot:a,animateNewValues:s,animationBegin:r,animationDuration:i,animationEasing:o,isAnimationActive:d,hide:u,label:f,legendType:p,xAxisId:x,yAxisId:y,points:E,layout:S,height:T,width:A,left:L,top:M,needClip:j}))}function bMe(e){var{layout:t,xAxis:a,yAxis:s,xAxisTicks:r,yAxisTicks:i,dataKey:o,bandSize:l,displayedData:c}=e;return c.map((u,d)=>{var f=Hn(u,o);if(t==="horizontal"){var p=Wz({axis:a,ticks:r,bandSize:l,entry:u,index:d}),x=fa(f)?null:s.scale(f);return{x:p,y:x,value:f,payload:u}}var y=fa(f)?null:a.scale(f),N=Wz({axis:s,ticks:i,bandSize:l,entry:u,index:d});return y==null||N==null?null:{x:y,y:N,value:f,payload:u}}).filter(Boolean)}function vMe(e){var t=Qa(e,eZ),a=Bs();return h.createElement(RD,{id:t.id,type:"line"},s=>h.createElement(h.Fragment,null,h.createElement(MX,{legendPayload:oMe(t)}),h.createElement(lMe,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:s}),h.createElement($X,{type:"line",id:s,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:a}),h.createElement(yMe,qp({},t,{id:s}))))}var ME=h.memo(vMe,i1);ME.displayName="Line";function sm(e,t){var a,s;return(a=(s=e.graphicalItems.cartesianItems.find(r=>r.id===t))===null||s===void 0?void 0:s.xAxisId)!==null&&a!==void 0?a:zX}function rm(e,t){var a,s;return(a=(s=e.graphicalItems.cartesianItems.find(r=>r.id===t))===null||s===void 0?void 0:s.yAxisId)!==null&&a!==void 0?a:zX}var wMe="Invariant failed";function NMe(e,t){throw new Error(wMe)}function IE(){return IE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},IE.apply(null,arguments)}function _w(e){return h.createElement(DD,IE({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var jMe=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(s,r)=>{if(zt(t))return t;var i=zt(s)||fa(s);return i?t(s,r):(i||NMe(),a)}},CMe=(e,t,a)=>a,SMe=(e,t)=>t,g0=it([Qj,SMe],(e,t)=>e.filter(a=>a.type==="bar").find(a=>a.id===t)),_Me=it([g0],e=>e?.maxBarSize),AMe=(e,t,a,s)=>s,TMe=it([wn,Qj,sm,rm,CMe],(e,t,a,s,r)=>t.filter(i=>e==="horizontal"?i.xAxisId===a:i.yAxisId===s).filter(i=>i.isPanorama===r).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),kMe=(e,t,a)=>{var s=wn(e),r=sm(e,t),i=rm(e,t);if(!(r==null||i==null))return s==="horizontal"?_E(e,"yAxis",i,a):_E(e,"xAxis",r,a)},EMe=(e,t)=>{var a=wn(e),s=sm(e,t),r=rm(e,t);if(!(s==null||r==null))return a==="horizontal"?rU(e,"xAxis",s):rU(e,"yAxis",r)},LMe=it([TMe,eEe,EMe],pOe),PMe=(e,t,a)=>{var s,r,i=g0(e,t);if(i!=null){var o=sm(e,t),l=rm(e,t);if(!(o==null||l==null)){var c=wn(e),u=oK(e),{maxBarSize:d}=i,f=fa(d)?u:d,p,x;return c==="horizontal"?(p=gd(e,"xAxis",o,a),x=hd(e,"xAxis",o,a)):(p=gd(e,"yAxis",l,a),x=hd(e,"yAxis",l,a)),(s=(r=Uf(p,x,!0))!==null&&r!==void 0?r:f)!==null&&s!==void 0?s:0}}},tZ=(e,t,a)=>{var s=wn(e),r=sm(e,t),i=rm(e,t);if(!(r==null||i==null)){var o,l;return s==="horizontal"?(o=gd(e,"xAxis",r,a),l=hd(e,"xAxis",r,a)):(o=gd(e,"yAxis",i,a),l=hd(e,"yAxis",i,a)),Uf(o,l)}},DMe=it([LMe,oK,Jke,lK,PMe,tZ,_Me],wOe),OMe=(e,t,a)=>{var s=sm(e,t);if(s!=null)return gd(e,"xAxis",s,a)},MMe=(e,t,a)=>{var s=rm(e,t);if(s!=null)return gd(e,"yAxis",s,a)},IMe=(e,t,a)=>{var s=sm(e,t);if(s!=null)return hd(e,"xAxis",s,a)},$Me=(e,t,a)=>{var s=rm(e,t);if(s!=null)return hd(e,"yAxis",s,a)},RMe=it([DMe,g0],(e,t)=>{if(!(e==null||t==null)){var a=e.find(s=>s.stackId===t.stackId&&t.dataKey!=null&&s.dataKeys.includes(t.dataKey));if(a!=null)return a.position}}),zMe=it([kMe,g0],NOe),FMe=it([ls,DP,OMe,MMe,IMe,$Me,RMe,wn,Uke,tZ,zMe,g0,AMe],(e,t,a,s,r,i,o,l,c,u,d,f,p)=>{var{chartData:x,dataStartIndex:y,dataEndIndex:N}=c;if(!(f==null||o==null||t==null||l!=="horizontal"&&l!=="vertical"||a==null||s==null||r==null||i==null||u==null)){var{data:v}=f,j;if(v!=null&&v.length>0?j=v:j=x?.slice(y,N+1),j!=null)return gIe({layout:l,barSettings:f,pos:o,parentViewBox:t,bandSize:u,xAxis:a,yAxis:s,xAxisTicks:r,yAxisTicks:i,stackedData:d,displayedData:j,offset:e,cells:p,dataStartIndex:y})}}),UMe=["index"];function $E(){return $E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},$E.apply(null,arguments)}function BMe(e,t){if(e==null)return{};var a,s,r=HMe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function HMe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var nZ=h.createContext(void 0),qMe=e=>{var t=h.useContext(nZ);if(t!=null)return t.stackId;if(e!=null)return cAe(e)},WMe=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),GMe=e=>{var t=h.useContext(nZ);if(t!=null){var{stackId:a}=t;return"url(#".concat(WMe(a,e),")")}},VMe=e=>{var{index:t}=e,a=BMe(e,UMe),s=GMe(t);return h.createElement(ys,$E({className:"recharts-bar-stack-layer",clipPath:s},a))},YMe=["onMouseEnter","onMouseLeave","onClick"],QMe=["value","background","tooltipPosition"],KMe=["id"],XMe=["onMouseEnter","onClick","onMouseLeave"];function Ql(){return Ql=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Ql.apply(null,arguments)}function v7(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function qs(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?v7(Object(a),!0).forEach(function(s){ZMe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v7(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function ZMe(e,t,a){return(t=JMe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function JMe(e){var t=eIe(e,"string");return typeof t=="symbol"?t:t+""}function eIe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Aw(e,t){if(e==null)return{};var a,s,r=tIe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function tIe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var nIe=e=>{var{dataKey:t,name:a,fill:s,legendType:r,hide:i}=e;return[{inactive:i,dataKey:t,type:r,color:s,value:ch(a,t),payload:e}]},aIe=h.memo(e=>{var{dataKey:t,stroke:a,strokeWidth:s,fill:r,name:i,hide:o,unit:l,tooltipType:c,id:u}=e,d={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:a,strokeWidth:s,fill:r,dataKey:t,nameKey:void 0,name:ch(i,t),hide:o,type:c,color:r,unit:l,graphicalItemId:u}};return h.createElement($D,{tooltipEntrySettings:d})});function sIe(e){var t=Ut(pd),{data:a,dataKey:s,background:r,allOtherBarProps:i}=e,{onMouseEnter:o,onMouseLeave:l,onClick:c}=i,u=Aw(i,YMe),d=OD(o,s,i.id),f=MD(l),p=ID(c,s,i.id);if(!r||a==null)return null;var x=$u(r);return h.createElement(Cr,{zIndex:jOe(r,Wa.barBackground)},a.map((y,N)=>{var{value:v,background:j,tooltipPosition:w}=y,S=Aw(y,QMe);if(!j)return null;var _=d(y,N),E=f(y,N),T=p(y,N),A=qs(qs(qs(qs(qs({option:r,isActive:String(N)===t},S),{},{fill:"#eee"},j),x),Zx(u,y,N)),{},{onMouseEnter:_,onMouseLeave:E,onClick:T,dataKey:s,index:N,className:"recharts-bar-background-rectangle"});return h.createElement(_w,Ql({key:"background-bar-".concat(N)},A))}))}function rIe(e){var{showLabels:t,children:a,rects:s}=e,r=s?.map(i=>{var o={x:i.x,y:i.y,width:i.width,lowerWidth:i.width,upperWidth:i.width,height:i.height};return qs(qs({},o),{},{value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:o,fill:i.fill})});return h.createElement(_X,{value:t?r:void 0},a)}function iIe(e){var{shape:t,activeBar:a,baseProps:s,entry:r,index:i,dataKey:o}=e,l=Ut(pd),c=Ut(ND),u=a&&String(i)===l&&(c==null||o===c),d=u?a:t;return u?h.createElement(Cr,{zIndex:Wa.activeBar},h.createElement(_w,Ql({},s,{name:String(s.name)},r,{isActive:u,option:d,index:i,dataKey:o}))):h.createElement(_w,Ql({},s,{name:String(s.name)},r,{isActive:u,option:d,index:i,dataKey:o}))}function oIe(e){var{shape:t,baseProps:a,entry:s,index:r,dataKey:i}=e;return h.createElement(_w,Ql({},a,{name:String(a.name)},s,{isActive:!1,option:t,index:r,dataKey:i}))}function lIe(e){var t,{data:a,props:s}=e,r=(t=Br(s))!==null&&t!==void 0?t:{},{id:i}=r,o=Aw(r,KMe),{shape:l,dataKey:c,activeBar:u}=s,{onMouseEnter:d,onClick:f,onMouseLeave:p}=s,x=Aw(s,XMe),y=OD(d,c,i),N=MD(p),v=ID(f,c,i);return a?h.createElement(h.Fragment,null,a.map((j,w)=>h.createElement(VMe,Ql({index:w,key:"rectangle-".concat(j?.x,"-").concat(j?.y,"-").concat(j?.value,"-").concat(w),className:"recharts-bar-rectangle"},Zx(x,j,w),{onMouseEnter:y(j,w),onMouseLeave:N(j,w),onClick:v(j,w)}),u?h.createElement(iIe,{shape:l,activeBar:u,baseProps:o,entry:j,index:w,dataKey:c}):h.createElement(oIe,{shape:l,baseProps:o,entry:j,index:w,dataKey:c})))):null}function cIe(e){var{props:t,previousRectanglesRef:a}=e,{data:s,layout:r,isAnimationActive:i,animationBegin:o,animationDuration:l,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=t,f=a.current,p=r0(t,"recharts-bar-"),[x,y]=h.useState(!1),N=!x,v=h.useCallback(()=>{typeof u=="function"&&u(),y(!1)},[u]),j=h.useCallback(()=>{typeof d=="function"&&d(),y(!0)},[d]);return h.createElement(rIe,{showLabels:N,rects:s},h.createElement(s0,{animationId:p,begin:o,duration:l,isActive:i,easing:c,onAnimationEnd:v,onAnimationStart:j,key:p},w=>{var S=w===1?s:s?.map((_,E)=>{var T=f&&f[E];if(T)return qs(qs({},_),{},{x:da(T.x,_.x,w),y:da(T.y,_.y,w),width:da(T.width,_.width,w),height:da(T.height,_.height,w)});if(r==="horizontal"){var A=da(0,_.height,w),L=da(_.stackedBarStart,_.y,w);return qs(qs({},_),{},{y:L,height:A})}var M=da(0,_.width,w),F=da(_.stackedBarStart,_.x,w);return qs(qs({},_),{},{width:M,x:F})});return w>0&&(a.current=S??null),S==null?null:h.createElement(ys,null,h.createElement(lIe,{props:t,data:S}))}),h.createElement(kD,{label:t.label}),t.children)}function dIe(e){var t=h.useRef(null);return h.createElement(cIe,{previousRectanglesRef:t,props:e})}var aZ=0,uIe=(e,t)=>{var a=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:a,errorVal:Hn(e,t)}};class mIe extends h.PureComponent{render(){var{hide:t,data:a,dataKey:s,className:r,xAxisId:i,yAxisId:o,needClip:l,background:c,id:u}=this.props;if(t||a==null)return null;var d=Mt("recharts-bar",r),f=u;return h.createElement(ys,{className:d,id:u},l&&h.createElement("defs",null,h.createElement(YX,{clipPathId:f,xAxisId:i,yAxisId:o})),h.createElement(ys,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(f,")"):void 0},h.createElement(sIe,{data:a,dataKey:s,background:c,allOtherBarProps:this.props}),h.createElement(dIe,this.props)))}}var fIe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:aZ,xAxisId:0,yAxisId:0,zIndex:Wa.bar};function hIe(e){var{xAxisId:t,yAxisId:a,hide:s,legendType:r,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d}=e,{needClip:f}=HD(t,a),p=dh(),x=Bs(),y=PD(e.children,t1),N=Ut(w=>FMe(w,e.id,x,y));if(p!=="vertical"&&p!=="horizontal")return null;var v,j=N?.[0];return j==null||j.height==null||j.width==null?v=0:v=p==="vertical"?j.height/2:j.width/2,h.createElement(VX,{xAxisId:t,yAxisId:a,data:N,dataPointFormatter:uIe,errorBarOffset:v},h.createElement(mIe,Ql({},e,{layout:p,needClip:f,data:N,xAxisId:t,yAxisId:a,hide:s,legendType:r,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function gIe(e){var{layout:t,barSettings:{dataKey:a,minPointSize:s},pos:r,bandSize:i,xAxis:o,yAxis:l,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:f,offset:p,cells:x,parentViewBox:y,dataStartIndex:N}=e,v=t==="horizontal"?l:o,j=d?v.scale.domain():null,w=dAe({numericAxis:v}),S=v.scale(w);return f.map((_,E)=>{var T,A,L,M,F,$;if(d){var D=d[E+N];if(D==null)return null;T=sAe(D,j)}else T=Hn(_,a),Array.isArray(T)||(T=[w,T]);var q=jMe(s,aZ)(T[1],E);if(t==="horizontal"){var G,[U,V]=[l.scale(T[0]),l.scale(T[1])];A=Gz({axis:o,ticks:c,bandSize:i,offset:r.offset,entry:_,index:E}),L=(G=V??U)!==null&&G!==void 0?G:void 0,M=r.size;var Z=U-V;if(F=Ki(Z)?0:Z,$={x:A,y:p.top,width:M,height:p.height},Math.abs(q)>0&&Math.abs(F)<Math.abs(q)){var Y=xs(F||q)*(Math.abs(q)-Math.abs(F));L-=Y,F+=Y}}else{var[le,_e]=[o.scale(T[0]),o.scale(T[1])];if(A=le,L=Gz({axis:l,ticks:u,bandSize:i,offset:r.offset,entry:_,index:E}),M=_e-le,F=r.size,$={x:p.left,y:L,width:p.width,height:F},Math.abs(q)>0&&Math.abs(M)<Math.abs(q)){var te=xs(M||q)*(Math.abs(q)-Math.abs(M));M+=te}}if(A==null||L==null||M==null||F==null)return null;var ae=qs(qs({},_),{},{stackedBarStart:S,x:A,y:L,width:M,height:F,value:d?T:T[1],payload:_,background:$,tooltipPosition:{x:A+M/2,y:L+F/2},parentViewBox:y},x&&x[E]&&x[E].props);return ae}).filter(Boolean)}function pIe(e){var t=Qa(e,fIe),a=qMe(t.stackId),s=Bs();return h.createElement(RD,{id:t.id,type:"bar"},r=>h.createElement(h.Fragment,null,h.createElement(MX,{legendPayload:nIe(t)}),h.createElement(aIe,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:r}),h.createElement($X,{type:"bar",id:r,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:a,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:s}),h.createElement(Cr,{zIndex:t.zIndex},h.createElement(hIe,Ql({},t,{id:r})))))}var RE=h.memo(pIe,i1);RE.displayName="Bar";var xIe=["domain","range"],yIe=["domain","range"];function w7(e,t){if(e==null)return{};var a,s,r=bIe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function bIe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function N7(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function sZ(e,t){if(e===t)return!0;var{domain:a,range:s}=e,r=w7(e,xIe),{domain:i,range:o}=t,l=w7(t,yIe);return!N7(a,i)||!N7(s,o)?!1:i1(r,l)}var vIe=["dangerouslySetInnerHTML","ticks","scale"],wIe=["id","scale"];function zE(){return zE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},zE.apply(null,arguments)}function j7(e,t){if(e==null)return{};var a,s,r=NIe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function NIe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function jIe(e){var t=Zn(),a=h.useRef(null);return h.useLayoutEffect(()=>{a.current===null?t(eOe(e)):a.current!==e&&t(tOe({prev:a.current,next:e})),a.current=e},[e,t]),h.useLayoutEffect(()=>()=>{a.current&&(t(nOe(a.current)),a.current=null)},[t]),null}var CIe=e=>{var{xAxisId:t,className:a}=e,s=Ut(DP),r=Bs(),i="xAxis",o=Ut(j=>FK(j,i,t,r)),l=Ut(j=>IK(j,t)),c=Ut(j=>XEe(j,t)),u=Ut(j=>xK(j,t));if(l==null||c==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:f,scale:p}=e,x=j7(e,vIe),{id:y,scale:N}=u,v=j7(u,wIe);return h.createElement(BD,zE({},x,v,{x:c.x,y:c.y,width:l.width,height:l.height,className:Mt("recharts-".concat(i," ").concat(i),a),viewBox:s,ticks:o,axisType:i}))},SIe={allowDataOverflow:ms.allowDataOverflow,allowDecimals:ms.allowDecimals,allowDuplicatedCategory:ms.allowDuplicatedCategory,angle:ms.angle,axisLine:Ol.axisLine,height:ms.height,hide:!1,includeHidden:ms.includeHidden,interval:ms.interval,minTickGap:ms.minTickGap,mirror:ms.mirror,orientation:ms.orientation,padding:ms.padding,reversed:ms.reversed,scale:ms.scale,tick:ms.tick,tickCount:ms.tickCount,tickLine:Ol.tickLine,tickSize:Ol.tickSize,type:ms.type,xAxisId:0},_Ie=e=>{var t=Qa(e,SIe);return h.createElement(h.Fragment,null,h.createElement(jIe,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),h.createElement(CIe,t))},FE=h.memo(_Ie,sZ);FE.displayName="XAxis";var AIe=["dangerouslySetInnerHTML","ticks","scale"],TIe=["id","scale"];function UE(){return UE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},UE.apply(null,arguments)}function C7(e,t){if(e==null)return{};var a,s,r=kIe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function kIe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function EIe(e){var t=Zn(),a=h.useRef(null);return h.useLayoutEffect(()=>{a.current===null?t(aOe(e)):a.current!==e&&t(sOe({prev:a.current,next:e})),a.current=e},[e,t]),h.useLayoutEffect(()=>()=>{a.current&&(t(rOe(a.current)),a.current=null)},[t]),null}var LIe=e=>{var{yAxisId:t,className:a,width:s,label:r}=e,i=h.useRef(null),o=h.useRef(null),l=Ut(DP),c=Bs(),u=Zn(),d="yAxis",f=Ut(T=>$K(T,t)),p=Ut(T=>JEe(T,t)),x=Ut(T=>FK(T,d,t,c)),y=Ut(T=>yK(T,t));if(h.useLayoutEffect(()=>{if(!(s!=="auto"||!f||TD(r)||h.isValidElement(r)||y==null)){var T=i.current;if(T){var A=T.getCalculatedWidth();Math.round(f.width)!==Math.round(A)&&u(iOe({id:t,width:A}))}}},[x,f,u,r,t,s,y]),f==null||p==null||y==null)return null;var{dangerouslySetInnerHTML:N,ticks:v,scale:j}=e,w=C7(e,AIe),{id:S,scale:_}=y,E=C7(y,TIe);return h.createElement(BD,UE({},w,E,{ref:i,labelRef:o,x:p.x,y:p.y,tickTextProps:s==="auto"?{width:void 0}:{width:s},width:f.width,height:f.height,className:Mt("recharts-".concat(d," ").concat(d),a),viewBox:l,ticks:x,axisType:d}))},PIe={allowDataOverflow:fs.allowDataOverflow,allowDecimals:fs.allowDecimals,allowDuplicatedCategory:fs.allowDuplicatedCategory,angle:fs.angle,axisLine:Ol.axisLine,hide:!1,includeHidden:fs.includeHidden,interval:fs.interval,minTickGap:fs.minTickGap,mirror:fs.mirror,orientation:fs.orientation,padding:fs.padding,reversed:fs.reversed,scale:fs.scale,tick:fs.tick,tickCount:fs.tickCount,tickLine:Ol.tickLine,tickSize:Ol.tickSize,type:fs.type,width:fs.width,yAxisId:0},DIe=e=>{var t=Qa(e,PIe);return h.createElement(h.Fragment,null,h.createElement(EIe,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),h.createElement(LIe,t))},BE=h.memo(DIe,sZ);BE.displayName="YAxis";var OIe=(e,t)=>t,WD=it([OIe,wn,gK,cs,nX,lc,g4e,ls],N4e),GD=e=>{var t=e.currentTarget.getBoundingClientRect(),a=t.width/e.currentTarget.offsetWidth,s=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/a),chartY:Math.round((e.clientY-t.top)/s)}},rZ=vi("mouseClick"),iZ=t0();iZ.startListening({actionCreator:rZ,effect:(e,t)=>{var a=e.payload,s=WD(t.getState(),GD(a));s?.activeIndex!=null&&t.dispatch(fLe({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}});var HE=vi("mouseMove"),oZ=t0(),mb=null;oZ.startListening({actionCreator:HE,effect:(e,t)=>{var a=e.payload;mb!==null&&cancelAnimationFrame(mb);var s=GD(a);mb=requestAnimationFrame(()=>{var r=t.getState(),i=pD(r,r.tooltip.settings.shared);if(i==="axis"){var o=WD(r,s);o?.activeIndex!=null?t.dispatch(YK({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):t.dispatch(VK())}mb=null})}});function MIe(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var S7={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},lZ=jr({name:"rootProps",initialState:S7,reducers:{updateOptions:(e,t)=>{var a;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(a=t.payload.barGap)!==null&&a!==void 0?a:S7.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),IIe=lZ.reducer,{updateOptions:$Ie}=lZ.actions,cZ=jr({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:RIe}=cZ.actions,zIe=cZ.reducer,dZ=vi("keyDown"),uZ=vi("focus"),VD=t0();VD.startListening({actionCreator:dZ,effect:(e,t)=>{var a=t.getState(),s=a.rootProps.accessibilityLayer!==!1;if(s){var{keyboardInteraction:r}=a.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=xD(r,yh(a),d0(a),f0(a)),l=o==null?-1:Number(o);if(!(!Number.isFinite(l)||l<0)){var c=lc(a);if(i==="Enter"){var u=vw(a,"axis","hover",String(r.index));t.dispatch(TE({active:!r.active,activeIndex:r.index,activeCoordinate:u}));return}var d=aLe(a),f=d==="left-to-right"?1:-1,p=i==="ArrowRight"?1:-1,x=l+p*f;if(!(c==null||x>=c.length||x<0)){var y=vw(a,"axis","hover",String(x));t.dispatch(TE({active:!0,activeIndex:x.toString(),activeCoordinate:y}))}}}}}});VD.startListening({actionCreator:uZ,effect:(e,t)=>{var a=t.getState(),s=a.rootProps.accessibilityLayer!==!1;if(s){var{keyboardInteraction:r}=a.tooltip;if(!r.active&&r.index==null){var i="0",o=vw(a,"axis","hover",String(i));t.dispatch(TE({active:!0,activeIndex:i,activeCoordinate:o}))}}}});var oi=vi("externalEvent"),mZ=t0(),tA=new Map;mZ.startListening({actionCreator:oi,effect:(e,t)=>{var{handler:a,reactEvent:s}=e.payload;if(a!=null){s.persist();var r=s.type,i=tA.get(r);i!==void 0&&cancelAnimationFrame(i);var o=requestAnimationFrame(()=>{try{var l=t.getState(),c={activeCoordinate:JLe(l),activeDataKey:ND(l),activeIndex:pd(l),activeLabel:rX(l),activeTooltipIndex:pd(l),isTooltipActive:e4e(l)};a(c,s)}finally{tA.delete(r)}});tA.set(r,o)}}});var FIe=it([ph],e=>e.tooltipItemPayloads),UIe=it([FIe,m0,(e,t)=>t,(e,t,a)=>a],(e,t,a,s)=>{var r=e.find(l=>l.settings.graphicalItemId===s);if(r!=null){var{positions:i}=r;if(i!=null){var o=t(i,a);return o}}}),fZ=vi("touchMove"),hZ=t0();hZ.startListening({actionCreator:fZ,effect:(e,t)=>{var a=e.payload;if(!(a.touches==null||a.touches.length===0)){var s=t.getState(),r=pD(s,s.tooltip.settings.shared);if(r==="axis"){var i=a.touches[0];if(i==null)return;var o=WD(s,GD({clientX:i.clientX,clientY:i.clientY,currentTarget:a.currentTarget}));o?.activeIndex!=null&&t.dispatch(YK({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(r==="item"){var l,c=a.touches[0];if(document.elementFromPoint==null||c==null)return;var u=document.elementFromPoint(c.clientX,c.clientY);if(!u||!u.getAttribute)return;var d=u.getAttribute(yQ),f=(l=u.getAttribute(bQ))!==null&&l!==void 0?l:void 0,p=xh(s).find(N=>N.id===f);if(d==null||p==null||f==null)return;var{dataKey:x}=p,y=UIe(s,d,f);t.dispatch(GK({activeDataKey:x,activeIndex:d,activeCoordinate:y,activeGraphicalItemId:f}))}}}});var BIe=FY({brush:COe,cartesianAxis:oOe,chartData:J4e,errorBars:w5e,graphicalItems:f3e,layout:Z_e,legend:iTe,options:Y4e,polarAxis:EDe,polarOptions:zIe,referenceElements:LOe,rootProps:IIe,tooltip:hLe,zIndex:I4e}),HIe=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return j_e({reducer:BIe,preloadedState:t,middleware:s=>{var r;return s({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((r="es6")!==null&&r!==void 0?r:"")}).concat([iZ.middleware,oZ.middleware,VD.middleware,mZ.middleware,hZ.middleware])},enhancers:s=>{var r=s;return typeof s=="function"&&(r=s()),r.concat(tQ({type:"raf"}))},devTools:{serialize:{replacer:MIe},name:"recharts-".concat(a)}})};function gZ(e){var{preloadedState:t,children:a,reduxStoreName:s}=e,r=Bs(),i=h.useRef(null);if(r)return a;i.current==null&&(i.current=HIe(t,s));var o=CP;return h.createElement(X5e,{context:o,store:i.current},a)}function qIe(e){var{layout:t,margin:a}=e,s=Zn(),r=Bs();return h.useEffect(()=>{r||(s(Q_e(t)),s(Y_e(a)))},[s,r,t,a]),null}var pZ=h.memo(qIe,i1);function xZ(e){var t=Zn();return h.useEffect(()=>{t($Ie(e))},[t,e]),null}function _7(e){var{zIndex:t,isPanorama:a}=e,s=h.useRef(null),r=Zn();return h.useLayoutEffect(()=>(s.current&&r(O4e({zIndex:t,element:s.current,isPanorama:a})),()=>{r(M4e({zIndex:t,isPanorama:a}))}),[r,t,a]),h.createElement("g",{tabIndex:-1,ref:s})}function A7(e){var{children:t,isPanorama:a}=e,s=Ut(C4e);if(!s||s.length===0)return t;var r=s.filter(o=>o<0),i=s.filter(o=>o>0);return h.createElement(h.Fragment,null,r.map(o=>h.createElement(_7,{key:o,zIndex:o,isPanorama:a})),t,i.map(o=>h.createElement(_7,{key:o,zIndex:o,isPanorama:a})))}var WIe=["children"];function GIe(e,t){if(e==null)return{};var a,s,r=VIe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function VIe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function Tw(){return Tw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Tw.apply(null,arguments)}var YIe={width:"100%",height:"100%",display:"block"},QIe=h.forwardRef((e,t)=>{var a=MP(),s=IP(),r=IQ();if(!Uo(a)||!Uo(s))return null;var{children:i,otherAttributes:o,title:l,desc:c}=e,u,d;return o!=null&&(typeof o.tabIndex=="number"?u=o.tabIndex:u=r?0:void 0,typeof o.role=="string"?d=o.role:d=r?"application":void 0),h.createElement(xP,Tw({},o,{title:l,desc:c,role:d,tabIndex:u,width:a,height:s,style:YIe,ref:t}),i)}),KIe=e=>{var{children:t}=e,a=Ut(Ij);if(!a)return null;var{width:s,height:r,y:i,x:o}=a;return h.createElement(xP,{width:s,height:r,x:o,y:i},t)},T7=h.forwardRef((e,t)=>{var{children:a}=e,s=GIe(e,WIe),r=Bs();return r?h.createElement(KIe,null,h.createElement(A7,{isPanorama:!0},a)):h.createElement(QIe,Tw({ref:t},s),h.createElement(A7,{isPanorama:!1},a))});function XIe(){var e=Zn(),[t,a]=h.useState(null),s=Ut(pAe);return h.useEffect(()=>{if(t!=null){var r=t.getBoundingClientRect(),i=r.width/t.offsetWidth;xa(i)&&i!==s&&e(X_e(i))}},[t,e,s]),a}function k7(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function ZIe(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?k7(Object(a),!0).forEach(function(s){JIe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k7(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function JIe(e,t,a){return(t=e$e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function e$e(e){var t=t$e(e,"string");return typeof t=="symbol"?t:t+""}function t$e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qu(){return qu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},qu.apply(null,arguments)}var n$e=()=>(lPe(),null);function kw(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var a$e=h.forwardRef((e,t)=>{var a,s,r=h.useRef(null),[i,o]=h.useState({containerWidth:kw((a=e.style)===null||a===void 0?void 0:a.width),containerHeight:kw((s=e.style)===null||s===void 0?void 0:s.height)}),l=h.useCallback((u,d)=>{o(f=>{var p=Math.round(u),x=Math.round(d);return f.containerWidth===p&&f.containerHeight===x?f:{containerWidth:p,containerHeight:x}})},[]),c=h.useCallback(u=>{if(typeof t=="function"&&t(u),u!=null&&typeof ResizeObserver<"u"){var{width:d,height:f}=u.getBoundingClientRect();l(d,f);var p=y=>{var{width:N,height:v}=y[0].contentRect;l(N,v)},x=new ResizeObserver(p);x.observe(u),r.current=x}},[t,l]);return h.useEffect(()=>()=>{var u=r.current;u?.disconnect()},[l]),h.createElement(h.Fragment,null,h.createElement(Rj,{width:i.containerWidth,height:i.containerHeight}),h.createElement("div",qu({ref:c},e)))}),s$e=h.forwardRef((e,t)=>{var{width:a,height:s}=e,[r,i]=h.useState({containerWidth:kw(a),containerHeight:kw(s)}),o=h.useCallback((c,u)=>{i(d=>{var f=Math.round(c),p=Math.round(u);return d.containerWidth===f&&d.containerHeight===p?d:{containerWidth:f,containerHeight:p}})},[]),l=h.useCallback(c=>{if(typeof t=="function"&&t(c),c!=null){var{width:u,height:d}=c.getBoundingClientRect();o(u,d)}},[t,o]);return h.createElement(h.Fragment,null,h.createElement(Rj,{width:r.containerWidth,height:r.containerHeight}),h.createElement("div",qu({ref:l},e)))}),r$e=h.forwardRef((e,t)=>{var{width:a,height:s}=e;return h.createElement(h.Fragment,null,h.createElement(Rj,{width:a,height:s}),h.createElement("div",qu({ref:t},e)))}),i$e=h.forwardRef((e,t)=>{var{width:a,height:s}=e;return Gl(a)||Gl(s)?h.createElement(s$e,qu({},e,{ref:t})):h.createElement(r$e,qu({},e,{ref:t}))});function o$e(e){return e===!0?a$e:i$e}var l$e=h.forwardRef((e,t)=>{var{children:a,className:s,height:r,onClick:i,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:p,onTouchEnd:x,onTouchMove:y,onTouchStart:N,style:v,width:j,responsive:w,dispatchTouchEvents:S=!0}=e,_=h.useRef(null),E=Zn(),[T,A]=h.useState(null),[L,M]=h.useState(null),F=XIe(),$=OP(),D=$?.width>0?$.width:j,q=$?.height>0?$.height:r,G=h.useCallback(de=>{F(de),typeof t=="function"&&t(de),A(de),M(de),de!=null&&(_.current=de)},[F,t,A,M]),U=h.useCallback(de=>{E(rZ(de)),E(oi({handler:i,reactEvent:de}))},[E,i]),V=h.useCallback(de=>{E(HE(de)),E(oi({handler:u,reactEvent:de}))},[E,u]),Z=h.useCallback(de=>{E(VK()),E(oi({handler:d,reactEvent:de}))},[E,d]),Y=h.useCallback(de=>{E(HE(de)),E(oi({handler:f,reactEvent:de}))},[E,f]),le=h.useCallback(()=>{E(uZ())},[E]),_e=h.useCallback(de=>{E(dZ(de.key))},[E]),te=h.useCallback(de=>{E(oi({handler:o,reactEvent:de}))},[E,o]),ae=h.useCallback(de=>{E(oi({handler:l,reactEvent:de}))},[E,l]),ye=h.useCallback(de=>{E(oi({handler:c,reactEvent:de}))},[E,c]),Ne=h.useCallback(de=>{E(oi({handler:p,reactEvent:de}))},[E,p]),he=h.useCallback(de=>{E(oi({handler:N,reactEvent:de}))},[E,N]),ve=h.useCallback(de=>{S&&E(fZ(de)),E(oi({handler:y,reactEvent:de}))},[E,S,y]),ne=h.useCallback(de=>{E(oi({handler:x,reactEvent:de}))},[E,x]),Se=o$e(w);return h.createElement(mX.Provider,{value:T},h.createElement(bY.Provider,{value:L},h.createElement(Se,{width:D??v?.width,height:q??v?.height,className:Mt("recharts-wrapper",s),style:ZIe({position:"relative",cursor:"default",width:D,height:q},v),onClick:U,onContextMenu:te,onDoubleClick:ae,onFocus:le,onKeyDown:_e,onMouseDown:ye,onMouseEnter:V,onMouseLeave:Z,onMouseMove:Y,onMouseUp:Ne,onTouchEnd:ne,onTouchMove:ve,onTouchStart:he,ref:G},h.createElement(n$e,null),a)))}),c$e=["width","height","responsive","children","className","style","compact","title","desc"];function d$e(e,t){if(e==null)return{};var a,s,r=u$e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function u$e(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var yZ=h.forwardRef((e,t)=>{var{width:a,height:s,responsive:r,children:i,className:o,style:l,compact:c,title:u,desc:d}=e,f=d$e(e,c$e),p=Br(f);return c?h.createElement(h.Fragment,null,h.createElement(Rj,{width:a,height:s}),h.createElement(T7,{otherAttributes:p,title:u,desc:d},i)):h.createElement(l$e,{className:o,style:l,width:a,height:s,responsive:r??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},h.createElement(T7,{otherAttributes:p,title:u,desc:d,ref:t},h.createElement(DOe,null,i)))});function qE(){return qE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},qE.apply(null,arguments)}var m$e={top:5,right:5,bottom:5,left:5},f$e={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:m$e,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},bZ=h.forwardRef(function(t,a){var s,r=Qa(t.categoricalChartProps,f$e),{chartName:i,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,categoricalChartProps:u}=t,d={chartName:i,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,eventEmitter:void 0};return h.createElement(gZ,{preloadedState:{options:d},reduxStoreName:(s=u.id)!==null&&s!==void 0?s:i},h.createElement(UX,{chartData:u.data}),h.createElement(pZ,{layout:r.layout,margin:r.margin}),h.createElement(xZ,{baseValue:r.baseValue,accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className,reverseStackOrder:r.reverseStackOrder}),h.createElement(yZ,qE({},r,{ref:a})))}),h$e=["axis"],g$e=h.forwardRef((e,t)=>h.createElement(bZ,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:h$e,tooltipPayloadSearcher:AD,categoricalChartProps:e,ref:t})),p$e=["axis","item"],x$e=h.forwardRef((e,t)=>h.createElement(bZ,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:p$e,tooltipPayloadSearcher:AD,categoricalChartProps:e,ref:t}));function y$e(e){var t=Zn();return h.useEffect(()=>{t(RIe(e))},[t,e]),null}var b$e=["layout"];function WE(){return WE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},WE.apply(null,arguments)}function v$e(e,t){if(e==null)return{};var a,s,r=w$e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function w$e(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var N$e={top:5,right:5,bottom:5,left:5},vZ={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:N$e,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},j$e=h.forwardRef(function(t,a){var s,r=Qa(t.categoricalChartProps,vZ),{layout:i}=r,o=v$e(r,b$e),{chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d}=t,f={chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,eventEmitter:void 0};return h.createElement(gZ,{preloadedState:{options:f},reduxStoreName:(s=r.id)!==null&&s!==void 0?s:l},h.createElement(UX,{chartData:r.data}),h.createElement(pZ,{layout:i,margin:r.margin}),h.createElement(xZ,{baseValue:void 0,accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className,reverseStackOrder:r.reverseStackOrder}),h.createElement(y$e,{cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius}),h.createElement(yZ,WE({},o,{ref:a})))});function E7(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function L7(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?E7(Object(a),!0).forEach(function(s){C$e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E7(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function C$e(e,t,a){return(t=S$e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function S$e(e){var t=_$e(e,"string");return typeof t=="symbol"?t:t+""}function _$e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var A$e=["item"],T$e=L7(L7({},vZ),{},{layout:"centric",startAngle:0,endAngle:360}),k$e=h.forwardRef((e,t)=>{var a=Qa(e,T$e);return h.createElement(j$e,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:A$e,tooltipPayloadSearcher:AD,categoricalChartProps:a,ref:t})});const P7={user_id:"",start_date:"",end_date:"",target_amount:"",annual_amount:"",period_type:"",period_year:new Date().getFullYear(),period_number:1,prorate_first_period:!0,use_annual_mode:!0},wZ=[{value:"MONTHLY",label:"Monthly",divisor:12},{value:"QUARTERLY",label:"Quarterly",divisor:4},{value:"SEMIANNUAL",label:"Semi-Annual",divisor:2},{value:"ANNUAL",label:"Annual",divisor:1},{value:"CUSTOM",label:"Custom (Manual)",divisor:1}],D7=["#6366f1","#22c55e","#f97316","#0ea5e9","#a855f7","#f43f5e","#eab308","#8b5cf6","#10b981","#ec4899","#14b8a6","#f59e0b"];function E$e({name:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",required:o=!1,isSubmitted:l=!1}){const[c,u]=h.useState(!1),[d,f]=h.useState(""),p=h.useRef(null),x=t.find(j=>String(j.id)===String(a)),y=x?r(x):"",N=o&&l&&!a,v=h.useMemo(()=>{const j=d.toLowerCase();return j?t.filter(w=>r(w).toLowerCase().includes(j)):t},[t,d,r]);return h.useEffect(()=>{const j=w=>{p.current&&!p.current.contains(w.target)&&u(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]),n.jsxs("div",{ref:p,className:"relative flex justify-center w-full",children:[n.jsx("input",{value:c?d:y,placeholder:i,onFocus:()=>u(!0),onChange:j=>{f(j.target.value),u(!0)},className:`w-full border rounded-lg p-1 text-gray-700 focus:outline-none focus:ring-1
          ${N?"border-red-500 focus:ring-red-400 focus:border-red-400":"border-gray-300 focus:ring-blue-400 focus:border-blue-400"}`}),c&&n.jsx("div",{className:"absolute top-full left-0 z-50 mt-1 w-full bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:v.length?v.map(j=>n.jsx("button",{type:"button",onClick:()=>{s({target:{name:e,value:String(j.id)}}),u(!1),f("")},className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-50",children:r(j)},j.id)):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results found"})})]})}function o1({currentUserRole:e,currentUserId:t}){const{user:a,mutate:s}=qt(),r=a?.company?.currency||"",i=r==="$"?_ue:Tue;h.useEffect(()=>{s&&s()},[s]),h.useEffect(()=>{a?.company&&console.log("Dashboard detected Company Settings:",a.company)},[a]),h.useEffect(()=>{document.title="Targets | Sari-Sari CRM"},[]);const[o,l]=h.useState([]),[c,u]=h.useState([]),[d,f]=h.useState(!1),[p,x]=h.useState(""),[y,N]=h.useState(""),[v,j]=h.useState(1),[w,S]=h.useState(10),[_,E]=h.useState(!1),[T,A]=h.useState(!1),[L,M]=h.useState(!1),[F,$]=h.useState(null),[D,q]=h.useState(P7),[G,U]=h.useState(null),[V,Z]=h.useState(null),[Y,le]=h.useState(!1),[_e,te]=h.useState([]),[ae,ye]=h.useState(!1),[Ne,he]=h.useState("annual"),[ve,ne]=h.useState(1),[Se,de]=h.useState("overview"),[ke,Te]=h.useState(null),[pe,ze]=h.useState(!1),[Pe,We]=h.useState(null),[tt,lt]=h.useState(!1),[Ie,rt]=h.useState(""),[He,Ke]=h.useState(null),[Je,Oe]=h.useState(null),[Ce,fe]=h.useState(new Date().getFullYear()),[ue,H]=h.useState(""),[K,we]=h.useState(1),Me=h.useMemo(()=>["CEO","ADMIN","GROUP MANAGER"].includes(e?.toUpperCase()),[e]),ce=h.useMemo(()=>["CEO","ADMIN","GROUP MANAGER"].includes(e?.toUpperCase()),[e]),oe=h.useCallback(async()=>{f(!0);try{const re=await se.get("/targets/admin/fetch-all");l(re.data)}catch(re){console.error(re),W.error("Failed to load targets.")}finally{f(!1)}},[]),De=h.useCallback(async()=>{try{const re=await se.get("/targets/admin/get-users");u(re.data)}catch(re){console.error(re)}},[]),$e=h.useCallback(async()=>{try{const re=await se.get("/targets/fiscal-settings");Oe(re.data)}catch(re){console.error("Failed to fetch fiscal settings:",re)}},[]),Xe=h.useCallback(async()=>{ze(!0);try{const re=new URLSearchParams;ue&&re.append("period_type",ue),Ce&&re.append("period_year",Ce),K&&re.append("period_number",K);const Ee=await se.get(`/targets/leaderboard?${re.toString()}`);Te(Ee.data)}catch(re){console.error(re),W.error("Failed to load leaderboard.")}finally{ze(!1)}},[ue,Ce,K]),Ze=h.useCallback(async()=>{try{const re=new URLSearchParams;ue&&re.append("period_type",ue),Ce&&re.append("period_year",Ce),K&&re.append("period_number",K);const Ee=await se.get(`/targets/team-summary?${re.toString()}`);Ke(Ee.data)}catch(re){console.error(re)}},[ue,Ce,K]),mt=h.useCallback(async(re,Ee="")=>{lt(!0);try{const Qe=Ee?`?period_type=${encodeURIComponent(Ee)}`:"",gt=await se.get(`/targets/history/${re}${Qe}`);We(gt.data)}catch(Qe){console.error(Qe),W.error("Failed to load user history.")}finally{lt(!1)}},[]);h.useEffect(()=>{oe(),De(),$e()},[oe,De,$e]),h.useEffect(()=>{Se==="leaderboard"&&(Xe(),Ze())},[Se,Xe,Ze]);const nt=h.useMemo(()=>{const re=o.reduce((Ct,kt)=>Ct+(Number(kt.target_amount)||0),0),Ee=o.reduce((Ct,kt)=>Ct+(Number(kt.achieved_amount)||0),0),Qe=re>0?(Ee/re*100).toFixed(1):0,gt=Math.max(0,re-Ee);return{totalTarget:re,totalAchieved:Ee,achievement:Qe,remaining:gt,totalCount:o.length}},[o]),Nt=h.useCallback(()=>(Ee=>Ne==="annual"?Ee:Ee.filter(Qe=>{const gt=new Date(Qe.start_date),Ct=new Date(Qe.end_date),kt=gt.getMonth(),Dt=Ct.getMonth();let on=!1;if(Ne==="semiannual")ve===1?on=kt<=5&&Dt>=0:on=kt<=11&&Dt>=6;else if(Ne==="trimester"){const ia=[{start:0,end:3},{start:4,end:7},{start:8,end:11}][ve-1];on=kt<=ia.end&&Dt>=ia.start}else if(Ne==="quarterly"){const ia=[{start:0,end:2},{start:3,end:5},{start:6,end:8},{start:9,end:11}][ve-1];on=kt<=ia.end&&Dt>=ia.start}return on}))(o),[o,Ne,ve]),wt=h.useMemo(()=>{const re=Nt(),Ee={};re.forEach(kt=>{const Dt=kt.user_id,on=kt.user?`${kt.user.first_name} ${kt.user.last_name}`:"Unknown";Ee[Dt]||(Ee[Dt]={userId:Dt,name:on,targetAmount:0,achievedAmount:0}),Ee[Dt].targetAmount+=Number(kt.target_amount)||0,Ee[Dt].achievedAmount+=Number(kt.achieved_amount)||0});const Qe=Object.values(Ee).map((kt,Dt)=>({...kt,fill:D7[Dt%D7.length]})),gt=Qe.reduce((kt,Dt)=>kt+Dt.targetAmount,0);return Qe.map(kt=>({...kt,percentage:gt>0?(kt.targetAmount/gt*100).toFixed(1):0}))},[Nt]),Tt=h.useMemo(()=>wt.slice(0,8).map(re=>({name:re.name.split(" ")[0],achievement:Number(re.achievedAmount),target:Number(re.targetAmount)})),[wt]),Re=h.useMemo(()=>{const re=Array.isArray(c)&&c.length?c:o.filter(gt=>gt.user&&gt.user.id).map(gt=>({id:gt.user.id,first_name:gt.user.first_name,last_name:gt.user.last_name})),Ee=new Set,Qe=[];for(const gt of re){const Ct=String(gt.id);Ee.has(Ct)||(Ee.add(Ct),Qe.push(gt))}return Qe.sort((gt,Ct)=>{const kt=`${gt.first_name||""} ${gt.last_name||""}`.trim().toLowerCase(),Dt=`${Ct.first_name||""} ${Ct.last_name||""}`.trim().toLowerCase();return kt.localeCompare(Dt)}),Qe},[c,o]),me=h.useMemo(()=>{const re=p.toLowerCase();return o.filter(Ee=>{const Qe=!y||String(Ee.user?.id||"")===String(y),gt=Ee.user?`${Ee.user.first_name} ${Ee.user.last_name}`.toLowerCase():"";return Qe&&(gt.includes(re)||Ee.start_date?.includes(re)||Ee.end_date?.includes(re))})},[o,p,y]);h.useEffect(()=>{j(1)},[p,y]);const ie=Math.max(1,Math.ceil(me.length/w)),Fe=h.useMemo(()=>{const re=(v-1)*w;return me.slice(re,re+w)},[me,v,w]),Le=re=>{const{name:Ee,value:Qe}=re.target;q(gt=>({...gt,[Ee]:Qe}))},be=()=>{q(P7),A(!1),$(null),ye(!1),E(!0)},ee=re=>{q({user_id:re.user?.id?String(re.user.id):"",start_date:re.start_date||"",end_date:re.end_date||"",target_amount:re.target_amount?.toString()||"",annual_amount:"",period_type:re.period_type||"CUSTOM",period_year:re.period_year||new Date().getFullYear(),period_number:re.period_number||1,prorate_first_period:!0,use_annual_mode:!1}),A(!0),$(re.id),ye(!1),E(!0),U(null)},O=re=>{const Ee=re.user?`${re.user.first_name} ${re.user.last_name}`:"Unknown";Z({title:"Delete Target",message:n.jsxs("span",{children:["Are you sure you want to delete the target for"," ",n.jsx("span",{className:"font-semibold",children:Ee}),"?"]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:async()=>{await se.delete(`/targets/admin/${re.id}`),W.success("Target deleted successfully."),oe(),U(null)}})},z=()=>{if(Fe.every(re=>_e.includes(re.id)))te(_e.filter(re=>!Fe.map(Ee=>Ee.id).includes(re)));else{const re=Fe.map(Ee=>Ee.id);te([...new Set([..._e,...re])])}},I=re=>{te(Ee=>Ee.includes(re)?Ee.filter(Qe=>Qe!==re):[...Ee,re])},Q=async()=>{_e.length!==0&&Z({title:"Delete Targets",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:_e.length})," selected targets? This action cannot be undone."]}),confirmLabel:`Delete ${_e.length} Target(s)`,cancelLabel:"Cancel",variant:"danger",action:async()=>{await se.post("/targets/admin/bulk-delete",{target_ids:_e}),W.success(`Successfully deleted ${_e.length} targets`),te([]),oe()}})},ge=re=>{if(re.preventDefault(),ye(!0),!D.user_id){W.error("Assign User is required.");return}if(!D.period_type){W.error("Period Type is required.");return}const Ee=D.use_annual_mode&&D.period_type!=="CUSTOM"&&!T;if(Ee){if(!D.annual_amount||Number(D.annual_amount)<=0){W.error("Annual target amount must be greater than 0.");return}}else if(!D.target_amount||Number(D.target_amount)<=0){W.error("Target amount must be greater than 0.");return}if(!Ee&&D.start_date&&D.end_date&&new Date(D.end_date)<new Date(D.start_date)){W.error("End date must be after start date.");return}const Qe=T?"Update Target":"Create Target(s)",gt=()=>{const Dt=Number(D.period_number)||1;return D.period_type==="MONTHLY"?Math.max(1,12-Dt+1):D.period_type==="QUARTERLY"?Math.max(1,4-Dt+1):D.period_type==="SEMIANNUAL"?Math.max(1,2-Dt+1):1},Ct=()=>{const Dt=Number(D.annual_amount)||0,on=wZ.find(Qn=>Qn.value===D.period_type);return on?(Dt/on.divisor).toFixed(2):0},kt=Ee?`This will create ${gt()} ${D.period_type?.toLowerCase()} target(s) for the selected user.

Annual Target: ${r}${Number(D.annual_amount).toLocaleString()}
Per Period: ${r}${Number(Ct()).toLocaleString()}

The first period may be prorated if it starts mid-period.`:"Are you sure you want to proceed?";Z({title:Qe,message:kt,confirmLabel:Qe,cancelLabel:"Cancel",variant:"primary",action:async()=>{M(!0);try{if(T){const Dt={user_id:Number(D.user_id),target_amount:Number(D.target_amount),start_date:D.start_date,end_date:D.end_date,period_type:D.period_type||"CUSTOM",period_year:D.period_year||new Date().getFullYear(),period_number:D.period_number||null};await se.put(`/targets/admin/${F}`,Dt),W.success("Target updated successfully.")}else if(Ee){const Dt=new Date().toISOString().split("T")[0],on={user_id:Number(D.user_id),annual_amount:Number(D.annual_amount),period_type:D.period_type,generation_date:D.start_date||Dt,period_year:Number(D.period_year)||new Date().getFullYear(),period_number:Number(D.period_number)||1,prorate_first_period:D.prorate_first_period!==!1},Qn=await se.post("/targets/admin/create-annual-targets",on);oe(),W.success(Qn.data.message||"Targets created successfully.")}else{const Dt={user_id:Number(D.user_id),target_amount:Number(D.target_amount),start_date:D.start_date,end_date:D.end_date,period_type:D.period_type||"CUSTOM",period_year:D.period_year||new Date().getFullYear(),period_number:D.period_number||null};await se.post("/targets/admin/create",Dt),oe(),W.success("Target created successfully.")}E(!1),oe()}catch(Dt){console.error(Dt);const on=Dt.response?.data?.detail||Dt.message||"Operation failed.";W.error(on)}finally{M(!1)}}})};return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[d&&n.jsx(Wt,{message:"Loading targets..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold",children:[n.jsx(mr,{className:"mr-2 text-blue-600"})," Targets"]}),Me&&n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:be,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(xn,{className:"mr-2"})," Add Target"]})})]}),e?.toUpperCase()!=="SALES"&&n.jsxs("div",{className:"flex border-b border-gray-200 mb-6",children:[n.jsxs("button",{onClick:()=>de("overview"),className:`px-4 py-3 text-sm font-medium border-b-2 transition ${Se==="overview"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[n.jsx(UI,{className:"inline mr-2"}),"Overview"]}),n.jsxs("button",{onClick:()=>de("leaderboard"),className:`px-4 py-3 text-sm font-medium border-b-2 transition ${Se==="leaderboard"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[n.jsx(WS,{className:"inline mr-2"}),"Leaderboard"]}),n.jsxs("button",{onClick:()=>de("history"),className:`px-4 py-3 text-sm font-medium border-b-2 transition ${Se==="history"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[n.jsx(Vs,{className:"inline mr-2"}),"History"]})]}),Se==="overview"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[n.jsx($c,{title:"Total Targets",value:nt.totalCount,icon:n.jsx(mr,{size:22}),color:"blue"}),n.jsx($c,{title:"Target Amount",value:`${r}${nt.totalTarget.toLocaleString("en-US",{maximumFractionDigits:0})}`,icon:n.jsx(i,{size:22}),color:"green"}),n.jsx($c,{title:"Achieved Amount",value:`${r}${nt.totalAchieved.toLocaleString("en-US",{maximumFractionDigits:0})}`,icon:n.jsx(id,{size:22}),color:"purple"}),n.jsx($c,{title:"Achievement Rate",value:`${nt.achievement}%`,icon:n.jsx(mr,{size:22}),color:"orange"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow p-4 md:h-[420px] h-[350px] flex flex-col",children:[n.jsxs("div",{className:"mb-4 text-center",children:[n.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Sales Achievement"}),n.jsx("div",{className:"h-[38px] w-full invisible"})]}),Tt.length>0?n.jsx("div",{className:"flex-1 min-h-0 w-full",children:n.jsx(E_,{width:"100%",height:"100%",children:n.jsxs(x$e,{data:Tt,children:[n.jsx(OE,{strokeDasharray:"3 3",vertical:!1}),n.jsx(FE,{dataKey:"name",tickLine:!1,axisLine:!1,tick:{fontSize:12,fill:"#6b7280"}}),n.jsx(BE,{tickLine:!1,axisLine:!1,label:{value:"Amount",angle:-90,position:"insideLeft",offset:3},domain:[0,re=>Math.ceil(re/50)*50],tick:{fontSize:12,fill:"#6b7280"}}),n.jsx(U_,{cursor:{fill:"rgba(0, 0, 0, 0.15)"},wrapperStyle:{outline:"none",zIndex:9999,pointerEvents:"auto"},contentStyle:{backgroundColor:"#ffffff",border:"2px solid #1f2937",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.2)",zIndex:9999,pointerEvents:"auto"},labelFormatter:re=>`Sales: ${re}`,formatter:(re,Ee,Qe)=>{if(!Qe||!Qe.payload)return[re,Ee];const gt=Qe.payload,Ct=Number(gt.achievement)||0,kt=Number(gt.target)||0,Dt=Math.max(0,kt-Ct),on=kt>0?(Ct/kt*100).toFixed(1):0;return Ee==="Achieved"?[`${r}${Ct.toLocaleString()} (${on}%)`,"Achieved"]:Ee==="Remaining"?[`${r}${Dt.toLocaleString()}`,"Remaining"]:[re,Ee]}}),n.jsx(RE,{dataKey:"achievement",stackId:"a",fill:"#10b981",name:"Achieved",label:({x:re,y:Ee,width:Qe,value:gt,payload:Ct})=>{if(!Ct||Ct.target===void 0)return null;const kt=(gt/Ct.target*100).toFixed(0),Dt=Ee-10<0?10:Ee-10;return n.jsxs("text",{x:re+Qe/2,y:Dt,textAnchor:"middle",fill:"#111827",fontSize:10,fontWeight:500,children:[kt,"%"]})}}),n.jsx(RE,{dataKey:re=>Math.max(0,re.target-re.achievement),stackId:"a",fill:"#e5e7eb",name:"Remaining",radius:[0,4,4,0]})]})})}):n.jsxs("div",{className:"flex flex-col items-center justify-center flex-1 text-gray-400",children:[n.jsx(Hie,{size:48,className:"mb-2 opacity-20"}),n.jsx("p",{className:"text-gray-500 font-medium text-center",children:"No sales data available"})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow p-4 md:h-[420px] h-[350px] flex flex-col",children:[n.jsxs("div",{className:"text-center mb-4",children:[n.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Target Distribution by Sales"}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center items-center flex-wrap",children:[n.jsxs("select",{value:Ne,onChange:re=>{he(re.target.value),ne(1)},className:"border border-gray-300 rounded px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"annual",children:"Annual"}),n.jsx("option",{value:"semiannual",children:"Every 6 Months"}),n.jsx("option",{value:"trimester",children:"Every 4 Months"}),n.jsx("option",{value:"quarterly",children:"Quarterly"})]}),Ne!=="annual"&&n.jsxs("select",{value:ve,onChange:re=>ne(parseInt(re.target.value)),className:"border border-gray-300 rounded px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[Ne==="semiannual"&&n.jsxs(n.Fragment,{children:[n.jsx("option",{value:1,children:"Jan - Jun"}),n.jsx("option",{value:2,children:"Jul - Dec"})]}),Ne==="trimester"&&n.jsxs(n.Fragment,{children:[n.jsx("option",{value:1,children:"Jan - Apr"}),n.jsx("option",{value:2,children:"May - Aug"}),n.jsx("option",{value:3,children:"Sep - Dec"})]}),Ne==="quarterly"&&n.jsxs(n.Fragment,{children:[n.jsx("option",{value:1,children:"Q1 (Jan - Mar)"}),n.jsx("option",{value:2,children:"Q2 (Apr - Jun)"}),n.jsx("option",{value:3,children:"Q3 (Jul - Sep)"}),n.jsx("option",{value:4,children:"Q4 (Oct - Dec)"})]})]})]})]}),wt.length>0?n.jsx("div",{className:"flex-1 min-h-0 w-full",children:n.jsx(E_,{width:"100%",height:"100%",children:n.jsxs(k$e,{children:[n.jsx(U_,{contentStyle:{backgroundColor:"#fff",border:"1px solid #333",borderRadius:"6px",padding:"10px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",outline:"none"},content:({active:re,payload:Ee})=>{if(re&&Ee&&Ee.length>0){const Qe=Ee[0].payload;return n.jsxs("div",{className:"bg-white p-3 border border-gray-300 rounded shadow-lg",children:[n.jsx("p",{className:"text-sm font-semibold text-gray-800",children:Qe.name}),n.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[n.jsx("span",{className:"font-semibold",children:"Target Amount:"})," ",r,Number(Qe.targetAmount||0).toLocaleString("en-US",{maximumFractionDigits:0})]}),n.jsxs("p",{className:"text-xs text-purple-600 font-semibold mt-2",children:["Distribution: ",Qe.percentage,"%"]})]})}return null}}),n.jsx(RX,{data:wt,dataKey:"targetAmount",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:({name:re,percentage:Ee,fill:Qe})=>n.jsxs("text",{fill:Qe,fontSize:12,fontWeight:600,children:[re.split(" ")[0],": ",Ee,"%"]}),labelLine:!1,isAnimationActive:!0,animationDuration:800})]})})}):n.jsxs("div",{className:"flex flex-col items-center justify-center flex-1 text-gray-400",children:[n.jsx(UI,{size:48,className:"mb-2 opacity-20"}),n.jsx("p",{className:"text-gray-500 font-medium text-center",children:"No targets data available"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-stretch sm:items-center gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:flex-1 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Vt,{className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search targets...",value:p,onChange:re=>x(re.target.value),className:"w-full outline-none"})]}),n.jsx("div",{className:"w-full sm:w-64",children:n.jsxs("select",{value:y,onChange:re=>N(re.target.value),className:"w-full h-11 border border-gray-300 rounded-lg px-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[n.jsx("option",{value:"",children:"All users"}),Re.map(re=>n.jsx("option",{value:String(re.id),children:`${re.first_name||""} ${re.last_name||""}`.trim()||"Unknown"},re.id))]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 font-semibold text-gray-600",children:n.jsxs("tr",{children:[ce&&n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:Fe.length>0&&Fe.every(re=>_e.includes(re.id)),onChange:z})}),n.jsx("th",{className:"py-3 px-4 text-left",children:"User"}),n.jsx("th",{className:"py-3 px-4 text-left",children:"Target Amount"}),n.jsx("th",{className:"py-3 px-4 text-left",children:"Achieved Amount"}),n.jsx("th",{className:"py-3 px-4 text-left",children:"Achievement %"}),n.jsx("th",{className:"py-3 px-4 text-left",children:"Start Date"}),n.jsx("th",{className:"py-3 px-4 text-left",children:"End Date"}),ce&&n.jsx("th",{className:"py-3 px-4 text-center w-24",children:_e.length>0?n.jsx("button",{onClick:Q,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${_e.length} selected targets`,children:n.jsx(vn,{size:18})}):""})]})}),n.jsx("tbody",{children:Fe.length>0?Fe.map(re=>{const Ee=Number(re.target_amount)>0?(Number(re.achieved_amount)/Number(re.target_amount)*100).toFixed(1):0;return n.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer border-b border-gray-200",children:[ce&&n.jsx("td",{className:"py-3 px-4",onClick:Qe=>Qe.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:_e.includes(re.id),onChange:()=>I(re.id)})}),n.jsx("td",{className:"py-3 px-4 text-left font-medium",onClick:()=>U(re),children:re.user?`${re.user.first_name} ${re.user.last_name}`:"Unknown"}),n.jsxs("td",{className:"py-3 px-4 text-left",onClick:()=>U(re),children:[r,Number(re.target_amount).toLocaleString()]}),n.jsxs("td",{className:"py-3 px-4 text-left",onClick:()=>U(re),children:[r,Number(re.achieved_amount).toLocaleString()]}),n.jsx("td",{className:"py-3 px-4 text-left",onClick:()=>U(re),children:n.jsxs("span",{className:`px-2 py-1 rounded text-white text-xs font-semibold ${Ee>=100?"bg-green-500":Ee>=75?"bg-blue-500":Ee>=50?"bg-yellow-500":"bg-red-500"}`,children:[Ee,"%"]})}),n.jsx("td",{className:"py-3 px-4 text-left",onClick:()=>U(re),children:re.start_date}),n.jsx("td",{className:"py-3 px-4 text-left",onClick:()=>U(re),children:re.end_date}),n.jsx("td",{})]},re.id)}):n.jsx("tr",{children:n.jsx("td",{colSpan:"8",className:"py-4 px-4 text-center text-gray-500",children:"No targets found"})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:me.length,pageSize:w,currentPage:v,onPrev:()=>j(re=>Math.max(re-1,1)),onNext:()=>j(re=>Math.min(re+1,ie)),onPageSizeChange:re=>{S(re),j(1)},pageSizeOptions:[10,20,30,40,50],label:"targets"})]}),Se==="leaderboard"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm flex flex-wrap gap-4 items-center",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Pt,{className:"text-gray-500"}),n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filter by Period:"})]}),n.jsx("select",{value:Ce,onChange:re=>fe(Number(re.target.value)),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[...Array(5)].map((re,Ee)=>{const Qe=new Date().getFullYear()-Ee;return n.jsx("option",{value:Qe,children:Qe},Qe)})}),n.jsxs("select",{value:ue,onChange:re=>{H(re.target.value),we(1)},className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[n.jsx("option",{value:"",children:"All Periods"}),n.jsx("option",{value:"MONTHLY",children:"Monthly"}),n.jsx("option",{value:"QUARTERLY",children:"Quarterly"}),n.jsx("option",{value:"SEMIANNUAL",children:"Semi-Annual"}),n.jsx("option",{value:"ANNUAL",children:"Annual"})]}),ue==="QUARTERLY"&&n.jsxs("select",{value:K,onChange:re=>we(Number(re.target.value)),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[n.jsx("option",{value:1,children:"Q1"}),n.jsx("option",{value:2,children:"Q2"}),n.jsx("option",{value:3,children:"Q3"}),n.jsx("option",{value:4,children:"Q4"})]}),ue==="SEMIANNUAL"&&n.jsxs("select",{value:K,onChange:re=>we(Number(re.target.value)),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[n.jsx("option",{value:1,children:"H1 (Jan-Jun)"}),n.jsx("option",{value:2,children:"H2 (Jul-Dec)"})]}),ue==="MONTHLY"&&n.jsx("select",{value:K,onChange:re=>we(Number(re.target.value)),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((re,Ee)=>n.jsx("option",{value:Ee+1,children:re},Ee))}),n.jsx("button",{onClick:Xe,className:"bg-blue-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-blue-700",children:"Apply Filter"})]}),He&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsx($c,{title:"Sales Reps",value:He.total_sales_reps,icon:n.jsx(ra,{size:22}),color:"blue"}),n.jsx($c,{title:"Met Quota",value:He.above_target_count,icon:n.jsx(id,{size:22}),color:"green"}),n.jsx($c,{title:"Below Quota",value:He.below_target_count,icon:n.jsx(GS,{size:22}),color:"orange"}),n.jsx($c,{title:"Team Achievement",value:`${He.overall_achievement}%`,icon:n.jsx(mr,{size:22}),color:"purple"})]}),pe?n.jsx(Wt,{message:"Loading leaderboard..."}):ke?.entries?.length>0?n.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[n.jsx("div",{className:"p-4 border-b border-gray-200",children:n.jsxs("h2",{className:"text-lg font-semibold flex items-center",children:[n.jsx(WS,{className:"mr-2 text-yellow-500"}),"Sales Leaderboard",ke.period_type!=="ALL"&&n.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-500",children:["(",ke.period_type," ",ke.period_year,")"]})]})}),n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-600",children:"Rank"}),n.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-600",children:"Sales Rep"}),n.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-600",children:"Role"}),n.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Target"}),n.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Achieved"}),n.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Achievement"}),n.jsx("th",{className:"py-3 px-4 text-center font-semibold text-gray-600",children:"Actions"})]})}),n.jsx("tbody",{children:ke.entries.map(re=>n.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`inline-flex items-center justify-center w-8 h-8 rounded-full font-bold text-sm ${re.rank===1?"bg-yellow-100 text-yellow-700":re.rank===2?"bg-gray-100 text-gray-700":re.rank===3?"bg-orange-100 text-orange-700":"bg-gray-50 text-gray-600"}`,children:re.rank})}),n.jsx("td",{className:"py-3 px-4 font-medium",children:re.user_name}),n.jsx("td",{className:"py-3 px-4 text-gray-500",children:re.role}),n.jsxs("td",{className:"py-3 px-4 text-right",children:[r,Number(re.target_amount).toLocaleString()]}),n.jsxs("td",{className:"py-3 px-4 text-right",children:[r,Number(re.achieved_amount).toLocaleString()]}),n.jsx("td",{className:"py-3 px-4 text-right",children:n.jsxs("span",{className:`px-2 py-1 rounded text-white text-xs font-semibold ${re.achievement_percentage>=100?"bg-green-500":re.achievement_percentage>=75?"bg-blue-500":re.achievement_percentage>=50?"bg-yellow-500":"bg-red-500"}`,children:[re.achievement_percentage,"%"]})}),n.jsx("td",{className:"py-3 px-4 text-center",children:n.jsx("button",{onClick:()=>{mt(re.user_id),de("history")},className:"text-blue-600 hover:text-blue-800 text-sm",children:"View History"})})]},re.user_id))})]})]}):n.jsxs("div",{className:"bg-white rounded-xl p-8 text-center text-gray-500",children:[n.jsx(WS,{size:48,className:"mx-auto mb-4 opacity-20"}),n.jsx("p",{children:"No leaderboard data available for the selected period."})]}),He?.needs_attention?.length>0&&n.jsxs("div",{className:"bg-red-50 rounded-xl p-4 border border-red-200",children:[n.jsxs("h3",{className:"text-lg font-semibold text-red-800 mb-3 flex items-center",children:[n.jsx(GS,{className:"mr-2"}),"Needs Attention (Below 50%)"]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:He.needs_attention.map(re=>n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-red-100",children:[n.jsx("p",{className:"font-medium text-gray-800",children:re.user_name}),n.jsx("p",{className:"text-sm text-gray-500",children:re.role}),n.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[n.jsxs("span",{className:"text-red-600 font-semibold",children:[re.achievement_percentage,"%"]}),n.jsxs("span",{className:"text-xs text-gray-500",children:[r,Number(re.remaining_amount).toLocaleString()," remaining"]})]})]},re.user_id))})]})]}),Se==="history"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Select Sales Rep to View History:"}),n.jsxs("div",{className:"flex gap-4 flex-wrap",children:[n.jsxs("select",{onChange:re=>{const Ee=Number(re.target.value);Ee&&mt(Ee,Ie)},className:"border border-gray-300 rounded-lg px-4 py-2 text-sm",value:Pe?.user_id||"",children:[n.jsx("option",{value:"",children:"-- Select User --"}),c.map(re=>n.jsxs("option",{value:re.id,children:[re.first_name," ",re.last_name]},re.id))]}),n.jsxs("select",{className:"border border-gray-300 rounded-lg px-4 py-2 text-sm",value:Ie,onChange:re=>{const Ee=re.target.value;rt(Ee),Pe?.user_id&&mt(Number(Pe.user_id),Ee)},children:[n.jsx("option",{value:"",children:"All period types"}),n.jsx("option",{value:"MONTHLY",children:"Monthly"}),n.jsx("option",{value:"QUARTERLY",children:"Quarterly"}),n.jsx("option",{value:"SEMIANNUAL",children:"Semi-Annual"}),n.jsx("option",{value:"ANNUAL",children:"Annual"}),n.jsx("option",{value:"CUSTOM",children:"Custom"})]})]})]}),tt?n.jsx(Wt,{message:"Loading history..."}):Pe?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:Pe.user_name}),Pe.current_period&&Pe.previous_period&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[n.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Current Period"}),n.jsx("p",{className:"text-xs text-gray-500",children:Pe.current_period.period_label}),n.jsxs("p",{className:"text-2xl font-bold text-blue-700 mt-2",children:[Pe.current_period.achievement_percentage,"%"]}),n.jsxs("p",{className:"text-sm text-gray-600",children:[r,Number(Pe.current_period.achieved_amount).toLocaleString()," / ",r,Number(Pe.current_period.target_amount).toLocaleString()]})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Previous Period"}),n.jsx("p",{className:"text-xs text-gray-500",children:Pe.previous_period.period_label}),n.jsxs("p",{className:"text-2xl font-bold text-gray-700 mt-2",children:[Pe.previous_period.achievement_percentage,"%"]}),n.jsxs("p",{className:"text-sm text-gray-600",children:[r,Number(Pe.previous_period.achieved_amount).toLocaleString()," / ",r,Number(Pe.previous_period.target_amount).toLocaleString()]})]}),n.jsxs("div",{className:`rounded-lg p-4 ${Pe.growth_percentage>=0?"bg-green-50":"bg-red-50"}`,children:[n.jsx("p",{className:"text-sm font-medium",style:{color:Pe.growth_percentage>=0?"#16a34a":"#dc2626"},children:"Growth"}),n.jsxs("p",{className:`text-2xl font-bold mt-2 flex items-center ${Pe.growth_percentage>=0?"text-green-700":"text-red-700"}`,children:[Pe.growth_percentage>=0?n.jsx(id,{className:"mr-2"}):n.jsx(GS,{className:"mr-2"}),Pe.growth_percentage>=0?"+":"",Pe.growth_percentage?.toFixed(1),"%"]}),n.jsxs("p",{className:"text-sm text-gray-600",children:[Pe.growth_amount>=0?"+":"",r,Number(Pe.growth_amount||0).toLocaleString()]})]})]}),Pe.periods?.length>0&&n.jsx("div",{className:"h-64",children:n.jsx(E_,{width:"100%",height:"100%",children:n.jsxs(g$e,{data:[...Pe.periods].reverse(),children:[n.jsx(OE,{strokeDasharray:"3 3"}),n.jsx(FE,{dataKey:"period_label",tick:{fontSize:12}}),n.jsx(BE,{tick:{fontSize:12}}),n.jsx(U_,{formatter:(re,Ee)=>[`${r}${Number(re).toLocaleString()}`,Ee]}),n.jsx(MQ,{}),n.jsx(ME,{type:"monotone",dataKey:"target_amount",stroke:"#6366f1",name:"Target",strokeWidth:2,dot:{r:2},activeDot:{r:5}}),n.jsx(ME,{type:"monotone",dataKey:"achieved_amount",stroke:"#22c55e",name:"Achieved",strokeWidth:2,dot:{r:3},activeDot:{r:6}})]})})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[n.jsx("div",{className:"p-4 border-b border-gray-200",children:n.jsx("h3",{className:"font-semibold",children:"All Historical Periods"})}),n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-600",children:"Period"}),n.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-600",children:"Date Range"}),n.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Target"}),n.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Achieved"}),n.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Achievement"})]})}),n.jsx("tbody",{children:Pe.periods.map((re,Ee)=>n.jsxs("tr",{className:"border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 font-medium",children:re.period_label}),n.jsxs("td",{className:"py-3 px-4 text-gray-500",children:[re.start_date," - ",re.end_date]}),n.jsxs("td",{className:"py-3 px-4 text-right",children:[r,Number(re.target_amount).toLocaleString()]}),n.jsxs("td",{className:"py-3 px-4 text-right",children:[r,Number(re.achieved_amount).toLocaleString()]}),n.jsx("td",{className:"py-3 px-4 text-right",children:n.jsxs("span",{className:`px-2 py-1 rounded text-white text-xs font-semibold ${re.achievement_percentage>=100?"bg-green-500":re.achievement_percentage>=75?"bg-blue-500":re.achievement_percentage>=50?"bg-yellow-500":"bg-red-500"}`,children:[re.achievement_percentage,"%"]})})]},Ee))})]})]})]}):n.jsxs("div",{className:"bg-white rounded-xl p-8 text-center text-gray-500",children:[n.jsx(Vs,{size:48,className:"mx-auto mb-4 opacity-20"}),n.jsx("p",{children:"Select a sales rep to view their historical performance."})]})]})]}),G&&n.jsx(L$e,{target:G,currencySymbol:r,onClose:()=>U(null),onEdit:()=>ee(G),onDelete:()=>O(G),canEdit:Me,canDelete:ce}),_&&Me&&n.jsx(P$e,{formData:D,users:c,isEditing:T,isSubmitting:L,isSubmitted:ae,onChange:Le,onClose:()=>E(!1),onSubmit:ge,fiscalSettings:Je}),V&&n.jsx(D$e,{...V,loading:Y,onConfirm:async()=>{le(!0),await V.action(),le(!1),Z(null)},onCancel:()=>Z(null)})]})}function $c({title:e,value:t,icon:a,color:s="blue"}){const r={blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",purple:"bg-purple-100 text-purple-600",orange:"bg-orange-100 text-orange-600"};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200",children:[n.jsx("div",{className:`p-3 rounded-full ${r[s]} mr-4`,children:a}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:e}),n.jsx("p",{className:"text-xl font-bold",children:t})]})]})}function L$e({target:e,onClose:t,onEdit:a,onDelete:s,canEdit:r,canDelete:i,currencySymbol:o}){const l=Number(e.target_amount)>0?(Number(e.achieved_amount)/Number(e.target_amount)*100).toFixed(1):0;return n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",onClick:t,children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:c=>c.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-4 rounded-t-xl",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Target Details"}),n.jsx("button",{onClick:t,className:"text-gray-200 hover:text-white transition cursor-pointer",children:n.jsx(Xt,{size:25})})]}),r&&n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:e.user&&`${e.user.first_name} ${e.user.last_name}`})}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 cursor-pointer",onClick:a,children:[n.jsx(ga,{className:"mr-2"}),"Edit"]}),i&&n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400 cursor-pointer",onClick:s,children:[n.jsx(vn,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"})]}),n.jsxs("div",{className:"p-4 lg:p-6",children:[n.jsx("div",{className:"flex w-full bg-gray-600 text-white overflow-x-auto",children:n.jsx("button",{className:"flex-1 min-w-[90px] px-4 py-2 lg:text-lg text-sm font-medium text-center text-white",children:"Overview"})}),n.jsx("div",{className:"bg-white rounded-xl shadow-sm sm:p-6 lg:p-5 border border-gray-200 text-sm text-gray-700",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Sales Person:"}),n.jsx("p",{children:e.user?`${e.user.first_name} ${e.user.last_name}`:"Unknown"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Target Amount:"}),n.jsxs("p",{className:"text-green-600 font-semibold",children:[o,Number(e.target_amount).toLocaleString()]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Achieved Amount:"}),n.jsxs("p",{className:"text-blue-600 font-semibold",children:[o,Number(e.achieved_amount).toLocaleString()]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Achievement Rate:"}),n.jsxs("p",{className:`font-semibold ${l>=100?"text-green-600":l>=75?"text-blue-600":l>=50?"text-yellow-600":"text-red-600"}`,children:[l,"%"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Start Date:"}),n.jsx("p",{children:e.start_date})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"End Date:"}),n.jsx("p",{children:e.end_date})]})]})})]})]})})}function P$e({formData:e,users:t,isEditing:a,isSubmitting:s,onChange:r,onClose:i,onSubmit:o,fiscalSettings:l,isSubmitted:c}){const u=l?.fiscal_start_month||1,d=e.use_annual_mode!==!1&&e.period_type!=="CUSTOM"&&e.period_type!==""&&!a,f=c&&d&&(!e.annual_amount||Number(e.annual_amount)<=0),p=c&&!d&&(!e.target_amount||Number(e.target_amount)<=0),x=c&&!e.period_type,y=a||e.period_type==="CUSTOM",N=_=>{const E=_.getFullYear(),T=String(_.getMonth()+1).padStart(2,"0"),A=String(_.getDate()).padStart(2,"0");return`${E}-${T}-${A}`},v=(_,E,T)=>{let A,L;if(_==="MONTHLY")A=new Date(E,T-1,1),L=new Date(E,T,0);else if(_==="QUARTERLY"){const M=(T-1)*3,F=(u-1+M)%12;let $=E;u>1&&(F>=u-1?$=E-1:$=E),A=new Date($,F,1);const D=(F+2)%12,q=F+2>=12?$+1:$;L=new Date(q,D+1,0)}else if(_==="SEMIANNUAL"){const M=(T-1)*6,F=(u-1+M)%12;let $=E;u>1&&(F>=u-1?$=E-1:$=E),A=new Date($,F,1);const D=(F+5)%12,q=F+5>=12?$+1:$;L=new Date(q,D+1,0)}else if(_==="ANNUAL"){const M=u-1;let F=u>1?E-1:E;A=new Date(F,M,1);const $=(u-2+12)%12;L=new Date(F+1,$+1,0)}return{startDate:A,endDate:L}},j=_=>{const E=_.target.value;if(r({target:{name:"period_type",value:E}}),e.use_annual_mode!==!1&&E!=="CUSTOM"&&E!==""&&!a){e.start_date||r({target:{name:"start_date",value:new Date().toISOString().split("T")[0]}});return}if(E!=="CUSTOM"){const A=e.period_year||new Date().getFullYear(),L=e.period_number||1,{startDate:M,endDate:F}=v(E,A,L);M&&F&&(r({target:{name:"start_date",value:N(M)}}),r({target:{name:"end_date",value:N(F)}}))}},w=_=>{const E=Number(_.target.value);r({target:{name:"period_number",value:E}});const T=e.period_year||new Date().getFullYear(),A=e.period_type;if(A!=="CUSTOM"&&!d){const{startDate:L,endDate:M}=v(A,T,E);L&&M&&(r({target:{name:"start_date",value:N(L)}}),r({target:{name:"end_date",value:N(M)}}))}},S=_=>{const E=Number(_.target.value);r({target:{name:"period_year",value:E}});const T=e.period_type,A=e.period_number||1;if(T!=="CUSTOM"&&!d){const{startDate:L,endDate:M}=v(T,E,A);L&&M&&(r({target:{name:"start_date",value:N(L)}}),r({target:{name:"end_date",value:N(M)}}))}};return h.useEffect(()=>{if(!d&&e.period_type!=="CUSTOM"&&!e.start_date){const _=e.period_year||new Date().getFullYear(),E=e.period_number||1,{startDate:T,endDate:A}=v(e.period_type,_,E);T&&A&&(r({target:{name:"start_date",value:N(T)}}),r({target:{name:"end_date",value:N(A)}}))}},[l]),n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl p-8 relative overflow-y-auto max-h-[90vh] hide-scrollbar",children:[n.jsx("button",{onClick:i,className:"absolute top-5 right-5",children:n.jsx(Xt,{size:24})}),n.jsx("h2",{className:"text-2xl font-semibold text-center mb-6",children:a?"Edit Target":"Add New Target"}),n.jsxs("form",{onSubmit:o,noValidate:!0,className:"grid gap-4 text-base",children:[n.jsxs("div",{className:"flex flex-col gap-1 relative",children:[n.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Assign User ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(E$e,{name:"user_id",items:t,value:e.user_id,onChange:r,getLabel:_=>`${_.first_name} ${_.last_name}`,placeholder:"Search user...",required:!0,isSubmitted:c})]}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("label",{className:"text-sm font-medium text-gray-700 text-left",children:["Period Type ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{name:"period_type",value:e.period_type,onChange:j,isSubmitted:c,className:`w-full border rounded-lg p-2 text-gray-700 focus:outline-none focus:ring-1
                ${x?"border-red-500 focus:ring-red-400 focus:border-red-400":"border-gray-300 focus:ring-blue-400 focus:border-blue-400"}`,children:[n.jsx("option",{value:"",children:"-- Choose Period Type --"}),wZ.map(_=>n.jsx("option",{value:_.value,children:_.label},_.value))]})]}),e.period_type&&e.period_type!=="CUSTOM"&&e.period_type!=="ANNUAL"&&n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:e.period_type==="MONTHLY"?"Month":e.period_type==="QUARTERLY"?"Quarter":"Half"}),n.jsxs("select",{name:"period_number",value:e.period_number,onChange:w,required:!0,className:"w-full border text-gray-500 border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400",children:[e.period_type==="MONTHLY"&&["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((_,E)=>n.jsx("option",{value:E+1,children:_},E)),e.period_type==="QUARTERLY"&&[1,2,3,4].map(_=>n.jsxs("option",{value:_,children:["Q",_," ",l?.quarters?.[`Q${_}`]?`(${l.quarters[`Q${_}`]})`:""]},_)),e.period_type==="SEMIANNUAL"&&[1,2].map(_=>n.jsxs("option",{value:_,children:["H",_," ",l?.halves?.[`H${_}`]?`(${l.halves[`H${_}`]})`:`(${_===1?"Jan-Jun":"Jul-Dec"})`]},_))]})]}),e.period_type&&e.period_type!=="CUSTOM"&&n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:u!==1?"Fiscal Year":"Year"}),n.jsx("select",{name:"period_year",value:e.period_year,onChange:S,className:"w-full border text-gray-500 border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400",children:[...Array(5)].map((_,E)=>{const T=new Date().getFullYear()+1-E;return n.jsx("option",{value:T,children:u!==1?`FY${T}`:T},T)})})]}),d&&n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:"Start Date"}),n.jsx("div",{className:"flex justify-center w-full",children:n.jsx("input",{type:"date",name:"start_date",value:e.start_date,onChange:r,className:"w-full max-w-md border text-gray-500 border-gray-300 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"})}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Used to prorate the first period when enabled."})]}),d&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("label",{className:"text-sm font-medium text-gray-700 text-left",children:["Annual Target Amount ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:"flex justify-center w-full",children:n.jsx("input",{type:"number",name:"annual_amount",placeholder:"e.g., 12000000 for 12M",value:e.annual_amount,onChange:r,required:!0,className:`w-full max-w-md border rounded-lg p-2 text-gray-700 focus:outline-none focus:ring-1
                      ${f?"border-red-500 focus:ring-red-400 focus:border-red-400":"border-gray-300 focus:ring-blue-400 focus:border-blue-400"}`})}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter the full year target. It will be automatically divided based on the period type."})]}),e.annual_amount&&Number(e.annual_amount)>0&&n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[n.jsx("p",{className:"text-sm font-medium text-blue-800 mb-2",children:"Period Breakdown:"}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[n.jsx("div",{className:"text-gray-600",children:"Annual:"}),n.jsx("div",{className:"text-right font-semibold text-gray-900",children:Number(e.annual_amount).toLocaleString()}),e.period_type==="MONTHLY"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"text-gray-600",children:["Monthly (",e.period_type,"):"]}),n.jsx("div",{className:"text-right font-semibold text-green-600",children:(Number(e.annual_amount)/12).toLocaleString(void 0,{maximumFractionDigits:2})})]}),e.period_type==="QUARTERLY"&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"text-gray-600",children:"Quarterly:"}),n.jsx("div",{className:"text-right font-semibold text-green-600",children:(Number(e.annual_amount)/4).toLocaleString(void 0,{maximumFractionDigits:2})})]}),e.period_type==="SEMIANNUAL"&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"text-gray-600",children:"Semi-Annual:"}),n.jsx("div",{className:"text-right font-semibold text-green-600",children:(Number(e.annual_amount)/2).toLocaleString(void 0,{maximumFractionDigits:2})})]}),e.period_type==="ANNUAL"&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"text-gray-600",children:"Full Year:"}),n.jsx("div",{className:"text-right font-semibold text-green-600",children:Number(e.annual_amount).toLocaleString(void 0,{maximumFractionDigits:2})})]})]}),n.jsx("p",{className:"text-xs text-blue-600 mt-2",children:"* First period may be prorated if starting mid-period"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",id:"prorate_first_period",name:"prorate_first_period",checked:e.prorate_first_period!==!1,onChange:_=>r({target:{name:"prorate_first_period",value:_.target.checked}}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),n.jsx("label",{htmlFor:"prorate_first_period",className:"text-sm text-gray-700",children:"Prorate first period based on remaining days"})]})]}),y&&n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("label",{className:"text-sm font-medium text-gray-700 text-left",children:["Target Amount ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:"flex justify-center w-full",children:n.jsx("input",{type:"number",name:"target_amount",placeholder:"0.00",value:e.target_amount,onChange:r,required:!0,className:`w-full max-w-md border rounded-lg p-2 text-gray-700 focus:outline-none focus:ring-1
                    ${p?"border-red-500 focus:ring-red-400 focus:border-red-400":"border-gray-300 focus:ring-blue-400 focus:border-blue-400"}`})})]}),y&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:"Start Date"}),n.jsx("div",{className:"flex justify-center w-full",children:n.jsx("input",{type:"date",name:"start_date",value:e.start_date,onChange:r,className:"w-full max-w-md border text-gray-500 border-gray-300 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"})})]}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:"End Date"}),n.jsx("div",{className:"flex justify-center w-full",children:n.jsx("input",{type:"date",name:"end_date",value:e.end_date,onChange:r,className:"w-full max-w-md border text-gray-500 border-gray-300 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"})})]})]}),n.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[n.jsx("button",{type:"button",onClick:i,className:"bg-red-400 text-white px-5 py-2 rounded-lg",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:s,className:"bg-tertiary text-white px-5 py-2 rounded-lg hover:bg-tertiary/90 disabled:opacity-50",children:s?"Saving...":a?"Update Target":"Create Targets"})]})]})]})})}function D$e({title:e,message:t,confirmLabel:a,cancelLabel:s,variant:r,loading:i,onConfirm:o,onCancel:l}){return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:e}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:t}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{onClick:l,disabled:i,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:s}),n.jsx("button",{onClick:o,disabled:i,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${r==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-tertiary/90 border border-tertiary"}`,children:i?"Processing...":a})]})]})})}function O$e(){const{userRole:e}=Ks();return n.jsx(o1,{currentUserRole:e,currentUserId:null})}const O7=[{value:"Product",label:"Product"},{value:"Service",label:"Service"}],nA={id:null,item_type:"Product",name:"",description:"",sku:"",variant:"",unit:"pcs",quantity:1,unit_price:0,discount_percent:0,discount_amount:0,line_total:0,sort_order:0},fb=e=>{const t=parseFloat(e.quantity)||0,a=parseFloat(e.unit_price)||0,s=parseFloat(e.discount_percent)||0,r=t*a,i=r*(s/100),o=r-i;return{discount_amount:i,line_total:o}},Rc=(e,t="")=>{const a=parseFloat(e)||0;return`${t}${a.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`};function yd({items:e=[],onChange:t,currencySymbol:a="",readOnly:s=!1,taxRate:r=0,discountType:i=null,discountValue:o=0,onTotalsChange:l}){const[c,u]=h.useState(null),[d,f]=h.useState(null),[p,x]=h.useState(!1),[y,N]=h.useState({...nA});h.useEffect(()=>{if(l){const L=e.reduce((q,G)=>q+(parseFloat(G.line_total)||0),0);let M=0;i==="percentage"&&o?M=L*(parseFloat(o)/100):i==="fixed"&&o&&(M=parseFloat(o));const F=L-M,$=F*(parseFloat(r)/100),D=F+$;l({subtotal:L,discount_amount:M,tax_amount:$,total_amount:D})}},[e,r,i,o,l]);const v=h.useCallback(()=>{if(!y.name.trim()){W.error("Item name is required");return}if(parseFloat(y.unit_price)<=0){W.error("Unit price must be greater than 0");return}if(parseFloat(y.quantity)<=0){W.error("Quantity must be greater than 0");return}const L=fb(y),M={...y,...L,sort_order:e.length};t([...e,M]),N({...nA}),x(!1),W.success("Item added")},[y,e,t]),j=L=>{if(!d){W.error("No item being edited");return}if(!d.name.trim()){W.error("Item name is required");return}if(parseFloat(d.unit_price)<=0){W.error("Unit price must be greater than 0");return}if(parseFloat(d.quantity)<=0){W.error("Quantity must be greater than 0");return}const M=fb(d),F={...d,...M},$=e.map((D,q)=>q===L?F:D);t($),u(null),f(null),W.success("Item updated")},w=h.useCallback(L=>{const M=e.filter((F,$)=>$!==L);M.forEach((F,$)=>{F.sort_order=$}),t(M),W.success("Item removed")},[e,t]),S=h.useCallback((L,M)=>{const F=M==="up"?L-1:L+1;if(F<0||F>=e.length)return;const $=[...e];[$[L],$[F]]=[$[F],$[L]],$.forEach((D,q)=>{D.sort_order=q}),t($)},[e,t]),_=L=>{u(L),f({...e[L]})},E=()=>{u(null),f(null)},T=e.reduce((L,M)=>L+(parseFloat(M.line_total)||0),0),A=(L,M)=>c===M&&!s?n.jsxs("tr",{className:"bg-blue-50",children:[n.jsx("td",{className:"px-3 py-2",children:n.jsx("select",{value:d.item_type,onChange:$=>f(D=>({...D,item_type:$.target.value})),className:"w-full px-2 py-1 border rounded text-sm",children:O7.map($=>n.jsx("option",{value:$.value,children:$.label},$.value))})}),n.jsxs("td",{className:"px-3 py-2",children:[n.jsx("input",{type:"text",value:d.name,onChange:$=>f(D=>({...D,name:$.target.value})),className:"w-full px-2 py-1 border rounded text-sm",placeholder:"Name *"}),n.jsx("input",{type:"text",value:d.variant||"",onChange:$=>f(D=>({...D,variant:$.target.value})),className:"w-full px-2 py-1 border rounded text-sm mt-1",placeholder:"Variant (optional)"})]}),n.jsx("td",{className:"px-3 py-2",children:n.jsx("input",{type:"text",value:d.sku||"",onChange:$=>f(D=>({...D,sku:$.target.value})),className:"w-full px-2 py-1 border rounded text-sm",placeholder:"SKU"})}),n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{className:"flex gap-1",children:[n.jsx("input",{type:"number",value:d.quantity,onChange:$=>f(D=>({...D,quantity:$.target.value})),className:"w-16 px-2 py-1 border rounded text-sm text-right",min:"0.01",step:"0.01"}),n.jsx("input",{type:"text",value:d.unit||"",onChange:$=>f(D=>({...D,unit:$.target.value})),className:"w-16 px-2 py-1 border rounded text-sm",placeholder:"Unit"})]})}),n.jsx("td",{className:"px-3 py-2",children:n.jsx("input",{type:"number",value:d.unit_price,onChange:$=>f(D=>({...D,unit_price:$.target.value})),className:"w-24 px-2 py-1 border rounded text-sm text-right",min:"0",step:"0.01"})}),n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("input",{type:"number",value:d.discount_percent||0,onChange:$=>f(D=>({...D,discount_percent:$.target.value})),className:"w-16 px-2 py-1 border rounded text-sm text-right",min:"0",max:"100",step:"0.01"}),n.jsx("span",{className:"text-sm text-gray-500",children:"%"})]})}),n.jsx("td",{className:"px-3 py-2 text-right font-medium",children:Rc(fb(d).line_total,a)}),n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{type:"button",onClick:()=>j(M),className:"p-1 text-green-600 hover:bg-green-100 rounded",title:"Save",children:n.jsx(bL,{size:16})}),n.jsx("button",{type:"button",onClick:E,className:"p-1 text-gray-600 hover:bg-gray-100 rounded",title:"Cancel",children:n.jsx(Xt,{size:16})})]})})]},L.id||`edit-${M}`):n.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[n.jsx("td",{className:"px-3 py-2",children:n.jsx("span",{className:`inline-block px-2 py-0.5 rounded text-xs font-medium ${L.item_type==="Service"?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:L.item_type})}),n.jsxs("td",{className:"px-3 py-2",children:[n.jsx("div",{className:"font-medium text-gray-900",children:L.name}),L.variant&&n.jsx("div",{className:"text-xs text-gray-500",children:L.variant}),L.description&&n.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:L.description})]}),n.jsx("td",{className:"px-3 py-2 text-gray-600 text-sm",children:L.sku||"-"}),n.jsxs("td",{className:"px-3 py-2 text-center",children:[n.jsx("span",{className:"font-medium",children:parseFloat(L.quantity).toLocaleString()}),L.unit&&n.jsx("span",{className:"text-gray-500 text-sm ml-1",children:L.unit})]}),n.jsx("td",{className:"px-3 py-2 text-right",children:Rc(L.unit_price,a)}),n.jsx("td",{className:"px-3 py-2 text-right text-sm",children:parseFloat(L.discount_percent)>0?n.jsxs("span",{className:"text-red-600",children:["-",parseFloat(L.discount_percent).toFixed(1),"%"]}):n.jsx("span",{className:"text-gray-400",children:"-"})}),n.jsx("td",{className:"px-3 py-2 text-right font-medium",children:Rc(L.line_total,a)}),!s&&n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{type:"button",onClick:()=>S(M,"up"),disabled:M===0,className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded disabled:opacity-30",title:"Move up",children:n.jsx(Gie,{size:14})}),n.jsx("button",{type:"button",onClick:()=>S(M,"down"),disabled:M===e.length-1,className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded disabled:opacity-30",title:"Move down",children:n.jsx(Lt,{size:14})}),n.jsx("button",{type:"button",onClick:()=>_(M),className:"p-1 text-blue-600 hover:bg-blue-100 rounded",title:"Edit",children:n.jsx(ha,{size:14})}),n.jsx("button",{type:"button",onClick:()=>w(M),className:"p-1 text-red-600 hover:bg-red-100 rounded",title:"Delete",children:n.jsx(vn,{size:14})})]})})]},L.id||`row-${M}`);return n.jsxs("div",{className:"border border-gray-300 rounded-lg overflow-hidden bg-white",children:[n.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-50 border border-gray-300",children:[n.jsxs("h3",{className:"font-semibold text-gray-800",children:["Line Items ",e.length>0&&n.jsxs("span",{className:"text-gray-500 font-normal",children:["(",e.length,")"]})]}),!s&&!p&&n.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-1.5 px-3 py-1.5 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition",children:[n.jsx(xn,{size:14}),"Add Item"]})]}),p&&!s&&n.jsxs("div",{className:"p-4 bg-blue-50 border border-gray-300",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Type"}),n.jsx("select",{value:y.item_type,onChange:L=>N({...y,item_type:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-3 focus:ring-blue-500 focus:border-blue-500",children:O7.map(L=>n.jsx("option",{value:L.value,children:L.label},L.value))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Name *"}),n.jsx("input",{type:"text",value:y.name,onChange:L=>N({...y,name:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-3 focus:ring-blue-500 focus:border-blue-500",placeholder:"Product/Service name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"SKU"}),n.jsx("input",{type:"text",value:y.sku,onChange:L=>N({...y,sku:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-3 focus:ring-blue-500 focus:border-blue-500",placeholder:"Item code"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Variant"}),n.jsx("input",{type:"text",value:y.variant,onChange:L=>N({...y,variant:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-3 focus:ring-blue-500 focus:border-blue-500",placeholder:"Size, color, etc."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Quantity *"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"number",value:y.quantity,onChange:L=>N({...y,quantity:L.target.value}),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-sm text-right focus:ring-3 focus:ring-blue-500 focus:border-blue-500",min:"0.01",step:"0.01"}),n.jsx("input",{type:"text",value:y.unit,onChange:L=>N({...y,unit:L.target.value}),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-3 focus:ring-blue-500 focus:border-blue-500",placeholder:"Unit"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Unit Price *"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:a}),n.jsx("input",{type:"number",value:y.unit_price,onChange:L=>N({...y,unit_price:L.target.value}),className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-lg text-sm text-right focus:ring-3 focus:ring-blue-500 focus:border-blue-500",min:"0",step:"0.01"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Discount %"}),n.jsx("input",{type:"number",value:y.discount_percent,onChange:L=>N({...y,discount_percent:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm text-right focus:ring-3 focus:ring-blue-500 focus:border-blue-500",min:"0",max:"100",step:"0.01"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Line Total"}),n.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded-lg text-sm text-right font-medium",children:Rc(fb(y).line_total,a)})]})]}),n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Description (optional)"}),n.jsx("textarea",{value:y.description,onChange:L=>N({...y,description:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-3 focus:ring-blue-500 focus:border-blue-500",rows:2,placeholder:"Additional details about this item..."})]}),n.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[n.jsx("button",{onClick:()=>{x(!1),N({...nA})},className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition text-sm",children:"Cancel"}),n.jsx("button",{onClick:v,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition text-sm",children:"Add Item"})]})]}),e.length>0?n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-50 border-b",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-600 w-20",children:"Type"}),n.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-600",children:"Item"}),n.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-600 w-24",children:"SKU"}),n.jsx("th",{className:"px-3 py-2 text-center font-medium text-gray-600 w-28",children:"Qty"}),n.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-600 w-28",children:"Price"}),n.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-600 w-20",children:"Disc."}),n.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-600 w-28",children:"Total"}),!s&&n.jsx("th",{className:"px-3 py-2 w-28"})]})}),n.jsx("tbody",{children:e.map((L,M)=>A(L,M))})]})}):n.jsxs("div",{className:"p-8 text-center text-gray-500",children:[n.jsx("p",{children:"No items added yet."}),!s&&n.jsx("button",{onClick:()=>x(!0),className:"mt-2 text-blue-600 hover:underline text-sm",children:"+ Add your first item"})]}),e.length>0&&n.jsx("div",{className:"border-t bg-gray-50 px-4 py-3",children:n.jsx("div",{className:"flex justify-end",children:n.jsxs("div",{className:"w-64 space-y-1",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),n.jsx("span",{className:"font-medium",children:Rc(T,a)})]}),parseFloat(o)>0&&n.jsxs("div",{className:"flex justify-between text-sm text-red-600",children:[n.jsxs("span",{children:["Discount (",i==="percentage"?`${o}%`:"Fixed","):"]}),n.jsxs("span",{children:["-",Rc(i==="percentage"?T*(parseFloat(o)/100):parseFloat(o),a)]})]}),parseFloat(r)>0&&n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsxs("span",{className:"text-gray-600",children:["Tax (",r,"%):"]}),n.jsx("span",{children:Rc((T-(i==="percentage"?T*(parseFloat(o)/100):parseFloat(o)||0))*(parseFloat(r)/100),a)})]}),n.jsxs("div",{className:"flex justify-between text-base font-semibold pt-1 border-t",children:[n.jsx("span",{children:"Total:"}),n.jsx("span",{children:Rc((()=>{let L=0;i==="percentage"&&o?L=T*(parseFloat(o)/100):i==="fixed"&&o&&(L=parseFloat(o));const M=T-L,F=M*(parseFloat(r)/100);return M+F})(),a)})]})]})})})]})}const aA=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],sA={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:"",subtotal:0,tax_rate:0,tax_amount:0,discount_type:"",discount_value:0,discount_amount:0,currency:"PHP",items:[]},Mi=e=>{if(!e)return"Draft";const t=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected",inactive:"Inactive"}[t]||"Draft"},rA=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",M$e=e=>{switch(Mi(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";case"inactive":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},I$e=e=>{switch(Mi(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";case"inactive":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},hb=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",Cg=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",$$e=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const t=new Date(e);if(isNaN(t.getTime()))return"";const a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`}catch{return""}},iA=(e,t)=>{if(!e||t==null||t==="")return"";const a=Number(t);if(Number.isNaN(a))return"";const s=new Date(e);return isNaN(s.getTime())?"":(s.setDate(s.getDate()+a),s.toISOString().slice(0,10))},M7=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},oA=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},Ew=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},R$e=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const s of e){const r=localStorage.getItem(s);if(r)try{const i=JSON.parse(r),o=Ew(i);if(o)return o}catch{}}const t=localStorage.getItem("user_id"),a=Ew(t);return a||null},z$e=e=>{if(!e)return"";const a=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""},F$e=e=>{if(!e)return"";const a=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""};function U$e(){const e=jt(),t=Jt(),{user:a}=qt(),s=a?.company?.currency||"";h.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[r,i]=h.useState([]),[o,l]=h.useState(!1),[c,u]=h.useState([]),[d,f]=h.useState([]),[p,x]=h.useState([]),[y,N]=h.useState([]),[v,j]=h.useState(null),[w,S]=h.useState(null),[_,E]=h.useState(!1),[T,A]=h.useState(!1),[L,M]=h.useState(!1),[F,$]=h.useState(null),[D,q]=h.useState(!1),[G,U]=h.useState(!1),[V,Z]=h.useState(null),[Y,le]=h.useState(sA),[_e,te]=h.useState(""),[ae,ye]=h.useState("Filter by Status"),[Ne,he]=h.useState(null),ve=h.useCallback(async()=>{if(w)try{U(!0);const k=(await se.get("/company/invoice-info"))?.data;e(`/admin/quotes/${encodeURIComponent(w.id)}/print`,{state:{quote:w,companyInfo:k}})}catch(X){const k=X?.response?.data?.detail||X?.message||"Failed to open print page.";W.error(k)}finally{U(!1)}},[w,s]),[ne,Se]=h.useState(1),[de,ke]=h.useState(10),[Te,pe]=h.useState("Overview"),[ze,Pe]=h.useState("Draft"),[We,tt]=h.useState([]),[lt,Ie]=h.useState(null),{comments:rt,addComment:He,refresh:Ke}=ka({relatedType:"quote",relatedId:w?.id});h.useEffect(()=>{w?.id&&Ke()},[w?.id,Ke]),h.useEffect(()=>{const k=t.state?.quoteID;if(k){Ie(k),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(lt&&r.length>0&&!o){const X=r.find(k=>k.id===lt);X?S(X):W.error("Quote not found."),Ie(null)}},[lt,p,o]),h.useEffect(()=>{let X=!0;return(async()=>{const B=R$e();if(B&&X){j(B);return}try{const xe=await se.get("/auth/me"),Ae=Ew(xe?.data);if(Ae&&X){j(Ae);return}}catch{}try{const xe=await se.get("/users/me"),Ae=Ew(xe?.data);if(Ae&&X){j(Ae);return}}catch{}X&&j(null)})(),()=>{X=!1}},[]);const Je=h.useCallback(X=>X&&d.find(B=>String(B.id)===String(X))?.name||"",[d]),Oe=h.useCallback(X=>{if(!X)return"";const k=p.find(B=>String(B.id)===String(X));return k?`${k.first_name} ${k.last_name}`.trim():""},[p]),Ce=h.useCallback(X=>{if(!X)return"--";const k=c.find(B=>String(B.id)===String(X));return k?.deal_name||k?.name||`Deal #${M7(X)}`},[c]),fe=h.useCallback(X=>{const k=c.find(Ae=>String(Ae.id)===String(X)),B=z$e(k);let xe=F$e(k);if(!xe&&B){const Ae=p.filter(Ue=>String(Ue.account_id||"")===String(B));if(Ae.length>0){const Ue=[...Ae].sort((Ge,ct)=>{const yt=`${Ge.first_name||""} ${Ge.last_name||""}`.trim().toLowerCase(),Et=`${ct.first_name||""} ${ct.last_name||""}`.trim().toLowerCase();return yt.localeCompare(Et)});xe=String(Ue[0].id)}}if(B&&xe){const Ae=p.find(Ue=>String(Ue.id)===String(xe));Ae?.account_id&&String(Ae.account_id)!==String(B)&&(xe="")}return{accountId:B||"",contactId:xe||""}},[c,p]),ue=h.useCallback(X=>{if(!X)return"--";if(X.deal?.deal_name)return X.deal.deal_name;if(X.deal?.name)return X.deal.name;const k=X.deal_id||X.deal?.id;return k?Ce(k):"--"},[Ce]),H=h.useCallback(X=>{if(!X)return"--";if(X.account?.name)return X.account.name;let k=X.account_id||X.account?.id;if(!k){const B=X.deal_id||X.deal?.id;B&&(k=fe(B).accountId)}return k?Je(k)||`Account #${k}`:"--"},[fe,Je]),K=h.useCallback(X=>{if(!X)return"--";if(X.contact?.first_name||X.contact?.last_name)return`${X.contact?.first_name||""} ${X.contact?.last_name||""}`.trim()||"--";let k=X.contact_id||X.contact?.id;if(!k){const xe=X.deal_id||X.deal?.id;xe&&(k=fe(xe).contactId)}return(k?Oe(k):"")||(k?`Contact #${k}`:"--")},[fe,Oe]),we=h.useCallback(async(X=null)=>{l(!0);try{const k=await se.get("/quotes/admin/fetch-all"),xe=[...Array.isArray(k.data)?k.data:[]].sort((Ae,Ue)=>{const Ge=Ae?.created_at||Ae?.updated_at||0,ct=Ue?.created_at||Ue?.updated_at||0;return new Date(ct)-new Date(Ge)});if(i(xe),X){const Ae=xe.find(Ue=>Ue.id===X);S(Ae||null)}}catch(k){console.error(k),i([]),k.response?.status===403?W.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):W.error("Failed to fetch quotes. Please try again later.")}finally{l(!1)}},[]),Me=h.useCallback(async()=>{try{const X=await se.get("/deals/admin/fetch-all");u(Array.isArray(X.data)?X.data:[])}catch(X){console.error(X),X.response?.status===403&&W.warn("Unable to load deals (permission denied).")}},[]),ce=h.useCallback(async()=>{try{const X=await se.get("/accounts/admin/fetch-all");f(Array.isArray(X.data)?X.data:[])}catch(X){console.error(X),X.response?.status===403&&W.warn("Unable to load accounts (permission denied).")}},[]),oe=h.useCallback(async()=>{try{const X=await se.get("/contacts/admin/fetch-all");x(Array.isArray(X.data)?X.data:[])}catch(X){console.error(X),X.response?.status===403&&W.warn("Unable to load contacts (permission denied).")}},[]),De=h.useCallback(async()=>{try{const X=await se.get("/users/all");N(Array.isArray(X.data)?X.data:[])}catch(X){console.error(X),X.response?.status===403&&W.warn("Unable to load users (permission denied).")}},[]);h.useEffect(()=>{we(),Me(),ce(),oe(),De()},[we,Me,ce,oe,De]);const $e=h.useMemo(()=>{const X=_e.trim().toLowerCase(),k=ae.trim();return r.filter(B=>{const xe=ue(B),Ae=H(B),Ue=K(B),Ge=iA(B.presented_date,B.validity_days),ct=[B.quote_id,xe,Ae,Ue,B.total_amount?.toString(),B.validity_days?.toString(),B.presented_date?Cg(B.presented_date):"",Ge?Cg(Ge):"",B.assigned_user?.first_name,B.assigned_user?.last_name,B.creator?.first_name,B.creator?.last_name,B.status,B.notes,hb(B.created_at),hb(B.updated_at)],yt=X===""||ct.some(Kt=>Kt==null?!1:Kt.toString().toLowerCase().includes(X)),Et=k==="Filter by Status"||Mi(B.status)===k;return yt&&Et})},[r,_e,ae,ue,H,K]),Xe=Math.max(1,Math.ceil($e.length/de)||1);h.useEffect(()=>Se(1),[_e,ae]),h.useEffect(()=>{Se(X=>{const k=Math.max(1,Math.ceil($e.length/de)||1);return X>k?k:X})},[$e.length,de]);const Ze=h.useMemo(()=>{const X=(ne-1)*de;return $e.slice(X,X+de)},[$e,ne,de]),mt=()=>Se(X=>Math.max(X-1,1)),nt=()=>Se(X=>Math.min(X+1,Xe)),Nt=X=>{S(X),pe("Overview"),Pe(Mi(X?.status)||"Draft")},wt=()=>{S(null),pe("Overview")},Tt=X=>{X.target.id==="quoteModalBackdrop"&&!D&&wt()},Re=h.useCallback(()=>{E(!1),A(!1),Z(null),le(sA),M(!1)},[]),me=X=>{X.target.id==="modalBackdrop"&&!L&&!D&&Re()},ie=X=>{const{name:k,value:B}=X.target;if(k==="deal_id"){const{accountId:xe,contactId:Ae}=fe(B);le(Ue=>({...Ue,deal_id:B,account_id:xe,contact_id:Ae}));return}le(xe=>({...xe,[k]:B}))},Fe=()=>{const X=a?.company?.tax_rate??0;le({...sA,tax_rate:X}),A(!1),Z(null),E(!0)},Le=X=>{if(!X)return;S(null);const k=X.deal?.id?String(X.deal.id):X.deal_id?String(X.deal_id):"",B=k?fe(k):{accountId:"",contactId:""},xe=X.account?.id?String(X.account.id):X.account_id?String(X.account_id):B.accountId,Ae=X.contact?.id?String(X.contact.id):X.contact_id?String(X.contact_id):B.contactId,Ue=X.assigned_user?.id?String(X.assigned_user.id):X.assigned_to?String(X.assigned_to):"";le({deal_id:k,account_id:xe||"",contact_id:Ae||"",total_amount:X.total_amount?.toString()||"",presented_date:$$e(X.presented_date),validity_days:X.validity_days!==null&&X.validity_days!==void 0?String(X.validity_days):"",status:Mi(X.status)||"Draft",assigned_to:Ue,notes:X.notes||"",subtotal:parseFloat(X.subtotal)||0,tax_rate:parseFloat(X.tax_rate)||0,tax_amount:parseFloat(X.tax_amount)||0,discount_type:X.discount_type||"",discount_value:parseFloat(X.discount_value)||0,discount_amount:parseFloat(X.discount_amount)||0,currency:X.currency||"PHP",items:Array.isArray(X.items)?X.items.map(Ge=>({id:Ge.id,item_type:Ge.item_type||"Product",name:Ge.name||"",description:Ge.description||"",sku:Ge.sku||"",variant:Ge.variant||"",unit:Ge.unit||"pcs",quantity:parseFloat(Ge.quantity)||1,unit_price:parseFloat(Ge.unit_price)||0,discount_percent:parseFloat(Ge.discount_percent)||0,discount_amount:parseFloat(Ge.discount_amount)||0,line_total:parseFloat(Ge.line_total)||0,sort_order:Ge.sort_order||0})):[]}),A(!0),Z(X.id),E(!0)},be=X=>{if(X.target.checked){const k=Ze.map(B=>B.id);tt(k)}else tt([])},ee=X=>{tt(k=>k.includes(X)?k.filter(B=>B!==X):[...k,X])},O=X=>{if(!X)return;const k=X.quote_id||"this quote";$({title:"Delete Quote",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:k}),"? This action cannot be undone."]}),confirmLabel:"Delete Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:X.id,name:k}})},z=async()=>{We.length!==0&&$({title:"Delete Quotes",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:We.length})," selected quotes? This action cannot be undone."]}),confirmLabel:`Delete ${We.length} Quote(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",quote_ids:We}})},[I,Q]=h.useState(!1),ge=X=>{if(X.preventDefault(),Q(!0),!v){W.error("Unable to determine current user. Please log in again.");return}if(!Y.deal_id){W.error("Deal is required.");return}if(!Y.assigned_to){W.error("Assigned To is required.");return}const B=fe(Y.deal_id),xe=Y.items.map((yt,Et)=>({item_type:yt.item_type||"Product",name:yt.name,description:yt.description||null,sku:yt.sku||null,variant:yt.variant||null,unit:yt.unit||null,quantity:parseFloat(yt.quantity)||1,unit_price:parseFloat(yt.unit_price)||0,discount_percent:parseFloat(yt.discount_percent)||0,sort_order:yt.sort_order??Et})),Ae={deal_id:Number(Y.deal_id),account_id:B.accountId?Number(B.accountId):null,contact_id:B.contactId?Number(B.contactId):null,subtotal:parseFloat(Y.subtotal)||0,tax_rate:parseFloat(Y.tax_rate)||0,tax_amount:parseFloat(Y.tax_amount)||0,discount_type:Y.discount_type||null,discount_value:parseFloat(Y.discount_value)||0,discount_amount:parseFloat(Y.discount_amount)||0,total_amount:parseFloat(Y.total_amount)||0,currency:Y.currency||"PHP",presented_date:Y.presented_date||null,validity_days:Y.validity_days===""?null:Number(Y.validity_days),status:Y.status||"Draft",assigned_to:Y.assigned_to?Number(Y.assigned_to):null,notes:Y.notes?.trim()||null,items:xe},Ue=T&&V?"update":"create",Ge=Ce(Y.deal_id),ct=Ue==="create"?{...Ae,created_by_id:Number(v)}:Ae;$({title:Ue==="create"?"Confirm New Quote":"Confirm Update",message:Ue==="create"?n.jsxs("span",{children:["Are you sure you want to create a quote for"," ",n.jsx("span",{className:"font-semibold",children:Ge}),"?"]}):n.jsxs("span",{children:["Save changes to"," ",n.jsx("span",{className:"font-semibold",children:Ge}),"?"]}),confirmLabel:Ue==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:Ue,payload:ct,targetId:V||null,name:Ge}})},re=async()=>{if(!F?.action){$(null);return}const{action:X}=F,{type:k,payload:B,targetId:xe,name:Ae}=X;q(!0);try{if(k==="create")M(!0),await se.post("/quotes/admin",B),W.success("Quote created successfully."),Re(),await we();else if(k==="update"){if(!xe)throw new Error("Missing quote identifier for update.");M(!0),await se.put(`/quotes/admin/${xe}`,B),W.success("Quote updated successfully."),Re(),await we(),w?.id===xe&&S(null)}else if(k==="delete"){if(!xe)throw new Error("Missing quote identifier for deletion.");const Ue=w?.id;he(xe),await se.delete(`/quotes/admin/${xe}`),W.success(`Quote "${Ae}" deleted successfully.`),await we(Ue&&Ue!==xe?Ue:null),Ue===xe&&S(null)}else k==="bulk-delete"&&(await se.post("/quotes/admin/bulk-delete",{quote_ids:We}),W.success(`Successfully deleted ${We.length} quotes`),tt([]),await we())}catch(Ue){console.error(Ue);const Ge=k==="create"?"Failed to create quote. Please review the details and try again.":k==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";W.error(Ge),(k==="create"||k==="update")&&M(!1),k==="delete"&&he(null)}finally{(k==="create"||k==="update")&&M(!1),k==="delete"&&he(null),q(!1),$(null)}},Ee=()=>{D||$(null)},Qe=h.useCallback((X,k)=>{const B=X?.deal_id??X?.deal?.id??"",xe=B?Number(B):null,Ae=xe?fe(String(xe)):{accountId:"",contactId:""},Ue=X?.account_id??X?.account?.id??Ae.accountId??null,Ge=X?.contact_id??X?.contact?.id??Ae.contactId??null,ct=X?.total_amount??0,yt=X?.assigned_to??X?.assigned_user?.id??null;return{deal_id:xe,account_id:Ue!=null&&String(Ue).trim()!==""?Number(Ue):null,contact_id:Ge!=null&&String(Ge).trim()!==""?Number(Ge):null,total_amount:Number(ct),presented_date:X?.presented_date||null,validity_days:X?.validity_days===""||X?.validity_days===void 0||X?.validity_days===null?null:Number(X.validity_days),status:k,assigned_to:yt!=null&&String(yt).trim()!==""?Number(yt):null,notes:X?.notes?.trim()||null}},[fe]),gt=h.useCallback(async()=>{if(!w?.id)return;const X=Mi(ze),k=[X,X.toLowerCase()],B=async xe=>se.patch(`/quotes/admin/${w.id}/status`,{status:xe},{headers:{"Content-Type":"application/json"}});try{let xe=!1;for(const Ae of k)try{await B(Ae),xe=!0;break}catch(Ue){if(Ue?.response?.status===422)continue;throw Ue}if(!xe){const Ae=Qe(w,X);if(!Ae.deal_id){W.error("Cannot update status: missing deal_id on selected quote.");return}if(!Ae.total_amount||Ae.total_amount<=0){W.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await se.put(`/quotes/admin/${w.id}`,Ae)}W.success(`Quote status updated to ${X}`),S(null),pe("Overview"),await we()}catch(xe){console.error(xe);const Ae=xe?.response?.data?.message||(xe?.response?.data?.errors?Object.values(xe.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";W.error(Ae)}},[w,ze,we,Qe]),Ct=[{label:"Filter by Status",value:"Filter by Status"},...aA.map(X=>({label:X.label,value:X.value}))],kt=F?.action?.type==="delete"?F.action.targetId:null,Dt=w&&(Ne===w.id||kt===w.id),on=w&&Ne===w.id,Qn=w?n.jsx("div",{id:"quoteModalBackdrop",onClick:Tt,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:X=>X.stopPropagation(),children:[n.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:n.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),n.jsx("button",{onClick:wt,className:"text-gray-500 hover:text-white transition cursor-pointer",children:n.jsx(Xn,{size:25})})]})}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:ue(w)}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${I$e(w.status)}`,children:rA(w.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-white text-gray-700 px-4 py-2 rounded-md border border-gray-300 hover:bg-gray-50 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-gray-300",onClick:ve,disabled:G||L||D,children:[n.jsx(fn,{className:"mr-2"}),G?"Preparing...":"Print Quotation"]}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Le(w),disabled:D||F?.action?.type==="update"&&F.action.targetId===w.id,children:[n.jsx(ga,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>O(w),disabled:!!Dt,children:on?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(vn,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-1 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(X=>n.jsx("button",{onClick:()=>pe(X),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${Te===X?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:X},X))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[Te==="Overview"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Quote ID:"}),n.jsx("p",{children:oA(w.quote_id)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Deal:"}),n.jsx("p",{children:ue(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Account:"}),n.jsx("p",{children:H(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact:"}),n.jsx("p",{children:K(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Total Amount:"}),n.jsx("p",{children:w.total_amount?`${s}${Number(w.total_amount).toLocaleString()}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Presented Date:"}),n.jsx("p",{children:Cg(w.presented_date)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Validity Days:"}),n.jsx("p",{children:w.validity_days!==null&&w.validity_days!==void 0?w.validity_days:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),n.jsx("p",{children:Cg(iA(w.presented_date,w.validity_days))||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:rA(w.status)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:w.assigned_user?`${w.assigned_user.first_name} ${w.assigned_user.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:w.creator?`${w.creator.first_name} ${w.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:hb(w.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:hb(w.updated_at)||"N/A"})]})]}),w.items&&w.items.length>0&&n.jsx("div",{className:"mt-6",children:n.jsx(yd,{items:w.items,onChange:()=>{},currencySymbol:s,readOnly:!0,taxRate:parseFloat(w.tax_rate)||0,discountType:w.discount_type,discountValue:parseFloat(w.discount_value)||0})})]}),Te==="Notes"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),n.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:w.notes||"No notes available."})]}),n.jsx(Ta,{comments:rt,onAddComment:He})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call regarding Quote ${oA(w.quote_id)}`,assigned_to:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Ot,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${w.quote_id}`,assignedTo:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",status:"Planned"}}}),children:[n.jsx(Pt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${w.quote_id}`,assignedTo:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:ze||Mi(w.status)||"Draft",onChange:X=>Pe(X.target.value),children:aA.map(X=>n.jsx("option",{value:X.value,children:X.label},X.value))}),n.jsx("button",{onClick:gt,disabled:Mi(ze)===Mi(w.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Mi(ze)===Mi(w.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,ia=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[o&&n.jsx(Wt,{message:"Loading quotes..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(fn,{className:"mr-2 text-blue-600"})," Quotes"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto gap-2",children:n.jsxs("button",{onClick:()=>{Fe(),Q(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(xn,{className:"mr-2"})," Add Quote"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Vt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search quotes",value:_e,onChange:X=>te(X.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:ae,onChange:X=>ye(X.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:Ct.map(X=>n.jsx("option",{value:X.value,children:X.label},X.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:Ze.length>0&&We.length===Ze.length,onChange:be,className:"cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),n.jsx("th",{className:"py-3 px-4",children:"Deal"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Expiry Date"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:We.length>0?n.jsx("button",{onClick:z,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${We.length} selected items`,children:n.jsx(vn,{size:18})}):""})]})}),n.jsx("tbody",{children:o?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"Loading quotes..."})}):$e.length>0?Ze.map(X=>{const k=iA(X.presented_date,X.validity_days);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>Nt(X),children:[n.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:B=>B.stopPropagation(),children:n.jsx("input",{type:"checkbox",checked:We.includes(X.id),onChange:()=>ee(X.id),className:"cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:oA(X.quote_id)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:ue(X)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-sm text-gray-700 break-words",children:H(X)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:K(X)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-700",children:X.total_amount?`${s}${Number(X.total_amount).toLocaleString()}`:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${M$e(X.status)}`,children:rA(X.status)})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{children:X.assigned_user?`${X.assigned_user.first_name} ${X.assigned_user.last_name}`:"Unassigned"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-500 text-xs",children:Cg(k)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top text-center w-24"})]},X.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"No quotes found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:$e.length,pageSize:de,currentPage:ne,onPrev:mt,onNext:nt,onPageSizeChange:X=>{ke(X),Se(1)},pageSizeOptions:[10,20,30,40,50],label:"quotes"})]}),Be=_?n.jsx("div",{id:"modalBackdrop",onClick:me,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:X=>X.stopPropagation(),children:[n.jsx("button",{onClick:()=>{Re(),Q(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:L||D,children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:T?"Edit Quote":"Add New Quote"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:ge,children:[n.jsx(R7,{label:"Deal",name:"deal_id",value:Y.deal_id,onChange:X=>{const{accountId:k,contactId:B}=fe(X);le(xe=>({...xe,deal_id:X,account_id:k,contact_id:B}))},items:Array.isArray(c)?c:[],getLabel:X=>`${M7(X?.deal_id??"")} ${X?.name??""}`.trim(),placeholder:"Search deal...",required:!0,isSubmitted:I,disabled:L||c.length===0,className:"md:col-span-2"}),n.jsx($7,{label:"Account",value:Je(Y.account_id)||(Y.account_id?`Account #${Y.account_id}`:""),disabled:!0}),n.jsx($7,{label:"Contact",value:Oe(Y.contact_id)||(Y.contact_id?`Contact #${Y.contact_id}`:""),disabled:!0}),n.jsx("div",{className:"md:col-span-2 mt-2",children:n.jsx(yd,{items:Y.items,onChange:X=>le(k=>({...k,items:X})),currencySymbol:s,readOnly:L,taxRate:Y.tax_rate,discountType:Y.discount_type,discountValue:Y.discount_value,onTotalsChange:X=>{le(k=>({...k,subtotal:X.subtotal,discount_amount:X.discount_amount,tax_amount:X.tax_amount,total_amount:X.total_amount}))}})}),n.jsxs("div",{className:"md:col-span-2 mt-2 p-4 bg-gray-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Pricing Settings"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Discount Type"}),n.jsxs("select",{value:Y.discount_type||"",onChange:X=>le(k=>({...k,discount_type:X.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",disabled:L,children:[n.jsx("option",{value:"",children:"No Discount"}),n.jsx("option",{value:"percentage",children:"Percentage (%)"}),n.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-600 text-xs mb-1",children:["Discount"," ",Y.discount_type==="percentage"?"%":"Amount"]}),n.jsx("input",{type:"number",value:Y.discount_value||"",onChange:X=>le(k=>({...k,discount_value:X.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:Y.discount_type==="percentage"?"100":void 0,step:"0.01",disabled:L||!Y.discount_type})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Tax Rate (%)"}),n.jsx("input",{type:"number",value:Y.tax_rate??"",onChange:X=>le(k=>({...k,tax_rate:X.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:"100",step:"0.01",disabled:L})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Total Amount"}),n.jsxs("div",{className:"w-full bg-gray-100 border border-gray-300 rounded-md px-2 py-1.5 text-sm font-medium",children:[s,parseFloat(Y.total_amount||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),n.jsx(I7,{label:"Presented Date",name:"presented_date",type:"date",value:Y.presented_date,onChange:ie,disabled:L}),n.jsx(I7,{label:"Validity Days",name:"validity_days",type:"number",value:Y.validity_days,onChange:ie,placeholder:"30",disabled:L}),n.jsx(R7,{label:"Assigned To",value:Y.assigned_to||"",onChange:X=>le(k=>({...k,assigned_to:X})),items:Array.isArray(y)?y:[],getLabel:X=>{const k=`${X?.first_name??""} ${X?.last_name??""}`.trim();if(!k)return X?.email||"";const B=X?.role?.toUpperCase()==="CEO"?"Admin":X?.role;return B?`${k} (${B})`:k},placeholder:"Search assignee...",required:!0,isSubmitted:I,disabled:L}),n.jsx(B$e,{label:"Status",name:"status",value:Y.status,onChange:ie,options:aA,required:!0,disabled:L}),n.jsx(q$e,{label:"Notes",name:"notes",value:Y.notes,onChange:ie,placeholder:"Additional details...",rows:3,disabled:L,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{Re(),Q(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:L||D,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:L||D,children:L?"Saving...":T?"Update Quote":"Save Quote"})]})]})]})}):null,_t=F?n.jsx(W$e,{open:!0,title:F.title,message:F.message,confirmLabel:F.confirmLabel,cancelLabel:F.cancelLabel,variant:F.variant,onConfirm:re,onCancel:Ee,loading:D}):null;return n.jsxs(n.Fragment,{children:[w?Qn:ia,Be,_t]})}function I7({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:u=!1}){const d=u&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function $7({label:e,value:t,className:a="",disabled:s=!0}){return n.jsxs("div",{className:a,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("input",{type:"text",value:t??"",disabled:s,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function B$e({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){const c=a!=null?String(a):"",d=r.some(f=>String(f.value)===c)?c:"";return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:d,onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(f=>n.jsx("option",{value:String(f.value??""),children:f.label},f.value??f.label))})]})}function R7({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:u=!1}){const d=u&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(H$e,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:d})]})}function H$e({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,u]=h.useState(!1),[d,f]=h.useState(""),p=h.useRef(null),x=e.find(v=>String(v.id)===String(t)),y=x?s(x):"",N=h.useMemo(()=>{const v=d.trim().toLowerCase();return(v?e.filter(w=>(s(w)||"").toLowerCase().includes(v)):e).slice(0,o)},[e,d,s,o]);return h.useEffect(()=>{const v=j=>{p.current&&!p.current.contains(j.target)&&u(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?d:y,placeholder:r,onFocus:()=>!i&&u(!0),onChange:v=>{f(v.target.value),c||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:N.length>0?N.map(v=>{const j=String(v.id),w=s(v),S=String(t)===j;return n.jsx("button",{type:"button",onClick:()=>{a(j),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},j)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function q$e({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function W$e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}const l1=[{value:"CEO",label:"Admin"},{value:"Group Manager",label:"Group Manager"},{value:"Manager",label:"Manager"},{value:"Sales",label:"Sales"}],Sg={firstName:"",lastName:"",email:"",password:"",role:""},G$e={CEO:"bg-purple-100 text-purple-700",ADMIN:"bg-purple-100 text-purple-700",GROUP_MANAGER:"bg-indigo-100 text-indigo-700",MANAGER:"bg-blue-100 text-blue-700",MARKETING:"bg-yellow-100 text-yellow-700",SALES:"bg-green-100 text-green-700"},Co=e=>e?e.toString().trim().replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/\s+/g,"_").toUpperCase():"",V$e=e=>{const t=Co(e),a=l1.find(s=>Co(s.value)===t);return a?a.value:e||""},GE=e=>{const t=Co(e),a=l1.find(s=>Co(s.value)===t);return a?a.label:typeof e=="string"?e.toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()):"--"},z7=e=>{if(!e)return"--";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",","")},lA=(e,{size:t="sm"}={})=>{const a=Co(e),s=G$e[a]||"bg-gray-100 text-gray-700",r=t==="lg"?"px-3 py-1 text-sm":t==="md"?"px-2.5 py-1 text-sm":"px-2 py-1 text-xs";return n.jsx("span",{className:`${r} font-semibold rounded-md inline-flex items-center justify-center ${s}`,children:GE(e)})},Y$e=(e,t)=>{const a=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${a}${s}`.toUpperCase()||"U"},F7=e=>[...e].sort((t,a)=>{const s=t.created_at?new Date(t.created_at).getTime():0;return(a.created_at?new Date(a.created_at).getTime():0)-s});function Q$e(){const{user:e,loading:t}=qt(),[a,s]=h.useState([]),[r,i]=h.useState(!1),[o,l]=h.useState(""),[c,u]=h.useState(""),[d,f]=h.useState(null),[p,x]=h.useState(!1),[y,N]=h.useState(!1),[v,j]=h.useState(null),[w,S]=h.useState(Sg),[_,E]=h.useState(!1),[T,A]=h.useState(null),[L,M]=h.useState(!1),[F,$]=h.useState(1),[D,q]=h.useState(10),[G,U]=h.useState("Overview"),[V,Z]=h.useState(""),[Y,le]=h.useState(!1),[_e,te]=h.useState([]),ae=Co(e?.role),ye=["ADMIN","CEO"].includes(ae),Ne=!t&&ye,he=h.useMemo(()=>{const ce=l1.filter(oe=>Co(oe.value)!=="CEO");return[{label:"Filter by Roles",value:""},{label:"CEO",value:"CEO"},...ce]},[]),ve=h.useCallback(ce=>{ce&&(s(oe=>oe.map(De=>De.id===ce?{...De,highlight:!0}:De)),setTimeout(()=>{s(oe=>oe.map(De=>De.id===ce?{...De,highlight:!1}:De))},2e3))},[]),ne=h.useCallback(async()=>{i(!0);try{const ce=await se.get("/users/all"),oe=Array.isArray(ce.data)?ce.data:[],De=F7(oe);s(De),f($e=>$e&&(De.find(Ze=>Ze.id===$e.id)||null)),console.log(ce.data)}catch(ce){console.error("Error fetching users:",ce);const oe=ce.response?.data?.detail||"Failed to load users. Please try again later.";W.error(oe)}finally{i(!1)}},[]);h.useEffect(()=>{!t&&!ye&&e&&W.error("You are not authorized to access User Management.")},[ye,t,e]),h.useEffect(()=>{t||!ye||ne()},[t,ye,ne]),h.useEffect(()=>{document.title="Users | Sari-Sari CRM"},[]);const Se=h.useMemo(()=>{const ce=o.trim().toLowerCase(),oe=Co(c);return F7(a.filter(De=>{if(!De)return!1;const $e=ce===""||[De.first_name,De.last_name,`${De.first_name||""} ${De.last_name||""}`,De.email,GE(De.role)].filter(Boolean).some(Ze=>Ze.toString().toLowerCase().includes(ce)),Xe=oe===""||oe==="CEO"&&["CEO","ADMIN"].includes(Co(De.role))||Co(De.role)===oe;return $e&&Xe}))},[a,o,c]),de=Math.max(1,Math.ceil(Se.length/D)||1);h.useEffect(()=>{$(1)},[o,c,D]),h.useEffect(()=>{$(ce=>{const oe=Math.max(1,Math.ceil(Se.length/D)||1);return ce>oe?oe:ce})},[Se.length,D]);const ke=h.useMemo(()=>{const ce=(F-1)*D;return Se.slice(ce,ce+D)},[Se,F,D]);Se.length===0||(F-1)*D+1,Math.min(F*D,Se.length);const Te=()=>$(ce=>Math.max(ce-1,1)),pe=()=>$(ce=>Math.min(ce+1,de)),ze=()=>{S(Sg),N(!1),j(null),x(!0)},Pe=ce=>{f(ce),U("Overview"),Z(ce?.is_active?"Active":"Inactive")},We=ce=>{ce.target.id==="userModalBackdrop"&&!L&&tt()},tt=()=>{f(null)},lt=(ce,oe)=>{S(De=>({...De,[ce]:oe}))},Ie=()=>{const ce="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let oe="";for(let De=0;De<10;De+=1)oe+=ce.charAt(Math.floor(Math.random()*ce.length));lt("password",oe)},rt=()=>{_||L||(x(!1),S(Sg),j(null),N(!1))},He=ce=>{S({firstName:ce.first_name||"",lastName:ce.last_name||"",email:ce.email||"",password:"",role:V$e(ce.role)}),N(!0),j(ce.id),x(!0),f(null)},Ke=ce=>{A({title:"Delete User",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsxs("span",{className:"font-semibold",children:[ce.first_name," ",ce.last_name]}),"? This action cannot be undone."]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:ce.id,name:`${ce.first_name||""} ${ce.last_name||""}`.trim()||ce.email||"user"}})},Je=ce=>{ce.preventDefault();const oe=w.firstName.trim(),De=w.lastName.trim(),$e=w.email.trim(),Xe=w.password.trim(),Ze=w.role,mt=!(y&&v);if(!oe||!$e||!Ze){W.warn("Please fill in all required fields.");return}if(mt&&!Xe){W.warn("Please fill in all required fields.");return}if(Xe&&Xe.length<8){W.warn("Password should be at least 8 characters long.");return}const nt={first_name:oe,last_name:De,email:$e,role:Ze};(mt||Xe)&&(nt.password=Xe);const Nt=`${oe} ${De}`.trim(),wt=mt?"create":"update";A({title:wt==="create"?"Confirm New User":"Confirm User Update",message:wt==="create"?n.jsxs("span",{children:["Create user ",n.jsx("span",{className:"font-semibold",children:Nt})," with role"," ",n.jsx("span",{className:"font-semibold",children:GE(Ze)}),"?"]}):n.jsxs("span",{children:["Save changes for"," ",n.jsx("span",{className:"font-semibold",children:Nt||$e}),"?"]}),confirmLabel:wt==="create"?"Create User":"Update User",cancelLabel:"Cancel",variant:"primary",action:{type:wt,payload:nt,targetId:v,name:Nt||$e}})},Oe=async()=>{_e.length!==0&&A({title:"Delete Users",message:n.jsxs("span",{children:["Are you sure you want to deactivate"," ",n.jsx("span",{className:"font-semibold",children:_e.length})," selected users? This action cannot be undone."]}),confirmLabel:`Deactivate ${_e.length} User(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",user_ids:_e}})},Ce=ce=>{if(ce.target.checked){const oe=ke.map(De=>De.id);te(oe)}else te([])},fe=ce=>{te(oe=>oe.includes(ce)?oe.filter(De=>De!==ce):[...oe,ce])},ue=async()=>{if(!T?.action){A(null);return}const{action:ce}=T,{type:oe,payload:De,targetId:$e,name:Xe}=ce;M(!0),(oe==="create"||oe==="update")&&E(!0);try{if(oe==="create"){const mt=(await se.post("/users/createuser",De)).data;await ne(),ve(mt.id),W.success(`User "${Xe}" created successfully.`),x(!1),S(Sg),j(null),N(!1)}else if(oe==="update"){if(!$e)throw new Error("Missing user identifier for update.");const mt=(await se.put(`/users/updateuser/${$e}`,De)).data;await ne(),f(null),ve(mt.id),W.success(`User "${Xe}" updated successfully.`),x(!1),S(Sg),j(null),N(!1)}else if(oe==="delete"){if(!$e)throw new Error("Missing user identifier for deletion.");await se.delete(`/users/deleteuser/${$e}`),s(Ze=>Ze.map(mt=>mt.id===$e?{...mt,is_active:!1}:mt)),d&&d.id===$e&&(f(null),Z("")),W.success(`User "${Xe}" deactivated successfully.`)}else oe==="bulk-delete"&&(await se.delete("/users/admin/bulk-delete",{data:{user_ids:ce.user_ids}}),s(Ze=>Ze.map(mt=>ce.user_ids.includes(mt.id)?{...mt,is_active:!1}:mt)),d&&ce.user_ids.includes(d.id)&&(f(null),Z("")),W.success(`Successfully deactivated ${ce.user_ids.length} users`),te([]))}catch(Ze){console.error("User management error:",Ze);const mt=oe==="create"?"Failed to create user. Please review the details and try again.":oe==="update"?"Failed to update user. Please review the details and try again.":"Failed to delete user. Please try again.",nt=Ze.response?.data?.detail||mt;W.error(nt)}finally{(oe==="create"||oe==="update")&&E(!1),M(!1),A(null)}},H=()=>{L||A(null)},K=async()=>{if(!d||!V)return;const ce=d.is_active?"Active":"Inactive";if(V===ce)return;const oe=V==="Active";le(!0);try{const $e=(await se.put(`/users/updateuser/${d.id}`,{is_active:oe})).data;s(Xe=>Xe.map(Ze=>Ze.id===$e.id?$e:Ze)),f(null),Z(""),W.success(`User status updated to ${V}`)}catch(De){console.error("Failed to update user status:",De);const $e=De.response?.data?.detail||"Failed to update user status. Please try again.";W.error($e)}finally{le(!1)}},we=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[(r||t||!Ne)&&n.jsx(Wt,{}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(iN,{className:"mr-2 text-blue-600"}),"User Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:ze,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(Kn,{className:"mr-2"})," Add User"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Vt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search users",value:o,onChange:ce=>l(ce.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:c,onChange:ce=>u(ce.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:he.map(ce=>n.jsx("option",{value:ce.value,children:ce.label},ce.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:ke.length>0&&ke.every(ce=>_e.includes(ce.id)),onChange:Ce})}),n.jsx("th",{className:"py-3 px-4",children:"Fullname"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Role"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:_e.length>0?n.jsx("button",{onClick:Oe,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Deactivate ${_e.length} selected users`,children:n.jsx(vn,{size:18})}):""})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:3,children:"Loading users..."})}):Se.length===0?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-400",colSpan:4,children:"No users found."})}):ke.map(ce=>n.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${ce.highlight?"bg-green-50":""} ${ce.is_active?"":"opacity-60 bg-gray-50"}`,children:[n.jsx("td",{className:"py-3 px-4",onClick:oe=>oe.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:_e.includes(ce.id),onChange:()=>fe(ce.id)})}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>Pe(ce),children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline text-sm",children:[ce.first_name," ",ce.last_name]})}),n.jsx("td",{className:"py-3 px-4 cursor-pointer text-sm",onClick:()=>Pe(ce),children:ce.email}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>Pe(ce),children:lA(ce.role)}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>Pe(ce),children:n.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-md ${ce.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:ce.is_active?"Active":"Inactive"})})]},ce.id))})]})}),n.jsx(rn,{className:"mt-4",totalItems:Se.length,pageSize:D,currentPage:F,onPrev:Te,onNext:pe,onPageSizeChange:ce=>{q(ce),$(1)},label:"users"})]}),Me=d?n.jsx("div",{id:"userModalBackdrop",onClick:We,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in p-4 sm:p-6 md:p-8 font-inter relative",children:[n.jsx("div",{className:"flex justify-end w-full",children:n.jsx("button",{onClick:tt,className:"text-gray-500 hover:text-gray-700 transition mb-5 cursor-pointer",children:n.jsx(Xn,{size:30})})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7 mb-4 lg:mb-6 md:mb-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[d.profile_picture?n.jsx("img",{src:d.profile_picture,alt:`${d.first_name} ${d.last_name}`,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover border border-gray-200 shadow-sm"}):n.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-200 text-gray-700 flex items-center justify-center text-lg sm:text-xl font-semibold border border-gray-200 shadow-sm",children:Y$e(d.first_name,d.last_name)}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[d.first_name," ",d.last_name]}),n.jsx("p",{className:"text-sm text-gray-500 break-all",children:d.email})]})]}),lA(d.role,{size:"md"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>He(d),disabled:L,children:[n.jsx(ha,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>Ke(d),disabled:L,children:[n.jsx(vn,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 mb-6"}),n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview"].map(ce=>n.jsx("button",{onClick:()=>U(ce),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${G===ce?"bg-[#5c636d] text-white border-white":"text-white hover:bg-[#5c636d]"}`,children:ce},ce))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsx("div",{className:"lg:col-span-3",children:G==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:d.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Role:"}),n.jsx("p",{children:lA(d.role,{size:"sm"})})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:d.is_active?"Active":"Inactive"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Auth Provider:"}),n.jsx("p",{children:d.auth_provider?d.auth_provider.toString().replace(/\b\w/g,ce=>ce.toUpperCase()):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:d.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:d.company?.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company Number:"}),n.jsx("p",{children:d.company?.company_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Related to CEO:"}),n.jsx("p",{children:d.manager?`${d.manager.first_name} ${d.manager.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:z7(d.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Login:"}),n.jsx("p",{children:d.last_login?z7(d.last_login):"Never"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Profile Picture:"}),n.jsx("p",{children:d.profile_picture?n.jsx("a",{href:d.profile_picture,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline break-all",children:"View image"}):"N/A"})]})]})})}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsx("div",{className:"flex flex-col gap-2 w-full",children:n.jsxs("button",{type:"button",onClick:()=>{if(!d.email){alert("No email address available");return}const ce=encodeURIComponent(d.email),oe=encodeURIComponent(""),De=encodeURIComponent(""),$e=`https://mail.google.com/mail/?view=cm&fs=1&to=${ce}&su=${oe}&body=${De}`;window.open($e,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(sa,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]})})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:V||(d.is_active?"Active":"Inactive"),onChange:ce=>Z(ce.target.value),children:[n.jsx("option",{value:"Active",children:"Active"}),n.jsx("option",{value:"Inactive",children:"Inactive"})]}),n.jsx("button",{onClick:K,disabled:Y||V===(d.is_active?"Active":"Inactive"),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Y||V===(d.is_active?"Active":"Inactive")?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:Y?"Updating...":"Update"})]})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[we,Me,n.jsx(K$e,{open:p,isEditing:y,isSubmitting:_,confirmProcessing:L,formData:w,onClose:rt,onSubmit:Je,onChange:lt,onGeneratePassword:Ie}),n.jsx(X$e,{open:!!T,title:T?.title,message:T?.message,confirmLabel:T?.confirmLabel,cancelLabel:T?.cancelLabel,variant:T?.variant,loading:L,onConfirm:ue,onCancel:H})]})}function K$e({open:e,isEditing:t,isSubmitting:a,confirmProcessing:s,formData:r,onClose:i,onSubmit:o,onChange:l,onGeneratePassword:c}){if(!e)return null;const u=a||s;return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-lg border border-gray-200 p-6 sm:p-8 relative overflow-y-auto max-h-[90vh]",children:[n.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:u,children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-6 text-center",children:t?"Edit User":"Add New User"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:o,children:[n.jsx(gb,{label:"First Name",value:r.firstName,onChange:d=>l("firstName",d),placeholder:"John",required:!0,disabled:u}),n.jsx(gb,{label:"Last Name",value:r.lastName,onChange:d=>l("lastName",d),placeholder:"Doe",required:!0,disabled:u}),n.jsx(gb,{label:"Email",type:"email",value:r.email,onChange:d=>l("email",d),placeholder:"john.doe@company.com",required:!0,disabled:u||t}),n.jsx(gb,{label:"Role",type:"select",value:r.role,onChange:d=>l("role",d),options:[{value:"",label:"Select role"},...l1],required:!0,disabled:u}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Password"}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[n.jsx("input",{type:"text",value:r.password,onChange:d=>l("password",d.target.value),placeholder:t?"Leave blank to keep current password":"Enter or generate password",required:!t,disabled:u,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"}),n.jsx("button",{type:"button",onClick:c,className:"flex items-center justify-center px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-60",disabled:u,children:"Generate"})]}),t?n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Setting a password will reset the user's credentials; leave it blank to keep the current password."}):n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long."})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:i,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:u,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:u,children:a?"Saving...":t?"Update User":"Save User"})]})]})]})})}function gb({label:e,type:t="text",value:a,onChange:s,placeholder:r,options:i=[],required:o=!1,disabled:l=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t==="select"?n.jsx("select",{value:a??"",onChange:c=>s(c.target.value),required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100",children:i.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))}):n.jsx("input",{type:t,value:a??"",onChange:c=>s(c.target.value),placeholder:r,required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"})]})}function X$e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-black hover:bg-gray-800 border border-black";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("div",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}const Z$e=(e,t)=>{const a=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${a}${s}`.toUpperCase()||"U"};function J$e(){const{user:e,loading:t,fetchUser:a}=qt(),[s,r]=h.useState(!1),[i,o]=h.useState(!1),[l,c]=h.useState(!1),[u,d]=h.useState(!1),[f,p]=h.useState(!1),[x,y]=h.useState(null),[N,v]=h.useState(null),j=h.useRef(null),[w,S]=h.useState({firstName:"",lastName:"",email:"",phoneNumber:""}),[_,E]=h.useState({currentPassword:"",newPassword:"",confirmPassword:""});h.useEffect(()=>{e&&(S({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),v(e.profile_picture||null))},[e]),h.useEffect(()=>{document.title="Manage Account | Sari-Sari CRM"},[]);const T=($,D)=>{S(q=>({...q,[$]:D}))},A=($,D)=>{E(q=>({...q,[$]:D}))},L=$=>{const D=$.target.files?.[0];if(!D)return;if(!D.type.startsWith("image/")){W.error("Please select an image file");return}if(D.size>5*1024*1024){W.error("Image size should be less than 5MB");return}const q=new FileReader;q.onloadend=()=>{y(q.result),v(q.result)},q.readAsDataURL(D)},M=async $=>{if($.preventDefault(),!w.firstName.trim()||!w.lastName.trim()){W.warn("Please fill in all required fields.");return}r(!0);try{const D={first_name:w.firstName.trim(),last_name:w.lastName.trim(),phone_number:w.phoneNumber.trim()||null};x!==null&&(D.profile_picture=x),await se.put("/users/me",D),await a(),o(!1),y(null),window.dispatchEvent(new CustomEvent("userProfileUpdated")),W.success("Account information updated successfully!")}catch(D){console.error("Error updating account:",D);const q=D.response?.data?.detail||"Failed to update account information. Please try again.";W.error(q)}finally{r(!1)}},F=async $=>{if($.preventDefault(),!_.newPassword||!_.confirmPassword){W.warn("Please fill in all password fields.");return}if(_.newPassword.length<8){W.warn("Password must be at least 8 characters long.");return}if(_.newPassword!==_.confirmPassword){W.warn("New password and confirm password do not match.");return}p(!0);try{const D={password:_.newPassword};await se.put("/users/me",D),await a(),E({currentPassword:"",newPassword:"",confirmPassword:""}),window.dispatchEvent(new CustomEvent("userProfileUpdated")),p(!1),W.success("Password changed successfully!")}catch(D){console.error("Error changing password:",D);const q=D.response?.data?.detail||"Failed to change password. Please try again.";W.error(q)}finally{p(!1)}};return n.jsxs("div",{className:"p-2 lg:p-8 font-inter relative",children:[(t||!e)&&n.jsx(Wt,{}),e&&n.jsxs("div",{children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-gray-800 mb-2",children:"Manage Your Profile"}),n.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Update your account information and change your password"})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mb-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2",children:[n.jsx(nn,{className:"text-blue-600"}),"Profile Information"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:!i&&n.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition text-sm",children:[n.jsx(ha,{}),"Edit Profile"]})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 mb-6 pb-6 border-b border-gray-200",children:[n.jsxs("div",{className:"flex-shrink-0 relative group",children:[N?n.jsx("div",{className:"relative",children:n.jsx("img",{src:N,alt:`${e.first_name} ${e.last_name}`,className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full object-cover border-2 border-gray-200 shadow-sm"})}):n.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 text-white flex items-center justify-center text-2xl sm:text-3xl font-semibold border-2 border-gray-200 shadow-sm",children:Z$e(e.first_name,e.last_name)}),i&&n.jsxs("div",{className:"absolute bottom-0 right-0",children:[n.jsx("input",{type:"file",ref:j,accept:"image/*",onChange:L,className:"hidden",id:"profile-picture-upload"}),n.jsx("label",{htmlFor:"profile-picture-upload",className:"cursor-pointer bg-gray-900 text-white p-1.5 rounded-full shadow-lg hover:bg-gray-800 transition flex items-center justify-center border-2 border-white",title:"Change profile picture",children:n.jsx(u9,{size:14})})]})]}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[i?w.firstName:e.first_name," ",i?w.lastName:e.last_name]}),n.jsx("p",{className:"text-gray-600 text-sm",children:e.email}),n.jsx("span",{className:"inline-block mt-2 px-3 py-1 bg-blue-100 text-blue-700 text-xs font-semibold rounded-md",children:e.role.toUpperCase()==="CEO"&&"Admin"})]})]}),i?n.jsxs("form",{onSubmit:M,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["First Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(nn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",value:w.firstName,onChange:$=>T("firstName",$.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(nn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",value:w.lastName,onChange:$=>T("lastName",$.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),n.jsxs("div",{className:"sm:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Email"}),n.jsxs("div",{className:"relative",children:[n.jsx(sa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"email",value:w.email,disabled:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-600 cursor-not-allowed outline-none",readOnly:!0})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),n.jsxs("div",{className:"sm:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Phone Number"}),n.jsxs("div",{className:"relative",children:[n.jsx(Ot,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"tel",value:w.phoneNumber,onChange:$=>T("phoneNumber",$.target.value),placeholder:"+1 (555) 123-4567",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t border-gray-200",children:[n.jsx("button",{type:"button",onClick:()=>{o(!1),S({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),y(null),v(e.profile_picture||null),j.current&&(j.current.value="")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition",disabled:s,children:"Cancel"}),n.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:s,children:[n.jsx(wL,{}),s?"Saving...":"Save Changes"]})]})]}):n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"First Name"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.first_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Name"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.last_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Email"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Phone Number"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.phone_number||"N/A"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[n.jsx(Ao,{className:"text-blue-600"}),"Change Password"]}),n.jsxs("form",{onSubmit:F,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["New Password ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Ao,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",style:l?void 0:{WebkitTextSecurity:"disc"},value:_.newPassword,onChange:$=>A("newPassword",$.target.value),placeholder:"Enter new password (min. 8 characters)",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),n.jsx("button",{type:"button",onClick:()=>c($=>!$),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":l?"Hide password":"Show password",children:l?n.jsx(ku,{className:"size-5"}):n.jsx(Eu,{className:"size-5"})})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Confirm New Password ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Ao,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",style:u?void 0:{WebkitTextSecurity:"disc"},value:_.confirmPassword,onChange:$=>A("confirmPassword",$.target.value),placeholder:"Confirm new password",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),n.jsx("button",{type:"button",onClick:()=>d($=>!$),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":u?"Hide password":"Show password",children:u?n.jsx(ku,{className:"size-5"}):n.jsx(Eu,{className:"size-5"})})]})]}),n.jsx("div",{className:"pt-4 border-t border-gray-200 flex justify-center lg:justify-start",children:n.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:f,children:[n.jsx(Ao,{}),f?"Changing Password...":"Change Password"]})})]})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mt-6",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[n.jsx(f9,{className:"text-blue-600"}),"Account Information"]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Role"}),n.jsx("span",{className:"inline-block px-3 py-1 bg-blue-100 text-blue-700 text-sm font-semibold rounded-md",children:e.role.toUpperCase()==="CEO"&&"Admin"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Status"}),n.jsx("span",{className:`inline-block px-3 py-1 text-sm font-semibold rounded-md ${e.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:e.is_active?"Active":"Inactive"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Company"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.company?.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Auth Provider"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.auth_provider?e.auth_provider.charAt(0).toUpperCase()+e.auth_provider.slice(1):"N/A"})]}),e.created_at&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Account Created"}),n.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),e.last_login&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Login"}),n.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.last_login).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})})]})]})]})]})]})}function NZ({selectedDeal:e,onStatusUpdate:t,onClose:a}){const[s,r]=h.useState(e?.stage||""),[i,o]=h.useState(!1),l=jt(),c=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}];h.useEffect(()=>{e?.stage&&r(e.stage)},[e]);const u=async()=>{if(!e||!e.id){W.error("No deal selected");return}if(!s||s===e.stage){W.info("Please select a different stage");return}const d=e.id;o(!0);try{await se.put(`/deals/admin/${d}`,{stage:s}),a&&a(),t&&setTimeout(async()=>{await t(!0)},100),setTimeout(()=>{W.success("Deal status updated successfully")},300)}catch(f){console.error(f);const p=f.response?.data?.detail||"Failed to update deal status";W.error(p)}finally{o(!1)}};return e?n.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{const d=e.account?.id||e.account_id;l("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:e.name?`Call regarding: ${e.name}`:"",relatedType1:"Account",relatedTo1:d,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assigned_to:e.assigned_deals?.id?String(e.assigned_deals.id):"",assignedTo:e.assigned_to?.id?String(e.assigned_to.id):""}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Ot,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const d=encodeURIComponent(e.contact.email),f=encodeURIComponent(""),p=encodeURIComponent(""),x=`mailto:${d}?subject=${f}&body=${p}`;window.location.href=x},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(sa,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{const d=e.account?.id||e.account_id;l("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:e.name?`Meeting: ${e.name}`:"",relatedType1:"Account",relatedTo1:d,relatedType2:"Deal",relatedTo2:e.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):""}}})},children:[n.jsx(Pt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{const d=e.account?.id||e.account_id;l("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:e.name?`Task for: ${e.name}`:"",relatedType1:"Account",relatedTo1:d,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:s,onChange:d=>r(d.target.value),disabled:i,children:c.map(d=>n.jsx("option",{value:d.value,children:d.label},d.value))}),n.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:u,disabled:i||!s||s===e.stage,children:i?"Updating...":"Update"})]})]}):null}function jZ({selectedDeal:e,show:t,onClose:a,activeTab:s,setActiveTab:r,onEdit:i,onDelete:o,onStatusUpdate:l,relatedActs:c}){const u=jt(),[d]=Us(),f=d.get("id"),[p,x]=h.useState(e||null),[y,N]=h.useState(s||"Overview"),[v,j]=h.useState(null),[w,S]=h.useState(""),{userRole:_}=Ks(),{comments:E,addComment:T,refresh:A}=ka({relatedType:"deal",relatedId:p?.id});h.useEffect(()=>{p?.id&&A()},[p?.id,A]);const L=s!==void 0?s:y;if(h.useEffect(()=>{_.toLowerCase()==="ceo"||_.toLowerCase()==="admin"?S("admin"):_.toLowerCase()==="group manager"||_.toLowerCase()==="group_manager"?S("group-manager"):_.toLowerCase()==="manager"?S("manager"):_.toLowerCase()==="sales"?S("sales"):S("guest")},[_]),h.useEffect(()=>{(async()=>{if(f&&!e)try{const G=((await se.get("/deals/admin/fetch-all")).data||[]).find(U=>U.id===parseInt(f));if(G){const U={...G,amount:typeof G.amount=="number"?G.amount:parseFloat(G.amount||0),probability:G.probability||0};x(U)}else console.warn("Deal not found with ID:",f)}catch(D){console.error("Error fetching deal:",D)}})()},[f,e]),!p&&!f||f&&!p)return null;const M=$=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[$]||"bg-gray-100 text-gray-700";function F($){return $?new Date($).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),n.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:n.jsx("button",{onClick:()=>{a?a():u(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Xt,{size:25})})})]})}),n.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:n.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[n.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:p.name}),n.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${M(p.stage)}`,children:p.stage})]}),n.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",F(p.created_at)]})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2",children:[n.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[""," ",p.amount?p.amount.toLocaleString():"0"]}),n.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${p.probability}%`}})}),n.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",p.probability,"% Complete"," "]}),n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[n.jsxs("button",{type:"button",onClick:()=>{i&&i(p)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(ha,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),n.jsxs("button",{type:"button",onClick:()=>{o&&o(p)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(vn,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map($=>n.jsx("button",{onClick:()=>{r?r($):N($)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${L===$?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:$},$))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[L==="Overview"&&n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Description:"})," ",p.description]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Expected Close Date:"})," ",p.close_date]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("div",{className:"mt-4 py-3 w-full",children:[n.jsxs("div",{className:"relative flex flex-col w-full",children:[n.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const $=(p?.stage||"PROSPECTING").toUpperCase(),q=(U=>U==="PROSPECTING"?0:U==="QUALIFICATION"?1:U==="PROPOSAL"?2:U==="NEGOTIATION"?3:U==="CLOSED_WON"||U==="CLOSED_LOST"?4:-1)($);return[0,1,2,3,4].map(U=>q===U?"orange":q>U?"green":"gray").map((U,V)=>n.jsxs(xt.Fragment,{children:[n.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${U==="green"?"bg-green-500 border-green-500":U==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),V<4&&n.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},V))})()}),n.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map(($,D)=>n.jsx("span",{className:"text-center flex-1 break-words",children:$},D))})]}),n.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:p.stage})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),n.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Account:"})," ",p.account?.name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Primary Contact:"})," ",p.contact?.first_name," ",p.contact?.last_name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Phone:"})," ",p.contact?.work_phone]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",p.contact?.email]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Assigned To:"})," ",p.assigned_deals?.first_name," ",p.assigned_deals?.last_name]})]})]})]}),L==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:p.description||"No notes available."})]}),n.jsx(Ta,{comments:E,onAddComment:T})]}),s==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[c.tasks&&c.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>j(v==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",c.tasks.length,")"]})]}),v==="tasks"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),v==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:c.tasks.map(($,D)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>u(`/${w}/tasks`,{state:{taskID:$.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:$.subject||$.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:$.description||"No description"}),$.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",$.assigned_to.first_name," ",$.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:F($.due_date||$.created_at)})]},`task-${D}`))})]}),c.meetings&&c.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>j(v==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Pt,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",c.meetings.length,")"]})]}),v==="meetings"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),v==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:c.meetings.map(($,D)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>u(`/${w}/meetings`,{state:{meetingID:$.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Pt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:$.subject||$.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:$.description||$.location||"No description"}),$.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",$.host.first_name," ",$.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:F($.start_time||$.created_at)})]},`meeting-${D}`))})]}),c.calls&&c.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>j(v==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ot,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",c.calls.length,")"]})]}),v==="calls"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),v==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:c.calls.map(($,D)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>u(`/${w}/calls`,{state:{callID:$.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Ot,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:$.subject||$.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:$.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:F($.call_time||$.created_at)})]},`call-${D}`))})]}),c.quotes&&c.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>j(v==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(fn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",c.quotes.length,")"]})]}),v==="quotes"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),v==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:c.quotes.map(($,D)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>u(`/${w}/quotes`,{state:{quoteID:$.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(fn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:($.quote_id?$.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:$.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:F($.presented_date)||""})]},`quote-${D}`))})]}),(!c||(!c.tasks||c.tasks.length===0)&&(!c.meetings||c.meetings.length===0)&&(!c.calls||c.calls.length===0)&&(!c.quotes||c.quotes.length===0)&&(!c.deals||c.deals.length===0)&&(!c.contacts||c.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]}),L==="Edit"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),n.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:p.name})]}),n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),n.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:p.description})]}),n.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),n.jsx("div",{className:"w-full lg:w-auto",children:n.jsx(NZ,{selectedDeal:p,onStatusUpdate:l,onClose:a})})]})]})]})})}function e6e(){h.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const e=jt(),t=Jt(),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Stage"),[o,l]=h.useState("Filter by Owner"),[c,u]=h.useState(null),[d,f]=h.useState("Overview"),[p,x]=h.useState(!1),[y,N]=h.useState(null),[v,j]=h.useState(!1),[w,S]=h.useState(1),[_,E]=h.useState(10),[T,A]=h.useState(!1),[L,M]=h.useState(null),[F,$]=h.useState(!1),[D,q]=h.useState([]),[G,U]=h.useState(!1),[V,Z]=h.useState(null),[Y,le]=h.useState([]),[_e,te]=h.useState([]),[ae,ye]=h.useState([]),[Ne,he]=h.useState({}),[ve,ne]=h.useState(null);h.useEffect(()=>{const Re=t.state,me=Re?.dealID;if(me&&!Re?.openDealModal){ne(me),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(ve&&y?.length>0&&!v){const Re=y.find(me=>me.id===ve);Re?u(Re):W.error("Deal not found."),ne(null)}},[ve,y,v]);const[Se,de]=h.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),ke={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST","Closed Cancelled Stage":"CLOSED_CANCELLED"},Te=Re=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost",CLOSED_CANCELLED:"Closed Cancelled"})[Re]||Re||"--",pe=Re=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700",CLOSED_CANCELLED:"bg-red-100 text-red-700"})[Re]||"bg-gray-100 text-gray-700",ze=h.useCallback(async Re=>{try{const me=await se.get(`/activities/deal/${Re}`);he(me.data&&typeof me.data=="object"?me.data:{})}catch(me){console.error(me),me.response?.status===404&&(console.warn("No activities found for this account."),he({}))}},[]),Pe=h.useMemo(()=>{const Re=a.trim().toLowerCase(),me=r.trim(),ie=o.trim();return(y??[]).filter(Fe=>{const Le=[Fe?.name,Fe?.description,Fe?.account?.name,Fe?.contact?.first_name,Fe?.contact?.last_name,Fe?.assigned_deals?.first_name,Fe?.assigned_deals?.last_name],be=Re===""||Le.some(z=>z==null||z===""?!1:z.toString().toLowerCase().includes(Re)),ee=me==="Filter by Stage"||me===""||Fe.stage===ke[me]||Fe.stage===me,O=ie==="Filter by Owner"||ie===""||`${Fe.assigned_deals?.first_name||""} ${Fe.assigned_deals?.last_name||""}`.trim().toLowerCase()===ie.toLowerCase();return be&&ee&&O})},[y,a,r,o]),We=Math.max(1,Math.ceil(Pe.length/_)||1);h.useEffect(()=>{S(1)},[a,r,o,_]),h.useEffect(()=>{S(Re=>{const me=Math.max(1,Math.ceil(Pe.length/_)||1);return Re>me?me:Re})},[Pe.length,_]);const tt=h.useMemo(()=>{const Re=(w-1)*_;return Pe.slice(Re,Re+_)},[Pe,w,_]),lt=()=>S(Re=>Math.max(Re-1,1)),Ie=()=>S(Re=>Math.min(Re+1,We)),rt=()=>{de({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),U(!1),Z(null),x(!0)},He=async()=>{j(!0);try{const Re=await se.get("/deals/admin/fetch-all"),ie=[...Array.isArray(Re.data)?Re.data:[]].sort((Fe,Le)=>{const be=Fe?.created_at?new Date(Fe.created_at).getTime():0;return(Le?.created_at?new Date(Le.created_at).getTime():0)-be});N(ie)}catch(Re){Re.response&&Re.response.status===403?W.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):W.error("Failed to fetch deals. Please try again later."),console.error(Re)}finally{j(!1)}},Ke=async()=>{try{const Re=await se.get("/accounts/admin/fetch-all");le(Array.isArray(Re.data)?Re.data:[])}catch(Re){console.error(Re),Re.response?.status===403&&W.warn("Unable to load accounts (permission denied).")}},Je=async()=>{try{const Re=await se.get("/contacts/admin/fetch-all");te(Array.isArray(Re.data)?Re.data:[])}catch(Re){console.error(Re),Re.response?.status===403&&W.warn("Unable to load contacts (permission denied).")}},Oe=async()=>{try{const Re=await se.get("/users/all");ye(Array.isArray(Re.data)?Re.data:[])}catch(Re){console.error(Re),Re.response?.status===403&&W.warn("Unable to load users (permission denied).")}};h.useEffect(()=>{He(),Ke(),Je(),Oe()},[]);const Ce=Re=>{Re&&(de({id:Re.id||null,name:Re.name||"",account_id:Re.account_id?.toString()||"",primary_contact_id:Re.primary_contact_id?.toString()||"",stage:Re.stage||"PROPOSAL",amount:Re.amount?.toString()||"",close_date:Re.close_date?new Date(Re.close_date).toISOString().split("T")[0]:"",assigned_to:Re.assigned_to?.toString()||"",currency:Re.currency||"PHP",description:Re.description||""}),U(!0),Z(Re.id),u(null),x(!0))},fe=async(Re=!1)=>{try{const me=await se.get("/deals/admin/fetch-all"),Fe=[...Array.isArray(me.data)?me.data:[]].sort((Le,be)=>{const ee=Le?.created_at?new Date(Le.created_at).getTime():0;return(be?.created_at?new Date(be.created_at).getTime():0)-ee});if(N(Fe),!Re&&c&&c.id){const Le=Fe.find(be=>be.id===c.id);Le&&u({...Le})}}catch(me){console.error("Failed to refresh deal data:",me),await He()}},ue=Re=>{const me=Re.name.trim();if(!me){W.error("Deal name is required.");return}if(!Re.account_id){W.error("Account is required.");return}const ie=G&&V?"update":"create",Fe=me;M({title:ie==="create"?"Confirm New Deal":"Confirm Update",message:ie==="create"?n.jsxs("span",{children:["Are you sure you want to create"," ",n.jsx("span",{className:"font-semibold",children:Fe}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:Fe}),"?"]}),confirmLabel:ie==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:ie,formData:Re,targetId:V||null,name:Fe}})},H=Re=>{if(!Re)return;const me=Re.name||"this deal";M({title:"Delete Deal",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:me}),"? This action cannot be undone."]}),confirmLabel:"Delete Deal",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:Re.id,name:me}})},K=Re=>{if(Re.target.checked){const me=tt.map(ie=>ie.id);q(me)}else q([])},we=Re=>{q(me=>me.includes(Re)?me.filter(ie=>ie!==Re):[...me,Re])},Me=async()=>{D.length!==0&&M({title:"Delete Deals",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:D.length})," selected deals? This action cannot be undone."]}),confirmLabel:`Delete ${D.length} Deal(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",dealIds:D}})},ce=async()=>{if(!L?.action){M(null);return}const{action:Re}=L,{type:me,formData:ie,targetId:Fe,name:Le}=Re;$(!0);try{if(me==="create"){A(!0);const be={name:ie.name.trim(),account_id:parseInt(ie.account_id),primary_contact_id:ie.primary_contact_id?parseInt(ie.primary_contact_id):null,stage:ie.stage,amount:ie.amount?parseFloat(ie.amount):null,currency:ie.currency||"PHP",close_date:ie.close_date||null,description:ie.description||null,assigned_to:ie.assigned_to?parseInt(ie.assigned_to):null};await se.post("/deals/admin/create",be),W.success(`Deal "${Le}" created successfully.`),x(!1),await He()}else if(me==="update"){if(!Fe)throw new Error("Missing deal identifier for update.");A(!0);const be={};ie.name!==void 0&&(be.name=ie.name.trim()),ie.account_id!==void 0&&ie.account_id!==""&&(be.account_id=parseInt(ie.account_id)),ie.primary_contact_id!==void 0&&(be.primary_contact_id=ie.primary_contact_id?parseInt(ie.primary_contact_id):null),ie.stage!==void 0&&(be.stage=ie.stage),ie.amount!==void 0&&ie.amount!==""&&(be.amount=parseFloat(ie.amount)),ie.currency!==void 0&&(be.currency=ie.currency),ie.close_date!==void 0&&(be.close_date=ie.close_date||null),ie.description!==void 0&&(be.description=ie.description||null),ie.assigned_to!==void 0&&(be.assigned_to=ie.assigned_to?parseInt(ie.assigned_to):null),await se.put(`/deals/admin/${Fe}`,be),W.success(`Deal "${Le}" updated successfully.`),x(!1),await He()}else if(me==="delete"){if(!Fe)throw new Error("Missing deal identifier for deletion.");await se.delete(`/deals/admin/${Fe}`),W.success(`Deal "${Le}" deleted successfully.`),c?.id===Fe&&u(null),await He()}else if(me==="bulk-delete"){const{dealIds:be}=Re;await se.delete("/deals/admin/bulk-delete",{data:{deal_ids:be}}),W.success(`Successfully deleted ${be.length} deals`),q([]),await He()}}catch(be){console.error(be);const ee=me==="create"?"Failed to create deal. Please review the details and try again.":me==="update"?"Failed to update deal. Please review the details and try again.":"Failed to delete deal. Please try again.",O=be.response?.data?.detail||ee;W.error(O)}finally{(me==="create"||me==="update")&&A(!1),$(!1),M(null)}},oe=()=>{F||M(null)},De=()=>{x(!1),de({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),U(!1),Z(null),A(!1)},$e=(y??[]).filter(Re=>Re.stage==="PROSPECTING"&&Re.status!=="Inactive").length,Xe=(y??[]).filter(Re=>Re.stage==="QUALIFICATION"&&Re.status!=="Inactive").length,Ze=(y??[]).filter(Re=>Re.stage==="PROPOSAL"&&Re.status!=="Inactive").length,mt=(y??[]).filter(Re=>Re.stage==="NEGOTIATION"&&Re.status!=="Inactive").length,nt=(y??[]).filter(Re=>Re.stage==="CLOSED_WON"&&Re.status!=="Inactive").length,Nt=(y??[]).filter(Re=>Re.stage==="CLOSED_LOST"&&Re.status!=="Inactive").length,wt=(y??[]).filter(Re=>Re.stage==="CLOSED_CANCELLED"&&Re.status!=="Inactive").length,Tt=[{title:"Prospecting",value:$e,icon:oN,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:Xe,icon:ga,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:Ze,icon:tn,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:mt,icon:id,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:nt,icon:aa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:Nt,icon:Fs,color:"text-red-600",bgColor:"bg-red-100"},{title:"Closed Cancelled",value:wt,icon:Fs,color:"text-gray-600",bgColor:"bg-gray-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[v&&n.jsx(Wt,{message:"Loading deals..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(tn,{className:"mr-2 text-blue-600"}),"Deals"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:rt,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(xn,{className:"mr-2"})," Add Deal"]})})]}),n.jsx("div",{className:"grid grid-cols-1 p-2 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden",children:Tt.map(Re=>n.jsx(n6e,{...Re},Re.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Vt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search deals",value:a,onChange:Re=>s(Re.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[n.jsxs("select",{value:r,onChange:Re=>i(Re.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),n.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),n.jsx("option",{value:"Qualification Stage",children:"Qualification"}),n.jsx("option",{value:"Proposal Stage",children:"Proposal"}),n.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),n.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),n.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"}),n.jsx("option",{value:"Closed Cancelled Stage",children:"Closed Cancelled"})]}),n.jsxs("select",{value:o,onChange:Re=>l(Re.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((y??[]).map(Re=>`${Re.assigned_deals?.first_name} ${Re.assigned_deals?.last_name}`))].map((Re,me)=>n.jsx("option",{value:Re,children:Re},me))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:tt.length>0&&tt.every(Re=>D.includes(Re.id)),onChange:K})}),n.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Stage/Status"}),n.jsx("th",{className:"py-3 px-4",children:"Value"}),n.jsx("th",{className:"py-3 px-4",children:"Close Date"}),n.jsx("th",{className:"py-3 px-4",children:"Owner"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:D.length>0?n.jsx("button",{onClick:Me,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${D.length} selected items`,children:n.jsx(vn,{size:18})}):""})]})}),n.jsx("tbody",{children:Pe.length>0?tt.map(Re=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{u({...Re}),ze(Re.id)},children:[n.jsx("td",{className:"py-3 px-4",onClick:me=>me.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:D.includes(Re.id),onChange:()=>we(Re.id)})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:Re.deal_id?Re.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:Re.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:Re.description||"--"})]})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:Re.account?.name||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:Re.contact?.first_name&&Re.contact?.last_name?`${Re.contact.first_name} ${Re.contact.last_name}`:Re.contact?.first_name||Re.contact?.last_name||"--"}),n.jsx("td",{className:"py-3 px-4",children:Re.status==="Inactive"?n.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-gray-300 text-gray-800",children:"Inactive"}):n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${pe(Re.stage)}`,children:Te(Re.stage)})}),n.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",Re.amount?.toLocaleString()||"0"]}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:Re.close_date||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:Re.assigned_deals?.first_name&&Re.assigned_deals?.last_name?`${Re.assigned_deals.first_name} ${Re.assigned_deals.last_name}`:Re.assigned_deals?.first_name||Re.assigned_deals?.last_name||"--"})]},Re.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No deals found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:Pe.length,pageSize:_,currentPage:w,onPrev:lt,onNext:Ie,onPageSizeChange:Re=>{E(Re),S(1)},pageSizeOptions:[10,20,30,40,50],label:"deals"}),p&&n.jsx(a6e,{onClose:De,formData:Se,setFormData:de,isEditing:G,onSubmit:ue,isSubmitting:T||F,accounts:Y,contacts:_e,users:ae}),c&&n.jsx(jZ,{relatedActs:Ne,selectedDeal:c,show:!!c,onClose:()=>u(null),activeTab:d,setActiveTab:f,onEdit:Ce,onDelete:H,onStatusUpdate:fe}),L&&n.jsx(t6e,{open:!0,title:L.title,message:L.message,confirmLabel:L.confirmLabel,cancelLabel:L.cancelLabel,variant:L.variant,onConfirm:ce,onCancel:oe,loading:F})]})}function t6e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function n6e({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function a6e({onClose:e,formData:t,setFormData:a,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,accounts:o=[],contacts:l=[],users:c=[]}){const[u,d]=h.useState(!1),f=y=>{if(y.preventDefault(),d(!0),!t.name?.trim()){W.error("Deal name is required.");return}const N=Number(t.amount);if(!t.amount||isNaN(N)||N<=0){W.error("Amount must be a number greater than 0.");return}if(!t.account_id){W.error("Please select an account.");return}if(!t.primary_contact_id){W.error("Please select a primary contact.");return}if(!t.assigned_to){W.error("Please assign this deal to a user.");return}r?.(t)},p=y=>{y.target.id==="modalBackdrop"&&e()},x=h.useMemo(()=>{const y=String(t.account_id||"").trim(),N=Array.isArray(l)?l:[];return y?N.filter(v=>{const w=[v?.account_id,v?.accountId,v?.account?.id,v?.account?.account_id,v?.account?.accountId].find(S=>S!=null&&String(S).trim()!=="");return w?String(w)===y:!1}):N},[l,t.account_id]);return h.useEffect(()=>{const y=String(t.account_id||"").trim(),N=String(t.primary_contact_id||"").trim();if(!N||!y)return;x.some(j=>String(j?.id)===N)||a(j=>({...j,primary_contact_id:""}))},[t.account_id,t.primary_contact_id,x,a]),n.jsx("div",{id:"modalBackdrop",onClick:p,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:y=>y.stopPropagation(),children:[n.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Deal":"Create Deal"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:f,noValidate:!0,children:[n.jsx(cA,{label:"Deal Name",name:"name",value:t.name,onChange:y=>a({...t,name:y.target.value}),placeholder:"Enter deal name",required:!0,isSubmitted:u,className:"md:col-span-2"}),n.jsx(dA,{label:"Account",value:t.account_id||"",onChange:y=>a({...t,account_id:y}),items:o||[],getLabel:y=>y?.name??"",placeholder:"Search account...",disabled:i,required:!0,isSubmitted:u}),n.jsx(dA,{label:"Primary Contact",value:t.primary_contact_id||"",onChange:y=>a({...t,primary_contact_id:y}),items:x||[],getLabel:y=>`${y?.first_name??""} ${y?.last_name??""}`.trim()||y?.email||"",placeholder:"Search contact...",required:!0,isSubmitted:u,disabled:i}),n.jsx(U7,{label:"Stage",name:"stage",value:t.stage,onChange:y=>a({...t,stage:y.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}],disabled:i}),n.jsx(cA,{label:"Amount",name:"amount",type:"number",step:"0.01",value:t.amount,onChange:y=>a({...t,amount:y.target.value}),placeholder:"0",required:!0,isSubmitted:u}),n.jsx(U7,{label:"Currency",name:"currency",value:t.currency||"PHP",onChange:y=>a({...t,currency:y.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),n.jsx(cA,{label:"Close Date",name:"close_date",type:"date",value:t.close_date||"",onChange:y=>a({...t,close_date:y.target.value}),disabled:i}),n.jsx(dA,{label:"Assign To",value:t.assigned_to||"",onChange:y=>a({...t,assigned_to:y}),items:c||[],getLabel:y=>`${y?.first_name??""} ${y?.last_name??""}`.trim()||y?.email||"",placeholder:"Search assignee...",disabled:i,required:!0,isSubmitted:u,className:"md:col-span-2"}),n.jsx(r6e,{label:"Description",name:"description",value:t.description,onChange:y=>a({...t,description:y.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Deal":"Save Deal"})]})]})]})})}function cA({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:u=!1}){const d=u&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function U7({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))})]})}function dA({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:u=!1}){const d=u&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(s6e,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:d})]})}function s6e({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,u]=h.useState(!1),[d,f]=h.useState(""),p=h.useRef(null),x=e.find(v=>String(v.id)===String(t)),y=x?s(x):"",N=h.useMemo(()=>{const v=d.trim().toLowerCase();return(v?e.filter(w=>(s(w)||"").toLowerCase().includes(v)):e).slice(0,o)},[e,d,s,o]);return h.useEffect(()=>{const v=j=>{p.current&&!p.current.contains(j.target)&&u(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?d:y,placeholder:r,onFocus:()=>!i&&u(!0),onChange:v=>{f(v.target.value),c||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:N.length>0?N.map(v=>{const j=String(v.id),w=s(v),S=String(t)===j;return n.jsx("button",{type:"button",onClick:()=>{a(j),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},j)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function r6e({label:e,name:t,value:a,onChange:s,placeholder:r,required:i=!1,disabled:o=!1,className:l="",rows:c=3}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,required:i,disabled:o,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}var i6e=Object.defineProperty,o6e=(e,t,a)=>t in e?i6e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,uA=(e,t,a)=>(o6e(e,typeof t!="symbol"?t+"":t,a),a);let l6e=class{constructor(){uA(this,"current",this.detect()),uA(this,"handoffState","pending"),uA(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Oo=new l6e;function p0(e){var t;return Oo.isServer?null:e==null?document:(t=e?.ownerDocument)!=null?t:document}function VE(e){var t,a;return Oo.isServer?null:e==null?document:(a=(t=e?.getRootNode)==null?void 0:t.call(e))!=null?a:document}function CZ(e){var t,a;return(a=(t=VE(e))==null?void 0:t.activeElement)!=null?a:null}function c6e(e){return CZ(e)===e}function c1(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function cc(){let e=[],t={addEventListener(a,s,r,i){return a.addEventListener(s,r,i),t.add(()=>a.removeEventListener(s,r,i))},requestAnimationFrame(...a){let s=requestAnimationFrame(...a);return t.add(()=>cancelAnimationFrame(s))},nextFrame(...a){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...a))},setTimeout(...a){let s=setTimeout(...a);return t.add(()=>clearTimeout(s))},microTask(...a){let s={current:!0};return c1(()=>{s.current&&a[0]()}),t.add(()=>{s.current=!1})},style(a,s,r){let i=a.style.getPropertyValue(s);return Object.assign(a.style,{[s]:r}),this.add(()=>{Object.assign(a.style,{[s]:i})})},group(a){let s=cc();return a(s),this.add(()=>s.dispose())},add(a){return e.includes(a)||e.push(a),()=>{let s=e.indexOf(a);if(s>=0)for(let r of e.splice(s,1))r()}},dispose(){for(let a of e.splice(0))a()}};return t}function d1(){let[e]=h.useState(cc);return h.useEffect(()=>()=>e.dispose(),[e]),e}let yr=(e,t)=>{Oo.isServer?h.useEffect(e,t):h.useLayoutEffect(e,t)};function im(e){let t=h.useRef(e);return yr(()=>{t.current=e},[e]),t}let Vn=function(e){let t=im(e);return xt.useCallback((...a)=>t.current(...a),[t])};function x0(e){return h.useMemo(()=>e,Object.values(e))}let d6e=h.createContext(void 0);function u6e(){return h.useContext(d6e)}function YE(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function Kl(e,t,...a){if(e in t){let r=t[e];return typeof r=="function"?r(...a):r}let s=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(r=>`"${r}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,Kl),s}var Lw=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Lw||{}),Jc=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Jc||{});function ki(){let e=f6e();return h.useCallback(t=>m6e({mergeRefs:e,...t}),[e])}function m6e({ourProps:e,theirProps:t,slot:a,defaultTag:s,features:r,visible:i=!0,name:o,mergeRefs:l}){l=l??h6e;let c=SZ(t,e);if(i)return pb(c,a,s,o,l);let u=r??0;if(u&2){let{static:d=!1,...f}=c;if(d)return pb(f,a,s,o,l)}if(u&1){let{unmount:d=!0,...f}=c;return Kl(d?0:1,{0(){return null},1(){return pb({...f,hidden:!0,style:{display:"none"}},a,s,o,l)}})}return pb(c,a,s,o,l)}function pb(e,t={},a,s,r){let{as:i=a,children:o,refName:l="ref",...c}=mA(e,["unmount","static"]),u=e.ref!==void 0?{[l]:e.ref}:{},d=typeof o=="function"?o(t):o;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(t)),c["aria-labelledby"]&&c["aria-labelledby"]===c.id&&(c["aria-labelledby"]=void 0);let f={};if(t){let p=!1,x=[];for(let[y,N]of Object.entries(t))typeof N=="boolean"&&(p=!0),N===!0&&x.push(y.replace(/([A-Z])/g,v=>`-${v.toLowerCase()}`));if(p){f["data-headlessui-state"]=x.join(" ");for(let y of x)f[`data-${y}`]=""}}if(rp(i)&&(Object.keys(nu(c)).length>0||Object.keys(nu(f)).length>0))if(!h.isValidElement(d)||Array.isArray(d)&&d.length>1||p6e(d)){if(Object.keys(nu(c)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${s} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(nu(c)).concat(Object.keys(nu(f))).map(p=>`  - ${p}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(p=>`  - ${p}`).join(`
`)].join(`
`))}else{let p=d.props,x=p?.className,y=typeof x=="function"?(...j)=>YE(x(...j),c.className):YE(x,c.className),N=y?{className:y}:{},v=SZ(d.props,nu(mA(c,["ref"])));for(let j in f)j in v&&delete f[j];return h.cloneElement(d,Object.assign({},v,f,u,{ref:r(g6e(d),u.ref)},N))}return h.createElement(i,Object.assign({},mA(c,["ref"]),!rp(i)&&u,!rp(i)&&f),d)}function f6e(){let e=h.useRef([]),t=h.useCallback(a=>{for(let s of e.current)s!=null&&(typeof s=="function"?s(a):s.current=a)},[]);return(...a)=>{if(!a.every(s=>s==null))return e.current=a,t}}function h6e(...e){return e.every(t=>t==null)?void 0:t=>{for(let a of e)a!=null&&(typeof a=="function"?a(t):a.current=t)}}function SZ(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},a={};for(let s of e)for(let r in s)r.startsWith("on")&&typeof s[r]=="function"?(a[r]!=null||(a[r]=[]),a[r].push(s[r])):t[r]=s[r];if(t.disabled||t["aria-disabled"])for(let s in a)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(s)&&(a[s]=[r=>{var i;return(i=r?.preventDefault)==null?void 0:i.call(r)}]);for(let s in a)Object.assign(t,{[s](r,...i){let o=a[s];for(let l of o){if((r instanceof Event||r?.nativeEvent instanceof Event)&&r.defaultPrevented)return;l(r,...i)}}});return t}function Sr(e){var t;return Object.assign(h.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function nu(e){let t=Object.assign({},e);for(let a in t)t[a]===void 0&&delete t[a];return t}function mA(e,t=[]){let a=Object.assign({},e);for(let s of t)s in a&&delete a[s];return a}function g6e(e){return xt.version.split(".")[0]>="19"?e.props.ref:e.ref}function rp(e){return e===h.Fragment||e===Symbol.for("react.fragment")}function p6e(e){return rp(e.type)}let x6e="span";var Pw=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Pw||{});function y6e(e,t){var a;let{features:s=1,...r}=e,i={ref:t,"aria-hidden":(s&2)===2?!0:(a=r["aria-hidden"])!=null?a:void 0,hidden:(s&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(s&4)===4&&(s&2)!==2&&{display:"none"}}};return ki()({ourProps:i,theirProps:r,slot:{},defaultTag:x6e,name:"Hidden"})}let QE=Sr(y6e);function b6e(e){return typeof e!="object"||e===null?!1:"nodeType"in e}function od(e){return b6e(e)&&"tagName"in e}function Wu(e){return od(e)&&"accessKey"in e}function ed(e){return od(e)&&"tabIndex"in e}function v6e(e){return od(e)&&"style"in e}function w6e(e){return Wu(e)&&e.nodeName==="IFRAME"}function N6e(e){return Wu(e)&&e.nodeName==="INPUT"}let _Z=Symbol();function j6e(e,t=!0){return Object.assign(e,{[_Z]:t})}function Yo(...e){let t=h.useRef(e);h.useEffect(()=>{t.current=e},[e]);let a=Vn(s=>{for(let r of t.current)r!=null&&(typeof r=="function"?r(s):r.current=s)});return e.every(s=>s==null||s?.[_Z])?void 0:a}let YD=h.createContext(null);YD.displayName="DescriptionContext";function AZ(){let e=h.useContext(YD);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,AZ),t}return e}function C6e(){let[e,t]=h.useState([]);return[e.length>0?e.join(" "):void 0,h.useMemo(()=>function(a){let s=Vn(i=>(t(o=>[...o,i]),()=>t(o=>{let l=o.slice(),c=l.indexOf(i);return c!==-1&&l.splice(c,1),l}))),r=h.useMemo(()=>({register:s,slot:a.slot,name:a.name,props:a.props,value:a.value}),[s,a.slot,a.name,a.props,a.value]);return xt.createElement(YD.Provider,{value:r},a.children)},[t])]}let S6e="p";function _6e(e,t){let a=h.useId(),s=u6e(),{id:r=`headlessui-description-${a}`,...i}=e,o=AZ(),l=Yo(t);yr(()=>o.register(r),[r,o.register]);let c=x0({...o.slot,disabled:s||!1}),u={ref:l,...o.props,id:r};return ki()({ourProps:u,theirProps:i,slot:c,defaultTag:S6e,name:o.name||"Description"})}let A6e=Sr(_6e),T6e=Object.assign(A6e,{});var TZ=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(TZ||{});let k6e=h.createContext(()=>{});function E6e({value:e,children:t}){return xt.createElement(k6e.Provider,{value:e},t)}let kZ=class extends Map{constructor(t){super(),this.factory=t}get(t){let a=super.get(t);return a===void 0&&(a=this.factory(t),this.set(t,a)),a}};var L6e=Object.defineProperty,P6e=(e,t,a)=>t in e?L6e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,D6e=(e,t,a)=>(P6e(e,t+"",a),a),EZ=(e,t,a)=>{if(!t.has(e))throw TypeError("Cannot "+a)},ri=(e,t,a)=>(EZ(e,t,"read from private field"),a?a.call(e):t.get(e)),fA=(e,t,a)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,a)},B7=(e,t,a,s)=>(EZ(e,t,"write to private field"),t.set(e,a),a),xo,Gg,Vg;let O6e=class{constructor(t){fA(this,xo,{}),fA(this,Gg,new kZ(()=>new Set)),fA(this,Vg,new Set),D6e(this,"disposables",cc()),B7(this,xo,t),Oo.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return ri(this,xo)}subscribe(t,a){if(Oo.isServer)return()=>{};let s={selector:t,callback:a,current:t(ri(this,xo))};return ri(this,Vg).add(s),this.disposables.add(()=>{ri(this,Vg).delete(s)})}on(t,a){return Oo.isServer?()=>{}:(ri(this,Gg).get(t).add(a),this.disposables.add(()=>{ri(this,Gg).get(t).delete(a)}))}send(t){let a=this.reduce(ri(this,xo),t);if(a!==ri(this,xo)){B7(this,xo,a);for(let s of ri(this,Vg)){let r=s.selector(ri(this,xo));LZ(s.current,r)||(s.current=r,s.callback(r))}for(let s of ri(this,Gg).get(t.type))s(ri(this,xo),t)}}};xo=new WeakMap,Gg=new WeakMap,Vg=new WeakMap;function LZ(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:Array.isArray(e)&&Array.isArray(t)?e.length!==t.length?!1:hA(e[Symbol.iterator](),t[Symbol.iterator]()):e instanceof Map&&t instanceof Map||e instanceof Set&&t instanceof Set?e.size!==t.size?!1:hA(e.entries(),t.entries()):H7(e)&&H7(t)?hA(Object.entries(e)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()):!1}function hA(e,t){do{let a=e.next(),s=t.next();if(a.done&&s.done)return!0;if(a.done||s.done||!Object.is(a.value,s.value))return!1}while(!0)}function H7(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||Object.getPrototypeOf(t)===null}var M6e=Object.defineProperty,I6e=(e,t,a)=>t in e?M6e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,q7=(e,t,a)=>(I6e(e,typeof t!="symbol"?t+"":t,a),a),$6e=(e=>(e[e.Push=0]="Push",e[e.Pop=1]="Pop",e))($6e||{});let R6e={0(e,t){let a=t.id,s=e.stack,r=e.stack.indexOf(a);if(r!==-1){let i=e.stack.slice();return i.splice(r,1),i.push(a),s=i,{...e,stack:s}}return{...e,stack:[...e.stack,a]}},1(e,t){let a=t.id,s=e.stack.indexOf(a);if(s===-1)return e;let r=e.stack.slice();return r.splice(s,1),{...e,stack:r}}},z6e=class PZ extends O6e{constructor(){super(...arguments),q7(this,"actions",{push:t=>this.send({type:0,id:t}),pop:t=>this.send({type:1,id:t})}),q7(this,"selectors",{isTop:(t,a)=>t.stack[t.stack.length-1]===a,inStack:(t,a)=>t.stack.includes(a)})}static new(){return new PZ({stack:[]})}reduce(t,a){return Kl(a.type,R6e,t,a)}};const DZ=new kZ(()=>z6e.new());function OZ(e,t,a=LZ){return M5e.useSyncExternalStoreWithSelector(Vn(s=>e.subscribe(F6e,s)),Vn(()=>e.state),Vn(()=>e.state),Vn(t),a)}function F6e(e){return e}function y0(e,t){let a=h.useId(),s=DZ.get(t),[r,i]=OZ(s,h.useCallback(o=>[s.selectors.isTop(o,a),s.selectors.inStack(o,a)],[s,a]));return yr(()=>{if(e)return s.actions.push(a),()=>s.actions.pop(a)},[s,e,a]),e?i?r:!0:!1}let KE=new Map,ip=new Map;function W7(e){var t;let a=(t=ip.get(e))!=null?t:0;return ip.set(e,a+1),a!==0?()=>G7(e):(KE.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>G7(e))}function G7(e){var t;let a=(t=ip.get(e))!=null?t:1;if(a===1?ip.delete(e):ip.set(e,a-1),a!==1)return;let s=KE.get(e);s&&(s["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",s["aria-hidden"]),e.inert=s.inert,KE.delete(e))}function U6e(e,{allowed:t,disallowed:a}={}){let s=y0(e,"inert-others");yr(()=>{var r,i;if(!s)return;let o=cc();for(let c of(r=a?.())!=null?r:[])c&&o.add(W7(c));let l=(i=t?.())!=null?i:[];for(let c of l){if(!c)continue;let u=p0(c);if(!u)continue;let d=c.parentElement;for(;d&&d!==u.body;){for(let f of d.children)l.some(p=>f.contains(p))||o.add(W7(f));d=d.parentElement}}return o.dispose},[s,t,a])}function B6e(e,t,a){let s=im(r=>{let i=r.getBoundingClientRect();i.x===0&&i.y===0&&i.width===0&&i.height===0&&a()});h.useEffect(()=>{if(!e)return;let r=t===null?null:Wu(t)?t:t.current;if(!r)return;let i=cc();if(typeof ResizeObserver<"u"){let o=new ResizeObserver(()=>s.current(r));o.observe(r),i.add(()=>o.disconnect())}if(typeof IntersectionObserver<"u"){let o=new IntersectionObserver(()=>s.current(r));o.observe(r),i.add(()=>o.disconnect())}return()=>i.dispose()},[t,s,e])}let Dw=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","details>summary","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),H6e=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var Tl=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(Tl||{}),XE=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(XE||{}),q6e=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(q6e||{});function W6e(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Dw)).sort((t,a)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(a.tabIndex||Number.MAX_SAFE_INTEGER)))}function G6e(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(H6e)).sort((t,a)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(a.tabIndex||Number.MAX_SAFE_INTEGER)))}var MZ=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(MZ||{});function V6e(e,t=0){var a;return e===((a=p0(e))==null?void 0:a.body)?!1:Kl(t,{0(){return e.matches(Dw)},1(){let s=e;for(;s!==null;){if(s.matches(Dw))return!0;s=s.parentElement}return!1}})}var Y6e=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(Y6e||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Ml(e){e?.focus({preventScroll:!0})}let Q6e=["textarea","input"].join(",");function K6e(e){var t,a;return(a=(t=e?.matches)==null?void 0:t.call(e,Q6e))!=null?a:!1}function X6e(e,t=a=>a){return e.slice().sort((a,s)=>{let r=t(a),i=t(s);if(r===null||i===null)return 0;let o=r.compareDocumentPosition(i);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function op(e,t,{sorted:a=!0,relativeTo:s=null,skipElements:r=[]}={}){let i=Array.isArray(e)?e.length>0?VE(e[0]):document:VE(e),o=Array.isArray(e)?a?X6e(e):e:t&64?G6e(e):W6e(e);r.length>0&&o.length>1&&(o=o.filter(x=>!r.some(y=>y!=null&&"current"in y?y?.current===x:y===x))),s=s??i?.activeElement;let l=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,o.indexOf(s))-1;if(t&4)return Math.max(0,o.indexOf(s))+1;if(t&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=t&32?{preventScroll:!0}:{},d=0,f=o.length,p;do{if(d>=f||d+f<=0)return 0;let x=c+d;if(t&16)x=(x+f)%f;else{if(x<0)return 3;if(x>=f)return 1}p=o[x],p?.focus(u),d+=l}while(p!==CZ(p));return t&6&&K6e(p)&&p.select(),2}function IZ(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function Z6e(){return/Android/gi.test(window.navigator.userAgent)}function V7(){return IZ()||Z6e()}function xb(e,t,a,s){let r=im(a);h.useEffect(()=>{if(!e)return;function i(o){r.current(o)}return document.addEventListener(t,i,s),()=>document.removeEventListener(t,i,s)},[e,t,s])}function $Z(e,t,a,s){let r=im(a);h.useEffect(()=>{if(!e)return;function i(o){r.current(o)}return window.addEventListener(t,i,s),()=>window.removeEventListener(t,i,s)},[e,t,s])}const Y7=30;function J6e(e,t,a){let s=im(a),r=h.useCallback(function(l,c){if(l.defaultPrevented)return;let u=c(l);if(u===null||!u.getRootNode().contains(u)||!u.isConnected)return;let d=(function f(p){return typeof p=="function"?f(p()):Array.isArray(p)||p instanceof Set?p:[p]})(t);for(let f of d)if(f!==null&&(f.contains(u)||l.composed&&l.composedPath().includes(f)))return;return!V6e(u,MZ.Loose)&&u.tabIndex!==-1&&l.preventDefault(),s.current(l,u)},[s,t]),i=h.useRef(null);xb(e,"pointerdown",l=>{var c,u;V7()||(i.current=((u=(c=l.composedPath)==null?void 0:c.call(l))==null?void 0:u[0])||l.target)},!0),xb(e,"pointerup",l=>{if(V7()||!i.current)return;let c=i.current;return i.current=null,r(l,()=>c)},!0);let o=h.useRef({x:0,y:0});xb(e,"touchstart",l=>{o.current.x=l.touches[0].clientX,o.current.y=l.touches[0].clientY},!0),xb(e,"touchend",l=>{let c={x:l.changedTouches[0].clientX,y:l.changedTouches[0].clientY};if(!(Math.abs(c.x-o.current.x)>=Y7||Math.abs(c.y-o.current.y)>=Y7))return r(l,()=>ed(l.target)?l.target:null)},!0),$Z(e,"blur",l=>r(l,()=>w6e(window.document.activeElement)?window.document.activeElement:null),!0)}function QD(...e){return h.useMemo(()=>p0(...e),[...e])}function RZ(e,t,a,s){let r=im(a);h.useEffect(()=>{e=e??window;function i(o){r.current(o)}return e.addEventListener(t,i,s),()=>e.removeEventListener(t,i,s)},[e,t,s])}function eRe(e){return h.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}function tRe(e,t){let a=e(),s=new Set;return{getSnapshot(){return a},subscribe(r){return s.add(r),()=>s.delete(r)},dispatch(r,...i){let o=t[r].call(a,...i);o&&(a=o,s.forEach(l=>l()))}}}function nRe(){let e;return{before({doc:t}){var a;let s=t.documentElement,r=(a=t.defaultView)!=null?a:window;e=Math.max(0,r.innerWidth-s.clientWidth)},after({doc:t,d:a}){let s=t.documentElement,r=Math.max(0,s.clientWidth-s.offsetWidth),i=Math.max(0,e-r);a.style(s,"paddingRight",`${i}px`)}}}function aRe(){return IZ()?{before({doc:e,d:t,meta:a}){function s(r){for(let i of a().containers)for(let o of i())if(o.contains(r))return!0;return!1}t.microTask(()=>{var r;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let l=cc();l.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>l.dispose()))}let i=(r=window.scrollY)!=null?r:window.pageYOffset,o=null;t.addEventListener(e,"click",l=>{if(ed(l.target))try{let c=l.target.closest("a");if(!c)return;let{hash:u}=new URL(c.href),d=e.querySelector(u);ed(d)&&!s(d)&&(o=d)}catch{}},!0),t.group(l=>{t.addEventListener(e,"touchstart",c=>{if(l.dispose(),ed(c.target)&&v6e(c.target))if(s(c.target)){let u=c.target;for(;u.parentElement&&s(u.parentElement);)u=u.parentElement;l.style(u,"overscrollBehavior","contain")}else l.style(c.target,"touchAction","none")})}),t.addEventListener(e,"touchmove",l=>{if(ed(l.target)){if(N6e(l.target))return;if(s(l.target)){let c=l.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&l.preventDefault()}else l.preventDefault()}},{passive:!1}),t.add(()=>{var l;let c=(l=window.scrollY)!=null?l:window.pageYOffset;i!==c&&window.scrollTo(0,i),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function sRe(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function Q7(e){let t={};for(let a of e)Object.assign(t,a(t));return t}let gu=tRe(()=>new Map,{PUSH(e,t){var a;let s=(a=this.get(e))!=null?a:{doc:e,count:0,d:cc(),meta:new Set,computedMeta:{}};return s.count++,s.meta.add(t),s.computedMeta=Q7(s.meta),this.set(e,s),this},POP(e,t){let a=this.get(e);return a&&(a.count--,a.meta.delete(t),a.computedMeta=Q7(a.meta)),this},SCROLL_PREVENT(e){let t={doc:e.doc,d:e.d,meta(){return e.computedMeta}},a=[aRe(),nRe(),sRe()];a.forEach(({before:s})=>s?.(t)),a.forEach(({after:s})=>s?.(t))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});gu.subscribe(()=>{let e=gu.getSnapshot(),t=new Map;for(let[a]of e)t.set(a,a.documentElement.style.overflow);for(let a of e.values()){let s=t.get(a.doc)==="hidden",r=a.count!==0;(r&&!s||!r&&s)&&gu.dispatch(a.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",a),a.count===0&&gu.dispatch("TEARDOWN",a)}});function rRe(e,t,a=()=>({containers:[]})){let s=eRe(gu),r=t?s.get(t):void 0,i=r?r.count>0:!1;return yr(()=>{if(!(!t||!e))return gu.dispatch("PUSH",t,a),()=>gu.dispatch("POP",t,a)},[e,t]),i}function iRe(e,t,a=()=>[document.body]){let s=y0(e,"scroll-lock");rRe(s,t,r=>{var i;return{containers:[...(i=r.containers)!=null?i:[],a]}})}function oRe(e=0){let[t,a]=h.useState(e),s=h.useCallback(c=>a(c),[]),r=h.useCallback(c=>a(u=>u|c),[]),i=h.useCallback(c=>(t&c)===c,[t]),o=h.useCallback(c=>a(u=>u&~c),[]),l=h.useCallback(c=>a(u=>u^c),[]);return{flags:t,setFlag:s,addFlag:r,hasFlag:i,removeFlag:o,toggleFlag:l}}var lRe={},K7,X7;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((K7=process==null?void 0:lRe)==null?void 0:K7.NODE_ENV)==="test"&&typeof((X7=Element?.prototype)==null?void 0:X7.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var cRe=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(cRe||{});function dRe(e){let t={};for(let a in e)e[a]===!0&&(t[`data-${a}`]="");return t}function uRe(e,t,a,s){let[r,i]=h.useState(a),{hasFlag:o,addFlag:l,removeFlag:c}=oRe(e&&r?3:0),u=h.useRef(!1),d=h.useRef(!1),f=d1();return yr(()=>{var p;if(e){if(a&&i(!0),!t){a&&l(3);return}return(p=s?.start)==null||p.call(s,a),mRe(t,{inFlight:u,prepare(){d.current?d.current=!1:d.current=u.current,u.current=!0,!d.current&&(a?(l(3),c(4)):(l(4),c(2)))},run(){d.current?a?(c(3),l(4)):(c(4),l(3)):a?c(1):l(1)},done(){var x;d.current&&gRe(t)||(u.current=!1,c(7),a||i(!1),(x=s?.end)==null||x.call(s,a))}})}},[e,a,t,f]),e?[r,{closed:o(1),enter:o(2),leave:o(4),transition:o(2)||o(4)}]:[a,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function mRe(e,{prepare:t,run:a,done:s,inFlight:r}){let i=cc();return hRe(e,{prepare:t,inFlight:r}),i.nextFrame(()=>{a(),i.requestAnimationFrame(()=>{i.add(fRe(e,s))})}),i.dispose}function fRe(e,t){var a,s;let r=cc();if(!e)return r.dispose;let i=!1;r.add(()=>{i=!0});let o=(s=(a=e.getAnimations)==null?void 0:a.call(e).filter(l=>l instanceof CSSTransition))!=null?s:[];return o.length===0?(t(),r.dispose):(Promise.allSettled(o.map(l=>l.finished)).then(()=>{i||t()}),r.dispose)}function hRe(e,{inFlight:t,prepare:a}){if(t!=null&&t.current){a();return}let s=e.style.transition;e.style.transition="none",a(),e.offsetHeight,e.style.transition=s}function gRe(e){var t,a;return((a=(t=e.getAnimations)==null?void 0:t.call(e))!=null?a:[]).some(s=>s instanceof CSSTransition&&s.playState!=="finished")}function KD(e,t){let a=h.useRef([]),s=Vn(e);h.useEffect(()=>{let r=[...a.current];for(let[i,o]of t.entries())if(a.current[i]!==o){let l=s(t,r);return a.current=t,l}},[s,...t])}let u1=h.createContext(null);u1.displayName="OpenClosedContext";var qi=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(qi||{});function m1(){return h.useContext(u1)}function pRe({value:e,children:t}){return xt.createElement(u1.Provider,{value:e},t)}function xRe({children:e}){return xt.createElement(u1.Provider,{value:null},e)}function yRe(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Qc=[];yRe(()=>{function e(t){if(!ed(t.target)||t.target===document.body||Qc[0]===t.target)return;let a=t.target;a=a.closest(Dw),Qc.unshift(a??t.target),Qc=Qc.filter(s=>s!=null&&s.isConnected),Qc.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function zZ(e){let t=Vn(e),a=h.useRef(!1);h.useEffect(()=>(a.current=!1,()=>{a.current=!0,c1(()=>{a.current&&t()})}),[t])}let FZ=h.createContext(!1);function bRe(){return h.useContext(FZ)}function Z7(e){return xt.createElement(FZ.Provider,{value:e.force},e.children)}function vRe(e){let t=bRe(),a=h.useContext(BZ),[s,r]=h.useState(()=>{var i;if(!t&&a!==null)return(i=a.current)!=null?i:null;if(Oo.isServer)return null;let o=e?.getElementById("headlessui-portal-root");if(o)return o;if(e===null)return null;let l=e.createElement("div");return l.setAttribute("id","headlessui-portal-root"),e.body.appendChild(l)});return h.useEffect(()=>{s!==null&&(e!=null&&e.body.contains(s)||e==null||e.body.appendChild(s))},[s,e]),h.useEffect(()=>{t||a!==null&&r(a.current)},[a,r,t]),s}let UZ=h.Fragment,wRe=Sr(function(e,t){let{ownerDocument:a=null,...s}=e,r=h.useRef(null),i=Yo(j6e(p=>{r.current=p}),t),o=QD(r.current),l=a??o,c=vRe(l),u=h.useContext(ZE),d=d1(),f=ki();return zZ(()=>{var p;c&&c.childNodes.length<=0&&((p=c.parentElement)==null||p.removeChild(c))}),c?Hi.createPortal(xt.createElement("div",{"data-headlessui-portal":"",ref:p=>{d.dispose(),u&&p&&d.add(u.register(p))}},f({ourProps:{ref:i},theirProps:s,slot:{},defaultTag:UZ,name:"Portal"})),c):null});function NRe(e,t){let a=Yo(t),{enabled:s=!0,ownerDocument:r,...i}=e,o=ki();return s?xt.createElement(wRe,{...i,ownerDocument:r,ref:a}):o({ourProps:{ref:a},theirProps:i,slot:{},defaultTag:UZ,name:"Portal"})}let jRe=h.Fragment,BZ=h.createContext(null);function CRe(e,t){let{target:a,...s}=e,r={ref:Yo(t)},i=ki();return xt.createElement(BZ.Provider,{value:a},i({ourProps:r,theirProps:s,defaultTag:jRe,name:"Popover.Group"}))}let ZE=h.createContext(null);function SRe(){let e=h.useContext(ZE),t=h.useRef([]),a=Vn(i=>(t.current.push(i),e&&e.register(i),()=>s(i))),s=Vn(i=>{let o=t.current.indexOf(i);o!==-1&&t.current.splice(o,1),e&&e.unregister(i)}),r=h.useMemo(()=>({register:a,unregister:s,portals:t}),[a,s,t]);return[t,h.useMemo(()=>function({children:i}){return xt.createElement(ZE.Provider,{value:r},i)},[r])]}let _Re=Sr(NRe),HZ=Sr(CRe),ARe=Object.assign(_Re,{Group:HZ});function TRe(e,t=typeof document<"u"?document.defaultView:null,a){let s=y0(e,"escape");RZ(t,"keydown",r=>{s&&(r.defaultPrevented||r.key===TZ.Escape&&a(r))})}function kRe(){var e;let[t]=h.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[a,s]=h.useState((e=t?.matches)!=null?e:!1);return yr(()=>{if(!t)return;function r(i){s(i.matches)}return t.addEventListener("change",r),()=>t.removeEventListener("change",r)},[t]),a}function ERe({defaultContainers:e=[],portals:t,mainTreeNode:a}={}){let s=Vn(()=>{var r,i;let o=p0(a),l=[];for(let c of e)c!==null&&(od(c)?l.push(c):"current"in c&&od(c.current)&&l.push(c.current));if(t!=null&&t.current)for(let c of t.current)l.push(c);for(let c of(r=o?.querySelectorAll("html > *, body > *"))!=null?r:[])c!==document.body&&c!==document.head&&od(c)&&c.id!=="headlessui-portal-root"&&(a&&(c.contains(a)||c.contains((i=a?.getRootNode())==null?void 0:i.host))||l.some(u=>c.contains(u))||l.push(c));return l});return{resolveContainers:s,contains:Vn(r=>s().some(i=>i.contains(r)))}}let qZ=h.createContext(null);function J7({children:e,node:t}){let[a,s]=h.useState(null),r=WZ(t??a);return xt.createElement(qZ.Provider,{value:r},e,r===null&&xt.createElement(QE,{features:Pw.Hidden,ref:i=>{var o,l;if(i){for(let c of(l=(o=p0(i))==null?void 0:o.querySelectorAll("html > *, body > *"))!=null?l:[])if(c!==document.body&&c!==document.head&&od(c)&&c!=null&&c.contains(i)){s(c);break}}}}))}function WZ(e=null){var t;return(t=h.useContext(qZ))!=null?t:e}function LRe(){let e=typeof document>"u";return"useSyncExternalStore"in _u?(t=>t.useSyncExternalStore)(_u)(()=>()=>{},()=>!1,()=>!e):!1}function f1(){let e=LRe(),[t,a]=h.useState(Oo.isHandoffComplete);return t&&Oo.isHandoffComplete===!1&&a(!1),h.useEffect(()=>{t!==!0&&a(!0)},[t]),h.useEffect(()=>Oo.handoff(),[]),e?!1:t}function XD(){let e=h.useRef(!1);return yr(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var Yg=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Yg||{});function PRe(){let e=h.useRef(0);return $Z(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function GZ(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let a of e.current)od(a.current)&&t.add(a.current);return t}let DRe="div";var iu=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(iu||{});function ORe(e,t){let a=h.useRef(null),s=Yo(a,t),{initialFocus:r,initialFocusFallback:i,containers:o,features:l=15,...c}=e;f1()||(l=0);let u=QD(a.current);RRe(l,{ownerDocument:u});let d=zRe(l,{ownerDocument:u,container:a,initialFocus:r,initialFocusFallback:i});FRe(l,{ownerDocument:u,container:a,containers:o,previousActiveElement:d});let f=PRe(),p=Vn(w=>{if(!Wu(a.current))return;let S=a.current;(_=>_())(()=>{Kl(f.current,{[Yg.Forwards]:()=>{op(S,Tl.First,{skipElements:[w.relatedTarget,i]})},[Yg.Backwards]:()=>{op(S,Tl.Last,{skipElements:[w.relatedTarget,i]})}})})}),x=y0(!!(l&2),"focus-trap#tab-lock"),y=d1(),N=h.useRef(!1),v={ref:s,onKeyDown(w){w.key=="Tab"&&(N.current=!0,y.requestAnimationFrame(()=>{N.current=!1}))},onBlur(w){if(!(l&4))return;let S=GZ(o);Wu(a.current)&&S.add(a.current);let _=w.relatedTarget;ed(_)&&_.dataset.headlessuiFocusGuard!=="true"&&(VZ(S,_)||(N.current?op(a.current,Kl(f.current,{[Yg.Forwards]:()=>Tl.Next,[Yg.Backwards]:()=>Tl.Previous})|Tl.WrapAround,{relativeTo:w.target}):ed(w.target)&&Ml(w.target)))}},j=ki();return xt.createElement(xt.Fragment,null,x&&xt.createElement(QE,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:Pw.Focusable}),j({ourProps:v,theirProps:c,defaultTag:DRe,name:"FocusTrap"}),x&&xt.createElement(QE,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:Pw.Focusable}))}let MRe=Sr(ORe),IRe=Object.assign(MRe,{features:iu});function $Re(e=!0){let t=h.useRef(Qc.slice());return KD(([a],[s])=>{s===!0&&a===!1&&c1(()=>{t.current.splice(0)}),s===!1&&a===!0&&(t.current=Qc.slice())},[e,Qc,t]),Vn(()=>{var a;return(a=t.current.find(s=>s!=null&&s.isConnected))!=null?a:null})}function RRe(e,{ownerDocument:t}){let a=!!(e&8),s=$Re(a);KD(()=>{a||c6e(t?.body)&&Ml(s())},[a]),zZ(()=>{a&&Ml(s())})}function zRe(e,{ownerDocument:t,container:a,initialFocus:s,initialFocusFallback:r}){let i=h.useRef(null),o=y0(!!(e&1),"focus-trap#initial-focus"),l=XD();return KD(()=>{if(e===0)return;if(!o){r!=null&&r.current&&Ml(r.current);return}let c=a.current;c&&c1(()=>{if(!l.current)return;let u=t?.activeElement;if(s!=null&&s.current){if(s?.current===u){i.current=u;return}}else if(c.contains(u)){i.current=u;return}if(s!=null&&s.current)Ml(s.current);else{if(e&16){if(op(c,Tl.First|Tl.AutoFocus)!==XE.Error)return}else if(op(c,Tl.First)!==XE.Error)return;if(r!=null&&r.current&&(Ml(r.current),t?.activeElement===r.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}i.current=t?.activeElement})},[r,o,e]),i}function FRe(e,{ownerDocument:t,container:a,containers:s,previousActiveElement:r}){let i=XD(),o=!!(e&4);RZ(t?.defaultView,"focus",l=>{if(!o||!i.current)return;let c=GZ(s);Wu(a.current)&&c.add(a.current);let u=r.current;if(!u)return;let d=l.target;Wu(d)?VZ(c,d)?(r.current=d,Ml(d)):(l.preventDefault(),l.stopPropagation(),Ml(u)):Ml(r.current)},!0)}function VZ(e,t){for(let a of e)if(a.contains(t))return!0;return!1}function YZ(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||!rp((t=e.as)!=null?t:KZ)||xt.Children.count(e.children)===1}let h1=h.createContext(null);h1.displayName="TransitionContext";var URe=(e=>(e.Visible="visible",e.Hidden="hidden",e))(URe||{});function BRe(){let e=h.useContext(h1);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function HRe(){let e=h.useContext(g1);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let g1=h.createContext(null);g1.displayName="NestingContext";function p1(e){return"children"in e?p1(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function QZ(e,t){let a=im(e),s=h.useRef([]),r=XD(),i=d1(),o=Vn((x,y=Jc.Hidden)=>{let N=s.current.findIndex(({el:v})=>v===x);N!==-1&&(Kl(y,{[Jc.Unmount](){s.current.splice(N,1)},[Jc.Hidden](){s.current[N].state="hidden"}}),i.microTask(()=>{var v;!p1(s)&&r.current&&((v=a.current)==null||v.call(a))}))}),l=Vn(x=>{let y=s.current.find(({el:N})=>N===x);return y?y.state!=="visible"&&(y.state="visible"):s.current.push({el:x,state:"visible"}),()=>o(x,Jc.Unmount)}),c=h.useRef([]),u=h.useRef(Promise.resolve()),d=h.useRef({enter:[],leave:[]}),f=Vn((x,y,N)=>{c.current.splice(0),t&&(t.chains.current[y]=t.chains.current[y].filter(([v])=>v!==x)),t?.chains.current[y].push([x,new Promise(v=>{c.current.push(v)})]),t?.chains.current[y].push([x,new Promise(v=>{Promise.all(d.current[y].map(([j,w])=>w)).then(()=>v())})]),y==="enter"?u.current=u.current.then(()=>t?.wait.current).then(()=>N(y)):N(y)}),p=Vn((x,y,N)=>{Promise.all(d.current[y].splice(0).map(([v,j])=>j)).then(()=>{var v;(v=c.current.shift())==null||v()}).then(()=>N(y))});return h.useMemo(()=>({children:s,register:l,unregister:o,onStart:f,onStop:p,wait:u,chains:d}),[l,o,s,f,p,d,u])}let KZ=h.Fragment,XZ=Lw.RenderStrategy;function qRe(e,t){var a,s;let{transition:r=!0,beforeEnter:i,afterEnter:o,beforeLeave:l,afterLeave:c,enter:u,enterFrom:d,enterTo:f,entered:p,leave:x,leaveFrom:y,leaveTo:N,...v}=e,[j,w]=h.useState(null),S=h.useRef(null),_=YZ(e),E=Yo(..._?[S,t,w]:t===null?[]:[t]),T=(a=v.unmount)==null||a?Jc.Unmount:Jc.Hidden,{show:A,appear:L,initial:M}=BRe(),[F,$]=h.useState(A?"visible":"hidden"),D=HRe(),{register:q,unregister:G}=D;yr(()=>q(S),[q,S]),yr(()=>{if(T===Jc.Hidden&&S.current){if(A&&F!=="visible"){$("visible");return}return Kl(F,{hidden:()=>G(S),visible:()=>q(S)})}},[F,S,q,G,A,T]);let U=f1();yr(()=>{if(_&&U&&F==="visible"&&S.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[S,F,U,_]);let V=M&&!L,Z=L&&A&&M,Y=h.useRef(!1),le=QZ(()=>{Y.current||($("hidden"),G(S))},D),_e=Vn(ne=>{Y.current=!0;let Se=ne?"enter":"leave";le.onStart(S,Se,de=>{de==="enter"?i?.():de==="leave"&&l?.()})}),te=Vn(ne=>{let Se=ne?"enter":"leave";Y.current=!1,le.onStop(S,Se,de=>{de==="enter"?o?.():de==="leave"&&c?.()}),Se==="leave"&&!p1(le)&&($("hidden"),G(S))});h.useEffect(()=>{_&&r||(_e(A),te(A))},[A,_,r]);let ae=!(!r||!_||!U||V),[,ye]=uRe(ae,j,A,{start:_e,end:te}),Ne=nu({ref:E,className:((s=YE(v.className,Z&&u,Z&&d,ye.enter&&u,ye.enter&&ye.closed&&d,ye.enter&&!ye.closed&&f,ye.leave&&x,ye.leave&&!ye.closed&&y,ye.leave&&ye.closed&&N,!ye.transition&&A&&p))==null?void 0:s.trim())||void 0,...dRe(ye)}),he=0;F==="visible"&&(he|=qi.Open),F==="hidden"&&(he|=qi.Closed),A&&F==="hidden"&&(he|=qi.Opening),!A&&F==="visible"&&(he|=qi.Closing);let ve=ki();return xt.createElement(g1.Provider,{value:le},xt.createElement(pRe,{value:he},ve({ourProps:Ne,theirProps:v,defaultTag:KZ,features:XZ,visible:F==="visible",name:"Transition.Child"})))}function WRe(e,t){let{show:a,appear:s=!1,unmount:r=!0,...i}=e,o=h.useRef(null),l=YZ(e),c=Yo(...l?[o,t]:t===null?[]:[t]);f1();let u=m1();if(a===void 0&&u!==null&&(a=(u&qi.Open)===qi.Open),a===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[d,f]=h.useState(a?"visible":"hidden"),p=QZ(()=>{a||f("hidden")}),[x,y]=h.useState(!0),N=h.useRef([a]);yr(()=>{x!==!1&&N.current[N.current.length-1]!==a&&(N.current.push(a),y(!1))},[N,a]);let v=h.useMemo(()=>({show:a,appear:s,initial:x}),[a,s,x]);yr(()=>{a?f("visible"):!p1(p)&&o.current!==null&&f("hidden")},[a,p]);let j={unmount:r},w=Vn(()=>{var E;x&&y(!1),(E=e.beforeEnter)==null||E.call(e)}),S=Vn(()=>{var E;x&&y(!1),(E=e.beforeLeave)==null||E.call(e)}),_=ki();return xt.createElement(g1.Provider,{value:p},xt.createElement(h1.Provider,{value:v},_({ourProps:{...j,as:h.Fragment,children:xt.createElement(ZZ,{ref:c,...j,...i,beforeEnter:w,beforeLeave:S})},theirProps:{},defaultTag:h.Fragment,features:XZ,visible:d==="visible",name:"Transition"})))}function GRe(e,t){let a=h.useContext(h1)!==null,s=m1()!==null;return xt.createElement(xt.Fragment,null,!a&&s?xt.createElement(JE,{ref:t,...e}):xt.createElement(ZZ,{ref:t,...e}))}let JE=Sr(WRe),ZZ=Sr(qRe),ZD=Sr(GRe),dv=Object.assign(JE,{Child:ZD,Root:JE});var VRe=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(VRe||{}),YRe=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(YRe||{});let QRe={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},JD=h.createContext(null);JD.displayName="DialogContext";function x1(e){let t=h.useContext(JD);if(t===null){let a=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,x1),a}return t}function KRe(e,t){return Kl(t.type,QRe,e,t)}let e8=Sr(function(e,t){let a=h.useId(),{id:s=`headlessui-dialog-${a}`,open:r,onClose:i,initialFocus:o,role:l="dialog",autoFocus:c=!0,__demoMode:u=!1,unmount:d=!1,...f}=e,p=h.useRef(!1);l=(function(){return l==="dialog"||l==="alertdialog"?l:(p.current||(p.current=!0,console.warn(`Invalid role [${l}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")})();let x=m1();r===void 0&&x!==null&&(r=(x&qi.Open)===qi.Open);let y=h.useRef(null),N=Yo(y,t),v=QD(y.current),j=r?0:1,[w,S]=h.useReducer(KRe,{titleId:null,descriptionId:null,panelRef:h.createRef()}),_=Vn(()=>i(!1)),E=Vn(ye=>S({type:0,id:ye})),T=f1()?j===0:!1,[A,L]=SRe(),M={get current(){var ye;return(ye=w.panelRef.current)!=null?ye:y.current}},F=WZ(),{resolveContainers:$}=ERe({mainTreeNode:F,portals:A,defaultContainers:[M]}),D=x!==null?(x&qi.Closing)===qi.Closing:!1;U6e(u||D?!1:T,{allowed:Vn(()=>{var ye,Ne;return[(Ne=(ye=y.current)==null?void 0:ye.closest("[data-headlessui-portal]"))!=null?Ne:null]}),disallowed:Vn(()=>{var ye;return[(ye=F?.closest("body > *:not(#headlessui-portal-root)"))!=null?ye:null]})});let q=DZ.get(null);yr(()=>{if(T)return q.actions.push(s),()=>q.actions.pop(s)},[q,s,T]);let G=OZ(q,h.useCallback(ye=>q.selectors.isTop(ye,s),[q,s]));J6e(G,$,ye=>{ye.preventDefault(),_()}),TRe(G,v?.defaultView,ye=>{ye.preventDefault(),ye.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),_()}),iRe(u||D?!1:T,v,$),B6e(T,y,_);let[U,V]=C6e(),Z=h.useMemo(()=>[{dialogState:j,close:_,setTitleId:E,unmount:d},w],[j,_,E,d,w]),Y=x0({open:j===0}),le={ref:N,id:s,role:l,tabIndex:-1,"aria-modal":u?void 0:j===0?!0:void 0,"aria-labelledby":w.titleId,"aria-describedby":U,unmount:d},_e=!kRe(),te=iu.None;T&&!u&&(te|=iu.RestoreFocus,te|=iu.TabLock,c&&(te|=iu.AutoFocus),_e&&(te|=iu.InitialFocus));let ae=ki();return xt.createElement(xRe,null,xt.createElement(Z7,{force:!0},xt.createElement(ARe,null,xt.createElement(JD.Provider,{value:Z},xt.createElement(HZ,{target:y},xt.createElement(Z7,{force:!1},xt.createElement(V,{slot:Y},xt.createElement(L,null,xt.createElement(IRe,{initialFocus:o,initialFocusFallback:y,containers:$,features:te},xt.createElement(E6e,{value:_},ae({ourProps:le,theirProps:f,slot:Y,defaultTag:XRe,features:ZRe,visible:j===0,name:"Dialog"})))))))))))}),XRe="div",ZRe=Lw.RenderStrategy|Lw.Static;function JRe(e,t){let{transition:a=!1,open:s,...r}=e,i=m1(),o=e.hasOwnProperty("open")||i!==null,l=e.hasOwnProperty("onClose");if(!o&&!l)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!o)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!l)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!i&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(s!==void 0||a)&&!r.static?xt.createElement(J7,null,xt.createElement(dv,{show:s,transition:a,unmount:r.unmount},xt.createElement(e8,{ref:t,...r}))):xt.createElement(J7,null,xt.createElement(e8,{ref:t,open:s,...r}))}let eze="div";function tze(e,t){let a=h.useId(),{id:s=`headlessui-dialog-panel-${a}`,transition:r=!1,...i}=e,[{dialogState:o,unmount:l},c]=x1("Dialog.Panel"),u=Yo(t,c.panelRef),d=x0({open:o===0}),f=Vn(v=>{v.stopPropagation()}),p={ref:u,id:s,onClick:f},x=r?ZD:h.Fragment,y=r?{unmount:l}:{},N=ki();return xt.createElement(x,{...y},N({ourProps:p,theirProps:i,slot:d,defaultTag:eze,name:"Dialog.Panel"}))}let nze="div";function aze(e,t){let{transition:a=!1,...s}=e,[{dialogState:r,unmount:i}]=x1("Dialog.Backdrop"),o=x0({open:r===0}),l={ref:t,"aria-hidden":!0},c=a?ZD:h.Fragment,u=a?{unmount:i}:{},d=ki();return xt.createElement(c,{...u},d({ourProps:l,theirProps:s,slot:o,defaultTag:nze,name:"Dialog.Backdrop"}))}let sze="h2";function rze(e,t){let a=h.useId(),{id:s=`headlessui-dialog-title-${a}`,...r}=e,[{dialogState:i,setTitleId:o}]=x1("Dialog.Title"),l=Yo(t);h.useEffect(()=>(o(s),()=>o(null)),[s,o]);let c=x0({open:i===0}),u={ref:l,id:s};return ki()({ourProps:u,theirProps:r,slot:c,defaultTag:sze,name:"Dialog.Title"})}let ize=Sr(JRe),oze=Sr(tze);Sr(aze);let lze=Sr(rze),t8=Object.assign(ize,{Panel:oze,Title:lze,Description:T6e});function b0({isOpen:e,onClose:t,onSave:a,onEdit:s,setFormData:r,formData:i,isEditing:o=!1,viewMode:l=!1,users:c=[],currentUser:u,onDelete:d}){const[f,p]=h.useState([]),[x,y]=h.useState([]),[N,v]=h.useState({}),{comments:j,addComment:w,refresh:S}=ka({relatedType:"task",relatedId:i?.id});h.useEffect(()=>{i?.id&&S()},[i?.id,S]);const _=F=>{if(!F)return"";const $=String(F).split("-");return $.length===3?`${$[0]}-${$[2]}`:String(F)},E=F=>{const{name:$,value:D}=F.target;$==="subject"&&D.trim()&&v(q=>({...q,subject:!1})),r(q=>{const G={...q,[$]:D};return $==="relatedType1"&&(G.relatedTo1="",D==="Lead"?(G.relatedType2=null,G.relatedTo2=null,y([])):D==="Account"&&(G.relatedType2="Contact")),$==="relatedType2"&&(G.relatedTo2=""),G})};h.useEffect(()=>{if(!e)return;(async()=>{try{p([]);let $;i.relatedType1==="Lead"?$=await se.get("/leads/admin/getLeads"):i.relatedType1==="Account"&&($=await se.get("/accounts/admin/fetch-all"));let D=[];if($&&Array.isArray($.data)&&(D=$.data),o&&i.relatedTo1)try{let q;i.relatedType1==="Lead"?q=await se.get(`/leads/get/${i.relatedTo1}`):i.relatedType1==="Account"&&(q=await se.get(`/accounts/get/${i.relatedTo1}`)),q&&q.data&&(D.some(U=>String(U.id)===String(i.relatedTo1))||(D=[q.data,...D]))}catch(q){console.error("Error fetching specific related item:",q)}p(D)}catch($){console.error("Error fetching related 1 data:",$),p([])}})()},[i.relatedType1,e,o,i.relatedTo1]),h.useEffect(()=>{if(!e||l)return;(async()=>{try{if(y([]),i.relatedType1==="Account"&&i.relatedTo1){let $;i.relatedType2==="Contact"?$=await se.get(`/contacts/from-acc/${i.relatedTo1}`):i.relatedType2==="Deal"?$=await se.get(`/deals/from-acc/${i.relatedTo1}`):i.relatedType2==="Quote"&&($=await se.get(`/quotes/from-acc/${i.relatedTo1}`));let D=[];if($&&Array.isArray($.data)&&(D=$.data),o&&i.relatedTo2)try{let q;i.relatedType2==="Contact"?q=await se.get(`/contacts/get/${i.relatedTo2}`):i.relatedType2==="Deal"?q=await se.get(`/deals/get/${i.relatedTo2}`):i.relatedType2==="Quote"&&(q=await se.get(`/quotes/get/${i.relatedTo2}`)),q&&q.data&&(D.some(U=>String(U.id)===String(i.relatedTo2))||(D=[q.data,...D]))}catch(q){console.error("Error fetching specific related item:",q)}y(D)}}catch($){console.error("Error fetching related 2 data:",$),y([])}})()},[i.relatedType1,i.relatedTo1,i.relatedType2,i.relatedTo2,e,l,o]);const[T,A]=h.useState(!1);h.useEffect(()=>{e&&(A(!1),v({}))},[e]);const L=F=>{F.preventDefault(),A(!0);const $={};i.subject?.trim()||($.subject=!0,W.error("Title is required")),v($),i.relatedTo1||($.relatedTo1=!0,W.error(`Please select a ${i.relatedType1||"Lead/Account"}.`)),i.assignedTo||($.assignedTo=!0,W.error("Assigned To is required.")),!(Object.keys($).length>0)&&a?.(i)},M=l?"Task Details":o?"Edit Task":"Create Task";return n.jsx(dv,{appear:!0,show:e,as:h.Fragment,children:n.jsxs(t8,{as:"div",className:"relative z-50",onClose:t,children:[n.jsx(dv.Child,{as:h.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:n.jsx("div",{className:"fixed inset-0 bg-black/40"})}),n.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 overflow-y-auto",children:n.jsx("div",{className:"flex min-h-full items-center justify-center text-center",children:n.jsx(dv.Child,{as:h.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:n.jsx(t8.Panel,{className:"w-full max-w-full sm:max-w-3xl text-left align-middle transform transition-all",children:n.jsxs("div",{className:"bg-white w-full min-w-sm md:min-w-lg rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] flex flex-col hide-scrollbar",children:[n.jsx("button",{onClick:()=>{t(),A(!1),v({})},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Xn,{size:25})}),n.jsx("h3",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:M}),l&&n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",onClick:t,children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[90vh] overflow-y-auto hide-scrollbar font-manrope relative",onClick:F=>F.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-4 rounded-t-xl",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Tasks"}),n.jsx("button",{onClick:()=>{t(),A(!1)},className:"text-gray-500 hover:text-white transition cursor-pointer",children:n.jsx(Xn,{size:25})})]}),n.jsx("div",{className:"p-6 lg:p-4",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:i.subject||"No Title"})}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[String(i?.createdById)===String(u?.id)&&n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 cursor-pointer",onClick:()=>{r&&r(i),typeof s=="function"&&s()},children:[n.jsx(ha,{className:"mr-2"}),"Edit"]}),String(i?.createdById)===String(u?.id)&&n.jsx(n.Fragment,{children:u?.role==="Sales"?n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400 cursor-pointer",onClick:()=>d(i),children:[n.jsx(Zt,{className:"mr-2"}),"Archive"]}):n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400 cursor-pointer",onClick:()=>d(i),children:[n.jsx(vn,{className:"mr-2"}),"Delete"]})})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white overflow-x-auto",children:n.jsx("button",{className:"flex-1 min-w-[90px] px-4 py-2 lg:text-lg text-sm font-medium text-center text-white",children:"Overview"})}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 lg:p-5 border border-gray-200 text-sm text-gray-700",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Title:"}),n.jsx("p",{children:i.subject||""})]}),i.relatedType1Text&&i.relatedTo1Text&&n.jsxs("div",{children:[n.jsxs("p",{className:"font-semibold",children:[i.relatedType1Text,":"]}),n.jsx("p",{children:i.relatedTo1Text})]}),i.relatedType2Text&&i.relatedTo2Text&&n.jsxs("div",{children:[n.jsxs("p",{className:"font-semibold",children:[i.relatedType2,":"]}),n.jsx("p",{children:i.relatedTo2Text})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:i.assignedToName||""})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:i.createdBy||""})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Priority:"}),n.jsx("p",{children:i.priority||""})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:i.status||""})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Due Date:"}),n.jsx("p",{children:i.dueDate||""})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("p",{className:"font-semibold",children:"Description:"}),n.jsx("p",{className:"whitespace-pre-wrap",children:i.description||""})]})]}),n.jsx(Ta,{comments:j,onAddComment:w})]})]})]})}),!l&&n.jsxs("form",{onSubmit:L,className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm flex-1",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Title"," ",n.jsx("span",{className:"text-red-500 font-semibold",children:"*"})]}),n.jsx("input",{type:"text",name:"subject",value:i.subject,onChange:E,disabled:l,placeholder:"Enter task title",className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
                            ${N.subject?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
                            ${l?"bg-gray-50 cursor-not-allowed":""}
                          `})]}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("div",{className:"relative w-25",children:[n.jsxs("select",{name:"relatedType1",onChange:E,value:i.relatedType1,disabled:l,className:"w-full pr-6 rounded-md text-sm mb-2",children:[n.jsx("option",{value:"Lead",children:"Lead"}),n.jsx("option",{value:"Account",children:"Account"})]}),n.jsx("span",{className:"absolute left-10 md:pl-6 pl-6 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),n.jsx(gA,{disabled:!1,items:Array.isArray(f)?f:[],value:i.relatedTo1??"",placeholder:`Search ${i.relatedType1||"here"}...`,getLabel:F=>i.relatedType1==="Lead"?F.title:F.name??"",onChange:F=>r($=>({...$,relatedTo1:F})),required:!0,isSubmitted:T})]}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("select",{name:"relatedType2",onChange:E,value:i.relatedType2??"Contact",className:"w-23 rounded-md text-sm focus:ring-2 focus:ring-blue-400 outline-none mb-2 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:l||i.relatedType1==="Lead",children:[n.jsx("option",{value:"Contact",children:"Contact"}),n.jsx("option",{value:"Deal",children:"Deal"}),n.jsx("option",{value:"Quote",children:"Quote"})]}),n.jsx(gA,{disabled:i.relatedType1==="Lead",items:Array.isArray(x)?x:[],value:i.relatedTo2??"",placeholder:i.relatedType1==="Lead"?"":Array.isArray(x)&&x.length>0?`Search ${i.relatedType2||"Contact"}...`:`No ${i.relatedType2||""} data found`,getLabel:F=>i.relatedType2==="Contact"?`${F.first_name??""} ${F.last_name??""}`.trim():i.relatedType2==="Quote"?_(F.quote_id)??"":F.name??"",onChange:F=>r($=>({...$,relatedTo2:F}))})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Description"}),n.jsx("textarea",{name:"description",value:i.description,onChange:E,disabled:l,placeholder:"Enter task description",rows:3,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${l?"bg-gray-50 cursor-not-allowed":""}`})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Priority"}),n.jsxs("select",{name:"priority",value:i.priority,onChange:E,disabled:l,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${l?"bg-gray-50 cursor-not-allowed":""}`,children:[n.jsx("option",{value:"Low",children:"Low"}),n.jsx("option",{value:"Normal",children:"Normal"}),n.jsx("option",{value:"High",children:"High"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Due Date"}),n.jsx("input",{type:"datetime-local",name:"dueDate",value:i.dueDate,onChange:E,disabled:l,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${l?"bg-gray-50 cursor-not-allowed":""}`})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To"," ",u?.role!=="Sales"&&n.jsx("span",{className:"text-red-500 font-semibold",children:"*"})]}),n.jsx(gA,{items:Array.isArray(c)?c:[],value:i.assignedTo??"",placeholder:u?.role==="Sales"?`${u.first_name} ${u.last_name}`:"Search an account...",getLabel:F=>`${F.first_name} ${F.last_name}`,onChange:F=>r($=>({...$,assignedTo:F})),disabled:l||u?.role==="Sales",required:u?.role!=="Sales",isSubmitted:T})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),n.jsxs("select",{name:"status",value:i.status,onChange:E,disabled:l,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${l?"bg-gray-50 cursor-not-allowed":""}`,children:[n.jsx("option",{value:"Not started",children:"Not started"}),n.jsx("option",{value:"In progress",children:"In Progress"}),n.jsx("option",{value:"Deferred",children:"Deferred"}),n.jsx("option",{value:"Completed",children:"Completed"})]})]}),!l&&n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{t(),A(!1),v({})},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition",children:o?"Update Task":"Create Task"})]})]})]})})})})})]})})}function gA({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,required:l=!1,isSubmitted:c=!1}){const[u,d]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),y=e.find(w=>String(w.id)===String(t)),N=y?s(y):"",v=l&&c&&!t,j=h.useMemo(()=>{const w=f.trim().toLowerCase();return(w?e.filter(_=>(s(_)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&d(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{u||p("")},[u]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:u?f:N,placeholder:r,onFocus:()=>!i&&d(!0),onChange:w=>{p(w.target.value),u||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${v?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),u&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:j.length>0?j.map(w=>{const S=String(w.id),_=s(w),E=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${E?"bg-blue-50":""}`,children:_||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const n8=["Not started","In progress","Deferred","Completed"],a8={NOT_STARTED:"Not started","NOT STARTED":"Not started","TO DO":"Not started",IN_PROGRESS:"In progress","IN PROGRESS":"In progress",COMPLETED:"Completed",DEFERRED:"Deferred","Not started":"Not started","In progress":"In progress",Completed:"Completed",Deferred:"Deferred","In Progress":"In progress","To Do":"Not started",Review:"Deferred"},JZ=e=>e&&(a8[e]||a8[String(e).toUpperCase()])||"Not started",cze=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const a=t.getTimezoneOffset();return new Date(t.getTime()-a*60*1e3).toISOString().slice(0,16)},pA=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},dze=e=>{const t=e.subject?.trim()??"",a=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),JZ(e.status);let r=null,i=null,o=null,l=null,c=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?o=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Quote"&&e.relatedTo2&&(c=Number(e.relatedTo2)));const u=e.assignedTo?Number(e.assignedTo):null,d=o||l||i||r,f=o?"Contact":l?"Deal":i?"Account":r?"Lead":c?"Quote":null;return{title:t,description:a,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:u,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:o,deal_id:l,quote_id:c,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:d,related_type:f}},uze=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",a=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",o=G=>{if(!G)return"";const U=String(G).split("-");return U.length===3?`${U[0]}-${U[2]}`:String(G)},l=()=>e.lead?.id||e.lead_id,c=()=>e.account?.id||e.account_id,u=()=>e.contact?.id||e.contact_id,d=()=>e.deal?.id||e.deal_id,f=()=>e.quote?.id||e.quote_id,p=()=>e.task_assign_to?.id||e.assigned_to,x=()=>e.lead?.title||e.lead_id,y=()=>e.account?.name||e.account_id,N=()=>i||e.contact_id,v=()=>e.deal?.name||e.deal_id,j=()=>o(e.quote?.quote_id)||e.id;let w="Lead",S="",_="",E="",T="Lead",A="",L="",M="";const F=c(),$=y(),D=l(),q=x();if(F){w="Account",T="Account",A=$,S=String(F);const G=u(),U=d(),V=N(),Z=v(),Y=f(),le=j();G?(_="Contact",L="Contact",M=V,E=String(G)):U?(L="Deal",_="Deal",M=Z,E=String(U)):Y&&(L="Quote",_="Quote",M=le,E=String(Y))}else D?(T="Lead",A=q,w="Lead",S=String(D)):e.related_type==="Account"&&(w="Account",S=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:JZ(e.status),dueDate:s,dateAssigned:r,assignedToId:p()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:a,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:T,relatedTo1Text:A,relatedType2Text:L,relatedTo2Text:M,subject:e.title,relatedType1:w,relatedTo1:S,relatedType2:_,relatedTo2:E}};function mze(){h.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=qt(),[a,s]=h.useState("board"),[r,i]=h.useState(!1),[o,l]=h.useState(null),[c,u]=h.useState(!1),[d,f]=h.useState([]),[p,x]=h.useState(!0),[y,N]=h.useState(""),[v,j]=h.useState("Filter by Status"),[w,S]=h.useState("Filter by Priority"),[_,E]=h.useState([]),[T,A]=h.useState(1),[L,M]=h.useState(10),[F,$]=h.useState(null),[D,q]=h.useState(!1),[G,U]=h.useState([]),[V,Z]=h.useState(null),Y=jt(),le=Jt(),[_e,te]=h.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""}),[ae,ye]=h.useState(null),Ne=Fx(zf(am,{activationConstraint:{distance:8}})),he=H=>{const{active:K}=H,we=d.find(Me=>Me.id===K.id);Z(we)},ve=async H=>{const{active:K,over:we}=H;if(Z(null),!we)return;const Me=K.id,ce=we.id,oe=d.find(De=>De.id===Me);if(!(!oe||oe.status===ce)){f(De=>De.map($e=>$e.id===Me?{...$e,status:ce}:$e));try{const De={title:oe.title,description:oe.description||"",priority:oe.priority||"Normal",status:ce,due_date:oe.dueDate||null,assigned_to:oe.assignedToId||null,related_type_1:oe.relatedType1||null,related_to_1:oe.relatedTo1?parseInt(oe.relatedTo1,10):null,related_type_2:oe.relatedType2||null,related_to_2:oe.relatedTo2?parseInt(oe.relatedTo2,10):null};(!De.related_to_1||isNaN(De.related_to_1))&&(De.related_to_1=null),(!De.related_to_2||isNaN(De.related_to_2))&&(De.related_to_2=null),await se.put(`/tasks/${Me}`,De),W.success(`Task moved to "${ce}"`)}catch(De){console.error("Failed to update task status:",De),W.error("Failed to update task status"),f($e=>$e.map(Xe=>Xe.id===Me?{...Xe,status:oe.status}:Xe))}}},ne=()=>{Z(null)};h.useEffect(()=>{const H=le.state?.openTaskModal,K=le.state?.initialTaskData,we=le.state?.taskID;H?(i(!0),K&&te(Me=>({...Me,...K})),Y(le.pathname,{replace:!0,state:{}})):we&&(ye(we),Y(le.pathname,{replace:!0,state:{}}))},[le,Y]),h.useEffect(()=>{if(ae&&d.length>0&&!p){const H=d.find(K=>K.id===ae);H?Te(H,!0):W.error("Task not found."),ye(null)}},[ae,d,p]);const Se=async()=>{try{const H=await se.get("/users/all");E(Array.isArray(H.data)?H.data:[])}catch(H){console.error("Failed to fetch users:",H),W.error("Failed to fetch users.")}},de=async()=>{try{x(!0);const H=await se.get("/tasks/all"),we=(Array.isArray(H.data)?H.data:[]).map(uze);we.sort((Me,ce)=>{const oe=Me.createdAt?new Date(Me.createdAt):0;return(ce.createdAt?new Date(ce.createdAt):0)-oe}),f(we),a==="list"&&A(1)}catch(H){console.error("Failed to load tasks:",H),W.error("Failed to load tasks.")}finally{x(!1)}};h.useEffect(()=>{if(!t&&e){Se(),de();const H=CN(e.id),K=new WebSocket(H);return K.onopen=()=>{console.log(" Connected to task notifications")},K.onmessage=we=>{try{const Me=JSON.parse(we.data);Me.type==="task_status_updated"&&(W.info(` ${Me.message}`,{position:"top-right",autoClose:4e3}),de())}catch(Me){console.error("Error parsing notification:",Me)}},K.onerror=we=>{console.error(" WebSocket error:",we)},K.onclose=()=>{console.log(" Disconnected from task notifications")},()=>{K&&K.readyState===WebSocket.OPEN&&K.close()}}},[t,e]);const ke=()=>{l(null),te({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},Te=(H=null,K=!1)=>{l(H),u(K),H?te({id:H.id,subject:H.title||"",description:H.description||"",priority:H.priority||"Normal",status:H.status||"Not started",dueDate:cze(H.dueDate),assignedTo:H.assignedToId?String(H.assignedToId):"",assignedToName:H.assignedToName||"",createdBy:H.createdBy||"",notes:H.notes||"",relatedType1Text:H.relatedType1Text||"",relatedTo1Text:H.relatedTo1Text||"",relatedType2Text:H.relatedType2Text||"",relatedTo2Text:H.relatedTo2Text||"",relatedType1:H.relatedType1||"",relatedTo1:H.relatedTo1||"",relatedType2:H.relatedType2||"",relatedTo2:H.relatedTo2||""}):ke(),i(!0)},pe=()=>{i(!1),l(null),u(!1),ke()},ze=async H=>{const K=dze(H);try{o&&!c?(await se.put(`/tasks/${o.id}`,K),W.success("Task updated successfully.")):(await se.post("/tasks/create",K),W.success("Task created successfully.")),i(!1),await de()}catch(we){console.error("Failed to save task:",we);const Me=we.response?.data?.detail||"Failed to save task.";W.error(Me)}},Pe=H=>{H&&$({title:"Delete Task",message:n.jsxs(n.Fragment,{children:["Are you sure you want to delete ",n.jsx("span",{className:"font-semibold",children:H.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:H.id}})},We=()=>{if(Ke.every(H=>G.includes(H.id)))U(G.filter(H=>!Ke.map(K=>K.id).includes(H)));else{const H=Ke.map(K=>K.id);U([...new Set([...G,...H])])}},tt=H=>{U(K=>K.includes(H)?K.filter(we=>we!==H):[...K,H])},lt=async()=>{G.length!==0&&$({title:"Delete Tasks",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:G.length})," selected tasks? This action cannot be undone."]}),confirmLabel:`Delete ${G.length} Task(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",task_ids:G}})},Ie=async()=>{if(!F?.action){$(null);return}const{action:H}=F;q(!0);try{H.type==="delete"?(await se.delete(`/tasks/${H.targetId}`),W.success("Task deleted successfully."),await de()):H.type==="bulk-delete"&&(await se.delete("/tasks/admin/bulk-delete",{data:{task_ids:H.task_ids}}),W.success(`Successfully deleted ${H.task_ids.length} tasks`),U([]),await de())}catch(K){console.error("Task action failed:",K),W.error("Failed to delete task.")}finally{q(!1),$(null)}},rt=()=>{D||$(null)},He=h.useMemo(()=>{const H=y.trim().toLowerCase();return[...d].sort((we,Me)=>{const ce=we.createdAt?new Date(we.createdAt):0;return(Me.createdAt?new Date(Me.createdAt):0)-ce}).filter(we=>{const Me=H===""||we.title?.toLowerCase().includes(H)||we.description?.toLowerCase().includes(H)||we.assignedToName?.toLowerCase().includes(H)||we.createdBy?.toLowerCase().includes(H),ce=v==="Filter by Status"||we.status===v,oe=w==="Filter by Priority"||we.priority===w;return Me&&ce&&oe})},[d,y,v,w]);h.useEffect(()=>{A(1)},[y,v,w,a,L]),h.useEffect(()=>{if(a==="list"){const H=He.length===0?1:Math.ceil(He.length/L);T>H&&A(H)}},[He.length,T,a,L]);const Ke=h.useMemo(()=>{if(a==="board")return He;const H=(T-1)*L;return He.slice(H,H+L)},[He,T,a,L]),Je=h.useMemo(()=>{const H=new Date;return[{title:"To Do",value:d.filter(K=>K.status==="Not started").length,icon:Vs,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:d.filter(K=>K.status==="In progress").length,icon:Gi,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:d.filter(K=>K.status==="Completed").length,icon:aa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:d.filter(K=>K.dueDate&&new Date(K.dueDate)<H&&K.status!=="Completed").length,icon:Yu,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:d.filter(K=>K.priority==="High").length,icon:Xl,color:"text-orange-600",bgColor:"bg-orange-100"}]},[d]),Oe=H=>H.dueDate&&new Date(H.dueDate)<new Date&&H.status!=="Completed",Ce=H=>{switch(H.status){case"Not started":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Deferred":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},fe=H=>{switch(H){case"Not started":return"bg-blue-100 text-blue-700";case"In progress":return"bg-purple-100 text-purple-700";case"Deferred":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},ue=H=>{switch(H){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&n.jsx(Wt,{message:"Loading tasks..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(Gi,{className:"text-blue-600"})," Tasks Board"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:()=>Te(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[n.jsx(xn,{})," Create Task"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Je.map(H=>n.jsx(fze,{...H},H.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Vt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search tasks",value:y,onChange:H=>N(H.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{value:v,onChange:H=>j(H.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Status"}),n8.map(H=>n.jsx("option",{children:H},H))]}),n.jsxs("select",{value:w,onChange:H=>S(H.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Priority"}),n.jsx("option",{children:"High"}),n.jsx("option",{children:"Normal"}),n.jsx("option",{children:"Low"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${a==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),n.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${a==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&a==="board"&&(He.length>0?n.jsxs(Hx,{sensors:Ne,collisionDetection:Ux,onDragStart:he,onDragEnd:ve,onDragCancel:ne,children:[n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:n8.map(H=>{const K=Ke.filter(we=>we.status===H);return n.jsx(gze,{column:H,columnTasks:K,getTaskCardColor:Ce,isTaskOverdue:Oe,formatDateDisplay:pA,handleOpenModal:Te,handleDeleteTask:Pe},H)})}),n.jsx(bj,{children:V?n.jsx(xze,{task:V,getTaskCardColor:Ce,isTaskOverdue:Oe,formatDateDisplay:pA}):null})]}):n.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No tasks found."})),!p&&!t&&a==="list"&&n.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:Ke.length>0&&Ke.every(H=>G.includes(H.id)),onChange:We})}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),n.jsx("th",{className:"py-3 px-4 font-medium text-center w-24",children:G.length>0?n.jsx("button",{onClick:lt,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${G.length} selected tasks`,children:n.jsx(vn,{size:18})}):""})]})}),n.jsx("tbody",{children:Ke.length>0?Ke.map(H=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",children:[n.jsx("td",{className:"py-3 px-4",onClick:K=>K.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:G.includes(H.id),onChange:()=>tt(H.id)})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",onClick:()=>Te(H,!0),children:H.title}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>Te(H,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${fe(H.status||"Not started")}`,children:H.status||"Not started"})}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>Te(H,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${ue(H.priority||"Low")}`,children:H.priority||"Low"})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",onClick:()=>Te(H,!0),children:H.assignedToName||"Unassigned"}),n.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${Oe(H)?"text-red-600 font-medium":""}`,onClick:()=>Te(H,!0),children:H.dateAssigned?pA(H.dateAssigned):""}),n.jsx("td",{})]},H.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No tasks found."})})})]})})}),!p&&!t&&a==="list"&&n.jsx(rn,{className:"mt-6",totalItems:He.length,pageSize:L,currentPage:He.length===0?0:T,onPrev:()=>A(H=>Math.max(H-1,1)),onNext:()=>A(H=>Math.min(H+1,Math.max(1,Math.ceil(He.length/L)||1))),onPageSizeChange:H=>{M(H),A(1)},pageSizeOptions:[10,20,30,40,50],label:"tasks"}),n.jsx(b0,{isOpen:r,onClose:pe,onSave:ze,onEdit:()=>u(!1),setFormData:te,formData:_e,isEditing:!c&&!!o,viewMode:c,users:_,currentUser:e,onDelete:Pe}),F&&n.jsx(hze,{open:!0,title:F.title,message:F.message,confirmLabel:F.confirmLabel,cancelLabel:F.cancelLabel,variant:F.variant,onConfirm:Ie,onCancel:rt,loading:D})]})}function fze({icon:e,title:t,value:a,color:s,bgColor:r,onClick:i}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function hze({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r,variant:i,loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function gze({column:e,columnTasks:t,getTaskCardColor:a,isTaskOverdue:s,formatDateDisplay:r,handleOpenModal:i,handleDeleteTask:o}){const{isOver:l,setNodeRef:c}=Wx({id:e});return n.jsxs("div",{ref:c,className:`bg-white p-4 shadow border flex flex-col relative rounded-md transition-all duration-200 min-h-[200px] ${l?"border-blue-400 bg-blue-50 ring-2 ring-blue-300":"border-gray-200"}`,children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),n.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:e}),n.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:t.length})]}),n.jsx("div",{className:`space-y-3 flex-1 ${t.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:t.length>0?t.map(u=>n.jsx(pze,{task:u,getTaskCardColor:a,isTaskOverdue:s,formatDateDisplay:r,handleOpenModal:i,handleDeleteTask:o},u.id)):n.jsx("div",{className:`text-center py-10 text-gray-500 border-2 border-dashed rounded-lg ${l?"border-blue-300 bg-blue-50":"border-gray-200"}`,children:l?"Drop here":"No tasks"})})]})}function pze({task:e,getTaskCardColor:t,isTaskOverdue:a,formatDateDisplay:s,handleOpenModal:r,handleDeleteTask:i}){const{attributes:o,listeners:l,setNodeRef:c,transform:u,isDragging:d}=qx({id:e.id}),f=u?{transform:`translate3d(${u.x}px, ${u.y}px, 0)`}:void 0;return n.jsxs("div",{ref:c,style:f,className:`border rounded-lg p-3 transition flex justify-between items-start cursor-grab active:cursor-grabbing ${t(e)} ${d?"opacity-50 shadow-lg ring-2 ring-blue-400":""}`,...l,...o,children:[n.jsxs("div",{className:"text-left flex-1",onClick:p=>{p.stopPropagation(),r(e,!0)},children:[n.jsx("p",{className:"font-medium text-gray-800 text-sm",children:e.title}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",e.priority]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",e.assignedToName]}),n.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",n.jsx("span",{className:a(e)?"text-red-600":"text-gray-600",children:e.dateAssigned?s(e.dateAssigned):""})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-3",onClick:p=>p.stopPropagation(),children:[n.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),r(e)},className:"text-blue-500 hover:text-blue-700",children:n.jsx(ha,{})}),n.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),i(e)},className:"text-red-500 hover:text-red-700",children:n.jsx(vn,{})})]})]})}function xze({task:e,getTaskCardColor:t,isTaskOverdue:a,formatDateDisplay:s}){return n.jsx("div",{className:`border rounded-lg p-3 shadow-xl ring-2 ring-blue-400 ${t(e)}`,style:{width:"280px"},children:n.jsxs("div",{className:"text-left flex-1",children:[n.jsx("p",{className:"font-medium text-gray-800 text-sm",children:e.title}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",e.priority]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",e.assignedToName]}),n.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",n.jsx("span",{className:a(e)?"text-red-600":"text-gray-600",children:e.dateAssigned?s(e.dateAssigned):""})]})]})})}function yze(e){return At({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M235.4 172.2c0-11.4 9.3-19.9 20.5-19.9 11.4 0 20.7 8.5 20.7 19.9s-9.3 20-20.7 20c-11.2 0-20.5-8.6-20.5-20zm1.4 35.7H275V352h-38.2V207.9z"},child:[]},{tag:"path",attr:{d:"M256 76c48.1 0 93.3 18.7 127.3 52.7S436 207.9 436 256s-18.7 93.3-52.7 127.3S304.1 436 256 436c-48.1 0-93.3-18.7-127.3-52.7S76 304.1 76 256s18.7-93.3 52.7-127.3S207.9 76 256 76m0-28C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48z"},child:[]}]})(e)}const xA={name:"",description:"",manager_id:"",user_ids:[],company_id:""};function bze({label:e,options:t,selectedValues:a,onChange:s,disabled:r=!1,placeholder:i="Select users...",isSubmitted:o=!1,required:l=!1}){const[c,u]=h.useState(!1),[d,f]=h.useState(""),p=h.useRef(null);h.useEffect(()=>{function j(w){p.current&&!p.current.contains(w.target)&&(u(!1),f(""))}return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]);const x=t.filter(j=>j.label.toLowerCase().includes(d.toLowerCase())),y=j=>{const w=a.includes(j);let S;w?S=a.filter(_=>_!==j):S=[...a,j],s(S)},N=(j,w)=>{j.stopPropagation(),s(a.filter(S=>S!==w))},v=t.filter(j=>a.includes(j.value));return n.jsxs("div",{className:"relative",ref:p,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsxs("div",{onClick:()=>!r&&u(!c),className:`w-full border ${l&&o&&a.length===0?"border-red-500 ring-red-500":c?"border-gray-500 ring-1 ring-gray-400":"border-gray-300"} 
  rounded-md px-3 py-2 text-sm bg-white cursor-pointer min-h-[38px] flex flex-wrap items-center gap-2
  ${r?"bg-gray-100 cursor-not-allowed":""}`,children:[a.length===0&&n.jsx("span",{className:"text-gray-400 select-none",children:i}),v.map(j=>n.jsxs("span",{className:"bg-indigo-100 text-indigo-700 px-2 py-0.5 rounded text-xs flex items-center gap-1 border border-indigo-200",children:[j.label,!r&&n.jsx(Xt,{className:"cursor-pointer hover:text-indigo-900",onClick:w=>N(w,j.value)})]},j.value)),n.jsx("div",{className:"ml-auto text-gray-400",children:n.jsx(Lt,{})})]}),c&&!r&&n.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden flex flex-col",children:[n.jsx("div",{className:"p-2 border-b border-gray-100 sticky top-0 bg-white",children:n.jsxs("div",{className:"flex items-center px-2 py-1 bg-gray-50 rounded border border-gray-200",children:[n.jsx(Vt,{className:"text-gray-400 mr-2"}),n.jsx("input",{type:"text",className:"bg-transparent outline-none w-full text-sm",placeholder:"Search...",value:d,onChange:j=>f(j.target.value),autoFocus:!0})]})}),n.jsx("div",{className:"overflow-y-auto flex-1",children:x.length>0?x.map(j=>{const w=a.includes(j.value);return n.jsxs("div",{onClick:()=>y(j.value),className:`px-4 py-2 text-sm cursor-pointer flex items-center justify-between hover:bg-gray-50 
                      ${w?"bg-indigo-50 text-indigo-700":"text-gray-700"}`,children:[n.jsx("span",{children:j.label}),w&&n.jsx(bL,{className:"text-indigo-600"})]},j.value)}):n.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:"No results found"})})]})]})}function zc(){h.useEffect(()=>{document.title="Territory | Sari-Sari CRM"},[]);const e=jt(),{id:t}=Ho(),[a,s]=h.useState(""),[r,i]=h.useState(""),[o,l]=h.useState(""),[c,u]=h.useState(null),[d,f]=h.useState(!1),[p,x]=h.useState([]),[y,N]=h.useState(!1),[v,j]=h.useState([]),[w,S]=h.useState(xA),[_,E]=h.useState(!1),[T,A]=h.useState(!1),[L,M]=h.useState(null),[F,$]=h.useState(null),[D,q]=h.useState("board"),[G,U]=h.useState(null),[V,Z]=h.useState(!1),[Y,le]=h.useState(null),[_e,te]=h.useState(1),[ae,ye]=h.useState(10),[Ne,he]=h.useState([]),ve=h.useRef(!1),{userRole:ne}=Ks(),Se=h.useMemo(()=>{const ce=new Map;return p.forEach(oe=>{const De=`${oe.name}-${oe.manager_id||"no-manager"}`;if(!ce.has(De))ce.set(De,{...oe,assigned_users_list:oe.assigned_to?[oe.assigned_to]:[]});else{const $e=ce.get(De);oe.assigned_to&&($e.assigned_users_list.some(Xe=>Xe.id===oe.assigned_to.id)||$e.assigned_users_list.push(oe.assigned_to))}}),Array.from(ce.values())},[p]),de=h.useMemo(()=>{const ce=a.trim().toLowerCase(),oe=r.trim().toLowerCase(),De=o.trim();return[...Se].sort((Xe,Ze)=>{const mt=Xe?.created_at?new Date(Xe.created_at):0;return(Ze?.created_at?new Date(Ze.created_at):0)-mt}).filter(Xe=>{const Ze=Xe.name?.toLowerCase()||"",mt=Xe.description?.toLowerCase()||"",nt=Xe.managed_by?`${Xe.managed_by.first_name} ${Xe.managed_by.last_name}`.toLowerCase():"",Nt=Xe.status?.toString().toLowerCase()||"",wt=Xe.assigned_users_list.map(Fe=>`${Fe.first_name} ${Fe.last_name}`.toLowerCase()).join(" "),Re=ce===""||[Ze,mt,nt,Nt,wt].some(Fe=>Fe&&Fe.includes(ce)),me=oe===""||Nt===oe,ie=De===""||String(Xe.managed_by?.id||"")===De||Xe.assigned_users_list.some(Fe=>String(Fe.id)===De);return Re&&me&&ie})},[Se,a,r,o]);h.useEffect(()=>{if(ve.current){ve.current=!1;return}if(t&&Se.length>0&&!_&&!d&&!T){const ce=Se.find(oe=>oe.id===parseInt(t));ce&&u(ce)}!t&&!_&&!d&&u(null)},[t,Se,_,d,T]),h.useEffect(()=>{te(1)},[a,r,o]),h.useEffect(()=>{te(ce=>{const oe=Math.max(1,Math.ceil(de.length/ae)||1);return ce>oe?oe:ce})},[de.length,ae]);const ke=async()=>{try{const ce=await se.get("/users/read/territory");j(ce.data)}catch(ce){console.error("Error fetching users:",ce)}},Te=async()=>{N(!0);try{const ce=await se.get("/territories/fetch"),oe=Array.isArray(ce.data)?ce.data:[];x(oe),console.log(ce.data)}catch(ce){console.error("Error fetching territories:",ce)}finally{N(!1)}};h.useEffect(()=>{ke(),Te()},[]);const pe=ce=>{const{name:oe,value:De}=ce.target;S($e=>({...$e,[oe]:De}))},ze=ce=>{S(oe=>({...oe,user_ids:ce}))},Pe=()=>{S(xA),E(!1),M(null),f(!0)},We=(ce=!0)=>{f(!1),E(!1),M(null),S(xA)},tt=ce=>{if(!ce)return;const oe=ce.assigned_users_list?ce.assigned_users_list.map(De=>String(De.id)):[];S({name:ce.name||"",description:ce.description||"",manager_id:ce.managed_by?String(ce.managed_by.id):"",user_ids:oe,company_id:ce.company_id?String(ce.company_id):""}),E(!0),M(ce.id),u(null),f(!0)},[lt,Ie]=h.useState(!1),rt=ce=>{ce.preventDefault(),Ie(!0);const oe=w.name.trim();if(!oe){W.error("Territory name is required.");return}if(!w.manager_id){W.error("Territory manager is required.");return}if(w.user_ids.length===0){W.error("Please assign at least one user.");return}let De=w.company_id?Number(w.company_id):null;if(!De&&w.user_ids.length>0){const Ze=w.user_ids[0],mt=v.find(nt=>String(nt.id)===String(Ze));mt&&mt.company&&(De=mt.company.id)}const $e={name:oe,description:w.description?.trim()||"",manager_id:w.manager_id?Number(w.manager_id):null,user_ids:w.user_ids.map(Ze=>Number(Ze)),company_id:De},Xe=_&&L?"update":"create";U({title:Xe==="create"?"Confirm New Territory":"Confirm Update",message:n.jsxs("span",{children:[Xe==="create"?"Create":"Update"," territory ",n.jsx("span",{className:"font-semibold",children:oe})," with ",$e.user_ids.length," assigned users?"]}),confirmLabel:Xe==="create"?"Create":"Update",cancelLabel:"Cancel",variant:"primary",action:{type:Xe,payload:$e,targetId:L,name:oe}})},He=ce=>{ce&&U({title:"Delete Territory Group",message:n.jsxs("span",{children:["Are you sure you want to delete ",n.jsx("span",{className:"font-semibold",children:ce.name}),"?",n.jsx("br",{}),n.jsxs("span",{className:"text-xs text-red-500",children:["This will remove assignments for all ",ce.assigned_users_list.length," users in this group."]})]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:ce.id,name:ce.name}})},Ke=async()=>{Ne.length!==0&&U({title:"Delete Territories",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:Ne.length})," selected territories? This action cannot be undone."]}),confirmLabel:`Delete ${Ne.length} Territory(ies)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",territory_ids:Ne}})},Je=ce=>{if(ce.target.checked){const oe=ue.map(De=>De.id);he(oe)}else he([])},Oe=ce=>{he(oe=>oe.includes(ce)?oe.filter(De=>De!==ce):[...oe,ce])},Ce=async()=>{if(!G?.action){U(null);return}const{action:ce}=G,{type:oe,payload:De,targetId:$e,name:Xe}=ce;Z(!0);try{oe==="create"?(A(!0),await se.post("/territories/assign",De),W.success(`Territory "${Xe}" created.`),await Te(),await ke(),We(!1)):oe==="update"?(A(!0),await se.put(`/territories/${$e}`,De),W.success(`Territory "${Xe}" updated.`),ve.current=!0,We(!1),u(null),t&&e("/admin/territory"),await Te(),await ke()):oe==="delete"?(le($e),await se.delete(`/territories/${$e}`),W.success(`Territory "${Xe}" deleted.`),await Te(),c?.id===$e&&u(null)):oe==="bulk-delete"&&(await se.delete("/territories/admin/bulk-delete",{data:{territory_ids:ce.territory_ids}}),W.success(`Successfully deleted ${ce.territory_ids.length} territories`),he([]),await Te())}catch(Ze){console.error(Ze),W.error("An error occurred.")}finally{A(!1),Ie(!1),le(null),Z(!1),U(null)}},fe=()=>{V||U(null)},ue=h.useMemo(()=>{if(D==="board")return de;const ce=(_e-1)*ae;return de.slice(ce,ce+ae)},[de,_e,ae,D]),H=de.length>0,K=()=>te(ce=>Math.max(ce-1,1)),we=()=>te(ce=>Math.min(ce+1,Math.ceil(de.length/ae)||1)),Me=ce=>!ce||ce.length===0?"Unassigned":ce.length===1?`${ce[0].first_name} ${ce[0].last_name}`:`${ce[0].first_name} ${ce[0].last_name} +${ce.length-1} more`;return n.jsx(n.Fragment,{children:n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[y&&n.jsx(Wt,{message:"Loading territories..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-0 mb-7",children:[n.jsxs("h2",{className:"flex items-center text-2xl font-semibold text-gray-800",children:[n.jsx(Zl,{className:"mr-2 text-blue-600"})," Territory"]}),n.jsx("div",{className:"flex justify-center lg:justify-end md:justify-end w-full",children:["ceo","admin","group manager","group_manager"].includes(ne.toLowerCase())&&(Array.isArray(v)&&v.length>0?n.jsxs("button",{onClick:Pe,className:"flex items-center bg-black text-white px-3 py-2 rounded-md hover:bg-gray-800 text-sm",children:[n.jsx(xn,{})," Create Territory"]}):n.jsxs("div",{className:"text-xs bg-red-50 p-2 rounded-lg ring ring-red-300 text-red-700 flex items-center gap-1",children:[n.jsx(yze,{})," Add users to assign territories"]}))})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mt-6 mb-4 flex flex-col md:flex-row items-center gap-2",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full md:w-4/4",children:[n.jsx(Vt,{className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search territory",className:"focus:outline-none w-full",value:a,onChange:ce=>s(ce.target.value)})]}),ne.toLowerCase()!=="sales"&&n.jsx("div",{className:"flex flex-col md:flex-row gap-2 w-full md:w-1/2",children:n.jsxs("select",{className:"border border-gray-300 rounded-lg px-3 h-11 w-full text-sm",value:o,onChange:ce=>l(ce.target.value),children:[n.jsx("option",{value:"",children:"Filter by Users"}),v.map(ce=>n.jsxs("option",{value:String(ce.id),children:[ce.first_name," ",ce.last_name]},ce.id))]})})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("button",{onClick:()=>q("board"),className:`px-4 py-2 rounded-full text-sm ${D==="board"?"bg-gray-800 text-white":"bg-gray-100"}`,children:"Board View"}),n.jsx("button",{onClick:()=>q("list"),className:`px-4 py-2 rounded-full text-sm ${D==="list"?"bg-gray-800 text-white":"bg-gray-100"}`,children:"List View"})]}),D==="board"&&n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:H?ue.map(ce=>n.jsxs("div",{onClick:()=>{u(ce);let oe;ne.toLowerCase()==="ceo"||ne.toLowerCase()==="admin"?oe="admin":ne.toLowerCase()==="group manager"||ne.toLowerCase()==="group_manager"?oe="group-manager":ne.toLowerCase()==="manager"?oe="manager":oe="sales",e(`/${oe}/territory/${ce.id}`)},className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative cursor-pointer hover:shadow-md transition",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),n.jsx("h3",{className:"font-medium text-gray-900 mb-2 pt-7",children:ce.name}),ce.description&&n.jsx("p",{className:"text-xs text-gray-600 mb-2 line-clamp-2",children:ce.description}),n.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-2",children:[n.jsx(nn,{})," ",Me(ce.assigned_users_list)]}),n.jsx("div",{className:"h-px bg-gray-200 w-full mb-2"}),n.jsx("div",{className:"text-gray-400 text-xs text-right",children:ce.created_at?new Date(ce.created_at).toLocaleDateString():""})]},ce.id)):n.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No territories found."})}),D==="list"&&n.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:n.jsxs("tr",{children:[!["sales","manager"].includes(ne.toLowerCase())&&n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:ue.length>0&&ue.every(ce=>Ne.includes(ce.id)),onChange:Je})}),n.jsx("th",{className:"py-3 px-4",children:"Territory"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Manager"}),!["sales","manager"].includes(ne.toLowerCase())&&n.jsx("th",{className:"py-3 px-4 text-center w-24",children:Ne.length>0?n.jsx("button",{onClick:Ke,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${Ne.length} selected territories`,children:n.jsx(vn,{size:18})}):""})]})}),n.jsx("tbody",{children:H?ue.map(ce=>n.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",children:[!["sales","manager"].includes(ne.toLowerCase())&&n.jsx("td",{className:"py-3 px-4",onClick:oe=>oe.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:Ne.includes(ce.id),onChange:()=>Oe(ce.id)})}),n.jsx("td",{className:"py-3 px-4 font-medium",onClick:()=>{u(ce);let oe;ne.toLowerCase()==="ceo"||ne.toLowerCase()==="admin"?oe="admin":ne.toLowerCase()==="group manager"||ne.toLowerCase()==="group_manager"?oe="group-manager":ne.toLowerCase()==="manager"?oe="manager":oe="sales",e(`/${oe}/territory/${ce.id}`)},children:ce.name}),n.jsx("td",{className:"py-3 px-4",children:Me(ce.assigned_users_list)}),n.jsx("td",{className:"py-3 px-4",children:ce.managed_by?`${ce.managed_by.first_name}`:""}),n.jsx("td",{})]},ce.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No territories found."})})})]})}),c&&n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-xl p-8 relative",children:[n.jsx("button",{className:"absolute top-2 right-4 text-gray-500 hover:text-black",onClick:()=>{u(null);let ce;ne.toLowerCase()==="ceo"||ne.toLowerCase()==="admin"?ce="admin":ne.toLowerCase()==="group manager"||ne.toLowerCase()==="group_manager"?ce="group-manager":ne.toLowerCase()==="manager"?ce="manager":ce="sales",e(`/${ce}/territory`)},children:n.jsx(Xt,{size:24})}),n.jsx("h2",{className:"text-3xl font-semibold mb-1",children:c.name}),n.jsx("div",{className:"h-px bg-gray-200 w-full mb-4"}),n.jsx("p",{className:"text-gray-500 mb-1",children:"Description"}),n.jsx("p",{className:"text-gray-700 text-sm mb-6",children:c.description||""}),n.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6 text-sm",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500",children:"Manager"}),n.jsx("div",{className:"font-medium",children:c.managed_by?`${c.managed_by.first_name} ${c.managed_by.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500",children:"Assigned To"}),n.jsx("div",{className:"flex flex-col gap-1 mt-1 max-h-32 overflow-y-auto",children:c.assigned_users_list&&c.assigned_users_list.length>0?c.assigned_users_list.map(ce=>n.jsxs("div",{className:"flex items-center gap-2 text-gray-800 font-medium",children:[n.jsx(nn,{})," ",ce.first_name," ",ce.last_name]},ce.id)):"Unassigned"})]})]}),!["sales","manager"].includes(ne.toLowerCase())&&n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsxs("button",{onClick:()=>tt(c),className:"bg-blue-500 text-white px-4 py-2 rounded flex items-center gap-2",children:[n.jsx(ha,{})," Edit"]}),n.jsxs("button",{onClick:()=>He(c),className:"bg-red-500 text-white px-4 py-2 rounded flex items-center gap-2",children:[n.jsx(vn,{})," Delete"]})]})]})}),d&&n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-lg w-full max-w-xl p-6 relative",children:[n.jsxs("button",{className:"absolute top-4 right-4",onClick:()=>{We(),Ie(!1)},children:[n.jsx(Xt,{size:22})," "]}),n.jsx("h2",{className:"text-xl font-semibold text-center mb-6",children:_?"Edit Territory":"Create Territory"}),n.jsxs("form",{className:"space-y-4",onSubmit:rt,noValidate:!0,children:[n.jsx(vze,{label:"Territory Name",name:"name",value:w.name,onChange:pe,required:!0,isSubmitted:lt}),n.jsx(wze,{label:"Territory Manager",name:"manager_id",value:w.manager_id,onChange:pe,options:[{value:"",label:"Assign Manager"},...v.map(ce=>({value:String(ce.id),label:`${ce.first_name} ${ce.last_name}`}))],required:!0,isSubmitted:lt}),n.jsx(bze,{label:n.jsxs(n.Fragment,{children:["Assign Users ",n.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),placeholder:"Search and select users...",options:v.map(ce=>({value:String(ce.id),label:`${ce.first_name} ${ce.last_name}`})),selectedValues:w.user_ids,onChange:ze,required:!0,isSubmitted:lt}),n.jsx(Nze,{label:"Description",name:"description",value:w.description,onChange:pe}),n.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[n.jsx("button",{type:"button",onClick:()=>{We(),Ie(!1)},className:"px-4 py-2 bg-red-400 text-white rounded",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:T,className:"px-4 py-2 bg-tertiary text-white rounded",children:T?"Saving...":"Save Territory"})]})]})]})}),D==="list"&&n.jsx(rn,{className:"mt-4",totalItems:de.length,pageSize:ae,currentPage:_e,onPrev:K,onNext:we,onPageSizeChange:ce=>{ye(ce),te(1)},label:"territories"}),G&&n.jsx(jze,{open:!0,title:G.title,message:G.message,confirmLabel:G.confirmLabel,cancelLabel:G.cancelLabel,variant:G.variant,onConfirm:Ce,onCancel:fe,loading:V})]})})}function vze({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:u=""}){const d=c&&o&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100 ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
${u}
`})]})}function wze({label:e,name:t,value:a,onChange:s,options:r,disabled:i=!1,required:o=!1,isSubmitted:l=!1}){const c=l&&o&&!a;return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("select",{name:t,value:a??"",onChange:s,disabled:i,className:`w-full border rounded-md px-3 py-2 text-sm bg-white focus:ring-2 outline-none disabled:bg-gray-100 ${c?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-gray-400"}`,children:r.map(u=>n.jsx("option",{value:u.value,children:u.label},u.value))})]})}function Nze({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-gray-400 outline-none disabled:bg-gray-100"})]})}function jze({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}const Cze=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"},{value:"INACTIVE",label:"INACTIVE"}],Sze=e=>e?String(e).toUpperCase():"",ou=e=>{const t=Sze(e);return t==="PLANNED"||t==="PENDING"?"PLANNED":t==="HELD"||t==="COMPLETED"?"HELD":t==="NOT HELD"||t==="NOT_HELD"||t==="CANCELLED"?"NOT_HELD":t==="INACTIVE"?"INACTIVE":"PLANNED"},yA=e=>{const t=ou(e);return t==="PLANNED"?"PLANNED":t==="HELD"?"HELD":t==="NOT_HELD"?"NOT HELD":t==="INACTIVE"?"INACTIVE":"--"},s8=e=>{switch(ou(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";case"INACTIVE":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},r8=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function i8(){const[e,t]=h.useState(!1),[a,s]=h.useState(null),[r,i]=h.useState(null),[o,l]=h.useState(null),[c,u]=h.useState(null),[d,f]=h.useState([]),[p,x]=h.useState(null),[y,N]=h.useState(!1),[v,j]=h.useState(null),[w,S]=h.useState(!1),[_,E]=h.useState(!1),[T,A]=h.useState("PLANNED"),[L,M]=h.useState(!1),[F,$]=h.useState(!1),[D,q]=h.useState(10),[G,U]=h.useState(1),[V,Z]=h.useState([]),[Y,le]=h.useState(null),{comments:_e,addComment:te,refresh:ae}=ka({relatedType:"call",relatedId:a?.id});h.useEffect(()=>{a?.id&&ae()},[a?.id,ae]),Us();const ye=jt(),Ne=Jt(),he=ie=>{if(!ie)return"";const Fe=String(ie).split("-");return Fe.length===3?`${Fe[0]}-${Fe[2]}`:String(ie)},ne={subject:"",call_time:(()=>{const ie=new Date,Fe=ie.getFullYear(),Le=String(ie.getMonth()+1).padStart(2,"0"),be=String(ie.getDate()).padStart(2,"0");return`${Fe}-${Le}-${be}T08:00`})(),duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[Se,de]=h.useState(ne);h.useEffect(()=>{const ie=Ne.state,Fe=ie?.callID;if(Fe&&!ie?.openCallModal){le(Fe),ye(Ne.pathname,{replace:!0,state:{}});return}!ie?.openCallModal||!ie?.initialCallData||ie.initialCallData.relatedType1==="Lead"&&Array.isArray(o)&&o.length===0||ie.initialCallData.relatedType1==="Account"&&(!Array.isArray(o)||o.length===0)||(t(!0),de(Le=>({...Le,...ie.initialCallData,relatedTo1:ie.initialCallData.relatedTo1?String(ie.initialCallData.relatedTo1):"",relatedTo2:ie.initialCallData.relatedTo2?String(ie.initialCallData.relatedTo2):""})),ye(Ne.pathname,{replace:!0,state:{}}))},[Ne.state,o]),h.useEffect(()=>{if(Y&&d.length>0&&!F){const ie=d.find(Fe=>Fe.id===Y);ie?s(ie):W.error("Call not found."),le(null)}},[Y,d,F]);const ke=async()=>{try{$(!0);const ie=await se.get("/calls/admin/fetch-all"),Le=[...Array.isArray(ie.data)?ie.data:[]].sort((be,ee)=>{const O=be?.created_at?new Date(be.created_at):0;return(ee?.created_at?new Date(ee.created_at):0)-O});f(Le)}catch(ie){console.error("Error fetching calls:",ie),W.error("Failed to load calls")}finally{$(!1)}},Te=async()=>{try{const ie=await se.get("/users/all");x(ie.data)}catch(ie){console.error("Error fetching users: ",ie)}};h.useEffect(()=>{Te(),ke()},[]);const[pe,ze]=h.useState(""),[Pe,We]=h.useState("Filter by Status"),[tt,lt]=h.useState("Filter by Users");h.useEffect(()=>{U(1)},[pe,Pe,tt,D]);const Ie=h.useMemo(()=>d.filter(ie=>{const Fe=!pe||[ie.subject,ie.notes,ie.lead?.title,ie.account?.name,ie.contact?.first_name,ie.contact?.last_name,ie.deal?.name].some(O=>O&&String(O).toLowerCase().includes(pe.toLowerCase())),Le=Pe==="Filter by Status"||ou(ie.status)===Pe,be=ie.call_assign_to?`${ie.call_assign_to.first_name} ${ie.call_assign_to.last_name}`:"";return Fe&&Le&&(tt==="Filter by Users"||be===tt)}),[d,pe,Pe,tt]),rt=h.useMemo(()=>{const ie=(G-1)*D;return Ie.slice(ie,ie+D)},[Ie,G,D]),He=Array.isArray(p)?p.map(ie=>({id:ie.id,name:`${ie.first_name} ${ie.last_name}`})):[],Ke=()=>U(ie=>Math.max(1,ie-1)),Je=()=>U(ie=>Math.min(ie+1,Math.ceil(Ie.length/D)||1)),Oe=ie=>{if(ie.target.checked){const Fe=rt.map(Le=>Le.id);Z(Fe)}else Z([])},Ce=ie=>{Z(Fe=>Fe.includes(ie)?Fe.filter(Le=>Le!==ie):[...Fe,ie])},fe=d.length,ue=d.filter(ie=>ou(ie.status)==="PLANNED").length,H=d.filter(ie=>ou(ie.status)==="HELD").length,K=d.filter(ie=>ou(ie.status)==="NOT_HELD").length,we=[{title:"Total",value:fe,icon:zs,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:ue,icon:Vs,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:H,icon:aa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:K,icon:Fs,color:"text-gray-600",bgColor:"bg-gray-100"}],[Me,ce]=h.useState("Overview"),oe=ie=>{const{name:Fe,value:Le}=ie.target;de(be=>{const ee={...be,[Fe]:Le};return Fe==="relatedType1"&&(ee.relatedTo1="",Le==="Lead"?(ee.relatedType2=null,ee.relatedTo2=null,u([])):Le==="Account"&&(ee.relatedType2="Contact")),Fe==="relatedType2"&&(ee.relatedTo2=""),ee})};h.useEffect(()=>{const ie=async()=>{try{l([]);let Fe;Se.relatedType1==="Lead"?Fe=await se.get("/leads/admin/getLeads"):Se.relatedType1==="Account"&&(Fe=await se.get("/accounts/admin/fetch-all")),Fe&&Array.isArray(Fe.data)?l(Fe.data):l([])}catch(Fe){console.error("Error fetching data:",Fe),l([])}};Se.relatedType1&&ie()},[Se.relatedType1]),h.useEffect(()=>{const ie=async()=>{try{u([]);let Fe;if(Se.relatedType1==="Account"&&Se.relatedTo1)Se.relatedType2==="Contact"?Fe=await se.get(`/contacts/from-acc/${Se.relatedTo1}`):Se.relatedType2==="Deal"?Fe=await se.get(`/deals/from-acc/${Se.relatedTo1}`):Se.relatedType2==="Quote"&&(Fe=await se.get(`/quotes/from-acc/${Se.relatedTo1}`));else{u([]);return}Fe&&Array.isArray(Fe.data)?u(Fe.data):u([])}catch(Fe){console.error("Error fetching data:",Fe),u([])}};Se.relatedType2&&ie()},[Se.relatedType2,Se.relatedTo1,Se.relatedType1]);const[De,$e]=h.useState(!1),Xe=ie=>{ie.preventDefault(),$e(!0);const Fe=Se.subject;if(!Fe||Fe.trim()===""){W.error("Subject is required.");return}if(!Se.relatedTo1){W.error(`Please select a ${Se.relatedType1||"Lead/Account"}.`);return}if(!Se.assigned_to){W.error("Subject is required.");return}const be={...Se,duration_minutes:Se.duration_minutes?parseInt(Se.duration_minutes,10):null,relatedTo1:Se.relatedTo1?parseInt(Se.relatedTo1,10):null,relatedTo2:Se.relatedType1==="Lead"?null:Se.relatedTo2?parseInt(Se.relatedTo2,10):null,relatedType2:Se.relatedType1==="Lead"?null:Se.relatedType2,assigned_to:Se.assigned_to?parseInt(Se.assigned_to,10):null},ee=y&&v?"update":"create",O=(Se.subject||"").trim()||"Untitled Call";i({title:ee==="create"?"Confirm New Call":"Confirm Update",message:ee==="create"?`Create "${O}"?`:`Save changes to "${O}"?`,confirmLabel:ee==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:ee,payload:be,targetId:v||null,name:O}})},Ze=ie=>s(ie),mt=()=>{t(!1),N(!1),j(null)},nt=async()=>{V.length!==0&&i({title:"Delete Calls",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:V.length})," selected calls? This action cannot be undone."]}),confirmLabel:`Delete ${V.length} Call(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",call_ids:V}})},Nt=async()=>{if(!r?.action){i(null);return}const{action:ie}=r,{type:Fe,payload:Le,targetId:be,name:ee}=ie;E(!0);try{if(Fe==="create")S(!0),await se.post("/calls/create",Le),W.success(`Call "${ee}" created successfully.`),t(!1),de(ne),N(!1),j(null),await ke();else if(Fe==="update"){if(!be)throw new Error("Missing call identifier for update.");S(!0),await se.put(`/calls/${be}`,Le),W.success(`Call "${ee}" updated successfully.`),t(!1),de(ne),N(!1),j(null),await ke()}else if(Fe==="delete"){if(!be)throw new Error("Missing call identifier for deletion.");await se.delete(`/calls/${be}`),W.success(`Call "${ee}" deleted successfully.`),a?.id===be&&s(null),await ke()}else Fe==="bulk-delete"&&(await se.delete("/calls/admin/bulk-delete",{data:{call_ids:V}}),W.success(`Successfully deleted ${V.length} calls`),Z([]),await ke())}catch(O){const z=Fe==="create"?"Failed to create call. Please review the details and try again.":Fe==="update"?"Failed to update call. Please review the details and try again.":"Failed to delete call. Please try again.",I=O?.response?.data?.detail||z;W.error(I)}finally{(Fe==="create"||Fe==="update")&&S(!1),E(!1),i(null)}},wt=()=>{_||i(null)},Tt=async()=>{if(a?.id)try{M(!0),await se.put(`/calls/${a.id}`,{status:T}),W.success(`Status updated to ${yA(T)}`),f(ie=>Array.isArray(ie)?ie.map(Fe=>Fe.id===a.id?{...Fe,status:T}:Fe):ie),s(null)}catch(ie){const Fe=ie.response?.data?.detail||"Failed to update status.";W.error(Fe)}finally{M(!1)}};h.useEffect(()=>{a&&A(ou(a.status))},[a]);const Re=a?n.jsxs("div",{id:"callModalBackdrop",onClick:ie=>ie.target.id==="callModalBackdrop"&&s(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[F&&n.jsx(Wt,{message:"Loading call details..."}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),n.jsx("button",{onClick:()=>s(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:n.jsx(Xn,{size:25})})]}),n.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:a.subject}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${s8(a.status)}`,children:yA(a.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const ie=O=>{if(!O)return"";const z=new Date(O),I=z.getFullYear(),Q=String(z.getMonth()+1).padStart(2,"0"),ge=String(z.getDate()).padStart(2,"0"),re=String(z.getHours()).padStart(2,"0"),Ee=String(z.getMinutes()).padStart(2,"0");return`${I}-${Q}-${ge}T${re}:${Ee}`},Fe=a.lead?"Lead":a.account?"Account":"Lead",Le=a.lead?a.lead.id:a.account?a.account.id:null,be=Fe==="Lead"?null:a.contact?"Contact":a.deal?"Deal":a.quote?"Quote":"Contact",ee=Fe==="Lead"?null:a.contact?a.contact.id:a.deal?a.deal.id:a.quote?a.quote.id:null;de({subject:a.subject||"",call_time:ie(a.call_time),duration_minutes:a.duration_minutes?String(a.duration_minutes):"",direction:a.direction||"Outgoing",status:a.status||"Planned",notes:a.notes||"",relatedType1:Fe,relatedType2:be,relatedTo1:Le?String(Le):"",relatedTo2:ee?String(ee):"",assigned_to:a.call_assign_to?.id?String(a.call_assign_to.id):""}),N(!0),j(a.id),s(null),t(!0)},children:[n.jsx(ga,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>{const ie=a.subject||"this call";i({title:"Delete Call",message:`Are you sure you want to permanently delete "${ie}"? This action cannot be undone.`,confirmLabel:"Delete Call",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:a.id,name:ie}})},children:[n.jsx(vn,{className:"mr-2"}),"Delete"]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(ie=>n.jsx("button",{onClick:()=>ce(ie),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${Me===ie?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:ie},ie))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[Me==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsx(co,{label:"Call Time",value:r8(a.call_time)}),n.jsx(co,{label:"Duration",value:a.duration_minutes?`${a.duration_minutes} min`:null}),n.jsx(co,{label:"Direction",value:a.direction||"--"}),n.jsx(co,{label:"Assigned To",value:`${a.call_assign_to.first_name} ${a.call_assign_to.last_name}`}),a.lead&&n.jsx(co,{label:"Lead",value:a.lead.title}),a.account&&n.jsx(co,{label:"Account",value:a.account.name}),a.contact&&n.jsx(co,{label:"Contact",value:`${a.contact.first_name} ${a.contact.last_name}`}),a.deal&&n.jsx(co,{label:"Deal",value:a.deal.name}),a.quote&&n.jsx(co,{label:"Quote",value:he(a.quote.quote_id)}),n.jsx(co,{label:"Created At",value:r8(a.created_at)})]})}),Me==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Call Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:a.notes||"No notes available."})]}),n.jsx(Ta,{comments:_e,onAddComment:te})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:T,onChange:ie=>A(ie.target.value),children:[n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),n.jsx("button",{onClick:Tt,disabled:L,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:L?"Updating...":"Update"})]})]})]})]})]}):null,me=e?n.jsx("div",{id:"modalBackdrop",onClick:ie=>ie.target.id==="modalBackdrop"&&mt(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[n.jsx("button",{onClick:()=>{mt(),$e(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:y?"Edit Call":"Add New Call"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:Xe,noValidate:!0,children:[n.jsx(Aze,{label:"Subject",className:"md:col-span-2",name:"subject",value:Se.subject,onChange:oe,isSubmitted:De,required:!0}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("div",{className:"relative w-25",children:[n.jsxs("select",{name:"relatedType1",onChange:oe,value:Se.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:w||y,children:[n.jsx("option",{value:"Lead",children:"Lead"}),n.jsx("option",{value:"Account",children:"Account"})]}),n.jsx("span",{className:"absolute left-10 md:pl-6 pl-6 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),n.jsx(bA,{items:Array.isArray(o)?o:[],value:Se.relatedTo1??"",placeholder:`Search ${Se.relatedType1||"here"}...`,getLabel:ie=>Se.relatedType1==="Lead"?ie.title:ie.name??"",onChange:ie=>de(Fe=>({...Fe,relatedTo1:ie})),required:!0,isSubmitted:De,disabled:w||y})]}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("select",{name:"relatedType2",onChange:oe,value:Se.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:Se.relatedType1==="Lead"||w||y,children:[n.jsx("option",{value:"Contact",children:"Contact"}),n.jsx("option",{value:"Deal",children:"Deal"}),n.jsx("option",{value:"Quote",children:"Quote"})]}),n.jsx(bA,{disabled:Se.relatedType1==="Lead"||w||y,items:Array.isArray(c)?c:[],value:Se.relatedTo2??"",placeholder:Se.relatedType1==="Lead"?"":Array.isArray(c)&&c.length>0?`Search ${Se.relatedType2||"Contact"}...`:`No ${Se.relatedType2||""} data found`,getLabel:ie=>Se.relatedType2==="Contact"?`${ie.first_name??""} ${ie.last_name??""}`.trim():Se.relatedType2==="Quote"?he(ie.quote_id)??"":ie.name??"",onChange:ie=>de(Fe=>({...Fe,relatedTo2:ie}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),n.jsx("input",{type:"datetime-local",value:Se.call_time,onChange:oe,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),n.jsxs("div",{className:"w-full",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),n.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[n.jsx("input",{type:"tel",value:Se.duration_minutes,onChange:oe,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),n.jsx("p",{children:"minutes"})]})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[" ","Assign To ",n.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),n.jsx(bA,{items:Array.isArray(p)?p:[],value:Se.assigned_to??"",placeholder:"Search an account...",getLabel:ie=>`${ie.first_name} ${ie.last_name}`,onChange:ie=>de(Fe=>({...Fe,assigned_to:ie})),required:!0,isSubmitted:De})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),n.jsxs("select",{name:"direction",onChange:oe,value:Se.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Incoming",children:"Incoming"}),n.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),n.jsxs("select",{name:"status",onChange:oe,value:Se.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Planned",children:"Planned"}),n.jsx("option",{value:"Held",children:"Held"}),n.jsx("option",{value:"Not held",children:"Not held"})]})]}),n.jsx(Tze,{className:"col-span-2",label:"Notes",value:Se.notes,onChange:oe,name:"notes"}),n.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{mt(),$e(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:w,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:w?"Saving...":y?"Update Call":"Save Call"})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(zs,{className:"mr-2 text-blue-600"})," Calls"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto gap-2",children:n.jsxs("button",{onClick:()=>{de(ne),N(!1),j(null),t(!0),$e(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(xn,{className:"mr-2"})," Add Call"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:we.map(ie=>n.jsx(_ze,{...ie},ie.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[n.jsx(Vt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",value:pe,onChange:ie=>ze(ie.target.value)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{value:Pe,onChange:ie=>We(ie.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),Cze.map(ie=>n.jsx("option",{value:ie.value,children:ie.label},ie.value))]}),n.jsxs("select",{value:tt,onChange:ie=>lt(ie.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),He.map(ie=>n.jsx("option",{value:ie.name,children:ie.name},ie.id))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:rt.length>0&&V.length===rt.length,onChange:Oe,className:"cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Call Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:V.length>0?n.jsx("button",{onClick:nt,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${V.length} selected calls`,children:n.jsx(vn,{size:18})}):""})]})}),n.jsx("tbody",{children:F?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"py-10",children:n.jsx(Wt,{message:"Loading calls..."})})}):rt.length>0?rt.map(ie=>n.jsxs("tr",{onClick:()=>Ze(ie),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:Fe=>Fe.stopPropagation(),children:n.jsx("input",{type:"checkbox",checked:V.includes(ie.id),onChange:()=>Ce(ie.id),className:"cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:ie.subject||"--"}),n.jsxs("td",{className:"py-3 px-4",children:[ie.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ie.lead.title}),ie.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ie.account.name}),ie.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[ie.contact.first_name," ",ie.contact.last_name]}),ie.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ie.deal.name}),ie.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:he(ie.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:ie.call_time?new Date(ie.call_time).toLocaleString():"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:ie?.call_assign_to?`${ie.call_assign_to.first_name} ${ie.call_assign_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s8(ie.status)}`,children:yA(ie.status)})}),n.jsx("td",{className:"py-3 px-4"})]},ie.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),n.jsx(rn,{totalItems:Ie.length,pageSize:D,currentPage:G,onPrev:Ke,onNext:Je,onPageSizeChange:ie=>{q(ie),U(1)},pageSizeOptions:[10,20,30,40,50],label:"calls"})]}),Re,me,r&&n.jsx(kze,{open:!0,title:r.title,message:r.message,confirmLabel:r.confirmLabel,cancelLabel:r.cancelLabel,variant:r.variant,onConfirm:Nt,onCancel:wt,loading:_})]})}function _ze({icon:e,title:t,value:a,color:s,bgColor:r}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:22})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function Aze({label:e,name:t,value:a,onChange:s,placeholder:r="",type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:u=""}){const d=c&&o&&!a;return n.jsxs("div",{className:u,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100
          ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
        `})]})}function Tze(e){return n.jsxs("div",{className:e.className,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),n.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function co({label:e,value:t}){return n.jsxs("p",{children:[n.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",n.jsx("br",{}),n.jsx("span",{className:"break-words",children:t||"--"})]})}function kze({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function bA({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,required:l=!1,isSubmitted:c=!1}){const[u,d]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),y=e.find(w=>String(w.id)===String(t)),N=y?s(y):"",v=l&&c&&!t,j=h.useMemo(()=>{const w=f.trim().toLowerCase();return(w?e.filter(_=>(s(_)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&d(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{u||p("")},[u]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:u?f:N,placeholder:r,onFocus:()=>!i&&d(!0),onChange:w=>{p(w.target.value),u||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${v?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),u&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:j.length>0?j.map(w=>{const S=String(w.id),_=s(w),E=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${E?"bg-blue-50":""}`,children:_||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const y1=({onClose:e,formData:t,setFormData:a,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,users:o=[]})=>{const c=(()=>{const A=new Date,L=A.getFullYear(),M=String(A.getMonth()+1).padStart(2,"0"),F=String(A.getDate()).padStart(2,"0");return{startTime:`${L}-${M}-${F}T08:00`,endTime:`${L}-${M}-${F}T09:00`}})(),[u,d]=h.useState({subject:"",startTime:c.startTime,endTime:c.endTime,location:"",status:"Planned",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:"Contact",relatedTo2:""}),[f,p]=h.useState([]),[x,y]=h.useState([]);h.useEffect(()=>{t!==void 0&&a&&(!t.startTime||!t.endTime)&&a(A=>({...A,startTime:A.startTime||c.startTime,endTime:A.endTime||c.endTime}))},[]);const N=A=>{if(!A)return"";const L=String(A).split("-");return L.length===3?`${L[0]}-${L[2]}`:String(A)},v=t!==void 0?t:u,j=a||d,{userRole:w}=Ks();h.useEffect(()=>{const A=async()=>{try{p([]);let L;v.relatedType1==="Lead"?L=await se.get("/leads/admin/getLeads"):v.relatedType1==="Account"&&(L=await se.get("/accounts/admin/fetch-all"));let M=[];if(L&&Array.isArray(L.data)&&(M=L.data),s&&v.relatedTo1)try{let F;v.relatedType1==="Lead"?F=await se.get(`/leads/get/${v.relatedTo1}`):v.relatedType1==="Account"&&(F=await se.get(`/accounts/get/${v.relatedTo1}`)),F&&F.data&&(M.some(D=>String(D.id)===String(v.relatedTo1))||(M=[F.data,...M]))}catch(F){console.error("Error fetching specific related item:",F)}p(M)}catch(L){console.error("Error fetching relatedTo1 data:",L),p([])}};v.relatedType1&&A()},[v.relatedType1,w,s,v.relatedTo1]),h.useEffect(()=>{const A=async()=>{try{if(y([]),v.relatedType1==="Account"&&v.relatedTo1){let L;v.relatedType2==="Contact"?L=await se.get(`/contacts/from-acc/${v.relatedTo1}`):v.relatedType2==="Deal"?L=await se.get(`/deals/from-acc/${v.relatedTo1}`):v.relatedType2==="Quote"&&(L=await se.get(`/quotes/from-acc/${v.relatedTo1}`)),L&&Array.isArray(L.data)?y(L.data):y([])}else y([])}catch(L){console.error("Error fetching relatedTo2 data:",L),y([])}};v.relatedType2&&A()},[v.relatedType2,v.relatedTo1,v.relatedType1]);const S=A=>{const{name:L,value:M}=A.target;j(F=>{const $={...F,[L]:M};return L==="relatedType1"&&(F.relatedType1!==M&&($.relatedTo1=""),M==="Lead"?($.relatedType2=null,$.relatedTo2=null,y([])):M==="Account"&&($.relatedType2="Contact",$.relatedTo2="")),L==="relatedType2"&&F.relatedType2!==M&&($.relatedTo2=""),$})},[_,E]=h.useState(!1),T=A=>{if(A.preventDefault(),E(!0),v.status==="--"){W.warn("Please select a valid status.");return}const L=v.subject;if(!L||L.trim()===""){W.error("Subject is required.");return}if(!v.assignedTo){W.error("Assigned To is required.");return}if(!v.relatedTo1){W.error(`Please select a ${v.relatedType1||"Lead/Account"}.`);return}r?r(v):e()};return n.jsx("div",{id:"modalBackdrop",onClick:A=>A.target.id==="modalBackdrop"&&e(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-60 p-2 sm:p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-3 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[n.jsx("button",{onClick:e,className:"absolute top-3 right-3 sm:top-4 sm:right-4 text-gray-500 hover:text-black transition",children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-lg sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 text-center",children:s?"Edit Meeting":"Schedule Meeting"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4 text-sm",onSubmit:T,noValidate:!0,children:[n.jsx(yb,{label:"Subject",name:"subject",value:v.subject,onChange:S,placeholder:"e.g. Meeting with Client",required:!0,isSubmitted:_,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col w-full",children:[n.jsxs("div",{className:"relative w-25",children:[n.jsxs("select",{name:"relatedType1",onChange:S,value:v.relatedType1||"Lead",className:"w-full outline-none cursor-pointer mb-1 rounded text-gray-700 disabled:text-gray-400",disabled:i,children:[n.jsx("option",{value:"Lead",children:"Lead"}),n.jsx("option",{value:"Account",children:"Account"})]}),n.jsx("span",{className:"absolute left-10 md:pl-8 pl-8 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),n.jsx(vA,{items:Array.isArray(f)?f:[],disabled:i,value:v.relatedTo1??"",placeholder:`Search ${v.relatedType1||"here"}...`,getLabel:A=>v.relatedType1==="Lead"?A.title:A.name??"",onChange:A=>j(L=>({...L,relatedTo1:A})),required:!0,isSubmitted:_})]}),n.jsxs("div",{className:"flex flex-col w-full",children:[n.jsx("div",{className:"relative w-25",children:n.jsxs("select",{name:"relatedType2",onChange:S,value:v.relatedType2||"Contact",className:"w-full outline-none cursor-pointer mb-1 rounded text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:i||v.relatedType1==="Lead",children:[n.jsx("option",{value:"Contact",children:"Contact"}),n.jsx("option",{value:"Deal",children:"Deal"}),n.jsx("option",{value:"Quote",children:"Quote"})]})}),n.jsx(vA,{items:Array.isArray(x)?x:[],value:v.relatedTo2??"",placeholder:v.relatedType1==="Lead"?"":x?.length?`Search ${v.relatedType2}...`:`No ${v.relatedType2} data found`,getLabel:A=>v.relatedType2==="Contact"?`${A.first_name??""} ${A.last_name??""}`.trim():v.relatedType2==="Quote"?N(A.quote_id)??"":A.name??"",onChange:A=>j(L=>({...L,relatedTo2:A})),disabled:v.relatedType1==="Lead"})]}),n.jsx(yb,{label:"Location",name:"location",className:"md:col-span-2",value:v.location,onChange:S,disabled:i}),n.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[n.jsx(yb,{label:"Start Time",name:"startTime",type:"datetime-local",value:v.startTime,onChange:S,disabled:i}),n.jsx(yb,{label:"End Time",name:"endTime",type:"datetime-local",value:v.endTime,onChange:S,disabled:i})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),n.jsx(vA,{items:Array.isArray(o)?o:[],value:v.assignedTo??"",placeholder:"Search an account...",getLabel:A=>`${A.first_name} ${A.last_name}`,onChange:A=>j(L=>({...L,assignedTo:A})),disabled:w==="Sales",required:!0,isSubmitted:_})]}),n.jsx(Eze,{label:"Status",name:"status",value:v.status,onChange:S,options:["--","Planned","Held","Not held"].map(A=>({value:A,label:A.replace("_"," ")})),disabled:i}),n.jsx(Lze,{label:"Notes",name:"notes",value:v.notes,onChange:S,rows:3,className:"md:col-span-2",disabled:i}),n.jsxs("div",{className:"md:col-span-2 flex flex-col sm:flex-row justify-end gap-2 mt-4",children:[n.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Meeting":"Save Meeting"})]})]})]})})};function yb({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:u=!1}){const d=u&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 outline-none disabled:bg-gray-100
          ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function Eze({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l="",isSubmitted:c=!1}){const u=c&&i&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",i&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,hasError:u,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(d=>n.jsx("option",{value:d.value,children:d.label},d.value))})]})}function Lze({label:e,name:t,value:a,onChange:s,placeholder:r,required:i=!1,disabled:o=!1,className:l="",rows:c=3}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,required:i,disabled:o,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function vA({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,required:l=!1,isSubmitted:c=!1}){const[u,d]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),y=e.find(w=>String(w.id)===String(t)),N=y?s(y):"",v=l&&c&&!t,j=h.useMemo(()=>{const w=f.trim().toLowerCase();return(w?e.filter(_=>(s(_)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&d(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{u||p("")},[u]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:u?f:N,placeholder:r,onFocus:()=>!i&&d(!0),onChange:w=>{p(w.target.value),u||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${v?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),u&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:j.length>0?j.map(w=>{const S=String(w.id),_=s(w),E=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${E?"bg-blue-50":""}`,children:_||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const bd=({meeting:e,onClose:t,onEdit:a,onDelete:s,onStatusUpdate:r,currentUser:i,isSalesView:o=!1})=>{jt();const[l,c]=h.useState("Overview");h.useEffect(()=>{console.log("AdminMeetingInformation - checking permissions:"),console.log("meeting.created_by:",e?.created_by),console.log("currentUser?.id:",i?.id),console.log("Match:",e?.created_by===i?.id)},[e,i]);const u=_=>{if(!_)return"";const E=String(_).split("-");return E.length===3?`${E[0]}-${E[2]}`:String(_)},d=_=>{const E=(_||"").toUpperCase();return E==="PLANNED"||E==="IN PROGRESS"?"PLANNED":E==="HELD"||E==="DONE"?"HELD":E==="NOT HELD"?"NOT_HELD":"PLANNED"},f=_=>{const E=(_||"").toUpperCase();return E==="PLANNED"?"PLANNED":E==="HELD"?"HELD":E==="NOT HELD"||E==="NOT_HELD"?"NOT HELD":"PENDING"},[p,x]=h.useState(d(e?.status||"PENDING")),[y,N]=h.useState(!1),{comments:v,addComment:j,refresh:w}=ka({relatedType:"meeting",relatedId:e?.id});if(h.useEffect(()=>{e?.id&&w()},[e?.id,w]),!e)return null;const S=_=>{const E=(_||"").toUpperCase(),T=E==="PLANNED"?"PENDING":E==="HELD"?"COMPLETED":E==="NOT_HELD"?"CANCELLED":E;switch(E){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:switch(T){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}}};return n.jsx(n.Fragment,{children:n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Meeting"}),n.jsx("button",{onClick:t,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Xn,{size:25})})]}),n.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:e.subject||"Meeting"}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${S(d(e.status))}`,children:d(e.status||"PENDING").replace("_"," ")})]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:(!["MANAGER","GROUP MANAGER","SALES"].includes(i?.role?.toUpperCase())||e?.created_by===i?.id)&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{type:"button",onClick:()=>{console.log("Edit button clicked"),a&&a(e)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(ha,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",onClick:()=>{console.log("Archive button clicked"),s&&s(e)},className:`inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm text-white transition focus:outline-none ${o?"bg-orange-500 hover:bg-orange-600 focus:ring-2 focus:ring-orange-400":"bg-red-500 hover:bg-red-600 focus:ring-2 focus:ring-red-400"}`,children:[o?n.jsx(Zt,{className:"mr-2"}):n.jsx(vn,{className:"mr-2"}),o?"Archive":"Delete"]})]})})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(_=>n.jsx("button",{onClick:()=>c(_),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${l===_?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:_},_))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[l==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Start Time:"}),n.jsx("p",{children:e.start_time?new Date(e.start_time).toLocaleString():"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"End Time:"}),n.jsx("p",{children:e.end_time?new Date(e.end_time).toLocaleString():"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Meeting Title:"}),n.jsx("p",{children:e.subject||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Location:"}),n.jsx("p",{children:e.location||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsxs("p",{children:[e.meet_assign_to.first_name," ",e.meet_assign_to.last_name]})]}),e.lead&&n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Lead:"}),n.jsx("p",{children:e.lead.title})]}),e.account&&n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Account:"}),n.jsx("p",{children:e.account.name})]}),e.contact&&n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact:"}),n.jsxs("p",{children:[e.contact.first_name," ",e.contact.last_name]})]}),e.deal&&n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Deal:"}),n.jsx("p",{children:e.deal.name})]}),e.quote&&n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Quote:"}),n.jsx("p",{children:u(e.quote.quote_id)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:d(e.status||"PENDING").replace("_"," ")})]})]})}),l==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Meeting Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:e.notes||"No notes available."})]}),n.jsx(Ta,{comments:v,onAddComment:j})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:p,onChange:_=>x(_.target.value),children:[n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),n.jsx("button",{onClick:async()=>{if(!r||!e?.id)return;const _=f(p);if(d(e.status)!==p){N(!0);try{await r(e.id,_)}catch(E){console.error("Failed to update status:",E)}finally{N(!1)}}},disabled:p===e.status||y,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${p===e.status||y?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:y?"Updating...":"Update"})]})]})]})]})})})},eJ=e=>e?e.toUpperCase():"",bb=e=>{const t=eJ(e);return t==="INACTIVE"?"INACTIVE":t==="PLANNED"||t==="IN PROGRESS"?"PLANNED":t==="HELD"||t==="DONE"?"HELD":t==="NOT_HELD"||t==="NOT HELD"?"NOT_HELD":"PLANNED"},Pze=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},Dze=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},Oze=e=>{const t=eJ(e);if(t==="INACTIVE")return"bg-gray-200 text-gray-700";switch(t==="PLANNED"?"PENDING":t==="HELD"?"COMPLETED":t==="NOT_HELD"?"CANCELLED":t){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},wA={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},o8=()=>{const e=jt(),t=Jt(),[a]=Us(),s=a.get("id"),r=t.pathname==="/admin/meetings/info";h.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[i,o]=h.useState([]),[l,c]=h.useState(!1),[u,d]=h.useState([]),[f,p]=h.useState(""),[x,y]=h.useState("Filter by Status"),[N,v]=h.useState(!1),[j,w]=h.useState(null),[S,_]=h.useState(1),[E,T]=h.useState(10),[A,L]=h.useState(wA),[M,F]=h.useState(!1),[$,D]=h.useState(null),[q,G]=h.useState(!1),[U,V]=h.useState(null),[Z,Y]=h.useState(!1),[le,_e]=h.useState([]),[te,ae]=h.useState(null);h.useEffect(()=>{const Ie=t.state?.openMeetingModal,rt=t.state?.initialMeetingData?.relatedTo||a.get("id"),He=t.state?.meetingID;Ie||rt?(v(!0),t.state?.initialMeetingData&&L(Ke=>({...Ke,...t.state.initialMeetingData})),e(t.pathname,{replace:!0,state:{}})):He&&(ae(He),e(t.pathname,{replace:!0,state:{}}))},[t,a,e]),h.useEffect(()=>{if(te&&i.length>0&&!l){const Ie=i.find(rt=>rt.id===te);Ie?w(Ie):W.error("Meeting not found."),ae(null)}},[te,i,l]);const ye=async()=>{if(s&&r){const Ie=sessionStorage.getItem("meetingDetailData");if(Ie)try{const rt=JSON.parse(Ie);if(rt.id===parseInt(s)){w(rt),sessionStorage.removeItem("meetingDetailData");return}}catch(rt){console.error(rt)}}c(!0);try{const Ie=await se.get("/meetings/admin/fetch-all"),He=[...Array.isArray(Ie.data)?Ie.data:[]].sort((Ke,Je)=>{const Oe=Ke?.created_at?new Date(Ke.created_at).getTime():0;return(Je?.created_at?new Date(Je.created_at).getTime():0)-Oe});if(o(He),s&&!j){const Ke=He.find(Je=>Je.id===parseInt(s));Ke&&w(Ke)}}catch{W.error("Failed to load meetings.")}finally{c(!1)}},Ne=async()=>{try{const Ie=await se.get("/users/all");d(Array.isArray(Ie.data)?Ie.data:[])}catch(Ie){console.error(Ie)}};h.useEffect(()=>{ye(),Ne()},[]);const he=Ie=>p(Ie.target.value),ve=Ie=>{if(Ie.target.checked){const rt=de.map(He=>He.id);_e(rt)}else _e([])},ne=Ie=>{_e(rt=>rt.includes(Ie)?rt.filter(He=>He!==Ie):[...rt,Ie])},Se=h.useMemo(()=>{const Ie=f.trim().toLowerCase(),rt=x.trim().toUpperCase();return i.filter(He=>{const Ke=[He?.activity,He?.description,He?.relatedTo,He?.assignedTo],Je=Ie===""||Ke.some(Ce=>Ce&&Ce.toString().toLowerCase().includes(Ie)),Oe=rt==="FILTER BY STATUS"||bb(He.status||"PENDING")===rt;return Je&&Oe})},[i,f,x]);h.useEffect(()=>{_(1)},[f,x,E]);const de=h.useMemo(()=>{const Ie=(S-1)*E;return Se.slice(Ie,Ie+E)},[Se,S,E]),ke=()=>{v(!1),L(wA),F(!1),D(null),G(!1)},Te=()=>{L(wA),F(!1),D(null),v(!0)},pe=Ie=>{let rt="";if(Ie.meet_assign_to?.id)rt=String(Ie.meet_assign_to.id);else if(Ie.assignedTo){const K=u.find(we=>`${we.first_name} ${we.last_name}`===Ie.assignedTo);rt=K?String(K.id):""}const He=K=>{if(!K)return"";try{const we=new Date(K),Me=we.getTimezoneOffset()*6e4;return new Date(we.getTime()-Me).toISOString().slice(0,16)}catch{return""}};let Ke="Lead",Je="",Oe="Contact",Ce="";if(Ie.lead)Ke="Lead",Je=String(Ie.lead.id);else if(Ie.account)Ke="Account",Je=String(Ie.account.id),Ie.contact?(Oe="Contact",Ce=String(Ie.contact.id)):Ie.deal?(Oe="Deal",Ce=String(Ie.deal.id)):Ie.quote&&(Oe="Quote",Ce=String(Ie.quote.id));else if(Ie.relatedType||Ie.related_type){const K=Ie.relatedType||Ie.related_type,we=Ie.related_to||Ie.relatedToId;K==="Lead"?(Ke="Lead",Je=String(we)):(Ke="Account",Je=Ie.account_id?String(Ie.account_id):"")}const fe={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},ue=bb(Ie.status),H=fe[ue]||"Planned";L({subject:Ie.subject||Ie.activity||"",location:Ie.location||"",startTime:He(Ie.start_time||Ie.startTime),endTime:He(Ie.end_time||Ie.endTime),status:H,notes:Ie.description||Ie.notes||"",assignedTo:rt,relatedType1:Ke,relatedTo1:Je,relatedType2:Oe,relatedTo2:Ce}),F(!0),D(Ie.id),w(null),v(!0)},ze=Ie=>{if(!Ie.subject?.trim())return W.error("Subject is required.");if(!Ie.startTime)return W.error("Start time is required.");if(Ie.endTime&&!(new Date(Ie.endTime)-new Date(Ie.startTime)>0))return W.error("End time must be after start time.");Ie.relatedType1,Ie.relatedTo1,Ie.relatedType1==="Account"&&Ie.relatedType2&&Ie.relatedTo2&&(Ie.relatedType2,Ie.relatedTo2);const rt={...Ie,assignedTo:parseInt(Ie.assignedTo),relatedTo1:parseInt(Ie.relatedTo1),relatedTo2:parseInt(Ie.relatedTo2)},He=M&&$?"update":"create";V({title:He==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${He} "${rt.subject}"?`,confirmLabel:He==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:He,payload:rt,targetId:$,name:rt.subject}})},Pe=async()=>{if(!U?.action)return;const{type:Ie,payload:rt,targetId:He,name:Ke}=U.action;Y(!0);try{if(Ie==="create")G(!0),await se.post("/meetings/create",rt),W.success(`Meeting "${Ke}" created.`),ke(),await ye();else if(Ie==="update")G(!0),await se.put(`/meetings/${He}`,rt),W.success(`Meeting "${Ke}" updated.`),ke(),await ye();else if(Ie==="delete")await se.delete(`/meetings/${He}`),W.success(`Meeting "${Ke}" deleted.`),j?.id===He&&w(null),await ye();else if(Ie==="bulk-delete"){const{meeting_ids:Je}=U.action;await se.delete("/meetings/admin/bulk-delete",{data:{meeting_ids:Je}}),W.success(`${Je.length} meetings deleted.`),_e([]),await ye()}}catch(Je){const Oe=Je.response?.data?.detail||"Action failed.";W.error(typeof Oe=="string"?Oe:JSON.stringify(Oe)),console.error(Oe)}finally{G(!1),Y(!1),V(null)}},We=async()=>{le.length!==0&&V({title:"Delete Meetings",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:le.length})," selected meetings? This action cannot be undone."]}),confirmLabel:`Delete ${le.length} Meeting(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",meeting_ids:le}})},tt=Ie=>{V({title:"Delete Meeting",message:`Permanently delete "${Ie.subject}"? This action cannot be undone.`,confirmLabel:"Delete",variant:"danger",action:{type:"delete",targetId:Ie.id,name:Ie.subject}})},lt=async(Ie,rt)=>{try{await se.put(`/meetings/${Ie}`,{status:rt}),W.success("Status updated"),ye(),w(null)}catch{W.error("Failed to update status")}};return r&&s?j?n.jsx(bd,{meeting:j,onClose:()=>{w(null),e("/admin/dashboard")},onEdit:pe,onDelete:tt,onStatusUpdate:lt,isSalesView:!1}):n.jsx(Wt,{message:"Loading meeting..."}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[l&&n.jsx(Wt,{message:"Loading meetings..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[n.jsx(Pt,{className:"mr-2 text-blue-600"})," Meetings"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:Te,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[n.jsx(xn,{className:"mr-2"})," Add Meeting"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[n.jsx(Vt,{className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search meetings",value:f,onChange:he,className:"w-full outline-none"})]}),n.jsxs("select",{value:x,onChange:Ie=>y(Ie.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[n.jsx("option",{children:"Filter by Status"}),n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:de.length>0&&le.length===de.length,onChange:ve,className:"cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Start Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:le.length>0?n.jsx("button",{onClick:We,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${le.length} selected items`,children:n.jsx(vn,{size:18})}):""})]})}),n.jsx("tbody",{children:de.length>0?de.map(Ie=>n.jsxs("tr",{onClick:()=>w(Ie),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:rt=>rt.stopPropagation(),children:n.jsx("input",{type:"checkbox",checked:le.includes(Ie.id),onChange:()=>ne(Ie.id),className:"cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:Ie.subject}),n.jsxs("td",{className:"py-3 px-4",children:[Ie.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Ie.lead.title}),Ie.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Ie.account.name}),Ie.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[Ie.contact.first_name," ",Ie.contact.last_name]}),Ie.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Ie.deal.name}),Ie.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Dze(Ie.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4",children:Pze(Ie.start_time)}),n.jsxs("td",{className:"py-3 px-4",children:[Ie.meet_assign_to.first_name," ",Ie.meet_assign_to.last_name]}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Oze(bb(Ie.status))}`,children:bb(Ie.status).replace("_"," ")})}),n.jsx("td",{className:"py-3 px-4 text-center"})]},Ie.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),n.jsx(rn,{totalItems:Se.length,pageSize:E,currentPage:S,onPrev:()=>_(Ie=>Math.max(1,Ie-1)),onNext:()=>_(Ie=>Math.min(Ie+1,Math.ceil(Se.length/E)||1)),onPageSizeChange:T,label:"meetings"}),N&&n.jsx(y1,{onClose:ke,formData:A,setFormData:L,isEditing:M,onSubmit:ze,isSubmitting:q||Z,users:u}),j&&n.jsx(bd,{meeting:j,onClose:()=>w(null),onEdit:pe,onDelete:tt,onStatusUpdate:lt,isSalesView:!1}),U&&n.jsx(Mze,{open:!0,title:U.title,message:U.message,confirmLabel:U.confirmLabel,variant:U.variant,onConfirm:Pe,onCancel:()=>V(null),loading:Z})]})};function Mze({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{onClick:c,disabled:o,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),n.jsx("button",{onClick:l,disabled:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${u}`,children:o?"...":s})]})]})})}function Ize(){const{user:e,mutate:t}=qt(),a=h.useRef(null),[s,r]=h.useState(""),[i,o]=h.useState(""),[l,c]=h.useState("January"),[u,d]=h.useState(0),[f,p]=h.useState(null),[x,y]=h.useState(null),[N,v]=h.useState(""),[j,w]=h.useState(!1),[S,_]=h.useState(!1),[E,T]=h.useState({type:"",text:""}),A=["January","February","March","April","May","June","July","August","September","October","November","December"];h.useEffect(()=>{e?.company&&(e.company.company_name&&r(e.company.company_name),e.company.currency&&o(e.company.currency),e.company.quota_period&&c(e.company.quota_period),e.company.tax_rate!==void 0&&d(e.company.tax_rate),e.company.company_logo&&p(e.company.company_logo),e.company.address&&v(e.company.address))},[e]);const L=q=>{const G=q.target.files?.[0];if(!G)return;if(!G.type.startsWith("image/")){T({type:"error",text:"Please select an image file"});return}if(G.size>2*1024*1024){T({type:"error",text:"Image size should be less than 2MB"});return}const U=new FileReader;U.onloadend=()=>{y(U.result)},U.readAsDataURL(G)},M=()=>{y(""),p(null)},F=async q=>{q.preventDefault(),w(!0),T({type:"",text:""});try{const G={company_name:s,currency:i,quota_period:l,tax_rate:parseFloat(u),address:N};x!==null&&(G.company_logo=x),await se.put("/company/update-name",G),t&&await t(),y(null),T({type:"success",text:"Company settings updated successfully!"})}catch(G){console.error("Update error:",G);const U=G.response?.data?.detail||"Failed to update settings.";T({type:"error",text:U})}finally{w(!1)}},$=async()=>{_(!0),T({type:"",text:""});try{const q=await se.get("/admin/backup/csv",{responseType:"blob"}),G=q.headers?.["content-disposition"]||"",V=/filename="?([^";]+)"?/i.exec(G)?.[1]||"crm-backup.zip",Z=window.URL.createObjectURL(new Blob([q.data])),Y=document.createElement("a");Y.href=Z,Y.setAttribute("download",V),document.body.appendChild(Y),Y.click(),Y.remove(),window.URL.revokeObjectURL(Z)}catch(q){console.error("Backup download error:",q);const G=q?.response?.data?.detail||"Failed to download backup. Please try again.";T({type:"error",text:G})}finally{_(!1)}},D=["CEO","ADMIN"].includes(e?.role?.toUpperCase());return n.jsxs("div",{className:"max-w-2xl mx-auto mt-10 bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[n.jsxs("div",{className:"bg-[#fbbf24] px-6 py-4",children:[n.jsxs("h2",{className:"text-gray-900 font-bold text-xl flex items-center gap-2",children:[n.jsx(tn,{})," Company Details"]}),n.jsx("p",{className:"text-gray-700 text-sm",children:"Manage your organization's identity and fiscal settings"})]}),n.jsxs("form",{onSubmit:F,className:"p-6 space-y-6",children:[!D&&n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-amber-50 text-amber-700 rounded-lg text-sm border border-amber-200",children:[n.jsx(Yu,{}),n.jsx("span",{children:"You only have view-access. Changes can only be made by an Admin or CEO."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Company Name"}),n.jsx("input",{type:"text",value:s,onChange:q=>r(q.target.value),disabled:!D||j,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fbbf24] focus:border-transparent outline-none transition disabled:bg-gray-50 disabled:cursor-not-allowed",placeholder:"Enter company name",required:!0})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-2",children:[n.jsx(Qie,{className:"text-gray-500"})," Company Address"]}),n.jsx("textarea",{value:N,onChange:q=>v(q.target.value),disabled:!D||j,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fbbf24] focus:border-transparent outline-none transition disabled:bg-gray-50 disabled:cursor-not-allowed resize-none",placeholder:"Enter company address",rows:3})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-2",children:[n.jsx(zI,{className:"text-gray-500"})," Company Logo"]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"flex-shrink-0",children:x||f?n.jsx("img",{src:x||f,alt:"Company Logo",className:"w-16 h-16 object-contain border border-gray-200 rounded-lg bg-gray-50"}):n.jsx("div",{className:"w-16 h-16 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center bg-gray-50",children:n.jsx(zI,{className:"text-gray-400 text-xl"})})}),D&&n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("input",{type:"file",ref:a,accept:"image/*",onChange:L,className:"hidden",id:"company-logo-upload"}),n.jsxs("button",{type:"button",onClick:()=>a.current?.click(),disabled:j,className:"flex items-center gap-2 px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition disabled:opacity-50",children:[n.jsx(Zie,{className:"text-gray-500"}),x||f?"Change Logo":"Upload Logo"]}),(x||f)&&n.jsx("button",{type:"button",onClick:M,disabled:j,className:"text-xs text-red-600 hover:text-red-700 transition",children:"Remove Logo"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Max 2MB, PNG or JPG"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-2",children:[n.jsx(Pt,{className:"text-gray-500"})," Fiscal Year Start"]}),n.jsxs("div",{className:"relative",children:[n.jsx("select",{value:l,onChange:q=>c(q.target.value),disabled:!D||j,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fbbf24] focus:border-transparent outline-none appearance-none bg-white disabled:bg-gray-50 cursor-pointer",children:A.map(q=>n.jsx("option",{value:q,children:q},q))}),n.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none text-gray-500",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-2",children:[n.jsx(Xie,{className:"text-gray-500"})," Default Tax Rate"]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"number",step:"0.01",value:u,onChange:q=>d(q.target.value),disabled:!D||j,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fbbf24] focus:border-transparent outline-none transition disabled:bg-gray-50",placeholder:"0.00"}),n.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-8 pointer-events-none text-gray-400 font-medium",children:"%"})]})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-2",children:[n.jsx(m9,{className:"text-gray-500"})," Currency"]}),n.jsxs("div",{className:"flex gap-3 max-w-xs",children:[n.jsxs("label",{className:`flex-1 flex items-center justify-center gap-1 p-2 border rounded-lg cursor-pointer transition-all ${i===""?"bg-amber-50 border-[#fbbf24] text-amber-900 font-medium ring-1 ring-[#fbbf24]":"border-gray-200 hover:bg-gray-50 text-gray-600"} ${!D||j?"opacity-50 cursor-not-allowed":""}`,children:[n.jsx("input",{type:"radio",name:"currency",value:"",checked:i==="",onChange:()=>o(""),disabled:!D||j,className:"hidden"}),n.jsx("span",{className:"text-lg font-bold",children:""})," PHP"]}),n.jsxs("label",{className:`flex-1 flex items-center justify-center gap-1 p-2 border rounded-lg cursor-pointer transition-all ${i==="$"?"bg-amber-50 border-[#fbbf24] text-amber-900 font-medium ring-1 ring-[#fbbf24]":"border-gray-200 hover:bg-gray-50 text-gray-600"} ${!D||j?"opacity-50 cursor-not-allowed":""}`,children:[n.jsx("input",{type:"radio",name:"currency",value:"$",checked:i==="$",onChange:()=>o("$"),disabled:!D||j,className:"hidden"}),n.jsx("span",{className:"text-lg font-bold",children:"$"})," USD"]})]})]}),E.text&&n.jsx("div",{className:`p-3 rounded-lg text-sm border transition-all ${E.type==="success"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"}`,children:E.text}),n.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-100",children:D&&n.jsxs("div",{className:"flex flex-wrap gap-3",children:[n.jsxs("button",{type:"button",onClick:$,disabled:j||S,className:"flex items-center gap-2 border border-gray-300 bg-white text-gray-700 px-4 py-2 rounded-lg font-medium hover:bg-gray-50 disabled:opacity-50 transition active:scale-95",children:[n.jsx(qo,{}),S?"Preparing...":"Download Backup (CSV)"]}),n.jsxs("button",{type:"submit",disabled:j||S,className:"flex items-center gap-2 bg-[#1e293b] text-white px-6 py-2 rounded-lg font-medium hover:bg-[#334155] disabled:opacity-50 transition shadow-md active:scale-95",children:[n.jsx(wL,{}),j?"Updating...":"Save Settings"]})]})})]})]})}function $ze(){const[e,t]=h.useState(null),[a,s]=h.useState({subject:"",category:"",description:"",priority:"medium"}),[r,i]=h.useState(""),[o,l]=h.useState(!1),[c,u]=h.useState([{id:1,sender:"support",message:"Hello! Welcome to Sari-Sari CRM Support. How can I help you today?",timestamp:new Date}]),[d,f]=h.useState(""),[p,x]=h.useState(!1),y=h.useRef(null);h.useEffect(()=>{y.current?.scrollIntoView({behavior:"smooth"})},[c]),h.useEffect(()=>{document.title="Help Center | Sari-Sari CRM"},[]);const N=[{id:1,category:"Getting Started",title:"How to create your first account?",content:"Navigate to the Accounts page from the sidebar, click the 'Add Account' button, fill in the required information such as company name, email, and phone number, then click Save."},{id:2,category:"Getting Started",title:"How to add new contacts?",content:"Go to Contacts in the sidebar, click 'Add Contact', enter the contact details including name, email, phone, and associated account, then save the contact."},{id:3,category:"Leads & Deals",title:"How to convert a lead to a deal?",content:"Open the lead you want to convert, click on the 'Convert to Deal' button, review the pre-filled information, make any necessary adjustments, and confirm the conversion."},{id:4,category:"Leads & Deals",title:"How to manage deal stages?",content:"Deals progress through stages: Prospecting, Qualification, Proposal, Negotiation, and Closed. Update the stage by editing the deal and selecting the appropriate stage from the dropdown."},{id:5,category:"Tasks & Activities",title:"How to create and assign tasks?",content:"Navigate to Tasks, click 'Add Task', fill in the task details, assign it to a team member, set the due date and priority, then save. The assigned user will be notified."},{id:6,category:"Tasks & Activities",title:"How to schedule meetings?",content:"Go to Meetings, click 'Schedule Meeting', select participants, set the date and time, add an agenda, and save. All participants will receive calendar invites."},{id:7,category:"Reports & Analytics",title:"How to view sales performance?",content:"Access the Dashboard to see key metrics. For detailed reports, navigate to Targets to view individual and team performance against set goals."},{id:8,category:"Account Settings",title:"How to manage user permissions?",content:"Go to Users in the sidebar, select a user, and edit their role. Different roles (Admin, Manager, Sales, Marketing) have different access levels and permissions."}],v=["Technical Issue","Login Problem","Data Issue","Feature Request","Performance Issue","Other"],w=N.filter(M=>M.title.toLowerCase().includes(r.toLowerCase())||M.content.toLowerCase().includes(r.toLowerCase())||M.category.toLowerCase().includes(r.toLowerCase())).reduce((M,F)=>(M[F.category]||(M[F.category]=[]),M[F.category].push(F),M),{}),S=(M,F)=>{s($=>({...$,[M]:F}))},_=async M=>{if(M.preventDefault(),!a.subject.trim()||!a.category||!a.description.trim()){W.warn("Please fill in all required fields.");return}l(!0),setTimeout(()=>{W.success("Your issue has been submitted successfully! We'll get back to you soon."),s({subject:"",category:"",description:"",priority:"medium"}),t(null),l(!1)},1500)},[E,T]=h.useState(null),A=M=>{if(M.preventDefault(),!d.trim())return;const F={id:c.length+1,sender:"user",message:d.trim(),timestamp:new Date};u($=>[...$,F]),f(""),x(!0),setTimeout(()=>{const $=["Thank you for your message. Let me look into that for you.","I understand your concern. Can you provide more details?","That's a great question! Here's what I can help you with...","I'm checking our system now. Please hold on for a moment.","Thanks for reaching out! I'll make sure to assist you with this."],D=$[Math.floor(Math.random()*$.length)];u(q=>[...q,{id:q.length+1,sender:"support",message:D,timestamp:new Date}]),x(!1)},1500)},L=M=>new Date(M).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return n.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[n.jsxs("div",{className:"mb-8 text-center",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Help Center"}),n.jsx("p",{className:"text-gray-600",children:"How can we help you today?"})]}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[n.jsx("div",{onClick:()=>t(e==="report"?null:"report"),className:`bg-white rounded-xl shadow-md border-2 cursor-pointer transition-all duration-300 hover:shadow-lg ${e==="report"?"border-red-400 ring-2 ring-red-100":"border-transparent hover:border-red-200"}`,children:n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 bg-red-100 rounded-full flex items-center justify-center",children:n.jsx(Yu,{className:"w-7 h-7 text-red-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Report an Issue"}),n.jsx("p",{className:"text-gray-500 text-sm",children:"Having a problem? Let us know"})]})]}),n.jsx(It,{className:`w-6 h-6 text-gray-400 transition-transform duration-300 ${e==="report"?"rotate-90":""}`})]})})}),n.jsx("div",{onClick:()=>t(e==="solutions"?null:"solutions"),className:`bg-white rounded-xl shadow-md border-2 cursor-pointer transition-all duration-300 hover:shadow-lg ${e==="solutions"?"border-blue-400 ring-2 ring-blue-100":"border-transparent hover:border-blue-200"}`,children:n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center",children:n.jsx(qie,{className:"w-7 h-7 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Browse Solutions"}),n.jsx("p",{className:"text-gray-500 text-sm",children:"Find answers to common questions"})]})]}),n.jsx(It,{className:`w-6 h-6 text-gray-400 transition-transform duration-300 ${e==="solutions"?"rotate-90":""}`})]})})}),n.jsx("div",{onClick:()=>t(e==="chat"?null:"chat"),className:`bg-white rounded-xl shadow-md border-2 cursor-pointer transition-all duration-300 hover:shadow-lg ${e==="chat"?"border-green-400 ring-2 ring-green-100":"border-transparent hover:border-green-200"}`,children:n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"w-14 h-14 bg-green-100 rounded-full flex items-center justify-center relative",children:[n.jsx($y,{className:"w-7 h-7 text-green-600"}),n.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-white"})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Live Chat Support"}),n.jsx("p",{className:"text-gray-500 text-sm",children:"Chat with our support team"})]})]}),n.jsx(It,{className:`w-6 h-6 text-gray-400 transition-transform duration-300 ${e==="chat"?"rotate-90":""}`})]})})})]}),e==="report"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-8 animate-fade-in",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[n.jsx(FI,{className:"text-red-500"}),"Report an Issue"]}),n.jsx("button",{onClick:()=>t(null),className:"p-2 hover:bg-gray-100 rounded-full transition",children:n.jsx(Xt,{className:"w-5 h-5 text-gray-500"})})]}),n.jsxs("form",{onSubmit:_,className:"space-y-5",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Subject ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:a.subject,onChange:M=>S("subject",M.target.value),placeholder:"Brief description of the issue",className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-200 focus:border-red-400 outline-none transition"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Category ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{value:a.category,onChange:M=>S("category",M.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-200 focus:border-red-400 outline-none transition bg-white",children:[n.jsx("option",{value:"",children:"Select a category"}),v.map(M=>n.jsx("option",{value:M,children:M},M))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),n.jsx("div",{className:"flex gap-3",children:["low","medium","high"].map(M=>n.jsx("button",{type:"button",onClick:()=>S("priority",M),className:`px-4 py-2 rounded-lg border transition capitalize ${a.priority===M?M==="high"?"bg-red-500 text-white border-red-500":M==="medium"?"bg-yellow-500 text-white border-yellow-500":"bg-green-500 text-white border-green-500":"bg-white text-gray-600 border-gray-300 hover:border-gray-400"}`,children:M},M))})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Description ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("textarea",{value:a.description,onChange:M=>S("description",M.target.value),placeholder:"Please describe the issue in detail. Include steps to reproduce if applicable.",rows:5,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-200 focus:border-red-400 outline-none transition resize-none"})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx("button",{type:"submit",disabled:o,className:"flex items-center gap-2 bg-red-500 hover:bg-red-600 text-white px-6 py-2.5 rounded-lg font-medium transition disabled:opacity-50 disabled:cursor-not-allowed",children:o?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Submitting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(ek,{className:"w-4 h-4"}),"Submit Issue"]})})})]})]}),e==="solutions"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-8 animate-fade-in",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[n.jsx(Yie,{className:"text-blue-500"}),"Browse Solutions"]}),n.jsx("button",{onClick:()=>t(null),className:"p-2 hover:bg-gray-100 rounded-full transition",children:n.jsx(Xt,{className:"w-5 h-5 text-gray-500"})})]}),n.jsxs("div",{className:"relative mb-6",children:[n.jsx(Vt,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"text",value:r,onChange:M=>i(M.target.value),placeholder:"Search for solutions...",className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-200 focus:border-blue-400 outline-none transition"})]}),n.jsx("div",{className:"space-y-6",children:Object.keys(w).length>0?Object.entries(w).map(([M,F])=>n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3",children:M}),n.jsx("div",{className:"space-y-2",children:F.map($=>n.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[n.jsxs("button",{onClick:()=>T(E===$.id?null:$.id),className:"w-full px-4 py-3 flex items-center justify-between bg-gray-50 hover:bg-gray-100 transition text-left",children:[n.jsx("span",{className:"font-medium text-gray-700",children:$.title}),n.jsx(It,{className:`w-5 h-5 text-gray-400 transition-transform duration-200 ${E===$.id?"rotate-90":""}`})]}),E===$.id&&n.jsxs("div",{className:"px-4 py-3 bg-white border-t border-gray-200",children:[n.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:$.content}),n.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-gray-500",children:[n.jsx(aa,{className:"text-green-500"}),"Was this helpful?",n.jsx("button",{className:"text-blue-500 hover:underline ml-1",children:"Yes"}),n.jsx("span",{children:"|"}),n.jsx("button",{className:"text-blue-500 hover:underline",children:"No"})]})]})]},$.id))})]},M)):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Vt,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),n.jsxs("p",{className:"text-gray-500",children:['No solutions found matching "',r,'"']}),n.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Try a different search term or"," ",n.jsx("button",{onClick:()=>t("report"),className:"text-blue-500 hover:underline",children:"report an issue"})]})]})})]}),e==="chat"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-md mb-8 animate-fade-in overflow-hidden",children:[n.jsxs("div",{className:"bg-green-500 text-white p-4 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:n.jsx($y,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:"Live Chat Support"}),n.jsxs("p",{className:"text-green-100 text-xs flex items-center gap-1",children:[n.jsx("span",{className:"w-2 h-2 bg-green-300 rounded-full animate-pulse"}),"Online - Typically replies in minutes"]})]})]}),n.jsx("button",{onClick:()=>t(null),className:"p-2 hover:bg-white/10 rounded-full transition",children:n.jsx(Xt,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"h-80 overflow-y-auto p-4 bg-gray-50 space-y-4",children:[c.map(M=>n.jsx("div",{className:`flex ${M.sender==="user"?"justify-end":"justify-start"}`,children:n.jsxs("div",{className:`flex items-end gap-2 max-w-[80%] ${M.sender==="user"?"flex-row-reverse":""}`,children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${M.sender==="user"?"bg-blue-500 text-white":"bg-green-500 text-white"}`,children:M.sender==="user"?n.jsx(nn,{className:"w-4 h-4"}):n.jsx($y,{className:"w-4 h-4"})}),n.jsxs("div",{className:`px-4 py-2.5 rounded-2xl ${M.sender==="user"?"bg-blue-500 text-white rounded-br-md":"bg-white shadow-sm border border-gray-200 text-gray-700 rounded-bl-md"}`,children:[n.jsx("p",{className:"text-sm",children:M.message}),n.jsx("p",{className:`text-[10px] mt-1 ${M.sender==="user"?"text-blue-100":"text-gray-400"}`,children:L(M.timestamp)})]})]})},M.id)),p&&n.jsx("div",{className:"flex justify-start",children:n.jsxs("div",{className:"flex items-end gap-2",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-green-500 text-white flex items-center justify-center",children:n.jsx($y,{className:"w-4 h-4"})}),n.jsx("div",{className:"bg-white shadow-sm border border-gray-200 px-4 py-3 rounded-2xl rounded-bl-md",children:n.jsxs("div",{className:"flex gap-1",children:[n.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),n.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),n.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]})}),n.jsx("div",{ref:y})]}),n.jsx("form",{onSubmit:A,className:"p-4 border-t border-gray-200 bg-white",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx("input",{type:"text",value:d,onChange:M=>f(M.target.value),placeholder:"Type your message...",className:"flex-1 px-4 py-2.5 border border-gray-300 rounded-full focus:ring-2 focus:ring-green-200 focus:border-green-400 outline-none transition"}),n.jsxs("button",{type:"submit",disabled:!d.trim(),className:"px-5 py-2.5 bg-green-500 hover:bg-green-600 text-white rounded-full transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[n.jsx(ek,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Send"})]})]})})]}),!e&&n.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 text-center",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Need more help?"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Contact our support team for personalized assistance"}),n.jsx("div",{className:"flex justify-center gap-4",children:n.jsxs("a",{href:"mailto:support@example.com",className:"inline-flex items-center gap-2 bg-white px-4 py-2 rounded-lg shadow-sm hover:shadow-md transition text-gray-700",children:[n.jsx(FI,{className:"w-4 h-4"}),"Email Support"]})})]})]})}function Rze({toggleSidebar:e}){const[t,a]=h.useState(!1),[s,r]=h.useState(!1),[i,o]=h.useState([]),[l,c]=h.useState(0),u=h.useRef(null),d=h.useRef(null),f=Jt(),p=jt(),{logout:x}=Ks(),{user:y,fetchUser:N}=qt(),j={"/sales/overview":"Dashboard","/sales/accounts":"Accounts","/sales/contacts":"Contacts","/sales/leads":"Leads","/sales/deals":"Deals","/sales/quotes":"Quotes","/sales/targets":"Targets","/sales/reports":"Reports","/sales/tasks":"Tasks"}[f.pathname]||"Sales Panel";h.useEffect(()=>{N();const T=()=>{N()};return window.addEventListener("userProfileUpdated",T),()=>{window.removeEventListener("userProfileUpdated",T)}},[]),h.useEffect(()=>{const T=async()=>{try{const A=await se.get("/logs/notifications");console.log(" Fetched notifications from DB:",A.data);const L=(A.data||[]).map(M=>{const F=M.entity_id||M.new_data?.id,$=(M.entity_type||"").toLowerCase();return S({id:M.id,type:M.notif_type||M.notification_type||M.type||w(M),title:M.title||M.description,assignedBy:M.assignedBy||M.name,createdAt:M.createdAt||M.timestamp,read:M.is_read??M.read??!1,leadId:$==="lead"?F:M.leadId||M.lead_id,taskId:$==="task"?F:M.taskId||M.task_id,contactId:$==="contact"?F:M.contactId||M.contact_id,dealId:$==="deal"?F:M.dealId||M.deal_id,accountId:$==="account"?F:M.accountId||M.account_id})});o(L),c(L.filter(M=>!M.read).length)}catch(A){console.error("Failed to load history notifications",A)}};y?.id&&T()},[y?.id]);const w=T=>{const A=String(T.action||T.type||"").toUpperCase(),L={TASK_ASSIGNMENT:"task_assignment",LEAD_ASSIGNMENT:"lead_assignment",LEAD_UPDATE:"lead_update",CONTACT_ASSIGNMENT:"contact_assignment",CONTACT_UPDATE:"contact_update",DEAL_ASSIGNMENT:"deal_assignment",DEAL_UPDATE:"deal_update",ACCOUNT_ASSIGNMENT:"account_assignment",ACCOUNT_UPDATE:"account_update",TERRITORY_ASSIGNMENT:"territory_assignment",CREATE:"create",UPDATE:"update",DELETE:"delete"};if(L[A])return L[A];const M=String(T.title||T.description||"").toLowerCase(),F=String(T.entity_type||"").toLowerCase(),$=A.includes("UPDATE"),D=A.includes("CREATE");return A.includes("DELETE"),M.includes("task")||F==="task"?$?"task_update":"task_assignment":M.includes("territory")||F==="territory"?"territory_assignment":M.includes("lead")||F==="lead"?$?"lead_update":D?"lead_assignment":"lead_update":M.includes("contact")||F==="contact"?$?"contact_update":D?"contact_assignment":"contact_update":M.includes("deal")||F==="deal"?$?"deal_update":D?"deal_assignment":"deal_update":M.includes("account")||F==="account"?$?"account_update":D?"account_assignment":"account_update":M.includes("quote")||F==="quote"?"quote":M.includes("meeting")||F==="meeting"?"meeting":M.includes("call")||F==="call"?"call":"info"},S=T=>{const A={...T};switch(A.read=!!A.read,A.type){case"territory_assignment":A.title=A.title||`You have been assigned to ${A.territoryName||"a territory"}`;break;case"lead_assigned":A.type="lead_assignment",A.title=A.title||`New lead assigned: ${A.leadName||A.company||"Lead"}`;break;case"lead_assignment":A.title=A.title||`New lead assigned: ${A.leadName||A.company||"Lead"}`;break;case"lead_update":A.title=A.title||`Lead updated: ${A.leadName||A.company||"Lead"}`;break;case"task_assignment":case"task_update":A.title=A.title||`Task: ${A.taskTitle||"Task"}`;break;case"contact_assignment":A.title=A.title||`New contact assigned: ${A.contactName||A.contact||"Contact"}`;break;case"contact_update":A.title=A.title||`Contact updated: ${A.contactName||A.contact||"Contact"}`;break;case"deal_assignment":A.title=A.title||`New deal assigned: ${A.dealName||A.name||"Deal"}`;break;case"deal_update":A.title=A.title||`Deal updated: ${A.dealName||A.name||"Deal"}`;break;case"account_assignment":A.title=A.title||`New account assigned: ${A.accountName||A.name||"Account"}`;break;case"account_update":A.title=A.title||`Account updated: ${A.accountName||A.name||"Account"}`;break;case"quote":A.title=A.title||"Quote activity";break;case"meeting":A.title=A.title||"Meeting activity";break;case"call":A.title=A.title||"Call activity";break;default:A.title=A.title||"Activity"}return A},_=T=>{switch(T.type){case"task_assignment":p(`/sales/tasks/${T.taskId||T.task_id||""}`);break;case"lead_assignment":case"lead_update":p(`/sales/leads/${T.leadId||T.lead_id||""}`);break;case"contact_assignment":case"contact_update":p(`/sales/contacts/${T.contactId||T.contact_id||""}`);break;case"deal_assignment":case"deal_update":p(`/sales/deals/${T.dealId||T.deal_id||""}`);break;case"account_assignment":case"account_update":p(`/sales/accounts/${T.accountId||T.account_id||""}`);break;default:p("/sales/overview")}},E=async T=>{if(T.read){_(T);return}try{await se.patch(`/logs/mark-read/${T.id}`),o(A=>A.map(L=>L.id===T.id?{...L,read:!0}:L)),c(A=>A>0?A-1:0),_(T)}catch(A){console.error("Failed to mark notification as read",A),_(T)}};return h.useEffect(()=>{if(!y?.id)return;const T=CN(y.id);console.log(" Connecting to WebSocket:",T);const A=new WebSocket(T);let L;const M=()=>{L=setTimeout(()=>{console.log(" Attempting WebSocket reconnection...")},3e3)};return A.onopen=()=>{console.log(" Sales WS Connected to:",T),clearTimeout(L)},A.onmessage=F=>{try{const $=JSON.parse(F.data);console.log(" Notification received:",$);const D=S($);o(q=>[D,...q]),c(q=>q+1)}catch($){console.error("Error parsing notification:",$)}},A.onclose=()=>{console.log(" Sales WS Disconnected"),M()},A.onerror=F=>{console.error(" Sales WS Error:",F)},()=>{clearTimeout(L),A&&A.readyState===WebSocket.OPEN&&A.close()}},[y?.id]),h.useEffect(()=>{function T(A){u.current&&!u.current.contains(A.target)&&a(!1),d.current&&!d.current.contains(A.target)&&r(!1)}return document.addEventListener("mousedown",T),()=>document.removeEventListener("mousedown",T)},[]),n.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:n.jsx(Zf,{className:"text-2xl"})}),y?.company?.company_logo&&n.jsx("img",{src:y.company.company_logo,alt:"Company Logo",className:"w-20 h-10 object-contain rounded"}),n.jsx("h1",{className:"text-lg sm:text-xl font-semibold text-gray-800 truncate max-w-[150px] sm:max-w-none",children:j})]}),n.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[n.jsxs("div",{className:"relative",ref:d,children:[n.jsxs("button",{onClick:()=>r(!s),className:"relative text-gray-600 hover:text-gray-800 transition",children:[n.jsx(cx,{className:"text-xl sm:text-2xl"}),l>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] w-4 h-4 flex items-center justify-center rounded-full font-semibold",children:l})]}),s&&n.jsxs("div",{className:"absolute right-0 mt-3 w-80 bg-white rounded-xl shadow-lg border z-50 overflow-hidden animate-fade-in",children:[n.jsxs("div",{className:"p-3 border-b bg-gray-50 flex justify-between items-center",children:[n.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:"Notifications"}),i.length>0&&n.jsx("button",{onClick:async()=>{try{await se.patch("/logs/mark-all-read"),o(T=>T.map(A=>({...A,read:!0}))),c(0)}catch(T){console.error("Failed to mark all notifications as read",T)}},className:"text-xs text-blue-600 hover:underline",children:"Clear all"})]}),n.jsx("div",{className:"max-h-80 overflow-y-auto",children:i.length>0?i.map((T,A)=>n.jsxs("div",{onClick:()=>E(T),className:`p-4 border-b hover:bg-gray-50 cursor-pointer transition ${T.read?"bg-gray-50":"bg-white"}`,children:[n.jsxs("div",{className:"flex justify-between items-center mb-1",children:[n.jsx("span",{className:`text-[10px] px-2 py-1 rounded-full font-semibold uppercase
                            ${T.type==="task_assignment"||T.type==="task_update"?"bg-purple-100 text-purple-700":T.type==="lead_assignment"||T.type==="lead_update"?"bg-green-100 text-green-700":T.type==="contact_assignment"||T.type==="contact_update"?"bg-amber-100 text-amber-700":T.type==="deal_assignment"||T.type==="deal_update"?"bg-indigo-100 text-indigo-700":T.type==="account_assignment"||T.type==="account_update"?"bg-cyan-100 text-cyan-700":T.type==="territory_assignment"?"bg-blue-100 text-blue-700":T.type==="quote"?"bg-pink-100 text-pink-700":T.type==="meeting"?"bg-teal-100 text-teal-700":T.type==="call"?"bg-red-100 text-red-700":T.type==="create"?"bg-emerald-100 text-emerald-700":T.type==="update"?"bg-yellow-100 text-yellow-700":T.type==="delete"?"bg-rose-100 text-rose-700":"bg-gray-100 text-gray-700"}`,children:T.type==="task_assignment"||T.type==="task_update"?"Task":T.type==="lead_assignment"?"Lead":T.type==="lead_update"?"Lead Update":T.type==="contact_assignment"?"Contact":T.type==="contact_update"?"Contact Update":T.type==="deal_assignment"?"Deal":T.type==="deal_update"?"Deal Update":T.type==="account_assignment"?"Account":T.type==="account_update"?"Account Update":T.type==="territory_assignment"?"Territory":T.type==="quote"?"Quote":T.type==="meeting"?"Meeting":T.type==="call"?"Call":T.type==="create"?"Created":T.type==="update"?"Updated":T.type==="delete"?"Deleted":"Activity"}),!T.read&&n.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"font-medium text-gray-800 text-sm",children:T.title}),n.jsx("span",{className:"text-xs text-gray-600 mt-0.5",children:T.assignedBy?`Assigned by ${T.assignedBy}`:"System"}),n.jsx("span",{className:"text-[11px] text-gray-400 mt-1",children:T.createdAt?new Date(T.createdAt).toLocaleString():""})]})]},T.id??A)):n.jsx("div",{className:"p-6 text-center text-gray-500 text-sm",children:"No new notifications"})})]})]}),n.jsxs("div",{className:"relative",ref:u,children:[n.jsxs("button",{onClick:()=>a(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[n.jsx("img",{src:y?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 aspect-square object-cover rounded-full"}),n.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[y?.first_name," ",y?.last_name]})]}),t&&n.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4",children:[n.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[n.jsx("img",{src:y?.profile_picture||"https://via.placeholder.com/80",alt:"Profile",className:"w-16 h-16 rounded-full object-cover"}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[y?.first_name," ",y?.middle_name," ",y?.last_name]}),n.jsx("p",{className:"text-[11px] text-gray-600 font-light w-full truncate",children:"Sales"})]}),y?.company&&n.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-100 w-full justify-center",children:[y.company.company_logo&&n.jsx("img",{src:y.company.company_logo,alt:"Company Logo",className:"w-6 h-6 object-contain rounded"}),n.jsx("span",{className:"text-xs text-gray-500 truncate",children:y.company.company_name})]})]}),n.jsxs("div",{className:"mt-4 space-y-1 px-4 text-left",children:[n.jsx("button",{className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-2 rounded text-left",onClick:()=>{p("/sales/manage-account"),a(!1)},children:"Manage Your Account"}),n.jsx("div",{className:"border-t border-gray-200 my-2"}),n.jsx("button",{onClick:x,className:"block w-full text-sm text-red-600 hover:text-red-700 hover:bg-gray-50 py-2 rounded text-left",children:"Logout"})]})]})]})]})]})}function zze(){const[e,t]=h.useState(!1),[a,s]=h.useState(!1),{user:r}=qt(),[i,o]=h.useState(!1);h.useEffect(()=>{r&&console.log("Fetched user:",r)},[r]);const l=["/sales/overview","/sales/hub","/sales/accounts","/sales/contacts","/sales/leads","/sales/deals","/sales/quotes","/sales/targets"],c=Jt();l.includes(c.pathname);const u="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",d="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition";return n.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[n.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
        ${e?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[n.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[n.jsxs("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:[" Sari-Sari.CRM"," ",n.jsx("span",{className:"text-[12px] text-gray-700 font-medium align-bottom",children:"v2"})]}),r&&r.company&&n.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:r.company.company_name})]}),n.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[n.jsxs(Ft,{to:"/sales/overview",className:({isActive:f})=>f?u:d,children:[n.jsx(dx,{})," Dashboard"]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>o(!i),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(tn,{className:"text-lg"}),"Sales"]}),n.jsx(Lt,{className:`transition-transform ${i?"rotate-180":""}`})]}),i&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(Ft,{to:"/sales/accounts",className:({isActive:f})=>f?u:d,children:[n.jsx(wd,{})," Accounts"]}),n.jsxs(Ft,{to:"/sales/contacts",className:({isActive:f})=>f?u:d,children:[n.jsx(nn,{})," Contacts"]}),n.jsxs(Ft,{to:"/sales/leads",className:({isActive:f})=>f?u:d,children:[n.jsx(Kn,{})," Leads"]}),n.jsxs(Ft,{to:"/sales/deals",className:({isActive:f})=>f?u:d,children:[n.jsx(tn,{})," Deals"]}),n.jsxs(Ft,{to:"/sales/quotes",className:({isActive:f})=>f?u:d,children:[n.jsx(fn,{})," Quotes"]}),n.jsxs(Ft,{to:"/sales/targets",className:({isActive:f})=>f?u:d,children:[n.jsx(mr,{})," Targets"]})]})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!a),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(ks,{className:"text-lg"}),"Activity"]}),n.jsx(Lt,{className:`transition-transform ${a?"rotate-180":""}`})]}),a&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(Ft,{to:"/sales/tasks",className:({isActive:f})=>f?u:d,children:[n.jsx(Qt,{})," Tasks"]}),n.jsxs(Ft,{to:"/sales/meetings",className:({isActive:f})=>f?u:d,children:[n.jsx(Pt,{})," Meetings"]}),n.jsxs(Ft,{to:"/sales/calls",className:({isActive:f})=>f?u:d,children:[n.jsx(zs,{})," Calls"]}),n.jsxs(Ft,{to:"/sales/audit",className:({isActive:f})=>f?u:d,children:[n.jsx(ks,{})," Audit"]})]})]}),n.jsx("div",{children:n.jsx(Ft,{to:"/sales/territory",className:({isActive:f})=>f?u:d,children:n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Zl,{className:"text-lg"}),"Territory"]})})}),n.jsxs(Ft,{to:"/sales/manage-account",className:({isActive:f})=>f?u:d,children:[n.jsx(nn,{className:"text-lg"}),n.jsx("span",{children:"Your Profile"})]})]}),n.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),e&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>t(!1)}),n.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[n.jsx(Rze,{toggleSidebar:()=>t(!0)}),n.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:n.jsx(tx,{})})]})]})}const Fze=e=>n.jsx(Vt,{...e}),Uze=e=>n.jsx(wd,{...e}),tJ=e=>n.jsx(Vs,{...e}),Bze=e=>n.jsx(lx,{...e}),Hze=e=>n.jsx(aN,{...e}),qze=e=>n.jsx(Pt,{...e}),Wze=e=>n.jsx(Ot,{...e}),Gze=e=>n.jsx(rN,{...e}),nJ=e=>n.jsx(sN,{...e}),Vze=e=>n.jsx(ra,{...e}),aJ=e=>n.jsx(nn,{...e}),Yze=e=>n.jsx(Kn,{...e}),sJ=e=>n.jsx(tn,{...e}),Qze=e=>n.jsx(fn,{...e}),rJ=e=>n.jsx(mr,{...e}),Ow=e=>n.jsx(aa,{...e}),Mw=e=>n.jsx(Pt,{...e}),Iw=e=>n.jsx(zs,{...e}),Kze=e=>n.jsx(Zl,{...e}),Xze=e=>n.jsx(ks,{...e}),iJ=(e,t="")=>{const a=parseFloat(e)||0;return new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short",maximumFractionDigits:1}).format(a).replace(/^/,`${t} `)},Zze=e=>{switch(e){case"Negotiation":return{text:"text-purple-700",bg:"bg-purple-100"};case"Proposal":return{text:"text-red-700",bg:"bg-red-100"};case"Qualification":return{text:"text-yellow-700",bg:"bg-yellow-100"};case"Prospecting":return{text:"text-blue-700",bg:"bg-blue-100"};case"Closed Won":return{text:"text-green-700",bg:"bg-green-100"};case"Closed Lost":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},Jze=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},eFe=e=>{switch(e){case"call":return{Icon:Wze,color:"text-red-500",bgColor:"bg-red-100"};case"qualification":return{Icon:Gze,color:"text-green-600",bgColor:"bg-green-100"};default:return{Icon:qze,color:"text-blue-500",bgColor:"bg-blue-100"}}},tFe=e=>{switch(e.toUpperCase()){case"HIGH":return{text:"text-red-700",bg:"bg-red-100"};case"LOW":return{text:"text-blue-700",bg:"bg-blue-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},nFe=({searchQuery:e,onSearchChange:t,searchResults:a,onSearchResultClick:s})=>{const r=jt(),[i,o]=h.useState(!1),l=h.useRef(null),c=[{icon:Uze,label:"Account"},{icon:aJ,label:"Contact"},{icon:Yze,label:"Leads"},{icon:sJ,label:"Deals"},{icon:Qze,label:"Quotes"},{icon:rJ,label:"Target"},{icon:Ow,label:"Task"},{icon:Mw,label:"Meeting"},{icon:Iw,label:"Call"},{icon:Xze,label:"Audit"},{icon:Kze,label:"Territory"}];h.useEffect(()=>{const f=p=>{l.current&&!l.current.contains(p.target)&&o(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const u=f=>{t(f.target.value),o(f.target.value.trim().length>0)},d=f=>{s&&s(f),o(!1)};return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 sm:p-4 flex flex-col items-start space-y-4 w-full",children:[n.jsxs("div",{className:"w-full flex justify-center relative",ref:l,children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg lg:mt-3 px-4 py-2 w-full max-w-md md:max-w-lg lg:max-w-2xl focus-within:ring-2 focus-within:ring-blue-500 transition duration-150",children:[n.jsx(Fze,{size:20,className:"text-gray-400 mr-3 flex-shrink-0"}),n.jsx("input",{type:"text",placeholder:"Search Leads, Deals, or Accounts...",className:"focus:outline-none text-base w-full",value:e,onChange:u,onFocus:()=>e.trim().length>0&&o(!0)})]}),i&&Array.isArray(a)&&a.length>0&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:a.map((f,p)=>n.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition duration-150",onClick:()=>d(f),children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:f.name}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:f.type}),f.details&&n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:f.details})]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${f.type==="Lead"?"bg-blue-100 text-blue-600":f.type==="Deal"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:f.type})]})},p))}),i&&e.trim().length>0&&(!Array.isArray(a)||a.length===0)&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 p-4 text-center text-sm text-gray-500",children:"No results found"})]}),n.jsx("div",{className:"w-full overflow-x-auto lg:overflow-x-hidden scroll-smooth flex justify-center",children:n.jsx("div",{className:"flex flex-nowrap space-x-3 lg:space-x-4 xl:space-x-3 px-2 sm:px-0",children:c.map((f,p)=>n.jsxs("div",{className:"relative flex-shrink-0 group flex items-center justify-center",children:[n.jsx("button",{className:"p-3 text-gray-500 hover:text-gray-900 transition duration-150 rounded-full hover:bg-gray-100 focus:outline-none cursor-pointer","aria-label":f.label,title:f.label,onClick:()=>{switch(f.label){case"Account":r("/sales/accounts");break;case"Contact":r("/sales/contacts");break;case"Leads":r("/sales/leads");break;case"Deals":r("/sales/deals");break;case"Quotes":r("/sales/quotes");break;case"Target":r("/sales/targets");break;case"Task":r("/sales/tasks");break;case"Meeting":r("/sales/meetings");break;case"Call":r("/sales/calls");break;case"Audit":r("/sales/audit");break;case"Territory":r("/sales/territory");break;default:console.log(`Clicked ${f.label}`)}},children:n.jsx(f.icon,{size:24,className:"lg:scale-95"})}),n.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-1.5 bg-gray-900 text-white text-xs font-semibold rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-75 ease-in-out z-50 shadow-lg",children:[f.label,n.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]},p))})})]})},aFe=({action:e,description:t,entity_type:a,entity_name:s,timestamp:r})=>{const i=jt(),o=d=>{if(!d)return"Unknown";const f=new Date(d),x=new Date-f,y=Math.floor(x/6e4),N=Math.floor(x/36e5),v=Math.floor(x/864e5);return y<1?"Just now":y<60?`${y} min ago`:N<24?`${N} hour${N>1?"s":""} ago`:v<7?`${v} day${v>1?"s":""} ago`:f.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},l=e||t||"Action",c=s||a||"System",u=o(r);return n.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i("/sales/audit"),children:[n.jsxs("p",{className:"text-sm text-gray-800 flex-grow font-medium",children:[l," ",n.jsxs("span",{className:"text-gray-500 italic text-xs",children:["(",c,")"]})]}),n.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-4",children:u})]})},sFe=({logs:e,loading:t})=>{const a=jt();return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Recent Logs"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/sales/audit"),children:[n.jsx("span",{children:"See All"}),n.jsx(nJ,{size:14,className:"transform -rotate-45"})]})]}),e&&e.length>0?n.jsx("ul",{className:"space-y-1",children:e.slice(0,3).map((s,r)=>n.jsx(aFe,{...s},r))}):n.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No recent logs"})]})},rFe=({icon:e,title:t,value:a,color:s,bgColor:r,loading:i,onClick:o})=>n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o||(()=>console.log(`Clicked metric card: ${t}`)),children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:20})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a||0})]})]}),iFe=({revenueData:e,loading:t})=>{const a=jt(),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=h.useMemo(()=>{if(console.log("=== RevenueChart calculateRevenueData ==="),console.log("revenueData:",e),console.log("revenueData length:",e?.length),!e||e.length===0){console.log("No revenue data, returning empty chart");const v=new Date;v.getFullYear();const j=v.getMonth(),w=[],S=[];for(let _=0;_<=j;_++)w.push(s[_]),S.push(0);return{labels:w,revenues:S,maxRevenue:0}}const l={};let c=0,u=0;console.log("Processing deals:",e.length),e.forEach((v,j)=>{const w=v.close_date||v.closeDate||null,S=w&&w!==null&&w!=="",_=v.stage||"",E=_.toUpperCase()==="CLOSED_WON"||_==="CLOSED_WON";let T=v.amount;T&&typeof T=="object"&&T.toString?T=parseFloat(T.toString()):T=parseFloat(T)||0;const A=T>0;if(E&&(u++,console.log(`Deal ${j+1} (CLOSED_WON):`,{id:v.id,name:v.name,stage:_,close_date:w,close_date_type:typeof w,amount:T,amount_type:typeof v.amount,hasCloseDate:S,hasAmount:A,willBeAdded:S&&A,allFields:Object.keys(v)})),S&&E&&A)try{let L=new Date(w);if(isNaN(L.getTime())){const M=String(w).split("T")[0];L=new Date(M+"T00:00:00")}if(isNaN(L.getTime()))console.warn(` Invalid date for deal ${v.id}:`,w,"Type:",typeof w);else{const M=L.getFullYear(),F=L.getMonth()+1,$=`${M}-${String(F).padStart(2,"0")}`;l[$]||(l[$]=0),l[$]+=T,c++,console.log(` Added deal ${v.id} to month ${$}: ${T}, total: ${l[$]}`),console.log(`  - Close date: ${w} -> Parsed: ${L.toISOString()} -> Month: ${$} (Year: ${M}, Month: ${F})`)}}catch(L){console.error("Error parsing deal date:",w,L)}else E&&console.warn(` Deal ${v.id} is CLOSED_WON but missing data:`,{hasCloseDate:S,hasAmount:A,closeDate:w,amount:T,originalAmount:v.amount})}),console.log("Summary:",{totalDeals:e.length,closedWonDeals:u,validDealsForGraph:c,monthlyRevenue:l});const d=Object.keys(l).map(v=>parseInt(v.split("-")[0])),f=d.length>0?[...new Set(d)].sort():[],p=new Date().getFullYear();new Date().getMonth();const x=[],y=[];for(let v=0;v<12;v++){const j=`${p}-${String(v+1).padStart(2,"0")}`;x.push(s[v]);const w=l[j]||0;y.push(w),w>0&&console.log(`Month ${s[v]} (${j}): ${w}`)}if(f.length>0){const v=Math.max(...f);if(v>p)for(let j=p+1;j<=v;j++)for(let w=0;w<12;w++){const S=`${j}-${String(w+1).padStart(2,"0")}`,_=l[S]||0;x.push(`${s[w]} ${j}`),y.push(_),_>0&&console.log(`Month ${s[w]} ${j} (${S}): ${_}`)}}const N=Math.max(...y,1);return console.log("Final chart data:",{labels:x,revenues:y,maxRevenue:N,hasData:y.some(v=>v>0)}),{labels:x,revenues:y,maxRevenue:N}},[e]),i=r.labels,o=r.revenues;return console.log("=== FINAL CHART DATA ==="),console.log("X Axis (Months):",i),console.log("Y Axis (Revenue):",o),console.log("Has any revenue > 0:",o.some(l=>l>0)),console.log("All revenue values:",o),console.log("Max revenue:",r.maxRevenue),n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Overview"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/sales/deals"),children:[n.jsx("span",{children:"See All"}),n.jsx(nJ,{size:14,className:"transform -rotate-45"})]})]}),n.jsx("div",{className:"h-80 relative flex-1 flex items-center justify-center p-6",children:n.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i&&i.length>0&&o&&o.length>0?n.jsx(Ix,{xAxis:[{data:i,scaleType:"point"}],yAxis:[{valueFormatter:l=>l>=1e3?`${(l/1e3).toFixed(0)}k`:l.toString()}],series:[{data:o,showMark:!0,area:!0}],height:320,width:void 0,grid:{vertical:!0,horizontal:!0},margin:{top:40,right:40,bottom:50,left:50},sx:{width:"100%",maxWidth:"100%"}}):n.jsxs("div",{className:"text-center text-gray-500",children:[n.jsx("p",{className:"text-sm",children:"No revenue data available"}),n.jsx("p",{className:"text-xs mt-2",children:"Closed won deals with close dates will appear here"})]})})})]})},oFe=({activityData:e,loading:t})=>{const[a,s]=h.useState(!0),[r,i]=h.useState(!0),[o,l]=h.useState(!0),[c,u]=h.useState(!0),[d,f]=h.useState("monthly"),p=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],x=["Q1","Q2","Q3","Q4"],y=U=>{const V=[0,0,0,0];for(let Z=0;Z<12;Z++){const Y=Math.floor(Z/3);V[Y]+=U[Z]}return V},N=U=>[U.reduce((V,Z)=>V+Z,0)],v=h.useMemo(()=>{if(!e){const Se=new Array(12).fill(0),de=new Array(4).fill(0),ke=new Array(1).fill(0);return{labels:d==="monthly"?p:d==="quarterly"?x:[new Date().getFullYear().toString()],tasksCurrentYear:d==="monthly"?Se:d==="quarterly"?de:ke,tasksLastYear:d==="monthly"?Se:d==="quarterly"?de:ke,meetingsCurrentYear:d==="monthly"?Se:d==="quarterly"?de:ke,meetingsLastYear:d==="monthly"?Se:d==="quarterly"?de:ke,callsCurrentYear:d==="monthly"?Se:d==="quarterly"?de:ke,callsLastYear:d==="monthly"?Se:d==="quarterly"?de:ke}}const U=e.tasks?.currentYear||new Array(12).fill(0),V=e.tasks?.lastYear||new Array(12).fill(0),Z=e.meetings?.currentYear||new Array(12).fill(0),Y=e.meetings?.lastYear||new Array(12).fill(0),le=e.calls?.currentYear||new Array(12).fill(0),_e=e.calls?.lastYear||new Array(12).fill(0);let te,ae,ye,Ne,he,ve,ne;return d==="monthly"?(te=p,ae=U,ye=V,Ne=Z,he=Y,ve=le,ne=_e):d==="quarterly"?(te=x,ae=y(U),ye=y(V),Ne=y(Z),he=y(Y),ve=y(le),ne=y(_e)):(te=[new Date().getFullYear().toString()],ae=N(U),ye=N(V),Ne=N(Z),he=N(Y),ve=N(le),ne=N(_e)),{labels:te,tasksCurrentYear:ae,tasksLastYear:ye,meetingsCurrentYear:Ne,meetingsLastYear:he,callsCurrentYear:ve,callsLastYear:ne}},[e,d]),j=v.tasksCurrentYear.some(U=>U>0)||v.tasksLastYear.some(U=>U>0)||v.meetingsCurrentYear.some(U=>U>0)||v.meetingsLastYear.some(U=>U>0)||v.callsCurrentYear.some(U=>U>0)||v.callsLastYear.some(U=>U>0),w=v.tasksCurrentYear.reduce((U,V)=>U+V,0),S=v.meetingsCurrentYear.reduce((U,V)=>U+V,0),_=v.callsCurrentYear.reduce((U,V)=>U+V,0),E=w+S+_,T=v.tasksLastYear.reduce((U,V)=>U+V,0),A=v.meetingsLastYear.reduce((U,V)=>U+V,0),L=v.callsLastYear.reduce((U,V)=>U+V,0),M=T+A+L,F=M>0?((E-M)/M*100).toFixed(1):0,$=T>0?((w-T)/T*100).toFixed(0):w>0?100:0,D=A>0?((S-A)/A*100).toFixed(0):S>0?100:0,q=L>0?((_-L)/L*100).toFixed(0):_>0?100:0,G=[];return a&&(G.push({data:v.tasksCurrentYear,label:`Tasks ${new Date().getFullYear()}`,color:"#10b981",showMark:!0,curve:"catmullRom"}),c&&G.push({data:v.tasksLastYear,label:`Tasks ${new Date().getFullYear()-1}`,color:"#86efac",showMark:!1,curve:"linear"})),r&&(G.push({data:v.meetingsCurrentYear,label:`Meetings ${new Date().getFullYear()}`,color:"#14b8a6",showMark:!0,curve:"catmullRom"}),c&&G.push({data:v.meetingsLastYear,label:`Meetings ${new Date().getFullYear()-1}`,color:"#5eead4",showMark:!1,curve:"linear"})),o&&(G.push({data:v.callsCurrentYear,label:`Calls ${new Date().getFullYear()}`,color:"#6366f1",showMark:!0,curve:"catmullRom"}),c&&G.push({data:v.callsLastYear,label:`Calls ${new Date().getFullYear()-1}`,color:"#a5b4fc",showMark:!1,curve:"linear"})),n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("h2",{className:"text-lg font-semibold text-gray-800 flex items-center",children:["My Activities",j&&n.jsxs("span",{className:`ml-3 text-sm font-medium px-2 py-1 rounded-full ${F>=0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[F>=0?"":""," ",Math.abs(F),"%"]})]}),n.jsxs("select",{value:d,onChange:U=>f(U.target.value),className:"text-xs px-3 py-1.5 rounded-lg border border-gray-300 bg-white text-gray-700 font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 cursor-pointer",children:[n.jsx("option",{value:"monthly",children:"Monthly"}),n.jsx("option",{value:"quarterly",children:"Quarterly"}),n.jsx("option",{value:"yearly",children:"Yearly"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Track your productivity across tasks, meetings & calls"})]}),j&&n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-3xl font-bold text-gray-800",children:E}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Total this year"})]})]}),j&&n.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[n.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-3 rounded-lg border border-green-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx(Ow,{size:16,className:"text-green-600"}),$!==0&&n.jsxs("span",{className:`text-xs font-semibold ${$>=0?"text-green-700":"text-red-600"}`,children:[$>=0?"+":"",$,"%"]})]}),n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Tasks"}),n.jsx("p",{className:"text-xl font-bold text-green-700",children:w}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["vs ",T," last year"]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-teal-100 p-3 rounded-lg border border-teal-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx(Mw,{size:16,className:"text-teal-600"}),D!==0&&n.jsxs("span",{className:`text-xs font-semibold ${D>=0?"text-teal-700":"text-red-600"}`,children:[D>=0?"+":"",D,"%"]})]}),n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Meetings"}),n.jsx("p",{className:"text-xl font-bold text-teal-700",children:S}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["vs ",A," last year"]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 p-3 rounded-lg border border-indigo-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx(Iw,{size:16,className:"text-indigo-600"}),q!==0&&n.jsxs("span",{className:`text-xs font-semibold ${q>=0?"text-indigo-700":"text-red-600"}`,children:[q>=0?"+":"",q,"%"]})]}),n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Calls"}),n.jsx("p",{className:"text-xl font-bold text-indigo-700",children:_}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["vs ",L," last year"]})]})]}),j&&n.jsxs("div",{className:"flex flex-wrap gap-2 mb-4 pb-4 border-b border-gray-100",children:[n.jsxs("button",{onClick:()=>s(!a),className:`text-xs px-3 py-1.5 rounded-full font-medium transition-all ${a?"bg-green-100 text-green-700 border-2 border-green-300":"bg-gray-100 text-gray-500 border-2 border-gray-200"}`,children:[n.jsx(Ow,{size:12,className:"inline mr-1"}),"Tasks"]}),n.jsxs("button",{onClick:()=>i(!r),className:`text-xs px-3 py-1.5 rounded-full font-medium transition-all ${r?"bg-teal-100 text-teal-700 border-2 border-teal-300":"bg-gray-100 text-gray-500 border-2 border-gray-200"}`,children:[n.jsx(Mw,{size:12,className:"inline mr-1"}),"Meetings"]}),n.jsxs("button",{onClick:()=>l(!o),className:`text-xs px-3 py-1.5 rounded-full font-medium transition-all ${o?"bg-indigo-100 text-indigo-700 border-2 border-indigo-300":"bg-gray-100 text-gray-500 border-2 border-gray-200"}`,children:[n.jsx(Iw,{size:12,className:"inline mr-1"}),"Calls"]}),n.jsxs("button",{onClick:()=>u(!c),className:`text-xs px-3 py-1.5 rounded-full font-medium transition-all ml-auto ${c?"bg-gray-200 text-gray-700 border-2 border-gray-300":"bg-gray-100 text-gray-500 border-2 border-gray-200"}`,children:["Compare vs ",new Date().getFullYear()-1]})]}),n.jsx("div",{className:"flex-grow min-h-[320px]",children:t?n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):j&&G.length>0?n.jsx(Ix,{xAxis:[{scaleType:"point",data:v.labels}],series:G,height:320,width:void 0,grid:{vertical:!1,horizontal:!0},margin:{top:10,right:10,bottom:40,left:50},sx:{width:"100%",maxWidth:"100%","& .MuiLineElement-root":{strokeWidth:2.5},"& .MuiMarkElement-root":{scale:"0.8"}}}):j&&G.length===0?n.jsx("div",{className:"text-center text-gray-500 flex items-center justify-center h-full",children:n.jsxs("div",{children:[n.jsx(aa,{size:48,className:"mx-auto mb-3 text-gray-300"}),n.jsx("p",{className:"text-sm font-medium",children:"Select at least one activity type"}),n.jsx("p",{className:"text-xs mt-2",children:"Toggle the filters above to view data"})]})}):n.jsx("div",{className:"text-center text-gray-500 flex items-center justify-center h-full",children:n.jsxs("div",{children:[n.jsx(aa,{size:48,className:"mx-auto mb-3 text-gray-300"}),n.jsx("p",{className:"text-sm font-medium",children:"No completed activities yet"}),n.jsx("p",{className:"text-xs mt-2 text-gray-400",children:"Complete tasks, meetings, or calls to track your productivity"})]})})})]})},NA=({title:e,items:t,children:a,onSeeAll:s})=>{const r=jt(),i=()=>{if(s)s();else{const o={"Latest Leads":"/sales/leads","Latest Deals":"/sales/deals","Upcoming Activities":"/sales/tasks"};o[e]&&r(o[e])}};return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e}),n.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:i,children:"See All"})]}),a]})},lFe=({first_name:e,last_name:t,company_name:a,source:s,created_at:r,id:i})=>{const o=jt(),{text:l,bg:c}=Jze(s||"Website"),u=x=>{if(!x)return"Unknown";const y=new Date(x),v=new Date-y,j=Math.floor(v/6e4),w=Math.floor(v/36e5),S=Math.floor(v/864e5);return j<60?`${j} min ago`:w<24?y.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):S<7?y.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):y.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},d=`${e||""} ${t||""}`.trim()||"Unknown",f=a||"Unknown Company",p=u(r);return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&o(`/sales/leads/${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800",children:d}),n.jsx("p",{className:"text-xs text-gray-500",children:f})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-400",children:p}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${l} ${c} px-2 py-0.5 rounded-full`,children:s||"Website"})]})]})})},cFe=({name:e,amount:t,account:a,stage:s,created_at:r,id:i,previousAmount:o,currencySymbol:l})=>{const c=jt(),d={PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"}[s]||s||"Unknown",{text:f,bg:p}=Zze(d),x=parseFloat(t||0),y=o?x>=o?"up":"down":"up",N=y==="up"?Bze:Hze,v=y==="up"?"text-green-400":"text-red-400",j=a?.name||"Unknown Company";return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&c(`/sales/deals/info?id=${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex-shrink",children:[n.jsx("p",{className:"font-semibold text-sm text-gray-900",children:e||"Unnamed Deal"}),n.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:j}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${f} ${p} px-2 py-0.5 rounded-full`,children:d})]}),n.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[n.jsx("p",{className:"text-md font-bold text-gray-800",children:iJ(x,l)}),n.jsx(N,{size:16,className:`${v} mt-1`})]})]})})},dFe=({type:e,title:t,assignedTo:a,dueDate:s,scheduledDate:r,priority:i,id:o,activityType:l,fullData:c})=>{const u=jt(),f=l||{Call:"call",Meeting:"meeting",Task:"qualification"}[e]||"meeting",{Icon:p,color:x,bgColor:y}=eFe(f),{text:N,bg:v}=tFe(i||"MEDIUM"),S=(T=>{if(!T)return"No date set";const A=new Date(T),M=A-new Date,F=Math.floor(M/864e5);return F===0?`Today, ${A.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:F===1?`Tomorrow, ${A.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:F===-1?`Yesterday, ${A.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:A.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(s||r),_=a||"Unassigned",E=()=>{o&&(c?f==="call"?(sessionStorage.setItem("callDetailData",JSON.stringify(c)),u(`/sales/calls/info?id=${o}`)):f==="meeting"?(sessionStorage.setItem("meetingDetailData",JSON.stringify(c)),u(`/sales/meetings/info?id=${o}`)):u("/sales/tasks"):u(f==="call"?`/sales/calls/info?id=${o}`:f==="meeting"?`/sales/meetings/info?id=${o}`:"/sales/tasks"))};return n.jsxs("div",{className:"flex items-start py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:E,children:[n.jsx("div",{className:`p-2 rounded-lg ${y} mr-3 flex-shrink-0 mt-1`,children:n.jsx(p,{size:20,className:`${x}`})}),n.jsxs("div",{className:"flex-grow",children:[n.jsxs("p",{className:"font-medium text-gray-800 flex items-center mb-1",children:[n.jsx("span",{className:"text-xl leading-none mr-2",children:""}),t||"Untitled Activity"]}),n.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[n.jsxs("p",{className:"flex items-center",children:[n.jsx(tJ,{size:14,className:"mr-1.5 text-gray-400"}),S]}),n.jsxs("p",{className:"flex items-center",children:[n.jsx(aJ,{size:14,className:"mr-1.5 text-gray-400"}),"Assigned to: ",_]})]})]}),n.jsx("span",{className:`inline-block text-xs font-medium ${N} ${v} px-2 py-0.5 rounded-full flex-shrink-0 self-center ml-4`,children:(i||"MEDIUM").toUpperCase()})]})},uFe=()=>{const e=jt(),{user:t}=qt(),a=t?.company?.currency||"",[s,r]=h.useState({activeLeads:0,totalDeals:0,activeAccounts:0,overdueTasks:0,completedTasks:0,completedMeetings:0,completedCalls:0}),[i,o]=h.useState([]),[l,c]=h.useState([]),[u,d]=h.useState([]),[f,p]=h.useState([]),[x,y]=h.useState([]),[N,v]=h.useState([]),[j,w]=h.useState({tasks:{currentYear:new Array(12).fill(0),lastYear:new Array(12).fill(0)},meetings:{currentYear:new Array(12).fill(0),lastYear:new Array(12).fill(0)},calls:{currentYear:new Array(12).fill(0),lastYear:new Array(12).fill(0)}}),[S,_]=h.useState(!0),[E,T]=h.useState(null),[A,L]=h.useState(""),[M,F]=h.useState([]),[$,D]=h.useState([]),[q,G]=h.useState([]),[U,V]=h.useState([]),[Z,Y]=h.useState(0),[le,_e]=h.useState(new Date),te=h.useRef(null),ae=h.useRef(null),ye=h.useMemo(()=>{try{if(!A.trim())return[];const ne=A.toLowerCase().trim(),Se=[];return Array.isArray(M)&&M.forEach(de=>{const ke=`${de.first_name||""} ${de.last_name||""}`.trim().toLowerCase(),Te=(de.company_name||"").toLowerCase(),pe=(de.email||"").toLowerCase(),ze=(de.phone||"").toLowerCase();(ke.includes(ne)||Te.includes(ne)||pe.includes(ne)||ze.includes(ne))&&Se.push({id:de.id,name:`${de.first_name||""} ${de.last_name||""}`.trim()||"Unnamed Lead",type:"Lead",details:de.company_name||"No company",route:`/sales/leads/${de.id}`})}),Array.isArray($)&&$.forEach(de=>{const ke=(de.name||"").toLowerCase(),Te=(de.account?.name||"").toLowerCase(),pe=(de.description||"").toLowerCase();(ke.includes(ne)||Te.includes(ne)||pe.includes(ne))&&Se.push({id:de.id,name:de.name||"Unnamed Deal",type:"Deal",details:de.account?.name||"No account",route:`/sales/deals/info?id=${de.id}`})}),Array.isArray(q)&&q.forEach(de=>{const ke=(de.name||"").toLowerCase(),Te=(de.email||"").toLowerCase(),pe=(de.phone||"").toLowerCase(),ze=(de.website||"").toLowerCase();(ke.includes(ne)||Te.includes(ne)||pe.includes(ne)||ze.includes(ne))&&Se.push({id:de.id,name:de.name||"Unnamed Account",type:"Account",details:de.email||de.phone||"No contact info",route:"/sales/accounts"})}),Se.slice(0,10)}catch(ne){return console.error("Error in search:",ne),[]}},[A,M,$,q]),Ne=ne=>{ne.route&&(e(ne.route),L(""))},he=h.useCallback(async()=>{_(!0),T(null);try{const[ne,Se,de,ke,Te,pe,ze,Pe]=await Promise.all([se.get("/leads/admin/getLeads").catch(nt=>(console.error("Error fetching leads:",nt),{data:[]})),se.get("/deals/admin/fetch-all").catch(nt=>(console.error("Error fetching deals:",nt),{data:[]})),se.get("/accounts/admin/fetch-all").catch(nt=>(console.error("Error fetching accounts:",nt),{data:[]})),se.get("/tasks/all").catch(nt=>(console.error("Error fetching tasks:",nt),{data:[]})),se.get("/meetings/admin/fetch-all").catch(nt=>(console.error("Error fetching meetings:",nt),{data:[]})),se.get("/calls/admin/fetch-all").catch(nt=>(console.error("Error fetching calls:",nt),{data:[]})),se.get("/logs/read-all").catch(nt=>(console.error("Error fetching logs:",nt),{data:[]})),se.get("/targets/admin/fetch-all").catch(nt=>(console.error("Error fetching targets:",nt),{data:[]}))]),We=Array.isArray(ne.data)?ne.data:[],tt=Array.isArray(Se.data)?Se.data:[],lt=Array.isArray(de.data)?de.data:[],Ie=Array.isArray(ke.data)?ke.data:[],rt=Array.isArray(Te.data)?Te.data:[],He=Array.isArray(pe.data)?pe.data:[],Ke=Array.isArray(ze.data)?ze.data:[],Je=Array.isArray(Pe.data)?Pe.data:[];console.log("=== RAW DEALS API RESPONSE ==="),console.log("Deals count:",tt.length),tt.length>0&&(console.log("First deal sample (raw):",JSON.stringify(tt[0],null,2)),console.log("First deal keys:",Object.keys(tt[0]))),F(We),D(tt),G(lt),V(Je);const Oe=Je.reduce((nt,Nt)=>{const wt=Nt.amount||Nt.value||Nt.target_amount||0,Tt=parseFloat(typeof wt=="string"?wt.replace(/[^\d.-]/g,""):wt);return nt+(Number.isFinite(Tt)?Tt:0)},0);Y(Oe);const Ce=We.filter(nt=>nt.status&&!["Lost","Converted"].includes(nt.status)).length,fe=Ie.filter(nt=>!nt.dueDate||nt.status==="Completed"?!1:new Date(nt.dueDate)<new Date).length,ue=Ie.filter(nt=>(nt.status||"").toLowerCase()==="completed").length,H=rt.filter(nt=>{const Nt=(nt.status||"").toUpperCase();return Nt==="COMPLETED"||Nt==="DONE"}).length,K=He.filter(nt=>{const Nt=(nt.status||"").toUpperCase();return Nt==="COMPLETED"||Nt==="HELD"}).length;r({activeLeads:Ce,totalDeals:tt.length,activeAccounts:lt.length,overdueTasks:fe,completedTasks:ue,completedMeetings:H,completedCalls:K});const we=[...We].sort((nt,Nt)=>new Date(Nt.created_at||0)-new Date(nt.created_at||0)).slice(0,5);o(we);const Me=[...tt].sort((nt,Nt)=>new Date(Nt.created_at||0)-new Date(nt.created_at||0)).slice(0,5);c(Me);const ce=new Date,oe=[];He.forEach(nt=>{const Nt=nt.due_date||nt.call_time,wt=(nt.status||"").toUpperCase();if(Nt){const Tt=new Date(Nt);wt==="COMPLETED"||wt==="MISSED"||wt==="NOT_HELD"||wt==="HELD"||oe.push({type:"Call",title:nt.subject||"Untitled Call",assignedTo:nt.assigned_to||(nt.call_assign_to?`${nt.call_assign_to.first_name||""} ${nt.call_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:Nt,priority:(nt.priority||"MEDIUM").toUpperCase(),id:nt.id,activityType:"call",fullData:nt})}}),rt.forEach(nt=>{const Nt=nt.dueDate||nt.start_time,wt=(nt.status||"").toUpperCase();if(Nt){const Tt=new Date(Nt);wt==="COMPLETED"||wt==="CANCELLED"||wt==="DONE"||oe.push({type:"Meeting",title:nt.subject||nt.activity||"Untitled Meeting",assignedTo:nt.assignedTo||(nt.meet_assign_to?`${nt.meet_assign_to.first_name||""} ${nt.meet_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:Nt,priority:(nt.priority||"MEDIUM").toUpperCase(),id:nt.id,activityType:"meeting",fullData:nt})}});const De={HIGH:1,MEDIUM:2,LOW:3},$e=oe.sort((nt,Nt)=>{const wt=De[nt.priority]||3,Tt=De[Nt.priority]||3;if(wt!==Tt)return wt-Tt;const Re=new Date(nt.scheduledDate||0),me=new Date(Nt.scheduledDate||0);return Re-me}).slice(0,5);d($e),p(tt),w((()=>{const nt=new Date().getFullYear(),Nt=nt-1,wt=new Array(12).fill(0),Tt=new Array(12).fill(0),Re=new Array(12).fill(0),me=new Array(12).fill(0),ie=new Array(12).fill(0),Fe=new Array(12).fill(0);console.log("=== MY ACTIVITIES DEBUG ==="),console.log("Total tasks:",Ie.length),console.log("Total meetings:",rt.length),console.log("Total calls:",He.length);let Le=0,be=0,ee=0;return Ie.forEach((O,z)=>{if(z===0&&console.log("Sample task:",{id:O.id,status:O.status,due_date:O.due_date,updated_at:O.updated_at}),(O.status||"").toLowerCase()!=="completed")return;Le++;const Q=O.completedAt||O.completed_at||O.updatedAt||O.updated_at||O.dueDate||O.due_date;if(Q)try{const ge=new Date(Q);if(isNaN(ge.getTime()))return;const re=ge.getFullYear(),Ee=ge.getMonth();re===nt?wt[Ee]++:re===Nt&&Tt[Ee]++}catch(ge){console.error("Error parsing task date:",ge)}}),rt.forEach((O,z)=>{z===0&&console.log("Sample meeting:",{id:O.id,status:O.status,dueDate:O.dueDate,updated_at:O.updated_at});const I=(O.status||"").toUpperCase();if(I!=="COMPLETED"&&I!=="DONE")return;be++;const Q=O.completedAt||O.completed_at||O.updatedAt||O.updated_at||O.dueDate||O.start_time;if(Q)try{const ge=new Date(Q);if(isNaN(ge.getTime()))return;const re=ge.getFullYear(),Ee=ge.getMonth();re===nt?Re[Ee]++:re===Nt&&me[Ee]++}catch(ge){console.error("Error parsing meeting date:",ge)}}),He.forEach((O,z)=>{z===0&&console.log("Sample call:",{id:O.id,status:O.status,due_date:O.due_date,updated_at:O.updated_at});const I=(O.status||"").toUpperCase();if(I!=="COMPLETED"&&I!=="HELD")return;ee++;const Q=O.completedAt||O.completed_at||O.updatedAt||O.updated_at||O.due_date||O.call_time;if(Q)try{const ge=new Date(Q);if(isNaN(ge.getTime()))return;const re=ge.getFullYear(),Ee=ge.getMonth();re===nt?ie[Ee]++:re===Nt&&Fe[Ee]++}catch(ge){console.error("Error parsing call date:",ge)}}),console.log("Activities summary:",{completedTasks:Le,completedMeetings:be,completedCalls:ee,tasksCurrentYear:wt,tasksLastYear:Tt,meetingsCurrentYear:Re,meetingsLastYear:me,callsCurrentYear:ie,callsLastYear:Fe}),{tasks:{currentYear:wt,lastYear:Tt},meetings:{currentYear:Re,lastYear:me},calls:{currentYear:ie,lastYear:Fe}}})()),console.log("=== ALL DEALS DATA ==="),console.log("Total deals:",tt.length);const Ze=tt.filter(nt=>(nt.stage||"").toUpperCase()==="CLOSED_WON");console.log("CLOSED_WON deals:",Ze.length),Ze.length>0?(console.log("=== CLOSED_WON DEALS DETAILS ==="),Ze.forEach((nt,Nt)=>{let wt=nt.amount;wt&&typeof wt=="object"?wt.toString?wt=parseFloat(wt.toString()):wt=parseFloat(wt):wt=parseFloat(wt)||0,console.log(`Deal ${Nt+1}:`,{id:nt.id,name:nt.name,stage:nt.stage,stage_upper:(nt.stage||"").toUpperCase(),amount:nt.amount,amount_parsed:wt,amount_type:typeof nt.amount,close_date:nt.close_date,close_date_type:typeof nt.close_date,close_date_value:nt.close_date?new Date(nt.close_date):null,has_close_date:!!nt.close_date,has_amount:wt>0,all_keys:Object.keys(nt),full_deal:nt})})):(console.log(" No CLOSED_WON deals found!"),console.log("All deal stages:",tt.map(nt=>nt.stage))),v(tt);const mt=[...Ke].sort((nt,Nt)=>new Date(Nt.timestamp||0)-new Date(nt.timestamp||0));y(mt)}catch(ne){console.error("Error fetching dashboard data:",ne),T("Failed to load dashboard data. Please refresh the page.")}finally{_(!1)}},[]);h.useEffect(()=>(document.title="Dashboard | Sari-Sari CRM",console.log("SalesOverview mounted, fetching data..."),he(),te.current=setInterval(()=>{console.log("Auto-refreshing dashboard data..."),he(),_e(new Date)},3e4),()=>{te.current&&clearInterval(te.current)}),[he]),h.useEffect(()=>{if(!t||!t.id)return;let ne=0;const Se=3;let de=null;const ke=()=>{const Te=window.location.protocol==="https:"?"wss:":"ws:",pe=window.location.hostname==="localhost"?"localhost:8000":window.location.host,ze=`${Te}//${pe}/ws/notifications?user_id=${t.id}`;try{const Pe=new WebSocket(ze);ae.current=Pe,Pe.onopen=()=>{console.log(" WebSocket connected for dashboard updates"),ne=0},Pe.onmessage=We=>{try{const tt=JSON.parse(We.data);console.log(" Real-time notification received:",tt),tt.event&&["new_task","task_updated","new_lead","lead_updated","new_deal","deal_updated","new_account","account_updated","new_meeting","meeting_updated","new_call","call_updated"].includes(tt.event)&&(console.log(" Refreshing dashboard due to:",tt.event),he(),_e(new Date))}catch(tt){console.error("Error parsing WebSocket message:",tt)}},Pe.onerror=We=>{ne===0&&console.warn(" WebSocket connection unavailable (this is optional)")},Pe.onclose=()=>{ne<Se&&(ne++,de=setTimeout(()=>{t&&t.id&&ke()},5e3))}}catch{console.warn(" WebSocket not available (optional feature)")}};return ke(),()=>{de&&clearTimeout(de),ae.current&&(ae.current.close(),ae.current=null)}},[t,he]);const ve=[{icon:Vze,title:"Active Leads",value:s.activeLeads,color:"text-blue-600",bgColor:"bg-blue-50",onClick:()=>e("/sales/leads")},{icon:rJ,title:"Total Targets",value:iJ(Z,a),color:"text-purple-600",bgColor:"bg-purple-50",onClick:()=>e("/sales/targets")},{icon:sJ,title:"Total Deals",value:s.totalDeals,color:"text-yellow-600",bgColor:"bg-yellow-50",onClick:()=>e("/sales/deals")},{icon:tJ,title:"Overdue Tasks",value:s.overdueTasks,color:"text-red-600",bgColor:"bg-red-50",onClick:()=>e("/sales/tasks")},{icon:Ow,title:"Completed Tasks",value:s.completedTasks,color:"text-green-600",bgColor:"bg-green-50",onClick:()=>e("/sales/tasks")},{icon:Mw,title:"Completed Meetings",value:s.completedMeetings,color:"text-teal-600",bgColor:"bg-teal-50",onClick:()=>e("/sales/meetings")},{icon:Iw,title:"Completed Calls",value:s.completedCalls,color:"text-indigo-600",bgColor:"bg-indigo-50",onClick:()=>e("/sales/calls")}];return console.log("SalesOverview rendering, loading:",S,"error:",E),n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative w-full",children:[S&&n.jsx(Wt,{}),n.jsxs("div",{className:"max-w-screen-2xl mx-auto",children:[E&&n.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:n.jsx("p",{className:"font-medium",children:E})}),n.jsx("div",{className:"mb-8",children:n.jsx(nFe,{searchQuery:A,onSearchChange:L,searchResults:ye,onSearchResultClick:Ne})}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-7 gap-4 mb-8",children:ve.map(ne=>n.jsx(rFe,{...ne,loading:S},ne.title))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[n.jsx(sFe,{logs:x,loading:S}),n.jsx(oFe,{activityData:j,loading:S})]}),n.jsx("div",{className:"mb-8",children:n.jsx(vj,{leads:M,deals:$,targets:U,currencySymbol:a,basePath:"/sales",currentUser:t})}),n.jsx("div",{className:"grid grid-cols-1 mb-8",children:n.jsx(iFe,{revenueData:N,loading:S})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsx(NA,{title:"Latest Leads",children:i.length>0?i.map((ne,Se)=>n.jsx(lFe,{...ne},ne.id||Se)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No leads found"})}),n.jsx(NA,{title:"Latest Deals",children:S?n.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mb-2"}),n.jsx("div",{className:"text-sm text-gray-500",children:"Loading deals..."})]}):l.length>0?l.map((ne,Se)=>n.jsx(cFe,{...ne,currencySymbol:a},ne.id||Se)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No deals found"})}),n.jsx(NA,{title:"Upcoming Activities",children:u.length>0?u.map((ne,Se)=>n.jsx(dFe,{...ne},ne.id||Se)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No upcoming activities"})})]})]})]})},jA=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Vendor"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Delete"}],CA={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",parent_company:"",status:"PROSPECT",territory_id:"",assigned_to:""},Dr=e=>e?e.toUpperCase():"",SA=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",mFe=e=>{switch(Dr(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},fFe=e=>{switch(Dr(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}};function hFe(){const e=jt(),{user:t}=qt(),a=t?.role==="Sales";h.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[s,r]=h.useState(!1),[i,o]=h.useState(!1),[l,c]=h.useState(!1),[u,d]=h.useState(null),[f,p]=h.useState(null),[x,y]=h.useState(CA),[N,v]=h.useState(null),[j,w]=h.useState([]),[S,_]=h.useState(!1),[E,T]=h.useState([]),[A,L]=h.useState(null),[M,F]=h.useState([]),[$,D]=h.useState([]),[q,G]=h.useState("Filter by Status"),[U,V]=h.useState(""),[Z,Y]=h.useState(null),[le,_e]=h.useState(!1),[te,ae]=h.useState(1),[ye,Ne]=h.useState(10),[he,ve]=h.useState("Overview"),[ne,Se]=h.useState(""),[de,ke]=h.useState(!1),[Te,pe]=h.useState([]),[ze,Pe]=h.useState({}),[We,tt]=h.useState(null);h.useEffect(()=>{s&&!i&&a&&t&&!x.assigned_to&&(y(X=>({...X,assigned_to:t.id})),L(t))},[s,i,a,t,x.assigned_to]);const{comments:lt,addComment:Ie,refresh:rt}=ka({relatedType:"account",relatedId:N?.id});h.useEffect(()=>{N?.id&&rt()},[N?.id,rt]);const He=h.useCallback(async(X=null)=>{_(!0);try{const k=await se.get("/accounts/admin/fetch-all"),xe=[...Array.isArray(k.data)?k.data:[]].sort((Ae,Ue)=>{const Ge=Ae?.created_at||Ae?.updated_at||0,ct=Ue?.created_at||Ue?.updated_at||0;return new Date(ct)-new Date(Ge)});if(w(xe),X){const Ae=xe.find(Ue=>Ue.id===X);v(Ae||null)}}catch(k){console.error(k),w([]),k.response?.status===403?W.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):W.error("Failed to fetch accounts. Please try again later.")}finally{_(!1)}},[v]),Ke=h.useCallback(async()=>{try{const X=await se.get("/users/all");T(Array.isArray(X.data)?X.data:[])}catch(X){console.error(X),X.response?.status===403&&W.warn("Unable to load users for assignment (permission denied).")}},[]),Je=h.useCallback(async()=>{try{const X=await se.get("/territories/fetch");F(Array.isArray(X.data)?X.data:[])}catch(X){console.error(X),X.response?.status===403&&W.warn("Unable to load territories (permission denied).")}},[]),Oe=h.useCallback(async()=>{try{const X=await se.get("/accounts/admin/parent-companies");D(Array.isArray(X.data)?X.data:[])}catch(X){console.error(X),X.response?.status===403&&W.warn("Unable to load parent companies (permission denied).")}},[]),Ce=h.useCallback(async X=>{try{const k=await se.get(`/activities/accounts/${X}`);Pe(k.data&&typeof k.data=="object"?k.data:{})}catch(k){console.error(k),k.response?.status===404&&(console.warn("No activities found for this account."),Pe({}))}},[]);h.useEffect(()=>{He(),Ke(),Je(),Oe()},[He,Ke,Je,Oe]),h.useEffect(()=>{N&&Se(Dr(N.status)||"PROSPECT")},[N]);const fe=h.useMemo(()=>{const X=U.trim().toLowerCase(),k=q.trim().toUpperCase();return j.filter(B=>{if(!(t?.role==="Admin"||t?.role==="CEO"||t?.role==="MANAGER"||t?.role==="GROUP MANAGER")&&B.status?.toUpperCase()==="INACTIVE")return!1;const Ae=[B?.name,B?.website,B?.industry,B?.territory?.name,B?.phone_number],Ue=X===""||Ae.some(ct=>ct==null?!1:ct.toString().toLowerCase().includes(X)),Ge=k==="FILTER BY STATUS"||Dr(B.status)===k;return Ue&&Ge})},[j,U,q,t]),ue=h.useMemo(()=>fe.length,[fe]),H=h.useMemo(()=>fe.filter(X=>X.status?.toLowerCase()==="customer").length,[fe]),K=h.useMemo(()=>fe.filter(X=>X.status?.toLowerCase()==="prospect").length,[fe]),we=h.useMemo(()=>fe.filter(X=>X.status?.toLowerCase()==="partner").length,[fe]),Me=h.useMemo(()=>fe.filter(X=>X.status?.toLowerCase()==="active").length,[fe]),ce=h.useMemo(()=>fe.filter(X=>X.status?.toLowerCase()==="inactive").length,[fe]),oe=h.useMemo(()=>fe.filter(X=>X.status?.toLowerCase()==="former").length,[fe]),De=h.useMemo(()=>[{title:"Total",value:ue,icon:ra,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:H,icon:Io,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:K,icon:Kn,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:we,icon:nn,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:Me,icon:Io,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:ce,icon:$o,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:oe,icon:$o,color:"text-orange-600",bgColor:"bg-orange-100"}],[ue,H,K,we,Me,ce,oe]),$e=Math.max(1,Math.ceil(fe.length/ye)||1);h.useEffect(()=>{ae(1)},[U,q]),h.useEffect(()=>{ae(X=>{const k=Math.max(1,Math.ceil(fe.length/ye)||1);return X>k?k:X})},[fe.length,ye]);const Xe=h.useMemo(()=>{const X=(te-1)*ye;return fe.slice(X,X+ye)},[fe,te,ye]),Ze=X=>{if(X.target.checked){const k=Xe.filter(B=>B.assigned_accs?.id===t?.id&&B.acc_creator?.id===t?.id).map(B=>B.id);pe(k)}else pe([])},mt=X=>{pe(k=>k.includes(X)?k.filter(B=>B!==X):[...k,X])},nt=async()=>{if(Te.length===0)return;const X=t?.role==="Admin"||t?.role==="CEO"||t?.role==="MANAGER"||t?.role==="GROUP MANAGER",k=X?"delete":"archive",B=X?"This action cannot be undone.":"These accounts will be hidden from your view but admins can still see them.",xe=!X;Y({title:`${k.charAt(0).toUpperCase()+k.slice(1)} Accounts`,message:n.jsxs("span",{children:["Are you sure you want to ",k," ",n.jsx("span",{className:"font-semibold",children:Te.length})," selected accounts? ",B]}),confirmLabel:`${k.charAt(0).toUpperCase()+k.slice(1)} ${Te.length} account(s)`,cancelLabel:"Cancel",variant:"danger",icon:xe?Zt:null,isArchive:xe,action:{type:"bulk-delete",accountIds:Te}})};fe.length===0||(te-1)*ye+1,Math.min(te*ye,fe.length);const Nt=()=>ae(X=>Math.max(X-1,1)),wt=()=>ae(X=>Math.min(X+1,$e)),Tt=X=>{v(X),ve("Overview"),Se(Dr(X?.status)||"PROSPECT")},Re=()=>v(null),me=X=>{X.target.id==="accountModalBackdrop"&&!le&&Re()},ie=()=>{r(!1),o(!1),p(null),y(CA),c(!1),L(null)},Fe=X=>{X.target.id==="modalBackdrop"&&ie()},Le=X=>X?new Date(X).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",be=X=>{const{name:k,value:B}=X.target;y(xe=>({...xe,[k]:B}))},ee=()=>{y(CA),o(!1),p(null),r(!0)},O=X=>{v(null);let k=null;X.assigned_accs&&(k=E.find(B=>B.id===X.assigned_accs.id),k||(k=X.assigned_accs)),L(k),y({name:X.name||"",website:X.website||"",phone_number:X.phone_number||"",billing_address:X.billing_address||"",shipping_address:X.shipping_address||"",parent_company:X.parent_company||"",industry:X.industry||"",status:Dr(X.status)||"PROSPECT",territory_id:X.territory?.id?String(X.territory.id):"",assigned_to:X.assigned_accs?.id?String(X.assigned_accs.id):""}),o(!0),p(X.id),r(!0)},z=X=>{if(!X)return;const k=t?.role==="Admin"||t?.role==="CEO"||t?.role==="MANAGER"||t?.role==="GROUP MANAGER",B=k?"delete":"archive",xe=k?"This action cannot be undone.":"This account will be hidden from your view but admins can still see it.",Ae=!k;Y({title:`${B.charAt(0).toUpperCase()+B.slice(1)} Account`,message:n.jsxs("span",{children:["Are you sure you want to ",B," the account"," ",n.jsx("span",{className:"font-semibold",children:X.name}),"? ",xe]}),confirmLabel:`${B.charAt(0).toUpperCase()+B.slice(1)} Account`,cancelLabel:"Cancel",variant:"danger",icon:Ae?Zt:null,isArchive:Ae,action:{type:"delete",targetId:X.id,name:X.name}})},I=async()=>{if(!Z?.action){Y(null);return}const{action:X}=Z,{type:k,payload:B,targetId:xe,name:Ae}=X;_e(!0);try{if(k==="create"){c(!0);const Ue=await se.post("/accounts/admin",B);Oe(),W.success(`Account "${Ae}" created successfully.`);const Ge=N?.id||null;ie(),await He(Ge),!N&&Ue.data?.id}else if(k==="update"){if(!xe)throw new Error("Missing account identifier for update.");c(!0),await se.put(`/accounts/admin/${xe}`,B),W.success(`Account "${Ae}" updated successfully.`);const Ue=N?.id&&N.id===xe?xe:null;ie(),await He(Ue),N?.id===xe&&v(null)}else if(k==="delete"){if(!xe)throw new Error("Missing account identifier for deletion.");const Ue=N?.id;d(xe);const ct=t?.role==="Admin"||t?.role==="CEO"||t?.role==="MANAGER"||t?.role==="GROUP MANAGER"?`Account "${Ae}" deleted successfully.`:`Account "${Ae}" archived successfully.`;await se.delete(`/accounts/admin/${xe}`),W.success(ct),await He(Ue&&Ue!==xe?Ue:null),Ue===xe&&v(null)}else if(k==="bulk-delete"){const{accountIds:Ue}=X,ct=t?.role==="Admin"||t?.role==="CEO"||t?.role==="MANAGER"||t?.role==="GROUP MANAGER"?"deleted":"archived";await se.delete("/accounts/admin/bulk-delete",{data:{account_ids:Ue}}),W.success(`Successfully ${ct} ${Ue.length} accounts`),pe([]),await He()}}catch(Ue){console.error(Ue);const Ge=k==="create"?"Failed to create account. Please review the details and try again.":k==="update"?"Failed to update account. Please review the details and try again.":k==="bulk-delete"?"Failed to delete selected accounts.":"Failed to delete account. Please try again.",ct=Ue.response?.data?.detail||Ge;W.error(ct),(k==="create"||k==="update")&&c(!1),k==="delete"&&d(null)}finally{(k==="create"||k==="update")&&c(!1),k==="delete"&&d(null),_e(!1),Y(null)}},Q=()=>{le||Y(null)},ge=async()=>{if(!N||!ne)return;const X=Dr(ne),k=Dr(N.status);if(X!==k){ke(!0);try{await se.put(`/accounts/admin/${N.id}`,{status:X}),W.success(`Account status updated to ${SA(X)}`),w(B=>B.map(xe=>xe.id===N.id?{...xe,status:X}:xe)),v(null)}catch(B){console.error(B);const xe=B.response?.data?.detail||"Failed to update account status. Please try again.";W.error(xe)}finally{ke(!1)}}},[re,Ee]=h.useState(!1),Qe=X=>{X.preventDefault(),Ee(!0);const k=x.name.trim();if(!k){W.error("Account name is required.");return}if(!x.assigned_to){W.error("Assigned To is required.");return}const xe={name:k,website:x.website?.trim()||null,phone_number:x.phone_number?.trim()||null,billing_address:x.billing_address?.trim()||null,shipping_address:x.shipping_address?.trim()||null,industry:x.industry?.trim()||null,parent_company:x.parent_company?.trim()||null,status:x.status||"PROSPECT",territory_id:x.territory_id?Number(x.territory_id):null,assigned_to:x.assigned_to?Number(x.assigned_to):null},Ae=i&&f?"update":"create";Y({title:Ae==="create"?"Confirm New Account":"Confirm Update",message:Ae==="create"?n.jsxs("span",{children:["Are you sure you want to create the account"," ",n.jsx("span",{className:"font-semibold",children:k}),"?"]}):n.jsxs("span",{children:["Save changes to the account"," ",n.jsx("span",{className:"font-semibold",children:k}),"?"]}),confirmLabel:Ae==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:Ae,payload:xe,targetId:f||null,name:k}})},gt=[{label:"Filter by Status",value:"Filter by Status"},...jA.map(X=>({label:X.label,value:X.value}))],Ct=Z?.action?.type==="delete"?Z.action.targetId:null,kt=N&&(u===N.id||Ct===N.id),Dt=N&&u===N.id,on=N?mFe(N.status):"",Qn=N?n.jsx("div",{id:"accountModalBackdrop",onClick:me,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:X=>X.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),n.jsx("button",{onClick:Re,className:"text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Xn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:N.name}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${on}`,children:SA(N.status)})]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:N.assigned_accs&&N.assigned_accs.id===t?.id&&N.acc_creator&&N.acc_creator.id===t?.id&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>O(N),disabled:Z?.action?.type==="update"&&Z.action.targetId===N.id,children:[n.jsx(ga,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>z(N),disabled:!!kt,children:Dt?"Archiving...":n.jsxs(n.Fragment,{children:[n.jsx(Zt,{className:"mr-2"}),"Archive"]})})]})})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(X=>n.jsx("button",{onClick:()=>ve(X),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${he===X?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:X},X))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[he==="Overview"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Website:"}),n.jsx("p",{children:N.website?n.jsx("a",{href:N.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:N.website}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Industry:"}),n.jsx("p",{children:N.industry||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Parent Company:"}),n.jsx("p",{children:N.parent_company||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:N.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:N.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Billing Address:"}),n.jsx("p",{children:N.billing_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),n.jsx("p",{children:N.shipping_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:N.assigned_accs?`${N.assigned_accs.first_name} ${N.assigned_accs.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:N.acc_creator?`${N.acc_creator.first_name} ${N.acc_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:Le(N.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:Le(N.updated_at)||"N/A"})]})]}),n.jsx(Ta,{comments:lt,onAddComment:Ie})]}),he==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:j.notes||"No notes available."})]})]}),he==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[ze.tasks&&ze.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>tt(We==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",ze.tasks.length,")"]})]}),We==="tasks"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),We==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ze.tasks.map((X,k)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/tasks",{state:{taskID:X.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:X.subject||X.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:X.description||"No description"}),X.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",X.assigned_to.first_name," ",X.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Le(X.due_date||X.created_at)})]},`task-${k}`))})]}),ze.meetings&&ze.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>tt(We==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Pt,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",ze.meetings.length,")"]})]}),We==="meetings"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),We==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ze.meetings.map((X,k)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/meetings",{state:{meetingID:X.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Pt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:X.subject||X.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:X.description||X.location||"No description"}),X.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",X.host.first_name," ",X.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Le(X.start_time||X.created_at)})]},`meeting-${k}`))})]}),ze.calls&&ze.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>tt(We==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ot,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",ze.calls.length,")"]})]}),We==="calls"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),We==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ze.calls.map((X,k)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/calls",{state:{callID:X.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Ot,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:X.subject||X.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:X.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Le(X.call_time||X.created_at)})]},`call-${k}`))})]}),ze.contacts&&ze.contacts.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>tt(We==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(nn,{className:"text-teal-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",ze.contacts.length,")"]})]}),We==="contacts"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),We==="contacts"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ze.contacts.map((X,k)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/contacts",{state:{contactID:X.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-teal-600 mt-1",children:n.jsx(nn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[X.first_name?`${X.first_name} `:"",X.last_name]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:X.title||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Le(X.created_at)})]},`contact-${k}`))})]}),ze.deals&&ze.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>tt(We==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(tn,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",ze.deals.length,")"]})]}),We==="deals"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),We==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ze.deals.map((X,k)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/deals",{state:{dealID:X.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(tn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[X.deal_id?X.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",X.name||X.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:X.stage||X.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Le(X.close_date||X.created_at)})]},`deal-${k}`))})]}),ze.quotes&&ze.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>tt(We==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(fn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",ze.quotes.length,")"]})]}),We==="quotes"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),We==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ze.quotes.map((X,k)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/quotes",{state:{quoteID:X.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(fn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(X.quote_id?X.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:X.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Le(X.presented_date)||""})]},`quote-${k}`))})]}),(!ze||(!ze.tasks||ze.tasks.length===0)&&(!ze.meetings||ze.meetings.length===0)&&(!ze.calls||ze.calls.length===0)&&(!ze.quotes||ze.quotes.length===0)&&(!ze.deals||ze.deals.length===0)&&(!ze.contacts||ze.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/sales/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${N.name}`,relatedType1:"Account",relatedTo1:String(N.id),relatedType2:null,relatedTo2:null,assigned_to:N.assigned_accs?.id?String(N.assigned_accs.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Ot,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/sales/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${N.name}`,relatedType1:"Account",relatedTo1:String(N.id),relatedType2:null,relatedTo2:null,assigned_to:N.assigned_accs?.id?String(N.assigned_accs.id):"",status:"Planned"}}}),children:[n.jsx(Pt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/sales/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${N.name}`,relatedType1:"Account",relatedTo1:String(N.id),relatedType2:null,relatedTo2:null,assignedTo:N.assigned_accs?.id?String(N.assigned_accs.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:ne||Dr(N?.status)||"PROSPECT",onChange:X=>Se(X.target.value),children:jA.map(X=>n.jsx("option",{value:X.value,children:X.label},X.value))}),n.jsx("button",{onClick:ge,disabled:de||!ne||Dr(ne)===Dr(N?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${de||!ne||Dr(ne)===Dr(N?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:de?"Updating...":"Update"})]})]})]})]})]})}):null,ia=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[S&&n.jsx(Wt,{message:"Loading accounts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(ra,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{ee(),Ee(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(xn,{className:"mr-2"})," Add Account"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:De.map(X=>n.jsx(gFe,{...X},X.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Vt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search accounts",value:U,onChange:X=>V(X.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:q,onChange:X=>G(X.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:gt.map(X=>n.jsx("option",{value:X.value,children:X.label},X.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-center w-12",children:n.jsx("input",{type:"checkbox",checked:Xe.length>0&&Xe.filter(X=>X.assigned_accs?.id===t?.id&&X.acc_creator?.id===t?.id).every(X=>Te.includes(X.id))&&Xe.some(X=>X.assigned_accs?.id===t?.id&&X.acc_creator?.id===t?.id),onChange:Ze,className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Industry"}),n.jsx("th",{className:"py-3 px-4",children:"Territory"}),n.jsx("th",{className:"py-3 px-4",children:"Phone"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:Te.length>0?n.jsx("button",{onClick:nt,className:"text-orange-600 hover:text-orange-800 transition p-1 rounded-full hover:bg-orange-50",title:`Archive ${Te.length} selected accounts`,children:n.jsx(Zt,{size:18})}):""})]})}),n.jsx("tbody",{children:S?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"Loading accounts..."})}):fe.length>0?Xe.map(X=>n.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>{Tt(X),Ce(X.id)},children:[n.jsx("td",{className:"py-3 px-4 text-center",children:X.assigned_accs?.id===t?.id&&X.acc_creator?.id===t?.id?n.jsx("input",{type:"checkbox",checked:Te.includes(X.id),onChange:()=>mt(X.id),onClick:k=>k.stopPropagation(),className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"}):null}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:X.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:X.website||"--"})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${fFe(X.status)}`,children:SA(X.status)})}),n.jsx("td",{className:"py-3 px-4 text-sm",children:X.industry||"--"}),n.jsx("td",{className:"py-3 px-4 text-sm",children:X.territory?.name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(Ot,{className:"text-gray-500"}),n.jsx("span",{children:X.phone_number||"--"})]})}),n.jsx("td",{className:"py-3 px-4"})]},X.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No accounts found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:fe.length,pageSize:ye,currentPage:te,onPrev:Nt,onNext:wt,onPageSizeChange:X=>{Ne(X),ae(1)},pageSizeOptions:[10,20,30,40,50],label:"accounts"})]}),Be=s?n.jsx("div",{id:"modalBackdrop",onClick:Fe,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto hide-scrollbar max-h-[90vh]",onClick:X=>X.stopPropagation(),children:[n.jsx("button",{onClick:()=>{ie(),Ee(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:l||le,children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:i?"Edit Account":"Add New Account"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:Qe,noValidate:!0,children:[n.jsx("div",{className:"md:col-span-2",children:n.jsx(ef,{label:"Name",name:"name",value:x.name,onChange:be,placeholder:"Company name",required:!0,isSubmitted:re})}),n.jsx(c8,{label:"Parent Company",value:x.parent_company,onChange:X=>{y(k=>({...k,parent_company:X}))},items:$.map(X=>({id:X,name:X})),getLabel:X=>X?.name||"",placeholder:"Select parent company...",disabled:l}),n.jsx(ef,{label:"Website",name:"website",value:x.website,onChange:be,placeholder:"https://example.com",disabled:l}),n.jsx(ef,{label:"Phone Number",name:"phone_number",value:x.phone_number,onChange:be,placeholder:"09xx xxx xxxx",type:"tel",disabled:l}),n.jsx(ef,{label:"Industry",name:"industry",value:x.industry,onChange:be,placeholder:"Industry",disabled:l}),n.jsx(ef,{label:"Billing Address",name:"billing_address",value:x.billing_address,onChange:be,placeholder:"Billing address",disabled:l}),n.jsx(ef,{label:"Shipping Address",name:"shipping_address",value:x.shipping_address,onChange:be,placeholder:"Shipping address",disabled:l}),n.jsx(l8,{label:"Status",name:"status",value:x.status,onChange:be,options:[{value:"",label:"Select status"},...jA],required:!0,disabled:l}),n.jsx(c8,{label:"Assigned To",value:x.assigned_to,onChange:X=>{const k=E.find(B=>String(B.id)===String(X));L(k),y(B=>({...B,assigned_to:X}))},items:E||[],getLabel:X=>`${X?.first_name??""} ${X?.last_name??""} (${X?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:re,disabled:l||E.length===0||a}),n.jsx("div",{className:"md:col-span-2",children:n.jsx(l8,{label:"Territory",name:"territory_id",value:x.territory_id||"",onChange:be,options:[{value:"",label:A?A.assigned_territory&&A.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"},...A&&A.assigned_territory&&A.assigned_territory.map(X=>({value:String(X.id),label:X.name}))||[]],disabled:l||!A||!A.assigned_territory||A.assigned_territory.length===0})}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{ie(),Ee(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:l||le,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:l||le,children:l?"Saving...":i?"Update Account":"Save Account"})]})]})]})}):null,_t=Z?n.jsx(xFe,{open:!0,title:Z.title,message:Z.message,confirmLabel:Z.confirmLabel,cancelLabel:Z.cancelLabel,variant:Z.variant,onConfirm:I,onCancel:Q,loading:le,icon:Z.icon,isArchive:Z.isArchive}):null;return n.jsxs(n.Fragment,{children:[ia,Qn,Be,_t]})}function gFe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function ef({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:u=!1}){const d=u&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function l8({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(l=>n.jsx("option",{value:l.value,disabled:l.value==="",children:l.label},l.value))})]})}function c8({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:u=!1,allowFreeText:d=!1}){const f=u&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(pFe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:f,allowFreeText:d})]})}function pFe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1,allowFreeText:c=!1}){const[u,d]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),y=e.find(j=>String(j.id)===String(t)),N=y?s(y):t,v=h.useMemo(()=>{const j=f.trim().toLowerCase();return(j?e.filter(S=>(s(S)||"").toLowerCase().includes(j)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const j=w=>{x.current&&!x.current.contains(w.target)&&d(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]),h.useEffect(()=>{u||p("")},[u]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:u?f:N,placeholder:r,onFocus:()=>!i&&d(!0),onChange:j=>{p(j.target.value),u||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),u&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsxs("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:[c&&f.trim()&&!v.some(j=>s(j).toLowerCase()===f.trim().toLowerCase())&&n.jsxs("button",{type:"button",onClick:()=>{a(f.trim()),d(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-green-50 bg-blue-50 font-medium text-blue-700",children:['+ Add "',f.trim(),'" as new parent company']}),v.length>0?v.map(j=>{const w=String(j.id),S=s(j),_=String(t)===w;return n.jsx("button",{type:"button",onClick:()=>{a(w),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${_?"bg-blue-50":""}`,children:S||"--"},w)}):!c||!f.trim()?n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"}):null]}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function xFe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c,icon:u=null,isArchive:d=!1}){if(!e)return null;const f=d?"bg-orange-500 hover:bg-orange-600 border border-orange-400":i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsxs("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 flex items-center justify-center ${f}`,disabled:o,children:[u&&n.jsx(u,{className:"mr-2",size:18}),o?"Processing...":s]})]})]})})}const _A={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:""},yl=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),Oi=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function yFe(){const e=jt(),t=Jt();h.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[a,s]=h.useState([]),[r,i]=h.useState(!1),[o,l]=h.useState([]),[c,u]=h.useState([]),[d,f]=h.useState(null),[p,x]=h.useState(!1),[y,N]=h.useState(!1),[v,j]=h.useState(!1),[w,S]=h.useState(null),[_,E]=h.useState(!1),[T,A]=h.useState(null),[L,M]=h.useState(_A),[F,$]=h.useState(""),[D,q]=h.useState("Filter by Accounts"),[G,U]=h.useState(null),[V,Z]=h.useState("Overview"),[Y,le]=h.useState(1),[_e,te]=h.useState(10),[ae,ye]=h.useState({}),[Ne,he]=h.useState(null),[ve,ne]=h.useState(null),[Se,de]=h.useState(null),[ke,Te]=h.useState([]),{comments:pe,addComment:ze,refresh:Pe}=ka({relatedType:"contact",relatedId:d?.id});h.useEffect(()=>{d?.id&&Pe()},[d?.id,Pe]),h.useEffect(()=>{const z=t.state?.contactID;z&&(de(z),e(t.pathname,{replace:!0,state:{}}))},[t,e]),h.useEffect(()=>{if(Se&&a.length>0&&!r){const z=a.find(I=>I.id===Se);z?f(z):W.error("Contact not found."),de(null)}},[Se,a,r]),h.useEffect(()=>{async function z(){try{const I=await se.get("/auth/me");ne(I.data)}catch(I){console.error("Failed to fetch current user",I)}}z()},[]);const We=h.useCallback(async(z=null)=>{i(!0);try{const I=await se.get("/contacts/admin/fetch-all"),ge=[...Array.isArray(I.data)?I.data:[]].sort((re,Ee)=>{const Qe=re?.created_at||re?.updated_at||0,gt=Ee?.created_at||Ee?.updated_at||0;return new Date(gt)-new Date(Qe)});if(s(ge),z){const re=ge.find(Ee=>Ee.id===z);f(re||null)}}catch(I){console.error(I),s([]),I.response?.status===403?W.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):W.error("Failed to fetch contacts. Please try again later.")}finally{i(!1)}},[f]),tt=h.useCallback(async()=>{try{const z=await se.get("/accounts/admin/fetch-all"),Q=[...Array.isArray(z.data)?z.data:[]].sort((ge,re)=>(ge?.name||"").localeCompare(re?.name||""));l(Q)}catch(z){console.error(z),l([]),z.response?.status===403&&W.warn("Unable to load accounts (permission denied).")}},[]),lt=h.useCallback(async()=>{try{const z=await se.get("/users/all"),Q=[...Array.isArray(z.data)?z.data:[]].sort((ge,re)=>yl(ge).localeCompare(yl(re)));u(Q)}catch(z){console.error(z),u([]),z.response?.status===403&&W.warn("Unable to load users for assignment (permission denied).")}},[]),Ie=h.useCallback(async z=>{try{const I=await se.get(`/activities/contact/${z}`);ye(I.data&&typeof I.data=="object"?I.data:{})}catch(I){console.error(I),I.response?.status===404&&(console.warn("No activities found for this account."),ye({}))}},[]);h.useEffect(()=>{We(),tt(),lt()},[We,tt,lt]);const rt=h.useMemo(()=>{const z=new Map;o.forEach(Q=>{Q?.id&&Q?.name&&z.set(String(Q.id),Q.name)}),a.forEach(Q=>{Q?.account_id&&Q?.account?.name&&z.set(String(Q.account_id),Q.account.name)});const I=Array.from(z.entries()).sort((Q,ge)=>Q[1].localeCompare(ge[1])).map(([Q,ge])=>({value:Q,label:ge}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...I]},[o,a]),He=h.useMemo(()=>{const z=F.trim().toLowerCase(),I=D.trim();return a.filter(Q=>{const ge=[Q?.first_name,Q?.last_name,Q?.email,Q?.title,Q?.department,Q?.account?.name,Q?.account?.status,Q?.work_phone,Q?.mobile_phone_1,Q?.mobile_phone_2,Q?.assigned_contact?.first_name,Q?.assigned_contact?.last_name,Q?.contact_creator?.first_name,Q?.contact_creator?.last_name,Q?.notes,Oi(Q?.created_at),Oi(Q?.updated_at)],re=z===""||ge.some(Qe=>Qe==null?!1:Qe.toString().toLowerCase().includes(z)),Ee=I==="Filter by Accounts"||String(Q.account_id)===I;return re&&Ee})},[a,F,D]),Ke=Math.max(1,Math.ceil(He.length/_e)||1);h.useEffect(()=>{le(1)},[F,D]),h.useEffect(()=>{le(z=>{const I=Math.max(1,Math.ceil(He.length/_e)||1);return z>I?I:z})},[He.length,_e]);const Je=h.useMemo(()=>{const z=(Y-1)*_e;return He.slice(z,z+_e)},[He,Y,_e]),Oe=()=>le(z=>Math.max(z-1,1)),Ce=()=>le(z=>Math.min(z+1,Ke)),fe=h.useMemo(()=>{if(!y||!T)return o;const z=a.find(Q=>Q.id===T);return!z||!z.account||o.some(Q=>Q.id===z.account.id)?o:[...o,z.account]},[o,y,T,a]),ue=h.useCallback(()=>{x(!1),N(!1),A(null),M(_A),j(!1),Ze(!1)},[]),H=z=>{z.target.id==="modalBackdrop"&&!v&&!_&&ue()},K=z=>{const{name:I,value:Q}=z.target;M(ge=>({...ge,[I]:Q}))},we=()=>{M(_A),N(!1),A(null),x(!0),ve?.role==="Sales"&&M(z=>({...z,assigned_to:ve.id}))},Me=async z=>{if(!z)return;const I=await se.get(`/accounts/get/${z.account_id}`);M({first_name:z.first_name||"",last_name:z.last_name||"",account_id:I.data.id?I.data.id:"",title:z.title||"",department:z.department||"",email:z.email||"",work_phone:z.work_phone||"",mobile_phone_1:z.mobile_phone_1||"",mobile_phone_2:z.mobile_phone_2||"",notes:z.notes||"",assigned_to:z.assigned_to?String(z.assigned_to):""}),N(!0),A(z.id),x(!0),f(null)},ce=z=>{if(!z)return;const I=yl(z)||"this contact",Q=ve?.role==="Admin"||ve?.role==="CEO"||ve?.role==="MANAGER"||ve?.role==="GROUP MANAGER",ge=Q?"delete":"archive",re=Q?"This action cannot be undone.":"This contact will be hidden from your view but admins can still see it.",Ee=!Q;S({title:`${ge.charAt(0).toUpperCase()+ge.slice(1)} Contact`,message:n.jsxs("span",{children:["Are you sure you want to ",ge," ",n.jsx("span",{className:"font-semibold",children:I}),"? ",re]}),confirmLabel:`${ge.charAt(0).toUpperCase()+ge.slice(1)} Contact`,cancelLabel:"Cancel",variant:"danger",icon:Ee?Zt:null,isArchive:Ee,action:{type:"delete",targetId:z.id,name:I}})},oe=()=>{const z=Je.filter(I=>I.assigned_contact?.id===ve?.id&&I.contact_creator?.id===ve?.id);ke.length===z.length&&z.length>0?Te([]):Te(z.map(I=>I.id))},De=z=>{Te(I=>I.includes(z)?I.filter(Q=>Q!==z):[...I,z])},$e=async()=>{if(ke.length===0)return;const z=ve?.role==="Admin"||ve?.role==="CEO"||ve?.role==="MANAGER"||ve?.role==="GROUP MANAGER",I=z?"delete":"archive",Q=z?"This action cannot be undone.":"These contacts will be hidden from your view but admins can still see them.",ge=!z;S({title:`${I.charAt(0).toUpperCase()+I.slice(1)} Contacts`,message:n.jsxs("span",{children:["Are you sure you want to ",I," ",n.jsx("span",{className:"font-semibold",children:ke.length})," selected contacts? ",Q]}),confirmLabel:`${I.charAt(0).toUpperCase()+I.slice(1)} ${ke.length} contact(s)`,cancelLabel:"Cancel",variant:"danger",icon:ge?Zt:null,isArchive:ge,action:{type:"bulk-delete",contactIds:ke}})},[Xe,Ze]=h.useState(!1),mt=z=>{z.preventDefault(),Ze(!0);const I=L.first_name.trim(),Q=L.last_name.trim();if(!I||!Q){W.error("First name and last name are required.");return}if(!L.account_id){W.error("Account is required.");return}if(!L.assigned_to){W.error("Assigned To is required.");return}const re=L.email?.trim();if(!re){W.error("Email is required.");return}if(!re.includes("@")){W.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(re)){W.error("Please enter a valid email address.");return}const Qe={first_name:I,last_name:Q,account_id:Number(L.account_id),title:L.title?.trim()||null,department:L.department?.trim()||null,email:L.email?.trim().toLowerCase()||null,work_phone:L.work_phone?.trim()||null,mobile_phone_1:L.mobile_phone_1?.trim()||null,mobile_phone_2:L.mobile_phone_2?.trim()||null,notes:L.notes?.trim()||null,assigned_to:L.assigned_to?Number(L.assigned_to):null},gt=y&&T?"update":"create",Ct=`${I} ${Q}`.trim();S({title:gt==="create"?"Confirm New Contact":"Confirm Update",message:gt==="create"?n.jsxs("span",{children:["Are you sure you want to add"," ",n.jsx("span",{className:"font-semibold",children:Ct})," to your contacts?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:Ct}),"?"]}),confirmLabel:gt==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:gt,payload:Qe,targetId:T||null,name:Ct}})},nt=async()=>{if(!w?.action){S(null);return}const{action:z}=w,{type:I,payload:Q,targetId:ge,name:re}=z;E(!0);try{if(I==="create"){j(!0),await se.post("/contacts/admin",Q),W.success(`Contact "${re}" created successfully.`);const Ee=d?.id||null;ue(),await We(Ee)}else if(I==="update"){if(!ge)throw new Error("Missing contact identifier for update.");j(!0),await se.put(`/contacts/admin/${ge}`,Q),W.success(`Contact "${re}" updated successfully.`);const Ee=d?.id&&d.id===ge?ge:d?.id||null;ue(),await We(Ee),d?.id===ge&&f(null)}else if(I==="delete"){if(!ge)throw new Error("Missing contact identifier for deletion.");const Ee=d?.id;U(ge);const gt=ve?.role==="Admin"||ve?.role==="CEO"||ve?.role==="MANAGER"||ve?.role==="GROUP MANAGER"?`Contact "${re}" deleted successfully.`:`Contact "${re}" archived successfully.`;await se.delete(`/contacts/admin/${ge}`),W.success(gt),await We(Ee&&Ee!==ge?Ee:null),Ee===ge&&f(null)}else if(I==="bulk-delete"){const{contactIds:Ee}=z;if(!Ee||Ee.length===0)throw new Error("No contacts provided for bulk deletion.");const gt=ve?.role==="Admin"||ve?.role==="CEO"||ve?.role==="MANAGER"||ve?.role==="GROUP MANAGER"?`Successfully deleted ${Ee.length} contact(s).`:`Successfully archived ${Ee.length} contact(s).`;await se.delete("/contacts/admin/bulk-delete",{data:{contact_ids:Ee}}),W.success(gt),Te([]),await We(),f(null)}}catch(Ee){console.error(Ee);const Qe=I==="create"?"Failed to create contact. Please review the details and try again.":I==="update"?"Failed to update contact. Please review the details and try again.":I==="bulk-delete"?"Failed to delete contacts. Please try again.":"Failed to delete contact. Please try again.",gt=Ee.response?.data?.detail||Qe;W.error(gt)}finally{(I==="create"||I==="update")&&j(!1),I==="delete"&&U(null),E(!1),S(null)}},Nt=()=>{_||S(null)},wt=z=>{f(z),Z("Overview")},Tt=()=>f(null),Re=z=>{z.target.id==="contactModalBackdrop"&&!_&&Tt()},me=w?.action?.type==="delete"?w.action.targetId:null,ie=d&&(G===d.id||me===d.id),Fe=d&&G===d.id,Le=d?n.jsx("div",{id:"contactModalBackdrop",onClick:Re,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:z=>z.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),n.jsx("button",{onClick:Tt,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Xn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:yl(d)||"Unnamed contact"})}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:d.assigned_contact&&d.assigned_contact.id===ve?.id&&d.contact_creator&&d.contact_creator.id===ve?.id&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Me(d),disabled:_||w?.action?.type==="update"&&w.action.targetId===d.id,children:[n.jsx(ga,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>ce(d),disabled:!!ie,children:Fe?"Archiving...":n.jsxs(n.Fragment,{children:[n.jsx(Zt,{className:"mr-2"}),"Archive"]})})]})})]}),n.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:n.jsx("p",{className:"text-sm text-gray-500",children:d.account?.name||"No associated account"})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(z=>n.jsx("button",{onClick:()=>Z(z),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${V===z?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:z},z))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[V==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact Name:"}),n.jsx("p",{children:yl(d)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Title:"}),n.jsx("p",{children:d.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:d.email?n.jsx("a",{href:`mailto:${d.email}`,className:"text-blue-600 hover:underline break-all",children:d.email}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:d.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:d.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:d.assigned_contact?`${d.assigned_contact.first_name} ${d.assigned_contact.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:d.contact_creator?`${d.contact_creator.first_name} ${d.contact_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:Oi(d.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:Oi(d.updated_at)||"N/A"})]})]})}),V==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]}),n.jsx(Ta,{comments:pe,onAddComment:ze})]}),V==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[ae.tasks&&ae.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(Ne==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",ae.tasks.length,")"]})]}),Ne==="tasks"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),Ne==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ae.tasks.map((z,I)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:z.subject||z.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:z.description||"No description"}),z.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",z.assigned_to.first_name," ",z.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Oi(z.due_date||z.created_at)})]},`task-${I}`))})]}),ae.meetings&&ae.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(Ne==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Pt,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",ae.meetings.length,")"]})]}),Ne==="meetings"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),Ne==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ae.meetings.map((z,I)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Pt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:z.subject||z.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:z.description||z.location||"No description"}),z.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",z.host.first_name," ",z.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Oi(z.start_time||z.created_at)})]},`meeting-${I}`))})]}),ae.calls&&ae.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(Ne==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ot,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",ae.calls.length,")"]})]}),Ne==="calls"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),Ne==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ae.calls.map((z,I)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Ot,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:z.subject||z.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:z.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Oi(z.call_time||z.created_at)})]},`call-${I}`))})]}),ae.contacts&&ae.contacts.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(Ne==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(nn,{className:"text-teal-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",ae.contacts.length,")"]})]}),Ne==="contacts"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),Ne==="contacts"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ae.contacts.map((z,I)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-teal-600 mt-1",children:n.jsx(nn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[z.first_name?`${z.first_name} `:"",z.last_name]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:z.title||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Oi(z.created_at)})]},`contact-${I}`))})]}),ae.deals&&ae.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(Ne==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(tn,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",ae.deals.length,")"]})]}),Ne==="deals"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),Ne==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ae.deals.map((z,I)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(tn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[z.deal_id?z.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",z.name||z.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:z.stage||z.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Oi(z.close_date||z.created_at)})]},`deal-${I}`))})]}),ae.quotes&&ae.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(Ne==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(fn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",ae.quotes.length,")"]})]}),Ne==="quotes"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),Ne==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ae.quotes.map((z,I)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(fn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(z.quote_id?z.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:z.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Oi(z.presented_date)||""})]},`quote-${I}`))})]}),(!ae||(!ae.tasks||ae.tasks.length===0)&&(!ae.meetings||ae.meetings.length===0)&&(!ae.calls||ae.calls.length===0)&&(!ae.quotes||ae.quotes.length===0)&&(!ae.deals||ae.deals.length===0)&&(!ae.contacts||ae.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsx("div",{className:"flex flex-col gap-4",children:n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/sales/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${yl(d)||""}`.trim(),relatedType1:"Account",relatedTo1:d?.account_id?String(d.account_id):d?.account?.id?String(d.account.id):"",relatedType2:"Contact",relatedTo2:d?.id?String(d.id):"",assigned_to:d?.assigned_contact?.id?String(d.assigned_contact.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Ot,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const z=encodeURIComponent(d.email),I=encodeURIComponent(""),Q=encodeURIComponent(""),ge=`mailto:${z}?subject=${I}&body=${Q}`;window.location.href=ge},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(sa,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/sales/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${yl(d)||""}`.trim(),relatedType1:"Account",relatedTo1:d?.account_id?String(d.account_id):d?.account?.id?String(d.account.id):"",relatedType2:"Contact",relatedTo2:d?.id?String(d.id):"",assignedTo:d?.assigned_contact?.id?String(d.assigned_contact.id):"",status:"Planned"}}}),children:[n.jsx(Pt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/sales/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Task for ${yl(d)||""}`.trim(),relatedType1:"Account",relatedTo1:d?.account_id?String(d.account_id):d?.account?.id?String(d.account.id):"",relatedType2:"Contact",relatedTo2:d?.id?String(d.id):"",assignedTo:d?.assigned_contact?.id?String(d.assigned_contact.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]})})]})]})]})}):null,be=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&n.jsx(Wt,{message:"Loading contacts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(ra,{className:"mr-2 text-blue-600"})," Contacts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{we(),Ze(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(xn,{className:"mr-2"})," Add Contact"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Vt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search contacts",value:F,onChange:z=>$(z.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:D,onChange:z=>q(z.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:rt.map(z=>n.jsx("option",{value:z.value,children:z.label},z.value??z.label))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-center w-12",children:n.jsx("input",{type:"checkbox",checked:Je.length>0&&Je.filter(z=>z.assigned_contact?.id===ve?.id&&z.contact_creator?.id===ve?.id).every(z=>ke.includes(z.id))&&Je.some(z=>z.assigned_contact?.id===ve?.id&&z.contact_creator?.id===ve?.id),onChange:oe,className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),n.jsx("th",{className:"py-3 px-4",children:"Department"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Created"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:ke.length>0?n.jsx("button",{onClick:$e,className:"text-orange-600 hover:text-orange-800 transition p-1 rounded-full hover:bg-orange-50",title:`Archive ${ke.length} selected contacts`,children:n.jsx(Zt,{size:18})}):""})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"Loading contacts..."})}):He.length>0?Je.map(z=>{const I=[{Icon:sa,value:z.email,key:"email"},{Icon:Ot,value:z.work_phone,key:"work_phone"},{Icon:cd,value:z.mobile_phone_1,key:"mobile_phone_1"},{Icon:cd,value:z.mobile_phone_2,key:"mobile_phone_2"}].filter(Q=>!!Q.value);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",children:[n.jsx("td",{className:"py-3 px-4 align-top text-center",onClick:Q=>Q.stopPropagation(),children:z.assigned_contact&&z.assigned_contact.id===ve?.id&&z.contact_creator&&z.contact_creator.id===ve?.id?n.jsx("input",{type:"checkbox",checked:ke.includes(z.id),onChange:()=>De(z.id),className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300",onClick:Q=>Q.stopPropagation()}):null}),n.jsxs("td",{className:"py-3 px-4 align-top",onClick:()=>{wt(z),Ie(z.id)},children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:yl(z)||"--"}),n.jsx("div",{className:"text-xs text-gray-500",children:z.title||"No title"})]}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{wt(z),Ie(z.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[n.jsx(Gx,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"break-words",children:z.account?.name||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{wt(z),Ie(z.id)},children:I.length>0?n.jsx("div",{className:"space-y-1 text-gray-700",children:I.map(({Icon:Q,value:ge,key:re})=>{const Ee=xt.createElement(Q,{className:"text-gray-500 flex-shrink-0"});return n.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[Ee,n.jsx("span",{children:ge})]},re)})}):n.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{wt(z),Ie(z.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[n.jsx(tn,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:z.department||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{wt(z),Ie(z.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(nn,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:z.assigned_contact?`${z.assigned_contact.first_name} ${z.assigned_contact.last_name}`:"Unassigned"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{wt(z),Ie(z.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[n.jsx(Pt,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"text-xs",children:Oi(z.created_at)||"--"})]})})]},z.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No contacts found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:He.length,pageSize:_e,currentPage:Y,onPrev:Oe,onNext:Ce,onPageSizeChange:z=>{te(z),le(1)},pageSizeOptions:[10,20,30,40,50],label:"contacts"})]}),ee=p?n.jsx("div",{id:"modalBackdrop",onClick:H,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:z=>z.stopPropagation(),children:[n.jsx("button",{onClick:()=>{ue(),Ze(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:v||_,children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:y?"Edit Contact":"Add New Contact"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:mt,noValidate:!0,children:[n.jsx(Fc,{label:"First Name",name:"first_name",value:L.first_name,onChange:K,placeholder:"First name",required:!0,isSubmitted:Xe}),n.jsx(Fc,{label:"Last Name",name:"last_name",value:L.last_name,onChange:K,placeholder:"Last name",required:!0,isSubmitted:Xe}),n.jsx(d8,{label:"Account",value:L.account_id,onChange:z=>M(I=>({...I,account_id:z})),items:y?fe:o||[],getLabel:z=>z?.name??"",placeholder:"Search account...",disabled:v||(y?fe.length===0:o.length===0),required:!0,isSubmitted:Xe}),n.jsx(d8,{label:"Assigned To",value:L.assigned_to,onChange:z=>M(I=>({...I,assigned_to:z})),items:c||[],getLabel:z=>`${z?.first_name??""} ${z?.last_name??""} (${z?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:Xe,disabled:v||c.length===0||ve?.role==="Sales"}),n.jsx(Fc,{label:"Title",name:"title",value:L.title,onChange:K,placeholder:"Job title",disabled:v}),n.jsx(Fc,{label:"Department",name:"department",value:L.department,onChange:K,placeholder:"Department",disabled:v}),n.jsx(Fc,{label:"Email",name:"email",type:"email",value:L.email,onChange:K,placeholder:"example@email.com",required:!0,isSubmitted:Xe}),n.jsx(Fc,{label:"Work Phone",name:"work_phone",value:L.work_phone,onChange:K,placeholder:"09xx xxx xxxx",disabled:v}),n.jsx(Fc,{label:"Mobile Phone 1",name:"mobile_phone_1",value:L.mobile_phone_1,onChange:K,placeholder:"09xx xxx xxxx",disabled:v}),n.jsx(Fc,{label:"Mobile Phone 2",name:"mobile_phone_2",value:L.mobile_phone_2,onChange:K,placeholder:"09xx xxx xxxx",disabled:v}),n.jsx(vFe,{label:"Notes",name:"notes",value:L.notes,onChange:K,placeholder:"Additional details...",rows:3,disabled:v,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{ue(),Ze(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:v||_,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:v||_,children:v?"Saving...":y?"Update Contact":"Save Contact"})]})]})]})}):null,O=w?n.jsx(wFe,{open:!0,title:w.title,message:w.message,confirmLabel:w.confirmLabel,cancelLabel:w.cancelLabel,variant:w.variant,onConfirm:nt,onCancel:Nt,loading:_,icon:w.icon,isArchive:w.isArchive}):null;return n.jsxs(n.Fragment,{children:[be,Le,ee,O]})}function Fc({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:u=""}){const d=c&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${u}
        `})]})}function d8({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:u=!1}){const d=u&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bFe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:d})]})}function bFe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,u]=h.useState(!1),[d,f]=h.useState(""),p=h.useRef(null),x=e.find(v=>String(v.id)===String(t)),y=x?s(x):"",N=h.useMemo(()=>{const v=d.trim().toLowerCase();return(v?e.filter(w=>(s(w)||"").toLowerCase().includes(v)):e).slice(0,o)},[e,d,s,o]);return h.useEffect(()=>{const v=j=>{p.current&&!p.current.contains(j.target)&&u(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?d:y,placeholder:r,onFocus:()=>!i&&u(!0),onChange:v=>{f(v.target.value),c||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:N.length>0?N.map(v=>{const j=String(v.id),w=s(v),S=String(t)===j;return n.jsx("button",{type:"button",onClick:()=>{a(j),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},j)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function vFe({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function wFe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c,icon:u=null,isArchive:d=!1}){if(!e)return null;const f=d?"bg-orange-500 hover:bg-orange-600 border border-orange-400":i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsxs("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 flex items-center justify-center ${f}`,disabled:o,children:[u&&n.jsx(u,{className:"mr-2",size:18}),o?"Processing...":s]})]})]})})}const AA=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function oJ({lead:e,onBack:t,fetchLeads:a,onEdit:s,onArchive:r,setSelectedLead:i,relatedActs:o}){const l=jt(),{leadID:c}=Ho(),{user:u}=qt(),[d,f]=h.useState(e||null),[p,x]=h.useState("Overview"),[y,N]=h.useState(""),v=d?.status?.toUpperCase()==="QUALIFIED",[j,w]=h.useState(null),S=d&&u&&d.creator?.id===u.id,[_,E]=h.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[T,A]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[L,M]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),F=async()=>{try{if(e){f(e),N(e.status||"New");return}if(!c)return;const U=await se.get(`/leads/get/${c}`);f(U.data),N(U.data.status||"New"),E({name:U.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:U.data.territory?.id||null,assigned_to:U.data.assigned_to?.id||null,created_by:U.data.creator?.id||null}),A({last_name:U.data.last_name||"",first_name:U.data.first_name||"",account_id:null,title:U.data.title||"",department:U.data.department||"",email:U.data.email||"",work_phone:U.data.work_phone||"",mobile_phone_1:U.data.mobile_phone_1||"",mobile_phone_2:U.data.mobile_phone_2||"",notes:"",assigned_to:U.data.assigned_to?.id||null,created_by:U.data.creator?.id||null}),M({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:U.data.assigned_to?.id||null,created_by:U.data.creator?.id||null})}catch(U){console.error(U)}};h.useEffect(()=>{e?(f(e),N(e.status||"New")):c&&F()},[c,e]);const $=async()=>{try{if(y==="Converted"&&d?.status?.toUpperCase()!=="QUALIFIED"){W.error("Lead must be Qualified before it can be converted.");return}const U=await se.put(`/leads/${d.id}/update/status`,{status:y});W.success("Lead status updated successfully");const V={...d,status:U.data.status};f(V),i&&i(V),a&&a(),t&&t()}catch(U){console.error(U),W.error("Failed to update lead status")}},D=async U=>{const V={..._,assigned_to:U.assigned_to?.id,billing_address:U.address,shipping_address:U.address,created_by:U.creator?.id,industry:null,name:U.company_name,phone_number:U.work_phone,status:"Prospect",territory_id:U.territory?.id,website:""};console.log("Account data: ",V),console.log("Contact data: ",T),console.log("Deal data: ",L),console.log("Lead data: ",U);try{const Y=(await se.post("/accounts/convertedLead",V)).data.id,le={...T,account_id:Y,assigned_to:U.assigned_to?.id,created_by:U.creator?.id,department:U.department,email:U.email,first_name:U.first_name,last_name:U.last_name,mobile_phone_1:U.mobile_phone_1,mobile_phone_2:U.mobile_phone_2,notes:U.notes,title:U.title,work_phone:U.work_phone},te=(await se.post("/contacts/convertedLead",le)).data.id,ae=()=>{switch(L.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},ye=L.amount&&L.amount!==""?parseFloat(L.amount):0,Ne={...L,account_id:Y,assigned_to:U.assigned_to?.id,created_by:U.creator?.id,primary_contact_id:te,probability:ae(),stage:"Prospecting"},he=await se.post("/deals/convertedLead",Ne),ve=await se.put(`/leads/convert/${U.id}`);i&&i(null),a(),W.success("Lead converted successfully!"),t()}catch(Z){console.error("Error during conversion:",Z);const Y=Z.response?.data?.detail||Z.message||"Failed to convert lead. Please try again.";W.error(Y)}},q=U=>{switch((U||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},G=U=>U.toString().toLowerCase().replace(/\b\w/g,V=>V.toUpperCase());return d?n.jsx(n.Fragment,{children:n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),n.jsx("button",{onClick:()=>{t?t():l(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Xn,{size:25})})]})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[d.first_name," ",d.last_name]}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${q(d.status)}`,children:G(d.status||"New")}),n.jsx("div",{className:"flex flex-col",children:n.jsx("button",{onClick:()=>D(d),disabled:!v,title:v?"Convert Lead":"Lead must be Qualified before converting",className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2
      ${v?"bg-green-600 hover:bg-green-700 text-white focus:ring-green-400":"bg-gray-200 text-gray-400 cursor-not-allowed"}
    `,children:"Convert"})})]}),S&&n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",onClick:()=>{s&&d&&s(d)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(ha,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",onClick:()=>{r&&d&&r(d)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",children:[n.jsx(Zt,{className:"mr-2"}),"Archive"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-4 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(U=>n.jsx("button",{onClick:()=>x(U),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${p===U?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:U},U))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[p==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Name:"}),n.jsxs("p",{children:[d.first_name," ",d.last_name||"N/A"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:d.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Job Title:"}),n.jsx("p",{children:d.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:d.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:d.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:d.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:d.assigned_to?`${d.assigned_to.first_name} ${d.assigned_to.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:d.creator?`${d.creator.first_name} ${d.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:d.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Source:"}),n.jsx("p",{children:d.source||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Address:"}),n.jsx("p",{children:d.address||"N/A"})]})]})}),p==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]})]}),p==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[o.tasks&&o.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>w(j==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",o.tasks.length,")"]})]}),j==="tasks"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),j==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.tasks.map((U,V)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:U.subject||U.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:U.description||"No description"}),U.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned:"," ",U.assigned_to.first_name," ",U.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:AA(U.due_date||U.created_at)})]},`task-${V}`))})]}),o.meetings&&o.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>w(j==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Pt,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",o.meetings.length,")"]})]}),j==="meetings"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),j==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.meetings.map((U,V)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Pt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:U.subject||U.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:U.description||U.location||"No description"}),U.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",U.host.first_name," ",U.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:AA(U.start_time||U.created_at)})]},`meeting-${V}`))})]}),o.calls&&o.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>w(j==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ot,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",o.calls.length,")"]})]}),j==="calls"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),j==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.calls.map((U,V)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Ot,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:U.subject||U.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:U.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:AA(U.call_time||U.created_at)})]},`call-${V}`))})]}),(!o||(!o.tasks||o.tasks.length===0)&&(!o.meetings||o.meetings.length===0)&&(!o.calls||o.calls.length===0)&&(!o.quotes||o.quotes.length===0)&&(!o.deals||o.deals.length===0)&&(!o.contacts||o.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{d&&l("/sales/calls",{state:{openCallModal:!0,initialCallData:{subject:d.title?`Call regarding ${d.title}`:`Call with ${d.first_name} ${d.last_name}`,relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assigned_to:d.assigned_to?.id?String(d.assigned_to.id):"",direction:"Outgoing",status:"Planned"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Ot,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const U=encodeURIComponent(d.email),V=encodeURIComponent(""),Z=encodeURIComponent(""),Y=`mailto:${U}?subject=${V}&body=${Z}`;window.location.href=Y},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(sa,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{d&&l("/sales/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:d.title?`Meeting regarding ${d.title}`:`Meeting with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",status:"Planned"}}})},children:[n.jsx(Pt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{d&&l("/sales/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:d.title?`Follow up on ${d.title}`:`Follow up with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:y,onChange:U=>N(U.target.value),children:[n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),d?.status?.toUpperCase()==="QUALIFIED"&&n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]}),n.jsx("button",{onClick:$,disabled:y===d.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${y===d.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const NFe=eh.all(),TA=NFe.map((e,t)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${t}`})),jFe=e=>e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()),CFe=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},kA={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function SFe(){const e=jt(),{leadID:t}=Ho();Us();const[a,s]=h.useState(null),[r,i]=h.useState(!1),[o,l]=h.useState(null),[c,u]=h.useState(null),[d,f]=h.useState([]),[p,x]=h.useState(!1),[y,N]=h.useState(""),[v,j]=h.useState("Filter by Status"),[w,S]=h.useState(1),[_,E]=h.useState(10),[T,A]=h.useState(kA),[L,M]=h.useState(!1),[F,$]=h.useState(null),[D,q]=h.useState(!1),[G,U]=h.useState(null),[V,Z]=h.useState(!1),[Y,le]=h.useState({}),[_e,te]=h.useState(new Set),[ae,ye]=h.useState(!1),[Ne,he]=h.useState(null);h.useRef(null);const[ve,ne]=h.useState(!1),[Se,de]=h.useState(null),[ke,Te]=h.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[pe,ze]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[Pe,We]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});h.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const tt=async()=>{try{const O=await se.get("/leads/getUsers");l(O.data)}catch(O){console.error(`Error fetching users: ${O}`)}},lt=async()=>{x(!0);try{const O=await se.get("/leads/admin/getLeads");f(O.data),console.log(O.data)}catch(O){console.error(`Error fetching leads: ${O}`)}finally{x(!1)}};h.useEffect(()=>{tt(),lt()},[]);const{user:Ie}=qt(),rt=Ie?.role==="Sales";h.useEffect(()=>{r&&!L&&rt&&Ie&&!T.lead_owner&&(A(O=>({...O,lead_owner:Ie.id})),u(Ie))},[r,L,rt,Ie,T.lead_owner]),h.useEffect(()=>{if(t&&d.length>0&&!r&&!L){const O=d.find(z=>z.id===Number(t));O&&s(O)}else!t&&!a&&s(null)},[t,d,r,L]),h.useEffect(()=>{if(Se){const z=(ge=>{if(!ge)return{code:"+63",number:""};const re=ge.match(/^(\+\d+)\s(.+)$/);if(re)return{code:re[1],number:re[2]};if(ge.startsWith("+")){const Ee=ge.match(/^(\+\d{1,3})/);if(Ee)return{code:Ee[1],number:ge.substring(Ee[1].length).trim()}}return{code:"+63",number:ge}})(Se.work_phone),I=[];Se.work_phone&&I.push(`Work: ${Se.work_phone}`),Se.mobile_phone_1&&I.push(`Mobile 1: ${Se.mobile_phone_1}`),Se.mobile_phone_2&&I.push(`Mobile 2: ${Se.mobile_phone_2}`);const Q=I.length>0?I.join(" | "):"";Te({name:Se.company_name||"",website:"",countryCode:z.code,phone_number:z.number,combinedPhoneNumbers:Q,billing_address:Se.address||"",shipping_address:Se.address||"",industry:"",status:"Prospect",territory_id:Se.assigned_to?.territory?.id||null,assigned_to:Se.assigned_to?.id||null,created_by:Se.creator?.id||null}),ze({last_name:Se.last_name||"",first_name:Se.first_name||"",account_id:null,title:Se.title||"",department:Se.department||"",email:Se.email||"",work_phone:Se.work_phone||"",mobile_phone_1:Se.mobile_phone_1||"",mobile_phone_2:Se.mobile_phone_2||"",notes:Se.notes||"",assigned_to:Se.assigned_to?.id||null,created_by:Se.creator?.id||null}),We({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:Se.assigned_to?.id||null,created_by:Se.creator?.id||null})}},[Se]);const He=O=>N(O.target.value),Ke=h.useMemo(()=>{const O=y.trim().toLowerCase(),z=v.trim().toUpperCase();let I=d.filter(Q=>{const ge=[Q?.first_name,Q?.last_name,Q?.company_name,Q?.title,Q?.email,Q?.work_phone,Q?.assigned_to?`${Q.assigned_to.first_name} ${Q.assigned_to.last_name}`:""],re=O===""||ge.some(Qe=>Qe==null||Qe===""?!1:Qe.toString().toLowerCase().includes(O));let Ee=!1;if(z==="FILTER BY STATUS"){const Qe=Q.status?Q.status.toUpperCase():"";Ee=Qe!=="CONVERTED"&&Qe!=="INACTIVE"}else Ee=(Q.status?Q.status.toUpperCase():"")===z;return re&&Ee});return I.sort((Q,ge)=>{const re=new Date(Q.created_at).getTime();return new Date(ge.created_at).getTime()-re}),I},[d,y,v]),Je=Math.max(1,Math.ceil(Ke.length/_)||1);h.useEffect(()=>{S(1)},[y,v]),h.useEffect(()=>{S(O=>{const z=Math.max(1,Math.ceil(Ke.length/_)||1);return O>z?z:O})},[Ke.length,_]);const Oe=h.useMemo(()=>{const O=(w-1)*_;return Ke.slice(O,O+_)},[Ke,w,_]),Ce=()=>S(O=>Math.max(O-1,1)),fe=()=>S(O=>Math.min(O+1,Je)),ue=h.useCallback(async O=>{try{const z=await se.get(`/activities/lead/${O}`);le(z.data&&typeof z.data=="object"?z.data:{})}catch(z){console.error(z),z.response?.status===404&&(console.warn("No activities found for this account."),le({}))}},[]),H=O=>{s(O),ue(O.id)},K=()=>{s(null),t&&e("/admin/leads",{replace:!0})},we=()=>{i(!1),A(kA),M(!1),$(null),q(!1),u(null),sessionStorage.removeItem("editLeadData")},Me=O=>{O.target.id==="modalBackdrop"&&we()},ce=()=>{A(kA),M(!1),$(null),u(null),i(!0)},oe=O=>{if(!O){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",O),console.log("Current state - leadID:",t,"selectedLead:",a,"showModal:",r);const z=Ee=>{if(!Ee)return{code:"+63",number:""};const Qe=Ee.match(/^(\+\d+)\s(.+)$/);return Qe?{code:Qe[1],number:Qe[2]}:{code:"+63",number:Ee}},I=z(O.work_phone),Q=z(O.mobile_phone_1),ge=z(O.mobile_phone_2);let re="";if(O.assigned_to){re=String(O.assigned_to.id);const Ee=o?.find(Qe=>Qe.id===O.assigned_to.id);u(Ee)}A({first_name:O.first_name||"",last_name:O.last_name||"",company_name:O.company_name||"",title:O.title||"",department:O.department||"",email:O.email||"",work_ccode:I.code,work_phone:I.number,m1_ccode:Q.code,mobile_phone_1:Q.number,m2_ccode:ge.code,mobile_phone_2:ge.number,address:O.address||"",notes:O.notes||"",source:O.source||"",territory_id:O.territory?.id||null,lead_owner:re,status:O.status||"New"}),M(!0),$(O.id),a?(console.log("Coming from detail view - closing detail modal and showing edit form"),s(null),i(!0)):(console.log("Already in list view - showing modal"),i(!0))},De=O=>{if(!O){console.error("handleArchive: lead is null or undefined");return}const z=`${O.first_name} ${O.last_name}`||"this lead";U({title:"Archive Lead",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:z}),"? You can restore it later if needed."]}),confirmLabel:"Archive Lead",cancelLabel:"Cancel",variant:"archive",action:{type:"archive",targetId:O.id,name:z}})},$e=O=>{const z=d.find(Q=>Q.id===O);!z||!(z.creator?.id===Ie?.id)||te(Q=>{const ge=new Set(Q);return ge.has(O)?ge.delete(O):ge.add(O),ge})},Xe=()=>{const O=Oe.filter(z=>z.creator?.id===Ie?.id);_e.size===O.length&&O.length>0?te(new Set):te(new Set(O.map(z=>z.id)))},Ze=()=>{if(_e.size===0){W.warning("Please select at least one lead to archive.");return}const O=_e.size;U({title:"Archive Leads",message:n.jsxs("span",{children:["Are you sure you want to archive ",n.jsx("span",{className:"font-semibold",children:O})," lead",O>1?"s":"","? They will be marked as inactive."]}),confirmLabel:`Archive ${O} Lead${O>1?"s":""}`,cancelLabel:"Cancel",variant:"archive",action:{type:"bulk-archive",targetIds:Array.from(_e)}})},mt=O=>{const{name:z,value:I}=O.target;if(A(Q=>({...Q,[z]:I})),z==="lead_owner"){const Q=o.find(ge=>ge.id===parseInt(I));u(Q)}},[nt,Nt]=h.useState(!1),wt=O=>{if(O.preventDefault(),Nt(!0),!T.last_name?.trim()){W.error("Last name is required.");return}if(!T.company_name?.trim()){W.error("Company is required.");return}if(!T.email?.trim()){W.error("Email is required.");return}if(!T.email.includes("@")){W.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(T.email)){W.error("Please enter a valid email address with a dot in the domain.");return}if(!T.lead_owner){W.error("Please assign a lead owner.");return}const I={...T,territory_id:T.territory_id?parseInt(T.territory_id):null,lead_owner:parseInt(T.lead_owner),work_phone:`${T.work_ccode} ${T.work_phone}`,mobile_phone_1:`${T.m1_ccode} ${T.mobile_phone_1}`,mobile_phone_2:`${T.m2_ccode} ${T.mobile_phone_2}`},Q=L&&F?"update":"create",ge=`${T.first_name} ${T.last_name}`;U({title:Q==="create"?"Confirm New Lead":"Confirm Update",message:Q==="create"?n.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",n.jsx("span",{className:"font-semibold",children:ge}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:ge}),"?"]}),confirmLabel:Q==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:Q,payload:I,targetId:F||null,name:ge}})},Tt=async()=>{if(!G?.action){U(null);return}const{action:O}=G,{type:z,payload:I,targetId:Q,name:ge,lead:re}=O;console.log(I),Z(!0);try{if(z==="create")q(!0),await se.post("/leads/create",I),W.success(`Lead "${ge}" created successfully.`),we(),await lt();else if(z==="update"){if(!Q)throw new Error("Missing lead identifier for update.");q(!0);const Ee=await se.put(`/leads/${Q}`,I);W.success(`Lead "${ge}" updated successfully.`),a&&a.id===Q&&s(null),we(),await lt()}else if(z==="delete"){if(!Q)throw new Error("Missing lead identifier for deletion.");await se.delete(`/leads/${Q}`),W.success(`Lead "${ge}" deleted successfully.`),a?.id===Q&&s(null),await lt()}else if(z==="archive"){if(!Q)throw new Error("Missing lead identifier for archiving.");const Ee=a?.id;he(Q),await se.put(`/leads/${Q}`,{status:"Inactive"}),W.success(`Lead "${ge}" archived successfully.`),await lt(),Ee===Q&&s(null)}else if(z==="bulk-archive"){const Ee=O.targetIds;if(!Ee||Ee.length===0)throw new Error("Missing leads to archive.");ye(!0),await Promise.all(Ee.map(Qe=>se.put(`/leads/${Qe}`,{status:"Inactive"}))),W.success(`${Ee.length} lead${Ee.length>1?"s":""} archived successfully.`),te(new Set),a&&Ee.includes(a.id)&&s(null),await lt()}}catch(Ee){console.error(Ee);const Qe=z==="create"?"Failed to create lead. Please review the details and try again.":z==="update"?"Failed to update lead. Please review the details and try again.":z==="delete"?"Failed to delete lead. Please try again.":z==="archive"?"Failed to archive lead. Please try again.":"Failed to archive leads. Please try again.",gt=Ee.response?.data?.detail||Qe;W.error(gt)}finally{(z==="create"||z==="update")&&q(!1),z==="archive"&&he(null),z==="bulk-archive"&&ye(!1),z!=="edit"&&(Z(!1),U(null))}},Re=()=>{V||U(null)},me=d.filter(O=>O.status==="New").length,ie=d.filter(O=>O.status==="Contacted").length,Fe=d.filter(O=>O.status==="Qualified").length,Le=d.filter(O=>O.status==="Converted").length,be=d.filter(O=>O.status==="Lost").length,ee=[{title:"New",value:me,icon:Kn,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:ie,icon:Ot,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:Fe,icon:aa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:Le,icon:Xl,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:be,icon:Fs,color:"text-red-600",bgColor:"bg-red-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[p&&n.jsx(Wt,{message:"Loading leads..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Kn,{className:"mr-2 text-blue-600"}),"Leads"]}),n.jsx("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{ce(),Nt(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(xn,{className:"mr-2"})," Add Lead"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:ee.map(O=>n.jsx(AFe,{...O},O.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Vt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search leads",value:y,onChange:He,className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:v,onChange:O=>j(O.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:_e.size>0&&_e.size===Oe.filter(O=>O.creator?.id===Ie?.id).length&&Oe.filter(O=>O.creator?.id===Ie?.id).length>0,onChange:Xe,className:"w-4 h-4 cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Name"}),n.jsx("th",{className:"py-3 px-4",children:"Company"}),n.jsx("th",{className:"py-3 px-4",children:"Job Title"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 w-12",children:_e.size>0&&n.jsx("button",{onClick:Ze,className:"text-orange-500 hover:text-orange-700 transition",title:"Archive selected leads",disabled:ae,children:n.jsx(Zt,{size:18})})})]})}),n.jsx("tbody",{children:Ke.length>0?Oe.map(O=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>H(O),children:[n.jsx("td",{className:"py-3 px-4 w-12",onClick:z=>z.stopPropagation(),children:O.creator?.id===Ie?.id&&n.jsx("input",{type:"checkbox",checked:_e.has(O.id),onChange:z=>{z.stopPropagation(),$e(O.id)},className:"w-4 h-4 cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[O.first_name," ",O.last_name]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:O.company_name||"--"})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:O.title||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:O.email||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:O.assigned_to?`${O.assigned_to.first_name} ${O.assigned_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${CFe(O.status||"New")}`,children:jFe(O.status||"New")})}),n.jsx("td",{className:"py-3 px-4 w-12"})]},O.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No leads found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:Ke.length,pageSize:_,currentPage:w,onPrev:Ce,onNext:fe,onPageSizeChange:O=>{E(O),S(1)},pageSizeOptions:[10,20,30,40,50],label:"leads"}),r&&n.jsx("div",{id:"modalBackdrop",onClick:Me,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:O=>O.stopPropagation(),children:[n.jsx("button",{onClick:()=>{we(),Nt(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:L?"Edit Lead":"Add New Lead"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),n.jsx("input",{type:"text",name:"first_name",value:T.first_name,onChange:mt,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"Smith",name:"last_name",value:T.last_name,onChange:mt,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                      ${nt&&!T.last_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Company ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:T.company_name,onChange:mt,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${nt&&!T.company_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Job Title",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:T.title,onChange:mt,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${nt&&!T.title?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),n.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:T.department,onChange:mt,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Email",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:T.email,onChange:mt,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${nt&&!T.email?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col col-span-1 md:col-span-2 lg:col-span-1",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"work_ccode",value:T.work_ccode,onChange:mt,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:TA.map(O=>n.jsx("option",{value:O.code,children:O.code},O.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:T.work_phone,onChange:mt,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m1_ccode",value:T.m1_ccode,onChange:mt,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:TA.map(O=>n.jsx("option",{value:O.code,children:O.code},O.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:T.mobile_phone_1,onChange:mt,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m2_ccode",value:T.m2_ccode,onChange:mt,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:TA.map(O=>n.jsx("option",{value:O.code,children:O.code},O.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:T.mobile_phone_2,onChange:mt,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),n.jsx("input",{type:"text",name:"address",value:T.address,onChange:mt,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col col-span-1 md:col-span-2 lg:col-span-1",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:`w-full rounded-lg ${nt&&!T.lead_owner?"border border-red-400":"border border-gray-300"}`,children:n.jsx(TFe,{items:Array.isArray(o)?o:[],value:T.lead_owner??"",placeholder:"Search a user...",disabled:D||rt,getLabel:O=>`${O.first_name} ${O.last_name}`,onChange:O=>{const z=o.find(Q=>String(Q.id)===String(O));u(z);let I=null;z&&z.assigned_territory&&z.assigned_territory.length===1&&(I=z.assigned_territory[0].id),A(Q=>({...Q,lead_owner:O,territory_id:I}))}})})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),n.jsxs("select",{name:"territory_id",value:T.territory_id||"",onChange:mt,disabled:!c||!c.assigned_territory||c.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[n.jsx("option",{value:"",disabled:!0,children:c?c.assigned_territory&&c.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),c&&c.assigned_territory&&c.assigned_territory.map(O=>n.jsx("option",{value:O.id,children:O.name},O.id))]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),n.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:T.source,onChange:mt,children:[n.jsx("option",{value:"",disabled:!0,children:"Select Source"}),n.jsx("option",{value:"Website",children:"Website"}),n.jsx("option",{value:"Referral",children:"Referral"}),n.jsx("option",{value:"Cold call",children:"Cold call"}),n.jsx("option",{value:"Event",children:"Event"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),n.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:T.notes,onChange:mt,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("button",{type:"button",onClick:()=>{we(),Nt(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:D||V,children:"Cancel"}),n.jsx("button",{type:"submit",onClick:wt,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:D||V,children:D||V?"Processing...":L?"Update Lead":"Save Lead"})]})]})]})}),G&&n.jsx(_Fe,{open:!0,title:G.title,message:G.message,confirmLabel:G.confirmLabel,cancelLabel:G.cancelLabel,variant:G.variant,onConfirm:Tt,onCancel:Re,loading:V}),a&&!r&&!L&&n.jsx(oJ,{relatedActs:Y,lead:a,onBack:K,fetchLeads:lt,setSelectedLead:s,onEdit:oe,onArchive:De})]})}function _Fe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":i==="archive"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function AFe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function TFe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=h.useState(!1),[u,d]=h.useState(""),f=h.useRef(null),p=e.find(N=>String(N.id)===String(t)),x=p?s(p):"",y=h.useMemo(()=>{const N=u.trim().toLowerCase();return(N?e.filter(j=>(s(j)||"").toLowerCase().includes(N)):e).slice(0,o)},[e,u,s,o]);return h.useEffect(()=>{const N=v=>{f.current&&!f.current.contains(v.target)&&c(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),h.useEffect(()=>{l||d("")},[l]),n.jsxs("div",{ref:f,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:l?u:x,placeholder:r,onFocus:()=>!i&&c(!0),onChange:N=>{d(N.target.value),l||c(!0)},className:"w-full rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:y.length>0?y.map(N=>{const v=String(N.id),j=s(N),w=String(t)===v;return n.jsx("button",{type:"button",onClick:()=>{a(v),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${w?"bg-blue-50":""}`,children:j||"--"},v)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const vb={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},Za=({label:e,value:t,name:a,className:s=""})=>n.jsxs("div",{className:`flex flex-col ${s}`,children:[n.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),n.jsx("input",{type:"text",name:a,defaultValue:t,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),kFe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(Za,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),n.jsx(Za,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),n.jsx(Za,{label:"Industry",name:"industry",value:e.industry})]}),n.jsx(Za,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),n.jsx(Za,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),EFe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Za,{label:"First Name",name:"firstName",value:e.firstName}),n.jsx(Za,{label:"Last Name",name:"lastName",value:e.lastName}),n.jsx(Za,{label:"Department",name:"department",value:e.department}),n.jsx(Za,{label:"Title",name:"title",value:e.title}),n.jsx(Za,{label:"Work Phone",name:"workPhone",value:e.workPhone}),n.jsx(Za,{label:"Email",name:"email",value:e.email}),n.jsx(Za,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),n.jsx(Za,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),LFe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Za,{label:"Deal Name",name:"dealName",value:e.dealName}),n.jsxs("div",{className:"flex",children:[n.jsx(Za,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),n.jsx("div",{className:"flex flex-col justify-end ml-1",children:n.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),n.jsx(Za,{label:"Stage",name:"stage",value:e.stage}),n.jsx(Za,{label:"Territory",name:"territory",value:e.territory})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Za,{label:"Description",name:"description",value:e.description}),n.jsx(Za,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function PFe({isOpen:e,onClose:t}){const[a,s]=h.useState(1),r=3;if(!e)return null;const i=()=>{a<r?s(a+1):(t(),s(1))},o=()=>{a>1&&s(a-1)},l=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],c=()=>{switch(a){case 1:return n.jsx(kFe,{data:vb});case 2:return n.jsx(EFe,{data:vb});case 3:return n.jsx(LFe,{data:vb});default:return null}};return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:vb.accountName})]}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:n.jsx(wj,{className:"w-6 h-6"})})]}),n.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:l.map(u=>n.jsx("button",{onClick:()=>s(u.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${a===u.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:u.name},u.id))}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c()}),n.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[a>1&&n.jsx("button",{onClick:o,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),a<r?n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}function lJ({selectedDeal:e,onStatusUpdate:t,onClose:a}){const[s,r]=h.useState(e?.stage||""),[i,o]=h.useState(!1),l=jt(),{user:c}=qt();h.useEffect(()=>{console.log("SalesDealsQuickAction mounted sahdksd",e),console.log("User sadad:",c)},[e,c]);const u=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"}];h.useEffect(()=>{e?.stage&&r(e.stage)},[e]);const d=async()=>{if(!e||!e.id){W.error("No deal selected");return}if(!s||s===e.stage){W.info("Please select a different stage");return}const f=e.id;o(!0);try{await se.put(`/deals/admin/${f}`,{stage:s}),a&&a(),t&&setTimeout(async()=>{await t(!0)},100),setTimeout(()=>{W.success("Deal status updated successfully")},300)}catch(p){console.error(p);const x=p.response?.data?.detail||"Failed to update deal status";W.error(x)}finally{o(!1)}};return e?n.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{const f=e.account?.id||e.account_id;l("/sales/calls",{state:{openCallModal:!0,initialCallData:{subject:e.name?`Call regarding: ${e.name}`:"",relatedType1:"Account",relatedTo1:f,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assigned_to:e.assigned_deals?.id?String(e.assigned_deals.id):"",assignedTo:e.assigned_to?.id?String(e.assigned_to.id):""}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Ot,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const f=encodeURIComponent(e.contact.email),p=encodeURIComponent(""),x=encodeURIComponent(""),y=`mailto:${f}?subject=${p}&body=${x}`;window.location.href=y},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(sa,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{const f=e.account?.id||e.account_id;l("/sales/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:e.name?`Meeting: ${e.name}`:"",relatedType1:"Account",relatedTo1:f,relatedType2:"Deal",relatedTo2:e.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):""}}})},children:[n.jsx(Pt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{const f=e.account?.id||e.account_id;l("/sales/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:e.name?`Task for: ${e.name}`:"",relatedType1:"Account",relatedTo1:f,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:s,onChange:f=>r(f.target.value),disabled:i||e.created_by!==c?.id&&e.assigned_to!==c?.id,children:u.map(f=>n.jsx("option",{value:f.value,children:f.label},f.value))}),(e.created_by===c?.id||e.assigned_to===c?.id)&&n.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:d,disabled:i||!s||s===e.stage,children:i?"Updating...":"Update"})]})]}):null}function cJ({selectedDeal:e,show:t,onClose:a,activeTab:s,setActiveTab:r,onEdit:i,onDelete:o,onStatusUpdate:l}){const c=jt(),[u]=Us(),d=u.get("id"),[f,p]=h.useState(e||null),[x,y]=h.useState(s||"Overview"),{user:N}=qt(),{comments:v,addComment:j,refresh:w}=ka({relatedType:"deal",relatedId:f?.id});h.useEffect(()=>{f?.id&&w()},[f?.id,w]);const S=s!==void 0?s:x;if(h.useEffect(()=>{(async()=>{if(d&&!e)try{const M=((await se.get("/deals/admin/fetch-all")).data||[]).find(F=>F.id===parseInt(d));if(M){const F={...M,amount:typeof M.amount=="number"?M.amount:parseFloat(M.amount||0),probability:M.probability||0};p(F)}else console.warn("Deal not found with ID:",d)}catch(A){console.error("Error fetching deal:",A)}})()},[d,e]),!f&&!d||d&&!f)return null;const _=T=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[T]||"bg-gray-100 text-gray-700";function E(T){return T?new Date(T).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),n.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:n.jsx("button",{onClick:()=>{a?a():c(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Xt,{size:25})})})]})}),n.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:n.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[n.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:f.name}),n.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${_(f.stage)}`,children:f.stage})]}),n.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",E(f.created_at)]})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2",children:[n.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[" ",f.amount?f.amount.toLocaleString():"0"]}),n.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${f.probability}%`}})}),n.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",f.probability,"% Complete "]}),f.deal_creator?.id===N?.id&&n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[n.jsxs("button",{type:"button",onClick:()=>{i&&i(f)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(ha,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),n.jsxs("button",{type:"button",onClick:()=>{o&&o(f)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",children:[n.jsx(Zt,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Archive"})]})]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(T=>n.jsx("button",{onClick:()=>{r?r(T):y(T)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${S===T?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:T},T))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[S==="Overview"&&n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Description:"})," ",f.description]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Expected Close Date:"})," ",f.close_date]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("div",{className:"mt-4 py-3 w-full",children:[n.jsxs("div",{className:"relative flex flex-col w-full",children:[n.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const T=(f?.stage||"PROSPECTING").toUpperCase(),L=(F=>F==="PROSPECTING"?0:F==="QUALIFICATION"?1:F==="PROPOSAL"?2:F==="NEGOTIATION"?3:F==="CLOSED_WON"||F==="CLOSED_LOST"?4:-1)(T);return[0,1,2,3,4].map(F=>L===F?"orange":L>F?"green":"gray").map((F,$)=>n.jsxs(xt.Fragment,{children:[n.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${F==="green"?"bg-green-500 border-green-500":F==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),$<4&&n.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},$))})()}),n.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((T,A)=>n.jsx("span",{className:"text-center flex-1 break-words",children:T},A))})]}),n.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:f.stage})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),n.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Account:"})," ",f.account?.name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Primary Contact:"})," ",f.contact?.first_name," ",f.contact?.last_name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Phone:"})," ",f.contact?.work_phone]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",f.contact?.email]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Assigned To:"})," ",f.assigned_deals?.first_name," ",f.assigned_deals?.last_name]})]})]})]}),S==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:f.description||"No notes available."})]}),n.jsx(Ta,{comments:v,onAddComment:j})]}),S==="Activities"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:Ot,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:Pt,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((T,A)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[n.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-gray-600 mt-1",children:n.jsx(T.icon,{size:24})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-gray-900 break-words",children:T.title}),n.jsx("p",{className:"text-sm text-gray-500 break-words",children:T.desc}),n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),n.jsx("p",{className:"text-sm text-gray-700 break-words",children:T.user})]})]})]}),n.jsx("p",{className:"text-sm text-gray-500 break-words",children:T.date})]},A))]}),S==="Edit"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),n.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:f.name})]}),n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),n.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:f.description})]}),n.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),n.jsx("div",{className:"w-full lg:w-auto",children:n.jsx(lJ,{selectedDeal:f,onStatusUpdate:l,onClose:a})})]})]})]})})}function DFe(){h.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const e=jt(),t=Jt(),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Stage"),[o,l]=h.useState("Filter by Owner"),[c,u]=h.useState(null),[d,f]=h.useState("Overview"),[p,x]=h.useState(!1),[y,N]=h.useState(null),[v,j]=h.useState(!1),[w,S]=h.useState(1),[_,E]=h.useState(10),[T,A]=h.useState(!1),[L,M]=h.useState(null),[F,$]=h.useState(!1),[D,q]=h.useState(!1),[G,U]=h.useState(null),[V,Z]=h.useState([]),[Y,le]=h.useState([]),[_e,te]=h.useState([]),[ae,ye]=h.useState({}),[Ne,he]=h.useState(null),[ve,ne]=h.useState(new Set),[Se,de]=h.useState(!1);h.useEffect(()=>{const z=t.state,I=z?.dealID;if(I&&!z?.openDealModal){he(I),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(Ne&&y?.length>0&&!v){const z=y.find(I=>I.id===Ne);z?u(z):W.error("Deal not found."),he(null)}},[Ne,y,v]);const[ke,Te]=h.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),[pe,ze]=h.useState(null),[Pe,We]=h.useState(null),tt={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST","Closed Cancelled Stage":"CLOSED_CANCELLED"},lt=z=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost",CLOSED_CANCELLED:"Closed Cancelled"})[z]||z||"--",Ie=z=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700",CLOSED_CANCELLED:"bg-red-100 text-red-700"})[z]||"bg-gray-100 text-gray-700",rt=h.useCallback(async z=>{try{const I=await se.get(`/activities/deal/${z}`);ye(I.data&&typeof I.data=="object"?I.data:{})}catch(I){console.error(I),I.response?.status===404&&(console.warn("No activities found for this account."),ye({}))}},[]),He=h.useMemo(()=>{const z=a.trim().toLowerCase(),I=r.trim(),Q=o.trim();return(y??[]).filter(ge=>{const re=[ge?.name,ge?.description,ge?.account?.name,ge?.contact?.first_name,ge?.contact?.last_name,ge?.assigned_deals?.first_name,ge?.assigned_deals?.last_name],Ee=z===""||re.some(Ct=>Ct==null||Ct===""?!1:Ct.toString().toLowerCase().includes(z)),Qe=I==="Filter by Stage"||I===""||ge.stage===tt[I]||ge.stage===I,gt=Q==="Filter by Owner"||Q===""||`${ge.assigned_deals?.first_name||""} ${ge.assigned_deals?.last_name||""}`.trim().toLowerCase()===Q.toLowerCase();return Ee&&Qe&&gt})},[y,a,r,o]),Ke=Math.max(1,Math.ceil(He.length/_)||1);h.useEffect(()=>{S(1)},[a,r,o]),h.useEffect(()=>{S(z=>{const I=Math.max(1,Math.ceil(He.length/_)||1);return z>I?I:z})},[He.length,_]);const Je=h.useMemo(()=>{const z=(w-1)*_;return He.slice(z,z+_)},[He,w,_]),Oe=()=>S(z=>Math.max(z-1,1)),Ce=()=>S(z=>Math.min(z+1,Ke)),fe=()=>{Te({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),q(!1),U(null),x(!0)},ue=async()=>{j(!0);try{const z=await se.get("/deals/admin/fetch-all"),Q=[...Array.isArray(z.data)?z.data:[]].sort((ge,re)=>{const Ee=ge?.created_at?new Date(ge.created_at).getTime():0;return(re?.created_at?new Date(re.created_at).getTime():0)-Ee});N(Q)}catch(z){z.response&&z.response.status===403?W.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):W.error("Failed to fetch deals. Please try again later."),console.error(z)}finally{j(!1)}},H=async()=>{try{const z=await se.get("/accounts/admin/fetch-all");Z(Array.isArray(z.data)?z.data:[])}catch(z){console.error(z),z.response?.status===403&&W.warn("Unable to load accounts (permission denied).")}},K=async()=>{try{const z=await se.get("/contacts/admin/fetch-all");le(Array.isArray(z.data)?z.data:[])}catch(z){console.error(z),z.response?.status===403&&W.warn("Unable to load contacts (permission denied).")}},we=async()=>{try{const z=await se.get("/users/all");te(Array.isArray(z.data)?z.data:[])}catch(z){console.error(z),z.response?.status===403&&W.warn("Unable to load users (permission denied).")}};h.useEffect(()=>{ue(),H(),K(),we()},[]);const{user:Me}=qt(),ce=Me?.role==="Sales";h.useEffect(()=>{p&&!D&&ce&&Me&&!ke.assigned_to&&Te(z=>({...z,assigned_to:Me.id}))},[p,D,ce,Me,ke.assigned_to]);const oe=async z=>{z&&(Te({id:z.id||null,name:z.name||"",account_id:z.account_id?.toString()||"",primary_contact_id:z.primary_contact_id?.toString()||"",stage:z.stage||"PROPOSAL",amount:z.amount?.toString()||"",close_date:z.close_date?new Date(z.close_date).toISOString().split("T")[0]:"",assigned_to:z.assigned_to?.toString()||"",currency:z.currency||"PHP",description:z.description||""}),ze(z.account||null),We(z.contact||null),q(!0),U(z.id),u(null),x(!0))},De=async(z=!1)=>{try{const I=await se.get("/deals/admin/fetch-all"),ge=[...Array.isArray(I.data)?I.data:[]].sort((re,Ee)=>{const Qe=re?.created_at?new Date(re.created_at).getTime():0;return(Ee?.created_at?new Date(Ee.created_at).getTime():0)-Qe});if(N(ge),!z&&c&&c.id){const re=ge.find(Ee=>Ee.id===c.id);re&&u({...re})}}catch(I){console.error("Failed to refresh deal data:",I),await ue()}},$e=z=>{const I=z.name.trim();if(!I){W.error("Deal name is required.");return}if(!z.account_id){W.error("Account is required.");return}const Q=D&&G?"update":"create",ge=I;M({title:Q==="create"?"Confirm New Deal":"Confirm Update",message:Q==="create"?n.jsxs("span",{children:["Are you sure you want to create"," ",n.jsx("span",{className:"font-semibold",children:ge}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:ge}),"?"]}),confirmLabel:Q==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:Q,formData:z,targetId:G||null,name:ge}})},Xe=z=>{const I=Je?.find(Q=>Q.id===z);I&&I.deal_creator?.id===Me?.id&&ne(Q=>{const ge=new Set(Q);return ge.has(z)?ge.delete(z):ge.add(z),ge})},Ze=()=>{const z=Je?.filter(I=>I.deal_creator?.id===Me?.id)||[];ve.size===z.length&&z.length>0?ne(new Set):ne(new Set(z.map(I=>I.id)))},mt=()=>{if(ve.size===0)return;const z=ve.size;M({title:"Archive Deals",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:z})," deal",z!==1?"s":"","? You can restore them later if needed."]}),confirmLabel:`Archive ${z} Deal${z!==1?"s":""}`,cancelLabel:"Cancel",variant:"archive",action:{type:"bulk-archive",targetIds:Array.from(ve),count:z}})},nt=z=>{if(!z)return;const I=z.name||"this deal";M({title:"Archive Deal",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:I}),"? You can restore it later if needed."]}),confirmLabel:"Archive Deal",cancelLabel:"Cancel",variant:"archive",action:{type:"archive",targetId:z.id,name:I}})},Nt=async()=>{if(!L?.action){M(null);return}const{action:z}=L,{type:I,formData:Q,targetId:ge,name:re}=z;$(!0);try{if(I==="create"){A(!0);const Ee={name:Q.name.trim(),account_id:parseInt(Q.account_id),primary_contact_id:Q.primary_contact_id?parseInt(Q.primary_contact_id):null,stage:Q.stage,amount:Q.amount?parseFloat(Q.amount):null,currency:Q.currency||"PHP",close_date:Q.close_date||null,description:Q.description||null,assigned_to:Q.assigned_to?parseInt(Q.assigned_to):null};await se.post("/deals/admin/create",Ee),W.success(`Deal "${re}" created successfully.`),x(!1),await ue()}else if(I==="update"){if(!ge)throw new Error("Missing deal identifier for update.");A(!0);const Ee={};Q.name!==void 0&&(Ee.name=Q.name.trim()),Q.account_id!==void 0&&Q.account_id!==""&&(Ee.account_id=parseInt(Q.account_id)),Q.primary_contact_id!==void 0&&(Ee.primary_contact_id=Q.primary_contact_id?parseInt(Q.primary_contact_id):null),Q.stage!==void 0&&(Ee.stage=Q.stage),Q.amount!==void 0&&Q.amount!==""&&(Ee.amount=parseFloat(Q.amount)),Q.currency!==void 0&&(Ee.currency=Q.currency),Q.close_date!==void 0&&(Ee.close_date=Q.close_date||null),Q.description!==void 0&&(Ee.description=Q.description||null),Q.assigned_to!==void 0&&(Ee.assigned_to=Q.assigned_to?parseInt(Q.assigned_to):null),await se.put(`/deals/admin/${ge}`,Ee),W.success(`Deal "${re}" updated successfully.`),x(!1),await ue()}else if(I==="delete"){if(!ge)throw new Error("Missing deal identifier for deletion.");await se.delete(`/deals/admin/${ge}`),W.success(`Deal "${re}" deleted successfully.`),c?.id===ge&&u(null),await ue()}else if(I==="archive"){if(!ge)throw new Error("Missing deal identifier for archive.");await se.put(`/deals/single-archive/${ge}`),W.success(`Deal "${re}" archived successfully.`),c?.id===ge&&u(null),await ue()}else if(I==="bulk-archive"){if(de(!0),!z.targetIds||z.targetIds.length===0)throw new Error("No deals selected for archiving.");await se.put("/deals/bulk-archive",{deal_ids:z.targetIds}),W.success(`${z.count} deal${z.count!==1?"s":""} archived successfully.`),ne(new Set),c&&z.targetIds.includes(c.id)&&u(null),await ue()}}catch(Ee){console.error(Ee);const Qe=I==="create"?"Failed to create deal. Please review the details and try again.":I==="update"?"Failed to update deal. Please review the details and try again.":I==="bulk-archive"?"Failed to archive deals. Please try again.":I==="archive"?"Failed to archive deal. Please try again.":"Failed to delete deal. Please try again.",gt=Ee.response?.data?.detail||Qe;W.error(gt)}finally{(I==="create"||I==="update")&&A(!1),I==="bulk-archive"&&de(!1),$(!1),M(null)}},wt=()=>{F||M(null)},Tt=()=>{x(!1),Te({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),ze(null),We(null),q(!1),U(null),A(!1)},Re=(y??[]).filter(z=>z.stage==="PROSPECTING").length,me=(y??[]).filter(z=>z.stage==="QUALIFICATION").length,ie=(y??[]).filter(z=>z.stage==="PROPOSAL").length,Fe=(y??[]).filter(z=>z.stage==="NEGOTIATION").length,Le=(y??[]).filter(z=>z.stage==="CLOSED_WON").length,be=(y??[]).filter(z=>z.stage==="CLOSED_LOST").length,ee=(y??[]).filter(z=>z.stage==="CLOSED_CANCELLED").length,O=[{title:"Prospecting",value:Re,icon:oN,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:me,icon:ga,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:ie,icon:tn,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:Fe,icon:id,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:Le,icon:aa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:be,icon:Fs,color:"text-red-600",bgColor:"bg-red-100"},{title:"Closed Cancelled",value:ee,icon:Fs,color:"text-gray-600",bgColor:"bg-gray-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[v&&n.jsx(Wt,{message:"Loading deals..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(tn,{className:"mr-2 text-blue-600"}),"Deals"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:fe,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(xn,{className:"mr-2"})," Add Deal"]})})]}),n.jsx("div",{className:"grid grid-cols-1 p-2 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden",children:O.map(z=>n.jsx(MFe,{...z},z.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Vt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search deals",value:a,onChange:z=>s(z.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[n.jsxs("select",{value:r,onChange:z=>i(z.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),n.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),n.jsx("option",{value:"Qualification Stage",children:"Qualification"}),n.jsx("option",{value:"Proposal Stage",children:"Proposal"}),n.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),n.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),n.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"}),n.jsx("option",{value:"Closed Cancelled Stage",children:"Closed Cancelled"})]}),n.jsxs("select",{value:o,onChange:z=>l(z.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((y??[]).map(z=>`${z.assigned_deals?.first_name} ${z.assigned_deals?.last_name}`))].map((z,I)=>n.jsx("option",{value:z,children:z},I))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:ve.size>0&&ve.size===Je?.filter(z=>z.deal_creator?.id===Me?.id).length&&Je?.filter(z=>z.deal_creator?.id===Me?.id).length>0,onChange:Ze,className:"w-4 h-4 cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Stage"}),n.jsx("th",{className:"py-3 px-4",children:"Value"}),n.jsx("th",{className:"py-3 px-4",children:"Close Date"}),n.jsx("th",{className:"py-3 px-4",children:"Owner"}),n.jsx("th",{className:"py-3 px-4 w-12",children:ve.size>0&&n.jsx("button",{onClick:mt,className:"text-orange-500 hover:text-orange-700 transition",title:"Archive selected deals",disabled:Se,children:n.jsx(Zt,{size:18})})})]})}),n.jsx("tbody",{children:He.length>0?Je.map(z=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{u({...z}),rt(z.id)},children:[n.jsx("td",{className:"py-3 px-4",children:Me?.id===z.deal_creator?.id&&n.jsx("input",{type:"checkbox",checked:ve.has(z.id),onClick:I=>{I.stopPropagation()},onChange:I=>{I.stopPropagation(),Xe(z.id)},className:"w-4 h-4 cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:z.deal_id?z.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:z.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:z.description||"--"})]})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:z.account?.name||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:z.contact?.first_name&&z.contact?.last_name?`${z.contact.first_name} ${z.contact.last_name}`:z.contact?.first_name||z.contact?.last_name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Ie(z.stage)}`,children:lt(z.stage)})}),n.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",z.amount?.toLocaleString()||"0"]}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:z.close_date||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:z.assigned_deals?.first_name&&z.assigned_deals?.last_name?`${z.assigned_deals.first_name} ${z.assigned_deals.last_name}`:z.assigned_deals?.first_name||z.assigned_deals?.last_name||"--"})]},z.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:9,children:"No deals found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:He.length,pageSize:_,currentPage:w,onPrev:Oe,onNext:Ce,onPageSizeChange:z=>{E(z),S(1)},pageSizeOptions:[10,20,30,40,50],label:"deals"}),p&&n.jsx(IFe,{onClose:Tt,formData:ke,setFormData:Te,isEditing:D,onSubmit:$e,isSubmitting:T||F,accounts:V,contacts:Y,users:_e,currentAccount:pe,currentContact:Pe}),c&&n.jsx(cJ,{relatedActs:ae,selectedDeal:c,show:!!c,onClose:()=>u(null),activeTab:d,setActiveTab:f,onEdit:oe,onDelete:nt,onStatusUpdate:De}),L&&n.jsx(OFe,{open:!0,title:L.title,message:L.message,confirmLabel:L.confirmLabel,cancelLabel:L.cancelLabel,variant:L.variant,onConfirm:Nt,onCancel:wt,loading:F})]})}function OFe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":i==="archive"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function MFe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function IFe({onClose:e,formData:t,setFormData:a,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,accounts:o=[],contacts:l=[],users:c=[],currentAccount:u=null,currentContact:d=null}){const{user:f}=qt(),p=f?.role==="Sales";h.useEffect(()=>{!s&&p&&f&&!t.assigned_to&&a(w=>({...w,assigned_to:f.id}))},[s,p,f,t.assigned_to,a]);const[x,y]=h.useState(!1),N=w=>{if(w.preventDefault(),y(!0),!t.name?.trim()){W.error("Deal name is required.");return}const S=Number(t.amount);if(!t.amount||isNaN(S)||S<=0){W.error("Amount must be a number greater than 0.");return}if(!t.account_id){W.error("Please select an account.");return}if(!t.primary_contact_id){W.error("Please select a primary contact.");return}r?.(t)},v=w=>{w.target.id==="modalBackdrop"&&e()},j=h.useMemo(()=>{const w=String(t.account_id||"").trim(),S=Array.isArray(l)?l:[];return w?S.filter(_=>{const T=[_?.account_id,_?.accountId,_?.account?.id,_?.account?.account_id,_?.account?.accountId].find(A=>A!=null&&String(A).trim()!=="");return T?String(T)===w:!1}):S},[l,t.account_id]);return h.useEffect(()=>{const w=String(t.account_id||"").trim(),S=String(t.primary_contact_id||"").trim();if(!S||!w)return;j.some(E=>String(E?.id)===S)||a(E=>({...E,primary_contact_id:""}))},[t.account_id,t.primary_contact_id,j,a]),n.jsx("div",{id:"modalBackdrop",onClick:v,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:w=>w.stopPropagation(),children:[n.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Deal":"Create Deal"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:N,noValidate:!0,children:[n.jsx(EA,{label:"Deal Name",name:"name",value:t.name,onChange:w=>a({...t,name:w.target.value}),placeholder:"Enter deal name",required:!0,isSubmitted:x,className:"md:col-span-2"}),n.jsx(LA,{label:"Account",value:t.account_id||"",onChange:w=>a({...t,account_id:w}),items:o||[],getLabel:w=>w?.name??"",placeholder:"Search account...",disabled:i,currentItem:u,required:!0,isSubmitted:x}),n.jsx(LA,{label:"Primary Contact",value:t.primary_contact_id||"",onChange:w=>a({...t,primary_contact_id:w}),items:j||[],getLabel:w=>`${w?.first_name??""} ${w?.last_name??""}`.trim()||w?.email||"",placeholder:"Search contact...",disabled:i,currentItem:d,required:!0,isSubmitted:x}),n.jsx(u8,{label:"Stage",name:"stage",value:t.stage,onChange:w=>a({...t,stage:w.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}],disabled:i}),n.jsx(EA,{label:"Amount",name:"amount",type:"number",step:"0",value:t.amount,onChange:w=>a({...t,amount:w.target.value}),placeholder:"0",required:!0,isSubmitted:x}),n.jsx(u8,{label:"Currency",name:"currency",value:t.currency||"PHP",onChange:w=>a({...t,currency:w.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),n.jsx(EA,{label:"Close Date",name:"close_date",type:"date",value:t.close_date||"",onChange:w=>a({...t,close_date:w.target.value}),disabled:i}),n.jsx(LA,{label:"Assign To",value:t.assigned_to||"",onChange:w=>a({...t,assigned_to:w}),items:c||[],getLabel:w=>`${w?.first_name??""} ${w?.last_name??""}`.trim()||w?.email||"",placeholder:"Search assignee...",required:!0,disabled:i||p,className:"md:col-span-2"}),n.jsx(RFe,{label:"Description",name:"description",value:t.description,onChange:w=>a({...t,description:w.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Deal":"Save Deal"})]})]})]})})}function EA({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:u=!1}){const d=u&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100
          ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function u8({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))})]})}function LA({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",currentItem:c=null,required:u=!1,isSubmitted:d=!1}){const f=d&&u&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",u&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx($Fe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,currentItem:c,hasError:f})]})}function $Fe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,currentItem:l=null,hasError:c={hasError:c}}){const[u,d]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),N=e.find(w=>String(w.id)===String(t))||l,v=N?s(N):"",j=h.useMemo(()=>{const w=f.trim().toLowerCase();return(w?e.filter(_=>(s(_)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&d(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{u||p("")},[u]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:u?f:v,placeholder:r,onFocus:()=>!i&&d(!0),onChange:w=>{p(w.target.value),u||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${c?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),u&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:j.length>0?j.map(w=>{const S=String(w.id),_=s(w),E=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${E?"bg-blue-50":""}`,children:_||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function RFe({label:e,name:t,value:a,onChange:s,placeholder:r,required:i=!1,disabled:o=!1,className:l="",rows:c=3}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,required:i,disabled:o,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}const PA=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],DA={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:"",subtotal:0,tax_rate:0,tax_amount:0,discount_type:"",discount_value:0,discount_amount:0,currency:"PHP",items:[]},Ii=e=>{if(!e)return"Draft";const t=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[t]||"Draft"},OA=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",zFe=e=>{switch(Ii(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},FFe=e=>{switch(Ii(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},wb=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",_g=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",UFe=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const t=new Date(e);if(isNaN(t.getTime()))return"";const a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`}catch{return""}},MA=(e,t)=>{if(!e||t==null||t==="")return"";const a=Number(t);if(Number.isNaN(a))return"";const s=new Date(e);return isNaN(s.getTime())?"":(s.setDate(s.getDate()+a),s.toISOString().slice(0,10))},m8=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},IA=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},$w=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},BFe=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const s of e){const r=localStorage.getItem(s);if(r)try{const i=JSON.parse(r),o=$w(i);if(o)return o}catch{}}const t=localStorage.getItem("user_id"),a=$w(t);return a||null},HFe=e=>{if(!e)return"";const a=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""},qFe=e=>{if(!e)return"";const a=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""};function WFe(){const e=jt(),t=Jt(),{user:a}=qt(),s=a?.company?.currency||"";h.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[r,i]=h.useState([]),[o,l]=h.useState(!1),[c,u]=h.useState([]),[d,f]=h.useState([]),[p,x]=h.useState([]),[y,N]=h.useState([]),[v,j]=h.useState(null),[w,S]=h.useState(null),[_,E]=h.useState(!1),[T,A]=h.useState(!1),[L,M]=h.useState(!1),[F,$]=h.useState(null),[D,q]=h.useState(!1),[G,U]=h.useState(!1),[V,Z]=h.useState(null),[Y,le]=h.useState(DA),[_e,te]=h.useState(""),[ae,ye]=h.useState("Filter by Status"),[Ne,he]=h.useState(null),ve=h.useCallback(async()=>{if(w)try{U(!0);const B=(await se.get("/company/invoice-info"))?.data;e(`/sales/quotes/${encodeURIComponent(w.id)}/print`,{state:{quote:w,companyInfo:B}})}catch(k){const B=k?.response?.data?.detail||k?.message||"Failed to open print page.";W.error(B)}finally{U(!1)}},[w,e]),[ne,Se]=h.useState(1),[de,ke]=h.useState(10),[Te,pe]=h.useState("Overview"),[ze,Pe]=h.useState("Draft"),[We,tt]=h.useState([]),[lt,Ie]=h.useState(null),{comments:rt,addComment:He,refresh:Ke}=ka({relatedType:"quote",relatedId:w?.id});h.useEffect(()=>{w?.id&&Ke()},[w?.id,Ke]),h.useEffect(()=>{const B=t.state?.quoteID;if(B){Ie(B),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(lt&&r.length>0&&!o){const k=r.find(B=>B.id===lt);k?S(k):W.error("Quote not found."),Ie(null)}},[lt,r,o]),h.useEffect(()=>{let k=!0;return(async()=>{const xe=BFe();if(xe&&k){j(xe);return}try{const Ae=await se.get("/auth/me"),Ue=$w(Ae?.data);if(Ue&&k){j(Ue);return}}catch{}try{const Ae=await se.get("/users/me"),Ue=$w(Ae?.data);if(Ue&&k){j(Ue);return}}catch{}k&&j(null)})(),()=>{k=!1}},[]);const Je=h.useCallback(k=>k&&d.find(xe=>String(xe.id)===String(k))?.name||"",[d]),Oe=h.useCallback(k=>{if(!k)return"";const B=p.find(xe=>String(xe.id)===String(k));return B?`${B.first_name} ${B.last_name}`.trim():""},[p]),Ce=h.useCallback(k=>{if(!k)return"--";const B=c.find(xe=>String(xe.id)===String(k));return B?.deal_name||B?.name||`Deal #${m8(k)}`},[c]),fe=h.useCallback(k=>{const B=c.find(Ue=>String(Ue.id)===String(k)),xe=HFe(B);let Ae=qFe(B);if(!Ae&&xe){const Ue=p.filter(Ge=>String(Ge.account_id||"")===String(xe));if(Ue.length>0){const Ge=[...Ue].sort((ct,yt)=>{const Et=`${ct.first_name||""} ${ct.last_name||""}`.trim().toLowerCase(),Kt=`${yt.first_name||""} ${yt.last_name||""}`.trim().toLowerCase();return Et.localeCompare(Kt)});Ae=String(Ge[0].id)}}if(xe&&Ae){const Ue=p.find(Ge=>String(Ge.id)===String(Ae));Ue?.account_id&&String(Ue.account_id)!==String(xe)&&(Ae="")}return{accountId:xe||"",contactId:Ae||""}},[c,p]),ue=h.useCallback(k=>{if(!k)return"--";if(k.deal?.deal_name)return k.deal.deal_name;if(k.deal?.name)return k.deal.name;const B=k.deal_id||k.deal?.id;return B?Ce(B):"--"},[Ce]),H=h.useCallback(k=>{if(!k)return"--";if(k.account?.name)return k.account.name;let B=k.account_id||k.account?.id;if(!B){const xe=k.deal_id||k.deal?.id;xe&&(B=fe(xe).accountId)}return B?Je(B)||`Account #${B}`:"--"},[fe,Je]),K=h.useCallback(k=>{if(!k)return"--";if(k.contact?.first_name||k.contact?.last_name)return`${k.contact?.first_name||""} ${k.contact?.last_name||""}`.trim()||"--";let B=k.contact_id||k.contact?.id;if(!B){const Ae=k.deal_id||k.deal?.id;Ae&&(B=fe(Ae).contactId)}return(B?Oe(B):"")||(B?`Contact #${B}`:"--")},[fe,Oe]),we=h.useCallback(async(k=null)=>{l(!0);try{const B=await se.get("/quotes/admin/fetch-all"),Ae=[...Array.isArray(B.data)?B.data:[]].sort((Ue,Ge)=>{const ct=Ue?.created_at||Ue?.updated_at||0,yt=Ge?.created_at||Ge?.updated_at||0;return new Date(yt)-new Date(ct)});if(i(Ae),k){const Ue=Ae.find(Ge=>Ge.id===k);S(Ue||null)}}catch(B){console.error(B),i([]),B.response?.status===403?W.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):W.error("Failed to fetch quotes. Please try again later.")}finally{l(!1)}},[]),Me=h.useCallback(async()=>{try{const k=await se.get("/deals/admin/fetch-all");u(Array.isArray(k.data)?k.data:[])}catch(k){console.error(k),k.response?.status===403&&W.warn("Unable to load deals (permission denied).")}},[]),ce=h.useCallback(async()=>{try{const k=await se.get("/accounts/admin/fetch-all");f(Array.isArray(k.data)?k.data:[])}catch(k){console.error(k),k.response?.status===403&&W.warn("Unable to load accounts (permission denied).")}},[]),oe=h.useCallback(async()=>{try{const k=await se.get("/contacts/admin/fetch-all");x(Array.isArray(k.data)?k.data:[])}catch(k){console.error(k),k.response?.status===403&&W.warn("Unable to load contacts (permission denied).")}},[]),De=h.useCallback(async()=>{try{const k=await se.get("/users/all");N(Array.isArray(k.data)?k.data:[])}catch(k){console.error(k),k.response?.status===403&&W.warn("Unable to load users (permission denied).")}},[]);h.useEffect(()=>{we(),Me(),ce(),oe(),De()},[we,Me,ce,oe,De]);const $e=h.useMemo(()=>{const k=_e.trim().toLowerCase(),B=ae.trim();return r.filter(xe=>{const Ae=ue(xe),Ue=H(xe),Ge=K(xe),ct=MA(xe.presented_date,xe.validity_days),yt=[xe.quote_id,Ae,Ue,Ge,xe.total_amount?.toString(),xe.validity_days?.toString(),xe.presented_date?_g(xe.presented_date):"",ct?_g(ct):"",xe.assigned_user?.first_name,xe.assigned_user?.last_name,xe.creator?.first_name,xe.creator?.last_name,xe.status,xe.notes,wb(xe.created_at),wb(xe.updated_at)],Et=k===""||yt.some(Ea=>Ea==null?!1:Ea.toString().toLowerCase().includes(k)),Kt=B==="Filter by Status"||Ii(xe.status)===B;return Et&&Kt})},[r,_e,ae,ue,H,K]),Xe=Math.max(1,Math.ceil($e.length/de)||1);h.useEffect(()=>Se(1),[_e,ae]),h.useEffect(()=>{Se(k=>{const B=Math.max(1,Math.ceil($e.length/de)||1);return k>B?B:k})},[$e.length,de]);const Ze=h.useMemo(()=>{const k=(ne-1)*de;return $e.slice(k,k+de)},[$e,ne,de]),mt=()=>Se(k=>Math.max(k-1,1)),nt=()=>Se(k=>Math.min(k+1,Xe)),Nt=k=>{S(k),pe("Overview"),Pe(Ii(k?.status)||"Draft")},wt=()=>{S(null),pe("Overview")},Tt=k=>{k.target.id==="quoteModalBackdrop"&&!D&&wt()},Re=h.useCallback(()=>{E(!1),A(!1),Z(null),le(DA),M(!1)},[]),me=k=>{k.target.id==="modalBackdrop"&&!L&&!D&&Re()},ie=k=>{const{name:B,value:xe}=k.target;if(B==="deal_id"){const{accountId:Ae,contactId:Ue}=fe(xe);le(Ge=>({...Ge,deal_id:xe,account_id:Ae,contact_id:Ue}));return}le(Ae=>({...Ae,[B]:xe}))},Fe=()=>{const k={...DA};a?.role?.toUpperCase()==="SALES"&&v&&(k.assigned_to=String(v)),le(k),A(!1),Z(null),E(!0)},Le=k=>{if(!k)return;S(null);const B=k.deal?.id?String(k.deal.id):k.deal_id?String(k.deal_id):"",xe=B?fe(B):{accountId:"",contactId:""},Ae=k.account?.id?String(k.account.id):k.account_id?String(k.account_id):xe.accountId,Ue=k.contact?.id?String(k.contact.id):k.contact_id?String(k.contact_id):xe.contactId,Ge=k.assigned_user?.id?String(k.assigned_user.id):k.assigned_to?String(k.assigned_to):"";le({deal_id:B,account_id:Ae||"",contact_id:Ue||"",total_amount:k.total_amount?.toString()||"",presented_date:UFe(k.presented_date),validity_days:k.validity_days!==null&&k.validity_days!==void 0?String(k.validity_days):"",status:Ii(k.status)||"Draft",assigned_to:Ge,notes:k.notes||"",subtotal:parseFloat(k.subtotal)||0,tax_rate:parseFloat(k.tax_rate)||0,tax_amount:parseFloat(k.tax_amount)||0,discount_type:k.discount_type||"",discount_value:parseFloat(k.discount_value)||0,discount_amount:parseFloat(k.discount_amount)||0,currency:k.currency||"PHP",items:Array.isArray(k.items)?k.items.map(ct=>({id:ct.id,item_type:ct.item_type||"Product",name:ct.name||"",description:ct.description||"",sku:ct.sku||"",variant:ct.variant||"",unit:ct.unit||"pcs",quantity:parseFloat(ct.quantity)||1,unit_price:parseFloat(ct.unit_price)||0,discount_percent:parseFloat(ct.discount_percent)||0,discount_amount:parseFloat(ct.discount_amount)||0,line_total:parseFloat(ct.line_total)||0,sort_order:ct.sort_order||0})):[]}),A(!0),Z(k.id),E(!0)},be=k=>{if(k.target.checked){const B=Ze.filter(xe=>xe.created_by===v).map(xe=>xe.id);tt(B)}else tt([])},ee=k=>{tt(B=>B.includes(k)?B.filter(xe=>xe!==k):[...B,k])},O=Ze.filter(k=>k.created_by===v),z=k=>{if(!k)return;const B=k.quote_id||"this quote";$({title:"Archive Quote",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:B}),"? This action cannot be undone."]}),confirmLabel:"Archive Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:k.id,name:B}})},I=async()=>{We.length!==0&&$({title:"Archive Quotes",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:We.length})," selected quotes? This action cannot be undone."]}),confirmLabel:`Archive ${We.length} Quote(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",quote_ids:We}})},[Q,ge]=h.useState(!1),re=k=>{if(k.preventDefault(),ge(!0),!v){W.error("Unable to determine current user. Please log in again.");return}if(!Y.deal_id){W.error("Deal is required.");return}if(!Y.assigned_to&&a?.role?.toUpperCase()!=="SALES"){W.error("Assigned To is required.");return}const xe=fe(Y.deal_id),Ae=Y.items.map((Et,Kt)=>({item_type:Et.item_type||"Product",name:Et.name,description:Et.description||null,sku:Et.sku||null,variant:Et.variant||null,unit:Et.unit||null,quantity:parseFloat(Et.quantity)||1,unit_price:parseFloat(Et.unit_price)||0,discount_percent:parseFloat(Et.discount_percent)||0,sort_order:Et.sort_order??Kt})),Ue={deal_id:Number(Y.deal_id),account_id:xe.accountId?Number(xe.accountId):null,contact_id:xe.contactId?Number(xe.contactId):null,subtotal:parseFloat(Y.subtotal)||0,tax_rate:parseFloat(Y.tax_rate)||0,tax_amount:parseFloat(Y.tax_amount)||0,discount_type:Y.discount_type||null,discount_value:parseFloat(Y.discount_value)||0,discount_amount:parseFloat(Y.discount_amount)||0,total_amount:parseFloat(Y.total_amount)||0,currency:Y.currency||"PHP",presented_date:Y.presented_date||null,validity_days:Y.validity_days===""?null:Number(Y.validity_days),status:Y.status||"Draft",assigned_to:Y.assigned_to?Number(Y.assigned_to):null,notes:Y.notes?.trim()||null,items:Ae},Ge=T&&V?"update":"create",ct=Ce(Y.deal_id),yt=Ge==="create"?{...Ue,created_by_id:Number(v)}:Ue;$({title:Ge==="create"?"Confirm New Quote":"Confirm Update",message:Ge==="create"?n.jsxs("span",{children:["Are you sure you want to create a quote for"," ",n.jsx("span",{className:"font-semibold",children:ct}),"?"]}):n.jsxs("span",{children:["Save changes to"," ",n.jsx("span",{className:"font-semibold",children:ct}),"?"]}),confirmLabel:Ge==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:Ge,payload:yt,targetId:V||null,name:ct}})},Ee=async()=>{if(!F?.action){$(null);return}const{action:k}=F,{type:B,payload:xe,targetId:Ae,name:Ue}=k;q(!0);try{if(B==="create")M(!0),await se.post("/quotes/admin",xe),W.success("Quote created successfully."),Re(),await we();else if(B==="update"){if(!Ae)throw new Error("Missing quote identifier for update.");M(!0),await se.put(`/quotes/admin/${Ae}`,xe),W.success("Quote updated successfully."),Re(),await we(),w?.id===Ae&&S(null)}else if(B==="delete"){if(!Ae)throw new Error("Missing quote identifier for deletion.");const Ge=w?.id;he(Ae),await se.delete(`/quotes/admin/${Ae}`),W.success(`Quote "${Ue}" archived successfully.`),await we(Ge&&Ge!==Ae?Ge:null),Ge===Ae&&S(null)}else B==="bulk-delete"&&(await se.post("/quotes/admin/bulk-delete",{quote_ids:We}),W.success(`Successfully archived ${We.length} quotes`),tt([]),await we())}catch(Ge){console.error(Ge);const ct=B==="create"?"Failed to create quote. Please review the details and try again.":B==="update"?"Failed to update quote. Please review the details and try again.":"Failed to archive quote. Please try again.";W.error(ct),(B==="create"||B==="update")&&M(!1),B==="delete"&&he(null)}finally{(B==="create"||B==="update")&&M(!1),B==="delete"&&he(null),q(!1),$(null)}},Qe=()=>{D||$(null)},gt=h.useCallback((k,B)=>{const xe=k?.deal_id??k?.deal?.id??"",Ae=xe?Number(xe):null,Ue=Ae?fe(String(Ae)):{accountId:"",contactId:""},Ge=k?.account_id??k?.account?.id??Ue.accountId??null,ct=k?.contact_id??k?.contact?.id??Ue.contactId??null,yt=k?.total_amount??0,Et=k?.assigned_to??k?.assigned_user?.id??null;return{deal_id:Ae,account_id:Ge!=null&&String(Ge).trim()!==""?Number(Ge):null,contact_id:ct!=null&&String(ct).trim()!==""?Number(ct):null,total_amount:Number(yt),presented_date:k?.presented_date||null,validity_days:k?.validity_days===""||k?.validity_days===void 0||k?.validity_days===null?null:Number(k.validity_days),status:B,assigned_to:Et!=null&&String(Et).trim()!==""?Number(Et):null,notes:k?.notes?.trim()||null}},[fe]),Ct=h.useCallback(async()=>{if(!w?.id)return;const k=Ii(ze),B=[k,k.toLowerCase()],xe=async Ae=>se.patch(`/quotes/admin/${w.id}/status`,{status:Ae},{headers:{"Content-Type":"application/json"}});try{let Ae=!1;for(const Ue of B)try{await xe(Ue),Ae=!0;break}catch(Ge){if(Ge?.response?.status===422)continue;throw Ge}if(!Ae){const Ue=gt(w,k);if(!Ue.deal_id){W.error("Cannot update status: missing deal_id on selected quote.");return}if(!Ue.total_amount||Ue.total_amount<=0){W.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await se.put(`/quotes/admin/${w.id}`,Ue)}W.success(`Quote status updated to ${k}`),S(null),pe("Overview"),await we()}catch(Ae){console.error(Ae);const Ue=Ae?.response?.data?.message||(Ae?.response?.data?.errors?Object.values(Ae.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";W.error(Ue)}},[w,ze,we,gt]),kt=[{label:"Filter by Status",value:"Filter by Status"},...PA.map(k=>({label:k.label,value:k.value}))],Dt=F?.action?.type==="delete"?F.action.targetId:null,on=w&&(Ne===w.id||Dt===w.id),Qn=w&&Ne===w.id,ia=w?n.jsx("div",{id:"quoteModalBackdrop",onClick:Tt,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:k=>k.stopPropagation(),children:[n.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:n.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),n.jsx("button",{onClick:wt,className:"text-gray-500 hover:text-white transition cursor-pointer",children:n.jsx(Xn,{size:25})})]})}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:ue(w)}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${FFe(w.status)}`,children:OA(w.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-white text-gray-700 px-4 py-2 rounded-md border border-gray-300 hover:bg-gray-50 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-gray-300",onClick:ve,disabled:G||L||D,children:[n.jsx(fn,{className:"mr-2"}),G?"Preparing...":"Print Quotation"]}),v===w.created_by&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Le(w),disabled:D||F?.action?.type==="update"&&F.action.targetId===w.id,children:[n.jsx(ga,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>z(w),disabled:!!on,children:Qn?"Archiving...":n.jsxs(n.Fragment,{children:[n.jsx(Zt,{className:"mr-2"}),"Archive"]})})]})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-1 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(k=>n.jsx("button",{onClick:()=>pe(k),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${Te===k?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:k},k))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[Te==="Overview"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Quote ID:"}),n.jsx("p",{children:IA(w.quote_id)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Deal:"}),n.jsx("p",{children:ue(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Account:"}),n.jsx("p",{children:H(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact:"}),n.jsx("p",{children:K(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Total Amount:"}),n.jsx("p",{children:w.total_amount?`${s}${Number(w.total_amount).toLocaleString()}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Presented Date:"}),n.jsx("p",{children:_g(w.presented_date)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Validity Days:"}),n.jsx("p",{children:w.validity_days!==null&&w.validity_days!==void 0?w.validity_days:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),n.jsx("p",{children:_g(MA(w.presented_date,w.validity_days))||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:OA(w.status)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:w.assigned_user?`${w.assigned_user.first_name} ${w.assigned_user.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:w.creator?`${w.creator.first_name} ${w.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:wb(w.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:wb(w.updated_at)||"N/A"})]})]}),w.items&&w.items.length>0&&n.jsx("div",{className:"mt-6",children:n.jsx(yd,{items:w.items,onChange:()=>{},currencySymbol:s,readOnly:!0,taxRate:parseFloat(w.tax_rate)||0,discountType:w.discount_type,discountValue:parseFloat(w.discount_value)||0})})]}),Te==="Notes"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),n.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:w.notes||"No notes available."})]}),n.jsx(Ta,{comments:rt,onAddComment:He})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/sales/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call regarding Quote ${IA(w.quote_id)}`,assigned_to:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Ot,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/sales/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${w.quote_id}`,assignedTo:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",status:"Planned"}}}),children:[n.jsx(Pt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/sales/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${w.quote_id}`,assignedTo:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:ze||Ii(w.status)||"Draft",onChange:k=>Pe(k.target.value),children:PA.map(k=>n.jsx("option",{value:k.value,children:k.label},k.value))}),n.jsx("button",{onClick:Ct,disabled:Ii(ze)===Ii(w.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Ii(ze)===Ii(w.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,Be=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[o&&n.jsx(Wt,{message:"Loading quotes..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(fn,{className:"mr-2 text-blue-600"})," Quotes"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto gap-2",children:n.jsxs("button",{onClick:()=>{Fe(),ge(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(xn,{className:"mr-2"})," Add Quote"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Vt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search quotes",value:_e,onChange:k=>te(k.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:ae,onChange:k=>ye(k.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:kt.map(k=>n.jsx("option",{value:k.value,children:k.label},k.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:O.length>0&&We.length===O.length,onChange:be,className:"cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),n.jsx("th",{className:"py-3 px-4",children:"Deal"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Expiry Date"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:We.length>0?n.jsx("button",{onClick:I,className:"text-orange-600 hover:text-orange-800 transition p-1 rounded-full hover:bg-orange-50",title:`Archive ${We.length} selected items`,children:n.jsx(Zt,{size:18})}):""})]})}),n.jsx("tbody",{children:o?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"Loading quotes..."})}):$e.length>0?Ze.map(k=>{const B=MA(k.presented_date,k.validity_days);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>Nt(k),children:[n.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:xe=>xe.stopPropagation(),children:k.created_by===v&&n.jsx("input",{type:"checkbox",checked:We.includes(k.id),onChange:()=>ee(k.id),className:"cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:IA(k.quote_id)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:ue(k)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-sm text-gray-700 break-words",children:H(k)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:K(k)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-700",children:k.total_amount?`${s}${Number(k.total_amount).toLocaleString()}`:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${zFe(k.status)}`,children:OA(k.status)})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{children:k.assigned_user?`${k.assigned_user.first_name} ${k.assigned_user.last_name}`:"Unassigned"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-500 text-xs",children:_g(B)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top text-center w-24"})]},k.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"No quotes found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:$e.length,pageSize:de,currentPage:ne,onPrev:mt,onNext:nt,onPageSizeChange:k=>{ke(k),Se(1)},pageSizeOptions:[10,20,30,40,50],label:"quotes"})]}),_t=_?n.jsx("div",{id:"modalBackdrop",onClick:me,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:k=>k.stopPropagation(),children:[n.jsx("button",{onClick:()=>{Re(),ge(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:L||D,children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:T?"Edit Quote":"Add New Quote"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:re,children:[n.jsx(g8,{label:"Deal",name:"deal_id",value:Y.deal_id,onChange:k=>{const{accountId:B,contactId:xe}=fe(k);le(Ae=>({...Ae,deal_id:k,account_id:B,contact_id:xe}))},items:Array.isArray(c)?c:[],getLabel:k=>`${m8(k?.deal_id??"")} ${k?.name??""}`.trim(),placeholder:"Search deal...",required:!0,isSubmitted:Q,disabled:L||c.length===0,className:"md:col-span-2"}),n.jsx(h8,{label:"Account",value:Je(Y.account_id)||(Y.account_id?`Account #${Y.account_id}`:""),disabled:!0}),n.jsx(h8,{label:"Contact",value:Oe(Y.contact_id)||(Y.contact_id?`Contact #${Y.contact_id}`:""),disabled:!0}),n.jsx("div",{className:"md:col-span-2 mt-2",children:n.jsx(yd,{items:Y.items,onChange:k=>le(B=>({...B,items:k})),currencySymbol:s,readOnly:L,taxRate:Y.tax_rate,discountType:Y.discount_type,discountValue:Y.discount_value,onTotalsChange:k=>{le(B=>({...B,subtotal:k.subtotal,discount_amount:k.discount_amount,tax_amount:k.tax_amount,total_amount:k.total_amount}))}})}),n.jsxs("div",{className:"md:col-span-2 mt-2 p-4 bg-gray-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Pricing Settings"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Discount Type"}),n.jsxs("select",{value:Y.discount_type||"",onChange:k=>le(B=>({...B,discount_type:k.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",disabled:L,children:[n.jsx("option",{value:"",children:"No Discount"}),n.jsx("option",{value:"percentage",children:"Percentage (%)"}),n.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-600 text-xs mb-1",children:["Discount"," ",Y.discount_type==="percentage"?"%":"Amount"]}),n.jsx("input",{type:"number",value:Y.discount_value||"",onChange:k=>le(B=>({...B,discount_value:k.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:Y.discount_type==="percentage"?"100":void 0,step:"0.01",disabled:L||!Y.discount_type})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Tax Rate (%)"}),n.jsx("input",{type:"number",value:Y.tax_rate||"",onChange:k=>le(B=>({...B,tax_rate:k.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:"100",step:"0.01",disabled:L})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Total Amount"}),n.jsxs("div",{className:"w-full bg-gray-100 border border-gray-300 rounded-md px-2 py-1.5 text-sm font-medium",children:[s,parseFloat(Y.total_amount||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),n.jsx(f8,{label:"Presented Date",name:"presented_date",type:"date",value:Y.presented_date,onChange:ie,disabled:L}),n.jsx(f8,{label:"Validity Days",name:"validity_days",type:"number",value:Y.validity_days,onChange:ie,placeholder:"30",disabled:L}),a?.role?.toUpperCase()==="SALES"?n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assigned To ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm bg-white text-black font-medium",children:(()=>{const k=y.find(B=>String(B.id)===Y.assigned_to);return k?`${k.first_name} ${k.last_name}`:"Assigning..."})()})]}):n.jsx(g8,{label:"Assigned To",value:Y.assigned_to||"",onChange:k=>le(B=>({...B,assigned_to:k})),items:Array.isArray(y)?y:[],getLabel:k=>{const B=`${k?.first_name??""} ${k?.last_name??""}`.trim();return B?k?.role?`${B} (${k.role})`:B:k?.email||""},placeholder:"Search assignee...",required:!0,isSubmitted:Q,disabled:L}),n.jsx(GFe,{label:"Status",name:"status",value:Y.status,onChange:ie,options:PA,required:!0,disabled:L}),n.jsx(YFe,{label:"Notes",name:"notes",value:Y.notes,onChange:ie,placeholder:"Additional details...",rows:3,disabled:L,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{Re(),ge(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-gray-400 border border-gray-300 rounded hover:bg-gray-500 transition disabled:opacity-70",disabled:L||D,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:L||D,children:L?"Saving...":T?"Update Quote":"Save Quote"})]})]})]})}):null,X=F?n.jsx(QFe,{open:!0,title:F.title,message:F.message,confirmLabel:F.confirmLabel,cancelLabel:F.cancelLabel,variant:F.variant,onConfirm:Ee,onCancel:Qe,loading:D}):null;return n.jsxs(n.Fragment,{children:[w?ia:Be,_t,X]})}function f8({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:u=!1}){const d=u&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function h8({label:e,value:t,className:a="",disabled:s=!0}){return n.jsxs("div",{className:a,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("input",{type:"text",value:t??"",disabled:s,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function GFe({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){const c=a!=null?String(a):"",d=r.some(f=>String(f.value)===c)?c:"";return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:d,onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(f=>n.jsx("option",{value:String(f.value??""),children:f.label},f.value??f.label))})]})}function g8({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:u=!1}){const d=u&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(VFe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:d})]})}function VFe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,u]=h.useState(!1),[d,f]=h.useState(""),p=h.useRef(null),x=e.find(v=>String(v.id)===String(t)),y=x?s(x):"",N=h.useMemo(()=>{const v=d.trim().toLowerCase();return(v?e.filter(w=>(s(w)||"").toLowerCase().includes(v)):e).slice(0,o)},[e,d,s,o]);return h.useEffect(()=>{const v=j=>{p.current&&!p.current.contains(j.target)&&u(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?d:y,placeholder:r,onFocus:()=>!i&&u(!0),onChange:v=>{f(v.target.value),c||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:N.length>0?N.map(v=>{const j=String(v.id),w=s(v),S=String(t)===j;return n.jsx("button",{type:"button",onClick:()=>{a(j),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},j)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function YFe({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function QFe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function KFe(){const{userRole:e}=Ks();return n.jsx(o1,{currentUserRole:e,currentUserId:null})}function XFe(){h.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,t]=h.useState(null),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Actions"),[o,l]=h.useState(1),[c,u]=h.useState(10),d=async()=>{try{const w=await se.get("/logs/read-all");t(w.data)}catch(w){console.error("Error fetching audit logs:",w)}};h.useEffect(()=>{d()},[]);const f=h.useMemo(()=>{if(!Array.isArray(e))return[];const w=a.trim().toLowerCase(),S=r?.toUpperCase?.()||"ALL";return e.filter(E=>{const T=E.timestamp?new Date(E.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",A=`${E.entity_type||""} ${E.entity_name||E.entity_details?.name||E.entity_details?.title||E.entity_id||""}`,L=`${E.logger?.first_name||""} ${E.logger?.last_name||""}`,M=[T,L,E.action,E.entity_type,A,E.description],F=w===""||M.some(D=>D==null?!1:D.toString().toLowerCase().includes(w)),$=S==="FILTER BY ACTIONS"||(E.action||"").toUpperCase()===S;return F&&$}).sort((E,T)=>{const A=E.timestamp?new Date(E.timestamp).getTime():0;return(T.timestamp?new Date(T.timestamp).getTime():0)-A})},[e,a,r]),p=Math.max(1,Math.ceil(f.length/c)||1);h.useEffect(()=>{l(1)},[a,r]),h.useEffect(()=>{l(w=>{const S=Math.max(1,Math.ceil(f.length/c)||1);return w>S?S:w})},[f.length,c]);const x=h.useMemo(()=>{const w=(o-1)*c;return f.slice(w,w+c)},[f,o,c]);f.length===0||(o-1)*c+1,Math.min(o*c,f.length);const y=()=>l(w=>Math.max(w-1,1)),N=()=>l(w=>Math.min(w+1,p)),v=()=>{if(!f.length){Qx.error("No logs to export!");return}const w=["Timestamp","User","Action","Resource","Details"],S=f.map(L=>[new Date(L.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${L.logger?.first_name||""} ${L.logger?.last_name||""}`.trim(),L.action,`${L.entity_type}: ${L.entity_id}`,L.description||""]),_=[w.join(","),...S.map(L=>L.map(M=>`"${String(M).replace(/"/g,'""')}"`).join(","))].join(`
`),E=new Blob([_],{type:"text/csv;charset=utf-8;"}),T=URL.createObjectURL(E),A=document.createElement("a");A.href=T,A.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(A),A.click(),document.body.removeChild(A),URL.revokeObjectURL(T)},j=w=>{switch((w||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&n.jsx(Wt,{message:"Loading audit logs..."}),n.jsx(Yx,{toastOptions:{duration:1e3}}),n.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[n.jsx(Pt,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),n.jsxs("p",{className:"text-sm text-blue-700",children:[n.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ks,{className:"text-blue-600",size:20}),n.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:v,children:[n.jsx(qo,{className:"mr-2"}),"Export Logs"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[n.jsx(Vt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search audit logs",value:a,onChange:w=>s(w.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:r,onChange:w=>i(w.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),n.jsx("option",{value:"CREATE",children:"CREATE"}),n.jsx("option",{value:"DELETE",children:"DELETE"}),n.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),n.jsx("th",{className:"py-3 px-4",children:"User"}),n.jsx("th",{className:"py-3 px-4",children:"Action"}),n.jsx("th",{className:"py-3 px-4",children:"Resource"}),n.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),n.jsx("tbody",{children:Array.isArray(f)&&f.length>0?x.map((w,S)=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(w.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.name}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${j(w.action)}`,children:w.action})}),n.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[w.entity_type,": ",w.entity_id]}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.description})]},S)):n.jsx("tr",{children:n.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:f.length,pageSize:c,currentPage:o,onPrev:y,onNext:N,onPageSizeChange:w=>{u(w),l(1)},pageSizeOptions:[10,20,30,40,50],label:"logs"})]})}const p8=["Not started","In progress","Deferred","Completed"],x8={NOT_STARTED:"Not started","NOT STARTED":"Not started","TO DO":"Not started",IN_PROGRESS:"In progress","IN PROGRESS":"In progress",COMPLETED:"Completed",DEFERRED:"Deferred","Not started":"Not started","In progress":"In progress",Completed:"Completed",Deferred:"Deferred","In Progress":"In progress","To Do":"Not started",Review:"Deferred"},dJ=e=>e&&(x8[e]||x8[String(e).toUpperCase()])||"Not started",ZFe=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const a=t.getTimezoneOffset();return new Date(t.getTime()-a*60*1e3).toISOString().slice(0,16)},$A=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},JFe=e=>{const t=e.subject?.trim()??"",a=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),dJ(e.status);let r=null,i=null,o=null,l=null,c=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?o=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Quote"&&e.relatedTo2&&(c=Number(e.relatedTo2)));const u=e.assignedTo?Number(e.assignedTo):null,d=o||l||i||r,f=o?"Contact":l?"Deal":i?"Account":r?"Lead":c?"Quote":null;return{title:t,description:a,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:u,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:o,deal_id:l,quote_id:c,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:d,related_type:f}},eUe=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",a=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",o=G=>{if(!G)return"";const U=String(G).split("-");return U.length===3?`${U[0]}-${U[2]}`:String(G)},l=()=>e.lead?.id||e.lead_id,c=()=>e.account?.id||e.account_id,u=()=>e.contact?.id||e.contact_id,d=()=>e.deal?.id||e.deal_id,f=()=>e.quote?.id||e.quote_id,p=()=>e.task_assign_to?.id||e.assigned_to,x=()=>e.lead?.title||e.lead_id,y=()=>e.account?.name||e.account_id,N=()=>i||e.contact_id,v=()=>e.deal?.name||e.deal_id,j=()=>o(e.quote?.quote_id)||e.id;let w="Lead",S="",_="",E="",T="Lead",A="",L="",M="";const F=c(),$=y(),D=l(),q=x();if(F){w="Account",T="Account",A=$,S=String(F);const G=u(),U=d(),V=N(),Z=v(),Y=f(),le=j();G?(_="Contact",L="Contact",M=V,E=String(G)):U?(L="Deal",_="Deal",M=Z,E=String(U)):Y&&(L="Quote",_="Quote",M=le,E=String(Y))}else D?(T="Lead",A=q,w="Lead",S=String(D)):e.related_type==="Account"&&(w="Account",S=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:dJ(e.status),dueDate:s,dateAssigned:r,assignedToId:p()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.task_creator?.id??null,createdBy:a,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:T,relatedTo1Text:A,relatedType2Text:L,relatedTo2Text:M,subject:e.title,relatedType1:w,relatedTo1:S,relatedType2:_,relatedTo2:E}};function tUe(){h.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=qt(),[a,s]=h.useState("board"),[r,i]=h.useState(!1),[o,l]=h.useState(null),[c,u]=h.useState(!1),[d,f]=h.useState([]),[p,x]=h.useState(!0),[y,N]=h.useState(""),[v,j]=h.useState("Filter by Status"),[w,S]=h.useState("Filter by Priority"),[_,E]=h.useState([]),[T,A]=h.useState(1),[L,M]=h.useState(10),[F,$]=h.useState(null),[D,q]=h.useState(!1),[G,U]=h.useState([]),[V,Z]=h.useState(null),Y=jt(),le=Jt(),[_e,te]=h.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",createdById:null,relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""}),[ae,ye]=h.useState(null),Ne=Fx(zf(am,{activationConstraint:{distance:8}})),he=K=>{const{active:we}=K,Me=d.find(ce=>ce.id===we.id);Z(Me)},ve=async K=>{const{active:we,over:Me}=K;if(Z(null),!Me)return;const ce=we.id,oe=Me.id,De=d.find($e=>$e.id===ce);if(!(!De||De.status===oe)){f($e=>$e.map(Xe=>Xe.id===ce?{...Xe,status:oe}:Xe));try{const $e={title:De.title,description:De.description||"",priority:De.priority||"Normal",status:oe,due_date:De.dueDate||null,assigned_to:De.assignedToId||null,related_type_1:De.relatedType1||null,related_to_1:De.relatedTo1?parseInt(De.relatedTo1,10):null,related_type_2:De.relatedType2||null,related_to_2:De.relatedTo2?parseInt(De.relatedTo2,10):null};(!$e.related_to_1||isNaN($e.related_to_1))&&($e.related_to_1=null),(!$e.related_to_2||isNaN($e.related_to_2))&&($e.related_to_2=null),await se.put(`/tasks/${ce}`,$e),W.success(`Task moved to "${oe}"`)}catch($e){console.error("Failed to update task status:",$e),W.error("Failed to update task status"),f(Xe=>Xe.map(Ze=>Ze.id===ce?{...Ze,status:De.status}:Ze))}}},ne=()=>{Z(null)};h.useEffect(()=>{const K=le.state?.openTaskModal,we=le.state?.initialTaskData,Me=le.state?.taskID;K?(i(!0),we&&te(ce=>({...ce,...we})),Y(le.pathname,{replace:!0,state:{}})):Me&&(ye(Me),Y(le.pathname,{replace:!0,state:{}}))},[le,Y]),h.useEffect(()=>{if(ae&&d.length>0&&!p){const K=d.find(we=>we.id===ae);K?Te(K,!0):W.error("Task not found."),ye(null)}},[ae,d,p]);const Se=async()=>{try{const K=await se.get("/users/all");E(Array.isArray(K.data)?K.data:[])}catch(K){console.error("Failed to fetch users:",K),W.error("Failed to fetch users.")}},de=async()=>{try{x(!0);const K=await se.get("/tasks/all"),Me=(Array.isArray(K.data)?K.data:[]).map(eUe);Me.sort((ce,oe)=>{const De=ce.createdAt?new Date(ce.createdAt):0;return(oe.createdAt?new Date(oe.createdAt):0)-De}),f(Me),a==="list"&&A(1)}catch(K){console.error("Failed to load tasks:",K),W.error("Failed to load tasks.")}finally{x(!1)}};h.useEffect(()=>{if(!t&&e){Se(),de();const K=CN(e.id),we=new WebSocket(K);return we.onopen=()=>{console.log(" Connected to task notifications")},we.onmessage=Me=>{try{const ce=JSON.parse(Me.data);ce.type==="task_status_updated"&&(W.info(` ${ce.message}`,{position:"top-right",autoClose:4e3}),de())}catch(ce){console.error("Error parsing notification:",ce)}},we.onerror=Me=>{console.error(" WebSocket error:",Me)},we.onclose=()=>{console.log(" Disconnected from task notifications")},()=>{we.readyState===WebSocket.OPEN&&we.close()}}},[t,e]);const ke=()=>{l(null),te({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:e?.role==="Sales"?String(e.id):"",notes:"",createdById:null,relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},Te=(K=null,we=!1)=>{l(K),u(we),K?te({id:K.id,subject:K.title||"",description:K.description||"",priority:K.priority||"Normal",status:K.status||"Not started",dueDate:ZFe(K.dueDate),assignedTo:K.assignedToId?String(K.assignedToId):"",assignedToName:K.assignedToName||"",createdBy:K.createdBy||"",notes:K.notes||"",createdById:K.createdById||null,relatedType1Text:K.relatedType1Text||"",relatedTo1Text:K.relatedTo1Text||"",relatedType2Text:K.relatedType2Text||"",relatedTo2Text:K.relatedTo2Text||"",relatedType1:K.relatedType1||"",relatedTo1:K.relatedTo1||"",relatedType2:K.relatedType2||"",relatedTo2:K.relatedTo2||""}):ke(),i(!0)},pe=()=>{i(!1),l(null),u(!1),ke()},ze=async K=>{const we=JFe(K);try{o&&!c?(await se.put(`/tasks/${o.id}`,we),W.success("Task updated successfully.")):(await se.post("/tasks/create",we),W.success("Task created successfully.")),i(!1),await de()}catch(Me){console.error("Failed to save task:",Me);const ce=Me.response?.data?.detail||"Failed to save task.";W.error(ce)}},Pe=K=>{K&&$({title:"Archive Task",message:n.jsxs(n.Fragment,{children:["Are you sure you want to archive ",n.jsx("span",{className:"font-semibold",children:K.title}),"?"]}),confirmLabel:"Archive Task",cancelLabel:"Cancel",variant:"warning",action:{type:"archive",targetId:K.id}})},We=()=>Je.filter(K=>String(K.createdById)===String(e?.id)),tt=()=>{const K=We();if(K.length!==0)if(K.every(we=>G.includes(we.id)))U(G.filter(we=>!K.map(Me=>Me.id).includes(we)));else{const we=K.map(Me=>Me.id);U([...new Set([...G,...we])])}},lt=K=>{const we=Je.find(Me=>Me.id===K);String(we?.createdById)===String(e?.id)&&U(Me=>Me.includes(K)?Me.filter(ce=>ce!==K):[...Me,K])},Ie=async()=>{G.length!==0&&$({title:"Archive Tasks",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:G.length})," selected tasks?"]}),confirmLabel:`Archive ${G.length} Task(s)`,cancelLabel:"Cancel",variant:"warning",action:{type:"bulk-archive",task_ids:G}})},rt=async()=>{if(!F?.action){$(null);return}const{action:K}=F;q(!0);try{K.type==="archive"?(await se.delete(`/tasks/${K.targetId}`),W.success("Task archived successfully."),await de()):K.type==="bulk-archive"&&(await se.post("/tasks/bulk-archive",{task_ids:K.task_ids}),W.success(`Successfully archived ${K.task_ids.length} tasks`),U([]),await de())}catch(we){console.error("Task action failed:",we);const Me=we.response?.data?.detail||"Failed to archive task.";W.error(Me)}finally{q(!1),$(null)}},He=()=>{D||$(null)},Ke=h.useMemo(()=>{const K=y.trim().toLowerCase();return[...d].sort((Me,ce)=>{const oe=Me.createdAt?new Date(Me.createdAt):0;return(ce.createdAt?new Date(ce.createdAt):0)-oe}).filter(Me=>{const ce=K===""||Me.title?.toLowerCase().includes(K)||Me.description?.toLowerCase().includes(K)||Me.assignedToName?.toLowerCase().includes(K)||Me.createdBy?.toLowerCase().includes(K),oe=v==="Filter by Status"||Me.status===v,De=w==="Filter by Priority"||Me.priority===w;return ce&&oe&&De})},[d,y,v,w]);h.useEffect(()=>{A(1)},[y,v,w,a,L]),h.useEffect(()=>{if(a==="list"){const K=Ke.length===0?1:Math.ceil(Ke.length/L);T>K&&A(K)}},[Ke.length,T,a,L]);const Je=h.useMemo(()=>{if(a==="board")return Ke;const K=(T-1)*L;return Ke.slice(K,K+L)},[Ke,T,a,L]),Oe=h.useMemo(()=>{const K=new Date;return[{title:"To Do",value:d.filter(we=>we.status==="Not started").length,icon:Vs,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:d.filter(we=>we.status==="In progress").length,icon:Gi,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:d.filter(we=>we.status==="Completed").length,icon:aa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:d.filter(we=>we.dueDate&&new Date(we.dueDate)<K&&we.status!=="Completed").length,icon:Yu,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:d.filter(we=>we.priority==="High").length,icon:Xl,color:"text-orange-600",bgColor:"bg-orange-100"}]},[d]),Ce=K=>K.dueDate&&new Date(K.dueDate)<new Date&&K.status!=="Completed",fe=K=>{switch(K.status){case"Not started":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Deferred":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},ue=K=>{switch(K){case"Not started":return"bg-blue-100 text-blue-700";case"In progress":return"bg-purple-100 text-purple-700";case"Deferred":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},H=K=>{switch(K){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&n.jsx(Wt,{message:"Loading tasks..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(Gi,{className:"text-blue-600"})," Tasks Board"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:()=>Te(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[n.jsx(xn,{})," Create Task"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Oe.map(K=>n.jsx(nUe,{...K},K.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Vt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search tasks",value:y,onChange:K=>N(K.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{value:v,onChange:K=>j(K.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Status"}),p8.map(K=>n.jsx("option",{children:K},K))]}),n.jsxs("select",{value:w,onChange:K=>S(K.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Priority"}),n.jsx("option",{children:"High"}),n.jsx("option",{children:"Normal"}),n.jsx("option",{children:"Low"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${a==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),n.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${a==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&a==="board"&&(Ke.length>0?n.jsxs(Hx,{sensors:Ne,collisionDetection:Ux,onDragStart:he,onDragEnd:ve,onDragCancel:ne,children:[n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:p8.map(K=>{const we=Je.filter(Me=>Me.status===K);return n.jsx(sUe,{column:K,columnTasks:we,getTaskCardColor:fe,isTaskOverdue:Ce,formatDateDisplay:$A,handleOpenModal:Te,handleArchiveTask:Pe,currentUser:e},K)})}),n.jsx(bj,{children:V?n.jsx(iUe,{task:V,getTaskCardColor:fe,isTaskOverdue:Ce,formatDateDisplay:$A}):null})]}):n.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No tasks found."})),!p&&!t&&a==="list"&&n.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:We().length>0&&We().every(K=>G.includes(K.id)),onChange:tt})}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),n.jsx("th",{className:"py-3 px-4 font-medium text-center w-24",children:G.length>0?n.jsx("button",{onClick:Ie,className:"text-orange-600 hover:text-orange-800 transition p-1 rounded-full hover:bg-orange-50",title:`Archive ${G.length} selected tasks`,children:n.jsx(Zt,{size:18})}):""})]})}),n.jsx("tbody",{children:Je.length>0?Je.map(K=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",children:[n.jsx("td",{className:"py-3 px-4",onClick:we=>we.stopPropagation(),children:String(K.createdById)===String(e?.id)?n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:G.includes(K.id),onChange:()=>lt(K.id)}):null}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",onClick:()=>Te(K,!0),children:K.title}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>Te(K,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${ue(K.status||"Not started")}`,children:K.status||"Not started"})}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>Te(K,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${H(K.priority||"Low")}`,children:K.priority||"Low"})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",onClick:()=>Te(K,!0),children:K.assignedToName||"Unassigned"}),n.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${Ce(K)?"text-red-600 font-medium":""}`,onClick:()=>Te(K,!0),children:K.dateAssigned?$A(K.dateAssigned):""}),n.jsx("td",{})]},K.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No tasks found."})})})]})})}),!p&&!t&&a==="list"&&n.jsx(rn,{className:"mt-6",totalItems:Ke.length,pageSize:L,currentPage:Ke.length===0?0:T,onPrev:()=>A(K=>Math.max(K-1,1)),onNext:()=>A(K=>Math.min(K+1,Math.max(1,Math.ceil(Ke.length/L)||1))),onPageSizeChange:K=>{M(K),A(1)},pageSizeOptions:[10,20,30,40,50],label:"tasks"}),n.jsx(b0,{isOpen:r,onClose:pe,onSave:ze,onEdit:()=>u(!1),setFormData:te,formData:_e,isEditing:!c&&!!o,viewMode:c,users:_,currentUser:e,onDelete:Pe}),F&&n.jsx(aUe,{open:!0,title:F.title,message:F.message,confirmLabel:F.confirmLabel,cancelLabel:F.cancelLabel,variant:F.variant,onConfirm:rt,onCancel:He,loading:D})]})}function nUe({icon:e,title:t,value:a,color:s,bgColor:r,onClick:i}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function aUe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r,variant:i,loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":i==="warning"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function sUe({column:e,columnTasks:t,getTaskCardColor:a,isTaskOverdue:s,formatDateDisplay:r,handleOpenModal:i,handleArchiveTask:o,currentUser:l}){const{isOver:c,setNodeRef:u}=Wx({id:e});return n.jsxs("div",{ref:u,className:`bg-white p-4 shadow border flex flex-col relative rounded-md transition-all duration-200 min-h-[200px] ${c?"border-blue-400 bg-blue-50 ring-2 ring-blue-300":"border-gray-200"}`,children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),n.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:e}),n.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:t.length})]}),n.jsx("div",{className:`space-y-3 flex-1 ${t.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:t.length>0?t.map(d=>n.jsx(rUe,{task:d,getTaskCardColor:a,isTaskOverdue:s,formatDateDisplay:r,handleOpenModal:i,handleArchiveTask:o,currentUser:l},d.id)):n.jsx("div",{className:`text-center py-10 text-gray-500 border-2 border-dashed rounded-lg ${c?"border-blue-300 bg-blue-50":"border-gray-200"}`,children:c?"Drop here":"No tasks"})})]})}function rUe({task:e,getTaskCardColor:t,isTaskOverdue:a,formatDateDisplay:s,handleOpenModal:r,handleArchiveTask:i,currentUser:o}){const{attributes:l,listeners:c,setNodeRef:u,transform:d,isDragging:f}=qx({id:e.id}),p=d?{transform:`translate3d(${d.x}px, ${d.y}px, 0)`}:void 0;return n.jsxs("div",{ref:u,style:p,className:`border rounded-lg p-3 transition flex justify-between items-start cursor-grab active:cursor-grabbing ${t(e)} ${f?"opacity-50 shadow-lg ring-2 ring-blue-400":""}`,...c,...l,children:[n.jsxs("div",{className:"text-left flex-1",onClick:x=>{x.stopPropagation(),r(e,!0)},children:[n.jsx("p",{className:"font-medium text-gray-800 text-sm",children:e.title}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",e.priority]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",e.assignedToName]}),n.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",n.jsx("span",{className:a(e)?"text-red-600":"text-gray-600",children:e.dateAssigned?s(e.dateAssigned):""})]})]}),n.jsx("div",{className:"flex items-center gap-2 ml-3",onClick:x=>x.stopPropagation(),children:(String(e.createdById)===String(o?.id)||o?.role!=="Sales")&&n.jsxs(n.Fragment,{children:[n.jsx("button",{type:"button",onClick:x=>{x.stopPropagation(),r(e)},className:"text-blue-500 hover:text-blue-700",children:n.jsx(ha,{})}),n.jsx("button",{type:"button",onClick:x=>{x.stopPropagation(),i(e)},className:"text-orange-500 hover:text-orange-700",children:n.jsx(Zt,{})})]})})]})}function iUe({task:e,getTaskCardColor:t,isTaskOverdue:a,formatDateDisplay:s}){return n.jsx("div",{className:`border rounded-lg p-3 shadow-xl ring-2 ring-blue-400 ${t(e)}`,style:{width:"280px"},children:n.jsxs("div",{className:"text-left flex-1",children:[n.jsx("p",{className:"font-medium text-gray-800 text-sm",children:e.title}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",e.priority]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",e.assignedToName]}),n.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",n.jsx("span",{className:a(e)?"text-red-600":"text-gray-600",children:e.dateAssigned?s(e.dateAssigned):""})]})]})})}const uJ=e=>e?e.toUpperCase():"",Nb=e=>{const t=uJ(e);return t==="PLANNED"||t==="IN PROGRESS"?"PLANNED":t==="HELD"||t==="DONE"?"HELD":t==="NOT_HELD"||t==="NOT HELD"?"NOT_HELD":"PLANNED"},oUe=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},lUe=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},cUe=e=>{const t=uJ(e);switch(t==="PLANNED"?"PENDING":t==="HELD"?"COMPLETED":t==="NOT_HELD"?"CANCELLED":t){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},RA={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},dUe=()=>{const e=jt(),t=Jt(),{user:a}=qt(),s=a?.role==="Sales",[r]=Us(),i=r.get("id"),o=t.pathname==="/admin/meetings/info";h.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[l,c]=h.useState([]),[u,d]=h.useState(!1),[f,p]=h.useState([]),[x,y]=h.useState(""),[N,v]=h.useState("Filter by Status"),[j,w]=h.useState(!1),[S,_]=h.useState(null),[E,T]=h.useState(1),[A,L]=h.useState(10),[M,F]=h.useState(RA),[$,D]=h.useState(!1),[q,G]=h.useState(null),[U,V]=h.useState(!1),[Z,Y]=h.useState(null),[le,_e]=h.useState(!1),[te,ae]=h.useState(null),[ye,Ne]=h.useState([]),[he,ve]=h.useState(null);h.useEffect(()=>{j&&!$&&s&&a&&!M.assignedTo&&F(Oe=>({...Oe,assignedTo:a.id}))},[j,$,a,s]),h.useEffect(()=>{const Oe=t.state?.openMeetingModal,Ce=t.state?.initialMeetingData?.relatedTo||r.get("id"),fe=t.state?.meetingID;Oe||Ce?(w(!0),t.state?.initialMeetingData&&F(ue=>({...ue,...t.state.initialMeetingData})),e(t.pathname,{replace:!0,state:{}})):fe&&(ae(fe),e(t.pathname,{replace:!0,state:{}}))},[t,r,e]),h.useEffect(()=>{if(te&&l.length>0&&!u){const Oe=l.find(Ce=>Ce.id===te);Oe?_(Oe):W.error("Meeting not found."),ae(null)}},[te,l,u]);const ne=async()=>{if(i&&o){const Oe=sessionStorage.getItem("meetingDetailData");if(Oe)try{const Ce=JSON.parse(Oe);if(Ce.id===parseInt(i)){_(Ce),sessionStorage.removeItem("meetingDetailData");return}}catch(Ce){console.error(Ce)}}d(!0);try{const Oe=await se.get("/meetings/admin/fetch-all"),fe=[...Array.isArray(Oe.data)?Oe.data:[]].sort((ue,H)=>{const K=ue?.created_at?new Date(ue.created_at).getTime():0;return(H?.created_at?new Date(H.created_at).getTime():0)-K});if(c(fe),i&&!S){const ue=fe.find(H=>H.id===parseInt(i));ue&&_(ue)}}catch{W.error("Failed to load meetings.")}finally{d(!1)}},Se=async()=>{try{const Oe=await se.get("/users/all");p(Array.isArray(Oe.data)?Oe.data:[])}catch(Oe){console.error(Oe)}};h.useEffect(()=>{async function Oe(){try{const Ce=await se.get("/auth/me");ve(Ce.data)}catch(Ce){console.error("Failed to fetch current user",Ce)}}Oe()},[]),h.useEffect(()=>{ne(),Se()},[]);const de=Oe=>y(Oe.target.value),ke=h.useMemo(()=>{const Oe=x.trim().toLowerCase(),Ce=N.trim().toUpperCase();return l.filter(fe=>{const ue=[fe?.activity,fe?.description,fe?.relatedTo,fe?.assignedTo],H=Oe===""||ue.some(we=>we&&we.toString().toLowerCase().includes(Oe)),K=Ce==="FILTER BY STATUS"||Nb(fe.status||"PENDING")===Ce;return H&&K})},[l,x,N]),Te=h.useMemo(()=>{const Oe=(E-1)*A;return ke.slice(Oe,Oe+A)},[ke,E,A]),pe=()=>{w(!1),F(RA),D(!1),G(null),V(!1)},ze=()=>{F(RA),D(!1),G(null),w(!0)},Pe=Oe=>{let Ce="";if(Oe.meet_assign_to?.id)Ce=String(Oe.meet_assign_to.id);else if(Oe.assignedTo){const De=f.find($e=>`${$e.first_name} ${$e.last_name}`===Oe.assignedTo);Ce=De?String(De.id):""}const fe=De=>{if(!De)return"";try{const $e=new Date(De),Xe=$e.getTimezoneOffset()*6e4;return new Date($e.getTime()-Xe).toISOString().slice(0,16)}catch{return""}};let ue="Lead",H="",K="Contact",we="";if(Oe.lead)ue="Lead",H=String(Oe.lead.id);else if(Oe.account)ue="Account",H=String(Oe.account.id),Oe.contact?(K="Contact",we=String(Oe.contact.id)):Oe.deal?(K="Deal",we=String(Oe.deal.id)):Oe.quote&&(K="Quote",we=String(Oe.quote.id));else if(Oe.relatedType||Oe.related_type){const De=Oe.relatedType||Oe.related_type,$e=Oe.related_to||Oe.relatedToId;De==="Lead"?(ue="Lead",H=String($e)):(ue="Account",H=Oe.account_id?String(Oe.account_id):"")}const Me={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},ce=Nb(Oe.status),oe=Me[ce]||"Planned";F({subject:Oe.subject||Oe.activity||"",location:Oe.location||"",startTime:fe(Oe.start_time||Oe.startTime),endTime:fe(Oe.end_time||Oe.endTime),status:oe,notes:Oe.description||Oe.notes||"",assignedTo:Ce,relatedType1:ue,relatedTo1:H,relatedType2:K,relatedTo2:we}),D(!0),G(Oe.id),_(null),w(!0)},We=Oe=>{if(!Oe.subject?.trim())return W.error("Subject is required.");if(!Oe.startTime)return W.error("Start time is required.");if(Oe.endTime&&!(new Date(Oe.endTime)-new Date(Oe.startTime)>0))return W.error("End time must be after start time.");Oe.relatedType1,Oe.relatedTo1,Oe.relatedType1==="Account"&&Oe.relatedType2&&Oe.relatedTo2&&(Oe.relatedType2,Oe.relatedTo2);const Ce={...Oe,assignedTo:parseInt(Oe.assignedTo),relatedTo1:parseInt(Oe.relatedTo1),relatedTo2:parseInt(Oe.relatedTo2)},fe=$&&q?"update":"create";Y({title:fe==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${fe} "${Ce.subject}"?`,confirmLabel:fe==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:fe,payload:Ce,targetId:q,name:Ce.subject}})},tt=async()=>{if(!Z?.action)return;const{type:Oe,payload:Ce,targetId:fe,name:ue}=Z.action;_e(!0);try{Oe==="create"?(V(!0),await se.post("/meetings/create",Ce),W.success(`Meeting "${ue}" created.`),pe(),await ne()):Oe==="update"?(V(!0),await se.put(`/meetings/${fe}`,Ce),W.success(`Meeting "${ue}" updated.`),pe(),await ne()):Oe==="delete"?(await se.delete(`/meetings/${fe}`),W.success(`Meeting "${ue}" archived.`),S?.id===fe&&_(null),await ne()):Oe==="bulk-delete"&&(await se.post("/meetings/sales/bulk-delete",{meeting_ids:Z.action.meetingIds}),W.success(`Successfully archived ${Z.action.meetingIds.length} meeting(s)`),Ne([]),await ne())}catch(H){const K=H.response?.data?.detail||"Action failed.";W.error(typeof K=="string"?K:JSON.stringify(K)),console.error(K)}finally{V(!1),_e(!1),Y(null)}},lt=Oe=>{He("single")},Ie=()=>{const Oe=Te.filter(Ce=>Ce.created_by===he?.id);ye.length===Oe.length&&Oe.length>0?Ne([]):Ne(Oe.map(Ce=>Ce.id))},rt=Oe=>{Ne(Ce=>Ce.includes(Oe)?Ce.filter(fe=>fe!==Oe):[...Ce,Oe])},He=Oe=>{if(Oe==="single"){const Ce=S.subject||"this meeting";Y({title:"Archive Meeting",message:`Are you sure you want to archive "${Ce}"?`,confirmLabel:"Archive Meeting",cancelLabel:"Cancel",variant:"archive",action:{type:"delete",targetId:S.id,name:Ce}})}else if(Oe==="bulk"){if(ye.length===0)return;Y({title:"Archive Meetings",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:ye.length})," selected meetings?"]}),confirmLabel:`Archive ${ye.length} meeting(s)`,cancelLabel:"Cancel",variant:"archive",action:{type:"bulk-delete",meetingIds:ye}})}},Ke=()=>{He("bulk")},Je=async(Oe,Ce)=>{try{await se.put(`/meetings/${Oe}`,{status:Ce}),W.success("Status updated"),ne(),_(null)}catch{W.error("Failed to update status")}};return o&&i?S?n.jsx(bd,{meeting:S,onClose:()=>{_(null),e("/admin/dashboard")},onEdit:Pe,onDelete:lt,onStatusUpdate:Je,currentUser:he,isSalesView:!0}):n.jsx(Wt,{message:"Loading meeting..."}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[u&&n.jsx(Wt,{message:"Loading meetings..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[n.jsx(Pt,{className:"mr-2 text-blue-600"})," Meetings"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:ze,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[n.jsx(xn,{className:"mr-2"})," Add Meeting"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[n.jsx(Vt,{className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search meetings",value:x,onChange:de,className:"w-full outline-none"})]}),n.jsxs("select",{value:N,onChange:Oe=>v(Oe.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[n.jsx("option",{children:"Filter by Status"}),n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-center w-12",children:n.jsx("input",{type:"checkbox",checked:Te.length>0&&Te.filter(Oe=>Oe.created_by===he?.id).every(Oe=>ye.includes(Oe.id))&&Te.some(Oe=>Oe.created_by===he?.id),onChange:Ie,className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Start Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:ye.length>0?n.jsx("button",{onClick:Ke,className:"text-orange-600 hover:text-orange-800 transition p-1 rounded-full hover:bg-orange-50",title:`Archive ${ye.length} selected meetings`,children:n.jsx(Zt,{size:18})}):""})]})}),n.jsx("tbody",{children:Te.length>0?Te.map(Oe=>n.jsxs("tr",{onClick:()=>_(Oe),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 text-center",onClick:Ce=>Ce.stopPropagation(),children:he&&Oe.created_by===he.id?n.jsx("input",{type:"checkbox",checked:ye.includes(Oe.id),onChange:()=>rt(Oe.id),className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300",onClick:Ce=>Ce.stopPropagation()}):null}),n.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:Oe.subject}),n.jsxs("td",{className:"py-3 px-4",children:[Oe.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Oe.lead.title}),Oe.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Oe.account.name}),Oe.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[Oe.contact.first_name," ",Oe.contact.last_name]}),Oe.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Oe.deal.name}),Oe.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:oUe(Oe.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4",children:lUe(Oe.start_time)}),n.jsxs("td",{className:"py-3 px-4",children:[Oe.meet_assign_to.first_name," ",Oe.meet_assign_to.last_name]}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${cUe(Nb(Oe.status))}`,children:Nb(Oe.status).replace("_"," ")})}),n.jsx("td",{className:"py-3 px-4"})]},Oe.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),n.jsx(rn,{totalItems:ke.length,pageSize:A,currentPage:E,onPrev:()=>T(Oe=>Math.max(1,Oe-1)),onNext:()=>T(Oe=>Oe+1),onPageSizeChange:Oe=>{L(Oe),T(1)},pageSizeOptions:[10,20,30,40,50],label:"meetings"}),j&&n.jsx(y1,{onClose:pe,formData:M,setFormData:F,isEditing:$,onSubmit:We,isSubmitting:U||le,users:f,currentUser:a}),S&&n.jsx(bd,{meeting:S,onClose:()=>_(null),onEdit:Pe,onDelete:lt,onStatusUpdate:Je,currentUser:he,isSalesView:!0}),Z&&n.jsx(uUe,{open:!0,title:Z.title,message:Z.message,confirmLabel:Z.confirmLabel,variant:Z.variant,onConfirm:tt,onCancel:()=>Y(null),loading:le})]})};function uUe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":i==="archive"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{onClick:c,disabled:o,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),n.jsx("button",{onClick:l,disabled:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${u}`,children:o?"...":s})]})]})})}const mUe=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"}],fUe=e=>e?String(e).toUpperCase():"",ff=e=>{const t=fUe(e);return t==="PLANNED"||t==="PENDING"?"PLANNED":t==="HELD"||t==="COMPLETED"?"HELD":t==="NOT HELD"||t==="NOT_HELD"||t==="CANCELLED"?"NOT_HELD":"PLANNED"},zA=e=>{const t=ff(e);return t==="PLANNED"?"PLANNED":t==="HELD"?"HELD":t==="NOT_HELD"?"NOT HELD":"--"},y8=e=>{switch(ff(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},FA=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},b8=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function hUe(){const[e,t]=h.useState(!1),[a,s]=h.useState(null),[r,i]=h.useState(null),[o,l]=h.useState(null),[c,u]=h.useState(null),[d,f]=h.useState([]),[p,x]=h.useState(null),[y,N]=h.useState(!1),[v,j]=h.useState(null),[w,S]=h.useState(!1),[_,E]=h.useState(!1),[T,A]=h.useState("PLANNED"),[L,M]=h.useState(!1),[F,$]=h.useState(!1),[D,q]=h.useState(1),[G,U]=h.useState(10),[V,Z]=h.useState(null),[Y,le]=h.useState([]),[_e,te]=h.useState(null),{comments:ae,addComment:ye,refresh:Ne}=ka({relatedType:"call",relatedId:a?.id});h.useEffect(()=>{a?.id&&Ne()},[a?.id,Ne]),Us();const he=jt(),ve=Jt(),{user:ne}=qt(),Se=ne?.role==="Sales",ke={subject:"",call_time:(()=>{const me=new Date,ie=me.getFullYear(),Fe=String(me.getMonth()+1).padStart(2,"0"),Le=String(me.getDate()).padStart(2,"0");return`${ie}-${Fe}-${Le}T08:00`})(),duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[Te,pe]=h.useState(ke);h.useEffect(()=>{e&&!y&&Se&&ne&&!Te.assigned_to&&pe(me=>({...me,assigned_to:ne.id}))},[e,y,ne,Se]),h.useEffect(()=>{const me=ve.state,ie=me?.callID;if(ie&&!me?.openCallModal){Z(ie),he(ve.pathname,{replace:!0,state:{}});return}!me?.openCallModal||!me?.initialCallData||me.initialCallData.relatedType1==="Lead"&&Array.isArray(o)&&o.length===0||me.initialCallData.relatedType1==="Account"&&(!Array.isArray(o)||o.length===0)||(t(!0),pe(Fe=>({...Fe,...me.initialCallData,relatedTo1:me.initialCallData.relatedTo1?String(me.initialCallData.relatedTo1):"",relatedTo2:me.initialCallData.relatedTo2?String(me.initialCallData.relatedTo2):""})),he(ve.pathname,{replace:!0,state:{}}))},[ve.state,o]),h.useEffect(()=>{if(V&&d.length>0&&!F){const me=d.find(ie=>ie.id===V);me?s(me):W.error("Call not found."),Z(null)}},[V,d,F]);const ze=async()=>{try{$(!0);const me=await se.get("/calls/admin/fetch-all"),Fe=[...Array.isArray(me.data)?me.data:[]].sort((Le,be)=>{const ee=Le?.created_at?new Date(Le.created_at):0;return(be?.created_at?new Date(be.created_at):0)-ee});f(Fe)}catch(me){console.error("Error fetching calls:",me),W.error("Failed to load calls")}finally{$(!1)}},Pe=async()=>{try{const me=await se.get("/users/all");x(me.data)}catch(me){console.error("Error fetching users: ",me)}};h.useEffect(()=>{async function me(){try{const ie=await se.get("/auth/me");te(ie.data)}catch(ie){console.error("Failed to fetch current user",ie)}}me()},[]),h.useEffect(()=>{Pe(),ze()},[]);const We=[],tt="",lt="Filter by Status",Ie="Filter by Users",rt=d,He=h.useMemo(()=>{const me=(D-1)*G;return rt.slice(me,me+G)},[rt,D,G]),Ke=d.length,Je=d.filter(me=>ff(me.status)==="PLANNED").length,Oe=d.filter(me=>ff(me.status)==="HELD").length,Ce=d.filter(me=>ff(me.status)==="NOT_HELD").length,fe=[{title:"Total",value:Ke,icon:zs,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:Je,icon:Vs,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:Oe,icon:aa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:Ce,icon:Fs,color:"text-gray-600",bgColor:"bg-gray-100"}],[ue,H]=h.useState("Overview"),K=me=>{const{name:ie,value:Fe}=me.target;pe(Le=>{const be={...Le,[ie]:Fe};return ie==="relatedType1"&&(be.relatedTo1="",Fe==="Lead"?(be.relatedType2=null,be.relatedTo2=null,u([])):Fe==="Account"&&(be.relatedType2="Contact")),ie==="relatedType2"&&(be.relatedTo2=""),be})};h.useEffect(()=>{const me=async()=>{try{l([]);let ie;Te.relatedType1==="Lead"?ie=await se.get("/leads/admin/getLeads"):Te.relatedType1==="Account"&&(ie=await se.get("/accounts/admin/fetch-all"));let Fe=[];if(ie&&Array.isArray(ie.data)?Fe=ie.data:Fe=[],y&&Te.relatedTo1)try{let Le;Te.relatedType1==="Lead"?Le=await se.get(`/leads/get/${Te.relatedTo1}`):Te.relatedType1==="Account"&&(Le=await se.get(`/accounts/get/${Te.relatedTo1}`)),Le&&Le.data&&(Fe.some(ee=>String(ee.id)===String(Te.relatedTo1))||(Fe=[Le.data,...Fe]))}catch(Le){console.error("Error fetching specific related item:",Le)}l(Fe)}catch(ie){console.error("Error fetching data:",ie),l([])}};Te.relatedType1&&me()},[Te.relatedType1,y,Te.relatedTo1]),h.useEffect(()=>{const me=async()=>{try{u([]);let ie;if(Te.relatedType1==="Account"&&Te.relatedTo1)Te.relatedType2==="Contact"?ie=await se.get(`/contacts/from-acc/${Te.relatedTo1}`):Te.relatedType2==="Deal"?ie=await se.get(`/deals/from-acc/${Te.relatedTo1}`):Te.relatedType2==="Quote"&&(ie=await se.get(`/quotes/from-acc/${Te.relatedTo1}`));else{u([]);return}ie&&Array.isArray(ie.data)?u(ie.data):u([])}catch(ie){console.error("Error fetching data:",ie),u([])}};Te.relatedType2&&me()},[Te.relatedType2,Te.relatedTo1,Te.relatedType1]);const[we,Me]=h.useState(!1),ce=me=>{me.preventDefault(),Me(!0);const ie=Te.subject;if(!ie||ie.trim()===""){W.error("Subject is required.");return}if(!Te.relatedTo1){W.error(`Please select a ${Te.relatedType1||"Lead/Account"}.`);return}if(!Te.assigned_to){W.error("Subject is required.");return}const Le={...Te,duration_minutes:Te.duration_minutes?parseInt(Te.duration_minutes,10):null,relatedTo1:Te.relatedTo1?parseInt(Te.relatedTo1,10):null,relatedTo2:Te.relatedType1==="Lead"?null:Te.relatedTo2?parseInt(Te.relatedTo2,10):null,relatedType2:Te.relatedType1==="Lead"?null:Te.relatedType2,assigned_to:Te.assigned_to?parseInt(Te.assigned_to,10):null},be=y&&v?"update":"create",ee=(Te.subject||"").trim()||"Untitled Call";i({title:be==="create"?"Confirm New Call":"Confirm Update",message:be==="create"?`Create "${ee}"?`:`Save changes to "${ee}"?`,confirmLabel:be==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:be,payload:Le,targetId:v||null,name:ee}})},oe=me=>s(me),De=()=>{t(!1),N(!1),j(null)},$e=async()=>{if(!r?.action){i(null);return}const{action:me}=r,{type:ie,payload:Fe,targetId:Le,name:be,callIds:ee}=me;E(!0);try{if(ie==="bulk-delete")await se.post("/calls/bulk-delete",{call_ids:ee}),W.success(`Successfully archived ${ee.length} call(s).`),le([]),await ze();else if(ie==="create")S(!0),await se.post("/calls/create",Fe),W.success(`Call "${be}" created successfully.`),t(!1),pe(ke),N(!1),j(null),await ze();else if(ie==="update"){if(!Le)throw new Error("Missing call identifier for update.");S(!0),await se.put(`/calls/${Le}`,Fe),W.success(`Call "${be}" updated successfully.`),t(!1),pe(ke),N(!1),j(null),await ze()}else if(ie==="delete"){if(!Le)throw new Error("Missing call identifier for archival.");await se.delete(`/calls/${Le}`),W.success(`Call "${be}" archived successfully.`),a?.id===Le&&s(null),await ze()}}catch(O){const z=ie==="create"?"Failed to create call. Please review the details and try again.":ie==="update"?"Failed to update call. Please review the details and try again.":"Failed to archive call. Please try again.",I=O?.response?.data?.detail||z;W.error(I)}finally{(ie==="create"||ie==="update")&&S(!1),E(!1),i(null)}},Xe=()=>{_||i(null)},Ze=async()=>{if(a?.id)try{M(!0),await se.put(`/calls/${a.id}`,{status:T}),W.success(`Status updated to ${zA(T)}`),f(me=>Array.isArray(me)?me.map(ie=>ie.id===a.id?{...ie,status:T}:ie):me),s(null)}catch(me){const ie=me.response?.data?.detail||"Failed to update status.";W.error(ie)}finally{M(!1)}},mt=()=>{const me=He.filter(ie=>ie.call_creator?.id===_e?.id);Y.length===me.length&&me.length>0?le([]):le(me.map(ie=>ie.id))},nt=me=>{le(ie=>ie.includes(me)?ie.filter(Fe=>Fe!==me):[...ie,me])},Nt=me=>{if(me==="single"){const ie=a.subject||"this call";i({title:"Archive Call",message:`Are you sure you want to archive "${ie}"? This call will be hidden from your view but admins can still see it.`,confirmLabel:"Archive Call",cancelLabel:"Cancel",variant:"warning",action:{type:"delete",targetId:a.id,name:ie}})}else if(me==="bulk"){if(Y.length===0)return;i({title:"Archive Calls",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:Y.length})," selected calls? These calls will be hidden from your view but admins can still see them."]}),confirmLabel:`Archive ${Y.length} call(s)`,cancelLabel:"Cancel",variant:"warning",action:{type:"bulk-delete",callIds:Y}})}},wt=()=>{Nt("bulk")};h.useEffect(()=>{a&&A(ff(a.status))},[a]);const Tt=a?n.jsxs("div",{id:"callModalBackdrop",onClick:me=>me.target.id==="callModalBackdrop"&&s(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[F&&n.jsx(Wt,{message:"Loading call details..."}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),n.jsx("button",{onClick:()=>s(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:n.jsx(Xn,{size:25})})]}),n.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:a.subject}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${y8(a.status)}`,children:zA(a.status)})]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:a.call_creator?.id===_e?.id&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const me=ee=>{if(!ee)return"";const O=new Date(ee),z=O.getFullYear(),I=String(O.getMonth()+1).padStart(2,"0"),Q=String(O.getDate()).padStart(2,"0"),ge=String(O.getHours()).padStart(2,"0"),re=String(O.getMinutes()).padStart(2,"0");return`${z}-${I}-${Q}T${ge}:${re}`},ie=a.lead?"Lead":a.account?"Account":"Lead",Fe=a.lead?a.lead.id:a.account?a.account.id:null,Le=ie==="Lead"?null:a.contact?"Contact":a.deal?"Deal":a.quote?"Quote":"Contact",be=ie==="Lead"?null:a.contact?a.contact.id:a.deal?a.deal.id:a.quote?a.quote.id:null;pe({subject:a.subject||"",call_time:me(a.call_time),duration_minutes:a.duration_minutes?String(a.duration_minutes):"",direction:a.direction||"Outgoing",status:a.status||"Planned",notes:a.notes||"",relatedType1:ie,relatedType2:Le,relatedTo1:Fe?String(Fe):"",relatedTo2:be?String(be):"",assigned_to:a.call_assign_to?.id?String(a.call_assign_to.id):""}),N(!0),j(a.id),s(null),t(!0)},children:[n.jsx(ga,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>Nt("single"),children:[n.jsx(Zt,{className:"mr-2"}),"Archive"]})]})})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(me=>n.jsx("button",{onClick:()=>H(me),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${ue===me?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:me},me))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[ue==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsx(uo,{label:"Call Time",value:b8(a.call_time)}),n.jsx(uo,{label:"Duration",value:a.duration_minutes?`${a.duration_minutes} min`:null}),n.jsx(uo,{label:"Direction",value:a.direction||"--"}),n.jsx(uo,{label:"Assigned To",value:`${a.call_assign_to.first_name} ${a.call_assign_to.last_name}`}),a.lead&&n.jsx(uo,{label:"Lead",value:a.lead.title}),a.account&&n.jsx(uo,{label:"Account",value:a.account.name}),a.contact&&n.jsx(uo,{label:"Contact",value:`${a.contact.first_name} ${a.contact.last_name}`}),a.deal&&n.jsx(uo,{label:"Deal",value:a.deal.name}),a.quote&&n.jsx(uo,{label:"Quote",value:FA(a.quote.quote_id)}),n.jsx(uo,{label:"Created At",value:b8(a.created_at)})]})}),ue==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Call Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:a.notes||"No notes available."})]}),n.jsx(Ta,{comments:ae,onAddComment:ye})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:T,onChange:me=>A(me.target.value),children:[n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),n.jsx("button",{onClick:Ze,disabled:L,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:L?"Updating...":"Update"})]})]})]})]})]}):null,Re=e?n.jsx("div",{id:"modalBackdrop",onClick:me=>me.target.id==="modalBackdrop"&&De(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[n.jsx("button",{onClick:()=>{De(),Me(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:y?"Edit Call":"Add New Call"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:ce,noValidate:!0,children:[n.jsx(pUe,{label:"Subject",className:"md:col-span-2",name:"subject",value:Te.subject,onChange:K,isSubmitted:we,required:!0}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("div",{className:"relative w-25",children:[n.jsxs("select",{name:"relatedType1",onChange:K,value:Te.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:w,children:[n.jsx("option",{value:"Lead",children:"Lead"}),n.jsx("option",{value:"Account",children:"Account"})]}),n.jsx("span",{className:"absolute left-10 md:pl-6 pl-6 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),n.jsx(UA,{items:Array.isArray(o)?o:[],value:Te.relatedTo1??"",placeholder:`Search ${Te.relatedType1||"here"}...`,getLabel:me=>Te.relatedType1==="Lead"?me.title:me.name??"",onChange:me=>pe(ie=>({...ie,relatedTo1:me})),required:!0,isSubmitted:we,disabled:w})]}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("select",{name:"relatedType2",onChange:K,value:Te.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:Te.relatedType1==="Lead"||w,children:[n.jsx("option",{value:"Contact",children:"Contact"}),n.jsx("option",{value:"Deal",children:"Deal"}),n.jsx("option",{value:"Quote",children:"Quote"})]}),n.jsx(UA,{disabled:Te.relatedType1==="Lead"||w,items:Array.isArray(c)?c:[],value:Te.relatedTo2??"",placeholder:Te.relatedType1==="Lead"?"":Array.isArray(c)&&c.length>0?`Search ${Te.relatedType2||"Contact"}...`:`No ${Te.relatedType2||""} data found`,getLabel:me=>Te.relatedType2==="Contact"?`${me.first_name??""} ${me.last_name??""}`.trim():Te.relatedType2==="Quote"?FA(me.quote_id)??"":me.name??"",onChange:me=>pe(ie=>({...ie,relatedTo2:me}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),n.jsx("input",{type:"datetime-local",value:Te.call_time,onChange:K,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),n.jsxs("div",{className:"w-full",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),n.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[n.jsx("input",{type:"tel",value:Te.duration_minutes,onChange:K,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),n.jsx("p",{children:"minutes"})]})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),n.jsx(UA,{items:Array.isArray(p)?p:[],value:Te.assigned_to??"",placeholder:"Search an account...",getLabel:me=>`${me.first_name} ${me.last_name}`,onChange:me=>pe(ie=>({...ie,assigned_to:me})),disabled:Se,required:!0,isSubmitted:we})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),n.jsxs("select",{name:"direction",onChange:K,value:Te.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Incoming",children:"Incoming"}),n.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),n.jsxs("select",{name:"status",onChange:K,value:Te.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Planned",children:"Planned"}),n.jsx("option",{value:"Held",children:"Held"}),n.jsx("option",{value:"Not held",children:"Not held"})]})]}),n.jsx(xUe,{className:"col-span-2",label:"Notes",value:Te.notes,onChange:K,name:"notes"}),n.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{De(),Me(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:w,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:w?"Saving...":y?"Update Call":"Save Call"})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(zs,{className:"mr-2 text-blue-600"})," Calls"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{pe(ke),N(!1),j(null),t(!0),Me(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(xn,{className:"mr-2"})," Add Call"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:fe.map(me=>n.jsx(gUe,{...me},me.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[n.jsx(Vt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",defaultValue:tt})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{defaultValue:lt,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),mUe.map(me=>n.jsx("option",{value:me.value,children:me.label},me.value))]}),n.jsxs("select",{defaultValue:Ie,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),We.map(me=>n.jsx("option",{value:me.name,children:me.name},me.id))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-center w-12",children:n.jsx("input",{type:"checkbox",checked:He.length>0&&He.filter(me=>me.call_creator?.id===_e?.id).every(me=>Y.includes(me.id))&&He.some(me=>me.call_creator?.id===_e?.id),onChange:mt,className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Call Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:Y.length>0?n.jsx("button",{onClick:wt,className:"text-orange-600 hover:text-orange-800 transition p-1 rounded-full hover:bg-orange-50",title:`Archive ${Y.length} selected calls`,children:n.jsx(Zt,{size:18})}):""})]})}),n.jsx("tbody",{children:F?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"py-10",children:n.jsx(Wt,{message:"Loading calls..."})})}):He.length>0?He.map(me=>n.jsxs("tr",{onClick:()=>oe(me),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 align-top text-center",onClick:ie=>ie.stopPropagation(),children:me.call_creator?.id===_e?.id?n.jsx("input",{type:"checkbox",checked:Y.includes(me.id),onChange:()=>nt(me.id),className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300",onClick:ie=>ie.stopPropagation()}):null}),n.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:me.subject||"--"}),n.jsxs("td",{className:"py-3 px-4",children:[me.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:me.lead.title}),me.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:me.account.name}),me.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[me.contact.first_name," ",me.contact.last_name]}),me.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:me.deal.name}),me.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:FA(me.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:me.call_time?new Date(me.call_time).toLocaleString():"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:me?.call_assign_to?`${me.call_assign_to.first_name} ${me.call_assign_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${y8(me.status)}`,children:zA(me.status)})}),n.jsx("td",{})]},me.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),n.jsx(rn,{totalItems:rt.length,pageSize:G,currentPage:D,onPrev:()=>q(me=>Math.max(me-1,1)),onNext:()=>q(me=>Math.min(me+1,Math.max(1,Math.ceil(rt.length/G)||1))),onPageSizeChange:me=>{U(me),q(1)},pageSizeOptions:[10,20,30,40,50],label:"calls"})]}),Tt,Re,r&&n.jsx(yUe,{open:!0,title:r.title,message:r.message,confirmLabel:r.confirmLabel,variant:r.variant,onConfirm:$e,onCancel:Xe,loading:_})]})}function gUe({icon:e,title:t,value:a,color:s,bgColor:r}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:22})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function pUe({label:e,name:t,value:a,onChange:s,placeholder:r="",type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:u=""}){const d=c&&o&&!a;return n.jsxs("div",{className:u,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100
          ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
        `})]})}function xUe(e){return n.jsxs("div",{className:e.className,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),n.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function uo({label:e,value:t}){return n.jsxs("p",{children:[n.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",n.jsx("br",{}),n.jsx("span",{className:"break-words",children:t||"--"})]})}function yUe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="warning"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function UA({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,required:l=!1,isSubmitted:c=!1}){const[u,d]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),y=e.find(w=>String(w.id)===String(t)),N=y?s(y):"",v=l&&c&&!t,j=h.useMemo(()=>{const w=f.trim().toLowerCase();return(w?e.filter(_=>(s(_)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&d(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{u||p("")},[u]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:u?f:N,placeholder:r,onFocus:()=>!i&&d(!0),onChange:w=>{p(w.target.value),u||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${v?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),u&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:j.length>0?j.map(w=>{const S=String(w.id),_=s(w),E=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${E?"bg-blue-50":""}`,children:_||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function bUe({toggleSidebar:e}){const[t,a]=h.useState(!1),[s,r]=h.useState(!1),[i,o]=h.useState([]),[l,c]=h.useState(0),u=h.useRef(null),d=h.useRef(null),f=Jt(),p=jt(),{logout:x}=Ks(),{user:y,fetchUser:N}=qt(),j={"/manager/dashboard":"Dashboard","/manager/accounts":"Accounts","/manager/contacts":"Contacts","/reports":"Reports","/leads":"Leads","/manager/Audit":"Audit","/manager/targets":"Targets","/manager/leads":"Leads","/manager/quotes":"Quotes","/manager/users":"Users","/manager/deals":"Deals"}[f.pathname]||"Manager Panel";return h.useEffect(()=>{N()},[]),h.useEffect(()=>{const w=()=>N();return window.addEventListener("userProfileUpdated",w),()=>window.removeEventListener("userProfileUpdated",w)},[N]),h.useEffect(()=>{if(!y?.id)return;const w=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",S=window.location.protocol==="https:"?"wss:":"ws:",_=w?"localhost:8000":window.location.host,E=`${S}//${_}/ws/notifications?user_id=${y.id}`,T=new WebSocket(E);return T.onmessage=A=>{const L=JSON.parse(A.data);o(M=>[L,...M]),c(M=>M+1)},()=>T.close()},[y?.id]),h.useEffect(()=>{function w(S){u.current&&!u.current.contains(S.target)&&a(!1),d.current&&!d.current.contains(S.target)&&r(!1)}return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),n.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative z-50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:n.jsx(Zf,{className:"text-2xl"})}),n.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:j})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"relative",ref:d,children:[n.jsxs("button",{onClick:()=>r(!s),className:"relative text-gray-600 hover:text-gray-800 transition",children:[n.jsx(cx,{className:"text-xl"}),l>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] w-4 h-4 flex items-center justify-center rounded-full font-semibold",children:l})]}),s&&n.jsxs("div",{className:"absolute right-0 mt-3 w-80 bg-white rounded-xl shadow-lg border z-50 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200",children:[n.jsxs("div",{className:"p-3 border-b bg-gray-50 flex justify-between items-center",children:[n.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:"Notifications"}),n.jsx("button",{onClick:()=>{o([]),c(0)},className:"text-xs text-blue-600 hover:underline",children:"Clear All"})]}),n.jsx("div",{className:"max-h-60 overflow-y-auto",children:i.length>0?i.map((w,S)=>n.jsx("div",{className:"p-3 border-b text-sm hover:bg-gray-50 cursor-pointer transition",children:w.title||w.message||"New Notification"},S)):n.jsx("div",{className:"p-4 text-center text-gray-500 text-xs",children:"No notifications"})})]})]}),n.jsxs("div",{className:"relative",ref:u,children:[n.jsxs("button",{onClick:()=>a(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded transition",children:[n.jsx("img",{src:y?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 h-8 object-cover rounded-full border border-gray-200"}),n.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[y?.first_name," ",y?.last_name]})]}),t&&n.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4 animate-in fade-in slide-in-from-top-2 duration-200",children:[n.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[n.jsx("img",{src:y?.profile_picture||"https://via.placeholder.com/80",alt:"Profile Large",className:"w-16 h-16 rounded-full object-cover border-2 border-gray-100"}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[y?.first_name," ",y?.middle_name," ",y?.last_name]}),n.jsx("p",{className:"text-[11px] text-gray-600 font-light w-full truncate",children:"Manager"})]})]}),n.jsxs("div",{className:"mt-6 space-y-1 px-2",children:[n.jsx("button",{onClick:()=>{p("/manager/users"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 p-2 rounded text-left transition",children:"Invite Your Team"}),n.jsx("button",{onClick:()=>{p("/manager/manage-account"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 p-2 rounded text-left transition",children:"Manage Your Account"}),n.jsx("div",{className:"border-t border-gray-100 my-2"}),n.jsx("button",{onClick:x,className:"block w-full text-sm text-red-600 hover:bg-red-50 p-2 rounded text-left transition font-medium",children:"Logout"})]})]})]})]})]})}function vUe(){const[e,t]=h.useState(!1),[a,s]=h.useState(!1),[r,i]=h.useState(!1),[o,l]=h.useState(!1),c=Jt(),{user:u}=qt();h.useEffect(()=>{u&&console.log("Fetched user:",u)},[u]),h.useEffect(()=>{document.title="Panel | Sari-Sari CRM"},[]);const d="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",f="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition";return["/manager/accounts","/manager/contacts","/manager/leads","/manager/deals","/manager/quotes","/manager/targets","/manager/meetings","/manager/manage-account"].includes(c.pathname),n.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[n.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${o?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[n.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[n.jsxs("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:[" Sari-Sari.CRM"," ",n.jsx("span",{className:"text-[12px] text-gray-700 font-medium align-bottom",children:"v2"})]}),u&&u.company&&n.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:u.company.company_name})]}),n.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[n.jsxs(Ft,{to:"/manager/dashboard",className:({isActive:x})=>x?d:f,children:[n.jsx(dx,{className:"text-lg"}),n.jsx("span",{children:"Dashboard"})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>t(!e),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(tn,{className:"text-lg"}),"Sales"]}),n.jsx(Lt,{className:`transition-transform ${e?"rotate-180":""}`})]}),e&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(Ft,{to:"/manager/accounts",className:({isActive:x})=>x?d:f,children:[n.jsx(wd,{})," Accounts"]}),n.jsxs(Ft,{to:"/manager/contacts",className:({isActive:x})=>x?d:f,children:[n.jsx(nn,{})," Contacts"]}),n.jsxs(Ft,{to:"/manager/leads",className:({isActive:x})=>x?d:f,children:[n.jsx(Kn,{})," Leads"]}),n.jsxs(Ft,{to:"/manager/deals",className:({isActive:x})=>x?d:f,children:[n.jsx(tn,{})," Deals"]}),n.jsxs(Ft,{to:"/manager/quotes",className:({isActive:x})=>x?d:f,children:[n.jsx(fn,{})," Quotes"]}),n.jsxs(Ft,{to:"/manager/targets",className:({isActive:x})=>x?d:f,children:[n.jsx(mr,{})," Targets"]})]})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!a),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(ks,{className:"text-lg"}),"Activity"]}),n.jsx(Lt,{className:`transition-transform ${a?"rotate-180":""}`})]}),a&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(Ft,{to:"/manager/tasks",className:({isActive:x})=>x?d:f,children:[n.jsx(Qt,{})," Tasks"]}),n.jsxs(Ft,{to:"/manager/meetings",className:({isActive:x})=>x?d:f,children:[n.jsx(Pt,{})," Meetings"]}),n.jsxs(Ft,{to:"/manager/calls",className:({isActive:x})=>x?d:f,children:[n.jsx(zs,{})," Calls"]}),n.jsxs(Ft,{to:"/manager/audit",className:({isActive:x})=>x?d:f,children:[n.jsx(ks,{})," Audit"]})]})]}),n.jsx("div",{children:n.jsx(Ft,{to:"/manager/territory",className:({isActive:x})=>x?d:f,children:n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Zl,{className:"text-lg"}),"Territory"]})})}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!r),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(NL,{className:"text-lg"}),"Settings"]}),n.jsx(Lt,{className:`transition-transform ${r?"rotate-180":""}`})]}),r&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(Ft,{to:"/manager/users",className:({isActive:x})=>x?d:f,children:[n.jsx(ra,{})," Users"]}),n.jsxs(Ft,{to:"/manager/manage-account",className:({isActive:x})=>x?d:f,children:[n.jsx(nn,{})," Your Profile"]})]})]})]}),n.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),o&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>l(!1)}),n.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[n.jsx(bUe,{toggleSidebar:()=>l(!o)}),n.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:n.jsx(tx,{})})]})]})}const wUe=e=>n.jsx(Vt,{...e}),NUe=e=>n.jsx(wd,{...e}),mJ=e=>n.jsx(Vs,{...e}),jUe=e=>n.jsx(lx,{...e}),CUe=e=>n.jsx(aN,{...e}),SUe=e=>n.jsx(Pt,{...e}),_Ue=e=>n.jsx(Ot,{...e}),AUe=e=>n.jsx(rN,{...e}),fJ=e=>n.jsx(sN,{...e}),TUe=e=>n.jsx(ra,{...e}),hJ=e=>n.jsx(nn,{...e}),kUe=e=>n.jsx(Kn,{...e}),gJ=e=>n.jsx(tn,{...e}),EUe=e=>n.jsx(fn,{...e}),pJ=e=>n.jsx(mr,{...e}),LUe=e=>n.jsx(aa,{...e}),PUe=e=>n.jsx(Pt,{...e}),DUe=e=>n.jsx(zs,{...e}),OUe=e=>n.jsx(Zl,{...e}),MUe=e=>n.jsx(ks,{...e}),xJ=(e,t="")=>{const a=parseFloat(e)||0;return new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short",maximumFractionDigits:1}).format(a).replace(/^/,`${t} `)},IUe=e=>{switch(e){case"Negotiation":return{text:"text-purple-700",bg:"bg-purple-100"};case"Proposal":return{text:"text-red-700",bg:"bg-red-100"};case"Qualification":return{text:"text-yellow-700",bg:"bg-yellow-100"};case"Prospecting":return{text:"text-blue-700",bg:"bg-blue-100"};case"Closed Won":return{text:"text-green-700",bg:"bg-green-100"};case"Closed Lost":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},$Ue=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},RUe=e=>{switch(e){case"call":return{Icon:_Ue,color:"text-red-500",bgColor:"bg-red-100"};case"qualification":return{Icon:AUe,color:"text-green-600",bgColor:"bg-green-100"};default:return{Icon:SUe,color:"text-blue-500",bgColor:"bg-blue-100"}}},zUe=e=>{switch(e.toUpperCase()){case"HIGH":return{text:"text-red-700",bg:"bg-red-100"};case"LOW":return{text:"text-blue-700",bg:"bg-blue-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},FUe=({searchQuery:e,onSearchChange:t,searchResults:a,onSearchResultClick:s})=>{const r=jt(),[i,o]=h.useState(!1),l=h.useRef(null),c=[{icon:NUe,label:"Account"},{icon:hJ,label:"Contact"},{icon:kUe,label:"Leads"},{icon:gJ,label:"Deals"},{icon:EUe,label:"Quotes"},{icon:pJ,label:"Target"},{icon:LUe,label:"Task"},{icon:PUe,label:"Meeting"},{icon:DUe,label:"Call"},{icon:MUe,label:"Audit"},{icon:OUe,label:"Territory"}];h.useEffect(()=>{const f=p=>{l.current&&!l.current.contains(p.target)&&o(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const u=f=>{t(f.target.value),o(f.target.value.trim().length>0)},d=f=>{s&&s(f),o(!1)};return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 sm:p-4 flex flex-col items-start space-y-4 w-full",children:[n.jsxs("div",{className:"w-full flex justify-center relative",ref:l,children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg lg:mt-3 px-4 py-2 w-full max-w-md md:max-w-lg lg:max-w-2xl focus-within:ring-2 focus-within:ring-blue-500 transition duration-150",children:[n.jsx(wUe,{size:20,className:"text-gray-400 mr-3 flex-shrink-0"}),n.jsx("input",{type:"text",placeholder:"Search Leads, Deals, or Accounts...",className:"focus:outline-none text-base w-full",value:e,onChange:u,onFocus:()=>e.trim().length>0&&o(!0)})]}),i&&Array.isArray(a)&&a.length>0&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:a.map((f,p)=>n.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition duration-150",onClick:()=>d(f),children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:f.name}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:f.type}),f.details&&n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:f.details})]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${f.type==="Lead"?"bg-blue-100 text-blue-600":f.type==="Deal"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:f.type})]})},p))}),i&&e.trim().length>0&&(!Array.isArray(a)||a.length===0)&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 p-4 text-center text-sm text-gray-500",children:"No results found"})]}),n.jsx("div",{className:"w-full overflow-x-auto lg:overflow-x-hidden scroll-smooth flex justify-center",children:n.jsx("div",{className:"flex flex-nowrap space-x-3 lg:space-x-4 xl:space-x-3 px-2 sm:px-0",children:c.map((f,p)=>n.jsxs("div",{className:"relative flex-shrink-0 group",children:[n.jsx("button",{className:"p-3 text-gray-500 hover:text-gray-900 transition duration-150 rounded-full hover:bg-gray-100 focus:outline-none cursor-pointer","aria-label":f.label,title:f.label,onClick:()=>{switch(f.label){case"Account":r("/manager/accounts");break;case"Contact":r("/manager/contacts");break;case"Leads":r("/manager/leads");break;case"Deals":r("/manager/deals");break;case"Quotes":r("/manager/quotes");break;case"Target":r("/manager/targets");break;case"Task":r("/manager/tasks");break;case"Meeting":r("/manager/meetings");break;case"Call":r("/manager/calls");break;case"Audit":r("/manager/audit");break;case"Territory":r("/manager/territory");break;default:console.log(`Clicked ${f.label}`)}},children:n.jsx(f.icon,{size:24,className:"lg:scale-95"})}),n.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-1.5 bg-gray-900 text-white text-xs font-semibold rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-75 ease-in-out z-50 shadow-lg",children:[f.label,n.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]},p))})})]})},UUe=({action:e,description:t,entity_type:a,entity_name:s,timestamp:r})=>{const i=jt(),o=d=>{if(!d)return"Unknown";const f=new Date(d),x=new Date-f,y=Math.floor(x/6e4),N=Math.floor(x/36e5),v=Math.floor(x/864e5);return y<1?"Just now":y<60?`${y} min ago`:N<24?`${N} hour${N>1?"s":""} ago`:v<7?`${v} day${v>1?"s":""} ago`:f.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},l=e||t||"Action",c=s||a||"System",u=o(r);return n.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i("/manager/audit"),children:[n.jsxs("p",{className:"text-sm text-gray-800 flex-grow font-medium",children:[l," ",n.jsxs("span",{className:"text-gray-500 italic text-xs",children:["(",c,")"]})]}),n.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-4",children:u})]})},BUe=({logs:e,loading:t})=>{const a=jt();return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Recent Logs"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/manager/audit"),children:[n.jsx("span",{children:"See All"}),n.jsx(fJ,{size:14,className:"transform -rotate-45"})]})]}),e&&e.length>0?n.jsx("ul",{className:"space-y-1",children:e.slice(0,3).map((s,r)=>n.jsx(UUe,{...s},r))}):n.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No recent logs"})]})},HUe=({icon:e,title:t,value:a,color:s,bgColor:r,loading:i,onClick:o})=>n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o||(()=>console.log(`Clicked metric card: ${t}`)),children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:20})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a||0})]})]}),qUe=({revenueData:e,loading:t})=>{const a=jt(),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=h.useMemo(()=>{if(console.log("=== RevenueChart calculateRevenueData ==="),console.log("revenueData:",e),console.log("revenueData length:",e?.length),!e||e.length===0){console.log("No revenue data, returning empty chart");const v=new Date;v.getFullYear();const j=v.getMonth(),w=[],S=[];for(let _=0;_<=j;_++)w.push(s[_]),S.push(0);return{labels:w,revenues:S,maxRevenue:0}}const l={};let c=0,u=0;console.log("Processing deals:",e.length),e.forEach((v,j)=>{const w=v.close_date||v.closeDate||null,S=w&&w!==null&&w!=="",_=v.stage||"",E=_.toUpperCase()==="CLOSED_WON"||_==="CLOSED_WON";let T=v.amount;T&&typeof T=="object"&&T.toString?T=parseFloat(T.toString()):T=parseFloat(T)||0;const A=T>0;if(E&&(u++,console.log(`Deal ${j+1} (CLOSED_WON):`,{id:v.id,name:v.name,stage:_,close_date:w,close_date_type:typeof w,amount:T,amount_type:typeof v.amount,hasCloseDate:S,hasAmount:A,willBeAdded:S&&A,allFields:Object.keys(v)})),S&&E&&A)try{let L=new Date(w);if(isNaN(L.getTime())){const M=String(w).split("T")[0];L=new Date(M+"T00:00:00")}if(isNaN(L.getTime()))console.warn(` Invalid date for deal ${v.id}:`,w,"Type:",typeof w);else{const M=L.getFullYear(),F=L.getMonth()+1,$=`${M}-${String(F).padStart(2,"0")}`;l[$]||(l[$]=0),l[$]+=T,c++,console.log(` Added deal ${v.id} to month ${$}: ${T}, total: ${l[$]}`),console.log(`  - Close date: ${w} -> Parsed: ${L.toISOString()} -> Month: ${$} (Year: ${M}, Month: ${F})`)}}catch(L){console.error("Error parsing deal date:",w,L)}else E&&console.warn(` Deal ${v.id} is CLOSED_WON but missing data:`,{hasCloseDate:S,hasAmount:A,closeDate:w,amount:T,originalAmount:v.amount})}),console.log("Summary:",{totalDeals:e.length,closedWonDeals:u,validDealsForGraph:c,monthlyRevenue:l});const d=Object.keys(l).map(v=>parseInt(v.split("-")[0])),f=d.length>0?[...new Set(d)].sort():[],p=new Date().getFullYear();new Date().getMonth();const x=[],y=[];for(let v=0;v<12;v++){const j=`${p}-${String(v+1).padStart(2,"0")}`;x.push(s[v]);const w=l[j]||0;y.push(w),w>0&&console.log(`Month ${s[v]} (${j}): ${w}`)}if(f.length>0){const v=Math.max(...f);if(v>p)for(let j=p+1;j<=v;j++)for(let w=0;w<12;w++){const S=`${j}-${String(w+1).padStart(2,"0")}`,_=l[S]||0;x.push(`${s[w]} ${j}`),y.push(_),_>0&&console.log(`Month ${s[w]} ${j} (${S}): ${_}`)}}const N=Math.max(...y,1);return console.log("Final chart data:",{labels:x,revenues:y,maxRevenue:N,hasData:y.some(v=>v>0)}),{labels:x,revenues:y,maxRevenue:N}},[e]),i=r.labels,o=r.revenues;return console.log("=== FINAL CHART DATA ==="),console.log("X Axis (Months):",i),console.log("Y Axis (Revenue):",o),console.log("Has any revenue > 0:",o.some(l=>l>0)),console.log("All revenue values:",o),console.log("Max revenue:",r.maxRevenue),n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Overview"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/manager/deals"),children:[n.jsx("span",{children:"See All"}),n.jsx(fJ,{size:14,className:"transform -rotate-45"})]})]}),n.jsx("div",{className:"h-80 relative flex-1 flex items-center justify-center p-6",children:n.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i&&i.length>0&&o&&o.length>0?n.jsx(Ix,{xAxis:[{data:i,scaleType:"point"}],yAxis:[{valueFormatter:l=>l>=1e3?`${(l/1e3).toFixed(0)}k`:l.toString()}],series:[{data:o,showMark:!0,area:!0}],height:320,width:void 0,grid:{vertical:!0,horizontal:!0},margin:{top:40,right:40,bottom:50,left:50},sx:{width:"100%",maxWidth:"100%"}}):n.jsxs("div",{className:"text-center text-gray-500",children:[n.jsx("p",{className:"text-sm",children:"No revenue data available"}),n.jsx("p",{className:"text-xs mt-2",children:"Closed won deals with close dates will appear here"})]})})})]})},BA=({title:e,items:t,children:a,onSeeAll:s})=>{const r=jt(),i=()=>{if(s)s();else{const o={"Latest Leads":"/manager/leads","Latest Deals":"/manager/deals","Upcoming Activities":"/manager/tasks"};o[e]&&r(o[e])}};return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e}),n.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:i,children:"See All"})]}),a]})},WUe=({first_name:e,last_name:t,company_name:a,source:s,created_at:r,id:i})=>{const o=jt(),{text:l,bg:c}=$Ue(s||"Website"),u=x=>{if(!x)return"Unknown";const y=new Date(x),v=new Date-y,j=Math.floor(v/6e4),w=Math.floor(v/36e5),S=Math.floor(v/864e5);return j<60?`${j} min ago`:w<24?y.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):S<7?y.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):y.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},d=`${e||""} ${t||""}`.trim()||"Unknown",f=a||"Unknown Company",p=u(r);return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&o(`/manager/leads/${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800",children:d}),n.jsx("p",{className:"text-xs text-gray-500",children:f})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-400",children:p}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${l} ${c} px-2 py-0.5 rounded-full`,children:s||"Website"})]})]})})},GUe=({name:e,amount:t,account:a,stage:s,created_at:r,id:i,previousAmount:o,currencySymbol:l})=>{const c=jt(),d={PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"}[s]||s||"Unknown",{text:f,bg:p}=IUe(d),x=parseFloat(t||0),y=o?x>=o?"up":"down":"up",N=y==="up"?jUe:CUe,v=y==="up"?"text-green-400":"text-red-400",j=a?.name||"Unknown Company";return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&c(`/manager/deals/info?id=${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex-shrink",children:[n.jsx("p",{className:"font-semibold text-sm text-gray-900",children:e||"Unnamed Deal"}),n.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:j}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${f} ${p} px-2 py-0.5 rounded-full`,children:d})]}),n.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[n.jsx("p",{className:"text-md font-bold text-gray-800",children:xJ(x,l)}),n.jsx(N,{size:16,className:`${v} mt-1`})]})]})})},VUe=({type:e,title:t,assignedTo:a,dueDate:s,scheduledDate:r,priority:i,id:o,activityType:l,fullData:c})=>{const u=jt(),f=l||{Call:"call",Meeting:"meeting",Task:"qualification"}[e]||"meeting",{Icon:p,color:x,bgColor:y}=RUe(f),{text:N,bg:v}=zUe(i||"MEDIUM"),S=(T=>{if(!T)return"No date set";const A=new Date(T),M=A-new Date,F=Math.floor(M/864e5);return F===0?`Today, ${A.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:F===1?`Tomorrow, ${A.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:F===-1?`Yesterday, ${A.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:A.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(s||r),_=a||"Unassigned",E=()=>{o&&(c?f==="call"?(sessionStorage.setItem("callDetailData",JSON.stringify(c)),u(`/manager/calls/info?id=${o}`)):f==="meeting"?(sessionStorage.setItem("meetingDetailData",JSON.stringify(c)),u(`/manager/meetings/info?id=${o}`)):u("/manager/tasks"):u(f==="call"?`/manager/calls/info?id=${o}`:f==="meeting"?`/manager/meetings/info?id=${o}`:"/manager/tasks"))};return n.jsxs("div",{className:"flex items-start py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:E,children:[n.jsx("div",{className:`p-2 rounded-lg ${y} mr-3 flex-shrink-0 mt-1`,children:n.jsx(p,{size:20,className:`${x}`})}),n.jsxs("div",{className:"flex-grow",children:[n.jsxs("p",{className:"font-medium text-gray-800 flex items-center mb-1",children:[n.jsx("span",{className:"text-xl leading-none mr-2",children:""}),t||"Untitled Activity"]}),n.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[n.jsxs("p",{className:"flex items-center",children:[n.jsx(mJ,{size:14,className:"mr-1.5 text-gray-400"}),S]}),n.jsxs("p",{className:"flex items-center",children:[n.jsx(hJ,{size:14,className:"mr-1.5 text-gray-400"}),"Assigned to: ",_]})]})]}),n.jsx("span",{className:`inline-block text-xs font-medium ${N} ${v} px-2 py-0.5 rounded-full flex-shrink-0 self-center ml-4`,children:(i||"MEDIUM").toUpperCase()})]})},YUe=()=>{const e=jt(),{user:t}=qt(),a=t?.company?.currency||"",[s,r]=h.useState({activeLeads:0,totalDeals:0,activeAccounts:0,overdueTasks:0}),[i,o]=h.useState([]),[l,c]=h.useState([]),[u,d]=h.useState([]),[f,p]=h.useState([]),[x,y]=h.useState([]),[N,v]=h.useState([]),[j,w]=h.useState(!0),[S,_]=h.useState(null),[E,T]=h.useState(""),[A,L]=h.useState([]),[M,F]=h.useState([]),[$,D]=h.useState([]),[q,G]=h.useState([]),[U,V]=h.useState(0),[Z,Y]=h.useState(new Date),le=h.useRef(null),_e=h.useRef(null),te=h.useMemo(()=>{try{if(!E.trim())return[];const he=E.toLowerCase().trim(),ve=[];return Array.isArray(A)&&A.forEach(ne=>{const Se=`${ne.first_name||""} ${ne.last_name||""}`.trim().toLowerCase(),de=(ne.company_name||"").toLowerCase(),ke=(ne.email||"").toLowerCase(),Te=(ne.phone||"").toLowerCase();(Se.includes(he)||de.includes(he)||ke.includes(he)||Te.includes(he))&&ve.push({id:ne.id,name:`${ne.first_name||""} ${ne.last_name||""}`.trim()||"Unnamed Lead",type:"Lead",details:ne.company_name||"No company",route:`/manager/leads/${ne.id}`})}),Array.isArray(M)&&M.forEach(ne=>{const Se=(ne.name||"").toLowerCase(),de=(ne.account?.name||"").toLowerCase(),ke=(ne.description||"").toLowerCase();(Se.includes(he)||de.includes(he)||ke.includes(he))&&ve.push({id:ne.id,name:ne.name||"Unnamed Deal",type:"Deal",details:ne.account?.name||"No account",route:`/manager/deals/info?id=${ne.id}`})}),Array.isArray($)&&$.forEach(ne=>{const Se=(ne.name||"").toLowerCase(),de=(ne.email||"").toLowerCase(),ke=(ne.phone||"").toLowerCase(),Te=(ne.website||"").toLowerCase();(Se.includes(he)||de.includes(he)||ke.includes(he)||Te.includes(he))&&ve.push({id:ne.id,name:ne.name||"Unnamed Account",type:"Account",details:ne.email||ne.phone||"No contact info",route:"/manager/accounts"})}),ve.slice(0,10)}catch(he){return console.error("Error in search:",he),[]}},[E,A,M,$]),ae=he=>{he.route&&(e(he.route),T(""))},ye=h.useCallback(async()=>{w(!0),_(null);try{const[he,ve,ne,Se,de,ke,Te,pe]=await Promise.all([se.get("/leads/admin/getLeads").catch(oe=>(console.error("Error fetching leads:",oe),{data:[]})),se.get("/deals/admin/fetch-all").catch(oe=>(console.error("Error fetching deals:",oe),{data:[]})),se.get("/accounts/admin/fetch-all").catch(oe=>(console.error("Error fetching accounts:",oe),{data:[]})),se.get("/tasks/all").catch(oe=>(console.error("Error fetching tasks:",oe),{data:[]})),se.get("/meetings/admin/fetch-all").catch(oe=>(console.error("Error fetching meetings:",oe),{data:[]})),se.get("/calls/admin/fetch-all").catch(oe=>(console.error("Error fetching calls:",oe),{data:[]})),se.get("/logs/read-all").catch(oe=>(console.error("Error fetching logs:",oe),{data:[]})),se.get("/targets/admin/fetch-all").catch(oe=>(console.error("Error fetching targets:",oe),{data:[]}))]),ze=Array.isArray(he.data)?he.data:[],Pe=Array.isArray(ve.data)?ve.data:[],We=Array.isArray(ne.data)?ne.data:[],tt=Array.isArray(Se.data)?Se.data:[],lt=Array.isArray(de.data)?de.data:[],Ie=Array.isArray(ke.data)?ke.data:[],rt=Array.isArray(Te.data)?Te.data:[],He=Array.isArray(pe.data)?pe.data:[];console.log("=== RAW DEALS API RESPONSE ==="),console.log("Deals count:",Pe.length),Pe.length>0&&(console.log("First deal sample (raw):",JSON.stringify(Pe[0],null,2)),console.log("First deal keys:",Object.keys(Pe[0]))),L(ze),F(Pe),D(We),G(He);const Ke=He.reduce((oe,De)=>{const $e=De.amount||De.value||De.target_amount||0,Xe=parseFloat(typeof $e=="string"?$e.replace(/[^\d.-]/g,""):$e);return oe+(Number.isFinite(Xe)?Xe:0)},0);V(Ke);const Je=ze.filter(oe=>oe.status&&!["Lost","Converted"].includes(oe.status)).length,Oe=tt.filter(oe=>!oe.dueDate||oe.status==="Completed"?!1:new Date(oe.dueDate)<new Date).length;r({activeLeads:Je,totalDeals:Pe.length,activeAccounts:We.length,overdueTasks:Oe});const Ce=[...ze].sort((oe,De)=>new Date(De.created_at||0)-new Date(oe.created_at||0)).slice(0,5);o(Ce);const fe=[...Pe].sort((oe,De)=>new Date(De.created_at||0)-new Date(oe.created_at||0)).slice(0,5);c(fe);const ue=new Date,H=[];Ie.forEach(oe=>{const De=oe.due_date||oe.call_time,$e=(oe.status||"").toUpperCase();if(De){const Xe=new Date(De);$e==="COMPLETED"||$e==="MISSED"||$e==="NOT_HELD"||$e==="HELD"||H.push({type:"Call",title:oe.subject||"Untitled Call",assignedTo:oe.assigned_to||(oe.call_assign_to?`${oe.call_assign_to.first_name||""} ${oe.call_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:De,priority:(oe.priority||"MEDIUM").toUpperCase(),id:oe.id,activityType:"call",fullData:oe})}}),lt.forEach(oe=>{const De=oe.dueDate||oe.start_time,$e=(oe.status||"").toUpperCase();if(De){const Xe=new Date(De);$e==="COMPLETED"||$e==="CANCELLED"||$e==="DONE"||H.push({type:"Meeting",title:oe.subject||oe.activity||"Untitled Meeting",assignedTo:oe.assignedTo||(oe.meet_assign_to?`${oe.meet_assign_to.first_name||""} ${oe.meet_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:De,priority:(oe.priority||"MEDIUM").toUpperCase(),id:oe.id,activityType:"meeting",fullData:oe})}});const K={HIGH:1,MEDIUM:2,LOW:3},we=H.sort((oe,De)=>{const $e=K[oe.priority]||3,Xe=K[De.priority]||3;if($e!==Xe)return $e-Xe;const Ze=new Date(oe.scheduledDate||0),mt=new Date(De.scheduledDate||0);return Ze-mt}).slice(0,5);d(we),p(Pe),console.log("=== ALL DEALS DATA ==="),console.log("Total deals:",Pe.length);const Me=Pe.filter(oe=>(oe.stage||"").toUpperCase()==="CLOSED_WON");console.log("CLOSED_WON deals:",Me.length),Me.length>0?(console.log("=== CLOSED_WON DEALS DETAILS ==="),Me.forEach((oe,De)=>{let $e=oe.amount;$e&&typeof $e=="object"?$e.toString?$e=parseFloat($e.toString()):$e=parseFloat($e):$e=parseFloat($e)||0,console.log(`Deal ${De+1}:`,{id:oe.id,name:oe.name,stage:oe.stage,stage_upper:(oe.stage||"").toUpperCase(),amount:oe.amount,amount_parsed:$e,amount_type:typeof oe.amount,close_date:oe.close_date,close_date_type:typeof oe.close_date,close_date_value:oe.close_date?new Date(oe.close_date):null,has_close_date:!!oe.close_date,has_amount:$e>0,all_keys:Object.keys(oe),full_deal:oe})})):(console.log(" No CLOSED_WON deals found!"),console.log("All deal stages:",Pe.map(oe=>oe.stage))),v(Pe);const ce=[...rt].sort((oe,De)=>new Date(De.timestamp||0)-new Date(oe.timestamp||0));y(ce)}catch(he){console.error("Error fetching dashboard data:",he),_("Failed to load dashboard data. Please refresh the page.")}finally{w(!1)}},[]);h.useEffect(()=>(document.title="Dashboard | Sari-Sari CRM",console.log("ManagerDashboard mounted, fetching data..."),ye(),le.current=setInterval(()=>{console.log("Auto-refreshing dashboard data..."),ye(),Y(new Date)},3e4),()=>{le.current&&clearInterval(le.current)}),[ye]),h.useEffect(()=>{if(!t||!t.id)return;let he=0;const ve=3;let ne=null;const Se=()=>{const de=window.location.protocol==="https:"?"wss:":"ws:",ke=window.location.hostname==="localhost"?"localhost:8000":window.location.host,Te=`${de}//${ke}/ws/notifications?user_id=${t.id}`;try{const pe=new WebSocket(Te);_e.current=pe,pe.onopen=()=>{console.log(" WebSocket connected for dashboard updates"),he=0},pe.onmessage=ze=>{try{const Pe=JSON.parse(ze.data);console.log(" Real-time notification received:",Pe),Pe.event&&["new_task","task_updated","new_lead","lead_updated","new_deal","deal_updated","new_account","account_updated","new_meeting","meeting_updated","new_call","call_updated"].includes(Pe.event)&&(console.log(" Refreshing dashboard due to:",Pe.event),ye(),Y(new Date))}catch(Pe){console.error("Error parsing WebSocket message:",Pe)}},pe.onerror=ze=>{he===0&&console.warn(" WebSocket connection unavailable (this is optional)")},pe.onclose=()=>{he<ve&&(he++,ne=setTimeout(()=>{t&&t.id&&Se()},5e3))}}catch{console.warn(" WebSocket not available (optional feature)")}};return Se(),()=>{ne&&clearTimeout(ne),_e.current&&(_e.current.close(),_e.current=null)}},[t,ye]);const Ne=[{icon:TUe,title:"Active Leads",value:s.activeLeads,color:"text-blue-600",bgColor:"bg-blue-50",onClick:()=>e("/manager/leads")},{icon:pJ,title:"Total Targets",value:xJ(U,a),color:"text-purple-600",bgColor:"bg-purple-50",onClick:()=>e("/manager/targets")},{icon:gJ,title:"Total Deals",value:s.totalDeals,color:"text-yellow-600",bgColor:"bg-yellow-50",onClick:()=>e("/manager/deals")},{icon:mJ,title:"Overdue Tasks",value:s.overdueTasks,color:"text-red-600",bgColor:"bg-red-50",onClick:()=>e("/manager/tasks")}];return console.log("ManagerDashboard rendering, loading:",j,"error:",S),n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative w-full",children:[j&&n.jsx(Wt,{}),n.jsxs("div",{className:"max-w-screen-2xl mx-auto",children:[S&&n.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:n.jsx("p",{className:"font-medium",children:S})}),n.jsx("div",{className:"mb-8",children:n.jsx(FUe,{searchQuery:E,onSearchChange:T,searchResults:te,onSearchResultClick:ae})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-8",children:Ne.map(he=>n.jsx(HUe,{...he,loading:j},he.title))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[n.jsx(BUe,{logs:x,loading:j}),n.jsx(fP,{currencySymbol:a})]}),n.jsx("div",{className:"mb-8",children:n.jsx(vj,{leads:A,deals:M,targets:q,currencySymbol:a,basePath:"/manager"})}),n.jsx("div",{className:"grid grid-cols-1 mb-8",children:n.jsx(qUe,{revenueData:N,loading:j})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsx(BA,{title:"Latest Leads",children:i.length>0?i.map((he,ve)=>n.jsx(WUe,{...he},he.id||ve)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No leads found"})}),n.jsx(BA,{title:"Latest Deals",children:j?n.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mb-2"}),n.jsx("div",{className:"text-sm text-gray-500",children:"Loading deals..."})]}):l.length>0?l.map((he,ve)=>n.jsx(GUe,{...he,currencySymbol:a},he.id||ve)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No deals found"})}),n.jsx(BA,{title:"Upcoming Activities",children:u.length>0?u.map((he,ve)=>n.jsx(VUe,{...he},he.id||ve)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No upcoming activities"})})]})]})]})},HA=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Vendor"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Delete"}],qA={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",parent_company:"",status:"PROSPECT",territory_id:"",assigned_to:""},cr=e=>e?e.toUpperCase():"",WA=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",QUe=e=>{switch(cr(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},KUe=e=>{switch(cr(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}};function XUe(){const e=jt(),{user:t}=qt();h.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[a,s]=h.useState(!1),[r,i]=h.useState(!1),[o,l]=h.useState(!1),[c,u]=h.useState(null),[d,f]=h.useState(null),[p,x]=h.useState(qA),[y,N]=h.useState(null),[v,j]=h.useState([]),[w,S]=h.useState(!1),[_,E]=h.useState([]),[T,A]=h.useState(null),[L,M]=h.useState([]),[F,$]=h.useState([]),[D,q]=h.useState("Filter by Status"),[G,U]=h.useState(""),[V,Z]=h.useState(null),[Y,le]=h.useState(!1),[_e,te]=h.useState(1),[ae,ye]=h.useState(10),[Ne,he]=h.useState("Overview"),[ve,ne]=h.useState(""),[Se,de]=h.useState(!1),[ke,Te]=h.useState({}),[pe,ze]=h.useState(null),[Pe,We]=h.useState(new Set),[tt,lt]=h.useState(!1),{comments:Ie,addComment:rt,refresh:He}=ka({relatedType:"account",relatedId:y?.id});h.useEffect(()=>{y?.id&&He()},[y?.id,He]);const Ke=h.useCallback(async(k=null)=>{S(!0);try{const B=await se.get("/accounts/admin/fetch-all"),Ae=[...Array.isArray(B.data)?B.data:[]].sort((Ue,Ge)=>{const ct=Ue?.created_at||Ue?.updated_at||0,yt=Ge?.created_at||Ge?.updated_at||0;return new Date(yt)-new Date(ct)});if(j(Ae),k){const Ue=Ae.find(Ge=>Ge.id===k);N(Ue||null)}}catch(B){console.error(B),j([]),B.response?.status===403?W.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):W.error("Failed to fetch accounts. Please try again later.")}finally{S(!1)}},[N]),Je=h.useCallback(async()=>{try{const k=await se.get("/users/all");E(Array.isArray(k.data)?k.data:[])}catch(k){console.error(k),k.response?.status===403&&W.warn("Unable to load users for assignment (permission denied).")}},[]),Oe=h.useCallback(async()=>{try{const k=await se.get("/territories/fetch");M(Array.isArray(k.data)?k.data:[])}catch(k){console.error(k),k.response?.status===403&&W.warn("Unable to load territories (permission denied).")}},[]),Ce=h.useCallback(async()=>{try{const k=await se.get("/accounts/admin/parent-companies");$(Array.isArray(k.data)?k.data:[])}catch(k){console.error(k),k.response?.status===403&&W.warn("Unable to load parent companies (permission denied).")}},[]),fe=h.useCallback(async k=>{try{const B=await se.get(`/activities/accounts/${k}`);Te(B.data&&typeof B.data=="object"?B.data:{})}catch(B){console.error(B),B.response?.status===404&&(console.warn("No activities found for this account."),Te({}))}},[]);h.useEffect(()=>{Ke(),Je(),Oe(),Ce()},[Ke,Je,Oe,Ce]),h.useEffect(()=>{y&&ne(cr(y.status)||"PROSPECT")},[y]);const ue=v.length,H=h.useMemo(()=>v.filter(k=>k.status?.toLowerCase()==="customer").length,[v]),K=h.useMemo(()=>v.filter(k=>k.status?.toLowerCase()==="prospect").length,[v]),we=h.useMemo(()=>v.filter(k=>k.status?.toLowerCase()==="partner").length,[v]),Me=h.useMemo(()=>v.filter(k=>k.status?.toLowerCase()==="active").length,[v]),ce=h.useMemo(()=>v.filter(k=>k.status?.toLowerCase()==="inactive").length,[v]),oe=h.useMemo(()=>v.filter(k=>k.status?.toLowerCase()==="former").length,[v]),De=h.useMemo(()=>[{title:"Total",value:ue,icon:ra,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:H,icon:Io,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:K,icon:Kn,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:we,icon:nn,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:Me,icon:Io,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:ce,icon:$o,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:oe,icon:$o,color:"text-orange-600",bgColor:"bg-orange-100"}],[ue,H,K,we,Me,ce,oe]),$e=h.useMemo(()=>{const k=G.trim().toLowerCase(),B=D.trim().toUpperCase();return v.filter(xe=>{const Ae=[xe?.name,xe?.website,xe?.industry,xe?.territory?.name,xe?.phone_number],Ue=k===""||Ae.some(Et=>Et==null?!1:Et.toString().toLowerCase().includes(k)),Ge=B==="FILTER BY STATUS"||cr(xe.status)===B,yt=cr(xe.status)==="INACTIVE"&&B!=="INACTIVE";return Ue&&Ge&&!yt})},[v,G,D]),Xe=Math.max(1,Math.ceil($e.length/ae)||1);h.useEffect(()=>{te(1)},[G,D]),h.useEffect(()=>{te(k=>{const B=Math.max(1,Math.ceil($e.length/ae)||1);return k>B?B:k})},[$e.length]);const Ze=h.useMemo(()=>{const k=(_e-1)*ae;return $e.slice(k,k+ae)},[$e,_e]);$e.length===0||(_e-1)*ae+1,Math.min(_e*ae,$e.length);const mt=()=>te(k=>Math.max(k-1,1)),nt=()=>te(k=>Math.min(k+1,Xe)),Nt=k=>{N(k),he("Overview"),ne(cr(k?.status)||"PROSPECT")},wt=()=>N(null),Tt=k=>{k.target.id==="accountModalBackdrop"&&!Y&&wt()},Re=()=>{s(!1),i(!1),f(null),x(qA),l(!1),A(null)},me=k=>{k.target.id==="modalBackdrop"&&Re()},ie=k=>k?new Date(k).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",Fe=k=>{const{name:B,value:xe}=k.target;x(Ae=>({...Ae,[B]:xe}))},Le=()=>{x(qA),i(!1),f(null),s(!0)},be=k=>{N(null),k.assigned_accs?A(k.assigned_accs):A(null),x({name:k.name||"",website:k.website||"",phone_number:k.phone_number||"",billing_address:k.billing_address||"",shipping_address:k.shipping_address||"",parent_company:k.parent_company||"",industry:k.industry||"",status:cr(k.status)||"PROSPECT",territory_id:k.territory?.id?String(k.territory.id):"",assigned_to:k.assigned_accs?.id?String(k.assigned_accs.id):""}),i(!0),f(k.id),s(!0)},ee=k=>{k&&Z({title:"Archive Account",message:n.jsxs("span",{children:["Are you sure you want to archive the account"," ",n.jsx("span",{className:"font-semibold",children:k.name}),"? You can restore it later if needed."]}),confirmLabel:"Archive Account",cancelLabel:"Cancel",variant:"archive",action:{type:"archive",targetId:k.id,name:k.name}})},O=k=>{const B=Ze.find(xe=>xe.id===k);B&&B.acc_creator?.id===t?.id&&We(xe=>{const Ae=new Set(xe);return Ae.has(k)?Ae.delete(k):Ae.add(k),Ae})},z=()=>{const k=Ze.filter(B=>B.acc_creator?.id===t?.id);Pe.size===k.length&&k.length>0?We(new Set):We(new Set(k.map(B=>B.id)))},I=()=>{if(Pe.size===0)return;const k=Pe.size;Z({title:"Archive Accounts",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:k})," account",k!==1?"s":"","? You can restore them later if needed."]}),confirmLabel:`Archive ${k} Account${k!==1?"s":""}`,cancelLabel:"Cancel",variant:"archive",action:{type:"bulk-archive",targetIds:Array.from(Pe),count:k}})},Q=async()=>{if(!V?.action){Z(null);return}const{action:k}=V,{type:B,payload:xe,targetId:Ae,name:Ue,targetIds:Ge,count:ct}=k;le(!0);try{if(B==="create"){l(!0);const yt=await se.post("/accounts/admin",xe);Ce(),W.success(`Account "${Ue}" created successfully.`);const Et=y?.id||null;Re(),await Ke(Et),!y&&yt.data?.id}else if(B==="update"){if(!Ae)throw new Error("Missing account identifier for update.");l(!0),await se.put(`/accounts/admin/${Ae}`,xe),W.success(`Account "${Ue}" updated successfully.`);const yt=y?.id&&y.id===Ae?Ae:null;Re(),await Ke(yt),y?.id===Ae&&N(null)}else if(B==="archive"){if(!Ae)throw new Error("Missing account identifier for archiving.");const yt=y?.id;u(Ae),await se.put(`/accounts/admin/${Ae}`,{status:"INACTIVE"}),W.success(`Account "${Ue}" archived successfully.`),await Ke(yt&&yt!==Ae?yt:null),yt===Ae&&N(null)}else if(B==="bulk-archive"){if(!Ge||Ge.length===0)throw new Error("Missing account identifiers for bulk archiving.");lt(!0),await Promise.all(Ge.map(yt=>se.put(`/accounts/admin/${yt}`,{status:"INACTIVE"}))),W.success(`${ct} account${ct!==1?"s":""} archived successfully.`),We(new Set),await Ke(),N(null)}}catch(yt){console.error(yt);const Et=B==="create"?"Failed to create account. Please review the details and try again.":B==="update"?"Failed to update account. Please review the details and try again.":B==="bulk-archive"?"Failed to archive accounts. Please try again.":"Failed to archive account. Please try again.",Kt=yt.response?.data?.detail||Et;W.error(Kt),(B==="create"||B==="update")&&l(!1),B==="archive"&&u(null),B==="bulk-archive"&&lt(!1)}finally{(B==="create"||B==="update")&&l(!1),B==="archive"&&u(null),B==="bulk-archive"&&lt(!1),le(!1),Z(null)}},ge=()=>{Y||Z(null)},re=async()=>{if(!y||!ve)return;const k=cr(ve),B=cr(y.status);if(k!==B){de(!0);try{await se.put(`/accounts/admin/${y.id}`,{status:k}),W.success(`Account status updated to ${WA(k)}`),j(xe=>xe.map(Ae=>Ae.id===y.id?{...Ae,status:k}:Ae)),N(null)}catch(xe){console.error(xe);const Ae=xe.response?.data?.detail||"Failed to update account status. Please try again.";W.error(Ae)}finally{de(!1)}}},[Ee,Qe]=h.useState(!1),gt=k=>{k.preventDefault(),Qe(!0);const B=p.name.trim();if(!B){W.error("Account name is required.");return}if(!p.assigned_to){W.error("Assigned To is required.");return}const Ae={name:B,website:p.website?.trim()||null,phone_number:p.phone_number?.trim()||null,billing_address:p.billing_address?.trim()||null,shipping_address:p.shipping_address?.trim()||null,industry:p.industry?.trim()||null,parent_company:p.parent_company?.trim()||null,status:p.status||"PROSPECT",territory_id:p.territory_id?Number(p.territory_id):null,assigned_to:p.assigned_to?Number(p.assigned_to):null},Ue=r&&d?"update":"create";Z({title:Ue==="create"?"Confirm New Account":"Confirm Update",message:Ue==="create"?n.jsxs("span",{children:["Are you sure you want to create the account"," ",n.jsx("span",{className:"font-semibold",children:B}),"?"]}):n.jsxs("span",{children:["Save changes to the account"," ",n.jsx("span",{className:"font-semibold",children:B}),"?"]}),confirmLabel:Ue==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:Ue,payload:Ae,targetId:d||null,name:B}})},Ct=[{label:"Filter by Status",value:"Filter by Status"},...HA.map(k=>({label:k.label,value:k.value}))],kt=V?.action?.type==="delete"?V.action.targetId:null,Dt=y&&(c===y.id||kt===y.id),on=y&&c===y.id,Qn=y?QUe(y.status):"",ia=y?n.jsx("div",{id:"accountModalBackdrop",onClick:Tt,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:k=>k.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),n.jsx("button",{onClick:wt,className:"text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Xn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:y.name}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${Qn}`,children:WA(y.status)})]}),t?.id===y?.acc_creator?.id&&n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>be(y),disabled:V?.action?.type==="update"&&V.action.targetId===y.id,children:[n.jsx(ga,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>ee(y),disabled:!!Dt,children:on?"Archiving...":n.jsxs(n.Fragment,{children:[n.jsx(Zt,{className:"mr-2"}),"Archive"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(k=>n.jsx("button",{onClick:()=>he(k),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${Ne===k?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:k},k))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[Ne==="Overview"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Website:"}),n.jsx("p",{children:y.website?n.jsx("a",{href:y.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:y.website}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Industry:"}),n.jsx("p",{children:y.industry||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Parent Company:"}),n.jsx("p",{children:y.parent_company||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:y.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:y.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Billing Address:"}),n.jsx("p",{children:y.billing_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),n.jsx("p",{children:y.shipping_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:y.assigned_accs?`${y.assigned_accs.first_name} ${y.assigned_accs.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:y.acc_creator?`${y.acc_creator.first_name} ${y.acc_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:ie(y.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:ie(y.updated_at)||"N/A"})]})]}),n.jsx(Ta,{comments:Ie,onAddComment:rt})]}),Ne==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:v.notes||"No notes available."})]})]}),Ne==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[ke.tasks&&ke.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ze(pe==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",ke.tasks.length,")"]})]}),pe==="tasks"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),pe==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ke.tasks.map((k,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/tasks",{state:{taskID:k.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:k.subject||k.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:k.description||"No description"}),k.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",k.assigned_to.first_name," ",k.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ie(k.due_date||k.created_at)})]},`task-${B}`))})]}),ke.meetings&&ke.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ze(pe==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Pt,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",ke.meetings.length,")"]})]}),pe==="meetings"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),pe==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ke.meetings.map((k,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/meetings",{state:{meetingID:k.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Pt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:k.subject||k.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:k.description||k.location||"No description"}),k.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",k.host.first_name," ",k.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ie(k.start_time||k.created_at)})]},`meeting-${B}`))})]}),ke.calls&&ke.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ze(pe==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ot,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",ke.calls.length,")"]})]}),pe==="calls"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),pe==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ke.calls.map((k,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/calls",{state:{callID:k.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Ot,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:k.subject||k.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:k.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ie(k.call_time||k.created_at)})]},`call-${B}`))})]}),ke.contacts&&ke.contacts.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ze(pe==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(nn,{className:"text-teal-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",ke.contacts.length,")"]})]}),pe==="contacts"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),pe==="contacts"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ke.contacts.map((k,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/contacts",{state:{contactID:k.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-teal-600 mt-1",children:n.jsx(nn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[k.first_name?`${k.first_name} `:"",k.last_name]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:k.title||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ie(k.created_at)})]},`contact-${B}`))})]}),ke.deals&&ke.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ze(pe==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(tn,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",ke.deals.length,")"]})]}),pe==="deals"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),pe==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ke.deals.map((k,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/deals",{state:{dealID:k.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(tn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[k.deal_id?k.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",k.name||k.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:k.stage||k.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ie(k.close_date||k.created_at)})]},`deal-${B}`))})]}),ke.quotes&&ke.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ze(pe==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(fn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",ke.quotes.length,")"]})]}),pe==="quotes"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),pe==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ke.quotes.map((k,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/quotes",{state:{quoteID:k.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(fn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(k.quote_id?k.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:k.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ie(k.presented_date)||""})]},`quote-${B}`))})]}),(!ke||(!ke.tasks||ke.tasks.length===0)&&(!ke.meetings||ke.meetings.length===0)&&(!ke.calls||ke.calls.length===0)&&(!ke.quotes||ke.quotes.length===0)&&(!ke.deals||ke.deals.length===0)&&(!ke.contacts||ke.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/manager/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${y.name}`,relatedType1:"Account",relatedTo1:String(y.id),relatedType2:null,relatedTo2:null,assigned_to:y.assigned_accs?.id?String(y.assigned_accs.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Ot,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${y.name}`,relatedType1:"Account",relatedTo1:String(y.id),relatedType2:null,relatedTo2:null,assignedTo:y.assigned_accs?.id?String(y.assigned_accs.id):"",status:"Planned"}}}),children:[n.jsx(Pt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${y.name}`,relatedType1:"Account",relatedTo1:String(y.id),relatedType2:null,relatedTo2:null,assignedTo:y.assigned_accs?.id?String(y.assigned_accs.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:ve||cr(y?.status)||"PROSPECT",onChange:k=>ne(k.target.value),children:HA.map(k=>n.jsx("option",{value:k.value,children:k.label},k.value))}),n.jsx("button",{onClick:re,disabled:Se||!ve||cr(ve)===cr(y?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Se||!ve||cr(ve)===cr(y?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:Se?"Updating...":"Update"})]})]})]})]})]})}):null,Be=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[w&&n.jsx(Wt,{message:"Loading accounts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(ra,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{Le(),Qe(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(xn,{className:"mr-2"})," Add Account"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:De.map(k=>n.jsx(ZUe,{...k},k.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Vt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search accounts",value:G,onChange:k=>U(k.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:D,onChange:k=>q(k.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:Ct.map(k=>n.jsx("option",{value:k.value,children:k.label},k.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:Pe.size>0&&Pe.size===Ze.filter(k=>k.acc_creator?.id===t?.id).length&&Ze.filter(k=>k.acc_creator?.id===t?.id).length>0,onChange:z,className:"w-4 h-4 cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Industry"}),n.jsx("th",{className:"py-3 px-4",children:"Territory"}),n.jsx("th",{className:"py-3 px-4",children:"Phone"}),n.jsx("th",{className:"py-3 px-4 w-12",children:Pe.size>0&&n.jsx("button",{onClick:I,className:"text-orange-500 hover:text-orange-700 transition",title:"Archive selected accounts",children:n.jsx(Zt,{size:18})})})]})}),n.jsx("tbody",{children:w?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"Loading accounts..."})}):$e.length>0?Ze.map(k=>n.jsxs("tr",{className:"hover:bg-gray-50 text-xs",children:[n.jsx("td",{className:"py-3 px-4",children:k.acc_creator?.id===t?.id&&n.jsx("input",{type:"checkbox",checked:Pe.has(k.id),onChange:B=>{B.stopPropagation(),O(k.id)},className:"w-4 h-4 cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>{Nt(k),fe(k.id)},children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:k.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:k.website||"--"})]})}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>{Nt(k),fe(k.id)},children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${KUe(k.status)}`,children:WA(k.status)})}),n.jsx("td",{className:"py-3 px-4 text-sm cursor-pointer",onClick:()=>{Nt(k),fe(k.id)},children:k.industry||"--"}),n.jsx("td",{className:"py-3 px-4 text-sm cursor-pointer",onClick:()=>{Nt(k),fe(k.id)},children:k.territory?.name||"--"}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>{Nt(k),fe(k.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(Ot,{className:"text-gray-500"}),n.jsx("span",{children:k.phone_number||"--"})]})})]},k.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No accounts found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:$e.length,pageSize:ae,currentPage:_e,onPrev:mt,onNext:nt,onPageSizeChange:k=>{ye(k),te(1)},pageSizeOptions:[10,20,30,40,50],label:"accounts"})]}),_t=a?n.jsx("div",{id:"modalBackdrop",onClick:me,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto hide-scrollbar max-h-[90vh]",onClick:k=>k.stopPropagation(),children:[n.jsx("button",{onClick:()=>{Re(),Qe(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:o||Y,children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:r?"Edit Account":"Add New Account"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:gt,noValidate:!0,children:[n.jsx("div",{className:"md:col-span-2",children:n.jsx(tf,{label:"Name",name:"name",value:p.name,onChange:Fe,placeholder:"Company name",required:!0,isSubmitted:Ee})}),n.jsx(w8,{label:"Parent Company",value:p.parent_company,onChange:k=>{x(B=>({...B,parent_company:k}))},items:F.map(k=>({id:k,name:k})),getLabel:k=>k?.name||"",placeholder:"Select parent company...",disabled:o}),n.jsx(tf,{label:"Website",name:"website",value:p.website,onChange:Fe,placeholder:"https://example.com",disabled:o}),n.jsx(tf,{label:"Phone Number",name:"phone_number",value:p.phone_number,onChange:Fe,placeholder:"09xx xxx xxxx",type:"tel",disabled:o}),n.jsx(tf,{label:"Industry",name:"industry",value:p.industry,onChange:Fe,placeholder:"Industry",disabled:o}),n.jsx(tf,{label:"Billing Address",name:"billing_address",value:p.billing_address,onChange:Fe,placeholder:"Billing address",disabled:o}),n.jsx(tf,{label:"Shipping Address",name:"shipping_address",value:p.shipping_address,onChange:Fe,placeholder:"Shipping address",disabled:o}),n.jsx(v8,{label:"Status",name:"status",value:p.status,onChange:Fe,options:[{value:"",label:"Select status"},...HA],required:!0,disabled:o}),n.jsx(w8,{label:"Assigned To",value:p.assigned_to,onChange:k=>{const B=_.find(Ae=>String(Ae.id)===String(k));A(B);let xe=null;B&&B.assigned_territory&&B.assigned_territory.length===1&&(xe=B.assigned_territory[0].id),x(Ae=>({...Ae,assigned_to:k,territory_id:xe}))},items:_||[],getLabel:k=>`${k?.first_name??""} ${k?.last_name??""} (${k?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:Ee,disabled:o||_.length===0}),n.jsx(v8,{label:"Territory",name:"territory_id",value:p.territory_id||"",onChange:Fe,options:[{value:"",label:T?T.assigned_territory&&T.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"},...T&&T.assigned_territory&&T.assigned_territory.map(k=>({value:String(k.id),label:k.name}))||[]],disabled:o||!T||!T.assigned_territory||T.assigned_territory.length===0}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{Re(),Qe(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:o||Y,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:o||Y,children:o?"Saving...":r?"Update Account":"Save Account"})]})]})]})}):null,X=V?n.jsx(e7e,{open:!0,title:V.title,message:V.message,confirmLabel:V.confirmLabel,cancelLabel:V.cancelLabel,variant:V.variant,onConfirm:Q,onCancel:ge,loading:Y}):null;return n.jsxs(n.Fragment,{children:[Be,ia,_t,X]})}function ZUe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function tf({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:u=!1}){const d=u&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function v8({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(l=>n.jsx("option",{value:l.value,children:l.label},l.value))})]})}function w8({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:u=!1,allowFreeText:d=!1}){const f=u&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(JUe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:f,allowFreeText:d})]})}function JUe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1,allowFreeText:c=!1}){const[u,d]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),y=e.find(j=>String(j.id)===String(t)),N=y?s(y):t,v=h.useMemo(()=>{const j=f.trim().toLowerCase();return(j?e.filter(S=>(s(S)||"").toLowerCase().includes(j)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const j=w=>{x.current&&!x.current.contains(w.target)&&d(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]),h.useEffect(()=>{u||p("")},[u]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:u?f:N,placeholder:r,onFocus:()=>!i&&d(!0),onChange:j=>{p(j.target.value),u||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),u&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsxs("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:[c&&f.trim()&&!v.some(j=>s(j).toLowerCase()===f.trim().toLowerCase())&&n.jsxs("button",{type:"button",onClick:()=>{a(f.trim()),d(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-green-50 bg-blue-50 font-medium text-blue-700",children:['+ Add "',f.trim(),'" as new parent company']}),v.length>0?v.map(j=>{const w=String(j.id),S=s(j),_=String(t)===w;return n.jsx("button",{type:"button",onClick:()=>{a(w),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${_?"bg-blue-50":""}`,children:S||"--"},w)}):!c||!f.trim()?n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"}):null]}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function e7e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":i==="archive"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}const GA={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:""},bl=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),mo=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function t7e(){const e=jt(),t=Jt(),{user:a}=qt();h.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[s,r]=h.useState([]),[i,o]=h.useState(!1),[l,c]=h.useState([]),[u,d]=h.useState([]),[f,p]=h.useState(null),[x,y]=h.useState(!1),[N,v]=h.useState(!1),[j,w]=h.useState(!1),[S,_]=h.useState(null),[E,T]=h.useState(!1),[A,L]=h.useState(null),[M,F]=h.useState(GA),[$,D]=h.useState(""),[q,G]=h.useState("Filter by Accounts"),[U,V]=h.useState(null),[Z,Y]=h.useState("Overview"),[le,_e]=h.useState(1),[te,ae]=h.useState(10),[ye,Ne]=h.useState({}),[he,ve]=h.useState(null),[ne,Se]=h.useState(null),[de,ke]=h.useState(new Set),[Te,pe]=h.useState(!1),{comments:ze,addComment:Pe,refresh:We}=ka({relatedType:"contact",relatedId:f?.id});h.useEffect(()=>{f?.id&&We()},[f?.id,We]),h.useEffect(()=>{const I=t.state?.contactID;I&&(Se(I),e(t.pathname,{replace:!0,state:{}}))},[t,e]),h.useEffect(()=>{if(ne&&s.length>0&&!i){const I=s.find(Q=>Q.id===ne);I?p(I):W.error("Contact not found."),Se(null)}},[ne,s,i]);const tt=h.useCallback(async(I=null)=>{o(!0);try{const Q=await se.get("/contacts/admin/fetch-all"),re=[...Array.isArray(Q.data)?Q.data:[]].sort((Ee,Qe)=>{const gt=Ee?.created_at||Ee?.updated_at||0,Ct=Qe?.created_at||Qe?.updated_at||0;return new Date(Ct)-new Date(gt)});if(r(re),I){const Ee=re.find(Qe=>Qe.id===I);p(Ee||null)}}catch(Q){console.error(Q),r([]),Q.response?.status===403?W.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):W.error("Failed to fetch contacts. Please try again later.")}finally{o(!1)}},[p]),lt=h.useCallback(async()=>{try{const I=await se.get("/accounts/admin/fetch-all"),ge=[...Array.isArray(I.data)?I.data:[]].sort((re,Ee)=>(re?.name||"").localeCompare(Ee?.name||""));c(ge)}catch(I){console.error(I),c([]),I.response?.status===403&&W.warn("Unable to load accounts (permission denied).")}},[]),Ie=h.useCallback(async()=>{try{const I=await se.get("/users/all"),ge=[...Array.isArray(I.data)?I.data:[]].sort((re,Ee)=>bl(re).localeCompare(bl(Ee)));d(ge)}catch(I){console.error(I),d([]),I.response?.status===403&&W.warn("Unable to load users for assignment (permission denied).")}},[]),rt=h.useCallback(async I=>{try{const Q=await se.get(`/activities/contact/${I}`);Ne(Q.data&&typeof Q.data=="object"?Q.data:{})}catch(Q){console.error(Q),Q.response?.status===404&&(console.warn("No activities found for this account."),Ne({}))}},[]);h.useEffect(()=>{tt(),lt(),Ie()},[tt,lt,Ie]);const He=h.useMemo(()=>{const I=new Map;l.forEach(ge=>{ge?.id&&ge?.name&&I.set(String(ge.id),ge.name)}),s.forEach(ge=>{ge?.account_id&&ge?.account?.name&&I.set(String(ge.account_id),ge.account.name)});const Q=Array.from(I.entries()).sort((ge,re)=>ge[1].localeCompare(re[1])).map(([ge,re])=>({value:ge,label:re}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...Q]},[l,s]),Ke=h.useMemo(()=>{const I=$.trim().toLowerCase(),Q=q.trim();return s.filter(ge=>{const re=[ge?.first_name,ge?.last_name,ge?.email,ge?.title,ge?.department,ge?.account?.name,ge?.account?.status,ge?.work_phone,ge?.mobile_phone_1,ge?.mobile_phone_2,ge?.assigned_contact?.first_name,ge?.assigned_contact?.last_name,ge?.contact_creator?.first_name,ge?.contact_creator?.last_name,ge?.notes,mo(ge?.created_at),mo(ge?.updated_at)],Ee=I===""||re.some(Ct=>Ct==null?!1:Ct.toString().toLowerCase().includes(I)),Qe=Q==="Filter by Accounts"||String(ge.account_id)===Q,gt=ge?.status!=="Inactive";return Ee&&Qe&&gt})},[s,$,q]),Je=Math.max(1,Math.ceil(Ke.length/te)||1);h.useEffect(()=>{_e(1)},[$,q]),h.useEffect(()=>{_e(I=>{const Q=Math.max(1,Math.ceil(Ke.length/te)||1);return I>Q?Q:I})},[Ke.length]);const Oe=h.useMemo(()=>{const I=(le-1)*te;return Ke.slice(I,I+te)},[Ke,le,te]),Ce=()=>_e(I=>Math.max(I-1,1)),fe=()=>_e(I=>Math.min(I+1,Je)),ue=h.useMemo(()=>{if(!N||!A)return l;const I=s.find(ge=>ge.id===A);return!I||!I.account||l.some(ge=>ge.id===I.account.id)?l:[...l,I.account]},[l,N,A,s]),H=h.useCallback(()=>{y(!1),v(!1),L(null),F(GA),w(!1),mt(!1)},[]),K=I=>{I.target.id==="modalBackdrop"&&!j&&!E&&H()},we=I=>{const{name:Q,value:ge}=I.target;F(re=>({...re,[Q]:ge}))},Me=()=>{F(GA),v(!1),L(null),y(!0)},ce=async I=>{if(!I)return;const Q=await se.get(`/accounts/get/${I.account_id}`);F({first_name:I.first_name||"",last_name:I.last_name||"",account_id:Q.data.id?Q.data.id:"",title:I.title||"",department:I.department||"",email:I.email||"",work_phone:I.work_phone||"",mobile_phone_1:I.mobile_phone_1||"",mobile_phone_2:I.mobile_phone_2||"",notes:I.notes||"",assigned_to:I.assigned_to?String(I.assigned_to):""}),v(!0),L(I.id),y(!0),p(null)},oe=I=>{if(!I)return;const Q=bl(I)||"this contact";_({title:"Archive Contact",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:Q}),"? You can restore it later if needed."]}),confirmLabel:"Archive Contact",cancelLabel:"Cancel",variant:"archive",action:{type:"archive",targetId:I.id,name:Q}})},De=I=>{const Q=Oe.find(ge=>ge.id===I);Q&&Q.contact_creator?.id===a?.id&&ke(ge=>{const re=new Set(ge);return re.has(I)?re.delete(I):re.add(I),re})},$e=()=>{const I=Oe.filter(Q=>Q.contact_creator?.id===a?.id);de.size===I.length&&I.length>0?ke(new Set):ke(new Set(I.map(Q=>Q.id)))},Xe=()=>{if(de.size===0)return;const I=de.size;_({title:"Archive Contacts",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:I})," contact",I!==1?"s":"","? You can restore them later if needed."]}),confirmLabel:`Archive ${I} Contact${I!==1?"s":""}`,cancelLabel:"Cancel",variant:"archive",action:{type:"bulk-archive",targetIds:Array.from(de),count:I}})},[Ze,mt]=h.useState(!1),nt=I=>{I.preventDefault(),mt(!0);const Q=M.first_name.trim(),ge=M.last_name.trim();if(!Q||!ge){W.error("First name and last name are required.");return}if(!M.account_id){W.error("Account is required.");return}if(!M.assigned_to){W.error("Assigned To is required.");return}const Ee=M.email?.trim();if(!Ee){W.error("Email is required.");return}if(!Ee.includes("@")){W.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Ee)){W.error("Please enter a valid email address.");return}const gt={first_name:Q,last_name:ge,account_id:Number(M.account_id),title:M.title?.trim()||null,department:M.department?.trim()||null,email:M.email?.trim().toLowerCase()||null,work_phone:M.work_phone?.trim()||null,mobile_phone_1:M.mobile_phone_1?.trim()||null,mobile_phone_2:M.mobile_phone_2?.trim()||null,notes:M.notes?.trim()||null,assigned_to:M.assigned_to?Number(M.assigned_to):null},Ct=N&&A?"update":"create",kt=`${Q} ${ge}`.trim();_({title:Ct==="create"?"Confirm New Contact":"Confirm Update",message:Ct==="create"?n.jsxs("span",{children:["Are you sure you want to add"," ",n.jsx("span",{className:"font-semibold",children:kt})," to your contacts?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:kt}),"?"]}),confirmLabel:Ct==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:Ct,payload:gt,targetId:A||null,name:kt}})},Nt=async()=>{if(!S?.action){_(null);return}const{action:I}=S,{type:Q,payload:ge,targetId:re,name:Ee}=I;T(!0);try{if(Q==="create"){w(!0),await se.post("/contacts/admin",ge),W.success(`Contact "${Ee}" created successfully.`);const Qe=f?.id||null;H(),await tt(Qe)}else if(Q==="update"){if(!re)throw new Error("Missing contact identifier for update.");w(!0),await se.put(`/contacts/admin/${re}`,ge),W.success(`Contact "${Ee}" updated successfully.`);const Qe=f?.id&&f.id===re?re:f?.id||null;H(),await tt(Qe),f?.id===re&&p(null)}else if(Q==="archive"){if(!re)throw new Error("Missing contact identifier for archiving.");const Qe=f?.id;V(re),await se.put(`/contacts/admin/${re}`,{status:"Inactive"}),W.success(`Contact "${Ee}" archived successfully.`),await tt(Qe&&Qe!==re?Qe:null),Qe===re&&p(null)}else if(Q==="bulk-archive"){const{targetIds:Qe,count:gt}=I;if(!Qe||Qe.length===0)throw new Error("Missing contact identifiers for bulk archiving.");pe(!0),await Promise.all(Qe.map(Ct=>se.put(`/contacts/admin/${Ct}`,{status:"Inactive"}))),W.success(`${gt} contact${gt!==1?"s":""} archived successfully.`),ke(new Set),await tt(),p(null)}}catch(Qe){console.error(Qe);const gt=Q==="create"?"Failed to create contact. Please review the details and try again.":Q==="update"?"Failed to update contact. Please review the details and try again.":Q==="bulk-archive"?"Failed to archive contacts. Please try again.":"Failed to archive contact. Please try again.",Ct=Qe.response?.data?.detail||gt;W.error(Ct)}finally{(Q==="create"||Q==="update")&&w(!1),Q==="archive"&&V(null),Q==="bulk-archive"&&pe(!1),T(!1),_(null)}},wt=()=>{E||_(null)},Tt=I=>{p(I),Y("Overview")},Re=()=>p(null),me=I=>{I.target.id==="contactModalBackdrop"&&!E&&Re()},ie=S?.action?.type==="delete"?S.action.targetId:null,Fe=f&&(U===f.id||ie===f.id),Le=f&&U===f.id,be=f?n.jsx("div",{id:"contactModalBackdrop",onClick:me,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:I=>I.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),n.jsx("button",{onClick:Re,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Xn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:bl(f)||"Unnamed contact"})}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:a?.id===f?.contact_creator?.id&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>ce(f),disabled:E||S?.action?.type==="update"&&S.action.targetId===f.id,children:[n.jsx(ga,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>oe(f),disabled:!!Fe,children:Le?"Archiving...":n.jsxs(n.Fragment,{children:[n.jsx(Zt,{className:"mr-2"}),"Archive"]})})]})})]}),n.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:n.jsx("p",{className:"text-sm text-gray-500",children:f.account?.name||"No associated account"})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(I=>n.jsx("button",{onClick:()=>Y(I),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${Z===I?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:I},I))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[Z==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact Name:"}),n.jsx("p",{children:bl(f)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Title:"}),n.jsx("p",{children:f.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:f.email?n.jsx("a",{href:`mailto:${f.email}`,className:"text-blue-600 hover:underline break-all",children:f.email}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:f.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:f.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:f.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:f.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:f.assigned_contact?`${f.assigned_contact.first_name} ${f.assigned_contact.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:f.contact_creator?`${f.contact_creator.first_name} ${f.contact_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:mo(f.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:mo(f.updated_at)||"N/A"})]})]})}),Z==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:f.notes||"No notes available."})]}),n.jsx(Ta,{comments:ze,onAddComment:Pe})]}),Z==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[ye.tasks&&ye.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ve(he==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",ye.tasks.length,")"]})]}),he==="tasks"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),he==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ye.tasks.map((I,Q)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/tasks",{state:{taskID:I.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.description||"No description"}),I.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",I.assigned_to.first_name," ",I.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:mo(I.due_date||I.created_at)})]},`task-${Q}`))})]}),ye.meetings&&ye.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ve(he==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Pt,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",ye.meetings.length,")"]})]}),he==="meetings"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),he==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ye.meetings.map((I,Q)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/meetings",{state:{meetingID:I.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Pt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.description||I.location||"No description"}),I.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",I.host.first_name," ",I.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:mo(I.start_time||I.created_at)})]},`meeting-${Q}`))})]}),ye.calls&&ye.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ve(he==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ot,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",ye.calls.length,")"]})]}),he==="calls"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),he==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ye.calls.map((I,Q)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/calls",{state:{callID:I.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Ot,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:mo(I.call_time||I.created_at)})]},`call-${Q}`))})]}),ye.deals&&ye.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ve(he==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(tn,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",ye.deals.length,")"]})]}),he==="deals"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),he==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ye.deals.map((I,Q)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/deals",{state:{dealID:I.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(tn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[I.deal_id?I.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",I.name||I.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:I.stage||I.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:mo(I.close_date||I.created_at)})]},`deal-${Q}`))})]}),ye.quotes&&ye.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ve(he==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(fn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",ye.quotes.length,")"]})]}),he==="quotes"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),he==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ye.quotes.map((I,Q)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/quotes",{state:{quoteID:I.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(fn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(I.quote_id?I.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:I.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:mo(I.presented_date)||""})]},`quote-${Q}`))})]}),(!ye||(!ye.tasks||ye.tasks.length===0)&&(!ye.meetings||ye.meetings.length===0)&&(!ye.calls||ye.calls.length===0)&&(!ye.quotes||ye.quotes.length===0)&&(!ye.deals||ye.deals.length===0)&&(!ye.contacts||ye.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsx("div",{className:"flex flex-col gap-4",children:n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/manager/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${bl(f)||""}`.trim(),relatedType1:"Account",relatedTo1:f?.account_id?String(f.account_id):f?.account?.id?String(f.account.id):"",relatedType2:"Contact",relatedTo2:f?.id?String(f.id):"",assigned_to:f?.assigned_contact?.id?String(f.assigned_contact.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Ot,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!f?.email){alert("No email address available");return}const I=encodeURIComponent(f.email),Q=encodeURIComponent(""),ge=encodeURIComponent(""),re=`mailto:${I}?subject=${Q}&body=${ge}`;window.location.href=re},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(sa,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${bl(f)||""}`.trim(),relatedType1:"Account",relatedTo1:f?.account_id?String(f.account_id):f?.account?.id?String(f.account.id):"",relatedType2:"Contact",relatedTo2:f?.id?String(f.id):"",assignedTo:f?.assigned_contact?.id?String(f.assigned_contact.id):"",status:"Planned"}}}),children:[n.jsx(Pt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Task for ${bl(f)||""}`.trim(),relatedType1:"Account",relatedTo1:f?.account_id?String(f.account_id):f?.account?.id?String(f.account.id):"",relatedType2:"Contact",relatedTo2:f?.id?String(f.id):"",assignedTo:f?.assigned_contact?.id?String(f.assigned_contact.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]})})]})]})]})}):null,ee=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[i&&n.jsx(Wt,{message:"Loading contacts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(ra,{className:"mr-2 text-blue-600"})," Contacts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{Me(),mt(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(xn,{className:"mr-2"})," Add Contact"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Vt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search contacts",value:$,onChange:I=>D(I.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:q,onChange:I=>G(I.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:He.map(I=>n.jsx("option",{value:I.value,children:I.label},I.value??I.label))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:de.size>0&&de.size===Oe.filter(I=>I.contact_creator?.id===a?.id).length&&Oe.filter(I=>I.contact_creator?.id===a?.id).length>0,onChange:$e,className:"w-4 h-4 cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),n.jsx("th",{className:"py-3 px-4",children:"Department"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Created"}),n.jsx("th",{className:"py-3 px-4 w-12",children:de.size>0&&n.jsx("button",{onClick:Xe,className:"text-orange-500 hover:text-orange-700 transition",title:"Archive selected contacts",disabled:Te,children:n.jsx(Zt,{size:18})})})]})}),n.jsx("tbody",{children:i?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"Loading contacts..."})}):Ke.length>0?Oe.map(I=>{const Q=[{Icon:sa,value:I.email,key:"email"},{Icon:Ot,value:I.work_phone,key:"work_phone"},{Icon:cd,value:I.mobile_phone_1,key:"mobile_phone_1"},{Icon:cd,value:I.mobile_phone_2,key:"mobile_phone_2"}].filter(ge=>!!ge.value);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",children:[n.jsx("td",{className:"py-3 px-4",children:a?.id===I.contact_creator?.id&&n.jsx("input",{type:"checkbox",checked:de.has(I.id),onChange:ge=>{ge.stopPropagation(),De(I.id)},className:"w-4 h-4 cursor-pointer"})}),n.jsxs("td",{className:"py-3 px-4 align-top",onClick:()=>{Tt(I),rt(I.id)},children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:bl(I)||"--"}),n.jsx("div",{className:"text-xs text-gray-500",children:I.title||"No title"})]}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{Tt(I),rt(I.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[n.jsx(Gx,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"break-words",children:I.account?.name||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{Tt(I),rt(I.id)},children:Q.length>0?n.jsx("div",{className:"space-y-1 text-gray-700",children:Q.map(({Icon:ge,value:re,key:Ee})=>{const Qe=xt.createElement(ge,{className:"text-gray-500 flex-shrink-0"});return n.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[Qe,n.jsx("span",{children:re})]},Ee)})}):n.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{Tt(I),rt(I.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[n.jsx(tn,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:I.department||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{Tt(I),rt(I.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(nn,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:I.assigned_contact?`${I.assigned_contact.first_name} ${I.assigned_contact.last_name}`:"Unassigned"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{Tt(I),rt(I.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[n.jsx(Pt,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"text-xs",children:mo(I.created_at)||"--"})]})})]},I.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No contacts found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:Ke.length,pageSize:te,currentPage:le,onPrev:Ce,onNext:fe,onPageSizeChange:I=>{ae(I),_e(1)},pageSizeOptions:[10,20,30,40,50],label:"contacts"})]}),O=x?n.jsx("div",{id:"modalBackdrop",onClick:K,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:I=>I.stopPropagation(),children:[n.jsx("button",{onClick:()=>{H(),mt(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:j||E,children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:N?"Edit Contact":"Add New Contact"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:nt,noValidate:!0,children:[n.jsx(Uc,{label:"First Name",name:"first_name",value:M.first_name,onChange:we,placeholder:"First name",required:!0,isSubmitted:Ze}),n.jsx(Uc,{label:"Last Name",name:"last_name",value:M.last_name,onChange:we,placeholder:"Last name",required:!0,isSubmitted:Ze}),n.jsx(N8,{label:"Account",value:M.account_id,onChange:I=>F(Q=>({...Q,account_id:I})),items:N?ue:l||[],getLabel:I=>I?.name??"",placeholder:"Search account...",disabled:j||(N?ue.length===0:l.length===0),required:!0,isSubmitted:Ze}),n.jsx(N8,{label:"Assigned To",value:M.assigned_to,onChange:I=>F(Q=>({...Q,assigned_to:I})),items:u||[],getLabel:I=>`${I?.first_name??""} ${I?.last_name??""} (${I?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:Ze,disabled:j||u.length===0}),n.jsx(Uc,{label:"Title",name:"title",value:M.title,onChange:we,placeholder:"Job title",disabled:j}),n.jsx(Uc,{label:"Department",name:"department",value:M.department,onChange:we,placeholder:"Department",disabled:j}),n.jsx(Uc,{label:"Email",name:"email",type:"email",value:M.email,onChange:we,placeholder:"example@email.com",required:!0,isSubmitted:Ze}),n.jsx(Uc,{label:"Work Phone",name:"work_phone",value:M.work_phone,onChange:we,placeholder:"09xx xxx xxxx",disabled:j}),n.jsx(Uc,{label:"Mobile Phone 1",name:"mobile_phone_1",value:M.mobile_phone_1,onChange:we,placeholder:"09xx xxx xxxx",disabled:j}),n.jsx(Uc,{label:"Mobile Phone 2",name:"mobile_phone_2",value:M.mobile_phone_2,onChange:we,placeholder:"09xx xxx xxxx",disabled:j}),n.jsx(a7e,{label:"Notes",name:"notes",value:M.notes,onChange:we,placeholder:"Additional details...",rows:3,disabled:j,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{H(),mt(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:j||E,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:j||E,children:j?"Saving...":N?"Update Contact":"Save Contact"})]})]})]})}):null,z=S?n.jsx(s7e,{open:!0,title:S.title,message:S.message,confirmLabel:S.confirmLabel,cancelLabel:S.cancelLabel,variant:S.variant,onConfirm:Nt,onCancel:wt,loading:E}):null;return n.jsxs(n.Fragment,{children:[ee,be,O,z]})}function Uc({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:u=""}){const d=c&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${u}
        `})]})}function N8({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:u=!1}){const d=u&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(n7e,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:d})]})}function n7e({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,u]=h.useState(!1),[d,f]=h.useState(""),p=h.useRef(null),x=e.find(v=>String(v.id)===String(t)),y=x?s(x):"",N=h.useMemo(()=>{const v=d.trim().toLowerCase();return(v?e.filter(w=>(s(w)||"").toLowerCase().includes(v)):e).slice(0,o)},[e,d,s,o]);return h.useEffect(()=>{const v=j=>{p.current&&!p.current.contains(j.target)&&u(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?d:y,placeholder:r,onFocus:()=>!i&&u(!0),onChange:v=>{f(v.target.value),c||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:N.length>0?N.map(v=>{const j=String(v.id),w=s(v),S=String(t)===j;return n.jsx("button",{type:"button",onClick:()=>{a(j),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},j)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function a7e({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function s7e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":i==="archive"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}const VA=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function yJ({lead:e,onBack:t,fetchLeads:a,onEdit:s,onArchive:r,setSelectedLead:i,relatedActs:o}){const l=jt(),{leadID:c}=Ho(),{user:u}=qt(),[d,f]=h.useState(e||null),[p,x]=h.useState("Overview"),[y,N]=h.useState(""),v=d?.status?.toUpperCase()==="QUALIFIED",[j,w]=h.useState(null),S=d&&u&&d.creator?.id===u.id,[_,E]=h.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[T,A]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[L,M]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),F=async()=>{try{if(e){f(e),N(e.status||"New");return}if(!c)return;const U=await se.get(`/leads/get/${c}`);f(U.data),N(U.data.status||"New"),E({name:U.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:U.data.territory?.id||null,assigned_to:U.data.assigned_to?.id||null,created_by:U.data.creator?.id||null}),A({last_name:U.data.last_name||"",first_name:U.data.first_name||"",account_id:null,title:U.data.title||"",department:U.data.department||"",email:U.data.email||"",work_phone:U.data.work_phone||"",mobile_phone_1:U.data.mobile_phone_1||"",mobile_phone_2:U.data.mobile_phone_2||"",notes:"",assigned_to:U.data.assigned_to?.id||null,created_by:U.data.creator?.id||null}),M({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:U.data.assigned_to?.id||null,created_by:U.data.creator?.id||null})}catch(U){console.error(U)}};h.useEffect(()=>{e?(f(e),N(e.status||"New")):c&&F()},[c,e]);const $=async()=>{try{if(y==="Converted"&&d?.status?.toUpperCase()!=="QUALIFIED"){W.error("Lead must be Qualified before it can be converted.");return}const U=await se.put(`/leads/${d.id}/update/status`,{status:y});W.success("Lead status updated successfully");const V={...d,status:U.data.status};f(V),i&&i(V),a&&a(),t&&t()}catch(U){console.error(U),W.error("Failed to update lead status")}},D=async U=>{const V={..._,assigned_to:U.assigned_to?.id,billing_address:U.address,shipping_address:U.address,created_by:U.creator?.id,industry:null,name:U.company_name,phone_number:U.work_phone,status:"Prospect",territory_id:U.territory?.id,website:""};console.log("Account data: ",V),console.log("Contact data: ",T),console.log("Deal data: ",L),console.log("Lead data: ",U);try{const Y=(await se.post("/accounts/convertedLead",V)).data.id,le={...T,account_id:Y,assigned_to:U.assigned_to?.id,created_by:U.creator?.id,department:U.department,email:U.email,first_name:U.first_name,last_name:U.last_name,mobile_phone_1:U.mobile_phone_1,mobile_phone_2:U.mobile_phone_2,notes:U.notes,title:U.title,work_phone:U.work_phone},te=(await se.post("/contacts/convertedLead",le)).data.id,ae=()=>{switch(L.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},ye=L.amount&&L.amount!==""?parseFloat(L.amount):0,Ne={...L,account_id:Y,assigned_to:U.assigned_to?.id,created_by:U.creator?.id,primary_contact_id:te,probability:ae(),stage:"Prospecting"},he=await se.post("/deals/convertedLead",Ne),ve=await se.put(`/leads/convert/${U.id}`);i&&i(null),a(),W.success("Lead converted successfully!"),t()}catch(Z){console.error("Error during conversion:",Z);const Y=Z.response?.data?.detail||Z.message||"Failed to convert lead. Please try again.";W.error(Y)}},q=U=>{switch((U||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},G=U=>U.toString().toLowerCase().replace(/\b\w/g,V=>V.toUpperCase());return d?n.jsx(n.Fragment,{children:n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),n.jsx("button",{onClick:()=>{t?t():l(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Xn,{size:25})})]})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[d.first_name," ",d.last_name]}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${q(d.status)}`,children:G(d.status||"New")}),n.jsx("div",{className:"flex flex-col",children:n.jsx("button",{onClick:()=>D(d),disabled:!v,title:v?"Convert Lead":"Lead must be Qualified before converting",className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2
      ${v?"bg-green-600 hover:bg-green-700 text-white focus:ring-green-400":"bg-gray-200 text-gray-400 cursor-not-allowed"}
    `,children:"Convert"})})]}),S&&n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",onClick:()=>{s&&d&&s(d)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(ha,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",onClick:()=>{r&&d&&r(d)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",children:[n.jsx(Zt,{className:"mr-2"}),"Archive"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-4 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(U=>n.jsx("button",{onClick:()=>x(U),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${p===U?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:U},U))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[p==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Name:"}),n.jsxs("p",{children:[d.first_name," ",d.last_name||"N/A"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:d.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Job Title:"}),n.jsx("p",{children:d.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:d.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:d.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:d.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:d.assigned_to?`${d.assigned_to.first_name} ${d.assigned_to.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:d.creator?`${d.creator.first_name} ${d.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:d.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Source:"}),n.jsx("p",{children:d.source||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Address:"}),n.jsx("p",{children:d.address||"N/A"})]})]})}),p==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]})]}),p==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[o.tasks&&o.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>w(j==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",o.tasks.length,")"]})]}),j==="tasks"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),j==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.tasks.map((U,V)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/manager/tasks",{state:{taskID:U.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:U.subject||U.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:U.description||"No description"}),U.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned:"," ",U.assigned_to.first_name," ",U.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:VA(U.due_date||U.created_at)})]},`task-${V}`))})]}),o.meetings&&o.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>w(j==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Pt,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",o.meetings.length,")"]})]}),j==="meetings"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),j==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.meetings.map((U,V)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/manager/meetings",{state:{meetingID:U.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Pt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:U.subject||U.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:U.description||U.location||"No description"}),U.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",U.host.first_name," ",U.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:VA(U.start_time||U.created_at)})]},`meeting-${V}`))})]}),o.calls&&o.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>w(j==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ot,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",o.calls.length,")"]})]}),j==="calls"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),j==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.calls.map((U,V)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/manager/calls",{state:{callID:U.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Ot,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:U.subject||U.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:U.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:VA(U.call_time||U.created_at)})]},`call-${V}`))})]}),(!o||(!o.tasks||o.tasks.length===0)&&(!o.meetings||o.meetings.length===0)&&(!o.calls||o.calls.length===0)&&(!o.quotes||o.quotes.length===0)&&(!o.deals||o.deals.length===0)&&(!o.contacts||o.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{d&&l("/manager/calls",{state:{openCallModal:!0,initialCallData:{subject:d.title?`Call regarding ${d.title}`:`Call with ${d.first_name} ${d.last_name}`,relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assigned_to:d.assigned_to?.id?String(d.assigned_to.id):"",direction:"Outgoing",status:"Planned"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Ot,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const U=encodeURIComponent(d.email),V=encodeURIComponent(""),Z=encodeURIComponent(""),Y=`mailto:${U}?subject=${V}&body=${Z}`;window.location.href=Y},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(sa,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{d&&l("/manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:d.title?`Meeting regarding ${d.title}`:`Meeting with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",status:"Planned"}}})},children:[n.jsx(Pt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{d&&l("/manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:d.title?`Follow up on ${d.title}`:`Follow up with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:y,onChange:U=>N(U.target.value),children:[n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),d?.status?.toUpperCase()==="QUALIFIED"&&n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]}),n.jsx("button",{onClick:$,disabled:y===d.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${y===d.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const r7e=eh.all(),YA=r7e.map((e,t)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${t}`})),i7e=e=>e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()),o7e=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},QA={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function l7e(){const e=jt(),{leadID:t}=Ho(),{user:a}=qt();Us();const[s,r]=h.useState(null),[i,o]=h.useState(!1),[l,c]=h.useState(null),[u,d]=h.useState(null),[f,p]=h.useState([]),[x,y]=h.useState(!1),[N,v]=h.useState(""),[j,w]=h.useState("Filter by Status"),[S,_]=h.useState(1),[E,T]=h.useState(10),[A,L]=h.useState(QA),[M,F]=h.useState(!1),[$,D]=h.useState(null),[q,G]=h.useState(!1),[U,V]=h.useState(null),[Z,Y]=h.useState(!1),[le,_e]=h.useState({}),[te,ae]=h.useState(new Set),[ye,Ne]=h.useState(!1),[he,ve]=h.useState(null);h.useRef(null);const[ne,Se]=h.useState(!1),[de,ke]=h.useState(null),[Te,pe]=h.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[ze,Pe]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[We,tt]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});h.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const lt=async()=>{try{const ee=await se.get("/leads/getUsers");c(ee.data)}catch(ee){console.error(`Error fetching users: ${ee}`)}},Ie=async()=>{y(!0);try{const ee=await se.get("/leads/admin/getLeads");p(ee.data),console.log(ee.data)}catch(ee){console.error(`Error fetching leads: ${ee}`)}finally{y(!1)}};h.useEffect(()=>{lt(),Ie()},[]),h.useEffect(()=>{if(t&&f.length>0&&!i&&!M){const ee=f.find(O=>O.id===Number(t));ee&&r(ee)}else!t&&!s&&r(null)},[t,f,i,M]),h.useEffect(()=>{if(de){const O=(Q=>{if(!Q)return{code:"+63",number:""};const ge=Q.match(/^(\+\d+)\s(.+)$/);if(ge)return{code:ge[1],number:ge[2]};if(Q.startsWith("+")){const re=Q.match(/^(\+\d{1,3})/);if(re)return{code:re[1],number:Q.substring(re[1].length).trim()}}return{code:"+63",number:Q}})(de.work_phone),z=[];de.work_phone&&z.push(`Work: ${de.work_phone}`),de.mobile_phone_1&&z.push(`Mobile 1: ${de.mobile_phone_1}`),de.mobile_phone_2&&z.push(`Mobile 2: ${de.mobile_phone_2}`);const I=z.length>0?z.join(" | "):"";pe({name:de.company_name||"",website:"",countryCode:O.code,phone_number:O.number,combinedPhoneNumbers:I,billing_address:de.address||"",shipping_address:de.address||"",industry:"",status:"Prospect",territory_id:de.assigned_to?.territory?.id||null,assigned_to:de.assigned_to?.id||null,created_by:de.creator?.id||null}),Pe({last_name:de.last_name||"",first_name:de.first_name||"",account_id:null,title:de.title||"",department:de.department||"",email:de.email||"",work_phone:de.work_phone||"",mobile_phone_1:de.mobile_phone_1||"",mobile_phone_2:de.mobile_phone_2||"",notes:de.notes||"",assigned_to:de.assigned_to?.id||null,created_by:de.creator?.id||null}),tt({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:de.assigned_to?.id||null,created_by:de.creator?.id||null})}},[de]);const rt=ee=>v(ee.target.value),He=h.useMemo(()=>{const ee=N.trim().toLowerCase(),O=j.trim().toUpperCase();let z=f.filter(I=>{const Q=I?.status!=="Inactive",ge=[I?.first_name,I?.last_name,I?.company_name,I?.title,I?.email,I?.work_phone,I?.assigned_to?`${I.assigned_to.first_name} ${I.assigned_to.last_name}`:""],re=ee===""||ge.some(Qe=>Qe==null||Qe===""?!1:Qe.toString().toLowerCase().includes(ee));let Ee=!1;return O==="FILTER BY STATUS"?Ee=(I.status?I.status.toUpperCase():"")!=="CONVERTED":Ee=(I.status?I.status.toUpperCase():"")===O,re&&Ee&&Q});return z.sort((I,Q)=>{const ge=new Date(I.created_at).getTime();return new Date(Q.created_at).getTime()-ge}),z},[f,N,j]),Ke=Math.max(1,Math.ceil(He.length/E)||1);h.useEffect(()=>{_(1)},[N,j]),h.useEffect(()=>{_(ee=>{const O=Math.max(1,Math.ceil(He.length/E)||1);return ee>O?O:ee})},[He.length]);const Je=h.useMemo(()=>{const ee=(S-1)*E;return He.slice(ee,ee+E)},[He,S]),Oe=()=>_(ee=>Math.max(ee-1,1)),Ce=()=>_(ee=>Math.min(ee+1,Ke)),fe=h.useCallback(async ee=>{try{const O=await se.get(`/activities/lead/${ee}`);_e(O.data&&typeof O.data=="object"?O.data:{})}catch(O){console.error(O),O.response?.status===404&&(console.warn("No activities found for this account."),_e({}))}},[]),ue=ee=>{r(ee),fe(ee.id)},H=()=>{r(null),t&&e("/admin/leads",{replace:!0})},K=()=>{o(!1),L(QA),F(!1),D(null),G(!1),d(null),sessionStorage.removeItem("editLeadData")},we=ee=>{ee.target.id==="modalBackdrop"&&K()},Me=()=>{L(QA),F(!1),D(null),d(null),o(!0)},ce=ee=>{if(!ee){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",ee),console.log("Current state - leadID:",t,"selectedLead:",s,"showModal:",i);const O=re=>{if(!re)return{code:"+63",number:""};const Ee=re.match(/^(\+\d+)\s(.+)$/);return Ee?{code:Ee[1],number:Ee[2]}:{code:"+63",number:re}},z=O(ee.work_phone),I=O(ee.mobile_phone_1),Q=O(ee.mobile_phone_2);let ge="";if(ee.assigned_to){ge=String(ee.assigned_to.id);const re=l?.find(Ee=>Ee.id===ee.assigned_to.id);d(re)}L({first_name:ee.first_name||"",last_name:ee.last_name||"",company_name:ee.company_name||"",title:ee.title||"",department:ee.department||"",email:ee.email||"",work_ccode:z.code,work_phone:z.number,m1_ccode:I.code,mobile_phone_1:I.number,m2_ccode:Q.code,mobile_phone_2:Q.number,address:ee.address||"",notes:ee.notes||"",source:ee.source||"",territory_id:ee.territory?.id||null,lead_owner:ge,status:ee.status||"New"}),F(!0),D(ee.id),s?(console.log("Coming from detail view - closing detail modal and showing edit form"),r(null),o(!0)):(console.log("Already in list view - showing modal"),o(!0))},oe=ee=>{if(!ee){console.error("handleArchive: lead is null or undefined");return}const O=`${ee.first_name} ${ee.last_name}`||"this lead";V({title:"Archive Lead",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:O}),"? You can restore it later if needed."]}),confirmLabel:"Archive Lead",cancelLabel:"Cancel",variant:"archive",action:{type:"archive",targetId:ee.id,name:O}})},De=ee=>{const O=Je.find(z=>z.id===ee);O&&O.creator?.id===a?.id&&ae(z=>{const I=new Set(z);return I.has(ee)?I.delete(ee):I.add(ee),I})},$e=()=>{const ee=Je.filter(O=>O.creator?.id===a?.id);te.size===ee.length&&ee.length>0?ae(new Set):ae(new Set(ee.map(O=>O.id)))},Xe=()=>{if(te.size===0)return;const ee=te.size;V({title:"Archive Leads",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:ee})," lead",ee!==1?"s":"","? You can restore them later if needed."]}),confirmLabel:`Archive ${ee} Lead${ee!==1?"s":""}`,cancelLabel:"Cancel",variant:"archive",action:{type:"bulk-archive",targetIds:Array.from(te),count:ee}})},Ze=ee=>{const{name:O,value:z}=ee.target;if(L(I=>({...I,[O]:z})),O==="lead_owner"){const I=l.find(Q=>Q.id===parseInt(z));d(I)}},[mt,nt]=h.useState(!1),Nt=ee=>{if(ee.preventDefault(),nt(!0),!A.last_name?.trim()){W.error("Last name is required.");return}if(!A.company_name?.trim()){W.error("Company is required.");return}if(!A.email?.trim()){W.error("Email is required.");return}if(!A.email.includes("@")){W.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(A.email)){W.error("Please enter a valid email address with a dot in the domain.");return}if(!A.lead_owner){W.error("Please assign a lead owner.");return}const z={...A,territory_id:A.territory_id?parseInt(A.territory_id):null,lead_owner:parseInt(A.lead_owner),work_phone:`${A.work_ccode} ${A.work_phone}`,mobile_phone_1:`${A.m1_ccode} ${A.mobile_phone_1}`,mobile_phone_2:`${A.m2_ccode} ${A.mobile_phone_2}`},I=M&&$?"update":"create",Q=`${A.first_name} ${A.last_name}`;V({title:I==="create"?"Confirm New Lead":"Confirm Update",message:I==="create"?n.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",n.jsx("span",{className:"font-semibold",children:Q}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:Q}),"?"]}),confirmLabel:I==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:I,payload:z,targetId:$||null,name:Q}})},wt=async()=>{if(!U?.action){V(null);return}const{action:ee}=U,{type:O,payload:z,targetId:I,name:Q,targetIds:ge,count:re}=ee;console.log(z),Y(!0);try{if(O==="create")G(!0),await se.post("/leads/create",z),W.success(`Lead "${Q}" created successfully.`),K(),await Ie();else if(O==="update"){if(!I)throw new Error("Missing lead identifier for update.");G(!0);const Ee=await se.put(`/leads/${I}`,z);W.success(`Lead "${Q}" updated successfully.`),s&&s.id===I&&r(null),K(),await Ie()}else if(O==="archive"){if(!I)throw new Error("Missing lead identifier for archiving.");const Ee=s?.id;ve(I),await se.put(`/leads/${I}`,{status:"Inactive"}),W.success(`Lead "${Q}" archived successfully.`),await Ie(),Ee===I&&r(null)}else if(O==="bulk-archive"){if(!ge||ge.length===0)throw new Error("Missing lead identifiers for bulk archiving.");Ne(!0),await Promise.all(ge.map(Ee=>se.put(`/leads/${Ee}`,{status:"Inactive"}))),W.success(`${re} lead${re!==1?"s":""} archived successfully.`),ae(new Set),await Ie(),r(null)}}catch(Ee){console.error(Ee);const Qe=O==="create"?"Failed to create lead. Please review the details and try again.":O==="update"?"Failed to update lead. Please review the details and try again.":O==="bulk-archive"?"Failed to archive leads. Please try again.":"Failed to archive lead. Please try again.",gt=Ee.response?.data?.detail||Qe;W.error(gt)}finally{(O==="create"||O==="update")&&G(!1),O==="archive"&&ve(null),O==="bulk-archive"&&Ne(!1),O!=="edit"&&(Y(!1),V(null))}},Tt=()=>{Z||V(null)},Re=f.filter(ee=>ee.status==="New").length,me=f.filter(ee=>ee.status==="Contacted").length,ie=f.filter(ee=>ee.status==="Qualified").length,Fe=f.filter(ee=>ee.status==="Converted").length,Le=f.filter(ee=>ee.status==="Lost").length,be=[{title:"New",value:Re,icon:Kn,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:me,icon:Ot,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:ie,icon:aa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:Fe,icon:Xl,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:Le,icon:Fs,color:"text-red-600",bgColor:"bg-red-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[x&&n.jsx(Wt,{message:"Loading leads..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Kn,{className:"mr-2 text-blue-600"}),"Leads"]}),n.jsx("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{Me(),nt(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(xn,{className:"mr-2"})," Add Lead"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:be.map(ee=>n.jsx(d7e,{...ee},ee.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Vt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search leads",value:N,onChange:rt,className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:j,onChange:ee=>w(ee.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:te.size>0&&te.size===Je.filter(ee=>ee.creator?.id===a?.id).length&&Je.filter(ee=>ee.creator?.id===a?.id).length>0,onChange:$e,className:"w-4 h-4 cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Name"}),n.jsx("th",{className:"py-3 px-4",children:"Company"}),n.jsx("th",{className:"py-3 px-4",children:"Job Title"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 w-12",children:te.size>0&&n.jsx("button",{onClick:Xe,className:"text-orange-500 hover:text-orange-700 transition",title:"Archive selected leads",disabled:ye,children:n.jsx(Zt,{size:18})})})]})}),n.jsx("tbody",{children:He.length>0?Je.map(ee=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",children:[n.jsx("td",{className:"py-3 px-4",children:a?.id===ee.creator?.id&&n.jsx("input",{type:"checkbox",checked:te.has(ee.id),onChange:O=>{O.stopPropagation(),De(ee.id)},className:"w-4 h-4 cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>ue(ee),children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[ee.first_name," ",ee.last_name]})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>ue(ee),children:n.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:ee.company_name||"--"})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",onClick:()=>ue(ee),children:ee.title||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",onClick:()=>ue(ee),children:ee.email||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",onClick:()=>ue(ee),children:ee.assigned_to?`${ee.assigned_to.first_name} ${ee.assigned_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",onClick:()=>ue(ee),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${o7e(ee.status||"New")}`,children:i7e(ee.status||"New")})}),n.jsx("td",{className:"py-3 px-4"})]},ee.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No leads found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:He.length,pageSize:E,currentPage:S,onPrev:Oe,onNext:Ce,onPageSizeChange:ee=>{T(ee),_(1)},pageSizeOptions:[10,20,30,40,50],label:"leads"}),i&&n.jsx("div",{id:"modalBackdrop",onClick:we,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:ee=>ee.stopPropagation(),children:[n.jsx("button",{onClick:()=>{K(),nt(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:M?"Edit Lead":"Add New Lead"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),n.jsx("input",{type:"text",name:"first_name",value:A.first_name,onChange:Ze,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"Smith",name:"last_name",value:A.last_name,onChange:Ze,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                      ${mt&&!A.last_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Company ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:A.company_name,onChange:Ze,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${mt&&!A.company_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Job Title",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:A.title,onChange:Ze,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${mt&&!A.title?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),n.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:A.department,onChange:Ze,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Email",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:A.email,onChange:Ze,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${mt&&!A.email?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col col-span-1 md:col-span-2 lg:col-span-1",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"work_ccode",value:A.work_ccode,onChange:Ze,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:YA.map(ee=>n.jsx("option",{value:ee.code,children:ee.code},ee.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:A.work_phone,onChange:Ze,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m1_ccode",value:A.m1_ccode,onChange:Ze,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:YA.map(ee=>n.jsx("option",{value:ee.code,children:ee.code},ee.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:A.mobile_phone_1,onChange:Ze,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m2_ccode",value:A.m2_ccode,onChange:Ze,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:YA.map(ee=>n.jsx("option",{value:ee.code,children:ee.code},ee.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:A.mobile_phone_2,onChange:Ze,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),n.jsx("input",{type:"text",name:"address",value:A.address,onChange:Ze,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col col-span-1 md:col-span-2 lg:col-span-1",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:`w-full rounded-lg ${mt&&!A.lead_owner?"border border-red-400":"border border-gray-300"}`,children:n.jsx(u7e,{items:Array.isArray(l)?l:[],value:A.lead_owner??"",placeholder:"Search a user...",getLabel:ee=>`${ee.first_name} ${ee.last_name}`,onChange:ee=>{const O=l.find(I=>String(I.id)===String(ee));d(O);let z=null;O&&O.assigned_territory&&O.assigned_territory.length===1&&(z=O.assigned_territory[0].id),L(I=>({...I,lead_owner:ee,territory_id:z}))}})})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),n.jsxs("select",{name:"territory_id",value:A.territory_id||"",onChange:Ze,disabled:!u||!u.assigned_territory||u.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[n.jsx("option",{value:"",disabled:!0,children:u?u.assigned_territory&&u.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),u&&u.assigned_territory&&u.assigned_territory.map(ee=>n.jsx("option",{value:ee.id,children:ee.name},ee.id))]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),n.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:A.source,onChange:Ze,children:[n.jsx("option",{value:"",disabled:!0,children:"Select Source"}),n.jsx("option",{value:"Website",children:"Website"}),n.jsx("option",{value:"Referral",children:"Referral"}),n.jsx("option",{value:"Cold call",children:"Cold call"}),n.jsx("option",{value:"Event",children:"Event"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),n.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:A.notes,onChange:Ze,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("button",{type:"button",onClick:()=>{K(),nt(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:q||Z,children:"Cancel"}),n.jsx("button",{type:"submit",onClick:Nt,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:q||Z,children:q||Z?"Processing...":M?"Update Lead":"Save Lead"})]})]})]})}),U&&n.jsx(c7e,{open:!0,title:U.title,message:U.message,confirmLabel:U.confirmLabel,cancelLabel:U.cancelLabel,variant:U.variant,onConfirm:wt,onCancel:Tt,loading:Z}),s&&!i&&!M&&n.jsx(yJ,{relatedActs:le,lead:s,onBack:H,fetchLeads:Ie,setSelectedLead:r,onEdit:ce,onArchive:oe})]})}function c7e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":i==="archive"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function d7e({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function u7e({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=h.useState(!1),[u,d]=h.useState(""),f=h.useRef(null),p=e.find(N=>String(N.id)===String(t)),x=p?s(p):"",y=h.useMemo(()=>{const N=u.trim().toLowerCase();return(N?e.filter(j=>(s(j)||"").toLowerCase().includes(N)):e).slice(0,o)},[e,u,s,o]);return h.useEffect(()=>{const N=v=>{f.current&&!f.current.contains(v.target)&&c(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),h.useEffect(()=>{l||d("")},[l]),n.jsxs("div",{ref:f,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:l?u:x,placeholder:r,onFocus:()=>!i&&c(!0),onChange:N=>{d(N.target.value),l||c(!0)},className:"w-full rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:y.length>0?y.map(N=>{const v=String(N.id),j=s(N),w=String(t)===v;return n.jsx("button",{type:"button",onClick:()=>{a(v),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${w?"bg-blue-50":""}`,children:j||"--"},v)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const jb={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},Ja=({label:e,value:t,name:a,className:s=""})=>n.jsxs("div",{className:`flex flex-col ${s}`,children:[n.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),n.jsx("input",{type:"text",name:a,defaultValue:t,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),m7e=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(Ja,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),n.jsx(Ja,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),n.jsx(Ja,{label:"Industry",name:"industry",value:e.industry})]}),n.jsx(Ja,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),n.jsx(Ja,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),f7e=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Ja,{label:"First Name",name:"firstName",value:e.firstName}),n.jsx(Ja,{label:"Last Name",name:"lastName",value:e.lastName}),n.jsx(Ja,{label:"Department",name:"department",value:e.department}),n.jsx(Ja,{label:"Title",name:"title",value:e.title}),n.jsx(Ja,{label:"Work Phone",name:"workPhone",value:e.workPhone}),n.jsx(Ja,{label:"Email",name:"email",value:e.email}),n.jsx(Ja,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),n.jsx(Ja,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),h7e=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Ja,{label:"Deal Name",name:"dealName",value:e.dealName}),n.jsxs("div",{className:"flex",children:[n.jsx(Ja,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),n.jsx("div",{className:"flex flex-col justify-end ml-1",children:n.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),n.jsx(Ja,{label:"Stage",name:"stage",value:e.stage}),n.jsx(Ja,{label:"Territory",name:"territory",value:e.territory})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Ja,{label:"Description",name:"description",value:e.description}),n.jsx(Ja,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function g7e({isOpen:e,onClose:t}){const[a,s]=h.useState(1),r=3;if(!e)return null;const i=()=>{a<r?s(a+1):(t(),s(1))},o=()=>{a>1&&s(a-1)},l=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],c=()=>{switch(a){case 1:return n.jsx(m7e,{data:jb});case 2:return n.jsx(f7e,{data:jb});case 3:return n.jsx(h7e,{data:jb});default:return null}};return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:jb.accountName})]}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:n.jsx(wj,{className:"w-6 h-6"})})]}),n.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:l.map(u=>n.jsx("button",{onClick:()=>s(u.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${a===u.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:u.name},u.id))}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c()}),n.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[a>1&&n.jsx("button",{onClick:o,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),a<r?n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}function bJ({selectedDeal:e,onStatusUpdate:t,onClose:a}){const[s,r]=h.useState(e?.stage||""),[i,o]=h.useState(!1),l=jt(),{user:c}=qt();h.useEffect(()=>{console.log("ManagerDealsInformation mounted sahdksd",e),console.log("User sadad:",c)},[e,c]);const u=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"}];h.useEffect(()=>{e?.stage&&r(e.stage)},[e]);const d=async()=>{if(!e||!e.id){W.error("No deal selected");return}if(!s||s===e.stage){W.info("Please select a different stage");return}const f=e.id;o(!0);try{await se.put(`/deals/admin/${f}`,{stage:s}),a&&a(),t&&setTimeout(async()=>{await t(!0)},100),setTimeout(()=>{W.success("Deal status updated successfully")},300)}catch(p){console.error(p);const x=p.response?.data?.detail||"Failed to update deal status";W.error(x)}finally{o(!1)}};return e?n.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{const f=e.account?.id||e.account_id;l("/manager/calls",{state:{openCallModal:!0,initialCallData:{subject:e.name?`Call regarding: ${e.name}`:"",relatedType1:"Account",relatedTo1:f,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assigned_to:e.assigned_deals?.id?String(e.assigned_deals.id):"",assignedTo:e.assigned_to?.id?String(e.assigned_to.id):""}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Ot,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const f=encodeURIComponent(e.contact.email),p=encodeURIComponent(""),x=encodeURIComponent(""),y=`mailto:${f}?subject=${p}&body=${x}`;window.location.href=y},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(sa,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{const f=e.account?.id||e.account_id;l("/manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:e.name?`Meeting: ${e.name}`:"",relatedType1:"Account",relatedTo1:f,relatedType2:"Deal",relatedTo2:e.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):""}}})},children:[n.jsx(Pt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{const f=e.account?.id||e.account_id;l("/manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:e.name?`Task for: ${e.name}`:"",relatedType1:"Account",relatedTo1:f,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:s,onChange:f=>r(f.target.value),disabled:i||e.created_by!==c?.id&&e.assigned_to!==c?.id,children:u.map(f=>n.jsx("option",{value:f.value,children:f.label},f.value))}),(e.created_by===c?.id||e.assigned_to===c?.id)&&n.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:d,disabled:i||!s||s===e.stage,children:i?"Updating...":"Update"})]})]}):null}function vJ({selectedDeal:e,show:t,onClose:a,activeTab:s,setActiveTab:r,onEdit:i,onDelete:o,onStatusUpdate:l}){const c=jt(),[u]=Us(),d=u.get("id"),[f,p]=h.useState(e||null),[x,y]=h.useState(s||"Overview"),{user:N}=qt(),{comments:v,addComment:j,refresh:w}=ka({relatedType:"deal",relatedId:f?.id});h.useEffect(()=>{f?.id&&w()},[f?.id,w]);const S=s!==void 0?s:x;if(h.useEffect(()=>{(async()=>{if(d&&!e)try{const M=((await se.get("/deals/admin/fetch-all")).data||[]).find(F=>F.id===parseInt(d));if(M){const F={...M,amount:typeof M.amount=="number"?M.amount:parseFloat(M.amount||0),probability:M.probability||0};p(F)}else console.warn("Deal not found with ID:",d)}catch(A){console.error("Error fetching deal:",A)}})()},[d,e]),!f&&!d||d&&!f)return null;const _=T=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[T]||"bg-gray-100 text-gray-700";function E(T){return T?new Date(T).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),n.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:n.jsx("button",{onClick:()=>{a?a():c(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Xt,{size:25})})})]})}),n.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:n.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[n.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:f.name}),n.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${_(f.stage)}`,children:f.stage})]}),n.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",E(f.created_at)]})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2",children:[n.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[" ",f.amount?f.amount.toLocaleString():"0"]}),n.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${f.probability}%`}})}),n.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",f.probability,"% Complete "]}),f.deal_creator?.id===N?.id&&n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[n.jsxs("button",{type:"button",onClick:()=>{i&&i(f)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(ha,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),n.jsxs("button",{type:"button",onClick:()=>{o&&o(f)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",children:[n.jsx(Zt,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Archive"})]})]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(T=>n.jsx("button",{onClick:()=>{r?r(T):y(T)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${S===T?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:T},T))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[S==="Overview"&&n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Description:"})," ",f.description]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Expected Close Date:"})," ",f.close_date]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("div",{className:"mt-4 py-3 w-full",children:[n.jsxs("div",{className:"relative flex flex-col w-full",children:[n.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const T=(f?.stage||"PROSPECTING").toUpperCase(),L=(F=>F==="PROSPECTING"?0:F==="QUALIFICATION"?1:F==="PROPOSAL"?2:F==="NEGOTIATION"?3:F==="CLOSED_WON"||F==="CLOSED_LOST"?4:-1)(T);return[0,1,2,3,4].map(F=>L===F?"orange":L>F?"green":"gray").map((F,$)=>n.jsxs(xt.Fragment,{children:[n.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${F==="green"?"bg-green-500 border-green-500":F==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),$<4&&n.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},$))})()}),n.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((T,A)=>n.jsx("span",{className:"text-center flex-1 break-words",children:T},A))})]}),n.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:f.stage})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),n.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Account:"})," ",f.account?.name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Primary Contact:"})," ",f.contact?.first_name," ",f.contact?.last_name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Phone:"})," ",f.contact?.work_phone]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",f.contact?.email]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Assigned To:"})," ",f.assigned_deals?.first_name," ",f.assigned_deals?.last_name]})]})]})]}),S==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:f.description||"No notes available."})]}),n.jsx(Ta,{comments:v,onAddComment:j})]}),S==="Activities"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:Ot,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:Pt,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((T,A)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[n.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-gray-600 mt-1",children:n.jsx(T.icon,{size:24})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-gray-900 break-words",children:T.title}),n.jsx("p",{className:"text-sm text-gray-500 break-words",children:T.desc}),n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),n.jsx("p",{className:"text-sm text-gray-700 break-words",children:T.user})]})]})]}),n.jsx("p",{className:"text-sm text-gray-500 break-words",children:T.date})]},A))]}),S==="Edit"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),n.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:f.name})]}),n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),n.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:f.description})]}),n.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),n.jsx("div",{className:"w-full lg:w-auto",children:n.jsx(bJ,{selectedDeal:f,onStatusUpdate:l,onClose:a})})]})]})]})})}function p7e(){h.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const e=jt(),t=Jt(),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Stage"),[o,l]=h.useState("Filter by Owner"),[c,u]=h.useState(null),[d,f]=h.useState("Overview"),[p,x]=h.useState(!1),[y,N]=h.useState(null),[v,j]=h.useState(!1),[w,S]=h.useState(1),[_,E]=h.useState(10),[T,A]=h.useState(!1),[L,M]=h.useState(null),[F,$]=h.useState(!1),[D,q]=h.useState(!1),[G,U]=h.useState(null),[V,Z]=h.useState([]),[Y,le]=h.useState([]),[_e,te]=h.useState([]),[ae,ye]=h.useState({}),[Ne,he]=h.useState(null),[ve,ne]=h.useState(new Set),[Se,de]=h.useState(!1),{user:ke}=qt();h.useEffect(()=>{const O=t.state,z=O?.dealID;if(z&&!O?.openDealModal){he(z),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(Ne&&y?.length>0&&!v){const O=y.find(z=>z.id===Ne);O?u(O):W.error("Deal not found."),he(null)}},[Ne,y,v]);const[Te,pe]=h.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),[ze,Pe]=h.useState(null),[We,tt]=h.useState(null),lt={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST","Closed Cancelled Stage":"CLOSED_CANCELLED"},Ie=O=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost",CLOSED_CANCELLED:"Closed Cancelled"})[O]||O||"--",rt=O=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700",CLOSED_CANCELLED:"bg-red-100 text-red-700"})[O]||"bg-gray-100 text-gray-700",He=h.useCallback(async O=>{try{const z=await se.get(`/activities/deal/${O}`);ye(z.data&&typeof z.data=="object"?z.data:{})}catch(z){console.error(z),z.response?.status===404&&(console.warn("No activities found for this account."),ye({}))}},[]),Ke=h.useMemo(()=>{const O=a.trim().toLowerCase(),z=r.trim(),I=o.trim();return(y??[]).filter(Q=>{const ge=[Q?.name,Q?.description,Q?.account?.name,Q?.contact?.first_name,Q?.contact?.last_name,Q?.assigned_deals?.first_name,Q?.assigned_deals?.last_name],re=O===""||ge.some(gt=>gt==null||gt===""?!1:gt.toString().toLowerCase().includes(O)),Ee=z==="Filter by Stage"||z===""||Q.stage===lt[z]||Q.stage===z,Qe=I==="Filter by Owner"||I===""||`${Q.assigned_deals?.first_name||""} ${Q.assigned_deals?.last_name||""}`.trim().toLowerCase()===I.toLowerCase();return re&&Ee&&Qe})},[y,a,r,o]),Je=Math.max(1,Math.ceil(Ke.length/_)||1);h.useEffect(()=>{S(1)},[a,r,o]),h.useEffect(()=>{S(O=>{const z=Math.max(1,Math.ceil(Ke.length/_)||1);return O>z?z:O})},[Ke.length]);const Oe=h.useMemo(()=>{const O=(w-1)*_;return Ke.slice(O,O+_)},[Ke,w]),Ce=()=>S(O=>Math.max(O-1,1)),fe=()=>S(O=>Math.min(O+1,Je)),ue=()=>{pe({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),q(!1),U(null),x(!0)},H=async()=>{j(!0);try{const O=await se.get("/deals/admin/fetch-all"),I=[...Array.isArray(O.data)?O.data:[]].sort((Q,ge)=>{const re=Q?.created_at?new Date(Q.created_at).getTime():0;return(ge?.created_at?new Date(ge.created_at).getTime():0)-re});N(I)}catch(O){O.response&&O.response.status===403?W.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):W.error("Failed to fetch deals. Please try again later."),console.error(O)}finally{j(!1)}},K=async()=>{try{const O=await se.get("/accounts/admin/fetch-all");Z(Array.isArray(O.data)?O.data:[])}catch(O){console.error(O),O.response?.status===403&&W.warn("Unable to load accounts (permission denied).")}},we=async()=>{try{const O=await se.get("/contacts/admin/fetch-all");le(Array.isArray(O.data)?O.data:[])}catch(O){console.error(O),O.response?.status===403&&W.warn("Unable to load contacts (permission denied).")}},Me=async()=>{try{const O=await se.get("/users/all");te(Array.isArray(O.data)?O.data:[])}catch(O){console.error(O),O.response?.status===403&&W.warn("Unable to load users (permission denied).")}};h.useEffect(()=>{H(),K(),we(),Me()},[]);const ce=async O=>{O&&(pe({id:O.id||null,name:O.name||"",account_id:O.account_id?.toString()||"",primary_contact_id:O.primary_contact_id?.toString()||"",stage:O.stage||"PROPOSAL",amount:O.amount?.toString()||"",close_date:O.close_date?new Date(O.close_date).toISOString().split("T")[0]:"",assigned_to:O.assigned_to?.toString()||"",currency:O.currency||"PHP",description:O.description||""}),Pe(O.account||null),tt(O.contact||null),q(!0),U(O.id),u(null),x(!0))},oe=async(O=!1)=>{try{const z=await se.get("/deals/admin/fetch-all"),Q=[...Array.isArray(z.data)?z.data:[]].sort((ge,re)=>{const Ee=ge?.created_at?new Date(ge.created_at).getTime():0;return(re?.created_at?new Date(re.created_at).getTime():0)-Ee});if(N(Q),!O&&c&&c.id){const ge=Q.find(re=>re.id===c.id);ge&&u({...ge})}}catch(z){console.error("Failed to refresh deal data:",z),await H()}},De=O=>{const z=O.name.trim();if(!z){W.error("Deal name is required.");return}if(!O.account_id){W.error("Account is required.");return}const I=D&&G?"update":"create",Q=z;M({title:I==="create"?"Confirm New Deal":"Confirm Update",message:I==="create"?n.jsxs("span",{children:["Are you sure you want to create"," ",n.jsx("span",{className:"font-semibold",children:Q}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:Q}),"?"]}),confirmLabel:I==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:I,formData:O,targetId:G||null,name:Q}})},$e=O=>{const z=Oe?.find(I=>I.id===O);z&&z.deal_creator?.id===ke?.id&&ne(I=>{const Q=new Set(I);return Q.has(O)?Q.delete(O):Q.add(O),Q})},Xe=()=>{const O=Oe?.filter(z=>z.deal_creator?.id===ke?.id)||[];ve.size===O.length&&O.length>0?ne(new Set):ne(new Set(O.map(z=>z.id)))},Ze=()=>{if(ve.size===0)return;const O=ve.size;M({title:"Archive Deals",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:O})," deal",O!==1?"s":"","? You can restore them later if needed."]}),confirmLabel:`Archive ${O} Deal${O!==1?"s":""}`,cancelLabel:"Cancel",variant:"archive",action:{type:"bulk-archive",targetIds:Array.from(ve),count:O}})},mt=O=>{if(!O)return;const z=O.name||"this deal";M({title:"Archive Deal",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:z}),"? You can restore it later if needed."]}),confirmLabel:"Archive Deal",cancelLabel:"Cancel",variant:"archive",action:{type:"archive",targetId:O.id,name:z}})},nt=async()=>{if(!L?.action){M(null);return}const{action:O}=L,{type:z,formData:I,targetId:Q,name:ge}=O;$(!0);try{if(z==="create"){A(!0);const re={name:I.name.trim(),account_id:parseInt(I.account_id),primary_contact_id:I.primary_contact_id?parseInt(I.primary_contact_id):null,stage:I.stage,amount:I.amount?parseFloat(I.amount):null,currency:I.currency||"PHP",close_date:I.close_date||null,description:I.description||null,assigned_to:I.assigned_to?parseInt(I.assigned_to):null};await se.post("/deals/admin/create",re),W.success(`Deal "${ge}" created successfully.`),x(!1),await H()}else if(z==="update"){if(!Q)throw new Error("Missing deal identifier for update.");A(!0);const re={};I.name!==void 0&&(re.name=I.name.trim()),I.account_id!==void 0&&I.account_id!==""&&(re.account_id=parseInt(I.account_id)),I.primary_contact_id!==void 0&&(re.primary_contact_id=I.primary_contact_id?parseInt(I.primary_contact_id):null),I.stage!==void 0&&(re.stage=I.stage),I.amount!==void 0&&I.amount!==""&&(re.amount=parseFloat(I.amount)),I.currency!==void 0&&(re.currency=I.currency),I.close_date!==void 0&&(re.close_date=I.close_date||null),I.description!==void 0&&(re.description=I.description||null),I.assigned_to!==void 0&&(re.assigned_to=I.assigned_to?parseInt(I.assigned_to):null),await se.put(`/deals/admin/${Q}`,re),W.success(`Deal "${ge}" updated successfully.`),x(!1),await H()}else if(z==="delete"){if(!Q)throw new Error("Missing deal identifier for deletion.");await se.delete(`/deals/admin/${Q}`),W.success(`Deal "${ge}" deleted successfully.`),c?.id===Q&&u(null),await H()}else if(z==="archive"){if(!Q)throw new Error("Missing deal identifier for archive.");await se.put(`/deals/single-archive/${Q}`),W.success(`Deal "${ge}" archived successfully.`),c?.id===Q&&u(null),await H()}else if(z==="bulk-archive"){if(de(!0),!O.targetIds||O.targetIds.length===0)throw new Error("No deals selected for archiving.");await se.put("/deals/bulk-archive",{deal_ids:O.targetIds}),W.success(`${O.count} deal${O.count!==1?"s":""} archived successfully.`),ne(new Set),c&&O.targetIds.includes(c.id)&&u(null),await H()}}catch(re){console.error(re);const Ee=z==="create"?"Failed to create deal. Please review the details and try again.":z==="update"?"Failed to update deal. Please review the details and try again.":z==="bulk-archive"?"Failed to archive deals. Please try again.":z==="archive"?"Failed to archive deal. Please try again.":"Failed to delete deal. Please try again.",Qe=re.response?.data?.detail||Ee;W.error(Qe)}finally{(z==="create"||z==="update")&&A(!1),z==="bulk-archive"&&de(!1),$(!1),M(null)}},Nt=()=>{F||M(null)},wt=()=>{x(!1),pe({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),Pe(null),tt(null),q(!1),U(null),A(!1)},Tt=(y??[]).filter(O=>O.stage==="PROSPECTING").length,Re=(y??[]).filter(O=>O.stage==="QUALIFICATION").length,me=(y??[]).filter(O=>O.stage==="PROPOSAL").length,ie=(y??[]).filter(O=>O.stage==="NEGOTIATION").length,Fe=(y??[]).filter(O=>O.stage==="CLOSED_WON").length,Le=(y??[]).filter(O=>O.stage==="CLOSED_LOST").length,be=(y??[]).filter(O=>O.stage==="CLOSED_CANCELLED").length,ee=[{title:"Prospecting",value:Tt,icon:oN,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:Re,icon:ga,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:me,icon:tn,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:ie,icon:id,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:Fe,icon:aa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:Le,icon:Fs,color:"text-red-600",bgColor:"bg-red-100"},{title:"Closed Cancelled",value:be,icon:Fs,color:"text-gray-600",bgColor:"bg-gray-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[v&&n.jsx(Wt,{message:"Loading deals..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(tn,{className:"mr-2 text-blue-600"}),"Deals"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:ue,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(xn,{className:"mr-2"})," Add Deal"]})})]}),n.jsx("div",{className:"grid grid-cols-1 p-2 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden",children:ee.map(O=>n.jsx(y7e,{...O},O.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Vt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search deals",value:a,onChange:O=>s(O.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[n.jsxs("select",{value:r,onChange:O=>i(O.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),n.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),n.jsx("option",{value:"Qualification Stage",children:"Qualification"}),n.jsx("option",{value:"Proposal Stage",children:"Proposal"}),n.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),n.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),n.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"}),n.jsx("option",{value:"Closed Cancelled Stage",children:"Closed Cancelled"})]}),n.jsxs("select",{value:o,onChange:O=>l(O.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((y??[]).map(O=>`${O.assigned_deals?.first_name} ${O.assigned_deals?.last_name}`))].map((O,z)=>n.jsx("option",{value:O,children:O},z))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:ve.size>0&&ve.size===Oe?.filter(O=>O.deal_creator?.id===ke?.id).length&&Oe?.filter(O=>O.deal_creator?.id===ke?.id).length>0,onChange:Xe,className:"w-4 h-4 cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Stage"}),n.jsx("th",{className:"py-3 px-4",children:"Value"}),n.jsx("th",{className:"py-3 px-4",children:"Close Date"}),n.jsx("th",{className:"py-3 px-4",children:"Owner"}),n.jsx("th",{className:"py-3 px-4 w-12",children:ve.size>0&&n.jsx("button",{onClick:Ze,className:"text-orange-500 hover:text-orange-700 transition",title:"Archive selected deals",disabled:Se,children:n.jsx(Zt,{size:18})})})]})}),n.jsx("tbody",{children:Ke.length>0?Oe.map(O=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{u({...O}),He(O.id)},children:[n.jsx("td",{className:"py-3 px-4",children:ke?.id===O.deal_creator?.id&&n.jsx("input",{type:"checkbox",checked:ve.has(O.id),onClick:z=>{z.stopPropagation()},onChange:z=>{z.stopPropagation(),$e(O.id)},className:"w-4 h-4 cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:O.deal_id?O.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:O.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:O.description||"--"})]})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:O.account?.name||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:O.contact?.first_name&&O.contact?.last_name?`${O.contact.first_name} ${O.contact.last_name}`:O.contact?.first_name||O.contact?.last_name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${rt(O.stage)}`,children:Ie(O.stage)})}),n.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",O.amount?.toLocaleString()||"0"]}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:O.close_date||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:O.assigned_deals?.first_name&&O.assigned_deals?.last_name?`${O.assigned_deals.first_name} ${O.assigned_deals.last_name}`:O.assigned_deals?.first_name||O.assigned_deals?.last_name||"--"})]},O.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No deals found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:Ke.length,pageSize:_,currentPage:w,onPrev:Ce,onNext:fe,onPageSizeChange:O=>{E(O),S(1)},pageSizeOptions:[10,20,30,40,50],label:"deals"}),p&&n.jsx(b7e,{onClose:wt,formData:Te,setFormData:pe,isEditing:D,onSubmit:De,isSubmitting:T||F,accounts:V,contacts:Y,users:_e,currentAccount:ze,currentContact:We}),c&&n.jsx(vJ,{relatedActs:ae,selectedDeal:c,show:!!c,onClose:()=>u(null),activeTab:d,setActiveTab:f,onEdit:ce,onDelete:mt,onStatusUpdate:oe}),L&&n.jsx(x7e,{open:!0,title:L.title,message:L.message,confirmLabel:L.confirmLabel,cancelLabel:L.cancelLabel,variant:L.variant,onConfirm:nt,onCancel:Nt,loading:F})]})}function x7e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":i==="archive"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function y7e({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function b7e({onClose:e,formData:t,setFormData:a,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,accounts:o=[],contacts:l=[],users:c=[],currentAccount:u=null,currentContact:d=null}){const[f,p]=h.useState(!1),x=v=>{if(v.preventDefault(),p(!0),!t.name?.trim()){W.error("Deal name is required.");return}const j=Number(t.amount);if(!t.amount||isNaN(j)||j<=0){W.error("Amount must be a number greater than 0.");return}if(!t.account_id){W.error("Please select an account.");return}if(!t.primary_contact_id){W.error("Please select a primary contact.");return}if(!t.assigned_to){W.error("Please assign this deal to a user.");return}r?.(t)},y=v=>{v.target.id==="modalBackdrop"&&e()},N=h.useMemo(()=>{const v=String(t.account_id||"").trim(),j=Array.isArray(l)?l:[];return v?j.filter(w=>{const _=[w?.account_id,w?.accountId,w?.account?.id,w?.account?.account_id,w?.account?.accountId].find(E=>E!=null&&String(E).trim()!=="");return _?String(_)===v:!1}):j},[l,t.account_id]);return h.useEffect(()=>{const v=String(t.account_id||"").trim(),j=String(t.primary_contact_id||"").trim();if(!j||!v)return;N.some(S=>String(S?.id)===j)||a(S=>({...S,primary_contact_id:""}))},[t.account_id,t.primary_contact_id,N,a]),n.jsx("div",{id:"modalBackdrop",onClick:y,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:v=>v.stopPropagation(),children:[n.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Deal":"Create Deal"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:x,noValidate:!0,children:[n.jsx(KA,{label:"Deal Name",name:"name",value:t.name,onChange:v=>a({...t,name:v.target.value}),placeholder:"Enter deal name",required:!0,isSubmitted:f,className:"md:col-span-2"}),n.jsx(XA,{label:"Account",value:t.account_id||"",onChange:v=>a({...t,account_id:v}),items:o||[],getLabel:v=>v?.name??"",placeholder:"Search account...",disabled:i,currentItem:u,required:!0,isSubmitted:f}),n.jsx(XA,{label:"Primary Contact",value:t.primary_contact_id||"",onChange:v=>a({...t,primary_contact_id:v}),items:N||[],getLabel:v=>`${v?.first_name??""} ${v?.last_name??""}`.trim()||v?.email||"",placeholder:"Search contact...",disabled:i,currentItem:d,required:!0,isSubmitted:f}),n.jsx(j8,{label:"Stage",name:"stage",value:t.stage,onChange:v=>a({...t,stage:v.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}],disabled:i}),n.jsx(KA,{label:"Amount",name:"amount",type:"number",step:"0.01",value:t.amount,onChange:v=>a({...t,amount:v.target.value}),placeholder:"0",required:!0,isSubmitted:f}),n.jsx(j8,{label:"Currency",name:"currency",value:t.currency||"PHP",onChange:v=>a({...t,currency:v.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),n.jsx(KA,{label:"Close Date",name:"close_date",type:"date",value:t.close_date||"",onChange:v=>a({...t,close_date:v.target.value}),disabled:i}),n.jsx(XA,{label:"Assign To",value:t.assigned_to||"",onChange:v=>a({...t,assigned_to:v}),items:c||[],getLabel:v=>`${v?.first_name??""} ${v?.last_name??""}`.trim()||v?.email||"",placeholder:"Search assignee...",disabled:i,required:!0,isSubmitted:f,className:"md:col-span-2"}),n.jsx(w7e,{label:"Description",name:"description",value:t.description,onChange:v=>a({...t,description:v.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Deal":"Save Deal"})]})]})]})})}function KA({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:u=!1}){const d=u&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function j8({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))})]})}function XA({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",currentItem:c=null,required:u=!1,isSubmitted:d=!1}){const f=d&&u&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",u&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(v7e,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,currentItem:c,hasError:f})]})}function v7e({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,currentItem:l=null,hasError:c=!1}){const[u,d]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),N=e.find(w=>String(w.id)===String(t))||l,v=N?s(N):"",j=h.useMemo(()=>{const w=f.trim().toLowerCase();return(w?e.filter(_=>(s(_)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&d(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{u||p("")},[u]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:u?f:v,placeholder:r,onFocus:()=>!i&&d(!0),onChange:w=>{p(w.target.value),u||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${c?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),u&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:j.length>0?j.map(w=>{const S=String(w.id),_=s(w),E=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${E?"bg-blue-50":""}`,children:_||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function w7e({label:e,name:t,value:a,onChange:s,placeholder:r,required:i=!1,disabled:o=!1,className:l="",rows:c=3}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,required:i,disabled:o,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}const ZA=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],JA={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:"",subtotal:0,tax_rate:0,tax_amount:0,discount_type:"",discount_value:0,discount_amount:0,currency:"PHP",items:[]},$i=e=>{if(!e)return"Draft";const t=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[t]||"Draft"},eT=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",N7e=e=>{switch($i(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},j7e=e=>{switch($i(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},Cb=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",Ag=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",C7e=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const t=new Date(e);if(isNaN(t.getTime()))return"";const a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`}catch{return""}},tT=(e,t)=>{if(!e||t==null||t==="")return"";const a=Number(t);if(Number.isNaN(a))return"";const s=new Date(e);return isNaN(s.getTime())?"":(s.setDate(s.getDate()+a),s.toISOString().slice(0,10))},C8=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},nT=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},Rw=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},S7e=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const s of e){const r=localStorage.getItem(s);if(r)try{const i=JSON.parse(r),o=Rw(i);if(o)return o}catch{}}const t=localStorage.getItem("user_id"),a=Rw(t);return a||null},_7e=e=>{if(!e)return"";const a=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""},A7e=e=>{if(!e)return"";const a=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""};function T7e(){const e=jt(),t=Jt(),{user:a}=qt(),s=a?.company?.currency||"";h.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[r,i]=h.useState([]),[o,l]=h.useState(!1),[c,u]=h.useState([]),[d,f]=h.useState([]),[p,x]=h.useState([]),[y,N]=h.useState([]),[v,j]=h.useState(null),[w,S]=h.useState(null),[_,E]=h.useState(!1),[T,A]=h.useState(!1),[L,M]=h.useState(!1),[F,$]=h.useState(null),[D,q]=h.useState(!1),[G,U]=h.useState(!1),[V,Z]=h.useState(null),[Y,le]=h.useState(JA),[_e,te]=h.useState(""),[ae,ye]=h.useState("Filter by Status"),[Ne,he]=h.useState(null),ve=h.useCallback(async()=>{if(w)try{U(!0);const B=(await se.get("/company/invoice-info"))?.data;e(`/manager/quotes/${encodeURIComponent(w.id)}/print`,{state:{quote:w,companyInfo:B}})}catch(k){const B=k?.response?.data?.detail||k?.message||"Failed to open print page.";W.error(B)}finally{U(!1)}},[w,e]),[ne,Se]=h.useState(1),[de,ke]=h.useState(10),[Te,pe]=h.useState("Overview"),[ze,Pe]=h.useState("Draft"),[We,tt]=h.useState([]),[lt,Ie]=h.useState(null),{comments:rt,addComment:He,refresh:Ke}=ka({relatedType:"quote",relatedId:w?.id});h.useEffect(()=>{w?.id&&Ke()},[w?.id,Ke]),h.useEffect(()=>{const B=t.state?.quoteID;if(B){Ie(B),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(lt&&r.length>0&&!o){const k=r.find(B=>B.id===lt);k?S(k):W.error("Quote not found."),Ie(null)}},[lt,r,o]),h.useEffect(()=>{let k=!0;return(async()=>{const xe=S7e();if(xe&&k){j(xe);return}try{const Ae=await se.get("/auth/me"),Ue=Rw(Ae?.data);if(Ue&&k){j(Ue);return}}catch{}try{const Ae=await se.get("/users/me"),Ue=Rw(Ae?.data);if(Ue&&k){j(Ue);return}}catch{}k&&j(null)})(),()=>{k=!1}},[]);const Je=h.useCallback(k=>k&&d.find(xe=>String(xe.id)===String(k))?.name||"",[d]),Oe=h.useCallback(k=>{if(!k)return"";const B=p.find(xe=>String(xe.id)===String(k));return B?`${B.first_name} ${B.last_name}`.trim():""},[p]),Ce=h.useCallback(k=>{if(!k)return"--";const B=c.find(xe=>String(xe.id)===String(k));return B?.deal_name||B?.name||`Deal #${C8(k)}`},[c]),fe=h.useCallback(k=>{const B=c.find(Ue=>String(Ue.id)===String(k)),xe=_7e(B);let Ae=A7e(B);if(!Ae&&xe){const Ue=p.filter(Ge=>String(Ge.account_id||"")===String(xe));if(Ue.length>0){const Ge=[...Ue].sort((ct,yt)=>{const Et=`${ct.first_name||""} ${ct.last_name||""}`.trim().toLowerCase(),Kt=`${yt.first_name||""} ${yt.last_name||""}`.trim().toLowerCase();return Et.localeCompare(Kt)});Ae=String(Ge[0].id)}}if(xe&&Ae){const Ue=p.find(Ge=>String(Ge.id)===String(Ae));Ue?.account_id&&String(Ue.account_id)!==String(xe)&&(Ae="")}return{accountId:xe||"",contactId:Ae||""}},[c,p]),ue=h.useCallback(k=>{if(!k)return"--";if(k.deal?.deal_name)return k.deal.deal_name;if(k.deal?.name)return k.deal.name;const B=k.deal_id||k.deal?.id;return B?Ce(B):"--"},[Ce]),H=h.useCallback(k=>{if(!k)return"--";if(k.account?.name)return k.account.name;let B=k.account_id||k.account?.id;if(!B){const xe=k.deal_id||k.deal?.id;xe&&(B=fe(xe).accountId)}return B?Je(B)||`Account #${B}`:"--"},[fe,Je]),K=h.useCallback(k=>{if(!k)return"--";if(k.contact?.first_name||k.contact?.last_name)return`${k.contact?.first_name||""} ${k.contact?.last_name||""}`.trim()||"--";let B=k.contact_id||k.contact?.id;if(!B){const Ae=k.deal_id||k.deal?.id;Ae&&(B=fe(Ae).contactId)}return(B?Oe(B):"")||(B?`Contact #${B}`:"--")},[fe,Oe]),we=h.useCallback(async(k=null)=>{l(!0);try{const B=await se.get("/quotes/admin/fetch-all"),Ae=[...Array.isArray(B.data)?B.data:[]].sort((Ue,Ge)=>{const ct=Ue?.created_at||Ue?.updated_at||0,yt=Ge?.created_at||Ge?.updated_at||0;return new Date(yt)-new Date(ct)});if(i(Ae),k){const Ue=Ae.find(Ge=>Ge.id===k);S(Ue||null)}}catch(B){console.error(B),i([]),B.response?.status===403?W.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):W.error("Failed to fetch quotes. Please try again later.")}finally{l(!1)}},[]),Me=h.useCallback(async()=>{try{const k=await se.get("/deals/admin/fetch-all");u(Array.isArray(k.data)?k.data:[])}catch(k){console.error(k),k.response?.status===403&&W.warn("Unable to load deals (permission denied).")}},[]),ce=h.useCallback(async()=>{try{const k=await se.get("/accounts/admin/fetch-all");f(Array.isArray(k.data)?k.data:[])}catch(k){console.error(k),k.response?.status===403&&W.warn("Unable to load accounts (permission denied).")}},[]),oe=h.useCallback(async()=>{try{const k=await se.get("/contacts/admin/fetch-all");x(Array.isArray(k.data)?k.data:[])}catch(k){console.error(k),k.response?.status===403&&W.warn("Unable to load contacts (permission denied).")}},[]),De=h.useCallback(async()=>{try{const k=await se.get("/users/all");N(Array.isArray(k.data)?k.data:[])}catch(k){console.error(k),k.response?.status===403&&W.warn("Unable to load users (permission denied).")}},[]);h.useEffect(()=>{we(),Me(),ce(),oe(),De()},[we,Me,ce,oe,De]);const $e=h.useMemo(()=>{const k=_e.trim().toLowerCase(),B=ae.trim();return r.filter(xe=>{const Ae=ue(xe),Ue=H(xe),Ge=K(xe),ct=tT(xe.presented_date,xe.validity_days),yt=[xe.quote_id,Ae,Ue,Ge,xe.total_amount?.toString(),xe.validity_days?.toString(),xe.presented_date?Ag(xe.presented_date):"",ct?Ag(ct):"",xe.assigned_user?.first_name,xe.assigned_user?.last_name,xe.creator?.first_name,xe.creator?.last_name,xe.status,xe.notes,Cb(xe.created_at),Cb(xe.updated_at)],Et=k===""||yt.some(Ea=>Ea==null?!1:Ea.toString().toLowerCase().includes(k)),Kt=B==="Filter by Status"||$i(xe.status)===B;return Et&&Kt})},[r,_e,ae,ue,H,K]),Xe=Math.max(1,Math.ceil($e.length/de)||1);h.useEffect(()=>Se(1),[_e,ae]),h.useEffect(()=>{Se(k=>{const B=Math.max(1,Math.ceil($e.length/de)||1);return k>B?B:k})},[$e.length,de]);const Ze=h.useMemo(()=>{const k=(ne-1)*de;return $e.slice(k,k+de)},[$e,ne,de]),mt=()=>Se(k=>Math.max(k-1,1)),nt=()=>Se(k=>Math.min(k+1,Xe)),Nt=k=>{S(k),pe("Overview"),Pe($i(k?.status)||"Draft")},wt=()=>{S(null),pe("Overview")},Tt=k=>{k.target.id==="quoteModalBackdrop"&&!D&&wt()},Re=h.useCallback(()=>{E(!1),A(!1),Z(null),le(JA),M(!1)},[]),me=k=>{k.target.id==="modalBackdrop"&&!L&&!D&&Re()},ie=k=>{const{name:B,value:xe}=k.target;if(B==="deal_id"){const{accountId:Ae,contactId:Ue}=fe(xe);le(Ge=>({...Ge,deal_id:xe,account_id:Ae,contact_id:Ue}));return}le(Ae=>({...Ae,[B]:xe}))},Fe=()=>{le(JA),A(!1),Z(null),E(!0)},Le=k=>{if(!k)return;S(null);const B=k.deal?.id?String(k.deal.id):k.deal_id?String(k.deal_id):"",xe=B?fe(B):{accountId:"",contactId:""},Ae=k.account?.id?String(k.account.id):k.account_id?String(k.account_id):xe.accountId,Ue=k.contact?.id?String(k.contact.id):k.contact_id?String(k.contact_id):xe.contactId,Ge=k.assigned_user?.id?String(k.assigned_user.id):k.assigned_to?String(k.assigned_to):"";le({deal_id:B,account_id:Ae||"",contact_id:Ue||"",total_amount:k.total_amount?.toString()||"",presented_date:C7e(k.presented_date),validity_days:k.validity_days!==null&&k.validity_days!==void 0?String(k.validity_days):"",status:$i(k.status)||"Draft",assigned_to:Ge,notes:k.notes||"",subtotal:parseFloat(k.subtotal)||0,tax_rate:parseFloat(k.tax_rate)||0,tax_amount:parseFloat(k.tax_amount)||0,discount_type:k.discount_type||"",discount_value:parseFloat(k.discount_value)||0,discount_amount:parseFloat(k.discount_amount)||0,currency:k.currency||"PHP",items:Array.isArray(k.items)?k.items.map(ct=>({id:ct.id,item_type:ct.item_type||"Product",name:ct.name||"",description:ct.description||"",sku:ct.sku||"",variant:ct.variant||"",unit:ct.unit||"pcs",quantity:parseFloat(ct.quantity)||1,unit_price:parseFloat(ct.unit_price)||0,discount_percent:parseFloat(ct.discount_percent)||0,discount_amount:parseFloat(ct.discount_amount)||0,line_total:parseFloat(ct.line_total)||0,sort_order:ct.sort_order||0})):[]}),A(!0),Z(k.id),E(!0)},be=k=>{if(k.target.checked){const B=Ze.filter(xe=>xe.created_by===v).map(xe=>xe.id);tt(B)}else tt([])},ee=k=>{tt(B=>B.includes(k)?B.filter(xe=>xe!==k):[...B,k])},O=Ze.filter(k=>k.created_by===v),z=k=>{if(!k)return;const B=k.quote_id||"this quote";$({title:"Archive Quote",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:B}),"? This action cannot be undone."]}),confirmLabel:"Archive Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:k.id,name:B}})},I=async()=>{We.length!==0&&$({title:"Archive Quotes",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:We.length})," selected quotes? This action cannot be undone."]}),confirmLabel:`Archive ${We.length} Quote(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",quote_ids:We}})},[Q,ge]=h.useState(!1),re=k=>{if(k.preventDefault(),ge(!0),!v){W.error("Unable to determine current user. Please log in again.");return}if(!Y.deal_id){W.error("Deal is required.");return}if(!Y.assigned_to){W.error("Assigned To is required.");return}const xe=fe(Y.deal_id),Ae=Y.items.map((Et,Kt)=>({item_type:Et.item_type||"Product",name:Et.name,description:Et.description||null,sku:Et.sku||null,variant:Et.variant||null,unit:Et.unit||null,quantity:parseFloat(Et.quantity)||1,unit_price:parseFloat(Et.unit_price)||0,discount_percent:parseFloat(Et.discount_percent)||0,sort_order:Et.sort_order??Kt})),Ue={deal_id:Number(Y.deal_id),account_id:xe.accountId?Number(xe.accountId):null,contact_id:xe.contactId?Number(xe.contactId):null,subtotal:parseFloat(Y.subtotal)||0,tax_rate:parseFloat(Y.tax_rate)||0,tax_amount:parseFloat(Y.tax_amount)||0,discount_type:Y.discount_type||null,discount_value:parseFloat(Y.discount_value)||0,discount_amount:parseFloat(Y.discount_amount)||0,total_amount:parseFloat(Y.total_amount)||0,currency:Y.currency||"PHP",presented_date:Y.presented_date||null,validity_days:Y.validity_days===""?null:Number(Y.validity_days),status:Y.status||"Draft",assigned_to:Y.assigned_to?Number(Y.assigned_to):null,notes:Y.notes?.trim()||null,items:Ae},Ge=T&&V?"update":"create",ct=Ce(Y.deal_id),yt=Ge==="create"?{...Ue,created_by_id:Number(v)}:Ue;$({title:Ge==="create"?"Confirm New Quote":"Confirm Update",message:Ge==="create"?n.jsxs("span",{children:["Are you sure you want to create a quote for"," ",n.jsx("span",{className:"font-semibold",children:ct}),"?"]}):n.jsxs("span",{children:["Save changes to"," ",n.jsx("span",{className:"font-semibold",children:ct}),"?"]}),confirmLabel:Ge==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:Ge,payload:yt,targetId:V||null,name:ct}})},Ee=async()=>{if(!F?.action){$(null);return}const{action:k}=F,{type:B,payload:xe,targetId:Ae,name:Ue}=k;q(!0);try{if(B==="create")M(!0),await se.post("/quotes/admin",xe),W.success("Quote created successfully."),Re(),await we();else if(B==="update"){if(!Ae)throw new Error("Missing quote identifier for update.");M(!0),await se.put(`/quotes/admin/${Ae}`,xe),W.success("Quote updated successfully."),Re(),await we(),w?.id===Ae&&S(null)}else if(B==="delete"){if(!Ae)throw new Error("Missing quote identifier for deletion.");const Ge=w?.id;he(Ae),await se.delete(`/quotes/admin/${Ae}`),W.success(`Quote "${Ue}" archived successfully.`),await we(Ge&&Ge!==Ae?Ge:null),Ge===Ae&&S(null)}else B==="bulk-delete"&&(await se.post("/quotes/admin/bulk-delete",{quote_ids:We}),W.success(`Successfully archived ${We.length} quotes`),tt([]),await we())}catch(Ge){console.error(Ge);const ct=B==="create"?"Failed to create quote. Please review the details and try again.":B==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";W.error(ct),(B==="create"||B==="update")&&M(!1),B==="delete"&&he(null)}finally{(B==="create"||B==="update")&&M(!1),B==="delete"&&he(null),q(!1),$(null)}},Qe=()=>{D||$(null)},gt=h.useCallback((k,B)=>{const xe=k?.deal_id??k?.deal?.id??"",Ae=xe?Number(xe):null,Ue=Ae?fe(String(Ae)):{accountId:"",contactId:""},Ge=k?.account_id??k?.account?.id??Ue.accountId??null,ct=k?.contact_id??k?.contact?.id??Ue.contactId??null,yt=k?.total_amount??0,Et=k?.assigned_to??k?.assigned_user?.id??null;return{deal_id:Ae,account_id:Ge!=null&&String(Ge).trim()!==""?Number(Ge):null,contact_id:ct!=null&&String(ct).trim()!==""?Number(ct):null,total_amount:Number(yt),presented_date:k?.presented_date||null,validity_days:k?.validity_days===""||k?.validity_days===void 0||k?.validity_days===null?null:Number(k.validity_days),status:B,assigned_to:Et!=null&&String(Et).trim()!==""?Number(Et):null,notes:k?.notes?.trim()||null}},[fe]),Ct=h.useCallback(async()=>{if(!w?.id)return;const k=$i(ze),B=[k,k.toLowerCase()],xe=async Ae=>se.patch(`/quotes/admin/${w.id}/status`,{status:Ae},{headers:{"Content-Type":"application/json"}});try{let Ae=!1;for(const Ue of B)try{await xe(Ue),Ae=!0;break}catch(Ge){if(Ge?.response?.status===422)continue;throw Ge}if(!Ae){const Ue=gt(w,k);if(!Ue.deal_id){W.error("Cannot update status: missing deal_id on selected quote.");return}if(!Ue.total_amount||Ue.total_amount<=0){W.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await se.put(`/quotes/admin/${w.id}`,Ue)}W.success(`Quote status updated to ${k}`),S(null),pe("Overview"),await we()}catch(Ae){console.error(Ae);const Ue=Ae?.response?.data?.message||(Ae?.response?.data?.errors?Object.values(Ae.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";W.error(Ue)}},[w,ze,we,gt]),kt=[{label:"Filter by Status",value:"Filter by Status"},...ZA.map(k=>({label:k.label,value:k.value}))],Dt=F?.action?.type==="delete"?F.action.targetId:null,on=w&&(Ne===w.id||Dt===w.id),Qn=w&&Ne===w.id,ia=w?n.jsx("div",{id:"quoteModalBackdrop",onClick:Tt,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:k=>k.stopPropagation(),children:[n.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:n.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),n.jsx("button",{onClick:wt,className:"text-gray-500 hover:text-white transition cursor-pointer",children:n.jsx(Xn,{size:25})})]})}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:ue(w)}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${j7e(w.status)}`,children:eT(w.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-white text-gray-700 px-4 py-2 rounded-md border border-gray-300 hover:bg-gray-50 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-gray-300",onClick:ve,disabled:G||L||D,children:[n.jsx(fn,{className:"mr-2"}),G?"Preparing...":"Print Quotation"]}),v===w.created_by&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Le(w),disabled:D||F?.action?.type==="update"&&F.action.targetId===w.id,children:[n.jsx(ga,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>z(w),disabled:!!on,children:Qn?"Archiving...":n.jsxs(n.Fragment,{children:[n.jsx(Zt,{className:"mr-2"}),"Archive"]})})]})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-1 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(k=>n.jsx("button",{onClick:()=>pe(k),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${Te===k?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:k},k))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[Te==="Overview"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Quote ID:"}),n.jsx("p",{children:nT(w.quote_id)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Deal:"}),n.jsx("p",{children:ue(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Account:"}),n.jsx("p",{children:H(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact:"}),n.jsx("p",{children:K(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Total Amount:"}),n.jsx("p",{children:w.total_amount?`${s}${Number(w.total_amount).toLocaleString()}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Presented Date:"}),n.jsx("p",{children:Ag(w.presented_date)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Validity Days:"}),n.jsx("p",{children:w.validity_days!==null&&w.validity_days!==void 0?w.validity_days:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),n.jsx("p",{children:Ag(tT(w.presented_date,w.validity_days))||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:eT(w.status)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:w.assigned_user?`${w.assigned_user.first_name} ${w.assigned_user.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:w.creator?`${w.creator.first_name} ${w.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:Cb(w.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:Cb(w.updated_at)||"N/A"})]})]}),w.items&&w.items.length>0&&n.jsx("div",{className:"mt-6",children:n.jsx(yd,{items:w.items,onChange:()=>{},currencySymbol:s,readOnly:!0,taxRate:parseFloat(w.tax_rate)||0,discountType:w.discount_type,discountValue:parseFloat(w.discount_value)||0})})]}),Te==="Notes"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),n.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:w.notes||"No notes available."})]}),n.jsx(Ta,{comments:rt,onAddComment:He})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/manager/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call regarding Quote ${nT(w.quote_id)}`,assigned_to:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Ot,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${w.quote_id}`,assignedTo:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",status:"Planned"}}}),children:[n.jsx(Pt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${w.quote_id}`,assignedTo:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:ze||$i(w.status)||"Draft",onChange:k=>Pe(k.target.value),children:ZA.map(k=>n.jsx("option",{value:k.value,children:k.label},k.value))}),n.jsx("button",{onClick:Ct,disabled:$i(ze)===$i(w.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${$i(ze)===$i(w.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,Be=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[o&&n.jsx(Wt,{message:"Loading quotes..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(fn,{className:"mr-2 text-blue-600"})," Quotes"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto gap-2",children:n.jsxs("button",{onClick:()=>{Fe(),ge(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(xn,{className:"mr-2"})," Add Quote"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Vt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search quotes",value:_e,onChange:k=>te(k.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:ae,onChange:k=>ye(k.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:kt.map(k=>n.jsx("option",{value:k.value,children:k.label},k.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:O.length>0&&We.length===O.length,onChange:be,className:"cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),n.jsx("th",{className:"py-3 px-4",children:"Deal"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Expiry Date"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:We.length>0?n.jsx("button",{onClick:I,className:"text-orange-600 hover:text-orange-800 transition p-1 rounded-full hover:bg-orange-50",title:`Archive ${We.length} selected items`,children:n.jsx(Zt,{size:18})}):""})]})}),n.jsx("tbody",{children:o?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"Loading quotes..."})}):$e.length>0?Ze.map(k=>{const B=tT(k.presented_date,k.validity_days);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>Nt(k),children:[n.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:xe=>xe.stopPropagation(),children:k.created_by===v&&n.jsx("input",{type:"checkbox",checked:We.includes(k.id),onChange:()=>ee(k.id),className:"cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:nT(k.quote_id)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:ue(k)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-sm text-gray-700 break-words",children:H(k)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:K(k)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-700",children:k.total_amount?`${s}${Number(k.total_amount).toLocaleString()}`:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${N7e(k.status)}`,children:eT(k.status)})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{children:k.assigned_user?`${k.assigned_user.first_name} ${k.assigned_user.last_name}`:"Unassigned"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-500 text-xs",children:Ag(B)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top text-center w-24"})]},k.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"No quotes found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:$e.length,pageSize:de,currentPage:ne,onPrev:mt,onNext:nt,onPageSizeChange:k=>{ke(k),Se(1)},pageSizeOptions:[10,20,30,40,50],label:"quotes"})]}),_t=_?n.jsx("div",{id:"modalBackdrop",onClick:me,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:k=>k.stopPropagation(),children:[n.jsx("button",{onClick:()=>{Re(),ge(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:L||D,children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:T?"Edit Quote":"Add New Quote"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:re,children:[n.jsx(A8,{label:"Deal",name:"deal_id",value:Y.deal_id,onChange:k=>{const{accountId:B,contactId:xe}=fe(k);le(Ae=>({...Ae,deal_id:k,account_id:B,contact_id:xe}))},items:Array.isArray(c)?c:[],getLabel:k=>`${C8(k?.deal_id??"")} ${k?.name??""}`.trim(),placeholder:"Search deal...",required:!0,isSubmitted:Q,disabled:L||c.length===0,className:"md:col-span-2"}),n.jsx(_8,{label:"Account",value:Je(Y.account_id)||(Y.account_id?`Account #${Y.account_id}`:""),disabled:!0}),n.jsx(_8,{label:"Contact",value:Oe(Y.contact_id)||(Y.contact_id?`Contact #${Y.contact_id}`:""),disabled:!0}),n.jsx("div",{className:"md:col-span-2 mt-2",children:n.jsx(yd,{items:Y.items,onChange:k=>le(B=>({...B,items:k})),currencySymbol:s,readOnly:L,taxRate:Y.tax_rate,discountType:Y.discount_type,discountValue:Y.discount_value,onTotalsChange:k=>{le(B=>({...B,subtotal:k.subtotal,discount_amount:k.discount_amount,tax_amount:k.tax_amount,total_amount:k.total_amount}))}})}),n.jsxs("div",{className:"md:col-span-2 mt-2 p-4 bg-gray-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Pricing Settings"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Discount Type"}),n.jsxs("select",{value:Y.discount_type||"",onChange:k=>le(B=>({...B,discount_type:k.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",disabled:L,children:[n.jsx("option",{value:"",children:"No Discount"}),n.jsx("option",{value:"percentage",children:"Percentage (%)"}),n.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-600 text-xs mb-1",children:["Discount"," ",Y.discount_type==="percentage"?"%":"Amount"]}),n.jsx("input",{type:"number",value:Y.discount_value||"",onChange:k=>le(B=>({...B,discount_value:k.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:Y.discount_type==="percentage"?"100":void 0,step:"0.01",disabled:L||!Y.discount_type})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Tax Rate (%)"}),n.jsx("input",{type:"number",value:Y.tax_rate||"",onChange:k=>le(B=>({...B,tax_rate:k.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:"100",step:"0.01",disabled:L})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Total Amount"}),n.jsxs("div",{className:"w-full bg-gray-100 border border-gray-300 rounded-md px-2 py-1.5 text-sm font-medium",children:[s,parseFloat(Y.total_amount||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),n.jsx(S8,{label:"Presented Date",name:"presented_date",type:"date",value:Y.presented_date,onChange:ie,disabled:L}),n.jsx(S8,{label:"Validity Days",name:"validity_days",type:"number",value:Y.validity_days,onChange:ie,placeholder:"30",disabled:L}),n.jsx(A8,{label:"Assigned To",value:Y.assigned_to||"",onChange:k=>le(B=>({...B,assigned_to:k})),items:Array.isArray(y)?y:[],getLabel:k=>{const B=`${k?.first_name??""} ${k?.last_name??""}`.trim();return B?k?.role?`${B} (${k.role})`:B:k?.email||""},placeholder:"Search assignee...",required:!0,isSubmitted:Q,disabled:L}),n.jsx(k7e,{label:"Status",name:"status",value:Y.status,onChange:ie,options:ZA,required:!0,disabled:L}),n.jsx(L7e,{label:"Notes",name:"notes",value:Y.notes,onChange:ie,placeholder:"Additional details...",rows:3,disabled:L,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{Re(),ge(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:L||D,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:L||D,children:L?"Saving...":T?"Update Quote":"Save Quote"})]})]})]})}):null,X=F?n.jsx(P7e,{open:!0,title:F.title,message:F.message,confirmLabel:F.confirmLabel,cancelLabel:F.cancelLabel,variant:F.variant,onConfirm:Ee,onCancel:Qe,loading:D}):null;return n.jsxs(n.Fragment,{children:[w?ia:Be,_t,X]})}function S8({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:u=!1}){const d=u&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function _8({label:e,value:t,className:a="",disabled:s=!0}){return n.jsxs("div",{className:a,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("input",{type:"text",value:t??"",disabled:s,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function k7e({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){const c=a!=null?String(a):"",d=r.some(f=>String(f.value)===c)?c:"";return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:d,onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(f=>n.jsx("option",{value:String(f.value??""),children:f.label},f.value??f.label))})]})}function A8({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:u=!1}){const d=u&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(E7e,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:d})]})}function E7e({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,u]=h.useState(!1),[d,f]=h.useState(""),p=h.useRef(null),x=e.find(v=>String(v.id)===String(t)),y=x?s(x):"",N=h.useMemo(()=>{const v=d.trim().toLowerCase();return(v?e.filter(w=>(s(w)||"").toLowerCase().includes(v)):e).slice(0,o)},[e,d,s,o]);return h.useEffect(()=>{const v=j=>{p.current&&!p.current.contains(j.target)&&u(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?d:y,placeholder:r,onFocus:()=>!i&&u(!0),onChange:v=>{f(v.target.value),c||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:N.length>0?N.map(v=>{const j=String(v.id),w=s(v),S=String(t)===j;return n.jsx("button",{type:"button",onClick:()=>{a(j),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},j)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function L7e({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function P7e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function D7e(){const{userRole:e}=Ks();return n.jsx(o1,{currentUserRole:e,currentUserId:null})}function O7e(){h.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,t]=h.useState(null),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Actions"),[o,l]=h.useState(1),[c,u]=h.useState(10),d=async()=>{try{const w=await se.get("/logs/read-all");t(w.data)}catch(w){console.error("Error fetching audit logs:",w)}};h.useEffect(()=>{d()},[]);const f=h.useMemo(()=>{if(!Array.isArray(e))return[];const w=a.trim().toLowerCase(),S=r?.toUpperCase?.()||"ALL";return e.filter(E=>{const T=E.timestamp?new Date(E.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",A=`${E.entity_type||""} ${E.entity_name||E.entity_details?.name||E.entity_details?.title||E.entity_id||""}`,L=`${E.logger?.first_name||""} ${E.logger?.last_name||""}`,M=[T,L,E.action,E.entity_type,A,E.description],F=w===""||M.some(D=>D==null?!1:D.toString().toLowerCase().includes(w)),$=S==="FILTER BY ACTIONS"||(E.action||"").toUpperCase()===S;return F&&$}).sort((E,T)=>{const A=E.timestamp?new Date(E.timestamp).getTime():0;return(T.timestamp?new Date(T.timestamp).getTime():0)-A})},[e,a,r]),p=Math.max(1,Math.ceil(f.length/c)||1);h.useEffect(()=>{l(1)},[a,r]),h.useEffect(()=>{l(w=>{const S=Math.max(1,Math.ceil(f.length/c)||1);return w>S?S:w})},[f.length]);const x=h.useMemo(()=>{const w=(o-1)*c;return f.slice(w,w+c)},[f,o]);f.length===0||(o-1)*c+1,Math.min(o*c,f.length);const y=()=>l(w=>Math.max(w-1,1)),N=()=>l(w=>Math.min(w+1,p)),v=()=>{if(!f.length){Qx.error("No logs to export!");return}const w=["Timestamp","User","Action","Resource","Details"],S=f.map(L=>[new Date(L.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${L.logger?.first_name||""} ${L.logger?.last_name||""}`.trim(),L.action,`${L.entity_type}: ${L.entity_id}`,L.description||""]),_=[w.join(","),...S.map(L=>L.map(M=>`"${String(M).replace(/"/g,'""')}"`).join(","))].join(`
`),E=new Blob([_],{type:"text/csv;charset=utf-8;"}),T=URL.createObjectURL(E),A=document.createElement("a");A.href=T,A.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(A),A.click(),document.body.removeChild(A),URL.revokeObjectURL(T)},j=w=>{switch((w||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&n.jsx(Wt,{message:"Loading audit logs..."}),n.jsx(Yx,{toastOptions:{duration:1e3}}),n.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[n.jsx(Pt,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),n.jsxs("p",{className:"text-sm text-blue-700",children:[n.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ks,{className:"text-blue-600",size:20}),n.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:v,children:[n.jsx(qo,{className:"mr-2"}),"Export Logs"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[n.jsx(Vt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search audit logs",value:a,onChange:w=>s(w.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:r,onChange:w=>i(w.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),n.jsx("option",{value:"CREATE",children:"CREATE"}),n.jsx("option",{value:"DELETE",children:"DELETE"}),n.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),n.jsx("th",{className:"py-3 px-4",children:"User"}),n.jsx("th",{className:"py-3 px-4",children:"Action"}),n.jsx("th",{className:"py-3 px-4",children:"Resource"}),n.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),n.jsx("tbody",{children:Array.isArray(f)&&f.length>0?x.map((w,S)=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(w.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.name}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${j(w.action)}`,children:w.action})}),n.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[w.entity_type,": ",w.entity_id]}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.description})]},S)):n.jsx("tr",{children:n.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:f.length,pageSize:c,currentPage:o,onPrev:y,onNext:N,onPageSizeChange:w=>{u(w),l(1)},pageSizeOptions:[10,20,30,40,50],label:"logs"})]})}const M7e=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"}],I7e=e=>e?String(e).toUpperCase():"",hf=e=>{const t=I7e(e);return t==="PLANNED"||t==="PENDING"?"PLANNED":t==="HELD"||t==="COMPLETED"?"HELD":t==="NOT HELD"||t==="NOT_HELD"||t==="CANCELLED"?"NOT_HELD":"PLANNED"},aT=e=>{const t=hf(e);return t==="PLANNED"?"PLANNED":t==="HELD"?"HELD":t==="NOT_HELD"?"NOT HELD":"--"},T8=e=>{switch(hf(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},k8=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function $7e(){const[e,t]=h.useState(!1),[a,s]=h.useState(null),[r,i]=h.useState(null),[o,l]=h.useState(null),[c,u]=h.useState(null),[d,f]=h.useState([]),[p,x]=h.useState(null),[y,N]=h.useState(!1),[v,j]=h.useState(null),[w,S]=h.useState(!1),[_,E]=h.useState(!1),[T,A]=h.useState("PLANNED"),[L,M]=h.useState(!1),[F,$]=h.useState(!1),[D,q]=h.useState(null),[G,U]=h.useState(new Set),[V,Z]=h.useState(!1),{user:Y}=qt(),{comments:le,addComment:_e,refresh:te}=ka({relatedType:"call",relatedId:a?.id});h.useEffect(()=>{a?.id&&te()},[a?.id,te]),Us();const ae=jt(),ye=Jt(),Ne=me=>{if(!me)return"";const ie=String(me).split("-");return ie.length===3?`${ie[0]}-${ie[2]}`:String(me)},ve={subject:"",call_time:(()=>{const me=new Date,ie=me.getFullYear(),Fe=String(me.getMonth()+1).padStart(2,"0"),Le=String(me.getDate()).padStart(2,"0");return`${ie}-${Fe}-${Le}T08:00`})(),duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[ne,Se]=h.useState(ve);h.useEffect(()=>{const me=ye.state,ie=me?.callID;if(ie&&!me?.openCallModal){q(ie),ae(ye.pathname,{replace:!0,state:{}});return}!me?.openCallModal||!me?.initialCallData||me.initialCallData.relatedType1==="Lead"&&Array.isArray(o)&&o.length===0||me.initialCallData.relatedType1==="Account"&&(!Array.isArray(o)||o.length===0)||(t(!0),Se(Fe=>({...Fe,...me.initialCallData,relatedTo1:me.initialCallData.relatedTo1?String(me.initialCallData.relatedTo1):"",relatedTo2:me.initialCallData.relatedTo2?String(me.initialCallData.relatedTo2):""})),ae(ye.pathname,{replace:!0,state:{}}))},[ye.state,o]),h.useEffect(()=>{if(D&&d.length>0&&!F){const me=d.find(ie=>ie.id===D);me?s(me):W.error("Call not found."),q(null)}},[D,d,F]);const de=async()=>{try{$(!0);const me=await se.get("/calls/admin/fetch-all"),Fe=[...Array.isArray(me.data)?me.data:[]].sort((Le,be)=>{const ee=Le?.created_at?new Date(Le.created_at):0;return(be?.created_at?new Date(be.created_at):0)-ee});f(Fe)}catch(me){console.error("Error fetching calls:",me),W.error("Failed to load calls")}finally{$(!1)}},ke=async()=>{try{const me=await se.get("/users/all");x(me.data)}catch(me){console.error("Error fetching users: ",me)}};h.useEffect(()=>{ke(),de()},[]);const Te=[],pe="",ze="Filter by Status",Pe="Filter by Users",[We,tt]=h.useState(1),[lt,Ie]=h.useState(10),He=["GROUP MANAGER","MANAGER","SALES"].includes(Y?.role?.toUpperCase())?d.filter(me=>me.status!=="INACTIVE"):d,Ke=He,Je=He.length,Oe=He.filter(me=>hf(me.status)==="PLANNED").length,Ce=He.filter(me=>hf(me.status)==="HELD").length,fe=He.filter(me=>hf(me.status)==="NOT_HELD").length,ue=[{title:"Total",value:Je,icon:zs,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:Oe,icon:Vs,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:Ce,icon:aa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:fe,icon:Fs,color:"text-gray-600",bgColor:"bg-gray-100"}],[H,K]=h.useState("Overview"),we=me=>{const{name:ie,value:Fe}=me.target;Se(Le=>{const be={...Le,[ie]:Fe};return ie==="relatedType1"&&(be.relatedTo1="",Fe==="Lead"?(be.relatedType2=null,be.relatedTo2=null,u([])):Fe==="Account"&&(be.relatedType2="Contact")),ie==="relatedType2"&&(be.relatedTo2=""),be})};h.useEffect(()=>{const me=async()=>{try{l([]);let ie;ne.relatedType1==="Lead"?ie=await se.get("/leads/admin/getLeads"):ne.relatedType1==="Account"&&(ie=await se.get("/accounts/admin/fetch-all"));let Fe=[];if(ie&&Array.isArray(ie.data)?Fe=ie.data:Fe=[],y&&ne.relatedTo1)try{let Le;ne.relatedType1==="Lead"?Le=await se.get(`/leads/get/${ne.relatedTo1}`):ne.relatedType1==="Account"&&(Le=await se.get(`/accounts/get/${ne.relatedTo1}`)),Le&&Le.data&&(Fe.some(ee=>String(ee.id)===String(ne.relatedTo1))||(Fe=[Le.data,...Fe]))}catch(Le){console.error("Error fetching specific related item:",Le)}l(Fe)}catch(ie){console.error("Error fetching data:",ie),l([])}};ne.relatedType1&&me()},[ne.relatedType1,y,ne.relatedTo1]),h.useEffect(()=>{const me=async()=>{try{u([]);let ie;if(ne.relatedType1==="Account"&&ne.relatedTo1)ne.relatedType2==="Contact"?ie=await se.get(`/contacts/from-acc/${ne.relatedTo1}`):ne.relatedType2==="Deal"?ie=await se.get(`/deals/from-acc/${ne.relatedTo1}`):ne.relatedType2==="Quote"&&(ie=await se.get(`/quotes/from-acc/${ne.relatedTo1}`));else{u([]);return}ie&&Array.isArray(ie.data)?u(ie.data):u([])}catch(ie){console.error("Error fetching data:",ie),u([])}};ne.relatedType2&&me()},[ne.relatedType2,ne.relatedTo1,ne.relatedType1]);const[Me,ce]=h.useState(!1),oe=me=>{me.preventDefault(),ce(!0);const ie=ne.subject;if(!ie||ie.trim()===""){W.error("Subject is required.");return}if(!ne.relatedTo1){W.error(`Please select a ${ne.relatedType1||"Lead/Account"}.`);return}if(!ne.assigned_to){W.error("Subject is required.");return}const Le={...ne,duration_minutes:ne.duration_minutes?parseInt(ne.duration_minutes,10):null,relatedTo1:ne.relatedTo1?parseInt(ne.relatedTo1,10):null,relatedTo2:ne.relatedType1==="Lead"?null:ne.relatedTo2?parseInt(ne.relatedTo2,10):null,relatedType2:ne.relatedType1==="Lead"?null:ne.relatedType2,assigned_to:ne.assigned_to?parseInt(ne.assigned_to,10):null},be=y&&v?"update":"create",ee=(ne.subject||"").trim()||"Untitled Call";i({title:be==="create"?"Confirm New Call":"Confirm Update",message:be==="create"?`Create "${ee}"?`:`Save changes to "${ee}"?`,confirmLabel:be==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:be,payload:Le,targetId:v||null,name:ee}})},De=me=>s(me),$e=()=>{t(!1),N(!1),j(null)},Xe=async()=>{if(!r?.action){i(null);return}const{action:me}=r,{type:ie,payload:Fe,targetId:Le,name:be}=me;E(!0);try{if(ie==="create")S(!0),await se.post("/calls/create",Fe),W.success(`Call "${be}" created successfully.`),t(!1),Se(ve),N(!1),j(null),await de();else if(ie==="update"){if(!Le)throw new Error("Missing call identifier for update.");S(!0),await se.put(`/calls/${Le}`,Fe),W.success(`Call "${be}" updated successfully.`),t(!1),Se(ve),N(!1),j(null),await de()}else if(ie==="delete"){if(!Le)throw new Error("Missing call identifier for archiving.");await se.put(`/calls/${Le}`,{status:"INACTIVE"}),W.success(`Call "${be}" archived successfully.`),a?.id===Le&&s(null),await de()}else if(ie==="bulk-delete"){const{targetIds:ee,count:O}=me;if(!ee||ee.length===0)throw new Error("Missing call identifiers for bulk archiving.");Z(!0),await se.put("/calls/bulk-archive",{call_ids:ee}),W.success(`${O} call${O!==1?"s":""} archived successfully.`),U(new Set),await de(),a&&G.has(a.id)&&s(null)}}catch(ee){const O=ie==="create"?"Failed to create call. Please review the details and try again.":ie==="update"?"Failed to update call. Please review the details and try again.":ie==="bulk-delete"?"Failed to archive calls. Please try again.":"Failed to archive call. Please try again.",z=ee?.response?.data?.detail||O;W.error(z)}finally{(ie==="create"||ie==="update")&&S(!1),ie==="bulk-delete"&&Z(!1),E(!1),i(null)}},Ze=()=>{_||i(null)},mt=async()=>{if(a?.id)try{M(!0),await se.put(`/calls/${a.id}`,{status:T}),W.success(`Status updated to ${aT(T)}`),f(me=>Array.isArray(me)?me.map(ie=>ie.id===a.id?{...ie,status:T}:ie):me),s(null)}catch(me){const ie=me.response?.data?.detail||"Failed to update status.";W.error(ie)}finally{M(!1)}},nt=me=>{const ie=Ke.find(Fe=>Fe.id===me);ie&&ie.call_creator?.id===Y?.id&&U(Fe=>{const Le=new Set(Fe);return Le.has(me)?Le.delete(me):Le.add(me),Le})},Nt=()=>{const me=Ke.filter(ie=>ie.call_creator?.id===Y?.id);G.size===me.length&&me.length>0?U(new Set):U(new Set(me.map(ie=>ie.id)))},wt=()=>{if(G.size===0)return;const me=G.size;i({title:"Archive Calls",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:me})," call",me!==1?"s":"","? You can restore them later if needed."]}),confirmLabel:`Archive ${me} Call${me!==1?"s":""}`,cancelLabel:"Cancel",variant:"archive",action:{type:"bulk-delete",targetIds:Array.from(G),count:me}})};h.useEffect(()=>{a&&A(hf(a.status))},[a]);const Tt=a?n.jsxs("div",{id:"callModalBackdrop",onClick:me=>me.target.id==="callModalBackdrop"&&s(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[F&&n.jsx(Wt,{message:"Loading call details..."}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),n.jsx("button",{onClick:()=>s(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:n.jsx(Xn,{size:25})})]}),n.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:a.subject}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${T8(a.status)}`,children:aT(a.status)})]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:Y?.id===a?.call_creator?.id&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const me=ee=>{if(!ee)return"";const O=new Date(ee),z=O.getFullYear(),I=String(O.getMonth()+1).padStart(2,"0"),Q=String(O.getDate()).padStart(2,"0"),ge=String(O.getHours()).padStart(2,"0"),re=String(O.getMinutes()).padStart(2,"0");return`${z}-${I}-${Q}T${ge}:${re}`},ie=a.lead?"Lead":a.account?"Account":"Lead",Fe=a.lead?a.lead.id:a.account?a.account.id:null,Le=ie==="Lead"?null:a.contact?"Contact":a.deal?"Deal":a.quote?"Quote":"Contact",be=ie==="Lead"?null:a.contact?a.contact.id:a.deal?a.deal.id:a.quote?a.quote.id:null;Se({subject:a.subject||"",call_time:me(a.call_time),duration_minutes:a.duration_minutes?String(a.duration_minutes):"",direction:a.direction||"Outgoing",status:a.status||"Planned",notes:a.notes||"",relatedType1:ie,relatedType2:Le,relatedTo1:Fe?String(Fe):"",relatedTo2:be?String(be):"",assigned_to:a.call_assign_to?.id?String(a.call_assign_to.id):""}),N(!0),j(a.id),s(null),t(!0)},children:[n.jsx(ga,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>{const me=a.subject||"this call";i({title:"Archive Call",message:`Are you sure you want to archive "${me}"? You can restore it later if needed.`,confirmLabel:"Archive Call",cancelLabel:"Cancel",variant:"archive",action:{type:"delete",targetId:a.id,name:me}})},children:[n.jsx(Zt,{className:"mr-2"}),"Archive"]})]})})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(me=>n.jsx("button",{onClick:()=>K(me),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${H===me?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:me},me))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[H==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsx(fo,{label:"Call Time",value:k8(a.call_time)}),n.jsx(fo,{label:"Duration",value:a.duration_minutes?`${a.duration_minutes} min`:null}),n.jsx(fo,{label:"Direction",value:a.direction||"--"}),n.jsx(fo,{label:"Assigned To",value:`${a.call_assign_to.first_name} ${a.call_assign_to.last_name}`}),a.lead&&n.jsx(fo,{label:"Lead",value:a.lead.title}),a.account&&n.jsx(fo,{label:"Account",value:a.account.name}),a.contact&&n.jsx(fo,{label:"Contact",value:`${a.contact.first_name} ${a.contact.last_name}`}),a.deal&&n.jsx(fo,{label:"Deal",value:a.deal.name}),a.quote&&n.jsx(fo,{label:"Quote",value:Ne(a.quote.quote_id)}),n.jsx(fo,{label:"Created At",value:k8(a.created_at)})]})}),H==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Call Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:a.notes||"No notes available."})]}),n.jsx(Ta,{comments:le,onAddComment:_e})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:T,onChange:me=>A(me.target.value),children:[n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),n.jsx("button",{onClick:mt,disabled:L,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:L?"Updating...":"Update"})]})]})]})]})]}):null,Re=e?n.jsx("div",{id:"modalBackdrop",onClick:me=>me.target.id==="modalBackdrop"&&$e(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[n.jsx("button",{onClick:()=>{$e(),ce(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:y?"Edit Call":"Add New Call"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:oe,noValidate:!0,children:[n.jsx(z7e,{label:"Subject",className:"md:col-span-2",name:"subject",value:ne.subject,onChange:we,isSubmitted:Me,required:!0}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("div",{className:"relative w-25",children:[n.jsxs("select",{name:"relatedType1",onChange:we,value:ne.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:w,children:[n.jsx("option",{value:"Lead",children:"Lead"}),n.jsx("option",{value:"Account",children:"Account"})]}),n.jsx("span",{className:"absolute left-10 md:pl-6 pl-6 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),n.jsx(sT,{items:Array.isArray(o)?o:[],value:ne.relatedTo1??"",placeholder:`Search ${ne.relatedType1||"here"}...`,getLabel:me=>ne.relatedType1==="Lead"?me.title:me.name??"",onChange:me=>Se(ie=>({...ie,relatedTo1:me})),required:!0,isSubmitted:Me,disabled:w})]}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("select",{name:"relatedType2",onChange:we,value:ne.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:ne.relatedType1==="Lead"||w,children:[n.jsx("option",{value:"Contact",children:"Contact"}),n.jsx("option",{value:"Deal",children:"Deal"}),n.jsx("option",{value:"Quote",children:"Quote"})]}),n.jsx(sT,{disabled:ne.relatedType1==="Lead"||w,items:Array.isArray(c)?c:[],value:ne.relatedTo2??"",placeholder:ne.relatedType1==="Lead"?"":Array.isArray(c)&&c.length>0?`Search ${ne.relatedType2||"Contact"}...`:`No ${ne.relatedType2||""} data found`,getLabel:me=>ne.relatedType2==="Contact"?`${me.first_name??""} ${me.last_name??""}`.trim():ne.relatedType2==="Quote"?Ne(me.quote_id)??"":me.name??"",onChange:me=>Se(ie=>({...ie,relatedTo2:me}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),n.jsx("input",{type:"datetime-local",value:ne.call_time,onChange:we,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),n.jsxs("div",{className:"w-full",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),n.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[n.jsx("input",{type:"tel",value:ne.duration_minutes,onChange:we,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),n.jsx("p",{children:"minutes"})]})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-500 font-semibold",children:"*"})]}),n.jsx(sT,{items:Array.isArray(p)?p:[],value:ne.assigned_to??"",placeholder:"Search an account...",getLabel:me=>`${me.first_name} ${me.last_name}`,onChange:me=>Se(ie=>({...ie,assigned_to:me})),required:!0,isSubmitted:Me})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),n.jsxs("select",{name:"direction",onChange:we,value:ne.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Incoming",children:"Incoming"}),n.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),n.jsxs("select",{name:"status",onChange:we,value:ne.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Planned",children:"Planned"}),n.jsx("option",{value:"Held",children:"Held"}),n.jsx("option",{value:"Not held",children:"Not held"})]})]}),n.jsx(F7e,{className:"col-span-2",label:"Notes",value:ne.notes,onChange:we,name:"notes"}),n.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{$e(),ce(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:w,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:w?"Saving...":y?"Update Call":"Save Call"})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(zs,{className:"mr-2 text-blue-600"})," Calls"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{Se(ve),N(!1),j(null),t(!0),ce(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(xn,{className:"mr-2"})," Add Call"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:ue.map(me=>n.jsx(R7e,{...me},me.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[n.jsx(Vt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",defaultValue:pe})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{defaultValue:ze,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),M7e.map(me=>n.jsx("option",{value:me.value,children:me.label},me.value))]}),n.jsxs("select",{defaultValue:Pe,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),Te.map(me=>n.jsx("option",{value:me.name,children:me.name},me.id))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:G.size>0&&G.size===Ke.filter(me=>me.call_creator?.id===Y?.id).length&&Ke.filter(me=>me.call_creator?.id===Y?.id).length>0,onChange:Nt,className:"w-4 h-4 cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Call Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 w-12",children:G.size>0&&n.jsx("button",{onClick:wt,className:"text-orange-500 hover:text-orange-700 transition",title:"Archive selected calls",disabled:V,children:n.jsx(Zt,{size:18})})})]})}),n.jsx("tbody",{children:F?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"py-10",children:n.jsx(Wt,{message:"Loading calls..."})})}):Ke.length>0?Ke.map(me=>n.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4",children:Y?.id===me.call_creator?.id&&n.jsx("input",{type:"checkbox",checked:G.has(me.id),onChange:ie=>{ie.stopPropagation(),nt(me.id)},className:"w-4 h-4 cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",onClick:()=>De(me),children:me.subject||"--"}),n.jsxs("td",{className:"py-3 px-4",onClick:()=>De(me),children:[me.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:me.lead.title}),me.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:me.account.name}),me.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[me.contact.first_name," ",me.contact.last_name]}),me.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:me.deal.name}),me.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Ne(me.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4 text-gray-800",onClick:()=>De(me),children:me.call_time?new Date(me.call_time).toLocaleString():"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800",onClick:()=>De(me),children:me?.call_assign_to?`${me.call_assign_to.first_name} ${me.call_assign_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",onClick:()=>De(me),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${T8(me.status)}`,children:aT(me.status)})}),n.jsx("td",{className:"py-3 px-4"})]},me.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),n.jsx(rn,{totalItems:He.length,pageSize:lt,currentPage:We,onPrev:()=>tt(me=>Math.max(1,me-1)),onNext:()=>tt(me=>me+1),onPageSizeChange:me=>{Ie(me),tt(1)},pageSizeOptions:[10,20,30,40,50],label:"calls"})]}),Tt,Re,r&&n.jsx(U7e,{open:!0,title:r.title,message:r.message,confirmLabel:r.confirmLabel,cancelLabel:r.cancelLabel,variant:r.variant,onConfirm:Xe,onCancel:Ze,loading:_})]})}function R7e({icon:e,title:t,value:a,color:s,bgColor:r}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:22})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function z7e({label:e,name:t,value:a,onChange:s,placeholder:r="",type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:u=""}){const d=c&&o&&!a;return n.jsxs("div",{className:u,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100
          ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
        `})]})}function F7e(e){return n.jsxs("div",{className:e.className,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),n.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function fo({label:e,value:t}){return n.jsxs("p",{children:[n.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",n.jsx("br",{}),n.jsx("span",{className:"break-words",children:t||"--"})]})}function U7e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":i==="archive"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function sT({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,required:l=!1,isSubmitted:c=!1}){const[u,d]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),y=e.find(w=>String(w.id)===String(t)),N=y?s(y):"",v=l&&c&&!t,j=h.useMemo(()=>{const w=f.trim().toLowerCase();return(w?e.filter(_=>(s(_)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&d(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{u||p("")},[u]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:u?f:N,placeholder:r,onFocus:()=>!i&&d(!0),onChange:w=>{p(w.target.value),u||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${v?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),u&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:j.length>0?j.map(w=>{const S=String(w.id),_=s(w),E=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${E?"bg-blue-50":""}`,children:_||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const E8=["Not started","In progress","Deferred","Completed"],L8={NOT_STARTED:"Not started","NOT STARTED":"Not started","TO DO":"Not started",IN_PROGRESS:"In progress","IN PROGRESS":"In progress",COMPLETED:"Completed",DEFERRED:"Deferred","Not started":"Not started","In progress":"In progress",Completed:"Completed",Deferred:"Deferred","In Progress":"In progress","To Do":"Not started",Review:"Deferred"},wJ=e=>e&&(L8[e]||L8[String(e).toUpperCase()])||"Not started",B7e=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const a=t.getTimezoneOffset();return new Date(t.getTime()-a*60*1e3).toISOString().slice(0,16)},rT=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},H7e=e=>{const t=e.subject?.trim()??"",a=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),wJ(e.status);let r=null,i=null,o=null,l=null,c=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?o=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Quote"&&e.relatedTo2&&(c=Number(e.relatedTo2)));const u=e.assignedTo?Number(e.assignedTo):null,d=o||l||i||r,f=o?"Contact":l?"Deal":i?"Account":r?"Lead":c?"Quote":null;return{title:t,description:a,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:u,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:o,deal_id:l,quote_id:c,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:d,related_type:f}},q7e=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",a=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",o=G=>{if(!G)return"";const U=String(G).split("-");return U.length===3?`${U[0]}-${U[2]}`:String(G)},l=()=>e.lead?.id||e.lead_id,c=()=>e.account?.id||e.account_id,u=()=>e.contact?.id||e.contact_id,d=()=>e.deal?.id||e.deal_id,f=()=>e.quote?.id||e.quote_id,p=()=>e.task_assign_to?.id||e.assigned_to,x=()=>e.lead?.title||e.lead_id,y=()=>e.account?.name||e.account_id,N=()=>i||e.contact_id,v=()=>e.deal?.name||e.deal_id,j=()=>o(e.quote?.quote_id)||e.id;let w="Lead",S="",_="",E="",T="Lead",A="",L="",M="";const F=c(),$=y(),D=l(),q=x();if(F){w="Account",T="Account",A=$,S=String(F);const G=u(),U=d(),V=N(),Z=v(),Y=f(),le=j();G?(_="Contact",L="Contact",M=V,E=String(G)):U?(L="Deal",_="Deal",M=Z,E=String(U)):Y&&(L="Quote",_="Quote",M=le,E=String(Y))}else D?(T="Lead",A=q,w="Lead",S=String(D)):e.related_type==="Account"&&(w="Account",S=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:wJ(e.status),dueDate:s,dateAssigned:r,assignedToId:p()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:a,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:T,relatedTo1Text:A,relatedType2Text:L,relatedTo2Text:M,subject:e.title,relatedType1:w,relatedTo1:S,relatedType2:_,relatedTo2:E}};function W7e(){h.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=qt(),[a,s]=h.useState("board"),[r,i]=h.useState(!1),[o,l]=h.useState(null),[c,u]=h.useState(!1),[d,f]=h.useState([]),[p,x]=h.useState(!0),[y,N]=h.useState(""),[v,j]=h.useState("Filter by Status"),[w,S]=h.useState("Filter by Priority"),[_,E]=h.useState([]),[T,A]=h.useState(1),[L,M]=h.useState(10),[F,$]=h.useState(null),[D,q]=h.useState(!1),[G,U]=h.useState([]),[V,Z]=h.useState(null),Y=jt(),le=Jt(),[_e,te]=h.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""}),[ae,ye]=h.useState(null),Ne=Fx(zf(am,{activationConstraint:{distance:8}})),he=H=>{const{active:K}=H,we=d.find(Me=>Me.id===K.id);Z(we)},ve=async H=>{const{active:K,over:we}=H;if(Z(null),!we)return;const Me=K.id,ce=we.id,oe=d.find(De=>De.id===Me);if(!(!oe||oe.status===ce)){f(De=>De.map($e=>$e.id===Me?{...$e,status:ce}:$e));try{const De={title:oe.title,description:oe.description||"",priority:oe.priority||"Normal",status:ce,due_date:oe.dueDate||null,assigned_to:oe.assignedToId||null,related_type_1:oe.relatedType1||null,related_to_1:oe.relatedTo1?parseInt(oe.relatedTo1,10):null,related_type_2:oe.relatedType2||null,related_to_2:oe.relatedTo2?parseInt(oe.relatedTo2,10):null};(!De.related_to_1||isNaN(De.related_to_1))&&(De.related_to_1=null),(!De.related_to_2||isNaN(De.related_to_2))&&(De.related_to_2=null),await se.put(`/tasks/${Me}`,De),W.success(`Task moved to "${ce}"`)}catch(De){console.error("Failed to update task status:",De),W.error("Failed to update task status"),f($e=>$e.map(Xe=>Xe.id===Me?{...Xe,status:oe.status}:Xe))}}},ne=()=>{Z(null)};h.useEffect(()=>{const H=le.state?.openTaskModal,K=le.state?.initialTaskData,we=le.state?.taskID;H?(i(!0),K&&te(Me=>({...Me,...K})),Y(le.pathname,{replace:!0,state:{}})):we&&(ye(we),Y(le.pathname,{replace:!0,state:{}}))},[le,Y]),h.useEffect(()=>{if(ae&&d.length>0&&!p){const H=d.find(K=>K.id===ae);H?Te(H,!0):W.error("Task not found."),ye(null)}},[ae,d,p]);const Se=async()=>{try{const H=await se.get("/users/all");E(Array.isArray(H.data)?H.data:[])}catch(H){console.error("Failed to fetch users:",H),W.error("Failed to fetch users.")}},de=async()=>{try{x(!0);const H=await se.get("/tasks/all"),we=(Array.isArray(H.data)?H.data:[]).map(q7e);we.sort((Me,ce)=>{const oe=Me.createdAt?new Date(Me.createdAt):0;return(ce.createdAt?new Date(ce.createdAt):0)-oe}),f(we),a==="list"&&A(1)}catch(H){console.error("Failed to load tasks:",H),W.error("Failed to load tasks.")}finally{x(!1)}};h.useEffect(()=>{!t&&e&&(Se(),de())},[t,e]);const ke=()=>{l(null),te({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},Te=(H=null,K=!1)=>{l(H),u(K),H?te({id:H.id,subject:H.title||"",description:H.description||"",priority:H.priority||"Normal",status:H.status||"Not started",dueDate:B7e(H.dueDate),assignedTo:H.assignedToId?String(H.assignedToId):"",assignedToName:H.assignedToName||"",createdBy:H.createdBy||"",notes:H.notes||"",relatedType1Text:H.relatedType1Text||"",relatedTo1Text:H.relatedTo1Text||"",relatedType2Text:H.relatedType2Text||"",relatedTo2Text:H.relatedTo2Text||"",relatedType1:H.relatedType1||"",relatedTo1:H.relatedTo1||"",relatedType2:H.relatedType2||"",relatedTo2:H.relatedTo2||""}):ke(),i(!0)},pe=()=>{i(!1),l(null),u(!1),ke()},ze=async H=>{const K=H7e(H);try{o&&!c?(await se.put(`/tasks/${o.id}`,K),W.success("Task updated successfully.")):(await se.post("/tasks/create",K),W.success("Task created successfully.")),i(!1),await de()}catch(we){console.error("Failed to save task:",we);const Me=we.response?.data?.detail||"Failed to save task.";W.error(Me)}},Pe=H=>{H&&$({title:"Delete Task",message:n.jsxs(n.Fragment,{children:["Are you sure you want to delete ",n.jsx("span",{className:"font-semibold",children:H.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:H.id}})},We=()=>{if(Ke.every(H=>G.includes(H.id)))U(G.filter(H=>!Ke.map(K=>K.id).includes(H)));else{const H=Ke.map(K=>K.id);U([...new Set([...G,...H])])}},tt=H=>{U(K=>K.includes(H)?K.filter(we=>we!==H):[...K,H])},lt=async()=>{G.length!==0&&$({title:"Delete Tasks",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:G.length})," selected tasks? This action cannot be undone."]}),confirmLabel:`Delete ${G.length} Task(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",task_ids:G}})},Ie=async()=>{if(!F?.action){$(null);return}const{action:H}=F;q(!0);try{H.type==="delete"?(await se.delete(`/tasks/${H.targetId}`),W.success("Task deleted successfully."),await de()):H.type==="bulk-delete"&&(await se.delete("/tasks/admin/bulk-delete",{data:{task_ids:H.task_ids}}),W.success(`Successfully deleted ${H.task_ids.length} tasks`),U([]),await de())}catch(K){console.error("Task action failed:",K),W.error("Failed to delete task.")}finally{q(!1),$(null)}},rt=()=>{D||$(null)},He=h.useMemo(()=>{const H=y.trim().toLowerCase();return[...d].sort((we,Me)=>{const ce=we.createdAt?new Date(we.createdAt):0;return(Me.createdAt?new Date(Me.createdAt):0)-ce}).filter(we=>{const Me=H===""||we.title?.toLowerCase().includes(H)||we.description?.toLowerCase().includes(H)||we.assignedToName?.toLowerCase().includes(H)||we.createdBy?.toLowerCase().includes(H),ce=v==="Filter by Status"||we.status===v,oe=w==="Filter by Priority"||we.priority===w;return Me&&ce&&oe})},[d,y,v,w]);h.useEffect(()=>{A(1)},[y,v,w,a,L]),h.useEffect(()=>{if(a==="list"){const H=He.length===0?1:Math.ceil(He.length/L);T>H&&A(H)}},[He.length,T,a,L]);const Ke=h.useMemo(()=>{if(a==="board")return He;const H=(T-1)*L;return He.slice(H,H+L)},[He,T,a,L]),Je=h.useMemo(()=>{const H=new Date;return[{title:"To Do",value:d.filter(K=>K.status==="Not started").length,icon:Vs,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:d.filter(K=>K.status==="In progress").length,icon:Gi,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:d.filter(K=>K.status==="Completed").length,icon:aa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:d.filter(K=>K.dueDate&&new Date(K.dueDate)<H&&K.status!=="Completed").length,icon:Yu,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:d.filter(K=>K.priority==="High").length,icon:Xl,color:"text-orange-600",bgColor:"bg-orange-100"}]},[d]),Oe=H=>H.dueDate&&new Date(H.dueDate)<new Date&&H.status!=="Completed",Ce=H=>{switch(H.status){case"Not started":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Deferred":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},fe=H=>{switch(H){case"Not started":return"bg-blue-100 text-blue-700";case"In progress":return"bg-purple-100 text-purple-700";case"Deferred":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},ue=H=>{switch(H){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&n.jsx(Wt,{message:"Loading tasks..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(Gi,{className:"text-blue-600"})," Tasks Board"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:()=>Te(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[n.jsx(xn,{})," Create Task"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Je.map(H=>n.jsx(G7e,{...H},H.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Vt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search tasks",value:y,onChange:H=>N(H.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{value:v,onChange:H=>j(H.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Status"}),E8.map(H=>n.jsx("option",{children:H},H))]}),n.jsxs("select",{value:w,onChange:H=>S(H.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Priority"}),n.jsx("option",{children:"High"}),n.jsx("option",{children:"Normal"}),n.jsx("option",{children:"Low"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${a==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),n.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${a==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&a==="board"&&(He.length>0?n.jsxs(Hx,{sensors:Ne,collisionDetection:Ux,onDragStart:he,onDragEnd:ve,onDragCancel:ne,children:[n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:E8.map(H=>{const K=Ke.filter(we=>we.status===H);return n.jsx(Y7e,{column:H,columnTasks:K,getTaskCardColor:Ce,isTaskOverdue:Oe,formatDateDisplay:rT,handleOpenModal:Te,handleDeleteTask:Pe},H)})}),n.jsx(bj,{children:V?n.jsx(K7e,{task:V,getTaskCardColor:Ce,isTaskOverdue:Oe,formatDateDisplay:rT}):null})]}):n.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No tasks found."})),!p&&!t&&a==="list"&&n.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:Ke.length>0&&Ke.every(H=>G.includes(H.id)),onChange:We})}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),n.jsx("th",{className:"py-3 px-4 font-medium text-center w-24",children:G.length>0?n.jsx("button",{onClick:lt,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${G.length} selected tasks`,children:n.jsx(vn,{size:18})}):""})]})}),n.jsx("tbody",{children:Ke.length>0?Ke.map(H=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",children:[n.jsx("td",{className:"py-3 px-4",onClick:K=>K.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:G.includes(H.id),onChange:()=>tt(H.id)})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",onClick:()=>Te(H,!0),children:H.title}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>Te(H,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${fe(H.status||"Not started")}`,children:H.status||"Not started"})}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>Te(H,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${ue(H.priority||"Low")}`,children:H.priority||"Low"})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",onClick:()=>Te(H,!0),children:H.assignedToName||"Unassigned"}),n.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${Oe(H)?"text-red-600 font-medium":""}`,onClick:()=>Te(H,!0),children:H.dateAssigned?rT(H.dateAssigned):""}),n.jsx("td",{})]},H.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No tasks found."})})})]})})}),!p&&!t&&a==="list"&&n.jsx(rn,{className:"mt-6",totalItems:He.length,pageSize:L,currentPage:He.length===0?0:T,onPrev:()=>A(H=>Math.max(H-1,1)),onNext:()=>A(H=>Math.min(H+1,Math.max(1,Math.ceil(He.length/L)||1))),onPageSizeChange:H=>{M(H),A(1)},pageSizeOptions:[10,20,30,40,50],label:"tasks"}),n.jsx(b0,{isOpen:r,onClose:pe,onSave:ze,onEdit:()=>u(!1),setFormData:te,formData:_e,isEditing:!c&&!!o,viewMode:c,users:_,currentUser:e,onDelete:Pe}),F&&n.jsx(V7e,{open:!0,title:F.title,message:F.message,confirmLabel:F.confirmLabel,cancelLabel:F.cancelLabel,variant:F.variant,onConfirm:Ie,onCancel:rt,loading:D})]})}function G7e({icon:e,title:t,value:a,color:s,bgColor:r,onClick:i}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function V7e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r,variant:i,loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function Y7e({column:e,columnTasks:t,getTaskCardColor:a,isTaskOverdue:s,formatDateDisplay:r,handleOpenModal:i,handleDeleteTask:o}){const{isOver:l,setNodeRef:c}=Wx({id:e});return n.jsxs("div",{ref:c,className:`bg-white p-4 shadow border flex flex-col relative rounded-md transition-all duration-200 min-h-[200px] ${l?"border-blue-400 bg-blue-50 ring-2 ring-blue-300":"border-gray-200"}`,children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),n.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:e}),n.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:t.length})]}),n.jsx("div",{className:`space-y-3 flex-1 ${t.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:t.length>0?t.map(u=>n.jsx(Q7e,{task:u,getTaskCardColor:a,isTaskOverdue:s,formatDateDisplay:r,handleOpenModal:i,handleDeleteTask:o},u.id)):n.jsx("div",{className:`text-center py-10 text-gray-500 border-2 border-dashed rounded-lg ${l?"border-blue-300 bg-blue-50":"border-gray-200"}`,children:l?"Drop here":"No tasks"})})]})}function Q7e({task:e,getTaskCardColor:t,isTaskOverdue:a,formatDateDisplay:s,handleOpenModal:r,handleDeleteTask:i}){const{attributes:o,listeners:l,setNodeRef:c,transform:u,isDragging:d}=qx({id:e.id}),f=u?{transform:`translate3d(${u.x}px, ${u.y}px, 0)`}:void 0;return n.jsxs("div",{ref:c,style:f,className:`border rounded-lg p-3 transition flex justify-between items-start cursor-grab active:cursor-grabbing ${t(e)} ${d?"opacity-50 shadow-lg ring-2 ring-blue-400":""}`,...l,...o,children:[n.jsxs("div",{className:"text-left flex-1",onClick:p=>{p.stopPropagation(),r(e,!0)},children:[n.jsx("p",{className:"font-medium text-gray-800 text-sm",children:e.title}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",e.priority]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",e.assignedToName]}),n.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",n.jsx("span",{className:a(e)?"text-red-600":"text-gray-600",children:e.dateAssigned?s(e.dateAssigned):""})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-3",onClick:p=>p.stopPropagation(),children:[n.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),r(e)},className:"text-blue-500 hover:text-blue-700",children:n.jsx(ha,{})}),n.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),i(e)},className:"text-red-500 hover:text-red-700",children:n.jsx(vn,{})})]})]})}function K7e({task:e,getTaskCardColor:t,isTaskOverdue:a,formatDateDisplay:s}){return n.jsx("div",{className:`border rounded-lg p-3 shadow-xl ring-2 ring-blue-400 ${t(e)}`,style:{width:"280px"},children:n.jsxs("div",{className:"text-left flex-1",children:[n.jsx("p",{className:"font-medium text-gray-800 text-sm",children:e.title}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",e.priority]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",e.assignedToName]}),n.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",n.jsx("span",{className:a(e)?"text-red-600":"text-gray-600",children:e.dateAssigned?s(e.dateAssigned):""})]})]})})}const NJ=e=>e?e.toUpperCase():"",Sb=e=>{const t=NJ(e);return t==="PLANNED"||t==="IN PROGRESS"?"PLANNED":t==="HELD"||t==="DONE"?"HELD":t==="NOT_HELD"||t==="NOT HELD"?"NOT_HELD":"PLANNED"},X7e=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},Z7e=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},J7e=e=>{const t=NJ(e);switch(t==="PLANNED"?"PENDING":t==="HELD"?"COMPLETED":t==="NOT_HELD"?"CANCELLED":t){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},iT={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},e8e=()=>{const e=jt(),t=Jt(),[a]=Us(),s=a.get("id"),r=t.pathname==="/admin/meetings/info";h.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[i,o]=h.useState([]),[l,c]=h.useState(!1),[u,d]=h.useState([]),[f,p]=h.useState(""),[x,y]=h.useState("Filter by Status"),[N,v]=h.useState(!1),[j,w]=h.useState(null),[S,_]=h.useState(1),[E,T]=h.useState(10),[A,L]=h.useState(iT),[M,F]=h.useState(!1),[$,D]=h.useState(null),[q,G]=h.useState(!1),[U,V]=h.useState(null),[Z,Y]=h.useState(!1),[le,_e]=h.useState(null),[te,ae]=h.useState(new Set),[ye,Ne]=h.useState(!1),{user:he}=qt();h.useEffect(()=>{const Ce=t.state?.openMeetingModal,fe=t.state?.initialMeetingData?.relatedTo||a.get("id"),ue=t.state?.meetingID;Ce||fe?(v(!0),t.state?.initialMeetingData&&L(H=>({...H,...t.state.initialMeetingData})),e(t.pathname,{replace:!0,state:{}})):ue&&(_e(ue),e(t.pathname,{replace:!0,state:{}}))},[t,a,e]),h.useEffect(()=>{console.log("ManagerMeetings - Current User:",he),console.log("Current User Role:",he?.role),console.log("Is non-admin:",["GROUP MANAGER","MANAGER","SALES"].includes(he?.role?.toUpperCase()))},[he]),h.useEffect(()=>{if(le&&i.length>0&&!l){const Ce=i.find(fe=>fe.id===le);Ce?w(Ce):W.error("Meeting not found."),_e(null)}},[le,i,l]);const ve=async()=>{if(s&&r){const Ce=sessionStorage.getItem("meetingDetailData");if(Ce)try{const fe=JSON.parse(Ce);if(fe.id===parseInt(s)){w(fe),sessionStorage.removeItem("meetingDetailData");return}}catch(fe){console.error(fe)}}c(!0);try{console.log("=== FETCH MEETINGS START ===");const Ce=await se.get("/meetings/admin/fetch-all"),fe=Array.isArray(Ce.data)?Ce.data:[];console.log("Total meetings fetched:",fe.length),console.log("Meeting statuses:",fe.map(H=>({id:H.id,subject:H.subject,status:H.status})));const ue=[...fe].sort((H,K)=>{const we=H?.created_at?new Date(H.created_at).getTime():0;return(K?.created_at?new Date(K.created_at).getTime():0)-we});if(o(ue),console.log("Meetings set after sort"),console.log("=== FETCH MEETINGS COMPLETE ==="),s&&!j){const H=ue.find(K=>K.id===parseInt(s));H&&w(H)}}catch(Ce){console.error("fetchMeetings error:",Ce),W.error("Failed to load meetings.")}finally{c(!1)}},ne=async()=>{try{const Ce=await se.get("/users/all");d(Array.isArray(Ce.data)?Ce.data:[])}catch(Ce){console.error(Ce)}};h.useEffect(()=>{ve(),ne()},[]);const Se=Ce=>p(Ce.target.value),ke=["GROUP MANAGER","MANAGER","SALES"].includes(he?.role?.toUpperCase()),Te=ke?i.filter(Ce=>{const fe=Ce.status?.toUpperCase()==="INACTIVE";return fe&&console.log(`Filtering out INACTIVE meeting: ${Ce.subject} (status: ${Ce.status})`),!fe}):i;console.log("=== FILTER SUMMARY ==="),console.log("User role:",he?.role),console.log("Is non-admin:",ke),console.log("Total meetings:",i.length),console.log("Visible meetings after filter:",Te.length),console.log("=== END FILTER SUMMARY ===");const pe=h.useMemo(()=>{const Ce=f.trim().toLowerCase(),fe=x.trim().toUpperCase();return Te.filter(ue=>{const H=[ue?.activity,ue?.description,ue?.relatedTo,ue?.assignedTo],K=Ce===""||H.some(Me=>Me&&Me.toString().toLowerCase().includes(Ce)),we=fe==="FILTER BY STATUS"||Sb(ue.status||"PENDING")===fe;return K&&we})},[Te,f,x]),ze=h.useMemo(()=>{const Ce=(S-1)*E;return pe.slice(Ce,Ce+E)},[pe,S]),Pe=()=>{v(!1),L(iT),F(!1),D(null),G(!1)},We=()=>{L(iT),F(!1),D(null),v(!0)},tt=Ce=>{let fe="";if(Ce.meet_assign_to?.id)fe=String(Ce.meet_assign_to.id);else if(Ce.assignedTo){const $e=u.find(Xe=>`${Xe.first_name} ${Xe.last_name}`===Ce.assignedTo);fe=$e?String($e.id):""}const ue=$e=>{if(!$e)return"";try{const Xe=new Date($e),Ze=Xe.getTimezoneOffset()*6e4;return new Date(Xe.getTime()-Ze).toISOString().slice(0,16)}catch{return""}};let H="Lead",K="",we="Contact",Me="";if(Ce.lead)H="Lead",K=String(Ce.lead.id);else if(Ce.account)H="Account",K=String(Ce.account.id),Ce.contact?(we="Contact",Me=String(Ce.contact.id)):Ce.deal?(we="Deal",Me=String(Ce.deal.id)):Ce.quote&&(we="Quote",Me=String(Ce.quote.id));else if(Ce.relatedType||Ce.related_type){const $e=Ce.relatedType||Ce.related_type,Xe=Ce.related_to||Ce.relatedToId;$e==="Lead"?(H="Lead",K=String(Xe)):(H="Account",K=Ce.account_id?String(Ce.account_id):"")}const ce={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},oe=Sb(Ce.status),De=ce[oe]||"Planned";L({subject:Ce.subject||Ce.activity||"",location:Ce.location||"",startTime:ue(Ce.start_time||Ce.startTime),endTime:ue(Ce.end_time||Ce.endTime),status:De,notes:Ce.description||Ce.notes||"",assignedTo:fe,relatedType1:H,relatedTo1:K,relatedType2:we,relatedTo2:Me}),F(!0),D(Ce.id),w(null),v(!0)},lt=Ce=>{if(!Ce.subject?.trim())return W.error("Subject is required.");if(!Ce.startTime)return W.error("Start time is required.");if(Ce.endTime&&!(new Date(Ce.endTime)-new Date(Ce.startTime)>0))return W.error("End time must be after start time.");Ce.relatedType1,Ce.relatedTo1,Ce.relatedType1==="Account"&&Ce.relatedType2&&Ce.relatedTo2&&(Ce.relatedType2,Ce.relatedTo2);const fe={...Ce,assignedTo:parseInt(Ce.assignedTo),relatedTo1:parseInt(Ce.relatedTo1),relatedTo2:parseInt(Ce.relatedTo2)},ue=M&&$?"update":"create";V({title:ue==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${ue} "${fe.subject}"?`,confirmLabel:ue==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:ue,payload:fe,targetId:$,name:fe.subject}})},Ie=async()=>{if(!U?.action)return;const{type:Ce,payload:fe,targetId:ue,name:H,targetIds:K,count:we}=U.action;Y(!0);try{if(Ce==="create")G(!0),await se.post("/meetings/create",fe),W.success(`Meeting "${H}" created.`),Pe(),await ve();else if(Ce==="update")G(!0),await se.put(`/meetings/${ue}`,fe),W.success(`Meeting "${H}" updated.`),Pe(),await ve();else if(Ce==="delete"){console.log("=== ARCHIVE FLOW START ==="),console.log("Archiving meeting:",ue),console.log("Meeting name:",H);try{const Me=await se.delete(`/meetings/${ue}`);console.log("Archive API response:",Me),console.log("Response data:",Me.data),W.success(`Meeting "${H}" archived successfully.`),j?.id===ue&&w(null),console.log("Calling fetchMeetings to refresh list..."),await ve(),console.log("=== ARCHIVE FLOW COMPLETE ===")}catch(Me){throw console.error("Archive failed:",Me),Me}}else if(Ce==="bulk-delete"){if(!K||K.length===0)throw new Error("Missing meeting identifiers for bulk archiving.");console.log("Bulk archiving meetings:",K),Ne(!0),await se.put("/meetings/bulk-archive",{meeting_ids:K}),W.success(`${we} meeting${we!==1?"s":""} archived successfully.`),ae(new Set),await ve(),j&&te.has(j.id)&&w(null)}}catch(Me){console.error("Error in handleConfirmAction:",Me),console.error("Error response:",Me?.response),console.error("Error details:",Me?.response?.data);const ce=Ce==="create"?"Failed to create meeting. Please review the details and try again.":Ce==="update"?"Failed to update meeting. Please review the details and try again.":Ce==="bulk-delete"?"Failed to archive meetings. Please try again.":"Failed to delete meeting. Please try again.",oe=Me?.response?.data?.detail||ce;W.error(oe)}finally{(Ce==="create"||Ce==="update")&&G(!1),Ce==="bulk-delete"&&Ne(!1),Y(!1),V(null)}},rt=Ce=>{console.log("Delete button clicked for meeting:",Ce),console.log("Meeting created_by:",Ce.created_by),console.log("Current user ID:",he?.id),console.log("Can delete?:",Ce.created_by===he?.id),V({title:"Archive Meeting",message:`Are you sure you want to archive "${Ce.subject||Ce.activity}"? You can restore it later if needed.`,confirmLabel:"Archive",variant:"archive",action:{type:"delete",targetId:Ce.id,name:Ce.subject||Ce.activity}})},He=async(Ce,fe)=>{try{await se.put(`/meetings/${Ce}`,{status:fe}),W.success("Status updated"),ve(),w(null)}catch{W.error("Failed to update status")}},Ke=Ce=>{const fe=ze.find(ue=>ue.id===Ce);fe&&fe.created_by===he?.id&&ae(ue=>{const H=new Set(ue);return H.has(Ce)?H.delete(Ce):H.add(Ce),H})},Je=()=>{const Ce=ze.filter(fe=>fe.created_by===he?.id);te.size===Ce.length?ae(new Set):ae(new Set(Ce.map(fe=>fe.id)))},Oe=()=>{if(te.size===0)return;const Ce=te.size;V({title:"Archive Meetings",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:Ce})," meeting",Ce!==1?"s":"","? You can restore them later if needed."]}),confirmLabel:`Archive ${Ce} Meeting${Ce!==1?"s":""}`,cancelLabel:"Cancel",variant:"archive",action:{type:"bulk-delete",targetIds:Array.from(te),count:Ce}})};return r&&s?j?n.jsx(bd,{meeting:j,onClose:()=>{w(null),e("/admin/dashboard")},onEdit:tt,onDelete:rt,onStatusUpdate:He,currentUser:he,isSalesView:!0}):n.jsx(Wt,{message:"Loading meeting..."}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[l&&n.jsx(Wt,{message:"Loading meetings..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[n.jsx(Pt,{className:"mr-2 text-blue-600"})," Meetings"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:We,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[n.jsx(xn,{className:"mr-2"})," Add Meeting"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[n.jsx(Vt,{className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search meetings",value:f,onChange:Se,className:"w-full outline-none"})]}),n.jsxs("select",{value:x,onChange:Ce=>y(Ce.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[n.jsx("option",{children:"Filter by Status"}),n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:te.size===ze.filter(Ce=>Ce.created_by===he?.id).length&&ze.filter(Ce=>Ce.created_by===he?.id).length>0,onChange:Je,className:"w-4 h-4 cursor-pointer rounded border-gray-300"})}),n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Start Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 w-12",children:te.size>0&&n.jsx("button",{onClick:Oe,className:"text-orange-500 hover:text-orange-700 transition",title:"Archive selected meetings",disabled:ye,children:n.jsx(Zt,{size:18})})})]})}),n.jsx("tbody",{children:ze.length>0?ze.map(Ce=>n.jsxs("tr",{onClick:()=>w(Ce),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4",onClick:fe=>fe.stopPropagation(),children:he?.id===Ce.created_by&&n.jsx("input",{type:"checkbox",checked:te.has(Ce.id),onChange:fe=>{fe.stopPropagation(),Ke(Ce.id)},className:"w-4 h-4 cursor-pointer rounded border-gray-300"})}),n.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:Ce.subject}),n.jsxs("td",{className:"py-3 px-4",children:[Ce.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Ce.lead.title}),Ce.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Ce.account.name}),Ce.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[Ce.contact.first_name," ",Ce.contact.last_name]}),Ce.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Ce.deal.name}),Ce.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:X7e(Ce.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4",children:Z7e(Ce.start_time)}),n.jsxs("td",{className:"py-3 px-4",children:[Ce.meet_assign_to.first_name," ",Ce.meet_assign_to.last_name]}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${J7e(Sb(Ce.status))}`,children:Sb(Ce.status).replace("_"," ")})})]},Ce.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),n.jsx(rn,{totalItems:pe.length,pageSize:E,currentPage:S,onPrev:()=>_(Ce=>Math.max(1,Ce-1)),onNext:()=>_(Ce=>Ce+1),onPageSizeChange:Ce=>{T(Ce),_(1)},pageSizeOptions:[10,20,30,40,50],label:"meetings"}),N&&n.jsx(y1,{onClose:Pe,formData:A,setFormData:L,isEditing:M,onSubmit:lt,isSubmitting:q||Z,users:u}),j&&n.jsx(bd,{meeting:j,onClose:()=>w(null),onEdit:tt,onDelete:rt,onStatusUpdate:He,currentUser:he,isSalesView:!0}),U&&n.jsx(t8e,{open:!0,title:U.title,message:U.message,confirmLabel:U.confirmLabel,variant:U.variant,onConfirm:Ie,onCancel:()=>V(null),loading:Z})]})};function t8e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":i==="archive"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{onClick:c,disabled:o,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),n.jsx("button",{onClick:l,disabled:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${u}`,children:o?"...":s})]})]})})}const b1=[{value:"CEO",label:"CEO"},{value:"Admin",label:"Admin"},{value:"Group Manager",label:"Group Manager"},{value:"Manager",label:"Manager"},{value:"Marketing",label:"Marketing"},{value:"Sales",label:"Sales"}],Tg={firstName:"",lastName:"",email:"",password:"",role:""},n8e={CEO:"bg-purple-100 text-purple-700",ADMIN:"bg-purple-100 text-purple-700",GROUP_MANAGER:"bg-indigo-100 text-indigo-700",MANAGER:"bg-blue-100 text-blue-700",MARKETING:"bg-yellow-100 text-yellow-700",SALES:"bg-green-100 text-green-700"},So=e=>e?e.toString().trim().replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/\s+/g,"_").toUpperCase():"",a8e=e=>{const t=So(e),a=b1.find(s=>So(s.value)===t);return a?a.value:e||""},eL=e=>{const t=So(e),a=b1.find(s=>So(s.value)===t);return a?a.label:typeof e=="string"?e.toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()):"--"},P8=e=>{if(!e)return"--";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",","")},oT=(e,{size:t="sm"}={})=>{const a=So(e),s=n8e[a]||"bg-gray-100 text-gray-700",r=t==="lg"?"px-3 py-1 text-sm":t==="md"?"px-2.5 py-1 text-sm":"px-2 py-1 text-xs";return n.jsx("span",{className:`${r} font-semibold rounded-md inline-flex items-center justify-center ${s}`,children:eL(e)})},s8e=(e,t)=>{const a=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${a}${s}`.toUpperCase()||"U"},D8=e=>[...e].sort((t,a)=>{const s=t.created_at?new Date(t.created_at).getTime():0;return(a.created_at?new Date(a.created_at).getTime():0)-s});function r8e(){const{user:e,loading:t}=qt(),[a,s]=h.useState([]),[r,i]=h.useState(!1),[o,l]=h.useState(""),[c,u]=h.useState(""),[d,f]=h.useState(null),[p,x]=h.useState(!1),[y,N]=h.useState(!1),[v,j]=h.useState(null),[w,S]=h.useState(Tg),[_,E]=h.useState(!1),[T,A]=h.useState(null),[L,M]=h.useState(!1),[F,$]=h.useState(1),[D,q]=h.useState(10),[G,U]=h.useState("Overview"),[V,Z]=h.useState(""),[Y,le]=h.useState(!1),_e=So(e?.role),te=["ADMIN","CEO","GROUP MANAGER","MANAGER"].includes(_e),ae=!t&&te,ye=h.useMemo(()=>{const ue=b1.filter(H=>So(H.value)!=="CEO");return[{label:"Filter by Roles",value:""},{label:"CEO",value:"CEO"},...ue]},[]),Ne=h.useCallback(ue=>{ue&&(s(H=>H.map(K=>K.id===ue?{...K,highlight:!0}:K)),setTimeout(()=>{s(H=>H.map(K=>K.id===ue?{...K,highlight:!1}:K))},2e3))},[]),he=h.useCallback(async()=>{i(!0);try{const ue=await se.get("/users/all"),H=Array.isArray(ue.data)?ue.data:[],K=D8(H);s(K),f(we=>we&&(K.find(ce=>ce.id===we.id)||null)),console.log(ue.data)}catch(ue){console.error("Error fetching users:",ue);const H=ue.response?.data?.detail||"Failed to load users. Please try again later.";W.error(H)}finally{i(!1)}},[]);h.useEffect(()=>{!t&&!te&&e&&W.error("You are not authorized to access User Management.")},[te,t,e]),h.useEffect(()=>{t||!te||he()},[t,te,he]),h.useEffect(()=>{document.title="Users | Sari-Sari CRM"},[]);const ve=h.useMemo(()=>{const ue=o.trim().toLowerCase(),H=So(c);return D8(a.filter(K=>{if(!K)return!1;const we=ue===""||[K.first_name,K.last_name,`${K.first_name||""} ${K.last_name||""}`,K.email,eL(K.role)].filter(Boolean).some(ce=>ce.toString().toLowerCase().includes(ue)),Me=H===""||H==="CEO"&&["CEO","ADMIN"].includes(So(K.role))||So(K.role)===H;return we&&Me}))},[a,o,c]),ne=Math.max(1,Math.ceil(ve.length/D)||1);h.useEffect(()=>{$(1)},[o,c]),h.useEffect(()=>{$(ue=>{const H=Math.max(1,Math.ceil(ve.length/D)||1);return ue>H?H:ue})},[ve.length]);const Se=h.useMemo(()=>{const ue=(F-1)*D;return ve.slice(ue,ue+D)},[ve,F]);ve.length===0||(F-1)*D+1,Math.min(F*D,ve.length);const de=()=>$(ue=>Math.max(ue-1,1)),ke=()=>$(ue=>Math.min(ue+1,ne)),Te=()=>{S(Tg),N(!1),j(null),x(!0)},pe=ue=>{console.log(ue),f(ue),U("Overview"),Z(ue?.is_active?"Active":"Inactive")},ze=ue=>{ue.target.id==="userModalBackdrop"&&!L&&Pe()},Pe=()=>{f(null)},We=(ue,H)=>{S(K=>({...K,[ue]:H}))},tt=()=>{const ue="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let H="";for(let K=0;K<10;K+=1)H+=ue.charAt(Math.floor(Math.random()*ue.length));We("password",H)},lt=()=>{_||L||(x(!1),S(Tg),j(null),N(!1))},Ie=ue=>{S({firstName:ue.first_name||"",lastName:ue.last_name||"",email:ue.email||"",password:"",role:a8e(ue.role)}),N(!0),j(ue.id),x(!0),f(null)},rt=ue=>{A({title:"Delete User",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsxs("span",{className:"font-semibold",children:[ue.first_name," ",ue.last_name]}),"? This action cannot be undone."]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:ue.id,name:`${ue.first_name||""} ${ue.last_name||""}`.trim()||ue.email||"user"}})},He=ue=>{ue.preventDefault();const H=w.firstName.trim(),K=w.lastName.trim(),we=w.email.trim(),Me=w.password.trim(),ce="Sales",oe=!(y&&v);if(!H||!we||!ce){W.warn("Please fill in all required fields.");return}if(oe&&!Me){W.warn("Please fill in all required fields.");return}if(Me&&Me.length<8){W.warn("Password should be at least 8 characters long.");return}const De={first_name:H,last_name:K,email:we,role:ce};console.log(De),(oe||Me)&&(De.password=Me);const $e=`${H} ${K}`.trim(),Xe=oe?"create":"update";A({title:Xe==="create"?"Confirm New User":"Confirm User Update",message:Xe==="create"?n.jsxs("span",{children:["Create user ",n.jsx("span",{className:"font-semibold",children:$e})," with role"," ",n.jsx("span",{className:"font-semibold",children:eL(ce)}),"?"]}):n.jsxs("span",{children:["Save changes for"," ",n.jsx("span",{className:"font-semibold",children:$e||we}),"?"]}),confirmLabel:Xe==="create"?"Create User":"Update User",cancelLabel:"Cancel",variant:"primary",action:{type:Xe,payload:De,targetId:v,name:$e||we}})},Ke=async()=>{if(!T?.action){A(null);return}const{action:ue}=T,{type:H,payload:K,targetId:we,name:Me}=ue;M(!0),(H==="create"||H==="update")&&E(!0);try{if(H==="create"){const oe=(await se.post("/users/createuser",K)).data;await he(),Ne(oe.id),W.success(`User "${Me}" created successfully.`),x(!1),S(Tg),j(null),N(!1)}else if(H==="update"){if(!we)throw new Error("Missing user identifier for update.");const oe=(await se.put(`/users/updateuser/${we}`,K)).data;await he(),f(null),Ne(oe.id),W.success(`User "${Me}" updated successfully.`),x(!1),S(Tg),j(null),N(!1)}else if(H==="delete"){if(!we)throw new Error("Missing user identifier for deletion.");await se.delete(`/users/deleteuser/${we}`),s(ce=>ce.map(oe=>oe.id===we?{...oe,is_active:!1}:oe)),d&&d.id===we&&(f(null),Z("")),W.success(`User "${Me}" deactivated successfully.`)}}catch(ce){console.error("User management error:",ce);const oe=H==="create"?"Failed to create user. Please review the details and try again.":H==="update"?"Failed to update user. Please review the details and try again.":"Failed to delete user. Please try again.",De=ce.response?.data?.detail||oe;W.error(De)}finally{(H==="create"||H==="update")&&E(!1),M(!1),A(null)}},Je=()=>{L||A(null)},Oe=async()=>{if(!d||!V)return;const ue=d.is_active?"Active":"Inactive";if(V===ue)return;const H=V==="Active";le(!0);try{const we=(await se.put(`/users/updateuser/${d.id}`,{is_active:H})).data;s(Me=>Me.map(ce=>ce.id===we.id?we:ce)),f(null),Z(""),W.success(`User status updated to ${V}`)}catch(K){console.error("Failed to update user status:",K);const we=K.response?.data?.detail||"Failed to update user status. Please try again.";W.error(we)}finally{le(!1)}},Ce=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[(r||t||!ae)&&n.jsx(Wt,{}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(iN,{className:"mr-2 text-blue-600"}),"User Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:Te,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(Kn,{className:"mr-2"})," Add User"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Vt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search users",value:o,onChange:ue=>l(ue.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:c,onChange:ue=>u(ue.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:ye.map(ue=>n.jsx("option",{value:ue.value,children:ue.label},ue.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Fullname"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Role"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:3,children:"Loading users..."})}):ve.length===0?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-400",colSpan:4,children:"No users found."})}):Se.map(ue=>n.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${ue.highlight?"bg-green-50":""} ${ue.is_active?"":"opacity-60 bg-gray-50"}`,children:[n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>pe(ue),children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline text-sm",children:[ue.first_name," ",ue.last_name]})}),n.jsx("td",{className:"py-3 px-4 cursor-pointer text-sm",onClick:()=>pe(ue),children:ue.email}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>pe(ue),children:oT(ue.role)}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>pe(ue),children:n.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-md ${ue.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:ue.is_active?"Active":"Inactive"})})]},ue.id))})]})}),n.jsx(rn,{className:"mt-4",totalItems:ve.length,pageSize:D,currentPage:F,onPrev:de,onNext:ke,onPageSizeChange:ue=>{q(ue),$(1)},pageSizeOptions:[10,20,30,40,50],label:"users"})]}),fe=d?n.jsx("div",{id:"userModalBackdrop",onClick:ze,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in p-4 sm:p-6 md:p-8 font-inter relative",children:[n.jsx("div",{className:"flex justify-end w-full",children:n.jsx("button",{onClick:Pe,className:"text-gray-500 hover:text-gray-700 transition mb-5 cursor-pointer",children:n.jsx(Xn,{size:30})})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7 mb-4 lg:mb-6 md:mb-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[d.profile_picture?n.jsx("img",{src:d.profile_picture,alt:`${d.first_name} ${d.last_name}`,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover border border-gray-200 shadow-sm"}):n.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-200 text-gray-700 flex items-center justify-center text-lg sm:text-xl font-semibold border border-gray-200 shadow-sm",children:s8e(d.first_name,d.last_name)}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[d.first_name," ",d.last_name]}),n.jsx("p",{className:"text-sm text-gray-500 break-all",children:d.email})]})]}),oT(d.role,{size:"md"})]}),!["CEO","ADMIN","GROUP MANAGER","GROUP_MANAGER"].includes(d.role.toUpperCase())&&n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Ie(d),disabled:L,children:[n.jsx(ha,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>rt(d),disabled:L,children:[n.jsx(vn,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 mb-6"}),n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview"].map(ue=>n.jsx("button",{onClick:()=>U(ue),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${G===ue?"bg-[#5c636d] text-white border-white":"text-white hover:bg-[#5c636d]"}`,children:ue},ue))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsx("div",{className:"lg:col-span-3",children:G==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:d.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Role:"}),n.jsx("p",{children:oT(d.role,{size:"sm"})})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:d.is_active?"Active":"Inactive"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Auth Provider:"}),n.jsx("p",{children:d.auth_provider?d.auth_provider.toString().replace(/\b\w/g,ue=>ue.toUpperCase()):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:d.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:d.company?.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company Number:"}),n.jsx("p",{children:d.company?.company_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Related to CEO:"}),n.jsx("p",{children:d.manager?`${d.manager.first_name} ${d.manager.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:P8(d.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Login:"}),n.jsx("p",{children:d.last_login?P8(d.last_login):"Never"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Profile Picture:"}),n.jsx("p",{children:d.profile_picture?n.jsx("a",{href:d.profile_picture,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline break-all",children:"View image"}):"N/A"})]})]})})}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsx("div",{className:"flex flex-col gap-2 w-full",children:n.jsxs("button",{type:"button",onClick:()=>{if(!d.email){alert("No email address available");return}const ue=encodeURIComponent(d.email),H=encodeURIComponent(""),K=encodeURIComponent(""),we=`https://mail.google.com/mail/?view=cm&fs=1&to=${ue}&su=${H}&body=${K}`;window.open(we,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(sa,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]})})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:V||(d.is_active?"Active":"Inactive"),onChange:ue=>Z(ue.target.value),children:[n.jsx("option",{value:"Active",children:"Active"}),n.jsx("option",{value:"Inactive",children:"Inactive"})]}),n.jsx("button",{onClick:Oe,disabled:Y||V===(d.is_active?"Active":"Inactive"),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Y||V===(d.is_active?"Active":"Inactive")?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:Y?"Updating...":"Update"})]})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[Ce,fe,n.jsx(i8e,{open:p,isEditing:y,isSubmitting:_,confirmProcessing:L,formData:w,onClose:lt,onSubmit:He,onChange:We,onGeneratePassword:tt}),n.jsx(o8e,{open:!!T,title:T?.title,message:T?.message,confirmLabel:T?.confirmLabel,cancelLabel:T?.cancelLabel,variant:T?.variant,loading:L,onConfirm:Ke,onCancel:Je})]})}function i8e({open:e,isEditing:t,isSubmitting:a,confirmProcessing:s,formData:r,onClose:i,onSubmit:o,onChange:l,onGeneratePassword:c}){if(!e)return null;const u=a||s;return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-lg border border-gray-200 p-6 sm:p-8 relative overflow-y-auto max-h-[90vh]",children:[n.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:u,children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-6 text-center",children:t?"Edit User":"Add New User"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:o,children:[n.jsx(_b,{label:"First Name",value:r.firstName,onChange:d=>l("firstName",d),placeholder:"John",required:!0,disabled:u}),n.jsx(_b,{label:"Last Name",value:r.lastName,onChange:d=>l("lastName",d),placeholder:"Doe",required:!0,disabled:u}),n.jsx(_b,{label:"Email",type:"email",value:r.email,onChange:d=>l("email",d),placeholder:"john.doe@company.com",required:!0,disabled:u||t}),n.jsx(_b,{label:"Role",type:"select",disabled:!0,value:"Sales",onChange:d=>l("role",d),options:[{value:"",label:"Select role"},...b1],required:!0}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Password"}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[n.jsx("input",{type:"text",value:r.password,onChange:d=>l("password",d.target.value),placeholder:t?"Leave blank to keep current password":"Enter or generate password",required:!t,disabled:u,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"}),n.jsx("button",{type:"button",onClick:c,className:"flex items-center justify-center px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-60",disabled:u,children:"Generate"})]}),t?n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Setting a password will reset the user's credentials; leave it blank to keep the current password."}):n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long."})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:i,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:u,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:u,children:a?"Saving...":t?"Update User":"Save User"})]})]})]})})}function _b({label:e,type:t="text",value:a,onChange:s,placeholder:r,options:i=[],required:o=!1,disabled:l=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t==="select"?n.jsx("select",{value:a??"",onChange:c=>s(c.target.value),required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100",children:i.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))}):n.jsx("input",{type:t,value:a??"",onChange:c=>s(c.target.value),placeholder:r,required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"})]})}function o8e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-black hover:bg-gray-800 border border-black";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("div",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function l8e({toggleSidebar:e}){const[t,a]=h.useState(!1),s=h.useRef(null),r=Jt(),{logout:i}=Ks(),{user:o,fetchUser:l}=qt(),c={"/marketing/dashboard":"Dashboard","/marketing/contacts":"Contacts","/marketing/accounts":"Accounts","/marketing/leads":"Leads","/marketing/tasks":"Tasks","/marketing/campaigns":"Campaign","/marketing/templates":"Templates"};h.useEffect(()=>{l()},[]);const u=c[r.pathname]||"Marketing Panel";return h.useEffect(()=>{function d(f){s.current&&!s.current.contains(f.target)&&a(!1)}return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[]),n.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-6 py-3 border-b relative",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:n.jsx(Zf,{className:"text-2xl"})}),n.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:u})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("button",{className:"relative text-gray-600 hover:text-gray-800",children:[n.jsx(cx,{className:"text-xl"}),n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs w-4 h-4 flex items-center justify-center rounded-full",children:"3"})]}),n.jsxs("div",{className:"relative",ref:s,children:[n.jsxs("button",{onClick:()=>a(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[n.jsx("img",{src:o?.profile_picture,alt:"",className:"w-8 aspect-square object-cover rounded-full"}),n.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[o?.first_name," ",o?.last_name]})]}),t&&n.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-gray-100 shadow-lg rounded border z-50",children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("button",{className:"px-4 py-2 text-sm hover:bg-gray-200 text-left",children:"Manage Account"}),n.jsx("div",{className:"border-t my-1"}),n.jsx("button",{onClick:i,className:"px-4 py-2 text-sm bg-red-500 text-white rounded mx-2 my-2 hover:bg-red-600",children:"Logout"})]})})]})]})]})}function c8e(){const[e,t]=h.useState(!1),[a,s]=h.useState(!1),[r,i]=h.useState(!1),[o,l]=h.useState(!1),c=Jt(),{fetchUser:u}=qt();h.useEffect(()=>{u()},[]),h.useEffect(()=>{document.title="Panel | Sari-Sari CRM"},[]);const d="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",f="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition",p=["/marketing/campaigns","/marketing/templates"],x=["/marketing/accounts","/marketing/contacts","/marketing/leads"],y=["/marketing/tasks"],N=p.includes(c.pathname),v=x.includes(c.pathname),j=y.includes(c.pathname);return h.useEffect(()=>{N&&t(!0),v&&s(!0),j&&i(!0)},[N,v,j]),n.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[n.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${o?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[n.jsx("div",{className:"bg-[#fbbf24] text-gray-900 font-bold text-xl px-6 py-4.5 tracking-wide",children:"Marketing CRM"}),n.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[n.jsxs(Ft,{to:"/marketing/dashboard",className:({isActive:w})=>w?d:f,children:[n.jsx(dx,{className:"text-lg"}),n.jsx("span",{children:"Dashboard"})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!a),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(tn,{className:"text-lg"}),"Sales"]}),n.jsx(Lt,{className:`transition-transform ${a?"rotate-180":""}`})]}),a&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(Ft,{to:"/marketing/accounts",className:({isActive:w})=>w?d:f,children:[n.jsx(ra,{})," Accounts"]}),n.jsxs(Ft,{to:"/marketing/contacts",className:({isActive:w})=>w?d:f,children:[n.jsx(nn,{})," Contacts"]}),n.jsxs(Ft,{to:"/marketing/leads",className:({isActive:w})=>w?d:f,children:[n.jsx(Kn,{})," Leads"]})]})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>t(!e),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(mr,{className:"text-lg"}),"Tools"]}),n.jsx(Lt,{className:`transition-transform ${e?"rotate-180":""}`})]}),e&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(Ft,{to:"/marketing/campaigns",className:({isActive:w})=>w?d:f,children:[n.jsx(ek,{})," Campaign"]}),n.jsxs(Ft,{to:"/marketing/templates",className:({isActive:w})=>w?d:f,children:[n.jsx(vL,{})," Templates"]})]})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!r),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(ks,{className:"text-lg"}),"Activity"]}),n.jsx(Lt,{className:`transition-transform ${r?"rotate-180":""}`})]}),r&&n.jsx("div",{className:"ml-6 mt-2 space-y-1",children:n.jsxs(Ft,{to:"/marketing/tasks",className:({isActive:w})=>w?d:f,children:[n.jsx(Qt,{})," Tasks"]})})]})]}),n.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Marketing CRM"]})]}),o&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>l(!1)}),n.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[n.jsx(l8e,{toggleSidebar:()=>l(!o)}),n.jsx("main",{className:"flex-1 p-6 overflow-auto",style:{backgroundColor:"#fffeee"},children:n.jsx(tx,{})})]})]})}function v0(e){return e+.5|0}const td=(e,t,a)=>Math.max(Math.min(e,a),t);function Qg(e){return td(v0(e*2.55),0,255)}function ld(e){return td(v0(e*255),0,255)}function Sl(e){return td(v0(e/2.55)/100,0,1)}function O8(e){return td(v0(e*100),0,100)}const ii={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},tL=[..."0123456789ABCDEF"],d8e=e=>tL[e&15],u8e=e=>tL[(e&240)>>4]+tL[e&15],Ab=e=>(e&240)>>4===(e&15),m8e=e=>Ab(e.r)&&Ab(e.g)&&Ab(e.b)&&Ab(e.a);function f8e(e){var t=e.length,a;return e[0]==="#"&&(t===4||t===5?a={r:255&ii[e[1]]*17,g:255&ii[e[2]]*17,b:255&ii[e[3]]*17,a:t===5?ii[e[4]]*17:255}:(t===7||t===9)&&(a={r:ii[e[1]]<<4|ii[e[2]],g:ii[e[3]]<<4|ii[e[4]],b:ii[e[5]]<<4|ii[e[6]],a:t===9?ii[e[7]]<<4|ii[e[8]]:255})),a}const h8e=(e,t)=>e<255?t(e):"";function g8e(e){var t=m8e(e)?d8e:u8e;return e?"#"+t(e.r)+t(e.g)+t(e.b)+h8e(e.a,t):void 0}const p8e=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function jJ(e,t,a){const s=t*Math.min(a,1-a),r=(i,o=(i+e/30)%12)=>a-s*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function x8e(e,t,a){const s=(r,i=(r+e/60)%6)=>a-a*t*Math.max(Math.min(i,4-i,1),0);return[s(5),s(3),s(1)]}function y8e(e,t,a){const s=jJ(e,1,.5);let r;for(t+a>1&&(r=1/(t+a),t*=r,a*=r),r=0;r<3;r++)s[r]*=1-t-a,s[r]+=t;return s}function b8e(e,t,a,s,r){return e===r?(t-a)/s+(t<a?6:0):t===r?(a-e)/s+2:(e-t)/s+4}function e3(e){const a=e.r/255,s=e.g/255,r=e.b/255,i=Math.max(a,s,r),o=Math.min(a,s,r),l=(i+o)/2;let c,u,d;return i!==o&&(d=i-o,u=l>.5?d/(2-i-o):d/(i+o),c=b8e(a,s,r,d,i),c=c*60+.5),[c|0,u||0,l]}function t3(e,t,a,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,a,s)).map(ld)}function n3(e,t,a){return t3(jJ,e,t,a)}function v8e(e,t,a){return t3(y8e,e,t,a)}function w8e(e,t,a){return t3(x8e,e,t,a)}function CJ(e){return(e%360+360)%360}function N8e(e){const t=p8e.exec(e);let a=255,s;if(!t)return;t[5]!==s&&(a=t[6]?Qg(+t[5]):ld(+t[5]));const r=CJ(+t[2]),i=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?s=v8e(r,i,o):t[1]==="hsv"?s=w8e(r,i,o):s=n3(r,i,o),{r:s[0],g:s[1],b:s[2],a}}function j8e(e,t){var a=e3(e);a[0]=CJ(a[0]+t),a=n3(a),e.r=a[0],e.g=a[1],e.b=a[2]}function C8e(e){if(!e)return;const t=e3(e),a=t[0],s=O8(t[1]),r=O8(t[2]);return e.a<255?`hsla(${a}, ${s}%, ${r}%, ${Sl(e.a)})`:`hsl(${a}, ${s}%, ${r}%)`}const M8={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},I8={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function S8e(){const e={},t=Object.keys(I8),a=Object.keys(M8);let s,r,i,o,l;for(s=0;s<t.length;s++){for(o=l=t[s],r=0;r<a.length;r++)i=a[r],l=l.replace(i,M8[i]);i=parseInt(I8[o],16),e[l]=[i>>16&255,i>>8&255,i&255]}return e}let Tb;function _8e(e){Tb||(Tb=S8e(),Tb.transparent=[0,0,0,0]);const t=Tb[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const A8e=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function T8e(e){const t=A8e.exec(e);let a=255,s,r,i;if(t){if(t[7]!==s){const o=+t[7];a=t[8]?Qg(o):td(o*255,0,255)}return s=+t[1],r=+t[3],i=+t[5],s=255&(t[2]?Qg(s):td(s,0,255)),r=255&(t[4]?Qg(r):td(r,0,255)),i=255&(t[6]?Qg(i):td(i,0,255)),{r:s,g:r,b:i,a}}}function k8e(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${Sl(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const lT=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,nf=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function E8e(e,t,a){const s=nf(Sl(e.r)),r=nf(Sl(e.g)),i=nf(Sl(e.b));return{r:ld(lT(s+a*(nf(Sl(t.r))-s))),g:ld(lT(r+a*(nf(Sl(t.g))-r))),b:ld(lT(i+a*(nf(Sl(t.b))-i))),a:e.a+a*(t.a-e.a)}}function kb(e,t,a){if(e){let s=e3(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*a,t===0?360:1)),s=n3(s),e.r=s[0],e.g=s[1],e.b=s[2]}}function SJ(e,t){return e&&Object.assign(t||{},e)}function $8(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=ld(e[3]))):(t=SJ(e,{r:0,g:0,b:0,a:1}),t.a=ld(t.a)),t}function L8e(e){return e.charAt(0)==="r"?T8e(e):N8e(e)}class Wp{constructor(t){if(t instanceof Wp)return t;const a=typeof t;let s;a==="object"?s=$8(t):a==="string"&&(s=f8e(t)||_8e(t)||L8e(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=SJ(this._rgb);return t&&(t.a=Sl(t.a)),t}set rgb(t){this._rgb=$8(t)}rgbString(){return this._valid?k8e(this._rgb):void 0}hexString(){return this._valid?g8e(this._rgb):void 0}hslString(){return this._valid?C8e(this._rgb):void 0}mix(t,a){if(t){const s=this.rgb,r=t.rgb;let i;const o=a===i?.5:a,l=2*o-1,c=s.a-r.a,u=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;i=1-u,s.r=255&u*s.r+i*r.r+.5,s.g=255&u*s.g+i*r.g+.5,s.b=255&u*s.b+i*r.b+.5,s.a=o*s.a+(1-o)*r.a,this.rgb=s}return this}interpolate(t,a){return t&&(this._rgb=E8e(this._rgb,t._rgb,a)),this}clone(){return new Wp(this.rgb)}alpha(t){return this._rgb.a=ld(t),this}clearer(t){const a=this._rgb;return a.a*=1-t,this}greyscale(){const t=this._rgb,a=v0(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=a,this}opaquer(t){const a=this._rgb;return a.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return kb(this._rgb,2,t),this}darken(t){return kb(this._rgb,2,-t),this}saturate(t){return kb(this._rgb,1,t),this}desaturate(t){return kb(this._rgb,1,-t),this}rotate(t){return j8e(this._rgb,t),this}}function vl(){}const P8e=(()=>{let e=0;return()=>e++})();function Ln(e){return e==null}function ss(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function jn(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Ni(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function ho(e,t){return Ni(e)?e:t}function cn(e,t){return typeof e>"u"?t:e}const D8e=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,_J=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function ta(e,t,a){if(e&&typeof e.call=="function")return e.apply(a,t)}function In(e,t,a,s){let r,i,o;if(ss(e))for(i=e.length,r=0;r<i;r++)t.call(a,e[r],r);else if(jn(e))for(o=Object.keys(e),i=o.length,r=0;r<i;r++)t.call(a,e[o[r]],o[r])}function zw(e,t){let a,s,r,i;if(!e||!t||e.length!==t.length)return!1;for(a=0,s=e.length;a<s;++a)if(r=e[a],i=t[a],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function Fw(e){if(ss(e))return e.map(Fw);if(jn(e)){const t=Object.create(null),a=Object.keys(e),s=a.length;let r=0;for(;r<s;++r)t[a[r]]=Fw(e[a[r]]);return t}return e}function AJ(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function O8e(e,t,a,s){if(!AJ(e))return;const r=t[e],i=a[e];jn(r)&&jn(i)?Gp(r,i,s):t[e]=Fw(i)}function Gp(e,t,a){const s=ss(t)?t:[t],r=s.length;if(!jn(e))return e;a=a||{};const i=a.merger||O8e;let o;for(let l=0;l<r;++l){if(o=s[l],!jn(o))continue;const c=Object.keys(o);for(let u=0,d=c.length;u<d;++u)i(c[u],e,o,a)}return e}function lp(e,t){return Gp(e,t,{merger:M8e})}function M8e(e,t,a){if(!AJ(e))return;const s=t[e],r=a[e];jn(s)&&jn(r)?lp(s,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Fw(r))}const R8={"":e=>e,x:e=>e.x,y:e=>e.y};function I8e(e){const t=e.split("."),a=[];let s="";for(const r of t)s+=r,s.endsWith("\\")?s=s.slice(0,-1)+".":(a.push(s),s="");return a}function $8e(e){const t=I8e(e);return a=>{for(const s of t){if(s==="")break;a=a&&a[s]}return a}}function Gu(e,t){return(R8[t]||(R8[t]=$8e(t)))(e)}function a3(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Vp=e=>typeof e<"u",vd=e=>typeof e=="function",z8=(e,t)=>{if(e.size!==t.size)return!1;for(const a of e)if(!t.has(a))return!1;return!0};function R8e(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Rn=Math.PI,_a=2*Rn,z8e=_a+Rn,Uw=Number.POSITIVE_INFINITY,F8e=Rn/180,rs=Rn/2,Yd=Rn/4,F8=Rn*2/3,TJ=Math.log10,Mo=Math.sign;function cp(e,t,a){return Math.abs(e-t)<a}function U8(e){const t=Math.round(e);e=cp(e,t,e/1e3)?t:e;const a=Math.pow(10,Math.floor(TJ(e))),s=e/a;return(s<=1?1:s<=2?2:s<=5?5:10)*a}function U8e(e){const t=[],a=Math.sqrt(e);let s;for(s=1;s<a;s++)e%s===0&&(t.push(s),t.push(e/s));return a===(a|0)&&t.push(a),t.sort((r,i)=>r-i).pop(),t}function B8e(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function Yp(e){return!B8e(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function H8e(e,t){const a=Math.round(e);return a-t<=e&&a+t>=e}function q8e(e,t,a){let s,r,i;for(s=0,r=e.length;s<r;s++)i=e[s][a],isNaN(i)||(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i))}function Ll(e){return e*(Rn/180)}function W8e(e){return e*(180/Rn)}function B8(e){if(!Ni(e))return;let t=1,a=0;for(;Math.round(e*t)/t!==e;)t*=10,a++;return a}function kJ(e,t){const a=t.x-e.x,s=t.y-e.y,r=Math.sqrt(a*a+s*s);let i=Math.atan2(s,a);return i<-.5*Rn&&(i+=_a),{angle:i,distance:r}}function nL(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function G8e(e,t){return(e-t+z8e)%_a-Rn}function zi(e){return(e%_a+_a)%_a}function Qp(e,t,a,s){const r=zi(e),i=zi(t),o=zi(a),l=zi(i-r),c=zi(o-r),u=zi(r-i),d=zi(r-o);return r===i||r===o||s&&i===o||l>c&&u<d}function Is(e,t,a){return Math.max(t,Math.min(a,e))}function V8e(e){return Is(e,-32768,32767)}function nd(e,t,a,s=1e-6){return e>=Math.min(t,a)-s&&e<=Math.max(t,a)+s}function s3(e,t,a){a=a||(o=>e[o]<t);let s=e.length-1,r=0,i;for(;s-r>1;)i=r+s>>1,a(i)?r=i:s=i;return{lo:r,hi:s}}const pu=(e,t,a,s)=>s3(e,a,s?r=>{const i=e[r][t];return i<a||i===a&&e[r+1][t]===a}:r=>e[r][t]<a),Y8e=(e,t,a)=>s3(e,a,s=>e[s][t]>=a);function Q8e(e,t,a){let s=0,r=e.length;for(;s<r&&e[s]<t;)s++;for(;r>s&&e[r-1]>a;)r--;return s>0||r<e.length?e.slice(s,r):e}const EJ=["push","pop","shift","splice","unshift"];function K8e(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),EJ.forEach(a=>{const s="_onData"+a3(a),r=e[a];Object.defineProperty(e,a,{configurable:!0,enumerable:!1,value(...i){const o=r.apply(this,i);return e._chartjs.listeners.forEach(l=>{typeof l[s]=="function"&&l[s](...i)}),o}})})}function H8(e,t){const a=e._chartjs;if(!a)return;const s=a.listeners,r=s.indexOf(t);r!==-1&&s.splice(r,1),!(s.length>0)&&(EJ.forEach(i=>{delete e[i]}),delete e._chartjs)}function LJ(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const PJ=(function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame})();function DJ(e,t){let a=[],s=!1;return function(...r){a=r,s||(s=!0,PJ.call(window,()=>{s=!1,e.apply(t,a)}))}}function X8e(e,t){let a;return function(...s){return t?(clearTimeout(a),a=setTimeout(e,t,s)):e.apply(this,s),t}}const r3=e=>e==="start"?"left":e==="end"?"right":"center",Ps=(e,t,a)=>e==="start"?t:e==="end"?a:(t+a)/2,Z8e=(e,t,a,s)=>e===(s?"left":"right")?a:e==="center"?(t+a)/2:t;function J8e(e,t,a){const s=t.length;let r=0,i=s;if(e._sorted){const{iScale:o,vScale:l,_parsed:c}=e,u=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,d=o.axis,{min:f,max:p,minDefined:x,maxDefined:y}=o.getUserBounds();if(x){if(r=Math.min(pu(c,d,f).lo,a?s:pu(t,d,o.getPixelForValue(f)).lo),u){const N=c.slice(0,r+1).reverse().findIndex(v=>!Ln(v[l.axis]));r-=Math.max(0,N)}r=Is(r,0,s-1)}if(y){let N=Math.max(pu(c,o.axis,p,!0).hi+1,a?0:pu(t,d,o.getPixelForValue(p),!0).hi+1);if(u){const v=c.slice(N-1).findIndex(j=>!Ln(j[l.axis]));N+=Math.max(0,v)}i=Is(N,r,s)-r}else i=s-r}return{start:r,count:i}}function eBe(e){const{xScale:t,yScale:a,_scaleRanges:s}=e,r={xmin:t.min,xmax:t.max,ymin:a.min,ymax:a.max};if(!s)return e._scaleRanges=r,!0;const i=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==a.min||s.ymax!==a.max;return Object.assign(s,r),i}const Eb=e=>e===0||e===1,q8=(e,t,a)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*_a/a)),W8=(e,t,a)=>Math.pow(2,-10*e)*Math.sin((e-t)*_a/a)+1,dp={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*rs)+1,easeOutSine:e=>Math.sin(e*rs),easeInOutSine:e=>-.5*(Math.cos(Rn*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>Eb(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Eb(e)?e:q8(e,.075,.3),easeOutElastic:e=>Eb(e)?e:W8(e,.075,.3),easeInOutElastic(e){return Eb(e)?e:e<.5?.5*q8(e*2,.1125,.45):.5+.5*W8(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-dp.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?dp.easeInBounce(e*2)*.5:dp.easeOutBounce(e*2-1)*.5+.5};function i3(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function G8(e){return i3(e)?e:new Wp(e)}function cT(e){return i3(e)?e:new Wp(e).saturate(.5).darken(.1).hexString()}const tBe=["x","y","borderWidth","radius","tension"],nBe=["color","borderColor","backgroundColor"];function aBe(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:nBe},numbers:{type:"number",properties:tBe}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function sBe(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const V8=new Map;function rBe(e,t){t=t||{};const a=e+JSON.stringify(t);let s=V8.get(a);return s||(s=new Intl.NumberFormat(e,t),V8.set(a,s)),s}function o3(e,t,a){return rBe(t,a).format(e)}const iBe={values(e){return ss(e)?e:""+e},numeric(e,t,a){if(e===0)return"0";const s=this.chart.options.locale;let r,i=e;if(a.length>1){const u=Math.max(Math.abs(a[0].value),Math.abs(a[a.length-1].value));(u<1e-4||u>1e15)&&(r="scientific"),i=oBe(e,a)}const o=TJ(Math.abs(i)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:r,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),o3(e,s,c)}};function oBe(e,t){let a=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(a)>=1&&e!==Math.floor(e)&&(a=e-Math.floor(e)),a}var OJ={formatters:iBe};function lBe(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,a)=>a.lineWidth,tickColor:(t,a)=>a.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:OJ.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Vu=Object.create(null),aL=Object.create(null);function up(e,t){if(!t)return e;const a=t.split(".");for(let s=0,r=a.length;s<r;++s){const i=a[s];e=e[i]||(e[i]=Object.create(null))}return e}function dT(e,t,a){return typeof t=="string"?Gp(up(e,t),a):Gp(up(e,""),t)}class cBe{constructor(t,a){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,r)=>cT(r.backgroundColor),this.hoverBorderColor=(s,r)=>cT(r.borderColor),this.hoverColor=(s,r)=>cT(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(a)}set(t,a){return dT(this,t,a)}get(t){return up(this,t)}describe(t,a){return dT(aL,t,a)}override(t,a){return dT(Vu,t,a)}route(t,a,s,r){const i=up(this,t),o=up(this,s),l="_"+a;Object.defineProperties(i,{[l]:{value:i[a],writable:!0},[a]:{enumerable:!0,get(){const c=this[l],u=o[r];return jn(c)?Object.assign({},u,c):cn(c,u)},set(c){this[l]=c}}})}apply(t){t.forEach(a=>a(this))}}var Oa=new cBe({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[aBe,sBe,lBe]);function dBe(e){return!e||Ln(e.size)||Ln(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function Y8(e,t,a,s,r){let i=t[r];return i||(i=t[r]=e.measureText(r).width,a.push(r)),i>s&&(s=i),s}function Qd(e,t,a){const s=e.currentDevicePixelRatio,r=a!==0?Math.max(a/2,.5):0;return Math.round((t-r)*s)/s+r}function Q8(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function sL(e,t,a,s){MJ(e,t,a,s,null)}function MJ(e,t,a,s,r){let i,o,l,c,u,d,f,p;const x=t.pointStyle,y=t.rotation,N=t.radius;let v=(y||0)*F8e;if(x&&typeof x=="object"&&(i=x.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){e.save(),e.translate(a,s),e.rotate(v),e.drawImage(x,-x.width/2,-x.height/2,x.width,x.height),e.restore();return}if(!(isNaN(N)||N<=0)){switch(e.beginPath(),x){default:r?e.ellipse(a,s,r/2,N,0,0,_a):e.arc(a,s,N,0,_a),e.closePath();break;case"triangle":d=r?r/2:N,e.moveTo(a+Math.sin(v)*d,s-Math.cos(v)*N),v+=F8,e.lineTo(a+Math.sin(v)*d,s-Math.cos(v)*N),v+=F8,e.lineTo(a+Math.sin(v)*d,s-Math.cos(v)*N),e.closePath();break;case"rectRounded":u=N*.516,c=N-u,o=Math.cos(v+Yd)*c,f=Math.cos(v+Yd)*(r?r/2-u:c),l=Math.sin(v+Yd)*c,p=Math.sin(v+Yd)*(r?r/2-u:c),e.arc(a-f,s-l,u,v-Rn,v-rs),e.arc(a+p,s-o,u,v-rs,v),e.arc(a+f,s+l,u,v,v+rs),e.arc(a-p,s+o,u,v+rs,v+Rn),e.closePath();break;case"rect":if(!y){c=Math.SQRT1_2*N,d=r?r/2:c,e.rect(a-d,s-c,2*d,2*c);break}v+=Yd;case"rectRot":f=Math.cos(v)*(r?r/2:N),o=Math.cos(v)*N,l=Math.sin(v)*N,p=Math.sin(v)*(r?r/2:N),e.moveTo(a-f,s-l),e.lineTo(a+p,s-o),e.lineTo(a+f,s+l),e.lineTo(a-p,s+o),e.closePath();break;case"crossRot":v+=Yd;case"cross":f=Math.cos(v)*(r?r/2:N),o=Math.cos(v)*N,l=Math.sin(v)*N,p=Math.sin(v)*(r?r/2:N),e.moveTo(a-f,s-l),e.lineTo(a+f,s+l),e.moveTo(a+p,s-o),e.lineTo(a-p,s+o);break;case"star":f=Math.cos(v)*(r?r/2:N),o=Math.cos(v)*N,l=Math.sin(v)*N,p=Math.sin(v)*(r?r/2:N),e.moveTo(a-f,s-l),e.lineTo(a+f,s+l),e.moveTo(a+p,s-o),e.lineTo(a-p,s+o),v+=Yd,f=Math.cos(v)*(r?r/2:N),o=Math.cos(v)*N,l=Math.sin(v)*N,p=Math.sin(v)*(r?r/2:N),e.moveTo(a-f,s-l),e.lineTo(a+f,s+l),e.moveTo(a+p,s-o),e.lineTo(a-p,s+o);break;case"line":o=r?r/2:Math.cos(v)*N,l=Math.sin(v)*N,e.moveTo(a-o,s-l),e.lineTo(a+o,s+l);break;case"dash":e.moveTo(a,s),e.lineTo(a+Math.cos(v)*(r?r/2:N),s+Math.sin(v)*N);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function Kp(e,t,a){return a=a||.5,!t||e&&e.x>t.left-a&&e.x<t.right+a&&e.y>t.top-a&&e.y<t.bottom+a}function l3(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function c3(e){e.restore()}function uBe(e,t,a,s,r){if(!t)return e.lineTo(a.x,a.y);if(r==="middle"){const i=(t.x+a.x)/2;e.lineTo(i,t.y),e.lineTo(i,a.y)}else r==="after"!=!!s?e.lineTo(t.x,a.y):e.lineTo(a.x,t.y);e.lineTo(a.x,a.y)}function mBe(e,t,a,s){if(!t)return e.lineTo(a.x,a.y);e.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?a.cp2x:a.cp1x,s?a.cp2y:a.cp1y,a.x,a.y)}function fBe(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Ln(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function hBe(e,t,a,s,r){if(r.strikethrough||r.underline){const i=e.measureText(s),o=t-i.actualBoundingBoxLeft,l=t+i.actualBoundingBoxRight,c=a-i.actualBoundingBoxAscent,u=a+i.actualBoundingBoxDescent,d=r.strikethrough?(c+u)/2:u;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(o,d),e.lineTo(l,d),e.stroke()}}function gBe(e,t){const a=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=a}function Xp(e,t,a,s,r,i={}){const o=ss(t)?t:[t],l=i.strokeWidth>0&&i.strokeColor!=="";let c,u;for(e.save(),e.font=r.string,fBe(e,i),c=0;c<o.length;++c)u=o[c],i.backdrop&&gBe(e,i.backdrop),l&&(i.strokeColor&&(e.strokeStyle=i.strokeColor),Ln(i.strokeWidth)||(e.lineWidth=i.strokeWidth),e.strokeText(u,a,s,i.maxWidth)),e.fillText(u,a,s,i.maxWidth),hBe(e,a,s,u,i),s+=Number(r.lineHeight);e.restore()}function Bw(e,t){const{x:a,y:s,w:r,h:i,radius:o}=t;e.arc(a+o.topLeft,s+o.topLeft,o.topLeft,1.5*Rn,Rn,!0),e.lineTo(a,s+i-o.bottomLeft),e.arc(a+o.bottomLeft,s+i-o.bottomLeft,o.bottomLeft,Rn,rs,!0),e.lineTo(a+r-o.bottomRight,s+i),e.arc(a+r-o.bottomRight,s+i-o.bottomRight,o.bottomRight,rs,0,!0),e.lineTo(a+r,s+o.topRight),e.arc(a+r-o.topRight,s+o.topRight,o.topRight,0,-rs,!0),e.lineTo(a+o.topLeft,s)}const pBe=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,xBe=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function yBe(e,t){const a=(""+e).match(pBe);if(!a||a[1]==="normal")return t*1.2;switch(e=+a[2],a[3]){case"px":return e;case"%":e/=100;break}return t*e}const bBe=e=>+e||0;function d3(e,t){const a={},s=jn(t),r=s?Object.keys(t):t,i=jn(e)?s?o=>cn(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of r)a[o]=bBe(i(o));return a}function IJ(e){return d3(e,{top:"y",right:"x",bottom:"y",left:"x"})}function jf(e){return d3(e,["topLeft","topRight","bottomLeft","bottomRight"])}function ji(e){const t=IJ(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function $s(e,t){e=e||{},t=t||Oa.font;let a=cn(e.size,t.size);typeof a=="string"&&(a=parseInt(a,10));let s=cn(e.style,t.style);s&&!(""+s).match(xBe)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const r={family:cn(e.family,t.family),lineHeight:yBe(cn(e.lineHeight,t.lineHeight),a),size:a,style:s,weight:cn(e.weight,t.weight),string:""};return r.string=dBe(r),r}function Lb(e,t,a,s){let r,i,o;for(r=0,i=e.length;r<i;++r)if(o=e[r],o!==void 0&&o!==void 0)return o}function vBe(e,t,a){const{min:s,max:r}=e,i=_J(t,(r-s)/2),o=(l,c)=>a&&l===0?0:l+c;return{min:o(s,-Math.abs(i)),max:o(r,i)}}function om(e,t){return Object.assign(Object.create(e),t)}function u3(e,t=[""],a,s,r=()=>e[0]){const i=a||e;typeof s>"u"&&(s=FJ("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:s,_getTarget:r,override:l=>u3([l,...e],t,i,s)};return new Proxy(o,{deleteProperty(l,c){return delete l[c],delete l._keys,delete e[0][c],!0},get(l,c){return RJ(l,c,()=>TBe(c,t,e,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(l,c){return X8(l).includes(c)},ownKeys(l){return X8(l)},set(l,c,u){const d=l._storage||(l._storage=r());return l[c]=d[c]=u,delete l._keys,!0}})}function qf(e,t,a,s){const r={_cacheable:!1,_proxy:e,_context:t,_subProxy:a,_stack:new Set,_descriptors:$J(e,s),setContext:i=>qf(e,i,a,s),override:i=>qf(e.override(i),t,a,s)};return new Proxy(r,{deleteProperty(i,o){return delete i[o],delete e[o],!0},get(i,o,l){return RJ(i,o,()=>NBe(i,o,l))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(i,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(i,o,l){return e[o]=l,delete i[o],!0}})}function $J(e,t={scriptable:!0,indexable:!0}){const{_scriptable:a=t.scriptable,_indexable:s=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:a,indexable:s,isScriptable:vd(a)?a:()=>a,isIndexable:vd(s)?s:()=>s}}const wBe=(e,t)=>e?e+a3(t):t,m3=(e,t)=>jn(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function RJ(e,t,a){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const s=a();return e[t]=s,s}function NBe(e,t,a){const{_proxy:s,_context:r,_subProxy:i,_descriptors:o}=e;let l=s[t];return vd(l)&&o.isScriptable(t)&&(l=jBe(t,l,e,a)),ss(l)&&l.length&&(l=CBe(t,l,e,o.isIndexable)),m3(t,l)&&(l=qf(l,r,i&&i[t],o)),l}function jBe(e,t,a,s){const{_proxy:r,_context:i,_subProxy:o,_stack:l}=a;if(l.has(e))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+e);l.add(e);let c=t(i,o||s);return l.delete(e),m3(e,c)&&(c=f3(r._scopes,r,e,c)),c}function CBe(e,t,a,s){const{_proxy:r,_context:i,_subProxy:o,_descriptors:l}=a;if(typeof i.index<"u"&&s(e))return t[i.index%t.length];if(jn(t[0])){const c=t,u=r._scopes.filter(d=>d!==c);t=[];for(const d of c){const f=f3(u,r,e,d);t.push(qf(f,i,o&&o[e],l))}}return t}function zJ(e,t,a){return vd(e)?e(t,a):e}const SBe=(e,t)=>e===!0?t:typeof e=="string"?Gu(t,e):void 0;function _Be(e,t,a,s,r){for(const i of t){const o=SBe(a,i);if(o){e.add(o);const l=zJ(o._fallback,a,r);if(typeof l<"u"&&l!==a&&l!==s)return l}else if(o===!1&&typeof s<"u"&&a!==s)return null}return!1}function f3(e,t,a,s){const r=t._rootScopes,i=zJ(t._fallback,a,s),o=[...e,...r],l=new Set;l.add(s);let c=K8(l,o,a,i||a,s);return c===null||typeof i<"u"&&i!==a&&(c=K8(l,o,i,c,s),c===null)?!1:u3(Array.from(l),[""],r,i,()=>ABe(t,a,s))}function K8(e,t,a,s,r){for(;a;)a=_Be(e,t,a,s,r);return a}function ABe(e,t,a){const s=e._getTarget();t in s||(s[t]={});const r=s[t];return ss(r)&&jn(a)?a:r||{}}function TBe(e,t,a,s){let r;for(const i of t)if(r=FJ(wBe(i,e),a),typeof r<"u")return m3(e,r)?f3(a,s,e,r):r}function FJ(e,t){for(const a of t){if(!a)continue;const s=a[e];if(typeof s<"u")return s}}function X8(e){let t=e._keys;return t||(t=e._keys=kBe(e._scopes)),t}function kBe(e){const t=new Set;for(const a of e)for(const s of Object.keys(a).filter(r=>!r.startsWith("_")))t.add(s);return Array.from(t)}const EBe=Number.EPSILON||1e-14,Wf=(e,t)=>t<e.length&&!e[t].skip&&e[t],UJ=e=>e==="x"?"y":"x";function LBe(e,t,a,s){const r=e.skip?t:e,i=t,o=a.skip?t:a,l=nL(i,r),c=nL(o,i);let u=l/(l+c),d=c/(l+c);u=isNaN(u)?0:u,d=isNaN(d)?0:d;const f=s*u,p=s*d;return{previous:{x:i.x-f*(o.x-r.x),y:i.y-f*(o.y-r.y)},next:{x:i.x+p*(o.x-r.x),y:i.y+p*(o.y-r.y)}}}function PBe(e,t,a){const s=e.length;let r,i,o,l,c,u=Wf(e,0);for(let d=0;d<s-1;++d)if(c=u,u=Wf(e,d+1),!(!c||!u)){if(cp(t[d],0,EBe)){a[d]=a[d+1]=0;continue}r=a[d]/t[d],i=a[d+1]/t[d],l=Math.pow(r,2)+Math.pow(i,2),!(l<=9)&&(o=3/Math.sqrt(l),a[d]=r*o*t[d],a[d+1]=i*o*t[d])}}function DBe(e,t,a="x"){const s=UJ(a),r=e.length;let i,o,l,c=Wf(e,0);for(let u=0;u<r;++u){if(o=l,l=c,c=Wf(e,u+1),!l)continue;const d=l[a],f=l[s];o&&(i=(d-o[a])/3,l[`cp1${a}`]=d-i,l[`cp1${s}`]=f-i*t[u]),c&&(i=(c[a]-d)/3,l[`cp2${a}`]=d+i,l[`cp2${s}`]=f+i*t[u])}}function OBe(e,t="x"){const a=UJ(t),s=e.length,r=Array(s).fill(0),i=Array(s);let o,l,c,u=Wf(e,0);for(o=0;o<s;++o)if(l=c,c=u,u=Wf(e,o+1),!!c){if(u){const d=u[t]-c[t];r[o]=d!==0?(u[a]-c[a])/d:0}i[o]=l?u?Mo(r[o-1])!==Mo(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}PBe(e,r,i),DBe(e,i,t)}function Pb(e,t,a){return Math.max(Math.min(e,a),t)}function MBe(e,t){let a,s,r,i,o,l=Kp(e[0],t);for(a=0,s=e.length;a<s;++a)o=i,i=l,l=a<s-1&&Kp(e[a+1],t),i&&(r=e[a],o&&(r.cp1x=Pb(r.cp1x,t.left,t.right),r.cp1y=Pb(r.cp1y,t.top,t.bottom)),l&&(r.cp2x=Pb(r.cp2x,t.left,t.right),r.cp2y=Pb(r.cp2y,t.top,t.bottom)))}function IBe(e,t,a,s,r){let i,o,l,c;if(t.spanGaps&&(e=e.filter(u=>!u.skip)),t.cubicInterpolationMode==="monotone")OBe(e,r);else{let u=s?e[e.length-1]:e[0];for(i=0,o=e.length;i<o;++i)l=e[i],c=LBe(u,l,e[Math.min(i+1,o-(s?0:1))%o],t.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,u=l}t.capBezierPoints&&MBe(e,a)}function h3(){return typeof window<"u"&&typeof document<"u"}function g3(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Hw(e,t,a){let s;return typeof e=="string"?(s=parseInt(e,10),e.indexOf("%")!==-1&&(s=s/100*t.parentNode[a])):s=e,s}const v1=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function $Be(e,t){return v1(e).getPropertyValue(t)}const RBe=["top","right","bottom","left"];function Su(e,t,a){const s={};a=a?"-"+a:"";for(let r=0;r<4;r++){const i=RBe[r];s[i]=parseFloat(e[t+"-"+i+a])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const zBe=(e,t,a)=>(e>0||t>0)&&(!a||!a.shadowRoot);function FBe(e,t){const a=e.touches,s=a&&a.length?a[0]:e,{offsetX:r,offsetY:i}=s;let o=!1,l,c;if(zBe(r,i,e.target))l=r,c=i;else{const u=t.getBoundingClientRect();l=s.clientX-u.left,c=s.clientY-u.top,o=!0}return{x:l,y:c,box:o}}function au(e,t){if("native"in e)return e;const{canvas:a,currentDevicePixelRatio:s}=t,r=v1(a),i=r.boxSizing==="border-box",o=Su(r,"padding"),l=Su(r,"border","width"),{x:c,y:u,box:d}=FBe(e,a),f=o.left+(d&&l.left),p=o.top+(d&&l.top);let{width:x,height:y}=t;return i&&(x-=o.width+l.width,y-=o.height+l.height),{x:Math.round((c-f)/x*a.width/s),y:Math.round((u-p)/y*a.height/s)}}function UBe(e,t,a){let s,r;if(t===void 0||a===void 0){const i=e&&g3(e);if(!i)t=e.clientWidth,a=e.clientHeight;else{const o=i.getBoundingClientRect(),l=v1(i),c=Su(l,"border","width"),u=Su(l,"padding");t=o.width-u.width-c.width,a=o.height-u.height-c.height,s=Hw(l.maxWidth,i,"clientWidth"),r=Hw(l.maxHeight,i,"clientHeight")}}return{width:t,height:a,maxWidth:s||Uw,maxHeight:r||Uw}}const ad=e=>Math.round(e*10)/10;function BBe(e,t,a,s){const r=v1(e),i=Su(r,"margin"),o=Hw(r.maxWidth,e,"clientWidth")||Uw,l=Hw(r.maxHeight,e,"clientHeight")||Uw,c=UBe(e,t,a);let{width:u,height:d}=c;if(r.boxSizing==="content-box"){const p=Su(r,"border","width"),x=Su(r,"padding");u-=x.width+p.width,d-=x.height+p.height}return u=Math.max(0,u-i.width),d=Math.max(0,s?u/s:d-i.height),u=ad(Math.min(u,o,c.maxWidth)),d=ad(Math.min(d,l,c.maxHeight)),u&&!d&&(d=ad(u/2)),(t!==void 0||a!==void 0)&&s&&c.height&&d>c.height&&(d=c.height,u=ad(Math.floor(d*s))),{width:u,height:d}}function Z8(e,t,a){const s=t||1,r=ad(e.height*s),i=ad(e.width*s);e.height=ad(e.height),e.width=ad(e.width);const o=e.canvas;return o.style&&(a||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==s||o.height!==r||o.width!==i?(e.currentDevicePixelRatio=s,o.height=r,o.width=i,e.ctx.setTransform(s,0,0,s,0,0),!0):!1}const HBe=(function(){let e=!1;try{const t={get passive(){return e=!0,!1}};h3()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e})();function J8(e,t){const a=$Be(e,t),s=a&&a.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function su(e,t,a,s){return{x:e.x+a*(t.x-e.x),y:e.y+a*(t.y-e.y)}}function qBe(e,t,a,s){return{x:e.x+a*(t.x-e.x),y:s==="middle"?a<.5?e.y:t.y:s==="after"?a<1?e.y:t.y:a>0?t.y:e.y}}function WBe(e,t,a,s){const r={x:e.cp2x,y:e.cp2y},i={x:t.cp1x,y:t.cp1y},o=su(e,r,a),l=su(r,i,a),c=su(i,t,a),u=su(o,l,a),d=su(l,c,a);return su(u,d,a)}const GBe=function(e,t){return{x(a){return e+e+t-a},setWidth(a){t=a},textAlign(a){return a==="center"?a:a==="right"?"left":"right"},xPlus(a,s){return a-s},leftForLtr(a,s){return a-s}}},VBe=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function Cf(e,t,a){return e?GBe(t,a):VBe()}function BJ(e,t){let a,s;(t==="ltr"||t==="rtl")&&(a=e.canvas.style,s=[a.getPropertyValue("direction"),a.getPropertyPriority("direction")],a.setProperty("direction",t,"important"),e.prevTextDirection=s)}function HJ(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function qJ(e){return e==="angle"?{between:Qp,compare:G8e,normalize:zi}:{between:nd,compare:(t,a)=>t-a,normalize:t=>t}}function eB({start:e,end:t,count:a,loop:s,style:r}){return{start:e%a,end:t%a,loop:s&&(t-e+1)%a===0,style:r}}function YBe(e,t,a){const{property:s,start:r,end:i}=a,{between:o,normalize:l}=qJ(s),c=t.length;let{start:u,end:d,loop:f}=e,p,x;if(f){for(u+=c,d+=c,p=0,x=c;p<x&&o(l(t[u%c][s]),r,i);++p)u--,d--;u%=c,d%=c}return d<u&&(d+=c),{start:u,end:d,loop:f,style:e.style}}function QBe(e,t,a){if(!a)return[e];const{property:s,start:r,end:i}=a,o=t.length,{compare:l,between:c,normalize:u}=qJ(s),{start:d,end:f,loop:p,style:x}=YBe(e,t,a),y=[];let N=!1,v=null,j,w,S;const _=()=>c(r,S,j)&&l(r,S)!==0,E=()=>l(i,j)===0||c(i,S,j),T=()=>N||_(),A=()=>!N||E();for(let L=d,M=d;L<=f;++L)w=t[L%o],!w.skip&&(j=u(w[s]),j!==S&&(N=c(j,r,i),v===null&&T()&&(v=l(j,r)===0?L:M),v!==null&&A()&&(y.push(eB({start:v,end:L,loop:p,count:o,style:x})),v=null),M=L,S=j));return v!==null&&y.push(eB({start:v,end:f,loop:p,count:o,style:x})),y}function KBe(e,t){const a=[],s=e.segments;for(let r=0;r<s.length;r++){const i=QBe(s[r],e.points,t);i.length&&a.push(...i)}return a}function XBe(e,t,a,s){let r=0,i=t-1;if(a&&!s)for(;r<t&&!e[r].skip;)r++;for(;r<t&&e[r].skip;)r++;for(r%=t,a&&(i+=r);i>r&&e[i%t].skip;)i--;return i%=t,{start:r,end:i}}function ZBe(e,t,a,s){const r=e.length,i=[];let o=t,l=e[t],c;for(c=t+1;c<=a;++c){const u=e[c%r];u.skip||u.stop?l.skip||(s=!1,i.push({start:t%r,end:(c-1)%r,loop:s}),t=o=u.stop?c:null):(o=c,l.skip&&(t=c)),l=u}return o!==null&&i.push({start:t%r,end:o%r,loop:s}),i}function JBe(e,t){const a=e.points,s=e.options.spanGaps,r=a.length;if(!r)return[];const i=!!e._loop,{start:o,end:l}=XBe(a,r,i,s);if(s===!0)return tB(e,[{start:o,end:l,loop:i}],a,t);const c=l<o?l+r:l,u=!!e._fullLoop&&o===0&&l===r-1;return tB(e,ZBe(a,o,c,u),a,t)}function tB(e,t,a,s){return!s||!s.setContext||!a?t:eHe(e,t,a,s)}function eHe(e,t,a,s){const r=e._chart.getContext(),i=nB(e.options),{_datasetIndex:o,options:{spanGaps:l}}=e,c=a.length,u=[];let d=i,f=t[0].start,p=f;function x(y,N,v,j){const w=l?-1:1;if(y!==N){for(y+=c;a[y%c].skip;)y-=w;for(;a[N%c].skip;)N+=w;y%c!==N%c&&(u.push({start:y%c,end:N%c,loop:v,style:j}),d=j,f=N%c)}}for(const y of t){f=l?f:y.start;let N=a[f%c],v;for(p=f+1;p<=y.end;p++){const j=a[p%c];v=nB(s.setContext(om(r,{type:"segment",p0:N,p1:j,p0DataIndex:(p-1)%c,p1DataIndex:p%c,datasetIndex:o}))),tHe(v,d)&&x(f,p-1,y.loop,d),N=j,d=v}f<p-1&&x(f,p-1,y.loop,d)}return u}function nB(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function tHe(e,t){if(!t)return!1;const a=[],s=function(r,i){return i3(i)?(a.includes(i)||a.push(i),a.indexOf(i)):i};return JSON.stringify(e,s)!==JSON.stringify(t,s)}function Db(e,t,a){return e.options.clip?e[a]:t[a]}function nHe(e,t){const{xScale:a,yScale:s}=e;return a&&s?{left:Db(a,t,"left"),right:Db(a,t,"right"),top:Db(s,t,"top"),bottom:Db(s,t,"bottom")}:t}function aHe(e,t){const a=t._clip;if(a.disabled)return!1;const s=nHe(t,e.chartArea);return{left:a.left===!1?0:s.left-(a.left===!0?0:a.left),right:a.right===!1?e.width:s.right+(a.right===!0?0:a.right),top:a.top===!1?0:s.top-(a.top===!0?0:a.top),bottom:a.bottom===!1?e.height:s.bottom+(a.bottom===!0?0:a.bottom)}}class sHe{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,a,s,r){const i=a.listeners[r],o=a.duration;i.forEach(l=>l({chart:t,initial:a.initial,numSteps:o,currentStep:Math.min(s-a.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=PJ.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let a=0;this._charts.forEach((s,r)=>{if(!s.running||!s.items.length)return;const i=s.items;let o=i.length-1,l=!1,c;for(;o>=0;--o)c=i[o],c._active?(c._total>s.duration&&(s.duration=c._total),c.tick(t),l=!0):(i[o]=i[i.length-1],i.pop());l&&(r.draw(),this._notify(r,s,t,"progress")),i.length||(s.running=!1,this._notify(r,s,t,"complete"),s.initial=!1),a+=i.length}),this._lastDate=t,a===0&&(this._running=!1)}_getAnims(t){const a=this._charts;let s=a.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},a.set(t,s)),s}listen(t,a,s){this._getAnims(t).listeners[a].push(s)}add(t,a){!a||!a.length||this._getAnims(t).items.push(...a)}has(t){return this._getAnims(t).items.length>0}start(t){const a=this._charts.get(t);a&&(a.running=!0,a.start=Date.now(),a.duration=a.items.reduce((s,r)=>Math.max(s,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const a=this._charts.get(t);return!(!a||!a.running||!a.items.length)}stop(t){const a=this._charts.get(t);if(!a||!a.items.length)return;const s=a.items;let r=s.length-1;for(;r>=0;--r)s[r].cancel();a.items=[],this._notify(t,a,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Nl=new sHe;const aB="transparent",rHe={boolean(e,t,a){return a>.5?t:e},color(e,t,a){const s=G8(e||aB),r=s.valid&&G8(t||aB);return r&&r.valid?r.mix(s,a).hexString():t},number(e,t,a){return e+(t-e)*a}};class iHe{constructor(t,a,s,r){const i=a[s];r=Lb([t.to,r,i,t.from]);const o=Lb([t.from,i,r]);this._active=!0,this._fn=t.fn||rHe[t.type||typeof o],this._easing=dp[t.easing]||dp.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=a,this._prop=s,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(t,a,s){if(this._active){this._notify(!1);const r=this._target[this._prop],i=s-this._start,o=this._duration-i;this._start=s,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=i,this._loop=!!t.loop,this._to=Lb([t.to,a,r,t.from]),this._from=Lb([t.from,r,a])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const a=t-this._start,s=this._duration,r=this._prop,i=this._from,o=this._loop,l=this._to;let c;if(this._active=i!==l&&(o||a<s),!this._active){this._target[r]=l,this._notify(!0);return}if(a<0){this._target[r]=i;return}c=a/s%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[r]=this._fn(i,l,c)}wait(){const t=this._promises||(this._promises=[]);return new Promise((a,s)=>{t.push({res:a,rej:s})})}_notify(t){const a=t?"res":"rej",s=this._promises||[];for(let r=0;r<s.length;r++)s[r][a]()}}class WJ{constructor(t,a){this._chart=t,this._properties=new Map,this.configure(a)}configure(t){if(!jn(t))return;const a=Object.keys(Oa.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const i=t[r];if(!jn(i))return;const o={};for(const l of a)o[l]=i[l];(ss(i.properties)&&i.properties||[r]).forEach(l=>{(l===r||!s.has(l))&&s.set(l,o)})})}_animateOptions(t,a){const s=a.options,r=lHe(t,s);if(!r)return[];const i=this._createAnimations(r,s);return s.$shared&&oHe(t.options.$animations,s).then(()=>{t.options=s},()=>{}),i}_createAnimations(t,a){const s=this._properties,r=[],i=t.$animations||(t.$animations={}),o=Object.keys(a),l=Date.now();let c;for(c=o.length-1;c>=0;--c){const u=o[c];if(u.charAt(0)==="$")continue;if(u==="options"){r.push(...this._animateOptions(t,a));continue}const d=a[u];let f=i[u];const p=s.get(u);if(f)if(p&&f.active()){f.update(p,d,l);continue}else f.cancel();if(!p||!p.duration){t[u]=d;continue}i[u]=f=new iHe(p,t,u,d),r.push(f)}return r}update(t,a){if(this._properties.size===0){Object.assign(t,a);return}const s=this._createAnimations(t,a);if(s.length)return Nl.add(this._chart,s),!0}}function oHe(e,t){const a=[],s=Object.keys(t);for(let r=0;r<s.length;r++){const i=e[s[r]];i&&i.active()&&a.push(i.wait())}return Promise.all(a)}function lHe(e,t){if(!t)return;let a=e.options;if(!a){e.options=t;return}return a.$shared&&(e.options=a=Object.assign({},a,{$shared:!1,$animations:{}})),a}function sB(e,t){const a=e&&e.options||{},s=a.reverse,r=a.min===void 0?t:0,i=a.max===void 0?t:0;return{start:s?i:r,end:s?r:i}}function cHe(e,t,a){if(a===!1)return!1;const s=sB(e,a),r=sB(t,a);return{top:r.end,right:s.end,bottom:r.start,left:s.start}}function dHe(e){let t,a,s,r;return jn(e)?(t=e.top,a=e.right,s=e.bottom,r=e.left):t=a=s=r=e,{top:t,right:a,bottom:s,left:r,disabled:e===!1}}function GJ(e,t){const a=[],s=e._getSortedDatasetMetas(t);let r,i;for(r=0,i=s.length;r<i;++r)a.push(s[r].index);return a}function rB(e,t,a,s={}){const r=e.keys,i=s.mode==="single";let o,l,c,u;if(t===null)return;let d=!1;for(o=0,l=r.length;o<l;++o){if(c=+r[o],c===a){if(d=!0,s.all)continue;break}u=e.values[c],Ni(u)&&(i||t===0||Mo(t)===Mo(u))&&(t+=u)}return!d&&!s.all?0:t}function uHe(e,t){const{iScale:a,vScale:s}=t,r=a.axis==="x"?"x":"y",i=s.axis==="x"?"x":"y",o=Object.keys(e),l=new Array(o.length);let c,u,d;for(c=0,u=o.length;c<u;++c)d=o[c],l[c]={[r]:d,[i]:e[d]};return l}function uT(e,t){const a=e&&e.options.stacked;return a||a===void 0&&t.stack!==void 0}function mHe(e,t,a){return`${e.id}.${t.id}.${a.stack||a.type}`}function fHe(e){const{min:t,max:a,minDefined:s,maxDefined:r}=e.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:r?a:Number.POSITIVE_INFINITY}}function hHe(e,t,a){const s=e[t]||(e[t]={});return s[a]||(s[a]={})}function iB(e,t,a,s){for(const r of t.getMatchingVisibleMetas(s).reverse()){const i=e[r.index];if(a&&i>0||!a&&i<0)return r.index}return null}function oB(e,t){const{chart:a,_cachedMeta:s}=e,r=a._stacks||(a._stacks={}),{iScale:i,vScale:o,index:l}=s,c=i.axis,u=o.axis,d=mHe(i,o,s),f=t.length;let p;for(let x=0;x<f;++x){const y=t[x],{[c]:N,[u]:v}=y,j=y._stacks||(y._stacks={});p=j[u]=hHe(r,d,N),p[l]=v,p._top=iB(p,o,!0,s.type),p._bottom=iB(p,o,!1,s.type);const w=p._visualValues||(p._visualValues={});w[l]=v}}function mT(e,t){const a=e.scales;return Object.keys(a).filter(s=>a[s].axis===t).shift()}function gHe(e,t){return om(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function pHe(e,t,a){return om(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:a,index:t,mode:"default",type:"data"})}function kg(e,t){const a=e.controller.index,s=e.vScale&&e.vScale.axis;if(s){t=t||e._parsed;for(const r of t){const i=r._stacks;if(!i||i[s]===void 0||i[s][a]===void 0)return;delete i[s][a],i[s]._visualValues!==void 0&&i[s]._visualValues[a]!==void 0&&delete i[s]._visualValues[a]}}}const fT=e=>e==="reset"||e==="none",lB=(e,t)=>t?e:Object.assign({},e),xHe=(e,t,a)=>e&&!t.hidden&&t._stacked&&{keys:GJ(a,!0),values:null};class w1{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,a){this.chart=t,this._ctx=t.ctx,this.index=a,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=uT(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&kg(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,a=this._cachedMeta,s=this.getDataset(),r=(f,p,x,y)=>f==="x"?p:f==="r"?y:x,i=a.xAxisID=cn(s.xAxisID,mT(t,"x")),o=a.yAxisID=cn(s.yAxisID,mT(t,"y")),l=a.rAxisID=cn(s.rAxisID,mT(t,"r")),c=a.indexAxis,u=a.iAxisID=r(c,i,o,l),d=a.vAxisID=r(c,o,i,l);a.xScale=this.getScaleForId(i),a.yScale=this.getScaleForId(o),a.rScale=this.getScaleForId(l),a.iScale=this.getScaleForId(u),a.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const a=this._cachedMeta;return t===a.iScale?a.vScale:a.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&H8(this._data,this),t._stacked&&kg(t)}_dataCheck(){const t=this.getDataset(),a=t.data||(t.data=[]),s=this._data;if(jn(a)){const r=this._cachedMeta;this._data=uHe(a,r)}else if(s!==a){if(s){H8(s,this);const r=this._cachedMeta;kg(r),r._parsed=[]}a&&Object.isExtensible(a)&&K8e(a,this),this._syncList=[],this._data=a}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const a=this._cachedMeta,s=this.getDataset();let r=!1;this._dataCheck();const i=a._stacked;a._stacked=uT(a.vScale,a),a.stack!==s.stack&&(r=!0,kg(a),a.stack=s.stack),this._resyncElements(t),(r||i!==a._stacked)&&(oB(this,a._parsed),a._stacked=uT(a.vScale,a))}configure(){const t=this.chart.config,a=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),a,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,a){const{_cachedMeta:s,_data:r}=this,{iScale:i,_stacked:o}=s,l=i.axis;let c=t===0&&a===r.length?!0:s._sorted,u=t>0&&s._parsed[t-1],d,f,p;if(this._parsing===!1)s._parsed=r,s._sorted=!0,p=r;else{ss(r[t])?p=this.parseArrayData(s,r,t,a):jn(r[t])?p=this.parseObjectData(s,r,t,a):p=this.parsePrimitiveData(s,r,t,a);const x=()=>f[l]===null||u&&f[l]<u[l];for(d=0;d<a;++d)s._parsed[d+t]=f=p[d],c&&(x()&&(c=!1),u=f);s._sorted=c}o&&oB(this,p)}parsePrimitiveData(t,a,s,r){const{iScale:i,vScale:o}=t,l=i.axis,c=o.axis,u=i.getLabels(),d=i===o,f=new Array(r);let p,x,y;for(p=0,x=r;p<x;++p)y=p+s,f[p]={[l]:d||i.parse(u[y],y),[c]:o.parse(a[y],y)};return f}parseArrayData(t,a,s,r){const{xScale:i,yScale:o}=t,l=new Array(r);let c,u,d,f;for(c=0,u=r;c<u;++c)d=c+s,f=a[d],l[c]={x:i.parse(f[0],d),y:o.parse(f[1],d)};return l}parseObjectData(t,a,s,r){const{xScale:i,yScale:o}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=new Array(r);let d,f,p,x;for(d=0,f=r;d<f;++d)p=d+s,x=a[p],u[d]={x:i.parse(Gu(x,l),p),y:o.parse(Gu(x,c),p)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,a,s){const r=this.chart,i=this._cachedMeta,o=a[t.axis],l={keys:GJ(r,!0),values:a._stacks[t.axis]._visualValues};return rB(l,o,i.index,{mode:s})}updateRangeFromParsed(t,a,s,r){const i=s[a.axis];let o=i===null?NaN:i;const l=r&&s._stacks[a.axis];r&&l&&(r.values=l,o=rB(r,i,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,a){const s=this._cachedMeta,r=s._parsed,i=s._sorted&&t===s.iScale,o=r.length,l=this._getOtherScale(t),c=xHe(a,s,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:f}=fHe(l);let p,x;function y(){x=r[p];const N=x[l.axis];return!Ni(x[t.axis])||d>N||f<N}for(p=0;p<o&&!(!y()&&(this.updateRangeFromParsed(u,t,x,c),i));++p);if(i){for(p=o-1;p>=0;--p)if(!y()){this.updateRangeFromParsed(u,t,x,c);break}}return u}getAllParsedValues(t){const a=this._cachedMeta._parsed,s=[];let r,i,o;for(r=0,i=a.length;r<i;++r)o=a[r][t.axis],Ni(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const a=this._cachedMeta,s=a.iScale,r=a.vScale,i=this.getParsed(t);return{label:s?""+s.getLabelForValue(i[s.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(t){const a=this._cachedMeta;this.update(t||"default"),a._clip=dHe(cn(this.options.clip,cHe(a.xScale,a.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,a=this.chart,s=this._cachedMeta,r=s.data||[],i=a.chartArea,o=[],l=this._drawStart||0,c=this._drawCount||r.length-l,u=this.options.drawActiveElementsOnTop;let d;for(s.dataset&&s.dataset.draw(t,i,l,c),d=l;d<l+c;++d){const f=r[d];f.hidden||(f.active&&u?o.push(f):f.draw(t,i))}for(d=0;d<o.length;++d)o[d].draw(t,i)}getStyle(t,a){const s=a?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,a,s){const r=this.getDataset();let i;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];i=o.$context||(o.$context=pHe(this.getContext(),t,o)),i.parsed=this.getParsed(t),i.raw=r.data[t],i.index=i.dataIndex=t}else i=this.$context||(this.$context=gHe(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!a,i.mode=s,i}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,a){return this._resolveElementOptions(this.dataElementType.id,a,t)}_resolveElementOptions(t,a="default",s){const r=a==="active",i=this._cachedDataOpts,o=t+"-"+a,l=i[o],c=this.enableOptionSharing&&Vp(s);if(l)return lB(l,c);const u=this.chart.config,d=u.datasetElementScopeKeys(this._type,t),f=r?[`${t}Hover`,"hover",t,""]:[t,""],p=u.getOptionScopes(this.getDataset(),d),x=Object.keys(Oa.elements[t]),y=()=>this.getContext(s,r,a),N=u.resolveNamedOptions(p,x,y,f);return N.$shared&&(N.$shared=c,i[o]=Object.freeze(lB(N,c))),N}_resolveAnimations(t,a,s){const r=this.chart,i=this._cachedDataOpts,o=`animation-${a}`,l=i[o];if(l)return l;let c;if(r.options.animation!==!1){const d=this.chart.config,f=d.datasetAnimationScopeKeys(this._type,a),p=d.getOptionScopes(this.getDataset(),f);c=d.createResolver(p,this.getContext(t,s,a))}const u=new WJ(r,c&&c.animations);return c&&c._cacheable&&(i[o]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,a){return!a||fT(t)||this.chart._animationsDisabled}_getSharedOptions(t,a){const s=this.resolveDataElementOptions(t,a),r=this._sharedOptions,i=this.getSharedOptions(s),o=this.includeOptions(a,i)||i!==r;return this.updateSharedOptions(i,a,s),{sharedOptions:i,includeOptions:o}}updateElement(t,a,s,r){fT(r)?Object.assign(t,s):this._resolveAnimations(a,r).update(t,s)}updateSharedOptions(t,a,s){t&&!fT(a)&&this._resolveAnimations(void 0,a).update(t,s)}_setStyle(t,a,s,r){t.active=r;const i=this.getStyle(a,r);this._resolveAnimations(a,s,r).update(t,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(t,a,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,a,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const a=this._data,s=this._cachedMeta.data;for(const[l,c,u]of this._syncList)this[l](c,u);this._syncList=[];const r=s.length,i=a.length,o=Math.min(i,r);o&&this.parse(0,o),i>r?this._insertElements(r,i-r,t):i<r&&this._removeElements(i,r-i)}_insertElements(t,a,s=!0){const r=this._cachedMeta,i=r.data,o=t+a;let l;const c=u=>{for(u.length+=a,l=u.length-1;l>=o;l--)u[l]=u[l-a]};for(c(i),l=t;l<o;++l)i[l]=new this.dataElementType;this._parsing&&c(r._parsed),this.parse(t,a),s&&this.updateElements(i,t,a,"reset")}updateElements(t,a,s,r){}_removeElements(t,a){const s=this._cachedMeta;if(this._parsing){const r=s._parsed.splice(t,a);s._stacked&&kg(s,r)}s.data.splice(t,a)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[a,s,r]=t;this[a](s,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,a){a&&this._sync(["_removeElements",t,a]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function yHe(e,t){if(!e._cache.$bar){const a=e.getMatchingVisibleMetas(t);let s=[];for(let r=0,i=a.length;r<i;r++)s=s.concat(a[r].controller.getAllParsedValues(e));e._cache.$bar=LJ(s.sort((r,i)=>r-i))}return e._cache.$bar}function bHe(e){const t=e.iScale,a=yHe(t,e.type);let s=t._length,r,i,o,l;const c=()=>{o===32767||o===-32768||(Vp(l)&&(s=Math.min(s,Math.abs(o-l)||s)),l=o)};for(r=0,i=a.length;r<i;++r)o=t.getPixelForValue(a[r]),c();for(l=void 0,r=0,i=t.ticks.length;r<i;++r)o=t.getPixelForTick(r),c();return s}function vHe(e,t,a,s){const r=a.barThickness;let i,o;return Ln(r)?(i=t.min*a.categoryPercentage,o=a.barPercentage):(i=r*s,o=1),{chunk:i/s,ratio:o,start:t.pixels[e]-i/2}}function wHe(e,t,a,s){const r=t.pixels,i=r[e];let o=e>0?r[e-1]:null,l=e<r.length-1?r[e+1]:null;const c=a.categoryPercentage;o===null&&(o=i-(l===null?t.end-t.start:l-i)),l===null&&(l=i+i-o);const u=i-(i-Math.min(o,l))/2*c;return{chunk:Math.abs(l-o)/2*c/s,ratio:a.barPercentage,start:u}}function NHe(e,t,a,s){const r=a.parse(e[0],s),i=a.parse(e[1],s),o=Math.min(r,i),l=Math.max(r,i);let c=o,u=l;Math.abs(o)>Math.abs(l)&&(c=l,u=o),t[a.axis]=u,t._custom={barStart:c,barEnd:u,start:r,end:i,min:o,max:l}}function VJ(e,t,a,s){return ss(e)?NHe(e,t,a,s):t[a.axis]=a.parse(e,s),t}function cB(e,t,a,s){const r=e.iScale,i=e.vScale,o=r.getLabels(),l=r===i,c=[];let u,d,f,p;for(u=a,d=a+s;u<d;++u)p=t[u],f={},f[r.axis]=l||r.parse(o[u],u),c.push(VJ(p,f,i,u));return c}function hT(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function jHe(e,t,a){return e!==0?Mo(e):(t.isHorizontal()?1:-1)*(t.min>=a?1:-1)}function CHe(e){let t,a,s,r,i;return e.horizontal?(t=e.base>e.x,a="left",s="right"):(t=e.base<e.y,a="bottom",s="top"),t?(r="end",i="start"):(r="start",i="end"),{start:a,end:s,reverse:t,top:r,bottom:i}}function SHe(e,t,a,s){let r=t.borderSkipped;const i={};if(!r){e.borderSkipped=i;return}if(r===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:l,reverse:c,top:u,bottom:d}=CHe(e);r==="middle"&&a&&(e.enableBorderRadius=!0,(a._top||0)===s?r=u:(a._bottom||0)===s?r=d:(i[dB(d,o,l,c)]=!0,r=u)),i[dB(r,o,l,c)]=!0,e.borderSkipped=i}function dB(e,t,a,s){return s?(e=_He(e,t,a),e=uB(e,a,t)):e=uB(e,t,a),e}function _He(e,t,a){return e===t?a:e===a?t:e}function uB(e,t,a){return e==="start"?t:e==="end"?a:e}function AHe(e,{inflateAmount:t},a){e.inflateAmount=t==="auto"?a===1?.33:0:t}class THe extends w1{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,a,s,r){return cB(t,a,s,r)}parseArrayData(t,a,s,r){return cB(t,a,s,r)}parseObjectData(t,a,s,r){const{iScale:i,vScale:o}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=i.axis==="x"?l:c,d=o.axis==="x"?l:c,f=[];let p,x,y,N;for(p=s,x=s+r;p<x;++p)N=a[p],y={},y[i.axis]=i.parse(Gu(N,u),p),f.push(VJ(Gu(N,d),y,o,p));return f}updateRangeFromParsed(t,a,s,r){super.updateRangeFromParsed(t,a,s,r);const i=s._custom;i&&a===this._cachedMeta.vScale&&(t.min=Math.min(t.min,i.min),t.max=Math.max(t.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const a=this._cachedMeta,{iScale:s,vScale:r}=a,i=this.getParsed(t),o=i._custom,l=hT(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+s.getLabelForValue(i[s.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const a=this._cachedMeta;this.updateElements(a.data,0,a.data.length,t)}updateElements(t,a,s,r){const i=r==="reset",{index:o,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),u=l.isHorizontal(),d=this._getRuler(),{sharedOptions:f,includeOptions:p}=this._getSharedOptions(a,r);for(let x=a;x<a+s;x++){const y=this.getParsed(x),N=i||Ln(y[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(x),v=this._calculateBarIndexPixels(x,d),j=(y._stacks||{})[l.axis],w={horizontal:u,base:N.base,enableBorderRadius:!j||hT(y._custom)||o===j._top||o===j._bottom,x:u?N.head:v.center,y:u?v.center:N.head,height:u?v.size:Math.abs(N.size),width:u?Math.abs(N.size):v.size};p&&(w.options=f||this.resolveDataElementOptions(x,t[x].active?"active":r));const S=w.options||t[x].options;SHe(w,S,j,o),AHe(w,S,d.ratio),this.updateElement(t[x],x,w,r)}}_getStacks(t,a){const{iScale:s}=this._cachedMeta,r=s.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),i=s.options.stacked,o=[],l=this._cachedMeta.controller.getParsed(a),c=l&&l[s.axis],u=d=>{const f=d._parsed.find(x=>x[s.axis]===c),p=f&&f[d.vScale.axis];if(Ln(p)||isNaN(p))return!0};for(const d of r)if(!(a!==void 0&&u(d))&&((i===!1||o.indexOf(d.stack)===-1||i===void 0&&d.stack===void 0)&&o.push(d.stack),d.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,a=this.chart.options.indexAxis;return Object.keys(t).filter(s=>t[s].axis===a).shift()}_getAxis(){const t={},a=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)t[cn(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,a)]=!0;return Object.keys(t)}_getStackIndex(t,a,s){const r=this._getStacks(t,s),i=a!==void 0?r.indexOf(a):-1;return i===-1?r.length-1:i}_getRuler(){const t=this.options,a=this._cachedMeta,s=a.iScale,r=[];let i,o;for(i=0,o=a.data.length;i<o;++i)r.push(s.getPixelForValue(this.getParsed(i)[s.axis],i));const l=t.barThickness;return{min:l||bHe(a),pixels:r,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:t.grouped,ratio:l?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:a,_stacked:s,index:r},options:{base:i,minBarLength:o}}=this,l=i||0,c=this.getParsed(t),u=c._custom,d=hT(u);let f=c[a.axis],p=0,x=s?this.applyStack(a,c,s):f,y,N;x!==f&&(p=x-f,x=f),d&&(f=u.barStart,x=u.barEnd-u.barStart,f!==0&&Mo(f)!==Mo(u.barEnd)&&(p=0),p+=f);const v=!Ln(i)&&!d?i:p;let j=a.getPixelForValue(v);if(this.chart.getDataVisibility(t)?y=a.getPixelForValue(p+x):y=j,N=y-j,Math.abs(N)<o){N=jHe(N,a,l)*o,f===l&&(j-=N/2);const w=a.getPixelForDecimal(0),S=a.getPixelForDecimal(1),_=Math.min(w,S),E=Math.max(w,S);j=Math.max(Math.min(j,E),_),y=j+N,s&&!d&&(c._stacks[a.axis]._visualValues[r]=a.getValueForPixel(y)-a.getValueForPixel(j))}if(j===a.getPixelForValue(l)){const w=Mo(N)*a.getLineWidthForValue(l)/2;j+=w,N-=w}return{size:N,base:j,head:y,center:y+N/2}}_calculateBarIndexPixels(t,a){const s=a.scale,r=this.options,i=r.skipNull,o=cn(r.maxBarThickness,1/0);let l,c;const u=this._getAxisCount();if(a.grouped){const d=i?this._getStackCount(t):a.stackCount,f=r.barThickness==="flex"?wHe(t,a,r,d*u):vHe(t,a,r,d*u),p=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,x=this._getAxis().indexOf(cn(p,this.getFirstScaleIdForIndexAxis())),y=this._getStackIndex(this.index,this._cachedMeta.stack,i?t:void 0)+x;l=f.start+f.chunk*y+f.chunk/2,c=Math.min(o,f.chunk*f.ratio)}else l=s.getPixelForValue(this.getParsed(t)[s.axis],t),c=Math.min(o,a.min*a.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const t=this._cachedMeta,a=t.vScale,s=t.data,r=s.length;let i=0;for(;i<r;++i)this.getParsed(i)[a.axis]!==null&&!s[i].hidden&&s[i].draw(this._ctx)}}function kHe(e,t,a){let s=1,r=1,i=0,o=0;if(t<_a){const l=e,c=l+t,u=Math.cos(l),d=Math.sin(l),f=Math.cos(c),p=Math.sin(c),x=(S,_,E)=>Qp(S,l,c,!0)?1:Math.max(_,_*a,E,E*a),y=(S,_,E)=>Qp(S,l,c,!0)?-1:Math.min(_,_*a,E,E*a),N=x(0,u,f),v=x(rs,d,p),j=y(Rn,u,f),w=y(Rn+rs,d,p);s=(N-j)/2,r=(v-w)/2,i=-(N+j)/2,o=-(v+w)/2}return{ratioX:s,ratioY:r,offsetX:i,offsetY:o}}class EHe extends w1{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const a=t.data,{labels:{pointStyle:s,textAlign:r,color:i,useBorderRadius:o,borderRadius:l}}=t.legend.options;return a.labels.length&&a.datasets.length?a.labels.map((c,u)=>{const f=t.getDatasetMeta(0).controller.getStyle(u);return{text:c,fillStyle:f.backgroundColor,fontColor:i,hidden:!t.getDataVisibility(u),lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:f.borderWidth,strokeStyle:f.borderColor,textAlign:r,pointStyle:s,borderRadius:o&&(l||f.borderRadius),index:u}}):[]}},onClick(t,a,s){s.chart.toggleDataVisibility(a.index),s.chart.update()}}}};constructor(t,a){super(t,a),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,a){const s=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=s;else{let i=c=>+s[c];if(jn(s[t])){const{key:c="value"}=this._parsing;i=u=>+Gu(s[u],c)}let o,l;for(o=t,l=t+a;o<l;++o)r._parsed[o]=i(o)}}_getRotation(){return Ll(this.options.rotation-90)}_getCircumference(){return Ll(this.options.circumference)}_getRotationExtents(){let t=_a,a=-_a;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const r=this.chart.getDatasetMeta(s).controller,i=r._getRotation(),o=r._getCircumference();t=Math.min(t,i),a=Math.max(a,i+o)}return{rotation:t,circumference:a-t}}update(t){const a=this.chart,{chartArea:s}=a,r=this._cachedMeta,i=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,l=Math.max((Math.min(s.width,s.height)-o)/2,0),c=Math.min(D8e(this.options.cutout,l),1),u=this._getRingWeight(this.index),{circumference:d,rotation:f}=this._getRotationExtents(),{ratioX:p,ratioY:x,offsetX:y,offsetY:N}=kHe(f,d,c),v=(s.width-o)/p,j=(s.height-o)/x,w=Math.max(Math.min(v,j)/2,0),S=_J(this.options.radius,w),_=Math.max(S*c,0),E=(S-_)/this._getVisibleDatasetWeightTotal();this.offsetX=y*S,this.offsetY=N*S,r.total=this.calculateTotal(),this.outerRadius=S-E*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-E*u,0),this.updateElements(i,0,i.length,t)}_circumference(t,a){const s=this.options,r=this._cachedMeta,i=this._getCircumference();return a&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||r._parsed[t]===null||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*i/_a)}updateElements(t,a,s,r){const i=r==="reset",o=this.chart,l=o.chartArea,u=o.options.animation,d=(l.left+l.right)/2,f=(l.top+l.bottom)/2,p=i&&u.animateScale,x=p?0:this.innerRadius,y=p?0:this.outerRadius,{sharedOptions:N,includeOptions:v}=this._getSharedOptions(a,r);let j=this._getRotation(),w;for(w=0;w<a;++w)j+=this._circumference(w,i);for(w=a;w<a+s;++w){const S=this._circumference(w,i),_=t[w],E={x:d+this.offsetX,y:f+this.offsetY,startAngle:j,endAngle:j+S,circumference:S,outerRadius:y,innerRadius:x};v&&(E.options=N||this.resolveDataElementOptions(w,_.active?"active":r)),j+=S,this.updateElement(_,w,E,r)}}calculateTotal(){const t=this._cachedMeta,a=t.data;let s=0,r;for(r=0;r<a.length;r++){const i=t._parsed[r];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(r)&&!a[r].hidden&&(s+=Math.abs(i))}return s}calculateCircumference(t){const a=this._cachedMeta.total;return a>0&&!isNaN(t)?_a*(Math.abs(t)/a):0}getLabelAndValue(t){const a=this._cachedMeta,s=this.chart,r=s.data.labels||[],i=o3(a._parsed[t],s.options.locale);return{label:r[t]||"",value:i}}getMaxBorderWidth(t){let a=0;const s=this.chart;let r,i,o,l,c;if(!t){for(r=0,i=s.data.datasets.length;r<i;++r)if(s.isDatasetVisible(r)){o=s.getDatasetMeta(r),t=o.data,l=o.controller;break}}if(!t)return 0;for(r=0,i=t.length;r<i;++r)c=l.resolveDataElementOptions(r),c.borderAlign!=="inner"&&(a=Math.max(a,c.borderWidth||0,c.hoverBorderWidth||0));return a}getMaxOffset(t){let a=0;for(let s=0,r=t.length;s<r;++s){const i=this.resolveDataElementOptions(s);a=Math.max(a,i.offset||0,i.hoverOffset||0)}return a}_getRingWeightOffset(t){let a=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(a+=this._getRingWeight(s));return a}_getRingWeight(t){return Math.max(cn(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class LHe extends w1{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const a=this._cachedMeta,{dataset:s,data:r=[],_dataset:i}=a,o=this.chart._animationsDisabled;let{start:l,count:c}=J8e(a,r,o);this._drawStart=l,this._drawCount=c,eBe(a)&&(l=0,c=r.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!i._decimated,s.points=r;const u=this.resolveDatasetElementOptions(t);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(s,void 0,{animated:!o,options:u},t),this.updateElements(r,l,c,t)}updateElements(t,a,s,r){const i=r==="reset",{iScale:o,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,{sharedOptions:d,includeOptions:f}=this._getSharedOptions(a,r),p=o.axis,x=l.axis,{spanGaps:y,segment:N}=this.options,v=Yp(y)?y:Number.POSITIVE_INFINITY,j=this.chart._animationsDisabled||i||r==="none",w=a+s,S=t.length;let _=a>0&&this.getParsed(a-1);for(let E=0;E<S;++E){const T=t[E],A=j?T:{};if(E<a||E>=w){A.skip=!0;continue}const L=this.getParsed(E),M=Ln(L[x]),F=A[p]=o.getPixelForValue(L[p],E),$=A[x]=i||M?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,L,c):L[x],E);A.skip=isNaN(F)||isNaN($)||M,A.stop=E>0&&Math.abs(L[p]-_[p])>v,N&&(A.parsed=L,A.raw=u.data[E]),f&&(A.options=d||this.resolveDataElementOptions(E,T.active?"active":r)),j||this.updateElement(T,E,A,r),_=L}}getMaxOverflow(){const t=this._cachedMeta,a=t.dataset,s=a.options&&a.options.borderWidth||0,r=t.data||[];if(!r.length)return s;const i=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,i,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}class PHe extends EHe{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}function Kd(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class p3{static override(t){Object.assign(p3.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return Kd()}parse(){return Kd()}format(){return Kd()}add(){return Kd()}diff(){return Kd()}startOf(){return Kd()}endOf(){return Kd()}}var DHe={_date:p3};function OHe(e,t,a,s){const{controller:r,data:i,_sorted:o}=e,l=r._cachedMeta.iScale,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(l&&t===l.axis&&t!=="r"&&o&&i.length){const u=l._reversePixels?Y8e:pu;if(s){if(r._sharedOptions){const d=i[0],f=typeof d.getRange=="function"&&d.getRange(t);if(f){const p=u(i,t,a-f),x=u(i,t,a+f);return{lo:p.lo,hi:x.hi}}}}else{const d=u(i,t,a);if(c){const{vScale:f}=r._cachedMeta,{_parsed:p}=e,x=p.slice(0,d.lo+1).reverse().findIndex(N=>!Ln(N[f.axis]));d.lo-=Math.max(0,x);const y=p.slice(d.hi).findIndex(N=>!Ln(N[f.axis]));d.hi+=Math.max(0,y)}return d}}return{lo:0,hi:i.length-1}}function N1(e,t,a,s,r){const i=e.getSortedVisibleDatasetMetas(),o=a[t];for(let l=0,c=i.length;l<c;++l){const{index:u,data:d}=i[l],{lo:f,hi:p}=OHe(i[l],t,o,r);for(let x=f;x<=p;++x){const y=d[x];y.skip||s(y,u,x)}}}function MHe(e){const t=e.indexOf("x")!==-1,a=e.indexOf("y")!==-1;return function(s,r){const i=t?Math.abs(s.x-r.x):0,o=a?Math.abs(s.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function gT(e,t,a,s,r){const i=[];return!r&&!e.isPointInArea(t)||N1(e,a,t,function(l,c,u){!r&&!Kp(l,e.chartArea,0)||l.inRange(t.x,t.y,s)&&i.push({element:l,datasetIndex:c,index:u})},!0),i}function IHe(e,t,a,s){let r=[];function i(o,l,c){const{startAngle:u,endAngle:d}=o.getProps(["startAngle","endAngle"],s),{angle:f}=kJ(o,{x:t.x,y:t.y});Qp(f,u,d)&&r.push({element:o,datasetIndex:l,index:c})}return N1(e,a,t,i),r}function $He(e,t,a,s,r,i){let o=[];const l=MHe(a);let c=Number.POSITIVE_INFINITY;function u(d,f,p){const x=d.inRange(t.x,t.y,r);if(s&&!x)return;const y=d.getCenterPoint(r);if(!(!!i||e.isPointInArea(y))&&!x)return;const v=l(t,y);v<c?(o=[{element:d,datasetIndex:f,index:p}],c=v):v===c&&o.push({element:d,datasetIndex:f,index:p})}return N1(e,a,t,u),o}function pT(e,t,a,s,r,i){return!i&&!e.isPointInArea(t)?[]:a==="r"&&!s?IHe(e,t,a,r):$He(e,t,a,s,r,i)}function mB(e,t,a,s,r){const i=[],o=a==="x"?"inXRange":"inYRange";let l=!1;return N1(e,a,t,(c,u,d)=>{c[o]&&c[o](t[a],r)&&(i.push({element:c,datasetIndex:u,index:d}),l=l||c.inRange(t.x,t.y,r))}),s&&!l?[]:i}var RHe={modes:{index(e,t,a,s){const r=au(t,e),i=a.axis||"x",o=a.includeInvisible||!1,l=a.intersect?gT(e,r,i,s,o):pT(e,r,i,!1,s,o),c=[];return l.length?(e.getSortedVisibleDatasetMetas().forEach(u=>{const d=l[0].index,f=u.data[d];f&&!f.skip&&c.push({element:f,datasetIndex:u.index,index:d})}),c):[]},dataset(e,t,a,s){const r=au(t,e),i=a.axis||"xy",o=a.includeInvisible||!1;let l=a.intersect?gT(e,r,i,s,o):pT(e,r,i,!1,s,o);if(l.length>0){const c=l[0].datasetIndex,u=e.getDatasetMeta(c).data;l=[];for(let d=0;d<u.length;++d)l.push({element:u[d],datasetIndex:c,index:d})}return l},point(e,t,a,s){const r=au(t,e),i=a.axis||"xy",o=a.includeInvisible||!1;return gT(e,r,i,s,o)},nearest(e,t,a,s){const r=au(t,e),i=a.axis||"xy",o=a.includeInvisible||!1;return pT(e,r,i,a.intersect,s,o)},x(e,t,a,s){const r=au(t,e);return mB(e,r,"x",a.intersect,s)},y(e,t,a,s){const r=au(t,e);return mB(e,r,"y",a.intersect,s)}}};const YJ=["left","top","right","bottom"];function Eg(e,t){return e.filter(a=>a.pos===t)}function fB(e,t){return e.filter(a=>YJ.indexOf(a.pos)===-1&&a.box.axis===t)}function Lg(e,t){return e.sort((a,s)=>{const r=t?s:a,i=t?a:s;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function zHe(e){const t=[];let a,s,r,i,o,l;for(a=0,s=(e||[]).length;a<s;++a)r=e[a],{position:i,options:{stack:o,stackWeight:l=1}}=r,t.push({index:a,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&i+o,stackWeight:l});return t}function FHe(e){const t={};for(const a of e){const{stack:s,pos:r,stackWeight:i}=a;if(!s||!YJ.includes(r))continue;const o=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return t}function UHe(e,t){const a=FHe(e),{vBoxMaxWidth:s,hBoxMaxHeight:r}=t;let i,o,l;for(i=0,o=e.length;i<o;++i){l=e[i];const{fullSize:c}=l.box,u=a[l.stack],d=u&&l.stackWeight/u.weight;l.horizontal?(l.width=d?d*s:c&&t.availableWidth,l.height=r):(l.width=s,l.height=d?d*r:c&&t.availableHeight)}return a}function BHe(e){const t=zHe(e),a=Lg(t.filter(u=>u.box.fullSize),!0),s=Lg(Eg(t,"left"),!0),r=Lg(Eg(t,"right")),i=Lg(Eg(t,"top"),!0),o=Lg(Eg(t,"bottom")),l=fB(t,"x"),c=fB(t,"y");return{fullSize:a,leftAndTop:s.concat(i),rightAndBottom:r.concat(c).concat(o).concat(l),chartArea:Eg(t,"chartArea"),vertical:s.concat(r).concat(c),horizontal:i.concat(o).concat(l)}}function hB(e,t,a,s){return Math.max(e[a],t[a])+Math.max(e[s],t[s])}function QJ(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function HHe(e,t,a,s){const{pos:r,box:i}=a,o=e.maxPadding;if(!jn(r)){a.size&&(e[r]-=a.size);const f=s[a.stack]||{size:0,count:1};f.size=Math.max(f.size,a.horizontal?i.height:i.width),a.size=f.size/f.count,e[r]+=a.size}i.getPadding&&QJ(o,i.getPadding());const l=Math.max(0,t.outerWidth-hB(o,e,"left","right")),c=Math.max(0,t.outerHeight-hB(o,e,"top","bottom")),u=l!==e.w,d=c!==e.h;return e.w=l,e.h=c,a.horizontal?{same:u,other:d}:{same:d,other:u}}function qHe(e){const t=e.maxPadding;function a(s){const r=Math.max(t[s]-e[s],0);return e[s]+=r,r}e.y+=a("top"),e.x+=a("left"),a("right"),a("bottom")}function WHe(e,t){const a=t.maxPadding;function s(r){const i={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{i[o]=Math.max(t[o],a[o])}),i}return s(e?["left","right"]:["top","bottom"])}function Kg(e,t,a,s){const r=[];let i,o,l,c,u,d;for(i=0,o=e.length,u=0;i<o;++i){l=e[i],c=l.box,c.update(l.width||t.w,l.height||t.h,WHe(l.horizontal,t));const{same:f,other:p}=HHe(t,a,l,s);u|=f&&r.length,d=d||p,c.fullSize||r.push(l)}return u&&Kg(r,t,a,s)||d}function Ob(e,t,a,s,r){e.top=a,e.left=t,e.right=t+s,e.bottom=a+r,e.width=s,e.height=r}function gB(e,t,a,s){const r=a.padding;let{x:i,y:o}=t;for(const l of e){const c=l.box,u=s[l.stack]||{placed:0,weight:1},d=l.stackWeight/u.weight||1;if(l.horizontal){const f=t.w*d,p=u.size||c.height;Vp(u.start)&&(o=u.start),c.fullSize?Ob(c,r.left,o,a.outerWidth-r.right-r.left,p):Ob(c,t.left+u.placed,o,f,p),u.start=o,u.placed+=f,o=c.bottom}else{const f=t.h*d,p=u.size||c.width;Vp(u.start)&&(i=u.start),c.fullSize?Ob(c,i,r.top,p,a.outerHeight-r.bottom-r.top):Ob(c,i,t.top+u.placed,p,f),u.start=i,u.placed+=f,i=c.right}}t.x=i,t.y=o}var hi={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(a){t.draw(a)}}]},e.boxes.push(t)},removeBox(e,t){const a=e.boxes?e.boxes.indexOf(t):-1;a!==-1&&e.boxes.splice(a,1)},configure(e,t,a){t.fullSize=a.fullSize,t.position=a.position,t.weight=a.weight},update(e,t,a,s){if(!e)return;const r=ji(e.options.layout.padding),i=Math.max(t-r.width,0),o=Math.max(a-r.height,0),l=BHe(e.boxes),c=l.vertical,u=l.horizontal;In(e.boxes,N=>{typeof N.beforeLayout=="function"&&N.beforeLayout()});const d=c.reduce((N,v)=>v.box.options&&v.box.options.display===!1?N:N+1,0)||1,f=Object.freeze({outerWidth:t,outerHeight:a,padding:r,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/d,hBoxMaxHeight:o/2}),p=Object.assign({},r);QJ(p,ji(s));const x=Object.assign({maxPadding:p,w:i,h:o,x:r.left,y:r.top},r),y=UHe(c.concat(u),f);Kg(l.fullSize,x,f,y),Kg(c,x,f,y),Kg(u,x,f,y)&&Kg(c,x,f,y),qHe(x),gB(l.leftAndTop,x,f,y),x.x+=x.w,x.y+=x.h,gB(l.rightAndBottom,x,f,y),e.chartArea={left:x.left,top:x.top,right:x.left+x.w,bottom:x.top+x.h,height:x.h,width:x.w},In(l.chartArea,N=>{const v=N.box;Object.assign(v,e.chartArea),v.update(x.w,x.h,{left:0,top:0,right:0,bottom:0})})}};class KJ{acquireContext(t,a){}releaseContext(t){return!1}addEventListener(t,a,s){}removeEventListener(t,a,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,a,s,r){return a=Math.max(0,a||t.width),s=s||t.height,{width:a,height:Math.max(0,r?Math.floor(a/r):s)}}isAttached(t){return!0}updateConfig(t){}}class GHe extends KJ{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const uv="$chartjs",VHe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},pB=e=>e===null||e==="";function YHe(e,t){const a=e.style,s=e.getAttribute("height"),r=e.getAttribute("width");if(e[uv]={initial:{height:s,width:r,style:{display:a.display,height:a.height,width:a.width}}},a.display=a.display||"block",a.boxSizing=a.boxSizing||"border-box",pB(r)){const i=J8(e,"width");i!==void 0&&(e.width=i)}if(pB(s))if(e.style.height==="")e.height=e.width/(t||2);else{const i=J8(e,"height");i!==void 0&&(e.height=i)}return e}const XJ=HBe?{passive:!0}:!1;function QHe(e,t,a){e&&e.addEventListener(t,a,XJ)}function KHe(e,t,a){e&&e.canvas&&e.canvas.removeEventListener(t,a,XJ)}function XHe(e,t){const a=VHe[e.type]||e.type,{x:s,y:r}=au(e,t);return{type:a,chart:t,native:e,x:s!==void 0?s:null,y:r!==void 0?r:null}}function qw(e,t){for(const a of e)if(a===t||a.contains(t))return!0}function ZHe(e,t,a){const s=e.canvas,r=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||qw(l.addedNodes,s),o=o&&!qw(l.removedNodes,s);o&&a()});return r.observe(document,{childList:!0,subtree:!0}),r}function JHe(e,t,a){const s=e.canvas,r=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||qw(l.removedNodes,s),o=o&&!qw(l.addedNodes,s);o&&a()});return r.observe(document,{childList:!0,subtree:!0}),r}const Zp=new Map;let xB=0;function ZJ(){const e=window.devicePixelRatio;e!==xB&&(xB=e,Zp.forEach((t,a)=>{a.currentDevicePixelRatio!==e&&t()}))}function e9e(e,t){Zp.size||window.addEventListener("resize",ZJ),Zp.set(e,t)}function t9e(e){Zp.delete(e),Zp.size||window.removeEventListener("resize",ZJ)}function n9e(e,t,a){const s=e.canvas,r=s&&g3(s);if(!r)return;const i=DJ((l,c)=>{const u=r.clientWidth;a(l,c),u<r.clientWidth&&a()},window),o=new ResizeObserver(l=>{const c=l[0],u=c.contentRect.width,d=c.contentRect.height;u===0&&d===0||i(u,d)});return o.observe(r),e9e(e,i),o}function xT(e,t,a){a&&a.disconnect(),t==="resize"&&t9e(e)}function a9e(e,t,a){const s=e.canvas,r=DJ(i=>{e.ctx!==null&&a(XHe(i,e))},e);return QHe(s,t,r),r}class s9e extends KJ{acquireContext(t,a){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(YHe(t,a),s):null}releaseContext(t){const a=t.canvas;if(!a[uv])return!1;const s=a[uv].initial;["height","width"].forEach(i=>{const o=s[i];Ln(o)?a.removeAttribute(i):a.setAttribute(i,o)});const r=s.style||{};return Object.keys(r).forEach(i=>{a.style[i]=r[i]}),a.width=a.width,delete a[uv],!0}addEventListener(t,a,s){this.removeEventListener(t,a);const r=t.$proxies||(t.$proxies={}),o={attach:ZHe,detach:JHe,resize:n9e}[a]||a9e;r[a]=o(t,a,s)}removeEventListener(t,a){const s=t.$proxies||(t.$proxies={}),r=s[a];if(!r)return;({attach:xT,detach:xT,resize:xT}[a]||KHe)(t,a,r),s[a]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,a,s,r){return BBe(t,a,s,r)}isAttached(t){const a=t&&g3(t);return!!(a&&a.isConnected)}}function r9e(e){return!h3()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?GHe:s9e}let dc=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:a,y:s}=this.getProps(["x","y"],t);return{x:a,y:s}}hasValue(){return Yp(this.x)&&Yp(this.y)}getProps(t,a){const s=this.$animations;if(!a||!s)return this;const r={};return t.forEach(i=>{r[i]=s[i]&&s[i].active()?s[i]._to:this[i]}),r}};function i9e(e,t){const a=e.options.ticks,s=o9e(e),r=Math.min(a.maxTicksLimit||s,s),i=a.major.enabled?c9e(t):[],o=i.length,l=i[0],c=i[o-1],u=[];if(o>r)return d9e(t,u,i,o/r),u;const d=l9e(i,t,r);if(o>0){let f,p;const x=o>1?Math.round((c-l)/(o-1)):null;for(Mb(t,u,d,Ln(x)?0:l-x,l),f=0,p=o-1;f<p;f++)Mb(t,u,d,i[f],i[f+1]);return Mb(t,u,d,c,Ln(x)?t.length:c+x),u}return Mb(t,u,d),u}function o9e(e){const t=e.options.offset,a=e._tickSize(),s=e._length/a+(t?0:1),r=e._maxLength/a;return Math.floor(Math.min(s,r))}function l9e(e,t,a){const s=u9e(e),r=t.length/a;if(!s)return Math.max(r,1);const i=U8e(s);for(let o=0,l=i.length-1;o<l;o++){const c=i[o];if(c>r)return c}return Math.max(r,1)}function c9e(e){const t=[];let a,s;for(a=0,s=e.length;a<s;a++)e[a].major&&t.push(a);return t}function d9e(e,t,a,s){let r=0,i=a[0],o;for(s=Math.ceil(s),o=0;o<e.length;o++)o===i&&(t.push(e[o]),r++,i=a[r*s])}function Mb(e,t,a,s,r){const i=cn(s,0),o=Math.min(cn(r,e.length),e.length);let l=0,c,u,d;for(a=Math.ceil(a),r&&(c=r-s,a=c/Math.floor(c/a)),d=i;d<0;)l++,d=Math.round(i+l*a);for(u=Math.max(i,0);u<o;u++)u===d&&(t.push(e[u]),l++,d=Math.round(i+l*a))}function u9e(e){const t=e.length;let a,s;if(t<2)return!1;for(s=e[0],a=1;a<t;++a)if(e[a]-e[a-1]!==s)return!1;return s}const m9e=e=>e==="left"?"right":e==="right"?"left":e,yB=(e,t,a)=>t==="top"||t==="left"?e[t]+a:e[t]-a,bB=(e,t)=>Math.min(t||e,e);function vB(e,t){const a=[],s=e.length/t,r=e.length;let i=0;for(;i<r;i+=s)a.push(e[Math.floor(i)]);return a}function f9e(e,t,a){const s=e.ticks.length,r=Math.min(t,s-1),i=e._startPixel,o=e._endPixel,l=1e-6;let c=e.getPixelForTick(r),u;if(!(a&&(s===1?u=Math.max(c-i,o-c):t===0?u=(e.getPixelForTick(1)-c)/2:u=(c-e.getPixelForTick(r-1))/2,c+=r<t?u:-u,c<i-l||c>o+l)))return c}function h9e(e,t){In(e,a=>{const s=a.gc,r=s.length/2;let i;if(r>t){for(i=0;i<r;++i)delete a.data[s[i]];s.splice(0,r)}})}function Pg(e){return e.drawTicks?e.tickLength:0}function wB(e,t){if(!e.display)return 0;const a=$s(e.font,t),s=ji(e.padding);return(ss(e.text)?e.text.length:1)*a.lineHeight+s.height}function g9e(e,t){return om(e,{scale:t,type:"scale"})}function p9e(e,t,a){return om(e,{tick:a,index:t,type:"tick"})}function x9e(e,t,a){let s=r3(e);return(a&&t!=="right"||!a&&t==="right")&&(s=m9e(s)),s}function y9e(e,t,a,s){const{top:r,left:i,bottom:o,right:l,chart:c}=e,{chartArea:u,scales:d}=c;let f=0,p,x,y;const N=o-r,v=l-i;if(e.isHorizontal()){if(x=Ps(s,i,l),jn(a)){const j=Object.keys(a)[0],w=a[j];y=d[j].getPixelForValue(w)+N-t}else a==="center"?y=(u.bottom+u.top)/2+N-t:y=yB(e,a,t);p=l-i}else{if(jn(a)){const j=Object.keys(a)[0],w=a[j];x=d[j].getPixelForValue(w)-v+t}else a==="center"?x=(u.left+u.right)/2-v+t:x=yB(e,a,t);y=Ps(s,o,r),f=a==="left"?-rs:rs}return{titleX:x,titleY:y,maxWidth:p,rotation:f}}class bh extends dc{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,a){return t}getUserBounds(){let{_userMin:t,_userMax:a,_suggestedMin:s,_suggestedMax:r}=this;return t=ho(t,Number.POSITIVE_INFINITY),a=ho(a,Number.NEGATIVE_INFINITY),s=ho(s,Number.POSITIVE_INFINITY),r=ho(r,Number.NEGATIVE_INFINITY),{min:ho(t,s),max:ho(a,r),minDefined:Ni(t),maxDefined:Ni(a)}}getMinMax(t){let{min:a,max:s,minDefined:r,maxDefined:i}=this.getUserBounds(),o;if(r&&i)return{min:a,max:s};const l=this.getMatchingVisibleMetas();for(let c=0,u=l.length;c<u;++c)o=l[c].controller.getMinMax(this,t),r||(a=Math.min(a,o.min)),i||(s=Math.max(s,o.max));return a=i&&a>s?s:a,s=r&&a>s?a:s,{min:ho(a,ho(s,a)),max:ho(s,ho(a,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ta(this.options.beforeUpdate,[this])}update(t,a,s){const{beginAtZero:r,grace:i,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=a,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=vBe(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?vB(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=i9e(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,a,s;this.isHorizontal()?(a=this.left,s=this.right):(a=this.top,s=this.bottom,t=!t),this._startPixel=a,this._endPixel=s,this._reversePixels=t,this._length=s-a,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ta(this.options.afterUpdate,[this])}beforeSetDimensions(){ta(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ta(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),ta(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ta(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const a=this.options.ticks;let s,r,i;for(s=0,r=t.length;s<r;s++)i=t[s],i.label=ta(a.callback,[i.value,s,t],this)}afterTickToLabelConversion(){ta(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ta(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,a=t.ticks,s=bB(this.ticks.length,t.ticks.maxTicksLimit),r=a.minRotation||0,i=a.maxRotation;let o=r,l,c,u;if(!this._isVisible()||!a.display||r>=i||s<=1||!this.isHorizontal()){this.labelRotation=r;return}const d=this._getLabelSizes(),f=d.widest.width,p=d.highest.height,x=Is(this.chart.width-f,0,this.maxWidth);l=t.offset?this.maxWidth/s:x/(s-1),f+6>l&&(l=x/(s-(t.offset?.5:1)),c=this.maxHeight-Pg(t.grid)-a.padding-wB(t.title,this.chart.options.font),u=Math.sqrt(f*f+p*p),o=W8e(Math.min(Math.asin(Is((d.highest.height+6)/l,-1,1)),Math.asin(Is(c/u,-1,1))-Math.asin(Is(p/u,-1,1)))),o=Math.max(r,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){ta(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ta(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:a,options:{ticks:s,title:r,grid:i}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const c=wB(r,a.options.font);if(l?(t.width=this.maxWidth,t.height=Pg(i)+c):(t.height=this.maxHeight,t.width=Pg(i)+c),s.display&&this.ticks.length){const{first:u,last:d,widest:f,highest:p}=this._getLabelSizes(),x=s.padding*2,y=Ll(this.labelRotation),N=Math.cos(y),v=Math.sin(y);if(l){const j=s.mirror?0:v*f.width+N*p.height;t.height=Math.min(this.maxHeight,t.height+j+x)}else{const j=s.mirror?0:N*f.width+v*p.height;t.width=Math.min(this.maxWidth,t.width+j+x)}this._calculatePadding(u,d,v,N)}}this._handleMargins(),l?(this.width=this._length=a.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=a.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,a,s,r){const{ticks:{align:i,padding:o},position:l}=this.options,c=this.labelRotation!==0,u=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,x=0;c?u?(p=r*t.width,x=s*a.height):(p=s*t.height,x=r*a.width):i==="start"?x=a.width:i==="end"?p=t.width:i!=="inner"&&(p=t.width/2,x=a.width/2),this.paddingLeft=Math.max((p-d+o)*this.width/(this.width-d),0),this.paddingRight=Math.max((x-f+o)*this.width/(this.width-f),0)}else{let d=a.height/2,f=t.height/2;i==="start"?(d=0,f=t.height):i==="end"&&(d=a.height,f=0),this.paddingTop=d+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ta(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:a}=this.options;return a==="top"||a==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let a,s;for(a=0,s=t.length;a<s;a++)Ln(t[a].label)&&(t.splice(a,1),s--,a--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const a=this.options.ticks.sampleSize;let s=this.ticks;a<s.length&&(s=vB(s,a)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,a,s){const{ctx:r,_longestTextCache:i}=this,o=[],l=[],c=Math.floor(a/bB(a,s));let u=0,d=0,f,p,x,y,N,v,j,w,S,_,E;for(f=0;f<a;f+=c){if(y=t[f].label,N=this._resolveTickFontOptions(f),r.font=v=N.string,j=i[v]=i[v]||{data:{},gc:[]},w=N.lineHeight,S=_=0,!Ln(y)&&!ss(y))S=Y8(r,j.data,j.gc,S,y),_=w;else if(ss(y))for(p=0,x=y.length;p<x;++p)E=y[p],!Ln(E)&&!ss(E)&&(S=Y8(r,j.data,j.gc,S,E),_+=w);o.push(S),l.push(_),u=Math.max(S,u),d=Math.max(_,d)}h9e(i,a);const T=o.indexOf(u),A=l.indexOf(d),L=M=>({width:o[M]||0,height:l[M]||0});return{first:L(0),last:L(a-1),widest:L(T),highest:L(A),widths:o,heights:l}}getLabelForValue(t){return t}getPixelForValue(t,a){return NaN}getValueForPixel(t){}getPixelForTick(t){const a=this.ticks;return t<0||t>a.length-1?null:this.getPixelForValue(a[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const a=this._startPixel+t*this._length;return V8e(this._alignToPixels?Qd(this.chart,a,0):a)}getDecimalForPixel(t){const a=(t-this._startPixel)/this._length;return this._reversePixels?1-a:a}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:a}=this;return t<0&&a<0?a:t>0&&a>0?t:0}getContext(t){const a=this.ticks||[];if(t>=0&&t<a.length){const s=a[t];return s.$context||(s.$context=p9e(this.getContext(),t,s))}return this.$context||(this.$context=g9e(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,a=Ll(this.labelRotation),s=Math.abs(Math.cos(a)),r=Math.abs(Math.sin(a)),i=this._getLabelSizes(),o=t.autoSkipPadding||0,l=i?i.widest.width+o:0,c=i?i.highest.height+o:0;return this.isHorizontal()?c*s>l*r?l/s:c/r:c*r<l*s?c/s:l/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const a=this.axis,s=this.chart,r=this.options,{grid:i,position:o,border:l}=r,c=i.offset,u=this.isHorizontal(),f=this.ticks.length+(c?1:0),p=Pg(i),x=[],y=l.setContext(this.getContext()),N=y.display?y.width:0,v=N/2,j=function(V){return Qd(s,V,N)};let w,S,_,E,T,A,L,M,F,$,D,q;if(o==="top")w=j(this.bottom),A=this.bottom-p,M=w-v,$=j(t.top)+v,q=t.bottom;else if(o==="bottom")w=j(this.top),$=t.top,q=j(t.bottom)-v,A=w+v,M=this.top+p;else if(o==="left")w=j(this.right),T=this.right-p,L=w-v,F=j(t.left)+v,D=t.right;else if(o==="right")w=j(this.left),F=t.left,D=j(t.right)-v,T=w+v,L=this.left+p;else if(a==="x"){if(o==="center")w=j((t.top+t.bottom)/2+.5);else if(jn(o)){const V=Object.keys(o)[0],Z=o[V];w=j(this.chart.scales[V].getPixelForValue(Z))}$=t.top,q=t.bottom,A=w+v,M=A+p}else if(a==="y"){if(o==="center")w=j((t.left+t.right)/2);else if(jn(o)){const V=Object.keys(o)[0],Z=o[V];w=j(this.chart.scales[V].getPixelForValue(Z))}T=w-v,L=T-p,F=t.left,D=t.right}const G=cn(r.ticks.maxTicksLimit,f),U=Math.max(1,Math.ceil(f/G));for(S=0;S<f;S+=U){const V=this.getContext(S),Z=i.setContext(V),Y=l.setContext(V),le=Z.lineWidth,_e=Z.color,te=Y.dash||[],ae=Y.dashOffset,ye=Z.tickWidth,Ne=Z.tickColor,he=Z.tickBorderDash||[],ve=Z.tickBorderDashOffset;_=f9e(this,S,c),_!==void 0&&(E=Qd(s,_,le),u?T=L=F=D=E:A=M=$=q=E,x.push({tx1:T,ty1:A,tx2:L,ty2:M,x1:F,y1:$,x2:D,y2:q,width:le,color:_e,borderDash:te,borderDashOffset:ae,tickWidth:ye,tickColor:Ne,tickBorderDash:he,tickBorderDashOffset:ve}))}return this._ticksLength=f,this._borderValue=w,x}_computeLabelItems(t){const a=this.axis,s=this.options,{position:r,ticks:i}=s,o=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:u,padding:d,mirror:f}=i,p=Pg(s.grid),x=p+d,y=f?-d:x,N=-Ll(this.labelRotation),v=[];let j,w,S,_,E,T,A,L,M,F,$,D,q="middle";if(r==="top")T=this.bottom-y,A=this._getXAxisLabelAlignment();else if(r==="bottom")T=this.top+y,A=this._getXAxisLabelAlignment();else if(r==="left"){const U=this._getYAxisLabelAlignment(p);A=U.textAlign,E=U.x}else if(r==="right"){const U=this._getYAxisLabelAlignment(p);A=U.textAlign,E=U.x}else if(a==="x"){if(r==="center")T=(t.top+t.bottom)/2+x;else if(jn(r)){const U=Object.keys(r)[0],V=r[U];T=this.chart.scales[U].getPixelForValue(V)+x}A=this._getXAxisLabelAlignment()}else if(a==="y"){if(r==="center")E=(t.left+t.right)/2-x;else if(jn(r)){const U=Object.keys(r)[0],V=r[U];E=this.chart.scales[U].getPixelForValue(V)}A=this._getYAxisLabelAlignment(p).textAlign}a==="y"&&(c==="start"?q="top":c==="end"&&(q="bottom"));const G=this._getLabelSizes();for(j=0,w=l.length;j<w;++j){S=l[j],_=S.label;const U=i.setContext(this.getContext(j));L=this.getPixelForTick(j)+i.labelOffset,M=this._resolveTickFontOptions(j),F=M.lineHeight,$=ss(_)?_.length:1;const V=$/2,Z=U.color,Y=U.textStrokeColor,le=U.textStrokeWidth;let _e=A;o?(E=L,A==="inner"&&(j===w-1?_e=this.options.reverse?"left":"right":j===0?_e=this.options.reverse?"right":"left":_e="center"),r==="top"?u==="near"||N!==0?D=-$*F+F/2:u==="center"?D=-G.highest.height/2-V*F+F:D=-G.highest.height+F/2:u==="near"||N!==0?D=F/2:u==="center"?D=G.highest.height/2-V*F:D=G.highest.height-$*F,f&&(D*=-1),N!==0&&!U.showLabelBackdrop&&(E+=F/2*Math.sin(N))):(T=L,D=(1-$)*F/2);let te;if(U.showLabelBackdrop){const ae=ji(U.backdropPadding),ye=G.heights[j],Ne=G.widths[j];let he=D-ae.top,ve=0-ae.left;switch(q){case"middle":he-=ye/2;break;case"bottom":he-=ye;break}switch(A){case"center":ve-=Ne/2;break;case"right":ve-=Ne;break;case"inner":j===w-1?ve-=Ne:j>0&&(ve-=Ne/2);break}te={left:ve,top:he,width:Ne+ae.width,height:ye+ae.height,color:U.backdropColor}}v.push({label:_,font:M,textOffset:D,options:{rotation:N,color:Z,strokeColor:Y,strokeWidth:le,textAlign:_e,textBaseline:q,translation:[E,T],backdrop:te}})}return v}_getXAxisLabelAlignment(){const{position:t,ticks:a}=this.options;if(-Ll(this.labelRotation))return t==="top"?"left":"right";let r="center";return a.align==="start"?r="left":a.align==="end"?r="right":a.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:a,ticks:{crossAlign:s,mirror:r,padding:i}}=this.options,o=this._getLabelSizes(),l=t+i,c=o.widest.width;let u,d;return a==="left"?r?(d=this.right+i,s==="near"?u="left":s==="center"?(u="center",d+=c/2):(u="right",d+=c)):(d=this.right-l,s==="near"?u="right":s==="center"?(u="center",d-=c/2):(u="left",d=this.left)):a==="right"?r?(d=this.left+i,s==="near"?u="right":s==="center"?(u="center",d-=c/2):(u="left",d-=c)):(d=this.left+l,s==="near"?u="left":s==="center"?(u="center",d+=c/2):(u="right",d=this.right)):u="right",{textAlign:u,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,a=this.options.position;if(a==="left"||a==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(a==="top"||a==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:a},left:s,top:r,width:i,height:o}=this;a&&(t.save(),t.fillStyle=a,t.fillRect(s,r,i,o),t.restore())}getLineWidthForValue(t){const a=this.options.grid;if(!this._isVisible()||!a.display)return 0;const r=this.ticks.findIndex(i=>i.value===t);return r>=0?a.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const a=this.options.grid,s=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let i,o;const l=(c,u,d)=>{!d.width||!d.color||(s.save(),s.lineWidth=d.width,s.strokeStyle=d.color,s.setLineDash(d.borderDash||[]),s.lineDashOffset=d.borderDashOffset,s.beginPath(),s.moveTo(c.x,c.y),s.lineTo(u.x,u.y),s.stroke(),s.restore())};if(a.display)for(i=0,o=r.length;i<o;++i){const c=r[i];a.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),a.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:a,options:{border:s,grid:r}}=this,i=s.setContext(this.getContext()),o=s.display?i.width:0;if(!o)return;const l=r.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let u,d,f,p;this.isHorizontal()?(u=Qd(t,this.left,o)-o/2,d=Qd(t,this.right,l)+l/2,f=p=c):(f=Qd(t,this.top,o)-o/2,p=Qd(t,this.bottom,l)+l/2,u=d=c),a.save(),a.lineWidth=i.width,a.strokeStyle=i.color,a.beginPath(),a.moveTo(u,f),a.lineTo(d,p),a.stroke(),a.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,r=this._computeLabelArea();r&&l3(s,r);const i=this.getLabelItems(t);for(const o of i){const l=o.options,c=o.font,u=o.label,d=o.textOffset;Xp(s,u,0,d,c,l)}r&&c3(s)}drawTitle(){const{ctx:t,options:{position:a,title:s,reverse:r}}=this;if(!s.display)return;const i=$s(s.font),o=ji(s.padding),l=s.align;let c=i.lineHeight/2;a==="bottom"||a==="center"||jn(a)?(c+=o.bottom,ss(s.text)&&(c+=i.lineHeight*(s.text.length-1))):c+=o.top;const{titleX:u,titleY:d,maxWidth:f,rotation:p}=y9e(this,c,a,l);Xp(t,s.text,0,0,i,{color:s.color,maxWidth:f,rotation:p,textAlign:x9e(l,a,r),textBaseline:"middle",translation:[u,d]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,a=t.ticks&&t.ticks.z||0,s=cn(t.grid&&t.grid.z,-1),r=cn(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==bh.prototype.draw?[{z:a,draw:i=>{this.draw(i)}}]:[{z:s,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:a,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(t){const a=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",r=[];let i,o;for(i=0,o=a.length;i<o;++i){const l=a[i];l[s]===this.id&&(!t||l.type===t)&&r.push(l)}return r}_resolveTickFontOptions(t){const a=this.options.ticks.setContext(this.getContext(t));return $s(a.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Ib{constructor(t,a,s){this.type=t,this.scope=a,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const a=Object.getPrototypeOf(t);let s;w9e(a)&&(s=this.register(a));const r=this.items,i=t.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+t);return i in r||(r[i]=t,b9e(t,o,s),this.override&&Oa.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const a=this.items,s=t.id,r=this.scope;s in a&&delete a[s],r&&s in Oa[r]&&(delete Oa[r][s],this.override&&delete Vu[s])}}function b9e(e,t,a){const s=Gp(Object.create(null),[a?Oa.get(a):{},Oa.get(t),e.defaults]);Oa.set(t,s),e.defaultRoutes&&v9e(t,e.defaultRoutes),e.descriptors&&Oa.describe(t,e.descriptors)}function v9e(e,t){Object.keys(t).forEach(a=>{const s=a.split("."),r=s.pop(),i=[e].concat(s).join("."),o=t[a].split("."),l=o.pop(),c=o.join(".");Oa.route(i,r,c,l)})}function w9e(e){return"id"in e&&"defaults"in e}class N9e{constructor(){this.controllers=new Ib(w1,"datasets",!0),this.elements=new Ib(dc,"elements"),this.plugins=new Ib(Object,"plugins"),this.scales=new Ib(bh,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,a,s){[...a].forEach(r=>{const i=s||this._getRegistryForType(r);s||i.isForType(r)||i===this.plugins&&r.id?this._exec(t,i,r):In(r,o=>{const l=s||this._getRegistryForType(o);this._exec(t,l,o)})})}_exec(t,a,s){const r=a3(t);ta(s["before"+r],[],s),a[t](s),ta(s["after"+r],[],s)}_getRegistryForType(t){for(let a=0;a<this._typedRegistries.length;a++){const s=this._typedRegistries[a];if(s.isForType(t))return s}return this.plugins}_get(t,a,s){const r=a.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return r}}var bo=new N9e;class j9e{constructor(){this._init=void 0}notify(t,a,s,r){if(a==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const i=r?this._descriptors(t).filter(r):this._descriptors(t),o=this._notify(i,t,a,s);return a==="afterDestroy"&&(this._notify(i,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),o}_notify(t,a,s,r){r=r||{};for(const i of t){const o=i.plugin,l=o[s],c=[a,r,i.options];if(ta(l,c,o)===!1&&r.cancelable)return!1}return!0}invalidate(){Ln(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const a=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),a}_createDescriptors(t,a){const s=t&&t.config,r=cn(s.options&&s.options.plugins,{}),i=C9e(s);return r===!1&&!a?[]:_9e(t,i,r,a)}_notifyStateChanges(t){const a=this._oldCache||[],s=this._cache,r=(i,o)=>i.filter(l=>!o.some(c=>l.plugin.id===c.plugin.id));this._notify(r(a,s),t,"stop"),this._notify(r(s,a),t,"start")}}function C9e(e){const t={},a=[],s=Object.keys(bo.plugins.items);for(let i=0;i<s.length;i++)a.push(bo.getPlugin(s[i]));const r=e.plugins||[];for(let i=0;i<r.length;i++){const o=r[i];a.indexOf(o)===-1&&(a.push(o),t[o.id]=!0)}return{plugins:a,localIds:t}}function S9e(e,t){return!t&&e===!1?null:e===!0?{}:e}function _9e(e,{plugins:t,localIds:a},s,r){const i=[],o=e.getContext();for(const l of t){const c=l.id,u=S9e(s[c],r);u!==null&&i.push({plugin:l,options:A9e(e.config,{plugin:l,local:a[c]},u,o)})}return i}function A9e(e,{plugin:t,local:a},s,r){const i=e.pluginScopeKeys(t),o=e.getOptionScopes(s,i);return a&&t.defaults&&o.push(t.defaults),e.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function rL(e,t){const a=Oa.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||a.indexAxis||"x"}function T9e(e,t){let a=e;return e==="_index_"?a=t:e==="_value_"&&(a=t==="x"?"y":"x"),a}function k9e(e,t){return e===t?"_index_":"_value_"}function NB(e){if(e==="x"||e==="y"||e==="r")return e}function E9e(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function iL(e,...t){if(NB(e))return e;for(const a of t){const s=a.axis||E9e(a.position)||e.length>1&&NB(e[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function jB(e,t,a){if(a[t+"AxisID"]===e)return{axis:t}}function L9e(e,t){if(t.data&&t.data.datasets){const a=t.data.datasets.filter(s=>s.xAxisID===e||s.yAxisID===e);if(a.length)return jB(e,"x",a[0])||jB(e,"y",a[0])}return{}}function P9e(e,t){const a=Vu[e.type]||{scales:{}},s=t.scales||{},r=rL(e.type,t),i=Object.create(null);return Object.keys(s).forEach(o=>{const l=s[o];if(!jn(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=iL(o,l,L9e(o,e),Oa.scales[l.type]),u=k9e(c,r),d=a.scales||{};i[o]=lp(Object.create(null),[{axis:c},l,d[c],d[u]])}),e.data.datasets.forEach(o=>{const l=o.type||e.type,c=o.indexAxis||rL(l,t),d=(Vu[l]||{}).scales||{};Object.keys(d).forEach(f=>{const p=T9e(f,c),x=o[p+"AxisID"]||p;i[x]=i[x]||Object.create(null),lp(i[x],[{axis:p},s[x],d[f]])})}),Object.keys(i).forEach(o=>{const l=i[o];lp(l,[Oa.scales[l.type],Oa.scale])}),i}function JJ(e){const t=e.options||(e.options={});t.plugins=cn(t.plugins,{}),t.scales=P9e(e,t)}function eee(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function D9e(e){return e=e||{},e.data=eee(e.data),JJ(e),e}const CB=new Map,tee=new Set;function $b(e,t){let a=CB.get(e);return a||(a=t(),CB.set(e,a),tee.add(a)),a}const Dg=(e,t,a)=>{const s=Gu(t,a);s!==void 0&&e.add(s)};class O9e{constructor(t){this._config=D9e(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=eee(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),JJ(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return $b(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,a){return $b(`${t}.transition.${a}`,()=>[[`datasets.${t}.transitions.${a}`,`transitions.${a}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,a){return $b(`${t}-${a}`,()=>[[`datasets.${t}.elements.${a}`,`datasets.${t}`,`elements.${a}`,""]])}pluginScopeKeys(t){const a=t.id,s=this.type;return $b(`${s}-plugin-${a}`,()=>[[`plugins.${a}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,a){const s=this._scopeCache;let r=s.get(t);return(!r||a)&&(r=new Map,s.set(t,r)),r}getOptionScopes(t,a,s){const{options:r,type:i}=this,o=this._cachedScopes(t,s),l=o.get(a);if(l)return l;const c=new Set;a.forEach(d=>{t&&(c.add(t),d.forEach(f=>Dg(c,t,f))),d.forEach(f=>Dg(c,r,f)),d.forEach(f=>Dg(c,Vu[i]||{},f)),d.forEach(f=>Dg(c,Oa,f)),d.forEach(f=>Dg(c,aL,f))});const u=Array.from(c);return u.length===0&&u.push(Object.create(null)),tee.has(a)&&o.set(a,u),u}chartOptionScopes(){const{options:t,type:a}=this;return[t,Vu[a]||{},Oa.datasets[a]||{},{type:a},Oa,aL]}resolveNamedOptions(t,a,s,r=[""]){const i={$shared:!0},{resolver:o,subPrefixes:l}=SB(this._resolverCache,t,r);let c=o;if(I9e(o,a)){i.$shared=!1,s=vd(s)?s():s;const u=this.createResolver(t,s,l);c=qf(o,s,u)}for(const u of a)i[u]=c[u];return i}createResolver(t,a,s=[""],r){const{resolver:i}=SB(this._resolverCache,t,s);return jn(a)?qf(i,a,void 0,r):i}}function SB(e,t,a){let s=e.get(t);s||(s=new Map,e.set(t,s));const r=a.join();let i=s.get(r);return i||(i={resolver:u3(t,a),subPrefixes:a.filter(l=>!l.toLowerCase().includes("hover"))},s.set(r,i)),i}const M9e=e=>jn(e)&&Object.getOwnPropertyNames(e).some(t=>vd(e[t]));function I9e(e,t){const{isScriptable:a,isIndexable:s}=$J(e);for(const r of t){const i=a(r),o=s(r),l=(o||i)&&e[r];if(i&&(vd(l)||M9e(l))||o&&ss(l))return!0}return!1}var $9e="4.5.1";const R9e=["top","bottom","left","right","chartArea"];function _B(e,t){return e==="top"||e==="bottom"||R9e.indexOf(e)===-1&&t==="x"}function AB(e,t){return function(a,s){return a[e]===s[e]?a[t]-s[t]:a[e]-s[e]}}function TB(e){const t=e.chart,a=t.options.animation;t.notifyPlugins("afterRender"),ta(a&&a.onComplete,[e],t)}function z9e(e){const t=e.chart,a=t.options.animation;ta(a&&a.onProgress,[e],t)}function nee(e){return h3()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const mv={},kB=e=>{const t=nee(e);return Object.values(mv).filter(a=>a.canvas===t).pop()};function F9e(e,t,a){const s=Object.keys(e);for(const r of s){const i=+r;if(i>=t){const o=e[r];delete e[r],(a>0||i>t)&&(e[i+a]=o)}}}function U9e(e,t,a,s){return!a||e.type==="mouseout"?null:s?t:e}let j1=class{static defaults=Oa;static instances=mv;static overrides=Vu;static registry=bo;static version=$9e;static getChart=kB;static register(...t){bo.add(...t),EB()}static unregister(...t){bo.remove(...t),EB()}constructor(t,a){const s=this.config=new O9e(a),r=nee(t),i=kB(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||r9e(r)),this.platform.updateConfig(s);const l=this.platform.acquireContext(r,o.aspectRatio),c=l&&l.canvas,u=c&&c.height,d=c&&c.width;if(this.id=P8e(),this.ctx=l,this.canvas=c,this.width=d,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new j9e,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=X8e(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],mv[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}Nl.listen(this,"complete",TB),Nl.listen(this,"progress",z9e),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:a},width:s,height:r,_aspectRatio:i}=this;return Ln(t)?a&&i?i:r?s/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return bo}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Z8(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Q8(this.canvas,this.ctx),this}stop(){return Nl.stop(this),this}resize(t,a){Nl.running(this)?this._resizeBeforeDraw={width:t,height:a}:this._resize(t,a)}_resize(t,a){const s=this.options,r=this.canvas,i=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,t,a,i),l=s.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Z8(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),ta(s.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const a=this.options.scales||{};In(a,(s,r)=>{s.id=r})}buildOrUpdateScales(){const t=this.options,a=t.scales,s=this.scales,r=Object.keys(s).reduce((o,l)=>(o[l]=!1,o),{});let i=[];a&&(i=i.concat(Object.keys(a).map(o=>{const l=a[o],c=iL(o,l),u=c==="r",d=c==="x";return{options:l,dposition:u?"chartArea":d?"bottom":"left",dtype:u?"radialLinear":d?"category":"linear"}}))),In(i,o=>{const l=o.options,c=l.id,u=iL(c,l),d=cn(l.type,o.dtype);(l.position===void 0||_B(l.position,u)!==_B(o.dposition))&&(l.position=o.dposition),r[c]=!0;let f=null;if(c in s&&s[c].type===d)f=s[c];else{const p=bo.getScale(d);f=new p({id:c,type:d,ctx:this.ctx,chart:this}),s[f.id]=f}f.init(l,t)}),In(r,(o,l)=>{o||delete s[l]}),In(s,o=>{hi.configure(this,o,o.options),hi.addBox(this,o)})}_updateMetasets(){const t=this._metasets,a=this.data.datasets.length,s=t.length;if(t.sort((r,i)=>r.index-i.index),s>a){for(let r=a;r<s;++r)this._destroyDatasetMeta(r);t.splice(a,s-a)}this._sortedMetasets=t.slice(0).sort(AB("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:a}}=this;t.length>a.length&&delete this._stacks,t.forEach((s,r)=>{a.filter(i=>i===s._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],a=this.data.datasets;let s,r;for(this._removeUnreferencedMetasets(),s=0,r=a.length;s<r;s++){const i=a[s];let o=this.getDatasetMeta(s);const l=i.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=l,o.indexAxis=i.indexAxis||rL(l,this.options),o.order=i.order||0,o.index=s,o.label=""+i.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const c=bo.getController(l),{datasetElementType:u,dataElementType:d}=Oa.datasets[l];Object.assign(c,{dataElementType:bo.getElement(d),datasetElementType:u&&bo.getElement(u)}),o.controller=new c(this,s),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){In(this.data.datasets,(t,a)=>{this.getDatasetMeta(a).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const a=this.config;a.update();const s=this._options=a.createResolver(a.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,d=this.data.datasets.length;u<d;u++){const{controller:f}=this.getDatasetMeta(u),p=!r&&i.indexOf(f)===-1;f.buildOrUpdateElements(p),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),r||In(i,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(AB("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){In(this.scales,t=>{hi.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,a=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!z8(a,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,a=this._getUniformDataChanges()||[];for(const{method:s,start:r,count:i}of a){const o=s==="_removeElements"?-i:i;F9e(t,r,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const a=this.data.datasets.length,s=i=>new Set(t.filter(o=>o[0]===i).map((o,l)=>l+","+o.splice(1).join(","))),r=s(0);for(let i=1;i<a;i++)if(!z8(r,s(i)))return;return Array.from(r).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;hi.update(this,this.width,this.height,t);const a=this.chartArea,s=a.width<=0||a.height<=0;this._layers=[],In(this.boxes,r=>{s&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,i)=>{r._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let a=0,s=this.data.datasets.length;a<s;++a)this.getDatasetMeta(a).controller.configure();for(let a=0,s=this.data.datasets.length;a<s;++a)this._updateDataset(a,vd(t)?t({datasetIndex:a}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,a){const s=this.getDatasetMeta(t),r={meta:s,index:t,mode:a,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(s.controller._update(a),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Nl.has(this)?this.attached&&!Nl.running(this)&&Nl.start(this):(this.draw(),TB({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const a=this._layers;for(t=0;t<a.length&&a[t].z<=0;++t)a[t].draw(this.chartArea);for(this._drawDatasets();t<a.length;++t)a[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const a=this._sortedMetasets,s=[];let r,i;for(r=0,i=a.length;r<i;++r){const o=a[r];(!t||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let a=t.length-1;a>=0;--a)this._drawDataset(t[a]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const a=this.ctx,s={meta:t,index:t.index,cancelable:!0},r=aHe(this,t);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(r&&l3(a,r),t.controller.draw(),r&&c3(a),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return Kp(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,a,s,r){const i=RHe.modes[a];return typeof i=="function"?i(this,t,s,r):[]}getDatasetMeta(t){const a=this.data.datasets[t],s=this._metasets;let r=s.filter(i=>i&&i._dataset===a).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:a&&a.order||0,index:t,_dataset:a,_parsed:[],_sorted:!1},s.push(r)),r}getContext(){return this.$context||(this.$context=om(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const a=this.data.datasets[t];if(!a)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!a.hidden}setDatasetVisibility(t,a){const s=this.getDatasetMeta(t);s.hidden=!a}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,a,s){const r=s?"show":"hide",i=this.getDatasetMeta(t),o=i.controller._resolveAnimations(void 0,r);Vp(a)?(i.data[a].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),o.update(i,{visible:s}),this.update(l=>l.datasetIndex===t?r:void 0))}hide(t,a){this._updateVisibility(t,a,!1)}show(t,a){this._updateVisibility(t,a,!0)}_destroyDatasetMeta(t){const a=this._metasets[t];a&&a.controller&&a.controller._destroy(),delete this._metasets[t]}_stop(){let t,a;for(this.stop(),Nl.remove(this),t=0,a=this.data.datasets.length;t<a;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:a}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Q8(t,a),this.platform.releaseContext(a),this.canvas=null,this.ctx=null),delete mv[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,a=this.platform,s=(i,o)=>{a.addEventListener(this,i,o),t[i]=o},r=(i,o,l)=>{i.offsetX=o,i.offsetY=l,this._eventHandler(i)};In(this.options.events,i=>s(i,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,a=this.platform,s=(c,u)=>{a.addEventListener(this,c,u),t[c]=u},r=(c,u)=>{t[c]&&(a.removeEventListener(this,c,u),delete t[c])},i=(c,u)=>{this.canvas&&this.resize(c,u)};let o;const l=()=>{r("attach",l),this.attached=!0,this.resize(),s("resize",i),s("detach",o)};o=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),s("attach",l)},a.isAttached(this.canvas)?l():o()}unbindEvents(){In(this._listeners,(t,a)=>{this.platform.removeEventListener(this,a,t)}),this._listeners={},In(this._responsiveListeners,(t,a)=>{this.platform.removeEventListener(this,a,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,a,s){const r=s?"set":"remove";let i,o,l,c;for(a==="dataset"&&(i=this.getDatasetMeta(t[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),l=0,c=t.length;l<c;++l){o=t[l];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const a=this._active||[],s=t.map(({datasetIndex:i,index:o})=>{const l=this.getDatasetMeta(i);if(!l)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:l.data[o],index:o}});!zw(s,a)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,a))}notifyPlugins(t,a,s){return this._plugins.notify(this,t,a,s)}isPluginEnabled(t){return this._plugins._cache.filter(a=>a.plugin.id===t).length===1}_updateHoverStyles(t,a,s){const r=this.options.hover,i=(c,u)=>c.filter(d=>!u.some(f=>d.datasetIndex===f.datasetIndex&&d.index===f.index)),o=i(a,t),l=s?t:i(t,a);o.length&&this.updateHoverStyle(o,r.mode,!1),l.length&&r.mode&&this.updateHoverStyle(l,r.mode,!0)}_eventHandler(t,a){const s={event:t,replay:a,cancelable:!0,inChartArea:this.isPointInArea(t)},r=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,r)===!1)return;const i=this._handleEvent(t,a,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,r),(i||s.changed)&&this.render(),this}_handleEvent(t,a,s){const{_active:r=[],options:i}=this,o=a,l=this._getActiveElements(t,r,s,o),c=R8e(t),u=U9e(t,this._lastEvent,s,c);s&&(this._lastEvent=null,ta(i.onHover,[t,l,this],this),c&&ta(i.onClick,[t,l,this],this));const d=!zw(l,r);return(d||a)&&(this._active=l,this._updateHoverStyles(l,r,a)),this._lastEvent=u,d}_getActiveElements(t,a,s,r){if(t.type==="mouseout")return[];if(!s)return a;const i=this.options.hover;return this.getElementsAtEventForMode(t,i.mode,i,r)}};function EB(){return In(j1.instances,e=>e._plugins.invalidate())}function B9e(e,t,a){const{startAngle:s,x:r,y:i,outerRadius:o,innerRadius:l,options:c}=t,{borderWidth:u,borderJoinStyle:d}=c,f=Math.min(u/o,zi(s-a));if(e.beginPath(),e.arc(r,i,o-u/2,s+f/2,a-f/2),l>0){const p=Math.min(u/l,zi(s-a));e.arc(r,i,l+u/2,a-p/2,s+p/2,!0)}else{const p=Math.min(u/2,o*zi(s-a));if(d==="round")e.arc(r,i,p,a-Rn/2,s+Rn/2,!0);else if(d==="bevel"){const x=2*p*p,y=-x*Math.cos(a+Rn/2)+r,N=-x*Math.sin(a+Rn/2)+i,v=x*Math.cos(s+Rn/2)+r,j=x*Math.sin(s+Rn/2)+i;e.lineTo(y,N),e.lineTo(v,j)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}function H9e(e,t,a){const{startAngle:s,pixelMargin:r,x:i,y:o,outerRadius:l,innerRadius:c}=t;let u=r/l;e.beginPath(),e.arc(i,o,l,s-u,a+u),c>r?(u=r/c,e.arc(i,o,c,a+u,s-u,!0)):e.arc(i,o,r,a+rs,s-rs),e.closePath(),e.clip()}function q9e(e){return d3(e,["outerStart","outerEnd","innerStart","innerEnd"])}function W9e(e,t,a,s){const r=q9e(e.options.borderRadius),i=(a-t)/2,o=Math.min(i,s*t/2),l=c=>{const u=(a-Math.min(i,c))*s/2;return Is(c,0,Math.min(i,u))};return{outerStart:l(r.outerStart),outerEnd:l(r.outerEnd),innerStart:Is(r.innerStart,0,o),innerEnd:Is(r.innerEnd,0,o)}}function af(e,t,a,s){return{x:a+e*Math.cos(t),y:s+e*Math.sin(t)}}function Ww(e,t,a,s,r,i){const{x:o,y:l,startAngle:c,pixelMargin:u,innerRadius:d}=t,f=Math.max(t.outerRadius+s+a-u,0),p=d>0?d+s+a+u:0;let x=0;const y=r-c;if(s){const U=d>0?d-s:0,V=f>0?f-s:0,Z=(U+V)/2,Y=Z!==0?y*Z/(Z+s):y;x=(y-Y)/2}const N=Math.max(.001,y*f-a/Rn)/f,v=(y-N)/2,j=c+v+x,w=r-v-x,{outerStart:S,outerEnd:_,innerStart:E,innerEnd:T}=W9e(t,p,f,w-j),A=f-S,L=f-_,M=j+S/A,F=w-_/L,$=p+E,D=p+T,q=j+E/$,G=w-T/D;if(e.beginPath(),i){const U=(M+F)/2;if(e.arc(o,l,f,M,U),e.arc(o,l,f,U,F),_>0){const le=af(L,F,o,l);e.arc(le.x,le.y,_,F,w+rs)}const V=af(D,w,o,l);if(e.lineTo(V.x,V.y),T>0){const le=af(D,G,o,l);e.arc(le.x,le.y,T,w+rs,G+Math.PI)}const Z=(w-T/p+(j+E/p))/2;if(e.arc(o,l,p,w-T/p,Z,!0),e.arc(o,l,p,Z,j+E/p,!0),E>0){const le=af($,q,o,l);e.arc(le.x,le.y,E,q+Math.PI,j-rs)}const Y=af(A,j,o,l);if(e.lineTo(Y.x,Y.y),S>0){const le=af(A,M,o,l);e.arc(le.x,le.y,S,j-rs,M)}}else{e.moveTo(o,l);const U=Math.cos(M)*f+o,V=Math.sin(M)*f+l;e.lineTo(U,V);const Z=Math.cos(F)*f+o,Y=Math.sin(F)*f+l;e.lineTo(Z,Y)}e.closePath()}function G9e(e,t,a,s,r){const{fullCircles:i,startAngle:o,circumference:l}=t;let c=t.endAngle;if(i){Ww(e,t,a,s,c,r);for(let u=0;u<i;++u)e.fill();isNaN(l)||(c=o+(l%_a||_a))}return Ww(e,t,a,s,c,r),e.fill(),c}function V9e(e,t,a,s,r){const{fullCircles:i,startAngle:o,circumference:l,options:c}=t,{borderWidth:u,borderJoinStyle:d,borderDash:f,borderDashOffset:p,borderRadius:x}=c,y=c.borderAlign==="inner";if(!u)return;e.setLineDash(f||[]),e.lineDashOffset=p,y?(e.lineWidth=u*2,e.lineJoin=d||"round"):(e.lineWidth=u,e.lineJoin=d||"bevel");let N=t.endAngle;if(i){Ww(e,t,a,s,N,r);for(let v=0;v<i;++v)e.stroke();isNaN(l)||(N=o+(l%_a||_a))}y&&H9e(e,t,N),c.selfJoin&&N-o>=Rn&&x===0&&d!=="miter"&&B9e(e,t,N),i||(Ww(e,t,a,s,N,r),e.stroke())}class Y9e extends dc{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,a,s){const r=this.getProps(["x","y"],s),{angle:i,distance:o}=kJ(r,{x:t,y:a}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:d,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),p=(this.options.spacing+this.options.borderWidth)/2,x=cn(f,c-l),y=Qp(i,l,c)&&l!==c,N=x>=_a||y,v=nd(o,u+p,d+p);return N&&v}getCenterPoint(t){const{x:a,y:s,startAngle:r,endAngle:i,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:c,spacing:u}=this.options,d=(r+i)/2,f=(o+l+u+c)/2;return{x:a+Math.cos(d)*f,y:s+Math.sin(d)*f}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:a,circumference:s}=this,r=(a.offset||0)/4,i=(a.spacing||0)/2,o=a.circular;if(this.pixelMargin=a.borderAlign==="inner"?.33:0,this.fullCircles=s>_a?Math.floor(s/_a):0,s===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const l=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(l)*r,Math.sin(l)*r);const c=1-Math.sin(Math.min(Rn,s||0)),u=r*c;t.fillStyle=a.backgroundColor,t.strokeStyle=a.borderColor,G9e(t,this,u,i,o),V9e(t,this,u,i,o),t.restore()}}function aee(e,t,a=t){e.lineCap=cn(a.borderCapStyle,t.borderCapStyle),e.setLineDash(cn(a.borderDash,t.borderDash)),e.lineDashOffset=cn(a.borderDashOffset,t.borderDashOffset),e.lineJoin=cn(a.borderJoinStyle,t.borderJoinStyle),e.lineWidth=cn(a.borderWidth,t.borderWidth),e.strokeStyle=cn(a.borderColor,t.borderColor)}function Q9e(e,t,a){e.lineTo(a.x,a.y)}function K9e(e){return e.stepped?uBe:e.tension||e.cubicInterpolationMode==="monotone"?mBe:Q9e}function see(e,t,a={}){const s=e.length,{start:r=0,end:i=s-1}=a,{start:o,end:l}=t,c=Math.max(r,o),u=Math.min(i,l),d=r<o&&i<o||r>l&&i>l;return{count:s,start:c,loop:t.loop,ilen:u<c&&!d?s+u-c:u-c}}function X9e(e,t,a,s){const{points:r,options:i}=t,{count:o,start:l,loop:c,ilen:u}=see(r,a,s),d=K9e(i);let{move:f=!0,reverse:p}=s||{},x,y,N;for(x=0;x<=u;++x)y=r[(l+(p?u-x:x))%o],!y.skip&&(f?(e.moveTo(y.x,y.y),f=!1):d(e,N,y,p,i.stepped),N=y);return c&&(y=r[(l+(p?u:0))%o],d(e,N,y,p,i.stepped)),!!c}function Z9e(e,t,a,s){const r=t.points,{count:i,start:o,ilen:l}=see(r,a,s),{move:c=!0,reverse:u}=s||{};let d=0,f=0,p,x,y,N,v,j;const w=_=>(o+(u?l-_:_))%i,S=()=>{N!==v&&(e.lineTo(d,v),e.lineTo(d,N),e.lineTo(d,j))};for(c&&(x=r[w(0)],e.moveTo(x.x,x.y)),p=0;p<=l;++p){if(x=r[w(p)],x.skip)continue;const _=x.x,E=x.y,T=_|0;T===y?(E<N?N=E:E>v&&(v=E),d=(f*d+_)/++f):(S(),e.lineTo(_,E),y=T,f=0,N=v=E),j=E}S()}function oL(e){const t=e.options,a=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!a?Z9e:X9e}function J9e(e){return e.stepped?qBe:e.tension||e.cubicInterpolationMode==="monotone"?WBe:su}function eqe(e,t,a,s){let r=t._path;r||(r=t._path=new Path2D,t.path(r,a,s)&&r.closePath()),aee(e,t.options),e.stroke(r)}function tqe(e,t,a,s){const{segments:r,options:i}=t,o=oL(t);for(const l of r)aee(e,i,l.style),e.beginPath(),o(e,t,l,{start:a,end:a+s-1})&&e.closePath(),e.stroke()}const nqe=typeof Path2D=="function";function aqe(e,t,a,s){nqe&&!t.options.segment?eqe(e,t,a,s):tqe(e,t,a,s)}class sqe extends dc{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,a){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const r=s.spanGaps?this._loop:this._fullLoop;IBe(this._points,s,t,r,a),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=JBe(this,this.options.segment))}first(){const t=this.segments,a=this.points;return t.length&&a[t[0].start]}last(){const t=this.segments,a=this.points,s=t.length;return s&&a[t[s-1].end]}interpolate(t,a){const s=this.options,r=t[a],i=this.points,o=KBe(this,{property:a,start:r,end:r});if(!o.length)return;const l=[],c=J9e(s);let u,d;for(u=0,d=o.length;u<d;++u){const{start:f,end:p}=o[u],x=i[f],y=i[p];if(x===y){l.push(x);continue}const N=Math.abs((r-x[a])/(y[a]-x[a])),v=c(x,y,N,s.stepped);v[a]=t[a],l.push(v)}return l.length===1?l[0]:l}pathSegment(t,a,s){return oL(this)(t,this,a,s)}path(t,a,s){const r=this.segments,i=oL(this);let o=this._loop;a=a||0,s=s||this.points.length-a;for(const l of r)o&=i(t,this,l,{start:a,end:a+s-1});return!!o}draw(t,a,s,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(t.save(),aqe(t,this,s,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function LB(e,t,a,s){const r=e.options,{[a]:i}=e.getProps([a],s);return Math.abs(t-i)<r.radius+r.hitRadius}class rqe extends dc{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,a,s){const r=this.options,{x:i,y:o}=this.getProps(["x","y"],s);return Math.pow(t-i,2)+Math.pow(a-o,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(t,a){return LB(this,t,"x",a)}inYRange(t,a){return LB(this,t,"y",a)}getCenterPoint(t){const{x:a,y:s}=this.getProps(["x","y"],t);return{x:a,y:s}}size(t){t=t||this.options||{};let a=t.radius||0;a=Math.max(a,a&&t.hoverRadius||0);const s=a&&t.borderWidth||0;return(a+s)*2}draw(t,a){const s=this.options;this.skip||s.radius<.1||!Kp(this,a,this.size(s)/2)||(t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.fillStyle=s.backgroundColor,sL(t,s,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function ree(e,t){const{x:a,y:s,base:r,width:i,height:o}=e.getProps(["x","y","base","width","height"],t);let l,c,u,d,f;return e.horizontal?(f=o/2,l=Math.min(a,r),c=Math.max(a,r),u=s-f,d=s+f):(f=i/2,l=a-f,c=a+f,u=Math.min(s,r),d=Math.max(s,r)),{left:l,top:u,right:c,bottom:d}}function sd(e,t,a,s){return e?0:Is(t,a,s)}function iqe(e,t,a){const s=e.options.borderWidth,r=e.borderSkipped,i=IJ(s);return{t:sd(r.top,i.top,0,a),r:sd(r.right,i.right,0,t),b:sd(r.bottom,i.bottom,0,a),l:sd(r.left,i.left,0,t)}}function oqe(e,t,a){const{enableBorderRadius:s}=e.getProps(["enableBorderRadius"]),r=e.options.borderRadius,i=jf(r),o=Math.min(t,a),l=e.borderSkipped,c=s||jn(r);return{topLeft:sd(!c||l.top||l.left,i.topLeft,0,o),topRight:sd(!c||l.top||l.right,i.topRight,0,o),bottomLeft:sd(!c||l.bottom||l.left,i.bottomLeft,0,o),bottomRight:sd(!c||l.bottom||l.right,i.bottomRight,0,o)}}function lqe(e){const t=ree(e),a=t.right-t.left,s=t.bottom-t.top,r=iqe(e,a/2,s/2),i=oqe(e,a/2,s/2);return{outer:{x:t.left,y:t.top,w:a,h:s,radius:i},inner:{x:t.left+r.l,y:t.top+r.t,w:a-r.l-r.r,h:s-r.t-r.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,i.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(r.b,r.r))}}}}function yT(e,t,a,s){const r=t===null,i=a===null,l=e&&!(r&&i)&&ree(e,s);return l&&(r||nd(t,l.left,l.right))&&(i||nd(a,l.top,l.bottom))}function cqe(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function dqe(e,t){e.rect(t.x,t.y,t.w,t.h)}function bT(e,t,a={}){const s=e.x!==a.x?-t:0,r=e.y!==a.y?-t:0,i=(e.x+e.w!==a.x+a.w?t:0)-s,o=(e.y+e.h!==a.y+a.h?t:0)-r;return{x:e.x+s,y:e.y+r,w:e.w+i,h:e.h+o,radius:e.radius}}class uqe extends dc{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:a,options:{borderColor:s,backgroundColor:r}}=this,{inner:i,outer:o}=lqe(this),l=cqe(o.radius)?Bw:dqe;t.save(),(o.w!==i.w||o.h!==i.h)&&(t.beginPath(),l(t,bT(o,a,i)),t.clip(),l(t,bT(i,-a,o)),t.fillStyle=s,t.fill("evenodd")),t.beginPath(),l(t,bT(i,a)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,a,s){return yT(this,t,a,s)}inXRange(t,a){return yT(this,t,null,a)}inYRange(t,a){return yT(this,null,t,a)}getCenterPoint(t){const{x:a,y:s,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],t);return{x:i?(a+r)/2:a,y:i?s:(s+r)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}const PB=(e,t)=>{let{boxHeight:a=t,boxWidth:s=t}=e;return e.usePointStyle&&(a=Math.min(a,t),s=e.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:a,itemHeight:Math.max(t,a)}},mqe=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class DB extends dc{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,a,s){this.maxWidth=t,this.maxHeight=a,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let a=ta(t.generateLabels,[this.chart],this)||[];t.filter&&(a=a.filter(s=>t.filter(s,this.chart.data))),t.sort&&(a=a.sort((s,r)=>t.sort(s,r,this.chart.data))),this.options.reverse&&a.reverse(),this.legendItems=a}fit(){const{options:t,ctx:a}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,r=$s(s.font),i=r.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=PB(s,i);let u,d;a.font=r.string,this.isHorizontal()?(u=this.maxWidth,d=this._fitRows(o,i,l,c)+10):(d=this.maxHeight,u=this._fitCols(o,r,l,c)+10),this.width=Math.min(u,t.maxWidth||this.maxWidth),this.height=Math.min(d,t.maxHeight||this.maxHeight)}_fitRows(t,a,s,r){const{ctx:i,maxWidth:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],u=this.lineWidths=[0],d=r+l;let f=t;i.textAlign="left",i.textBaseline="middle";let p=-1,x=-d;return this.legendItems.forEach((y,N)=>{const v=s+a/2+i.measureText(y.text).width;(N===0||u[u.length-1]+v+2*l>o)&&(f+=d,u[u.length-(N>0?0:1)]=0,x+=d,p++),c[N]={left:0,top:x,row:p,width:v,height:r},u[u.length-1]+=v+l}),f}_fitCols(t,a,s,r){const{ctx:i,maxHeight:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],u=this.columnSizes=[],d=o-t;let f=l,p=0,x=0,y=0,N=0;return this.legendItems.forEach((v,j)=>{const{itemWidth:w,itemHeight:S}=fqe(s,a,i,v,r);j>0&&x+S+2*l>d&&(f+=p+l,u.push({width:p,height:x}),y+=p+l,N++,p=x=0),c[j]={left:y,top:x,col:N,width:w,height:S},p=Math.max(p,w),x+=S+l}),f+=p,u.push({width:p,height:x}),f}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:a,options:{align:s,labels:{padding:r},rtl:i}}=this,o=Cf(i,this.left,this.width);if(this.isHorizontal()){let l=0,c=Ps(s,this.left+r,this.right-this.lineWidths[l]);for(const u of a)l!==u.row&&(l=u.row,c=Ps(s,this.left+r,this.right-this.lineWidths[l])),u.top+=this.top+t+r,u.left=o.leftForLtr(o.x(c),u.width),c+=u.width+r}else{let l=0,c=Ps(s,this.top+t+r,this.bottom-this.columnSizes[l].height);for(const u of a)u.col!==l&&(l=u.col,c=Ps(s,this.top+t+r,this.bottom-this.columnSizes[l].height)),u.top=c,u.left+=this.left+r,u.left=o.leftForLtr(o.x(u.left),u.width),c+=u.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;l3(t,this),this._draw(),c3(t)}}_draw(){const{options:t,columnSizes:a,lineWidths:s,ctx:r}=this,{align:i,labels:o}=t,l=Oa.color,c=Cf(t.rtl,this.left,this.width),u=$s(o.font),{padding:d}=o,f=u.size,p=f/2;let x;this.drawTitle(),r.textAlign=c.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=u.string;const{boxWidth:y,boxHeight:N,itemHeight:v}=PB(o,f),j=function(T,A,L){if(isNaN(y)||y<=0||isNaN(N)||N<0)return;r.save();const M=cn(L.lineWidth,1);if(r.fillStyle=cn(L.fillStyle,l),r.lineCap=cn(L.lineCap,"butt"),r.lineDashOffset=cn(L.lineDashOffset,0),r.lineJoin=cn(L.lineJoin,"miter"),r.lineWidth=M,r.strokeStyle=cn(L.strokeStyle,l),r.setLineDash(cn(L.lineDash,[])),o.usePointStyle){const F={radius:N*Math.SQRT2/2,pointStyle:L.pointStyle,rotation:L.rotation,borderWidth:M},$=c.xPlus(T,y/2),D=A+p;MJ(r,F,$,D,o.pointStyleWidth&&y)}else{const F=A+Math.max((f-N)/2,0),$=c.leftForLtr(T,y),D=jf(L.borderRadius);r.beginPath(),Object.values(D).some(q=>q!==0)?Bw(r,{x:$,y:F,w:y,h:N,radius:D}):r.rect($,F,y,N),r.fill(),M!==0&&r.stroke()}r.restore()},w=function(T,A,L){Xp(r,L.text,T,A+v/2,u,{strikethrough:L.hidden,textAlign:c.textAlign(L.textAlign)})},S=this.isHorizontal(),_=this._computeTitleHeight();S?x={x:Ps(i,this.left+d,this.right-s[0]),y:this.top+d+_,line:0}:x={x:this.left+d,y:Ps(i,this.top+_+d,this.bottom-a[0].height),line:0},BJ(this.ctx,t.textDirection);const E=v+d;this.legendItems.forEach((T,A)=>{r.strokeStyle=T.fontColor,r.fillStyle=T.fontColor;const L=r.measureText(T.text).width,M=c.textAlign(T.textAlign||(T.textAlign=o.textAlign)),F=y+p+L;let $=x.x,D=x.y;c.setWidth(this.width),S?A>0&&$+F+d>this.right&&(D=x.y+=E,x.line++,$=x.x=Ps(i,this.left+d,this.right-s[x.line])):A>0&&D+E>this.bottom&&($=x.x=$+a[x.line].width+d,x.line++,D=x.y=Ps(i,this.top+_+d,this.bottom-a[x.line].height));const q=c.x($);if(j(q,D,T),$=Z8e(M,$+y+p,S?$+F:this.right,t.rtl),w(c.x($),D,T),S)x.x+=F+d;else if(typeof T.text!="string"){const G=u.lineHeight;x.y+=iee(T,G)+d}else x.y+=E}),HJ(this.ctx,t.textDirection)}drawTitle(){const t=this.options,a=t.title,s=$s(a.font),r=ji(a.padding);if(!a.display)return;const i=Cf(t.rtl,this.left,this.width),o=this.ctx,l=a.position,c=s.size/2,u=r.top+c;let d,f=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),d=this.top+u,f=Ps(t.align,f,this.right-p);else{const y=this.columnSizes.reduce((N,v)=>Math.max(N,v.height),0);d=u+Ps(t.align,this.top,this.bottom-y-t.labels.padding-this._computeTitleHeight())}const x=Ps(l,f,f+p);o.textAlign=i.textAlign(r3(l)),o.textBaseline="middle",o.strokeStyle=a.color,o.fillStyle=a.color,o.font=s.string,Xp(o,a.text,x,d,s)}_computeTitleHeight(){const t=this.options.title,a=$s(t.font),s=ji(t.padding);return t.display?a.lineHeight+s.height:0}_getLegendItemAt(t,a){let s,r,i;if(nd(t,this.left,this.right)&&nd(a,this.top,this.bottom)){for(i=this.legendHitBoxes,s=0;s<i.length;++s)if(r=i[s],nd(t,r.left,r.left+r.width)&&nd(a,r.top,r.top+r.height))return this.legendItems[s]}return null}handleEvent(t){const a=this.options;if(!pqe(t.type,a))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,i=mqe(r,s);r&&!i&&ta(a.onLeave,[t,r,this],this),this._hoveredItem=s,s&&!i&&ta(a.onHover,[t,s,this],this)}else s&&ta(a.onClick,[t,s,this],this)}}function fqe(e,t,a,s,r){const i=hqe(s,e,t,a),o=gqe(r,s,t.lineHeight);return{itemWidth:i,itemHeight:o}}function hqe(e,t,a,s){let r=e.text;return r&&typeof r!="string"&&(r=r.reduce((i,o)=>i.length>o.length?i:o)),t+a.size/2+s.measureText(r).width}function gqe(e,t,a){let s=e;return typeof t.text!="string"&&(s=iee(t,a)),s}function iee(e,t){const a=e.text?e.text.length:0;return t*a}function pqe(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var xqe={id:"legend",_element:DB,start(e,t,a){const s=e.legend=new DB({ctx:e.ctx,options:a,chart:e});hi.configure(e,s,a),hi.addBox(e,s)},stop(e){hi.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,a){const s=e.legend;hi.configure(e,s,a),s.options=a},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,a){const s=t.datasetIndex,r=a.chart;r.isDatasetVisible(s)?(r.hide(s),t.hidden=!0):(r.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:a,pointStyle:s,textAlign:r,color:i,useBorderRadius:o,borderRadius:l}}=e.legend.options;return e._getSortedDatasetMetas().map(c=>{const u=c.controller.getStyle(a?0:void 0),d=ji(u.borderWidth);return{text:t[c.index].label,fillStyle:u.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:u.borderColor,pointStyle:s||u.pointStyle,rotation:u.rotation,textAlign:r||u.textAlign,borderRadius:o&&(l||u.borderRadius),datasetIndex:c.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class oee extends dc{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,a){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=a;const r=ss(s.text)?s.text.length:1;this._padding=ji(s.padding);const i=r*$s(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:a,left:s,bottom:r,right:i,options:o}=this,l=o.align;let c=0,u,d,f;return this.isHorizontal()?(d=Ps(l,s,i),f=a+t,u=i-s):(o.position==="left"?(d=s+t,f=Ps(l,r,a),c=Rn*-.5):(d=i-t,f=Ps(l,a,r),c=Rn*.5),u=r-a),{titleX:d,titleY:f,maxWidth:u,rotation:c}}draw(){const t=this.ctx,a=this.options;if(!a.display)return;const s=$s(a.font),i=s.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:c,rotation:u}=this._drawArgs(i);Xp(t,a.text,0,0,s,{color:a.color,maxWidth:c,rotation:u,textAlign:r3(a.align),textBaseline:"middle",translation:[o,l]})}}function yqe(e,t){const a=new oee({ctx:e.ctx,options:t,chart:e});hi.configure(e,a,t),hi.addBox(e,a),e.titleBlock=a}var bqe={id:"title",_element:oee,start(e,t,a){yqe(e,a)},stop(e){const t=e.titleBlock;hi.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,a){const s=e.titleBlock;hi.configure(e,s,a),s.options=a},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Xg={average(e){if(!e.length)return!1;let t,a,s=new Set,r=0,i=0;for(t=0,a=e.length;t<a;++t){const l=e[t].element;if(l&&l.hasValue()){const c=l.tooltipPosition();s.add(c.x),r+=c.y,++i}}return i===0||s.size===0?!1:{x:[...s].reduce((l,c)=>l+c)/s.size,y:r/i}},nearest(e,t){if(!e.length)return!1;let a=t.x,s=t.y,r=Number.POSITIVE_INFINITY,i,o,l;for(i=0,o=e.length;i<o;++i){const c=e[i].element;if(c&&c.hasValue()){const u=c.getCenterPoint(),d=nL(t,u);d<r&&(r=d,l=c)}}if(l){const c=l.tooltipPosition();a=c.x,s=c.y}return{x:a,y:s}}};function yo(e,t){return t&&(ss(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function jl(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function vqe(e,t){const{element:a,datasetIndex:s,index:r}=t,i=e.getDatasetMeta(s).controller,{label:o,value:l}=i.getLabelAndValue(r);return{chart:e,label:o,parsed:i.getParsed(r),raw:e.data.datasets[s].data[r],formattedValue:l,dataset:i.getDataset(),dataIndex:r,datasetIndex:s,element:a}}function OB(e,t){const a=e.chart.ctx,{body:s,footer:r,title:i}=e,{boxWidth:o,boxHeight:l}=t,c=$s(t.bodyFont),u=$s(t.titleFont),d=$s(t.footerFont),f=i.length,p=r.length,x=s.length,y=ji(t.padding);let N=y.height,v=0,j=s.reduce((_,E)=>_+E.before.length+E.lines.length+E.after.length,0);if(j+=e.beforeBody.length+e.afterBody.length,f&&(N+=f*u.lineHeight+(f-1)*t.titleSpacing+t.titleMarginBottom),j){const _=t.displayColors?Math.max(l,c.lineHeight):c.lineHeight;N+=x*_+(j-x)*c.lineHeight+(j-1)*t.bodySpacing}p&&(N+=t.footerMarginTop+p*d.lineHeight+(p-1)*t.footerSpacing);let w=0;const S=function(_){v=Math.max(v,a.measureText(_).width+w)};return a.save(),a.font=u.string,In(e.title,S),a.font=c.string,In(e.beforeBody.concat(e.afterBody),S),w=t.displayColors?o+2+t.boxPadding:0,In(s,_=>{In(_.before,S),In(_.lines,S),In(_.after,S)}),w=0,a.font=d.string,In(e.footer,S),a.restore(),v+=y.width,{width:v,height:N}}function wqe(e,t){const{y:a,height:s}=t;return a<s/2?"top":a>e.height-s/2?"bottom":"center"}function Nqe(e,t,a,s){const{x:r,width:i}=s,o=a.caretSize+a.caretPadding;if(e==="left"&&r+i+o>t.width||e==="right"&&r-i-o<0)return!0}function jqe(e,t,a,s){const{x:r,width:i}=a,{width:o,chartArea:{left:l,right:c}}=e;let u="center";return s==="center"?u=r<=(l+c)/2?"left":"right":r<=i/2?u="left":r>=o-i/2&&(u="right"),Nqe(u,e,t,a)&&(u="center"),u}function MB(e,t,a){const s=a.yAlign||t.yAlign||wqe(e,a);return{xAlign:a.xAlign||t.xAlign||jqe(e,t,a,s),yAlign:s}}function Cqe(e,t){let{x:a,width:s}=e;return t==="right"?a-=s:t==="center"&&(a-=s/2),a}function Sqe(e,t,a){let{y:s,height:r}=e;return t==="top"?s+=a:t==="bottom"?s-=r+a:s-=r/2,s}function IB(e,t,a,s){const{caretSize:r,caretPadding:i,cornerRadius:o}=e,{xAlign:l,yAlign:c}=a,u=r+i,{topLeft:d,topRight:f,bottomLeft:p,bottomRight:x}=jf(o);let y=Cqe(t,l);const N=Sqe(t,c,u);return c==="center"?l==="left"?y+=u:l==="right"&&(y-=u):l==="left"?y-=Math.max(d,p)+r:l==="right"&&(y+=Math.max(f,x)+r),{x:Is(y,0,s.width-t.width),y:Is(N,0,s.height-t.height)}}function Rb(e,t,a){const s=ji(a.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-s.right:e.x+s.left}function $B(e){return yo([],jl(e))}function _qe(e,t,a){return om(e,{tooltip:t,tooltipItems:a,type:"tooltip"})}function RB(e,t){const a=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return a?e.override(a):e}const lee={beforeTitle:vl,title(e){if(e.length>0){const t=e[0],a=t.chart.data.labels,s=a?a.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return a[t.dataIndex]}return""},afterTitle:vl,beforeBody:vl,beforeLabel:vl,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const a=e.formattedValue;return Ln(a)||(t+=a),t},labelColor(e){const a=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:a.borderColor,backgroundColor:a.backgroundColor,borderWidth:a.borderWidth,borderDash:a.borderDash,borderDashOffset:a.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const a=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:a.pointStyle,rotation:a.rotation}},afterLabel:vl,afterBody:vl,beforeFooter:vl,footer:vl,afterFooter:vl};function or(e,t,a,s){const r=e[t].call(a,s);return typeof r>"u"?lee[t].call(a,s):r}class zB extends dc{static positioners=Xg;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const a=this.chart,s=this.options.setContext(this.getContext()),r=s.enabled&&a.options.animation&&s.animations,i=new WJ(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=_qe(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,a){const{callbacks:s}=a,r=or(s,"beforeTitle",this,t),i=or(s,"title",this,t),o=or(s,"afterTitle",this,t);let l=[];return l=yo(l,jl(r)),l=yo(l,jl(i)),l=yo(l,jl(o)),l}getBeforeBody(t,a){return $B(or(a.callbacks,"beforeBody",this,t))}getBody(t,a){const{callbacks:s}=a,r=[];return In(t,i=>{const o={before:[],lines:[],after:[]},l=RB(s,i);yo(o.before,jl(or(l,"beforeLabel",this,i))),yo(o.lines,or(l,"label",this,i)),yo(o.after,jl(or(l,"afterLabel",this,i))),r.push(o)}),r}getAfterBody(t,a){return $B(or(a.callbacks,"afterBody",this,t))}getFooter(t,a){const{callbacks:s}=a,r=or(s,"beforeFooter",this,t),i=or(s,"footer",this,t),o=or(s,"afterFooter",this,t);let l=[];return l=yo(l,jl(r)),l=yo(l,jl(i)),l=yo(l,jl(o)),l}_createItems(t){const a=this._active,s=this.chart.data,r=[],i=[],o=[];let l=[],c,u;for(c=0,u=a.length;c<u;++c)l.push(vqe(this.chart,a[c]));return t.filter&&(l=l.filter((d,f,p)=>t.filter(d,f,p,s))),t.itemSort&&(l=l.sort((d,f)=>t.itemSort(d,f,s))),In(l,d=>{const f=RB(t.callbacks,d);r.push(or(f,"labelColor",this,d)),i.push(or(f,"labelPointStyle",this,d)),o.push(or(f,"labelTextColor",this,d))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=l,l}update(t,a){const s=this.options.setContext(this.getContext()),r=this._active;let i,o=[];if(!r.length)this.opacity!==0&&(i={opacity:0});else{const l=Xg[s.position].call(this,r,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const c=this._size=OB(this,s),u=Object.assign({},l,c),d=MB(this.chart,s,u),f=IB(s,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,i={opacity:1,x:f.x,y:f.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:a})}drawCaret(t,a,s,r){const i=this.getCaretPosition(t,s,r);a.lineTo(i.x1,i.y1),a.lineTo(i.x2,i.y2),a.lineTo(i.x3,i.y3)}getCaretPosition(t,a,s){const{xAlign:r,yAlign:i}=this,{caretSize:o,cornerRadius:l}=s,{topLeft:c,topRight:u,bottomLeft:d,bottomRight:f}=jf(l),{x:p,y:x}=t,{width:y,height:N}=a;let v,j,w,S,_,E;return i==="center"?(_=x+N/2,r==="left"?(v=p,j=v-o,S=_+o,E=_-o):(v=p+y,j=v+o,S=_-o,E=_+o),w=v):(r==="left"?j=p+Math.max(c,d)+o:r==="right"?j=p+y-Math.max(u,f)-o:j=this.caretX,i==="top"?(S=x,_=S-o,v=j-o,w=j+o):(S=x+N,_=S+o,v=j+o,w=j-o),E=S),{x1:v,x2:j,x3:w,y1:S,y2:_,y3:E}}drawTitle(t,a,s){const r=this.title,i=r.length;let o,l,c;if(i){const u=Cf(s.rtl,this.x,this.width);for(t.x=Rb(this,s.titleAlign,s),a.textAlign=u.textAlign(s.titleAlign),a.textBaseline="middle",o=$s(s.titleFont),l=s.titleSpacing,a.fillStyle=s.titleColor,a.font=o.string,c=0;c<i;++c)a.fillText(r[c],u.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+l,c+1===i&&(t.y+=s.titleMarginBottom-l)}}_drawColorBox(t,a,s,r,i){const o=this.labelColors[s],l=this.labelPointStyles[s],{boxHeight:c,boxWidth:u}=i,d=$s(i.bodyFont),f=Rb(this,"left",i),p=r.x(f),x=c<d.lineHeight?(d.lineHeight-c)/2:0,y=a.y+x;if(i.usePointStyle){const N={radius:Math.min(u,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},v=r.leftForLtr(p,u)+u/2,j=y+c/2;t.strokeStyle=i.multiKeyBackground,t.fillStyle=i.multiKeyBackground,sL(t,N,v,j),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,sL(t,N,v,j)}else{t.lineWidth=jn(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const N=r.leftForLtr(p,u),v=r.leftForLtr(r.xPlus(p,1),u-2),j=jf(o.borderRadius);Object.values(j).some(w=>w!==0)?(t.beginPath(),t.fillStyle=i.multiKeyBackground,Bw(t,{x:N,y,w:u,h:c,radius:j}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),Bw(t,{x:v,y:y+1,w:u-2,h:c-2,radius:j}),t.fill()):(t.fillStyle=i.multiKeyBackground,t.fillRect(N,y,u,c),t.strokeRect(N,y,u,c),t.fillStyle=o.backgroundColor,t.fillRect(v,y+1,u-2,c-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,a,s){const{body:r}=this,{bodySpacing:i,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:u,boxPadding:d}=s,f=$s(s.bodyFont);let p=f.lineHeight,x=0;const y=Cf(s.rtl,this.x,this.width),N=function(L){a.fillText(L,y.x(t.x+x),t.y+p/2),t.y+=p+i},v=y.textAlign(o);let j,w,S,_,E,T,A;for(a.textAlign=o,a.textBaseline="middle",a.font=f.string,t.x=Rb(this,v,s),a.fillStyle=s.bodyColor,In(this.beforeBody,N),x=l&&v!=="right"?o==="center"?u/2+d:u+2+d:0,_=0,T=r.length;_<T;++_){for(j=r[_],w=this.labelTextColors[_],a.fillStyle=w,In(j.before,N),S=j.lines,l&&S.length&&(this._drawColorBox(a,t,_,y,s),p=Math.max(f.lineHeight,c)),E=0,A=S.length;E<A;++E)N(S[E]),p=f.lineHeight;In(j.after,N)}x=0,p=f.lineHeight,In(this.afterBody,N),t.y-=i}drawFooter(t,a,s){const r=this.footer,i=r.length;let o,l;if(i){const c=Cf(s.rtl,this.x,this.width);for(t.x=Rb(this,s.footerAlign,s),t.y+=s.footerMarginTop,a.textAlign=c.textAlign(s.footerAlign),a.textBaseline="middle",o=$s(s.footerFont),a.fillStyle=s.footerColor,a.font=o.string,l=0;l<i;++l)a.fillText(r[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+s.footerSpacing}}drawBackground(t,a,s,r){const{xAlign:i,yAlign:o}=this,{x:l,y:c}=t,{width:u,height:d}=s,{topLeft:f,topRight:p,bottomLeft:x,bottomRight:y}=jf(r.cornerRadius);a.fillStyle=r.backgroundColor,a.strokeStyle=r.borderColor,a.lineWidth=r.borderWidth,a.beginPath(),a.moveTo(l+f,c),o==="top"&&this.drawCaret(t,a,s,r),a.lineTo(l+u-p,c),a.quadraticCurveTo(l+u,c,l+u,c+p),o==="center"&&i==="right"&&this.drawCaret(t,a,s,r),a.lineTo(l+u,c+d-y),a.quadraticCurveTo(l+u,c+d,l+u-y,c+d),o==="bottom"&&this.drawCaret(t,a,s,r),a.lineTo(l+x,c+d),a.quadraticCurveTo(l,c+d,l,c+d-x),o==="center"&&i==="left"&&this.drawCaret(t,a,s,r),a.lineTo(l,c+f),a.quadraticCurveTo(l,c,l+f,c),a.closePath(),a.fill(),r.borderWidth>0&&a.stroke()}_updateAnimationTarget(t){const a=this.chart,s=this.$animations,r=s&&s.x,i=s&&s.y;if(r||i){const o=Xg[t.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=OB(this,t),c=Object.assign({},o,this._size),u=MB(a,t,c),d=IB(t,c,u,a);(r._to!==d.x||i._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(t){const a=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(a);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=ji(a.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;a.enabled&&l&&(t.save(),t.globalAlpha=s,this.drawBackground(i,t,r,a),BJ(t,a.textDirection),i.y+=o.top,this.drawTitle(i,t,a),this.drawBody(i,t,a),this.drawFooter(i,t,a),HJ(t,a.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,a){const s=this._active,r=t.map(({datasetIndex:l,index:c})=>{const u=this.chart.getDatasetMeta(l);if(!u)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:u.data[c],index:c}}),i=!zw(s,r),o=this._positionChanged(r,a);(i||o)&&(this._active=r,this._eventPosition=a,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,a,s=!0){if(a&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],o=this._getActiveElements(t,i,a,s),l=this._positionChanged(o,t),c=a||!zw(o,i)||l;return c&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,a))),c}_getActiveElements(t,a,s,r){const i=this.options;if(t.type==="mouseout")return[];if(!r)return a.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,i.mode,i,s);return i.reverse&&o.reverse(),o}_positionChanged(t,a){const{caretX:s,caretY:r,options:i}=this,o=Xg[i.position].call(this,t,a);return o!==!1&&(s!==o.x||r!==o.y)}}var Aqe={id:"tooltip",_element:zB,positioners:Xg,afterInit(e,t,a){a&&(e.tooltip=new zB({chart:e,options:a}))},beforeUpdate(e,t,a){e.tooltip&&e.tooltip.initialize(a)},reset(e,t,a){e.tooltip&&e.tooltip.initialize(a)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const a={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...a,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",a)}},afterEvent(e,t){if(e.tooltip){const a=t.replay;e.tooltip.handleEvent(t.event,a,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:lee},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const Tqe=(e,t,a,s)=>(typeof t=="string"?(a=e.push(t)-1,s.unshift({index:a,label:t})):isNaN(t)&&(a=null),a);function kqe(e,t,a,s){const r=e.indexOf(t);if(r===-1)return Tqe(e,t,a,s);const i=e.lastIndexOf(t);return r!==i?a:r}const Eqe=(e,t)=>e===null?null:Is(Math.round(e),0,t);function FB(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class Lqe extends bh{static id="category";static defaults={ticks:{callback:FB}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const a=this._addedLabels;if(a.length){const s=this.getLabels();for(const{index:r,label:i}of a)s[r]===i&&s.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,a){if(Ln(t))return null;const s=this.getLabels();return a=isFinite(a)&&s[a]===t?a:kqe(s,t,cn(a,t),this._addedLabels),Eqe(a,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:a}=this.getUserBounds();let{min:s,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),a||(r=this.getLabels().length-1)),this.min=s,this.max=r}buildTicks(){const t=this.min,a=this.max,s=this.options.offset,r=[];let i=this.getLabels();i=t===0&&a===i.length-1?i:i.slice(t,a+1),this._valueRange=Math.max(i.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=t;o<=a;o++)r.push({value:o});return r}getLabelForValue(t){return FB.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const a=this.ticks;return t<0||t>a.length-1?null:this.getPixelForValue(a[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function Pqe(e,t){const a=[],{bounds:r,step:i,min:o,max:l,precision:c,count:u,maxTicks:d,maxDigits:f,includeBounds:p}=e,x=i||1,y=d-1,{min:N,max:v}=t,j=!Ln(o),w=!Ln(l),S=!Ln(u),_=(v-N)/(f+1);let E=U8((v-N)/y/x)*x,T,A,L,M;if(E<1e-14&&!j&&!w)return[{value:N},{value:v}];M=Math.ceil(v/E)-Math.floor(N/E),M>y&&(E=U8(M*E/y/x)*x),Ln(c)||(T=Math.pow(10,c),E=Math.ceil(E*T)/T),r==="ticks"?(A=Math.floor(N/E)*E,L=Math.ceil(v/E)*E):(A=N,L=v),j&&w&&i&&H8e((l-o)/i,E/1e3)?(M=Math.round(Math.min((l-o)/E,d)),E=(l-o)/M,A=o,L=l):S?(A=j?o:A,L=w?l:L,M=u-1,E=(L-A)/M):(M=(L-A)/E,cp(M,Math.round(M),E/1e3)?M=Math.round(M):M=Math.ceil(M));const F=Math.max(B8(E),B8(A));T=Math.pow(10,Ln(c)?F:c),A=Math.round(A*T)/T,L=Math.round(L*T)/T;let $=0;for(j&&(p&&A!==o?(a.push({value:o}),A<o&&$++,cp(Math.round((A+$*E)*T)/T,o,UB(o,_,e))&&$++):A<o&&$++);$<M;++$){const D=Math.round((A+$*E)*T)/T;if(w&&D>l)break;a.push({value:D})}return w&&p&&L!==l?a.length&&cp(a[a.length-1].value,l,UB(l,_,e))?a[a.length-1].value=l:a.push({value:l}):(!w||L===l)&&a.push({value:L}),a}function UB(e,t,{horizontal:a,minRotation:s}){const r=Ll(s),i=(a?Math.sin(r):Math.cos(r))||.001,o=.75*t*(""+e).length;return Math.min(t/i,o)}class Dqe extends bh{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,a){return Ln(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:a,maxDefined:s}=this.getUserBounds();let{min:r,max:i}=this;const o=c=>r=a?r:c,l=c=>i=s?i:c;if(t){const c=Mo(r),u=Mo(i);c<0&&u<0?l(0):c>0&&u>0&&o(0)}if(r===i){let c=i===0?1:Math.abs(i*.05);l(i+c),t||o(r-c)}this.min=r,this.max=i}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:a,stepSize:s}=t,r;return s?(r=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),a=a||11),a&&(r=Math.min(a,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,a=t.ticks;let s=this.getTickLimit();s=Math.max(2,s);const r={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:a.precision,step:a.stepSize,count:a.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:a.minRotation||0,includeBounds:a.includeBounds!==!1},i=this._range||this,o=Pqe(r,i);return t.bounds==="ticks"&&q8e(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let a=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){const r=(s-a)/Math.max(t.length-1,1)/2;a-=r,s+=r}this._startValue=a,this._endValue=s,this._valueRange=s-a}getLabelForValue(t){return o3(t,this.chart.options.locale,this.options.ticks.format)}}class Oqe extends Dqe{static id="linear";static defaults={ticks:{callback:OJ.formatters.numeric}};determineDataLimits(){const{min:t,max:a}=this.getMinMax(!0);this.min=Ni(t)?t:0,this.max=Ni(a)?a:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),a=t?this.width:this.height,s=Ll(this.options.ticks.minRotation),r=(t?Math.sin(s):Math.cos(s))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(a/Math.min(40,i.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const C1={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ur=Object.keys(C1);function BB(e,t){return e-t}function HB(e,t){if(Ln(t))return null;const a=e._adapter,{parser:s,round:r,isoWeekday:i}=e._parseOpts;let o=t;return typeof s=="function"&&(o=s(o)),Ni(o)||(o=typeof s=="string"?a.parse(o,s):a.parse(o)),o===null?null:(r&&(o=r==="week"&&(Yp(i)||i===!0)?a.startOf(o,"isoWeek",i):a.startOf(o,r)),+o)}function qB(e,t,a,s){const r=ur.length;for(let i=ur.indexOf(e);i<r-1;++i){const o=C1[ur[i]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((a-t)/(l*o.size))<=s)return ur[i]}return ur[r-1]}function Mqe(e,t,a,s,r){for(let i=ur.length-1;i>=ur.indexOf(a);i--){const o=ur[i];if(C1[o].common&&e._adapter.diff(r,s,o)>=t-1)return o}return ur[a?ur.indexOf(a):0]}function Iqe(e){for(let t=ur.indexOf(e)+1,a=ur.length;t<a;++t)if(C1[ur[t]].common)return ur[t]}function WB(e,t,a){if(!a)e[t]=!0;else if(a.length){const{lo:s,hi:r}=s3(a,t),i=a[s]>=t?a[s]:a[r];e[i]=!0}}function $qe(e,t,a,s){const r=e._adapter,i=+r.startOf(t[0].value,s),o=t[t.length-1].value;let l,c;for(l=i;l<=o;l=+r.add(l,1,s))c=a[l],c>=0&&(t[c].major=!0);return t}function GB(e,t,a){const s=[],r={},i=t.length;let o,l;for(o=0;o<i;++o)l=t[o],r[l]=o,s.push({value:l,major:!1});return i===0||!a?s:$qe(e,s,r,a)}class VB extends bh{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,a={}){const s=t.time||(t.time={}),r=this._adapter=new DHe._date(t.adapters.date);r.init(a),lp(s.displayFormats,r.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=a.normalized}parse(t,a){return t===void 0?null:HB(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,a=this._adapter,s=t.time.unit||"day";let{min:r,max:i,minDefined:o,maxDefined:l}=this.getUserBounds();function c(u){!o&&!isNaN(u.min)&&(r=Math.min(r,u.min)),!l&&!isNaN(u.max)&&(i=Math.max(i,u.max))}(!o||!l)&&(c(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&c(this.getMinMax(!1))),r=Ni(r)&&!isNaN(r)?r:+a.startOf(Date.now(),s),i=Ni(i)&&!isNaN(i)?i:+a.endOf(Date.now(),s)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const t=this.getLabelTimestamps();let a=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(a=t[0],s=t[t.length-1]),{min:a,max:s}}buildTicks(){const t=this.options,a=t.time,s=t.ticks,r=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,o=this.max,l=Q8e(r,i,o);return this._unit=a.unit||(s.autoSkip?qB(a.minUnit,this.min,this.max,this._getLabelCapacity(i)):Mqe(this,l.length,a.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:Iqe(this._unit),this.initOffsets(r),t.reverse&&l.reverse(),GB(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let a=0,s=0,r,i;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?a=1-r:a=(this.getDecimalForValue(t[1])-r)/2,i=this.getDecimalForValue(t[t.length-1]),t.length===1?s=i:s=(i-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;a=Is(a,0,o),s=Is(s,0,o),this._offsets={start:a,end:s,factor:1/(a+1+s)}}_generate(){const t=this._adapter,a=this.min,s=this.max,r=this.options,i=r.time,o=i.unit||qB(i.minUnit,a,s,this._getLabelCapacity(a)),l=cn(r.ticks.stepSize,1),c=o==="week"?i.isoWeekday:!1,u=Yp(c)||c===!0,d={};let f=a,p,x;if(u&&(f=+t.startOf(f,"isoWeek",c)),f=+t.startOf(f,u?"day":o),t.diff(s,a,o)>1e5*l)throw new Error(a+" and "+s+" are too far apart with stepSize of "+l+" "+o);const y=r.ticks.source==="data"&&this.getDataTimestamps();for(p=f,x=0;p<s;p=+t.add(p,l,o),x++)WB(d,p,y);return(p===s||r.bounds==="ticks"||x===1)&&WB(d,p,y),Object.keys(d).sort(BB).map(N=>+N)}getLabelForValue(t){const a=this._adapter,s=this.options.time;return s.tooltipFormat?a.format(t,s.tooltipFormat):a.format(t,s.displayFormats.datetime)}format(t,a){const r=this.options.time.displayFormats,i=this._unit,o=a||r[i];return this._adapter.format(t,o)}_tickFormatFunction(t,a,s,r){const i=this.options,o=i.ticks.callback;if(o)return ta(o,[t,a,s],this);const l=i.time.displayFormats,c=this._unit,u=this._majorUnit,d=c&&l[c],f=u&&l[u],p=s[a],x=u&&f&&p&&p.major;return this._adapter.format(t,r||(x?f:d))}generateTickLabels(t){let a,s,r;for(a=0,s=t.length;a<s;++a)r=t[a],r.label=this._tickFormatFunction(r.value,a,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const a=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((a.start+s)*a.factor)}getValueForPixel(t){const a=this._offsets,s=this.getDecimalForPixel(t)/a.factor-a.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const a=this.options.ticks,s=this.ctx.measureText(t).width,r=Ll(this.isHorizontal()?a.maxRotation:a.minRotation),i=Math.cos(r),o=Math.sin(r),l=this._resolveTickFontOptions(0).size;return{w:s*i+l*o,h:s*o+l*i}}_getLabelCapacity(t){const a=this.options.time,s=a.displayFormats,r=s[a.unit]||s.millisecond,i=this._tickFormatFunction(t,0,GB(this,[t],this._majorUnit),r),o=this._getLabelSize(i),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let t=this._cache.data||[],a,s;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(a=0,s=r.length;a<s;++a)t=t.concat(r[a].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let a,s;if(t.length)return t;const r=this.getLabels();for(a=0,s=r.length;a<s;++a)t.push(HB(this,r[a]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return LJ(t.sort(BB))}}function zb(e,t,a){let s=0,r=e.length-1,i,o,l,c;a?(t>=e[s].pos&&t<=e[r].pos&&({lo:s,hi:r}=pu(e,"pos",t)),{pos:i,time:l}=e[s],{pos:o,time:c}=e[r]):(t>=e[s].time&&t<=e[r].time&&({lo:s,hi:r}=pu(e,"time",t)),{time:i,pos:l}=e[s],{time:o,pos:c}=e[r]);const u=o-i;return u?l+(c-l)*(t-i)/u:l}class lYe extends VB{static id="timeseries";static defaults=VB.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),a=this._table=this.buildLookupTable(t);this._minPos=zb(a,this.min),this._tableRange=zb(a,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:a,max:s}=this,r=[],i=[];let o,l,c,u,d;for(o=0,l=t.length;o<l;++o)u=t[o],u>=a&&u<=s&&r.push(u);if(r.length<2)return[{time:a,pos:0},{time:s,pos:1}];for(o=0,l=r.length;o<l;++o)d=r[o+1],c=r[o-1],u=r[o],Math.round((d+c)/2)!==u&&i.push({time:u,pos:o/(l-1)});return i}_generate(){const t=this.min,a=this.max;let s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(a)||s.length===1)&&s.push(a),s.sort((r,i)=>r-i)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const a=this.getDataTimestamps(),s=this.getLabelTimestamps();return a.length&&s.length?t=this.normalize(a.concat(s)):t=a.length?a:s,t=this._cache.all=t,t}getDecimalForValue(t){return(zb(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const a=this._offsets,s=this.getDecimalForPixel(t)/a.factor-a.end;return zb(this._table,s*this._tableRange+this._minPos,!0)}}const cee="label";function YB(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function Rqe(e,t){const a=e.options;a&&t&&Object.assign(a,t)}function dee(e,t){e.labels=t}function uee(e,t,a=cee){const s=[];e.datasets=t.map(r=>{const i=e.datasets.find(o=>o[a]===r[a]);return!i||!r.data||s.includes(i)?{...r}:(s.push(i),Object.assign(i,r),i)})}function zqe(e,t=cee){const a={labels:[],datasets:[]};return dee(a,e.labels),uee(a,e.datasets,t),a}function Fqe(e,t){const{height:a=150,width:s=300,redraw:r=!1,datasetIdKey:i,type:o,data:l,options:c,plugins:u=[],fallbackContent:d,updateMode:f,...p}=e,x=h.useRef(null),y=h.useRef(null),N=()=>{x.current&&(y.current=new j1(x.current,{type:o,data:zqe(l,i),options:c&&{...c},plugins:u}),YB(t,y.current))},v=()=>{YB(t,null),y.current&&(y.current.destroy(),y.current=null)};return h.useEffect(()=>{!r&&y.current&&c&&Rqe(y.current,c)},[r,c]),h.useEffect(()=>{!r&&y.current&&dee(y.current.config.data,l.labels)},[r,l.labels]),h.useEffect(()=>{!r&&y.current&&l.datasets&&uee(y.current.config.data,l.datasets,i)},[r,l.datasets]),h.useEffect(()=>{y.current&&(r?(v(),setTimeout(N)):y.current.update(f))},[r,c,l.labels,l.datasets,f]),h.useEffect(()=>{y.current&&(v(),setTimeout(N))},[o]),h.useEffect(()=>(N(),()=>v()),[]),n.jsx("canvas",{ref:x,role:"img",height:a,width:s,...p,children:d})}const Uqe=h.forwardRef(Fqe);function x3(e,t){return j1.register(t),h.forwardRef((a,s)=>n.jsx(Uqe,{...a,ref:s,type:e}))}const Bqe=x3("line",LHe),Hqe=x3("bar",THe),qqe=x3("pie",PHe);j1.register(Lqe,Oqe,uqe,sqe,rqe,Y9e,bqe,Aqe,xqe);const mee=e=>n.jsx(ra,{...e}),Wqe=e=>n.jsx(m9,{...e}),Gqe=e=>n.jsx(lx,{...e}),Vqe=e=>n.jsx(aa,{...e}),fee=e=>n.jsx(fn,{...e}),Yqe=e=>n.jsx(Aue,{...e}),Qqe=[{icon:mee,title:"Total Contacts",value:128,color:"text-blue-600",bgColor:"bg-blue-50"},{icon:fee,title:"Emails Sent",value:450,color:"text-purple-600",bgColor:"bg-purple-50"},{icon:Gqe,title:"Active Campaigns",value:9,color:"text-green-600",bgColor:"bg-green-50"},{icon:Wqe,title:"Revenue",value:125e3,color:"text-yellow-600",bgColor:"bg-yellow-50"}],Kqe=[{name:"Emma Watty",company:"Tech Interaction Inc.",assignedBy:"Alice Smith",source:"Website",date:"Oct 10, 2:10 PM"},{name:"John Johnny",company:"Capital Business Co.",assignedBy:"Bob Johnson",source:"Referral",date:"Oct 9, 12:00 AM"},{name:"Annie Arnty",company:"Dynamic Systems Inc.",assignedBy:"Catherine Lee",source:"Trade Show",date:"Oct 8, 1:25 PM"},{name:"James Wilson",company:"Global Services LLC",assignedBy:"David Kim",source:"Cold Call",date:"Oct 7, 11:15 AM"}],Xqe={labels:["Week 1","Week 2","Week 3","Week 4"],datasets:[{label:"Leads",data:[50,75,60,90],backgroundColor:"rgba(96, 165, 250, 0.6)",borderColor:"rgba(96, 165, 250, 1)",borderWidth:1},{label:"Conversions",data:[10,20,15,25],backgroundColor:"rgba(34, 197, 94, 0.6)",borderColor:"rgba(34, 197, 94, 1)",borderWidth:1}]},Zqe={responsive:!0,plugins:{legend:{position:"top",labels:{color:"#374151"}},title:{display:!0,color:"#111827",font:{size:18}}}},Jqe={labels:["Leads","Conversions"],datasets:[{label:"Leads Status",data:[75,25],backgroundColor:["rgba(96, 165, 250, 0.6)","rgba(34, 197, 94, 0.6)"],borderColor:["rgba(96, 165, 250, 1)","rgba(34, 197, 94, 1)"],borderWidth:1}]},eWe={responsive:!0,plugins:{legend:{position:"top",labels:{color:"#374151"}},title:{display:!0,color:"#111827",font:{size:18}}}},tWe=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},nWe=()=>{const e=[{icon:mee,label:"New Contact"},{icon:fee,label:"New Campaign"},{icon:Vqe,label:"New Task"},{icon:Yqe,label:"New Leads"}];return n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 flex flex-col md:flex-row items-center space-y-3 md:space-y-0 md:space-x-4",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 py-2 flex-grow focus-within:ring-2 focus-within:ring-indigo-500 transition w-full md:max-w-3xl",children:[n.jsx(Vt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search Contacts, Leads, or Campaigns...",className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"flex space-x-3 md:ml-auto",children:e.map((t,a)=>n.jsxs("div",{className:"relative group",children:[n.jsx("button",{className:"p-2 text-gray-500 hover:text-gray-900 transition rounded-full hover:bg-gray-100 focus:outline-none",children:n.jsx(t.icon,{size:20})}),n.jsx("span",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-1 bg-gray-800 text-white text-xs rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition",children:t.label})]},a))})]})},aWe=({icon:e,title:t,value:a,color:s,bgColor:r})=>n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-lg transition duration-300 hover:shadow-xl hover:ring-2 hover:ring-blue-500 cursor-pointer",onClick:()=>console.log(`Clicked metric card: ${t}`),children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:22})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]}),sWe=({name:e,company:t,assignedBy:a,source:s,date:r})=>{const{text:i,bg:o}=tWe(s);return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 px-2 -mx-2 rounded-md",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800",children:e}),n.jsx("p",{className:"text-xs text-gray-500",children:t}),a&&n.jsxs("p",{className:"text-xs text-gray-500",children:["Assigned by:"," ",n.jsx("span",{className:"font-semibold text-gray-700",children:a})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-400",children:r}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${i} ${o} px-2 py-0.5 rounded-full`,children:s})]})]})})},rWe=({title:e,children:t})=>n.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-md flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:e}),n.jsx("span",{className:"text-sm text-indigo-500 cursor-pointer hover:underline",children:"See All"})]}),t]}),iWe=({title:e,chartData:t,chartOptions:a})=>{const[s,r]=h.useState("bar"),i=s==="pie"?Jqe:t,o=s==="pie"?eWe:a,l=s==="line"?Bqe:s==="pie"?qqe:Hqe,c=s==="pie"?250:300;return n.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md flex flex-col hover:shadow-lg transition",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:e}),n.jsxs("select",{value:s,onChange:u=>r(u.target.value),className:"border border-gray-300 rounded-md px-2 py-1 text-sm",children:[n.jsx("option",{value:"bar",children:"Bar"}),n.jsx("option",{value:"line",children:"Line"}),n.jsx("option",{value:"pie",children:"Pie"})]})]}),n.jsx("div",{className:"w-full flex justify-center",style:{height:c},children:n.jsx(l,{data:i,options:o})})]})};function oWe(){const{user:e}=qt();return h.useEffect(()=>{document.title="Dashboard | Sari-Sari CRM"},[]),n.jsx("div",{className:"min-h-screen pt-5 pb-10 font-sans",children:n.jsxs("main",{className:"max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"text-xl font-bold mb-4",children:["Welcome back, ",e?.name||"Marketing","! Heres your marketing overview."]}),n.jsx(nWe,{}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6",children:Qqe.map(t=>n.jsx(aWe,{...t},t.title))}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[n.jsx(iWe,{title:"Leads & Conversions",chartData:Xqe,chartOptions:Zqe}),n.jsx(rWe,{title:"Latest Leads",children:Kqe.map((t,a)=>n.jsx(sWe,{...t},a))})]})]})})}function lWe(){h.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[e,t]=h.useState(null),[a,s]=h.useState(""),[r,i]=h.useState("All Statuses"),o=h.useMemo(()=>[{company:"Acme Corporation",url:"https://acme.com",status:"CUSTOMER",industry:"Technology",territory:"North Region",phone_number:"+1-555-0100",billing_address:"123 Main St, North City",shipping_address:"456 Elm St, North City",created_by:"John Appleseed",created_date:"2024-01-10",last_updated:"2025-09-25 14:30"},{company:"Beta Solutions",url:"https://beta.com",status:"PROSPECT",industry:"Finance",territory:"South Region",phone_number:"+1-555-0200",billing_address:"789 Pine St, South City",shipping_address:"101 Maple St, South City",created_by:"Jane Doe",created_date:"2024-03-05",last_updated:"2025-10-01 10:15"},{company:"Gamma Partners",url:"https://gamma.com",status:"PARTNER",industry:"Retail",territory:"East Region",phone_number:"+1-555-0300",billing_address:"234 Oak St, East City",shipping_address:"345 Birch St, East City",created_by:"Alice Smith",created_date:"2023-12-20",last_updated:"2025-08-15 09:45"},{company:"Delta Corp",url:"https://delta.com",status:"INACTIVE",industry:"Logistics",territory:"West Region",phone_number:"+1-555-0400",billing_address:"987 Cedar St, West City",shipping_address:"654 Pine St, West City",created_by:"Bob Johnson",created_date:"2023-11-15",last_updated:"2025-06-12 11:20"}],[]),l=f=>t(f),c=()=>t(null),u=h.useMemo(()=>[{title:"Total Accounts",value:o.length,color:"text-yellow-600",bgColor:"bg-yellow-50",icon:ra},{title:"Customers",value:o.filter(f=>f.status==="CUSTOMER").length,color:"text-green-600",bgColor:"bg-green-50",icon:Io},{title:"Prospects",value:o.filter(f=>f.status==="PROSPECT").length,color:"text-purple-600",bgColor:"bg-purple-50",icon:Kn},{title:"Partners",value:o.filter(f=>f.status==="PARTNER").length,color:"text-pink-600",bgColor:"bg-pink-50",icon:nn},{title:"Active",value:o.filter(f=>f.status==="CUSTOMER"||f.status==="PARTNER").length,color:"text-blue-600",bgColor:"bg-blue-50",icon:Io},{title:"Inactive",value:o.filter(f=>f.status==="INACTIVE").length,color:"text-gray-600",bgColor:"bg-gray-50",icon:$o},{title:"Former",value:o.filter(f=>f.status==="FORMER").length,color:"text-orange-600",bgColor:"bg-orange-50",icon:$o}],[o]);if(e)return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs("button",{onClick:c,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-4 sm:mb-6 cursor-pointer",children:[n.jsx(Qu,{className:"mr-1 w-4 h-4 sm:w-5 sm:h-5"})," Back"]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:n.jsx("div",{children:n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800 flex items-center gap-2",children:[e.company,n.jsx("span",{className:`inline-block text-xs px-2 py-0.5 rounded ${e.status==="CUSTOMER"?"bg-green-600 text-white":e.status==="PROSPECT"?"bg-purple-600 text-white":e.status==="PARTNER"?"bg-pink-600 text-white":"bg-gray-500 text-white"}`,children:e.status})]})})})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 sm:p-6 shadow-sm overflow-x-auto",children:[n.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4 text-gray-800",children:"Account Details"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm text-gray-700",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Website:"})," ",n.jsx("br",{}),n.jsx("a",{href:e.url,className:"text-blue-600 hover:underline break-words",children:e.url})]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Industry:"})," ",n.jsx("br",{}),e.industry]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Territory:"})," ",n.jsx("br",{}),e.territory]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Phone Number:"})," ",n.jsx("br",{}),e.phone_number]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Billing Address:"})," ",n.jsx("br",{}),e.billing_address]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Shipping Address:"})," ",n.jsx("br",{}),e.shipping_address]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Created By:"})," ",n.jsx("br",{}),e.created_by," on ",e.created_date]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Last Updated:"})," ",n.jsx("br",{}),e.last_updated]})]})]})]});const d=o.filter(f=>{const p=f.company.toLowerCase().includes(a.toLowerCase())||f.url.toLowerCase().includes(a.toLowerCase())||f.industry.toLowerCase().includes(a.toLowerCase())||f.territory.toLowerCase().includes(a.toLowerCase())||f.phone_number.toLowerCase().includes(a.toLowerCase()),x=r==="All Statuses"||r==="Active"&&(f.status==="CUSTOMER"||f.status==="PARTNER")||r==="Inactive"&&f.status==="INACTIVE"||r==="Former"&&f.status==="FORMER"||f.status.toLowerCase()===r.toLowerCase();return p&&x});return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-sans",children:[n.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(ra,{className:"mr-2 text-blue-600"}),"Accounts List"]})}),n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 xl:grid-cols-4 md:grid-cols-4 gap-4 mb-6",children:u.map(f=>n.jsx(cWe,{...f},f.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Vt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search by company, website, industry, territory, or phone...",value:a,onChange:f=>s(f.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:r,onChange:f=>i(f.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"All Statuses"}),n.jsx("option",{children:"Customer"}),n.jsx("option",{children:"Prospect"}),n.jsx("option",{children:"Partner"}),n.jsx("option",{children:"Active"}),n.jsx("option",{children:"Inactive"}),n.jsx("option",{children:"Former"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Company"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Industry"}),n.jsx("th",{className:"py-3 px-4",children:"Territory"}),n.jsx("th",{className:"py-3 px-4",children:"Phone"})]})}),n.jsxs("tbody",{children:[d.map((f,p)=>n.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>l(f),children:[n.jsx("td",{className:"py-3 px-4 break-words",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-words",children:f.company}),n.jsx("div",{className:"text-gray-500 text-xs break-words",children:f.url})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${f.status==="CUSTOMER"?"bg-green-100 text-green-700":f.status==="PROSPECT"?"bg-purple-100 text-purple-700":f.status==="PARTNER"?"bg-pink-100 text-pink-700":f.status==="INACTIVE"?"bg-gray-100 text-gray-700":"bg-orange-100 text-orange-700"}`,children:f.status})}),n.jsx("td",{className:"py-3 px-4 break-words",children:f.industry}),n.jsx("td",{className:"py-3 px-4 break-words",children:f.territory}),n.jsxs("td",{className:"py-3 px-4 flex items-center space-x-2 break-words",children:[n.jsx(Ot,{className:"text-gray-500"}),n.jsx("span",{children:f.phone_number})]})]},p)),d.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"py-4 text-center text-gray-500",children:"No accounts match your search/filter."})})]})]})})]})}const cWe=({icon:e,title:t,value:a,color:s,bgColor:r})=>n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md hover:shadow-lg hover:ring-2 hover:ring-blue-500 cursor-pointer transition-all duration-300",onClick:()=>console.log(`Clicked: ${t}`),children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:22})}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]});function dWe(){h.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[e,t]=h.useState(!1),[a,s]=h.useState(null),[r,i]=h.useState(!1),[o,l]=h.useState(""),[c,u]=h.useState("All Contacts"),[d,f]=h.useState([{id:1,name:"John Smith",title:"Marketing Director",account:"Acme Corporation",email:"john.smith@acme.com",phone1:"+1-555-0101",phone2:"+1-555-0102",department:"Marketing",assigned:"Jane Sales",created:"1/10/2024",mobile:"09217229846",workPhone:"(555) 123-4567",createdBy:"John Appleseed",lastUpdated:"2025-09-21 15:30",notes:"Key marketing partner for Q4 campaigns."}]),[p,x]=h.useState({id:null,name:"",email:"",workPhone:"",title:"",department:"",phone1:"",phone2:"",account:"",assigned:"",notes:""}),y=E=>{E.target.id==="modalBackdrop"&&t(!1)},N=E=>{s(E)},v=()=>{s(null)},j=()=>{i(!1),x({id:null,name:"",email:"",workPhone:"",title:"",department:"",phone1:"",phone2:"",account:"",assigned:"",notes:""}),t(!0)},w=(E,T)=>{T.stopPropagation(),i(!0),x(E),t(!0)},S=E=>{const{name:T,value:A}=E.target;x(L=>({...L,[T]:A}))},_=E=>{if(E.preventDefault(),r)f(T=>T.map(A=>A.id===p.id?{...p}:A));else{const T={...p,id:Date.now(),created:new Date().toLocaleDateString(),createdBy:"Admin User"};f(A=>[...A,T])}t(!1)};return a?n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[n.jsxs("button",{onClick:v,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-4 sm:mb-6 cursor-pointer",children:[n.jsx(Qu,{className:"mr-1 w-4 h-4 sm:w-5 sm:h-5"})," Back"]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:a.account}),n.jsx("span",{className:"mt-1 sm:mt-0 bg-blue-600 text-white text-xs sm:text-sm px-2 py-0.5 rounded w-fit",children:"Active"})]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0 mt-3 sm:mt-0",children:n.jsxs("button",{className:"w-full sm:w-auto bg-gray-800 text-white px-5 py-2 rounded-md hover:bg-gray-900 transition flex items-center gap-2",children:[n.jsx(qo,{}),"Export"]})})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 sm:p-6 w-full max-w-full lg:max-w-6xl shadow-sm overflow-x-auto mx-auto",children:[n.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4 text-gray-800",children:"Contact Details"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 text-sm text-gray-700",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Primary Contact:"})," ",n.jsx("br",{}),a.name]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Email:"})," ",n.jsx("br",{}),a.email]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Created By:"})," ",n.jsx("br",{}),a.createdBy," on ",a.created]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Title:"})," ",n.jsx("br",{}),a.title]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Assigned To:"})," ",n.jsx("br",{}),a.assigned]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Work Phone:"})," ",n.jsx("br",{}),a.workPhone]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Account:"})," ",n.jsx("br",{}),a.account]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Mobile Phone:"})," ",n.jsx("br",{}),a.phone1]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Last Updated:"})," ",n.jsx("br",{}),a.lastUpdated]})]}),n.jsxs("div",{className:"mt-6 border-gray-200 pt-4",children:[n.jsx("h3",{className:"text-md sm:text-lg font-semibold text-gray-800 mb-2",children:"Notes"}),n.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:a.notes?a.notes:"No additional notes were provided for this contact."})]})]})]}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(ra,{className:"mr-2 text-blue-600"})," Contacts Management"]}),n.jsx("button",{onClick:j,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base transition",children:" Add Contact"})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Vt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search Contacts...",value:o,onChange:E=>l(E.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:c,onChange:E=>u(E.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"All Contacts"}),n.jsx("option",{children:"Option 1"}),n.jsx("option",{children:"Option 2"}),n.jsx("option",{children:"Option 3"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-[600px] w-full border border-gray-200 rounded-lg bg-white shadow-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-sm text-gray-600",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact Info"}),n.jsx("th",{className:"py-3 px-4",children:"Department"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Created"}),n.jsx("th",{className:"py-3 px-4 text-center",children:"Actions"})]})}),n.jsx("tbody",{className:"text-xs text-gray-700",children:d.map((E,T)=>n.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>N(E),children:[n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all",children:E.name}),n.jsx("div",{className:"text-xs text-gray-500",children:E.title})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Gx,{className:"text-gray-500"}),n.jsx("span",{children:E.account})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(sa,{className:"text-gray-500"}),n.jsx("span",{children:E.email})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ot,{className:"text-gray-500"}),n.jsx("span",{children:E.phone1})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ot,{className:"text-gray-500"}),n.jsx("span",{children:E.phone2})]})]})}),n.jsx("td",{className:"py-3 px-4",children:E.department}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(nn,{className:"text-gray-500"}),n.jsx("span",{children:E.assigned})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Pt,{className:"text-gray-500"}),n.jsx("span",{children:E.created})]})}),n.jsx("td",{className:"py-3 px-4 text-center",children:n.jsx("div",{className:"flex justify-center",children:n.jsx("button",{onClick:A=>w(E,A),className:"text-blue-500 hover:text-blue-700",children:n.jsx(ga,{})})})})]},T))})]})}),e&&n.jsx("div",{id:"modalBackdrop",onClick:y,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh]",onClick:E=>E.stopPropagation(),children:[n.jsx("button",{onClick:()=>t(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 text-center",children:r?"Edit Contact":"Add New Contact"}),n.jsxs("form",{onSubmit:_,className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Name"}),n.jsx("input",{type:"text",name:"name",value:p.name,onChange:S,placeholder:"Full name",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Email"}),n.jsx("input",{type:"email",name:"email",value:p.email,onChange:S,placeholder:"example@email.com",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),n.jsx("input",{type:"text",name:"workPhone",value:p.workPhone,onChange:S,placeholder:"09 --- --- ---",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Title"}),n.jsx("input",{type:"text",name:"title",value:p.title,onChange:S,placeholder:"Job title",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),n.jsx("input",{type:"text",name:"department",value:p.department,onChange:S,placeholder:"Marketing / Sales",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Phone Number 1"}),n.jsx("input",{type:"text",name:"phone1",value:p.phone1,onChange:S,placeholder:"09 --- --- ---",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Account"}),n.jsx("input",{type:"text",name:"account",value:p.account,onChange:S,placeholder:"Company name",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Assign To"}),n.jsxs("select",{name:"assigned",value:p.assigned,onChange:S,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",children:[n.jsx("option",{value:"",children:"Assign To"}),n.jsx("option",{value:"Smith",children:"Smith"}),n.jsx("option",{value:"Doe",children:"Doe"}),n.jsx("option",{value:"Jane Sales",children:"Jane Sales"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Phone Number 2"}),n.jsx("input",{type:"text",name:"phone2",value:p.phone2,onChange:S,placeholder:"09 --- --- ---",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 md:col-span-3",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),n.jsx("textarea",{name:"notes",value:p.notes,onChange:S,placeholder:"Additional details...",rows:3,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 md:col-span-3",children:[n.jsx("button",{type:"button",onClick:()=>t(!1),className:"px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 text-white bg-blue-600 border border-blue-500 rounded hover:bg-blue-700 transition",children:"Save Contact"})]})]})]})})]})}const Fb={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},es=({label:e,value:t,name:a,className:s=""})=>n.jsxs("div",{className:`flex flex-col ${s}`,children:[n.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),n.jsx("input",{type:"text",name:a,defaultValue:t,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),uWe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(es,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),n.jsx(es,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),n.jsx(es,{label:"Industry",name:"industry",value:e.industry})]}),n.jsx(es,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),n.jsx(es,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),mWe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(es,{label:"First Name",name:"firstName",value:e.firstName}),n.jsx(es,{label:"Last Name",name:"lastName",value:e.lastName}),n.jsx(es,{label:"Department",name:"department",value:e.department}),n.jsx(es,{label:"Title",name:"title",value:e.title}),n.jsx(es,{label:"Work Phone",name:"workPhone",value:e.workPhone}),n.jsx(es,{label:"Email",name:"email",value:e.email}),n.jsx(es,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),n.jsx(es,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),fWe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(es,{label:"Deal Name",name:"dealName",value:e.dealName}),n.jsxs("div",{className:"flex",children:[n.jsx(es,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),n.jsx("div",{className:"flex flex-col justify-end ml-1",children:n.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),n.jsx(es,{label:"Stage",name:"stage",value:e.stage}),n.jsx(es,{label:"Territory",name:"territory",value:e.territory})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(es,{label:"Description",name:"description",value:e.description}),n.jsx(es,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function hee({isOpen:e,onClose:t}){const[a,s]=h.useState(1),r=3;if(!e)return null;const i=()=>{a<r?s(a+1):(t(),s(1))},o=()=>{a>1&&s(a-1)},l=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],c=()=>{switch(a){case 1:return n.jsx(uWe,{data:Fb});case 2:return n.jsx(mWe,{data:Fb});case 3:return n.jsx(fWe,{data:Fb});default:return null}};return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:Fb.accountName})]}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:n.jsx(wj,{className:"w-6 h-6"})})]}),n.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:l.map(u=>n.jsx("button",{onClick:()=>s(u.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${a===u.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:u.name},u.id))}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c()}),n.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[a>1&&n.jsx("button",{onClick:o,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),a<r?n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}const hWe={name:"Josh Vergara",status:"New",company:"Josh Inc.",title:"CEO",department:"Administration",email:"josh@joshinc.com",territory:"Cavite",assignedTo:"Admin",createdBy:"Admin",workPhone:"09253677323",phone1:"09253677323",phone2:"0907452874",source:"Website",addressLine1:"#1 Pilar Las Pinas",addressLine2:"Suite 400",city:"Las Pinas",state:"Metro Manila",zipCode:"1740",notes:"Interested in our premium plan."};function gee({lead:e=hWe,onBack:t}){const[a,s]=h.useState(!1);return e?n.jsxs("div",{className:"p-4 sm:p-6 md:p-8 font-inter min-h-screen",children:[n.jsxs("button",{onClick:t,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-4 sm:mb-6 cursor-pointer",children:[n.jsx(Qu,{className:"mr-1 w-4 h-4 sm:w-5 sm:h-5"})," Back"]}),n.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-6 sm:mb-8 gap-2 sm:gap-4",children:n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold",children:e.name}),n.jsx("span",{className:"bg-blue-100 text-blue-700 text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full",children:e.status}),n.jsx("div",{className:"flex flex-wrap items-center ml-0 sm:ml-1",children:n.jsx("button",{onClick:()=>s(!0),className:"bg-green-600 hover:bg-green-700 text-white px-3 sm:px-5 py-1.5 sm:py-2 rounded-lg font-medium text-xs sm:text-sm",children:"Convert"})})]})}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200 mb-6 sm:mb-8",children:[n.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-4 sm:mb-6",children:"Lead Details"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Name:"}),n.jsx("p",{children:e.name})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:e.company})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Title:"}),n.jsx("p",{children:e.title})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:e.department})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:e.email})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:e.territory})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assign To:"}),n.jsx("p",{children:e.assignedTo})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:e.createdBy})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:e.workPhone})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:e.phone1})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:e.phone2})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Source:"}),n.jsx("p",{children:e.source})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Address:"}),n.jsxs("p",{className:"text-sm text-gray-700 leading-relaxed",children:[e.addressLine1," ",n.jsx("br",{}),e.addressLine2," ",n.jsx("br",{}),e.city,", ",e.state," ",e.zipCode]})]}),n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),n.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:e.notes||"No notes available."})]})]}),n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-4 sm:mb-6",children:"Related Activities"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 sm:gap-8 text-sm",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Tasks (2)"}),n.jsxs("div",{className:"space-y-1 text-gray-700",children:[n.jsx("p",{children:"Schedule follow-up call"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Due: 2025-09-15 | In Progress"}),n.jsx("p",{children:"Schedule follow-up call"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Due: 2025-09-18 | In Progress"})]}),n.jsx("a",{href:"#",className:"text-blue-600 hover:underline text-xs font-medium mt-2 inline-block",children:"View All Tasks"})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Calls (2)"}),n.jsxs("div",{className:"space-y-1 text-gray-700",children:[n.jsx("p",{children:"Initial discovery call"}),n.jsx("p",{className:"text-xs text-gray-500",children:"2025-09-10 | Completed"}),n.jsx("p",{children:"Initial discovery call"}),n.jsx("p",{className:"text-xs text-gray-500",children:"2025-09-11 | Completed"})]}),n.jsx("a",{href:"#",className:"text-blue-600 hover:underline text-xs font-medium mt-2 inline-block",children:"View All Calls"})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Meeting (0)"}),n.jsx("p",{className:"text-gray-500",children:"No meetings associated."}),n.jsx("a",{href:"#",className:"text-blue-600 hover:underline text-xs font-medium mt-2 inline-block",children:"View All Meetings"})]})]})]}),n.jsx(hee,{isOpen:a,onClose:()=>s(!1)})]}):null}const gWe=eh.all(),vT=gWe.map(e=>({code:`+${e.countryCallingCode}`,name:e.countryCode}));function pWe(){const[e,t]=h.useState(null),[a,s]=h.useState(!1),[r,i]=h.useState(null),[o,l]=h.useState([{id:1,first_name:"Jane",last_name:"Doe"},{id:2,first_name:"John",last_name:"Smith"},{id:3,first_name:"Mary",last_name:"Johnson"}]),[c,u]=h.useState([{id:1,name:"Joshua Vergara",status:"Qualified",title:"Marketing Director",email:"sarah.williams@innovateco.com",phone1:"9271229484",phone2:"---------",workPhone:"999123-4567",work_ccode:"+63",m1_ccode:"+63",m2_ccode:"+63",territory:"East Coast",department:"Marketing",company:"Innovate Co.",createdBy:"John Appleseed",createdAt:"2025-09-10 09:30",lastUpdated:"2025-09-12 14:45",source:"Website",assignedTo:"Jane Doe",address:"123 Main St, City, Country",notes:"Important client"}]),[d,f]=h.useState({work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:""});h.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const p=A=>t(A),x=()=>t(null),[y,N]=h.useState(""),[v,j]=h.useState("All Accounts"),w=()=>{s(!1),i(null),f({work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:""})},S=A=>{i(A),s(!0),f({work_ccode:A.work_ccode||"+63",work_phone:A.workPhone||"",m1_ccode:A.m1_ccode||"+63",mobile_phone_1:A.phone1||"",m2_ccode:A.m2_ccode||"+63",mobile_phone_2:A.phone2||""})},_=A=>{window.confirm("Are you sure you want to delete this lead?")&&u(c.filter(L=>L.id!==A))},E=A=>{const{name:L,value:M}=A.target;f(F=>({...F,[L]:M}))},T=A=>{A.preventDefault();const L=new FormData(A.target),M=Object.fromEntries(L.entries());M.name=`${M.firstName} ${M.lastName}`,M.assignedTo=o.find(F=>F.id.toString()===M.assignedTo)?.first_name+" "+o.find(F=>F.id.toString()===M.assignedTo)?.last_name,M.work_ccode=d.work_ccode,M.workPhone=d.work_phone,M.m1_ccode=d.m1_ccode,M.phone1=d.mobile_phone_1,M.m2_ccode=d.m2_ccode,M.phone2=d.mobile_phone_2,u(r?c.map(F=>F.id===r.id?{...F,...M}:F):[...c,{...M,id:c.length+1,createdAt:new Date().toISOString(),lastUpdated:new Date().toISOString()}]),w()};return e?n.jsx(gee,{lead:e,onBack:x}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-6 gap-3",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Kn,{className:"mr-2 text-blue-600"})," Leads"]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full sm:w-auto",children:[n.jsxs("button",{className:"flex items-center justify-center border border-tertiary text-tertiary px-4 py-2 gap-2 rounded-md hover:bg-gray-800 hover:text-white transition w-full sm:w-auto",children:[n.jsx(qo,{})," Download"]}),n.jsx("button",{onClick:()=>s(!0),className:"flex items-center justify-center bg-black text-white px-4 py-2 rounded-md hover:bg-gray-800 transition w-full sm:w-auto",children:" Add Leads"})]})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Vt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search Leads...",value:y,onChange:A=>N(A.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:v,onChange:A=>j(A.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"All Leads"}),n.jsx("option",{children:"New"}),n.jsx("option",{children:"Contacted"}),n.jsx("option",{children:"Qualified"}),n.jsx("option",{children:"Converted"}),n.jsx("option",{children:"Lost"})]})})]}),n.jsxs("div",{className:"bg-white shadow-sm overflow-x-auto rounded-md border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-9 min-w-[800px] bg-gray-100 font-bold text-gray-600 text-sm px-4 py-3",children:[n.jsx("div",{children:"Name"}),n.jsx("div",{children:"Account"}),n.jsx("div",{children:"Title"}),n.jsx("div",{children:"Department"}),n.jsx("div",{children:"Email"}),n.jsx("div",{children:"Work Phone"}),n.jsx("div",{children:"Assigned To"}),n.jsx("div",{children:"Updated"}),n.jsx("div",{className:"text-center",children:"Actions"})]}),c.map(A=>n.jsxs("div",{className:"grid grid-cols-9 min-w-[800px] px-4 py-3 text-xs hover:bg-gray-100 transition cursor-pointer gap-x-4",onClick:()=>p(A),children:[n.jsx("div",{className:"truncate",children:A.name}),n.jsx("div",{className:"truncate",children:A.company}),n.jsx("div",{className:"truncate",children:A.title}),n.jsx("div",{className:"truncate",children:A.department}),n.jsx("div",{className:"truncate",children:A.email}),n.jsxs("div",{className:"truncate",children:[A.work_ccode," ",A.workPhone]}),n.jsx("div",{className:"truncate",children:A.assignedTo}),n.jsx("div",{className:"truncate",children:A.lastUpdated}),n.jsxs("div",{className:"flex justify-center space-x-2",children:[n.jsx("button",{className:"text-blue-500 hover:text-blue-700",onClick:L=>{L.stopPropagation(),S(A)},children:n.jsx(ga,{})}),n.jsx("button",{className:"text-red-500 hover:text-red-700",onClick:L=>{L.stopPropagation(),_(A.id)},children:n.jsx(vn,{})})]})]},A.id))]}),a&&n.jsx("div",{id:"modalBackdrop",onClick:w,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-3xl rounded-xl shadow-lg p-5 sm:p-6 relative border border-gray-200 my-6 max-h-[90vh] overflow-y-auto",onClick:A=>A.stopPropagation(),children:[n.jsx("button",{onClick:w,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:n.jsx(Xt,{size:20})}),n.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:r?"Edit Lead":"Add New Lead"}),n.jsxs("form",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 text-xs sm:text-sm",onSubmit:T,children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"First Name"}),n.jsx("input",{name:"firstName",type:"text",placeholder:"Joe",defaultValue:r?r.name.split(" ")[0]:"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",required:!0})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Last Name"}),n.jsx("input",{name:"lastName",type:"text",placeholder:"Smith",defaultValue:r?r.name.split(" ")[1]:"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",required:!0})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Company"}),n.jsx("input",{name:"company",type:"text",placeholder:"ABC Company",defaultValue:r?.company||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Title"}),n.jsx("input",{name:"title",type:"text",placeholder:"ABC Agenda",defaultValue:r?.title||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Department"}),n.jsx("input",{name:"department",type:"text",placeholder:"Sales",defaultValue:r?.department||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Email"}),n.jsx("input",{name:"email",type:"text",placeholder:"abc@gmail.com",defaultValue:r?.email||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Work Phone"}),n.jsxs("div",{className:"border border-gray-300 rounded-md flex flex-row w-full gap-1",children:[n.jsx("select",{name:"work_ccode",value:d.work_ccode,onChange:E,className:"outline-none cursor-pointer py-2 border-r border-gray-400 w-15",children:vT.map(A=>n.jsx("option",{value:A.code,children:A.code},A.code))}),n.jsx("input",{type:"text",name:"work_phone",placeholder:"9----------",value:d.work_phone,onChange:E,className:"w-full outline-none"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Mobile Phone 1"}),n.jsxs("div",{className:"border border-gray-300 rounded-md flex flex-row w-full gap-1",children:[n.jsx("select",{name:"m1_ccode",value:d.m1_ccode,onChange:E,className:"outline-none cursor-pointer py-2 border-r border-gray-400 w-15",children:vT.map(A=>n.jsx("option",{value:A.code,children:A.code},A.code))}),n.jsx("input",{type:"text",name:"mobile_phone_1",placeholder:"9----------",value:d.mobile_phone_1,onChange:E,className:"w-full outline-none"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Mobile Phone 2"}),n.jsxs("div",{className:"border border-gray-300 rounded-md flex flex-row w-full gap-1",children:[n.jsx("select",{name:"m2_ccode",value:d.m2_ccode,onChange:E,className:"outline-none cursor-pointer py-2 border-r border-gray-400 w-15",children:vT.map(A=>n.jsx("option",{value:A.code,children:A.code},A.code))}),n.jsx("input",{type:"text",name:"mobile_phone_2",placeholder:"9----------",value:d.mobile_phone_2,onChange:E,className:"w-full outline-none"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Address"}),n.jsx("input",{name:"address",type:"text",placeholder:"Street No., Street Name, City, State/Province, Postal Code",defaultValue:r?.address||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Assign To"}),n.jsxs("select",{name:"assignedTo",defaultValue:o.find(A=>`${A.first_name} ${A.last_name}`===r?.assignedTo)?.id||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",children:[n.jsx("option",{value:"",disabled:!0,children:"Select user"}),o.map(A=>n.jsxs("option",{value:A.id,children:[A.first_name," ",A.last_name]},A.id))]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Territory"}),n.jsx("input",{type:"text",disabled:!0,name:"territory_id",placeholder:"Assign a user",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Source"}),n.jsxs("select",{className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:r?.source||"",name:"source",children:[n.jsx("option",{value:"",disabled:!0,children:"Select Source"}),n.jsx("option",{value:"Website",children:"Website"}),n.jsx("option",{value:"Referral",children:"Referral"}),n.jsx("option",{value:"Cold call",children:"Cold call"}),n.jsx("option",{value:"Event",children:"Event"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Notes"}),n.jsx("textarea",{name:"notes",placeholder:"Additional details...",rows:3,defaultValue:r?.notes||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-2 col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("button",{type:"button",onClick:w,className:"px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition",children:r?"Update Lead":"Save Lead"})]})]})]})})]})}const QB=["To Do","In Progress","Review","Completed"],Og=10,xWe=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const a=t.getTimezoneOffset();return new Date(t.getTime()-a*60*1e3).toISOString().slice(0,16)},KB=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},yWe=e=>{const t=e.subject?.trim()??"",a=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),e.status&&String(e.status).toUpperCase();let r=null,i=null,o=null,l=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?o=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2&&(l=Number(e.relatedTo2)));const c=e.assignedTo?Number(e.assignedTo):null,u=o||l||i||r,d=o?"Contact":l?"Deal":i?"Account":r?"Lead":null;return{title:t,description:a,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:c,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:o,deal_id:l,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:u,related_type:d}},bWe=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",a=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",o=()=>e.lead?.id||e.lead_id,l=()=>e.account?.id||e.account_id,c=()=>e.contact?.id||e.contact_id,u=()=>e.deal?.id||e.deal_id,d=()=>e.task_assign_to?.id||e.assigned_to,f=()=>e.lead?.title||e.lead_id,p=()=>e.account?.name||e.account_id,x=()=>i||e.contact_id,y=()=>e.deal?.name||e.deal_id;let N="Lead",v="",j="",w="",S="Lead",_="",E="",T="";const A=l(),L=p(),M=o(),F=f();if(A){N="Account",S="Account",_=L,v=String(A);const $=c(),D=u(),q=x(),G=y();$?(j="Contact",E="Contact",T=q,w=String($)):D&&(E="Deal",j="Deal",T=G,w=String(D))}else M?(S="Lead",_=F,N="Lead",v=String(M)):e.related_type==="Account"&&(N="Account",v=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:e.status||"Not started",dueDate:s,dateAssigned:r,assignedToId:d()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:a,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:S,relatedTo1Text:_,relatedType2Text:E,relatedTo2Text:T,subject:e.title,relatedType1:N,relatedTo1:v,relatedType2:j,relatedTo2:w}};function vWe(){h.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=qt(),[a,s]=h.useState("board"),[r,i]=h.useState(!1),[o,l]=h.useState(null),[c,u]=h.useState(!1),[d,f]=h.useState([]),[p,x]=h.useState(!0),[y,N]=h.useState(""),[v,j]=h.useState("Filter by Status"),[w,S]=h.useState("Filter by Priority"),[_,E]=h.useState([]),[T,A]=h.useState(1),[L,M]=h.useState(null),[F,$]=h.useState(!1),D=jt(),q=Jt(),[G,U]=h.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""});h.useEffect(()=>{const pe=q.state?.openTaskModal,ze=q.state?.initialTaskData;pe&&(i(!0),ze&&U(Pe=>({...Pe,...ze})),D(q.pathname,{replace:!0,state:{}}))},[q,D]);const V=async()=>{try{const pe=await se.get("/users/all");E(Array.isArray(pe.data)?pe.data:[])}catch(pe){console.error("Failed to fetch users:",pe),W.error("Failed to fetch users.")}},Z=async()=>{try{x(!0);const pe=await se.get("/tasks/all"),Pe=(Array.isArray(pe.data)?pe.data:[]).map(bWe);Pe.sort((We,tt)=>{const lt=We.createdAt?new Date(We.createdAt):0;return(tt.createdAt?new Date(tt.createdAt):0)-lt}),console.log("Fetched Tasks:",Pe),f(Pe),a==="list"&&A(1)}catch(pe){console.error("Failed to load tasks:",pe),W.error("Failed to load tasks.")}finally{x(!1)}};h.useEffect(()=>{!t&&e&&(V(),Z())},[t,e]);const Y=()=>{l(null),U({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},le=(pe=null,ze=!1)=>{l(pe),u(ze),pe?U({id:pe.id,subject:pe.title||"",description:pe.description||"",priority:pe.priority||"Normal",status:pe.status||"Not started",dueDate:xWe(pe.dueDate),assignedTo:pe.assignedToId?String(pe.assignedToId):"",notes:pe.notes||"",relatedType1Text:pe.relatedType1Text||"",relatedTo1Text:pe.relatedTo1Text||"",relatedType2Text:pe.relatedType2Text||"",relatedTo2Text:pe.relatedTo2Text||"",relatedType1:pe.relatedType1||"",relatedTo1:pe.relatedTo1||"",relatedType2:pe.relatedType2||"",relatedTo2:pe.relatedTo2||""}):Y(),i(!0)},_e=()=>{i(!1),l(null),u(!1),Y()},te=async pe=>{const ze=yWe(pe);try{o&&!c?(await se.put(`/tasks/${o.id}`,ze),W.success("Task updated successfully.")):(await se.post("/tasks/create",ze),W.success("Task created successfully.")),i(!1),await Z()}catch(Pe){console.error("Failed to save task:",Pe);const We=Pe.response?.data?.detail||"Failed to save task.";W.error(We)}},ae=pe=>{pe&&M({title:"Delete Task",message:n.jsxs(n.Fragment,{children:["Are you sure you want to delete ",n.jsx("span",{className:"font-semibold",children:pe.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:pe.id}})},ye=async()=>{if(!L?.action){M(null);return}const{action:pe}=L;$(!0);try{pe.type==="delete"&&(await se.delete(`/tasks/${pe.targetId}`),W.success("Task deleted successfully."),await Z())}catch(ze){console.error("Task action failed:",ze),W.error("Failed to delete task.")}finally{$(!1),M(null)}},Ne=()=>{F||M(null)},he=h.useMemo(()=>{const pe=y.trim().toLowerCase();return[...d].sort((Pe,We)=>{const tt=Pe.createdAt?new Date(Pe.createdAt):0;return(We.createdAt?new Date(We.createdAt):0)-tt}).filter(Pe=>{const We=pe===""||Pe.title?.toLowerCase().includes(pe)||Pe.description?.toLowerCase().includes(pe)||Pe.assignedToName?.toLowerCase().includes(pe)||Pe.createdBy?.toLowerCase().includes(pe),tt=v==="Filter by Status"||Pe.status===v,lt=w==="Filter by Priority"||Pe.priority===w;return We&&tt&&lt})},[d,y,v,w]);h.useEffect(()=>{A(1)},[y,v,w,a]),h.useEffect(()=>{if(a==="list"){const pe=he.length===0?1:Math.ceil(he.length/Og);T>pe&&A(pe)}},[he.length,T,a]);const ve=h.useMemo(()=>{if(a==="board")return he;const pe=(T-1)*Og;return he.slice(pe,pe+Og)},[he,T,a]),ne=h.useMemo(()=>{const pe=new Date;return[{title:"To Do",value:d.filter(ze=>ze.status==="Not started").length,icon:Vs,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:d.filter(ze=>ze.status==="In progress").length,icon:Gi,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:d.filter(ze=>ze.status==="Completed").length,icon:aa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:d.filter(ze=>ze.dueDate&&new Date(ze.dueDate)<pe&&ze.status!=="Completed").length,icon:Yu,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:d.filter(ze=>ze.priority==="High").length,icon:Xl,color:"text-orange-600",bgColor:"bg-orange-100"}]},[d]),Se=pe=>pe.dueDate&&new Date(pe.dueDate)<new Date&&pe.status!=="Completed",de=pe=>{switch(pe.status){case"To Do":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In Progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Review":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},ke=pe=>{switch(pe){case"To Do":return"bg-blue-100 text-blue-700";case"In Progress":return"bg-purple-100 text-purple-700";case"Review":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},Te=pe=>{switch(pe){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&n.jsx(Wt,{message:"Loading tasks..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(Gi,{className:"text-blue-600"})," Tasks Board"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:()=>le(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[n.jsx(xn,{})," Create Task"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:ne.map(pe=>n.jsx(wWe,{...pe},pe.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Vt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search tasks",value:y,onChange:pe=>N(pe.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{value:v,onChange:pe=>j(pe.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Status"}),QB.map(pe=>n.jsx("option",{children:pe},pe))]}),n.jsxs("select",{value:w,onChange:pe=>S(pe.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Priority"}),n.jsx("option",{children:"High"}),n.jsx("option",{children:"Normal"}),n.jsx("option",{children:"Low"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${a==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),n.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${a==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&he.length===0&&n.jsx("p",{className:"text-center text-gray-500 mt-10 p-4 bg-white shadow rounded-lg",children:"No tasks found matching current filters."}),!p&&!t&&he.length>0&&a==="board"&&n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:QB.map(pe=>{const ze=ve.filter(Pe=>Pe.status===pe);return n.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),n.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:pe}),n.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:ze.length})]}),n.jsx("div",{className:`space-y-3 ${ze.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:ze.length>0?ze.map(Pe=>n.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${de(Pe)}`,onClick:()=>le(Pe,!0),children:[n.jsxs("div",{className:"text-left flex-1",children:[n.jsx("p",{className:"font-medium text-gray-800 text-sm",children:Pe.title}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",Pe.priority]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",Pe.assignedToName]}),n.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",n.jsx("span",{className:Se(Pe)?"text-red-600":"text-gray-600",children:Pe.dateAssigned?KB(Pe.dateAssigned):""})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[n.jsx("button",{type:"button",onClick:We=>{We.stopPropagation(),le(Pe)},className:"text-blue-500 hover:text-blue-700",children:n.jsx(ha,{})}),n.jsx("button",{type:"button",onClick:We=>{We.stopPropagation(),ae(Pe)},className:"text-red-500 hover:text-red-700",children:n.jsx(vn,{})})]})]},Pe.id)):n.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No tasks"})})]},pe)})}),!p&&!t&&he.length>0&&a==="list"&&n.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Actions"})]})}),n.jsx("tbody",{children:ve.map(pe=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",onClick:()=>{console.log("Opening task in view mode:",pe),le(pe,!0)},children:[n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",children:pe.title}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${ke(pe.status||"To Do")}`,children:pe.status||"To Do"})}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Te(pe.priority||"Low")}`,children:pe.priority||"Low"})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:pe.assignedToName||"Unassigned"}),n.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${Se(pe)?"text-red-600 font-medium":""}`,children:pe.dateAssigned?KB(pe.dateAssigned):""}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-3",onClick:ze=>ze.stopPropagation(),children:[n.jsxs("button",{type:"button",onClick:()=>le(pe),className:"text-blue-500 hover:text-blue-700 flex items-center gap-1",children:[n.jsx(ha,{})," Edit"]}),n.jsxs("button",{type:"button",onClick:()=>ae(pe),className:"text-red-500 hover:text-red-700 flex items-center gap-1",children:[n.jsx(vn,{})," Delete"]})]})})]},pe.id))})]})})}),!p&&!t&&a==="list"&&n.jsx(rn,{className:"mt-6",totalItems:he.length,pageSize:Og,currentPage:he.length===0?0:T,onPrev:()=>A(pe=>Math.max(pe-1,1)),onNext:()=>A(pe=>Math.min(pe+1,Math.max(1,Math.ceil(he.length/Og)||1))),label:"tasks"}),n.jsx(b0,{isOpen:r,onClose:_e,onSave:te,onEdit:()=>u(!1),setFormData:U,formData:G,isEditing:!c&&!!o,viewMode:c,users:_,currentUser:e,onDelete:ae}),L&&n.jsx(NWe,{open:!0,title:L.title,message:L.message,confirmLabel:L.confirmLabel,cancelLabel:L.cancelLabel,variant:L.variant,onConfirm:ye,onCancel:Ne,loading:F})]})}function wWe({icon:e,title:t,value:a,color:s,bgColor:r,onClick:i}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function NWe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r,variant:i,loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function jWe(){h.useEffect(()=>{document.title="Campaign | Sari-Sari CRM"},[]);const[e,t]=h.useState(!1),[a,s]=h.useState(!1),[r,i]=h.useState(null),[o,l]=h.useState(""),[c,u]=h.useState("All Statuses"),[d,f]=h.useState({show:!1,action:null,campaign:null}),[p,x]=h.useState([{id:1,name:"Christmas Promo 2025",subject:" Holiday Discounts Await You!",content:"Spread holiday cheer with exclusive deals this Christmas season!",status:"Scheduled",recipients:1200,scheduleDate:"2025-12-15T10:00",created:"2025-10-20",createdBy:"Marketing Team"},{id:2,name:"New Year Kickoff",subject:"Start 2026 with Big Savings!",content:"Kick off your year right with amazing offers from us!",status:"Draft",recipients:"",scheduleDate:"",created:"2025-10-25",createdBy:"Marketing Team"}]),[y,N]=h.useState({id:null,name:"",subject:"",content:"",status:"Draft",recipients:"",scheduleDate:""}),v=p.filter($=>{const D=c==="All Statuses"||$.status===c,q=$.name.toLowerCase().includes(o.toLowerCase())||$.subject.toLowerCase().includes(o.toLowerCase());return D&&q}),j=()=>{s(!1),N({id:null,name:"",subject:"",content:"",status:"Draft",recipients:"",scheduleDate:""}),t(!0)},w=($,D)=>{D.stopPropagation(),s(!0),N($),t(!0)},S=($,D)=>{D.stopPropagation(),f({show:!0,action:"delete",campaign:$})},_=$=>{$.preventDefault(),f({show:!0,action:a?"edit":"add",campaign:{...y}})},E=()=>{if(d.action==="add"){const $={...d.campaign,id:Date.now(),created:new Date().toLocaleDateString(),createdBy:"Marketing Team"};x(D=>[...D,$]),t(!1)}else d.action==="edit"?(x($=>$.map(D=>D.id===d.campaign.id?{...d.campaign}:D)),t(!1)):d.action==="delete"&&x($=>$.filter(D=>D.id!==d.campaign.id));f({show:!1,action:null,campaign:null})},T=()=>{f({show:!1,action:null,campaign:null})},A=$=>i($),L=()=>i(null),M=$=>{const{name:D,value:q}=$.target;N(G=>({...G,[D]:q}))},F=$=>{$.target.id==="modalBackdrop"&&t(!1)};return r?n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[n.jsxs("button",{onClick:L,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-6 cursor-pointer",children:[n.jsx(Qu,{className:"mr-1 w-5 h-5"})," Back"]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:r.name}),n.jsx("span",{className:`text-xs sm:text-sm px-2 py-0.5 rounded ${r.status==="Scheduled"?"bg-yellow-100 text-yellow-700":r.status==="Sent"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:r.status})]})}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm",children:[n.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Campaign Information"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm text-gray-700",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Subject:"})," ",n.jsx("br",{}),r.subject]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Created By:"})," ",n.jsx("br",{}),r.createdBy]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Created On:"})," ",n.jsx("br",{}),r.created]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Scheduled Date:"})," ",n.jsx("br",{}),r.scheduleDate?new Date(r.scheduleDate).toLocaleString():""]}),n.jsxs("p",{className:"sm:col-span-2",children:[n.jsx("span",{className:"font-semibold",children:"Email Content:"})," ",n.jsx("br",{}),r.content]}),r.status==="Scheduled"&&n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Recipients:"})," ",n.jsx("br",{}),r.recipients]})]})]})]}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(sa,{className:"mr-2 text-blue-600"})," Email Campaigns"]}),n.jsx("button",{onClick:j,className:"flex items-center bg-black text-white px-4 py-2 rounded-md hover:bg-gray-800 transition text-sm sm:text-base shadow-sm",children:" New Campaign"})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Vt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search by campaign name or email subject...",value:o,onChange:$=>l($.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:c,onChange:$=>u($.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"All Statuses"}),n.jsx("option",{children:"Draft"}),n.jsx("option",{children:"Scheduled"}),n.jsx("option",{children:"Sent"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-[700px] w-full border border-gray-200 rounded-lg bg-white shadow-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-sm text-gray-600",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Campaign Name"}),n.jsx("th",{className:"py-3 px-4",children:"Email Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Recipients"}),n.jsx("th",{className:"py-3 px-4",children:"Scheduled Date"}),n.jsx("th",{className:"py-3 px-4 text-center",children:"Actions"})]})}),n.jsx("tbody",{className:"text-sm text-gray-700",children:v.map(($,D)=>n.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer transition",onClick:()=>A($),children:[n.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:$.name}),n.jsx("td",{className:"py-3 px-4",children:$.subject}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${$.status==="Scheduled"?"bg-yellow-100 text-yellow-700":$.status==="Sent"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:$.status})}),n.jsx("td",{className:"py-3 px-4",children:$.recipients?`${$.recipients} emails`:""}),n.jsx("td",{className:"py-3 px-4",children:$.scheduleDate?new Date($.scheduleDate).toLocaleString():""}),n.jsx("td",{className:"py-3 px-4 text-center",onClick:q=>q.stopPropagation(),children:n.jsxs("div",{className:"flex justify-center gap-3",children:[n.jsx("button",{onClick:q=>w($,q),className:"text-blue-500 hover:text-blue-700",children:n.jsx(ga,{})}),n.jsx("button",{onClick:q=>S($,q),className:"text-red-500 hover:text-red-700",children:n.jsx(vn,{})})]})})]},D))})]})}),e&&n.jsx("div",{id:"modalBackdrop",onClick:F,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl shadow-lg p-5 sm:p-6 relative border border-gray-200 my-6 max-h-[90vh] overflow-y-auto",onClick:$=>$.stopPropagation(),children:[n.jsx("button",{onClick:()=>t(!1),className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:n.jsx(Xt,{size:20})}),n.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:a?"Edit Campaign":"Add New Campaign"}),n.jsxs("form",{onSubmit:_,className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Campaign Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"name",value:y.name,onChange:M,placeholder:"e.g. Summer Sale Blast",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Email Subject ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"subject",value:y.subject,onChange:M,placeholder:"e.g. Big discounts await you!",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Campaign Status ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{name:"status",value:y.status,onChange:M,required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",children:[n.jsx("option",{value:"Draft",children:"Draft"}),n.jsx("option",{value:"Scheduled",children:"Scheduled"}),n.jsx("option",{value:"Sent",children:"Sent"})]})]}),y.status==="Scheduled"&&n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:col-span-2",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Scheduled Date ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"datetime-local",name:"scheduleDate",value:y.scheduleDate,onChange:M,required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Recipient Count ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"number",name:"recipients",value:y.recipients,onChange:M,placeholder:"e.g. 500",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),n.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Email Content ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("textarea",{name:"content",rows:4,value:y.content,onChange:M,placeholder:"Write your email message here...",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex justify-end gap-2 sm:col-span-2 pt-3 border-t border-gray-100 mt-2",children:[n.jsx("button",{type:"button",onClick:()=>t(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:"Save Campaign"})]})]})]})}),d.show&&n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 relative border border-gray-200",children:[n.jsx("button",{onClick:T,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:n.jsx(Xt,{size:20})}),n.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:d.action==="delete"?"Confirm Delete":d.action==="edit"?"Confirm Edit":"Confirm Add"}),n.jsx("p",{className:"text-center text-gray-600 mb-6",children:d.action==="delete"?n.jsxs(n.Fragment,{children:["Are you sure you want to delete the campaign"," ",n.jsx("span",{className:"font-semibold",children:d.campaign.name}),"?"]}):d.action==="edit"?n.jsxs(n.Fragment,{children:["Save changes to"," ",n.jsx("span",{className:"font-semibold",children:d.campaign.name}),"?"]}):n.jsxs(n.Fragment,{children:["Add new campaign"," ",n.jsx("span",{className:"font-semibold",children:d.campaign.name}),"?"]})}),n.jsxs("div",{className:"flex justify-center gap-4",children:[n.jsx("button",{onClick:T,className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),n.jsx("button",{onClick:E,className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:"Confirm"})]})]})})]})}const CWe=[{id:1,name:"Welcome E-mail",category:"Welcome",subject:"Welcome to {company}!",body:`Hi {name}, Welcome to {company}! We're excited to have you on board.

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed vel quam vitae erat venenatis feugiat. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.

Best regards, The Team`,createdBy:"Angel Angelo",date:"12/10/23"},{id:2,name:"Product Demo Follow-up",category:"Follow-up",subject:"Thanks for checking out our demo",body:`Hi {name}, Thank you for taking the time to view our product demo.
Do you have any questions? Let's schedule a call to discuss how we can help {company}.

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed vel quam vitae erat venenatis feugiat. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.

Best, Sales Team`,createdBy:"Angel Angelo",date:"12/10/23"}],XB={Welcome:"bg-orange-100 text-orange-700","Follow-up":"bg-blue-100 text-blue-700",Newsletter:"bg-green-100 text-green-700",Promotional:"bg-purple-100 text-purple-700",default:"bg-gray-100 text-gray-800"};function SWe(){h.useEffect(()=>{document.title="Templates | Sari-Sari CRM"},[]);const[e,t]=h.useState(CWe),[a,s]=h.useState(!1),[r,i]=h.useState(null),[o,l]=h.useState(null),[c,u]=h.useState(""),[d,f]=h.useState("All Categories"),[p,x]=h.useState({name:"",category:"",subject:"",body:""}),[y,N]=h.useState({show:!1,action:null,template:null}),v=()=>{l(null),i(null),s(!1)},j=D=>{x({...p,[D.target.name]:D.target.value})},w=()=>{N({show:!0,action:"add",template:{...p}})},S=D=>{i(D),x({name:D.name,category:D.category,subject:D.subject,body:D.body})},_=()=>{N({show:!0,action:"edit",template:{...p,id:r.id}})},E=D=>{N({show:!0,action:"delete",template:D})},T=D=>{Qx.success(`Template "${D.name}" selected for use!`),N({show:!1,action:null,template:null})},A=()=>{const D=y.template;if(y.action==="add"){const q={...D,id:e.length+1,createdBy:"You",date:new Date().toLocaleDateString()};t(G=>[q,...G]),s(!1),x({name:"",category:"",subject:"",body:""})}else y.action==="edit"?(t(q=>q.map(G=>G.id===D.id?{...D}:G).sort((G,U)=>new Date(U.date).getTime()-new Date(G.date).getTime())),i(null),x({name:"",category:"",subject:"",body:""}),l(null)):y.action==="delete"&&(t(q=>q.filter(G=>G.id!==D.id)),l(null));N({show:!1,action:null,template:null})},L=()=>{N({show:!1,action:null,template:null})},M=D=>l(D),F=e.filter(D=>D.name.toLowerCase().includes(c.toLowerCase())&&(d==="All Categories"||D.category===d)),$=(D,q=!1)=>n.jsxs("div",{className:"flex flex-col justify-between h-full",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:D.name}),n.jsx("span",{className:`text-xs px-3 py-1 rounded-md ${XB[D.category]||XB.default}`,children:D.category})]}),n.jsx("p",{className:"text-gray-600 mb-2 text-sm",children:D.subject}),n.jsx("div",{className:`text-gray-800 text-sm p-2 rounded-md ${q?"bg-gray-50 max-h-40 overflow-y-auto":"truncate"} whitespace-pre-line`,style:q?{}:{display:"-webkit-box",WebkitLineClamp:7,WebkitBoxOrient:"vertical",overflow:"hidden"},children:D.body})]}),n.jsxs("div",{className:"flex justify-between items-center mt-4",children:[!q&&n.jsxs("button",{onClick:G=>{G.stopPropagation(),T(D)},className:"flex items-center gap-1 bg-black text-white px-3 py-1 rounded-md text-sm hover:bg-gray-900 transition",children:[n.jsx(fn,{})," Use Template"]}),q&&n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:G=>{G.stopPropagation(),S(D)},className:"flex items-center gap-1 bg-black text-white px-3 py-1 rounded-md text-sm hover:bg-gray-900 transition",children:[n.jsx(ha,{})," Edit"]}),n.jsxs("button",{onClick:G=>{G.stopPropagation(),E(D)},className:"flex items-center gap-1 bg-red-500 text-white px-3 py-1 rounded-md text-sm hover:bg-red-600 transition",children:[n.jsx(vn,{})," Delete"]})]}),n.jsxs("p",{className:"text-gray-400 text-xs text-right",children:["Created by: ",D.createdBy," | ",D.date]})]})]});return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter min-h-screen",children:[n.jsx(Yx,{position:"top-center",reverseOrder:!1}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(fn,{className:"mr-2 text-black"})," Templates"]}),n.jsx("button",{onClick:()=>{s(!0),i(null),x({name:"",category:"",subject:"",body:""})},className:"flex items-center bg-black text-white px-4 py-2 rounded-md hover:bg-gray-800 transition text-sm sm:text-base shadow-sm",children:" New Template"})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Vt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search by template name...",value:c,onChange:D=>u(D.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:d,onChange:D=>f(D.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"All Categories"}),n.jsx("option",{children:"Welcome"}),n.jsx("option",{children:"Follow-up"}),n.jsx("option",{children:"Newsletter"}),n.jsx("option",{children:"Promotional"})]})})]}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:F.map(D=>n.jsxs("div",{onClick:()=>M(D),className:"bg-white rounded-2xl shadow-lg border border-gray-100 hover:shadow-xl cursor-pointer flex flex-col justify-between h-80 transition",children:[n.jsx("div",{className:"h-2 w-full rounded-t-2xl bg-black"}),n.jsx("div",{className:"p-4 flex-grow",children:$(D)})]},D.id))}),(a||r)&&n.jsx("div",{onClick:v,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl shadow-lg p-5 sm:p-6 relative border border-gray-200 my-6 max-h-[90vh] overflow-y-auto",onClick:D=>D.stopPropagation(),children:[n.jsx("button",{onClick:v,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:n.jsx(Xt,{size:20})}),n.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:r?"Edit Template":"Create New Template"}),n.jsxs("form",{onSubmit:D=>{D.preventDefault(),r?_():w()},className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Template Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"name",value:p.name,onChange:j,placeholder:"e.g. Welcome Email",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Category ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{name:"category",value:p.category,onChange:j,required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none",children:[n.jsx("option",{value:"",children:"Select Category"}),n.jsx("option",{value:"Welcome",children:"Welcome"}),n.jsx("option",{value:"Follow-up",children:"Follow-up"}),n.jsx("option",{value:"Newsletter",children:"Newsletter"}),n.jsx("option",{value:"Promotional",children:"Promotional"})]})]}),n.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Subject Line ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"subject",value:p.subject,onChange:j,placeholder:"e.g. Welcome to our service!",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none"})]}),n.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Email Body ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("textarea",{name:"body",rows:4,value:p.body,onChange:j,placeholder:"Write your email message here...",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none resize-none"})]}),n.jsxs("div",{className:"flex justify-end gap-2 sm:col-span-2 pt-3 border-t border-gray-100 mt-2",children:[n.jsx("button",{type:"button",onClick:v,className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:r?"Update Template":"Create Template"})]})]})]})}),o&&!r&&n.jsx("div",{onClick:v,className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"rounded-2xl shadow-lg cursor-default h-80 w-full max-w-md overflow-hidden flex flex-col",onClick:D=>D.stopPropagation(),children:[n.jsx("div",{className:"h-2 w-full rounded-t-2xl bg-black"}),n.jsx("div",{className:"p-4 flex-grow overflow-y-auto bg-gray-50",children:$(o,!0)})]})}),y.show&&n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 relative border border-gray-200",children:[n.jsx("button",{onClick:L,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:n.jsx(Xt,{size:20})}),n.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:y.action==="delete"?"Confirm Delete":y.action==="edit"?"Confirm Update":y.action==="add"?"Confirm Add":"Confirm Use"}),n.jsx("p",{className:"text-center text-gray-600 mb-6",children:y.action==="delete"?n.jsxs(n.Fragment,{children:["Are you sure you want to delete the template"," ",n.jsx("span",{className:"font-semibold",children:y.template.name}),"?"]}):y.action==="edit"?n.jsxs(n.Fragment,{children:["Save changes to"," ",n.jsx("span",{className:"font-semibold",children:y.template.name}),"?"]}):y.action==="add"?n.jsxs(n.Fragment,{children:["Add new template"," ",n.jsx("span",{className:"font-semibold",children:y.template.name}),"?"]}):n.jsxs(n.Fragment,{children:["Use template"," ",n.jsx("span",{className:"font-semibold",children:y.template.name}),"?"]})}),n.jsxs("div",{className:"flex justify-center gap-4",children:[n.jsx("button",{onClick:L,className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),n.jsx("button",{onClick:A,className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:"Confirm"})]})]})})]})}const fv=e=>{if(e==null||e==="")return 0;const t=Number(e);return Number.isFinite(t)?t:0},sf=(e,t="")=>{const a=fv(e);return`${t}${a.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`},ZB=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},_We=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"2-digit"})},AWe=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},JB=(e,t,a)=>{const s=new Date,r=e?.contact?`${e.contact.first_name||""} ${e.contact.last_name||""}`.trim():"",i=e?.validity_days?String(e.validity_days):"";return{issuedDate:ZB(e?.presented_date)||ZB(s),subject:"Price Quotation",forName:e?.account?.name||"",attn:r,intro:"We are pleased to submit our proposal as follows:",notes:e?.notes||"",terms:{validity:i?`${i} days from the date of quotation.`:"",payment:"",deliveryPeriod:"",deliveryPoint:""},preparedBy:t?`${t.first_name||""} ${t.last_name||""}`.trim():"",approvedBy:a?.ceo_name||"Admin"}};function Ub(){const e=jt(),t=Jt(),{quoteId:a}=Ho(),{user:s}=qt(),r=s?.company?.currency||"",i=h.useMemo(()=>`quote-print:${a||""}`,[a]),[o,l]=h.useState(()=>{const _=t.state?.quote;return _&&String(_.id)===String(a)?_:null}),[c,u]=h.useState(()=>t.state?.companyInfo||null),[d,f]=h.useState(!1),[p,x]=h.useState(()=>{try{const _=sessionStorage.getItem(i);return _?JSON.parse(_):null}catch{return null}});h.useEffect(()=>{if(!a)return;let _=!0;return(async()=>{try{f(!0);const A=!c?await se.get("/company/invoice-info"):null;if(!_)return;if(A?.data&&u(A.data),!o){const L=await se.get("/quotes/admin/fetch-all"),F=(Array.isArray(L?.data)?L.data:[]).find($=>String($.id)===String(a));F&&l(F)}}catch(T){const A=T?.response?.data?.detail||T?.message||"Failed to load quotation.";W.error(A)}finally{_&&f(!1)}})(),()=>{_=!1}},[a]),h.useEffect(()=>{o&&x(_=>{if(_)return _;try{const T=sessionStorage.getItem(i);if(T)return JSON.parse(T)}catch{}const E=JB(o,s,c);try{sessionStorage.setItem(i,JSON.stringify(E))}catch{}return E})},[o,s,c,i]);const y=_=>{x(_);try{sessionStorage.setItem(i,JSON.stringify(_))}catch{}},N=Array.isArray(o?.items)?o.items:[],v=fv(o?.discount_amount),j=fv(o?.tax_rate);if(!p)return n.jsx("div",{className:"p-6",children:n.jsx("div",{className:"text-gray-700",children:d?"Loading...":""})});const w=p.preparedBy||(s?`${s.first_name||""} ${s.last_name||""}`.trim():""),S=p.approvedBy||c?.ceo_name||"CEO";return n.jsxs("div",{className:"min-h-screen bg-gray-50 quote-print-root",children:[n.jsx("style",{children:`
        @page { size: A4; margin: 5mm; }
        @media print {
          html, body { margin: 0 !important; padding: 0 !important; }
          .no-print { display: none !important; }
          .print-surface { box-shadow: none !important; border: none !important; }
          body { background: white !important; }
          .quote-print-root { background: white !important; }

          /* Remove screen gutters/max-width so print is tight */
          .quote-print-page { max-width: none !important; margin: 0 !important; padding: 0 !important; }

          * { -webkit-print-color-adjust: exact; print-color-adjust: exact; }

          /* Keep the quote meta proportions while printing (left 2 cols + fixed quotation col) */
          .quote-meta-grid { grid-template-columns: 1fr 1fr 240px !important; padding: 0px; }
        }
      `}),n.jsx("div",{className:"no-print sticky top-0 z-10 bg-white border-b border-gray-200",children:n.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-3 flex items-center justify-between gap-3",children:[n.jsx("button",{type:"button",className:"px-3 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50 text-sm",onClick:()=>e(-1),children:"Back"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",className:"px-3 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50 text-sm",onClick:()=>{if(!o)return;const _=JB(o,s,c);y(_)},disabled:!o,children:"Reset fields"}),n.jsx("button",{type:"button",className:"px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 text-sm disabled:opacity-70",onClick:()=>window.print(),disabled:!o||d,children:"Print"})]})]})}),n.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-6 quote-print-page",children:[n.jsx("div",{className:"no-print bg-white border border-gray-200 rounded-xl p-4 mb-4",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Date"}),n.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",value:p.issuedDate||"",onChange:_=>y({...p,issuedDate:_.target.value})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Subject"}),n.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",value:p.subject||"",onChange:_=>y({...p,subject:_.target.value})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"For"}),n.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",value:p.forName||"",onChange:_=>y({...p,forName:_.target.value})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Attn"}),n.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",value:p.attn||"",onChange:_=>y({...p,attn:_.target.value})})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Intro"}),n.jsx("textarea",{className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm min-h-[70px]",value:p.intro||"",onChange:_=>y({...p,intro:_.target.value})})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Notes"}),n.jsx("textarea",{className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm min-h-[70px]",value:p.notes||"",onChange:_=>y({...p,notes:_.target.value})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Terms: Validity"}),n.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",value:p.terms?.validity||"",onChange:_=>y({...p,terms:{...p.terms,validity:_.target.value}})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Terms: Payment"}),n.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",value:p.terms?.payment||"",onChange:_=>y({...p,terms:{...p.terms,payment:_.target.value}})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Terms: Delivery Period"}),n.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",value:p.terms?.deliveryPeriod||"",onChange:_=>y({...p,terms:{...p.terms,deliveryPeriod:_.target.value}})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Terms: Delivery Point"}),n.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",value:p.terms?.deliveryPoint||"",onChange:_=>y({...p,terms:{...p.terms,deliveryPoint:_.target.value}})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Approved by"}),n.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",value:p.approvedBy||"",onChange:_=>y({...p,approvedBy:_.target.value})})]})]})}),n.jsxs("div",{className:"print-surface bg-white border border-gray-200 rounded-xl shadow-sm p-6",children:[n.jsxs("div",{className:"flex items-center justify-between gap-4 border-b border-gray-300 pb-3",children:[n.jsxs("div",{className:"min-w-0 w-4/5",children:[n.jsx("div",{className:"text-xl font-bold text-gray-900 uppercase",children:c?.company_name||""}),c?.address?n.jsx("div",{className:"text-sm text-gray-700",children:c.address}):null,c?.company_number?n.jsx("div",{className:"text-sm text-gray-700",children:c.company_number}):null,c?.ceo_email?n.jsxs("div",{className:"text-sm text-gray-700",children:["Email: ",c.ceo_email]}):null,c?.company_website?n.jsxs("div",{className:"text-sm text-gray-700",children:["Web: ",c.company_website]}):null]}),n.jsx("div",{className:"flex items-start gap-3 w-1/6",children:c?.company_logo?n.jsx("img",{src:c.company_logo,alt:"Company logo",className:"w-full h-auto object-contain"}):null})]}),n.jsxs("div",{className:"mt-4",children:[n.jsxs("div",{className:"quote-meta-grid grid grid-cols-3 text-sm border border-gray-300",children:[n.jsxs("div",{className:"flex gap-2 p-2 border border-gray-300 col-span-2",children:[n.jsx("div",{className:"w-16 font-semibold",children:"For:"}),n.jsx("div",{className:"min-w-0 break-words",children:p.forName||""})]}),n.jsx("div",{className:"quote-meta-quote justify-center text-center p-1 border-b border-t border-r border-gray-300",children:n.jsx("div",{className:"text-xl font-bold text-gray-900",children:"QUOTATION"})}),n.jsxs("div",{className:"flex gap-2 p-2 border border-gray-300 col-span-2",children:[n.jsx("div",{className:"w-16 font-semibold",children:"Attn:"}),n.jsx("div",{className:"min-w-0 break-words",children:p.attn||""})]}),n.jsx("div",{className:"quote-meta-quote justify-center text-center p-2 border-t border-r border-gray-300",children:n.jsxs("div",{className:"text-sm text-gray-700",children:["No."," ",n.jsx("span",{className:"font-semibold",children:AWe(o?.quote_id||o?.id)})]})}),n.jsxs("div",{className:"flex gap-2 p-2 border border-gray-300 col-span-2",children:[n.jsx("div",{className:"w-16 font-semibold",children:"Subject:"}),n.jsx("div",{className:"min-w-0 break-words",children:p.subject||""})]}),n.jsx("div",{className:"quote-meta-quote md:justify-center border-r border-b border-gray-300 text-center p-2",children:n.jsx("div",{className:"text-sm text-gray-700",children:_We(p.issuedDate)})})]}),n.jsx("div",{className:"mt-4 text-sm text-gray-900 whitespace-pre-wrap",children:p.intro||""})]}),n.jsx("div",{className:"mt-4 overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm border border-gray-400 border-collapse",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-gray-100",children:[n.jsx("th",{className:"border border-gray-400 px-2 py-2 w-14",children:"Item"}),n.jsx("th",{className:"border border-gray-400 px-2 py-2 text-left",children:"Description"}),n.jsx("th",{className:"border border-gray-400 px-2 py-2 w-20",children:"Qty"}),n.jsx("th",{className:"border border-gray-400 px-2 py-2 w-20",children:"Unit"}),n.jsx("th",{className:"border border-gray-400 px-2 py-2 w-28",children:"Unit Price"}),n.jsx("th",{className:"border border-gray-400 px-2 py-2 w-28",children:"Total Cost"})]})}),n.jsx("tbody",{children:N.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"border border-gray-400 px-2 py-4 text-center text-gray-600",children:"No line items."})}):N.map((_,E)=>{const T=_?.name?String(_.name).trim():"",A=_?.description?String(_.description).trim():"",L=_?.variant?String(_.variant).trim():"",M=_?.sku?String(_.sku).trim():"",F=L&&M?`${L} (${M})`:M?`(${M})`:L,D=[T,A,F].map(q=>q?String(q).trim():"").filter(Boolean).join(`
`);return n.jsxs("tr",{children:[n.jsx("td",{className:"border border-gray-400 px-2 py-2 text-center",children:E+1}),n.jsx("td",{className:"border border-gray-400 px-2 py-2 whitespace-pre-wrap",children:D}),n.jsx("td",{className:"border border-gray-400 px-2 py-2 text-center",children:fv(_?.quantity)||""}),n.jsx("td",{className:"border border-gray-400 px-2 py-2 text-center",children:_?.unit||""}),n.jsx("td",{className:"border border-gray-400 px-2 py-2 text-right",children:sf(_?.unit_price,r)}),n.jsx("td",{className:"border border-gray-400 px-2 py-2 text-right",children:sf(_?.line_total,r)})]},_?.id??E)})})]})}),n.jsx("div",{className:"mt-4 flex justify-end",children:n.jsx("table",{className:"text-sm border border-gray-400 border-collapse min-w-[280px]",children:n.jsxs("tbody",{children:[n.jsxs("tr",{children:[n.jsx("td",{className:"border border-gray-400 px-3 py-2 font-semibold",children:"SUB TOTAL"}),n.jsx("td",{className:"border border-gray-400 px-3 py-2 text-right",children:sf(o?.subtotal,r)})]}),v>0?n.jsxs("tr",{children:[n.jsx("td",{className:"border border-gray-400 px-3 py-2 font-semibold",children:"Less: Discount"}),n.jsx("td",{className:"border border-gray-400 px-3 py-2 text-right",children:sf(o?.discount_amount,r)})]}):null,n.jsxs("tr",{children:[n.jsxs("td",{className:"border border-gray-400 px-3 py-2 font-semibold",children:["Tax ",j.toFixed(0),"%"]}),n.jsx("td",{className:"border border-gray-400 px-3 py-2 text-right",children:sf(o?.tax_amount,r)})]}),n.jsxs("tr",{children:[n.jsx("td",{className:"border border-gray-400 px-3 py-2 font-bold",children:"TOTAL"}),n.jsx("td",{className:"border border-gray-400 px-3 py-2 text-right font-bold",children:sf(o?.total_amount,r)})]})]})})}),n.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-bold text-gray-900 mb-2",children:"TERMS & CONDITIONS:"}),n.jsxs("div",{className:"text-sm",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("div",{className:"w-28 font-semibold",children:"Validity"}),n.jsxs("div",{className:"flex-1",children:[": ",p.terms?.validity||""]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("div",{className:"w-28 font-semibold",children:"Payment"}),n.jsxs("div",{className:"flex-1",children:[": ",p.terms?.payment||""]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("div",{className:"w-28 font-semibold",children:"Delivery Period"}),n.jsxs("div",{className:"flex-1",children:[": ",p.terms?.deliveryPeriod||""]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("div",{className:"w-28 font-semibold",children:"Delivery Point"}),n.jsxs("div",{className:"flex-1",children:[": ",p.terms?.deliveryPoint||""]})]})]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-bold text-gray-900 mb-2",children:"NOTE:"}),n.jsx("div",{className:"text-sm whitespace-pre-wrap text-gray-900",children:p.notes||""})]})]}),n.jsxs("div",{className:"mt-10 grid grid-cols-2 gap-10 text-sm",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-gray-700",children:"Prepared by:"}),n.jsx("div",{className:"mt-8 border-b border-gray-400"}),n.jsx("div",{className:"mt-2 font-semibold",children:w})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-gray-700",children:"Approved by:"}),n.jsx("div",{className:"mt-8 border-b border-gray-400"}),n.jsx("div",{className:"mt-2 font-semibold",children:S})]})]}),n.jsx("div",{className:"mt-6 text-xs text-gray-500",children:"Generated from Sari-Sari CRM quotation."})]})]})]})}function TWe({toggleSidebar:e}){const[t,a]=h.useState(!1),[s,r]=h.useState(!1),[i,o]=h.useState([]),[l,c]=h.useState(0),u=h.useRef(null),d=h.useRef(null),f=Jt(),p=jt(),{logout:x}=Ks(),{user:y,fetchUser:N}=qt(),j={"/group-manager/dashboard":"Dashboard","/group-manager/accounts":"Accounts","/group-manager/contacts":"Contacts","/reports":"Reports","/leads":"Leads","/group-manager/Audit":"Audit","/group-manager/targets":"Targets","/group-manager/leads":"Leads","/group-manager/quotes":"Quotes","/group-manager/users":"Users","/group-manager/deals":"Deals"}[f.pathname]||"Group Manager Panel";return h.useEffect(()=>{N()},[]),h.useEffect(()=>{const w=()=>{N()};return window.addEventListener("userProfileUpdated",w),()=>{window.removeEventListener("userProfileUpdated",w)}},[N]),h.useEffect(()=>{if(!y?.id)return;const w=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",S=window.location.protocol==="https:"?"wss:":"ws:",_=w?"localhost:8000":window.location.host,E=`${S}//${_}/ws/notifications?user_id=${y.id}`,T=new WebSocket(E);return T.onmessage=A=>{const L=JSON.parse(A.data);o(M=>[L,...M]),c(M=>M+1)},()=>T.close()},[y?.id]),h.useEffect(()=>{function w(S){u.current&&!u.current.contains(S.target)&&a(!1),d.current&&!d.current.contains(S.target)&&r(!1)}return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),n.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative z-50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:n.jsx(Zf,{className:"text-2xl"})}),n.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:j})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"relative",ref:d,children:[n.jsxs("button",{onClick:()=>r(!s),className:"relative text-gray-600 hover:text-gray-800 transition",children:[n.jsx(cx,{className:"text-xl"}),l>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] w-4 h-4 flex items-center justify-center rounded-full font-semibold",children:l})]}),s&&n.jsxs("div",{className:"absolute right-0 mt-3 w-80 bg-white rounded-xl shadow-lg border z-50 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200",children:[n.jsxs("div",{className:"p-3 border-b bg-gray-50 flex justify-between items-center",children:[n.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:"Notifications"}),n.jsx("button",{onClick:()=>{o([]),c(0)},className:"text-xs text-blue-600 hover:underline",children:"Clear All"})]}),n.jsx("div",{className:"max-h-60 overflow-y-auto",children:i.length>0?i.map((w,S)=>n.jsx("div",{className:"p-3 border-b text-sm hover:bg-gray-50 cursor-pointer transition",children:w.title||w.message||"New Notification"},S)):n.jsx("div",{className:"p-4 text-center text-gray-500 text-xs",children:"No notifications"})})]})]}),n.jsxs("div",{className:"relative",ref:u,children:[n.jsxs("button",{onClick:()=>a(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded transition",children:[n.jsx("img",{src:y?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 h-8 object-cover rounded-full border border-gray-200"}),n.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[y?.first_name," ",y?.last_name]})]}),t&&n.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4 animate-in fade-in slide-in-from-top-2 duration-200",children:[n.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[n.jsx("img",{src:y?.profile_picture||"https://via.placeholder.com/80",alt:"Profile Large",className:"w-16 h-16 rounded-full object-cover border-2 border-gray-100"}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[y?.first_name," ",y?.middle_name," ",y?.last_name]}),n.jsx("p",{className:"text-[11px] text-gray-600 font-light w-full truncate",children:"Group Manager"})]})]}),n.jsxs("div",{className:"mt-6 space-y-1 px-2",children:[n.jsx("button",{onClick:()=>{p("/group-manager/users"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 p-2 rounded text-left transition",children:"Invite Your Team"}),n.jsx("button",{onClick:()=>{p("/group-manager/manage-account"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 p-2 rounded text-left transition",children:"Manage Your Account"}),n.jsx("div",{className:"border-t border-gray-100 my-2"}),n.jsx("button",{onClick:x,className:"block w-full text-sm text-red-600 hover:bg-red-50 p-2 rounded text-left transition font-medium",children:"Logout"})]})]})]})]})]})}function kWe(){const[e,t]=h.useState(!1),[a,s]=h.useState(!1),[r,i]=h.useState(!1),[o,l]=h.useState(!1),c=Jt(),{user:u}=qt();h.useEffect(()=>{u&&console.log("Fetched user:",u)},[u]),h.useEffect(()=>{console.log("Simulating user fetch... (no backend)")},[]),h.useEffect(()=>{document.title="Panel | Sari-Sari CRM"},[]);const d="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",f="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition";return["/group-manager/accounts","/group-manager/contacts","/group-manager/leads","/group-manager/deals","/group-manager/quotes","/group-manager/targets","/group-manager/meetings"].includes(c.pathname),n.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[n.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${o?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[n.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[n.jsxs("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:[" Sari-Sari.CRM"," ",n.jsx("span",{className:"text-[12px] text-gray-700 font-medium align-bottom",children:"v2"})]}),u&&u.company&&n.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:u.company.company_name})]}),n.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[n.jsxs(Ft,{to:"/group-manager/dashboard",className:({isActive:x})=>x?d:f,children:[n.jsx(dx,{className:"text-lg"}),n.jsx("span",{children:"Dashboard"})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>t(!e),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(tn,{className:"text-lg"}),"Sales"]}),n.jsx(Lt,{className:`transition-transform ${e?"rotate-180":""}`})]}),e&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(Ft,{to:"/group-manager/accounts",className:({isActive:x})=>x?d:f,children:[n.jsx(wd,{})," Accounts"]}),n.jsxs(Ft,{to:"/group-manager/contacts",className:({isActive:x})=>x?d:f,children:[n.jsx(nn,{})," Contacts"]}),n.jsxs(Ft,{to:"/group-manager/leads",className:({isActive:x})=>x?d:f,children:[n.jsx(Kn,{})," Leads"]}),n.jsxs(Ft,{to:"/group-manager/deals",className:({isActive:x})=>x?d:f,children:[n.jsx(tn,{})," Deals"]}),n.jsxs(Ft,{to:"/group-manager/quotes",className:({isActive:x})=>x?d:f,children:[n.jsx(fn,{})," Quotes"]}),n.jsxs(Ft,{to:"/group-manager/targets",className:({isActive:x})=>x?d:f,children:[n.jsx(mr,{})," Targets"]})]})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!a),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(ks,{className:"text-lg"}),"Activity"]}),n.jsx(Lt,{className:`transition-transform ${a?"rotate-180":""}`})]}),a&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(Ft,{to:"/group-manager/tasks",className:({isActive:x})=>x?d:f,children:[n.jsx(Qt,{})," Tasks"]}),n.jsxs(Ft,{to:"/group-manager/meetings",className:({isActive:x})=>x?d:f,children:[n.jsx(Pt,{})," Meetings"]}),n.jsxs(Ft,{to:"/group-manager/calls",className:({isActive:x})=>x?d:f,children:[n.jsx(zs,{})," Calls"]}),n.jsxs(Ft,{to:"/group-manager/audit",className:({isActive:x})=>x?d:f,children:[n.jsx(ks,{})," Audit"]})]})]}),n.jsx("div",{children:n.jsx(Ft,{to:"/group-manager/territory",className:({isActive:x})=>x?d:f,children:n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Zl,{className:"text-lg"}),"Territory"]})})}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!r),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(NL,{className:"text-lg"}),"Settings"]}),n.jsx(Lt,{className:`transition-transform ${r?"rotate-180":""}`})]}),r&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(Ft,{to:"/group-manager/users",className:({isActive:x})=>x?d:f,children:[n.jsx(ra,{})," Users"]}),n.jsxs(Ft,{to:"/group-manager/manage-account",className:({isActive:x})=>x?d:f,children:[n.jsx(nn,{})," Your Profile"]})]})]})]}),n.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),o&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>l(!1)}),n.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[n.jsx(TWe,{toggleSidebar:()=>l(!o)}),n.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:n.jsx(tx,{})})]})]})}const EWe=e=>n.jsx(Vt,{...e}),LWe=e=>n.jsx(wd,{...e}),pee=e=>n.jsx(Vs,{...e}),PWe=e=>n.jsx(lx,{...e}),DWe=e=>n.jsx(aN,{...e}),OWe=e=>n.jsx(Pt,{...e}),MWe=e=>n.jsx(Ot,{...e}),IWe=e=>n.jsx(rN,{...e}),xee=e=>n.jsx(sN,{...e}),$We=e=>n.jsx(ra,{...e}),yee=e=>n.jsx(nn,{...e}),RWe=e=>n.jsx(Kn,{...e}),bee=e=>n.jsx(tn,{...e}),zWe=e=>n.jsx(fn,{...e}),vee=e=>n.jsx(mr,{...e}),FWe=e=>n.jsx(aa,{...e}),UWe=e=>n.jsx(Pt,{...e}),BWe=e=>n.jsx(zs,{...e}),HWe=e=>n.jsx(Zl,{...e}),qWe=e=>n.jsx(ks,{...e}),wee=(e,t="")=>{const a=parseFloat(e)||0;return new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short",maximumFractionDigits:1}).format(a).replace(/^/,`${t} `)},WWe=e=>{switch(e){case"Negotiation":return{text:"text-purple-700",bg:"bg-purple-100"};case"Proposal":return{text:"text-red-700",bg:"bg-red-100"};case"Qualification":return{text:"text-yellow-700",bg:"bg-yellow-100"};case"Prospecting":return{text:"text-blue-700",bg:"bg-blue-100"};case"Closed Won":return{text:"text-green-700",bg:"bg-green-100"};case"Closed Lost":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},GWe=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},VWe=e=>{switch(e){case"call":return{Icon:MWe,color:"text-red-500",bgColor:"bg-red-100"};case"qualification":return{Icon:IWe,color:"text-green-600",bgColor:"bg-green-100"};default:return{Icon:OWe,color:"text-blue-500",bgColor:"bg-blue-100"}}},YWe=e=>{switch(e.toUpperCase()){case"HIGH":return{text:"text-red-700",bg:"bg-red-100"};case"LOW":return{text:"text-blue-700",bg:"bg-blue-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},QWe=({searchQuery:e,onSearchChange:t,searchResults:a,onSearchResultClick:s})=>{const r=jt(),[i,o]=h.useState(!1),l=h.useRef(null),c=[{icon:LWe,label:"Account"},{icon:yee,label:"Contact"},{icon:RWe,label:"Leads"},{icon:bee,label:"Deals"},{icon:zWe,label:"Quotes"},{icon:vee,label:"Target"},{icon:FWe,label:"Task"},{icon:UWe,label:"Meeting"},{icon:BWe,label:"Call"},{icon:qWe,label:"Audit"},{icon:HWe,label:"Territory"}];h.useEffect(()=>{const f=p=>{l.current&&!l.current.contains(p.target)&&o(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const u=f=>{t(f.target.value),o(f.target.value.trim().length>0)},d=f=>{s&&s(f),o(!1)};return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 sm:p-4 flex flex-col items-start space-y-4 w-full",children:[n.jsxs("div",{className:"w-full flex justify-center relative",ref:l,children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg lg:mt-3 px-4 py-2 w-full max-w-md md:max-w-lg lg:max-w-2xl focus-within:ring-2 focus-within:ring-blue-500 transition duration-150",children:[n.jsx(EWe,{size:20,className:"text-gray-400 mr-3 flex-shrink-0"}),n.jsx("input",{type:"text",placeholder:"Search Leads, Deals, or Accounts...",className:"focus:outline-none text-base w-full",value:e,onChange:u,onFocus:()=>e.trim().length>0&&o(!0)})]}),i&&Array.isArray(a)&&a.length>0&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:a.map((f,p)=>n.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition duration-150",onClick:()=>d(f),children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:f.name}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:f.type}),f.details&&n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:f.details})]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${f.type==="Lead"?"bg-blue-100 text-blue-600":f.type==="Deal"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:f.type})]})},p))}),i&&e.trim().length>0&&(!Array.isArray(a)||a.length===0)&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 p-4 text-center text-sm text-gray-500",children:"No results found"})]}),n.jsx("div",{className:"w-full overflow-x-auto lg:overflow-x-hidden scroll-smooth flex justify-center",children:n.jsx("div",{className:"flex flex-nowrap space-x-3 lg:space-x-4 xl:space-x-3 px-2 sm:px-0",children:c.map((f,p)=>n.jsxs("div",{className:"relative flex-shrink-0 group",children:[n.jsx("button",{className:"p-3 text-gray-500 hover:text-gray-900 transition duration-150 rounded-full hover:bg-gray-100 focus:outline-none cursor-pointer","aria-label":f.label,title:f.label,onClick:()=>{switch(f.label){case"Account":r("/group-manager/accounts");break;case"Contact":r("/group-manager/contacts");break;case"Leads":r("/group-manager/leads");break;case"Deals":r("/group-manager/deals");break;case"Quotes":r("/group-manager/quotes");break;case"Target":r("/group-manager/targets");break;case"Task":r("/group-manager/tasks");break;case"Meeting":r("/group-manager/meetings");break;case"Call":r("/group-manager/calls");break;case"Audit":r("/group-manager/audit");break;case"Territory":r("/group-manager/territory");break;default:console.log(`Clicked ${f.label}`)}},children:n.jsx(f.icon,{size:24,className:"lg:scale-95"})}),n.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-1.5 bg-gray-900 text-white text-xs font-semibold rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-75 ease-in-out z-50 shadow-lg",children:[f.label,n.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]},p))})})]})},KWe=({action:e,description:t,entity_type:a,entity_name:s,timestamp:r})=>{const i=jt(),o=d=>{if(!d)return"Unknown";const f=new Date(d),x=new Date-f,y=Math.floor(x/6e4),N=Math.floor(x/36e5),v=Math.floor(x/864e5);return y<1?"Just now":y<60?`${y} min ago`:N<24?`${N} hour${N>1?"s":""} ago`:v<7?`${v} day${v>1?"s":""} ago`:f.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},l=e||t||"Action",c=s||a||"System",u=o(r);return n.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i("/group-manager/audit"),children:[n.jsxs("p",{className:"text-sm text-gray-800 flex-grow font-medium",children:[l," ",n.jsxs("span",{className:"text-gray-500 italic text-xs",children:["(",c,")"]})]}),n.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-4",children:u})]})},XWe=({logs:e,loading:t})=>{const a=jt();return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Recent Logs"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/group-manager/audit"),children:[n.jsx("span",{children:"See All"}),n.jsx(xee,{size:14,className:"transform -rotate-45"})]})]}),e&&e.length>0?n.jsx("ul",{className:"space-y-1",children:e.slice(0,3).map((s,r)=>n.jsx(KWe,{...s},r))}):n.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No recent logs"})]})},ZWe=({icon:e,title:t,value:a,color:s,bgColor:r,loading:i,onClick:o})=>n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o||(()=>console.log(`Clicked metric card: ${t}`)),children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:20})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a||0})]})]}),JWe=({revenueData:e,loading:t})=>{const a=jt(),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=h.useMemo(()=>{if(console.log("=== RevenueChart calculateRevenueData ==="),console.log("revenueData:",e),console.log("revenueData length:",e?.length),!e||e.length===0){console.log("No revenue data, returning empty chart");const v=new Date;v.getFullYear();const j=v.getMonth(),w=[],S=[];for(let _=0;_<=j;_++)w.push(s[_]),S.push(0);return{labels:w,revenues:S,maxRevenue:0}}const l={};let c=0,u=0;console.log("Processing deals:",e.length),e.forEach((v,j)=>{const w=v.close_date||v.closeDate||null,S=w&&w!==null&&w!=="",_=v.stage||"",E=_.toUpperCase()==="CLOSED_WON"||_==="CLOSED_WON";let T=v.amount;T&&typeof T=="object"&&T.toString?T=parseFloat(T.toString()):T=parseFloat(T)||0;const A=T>0;if(E&&(u++,console.log(`Deal ${j+1} (CLOSED_WON):`,{id:v.id,name:v.name,stage:_,close_date:w,close_date_type:typeof w,amount:T,amount_type:typeof v.amount,hasCloseDate:S,hasAmount:A,willBeAdded:S&&A,allFields:Object.keys(v)})),S&&E&&A)try{let L=new Date(w);if(isNaN(L.getTime())){const M=String(w).split("T")[0];L=new Date(M+"T00:00:00")}if(isNaN(L.getTime()))console.warn(` Invalid date for deal ${v.id}:`,w,"Type:",typeof w);else{const M=L.getFullYear(),F=L.getMonth()+1,$=`${M}-${String(F).padStart(2,"0")}`;l[$]||(l[$]=0),l[$]+=T,c++,console.log(` Added deal ${v.id} to month ${$}: ${T}, total: ${l[$]}`),console.log(`  - Close date: ${w} -> Parsed: ${L.toISOString()} -> Month: ${$} (Year: ${M}, Month: ${F})`)}}catch(L){console.error("Error parsing deal date:",w,L)}else E&&console.warn(` Deal ${v.id} is CLOSED_WON but missing data:`,{hasCloseDate:S,hasAmount:A,closeDate:w,amount:T,originalAmount:v.amount})}),console.log("Summary:",{totalDeals:e.length,closedWonDeals:u,validDealsForGraph:c,monthlyRevenue:l});const d=Object.keys(l).map(v=>parseInt(v.split("-")[0])),f=d.length>0?[...new Set(d)].sort():[],p=new Date().getFullYear();new Date().getMonth();const x=[],y=[];for(let v=0;v<12;v++){const j=`${p}-${String(v+1).padStart(2,"0")}`;x.push(s[v]);const w=l[j]||0;y.push(w),w>0&&console.log(`Month ${s[v]} (${j}): ${w}`)}if(f.length>0){const v=Math.max(...f);if(v>p)for(let j=p+1;j<=v;j++)for(let w=0;w<12;w++){const S=`${j}-${String(w+1).padStart(2,"0")}`,_=l[S]||0;x.push(`${s[w]} ${j}`),y.push(_),_>0&&console.log(`Month ${s[w]} ${j} (${S}): ${_}`)}}const N=Math.max(...y,1);return console.log("Final chart data:",{labels:x,revenues:y,maxRevenue:N,hasData:y.some(v=>v>0)}),{labels:x,revenues:y,maxRevenue:N}},[e]),i=r.labels,o=r.revenues;return console.log("=== FINAL CHART DATA ==="),console.log("X Axis (Months):",i),console.log("Y Axis (Revenue):",o),console.log("Has any revenue > 0:",o.some(l=>l>0)),console.log("All revenue values:",o),console.log("Max revenue:",r.maxRevenue),n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Overview"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/group-manager/deals"),children:[n.jsx("span",{children:"See All"}),n.jsx(xee,{size:14,className:"transform -rotate-45"})]})]}),n.jsx("div",{className:"h-80 relative flex-1 flex items-center justify-center p-6",children:n.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i&&i.length>0&&o&&o.length>0?n.jsx(Ix,{xAxis:[{data:i,scaleType:"point"}],yAxis:[{valueFormatter:l=>l>=1e3?`${(l/1e3).toFixed(0)}k`:l.toString()}],series:[{data:o,showMark:!0,area:!0}],height:320,width:void 0,grid:{vertical:!0,horizontal:!0},margin:{top:40,right:40,bottom:50,left:50},sx:{width:"100%",maxWidth:"100%"}}):n.jsxs("div",{className:"text-center text-gray-500",children:[n.jsx("p",{className:"text-sm",children:"No revenue data available"}),n.jsx("p",{className:"text-xs mt-2",children:"Closed won deals with close dates will appear here"})]})})})]})},wT=({title:e,items:t,children:a,onSeeAll:s})=>{const r=jt(),i=()=>{if(s)s();else{const o={"Latest Leads":"/group-manager/leads","Latest Deals":"/group-manager/deals","Upcoming Activities":"/group-manager/tasks"};o[e]&&r(o[e])}};return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e}),n.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:i,children:"See All"})]}),a]})},eGe=({first_name:e,last_name:t,company_name:a,source:s,created_at:r,id:i})=>{const o=jt(),{text:l,bg:c}=GWe(s||"Website"),u=x=>{if(!x)return"Unknown";const y=new Date(x),v=new Date-y,j=Math.floor(v/6e4),w=Math.floor(v/36e5),S=Math.floor(v/864e5);return j<60?`${j} min ago`:w<24?y.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):S<7?y.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):y.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},d=`${e||""} ${t||""}`.trim()||"Unknown",f=a||"Unknown Company",p=u(r);return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&o(`/group-manager/leads/${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800",children:d}),n.jsx("p",{className:"text-xs text-gray-500",children:f})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-400",children:p}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${l} ${c} px-2 py-0.5 rounded-full`,children:s||"Website"})]})]})})},tGe=({name:e,amount:t,account:a,stage:s,created_at:r,id:i,previousAmount:o,currencySymbol:l})=>{const c=jt(),d={PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"}[s]||s||"Unknown",{text:f,bg:p}=WWe(d),x=parseFloat(t||0),y=o?x>=o?"up":"down":"up",N=y==="up"?PWe:DWe,v=y==="up"?"text-green-400":"text-red-400",j=a?.name||"Unknown Company";return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&c(`/group-manager/deals/info?id=${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex-shrink",children:[n.jsx("p",{className:"font-semibold text-sm text-gray-900",children:e||"Unnamed Deal"}),n.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:j}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${f} ${p} px-2 py-0.5 rounded-full`,children:d})]}),n.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[n.jsx("p",{className:"text-md font-bold text-gray-800",children:wee(x,l)}),n.jsx(N,{size:16,className:`${v} mt-1`})]})]})})},nGe=({type:e,title:t,assignedTo:a,dueDate:s,scheduledDate:r,priority:i,id:o,activityType:l,fullData:c})=>{const u=jt(),f=l||{Call:"call",Meeting:"meeting",Task:"qualification"}[e]||"meeting",{Icon:p,color:x,bgColor:y}=VWe(f),{text:N,bg:v}=YWe(i||"MEDIUM"),S=(T=>{if(!T)return"No date set";const A=new Date(T),M=A-new Date,F=Math.floor(M/864e5);return F===0?`Today, ${A.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:F===1?`Tomorrow, ${A.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:F===-1?`Yesterday, ${A.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:A.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(s||r),_=a||"Unassigned",E=()=>{o&&(c?f==="call"?(sessionStorage.setItem("callDetailData",JSON.stringify(c)),u(`/group-manager/calls/info?id=${o}`)):f==="meeting"?(sessionStorage.setItem("meetingDetailData",JSON.stringify(c)),u(`/group-manager/meetings/info?id=${o}`)):u("/group-manager/tasks"):u(f==="call"?`/group-manager/calls/info?id=${o}`:f==="meeting"?`/group-manager/meetings/info?id=${o}`:"/group-manager/tasks"))};return n.jsxs("div",{className:"flex items-start py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:E,children:[n.jsx("div",{className:`p-2 rounded-lg ${y} mr-3 flex-shrink-0 mt-1`,children:n.jsx(p,{size:20,className:`${x}`})}),n.jsxs("div",{className:"flex-grow",children:[n.jsxs("p",{className:"font-medium text-gray-800 flex items-center mb-1",children:[n.jsx("span",{className:"text-xl leading-none mr-2",children:""}),t||"Untitled Activity"]}),n.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[n.jsxs("p",{className:"flex items-center",children:[n.jsx(pee,{size:14,className:"mr-1.5 text-gray-400"}),S]}),n.jsxs("p",{className:"flex items-center",children:[n.jsx(yee,{size:14,className:"mr-1.5 text-gray-400"}),"Assigned to: ",_]})]})]}),n.jsx("span",{className:`inline-block text-xs font-medium ${N} ${v} px-2 py-0.5 rounded-full flex-shrink-0 self-center ml-4`,children:(i||"MEDIUM").toUpperCase()})]})},aGe=()=>{const e=jt(),{user:t}=qt(),a=t?.company?.currency||"",[s,r]=h.useState({activeLeads:0,totalDeals:0,activeAccounts:0,overdueTasks:0}),[i,o]=h.useState([]),[l,c]=h.useState([]),[u,d]=h.useState([]),[f,p]=h.useState([]),[x,y]=h.useState([]),[N,v]=h.useState([]),[j,w]=h.useState(!0),[S,_]=h.useState(null),[E,T]=h.useState(""),[A,L]=h.useState([]),[M,F]=h.useState([]),[$,D]=h.useState([]),[q,G]=h.useState([]),[U,V]=h.useState(0),[Z,Y]=h.useState(new Date),le=h.useRef(null),_e=h.useRef(null),te=h.useMemo(()=>{try{if(!E.trim())return[];const he=E.toLowerCase().trim(),ve=[];return Array.isArray(A)&&A.forEach(ne=>{const Se=`${ne.first_name||""} ${ne.last_name||""}`.trim().toLowerCase(),de=(ne.company_name||"").toLowerCase(),ke=(ne.email||"").toLowerCase(),Te=(ne.phone||"").toLowerCase();(Se.includes(he)||de.includes(he)||ke.includes(he)||Te.includes(he))&&ve.push({id:ne.id,name:`${ne.first_name||""} ${ne.last_name||""}`.trim()||"Unnamed Lead",type:"Lead",details:ne.company_name||"No company",route:`/group-manager/leads/${ne.id}`})}),Array.isArray(M)&&M.forEach(ne=>{const Se=(ne.name||"").toLowerCase(),de=(ne.account?.name||"").toLowerCase(),ke=(ne.description||"").toLowerCase();(Se.includes(he)||de.includes(he)||ke.includes(he))&&ve.push({id:ne.id,name:ne.name||"Unnamed Deal",type:"Deal",details:ne.account?.name||"No account",route:`/group-manager/deals/info?id=${ne.id}`})}),Array.isArray($)&&$.forEach(ne=>{const Se=(ne.name||"").toLowerCase(),de=(ne.email||"").toLowerCase(),ke=(ne.phone||"").toLowerCase(),Te=(ne.website||"").toLowerCase();(Se.includes(he)||de.includes(he)||ke.includes(he)||Te.includes(he))&&ve.push({id:ne.id,name:ne.name||"Unnamed Account",type:"Account",details:ne.email||ne.phone||"No contact info",route:"/group-manager/accounts"})}),ve.slice(0,10)}catch(he){return console.error("Error in search:",he),[]}},[E,A,M,$]),ae=he=>{he.route&&(e(he.route),T(""))},ye=h.useCallback(async()=>{w(!0),_(null);try{const[he,ve,ne,Se,de,ke,Te,pe]=await Promise.all([se.get("/leads/admin/getLeads").catch(oe=>(console.error("Error fetching leads:",oe),{data:[]})),se.get("/deals/admin/fetch-all").catch(oe=>(console.error("Error fetching deals:",oe),{data:[]})),se.get("/accounts/admin/fetch-all").catch(oe=>(console.error("Error fetching accounts:",oe),{data:[]})),se.get("/tasks/all").catch(oe=>(console.error("Error fetching tasks:",oe),{data:[]})),se.get("/meetings/admin/fetch-all").catch(oe=>(console.error("Error fetching meetings:",oe),{data:[]})),se.get("/calls/admin/fetch-all").catch(oe=>(console.error("Error fetching calls:",oe),{data:[]})),se.get("/logs/read-all").catch(oe=>(console.error("Error fetching logs:",oe),{data:[]})),se.get("/targets/admin/fetch-all").catch(oe=>(console.error("Error fetching targets:",oe),{data:[]}))]),ze=Array.isArray(he.data)?he.data:[],Pe=Array.isArray(ve.data)?ve.data:[],We=Array.isArray(ne.data)?ne.data:[],tt=Array.isArray(Se.data)?Se.data:[],lt=Array.isArray(de.data)?de.data:[],Ie=Array.isArray(ke.data)?ke.data:[],rt=Array.isArray(Te.data)?Te.data:[],He=Array.isArray(pe.data)?pe.data:[];console.log("=== RAW DEALS API RESPONSE ==="),console.log("Deals count:",Pe.length),Pe.length>0&&(console.log("First deal sample (raw):",JSON.stringify(Pe[0],null,2)),console.log("First deal keys:",Object.keys(Pe[0]))),L(ze),F(Pe),D(We),G(He);const Ke=He.reduce((oe,De)=>{const $e=De.amount||De.value||De.target_amount||0,Xe=parseFloat(typeof $e=="string"?$e.replace(/[^\d.-]/g,""):$e);return oe+(Number.isFinite(Xe)?Xe:0)},0);V(Ke);const Je=ze.filter(oe=>oe.status&&!["Lost","Converted"].includes(oe.status)).length,Oe=tt.filter(oe=>!oe.dueDate||oe.status==="Completed"?!1:new Date(oe.dueDate)<new Date).length;r({activeLeads:Je,totalDeals:Pe.length,activeAccounts:We.length,overdueTasks:Oe});const Ce=[...ze].sort((oe,De)=>new Date(De.created_at||0)-new Date(oe.created_at||0)).slice(0,5);o(Ce);const fe=[...Pe].sort((oe,De)=>new Date(De.created_at||0)-new Date(oe.created_at||0)).slice(0,5);c(fe);const ue=new Date,H=[];Ie.forEach(oe=>{const De=oe.due_date||oe.call_time,$e=(oe.status||"").toUpperCase();if(De){const Xe=new Date(De);$e==="COMPLETED"||$e==="MISSED"||$e==="NOT_HELD"||$e==="HELD"||H.push({type:"Call",title:oe.subject||"Untitled Call",assignedTo:oe.assigned_to||(oe.call_assign_to?`${oe.call_assign_to.first_name||""} ${oe.call_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:De,priority:(oe.priority||"MEDIUM").toUpperCase(),id:oe.id,activityType:"call",fullData:oe})}}),lt.forEach(oe=>{const De=oe.dueDate||oe.start_time,$e=(oe.status||"").toUpperCase();if(De){const Xe=new Date(De);$e==="COMPLETED"||$e==="CANCELLED"||$e==="DONE"||H.push({type:"Meeting",title:oe.subject||oe.activity||"Untitled Meeting",assignedTo:oe.assignedTo||(oe.meet_assign_to?`${oe.meet_assign_to.first_name||""} ${oe.meet_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:De,priority:(oe.priority||"MEDIUM").toUpperCase(),id:oe.id,activityType:"meeting",fullData:oe})}});const K={HIGH:1,MEDIUM:2,LOW:3},we=H.sort((oe,De)=>{const $e=K[oe.priority]||3,Xe=K[De.priority]||3;if($e!==Xe)return $e-Xe;const Ze=new Date(oe.scheduledDate||0),mt=new Date(De.scheduledDate||0);return Ze-mt}).slice(0,5);d(we),p(Pe),console.log("=== ALL DEALS DATA ==="),console.log("Total deals:",Pe.length);const Me=Pe.filter(oe=>(oe.stage||"").toUpperCase()==="CLOSED_WON");console.log("CLOSED_WON deals:",Me.length),Me.length>0?(console.log("=== CLOSED_WON DEALS DETAILS ==="),Me.forEach((oe,De)=>{let $e=oe.amount;$e&&typeof $e=="object"?$e.toString?$e=parseFloat($e.toString()):$e=parseFloat($e):$e=parseFloat($e)||0,console.log(`Deal ${De+1}:`,{id:oe.id,name:oe.name,stage:oe.stage,stage_upper:(oe.stage||"").toUpperCase(),amount:oe.amount,amount_parsed:$e,amount_type:typeof oe.amount,close_date:oe.close_date,close_date_type:typeof oe.close_date,close_date_value:oe.close_date?new Date(oe.close_date):null,has_close_date:!!oe.close_date,has_amount:$e>0,all_keys:Object.keys(oe),full_deal:oe})})):(console.log(" No CLOSED_WON deals found!"),console.log("All deal stages:",Pe.map(oe=>oe.stage))),v(Pe);const ce=[...rt].sort((oe,De)=>new Date(De.timestamp||0)-new Date(oe.timestamp||0));y(ce)}catch(he){console.error("Error fetching dashboard data:",he),_("Failed to load dashboard data. Please refresh the page.")}finally{w(!1)}},[]);h.useEffect(()=>(document.title="Dashboard | Sari-Sari CRM",console.log("TManagerDashboard mounted, fetching data..."),ye(),le.current=setInterval(()=>{console.log("Auto-refreshing dashboard data..."),ye(),Y(new Date)},3e4),()=>{le.current&&clearInterval(le.current)}),[ye]),h.useEffect(()=>{if(!t||!t.id)return;let he=0;const ve=3;let ne=null;const Se=()=>{const de=window.location.protocol==="https:"?"wss:":"ws:",ke=window.location.hostname==="localhost"?"localhost:8000":window.location.host,Te=`${de}//${ke}/ws/notifications?user_id=${t.id}`;try{const pe=new WebSocket(Te);_e.current=pe,pe.onopen=()=>{console.log(" WebSocket connected for dashboard updates"),he=0},pe.onmessage=ze=>{try{const Pe=JSON.parse(ze.data);console.log(" Real-time notification received:",Pe),Pe.event&&["new_task","task_updated","new_lead","lead_updated","new_deal","deal_updated","new_account","account_updated","new_meeting","meeting_updated","new_call","call_updated"].includes(Pe.event)&&(console.log(" Refreshing dashboard due to:",Pe.event),ye(),Y(new Date))}catch(Pe){console.error("Error parsing WebSocket message:",Pe)}},pe.onerror=ze=>{he===0&&console.warn(" WebSocket connection unavailable (this is optional)")},pe.onclose=()=>{he<ve&&(he++,ne=setTimeout(()=>{t&&t.id&&Se()},5e3))}}catch{console.warn(" WebSocket not available (optional feature)")}};return Se(),()=>{ne&&clearTimeout(ne),_e.current&&(_e.current.close(),_e.current=null)}},[t,ye]);const Ne=[{icon:$We,title:"Active Leads",value:s.activeLeads,color:"text-blue-600",bgColor:"bg-blue-50",onClick:()=>e("/group-manager/leads")},{icon:vee,title:"Total Targets",value:wee(U,a),color:"text-purple-600",bgColor:"bg-purple-50",onClick:()=>e("/group-manager/targets")},{icon:bee,title:"Total Deals",value:s.totalDeals,color:"text-yellow-600",bgColor:"bg-yellow-50",onClick:()=>e("/group-manager/deals")},{icon:pee,title:"Overdue Tasks",value:s.overdueTasks,color:"text-red-600",bgColor:"bg-red-50",onClick:()=>e("/group-manager/tasks")}];return console.log("TManagerDashboard rendering, loading:",j,"error:",S),n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative w-full",children:[j&&n.jsx(Wt,{}),n.jsxs("div",{className:"max-w-screen-2xl mx-auto",children:[S&&n.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:n.jsx("p",{className:"font-medium",children:S})}),n.jsx("div",{className:"mb-8",children:n.jsx(QWe,{searchQuery:E,onSearchChange:T,searchResults:te,onSearchResultClick:ae})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-8",children:Ne.map(he=>n.jsx(ZWe,{...he,loading:j},he.title))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[n.jsx(XWe,{logs:x,loading:j}),n.jsx(fP,{currencySymbol:a})]}),n.jsx("div",{className:"mb-8",children:n.jsx(vj,{leads:A,deals:M,targets:q,currencySymbol:a,basePath:"/group-manager"})}),n.jsx("div",{className:"grid grid-cols-1 mb-8",children:n.jsx(JWe,{revenueData:N,loading:j})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsx(wT,{title:"Latest Leads",children:i.length>0?i.map((he,ve)=>n.jsx(eGe,{...he},he.id||ve)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No leads found"})}),n.jsx(wT,{title:"Latest Deals",children:j?n.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mb-2"}),n.jsx("div",{className:"text-sm text-gray-500",children:"Loading deals..."})]}):l.length>0?l.map((he,ve)=>n.jsx(tGe,{...he,currencySymbol:a},he.id||ve)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No deals found"})}),n.jsx(wT,{title:"Upcoming Activities",children:u.length>0?u.map((he,ve)=>n.jsx(nGe,{...he},he.id||ve)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No upcoming activities"})})]})]})]})},NT=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Vendor"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Delete"}],jT={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",parent_company:"",status:"PROSPECT",territory_id:"",assigned_to:""},dr=e=>e?e.toUpperCase():"",CT=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",sGe=e=>{switch(dr(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},rGe=e=>{switch(dr(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}};function iGe(){const e=jt(),{user:t}=qt();h.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[a,s]=h.useState(!1),[r,i]=h.useState(!1),[o,l]=h.useState(!1),[c,u]=h.useState(null),[d,f]=h.useState(null),[p,x]=h.useState(jT),[y,N]=h.useState(null),[v,j]=h.useState([]),[w,S]=h.useState(!1),[_,E]=h.useState([]),[T,A]=h.useState(null),[L,M]=h.useState([]),[F,$]=h.useState([]),[D,q]=h.useState("Filter by Status"),[G,U]=h.useState(""),[V,Z]=h.useState(null),[Y,le]=h.useState(!1),[_e,te]=h.useState(1),[ae,ye]=h.useState(10),[Ne,he]=h.useState("Overview"),[ve,ne]=h.useState(""),[Se,de]=h.useState(!1),[ke,Te]=h.useState({}),[pe,ze]=h.useState(null),[Pe,We]=h.useState(new Set),[tt,lt]=h.useState(!1),{comments:Ie,addComment:rt,refresh:He}=ka({relatedType:"account",relatedId:y?.id});h.useEffect(()=>{y?.id&&He()},[y?.id,He]);const Ke=h.useCallback(async(k=null)=>{S(!0);try{const B=await se.get("/accounts/admin/fetch-all"),Ae=[...Array.isArray(B.data)?B.data:[]].sort((Ue,Ge)=>{const ct=Ue?.created_at||Ue?.updated_at||0,yt=Ge?.created_at||Ge?.updated_at||0;return new Date(yt)-new Date(ct)});if(j(Ae),k){const Ue=Ae.find(Ge=>Ge.id===k);N(Ue||null)}}catch(B){console.error(B),j([]),B.response?.status===403?W.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):W.error("Failed to fetch accounts. Please try again later.")}finally{S(!1)}},[N]),Je=h.useCallback(async()=>{try{const k=await se.get("/users/all");E(Array.isArray(k.data)?k.data:[])}catch(k){console.error(k),k.response?.status===403&&W.warn("Unable to load users for assignment (permission denied).")}},[]),Oe=h.useCallback(async()=>{try{const k=await se.get("/territories/fetch");M(Array.isArray(k.data)?k.data:[])}catch(k){console.error(k),k.response?.status===403&&W.warn("Unable to load territories (permission denied).")}},[]),Ce=h.useCallback(async()=>{try{const k=await se.get("/accounts/admin/parent-companies");$(Array.isArray(k.data)?k.data:[])}catch(k){console.error(k),k.response?.status===403&&W.warn("Unable to load parent companies (permission denied).")}},[]),fe=h.useCallback(async k=>{try{const B=await se.get(`/activities/accounts/${k}`);Te(B.data&&typeof B.data=="object"?B.data:{})}catch(B){console.error(B),B.response?.status===404&&(console.warn("No activities found for this account."),Te({}))}},[]);h.useEffect(()=>{Ke(),Je(),Oe(),Ce()},[Ke,Je,Oe,Ce]),h.useEffect(()=>{y&&ne(dr(y.status)||"PROSPECT")},[y]);const ue=v.length,H=h.useMemo(()=>v.filter(k=>k.status?.toLowerCase()==="customer").length,[v]),K=h.useMemo(()=>v.filter(k=>k.status?.toLowerCase()==="prospect").length,[v]),we=h.useMemo(()=>v.filter(k=>k.status?.toLowerCase()==="partner").length,[v]),Me=h.useMemo(()=>v.filter(k=>k.status?.toLowerCase()==="active").length,[v]),ce=h.useMemo(()=>v.filter(k=>k.status?.toLowerCase()==="inactive").length,[v]),oe=h.useMemo(()=>v.filter(k=>k.status?.toLowerCase()==="former").length,[v]),De=h.useMemo(()=>[{title:"Total",value:ue,icon:ra,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:H,icon:Io,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:K,icon:Kn,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:we,icon:nn,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:Me,icon:Io,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:ce,icon:$o,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:oe,icon:$o,color:"text-orange-600",bgColor:"bg-orange-100"}],[ue,H,K,we,Me,ce,oe]),$e=h.useMemo(()=>{const k=G.trim().toLowerCase(),B=D.trim().toUpperCase();return v.filter(xe=>{const Ae=[xe?.name,xe?.website,xe?.industry,xe?.territory?.name,xe?.phone_number],Ue=k===""||Ae.some(Ea=>Ea==null?!1:Ea.toString().toLowerCase().includes(k)),Ge=B==="FILTER BY STATUS"||dr(xe.status)===B;let ct=!0;const yt=t?.role?.toUpperCase();if(yt!=="GROUP MANAGER"&&yt!=="CEO"&&yt!=="ADMIN"){const Ea=xe?.assigned_to?.id===t?.id||xe?.assigned_to===t?.id,uc=xe?.acc_creator?.id===t?.id;ct=Ea||uc}const Kt=dr(xe.status)==="INACTIVE"&&B!=="INACTIVE";return Ue&&Ge&&ct&&!Kt})},[v,G,D,t?.id]),Xe=Math.max(1,Math.ceil($e.length/ae)||1);h.useEffect(()=>{te(1)},[G,D,ae]),h.useEffect(()=>{te(k=>{const B=Math.max(1,Math.ceil($e.length/ae)||1);return k>B?B:k})},[$e.length,ae]);const Ze=h.useMemo(()=>{const k=(_e-1)*ae;return $e.slice(k,k+ae)},[$e,_e,ae]);$e.length===0||(_e-1)*ae+1,Math.min(_e*ae,$e.length);const mt=()=>te(k=>Math.max(k-1,1)),nt=()=>te(k=>Math.min(k+1,Xe)),Nt=k=>{N(k),he("Overview"),ne(dr(k?.status)||"PROSPECT")},wt=()=>N(null),Tt=k=>{k.target.id==="accountModalBackdrop"&&!Y&&wt()},Re=()=>{s(!1),i(!1),f(null),x(jT),l(!1),A(null)},me=k=>{k.target.id==="modalBackdrop"&&Re()},ie=k=>k?new Date(k).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",Fe=k=>{const{name:B,value:xe}=k.target;x(Ae=>({...Ae,[B]:xe}))},Le=()=>{x(jT),i(!1),f(null),s(!0)},be=k=>{N(null),k.assigned_accs?A(k.assigned_accs):A(null),x({name:k.name||"",website:k.website||"",phone_number:k.phone_number||"",billing_address:k.billing_address||"",shipping_address:k.shipping_address||"",parent_company:k.parent_company||"",industry:k.industry||"",status:dr(k.status)||"PROSPECT",territory_id:k.territory?.id?String(k.territory.id):"",assigned_to:k.assigned_accs?.id?String(k.assigned_accs.id):""}),i(!0),f(k.id),s(!0)},ee=k=>{k&&Z({title:"Archive Account",message:n.jsxs("span",{children:["Are you sure you want to archive the account"," ",n.jsx("span",{className:"font-semibold",children:k.name}),"? You can restore it later if needed."]}),confirmLabel:"Archive Account",cancelLabel:"Cancel",variant:"archive",action:{type:"archive",targetId:k.id,name:k.name}})},O=k=>{const B=Ze.find(xe=>xe.id===k);B&&B.acc_creator?.id===t?.id&&We(xe=>{const Ae=new Set(xe);return Ae.has(k)?Ae.delete(k):Ae.add(k),Ae})},z=()=>{const k=Ze.filter(B=>B.acc_creator?.id===t?.id);Pe.size===k.length&&k.length>0?We(new Set):We(new Set(k.map(B=>B.id)))},I=()=>{if(Pe.size===0)return;const k=Pe.size;Z({title:"Archive Accounts",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:k})," account",k!==1?"s":"","? You can restore them later if needed."]}),confirmLabel:`Archive ${k} Account${k!==1?"s":""}`,cancelLabel:"Cancel",variant:"archive",action:{type:"bulk-archive",targetIds:Array.from(Pe),count:k}})},Q=async()=>{if(!V?.action){Z(null);return}const{action:k}=V,{type:B,payload:xe,targetId:Ae,name:Ue,targetIds:Ge,count:ct}=k;le(!0);try{if(B==="create"){l(!0);const yt=await se.post("/accounts/admin",xe);Ce(),W.success(`Account "${Ue}" created successfully.`);const Et=y?.id||null;Re(),await Ke(Et),!y&&yt.data?.id}else if(B==="update"){if(!Ae)throw new Error("Missing account identifier for update.");l(!0),await se.put(`/accounts/admin/${Ae}`,xe),W.success(`Account "${Ue}" updated successfully.`);const yt=y?.id&&y.id===Ae?Ae:null;Re(),await Ke(yt),y?.id===Ae&&N(null)}else if(B==="archive"){if(!Ae)throw new Error("Missing account identifier for archiving.");const yt=y?.id;u(Ae),await se.put(`/accounts/admin/${Ae}`,{status:"INACTIVE"}),W.success(`Account "${Ue}" archived successfully.`),await Ke(yt&&yt!==Ae?yt:null),yt===Ae&&N(null)}else if(B==="bulk-archive"){if(!Ge||Ge.length===0)throw new Error("Missing account identifiers for bulk archiving.");lt(!0),await Promise.all(Ge.map(yt=>se.put(`/accounts/admin/${yt}`,{status:"INACTIVE"}))),W.success(`${ct} account${ct!==1?"s":""} archived successfully.`),We(new Set),await Ke(),N(null)}}catch(yt){console.error(yt);const Et=B==="create"?"Failed to create account. Please review the details and try again.":B==="update"?"Failed to update account. Please review the details and try again.":B==="bulk-archive"?"Failed to archive accounts. Please try again.":"Failed to archive account. Please try again.",Kt=yt.response?.data?.detail||Et;W.error(Kt),(B==="create"||B==="update")&&l(!1),B==="archive"&&u(null),B==="bulk-archive"&&lt(!1)}finally{(B==="create"||B==="update")&&l(!1),B==="archive"&&u(null),B==="bulk-archive"&&lt(!1),le(!1),Z(null)}},ge=()=>{Y||Z(null)},re=async()=>{if(!y||!ve)return;const k=dr(ve),B=dr(y.status);if(k!==B){de(!0);try{await se.put(`/accounts/admin/${y.id}`,{status:k}),W.success(`Account status updated to ${CT(k)}`),j(xe=>xe.map(Ae=>Ae.id===y.id?{...Ae,status:k}:Ae)),N(null)}catch(xe){console.error(xe);const Ae=xe.response?.data?.detail||"Failed to update account status. Please try again.";W.error(Ae)}finally{de(!1)}}},[Ee,Qe]=h.useState(!1),gt=k=>{k.preventDefault(),Qe(!0);const B=p.name.trim();if(!B){W.error("Account name is required.");return}if(!p.assigned_to){W.error("Assigned To is required.");return}const Ae={name:B,website:p.website?.trim()||null,phone_number:p.phone_number?.trim()||null,billing_address:p.billing_address?.trim()||null,shipping_address:p.shipping_address?.trim()||null,industry:p.industry?.trim()||null,parent_company:p.parent_company?.trim()||null,status:p.status||"PROSPECT",territory_id:p.territory_id?Number(p.territory_id):null,assigned_to:p.assigned_to?Number(p.assigned_to):null},Ue=r&&d?"update":"create";Z({title:Ue==="create"?"Confirm New Account":"Confirm Update",message:Ue==="create"?n.jsxs("span",{children:["Are you sure you want to create the account"," ",n.jsx("span",{className:"font-semibold",children:B}),"?"]}):n.jsxs("span",{children:["Save changes to the account"," ",n.jsx("span",{className:"font-semibold",children:B}),"?"]}),confirmLabel:Ue==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:Ue,payload:Ae,targetId:d||null,name:B}})},Ct=[{label:"Filter by Status",value:"Filter by Status"},...NT.map(k=>({label:k.label,value:k.value}))],kt=V?.action?.type==="delete"?V.action.targetId:null,Dt=y&&(c===y.id||kt===y.id),on=y&&c===y.id,Qn=y?sGe(y.status):"",ia=y?n.jsx("div",{id:"accountModalBackdrop",onClick:Tt,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:k=>k.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),n.jsx("button",{onClick:wt,className:"text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Xn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:y.name}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${Qn}`,children:CT(y.status)})]}),t?.id===y?.acc_creator?.id&&n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>be(y),disabled:V?.action?.type==="update"&&V.action.targetId===y.id,children:[n.jsx(ga,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>ee(y),disabled:!!Dt,children:on?"Archiving...":n.jsxs(n.Fragment,{children:[n.jsx(Zt,{className:"mr-2"}),"Archive"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(k=>n.jsx("button",{onClick:()=>he(k),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${Ne===k?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:k},k))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[Ne==="Overview"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Website:"}),n.jsx("p",{children:y.website?n.jsx("a",{href:y.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:y.website}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Industry:"}),n.jsx("p",{children:y.industry||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Parent Company:"}),n.jsx("p",{children:y.parent_company||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:y.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:y.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Billing Address:"}),n.jsx("p",{children:y.billing_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),n.jsx("p",{children:y.shipping_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:y.assigned_accs?`${y.assigned_accs.first_name} ${y.assigned_accs.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:y.acc_creator?`${y.acc_creator.first_name} ${y.acc_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:ie(y.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:ie(y.updated_at)||"N/A"})]})]}),n.jsx(Ta,{comments:Ie,onAddComment:rt})]}),Ne==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:v.notes||"No notes available."})]})]}),Ne==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[ke.tasks&&ke.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ze(pe==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",ke.tasks.length,")"]})]}),pe==="tasks"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),pe==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ke.tasks.map((k,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/tasks",{state:{taskID:k.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:k.subject||k.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:k.description||"No description"}),k.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",k.assigned_to.first_name," ",k.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ie(k.due_date||k.created_at)})]},`task-${B}`))})]}),ke.meetings&&ke.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ze(pe==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Pt,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",ke.meetings.length,")"]})]}),pe==="meetings"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),pe==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ke.meetings.map((k,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/meetings",{state:{meetingID:k.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Pt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:k.subject||k.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:k.description||k.location||"No description"}),k.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",k.host.first_name," ",k.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ie(k.start_time||k.created_at)})]},`meeting-${B}`))})]}),ke.calls&&ke.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ze(pe==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ot,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",ke.calls.length,")"]})]}),pe==="calls"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),pe==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ke.calls.map((k,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/calls",{state:{callID:k.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Ot,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:k.subject||k.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:k.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ie(k.call_time||k.created_at)})]},`call-${B}`))})]}),ke.contacts&&ke.contacts.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ze(pe==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(nn,{className:"text-teal-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",ke.contacts.length,")"]})]}),pe==="contacts"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),pe==="contacts"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ke.contacts.map((k,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/contacts",{state:{contactID:k.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-teal-600 mt-1",children:n.jsx(nn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[k.first_name?`${k.first_name} `:"",k.last_name]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:k.title||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ie(k.created_at)})]},`contact-${B}`))})]}),ke.deals&&ke.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ze(pe==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(tn,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",ke.deals.length,")"]})]}),pe==="deals"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),pe==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ke.deals.map((k,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/deals",{state:{dealID:k.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(tn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[k.deal_id?k.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",k.name||k.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:k.stage||k.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ie(k.close_date||k.created_at)})]},`deal-${B}`))})]}),ke.quotes&&ke.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ze(pe==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(fn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",ke.quotes.length,")"]})]}),pe==="quotes"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),pe==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ke.quotes.map((k,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/quotes",{state:{quoteID:k.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(fn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(k.quote_id?k.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:k.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ie(k.presented_date)||""})]},`quote-${B}`))})]}),(!ke||(!ke.tasks||ke.tasks.length===0)&&(!ke.meetings||ke.meetings.length===0)&&(!ke.calls||ke.calls.length===0)&&(!ke.quotes||ke.quotes.length===0)&&(!ke.deals||ke.deals.length===0)&&(!ke.contacts||ke.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/group-manager/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${y.name}`,relatedType1:"Account",relatedTo1:String(y.id),relatedType2:null,relatedTo2:null,assigned_to:y.assigned_accs?.id?String(y.assigned_accs.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Ot,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/group-manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${y.name}`,relatedType1:"Account",relatedTo1:String(y.id),relatedType2:null,relatedTo2:null,assignedTo:y.assigned_accs?.id?String(y.assigned_accs.id):"",status:"Planned"}}}),children:[n.jsx(Pt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/group-manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${y.name}`,relatedType1:"Account",relatedTo1:String(y.id),relatedType2:null,relatedTo2:null,assignedTo:y.assigned_accs?.id?String(y.assigned_accs.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:ve||dr(y?.status)||"PROSPECT",onChange:k=>ne(k.target.value),children:NT.map(k=>n.jsx("option",{value:k.value,children:k.label},k.value))}),n.jsx("button",{onClick:re,disabled:Se||!ve||dr(ve)===dr(y?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Se||!ve||dr(ve)===dr(y?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:Se?"Updating...":"Update"})]})]})]})]})]})}):null,Be=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[w&&n.jsx(Wt,{message:"Loading accounts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(ra,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{Le(),Qe(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(xn,{className:"mr-2"})," Add Account"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:De.map(k=>n.jsx(oGe,{...k},k.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Vt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search accounts",value:G,onChange:k=>U(k.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:D,onChange:k=>q(k.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:Ct.map(k=>n.jsx("option",{value:k.value,children:k.label},k.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:Pe.size>0&&Pe.size===Ze.filter(k=>k.acc_creator?.id===t?.id).length&&Ze.filter(k=>k.acc_creator?.id===t?.id).length>0,onChange:z,className:"w-4 h-4 cursor-pointer rounded border-gray-300",title:Ze.some(k=>k.acc_creator?.id===t?.id)?Pe.size===Ze.filter(k=>k.acc_creator?.id===t?.id).length?"Deselect all":"Select all":"No accounts to select"})}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Industry"}),n.jsx("th",{className:"py-3 px-4",children:"Territory"}),n.jsx("th",{className:"py-3 px-4",children:"Phone"}),n.jsx("th",{className:"py-3 px-4 w-12",children:Pe.size>0&&n.jsx("button",{onClick:I,disabled:tt,title:`Archive ${Pe.size} account${Pe.size!==1?"s":""}`,className:"text-orange-500 hover:text-orange-700 disabled:opacity-50 transition",children:n.jsx(Zt,{size:18})})})]})}),n.jsx("tbody",{children:w?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"Loading accounts..."})}):$e.length>0?Ze.map(k=>n.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",children:[n.jsx("td",{className:"py-3 px-4",children:k.acc_creator?.id===t?.id?n.jsx("input",{type:"checkbox",checked:Pe.has(k.id),onChange:B=>{B.stopPropagation(),O(k.id)},className:"w-4 h-4 cursor-pointer rounded border-gray-300"}):null}),n.jsx("td",{className:"py-3 px-4",onClick:()=>{Nt(k),fe(k.id)},children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:k.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:k.website||"--"})]})}),n.jsx("td",{className:"py-3 px-4",onClick:()=>{Nt(k),fe(k.id)},children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${rGe(k.status)}`,children:CT(k.status)})}),n.jsx("td",{className:"py-3 px-4 text-sm",onClick:()=>{Nt(k),fe(k.id)},children:k.industry||"--"}),n.jsx("td",{className:"py-3 px-4 text-sm",onClick:()=>{Nt(k),fe(k.id)},children:k.territory?.name||"--"}),n.jsx("td",{className:"py-3 px-4",onClick:()=>{Nt(k),fe(k.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(Ot,{className:"text-gray-500"}),n.jsx("span",{children:k.phone_number||"--"})]})})]},k.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No accounts found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:$e.length,pageSize:ae,currentPage:_e,onPrev:mt,onNext:nt,onPageSizeChange:ye,label:"accounts"})]}),_t=a?n.jsx("div",{id:"modalBackdrop",onClick:me,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto hide-scrollbar max-h-[90vh]",onClick:k=>k.stopPropagation(),children:[n.jsx("button",{onClick:()=>{Re(),Qe(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:o||Y,children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:r?"Edit Account":"Add New Account"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:gt,noValidate:!0,children:[n.jsx("div",{className:"md:col-span-2",children:n.jsx(rf,{label:"Name",name:"name",value:p.name,onChange:Fe,placeholder:"Company name",required:!0,isSubmitted:Ee})}),n.jsx(tH,{label:"Parent Company",value:p.parent_company,onChange:k=>{x(B=>({...B,parent_company:k}))},items:F.map(k=>({id:k,name:k})),getLabel:k=>k?.name||"",placeholder:"Select parent company...",disabled:o}),n.jsx(rf,{label:"Website",name:"website",value:p.website,onChange:Fe,placeholder:"https://example.com",disabled:o}),n.jsx(rf,{label:"Phone Number",name:"phone_number",value:p.phone_number,onChange:Fe,placeholder:"09xx xxx xxxx",type:"tel",disabled:o}),n.jsx(rf,{label:"Industry",name:"industry",value:p.industry,onChange:Fe,placeholder:"Industry",disabled:o}),n.jsx(rf,{label:"Billing Address",name:"billing_address",value:p.billing_address,onChange:Fe,placeholder:"Billing address",disabled:o}),n.jsx(rf,{label:"Shipping Address",name:"shipping_address",value:p.shipping_address,onChange:Fe,placeholder:"Shipping address",disabled:o}),n.jsx(eH,{label:"Status",name:"status",value:p.status,onChange:Fe,options:[{value:"",label:"Select status"},...NT],required:!0,disabled:o}),n.jsx(tH,{label:"Assigned To",value:p.assigned_to,onChange:k=>{const B=_.find(Ae=>String(Ae.id)===String(k));A(B);let xe=null;B&&B.assigned_territory&&B.assigned_territory.length===1&&(xe=B.assigned_territory[0].id),x(Ae=>({...Ae,assigned_to:k,territory_id:xe}))},items:_||[],getLabel:k=>`${k?.first_name??""} ${k?.last_name??""} (${k?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:Ee,disabled:o||_.length===0}),n.jsx(eH,{label:"Territory",name:"territory_id",value:p.territory_id||"",onChange:Fe,options:[{value:"",label:T?T.assigned_territory&&T.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"},...T&&T.assigned_territory&&T.assigned_territory.map(k=>({value:String(k.id),label:k.name}))||[]],disabled:o||!T||!T.assigned_territory||T.assigned_territory.length===0}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{Re(),Qe(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:o||Y,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:o||Y,children:o?"Saving...":r?"Update Account":"Save Account"})]})]})]})}):null,X=V?n.jsx(cGe,{open:!0,title:V.title,message:V.message,confirmLabel:V.confirmLabel,cancelLabel:V.cancelLabel,variant:V.variant,onConfirm:Q,onCancel:ge,loading:Y}):null;return n.jsxs(n.Fragment,{children:[Be,ia,_t,X]})}function oGe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function rf({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:u=!1}){const d=u&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function eH({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(l=>n.jsx("option",{value:l.value,children:l.label},l.value))})]})}function tH({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:u=!1,allowFreeText:d=!1}){const f=u&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(lGe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:f,allowFreeText:d})]})}function lGe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1,allowFreeText:c=!1}){const[u,d]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),y=e.find(j=>String(j.id)===String(t)),N=y?s(y):t,v=h.useMemo(()=>{const j=f.trim().toLowerCase();return(j?e.filter(S=>(s(S)||"").toLowerCase().includes(j)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const j=w=>{x.current&&!x.current.contains(w.target)&&d(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]),h.useEffect(()=>{u||p("")},[u]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:u?f:N,placeholder:r,onFocus:()=>!i&&d(!0),onChange:j=>{p(j.target.value),u||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),u&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsxs("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:[c&&f.trim()&&!v.some(j=>s(j).toLowerCase()===f.trim().toLowerCase())&&n.jsxs("button",{type:"button",onClick:()=>{a(f.trim()),d(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-green-50 bg-blue-50 font-medium text-blue-700",children:['+ Add "',f.trim(),'" as new parent company']}),v.length>0?v.map(j=>{const w=String(j.id),S=s(j),_=String(t)===w;return n.jsx("button",{type:"button",onClick:()=>{a(w),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${_?"bg-blue-50":""}`,children:S||"--"},w)}):!c||!f.trim()?n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"}):null]}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function cGe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="archive"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}const ST={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:""},wl=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),go=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function dGe(){const e=jt(),t=Jt(),{user:a}=qt();h.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[s,r]=h.useState([]),[i,o]=h.useState(!1),[l,c]=h.useState([]),[u,d]=h.useState([]),[f,p]=h.useState(null),[x,y]=h.useState(!1),[N,v]=h.useState(!1),[j,w]=h.useState(!1),[S,_]=h.useState(null),[E,T]=h.useState(!1),[A,L]=h.useState(null),[M,F]=h.useState(ST),[$,D]=h.useState(""),[q,G]=h.useState("Filter by Accounts"),[U,V]=h.useState(null),[Z,Y]=h.useState("Overview"),[le,_e]=h.useState(1),[te,ae]=h.useState(10),[ye,Ne]=h.useState({}),[he,ve]=h.useState(null),[ne,Se]=h.useState(null),[de,ke]=h.useState(new Set),[Te,pe]=h.useState(!1),{comments:ze,addComment:Pe,refresh:We}=ka({relatedType:"contact",relatedId:f?.id});h.useEffect(()=>{f?.id&&We()},[f?.id,We]),h.useEffect(()=>{const I=t.state?.contactID;I&&(Se(I),e(t.pathname,{replace:!0,state:{}}))},[t,e]),h.useEffect(()=>{if(ne&&s.length>0&&!i){const I=s.find(Q=>Q.id===ne);I?p(I):W.error("Contact not found."),Se(null)}},[ne,s,i]);const tt=h.useCallback(async(I=null)=>{o(!0);try{const Q=await se.get("/contacts/admin/fetch-all"),re=[...Array.isArray(Q.data)?Q.data:[]].sort((Ee,Qe)=>{const gt=Ee?.created_at||Ee?.updated_at||0,Ct=Qe?.created_at||Qe?.updated_at||0;return new Date(Ct)-new Date(gt)});if(r(re),I){const Ee=re.find(Qe=>Qe.id===I);p(Ee||null)}}catch(Q){console.error(Q),r([]),Q.response?.status===403?W.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):W.error("Failed to fetch contacts. Please try again later.")}finally{o(!1)}},[p]),lt=h.useCallback(async()=>{try{const I=await se.get("/accounts/admin/fetch-all"),ge=[...Array.isArray(I.data)?I.data:[]].sort((re,Ee)=>(re?.name||"").localeCompare(Ee?.name||""));c(ge)}catch(I){console.error(I),c([]),I.response?.status===403&&W.warn("Unable to load accounts (permission denied).")}},[]),Ie=h.useCallback(async()=>{try{const I=await se.get("/users/all"),ge=[...Array.isArray(I.data)?I.data:[]].sort((re,Ee)=>wl(re).localeCompare(wl(Ee)));d(ge)}catch(I){console.error(I),d([]),I.response?.status===403&&W.warn("Unable to load users for assignment (permission denied).")}},[]),rt=h.useCallback(async I=>{try{const Q=await se.get(`/activities/contact/${I}`);Ne(Q.data&&typeof Q.data=="object"?Q.data:{})}catch(Q){console.error(Q),Q.response?.status===404&&(console.warn("No activities found for this account."),Ne({}))}},[]);h.useEffect(()=>{tt(),lt(),Ie()},[tt,lt,Ie]);const He=h.useMemo(()=>{const I=new Map;l.forEach(ge=>{ge?.id&&ge?.name&&I.set(String(ge.id),ge.name)}),s.forEach(ge=>{ge?.account_id&&ge?.account?.name&&I.set(String(ge.account_id),ge.account.name)});const Q=Array.from(I.entries()).sort((ge,re)=>ge[1].localeCompare(re[1])).map(([ge,re])=>({value:ge,label:re}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...Q]},[l,s]),Ke=h.useMemo(()=>{const I=$.trim().toLowerCase(),Q=q.trim();return s.filter(ge=>{const re=[ge?.first_name,ge?.last_name,ge?.email,ge?.title,ge?.department,ge?.account?.name,ge?.account?.status,ge?.work_phone,ge?.mobile_phone_1,ge?.mobile_phone_2,ge?.assigned_contact?.first_name,ge?.assigned_contact?.last_name,ge?.contact_creator?.first_name,ge?.contact_creator?.last_name,ge?.notes,go(ge?.created_at),go(ge?.updated_at)],Ee=I===""||re.some(Dt=>Dt==null?!1:Dt.toString().toLowerCase().includes(I)),Qe=Q==="Filter by Accounts"||String(ge.account_id)===Q,gt=ge?.status!=="Inactive";let Ct=!0;const kt=a?.role?.toUpperCase();if(kt!=="GROUP MANAGER"&&kt!=="CEO"&&kt!=="ADMIN"){const Dt=ge?.assigned_to===a?.id,on=ge?.created_by===a?.id;Ct=Dt||on}return Ee&&Qe&&gt&&Ct})},[s,$,q,a?.id]),Je=Math.max(1,Math.ceil(Ke.length/te)||1);h.useEffect(()=>{_e(1)},[$,q,te]),h.useEffect(()=>{_e(I=>{const Q=Math.max(1,Math.ceil(Ke.length/te)||1);return I>Q?Q:I})},[Ke.length,te]);const Oe=h.useMemo(()=>{const I=(le-1)*te;return Ke.slice(I,I+te)},[Ke,le,te]),Ce=()=>_e(I=>Math.max(I-1,1)),fe=()=>_e(I=>Math.min(I+1,Je)),ue=h.useMemo(()=>{if(!N||!A)return l;const I=s.find(ge=>ge.id===A);return!I||!I.account||l.some(ge=>ge.id===I.account.id)?l:[...l,I.account]},[l,N,A,s]),H=h.useCallback(()=>{y(!1),v(!1),L(null),F(ST),w(!1),mt(!1)},[]),K=I=>{I.target.id==="modalBackdrop"&&!j&&!E&&H()},we=I=>{const{name:Q,value:ge}=I.target;F(re=>({...re,[Q]:ge}))},Me=()=>{F(ST),v(!1),L(null),y(!0)},ce=async I=>{if(!I)return;const Q=await se.get(`/accounts/get/${I.account_id}`);F({first_name:I.first_name||"",last_name:I.last_name||"",account_id:Q.data.id?Q.data.id:"",title:I.title||"",department:I.department||"",email:I.email||"",work_phone:I.work_phone||"",mobile_phone_1:I.mobile_phone_1||"",mobile_phone_2:I.mobile_phone_2||"",notes:I.notes||"",assigned_to:I.assigned_to?String(I.assigned_to):""}),v(!0),L(I.id),y(!0),p(null)},oe=I=>{if(!I)return;const Q=wl(I)||"this contact";_({title:"Archive Contact",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:Q}),"? You can restore it later if needed."]}),confirmLabel:"Archive Contact",cancelLabel:"Cancel",variant:"archive",action:{type:"archive",targetId:I.id,name:Q}})},De=I=>{const Q=Oe.find(ge=>ge.id===I);Q&&Q.contact_creator?.id===a?.id&&ke(ge=>{const re=new Set(ge);return re.has(I)?re.delete(I):re.add(I),re})},$e=()=>{const I=Oe.filter(Q=>Q.contact_creator?.id===a?.id);de.size===I.length&&I.length>0?ke(new Set):ke(new Set(I.map(Q=>Q.id)))},Xe=()=>{if(de.size===0)return;const I=de.size;_({title:"Archive Contacts",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:I})," contact",I!==1?"s":"","? You can restore them later if needed."]}),confirmLabel:`Archive ${I} Contact${I!==1?"s":""}`,cancelLabel:"Cancel",variant:"archive",action:{type:"bulk-archive",targetIds:Array.from(de),count:I}})},[Ze,mt]=h.useState(!1),nt=I=>{I.preventDefault(),mt(!0);const Q=M.first_name.trim(),ge=M.last_name.trim();if(!Q||!ge){W.error("First name and last name are required.");return}if(!M.account_id){W.error("Account is required.");return}if(!M.assigned_to){W.error("Assigned To is required.");return}const Ee=M.email?.trim();if(!Ee){W.error("Email is required.");return}if(!Ee.includes("@")){W.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Ee)){W.error("Please enter a valid email address.");return}const gt={first_name:Q,last_name:ge,account_id:Number(M.account_id),title:M.title?.trim()||null,department:M.department?.trim()||null,email:M.email?.trim().toLowerCase()||null,work_phone:M.work_phone?.trim()||null,mobile_phone_1:M.mobile_phone_1?.trim()||null,mobile_phone_2:M.mobile_phone_2?.trim()||null,notes:M.notes?.trim()||null,assigned_to:M.assigned_to?Number(M.assigned_to):null},Ct=N&&A?"update":"create",kt=`${Q} ${ge}`.trim();_({title:Ct==="create"?"Confirm New Contact":"Confirm Update",message:Ct==="create"?n.jsxs("span",{children:["Are you sure you want to add"," ",n.jsx("span",{className:"font-semibold",children:kt})," to your contacts?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:kt}),"?"]}),confirmLabel:Ct==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:Ct,payload:gt,targetId:A||null,name:kt}})},Nt=async()=>{if(!S?.action){_(null);return}const{action:I}=S,{type:Q,payload:ge,targetId:re,name:Ee}=I;T(!0);try{if(Q==="create"){w(!0),await se.post("/contacts/admin",ge),W.success(`Contact "${Ee}" created successfully.`);const Qe=f?.id||null;H(),await tt(Qe)}else if(Q==="update"){if(!re)throw new Error("Missing contact identifier for update.");w(!0),await se.put(`/contacts/admin/${re}`,ge),W.success(`Contact "${Ee}" updated successfully.`);const Qe=f?.id&&f.id===re?re:f?.id||null;H(),await tt(Qe),f?.id===re&&p(null)}else if(Q==="archive"){if(!re)throw new Error("Missing contact identifier for archiving.");const Qe=f?.id;V(re),await se.put(`/contacts/admin/${re}`,{status:"Inactive"}),W.success(`Contact "${Ee}" archived successfully.`),await tt(Qe&&Qe!==re?Qe:null),Qe===re&&p(null)}else if(Q==="bulk-archive"){const{targetIds:Qe,count:gt}=I;if(!Qe||Qe.length===0)throw new Error("Missing contact identifiers for bulk archiving.");pe(!0),await Promise.all(Qe.map(Ct=>se.put(`/contacts/admin/${Ct}`,{status:"Inactive"}))),W.success(`${gt} contact${gt!==1?"s":""} archived successfully.`),ke(new Set),await tt(),p(null)}}catch(Qe){console.error(Qe);const gt=Q==="create"?"Failed to create contact. Please review the details and try again.":Q==="update"?"Failed to update contact. Please review the details and try again.":Q==="bulk-archive"?"Failed to archive contacts. Please try again.":"Failed to archive contact. Please try again.",Ct=Qe.response?.data?.detail||gt;W.error(Ct)}finally{(Q==="create"||Q==="update")&&w(!1),Q==="archive"&&V(null),Q==="bulk-archive"&&pe(!1),T(!1),_(null)}},wt=()=>{E||_(null)},Tt=I=>{p(I),Y("Overview")},Re=()=>p(null),me=I=>{I.target.id==="contactModalBackdrop"&&!E&&Re()},ie=S?.action?.type==="delete"?S.action.targetId:null,Fe=f&&(U===f.id||ie===f.id),Le=f&&U===f.id,be=f?n.jsx("div",{id:"contactModalBackdrop",onClick:me,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:I=>I.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),n.jsx("button",{onClick:Re,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Xn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:wl(f)||"Unnamed contact"})}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:a?.id===f?.contact_creator?.id&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>ce(f),disabled:E||S?.action?.type==="update"&&S.action.targetId===f.id,children:[n.jsx(ga,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>oe(f),disabled:!!Fe,children:Le?"Archiving...":n.jsxs(n.Fragment,{children:[n.jsx(Zt,{className:"mr-2"}),"Archive"]})})]})})]}),n.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:n.jsx("p",{className:"text-sm text-gray-500",children:f.account?.name||"No associated account"})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(I=>n.jsx("button",{onClick:()=>Y(I),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${Z===I?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:I},I))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[Z==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact Name:"}),n.jsx("p",{children:wl(f)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Title:"}),n.jsx("p",{children:f.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:f.email?n.jsx("a",{href:`mailto:${f.email}`,className:"text-blue-600 hover:underline break-all",children:f.email}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:f.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:f.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:f.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:f.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:f.assigned_contact?`${f.assigned_contact.first_name} ${f.assigned_contact.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:f.contact_creator?`${f.contact_creator.first_name} ${f.contact_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:go(f.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:go(f.updated_at)||"N/A"})]})]})}),Z==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:f.notes||"No notes available."})]}),n.jsx(Ta,{comments:ze,onAddComment:Pe})]}),Z==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[ye.tasks&&ye.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ve(he==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",ye.tasks.length,")"]})]}),he==="tasks"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),he==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ye.tasks.map((I,Q)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/tasks",{state:{taskID:I.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.description||"No description"}),I.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",I.assigned_to.first_name," ",I.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:go(I.due_date||I.created_at)})]},`task-${Q}`))})]}),ye.meetings&&ye.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ve(he==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Pt,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",ye.meetings.length,")"]})]}),he==="meetings"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),he==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ye.meetings.map((I,Q)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/meetings",{state:{meetingID:I.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Pt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.description||I.location||"No description"}),I.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",I.host.first_name," ",I.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:go(I.start_time||I.created_at)})]},`meeting-${Q}`))})]}),ye.calls&&ye.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ve(he==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ot,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",ye.calls.length,")"]})]}),he==="calls"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),he==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ye.calls.map((I,Q)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/calls",{state:{callID:I.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Ot,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:go(I.call_time||I.created_at)})]},`call-${Q}`))})]}),ye.deals&&ye.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ve(he==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(tn,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",ye.deals.length,")"]})]}),he==="deals"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),he==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ye.deals.map((I,Q)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/deals",{state:{dealID:I.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(tn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[I.deal_id?I.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",I.name||I.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:I.stage||I.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:go(I.close_date||I.created_at)})]},`deal-${Q}`))})]}),ye.quotes&&ye.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ve(he==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(fn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",ye.quotes.length,")"]})]}),he==="quotes"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),he==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ye.quotes.map((I,Q)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/quotes",{state:{quoteID:I.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(fn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(I.quote_id?I.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:I.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:go(I.presented_date)||""})]},`quote-${Q}`))})]}),(!ye||(!ye.tasks||ye.tasks.length===0)&&(!ye.meetings||ye.meetings.length===0)&&(!ye.calls||ye.calls.length===0)&&(!ye.quotes||ye.quotes.length===0)&&(!ye.deals||ye.deals.length===0)&&(!ye.contacts||ye.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsx("div",{className:"flex flex-col gap-4",children:n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/group-manager/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${wl(f)||""}`.trim(),relatedType1:"Account",relatedTo1:f?.account_id?String(f.account_id):f?.account?.id?String(f.account.id):"",relatedType2:"Contact",relatedTo2:f?.id?String(f.id):"",assigned_to:f?.assigned_contact?.id?String(f.assigned_contact.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Ot,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!f?.email){alert("No email address available");return}const I=encodeURIComponent(f.email),Q=encodeURIComponent(""),ge=encodeURIComponent(""),re=`mailto:${I}?subject=${Q}&body=${ge}`;window.location.href=re},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(sa,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/group-manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${wl(f)||""}`.trim(),relatedType1:"Account",relatedTo1:f?.account_id?String(f.account_id):f?.account?.id?String(f.account.id):"",relatedType2:"Contact",relatedTo2:f?.id?String(f.id):"",assignedTo:f?.assigned_contact?.id?String(f.assigned_contact.id):"",status:"Planned"}}}),children:[n.jsx(Pt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/group-manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Task for ${wl(f)||""}`.trim(),relatedType1:"Account",relatedTo1:f?.account_id?String(f.account_id):f?.account?.id?String(f.account.id):"",relatedType2:"Contact",relatedTo2:f?.id?String(f.id):"",assignedTo:f?.assigned_contact?.id?String(f.assigned_contact.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]})})]})]})]})}):null,ee=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[i&&n.jsx(Wt,{message:"Loading contacts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(ra,{className:"mr-2 text-blue-600"})," Contacts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{Me(),mt(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(xn,{className:"mr-2"})," Add Contact"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Vt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search contacts",value:$,onChange:I=>D(I.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:q,onChange:I=>G(I.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:He.map(I=>n.jsx("option",{value:I.value,children:I.label},I.value??I.label))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:de.size>0&&de.size===Oe.filter(I=>I.contact_creator?.id===a?.id).length&&Oe.filter(I=>I.contact_creator?.id===a?.id).length>0,onChange:$e,className:"w-4 h-4 cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),n.jsx("th",{className:"py-3 px-4",children:"Department"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Created"}),n.jsx("th",{className:"py-3 px-4 w-12",children:de.size>0&&n.jsx("button",{onClick:Xe,className:"text-orange-500 hover:text-orange-700 transition",title:"Archive selected contacts",disabled:Te,children:n.jsx(Zt,{size:18})})})]})}),n.jsx("tbody",{children:i?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"Loading contacts..."})}):Ke.length>0?Oe.map(I=>{const Q=[{Icon:sa,value:I.email,key:"email"},{Icon:Ot,value:I.work_phone,key:"work_phone"},{Icon:cd,value:I.mobile_phone_1,key:"mobile_phone_1"},{Icon:cd,value:I.mobile_phone_2,key:"mobile_phone_2"}].filter(ge=>!!ge.value);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",children:[n.jsx("td",{className:"py-3 px-4",children:a?.id===I.contact_creator?.id&&n.jsx("input",{type:"checkbox",checked:de.has(I.id),onChange:ge=>{ge.stopPropagation(),De(I.id)},className:"w-4 h-4 cursor-pointer"})}),n.jsxs("td",{className:"py-3 px-4 align-top",onClick:()=>{Tt(I),rt(I.id)},children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:wl(I)||"--"}),n.jsx("div",{className:"text-xs text-gray-500",children:I.title||"No title"})]}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{Tt(I),rt(I.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[n.jsx(Gx,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"break-words",children:I.account?.name||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{Tt(I),rt(I.id)},children:Q.length>0?n.jsx("div",{className:"space-y-1 text-gray-700",children:Q.map(({Icon:ge,value:re,key:Ee})=>{const Qe=xt.createElement(ge,{className:"text-gray-500 flex-shrink-0"});return n.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[Qe,n.jsx("span",{children:re})]},Ee)})}):n.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{Tt(I),rt(I.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[n.jsx(tn,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:I.department||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{Tt(I),rt(I.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(nn,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:I.assigned_contact?`${I.assigned_contact.first_name} ${I.assigned_contact.last_name}`:"Unassigned"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{Tt(I),rt(I.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[n.jsx(Pt,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"text-xs",children:go(I.created_at)||"--"})]})}),n.jsx("td",{className:"py-3 px-4"})]},I.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No contacts found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:Ke.length,pageSize:te,currentPage:le,onPrev:Ce,onNext:fe,onPageSizeChange:ae,label:"contacts"})]}),O=x?n.jsx("div",{id:"modalBackdrop",onClick:K,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:I=>I.stopPropagation(),children:[n.jsx("button",{onClick:()=>{H(),mt(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:j||E,children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:N?"Edit Contact":"Add New Contact"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:nt,noValidate:!0,children:[n.jsx(Bc,{label:"First Name",name:"first_name",value:M.first_name,onChange:we,placeholder:"First name",required:!0,isSubmitted:Ze}),n.jsx(Bc,{label:"Last Name",name:"last_name",value:M.last_name,onChange:we,placeholder:"Last name",required:!0,isSubmitted:Ze}),n.jsx(nH,{label:"Account",value:M.account_id,onChange:I=>F(Q=>({...Q,account_id:I})),items:N?ue:l||[],getLabel:I=>I?.name??"",placeholder:"Search account...",disabled:j||(N?ue.length===0:l.length===0),required:!0,isSubmitted:Ze}),n.jsx(nH,{label:"Assigned To",value:M.assigned_to,onChange:I=>F(Q=>({...Q,assigned_to:I})),items:u||[],getLabel:I=>`${I?.first_name??""} ${I?.last_name??""} (${I?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:Ze,disabled:j||u.length===0}),n.jsx(Bc,{label:"Title",name:"title",value:M.title,onChange:we,placeholder:"Job title",disabled:j}),n.jsx(Bc,{label:"Department",name:"department",value:M.department,onChange:we,placeholder:"Department",disabled:j}),n.jsx(Bc,{label:"Email",name:"email",type:"email",value:M.email,onChange:we,placeholder:"example@email.com",required:!0,isSubmitted:Ze}),n.jsx(Bc,{label:"Work Phone",name:"work_phone",value:M.work_phone,onChange:we,placeholder:"09xx xxx xxxx",disabled:j}),n.jsx(Bc,{label:"Mobile Phone 1",name:"mobile_phone_1",value:M.mobile_phone_1,onChange:we,placeholder:"09xx xxx xxxx",disabled:j}),n.jsx(Bc,{label:"Mobile Phone 2",name:"mobile_phone_2",value:M.mobile_phone_2,onChange:we,placeholder:"09xx xxx xxxx",disabled:j}),n.jsx(mGe,{label:"Notes",name:"notes",value:M.notes,onChange:we,placeholder:"Additional details...",rows:3,disabled:j,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{H(),mt(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:j||E,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:j||E,children:j?"Saving...":N?"Update Contact":"Save Contact"})]})]})]})}):null,z=S?n.jsx(fGe,{open:!0,title:S.title,message:S.message,confirmLabel:S.confirmLabel,cancelLabel:S.cancelLabel,variant:S.variant,onConfirm:Nt,onCancel:wt,loading:E}):null;return n.jsxs(n.Fragment,{children:[ee,be,O,z]})}function Bc({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:u=""}){const d=c&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${u}
        `})]})}function nH({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:u=!1}){const d=u&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(uGe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:d})]})}function uGe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,u]=h.useState(!1),[d,f]=h.useState(""),p=h.useRef(null),x=e.find(v=>String(v.id)===String(t)),y=x?s(x):"",N=h.useMemo(()=>{const v=d.trim().toLowerCase();return(v?e.filter(w=>(s(w)||"").toLowerCase().includes(v)):e).slice(0,o)},[e,d,s,o]);return h.useEffect(()=>{const v=j=>{p.current&&!p.current.contains(j.target)&&u(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?d:y,placeholder:r,onFocus:()=>!i&&u(!0),onChange:v=>{f(v.target.value),c||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:N.length>0?N.map(v=>{const j=String(v.id),w=s(v),S=String(t)===j;return n.jsx("button",{type:"button",onClick:()=>{a(j),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},j)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function mGe({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function fGe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":i==="archive"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}const _T=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function Nee({lead:e,onBack:t,fetchLeads:a,onEdit:s,onArchive:r,setSelectedLead:i,relatedActs:o}){const l=jt(),{leadID:c}=Ho(),{user:u}=qt(),[d,f]=h.useState(e||null),[p,x]=h.useState("Overview"),[y,N]=h.useState(""),v=d?.status?.toUpperCase()==="QUALIFIED",[j,w]=h.useState(null),S=d&&u&&d.creator?.id===u.id,[_,E]=h.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[T,A]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[L,M]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),F=async()=>{try{if(e){f(e),N(e.status||"New");return}if(!c)return;const U=await se.get(`/leads/get/${c}`);f(U.data),N(U.data.status||"New"),E({name:U.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:U.data.territory?.id||null,assigned_to:U.data.assigned_to?.id||null,created_by:U.data.creator?.id||null}),A({last_name:U.data.last_name||"",first_name:U.data.first_name||"",account_id:null,title:U.data.title||"",department:U.data.department||"",email:U.data.email||"",work_phone:U.data.work_phone||"",mobile_phone_1:U.data.mobile_phone_1||"",mobile_phone_2:U.data.mobile_phone_2||"",notes:"",assigned_to:U.data.assigned_to?.id||null,created_by:U.data.creator?.id||null}),M({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:U.data.assigned_to?.id||null,created_by:U.data.creator?.id||null})}catch(U){console.error(U)}};h.useEffect(()=>{e?(f(e),N(e.status||"New")):c&&F()},[c,e]);const $=async()=>{try{if(y==="Converted"&&d?.status?.toUpperCase()!=="QUALIFIED"){W.error("Lead must be Qualified before it can be converted.");return}const U=await se.put(`/leads/${d.id}/update/status`,{status:y});W.success("Lead status updated successfully");const V={...d,status:U.data.status};f(V),i&&i(V),a&&a(),t&&t()}catch(U){console.error(U),W.error("Failed to update lead status")}},D=async U=>{const V={..._,assigned_to:U.assigned_to?.id,billing_address:U.address,shipping_address:U.address,created_by:U.creator?.id,industry:null,name:U.company_name,phone_number:U.work_phone,status:"Prospect",territory_id:U.territory?.id,website:""};console.log("Account data: ",V),console.log("Contact data: ",T),console.log("Deal data: ",L),console.log("Lead data: ",U);try{const Y=(await se.post("/accounts/convertedLead",V)).data.id,le={...T,account_id:Y,assigned_to:U.assigned_to?.id,created_by:U.creator?.id,department:U.department,email:U.email,first_name:U.first_name,last_name:U.last_name,mobile_phone_1:U.mobile_phone_1,mobile_phone_2:U.mobile_phone_2,notes:U.notes,title:U.title,work_phone:U.work_phone},te=(await se.post("/contacts/convertedLead",le)).data.id,ae=()=>{switch(L.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},ye=L.amount&&L.amount!==""?parseFloat(L.amount):0,Ne={...L,account_id:Y,assigned_to:U.assigned_to?.id,created_by:U.creator?.id,primary_contact_id:te,probability:ae(),stage:"Prospecting"},he=await se.post("/deals/convertedLead",Ne),ve=await se.put(`/leads/convert/${U.id}`);i&&i(null),a(),W.success("Lead converted successfully!"),t()}catch(Z){console.error("Error during conversion:",Z);const Y=Z.response?.data?.detail||Z.message||"Failed to convert lead. Please try again.";W.error(Y)}},q=U=>{switch((U||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},G=U=>U.toString().toLowerCase().replace(/\b\w/g,V=>V.toUpperCase());return d?n.jsx(n.Fragment,{children:n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),n.jsx("button",{onClick:()=>{t?t():l(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Xn,{size:25})})]})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[d.first_name," ",d.last_name]}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${q(d.status)}`,children:G(d.status||"New")}),n.jsx("div",{className:"flex flex-col",children:n.jsx("button",{onClick:()=>D(d),disabled:!v,title:v?"Convert Lead":"Lead must be Qualified before converting",className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2
      ${v?"bg-green-600 hover:bg-green-700 text-white focus:ring-green-400":"bg-gray-200 text-gray-400 cursor-not-allowed"}
    `,children:"Convert"})})]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:S&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{type:"button",onClick:()=>{s&&d&&s(d)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(ha,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",onClick:()=>{r&&d&&r(d)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",children:[n.jsx(Zt,{className:"mr-2"}),"Archive"]})]})})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-4 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(U=>n.jsx("button",{onClick:()=>x(U),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${p===U?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:U},U))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[p==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Name:"}),n.jsxs("p",{children:[d.first_name," ",d.last_name||"N/A"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:d.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Job Title:"}),n.jsx("p",{children:d.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:d.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:d.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:d.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:d.assigned_to?`${d.assigned_to.first_name} ${d.assigned_to.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:d.creator?`${d.creator.first_name} ${d.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:d.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Source:"}),n.jsx("p",{children:d.source||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Address:"}),n.jsx("p",{children:d.address||"N/A"})]})]})}),p==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]})]}),p==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[o.tasks&&o.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>w(j==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",o.tasks.length,")"]})]}),j==="tasks"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),j==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.tasks.map((U,V)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/group-manager/tasks",{state:{taskID:U.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:U.subject||U.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:U.description||"No description"}),U.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned:"," ",U.assigned_to.first_name," ",U.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:_T(U.due_date||U.created_at)})]},`task-${V}`))})]}),o.meetings&&o.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>w(j==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Pt,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",o.meetings.length,")"]})]}),j==="meetings"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),j==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.meetings.map((U,V)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/group-manager/meetings",{state:{meetingID:U.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Pt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:U.subject||U.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:U.description||U.location||"No description"}),U.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",U.host.first_name," ",U.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:_T(U.start_time||U.created_at)})]},`meeting-${V}`))})]}),o.calls&&o.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>w(j==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ot,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",o.calls.length,")"]})]}),j==="calls"?n.jsx(Lt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),j==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.calls.map((U,V)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/group-manager/calls",{state:{callID:U.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Ot,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:U.subject||U.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:U.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:_T(U.call_time||U.created_at)})]},`call-${V}`))})]}),(!o||(!o.tasks||o.tasks.length===0)&&(!o.meetings||o.meetings.length===0)&&(!o.calls||o.calls.length===0)&&(!o.quotes||o.quotes.length===0)&&(!o.deals||o.deals.length===0)&&(!o.contacts||o.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{d&&l("/group-manager/calls",{state:{openCallModal:!0,initialCallData:{subject:d.title?`Call regarding ${d.title}`:`Call with ${d.first_name} ${d.last_name}`,relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assigned_to:d.assigned_to?.id?String(d.assigned_to.id):"",direction:"Outgoing",status:"Planned"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Ot,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const U=encodeURIComponent(d.email),V=encodeURIComponent(""),Z=encodeURIComponent(""),Y=`mailto:${U}?subject=${V}&body=${Z}`;window.location.href=Y},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(sa,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{d&&l("/group-manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:d.title?`Meeting regarding ${d.title}`:`Meeting with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",status:"Planned"}}})},children:[n.jsx(Pt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{d&&l("/group-manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:d.title?`Follow up on ${d.title}`:`Follow up with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:y,onChange:U=>N(U.target.value),children:[n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),d?.status?.toUpperCase()==="QUALIFIED"&&n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]}),n.jsx("button",{onClick:$,disabled:y===d.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${y===d.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const hGe=eh.all(),AT=hGe.map((e,t)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${t}`})),gGe=e=>e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()),pGe=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},TT={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function xGe(){const e=jt(),{leadID:t}=Ho(),{user:a}=qt();Us();const[s,r]=h.useState(null),[i,o]=h.useState(!1),[l,c]=h.useState(null),[u,d]=h.useState(null),[f,p]=h.useState([]),[x,y]=h.useState(!1),[N,v]=h.useState(""),[j,w]=h.useState("Filter by Status"),[S,_]=h.useState(1),[E,T]=h.useState(10),[A,L]=h.useState(TT),[M,F]=h.useState(!1),[$,D]=h.useState(null),[q,G]=h.useState(!1),[U,V]=h.useState(null),[Z,Y]=h.useState(!1),[le,_e]=h.useState({}),[te,ae]=h.useState(new Set),[ye,Ne]=h.useState(!1),[he,ve]=h.useState(null);h.useRef(null);const[ne,Se]=h.useState(!1),[de,ke]=h.useState(null),[Te,pe]=h.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[ze,Pe]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[We,tt]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});h.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const lt=async()=>{try{const ee=await se.get("/leads/getUsers");c(ee.data)}catch(ee){console.error(`Error fetching users: ${ee}`)}},Ie=async()=>{y(!0);try{const ee=await se.get("/leads/admin/getLeads");p(ee.data),console.log(ee.data)}catch(ee){console.error(`Error fetching leads: ${ee}`)}finally{y(!1)}};h.useEffect(()=>{lt(),Ie()},[]),h.useEffect(()=>{if(t&&f.length>0&&!i&&!M){const ee=f.find(O=>O.id===Number(t));ee&&r(ee)}else!t&&!s&&r(null)},[t,f,i,M]),h.useEffect(()=>{if(de){const O=(Q=>{if(!Q)return{code:"+63",number:""};const ge=Q.match(/^(\+\d+)\s(.+)$/);if(ge)return{code:ge[1],number:ge[2]};if(Q.startsWith("+")){const re=Q.match(/^(\+\d{1,3})/);if(re)return{code:re[1],number:Q.substring(re[1].length).trim()}}return{code:"+63",number:Q}})(de.work_phone),z=[];de.work_phone&&z.push(`Work: ${de.work_phone}`),de.mobile_phone_1&&z.push(`Mobile 1: ${de.mobile_phone_1}`),de.mobile_phone_2&&z.push(`Mobile 2: ${de.mobile_phone_2}`);const I=z.length>0?z.join(" | "):"";pe({name:de.company_name||"",website:"",countryCode:O.code,phone_number:O.number,combinedPhoneNumbers:I,billing_address:de.address||"",shipping_address:de.address||"",industry:"",status:"Prospect",territory_id:de.assigned_to?.territory?.id||null,assigned_to:de.assigned_to?.id||null,created_by:de.creator?.id||null}),Pe({last_name:de.last_name||"",first_name:de.first_name||"",account_id:null,title:de.title||"",department:de.department||"",email:de.email||"",work_phone:de.work_phone||"",mobile_phone_1:de.mobile_phone_1||"",mobile_phone_2:de.mobile_phone_2||"",notes:de.notes||"",assigned_to:de.assigned_to?.id||null,created_by:de.creator?.id||null}),tt({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:de.assigned_to?.id||null,created_by:de.creator?.id||null})}},[de]);const rt=ee=>v(ee.target.value),He=h.useMemo(()=>{const ee=N.trim().toLowerCase(),O=j.trim().toUpperCase();let z=f.filter(I=>{const Q=I?.status!=="Inactive",ge=[I?.first_name,I?.last_name,I?.company_name,I?.title,I?.email,I?.work_phone,I?.assigned_to?`${I.assigned_to.first_name} ${I.assigned_to.last_name}`:""],re=ee===""||ge.some(Qe=>Qe==null||Qe===""?!1:Qe.toString().toLowerCase().includes(ee));let Ee=!1;return O==="FILTER BY STATUS"?Ee=(I.status?I.status.toUpperCase():"")!=="CONVERTED":Ee=(I.status?I.status.toUpperCase():"")===O,re&&Ee&&Q});return z.sort((I,Q)=>{const ge=new Date(I.created_at).getTime();return new Date(Q.created_at).getTime()-ge}),z},[f,N,j]),Ke=Math.max(1,Math.ceil(He.length/E)||1);h.useEffect(()=>{_(1)},[N,j,E]),h.useEffect(()=>{_(ee=>{const O=Math.max(1,Math.ceil(He.length/E)||1);return ee>O?O:ee})},[He.length,E]);const Je=h.useMemo(()=>{const ee=(S-1)*E;return He.slice(ee,ee+E)},[He,S,E]),Oe=()=>_(ee=>Math.max(ee-1,1)),Ce=()=>_(ee=>Math.min(ee+1,Ke)),fe=h.useCallback(async ee=>{try{const O=await se.get(`/activities/lead/${ee}`);_e(O.data&&typeof O.data=="object"?O.data:{})}catch(O){console.error(O),O.response?.status===404&&(console.warn("No activities found for this account."),_e({}))}},[]),ue=ee=>{r(ee),fe(ee.id)},H=()=>{r(null),t&&e("/admin/leads",{replace:!0})},K=()=>{o(!1),L(TT),F(!1),D(null),G(!1),d(null),sessionStorage.removeItem("editLeadData")},we=ee=>{ee.target.id==="modalBackdrop"&&K()},Me=()=>{L(TT),F(!1),D(null),d(null),o(!0)},ce=ee=>{if(!ee){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",ee),console.log("Current state - leadID:",t,"selectedLead:",s,"showModal:",i);const O=re=>{if(!re)return{code:"+63",number:""};const Ee=re.match(/^(\+\d+)\s(.+)$/);return Ee?{code:Ee[1],number:Ee[2]}:{code:"+63",number:re}},z=O(ee.work_phone),I=O(ee.mobile_phone_1),Q=O(ee.mobile_phone_2);let ge="";if(ee.assigned_to){ge=String(ee.assigned_to.id);const re=l?.find(Ee=>Ee.id===ee.assigned_to.id);d(re)}L({first_name:ee.first_name||"",last_name:ee.last_name||"",company_name:ee.company_name||"",title:ee.title||"",department:ee.department||"",email:ee.email||"",work_ccode:z.code,work_phone:z.number,m1_ccode:I.code,mobile_phone_1:I.number,m2_ccode:Q.code,mobile_phone_2:Q.number,address:ee.address||"",notes:ee.notes||"",source:ee.source||"",territory_id:ee.territory?.id||null,lead_owner:ge,status:ee.status||"New"}),F(!0),D(ee.id),s?(console.log("Coming from detail view - closing detail modal and showing edit form"),r(null),o(!0)):(console.log("Already in list view - showing modal"),o(!0))},oe=ee=>{if(!ee){console.error("handleArchive: lead is null or undefined");return}const O=`${ee.first_name} ${ee.last_name}`||"this lead";V({title:"Archive Lead",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:O}),"? You can restore it later if needed."]}),confirmLabel:"Archive Lead",cancelLabel:"Cancel",variant:"archive",action:{type:"archive",targetId:ee.id,name:O}})},De=ee=>{const O=Je.find(z=>z.id===ee);O&&O.creator?.id===a?.id&&ae(z=>{const I=new Set(z);return I.has(ee)?I.delete(ee):I.add(ee),I})},$e=()=>{const ee=Je.filter(O=>O.creator?.id===a?.id);te.size===ee.length&&ee.length>0?ae(new Set):ae(new Set(ee.map(O=>O.id)))},Xe=()=>{if(te.size===0)return;const ee=te.size;V({title:"Archive Leads",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:ee})," lead",ee!==1?"s":"","? You can restore them later if needed."]}),confirmLabel:`Archive ${ee} Lead${ee!==1?"s":""}`,cancelLabel:"Cancel",variant:"archive",action:{type:"bulk-archive",targetIds:Array.from(te),count:ee}})},Ze=ee=>{const{name:O,value:z}=ee.target;if(L(I=>({...I,[O]:z})),O==="lead_owner"){const I=l.find(Q=>Q.id===parseInt(z));d(I)}},[mt,nt]=h.useState(!1),Nt=ee=>{if(ee.preventDefault(),nt(!0),!A.last_name?.trim()){W.error("Last name is required.");return}if(!A.company_name?.trim()){W.error("Company is required.");return}if(!A.title?.trim()){W.error("Job title is required.");return}if(!A.email?.trim()){W.error("Email is required.");return}if(!A.email.includes("@")){W.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(A.email)){W.error("Please enter a valid email address with a dot in the domain.");return}if(!A.lead_owner){W.error("Please assign a lead owner.");return}const z={...A,territory_id:A.territory_id?parseInt(A.territory_id):null,lead_owner:parseInt(A.lead_owner),work_phone:`${A.work_ccode} ${A.work_phone}`,mobile_phone_1:`${A.m1_ccode} ${A.mobile_phone_1}`,mobile_phone_2:`${A.m2_ccode} ${A.mobile_phone_2}`},I=M&&$?"update":"create",Q=`${A.first_name} ${A.last_name}`;V({title:I==="create"?"Confirm New Lead":"Confirm Update",message:I==="create"?n.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",n.jsx("span",{className:"font-semibold",children:Q}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:Q}),"?"]}),confirmLabel:I==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:I,payload:z,targetId:$||null,name:Q}})},wt=async()=>{if(!U?.action){V(null);return}const{action:ee}=U,{type:O,payload:z,targetId:I,name:Q,targetIds:ge,count:re}=ee;console.log(z),Y(!0);try{if(O==="create")G(!0),await se.post("/leads/create",z),W.success(`Lead "${Q}" created successfully.`),K(),await Ie();else if(O==="update"){if(!I)throw new Error("Missing lead identifier for update.");G(!0);const Ee=await se.put(`/leads/${I}`,z);W.success(`Lead "${Q}" updated successfully.`),s&&s.id===I&&r(null),K(),await Ie()}else if(O==="archive"){if(!I)throw new Error("Missing lead identifier for archiving.");const Ee=s?.id;ve(I),await se.put(`/leads/${I}`,{status:"Inactive"}),W.success(`Lead "${Q}" archived successfully.`),await Ie(),Ee===I&&r(null)}else if(O==="bulk-archive"){if(!ge||ge.length===0)throw new Error("Missing lead identifiers for bulk archiving.");Ne(!0),await Promise.all(ge.map(Ee=>se.put(`/leads/${Ee}`,{status:"Inactive"}))),W.success(`${re} lead${re!==1?"s":""} archived successfully.`),ae(new Set),await Ie(),r(null)}}catch(Ee){console.error(Ee);const Qe=O==="create"?"Failed to create lead. Please review the details and try again.":O==="update"?"Failed to update lead. Please review the details and try again.":O==="bulk-archive"?"Failed to archive leads. Please try again.":"Failed to archive lead. Please try again.",gt=Ee.response?.data?.detail||Qe;W.error(gt)}finally{(O==="create"||O==="update")&&G(!1),O==="archive"&&ve(null),O==="bulk-archive"&&Ne(!1),O!=="edit"&&(Y(!1),V(null))}},Tt=()=>{Z||V(null)},Re=f.filter(ee=>ee.status==="New").length,me=f.filter(ee=>ee.status==="Contacted").length,ie=f.filter(ee=>ee.status==="Qualified").length,Fe=f.filter(ee=>ee.status==="Converted").length,Le=f.filter(ee=>ee.status==="Lost").length,be=[{title:"New",value:Re,icon:Kn,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:me,icon:Ot,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:ie,icon:aa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:Fe,icon:Xl,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:Le,icon:Fs,color:"text-red-600",bgColor:"bg-red-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[x&&n.jsx(Wt,{message:"Loading leads..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Kn,{className:"mr-2 text-blue-600"}),"Leads"]}),n.jsxs("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:[n.jsxs("button",{onClick:()=>{W.info("Download functionality coming soon")},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(qo,{className:"mr-2"})," Download"]}),n.jsxs("button",{onClick:()=>{Me(),nt(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(xn,{className:"mr-2"})," Add Lead"]})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:be.map(ee=>n.jsx(bGe,{...ee},ee.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Vt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search leads",value:N,onChange:rt,className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:j,onChange:ee=>w(ee.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:te.size>0&&te.size===Je.filter(ee=>ee.creator?.id===a?.id).length&&Je.filter(ee=>ee.creator?.id===a?.id).length>0,onChange:$e,className:"w-4 h-4 cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Name"}),n.jsx("th",{className:"py-3 px-4",children:"Company"}),n.jsx("th",{className:"py-3 px-4",children:"Job Title"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 w-12",children:te.size>0&&n.jsx("button",{onClick:Xe,className:"text-orange-500 hover:text-orange-700 transition",title:"Archive selected leads",disabled:ye,children:n.jsx(Zt,{size:18})})})]})}),n.jsx("tbody",{children:He.length>0?Je.map(ee=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",children:[n.jsx("td",{className:"py-3 px-4",children:a?.id===ee.creator?.id&&n.jsx("input",{type:"checkbox",checked:te.has(ee.id),onChange:O=>{O.stopPropagation(),De(ee.id)},className:"w-4 h-4 cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>ue(ee),children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[ee.first_name," ",ee.last_name]})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>ue(ee),children:n.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:ee.company_name||"--"})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",onClick:()=>ue(ee),children:ee.title||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",onClick:()=>ue(ee),children:ee.email||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",onClick:()=>ue(ee),children:ee.assigned_to?`${ee.assigned_to.first_name} ${ee.assigned_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",onClick:()=>ue(ee),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${pGe(ee.status||"New")}`,children:gGe(ee.status||"New")})}),n.jsx("td",{className:"py-3 px-4"})]},ee.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No leads found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:He.length,pageSize:E,currentPage:S,onPrev:Oe,onNext:Ce,onPageSizeChange:T,label:"leads"}),i&&n.jsx("div",{id:"modalBackdrop",onClick:we,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:ee=>ee.stopPropagation(),children:[n.jsx("button",{onClick:()=>{K(),nt(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:M?"Edit Lead":"Add New Lead"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),n.jsx("input",{type:"text",name:"first_name",value:A.first_name,onChange:Ze,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"Smith",name:"last_name",value:A.last_name,onChange:Ze,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                      ${mt&&!A.last_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Company ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:A.company_name,onChange:Ze,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${mt&&!A.company_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Job Title",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:A.title,onChange:Ze,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${mt&&!A.title?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),n.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:A.department,onChange:Ze,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Email",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:A.email,onChange:Ze,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${mt&&!A.email?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col col-span-1 md:col-span-2 lg:col-span-1",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"work_ccode",value:A.work_ccode,onChange:Ze,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:AT.map(ee=>n.jsx("option",{value:ee.code,children:ee.code},ee.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:A.work_phone,onChange:Ze,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m1_ccode",value:A.m1_ccode,onChange:Ze,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:AT.map(ee=>n.jsx("option",{value:ee.code,children:ee.code},ee.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:A.mobile_phone_1,onChange:Ze,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m2_ccode",value:A.m2_ccode,onChange:Ze,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:AT.map(ee=>n.jsx("option",{value:ee.code,children:ee.code},ee.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:A.mobile_phone_2,onChange:Ze,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),n.jsx("input",{type:"text",name:"address",value:A.address,onChange:Ze,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col col-span-1 md:col-span-2 lg:col-span-1",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:`w-full rounded-lg ${mt&&!A.lead_owner?"border border-red-400":"border border-gray-300"}`,children:n.jsx(vGe,{items:Array.isArray(l)?l:[],value:A.lead_owner??"",placeholder:"Search a user...",getLabel:ee=>`${ee.first_name} ${ee.last_name}`,onChange:ee=>{const O=l.find(I=>String(I.id)===String(ee));d(O);let z=null;O&&O.assigned_territory&&O.assigned_territory.length===1&&(z=O.assigned_territory[0].id),L(I=>({...I,lead_owner:ee,territory_id:z}))}})})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),n.jsxs("select",{name:"territory_id",value:A.territory_id||"",onChange:Ze,disabled:!u||!u.assigned_territory||u.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[n.jsx("option",{value:"",disabled:!0,children:u?u.assigned_territory&&u.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),u&&u.assigned_territory&&u.assigned_territory.map(ee=>n.jsx("option",{value:ee.id,children:ee.name},ee.id))]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),n.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:A.source,onChange:Ze,children:[n.jsx("option",{value:"",disabled:!0,children:"Select Source"}),n.jsx("option",{value:"Website",children:"Website"}),n.jsx("option",{value:"Referral",children:"Referral"}),n.jsx("option",{value:"Cold call",children:"Cold call"}),n.jsx("option",{value:"Event",children:"Event"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),n.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:A.notes,onChange:Ze,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("button",{type:"button",onClick:()=>{K(),nt(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:q||Z,children:"Cancel"}),n.jsx("button",{type:"submit",onClick:Nt,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:q||Z,children:q||Z?"Processing...":M?"Update Lead":"Save Lead"})]})]})]})}),U&&n.jsx(yGe,{open:!0,title:U.title,message:U.message,confirmLabel:U.confirmLabel,cancelLabel:U.cancelLabel,variant:U.variant,onConfirm:wt,onCancel:Tt,loading:Z}),s&&!i&&!M&&n.jsx(Nee,{relatedActs:le,lead:s,onBack:H,fetchLeads:Ie,setSelectedLead:r,onEdit:ce,onArchive:oe})]})}function yGe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":i==="archive"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function bGe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function vGe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=h.useState(!1),[u,d]=h.useState(""),f=h.useRef(null),p=e.find(N=>String(N.id)===String(t)),x=p?s(p):"",y=h.useMemo(()=>{const N=u.trim().toLowerCase();return(N?e.filter(j=>(s(j)||"").toLowerCase().includes(N)):e).slice(0,o)},[e,u,s,o]);return h.useEffect(()=>{const N=v=>{f.current&&!f.current.contains(v.target)&&c(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),h.useEffect(()=>{l||d("")},[l]),n.jsxs("div",{ref:f,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:l?u:x,placeholder:r,onFocus:()=>!i&&c(!0),onChange:N=>{d(N.target.value),l||c(!0)},className:"w-full rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:y.length>0?y.map(N=>{const v=String(N.id),j=s(N),w=String(t)===v;return n.jsx("button",{type:"button",onClick:()=>{a(v),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${w?"bg-blue-50":""}`,children:j||"--"},v)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const Bb={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},ts=({label:e,value:t,name:a,className:s=""})=>n.jsxs("div",{className:`flex flex-col ${s}`,children:[n.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),n.jsx("input",{type:"text",name:a,defaultValue:t,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),wGe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(ts,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),n.jsx(ts,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),n.jsx(ts,{label:"Industry",name:"industry",value:e.industry})]}),n.jsx(ts,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),n.jsx(ts,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),NGe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(ts,{label:"First Name",name:"firstName",value:e.firstName}),n.jsx(ts,{label:"Last Name",name:"lastName",value:e.lastName}),n.jsx(ts,{label:"Department",name:"department",value:e.department}),n.jsx(ts,{label:"Title",name:"title",value:e.title}),n.jsx(ts,{label:"Work Phone",name:"workPhone",value:e.workPhone}),n.jsx(ts,{label:"Email",name:"email",value:e.email}),n.jsx(ts,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),n.jsx(ts,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),jGe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(ts,{label:"Deal Name",name:"dealName",value:e.dealName}),n.jsxs("div",{className:"flex",children:[n.jsx(ts,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),n.jsx("div",{className:"flex flex-col justify-end ml-1",children:n.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),n.jsx(ts,{label:"Stage",name:"stage",value:e.stage}),n.jsx(ts,{label:"Territory",name:"territory",value:e.territory})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(ts,{label:"Description",name:"description",value:e.description}),n.jsx(ts,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function CGe({isOpen:e,onClose:t}){const[a,s]=h.useState(1),r=3;if(!e)return null;const i=()=>{a<r?s(a+1):(t(),s(1))},o=()=>{a>1&&s(a-1)},l=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],c=()=>{switch(a){case 1:return n.jsx(wGe,{data:Bb});case 2:return n.jsx(NGe,{data:Bb});case 3:return n.jsx(jGe,{data:Bb});default:return null}};return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:Bb.accountName})]}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:n.jsx(wj,{className:"w-6 h-6"})})]}),n.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:l.map(u=>n.jsx("button",{onClick:()=>s(u.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${a===u.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:u.name},u.id))}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c()}),n.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[a>1&&n.jsx("button",{onClick:o,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),a<r?n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}function jee({selectedDeal:e,onStatusUpdate:t,onClose:a}){const[s,r]=h.useState(e?.stage||""),[i,o]=h.useState(!1),l=jt(),{user:c}=qt();h.useEffect(()=>{console.log("Group Manager DealsInformation mounted sahdksd",e),console.log("User sadad:",c)},[e,c]);const u=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}];h.useEffect(()=>{e?.stage&&r(e.stage)},[e]);const d=async()=>{if(!e||!e.id){W.error("No deal selected");return}if(!s||s===e.stage){W.info("Please select a different stage");return}const f=e.id;o(!0);try{await se.put(`/deals/admin/${f}`,{stage:s}),a&&a(),t&&setTimeout(async()=>{await t(!0)},100),setTimeout(()=>{W.success("Deal status updated successfully")},300)}catch(p){console.error(p);const x=p.response?.data?.detail||"Failed to update deal status";W.error(x)}finally{o(!1)}};return e?n.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{const f=e.account?.id||e.account_id;l("/group-manager/calls",{state:{openCallModal:!0,initialCallData:{subject:e.name?`Call regarding: ${e.name}`:"",relatedType1:"Account",relatedTo1:f,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assigned_to:e.assigned_deals?.id?String(e.assigned_deals.id):"",assignedTo:e.assigned_to?.id?String(e.assigned_to.id):""}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Ot,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const f=encodeURIComponent(e.contact.email),p=encodeURIComponent(""),x=encodeURIComponent(""),y=`mailto:${f}?subject=${p}&body=${x}`;window.location.href=y},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(sa,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{const f=e.account?.id||e.account_id;l("/group-manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:e.name?`Meeting: ${e.name}`:"",relatedType1:"Account",relatedTo1:f,relatedType2:"Deal",relatedTo2:e.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):""}}})},children:[n.jsx(Pt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{const f=e.account?.id||e.account_id;l("/group-manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:e.name?`Task for: ${e.name}`:"",relatedType1:"Account",relatedTo1:f,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:s,onChange:f=>r(f.target.value),disabled:i||e.created_by!==c?.id&&e.assigned_to!==c?.id,children:u.map(f=>n.jsx("option",{value:f.value,children:f.label},f.value))}),(e.created_by===c?.id||e.assigned_to===c?.id)&&n.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:d,disabled:i||!s||s===e.stage,children:i?"Updating...":"Update"})]})]}):null}function Cee({selectedDeal:e,show:t,onClose:a,activeTab:s,setActiveTab:r,onEdit:i,onDelete:o,onStatusUpdate:l}){const c=jt(),[u]=Us(),d=u.get("id"),[f,p]=h.useState(e||null),[x,y]=h.useState(s||"Overview"),{user:N}=qt(),{comments:v,addComment:j,refresh:w}=ka({relatedType:"deal",relatedId:f?.id});h.useEffect(()=>{f?.id&&w()},[f?.id,w]);const S=s!==void 0?s:x;if(h.useEffect(()=>{(async()=>{if(d&&!e)try{const M=((await se.get("/deals/admin/fetch-all")).data||[]).find(F=>F.id===parseInt(d));if(M){const F={...M,amount:typeof M.amount=="number"?M.amount:parseFloat(M.amount||0),probability:M.probability||0};p(F)}else console.warn("Deal not found with ID:",d)}catch(A){console.error("Error fetching deal:",A)}})()},[d,e]),!f&&!d||d&&!f)return null;const _=T=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[T]||"bg-gray-100 text-gray-700";function E(T){return T?new Date(T).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),n.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:n.jsx("button",{onClick:()=>{a?a():c(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Xt,{size:25})})})]})}),n.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:n.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[n.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:f.name}),n.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${_(f.stage)}`,children:f.stage})]}),n.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",E(f.created_at)]})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2",children:[n.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[" ",f.amount?f.amount.toLocaleString():"0"]}),n.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${f.probability}%`}})}),n.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",f.probability,"% Complete "]}),f.deal_creator?.id===N?.id&&n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[n.jsxs("button",{type:"button",onClick:()=>{i&&i(f)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(ha,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),n.jsxs("button",{type:"button",onClick:()=>{o&&o(f)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",children:[n.jsx(Zt,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Archive"})]})]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(T=>n.jsx("button",{onClick:()=>{r?r(T):y(T)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${S===T?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:T},T))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[S==="Overview"&&n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Description:"})," ",f.description]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Expected Close Date:"})," ",f.close_date]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("div",{className:"mt-4 py-3 w-full",children:[n.jsxs("div",{className:"relative flex flex-col w-full",children:[n.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const T=(f?.stage||"PROSPECTING").toUpperCase(),L=(F=>F==="PROSPECTING"?0:F==="QUALIFICATION"?1:F==="PROPOSAL"?2:F==="NEGOTIATION"?3:F==="CLOSED_WON"||F==="CLOSED_LOST"?4:-1)(T);return[0,1,2,3,4].map(F=>L===F?"orange":L>F?"green":"gray").map((F,$)=>n.jsxs(xt.Fragment,{children:[n.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${F==="green"?"bg-green-500 border-green-500":F==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),$<4&&n.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},$))})()}),n.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((T,A)=>n.jsx("span",{className:"text-center flex-1 break-words",children:T},A))})]}),n.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:f.stage})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),n.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Account:"})," ",f.account?.name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Primary Contact:"})," ",f.contact?.first_name," ",f.contact?.last_name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Phone:"})," ",f.contact?.work_phone]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",f.contact?.email]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Assigned To:"})," ",f.assigned_deals?.first_name," ",f.assigned_deals?.last_name]})]})]})]}),S==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:f.description||"No notes available."})]}),n.jsx(Ta,{comments:v,onAddComment:j})]}),S==="Activities"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:Ot,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:Pt,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((T,A)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[n.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-gray-600 mt-1",children:n.jsx(T.icon,{size:24})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-gray-900 break-words",children:T.title}),n.jsx("p",{className:"text-sm text-gray-500 break-words",children:T.desc}),n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),n.jsx("p",{className:"text-sm text-gray-700 break-words",children:T.user})]})]})]}),n.jsx("p",{className:"text-sm text-gray-500 break-words",children:T.date})]},A))]}),S==="Edit"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),n.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:f.name})]}),n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),n.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:f.description})]}),n.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),n.jsx("div",{className:"w-full lg:w-auto",children:n.jsx(jee,{selectedDeal:f,onStatusUpdate:l,onClose:a})})]})]})]})})}const SGe=10;function _Ge(){h.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const e=jt(),t=Jt(),{user:a}=qt(),[s,r]=h.useState(""),[i,o]=h.useState("Filter by Stage"),[l,c]=h.useState("Filter by Owner"),[u,d]=h.useState(null),[f,p]=h.useState("Overview"),[x,y]=h.useState(!1),[N,v]=h.useState(null),[j,w]=h.useState(!1),[S,_]=h.useState(1),[E,T]=h.useState(10),[A,L]=h.useState(!1),[M,F]=h.useState(null),[$,D]=h.useState(!1),[q,G]=h.useState(!1),[U,V]=h.useState(null),[Z,Y]=h.useState([]),[le,_e]=h.useState([]),[te,ae]=h.useState([]),[ye,Ne]=h.useState({}),[he,ve]=h.useState(null),[ne,Se]=h.useState(new Set),[de,ke]=h.useState(!1);h.useEffect(()=>{const O=t.state,z=O?.dealID;if(z&&!O?.openDealModal){ve(z),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(he&&N?.length>0&&!j){const O=N.find(z=>z.id===he);O?d(O):W.error("Deal not found."),ve(null)}},[he,N,j]);const[Te,pe]=h.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),[ze,Pe]=h.useState(null),[We,tt]=h.useState(null),lt={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST","Closed Cancelled Stage":"CLOSED_CANCELLED"},Ie=O=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost",CLOSED_CANCELLED:"Closed Cancelled"})[O]||O||"--",rt=O=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700",CLOSED_CANCELLED:"bg-red-100 text-red-700"})[O]||"bg-gray-100 text-gray-700",He=O=>{const z=ue?.find(I=>I.id===O);z&&z.deal_creator?.id===a?.id&&Se(I=>{const Q=new Set(I);return Q.has(O)?Q.delete(O):Q.add(O),Q})},Ke=()=>{const O=ue?.filter(z=>z.deal_creator?.id===a?.id)||[];ne.size===O.length&&O.length>0?Se(new Set):Se(new Set(O.map(z=>z.id)))},Je=()=>{if(ne.size===0)return;const O=ne.size;F({title:"Archive Deals",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:O})," deal",O!==1?"s":"","? You can restore them later if needed."]}),confirmLabel:`Archive ${O} Deal${O!==1?"s":""}`,cancelLabel:"Cancel",variant:"archive",action:{type:"bulk-archive",targetIds:Array.from(ne),count:O}})},Oe=h.useCallback(async O=>{try{const z=await se.get(`/activities/deal/${O}`);Ne(z.data&&typeof z.data=="object"?z.data:{})}catch(z){console.error(z),z.response?.status===404&&(console.warn("No activities found for this account."),Ne({}))}},[]),Ce=h.useMemo(()=>{const O=s.trim().toLowerCase(),z=i.trim(),I=l.trim();return(N??[]).filter(Q=>{const ge=[Q?.name,Q?.description,Q?.account?.name,Q?.contact?.first_name,Q?.contact?.last_name,Q?.assigned_deals?.first_name,Q?.assigned_deals?.last_name],re=O===""||ge.some(gt=>gt==null||gt===""?!1:gt.toString().toLowerCase().includes(O)),Ee=z==="Filter by Stage"||z===""||Q.stage===lt[z]||Q.stage===z,Qe=I==="Filter by Owner"||I===""||`${Q.assigned_deals?.first_name||""} ${Q.assigned_deals?.last_name||""}`.trim().toLowerCase()===I.toLowerCase();return re&&Ee&&Qe})},[N,s,i,l]),fe=Math.max(1,Math.ceil(Ce.length/SGe)||1);h.useEffect(()=>{_(1)},[s,i,l]),h.useEffect(()=>{_(O=>{const z=Math.max(1,Math.ceil(Ce.length/E)||1);return O>z?z:O})},[Ce.length,E]);const ue=h.useMemo(()=>{const O=(S-1)*E;return Ce.slice(O,O+E)},[Ce,S,E]),H=()=>_(O=>Math.max(O-1,1)),K=()=>_(O=>Math.min(O+1,fe)),we=()=>{pe({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),G(!1),V(null),y(!0)},Me=async()=>{w(!0);try{const O=await se.get("/deals/admin/fetch-all"),I=[...Array.isArray(O.data)?O.data:[]].sort((Q,ge)=>{const re=Q?.created_at?new Date(Q.created_at).getTime():0;return(ge?.created_at?new Date(ge.created_at).getTime():0)-re});v(I)}catch(O){O.response&&O.response.status===403?W.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):W.error("Failed to fetch deals. Please try again later."),console.error(O)}finally{w(!1)}},ce=async()=>{try{const O=await se.get("/accounts/admin/fetch-all");Y(Array.isArray(O.data)?O.data:[])}catch(O){console.error(O),O.response?.status===403&&W.warn("Unable to load accounts (permission denied).")}},oe=async()=>{try{const O=await se.get("/contacts/admin/fetch-all");_e(Array.isArray(O.data)?O.data:[])}catch(O){console.error(O),O.response?.status===403&&W.warn("Unable to load contacts (permission denied).")}},De=async()=>{try{const O=await se.get("/users/all");ae(Array.isArray(O.data)?O.data:[])}catch(O){console.error(O),O.response?.status===403&&W.warn("Unable to load users (permission denied).")}};h.useEffect(()=>{Me(),ce(),oe(),De()},[]);const $e=async O=>{O&&(pe({id:O.id||null,name:O.name||"",account_id:O.account_id?.toString()||"",primary_contact_id:O.primary_contact_id?.toString()||"",stage:O.stage||"PROPOSAL",amount:O.amount?.toString()||"",close_date:O.close_date?new Date(O.close_date).toISOString().split("T")[0]:"",assigned_to:O.assigned_to?.toString()||"",currency:O.currency||"PHP",description:O.description||""}),Pe(O.account||null),tt(O.contact||null),G(!0),V(O.id),d(null),y(!0))},Xe=async(O=!1)=>{try{const z=await se.get("/deals/admin/fetch-all"),Q=[...Array.isArray(z.data)?z.data:[]].sort((ge,re)=>{const Ee=ge?.created_at?new Date(ge.created_at).getTime():0;return(re?.created_at?new Date(re.created_at).getTime():0)-Ee});if(v(Q),!O&&u&&u.id){const ge=Q.find(re=>re.id===u.id);ge&&d({...ge})}}catch(z){console.error("Failed to refresh deal data:",z),await Me()}},Ze=O=>{const z=O.name.trim();if(!z){W.error("Deal name is required.");return}if(!O.account_id){W.error("Account is required.");return}const I=q&&U?"update":"create",Q=z;F({title:I==="create"?"Confirm New Deal":"Confirm Update",message:I==="create"?n.jsxs("span",{children:["Are you sure you want to create"," ",n.jsx("span",{className:"font-semibold",children:Q}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:Q}),"?"]}),confirmLabel:I==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:I,formData:O,targetId:U||null,name:Q}})},mt=O=>{if(!O)return;const z=O.name||"this deal";F({title:"Archive Deal",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:z}),"? You can restore it later if needed."]}),confirmLabel:"Archive Deal",cancelLabel:"Cancel",variant:"archive",action:{type:"archive-single",targetId:O.id,name:z}})},nt=async()=>{if(!M?.action){F(null);return}const{action:O}=M,{type:z,formData:I,targetId:Q,name:ge}=O;D(!0);try{if(z==="create"){L(!0);const re={name:I.name.trim(),account_id:parseInt(I.account_id),primary_contact_id:I.primary_contact_id?parseInt(I.primary_contact_id):null,stage:I.stage,amount:I.amount?parseFloat(I.amount):null,currency:I.currency||"PHP",close_date:I.close_date||null,description:I.description||null,assigned_to:I.assigned_to?parseInt(I.assigned_to):null};await se.post("/deals/admin/create",re),W.success(`Deal "${ge}" created successfully.`),y(!1),await Me()}else if(z==="update"){if(!Q)throw new Error("Missing deal identifier for update.");L(!0);const re={};I.name!==void 0&&(re.name=I.name.trim()),I.account_id!==void 0&&I.account_id!==""&&(re.account_id=parseInt(I.account_id)),I.primary_contact_id!==void 0&&(re.primary_contact_id=I.primary_contact_id?parseInt(I.primary_contact_id):null),I.stage!==void 0&&(re.stage=I.stage),I.amount!==void 0&&I.amount!==""&&(re.amount=parseFloat(I.amount)),I.currency!==void 0&&(re.currency=I.currency),I.close_date!==void 0&&(re.close_date=I.close_date||null),I.description!==void 0&&(re.description=I.description||null),I.assigned_to!==void 0&&(re.assigned_to=I.assigned_to?parseInt(I.assigned_to):null),await se.put(`/deals/admin/${Q}`,re),W.success(`Deal "${ge}" updated successfully.`),y(!1),await Me()}else if(z==="archive-single"){if(!Q)throw new Error("Missing deal identifier for archiving.");await se.put(`/deals/single-archive/${Q}`),W.success(`Deal "${ge}" archived successfully.`),u?.id===Q&&d(null),await Me()}else if(z==="bulk-archive"){if(ke(!0),!O.targetIds||O.targetIds.length===0)throw new Error("No deals selected for archiving.");await se.put("/deals/bulk-archive",{deal_ids:O.targetIds}),W.success(`${O.count} deal${O.count!==1?"s":""} archived successfully.`),Se(new Set),u&&O.targetIds.includes(u.id)&&d(null),await Me()}}catch(re){console.error(re);const Ee=z==="create"?"Failed to create deal. Please review the details and try again.":z==="update"?"Failed to update deal. Please review the details and try again.":z==="bulk-archive"?"Failed to archive deals. Please try again.":"Failed to archive deal. Please try again.",Qe=re.response?.data?.detail||Ee;W.error(Qe)}finally{(z==="create"||z==="update")&&L(!1),z==="bulk-archive"&&ke(!1),D(!1),F(null)}},Nt=()=>{$||F(null)},wt=()=>{y(!1),pe({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),Pe(null),tt(null),G(!1),V(null),L(!1)},Tt=(N??[]).filter(O=>O.stage==="PROSPECTING").length,Re=(N??[]).filter(O=>O.stage==="QUALIFICATION").length,me=(N??[]).filter(O=>O.stage==="PROPOSAL").length,ie=(N??[]).filter(O=>O.stage==="NEGOTIATION").length,Fe=(N??[]).filter(O=>O.stage==="CLOSED_WON").length,Le=(N??[]).filter(O=>O.stage==="CLOSED_LOST").length,be=(N??[]).filter(O=>O.stage==="CLOSED_CANCELLED").length,ee=[{title:"Prospecting",value:Tt,icon:oN,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:Re,icon:ga,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:me,icon:tn,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:ie,icon:id,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:Fe,icon:aa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:Le,icon:Fs,color:"text-red-600",bgColor:"bg-red-100"},{title:"Closed Cancelled",value:be,icon:Fs,color:"text-gray-600",bgColor:"bg-gray-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[j&&n.jsx(Wt,{message:"Loading deals..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(tn,{className:"mr-2 text-blue-600"}),"Deals"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:we,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(xn,{className:"mr-2"})," Add Deal"]})})]}),n.jsx("div",{className:"grid grid-cols-1 p-2 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden",children:ee.map(O=>n.jsx(TGe,{...O},O.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Vt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search deals",value:s,onChange:O=>r(O.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[n.jsxs("select",{value:i,onChange:O=>o(O.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),n.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),n.jsx("option",{value:"Qualification Stage",children:"Qualification"}),n.jsx("option",{value:"Proposal Stage",children:"Proposal"}),n.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),n.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),n.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"}),n.jsx("option",{value:"Closed Cancelled Stage",children:"Closed Cancelled"})]}),n.jsxs("select",{value:l,onChange:O=>c(O.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((N??[]).map(O=>`${O.assigned_deals?.first_name} ${O.assigned_deals?.last_name}`))].map((O,z)=>n.jsx("option",{value:O,children:O},z))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:ne.size>0&&ne.size===ue?.filter(O=>O.deal_creator?.id===a?.id).length&&ue?.filter(O=>O.deal_creator?.id===a?.id).length>0,onChange:Ke,className:"w-4 h-4 cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Stage"}),n.jsx("th",{className:"py-3 px-4",children:"Value"}),n.jsx("th",{className:"py-3 px-4",children:"Close Date"}),n.jsx("th",{className:"py-3 px-4",children:"Owner"}),n.jsx("th",{className:"py-3 px-4 w-12",children:ne.size>0&&n.jsx("button",{onClick:Je,className:"text-orange-500 hover:text-orange-700 transition",title:"Archive selected deals",disabled:de,children:n.jsx(Zt,{size:18})})})]})}),n.jsx("tbody",{children:Ce.length>0?ue.map(O=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{d({...O}),Oe(O.id)},children:[n.jsx("td",{className:"py-3 px-4",children:a?.id===O.deal_creator?.id&&n.jsx("input",{type:"checkbox",checked:ne.has(O.id),onClick:z=>{z.stopPropagation()},onChange:z=>{z.stopPropagation(),He(O.id)},className:"w-4 h-4 cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:O.deal_id?O.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:O.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:O.description||"--"})]})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:O.account?.name||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:O.contact?.first_name&&O.contact?.last_name?`${O.contact.first_name} ${O.contact.last_name}`:O.contact?.first_name||O.contact?.last_name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${rt(O.stage)}`,children:Ie(O.stage)})}),n.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",O.amount?.toLocaleString()||"0"]}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:O.close_date||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:O.assigned_deals?.first_name&&O.assigned_deals?.last_name?`${O.assigned_deals.first_name} ${O.assigned_deals.last_name}`:O.assigned_deals?.first_name||O.assigned_deals?.last_name||"--"})]},O.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"No deals found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:Ce.length,pageSize:E,currentPage:S,onPrev:H,onNext:K,onPageSizeChange:T,label:"deals"}),x&&n.jsx(kGe,{onClose:wt,formData:Te,setFormData:pe,isEditing:q,onSubmit:Ze,isSubmitting:A||$,accounts:Z,contacts:le,users:te,currentAccount:ze,currentContact:We}),u&&n.jsx(Cee,{relatedActs:ye,selectedDeal:u,show:!!u,onClose:()=>d(null),activeTab:f,setActiveTab:p,onEdit:$e,onDelete:mt,onStatusUpdate:Xe}),M&&n.jsx(AGe,{open:!0,title:M.title,message:M.message,confirmLabel:M.confirmLabel,cancelLabel:M.cancelLabel,variant:M.variant,onConfirm:nt,onCancel:Nt,loading:$})]})}function AGe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="archive"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function TGe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function kGe({onClose:e,formData:t,setFormData:a,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,accounts:o=[],contacts:l=[],users:c=[],currentAccount:u=null,currentContact:d=null}){const[f,p]=h.useState(!1),x=v=>{if(v.preventDefault(),p(!0),!t.name?.trim()){W.error("Deal name is required.");return}const j=Number(t.amount);if(!t.amount||isNaN(j)||j<=0){W.error("Amount must be a number greater than 0.");return}if(!t.account_id){W.error("Please select an account.");return}if(!t.primary_contact_id){W.error("Please select a primary contact.");return}if(!t.assigned_to){W.error("Please assign this deal to a user.");return}r?.(t)},y=v=>{v.target.id==="modalBackdrop"&&e()},N=h.useMemo(()=>{const v=String(t.account_id||"").trim(),j=Array.isArray(l)?l:[];return v?j.filter(w=>{const _=[w?.account_id,w?.accountId,w?.account?.id,w?.account?.account_id,w?.account?.accountId].find(E=>E!=null&&String(E).trim()!=="");return _?String(_)===v:!1}):j},[l,t.account_id]);return h.useEffect(()=>{const v=String(t.account_id||"").trim(),j=String(t.primary_contact_id||"").trim();if(!j||!v)return;N.some(S=>String(S?.id)===j)||a(S=>({...S,primary_contact_id:""}))},[t.account_id,t.primary_contact_id,N,a]),n.jsx("div",{id:"modalBackdrop",onClick:y,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:v=>v.stopPropagation(),children:[n.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Deal":"Create Deal"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:x,noValidate:!0,children:[n.jsx(kT,{label:"Deal Name",name:"name",value:t.name,onChange:v=>a({...t,name:v.target.value}),placeholder:"Enter deal name",required:!0,isSubmitted:f,className:"md:col-span-2"}),n.jsx(ET,{label:"Account",value:t.account_id||"",onChange:v=>a({...t,account_id:v}),items:o||[],getLabel:v=>v?.name??"",placeholder:"Search account...",disabled:i,currentItem:u,required:!0,isSubmitted:f}),n.jsx(ET,{label:"Primary Contact",value:t.primary_contact_id||"",onChange:v=>a({...t,primary_contact_id:v}),items:N||[],getLabel:v=>`${v?.first_name??""} ${v?.last_name??""}`.trim()||v?.email||"",placeholder:"Search contact...",disabled:i,currentItem:d,required:!0,isSubmitted:f}),n.jsx(aH,{label:"Stage",name:"stage",value:t.stage,onChange:v=>a({...t,stage:v.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}],disabled:i}),n.jsx(kT,{label:"Amount",name:"amount",type:"number",step:"0.01",value:t.amount,onChange:v=>a({...t,amount:v.target.value}),placeholder:"0",required:!0,isSubmitted:f}),n.jsx(aH,{label:"Currency",name:"currency",value:t.currency||"PHP",onChange:v=>a({...t,currency:v.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),n.jsx(kT,{label:"Close Date",name:"close_date",type:"date",value:t.close_date||"",onChange:v=>a({...t,close_date:v.target.value}),disabled:i}),n.jsx(ET,{label:"Assign To",value:t.assigned_to||"",onChange:v=>a({...t,assigned_to:v}),items:c||[],getLabel:v=>`${v?.first_name??""} ${v?.last_name??""}`.trim()||v?.email||"",placeholder:"Search assignee...",disabled:i,required:!0,isSubmitted:f,className:"md:col-span-2"}),n.jsx(LGe,{label:"Description",name:"description",value:t.description,onChange:v=>a({...t,description:v.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Deal":"Save Deal"})]})]})]})})}function kT({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:u=!1}){const d=u&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function aH({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))})]})}function ET({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",currentItem:c=null,required:u=!1,isSubmitted:d=!1}){const f=d&&u&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",u&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(EGe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,currentItem:c,hasError:f})]})}function EGe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,currentItem:l=null,hasError:c=!1}){const[u,d]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),N=e.find(w=>String(w.id)===String(t))||l,v=N?s(N):"",j=h.useMemo(()=>{const w=f.trim().toLowerCase();return(w?e.filter(_=>(s(_)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&d(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{u||p("")},[u]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:u?f:v,placeholder:r,onFocus:()=>!i&&d(!0),onChange:w=>{p(w.target.value),u||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${c?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),u&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:j.length>0?j.map(w=>{const S=String(w.id),_=s(w),E=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${E?"bg-blue-50":""}`,children:_||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function LGe({label:e,name:t,value:a,onChange:s,placeholder:r,required:i=!1,disabled:o=!1,className:l="",rows:c=3}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,required:i,disabled:o,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}const LT=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],PT={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:"",subtotal:0,tax_rate:0,tax_amount:0,discount_type:"",discount_value:0,discount_amount:0,currency:"PHP",items:[]},Ri=e=>{if(!e)return"Draft";const t=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[t]||"Draft"},DT=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",PGe=e=>{switch(Ri(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}},DGe=e=>{switch(Ri(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-orange-600 text-white";default:return"bg-gray-600 text-white"}},Hb=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",Mg=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",OGe=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const t=new Date(e);if(isNaN(t.getTime()))return"";const a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`}catch{return""}},OT=(e,t)=>{if(!e||t==null||t==="")return"";const a=Number(t);if(Number.isNaN(a))return"";const s=new Date(e);return isNaN(s.getTime())?"":(s.setDate(s.getDate()+a),s.toISOString().slice(0,10))},sH=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},MT=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},Gw=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},MGe=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const s of e){const r=localStorage.getItem(s);if(r)try{const i=JSON.parse(r),o=Gw(i);if(o)return o}catch{}}const t=localStorage.getItem("user_id"),a=Gw(t);return a||null},IGe=e=>{if(!e)return"";const a=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""},$Ge=e=>{if(!e)return"";const a=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""},RGe=e=>{if(!e)return"";const a=[e.assigned_user?.id,e.assigned_to?.id,e.assigned_to,e.assigned_user_id].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""};function zGe(){const e=jt(),t=Jt(),{user:a}=qt(),s=a?.company?.currency||"";h.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[r,i]=h.useState([]),[o,l]=h.useState(!1),[c,u]=h.useState([]),[d,f]=h.useState([]),[p,x]=h.useState([]),[y,N]=h.useState([]),[v,j]=h.useState(null),[w,S]=h.useState(null),[_,E]=h.useState(!1),[T,A]=h.useState(!1),[L,M]=h.useState(!1),[F,$]=h.useState(null),[D,q]=h.useState(!1),[G,U]=h.useState(!1),[V,Z]=h.useState(null),[Y,le]=h.useState(PT),[_e,te]=h.useState(""),[ae,ye]=h.useState("Filter by Status"),[Ne,he]=h.useState(null),ve=h.useCallback(async()=>{if(w)try{U(!0);const xe=(await se.get("/company/invoice-info"))?.data;e(`/group-manager/quotes/${encodeURIComponent(w.id)}/print`,{state:{quote:w,companyInfo:xe}})}catch(B){const xe=B?.response?.data?.detail||B?.message||"Failed to open print page.";W.error(xe)}finally{U(!1)}},[w,e]),[ne,Se]=h.useState(1),[de,ke]=h.useState(10),[Te,pe]=h.useState("Overview"),[ze,Pe]=h.useState("Draft"),[We,tt]=h.useState([]),[lt,Ie]=h.useState(null),rt=h.useMemo(()=>RGe(w),[w]),{comments:He,addComment:Ke,refresh:Je}=ka({relatedType:"quote",relatedId:w?.id});h.useEffect(()=>{w?.id&&Je()},[w?.id,Je]),h.useEffect(()=>{const xe=t.state?.quoteID;if(xe){Ie(xe),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(lt&&r.length>0&&!o){const B=r.find(xe=>xe.id===lt);B?S(B):W.error("Quote not found."),Ie(null)}},[lt,r,o]),h.useEffect(()=>{let B=!0;return(async()=>{const Ae=MGe();if(Ae&&B){j(Ae);return}try{const Ue=await se.get("/auth/me"),Ge=Gw(Ue?.data);if(Ge&&B){j(Ge);return}}catch{}try{const Ue=await se.get("/users/me"),Ge=Gw(Ue?.data);if(Ge&&B){j(Ge);return}}catch{}B&&j(null)})(),()=>{B=!1}},[]);const Oe=h.useCallback(B=>B&&d.find(Ae=>String(Ae.id)===String(B))?.name||"",[d]),Ce=h.useCallback(B=>{if(!B)return"";const xe=p.find(Ae=>String(Ae.id)===String(B));return xe?`${xe.first_name} ${xe.last_name}`.trim():""},[p]),fe=h.useCallback(B=>{if(!B)return"--";const xe=c.find(Ae=>String(Ae.id)===String(B));return xe?.deal_name||xe?.name||`Deal #${sH(B)}`},[c]),ue=h.useCallback(B=>{const xe=c.find(Ge=>String(Ge.id)===String(B)),Ae=IGe(xe);let Ue=$Ge(xe);if(!Ue&&Ae){const Ge=p.filter(ct=>String(ct.account_id||"")===String(Ae));if(Ge.length>0){const ct=[...Ge].sort((yt,Et)=>{const Kt=`${yt.first_name||""} ${yt.last_name||""}`.trim().toLowerCase(),Ea=`${Et.first_name||""} ${Et.last_name||""}`.trim().toLowerCase();return Kt.localeCompare(Ea)});Ue=String(ct[0].id)}}if(Ae&&Ue){const Ge=p.find(ct=>String(ct.id)===String(Ue));Ge?.account_id&&String(Ge.account_id)!==String(Ae)&&(Ue="")}return{accountId:Ae||"",contactId:Ue||""}},[c,p]),H=h.useCallback(B=>{if(!B)return"--";if(B.deal?.deal_name)return B.deal.deal_name;if(B.deal?.name)return B.deal.name;const xe=B.deal_id||B.deal?.id;return xe?fe(xe):"--"},[fe]),K=h.useCallback(B=>{if(!B)return"--";if(B.account?.name)return B.account.name;let xe=B.account_id||B.account?.id;if(!xe){const Ae=B.deal_id||B.deal?.id;Ae&&(xe=ue(Ae).accountId)}return xe?Oe(xe)||`Account #${xe}`:"--"},[ue,Oe]),we=h.useCallback(B=>{if(!B)return"--";if(B.contact?.first_name||B.contact?.last_name)return`${B.contact?.first_name||""} ${B.contact?.last_name||""}`.trim()||"--";let xe=B.contact_id||B.contact?.id;if(!xe){const Ue=B.deal_id||B.deal?.id;Ue&&(xe=ue(Ue).contactId)}return(xe?Ce(xe):"")||(xe?`Contact #${xe}`:"--")},[ue,Ce]),Me=h.useCallback(async(B=null)=>{l(!0);try{const xe=await se.get("/quotes/admin/fetch-all"),Ue=[...Array.isArray(xe.data)?xe.data:[]].sort((Ge,ct)=>{const yt=Ge?.created_at||Ge?.updated_at||0,Et=ct?.created_at||ct?.updated_at||0;return new Date(Et)-new Date(yt)});if(i(Ue),B){const Ge=Ue.find(ct=>ct.id===B);S(Ge||null)}}catch(xe){console.error(xe),i([]),xe.response?.status===403?W.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):W.error("Failed to fetch quotes. Please try again later.")}finally{l(!1)}},[]),ce=h.useCallback(async()=>{try{const B=await se.get("/deals/admin/fetch-all");u(Array.isArray(B.data)?B.data:[])}catch(B){console.error(B),B.response?.status===403&&W.warn("Unable to load deals (permission denied).")}},[]),oe=h.useCallback(async()=>{try{const B=await se.get("/accounts/admin/fetch-all");f(Array.isArray(B.data)?B.data:[])}catch(B){console.error(B),B.response?.status===403&&W.warn("Unable to load accounts (permission denied).")}},[]),De=h.useCallback(async()=>{try{const B=await se.get("/contacts/admin/fetch-all");x(Array.isArray(B.data)?B.data:[])}catch(B){console.error(B),B.response?.status===403&&W.warn("Unable to load contacts (permission denied).")}},[]),$e=h.useCallback(async()=>{try{const B=await se.get("/users/all");N(Array.isArray(B.data)?B.data:[])}catch(B){console.error(B),B.response?.status===403&&W.warn("Unable to load users (permission denied).")}},[]);h.useEffect(()=>{Me(),ce(),oe(),De(),$e()},[Me,ce,oe,De,$e]);const Xe=h.useMemo(()=>{const B=_e.trim().toLowerCase(),xe=ae.trim();return r.filter(Ae=>{const Ue=H(Ae),Ge=K(Ae),ct=we(Ae),yt=OT(Ae.presented_date,Ae.validity_days),Et=[Ae.quote_id,Ue,Ge,ct,Ae.total_amount?.toString(),Ae.validity_days?.toString(),Ae.presented_date?Mg(Ae.presented_date):"",yt?Mg(yt):"",Ae.assigned_user?.first_name,Ae.assigned_user?.last_name,Ae.creator?.first_name,Ae.creator?.last_name,Ae.status,Ae.notes,Hb(Ae.created_at),Hb(Ae.updated_at)],Kt=B===""||Et.some(uc=>uc==null?!1:uc.toString().toLowerCase().includes(B)),Ea=xe==="Filter by Status"||Ri(Ae.status)===xe;return Kt&&Ea})},[r,_e,ae,H,K,we]),Ze=Math.max(1,Math.ceil(Xe.length/de)||1);h.useEffect(()=>Se(1),[_e,ae]),h.useEffect(()=>{Se(B=>{const xe=Math.max(1,Math.ceil(Xe.length/de)||1);return B>xe?xe:B})},[Xe.length,de]);const mt=h.useMemo(()=>{const B=(ne-1)*de;return Xe.slice(B,B+de)},[Xe,ne,de]),nt=()=>Se(B=>Math.max(B-1,1)),Nt=()=>Se(B=>Math.min(B+1,Ze)),wt=B=>{S(B),pe("Overview"),Pe(Ri(B?.status)||"Draft")},Tt=()=>{S(null),pe("Overview")},Re=B=>{B.target.id==="quoteModalBackdrop"&&!D&&Tt()},me=h.useCallback(()=>{E(!1),A(!1),Z(null),le(PT),M(!1)},[]),ie=B=>{B.target.id==="modalBackdrop"&&!L&&!D&&me()},Fe=B=>{const{name:xe,value:Ae}=B.target;if(xe==="deal_id"){const{accountId:Ue,contactId:Ge}=ue(Ae);le(ct=>({...ct,deal_id:Ae,account_id:Ue,contact_id:Ge}));return}le(Ue=>({...Ue,[xe]:Ae}))},Le=()=>{le(PT),A(!1),Z(null),E(!0)},be=B=>{if(!B)return;S(null);const xe=B.deal?.id?String(B.deal.id):B.deal_id?String(B.deal_id):"",Ae=xe?ue(xe):{accountId:"",contactId:""},Ue=B.account?.id?String(B.account.id):B.account_id?String(B.account_id):Ae.accountId,Ge=B.contact?.id?String(B.contact.id):B.contact_id?String(B.contact_id):Ae.contactId,ct=B.assigned_user?.id?String(B.assigned_user.id):B.assigned_to?String(B.assigned_to):"";le({deal_id:xe,account_id:Ue||"",contact_id:Ge||"",total_amount:B.total_amount?.toString()||"",presented_date:OGe(B.presented_date),validity_days:B.validity_days!==null&&B.validity_days!==void 0?String(B.validity_days):"",status:Ri(B.status)||"Draft",assigned_to:ct,notes:B.notes||"",subtotal:parseFloat(B.subtotal)||0,tax_rate:parseFloat(B.tax_rate)||0,tax_amount:parseFloat(B.tax_amount)||0,discount_type:B.discount_type||"",discount_value:parseFloat(B.discount_value)||0,discount_amount:parseFloat(B.discount_amount)||0,currency:B.currency||"PHP",items:Array.isArray(B.items)?B.items.map(yt=>({id:yt.id,item_type:yt.item_type||"Product",name:yt.name||"",description:yt.description||"",sku:yt.sku||"",variant:yt.variant||"",unit:yt.unit||"pcs",quantity:parseFloat(yt.quantity)||1,unit_price:parseFloat(yt.unit_price)||0,discount_percent:parseFloat(yt.discount_percent)||0,discount_amount:parseFloat(yt.discount_amount)||0,line_total:parseFloat(yt.line_total)||0,sort_order:yt.sort_order||0})):[]}),A(!0),Z(B.id),E(!0)},ee=B=>{if(B.target.checked){const xe=mt.filter(Ae=>Ae.created_by===v).map(Ae=>Ae.id);tt(xe)}else tt([])},O=B=>{tt(xe=>xe.includes(B)?xe.filter(Ae=>Ae!==B):[...xe,B])},z=mt.filter(B=>B.created_by===v),I=B=>{if(!B)return;const xe=B.quote_id||"this quote";$({title:"Archive Quote",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:xe}),"? This action cannot be undone."]}),confirmLabel:"Archive Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:B.id,name:xe}})},Q=async()=>{We.length!==0&&$({title:"Archive Quotes",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:We.length})," selected quotes? This action cannot be undone."]}),confirmLabel:`Archive ${We.length} Quote(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",quote_ids:We}})},[ge,re]=h.useState(!1),Ee=B=>{if(B.preventDefault(),re(!0),!v){W.error("Unable to determine current user. Please log in again.");return}if(!Y.deal_id){W.error("Deal is required.");return}if(!Y.assigned_to){W.error("Assigned To is required.");return}const Ae=ue(Y.deal_id),Ue=Y.items.map((Kt,Ea)=>({item_type:Kt.item_type||"Product",name:Kt.name,description:Kt.description||null,sku:Kt.sku||null,variant:Kt.variant||null,unit:Kt.unit||null,quantity:parseFloat(Kt.quantity)||1,unit_price:parseFloat(Kt.unit_price)||0,discount_percent:parseFloat(Kt.discount_percent)||0,sort_order:Kt.sort_order??Ea})),Ge={deal_id:Number(Y.deal_id),account_id:Ae.accountId?Number(Ae.accountId):null,contact_id:Ae.contactId?Number(Ae.contactId):null,subtotal:parseFloat(Y.subtotal)||0,tax_rate:parseFloat(Y.tax_rate)||0,tax_amount:parseFloat(Y.tax_amount)||0,discount_type:Y.discount_type||null,discount_value:parseFloat(Y.discount_value)||0,discount_amount:parseFloat(Y.discount_amount)||0,total_amount:parseFloat(Y.total_amount)||0,currency:Y.currency||"PHP",presented_date:Y.presented_date||null,validity_days:Y.validity_days===""?null:Number(Y.validity_days),status:Y.status||"Draft",assigned_to:Y.assigned_to?Number(Y.assigned_to):null,notes:Y.notes?.trim()||null,items:Ue},ct=T&&V?"update":"create",yt=fe(Y.deal_id),Et=ct==="create"?{...Ge,created_by_id:Number(v)}:Ge;$({title:ct==="create"?"Confirm New Quote":"Confirm Update",message:ct==="create"?n.jsxs("span",{children:["Are you sure you want to create a quote for"," ",n.jsx("span",{className:"font-semibold",children:yt}),"?"]}):n.jsxs("span",{children:["Save changes to"," ",n.jsx("span",{className:"font-semibold",children:yt}),"?"]}),confirmLabel:ct==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:ct,payload:Et,targetId:V||null,name:yt}})},Qe=async()=>{if(!F?.action){$(null);return}const{action:B}=F,{type:xe,payload:Ae,targetId:Ue,name:Ge}=B;q(!0);try{if(xe==="create")M(!0),await se.post("/quotes/admin",Ae),W.success("Quote created successfully."),me(),await Me();else if(xe==="update"){if(!Ue)throw new Error("Missing quote identifier for update.");M(!0),await se.put(`/quotes/admin/${Ue}`,Ae),W.success("Quote updated successfully."),me(),await Me(),w?.id===Ue&&S(null)}else if(xe==="delete"){if(!Ue)throw new Error("Missing quote identifier for deletion.");const ct=w?.id;he(Ue),await se.delete(`/quotes/admin/${Ue}`),W.success(`Quote "${Ge}" archived successfully.`),await Me(ct&&ct!==Ue?ct:null),ct===Ue&&S(null)}else xe==="bulk-delete"&&(await se.post("/quotes/admin/bulk-delete",{quote_ids:We}),W.success(`Successfully archived ${We.length} quotes`),tt([]),await Me())}catch(ct){console.error(ct);const yt=xe==="create"?"Failed to create quote. Please review the details and try again.":xe==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";W.error(yt),(xe==="create"||xe==="update")&&M(!1),xe==="delete"&&he(null)}finally{(xe==="create"||xe==="update")&&M(!1),xe==="delete"&&he(null),q(!1),$(null)}},gt=()=>{D||$(null)},Ct=h.useCallback((B,xe)=>{const Ae=B?.deal_id??B?.deal?.id??"",Ue=Ae?Number(Ae):null,Ge=Ue?ue(String(Ue)):{accountId:"",contactId:""},ct=B?.account_id??B?.account?.id??Ge.accountId??null,yt=B?.contact_id??B?.contact?.id??Ge.contactId??null,Et=B?.total_amount??0,Kt=B?.assigned_to??B?.assigned_user?.id??null;return{deal_id:Ue,account_id:ct!=null&&String(ct).trim()!==""?Number(ct):null,contact_id:yt!=null&&String(yt).trim()!==""?Number(yt):null,total_amount:Number(Et),presented_date:B?.presented_date||null,validity_days:B?.validity_days===""||B?.validity_days===void 0||B?.validity_days===null?null:Number(B.validity_days),status:xe,assigned_to:Kt!=null&&String(Kt).trim()!==""?Number(Kt):null,notes:B?.notes?.trim()||null}},[ue]),kt=h.useCallback(async()=>{if(!w?.id)return;const B=Ri(ze),xe=[B,B.toLowerCase()],Ae=async Ue=>se.patch(`/quotes/admin/${w.id}/status`,{status:Ue},{headers:{"Content-Type":"application/json"}});try{let Ue=!1;for(const Ge of xe)try{await Ae(Ge),Ue=!0;break}catch(ct){if(ct?.response?.status===422)continue;throw ct}if(!Ue){const Ge=Ct(w,B);if(!Ge.deal_id){W.error("Cannot update status: missing deal_id on selected quote.");return}if(!Ge.total_amount||Ge.total_amount<=0){W.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await se.put(`/quotes/admin/${w.id}`,Ge)}W.success(`Quote status updated to ${B}`),S(null),pe("Overview"),await Me()}catch(Ue){console.error(Ue);const Ge=Ue?.response?.data?.message||(Ue?.response?.data?.errors?Object.values(Ue.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";W.error(Ge)}},[w,ze,Me,Ct]),Dt=[{label:"Filter by Status",value:"Filter by Status"},...LT.map(B=>({label:B.label,value:B.value}))],on=F?.action?.type==="delete"?F.action.targetId:null,Qn=w&&(Ne===w.id||on===w.id),ia=w&&Ne===w.id,Be=w?n.jsx("div",{id:"quoteModalBackdrop",onClick:Re,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:B=>B.stopPropagation(),children:[n.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:n.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),n.jsx("button",{onClick:Tt,className:"text-gray-500 hover:text-white transition cursor-pointer",children:n.jsx(Xn,{size:25})})]})}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:H(w)}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${DGe(w.status)}`,children:DT(w.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-white text-gray-700 px-4 py-2 rounded-md border border-gray-300 hover:bg-gray-50 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-gray-300",onClick:ve,disabled:G||L||D,children:[n.jsx(fn,{className:"mr-2"}),G?"Preparing...":"Print Quotation"]}),v===w.created_by&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>be(w),disabled:D||F?.action?.type==="update"&&F.action.targetId===w.id,children:[n.jsx(ga,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>I(w),disabled:!!Qn,children:ia?"Archiving...":n.jsxs(n.Fragment,{children:[n.jsx(Zt,{className:"mr-2"}),"Archive"]})})]})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-1 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(B=>n.jsx("button",{onClick:()=>pe(B),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${Te===B?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:B},B))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[Te==="Overview"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Quote ID:"}),n.jsx("p",{children:MT(w.quote_id)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Deal:"}),n.jsx("p",{children:H(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Account:"}),n.jsx("p",{children:K(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact:"}),n.jsx("p",{children:we(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Total Amount:"}),n.jsx("p",{children:w.total_amount?`${s}${Number(w.total_amount).toLocaleString()}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Presented Date:"}),n.jsx("p",{children:Mg(w.presented_date)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Validity Days:"}),n.jsx("p",{children:w.validity_days!==null&&w.validity_days!==void 0?w.validity_days:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),n.jsx("p",{children:Mg(OT(w.presented_date,w.validity_days))||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:DT(w.status)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:w.assigned_user?`${w.assigned_user.first_name} ${w.assigned_user.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:w.creator?`${w.creator.first_name} ${w.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:Hb(w.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:Hb(w.updated_at)||"N/A"})]})]}),w.items&&w.items.length>0&&n.jsx("div",{className:"mt-6",children:n.jsx(yd,{items:w.items,onChange:()=>{},currencySymbol:s,readOnly:!0,taxRate:parseFloat(w.tax_rate)||0,discountType:w.discount_type,discountValue:parseFloat(w.discount_value)||0})})]}),Te==="Notes"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),n.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:w.notes||"No notes available."})]}),n.jsx(Ta,{comments:He,onAddComment:Ke})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/group-manager/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call regarding Quote ${MT(w.quote_id)}`,assigned_to:rt,direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Ot,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/group-manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${w.quote_id}`,assignedTo:rt,status:"Planned"}}}),children:[n.jsx(Pt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/group-manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${w.quote_id}`,assignedTo:rt,priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:ze||Ri(w.status)||"Draft",onChange:B=>Pe(B.target.value),children:LT.map(B=>n.jsx("option",{value:B.value,children:B.label},B.value))}),n.jsx("button",{onClick:kt,disabled:Ri(ze)===Ri(w.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Ri(ze)===Ri(w.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,_t=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[o&&n.jsx(Wt,{message:"Loading quotes..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(fn,{className:"mr-2 text-blue-600"})," Quotes"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto gap-2",children:n.jsxs("button",{onClick:()=>{Le(),re(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(xn,{className:"mr-2"})," Add Quote"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Vt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search quotes",value:_e,onChange:B=>te(B.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:ae,onChange:B=>ye(B.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:Dt.map(B=>n.jsx("option",{value:B.value,children:B.label},B.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:z.length>0&&We.length===z.length,onChange:ee,className:"cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),n.jsx("th",{className:"py-3 px-4",children:"Deal"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Expiry Date"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:We.length>0?n.jsx("button",{onClick:Q,className:"text-orange-600 hover:text-orange-800 transition p-1 rounded-full hover:bg-orange-50",title:`Archive ${We.length} selected items`,children:n.jsx(Zt,{size:18})}):""})]})}),n.jsx("tbody",{children:o?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"Loading quotes..."})}):Xe.length>0?mt.map(B=>{const xe=OT(B.presented_date,B.validity_days);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>wt(B),children:[n.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:Ae=>Ae.stopPropagation(),children:B.created_by===v&&n.jsx("input",{type:"checkbox",checked:We.includes(B.id),onChange:()=>O(B.id),className:"cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:MT(B.quote_id)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:H(B)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-sm text-gray-700 break-words",children:K(B)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:we(B)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-700",children:B.total_amount?`${s}${Number(B.total_amount).toLocaleString()}`:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${PGe(B.status)}`,children:DT(B.status)})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{children:B.assigned_user?`${B.assigned_user.first_name} ${B.assigned_user.last_name}`:"Unassigned"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-500 text-xs",children:Mg(xe)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top text-center w-24"})]},B.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"No quotes found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:Xe.length,pageSize:de,currentPage:ne,onPrev:nt,onNext:Nt,onPageSizeChange:B=>{ke(B),Se(1)},pageSizeOptions:[10,20,30,40,50],label:"quotes"})]}),X=_?n.jsx("div",{id:"modalBackdrop",onClick:ie,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:B=>B.stopPropagation(),children:[n.jsx("button",{onClick:()=>{me(),re(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:L||D,children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:T?"Edit Quote":"Add New Quote"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:Ee,children:[n.jsx(oH,{label:"Deal",name:"deal_id",value:Y.deal_id,onChange:B=>{const{accountId:xe,contactId:Ae}=ue(B);le(Ue=>({...Ue,deal_id:B,account_id:xe,contact_id:Ae}))},items:Array.isArray(c)?c:[],getLabel:B=>`${sH(B?.deal_id??"")} ${B?.name??""}`.trim(),placeholder:"Search deal...",required:!0,isSubmitted:ge,disabled:L||c.length===0,className:"md:col-span-2"}),n.jsx(iH,{label:"Account",value:Oe(Y.account_id)||(Y.account_id?`Account #${Y.account_id}`:""),disabled:!0}),n.jsx(iH,{label:"Contact",value:Ce(Y.contact_id)||(Y.contact_id?`Contact #${Y.contact_id}`:""),disabled:!0}),n.jsx("div",{className:"md:col-span-2 mt-2",children:n.jsx(yd,{items:Y.items,onChange:B=>le(xe=>({...xe,items:B})),currencySymbol:s,readOnly:L,taxRate:Y.tax_rate,discountType:Y.discount_type,discountValue:Y.discount_value,onTotalsChange:B=>{le(xe=>({...xe,subtotal:B.subtotal,discount_amount:B.discount_amount,tax_amount:B.tax_amount,total_amount:B.total_amount}))}})}),n.jsxs("div",{className:"md:col-span-2 mt-2 p-4 bg-gray-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Pricing Settings"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Discount Type"}),n.jsxs("select",{value:Y.discount_type||"",onChange:B=>le(xe=>({...xe,discount_type:B.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",disabled:L,children:[n.jsx("option",{value:"",children:"No Discount"}),n.jsx("option",{value:"percentage",children:"Percentage (%)"}),n.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-600 text-xs mb-1",children:["Discount"," ",Y.discount_type==="percentage"?"%":"Amount"]}),n.jsx("input",{type:"number",value:Y.discount_value||"",onChange:B=>le(xe=>({...xe,discount_value:B.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:Y.discount_type==="percentage"?"100":void 0,step:"0.01",disabled:L||!Y.discount_type})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Tax Rate (%)"}),n.jsx("input",{type:"number",value:Y.tax_rate||"",onChange:B=>le(xe=>({...xe,tax_rate:B.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:"100",step:"0.01",disabled:L})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Total Amount"}),n.jsxs("div",{className:"w-full bg-gray-100 border border-gray-300 rounded-md px-2 py-1.5 text-sm font-medium",children:[s,parseFloat(Y.total_amount||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),n.jsx(rH,{label:"Presented Date",name:"presented_date",type:"date",value:Y.presented_date,onChange:Fe,disabled:L}),n.jsx(rH,{label:"Validity Days",name:"validity_days",type:"number",value:Y.validity_days,onChange:Fe,placeholder:"30",disabled:L}),n.jsx(oH,{label:"Assigned To",value:Y.assigned_to||"",onChange:B=>le(xe=>({...xe,assigned_to:B})),items:Array.isArray(y)?y:[],getLabel:B=>{const xe=`${B?.first_name??""} ${B?.last_name??""}`.trim();return xe?B?.role?`${xe} (${B.role})`:xe:B?.email||""},placeholder:"Search assignee...",required:!0,isSubmitted:ge,disabled:L}),n.jsx(FGe,{label:"Status",name:"status",value:Y.status,onChange:Fe,options:LT,required:!0,disabled:L}),n.jsx(BGe,{label:"Notes",name:"notes",value:Y.notes,onChange:Fe,placeholder:"Additional details...",rows:3,disabled:L,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{me(),re(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:L||D,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:L||D,children:L?"Saving...":T?"Update Quote":"Save Quote"})]})]})]})}):null,k=F?n.jsx(HGe,{open:!0,title:F.title,message:F.message,confirmLabel:F.confirmLabel,cancelLabel:F.cancelLabel,variant:F.variant,onConfirm:Qe,onCancel:gt,loading:D}):null;return n.jsxs(n.Fragment,{children:[w?Be:_t,X,k]})}function rH({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:u=!1}){const d=u&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function iH({label:e,value:t,className:a="",disabled:s=!0}){return n.jsxs("div",{className:a,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("input",{type:"text",value:t??"",disabled:s,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function FGe({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){const c=a!=null?String(a):"",d=r.some(f=>String(f.value)===c)?c:"";return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:d,onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(f=>n.jsx("option",{value:String(f.value??""),children:f.label},f.value??f.label))})]})}function oH({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:u=!1}){const d=u&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(UGe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:d})]})}function UGe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,u]=h.useState(!1),[d,f]=h.useState(""),p=h.useRef(null),x=e.find(v=>String(v.id)===String(t)),y=x?s(x):"",N=h.useMemo(()=>{const v=d.trim().toLowerCase();return(v?e.filter(w=>(s(w)||"").toLowerCase().includes(v)):e).slice(0,o)},[e,d,s,o]);return h.useEffect(()=>{const v=j=>{p.current&&!p.current.contains(j.target)&&u(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?d:y,placeholder:r,onFocus:()=>!i&&u(!0),onChange:v=>{f(v.target.value),c||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:N.length>0?N.map(v=>{const j=String(v.id),w=s(v),S=String(t)===j;return n.jsx("button",{type:"button",onClick:()=>{a(j),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},j)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function BGe({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function HGe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function qGe(){const{userRole:e}=Ks();return n.jsx(o1,{currentUserRole:e,currentUserId:null})}const lH=["Not started","In progress","Deferred","Completed"],cH={NOT_STARTED:"Not started","NOT STARTED":"Not started","TO DO":"Not started",IN_PROGRESS:"In progress","IN PROGRESS":"In progress",COMPLETED:"Completed",DEFERRED:"Deferred","Not started":"Not started","In progress":"In progress",Completed:"Completed",Deferred:"Deferred","In Progress":"In progress","To Do":"Not started",Review:"Deferred"},See=e=>e&&(cH[e]||cH[String(e).toUpperCase()])||"Not started",WGe=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const a=t.getTimezoneOffset();return new Date(t.getTime()-a*60*1e3).toISOString().slice(0,16)},IT=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},GGe=e=>{const t=e.subject?.trim()??"",a=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),See(e.status);let r=null,i=null,o=null,l=null,c=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?o=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Quote"&&e.relatedTo2&&(c=Number(e.relatedTo2)));const u=e.assignedTo?Number(e.assignedTo):null,d=o||l||i||r,f=o?"Contact":l?"Deal":i?"Account":r?"Lead":c?"Quote":null;return{title:t,description:a,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:u,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:o,deal_id:l,quote_id:c,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:d,related_type:f}},VGe=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",a=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",o=G=>{if(!G)return"";const U=String(G).split("-");return U.length===3?`${U[0]}-${U[2]}`:String(G)},l=()=>e.lead?.id||e.lead_id,c=()=>e.account?.id||e.account_id,u=()=>e.contact?.id||e.contact_id,d=()=>e.deal?.id||e.deal_id,f=()=>e.quote?.id||e.quote_id,p=()=>e.task_assign_to?.id||e.assigned_to,x=()=>e.lead?.title||e.lead_id,y=()=>e.account?.name||e.account_id,N=()=>i||e.contact_id,v=()=>e.deal?.name||e.deal_id,j=()=>o(e.quote?.quote_id)||e.id;let w="Lead",S="",_="",E="",T="Lead",A="",L="",M="";const F=c(),$=y(),D=l(),q=x();if(F){w="Account",T="Account",A=$,S=String(F);const G=u(),U=d(),V=N(),Z=v(),Y=f(),le=j();G?(_="Contact",L="Contact",M=V,E=String(G)):U?(L="Deal",_="Deal",M=Z,E=String(U)):Y&&(L="Quote",_="Quote",M=le,E=String(Y))}else D?(T="Lead",A=q,w="Lead",S=String(D)):e.related_type==="Account"&&(w="Account",S=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:See(e.status),dueDate:s,dateAssigned:r,assignedToId:p()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:a,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:T,relatedTo1Text:A,relatedType2Text:L,relatedTo2Text:M,subject:e.title,relatedType1:w,relatedTo1:S,relatedType2:_,relatedTo2:E}};function YGe(){h.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=qt(),[a,s]=h.useState("board"),[r,i]=h.useState(!1),[o,l]=h.useState(null),[c,u]=h.useState(!1),[d,f]=h.useState([]),[p,x]=h.useState(!0),[y,N]=h.useState(""),[v,j]=h.useState("Filter by Status"),[w,S]=h.useState("Filter by Priority"),[_,E]=h.useState([]),[T,A]=h.useState(1),[L,M]=h.useState(10),[F,$]=h.useState(null),[D,q]=h.useState(!1),[G,U]=h.useState([]),[V,Z]=h.useState(null),Y=jt(),le=Jt(),[_e,te]=h.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""}),[ae,ye]=h.useState(null),Ne=Fx(zf(am,{activationConstraint:{distance:8}})),he=H=>{const{active:K}=H,we=d.find(Me=>Me.id===K.id);Z(we)},ve=async H=>{const{active:K,over:we}=H;if(Z(null),!we)return;const Me=K.id,ce=we.id,oe=d.find(De=>De.id===Me);if(!(!oe||oe.status===ce)){f(De=>De.map($e=>$e.id===Me?{...$e,status:ce}:$e));try{const De={title:oe.title,description:oe.description||"",priority:oe.priority||"Normal",status:ce,due_date:oe.dueDate||null,assigned_to:oe.assignedToId||null,related_type_1:oe.relatedType1||null,related_to_1:oe.relatedTo1?parseInt(oe.relatedTo1,10):null,related_type_2:oe.relatedType2||null,related_to_2:oe.relatedTo2?parseInt(oe.relatedTo2,10):null};(!De.related_to_1||isNaN(De.related_to_1))&&(De.related_to_1=null),(!De.related_to_2||isNaN(De.related_to_2))&&(De.related_to_2=null),await se.put(`/tasks/${Me}`,De),W.success(`Task moved to "${ce}"`)}catch(De){console.error("Failed to update task status:",De),W.error("Failed to update task status"),f($e=>$e.map(Xe=>Xe.id===Me?{...Xe,status:oe.status}:Xe))}}},ne=()=>{Z(null)};h.useEffect(()=>{const H=le.state?.openTaskModal,K=le.state?.initialTaskData,we=le.state?.taskID;H?(i(!0),K&&te(Me=>({...Me,...K})),Y(le.pathname,{replace:!0,state:{}})):we&&(ye(we),Y(le.pathname,{replace:!0,state:{}}))},[le,Y]),h.useEffect(()=>{if(ae&&d.length>0&&!p){const H=d.find(K=>K.id===ae);H?Te(H,!0):W.error("Task not found."),ye(null)}},[ae,d,p]);const Se=async()=>{try{const H=await se.get("/users/all");E(Array.isArray(H.data)?H.data:[])}catch(H){console.error("Failed to fetch users:",H),W.error("Failed to fetch users.")}},de=async()=>{try{x(!0);const H=await se.get("/tasks/all"),we=(Array.isArray(H.data)?H.data:[]).map(VGe);we.sort((Me,ce)=>{const oe=Me.createdAt?new Date(Me.createdAt):0;return(ce.createdAt?new Date(ce.createdAt):0)-oe}),f(we),a==="list"&&A(1)}catch(H){console.error("Failed to load tasks:",H),W.error("Failed to load tasks.")}finally{x(!1)}};h.useEffect(()=>{!t&&e&&(Se(),de())},[t,e]);const ke=()=>{l(null),te({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},Te=(H=null,K=!1)=>{l(H),u(K),H?te({id:H.id,subject:H.title||"",description:H.description||"",priority:H.priority||"Normal",status:H.status||"Not started",dueDate:WGe(H.dueDate),assignedTo:H.assignedToId?String(H.assignedToId):"",assignedToName:H.assignedToName||"",createdBy:H.createdBy||"",notes:H.notes||"",relatedType1Text:H.relatedType1Text||"",relatedTo1Text:H.relatedTo1Text||"",relatedType2Text:H.relatedType2Text||"",relatedTo2Text:H.relatedTo2Text||"",relatedType1:H.relatedType1||"",relatedTo1:H.relatedTo1||"",relatedType2:H.relatedType2||"",relatedTo2:H.relatedTo2||""}):ke(),i(!0)},pe=()=>{i(!1),l(null),u(!1),ke()},ze=async H=>{const K=GGe(H);try{o&&!c?(await se.put(`/tasks/${o.id}`,K),W.success("Task updated successfully.")):(await se.post("/tasks/create",K),W.success("Task created successfully.")),i(!1),await de()}catch(we){console.error("Failed to save task:",we);const Me=we.response?.data?.detail||"Failed to save task.";W.error(Me)}},Pe=H=>{H&&$({title:"Delete Task",message:n.jsxs(n.Fragment,{children:["Are you sure you want to delete ",n.jsx("span",{className:"font-semibold",children:H.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:H.id}})},We=()=>{if(Ke.every(H=>G.includes(H.id)))U(G.filter(H=>!Ke.map(K=>K.id).includes(H)));else{const H=Ke.map(K=>K.id);U([...new Set([...G,...H])])}},tt=H=>{U(K=>K.includes(H)?K.filter(we=>we!==H):[...K,H])},lt=async()=>{G.length!==0&&$({title:"Delete Tasks",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:G.length})," selected tasks? This action cannot be undone."]}),confirmLabel:`Delete ${G.length} Task(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",task_ids:G}})},Ie=async()=>{if(!F?.action){$(null);return}const{action:H}=F;q(!0);try{H.type==="delete"?(await se.delete(`/tasks/${H.targetId}`),W.success("Task deleted successfully."),await de()):H.type==="bulk-delete"&&(await se.delete("/tasks/admin/bulk-delete",{data:{task_ids:H.task_ids}}),W.success(`Successfully deleted ${H.task_ids.length} tasks`),U([]),await de())}catch(K){console.error("Task action failed:",K),W.error("Failed to delete task.")}finally{q(!1),$(null)}},rt=()=>{D||$(null)},He=h.useMemo(()=>{const H=y.trim().toLowerCase();return[...d].sort((we,Me)=>{const ce=we.createdAt?new Date(we.createdAt):0;return(Me.createdAt?new Date(Me.createdAt):0)-ce}).filter(we=>{const Me=H===""||we.title?.toLowerCase().includes(H)||we.description?.toLowerCase().includes(H)||we.assignedToName?.toLowerCase().includes(H)||we.createdBy?.toLowerCase().includes(H),ce=v==="Filter by Status"||we.status===v,oe=w==="Filter by Priority"||we.priority===w;return Me&&ce&&oe})},[d,y,v,w]);h.useEffect(()=>{A(1)},[y,v,w,a,L]),h.useEffect(()=>{if(a==="list"){const H=He.length===0?1:Math.ceil(He.length/L);T>H&&A(H)}},[He.length,T,a,L]);const Ke=h.useMemo(()=>{if(a==="board")return He;const H=(T-1)*L;return He.slice(H,H+L)},[He,T,a,L]),Je=h.useMemo(()=>{const H=new Date;return[{title:"To Do",value:d.filter(K=>K.status==="Not started").length,icon:Vs,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:d.filter(K=>K.status==="In progress").length,icon:Gi,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:d.filter(K=>K.status==="Completed").length,icon:aa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:d.filter(K=>K.dueDate&&new Date(K.dueDate)<H&&K.status!=="Completed").length,icon:Yu,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:d.filter(K=>K.priority==="High").length,icon:Xl,color:"text-orange-600",bgColor:"bg-orange-100"}]},[d]),Oe=H=>H.dueDate&&new Date(H.dueDate)<new Date&&H.status!=="Completed",Ce=H=>{switch(H.status){case"Not started":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Deferred":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},fe=H=>{switch(H){case"Not started":return"bg-blue-100 text-blue-700";case"In progress":return"bg-purple-100 text-purple-700";case"Deferred":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},ue=H=>{switch(H){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&n.jsx(Wt,{message:"Loading tasks..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(Gi,{className:"text-blue-600"})," Tasks Board"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:()=>Te(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[n.jsx(xn,{})," Create Task"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Je.map(H=>n.jsx(QGe,{...H},H.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Vt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search tasks",value:y,onChange:H=>N(H.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{value:v,onChange:H=>j(H.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Status"}),lH.map(H=>n.jsx("option",{children:H},H))]}),n.jsxs("select",{value:w,onChange:H=>S(H.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Priority"}),n.jsx("option",{children:"High"}),n.jsx("option",{children:"Normal"}),n.jsx("option",{children:"Low"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${a==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),n.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${a==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&a==="board"&&(He.length>0?n.jsxs(Hx,{sensors:Ne,collisionDetection:Ux,onDragStart:he,onDragEnd:ve,onDragCancel:ne,children:[n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:lH.map(H=>{const K=Ke.filter(we=>we.status===H);return n.jsx(XGe,{column:H,columnTasks:K,getTaskCardColor:Ce,isTaskOverdue:Oe,formatDateDisplay:IT,handleOpenModal:Te,handleDeleteTask:Pe},H)})}),n.jsx(bj,{children:V?n.jsx(JGe,{task:V,getTaskCardColor:Ce,isTaskOverdue:Oe,formatDateDisplay:IT}):null})]}):n.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No tasks found."})),!p&&!t&&a==="list"&&n.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:Ke.length>0&&Ke.every(H=>G.includes(H.id)),onChange:We})}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),n.jsx("th",{className:"py-3 px-4 font-medium text-center w-24",children:G.length>0?n.jsx("button",{onClick:lt,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${G.length} selected tasks`,children:n.jsx(vn,{size:18})}):""})]})}),n.jsx("tbody",{children:Ke.length>0?Ke.map(H=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",children:[n.jsx("td",{className:"py-3 px-4",onClick:K=>K.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:G.includes(H.id),onChange:()=>tt(H.id)})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",onClick:()=>Te(H,!0),children:H.title}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>Te(H,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${fe(H.status||"Not started")}`,children:H.status||"Not started"})}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>Te(H,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${ue(H.priority||"Low")}`,children:H.priority||"Low"})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",onClick:()=>Te(H,!0),children:H.assignedToName||"Unassigned"}),n.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${Oe(H)?"text-red-600 font-medium":""}`,onClick:()=>Te(H,!0),children:H.dateAssigned?IT(H.dateAssigned):""}),n.jsx("td",{})]},H.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No tasks found."})})})]})})}),!p&&!t&&a==="list"&&n.jsx(rn,{className:"mt-6",totalItems:He.length,pageSize:L,currentPage:He.length===0?0:T,onPrev:()=>A(H=>Math.max(H-1,1)),onNext:()=>A(H=>Math.min(H+1,Math.max(1,Math.ceil(He.length/L)||1))),onPageSizeChange:H=>{M(H),A(1)},pageSizeOptions:[10,20,30,40,50],label:"tasks"}),n.jsx(b0,{isOpen:r,onClose:pe,onSave:ze,onEdit:()=>u(!1),setFormData:te,formData:_e,isEditing:!c&&!!o,viewMode:c,users:_,currentUser:e,onDelete:Pe}),F&&n.jsx(KGe,{open:!0,title:F.title,message:F.message,confirmLabel:F.confirmLabel,cancelLabel:F.cancelLabel,variant:F.variant,onConfirm:Ie,onCancel:rt,loading:D})]})}function QGe({icon:e,title:t,value:a,color:s,bgColor:r,onClick:i}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function KGe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r,variant:i,loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function XGe({column:e,columnTasks:t,getTaskCardColor:a,isTaskOverdue:s,formatDateDisplay:r,handleOpenModal:i,handleDeleteTask:o}){const{isOver:l,setNodeRef:c}=Wx({id:e});return n.jsxs("div",{ref:c,className:`bg-white p-4 shadow border flex flex-col relative rounded-md transition-all duration-200 min-h-[200px] ${l?"border-blue-400 bg-blue-50 ring-2 ring-blue-300":"border-gray-200"}`,children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),n.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:e}),n.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:t.length})]}),n.jsx("div",{className:`space-y-3 flex-1 ${t.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:t.length>0?t.map(u=>n.jsx(ZGe,{task:u,getTaskCardColor:a,isTaskOverdue:s,formatDateDisplay:r,handleOpenModal:i,handleDeleteTask:o},u.id)):n.jsx("div",{className:`text-center py-10 text-gray-500 border-2 border-dashed rounded-lg ${l?"border-blue-300 bg-blue-50":"border-gray-200"}`,children:l?"Drop here":"No tasks"})})]})}function ZGe({task:e,getTaskCardColor:t,isTaskOverdue:a,formatDateDisplay:s,handleOpenModal:r,handleDeleteTask:i}){const{attributes:o,listeners:l,setNodeRef:c,transform:u,isDragging:d}=qx({id:e.id}),f=u?{transform:`translate3d(${u.x}px, ${u.y}px, 0)`}:void 0;return n.jsxs("div",{ref:c,style:f,className:`border rounded-lg p-3 transition flex justify-between items-start cursor-grab active:cursor-grabbing ${t(e)} ${d?"opacity-50 shadow-lg ring-2 ring-blue-400":""}`,...l,...o,children:[n.jsxs("div",{className:"text-left flex-1",onClick:p=>{p.stopPropagation(),r(e,!0)},children:[n.jsx("p",{className:"font-medium text-gray-800 text-sm",children:e.title}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",e.priority]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",e.assignedToName]}),n.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",n.jsx("span",{className:a(e)?"text-red-600":"text-gray-600",children:e.dateAssigned?s(e.dateAssigned):""})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-3",onClick:p=>p.stopPropagation(),children:[n.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),r(e)},className:"text-blue-500 hover:text-blue-700",children:n.jsx(ha,{})}),n.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),i(e)},className:"text-red-500 hover:text-red-700",children:n.jsx(vn,{})})]})]})}function JGe({task:e,getTaskCardColor:t,isTaskOverdue:a,formatDateDisplay:s}){return n.jsx("div",{className:`border rounded-lg p-3 shadow-xl ring-2 ring-blue-400 ${t(e)}`,style:{width:"280px"},children:n.jsxs("div",{className:"text-left flex-1",children:[n.jsx("p",{className:"font-medium text-gray-800 text-sm",children:e.title}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",e.priority]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",e.assignedToName]}),n.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",n.jsx("span",{className:a(e)?"text-red-600":"text-gray-600",children:e.dateAssigned?s(e.dateAssigned):""})]})]})})}const _ee=e=>e?e.toUpperCase():"",qb=e=>{const t=_ee(e);return t==="PLANNED"||t==="IN PROGRESS"?"PLANNED":t==="HELD"||t==="DONE"?"HELD":t==="NOT_HELD"||t==="NOT HELD"?"NOT_HELD":"PLANNED"},eVe=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},tVe=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},nVe=e=>{const t=_ee(e);switch(t==="PLANNED"?"PENDING":t==="HELD"?"COMPLETED":t==="NOT_HELD"?"CANCELLED":t){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},$T={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},aVe=()=>{const e=jt(),t=Jt(),[a]=Us(),s=a.get("id"),r=t.pathname==="/admin/meetings/info";h.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[i,o]=h.useState([]),[l,c]=h.useState(!1),[u,d]=h.useState([]),[f,p]=h.useState(""),[x,y]=h.useState("Filter by Status"),[N,v]=h.useState(!1),[j,w]=h.useState(null),[S,_]=h.useState(1),[E,T]=h.useState(10),[A,L]=h.useState($T),[M,F]=h.useState(!1),[$,D]=h.useState(null),[q,G]=h.useState(!1),[U,V]=h.useState(null),[Z,Y]=h.useState(!1),[le,_e]=h.useState(null),[te,ae]=h.useState(new Set),[ye,Ne]=h.useState(!1),{user:he}=qt();h.useEffect(()=>{const fe=t.state?.openMeetingModal,ue=t.state?.initialMeetingData?.relatedTo||a.get("id"),H=t.state?.meetingID;fe||ue?(v(!0),t.state?.initialMeetingData&&L(K=>({...K,...t.state.initialMeetingData})),e(t.pathname,{replace:!0,state:{}})):H&&(_e(H),e(t.pathname,{replace:!0,state:{}}))},[t,a,e]),h.useEffect(()=>{if(le&&i.length>0&&!l){const fe=i.find(ue=>ue.id===le);fe?w(fe):W.error("Meeting not found."),_e(null)}},[le,i,l]);const ve=async()=>{if(s&&r){const fe=sessionStorage.getItem("meetingDetailData");if(fe)try{const ue=JSON.parse(fe);if(ue.id===parseInt(s)){w(ue),sessionStorage.removeItem("meetingDetailData");return}}catch(ue){console.error(ue)}}c(!0);try{const fe=await se.get("/meetings/admin/fetch-all"),H=[...Array.isArray(fe.data)?fe.data:[]].sort((K,we)=>{const Me=K?.created_at?new Date(K.created_at).getTime():0;return(we?.created_at?new Date(we.created_at).getTime():0)-Me});if(o(H),s&&!j){const K=H.find(we=>we.id===parseInt(s));K&&w(K)}}catch{W.error("Failed to load meetings.")}finally{c(!1)}},ne=async()=>{try{const fe=await se.get("/users/all");d(Array.isArray(fe.data)?fe.data:[])}catch(fe){console.error(fe)}};h.useEffect(()=>{ve(),ne()},[]);const Se=fe=>p(fe.target.value),de=h.useMemo(()=>{if(!he?.id)return[];const fe=he?.role?.toUpperCase();return fe==="GROUP MANAGER"||fe==="CEO"||fe==="ADMIN"?i:i.filter(ue=>ue.created_by===he.id||ue.meet_assign_to?.id===he.id)},[i,he?.id,he?.role]),pe=["GROUP MANAGER","MANAGER","SALES"].includes(he?.role?.toUpperCase())?de.filter(fe=>!(fe.status?.toUpperCase()==="INACTIVE")):de,ze=h.useMemo(()=>{const fe=f.trim().toLowerCase(),ue=x.trim().toUpperCase();return pe.filter(H=>{const K=[H?.activity,H?.description,H?.relatedTo,H?.assignedTo],we=fe===""||K.some(ce=>ce&&ce.toString().toLowerCase().includes(fe)),Me=ue==="FILTER BY STATUS"||qb(H.status||"PENDING")===ue;return we&&Me})},[pe,f,x]),Pe=h.useMemo(()=>{const fe=(S-1)*E;return ze.slice(fe,fe+E)},[ze,S,E]),We=()=>{v(!1),L($T),F(!1),D(null),G(!1)},tt=()=>{L($T),F(!1),D(null),v(!0)},lt=fe=>{let ue="";if(fe.meet_assign_to?.id)ue=String(fe.meet_assign_to.id);else if(fe.assignedTo){const Xe=u.find(Ze=>`${Ze.first_name} ${Ze.last_name}`===fe.assignedTo);ue=Xe?String(Xe.id):""}const H=Xe=>{if(!Xe)return"";try{const Ze=new Date(Xe),mt=Ze.getTimezoneOffset()*6e4;return new Date(Ze.getTime()-mt).toISOString().slice(0,16)}catch{return""}};let K="Lead",we="",Me="Contact",ce="";if(fe.lead)K="Lead",we=String(fe.lead.id);else if(fe.account)K="Account",we=String(fe.account.id),fe.contact?(Me="Contact",ce=String(fe.contact.id)):fe.deal?(Me="Deal",ce=String(fe.deal.id)):fe.quote&&(Me="Quote",ce=String(fe.quote.id));else if(fe.relatedType||fe.related_type){const Xe=fe.relatedType||fe.related_type,Ze=fe.related_to||fe.relatedToId;Xe==="Lead"?(K="Lead",we=String(Ze)):(K="Account",we=fe.account_id?String(fe.account_id):"")}const oe={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},De=qb(fe.status),$e=oe[De]||"Planned";L({subject:fe.subject||fe.activity||"",location:fe.location||"",startTime:H(fe.start_time||fe.startTime),endTime:H(fe.end_time||fe.endTime),status:$e,notes:fe.description||fe.notes||"",assignedTo:ue,relatedType1:K,relatedTo1:we,relatedType2:Me,relatedTo2:ce}),F(!0),D(fe.id),w(null),v(!0)},Ie=fe=>{if(!fe.subject?.trim())return W.error("Subject is required.");if(!fe.startTime)return W.error("Start time is required.");if(fe.endTime&&!(new Date(fe.endTime)-new Date(fe.startTime)>0))return W.error("End time must be after start time.");fe.relatedType1,fe.relatedTo1,fe.relatedType1==="Account"&&fe.relatedType2&&fe.relatedTo2&&(fe.relatedType2,fe.relatedTo2);const ue={...fe,assignedTo:parseInt(fe.assignedTo),relatedTo1:parseInt(fe.relatedTo1),relatedTo2:parseInt(fe.relatedTo2)},H=M&&$?"update":"create";V({title:H==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${H} "${ue.subject}"?`,confirmLabel:H==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:H,payload:ue,targetId:$,name:ue.subject}})},rt=async()=>{if(!U?.action)return;const{type:fe,payload:ue,targetId:H,name:K,targetIds:we,count:Me}=U.action;Y(!0);try{if(fe==="create")G(!0),await se.post("/meetings/create",ue),W.success(`Meeting "${K}" created.`),We(),await ve();else if(fe==="update")G(!0),await se.put(`/meetings/${H}`,ue),W.success(`Meeting "${K}" updated.`),We(),await ve();else if(fe==="delete")await se.put("/meetings/bulk-archive",{meeting_ids:[H]}),W.success(`Meeting "${K}" archived successfully.`),j?.id===H&&w(null),await ve();else if(fe==="bulk-delete"){if(!we||we.length===0)throw new Error("Missing meeting identifiers for bulk archiving.");Ne(!0),await se.put("/meetings/bulk-archive",{meeting_ids:we}),W.success(`${Me} meeting${Me!==1?"s":""} archived successfully.`),ae(new Set),await ve(),j&&te.has(j.id)&&w(null)}}catch(ce){const oe=fe==="create"?"Failed to create meeting. Please review the details and try again.":fe==="update"?"Failed to update meeting. Please review the details and try again.":fe==="bulk-delete"?"Failed to archive meetings. Please try again.":"Failed to archive meeting. Please try again.",De=ce?.response?.data?.detail||oe;W.error(De),console.error(ce)}finally{(fe==="create"||fe==="update")&&G(!1),fe==="bulk-delete"&&Ne(!1),Y(!1),V(null)}},He=fe=>{V({title:"Archive Meeting",message:`Are you sure you want to archive "${fe.subject||fe.activity}"? You can restore it later if needed.`,confirmLabel:"Archive",variant:"archive",action:{type:"delete",targetId:fe.id,name:fe.subject||fe.activity}})},Ke=fe=>{const ue=Pe.find(H=>H.id===fe);ue&&ue.created_by===he?.id&&ae(H=>{const K=new Set(H);return K.has(fe)?K.delete(fe):K.add(fe),K})},Je=()=>{const fe=Pe.filter(ue=>ue.created_by===he?.id);te.size===fe.length?ae(new Set):ae(new Set(fe.map(ue=>ue.id)))},Oe=()=>{if(te.size===0)return;const fe=te.size;V({title:"Archive Meetings",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:fe})," meeting",fe!==1?"s":"","? You can restore them later if needed."]}),confirmLabel:`Archive ${fe} Meeting${fe!==1?"s":""}`,cancelLabel:"Cancel",variant:"archive",action:{type:"bulk-delete",targetIds:Array.from(te),count:fe}})},Ce=async(fe,ue)=>{try{await se.put(`/meetings/${fe}`,{status:ue}),W.success("Status updated"),ve(),w(null)}catch{W.error("Failed to update status")}};return r&&s?j?n.jsx(bd,{meeting:j,onClose:()=>{w(null),e("/admin/dashboard")},onEdit:lt,onDelete:He,onStatusUpdate:Ce,currentUser:he,isSalesView:!0}):n.jsx(Wt,{message:"Loading meeting..."}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[l&&n.jsx(Wt,{message:"Loading meetings..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[n.jsx(Pt,{className:"mr-2 text-blue-600"})," Meetings"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:tt,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[n.jsx(xn,{className:"mr-2"})," Add Meeting"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[n.jsx(Vt,{className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search meetings",value:f,onChange:Se,className:"w-full outline-none"})]}),n.jsxs("select",{value:x,onChange:fe=>y(fe.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[n.jsx("option",{children:"Filter by Status"}),n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:te.size===Pe.filter(fe=>fe.created_by===he?.id).length&&Pe.filter(fe=>fe.created_by===he?.id).length>0,onChange:Je,className:"w-4 h-4 cursor-pointer rounded border-gray-300"})}),n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Start Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 w-12",children:te.size>0&&n.jsx("button",{onClick:Oe,className:"text-orange-500 hover:text-orange-700 transition",title:"Archive selected meetings",disabled:ye,children:n.jsx(Zt,{size:18})})})]})}),n.jsx("tbody",{children:Pe.length>0?Pe.map(fe=>n.jsxs("tr",{onClick:()=>w(fe),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4",onClick:ue=>ue.stopPropagation(),children:he?.id===fe.created_by&&n.jsx("input",{type:"checkbox",checked:te.has(fe.id),onChange:ue=>{ue.stopPropagation(),Ke(fe.id)},className:"w-4 h-4 cursor-pointer rounded border-gray-300"})}),n.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:fe.subject}),n.jsxs("td",{className:"py-3 px-4",children:[fe.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:fe.lead.title}),fe.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:fe.account.name}),fe.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[fe.contact.first_name," ",fe.contact.last_name]}),fe.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:fe.deal.name}),fe.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:eVe(fe.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4",children:tVe(fe.start_time)}),n.jsxs("td",{className:"py-3 px-4",children:[fe.meet_assign_to.first_name," ",fe.meet_assign_to.last_name]}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${nVe(qb(fe.status))}`,children:qb(fe.status).replace("_"," ")})})]},fe.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),n.jsx(rn,{totalItems:ze.length,pageSize:E,currentPage:S,onPrev:()=>_(fe=>Math.max(1,fe-1)),onNext:()=>_(fe=>fe+1),onPageSizeChange:T,label:"meetings"}),N&&n.jsx(y1,{onClose:We,formData:A,setFormData:L,isEditing:M,onSubmit:Ie,isSubmitting:q||Z,users:u}),j&&n.jsx(bd,{meeting:j,onClose:()=>w(null),onEdit:lt,onDelete:He,onStatusUpdate:Ce,currentUser:he,isSalesView:!0}),U&&n.jsx(sVe,{open:!0,title:U.title,message:U.message,confirmLabel:U.confirmLabel,variant:U.variant,onConfirm:rt,onCancel:()=>V(null),loading:Z})]})};function sVe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":i==="archive"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{onClick:c,disabled:o,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),n.jsx("button",{onClick:l,disabled:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${u}`,children:o?"...":s})]})]})})}const rVe=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"}],iVe=e=>e?String(e).toUpperCase():"",gf=e=>{const t=iVe(e);return t==="PLANNED"||t==="PENDING"?"PLANNED":t==="HELD"||t==="COMPLETED"?"HELD":t==="NOT HELD"||t==="NOT_HELD"||t==="CANCELLED"?"NOT_HELD":"PLANNED"},RT=e=>{const t=gf(e);return t==="PLANNED"?"PLANNED":t==="HELD"?"HELD":t==="NOT_HELD"?"NOT HELD":"--"},dH=e=>{switch(gf(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},uH=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function oVe(){const[e,t]=h.useState(!1),[a,s]=h.useState(null),[r,i]=h.useState(null),[o,l]=h.useState(null),[c,u]=h.useState(null),[d,f]=h.useState([]),[p,x]=h.useState(null),[y,N]=h.useState(!1),[v,j]=h.useState(null),[w,S]=h.useState(!1),[_,E]=h.useState(!1),[T,A]=h.useState("PLANNED"),[L,M]=h.useState(!1),[F,$]=h.useState(!1),[D,q]=h.useState(null),[G,U]=h.useState(new Set),[V,Z]=h.useState(!1),{user:Y}=qt(),{comments:le,addComment:_e,refresh:te}=ka({relatedType:"call",relatedId:a?.id});h.useEffect(()=>{a?.id&&te()},[a?.id,te]),Us();const ae=jt(),ye=Jt(),Ne=O=>{if(!O)return"";const z=String(O).split("-");return z.length===3?`${z[0]}-${z[2]}`:String(O)},ve={subject:"",call_time:(()=>{const O=new Date,z=O.getFullYear(),I=String(O.getMonth()+1).padStart(2,"0"),Q=String(O.getDate()).padStart(2,"0");return`${z}-${I}-${Q}T08:00`})(),duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[ne,Se]=h.useState(ve);h.useEffect(()=>{const O=ye.state,z=O?.callID;if(z&&!O?.openCallModal){q(z),ae(ye.pathname,{replace:!0,state:{}});return}!O?.openCallModal||!O?.initialCallData||O.initialCallData.relatedType1==="Lead"&&Array.isArray(o)&&o.length===0||O.initialCallData.relatedType1==="Account"&&(!Array.isArray(o)||o.length===0)||(t(!0),Se(I=>({...I,...O.initialCallData,relatedTo1:O.initialCallData.relatedTo1?String(O.initialCallData.relatedTo1):"",relatedTo2:O.initialCallData.relatedTo2?String(O.initialCallData.relatedTo2):""})),ae(ye.pathname,{replace:!0,state:{}}))},[ye.state,o]),h.useEffect(()=>{if(D&&d.length>0&&!F){const O=d.find(z=>z.id===D);O?s(O):W.error("Call not found."),q(null)}},[D,d,F]);const de=async()=>{try{$(!0);const O=await se.get("/calls/admin/fetch-all"),I=[...Array.isArray(O.data)?O.data:[]].sort((Q,ge)=>{const re=Q?.created_at?new Date(Q.created_at):0;return(ge?.created_at?new Date(ge.created_at):0)-re});f(I)}catch(O){console.error("Error fetching calls:",O),W.error("Failed to load calls")}finally{$(!1)}},ke=async()=>{try{const O=await se.get("/users/all");x(O.data)}catch(O){console.error("Error fetching users: ",O)}};h.useEffect(()=>{ke(),de()},[]);const Te=[],[pe,ze]=h.useState(""),[Pe,We]=h.useState("Filter by Status"),[tt,lt]=h.useState("Filter by Users"),[Ie,rt]=h.useState(1),[He,Ke]=h.useState(10),Oe=["GROUP MANAGER","MANAGER","SALES"].includes(Y?.role?.toUpperCase())?d.filter(O=>O.status!=="INACTIVE"):d,Ce=Math.max(1,Math.ceil(Oe.length/He)||1);h.useEffect(()=>{rt(1)},[pe,Pe,He]),h.useEffect(()=>{rt(O=>{const z=Math.max(1,Math.ceil(Oe.length/He)||1);return O>z?z:O})},[Oe.length,He]);const fe=h.useMemo(()=>{const O=(Ie-1)*He;return Oe.slice(O,O+He)},[Oe,Ie,He]),ue=()=>rt(O=>Math.max(O-1,1)),H=()=>rt(O=>Math.min(O+1,Ce)),K=d.length,we=d.filter(O=>gf(O.status)==="PLANNED").length,Me=d.filter(O=>gf(O.status)==="HELD").length,ce=d.filter(O=>gf(O.status)==="NOT_HELD").length,oe=[{title:"Total",value:K,icon:zs,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:we,icon:Vs,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:Me,icon:aa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:ce,icon:Fs,color:"text-gray-600",bgColor:"bg-gray-100"}],[De,$e]=h.useState("Overview"),Xe=O=>{const{name:z,value:I}=O.target;Se(Q=>{const ge={...Q,[z]:I};return z==="relatedType1"&&(ge.relatedTo1="",I==="Lead"?(ge.relatedType2=null,ge.relatedTo2=null,u([])):I==="Account"&&(ge.relatedType2="Contact")),z==="relatedType2"&&(ge.relatedTo2=""),ge})};h.useEffect(()=>{const O=async()=>{try{l([]);let z;ne.relatedType1==="Lead"?z=await se.get("/leads/admin/getLeads"):ne.relatedType1==="Account"&&(z=await se.get("/accounts/admin/fetch-all"));let I=[];if(z&&Array.isArray(z.data)?I=z.data:I=[],y&&ne.relatedTo1)try{let Q;ne.relatedType1==="Lead"?Q=await se.get(`/leads/get/${ne.relatedTo1}`):ne.relatedType1==="Account"&&(Q=await se.get(`/accounts/get/${ne.relatedTo1}`)),Q&&Q.data&&(I.some(re=>String(re.id)===String(ne.relatedTo1))||(I=[Q.data,...I]))}catch(Q){console.error("Error fetching specific related item:",Q)}l(I)}catch(z){console.error("Error fetching data:",z),l([])}};ne.relatedType1&&O()},[ne.relatedType1,y,ne.relatedTo1]),h.useEffect(()=>{const O=async()=>{try{u([]);let z;if(ne.relatedType1==="Account"&&ne.relatedTo1)ne.relatedType2==="Contact"?z=await se.get(`/contacts/from-acc/${ne.relatedTo1}`):ne.relatedType2==="Deal"?z=await se.get(`/deals/from-acc/${ne.relatedTo1}`):ne.relatedType2==="Quote"&&(z=await se.get(`/quotes/from-acc/${ne.relatedTo1}`));else{u([]);return}let I=[];if(z&&Array.isArray(z.data)?I=z.data:I=[],y&&ne.relatedTo2)try{let Q;ne.relatedType2==="Contact"?Q=await se.get(`/contacts/get/${ne.relatedTo2}`):ne.relatedType2==="Deal"?Q=await se.get(`/deals/get/${ne.relatedTo2}`):ne.relatedType2==="Quote"&&(Q=await se.get(`/quotes/get/${ne.relatedTo2}`)),Q&&Q.data&&(I.some(re=>String(re.id)===String(ne.relatedTo2))||(I=[Q.data,...I]))}catch(Q){console.error("Error fetching specific related item:",Q)}u(I)}catch(z){console.error("Error fetching data:",z),u([])}};ne.relatedType2&&O()},[ne.relatedType2,ne.relatedTo1,ne.relatedType1,y,ne.relatedTo2]);const[Ze,mt]=h.useState(!1),nt=O=>{O.preventDefault(),mt(!0);const z=ne.subject;if(!z||z.trim()===""){W.error("Subject is required.");return}if(!ne.relatedTo1){W.error(`Please select a ${ne.relatedType1||"Lead/Account"}.`);return}if(!ne.assigned_to){W.error("Subject is required.");return}const Q={...ne,duration_minutes:ne.duration_minutes?parseInt(ne.duration_minutes,10):null,relatedTo1:ne.relatedTo1?parseInt(ne.relatedTo1,10):null,relatedTo2:ne.relatedType1==="Lead"?null:ne.relatedTo2?parseInt(ne.relatedTo2,10):null,relatedType2:ne.relatedType1==="Lead"?null:ne.relatedType2,assigned_to:ne.assigned_to?parseInt(ne.assigned_to,10):null},ge=y&&v?"update":"create",re=(ne.subject||"").trim()||"Untitled Call";i({title:ge==="create"?"Confirm New Call":"Confirm Update",message:ge==="create"?`Create "${re}"?`:`Save changes to "${re}"?`,confirmLabel:ge==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:ge,payload:Q,targetId:v||null,name:re}})},Nt=O=>s(O),wt=()=>{t(!1),N(!1),j(null)},Tt=async()=>{if(!r?.action){i(null);return}const{action:O}=r,{type:z,payload:I,targetId:Q,name:ge}=O;E(!0);try{if(z==="create")S(!0),await se.post("/calls/create",I),W.success(`Call "${ge}" created successfully.`),t(!1),Se(ve),N(!1),j(null),await de();else if(z==="update"){if(!Q)throw new Error("Missing call identifier for update.");S(!0),await se.put(`/calls/${Q}`,I),W.success(`Call "${ge}" updated successfully.`),t(!1),Se(ve),N(!1),j(null),await de()}else if(z==="delete"){if(!Q)throw new Error("Missing call identifier for archiving.");await se.put(`/calls/${Q}`,{status:"INACTIVE"}),W.success(`Call "${ge}" archived successfully.`),a?.id===Q&&s(null),await de()}else if(z==="bulk-delete"){const{targetIds:re,count:Ee}=O;if(!re||re.length===0)throw new Error("Missing call identifiers for bulk archiving.");Z(!0),await se.put("/calls/bulk-archive",{call_ids:re}),W.success(`${Ee} call${Ee!==1?"s":""} archived successfully.`),U(new Set),await de(),a&&G.has(a.id)&&s(null)}}catch(re){const Ee=z==="create"?"Failed to create call. Please review the details and try again.":z==="update"?"Failed to update call. Please review the details and try again.":z==="bulk-delete"?"Failed to archive calls. Please try again.":"Failed to archive call. Please try again.",Qe=re?.response?.data?.detail||Ee;W.error(Qe)}finally{(z==="create"||z==="update")&&S(!1),z==="bulk-delete"&&Z(!1),E(!1),i(null)}},Re=()=>{_||i(null)},me=O=>{const z=fe.find(I=>I.id===O);z&&z.call_creator?.id===Y?.id&&U(I=>{const Q=new Set(I);return Q.has(O)?Q.delete(O):Q.add(O),Q})},ie=()=>{const O=fe.filter(z=>z.call_creator?.id===Y?.id);G.size===O.length?U(new Set):U(new Set(O.map(z=>z.id)))},Fe=()=>{if(G.size===0)return;const O=G.size;i({title:"Archive Calls",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:O})," call",O!==1?"s":"","? You can restore them later if needed."]}),confirmLabel:`Archive ${O} Call${O!==1?"s":""}`,cancelLabel:"Cancel",variant:"archive",action:{type:"bulk-delete",targetIds:Array.from(G),count:O}})},Le=async()=>{if(a?.id)try{M(!0),await se.put(`/calls/${a.id}`,{status:T}),W.success(`Status updated to ${RT(T)}`),f(O=>Array.isArray(O)?O.map(z=>z.id===a.id?{...z,status:T}:z):O),s(null)}catch(O){const z=O.response?.data?.detail||"Failed to update status.";W.error(z)}finally{M(!1)}};h.useEffect(()=>{a&&A(gf(a.status))},[a]);const be=a?n.jsxs("div",{id:"callModalBackdrop",onClick:O=>O.target.id==="callModalBackdrop"&&s(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[F&&n.jsx(Wt,{message:"Loading call details..."}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),n.jsx("button",{onClick:()=>s(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:n.jsx(Xn,{size:25})})]}),n.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:a.subject}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${dH(a.status)}`,children:RT(a.status)})]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:Y?.id===a.call_creator?.id&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const O=re=>{if(!re)return"";const Ee=new Date(re),Qe=Ee.getFullYear(),gt=String(Ee.getMonth()+1).padStart(2,"0"),Ct=String(Ee.getDate()).padStart(2,"0"),kt=String(Ee.getHours()).padStart(2,"0"),Dt=String(Ee.getMinutes()).padStart(2,"0");return`${Qe}-${gt}-${Ct}T${kt}:${Dt}`},z=a.lead?"Lead":a.account?"Account":"Lead",I=a.lead?a.lead.id:a.account?a.account.id:null,Q=z==="Lead"?null:a.contact?"Contact":a.deal?"Deal":a.quote?"Quote":"Contact",ge=z==="Lead"?null:a.contact?a.contact.id:a.deal?a.deal.id:a.quote?a.quote.id:null;Se({subject:a.subject||"",call_time:O(a.call_time),duration_minutes:a.duration_minutes?String(a.duration_minutes):"",direction:a.direction||"Outgoing",status:a.status||"Planned",notes:a.notes||"",relatedType1:z,relatedType2:Q,relatedTo1:I?String(I):"",relatedTo2:ge?String(ge):"",assigned_to:a.call_assign_to?.id?String(a.call_assign_to.id):""}),N(!0),j(a.id),s(null),t(!0)},children:[n.jsx(ga,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>{const O=a.subject||"this call";i({title:"Archive Call",message:`Are you sure you want to archive "${O}"? You can restore it later if needed.`,confirmLabel:"Archive Call",cancelLabel:"Cancel",variant:"archive",action:{type:"delete",targetId:a.id,name:O}})},children:[n.jsx(Zt,{className:"mr-2"}),"Archive"]})]})})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(O=>n.jsx("button",{onClick:()=>$e(O),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${De===O?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:O},O))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[De==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsx(po,{label:"Call Time",value:uH(a.call_time)}),n.jsx(po,{label:"Duration",value:a.duration_minutes?`${a.duration_minutes} min`:null}),n.jsx(po,{label:"Direction",value:a.direction||"--"}),n.jsx(po,{label:"Assigned To",value:`${a.call_assign_to.first_name} ${a.call_assign_to.last_name}`}),a.lead&&n.jsx(po,{label:"Lead",value:a.lead.title}),a.account&&n.jsx(po,{label:"Account",value:a.account.name}),a.contact&&n.jsx(po,{label:"Contact",value:`${a.contact.first_name} ${a.contact.last_name}`}),a.deal&&n.jsx(po,{label:"Deal",value:a.deal.name}),a.quote&&n.jsx(po,{label:"Quote",value:Ne(a.quote.quote_id)}),n.jsx(po,{label:"Created At",value:uH(a.created_at)})]})}),De==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Call Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:a.notes||"No notes available."})]}),n.jsx(Ta,{comments:le,onAddComment:_e})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:T,onChange:O=>A(O.target.value),children:[n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),n.jsx("button",{onClick:Le,disabled:L,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:L?"Updating...":"Update"})]})]})]})]})]}):null,ee=e?n.jsx("div",{id:"modalBackdrop",onClick:O=>O.target.id==="modalBackdrop"&&wt(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[n.jsx("button",{onClick:()=>{wt(),mt(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:y?"Edit Call":"Add New Call"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:nt,noValidate:!0,children:[n.jsx(cVe,{label:"Subject",className:"md:col-span-2",name:"subject",value:ne.subject,onChange:Xe,isSubmitted:Ze,required:!0}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("div",{className:"relative w-25",children:[n.jsxs("select",{name:"relatedType1",onChange:Xe,value:ne.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:w,children:[n.jsx("option",{value:"Lead",children:"Lead"}),n.jsx("option",{value:"Account",children:"Account"})]}),n.jsx("span",{className:"absolute left-10 md:pl-6 pl-6 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),n.jsx(zT,{items:Array.isArray(o)?o:[],value:ne.relatedTo1??"",placeholder:`Search ${ne.relatedType1||"here"}...`,getLabel:O=>ne.relatedType1==="Lead"?O.title:O.name??"",onChange:O=>Se(z=>({...z,relatedTo1:O})),required:!0,isSubmitted:Ze,disabled:w})]}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("select",{name:"relatedType2",onChange:Xe,value:ne.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:ne.relatedType1==="Lead"||w,children:[n.jsx("option",{value:"Contact",children:"Contact"}),n.jsx("option",{value:"Deal",children:"Deal"}),n.jsx("option",{value:"Quote",children:"Quote"})]}),n.jsx(zT,{disabled:ne.relatedType1==="Lead"||w,items:Array.isArray(c)?c:[],value:ne.relatedTo2??"",placeholder:ne.relatedType1==="Lead"?"":Array.isArray(c)&&c.length>0?`Search ${ne.relatedType2||"Contact"}...`:`No ${ne.relatedType2||""} data found`,getLabel:O=>ne.relatedType2==="Contact"?`${O.first_name??""} ${O.last_name??""}`.trim():ne.relatedType2==="Quote"?Ne(O.quote_id)??"":O.name??"",onChange:O=>Se(z=>({...z,relatedTo2:O}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),n.jsx("input",{type:"datetime-local",value:ne.call_time,onChange:Xe,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),n.jsxs("div",{className:"w-full",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),n.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[n.jsx("input",{type:"tel",value:ne.duration_minutes,onChange:Xe,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),n.jsx("p",{children:"minutes"})]})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),n.jsx(zT,{items:Array.isArray(p)?p:[],value:ne.assigned_to??"",placeholder:"Search an account...",getLabel:O=>`${O.first_name} ${O.last_name}`,onChange:O=>Se(z=>({...z,assigned_to:O})),required:!0,isSubmitted:Ze})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),n.jsxs("select",{name:"direction",onChange:Xe,value:ne.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Incoming",children:"Incoming"}),n.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),n.jsxs("select",{name:"status",onChange:Xe,value:ne.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Planned",children:"Planned"}),n.jsx("option",{value:"Held",children:"Held"}),n.jsx("option",{value:"Not held",children:"Not held"})]})]}),n.jsx(dVe,{className:"col-span-2",label:"Notes",value:ne.notes,onChange:Xe,name:"notes"}),n.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{wt(),mt(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:w,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:w?"Saving...":y?"Update Call":"Save Call"})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(zs,{className:"mr-2 text-blue-600"})," Calls"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{Se(ve),N(!1),j(null),t(!0),mt(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(xn,{className:"mr-2"})," Add Call"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:oe.map(O=>n.jsx(lVe,{...O},O.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[n.jsx(Vt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",defaultValue:pe})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{defaultValue:Pe,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),rVe.map(O=>n.jsx("option",{value:O.value,children:O.label},O.value))]}),n.jsxs("select",{defaultValue:tt,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),Te.map(O=>n.jsx("option",{value:O.name,children:O.name},O.id))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:G.size===fe.filter(O=>O.call_creator?.id===Y?.id).length&&fe.filter(O=>O.call_creator?.id===Y?.id).length>0,onChange:ie,className:"w-4 h-4 cursor-pointer rounded border-gray-300"})}),n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Call Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 w-12",children:G.size>0&&n.jsx("button",{onClick:Fe,className:"text-orange-500 hover:text-orange-700 transition",title:"Archive selected calls",disabled:V,children:n.jsx(Zt,{size:18})})})]})}),n.jsx("tbody",{children:F?n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"py-10",children:n.jsx(Wt,{message:"Loading calls..."})})}):fe.length>0?fe.map(O=>n.jsxs("tr",{onClick:()=>Nt(O),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4",onClick:z=>z.stopPropagation(),children:Y?.id===O.call_creator?.id&&n.jsx("input",{type:"checkbox",checked:G.has(O.id),onChange:z=>{z.stopPropagation(),me(O.id)},className:"w-4 h-4 cursor-pointer rounded border-gray-300"})}),n.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:O.subject||"--"}),n.jsxs("td",{className:"py-3 px-4",children:[O.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:O.lead.title}),O.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:O.account.name}),O.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[O.contact.first_name," ",O.contact.last_name]}),O.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:O.deal.name}),O.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Ne(O.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:O.call_time?new Date(O.call_time).toLocaleString():"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:O?.call_assign_to?`${O.call_assign_to.first_name} ${O.call_assign_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${dH(O.status)}`,children:RT(O.status)})})]},O.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),n.jsx(rn,{totalItems:Oe.length,pageSize:He,currentPage:Ie,onPrev:ue,onNext:H,onPageSizeChange:Ke,label:"calls"})]}),be,ee,r&&n.jsx(uVe,{open:!0,title:r.title,message:r.message,confirmLabel:r.confirmLabel,cancelLabel:r.cancelLabel,variant:r.variant,onConfirm:Tt,onCancel:Re,loading:_})]})}function lVe({icon:e,title:t,value:a,color:s,bgColor:r}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:22})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function cVe({label:e,name:t,value:a,onChange:s,placeholder:r="",type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:u=""}){const d=c&&o&&!a;return n.jsxs("div",{className:u,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100
          ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
        `})]})}function dVe(e){return n.jsxs("div",{className:e.className,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),n.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function po({label:e,value:t}){return n.jsxs("p",{children:[n.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",n.jsx("br",{}),n.jsx("span",{className:"break-words",children:t||"--"})]})}function uVe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":i==="archive"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function zT({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,required:l=!1,isSubmitted:c=!1}){const[u,d]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),y=e.find(w=>String(w.id)===String(t)),N=y?s(y):"",v=l&&c&&!t,j=h.useMemo(()=>{const w=f.trim().toLowerCase();return(w?e.filter(_=>(s(_)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&d(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{u||p("")},[u]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:u?f:N,placeholder:r,onFocus:()=>!i&&d(!0),onChange:w=>{p(w.target.value),u||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${v?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),u&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:j.length>0?j.map(w=>{const S=String(w.id),_=s(w),E=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${E?"bg-blue-50":""}`,children:_||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function mVe(){h.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,t]=h.useState(null),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Actions"),[o,l]=h.useState(1),[c,u]=h.useState(10),d=async()=>{try{const w=await se.get("/logs/read-all");t(w.data)}catch(w){console.error("Error fetching audit logs:",w)}};h.useEffect(()=>{d()},[]);const f=h.useMemo(()=>{if(!Array.isArray(e))return[];const w=a.trim().toLowerCase(),S=r?.toUpperCase?.()||"ALL";return e.filter(E=>{const T=E.timestamp?new Date(E.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",A=`${E.entity_type||""} ${E.entity_name||E.entity_details?.name||E.entity_details?.title||E.entity_id||""}`,L=`${E.logger?.first_name||""} ${E.logger?.last_name||""}`,M=[T,L,E.action,E.entity_type,A,E.description],F=w===""||M.some(D=>D==null?!1:D.toString().toLowerCase().includes(w)),$=S==="FILTER BY ACTIONS"||(E.action||"").toUpperCase()===S;return F&&$}).sort((E,T)=>{const A=E.timestamp?new Date(E.timestamp).getTime():0;return(T.timestamp?new Date(T.timestamp).getTime():0)-A})},[e,a,r]),p=Math.max(1,Math.ceil(f.length/c)||1);h.useEffect(()=>{l(1)},[a,c]),h.useEffect(()=>{l(w=>{const S=Math.max(1,Math.ceil(f.length/c)||1);return w>S?S:w})},[f.length,c]);const x=h.useMemo(()=>{const w=(o-1)*c;return f.slice(w,w+c)},[f,o,c]);f.length===0||(o-1)*c+1,Math.min(o*c,f.length);const y=()=>l(w=>Math.max(w-1,1)),N=()=>l(w=>Math.min(w+1,p)),v=()=>{if(!f.length){Qx.error("No logs to export!");return}const w=["Timestamp","User","Action","Resource","Details"],S=f.map(L=>[new Date(L.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${L.logger?.first_name||""} ${L.logger?.last_name||""}`.trim(),L.action,`${L.entity_type}: ${L.entity_id}`,L.description||""]),_=[w.join(","),...S.map(L=>L.map(M=>`"${String(M).replace(/"/g,'""')}"`).join(","))].join(`
`),E=new Blob([_],{type:"text/csv;charset=utf-8;"}),T=URL.createObjectURL(E),A=document.createElement("a");A.href=T,A.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(A),A.click(),document.body.removeChild(A),URL.revokeObjectURL(T)},j=w=>{switch((w||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&n.jsx(Wt,{message:"Loading audit logs..."}),n.jsx(Yx,{toastOptions:{duration:1e3}}),n.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[n.jsx(Pt,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),n.jsxs("p",{className:"text-sm text-blue-700",children:[n.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ks,{className:"text-blue-600",size:20}),n.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:v,children:[n.jsx(qo,{className:"mr-2"}),"Export Logs"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[n.jsx(Vt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search audit logs",value:a,onChange:w=>s(w.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:r,onChange:w=>i(w.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),n.jsx("option",{value:"CREATE",children:"CREATE"}),n.jsx("option",{value:"DELETE",children:"DELETE"}),n.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),n.jsx("th",{className:"py-3 px-4",children:"User"}),n.jsx("th",{className:"py-3 px-4",children:"Action"}),n.jsx("th",{className:"py-3 px-4",children:"Resource"}),n.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),n.jsx("tbody",{children:Array.isArray(f)&&f.length>0?x.map((w,S)=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(w.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.name}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${j(w.action)}`,children:w.action})}),n.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[w.entity_type,": ",w.entity_id]}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.description})]},S)):n.jsx("tr",{children:n.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:f.length,pageSize:c,currentPage:o,onPrev:y,onNext:N,onPageSizeChange:u,label:"logs"})]})}const S1=[{value:"Manager",label:"Manager"},{value:"Sales",label:"Sales"}],Ig={firstName:"",lastName:"",email:"",password:"",role:""},fVe={CEO:"bg-purple-100 text-purple-700",ADMIN:"bg-purple-100 text-purple-700",GROUP_MANAGER:"bg-indigo-100 text-indigo-700",MANAGER:"bg-blue-100 text-blue-700",MARKETING:"bg-yellow-100 text-yellow-700",SALES:"bg-green-100 text-green-700"},_o=e=>e?e.toString().trim().replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/\s+/g,"_").toUpperCase():"",hVe=e=>{const t=_o(e),a=S1.find(s=>_o(s.value)===t);return a?a.value:e||""},lL=e=>{const t=_o(e),a=S1.find(s=>_o(s.value)===t);return a?a.label:typeof e=="string"?e.toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()):"--"},mH=e=>{if(!e)return"--";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",","")},FT=(e,{size:t="sm"}={})=>{const a=_o(e),s=fVe[a]||"bg-gray-100 text-gray-700",r=t==="lg"?"px-3 py-1 text-sm":t==="md"?"px-2.5 py-1 text-sm":"px-2 py-1 text-xs";return n.jsx("span",{className:`${r} font-semibold rounded-md inline-flex items-center justify-center ${s}`,children:lL(e)})},gVe=(e,t)=>{const a=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${a}${s}`.toUpperCase()||"U"},fH=e=>[...e].sort((t,a)=>{const s=t.created_at?new Date(t.created_at).getTime():0;return(a.created_at?new Date(a.created_at).getTime():0)-s});function pVe(){const{user:e,loading:t}=qt(),[a,s]=h.useState([]),[r,i]=h.useState(!1),[o,l]=h.useState(""),[c,u]=h.useState(""),[d,f]=h.useState(null),[p,x]=h.useState(!1),[y,N]=h.useState(!1),[v,j]=h.useState(null),[w,S]=h.useState(Ig),[_,E]=h.useState(!1),[T,A]=h.useState(null),[L,M]=h.useState(!1),[F,$]=h.useState(1),[D,q]=h.useState(10),[G,U]=h.useState("Overview"),[V,Z]=h.useState(""),[Y,le]=h.useState(!1),_e=_o(e?.role);console.log("meow",e);const te=["ADMIN","CEO","GROUP_MANAGER"].includes(_e),ae=!t&&te,ye=h.useMemo(()=>{const ue=S1.filter(H=>_o(H.value)!=="CEO");return[{label:"Filter by Roles",value:""},{label:"CEO",value:"CEO"},...ue]},[]),Ne=h.useCallback(ue=>{ue&&(s(H=>H.map(K=>K.id===ue?{...K,highlight:!0}:K)),setTimeout(()=>{s(H=>H.map(K=>K.id===ue?{...K,highlight:!1}:K))},2e3))},[]),he=h.useCallback(async()=>{i(!0);try{const ue=await se.get("/users/all"),H=Array.isArray(ue.data)?ue.data:[],K=fH(H);s(K),f(we=>we&&(K.find(ce=>ce.id===we.id)||null)),console.log(ue.data)}catch(ue){console.error("Error fetching users:",ue);const H=ue.response?.data?.detail||"Failed to load users. Please try again later.";W.error(H)}finally{i(!1)}},[]);h.useEffect(()=>{!t&&!te&&e&&W.error("You are not authorized to access User Management.")},[te,t,e]),h.useEffect(()=>{t||!te||he()},[t,te,he]),h.useEffect(()=>{document.title="Users | Sari-Sari CRM"},[]);const ve=h.useMemo(()=>{const ue=o.trim().toLowerCase(),H=_o(c);return fH(a.filter(K=>{if(!K)return!1;const we=ue===""||[K.first_name,K.last_name,`${K.first_name||""} ${K.last_name||""}`,K.email,lL(K.role)].filter(Boolean).some(ce=>ce.toString().toLowerCase().includes(ue)),Me=H===""||H==="CEO"&&["CEO","ADMIN"].includes(_o(K.role))||_o(K.role)===H;return we&&Me}))},[a,o,c]),ne=Math.max(1,Math.ceil(ve.length/D)||1);h.useEffect(()=>{$(1)},[o,c,D]),h.useEffect(()=>{$(ue=>{const H=Math.max(1,Math.ceil(ve.length/D)||1);return ue>H?H:ue})},[ve.length,D]);const Se=h.useMemo(()=>{const ue=(F-1)*D;return ve.slice(ue,ue+D)},[ve,F,D]);ve.length===0||(F-1)*D+1,Math.min(F*D,ve.length);const de=()=>$(ue=>Math.max(ue-1,1)),ke=()=>$(ue=>Math.min(ue+1,ne)),Te=()=>{S(Ig),N(!1),j(null),x(!0)},pe=ue=>{f(ue),U("Overview"),Z(ue?.is_active?"Active":"Inactive")},ze=ue=>{ue.target.id==="userModalBackdrop"&&!L&&Pe()},Pe=()=>{f(null)},We=(ue,H)=>{S(K=>({...K,[ue]:H}))},tt=()=>{const ue="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let H="";for(let K=0;K<10;K+=1)H+=ue.charAt(Math.floor(Math.random()*ue.length));We("password",H)},lt=()=>{_||L||(x(!1),S(Ig),j(null),N(!1))},Ie=ue=>{S({firstName:ue.first_name||"",lastName:ue.last_name||"",email:ue.email||"",password:"",role:hVe(ue.role)}),N(!0),j(ue.id),x(!0),f(null)},rt=ue=>{A({title:"Delete User",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsxs("span",{className:"font-semibold",children:[ue.first_name," ",ue.last_name]}),"? This action cannot be undone."]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:ue.id,name:`${ue.first_name||""} ${ue.last_name||""}`.trim()||ue.email||"user"}})},He=ue=>{ue.preventDefault();const H=w.firstName.trim(),K=w.lastName.trim(),we=w.email.trim(),Me=w.password.trim(),ce=w.role,oe=!(y&&v);if(!H||!we||!ce){W.warn("Please fill in all required fields.");return}if(oe&&!Me){W.warn("Please fill in all required fields.");return}if(Me&&Me.length<8){W.warn("Password should be at least 8 characters long.");return}const De={first_name:H,last_name:K,email:we,role:ce};(oe||Me)&&(De.password=Me);const $e=`${H} ${K}`.trim(),Xe=oe?"create":"update";A({title:Xe==="create"?"Confirm New User":"Confirm User Update",message:Xe==="create"?n.jsxs("span",{children:["Create user ",n.jsx("span",{className:"font-semibold",children:$e})," with role"," ",n.jsx("span",{className:"font-semibold",children:lL(ce)}),"?"]}):n.jsxs("span",{children:["Save changes for"," ",n.jsx("span",{className:"font-semibold",children:$e||we}),"?"]}),confirmLabel:Xe==="create"?"Create User":"Update User",cancelLabel:"Cancel",variant:"primary",action:{type:Xe,payload:De,targetId:v,name:$e||we}})},Ke=async()=>{if(!T?.action){A(null);return}const{action:ue}=T,{type:H,payload:K,targetId:we,name:Me}=ue;M(!0),(H==="create"||H==="update")&&E(!0);try{if(H==="create"){const oe=(await se.post("/users/createuser",K)).data;await he(),Ne(oe.id),W.success(`User "${Me}" created successfully.`),x(!1),S(Ig),j(null),N(!1)}else if(H==="update"){if(!we)throw new Error("Missing user identifier for update.");const oe=(await se.put(`/users/updateuser/${we}`,K)).data;await he(),f(null),Ne(oe.id),W.success(`User "${Me}" updated successfully.`),x(!1),S(Ig),j(null),N(!1)}else if(H==="delete"){if(!we)throw new Error("Missing user identifier for deletion.");await se.delete(`/users/deleteuser/${we}`),s(ce=>ce.map(oe=>oe.id===we?{...oe,is_active:!1}:oe)),d&&d.id===we&&(f(null),Z("")),W.success(`User "${Me}" deactivated successfully.`)}}catch(ce){console.error("User management error:",ce);const oe=H==="create"?"Failed to create user. Please review the details and try again.":H==="update"?"Failed to update user. Please review the details and try again.":"Failed to delete user. Please try again.",De=ce.response?.data?.detail||oe;W.error(De)}finally{(H==="create"||H==="update")&&E(!1),M(!1),A(null)}},Je=()=>{L||A(null)},Oe=async()=>{if(!d||!V)return;const ue=d.is_active?"Active":"Inactive";if(V===ue)return;const H=V==="Active";le(!0);try{const we=(await se.put(`/users/updateuser/${d.id}`,{is_active:H})).data;s(Me=>Me.map(ce=>ce.id===we.id?we:ce)),f(null),Z(""),W.success(`User status updated to ${V}`)}catch(K){console.error("Failed to update user status:",K);const we=K.response?.data?.detail||"Failed to update user status. Please try again.";W.error(we)}finally{le(!1)}},Ce=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[(r||t||!ae)&&n.jsx(Wt,{}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(iN,{className:"mr-2 text-blue-600"}),"User Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:Te,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(Kn,{className:"mr-2"})," Add User"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Vt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search users",value:o,onChange:ue=>l(ue.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:c,onChange:ue=>u(ue.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:ye.map(ue=>n.jsx("option",{value:ue.value,children:ue.label},ue.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Fullname"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Role"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:3,children:"Loading users..."})}):ve.length===0?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-400",colSpan:4,children:"No users found."})}):Se.map(ue=>n.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${ue.highlight?"bg-green-50":""} ${ue.is_active?"":"opacity-60 bg-gray-50"}`,children:[n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>pe(ue),children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline text-sm",children:[ue.first_name," ",ue.last_name]})}),n.jsx("td",{className:"py-3 px-4 cursor-pointer text-sm",onClick:()=>pe(ue),children:ue.email}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>pe(ue),children:FT(ue.role)}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>pe(ue),children:n.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-md ${ue.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:ue.is_active?"Active":"Inactive"})})]},ue.id))})]})}),n.jsx(rn,{className:"mt-4",totalItems:ve.length,pageSize:D,currentPage:F,onPrev:de,onNext:ke,onPageSizeChange:q,label:"users"})]}),fe=d?n.jsx("div",{id:"userModalBackdrop",onClick:ze,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in p-4 sm:p-6 md:p-8 font-inter relative",children:[n.jsx("div",{className:"flex justify-end w-full",children:n.jsx("button",{onClick:Pe,className:"text-gray-500 hover:text-gray-700 transition mb-5 cursor-pointer",children:n.jsx(Xn,{size:30})})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7 mb-4 lg:mb-6 md:mb-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[d.profile_picture?n.jsx("img",{src:d.profile_picture,alt:`${d.first_name} ${d.last_name}`,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover border border-gray-200 shadow-sm"}):n.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-200 text-gray-700 flex items-center justify-center text-lg sm:text-xl font-semibold border border-gray-200 shadow-sm",children:gVe(d.first_name,d.last_name)}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[d.first_name," ",d.last_name]}),n.jsx("p",{className:"text-sm text-gray-500 break-all",children:d.email})]})]}),FT(d.role,{size:"md"})]}),!["CEO","ADMIN","GROUP MANAGER","GROUP_MANAGER"].includes(d.role.toUpperCase())&&n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Ie(d),disabled:L,children:[n.jsx(ha,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>rt(d),disabled:L,children:[n.jsx(vn,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 mb-6"}),n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview"].map(ue=>n.jsx("button",{onClick:()=>U(ue),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${G===ue?"bg-[#5c636d] text-white border-white":"text-white hover:bg-[#5c636d]"}`,children:ue},ue))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsx("div",{className:"lg:col-span-3",children:G==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:d.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Role:"}),n.jsx("p",{children:FT(d.role,{size:"sm"})})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:d.is_active?"Active":"Inactive"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Auth Provider:"}),n.jsx("p",{children:d.auth_provider?d.auth_provider.toString().replace(/\b\w/g,ue=>ue.toUpperCase()):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:d.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:d.company?.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company Number:"}),n.jsx("p",{children:d.company?.company_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Related to CEO:"}),n.jsx("p",{children:d.manager?`${d.manager.first_name} ${d.manager.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:mH(d.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Login:"}),n.jsx("p",{children:d.last_login?mH(d.last_login):"Never"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Profile Picture:"}),n.jsx("p",{children:d.profile_picture?n.jsx("a",{href:d.profile_picture,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline break-all",children:"View image"}):"N/A"})]})]})})}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsx("div",{className:"flex flex-col gap-2 w-full",children:n.jsxs("button",{type:"button",onClick:()=>{if(!d.email){alert("No email address available");return}const ue=encodeURIComponent(d.email),H=encodeURIComponent(""),K=encodeURIComponent(""),we=`https://mail.google.com/mail/?view=cm&fs=1&to=${ue}&su=${H}&body=${K}`;window.open(we,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(sa,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]})})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:V||(d.is_active?"Active":"Inactive"),onChange:ue=>Z(ue.target.value),children:[n.jsx("option",{value:"Active",children:"Active"}),n.jsx("option",{value:"Inactive",children:"Inactive"})]}),n.jsx("button",{onClick:Oe,disabled:Y||V===(d.is_active?"Active":"Inactive"),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Y||V===(d.is_active?"Active":"Inactive")?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:Y?"Updating...":"Update"})]})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[Ce,fe,n.jsx(xVe,{open:p,isEditing:y,isSubmitting:_,confirmProcessing:L,formData:w,onClose:lt,onSubmit:He,onChange:We,onGeneratePassword:tt}),n.jsx(yVe,{open:!!T,title:T?.title,message:T?.message,confirmLabel:T?.confirmLabel,cancelLabel:T?.cancelLabel,variant:T?.variant,loading:L,onConfirm:Ke,onCancel:Je})]})}function xVe({open:e,isEditing:t,isSubmitting:a,confirmProcessing:s,formData:r,onClose:i,onSubmit:o,onChange:l,onGeneratePassword:c}){if(!e)return null;const u=a||s;return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-lg border border-gray-200 p-6 sm:p-8 relative overflow-y-auto max-h-[90vh]",children:[n.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:u,children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-6 text-center",children:t?"Edit User":"Add New User"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:o,children:[n.jsx(Wb,{label:"First Name",value:r.firstName,onChange:d=>l("firstName",d),placeholder:"John",required:!0,disabled:u}),n.jsx(Wb,{label:"Last Name",value:r.lastName,onChange:d=>l("lastName",d),placeholder:"Doe",required:!0,disabled:u}),n.jsx(Wb,{label:"Email",type:"email",value:r.email,onChange:d=>l("email",d),placeholder:"john.doe@company.com",required:!0,disabled:u||t}),n.jsx(Wb,{label:"Role",type:"select",value:r.role,onChange:d=>l("role",d),options:[{value:"",label:"Select role"},...S1],required:!0,disabled:u}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Password"}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[n.jsx("input",{type:"text",value:r.password,onChange:d=>l("password",d.target.value),placeholder:t?"Leave blank to keep current password":"Enter or generate password",required:!t,disabled:u,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"}),n.jsx("button",{type:"button",onClick:c,className:"flex items-center justify-center px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-60",disabled:u,children:"Generate"})]}),t?n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Setting a password will reset the user's credentials; leave it blank to keep the current password."}):n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long."})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:i,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:u,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:u,children:a?"Saving...":t?"Update User":"Save User"})]})]})]})})}function Wb({label:e,type:t="text",value:a,onChange:s,placeholder:r,options:i=[],required:o=!1,disabled:l=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t==="select"?n.jsx("select",{value:a??"",onChange:c=>s(c.target.value),required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100",children:i.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))}):n.jsx("input",{type:t,value:a??"",onChange:c=>s(c.target.value),placeholder:r,required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"})]})}function yVe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-black hover:bg-gray-800 border border-black";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("div",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function bVe(){return n.jsxs(hse,{children:[n.jsx(are,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"colored",className:"z-[9999]"}),n.jsxs(Hae,{children:[n.jsx(vt,{path:"/",element:n.jsx(loe,{})}),n.jsx(vt,{path:"/header",element:n.jsx(h9,{})}),n.jsx(vt,{path:"/signup",element:n.jsx(oue,{})}),n.jsx(vt,{path:"/login",element:n.jsx(cue,{})}),n.jsx(vt,{path:"/forgot-password",element:n.jsx(mue,{})}),n.jsx(vt,{path:"/resources",element:n.jsx(xue,{})}),n.jsx(vt,{path:"/legal",element:n.jsx(jue,{})}),n.jsx(vt,{path:"/admin/quotes/:quoteId/print",element:n.jsx(fl,{requiredRole:"ceo",children:n.jsx(Ub,{})})}),n.jsx(vt,{path:"/sales/quotes/:quoteId/print",element:n.jsx(fl,{requiredRole:"sales",children:n.jsx(Ub,{})})}),n.jsx(vt,{path:"/manager/quotes/:quoteId/print",element:n.jsx(fl,{requiredRole:"manager",children:n.jsx(Ub,{})})}),n.jsx(vt,{path:"/group-manager/quotes/:quoteId/print",element:n.jsx(fl,{requiredRole:"group manager",children:n.jsx(Ub,{})})}),n.jsxs(vt,{path:"/admin",element:n.jsx(fl,{requiredRole:"ceo",children:n.jsx(Sue,{})}),children:[n.jsx(vt,{index:!0,element:n.jsx(ci,{to:"dashboard",replace:!0})}),n.jsx(vt,{path:"dashboard",element:n.jsx(dCe,{})}),n.jsx(vt,{path:"accounts",element:n.jsx(ECe,{})}),n.jsx(vt,{path:"contacts",element:n.jsx(OCe,{})}),n.jsx(vt,{path:"leads",element:n.jsx(UCe,{})}),n.jsx(vt,{path:"leads/:leadID",element:n.jsx(cY,{})}),n.jsx(vt,{path:"audit",element:n.jsx(PSe,{})}),n.jsx(vt,{path:"targets",element:n.jsx(O$e,{})}),n.jsx(vt,{path:"quotes",element:n.jsx(U$e,{})}),n.jsx(vt,{path:"users",element:n.jsx(Q$e,{})}),n.jsx(vt,{path:"manage-account",element:n.jsx(J$e,{})}),n.jsx(vt,{path:"company-details",element:n.jsx(Ize,{})}),n.jsx(vt,{path:"deals",element:n.jsx(e6e,{})}),n.jsx(vt,{path:"deals/info",element:n.jsx(jZ,{})}),n.jsx(vt,{path:"deals/quickaction",element:n.jsx(NZ,{})}),n.jsx(vt,{path:"tasks",element:n.jsx(mze,{})}),n.jsxs(vt,{path:"/admin/territory",children:[n.jsx(vt,{index:!0,element:n.jsx(zc,{})}),n.jsx(vt,{path:":id",element:n.jsx(zc,{})})]}),n.jsx(vt,{path:"calls",element:n.jsx(i8,{})}),n.jsx(vt,{path:"calls/info",element:n.jsx(i8,{})}),n.jsx(vt,{path:"meetings",element:n.jsx(o8,{})}),n.jsx(vt,{path:"meetings/info",element:n.jsx(o8,{})}),n.jsx(vt,{path:"help",element:n.jsx($ze,{})})]}),n.jsxs(vt,{path:"/sales",element:n.jsx(fl,{requiredRole:"sales",children:n.jsx(zze,{})}),children:[n.jsx(vt,{index:!0,element:n.jsx(ci,{to:"overview",replace:!0})}),n.jsx(vt,{path:"overview",element:n.jsx(uFe,{})}),n.jsx(vt,{path:"accounts",element:n.jsx(hFe,{})}),n.jsx(vt,{path:"contacts",element:n.jsx(yFe,{})}),n.jsx(vt,{path:"leads",element:n.jsx(SFe,{})}),n.jsx(vt,{path:"leads/info",element:n.jsx(oJ,{})}),n.jsx(vt,{path:"leads/convert",element:n.jsx(PFe,{})}),n.jsx(vt,{path:"deals",element:n.jsx(DFe,{})}),n.jsx(vt,{path:"deals/info",element:n.jsx(cJ,{})}),n.jsx(vt,{path:"deals/quickaction",element:n.jsx(lJ,{})}),n.jsx(vt,{path:"quotes",element:n.jsx(WFe,{})}),n.jsx(vt,{path:"targets",element:n.jsx(KFe,{})}),n.jsx(vt,{path:"audit",element:n.jsx(XFe,{})}),n.jsx(vt,{path:"manage-account",element:n.jsx(Hy,{})}),n.jsxs(vt,{path:"/sales/territory",children:[n.jsx(vt,{index:!0,element:n.jsx(zc,{})}),n.jsx(vt,{path:":id",element:n.jsx(zc,{})})]}),n.jsx(vt,{path:"meetings",element:n.jsx(dUe,{})}),n.jsx(vt,{path:"calls",element:n.jsx(hUe,{})}),n.jsx(vt,{path:"tasks",element:n.jsx(tUe,{})})]}),n.jsxs(vt,{path:"/manager",element:n.jsx(fl,{requiredRole:"manager",children:n.jsx(vUe,{})}),children:[n.jsx(vt,{index:!0,element:n.jsx(ci,{to:"dashboard",replace:!0})}),n.jsx(vt,{path:"dashboard",element:n.jsx(YUe,{})}),n.jsx(vt,{path:"accounts",element:n.jsx(XUe,{})}),n.jsx(vt,{path:"contacts",element:n.jsx(t7e,{})}),n.jsx(vt,{path:"leads",element:n.jsx(l7e,{})}),n.jsx(vt,{path:"leads/info",element:n.jsx(yJ,{})}),n.jsx(vt,{path:"leads/convert",element:n.jsx(g7e,{})}),n.jsx(vt,{path:"deals",element:n.jsx(p7e,{})}),n.jsx(vt,{path:"deals/info",element:n.jsx(vJ,{})}),n.jsx(vt,{path:"deals/quickaction",element:n.jsx(bJ,{})}),n.jsx(vt,{path:"quotes",element:n.jsx(T7e,{})}),n.jsx(vt,{path:"targets",element:n.jsx(D7e,{})}),n.jsx(vt,{path:"meetings",element:n.jsx(e8e,{})}),n.jsx(vt,{path:"audit",element:n.jsx(O7e,{})}),n.jsx(vt,{path:"calls",element:n.jsx($7e,{})}),n.jsx(vt,{path:"tasks",element:n.jsx(W7e,{})}),n.jsxs(vt,{path:"/manager/territory",children:[n.jsx(vt,{index:!0,element:n.jsx(zc,{})}),n.jsx(vt,{path:":id",element:n.jsx(zc,{})})]}),n.jsx(vt,{path:"users",element:n.jsx(r8e,{})}),n.jsx(vt,{path:"manage-account",element:n.jsx(Hy,{})})]}),n.jsx(vt,{children:n.jsxs(vt,{path:"/marketing",element:n.jsx(fl,{requiredRole:"marketing",children:n.jsx(c8e,{})}),children:[n.jsx(vt,{index:!0,element:n.jsx(ci,{to:"dashboard",replace:!0})}),n.jsx(vt,{path:"dashboard",element:n.jsx(oWe,{})}),n.jsx(vt,{path:"accounts",element:n.jsx(lWe,{})}),n.jsx(vt,{path:"contacts",element:n.jsx(dWe,{})}),n.jsx(vt,{path:"leads",element:n.jsx(pWe,{})}),n.jsx(vt,{path:"leads/info",element:n.jsx(gee,{})}),n.jsx(vt,{path:"leads/convert",element:n.jsx(hee,{})}),n.jsx(vt,{path:"tasks",element:n.jsx(vWe,{})}),n.jsx(vt,{path:"campaigns",element:n.jsx(jWe,{})}),n.jsx(vt,{path:"templates",element:n.jsx(SWe,{})}),n.jsx(vt,{path:"manage-account",element:n.jsx(Hy,{})})]})}),n.jsxs(vt,{path:"/group-manager",element:n.jsx(fl,{requiredRole:"group manager",children:n.jsx(kWe,{})}),children:[n.jsx(vt,{index:!0,element:n.jsx(ci,{to:"dashboard",replace:!0})}),n.jsx(vt,{path:"dashboard",element:n.jsx(aGe,{})}),n.jsx(vt,{path:"accounts",element:n.jsx(iGe,{})}),n.jsx(vt,{path:"contacts",element:n.jsx(dGe,{})}),n.jsx(vt,{path:"leads",element:n.jsx(xGe,{})}),n.jsx(vt,{path:"leads/info",element:n.jsx(Nee,{})}),n.jsx(vt,{path:"leads/convert",element:n.jsx(CGe,{})}),n.jsx(vt,{path:"deals",element:n.jsx(_Ge,{})}),n.jsx(vt,{path:"deals/info",element:n.jsx(Cee,{})}),n.jsx(vt,{path:"deals/quickaction",element:n.jsx(jee,{})}),n.jsx(vt,{path:"quotes",element:n.jsx(zGe,{})}),n.jsx(vt,{path:"targets",element:n.jsx(qGe,{})}),n.jsx(vt,{path:"tasks",element:n.jsx(YGe,{})}),n.jsxs(vt,{path:"/group-manager/territory",children:[n.jsx(vt,{index:!0,element:n.jsx(zc,{})}),n.jsx(vt,{path:":id",element:n.jsx(zc,{})})]}),n.jsx(vt,{path:"meetings",element:n.jsx(aVe,{})}),n.jsx(vt,{path:"calls",element:n.jsx(oVe,{})}),n.jsx(vt,{path:"audit",element:n.jsx(mVe,{})}),n.jsx(vt,{path:"users",element:n.jsx(pVe,{})}),n.jsx(vt,{path:"manage-account",element:n.jsx(Hy,{})})]})]})]})}qne.createRoot(document.getElementById("root")).render(n.jsx(h.StrictMode,{children:n.jsx(bVe,{})}));
