function Qte(e,t){for(var a=0;a<t.length;a++){const s=t[a];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in e)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function a(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=a(r);fetch(r.href,i)}})();function Hi(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var iS={exports:{}},Yh={};var EM;function Kte(){if(EM)return Yh;EM=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function a(s,r,i){var l=null;if(i!==void 0&&(l=""+i),r.key!==void 0&&(l=""+r.key),"key"in r){i={};for(var o in r)o!=="key"&&(i[o]=r[o])}else i=r;return r=i.ref,{$$typeof:e,type:s,key:l,ref:r!==void 0?r:null,props:i}}return Yh.Fragment=t,Yh.jsx=a,Yh.jsxs=a,Yh}var TM;function Xte(){return TM||(TM=1,iS.exports=Kte()),iS.exports}var n=Xte(),lS={exports:{}},qt={};var kM;function Zte(){if(kM)return qt;kM=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),l=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),p=Symbol.iterator;function x(ee){return ee===null||typeof ee!="object"?null:(ee=p&&ee[p]||ee["@@iterator"],typeof ee=="function"?ee:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,v={};function C(ee,H,ye){this.props=ee,this.context=H,this.refs=v,this.updater=ye||y}C.prototype.isReactComponent={},C.prototype.setState=function(ee,H){if(typeof ee!="object"&&typeof ee!="function"&&ee!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ee,H,"setState")},C.prototype.forceUpdate=function(ee){this.updater.enqueueForceUpdate(this,ee,"forceUpdate")};function N(){}N.prototype=C.prototype;function S(ee,H,ye){this.props=ee,this.context=H,this.refs=v,this.updater=ye||y}var T=S.prototype=new N;T.constructor=S,w(T,C.prototype),T.isPureReactComponent=!0;var k=Array.isArray;function _(){}var E={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function I(ee,H,ye){var te=ye.ref;return{$$typeof:e,type:ee,key:H,ref:te!==void 0?te:null,props:ye}}function z(ee,H){return I(ee.type,H,ee.props)}function F(ee){return typeof ee=="object"&&ee!==null&&ee.$$typeof===e}function D(ee){var H={"=":"=0",":":"=2"};return"$"+ee.replace(/[=:]/g,function(ye){return H[ye]})}var M=/\/+/g;function W(ee,H){return typeof ee=="object"&&ee!==null&&ee.key!=null?D(""+ee.key):H.toString(36)}function Z(ee){switch(ee.status){case"fulfilled":return ee.value;case"rejected":throw ee.reason;default:switch(typeof ee.status=="string"?ee.then(_,_):(ee.status="pending",ee.then(function(H){ee.status==="pending"&&(ee.status="fulfilled",ee.value=H)},function(H){ee.status==="pending"&&(ee.status="rejected",ee.reason=H)})),ee.status){case"fulfilled":return ee.value;case"rejected":throw ee.reason}}throw ee}function R(ee,H,ye,te,ve){var je=typeof ee;(je==="undefined"||je==="boolean")&&(ee=null);var Oe=!1;if(ee===null)Oe=!0;else switch(je){case"bigint":case"string":case"number":Oe=!0;break;case"object":switch(ee.$$typeof){case e:case t:Oe=!0;break;case u:return Oe=ee._init,R(Oe(ee._payload),H,ye,te,ve)}}if(Oe)return ve=ve(ee),Oe=te===""?"."+W(ee,0):te,k(ve)?(ye="",Oe!=null&&(ye=Oe.replace(M,"$&/")+"/"),R(ve,H,ye,"",function(Me){return Me})):ve!=null&&(F(ve)&&(ve=z(ve,ye+(ve.key==null||ee&&ee.key===ve.key?"":(""+ve.key).replace(M,"$&/")+"/")+Oe)),H.push(ve)),1;Oe=0;var $e=te===""?".":te+":";if(k(ee))for(var pe=0;pe<ee.length;pe++)te=ee[pe],je=$e+W(te,pe),Oe+=R(te,H,ye,je,ve);else if(pe=x(ee),typeof pe=="function")for(ee=pe.call(ee),pe=0;!(te=ee.next()).done;)te=te.value,je=$e+W(te,pe++),Oe+=R(te,H,ye,je,ve);else if(je==="object"){if(typeof ee.then=="function")return R(Z(ee),H,ye,te,ve);throw H=String(ee),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(ee).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return Oe}function Q(ee,H,ye){if(ee==null)return ee;var te=[],ve=0;return R(ee,te,"","",function(je){return H.call(ye,je,ve++)}),te}function Y(ee){if(ee._status===-1){var H=ee._result;H=H(),H.then(function(ye){(ee._status===0||ee._status===-1)&&(ee._status=1,ee._result=ye)},function(ye){(ee._status===0||ee._status===-1)&&(ee._status=2,ee._result=ye)}),ee._status===-1&&(ee._status=0,ee._result=H)}if(ee._status===1)return ee._result.default;throw ee._result}var oe=typeof reportError=="function"?reportError:function(ee){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ee=="object"&&ee!==null&&typeof ee.message=="string"?String(ee.message):String(ee),error:ee});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ee);return}console.error(ee)},re={map:Q,forEach:function(ee,H,ye){Q(ee,function(){H.apply(this,arguments)},ye)},count:function(ee){var H=0;return Q(ee,function(){H++}),H},toArray:function(ee){return Q(ee,function(H){return H})||[]},only:function(ee){if(!F(ee))throw Error("React.Children.only expected to receive a single React element child.");return ee}};return qt.Activity=f,qt.Children=re,qt.Component=C,qt.Fragment=a,qt.Profiler=r,qt.PureComponent=S,qt.StrictMode=s,qt.Suspense=c,qt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,qt.__COMPILER_RUNTIME={__proto__:null,c:function(ee){return E.H.useMemoCache(ee)}},qt.cache=function(ee){return function(){return ee.apply(null,arguments)}},qt.cacheSignal=function(){return null},qt.cloneElement=function(ee,H,ye){if(ee==null)throw Error("The argument must be a React element, but you passed "+ee+".");var te=w({},ee.props),ve=ee.key;if(H!=null)for(je in H.key!==void 0&&(ve=""+H.key),H)!A.call(H,je)||je==="key"||je==="__self"||je==="__source"||je==="ref"&&H.ref===void 0||(te[je]=H[je]);var je=arguments.length-2;if(je===1)te.children=ye;else if(1<je){for(var Oe=Array(je),$e=0;$e<je;$e++)Oe[$e]=arguments[$e+2];te.children=Oe}return I(ee.type,ve,te)},qt.createContext=function(ee){return ee={$$typeof:l,_currentValue:ee,_currentValue2:ee,_threadCount:0,Provider:null,Consumer:null},ee.Provider=ee,ee.Consumer={$$typeof:i,_context:ee},ee},qt.createElement=function(ee,H,ye){var te,ve={},je=null;if(H!=null)for(te in H.key!==void 0&&(je=""+H.key),H)A.call(H,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(ve[te]=H[te]);var Oe=arguments.length-2;if(Oe===1)ve.children=ye;else if(1<Oe){for(var $e=Array(Oe),pe=0;pe<Oe;pe++)$e[pe]=arguments[pe+2];ve.children=$e}if(ee&&ee.defaultProps)for(te in Oe=ee.defaultProps,Oe)ve[te]===void 0&&(ve[te]=Oe[te]);return I(ee,je,ve)},qt.createRef=function(){return{current:null}},qt.forwardRef=function(ee){return{$$typeof:o,render:ee}},qt.isValidElement=F,qt.lazy=function(ee){return{$$typeof:u,_payload:{_status:-1,_result:ee},_init:Y}},qt.memo=function(ee,H){return{$$typeof:d,type:ee,compare:H===void 0?null:H}},qt.startTransition=function(ee){var H=E.T,ye={};E.T=ye;try{var te=ee(),ve=E.S;ve!==null&&ve(ye,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(_,oe)}catch(je){oe(je)}finally{H!==null&&ye.types!==null&&(H.types=ye.types),E.T=H}},qt.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},qt.use=function(ee){return E.H.use(ee)},qt.useActionState=function(ee,H,ye){return E.H.useActionState(ee,H,ye)},qt.useCallback=function(ee,H){return E.H.useCallback(ee,H)},qt.useContext=function(ee){return E.H.useContext(ee)},qt.useDebugValue=function(){},qt.useDeferredValue=function(ee,H){return E.H.useDeferredValue(ee,H)},qt.useEffect=function(ee,H){return E.H.useEffect(ee,H)},qt.useEffectEvent=function(ee){return E.H.useEffectEvent(ee)},qt.useId=function(){return E.H.useId()},qt.useImperativeHandle=function(ee,H,ye){return E.H.useImperativeHandle(ee,H,ye)},qt.useInsertionEffect=function(ee,H){return E.H.useInsertionEffect(ee,H)},qt.useLayoutEffect=function(ee,H){return E.H.useLayoutEffect(ee,H)},qt.useMemo=function(ee,H){return E.H.useMemo(ee,H)},qt.useOptimistic=function(ee,H){return E.H.useOptimistic(ee,H)},qt.useReducer=function(ee,H,ye){return E.H.useReducer(ee,H,ye)},qt.useRef=function(ee){return E.H.useRef(ee)},qt.useState=function(ee){return E.H.useState(ee)},qt.useSyncExternalStore=function(ee,H,ye){return E.H.useSyncExternalStore(ee,H,ye)},qt.useTransition=function(){return E.H.useTransition()},qt.version="19.2.0",qt}var LM;function Pf(){return LM||(LM=1,lS.exports=Zte()),lS.exports}var h=Pf();const pt=Hi(h),uu=Qte({__proto__:null,default:pt},[h]);var oS={exports:{}},Qh={},cS={exports:{}},dS={};var PM;function Jte(){return PM||(PM=1,(function(e){function t(R,Q){var Y=R.length;R.push(Q);e:for(;0<Y;){var oe=Y-1>>>1,re=R[oe];if(0<r(re,Q))R[oe]=Q,R[Y]=re,Y=oe;else break e}}function a(R){return R.length===0?null:R[0]}function s(R){if(R.length===0)return null;var Q=R[0],Y=R.pop();if(Y!==Q){R[0]=Y;e:for(var oe=0,re=R.length,ee=re>>>1;oe<ee;){var H=2*(oe+1)-1,ye=R[H],te=H+1,ve=R[te];if(0>r(ye,Y))te<re&&0>r(ve,ye)?(R[oe]=ve,R[te]=Y,oe=te):(R[oe]=ye,R[H]=Y,oe=H);else if(te<re&&0>r(ve,Y))R[oe]=ve,R[te]=Y,oe=te;else break e}}return Q}function r(R,Q){var Y=R.sortIndex-Q.sortIndex;return Y!==0?Y:R.id-Q.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,f=null,p=3,x=!1,y=!1,w=!1,v=!1,C=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function T(R){for(var Q=a(d);Q!==null;){if(Q.callback===null)s(d);else if(Q.startTime<=R)s(d),Q.sortIndex=Q.expirationTime,t(c,Q);else break;Q=a(d)}}function k(R){if(w=!1,T(R),!y)if(a(c)!==null)y=!0,_||(_=!0,D());else{var Q=a(d);Q!==null&&Z(k,Q.startTime-R)}}var _=!1,E=-1,A=5,I=-1;function z(){return v?!0:!(e.unstable_now()-I<A)}function F(){if(v=!1,_){var R=e.unstable_now();I=R;var Q=!0;try{e:{y=!1,w&&(w=!1,N(E),E=-1),x=!0;var Y=p;try{t:{for(T(R),f=a(c);f!==null&&!(f.expirationTime>R&&z());){var oe=f.callback;if(typeof oe=="function"){f.callback=null,p=f.priorityLevel;var re=oe(f.expirationTime<=R);if(R=e.unstable_now(),typeof re=="function"){f.callback=re,T(R),Q=!0;break t}f===a(c)&&s(c),T(R)}else s(c);f=a(c)}if(f!==null)Q=!0;else{var ee=a(d);ee!==null&&Z(k,ee.startTime-R),Q=!1}}break e}finally{f=null,p=Y,x=!1}Q=void 0}}finally{Q?D():_=!1}}}var D;if(typeof S=="function")D=function(){S(F)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,W=M.port2;M.port1.onmessage=F,D=function(){W.postMessage(null)}}else D=function(){C(F,0)};function Z(R,Q){E=C(function(){R(e.unstable_now())},Q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(R){switch(p){case 1:case 2:case 3:var Q=3;break;default:Q=p}var Y=p;p=Q;try{return R()}finally{p=Y}},e.unstable_requestPaint=function(){v=!0},e.unstable_runWithPriority=function(R,Q){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var Y=p;p=R;try{return Q()}finally{p=Y}},e.unstable_scheduleCallback=function(R,Q,Y){var oe=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?oe+Y:oe):Y=oe,R){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=Y+re,R={id:u++,callback:Q,priorityLevel:R,startTime:Y,expirationTime:re,sortIndex:-1},Y>oe?(R.sortIndex=Y,t(d,R),a(c)===null&&R===a(d)&&(w?(N(E),E=-1):w=!0,Z(k,Y-oe))):(R.sortIndex=re,t(c,R),y||x||(y=!0,_||(_=!0,D()))),R},e.unstable_shouldYield=z,e.unstable_wrapCallback=function(R){var Q=p;return function(){var Y=p;p=Q;try{return R.apply(this,arguments)}finally{p=Y}}}})(dS)),dS}var DM;function ene(){return DM||(DM=1,cS.exports=Jte()),cS.exports}var uS={exports:{}},Ns={};var OM;function tne(){if(OM)return Ns;OM=1;var e=Pf();function t(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)d+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var s={d:{f:a,r:function(){throw Error(t(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},r=Symbol.for("react.portal");function i(c,d,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:f==null?null:""+f,children:c,containerInfo:d,implementation:u}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(c,d){if(c==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Ns.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ns.createPortal=function(c,d){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return i(c,d,null,u)},Ns.flushSync=function(c){var d=l.T,u=s.p;try{if(l.T=null,s.p=2,c)return c()}finally{l.T=d,s.p=u,s.d.f()}},Ns.preconnect=function(c,d){typeof c=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,s.d.C(c,d))},Ns.prefetchDNS=function(c){typeof c=="string"&&s.d.D(c)},Ns.preinit=function(c,d){if(typeof c=="string"&&d&&typeof d.as=="string"){var u=d.as,f=o(u,d.crossOrigin),p=typeof d.integrity=="string"?d.integrity:void 0,x=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;u==="style"?s.d.S(c,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:f,integrity:p,fetchPriority:x}):u==="script"&&s.d.X(c,{crossOrigin:f,integrity:p,fetchPriority:x,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Ns.preinitModule=function(c,d){if(typeof c=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var u=o(d.as,d.crossOrigin);s.d.M(c,{crossOrigin:u,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&s.d.M(c)},Ns.preload=function(c,d){if(typeof c=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var u=d.as,f=o(u,d.crossOrigin);s.d.L(c,u,{crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Ns.preloadModule=function(c,d){if(typeof c=="string")if(d){var u=o(d.as,d.crossOrigin);s.d.m(c,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:u,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else s.d.m(c)},Ns.requestFormReset=function(c){s.d.r(c)},Ns.unstable_batchedUpdates=function(c,d){return c(d)},Ns.useFormState=function(c,d,u){return l.H.useFormState(c,d,u)},Ns.useFormStatus=function(){return l.H.useHostTransitionStatus()},Ns.version="19.2.0",Ns}var MM;function BB(){if(MM)return uS.exports;MM=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),uS.exports=tne(),uS.exports}var IM;function nne(){if(IM)return Qh;IM=1;var e=ene(),t=Pf(),a=BB();function s(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)g+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)}function i(m){var g=m,b=m;if(m.alternate)for(;g.return;)g=g.return;else{m=g;do g=m,(g.flags&4098)!==0&&(b=g.return),m=g.return;while(m)}return g.tag===3?b:null}function l(m){if(m.tag===13){var g=m.memoizedState;if(g===null&&(m=m.alternate,m!==null&&(g=m.memoizedState)),g!==null)return g.dehydrated}return null}function o(m){if(m.tag===31){var g=m.memoizedState;if(g===null&&(m=m.alternate,m!==null&&(g=m.memoizedState)),g!==null)return g.dehydrated}return null}function c(m){if(i(m)!==m)throw Error(s(188))}function d(m){var g=m.alternate;if(!g){if(g=i(m),g===null)throw Error(s(188));return g!==m?null:m}for(var b=m,j=g;;){var P=b.return;if(P===null)break;var O=P.alternate;if(O===null){if(j=P.return,j!==null){b=j;continue}break}if(P.child===O.child){for(O=P.child;O;){if(O===b)return c(P),m;if(O===j)return c(P),g;O=O.sibling}throw Error(s(188))}if(b.return!==j.return)b=P,j=O;else{for(var X=!1,we=P.child;we;){if(we===b){X=!0,b=P,j=O;break}if(we===j){X=!0,j=P,b=O;break}we=we.sibling}if(!X){for(we=O.child;we;){if(we===b){X=!0,b=O,j=P;break}if(we===j){X=!0,j=O,b=P;break}we=we.sibling}if(!X)throw Error(s(189))}}if(b.alternate!==j)throw Error(s(190))}if(b.tag!==3)throw Error(s(188));return b.stateNode.current===b?m:g}function u(m){var g=m.tag;if(g===5||g===26||g===27||g===6)return m;for(m=m.child;m!==null;){if(g=u(m),g!==null)return g;m=m.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),N=Symbol.for("react.consumer"),S=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function D(m){return m===null||typeof m!="object"?null:(m=F&&m[F]||m["@@iterator"],typeof m=="function"?m:null)}var M=Symbol.for("react.client.reference");function W(m){if(m==null)return null;if(typeof m=="function")return m.$$typeof===M?null:m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case w:return"Fragment";case C:return"Profiler";case v:return"StrictMode";case k:return"Suspense";case _:return"SuspenseList";case I:return"Activity"}if(typeof m=="object")switch(m.$$typeof){case y:return"Portal";case S:return m.displayName||"Context";case N:return(m._context.displayName||"Context")+".Consumer";case T:var g=m.render;return m=m.displayName,m||(m=g.displayName||g.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case E:return g=m.displayName||null,g!==null?g:W(m.type)||"Memo";case A:g=m._payload,m=m._init;try{return W(m(g))}catch{}}return null}var Z=Array.isArray,R=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},oe=[],re=-1;function ee(m){return{current:m}}function H(m){0>re||(m.current=oe[re],oe[re]=null,re--)}function ye(m,g){re++,oe[re]=m.current,m.current=g}var te=ee(null),ve=ee(null),je=ee(null),Oe=ee(null);function $e(m,g){switch(ye(je,g),ye(ve,m),ye(te,null),g.nodeType){case 9:case 11:m=(m=g.documentElement)&&(m=m.namespaceURI)?X5(m):0;break;default:if(m=g.tagName,g=g.namespaceURI)g=X5(g),m=Z5(g,m);else switch(m){case"svg":m=1;break;case"math":m=2;break;default:m=0}}H(te),ye(te,m)}function pe(){H(te),H(ve),H(je)}function Me(m){m.memoizedState!==null&&ye(Oe,m);var g=te.current,b=Z5(g,m.type);g!==b&&(ye(ve,m),ye(te,b))}function Le(m){ve.current===m&&(H(te),H(ve)),Oe.current===m&&(H(Oe),Gh._currentValue=Y)}var he,ae;function Ae(m){if(he===void 0)try{throw Error()}catch(b){var g=b.stack.trim().match(/\n( *(at )?)/);he=g&&g[1]||"",ae=-1<b.stack.indexOf(`
    at`)?" (<anonymous>)":-1<b.stack.indexOf("@")?"@unknown:0:0":""}return`
`+he+m+ae}var ge=!1;function Be(m,g){if(!m||ge)return"";ge=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var j={DetermineComponentFrameRoot:function(){try{if(g){var ft=function(){throw Error()};if(Object.defineProperty(ft.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ft,[])}catch(ot){var at=ot}Reflect.construct(m,[],ft)}else{try{ft.call()}catch(ot){at=ot}m.call(ft.prototype)}}else{try{throw Error()}catch(ot){at=ot}(ft=m())&&typeof ft.catch=="function"&&ft.catch(function(){})}}catch(ot){if(ot&&at&&typeof ot.stack=="string")return[ot.stack,at.stack]}return[null,null]}};j.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var P=Object.getOwnPropertyDescriptor(j.DetermineComponentFrameRoot,"name");P&&P.configurable&&Object.defineProperty(j.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var O=j.DetermineComponentFrameRoot(),X=O[0],we=O[1];if(X&&we){var ze=X.split(`
`),tt=we.split(`
`);for(P=j=0;j<ze.length&&!ze[j].includes("DetermineComponentFrameRoot");)j++;for(;P<tt.length&&!tt[P].includes("DetermineComponentFrameRoot");)P++;if(j===ze.length||P===tt.length)for(j=ze.length-1,P=tt.length-1;1<=j&&0<=P&&ze[j]!==tt[P];)P--;for(;1<=j&&0<=P;j--,P--)if(ze[j]!==tt[P]){if(j!==1||P!==1)do if(j--,P--,0>P||ze[j]!==tt[P]){var dt=`
`+ze[j].replace(" at new "," at ");return m.displayName&&dt.includes("<anonymous>")&&(dt=dt.replace("<anonymous>",m.displayName)),dt}while(1<=j&&0<=P);break}}}finally{ge=!1,Error.prepareStackTrace=b}return(b=m?m.displayName||m.name:"")?Ae(b):""}function qe(m,g){switch(m.tag){case 26:case 27:case 5:return Ae(m.type);case 16:return Ae("Lazy");case 13:return m.child!==g&&g!==null?Ae("Suspense Fallback"):Ae("Suspense");case 19:return Ae("SuspenseList");case 0:case 15:return Be(m.type,!1);case 11:return Be(m.type.render,!1);case 1:return Be(m.type,!0);case 31:return Ae("Activity");default:return""}}function Te(m){try{var g="",b=null;do g+=qe(m,b),b=m,m=m.return;while(m);return g}catch(j){return`
Error generating stack: `+j.message+`
`+j.stack}}var He=Object.prototype.hasOwnProperty,Ye=e.unstable_scheduleCallback,B=e.unstable_cancelCallback,fe=e.unstable_shouldYield,Se=e.unstable_requestPaint,de=e.unstable_now,ke=e.unstable_getCurrentPriorityLevel,se=e.unstable_ImmediatePriority,We=e.unstable_UserBlockingPriority,Re=e.unstable_NormalPriority,ct=e.unstable_LowPriority,Ie=e.unstable_IdlePriority,ue=e.log,Ne=e.unstable_setDisableYieldValue,Fe=null,Ze=null;function st(m){if(typeof ue=="function"&&Ne(m),Ze&&typeof Ze.setStrictMode=="function")try{Ze.setStrictMode(Fe,m)}catch{}}var Ee=Math.clz32?Math.clz32:Ke,Je=Math.log,be=Math.LN2;function Ke(m){return m>>>=0,m===0?32:31-(Je(m)/be|0)|0}var $=256,G=262144,K=4194304;function ne(m){var g=m&42;if(g!==0)return g;switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return m&261888;case 262144:case 524288:case 1048576:case 2097152:return m&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return m&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return m}}function J(m,g,b){var j=m.pendingLanes;if(j===0)return 0;var P=0,O=m.suspendedLanes,X=m.pingedLanes;m=m.warmLanes;var we=j&134217727;return we!==0?(j=we&~O,j!==0?P=ne(j):(X&=we,X!==0?P=ne(X):b||(b=we&~m,b!==0&&(P=ne(b))))):(we=j&~O,we!==0?P=ne(we):X!==0?P=ne(X):b||(b=j&~m,b!==0&&(P=ne(b)))),P===0?0:g!==0&&g!==P&&(g&O)===0&&(O=P&-P,b=g&-g,O>=b||O===32&&(b&4194048)!==0)?g:P}function Ce(m,g){return(m.pendingLanes&~(m.suspendedLanes&~m.pingedLanes)&g)===0}function me(m,g){switch(m){case 1:case 2:case 4:case 8:case 64:return g+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function V(){var m=K;return K<<=1,(K&62914560)===0&&(K=4194304),m}function _e(m){for(var g=[],b=0;31>b;b++)g.push(m);return g}function Ue(m,g){m.pendingLanes|=g,g!==268435456&&(m.suspendedLanes=0,m.pingedLanes=0,m.warmLanes=0)}function rt(m,g,b,j,P,O){var X=m.pendingLanes;m.pendingLanes=b,m.suspendedLanes=0,m.pingedLanes=0,m.warmLanes=0,m.expiredLanes&=b,m.entangledLanes&=b,m.errorRecoveryDisabledLanes&=b,m.shellSuspendCounter=0;var we=m.entanglements,ze=m.expirationTimes,tt=m.hiddenUpdates;for(b=X&~b;0<b;){var dt=31-Ee(b),ft=1<<dt;we[dt]=0,ze[dt]=-1;var at=tt[dt];if(at!==null)for(tt[dt]=null,dt=0;dt<at.length;dt++){var ot=at[dt];ot!==null&&(ot.lane&=-536870913)}b&=~ft}j!==0&&bt(m,j,0),O!==0&&P===0&&m.tag!==0&&(m.suspendedLanes|=O&~(X&~g))}function bt(m,g,b){m.pendingLanes|=g,m.suspendedLanes&=~g;var j=31-Ee(g);m.entangledLanes|=g,m.entanglements[j]=m.entanglements[j]|1073741824|b&261930}function gt(m,g){var b=m.entangledLanes|=g;for(m=m.entanglements;b;){var j=31-Ee(b),P=1<<j;P&g|m[j]&g&&(m[j]|=g),b&=~P}}function _t(m,g){var b=g&-g;return b=(b&42)!==0?1:Wt(b),(b&(m.suspendedLanes|g))!==0?0:b}function Wt(m){switch(m){case 2:m=1;break;case 8:m=4;break;case 32:m=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:m=128;break;case 268435456:m=134217728;break;default:m=0}return m}function un(m){return m&=-m,2<m?8<m?(m&134217727)!==0?32:268435456:8:2}function le(){var m=Q.p;return m!==0?m:(m=window.event,m===void 0?32:wM(m.type))}function it(m,g){var b=Q.p;try{return Q.p=m,g()}finally{Q.p=b}}var Et=Math.random().toString(36).slice(2),Nt="__reactFiber$"+Et,L="__reactProps$"+Et,U="__reactContainer$"+Et,xe="__reactEvents$"+Et,De="__reactListeners$"+Et,ie="__reactHandles$"+Et,Pe="__reactResources$"+Et,Qe="__reactMarker$"+Et;function vt(m){delete m[Nt],delete m[L],delete m[xe],delete m[De],delete m[ie]}function ht(m){var g=m[Nt];if(g)return g;for(var b=m.parentNode;b;){if(g=b[U]||b[Nt]){if(b=g.alternate,g.child!==null||b!==null&&b.child!==null)for(m=rM(m);m!==null;){if(b=m[Nt])return b;m=rM(m)}return g}m=b,b=m.parentNode}return null}function Ut(m){if(m=m[Nt]||m[U]){var g=m.tag;if(g===5||g===6||g===13||g===31||g===26||g===27||g===3)return m}return null}function wn(m){var g=m.tag;if(g===5||g===26||g===27||g===6)return m.stateNode;throw Error(s(33))}function ns(m){var g=m[Pe];return g||(g=m[Pe]={hoistableStyles:new Map,hoistableScripts:new Map}),g}function Fa(m){m[Qe]=!0}var zD=new Set,FD={};function fd(m,g){Wu(m,g),Wu(m+"Capture",g)}function Wu(m,g){for(FD[m]=g,m=0;m<g.length;m++)zD.add(g[m])}var FJ=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),UD={},BD={};function UJ(m){return He.call(BD,m)?!0:He.call(UD,m)?!1:FJ.test(m)?BD[m]=!0:(UD[m]=!0,!1)}function r0(m,g,b){if(UJ(g))if(b===null)m.removeAttribute(g);else{switch(typeof b){case"undefined":case"function":case"symbol":m.removeAttribute(g);return;case"boolean":var j=g.toLowerCase().slice(0,5);if(j!=="data-"&&j!=="aria-"){m.removeAttribute(g);return}}m.setAttribute(g,""+b)}}function i0(m,g,b){if(b===null)m.removeAttribute(g);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":m.removeAttribute(g);return}m.setAttribute(g,""+b)}}function Ol(m,g,b,j){if(j===null)m.removeAttribute(b);else{switch(typeof j){case"undefined":case"function":case"symbol":case"boolean":m.removeAttribute(b);return}m.setAttributeNS(g,b,""+j)}}function zr(m){switch(typeof m){case"bigint":case"boolean":case"number":case"string":case"undefined":return m;case"object":return m;default:return""}}function HD(m){var g=m.type;return(m=m.nodeName)&&m.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function BJ(m,g,b){var j=Object.getOwnPropertyDescriptor(m.constructor.prototype,g);if(!m.hasOwnProperty(g)&&typeof j<"u"&&typeof j.get=="function"&&typeof j.set=="function"){var P=j.get,O=j.set;return Object.defineProperty(m,g,{configurable:!0,get:function(){return P.call(this)},set:function(X){b=""+X,O.call(this,X)}}),Object.defineProperty(m,g,{enumerable:j.enumerable}),{getValue:function(){return b},setValue:function(X){b=""+X},stopTracking:function(){m._valueTracker=null,delete m[g]}}}}function Jj(m){if(!m._valueTracker){var g=HD(m)?"checked":"value";m._valueTracker=BJ(m,g,""+m[g])}}function GD(m){if(!m)return!1;var g=m._valueTracker;if(!g)return!0;var b=g.getValue(),j="";return m&&(j=HD(m)?m.checked?"true":"false":m.value),m=j,m!==b?(g.setValue(m),!0):!1}function l0(m){if(m=m||(typeof document<"u"?document:void 0),typeof m>"u")return null;try{return m.activeElement||m.body}catch{return m.body}}var HJ=/[\n"\\]/g;function Fr(m){return m.replace(HJ,function(g){return"\\"+g.charCodeAt(0).toString(16)+" "})}function e1(m,g,b,j,P,O,X,we){m.name="",X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"?m.type=X:m.removeAttribute("type"),g!=null?X==="number"?(g===0&&m.value===""||m.value!=g)&&(m.value=""+zr(g)):m.value!==""+zr(g)&&(m.value=""+zr(g)):X!=="submit"&&X!=="reset"||m.removeAttribute("value"),g!=null?t1(m,X,zr(g)):b!=null?t1(m,X,zr(b)):j!=null&&m.removeAttribute("value"),P==null&&O!=null&&(m.defaultChecked=!!O),P!=null&&(m.checked=P&&typeof P!="function"&&typeof P!="symbol"),we!=null&&typeof we!="function"&&typeof we!="symbol"&&typeof we!="boolean"?m.name=""+zr(we):m.removeAttribute("name")}function WD(m,g,b,j,P,O,X,we){if(O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(m.type=O),g!=null||b!=null){if(!(O!=="submit"&&O!=="reset"||g!=null)){Jj(m);return}b=b!=null?""+zr(b):"",g=g!=null?""+zr(g):b,we||g===m.value||(m.value=g),m.defaultValue=g}j=j??P,j=typeof j!="function"&&typeof j!="symbol"&&!!j,m.checked=we?m.checked:!!j,m.defaultChecked=!!j,X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"&&(m.name=X),Jj(m)}function t1(m,g,b){g==="number"&&l0(m.ownerDocument)===m||m.defaultValue===""+b||(m.defaultValue=""+b)}function Vu(m,g,b,j){if(m=m.options,g){g={};for(var P=0;P<b.length;P++)g["$"+b[P]]=!0;for(b=0;b<m.length;b++)P=g.hasOwnProperty("$"+m[b].value),m[b].selected!==P&&(m[b].selected=P),P&&j&&(m[b].defaultSelected=!0)}else{for(b=""+zr(b),g=null,P=0;P<m.length;P++){if(m[P].value===b){m[P].selected=!0,j&&(m[P].defaultSelected=!0);return}g!==null||m[P].disabled||(g=m[P])}g!==null&&(g.selected=!0)}}function VD(m,g,b){if(g!=null&&(g=""+zr(g),g!==m.value&&(m.value=g),b==null)){m.defaultValue!==g&&(m.defaultValue=g);return}m.defaultValue=b!=null?""+zr(b):""}function qD(m,g,b,j){if(g==null){if(j!=null){if(b!=null)throw Error(s(92));if(Z(j)){if(1<j.length)throw Error(s(93));j=j[0]}b=j}b==null&&(b=""),g=b}b=zr(g),m.defaultValue=b,j=m.textContent,j===b&&j!==""&&j!==null&&(m.value=j),Jj(m)}function qu(m,g){if(g){var b=m.firstChild;if(b&&b===m.lastChild&&b.nodeType===3){b.nodeValue=g;return}}m.textContent=g}var GJ=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function YD(m,g,b){var j=g.indexOf("--")===0;b==null||typeof b=="boolean"||b===""?j?m.setProperty(g,""):g==="float"?m.cssFloat="":m[g]="":j?m.setProperty(g,b):typeof b!="number"||b===0||GJ.has(g)?g==="float"?m.cssFloat=b:m[g]=(""+b).trim():m[g]=b+"px"}function QD(m,g,b){if(g!=null&&typeof g!="object")throw Error(s(62));if(m=m.style,b!=null){for(var j in b)!b.hasOwnProperty(j)||g!=null&&g.hasOwnProperty(j)||(j.indexOf("--")===0?m.setProperty(j,""):j==="float"?m.cssFloat="":m[j]="");for(var P in g)j=g[P],g.hasOwnProperty(P)&&b[P]!==j&&YD(m,P,j)}else for(var O in g)g.hasOwnProperty(O)&&YD(m,O,g[O])}function n1(m){if(m.indexOf("-")===-1)return!1;switch(m){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var WJ=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),VJ=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function o0(m){return VJ.test(""+m)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":m}function Ml(){}var a1=null;function s1(m){return m=m.target||m.srcElement||window,m.correspondingUseElement&&(m=m.correspondingUseElement),m.nodeType===3?m.parentNode:m}var Yu=null,Qu=null;function KD(m){var g=Ut(m);if(g&&(m=g.stateNode)){var b=m[L]||null;e:switch(m=g.stateNode,g.type){case"input":if(e1(m,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name),g=b.name,b.type==="radio"&&g!=null){for(b=m;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll('input[name="'+Fr(""+g)+'"][type="radio"]'),g=0;g<b.length;g++){var j=b[g];if(j!==m&&j.form===m.form){var P=j[L]||null;if(!P)throw Error(s(90));e1(j,P.value,P.defaultValue,P.defaultValue,P.checked,P.defaultChecked,P.type,P.name)}}for(g=0;g<b.length;g++)j=b[g],j.form===m.form&&GD(j)}break e;case"textarea":VD(m,b.value,b.defaultValue);break e;case"select":g=b.value,g!=null&&Vu(m,!!b.multiple,g,!1)}}}var r1=!1;function XD(m,g,b){if(r1)return m(g,b);r1=!0;try{var j=m(g);return j}finally{if(r1=!1,(Yu!==null||Qu!==null)&&(Q0(),Yu&&(g=Yu,m=Qu,Qu=Yu=null,KD(g),m)))for(g=0;g<m.length;g++)KD(m[g])}}function lh(m,g){var b=m.stateNode;if(b===null)return null;var j=b[L]||null;if(j===null)return null;b=j[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(j=!j.disabled)||(m=m.type,j=!(m==="button"||m==="input"||m==="select"||m==="textarea")),m=!j;break e;default:m=!1}if(m)return null;if(b&&typeof b!="function")throw Error(s(231,g,typeof b));return b}var Il=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),i1=!1;if(Il)try{var oh={};Object.defineProperty(oh,"passive",{get:function(){i1=!0}}),window.addEventListener("test",oh,oh),window.removeEventListener("test",oh,oh)}catch{i1=!1}var Zo=null,l1=null,c0=null;function ZD(){if(c0)return c0;var m,g=l1,b=g.length,j,P="value"in Zo?Zo.value:Zo.textContent,O=P.length;for(m=0;m<b&&g[m]===P[m];m++);var X=b-m;for(j=1;j<=X&&g[b-j]===P[O-j];j++);return c0=P.slice(m,1<j?1-j:void 0)}function d0(m){var g=m.keyCode;return"charCode"in m?(m=m.charCode,m===0&&g===13&&(m=13)):m=g,m===10&&(m=13),32<=m||m===13?m:0}function u0(){return!0}function JD(){return!1}function Ws(m){function g(b,j,P,O,X){this._reactName=b,this._targetInst=P,this.type=j,this.nativeEvent=O,this.target=X,this.currentTarget=null;for(var we in m)m.hasOwnProperty(we)&&(b=m[we],this[we]=b?b(O):O[we]);return this.isDefaultPrevented=(O.defaultPrevented!=null?O.defaultPrevented:O.returnValue===!1)?u0:JD,this.isPropagationStopped=JD,this}return f(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=u0)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=u0)},persist:function(){},isPersistent:u0}),g}var hd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(m){return m.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},m0=Ws(hd),ch=f({},hd,{view:0,detail:0}),qJ=Ws(ch),o1,c1,dh,f0=f({},ch,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:u1,button:0,buttons:0,relatedTarget:function(m){return m.relatedTarget===void 0?m.fromElement===m.srcElement?m.toElement:m.fromElement:m.relatedTarget},movementX:function(m){return"movementX"in m?m.movementX:(m!==dh&&(dh&&m.type==="mousemove"?(o1=m.screenX-dh.screenX,c1=m.screenY-dh.screenY):c1=o1=0,dh=m),o1)},movementY:function(m){return"movementY"in m?m.movementY:c1}}),eO=Ws(f0),YJ=f({},f0,{dataTransfer:0}),QJ=Ws(YJ),KJ=f({},ch,{relatedTarget:0}),d1=Ws(KJ),XJ=f({},hd,{animationName:0,elapsedTime:0,pseudoElement:0}),ZJ=Ws(XJ),JJ=f({},hd,{clipboardData:function(m){return"clipboardData"in m?m.clipboardData:window.clipboardData}}),eee=Ws(JJ),tee=f({},hd,{data:0}),tO=Ws(tee),nee={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},aee={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},see={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ree(m){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(m):(m=see[m])?!!g[m]:!1}function u1(){return ree}var iee=f({},ch,{key:function(m){if(m.key){var g=nee[m.key]||m.key;if(g!=="Unidentified")return g}return m.type==="keypress"?(m=d0(m),m===13?"Enter":String.fromCharCode(m)):m.type==="keydown"||m.type==="keyup"?aee[m.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:u1,charCode:function(m){return m.type==="keypress"?d0(m):0},keyCode:function(m){return m.type==="keydown"||m.type==="keyup"?m.keyCode:0},which:function(m){return m.type==="keypress"?d0(m):m.type==="keydown"||m.type==="keyup"?m.keyCode:0}}),lee=Ws(iee),oee=f({},f0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nO=Ws(oee),cee=f({},ch,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:u1}),dee=Ws(cee),uee=f({},hd,{propertyName:0,elapsedTime:0,pseudoElement:0}),mee=Ws(uee),fee=f({},f0,{deltaX:function(m){return"deltaX"in m?m.deltaX:"wheelDeltaX"in m?-m.wheelDeltaX:0},deltaY:function(m){return"deltaY"in m?m.deltaY:"wheelDeltaY"in m?-m.wheelDeltaY:"wheelDelta"in m?-m.wheelDelta:0},deltaZ:0,deltaMode:0}),hee=Ws(fee),gee=f({},hd,{newState:0,oldState:0}),pee=Ws(gee),xee=[9,13,27,32],m1=Il&&"CompositionEvent"in window,uh=null;Il&&"documentMode"in document&&(uh=document.documentMode);var yee=Il&&"TextEvent"in window&&!uh,aO=Il&&(!m1||uh&&8<uh&&11>=uh),sO=" ",rO=!1;function iO(m,g){switch(m){case"keyup":return xee.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lO(m){return m=m.detail,typeof m=="object"&&"data"in m?m.data:null}var Ku=!1;function bee(m,g){switch(m){case"compositionend":return lO(g);case"keypress":return g.which!==32?null:(rO=!0,sO);case"textInput":return m=g.data,m===sO&&rO?null:m;default:return null}}function vee(m,g){if(Ku)return m==="compositionend"||!m1&&iO(m,g)?(m=ZD(),c0=l1=Zo=null,Ku=!1,m):null;switch(m){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return aO&&g.locale!=="ko"?null:g.data;default:return null}}var wee={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oO(m){var g=m&&m.nodeName&&m.nodeName.toLowerCase();return g==="input"?!!wee[m.type]:g==="textarea"}function cO(m,g,b,j){Yu?Qu?Qu.push(j):Qu=[j]:Yu=j,g=ny(g,"onChange"),0<g.length&&(b=new m0("onChange","change",null,b,j),m.push({event:b,listeners:g}))}var mh=null,fh=null;function Nee(m){W5(m,0)}function h0(m){var g=wn(m);if(GD(g))return m}function dO(m,g){if(m==="change")return g}var uO=!1;if(Il){var f1;if(Il){var h1="oninput"in document;if(!h1){var mO=document.createElement("div");mO.setAttribute("oninput","return;"),h1=typeof mO.oninput=="function"}f1=h1}else f1=!1;uO=f1&&(!document.documentMode||9<document.documentMode)}function fO(){mh&&(mh.detachEvent("onpropertychange",hO),fh=mh=null)}function hO(m){if(m.propertyName==="value"&&h0(fh)){var g=[];cO(g,fh,m,s1(m)),XD(Nee,g)}}function jee(m,g,b){m==="focusin"?(fO(),mh=g,fh=b,mh.attachEvent("onpropertychange",hO)):m==="focusout"&&fO()}function Cee(m){if(m==="selectionchange"||m==="keyup"||m==="keydown")return h0(fh)}function See(m,g){if(m==="click")return h0(g)}function _ee(m,g){if(m==="input"||m==="change")return h0(g)}function Aee(m,g){return m===g&&(m!==0||1/m===1/g)||m!==m&&g!==g}var pr=typeof Object.is=="function"?Object.is:Aee;function hh(m,g){if(pr(m,g))return!0;if(typeof m!="object"||m===null||typeof g!="object"||g===null)return!1;var b=Object.keys(m),j=Object.keys(g);if(b.length!==j.length)return!1;for(j=0;j<b.length;j++){var P=b[j];if(!He.call(g,P)||!pr(m[P],g[P]))return!1}return!0}function gO(m){for(;m&&m.firstChild;)m=m.firstChild;return m}function pO(m,g){var b=gO(m);m=0;for(var j;b;){if(b.nodeType===3){if(j=m+b.textContent.length,m<=g&&j>=g)return{node:b,offset:g-m};m=j}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=gO(b)}}function xO(m,g){return m&&g?m===g?!0:m&&m.nodeType===3?!1:g&&g.nodeType===3?xO(m,g.parentNode):"contains"in m?m.contains(g):m.compareDocumentPosition?!!(m.compareDocumentPosition(g)&16):!1:!1}function yO(m){m=m!=null&&m.ownerDocument!=null&&m.ownerDocument.defaultView!=null?m.ownerDocument.defaultView:window;for(var g=l0(m.document);g instanceof m.HTMLIFrameElement;){try{var b=typeof g.contentWindow.location.href=="string"}catch{b=!1}if(b)m=g.contentWindow;else break;g=l0(m.document)}return g}function g1(m){var g=m&&m.nodeName&&m.nodeName.toLowerCase();return g&&(g==="input"&&(m.type==="text"||m.type==="search"||m.type==="tel"||m.type==="url"||m.type==="password")||g==="textarea"||m.contentEditable==="true")}var Eee=Il&&"documentMode"in document&&11>=document.documentMode,Xu=null,p1=null,gh=null,x1=!1;function bO(m,g,b){var j=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;x1||Xu==null||Xu!==l0(j)||(j=Xu,"selectionStart"in j&&g1(j)?j={start:j.selectionStart,end:j.selectionEnd}:(j=(j.ownerDocument&&j.ownerDocument.defaultView||window).getSelection(),j={anchorNode:j.anchorNode,anchorOffset:j.anchorOffset,focusNode:j.focusNode,focusOffset:j.focusOffset}),gh&&hh(gh,j)||(gh=j,j=ny(p1,"onSelect"),0<j.length&&(g=new m0("onSelect","select",null,g,b),m.push({event:g,listeners:j}),g.target=Xu)))}function gd(m,g){var b={};return b[m.toLowerCase()]=g.toLowerCase(),b["Webkit"+m]="webkit"+g,b["Moz"+m]="moz"+g,b}var Zu={animationend:gd("Animation","AnimationEnd"),animationiteration:gd("Animation","AnimationIteration"),animationstart:gd("Animation","AnimationStart"),transitionrun:gd("Transition","TransitionRun"),transitionstart:gd("Transition","TransitionStart"),transitioncancel:gd("Transition","TransitionCancel"),transitionend:gd("Transition","TransitionEnd")},y1={},vO={};Il&&(vO=document.createElement("div").style,"AnimationEvent"in window||(delete Zu.animationend.animation,delete Zu.animationiteration.animation,delete Zu.animationstart.animation),"TransitionEvent"in window||delete Zu.transitionend.transition);function pd(m){if(y1[m])return y1[m];if(!Zu[m])return m;var g=Zu[m],b;for(b in g)if(g.hasOwnProperty(b)&&b in vO)return y1[m]=g[b];return m}var wO=pd("animationend"),NO=pd("animationiteration"),jO=pd("animationstart"),Tee=pd("transitionrun"),kee=pd("transitionstart"),Lee=pd("transitioncancel"),CO=pd("transitionend"),SO=new Map,b1="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");b1.push("scrollEnd");function Ni(m,g){SO.set(m,g),fd(g,[m])}var g0=typeof reportError=="function"?reportError:function(m){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var g=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof m=="object"&&m!==null&&typeof m.message=="string"?String(m.message):String(m),error:m});if(!window.dispatchEvent(g))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",m);return}console.error(m)},Ur=[],Ju=0,v1=0;function p0(){for(var m=Ju,g=v1=Ju=0;g<m;){var b=Ur[g];Ur[g++]=null;var j=Ur[g];Ur[g++]=null;var P=Ur[g];Ur[g++]=null;var O=Ur[g];if(Ur[g++]=null,j!==null&&P!==null){var X=j.pending;X===null?P.next=P:(P.next=X.next,X.next=P),j.pending=P}O!==0&&_O(b,P,O)}}function x0(m,g,b,j){Ur[Ju++]=m,Ur[Ju++]=g,Ur[Ju++]=b,Ur[Ju++]=j,v1|=j,m.lanes|=j,m=m.alternate,m!==null&&(m.lanes|=j)}function w1(m,g,b,j){return x0(m,g,b,j),y0(m)}function xd(m,g){return x0(m,null,null,g),y0(m)}function _O(m,g,b){m.lanes|=b;var j=m.alternate;j!==null&&(j.lanes|=b);for(var P=!1,O=m.return;O!==null;)O.childLanes|=b,j=O.alternate,j!==null&&(j.childLanes|=b),O.tag===22&&(m=O.stateNode,m===null||m._visibility&1||(P=!0)),m=O,O=O.return;return m.tag===3?(O=m.stateNode,P&&g!==null&&(P=31-Ee(b),m=O.hiddenUpdates,j=m[P],j===null?m[P]=[g]:j.push(g),g.lane=b|536870912),O):null}function y0(m){if(50<$h)throw $h=0,kC=null,Error(s(185));for(var g=m.return;g!==null;)m=g,g=m.return;return m.tag===3?m.stateNode:null}var em={};function Pee(m,g,b,j){this.tag=m,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=j,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xr(m,g,b,j){return new Pee(m,g,b,j)}function N1(m){return m=m.prototype,!(!m||!m.isReactComponent)}function $l(m,g){var b=m.alternate;return b===null?(b=xr(m.tag,g,m.key,m.mode),b.elementType=m.elementType,b.type=m.type,b.stateNode=m.stateNode,b.alternate=m,m.alternate=b):(b.pendingProps=g,b.type=m.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=m.flags&65011712,b.childLanes=m.childLanes,b.lanes=m.lanes,b.child=m.child,b.memoizedProps=m.memoizedProps,b.memoizedState=m.memoizedState,b.updateQueue=m.updateQueue,g=m.dependencies,b.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},b.sibling=m.sibling,b.index=m.index,b.ref=m.ref,b.refCleanup=m.refCleanup,b}function AO(m,g){m.flags&=65011714;var b=m.alternate;return b===null?(m.childLanes=0,m.lanes=g,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=b.childLanes,m.lanes=b.lanes,m.child=b.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=b.memoizedProps,m.memoizedState=b.memoizedState,m.updateQueue=b.updateQueue,m.type=b.type,g=b.dependencies,m.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),m}function b0(m,g,b,j,P,O){var X=0;if(j=m,typeof m=="function")N1(m)&&(X=1);else if(typeof m=="string")X=$te(m,b,te.current)?26:m==="html"||m==="head"||m==="body"?27:5;else e:switch(m){case I:return m=xr(31,b,g,P),m.elementType=I,m.lanes=O,m;case w:return yd(b.children,P,O,g);case v:X=8,P|=24;break;case C:return m=xr(12,b,g,P|2),m.elementType=C,m.lanes=O,m;case k:return m=xr(13,b,g,P),m.elementType=k,m.lanes=O,m;case _:return m=xr(19,b,g,P),m.elementType=_,m.lanes=O,m;default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case S:X=10;break e;case N:X=9;break e;case T:X=11;break e;case E:X=14;break e;case A:X=16,j=null;break e}X=29,b=Error(s(130,m===null?"null":typeof m,"")),j=null}return g=xr(X,b,g,P),g.elementType=m,g.type=j,g.lanes=O,g}function yd(m,g,b,j){return m=xr(7,m,j,g),m.lanes=b,m}function j1(m,g,b){return m=xr(6,m,null,g),m.lanes=b,m}function EO(m){var g=xr(18,null,null,0);return g.stateNode=m,g}function C1(m,g,b){return g=xr(4,m.children!==null?m.children:[],m.key,g),g.lanes=b,g.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},g}var TO=new WeakMap;function Br(m,g){if(typeof m=="object"&&m!==null){var b=TO.get(m);return b!==void 0?b:(g={value:m,source:g,stack:Te(g)},TO.set(m,g),g)}return{value:m,source:g,stack:Te(g)}}var tm=[],nm=0,v0=null,ph=0,Hr=[],Gr=0,Jo=null,Vi=1,qi="";function Rl(m,g){tm[nm++]=ph,tm[nm++]=v0,v0=m,ph=g}function kO(m,g,b){Hr[Gr++]=Vi,Hr[Gr++]=qi,Hr[Gr++]=Jo,Jo=m;var j=Vi;m=qi;var P=32-Ee(j)-1;j&=~(1<<P),b+=1;var O=32-Ee(g)+P;if(30<O){var X=P-P%5;O=(j&(1<<X)-1).toString(32),j>>=X,P-=X,Vi=1<<32-Ee(g)+P|b<<P|j,qi=O+m}else Vi=1<<O|b<<P|j,qi=m}function S1(m){m.return!==null&&(Rl(m,1),kO(m,1,0))}function _1(m){for(;m===v0;)v0=tm[--nm],tm[nm]=null,ph=tm[--nm],tm[nm]=null;for(;m===Jo;)Jo=Hr[--Gr],Hr[Gr]=null,qi=Hr[--Gr],Hr[Gr]=null,Vi=Hr[--Gr],Hr[Gr]=null}function LO(m,g){Hr[Gr++]=Vi,Hr[Gr++]=qi,Hr[Gr++]=Jo,Vi=g.id,qi=g.overflow,Jo=m}var fs=null,Yn=null,mn=!1,ec=null,Wr=!1,A1=Error(s(519));function tc(m){var g=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw xh(Br(g,m)),A1}function PO(m){var g=m.stateNode,b=m.type,j=m.memoizedProps;switch(g[Nt]=m,g[L]=j,b){case"dialog":rn("cancel",g),rn("close",g);break;case"iframe":case"object":case"embed":rn("load",g);break;case"video":case"audio":for(b=0;b<zh.length;b++)rn(zh[b],g);break;case"source":rn("error",g);break;case"img":case"image":case"link":rn("error",g),rn("load",g);break;case"details":rn("toggle",g);break;case"input":rn("invalid",g),WD(g,j.value,j.defaultValue,j.checked,j.defaultChecked,j.type,j.name,!0);break;case"select":rn("invalid",g);break;case"textarea":rn("invalid",g),qD(g,j.value,j.defaultValue,j.children)}b=j.children,typeof b!="string"&&typeof b!="number"&&typeof b!="bigint"||g.textContent===""+b||j.suppressHydrationWarning===!0||Q5(g.textContent,b)?(j.popover!=null&&(rn("beforetoggle",g),rn("toggle",g)),j.onScroll!=null&&rn("scroll",g),j.onScrollEnd!=null&&rn("scrollend",g),j.onClick!=null&&(g.onclick=Ml),g=!0):g=!1,g||tc(m,!0)}function DO(m){for(fs=m.return;fs;)switch(fs.tag){case 5:case 31:case 13:Wr=!1;return;case 27:case 3:Wr=!0;return;default:fs=fs.return}}function am(m){if(m!==fs)return!1;if(!mn)return DO(m),mn=!0,!1;var g=m.tag,b;if((b=g!==3&&g!==27)&&((b=g===5)&&(b=m.type,b=!(b!=="form"&&b!=="button")||WC(m.type,m.memoizedProps)),b=!b),b&&Yn&&tc(m),DO(m),g===13){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));Yn=sM(m)}else if(g===31){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));Yn=sM(m)}else g===27?(g=Yn,gc(m.type)?(m=KC,KC=null,Yn=m):Yn=g):Yn=fs?qr(m.stateNode.nextSibling):null;return!0}function bd(){Yn=fs=null,mn=!1}function E1(){var m=ec;return m!==null&&(Qs===null?Qs=m:Qs.push.apply(Qs,m),ec=null),m}function xh(m){ec===null?ec=[m]:ec.push(m)}var T1=ee(null),vd=null,zl=null;function nc(m,g,b){ye(T1,g._currentValue),g._currentValue=b}function Fl(m){m._currentValue=T1.current,H(T1)}function k1(m,g,b){for(;m!==null;){var j=m.alternate;if((m.childLanes&g)!==g?(m.childLanes|=g,j!==null&&(j.childLanes|=g)):j!==null&&(j.childLanes&g)!==g&&(j.childLanes|=g),m===b)break;m=m.return}}function L1(m,g,b,j){var P=m.child;for(P!==null&&(P.return=m);P!==null;){var O=P.dependencies;if(O!==null){var X=P.child;O=O.firstContext;e:for(;O!==null;){var we=O;O=P;for(var ze=0;ze<g.length;ze++)if(we.context===g[ze]){O.lanes|=b,we=O.alternate,we!==null&&(we.lanes|=b),k1(O.return,b,m),j||(X=null);break e}O=we.next}}else if(P.tag===18){if(X=P.return,X===null)throw Error(s(341));X.lanes|=b,O=X.alternate,O!==null&&(O.lanes|=b),k1(X,b,m),X=null}else X=P.child;if(X!==null)X.return=P;else for(X=P;X!==null;){if(X===m){X=null;break}if(P=X.sibling,P!==null){P.return=X.return,X=P;break}X=X.return}P=X}}function sm(m,g,b,j){m=null;for(var P=g,O=!1;P!==null;){if(!O){if((P.flags&524288)!==0)O=!0;else if((P.flags&262144)!==0)break}if(P.tag===10){var X=P.alternate;if(X===null)throw Error(s(387));if(X=X.memoizedProps,X!==null){var we=P.type;pr(P.pendingProps.value,X.value)||(m!==null?m.push(we):m=[we])}}else if(P===Oe.current){if(X=P.alternate,X===null)throw Error(s(387));X.memoizedState.memoizedState!==P.memoizedState.memoizedState&&(m!==null?m.push(Gh):m=[Gh])}P=P.return}m!==null&&L1(g,m,b,j),g.flags|=262144}function w0(m){for(m=m.firstContext;m!==null;){if(!pr(m.context._currentValue,m.memoizedValue))return!0;m=m.next}return!1}function wd(m){vd=m,zl=null,m=m.dependencies,m!==null&&(m.firstContext=null)}function hs(m){return OO(vd,m)}function N0(m,g){return vd===null&&wd(m),OO(m,g)}function OO(m,g){var b=g._currentValue;if(g={context:g,memoizedValue:b,next:null},zl===null){if(m===null)throw Error(s(308));zl=g,m.dependencies={lanes:0,firstContext:g},m.flags|=524288}else zl=zl.next=g;return b}var Dee=typeof AbortController<"u"?AbortController:function(){var m=[],g=this.signal={aborted:!1,addEventListener:function(b,j){m.push(j)}};this.abort=function(){g.aborted=!0,m.forEach(function(b){return b()})}},Oee=e.unstable_scheduleCallback,Mee=e.unstable_NormalPriority,Ea={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function P1(){return{controller:new Dee,data:new Map,refCount:0}}function yh(m){m.refCount--,m.refCount===0&&Oee(Mee,function(){m.controller.abort()})}var bh=null,D1=0,rm=0,im=null;function Iee(m,g){if(bh===null){var b=bh=[];D1=0,rm=IC(),im={status:"pending",value:void 0,then:function(j){b.push(j)}}}return D1++,g.then(MO,MO),g}function MO(){if(--D1===0&&bh!==null){im!==null&&(im.status="fulfilled");var m=bh;bh=null,rm=0,im=null;for(var g=0;g<m.length;g++)(0,m[g])()}}function $ee(m,g){var b=[],j={status:"pending",value:null,reason:null,then:function(P){b.push(P)}};return m.then(function(){j.status="fulfilled",j.value=g;for(var P=0;P<b.length;P++)(0,b[P])(g)},function(P){for(j.status="rejected",j.reason=P,P=0;P<b.length;P++)(0,b[P])(void 0)}),j}var IO=R.S;R.S=function(m,g){b5=de(),typeof g=="object"&&g!==null&&typeof g.then=="function"&&Iee(m,g),IO!==null&&IO(m,g)};var Nd=ee(null);function O1(){var m=Nd.current;return m!==null?m:Fn.pooledCache}function j0(m,g){g===null?ye(Nd,Nd.current):ye(Nd,g.pool)}function $O(){var m=O1();return m===null?null:{parent:Ea._currentValue,pool:m}}var lm=Error(s(460)),M1=Error(s(474)),C0=Error(s(542)),S0={then:function(){}};function RO(m){return m=m.status,m==="fulfilled"||m==="rejected"}function zO(m,g,b){switch(b=m[b],b===void 0?m.push(g):b!==g&&(g.then(Ml,Ml),g=b),g.status){case"fulfilled":return g.value;case"rejected":throw m=g.reason,UO(m),m;default:if(typeof g.status=="string")g.then(Ml,Ml);else{if(m=Fn,m!==null&&100<m.shellSuspendCounter)throw Error(s(482));m=g,m.status="pending",m.then(function(j){if(g.status==="pending"){var P=g;P.status="fulfilled",P.value=j}},function(j){if(g.status==="pending"){var P=g;P.status="rejected",P.reason=j}})}switch(g.status){case"fulfilled":return g.value;case"rejected":throw m=g.reason,UO(m),m}throw Cd=g,lm}}function jd(m){try{var g=m._init;return g(m._payload)}catch(b){throw b!==null&&typeof b=="object"&&typeof b.then=="function"?(Cd=b,lm):b}}var Cd=null;function FO(){if(Cd===null)throw Error(s(459));var m=Cd;return Cd=null,m}function UO(m){if(m===lm||m===C0)throw Error(s(483))}var om=null,vh=0;function _0(m){var g=vh;return vh+=1,om===null&&(om=[]),zO(om,m,g)}function wh(m,g){g=g.props.ref,m.ref=g!==void 0?g:null}function A0(m,g){throw g.$$typeof===p?Error(s(525)):(m=Object.prototype.toString.call(g),Error(s(31,m==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":m)))}function BO(m){function g(Xe,Ge){if(m){var et=Xe.deletions;et===null?(Xe.deletions=[Ge],Xe.flags|=16):et.push(Ge)}}function b(Xe,Ge){if(!m)return null;for(;Ge!==null;)g(Xe,Ge),Ge=Ge.sibling;return null}function j(Xe){for(var Ge=new Map;Xe!==null;)Xe.key!==null?Ge.set(Xe.key,Xe):Ge.set(Xe.index,Xe),Xe=Xe.sibling;return Ge}function P(Xe,Ge){return Xe=$l(Xe,Ge),Xe.index=0,Xe.sibling=null,Xe}function O(Xe,Ge,et){return Xe.index=et,m?(et=Xe.alternate,et!==null?(et=et.index,et<Ge?(Xe.flags|=67108866,Ge):et):(Xe.flags|=67108866,Ge)):(Xe.flags|=1048576,Ge)}function X(Xe){return m&&Xe.alternate===null&&(Xe.flags|=67108866),Xe}function we(Xe,Ge,et,mt){return Ge===null||Ge.tag!==6?(Ge=j1(et,Xe.mode,mt),Ge.return=Xe,Ge):(Ge=P(Ge,et),Ge.return=Xe,Ge)}function ze(Xe,Ge,et,mt){var Ft=et.type;return Ft===w?dt(Xe,Ge,et.props.children,mt,et.key):Ge!==null&&(Ge.elementType===Ft||typeof Ft=="object"&&Ft!==null&&Ft.$$typeof===A&&jd(Ft)===Ge.type)?(Ge=P(Ge,et.props),wh(Ge,et),Ge.return=Xe,Ge):(Ge=b0(et.type,et.key,et.props,null,Xe.mode,mt),wh(Ge,et),Ge.return=Xe,Ge)}function tt(Xe,Ge,et,mt){return Ge===null||Ge.tag!==4||Ge.stateNode.containerInfo!==et.containerInfo||Ge.stateNode.implementation!==et.implementation?(Ge=C1(et,Xe.mode,mt),Ge.return=Xe,Ge):(Ge=P(Ge,et.children||[]),Ge.return=Xe,Ge)}function dt(Xe,Ge,et,mt,Ft){return Ge===null||Ge.tag!==7?(Ge=yd(et,Xe.mode,mt,Ft),Ge.return=Xe,Ge):(Ge=P(Ge,et),Ge.return=Xe,Ge)}function ft(Xe,Ge,et){if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number"||typeof Ge=="bigint")return Ge=j1(""+Ge,Xe.mode,et),Ge.return=Xe,Ge;if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case x:return et=b0(Ge.type,Ge.key,Ge.props,null,Xe.mode,et),wh(et,Ge),et.return=Xe,et;case y:return Ge=C1(Ge,Xe.mode,et),Ge.return=Xe,Ge;case A:return Ge=jd(Ge),ft(Xe,Ge,et)}if(Z(Ge)||D(Ge))return Ge=yd(Ge,Xe.mode,et,null),Ge.return=Xe,Ge;if(typeof Ge.then=="function")return ft(Xe,_0(Ge),et);if(Ge.$$typeof===S)return ft(Xe,N0(Xe,Ge),et);A0(Xe,Ge)}return null}function at(Xe,Ge,et,mt){var Ft=Ge!==null?Ge.key:null;if(typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint")return Ft!==null?null:we(Xe,Ge,""+et,mt);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case x:return et.key===Ft?ze(Xe,Ge,et,mt):null;case y:return et.key===Ft?tt(Xe,Ge,et,mt):null;case A:return et=jd(et),at(Xe,Ge,et,mt)}if(Z(et)||D(et))return Ft!==null?null:dt(Xe,Ge,et,mt,null);if(typeof et.then=="function")return at(Xe,Ge,_0(et),mt);if(et.$$typeof===S)return at(Xe,Ge,N0(Xe,et),mt);A0(Xe,et)}return null}function ot(Xe,Ge,et,mt,Ft){if(typeof mt=="string"&&mt!==""||typeof mt=="number"||typeof mt=="bigint")return Xe=Xe.get(et)||null,we(Ge,Xe,""+mt,Ft);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case x:return Xe=Xe.get(mt.key===null?et:mt.key)||null,ze(Ge,Xe,mt,Ft);case y:return Xe=Xe.get(mt.key===null?et:mt.key)||null,tt(Ge,Xe,mt,Ft);case A:return mt=jd(mt),ot(Xe,Ge,et,mt,Ft)}if(Z(mt)||D(mt))return Xe=Xe.get(et)||null,dt(Ge,Xe,mt,Ft,null);if(typeof mt.then=="function")return ot(Xe,Ge,et,_0(mt),Ft);if(mt.$$typeof===S)return ot(Xe,Ge,et,N0(Ge,mt),Ft);A0(Ge,mt)}return null}function Lt(Xe,Ge,et,mt){for(var Ft=null,yn=null,It=Ge,tn=Ge=0,on=null;It!==null&&tn<et.length;tn++){It.index>tn?(on=It,It=null):on=It.sibling;var bn=at(Xe,It,et[tn],mt);if(bn===null){It===null&&(It=on);break}m&&It&&bn.alternate===null&&g(Xe,It),Ge=O(bn,Ge,tn),yn===null?Ft=bn:yn.sibling=bn,yn=bn,It=on}if(tn===et.length)return b(Xe,It),mn&&Rl(Xe,tn),Ft;if(It===null){for(;tn<et.length;tn++)It=ft(Xe,et[tn],mt),It!==null&&(Ge=O(It,Ge,tn),yn===null?Ft=It:yn.sibling=It,yn=It);return mn&&Rl(Xe,tn),Ft}for(It=j(It);tn<et.length;tn++)on=ot(It,Xe,tn,et[tn],mt),on!==null&&(m&&on.alternate!==null&&It.delete(on.key===null?tn:on.key),Ge=O(on,Ge,tn),yn===null?Ft=on:yn.sibling=on,yn=on);return m&&It.forEach(function(vc){return g(Xe,vc)}),mn&&Rl(Xe,tn),Ft}function Ht(Xe,Ge,et,mt){if(et==null)throw Error(s(151));for(var Ft=null,yn=null,It=Ge,tn=Ge=0,on=null,bn=et.next();It!==null&&!bn.done;tn++,bn=et.next()){It.index>tn?(on=It,It=null):on=It.sibling;var vc=at(Xe,It,bn.value,mt);if(vc===null){It===null&&(It=on);break}m&&It&&vc.alternate===null&&g(Xe,It),Ge=O(vc,Ge,tn),yn===null?Ft=vc:yn.sibling=vc,yn=vc,It=on}if(bn.done)return b(Xe,It),mn&&Rl(Xe,tn),Ft;if(It===null){for(;!bn.done;tn++,bn=et.next())bn=ft(Xe,bn.value,mt),bn!==null&&(Ge=O(bn,Ge,tn),yn===null?Ft=bn:yn.sibling=bn,yn=bn);return mn&&Rl(Xe,tn),Ft}for(It=j(It);!bn.done;tn++,bn=et.next())bn=ot(It,Xe,tn,bn.value,mt),bn!==null&&(m&&bn.alternate!==null&&It.delete(bn.key===null?tn:bn.key),Ge=O(bn,Ge,tn),yn===null?Ft=bn:yn.sibling=bn,yn=bn);return m&&It.forEach(function(Yte){return g(Xe,Yte)}),mn&&Rl(Xe,tn),Ft}function $n(Xe,Ge,et,mt){if(typeof et=="object"&&et!==null&&et.type===w&&et.key===null&&(et=et.props.children),typeof et=="object"&&et!==null){switch(et.$$typeof){case x:e:{for(var Ft=et.key;Ge!==null;){if(Ge.key===Ft){if(Ft=et.type,Ft===w){if(Ge.tag===7){b(Xe,Ge.sibling),mt=P(Ge,et.props.children),mt.return=Xe,Xe=mt;break e}}else if(Ge.elementType===Ft||typeof Ft=="object"&&Ft!==null&&Ft.$$typeof===A&&jd(Ft)===Ge.type){b(Xe,Ge.sibling),mt=P(Ge,et.props),wh(mt,et),mt.return=Xe,Xe=mt;break e}b(Xe,Ge);break}else g(Xe,Ge);Ge=Ge.sibling}et.type===w?(mt=yd(et.props.children,Xe.mode,mt,et.key),mt.return=Xe,Xe=mt):(mt=b0(et.type,et.key,et.props,null,Xe.mode,mt),wh(mt,et),mt.return=Xe,Xe=mt)}return X(Xe);case y:e:{for(Ft=et.key;Ge!==null;){if(Ge.key===Ft)if(Ge.tag===4&&Ge.stateNode.containerInfo===et.containerInfo&&Ge.stateNode.implementation===et.implementation){b(Xe,Ge.sibling),mt=P(Ge,et.children||[]),mt.return=Xe,Xe=mt;break e}else{b(Xe,Ge);break}else g(Xe,Ge);Ge=Ge.sibling}mt=C1(et,Xe.mode,mt),mt.return=Xe,Xe=mt}return X(Xe);case A:return et=jd(et),$n(Xe,Ge,et,mt)}if(Z(et))return Lt(Xe,Ge,et,mt);if(D(et)){if(Ft=D(et),typeof Ft!="function")throw Error(s(150));return et=Ft.call(et),Ht(Xe,Ge,et,mt)}if(typeof et.then=="function")return $n(Xe,Ge,_0(et),mt);if(et.$$typeof===S)return $n(Xe,Ge,N0(Xe,et),mt);A0(Xe,et)}return typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint"?(et=""+et,Ge!==null&&Ge.tag===6?(b(Xe,Ge.sibling),mt=P(Ge,et),mt.return=Xe,Xe=mt):(b(Xe,Ge),mt=j1(et,Xe.mode,mt),mt.return=Xe,Xe=mt),X(Xe)):b(Xe,Ge)}return function(Xe,Ge,et,mt){try{vh=0;var Ft=$n(Xe,Ge,et,mt);return om=null,Ft}catch(It){if(It===lm||It===C0)throw It;var yn=xr(29,It,null,Xe.mode);return yn.lanes=mt,yn.return=Xe,yn}}}var Sd=BO(!0),HO=BO(!1),ac=!1;function I1(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $1(m,g){m=m.updateQueue,g.updateQueue===m&&(g.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,callbacks:null})}function sc(m){return{lane:m,tag:0,payload:null,callback:null,next:null}}function rc(m,g,b){var j=m.updateQueue;if(j===null)return null;if(j=j.shared,(Nn&2)!==0){var P=j.pending;return P===null?g.next=g:(g.next=P.next,P.next=g),j.pending=g,g=y0(m),_O(m,null,b),g}return x0(m,j,g,b),y0(m)}function Nh(m,g,b){if(g=g.updateQueue,g!==null&&(g=g.shared,(b&4194048)!==0)){var j=g.lanes;j&=m.pendingLanes,b|=j,g.lanes=b,gt(m,b)}}function R1(m,g){var b=m.updateQueue,j=m.alternate;if(j!==null&&(j=j.updateQueue,b===j)){var P=null,O=null;if(b=b.firstBaseUpdate,b!==null){do{var X={lane:b.lane,tag:b.tag,payload:b.payload,callback:null,next:null};O===null?P=O=X:O=O.next=X,b=b.next}while(b!==null);O===null?P=O=g:O=O.next=g}else P=O=g;b={baseState:j.baseState,firstBaseUpdate:P,lastBaseUpdate:O,shared:j.shared,callbacks:j.callbacks},m.updateQueue=b;return}m=b.lastBaseUpdate,m===null?b.firstBaseUpdate=g:m.next=g,b.lastBaseUpdate=g}var z1=!1;function jh(){if(z1){var m=im;if(m!==null)throw m}}function Ch(m,g,b,j){z1=!1;var P=m.updateQueue;ac=!1;var O=P.firstBaseUpdate,X=P.lastBaseUpdate,we=P.shared.pending;if(we!==null){P.shared.pending=null;var ze=we,tt=ze.next;ze.next=null,X===null?O=tt:X.next=tt,X=ze;var dt=m.alternate;dt!==null&&(dt=dt.updateQueue,we=dt.lastBaseUpdate,we!==X&&(we===null?dt.firstBaseUpdate=tt:we.next=tt,dt.lastBaseUpdate=ze))}if(O!==null){var ft=P.baseState;X=0,dt=tt=ze=null,we=O;do{var at=we.lane&-536870913,ot=at!==we.lane;if(ot?(ln&at)===at:(j&at)===at){at!==0&&at===rm&&(z1=!0),dt!==null&&(dt=dt.next={lane:0,tag:we.tag,payload:we.payload,callback:null,next:null});e:{var Lt=m,Ht=we;at=g;var $n=b;switch(Ht.tag){case 1:if(Lt=Ht.payload,typeof Lt=="function"){ft=Lt.call($n,ft,at);break e}ft=Lt;break e;case 3:Lt.flags=Lt.flags&-65537|128;case 0:if(Lt=Ht.payload,at=typeof Lt=="function"?Lt.call($n,ft,at):Lt,at==null)break e;ft=f({},ft,at);break e;case 2:ac=!0}}at=we.callback,at!==null&&(m.flags|=64,ot&&(m.flags|=8192),ot=P.callbacks,ot===null?P.callbacks=[at]:ot.push(at))}else ot={lane:at,tag:we.tag,payload:we.payload,callback:we.callback,next:null},dt===null?(tt=dt=ot,ze=ft):dt=dt.next=ot,X|=at;if(we=we.next,we===null){if(we=P.shared.pending,we===null)break;ot=we,we=ot.next,ot.next=null,P.lastBaseUpdate=ot,P.shared.pending=null}}while(!0);dt===null&&(ze=ft),P.baseState=ze,P.firstBaseUpdate=tt,P.lastBaseUpdate=dt,O===null&&(P.shared.lanes=0),dc|=X,m.lanes=X,m.memoizedState=ft}}function GO(m,g){if(typeof m!="function")throw Error(s(191,m));m.call(g)}function WO(m,g){var b=m.callbacks;if(b!==null)for(m.callbacks=null,m=0;m<b.length;m++)GO(b[m],g)}var cm=ee(null),E0=ee(0);function VO(m,g){m=Ql,ye(E0,m),ye(cm,g),Ql=m|g.baseLanes}function F1(){ye(E0,Ql),ye(cm,cm.current)}function U1(){Ql=E0.current,H(cm),H(E0)}var yr=ee(null),Vr=null;function ic(m){var g=m.alternate;ye(wa,wa.current&1),ye(yr,m),Vr===null&&(g===null||cm.current!==null||g.memoizedState!==null)&&(Vr=m)}function B1(m){ye(wa,wa.current),ye(yr,m),Vr===null&&(Vr=m)}function qO(m){m.tag===22?(ye(wa,wa.current),ye(yr,m),Vr===null&&(Vr=m)):lc()}function lc(){ye(wa,wa.current),ye(yr,yr.current)}function br(m){H(yr),Vr===m&&(Vr=null),H(wa)}var wa=ee(0);function T0(m){for(var g=m;g!==null;){if(g.tag===13){var b=g.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||YC(b)||QC(b)))return g}else if(g.tag===19&&(g.memoizedProps.revealOrder==="forwards"||g.memoizedProps.revealOrder==="backwards"||g.memoizedProps.revealOrder==="unstable_legacy-backwards"||g.memoizedProps.revealOrder==="together")){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===m)break;for(;g.sibling===null;){if(g.return===null||g.return===m)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var Ul=0,Xt=null,Mn=null,Ta=null,k0=!1,dm=!1,_d=!1,L0=0,Sh=0,um=null,Ree=0;function ma(){throw Error(s(321))}function H1(m,g){if(g===null)return!1;for(var b=0;b<g.length&&b<m.length;b++)if(!pr(m[b],g[b]))return!1;return!0}function G1(m,g,b,j,P,O){return Ul=O,Xt=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,R.H=m===null||m.memoizedState===null?k3:rC,_d=!1,O=b(j,P),_d=!1,dm&&(O=QO(g,b,j,P)),YO(m),O}function YO(m){R.H=Eh;var g=Mn!==null&&Mn.next!==null;if(Ul=0,Ta=Mn=Xt=null,k0=!1,Sh=0,um=null,g)throw Error(s(300));m===null||ka||(m=m.dependencies,m!==null&&w0(m)&&(ka=!0))}function QO(m,g,b,j){Xt=m;var P=0;do{if(dm&&(um=null),Sh=0,dm=!1,25<=P)throw Error(s(301));if(P+=1,Ta=Mn=null,m.updateQueue!=null){var O=m.updateQueue;O.lastEffect=null,O.events=null,O.stores=null,O.memoCache!=null&&(O.memoCache.index=0)}R.H=L3,O=g(b,j)}while(dm);return O}function zee(){var m=R.H,g=m.useState()[0];return g=typeof g.then=="function"?_h(g):g,m=m.useState()[0],(Mn!==null?Mn.memoizedState:null)!==m&&(Xt.flags|=1024),g}function W1(){var m=L0!==0;return L0=0,m}function V1(m,g,b){g.updateQueue=m.updateQueue,g.flags&=-2053,m.lanes&=~b}function q1(m){if(k0){for(m=m.memoizedState;m!==null;){var g=m.queue;g!==null&&(g.pending=null),m=m.next}k0=!1}Ul=0,Ta=Mn=Xt=null,dm=!1,Sh=L0=0,um=null}function Ms(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ta===null?Xt.memoizedState=Ta=m:Ta=Ta.next=m,Ta}function Na(){if(Mn===null){var m=Xt.alternate;m=m!==null?m.memoizedState:null}else m=Mn.next;var g=Ta===null?Xt.memoizedState:Ta.next;if(g!==null)Ta=g,Mn=m;else{if(m===null)throw Xt.alternate===null?Error(s(467)):Error(s(310));Mn=m,m={memoizedState:Mn.memoizedState,baseState:Mn.baseState,baseQueue:Mn.baseQueue,queue:Mn.queue,next:null},Ta===null?Xt.memoizedState=Ta=m:Ta=Ta.next=m}return Ta}function P0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function _h(m){var g=Sh;return Sh+=1,um===null&&(um=[]),m=zO(um,m,g),g=Xt,(Ta===null?g.memoizedState:Ta.next)===null&&(g=g.alternate,R.H=g===null||g.memoizedState===null?k3:rC),m}function D0(m){if(m!==null&&typeof m=="object"){if(typeof m.then=="function")return _h(m);if(m.$$typeof===S)return hs(m)}throw Error(s(438,String(m)))}function Y1(m){var g=null,b=Xt.updateQueue;if(b!==null&&(g=b.memoCache),g==null){var j=Xt.alternate;j!==null&&(j=j.updateQueue,j!==null&&(j=j.memoCache,j!=null&&(g={data:j.data.map(function(P){return P.slice()}),index:0})))}if(g==null&&(g={data:[],index:0}),b===null&&(b=P0(),Xt.updateQueue=b),b.memoCache=g,b=g.data[g.index],b===void 0)for(b=g.data[g.index]=Array(m),j=0;j<m;j++)b[j]=z;return g.index++,b}function Bl(m,g){return typeof g=="function"?g(m):g}function O0(m){var g=Na();return Q1(g,Mn,m)}function Q1(m,g,b){var j=m.queue;if(j===null)throw Error(s(311));j.lastRenderedReducer=b;var P=m.baseQueue,O=j.pending;if(O!==null){if(P!==null){var X=P.next;P.next=O.next,O.next=X}g.baseQueue=P=O,j.pending=null}if(O=m.baseState,P===null)m.memoizedState=O;else{g=P.next;var we=X=null,ze=null,tt=g,dt=!1;do{var ft=tt.lane&-536870913;if(ft!==tt.lane?(ln&ft)===ft:(Ul&ft)===ft){var at=tt.revertLane;if(at===0)ze!==null&&(ze=ze.next={lane:0,revertLane:0,gesture:null,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null}),ft===rm&&(dt=!0);else if((Ul&at)===at){tt=tt.next,at===rm&&(dt=!0);continue}else ft={lane:0,revertLane:tt.revertLane,gesture:null,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null},ze===null?(we=ze=ft,X=O):ze=ze.next=ft,Xt.lanes|=at,dc|=at;ft=tt.action,_d&&b(O,ft),O=tt.hasEagerState?tt.eagerState:b(O,ft)}else at={lane:ft,revertLane:tt.revertLane,gesture:tt.gesture,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null},ze===null?(we=ze=at,X=O):ze=ze.next=at,Xt.lanes|=ft,dc|=ft;tt=tt.next}while(tt!==null&&tt!==g);if(ze===null?X=O:ze.next=we,!pr(O,m.memoizedState)&&(ka=!0,dt&&(b=im,b!==null)))throw b;m.memoizedState=O,m.baseState=X,m.baseQueue=ze,j.lastRenderedState=O}return P===null&&(j.lanes=0),[m.memoizedState,j.dispatch]}function K1(m){var g=Na(),b=g.queue;if(b===null)throw Error(s(311));b.lastRenderedReducer=m;var j=b.dispatch,P=b.pending,O=g.memoizedState;if(P!==null){b.pending=null;var X=P=P.next;do O=m(O,X.action),X=X.next;while(X!==P);pr(O,g.memoizedState)||(ka=!0),g.memoizedState=O,g.baseQueue===null&&(g.baseState=O),b.lastRenderedState=O}return[O,j]}function KO(m,g,b){var j=Xt,P=Na(),O=mn;if(O){if(b===void 0)throw Error(s(407));b=b()}else b=g();var X=!pr((Mn||P).memoizedState,b);if(X&&(P.memoizedState=b,ka=!0),P=P.queue,J1(JO.bind(null,j,P,m),[m]),P.getSnapshot!==g||X||Ta!==null&&Ta.memoizedState.tag&1){if(j.flags|=2048,mm(9,{destroy:void 0},ZO.bind(null,j,P,b,g),null),Fn===null)throw Error(s(349));O||(Ul&127)!==0||XO(j,g,b)}return b}function XO(m,g,b){m.flags|=16384,m={getSnapshot:g,value:b},g=Xt.updateQueue,g===null?(g=P0(),Xt.updateQueue=g,g.stores=[m]):(b=g.stores,b===null?g.stores=[m]:b.push(m))}function ZO(m,g,b,j){g.value=b,g.getSnapshot=j,e3(g)&&t3(m)}function JO(m,g,b){return b(function(){e3(g)&&t3(m)})}function e3(m){var g=m.getSnapshot;m=m.value;try{var b=g();return!pr(m,b)}catch{return!0}}function t3(m){var g=xd(m,2);g!==null&&Ks(g,m,2)}function X1(m){var g=Ms();if(typeof m=="function"){var b=m;if(m=b(),_d){st(!0);try{b()}finally{st(!1)}}}return g.memoizedState=g.baseState=m,g.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bl,lastRenderedState:m},g}function n3(m,g,b,j){return m.baseState=b,Q1(m,Mn,typeof j=="function"?j:Bl)}function Fee(m,g,b,j,P){if($0(m))throw Error(s(485));if(m=g.action,m!==null){var O={payload:P,action:m,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(X){O.listeners.push(X)}};R.T!==null?b(!0):O.isTransition=!1,j(O),b=g.pending,b===null?(O.next=g.pending=O,a3(g,O)):(O.next=b.next,g.pending=b.next=O)}}function a3(m,g){var b=g.action,j=g.payload,P=m.state;if(g.isTransition){var O=R.T,X={};R.T=X;try{var we=b(P,j),ze=R.S;ze!==null&&ze(X,we),s3(m,g,we)}catch(tt){Z1(m,g,tt)}finally{O!==null&&X.types!==null&&(O.types=X.types),R.T=O}}else try{O=b(P,j),s3(m,g,O)}catch(tt){Z1(m,g,tt)}}function s3(m,g,b){b!==null&&typeof b=="object"&&typeof b.then=="function"?b.then(function(j){r3(m,g,j)},function(j){return Z1(m,g,j)}):r3(m,g,b)}function r3(m,g,b){g.status="fulfilled",g.value=b,i3(g),m.state=b,g=m.pending,g!==null&&(b=g.next,b===g?m.pending=null:(b=b.next,g.next=b,a3(m,b)))}function Z1(m,g,b){var j=m.pending;if(m.pending=null,j!==null){j=j.next;do g.status="rejected",g.reason=b,i3(g),g=g.next;while(g!==j)}m.action=null}function i3(m){m=m.listeners;for(var g=0;g<m.length;g++)(0,m[g])()}function l3(m,g){return g}function o3(m,g){if(mn){var b=Fn.formState;if(b!==null){e:{var j=Xt;if(mn){if(Yn){t:{for(var P=Yn,O=Wr;P.nodeType!==8;){if(!O){P=null;break t}if(P=qr(P.nextSibling),P===null){P=null;break t}}O=P.data,P=O==="F!"||O==="F"?P:null}if(P){Yn=qr(P.nextSibling),j=P.data==="F!";break e}}tc(j)}j=!1}j&&(g=b[0])}}return b=Ms(),b.memoizedState=b.baseState=g,j={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l3,lastRenderedState:g},b.queue=j,b=A3.bind(null,Xt,j),j.dispatch=b,j=X1(!1),O=sC.bind(null,Xt,!1,j.queue),j=Ms(),P={state:g,dispatch:null,action:m,pending:null},j.queue=P,b=Fee.bind(null,Xt,P,O,b),P.dispatch=b,j.memoizedState=m,[g,b,!1]}function c3(m){var g=Na();return d3(g,Mn,m)}function d3(m,g,b){if(g=Q1(m,g,l3)[0],m=O0(Bl)[0],typeof g=="object"&&g!==null&&typeof g.then=="function")try{var j=_h(g)}catch(X){throw X===lm?C0:X}else j=g;g=Na();var P=g.queue,O=P.dispatch;return b!==g.memoizedState&&(Xt.flags|=2048,mm(9,{destroy:void 0},Uee.bind(null,P,b),null)),[j,O,m]}function Uee(m,g){m.action=g}function u3(m){var g=Na(),b=Mn;if(b!==null)return d3(g,b,m);Na(),g=g.memoizedState,b=Na();var j=b.queue.dispatch;return b.memoizedState=m,[g,j,!1]}function mm(m,g,b,j){return m={tag:m,create:b,deps:j,inst:g,next:null},g=Xt.updateQueue,g===null&&(g=P0(),Xt.updateQueue=g),b=g.lastEffect,b===null?g.lastEffect=m.next=m:(j=b.next,b.next=m,m.next=j,g.lastEffect=m),m}function m3(){return Na().memoizedState}function M0(m,g,b,j){var P=Ms();Xt.flags|=m,P.memoizedState=mm(1|g,{destroy:void 0},b,j===void 0?null:j)}function I0(m,g,b,j){var P=Na();j=j===void 0?null:j;var O=P.memoizedState.inst;Mn!==null&&j!==null&&H1(j,Mn.memoizedState.deps)?P.memoizedState=mm(g,O,b,j):(Xt.flags|=m,P.memoizedState=mm(1|g,O,b,j))}function f3(m,g){M0(8390656,8,m,g)}function J1(m,g){I0(2048,8,m,g)}function Bee(m){Xt.flags|=4;var g=Xt.updateQueue;if(g===null)g=P0(),Xt.updateQueue=g,g.events=[m];else{var b=g.events;b===null?g.events=[m]:b.push(m)}}function h3(m){var g=Na().memoizedState;return Bee({ref:g,nextImpl:m}),function(){if((Nn&2)!==0)throw Error(s(440));return g.impl.apply(void 0,arguments)}}function g3(m,g){return I0(4,2,m,g)}function p3(m,g){return I0(4,4,m,g)}function x3(m,g){if(typeof g=="function"){m=m();var b=g(m);return function(){typeof b=="function"?b():g(null)}}if(g!=null)return m=m(),g.current=m,function(){g.current=null}}function y3(m,g,b){b=b!=null?b.concat([m]):null,I0(4,4,x3.bind(null,g,m),b)}function eC(){}function b3(m,g){var b=Na();g=g===void 0?null:g;var j=b.memoizedState;return g!==null&&H1(g,j[1])?j[0]:(b.memoizedState=[m,g],m)}function v3(m,g){var b=Na();g=g===void 0?null:g;var j=b.memoizedState;if(g!==null&&H1(g,j[1]))return j[0];if(j=m(),_d){st(!0);try{m()}finally{st(!1)}}return b.memoizedState=[j,g],j}function tC(m,g,b){return b===void 0||(Ul&1073741824)!==0&&(ln&261930)===0?m.memoizedState=g:(m.memoizedState=b,m=w5(),Xt.lanes|=m,dc|=m,b)}function w3(m,g,b,j){return pr(b,g)?b:cm.current!==null?(m=tC(m,b,j),pr(m,g)||(ka=!0),m):(Ul&42)===0||(Ul&1073741824)!==0&&(ln&261930)===0?(ka=!0,m.memoizedState=b):(m=w5(),Xt.lanes|=m,dc|=m,g)}function N3(m,g,b,j,P){var O=Q.p;Q.p=O!==0&&8>O?O:8;var X=R.T,we={};R.T=we,sC(m,!1,g,b);try{var ze=P(),tt=R.S;if(tt!==null&&tt(we,ze),ze!==null&&typeof ze=="object"&&typeof ze.then=="function"){var dt=$ee(ze,j);Ah(m,g,dt,Nr(m))}else Ah(m,g,j,Nr(m))}catch(ft){Ah(m,g,{then:function(){},status:"rejected",reason:ft},Nr())}finally{Q.p=O,X!==null&&we.types!==null&&(X.types=we.types),R.T=X}}function Hee(){}function nC(m,g,b,j){if(m.tag!==5)throw Error(s(476));var P=j3(m).queue;N3(m,P,g,Y,b===null?Hee:function(){return C3(m),b(j)})}function j3(m){var g=m.memoizedState;if(g!==null)return g;g={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bl,lastRenderedState:Y},next:null};var b={};return g.next={memoizedState:b,baseState:b,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bl,lastRenderedState:b},next:null},m.memoizedState=g,m=m.alternate,m!==null&&(m.memoizedState=g),g}function C3(m){var g=j3(m);g.next===null&&(g=m.alternate.memoizedState),Ah(m,g.next.queue,{},Nr())}function aC(){return hs(Gh)}function S3(){return Na().memoizedState}function _3(){return Na().memoizedState}function Gee(m){for(var g=m.return;g!==null;){switch(g.tag){case 24:case 3:var b=Nr();m=sc(b);var j=rc(g,m,b);j!==null&&(Ks(j,g,b),Nh(j,g,b)),g={cache:P1()},m.payload=g;return}g=g.return}}function Wee(m,g,b){var j=Nr();b={lane:j,revertLane:0,gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null},$0(m)?E3(g,b):(b=w1(m,g,b,j),b!==null&&(Ks(b,m,j),T3(b,g,j)))}function A3(m,g,b){var j=Nr();Ah(m,g,b,j)}function Ah(m,g,b,j){var P={lane:j,revertLane:0,gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null};if($0(m))E3(g,P);else{var O=m.alternate;if(m.lanes===0&&(O===null||O.lanes===0)&&(O=g.lastRenderedReducer,O!==null))try{var X=g.lastRenderedState,we=O(X,b);if(P.hasEagerState=!0,P.eagerState=we,pr(we,X))return x0(m,g,P,0),Fn===null&&p0(),!1}catch{}if(b=w1(m,g,P,j),b!==null)return Ks(b,m,j),T3(b,g,j),!0}return!1}function sC(m,g,b,j){if(j={lane:2,revertLane:IC(),gesture:null,action:j,hasEagerState:!1,eagerState:null,next:null},$0(m)){if(g)throw Error(s(479))}else g=w1(m,b,j,2),g!==null&&Ks(g,m,2)}function $0(m){var g=m.alternate;return m===Xt||g!==null&&g===Xt}function E3(m,g){dm=k0=!0;var b=m.pending;b===null?g.next=g:(g.next=b.next,b.next=g),m.pending=g}function T3(m,g,b){if((b&4194048)!==0){var j=g.lanes;j&=m.pendingLanes,b|=j,g.lanes=b,gt(m,b)}}var Eh={readContext:hs,use:D0,useCallback:ma,useContext:ma,useEffect:ma,useImperativeHandle:ma,useLayoutEffect:ma,useInsertionEffect:ma,useMemo:ma,useReducer:ma,useRef:ma,useState:ma,useDebugValue:ma,useDeferredValue:ma,useTransition:ma,useSyncExternalStore:ma,useId:ma,useHostTransitionStatus:ma,useFormState:ma,useActionState:ma,useOptimistic:ma,useMemoCache:ma,useCacheRefresh:ma};Eh.useEffectEvent=ma;var k3={readContext:hs,use:D0,useCallback:function(m,g){return Ms().memoizedState=[m,g===void 0?null:g],m},useContext:hs,useEffect:f3,useImperativeHandle:function(m,g,b){b=b!=null?b.concat([m]):null,M0(4194308,4,x3.bind(null,g,m),b)},useLayoutEffect:function(m,g){return M0(4194308,4,m,g)},useInsertionEffect:function(m,g){M0(4,2,m,g)},useMemo:function(m,g){var b=Ms();g=g===void 0?null:g;var j=m();if(_d){st(!0);try{m()}finally{st(!1)}}return b.memoizedState=[j,g],j},useReducer:function(m,g,b){var j=Ms();if(b!==void 0){var P=b(g);if(_d){st(!0);try{b(g)}finally{st(!1)}}}else P=g;return j.memoizedState=j.baseState=P,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:P},j.queue=m,m=m.dispatch=Wee.bind(null,Xt,m),[j.memoizedState,m]},useRef:function(m){var g=Ms();return m={current:m},g.memoizedState=m},useState:function(m){m=X1(m);var g=m.queue,b=A3.bind(null,Xt,g);return g.dispatch=b,[m.memoizedState,b]},useDebugValue:eC,useDeferredValue:function(m,g){var b=Ms();return tC(b,m,g)},useTransition:function(){var m=X1(!1);return m=N3.bind(null,Xt,m.queue,!0,!1),Ms().memoizedState=m,[!1,m]},useSyncExternalStore:function(m,g,b){var j=Xt,P=Ms();if(mn){if(b===void 0)throw Error(s(407));b=b()}else{if(b=g(),Fn===null)throw Error(s(349));(ln&127)!==0||XO(j,g,b)}P.memoizedState=b;var O={value:b,getSnapshot:g};return P.queue=O,f3(JO.bind(null,j,O,m),[m]),j.flags|=2048,mm(9,{destroy:void 0},ZO.bind(null,j,O,b,g),null),b},useId:function(){var m=Ms(),g=Fn.identifierPrefix;if(mn){var b=qi,j=Vi;b=(j&~(1<<32-Ee(j)-1)).toString(32)+b,g="_"+g+"R_"+b,b=L0++,0<b&&(g+="H"+b.toString(32)),g+="_"}else b=Ree++,g="_"+g+"r_"+b.toString(32)+"_";return m.memoizedState=g},useHostTransitionStatus:aC,useFormState:o3,useActionState:o3,useOptimistic:function(m){var g=Ms();g.memoizedState=g.baseState=m;var b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return g.queue=b,g=sC.bind(null,Xt,!0,b),b.dispatch=g,[m,g]},useMemoCache:Y1,useCacheRefresh:function(){return Ms().memoizedState=Gee.bind(null,Xt)},useEffectEvent:function(m){var g=Ms(),b={impl:m};return g.memoizedState=b,function(){if((Nn&2)!==0)throw Error(s(440));return b.impl.apply(void 0,arguments)}}},rC={readContext:hs,use:D0,useCallback:b3,useContext:hs,useEffect:J1,useImperativeHandle:y3,useInsertionEffect:g3,useLayoutEffect:p3,useMemo:v3,useReducer:O0,useRef:m3,useState:function(){return O0(Bl)},useDebugValue:eC,useDeferredValue:function(m,g){var b=Na();return w3(b,Mn.memoizedState,m,g)},useTransition:function(){var m=O0(Bl)[0],g=Na().memoizedState;return[typeof m=="boolean"?m:_h(m),g]},useSyncExternalStore:KO,useId:S3,useHostTransitionStatus:aC,useFormState:c3,useActionState:c3,useOptimistic:function(m,g){var b=Na();return n3(b,Mn,m,g)},useMemoCache:Y1,useCacheRefresh:_3};rC.useEffectEvent=h3;var L3={readContext:hs,use:D0,useCallback:b3,useContext:hs,useEffect:J1,useImperativeHandle:y3,useInsertionEffect:g3,useLayoutEffect:p3,useMemo:v3,useReducer:K1,useRef:m3,useState:function(){return K1(Bl)},useDebugValue:eC,useDeferredValue:function(m,g){var b=Na();return Mn===null?tC(b,m,g):w3(b,Mn.memoizedState,m,g)},useTransition:function(){var m=K1(Bl)[0],g=Na().memoizedState;return[typeof m=="boolean"?m:_h(m),g]},useSyncExternalStore:KO,useId:S3,useHostTransitionStatus:aC,useFormState:u3,useActionState:u3,useOptimistic:function(m,g){var b=Na();return Mn!==null?n3(b,Mn,m,g):(b.baseState=m,[m,b.queue.dispatch])},useMemoCache:Y1,useCacheRefresh:_3};L3.useEffectEvent=h3;function iC(m,g,b,j){g=m.memoizedState,b=b(j,g),b=b==null?g:f({},g,b),m.memoizedState=b,m.lanes===0&&(m.updateQueue.baseState=b)}var lC={enqueueSetState:function(m,g,b){m=m._reactInternals;var j=Nr(),P=sc(j);P.payload=g,b!=null&&(P.callback=b),g=rc(m,P,j),g!==null&&(Ks(g,m,j),Nh(g,m,j))},enqueueReplaceState:function(m,g,b){m=m._reactInternals;var j=Nr(),P=sc(j);P.tag=1,P.payload=g,b!=null&&(P.callback=b),g=rc(m,P,j),g!==null&&(Ks(g,m,j),Nh(g,m,j))},enqueueForceUpdate:function(m,g){m=m._reactInternals;var b=Nr(),j=sc(b);j.tag=2,g!=null&&(j.callback=g),g=rc(m,j,b),g!==null&&(Ks(g,m,b),Nh(g,m,b))}};function P3(m,g,b,j,P,O,X){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(j,O,X):g.prototype&&g.prototype.isPureReactComponent?!hh(b,j)||!hh(P,O):!0}function D3(m,g,b,j){m=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(b,j),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(b,j),g.state!==m&&lC.enqueueReplaceState(g,g.state,null)}function Ad(m,g){var b=g;if("ref"in g){b={};for(var j in g)j!=="ref"&&(b[j]=g[j])}if(m=m.defaultProps){b===g&&(b=f({},b));for(var P in m)b[P]===void 0&&(b[P]=m[P])}return b}function O3(m){g0(m)}function M3(m){console.error(m)}function I3(m){g0(m)}function R0(m,g){try{var b=m.onUncaughtError;b(g.value,{componentStack:g.stack})}catch(j){setTimeout(function(){throw j})}}function $3(m,g,b){try{var j=m.onCaughtError;j(b.value,{componentStack:b.stack,errorBoundary:g.tag===1?g.stateNode:null})}catch(P){setTimeout(function(){throw P})}}function oC(m,g,b){return b=sc(b),b.tag=3,b.payload={element:null},b.callback=function(){R0(m,g)},b}function R3(m){return m=sc(m),m.tag=3,m}function z3(m,g,b,j){var P=b.type.getDerivedStateFromError;if(typeof P=="function"){var O=j.value;m.payload=function(){return P(O)},m.callback=function(){$3(g,b,j)}}var X=b.stateNode;X!==null&&typeof X.componentDidCatch=="function"&&(m.callback=function(){$3(g,b,j),typeof P!="function"&&(uc===null?uc=new Set([this]):uc.add(this));var we=j.stack;this.componentDidCatch(j.value,{componentStack:we!==null?we:""})})}function Vee(m,g,b,j,P){if(b.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){if(g=b.alternate,g!==null&&sm(g,b,P,!0),b=yr.current,b!==null){switch(b.tag){case 31:case 13:return Vr===null?K0():b.alternate===null&&fa===0&&(fa=3),b.flags&=-257,b.flags|=65536,b.lanes=P,j===S0?b.flags|=16384:(g=b.updateQueue,g===null?b.updateQueue=new Set([j]):g.add(j),DC(m,j,P)),!1;case 22:return b.flags|=65536,j===S0?b.flags|=16384:(g=b.updateQueue,g===null?(g={transitions:null,markerInstances:null,retryQueue:new Set([j])},b.updateQueue=g):(b=g.retryQueue,b===null?g.retryQueue=new Set([j]):b.add(j)),DC(m,j,P)),!1}throw Error(s(435,b.tag))}return DC(m,j,P),K0(),!1}if(mn)return g=yr.current,g!==null?((g.flags&65536)===0&&(g.flags|=256),g.flags|=65536,g.lanes=P,j!==A1&&(m=Error(s(422),{cause:j}),xh(Br(m,b)))):(j!==A1&&(g=Error(s(423),{cause:j}),xh(Br(g,b))),m=m.current.alternate,m.flags|=65536,P&=-P,m.lanes|=P,j=Br(j,b),P=oC(m.stateNode,j,P),R1(m,P),fa!==4&&(fa=2)),!1;var O=Error(s(520),{cause:j});if(O=Br(O,b),Ih===null?Ih=[O]:Ih.push(O),fa!==4&&(fa=2),g===null)return!0;j=Br(j,b),b=g;do{switch(b.tag){case 3:return b.flags|=65536,m=P&-P,b.lanes|=m,m=oC(b.stateNode,j,m),R1(b,m),!1;case 1:if(g=b.type,O=b.stateNode,(b.flags&128)===0&&(typeof g.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(uc===null||!uc.has(O))))return b.flags|=65536,P&=-P,b.lanes|=P,P=R3(P),z3(P,m,b,j),R1(b,P),!1}b=b.return}while(b!==null);return!1}var cC=Error(s(461)),ka=!1;function gs(m,g,b,j){g.child=m===null?HO(g,null,b,j):Sd(g,m.child,b,j)}function F3(m,g,b,j,P){b=b.render;var O=g.ref;if("ref"in j){var X={};for(var we in j)we!=="ref"&&(X[we]=j[we])}else X=j;return wd(g),j=G1(m,g,b,X,O,P),we=W1(),m!==null&&!ka?(V1(m,g,P),Hl(m,g,P)):(mn&&we&&S1(g),g.flags|=1,gs(m,g,j,P),g.child)}function U3(m,g,b,j,P){if(m===null){var O=b.type;return typeof O=="function"&&!N1(O)&&O.defaultProps===void 0&&b.compare===null?(g.tag=15,g.type=O,B3(m,g,O,j,P)):(m=b0(b.type,null,j,g,g.mode,P),m.ref=g.ref,m.return=g,g.child=m)}if(O=m.child,!xC(m,P)){var X=O.memoizedProps;if(b=b.compare,b=b!==null?b:hh,b(X,j)&&m.ref===g.ref)return Hl(m,g,P)}return g.flags|=1,m=$l(O,j),m.ref=g.ref,m.return=g,g.child=m}function B3(m,g,b,j,P){if(m!==null){var O=m.memoizedProps;if(hh(O,j)&&m.ref===g.ref)if(ka=!1,g.pendingProps=j=O,xC(m,P))(m.flags&131072)!==0&&(ka=!0);else return g.lanes=m.lanes,Hl(m,g,P)}return dC(m,g,b,j,P)}function H3(m,g,b,j){var P=j.children,O=m!==null?m.memoizedState:null;if(m===null&&g.stateNode===null&&(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),j.mode==="hidden"){if((g.flags&128)!==0){if(O=O!==null?O.baseLanes|b:b,m!==null){for(j=g.child=m.child,P=0;j!==null;)P=P|j.lanes|j.childLanes,j=j.sibling;j=P&~O}else j=0,g.child=null;return G3(m,g,O,b,j)}if((b&536870912)!==0)g.memoizedState={baseLanes:0,cachePool:null},m!==null&&j0(g,O!==null?O.cachePool:null),O!==null?VO(g,O):F1(),qO(g);else return j=g.lanes=536870912,G3(m,g,O!==null?O.baseLanes|b:b,b,j)}else O!==null?(j0(g,O.cachePool),VO(g,O),lc(),g.memoizedState=null):(m!==null&&j0(g,null),F1(),lc());return gs(m,g,P,b),g.child}function Th(m,g){return m!==null&&m.tag===22||g.stateNode!==null||(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.sibling}function G3(m,g,b,j,P){var O=O1();return O=O===null?null:{parent:Ea._currentValue,pool:O},g.memoizedState={baseLanes:b,cachePool:O},m!==null&&j0(g,null),F1(),qO(g),m!==null&&sm(m,g,j,!0),g.childLanes=P,null}function z0(m,g){return g=U0({mode:g.mode,children:g.children},m.mode),g.ref=m.ref,m.child=g,g.return=m,g}function W3(m,g,b){return Sd(g,m.child,null,b),m=z0(g,g.pendingProps),m.flags|=2,br(g),g.memoizedState=null,m}function qee(m,g,b){var j=g.pendingProps,P=(g.flags&128)!==0;if(g.flags&=-129,m===null){if(mn){if(j.mode==="hidden")return m=z0(g,j),g.lanes=536870912,Th(null,m);if(B1(g),(m=Yn)?(m=aM(m,Wr),m=m!==null&&m.data==="&"?m:null,m!==null&&(g.memoizedState={dehydrated:m,treeContext:Jo!==null?{id:Vi,overflow:qi}:null,retryLane:536870912,hydrationErrors:null},b=EO(m),b.return=g,g.child=b,fs=g,Yn=null)):m=null,m===null)throw tc(g);return g.lanes=536870912,null}return z0(g,j)}var O=m.memoizedState;if(O!==null){var X=O.dehydrated;if(B1(g),P)if(g.flags&256)g.flags&=-257,g=W3(m,g,b);else if(g.memoizedState!==null)g.child=m.child,g.flags|=128,g=null;else throw Error(s(558));else if(ka||sm(m,g,b,!1),P=(b&m.childLanes)!==0,ka||P){if(j=Fn,j!==null&&(X=_t(j,b),X!==0&&X!==O.retryLane))throw O.retryLane=X,xd(m,X),Ks(j,m,X),cC;K0(),g=W3(m,g,b)}else m=O.treeContext,Yn=qr(X.nextSibling),fs=g,mn=!0,ec=null,Wr=!1,m!==null&&LO(g,m),g=z0(g,j),g.flags|=4096;return g}return m=$l(m.child,{mode:j.mode,children:j.children}),m.ref=g.ref,g.child=m,m.return=g,m}function F0(m,g){var b=g.ref;if(b===null)m!==null&&m.ref!==null&&(g.flags|=4194816);else{if(typeof b!="function"&&typeof b!="object")throw Error(s(284));(m===null||m.ref!==b)&&(g.flags|=4194816)}}function dC(m,g,b,j,P){return wd(g),b=G1(m,g,b,j,void 0,P),j=W1(),m!==null&&!ka?(V1(m,g,P),Hl(m,g,P)):(mn&&j&&S1(g),g.flags|=1,gs(m,g,b,P),g.child)}function V3(m,g,b,j,P,O){return wd(g),g.updateQueue=null,b=QO(g,j,b,P),YO(m),j=W1(),m!==null&&!ka?(V1(m,g,O),Hl(m,g,O)):(mn&&j&&S1(g),g.flags|=1,gs(m,g,b,O),g.child)}function q3(m,g,b,j,P){if(wd(g),g.stateNode===null){var O=em,X=b.contextType;typeof X=="object"&&X!==null&&(O=hs(X)),O=new b(j,O),g.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,O.updater=lC,g.stateNode=O,O._reactInternals=g,O=g.stateNode,O.props=j,O.state=g.memoizedState,O.refs={},I1(g),X=b.contextType,O.context=typeof X=="object"&&X!==null?hs(X):em,O.state=g.memoizedState,X=b.getDerivedStateFromProps,typeof X=="function"&&(iC(g,b,X,j),O.state=g.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(X=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),X!==O.state&&lC.enqueueReplaceState(O,O.state,null),Ch(g,j,O,P),jh(),O.state=g.memoizedState),typeof O.componentDidMount=="function"&&(g.flags|=4194308),j=!0}else if(m===null){O=g.stateNode;var we=g.memoizedProps,ze=Ad(b,we);O.props=ze;var tt=O.context,dt=b.contextType;X=em,typeof dt=="object"&&dt!==null&&(X=hs(dt));var ft=b.getDerivedStateFromProps;dt=typeof ft=="function"||typeof O.getSnapshotBeforeUpdate=="function",we=g.pendingProps!==we,dt||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(we||tt!==X)&&D3(g,O,j,X),ac=!1;var at=g.memoizedState;O.state=at,Ch(g,j,O,P),jh(),tt=g.memoizedState,we||at!==tt||ac?(typeof ft=="function"&&(iC(g,b,ft,j),tt=g.memoizedState),(ze=ac||P3(g,b,ze,j,at,tt,X))?(dt||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(g.flags|=4194308)):(typeof O.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=j,g.memoizedState=tt),O.props=j,O.state=tt,O.context=X,j=ze):(typeof O.componentDidMount=="function"&&(g.flags|=4194308),j=!1)}else{O=g.stateNode,$1(m,g),X=g.memoizedProps,dt=Ad(b,X),O.props=dt,ft=g.pendingProps,at=O.context,tt=b.contextType,ze=em,typeof tt=="object"&&tt!==null&&(ze=hs(tt)),we=b.getDerivedStateFromProps,(tt=typeof we=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(X!==ft||at!==ze)&&D3(g,O,j,ze),ac=!1,at=g.memoizedState,O.state=at,Ch(g,j,O,P),jh();var ot=g.memoizedState;X!==ft||at!==ot||ac||m!==null&&m.dependencies!==null&&w0(m.dependencies)?(typeof we=="function"&&(iC(g,b,we,j),ot=g.memoizedState),(dt=ac||P3(g,b,dt,j,at,ot,ze)||m!==null&&m.dependencies!==null&&w0(m.dependencies))?(tt||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(j,ot,ze),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(j,ot,ze)),typeof O.componentDidUpdate=="function"&&(g.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof O.componentDidUpdate!="function"||X===m.memoizedProps&&at===m.memoizedState||(g.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||X===m.memoizedProps&&at===m.memoizedState||(g.flags|=1024),g.memoizedProps=j,g.memoizedState=ot),O.props=j,O.state=ot,O.context=ze,j=dt):(typeof O.componentDidUpdate!="function"||X===m.memoizedProps&&at===m.memoizedState||(g.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||X===m.memoizedProps&&at===m.memoizedState||(g.flags|=1024),j=!1)}return O=j,F0(m,g),j=(g.flags&128)!==0,O||j?(O=g.stateNode,b=j&&typeof b.getDerivedStateFromError!="function"?null:O.render(),g.flags|=1,m!==null&&j?(g.child=Sd(g,m.child,null,P),g.child=Sd(g,null,b,P)):gs(m,g,b,P),g.memoizedState=O.state,m=g.child):m=Hl(m,g,P),m}function Y3(m,g,b,j){return bd(),g.flags|=256,gs(m,g,b,j),g.child}var uC={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mC(m){return{baseLanes:m,cachePool:$O()}}function fC(m,g,b){return m=m!==null?m.childLanes&~b:0,g&&(m|=wr),m}function Q3(m,g,b){var j=g.pendingProps,P=!1,O=(g.flags&128)!==0,X;if((X=O)||(X=m!==null&&m.memoizedState===null?!1:(wa.current&2)!==0),X&&(P=!0,g.flags&=-129),X=(g.flags&32)!==0,g.flags&=-33,m===null){if(mn){if(P?ic(g):lc(),(m=Yn)?(m=aM(m,Wr),m=m!==null&&m.data!=="&"?m:null,m!==null&&(g.memoizedState={dehydrated:m,treeContext:Jo!==null?{id:Vi,overflow:qi}:null,retryLane:536870912,hydrationErrors:null},b=EO(m),b.return=g,g.child=b,fs=g,Yn=null)):m=null,m===null)throw tc(g);return QC(m)?g.lanes=32:g.lanes=536870912,null}var we=j.children;return j=j.fallback,P?(lc(),P=g.mode,we=U0({mode:"hidden",children:we},P),j=yd(j,P,b,null),we.return=g,j.return=g,we.sibling=j,g.child=we,j=g.child,j.memoizedState=mC(b),j.childLanes=fC(m,X,b),g.memoizedState=uC,Th(null,j)):(ic(g),hC(g,we))}var ze=m.memoizedState;if(ze!==null&&(we=ze.dehydrated,we!==null)){if(O)g.flags&256?(ic(g),g.flags&=-257,g=gC(m,g,b)):g.memoizedState!==null?(lc(),g.child=m.child,g.flags|=128,g=null):(lc(),we=j.fallback,P=g.mode,j=U0({mode:"visible",children:j.children},P),we=yd(we,P,b,null),we.flags|=2,j.return=g,we.return=g,j.sibling=we,g.child=j,Sd(g,m.child,null,b),j=g.child,j.memoizedState=mC(b),j.childLanes=fC(m,X,b),g.memoizedState=uC,g=Th(null,j));else if(ic(g),QC(we)){if(X=we.nextSibling&&we.nextSibling.dataset,X)var tt=X.dgst;X=tt,j=Error(s(419)),j.stack="",j.digest=X,xh({value:j,source:null,stack:null}),g=gC(m,g,b)}else if(ka||sm(m,g,b,!1),X=(b&m.childLanes)!==0,ka||X){if(X=Fn,X!==null&&(j=_t(X,b),j!==0&&j!==ze.retryLane))throw ze.retryLane=j,xd(m,j),Ks(X,m,j),cC;YC(we)||K0(),g=gC(m,g,b)}else YC(we)?(g.flags|=192,g.child=m.child,g=null):(m=ze.treeContext,Yn=qr(we.nextSibling),fs=g,mn=!0,ec=null,Wr=!1,m!==null&&LO(g,m),g=hC(g,j.children),g.flags|=4096);return g}return P?(lc(),we=j.fallback,P=g.mode,ze=m.child,tt=ze.sibling,j=$l(ze,{mode:"hidden",children:j.children}),j.subtreeFlags=ze.subtreeFlags&65011712,tt!==null?we=$l(tt,we):(we=yd(we,P,b,null),we.flags|=2),we.return=g,j.return=g,j.sibling=we,g.child=j,Th(null,j),j=g.child,we=m.child.memoizedState,we===null?we=mC(b):(P=we.cachePool,P!==null?(ze=Ea._currentValue,P=P.parent!==ze?{parent:ze,pool:ze}:P):P=$O(),we={baseLanes:we.baseLanes|b,cachePool:P}),j.memoizedState=we,j.childLanes=fC(m,X,b),g.memoizedState=uC,Th(m.child,j)):(ic(g),b=m.child,m=b.sibling,b=$l(b,{mode:"visible",children:j.children}),b.return=g,b.sibling=null,m!==null&&(X=g.deletions,X===null?(g.deletions=[m],g.flags|=16):X.push(m)),g.child=b,g.memoizedState=null,b)}function hC(m,g){return g=U0({mode:"visible",children:g},m.mode),g.return=m,m.child=g}function U0(m,g){return m=xr(22,m,null,g),m.lanes=0,m}function gC(m,g,b){return Sd(g,m.child,null,b),m=hC(g,g.pendingProps.children),m.flags|=2,g.memoizedState=null,m}function K3(m,g,b){m.lanes|=g;var j=m.alternate;j!==null&&(j.lanes|=g),k1(m.return,g,b)}function pC(m,g,b,j,P,O){var X=m.memoizedState;X===null?m.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:j,tail:b,tailMode:P,treeForkCount:O}:(X.isBackwards=g,X.rendering=null,X.renderingStartTime=0,X.last=j,X.tail=b,X.tailMode=P,X.treeForkCount=O)}function X3(m,g,b){var j=g.pendingProps,P=j.revealOrder,O=j.tail;j=j.children;var X=wa.current,we=(X&2)!==0;if(we?(X=X&1|2,g.flags|=128):X&=1,ye(wa,X),gs(m,g,j,b),j=mn?ph:0,!we&&m!==null&&(m.flags&128)!==0)e:for(m=g.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&K3(m,b,g);else if(m.tag===19)K3(m,b,g);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===g)break e;for(;m.sibling===null;){if(m.return===null||m.return===g)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}switch(P){case"forwards":for(b=g.child,P=null;b!==null;)m=b.alternate,m!==null&&T0(m)===null&&(P=b),b=b.sibling;b=P,b===null?(P=g.child,g.child=null):(P=b.sibling,b.sibling=null),pC(g,!1,P,b,O,j);break;case"backwards":case"unstable_legacy-backwards":for(b=null,P=g.child,g.child=null;P!==null;){if(m=P.alternate,m!==null&&T0(m)===null){g.child=P;break}m=P.sibling,P.sibling=b,b=P,P=m}pC(g,!0,b,null,O,j);break;case"together":pC(g,!1,null,null,void 0,j);break;default:g.memoizedState=null}return g.child}function Hl(m,g,b){if(m!==null&&(g.dependencies=m.dependencies),dc|=g.lanes,(b&g.childLanes)===0)if(m!==null){if(sm(m,g,b,!1),(b&g.childLanes)===0)return null}else return null;if(m!==null&&g.child!==m.child)throw Error(s(153));if(g.child!==null){for(m=g.child,b=$l(m,m.pendingProps),g.child=b,b.return=g;m.sibling!==null;)m=m.sibling,b=b.sibling=$l(m,m.pendingProps),b.return=g;b.sibling=null}return g.child}function xC(m,g){return(m.lanes&g)!==0?!0:(m=m.dependencies,!!(m!==null&&w0(m)))}function Yee(m,g,b){switch(g.tag){case 3:$e(g,g.stateNode.containerInfo),nc(g,Ea,m.memoizedState.cache),bd();break;case 27:case 5:Me(g);break;case 4:$e(g,g.stateNode.containerInfo);break;case 10:nc(g,g.type,g.memoizedProps.value);break;case 31:if(g.memoizedState!==null)return g.flags|=128,B1(g),null;break;case 13:var j=g.memoizedState;if(j!==null)return j.dehydrated!==null?(ic(g),g.flags|=128,null):(b&g.child.childLanes)!==0?Q3(m,g,b):(ic(g),m=Hl(m,g,b),m!==null?m.sibling:null);ic(g);break;case 19:var P=(m.flags&128)!==0;if(j=(b&g.childLanes)!==0,j||(sm(m,g,b,!1),j=(b&g.childLanes)!==0),P){if(j)return X3(m,g,b);g.flags|=128}if(P=g.memoizedState,P!==null&&(P.rendering=null,P.tail=null,P.lastEffect=null),ye(wa,wa.current),j)break;return null;case 22:return g.lanes=0,H3(m,g,b,g.pendingProps);case 24:nc(g,Ea,m.memoizedState.cache)}return Hl(m,g,b)}function Z3(m,g,b){if(m!==null)if(m.memoizedProps!==g.pendingProps)ka=!0;else{if(!xC(m,b)&&(g.flags&128)===0)return ka=!1,Yee(m,g,b);ka=(m.flags&131072)!==0}else ka=!1,mn&&(g.flags&1048576)!==0&&kO(g,ph,g.index);switch(g.lanes=0,g.tag){case 16:e:{var j=g.pendingProps;if(m=jd(g.elementType),g.type=m,typeof m=="function")N1(m)?(j=Ad(m,j),g.tag=1,g=q3(null,g,m,j,b)):(g.tag=0,g=dC(null,g,m,j,b));else{if(m!=null){var P=m.$$typeof;if(P===T){g.tag=11,g=F3(null,g,m,j,b);break e}else if(P===E){g.tag=14,g=U3(null,g,m,j,b);break e}}throw g=W(m)||m,Error(s(306,g,""))}}return g;case 0:return dC(m,g,g.type,g.pendingProps,b);case 1:return j=g.type,P=Ad(j,g.pendingProps),q3(m,g,j,P,b);case 3:e:{if($e(g,g.stateNode.containerInfo),m===null)throw Error(s(387));j=g.pendingProps;var O=g.memoizedState;P=O.element,$1(m,g),Ch(g,j,null,b);var X=g.memoizedState;if(j=X.cache,nc(g,Ea,j),j!==O.cache&&L1(g,[Ea],b,!0),jh(),j=X.element,O.isDehydrated)if(O={element:j,isDehydrated:!1,cache:X.cache},g.updateQueue.baseState=O,g.memoizedState=O,g.flags&256){g=Y3(m,g,j,b);break e}else if(j!==P){P=Br(Error(s(424)),g),xh(P),g=Y3(m,g,j,b);break e}else for(m=g.stateNode.containerInfo,m.nodeType===9?m=m.body:m=m.nodeName==="HTML"?m.ownerDocument.body:m,Yn=qr(m.firstChild),fs=g,mn=!0,ec=null,Wr=!0,b=HO(g,null,j,b),g.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(bd(),j===P){g=Hl(m,g,b);break e}gs(m,g,j,b)}g=g.child}return g;case 26:return F0(m,g),m===null?(b=cM(g.type,null,g.pendingProps,null))?g.memoizedState=b:mn||(b=g.type,m=g.pendingProps,j=ay(je.current).createElement(b),j[Nt]=g,j[L]=m,ps(j,b,m),Fa(j),g.stateNode=j):g.memoizedState=cM(g.type,m.memoizedProps,g.pendingProps,m.memoizedState),null;case 27:return Me(g),m===null&&mn&&(j=g.stateNode=iM(g.type,g.pendingProps,je.current),fs=g,Wr=!0,P=Yn,gc(g.type)?(KC=P,Yn=qr(j.firstChild)):Yn=P),gs(m,g,g.pendingProps.children,b),F0(m,g),m===null&&(g.flags|=4194304),g.child;case 5:return m===null&&mn&&((P=j=Yn)&&(j=Cte(j,g.type,g.pendingProps,Wr),j!==null?(g.stateNode=j,fs=g,Yn=qr(j.firstChild),Wr=!1,P=!0):P=!1),P||tc(g)),Me(g),P=g.type,O=g.pendingProps,X=m!==null?m.memoizedProps:null,j=O.children,WC(P,O)?j=null:X!==null&&WC(P,X)&&(g.flags|=32),g.memoizedState!==null&&(P=G1(m,g,zee,null,null,b),Gh._currentValue=P),F0(m,g),gs(m,g,j,b),g.child;case 6:return m===null&&mn&&((m=b=Yn)&&(b=Ste(b,g.pendingProps,Wr),b!==null?(g.stateNode=b,fs=g,Yn=null,m=!0):m=!1),m||tc(g)),null;case 13:return Q3(m,g,b);case 4:return $e(g,g.stateNode.containerInfo),j=g.pendingProps,m===null?g.child=Sd(g,null,j,b):gs(m,g,j,b),g.child;case 11:return F3(m,g,g.type,g.pendingProps,b);case 7:return gs(m,g,g.pendingProps,b),g.child;case 8:return gs(m,g,g.pendingProps.children,b),g.child;case 12:return gs(m,g,g.pendingProps.children,b),g.child;case 10:return j=g.pendingProps,nc(g,g.type,j.value),gs(m,g,j.children,b),g.child;case 9:return P=g.type._context,j=g.pendingProps.children,wd(g),P=hs(P),j=j(P),g.flags|=1,gs(m,g,j,b),g.child;case 14:return U3(m,g,g.type,g.pendingProps,b);case 15:return B3(m,g,g.type,g.pendingProps,b);case 19:return X3(m,g,b);case 31:return qee(m,g,b);case 22:return H3(m,g,b,g.pendingProps);case 24:return wd(g),j=hs(Ea),m===null?(P=O1(),P===null&&(P=Fn,O=P1(),P.pooledCache=O,O.refCount++,O!==null&&(P.pooledCacheLanes|=b),P=O),g.memoizedState={parent:j,cache:P},I1(g),nc(g,Ea,P)):((m.lanes&b)!==0&&($1(m,g),Ch(g,null,null,b),jh()),P=m.memoizedState,O=g.memoizedState,P.parent!==j?(P={parent:j,cache:j},g.memoizedState=P,g.lanes===0&&(g.memoizedState=g.updateQueue.baseState=P),nc(g,Ea,j)):(j=O.cache,nc(g,Ea,j),j!==P.cache&&L1(g,[Ea],b,!0))),gs(m,g,g.pendingProps.children,b),g.child;case 29:throw g.pendingProps}throw Error(s(156,g.tag))}function Gl(m){m.flags|=4}function yC(m,g,b,j,P){if((g=(m.mode&32)!==0)&&(g=!1),g){if(m.flags|=16777216,(P&335544128)===P)if(m.stateNode.complete)m.flags|=8192;else if(S5())m.flags|=8192;else throw Cd=S0,M1}else m.flags&=-16777217}function J3(m,g){if(g.type!=="stylesheet"||(g.state.loading&4)!==0)m.flags&=-16777217;else if(m.flags|=16777216,!hM(g))if(S5())m.flags|=8192;else throw Cd=S0,M1}function B0(m,g){g!==null&&(m.flags|=4),m.flags&16384&&(g=m.tag!==22?V():536870912,m.lanes|=g,pm|=g)}function kh(m,g){if(!mn)switch(m.tailMode){case"hidden":g=m.tail;for(var b=null;g!==null;)g.alternate!==null&&(b=g),g=g.sibling;b===null?m.tail=null:b.sibling=null;break;case"collapsed":b=m.tail;for(var j=null;b!==null;)b.alternate!==null&&(j=b),b=b.sibling;j===null?g||m.tail===null?m.tail=null:m.tail.sibling=null:j.sibling=null}}function Qn(m){var g=m.alternate!==null&&m.alternate.child===m.child,b=0,j=0;if(g)for(var P=m.child;P!==null;)b|=P.lanes|P.childLanes,j|=P.subtreeFlags&65011712,j|=P.flags&65011712,P.return=m,P=P.sibling;else for(P=m.child;P!==null;)b|=P.lanes|P.childLanes,j|=P.subtreeFlags,j|=P.flags,P.return=m,P=P.sibling;return m.subtreeFlags|=j,m.childLanes=b,g}function Qee(m,g,b){var j=g.pendingProps;switch(_1(g),g.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qn(g),null;case 1:return Qn(g),null;case 3:return b=g.stateNode,j=null,m!==null&&(j=m.memoizedState.cache),g.memoizedState.cache!==j&&(g.flags|=2048),Fl(Ea),pe(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(m===null||m.child===null)&&(am(g)?Gl(g):m===null||m.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,E1())),Qn(g),null;case 26:var P=g.type,O=g.memoizedState;return m===null?(Gl(g),O!==null?(Qn(g),J3(g,O)):(Qn(g),yC(g,P,null,j,b))):O?O!==m.memoizedState?(Gl(g),Qn(g),J3(g,O)):(Qn(g),g.flags&=-16777217):(m=m.memoizedProps,m!==j&&Gl(g),Qn(g),yC(g,P,m,j,b)),null;case 27:if(Le(g),b=je.current,P=g.type,m!==null&&g.stateNode!=null)m.memoizedProps!==j&&Gl(g);else{if(!j){if(g.stateNode===null)throw Error(s(166));return Qn(g),null}m=te.current,am(g)?PO(g):(m=iM(P,j,b),g.stateNode=m,Gl(g))}return Qn(g),null;case 5:if(Le(g),P=g.type,m!==null&&g.stateNode!=null)m.memoizedProps!==j&&Gl(g);else{if(!j){if(g.stateNode===null)throw Error(s(166));return Qn(g),null}if(O=te.current,am(g))PO(g);else{var X=ay(je.current);switch(O){case 1:O=X.createElementNS("http://www.w3.org/2000/svg",P);break;case 2:O=X.createElementNS("http://www.w3.org/1998/Math/MathML",P);break;default:switch(P){case"svg":O=X.createElementNS("http://www.w3.org/2000/svg",P);break;case"math":O=X.createElementNS("http://www.w3.org/1998/Math/MathML",P);break;case"script":O=X.createElement("div"),O.innerHTML="<script><\/script>",O=O.removeChild(O.firstChild);break;case"select":O=typeof j.is=="string"?X.createElement("select",{is:j.is}):X.createElement("select"),j.multiple?O.multiple=!0:j.size&&(O.size=j.size);break;default:O=typeof j.is=="string"?X.createElement(P,{is:j.is}):X.createElement(P)}}O[Nt]=g,O[L]=j;e:for(X=g.child;X!==null;){if(X.tag===5||X.tag===6)O.appendChild(X.stateNode);else if(X.tag!==4&&X.tag!==27&&X.child!==null){X.child.return=X,X=X.child;continue}if(X===g)break e;for(;X.sibling===null;){if(X.return===null||X.return===g)break e;X=X.return}X.sibling.return=X.return,X=X.sibling}g.stateNode=O;e:switch(ps(O,P,j),P){case"button":case"input":case"select":case"textarea":j=!!j.autoFocus;break e;case"img":j=!0;break e;default:j=!1}j&&Gl(g)}}return Qn(g),yC(g,g.type,m===null?null:m.memoizedProps,g.pendingProps,b),null;case 6:if(m&&g.stateNode!=null)m.memoizedProps!==j&&Gl(g);else{if(typeof j!="string"&&g.stateNode===null)throw Error(s(166));if(m=je.current,am(g)){if(m=g.stateNode,b=g.memoizedProps,j=null,P=fs,P!==null)switch(P.tag){case 27:case 5:j=P.memoizedProps}m[Nt]=g,m=!!(m.nodeValue===b||j!==null&&j.suppressHydrationWarning===!0||Q5(m.nodeValue,b)),m||tc(g,!0)}else m=ay(m).createTextNode(j),m[Nt]=g,g.stateNode=m}return Qn(g),null;case 31:if(b=g.memoizedState,m===null||m.memoizedState!==null){if(j=am(g),b!==null){if(m===null){if(!j)throw Error(s(318));if(m=g.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(557));m[Nt]=g}else bd(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;Qn(g),m=!1}else b=E1(),m!==null&&m.memoizedState!==null&&(m.memoizedState.hydrationErrors=b),m=!0;if(!m)return g.flags&256?(br(g),g):(br(g),null);if((g.flags&128)!==0)throw Error(s(558))}return Qn(g),null;case 13:if(j=g.memoizedState,m===null||m.memoizedState!==null&&m.memoizedState.dehydrated!==null){if(P=am(g),j!==null&&j.dehydrated!==null){if(m===null){if(!P)throw Error(s(318));if(P=g.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(s(317));P[Nt]=g}else bd(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;Qn(g),P=!1}else P=E1(),m!==null&&m.memoizedState!==null&&(m.memoizedState.hydrationErrors=P),P=!0;if(!P)return g.flags&256?(br(g),g):(br(g),null)}return br(g),(g.flags&128)!==0?(g.lanes=b,g):(b=j!==null,m=m!==null&&m.memoizedState!==null,b&&(j=g.child,P=null,j.alternate!==null&&j.alternate.memoizedState!==null&&j.alternate.memoizedState.cachePool!==null&&(P=j.alternate.memoizedState.cachePool.pool),O=null,j.memoizedState!==null&&j.memoizedState.cachePool!==null&&(O=j.memoizedState.cachePool.pool),O!==P&&(j.flags|=2048)),b!==m&&b&&(g.child.flags|=8192),B0(g,g.updateQueue),Qn(g),null);case 4:return pe(),m===null&&FC(g.stateNode.containerInfo),Qn(g),null;case 10:return Fl(g.type),Qn(g),null;case 19:if(H(wa),j=g.memoizedState,j===null)return Qn(g),null;if(P=(g.flags&128)!==0,O=j.rendering,O===null)if(P)kh(j,!1);else{if(fa!==0||m!==null&&(m.flags&128)!==0)for(m=g.child;m!==null;){if(O=T0(m),O!==null){for(g.flags|=128,kh(j,!1),m=O.updateQueue,g.updateQueue=m,B0(g,m),g.subtreeFlags=0,m=b,b=g.child;b!==null;)AO(b,m),b=b.sibling;return ye(wa,wa.current&1|2),mn&&Rl(g,j.treeForkCount),g.child}m=m.sibling}j.tail!==null&&de()>q0&&(g.flags|=128,P=!0,kh(j,!1),g.lanes=4194304)}else{if(!P)if(m=T0(O),m!==null){if(g.flags|=128,P=!0,m=m.updateQueue,g.updateQueue=m,B0(g,m),kh(j,!0),j.tail===null&&j.tailMode==="hidden"&&!O.alternate&&!mn)return Qn(g),null}else 2*de()-j.renderingStartTime>q0&&b!==536870912&&(g.flags|=128,P=!0,kh(j,!1),g.lanes=4194304);j.isBackwards?(O.sibling=g.child,g.child=O):(m=j.last,m!==null?m.sibling=O:g.child=O,j.last=O)}return j.tail!==null?(m=j.tail,j.rendering=m,j.tail=m.sibling,j.renderingStartTime=de(),m.sibling=null,b=wa.current,ye(wa,P?b&1|2:b&1),mn&&Rl(g,j.treeForkCount),m):(Qn(g),null);case 22:case 23:return br(g),U1(),j=g.memoizedState!==null,m!==null?m.memoizedState!==null!==j&&(g.flags|=8192):j&&(g.flags|=8192),j?(b&536870912)!==0&&(g.flags&128)===0&&(Qn(g),g.subtreeFlags&6&&(g.flags|=8192)):Qn(g),b=g.updateQueue,b!==null&&B0(g,b.retryQueue),b=null,m!==null&&m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(b=m.memoizedState.cachePool.pool),j=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(j=g.memoizedState.cachePool.pool),j!==b&&(g.flags|=2048),m!==null&&H(Nd),null;case 24:return b=null,m!==null&&(b=m.memoizedState.cache),g.memoizedState.cache!==b&&(g.flags|=2048),Fl(Ea),Qn(g),null;case 25:return null;case 30:return null}throw Error(s(156,g.tag))}function Kee(m,g){switch(_1(g),g.tag){case 1:return m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 3:return Fl(Ea),pe(),m=g.flags,(m&65536)!==0&&(m&128)===0?(g.flags=m&-65537|128,g):null;case 26:case 27:case 5:return Le(g),null;case 31:if(g.memoizedState!==null){if(br(g),g.alternate===null)throw Error(s(340));bd()}return m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 13:if(br(g),m=g.memoizedState,m!==null&&m.dehydrated!==null){if(g.alternate===null)throw Error(s(340));bd()}return m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 19:return H(wa),null;case 4:return pe(),null;case 10:return Fl(g.type),null;case 22:case 23:return br(g),U1(),m!==null&&H(Nd),m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 24:return Fl(Ea),null;case 25:return null;default:return null}}function e5(m,g){switch(_1(g),g.tag){case 3:Fl(Ea),pe();break;case 26:case 27:case 5:Le(g);break;case 4:pe();break;case 31:g.memoizedState!==null&&br(g);break;case 13:br(g);break;case 19:H(wa);break;case 10:Fl(g.type);break;case 22:case 23:br(g),U1(),m!==null&&H(Nd);break;case 24:Fl(Ea)}}function Lh(m,g){try{var b=g.updateQueue,j=b!==null?b.lastEffect:null;if(j!==null){var P=j.next;b=P;do{if((b.tag&m)===m){j=void 0;var O=b.create,X=b.inst;j=O(),X.destroy=j}b=b.next}while(b!==P)}}catch(we){En(g,g.return,we)}}function oc(m,g,b){try{var j=g.updateQueue,P=j!==null?j.lastEffect:null;if(P!==null){var O=P.next;j=O;do{if((j.tag&m)===m){var X=j.inst,we=X.destroy;if(we!==void 0){X.destroy=void 0,P=g;var ze=b,tt=we;try{tt()}catch(dt){En(P,ze,dt)}}}j=j.next}while(j!==O)}}catch(dt){En(g,g.return,dt)}}function t5(m){var g=m.updateQueue;if(g!==null){var b=m.stateNode;try{WO(g,b)}catch(j){En(m,m.return,j)}}}function n5(m,g,b){b.props=Ad(m.type,m.memoizedProps),b.state=m.memoizedState;try{b.componentWillUnmount()}catch(j){En(m,g,j)}}function Ph(m,g){try{var b=m.ref;if(b!==null){switch(m.tag){case 26:case 27:case 5:var j=m.stateNode;break;case 30:j=m.stateNode;break;default:j=m.stateNode}typeof b=="function"?m.refCleanup=b(j):b.current=j}}catch(P){En(m,g,P)}}function Yi(m,g){var b=m.ref,j=m.refCleanup;if(b!==null)if(typeof j=="function")try{j()}catch(P){En(m,g,P)}finally{m.refCleanup=null,m=m.alternate,m!=null&&(m.refCleanup=null)}else if(typeof b=="function")try{b(null)}catch(P){En(m,g,P)}else b.current=null}function a5(m){var g=m.type,b=m.memoizedProps,j=m.stateNode;try{e:switch(g){case"button":case"input":case"select":case"textarea":b.autoFocus&&j.focus();break e;case"img":b.src?j.src=b.src:b.srcSet&&(j.srcset=b.srcSet)}}catch(P){En(m,m.return,P)}}function bC(m,g,b){try{var j=m.stateNode;yte(j,m.type,b,g),j[L]=g}catch(P){En(m,m.return,P)}}function s5(m){return m.tag===5||m.tag===3||m.tag===26||m.tag===27&&gc(m.type)||m.tag===4}function vC(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||s5(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&m.tag!==18;){if(m.tag===27&&gc(m.type)||m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function wC(m,g,b){var j=m.tag;if(j===5||j===6)m=m.stateNode,g?(b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b).insertBefore(m,g):(g=b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b,g.appendChild(m),b=b._reactRootContainer,b!=null||g.onclick!==null||(g.onclick=Ml));else if(j!==4&&(j===27&&gc(m.type)&&(b=m.stateNode,g=null),m=m.child,m!==null))for(wC(m,g,b),m=m.sibling;m!==null;)wC(m,g,b),m=m.sibling}function H0(m,g,b){var j=m.tag;if(j===5||j===6)m=m.stateNode,g?b.insertBefore(m,g):b.appendChild(m);else if(j!==4&&(j===27&&gc(m.type)&&(b=m.stateNode),m=m.child,m!==null))for(H0(m,g,b),m=m.sibling;m!==null;)H0(m,g,b),m=m.sibling}function r5(m){var g=m.stateNode,b=m.memoizedProps;try{for(var j=m.type,P=g.attributes;P.length;)g.removeAttributeNode(P[0]);ps(g,j,b),g[Nt]=m,g[L]=b}catch(O){En(m,m.return,O)}}var Wl=!1,La=!1,NC=!1,i5=typeof WeakSet=="function"?WeakSet:Set,as=null;function Xee(m,g){if(m=m.containerInfo,HC=dy,m=yO(m),g1(m)){if("selectionStart"in m)var b={start:m.selectionStart,end:m.selectionEnd};else e:{b=(b=m.ownerDocument)&&b.defaultView||window;var j=b.getSelection&&b.getSelection();if(j&&j.rangeCount!==0){b=j.anchorNode;var P=j.anchorOffset,O=j.focusNode;j=j.focusOffset;try{b.nodeType,O.nodeType}catch{b=null;break e}var X=0,we=-1,ze=-1,tt=0,dt=0,ft=m,at=null;t:for(;;){for(var ot;ft!==b||P!==0&&ft.nodeType!==3||(we=X+P),ft!==O||j!==0&&ft.nodeType!==3||(ze=X+j),ft.nodeType===3&&(X+=ft.nodeValue.length),(ot=ft.firstChild)!==null;)at=ft,ft=ot;for(;;){if(ft===m)break t;if(at===b&&++tt===P&&(we=X),at===O&&++dt===j&&(ze=X),(ot=ft.nextSibling)!==null)break;ft=at,at=ft.parentNode}ft=ot}b=we===-1||ze===-1?null:{start:we,end:ze}}else b=null}b=b||{start:0,end:0}}else b=null;for(GC={focusedElem:m,selectionRange:b},dy=!1,as=g;as!==null;)if(g=as,m=g.child,(g.subtreeFlags&1028)!==0&&m!==null)m.return=g,as=m;else for(;as!==null;){switch(g=as,O=g.alternate,m=g.flags,g.tag){case 0:if((m&4)!==0&&(m=g.updateQueue,m=m!==null?m.events:null,m!==null))for(b=0;b<m.length;b++)P=m[b],P.ref.impl=P.nextImpl;break;case 11:case 15:break;case 1:if((m&1024)!==0&&O!==null){m=void 0,b=g,P=O.memoizedProps,O=O.memoizedState,j=b.stateNode;try{var Lt=Ad(b.type,P);m=j.getSnapshotBeforeUpdate(Lt,O),j.__reactInternalSnapshotBeforeUpdate=m}catch(Ht){En(b,b.return,Ht)}}break;case 3:if((m&1024)!==0){if(m=g.stateNode.containerInfo,b=m.nodeType,b===9)qC(m);else if(b===1)switch(m.nodeName){case"HEAD":case"HTML":case"BODY":qC(m);break;default:m.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((m&1024)!==0)throw Error(s(163))}if(m=g.sibling,m!==null){m.return=g.return,as=m;break}as=g.return}}function l5(m,g,b){var j=b.flags;switch(b.tag){case 0:case 11:case 15:ql(m,b),j&4&&Lh(5,b);break;case 1:if(ql(m,b),j&4)if(m=b.stateNode,g===null)try{m.componentDidMount()}catch(X){En(b,b.return,X)}else{var P=Ad(b.type,g.memoizedProps);g=g.memoizedState;try{m.componentDidUpdate(P,g,m.__reactInternalSnapshotBeforeUpdate)}catch(X){En(b,b.return,X)}}j&64&&t5(b),j&512&&Ph(b,b.return);break;case 3:if(ql(m,b),j&64&&(m=b.updateQueue,m!==null)){if(g=null,b.child!==null)switch(b.child.tag){case 27:case 5:g=b.child.stateNode;break;case 1:g=b.child.stateNode}try{WO(m,g)}catch(X){En(b,b.return,X)}}break;case 27:g===null&&j&4&&r5(b);case 26:case 5:ql(m,b),g===null&&j&4&&a5(b),j&512&&Ph(b,b.return);break;case 12:ql(m,b);break;case 31:ql(m,b),j&4&&d5(m,b);break;case 13:ql(m,b),j&4&&u5(m,b),j&64&&(m=b.memoizedState,m!==null&&(m=m.dehydrated,m!==null&&(b=ite.bind(null,b),_te(m,b))));break;case 22:if(j=b.memoizedState!==null||Wl,!j){g=g!==null&&g.memoizedState!==null||La,P=Wl;var O=La;Wl=j,(La=g)&&!O?Yl(m,b,(b.subtreeFlags&8772)!==0):ql(m,b),Wl=P,La=O}break;case 30:break;default:ql(m,b)}}function o5(m){var g=m.alternate;g!==null&&(m.alternate=null,o5(g)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(g=m.stateNode,g!==null&&vt(g)),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}var Jn=null,Vs=!1;function Vl(m,g,b){for(b=b.child;b!==null;)c5(m,g,b),b=b.sibling}function c5(m,g,b){if(Ze&&typeof Ze.onCommitFiberUnmount=="function")try{Ze.onCommitFiberUnmount(Fe,b)}catch{}switch(b.tag){case 26:La||Yi(b,g),Vl(m,g,b),b.memoizedState?b.memoizedState.count--:b.stateNode&&(b=b.stateNode,b.parentNode.removeChild(b));break;case 27:La||Yi(b,g);var j=Jn,P=Vs;gc(b.type)&&(Jn=b.stateNode,Vs=!1),Vl(m,g,b),Uh(b.stateNode),Jn=j,Vs=P;break;case 5:La||Yi(b,g);case 6:if(j=Jn,P=Vs,Jn=null,Vl(m,g,b),Jn=j,Vs=P,Jn!==null)if(Vs)try{(Jn.nodeType===9?Jn.body:Jn.nodeName==="HTML"?Jn.ownerDocument.body:Jn).removeChild(b.stateNode)}catch(O){En(b,g,O)}else try{Jn.removeChild(b.stateNode)}catch(O){En(b,g,O)}break;case 18:Jn!==null&&(Vs?(m=Jn,tM(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,b.stateNode),Cm(m)):tM(Jn,b.stateNode));break;case 4:j=Jn,P=Vs,Jn=b.stateNode.containerInfo,Vs=!0,Vl(m,g,b),Jn=j,Vs=P;break;case 0:case 11:case 14:case 15:oc(2,b,g),La||oc(4,b,g),Vl(m,g,b);break;case 1:La||(Yi(b,g),j=b.stateNode,typeof j.componentWillUnmount=="function"&&n5(b,g,j)),Vl(m,g,b);break;case 21:Vl(m,g,b);break;case 22:La=(j=La)||b.memoizedState!==null,Vl(m,g,b),La=j;break;default:Vl(m,g,b)}}function d5(m,g){if(g.memoizedState===null&&(m=g.alternate,m!==null&&(m=m.memoizedState,m!==null))){m=m.dehydrated;try{Cm(m)}catch(b){En(g,g.return,b)}}}function u5(m,g){if(g.memoizedState===null&&(m=g.alternate,m!==null&&(m=m.memoizedState,m!==null&&(m=m.dehydrated,m!==null))))try{Cm(m)}catch(b){En(g,g.return,b)}}function Zee(m){switch(m.tag){case 31:case 13:case 19:var g=m.stateNode;return g===null&&(g=m.stateNode=new i5),g;case 22:return m=m.stateNode,g=m._retryCache,g===null&&(g=m._retryCache=new i5),g;default:throw Error(s(435,m.tag))}}function G0(m,g){var b=Zee(m);g.forEach(function(j){if(!b.has(j)){b.add(j);var P=lte.bind(null,m,j);j.then(P,P)}})}function qs(m,g){var b=g.deletions;if(b!==null)for(var j=0;j<b.length;j++){var P=b[j],O=m,X=g,we=X;e:for(;we!==null;){switch(we.tag){case 27:if(gc(we.type)){Jn=we.stateNode,Vs=!1;break e}break;case 5:Jn=we.stateNode,Vs=!1;break e;case 3:case 4:Jn=we.stateNode.containerInfo,Vs=!0;break e}we=we.return}if(Jn===null)throw Error(s(160));c5(O,X,P),Jn=null,Vs=!1,O=P.alternate,O!==null&&(O.return=null),P.return=null}if(g.subtreeFlags&13886)for(g=g.child;g!==null;)m5(g,m),g=g.sibling}var ji=null;function m5(m,g){var b=m.alternate,j=m.flags;switch(m.tag){case 0:case 11:case 14:case 15:qs(g,m),Ys(m),j&4&&(oc(3,m,m.return),Lh(3,m),oc(5,m,m.return));break;case 1:qs(g,m),Ys(m),j&512&&(La||b===null||Yi(b,b.return)),j&64&&Wl&&(m=m.updateQueue,m!==null&&(j=m.callbacks,j!==null&&(b=m.shared.hiddenCallbacks,m.shared.hiddenCallbacks=b===null?j:b.concat(j))));break;case 26:var P=ji;if(qs(g,m),Ys(m),j&512&&(La||b===null||Yi(b,b.return)),j&4){var O=b!==null?b.memoizedState:null;if(j=m.memoizedState,b===null)if(j===null)if(m.stateNode===null){e:{j=m.type,b=m.memoizedProps,P=P.ownerDocument||P;t:switch(j){case"title":O=P.getElementsByTagName("title")[0],(!O||O[Qe]||O[Nt]||O.namespaceURI==="http://www.w3.org/2000/svg"||O.hasAttribute("itemprop"))&&(O=P.createElement(j),P.head.insertBefore(O,P.querySelector("head > title"))),ps(O,j,b),O[Nt]=m,Fa(O),j=O;break e;case"link":var X=mM("link","href",P).get(j+(b.href||""));if(X){for(var we=0;we<X.length;we++)if(O=X[we],O.getAttribute("href")===(b.href==null||b.href===""?null:b.href)&&O.getAttribute("rel")===(b.rel==null?null:b.rel)&&O.getAttribute("title")===(b.title==null?null:b.title)&&O.getAttribute("crossorigin")===(b.crossOrigin==null?null:b.crossOrigin)){X.splice(we,1);break t}}O=P.createElement(j),ps(O,j,b),P.head.appendChild(O);break;case"meta":if(X=mM("meta","content",P).get(j+(b.content||""))){for(we=0;we<X.length;we++)if(O=X[we],O.getAttribute("content")===(b.content==null?null:""+b.content)&&O.getAttribute("name")===(b.name==null?null:b.name)&&O.getAttribute("property")===(b.property==null?null:b.property)&&O.getAttribute("http-equiv")===(b.httpEquiv==null?null:b.httpEquiv)&&O.getAttribute("charset")===(b.charSet==null?null:b.charSet)){X.splice(we,1);break t}}O=P.createElement(j),ps(O,j,b),P.head.appendChild(O);break;default:throw Error(s(468,j))}O[Nt]=m,Fa(O),j=O}m.stateNode=j}else fM(P,m.type,m.stateNode);else m.stateNode=uM(P,j,m.memoizedProps);else O!==j?(O===null?b.stateNode!==null&&(b=b.stateNode,b.parentNode.removeChild(b)):O.count--,j===null?fM(P,m.type,m.stateNode):uM(P,j,m.memoizedProps)):j===null&&m.stateNode!==null&&bC(m,m.memoizedProps,b.memoizedProps)}break;case 27:qs(g,m),Ys(m),j&512&&(La||b===null||Yi(b,b.return)),b!==null&&j&4&&bC(m,m.memoizedProps,b.memoizedProps);break;case 5:if(qs(g,m),Ys(m),j&512&&(La||b===null||Yi(b,b.return)),m.flags&32){P=m.stateNode;try{qu(P,"")}catch(Lt){En(m,m.return,Lt)}}j&4&&m.stateNode!=null&&(P=m.memoizedProps,bC(m,P,b!==null?b.memoizedProps:P)),j&1024&&(NC=!0);break;case 6:if(qs(g,m),Ys(m),j&4){if(m.stateNode===null)throw Error(s(162));j=m.memoizedProps,b=m.stateNode;try{b.nodeValue=j}catch(Lt){En(m,m.return,Lt)}}break;case 3:if(iy=null,P=ji,ji=sy(g.containerInfo),qs(g,m),ji=P,Ys(m),j&4&&b!==null&&b.memoizedState.isDehydrated)try{Cm(g.containerInfo)}catch(Lt){En(m,m.return,Lt)}NC&&(NC=!1,f5(m));break;case 4:j=ji,ji=sy(m.stateNode.containerInfo),qs(g,m),Ys(m),ji=j;break;case 12:qs(g,m),Ys(m);break;case 31:qs(g,m),Ys(m),j&4&&(j=m.updateQueue,j!==null&&(m.updateQueue=null,G0(m,j)));break;case 13:qs(g,m),Ys(m),m.child.flags&8192&&m.memoizedState!==null!=(b!==null&&b.memoizedState!==null)&&(V0=de()),j&4&&(j=m.updateQueue,j!==null&&(m.updateQueue=null,G0(m,j)));break;case 22:P=m.memoizedState!==null;var ze=b!==null&&b.memoizedState!==null,tt=Wl,dt=La;if(Wl=tt||P,La=dt||ze,qs(g,m),La=dt,Wl=tt,Ys(m),j&8192)e:for(g=m.stateNode,g._visibility=P?g._visibility&-2:g._visibility|1,P&&(b===null||ze||Wl||La||Ed(m)),b=null,g=m;;){if(g.tag===5||g.tag===26){if(b===null){ze=b=g;try{if(O=ze.stateNode,P)X=O.style,typeof X.setProperty=="function"?X.setProperty("display","none","important"):X.display="none";else{we=ze.stateNode;var ft=ze.memoizedProps.style,at=ft!=null&&ft.hasOwnProperty("display")?ft.display:null;we.style.display=at==null||typeof at=="boolean"?"":(""+at).trim()}}catch(Lt){En(ze,ze.return,Lt)}}}else if(g.tag===6){if(b===null){ze=g;try{ze.stateNode.nodeValue=P?"":ze.memoizedProps}catch(Lt){En(ze,ze.return,Lt)}}}else if(g.tag===18){if(b===null){ze=g;try{var ot=ze.stateNode;P?nM(ot,!0):nM(ze.stateNode,!1)}catch(Lt){En(ze,ze.return,Lt)}}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===m)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===m)break e;for(;g.sibling===null;){if(g.return===null||g.return===m)break e;b===g&&(b=null),g=g.return}b===g&&(b=null),g.sibling.return=g.return,g=g.sibling}j&4&&(j=m.updateQueue,j!==null&&(b=j.retryQueue,b!==null&&(j.retryQueue=null,G0(m,b))));break;case 19:qs(g,m),Ys(m),j&4&&(j=m.updateQueue,j!==null&&(m.updateQueue=null,G0(m,j)));break;case 30:break;case 21:break;default:qs(g,m),Ys(m)}}function Ys(m){var g=m.flags;if(g&2){try{for(var b,j=m.return;j!==null;){if(s5(j)){b=j;break}j=j.return}if(b==null)throw Error(s(160));switch(b.tag){case 27:var P=b.stateNode,O=vC(m);H0(m,O,P);break;case 5:var X=b.stateNode;b.flags&32&&(qu(X,""),b.flags&=-33);var we=vC(m);H0(m,we,X);break;case 3:case 4:var ze=b.stateNode.containerInfo,tt=vC(m);wC(m,tt,ze);break;default:throw Error(s(161))}}catch(dt){En(m,m.return,dt)}m.flags&=-3}g&4096&&(m.flags&=-4097)}function f5(m){if(m.subtreeFlags&1024)for(m=m.child;m!==null;){var g=m;f5(g),g.tag===5&&g.flags&1024&&g.stateNode.reset(),m=m.sibling}}function ql(m,g){if(g.subtreeFlags&8772)for(g=g.child;g!==null;)l5(m,g.alternate,g),g=g.sibling}function Ed(m){for(m=m.child;m!==null;){var g=m;switch(g.tag){case 0:case 11:case 14:case 15:oc(4,g,g.return),Ed(g);break;case 1:Yi(g,g.return);var b=g.stateNode;typeof b.componentWillUnmount=="function"&&n5(g,g.return,b),Ed(g);break;case 27:Uh(g.stateNode);case 26:case 5:Yi(g,g.return),Ed(g);break;case 22:g.memoizedState===null&&Ed(g);break;case 30:Ed(g);break;default:Ed(g)}m=m.sibling}}function Yl(m,g,b){for(b=b&&(g.subtreeFlags&8772)!==0,g=g.child;g!==null;){var j=g.alternate,P=m,O=g,X=O.flags;switch(O.tag){case 0:case 11:case 15:Yl(P,O,b),Lh(4,O);break;case 1:if(Yl(P,O,b),j=O,P=j.stateNode,typeof P.componentDidMount=="function")try{P.componentDidMount()}catch(tt){En(j,j.return,tt)}if(j=O,P=j.updateQueue,P!==null){var we=j.stateNode;try{var ze=P.shared.hiddenCallbacks;if(ze!==null)for(P.shared.hiddenCallbacks=null,P=0;P<ze.length;P++)GO(ze[P],we)}catch(tt){En(j,j.return,tt)}}b&&X&64&&t5(O),Ph(O,O.return);break;case 27:r5(O);case 26:case 5:Yl(P,O,b),b&&j===null&&X&4&&a5(O),Ph(O,O.return);break;case 12:Yl(P,O,b);break;case 31:Yl(P,O,b),b&&X&4&&d5(P,O);break;case 13:Yl(P,O,b),b&&X&4&&u5(P,O);break;case 22:O.memoizedState===null&&Yl(P,O,b),Ph(O,O.return);break;case 30:break;default:Yl(P,O,b)}g=g.sibling}}function jC(m,g){var b=null;m!==null&&m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(b=m.memoizedState.cachePool.pool),m=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(m=g.memoizedState.cachePool.pool),m!==b&&(m!=null&&m.refCount++,b!=null&&yh(b))}function CC(m,g){m=null,g.alternate!==null&&(m=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==m&&(g.refCount++,m!=null&&yh(m))}function Ci(m,g,b,j){if(g.subtreeFlags&10256)for(g=g.child;g!==null;)h5(m,g,b,j),g=g.sibling}function h5(m,g,b,j){var P=g.flags;switch(g.tag){case 0:case 11:case 15:Ci(m,g,b,j),P&2048&&Lh(9,g);break;case 1:Ci(m,g,b,j);break;case 3:Ci(m,g,b,j),P&2048&&(m=null,g.alternate!==null&&(m=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==m&&(g.refCount++,m!=null&&yh(m)));break;case 12:if(P&2048){Ci(m,g,b,j),m=g.stateNode;try{var O=g.memoizedProps,X=O.id,we=O.onPostCommit;typeof we=="function"&&we(X,g.alternate===null?"mount":"update",m.passiveEffectDuration,-0)}catch(ze){En(g,g.return,ze)}}else Ci(m,g,b,j);break;case 31:Ci(m,g,b,j);break;case 13:Ci(m,g,b,j);break;case 23:break;case 22:O=g.stateNode,X=g.alternate,g.memoizedState!==null?O._visibility&2?Ci(m,g,b,j):Dh(m,g):O._visibility&2?Ci(m,g,b,j):(O._visibility|=2,fm(m,g,b,j,(g.subtreeFlags&10256)!==0||!1)),P&2048&&jC(X,g);break;case 24:Ci(m,g,b,j),P&2048&&CC(g.alternate,g);break;default:Ci(m,g,b,j)}}function fm(m,g,b,j,P){for(P=P&&((g.subtreeFlags&10256)!==0||!1),g=g.child;g!==null;){var O=m,X=g,we=b,ze=j,tt=X.flags;switch(X.tag){case 0:case 11:case 15:fm(O,X,we,ze,P),Lh(8,X);break;case 23:break;case 22:var dt=X.stateNode;X.memoizedState!==null?dt._visibility&2?fm(O,X,we,ze,P):Dh(O,X):(dt._visibility|=2,fm(O,X,we,ze,P)),P&&tt&2048&&jC(X.alternate,X);break;case 24:fm(O,X,we,ze,P),P&&tt&2048&&CC(X.alternate,X);break;default:fm(O,X,we,ze,P)}g=g.sibling}}function Dh(m,g){if(g.subtreeFlags&10256)for(g=g.child;g!==null;){var b=m,j=g,P=j.flags;switch(j.tag){case 22:Dh(b,j),P&2048&&jC(j.alternate,j);break;case 24:Dh(b,j),P&2048&&CC(j.alternate,j);break;default:Dh(b,j)}g=g.sibling}}var Oh=8192;function hm(m,g,b){if(m.subtreeFlags&Oh)for(m=m.child;m!==null;)g5(m,g,b),m=m.sibling}function g5(m,g,b){switch(m.tag){case 26:hm(m,g,b),m.flags&Oh&&m.memoizedState!==null&&Rte(b,ji,m.memoizedState,m.memoizedProps);break;case 5:hm(m,g,b);break;case 3:case 4:var j=ji;ji=sy(m.stateNode.containerInfo),hm(m,g,b),ji=j;break;case 22:m.memoizedState===null&&(j=m.alternate,j!==null&&j.memoizedState!==null?(j=Oh,Oh=16777216,hm(m,g,b),Oh=j):hm(m,g,b));break;default:hm(m,g,b)}}function p5(m){var g=m.alternate;if(g!==null&&(m=g.child,m!==null)){g.child=null;do g=m.sibling,m.sibling=null,m=g;while(m!==null)}}function Mh(m){var g=m.deletions;if((m.flags&16)!==0){if(g!==null)for(var b=0;b<g.length;b++){var j=g[b];as=j,y5(j,m)}p5(m)}if(m.subtreeFlags&10256)for(m=m.child;m!==null;)x5(m),m=m.sibling}function x5(m){switch(m.tag){case 0:case 11:case 15:Mh(m),m.flags&2048&&oc(9,m,m.return);break;case 3:Mh(m);break;case 12:Mh(m);break;case 22:var g=m.stateNode;m.memoizedState!==null&&g._visibility&2&&(m.return===null||m.return.tag!==13)?(g._visibility&=-3,W0(m)):Mh(m);break;default:Mh(m)}}function W0(m){var g=m.deletions;if((m.flags&16)!==0){if(g!==null)for(var b=0;b<g.length;b++){var j=g[b];as=j,y5(j,m)}p5(m)}for(m=m.child;m!==null;){switch(g=m,g.tag){case 0:case 11:case 15:oc(8,g,g.return),W0(g);break;case 22:b=g.stateNode,b._visibility&2&&(b._visibility&=-3,W0(g));break;default:W0(g)}m=m.sibling}}function y5(m,g){for(;as!==null;){var b=as;switch(b.tag){case 0:case 11:case 15:oc(8,b,g);break;case 23:case 22:if(b.memoizedState!==null&&b.memoizedState.cachePool!==null){var j=b.memoizedState.cachePool.pool;j!=null&&j.refCount++}break;case 24:yh(b.memoizedState.cache)}if(j=b.child,j!==null)j.return=b,as=j;else e:for(b=m;as!==null;){j=as;var P=j.sibling,O=j.return;if(o5(j),j===b){as=null;break e}if(P!==null){P.return=O,as=P;break e}as=O}}}var Jee={getCacheForType:function(m){var g=hs(Ea),b=g.data.get(m);return b===void 0&&(b=m(),g.data.set(m,b)),b},cacheSignal:function(){return hs(Ea).controller.signal}},ete=typeof WeakMap=="function"?WeakMap:Map,Nn=0,Fn=null,sn=null,ln=0,An=0,vr=null,cc=!1,gm=!1,SC=!1,Ql=0,fa=0,dc=0,Td=0,_C=0,wr=0,pm=0,Ih=null,Qs=null,AC=!1,V0=0,b5=0,q0=1/0,Y0=null,uc=null,Ua=0,mc=null,xm=null,Kl=0,EC=0,TC=null,v5=null,$h=0,kC=null;function Nr(){return(Nn&2)!==0&&ln!==0?ln&-ln:R.T!==null?IC():le()}function w5(){if(wr===0)if((ln&536870912)===0||mn){var m=G;G<<=1,(G&3932160)===0&&(G=262144),wr=m}else wr=536870912;return m=yr.current,m!==null&&(m.flags|=32),wr}function Ks(m,g,b){(m===Fn&&(An===2||An===9)||m.cancelPendingCommit!==null)&&(ym(m,0),fc(m,ln,wr,!1)),Ue(m,b),((Nn&2)===0||m!==Fn)&&(m===Fn&&((Nn&2)===0&&(Td|=b),fa===4&&fc(m,ln,wr,!1)),Qi(m))}function N5(m,g,b){if((Nn&6)!==0)throw Error(s(327));var j=!b&&(g&127)===0&&(g&m.expiredLanes)===0||Ce(m,g),P=j?ate(m,g):PC(m,g,!0),O=j;do{if(P===0){gm&&!j&&fc(m,g,0,!1);break}else{if(b=m.current.alternate,O&&!tte(b)){P=PC(m,g,!1),O=!1;continue}if(P===2){if(O=g,m.errorRecoveryDisabledLanes&O)var X=0;else X=m.pendingLanes&-536870913,X=X!==0?X:X&536870912?536870912:0;if(X!==0){g=X;e:{var we=m;P=Ih;var ze=we.current.memoizedState.isDehydrated;if(ze&&(ym(we,X).flags|=256),X=PC(we,X,!1),X!==2){if(SC&&!ze){we.errorRecoveryDisabledLanes|=O,Td|=O,P=4;break e}O=Qs,Qs=P,O!==null&&(Qs===null?Qs=O:Qs.push.apply(Qs,O))}P=X}if(O=!1,P!==2)continue}}if(P===1){ym(m,0),fc(m,g,0,!0);break}e:{switch(j=m,O=P,O){case 0:case 1:throw Error(s(345));case 4:if((g&4194048)!==g)break;case 6:fc(j,g,wr,!cc);break e;case 2:Qs=null;break;case 3:case 5:break;default:throw Error(s(329))}if((g&62914560)===g&&(P=V0+300-de(),10<P)){if(fc(j,g,wr,!cc),J(j,0,!0)!==0)break e;Kl=g,j.timeoutHandle=J5(j5.bind(null,j,b,Qs,Y0,AC,g,wr,Td,pm,cc,O,"Throttled",-0,0),P);break e}j5(j,b,Qs,Y0,AC,g,wr,Td,pm,cc,O,null,-0,0)}}break}while(!0);Qi(m)}function j5(m,g,b,j,P,O,X,we,ze,tt,dt,ft,at,ot){if(m.timeoutHandle=-1,ft=g.subtreeFlags,ft&8192||(ft&16785408)===16785408){ft={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ml},g5(g,O,ft);var Lt=(O&62914560)===O?V0-de():(O&4194048)===O?b5-de():0;if(Lt=zte(ft,Lt),Lt!==null){Kl=O,m.cancelPendingCommit=Lt(L5.bind(null,m,g,O,b,j,P,X,we,ze,dt,ft,null,at,ot)),fc(m,O,X,!tt);return}}L5(m,g,O,b,j,P,X,we,ze)}function tte(m){for(var g=m;;){var b=g.tag;if((b===0||b===11||b===15)&&g.flags&16384&&(b=g.updateQueue,b!==null&&(b=b.stores,b!==null)))for(var j=0;j<b.length;j++){var P=b[j],O=P.getSnapshot;P=P.value;try{if(!pr(O(),P))return!1}catch{return!1}}if(b=g.child,g.subtreeFlags&16384&&b!==null)b.return=g,g=b;else{if(g===m)break;for(;g.sibling===null;){if(g.return===null||g.return===m)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function fc(m,g,b,j){g&=~_C,g&=~Td,m.suspendedLanes|=g,m.pingedLanes&=~g,j&&(m.warmLanes|=g),j=m.expirationTimes;for(var P=g;0<P;){var O=31-Ee(P),X=1<<O;j[O]=-1,P&=~X}b!==0&&bt(m,b,g)}function Q0(){return(Nn&6)===0?(Rh(0),!1):!0}function LC(){if(sn!==null){if(An===0)var m=sn.return;else m=sn,zl=vd=null,q1(m),om=null,vh=0,m=sn;for(;m!==null;)e5(m.alternate,m),m=m.return;sn=null}}function ym(m,g){var b=m.timeoutHandle;b!==-1&&(m.timeoutHandle=-1,wte(b)),b=m.cancelPendingCommit,b!==null&&(m.cancelPendingCommit=null,b()),Kl=0,LC(),Fn=m,sn=b=$l(m.current,null),ln=g,An=0,vr=null,cc=!1,gm=Ce(m,g),SC=!1,pm=wr=_C=Td=dc=fa=0,Qs=Ih=null,AC=!1,(g&8)!==0&&(g|=g&32);var j=m.entangledLanes;if(j!==0)for(m=m.entanglements,j&=g;0<j;){var P=31-Ee(j),O=1<<P;g|=m[P],j&=~O}return Ql=g,p0(),b}function C5(m,g){Xt=null,R.H=Eh,g===lm||g===C0?(g=FO(),An=3):g===M1?(g=FO(),An=4):An=g===cC?8:g!==null&&typeof g=="object"&&typeof g.then=="function"?6:1,vr=g,sn===null&&(fa=1,R0(m,Br(g,m.current)))}function S5(){var m=yr.current;return m===null?!0:(ln&4194048)===ln?Vr===null:(ln&62914560)===ln||(ln&536870912)!==0?m===Vr:!1}function _5(){var m=R.H;return R.H=Eh,m===null?Eh:m}function A5(){var m=R.A;return R.A=Jee,m}function K0(){fa=4,cc||(ln&4194048)!==ln&&yr.current!==null||(gm=!0),(dc&134217727)===0&&(Td&134217727)===0||Fn===null||fc(Fn,ln,wr,!1)}function PC(m,g,b){var j=Nn;Nn|=2;var P=_5(),O=A5();(Fn!==m||ln!==g)&&(Y0=null,ym(m,g)),g=!1;var X=fa;e:do try{if(An!==0&&sn!==null){var we=sn,ze=vr;switch(An){case 8:LC(),X=6;break e;case 3:case 2:case 9:case 6:yr.current===null&&(g=!0);var tt=An;if(An=0,vr=null,bm(m,we,ze,tt),b&&gm){X=0;break e}break;default:tt=An,An=0,vr=null,bm(m,we,ze,tt)}}nte(),X=fa;break}catch(dt){C5(m,dt)}while(!0);return g&&m.shellSuspendCounter++,zl=vd=null,Nn=j,R.H=P,R.A=O,sn===null&&(Fn=null,ln=0,p0()),X}function nte(){for(;sn!==null;)E5(sn)}function ate(m,g){var b=Nn;Nn|=2;var j=_5(),P=A5();Fn!==m||ln!==g?(Y0=null,q0=de()+500,ym(m,g)):gm=Ce(m,g);e:do try{if(An!==0&&sn!==null){g=sn;var O=vr;t:switch(An){case 1:An=0,vr=null,bm(m,g,O,1);break;case 2:case 9:if(RO(O)){An=0,vr=null,T5(g);break}g=function(){An!==2&&An!==9||Fn!==m||(An=7),Qi(m)},O.then(g,g);break e;case 3:An=7;break e;case 4:An=5;break e;case 7:RO(O)?(An=0,vr=null,T5(g)):(An=0,vr=null,bm(m,g,O,7));break;case 5:var X=null;switch(sn.tag){case 26:X=sn.memoizedState;case 5:case 27:var we=sn;if(X?hM(X):we.stateNode.complete){An=0,vr=null;var ze=we.sibling;if(ze!==null)sn=ze;else{var tt=we.return;tt!==null?(sn=tt,X0(tt)):sn=null}break t}}An=0,vr=null,bm(m,g,O,5);break;case 6:An=0,vr=null,bm(m,g,O,6);break;case 8:LC(),fa=6;break e;default:throw Error(s(462))}}ste();break}catch(dt){C5(m,dt)}while(!0);return zl=vd=null,R.H=j,R.A=P,Nn=b,sn!==null?0:(Fn=null,ln=0,p0(),fa)}function ste(){for(;sn!==null&&!fe();)E5(sn)}function E5(m){var g=Z3(m.alternate,m,Ql);m.memoizedProps=m.pendingProps,g===null?X0(m):sn=g}function T5(m){var g=m,b=g.alternate;switch(g.tag){case 15:case 0:g=V3(b,g,g.pendingProps,g.type,void 0,ln);break;case 11:g=V3(b,g,g.pendingProps,g.type.render,g.ref,ln);break;case 5:q1(g);default:e5(b,g),g=sn=AO(g,Ql),g=Z3(b,g,Ql)}m.memoizedProps=m.pendingProps,g===null?X0(m):sn=g}function bm(m,g,b,j){zl=vd=null,q1(g),om=null,vh=0;var P=g.return;try{if(Vee(m,P,g,b,ln)){fa=1,R0(m,Br(b,m.current)),sn=null;return}}catch(O){if(P!==null)throw sn=P,O;fa=1,R0(m,Br(b,m.current)),sn=null;return}g.flags&32768?(mn||j===1?m=!0:gm||(ln&536870912)!==0?m=!1:(cc=m=!0,(j===2||j===9||j===3||j===6)&&(j=yr.current,j!==null&&j.tag===13&&(j.flags|=16384))),k5(g,m)):X0(g)}function X0(m){var g=m;do{if((g.flags&32768)!==0){k5(g,cc);return}m=g.return;var b=Qee(g.alternate,g,Ql);if(b!==null){sn=b;return}if(g=g.sibling,g!==null){sn=g;return}sn=g=m}while(g!==null);fa===0&&(fa=5)}function k5(m,g){do{var b=Kee(m.alternate,m);if(b!==null){b.flags&=32767,sn=b;return}if(b=m.return,b!==null&&(b.flags|=32768,b.subtreeFlags=0,b.deletions=null),!g&&(m=m.sibling,m!==null)){sn=m;return}sn=m=b}while(m!==null);fa=6,sn=null}function L5(m,g,b,j,P,O,X,we,ze){m.cancelPendingCommit=null;do Z0();while(Ua!==0);if((Nn&6)!==0)throw Error(s(327));if(g!==null){if(g===m.current)throw Error(s(177));if(O=g.lanes|g.childLanes,O|=v1,rt(m,b,O,X,we,ze),m===Fn&&(sn=Fn=null,ln=0),xm=g,mc=m,Kl=b,EC=O,TC=P,v5=j,(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?(m.callbackNode=null,m.callbackPriority=0,ote(Re,function(){return I5(),null})):(m.callbackNode=null,m.callbackPriority=0),j=(g.flags&13878)!==0,(g.subtreeFlags&13878)!==0||j){j=R.T,R.T=null,P=Q.p,Q.p=2,X=Nn,Nn|=4;try{Xee(m,g,b)}finally{Nn=X,Q.p=P,R.T=j}}Ua=1,P5(),D5(),O5()}}function P5(){if(Ua===1){Ua=0;var m=mc,g=xm,b=(g.flags&13878)!==0;if((g.subtreeFlags&13878)!==0||b){b=R.T,R.T=null;var j=Q.p;Q.p=2;var P=Nn;Nn|=4;try{m5(g,m);var O=GC,X=yO(m.containerInfo),we=O.focusedElem,ze=O.selectionRange;if(X!==we&&we&&we.ownerDocument&&xO(we.ownerDocument.documentElement,we)){if(ze!==null&&g1(we)){var tt=ze.start,dt=ze.end;if(dt===void 0&&(dt=tt),"selectionStart"in we)we.selectionStart=tt,we.selectionEnd=Math.min(dt,we.value.length);else{var ft=we.ownerDocument||document,at=ft&&ft.defaultView||window;if(at.getSelection){var ot=at.getSelection(),Lt=we.textContent.length,Ht=Math.min(ze.start,Lt),$n=ze.end===void 0?Ht:Math.min(ze.end,Lt);!ot.extend&&Ht>$n&&(X=$n,$n=Ht,Ht=X);var Xe=pO(we,Ht),Ge=pO(we,$n);if(Xe&&Ge&&(ot.rangeCount!==1||ot.anchorNode!==Xe.node||ot.anchorOffset!==Xe.offset||ot.focusNode!==Ge.node||ot.focusOffset!==Ge.offset)){var et=ft.createRange();et.setStart(Xe.node,Xe.offset),ot.removeAllRanges(),Ht>$n?(ot.addRange(et),ot.extend(Ge.node,Ge.offset)):(et.setEnd(Ge.node,Ge.offset),ot.addRange(et))}}}}for(ft=[],ot=we;ot=ot.parentNode;)ot.nodeType===1&&ft.push({element:ot,left:ot.scrollLeft,top:ot.scrollTop});for(typeof we.focus=="function"&&we.focus(),we=0;we<ft.length;we++){var mt=ft[we];mt.element.scrollLeft=mt.left,mt.element.scrollTop=mt.top}}dy=!!HC,GC=HC=null}finally{Nn=P,Q.p=j,R.T=b}}m.current=g,Ua=2}}function D5(){if(Ua===2){Ua=0;var m=mc,g=xm,b=(g.flags&8772)!==0;if((g.subtreeFlags&8772)!==0||b){b=R.T,R.T=null;var j=Q.p;Q.p=2;var P=Nn;Nn|=4;try{l5(m,g.alternate,g)}finally{Nn=P,Q.p=j,R.T=b}}Ua=3}}function O5(){if(Ua===4||Ua===3){Ua=0,Se();var m=mc,g=xm,b=Kl,j=v5;(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?Ua=5:(Ua=0,xm=mc=null,M5(m,m.pendingLanes));var P=m.pendingLanes;if(P===0&&(uc=null),un(b),g=g.stateNode,Ze&&typeof Ze.onCommitFiberRoot=="function")try{Ze.onCommitFiberRoot(Fe,g,void 0,(g.current.flags&128)===128)}catch{}if(j!==null){g=R.T,P=Q.p,Q.p=2,R.T=null;try{for(var O=m.onRecoverableError,X=0;X<j.length;X++){var we=j[X];O(we.value,{componentStack:we.stack})}}finally{R.T=g,Q.p=P}}(Kl&3)!==0&&Z0(),Qi(m),P=m.pendingLanes,(b&261930)!==0&&(P&42)!==0?m===kC?$h++:($h=0,kC=m):$h=0,Rh(0)}}function M5(m,g){(m.pooledCacheLanes&=g)===0&&(g=m.pooledCache,g!=null&&(m.pooledCache=null,yh(g)))}function Z0(){return P5(),D5(),O5(),I5()}function I5(){if(Ua!==5)return!1;var m=mc,g=EC;EC=0;var b=un(Kl),j=R.T,P=Q.p;try{Q.p=32>b?32:b,R.T=null,b=TC,TC=null;var O=mc,X=Kl;if(Ua=0,xm=mc=null,Kl=0,(Nn&6)!==0)throw Error(s(331));var we=Nn;if(Nn|=4,x5(O.current),h5(O,O.current,X,b),Nn=we,Rh(0,!1),Ze&&typeof Ze.onPostCommitFiberRoot=="function")try{Ze.onPostCommitFiberRoot(Fe,O)}catch{}return!0}finally{Q.p=P,R.T=j,M5(m,g)}}function $5(m,g,b){g=Br(b,g),g=oC(m.stateNode,g,2),m=rc(m,g,2),m!==null&&(Ue(m,2),Qi(m))}function En(m,g,b){if(m.tag===3)$5(m,m,b);else for(;g!==null;){if(g.tag===3){$5(g,m,b);break}else if(g.tag===1){var j=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof j.componentDidCatch=="function"&&(uc===null||!uc.has(j))){m=Br(b,m),b=R3(2),j=rc(g,b,2),j!==null&&(z3(b,j,g,m),Ue(j,2),Qi(j));break}}g=g.return}}function DC(m,g,b){var j=m.pingCache;if(j===null){j=m.pingCache=new ete;var P=new Set;j.set(g,P)}else P=j.get(g),P===void 0&&(P=new Set,j.set(g,P));P.has(b)||(SC=!0,P.add(b),m=rte.bind(null,m,g,b),g.then(m,m))}function rte(m,g,b){var j=m.pingCache;j!==null&&j.delete(g),m.pingedLanes|=m.suspendedLanes&b,m.warmLanes&=~b,Fn===m&&(ln&b)===b&&(fa===4||fa===3&&(ln&62914560)===ln&&300>de()-V0?(Nn&2)===0&&ym(m,0):_C|=b,pm===ln&&(pm=0)),Qi(m)}function R5(m,g){g===0&&(g=V()),m=xd(m,g),m!==null&&(Ue(m,g),Qi(m))}function ite(m){var g=m.memoizedState,b=0;g!==null&&(b=g.retryLane),R5(m,b)}function lte(m,g){var b=0;switch(m.tag){case 31:case 13:var j=m.stateNode,P=m.memoizedState;P!==null&&(b=P.retryLane);break;case 19:j=m.stateNode;break;case 22:j=m.stateNode._retryCache;break;default:throw Error(s(314))}j!==null&&j.delete(g),R5(m,b)}function ote(m,g){return Ye(m,g)}var J0=null,vm=null,OC=!1,ey=!1,MC=!1,hc=0;function Qi(m){m!==vm&&m.next===null&&(vm===null?J0=vm=m:vm=vm.next=m),ey=!0,OC||(OC=!0,dte())}function Rh(m,g){if(!MC&&ey){MC=!0;do for(var b=!1,j=J0;j!==null;){if(m!==0){var P=j.pendingLanes;if(P===0)var O=0;else{var X=j.suspendedLanes,we=j.pingedLanes;O=(1<<31-Ee(42|m)+1)-1,O&=P&~(X&~we),O=O&201326741?O&201326741|1:O?O|2:0}O!==0&&(b=!0,B5(j,O))}else O=ln,O=J(j,j===Fn?O:0,j.cancelPendingCommit!==null||j.timeoutHandle!==-1),(O&3)===0||Ce(j,O)||(b=!0,B5(j,O));j=j.next}while(b);MC=!1}}function cte(){z5()}function z5(){ey=OC=!1;var m=0;hc!==0&&vte()&&(m=hc);for(var g=de(),b=null,j=J0;j!==null;){var P=j.next,O=F5(j,g);O===0?(j.next=null,b===null?J0=P:b.next=P,P===null&&(vm=b)):(b=j,(m!==0||(O&3)!==0)&&(ey=!0)),j=P}Ua!==0&&Ua!==5||Rh(m),hc!==0&&(hc=0)}function F5(m,g){for(var b=m.suspendedLanes,j=m.pingedLanes,P=m.expirationTimes,O=m.pendingLanes&-62914561;0<O;){var X=31-Ee(O),we=1<<X,ze=P[X];ze===-1?((we&b)===0||(we&j)!==0)&&(P[X]=me(we,g)):ze<=g&&(m.expiredLanes|=we),O&=~we}if(g=Fn,b=ln,b=J(m,m===g?b:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),j=m.callbackNode,b===0||m===g&&(An===2||An===9)||m.cancelPendingCommit!==null)return j!==null&&j!==null&&B(j),m.callbackNode=null,m.callbackPriority=0;if((b&3)===0||Ce(m,b)){if(g=b&-b,g===m.callbackPriority)return g;switch(j!==null&&B(j),un(b)){case 2:case 8:b=We;break;case 32:b=Re;break;case 268435456:b=Ie;break;default:b=Re}return j=U5.bind(null,m),b=Ye(b,j),m.callbackPriority=g,m.callbackNode=b,g}return j!==null&&j!==null&&B(j),m.callbackPriority=2,m.callbackNode=null,2}function U5(m,g){if(Ua!==0&&Ua!==5)return m.callbackNode=null,m.callbackPriority=0,null;var b=m.callbackNode;if(Z0()&&m.callbackNode!==b)return null;var j=ln;return j=J(m,m===Fn?j:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),j===0?null:(N5(m,j,g),F5(m,de()),m.callbackNode!=null&&m.callbackNode===b?U5.bind(null,m):null)}function B5(m,g){if(Z0())return null;N5(m,g,!0)}function dte(){Nte(function(){(Nn&6)!==0?Ye(se,cte):z5()})}function IC(){if(hc===0){var m=rm;m===0&&(m=$,$<<=1,($&261888)===0&&($=256)),hc=m}return hc}function H5(m){return m==null||typeof m=="symbol"||typeof m=="boolean"?null:typeof m=="function"?m:o0(""+m)}function G5(m,g){var b=g.ownerDocument.createElement("input");return b.name=g.name,b.value=g.value,m.id&&b.setAttribute("form",m.id),g.parentNode.insertBefore(b,g),m=new FormData(m),b.parentNode.removeChild(b),m}function ute(m,g,b,j,P){if(g==="submit"&&b&&b.stateNode===P){var O=H5((P[L]||null).action),X=j.submitter;X&&(g=(g=X[L]||null)?H5(g.formAction):X.getAttribute("formAction"),g!==null&&(O=g,X=null));var we=new m0("action","action",null,j,P);m.push({event:we,listeners:[{instance:null,listener:function(){if(j.defaultPrevented){if(hc!==0){var ze=X?G5(P,X):new FormData(P);nC(b,{pending:!0,data:ze,method:P.method,action:O},null,ze)}}else typeof O=="function"&&(we.preventDefault(),ze=X?G5(P,X):new FormData(P),nC(b,{pending:!0,data:ze,method:P.method,action:O},O,ze))},currentTarget:P}]})}}for(var $C=0;$C<b1.length;$C++){var RC=b1[$C],mte=RC.toLowerCase(),fte=RC[0].toUpperCase()+RC.slice(1);Ni(mte,"on"+fte)}Ni(wO,"onAnimationEnd"),Ni(NO,"onAnimationIteration"),Ni(jO,"onAnimationStart"),Ni("dblclick","onDoubleClick"),Ni("focusin","onFocus"),Ni("focusout","onBlur"),Ni(Tee,"onTransitionRun"),Ni(kee,"onTransitionStart"),Ni(Lee,"onTransitionCancel"),Ni(CO,"onTransitionEnd"),Wu("onMouseEnter",["mouseout","mouseover"]),Wu("onMouseLeave",["mouseout","mouseover"]),Wu("onPointerEnter",["pointerout","pointerover"]),Wu("onPointerLeave",["pointerout","pointerover"]),fd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),fd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),fd("onBeforeInput",["compositionend","keypress","textInput","paste"]),fd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),fd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),fd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hte=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zh));function W5(m,g){g=(g&4)!==0;for(var b=0;b<m.length;b++){var j=m[b],P=j.event;j=j.listeners;e:{var O=void 0;if(g)for(var X=j.length-1;0<=X;X--){var we=j[X],ze=we.instance,tt=we.currentTarget;if(we=we.listener,ze!==O&&P.isPropagationStopped())break e;O=we,P.currentTarget=tt;try{O(P)}catch(dt){g0(dt)}P.currentTarget=null,O=ze}else for(X=0;X<j.length;X++){if(we=j[X],ze=we.instance,tt=we.currentTarget,we=we.listener,ze!==O&&P.isPropagationStopped())break e;O=we,P.currentTarget=tt;try{O(P)}catch(dt){g0(dt)}P.currentTarget=null,O=ze}}}}function rn(m,g){var b=g[xe];b===void 0&&(b=g[xe]=new Set);var j=m+"__bubble";b.has(j)||(V5(g,m,2,!1),b.add(j))}function zC(m,g,b){var j=0;g&&(j|=4),V5(b,m,j,g)}var ty="_reactListening"+Math.random().toString(36).slice(2);function FC(m){if(!m[ty]){m[ty]=!0,zD.forEach(function(b){b!=="selectionchange"&&(hte.has(b)||zC(b,!1,m),zC(b,!0,m))});var g=m.nodeType===9?m:m.ownerDocument;g===null||g[ty]||(g[ty]=!0,zC("selectionchange",!1,g))}}function V5(m,g,b,j){switch(wM(g)){case 2:var P=Bte;break;case 8:P=Hte;break;default:P=tS}b=P.bind(null,g,b,m),P=void 0,!i1||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(P=!0),j?P!==void 0?m.addEventListener(g,b,{capture:!0,passive:P}):m.addEventListener(g,b,!0):P!==void 0?m.addEventListener(g,b,{passive:P}):m.addEventListener(g,b,!1)}function UC(m,g,b,j,P){var O=j;if((g&1)===0&&(g&2)===0&&j!==null)e:for(;;){if(j===null)return;var X=j.tag;if(X===3||X===4){var we=j.stateNode.containerInfo;if(we===P)break;if(X===4)for(X=j.return;X!==null;){var ze=X.tag;if((ze===3||ze===4)&&X.stateNode.containerInfo===P)return;X=X.return}for(;we!==null;){if(X=ht(we),X===null)return;if(ze=X.tag,ze===5||ze===6||ze===26||ze===27){j=O=X;continue e}we=we.parentNode}}j=j.return}XD(function(){var tt=O,dt=s1(b),ft=[];e:{var at=SO.get(m);if(at!==void 0){var ot=m0,Lt=m;switch(m){case"keypress":if(d0(b)===0)break e;case"keydown":case"keyup":ot=lee;break;case"focusin":Lt="focus",ot=d1;break;case"focusout":Lt="blur",ot=d1;break;case"beforeblur":case"afterblur":ot=d1;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ot=eO;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ot=QJ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ot=dee;break;case wO:case NO:case jO:ot=ZJ;break;case CO:ot=mee;break;case"scroll":case"scrollend":ot=qJ;break;case"wheel":ot=hee;break;case"copy":case"cut":case"paste":ot=eee;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ot=nO;break;case"toggle":case"beforetoggle":ot=pee}var Ht=(g&4)!==0,$n=!Ht&&(m==="scroll"||m==="scrollend"),Xe=Ht?at!==null?at+"Capture":null:at;Ht=[];for(var Ge=tt,et;Ge!==null;){var mt=Ge;if(et=mt.stateNode,mt=mt.tag,mt!==5&&mt!==26&&mt!==27||et===null||Xe===null||(mt=lh(Ge,Xe),mt!=null&&Ht.push(Fh(Ge,mt,et))),$n)break;Ge=Ge.return}0<Ht.length&&(at=new ot(at,Lt,null,b,dt),ft.push({event:at,listeners:Ht}))}}if((g&7)===0){e:{if(at=m==="mouseover"||m==="pointerover",ot=m==="mouseout"||m==="pointerout",at&&b!==a1&&(Lt=b.relatedTarget||b.fromElement)&&(ht(Lt)||Lt[U]))break e;if((ot||at)&&(at=dt.window===dt?dt:(at=dt.ownerDocument)?at.defaultView||at.parentWindow:window,ot?(Lt=b.relatedTarget||b.toElement,ot=tt,Lt=Lt?ht(Lt):null,Lt!==null&&($n=i(Lt),Ht=Lt.tag,Lt!==$n||Ht!==5&&Ht!==27&&Ht!==6)&&(Lt=null)):(ot=null,Lt=tt),ot!==Lt)){if(Ht=eO,mt="onMouseLeave",Xe="onMouseEnter",Ge="mouse",(m==="pointerout"||m==="pointerover")&&(Ht=nO,mt="onPointerLeave",Xe="onPointerEnter",Ge="pointer"),$n=ot==null?at:wn(ot),et=Lt==null?at:wn(Lt),at=new Ht(mt,Ge+"leave",ot,b,dt),at.target=$n,at.relatedTarget=et,mt=null,ht(dt)===tt&&(Ht=new Ht(Xe,Ge+"enter",Lt,b,dt),Ht.target=et,Ht.relatedTarget=$n,mt=Ht),$n=mt,ot&&Lt)t:{for(Ht=gte,Xe=ot,Ge=Lt,et=0,mt=Xe;mt;mt=Ht(mt))et++;mt=0;for(var Ft=Ge;Ft;Ft=Ht(Ft))mt++;for(;0<et-mt;)Xe=Ht(Xe),et--;for(;0<mt-et;)Ge=Ht(Ge),mt--;for(;et--;){if(Xe===Ge||Ge!==null&&Xe===Ge.alternate){Ht=Xe;break t}Xe=Ht(Xe),Ge=Ht(Ge)}Ht=null}else Ht=null;ot!==null&&q5(ft,at,ot,Ht,!1),Lt!==null&&$n!==null&&q5(ft,$n,Lt,Ht,!0)}}e:{if(at=tt?wn(tt):window,ot=at.nodeName&&at.nodeName.toLowerCase(),ot==="select"||ot==="input"&&at.type==="file")var yn=dO;else if(oO(at))if(uO)yn=_ee;else{yn=Cee;var It=jee}else ot=at.nodeName,!ot||ot.toLowerCase()!=="input"||at.type!=="checkbox"&&at.type!=="radio"?tt&&n1(tt.elementType)&&(yn=dO):yn=See;if(yn&&(yn=yn(m,tt))){cO(ft,yn,b,dt);break e}It&&It(m,at,tt),m==="focusout"&&tt&&at.type==="number"&&tt.memoizedProps.value!=null&&t1(at,"number",at.value)}switch(It=tt?wn(tt):window,m){case"focusin":(oO(It)||It.contentEditable==="true")&&(Xu=It,p1=tt,gh=null);break;case"focusout":gh=p1=Xu=null;break;case"mousedown":x1=!0;break;case"contextmenu":case"mouseup":case"dragend":x1=!1,bO(ft,b,dt);break;case"selectionchange":if(Eee)break;case"keydown":case"keyup":bO(ft,b,dt)}var tn;if(m1)e:{switch(m){case"compositionstart":var on="onCompositionStart";break e;case"compositionend":on="onCompositionEnd";break e;case"compositionupdate":on="onCompositionUpdate";break e}on=void 0}else Ku?iO(m,b)&&(on="onCompositionEnd"):m==="keydown"&&b.keyCode===229&&(on="onCompositionStart");on&&(aO&&b.locale!=="ko"&&(Ku||on!=="onCompositionStart"?on==="onCompositionEnd"&&Ku&&(tn=ZD()):(Zo=dt,l1="value"in Zo?Zo.value:Zo.textContent,Ku=!0)),It=ny(tt,on),0<It.length&&(on=new tO(on,m,null,b,dt),ft.push({event:on,listeners:It}),tn?on.data=tn:(tn=lO(b),tn!==null&&(on.data=tn)))),(tn=yee?bee(m,b):vee(m,b))&&(on=ny(tt,"onBeforeInput"),0<on.length&&(It=new tO("onBeforeInput","beforeinput",null,b,dt),ft.push({event:It,listeners:on}),It.data=tn)),ute(ft,m,tt,b,dt)}W5(ft,g)})}function Fh(m,g,b){return{instance:m,listener:g,currentTarget:b}}function ny(m,g){for(var b=g+"Capture",j=[];m!==null;){var P=m,O=P.stateNode;if(P=P.tag,P!==5&&P!==26&&P!==27||O===null||(P=lh(m,b),P!=null&&j.unshift(Fh(m,P,O)),P=lh(m,g),P!=null&&j.push(Fh(m,P,O))),m.tag===3)return j;m=m.return}return[]}function gte(m){if(m===null)return null;do m=m.return;while(m&&m.tag!==5&&m.tag!==27);return m||null}function q5(m,g,b,j,P){for(var O=g._reactName,X=[];b!==null&&b!==j;){var we=b,ze=we.alternate,tt=we.stateNode;if(we=we.tag,ze!==null&&ze===j)break;we!==5&&we!==26&&we!==27||tt===null||(ze=tt,P?(tt=lh(b,O),tt!=null&&X.unshift(Fh(b,tt,ze))):P||(tt=lh(b,O),tt!=null&&X.push(Fh(b,tt,ze)))),b=b.return}X.length!==0&&m.push({event:g,listeners:X})}var pte=/\r\n?/g,xte=/\u0000|\uFFFD/g;function Y5(m){return(typeof m=="string"?m:""+m).replace(pte,`
`).replace(xte,"")}function Q5(m,g){return g=Y5(g),Y5(m)===g}function In(m,g,b,j,P,O){switch(b){case"children":typeof j=="string"?g==="body"||g==="textarea"&&j===""||qu(m,j):(typeof j=="number"||typeof j=="bigint")&&g!=="body"&&qu(m,""+j);break;case"className":i0(m,"class",j);break;case"tabIndex":i0(m,"tabindex",j);break;case"dir":case"role":case"viewBox":case"width":case"height":i0(m,b,j);break;case"style":QD(m,j,O);break;case"data":if(g!=="object"){i0(m,"data",j);break}case"src":case"href":if(j===""&&(g!=="a"||b!=="href")){m.removeAttribute(b);break}if(j==null||typeof j=="function"||typeof j=="symbol"||typeof j=="boolean"){m.removeAttribute(b);break}j=o0(""+j),m.setAttribute(b,j);break;case"action":case"formAction":if(typeof j=="function"){m.setAttribute(b,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof O=="function"&&(b==="formAction"?(g!=="input"&&In(m,g,"name",P.name,P,null),In(m,g,"formEncType",P.formEncType,P,null),In(m,g,"formMethod",P.formMethod,P,null),In(m,g,"formTarget",P.formTarget,P,null)):(In(m,g,"encType",P.encType,P,null),In(m,g,"method",P.method,P,null),In(m,g,"target",P.target,P,null)));if(j==null||typeof j=="symbol"||typeof j=="boolean"){m.removeAttribute(b);break}j=o0(""+j),m.setAttribute(b,j);break;case"onClick":j!=null&&(m.onclick=Ml);break;case"onScroll":j!=null&&rn("scroll",m);break;case"onScrollEnd":j!=null&&rn("scrollend",m);break;case"dangerouslySetInnerHTML":if(j!=null){if(typeof j!="object"||!("__html"in j))throw Error(s(61));if(b=j.__html,b!=null){if(P.children!=null)throw Error(s(60));m.innerHTML=b}}break;case"multiple":m.multiple=j&&typeof j!="function"&&typeof j!="symbol";break;case"muted":m.muted=j&&typeof j!="function"&&typeof j!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(j==null||typeof j=="function"||typeof j=="boolean"||typeof j=="symbol"){m.removeAttribute("xlink:href");break}b=o0(""+j),m.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",b);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":j!=null&&typeof j!="function"&&typeof j!="symbol"?m.setAttribute(b,""+j):m.removeAttribute(b);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":j&&typeof j!="function"&&typeof j!="symbol"?m.setAttribute(b,""):m.removeAttribute(b);break;case"capture":case"download":j===!0?m.setAttribute(b,""):j!==!1&&j!=null&&typeof j!="function"&&typeof j!="symbol"?m.setAttribute(b,j):m.removeAttribute(b);break;case"cols":case"rows":case"size":case"span":j!=null&&typeof j!="function"&&typeof j!="symbol"&&!isNaN(j)&&1<=j?m.setAttribute(b,j):m.removeAttribute(b);break;case"rowSpan":case"start":j==null||typeof j=="function"||typeof j=="symbol"||isNaN(j)?m.removeAttribute(b):m.setAttribute(b,j);break;case"popover":rn("beforetoggle",m),rn("toggle",m),r0(m,"popover",j);break;case"xlinkActuate":Ol(m,"http://www.w3.org/1999/xlink","xlink:actuate",j);break;case"xlinkArcrole":Ol(m,"http://www.w3.org/1999/xlink","xlink:arcrole",j);break;case"xlinkRole":Ol(m,"http://www.w3.org/1999/xlink","xlink:role",j);break;case"xlinkShow":Ol(m,"http://www.w3.org/1999/xlink","xlink:show",j);break;case"xlinkTitle":Ol(m,"http://www.w3.org/1999/xlink","xlink:title",j);break;case"xlinkType":Ol(m,"http://www.w3.org/1999/xlink","xlink:type",j);break;case"xmlBase":Ol(m,"http://www.w3.org/XML/1998/namespace","xml:base",j);break;case"xmlLang":Ol(m,"http://www.w3.org/XML/1998/namespace","xml:lang",j);break;case"xmlSpace":Ol(m,"http://www.w3.org/XML/1998/namespace","xml:space",j);break;case"is":r0(m,"is",j);break;case"innerText":case"textContent":break;default:(!(2<b.length)||b[0]!=="o"&&b[0]!=="O"||b[1]!=="n"&&b[1]!=="N")&&(b=WJ.get(b)||b,r0(m,b,j))}}function BC(m,g,b,j,P,O){switch(b){case"style":QD(m,j,O);break;case"dangerouslySetInnerHTML":if(j!=null){if(typeof j!="object"||!("__html"in j))throw Error(s(61));if(b=j.__html,b!=null){if(P.children!=null)throw Error(s(60));m.innerHTML=b}}break;case"children":typeof j=="string"?qu(m,j):(typeof j=="number"||typeof j=="bigint")&&qu(m,""+j);break;case"onScroll":j!=null&&rn("scroll",m);break;case"onScrollEnd":j!=null&&rn("scrollend",m);break;case"onClick":j!=null&&(m.onclick=Ml);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!FD.hasOwnProperty(b))e:{if(b[0]==="o"&&b[1]==="n"&&(P=b.endsWith("Capture"),g=b.slice(2,P?b.length-7:void 0),O=m[L]||null,O=O!=null?O[b]:null,typeof O=="function"&&m.removeEventListener(g,O,P),typeof j=="function")){typeof O!="function"&&O!==null&&(b in m?m[b]=null:m.hasAttribute(b)&&m.removeAttribute(b)),m.addEventListener(g,j,P);break e}b in m?m[b]=j:j===!0?m.setAttribute(b,""):r0(m,b,j)}}}function ps(m,g,b){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":rn("error",m),rn("load",m);var j=!1,P=!1,O;for(O in b)if(b.hasOwnProperty(O)){var X=b[O];if(X!=null)switch(O){case"src":j=!0;break;case"srcSet":P=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,g));default:In(m,g,O,X,b,null)}}P&&In(m,g,"srcSet",b.srcSet,b,null),j&&In(m,g,"src",b.src,b,null);return;case"input":rn("invalid",m);var we=O=X=P=null,ze=null,tt=null;for(j in b)if(b.hasOwnProperty(j)){var dt=b[j];if(dt!=null)switch(j){case"name":P=dt;break;case"type":X=dt;break;case"checked":ze=dt;break;case"defaultChecked":tt=dt;break;case"value":O=dt;break;case"defaultValue":we=dt;break;case"children":case"dangerouslySetInnerHTML":if(dt!=null)throw Error(s(137,g));break;default:In(m,g,j,dt,b,null)}}WD(m,O,we,ze,tt,X,P,!1);return;case"select":rn("invalid",m),j=X=O=null;for(P in b)if(b.hasOwnProperty(P)&&(we=b[P],we!=null))switch(P){case"value":O=we;break;case"defaultValue":X=we;break;case"multiple":j=we;default:In(m,g,P,we,b,null)}g=O,b=X,m.multiple=!!j,g!=null?Vu(m,!!j,g,!1):b!=null&&Vu(m,!!j,b,!0);return;case"textarea":rn("invalid",m),O=P=j=null;for(X in b)if(b.hasOwnProperty(X)&&(we=b[X],we!=null))switch(X){case"value":j=we;break;case"defaultValue":P=we;break;case"children":O=we;break;case"dangerouslySetInnerHTML":if(we!=null)throw Error(s(91));break;default:In(m,g,X,we,b,null)}qD(m,j,P,O);return;case"option":for(ze in b)b.hasOwnProperty(ze)&&(j=b[ze],j!=null)&&(ze==="selected"?m.selected=j&&typeof j!="function"&&typeof j!="symbol":In(m,g,ze,j,b,null));return;case"dialog":rn("beforetoggle",m),rn("toggle",m),rn("cancel",m),rn("close",m);break;case"iframe":case"object":rn("load",m);break;case"video":case"audio":for(j=0;j<zh.length;j++)rn(zh[j],m);break;case"image":rn("error",m),rn("load",m);break;case"details":rn("toggle",m);break;case"embed":case"source":case"link":rn("error",m),rn("load",m);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(tt in b)if(b.hasOwnProperty(tt)&&(j=b[tt],j!=null))switch(tt){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,g));default:In(m,g,tt,j,b,null)}return;default:if(n1(g)){for(dt in b)b.hasOwnProperty(dt)&&(j=b[dt],j!==void 0&&BC(m,g,dt,j,b,void 0));return}}for(we in b)b.hasOwnProperty(we)&&(j=b[we],j!=null&&In(m,g,we,j,b,null))}function yte(m,g,b,j){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var P=null,O=null,X=null,we=null,ze=null,tt=null,dt=null;for(ot in b){var ft=b[ot];if(b.hasOwnProperty(ot)&&ft!=null)switch(ot){case"checked":break;case"value":break;case"defaultValue":ze=ft;default:j.hasOwnProperty(ot)||In(m,g,ot,null,j,ft)}}for(var at in j){var ot=j[at];if(ft=b[at],j.hasOwnProperty(at)&&(ot!=null||ft!=null))switch(at){case"type":O=ot;break;case"name":P=ot;break;case"checked":tt=ot;break;case"defaultChecked":dt=ot;break;case"value":X=ot;break;case"defaultValue":we=ot;break;case"children":case"dangerouslySetInnerHTML":if(ot!=null)throw Error(s(137,g));break;default:ot!==ft&&In(m,g,at,ot,j,ft)}}e1(m,X,we,ze,tt,dt,O,P);return;case"select":ot=X=we=at=null;for(O in b)if(ze=b[O],b.hasOwnProperty(O)&&ze!=null)switch(O){case"value":break;case"multiple":ot=ze;default:j.hasOwnProperty(O)||In(m,g,O,null,j,ze)}for(P in j)if(O=j[P],ze=b[P],j.hasOwnProperty(P)&&(O!=null||ze!=null))switch(P){case"value":at=O;break;case"defaultValue":we=O;break;case"multiple":X=O;default:O!==ze&&In(m,g,P,O,j,ze)}g=we,b=X,j=ot,at!=null?Vu(m,!!b,at,!1):!!j!=!!b&&(g!=null?Vu(m,!!b,g,!0):Vu(m,!!b,b?[]:"",!1));return;case"textarea":ot=at=null;for(we in b)if(P=b[we],b.hasOwnProperty(we)&&P!=null&&!j.hasOwnProperty(we))switch(we){case"value":break;case"children":break;default:In(m,g,we,null,j,P)}for(X in j)if(P=j[X],O=b[X],j.hasOwnProperty(X)&&(P!=null||O!=null))switch(X){case"value":at=P;break;case"defaultValue":ot=P;break;case"children":break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(s(91));break;default:P!==O&&In(m,g,X,P,j,O)}VD(m,at,ot);return;case"option":for(var Lt in b)at=b[Lt],b.hasOwnProperty(Lt)&&at!=null&&!j.hasOwnProperty(Lt)&&(Lt==="selected"?m.selected=!1:In(m,g,Lt,null,j,at));for(ze in j)at=j[ze],ot=b[ze],j.hasOwnProperty(ze)&&at!==ot&&(at!=null||ot!=null)&&(ze==="selected"?m.selected=at&&typeof at!="function"&&typeof at!="symbol":In(m,g,ze,at,j,ot));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ht in b)at=b[Ht],b.hasOwnProperty(Ht)&&at!=null&&!j.hasOwnProperty(Ht)&&In(m,g,Ht,null,j,at);for(tt in j)if(at=j[tt],ot=b[tt],j.hasOwnProperty(tt)&&at!==ot&&(at!=null||ot!=null))switch(tt){case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(s(137,g));break;default:In(m,g,tt,at,j,ot)}return;default:if(n1(g)){for(var $n in b)at=b[$n],b.hasOwnProperty($n)&&at!==void 0&&!j.hasOwnProperty($n)&&BC(m,g,$n,void 0,j,at);for(dt in j)at=j[dt],ot=b[dt],!j.hasOwnProperty(dt)||at===ot||at===void 0&&ot===void 0||BC(m,g,dt,at,j,ot);return}}for(var Xe in b)at=b[Xe],b.hasOwnProperty(Xe)&&at!=null&&!j.hasOwnProperty(Xe)&&In(m,g,Xe,null,j,at);for(ft in j)at=j[ft],ot=b[ft],!j.hasOwnProperty(ft)||at===ot||at==null&&ot==null||In(m,g,ft,at,j,ot)}function K5(m){switch(m){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function bte(){if(typeof performance.getEntriesByType=="function"){for(var m=0,g=0,b=performance.getEntriesByType("resource"),j=0;j<b.length;j++){var P=b[j],O=P.transferSize,X=P.initiatorType,we=P.duration;if(O&&we&&K5(X)){for(X=0,we=P.responseEnd,j+=1;j<b.length;j++){var ze=b[j],tt=ze.startTime;if(tt>we)break;var dt=ze.transferSize,ft=ze.initiatorType;dt&&K5(ft)&&(ze=ze.responseEnd,X+=dt*(ze<we?1:(we-tt)/(ze-tt)))}if(--j,g+=8*(O+X)/(P.duration/1e3),m++,10<m)break}}if(0<m)return g/m/1e6}return navigator.connection&&(m=navigator.connection.downlink,typeof m=="number")?m:5}var HC=null,GC=null;function ay(m){return m.nodeType===9?m:m.ownerDocument}function X5(m){switch(m){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Z5(m,g){if(m===0)switch(g){case"svg":return 1;case"math":return 2;default:return 0}return m===1&&g==="foreignObject"?0:m}function WC(m,g){return m==="textarea"||m==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.children=="bigint"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var VC=null;function vte(){var m=window.event;return m&&m.type==="popstate"?m===VC?!1:(VC=m,!0):(VC=null,!1)}var J5=typeof setTimeout=="function"?setTimeout:void 0,wte=typeof clearTimeout=="function"?clearTimeout:void 0,eM=typeof Promise=="function"?Promise:void 0,Nte=typeof queueMicrotask=="function"?queueMicrotask:typeof eM<"u"?function(m){return eM.resolve(null).then(m).catch(jte)}:J5;function jte(m){setTimeout(function(){throw m})}function gc(m){return m==="head"}function tM(m,g){var b=g,j=0;do{var P=b.nextSibling;if(m.removeChild(b),P&&P.nodeType===8)if(b=P.data,b==="/$"||b==="/&"){if(j===0){m.removeChild(P),Cm(g);return}j--}else if(b==="$"||b==="$?"||b==="$~"||b==="$!"||b==="&")j++;else if(b==="html")Uh(m.ownerDocument.documentElement);else if(b==="head"){b=m.ownerDocument.head,Uh(b);for(var O=b.firstChild;O;){var X=O.nextSibling,we=O.nodeName;O[Qe]||we==="SCRIPT"||we==="STYLE"||we==="LINK"&&O.rel.toLowerCase()==="stylesheet"||b.removeChild(O),O=X}}else b==="body"&&Uh(m.ownerDocument.body);b=P}while(b);Cm(g)}function nM(m,g){var b=m;m=0;do{var j=b.nextSibling;if(b.nodeType===1?g?(b._stashedDisplay=b.style.display,b.style.display="none"):(b.style.display=b._stashedDisplay||"",b.getAttribute("style")===""&&b.removeAttribute("style")):b.nodeType===3&&(g?(b._stashedText=b.nodeValue,b.nodeValue=""):b.nodeValue=b._stashedText||""),j&&j.nodeType===8)if(b=j.data,b==="/$"){if(m===0)break;m--}else b!=="$"&&b!=="$?"&&b!=="$~"&&b!=="$!"||m++;b=j}while(b)}function qC(m){var g=m.firstChild;for(g&&g.nodeType===10&&(g=g.nextSibling);g;){var b=g;switch(g=g.nextSibling,b.nodeName){case"HTML":case"HEAD":case"BODY":qC(b),vt(b);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(b.rel.toLowerCase()==="stylesheet")continue}m.removeChild(b)}}function Cte(m,g,b,j){for(;m.nodeType===1;){var P=b;if(m.nodeName.toLowerCase()!==g.toLowerCase()){if(!j&&(m.nodeName!=="INPUT"||m.type!=="hidden"))break}else if(j){if(!m[Qe])switch(g){case"meta":if(!m.hasAttribute("itemprop"))break;return m;case"link":if(O=m.getAttribute("rel"),O==="stylesheet"&&m.hasAttribute("data-precedence"))break;if(O!==P.rel||m.getAttribute("href")!==(P.href==null||P.href===""?null:P.href)||m.getAttribute("crossorigin")!==(P.crossOrigin==null?null:P.crossOrigin)||m.getAttribute("title")!==(P.title==null?null:P.title))break;return m;case"style":if(m.hasAttribute("data-precedence"))break;return m;case"script":if(O=m.getAttribute("src"),(O!==(P.src==null?null:P.src)||m.getAttribute("type")!==(P.type==null?null:P.type)||m.getAttribute("crossorigin")!==(P.crossOrigin==null?null:P.crossOrigin))&&O&&m.hasAttribute("async")&&!m.hasAttribute("itemprop"))break;return m;default:return m}}else if(g==="input"&&m.type==="hidden"){var O=P.name==null?null:""+P.name;if(P.type==="hidden"&&m.getAttribute("name")===O)return m}else return m;if(m=qr(m.nextSibling),m===null)break}return null}function Ste(m,g,b){if(g==="")return null;for(;m.nodeType!==3;)if((m.nodeType!==1||m.nodeName!=="INPUT"||m.type!=="hidden")&&!b||(m=qr(m.nextSibling),m===null))return null;return m}function aM(m,g){for(;m.nodeType!==8;)if((m.nodeType!==1||m.nodeName!=="INPUT"||m.type!=="hidden")&&!g||(m=qr(m.nextSibling),m===null))return null;return m}function YC(m){return m.data==="$?"||m.data==="$~"}function QC(m){return m.data==="$!"||m.data==="$?"&&m.ownerDocument.readyState!=="loading"}function _te(m,g){var b=m.ownerDocument;if(m.data==="$~")m._reactRetry=g;else if(m.data!=="$?"||b.readyState!=="loading")g();else{var j=function(){g(),b.removeEventListener("DOMContentLoaded",j)};b.addEventListener("DOMContentLoaded",j),m._reactRetry=j}}function qr(m){for(;m!=null;m=m.nextSibling){var g=m.nodeType;if(g===1||g===3)break;if(g===8){if(g=m.data,g==="$"||g==="$!"||g==="$?"||g==="$~"||g==="&"||g==="F!"||g==="F")break;if(g==="/$"||g==="/&")return null}}return m}var KC=null;function sM(m){m=m.nextSibling;for(var g=0;m;){if(m.nodeType===8){var b=m.data;if(b==="/$"||b==="/&"){if(g===0)return qr(m.nextSibling);g--}else b!=="$"&&b!=="$!"&&b!=="$?"&&b!=="$~"&&b!=="&"||g++}m=m.nextSibling}return null}function rM(m){m=m.previousSibling;for(var g=0;m;){if(m.nodeType===8){var b=m.data;if(b==="$"||b==="$!"||b==="$?"||b==="$~"||b==="&"){if(g===0)return m;g--}else b!=="/$"&&b!=="/&"||g++}m=m.previousSibling}return null}function iM(m,g,b){switch(g=ay(b),m){case"html":if(m=g.documentElement,!m)throw Error(s(452));return m;case"head":if(m=g.head,!m)throw Error(s(453));return m;case"body":if(m=g.body,!m)throw Error(s(454));return m;default:throw Error(s(451))}}function Uh(m){for(var g=m.attributes;g.length;)m.removeAttributeNode(g[0]);vt(m)}var Yr=new Map,lM=new Set;function sy(m){return typeof m.getRootNode=="function"?m.getRootNode():m.nodeType===9?m:m.ownerDocument}var Xl=Q.d;Q.d={f:Ate,r:Ete,D:Tte,C:kte,L:Lte,m:Pte,X:Ote,S:Dte,M:Mte};function Ate(){var m=Xl.f(),g=Q0();return m||g}function Ete(m){var g=Ut(m);g!==null&&g.tag===5&&g.type==="form"?C3(g):Xl.r(m)}var wm=typeof document>"u"?null:document;function oM(m,g,b){var j=wm;if(j&&typeof g=="string"&&g){var P=Fr(g);P='link[rel="'+m+'"][href="'+P+'"]',typeof b=="string"&&(P+='[crossorigin="'+b+'"]'),lM.has(P)||(lM.add(P),m={rel:m,crossOrigin:b,href:g},j.querySelector(P)===null&&(g=j.createElement("link"),ps(g,"link",m),Fa(g),j.head.appendChild(g)))}}function Tte(m){Xl.D(m),oM("dns-prefetch",m,null)}function kte(m,g){Xl.C(m,g),oM("preconnect",m,g)}function Lte(m,g,b){Xl.L(m,g,b);var j=wm;if(j&&m&&g){var P='link[rel="preload"][as="'+Fr(g)+'"]';g==="image"&&b&&b.imageSrcSet?(P+='[imagesrcset="'+Fr(b.imageSrcSet)+'"]',typeof b.imageSizes=="string"&&(P+='[imagesizes="'+Fr(b.imageSizes)+'"]')):P+='[href="'+Fr(m)+'"]';var O=P;switch(g){case"style":O=Nm(m);break;case"script":O=jm(m)}Yr.has(O)||(m=f({rel:"preload",href:g==="image"&&b&&b.imageSrcSet?void 0:m,as:g},b),Yr.set(O,m),j.querySelector(P)!==null||g==="style"&&j.querySelector(Bh(O))||g==="script"&&j.querySelector(Hh(O))||(g=j.createElement("link"),ps(g,"link",m),Fa(g),j.head.appendChild(g)))}}function Pte(m,g){Xl.m(m,g);var b=wm;if(b&&m){var j=g&&typeof g.as=="string"?g.as:"script",P='link[rel="modulepreload"][as="'+Fr(j)+'"][href="'+Fr(m)+'"]',O=P;switch(j){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":O=jm(m)}if(!Yr.has(O)&&(m=f({rel:"modulepreload",href:m},g),Yr.set(O,m),b.querySelector(P)===null)){switch(j){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(b.querySelector(Hh(O)))return}j=b.createElement("link"),ps(j,"link",m),Fa(j),b.head.appendChild(j)}}}function Dte(m,g,b){Xl.S(m,g,b);var j=wm;if(j&&m){var P=ns(j).hoistableStyles,O=Nm(m);g=g||"default";var X=P.get(O);if(!X){var we={loading:0,preload:null};if(X=j.querySelector(Bh(O)))we.loading=5;else{m=f({rel:"stylesheet",href:m,"data-precedence":g},b),(b=Yr.get(O))&&XC(m,b);var ze=X=j.createElement("link");Fa(ze),ps(ze,"link",m),ze._p=new Promise(function(tt,dt){ze.onload=tt,ze.onerror=dt}),ze.addEventListener("load",function(){we.loading|=1}),ze.addEventListener("error",function(){we.loading|=2}),we.loading|=4,ry(X,g,j)}X={type:"stylesheet",instance:X,count:1,state:we},P.set(O,X)}}}function Ote(m,g){Xl.X(m,g);var b=wm;if(b&&m){var j=ns(b).hoistableScripts,P=jm(m),O=j.get(P);O||(O=b.querySelector(Hh(P)),O||(m=f({src:m,async:!0},g),(g=Yr.get(P))&&ZC(m,g),O=b.createElement("script"),Fa(O),ps(O,"link",m),b.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},j.set(P,O))}}function Mte(m,g){Xl.M(m,g);var b=wm;if(b&&m){var j=ns(b).hoistableScripts,P=jm(m),O=j.get(P);O||(O=b.querySelector(Hh(P)),O||(m=f({src:m,async:!0,type:"module"},g),(g=Yr.get(P))&&ZC(m,g),O=b.createElement("script"),Fa(O),ps(O,"link",m),b.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},j.set(P,O))}}function cM(m,g,b,j){var P=(P=je.current)?sy(P):null;if(!P)throw Error(s(446));switch(m){case"meta":case"title":return null;case"style":return typeof b.precedence=="string"&&typeof b.href=="string"?(g=Nm(b.href),b=ns(P).hoistableStyles,j=b.get(g),j||(j={type:"style",instance:null,count:0,state:null},b.set(g,j)),j):{type:"void",instance:null,count:0,state:null};case"link":if(b.rel==="stylesheet"&&typeof b.href=="string"&&typeof b.precedence=="string"){m=Nm(b.href);var O=ns(P).hoistableStyles,X=O.get(m);if(X||(P=P.ownerDocument||P,X={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},O.set(m,X),(O=P.querySelector(Bh(m)))&&!O._p&&(X.instance=O,X.state.loading=5),Yr.has(m)||(b={rel:"preload",as:"style",href:b.href,crossOrigin:b.crossOrigin,integrity:b.integrity,media:b.media,hrefLang:b.hrefLang,referrerPolicy:b.referrerPolicy},Yr.set(m,b),O||Ite(P,m,b,X.state))),g&&j===null)throw Error(s(528,""));return X}if(g&&j!==null)throw Error(s(529,""));return null;case"script":return g=b.async,b=b.src,typeof b=="string"&&g&&typeof g!="function"&&typeof g!="symbol"?(g=jm(b),b=ns(P).hoistableScripts,j=b.get(g),j||(j={type:"script",instance:null,count:0,state:null},b.set(g,j)),j):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,m))}}function Nm(m){return'href="'+Fr(m)+'"'}function Bh(m){return'link[rel="stylesheet"]['+m+"]"}function dM(m){return f({},m,{"data-precedence":m.precedence,precedence:null})}function Ite(m,g,b,j){m.querySelector('link[rel="preload"][as="style"]['+g+"]")?j.loading=1:(g=m.createElement("link"),j.preload=g,g.addEventListener("load",function(){return j.loading|=1}),g.addEventListener("error",function(){return j.loading|=2}),ps(g,"link",b),Fa(g),m.head.appendChild(g))}function jm(m){return'[src="'+Fr(m)+'"]'}function Hh(m){return"script[async]"+m}function uM(m,g,b){if(g.count++,g.instance===null)switch(g.type){case"style":var j=m.querySelector('style[data-href~="'+Fr(b.href)+'"]');if(j)return g.instance=j,Fa(j),j;var P=f({},b,{"data-href":b.href,"data-precedence":b.precedence,href:null,precedence:null});return j=(m.ownerDocument||m).createElement("style"),Fa(j),ps(j,"style",P),ry(j,b.precedence,m),g.instance=j;case"stylesheet":P=Nm(b.href);var O=m.querySelector(Bh(P));if(O)return g.state.loading|=4,g.instance=O,Fa(O),O;j=dM(b),(P=Yr.get(P))&&XC(j,P),O=(m.ownerDocument||m).createElement("link"),Fa(O);var X=O;return X._p=new Promise(function(we,ze){X.onload=we,X.onerror=ze}),ps(O,"link",j),g.state.loading|=4,ry(O,b.precedence,m),g.instance=O;case"script":return O=jm(b.src),(P=m.querySelector(Hh(O)))?(g.instance=P,Fa(P),P):(j=b,(P=Yr.get(O))&&(j=f({},b),ZC(j,P)),m=m.ownerDocument||m,P=m.createElement("script"),Fa(P),ps(P,"link",j),m.head.appendChild(P),g.instance=P);case"void":return null;default:throw Error(s(443,g.type))}else g.type==="stylesheet"&&(g.state.loading&4)===0&&(j=g.instance,g.state.loading|=4,ry(j,b.precedence,m));return g.instance}function ry(m,g,b){for(var j=b.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),P=j.length?j[j.length-1]:null,O=P,X=0;X<j.length;X++){var we=j[X];if(we.dataset.precedence===g)O=we;else if(O!==P)break}O?O.parentNode.insertBefore(m,O.nextSibling):(g=b.nodeType===9?b.head:b,g.insertBefore(m,g.firstChild))}function XC(m,g){m.crossOrigin==null&&(m.crossOrigin=g.crossOrigin),m.referrerPolicy==null&&(m.referrerPolicy=g.referrerPolicy),m.title==null&&(m.title=g.title)}function ZC(m,g){m.crossOrigin==null&&(m.crossOrigin=g.crossOrigin),m.referrerPolicy==null&&(m.referrerPolicy=g.referrerPolicy),m.integrity==null&&(m.integrity=g.integrity)}var iy=null;function mM(m,g,b){if(iy===null){var j=new Map,P=iy=new Map;P.set(b,j)}else P=iy,j=P.get(b),j||(j=new Map,P.set(b,j));if(j.has(m))return j;for(j.set(m,null),b=b.getElementsByTagName(m),P=0;P<b.length;P++){var O=b[P];if(!(O[Qe]||O[Nt]||m==="link"&&O.getAttribute("rel")==="stylesheet")&&O.namespaceURI!=="http://www.w3.org/2000/svg"){var X=O.getAttribute(g)||"";X=m+X;var we=j.get(X);we?we.push(O):j.set(X,[O])}}return j}function fM(m,g,b){m=m.ownerDocument||m,m.head.insertBefore(b,g==="title"?m.querySelector("head > title"):null)}function $te(m,g,b){if(b===1||g.itemProp!=null)return!1;switch(m){case"meta":case"title":return!0;case"style":if(typeof g.precedence!="string"||typeof g.href!="string"||g.href==="")break;return!0;case"link":if(typeof g.rel!="string"||typeof g.href!="string"||g.href===""||g.onLoad||g.onError)break;return g.rel==="stylesheet"?(m=g.disabled,typeof g.precedence=="string"&&m==null):!0;case"script":if(g.async&&typeof g.async!="function"&&typeof g.async!="symbol"&&!g.onLoad&&!g.onError&&g.src&&typeof g.src=="string")return!0}return!1}function hM(m){return!(m.type==="stylesheet"&&(m.state.loading&3)===0)}function Rte(m,g,b,j){if(b.type==="stylesheet"&&(typeof j.media!="string"||matchMedia(j.media).matches!==!1)&&(b.state.loading&4)===0){if(b.instance===null){var P=Nm(j.href),O=g.querySelector(Bh(P));if(O){g=O._p,g!==null&&typeof g=="object"&&typeof g.then=="function"&&(m.count++,m=ly.bind(m),g.then(m,m)),b.state.loading|=4,b.instance=O,Fa(O);return}O=g.ownerDocument||g,j=dM(j),(P=Yr.get(P))&&XC(j,P),O=O.createElement("link"),Fa(O);var X=O;X._p=new Promise(function(we,ze){X.onload=we,X.onerror=ze}),ps(O,"link",j),b.instance=O}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(b,g),(g=b.state.preload)&&(b.state.loading&3)===0&&(m.count++,b=ly.bind(m),g.addEventListener("load",b),g.addEventListener("error",b))}}var JC=0;function zte(m,g){return m.stylesheets&&m.count===0&&cy(m,m.stylesheets),0<m.count||0<m.imgCount?function(b){var j=setTimeout(function(){if(m.stylesheets&&cy(m,m.stylesheets),m.unsuspend){var O=m.unsuspend;m.unsuspend=null,O()}},6e4+g);0<m.imgBytes&&JC===0&&(JC=62500*bte());var P=setTimeout(function(){if(m.waitingForImages=!1,m.count===0&&(m.stylesheets&&cy(m,m.stylesheets),m.unsuspend)){var O=m.unsuspend;m.unsuspend=null,O()}},(m.imgBytes>JC?50:800)+g);return m.unsuspend=b,function(){m.unsuspend=null,clearTimeout(j),clearTimeout(P)}}:null}function ly(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)cy(this,this.stylesheets);else if(this.unsuspend){var m=this.unsuspend;this.unsuspend=null,m()}}}var oy=null;function cy(m,g){m.stylesheets=null,m.unsuspend!==null&&(m.count++,oy=new Map,g.forEach(Fte,m),oy=null,ly.call(m))}function Fte(m,g){if(!(g.state.loading&4)){var b=oy.get(m);if(b)var j=b.get(null);else{b=new Map,oy.set(m,b);for(var P=m.querySelectorAll("link[data-precedence],style[data-precedence]"),O=0;O<P.length;O++){var X=P[O];(X.nodeName==="LINK"||X.getAttribute("media")!=="not all")&&(b.set(X.dataset.precedence,X),j=X)}j&&b.set(null,j)}P=g.instance,X=P.getAttribute("data-precedence"),O=b.get(X)||j,O===j&&b.set(null,P),b.set(X,P),this.count++,j=ly.bind(this),P.addEventListener("load",j),P.addEventListener("error",j),O?O.parentNode.insertBefore(P,O.nextSibling):(m=m.nodeType===9?m.head:m,m.insertBefore(P,m.firstChild)),g.state.loading|=4}}var Gh={$$typeof:S,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function Ute(m,g,b,j,P,O,X,we,ze){this.tag=1,this.containerInfo=m,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_e(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_e(0),this.hiddenUpdates=_e(null),this.identifierPrefix=j,this.onUncaughtError=P,this.onCaughtError=O,this.onRecoverableError=X,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ze,this.incompleteTransitions=new Map}function gM(m,g,b,j,P,O,X,we,ze,tt,dt,ft){return m=new Ute(m,g,b,X,ze,tt,dt,ft,we),g=1,O===!0&&(g|=24),O=xr(3,null,null,g),m.current=O,O.stateNode=m,g=P1(),g.refCount++,m.pooledCache=g,g.refCount++,O.memoizedState={element:j,isDehydrated:b,cache:g},I1(O),m}function pM(m){return m?(m=em,m):em}function xM(m,g,b,j,P,O){P=pM(P),j.context===null?j.context=P:j.pendingContext=P,j=sc(g),j.payload={element:b},O=O===void 0?null:O,O!==null&&(j.callback=O),b=rc(m,j,g),b!==null&&(Ks(b,m,g),Nh(b,m,g))}function yM(m,g){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var b=m.retryLane;m.retryLane=b!==0&&b<g?b:g}}function eS(m,g){yM(m,g),(m=m.alternate)&&yM(m,g)}function bM(m){if(m.tag===13||m.tag===31){var g=xd(m,67108864);g!==null&&Ks(g,m,67108864),eS(m,67108864)}}function vM(m){if(m.tag===13||m.tag===31){var g=Nr();g=Wt(g);var b=xd(m,g);b!==null&&Ks(b,m,g),eS(m,g)}}var dy=!0;function Bte(m,g,b,j){var P=R.T;R.T=null;var O=Q.p;try{Q.p=2,tS(m,g,b,j)}finally{Q.p=O,R.T=P}}function Hte(m,g,b,j){var P=R.T;R.T=null;var O=Q.p;try{Q.p=8,tS(m,g,b,j)}finally{Q.p=O,R.T=P}}function tS(m,g,b,j){if(dy){var P=nS(j);if(P===null)UC(m,g,j,uy,b),NM(m,j);else if(Wte(P,m,g,b,j))j.stopPropagation();else if(NM(m,j),g&4&&-1<Gte.indexOf(m)){for(;P!==null;){var O=Ut(P);if(O!==null)switch(O.tag){case 3:if(O=O.stateNode,O.current.memoizedState.isDehydrated){var X=ne(O.pendingLanes);if(X!==0){var we=O;for(we.pendingLanes|=2,we.entangledLanes|=2;X;){var ze=1<<31-Ee(X);we.entanglements[1]|=ze,X&=~ze}Qi(O),(Nn&6)===0&&(q0=de()+500,Rh(0))}}break;case 31:case 13:we=xd(O,2),we!==null&&Ks(we,O,2),Q0(),eS(O,2)}if(O=nS(j),O===null&&UC(m,g,j,uy,b),O===P)break;P=O}P!==null&&j.stopPropagation()}else UC(m,g,j,null,b)}}function nS(m){return m=s1(m),aS(m)}var uy=null;function aS(m){if(uy=null,m=ht(m),m!==null){var g=i(m);if(g===null)m=null;else{var b=g.tag;if(b===13){if(m=l(g),m!==null)return m;m=null}else if(b===31){if(m=o(g),m!==null)return m;m=null}else if(b===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;m=null}else g!==m&&(m=null)}}return uy=m,null}function wM(m){switch(m){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ke()){case se:return 2;case We:return 8;case Re:case ct:return 32;case Ie:return 268435456;default:return 32}default:return 32}}var sS=!1,pc=null,xc=null,yc=null,Wh=new Map,Vh=new Map,bc=[],Gte="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function NM(m,g){switch(m){case"focusin":case"focusout":pc=null;break;case"dragenter":case"dragleave":xc=null;break;case"mouseover":case"mouseout":yc=null;break;case"pointerover":case"pointerout":Wh.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vh.delete(g.pointerId)}}function qh(m,g,b,j,P,O){return m===null||m.nativeEvent!==O?(m={blockedOn:g,domEventName:b,eventSystemFlags:j,nativeEvent:O,targetContainers:[P]},g!==null&&(g=Ut(g),g!==null&&bM(g)),m):(m.eventSystemFlags|=j,g=m.targetContainers,P!==null&&g.indexOf(P)===-1&&g.push(P),m)}function Wte(m,g,b,j,P){switch(g){case"focusin":return pc=qh(pc,m,g,b,j,P),!0;case"dragenter":return xc=qh(xc,m,g,b,j,P),!0;case"mouseover":return yc=qh(yc,m,g,b,j,P),!0;case"pointerover":var O=P.pointerId;return Wh.set(O,qh(Wh.get(O)||null,m,g,b,j,P)),!0;case"gotpointercapture":return O=P.pointerId,Vh.set(O,qh(Vh.get(O)||null,m,g,b,j,P)),!0}return!1}function jM(m){var g=ht(m.target);if(g!==null){var b=i(g);if(b!==null){if(g=b.tag,g===13){if(g=l(b),g!==null){m.blockedOn=g,it(m.priority,function(){vM(b)});return}}else if(g===31){if(g=o(b),g!==null){m.blockedOn=g,it(m.priority,function(){vM(b)});return}}else if(g===3&&b.stateNode.current.memoizedState.isDehydrated){m.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}m.blockedOn=null}function my(m){if(m.blockedOn!==null)return!1;for(var g=m.targetContainers;0<g.length;){var b=nS(m.nativeEvent);if(b===null){b=m.nativeEvent;var j=new b.constructor(b.type,b);a1=j,b.target.dispatchEvent(j),a1=null}else return g=Ut(b),g!==null&&bM(g),m.blockedOn=b,!1;g.shift()}return!0}function CM(m,g,b){my(m)&&b.delete(g)}function Vte(){sS=!1,pc!==null&&my(pc)&&(pc=null),xc!==null&&my(xc)&&(xc=null),yc!==null&&my(yc)&&(yc=null),Wh.forEach(CM),Vh.forEach(CM)}function fy(m,g){m.blockedOn===g&&(m.blockedOn=null,sS||(sS=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Vte)))}var hy=null;function SM(m){hy!==m&&(hy=m,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){hy===m&&(hy=null);for(var g=0;g<m.length;g+=3){var b=m[g],j=m[g+1],P=m[g+2];if(typeof j!="function"){if(aS(j||b)===null)continue;break}var O=Ut(b);O!==null&&(m.splice(g,3),g-=3,nC(O,{pending:!0,data:P,method:b.method,action:j},j,P))}}))}function Cm(m){function g(ze){return fy(ze,m)}pc!==null&&fy(pc,m),xc!==null&&fy(xc,m),yc!==null&&fy(yc,m),Wh.forEach(g),Vh.forEach(g);for(var b=0;b<bc.length;b++){var j=bc[b];j.blockedOn===m&&(j.blockedOn=null)}for(;0<bc.length&&(b=bc[0],b.blockedOn===null);)jM(b),b.blockedOn===null&&bc.shift();if(b=(m.ownerDocument||m).$$reactFormReplay,b!=null)for(j=0;j<b.length;j+=3){var P=b[j],O=b[j+1],X=P[L]||null;if(typeof O=="function")X||SM(b);else if(X){var we=null;if(O&&O.hasAttribute("formAction")){if(P=O,X=O[L]||null)we=X.formAction;else if(aS(P)!==null)continue}else we=X.action;typeof we=="function"?b[j+1]=we:(b.splice(j,3),j-=3),SM(b)}}}function _M(){function m(O){O.canIntercept&&O.info==="react-transition"&&O.intercept({handler:function(){return new Promise(function(X){return P=X})},focusReset:"manual",scroll:"manual"})}function g(){P!==null&&(P(),P=null),j||setTimeout(b,20)}function b(){if(!j&&!navigation.transition){var O=navigation.currentEntry;O&&O.url!=null&&navigation.navigate(O.url,{state:O.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var j=!1,P=null;return navigation.addEventListener("navigate",m),navigation.addEventListener("navigatesuccess",g),navigation.addEventListener("navigateerror",g),setTimeout(b,100),function(){j=!0,navigation.removeEventListener("navigate",m),navigation.removeEventListener("navigatesuccess",g),navigation.removeEventListener("navigateerror",g),P!==null&&(P(),P=null)}}}function rS(m){this._internalRoot=m}gy.prototype.render=rS.prototype.render=function(m){var g=this._internalRoot;if(g===null)throw Error(s(409));var b=g.current,j=Nr();xM(b,j,m,g,null,null)},gy.prototype.unmount=rS.prototype.unmount=function(){var m=this._internalRoot;if(m!==null){this._internalRoot=null;var g=m.containerInfo;xM(m.current,2,null,m,null,null),Q0(),g[U]=null}};function gy(m){this._internalRoot=m}gy.prototype.unstable_scheduleHydration=function(m){if(m){var g=le();m={blockedOn:null,target:m,priority:g};for(var b=0;b<bc.length&&g!==0&&g<bc[b].priority;b++);bc.splice(b,0,m),b===0&&jM(m)}};var AM=t.version;if(AM!=="19.2.0")throw Error(s(527,AM,"19.2.0"));Q.findDOMNode=function(m){var g=m._reactInternals;if(g===void 0)throw typeof m.render=="function"?Error(s(188)):(m=Object.keys(m).join(","),Error(s(268,m)));return m=d(g),m=m!==null?u(m):null,m=m===null?null:m.stateNode,m};var qte={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var py=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!py.isDisabled&&py.supportsFiber)try{Fe=py.inject(qte),Ze=py}catch{}}return Qh.createRoot=function(m,g){if(!r(m))throw Error(s(299));var b=!1,j="",P=O3,O=M3,X=I3;return g!=null&&(g.unstable_strictMode===!0&&(b=!0),g.identifierPrefix!==void 0&&(j=g.identifierPrefix),g.onUncaughtError!==void 0&&(P=g.onUncaughtError),g.onCaughtError!==void 0&&(O=g.onCaughtError),g.onRecoverableError!==void 0&&(X=g.onRecoverableError)),g=gM(m,1,!1,null,null,b,j,null,P,O,X,_M),m[U]=g.current,FC(m),new rS(g)},Qh.hydrateRoot=function(m,g,b){if(!r(m))throw Error(s(299));var j=!1,P="",O=O3,X=M3,we=I3,ze=null;return b!=null&&(b.unstable_strictMode===!0&&(j=!0),b.identifierPrefix!==void 0&&(P=b.identifierPrefix),b.onUncaughtError!==void 0&&(O=b.onUncaughtError),b.onCaughtError!==void 0&&(X=b.onCaughtError),b.onRecoverableError!==void 0&&(we=b.onRecoverableError),b.formState!==void 0&&(ze=b.formState)),g=gM(m,1,!0,g,b??null,j,P,ze,O,X,we,_M),g.context=pM(null),b=g.current,j=Nr(),j=Wt(j),P=sc(j),P.callback=null,rc(b,P,j),b=j,g.current.lanes=b,Ue(g,b),Qi(g),m[U]=g.current,FC(m),new gy(g)},Qh.version="19.2.0",Qh}var $M;function ane(){if($M)return oS.exports;$M=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),oS.exports=nne(),oS.exports}var sne=ane();var RM="popstate";function rne(e={}){function t(s,r){let{pathname:i,search:l,hash:o}=s.location;return rE("",{pathname:i,search:l,hash:o},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function a(s,r){return typeof r=="string"?r:ep(r)}return lne(t,a,null,e)}function sa(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ci(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function ine(){return Math.random().toString(36).substring(2,10)}function zM(e,t){return{usr:e.state,key:e.key,idx:t}}function rE(e,t,a=null,s){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Df(t):t,state:a,key:t&&t.key||s||ine()}}function ep({pathname:e="/",search:t="",hash:a=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),a&&a!=="#"&&(e+=a.charAt(0)==="#"?a:"#"+a),e}function Df(e){let t={};if(e){let a=e.indexOf("#");a>=0&&(t.hash=e.substring(a),e=e.substring(0,a));let s=e.indexOf("?");s>=0&&(t.search=e.substring(s),e=e.substring(0,s)),e&&(t.pathname=e)}return t}function lne(e,t,a,s={}){let{window:r=document.defaultView,v5Compat:i=!1}=s,l=r.history,o="POP",c=null,d=u();d==null&&(d=0,l.replaceState({...l.state,idx:d},""));function u(){return(l.state||{idx:null}).idx}function f(){o="POP";let v=u(),C=v==null?null:v-d;d=v,c&&c({action:o,location:w.location,delta:C})}function p(v,C){o="PUSH";let N=rE(w.location,v,C);d=u()+1;let S=zM(N,d),T=w.createHref(N);try{l.pushState(S,"",T)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;r.location.assign(T)}i&&c&&c({action:o,location:w.location,delta:1})}function x(v,C){o="REPLACE";let N=rE(w.location,v,C);d=u();let S=zM(N,d),T=w.createHref(N);l.replaceState(S,"",T),i&&c&&c({action:o,location:w.location,delta:0})}function y(v){return one(v)}let w={get action(){return o},get location(){return e(r,l)},listen(v){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(RM,f),c=v,()=>{r.removeEventListener(RM,f),c=null}},createHref(v){return t(r,v)},createURL:y,encodeLocation(v){let C=y(v);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:p,replace:x,go(v){return l.go(v)}};return w}function one(e,t=!1){let a="http://localhost";typeof window<"u"&&(a=window.location.origin!=="null"?window.location.origin:window.location.href),sa(a,"No window.location.(origin|href) available to create URL");let s=typeof e=="string"?e:ep(e);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=a+s),new URL(s,a)}function HB(e,t,a="/"){return cne(e,t,a,!1)}function cne(e,t,a,s){let r=typeof t=="string"?Df(t):t,i=wo(r.pathname||"/",a);if(i==null)return null;let l=GB(e);dne(l);let o=null;for(let c=0;o==null&&c<l.length;++c){let d=wne(i);o=bne(l[c],d,s)}return o}function GB(e,t=[],a=[],s="",r=!1){let i=(l,o,c=r,d)=>{let u={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(s)&&c)return;sa(u.relativePath.startsWith(s),`Absolute route path "${u.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(s.length)}let f=xo([s,u.relativePath]),p=a.concat(u);l.children&&l.children.length>0&&(sa(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),GB(l.children,t,p,f,c)),!(l.path==null&&!l.index)&&t.push({path:f,score:xne(f,l.index),routesMeta:p})};return e.forEach((l,o)=>{if(l.path===""||!l.path?.includes("?"))i(l,o);else for(let c of WB(l.path))i(l,o,!0,c)}),t}function WB(e){let t=e.split("/");if(t.length===0)return[];let[a,...s]=t,r=a.endsWith("?"),i=a.replace(/\?$/,"");if(s.length===0)return r?[i,""]:[i];let l=WB(s.join("/")),o=[];return o.push(...l.map(c=>c===""?i:[i,c].join("/"))),r&&o.push(...l),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function dne(e){e.sort((t,a)=>t.score!==a.score?a.score-t.score:yne(t.routesMeta.map(s=>s.childrenIndex),a.routesMeta.map(s=>s.childrenIndex)))}var une=/^:[\w-]+$/,mne=3,fne=2,hne=1,gne=10,pne=-2,FM=e=>e==="*";function xne(e,t){let a=e.split("/"),s=a.length;return a.some(FM)&&(s+=pne),t&&(s+=fne),a.filter(r=>!FM(r)).reduce((r,i)=>r+(une.test(i)?mne:i===""?hne:gne),s)}function yne(e,t){return e.length===t.length&&e.slice(0,-1).every((s,r)=>s===t[r])?e[e.length-1]-t[t.length-1]:0}function bne(e,t,a=!1){let{routesMeta:s}=e,r={},i="/",l=[];for(let o=0;o<s.length;++o){let c=s[o],d=o===s.length-1,u=i==="/"?t:t.slice(i.length)||"/",f=Qb({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),p=c.route;if(!f&&d&&a&&!s[s.length-1].route.index&&(f=Qb({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!f)return null;Object.assign(r,f.params),l.push({params:r,pathname:xo([i,f.pathname]),pathnameBase:Sne(xo([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=xo([i,f.pathnameBase]))}return l}function Qb(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[a,s]=vne(e.path,e.caseSensitive,e.end),r=t.match(a);if(!r)return null;let i=r[0],l=i.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:s.reduce((d,{paramName:u,isOptional:f},p)=>{if(u==="*"){let y=o[p]||"";l=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const x=o[p];return f&&!x?d[u]=void 0:d[u]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:l,pattern:e}}function vne(e,t=!1,a=!0){ci(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let s=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,c)=>(s.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(s.push({paramName:"*"}),r+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?r+="\\/*$":e!==""&&e!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),s]}function wne(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ci(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function wo(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let a=t.endsWith("/")?t.length-1:t.length,s=e.charAt(a);return s&&s!=="/"?null:e.slice(a)||"/"}var Nne=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function jne(e,t="/"){let{pathname:a,search:s="",hash:r=""}=typeof e=="string"?Df(e):e,i;return a?(a=a.replace(/\/\/+/g,"/"),a.startsWith("/")?i=UM(a.substring(1),"/"):i=UM(a,t)):i=t,{pathname:i,search:_ne(s),hash:Ane(r)}}function UM(e,t){let a=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?a.length>1&&a.pop():r!=="."&&a.push(r)}),a.length>1?a.join("/"):"/"}function mS(e,t,a,s){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Cne(e){return e.filter((t,a)=>a===0||t.route.path&&t.route.path.length>0)}function Ek(e){let t=Cne(e);return t.map((a,s)=>s===t.length-1?a.pathname:a.pathnameBase)}function Tk(e,t,a,s=!1){let r;typeof e=="string"?r=Df(e):(r={...e},sa(!r.pathname||!r.pathname.includes("?"),mS("?","pathname","search",r)),sa(!r.pathname||!r.pathname.includes("#"),mS("#","pathname","hash",r)),sa(!r.search||!r.search.includes("#"),mS("#","search","hash",r)));let i=e===""||r.pathname==="",l=i?"/":r.pathname,o;if(l==null)o=a;else{let f=t.length-1;if(!s&&l.startsWith("..")){let p=l.split("/");for(;p[0]==="..";)p.shift(),f-=1;r.pathname=p.join("/")}o=f>=0?t[f]:"/"}let c=jne(r,o),d=l&&l!=="/"&&l.endsWith("/"),u=(i||l===".")&&a.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}var xo=e=>e.join("/").replace(/\/\/+/g,"/"),Sne=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),_ne=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Ane=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,Ene=class{constructor(e,t,a,s=!1){this.status=e,this.statusText=t||"",this.internal=s,a instanceof Error?(this.data=a.toString(),this.error=a):this.data=a}};function Tne(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function kne(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var VB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function qB(e,t){let a=e;if(typeof a!="string"||!Nne.test(a))return{absoluteURL:void 0,isExternal:!1,to:a};let s=a,r=!1;if(VB)try{let i=new URL(window.location.href),l=a.startsWith("//")?new URL(i.protocol+a):new URL(a),o=wo(l.pathname,t);l.origin===i.origin&&o!=null?a=o+l.search+l.hash:r=!0}catch{ci(!1,`<Link to="${a}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:r,to:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var YB=["POST","PUT","PATCH","DELETE"];new Set(YB);var Lne=["GET",...YB];new Set(Lne);var Of=h.createContext(null);Of.displayName="DataRouter";var jw=h.createContext(null);jw.displayName="DataRouterState";var Pne=h.createContext(!1),QB=h.createContext({isTransitioning:!1});QB.displayName="ViewTransition";var Dne=h.createContext(new Map);Dne.displayName="Fetchers";var One=h.createContext(null);One.displayName="Await";var Ir=h.createContext(null);Ir.displayName="Navigation";var Bp=h.createContext(null);Bp.displayName="Location";var pi=h.createContext({outlet:null,matches:[],isDataRoute:!1});pi.displayName="Route";var kk=h.createContext(null);kk.displayName="RouteError";var KB="REACT_ROUTER_ERROR",Mne="REDIRECT",Ine="ROUTE_ERROR_RESPONSE";function $ne(e){if(e.startsWith(`${KB}:${Mne}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function Rne(e){if(e.startsWith(`${KB}:${Ine}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new Ene(t.status,t.statusText,t.data)}catch{}}function zne(e,{relative:t}={}){sa(Mf(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:s}=h.useContext(Ir),{hash:r,pathname:i,search:l}=Hp(e,{relative:t}),o=i;return a!=="/"&&(o=i==="/"?a:xo([a,i])),s.createHref({pathname:o,search:l,hash:r})}function Mf(){return h.useContext(Bp)!=null}function Yt(){return sa(Mf(),"useLocation() may be used only in the context of a <Router> component."),h.useContext(Bp).location}var XB="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ZB(e){h.useContext(Ir).static||h.useLayoutEffect(e)}function yt(){let{isDataRoute:e}=h.useContext(pi);return e?eae():Fne()}function Fne(){sa(Mf(),"useNavigate() may be used only in the context of a <Router> component.");let e=h.useContext(Of),{basename:t,navigator:a}=h.useContext(Ir),{matches:s}=h.useContext(pi),{pathname:r}=Yt(),i=JSON.stringify(Ek(s)),l=h.useRef(!1);return ZB(()=>{l.current=!0}),h.useCallback((c,d={})=>{if(ci(l.current,XB),!l.current)return;if(typeof c=="number"){a.go(c);return}let u=Tk(c,JSON.parse(i),r,d.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:xo([t,u.pathname])),(d.replace?a.replace:a.push)(u,d.state,d)},[t,a,i,r,e])}var Une=h.createContext(null);function Bne(e){let t=h.useContext(pi).outlet;return h.useMemo(()=>t&&h.createElement(Une.Provider,{value:e},t),[t,e])}function Io(){let{matches:e}=h.useContext(pi),t=e[e.length-1];return t?t.params:{}}function Hp(e,{relative:t}={}){let{matches:a}=h.useContext(pi),{pathname:s}=Yt(),r=JSON.stringify(Ek(a));return h.useMemo(()=>Tk(e,JSON.parse(r),s,t==="path"),[e,r,s,t])}function Hne(e,t){return JB(e,t)}function JB(e,t,a,s,r){sa(Mf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=h.useContext(Ir),{matches:l}=h.useContext(pi),o=l[l.length-1],c=o?o.params:{},d=o?o.pathname:"/",u=o?o.pathnameBase:"/",f=o&&o.route;{let N=f&&f.path||"";tH(d,!f||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let p=Yt(),x;if(t){let N=typeof t=="string"?Df(t):t;sa(u==="/"||N.pathname?.startsWith(u),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${N.pathname}" was given in the \`location\` prop.`),x=N}else x=p;let y=x.pathname||"/",w=y;if(u!=="/"){let N=u.replace(/^\//,"").split("/");w="/"+y.replace(/^\//,"").split("/").slice(N.length).join("/")}let v=HB(e,{pathname:w});ci(f||v!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),ci(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=Yne(v&&v.map(N=>Object.assign({},N,{params:Object.assign({},c,N.params),pathname:xo([u,i.encodeLocation?i.encodeLocation(N.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?u:xo([u,i.encodeLocation?i.encodeLocation(N.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathnameBase])})),l,a,s,r);return t&&C?h.createElement(Bp.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},C):C}function Gne(){let e=Jne(),t=Tne(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),a=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},i={padding:"2px 4px",backgroundColor:s},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=h.createElement(h.Fragment,null,h.createElement("p",null," Hey developer "),h.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",h.createElement("code",{style:i},"ErrorBoundary")," or"," ",h.createElement("code",{style:i},"errorElement")," prop on your route.")),h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},t),a?h.createElement("pre",{style:r},a):null,l)}var Wne=h.createElement(Gne,null),eH=class extends h.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const a=Rne(e.digest);a&&(e=a)}let t=e!==void 0?h.createElement(pi.Provider,{value:this.props.routeContext},h.createElement(kk.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?h.createElement(Vne,{error:e},t):t}};eH.contextType=Pne;var fS=new WeakMap;function Vne({children:e,error:t}){let{basename:a}=h.useContext(Ir);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let s=$ne(t.digest);if(s){let r=fS.get(t);if(r)throw r;let i=qB(s.location,a);if(VB&&!fS.get(t))if(i.isExternal||s.reloadDocument)window.location.href=i.absoluteURL||i.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:s.replace}));throw fS.set(t,l),l}return h.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return e}function qne({routeContext:e,match:t,children:a}){let s=h.useContext(Of);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),h.createElement(pi.Provider,{value:e},a)}function Yne(e,t=[],a=null,s=null,r=null){if(e==null){if(!a)return null;if(a.errors)e=a.matches;else if(t.length===0&&!a.initialized&&a.matches.length>0)e=a.matches;else return null}let i=e,l=a?.errors;if(l!=null){let u=i.findIndex(f=>f.route.id&&l?.[f.route.id]!==void 0);sa(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let o=!1,c=-1;if(a)for(let u=0;u<i.length;u++){let f=i[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=u),f.route.id){let{loaderData:p,errors:x}=a,y=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!x||x[f.route.id]===void 0);if(f.route.lazy||y){o=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}let d=a&&s?(u,f)=>{s(u,{location:a.location,params:a.matches?.[0]?.params??{},unstable_pattern:kne(a.matches),errorInfo:f})}:void 0;return i.reduceRight((u,f,p)=>{let x,y=!1,w=null,v=null;a&&(x=l&&f.route.id?l[f.route.id]:void 0,w=f.route.errorElement||Wne,o&&(c<0&&p===0?(tH("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,v=null):c===p&&(y=!0,v=f.route.hydrateFallbackElement||null)));let C=t.concat(i.slice(0,p+1)),N=()=>{let S;return x?S=w:y?S=v:f.route.Component?S=h.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=u,h.createElement(qne,{match:f,routeContext:{outlet:u,matches:C,isDataRoute:a!=null},children:S})};return a&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?h.createElement(eH,{location:a.location,revalidation:a.revalidation,component:w,error:x,children:N(),routeContext:{outlet:null,matches:C,isDataRoute:!0},onError:d}):N()},null)}function Lk(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Qne(e){let t=h.useContext(Of);return sa(t,Lk(e)),t}function Kne(e){let t=h.useContext(jw);return sa(t,Lk(e)),t}function Xne(e){let t=h.useContext(pi);return sa(t,Lk(e)),t}function Pk(e){let t=Xne(e),a=t.matches[t.matches.length-1];return sa(a.route.id,`${e} can only be used on routes that contain a unique "id"`),a.route.id}function Zne(){return Pk("useRouteId")}function Jne(){let e=h.useContext(kk),t=Kne("useRouteError"),a=Pk("useRouteError");return e!==void 0?e:t.errors?.[a]}function eae(){let{router:e}=Qne("useNavigate"),t=Pk("useNavigate"),a=h.useRef(!1);return ZB(()=>{a.current=!0}),h.useCallback(async(r,i={})=>{ci(a.current,XB),a.current&&(typeof r=="number"?await e.navigate(r):await e.navigate(r,{fromRouteId:t,...i}))},[e,t])}var BM={};function tH(e,t,a){!t&&!BM[e]&&(BM[e]=!0,ci(!1,a))}h.memo(tae);function tae({routes:e,future:t,state:a,onError:s}){return JB(e,void 0,a,s,t)}function ti({to:e,replace:t,state:a,relative:s}){sa(Mf(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=h.useContext(Ir);ci(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=h.useContext(pi),{pathname:l}=Yt(),o=yt(),c=Tk(e,Ek(i),l,s==="path"),d=JSON.stringify(c);return h.useEffect(()=>{o(JSON.parse(d),{replace:t,state:a,relative:s})},[o,d,s,t,a]),null}function Gp(e){return Bne(e.context)}function xt(e){sa(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function nae({basename:e="/",children:t=null,location:a,navigationType:s="POP",navigator:r,static:i=!1,unstable_useTransitions:l}){sa(!Mf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),c=h.useMemo(()=>({basename:o,navigator:r,static:i,unstable_useTransitions:l,future:{}}),[o,r,i,l]);typeof a=="string"&&(a=Df(a));let{pathname:d="/",search:u="",hash:f="",state:p=null,key:x="default"}=a,y=h.useMemo(()=>{let w=wo(d,o);return w==null?null:{location:{pathname:w,search:u,hash:f,state:p,key:x},navigationType:s}},[o,d,u,f,p,x,s]);return ci(y!=null,`<Router basename="${o}"> is not able to match the URL "${d}${u}${f}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:h.createElement(Ir.Provider,{value:c},h.createElement(Bp.Provider,{children:t,value:y}))}function aae({children:e,location:t}){return Hne(iE(e),t)}function iE(e,t=[]){let a=[];return h.Children.forEach(e,(s,r)=>{if(!h.isValidElement(s))return;let i=[...t,r];if(s.type===h.Fragment){a.push.apply(a,iE(s.props.children,i));return}sa(s.type===xt,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),sa(!s.props.index||!s.props.children,"An index route cannot have child routes.");let l={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=iE(s.props.children,i)),a.push(l)}),a}var Eb="get",Tb="application/x-www-form-urlencoded";function Cw(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function sae(e){return Cw(e)&&e.tagName.toLowerCase()==="button"}function rae(e){return Cw(e)&&e.tagName.toLowerCase()==="form"}function iae(e){return Cw(e)&&e.tagName.toLowerCase()==="input"}function lae(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function oae(e,t){return e.button===0&&(!t||t==="_self")&&!lae(e)}function lE(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,a)=>{let s=e[a];return t.concat(Array.isArray(s)?s.map(r=>[a,r]):[[a,s]])},[]))}function cae(e,t){let a=lE(e);return t&&t.forEach((s,r)=>{a.has(r)||t.getAll(r).forEach(i=>{a.append(r,i)})}),a}var xy=null;function dae(){if(xy===null)try{new FormData(document.createElement("form"),0),xy=!1}catch{xy=!0}return xy}var uae=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function hS(e){return e!=null&&!uae.has(e)?(ci(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Tb}"`),null):e}function mae(e,t){let a,s,r,i,l;if(rae(e)){let o=e.getAttribute("action");s=o?wo(o,t):null,a=e.getAttribute("method")||Eb,r=hS(e.getAttribute("enctype"))||Tb,i=new FormData(e)}else if(sae(e)||iae(e)&&(e.type==="submit"||e.type==="image")){let o=e.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||o.getAttribute("action");if(s=c?wo(c,t):null,a=e.getAttribute("formmethod")||o.getAttribute("method")||Eb,r=hS(e.getAttribute("formenctype"))||hS(o.getAttribute("enctype"))||Tb,i=new FormData(o,e),!dae()){let{name:d,type:u,value:f}=e;if(u==="image"){let p=d?`${d}.`:"";i.append(`${p}x`,"0"),i.append(`${p}y`,"0")}else d&&i.append(d,f)}}else{if(Cw(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=Eb,s=null,r=Tb,l=e}return i&&r==="text/plain"&&(l=i,i=void 0),{action:s,method:a.toLowerCase(),encType:r,formData:i,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Dk(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function fae(e,t,a,s){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return a?r.pathname.endsWith("/")?r.pathname=`${r.pathname}_.${s}`:r.pathname=`${r.pathname}.${s}`:r.pathname==="/"?r.pathname=`_root.${s}`:t&&wo(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${s}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${s}`,r}async function hae(e,t){if(e.id in t)return t[e.id];try{let a=await import(e.module);return t[e.id]=a,a}catch(a){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function gae(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function pae(e,t,a){let s=await Promise.all(e.map(async r=>{let i=t.routes[r.route.id];if(i){let l=await hae(i,a);return l.links?l.links():[]}return[]}));return vae(s.flat(1).filter(gae).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function HM(e,t,a,s,r,i){let l=(c,d)=>a[d]?c.route.id!==a[d].route.id:!0,o=(c,d)=>a[d].pathname!==c.pathname||a[d].route.path?.endsWith("*")&&a[d].params["*"]!==c.params["*"];return i==="assets"?t.filter((c,d)=>l(c,d)||o(c,d)):i==="data"?t.filter((c,d)=>{let u=s.routes[c.route.id];if(!u||!u.hasLoader)return!1;if(l(c,d)||o(c,d))return!0;if(c.route.shouldRevalidate){let f=c.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:a[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function xae(e,t,{includeHydrateFallback:a}={}){return yae(e.map(s=>{let r=t.routes[s.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),a&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function yae(e){return[...new Set(e)]}function bae(e){let t={},a=Object.keys(e).sort();for(let s of a)t[s]=e[s];return t}function vae(e,t){let a=new Set;return new Set(t),e.reduce((s,r)=>{let i=JSON.stringify(bae(r));return a.has(i)||(a.add(i),s.push({key:i,link:r})),s},[])}function nH(){let e=h.useContext(Of);return Dk(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function wae(){let e=h.useContext(jw);return Dk(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Ok=h.createContext(void 0);Ok.displayName="FrameworkContext";function aH(){let e=h.useContext(Ok);return Dk(e,"You must render this element inside a <HydratedRouter> element"),e}function Nae(e,t){let a=h.useContext(Ok),[s,r]=h.useState(!1),[i,l]=h.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:f}=t,p=h.useRef(null);h.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let w=C=>{C.forEach(N=>{l(N.isIntersecting)})},v=new IntersectionObserver(w,{threshold:.5});return p.current&&v.observe(p.current),()=>{v.disconnect()}}},[e]),h.useEffect(()=>{if(s){let w=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(w)}}},[s]);let x=()=>{r(!0)},y=()=>{r(!1),l(!1)};return a?e!=="intent"?[i,p,{}]:[i,p,{onFocus:Kh(o,x),onBlur:Kh(c,y),onMouseEnter:Kh(d,x),onMouseLeave:Kh(u,y),onTouchStart:Kh(f,x)}]:[!1,p,{}]}function Kh(e,t){return a=>{e&&e(a),a.defaultPrevented||t(a)}}function jae({page:e,...t}){let{router:a}=nH(),s=h.useMemo(()=>HB(a.routes,e,a.basename),[a.routes,e,a.basename]);return s?h.createElement(Sae,{page:e,matches:s,...t}):null}function Cae(e){let{manifest:t,routeModules:a}=aH(),[s,r]=h.useState([]);return h.useEffect(()=>{let i=!1;return pae(e,t,a).then(l=>{i||r(l)}),()=>{i=!0}},[e,t,a]),s}function Sae({page:e,matches:t,...a}){let s=Yt(),{future:r,manifest:i,routeModules:l}=aH(),{basename:o}=nH(),{loaderData:c,matches:d}=wae(),u=h.useMemo(()=>HM(e,t,d,i,s,"data"),[e,t,d,i,s]),f=h.useMemo(()=>HM(e,t,d,i,s,"assets"),[e,t,d,i,s]),p=h.useMemo(()=>{if(e===s.pathname+s.search+s.hash)return[];let w=new Set,v=!1;if(t.forEach(N=>{let S=i.routes[N.route.id];!S||!S.hasLoader||(!u.some(T=>T.route.id===N.route.id)&&N.route.id in c&&l[N.route.id]?.shouldRevalidate||S.hasClientLoader?v=!0:w.add(N.route.id))}),w.size===0)return[];let C=fae(e,o,r.unstable_trailingSlashAwareDataRequests,"data");return v&&w.size>0&&C.searchParams.set("_routes",t.filter(N=>w.has(N.route.id)).map(N=>N.route.id).join(",")),[C.pathname+C.search]},[o,r.unstable_trailingSlashAwareDataRequests,c,s,i,u,t,e,l]),x=h.useMemo(()=>xae(f,i),[f,i]),y=Cae(f);return h.createElement(h.Fragment,null,p.map(w=>h.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...a})),x.map(w=>h.createElement("link",{key:w,rel:"modulepreload",href:w,...a})),y.map(({key:w,link:v})=>h.createElement("link",{key:w,nonce:a.nonce,...v,crossOrigin:v.crossOrigin??a.crossOrigin})))}function _ae(...e){return t=>{e.forEach(a=>{typeof a=="function"?a(t):a!=null&&(a.current=t)})}}var Aae=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Aae&&(window.__reactRouterVersion="7.13.0")}catch{}function Eae({basename:e,children:t,unstable_useTransitions:a,window:s}){let r=h.useRef();r.current==null&&(r.current=rne({window:s,v5Compat:!0}));let i=r.current,[l,o]=h.useState({action:i.action,location:i.location}),c=h.useCallback(d=>{a===!1?o(d):h.startTransition(()=>o(d))},[a]);return h.useLayoutEffect(()=>i.listen(c),[i,c]),h.createElement(nae,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:i,unstable_useTransitions:a})}var sH=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rH=h.forwardRef(function({onClick:t,discover:a="render",prefetch:s="none",relative:r,reloadDocument:i,replace:l,state:o,target:c,to:d,preventScrollReset:u,viewTransition:f,unstable_defaultShouldRevalidate:p,...x},y){let{basename:w,unstable_useTransitions:v}=h.useContext(Ir),C=typeof d=="string"&&sH.test(d),N=qB(d,w);d=N.to;let S=zne(d,{relative:r}),[T,k,_]=Nae(s,x),E=Lae(d,{replace:l,state:o,target:c,preventScrollReset:u,relative:r,viewTransition:f,unstable_defaultShouldRevalidate:p,unstable_useTransitions:v});function A(z){t&&t(z),z.defaultPrevented||E(z)}let I=h.createElement("a",{...x,..._,href:N.absoluteURL||S,onClick:N.isExternal||i?t:A,ref:_ae(y,k),target:c,"data-discover":!C&&a==="render"?"true":void 0});return T&&!C?h.createElement(h.Fragment,null,I,h.createElement(jae,{page:S})):I});rH.displayName="Link";var Dt=h.forwardRef(function({"aria-current":t="page",caseSensitive:a=!1,className:s="",end:r=!1,style:i,to:l,viewTransition:o,children:c,...d},u){let f=Hp(l,{relative:d.relative}),p=Yt(),x=h.useContext(jw),{navigator:y,basename:w}=h.useContext(Ir),v=x!=null&&Iae(f)&&o===!0,C=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,N=p.pathname,S=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;a||(N=N.toLowerCase(),S=S?S.toLowerCase():null,C=C.toLowerCase()),S&&w&&(S=wo(S,w)||S);const T=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let k=N===C||!r&&N.startsWith(C)&&N.charAt(T)==="/",_=S!=null&&(S===C||!r&&S.startsWith(C)&&S.charAt(C.length)==="/"),E={isActive:k,isPending:_,isTransitioning:v},A=k?t:void 0,I;typeof s=="function"?I=s(E):I=[s,k?"active":null,_?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let z=typeof i=="function"?i(E):i;return h.createElement(rH,{...d,"aria-current":A,className:I,ref:u,style:z,to:l,viewTransition:o},typeof c=="function"?c(E):c)});Dt.displayName="NavLink";var Tae=h.forwardRef(({discover:e="render",fetcherKey:t,navigate:a,reloadDocument:s,replace:r,state:i,method:l=Eb,action:o,onSubmit:c,relative:d,preventScrollReset:u,viewTransition:f,unstable_defaultShouldRevalidate:p,...x},y)=>{let{unstable_useTransitions:w}=h.useContext(Ir),v=Oae(),C=Mae(o,{relative:d}),N=l.toLowerCase()==="get"?"get":"post",S=typeof o=="string"&&sH.test(o),T=k=>{if(c&&c(k),k.defaultPrevented)return;k.preventDefault();let _=k.nativeEvent.submitter,E=_?.getAttribute("formmethod")||l,A=()=>v(_||k.currentTarget,{fetcherKey:t,method:E,navigate:a,replace:r,state:i,relative:d,preventScrollReset:u,viewTransition:f,unstable_defaultShouldRevalidate:p});w&&a!==!1?h.startTransition(()=>A()):A()};return h.createElement("form",{ref:y,method:N,action:C,onSubmit:s?c:T,...x,"data-discover":!S&&e==="render"?"true":void 0})});Tae.displayName="Form";function kae(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function iH(e){let t=h.useContext(Of);return sa(t,kae(e)),t}function Lae(e,{target:t,replace:a,state:s,preventScrollReset:r,relative:i,viewTransition:l,unstable_defaultShouldRevalidate:o,unstable_useTransitions:c}={}){let d=yt(),u=Yt(),f=Hp(e,{relative:i});return h.useCallback(p=>{if(oae(p,t)){p.preventDefault();let x=a!==void 0?a:ep(u)===ep(f),y=()=>d(e,{replace:x,state:s,preventScrollReset:r,relative:i,viewTransition:l,unstable_defaultShouldRevalidate:o});c?h.startTransition(()=>y()):y()}},[u,d,f,a,s,t,e,r,i,l,o,c])}function Ds(e){ci(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=h.useRef(lE(e)),a=h.useRef(!1),s=Yt(),r=h.useMemo(()=>cae(s.search,a.current?null:t.current),[s.search]),i=yt(),l=h.useCallback((o,c)=>{const d=lE(typeof o=="function"?o(new URLSearchParams(r)):o);a.current=!0,i("?"+d,c)},[i,r]);return[r,l]}var Pae=0,Dae=()=>`__${String(++Pae)}__`;function Oae(){let{router:e}=iH("useSubmit"),{basename:t}=h.useContext(Ir),a=Zne(),s=e.fetch,r=e.navigate;return h.useCallback(async(i,l={})=>{let{action:o,method:c,encType:d,formData:u,body:f}=mae(i,t);if(l.navigate===!1){let p=l.fetcherKey||Dae();await s(p,a,l.action||o,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:u,body:f,formMethod:l.method||c,formEncType:l.encType||d,flushSync:l.flushSync})}else await r(l.action||o,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:u,body:f,formMethod:l.method||c,formEncType:l.encType||d,replace:l.replace,state:l.state,fromRouteId:a,flushSync:l.flushSync,viewTransition:l.viewTransition})},[s,r,t,a])}function Mae(e,{relative:t}={}){let{basename:a}=h.useContext(Ir),s=h.useContext(pi);sa(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),i={...Hp(e||".",{relative:t})},l=Yt();if(e==null){i.search=l.search;let o=new URLSearchParams(i.search),c=o.getAll("index");if(c.some(u=>u==="")){o.delete("index"),c.filter(f=>f).forEach(f=>o.append("index",f));let u=o.toString();i.search=u?`?${u}`:""}}return(!e||e===".")&&r.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(i.pathname=i.pathname==="/"?a:xo([a,i.pathname])),ep(i)}function Iae(e,{relative:t}={}){let a=h.useContext(QB);sa(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=iH("useViewTransitionState"),r=Hp(e,{relative:t});if(!a.isTransitioning)return!1;let i=wo(a.currentLocation.pathname,s)||a.currentLocation.pathname,l=wo(a.nextLocation.pathname,s)||a.nextLocation.pathname;return Qb(r.pathname,l)!=null||Qb(r.pathname,i)!=null}var Mi=BB();const yy=Hi(Mi);function lH(e){var t,a,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(a=lH(e[t]))&&(s&&(s+=" "),s+=a)}else for(a in e)e[a]&&(s&&(s+=" "),s+=a);return s}function Tt(){for(var e,t,a=0,s="",r=arguments.length;a<r;a++)(e=arguments[a])&&(t=lH(e))&&(s&&(s+=" "),s+=t);return s}function $ae(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",t.firstChild?t.insertBefore(a,t.firstChild):t.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}$ae(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var Wp=e=>typeof e=="number"&&!isNaN(e),mu=e=>typeof e=="string",No=e=>typeof e=="function",Rae=e=>mu(e)||Wp(e),oE=e=>mu(e)||No(e)?e:null,zae=(e,t)=>e===!1||Wp(e)&&e>0?e:t,cE=e=>h.isValidElement(e)||mu(e)||No(e)||Wp(e);function Fae(e,t,a=300){let{scrollHeight:s,style:r}=e;requestAnimationFrame(()=>{r.minHeight="initial",r.height=s+"px",r.transition=`all ${a}ms`,requestAnimationFrame(()=>{r.height="0",r.padding="0",r.margin="0",setTimeout(t,a)})})}function Uae({enter:e,exit:t,appendPosition:a=!1,collapse:s=!0,collapseDuration:r=300}){return function({children:i,position:l,preventExitTransition:o,done:c,nodeRef:d,isIn:u,playToast:f}){let p=a?`${e}--${l}`:e,x=a?`${t}--${l}`:t,y=h.useRef(0);return h.useLayoutEffect(()=>{let w=d.current,v=p.split(" "),C=N=>{N.target===d.current&&(f(),w.removeEventListener("animationend",C),w.removeEventListener("animationcancel",C),y.current===0&&N.type!=="animationcancel"&&w.classList.remove(...v))};w.classList.add(...v),w.addEventListener("animationend",C),w.addEventListener("animationcancel",C)},[]),h.useEffect(()=>{let w=d.current,v=()=>{w.removeEventListener("animationend",v),s?Fae(w,c,r):c()};u||(o?v():(y.current=1,w.className+=` ${x}`,w.addEventListener("animationend",v)))},[u]),pt.createElement(pt.Fragment,null,i)}}function GM(e,t){return{content:oH(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function oH(e,t,a=!1){return h.isValidElement(e)&&!mu(e.type)?h.cloneElement(e,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:a}):No(e)?e({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:a}):e}function Bae({closeToast:e,theme:t,ariaLabel:a="close"}){return pt.createElement("button",{className:`Toastify__close-button Toastify__close-button--${t}`,type:"button",onClick:s=>{s.stopPropagation(),e(!0)},"aria-label":a},pt.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},pt.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function Hae({delay:e,isRunning:t,closeToast:a,type:s="default",hide:r,className:i,controlledProgress:l,progress:o,rtl:c,isIn:d,theme:u}){let f=r||l&&o===0,p={animationDuration:`${e}ms`,animationPlayState:t?"running":"paused"};l&&(p.transform=`scaleX(${o})`);let x=Tt("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${u}`,`Toastify__progress-bar--${s}`,{"Toastify__progress-bar--rtl":c}),y=No(i)?i({rtl:c,type:s,defaultClassName:x}):Tt(x,i),w={[l&&o>=1?"onTransitionEnd":"onAnimationEnd"]:l&&o<1?null:()=>{d&&a()}};return pt.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":f},pt.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${u} Toastify__progress-bar--${s}`}),pt.createElement("div",{role:"progressbar","aria-hidden":f?"true":"false","aria-label":"notification timer",className:y,style:p,...w}))}var Gae=1,cH=()=>`${Gae++}`;function Wae(e,t,a){let s=1,r=0,i=[],l=[],o=t,c=new Map,d=new Set,u=N=>(d.add(N),()=>d.delete(N)),f=()=>{l=Array.from(c.values()),d.forEach(N=>N())},p=({containerId:N,toastId:S,updateId:T})=>{let k=N?N!==e:e!==1,_=c.has(S)&&T==null;return k||_},x=(N,S)=>{c.forEach(T=>{var k;(S==null||S===T.props.toastId)&&((k=T.toggle)==null||k.call(T,N))})},y=N=>{var S,T;(T=(S=N.props)==null?void 0:S.onClose)==null||T.call(S,N.removalReason),N.isActive=!1},w=N=>{if(N==null)c.forEach(y);else{let S=c.get(N);S&&y(S)}f()},v=()=>{r-=i.length,i=[]},C=N=>{var S,T;let{toastId:k,updateId:_}=N.props,E=_==null;N.staleId&&c.delete(N.staleId),N.isActive=!0,c.set(k,N),f(),a(GM(N,E?"added":"updated")),E&&((T=(S=N.props).onOpen)==null||T.call(S))};return{id:e,props:o,observe:u,toggle:x,removeToast:w,toasts:c,clearQueue:v,buildToast:(N,S)=>{if(p(S))return;let{toastId:T,updateId:k,data:_,staleId:E,delay:A}=S,I=k==null;I&&r++;let z={...o,style:o.toastStyle,key:s++,...Object.fromEntries(Object.entries(S).filter(([D,M])=>M!=null)),toastId:T,updateId:k,data:_,isIn:!1,className:oE(S.className||o.toastClassName),progressClassName:oE(S.progressClassName||o.progressClassName),autoClose:S.isLoading?!1:zae(S.autoClose,o.autoClose),closeToast(D){c.get(T).removalReason=D,w(T)},deleteToast(){let D=c.get(T);if(D!=null){if(a(GM(D,"removed")),c.delete(T),r--,r<0&&(r=0),i.length>0){C(i.shift());return}f()}}};z.closeButton=o.closeButton,S.closeButton===!1||cE(S.closeButton)?z.closeButton=S.closeButton:S.closeButton===!0&&(z.closeButton=cE(o.closeButton)?o.closeButton:!0);let F={content:N,props:z,staleId:E};o.limit&&o.limit>0&&r>o.limit&&I?i.push(F):Wp(A)?setTimeout(()=>{C(F)},A):C(F)},setProps(N){o=N},setToggle:(N,S)=>{let T=c.get(N);T&&(T.toggle=S)},isToastActive:N=>{var S;return(S=c.get(N))==null?void 0:S.isActive},getSnapshot:()=>l}}var $s=new Map,tp=[],dE=new Set,Vae=e=>dE.forEach(t=>t(e)),dH=()=>$s.size>0;function qae(){tp.forEach(e=>mH(e.content,e.options)),tp=[]}var Yae=(e,{containerId:t})=>{var a;return(a=$s.get(t||1))==null?void 0:a.toasts.get(e)};function uH(e,t){var a;if(t)return!!((a=$s.get(t))!=null&&a.isToastActive(e));let s=!1;return $s.forEach(r=>{r.isToastActive(e)&&(s=!0)}),s}function Qae(e){if(!dH()){tp=tp.filter(t=>e!=null&&t.options.toastId!==e);return}if(e==null||Rae(e))$s.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=$s.get(e.containerId);t?t.removeToast(e.id):$s.forEach(a=>{a.removeToast(e.id)})}}var Kae=(e={})=>{$s.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})};function mH(e,t){cE(e)&&(dH()||tp.push({content:e,options:t}),$s.forEach(a=>{a.buildToast(e,t)}))}function Xae(e){var t;(t=$s.get(e.containerId||1))==null||t.setToggle(e.id,e.fn)}function fH(e,t){$s.forEach(a=>{(t==null||!(t!=null&&t.containerId)||t?.containerId===a.id)&&a.toggle(e,t?.id)})}function Zae(e){let t=e.containerId||1;return{subscribe(a){let s=Wae(t,e,Vae);$s.set(t,s);let r=s.observe(a);return qae(),()=>{r(),$s.delete(t)}},setProps(a){var s;(s=$s.get(t))==null||s.setProps(a)},getSnapshot(){var a;return(a=$s.get(t))==null?void 0:a.getSnapshot()}}}function Jae(e){return dE.add(e),()=>{dE.delete(e)}}function ese(e){return e&&(mu(e.toastId)||Wp(e.toastId))?e.toastId:cH()}function Vp(e,t){return mH(e,t),t.toastId}function Sw(e,t){return{...t,type:t&&t.type||e,toastId:ese(t)}}function _w(e){return(t,a)=>Vp(t,Sw(e,a))}function q(e,t){return Vp(e,Sw("default",t))}q.loading=(e,t)=>Vp(e,Sw("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t}));function tse(e,{pending:t,error:a,success:s},r){let i;t&&(i=mu(t)?q.loading(t,r):q.loading(t.render,{...r,...t}));let l={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},o=(d,u,f)=>{if(u==null){q.dismiss(i);return}let p={type:d,...l,...r,data:f},x=mu(u)?{render:u}:u;return i?q.update(i,{...p,...x}):q(x.render,{...p,...x}),f},c=No(e)?e():e;return c.then(d=>o("success",s,d)).catch(d=>o("error",a,d)),c}q.promise=tse;q.success=_w("success");q.info=_w("info");q.error=_w("error");q.warning=_w("warning");q.warn=q.warning;q.dark=(e,t)=>Vp(e,Sw("default",{theme:"dark",...t}));function nse(e){Qae(e)}q.dismiss=nse;q.clearWaitingQueue=Kae;q.isActive=uH;q.update=(e,t={})=>{let a=Yae(e,t);if(a){let{props:s,content:r}=a,i={delay:100,...s,...t,toastId:t.toastId||e,updateId:cH()};i.toastId!==e&&(i.staleId=e);let l=i.render||r;delete i.render,Vp(l,i)}};q.done=e=>{q.update(e,{progress:1})};q.onChange=Jae;q.play=e=>fH(!0,e);q.pause=e=>fH(!1,e);function ase(e){var t;let{subscribe:a,getSnapshot:s,setProps:r}=h.useRef(Zae(e)).current;r(e);let i=(t=h.useSyncExternalStore(a,s,s))==null?void 0:t.slice();function l(o){if(!i)return[];let c=new Map;return e.newestOnTop&&i.reverse(),i.forEach(d=>{let{position:u}=d.props;c.has(u)||c.set(u,[]),c.get(u).push(d)}),Array.from(c,d=>o(d[0],d[1]))}return{getToastToRender:l,isToastActive:uH,count:i?.length}}function sse(e){let[t,a]=h.useState(!1),[s,r]=h.useState(!1),i=h.useRef(null),l=h.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:o,pauseOnHover:c,closeToast:d,onClick:u,closeOnClick:f}=e;Xae({id:e.toastId,containerId:e.containerId,fn:a}),h.useEffect(()=>{if(e.pauseOnFocusLoss)return p(),()=>{x()}},[e.pauseOnFocusLoss]);function p(){document.hasFocus()||C(),window.addEventListener("focus",v),window.addEventListener("blur",C)}function x(){window.removeEventListener("focus",v),window.removeEventListener("blur",C)}function y(E){if(e.draggable===!0||e.draggable===E.pointerType){N();let A=i.current;l.canCloseOnClick=!0,l.canDrag=!0,A.style.transition="none",e.draggableDirection==="x"?(l.start=E.clientX,l.removalDistance=A.offsetWidth*(e.draggablePercent/100)):(l.start=E.clientY,l.removalDistance=A.offsetHeight*(e.draggablePercent===80?e.draggablePercent*1.5:e.draggablePercent)/100)}}function w(E){let{top:A,bottom:I,left:z,right:F}=i.current.getBoundingClientRect();E.nativeEvent.type!=="touchend"&&e.pauseOnHover&&E.clientX>=z&&E.clientX<=F&&E.clientY>=A&&E.clientY<=I?C():v()}function v(){a(!0)}function C(){a(!1)}function N(){l.didMove=!1,document.addEventListener("pointermove",T),document.addEventListener("pointerup",k)}function S(){document.removeEventListener("pointermove",T),document.removeEventListener("pointerup",k)}function T(E){let A=i.current;if(l.canDrag&&A){l.didMove=!0,t&&C(),e.draggableDirection==="x"?l.delta=E.clientX-l.start:l.delta=E.clientY-l.start,l.start!==E.clientX&&(l.canCloseOnClick=!1);let I=e.draggableDirection==="x"?`${l.delta}px, var(--y)`:`0, calc(${l.delta}px + var(--y))`;A.style.transform=`translate3d(${I},0)`,A.style.opacity=`${1-Math.abs(l.delta/l.removalDistance)}`}}function k(){S();let E=i.current;if(l.canDrag&&l.didMove&&E){if(l.canDrag=!1,Math.abs(l.delta)>l.removalDistance){r(!0),e.closeToast(!0),e.collapseAll();return}E.style.transition="transform 0.2s, opacity 0.2s",E.style.removeProperty("transform"),E.style.removeProperty("opacity")}}let _={onPointerDown:y,onPointerUp:w};return o&&c&&(_.onMouseEnter=C,e.stacked||(_.onMouseLeave=v)),f&&(_.onClick=E=>{u&&u(E),l.canCloseOnClick&&d(!0)}),{playToast:v,pauseToast:C,isRunning:t,preventExitTransition:s,toastRef:i,eventHandlers:_}}var rse=typeof window<"u"?h.useLayoutEffect:h.useEffect,Aw=({theme:e,type:t,isLoading:a,...s})=>pt.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${t})`,...s});function ise(e){return pt.createElement(Aw,{...e},pt.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function lse(e){return pt.createElement(Aw,{...e},pt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function ose(e){return pt.createElement(Aw,{...e},pt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function cse(e){return pt.createElement(Aw,{...e},pt.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function dse(){return pt.createElement("div",{className:"Toastify__spinner"})}var uE={info:lse,warning:ise,success:ose,error:cse,spinner:dse},use=e=>e in uE;function mse({theme:e,type:t,isLoading:a,icon:s}){let r=null,i={theme:e,type:t};return s===!1||(No(s)?r=s({...i,isLoading:a}):h.isValidElement(s)?r=h.cloneElement(s,i):a?r=uE.spinner():use(t)&&(r=uE[t](i))),r}var fse=e=>{let{isRunning:t,preventExitTransition:a,toastRef:s,eventHandlers:r,playToast:i}=sse(e),{closeButton:l,children:o,autoClose:c,onClick:d,type:u,hideProgressBar:f,closeToast:p,transition:x,position:y,className:w,style:v,progressClassName:C,updateId:N,role:S,progress:T,rtl:k,toastId:_,deleteToast:E,isIn:A,isLoading:I,closeOnClick:z,theme:F,ariaLabel:D}=e,M=Tt("Toastify__toast",`Toastify__toast-theme--${F}`,`Toastify__toast--${u}`,{"Toastify__toast--rtl":k},{"Toastify__toast--close-on-click":z}),W=No(w)?w({rtl:k,position:y,type:u,defaultClassName:M}):Tt(M,w),Z=mse(e),R=!!T||!c,Q={closeToast:p,type:u,theme:F},Y=null;return l===!1||(No(l)?Y=l(Q):h.isValidElement(l)?Y=h.cloneElement(l,Q):Y=Bae(Q)),pt.createElement(x,{isIn:A,done:E,position:y,preventExitTransition:a,nodeRef:s,playToast:i},pt.createElement("div",{id:_,tabIndex:0,onClick:d,"data-in":A,className:W,...r,style:v,ref:s,...A&&{role:S,"aria-label":D}},Z!=null&&pt.createElement("div",{className:Tt("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!I})},Z),oH(o,e,!t),Y,!e.customProgressBar&&pt.createElement(Hae,{...N&&!R?{key:`p-${N}`}:{},rtl:k,theme:F,delay:c,isRunning:t,isIn:A,closeToast:p,hide:f,type:u,className:C,controlledProgress:R,progress:T||0})))},hse=(e,t=!1)=>({enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}),gse=Uae(hse("bounce",!0)),pse={position:"top-right",transition:gse,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&e.code==="KeyT"};function xse(e){let t={...pse,...e},a=e.stacked,[s,r]=h.useState(!0),i=h.useRef(null),{getToastToRender:l,isToastActive:o,count:c}=ase(t),{className:d,style:u,rtl:f,containerId:p,hotKeys:x}=t;function y(v){let C=Tt("Toastify__toast-container",`Toastify__toast-container--${v}`,{"Toastify__toast-container--rtl":f});return No(d)?d({position:v,rtl:f,defaultClassName:C}):Tt(C,oE(d))}function w(){a&&(r(!0),q.play())}return rse(()=>{var v;if(a){let C=i.current.querySelectorAll('[data-in="true"]'),N=12,S=(v=t.position)==null?void 0:v.includes("top"),T=0,k=0;Array.from(C).reverse().forEach((_,E)=>{let A=_;A.classList.add("Toastify__toast--stacked"),E>0&&(A.dataset.collapsed=`${s}`),A.dataset.pos||(A.dataset.pos=S?"top":"bot");let I=T*(s?.2:1)+(s?0:N*E);A.style.setProperty("--y",`${S?I:I*-1}px`),A.style.setProperty("--g",`${N}`),A.style.setProperty("--s",`${1-(s?k:0)}`),T+=A.offsetHeight,k+=.025})}},[s,c,a]),h.useEffect(()=>{function v(C){var N;let S=i.current;x(C)&&((N=S.querySelector('[tabIndex="0"]'))==null||N.focus(),r(!1),q.pause()),C.key==="Escape"&&(document.activeElement===S||S!=null&&S.contains(document.activeElement))&&(r(!0),q.play())}return document.addEventListener("keydown",v),()=>{document.removeEventListener("keydown",v)}},[x]),pt.createElement("section",{ref:i,className:"Toastify",id:p,onMouseEnter:()=>{a&&(r(!1),q.pause())},onMouseLeave:w,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},l((v,C)=>{let N=C.length?{...u}:{...u,pointerEvents:"none"};return pt.createElement("div",{tabIndex:-1,className:y(v),"data-stacked":a,style:N,key:`c-${v}`},C.map(({content:S,props:T})=>pt.createElement(fse,{...T,stacked:a,collapseAll:w,isIn:o(T.toastId,T.containerId),key:`t-${T.key}`},S)))}))}function hH(e,t){return function(){return e.apply(t,arguments)}}const{toString:yse}=Object.prototype,{getPrototypeOf:Mk}=Object,{iterator:Ew,toStringTag:gH}=Symbol,Tw=(e=>t=>{const a=yse.call(t);return e[a]||(e[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),Gi=e=>(e=e.toLowerCase(),t=>Tw(t)===e),kw=e=>t=>typeof t===e,{isArray:If}=Array,mf=kw("undefined");function qp(e){return e!==null&&!mf(e)&&e.constructor!==null&&!mf(e.constructor)&&ar(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const pH=Gi("ArrayBuffer");function bse(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&pH(e.buffer),t}const vse=kw("string"),ar=kw("function"),xH=kw("number"),Yp=e=>e!==null&&typeof e=="object",wse=e=>e===!0||e===!1,kb=e=>{if(Tw(e)!=="object")return!1;const t=Mk(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(gH in e)&&!(Ew in e)},Nse=e=>{if(!Yp(e)||qp(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},jse=Gi("Date"),Cse=Gi("File"),Sse=Gi("Blob"),_se=Gi("FileList"),Ase=e=>Yp(e)&&ar(e.pipe),Ese=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||ar(e.append)&&((t=Tw(e))==="formdata"||t==="object"&&ar(e.toString)&&e.toString()==="[object FormData]"))},Tse=Gi("URLSearchParams"),[kse,Lse,Pse,Dse]=["ReadableStream","Request","Response","Headers"].map(Gi),Ose=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Qp(e,t,{allOwnKeys:a=!1}={}){if(e===null||typeof e>"u")return;let s,r;if(typeof e!="object"&&(e=[e]),If(e))for(s=0,r=e.length;s<r;s++)t.call(null,e[s],s,e);else{if(qp(e))return;const i=a?Object.getOwnPropertyNames(e):Object.keys(e),l=i.length;let o;for(s=0;s<l;s++)o=i[s],t.call(null,e[o],o,e)}}function yH(e,t){if(qp(e))return null;t=t.toLowerCase();const a=Object.keys(e);let s=a.length,r;for(;s-- >0;)if(r=a[s],t===r.toLowerCase())return r;return null}const Vd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,bH=e=>!mf(e)&&e!==Vd;function mE(){const{caseless:e,skipUndefined:t}=bH(this)&&this||{},a={},s=(r,i)=>{const l=e&&yH(a,i)||i;kb(a[l])&&kb(r)?a[l]=mE(a[l],r):kb(r)?a[l]=mE({},r):If(r)?a[l]=r.slice():(!t||!mf(r))&&(a[l]=r)};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Qp(arguments[r],s);return a}const Mse=(e,t,a,{allOwnKeys:s}={})=>(Qp(t,(r,i)=>{a&&ar(r)?e[i]=hH(r,a):e[i]=r},{allOwnKeys:s}),e),Ise=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),$se=(e,t,a,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),a&&Object.assign(e.prototype,a)},Rse=(e,t,a,s)=>{let r,i,l;const o={};if(t=t||{},e==null)return t;do{for(r=Object.getOwnPropertyNames(e),i=r.length;i-- >0;)l=r[i],(!s||s(l,e,t))&&!o[l]&&(t[l]=e[l],o[l]=!0);e=a!==!1&&Mk(e)}while(e&&(!a||a(e,t))&&e!==Object.prototype);return t},zse=(e,t,a)=>{e=String(e),(a===void 0||a>e.length)&&(a=e.length),a-=t.length;const s=e.indexOf(t,a);return s!==-1&&s===a},Fse=e=>{if(!e)return null;if(If(e))return e;let t=e.length;if(!xH(t))return null;const a=new Array(t);for(;t-- >0;)a[t]=e[t];return a},Use=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Mk(Uint8Array)),Bse=(e,t)=>{const s=(e&&e[Ew]).call(e);let r;for(;(r=s.next())&&!r.done;){const i=r.value;t.call(e,i[0],i[1])}},Hse=(e,t)=>{let a;const s=[];for(;(a=e.exec(t))!==null;)s.push(a);return s},Gse=Gi("HTMLFormElement"),Wse=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,s,r){return s.toUpperCase()+r}),WM=(({hasOwnProperty:e})=>(t,a)=>e.call(t,a))(Object.prototype),Vse=Gi("RegExp"),vH=(e,t)=>{const a=Object.getOwnPropertyDescriptors(e),s={};Qp(a,(r,i)=>{let l;(l=t(r,i,e))!==!1&&(s[i]=l||r)}),Object.defineProperties(e,s)},qse=e=>{vH(e,(t,a)=>{if(ar(e)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const s=e[a];if(ar(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},Yse=(e,t)=>{const a={},s=r=>{r.forEach(i=>{a[i]=!0})};return If(e)?s(e):s(String(e).split(t)),a},Qse=()=>{},Kse=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Xse(e){return!!(e&&ar(e.append)&&e[gH]==="FormData"&&e[Ew])}const Zse=e=>{const t=new Array(10),a=(s,r)=>{if(Yp(s)){if(t.indexOf(s)>=0)return;if(qp(s))return s;if(!("toJSON"in s)){t[r]=s;const i=If(s)?[]:{};return Qp(s,(l,o)=>{const c=a(l,r+1);!mf(c)&&(i[o]=c)}),t[r]=void 0,i}}return s};return a(e,0)},Jse=Gi("AsyncFunction"),ere=e=>e&&(Yp(e)||ar(e))&&ar(e.then)&&ar(e.catch),wH=((e,t)=>e?setImmediate:t?((a,s)=>(Vd.addEventListener("message",({source:r,data:i})=>{r===Vd&&i===a&&s.length&&s.shift()()},!1),r=>{s.push(r),Vd.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",ar(Vd.postMessage)),tre=typeof queueMicrotask<"u"?queueMicrotask.bind(Vd):typeof process<"u"&&process.nextTick||wH,nre=e=>e!=null&&ar(e[Ew]),lt={isArray:If,isArrayBuffer:pH,isBuffer:qp,isFormData:Ese,isArrayBufferView:bse,isString:vse,isNumber:xH,isBoolean:wse,isObject:Yp,isPlainObject:kb,isEmptyObject:Nse,isReadableStream:kse,isRequest:Lse,isResponse:Pse,isHeaders:Dse,isUndefined:mf,isDate:jse,isFile:Cse,isBlob:Sse,isRegExp:Vse,isFunction:ar,isStream:Ase,isURLSearchParams:Tse,isTypedArray:Use,isFileList:_se,forEach:Qp,merge:mE,extend:Mse,trim:Ose,stripBOM:Ise,inherits:$se,toFlatObject:Rse,kindOf:Tw,kindOfTest:Gi,endsWith:zse,toArray:Fse,forEachEntry:Bse,matchAll:Hse,isHTMLForm:Gse,hasOwnProperty:WM,hasOwnProp:WM,reduceDescriptors:vH,freezeMethods:qse,toObjectSet:Yse,toCamelCase:Wse,noop:Qse,toFiniteNumber:Kse,findKey:yH,global:Vd,isContextDefined:bH,isSpecCompliantForm:Xse,toJSONObject:Zse,isAsyncFn:Jse,isThenable:ere,setImmediate:wH,asap:tre,isIterable:nre};function Zt(e,t,a,s,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),a&&(this.config=a),s&&(this.request=s),r&&(this.response=r,this.status=r.status?r.status:null)}lt.inherits(Zt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:lt.toJSONObject(this.config),code:this.code,status:this.status}}});const NH=Zt.prototype,jH={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{jH[e]={value:e}});Object.defineProperties(Zt,jH);Object.defineProperty(NH,"isAxiosError",{value:!0});Zt.from=(e,t,a,s,r,i)=>{const l=Object.create(NH);lt.toFlatObject(e,l,function(u){return u!==Error.prototype},d=>d!=="isAxiosError");const o=e&&e.message?e.message:"Error",c=t==null&&e?e.code:t;return Zt.call(l,o,c,a,s,r),e&&l.cause==null&&Object.defineProperty(l,"cause",{value:e,configurable:!0}),l.name=e&&e.name||"Error",i&&Object.assign(l,i),l};const are=null;function fE(e){return lt.isPlainObject(e)||lt.isArray(e)}function CH(e){return lt.endsWith(e,"[]")?e.slice(0,-2):e}function VM(e,t,a){return e?e.concat(t).map(function(r,i){return r=CH(r),!a&&i?"["+r+"]":r}).join(a?".":""):t}function sre(e){return lt.isArray(e)&&!e.some(fE)}const rre=lt.toFlatObject(lt,{},null,function(t){return/^is[A-Z]/.test(t)});function Lw(e,t,a){if(!lt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,a=lt.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,v){return!lt.isUndefined(v[w])});const s=a.metaTokens,r=a.visitor||u,i=a.dots,l=a.indexes,c=(a.Blob||typeof Blob<"u"&&Blob)&&lt.isSpecCompliantForm(t);if(!lt.isFunction(r))throw new TypeError("visitor must be a function");function d(y){if(y===null)return"";if(lt.isDate(y))return y.toISOString();if(lt.isBoolean(y))return y.toString();if(!c&&lt.isBlob(y))throw new Zt("Blob is not supported. Use a Buffer instead.");return lt.isArrayBuffer(y)||lt.isTypedArray(y)?c&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function u(y,w,v){let C=y;if(y&&!v&&typeof y=="object"){if(lt.endsWith(w,"{}"))w=s?w:w.slice(0,-2),y=JSON.stringify(y);else if(lt.isArray(y)&&sre(y)||(lt.isFileList(y)||lt.endsWith(w,"[]"))&&(C=lt.toArray(y)))return w=CH(w),C.forEach(function(S,T){!(lt.isUndefined(S)||S===null)&&t.append(l===!0?VM([w],T,i):l===null?w:w+"[]",d(S))}),!1}return fE(y)?!0:(t.append(VM(v,w,i),d(y)),!1)}const f=[],p=Object.assign(rre,{defaultVisitor:u,convertValue:d,isVisitable:fE});function x(y,w){if(!lt.isUndefined(y)){if(f.indexOf(y)!==-1)throw Error("Circular reference detected in "+w.join("."));f.push(y),lt.forEach(y,function(C,N){(!(lt.isUndefined(C)||C===null)&&r.call(t,C,lt.isString(N)?N.trim():N,w,p))===!0&&x(C,w?w.concat(N):[N])}),f.pop()}}if(!lt.isObject(e))throw new TypeError("data must be an object");return x(e),t}function qM(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function Ik(e,t){this._pairs=[],e&&Lw(e,this,t)}const SH=Ik.prototype;SH.append=function(t,a){this._pairs.push([t,a])};SH.toString=function(t){const a=t?function(s){return t.call(this,s,qM)}:qM;return this._pairs.map(function(r){return a(r[0])+"="+a(r[1])},"").join("&")};function ire(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function _H(e,t,a){if(!t)return e;const s=a&&a.encode||ire;lt.isFunction(a)&&(a={serialize:a});const r=a&&a.serialize;let i;if(r?i=r(t,a):i=lt.isURLSearchParams(t)?t.toString():new Ik(t,a).toString(s),i){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class YM{constructor(){this.handlers=[]}use(t,a,s){return this.handlers.push({fulfilled:t,rejected:a,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){lt.forEach(this.handlers,function(s){s!==null&&t(s)})}}const AH={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},lre=typeof URLSearchParams<"u"?URLSearchParams:Ik,ore=typeof FormData<"u"?FormData:null,cre=typeof Blob<"u"?Blob:null,dre={isBrowser:!0,classes:{URLSearchParams:lre,FormData:ore,Blob:cre},protocols:["http","https","file","blob","url","data"]},$k=typeof window<"u"&&typeof document<"u",hE=typeof navigator=="object"&&navigator||void 0,ure=$k&&(!hE||["ReactNative","NativeScript","NS"].indexOf(hE.product)<0),mre=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",fre=$k&&window.location.href||"http://localhost",hre=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:$k,hasStandardBrowserEnv:ure,hasStandardBrowserWebWorkerEnv:mre,navigator:hE,origin:fre},Symbol.toStringTag,{value:"Module"})),As={...hre,...dre};function gre(e,t){return Lw(e,new As.classes.URLSearchParams,{visitor:function(a,s,r,i){return As.isNode&&lt.isBuffer(a)?(this.append(s,a.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function pre(e){return lt.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function xre(e){const t={},a=Object.keys(e);let s;const r=a.length;let i;for(s=0;s<r;s++)i=a[s],t[i]=e[i];return t}function EH(e){function t(a,s,r,i){let l=a[i++];if(l==="__proto__")return!0;const o=Number.isFinite(+l),c=i>=a.length;return l=!l&&lt.isArray(r)?r.length:l,c?(lt.hasOwnProp(r,l)?r[l]=[r[l],s]:r[l]=s,!o):((!r[l]||!lt.isObject(r[l]))&&(r[l]=[]),t(a,s,r[l],i)&&lt.isArray(r[l])&&(r[l]=xre(r[l])),!o)}if(lt.isFormData(e)&&lt.isFunction(e.entries)){const a={};return lt.forEachEntry(e,(s,r)=>{t(pre(s),r,a,0)}),a}return null}function yre(e,t,a){if(lt.isString(e))try{return(t||JSON.parse)(e),lt.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(a||JSON.stringify)(e)}const Kp={transitional:AH,adapter:["xhr","http","fetch"],transformRequest:[function(t,a){const s=a.getContentType()||"",r=s.indexOf("application/json")>-1,i=lt.isObject(t);if(i&&lt.isHTMLForm(t)&&(t=new FormData(t)),lt.isFormData(t))return r?JSON.stringify(EH(t)):t;if(lt.isArrayBuffer(t)||lt.isBuffer(t)||lt.isStream(t)||lt.isFile(t)||lt.isBlob(t)||lt.isReadableStream(t))return t;if(lt.isArrayBufferView(t))return t.buffer;if(lt.isURLSearchParams(t))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return gre(t,this.formSerializer).toString();if((o=lt.isFileList(t))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Lw(o?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||r?(a.setContentType("application/json",!1),yre(t)):t}],transformResponse:[function(t){const a=this.transitional||Kp.transitional,s=a&&a.forcedJSONParsing,r=this.responseType==="json";if(lt.isResponse(t)||lt.isReadableStream(t))return t;if(t&&lt.isString(t)&&(s&&!this.responseType||r)){const l=!(a&&a.silentJSONParsing)&&r;try{return JSON.parse(t,this.parseReviver)}catch(o){if(l)throw o.name==="SyntaxError"?Zt.from(o,Zt.ERR_BAD_RESPONSE,this,null,this.response):o}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:As.classes.FormData,Blob:As.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};lt.forEach(["delete","get","head","post","put","patch"],e=>{Kp.headers[e]={}});const bre=lt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),vre=e=>{const t={};let a,s,r;return e&&e.split(`
`).forEach(function(l){r=l.indexOf(":"),a=l.substring(0,r).trim().toLowerCase(),s=l.substring(r+1).trim(),!(!a||t[a]&&bre[a])&&(a==="set-cookie"?t[a]?t[a].push(s):t[a]=[s]:t[a]=t[a]?t[a]+", "+s:s)}),t},QM=Symbol("internals");function Xh(e){return e&&String(e).trim().toLowerCase()}function Lb(e){return e===!1||e==null?e:lt.isArray(e)?e.map(Lb):String(e)}function wre(e){const t=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=a.exec(e);)t[s[1]]=s[2];return t}const Nre=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function gS(e,t,a,s,r){if(lt.isFunction(s))return s.call(this,t,a);if(r&&(t=a),!!lt.isString(t)){if(lt.isString(s))return t.indexOf(s)!==-1;if(lt.isRegExp(s))return s.test(t)}}function jre(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,a,s)=>a.toUpperCase()+s)}function Cre(e,t){const a=lt.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+a,{value:function(r,i,l){return this[s].call(this,t,r,i,l)},configurable:!0})})}let sr=class{constructor(t){t&&this.set(t)}set(t,a,s){const r=this;function i(o,c,d){const u=Xh(c);if(!u)throw new Error("header name must be a non-empty string");const f=lt.findKey(r,u);(!f||r[f]===void 0||d===!0||d===void 0&&r[f]!==!1)&&(r[f||c]=Lb(o))}const l=(o,c)=>lt.forEach(o,(d,u)=>i(d,u,c));if(lt.isPlainObject(t)||t instanceof this.constructor)l(t,a);else if(lt.isString(t)&&(t=t.trim())&&!Nre(t))l(vre(t),a);else if(lt.isObject(t)&&lt.isIterable(t)){let o={},c,d;for(const u of t){if(!lt.isArray(u))throw TypeError("Object iterator must return a key-value pair");o[d=u[0]]=(c=o[d])?lt.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}l(o,a)}else t!=null&&i(a,t,s);return this}get(t,a){if(t=Xh(t),t){const s=lt.findKey(this,t);if(s){const r=this[s];if(!a)return r;if(a===!0)return wre(r);if(lt.isFunction(a))return a.call(this,r,s);if(lt.isRegExp(a))return a.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,a){if(t=Xh(t),t){const s=lt.findKey(this,t);return!!(s&&this[s]!==void 0&&(!a||gS(this,this[s],s,a)))}return!1}delete(t,a){const s=this;let r=!1;function i(l){if(l=Xh(l),l){const o=lt.findKey(s,l);o&&(!a||gS(s,s[o],o,a))&&(delete s[o],r=!0)}}return lt.isArray(t)?t.forEach(i):i(t),r}clear(t){const a=Object.keys(this);let s=a.length,r=!1;for(;s--;){const i=a[s];(!t||gS(this,this[i],i,t,!0))&&(delete this[i],r=!0)}return r}normalize(t){const a=this,s={};return lt.forEach(this,(r,i)=>{const l=lt.findKey(s,i);if(l){a[l]=Lb(r),delete a[i];return}const o=t?jre(i):String(i).trim();o!==i&&delete a[i],a[o]=Lb(r),s[o]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const a=Object.create(null);return lt.forEach(this,(s,r)=>{s!=null&&s!==!1&&(a[r]=t&&lt.isArray(s)?s.join(", "):s)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,a])=>t+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...a){const s=new this(t);return a.forEach(r=>s.set(r)),s}static accessor(t){const s=(this[QM]=this[QM]={accessors:{}}).accessors,r=this.prototype;function i(l){const o=Xh(l);s[o]||(Cre(r,l),s[o]=!0)}return lt.isArray(t)?t.forEach(i):i(t),this}};sr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);lt.reduceDescriptors(sr.prototype,({value:e},t)=>{let a=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[a]=s}}});lt.freezeMethods(sr);function pS(e,t){const a=this||Kp,s=t||a,r=sr.from(s.headers);let i=s.data;return lt.forEach(e,function(o){i=o.call(a,i,r.normalize(),t?t.status:void 0)}),r.normalize(),i}function TH(e){return!!(e&&e.__CANCEL__)}function $f(e,t,a){Zt.call(this,e??"canceled",Zt.ERR_CANCELED,t,a),this.name="CanceledError"}lt.inherits($f,Zt,{__CANCEL__:!0});function kH(e,t,a){const s=a.config.validateStatus;!a.status||!s||s(a.status)?e(a):t(new Zt("Request failed with status code "+a.status,[Zt.ERR_BAD_REQUEST,Zt.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function Sre(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function _re(e,t){e=e||10;const a=new Array(e),s=new Array(e);let r=0,i=0,l;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=s[i];l||(l=d),a[r]=c,s[r]=d;let f=i,p=0;for(;f!==r;)p+=a[f++],f=f%e;if(r=(r+1)%e,r===i&&(i=(i+1)%e),d-l<t)return;const x=u&&d-u;return x?Math.round(p*1e3/x):void 0}}function Are(e,t){let a=0,s=1e3/t,r,i;const l=(d,u=Date.now())=>{a=u,r=null,i&&(clearTimeout(i),i=null),e(...d)};return[(...d)=>{const u=Date.now(),f=u-a;f>=s?l(d,u):(r=d,i||(i=setTimeout(()=>{i=null,l(r)},s-f)))},()=>r&&l(r)]}const Kb=(e,t,a=3)=>{let s=0;const r=_re(50,250);return Are(i=>{const l=i.loaded,o=i.lengthComputable?i.total:void 0,c=l-s,d=r(c),u=l<=o;s=l;const f={loaded:l,total:o,progress:o?l/o:void 0,bytes:c,rate:d||void 0,estimated:d&&o&&u?(o-l)/d:void 0,event:i,lengthComputable:o!=null,[t?"download":"upload"]:!0};e(f)},a)},KM=(e,t)=>{const a=e!=null;return[s=>t[0]({lengthComputable:a,total:e,loaded:s}),t[1]]},XM=e=>(...t)=>lt.asap(()=>e(...t)),Ere=As.hasStandardBrowserEnv?((e,t)=>a=>(a=new URL(a,As.origin),e.protocol===a.protocol&&e.host===a.host&&(t||e.port===a.port)))(new URL(As.origin),As.navigator&&/(msie|trident)/i.test(As.navigator.userAgent)):()=>!0,Tre=As.hasStandardBrowserEnv?{write(e,t,a,s,r,i){const l=[e+"="+encodeURIComponent(t)];lt.isNumber(a)&&l.push("expires="+new Date(a).toGMTString()),lt.isString(s)&&l.push("path="+s),lt.isString(r)&&l.push("domain="+r),i===!0&&l.push("secure"),document.cookie=l.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function kre(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Lre(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function LH(e,t,a){let s=!kre(t);return e&&(s||a==!1)?Lre(e,t):t}const ZM=e=>e instanceof sr?{...e}:e;function fu(e,t){t=t||{};const a={};function s(d,u,f,p){return lt.isPlainObject(d)&&lt.isPlainObject(u)?lt.merge.call({caseless:p},d,u):lt.isPlainObject(u)?lt.merge({},u):lt.isArray(u)?u.slice():u}function r(d,u,f,p){if(lt.isUndefined(u)){if(!lt.isUndefined(d))return s(void 0,d,f,p)}else return s(d,u,f,p)}function i(d,u){if(!lt.isUndefined(u))return s(void 0,u)}function l(d,u){if(lt.isUndefined(u)){if(!lt.isUndefined(d))return s(void 0,d)}else return s(void 0,u)}function o(d,u,f){if(f in t)return s(d,u);if(f in e)return s(void 0,d)}const c={url:i,method:i,data:i,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:o,headers:(d,u,f)=>r(ZM(d),ZM(u),f,!0)};return lt.forEach(Object.keys({...e,...t}),function(u){const f=c[u]||r,p=f(e[u],t[u],u);lt.isUndefined(p)&&f!==o||(a[u]=p)}),a}const PH=e=>{const t=fu({},e);let{data:a,withXSRFToken:s,xsrfHeaderName:r,xsrfCookieName:i,headers:l,auth:o}=t;if(t.headers=l=sr.from(l),t.url=_H(LH(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&l.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),lt.isFormData(a)){if(As.hasStandardBrowserEnv||As.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(lt.isFunction(a.getHeaders)){const c=a.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([u,f])=>{d.includes(u.toLowerCase())&&l.set(u,f)})}}if(As.hasStandardBrowserEnv&&(s&&lt.isFunction(s)&&(s=s(t)),s||s!==!1&&Ere(t.url))){const c=r&&i&&Tre.read(i);c&&l.set(r,c)}return t},Pre=typeof XMLHttpRequest<"u",Dre=Pre&&function(e){return new Promise(function(a,s){const r=PH(e);let i=r.data;const l=sr.from(r.headers).normalize();let{responseType:o,onUploadProgress:c,onDownloadProgress:d}=r,u,f,p,x,y;function w(){x&&x(),y&&y(),r.cancelToken&&r.cancelToken.unsubscribe(u),r.signal&&r.signal.removeEventListener("abort",u)}let v=new XMLHttpRequest;v.open(r.method.toUpperCase(),r.url,!0),v.timeout=r.timeout;function C(){if(!v)return;const S=sr.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),k={data:!o||o==="text"||o==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:S,config:e,request:v};kH(function(E){a(E),w()},function(E){s(E),w()},k),v=null}"onloadend"in v?v.onloadend=C:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(C)},v.onabort=function(){v&&(s(new Zt("Request aborted",Zt.ECONNABORTED,e,v)),v=null)},v.onerror=function(T){const k=T&&T.message?T.message:"Network Error",_=new Zt(k,Zt.ERR_NETWORK,e,v);_.event=T||null,s(_),v=null},v.ontimeout=function(){let T=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const k=r.transitional||AH;r.timeoutErrorMessage&&(T=r.timeoutErrorMessage),s(new Zt(T,k.clarifyTimeoutError?Zt.ETIMEDOUT:Zt.ECONNABORTED,e,v)),v=null},i===void 0&&l.setContentType(null),"setRequestHeader"in v&&lt.forEach(l.toJSON(),function(T,k){v.setRequestHeader(k,T)}),lt.isUndefined(r.withCredentials)||(v.withCredentials=!!r.withCredentials),o&&o!=="json"&&(v.responseType=r.responseType),d&&([p,y]=Kb(d,!0),v.addEventListener("progress",p)),c&&v.upload&&([f,x]=Kb(c),v.upload.addEventListener("progress",f),v.upload.addEventListener("loadend",x)),(r.cancelToken||r.signal)&&(u=S=>{v&&(s(!S||S.type?new $f(null,e,v):S),v.abort(),v=null)},r.cancelToken&&r.cancelToken.subscribe(u),r.signal&&(r.signal.aborted?u():r.signal.addEventListener("abort",u)));const N=Sre(r.url);if(N&&As.protocols.indexOf(N)===-1){s(new Zt("Unsupported protocol "+N+":",Zt.ERR_BAD_REQUEST,e));return}v.send(i||null)})},Ore=(e,t)=>{const{length:a}=e=e?e.filter(Boolean):[];if(t||a){let s=new AbortController,r;const i=function(d){if(!r){r=!0,o();const u=d instanceof Error?d:this.reason;s.abort(u instanceof Zt?u:new $f(u instanceof Error?u.message:u))}};let l=t&&setTimeout(()=>{l=null,i(new Zt(`timeout ${t} of ms exceeded`,Zt.ETIMEDOUT))},t);const o=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),e=null)};e.forEach(d=>d.addEventListener("abort",i));const{signal:c}=s;return c.unsubscribe=()=>lt.asap(o),c}},Mre=function*(e,t){let a=e.byteLength;if(a<t){yield e;return}let s=0,r;for(;s<a;)r=s+t,yield e.slice(s,r),s=r},Ire=async function*(e,t){for await(const a of $re(e))yield*Mre(a,t)},$re=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:a,value:s}=await t.read();if(a)break;yield s}}finally{await t.cancel()}},JM=(e,t,a,s)=>{const r=Ire(e,t);let i=0,l,o=c=>{l||(l=!0,s&&s(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await r.next();if(d){o(),c.close();return}let f=u.byteLength;if(a){let p=i+=f;a(p)}c.enqueue(new Uint8Array(u))}catch(d){throw o(d),d}},cancel(c){return o(c),r.return()}},{highWaterMark:2})},eI=64*1024,{isFunction:by}=lt,Rre=(({Request:e,Response:t})=>({Request:e,Response:t}))(lt.global),{ReadableStream:tI,TextEncoder:nI}=lt.global,aI=(e,...t)=>{try{return!!e(...t)}catch{return!1}},zre=e=>{e=lt.merge.call({skipUndefined:!0},Rre,e);const{fetch:t,Request:a,Response:s}=e,r=t?by(t):typeof fetch=="function",i=by(a),l=by(s);if(!r)return!1;const o=r&&by(tI),c=r&&(typeof nI=="function"?(y=>w=>y.encode(w))(new nI):async y=>new Uint8Array(await new a(y).arrayBuffer())),d=i&&o&&aI(()=>{let y=!1;const w=new a(As.origin,{body:new tI,method:"POST",get duplex(){return y=!0,"half"}}).headers.has("Content-Type");return y&&!w}),u=l&&o&&aI(()=>lt.isReadableStream(new s("").body)),f={stream:u&&(y=>y.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(y=>{!f[y]&&(f[y]=(w,v)=>{let C=w&&w[y];if(C)return C.call(w);throw new Zt(`Response type '${y}' is not supported`,Zt.ERR_NOT_SUPPORT,v)})});const p=async y=>{if(y==null)return 0;if(lt.isBlob(y))return y.size;if(lt.isSpecCompliantForm(y))return(await new a(As.origin,{method:"POST",body:y}).arrayBuffer()).byteLength;if(lt.isArrayBufferView(y)||lt.isArrayBuffer(y))return y.byteLength;if(lt.isURLSearchParams(y)&&(y=y+""),lt.isString(y))return(await c(y)).byteLength},x=async(y,w)=>{const v=lt.toFiniteNumber(y.getContentLength());return v??p(w)};return async y=>{let{url:w,method:v,data:C,signal:N,cancelToken:S,timeout:T,onDownloadProgress:k,onUploadProgress:_,responseType:E,headers:A,withCredentials:I="same-origin",fetchOptions:z}=PH(y),F=t||fetch;E=E?(E+"").toLowerCase():"text";let D=Ore([N,S&&S.toAbortSignal()],T),M=null;const W=D&&D.unsubscribe&&(()=>{D.unsubscribe()});let Z;try{if(_&&d&&v!=="get"&&v!=="head"&&(Z=await x(A,C))!==0){let ee=new a(w,{method:"POST",body:C,duplex:"half"}),H;if(lt.isFormData(C)&&(H=ee.headers.get("content-type"))&&A.setContentType(H),ee.body){const[ye,te]=KM(Z,Kb(XM(_)));C=JM(ee.body,eI,ye,te)}}lt.isString(I)||(I=I?"include":"omit");const R=i&&"credentials"in a.prototype,Q={...z,signal:D,method:v.toUpperCase(),headers:A.normalize().toJSON(),body:C,duplex:"half",credentials:R?I:void 0};M=i&&new a(w,Q);let Y=await(i?F(M,z):F(w,Q));const oe=u&&(E==="stream"||E==="response");if(u&&(k||oe&&W)){const ee={};["status","statusText","headers"].forEach(ve=>{ee[ve]=Y[ve]});const H=lt.toFiniteNumber(Y.headers.get("content-length")),[ye,te]=k&&KM(H,Kb(XM(k),!0))||[];Y=new s(JM(Y.body,eI,ye,()=>{te&&te(),W&&W()}),ee)}E=E||"text";let re=await f[lt.findKey(f,E)||"text"](Y,y);return!oe&&W&&W(),await new Promise((ee,H)=>{kH(ee,H,{data:re,headers:sr.from(Y.headers),status:Y.status,statusText:Y.statusText,config:y,request:M})})}catch(R){throw W&&W(),R&&R.name==="TypeError"&&/Load failed|fetch/i.test(R.message)?Object.assign(new Zt("Network Error",Zt.ERR_NETWORK,y,M),{cause:R.cause||R}):Zt.from(R,R&&R.code,y,M)}}},Fre=new Map,DH=e=>{let t=e?e.env:{};const{fetch:a,Request:s,Response:r}=t,i=[s,r,a];let l=i.length,o=l,c,d,u=Fre;for(;o--;)c=i[o],d=u.get(c),d===void 0&&u.set(c,d=o?new Map:zre(t)),u=d;return d};DH();const gE={http:are,xhr:Dre,fetch:{get:DH}};lt.forEach(gE,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const sI=e=>`- ${e}`,Ure=e=>lt.isFunction(e)||e===null||e===!1,OH={getAdapter:(e,t)=>{e=lt.isArray(e)?e:[e];const{length:a}=e;let s,r;const i={};for(let l=0;l<a;l++){s=e[l];let o;if(r=s,!Ure(s)&&(r=gE[(o=String(s)).toLowerCase()],r===void 0))throw new Zt(`Unknown adapter '${o}'`);if(r&&(lt.isFunction(r)||(r=r.get(t))))break;i[o||"#"+l]=r}if(!r){const l=Object.entries(i).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let o=a?l.length>1?`since :
`+l.map(sI).join(`
`):" "+sI(l[0]):"as no adapter specified";throw new Zt("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:gE};function xS(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new $f(null,e)}function rI(e){return xS(e),e.headers=sr.from(e.headers),e.data=pS.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),OH.getAdapter(e.adapter||Kp.adapter,e)(e).then(function(s){return xS(e),s.data=pS.call(e,e.transformResponse,s),s.headers=sr.from(s.headers),s},function(s){return TH(s)||(xS(e),s&&s.response&&(s.response.data=pS.call(e,e.transformResponse,s.response),s.response.headers=sr.from(s.response.headers))),Promise.reject(s)})}const MH="1.12.2",Pw={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Pw[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const iI={};Pw.transitional=function(t,a,s){function r(i,l){return"[Axios v"+MH+"] Transitional option '"+i+"'"+l+(s?". "+s:"")}return(i,l,o)=>{if(t===!1)throw new Zt(r(l," has been removed"+(a?" in "+a:"")),Zt.ERR_DEPRECATED);return a&&!iI[l]&&(iI[l]=!0,console.warn(r(l," has been deprecated since v"+a+" and will be removed in the near future"))),t?t(i,l,o):!0}};Pw.spelling=function(t){return(a,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function Bre(e,t,a){if(typeof e!="object")throw new Zt("options must be an object",Zt.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let r=s.length;for(;r-- >0;){const i=s[r],l=t[i];if(l){const o=e[i],c=o===void 0||l(o,i,e);if(c!==!0)throw new Zt("option "+i+" must be "+c,Zt.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new Zt("Unknown option "+i,Zt.ERR_BAD_OPTION)}}const Pb={assertOptions:Bre,validators:Pw},Ki=Pb.validators;let tu=class{constructor(t){this.defaults=t||{},this.interceptors={request:new YM,response:new YM}}async request(t,a){try{return await this._request(t,a)}catch(s){if(s instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const i=r.stack?r.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(t,a){typeof t=="string"?(a=a||{},a.url=t):a=t||{},a=fu(this.defaults,a);const{transitional:s,paramsSerializer:r,headers:i}=a;s!==void 0&&Pb.assertOptions(s,{silentJSONParsing:Ki.transitional(Ki.boolean),forcedJSONParsing:Ki.transitional(Ki.boolean),clarifyTimeoutError:Ki.transitional(Ki.boolean)},!1),r!=null&&(lt.isFunction(r)?a.paramsSerializer={serialize:r}:Pb.assertOptions(r,{encode:Ki.function,serialize:Ki.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),Pb.assertOptions(a,{baseUrl:Ki.spelling("baseURL"),withXsrfToken:Ki.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let l=i&&lt.merge(i.common,i[a.method]);i&&lt.forEach(["delete","get","head","post","put","patch","common"],y=>{delete i[y]}),a.headers=sr.concat(l,i);const o=[];let c=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(a)===!1||(c=c&&w.synchronous,o.unshift(w.fulfilled,w.rejected))});const d=[];this.interceptors.response.forEach(function(w){d.push(w.fulfilled,w.rejected)});let u,f=0,p;if(!c){const y=[rI.bind(this),void 0];for(y.unshift(...o),y.push(...d),p=y.length,u=Promise.resolve(a);f<p;)u=u.then(y[f++],y[f++]);return u}p=o.length;let x=a;for(;f<p;){const y=o[f++],w=o[f++];try{x=y(x)}catch(v){w.call(this,v);break}}try{u=rI.call(this,x)}catch(y){return Promise.reject(y)}for(f=0,p=d.length;f<p;)u=u.then(d[f++],d[f++]);return u}getUri(t){t=fu(this.defaults,t);const a=LH(t.baseURL,t.url,t.allowAbsoluteUrls);return _H(a,t.params,t.paramsSerializer)}};lt.forEach(["delete","get","head","options"],function(t){tu.prototype[t]=function(a,s){return this.request(fu(s||{},{method:t,url:a,data:(s||{}).data}))}});lt.forEach(["post","put","patch"],function(t){function a(s){return function(i,l,o){return this.request(fu(o||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:l}))}}tu.prototype[t]=a(),tu.prototype[t+"Form"]=a(!0)});let Hre=class IH{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(i){a=i});const s=this;this.promise.then(r=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](r);s._listeners=null}),this.promise.then=r=>{let i;const l=new Promise(o=>{s.subscribe(o),i=o}).then(r);return l.cancel=function(){s.unsubscribe(i)},l},t(function(i,l,o){s.reason||(s.reason=new $f(i,l,o),a(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const a=this._listeners.indexOf(t);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const t=new AbortController,a=s=>{t.abort(s)};return this.subscribe(a),t.signal.unsubscribe=()=>this.unsubscribe(a),t.signal}static source(){let t;return{token:new IH(function(r){t=r}),cancel:t}}};function Gre(e){return function(a){return e.apply(null,a)}}function Wre(e){return lt.isObject(e)&&e.isAxiosError===!0}const pE={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(pE).forEach(([e,t])=>{pE[t]=e});function $H(e){const t=new tu(e),a=hH(tu.prototype.request,t);return lt.extend(a,tu.prototype,t,{allOwnKeys:!0}),lt.extend(a,t,null,{allOwnKeys:!0}),a.create=function(r){return $H(fu(e,r))},a}const Sa=$H(Kp);Sa.Axios=tu;Sa.CanceledError=$f;Sa.CancelToken=Hre;Sa.isCancel=TH;Sa.VERSION=MH;Sa.toFormData=Lw;Sa.AxiosError=Zt;Sa.Cancel=Sa.CanceledError;Sa.all=function(t){return Promise.all(t)};Sa.spread=Gre;Sa.isAxiosError=Wre;Sa.mergeConfig=fu;Sa.AxiosHeaders=sr;Sa.formToJSON=e=>EH(lt.isHTMLForm(e)?new FormData(e):e);Sa.getAdapter=OH.getAdapter;Sa.HttpStatusCode=pE;Sa.default=Sa;const{Axios:gVe,AxiosError:pVe,CanceledError:xVe,isCancel:yVe,CancelToken:bVe,VERSION:vVe,all:wVe,Cancel:NVe,isAxiosError:jVe,spread:CVe,toFormData:SVe,AxiosHeaders:_Ve,HttpStatusCode:AVe,formToJSON:EVe,getAdapter:TVe,mergeConfig:kVe}=Sa,Vre="https://crm.sari-sari.com",ce=Sa.create({baseURL:`${Vre}/api`,withCredentials:!0,headers:{"Content-Type":"application/json"}});ce.interceptors.request.use(e=>(console.log(` [${e.method?.toUpperCase()}] ${e.url}`),e),e=>Promise.reject(e));ce.interceptors.response.use(e=>e,e=>(e.response?.status===401&&(console.warn(" Unauthorized  possible expired token or not logged in."),localStorage.clear(),window.location.href="/login"),Promise.reject(e)));const qre="isLoggedIn",vy="userRole",Bs=()=>{const[e,t]=h.useState(!!localStorage.getItem(vy)),[a,s]=h.useState(localStorage.getItem(vy)||""),r=yt();h.useEffect(()=>{const d=localStorage.getItem(vy);d?(t(!0),s(d)):l()},[]);const i=d=>{localStorage.setItem(vy,d.role),localStorage.setItem(qre,!0),t(!0),s(d.role)},l=()=>{localStorage.clear(),t(!1),s("")};return{isLoggedIn:e,logout:async()=>{try{await ce.post("/auth/logout")}catch(d){console.log("Failed to logout from server:",d)}l(),r("/")},userRole:a,setUserRole:s,login:d=>{i(d),d.role==="CEO"||d.role==="Admin"?r("/admin"):d.role==="Manager"?r("/manager/dashboard"):r("/")}}},Zh=({children:e,requiredRole:t})=>{const{isLoggedIn:a,userRole:s}=Bs();if(!a)return n.jsx(ti,{to:"/",replace:!0});if(!t)return s.toUpperCase()==="ADMIN"||s.toUpperCase()==="CEO"?n.jsx(ti,{to:"/admin/dashboard",replace:!0}):s==="GROUP MANAGER"?n.jsx(ti,{to:"/group-manager/dashboard",replace:!0}):s==="MANAGER"?n.jsx(ti,{to:"/manager/dashboard",replace:!0}):s==="SALES"?n.jsx(ti,{to:"/sales/dashboard",replace:!0}):n.jsx(ti,{to:"/",replace:!0});const r=s.toLowerCase(),i=t.toLowerCase();return r!==i?n.jsx(ti,{to:"/",replace:!0}):e};var RH={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},lI=pt.createContext&&pt.createContext(RH),Yre=["attr","size","title"];function Qre(e,t){if(e==null)return{};var a=Kre(e,t),s,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)s=i[r],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function Kre(e,t){if(e==null)return{};var a={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;a[s]=e[s]}return a}function Xb(){return Xb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Xb.apply(this,arguments)}function oI(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Zb(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?oI(Object(a),!0).forEach(function(s){Xre(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):oI(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function Xre(e,t,a){return t=Zre(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Zre(e){var t=Jre(e,"string");return typeof t=="symbol"?t:t+""}function Jre(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zH(e){return e&&e.map((t,a)=>pt.createElement(t.tag,Zb({key:a},t.attr),zH(t.child)))}function St(e){return t=>pt.createElement(eie,Xb({attr:Zb({},e.attr)},t),zH(e.child))}function eie(e){var t=a=>{var{attr:s,size:r,title:i}=e,l=Qre(e,Yre),o=r||a.size||"1em",c;return a.className&&(c=a.className),e.className&&(c=(c?c+" ":"")+e.className),pt.createElement("svg",Xb({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,s,l,{className:c,style:Zb(Zb({color:e.color||a.color},a.style),e.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),i&&pt.createElement("title",null,i),e.children)};return lI!==void 0?pt.createElement(lI.Consumer,null,a=>t(a)):t(RH)}function Ri(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(e)}function Rf(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(e)}function Ic(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"21 8 21 21 3 21 3 8"},child:[]},{tag:"rect",attr:{x:"1",y:"3",width:"22",height:"5"},child:[]},{tag:"line",attr:{x1:"10",y1:"12",x2:"14",y2:"12"},child:[]}]})(e)}function Dw(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"7",y1:"7",x2:"17",y2:"17"},child:[]},{tag:"polyline",attr:{points:"17 7 17 17 7 17"},child:[]}]})(e)}function xE(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"polyline",attr:{points:"19 12 12 19 5 12"},child:[]}]})(e)}function tie(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(e)}function Ow(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 5 19 12 12 19"},child:[]}]})(e)}function Xp(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"7",y1:"17",x2:"17",y2:"7"},child:[]},{tag:"polyline",attr:{points:"7 7 17 7 17 17"},child:[]}]})(e)}function nie(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"19",x2:"12",y2:"5"},child:[]},{tag:"polyline",attr:{points:"5 12 12 5 19 12"},child:[]}]})(e)}function yS(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"8",r:"7"},child:[]},{tag:"polyline",attr:{points:"8.21 13.89 7 23 12 20 17 23 15.79 13.88"},child:[]}]})(e)}function aie(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(e)}function Zp(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"},child:[]},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"},child:[]}]})(e)}function Mw(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"},child:[]}]})(e)}function Qt(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"},child:[]}]})(e)}function Ct(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(e)}function FH(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"13",r:"4"},child:[]}]})(e)}function ba(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(e)}function Gt(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 11 12 14 22 4"},child:[]},{tag:"path",attr:{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"},child:[]}]})(e)}function Rk(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(e)}function jt(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(e)}function sie(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"},child:[]}]})(e)}function Mt(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"},child:[]}]})(e)}function rie(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"},child:[]}]})(e)}function ws(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"},child:[]},{tag:"rect",attr:{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"},child:[]}]})(e)}function zs(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(e)}function zf(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(e)}function $o(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"7 10 12 15 17 10"},child:[]},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"},child:[]}]})(e)}function oa(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(e)}function ia(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(e)}function hu(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},child:[]},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"},child:[]}]})(e)}function gu(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(e)}function xn(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(e)}function iie(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(e)}function Jp(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(e)}function UH(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"},child:[]}]})(e)}function zk(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"3",y1:"9",x2:"21",y2:"9"},child:[]},{tag:"line",attr:{x1:"9",y1:"21",x2:"9",y2:"9"},child:[]}]})(e)}function fl(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(e)}function Zn(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(e)}function ex(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(e)}function lie(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"5 9 2 12 5 15"},child:[]},{tag:"polyline",attr:{points:"9 5 12 2 15 5"},child:[]},{tag:"polyline",attr:{points:"15 19 12 22 9 19"},child:[]},{tag:"polyline",attr:{points:"19 9 22 12 19 15"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"2",x2:"12",y2:"22"},child:[]}]})(e)}function Ls(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M15.05 5A5 5 0 0 1 19 8.95M15.05 1A9 9 0 0 1 23 8.94m-1 7.98v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(e)}function At(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(e)}function cI(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21.21 15.89A10 10 0 1 1 8 2.83"},child:[]},{tag:"path",attr:{d:"M22 12A10 10 0 0 0 12 2v10z"},child:[]}]})(e)}function dn(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(e)}function Fk(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},child:[]},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"},child:[]},{tag:"polyline",attr:{points:"7 3 7 8 15 8"},child:[]}]})(e)}function Bt(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(e)}function oie(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"2",x2:"11",y2:"13"},child:[]},{tag:"polygon",attr:{points:"22 2 15 22 11 13 2 9 22 2"},child:[]}]})(e)}function Uk(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(e)}function Iw(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"},child:[]}]})(e)}function Yc(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"5",y:"2",width:"14",height:"20",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"12",y1:"18",x2:"12.01",y2:"18"},child:[]}]})(e)}function Ro(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"},child:[]}]})(e)}function tr(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"6"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"2"},child:[]}]})(e)}function zt(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(e)}function bS(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 18 13.5 8.5 8.5 13.5 1 6"},child:[]},{tag:"polyline",attr:{points:"17 18 23 18 23 12"},child:[]}]})(e)}function nu(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(e)}function Nl(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"polyline",attr:{points:"17 11 19 13 23 9"},child:[]}]})(e)}function Wn(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"20",y1:"8",x2:"20",y2:"14"},child:[]},{tag:"line",attr:{x1:"23",y1:"11",x2:"17",y2:"11"},child:[]}]})(e)}function jl(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"18",y1:"8",x2:"23",y2:"13"},child:[]},{tag:"line",attr:{x1:"23",y1:"8",x2:"18",y2:"13"},child:[]}]})(e)}function Jt(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(e)}function On(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(e)}function Ps(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"15",y1:"9",x2:"9",y2:"15"},child:[]},{tag:"line",attr:{x1:"9",y1:"9",x2:"15",y2:"15"},child:[]}]})(e)}function Vt(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(e)}const BH=()=>{const[e,t]=h.useState(!1),a=h.useRef(null);return h.useEffect(()=>{const s=r=>{a.current&&!a.current.contains(r.target)&&t(!1)};return document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[]),h.useEffect(()=>{const s=()=>{e&&t(!1)};return window.addEventListener("scroll",s),()=>{window.removeEventListener("scroll",s)}},[e]),n.jsx("header",{className:"sticky top-0 z-50 bg-tertiary shadow-xl border-b border-tertiary",children:n.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex items-center justify-between h-16",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsxs("span",{className:"text-2xl font-black text-white",children:["Sari-Sari ",n.jsx("span",{className:"text-accent",children:" CRM"})]})}),n.jsxs("nav",{className:"hidden md:flex space-x-8 text-white font-medium",children:[n.jsx("a",{href:"#platform",className:"hover:text-accent transition duration-150",children:"Platform"}),n.jsx("a",{href:"#solutions",className:"hover:text-accent transition duration-150",children:"Solutions"}),n.jsx("a",{href:"#insights",className:"hover:text-accent transition duration-150",children:"Insights"}),n.jsx("a",{href:"#pricing",className:"hover:text-accent transition duration-150",children:"Pricing"})]}),n.jsxs("div",{className:"hidden sm:flex items-center space-x-4",children:[n.jsx("a",{href:"/login",className:"text-sm font-medium text-white hover:text-accent transition duration-500",children:"Log In"}),n.jsx("a",{href:"/signup",className:"inline-flex items-center justify-center px-4 py-2 text-sm font-semibold rounded-full shadow-lg border border-secondary text-white bg-secondary hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-500",children:"Start for Free"})]}),n.jsxs("div",{className:"flex sm:hidden items-center relative",ref:a,children:[n.jsx("button",{onClick:()=>t(!e),children:e?n.jsx(Vt,{className:"w-6 h-6 text-white"}):n.jsx(ex,{className:"w-6 h-6 text-white"})}),e&&n.jsx("div",{className:"absolute top-11 right-0 mt-2 w-48 border border-tertiary rounded-lg shadow-lg z-50 bg-primary",children:n.jsxs("nav",{className:"flex flex-col",children:[n.jsx("a",{href:"/login",className:"block px-4 py-2 text-center text-tertiary bg-white hover:bg-accent hover:text-secondary transition rounded-t-lg",children:"Log In"}),n.jsx("a",{href:"/signup",className:"block px-4 py-2 text-center text-tertiary bg-white hover:bg-secondary hover:text-white transition rounded-b-lg",children:"Start for Free"})]})})]})]})})})};function cie(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m12 14 4-4"},child:[]},{tag:"path",attr:{d:"M3.34 19a10 10 0 1 1 17.32 0"},child:[]}]})(e)}function zo(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(e)}function die(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z"},child:[]}]})(e)}function $w(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"10",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M10.3 15H7a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"17",cy:"17",r:"3"},child:[]},{tag:"path",attr:{d:"m21 21-1.9-1.9"},child:[]}]})(e)}function uie(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M22 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(e)}function mie(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"},child:[]}]})(e)}const fie=()=>{const e=["/image/Dashboard1.png","/image/lead1.png","/image/dashboard.jpg"],[t,a]=h.useState(0),[s,r]=h.useState(!1),i=h.useRef(null),[l,o]=h.useState(0),[c,d]=h.useState(0);h.useEffect(()=>(s||(i.current=setInterval(()=>{a(x=>(x+1)%e.length)},4e3)),()=>clearInterval(i.current)),[s,e.length]);const u=x=>o(x.targetTouches[0].clientX),f=x=>d(x.targetTouches[0].clientX),p=()=>{l-c>75&&a(x=>(x+1)%e.length),c-l>75&&a(x=>(x-1+e.length)%e.length)};return n.jsx("section",{className:"bg-paper-white text-white py-15 lg:py-32",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[n.jsxs("div",{className:"lg:text-left text-center",children:[n.jsxs("h1",{className:"text-5xl sm:text-6xl lg:text-7xl font-lg text-secondary mb-6 leading-tight",children:["Sari-Sari"," ",n.jsx("span",{className:"text-accent font-extrabold",children:"CRM"})]}),n.jsx("p",{className:"max-w-xl mx-auto lg:mx-0 text-lg sm:text-xl text-secondary mb-10 italic",children:"The CRM that keeps your customers organized and your sales growing."}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-center lg:justify-start space-y-4 sm:space-y-0 sm:space-x-4",children:[n.jsx("a",{href:"#",className:"px-10 py-3 rounded-lg border border-secondary text-white bg-secondary font-semibold hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-500",children:"Get Started Now"}),n.jsx("a",{href:"#",className:"px-10 py-3 rounded-lg border border-secondary text-white bg-secondary hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-500",children:"Watch Demo (2 min)"})]})]}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"hidden lg:block absolute inset-0 -top-10 -bottom-10 right-4 bg-accent rounded-3xl transform rotate-3 z-0"}),n.jsxs("div",{className:"relative z-10 overflow-hidden rounded-xl shadow-2xl border-4 border-gray-800 h-[400px] bg-gray-900 flex items-center justify-center",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),onTouchStart:u,onTouchMove:f,onTouchEnd:p,children:[e.map((x,y)=>n.jsx("img",{src:x,alt:`Slide ${y+1}`,className:`absolute inset-0 w-full h-full object-contain bg-gray-50 transition-opacity duration-1000 ease-in-out ${y===t?"opacity-100":"opacity-0"}`},y)),n.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex space-x-2",children:e.map((x,y)=>n.jsx("button",{onClick:()=>a(y),className:`w-3 h-3 rounded-full transition-all ${y===t?"bg-accent":"bg-gray-400 opacity-50"}`},y))})]})]})]})})},hie=({Icon:e,title:t,description:a})=>n.jsxs("div",{className:"bg-gray-800 p-8 rounded-2xl border border-gray-700 hover:border-accent transition transform hover:-translate-y-1",children:[n.jsx("div",{className:"w-14 h-14 flex items-center justify-center rounded-full text-accent mb-6",children:n.jsx(e,{className:"w-8 h-8"})}),n.jsx("h3",{className:"text-xl font-semibold text-white mb-3",children:t}),n.jsx("p",{className:"text-gray-400",children:a})]}),gie=()=>{const e=[{Icon:mie,title:"Automated Workflows",description:"Automate tasks and focus on engagement."},{Icon:cie,title:"Predictive Analytics",description:"Harness AI to forecast sales and risks."},{Icon:uie,title:"Unified Customer View",description:"360-degree profile for every customer."},{Icon:die,title:"Multi-Channel Support",description:"Engage across email, chat, and more."}];return n.jsx("section",{id:"platform",className:"py-20 bg-gray-900 border-t border-gray-800",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[n.jsx("h2",{className:"text-4xl sm:text-5xl font-bold text-white mb-4",children:"Engineered for Enterprise Scale"}),n.jsx("p",{className:"text-xl text-gray-400 mb-16",children:"Pillows is the neural network powering your customer relationships."}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:e.map((t,a)=>n.jsx(hie,{...t},a))})]})})},pie=()=>n.jsxs("section",{id:"pricing",className:"py-20 bg-paper-white border-t border-gray-800 text-center",children:[n.jsx("h2",{className:"text-4xl sm:text-5xl font-bold text-secondary mb-4",children:"Start Building Your Future, Today."}),n.jsx("p",{className:"text-xl text-gray-400 mb-10",children:"Join thousands leveraging Sari-Sari CRM's intelligent platform."}),n.jsx("a",{href:"/signup",className:"px-12 py-4 text-lg font-bold rounded-xl shadow-2xl bg-accent border border-secondary text-white bg-secondary hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-400",children:"Start 15-Day Free Trial"})]}),xie=()=>n.jsx("footer",{className:"bg-secondary text-white border-t py-10",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 grid grid-cols-2 md:grid-cols-5 gap-8",children:[n.jsxs("div",{children:[n.jsxs("span",{className:"text-xl font-white",children:["Sari-Sari ",n.jsx("span",{className:"text-accent",children:"CRM"})]}),n.jsx("p",{className:"text-sm text-white mt-4",children:" 2025 Sari-Sari CRM"})]}),[{title:"Platform",links:["AI Features","Automation","Integrations","APIs"]},{title:"Resources",links:["Case Studies","Webinars","Security","Support"]},{title:"Company",links:["Leadership","Partnerships","Careers","Newsroom"]},{title:"Legal",links:["Terms","Privacy","SLA","Compliance"]}].map((e,t)=>n.jsxs("div",{children:[n.jsx("h5",{className:"text-md font-semibold mb-4 text-accent",children:e.title}),n.jsx("ul",{className:"space-y-2 text-sm text-white",children:e.links.map((a,s)=>n.jsx("li",{children:n.jsx("a",{href:"#",className:"hover:text-accent",children:a})},s))})]},t))]})}),yie=()=>(h.useEffect(()=>{document.title="Sari-Sari CRM"},[]),n.jsxs("main",{className:"font-inter",children:[n.jsx(BH,{}),n.jsx(fie,{}),n.jsx(gie,{}),n.jsx(pie,{}),n.jsx(xie,{})]}));function Du(e){return St({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"},child:[]}]})(e)}function Vn(e){return St({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(e)}function Bk(e){return St({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"},child:[]}]})(e)}class Sg extends Error{}Sg.prototype.name="InvalidTokenError";function bie(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,a)=>{let s=a.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s}))}function vie(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return bie(t)}catch{return atob(t)}}function HH(e,t){if(typeof e!="string")throw new Sg("Invalid token specified: must be a string");t||(t={});const a=t.header===!0?0:1,s=e.split(".")[a];if(typeof s!="string")throw new Sg(`Invalid token specified: missing part #${a+1}`);let r;try{r=vie(s)}catch(i){throw new Sg(`Invalid token specified: invalid base64 for part #${a+1} (${i.message})`)}try{return JSON.parse(r)}catch(i){throw new Sg(`Invalid token specified: invalid json for part #${a+1} (${i.message})`)}}function $a(e,t,a=void 0){const s={};for(const r in e){const i=e[r];let l="",o=!0;for(let c=0;c<i.length;c+=1){const d=i[c];d&&(l+=(o===!0?"":" ")+t(d),o=!1,a&&a[d]&&(l+=" "+a[d]))}s[r]=l}return s}function pu(e,...t){const a=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(s=>a.searchParams.append("args[]",s)),`Minified MUI error #${e}; visit ${a} for the full message.`}function Un(e){if(typeof e!="string")throw new Error(pu(7));return e.charAt(0).toUpperCase()+e.slice(1)}var vS={exports:{}},Rn={};var dI;function wie(){if(dI)return Rn;dI=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),l=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function y(w){if(typeof w=="object"&&w!==null){var v=w.$$typeof;switch(v){case e:switch(w=w.type,w){case a:case r:case s:case c:case d:case p:return w;default:switch(w=w&&w.$$typeof,w){case l:case o:case f:case u:return w;case i:return w;default:return v}}case t:return v}}}return Rn.ContextConsumer=i,Rn.ContextProvider=l,Rn.Element=e,Rn.ForwardRef=o,Rn.Fragment=a,Rn.Lazy=f,Rn.Memo=u,Rn.Portal=t,Rn.Profiler=r,Rn.StrictMode=s,Rn.Suspense=c,Rn.SuspenseList=d,Rn.isContextConsumer=function(w){return y(w)===i},Rn.isContextProvider=function(w){return y(w)===l},Rn.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===e},Rn.isForwardRef=function(w){return y(w)===o},Rn.isFragment=function(w){return y(w)===a},Rn.isLazy=function(w){return y(w)===f},Rn.isMemo=function(w){return y(w)===u},Rn.isPortal=function(w){return y(w)===t},Rn.isProfiler=function(w){return y(w)===r},Rn.isStrictMode=function(w){return y(w)===s},Rn.isSuspense=function(w){return y(w)===c},Rn.isSuspenseList=function(w){return y(w)===d},Rn.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===a||w===r||w===s||w===c||w===d||typeof w=="object"&&w!==null&&(w.$$typeof===f||w.$$typeof===u||w.$$typeof===l||w.$$typeof===i||w.$$typeof===o||w.$$typeof===x||w.getModuleId!==void 0)},Rn.typeOf=y,Rn}var uI;function Nie(){return uI||(uI=1,vS.exports=wie()),vS.exports}var Hk=Nie();function cl(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function GH(e){if(h.isValidElement(e)||Hk.isValidElementType(e)||!cl(e))return e;const t={};return Object.keys(e).forEach(a=>{t[a]=GH(e[a])}),t}function kr(e,t,a={clone:!0}){const s=a.clone?{...e}:e;return cl(e)&&cl(t)&&Object.keys(t).forEach(r=>{h.isValidElement(t[r])||Hk.isValidElementType(t[r])?s[r]=t[r]:cl(t[r])&&Object.prototype.hasOwnProperty.call(e,r)&&cl(e[r])?s[r]=kr(e[r],t[r],a):a.clone?s[r]=cl(t[r])?GH(t[r]):t[r]:s[r]=t[r]}),s}function Fg(e,t){return t?kr(e,t,{clone:!1}):e}function mI(e,t){if(!e.containerQueries)return t;const a=Object.keys(t).filter(s=>s.startsWith("@container")).sort((s,r)=>{const i=/min-width:\s*([0-9.]+)/;return+(s.match(i)?.[1]||0)-+(r.match(i)?.[1]||0)});return a.length?a.reduce((s,r)=>{const i=t[r];return delete s[r],s[r]=i,s},{...t}):t}function jie(e,t){return t==="@"||t.startsWith("@")&&(e.some(a=>t.startsWith(`@${a}`))||!!t.match(/^@\d/))}function Cie(e,t){const a=t.match(/^@([^/]+)?\/?(.+)?$/);if(!a)return null;const[,s,r]=a,i=Number.isNaN(+s)?s||0:+s;return e.containerQueries(r).up(i)}function Sie(e){const t=(i,l)=>i.replace("@media",l?`@container ${l}`:"@container");function a(i,l){i.up=(...o)=>t(e.breakpoints.up(...o),l),i.down=(...o)=>t(e.breakpoints.down(...o),l),i.between=(...o)=>t(e.breakpoints.between(...o),l),i.only=(...o)=>t(e.breakpoints.only(...o),l),i.not=(...o)=>{const c=t(e.breakpoints.not(...o),l);return c.includes("not all and")?c.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):c}}const s={},r=i=>(a(s,i),s);return a(r),{...e,containerQueries:r}}const Rw={xs:0,sm:600,md:900,lg:1200,xl:1536},fI={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${Rw[e]}px)`},_ie={containerQueries:e=>({up:t=>{let a=typeof t=="number"?t:Rw[t]||t;return typeof a=="number"&&(a=`${a}px`),e?`@container ${e} (min-width:${a})`:`@container (min-width:${a})`}})};function jo(e,t,a){const s=e.theme||{};if(Array.isArray(t)){const i=s.breakpoints||fI;return t.reduce((l,o,c)=>(l[i.up(i.keys[c])]=a(t[c]),l),{})}if(typeof t=="object"){const i=s.breakpoints||fI;return Object.keys(t).reduce((l,o)=>{if(jie(i.keys,o)){const c=Cie(s.containerQueries?s:_ie,o);c&&(l[c]=a(t[o],o))}else if(Object.keys(i.values||Rw).includes(o)){const c=i.up(o);l[c]=a(t[o],o)}else{const c=o;l[c]=t[c]}return l},{})}return a(t)}function Aie(e={}){return e.keys?.reduce((a,s)=>{const r=e.up(s);return a[r]={},a},{})||{}}function hI(e,t){return e.reduce((a,s)=>{const r=a[s];return(!r||Object.keys(r).length===0)&&delete a[s],a},t)}function zw(e,t,a=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&a){const s=`vars.${t}`.split(".").reduce((r,i)=>r&&r[i]?r[i]:null,e);if(s!=null)return s}return t.split(".").reduce((s,r)=>s&&s[r]!=null?s[r]:null,e)}function Jb(e,t,a,s=a){let r;return typeof e=="function"?r=e(a):Array.isArray(e)?r=e[a]||s:r=zw(e,a)||s,t&&(r=t(r,s,e)),r}function _a(e){const{prop:t,cssProperty:a=e.prop,themeKey:s,transform:r}=e,i=l=>{if(l[t]==null)return null;const o=l[t],c=l.theme,d=zw(c,s)||{};return jo(l,o,f=>{let p=Jb(d,r,f);return f===p&&typeof f=="string"&&(p=Jb(d,r,`${t}${f==="default"?"":Un(f)}`,f)),a===!1?p:{[a]:p}})};return i.propTypes={},i.filterProps=[t],i}function Eie(e){const t={};return a=>(t[a]===void 0&&(t[a]=e(a)),t[a])}const Tie={m:"margin",p:"padding"},kie={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},gI={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Lie=Eie(e=>{if(e.length>2)if(gI[e])e=gI[e];else return[e];const[t,a]=e.split(""),s=Tie[t],r=kie[a]||"";return Array.isArray(r)?r.map(i=>s+i):[s+r]}),Gk=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],Wk=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...Gk,...Wk];function tx(e,t,a,s){const r=zw(e,t,!0)??a;return typeof r=="number"||typeof r=="string"?i=>typeof i=="string"?i:typeof r=="string"?r.startsWith("var(")&&i===0?0:r.startsWith("var(")&&i===1?r:`calc(${i} * ${r})`:r*i:Array.isArray(r)?i=>{if(typeof i=="string")return i;const l=Math.abs(i),o=r[l];return i>=0?o:typeof o=="number"?-o:typeof o=="string"&&o.startsWith("var(")?`calc(-1 * ${o})`:`-${o}`}:typeof r=="function"?r:()=>{}}function Vk(e){return tx(e,"spacing",8)}function nx(e,t){return typeof t=="string"||t==null?t:e(t)}function Pie(e,t){return a=>e.reduce((s,r)=>(s[r]=nx(t,a),s),{})}function Die(e,t,a,s){if(!t.includes(a))return null;const r=Lie(a),i=Pie(r,s),l=e[a];return jo(e,l,i)}function WH(e,t){const a=Vk(e.theme);return Object.keys(e).map(s=>Die(e,t,s,a)).reduce(Fg,{})}function ha(e){return WH(e,Gk)}ha.propTypes={};ha.filterProps=Gk;function ga(e){return WH(e,Wk)}ga.propTypes={};ga.filterProps=Wk;function Fw(...e){const t=e.reduce((s,r)=>(r.filterProps.forEach(i=>{s[i]=r}),s),{}),a=s=>Object.keys(s).reduce((r,i)=>t[i]?Fg(r,t[i](s)):r,{});return a.propTypes={},a.filterProps=e.reduce((s,r)=>s.concat(r.filterProps),[]),a}function si(e){return typeof e!="number"?e:`${e}px solid`}function xi(e,t){return _a({prop:e,themeKey:"borders",transform:t})}const Oie=xi("border",si),Mie=xi("borderTop",si),Iie=xi("borderRight",si),$ie=xi("borderBottom",si),Rie=xi("borderLeft",si),zie=xi("borderColor"),Fie=xi("borderTopColor"),Uie=xi("borderRightColor"),Bie=xi("borderBottomColor"),Hie=xi("borderLeftColor"),Gie=xi("outline",si),Wie=xi("outlineColor"),Uw=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=tx(e.theme,"shape.borderRadius",4),a=s=>({borderRadius:nx(t,s)});return jo(e,e.borderRadius,a)}return null};Uw.propTypes={};Uw.filterProps=["borderRadius"];Fw(Oie,Mie,Iie,$ie,Rie,zie,Fie,Uie,Bie,Hie,Uw,Gie,Wie);const Bw=e=>{if(e.gap!==void 0&&e.gap!==null){const t=tx(e.theme,"spacing",8),a=s=>({gap:nx(t,s)});return jo(e,e.gap,a)}return null};Bw.propTypes={};Bw.filterProps=["gap"];const Hw=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=tx(e.theme,"spacing",8),a=s=>({columnGap:nx(t,s)});return jo(e,e.columnGap,a)}return null};Hw.propTypes={};Hw.filterProps=["columnGap"];const Gw=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=tx(e.theme,"spacing",8),a=s=>({rowGap:nx(t,s)});return jo(e,e.rowGap,a)}return null};Gw.propTypes={};Gw.filterProps=["rowGap"];const Vie=_a({prop:"gridColumn"}),qie=_a({prop:"gridRow"}),Yie=_a({prop:"gridAutoFlow"}),Qie=_a({prop:"gridAutoColumns"}),Kie=_a({prop:"gridAutoRows"}),Xie=_a({prop:"gridTemplateColumns"}),Zie=_a({prop:"gridTemplateRows"}),Jie=_a({prop:"gridTemplateAreas"}),ele=_a({prop:"gridArea"});Fw(Bw,Hw,Gw,Vie,qie,Yie,Qie,Kie,Xie,Zie,Jie,ele);function nf(e,t){return t==="grey"?t:e}const tle=_a({prop:"color",themeKey:"palette",transform:nf}),nle=_a({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:nf}),ale=_a({prop:"backgroundColor",themeKey:"palette",transform:nf});Fw(tle,nle,ale);function Ar(e){return e<=1&&e!==0?`${e*100}%`:e}const sle=_a({prop:"width",transform:Ar}),qk=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=a=>{const s=e.theme?.breakpoints?.values?.[a]||Rw[a];return s?e.theme?.breakpoints?.unit!=="px"?{maxWidth:`${s}${e.theme.breakpoints.unit}`}:{maxWidth:s}:{maxWidth:Ar(a)}};return jo(e,e.maxWidth,t)}return null};qk.filterProps=["maxWidth"];const rle=_a({prop:"minWidth",transform:Ar}),ile=_a({prop:"height",transform:Ar}),lle=_a({prop:"maxHeight",transform:Ar}),ole=_a({prop:"minHeight",transform:Ar});_a({prop:"size",cssProperty:"width",transform:Ar});_a({prop:"size",cssProperty:"height",transform:Ar});const cle=_a({prop:"boxSizing"});Fw(sle,qk,rle,ile,lle,ole,cle);const ax={border:{themeKey:"borders",transform:si},borderTop:{themeKey:"borders",transform:si},borderRight:{themeKey:"borders",transform:si},borderBottom:{themeKey:"borders",transform:si},borderLeft:{themeKey:"borders",transform:si},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:si},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Uw},color:{themeKey:"palette",transform:nf},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:nf},backgroundColor:{themeKey:"palette",transform:nf},p:{style:ga},pt:{style:ga},pr:{style:ga},pb:{style:ga},pl:{style:ga},px:{style:ga},py:{style:ga},padding:{style:ga},paddingTop:{style:ga},paddingRight:{style:ga},paddingBottom:{style:ga},paddingLeft:{style:ga},paddingX:{style:ga},paddingY:{style:ga},paddingInline:{style:ga},paddingInlineStart:{style:ga},paddingInlineEnd:{style:ga},paddingBlock:{style:ga},paddingBlockStart:{style:ga},paddingBlockEnd:{style:ga},m:{style:ha},mt:{style:ha},mr:{style:ha},mb:{style:ha},ml:{style:ha},mx:{style:ha},my:{style:ha},margin:{style:ha},marginTop:{style:ha},marginRight:{style:ha},marginBottom:{style:ha},marginLeft:{style:ha},marginX:{style:ha},marginY:{style:ha},marginInline:{style:ha},marginInlineStart:{style:ha},marginInlineEnd:{style:ha},marginBlock:{style:ha},marginBlockStart:{style:ha},marginBlockEnd:{style:ha},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Bw},rowGap:{style:Gw},columnGap:{style:Hw},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Ar},maxWidth:{style:qk},minWidth:{transform:Ar},height:{transform:Ar},maxHeight:{transform:Ar},minHeight:{transform:Ar},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function dle(...e){const t=e.reduce((s,r)=>s.concat(Object.keys(r)),[]),a=new Set(t);return e.every(s=>a.size===Object.keys(s).length)}function ule(e,t){return typeof e=="function"?e(t):e}function mle(){function e(a,s,r,i){const l={[a]:s,theme:r},o=i[a];if(!o)return{[a]:s};const{cssProperty:c=a,themeKey:d,transform:u,style:f}=o;if(s==null)return null;if(d==="typography"&&s==="inherit")return{[a]:s};const p=zw(r,d)||{};return f?f(l):jo(l,s,y=>{let w=Jb(p,u,y);return y===w&&typeof y=="string"&&(w=Jb(p,u,`${a}${y==="default"?"":Un(y)}`,y)),c===!1?w:{[c]:w}})}function t(a){const{sx:s,theme:r={},nested:i}=a||{};if(!s)return null;const l=r.unstable_sxConfig??ax;function o(c){let d=c;if(typeof c=="function")d=c(r);else if(typeof c!="object")return c;if(!d)return null;const u=Aie(r.breakpoints),f=Object.keys(u);let p=u;return Object.keys(d).forEach(x=>{const y=ule(d[x],r);if(y!=null)if(typeof y=="object")if(l[x])p=Fg(p,e(x,y,r,l));else{const w=jo({theme:r},y,v=>({[x]:v}));dle(w,y)?p[x]=t({sx:y,theme:r,nested:!0}):p=Fg(p,w)}else p=Fg(p,e(x,y,r,l))}),!i&&r.modularCssLayers?{"@layer sx":mI(r,hI(f,p))}:mI(r,hI(f,p))}return Array.isArray(s)?s.map(o):o(s)}return t}const ff=mle();ff.filterProps=["sx"];const fle=e=>{const t={systemProps:{},otherProps:{}},a=e?.theme?.unstable_sxConfig??ax;return Object.keys(e).forEach(s=>{a[s]?t.systemProps[s]=e[s]:t.otherProps[s]=e[s]}),t};function hle(e){const{sx:t,...a}=e,{systemProps:s,otherProps:r}=fle(a);let i;return Array.isArray(t)?i=[s,...t]:typeof t=="function"?i=(...l)=>{const o=t(...l);return cl(o)?{...s,...o}:s}:i={...s,...t},{...r,sx:i}}function Ve(){return Ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Ve.apply(null,arguments)}function gle(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function ple(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var xle=(function(){function e(a){var s=this;this._insertTag=function(r){var i;s.tags.length===0?s.insertionPoint?i=s.insertionPoint.nextSibling:s.prepend?i=s.container.firstChild:i=s.before:i=s.tags[s.tags.length-1].nextSibling,s.container.insertBefore(r,i),s.tags.push(r)},this.isSpeedy=a.speedy===void 0?!0:a.speedy,this.tags=[],this.ctr=0,this.nonce=a.nonce,this.key=a.key,this.container=a.container,this.prepend=a.prepend,this.insertionPoint=a.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(s){s.forEach(this._insertTag)},t.insert=function(s){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(ple(this));var r=this.tags[this.tags.length-1];if(this.isSpeedy){var i=gle(r);try{i.insertRule(s,i.cssRules.length)}catch{}}else r.appendChild(document.createTextNode(s));this.ctr++},t.flush=function(){this.tags.forEach(function(s){var r;return(r=s.parentNode)==null?void 0:r.removeChild(s)}),this.tags=[],this.ctr=0},e})(),js="-ms-",ev="-moz-",jn="-webkit-",VH="comm",Yk="rule",Qk="decl",yle="@import",qH="@keyframes",ble="@layer",vle=Math.abs,Ww=String.fromCharCode,wle=Object.assign;function Nle(e,t){return vs(e,0)^45?(((t<<2^vs(e,0))<<2^vs(e,1))<<2^vs(e,2))<<2^vs(e,3):0}function YH(e){return e.trim()}function jle(e,t){return(e=t.exec(e))?e[0]:e}function Cn(e,t,a){return e.replace(t,a)}function yE(e,t){return e.indexOf(t)}function vs(e,t){return e.charCodeAt(t)|0}function np(e,t,a){return e.slice(t,a)}function il(e){return e.length}function Kk(e){return e.length}function wy(e,t){return t.push(e),e}function Cle(e,t){return e.map(t).join("")}var Vw=1,hf=1,QH=0,or=0,Da=0,Ff="";function qw(e,t,a,s,r,i,l){return{value:e,root:t,parent:a,type:s,props:r,children:i,line:Vw,column:hf,length:l,return:""}}function Jh(e,t){return wle(qw("",null,null,"",null,null,0),e,{length:-e.length},t)}function Sle(){return Da}function _le(){return Da=or>0?vs(Ff,--or):0,hf--,Da===10&&(hf=1,Vw--),Da}function Lr(){return Da=or<QH?vs(Ff,or++):0,hf++,Da===10&&(hf=1,Vw++),Da}function pl(){return vs(Ff,or)}function Db(){return or}function sx(e,t){return np(Ff,e,t)}function ap(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function KH(e){return Vw=hf=1,QH=il(Ff=e),or=0,[]}function XH(e){return Ff="",e}function Ob(e){return YH(sx(or-1,bE(e===91?e+2:e===40?e+1:e)))}function Ale(e){for(;(Da=pl())&&Da<33;)Lr();return ap(e)>2||ap(Da)>3?"":" "}function Ele(e,t){for(;--t&&Lr()&&!(Da<48||Da>102||Da>57&&Da<65||Da>70&&Da<97););return sx(e,Db()+(t<6&&pl()==32&&Lr()==32))}function bE(e){for(;Lr();)switch(Da){case e:return or;case 34:case 39:e!==34&&e!==39&&bE(Da);break;case 40:e===41&&bE(e);break;case 92:Lr();break}return or}function Tle(e,t){for(;Lr()&&e+Da!==57;)if(e+Da===84&&pl()===47)break;return"/*"+sx(t,or-1)+"*"+Ww(e===47?e:Lr())}function kle(e){for(;!ap(pl());)Lr();return sx(e,or)}function Lle(e){return XH(Mb("",null,null,null,[""],e=KH(e),0,[0],e))}function Mb(e,t,a,s,r,i,l,o,c){for(var d=0,u=0,f=l,p=0,x=0,y=0,w=1,v=1,C=1,N=0,S="",T=r,k=i,_=s,E=S;v;)switch(y=N,N=Lr()){case 40:if(y!=108&&vs(E,f-1)==58){yE(E+=Cn(Ob(N),"&","&\f"),"&\f")!=-1&&(C=-1);break}case 34:case 39:case 91:E+=Ob(N);break;case 9:case 10:case 13:case 32:E+=Ale(y);break;case 92:E+=Ele(Db()-1,7);continue;case 47:switch(pl()){case 42:case 47:wy(Ple(Tle(Lr(),Db()),t,a),c);break;default:E+="/"}break;case 123*w:o[d++]=il(E)*C;case 125*w:case 59:case 0:switch(N){case 0:case 125:v=0;case 59+u:C==-1&&(E=Cn(E,/\f/g,"")),x>0&&il(E)-f&&wy(x>32?xI(E+";",s,a,f-1):xI(Cn(E," ","")+";",s,a,f-2),c);break;case 59:E+=";";default:if(wy(_=pI(E,t,a,d,u,r,o,S,T=[],k=[],f),i),N===123)if(u===0)Mb(E,t,_,_,T,i,f,o,k);else switch(p===99&&vs(E,3)===110?100:p){case 100:case 108:case 109:case 115:Mb(e,_,_,s&&wy(pI(e,_,_,0,0,r,o,S,r,T=[],f),k),r,k,f,o,s?T:k);break;default:Mb(E,_,_,_,[""],k,0,o,k)}}d=u=x=0,w=C=1,S=E="",f=l;break;case 58:f=1+il(E),x=y;default:if(w<1){if(N==123)--w;else if(N==125&&w++==0&&_le()==125)continue}switch(E+=Ww(N),N*w){case 38:C=u>0?1:(E+="\f",-1);break;case 44:o[d++]=(il(E)-1)*C,C=1;break;case 64:pl()===45&&(E+=Ob(Lr())),p=pl(),u=f=il(S=E+=kle(Db())),N++;break;case 45:y===45&&il(E)==2&&(w=0)}}return i}function pI(e,t,a,s,r,i,l,o,c,d,u){for(var f=r-1,p=r===0?i:[""],x=Kk(p),y=0,w=0,v=0;y<s;++y)for(var C=0,N=np(e,f+1,f=vle(w=l[y])),S=e;C<x;++C)(S=YH(w>0?p[C]+" "+N:Cn(N,/&\f/g,p[C])))&&(c[v++]=S);return qw(e,t,a,r===0?Yk:o,c,d,u)}function Ple(e,t,a){return qw(e,t,a,VH,Ww(Sle()),np(e,2,-2),0)}function xI(e,t,a,s){return qw(e,t,a,Qk,np(e,0,s),np(e,s+1,-1),s)}function af(e,t){for(var a="",s=Kk(e),r=0;r<s;r++)a+=t(e[r],r,e,t)||"";return a}function Dle(e,t,a,s){switch(e.type){case ble:if(e.children.length)break;case yle:case Qk:return e.return=e.return||e.value;case VH:return"";case qH:return e.return=e.value+"{"+af(e.children,s)+"}";case Yk:e.value=e.props.join(",")}return il(a=af(e.children,s))?e.return=e.value+"{"+a+"}":""}function Ole(e){var t=Kk(e);return function(a,s,r,i){for(var l="",o=0;o<t;o++)l+=e[o](a,s,r,i)||"";return l}}function Mle(e){return function(t){t.root||(t=t.return)&&e(t)}}function ZH(e){var t=Object.create(null);return function(a){return t[a]===void 0&&(t[a]=e(a)),t[a]}}var Ile=function(t,a,s){for(var r=0,i=0;r=i,i=pl(),r===38&&i===12&&(a[s]=1),!ap(i);)Lr();return sx(t,or)},$le=function(t,a){var s=-1,r=44;do switch(ap(r)){case 0:r===38&&pl()===12&&(a[s]=1),t[s]+=Ile(or-1,a,s);break;case 2:t[s]+=Ob(r);break;case 4:if(r===44){t[++s]=pl()===58?"&\f":"",a[s]=t[s].length;break}default:t[s]+=Ww(r)}while(r=Lr());return t},Rle=function(t,a){return XH($le(KH(t),a))},yI=new WeakMap,zle=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var a=t.value,s=t.parent,r=t.column===s.column&&t.line===s.line;s.type!=="rule";)if(s=s.parent,!s)return;if(!(t.props.length===1&&a.charCodeAt(0)!==58&&!yI.get(s))&&!r){yI.set(t,!0);for(var i=[],l=Rle(a,i),o=s.props,c=0,d=0;c<l.length;c++)for(var u=0;u<o.length;u++,d++)t.props[d]=i[c]?l[c].replace(/&\f/g,o[u]):o[u]+" "+l[c]}}},Fle=function(t){if(t.type==="decl"){var a=t.value;a.charCodeAt(0)===108&&a.charCodeAt(2)===98&&(t.return="",t.value="")}};function JH(e,t){switch(Nle(e,t)){case 5103:return jn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return jn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return jn+e+ev+e+js+e+e;case 6828:case 4268:return jn+e+js+e+e;case 6165:return jn+e+js+"flex-"+e+e;case 5187:return jn+e+Cn(e,/(\w+).+(:[^]+)/,jn+"box-$1$2"+js+"flex-$1$2")+e;case 5443:return jn+e+js+"flex-item-"+Cn(e,/flex-|-self/,"")+e;case 4675:return jn+e+js+"flex-line-pack"+Cn(e,/align-content|flex-|-self/,"")+e;case 5548:return jn+e+js+Cn(e,"shrink","negative")+e;case 5292:return jn+e+js+Cn(e,"basis","preferred-size")+e;case 6060:return jn+"box-"+Cn(e,"-grow","")+jn+e+js+Cn(e,"grow","positive")+e;case 4554:return jn+Cn(e,/([^-])(transform)/g,"$1"+jn+"$2")+e;case 6187:return Cn(Cn(Cn(e,/(zoom-|grab)/,jn+"$1"),/(image-set)/,jn+"$1"),e,"")+e;case 5495:case 3959:return Cn(e,/(image-set\([^]*)/,jn+"$1$`$1");case 4968:return Cn(Cn(e,/(.+:)(flex-)?(.*)/,jn+"box-pack:$3"+js+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+jn+e+e;case 4095:case 3583:case 4068:case 2532:return Cn(e,/(.+)-inline(.+)/,jn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(il(e)-1-t>6)switch(vs(e,t+1)){case 109:if(vs(e,t+4)!==45)break;case 102:return Cn(e,/(.+:)(.+)-([^]+)/,"$1"+jn+"$2-$3$1"+ev+(vs(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~yE(e,"stretch")?JH(Cn(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(vs(e,t+1)!==115)break;case 6444:switch(vs(e,il(e)-3-(~yE(e,"!important")&&10))){case 107:return Cn(e,":",":"+jn)+e;case 101:return Cn(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+jn+(vs(e,14)===45?"inline-":"")+"box$3$1"+jn+"$2$3$1"+js+"$2box$3")+e}break;case 5936:switch(vs(e,t+11)){case 114:return jn+e+js+Cn(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return jn+e+js+Cn(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return jn+e+js+Cn(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return jn+e+js+e+e}return e}var Ule=function(t,a,s,r){if(t.length>-1&&!t.return)switch(t.type){case Qk:t.return=JH(t.value,t.length);break;case qH:return af([Jh(t,{value:Cn(t.value,"@","@"+jn)})],r);case Yk:if(t.length)return Cle(t.props,function(i){switch(jle(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return af([Jh(t,{props:[Cn(i,/:(read-\w+)/,":"+ev+"$1")]})],r);case"::placeholder":return af([Jh(t,{props:[Cn(i,/:(plac\w+)/,":"+jn+"input-$1")]}),Jh(t,{props:[Cn(i,/:(plac\w+)/,":"+ev+"$1")]}),Jh(t,{props:[Cn(i,/:(plac\w+)/,js+"input-$1")]})],r)}return""})}},Ble=[Ule],Hle=function(t){var a=t.key;if(a==="css"){var s=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(s,function(w){var v=w.getAttribute("data-emotion");v.indexOf(" ")!==-1&&(document.head.appendChild(w),w.setAttribute("data-s",""))})}var r=t.stylisPlugins||Ble,i={},l,o=[];l=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+a+' "]'),function(w){for(var v=w.getAttribute("data-emotion").split(" "),C=1;C<v.length;C++)i[v[C]]=!0;o.push(w)});var c,d=[zle,Fle];{var u,f=[Dle,Mle(function(w){u.insert(w)})],p=Ole(d.concat(r,f)),x=function(v){return af(Lle(v),p)};c=function(v,C,N,S){u=N,x(v?v+"{"+C.styles+"}":C.styles),S&&(y.inserted[C.name]=!0)}}var y={key:a,sheet:new xle({key:a,container:l,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:i,registered:{},insert:c};return y.sheet.hydrate(o),y},wS={exports:{}},Sn={};var bI;function Gle(){if(bI)return Sn;bI=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,a=e?Symbol.for("react.portal"):60106,s=e?Symbol.for("react.fragment"):60107,r=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,l=e?Symbol.for("react.provider"):60109,o=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,d=e?Symbol.for("react.concurrent_mode"):60111,u=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,p=e?Symbol.for("react.suspense_list"):60120,x=e?Symbol.for("react.memo"):60115,y=e?Symbol.for("react.lazy"):60116,w=e?Symbol.for("react.block"):60121,v=e?Symbol.for("react.fundamental"):60117,C=e?Symbol.for("react.responder"):60118,N=e?Symbol.for("react.scope"):60119;function S(k){if(typeof k=="object"&&k!==null){var _=k.$$typeof;switch(_){case t:switch(k=k.type,k){case c:case d:case s:case i:case r:case f:return k;default:switch(k=k&&k.$$typeof,k){case o:case u:case y:case x:case l:return k;default:return _}}case a:return _}}}function T(k){return S(k)===d}return Sn.AsyncMode=c,Sn.ConcurrentMode=d,Sn.ContextConsumer=o,Sn.ContextProvider=l,Sn.Element=t,Sn.ForwardRef=u,Sn.Fragment=s,Sn.Lazy=y,Sn.Memo=x,Sn.Portal=a,Sn.Profiler=i,Sn.StrictMode=r,Sn.Suspense=f,Sn.isAsyncMode=function(k){return T(k)||S(k)===c},Sn.isConcurrentMode=T,Sn.isContextConsumer=function(k){return S(k)===o},Sn.isContextProvider=function(k){return S(k)===l},Sn.isElement=function(k){return typeof k=="object"&&k!==null&&k.$$typeof===t},Sn.isForwardRef=function(k){return S(k)===u},Sn.isFragment=function(k){return S(k)===s},Sn.isLazy=function(k){return S(k)===y},Sn.isMemo=function(k){return S(k)===x},Sn.isPortal=function(k){return S(k)===a},Sn.isProfiler=function(k){return S(k)===i},Sn.isStrictMode=function(k){return S(k)===r},Sn.isSuspense=function(k){return S(k)===f},Sn.isValidElementType=function(k){return typeof k=="string"||typeof k=="function"||k===s||k===d||k===i||k===r||k===f||k===p||typeof k=="object"&&k!==null&&(k.$$typeof===y||k.$$typeof===x||k.$$typeof===l||k.$$typeof===o||k.$$typeof===u||k.$$typeof===v||k.$$typeof===C||k.$$typeof===N||k.$$typeof===w)},Sn.typeOf=S,Sn}var vI;function Wle(){return vI||(vI=1,wS.exports=Gle()),wS.exports}var NS,wI;function Vle(){if(wI)return NS;wI=1;var e=Wle(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},r={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};i[e.ForwardRef]=s,i[e.Memo]=r;function l(y){return e.isMemo(y)?r:i[y.$$typeof]||t}var o=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;function x(y,w,v){if(typeof w!="string"){if(p){var C=f(w);C&&C!==p&&x(y,C,v)}var N=c(w);d&&(N=N.concat(d(w)));for(var S=l(y),T=l(w),k=0;k<N.length;++k){var _=N[k];if(!a[_]&&!(v&&v[_])&&!(T&&T[_])&&!(S&&S[_])){var E=u(w,_);try{o(y,_,E)}catch{}}}}return y}return NS=x,NS}Vle();var qle=!0;function e9(e,t,a){var s="";return a.split(" ").forEach(function(r){e[r]!==void 0?t.push(e[r]+";"):r&&(s+=r+" ")}),s}var Xk=function(t,a,s){var r=t.key+"-"+a.name;(s===!1||qle===!1)&&t.registered[r]===void 0&&(t.registered[r]=a.styles)},t9=function(t,a,s){Xk(t,a,s);var r=t.key+"-"+a.name;if(t.inserted[a.name]===void 0){var i=a;do t.insert(a===i?"."+r:"",i,t.sheet,!0),i=i.next;while(i!==void 0)}};function Yle(e){for(var t=0,a,s=0,r=e.length;r>=4;++s,r-=4)a=e.charCodeAt(s)&255|(e.charCodeAt(++s)&255)<<8|(e.charCodeAt(++s)&255)<<16|(e.charCodeAt(++s)&255)<<24,a=(a&65535)*1540483477+((a>>>16)*59797<<16),a^=a>>>24,t=(a&65535)*1540483477+((a>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(r){case 3:t^=(e.charCodeAt(s+2)&255)<<16;case 2:t^=(e.charCodeAt(s+1)&255)<<8;case 1:t^=e.charCodeAt(s)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var Qle={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Kle=/[A-Z]|^ms/g,Xle=/_EMO_([^_]+?)_([^]*?)_EMO_/g,n9=function(t){return t.charCodeAt(1)===45},NI=function(t){return t!=null&&typeof t!="boolean"},jS=ZH(function(e){return n9(e)?e:e.replace(Kle,"-$&").toLowerCase()}),jI=function(t,a){switch(t){case"animation":case"animationName":if(typeof a=="string")return a.replace(Xle,function(s,r,i){return ll={name:r,styles:i,next:ll},r})}return Qle[t]!==1&&!n9(t)&&typeof a=="number"&&a!==0?a+"px":a};function sp(e,t,a){if(a==null)return"";var s=a;if(s.__emotion_styles!==void 0)return s;switch(typeof a){case"boolean":return"";case"object":{var r=a;if(r.anim===1)return ll={name:r.name,styles:r.styles,next:ll},r.name;var i=a;if(i.styles!==void 0){var l=i.next;if(l!==void 0)for(;l!==void 0;)ll={name:l.name,styles:l.styles,next:ll},l=l.next;var o=i.styles+";";return o}return Zle(e,t,a)}case"function":{if(e!==void 0){var c=ll,d=a(e);return ll=c,sp(e,t,d)}break}}var u=a;if(t==null)return u;var f=t[u];return f!==void 0?f:u}function Zle(e,t,a){var s="";if(Array.isArray(a))for(var r=0;r<a.length;r++)s+=sp(e,t,a[r])+";";else for(var i in a){var l=a[i];if(typeof l!="object"){var o=l;t!=null&&t[o]!==void 0?s+=i+"{"+t[o]+"}":NI(o)&&(s+=jS(i)+":"+jI(i,o)+";")}else if(Array.isArray(l)&&typeof l[0]=="string"&&(t==null||t[l[0]]===void 0))for(var c=0;c<l.length;c++)NI(l[c])&&(s+=jS(i)+":"+jI(i,l[c])+";");else{var d=sp(e,t,l);switch(i){case"animation":case"animationName":{s+=jS(i)+":"+d+";";break}default:s+=i+"{"+d+"}"}}}return s}var CI=/label:\s*([^\s;{]+)\s*(;|$)/g,ll;function Yw(e,t,a){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var s=!0,r="";ll=void 0;var i=e[0];if(i==null||i.raw===void 0)s=!1,r+=sp(a,t,i);else{var l=i;r+=l[0]}for(var o=1;o<e.length;o++)if(r+=sp(a,t,e[o]),s){var c=i;r+=c[o]}CI.lastIndex=0;for(var d="",u;(u=CI.exec(r))!==null;)d+="-"+u[1];var f=Yle(r)+d;return{name:f,styles:r,next:ll}}var Jle=function(t){return t()},eoe=uu.useInsertionEffect?uu.useInsertionEffect:!1,a9=eoe||Jle,s9=h.createContext(typeof HTMLElement<"u"?Hle({key:"css"}):null);s9.Provider;var r9=function(t){return h.forwardRef(function(a,s){var r=h.useContext(s9);return t(a,r,s)})},Zk=h.createContext({}),Jk={}.hasOwnProperty,vE="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",toe=function(t,a){var s={};for(var r in a)Jk.call(a,r)&&(s[r]=a[r]);return s[vE]=t,s},noe=function(t){var a=t.cache,s=t.serialized,r=t.isStringTag;return Xk(a,s,r),a9(function(){return t9(a,s,r)}),null},aoe=r9(function(e,t,a){var s=e.css;typeof s=="string"&&t.registered[s]!==void 0&&(s=t.registered[s]);var r=e[vE],i=[s],l="";typeof e.className=="string"?l=e9(t.registered,i,e.className):e.className!=null&&(l=e.className+" ");var o=Yw(i,void 0,h.useContext(Zk));l+=t.key+"-"+o.name;var c={};for(var d in e)Jk.call(e,d)&&d!=="css"&&d!==vE&&(c[d]=e[d]);return c.className=l,a&&(c.ref=a),h.createElement(h.Fragment,null,h.createElement(noe,{cache:t,serialized:o,isStringTag:typeof r=="string"}),h.createElement(r,c))}),soe=aoe,SI=function(t,a){var s=arguments;if(a==null||!Jk.call(a,"css"))return h.createElement.apply(void 0,s);var r=s.length,i=new Array(r);i[0]=soe,i[1]=toe(t,a);for(var l=2;l<r;l++)i[l]=s[l];return h.createElement.apply(null,i)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(SI||(SI={}));function eL(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Yw(t)}function rx(){var e=eL.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var roe=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,ioe=ZH(function(e){return roe.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),loe=ioe,ooe=function(t){return t!=="theme"},_I=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?loe:ooe},AI=function(t,a,s){var r;if(a){var i=a.shouldForwardProp;r=t.__emotion_forwardProp&&i?function(l){return t.__emotion_forwardProp(l)&&i(l)}:i}return typeof r!="function"&&s&&(r=t.__emotion_forwardProp),r},coe=function(t){var a=t.cache,s=t.serialized,r=t.isStringTag;return Xk(a,s,r),a9(function(){return t9(a,s,r)}),null},doe=function e(t,a){var s=t.__emotion_real===t,r=s&&t.__emotion_base||t,i,l;a!==void 0&&(i=a.label,l=a.target);var o=AI(t,a,s),c=o||_I(r),d=!c("as");return function(){var u=arguments,f=s&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(i!==void 0&&f.push("label:"+i+";"),u[0]==null||u[0].raw===void 0)f.push.apply(f,u);else{var p=u[0];f.push(p[0]);for(var x=u.length,y=1;y<x;y++)f.push(u[y],p[y])}var w=r9(function(v,C,N){var S=d&&v.as||r,T="",k=[],_=v;if(v.theme==null){_={};for(var E in v)_[E]=v[E];_.theme=h.useContext(Zk)}typeof v.className=="string"?T=e9(C.registered,k,v.className):v.className!=null&&(T=v.className+" ");var A=Yw(f.concat(k),C.registered,_);T+=C.key+"-"+A.name,l!==void 0&&(T+=" "+l);var I=d&&o===void 0?_I(S):c,z={};for(var F in v)d&&F==="as"||I(F)&&(z[F]=v[F]);return z.className=T,N&&(z.ref=N),h.createElement(h.Fragment,null,h.createElement(coe,{cache:C,serialized:A,isStringTag:typeof S=="string"}),h.createElement(S,z))});return w.displayName=i!==void 0?i:"Styled("+(typeof r=="string"?r:r.displayName||r.name||"Component")+")",w.defaultProps=t.defaultProps,w.__emotion_real=w,w.__emotion_base=r,w.__emotion_styles=f,w.__emotion_forwardProp=o,Object.defineProperty(w,"toString",{value:function(){return"."+l}}),w.withComponent=function(v,C){var N=e(v,Ve({},a,C,{shouldForwardProp:AI(w,C,!0)}));return N.apply(void 0,f)},w}},uoe=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],wE=doe.bind(null);uoe.forEach(function(e){wE[e]=wE(e)});function moe(e,t){return wE(e,t)}function foe(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const EI=[];function au(e){return EI[0]=e,Yw(EI)}const hoe=e=>{const t=Object.keys(e).map(a=>({key:a,val:e[a]}))||[];return t.sort((a,s)=>a.val-s.val),t.reduce((a,s)=>({...a,[s.key]:s.val}),{})};function goe(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:a="px",step:s=5,...r}=e,i=hoe(t),l=Object.keys(i);function o(p){return`@media (min-width:${typeof t[p]=="number"?t[p]:p}${a})`}function c(p){return`@media (max-width:${(typeof t[p]=="number"?t[p]:p)-s/100}${a})`}function d(p,x){const y=l.indexOf(x);return`@media (min-width:${typeof t[p]=="number"?t[p]:p}${a}) and (max-width:${(y!==-1&&typeof t[l[y]]=="number"?t[l[y]]:x)-s/100}${a})`}function u(p){return l.indexOf(p)+1<l.length?d(p,l[l.indexOf(p)+1]):o(p)}function f(p){const x=l.indexOf(p);return x===0?o(l[1]):x===l.length-1?c(l[x]):d(p,l[l.indexOf(p)+1]).replace("@media","@media not all and")}return{keys:l,values:i,up:o,down:c,between:d,only:u,not:f,unit:a,...r}}const poe={borderRadius:4};function i9(e=8,t=Vk({spacing:e})){if(e.mui)return e;const a=(...s)=>(s.length===0?[1]:s).map(i=>{const l=t(i);return typeof l=="number"?`${l}px`:l}).join(" ");return a.mui=!0,a}function xoe(e,t){const a=this;if(a.vars){if(!a.colorSchemes?.[e]||typeof a.getColorSchemeSelector!="function")return{};let s=a.getColorSchemeSelector(e);return s==="&"?t:((s.includes("data-")||s.includes("."))&&(s=`*:where(${s.replace(/\s*&$/,"")}) &`),{[s]:t})}return a.palette.mode===e?t:{}}function tL(e={},...t){const{breakpoints:a={},palette:s={},spacing:r,shape:i={},...l}=e,o=goe(a),c=i9(r);let d=kr({breakpoints:o,direction:"ltr",components:{},palette:{mode:"light",...s},spacing:c,shape:{...poe,...i}},l);return d=Sie(d),d.applyStyles=xoe,d=t.reduce((u,f)=>kr(u,f),d),d.unstable_sxConfig={...ax,...l?.unstable_sxConfig},d.unstable_sx=function(f){return ff({sx:f,theme:this})},d}function yoe(e){return Object.keys(e).length===0}function l9(e=null){const t=h.useContext(Zk);return!t||yoe(t)?e:t}const boe=tL();function o9(e=boe){return l9(e)}const TI=e=>e,voe=()=>{let e=TI;return{configure(t){e=t},generate(t){return e(t)},reset(){e=TI}}},woe=voe(),Noe={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Ra(e,t,a="Mui"){const s=Noe[t];return s?`${a}-${s}`:`${woe.generate(e)}-${t}`}function va(e,t,a="Mui"){const s={};return t.forEach(r=>{s[r]=Ra(e,r,a)}),s}function c9(e){const{variants:t,...a}=e,s={variants:t,style:au(a),isProcessed:!0};return s.style===a||t&&t.forEach(r=>{typeof r.style!="function"&&(r.style=au(r.style))}),s}const joe=tL();function Ib(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function qd(e,t){return t&&e&&typeof e=="object"&&e.styles&&!e.styles.startsWith("@layer")&&(e.styles=`@layer ${t}{${String(e.styles)}}`),e}function Coe(e){return e?(t,a)=>a[e]:null}function Soe(e,t,a){e.theme=Eoe(e.theme)?a:e.theme[t]||e.theme}function $b(e,t,a){const s=typeof t=="function"?t(e):t;if(Array.isArray(s))return s.flatMap(r=>$b(e,r,a));if(Array.isArray(s?.variants)){let r;if(s.isProcessed)r=a?qd(s.style,a):s.style;else{const{variants:i,...l}=s;r=a?qd(au(l),a):l}return d9(e,s.variants,[r],a)}return s?.isProcessed?a?qd(au(s.style),a):s.style:a?qd(au(s),a):s}function d9(e,t,a=[],s=void 0){let r;e:for(let i=0;i<t.length;i+=1){const l=t[i];if(typeof l.props=="function"){if(r??={...e,...e.ownerState,ownerState:e.ownerState},!l.props(r))continue}else for(const o in l.props)if(e[o]!==l.props[o]&&e.ownerState?.[o]!==l.props[o])continue e;typeof l.style=="function"?(r??={...e,...e.ownerState,ownerState:e.ownerState},a.push(s?qd(au(l.style(r)),s):l.style(r))):a.push(s?qd(au(l.style),s):l.style)}return a}function _oe(e={}){const{themeId:t,defaultTheme:a=joe,rootShouldForwardProp:s=Ib,slotShouldForwardProp:r=Ib}=e;function i(o){Soe(o,t,a)}return(o,c={})=>{foe(o,_=>_.filter(E=>E!==ff));const{name:d,slot:u,skipVariantsResolver:f,skipSx:p,overridesResolver:x=Coe(koe(u)),...y}=c,w=d&&d.startsWith("Mui")||u?"components":"custom",v=f!==void 0?f:u&&u!=="Root"&&u!=="root"||!1,C=p||!1;let N=Ib;u==="Root"||u==="root"?N=s:u?N=r:Toe(o)&&(N=void 0);const S=moe(o,{shouldForwardProp:N,label:Aoe(),...y}),T=_=>{if(_.__emotion_real===_)return _;if(typeof _=="function")return function(A){return $b(A,_,A.theme.modularCssLayers?w:void 0)};if(cl(_)){const E=c9(_);return function(I){return E.variants?$b(I,E,I.theme.modularCssLayers?w:void 0):I.theme.modularCssLayers?qd(E.style,w):E.style}}return _},k=(..._)=>{const E=[],A=_.map(T),I=[];if(E.push(i),d&&x&&I.push(function(M){const Z=M.theme.components?.[d]?.styleOverrides;if(!Z)return null;const R={};for(const Q in Z)R[Q]=$b(M,Z[Q],M.theme.modularCssLayers?"theme":void 0);return x(M,R)}),d&&!v&&I.push(function(M){const Z=M.theme?.components?.[d]?.variants;return Z?d9(M,Z,[],M.theme.modularCssLayers?"theme":void 0):null}),C||I.push(ff),Array.isArray(A[0])){const D=A.shift(),M=new Array(E.length).fill(""),W=new Array(I.length).fill("");let Z;Z=[...M,...D,...W],Z.raw=[...M,...D.raw,...W],E.unshift(Z)}const z=[...E,...A,...I],F=S(...z);return o.muiName&&(F.muiName=o.muiName),F};return S.withConfig&&(k.withConfig=S.withConfig),k}}function Aoe(e,t){return void 0}function Eoe(e){for(const t in e)return!1;return!0}function Toe(e){return typeof e=="string"&&e.charCodeAt(0)>96}function koe(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}function xu(e,t,a=!1){const s={...t};for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const i=r;if(i==="components"||i==="slots")s[i]={...e[i],...s[i]};else if(i==="componentsProps"||i==="slotProps"){const l=e[i],o=t[i];if(!o)s[i]=l||{};else if(!l)s[i]=o;else{s[i]={...o};for(const c in l)if(Object.prototype.hasOwnProperty.call(l,c)){const d=c;s[i][d]=xu(l[d],o[d],a)}}}else i==="className"&&a&&t.className?s.className=Tt(e?.className,t?.className):i==="style"&&a&&t.style?s.style={...e?.style,...t?.style}:s[i]===void 0&&(s[i]=e[i])}return s}function u9(e){const{theme:t,name:a,props:s}=e;return!t||!t.components||!t.components[a]||!t.components[a].defaultProps?s:xu(t.components[a].defaultProps,s)}function Loe({props:e,name:t,defaultTheme:a,themeId:s}){let r=o9(a);return r=r[s]||r,u9({theme:r,name:t,props:e})}const Xa=typeof window<"u"?h.useLayoutEffect:h.useEffect;function Poe(e,t,a,s,r){const[i,l]=h.useState(()=>r&&a?a(e).matches:s?s(e).matches:t);return Xa(()=>{if(!a)return;const o=a(e),c=()=>{l(o.matches)};return c(),o.addEventListener("change",c),()=>{o.removeEventListener("change",c)}},[e,a]),i}const Doe={...uu},m9=Doe.useSyncExternalStore;function Ooe(e,t,a,s,r){const i=h.useCallback(()=>t,[t]),l=h.useMemo(()=>{if(r&&a)return()=>a(e).matches;if(s!==null){const{matches:u}=s(e);return()=>u}return i},[i,e,s,r,a]),[o,c]=h.useMemo(()=>{if(a===null)return[i,()=>()=>{}];const u=a(e);return[()=>u.matches,f=>(u.addEventListener("change",f),()=>{u.removeEventListener("change",f)})]},[i,a,e]);return m9(c,o,l)}function f9(e={}){const{themeId:t}=e;return function(s,r={}){let i=l9();i&&t&&(i=i[t]||i);const l=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:o=!1,matchMedia:c=l?window.matchMedia:null,ssrMatchMedia:d=null,noSsr:u=!1}=u9({name:"MuiUseMediaQuery",props:r,theme:i});let f=typeof s=="function"?s(i):s;return f=f.replace(/^@media( ?)/m,""),f.includes("print")&&console.warn(["MUI: You have provided a `print` query to the `useMediaQuery` hook.","Using the print media query to modify print styles can lead to unexpected results.","Consider using the `displayPrint` field in the `sx` prop instead.","More information about `displayPrint` on our docs: https://mui.com/system/display/#display-in-print."].join(`
`)),(m9!==void 0?Ooe:Poe)(f,o,c,d,u)}}f9();function Moe(e,t=Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,a))}function nL(e,t=0,a=1){return Moe(e,t,a)}function Ioe(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let a=e.match(t);return a&&a[0].length===1&&(a=a.map(s=>s+s)),a?`rgb${a.length===4?"a":""}(${a.map((s,r)=>r<3?parseInt(s,16):Math.round(parseInt(s,16)/255*1e3)/1e3).join(", ")})`:""}function Qc(e){if(e.type)return e;if(e.charAt(0)==="#")return Qc(Ioe(e));const t=e.indexOf("("),a=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(a))throw new Error(pu(9,e));let s=e.substring(t+1,e.length-1),r;if(a==="color"){if(s=s.split(" "),r=s.shift(),s.length===4&&s[3].charAt(0)==="/"&&(s[3]=s[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(r))throw new Error(pu(10,r))}else s=s.split(",");return s=s.map(i=>parseFloat(i)),{type:a,values:s,colorSpace:r}}const $oe=e=>{const t=Qc(e);return t.values.slice(0,3).map((a,s)=>t.type.includes("hsl")&&s!==0?`${a}%`:a).join(" ")},_g=(e,t)=>{try{return $oe(e)}catch{return e}};function Qw(e){const{type:t,colorSpace:a}=e;let{values:s}=e;return t.includes("rgb")?s=s.map((r,i)=>i<3?parseInt(r,10):r):t.includes("hsl")&&(s[1]=`${s[1]}%`,s[2]=`${s[2]}%`),t.includes("color")?s=`${a} ${s.join(" ")}`:s=`${s.join(", ")}`,`${t}(${s})`}function h9(e){e=Qc(e);const{values:t}=e,a=t[0],s=t[1]/100,r=t[2]/100,i=s*Math.min(r,1-r),l=(d,u=(d+a/30)%12)=>r-i*Math.max(Math.min(u-3,9-u,1),-1);let o="rgb";const c=[Math.round(l(0)*255),Math.round(l(8)*255),Math.round(l(4)*255)];return e.type==="hsla"&&(o+="a",c.push(t[3])),Qw({type:o,values:c})}function NE(e){e=Qc(e);let t=e.type==="hsl"||e.type==="hsla"?Qc(h9(e)).values:e.values;return t=t.map(a=>(e.type!=="color"&&(a/=255),a<=.03928?a/12.92:((a+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function Roe(e,t){const a=NE(e),s=NE(t);return(Math.max(a,s)+.05)/(Math.min(a,s)+.05)}function g9(e,t){return e=Qc(e),t=nL(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,Qw(e)}function kd(e,t,a){try{return g9(e,t)}catch{return e}}function Kw(e,t){if(e=Qc(e),t=nL(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let a=0;a<3;a+=1)e.values[a]*=1-t;return Qw(e)}function Tn(e,t,a){try{return Kw(e,t)}catch{return e}}function Xw(e,t){if(e=Qc(e),t=nL(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let a=0;a<3;a+=1)e.values[a]+=(255-e.values[a])*t;else if(e.type.includes("color"))for(let a=0;a<3;a+=1)e.values[a]+=(1-e.values[a])*t;return Qw(e)}function kn(e,t,a){try{return Xw(e,t)}catch{return e}}function zoe(e,t=.15){return NE(e)>.5?Kw(e,t):Xw(e,t)}function Ny(e,t,a){try{return zoe(e,t)}catch{return e}}const Foe=h.createContext(),ix=()=>h.useContext(Foe)??!1,Uoe=h.createContext(void 0);function Boe(e){const{theme:t,name:a,props:s}=e;if(!t||!t.components||!t.components[a])return s;const r=t.components[a];return r.defaultProps?xu(r.defaultProps,s,t.components.mergeClassNameAndStyle):!r.styleOverrides&&!r.variants?xu(r,s,t.components.mergeClassNameAndStyle):s}function Hoe({props:e,name:t}){const a=h.useContext(Uoe);return Boe({props:e,name:t,theme:{components:a}})}let kI=0;function Goe(e){const[t,a]=h.useState(e),s=e||t;return h.useEffect(()=>{t==null&&(kI+=1,a(`mui-${kI}`))},[t]),s}const Woe={...uu},LI=Woe.useId;function Zw(e){if(LI!==void 0){const t=LI();return e??t}return Goe(e)}const PI={theme:void 0};function Voe(e){let t,a;return function(r){let i=t;return(i===void 0||r.theme!==a)&&(PI.theme=r.theme,i=c9(e(PI)),t=i,a=r.theme),i}}function qoe(e=""){function t(...s){if(!s.length)return"";const r=s[0];return typeof r=="string"&&!r.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${r}${t(...s.slice(1))})`:`, ${r}`}return(s,...r)=>`var(--${e?`${e}-`:""}${s}${t(...r)})`}const DI=(e,t,a,s=[])=>{let r=e;t.forEach((i,l)=>{l===t.length-1?Array.isArray(r)?r[Number(i)]=a:r&&typeof r=="object"&&(r[i]=a):r&&typeof r=="object"&&(r[i]||(r[i]=s.includes(i)?[]:{}),r=r[i])})},Yoe=(e,t,a)=>{function s(r,i=[],l=[]){Object.entries(r).forEach(([o,c])=>{(!a||a&&!a([...i,o]))&&c!=null&&(typeof c=="object"&&Object.keys(c).length>0?s(c,[...i,o],Array.isArray(c)?[...l,o]:l):t([...i,o],c,l))})}s(e)},Qoe=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(s=>e.includes(s))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function CS(e,t){const{prefix:a,shouldSkipGeneratingVar:s}=t||{},r={},i={},l={};return Yoe(e,(o,c,d)=>{if((typeof c=="string"||typeof c=="number")&&(!s||!s(o,c))){const u=`--${a?`${a}-`:""}${o.join("-")}`,f=Qoe(o,c);Object.assign(r,{[u]:f}),DI(i,o,`var(${u})`,d),DI(l,o,`var(${u}, ${f})`,d)}},o=>o[0]==="vars"),{css:r,vars:i,varsWithDefaults:l}}function Koe(e,t={}){const{getSelector:a=C,disableCssColorScheme:s,colorSchemeSelector:r,enableContrastVars:i}=t,{colorSchemes:l={},components:o,defaultColorScheme:c="light",...d}=e,{vars:u,css:f,varsWithDefaults:p}=CS(d,t);let x=p;const y={},{[c]:w,...v}=l;if(Object.entries(v||{}).forEach(([T,k])=>{const{vars:_,css:E,varsWithDefaults:A}=CS(k,t);x=kr(x,A),y[T]={css:E,vars:_}}),w){const{css:T,vars:k,varsWithDefaults:_}=CS(w,t);x=kr(x,_),y[c]={css:T,vars:k}}function C(T,k){let _=r;if(r==="class"&&(_=".%s"),r==="data"&&(_="[data-%s]"),r?.startsWith("data-")&&!r.includes("%s")&&(_=`[${r}="%s"]`),T){if(_==="media")return e.defaultColorScheme===T?":root":{[`@media (prefers-color-scheme: ${l[T]?.palette?.mode||T})`]:{":root":k}};if(_)return e.defaultColorScheme===T?`:root, ${_.replace("%s",String(T))}`:_.replace("%s",String(T))}return":root"}return{vars:x,generateThemeVars:()=>{let T={...u};return Object.entries(y).forEach(([,{vars:k}])=>{T=kr(T,k)}),T},generateStyleSheets:()=>{const T=[],k=e.defaultColorScheme||"light";function _(I,z){Object.keys(z).length&&T.push(typeof I=="string"?{[I]:{...z}}:I)}_(a(void 0,{...f}),f);const{[k]:E,...A}=y;if(E){const{css:I}=E,z=l[k]?.palette?.mode,F=!s&&z?{colorScheme:z,...I}:{...I};_(a(k,{...F}),F)}return Object.entries(A).forEach(([I,{css:z}])=>{const F=l[I]?.palette?.mode,D=!s&&F?{colorScheme:F,...z}:{...z};_(a(I,{...D}),D)}),i&&T.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),T}}}function Xoe(e){return function(a){return e==="media"?`@media (prefers-color-scheme: ${a})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${a}"] &`:e==="class"?`.${a} &`:e==="data"?`[data-${a}] &`:`${e.replace("%s",a)} &`:"&"}}const rp={black:"#000",white:"#fff"},Zoe={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Sm={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},_m={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},eg={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},Am={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},Em={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Tm={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function p9(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:rp.white,default:rp.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const x9=p9();function y9(){return{text:{primary:rp.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:rp.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const jE=y9();function OI(e,t,a,s){const r=s.light||s,i=s.dark||s*1.5;e[t]||(e.hasOwnProperty(a)?e[t]=e[a]:t==="light"?e.light=Xw(e.main,r):t==="dark"&&(e.dark=Kw(e.main,i)))}function MI(e,t,a,s,r){const i=r.light||r,l=r.dark||r*1.5;t[a]||(t.hasOwnProperty(s)?t[a]=t[s]:a==="light"?t.light=`color-mix(in ${e}, ${t.main}, #fff ${(i*100).toFixed(0)}%)`:a==="dark"&&(t.dark=`color-mix(in ${e}, ${t.main}, #000 ${(l*100).toFixed(0)}%)`))}function Joe(e="light"){return e==="dark"?{main:Am[200],light:Am[50],dark:Am[400]}:{main:Am[700],light:Am[400],dark:Am[800]}}function ece(e="light"){return e==="dark"?{main:Sm[200],light:Sm[50],dark:Sm[400]}:{main:Sm[500],light:Sm[300],dark:Sm[700]}}function tce(e="light"){return e==="dark"?{main:_m[500],light:_m[300],dark:_m[700]}:{main:_m[700],light:_m[400],dark:_m[800]}}function nce(e="light"){return e==="dark"?{main:Em[400],light:Em[300],dark:Em[700]}:{main:Em[700],light:Em[500],dark:Em[900]}}function ace(e="light"){return e==="dark"?{main:Tm[400],light:Tm[300],dark:Tm[700]}:{main:Tm[800],light:Tm[500],dark:Tm[900]}}function sce(e="light"){return e==="dark"?{main:eg[400],light:eg[300],dark:eg[700]}:{main:"#ed6c02",light:eg[500],dark:eg[900]}}function rce(e){return`oklch(from ${e} var(--__l) 0 h / var(--__a))`}function aL(e){const{mode:t="light",contrastThreshold:a=3,tonalOffset:s=.2,colorSpace:r,...i}=e,l=e.primary||Joe(t),o=e.secondary||ece(t),c=e.error||tce(t),d=e.info||nce(t),u=e.success||ace(t),f=e.warning||sce(t);function p(v){return r?rce(v):Roe(v,jE.text.primary)>=a?jE.text.primary:x9.text.primary}const x=({color:v,name:C,mainShade:N=500,lightShade:S=300,darkShade:T=700})=>{if(v={...v},!v.main&&v[N]&&(v.main=v[N]),!v.hasOwnProperty("main"))throw new Error(pu(11,C?` (${C})`:"",N));if(typeof v.main!="string")throw new Error(pu(12,C?` (${C})`:"",JSON.stringify(v.main)));return r?(MI(r,v,"light",S,s),MI(r,v,"dark",T,s)):(OI(v,"light",S,s),OI(v,"dark",T,s)),v.contrastText||(v.contrastText=p(v.main)),v};let y;return t==="light"?y=p9():t==="dark"&&(y=y9()),kr({common:{...rp},mode:t,primary:x({color:l,name:"primary"}),secondary:x({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:x({color:c,name:"error"}),warning:x({color:f,name:"warning"}),info:x({color:d,name:"info"}),success:x({color:u,name:"success"}),grey:Zoe,contrastThreshold:a,getContrastText:p,augmentColor:x,tonalOffset:s,...y},i)}function ice(e){const t={};return Object.entries(e).forEach(s=>{const[r,i]=s;typeof i=="object"&&(t[r]=`${i.fontStyle?`${i.fontStyle} `:""}${i.fontVariant?`${i.fontVariant} `:""}${i.fontWeight?`${i.fontWeight} `:""}${i.fontStretch?`${i.fontStretch} `:""}${i.fontSize||""}${i.lineHeight?`/${i.lineHeight} `:""}${i.fontFamily||""}`)}),t}function lce(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function oce(e){return Math.round(e*1e5)/1e5}const II={textTransform:"uppercase"},$I='"Roboto", "Helvetica", "Arial", sans-serif';function cce(e,t){const{fontFamily:a=$I,fontSize:s=14,fontWeightLight:r=300,fontWeightRegular:i=400,fontWeightMedium:l=500,fontWeightBold:o=700,htmlFontSize:c=16,allVariants:d,pxToRem:u,...f}=typeof t=="function"?t(e):t,p=s/14,x=u||(v=>`${v/c*p}rem`),y=(v,C,N,S,T)=>({fontFamily:a,fontWeight:v,fontSize:x(C),lineHeight:N,...a===$I?{letterSpacing:`${oce(S/C)}em`}:{},...T,...d}),w={h1:y(r,96,1.167,-1.5),h2:y(r,60,1.2,-.5),h3:y(i,48,1.167,0),h4:y(i,34,1.235,.25),h5:y(i,24,1.334,0),h6:y(l,20,1.6,.15),subtitle1:y(i,16,1.75,.15),subtitle2:y(l,14,1.57,.1),body1:y(i,16,1.5,.15),body2:y(i,14,1.43,.15),button:y(l,14,1.75,.4,II),caption:y(i,12,1.66,.4),overline:y(i,12,2.66,1,II),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return kr({htmlFontSize:c,pxToRem:x,fontFamily:a,fontSize:s,fontWeightLight:r,fontWeightRegular:i,fontWeightMedium:l,fontWeightBold:o,...w},f,{clone:!1})}const dce=.2,uce=.14,mce=.12;function ea(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${dce})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${uce})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${mce})`].join(",")}const fce=["none",ea(0,2,1,-1,0,1,1,0,0,1,3,0),ea(0,3,1,-2,0,2,2,0,0,1,5,0),ea(0,3,3,-2,0,3,4,0,0,1,8,0),ea(0,2,4,-1,0,4,5,0,0,1,10,0),ea(0,3,5,-1,0,5,8,0,0,1,14,0),ea(0,3,5,-1,0,6,10,0,0,1,18,0),ea(0,4,5,-2,0,7,10,1,0,2,16,1),ea(0,5,5,-3,0,8,10,1,0,3,14,2),ea(0,5,6,-3,0,9,12,1,0,3,16,2),ea(0,6,6,-3,0,10,14,1,0,4,18,3),ea(0,6,7,-4,0,11,15,1,0,4,20,3),ea(0,7,8,-4,0,12,17,2,0,5,22,4),ea(0,7,8,-4,0,13,19,2,0,5,24,4),ea(0,7,9,-4,0,14,21,2,0,5,26,4),ea(0,8,9,-5,0,15,22,2,0,6,28,5),ea(0,8,10,-5,0,16,24,2,0,6,30,5),ea(0,8,11,-5,0,17,26,2,0,6,32,5),ea(0,9,11,-5,0,18,28,2,0,7,34,6),ea(0,9,12,-6,0,19,29,2,0,7,36,6),ea(0,10,13,-6,0,20,31,3,0,8,38,7),ea(0,10,13,-6,0,21,33,3,0,8,40,7),ea(0,10,14,-6,0,22,35,3,0,8,42,7),ea(0,11,14,-7,0,23,36,3,0,9,44,8),ea(0,11,15,-7,0,24,38,3,0,9,46,8)],hce={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},gce={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function RI(e){return`${Math.round(e)}ms`}function pce(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function xce(e){const t={...hce,...e.easing},a={...gce,...e.duration};return{getAutoHeightDuration:pce,create:(r=["all"],i={})=>{const{duration:l=a.standard,easing:o=t.easeInOut,delay:c=0,...d}=i;return(Array.isArray(r)?r:[r]).map(u=>`${u} ${typeof l=="string"?l:RI(l)} ${o} ${typeof c=="string"?c:RI(c)}`).join(",")},...e,easing:t,duration:a}}const yce={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function bce(e){return cl(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function b9(e={}){const t={...e};function a(s){const r=Object.entries(s);for(let i=0;i<r.length;i++){const[l,o]=r[i];!bce(o)||l.startsWith("unstable_")?delete s[l]:cl(o)&&(s[l]={...o},a(s[l]))}}return a(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function zI(e){return typeof e=="number"?`${(e*100).toFixed(0)}%`:`calc((${e}) * 100%)`}const vce=e=>{if(!Number.isNaN(+e))return+e;const t=e.match(/\d*\.?\d+/g);if(!t)return 0;let a=0;for(let s=0;s<t.length;s+=1)a+=+t[s];return a};function wce(e){Object.assign(e,{alpha(t,a){const s=this||e;return s.colorSpace?`oklch(from ${t} l c h / ${typeof a=="string"?`calc(${a})`:a})`:s.vars?`rgba(${t.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")} / ${typeof a=="string"?`calc(${a})`:a})`:g9(t,vce(a))},lighten(t,a){const s=this||e;return s.colorSpace?`color-mix(in ${s.colorSpace}, ${t}, #fff ${zI(a)})`:Xw(t,a)},darken(t,a){const s=this||e;return s.colorSpace?`color-mix(in ${s.colorSpace}, ${t}, #000 ${zI(a)})`:Kw(t,a)}})}function CE(e={},...t){const{breakpoints:a,mixins:s={},spacing:r,palette:i={},transitions:l={},typography:o={},shape:c,colorSpace:d,...u}=e;if(e.vars&&e.generateThemeVars===void 0)throw new Error(pu(20));const f=aL({...i,colorSpace:d}),p=tL(e);let x=kr(p,{mixins:lce(p.breakpoints,s),palette:f,shadows:fce.slice(),typography:cce(f,o),transitions:xce(l),zIndex:{...yce}});return x=kr(x,u),x=t.reduce((y,w)=>kr(y,w),x),x.unstable_sxConfig={...ax,...u?.unstable_sxConfig},x.unstable_sx=function(w){return ff({sx:w,theme:this})},x.toRuntimeSource=b9,wce(x),x}function Nce(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const jce=[...Array(25)].map((e,t)=>{if(t===0)return"none";const a=Nce(t);return`linear-gradient(rgba(255 255 255 / ${a}), rgba(255 255 255 / ${a}))`});function v9(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function w9(e){return e==="dark"?jce:[]}function Cce(e){const{palette:t={mode:"light"},opacity:a,overlays:s,colorSpace:r,...i}=e,l=aL({...t,colorSpace:r});return{palette:l,opacity:{...v9(l.mode),...a},overlays:s||w9(l.mode),...i}}function Sce(e){return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!e[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const _ce=e=>[...[...Array(25)].map((t,a)=>`--${e?`${e}-`:""}overlays-${a}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],Ace=e=>(t,a)=>{const s=e.rootSelector||":root",r=e.colorSchemeSelector;let i=r;if(r==="class"&&(i=".%s"),r==="data"&&(i="[data-%s]"),r?.startsWith("data-")&&!r.includes("%s")&&(i=`[${r}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const l={};return _ce(e.cssVarPrefix).forEach(o=>{l[o]=a[o],delete a[o]}),i==="media"?{[s]:a,"@media (prefers-color-scheme: dark)":{[s]:l}}:i?{[i.replace("%s",t)]:l,[`${s}, ${i.replace("%s",t)}`]:a}:{[s]:{...a,...l}}}if(i&&i!=="media")return`${s}, ${i.replace("%s",String(t))}`}else if(t){if(i==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[s]:a}};if(i)return i.replace("%s",String(t))}return s};function Ece(e,t){t.forEach(a=>{e[a]||(e[a]={})})}function ut(e,t,a){!e[t]&&a&&(e[t]=a)}function Ag(e){return typeof e!="string"||!e.startsWith("hsl")?e:h9(e)}function Zl(e,t){`${t}Channel`in e||(e[`${t}Channel`]=_g(Ag(e[t])))}function Tce(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const Xi=e=>{try{return e()}catch{}},kce=(e="mui")=>qoe(e);function SS(e,t,a,s,r){if(!a)return;a=a===!0?{}:a;const i=r==="dark"?"dark":"light";if(!s){t[r]=Cce({...a,palette:{mode:i,...a?.palette},colorSpace:e});return}const{palette:l,...o}=CE({...s,palette:{mode:i,...a?.palette},colorSpace:e});return t[r]={...a,palette:l,opacity:{...v9(i),...a?.opacity},overlays:a?.overlays||w9(i)},o}function Lce(e={},...t){const{colorSchemes:a={light:!0},defaultColorScheme:s,disableCssColorScheme:r=!1,cssVarPrefix:i="mui",nativeColor:l=!1,shouldSkipGeneratingVar:o=Sce,colorSchemeSelector:c=a.light&&a.dark?"media":void 0,rootSelector:d=":root",...u}=e,f=Object.keys(a)[0],p=s||(a.light&&f!=="light"?"light":f),x=kce(i),{[p]:y,light:w,dark:v,...C}=a,N={...C};let S=y;if((p==="dark"&&!("dark"in a)||p==="light"&&!("light"in a))&&(S=!0),!S)throw new Error(pu(21,p));let T;l&&(T="oklch");const k=SS(T,N,S,u,p);w&&!N.light&&SS(T,N,w,void 0,"light"),v&&!N.dark&&SS(T,N,v,void 0,"dark");let _={defaultColorScheme:p,...k,cssVarPrefix:i,colorSchemeSelector:c,rootSelector:d,getCssVar:x,colorSchemes:N,font:{...ice(k.typography),...k.font},spacing:Tce(u.spacing)};Object.keys(_.colorSchemes).forEach(F=>{const D=_.colorSchemes[F].palette,M=Z=>{const R=Z.split("-"),Q=R[1],Y=R[2];return x(Z,D[Q][Y])};D.mode==="light"&&(ut(D.common,"background","#fff"),ut(D.common,"onBackground","#000")),D.mode==="dark"&&(ut(D.common,"background","#000"),ut(D.common,"onBackground","#fff"));function W(Z,R,Q){if(T){let Y;return Z===kd&&(Y=`transparent ${((1-Q)*100).toFixed(0)}%`),Z===Tn&&(Y=`#000 ${(Q*100).toFixed(0)}%`),Z===kn&&(Y=`#fff ${(Q*100).toFixed(0)}%`),`color-mix(in ${T}, ${R}, ${Y})`}return Z(R,Q)}if(Ece(D,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),D.mode==="light"){ut(D.Alert,"errorColor",W(Tn,D.error.light,.6)),ut(D.Alert,"infoColor",W(Tn,D.info.light,.6)),ut(D.Alert,"successColor",W(Tn,D.success.light,.6)),ut(D.Alert,"warningColor",W(Tn,D.warning.light,.6)),ut(D.Alert,"errorFilledBg",M("palette-error-main")),ut(D.Alert,"infoFilledBg",M("palette-info-main")),ut(D.Alert,"successFilledBg",M("palette-success-main")),ut(D.Alert,"warningFilledBg",M("palette-warning-main")),ut(D.Alert,"errorFilledColor",Xi(()=>D.getContrastText(D.error.main))),ut(D.Alert,"infoFilledColor",Xi(()=>D.getContrastText(D.info.main))),ut(D.Alert,"successFilledColor",Xi(()=>D.getContrastText(D.success.main))),ut(D.Alert,"warningFilledColor",Xi(()=>D.getContrastText(D.warning.main))),ut(D.Alert,"errorStandardBg",W(kn,D.error.light,.9)),ut(D.Alert,"infoStandardBg",W(kn,D.info.light,.9)),ut(D.Alert,"successStandardBg",W(kn,D.success.light,.9)),ut(D.Alert,"warningStandardBg",W(kn,D.warning.light,.9)),ut(D.Alert,"errorIconColor",M("palette-error-main")),ut(D.Alert,"infoIconColor",M("palette-info-main")),ut(D.Alert,"successIconColor",M("palette-success-main")),ut(D.Alert,"warningIconColor",M("palette-warning-main")),ut(D.AppBar,"defaultBg",M("palette-grey-100")),ut(D.Avatar,"defaultBg",M("palette-grey-400")),ut(D.Button,"inheritContainedBg",M("palette-grey-300")),ut(D.Button,"inheritContainedHoverBg",M("palette-grey-A100")),ut(D.Chip,"defaultBorder",M("palette-grey-400")),ut(D.Chip,"defaultAvatarColor",M("palette-grey-700")),ut(D.Chip,"defaultIconColor",M("palette-grey-700")),ut(D.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),ut(D.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),ut(D.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),ut(D.LinearProgress,"primaryBg",W(kn,D.primary.main,.62)),ut(D.LinearProgress,"secondaryBg",W(kn,D.secondary.main,.62)),ut(D.LinearProgress,"errorBg",W(kn,D.error.main,.62)),ut(D.LinearProgress,"infoBg",W(kn,D.info.main,.62)),ut(D.LinearProgress,"successBg",W(kn,D.success.main,.62)),ut(D.LinearProgress,"warningBg",W(kn,D.warning.main,.62)),ut(D.Skeleton,"bg",T?W(kd,D.text.primary,.11):`rgba(${M("palette-text-primaryChannel")} / 0.11)`),ut(D.Slider,"primaryTrack",W(kn,D.primary.main,.62)),ut(D.Slider,"secondaryTrack",W(kn,D.secondary.main,.62)),ut(D.Slider,"errorTrack",W(kn,D.error.main,.62)),ut(D.Slider,"infoTrack",W(kn,D.info.main,.62)),ut(D.Slider,"successTrack",W(kn,D.success.main,.62)),ut(D.Slider,"warningTrack",W(kn,D.warning.main,.62));const Z=T?W(Tn,D.background.default,.6825):Ny(D.background.default,.8);ut(D.SnackbarContent,"bg",Z),ut(D.SnackbarContent,"color",Xi(()=>T?jE.text.primary:D.getContrastText(Z))),ut(D.SpeedDialAction,"fabHoverBg",Ny(D.background.paper,.15)),ut(D.StepConnector,"border",M("palette-grey-400")),ut(D.StepContent,"border",M("palette-grey-400")),ut(D.Switch,"defaultColor",M("palette-common-white")),ut(D.Switch,"defaultDisabledColor",M("palette-grey-100")),ut(D.Switch,"primaryDisabledColor",W(kn,D.primary.main,.62)),ut(D.Switch,"secondaryDisabledColor",W(kn,D.secondary.main,.62)),ut(D.Switch,"errorDisabledColor",W(kn,D.error.main,.62)),ut(D.Switch,"infoDisabledColor",W(kn,D.info.main,.62)),ut(D.Switch,"successDisabledColor",W(kn,D.success.main,.62)),ut(D.Switch,"warningDisabledColor",W(kn,D.warning.main,.62)),ut(D.TableCell,"border",W(kn,W(kd,D.divider,1),.88)),ut(D.Tooltip,"bg",W(kd,D.grey[700],.92))}if(D.mode==="dark"){ut(D.Alert,"errorColor",W(kn,D.error.light,.6)),ut(D.Alert,"infoColor",W(kn,D.info.light,.6)),ut(D.Alert,"successColor",W(kn,D.success.light,.6)),ut(D.Alert,"warningColor",W(kn,D.warning.light,.6)),ut(D.Alert,"errorFilledBg",M("palette-error-dark")),ut(D.Alert,"infoFilledBg",M("palette-info-dark")),ut(D.Alert,"successFilledBg",M("palette-success-dark")),ut(D.Alert,"warningFilledBg",M("palette-warning-dark")),ut(D.Alert,"errorFilledColor",Xi(()=>D.getContrastText(D.error.dark))),ut(D.Alert,"infoFilledColor",Xi(()=>D.getContrastText(D.info.dark))),ut(D.Alert,"successFilledColor",Xi(()=>D.getContrastText(D.success.dark))),ut(D.Alert,"warningFilledColor",Xi(()=>D.getContrastText(D.warning.dark))),ut(D.Alert,"errorStandardBg",W(Tn,D.error.light,.9)),ut(D.Alert,"infoStandardBg",W(Tn,D.info.light,.9)),ut(D.Alert,"successStandardBg",W(Tn,D.success.light,.9)),ut(D.Alert,"warningStandardBg",W(Tn,D.warning.light,.9)),ut(D.Alert,"errorIconColor",M("palette-error-main")),ut(D.Alert,"infoIconColor",M("palette-info-main")),ut(D.Alert,"successIconColor",M("palette-success-main")),ut(D.Alert,"warningIconColor",M("palette-warning-main")),ut(D.AppBar,"defaultBg",M("palette-grey-900")),ut(D.AppBar,"darkBg",M("palette-background-paper")),ut(D.AppBar,"darkColor",M("palette-text-primary")),ut(D.Avatar,"defaultBg",M("palette-grey-600")),ut(D.Button,"inheritContainedBg",M("palette-grey-800")),ut(D.Button,"inheritContainedHoverBg",M("palette-grey-700")),ut(D.Chip,"defaultBorder",M("palette-grey-700")),ut(D.Chip,"defaultAvatarColor",M("palette-grey-300")),ut(D.Chip,"defaultIconColor",M("palette-grey-300")),ut(D.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),ut(D.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),ut(D.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),ut(D.LinearProgress,"primaryBg",W(Tn,D.primary.main,.5)),ut(D.LinearProgress,"secondaryBg",W(Tn,D.secondary.main,.5)),ut(D.LinearProgress,"errorBg",W(Tn,D.error.main,.5)),ut(D.LinearProgress,"infoBg",W(Tn,D.info.main,.5)),ut(D.LinearProgress,"successBg",W(Tn,D.success.main,.5)),ut(D.LinearProgress,"warningBg",W(Tn,D.warning.main,.5)),ut(D.Skeleton,"bg",T?W(kd,D.text.primary,.13):`rgba(${M("palette-text-primaryChannel")} / 0.13)`),ut(D.Slider,"primaryTrack",W(Tn,D.primary.main,.5)),ut(D.Slider,"secondaryTrack",W(Tn,D.secondary.main,.5)),ut(D.Slider,"errorTrack",W(Tn,D.error.main,.5)),ut(D.Slider,"infoTrack",W(Tn,D.info.main,.5)),ut(D.Slider,"successTrack",W(Tn,D.success.main,.5)),ut(D.Slider,"warningTrack",W(Tn,D.warning.main,.5));const Z=T?W(kn,D.background.default,.985):Ny(D.background.default,.98);ut(D.SnackbarContent,"bg",Z),ut(D.SnackbarContent,"color",Xi(()=>T?x9.text.primary:D.getContrastText(Z))),ut(D.SpeedDialAction,"fabHoverBg",Ny(D.background.paper,.15)),ut(D.StepConnector,"border",M("palette-grey-600")),ut(D.StepContent,"border",M("palette-grey-600")),ut(D.Switch,"defaultColor",M("palette-grey-300")),ut(D.Switch,"defaultDisabledColor",M("palette-grey-600")),ut(D.Switch,"primaryDisabledColor",W(Tn,D.primary.main,.55)),ut(D.Switch,"secondaryDisabledColor",W(Tn,D.secondary.main,.55)),ut(D.Switch,"errorDisabledColor",W(Tn,D.error.main,.55)),ut(D.Switch,"infoDisabledColor",W(Tn,D.info.main,.55)),ut(D.Switch,"successDisabledColor",W(Tn,D.success.main,.55)),ut(D.Switch,"warningDisabledColor",W(Tn,D.warning.main,.55)),ut(D.TableCell,"border",W(Tn,W(kd,D.divider,1),.68)),ut(D.Tooltip,"bg",W(kd,D.grey[700],.92))}Zl(D.background,"default"),Zl(D.background,"paper"),Zl(D.common,"background"),Zl(D.common,"onBackground"),Zl(D,"divider"),Object.keys(D).forEach(Z=>{const R=D[Z];Z!=="tonalOffset"&&R&&typeof R=="object"&&(R.main&&ut(D[Z],"mainChannel",_g(Ag(R.main))),R.light&&ut(D[Z],"lightChannel",_g(Ag(R.light))),R.dark&&ut(D[Z],"darkChannel",_g(Ag(R.dark))),R.contrastText&&ut(D[Z],"contrastTextChannel",_g(Ag(R.contrastText))),Z==="text"&&(Zl(D[Z],"primary"),Zl(D[Z],"secondary")),Z==="action"&&(R.active&&Zl(D[Z],"active"),R.selected&&Zl(D[Z],"selected")))})}),_=t.reduce((F,D)=>kr(F,D),_);const E={prefix:i,disableCssColorScheme:r,shouldSkipGeneratingVar:o,getSelector:Ace(_),enableContrastVars:l},{vars:A,generateThemeVars:I,generateStyleSheets:z}=Koe(_,E);return _.vars=A,Object.entries(_.colorSchemes[_.defaultColorScheme]).forEach(([F,D])=>{_[F]=D}),_.generateThemeVars=I,_.generateStyleSheets=z,_.generateSpacing=function(){return i9(u.spacing,Vk(this))},_.getColorSchemeSelector=Xoe(c),_.spacing=_.generateSpacing(),_.shouldSkipGeneratingVar=o,_.unstable_sxConfig={...ax,...u?.unstable_sxConfig},_.unstable_sx=function(D){return ff({sx:D,theme:this})},_.toRuntimeSource=b9,_}function FI(e,t,a){e.colorSchemes&&a&&(e.colorSchemes[t]={...a!==!0&&a,palette:aL({...a===!0?{}:a.palette,mode:t})})}function Pce(e={},...t){const{palette:a,cssVariables:s=!1,colorSchemes:r=a?void 0:{light:!0},defaultColorScheme:i=a?.mode,...l}=e,o=i||"light",c=r?.[o],d={...r,...a?{[o]:{...typeof c!="boolean"&&c,palette:a}}:void 0};if(s===!1){if(!("colorSchemes"in e))return CE(e,...t);let u=a;"palette"in e||d[o]&&(d[o]!==!0?u=d[o].palette:o==="dark"&&(u={mode:"dark"}));const f=CE({...e,palette:u},...t);return f.defaultColorScheme=o,f.colorSchemes=d,f.palette.mode==="light"&&(f.colorSchemes.light={...d.light!==!0&&d.light,palette:f.palette},FI(f,"dark",d.dark)),f.palette.mode==="dark"&&(f.colorSchemes.dark={...d.dark!==!0&&d.dark,palette:f.palette},FI(f,"light",d.light)),f}return!a&&!("light"in d)&&o==="light"&&(d.light=!0),Lce({...l,colorSchemes:d,defaultColorScheme:o,...typeof s!="boolean"&&s},...t)}const sL=Pce(),Jw="$$material";function kl(){const e=o9(sL);return e[Jw]||e}function Dce(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const N9=e=>Dce(e)&&e!=="classes",an=_oe({themeId:Jw,defaultTheme:sL,rootShouldForwardProp:N9});function Oce(){return hle}function rd(e){return Hoe(e)}function Cl(...e){const t=h.useRef(void 0),a=h.useCallback(s=>{const r=e.map(i=>{if(i==null)return null;if(typeof i=="function"){const l=i,o=l(s);return typeof o=="function"?o:()=>{l(null)}}return i.current=s,()=>{i.current=null}});return()=>{r.forEach(i=>i?.())}},e);return h.useMemo(()=>e.every(s=>s==null)?null:s=>{t.current&&(t.current(),t.current=void 0),s!=null&&(t.current=a(s))},e)}function Mce(e){return typeof e=="string"}function j9(e,t,a){return e===void 0||Mce(e)?t:{...t,ownerState:{...t.ownerState,...a}}}function C9(e,t,a){return typeof e=="function"?e(t,a):e}function Ice(e,t=[]){if(e===void 0)return{};const a={};return Object.keys(e).filter(s=>s.match(/^on[A-Z]/)&&typeof e[s]=="function"&&!t.includes(s)).forEach(s=>{a[s]=e[s]}),a}function UI(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(a=>!(a.match(/^on[A-Z]/)&&typeof e[a]=="function")).forEach(a=>{t[a]=e[a]}),t}function S9(e){const{getSlotProps:t,additionalProps:a,externalSlotProps:s,externalForwardedProps:r,className:i}=e;if(!t){const x=Tt(a?.className,i,r?.className,s?.className),y={...a?.style,...r?.style,...s?.style},w={...a,...r,...s};return x.length>0&&(w.className=x),Object.keys(y).length>0&&(w.style=y),{props:w,internalRef:void 0}}const l=Ice({...r,...s}),o=UI(s),c=UI(r),d=t(l),u=Tt(d?.className,a?.className,i,r?.className,s?.className),f={...d?.style,...a?.style,...r?.style,...s?.style},p={...d,...a,...c,...o};return u.length>0&&(p.className=u),Object.keys(f).length>0&&(p.style=f),{props:p,internalRef:d.ref}}function BI(e,t){const{className:a,elementType:s,ownerState:r,externalForwardedProps:i,internalForwardedProps:l,shouldForwardComponentProp:o=!1,...c}=t,{component:d,slots:u={[e]:void 0},slotProps:f={[e]:void 0},...p}=i,x=u[e]||s,y=C9(f[e],r),{props:{component:w,...v},internalRef:C}=S9({className:a,...c,externalForwardedProps:e==="root"?p:void 0,externalSlotProps:y}),N=Cl(C,y?.ref,t.ref),S=e==="root"?w||d:w,T=j9(x,{...e==="root"&&!d&&!u[e]&&l,...e!=="root"&&!u[e]&&l,...v,...S&&!o&&{as:S},...S&&o&&{component:S},ref:N},r);return[x,T]}function cn(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function SE(e,t){return SE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},SE(e,t)}function _9(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,SE(e,t)}const HI={disabled:!1},tv=pt.createContext(null);var $ce=function(t){return t.scrollTop},Eg="unmounted",Md="exited",Id="entering",qm="entered",_E="exiting",Fo=(function(e){_9(t,e);function t(s,r){var i;i=e.call(this,s,r)||this;var l=r,o=l&&!l.isMounting?s.enter:s.appear,c;return i.appearStatus=null,s.in?o?(c=Md,i.appearStatus=Id):c=qm:s.unmountOnExit||s.mountOnEnter?c=Eg:c=Md,i.state={status:c},i.nextCallback=null,i}t.getDerivedStateFromProps=function(r,i){var l=r.in;return l&&i.status===Eg?{status:Md}:null};var a=t.prototype;return a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(r){var i=null;if(r!==this.props){var l=this.state.status;this.props.in?l!==Id&&l!==qm&&(i=Id):(l===Id||l===qm)&&(i=_E)}this.updateStatus(!1,i)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var r=this.props.timeout,i,l,o;return i=l=o=r,r!=null&&typeof r!="number"&&(i=r.exit,l=r.enter,o=r.appear!==void 0?r.appear:l),{exit:i,enter:l,appear:o}},a.updateStatus=function(r,i){if(r===void 0&&(r=!1),i!==null)if(this.cancelNextCallback(),i===Id){if(this.props.unmountOnExit||this.props.mountOnEnter){var l=this.props.nodeRef?this.props.nodeRef.current:yy.findDOMNode(this);l&&$ce(l)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Md&&this.setState({status:Eg})},a.performEnter=function(r){var i=this,l=this.props.enter,o=this.context?this.context.isMounting:r,c=this.props.nodeRef?[o]:[yy.findDOMNode(this),o],d=c[0],u=c[1],f=this.getTimeouts(),p=o?f.appear:f.enter;if(!r&&!l||HI.disabled){this.safeSetState({status:qm},function(){i.props.onEntered(d)});return}this.props.onEnter(d,u),this.safeSetState({status:Id},function(){i.props.onEntering(d,u),i.onTransitionEnd(p,function(){i.safeSetState({status:qm},function(){i.props.onEntered(d,u)})})})},a.performExit=function(){var r=this,i=this.props.exit,l=this.getTimeouts(),o=this.props.nodeRef?void 0:yy.findDOMNode(this);if(!i||HI.disabled){this.safeSetState({status:Md},function(){r.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:_E},function(){r.props.onExiting(o),r.onTransitionEnd(l.exit,function(){r.safeSetState({status:Md},function(){r.props.onExited(o)})})})},a.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(r,i){i=this.setNextCallback(i),this.setState(r,i)},a.setNextCallback=function(r){var i=this,l=!0;return this.nextCallback=function(o){l&&(l=!1,i.nextCallback=null,r(o))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},a.onTransitionEnd=function(r,i){this.setNextCallback(i);var l=this.props.nodeRef?this.props.nodeRef.current:yy.findDOMNode(this),o=r==null&&!this.props.addEndListener;if(!l||o){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var c=this.props.nodeRef?[this.nextCallback]:[l,this.nextCallback],d=c[0],u=c[1];this.props.addEndListener(d,u)}r!=null&&setTimeout(this.nextCallback,r)},a.render=function(){var r=this.state.status;if(r===Eg)return null;var i=this.props,l=i.children;i.in,i.mountOnEnter,i.unmountOnExit,i.appear,i.enter,i.exit,i.timeout,i.addEndListener,i.onEnter,i.onEntering,i.onEntered,i.onExit,i.onExiting,i.onExited,i.nodeRef;var o=cn(i,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return pt.createElement(tv.Provider,{value:null},typeof l=="function"?l(r,o):pt.cloneElement(pt.Children.only(l),o))},t})(pt.Component);Fo.contextType=tv;Fo.propTypes={};function km(){}Fo.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:km,onEntering:km,onEntered:km,onExit:km,onExiting:km,onExited:km};Fo.UNMOUNTED=Eg;Fo.EXITED=Md;Fo.ENTERING=Id;Fo.ENTERED=qm;Fo.EXITING=_E;function Rce(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rL(e,t){var a=function(i){return t&&h.isValidElement(i)?t(i):i},s=Object.create(null);return e&&h.Children.map(e,function(r){return r}).forEach(function(r){s[r.key]=a(r)}),s}function zce(e,t){e=e||{},t=t||{};function a(u){return u in t?t[u]:e[u]}var s=Object.create(null),r=[];for(var i in e)i in t?r.length&&(s[i]=r,r=[]):r.push(i);var l,o={};for(var c in t){if(s[c])for(l=0;l<s[c].length;l++){var d=s[c][l];o[s[c][l]]=a(d)}o[c]=a(c)}for(l=0;l<r.length;l++)o[r[l]]=a(r[l]);return o}function Yd(e,t,a){return a[t]!=null?a[t]:e.props[t]}function Fce(e,t){return rL(e.children,function(a){return h.cloneElement(a,{onExited:t.bind(null,a),in:!0,appear:Yd(a,"appear",e),enter:Yd(a,"enter",e),exit:Yd(a,"exit",e)})})}function Uce(e,t,a){var s=rL(e.children),r=zce(t,s);return Object.keys(r).forEach(function(i){var l=r[i];if(h.isValidElement(l)){var o=i in t,c=i in s,d=t[i],u=h.isValidElement(d)&&!d.props.in;c&&(!o||u)?r[i]=h.cloneElement(l,{onExited:a.bind(null,l),in:!0,exit:Yd(l,"exit",e),enter:Yd(l,"enter",e)}):!c&&o&&!u?r[i]=h.cloneElement(l,{in:!1}):c&&o&&h.isValidElement(d)&&(r[i]=h.cloneElement(l,{onExited:a.bind(null,l),in:d.props.in,exit:Yd(l,"exit",e),enter:Yd(l,"enter",e)}))}}),r}var Bce=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},Hce={component:"div",childFactory:function(t){return t}},iL=(function(e){_9(t,e);function t(s,r){var i;i=e.call(this,s,r)||this;var l=i.handleExited.bind(Rce(i));return i.state={contextValue:{isMounting:!0},handleExited:l,firstRender:!0},i}var a=t.prototype;return a.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},a.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(r,i){var l=i.children,o=i.handleExited,c=i.firstRender;return{children:c?Fce(r,o):Uce(r,l,o),firstRender:!1}},a.handleExited=function(r,i){var l=rL(this.props.children);r.key in l||(r.props.onExited&&r.props.onExited(i),this.mounted&&this.setState(function(o){var c=Ve({},o.children);return delete c[r.key],{children:c}}))},a.render=function(){var r=this.props,i=r.component,l=r.childFactory,o=cn(r,["component","childFactory"]),c=this.state.contextValue,d=Bce(this.state.children).map(l);return delete o.appear,delete o.enter,delete o.exit,i===null?pt.createElement(tv.Provider,{value:c},d):pt.createElement(tv.Provider,{value:c},pt.createElement(i,o,d))},t})(pt.Component);iL.propTypes={};iL.defaultProps=Hce;function A9(e){return parseInt(h.version,10)>=19?e?.props?.ref||null:e?.ref||null}const Gce=e=>e.scrollTop;function GI(e,t){const{timeout:a,easing:s,style:r={}}=e;return{duration:r.transitionDuration??(typeof a=="number"?a:a[t.mode]||0),easing:r.transitionTimingFunction??(typeof s=="object"?s[t.mode]:s),delay:r.transitionDelay}}const Wce={entering:{opacity:1},entered:{opacity:1}},Vce=h.forwardRef(function(t,a){const s=kl(),r={enter:s.transitions.duration.enteringScreen,exit:s.transitions.duration.leavingScreen},{addEndListener:i,appear:l=!0,children:o,easing:c,in:d,onEnter:u,onEntered:f,onEntering:p,onExit:x,onExited:y,onExiting:w,style:v,timeout:C=r,TransitionComponent:N=Fo,...S}=t,T=h.useRef(null),k=Cl(T,A9(o),a),_=W=>Z=>{if(W){const R=T.current;Z===void 0?W(R):W(R,Z)}},E=_(p),A=_((W,Z)=>{Gce(W);const R=GI({style:v,timeout:C,easing:c},{mode:"enter"});W.style.webkitTransition=s.transitions.create("opacity",R),W.style.transition=s.transitions.create("opacity",R),u&&u(W,Z)}),I=_(f),z=_(w),F=_(W=>{const Z=GI({style:v,timeout:C,easing:c},{mode:"exit"});W.style.webkitTransition=s.transitions.create("opacity",Z),W.style.transition=s.transitions.create("opacity",Z),x&&x(W)}),D=_(y),M=W=>{i&&i(T.current,W)};return n.jsx(N,{appear:l,in:d,nodeRef:T,onEnter:A,onEntered:I,onEntering:E,onExit:F,onExited:D,onExiting:z,addEndListener:M,timeout:C,...S,children:(W,{ownerState:Z,...R})=>h.cloneElement(o,{style:{opacity:0,visibility:W==="exited"&&!d?"hidden":void 0,...Wce[W],...v,...o.props.style},ref:k,...R})})});function qce(e){return Ra("MuiBackdrop",e)}va("MuiBackdrop",["root","invisible"]);const Yce=e=>{const{classes:t,invisible:a}=e;return $a({root:["root",a&&"invisible"]},qce,t)},Qce=an("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),Kce=h.forwardRef(function(t,a){const s=rd({props:t,name:"MuiBackdrop"}),{children:r,className:i,component:l="div",invisible:o=!1,open:c,components:d={},componentsProps:u={},slotProps:f={},slots:p={},TransitionComponent:x,transitionDuration:y,...w}=s,v={...s,component:l,invisible:o},C=Yce(v),N={transition:x,root:d.Root,...p},S={...u,...f},T={component:l,slots:N,slotProps:S},[k,_]=BI("root",{elementType:Qce,externalForwardedProps:T,className:Tt(C.root,i),ownerState:v}),[E,A]=BI("transition",{elementType:Vce,externalForwardedProps:T,ownerState:v});return n.jsx(E,{in:c,timeout:y,...w,...A,children:n.jsx(k,{"aria-hidden":!0,..._,classes:C,ref:a,children:r})})}),yu=Voe;function Xce(e){return typeof e.main=="string"}function Zce(e,t=[]){if(!Xce(e))return!1;for(const a of t)if(!e.hasOwnProperty(a)||typeof e[a]!="string")return!1;return!0}function ip(e=[]){return([,t])=>t&&Zce(t,e)}function Jce(e){return Ra("MuiCircularProgress",e)}va("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","track","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Si=44,AE=rx`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,EE=rx`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,ede=typeof AE!="string"?eL`
        animation: ${AE} 1.4s linear infinite;
      `:null,tde=typeof EE!="string"?eL`
        animation: ${EE} 1.4s ease-in-out infinite;
      `:null,nde=e=>{const{classes:t,variant:a,color:s,disableShrink:r}=e,i={root:["root",a,`color${Un(s)}`],svg:["svg"],track:["track"],circle:["circle",`circle${Un(a)}`,r&&"circleDisableShrink"]};return $a(i,Jce,t)},ade=an("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[a.variant],t[`color${Un(a.color)}`]]}})(yu(({theme:e})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("transform")}},{props:{variant:"indeterminate"},style:ede||{animation:`${AE} 1.4s linear infinite`}},...Object.entries(e.palette).filter(ip()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}}))]}))),sde=an("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),rde=an("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.circle,t[`circle${Un(a.variant)}`],a.disableShrink&&t.circleDisableShrink]}})(yu(({theme:e})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink,style:tde||{animation:`${EE} 1.4s ease-in-out infinite`}}]}))),ide=an("circle",{name:"MuiCircularProgress",slot:"Track"})(yu(({theme:e})=>({stroke:"currentColor",opacity:(e.vars||e).palette.action.activatedOpacity}))),lL=h.forwardRef(function(t,a){const s=rd({props:t,name:"MuiCircularProgress"}),{className:r,color:i="primary",disableShrink:l=!1,enableTrackSlot:o=!1,size:c=40,style:d,thickness:u=3.6,value:f=0,variant:p="indeterminate",...x}=s,y={...s,color:i,disableShrink:l,size:c,thickness:u,value:f,variant:p,enableTrackSlot:o},w=nde(y),v={},C={},N={};if(p==="determinate"){const S=2*Math.PI*((Si-u)/2);v.strokeDasharray=S.toFixed(3),N["aria-valuenow"]=Math.round(f),v.strokeDashoffset=`${((100-f)/100*S).toFixed(3)}px`,C.transform="rotate(-90deg)"}return n.jsx(ade,{className:Tt(w.root,r),style:{width:c,height:c,...C,...d},ownerState:y,ref:a,role:"progressbar",...N,...x,children:n.jsxs(sde,{className:w.svg,ownerState:y,viewBox:`${Si/2} ${Si/2} ${Si} ${Si}`,children:[o?n.jsx(ide,{className:w.track,ownerState:y,cx:Si,cy:Si,r:(Si-u)/2,fill:"none",strokeWidth:u,"aria-hidden":"true"}):null,n.jsx(rde,{className:w.circle,style:v,ownerState:y,cx:Si,cy:Si,r:(Si-u)/2,fill:"none",strokeWidth:u})]})})});function E9(e){return n.jsx(Kce,{sx:t=>({color:"#fff",zIndex:t.zIndex.drawer+1}),open:e,children:n.jsx(lL,{color:"inherit"})})}var xs={},jy={},WI;function lde(){if(WI)return jy;WI=1,Object.defineProperty(jy,"__esModule",{value:!0});function e(t,a){return t.reduce((s,r)=>{const i=String(r[a]);return s[i]||(s[i]=[]),s[i].push(r),s},{})}return jy.default=e,jy}var Cy={},VI;function ode(){if(VI)return Cy;VI=1,Object.defineProperty(Cy,"__esModule",{value:!0});function e(t,a){return t.replace(/{([^{}]*)}/g,(s,r)=>{const i=a[r];return typeof i=="string"||typeof i=="number"?i.toString():s})}return Cy.default=e,Cy}var Sy={},qI;function cde(){if(qI)return Sy;qI=1,Object.defineProperty(Sy,"__esModule",{value:!0});const e=[{countryNameEn:"Andorra",countryNameLocal:"Andorra",countryCode:"AD",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"ca",officialLanguageNameEn:"Catalan, Valencian",officialLanguageNameLocal:"Catal, Valenci",countryCallingCode:"376",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Afghanistan",countryNameLocal:"     ,   ",countryCode:"AF",currencyCode:"AFN",currencyNameEn:"Afghan afghani",tinType:"",tinName:"",officialLanguageCode:"fa",officialLanguageNameEn:"Persian",officialLanguageNameLocal:"",countryCallingCode:"93",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Antigua and Barbuda",countryNameLocal:"Antigua and Barbuda",countryCode:"AG",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1268",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Anguilla",countryNameLocal:"Anguilla",countryCode:"AI",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1264",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Albania",countryNameLocal:"Shqipria",countryCode:"AL",currencyCode:"ALL",currencyNameEn:"Albanian lek",tinType:"NIPT",tinName:"Numri i Identifikimit pr Personin e Tatueshm",officialLanguageCode:"sq",officialLanguageNameEn:"Albanian",officialLanguageNameLocal:"Shqip",countryCallingCode:"355",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Armenia",countryNameLocal:"",countryCode:"AM",currencyCode:"AMD",currencyNameEn:"Armenian dram",tinType:"",tinName:"",officialLanguageCode:"hy",officialLanguageNameEn:"Armenian",officialLanguageNameLocal:"",countryCallingCode:"374",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Angola",countryNameLocal:"Angola",countryCode:"AO",currencyCode:"AOA",currencyNameEn:"Angolan kwanza",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"244",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Antarctica",countryNameLocal:"Antarctica, Antrtico, Antarctique, ",countryCode:"AQ",currencyCode:"",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"672",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Argentina",countryNameLocal:"Argentina",countryCode:"AR",currencyCode:"ARS",currencyNameEn:"Argentine peso",tinType:"CUIT",tinName:"Cdigo nico de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"54",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"American Samoa",countryNameLocal:"American Samoa",countryCode:"AS",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1684",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Austria",countryNameLocal:"sterreich",countryCode:"AT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"UID",tinName:"Umsatzsteuer-Identifikationsnummer",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"43",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Australia",countryNameLocal:"Australia",countryCode:"AU",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"ABN",tinName:"Australian Business Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"61",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Aruba",countryNameLocal:"Aruba",countryCode:"AW",currencyCode:"AWG",currencyNameEn:"Aruban florin",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"297",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"land Islands",countryNameLocal:"land",countryCode:"AX",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"sv",officialLanguageNameEn:"Swedish",officialLanguageNameLocal:"Svenska",countryCallingCode:"358",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Azerbaijan",countryNameLocal:"Azrbaycan",countryCode:"AZ",currencyCode:"AZN",currencyNameEn:"Azerbaijani manat",tinType:"",tinName:"",officialLanguageCode:"az",officialLanguageNameEn:"Azerbaijani",officialLanguageNameLocal:"azrbaycan dili",countryCallingCode:"994",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Bosnia and Herzegovina",countryNameLocal:"Bosna i Hercegovina",countryCode:"BA",currencyCode:"BAM",currencyNameEn:"Bosnia and Herzegovina convertible mark",tinType:"",tinName:"",officialLanguageCode:"bs",officialLanguageNameEn:"Bosnian",officialLanguageNameLocal:"bosanski jezik",countryCallingCode:"387",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Barbados",countryNameLocal:"Barbados",countryCode:"BB",currencyCode:"BBD",currencyNameEn:"Barbados dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1246",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bangladesh",countryNameLocal:" ",countryCode:"BD",currencyCode:"BDT",currencyNameEn:"Bangladeshi taka",tinType:"",tinName:"",officialLanguageCode:"bn",officialLanguageNameEn:"Bengali",officialLanguageNameLocal:"",countryCallingCode:"880",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Belgium",countryNameLocal:"Belgi, Belgique, Belgien",countryCode:"BE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"n TVABTW-nr Mwst-nr",tinName:"BTW identificatienummer / Numro de TVA",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"32",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Burkina Faso",countryNameLocal:"Burkina Faso",countryCode:"BF",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"226",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Bulgaria",countryNameLocal:"",countryCode:"BG",currencyCode:"BGN",currencyNameEn:"Bulgarian lev",tinType:" ",tinName:"   ",officialLanguageCode:"bg",officialLanguageNameEn:"Bulgarian",officialLanguageNameLocal:" ",countryCallingCode:"359",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Bahrain",countryNameLocal:"",countryCode:"BH",currencyCode:"BHD",currencyNameEn:"Bahraini dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"973",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Burundi",countryNameLocal:"Burundi",countryCode:"BI",currencyCode:"BIF",currencyNameEn:"Burundian franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"257",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Benin",countryNameLocal:"Bnin",countryCode:"BJ",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"229",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Saint Barthlemy",countryNameLocal:"Saint-Barthlemy",countryCode:"BL",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"590",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bermuda",countryNameLocal:"Bermuda",countryCode:"BM",currencyCode:"BMD",currencyNameEn:"Bermudian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1441",areaCodes:[],region:"North America",flag:""},{countryNameEn:"Brunei Darussalam",countryNameLocal:"Brunei Darussalam",countryCode:"BN",currencyCode:"BND",currencyNameEn:"Brunei dollar",tinType:"",tinName:"",officialLanguageCode:"ms",officialLanguageNameEn:"Malay",officialLanguageNameLocal:"Bahasa Melayu,  ",countryCallingCode:"673",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Bolivia (Plurinational State of)",countryNameLocal:"Bolivia, Bulibiya, Volvia, Wuliwya",countryCode:"BO",currencyCode:"BOP",currencyNameEn:"",tinType:"NIT",tinName:"Nmero de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"591",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bonaire, Sint Eustatius and Saba",countryNameLocal:"Caribisch Nederland",countryCode:"BQ",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"5997",areaCodes:[],region:"Unknown",flag:""},{countryNameEn:"Brazil",countryNameLocal:"Brasil",countryCode:"BR",currencyCode:"BRL",currencyNameEn:"Brazilian real",tinType:"CNPJ",tinName:"Cadastro Nacional de Pessoa Jurdica",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"55",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bhutan",countryNameLocal:"",countryCode:"BT",currencyCode:"BTN",currencyNameEn:"Bhutanese ngultrum",tinType:"",tinName:"",officialLanguageCode:"dz",officialLanguageNameEn:"Dzongkha",officialLanguageNameLocal:"",countryCallingCode:"975",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Bouvet Island",countryNameLocal:"Bouvetya",countryCode:"BV",currencyCode:"NOK",currencyNameEn:"Norwegian krone",tinType:"",tinName:"",officialLanguageCode:"no",officialLanguageNameEn:"Norwegian",officialLanguageNameLocal:"Norsk",countryCallingCode:"47",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Botswana",countryNameLocal:"Botswana",countryCode:"BW",currencyCode:"BWP",currencyNameEn:"Botswana pula",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"267",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Belarus",countryNameLocal:"",countryCode:"BY",currencyCode:"BYR",currencyNameEn:"",tinType:" (UNP)",tinName:"  ",officialLanguageCode:"be",officialLanguageNameEn:"Belarusian",officialLanguageNameLocal:" ",countryCallingCode:"375",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Belize",countryNameLocal:"Belize",countryCode:"BZ",currencyCode:"BZD",currencyNameEn:"Belize dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"501",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Canada",countryNameLocal:"Canada",countryCode:"CA",currencyCode:"CAD",currencyNameEn:"Canadian dollar",tinType:"BN / NE",tinName:"Business Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:["403","587","780","825","236","250","604","672","778","204","431","506","709","782","902","226","249","289","343","365","416","437","519","548","613","647","705","807","905","367","418","438","450","514","579","581","819","873","306","639","867"],region:"North America",flag:""},{countryNameEn:"Switzerland",countryNameLocal:"Schweiz, Suisse, Svizzera, Svizra",countryCode:"CH",currencyCode:"CHF",currencyNameEn:"Swiss franc",tinType:"MWST/TVA/IVA",tinName:"Mehrwertsteuernummer",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"41",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Cte d'Ivoire",countryNameLocal:"Cte d'Ivoire",countryCode:"CI",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"225",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Chile",countryNameLocal:"Chile",countryCode:"CL",currencyCode:"CLP",currencyNameEn:"Chilean peso",tinType:"RUT",tinName:"Rol nico Tributario",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"56",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Cameroon",countryNameLocal:"Cameroun, Cameroon",countryCode:"CM",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"237",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"China",countryNameLocal:"",countryCode:"CN",currencyCode:"CNY",currencyNameEn:"Renminbi (Chinese) yuan",tinType:"",tinName:"",officialLanguageCode:"zh-hans",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"86",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Colombia",countryNameLocal:"Colombia",countryCode:"CO",currencyCode:"COP",currencyNameEn:"Colombian peso",tinType:"NIT",tinName:"Nmero De Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"57",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Costa Rica",countryNameLocal:"Costa Rica",countryCode:"CR",currencyCode:"CRC",currencyNameEn:"Costa Rican colon",tinType:"",tinName:"Cdula Jurdica",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"506",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Cuba",countryNameLocal:"Cuba",countryCode:"CU",currencyCode:"CUC",currencyNameEn:"Cuban convertible peso",tinType:"",tinName:"",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"53",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Cabo Verde",countryNameLocal:"Cabo Verde",countryCode:"CV",currencyCode:"CVE",currencyNameEn:"Cape Verdean escudo",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"238",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Curaao",countryNameLocal:"Curaao",countryCode:"CW",currencyCode:"ANG",currencyNameEn:"Netherlands Antillean guilder",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"599",areaCodes:[],region:"Unknown",flag:""},{countryNameEn:"Christmas Island",countryNameLocal:"Christmas Island",countryCode:"CX",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"61",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Cyprus",countryNameLocal:", Kibris",countryCode:"CY",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"  ...",officialLanguageCode:"el",officialLanguageNameEn:"Greek, Modern (1453-)",officialLanguageNameLocal:"",countryCallingCode:"357",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Germany",countryNameLocal:"Deutschland",countryCode:"DE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"USt-IdNr.",tinName:"Umsatzsteuer-Identifikationsnummer",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"49",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Djibouti",countryNameLocal:"Djibouti, , Jabuuti, Gabuutih",countryCode:"DJ",currencyCode:"DJF",currencyNameEn:"Djiboutian franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"253",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Denmark",countryNameLocal:"Danmark",countryCode:"DK",currencyCode:"DKK",currencyNameEn:"Danish krone",tinType:"CVR",tinName:"Momsregistreringsnummer",officialLanguageCode:"da",officialLanguageNameEn:"Danish",officialLanguageNameLocal:"dansk",countryCallingCode:"45",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Dominica",countryNameLocal:"Dominica",countryCode:"DM",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"767",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Algeria",countryNameLocal:"",countryCode:"DZ",currencyCode:"DZD",currencyNameEn:"Algerian dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"213",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Ecuador",countryNameLocal:"Ecuador",countryCode:"EC",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"RUC",tinName:"Nmero de Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"593",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Estonia",countryNameLocal:"Eesti",countryCode:"EE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"KMKR",tinName:"Kibemaksukohustuslase number",officialLanguageCode:"et",officialLanguageNameEn:"Estonian",officialLanguageNameLocal:"eesti, eesti keel",countryCallingCode:"372",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Egypt",countryNameLocal:"",countryCode:"EG",currencyCode:"EGP",currencyNameEn:"Egyptian pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"20",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Western Sahara",countryNameLocal:"Sahara Occidental",countryCode:"EH",currencyCode:"MAD",currencyNameEn:"Moroccan dirham",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"212",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Eritrea",countryNameLocal:", , Eritrea",countryCode:"ER",currencyCode:"ERN",currencyNameEn:"Eritrean nakfa",tinType:"",tinName:"",officialLanguageCode:"ti",officialLanguageNameEn:"Tigrinya",officialLanguageNameLocal:"",countryCallingCode:"291",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Spain",countryNameLocal:"Espaa",countryCode:"ES",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"NIF (CIF)",tinName:"Nmero de Identificacin Fiscal (formerly named Cdigo de Identificacin Fiscal)",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"34",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Ethiopia",countryNameLocal:", Itoophiyaa",countryCode:"ET",currencyCode:"ETB",currencyNameEn:"Ethiopian birr",tinType:"",tinName:"",officialLanguageCode:"am",officialLanguageNameEn:"Amharic",officialLanguageNameLocal:"",countryCallingCode:"251",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Finland",countryNameLocal:"Suomi",countryCode:"FI",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"ALV nro",tinName:"Arvonlisveronumero",officialLanguageCode:"fi",officialLanguageNameEn:"Finnish",officialLanguageNameLocal:"suomi, suomen kieli",countryCallingCode:"358",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Fiji",countryNameLocal:"Fiji",countryCode:"FJ",currencyCode:"FJD",currencyNameEn:"Fiji dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"679",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Micronesia (Federated States of)",countryNameLocal:"Micronesia",countryCode:"FM",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"691",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"France",countryNameLocal:"France",countryCode:"FR",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"n TVA",tinName:"Numro d'identification  la taxe sur la valeur ajoute / Numro de TVA intracommunautaire",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"33",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Gabon",countryNameLocal:"Gabon",countryCode:"GA",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"241",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Grenada",countryNameLocal:"Grenada",countryCode:"GD",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1473",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Georgia",countryNameLocal:"",countryCode:"GE",currencyCode:"GEL",currencyNameEn:"Georgian lari",tinType:"",tinName:"",officialLanguageCode:"ka",officialLanguageNameEn:"Georgian",officialLanguageNameLocal:"",countryCallingCode:"995",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"French Guiana",countryNameLocal:"Guyane franaise",countryCode:"GF",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"594",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Guernsey",countryNameLocal:"Guernsey",countryCode:"GG",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Ghana",countryNameLocal:"Ghana",countryCode:"GH",currencyCode:"GHS",currencyNameEn:"Ghanaian cedi",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"233",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Gibraltar",countryNameLocal:"Gibraltar",countryCode:"GI",currencyCode:"GIP",currencyNameEn:"Gibraltar pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"350",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Greenland",countryNameLocal:"Kalaallit Nunaat, Grnland",countryCode:"GL",currencyCode:"DKK",currencyNameEn:"Danish krone",tinType:"",tinName:"",officialLanguageCode:"kl",officialLanguageNameEn:"Kalaallisut, Greenlandic",officialLanguageNameLocal:"kalaallisut, kalaallit oqaasii",countryCallingCode:"299",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Guinea",countryNameLocal:"Guine",countryCode:"GN",currencyCode:"GNF",currencyNameEn:"Guinean franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"224",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Guadeloupe",countryNameLocal:"Guadeloupe",countryCode:"GP",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"590",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Equatorial Guinea",countryNameLocal:"Guiena ecuatorial, Guine quatoriale, Guin Equatorial",countryCode:"GQ",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"240",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Greece",countryNameLocal:"",countryCode:"GR",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"el",officialLanguageNameEn:"Greek, Modern (1453-)",officialLanguageNameLocal:"",countryCallingCode:"30",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"South Georgia and the South Sandwich Islands",countryNameLocal:"South Georgia and the South Sandwich Islands",countryCode:"GS",currencyCode:"",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"500",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Guatemala",countryNameLocal:"Guatemala",countryCode:"GT",currencyCode:"GTQ",currencyNameEn:"Guatemalan quetzal",tinType:"NIT",tinName:"Nmero de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"502",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Guam",countryNameLocal:"Guam, Guhn",countryCode:"GU",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Guinea-Bissau",countryNameLocal:"Guin-Bissau",countryCode:"GW",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"245",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Guyana",countryNameLocal:"Guyana",countryCode:"GY",currencyCode:"GYD",currencyNameEn:"Guyanese dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"592",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Hong Kong",countryNameLocal:", Hong Kong",countryCode:"HK",currencyCode:"HKD",currencyNameEn:"Hong Kong dollar",tinType:"",tinName:"",officialLanguageCode:"zh-hant",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"852",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Honduras",countryNameLocal:"Honduras",countryCode:"HN",currencyCode:"HNL",currencyNameEn:"Honduran lempira",tinType:"RTN",tinName:"Registro Tributario Nacional",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"504",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Croatia",countryNameLocal:"Hrvatska",countryCode:"HR",currencyCode:"HRK",currencyNameEn:"Croatian kuna",tinType:"PDV-ID; OIB",tinName:"PDV Id. Broj OIB",officialLanguageCode:"hr",officialLanguageNameEn:"Croatian",officialLanguageNameLocal:"hrvatski jezik",countryCallingCode:"385",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Haiti",countryNameLocal:"Hati, Ayiti",countryCode:"HT",currencyCode:"HTG",currencyNameEn:"Haitian gourde",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"509",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Hungary",countryNameLocal:"Magyarorszg",countryCode:"HU",currencyCode:"HUF",currencyNameEn:"Hungarian forint",tinType:"ANUM",tinName:"Kzssgi adszm",officialLanguageCode:"hu",officialLanguageNameEn:"Hungarian",officialLanguageNameLocal:"magyar",countryCallingCode:"36",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Indonesia",countryNameLocal:"Indonesia",countryCode:"ID",currencyCode:"IDR",currencyNameEn:"Indonesian rupiah",tinType:"NPWP",tinName:"Nomor Pokok Wajib Pajak",officialLanguageCode:"id",officialLanguageNameEn:"Indonesian",officialLanguageNameLocal:"Bahasa Indonesia",countryCallingCode:"62",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Ireland",countryNameLocal:"Ireland, ire",countryCode:"IE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"VAT or CBL",tinName:"Value added tax identification no.",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"353",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Israel",countryNameLocal:"",countryCode:"IL",currencyCode:"ILS",currencyNameEn:"Israeli new shekel",tinType:"",tinName:`'   / "`,officialLanguageCode:"he",officialLanguageNameEn:"Hebrew",officialLanguageNameLocal:"",countryCallingCode:"972",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Isle of Man",countryNameLocal:"Isle of Man",countryCode:"IM",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"India",countryNameLocal:", India",countryCode:"IN",currencyCode:"INR",currencyNameEn:"Indian rupee",tinType:"VAT TIN / CST TIN",tinName:"Value Added Tax - Taxpayer Identification Number / Central Sales Tax - Taxpayer Identification Number (In most states)Not applicable",officialLanguageCode:"hi",officialLanguageNameEn:"Hindi",officialLanguageNameLocal:", ",countryCallingCode:"91",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"British Indian Ocean Territories",countryNameLocal:"British Indian Ocean Territories",countryCode:"IO",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"246",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"Iraq",countryNameLocal:", Iraq",countryCode:"IQ",currencyCode:"IQD",currencyNameEn:"Iraqi dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"964",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Iran (Islamic Republic of)",countryNameLocal:"",countryCode:"IR",currencyCode:"IRR",currencyNameEn:"Iranian rial",tinType:"",tinName:"",officialLanguageCode:"fa",officialLanguageNameEn:"Persian",officialLanguageNameLocal:"",countryCallingCode:"98",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Iceland",countryNameLocal:"sland",countryCode:"IS",currencyCode:"ISK",currencyNameEn:"Icelandic krna",tinType:"VSK / VASK",tinName:"Virisaukaskattsnmer",officialLanguageCode:"is",officialLanguageNameEn:"Icelandic",officialLanguageNameLocal:"slenska",countryCallingCode:"354",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Italy",countryNameLocal:"Italia",countryCode:"IT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"P.IVA",tinName:"Partita IVA(IVA = Imposta sul Valore Aggiunto)",officialLanguageCode:"it",officialLanguageNameEn:"Italian",officialLanguageNameLocal:"Italiano",countryCallingCode:"39",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Jersey",countryNameLocal:"Jersey",countryCode:"JE",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Jamaica",countryNameLocal:"Jamaica",countryCode:"JM",currencyCode:"JMD",currencyNameEn:"Jamaican dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"876",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Jordan",countryNameLocal:"",countryCode:"JO",currencyCode:"JOD",currencyNameEn:"Jordanian dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"962",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Japan",countryNameLocal:"",countryCode:"JP",currencyCode:"JPY",currencyNameEn:"Japanese yen",tinType:"",tinName:"",officialLanguageCode:"ja",officialLanguageNameEn:"Japanese",officialLanguageNameLocal:" ()",countryCallingCode:"81",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Kenya",countryNameLocal:"Kenya",countryCode:"KE",currencyCode:"KES",currencyNameEn:"Kenyan shilling",tinType:"",tinName:"",officialLanguageCode:"sw",officialLanguageNameEn:"Swahili",officialLanguageNameLocal:"Kiswahili",countryCallingCode:"254",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Kyrgyzstan",countryNameLocal:", ",countryCode:"KG",currencyCode:"KGS",currencyNameEn:"Kyrgyzstani som",tinType:"",tinName:"",officialLanguageCode:"ky",officialLanguageNameEn:"Kirghiz, Kyrgyz",officialLanguageNameLocal:",  ",countryCallingCode:"996",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Cambodia",countryNameLocal:"",countryCode:"KH",currencyCode:"KHR",currencyNameEn:"Cambodian riel",tinType:"",tinName:"",officialLanguageCode:"km",officialLanguageNameEn:"Central Khmer",officialLanguageNameLocal:", , ",countryCallingCode:"855",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"North Korea",countryNameLocal:"",countryCode:"KP",currencyCode:"KPW",currencyNameEn:"North Korean won",tinType:"",tinName:"",officialLanguageCode:"ko",officialLanguageNameEn:"Korean",officialLanguageNameLocal:"",countryCallingCode:"850",areaCodes:[],region:"Asia",flag:""},{countryNameEn:"South Korea",countryNameLocal:"",countryCode:"KR",currencyCode:"KRW",currencyNameEn:"South Korean won",tinType:"",tinName:"",officialLanguageCode:"ko",officialLanguageNameEn:"Korean",officialLanguageNameLocal:"",countryCallingCode:"82",areaCodes:[],region:"Asia",flag:""},{countryNameEn:"Kiribati",countryNameLocal:"Kiribati",countryCode:"KI",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"686",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Saint Kitts and Nevis",countryNameLocal:"Saint Kitts and Nevis",countryCode:"KN",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1869",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Kuwait",countryNameLocal:"",countryCode:"KW",currencyCode:"KWD",currencyNameEn:"Kuwaiti dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"965",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Kazakhstan",countryNameLocal:", ",countryCode:"KZ",currencyCode:"KZT",currencyNameEn:"Kazakhstani tenge",tinType:"",tinName:"",officialLanguageCode:"kk",officialLanguageNameEn:"Kazakh",officialLanguageNameLocal:" ",countryCallingCode:"7",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Lebanon",countryNameLocal:", Liban",countryCode:"LB",currencyCode:"LBP",currencyNameEn:"Lebanese pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"961",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Saint Lucia",countryNameLocal:"Saint Lucia",countryCode:"LC",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1758",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Liechtenstein",countryNameLocal:"Liechtenstein",countryCode:"LI",currencyCode:"CHF",currencyNameEn:"Swiss franc",tinType:"",tinName:"",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"423",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Sri Lanka",countryNameLocal:" , ",countryCode:"LK",currencyCode:"LKR",currencyNameEn:"Sri Lankan rupee",tinType:"",tinName:"",officialLanguageCode:"si",officialLanguageNameEn:"Sinhala, Sinhalese",officialLanguageNameLocal:"",countryCallingCode:"94",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Liberia",countryNameLocal:"Liberia",countryCode:"LR",currencyCode:"LRD",currencyNameEn:"Liberian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"231",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Lesotho",countryNameLocal:"Lesotho",countryCode:"LS",currencyCode:"LSL",currencyNameEn:"Lesotho loti",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"266",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Lithuania",countryNameLocal:"Lietuva",countryCode:"LT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"PVM kodas",tinName:"PVM (abbrev. Pridtins verts mokestis) moktojo kodas",officialLanguageCode:"lt",officialLanguageNameEn:"Lithuanian",officialLanguageNameLocal:"lietuvi kalba",countryCallingCode:"370",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Luxembourg",countryNameLocal:"Ltzebuerg, Luxembourg, Luxemburg",countryCode:"LU",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"No. TVA",tinName:"Numro d'identification  la taxe sur la valeur ajoute",officialLanguageCode:"lb",officialLanguageNameEn:"Luxembourgish, Letzeburgesch",officialLanguageNameLocal:"Ltzebuergesch",countryCallingCode:"352",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Latvia",countryNameLocal:"Latvija",countryCode:"LV",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"PVN",tinName:"Pievienots vrtbas nodoka (PVN) reistrcijas numurs",officialLanguageCode:"lv",officialLanguageNameEn:"Latvian",officialLanguageNameLocal:"latvieu valoda",countryCallingCode:"371",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Libya",countryNameLocal:"",countryCode:"LY",currencyCode:"LYD",currencyNameEn:"Libyan dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"218",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Morocco",countryNameLocal:"Maroc, , ",countryCode:"MA",currencyCode:"MAD",currencyNameEn:"Moroccan dirham",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"212",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Monaco",countryNameLocal:"Monaco",countryCode:"MC",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"377",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Montenegro",countryNameLocal:"Crna Gora,  ",countryCode:"ME",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"srp",officialLanguageNameEn:" ",officialLanguageNameLocal:"",countryCallingCode:"382",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Saint Martin (French part)",countryNameLocal:"Saint-Martin",countryCode:"MF",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"590",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Madagascar",countryNameLocal:"Madagasikara, Madagascar",countryCode:"MG",currencyCode:"MGA",currencyNameEn:"Malagasy ariary",tinType:"",tinName:"",officialLanguageCode:"mg",officialLanguageNameEn:"Malagasy",officialLanguageNameLocal:"fiteny malagasy",countryCallingCode:"261",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Mali",countryNameLocal:"Mali",countryCode:"ML",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"223",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Myanmar",countryNameLocal:"",countryCode:"MM",currencyCode:"MMK",currencyNameEn:"Myanmar kyat",tinType:"",tinName:"",officialLanguageCode:"my",officialLanguageNameEn:"Burmese",officialLanguageNameLocal:"",countryCallingCode:"95",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Mongolia",countryNameLocal:" ",countryCode:"MN",currencyCode:"MNT",currencyNameEn:"Mongolian tgrg",tinType:"",tinName:"",officialLanguageCode:"mn",officialLanguageNameEn:"Mongolian",officialLanguageNameLocal:" ",countryCallingCode:"976",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Macao",countryNameLocal:", Macau",countryCode:"MO",currencyCode:"MOP",currencyNameEn:"Macanese pataca",tinType:"",tinName:"",officialLanguageCode:"zh-hant",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"853",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Martinique",countryNameLocal:"Martinique",countryCode:"MQ",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"596",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Mauritania",countryNameLocal:", Mauritanie",countryCode:"MR",currencyCode:"MRU",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"222",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Montserrat",countryNameLocal:"Montserrat",countryCode:"MS",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1664",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Malta",countryNameLocal:"Malta",countryCode:"MT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"Vat No.",tinName:"Vat reg. no.",officialLanguageCode:"mt",officialLanguageNameEn:"Maltese",officialLanguageNameLocal:"Malti",countryCallingCode:"356",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Mauritius",countryNameLocal:"Maurice, Mauritius",countryCode:"MU",currencyCode:"MUR",currencyNameEn:"Mauritian rupee",tinType:"",tinName:"",officialLanguageCode:"mfe",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"230",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Maldives",countryNameLocal:"",countryCode:"MV",currencyCode:"MVR",currencyNameEn:"Maldivian rufiyaa",tinType:"",tinName:"",officialLanguageCode:"dv",officialLanguageNameEn:"Divehi, Dhivehi, Maldivian",officialLanguageNameLocal:"",countryCallingCode:"960",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Malawi",countryNameLocal:"Malawi",countryCode:"MW",currencyCode:"MWK",currencyNameEn:"Malawian kwacha",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"265",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Mexico",countryNameLocal:"Mxico",countryCode:"MX",currencyCode:"MXN",currencyNameEn:"Mexican peso",tinType:"RFC",tinName:"Registro Federal de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"52",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Malaysia",countryNameLocal:"",countryCode:"MY",currencyCode:"MYR",currencyNameEn:"Malaysian ringgit",tinType:"",tinName:"",officialLanguageCode:"ms",officialLanguageNameEn:"Malay",officialLanguageNameLocal:"Bahasa Melayu,  ",countryCallingCode:"60",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Mozambique",countryNameLocal:"Mozambique",countryCode:"MZ",currencyCode:"MZN",currencyNameEn:"Mozambican metical",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"258",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Namibia",countryNameLocal:"Namibia",countryCode:"NA",currencyCode:"NAD",currencyNameEn:"Namibian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"264",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"New Caledonia",countryNameLocal:"Nouvelle-Caldonie",countryCode:"NC",currencyCode:"XPF",currencyNameEn:"CFP franc (franc Pacifique)",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"687",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Norfolk Island",countryNameLocal:"Norfolk Island",countryCode:"NF",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"672",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Nigeria",countryNameLocal:"Nigeria",countryCode:"NG",currencyCode:"NGN",currencyNameEn:"Nigerian naira",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"234",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Nicaragua",countryNameLocal:"Nicaragua",countryCode:"NI",currencyCode:"NIO",currencyNameEn:"Nicaraguan crdoba",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"505",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Norway",countryNameLocal:"Norge, Noreg",countryCode:"NO",currencyCode:"NOK",currencyNameEn:"Norwegian krone",tinType:"Orgnr",tinName:"Organisasjonsnummer",officialLanguageCode:"nb",officialLanguageNameEn:"Norwegian Bokml",officialLanguageNameLocal:"Norsk Bokml",countryCallingCode:"47",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Nepal",countryNameLocal:"",countryCode:"NP",currencyCode:"NPR",currencyNameEn:"Nepalese rupee",tinType:"",tinName:"",officialLanguageCode:"ne",officialLanguageNameEn:"Nepali",officialLanguageNameLocal:"",countryCallingCode:"977",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Nauru",countryNameLocal:"Nauru",countryCode:"NR",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"na",officialLanguageNameEn:"Nauru",officialLanguageNameLocal:"Dorerin Naoero",countryCallingCode:"674",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Niue",countryNameLocal:"Niue",countryCode:"NU",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"niu",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"683",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"New Zealand",countryNameLocal:"New Zealand",countryCode:"NZ",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"NZBN",tinName:"NZ Business Number",officialLanguageCode:"mi",officialLanguageNameEn:"Maori",officialLanguageNameLocal:"te reo Mori",countryCallingCode:"64",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Oman",countryNameLocal:" ",countryCode:"OM",currencyCode:"OMR",currencyNameEn:"Omani rial",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"968",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Panama",countryNameLocal:"Panama",countryCode:"PA",currencyCode:"PAB",currencyNameEn:"Panamanian balboa",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"507",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Peru",countryNameLocal:"Per",countryCode:"PE",currencyCode:"PEN",currencyNameEn:"Peruvian sol",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"51",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"French Polynesia",countryNameLocal:"Polynsie franaise",countryCode:"PF",currencyCode:"XPF",currencyNameEn:"CFP franc (franc Pacifique)",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"689",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Papua New Guinea",countryNameLocal:"Papua New Guinea",countryCode:"PG",currencyCode:"PGK",currencyNameEn:"Papua New Guinean kina",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"675",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Pakistan",countryNameLocal:"",countryCode:"PK",currencyCode:"PKR",currencyNameEn:"Pakistani rupee",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"92",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Poland",countryNameLocal:"Polska",countryCode:"PL",currencyCode:"PLN",currencyNameEn:"Polish zoty",tinType:"NIP",tinName:"numer identyfikacji podatkowej",officialLanguageCode:"pl",officialLanguageNameEn:"Polish",officialLanguageNameLocal:"jzyk polski, polszczyzna",countryCallingCode:"48",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Saint Pierre and Miquelon",countryNameLocal:"Saint-Pierre-et-Miquelon",countryCode:"PM",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"508",areaCodes:[],region:"North America",flag:""},{countryNameEn:"Pitcairn",countryNameLocal:"Pitcairn",countryCode:"PN",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"64",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Puerto Rico",countryNameLocal:"Puerto Rico",countryCode:"PR",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"1",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Palestine, State of",countryNameLocal:"Palestinian Territory",countryCode:"PS",currencyCode:"",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"970",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Portugal",countryNameLocal:"Portugal",countryCode:"PT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"NIPC",tinName:"Nmero de Identificao de Pessoa Coletiva (NIPC)",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"351",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Palau",countryNameLocal:"Palau",countryCode:"PW",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"680",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Paraguay",countryNameLocal:"Paraguay",countryCode:"PY",currencyCode:"PYG",currencyNameEn:"Paraguayan guaran",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"595",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Qatar",countryNameLocal:"",countryCode:"QA",currencyCode:"QAR",currencyNameEn:"Qatari riyal",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"974",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Runion",countryNameLocal:"La Runion",countryCode:"RE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"262",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Romania",countryNameLocal:"Romnia",countryCode:"RO",currencyCode:"RON",currencyNameEn:"Romanian leu",tinType:"CIF",tinName:"Codul de identificare fiscal",officialLanguageCode:"ro",officialLanguageNameEn:"Romanian, Moldavian, Moldovan",officialLanguageNameLocal:"Romn",countryCallingCode:"40",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Serbia",countryNameLocal:"",countryCode:"RS",currencyCode:"RSD",currencyNameEn:"Serbian dinar",tinType:"PIB",tinName:"Poreski identifikacioni broj",officialLanguageCode:"sr",officialLanguageNameEn:"Serbian",officialLanguageNameLocal:" ",countryCallingCode:"381",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Russia",countryNameLocal:"",countryCode:"RU",currencyCode:"RUB",currencyNameEn:"Russian ruble",tinType:"",tinName:"  ",officialLanguageCode:"ru",officialLanguageNameEn:"Russian",officialLanguageNameLocal:"",countryCallingCode:"7",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Rwanda",countryNameLocal:"Rwanda",countryCode:"RW",currencyCode:"RWF",currencyNameEn:"Rwandan franc",tinType:"",tinName:"",officialLanguageCode:"rw",officialLanguageNameEn:"Kinyarwanda",officialLanguageNameLocal:"Ikinyarwanda",countryCallingCode:"250",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Saudi Arabia",countryNameLocal:"",countryCode:"SA",currencyCode:"SAR",currencyNameEn:"Saudi riyal",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"966",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Solomon Islands",countryNameLocal:"Solomon Islands",countryCode:"SB",currencyCode:"SBD",currencyNameEn:"Solomon Islands dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"677",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Seychelles",countryNameLocal:"Seychelles",countryCode:"SC",currencyCode:"SCR",currencyNameEn:"Seychelles rupee",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"248",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Sweden",countryNameLocal:"Sverige",countryCode:"SE",currencyCode:"SEK",currencyNameEn:"Swedish krona/kronor",tinType:"Momsnr.",tinName:"VAT-nummer",officialLanguageCode:"sv",officialLanguageNameEn:"Swedish",officialLanguageNameLocal:"Svenska",countryCallingCode:"46",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Singapore",countryNameLocal:"Singapore",countryCode:"SG",currencyCode:"SGD",currencyNameEn:"Singapore dollar",tinType:"",tinName:"",officialLanguageCode:"zh-hans",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"65",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Saint Helena, Ascension and Tristan da Cunha",countryNameLocal:"Saint Helena",countryCode:"SH",currencyCode:"SHP",currencyNameEn:"Saint Helena pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"290",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Slovenia",countryNameLocal:"Slovenija",countryCode:"SI",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"ID za DDV",tinName:"Davna tevilka",officialLanguageCode:"sl",officialLanguageNameEn:"Slovenian",officialLanguageNameLocal:"Slovenski Jezik, Slovenina",countryCallingCode:"386",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Svalbard and Jan Mayen",countryNameLocal:"Svalbard and Jan Mayen",countryCode:"SJ",currencyCode:"NOK",currencyNameEn:"Norwegian krone",tinType:"",tinName:"",officialLanguageCode:"no",officialLanguageNameEn:"Norwegian",officialLanguageNameLocal:"Norsk",countryCallingCode:"4779",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Slovakia",countryNameLocal:"Slovensko",countryCode:"SK",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"I DPH",tinName:"Identifikan slo pre da z pridanej hodnoty",officialLanguageCode:"sk",officialLanguageNameEn:"Slovak",officialLanguageNameLocal:"Slovenina, Slovensk Jazyk",countryCallingCode:"421",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Sierra Leone",countryNameLocal:"Sierra Leone",countryCode:"SL",currencyCode:"SLL",currencyNameEn:"Sierra Leonean leone",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"232",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Republic of San Marino",countryNameLocal:"Repubblica di San Marino",countryCode:"SM",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"C.O.E.",tinName:"Codice operatore economico",officialLanguageCode:"it",officialLanguageNameEn:"Italian",officialLanguageNameLocal:"Italiano",countryCallingCode:"378",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Senegal",countryNameLocal:"Sngal",countryCode:"SN",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"221",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Somalia",countryNameLocal:"Somalia, ",countryCode:"SO",currencyCode:"SOS",currencyNameEn:"Somali shilling",tinType:"",tinName:"",officialLanguageCode:"so",officialLanguageNameEn:"Somali",officialLanguageNameLocal:"Soomaaliga, af Soomaali",countryCallingCode:"252",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Suriname",countryNameLocal:"Suriname",countryCode:"SR",currencyCode:"SRD",currencyNameEn:"Surinamese dollar",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"597",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"South Sudan",countryNameLocal:"South Sudan",countryCode:"SS",currencyCode:"SSP",currencyNameEn:"South Sudanese pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"211",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Sao Tome and Principe",countryNameLocal:"So Tom e Prncipe",countryCode:"ST",currencyCode:"STN",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"239",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"El Salvador",countryNameLocal:"El Salvador",countryCode:"SV",currencyCode:"SVC",currencyNameEn:"Salvadoran coln",tinType:"NIT",tinName:"Nmero de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"503",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Sint Maarten (Dutch part)",countryNameLocal:"Sint Maarten",countryCode:"SX",currencyCode:"ANG",currencyNameEn:"Netherlands Antillean guilder",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"1721",areaCodes:[],region:"Unknown",flag:""},{countryNameEn:"Syrian Arab Republic",countryNameLocal:", Sriyya",countryCode:"SY",currencyCode:"SYP",currencyNameEn:"Syrian pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"963",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Chad",countryNameLocal:"Tchad, ",countryCode:"TD",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"235",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Togo",countryNameLocal:"Togo",countryCode:"TG",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"228",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Thailand",countryNameLocal:"",countryCode:"TH",currencyCode:"THB",currencyNameEn:"Thai baht",tinType:"",tinName:"",officialLanguageCode:"th",officialLanguageNameEn:"Thai",officialLanguageNameLocal:"",countryCallingCode:"66",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Tajikistan",countryNameLocal:",",countryCode:"TJ",currencyCode:"TJS",currencyNameEn:"Tajikistani somoni",tinType:"",tinName:"",officialLanguageCode:"tg",officialLanguageNameEn:"Tajik",officialLanguageNameLocal:", toik, ",countryCallingCode:"992",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Tokelau",countryNameLocal:"Tokelau",countryCode:"TK",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"tkl",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"690",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Timor-Leste",countryNameLocal:"Timor-Leste, Timor Lorosa'e",countryCode:"TL",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"670",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Turkmenistan",countryNameLocal:"Trkmenistan",countryCode:"TM",currencyCode:"TMT",currencyNameEn:"Turkmenistan manat",tinType:"",tinName:"",officialLanguageCode:"tk",officialLanguageNameEn:"Turkmen",officialLanguageNameLocal:"Trkmen, ",countryCallingCode:"993",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Tunisia",countryNameLocal:", Tunisie",countryCode:"TN",currencyCode:"TND",currencyNameEn:"Tunisian dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"216",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Tonga",countryNameLocal:"Tonga",countryCode:"TO",currencyCode:"TOP",currencyNameEn:"Tongan paanga",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"676",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Turkey",countryNameLocal:"Trkiye",countryCode:"TR",currencyCode:"TRY",currencyNameEn:"Turkish lira",tinType:"KDV",tinName:"Vergi Kimlik Numaras",officialLanguageCode:"tr",officialLanguageNameEn:"Turkish",officialLanguageNameLocal:"Trke",countryCallingCode:"90",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Trinidad and Tobago",countryNameLocal:"Trinidad and Tobago",countryCode:"TT",currencyCode:"TTD",currencyNameEn:"Trinidad and Tobago dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"868",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Tuvalu",countryNameLocal:"Tuvalu",countryCode:"TV",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"688",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"United Republic of Tanzania",countryNameLocal:"Tanzania",countryCode:"TZ",currencyCode:"TZS",currencyNameEn:"Tanzanian shilling",tinType:"",tinName:"",officialLanguageCode:"sw",officialLanguageNameEn:"Swahili",officialLanguageNameLocal:"Kiswahili",countryCallingCode:"255",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Ukraine",countryNameLocal:"",countryCode:"UA",currencyCode:"UAH",currencyNameEn:"Ukrainian hryvnia",tinType:"",tinName:"   ",officialLanguageCode:"uk",officialLanguageNameEn:"Ukrainian",officialLanguageNameLocal:"",countryCallingCode:"380",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Uganda",countryNameLocal:"Uganda",countryCode:"UG",currencyCode:"UGX",currencyNameEn:"Ugandan shilling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"256",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"United States of America",countryNameLocal:"United States of America",countryCode:"US",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"EIN",tinName:"Tax Identification Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:[],region:"North America",flag:""},{countryNameEn:"Uruguay",countryNameLocal:"Uruguay",countryCode:"UY",currencyCode:"UYU",currencyNameEn:"Uruguayan peso",tinType:"RUT",tinName:"Registro nico Tributario",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"598",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Uzbekistan",countryNameLocal:"",countryCode:"UZ",currencyCode:"UZS",currencyNameEn:"Uzbekistan som",tinType:"",tinName:"   ",officialLanguageCode:"uz",officialLanguageNameEn:"Uzbek",officialLanguageNameLocal:"Ozbek, , ",countryCallingCode:"998",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Saint Vincent and the Grenadines",countryNameLocal:"Saint Vincent and the Grenadines",countryCode:"VC",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1784",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Venezuela (Bolivarian Republic of)",countryNameLocal:"Venezuela",countryCode:"VE",currencyCode:"VES",currencyNameEn:"",tinType:"RIF",tinName:"Registro de Informacion Fiscal",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"58",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Virgin Islands (British)",countryNameLocal:"British Virgin Islands",countryCode:"VG",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1284",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Virgin Islands (U.S.)",countryNameLocal:"United States Virgin Islands",countryCode:"VI",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1340",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Vietnam",countryNameLocal:"Vit Nam",countryCode:"VN",currencyCode:"VND",currencyNameEn:"Vietnamese ng",tinType:"",tinName:"",officialLanguageCode:"vi",officialLanguageNameEn:"Vietnamese",officialLanguageNameLocal:"Ting Vit",countryCallingCode:"84",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Vanuatu",countryNameLocal:"Vanuatu",countryCode:"VU",currencyCode:"VUV",currencyNameEn:"Vanuatu vatu",tinType:"",tinName:"",officialLanguageCode:"bi",officialLanguageNameEn:"Bislama",officialLanguageNameLocal:"Bislama",countryCallingCode:"678",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Wallis and Futuna",countryNameLocal:"Wallis-et-Futuna",countryCode:"WF",currencyCode:"XPF",currencyNameEn:"CFP franc (franc Pacifique)",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"681",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Samoa",countryNameLocal:"Samoa",countryCode:"WS",currencyCode:"WST",currencyNameEn:"Samoan tala",tinType:"",tinName:"",officialLanguageCode:"sm",officialLanguageNameEn:"Samoan",officialLanguageNameLocal:"gagana fa'a Samoa",countryCallingCode:"685",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Yemen",countryNameLocal:"",countryCode:"YE",currencyCode:"YER",currencyNameEn:"Yemeni rial",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"967",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Mayotte",countryNameLocal:"Mayotte",countryCode:"YT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"262",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"South Africa",countryNameLocal:"South Africa",countryCode:"ZA",currencyCode:"ZAR",currencyNameEn:"South African rand",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"27",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Zambia",countryNameLocal:"Zambia",countryCode:"ZM",currencyCode:"ZMW",currencyNameEn:"Zambian kwacha",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"260",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Zimbabwe",countryNameLocal:"Zimbabwe",countryCode:"ZW",currencyCode:"ZWL",currencyNameEn:"Zimbabwean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"263",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Eswatini",countryNameLocal:"Swaziland",countryCode:"SZ",currencyCode:"SZL",currencyNameEn:"Swazi lilangeni",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"268",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"North Macedonia",countryNameLocal:"",countryCode:"MK",currencyCode:"MKD",currencyNameEn:"Macedonian denar",tinType:"",tinName:"",officialLanguageCode:"mk",officialLanguageNameEn:"Macedonian",officialLanguageNameLocal:" ",countryCallingCode:"389",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Philippines",countryNameLocal:"Philippines",countryCode:"PH",currencyCode:"PHP",currencyNameEn:"Philippine peso",tinType:"TIN",tinName:"Tax Identification Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"63",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Netherlands",countryNameLocal:"Nederland",countryCode:"NL",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"Btw-nr.",tinName:"Btw-nummer",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"31",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"United Arab Emirates",countryNameLocal:"   ",countryCode:"AE",currencyCode:"AED",currencyNameEn:"United Arab Emirates dirham",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"971",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Republic of Moldova",countryNameLocal:"Moldova, ",countryCode:"MD",currencyCode:"MDL",currencyNameEn:"Moldovan leu",tinType:"",tinName:"",officialLanguageCode:"ro",officialLanguageNameEn:"Romanian, Moldavian, Moldovan",officialLanguageNameLocal:"Romn",countryCallingCode:"373",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Gambia",countryNameLocal:"The Gambia",countryCode:"GM",currencyCode:"GMD",currencyNameEn:"Gambian dalasi",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"220",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Dominican Republic",countryNameLocal:"Repblica Dominicana",countryCode:"DO",currencyCode:"DOP",currencyNameEn:"Dominican peso",tinType:"RNC",tinName:"Registro Nacional del Contribuyente",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"1",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Sudan",countryNameLocal:"",countryCode:"SD",currencyCode:"SDG",currencyNameEn:"Sudanese pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"249",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Lao People's Democratic Republic",countryNameLocal:"",countryCode:"LA",currencyCode:"LAK",currencyNameEn:"Lao kip",tinType:"",tinName:"",officialLanguageCode:"lo",officialLanguageNameEn:"Lao",officialLanguageNameLocal:"",countryCallingCode:"856",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Taiwan, Province of China",countryNameLocal:"Taiwan",countryCode:"TW",currencyCode:"TWD",currencyNameEn:"New Taiwan dollar",tinType:"",tinName:"",officialLanguageCode:"zh-hant",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"886",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Republic of the Congo",countryNameLocal:"Rpublique du Congo",countryCode:"CG",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"242",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Czechia",countryNameLocal:"esk republika",countryCode:"CZ",currencyCode:"CZK",currencyNameEn:"Czech koruna",tinType:"DI",tinName:"Daov identifikan slo",officialLanguageCode:"cs",officialLanguageNameEn:"Czech",officialLanguageNameLocal:"etina",countryCallingCode:"420",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"United Kingdom",countryNameLocal:"Great Britain",countryCode:"GB",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"VAT Reg No",tinName:"Value added tax registration number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Niger",countryNameLocal:"Niger",countryCode:"NE",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"227",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Democratic Republic of the Congo",countryNameLocal:"Democratic Republic of the Congo",countryCode:"CD",currencyCode:"CDF",currencyNameEn:"Congolese franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"243",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Commonwealth of The Bahamas",countryNameLocal:"Commonwealth of The Bahamas",countryCode:"BS",currencyCode:"BSD",currencyNameEn:"Bahamian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 242",areaCodes:[],region:"Caribbean",flag:""},{countryNameEn:"Cocos (Keeling) Islands",countryNameLocal:"Pulu Kokos (Keeling)",countryCode:"CC",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"61 891",areaCodes:[],region:"Australia",flag:""},{countryNameEn:"Central African Republic",countryNameLocal:"Rpublique centrafricaine",countryCode:"CF",currencyCode:"XAF",currencyNameEn:"Central African CFA",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"236",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Cook Islands",countryNameLocal:"Kki 'irani",countryCode:"CK",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"682",areaCodes:[],region:"South Pacific Ocean",flag:""},{countryNameEn:"Falkland Islands",countryNameLocal:"Falkland Islands",countryCode:"FK",currencyCode:"FKP",currencyNameEn:"Falklands pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"500",areaCodes:[],region:"South Atlantic Ocean",flag:""},{countryNameEn:"Faroe Islands",countryNameLocal:"Frerne",countryCode:"FO",currencyCode:"DKK",currencyNameEn:"Faroese krna",tinType:"",tinName:"",officialLanguageCode:"da",officialLanguageNameEn:"Danish",officialLanguageNameLocal:"dansk",countryCallingCode:"298",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Territory of Heard Island and McDonald Islands",countryNameLocal:"Territory of Heard Island and McDonald Islands",countryCode:"HM",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"672",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"British Indian Ocean Territory",countryNameLocal:"British Indian Ocean Territory",countryCode:"IO",currencyCode:"USD",currencyNameEn:"United States Dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"246",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"Comoros",countryNameLocal:"Umoja wa Komori",countryCode:"KM",currencyCode:"KMF",currencyNameEn:"Comorian franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"269",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"Cayman Islands",countryNameLocal:"Cayman Islands",countryCode:"KY",currencyCode:"KYD",currencyNameEn:"Cayman Islands dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 345",areaCodes:[],region:"Caribbean Sea",flag:""},{countryNameEn:"Republic of the Marshall Islands",countryNameLocal:"Aolepn Aorkin aje",countryCode:"MH",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"692",areaCodes:[],region:"Pacific Ocean",flag:""},{countryNameEn:"Commonwealth of the Northern Mariana Islands",countryNameLocal:"Sankattan Siha Na Islas Marinas",countryCode:"MP",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 670",areaCodes:[],region:"Pacific Ocean",flag:""},{countryNameEn:"Turks and Caicos Islands",countryNameLocal:"Turks and Caicos Islands",countryCode:"TC",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 649",areaCodes:[],region:"Atlantic Ocean",flag:""},{countryNameEn:"French Southern and Antarctic Lands",countryNameLocal:"Terres australes et antarctiques franaises",countryCode:"TF",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"672",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"United States Minor Outlying Islands",countryNameLocal:"United States Minor Outlying Islands",countryCode:"UM",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:[],region:"Pacific Ocean",flag:""},{countryNameEn:"Holy See",countryNameLocal:"Sancta Sedes",countryCode:"VA",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"la",officialLanguageNameEn:"Latin",officialLanguageNameLocal:"lingua latna",countryCallingCode:"39",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Republic of Kosovo",countryNameLocal:"Republika e Kosovs",countryCode:"XK",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"sq",officialLanguageNameEn:"Albanian",officialLanguageNameLocal:"Shqip",countryCallingCode:"383",region:"Europe",flag:""},{countryNameEn:"Netherlands Antilles",countryNameLocal:"Nederlandse Antillen",countryCode:"AN",currencyCode:"ANG",currencyNameEn:"Netherlands Antillean guilder",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"599",region:"Europe",flag:""}];return Sy.default=e,Sy}var YI;function dde(){if(YI)return xs;YI=1;var e=xs&&xs.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(xs,"__esModule",{value:!0}),xs.customList=xs.customArray=xs.findOne=xs.filter=xs.all=xs.utils=void 0;const t=e(lde()),a=e(ode()),s=e(cde());xs.utils={groupBy:t.default};function r(){return s.default}xs.all=r;function i(d,u){return s.default.filter(f=>f[d]===u)}xs.filter=i;function l(d,u){return s.default.find(f=>f[d]===u)}xs.findOne=l;function o(d={name:"{countryNameEn} ({countryCode})",value:"{countryCode}"},{sortBy:u,sortDataBy:f,filter:p}={}){const x=[];let y=s.default;if(typeof p=="function"&&(y=y.filter(p)),f){const w=new Intl.Collator([],{sensitivity:"accent"});y.sort((v,C)=>w.compare(v[f],C[f]))}if(y.forEach(w=>{const v={};for(const C in d)v[C]=(0,a.default)(d[C],w);x.push(v)}),u&&d[u]){const w=new Intl.Collator([],{sensitivity:"accent"});x.sort((v,C)=>w.compare(v[u],C[u]))}return x}xs.customArray=o;function c(d="countryCode",u="{countryNameEn} ({countryCode})",{filter:f}={}){const p={};let x=s.default;return typeof f=="function"&&(x=x.filter(f)),x.forEach(y=>{const w=(0,a.default)(u,y);p[String(y[d])]=w}),p}return xs.customList=c,xs}var Uf=dde();const TE=(...e)=>e.flat().filter(Boolean).join(" "),ude=Uf.all(),T9=ude.map(e=>({code:`+${e.countryCallingCode}`,name:e.countryCode})),kE=[{id:1,title:"Your Account",subtitle:"Personal & Login Details"},{id:2,title:"Company Setup",subtitle:"Business Information"}],mde=()=>{const e=yt();return n.jsxs("button",{onClick:()=>e("/"),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 transition cursor-pointer",children:[n.jsx(Du,{className:"size-4 mr-1"})," Back to Home"]})},fde=h.memo(({label:e,id:t,placeholder:a,type:s="text",value:r,onChange:i,isVisible:l,onTogglePass:o,error:c,isSelect:d,options:u})=>{const f=t.toLowerCase().includes("password"),p=f?l?"text":"password":s,x=TE("w-full bg-gray-50 border px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:outline-none cursor-pointer",f?"pr-10":"",c?"border-red-500 focus:border-red-500 focus:ring-2 focus:ring-red-500/50":"border-gray-200 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50");return n.jsxs("div",{className:"flex flex-col space-y-2",children:[n.jsx("label",{htmlFor:t,className:"text-sm font-medium text-gray-700 cursor-pointer",children:e}),n.jsxs("div",{className:"relative",children:[d?n.jsx("select",{id:t,value:r,onChange:i,required:!0,className:x,children:u.map(y=>n.jsx("option",{value:y,children:y},y))}):n.jsx("input",{id:t,type:p,placeholder:a,value:r,onChange:i,required:!0,className:x}),f&&n.jsx("button",{type:"button",onClick:()=>o(t),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":l?"Hide password":"Show password",children:l?n.jsx(hu,{className:"size-5"}):n.jsx(gu,{className:"size-5"})})]}),c&&n.jsx("p",{className:"mt-1 text-sm text-red-600 font-semibold",children:c})]})}),Hd=fde,hde=h.memo(({currentStep:e,totalSteps:t})=>n.jsx("div",{className:"flex justify-between items-center mb-10 w-full max-w-xs mx-auto",children:kE.map(a=>n.jsxs(h.Fragment,{children:[n.jsxs("div",{className:"flex flex-col items-center cursor-pointer",children:[n.jsx("div",{className:TE("size-10 flex items-center justify-center rounded-full font-bold transition-all duration-300",a.id===e?"bg-amber-500 text-white shadow-lg":a.id<e?"bg-green-500 text-white":"bg-gray-100 text-gray-500 border-2 border-gray-300"),children:a.id<e?n.jsx(Rk,{className:"size-5"}):a.id}),n.jsx("span",{className:TE("mt-2 text-xs font-medium hidden sm:block",a.id===e?"text-amber-600":"text-gray-500"),children:a.title})]}),a.id<t&&n.jsx("div",{className:"flex-1 h-0.5 mx-1 transition-colors duration-300 bg-gray-300"})]},a.id))})),gde=h.memo(({formData:e,handleChange:t,handleCodeChange:a,handleTogglePass:s,isPassVisible:r,formError:i,signupError:l,termsAccepted:o,handleTerms:c,isButtonDisabled:d,handleSubmit:u,handleGoogleLogin:f})=>n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center my-6",children:[n.jsx("div",{className:"flex-grow border-t border-gray-300"}),n.jsx("span",{className:"flex-shrink mx-4 text-sm text-gray-500",children:"OR"}),n.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"md:flex md:space-x-4 space-y-6 md:space-y-0",children:[n.jsx("div",{className:"md:w-1/2",children:n.jsx(Hd,{label:"First Name",id:"first_name",placeholder:"John",value:e.first_name,onChange:t})}),n.jsx("div",{className:"md:w-1/2",children:n.jsx(Hd,{label:"Last Name",id:"last_name",placeholder:"Doe",value:e.last_name,onChange:t})})]}),n.jsxs("div",{className:"flex flex-col space-y-2",children:[n.jsx("label",{htmlFor:"phoneNumber",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Contact Number"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("select",{id:"countryCode",value:e.countryCode,onChange:a,className:"flex-shrink-0 bg-gray-50 border border-gray-200 px-3 py-2.5 rounded-lg text-gray-800 transition shadow-inner focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer",children:T9.map(p=>n.jsxs("option",{value:p.code,children:[p.name," ",p.code]},p.code))}),n.jsx("input",{id:"phone_number",type:"tel",placeholder:"0000000000",maxLength:10,value:e.phone_number,onChange:t,className:"w-full bg-gray-50 border border-gray-200 px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"})]})]}),n.jsx(Hd,{label:"Email Address",id:"email",type:"email",placeholder:"you@company.com",value:e.email,onChange:t}),n.jsx(Hd,{label:"Password",id:"password",placeholder:"Min 8 characters",value:e.password,onChange:t,isVisible:r.password,onTogglePass:s}),n.jsx(Hd,{label:"Confirm Password",id:"confirmPassword",placeholder:"Confirm your password",value:e.confirmPassword,onChange:t,isVisible:r.confirmPassword,onTogglePass:s,error:i}),l&&n.jsx("div",{className:"bg-red-100 border border-red-300 py-2 px-3 text-red-600",children:l}),n.jsxs("div",{className:"flex items-start pt-2",children:[n.jsx("input",{id:"terms",type:"checkbox",checked:o,onChange:c,className:"size-4 mt-1 rounded text-amber-500 border-gray-300 focus:ring-amber-500 cursor-pointer"}),n.jsxs("label",{htmlFor:"terms",className:"ml-3 text-sm font-medium text-gray-700 cursor-pointer",children:["I accept the ",n.jsx("a",{href:"#",className:"text-amber-600 hover:text-amber-700 font-semibold",children:"Terms"})," and ",n.jsx("a",{href:"#",className:"text-amber-600 hover:text-amber-700 font-semibold",children:"Policy"}),"."]})]})]}),i&&n.jsx("div",{className:"mt-4 p-3 text-sm rounded-lg bg-red-100 text-red-700 border border-red-300 font-medium animate-pulse",children:i}),n.jsx("button",{type:"submit",onClick:u,disabled:d,className:"w-full mt-8 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all duration-300 bg-secondary hover:bg-tertiary shadow-lg shadow-tertiary disabled:shadow-none focus-visible:outline-none cursor-pointer",children:"Continue to Company Details"})]})),pde=h.memo(({companyData:e,handleCodeChange1:t,handleSubmit:a,handleCompanyChange:s,formError:r,isSubmitted:i,isButtonDisabled:l,setStep:o,setIsSubmitted:c,setFormError:d})=>n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-6",children:[n.jsx(Hd,{label:"Company Name",id:"company_name",placeholder:"Acme Corp",value:e.company_name,onChange:s}),n.jsxs("div",{className:"flex flex-col space-y-2",children:[n.jsx("label",{htmlFor:"phoneNumber",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Company Number"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("select",{id:"countryCode",value:e.countryCode,onChange:t,className:"flex-shrink-0 bg-gray-50 border border-gray-200 px-3 py-2.5 rounded-lg text-gray-800 transition shadow-inner focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer",children:T9.map(u=>n.jsxs("option",{value:u.code,children:[u.name," ",u.code]},u.code))}),n.jsx("input",{id:"company_number",type:"tel",placeholder:"0000000000",maxLength:10,value:e.company_number,onChange:s,className:"w-full bg-gray-50 border border-gray-200 px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"})]})]}),n.jsx(Hd,{label:"Company Website",id:"company_website",type:"url",placeholder:"https://www.acme.com",value:e.company_website,onChange:s})]}),r&&n.jsx("div",{className:"p-3 text-sm rounded-lg bg-red-100 text-red-700 border border-red-300 font-medium my-6",children:r}),i&&n.jsx("div",{className:"p-3 text-sm rounded-lg bg-green-100 text-green-700 border border-green-300 font-medium my-6",children:"Account and Company Setup simulated successfully! Welcome aboard."}),n.jsxs("div",{className:"flex space-x-4 mt-8",children:[n.jsxs("button",{type:"button",onClick:()=>{o(1),c(!1),d(null)},className:"flex-1 inline-flex items-center justify-center rounded-lg h-12 px-6 text-gray-700 font-bold tracking-wide border border-gray-300 bg-white hover:bg-tertiary hover:text-white transition-colors focus-visible:ring-2 focus-visible:ring-gray-300 focus-visible:outline-none cursor-pointer",children:[n.jsx(tie,{className:"size-4 mr-2"})," Back"]}),n.jsx("button",{onClick:a,type:"submit",disabled:l,className:"flex-1 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all duration-300 bg-tertiary hover:bg-accent hover:text-secondary shadow-xl shadow-amber-500/30 disabled:shadow-none focus-visible:ring-2 focus-visible:ring-amber-500/50 focus-visible:outline-none cursor-pointer",children:"Create Account"})]})]})),xde=()=>{const e=["first_name","email","password"],t=["company_name","company_number","company_website"],[a,s]=h.useState(1),[r,i]=h.useState({first_name:"",last_name:"",countryCode:"+63",phone_number:"",email:"",password:"",confirmPassword:"",role:"CEO"}),[l,o]=h.useState({company_name:"",company_number:"",company_website:"",countryCode:"+63"}),[c,d]=h.useState({}),[u,f]=h.useState(!1),[p,x]=h.useState(null),[y,w]=h.useState(!1),{login:v}=Bs(),[C,N]=h.useState({plan_name:"Free",price:0}),[S,T]=h.useState(!1),[k,_]=h.useState(null);h.useEffect(()=>{document.title="Sign Up | Sari-Sari CRM"},[]),h.useEffect(()=>{const Y=()=>{window.google&&window.google.accounts?(window.google.accounts.id.initialize({client_id:"222789237297-r8mebl46fdacgpsnlnjca4eu0crn8hf6.apps.googleusercontent.com",callback:E}),window.google.accounts.id.renderButton(document.getElementById("googleSignupBtn"),{theme:"outline",size:"large",text:"signup_with"})):console.error("Google API not loaded properly.")};if(window.google&&window.google.accounts){Y();return}const oe=document.createElement("script");oe.src="https://accounts.google.com/gsi/client",oe.async=!0,oe.defer=!0,oe.onload=Y,document.body.appendChild(oe)},[]);const E=async Y=>{T(!0);try{const oe=HH(Y.credential);console.log("Google user:",oe);try{await ce.post("/auth/email-check",{email:oe.email})}catch(re){const ee=re.response?.data?.detail||"An error occurred.";_(ee),T(!1);return}i(re=>({...re,email:oe.email,first_name:oe.given_name||"",last_name:oe.family_name||"",password:"",profilePicture:oe.picture||"",googleId:oe.sub,auth_provider:"google",id_token:Y.credential})),s(2)}catch(oe){console.error("Google signup error:",oe),x("Failed to process Google account. Please try again.")}finally{_(null),x(null),T(!1)}},A=h.useCallback(Y=>{const{id:oe,value:re}=Y.target;o(ee=>({...ee,[oe]:re})),x(null)},[]),I=h.useCallback(Y=>{const{id:oe,value:re}=Y.target;w(!1),i(ee=>{const H={...ee,[oe]:re};if(a===1){let ye=null;if(oe==="password"&&re.length>0&&re.length<8)ye="Password must be at least 8 characters.";else if(oe==="password"||oe==="confirmPassword"){const te=oe==="password"?re:H.password,ve=oe==="confirmPassword"?re:H.confirmPassword;te&&ve&&te!==ve&&(ye="Passwords don't match.")}x(ye)}return H})},[a]),z=h.useCallback(Y=>i(oe=>({...oe,countryCode:Y.target.value})),[]),F=h.useCallback(Y=>o(oe=>({...oe,countryCode:Y.target.value})),[]),D=h.useCallback(Y=>d(oe=>({...oe,[Y]:!oe[Y]})),[]),M=h.useCallback(Y=>f(Y.target.checked),[]),W=async Y=>{if(Y.preventDefault(),w(!1),x(null),a===1){if(!e.every(re=>r[re].trim()!=="")||!u){x("Please fill in all required fields and accept the terms.");return}if(r.password!==r.confirmPassword){x("The passwords you entered do not match. Please try again.");return}if(r.password.length<8){x("Password must be at least 8 characters long.");return}if(r.auth_provider==="google"){s(2);return}try{(await ce.post("/auth/email-check",{email:r.email})).data.detail==="No existing email"&&(x(null),s(2))}catch(re){re.response&&re.response.data&&re.response.data.detail?x(re.response.data.detail):x("Something went wrong. Please try again.")}finally{T(!1)}}else if(a===2){if(!t.every(re=>(l[re]||"").trim()!=="")){x("Please fill in all required company details.");return}try{const{confirmPassword:re,...ee}=r,H={...l,company_number:`${l.countryCode} ${l.company_number}`},te=(await ce.post("/company/create",H)).data.id,ve={...ee,company_id:te,phone_number:`${ee.countryCode} ${ee.phone_number}`};if(console.log(" Sending payload:",ve),ee.auth_provider==="google"){const je=await ce.post("/auth/google/signup",ve),Oe={...C,company_id:te,status:"Active"},$e=await ce.post("/subscription/subscribe",Oe);x(null),w(!0),v(je.data)}else{const je=await ce.post("/auth/signup",ve),Oe={...C,company_id:te,status:"Active"},$e=await ce.post("/subscription/subscribe",Oe);x(null),w(!0),v(je.data)}}catch(re){if(re.response?.data?.detail){const ee=re.response.data.detail;if(Array.isArray(ee)){const H=ee.map(ye=>ye.msg).join(", ");x(H)}else x(typeof ee=="object"?ee.msg||JSON.stringify(ee):ee)}else x("Something went wrong. Please try again.")}finally{T(!1)}}},Z=h.useCallback(()=>{try{window.google.accounts.id.initialize({client_id:"222789237297-r8mebl46fdacgpsnlnjca4eu0crn8hf6.apps.googleusercontent.com",callback:Y=>{const{credential:oe}=Y;i(re=>({...re,first_name:oe.given_name||"",last_name:oe.family_name||"",email:oe.email||"",profile_picture:oe.picture||"",auth_provider:"google",id_token:oe})),s(2)}}),window.google.accounts.id.prompt()}catch(Y){console.error("Google login error:",Y),x("Google login failed. Please try again.")}},[i,x,s]),R=h.useMemo(()=>{if(a===1){const Y=e.every(ee=>(r[ee]||"").trim()!==""),oe=r.password.length>=8,re=r.password===r.confirmPassword;return!u||!!p||!Y||!oe||!re}return a===2?!t.every(oe=>(l[oe]||"").trim()!=="")||!!p:!1},[a,u,p,r,l]),Q=kE.find(Y=>Y.id===a);return n.jsxs("div",{className:"min-h-screen w-full bg-gray-100 font-sans text-gray-800 flex flex-col items-center",children:[n.jsx("div",{className:"w-full py-6 px-4 sm:px-12 lg:px-20 max-w-7xl",children:n.jsxs("div",{className:"flex items-center text-gray-800",children:[n.jsx(Qt,{className:"size-6 text-amber-500 mr-2"}),n.jsx("span",{className:"text-xl font-extrabold tracking-wider",children:"CRM"})]})}),S&&n.jsx(E9,{isLoading:S}),n.jsx("div",{className:"w-full max-w-lg px-4 pt-6",children:n.jsx(mde,{})}),n.jsx("main",{className:"w-full max-w-lg font-inter mx-auto px-4 pt-3 pb-12",children:n.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-xl p-6 md:p-10",children:[n.jsxs("header",{className:"text-center mb-8",children:[n.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:Q.title}),n.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:Q.subtitle})]}),n.jsx(hde,{currentStep:a,totalSteps:kE.length}),a===1&&n.jsx("div",{id:"googleSignupBtn"}),n.jsxs("form",{className:"mt-8",children:[a===1&&n.jsx(gde,{formData:r,handleChange:I,handleCodeChange:z,handleTogglePass:D,isPassVisible:c,formError:p,signupError:k,termsAccepted:u,handleTerms:M,isButtonDisabled:R,handleSubmit:W,handleGoogleLogin:Z}),a===2&&n.jsx(pde,{handleSubmit:W,companyData:l,handleCompanyChange:A,formError:p,isSubmitted:y,isButtonDisabled:R,setStep:s,setIsSubmitted:w,setFormError:x,handleCodeChange1:F}),a===1&&n.jsx("div",{className:"text-center mt-6",children:n.jsxs("p",{className:"text-sm text-gray-700",children:["Already have an account?",n.jsx("a",{href:"/login",className:"font-bold text-amber-600 hover:text-amber-700 ml-1 cursor-pointer",children:"Log in"})]})})]})]})})]})},yde=()=>{const e=yt();return n.jsxs("button",{onClick:()=>e("/"),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 transition mb-3 cursor-pointer",children:[n.jsx(Du,{className:"size-4 mr-1"})," Back to Home"]})},QI=({label:e,id:t,placeholder:a,type:s="text",value:r,onChange:i,isPassVisible:l,onTogglePass:o})=>{const c=t.toLowerCase().includes("password"),d=c?l?"text":"password":s;return n.jsxs("div",{className:"flex flex-col space-y-2",children:[n.jsx("label",{htmlFor:t,className:"text-sm font-medium text-gray-700",children:e}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{id:t,type:d,placeholder:a,value:r,onChange:i,required:!0,className:"w-full bg-gray-50 border border-gray-200 px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"}),c&&n.jsx("button",{type:"button",onClick:o,className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":l?"Hide password":"Show password",children:l?n.jsx(hu,{className:"size-5"}):n.jsx(gu,{className:"size-5"})})]})]})},bde=()=>{const[e,t]=h.useState({email:"",password:""}),[a,s]=h.useState(!1),[r,i]=h.useState(null),[l,o]=h.useState(!1),{isLoggedIn:c,login:d,userRole:u}=Bs(),f=yt();h.useEffect(()=>{document.title="Login | Sari-Sari CRM"},[]),h.useEffect(()=>{c&&(u==="CEO"||u==="Admin"?f("/admin"):u==="Group Manager"?f("/group-manager"):u==="Manager"?f("/manager"):u==="Marketing"?f("/marketing"):u==="Sales"&&f("/sales"))},[c,f,u]);const p=w=>{const{id:v,value:C}=w.target;t(N=>({...N,[v]:C}))},x=async w=>{w.preventDefault(),i(null);try{const v=await ce.post("/auth/login",e);d(v.data),i(null)}catch(v){v.response&&v.response.data&&v.response.data.detail?i(v.response.data.detail):i("Something went wrong. Please try again.")}};h.useEffect(()=>{const w=document.createElement("script");return w.src="https://accounts.google.com/gsi/client",w.async=!0,w.defer=!0,w.onload=()=>{window.google&&(window.google.accounts.id.initialize({client_id:"222789237297-r8mebl46fdacgpsnlnjca4eu0crn8hf6.apps.googleusercontent.com",callback:y}),window.google.accounts.id.renderButton(document.getElementById("googleLoginBtn"),{theme:"outline",size:"large",text:"signin_with"}))},document.body.appendChild(w),()=>{document.body.contains(w)&&document.body.removeChild(w)}},[]);const y=async w=>{o(!0);try{const v=HH(w.credential),C=await ce.post("/auth/google/login",{id_token:w.credential});d(C.data)}catch(v){console.error("Google login failed:",v);const C=v.response?.data?.detail||"Google login failed. Please try again.";i(C)}finally{o(!1)}};return n.jsxs("div",{className:"min-h-screen w-full bg-gray-100 font-sans text-gray-800 flex flex-col items-center",children:[n.jsx("div",{className:"w-full py-6 px-4 sm:px-12 lg:px-20 max-w-7xl",children:n.jsx("div",{className:"flex items-center text-gray-800",children:n.jsx("span",{className:"text-xl font-extrabold tracking-wider",children:"CRM"})})}),l&&n.jsx(E9,{isLoading:l}),n.jsxs("main",{className:"w-full max-w-lg font-inter mx-auto px-4 pt-6 pb-12",children:[n.jsx(yde,{}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-xl p-6 md:p-10",children:[n.jsxs("header",{className:"text-center mb-6",children:[n.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Login"}),n.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:"Sign in to access your dashboard."})]}),n.jsx("div",{id:"googleLoginBtn"}),n.jsxs("div",{className:"flex items-center my-6",children:[n.jsx("div",{className:"flex-grow border-t border-gray-300"}),n.jsx("span",{className:"flex-shrink mx-4 text-sm text-gray-500",children:"OR"}),n.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),n.jsxs("form",{onSubmit:x,className:"space-y-6 cursor-pointer",children:[n.jsx(QI,{label:"Email",id:"email",type:"email",placeholder:"you@example.com",value:e.email,onChange:p}),n.jsx(QI,{label:"Password",id:"password",type:"password",placeholder:"Enter your password",value:e.password,onChange:p,isPassVisible:a,onTogglePass:()=>s(w=>!w)}),r&&n.jsx("div",{className:"bg-red-100 border border-red-300 py-2 px-3 text-red-600",children:r}),n.jsx("button",{type:"submit",className:"w-full mt-2 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all disabled:opacity-50 bg-secondary text-gray-900 hover:bg-tertiary shadow-xl focus-visible:ring-2 focus-visible:ring-amber-500/50 cursor-pointer",children:"Log In"}),n.jsx("div",{className:"text-center mt-1",children:n.jsx("a",{href:"/forgot-password",className:"text-sm font-medium text-amber-600 hover:text-amber-700 cursor-pointer",children:"Forgot Password?"})})]}),n.jsx("div",{className:"text-center mt-6",children:n.jsxs("p",{className:"text-sm text-gray-700",children:["Don't have an account?",n.jsx("a",{href:"/signup",className:"font-bold text-amber-600 hover:text-amber-700 ml-1 cursor-pointer",children:"Sign Up"})]})})]})]})]})},vde=({onClick:e})=>n.jsxs("button",{onClick:e,className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 transition mb-3 cursor-pointer",children:[n.jsx(Du,{className:"size-4 mr-1"})," Back"]}),_S=({label:e,id:t,placeholder:a,type:s="text",value:r,onChange:i,icon:l})=>{const[o,c]=h.useState(!1),d=s==="password";return n.jsxs("div",{className:"flex flex-col space-y-2",children:[n.jsx("label",{htmlFor:t,className:"text-sm font-medium text-gray-700",children:e}),n.jsxs("div",{className:"relative flex items-center",children:[l&&n.jsx(l,{className:"absolute left-3 text-gray-500 size-5"}),n.jsx("input",{id:t,type:d&&o?"text":s,placeholder:a,value:r,onChange:i,required:!0,className:"w-full bg-gray-50 border border-gray-200 pl-10 pr-10 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"}),d&&n.jsx("button",{type:"button",onClick:()=>c(u=>!u),className:"absolute right-3 text-gray-500",children:o?n.jsx(hu,{className:"size-5"}):n.jsx(gu,{className:"size-5"})})]})]})},wde=({otp:e,setOtp:t})=>n.jsx("div",{className:"flex justify-between gap-2",children:[...Array(6)].map((a,s)=>n.jsx("input",{type:"text",maxLength:"1",className:"w-12 h-12 text-center text-lg font-bold border border-gray-300 rounded-lg focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50",value:e[s]||"",onChange:r=>{const i=r.target.value;if(/\d/.test(i)||i===""){const l=[...e];l[s]=i,t(l)}}},s))}),Nde=()=>{const e=yt(),[t,a]=h.useState(1),[s,r]=h.useState(""),[i,l]=h.useState(["","","","","",""]),[o,c]=h.useState(""),[d,u]=h.useState(""),f=w=>{w.preventDefault(),a(2)},p=w=>{w.preventDefault(),a(3)},x=w=>{if(w.preventDefault(),o!==d){alert("Passwords do not match!");return}alert("Password reset successfully!")},y=()=>{t>1?a(t-1):e("/login")};return n.jsxs("div",{className:"min-h-screen w-full bg-gray-100 font-sans text-gray-800 flex flex-col items-center",children:[n.jsx("div",{className:"w-full py-6 px-4 sm:px-12 lg:px-20 max-w-7xl",children:n.jsx("div",{className:"flex items-center text-gray-800",children:n.jsx("span",{className:"text-xl font-extrabold tracking-wider",children:"CRM"})})}),n.jsxs("main",{className:"w-full max-w-lg font-inter mx-auto px-4 pt-6 pb-12",children:[n.jsx(vde,{onClick:y}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-xl p-6 md:p-10",children:[t===1&&n.jsxs(n.Fragment,{children:[n.jsxs("header",{className:"text-center mb-6",children:[n.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Forgot Password"}),n.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:"Enter your email and we'll send you a verification code."})]}),n.jsxs("form",{onSubmit:f,className:"space-y-6 cursor-pointer",children:[n.jsx(_S,{label:"Email Address",id:"email",type:"email",placeholder:"you@example.com",value:s,onChange:w=>r(w.target.value),icon:Zn}),n.jsx("button",{className:"w-full mt-3 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all bg-secondary text-gray-900 hover:bg-tertiary shadow-xl",children:"Send OTP"})]})]}),t===2&&n.jsxs(n.Fragment,{children:[n.jsxs("header",{className:"text-center mb-6",children:[n.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Enter Verification Code"}),n.jsxs("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:["We've sent a 6-digit code to ",n.jsx("strong",{children:s}),"."]})]}),n.jsxs("form",{onSubmit:p,className:"space-y-6",children:[n.jsx(wde,{otp:i,setOtp:l}),n.jsx("button",{className:"w-full mt-3 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all bg-secondary text-gray-900 hover:bg-tertiary shadow-xl",children:"Verify Code"})]})]}),t===3&&n.jsxs(n.Fragment,{children:[n.jsxs("header",{className:"text-center mb-6",children:[n.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Reset Password"}),n.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:"Enter your new password below."})]}),n.jsxs("form",{onSubmit:x,className:"space-y-6",children:[n.jsx(_S,{label:"New Password",id:"password",type:"password",placeholder:"Enter new password",value:o,onChange:w=>c(w.target.value),icon:fl}),n.jsx(_S,{label:"Confirm Password",id:"confirm-password",type:"password",placeholder:"Confirm new password",value:d,onChange:w=>u(w.target.value),icon:fl}),n.jsx("button",{className:"w-full mt-3 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all bg-secondary text-gray-900 hover:bg-tertiary shadow-xl",children:"Reset Password"})]})]})]})]})]})},Kt=()=>{const[e,t]=h.useState(null),[a,s]=h.useState(!1),[r,i]=h.useState(!0),l=yt(),o=async()=>{try{const d=await ce.get("/auth/me");t(d.data),s(!0)}catch(d){t(null),s(!1),console.warn("Unauthorized  possible expired token or not logged in.",d)}finally{i(!1)}};return h.useEffect(()=>{o()},[]),{user:e,isLoggedIn:a,loading:r,fetchUser:o,logout:async()=>{try{await ce.post("/auth/logout")}catch{}t(null),s(!1),l("/login")}}};function Rt({message:e="Loading..."}){return n.jsx("div",{className:"absolute inset-0 bg-primary/90 flex items-center justify-center z-40 lg:flex hidden",children:n.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[n.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0ms",animationDuration:"0.6s"}}),n.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"150ms",animationDuration:"0.6s"}}),n.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"300ms",animationDuration:"0.6s"}})]})})}const jde=(e,t)=>{const a=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${a}${s}`.toUpperCase()||"U"};function _y(){const{user:e,loading:t,fetchUser:a}=Kt(),[s,r]=h.useState(!1),[i,l]=h.useState(!1),[o,c]=h.useState(!1),[d,u]=h.useState(!1),[f,p]=h.useState(!1),[x,y]=h.useState(!1),[w,v]=h.useState(!1),[C,N]=h.useState(!1),[S,T]=h.useState(null),[k,_]=h.useState(null),E=h.useRef(null),[A,I]=h.useState({firstName:"",lastName:"",email:"",phoneNumber:""}),[z,F]=h.useState({currentPassword:"",newPassword:"",confirmPassword:""});h.useEffect(()=>{e&&(I({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),_(e.profile_picture||null))},[e]),h.useEffect(()=>{document.title="Manage Account | Sari-Sari CRM"},[]);const D=(Q,Y)=>{I(oe=>({...oe,[Q]:Y}))},M=(Q,Y)=>{F(oe=>({...oe,[Q]:Y}))},W=Q=>{const Y=Q.target.files?.[0];if(!Y)return;if(!Y.type.startsWith("image/")){q.error("Please select an image file");return}if(Y.size>5*1024*1024){q.error("Image size should be less than 5MB");return}const oe=new FileReader;oe.onloadend=()=>{T(oe.result),_(oe.result)},oe.readAsDataURL(Y)},Z=async Q=>{if(Q.preventDefault(),!A.firstName.trim()||!A.lastName.trim()){q.warn("Please fill in all required fields.");return}l(!0);try{const Y={first_name:A.firstName.trim(),last_name:A.lastName.trim(),phone_number:A.phoneNumber.trim()||null};S!==null&&(Y.profile_picture=S),await ce.put("/users/me",Y),await a(),c(!1),T(null),window.dispatchEvent(new CustomEvent("userProfileUpdated")),q.success("Account information updated successfully!")}catch(Y){console.error("Error updating account:",Y);const oe=Y.response?.data?.detail||"Failed to update account information. Please try again.";q.error(oe)}finally{l(!1)}},R=async Q=>{if(Q.preventDefault(),!z.newPassword||!z.confirmPassword){q.warn("Please fill in all password fields.");return}if(z.newPassword.length<8){q.warn("Password must be at least 8 characters long.");return}if(z.newPassword!==z.confirmPassword){q.warn("New password and confirm password do not match.");return}N(!0);try{const Y={password:z.newPassword};await ce.put("/users/me",Y),await a(),F({currentPassword:"",newPassword:"",confirmPassword:""}),window.dispatchEvent(new CustomEvent("userProfileUpdated")),N(!1),q.success("Password changed successfully!")}catch(Y){console.error("Error changing password:",Y);const oe=Y.response?.data?.detail||"Failed to change password. Please try again.";q.error(oe)}finally{N(!1)}};return n.jsxs("div",{className:"p-2 lg:p-8 font-inter relative",children:[(t||!e)&&n.jsx(Rt,{}),e&&n.jsxs("div",{children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-gray-800 mb-2",children:"Manage Your Account"}),n.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Update your account information and change your password"})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mb-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2",children:[n.jsx(Jt,{className:"text-blue-600"}),"Profile Information"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:!o&&n.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition text-sm",children:[n.jsx(oa,{}),"Edit Profile"]})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 mb-6 pb-6 border-b border-gray-200",children:[n.jsxs("div",{className:"flex-shrink-0 relative group",children:[k?n.jsx("div",{className:"relative",children:n.jsx("img",{src:k,alt:`${e.first_name} ${e.last_name}`,className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full object-cover border-2 border-gray-200 shadow-sm"})}):n.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 text-white flex items-center justify-center text-2xl sm:text-3xl font-semibold border-2 border-gray-200 shadow-sm",children:jde(e.first_name,e.last_name)}),o&&n.jsxs("div",{className:"absolute bottom-0 right-0",children:[n.jsx("input",{type:"file",ref:E,accept:"image/*",onChange:W,className:"hidden",id:"profile-picture-upload"}),n.jsx("label",{htmlFor:"profile-picture-upload",className:"cursor-pointer bg-gray-900 text-white p-1.5 rounded-full shadow-lg hover:bg-gray-800 transition flex items-center justify-center border-2 border-white",title:"Change profile picture",children:n.jsx(FH,{size:14})})]})]}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[e.first_name," ",e.last_name]}),n.jsx("p",{className:"text-gray-600 text-sm",children:e.email}),n.jsx("span",{className:"inline-block mt-2 px-3 py-1 bg-blue-100 text-blue-700 text-xs font-semibold rounded-md",children:e.role})]})]}),o?n.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["First Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Jt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",value:A.firstName,onChange:Q=>D("firstName",Q.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Jt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",value:A.lastName,onChange:Q=>D("lastName",Q.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),n.jsxs("div",{className:"sm:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Email"}),n.jsxs("div",{className:"relative",children:[n.jsx(Zn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"email",value:A.email,disabled:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-600 cursor-not-allowed outline-none",readOnly:!0})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),n.jsxs("div",{className:"sm:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Phone Number"}),n.jsxs("div",{className:"relative",children:[n.jsx(At,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"tel",value:A.phoneNumber,onChange:Q=>D("phoneNumber",Q.target.value),placeholder:"+1 (555) 123-4567",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t border-gray-200",children:[n.jsx("button",{type:"button",onClick:()=>{c(!1),I({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),T(null),_(e.profile_picture||null),E.current&&(E.current.value="")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition",disabled:i,children:"Cancel"}),n.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:i,children:[n.jsx(Fk,{}),i?"Saving...":"Save Changes"]})]})]}):n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"First Name"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.first_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Name"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.last_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Email"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Phone Number"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.phone_number||"N/A"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[n.jsx(fl,{className:"text-blue-600"}),"Change Password"]}),n.jsxs("form",{onSubmit:R,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["New Password ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(fl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",style:x?void 0:{WebkitTextSecurity:"disc"},value:z.newPassword,onChange:Q=>M("newPassword",Q.target.value),placeholder:"Enter new password (min. 8 characters)",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),n.jsx("button",{type:"button",onClick:()=>y(Q=>!Q),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":x?"Hide password":"Show password",children:x?n.jsx(hu,{className:"size-5"}):n.jsx(gu,{className:"size-5"})})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Confirm New Password ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(fl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",style:w?void 0:{WebkitTextSecurity:"disc"},value:z.confirmPassword,onChange:Q=>M("confirmPassword",Q.target.value),placeholder:"Confirm new password",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),n.jsx("button",{type:"button",onClick:()=>v(Q=>!Q),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":w?"Hide password":"Show password",children:w?n.jsx(hu,{className:"size-5"}):n.jsx(gu,{className:"size-5"})})]})]}),n.jsx("div",{className:"pt-4 border-t border-gray-200 flex justify-center lg:justify-start",children:n.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:C,children:[n.jsx(fl,{}),C?"Changing Password...":"Change Password"]})})]})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mt-6",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[n.jsx(UH,{className:"text-blue-600"}),"Account Information"]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Role"}),n.jsx("span",{className:"inline-block px-3 py-1 bg-blue-100 text-blue-700 text-sm font-semibold rounded-md",children:e.role})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Status"}),n.jsx("span",{className:`inline-block px-3 py-1 text-sm font-semibold rounded-md ${e.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:e.is_active?"Active":"Inactive"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Company"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.company?.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Auth Provider"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.auth_provider?e.auth_provider.charAt(0).toUpperCase()+e.auth_provider.slice(1):"N/A"})]}),e.created_at&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Account Created"}),n.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),e.last_login&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Login"}),n.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.last_login).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})})]})]})]})]})]})}function Cde({toggleSidebar:e}){const[t,a]=h.useState(!1),[s,r]=h.useState(!1),[i,l]=h.useState([]),[o,c]=h.useState(0),d=h.useRef(null),u=h.useRef(null),f=Yt(),p=yt(),{logout:x}=Bs(),{user:y,fetchUser:w}=Kt(),C={"/admin/dashboard":"Dashboard","/admin/accounts":"Accounts","/admin/contacts":"Contacts","/reports":"Reports","/leads":"Leads","/admin/Audit":"Audit","/admin/targets":"Targets","/admin/leads":"Leads","/admin/quotes":"Quotes","/admin/users":"Users","/admin/deals":"Deals"}[f.pathname]||"Admin Panel";return h.useEffect(()=>{const N=()=>{w()};return window.addEventListener("userProfileUpdated",N),()=>{window.removeEventListener("userProfileUpdated",N)}},[w]),h.useEffect(()=>{if(!y?.id)return;const N=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",S=window.location.protocol==="https:"?"wss:":"ws:",T=N?"localhost:8000":window.location.host,k=`${S}//${T}/ws/notifications?user_id=${y.id}`,_=new WebSocket(k);return _.onopen=()=>console.log("Admin WS Connected"),_.onmessage=E=>{const A=JSON.parse(E.data);l(I=>[A,...I]),c(I=>I+1)},_.onclose=()=>console.log("Admin WS Disconnected"),()=>_.close()},[y?.id]),h.useEffect(()=>{function N(S){d.current&&!d.current.contains(S.target)&&a(!1),u.current&&!u.current.contains(S.target)&&r(!1)}return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),n.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:n.jsx(ex,{className:"text-2xl"})}),n.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:C})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"relative",ref:u,children:[n.jsxs("button",{onClick:()=>r(!s),className:"relative text-gray-600 hover:text-gray-800 transition",children:[n.jsx(Zp,{className:"text-xl"}),o>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] w-4 h-4 flex items-center justify-center rounded-full font-semibold",children:o})]}),s&&n.jsxs("div",{className:"absolute right-0 mt-3 w-80 bg-white rounded-xl shadow-lg border z-50 overflow-hidden animate-fade-in",children:[n.jsxs("div",{className:"p-3 border-b bg-gray-50 flex justify-between items-center",children:[n.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:"Notifications"}),n.jsx("button",{onClick:()=>{l([]),c(0)},className:"text-xs text-blue-600 hover:underline",children:"Clear"})]}),n.jsx("div",{className:"max-h-60 overflow-y-auto",children:i.length>0?i.map((N,S)=>n.jsx("div",{className:"p-3 border-b text-sm hover:bg-gray-50 cursor-pointer",children:N.title||N.message||"New Update"},S)):n.jsx("div",{className:"p-4 text-center text-gray-500 text-xs",children:"No notifications"})})]})]}),n.jsxs("div",{className:"relative",ref:d,children:[n.jsxs("button",{onClick:()=>a(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[n.jsx("img",{src:y?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 aspect-square object-cover rounded-full"}),n.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[y?.first_name," ",y?.last_name]})]}),t&&n.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4",children:[n.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[n.jsx("img",{src:y?.profile_picture||"https://via.placeholder.com/80",alt:"Profile",className:"w-16 h-16 rounded-full object-cover"}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[y?.first_name," ",y?.middle_name," ",y?.last_name]}),n.jsx("p",{className:"text-[11px] text-gray-600 font-light w-full truncate",children:"CEO"})]})]}),n.jsxs("div",{className:"mt-6 space-y-1 px-4 text-left",children:[n.jsx("button",{onClick:()=>{p("/admin/users"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Invite Your Team"}),n.jsx("button",{onClick:()=>{p("/admin/manage-account"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Manage Your Account"}),n.jsx("div",{className:"border-t border-gray-200 my-2"}),n.jsx("button",{onClick:x,className:"block w-full text-sm text-red-600 hover:text-red-700 hover:bg-gray-50 py-2 rounded text-left",children:"Logout"})]})]})]})]})]})}function Sde(){const[e,t]=h.useState(!1),[a,s]=h.useState(!1),[r,i]=h.useState(!1),[l,o]=h.useState(!1),c=Yt(),{user:d}=Kt();h.useEffect(()=>{d&&console.log("Fetched user:",d)},[d]),h.useEffect(()=>{document.title="Admin Panel | Sari-Sari CRM"},[]);const f=["/admin/accounts","/admin/contacts","/admin/leads","/admin/deals","/admin/quotes","/admin/targets"].includes(c.pathname);h.useEffect(()=>{f&&t(!0)},[c.pathname]);const p="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",x="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition";return n.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[n.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${l?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[n.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[n.jsxs("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:[" Sari-Sari.CRM"," ",n.jsx("span",{className:"text-[12px] text-gray-700 font-medium align-bottom",children:"v2"})]}),d&&d.company&&n.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:d.company.company_name})]}),n.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[n.jsxs(Dt,{to:"/admin/dashboard",className:({isActive:y})=>y?p:x,children:[n.jsx(Jp,{className:"text-lg"}),n.jsx("span",{children:"Dashboard"})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>t(!e),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-lg"}),"Sales"]}),n.jsx(jt,{className:`transition-transform ${e?"rotate-180":""}`})]}),e&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(Dt,{to:"/admin/accounts",className:({isActive:y})=>y?p:x,children:[n.jsx(On,{})," Accounts"]}),n.jsxs(Dt,{to:"/admin/contacts",className:({isActive:y})=>y?p:x,children:[n.jsx(Jt,{})," Contacts"]}),n.jsxs(Dt,{to:"/admin/leads",className:({isActive:y})=>y?p:x,children:[n.jsx(Wn,{})," Leads"]}),n.jsxs(Dt,{to:"/admin/deals",className:({isActive:y})=>y?p:x,children:[n.jsx(Qt,{})," Deals"]}),n.jsxs(Dt,{to:"/admin/quotes",className:({isActive:y})=>y?p:x,children:[n.jsx(xn,{})," Quotes"]}),n.jsxs(Dt,{to:"/admin/targets",className:({isActive:y})=>y?p:x,children:[n.jsx(tr,{})," Targets"]})]})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!a),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(ws,{className:"text-lg"}),"Activity"]}),n.jsx(jt,{className:`transition-transform ${a?"rotate-180":""}`})]}),a&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(Dt,{to:"/admin/tasks",className:({isActive:y})=>y?p:x,children:[n.jsx(Gt,{})," Tasks"]}),n.jsxs(Dt,{to:"/admin/meetings",className:({isActive:y})=>y?p:x,children:[n.jsx(Ct,{})," Meetings"]}),n.jsxs(Dt,{to:"/admin/calls",className:({isActive:y})=>y?p:x,children:[n.jsx(Ls,{})," Calls"]}),n.jsxs(Dt,{to:"/admin/audit",className:({isActive:y})=>y?p:x,children:[n.jsx(ws,{})," Audit"]})]})]}),n.jsx("div",{children:n.jsx(Dt,{to:"/admin/territory",className:({isActive:y})=>y?p:x,children:n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(zo,{className:"text-lg"}),"Territory"]})})}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!r),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Uk,{className:"text-lg"}),"User Management"]}),n.jsx(jt,{className:`transition-transform ${r?"rotate-180":""}`})]}),r&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(Dt,{to:"/admin/users",className:({isActive:y})=>y?p:x,children:[n.jsx(On,{})," Users"]}),n.jsxs(Dt,{to:"/admin/manage-account",className:({isActive:y})=>y?p:x,children:[n.jsx(Jt,{})," Manage Account"]}),n.jsxs(Dt,{to:"/admin/company-details",className:({isActive:y})=>y?p:x,children:[n.jsx(Iw,{})," Settings"]})]})]})]}),n.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),l&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>o(!1)}),n.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[n.jsx(Cde,{toggleSidebar:()=>o(!l)}),n.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:n.jsx(Gp,{})})]})]})}function _de(e){return St({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M160 0c17.7 0 32 14.3 32 32l0 35.7c1.6 .2 3.1 .4 4.7 .7c.4 .1 .7 .1 1.1 .2l48 8.8c17.4 3.2 28.9 19.9 25.7 37.2s-19.9 28.9-37.2 25.7l-47.5-8.7c-31.3-4.6-58.9-1.5-78.3 6.2s-27.2 18.3-29 28.1c-2 10.7-.5 16.7 1.2 20.4c1.8 3.9 5.5 8.3 12.8 13.2c16.3 10.7 41.3 17.7 73.7 26.3l2.9 .8c28.6 7.6 63.6 16.8 89.6 33.8c14.2 9.3 27.6 21.9 35.9 39.5c8.5 17.9 10.3 37.9 6.4 59.2c-6.9 38-33.1 63.4-65.6 76.7c-13.7 5.6-28.6 9.2-44.4 11l0 33.4c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-34.9c-.4-.1-.9-.1-1.3-.2l-.2 0s0 0 0 0c-24.4-3.8-64.5-14.3-91.5-26.3c-16.1-7.2-23.4-26.1-16.2-42.2s26.1-23.4 42.2-16.2c20.9 9.3 55.3 18.5 75.2 21.6c31.9 4.7 58.2 2 76-5.3c16.9-6.9 24.6-16.9 26.8-28.9c1.9-10.6 .4-16.7-1.3-20.4c-1.9-4-5.6-8.4-13-13.3c-16.4-10.7-41.5-17.7-74-26.3l-2.8-.7s0 0 0 0C119.4 279.3 84.4 270 58.4 253c-14.2-9.3-27.5-22-35.8-39.6c-8.4-17.9-10.1-37.9-6.1-59.2C23.7 116 52.3 91.2 84.8 78.3c13.3-5.3 27.9-8.9 43.2-11L128 32c0-17.7 14.3-32 32-32z"},child:[]}]})(e)}function Ade(e){return St({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M544 248l0 3.3 69.7-69.7c21.9-21.9 21.9-57.3 0-79.2L535.6 24.4c-21.9-21.9-57.3-21.9-79.2 0L416.3 64.5c-2.7-.3-5.5-.5-8.3-.5L296 64c-37.1 0-67.6 28-71.6 64l-.4 0 0 120c0 22.1 17.9 40 40 40s40-17.9 40-40l0-72c0 0 0-.1 0-.1l0-15.9 16 0 136 0c0 0 0 0 .1 0l7.9 0c44.2 0 80 35.8 80 80l0 8zM336 192l0 56c0 39.8-32.2 72-72 72s-72-32.2-72-72l0-118.6c-35.9 6.2-65.8 32.3-76 68.2L99.5 255.2 26.3 328.4c-21.9 21.9-21.9 57.3 0 79.2l78.1 78.1c21.9 21.9 57.3 21.9 79.2 0l37.7-37.7c.9 0 1.8 .1 2.7 .1l160 0c26.5 0 48-21.5 48-48c0-5.6-1-11-2.7-16l2.7 0c26.5 0 48-21.5 48-48c0-12.8-5-24.4-13.2-33c25.7-5 45.1-27.6 45.2-54.8l0-.4c-.1-30.8-25.1-55.8-56-55.8c0 0 0 0 0 0l-120 0z"},child:[]}]})(e)}function Ede(e){return St({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M64 32C46.3 32 32 46.3 32 64l0 64c-17.7 0-32 14.3-32 32s14.3 32 32 32l0 32c-17.7 0-32 14.3-32 32s14.3 32 32 32l0 64 0 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-64 80 0c68.4 0 127.7-39 156.8-96l19.2 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-.7 0c.5-5.3 .7-10.6 .7-16s-.2-10.7-.7-16l.7 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-19.2 0C303.7 71 244.4 32 176 32L64 32zm190.4 96L96 128l0-32 80 0c30.5 0 58.2 12.2 78.4 32zM96 192l190.9 0c.7 5.2 1.1 10.6 1.1 16s-.4 10.8-1.1 16L96 224l0-32zm158.4 96c-20.2 19.8-47.9 32-78.4 32l-80 0 0-32 158.4 0z"},child:[]}]})(e)}function yi({props:e,name:t}){return Loe({props:e,name:t,defaultTheme:sL,themeId:Jw})}function Co(e){const{elementType:t,externalSlotProps:a,ownerState:s,skipResolvingSlotProps:r=!1,...i}=e,l=r?{}:C9(a,s),{props:o,internalRef:c}=S9({...i,externalSlotProps:l}),d=Cl(c,l?.ref,e.additionalProps?.ref);return j9(t,{...o,ref:d},s)}function os(e){const t=h.useRef(e);return Xa(()=>{t.current=e}),h.useRef((...a)=>(0,t.current)(...a)).current}var nv=Symbol("NOT_FOUND");function Tde(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function kde(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Lde(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(a=>typeof a=="function")){const a=e.map(s=>typeof s=="function"?`function ${s.name||"unnamed"}()`:typeof s).join(", ");throw new TypeError(`${t}[${a}]`)}}var KI=e=>Array.isArray(e)?e:[e];function Pde(e){const t=Array.isArray(e[0])?e[0]:e;return Lde(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Dde(e,t){const a=[],{length:s}=e;for(let r=0;r<s;r++)a.push(e[r].apply(null,t));return a}function Ode(e){let t;return{get(a){return t&&e(t.key,a)?t.value:nv},put(a,s){t={key:a,value:s}},getEntries(){return t?[t]:[]},clear(){t=void 0}}}function Mde(e,t){let a=[];function s(o){const c=a.findIndex(d=>t(o,d.key));if(c>-1){const d=a[c];return c>0&&(a.splice(c,1),a.unshift(d)),d.value}return nv}function r(o,c){s(o)===nv&&(a.unshift({key:o,value:c}),a.length>e&&a.pop())}function i(){return a}function l(){a=[]}return{get:s,put:r,getEntries:i,clear:l}}var Ide=(e,t)=>e===t;function $de(e){return function(a,s){if(a===null||s===null||a.length!==s.length)return!1;const{length:r}=a;for(let i=0;i<r;i++)if(!e(a[i],s[i]))return!1;return!0}}function Rde(e,t){const a=typeof t=="object"?t:{equalityCheck:t},{equalityCheck:s=Ide,maxSize:r=1,resultEqualityCheck:i}=a,l=$de(s);let o=0;const c=r<=1?Ode(l):Mde(r,l);function d(){let u=c.get(arguments);if(u===nv){if(u=e.apply(null,arguments),o++,i){const p=c.getEntries().find(x=>i(x.value,u));p&&(u=p.value,o!==0&&o--)}c.put(arguments,u)}return u}return d.clearCache=()=>{c.clear(),d.resetResultsCount()},d.resultsCount=()=>o,d.resetResultsCount=()=>{o=0},d}var zde=class{constructor(e){this.value=e}deref(){return this.value}},Fde=typeof WeakRef<"u"?WeakRef:zde,Ude=0,XI=1;function Ay(){return{s:Ude,v:void 0,o:null,p:null}}function k9(e,t={}){let a=Ay();const{resultEqualityCheck:s}=t;let r,i=0;function l(){let o=a;const{length:c}=arguments;for(let f=0,p=c;f<p;f++){const x=arguments[f];if(typeof x=="function"||typeof x=="object"&&x!==null){let y=o.o;y===null&&(o.o=y=new WeakMap);const w=y.get(x);w===void 0?(o=Ay(),y.set(x,o)):o=w}else{let y=o.p;y===null&&(o.p=y=new Map);const w=y.get(x);w===void 0?(o=Ay(),y.set(x,o)):o=w}}const d=o;let u;if(o.s===XI)u=o.v;else if(u=e.apply(null,arguments),i++,s){const f=r?.deref?.()??r;f!=null&&s(f,u)&&(u=f,i!==0&&i--),r=typeof u=="object"&&u!==null||typeof u=="function"?new Fde(u):u}return d.s=XI,d.v=u,u}return l.clearCache=()=>{a=Ay(),l.resetResultsCount()},l.resultsCount=()=>i,l.resetResultsCount=()=>{i=0},l}function L9(e,...t){const a=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,s=(...r)=>{let i=0,l=0,o,c={},d=r.pop();typeof d=="object"&&(c=d,d=r.pop()),Tde(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const u={...a,...c},{memoize:f,memoizeOptions:p=[],argsMemoize:x=k9,argsMemoizeOptions:y=[]}=u,w=KI(p),v=KI(y),C=Pde(r),N=f(function(){return i++,d.apply(null,arguments)},...w),S=x(function(){l++;const k=Dde(C,arguments);return o=N.apply(null,k),o},...v);return Object.assign(S,{resultFunc:d,memoizedResultFunc:N,dependencies:C,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>o,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:f,argsMemoize:x})};return Object.assign(s,{withTypes:()=>s}),s}var nt=L9(k9),Bde=Object.assign((e,t=nt)=>{kde(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const a=Object.keys(e),s=a.map(i=>e[i]);return t(s,(...i)=>i.reduce((l,o,c)=>(l[a[c]]=o,l),{}))},{withTypes:()=>Bde});const Hde=L9({memoize:Rde,memoizeOptions:{maxSize:1,equalityCheck:Object.is}}),wt=(e,t,a,s,r,i,l,o,...c)=>{if(c.length>0)throw new Error("Unsupported number of selectors");let d;if(e&&t&&a&&s&&r&&i&&l&&o)d=(u,f,p,x)=>{const y=e(u,f,p,x),w=t(u,f,p,x),v=a(u,f,p,x),C=s(u,f,p,x),N=r(u,f,p,x),S=i(u,f,p,x),T=l(u,f,p,x);return o(y,w,v,C,N,S,T,f,p,x)};else if(e&&t&&a&&s&&r&&i&&l)d=(u,f,p,x)=>{const y=e(u,f,p,x),w=t(u,f,p,x),v=a(u,f,p,x),C=s(u,f,p,x),N=r(u,f,p,x),S=i(u,f,p,x);return l(y,w,v,C,N,S,f,p,x)};else if(e&&t&&a&&s&&r&&i)d=(u,f,p,x)=>{const y=e(u,f,p,x),w=t(u,f,p,x),v=a(u,f,p,x),C=s(u,f,p,x),N=r(u,f,p,x);return i(y,w,v,C,N,f,p,x)};else if(e&&t&&a&&s&&r)d=(u,f,p,x)=>{const y=e(u,f,p,x),w=t(u,f,p,x),v=a(u,f,p,x),C=s(u,f,p,x);return r(y,w,v,C,f,p,x)};else if(e&&t&&a&&s)d=(u,f,p,x)=>{const y=e(u,f,p,x),w=t(u,f,p,x),v=a(u,f,p,x);return s(y,w,v,f,p,x)};else if(e&&t&&a)d=(u,f,p,x)=>{const y=e(u,f,p,x),w=t(u,f,p,x);return a(y,w,f,p,x)};else if(e&&t)d=(u,f,p,x)=>{const y=e(u,f,p,x);return t(y,f,p,x)};else if(e)d=e;else throw new Error("Missing arguments");return d},eN=e=>(...t)=>{const a=new WeakMap;let s=1;const r=t[t.length-1],i=t.length-1||1,l=Math.max(r.length-i,0);if(l>3)throw new Error("Unsupported number of arguments");return(c,d,u,f)=>{let p=c.__cacheKey__;p||(p={id:s},c.__cacheKey__=p,s+=1);let x=a.get(p);if(!x){const y=t.length===1?[C=>C,r]:t;let w=t;const v=[void 0,void 0,void 0];switch(l){case 0:break;case 1:{w=[...y.slice(0,-1),()=>v[0],r];break}case 2:{w=[...y.slice(0,-1),()=>v[0],()=>v[1],r];break}case 3:{w=[...y.slice(0,-1),()=>v[0],()=>v[1],()=>v[2],r];break}default:throw new Error("Unsupported number of arguments")}e&&(w=[...w,e]),x=Hde(...w),x.selectorArgs=v,a.set(p,x)}switch(l){case 3:x.selectorArgs[2]=f;case 2:x.selectorArgs[1]=u;case 1:x.selectorArgs[0]=d}switch(l){case 0:return x(c);case 1:return x(c,d);case 2:return x(c,d,u);case 3:return x(c,d,u,f);default:throw new Error("unreachable")}}},Aa=eN();var AS={exports:{}},ES={},TS={exports:{}},kS={};var ZI;function Gde(){if(ZI)return kS;ZI=1;var e=Pf();function t(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var a=typeof Object.is=="function"?Object.is:t,s=e.useState,r=e.useEffect,i=e.useLayoutEffect,l=e.useDebugValue;function o(f,p){var x=p(),y=s({inst:{value:x,getSnapshot:p}}),w=y[0].inst,v=y[1];return i(function(){w.value=x,w.getSnapshot=p,c(w)&&v({inst:w})},[f,x,p]),r(function(){return c(w)&&v({inst:w}),f(function(){c(w)&&v({inst:w})})},[f]),l(x),x}function c(f){var p=f.getSnapshot;f=f.value;try{var x=p();return!a(f,x)}catch{return!0}}function d(f,p){return p()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:o;return kS.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u,kS}var JI;function Wde(){return JI||(JI=1,TS.exports=Gde()),TS.exports}var e$;function Vde(){if(e$)return ES;e$=1;var e=Pf(),t=Wde();function a(d,u){return d===u&&(d!==0||1/d===1/u)||d!==d&&u!==u}var s=typeof Object.is=="function"?Object.is:a,r=t.useSyncExternalStore,i=e.useRef,l=e.useEffect,o=e.useMemo,c=e.useDebugValue;return ES.useSyncExternalStoreWithSelector=function(d,u,f,p,x){var y=i(null);if(y.current===null){var w={hasValue:!1,value:null};y.current=w}else w=y.current;y=o(function(){function C(_){if(!N){if(N=!0,S=_,_=p(_),x!==void 0&&w.hasValue){var E=w.value;if(x(E,_))return T=E}return T=_}if(E=T,s(S,_))return E;var A=p(_);return x!==void 0&&x(E,A)?(S=_,E):(S=_,T=A)}var N=!1,S,T,k=f===void 0?null:f;return[function(){return C(u())},k===null?void 0:function(){return C(k())}]},[u,f,p,x]);var v=r(d,y[0],y[1]);return l(function(){w.hasValue=!0,w.value=v},[v]),c(v),v},ES}var t$;function qde(){return t$||(t$=1,AS.exports=Vde()),AS.exports}var P9=qde();function Yde(e,t,a,s,r){const i=l=>t(l,a,s,r);return P9.useSyncExternalStoreWithSelector(e.subscribe,e.getSnapshot,e.getSnapshot,i)}const n$={};function tN(e,t){const a=h.useRef(n$);return a.current===n$&&(a.current=e(t)),a}const Qde=[];function D9(e){h.useEffect(e,Qde)}const Kde=()=>{};function Xde(e,t,a){const s=tN(Zde,{store:e,selector:t}).current;s.effect=a,D9(s.onMount)}function Zde(e){const{store:t,selector:a}=e;let s=a(t.state);const r={effect:Kde,dispose:null,subscribe:()=>{r.dispose??=t.subscribe(i=>{const l=a(i);if(!Object.is(s,l)){const o=s;s=l,r.effect(o,l)}})},onMount:()=>(r.subscribe(),()=>{r.dispose?.(),r.dispose=null})};return r.subscribe(),r}class oL{static create(t){return new oL(t)}constructor(t){this.state=t,this.listeners=new Set,this.updateTick=0}subscribe=t=>(this.listeners.add(t),()=>{this.listeners.delete(t)});getSnapshot=()=>this.state;setState(t){this.state=t,this.updateTick+=1;const a=this.updateTick,s=this.listeners.values();let r;for(;r=s.next(),!r.done;){if(a!==this.updateTick)return;const i=r.value;i(t)}}update(t){for(const a in t)if(!Object.is(this.state[a],t[a])){this.setState(Ve({},this.state,t));return}}set(t,a){Object.is(this.state[t],a)||this.setState(Ve({},this.state,{[t]:a}))}}const nN=({params:e,store:t})=>{h.useEffect(()=>{t.set("animation",Ve({},t.state.animation,{skip:e.skipAnimation}))},[t,e.skipAnimation]);const a=h.useCallback(()=>{let s=!1;return t.set("animation",Ve({},t.state.animation,{skipAnimationRequests:t.state.animation.skipAnimationRequests+1})),()=>{s||(s=!0,t.set("animation",Ve({},t.state.animation,{skipAnimationRequests:t.state.animation.skipAnimationRequests-1})))}},[t]);return Xa(()=>{if(typeof window>"u"||!window?.matchMedia)return;let r;const i=o=>{o.matches?r=a():r?.()},l=window.matchMedia("(prefers-reduced-motion)");return i(l),l.addEventListener("change",i),()=>{l.removeEventListener("change",i)}},[a,t]),{instance:{disableAnimation:a}}};nN.params={skipAnimation:!0};nN.getDefaultizedParams=({params:e})=>Ve({},e,{skipAnimation:e.skipAnimation??!1});nN.getInitialState=({skipAnimation:e})=>({animation:{skip:e,skipAnimationRequests:0}});const Jde=e=>e.animation,eue=wt(Jde,e=>e.skip||e.skipAnimationRequests>0);function tue(e,t){const a=h.useRef(!0);h.useEffect(()=>{if(a.current){a.current=!1;return}return e()},t)}function LE(e){return e&&e.ownerDocument||document}function nue(e){return LE(e).defaultView||window}const $t=Yde,aN="DEFAULT_X_AXIS_KEY",aue="DEFAULT_Y_AXIS_KEY",sue={top:20,bottom:20,left:20,right:20},rue=45,iue=25,O9=20,Ll=e=>e.cartesianAxis?.x,Uo=e=>e.cartesianAxis?.y,lue=wt(Uo,function(t){return(t??[]).reduce((a,s)=>s.position==="left"?a+(s.width||0)+(s.zoom?.slider.enabled?s.zoom.slider.size:0):a,0)}),oue=wt(Uo,function(t){return(t??[]).reduce((a,s)=>s.position==="right"?a+(s.width||0)+(s.zoom?.slider.enabled?s.zoom.slider.size:0):a,0)}),cue=wt(Ll,function(t){return(t??[]).reduce((a,s)=>s.position==="top"?a+(s.height||0)+(s.zoom?.slider.enabled?s.zoom.slider.size:0):a,0)}),due=wt(Ll,function(t){return(t??[]).reduce((a,s)=>s.position==="bottom"?a+(s.height||0)+(s.zoom?.slider.enabled?s.zoom.slider.size:0):a,0)}),uue=Aa(lue,oue,cue,due,function(t,a,s,r){return{left:t,right:a,top:s,bottom:r}}),lx=e=>e.dimensions,mue=e=>e.dimensions.margin,cr=Aa(lx,mue,uue,function({width:t,height:a},{top:s,right:r,bottom:i,left:l},{left:o,right:c,top:d,bottom:u}){return{width:t-l-r-o-c,left:l+o,right:r+c,height:a-s-i-d-u,top:s+d,bottom:i+u}}),fue=wt(lx,e=>e.width),hue=wt(lx,e=>e.height),M9=wt(lx,e=>e.propsWidth),I9=wt(lx,e=>e.propsHeight);function gue(e,t){return typeof e=="number"?{top:e,bottom:e,left:e,right:e}:t?Ve({},t,e):e}const pue=10,sN=({params:e,store:t,svgRef:a})=>{const s=e.width!==void 0&&e.height!==void 0,r=h.useRef({displayError:!1,initialCompute:!0,computeRun:0}),[i,l]=h.useState(0),[o,c]=h.useState(0),d=h.useCallback(()=>{const y=a?.current;if(!y)return{};const v=nue(y).getComputedStyle(y),C=Math.floor(parseFloat(v.height))||0,N=Math.floor(parseFloat(v.width))||0;return(t.state.dimensions.width!==N||t.state.dimensions.height!==C)&&t.set("dimensions",{margin:{top:e.margin.top,right:e.margin.right,bottom:e.margin.bottom,left:e.margin.left},width:e.width??N,height:e.height??C,propsWidth:e.width,propsHeight:e.height}),{height:C,width:N}},[t,a,e.height,e.width,e.margin.left,e.margin.right,e.margin.top,e.margin.bottom]);tue(()=>{const y=e.width??t.state.dimensions.width,w=e.height??t.state.dimensions.height;t.set("dimensions",{margin:{top:e.margin.top,right:e.margin.right,bottom:e.margin.bottom,left:e.margin.left},width:y,height:w,propsHeight:e.height,propsWidth:e.width})},[t,e.height,e.width,e.margin.left,e.margin.right,e.margin.top,e.margin.bottom]),h.useEffect(()=>{r.current.displayError=!0},[]),Xa(()=>{if(s||!r.current.initialCompute||r.current.computeRun>pue)return;const y=d();y.width!==i||y.height!==o?(r.current.computeRun+=1,y.width!==void 0&&l(y.width),y.height!==void 0&&c(y.height)):r.current.initialCompute&&(r.current.initialCompute=!1)},[o,i,d,s]),Xa(()=>{if(s)return()=>{};d();const y=a.current;if(typeof ResizeObserver>"u")return()=>{};let w;const v=new ResizeObserver(()=>{w=requestAnimationFrame(()=>{d()})});return y&&v.observe(y),()=>{w&&cancelAnimationFrame(w),y&&v.unobserve(y)}},[d,s,a]);const u=$t(t,cr),f=h.useCallback(y=>y>=u.left-1&&y<=u.left+u.width,[u.left,u.width]),p=h.useCallback(y=>y>=u.top-1&&y<=u.top+u.height,[u.height,u.top]);return{instance:{isPointInside:h.useCallback((y,w,v)=>v&&"closest"in v&&v.closest("[data-drawing-container]")?!0:f(y)&&p(w),[f,p]),isXInside:f,isYInside:p}}};sN.params={width:!0,height:!0,margin:!0};sN.getDefaultizedParams=({params:e})=>Ve({},e,{margin:gue(e.margin,sue)});sN.getInitialState=({width:e,height:t,margin:a})=>({dimensions:{margin:a,width:e??0,height:t??0,propsWidth:e,propsHeight:t}});const cL=({params:e,store:t})=>(Xa(()=>{t.set("experimentalFeatures",e.experimentalFeatures)},[t,e.experimentalFeatures]),{});cL.params={experimentalFeatures:!0};cL.getInitialState=({experimentalFeatures:e})=>({experimentalFeatures:e});const xue=e=>e.experimentalFeatures,rN=wt(xue,e=>!!e?.preferStrictDomainInLineCharts);let a$=0;const yue=()=>(a$+=1,`mui-chart-${a$}`),dL=({params:e,store:t})=>(h.useEffect(()=>{e.id===void 0||e.id===t.state.id.providedChartId&&t.state.id.chartId!==void 0||t.set("id",Ve({},t.state.id,{chartId:e.id??yue()}))},[t,e.id]),{});dL.params={id:!0};dL.getInitialState=({id:e})=>({id:{chartId:e,providedChartId:e}});const bue=e=>e.id,vue=wt(bue,e=>e.chartId),wue=["#4254FB","#FFB422","#FA4F58","#0DBEFF","#22BF75","#FA83B4","#FF7511"],Nue=["#495AFB","#FFC758","#F35865","#30C8FF","#44CE8D","#F286B3","#FF8C39"],$9=e=>e==="dark"?Nue:wue,R9=({series:e,colors:t,seriesConfig:a})=>{const s={};return e.forEach((r,i)=>{const l=a[r.type].getSeriesWithDefaultValues(r,i,t),o=l.id;if(s[r.type]===void 0&&(s[r.type]={series:{},seriesOrder:[]}),s[r.type]?.series[o]!==void 0)throw new Error(`MUI X Charts: series' id "${o}" is not unique.`);s[r.type].series[o]=l,s[r.type].seriesOrder.push(o)}),s},jue=(e,t,a)=>{const s={};return Object.keys(t).forEach(r=>{const i=e[r];i!==void 0&&(s[r]=t[r]?.seriesProcessor?.(i,a)??i)}),s},iN=({params:e,store:t,seriesConfig:a})=>{const{series:s,dataset:r,theme:i,colors:l}=e,o=h.useRef(!0);return h.useEffect(()=>{if(o.current){o.current=!1;return}t.set("series",Ve({},t.state.series,{defaultizedSeries:R9({series:s,colors:typeof l=="function"?l(i):l,seriesConfig:a}),dataset:r}))},[l,r,s,i,a,t]),{}};iN.params={dataset:!0,series:!0,colors:!0,theme:!0};const Cue=[];iN.getDefaultizedParams=({params:e})=>Ve({},e,{series:e.series?.length?e.series:Cue,colors:e.colors??$9,theme:e.theme??"light"});iN.getInitialState=({series:e=[],colors:t,theme:a,dataset:s},r,i)=>({series:{seriesConfig:i,defaultizedSeries:R9({series:e,colors:typeof t=="function"?t(a):t,seriesConfig:i}),dataset:s}});const uL=e=>e.series,Sue=wt(uL,e=>e.defaultizedSeries),$r=wt(uL,e=>e.seriesConfig),_ue=wt(uL,e=>e.dataset),da=Aa(Sue,$r,_ue,function(t,a,s){return jue(t,a,s)}),Aue={abort:!0,animationcancel:!0,animationend:!0,animationiteration:!0,animationstart:!0,auxclick:!0,beforeinput:!0,beforetoggle:!0,blur:!0,cancel:!0,canplay:!0,canplaythrough:!0,change:!0,click:!0,close:!0,compositionend:!0,compositionstart:!0,compositionupdate:!0,contextlost:!0,contextmenu:!0,contextrestored:!0,copy:!0,cuechange:!0,cut:!0,dblclick:!0,drag:!0,dragend:!0,dragenter:!0,dragleave:!0,dragover:!0,dragstart:!0,drop:!0,durationchange:!0,emptied:!0,ended:!0,error:!0,focus:!0,focusin:!0,focusout:!0,formdata:!0,gotpointercapture:!0,input:!0,invalid:!0,keydown:!0,keypress:!0,keyup:!0,load:!0,loadeddata:!0,loadedmetadata:!0,loadstart:!0,lostpointercapture:!0,mousedown:!0,mouseenter:!0,mouseleave:!0,mousemove:!0,mouseout:!0,mouseover:!0,mouseup:!0,paste:!0,pause:!0,play:!0,playing:!0,pointercancel:!0,pointerdown:!0,pointerenter:!0,pointerleave:!0,pointermove:!0,pointerout:!0,pointerover:!0,pointerup:!0,progress:!0,ratechange:!0,reset:!0,resize:!0,scroll:!0,scrollend:!0,securitypolicyviolation:!0,seeked:!0,seeking:!0,select:!0,selectionchange:!0,selectstart:!0,slotchange:!0,stalled:!0,submit:!0,suspend:!0,timeupdate:!0,toggle:!0,touchcancel:!0,touchend:!0,touchmove:!0,touchstart:!0,transitioncancel:!0,transitionend:!0,transitionrun:!0,transitionstart:!0,volumechange:!0,waiting:!0,webkitanimationend:!0,webkitanimationiteration:!0,webkitanimationstart:!0,webkittransitionend:!0,wheel:!0,beforematch:!0,pointerrawupdate:!0};class z9{customData={};constructor(t){if(!t||!t.name)throw new Error("Gesture must be initialized with a valid name.");if(t.name in Aue)throw new Error(`Gesture can't be created with a native event name. Tried to use "${t.name}". Please use a custom name instead.`);this.name=t.name,this.preventDefault=t.preventDefault??!1,this.stopPropagation=t.stopPropagation??!1,this.preventIf=t.preventIf??[],this.requiredKeys=t.requiredKeys??[],this.pointerMode=t.pointerMode??[],this.pointerOptions=t.pointerOptions??{}}init(t,a,s,r){this.element=t,this.pointerManager=a,this.gesturesRegistry=s,this.keyboardManager=r;const i=`${this.name}ChangeOptions`;this.element.addEventListener(i,this.handleOptionsChange);const l=`${this.name}ChangeState`;this.element.addEventListener(l,this.handleStateChange)}handleOptionsChange=t=>{t&&t.detail&&this.updateOptions(t.detail)};updateOptions(t){this.preventDefault=t.preventDefault??this.preventDefault,this.stopPropagation=t.stopPropagation??this.stopPropagation,this.preventIf=t.preventIf??this.preventIf,this.requiredKeys=t.requiredKeys??this.requiredKeys,this.pointerMode=t.pointerMode??this.pointerMode,this.pointerOptions=t.pointerOptions??this.pointerOptions}getBaseConfig(){return{requiredKeys:this.requiredKeys}}getEffectiveConfig(t,a){if(t!=="mouse"&&t!=="touch"&&t!=="pen")return a;const s=this.pointerOptions[t];return s?Ve({},a,s):a}handleStateChange=t=>{t&&t.detail&&this.updateState(t.detail)};updateState(t){Object.assign(this.state,t)}getTargetElement(t){return this.isActive||this.element===t.target||"contains"in this.element&&this.element.contains(t.target)||"getRootNode"in this.element&&this.element.getRootNode()instanceof ShadowRoot&&t.composedPath().includes(this.element)?this.element:null}set isActive(t){t?this.gesturesRegistry.registerActiveGesture(this.element,this):this.gesturesRegistry.unregisterActiveGesture(this.element,this)}get isActive(){return this.gesturesRegistry.isGestureActive(this.element,this)??!1}shouldPreventGesture(t,a){const s=this.getEffectiveConfig(a,this.getBaseConfig());if(!this.keyboardManager.areKeysPressed(s.requiredKeys))return!0;if(this.preventIf.length===0)return!1;const r=this.gesturesRegistry.getActiveGestures(t);return this.preventIf.some(i=>r[i])}isPointerTypeAllowed(t){return!this.pointerMode||this.pointerMode.length===0?!0:this.pointerMode.includes(t)}destroy(){const t=`${this.name}ChangeOptions`;this.element.removeEventListener(t,this.handleOptionsChange);const a=`${this.name}ChangeState`;this.element.removeEventListener(a,this.handleStateChange)}}class Eue{activeGestures=new Map;registerActiveGesture(t,a){this.activeGestures.has(t)||this.activeGestures.set(t,new Set);const s=this.activeGestures.get(t),r={gesture:a,element:t};s.add(r)}unregisterActiveGesture(t,a){const s=this.activeGestures.get(t);s&&(s.forEach(r=>{r.gesture===a&&s.delete(r)}),s.size===0&&this.activeGestures.delete(t))}getActiveGestures(t){const a=this.activeGestures.get(t);return a?Array.from(a).reduce((s,r)=>(s[r.gesture.name]=!0,s),{}):{}}isGestureActive(t,a){const s=this.activeGestures.get(t);return s?Array.from(s).some(r=>r.gesture===a):!1}destroy(){this.activeGestures.clear()}unregisterElement(t){this.activeGestures.delete(t)}}class Tue{pressedKeys=new Set;constructor(){this.initialize()}initialize(){typeof window>"u"||(window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp),window.addEventListener("blur",this.clearKeys))}handleKeyDown=t=>{this.pressedKeys.add(t.key)};handleKeyUp=t=>{this.pressedKeys.delete(t.key)};clearKeys=()=>{this.pressedKeys.clear()};areKeysPressed(t){return!t||t.length===0?!0:t.every(a=>a==="ControlOrMeta"?navigator.platform.includes("Mac")?this.pressedKeys.has("Meta"):this.pressedKeys.has("Control"):this.pressedKeys.has(a))}destroy(){typeof window<"u"&&(window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp),window.removeEventListener("blur",this.clearKeys)),this.clearKeys()}}class kue{preventEventInterruption=!0;pointers=new Map;gestureHandlers=new Set;constructor(t){this.root=t.root??document.getRootNode({composed:!0})??document.body,this.touchAction=t.touchAction||"auto",this.passive=t.passive??!1,this.preventEventInterruption=t.preventEventInterruption??!0,this.setupEventListeners()}registerGestureHandler(t){return this.gestureHandlers.add(t),()=>{this.gestureHandlers.delete(t)}}getPointers(){return new Map(this.pointers)}setupEventListeners(){this.touchAction!=="auto"&&(this.root.style.touchAction=this.touchAction),this.root.addEventListener("pointerdown",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointermove",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointerup",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointercancel",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("forceCancel",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("blur",this.handleInterruptEvents),this.root.addEventListener("contextmenu",this.handleInterruptEvents)}handleInterruptEvents=t=>{if(this.preventEventInterruption&&"pointerType"in t&&t.pointerType==="touch"){t.preventDefault();return}const a=new PointerEvent("forceCancel",{bubbles:!1,cancelable:!1}),s=this.pointers.values().next().value;if(this.pointers.size>0&&s){Object.defineProperties(a,{clientX:{value:s.clientX},clientY:{value:s.clientY},pointerId:{value:s.pointerId},pointerType:{value:s.pointerType}});for(const[r,i]of this.pointers.entries()){const l=Ve({},i,{type:"forceCancel"});this.pointers.set(r,l)}}this.notifyHandlers(a),this.pointers.clear()};handlePointerEvent=t=>{const{type:a,pointerId:s}=t;if(a==="pointerdown"||a==="pointermove")this.pointers.set(s,this.createPointerData(t));else if(a==="pointerup"||a==="pointercancel"||a==="forceCancel"){this.pointers.set(s,this.createPointerData(t)),this.notifyHandlers(t),this.pointers.delete(s);return}this.notifyHandlers(t)};notifyHandlers(t){this.gestureHandlers.forEach(a=>a(this.pointers,t))}createPointerData(t){return{pointerId:t.pointerId,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,target:t.target,timeStamp:t.timeStamp,type:t.type,isPrimary:t.isPrimary,pressure:t.pressure,width:t.width,height:t.height,pointerType:t.pointerType,srcEvent:t}}destroy(){this.root.removeEventListener("pointerdown",this.handlePointerEvent),this.root.removeEventListener("pointermove",this.handlePointerEvent),this.root.removeEventListener("pointerup",this.handlePointerEvent),this.root.removeEventListener("pointercancel",this.handlePointerEvent),this.root.removeEventListener("forceCancel",this.handlePointerEvent),this.root.removeEventListener("blur",this.handleInterruptEvents),this.root.removeEventListener("contextmenu",this.handleInterruptEvents),this.pointers.clear(),this.gestureHandlers.clear()}}class Lue{gestureTemplates=new Map;elementGestureMap=new Map;activeGesturesRegistry=new Eue;keyboardManager=new Tue;constructor(t){this.pointerManager=new kue({root:t.root,touchAction:t.touchAction,passive:t.passive}),t.gestures&&t.gestures.length>0&&t.gestures.forEach(a=>{this.addGestureTemplate(a)})}addGestureTemplate(t){this.gestureTemplates.has(t.name)&&console.warn(`Gesture template with name "${t.name}" already exists. It will be overwritten.`),this.gestureTemplates.set(t.name,t)}setGestureOptions(t,a,s){const r=this.elementGestureMap.get(a);if(!r||!r.has(t)){console.error(`Gesture "${t}" not found on the provided element.`);return}const i=new CustomEvent(`${t}ChangeOptions`,{detail:s,bubbles:!1,cancelable:!1,composed:!1});a.dispatchEvent(i)}setGestureState(t,a,s){const r=this.elementGestureMap.get(a);if(!r||!r.has(t)){console.error(`Gesture "${t}" not found on the provided element.`);return}const i=new CustomEvent(`${t}ChangeState`,{detail:s,bubbles:!1,cancelable:!1,composed:!1});a.dispatchEvent(i)}registerElement(t,a,s){return Array.isArray(t)||(t=[t]),t.forEach(r=>{const i=s?.[r];this.registerSingleGesture(r,a,i)}),a}registerSingleGesture(t,a,s){const r=this.gestureTemplates.get(t);if(!r)return console.error(`Gesture template "${t}" not found.`),!1;this.elementGestureMap.has(a)||this.elementGestureMap.set(a,new Map);const i=this.elementGestureMap.get(a);i.has(t)&&(console.warn(`Element already has gesture "${t}" registered. It will be replaced.`),this.unregisterElement(t,a));const l=r.clone(s);return l.init(a,this.pointerManager,this.activeGesturesRegistry,this.keyboardManager),i.set(t,l),!0}unregisterElement(t,a){const s=this.elementGestureMap.get(a);return!s||!s.has(t)?!1:(s.get(t).destroy(),s.delete(t),this.activeGesturesRegistry.unregisterElement(a),s.size===0&&this.elementGestureMap.delete(a),!0)}unregisterAllGestures(t){const a=this.elementGestureMap.get(t);if(a){for(const[,s]of a)s.destroy(),this.activeGesturesRegistry.unregisterElement(t);this.elementGestureMap.delete(t)}}destroy(){for(const[t]of this.elementGestureMap)this.unregisterAllGestures(t);this.gestureTemplates.clear(),this.elementGestureMap.clear(),this.activeGesturesRegistry.destroy(),this.keyboardManager.destroy(),this.pointerManager.destroy()}}class Ou extends z9{unregisterHandler=null;originalTarget=null;constructor(t){super(t),this.minPointers=t.minPointers??1,this.maxPointers=t.maxPointers??1/0}init(t,a,s,r){super.init(t,a,s,r),this.unregisterHandler=this.pointerManager.registerGestureHandler(this.handlePointerEvent)}updateOptions(t){super.updateOptions(t),this.minPointers=t.minPointers??this.minPointers,this.maxPointers=t.maxPointers??this.maxPointers}getBaseConfig(){return{requiredKeys:this.requiredKeys,minPointers:this.minPointers,maxPointers:this.maxPointers}}isWithinPointerCount(t,a){const s=this.getEffectiveConfig(a,this.getBaseConfig());return t.length>=s.minPointers&&t.length<=s.maxPointers}getRelevantPointers(t,a){return t.filter(s=>this.isPointerTypeAllowed(s.pointerType)&&(a===s.target||s.target===this.originalTarget||a===this.originalTarget||"contains"in a&&a.contains(s.target))||"getRootNode"in a&&a.getRootNode()instanceof ShadowRoot&&s.srcEvent.composedPath().includes(a))}destroy(){this.unregisterHandler&&(this.unregisterHandler(),this.unregisterHandler=null),super.destroy()}}function Pue(e,t){const a=t.x-e.x,s=t.y-e.y;return Math.sqrt(a*a+s*s)}function LS(e){if(e.length<2)return 0;let t=0,a=0;for(let s=0;s<e.length;s+=1)for(let r=s+1;r<e.length;r+=1)t+=Pue({x:e[s].clientX,y:e[s].clientY},{x:e[r].clientX,y:e[r].clientY}),a+=1;return a>0?t/a:0}function So(e){if(e.length===0)return{x:0,y:0};const t=e.reduce((a,s)=>(a.x+=s.clientX,a.y+=s.clientY,a),{x:0,y:0});return{x:t.x/e.length,y:t.y/e.length}}function li(e,t){return`${e}${t==="ongoing"?"":t.charAt(0).toUpperCase()+t.slice(1)}`}const Ey=1e-5,wc=1e-5,s$=.15;function Due(e,t){const a=t.x-e.x,s=t.y-e.y,r={vertical:null,horizontal:null,mainAxis:null},i=Oue(t,e),l=Math.abs(a)>Math.abs(s)?"horizontal":"vertical",o=i||l==="horizontal"?Ey:s$,c=i?Ey:l==="horizontal"?s$:Ey;return Math.abs(a)>o&&(r.horizontal=a>0?"right":"left"),Math.abs(s)>c&&(r.vertical=s>0?"down":"up"),r.mainAxis=i?"diagonal":l,r}function Oue(e,t){const a=t.x-e.x,s=t.y-e.y,r=Math.atan2(s,a)*180/Math.PI;return r>=-45+wc&&r<=-22.5+wc||r>=22.5+wc&&r<=45+wc||r>=135+wc&&r<=157.5+wc||r>=-157.5+wc&&r<=-135+wc}function Mue(e,t){if(!e.vertical&&!e.horizontal)return!1;if(t.length===0)return!0;const a=e.vertical===null||t.includes(e.vertical),s=e.horizontal===null||t.includes(e.horizontal);return a&&s}const r$=0,Iue=e=>e>r$?1:e<-r$?-1:0,Tc=e=>{e.cancelable&&e.preventDefault()};class mL extends Ou{state={lastPosition:null};constructor(t){super(t),this.threshold=t.threshold||0}clone(t){return new mL(Ve({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}init(t,a,s,r){super.init(t,a,s,r),this.element.addEventListener("pointerenter",this.handleElementEnter),this.element.addEventListener("pointerleave",this.handleElementLeave)}destroy(){this.element.removeEventListener("pointerenter",this.handleElementEnter),this.element.removeEventListener("pointerleave",this.handleElementLeave),this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t)}resetState(){this.isActive=!1,this.state={lastPosition:null}}handleElementEnter=t=>{if(t.pointerType!=="mouse"&&t.pointerType!=="pen")return;const a=this.pointerManager.getPointers()||new Map,s=Array.from(a.values());if(this.isWithinPointerCount(s,t.pointerType)){this.isActive=!0;const r={x:t.clientX,y:t.clientY};this.state.lastPosition=r,this.emitMoveEvent(this.element,"start",s,t),this.emitMoveEvent(this.element,"ongoing",s,t)}};handleElementLeave=t=>{if(t.pointerType!=="mouse"&&t.pointerType!=="pen"||!this.isActive)return;const a=this.pointerManager.getPointers()||new Map,s=Array.from(a.values());this.emitMoveEvent(this.element,"end",s,t),this.resetState()};handlePointerEvent=(t,a)=>{if(a.type!=="pointermove"||a.pointerType!=="mouse"&&a.pointerType!=="pen")return;this.preventDefault&&a.preventDefault(),this.stopPropagation&&a.stopPropagation();const s=Array.from(t.values()),r=this.getTargetElement(a);if(!r||!this.isWithinPointerCount(s,a.pointerType))return;if(this.shouldPreventGesture(r,a.pointerType)){if(!this.isActive)return;this.resetState(),this.emitMoveEvent(r,"end",s,a);return}const i={x:a.clientX,y:a.clientY};this.state.lastPosition=i,this.isActive||(this.isActive=!0,this.emitMoveEvent(r,"start",s,a)),this.emitMoveEvent(r,"ongoing",s,a)};emitMoveEvent(t,a,s,r){const i=this.state.lastPosition||So(s),l=this.gesturesRegistry.getActiveGestures(t),o={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:a,pointers:s,timeStamp:r.timeStamp,activeGestures:l,customData:this.customData},c=li(this.name,a),d=new CustomEvent(c,{bubbles:!0,cancelable:!0,composed:!0,detail:o});t.dispatchEvent(d)}}class su extends Ou{state={startPointers:new Map,startCentroid:null,lastCentroid:null,movementThresholdReached:!1,totalDeltaX:0,totalDeltaY:0,activeDeltaX:0,activeDeltaY:0,lastDirection:{vertical:null,horizontal:null,mainAxis:null},lastDeltas:null};constructor(t){super(t),this.direction=t.direction||["up","down","left","right"],this.threshold=t.threshold||0}clone(t){return new su(Ve({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,direction:[...this.direction],requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}destroy(){this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t),this.direction=t.direction||this.direction,this.threshold=t.threshold??this.threshold}resetState(){this.isActive=!1,this.state=Ve({},this.state,{startPointers:new Map,startCentroid:null,lastCentroid:null,lastDeltas:null,activeDeltaX:0,activeDeltaY:0,movementThresholdReached:!1,lastDirection:{vertical:null,horizontal:null,mainAxis:null}})}handlePointerEvent=(t,a)=>{const s=Array.from(t.values());if(a.type==="forceCancel"){this.cancel(a.target,s,a);return}const r=this.getTargetElement(a);if(!r)return;if(this.shouldPreventGesture(r,a.pointerType)){this.cancel(r,s,a);return}const i=this.getRelevantPointers(s,r);if(!this.isWithinPointerCount(i,a.pointerType)){this.cancel(r,i,a);return}switch(a.type){case"pointerdown":!this.isActive&&!this.state.startCentroid&&(i.forEach(l=>{this.state.startPointers.set(l.pointerId,l)}),this.originalTarget=r,this.state.startCentroid=So(i),this.state.lastCentroid=Ve({},this.state.startCentroid));break;case"pointermove":if(this.state.startCentroid&&this.isWithinPointerCount(s,a.pointerType)){const l=So(i),o=l.x-this.state.startCentroid.x,c=l.y-this.state.startCentroid.y,d=Math.sqrt(o*o+c*c),u=Due(this.state.lastCentroid??this.state.startCentroid,l),f=this.state.lastCentroid?l.x-this.state.lastCentroid.x:0,p=this.state.lastCentroid?l.y-this.state.lastCentroid.y:0;!this.state.movementThresholdReached&&d>=this.threshold&&Mue(u,this.direction)?(this.state.movementThresholdReached=!0,this.isActive=!0,this.state.lastDeltas={x:f,y:p},this.state.totalDeltaX+=f,this.state.totalDeltaY+=p,this.state.activeDeltaX+=f,this.state.activeDeltaY+=p,this.emitPanEvent(r,"start",i,a,l),this.emitPanEvent(r,"ongoing",i,a,l)):this.state.movementThresholdReached&&this.isActive&&(this.state.lastDeltas={x:f,y:p},this.state.totalDeltaX+=f,this.state.totalDeltaY+=p,this.state.activeDeltaX+=f,this.state.activeDeltaY+=p,this.emitPanEvent(r,"ongoing",i,a,l)),this.state.lastCentroid=l,this.state.lastDirection=u}break;case"pointerup":case"pointercancel":case"forceCancel":if(this.isActive&&this.state.movementThresholdReached){const l=i.filter(o=>o.type!=="pointerup"&&o.type!=="pointercancel");if(!this.isWithinPointerCount(l,a.pointerType)){const o=this.state.lastCentroid||this.state.startCentroid;a.type==="pointercancel"&&this.emitPanEvent(r,"cancel",i,a,o),this.emitPanEvent(r,"end",i,a,o),this.resetState()}}else this.resetState();break}};emitPanEvent(t,a,s,r,i){if(!this.state.startCentroid)return;const l=this.state.lastDeltas?.x??0,o=this.state.lastDeltas?.y??0,c=this.state.startPointers.values().next().value,d=c?(r.timeStamp-c.timeStamp)/1e3:0,u=d>0?l/d:0,f=d>0?o/d:0,p=Math.sqrt(u*u+f*f),x=this.gesturesRegistry.getActiveGestures(t),y={gestureName:this.name,initialCentroid:this.state.startCentroid,centroid:i,target:r.target,srcEvent:r,phase:a,pointers:s,timeStamp:r.timeStamp,deltaX:l,deltaY:o,direction:this.state.lastDirection,velocityX:u,velocityY:f,velocity:p,totalDeltaX:this.state.totalDeltaX,totalDeltaY:this.state.totalDeltaY,activeDeltaX:this.state.activeDeltaX,activeDeltaY:this.state.activeDeltaY,activeGestures:x,customData:this.customData},w=li(this.name,a),v=new CustomEvent(w,{bubbles:!0,cancelable:!0,composed:!0,detail:y});t.dispatchEvent(v),this.preventDefault&&r.preventDefault(),this.stopPropagation&&r.stopPropagation()}cancel(t,a,s){if(this.isActive){const r=t??this.element;this.emitPanEvent(r,"cancel",a,s,this.state.lastCentroid),this.emitPanEvent(r,"end",a,s,this.state.lastCentroid)}this.resetState()}}class fL extends Ou{state={startDistance:0,lastDistance:0,lastScale:1,lastTime:0,velocity:0,totalScale:1,deltaScale:0};constructor(t){super(Ve({},t,{minPointers:t.minPointers??2})),this.threshold=t.threshold??0}clone(t){return new fL(Ve({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}destroy(){this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t)}resetState(){this.isActive=!1,this.state=Ve({},this.state,{startDistance:0,lastDistance:0,lastScale:1,lastTime:0,velocity:0,deltaScale:0})}handlePointerEvent=(t,a)=>{const s=Array.from(t.values()),r=this.getTargetElement(a);if(!r)return;if(this.shouldPreventGesture(r,a.pointerType)){this.isActive&&(this.emitPinchEvent(r,"cancel",s,a),this.resetState());return}const i=this.getRelevantPointers(s,r);switch(a.type){case"pointerdown":if(i.length>=2&&!this.isActive){const l=LS(i);this.state.startDistance=l,this.state.lastDistance=l,this.state.lastTime=a.timeStamp,this.originalTarget=r}break;case"pointermove":if(this.state.startDistance&&this.isWithinPointerCount(i,a.pointerType)){const l=LS(i),o=Math.abs(l-this.state.lastDistance);if(o!==0&&o>=this.threshold){const c=this.state.startDistance?l/this.state.startDistance:1,d=c/this.state.lastScale;this.state.totalScale*=d;const u=(a.timeStamp-this.state.lastTime)/1e3;if(this.state.lastDistance){const p=(l-this.state.lastDistance)/u;this.state.velocity=Number.isNaN(p)?0:p}this.state.lastDistance=l,this.state.deltaScale=c-this.state.lastScale,this.state.lastScale=c,this.state.lastTime=a.timeStamp,this.isActive?this.emitPinchEvent(r,"ongoing",i,a):(this.isActive=!0,this.emitPinchEvent(r,"start",i,a),this.emitPinchEvent(r,"ongoing",i,a))}}break;case"pointerup":case"pointercancel":case"forceCancel":if(this.isActive){const l=i.filter(o=>o.type!=="pointerup"&&o.type!=="pointercancel");if(!this.isWithinPointerCount(l,a.pointerType))a.type==="pointercancel"&&this.emitPinchEvent(r,"cancel",i,a),this.emitPinchEvent(r,"end",i,a),this.resetState();else if(l.length>=2){const o=LS(l);this.state.startDistance=o/this.state.lastScale}}break}};emitPinchEvent(t,a,s,r){const i=So(s),l=this.state.lastDistance,o=this.state.lastScale,c=this.gesturesRegistry.getActiveGestures(t),d={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:a,pointers:s,timeStamp:r.timeStamp,scale:o,deltaScale:this.state.deltaScale,totalScale:this.state.totalScale,distance:l,velocity:this.state.velocity,activeGestures:c,direction:Iue(this.state.velocity),customData:this.customData};this.preventDefault&&r.preventDefault(),this.stopPropagation&&r.stopPropagation();const u=li(this.name,a),f=new CustomEvent(u,{bubbles:!0,cancelable:!0,composed:!0,detail:d});t.dispatchEvent(f)}}class lN extends Ou{state={startCentroid:null,lastPosition:null,timerId:null,startTime:0,pressThresholdReached:!1};constructor(t){super(t),this.duration=t.duration??500,this.maxDistance=t.maxDistance??10}clone(t){return new lN(Ve({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,duration:this.duration,maxDistance:this.maxDistance,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}destroy(){this.clearPressTimer(),this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t),this.duration=t.duration??this.duration,this.maxDistance=t.maxDistance??this.maxDistance}resetState(){this.clearPressTimer(),this.isActive=!1,this.state=Ve({},this.state,{startCentroid:null,lastPosition:null,timerId:null,startTime:0,pressThresholdReached:!1})}clearPressTimer(){this.state.timerId!==null&&(clearTimeout(this.state.timerId),this.state.timerId=null)}handlePointerEvent=(t,a)=>{const s=Array.from(t.values());if(a.type==="forceCancel"){this.cancelPress(a.target,s,a);return}const r=this.getTargetElement(a);if(!r)return;if(this.shouldPreventGesture(r,a.pointerType)){this.isActive&&this.cancelPress(r,s,a);return}const i=this.getRelevantPointers(s,r);if(!this.isWithinPointerCount(i,a.pointerType)){this.isActive&&this.cancelPress(r,i,a);return}switch(a.type){case"pointerdown":!this.isActive&&!this.state.startCentroid&&(this.state.startCentroid=So(i),this.state.lastPosition=Ve({},this.state.startCentroid),this.state.startTime=a.timeStamp,this.isActive=!0,this.originalTarget=r,this.clearPressTimer(),this.state.timerId=setTimeout(()=>{if(this.isActive&&this.state.startCentroid){this.state.pressThresholdReached=!0;const l=this.state.lastPosition;this.emitPressEvent(r,"start",i,a,l),this.emitPressEvent(r,"ongoing",i,a,l)}},this.duration));break;case"pointermove":if(this.isActive&&this.state.startCentroid){const l=So(i);this.state.lastPosition=l;const o=l.x-this.state.startCentroid.x,c=l.y-this.state.startCentroid.y;Math.sqrt(o*o+c*c)>this.maxDistance&&this.cancelPress(r,i,a)}break;case"pointerup":if(this.isActive){if(this.state.pressThresholdReached){const l=this.state.lastPosition||this.state.startCentroid;this.emitPressEvent(r,"end",i,a,l)}this.resetState()}break;case"pointercancel":case"forceCancel":this.cancelPress(r,i,a);break}};emitPressEvent(t,a,s,r,i){const l=this.gesturesRegistry.getActiveGestures(t),o=r.timeStamp-this.state.startTime,c={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:a,pointers:s,timeStamp:r.timeStamp,x:i.x,y:i.y,duration:o,activeGestures:l,customData:this.customData},d=li(this.name,a),u=new CustomEvent(d,{bubbles:!0,cancelable:!0,composed:!0,detail:c});t.dispatchEvent(u),this.preventDefault&&r.preventDefault(),this.stopPropagation&&r.stopPropagation()}cancelPress(t,a,s){if(this.isActive&&this.state.pressThresholdReached){const r=this.state.lastPosition||this.state.startCentroid;this.emitPressEvent(t??this.element,"cancel",a,s,r),this.emitPressEvent(t??this.element,"end",a,s,r)}this.resetState()}}class hL extends Ou{state={phase:"waitingForPress",dragTimeoutId:null};constructor(t){super(t),this.pressDuration=t.pressDuration??500,this.pressMaxDistance=t.pressMaxDistance??10,this.dragTimeout=t.dragTimeout??1e3,this.dragThreshold=t.dragThreshold??0,this.dragDirection=t.dragDirection||["up","down","left","right"],this.pressGesture=new lN({name:`${this.name}-press`,duration:this.pressDuration,maxDistance:this.pressMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}),this.panGesture=new su({name:`${this.name}-pan`,minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)})}clone(t){return new hL(Ve({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,pressDuration:this.pressDuration,pressMaxDistance:this.pressMaxDistance,dragTimeout:this.dragTimeout,dragThreshold:this.dragThreshold,dragDirection:[...this.dragDirection],requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}init(t,a,s,r){super.init(t,a,s,r),this.pressGesture.init(t,a,s,r),this.panGesture.init(t,a,s,r),this.element.addEventListener(this.pressGesture.name,this.pressHandler),this.element.addEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.addEventListener(this.panGesture.name,this.dragMoveHandler),this.element.addEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.addEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler)}destroy(){this.resetState(),this.pressGesture.destroy(),this.panGesture.destroy(),this.element.removeEventListener(this.pressGesture.name,this.pressHandler),this.element.removeEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.removeEventListener(this.panGesture.name,this.dragMoveHandler),this.element.removeEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.removeEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler),super.destroy()}updateOptions(t){super.updateOptions(t),this.pressDuration=t.pressDuration??this.pressDuration,this.pressMaxDistance=t.pressMaxDistance??this.pressMaxDistance,this.dragTimeout=t.dragTimeout??this.dragTimeout,this.dragThreshold=t.dragThreshold??this.dragThreshold,this.dragDirection=t.dragDirection||this.dragDirection,this.element.dispatchEvent(new CustomEvent(`${this.panGesture.name}ChangeOptions`,{detail:{minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}})),this.element.dispatchEvent(new CustomEvent(`${this.pressGesture.name}ChangeOptions`,{detail:{duration:this.pressDuration,maxDistance:this.pressMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}}))}resetState(){this.state.dragTimeoutId!==null&&clearTimeout(this.state.dragTimeoutId),this.restoreTouchAction(),this.isActive=!1,this.state={phase:"waitingForPress",dragTimeoutId:null}}handlePointerEvent(){}pressHandler=()=>{this.state.phase==="waitingForPress"&&(this.state.phase="pressDetected",this.setTouchAction(),this.state.dragTimeoutId=setTimeout(()=>{this.resetState()},this.dragTimeout))};dragStartHandler=t=>{this.state.phase==="pressDetected"&&(this.state.dragTimeoutId!==null&&(clearTimeout(this.state.dragTimeoutId),this.state.dragTimeoutId=null),this.restoreTouchAction(),this.state.phase="dragging",this.isActive=!0,this.element.dispatchEvent(new CustomEvent(li(this.name,t.detail.phase),t)))};dragMoveHandler=t=>{this.state.phase==="dragging"&&this.element.dispatchEvent(new CustomEvent(li(this.name,t.detail.phase),t))};dragEndHandler=t=>{this.state.phase==="dragging"&&(this.resetState(),this.element.dispatchEvent(new CustomEvent(li(this.name,t.detail.phase),t)))};setTouchAction(){this.element.addEventListener("touchstart",Tc,{passive:!1}),this.element.addEventListener("touchmove",Tc,{passive:!1}),this.element.addEventListener("touchend",Tc,{passive:!1})}restoreTouchAction(){this.element.removeEventListener("touchstart",Tc),this.element.removeEventListener("touchmove",Tc),this.element.removeEventListener("touchend",Tc)}}class lp extends Ou{state={startCentroid:null,currentTapCount:0,lastTapTime:0,lastPosition:null};constructor(t){super(t),this.maxDistance=t.maxDistance??10,this.taps=t.taps??1}clone(t){return new lp(Ve({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,maxDistance:this.maxDistance,taps:this.taps,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}destroy(){this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t),this.maxDistance=t.maxDistance??this.maxDistance,this.taps=t.taps??this.taps}resetState(){this.isActive=!1,this.state={startCentroid:null,currentTapCount:0,lastTapTime:0,lastPosition:null}}handlePointerEvent=(t,a)=>{const s=Array.from(t.values()),r=this.getTargetElement(a);if(!r)return;const i=this.getRelevantPointers(s,r);if(this.shouldPreventGesture(r,a.pointerType)||!this.isWithinPointerCount(i,a.pointerType)){this.isActive&&this.cancelTap(r,i,a);return}switch(a.type){case"pointerdown":this.isActive||(this.state.startCentroid=So(i),this.state.lastPosition=Ve({},this.state.startCentroid),this.isActive=!0,this.originalTarget=r);break;case"pointermove":if(this.isActive&&this.state.startCentroid){const l=So(i);this.state.lastPosition=l;const o=l.x-this.state.startCentroid.x,c=l.y-this.state.startCentroid.y;Math.sqrt(o*o+c*c)>this.maxDistance&&this.cancelTap(r,i,a)}break;case"pointerup":if(this.isActive){this.state.currentTapCount+=1;const l=this.state.lastPosition||this.state.startCentroid;if(!l){this.cancelTap(r,i,a);return}this.state.currentTapCount>=this.taps?(this.fireTapEvent(r,i,a,l),this.resetState()):(this.state.lastTapTime=a.timeStamp,this.isActive=!1,this.state.startCentroid=null,setTimeout(()=>{this.state&&this.state.currentTapCount>0&&this.state.currentTapCount<this.taps&&(this.state.currentTapCount=0)},300))}break;case"pointercancel":case"forceCancel":this.cancelTap(r,i,a);break}};fireTapEvent(t,a,s,r){const i=this.gesturesRegistry.getActiveGestures(t),l={gestureName:this.name,centroid:r,target:s.target,srcEvent:s,phase:"end",pointers:a,timeStamp:s.timeStamp,x:r.x,y:r.y,tapCount:this.state.currentTapCount,activeGestures:i,customData:this.customData},o=new CustomEvent(this.name,{bubbles:!0,cancelable:!0,composed:!0,detail:l});t.dispatchEvent(o),this.preventDefault&&s.preventDefault(),this.stopPropagation&&s.stopPropagation()}cancelTap(t,a,s){if(this.state.startCentroid||this.state.lastPosition){const r=this.state.lastPosition||this.state.startCentroid,i=this.gesturesRegistry.getActiveGestures(t),l={gestureName:this.name,centroid:r,target:s.target,srcEvent:s,phase:"cancel",pointers:a,timeStamp:s.timeStamp,x:r.x,y:r.y,tapCount:this.state.currentTapCount,activeGestures:i,customData:this.customData},o=li(this.name,"cancel"),c=new CustomEvent(o,{bubbles:!0,cancelable:!0,composed:!0,detail:l});t.dispatchEvent(c)}this.resetState()}}class gL extends Ou{state={phase:"waitingForTap",dragTimeoutId:null};constructor(t){super(t),this.tapMaxDistance=t.tapMaxDistance??10,this.dragTimeout=t.dragTimeout??1e3,this.dragThreshold=t.dragThreshold??0,this.dragDirection=t.dragDirection||["up","down","left","right"],this.tapGesture=new lp({name:`${this.name}-tap`,maxDistance:this.tapMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}),this.panGesture=new su({name:`${this.name}-pan`,minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)})}clone(t){return new gL(Ve({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,tapMaxDistance:this.tapMaxDistance,dragTimeout:this.dragTimeout,dragThreshold:this.dragThreshold,dragDirection:[...this.dragDirection],requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}init(t,a,s,r){super.init(t,a,s,r),this.tapGesture.init(t,a,s,r),this.panGesture.init(t,a,s,r),this.element.addEventListener(this.tapGesture.name,this.tapHandler),this.element.addEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.addEventListener(this.panGesture.name,this.dragMoveHandler),this.element.addEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.addEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler)}destroy(){this.resetState(),this.tapGesture.destroy(),this.panGesture.destroy(),this.element.removeEventListener(this.tapGesture.name,this.tapHandler),this.element.removeEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.removeEventListener(this.panGesture.name,this.dragMoveHandler),this.element.removeEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.removeEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler),super.destroy()}updateOptions(t){super.updateOptions(t),this.tapMaxDistance=t.tapMaxDistance??this.tapMaxDistance,this.dragTimeout=t.dragTimeout??this.dragTimeout,this.dragThreshold=t.dragThreshold??this.dragThreshold,this.dragDirection=t.dragDirection||this.dragDirection,this.element.dispatchEvent(new CustomEvent(`${this.panGesture.name}ChangeOptions`,{detail:{minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}})),this.element.dispatchEvent(new CustomEvent(`${this.tapGesture.name}ChangeOptions`,{detail:{maxDistance:this.tapMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}}))}resetState(){this.state.dragTimeoutId!==null&&clearTimeout(this.state.dragTimeoutId),this.restoreTouchAction(),this.isActive=!1,this.state={phase:"waitingForTap",dragTimeoutId:null}}handlePointerEvent(){}tapHandler=()=>{this.state.phase==="waitingForTap"&&(this.state.phase="tapDetected",this.setTouchAction(),this.state.dragTimeoutId=setTimeout(()=>{this.resetState()},this.dragTimeout))};dragStartHandler=t=>{this.state.phase==="tapDetected"&&(this.state.dragTimeoutId!==null&&(clearTimeout(this.state.dragTimeoutId),this.state.dragTimeoutId=null),this.restoreTouchAction(),this.state.phase="dragging",this.isActive=!0,this.element.dispatchEvent(new CustomEvent(li(this.name,t.detail.phase),t)))};dragMoveHandler=t=>{this.state.phase==="dragging"&&this.element.dispatchEvent(new CustomEvent(li(this.name,t.detail.phase),t))};dragEndHandler=t=>{this.state.phase==="dragging"&&(this.resetState(),this.element.dispatchEvent(new CustomEvent(li(this.name,t.detail.phase),t)))};setTouchAction(){this.element.addEventListener("touchstart",Tc,{passive:!1})}restoreTouchAction(){this.element.removeEventListener("touchstart",Tc)}}class av extends z9{state={totalDeltaX:0,totalDeltaY:0,totalDeltaZ:0};constructor(t){super(t),this.sensitivity=t.sensitivity??1,this.max=t.max??Number.MAX_SAFE_INTEGER,this.min=t.min??Number.MIN_SAFE_INTEGER,this.initialDelta=t.initialDelta??0,this.invert=t.invert??!1,this.state.totalDeltaX=this.initialDelta,this.state.totalDeltaY=this.initialDelta,this.state.totalDeltaZ=this.initialDelta}clone(t){return new av(Ve({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,sensitivity:this.sensitivity,max:this.max,min:this.min,initialDelta:this.initialDelta,invert:this.invert,requiredKeys:[...this.requiredKeys],preventIf:[...this.preventIf]},t))}init(t,a,s,r){super.init(t,a,s,r),this.element.addEventListener("wheel",this.handleWheelEvent)}destroy(){this.element.removeEventListener("wheel",this.handleWheelEvent),this.resetState(),super.destroy()}resetState(){this.isActive=!1,this.state={totalDeltaX:0,totalDeltaY:0,totalDeltaZ:0}}updateOptions(t){super.updateOptions(t),this.sensitivity=t.sensitivity??this.sensitivity,this.max=t.max??this.max,this.min=t.min??this.min,this.initialDelta=t.initialDelta??this.initialDelta,this.invert=t.invert??this.invert}handleWheelEvent=t=>{if(this.shouldPreventGesture(this.element,"mouse"))return;const a=this.pointerManager.getPointers()||new Map,s=Array.from(a.values());this.state.totalDeltaX+=t.deltaX*this.sensitivity*(this.invert?-1:1),this.state.totalDeltaY+=t.deltaY*this.sensitivity*(this.invert?-1:1),this.state.totalDeltaZ+=t.deltaZ*this.sensitivity*(this.invert?-1:1),["totalDeltaX","totalDeltaY","totalDeltaZ"].forEach(r=>{this.state[r]<this.min&&(this.state[r]=this.min),this.state[r]>this.max&&(this.state[r]=this.max)}),this.emitWheelEvent(s,t)};emitWheelEvent(t,a){const s=t.length>0?So(t):{x:a.clientX,y:a.clientY},r=this.gesturesRegistry.getActiveGestures(this.element),i={gestureName:this.name,centroid:s,target:a.target,srcEvent:a,phase:"ongoing",pointers:t,timeStamp:a.timeStamp,deltaX:a.deltaX*this.sensitivity*(this.invert?-1:1),deltaY:a.deltaY*this.sensitivity*(this.invert?-1:1),deltaZ:a.deltaZ*this.sensitivity*(this.invert?-1:1),deltaMode:a.deltaMode,totalDeltaX:this.state.totalDeltaX,totalDeltaY:this.state.totalDeltaY,totalDeltaZ:this.state.totalDeltaZ,activeGestures:r,customData:this.customData};this.preventDefault&&a.preventDefault(),this.stopPropagation&&a.stopPropagation();const l=li(this.name,"ongoing"),o=new CustomEvent(l,{bubbles:!0,cancelable:!0,composed:!0,detail:i});this.element.dispatchEvent(o)}}const Lm=e=>e.preventDefault(),pL=({svgRef:e})=>{const t=h.useRef(null);h.useEffect(()=>{const r=e.current;t.current||(t.current=new Lue({gestures:[new su({name:"pan",threshold:0,maxPointers:1}),new mL({name:"move",preventIf:["pan","zoomPinch","zoomPan"]}),new lp({name:"tap",preventIf:["pan","zoomPinch","zoomPan"]}),new lN({name:"quickPress",duration:50}),new su({name:"brush",threshold:0,maxPointers:1}),new su({name:"zoomPan",threshold:0,preventIf:["zoomTapAndDrag","zoomPressAndDrag"]}),new fL({name:"zoomPinch",threshold:5}),new av({name:"zoomTurnWheel",sensitivity:.01,initialDelta:1}),new av({name:"panTurnWheel",sensitivity:.5}),new gL({name:"zoomTapAndDrag",dragThreshold:10}),new hL({name:"zoomPressAndDrag",dragThreshold:10,preventIf:["zoomPinch"]}),new lp({name:"zoomDoubleTapReset",taps:2})]}));const i=t.current;if(!(!r||!i))return i.registerElement(["pan","move","zoomPinch","zoomPan","zoomTurnWheel","panTurnWheel","tap","quickPress","zoomTapAndDrag","zoomPressAndDrag","zoomDoubleTapReset","brush"],r),()=>{i.unregisterAllGestures(r)}},[e,t]);const a=h.useCallback((r,i,l)=>{const o=e.current;return o?.addEventListener(r,i,l),{cleanup:()=>o?.removeEventListener(r,i)}},[e]),s=h.useCallback((r,i)=>{const l=e.current,o=t.current;!o||!l||o.setGestureOptions(r,l,i??{})},[e,t]);return h.useEffect(()=>{const r=e.current;return r?.addEventListener("gesturestart",Lm),r?.addEventListener("gesturechange",Lm),r?.addEventListener("gestureend",Lm),()=>{r?.removeEventListener("gesturestart",Lm),r?.removeEventListener("gesturechange",Lm),r?.removeEventListener("gestureend",Lm)}},[e]),{instance:{addInteractionListener:a,updateZoomInteractionListeners:s}}};pL.params={};pL.getInitialState=()=>({});const $ue=[dL,cL,sN,iN,pL,nN],Rue=["apiRef"],zue=e=>{let{plugins:t}=e,a=cn(e.props,Rue);const s={};t.forEach(l=>{Object.assign(s,l.params)});const r={};return Object.keys(a).forEach(l=>{const o=a[l];s[l]&&(r[l]=o)}),t.reduce((l,o)=>o.getDefaultizedParams?o.getDefaultizedParams({params:l}):l,r)};let i$=0;function Fue(e,t,a){const s=Zw(),r=h.useMemo(()=>[...$ue,...e],[e]),i=zue({plugins:r,props:t});i.id=i.id??s;const o=h.useRef({}).current,c=Bue(t.apiRef),d=h.useRef(null),u=h.useRef(null),f=h.useRef(null);if(f.current==null){i$+=1;const y={cacheKey:{id:i$}};r.forEach(w=>{w.getInitialState&&Object.assign(y,w.getInitialState(i,y,a))}),f.current=new oL(y)}const p=y=>{const w=y({instance:o,params:i,plugins:r,store:f.current,svgRef:u,chartRootRef:d,seriesConfig:a});w.publicAPI&&Object.assign(c.current,w.publicAPI),w.instance&&Object.assign(o,w.instance)};return r.forEach(p),{contextValue:h.useMemo(()=>({store:f.current,publicAPI:c.current,instance:o,svgRef:u,chartRootRef:d}),[o,c])}}function Uue(e){return e.current==null&&(e.current={}),e}function Bue(e){const t=h.useRef({});return e?Uue(e):t}const F9=h.createContext(null);const U9=()=>{},B9=4,H9=20+2*B9,Hue=40+2*B9,Gue="hover",Ty={minStart:0,maxEnd:100,step:5,minSpan:10,maxSpan:100,panning:!0,filterMode:"keep",reverse:!1,slider:{enabled:!1,preview:!1,size:H9,showTooltip:Gue}},xL=(e,t,a,s)=>{if(e)return e===!0?Ve({axisId:t,axisDirection:a},Ty,{reverse:s??!1}):Ve({axisId:t,axisDirection:a},Ty,{reverse:s??!1},e,{slider:Ve({},Ty.slider,{size:e.slider?.preview??Ty.slider.preview?Hue:H9},e.slider)})};function G9(e,t){const a={top:0,bottom:0,none:0};return(e&&e.length>0?e:[{id:aN,scaleType:"linear"}]).map((i,l)=>{const o=i.dataKey,c=l===0?"bottom":"none",d=i.position??c,u=iue+(i.label?O9:0),f=i.id??`defaultized-x-axis-${l}`,p=Ve({offset:a[d]},i,{id:f,position:d,height:i.height??u,zoom:xL(i.zoom,f,"x",i.reverse)});if(d!=="none"&&(a[d]+=p.height,p.zoom?.slider.enabled&&(a[d]+=p.zoom.slider.size)),o===void 0||i.data!==void 0)return p;if(t===void 0)throw new Error("MUI X Charts: x-axis uses `dataKey` but no `dataset` is provided.");return Ve({},p,{data:t.map(x=>x[o])})})}function W9(e,t){const a={right:0,left:0,none:0};return(e&&e.length>0?e:[{id:aue,scaleType:"linear"}]).map((i,l)=>{const o=i.dataKey,c=l===0?"left":"none",d=i.position??c,u=rue+(i.label?O9:0),f=i.id??`defaultized-y-axis-${l}`,p=Ve({offset:a[d]},i,{id:f,position:d,width:i.width??u,zoom:xL(i.zoom,f,"y",i.reverse)});if(d!=="none"&&(a[d]+=p.width,p.zoom?.slider.enabled&&(a[d]+=p.zoom.slider.size)),o===void 0||i.data!==void 0)return p;if(t===void 0)throw new Error("MUI X Charts: y-axis uses `dataKey` but no `dataset` is provided.");return Ve({},p,{data:t.map(x=>x[o])})})}function Wue(e,t){return function(s,r){if(r.location==="tick"){const i=r.scale.domain();return i[0]===i[1]?r.scale.tickFormat(1)(s):r.scale.tickFormat(e)(s)}return r.location==="zoom-slider-tooltip"?t.tickFormat(2)(s):`${s}`}}function Mu(e){return e.scaleType==="band"}function Iu(e){return e.scaleType==="point"}function Vue(e){return e.scaleType!=="point"&&e.scaleType!=="band"}function que(e){return e.scaleType==="symlog"}function ox(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function yL(e){let t=e,a=e;e.length===1&&(t=(l,o)=>e(l)-o,a=Yue(e));function s(l,o,c,d){for(c==null&&(c=0),d==null&&(d=l.length);c<d;){const u=c+d>>>1;a(l[u],o)<0?c=u+1:d=u}return c}function r(l,o,c,d){for(c==null&&(c=0),d==null&&(d=l.length);c<d;){const u=c+d>>>1;a(l[u],o)>0?d=u:c=u+1}return c}function i(l,o,c,d){c==null&&(c=0),d==null&&(d=l.length);const u=s(l,o,c,d-1);return u>c&&t(l[u-1],o)>-t(l[u],o)?u-1:u}return{left:s,center:i,right:r}}function Yue(e){return(t,a)=>ox(e(t),a)}function V9(e){return e===null?NaN:+e}function*Que(e,t){for(let a of e)a!=null&&(a=+a)>=a&&(yield a)}const Kue=yL(ox),cx=Kue.right;yL(V9).center;class sv extends Map{constructor(t,a=Jue){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),t!=null)for(const[s,r]of t)this.set(s,r)}get(t){return super.get(l$(this,t))}has(t){return super.has(l$(this,t))}set(t,a){return super.set(Xue(this,t),a)}delete(t){return super.delete(Zue(this,t))}}function l$({_intern:e,_key:t},a){const s=t(a);return e.has(s)?e.get(s):a}function Xue({_intern:e,_key:t},a){const s=t(a);return e.has(s)?e.get(s):(e.set(s,a),a)}function Zue({_intern:e,_key:t},a){const s=t(a);return e.has(s)&&(a=e.get(a),e.delete(s)),a}function Jue(e){return e!==null&&typeof e=="object"?e.valueOf():e}var PE=Math.sqrt(50),DE=Math.sqrt(10),OE=Math.sqrt(2);function ME(e,t,a){var s,r=-1,i,l,o;if(t=+t,e=+e,a=+a,e===t&&a>0)return[e];if((s=t<e)&&(i=e,e=t,t=i),(o=q9(e,t,a))===0||!isFinite(o))return[];if(o>0){let c=Math.round(e/o),d=Math.round(t/o);for(c*o<e&&++c,d*o>t&&--d,l=new Array(i=d-c+1);++r<i;)l[r]=(c+r)*o}else{o=-o;let c=Math.round(e*o),d=Math.round(t*o);for(c/o<e&&++c,d/o>t&&--d,l=new Array(i=d-c+1);++r<i;)l[r]=(c+r)/o}return s&&l.reverse(),l}function q9(e,t,a){var s=(t-e)/Math.max(0,a),r=Math.floor(Math.log(s)/Math.LN10),i=s/Math.pow(10,r);return r>=0?(i>=PE?10:i>=DE?5:i>=OE?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(i>=PE?10:i>=DE?5:i>=OE?2:1)}function IE(e,t,a){var s=Math.abs(t-e)/Math.max(0,a),r=Math.pow(10,Math.floor(Math.log(s)/Math.LN10)),i=s/r;return i>=PE?r*=10:i>=DE?r*=5:i>=OE&&(r*=2),t<e?-r:r}function o$(e,t){let a;for(const s of e)s!=null&&(a<s||a===void 0&&s>=s)&&(a=s);return a}function c$(e,t){let a;for(const s of e)s!=null&&(a>s||a===void 0&&s>=s)&&(a=s);return a}function Y9(e,t,a=0,s=e.length-1,r=ox){for(;s>a;){if(s-a>600){const c=s-a+1,d=t-a+1,u=Math.log(c),f=.5*Math.exp(2*u/3),p=.5*Math.sqrt(u*f*(c-f)/c)*(d-c/2<0?-1:1),x=Math.max(a,Math.floor(t-d*f/c+p)),y=Math.min(s,Math.floor(t+(c-d)*f/c+p));Y9(e,t,x,y,r)}const i=e[t];let l=a,o=s;for(tg(e,a,t),r(e[s],i)>0&&tg(e,a,s);l<o;){for(tg(e,l,o),++l,--o;r(e[l],i)<0;)++l;for(;r(e[o],i)>0;)--o}r(e[a],i)===0?tg(e,a,o):(++o,tg(e,o,s)),o<=t&&(a=o+1),t<=o&&(s=o-1)}return e}function tg(e,t,a){const s=e[t];e[t]=e[a],e[a]=s}function eme(e,t,a){if(e=Float64Array.from(Que(e)),!!(s=e.length)){if((t=+t)<=0||s<2)return c$(e);if(t>=1)return o$(e);var s,r=(s-1)*t,i=Math.floor(r),l=o$(Y9(e,i).subarray(0,i+1)),o=c$(e.subarray(i+1));return l+(o-l)*(r-i)}}function tme(e,t,a=V9){if(s=e.length){if((t=+t)<=0||s<2)return+a(e[0],0,e);if(t>=1)return+a(e[s-1],s-1,e);var s,r=(s-1)*t,i=Math.floor(r),l=+a(e[i],i,e),o=+a(e[i+1],i+1,e);return l+(o-l)*(r-i)}}function Q9(e,t,a){e=+e,t=+t,a=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+a;for(var s=-1,r=Math.max(0,Math.ceil((t-e)/a))|0,i=new Array(r);++s<r;)i[s]=e+s*a;return i}function bi(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Bo(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const $E=Symbol("implicit");function op(){var e=new sv,t=[],a=[],s=$E;function r(i){let l=e.get(i);if(l===void 0){if(s!==$E)return s;e.set(i,l=t.push(i)-1)}return a[l%a.length]}return r.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new sv;for(const l of i)e.has(l)||e.set(l,t.push(l)-1);return r},r.range=function(i){return arguments.length?(a=Array.from(i),r):a.slice()},r.unknown=function(i){return arguments.length?(s=i,r):s},r.copy=function(){return op(t,a).unknown(s)},bi.apply(r,arguments),r}function bL(){var e=op().unknown(void 0),t=e.domain,a=e.range,s=0,r=1,i,l,o=!1,c=0,d=0,u=.5;delete e.unknown;function f(){var p=t().length,x=r<s,y=x?r:s,w=x?s:r;i=(w-y)/Math.max(1,p-c+d*2),o&&(i=Math.floor(i)),y+=(w-y-i*(p-c))*u,l=i*(1-c),o&&(y=Math.round(y),l=Math.round(l));var v=Q9(p).map(function(C){return y+i*C});return a(x?v.reverse():v)}return e.domain=function(p){return arguments.length?(t(p),f()):t()},e.range=function(p){return arguments.length?([s,r]=p,s=+s,r=+r,f()):[s,r]},e.rangeRound=function(p){return[s,r]=p,s=+s,r=+r,o=!0,f()},e.bandwidth=function(){return l},e.step=function(){return i},e.round=function(p){return arguments.length?(o=!!p,f()):o},e.padding=function(p){return arguments.length?(c=Math.min(1,d=+p),f()):c},e.paddingInner=function(p){return arguments.length?(c=Math.min(1,p),f()):c},e.paddingOuter=function(p){return arguments.length?(d=+p,f()):d},e.align=function(p){return arguments.length?(u=Math.max(0,Math.min(1,p)),f()):u},e.copy=function(){return bL(t(),[s,r]).round(o).paddingInner(c).paddingOuter(d).align(u)},bi.apply(f(),arguments)}function K9(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return K9(t())},e}function nme(){return K9(bL.apply(null,arguments).paddingInner(1))}function vL(e,t,a){e.prototype=t.prototype=a,a.constructor=e}function X9(e,t){var a=Object.create(e.prototype);for(var s in t)a[s]=t[s];return a}function dx(){}var cp=.7,rv=1/cp,sf="\\s*([+-]?\\d+)\\s*",dp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",xl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ame=/^#([0-9a-f]{3,8})$/,sme=new RegExp(`^rgb\\(${sf},${sf},${sf}\\)$`),rme=new RegExp(`^rgb\\(${xl},${xl},${xl}\\)$`),ime=new RegExp(`^rgba\\(${sf},${sf},${sf},${dp}\\)$`),lme=new RegExp(`^rgba\\(${xl},${xl},${xl},${dp}\\)$`),ome=new RegExp(`^hsl\\(${dp},${xl},${xl}\\)$`),cme=new RegExp(`^hsla\\(${dp},${xl},${xl},${dp}\\)$`),d$={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};vL(dx,up,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:u$,formatHex:u$,formatHex8:dme,formatHsl:ume,formatRgb:m$,toString:m$});function u$(){return this.rgb().formatHex()}function dme(){return this.rgb().formatHex8()}function ume(){return Z9(this).formatHsl()}function m$(){return this.rgb().formatRgb()}function up(e){var t,a;return e=(e+"").trim().toLowerCase(),(t=ame.exec(e))?(a=t[1].length,t=parseInt(t[1],16),a===6?f$(t):a===3?new nr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):a===8?ky(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):a===4?ky(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=sme.exec(e))?new nr(t[1],t[2],t[3],1):(t=rme.exec(e))?new nr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ime.exec(e))?ky(t[1],t[2],t[3],t[4]):(t=lme.exec(e))?ky(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ome.exec(e))?p$(t[1],t[2]/100,t[3]/100,1):(t=cme.exec(e))?p$(t[1],t[2]/100,t[3]/100,t[4]):d$.hasOwnProperty(e)?f$(d$[e]):e==="transparent"?new nr(NaN,NaN,NaN,0):null}function f$(e){return new nr(e>>16&255,e>>8&255,e&255,1)}function ky(e,t,a,s){return s<=0&&(e=t=a=NaN),new nr(e,t,a,s)}function mme(e){return e instanceof dx||(e=up(e)),e?(e=e.rgb(),new nr(e.r,e.g,e.b,e.opacity)):new nr}function RE(e,t,a,s){return arguments.length===1?mme(e):new nr(e,t,a,s??1)}function nr(e,t,a,s){this.r=+e,this.g=+t,this.b=+a,this.opacity=+s}vL(nr,RE,X9(dx,{brighter(e){return e=e==null?rv:Math.pow(rv,e),new nr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?cp:Math.pow(cp,e),new nr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new nr(ru(this.r),ru(this.g),ru(this.b),iv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:h$,formatHex:h$,formatHex8:fme,formatRgb:g$,toString:g$}));function h$(){return`#${Qd(this.r)}${Qd(this.g)}${Qd(this.b)}`}function fme(){return`#${Qd(this.r)}${Qd(this.g)}${Qd(this.b)}${Qd((isNaN(this.opacity)?1:this.opacity)*255)}`}function g$(){const e=iv(this.opacity);return`${e===1?"rgb(":"rgba("}${ru(this.r)}, ${ru(this.g)}, ${ru(this.b)}${e===1?")":`, ${e})`}`}function iv(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ru(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Qd(e){return e=ru(e),(e<16?"0":"")+e.toString(16)}function p$(e,t,a,s){return s<=0?e=t=a=NaN:a<=0||a>=1?e=t=NaN:t<=0&&(e=NaN),new Pi(e,t,a,s)}function Z9(e){if(e instanceof Pi)return new Pi(e.h,e.s,e.l,e.opacity);if(e instanceof dx||(e=up(e)),!e)return new Pi;if(e instanceof Pi)return e;e=e.rgb();var t=e.r/255,a=e.g/255,s=e.b/255,r=Math.min(t,a,s),i=Math.max(t,a,s),l=NaN,o=i-r,c=(i+r)/2;return o?(t===i?l=(a-s)/o+(a<s)*6:a===i?l=(s-t)/o+2:l=(t-a)/o+4,o/=c<.5?i+r:2-i-r,l*=60):o=c>0&&c<1?0:l,new Pi(l,o,c,e.opacity)}function hme(e,t,a,s){return arguments.length===1?Z9(e):new Pi(e,t,a,s??1)}function Pi(e,t,a,s){this.h=+e,this.s=+t,this.l=+a,this.opacity=+s}vL(Pi,hme,X9(dx,{brighter(e){return e=e==null?rv:Math.pow(rv,e),new Pi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?cp:Math.pow(cp,e),new Pi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,a=this.l,s=a+(a<.5?a:1-a)*t,r=2*a-s;return new nr(PS(e>=240?e-240:e+120,r,s),PS(e,r,s),PS(e<120?e+240:e-120,r,s),this.opacity)},clamp(){return new Pi(x$(this.h),Ly(this.s),Ly(this.l),iv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=iv(this.opacity);return`${e===1?"hsl(":"hsla("}${x$(this.h)}, ${Ly(this.s)*100}%, ${Ly(this.l)*100}%${e===1?")":`, ${e})`}`}}));function x$(e){return e=(e||0)%360,e<0?e+360:e}function Ly(e){return Math.max(0,Math.min(1,e||0))}function PS(e,t,a){return(e<60?t+(a-t)*e/60:e<180?a:e<240?t+(a-t)*(240-e)/60:t)*255}const wL=e=>()=>e;function gme(e,t){return function(a){return e+a*t}}function pme(e,t,a){return e=Math.pow(e,a),t=Math.pow(t,a)-e,a=1/a,function(s){return Math.pow(e+s*t,a)}}function xme(e){return(e=+e)==1?J9:function(t,a){return a-t?pme(t,a,e):wL(isNaN(t)?a:t)}}function J9(e,t){var a=t-e;return a?gme(e,a):wL(isNaN(e)?t:e)}const y$=(function e(t){var a=xme(t);function s(r,i){var l=a((r=RE(r)).r,(i=RE(i)).r),o=a(r.g,i.g),c=a(r.b,i.b),d=J9(r.opacity,i.opacity);return function(u){return r.r=l(u),r.g=o(u),r.b=c(u),r.opacity=d(u),r+""}}return s.gamma=e,s})(1);function yme(e,t){t||(t=[]);var a=e?Math.min(t.length,e.length):0,s=t.slice(),r;return function(i){for(r=0;r<a;++r)s[r]=e[r]*(1-i)+t[r]*i;return s}}function bme(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function vme(e,t){var a=t?t.length:0,s=e?Math.min(a,e.length):0,r=new Array(s),i=new Array(a),l;for(l=0;l<s;++l)r[l]=Bf(e[l],t[l]);for(;l<a;++l)i[l]=t[l];return function(o){for(l=0;l<s;++l)i[l]=r[l](o);return i}}function NL(e,t){var a=new Date;return e=+e,t=+t,function(s){return a.setTime(e*(1-s)+t*s),a}}function gf(e,t){return e=+e,t=+t,function(a){return e*(1-a)+t*a}}function wme(e,t){var a={},s={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?a[r]=Bf(e[r],t[r]):s[r]=t[r];return function(i){for(r in a)s[r]=a[r](i);return s}}var zE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,DS=new RegExp(zE.source,"g");function Nme(e){return function(){return e}}function jme(e){return function(t){return e(t)+""}}function jL(e,t){var a=zE.lastIndex=DS.lastIndex=0,s,r,i,l=-1,o=[],c=[];for(e=e+"",t=t+"";(s=zE.exec(e))&&(r=DS.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),o[l]?o[l]+=i:o[++l]=i),(s=s[0])===(r=r[0])?o[l]?o[l]+=r:o[++l]=r:(o[++l]=null,c.push({i:l,x:gf(s,r)})),a=DS.lastIndex;return a<t.length&&(i=t.slice(a),o[l]?o[l]+=i:o[++l]=i),o.length<2?c[0]?jme(c[0].x):Nme(t):(t=c.length,function(d){for(var u=0,f;u<t;++u)o[(f=c[u]).i]=f.x(d);return o.join("")})}function Bf(e,t){var a=typeof t,s;return t==null||a==="boolean"?wL(t):(a==="number"?gf:a==="string"?(s=up(t))?(t=s,y$):jL:t instanceof up?y$:t instanceof Date?NL:bme(t)?yme:Array.isArray(t)?vme:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?wme:gf)(e,t)}function CL(e,t){return e=+e,t=+t,function(a){return Math.round(e*(1-a)+t*a)}}function Cme(e,t){t===void 0&&(t=e,e=Bf);for(var a=0,s=t.length-1,r=t[0],i=new Array(s<0?0:s);a<s;)i[a]=e(r,r=t[++a]);return function(l){var o=Math.max(0,Math.min(s-1,Math.floor(l*=s)));return i[o](l-o)}}function Sme(e){return function(){return e}}function lv(e){return+e}var b$=[0,1];function Rs(e){return e}function FE(e,t){return(t-=e=+e)?function(a){return(a-e)/t}:Sme(isNaN(t)?NaN:.5)}function _me(e,t){var a;return e>t&&(a=e,e=t,t=a),function(s){return Math.max(e,Math.min(t,s))}}function Ame(e,t,a){var s=e[0],r=e[1],i=t[0],l=t[1];return r<s?(s=FE(r,s),i=a(l,i)):(s=FE(s,r),i=a(i,l)),function(o){return i(s(o))}}function Eme(e,t,a){var s=Math.min(e.length,t.length)-1,r=new Array(s),i=new Array(s),l=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<s;)r[l]=FE(e[l],e[l+1]),i[l]=a(t[l],t[l+1]);return function(o){var c=cx(e,o,1,s)-1;return i[c](r[c](o))}}function ux(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function oN(){var e=b$,t=b$,a=Bf,s,r,i,l=Rs,o,c,d;function u(){var p=Math.min(e.length,t.length);return l!==Rs&&(l=_me(e[0],e[p-1])),o=p>2?Eme:Ame,c=d=null,f}function f(p){return p==null||isNaN(p=+p)?i:(c||(c=o(e.map(s),t,a)))(s(l(p)))}return f.invert=function(p){return l(r((d||(d=o(t,e.map(s),gf)))(p)))},f.domain=function(p){return arguments.length?(e=Array.from(p,lv),u()):e.slice()},f.range=function(p){return arguments.length?(t=Array.from(p),u()):t.slice()},f.rangeRound=function(p){return t=Array.from(p),a=CL,u()},f.clamp=function(p){return arguments.length?(l=p?!0:Rs,u()):l!==Rs},f.interpolate=function(p){return arguments.length?(a=p,u()):a},f.unknown=function(p){return arguments.length?(i=p,f):i},function(p,x){return s=p,r=x,u()}}function SL(){return oN()(Rs,Rs)}function Tme(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function ov(e,t){if((a=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var a,s=e.slice(0,a);return[s.length>1?s[0]+s.slice(2):s,+e.slice(a+1)]}function pf(e){return e=ov(Math.abs(e)),e?e[1]:NaN}function kme(e,t){return function(a,s){for(var r=a.length,i=[],l=0,o=e[0],c=0;r>0&&o>0&&(c+o+1>s&&(o=Math.max(1,s-c)),i.push(a.substring(r-=o,r+o)),!((c+=o+1)>s));)o=e[l=(l+1)%e.length];return i.reverse().join(t)}}function Lme(e){return function(t){return t.replace(/[0-9]/g,function(a){return e[+a]})}}var Pme=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function mp(e){if(!(t=Pme.exec(e)))throw new Error("invalid format: "+e);var t;return new _L({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}mp.prototype=_L.prototype;function _L(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}_L.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Dme(e){e:for(var t=e.length,a=1,s=-1,r;a<t;++a)switch(e[a]){case".":s=r=a;break;case"0":s===0&&(s=a),r=a;break;default:if(!+e[a])break e;s>0&&(s=0);break}return s>0?e.slice(0,s)+e.slice(r+1):e}var eG;function Ome(e,t){var a=ov(e,t);if(!a)return e+"";var s=a[0],r=a[1],i=r-(eG=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,l=s.length;return i===l?s:i>l?s+new Array(i-l+1).join("0"):i>0?s.slice(0,i)+"."+s.slice(i):"0."+new Array(1-i).join("0")+ov(e,Math.max(0,t+i-1))[0]}function v$(e,t){var a=ov(e,t);if(!a)return e+"";var s=a[0],r=a[1];return r<0?"0."+new Array(-r).join("0")+s:s.length>r+1?s.slice(0,r+1)+"."+s.slice(r+1):s+new Array(r-s.length+2).join("0")}const w$={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Tme,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>v$(e*100,t),r:v$,s:Ome,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function N$(e){return e}var j$=Array.prototype.map,C$=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Mme(e){var t=e.grouping===void 0||e.thousands===void 0?N$:kme(j$.call(e.grouping,Number),e.thousands+""),a=e.currency===void 0?"":e.currency[0]+"",s=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?N$:Lme(j$.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(f){f=mp(f);var p=f.fill,x=f.align,y=f.sign,w=f.symbol,v=f.zero,C=f.width,N=f.comma,S=f.precision,T=f.trim,k=f.type;k==="n"?(N=!0,k="g"):w$[k]||(S===void 0&&(S=12),T=!0,k="g"),(v||p==="0"&&x==="=")&&(v=!0,p="0",x="=");var _=w==="$"?a:w==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",E=w==="$"?s:/[%p]/.test(k)?l:"",A=w$[k],I=/[defgprs%]/.test(k);S=S===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function z(F){var D=_,M=E,W,Z,R;if(k==="c")M=A(F)+M,F="";else{F=+F;var Q=F<0||1/F<0;if(F=isNaN(F)?c:A(Math.abs(F),S),T&&(F=Dme(F)),Q&&+F==0&&y!=="+"&&(Q=!1),D=(Q?y==="("?y:o:y==="-"||y==="("?"":y)+D,M=(k==="s"?C$[8+eG/3]:"")+M+(Q&&y==="("?")":""),I){for(W=-1,Z=F.length;++W<Z;)if(R=F.charCodeAt(W),48>R||R>57){M=(R===46?r+F.slice(W+1):F.slice(W))+M,F=F.slice(0,W);break}}}N&&!v&&(F=t(F,1/0));var Y=D.length+F.length+M.length,oe=Y<C?new Array(C-Y+1).join(p):"";switch(N&&v&&(F=t(oe+F,oe.length?C-M.length:1/0),oe=""),x){case"<":F=D+F+M+oe;break;case"=":F=D+oe+F+M;break;case"^":F=oe.slice(0,Y=oe.length>>1)+D+F+M+oe.slice(Y);break;default:F=oe+D+F+M;break}return i(F)}return z.toString=function(){return f+""},z}function u(f,p){var x=d((f=mp(f),f.type="f",f)),y=Math.max(-8,Math.min(8,Math.floor(pf(p)/3)))*3,w=Math.pow(10,-y),v=C$[8+y/3];return function(C){return x(w*C)+v}}return{format:d,formatPrefix:u}}var Py,AL,tG;Ime({thousands:",",grouping:[3],currency:["$",""]});function Ime(e){return Py=Mme(e),AL=Py.format,tG=Py.formatPrefix,Py}function $me(e){return Math.max(0,-pf(Math.abs(e)))}function Rme(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(pf(t)/3)))*3-pf(Math.abs(e)))}function zme(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,pf(t)-pf(e))+1}function nG(e,t,a,s){var r=IE(e,t,a),i;switch(s=mp(s??",f"),s.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return s.precision==null&&!isNaN(i=Rme(r,l))&&(s.precision=i),tG(s,l)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(i=zme(r,Math.max(Math.abs(e),Math.abs(t))))&&(s.precision=i-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(i=$me(r))&&(s.precision=i-(s.type==="%")*2);break}}return AL(s)}function id(e){var t=e.domain;return e.ticks=function(a){var s=t();return ME(s[0],s[s.length-1],a??10)},e.tickFormat=function(a,s){var r=t();return nG(r[0],r[r.length-1],a??10,s)},e.nice=function(a){a==null&&(a=10);var s=t(),r=0,i=s.length-1,l=s[r],o=s[i],c,d,u=10;for(o<l&&(d=l,l=o,o=d,d=r,r=i,i=d);u-- >0;){if(d=q9(l,o,a),d===c)return s[r]=l,s[i]=o,t(s);if(d>0)l=Math.floor(l/d)*d,o=Math.ceil(o/d)*d;else if(d<0)l=Math.ceil(l*d)/d,o=Math.floor(o*d)/d;else break;c=d}return e},e}function cN(){var e=SL();return e.copy=function(){return ux(e,cN())},bi.apply(e,arguments),id(e)}function aG(e){var t;function a(s){return s==null||isNaN(s=+s)?t:s}return a.invert=a,a.domain=a.range=function(s){return arguments.length?(e=Array.from(s,lv),a):e.slice()},a.unknown=function(s){return arguments.length?(t=s,a):t},a.copy=function(){return aG(e).unknown(t)},e=arguments.length?Array.from(e,lv):[0,1],id(a)}function sG(e,t){e=e.slice();var a=0,s=e.length-1,r=e[a],i=e[s],l;return i<r&&(l=a,a=s,s=l,l=r,r=i,i=l),e[a]=t.floor(r),e[s]=t.ceil(i),e}function S$(e){return Math.log(e)}function _$(e){return Math.exp(e)}function Fme(e){return-Math.log(-e)}function Ume(e){return-Math.exp(-e)}function Bme(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Hme(e){return e===10?Bme:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Gme(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function A$(e){return(t,a)=>-e(-t,a)}function EL(e){const t=e(S$,_$),a=t.domain;let s=10,r,i;function l(){return r=Gme(s),i=Hme(s),a()[0]<0?(r=A$(r),i=A$(i),e(Fme,Ume)):e(S$,_$),t}return t.base=function(o){return arguments.length?(s=+o,l()):s},t.domain=function(o){return arguments.length?(a(o),l()):a()},t.ticks=o=>{const c=a();let d=c[0],u=c[c.length-1];const f=u<d;f&&([d,u]=[u,d]);let p=r(d),x=r(u),y,w;const v=o==null?10:+o;let C=[];if(!(s%1)&&x-p<v){if(p=Math.floor(p),x=Math.ceil(x),d>0){for(;p<=x;++p)for(y=1;y<s;++y)if(w=p<0?y/i(-p):y*i(p),!(w<d)){if(w>u)break;C.push(w)}}else for(;p<=x;++p)for(y=s-1;y>=1;--y)if(w=p>0?y/i(-p):y*i(p),!(w<d)){if(w>u)break;C.push(w)}C.length*2<v&&(C=ME(d,u,v))}else C=ME(p,x,Math.min(x-p,v)).map(i);return f?C.reverse():C},t.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=s===10?"s":","),typeof c!="function"&&(!(s%1)&&(c=mp(c)).precision==null&&(c.trim=!0),c=AL(c)),o===1/0)return c;const d=Math.max(1,s*o/t.ticks().length);return u=>{let f=u/i(Math.round(r(u)));return f*s<s-.5&&(f*=s),f<=d?c(u):""}},t.nice=()=>a(sG(a(),{floor:o=>i(Math.floor(r(o))),ceil:o=>i(Math.ceil(r(o)))})),t}function fp(){const e=EL(oN()).domain([1,10]);return e.copy=()=>ux(e,fp()).base(e.base()),bi.apply(e,arguments),e}function E$(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function T$(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function TL(e){var t=1,a=e(E$(t),T$(t));return a.constant=function(s){return arguments.length?e(E$(t=+s),T$(t)):t},id(a)}function kL(){var e=TL(oN());return e.copy=function(){return ux(e,kL()).constant(e.constant())},bi.apply(e,arguments)}function k$(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Wme(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Vme(e){return e<0?-e*e:e*e}function LL(e){var t=e(Rs,Rs),a=1;function s(){return a===1?e(Rs,Rs):a===.5?e(Wme,Vme):e(k$(a),k$(1/a))}return t.exponent=function(r){return arguments.length?(a=+r,s()):a},id(t)}function dN(){var e=LL(oN());return e.copy=function(){return ux(e,dN()).exponent(e.exponent())},bi.apply(e,arguments),e}function rG(){return dN.apply(null,arguments).exponent(.5)}function L$(e){return Math.sign(e)*e*e}function qme(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function iG(){var e=SL(),t=[0,1],a=!1,s;function r(i){var l=qme(e(i));return isNaN(l)?s:a?Math.round(l):l}return r.invert=function(i){return e.invert(L$(i))},r.domain=function(i){return arguments.length?(e.domain(i),r):e.domain()},r.range=function(i){return arguments.length?(e.range((t=Array.from(i,lv)).map(L$)),r):t.slice()},r.rangeRound=function(i){return r.range(i).round(!0)},r.round=function(i){return arguments.length?(a=!!i,r):a},r.clamp=function(i){return arguments.length?(e.clamp(i),r):e.clamp()},r.unknown=function(i){return arguments.length?(s=i,r):s},r.copy=function(){return iG(e.domain(),t).round(a).clamp(e.clamp()).unknown(s)},bi.apply(r,arguments),id(r)}function lG(){var e=[],t=[],a=[],s;function r(){var l=0,o=Math.max(1,t.length);for(a=new Array(o-1);++l<o;)a[l-1]=tme(e,l/o);return i}function i(l){return l==null||isNaN(l=+l)?s:t[cx(a,l)]}return i.invertExtent=function(l){var o=t.indexOf(l);return o<0?[NaN,NaN]:[o>0?a[o-1]:e[0],o<a.length?a[o]:e[e.length-1]]},i.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let o of l)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(ox),r()},i.range=function(l){return arguments.length?(t=Array.from(l),r()):t.slice()},i.unknown=function(l){return arguments.length?(s=l,i):s},i.quantiles=function(){return a.slice()},i.copy=function(){return lG().domain(e).range(t).unknown(s)},bi.apply(i,arguments)}function oG(){var e=0,t=1,a=1,s=[.5],r=[0,1],i;function l(c){return c!=null&&c<=c?r[cx(s,c,0,a)]:i}function o(){var c=-1;for(s=new Array(a);++c<a;)s[c]=((c+1)*t-(c-a)*e)/(a+1);return l}return l.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,o()):[e,t]},l.range=function(c){return arguments.length?(a=(r=Array.from(c)).length-1,o()):r.slice()},l.invertExtent=function(c){var d=r.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,s[0]]:d>=a?[s[a-1],t]:[s[d-1],s[d]]},l.unknown=function(c){return arguments.length&&(i=c),l},l.thresholds=function(){return s.slice()},l.copy=function(){return oG().domain([e,t]).range(r).unknown(i)},bi.apply(id(l),arguments)}function PL(){var e=[.5],t=[0,1],a,s=1;function r(i){return i!=null&&i<=i?t[cx(e,i,0,s)]:a}return r.domain=function(i){return arguments.length?(e=Array.from(i),s=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(i){return arguments.length?(t=Array.from(i),s=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(i){var l=t.indexOf(i);return[e[l-1],e[l]]},r.unknown=function(i){return arguments.length?(a=i,r):a},r.copy=function(){return PL().domain(e).range(t).unknown(a)},bi.apply(r,arguments)}const OS=new Date,MS=new Date;function Za(e,t,a,s){function r(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return r.floor=i=>(e(i=new Date(+i)),i),r.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),r.round=i=>{const l=r(i),o=r.ceil(i);return i-l<o-i?l:o},r.offset=(i,l)=>(t(i=new Date(+i),l==null?1:Math.floor(l)),i),r.range=(i,l,o)=>{const c=[];if(i=r.ceil(i),o=o==null?1:Math.floor(o),!(i<l)||!(o>0))return c;let d;do c.push(d=new Date(+i)),t(i,o),e(i);while(d<i&&i<l);return c},r.filter=i=>Za(l=>{if(l>=l)for(;e(l),!i(l);)l.setTime(l-1)},(l,o)=>{if(l>=l)if(o<0)for(;++o<=0;)for(;t(l,-1),!i(l););else for(;--o>=0;)for(;t(l,1),!i(l););}),a&&(r.count=(i,l)=>(OS.setTime(+i),MS.setTime(+l),e(OS),e(MS),Math.floor(a(OS,MS))),r.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?r.filter(s?l=>s(l)%i===0:l=>r.count(0,l)%i===0):r)),r}const cv=Za(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);cv.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Za(t=>{t.setTime(Math.floor(t/e)*e)},(t,a)=>{t.setTime(+t+a*e)},(t,a)=>(a-t)/e):cv);cv.range;const ho=1e3,ri=ho*60,go=ri*60,_o=go*24,DL=_o*7,P$=_o*30,IS=_o*365,Kd=Za(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ho)},(e,t)=>(t-e)/ho,e=>e.getUTCSeconds());Kd.range;const OL=Za(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ho)},(e,t)=>{e.setTime(+e+t*ri)},(e,t)=>(t-e)/ri,e=>e.getMinutes());OL.range;const ML=Za(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ri)},(e,t)=>(t-e)/ri,e=>e.getUTCMinutes());ML.range;const IL=Za(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ho-e.getMinutes()*ri)},(e,t)=>{e.setTime(+e+t*go)},(e,t)=>(t-e)/go,e=>e.getHours());IL.range;const $L=Za(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*go)},(e,t)=>(t-e)/go,e=>e.getUTCHours());$L.range;const mx=Za(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ri)/_o,e=>e.getDate()-1);mx.range;const uN=Za(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/_o,e=>e.getUTCDate()-1);uN.range;const cG=Za(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/_o,e=>Math.floor(e/_o));cG.range;function $u(e){return Za(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,a)=>{t.setDate(t.getDate()+a*7)},(t,a)=>(a-t-(a.getTimezoneOffset()-t.getTimezoneOffset())*ri)/DL)}const mN=$u(0),dv=$u(1),Yme=$u(2),Qme=$u(3),xf=$u(4),Kme=$u(5),Xme=$u(6);mN.range;dv.range;Yme.range;Qme.range;xf.range;Kme.range;Xme.range;function Ru(e){return Za(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,a)=>{t.setUTCDate(t.getUTCDate()+a*7)},(t,a)=>(a-t)/DL)}const fN=Ru(0),uv=Ru(1),Zme=Ru(2),Jme=Ru(3),yf=Ru(4),efe=Ru(5),tfe=Ru(6);fN.range;uv.range;Zme.range;Jme.range;yf.range;efe.range;tfe.range;const RL=Za(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());RL.range;const zL=Za(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());zL.range;const Ao=Za(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ao.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Za(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,a)=>{t.setFullYear(t.getFullYear()+a*e)});Ao.range;const Eo=Za(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Eo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Za(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,a)=>{t.setUTCFullYear(t.getUTCFullYear()+a*e)});Eo.range;function dG(e,t,a,s,r,i){const l=[[Kd,1,ho],[Kd,5,5*ho],[Kd,15,15*ho],[Kd,30,30*ho],[i,1,ri],[i,5,5*ri],[i,15,15*ri],[i,30,30*ri],[r,1,go],[r,3,3*go],[r,6,6*go],[r,12,12*go],[s,1,_o],[s,2,2*_o],[a,1,DL],[t,1,P$],[t,3,3*P$],[e,1,IS]];function o(d,u,f){const p=u<d;p&&([d,u]=[u,d]);const x=f&&typeof f.range=="function"?f:c(d,u,f),y=x?x.range(d,+u+1):[];return p?y.reverse():y}function c(d,u,f){const p=Math.abs(u-d)/f,x=yL(([,,v])=>v).right(l,p);if(x===l.length)return e.every(IE(d/IS,u/IS,f));if(x===0)return cv.every(Math.max(IE(d,u,f),1));const[y,w]=l[p/l[x-1][2]<l[x][2]/p?x-1:x];return y.every(w)}return[o,c]}const[nfe,afe]=dG(Eo,zL,fN,cG,$L,ML),[sfe,rfe]=dG(Ao,RL,mN,mx,IL,OL);function $S(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function RS(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ng(e,t,a){return{y:e,m:t,d:a,H:0,M:0,S:0,L:0}}function ife(e){var t=e.dateTime,a=e.date,s=e.time,r=e.periods,i=e.days,l=e.shortDays,o=e.months,c=e.shortMonths,d=ag(r),u=sg(r),f=ag(i),p=sg(i),x=ag(l),y=sg(l),w=ag(o),v=sg(o),C=ag(c),N=sg(c),S={a:Q,A:Y,b:oe,B:re,c:null,d:R$,e:R$,f:Tfe,g:zfe,G:Ufe,H:_fe,I:Afe,j:Efe,L:uG,m:kfe,M:Lfe,p:ee,q:H,Q:U$,s:B$,S:Pfe,u:Dfe,U:Ofe,V:Mfe,w:Ife,W:$fe,x:null,X:null,y:Rfe,Y:Ffe,Z:Bfe,"%":F$},T={a:ye,A:te,b:ve,B:je,c:null,d:z$,e:z$,f:Vfe,g:nhe,G:she,H:Hfe,I:Gfe,j:Wfe,L:fG,m:qfe,M:Yfe,p:Oe,q:$e,Q:U$,s:B$,S:Qfe,u:Kfe,U:Xfe,V:Zfe,w:Jfe,W:ehe,x:null,X:null,y:the,Y:ahe,Z:rhe,"%":F$},k={a:z,A:F,b:D,B:M,c:W,d:I$,e:I$,f:Nfe,g:M$,G:O$,H:$$,I:$$,j:yfe,L:wfe,m:xfe,M:bfe,p:I,q:pfe,Q:Cfe,s:Sfe,S:vfe,u:ufe,U:mfe,V:ffe,w:dfe,W:hfe,x:Z,X:R,y:M$,Y:O$,Z:gfe,"%":jfe};S.x=_(a,S),S.X=_(s,S),S.c=_(t,S),T.x=_(a,T),T.X=_(s,T),T.c=_(t,T);function _(pe,Me){return function(Le){var he=[],ae=-1,Ae=0,ge=pe.length,Be,qe,Te;for(Le instanceof Date||(Le=new Date(+Le));++ae<ge;)pe.charCodeAt(ae)===37&&(he.push(pe.slice(Ae,ae)),(qe=D$[Be=pe.charAt(++ae)])!=null?Be=pe.charAt(++ae):qe=Be==="e"?" ":"0",(Te=Me[Be])&&(Be=Te(Le,qe)),he.push(Be),Ae=ae+1);return he.push(pe.slice(Ae,ae)),he.join("")}}function E(pe,Me){return function(Le){var he=ng(1900,void 0,1),ae=A(he,pe,Le+="",0),Ae,ge;if(ae!=Le.length)return null;if("Q"in he)return new Date(he.Q);if("s"in he)return new Date(he.s*1e3+("L"in he?he.L:0));if(Me&&!("Z"in he)&&(he.Z=0),"p"in he&&(he.H=he.H%12+he.p*12),he.m===void 0&&(he.m="q"in he?he.q:0),"V"in he){if(he.V<1||he.V>53)return null;"w"in he||(he.w=1),"Z"in he?(Ae=RS(ng(he.y,0,1)),ge=Ae.getUTCDay(),Ae=ge>4||ge===0?uv.ceil(Ae):uv(Ae),Ae=uN.offset(Ae,(he.V-1)*7),he.y=Ae.getUTCFullYear(),he.m=Ae.getUTCMonth(),he.d=Ae.getUTCDate()+(he.w+6)%7):(Ae=$S(ng(he.y,0,1)),ge=Ae.getDay(),Ae=ge>4||ge===0?dv.ceil(Ae):dv(Ae),Ae=mx.offset(Ae,(he.V-1)*7),he.y=Ae.getFullYear(),he.m=Ae.getMonth(),he.d=Ae.getDate()+(he.w+6)%7)}else("W"in he||"U"in he)&&("w"in he||(he.w="u"in he?he.u%7:"W"in he?1:0),ge="Z"in he?RS(ng(he.y,0,1)).getUTCDay():$S(ng(he.y,0,1)).getDay(),he.m=0,he.d="W"in he?(he.w+6)%7+he.W*7-(ge+5)%7:he.w+he.U*7-(ge+6)%7);return"Z"in he?(he.H+=he.Z/100|0,he.M+=he.Z%100,RS(he)):$S(he)}}function A(pe,Me,Le,he){for(var ae=0,Ae=Me.length,ge=Le.length,Be,qe;ae<Ae;){if(he>=ge)return-1;if(Be=Me.charCodeAt(ae++),Be===37){if(Be=Me.charAt(ae++),qe=k[Be in D$?Me.charAt(ae++):Be],!qe||(he=qe(pe,Le,he))<0)return-1}else if(Be!=Le.charCodeAt(he++))return-1}return he}function I(pe,Me,Le){var he=d.exec(Me.slice(Le));return he?(pe.p=u.get(he[0].toLowerCase()),Le+he[0].length):-1}function z(pe,Me,Le){var he=x.exec(Me.slice(Le));return he?(pe.w=y.get(he[0].toLowerCase()),Le+he[0].length):-1}function F(pe,Me,Le){var he=f.exec(Me.slice(Le));return he?(pe.w=p.get(he[0].toLowerCase()),Le+he[0].length):-1}function D(pe,Me,Le){var he=C.exec(Me.slice(Le));return he?(pe.m=N.get(he[0].toLowerCase()),Le+he[0].length):-1}function M(pe,Me,Le){var he=w.exec(Me.slice(Le));return he?(pe.m=v.get(he[0].toLowerCase()),Le+he[0].length):-1}function W(pe,Me,Le){return A(pe,t,Me,Le)}function Z(pe,Me,Le){return A(pe,a,Me,Le)}function R(pe,Me,Le){return A(pe,s,Me,Le)}function Q(pe){return l[pe.getDay()]}function Y(pe){return i[pe.getDay()]}function oe(pe){return c[pe.getMonth()]}function re(pe){return o[pe.getMonth()]}function ee(pe){return r[+(pe.getHours()>=12)]}function H(pe){return 1+~~(pe.getMonth()/3)}function ye(pe){return l[pe.getUTCDay()]}function te(pe){return i[pe.getUTCDay()]}function ve(pe){return c[pe.getUTCMonth()]}function je(pe){return o[pe.getUTCMonth()]}function Oe(pe){return r[+(pe.getUTCHours()>=12)]}function $e(pe){return 1+~~(pe.getUTCMonth()/3)}return{format:function(pe){var Me=_(pe+="",S);return Me.toString=function(){return pe},Me},parse:function(pe){var Me=E(pe+="",!1);return Me.toString=function(){return pe},Me},utcFormat:function(pe){var Me=_(pe+="",T);return Me.toString=function(){return pe},Me},utcParse:function(pe){var Me=E(pe+="",!0);return Me.toString=function(){return pe},Me}}}var D$={"-":"",_:" ",0:"0"},us=/^\s*\d+/,lfe=/^%/,ofe=/[\\^$*+?|[\]().{}]/g;function vn(e,t,a){var s=e<0?"-":"",r=(s?-e:e)+"",i=r.length;return s+(i<a?new Array(a-i+1).join(t)+r:r)}function cfe(e){return e.replace(ofe,"\\$&")}function ag(e){return new RegExp("^(?:"+e.map(cfe).join("|")+")","i")}function sg(e){return new Map(e.map((t,a)=>[t.toLowerCase(),a]))}function dfe(e,t,a){var s=us.exec(t.slice(a,a+1));return s?(e.w=+s[0],a+s[0].length):-1}function ufe(e,t,a){var s=us.exec(t.slice(a,a+1));return s?(e.u=+s[0],a+s[0].length):-1}function mfe(e,t,a){var s=us.exec(t.slice(a,a+2));return s?(e.U=+s[0],a+s[0].length):-1}function ffe(e,t,a){var s=us.exec(t.slice(a,a+2));return s?(e.V=+s[0],a+s[0].length):-1}function hfe(e,t,a){var s=us.exec(t.slice(a,a+2));return s?(e.W=+s[0],a+s[0].length):-1}function O$(e,t,a){var s=us.exec(t.slice(a,a+4));return s?(e.y=+s[0],a+s[0].length):-1}function M$(e,t,a){var s=us.exec(t.slice(a,a+2));return s?(e.y=+s[0]+(+s[0]>68?1900:2e3),a+s[0].length):-1}function gfe(e,t,a){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(a,a+6));return s?(e.Z=s[1]?0:-(s[2]+(s[3]||"00")),a+s[0].length):-1}function pfe(e,t,a){var s=us.exec(t.slice(a,a+1));return s?(e.q=s[0]*3-3,a+s[0].length):-1}function xfe(e,t,a){var s=us.exec(t.slice(a,a+2));return s?(e.m=s[0]-1,a+s[0].length):-1}function I$(e,t,a){var s=us.exec(t.slice(a,a+2));return s?(e.d=+s[0],a+s[0].length):-1}function yfe(e,t,a){var s=us.exec(t.slice(a,a+3));return s?(e.m=0,e.d=+s[0],a+s[0].length):-1}function $$(e,t,a){var s=us.exec(t.slice(a,a+2));return s?(e.H=+s[0],a+s[0].length):-1}function bfe(e,t,a){var s=us.exec(t.slice(a,a+2));return s?(e.M=+s[0],a+s[0].length):-1}function vfe(e,t,a){var s=us.exec(t.slice(a,a+2));return s?(e.S=+s[0],a+s[0].length):-1}function wfe(e,t,a){var s=us.exec(t.slice(a,a+3));return s?(e.L=+s[0],a+s[0].length):-1}function Nfe(e,t,a){var s=us.exec(t.slice(a,a+6));return s?(e.L=Math.floor(s[0]/1e3),a+s[0].length):-1}function jfe(e,t,a){var s=lfe.exec(t.slice(a,a+1));return s?a+s[0].length:-1}function Cfe(e,t,a){var s=us.exec(t.slice(a));return s?(e.Q=+s[0],a+s[0].length):-1}function Sfe(e,t,a){var s=us.exec(t.slice(a));return s?(e.s=+s[0],a+s[0].length):-1}function R$(e,t){return vn(e.getDate(),t,2)}function _fe(e,t){return vn(e.getHours(),t,2)}function Afe(e,t){return vn(e.getHours()%12||12,t,2)}function Efe(e,t){return vn(1+mx.count(Ao(e),e),t,3)}function uG(e,t){return vn(e.getMilliseconds(),t,3)}function Tfe(e,t){return uG(e,t)+"000"}function kfe(e,t){return vn(e.getMonth()+1,t,2)}function Lfe(e,t){return vn(e.getMinutes(),t,2)}function Pfe(e,t){return vn(e.getSeconds(),t,2)}function Dfe(e){var t=e.getDay();return t===0?7:t}function Ofe(e,t){return vn(mN.count(Ao(e)-1,e),t,2)}function mG(e){var t=e.getDay();return t>=4||t===0?xf(e):xf.ceil(e)}function Mfe(e,t){return e=mG(e),vn(xf.count(Ao(e),e)+(Ao(e).getDay()===4),t,2)}function Ife(e){return e.getDay()}function $fe(e,t){return vn(dv.count(Ao(e)-1,e),t,2)}function Rfe(e,t){return vn(e.getFullYear()%100,t,2)}function zfe(e,t){return e=mG(e),vn(e.getFullYear()%100,t,2)}function Ffe(e,t){return vn(e.getFullYear()%1e4,t,4)}function Ufe(e,t){var a=e.getDay();return e=a>=4||a===0?xf(e):xf.ceil(e),vn(e.getFullYear()%1e4,t,4)}function Bfe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+vn(t/60|0,"0",2)+vn(t%60,"0",2)}function z$(e,t){return vn(e.getUTCDate(),t,2)}function Hfe(e,t){return vn(e.getUTCHours(),t,2)}function Gfe(e,t){return vn(e.getUTCHours()%12||12,t,2)}function Wfe(e,t){return vn(1+uN.count(Eo(e),e),t,3)}function fG(e,t){return vn(e.getUTCMilliseconds(),t,3)}function Vfe(e,t){return fG(e,t)+"000"}function qfe(e,t){return vn(e.getUTCMonth()+1,t,2)}function Yfe(e,t){return vn(e.getUTCMinutes(),t,2)}function Qfe(e,t){return vn(e.getUTCSeconds(),t,2)}function Kfe(e){var t=e.getUTCDay();return t===0?7:t}function Xfe(e,t){return vn(fN.count(Eo(e)-1,e),t,2)}function hG(e){var t=e.getUTCDay();return t>=4||t===0?yf(e):yf.ceil(e)}function Zfe(e,t){return e=hG(e),vn(yf.count(Eo(e),e)+(Eo(e).getUTCDay()===4),t,2)}function Jfe(e){return e.getUTCDay()}function ehe(e,t){return vn(uv.count(Eo(e)-1,e),t,2)}function the(e,t){return vn(e.getUTCFullYear()%100,t,2)}function nhe(e,t){return e=hG(e),vn(e.getUTCFullYear()%100,t,2)}function ahe(e,t){return vn(e.getUTCFullYear()%1e4,t,4)}function she(e,t){var a=e.getUTCDay();return e=a>=4||a===0?yf(e):yf.ceil(e),vn(e.getUTCFullYear()%1e4,t,4)}function rhe(){return"+0000"}function F$(){return"%"}function U$(e){return+e}function B$(e){return Math.floor(+e/1e3)}var Pm,gG,pG;ihe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ihe(e){return Pm=ife(e),gG=Pm.format,Pm.parse,pG=Pm.utcFormat,Pm.utcParse,Pm}function lhe(e){return new Date(e)}function ohe(e){return e instanceof Date?+e:+new Date(+e)}function FL(e,t,a,s,r,i,l,o,c,d){var u=SL(),f=u.invert,p=u.domain,x=d(".%L"),y=d(":%S"),w=d("%I:%M"),v=d("%I %p"),C=d("%a %d"),N=d("%b %d"),S=d("%B"),T=d("%Y");function k(_){return(c(_)<_?x:o(_)<_?y:l(_)<_?w:i(_)<_?v:s(_)<_?r(_)<_?C:N:a(_)<_?S:T)(_)}return u.invert=function(_){return new Date(f(_))},u.domain=function(_){return arguments.length?p(Array.from(_,ohe)):p().map(lhe)},u.ticks=function(_){var E=p();return e(E[0],E[E.length-1],_??10)},u.tickFormat=function(_,E){return E==null?k:d(E)},u.nice=function(_){var E=p();return(!_||typeof _.range!="function")&&(_=t(E[0],E[E.length-1],_??10)),_?p(sG(E,_)):u},u.copy=function(){return ux(u,FL(e,t,a,s,r,i,l,o,c,d))},u}function UL(){return bi.apply(FL(sfe,rfe,Ao,RL,mN,mx,IL,OL,Kd,gG).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function xG(){return bi.apply(FL(nfe,afe,Eo,zL,fN,uN,$L,ML,Kd,pG).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function hN(){var e=0,t=1,a,s,r,i,l=Rs,o=!1,c;function d(f){return f==null||isNaN(f=+f)?c:l(r===0?.5:(f=(i(f)-a)*r,o?Math.max(0,Math.min(1,f)):f))}d.domain=function(f){return arguments.length?([e,t]=f,a=i(e=+e),s=i(t=+t),r=a===s?0:1/(s-a),d):[e,t]},d.clamp=function(f){return arguments.length?(o=!!f,d):o},d.interpolator=function(f){return arguments.length?(l=f,d):l};function u(f){return function(p){var x,y;return arguments.length?([x,y]=p,l=f(x,y),d):[l(0),l(1)]}}return d.range=u(Bf),d.rangeRound=u(CL),d.unknown=function(f){return arguments.length?(c=f,d):c},function(f){return i=f,a=f(e),s=f(t),r=a===s?0:1/(s-a),d}}function ld(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function BL(){var e=id(hN()(Rs));return e.copy=function(){return ld(e,BL())},Bo.apply(e,arguments)}function yG(){var e=EL(hN()).domain([1,10]);return e.copy=function(){return ld(e,yG()).base(e.base())},Bo.apply(e,arguments)}function bG(){var e=TL(hN());return e.copy=function(){return ld(e,bG()).constant(e.constant())},Bo.apply(e,arguments)}function HL(){var e=LL(hN());return e.copy=function(){return ld(e,HL()).exponent(e.exponent())},Bo.apply(e,arguments)}function che(){return HL.apply(null,arguments).exponent(.5)}function vG(){var e=[],t=Rs;function a(s){if(s!=null&&!isNaN(s=+s))return t((cx(e,s,1)-1)/(e.length-1))}return a.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let r of s)r!=null&&!isNaN(r=+r)&&e.push(r);return e.sort(ox),a},a.interpolator=function(s){return arguments.length?(t=s,a):t},a.range=function(){return e.map((s,r)=>t(r/(e.length-1)))},a.quantiles=function(s){return Array.from({length:s+1},(r,i)=>eme(e,i/s))},a.copy=function(){return vG(t).domain(e)},Bo.apply(a,arguments)}function gN(){var e=0,t=.5,a=1,s=1,r,i,l,o,c,d=Rs,u,f=!1,p;function x(w){return isNaN(w=+w)?p:(w=.5+((w=+u(w))-i)*(s*w<s*i?o:c),d(f?Math.max(0,Math.min(1,w)):w))}x.domain=function(w){return arguments.length?([e,t,a]=w,r=u(e=+e),i=u(t=+t),l=u(a=+a),o=r===i?0:.5/(i-r),c=i===l?0:.5/(l-i),s=i<r?-1:1,x):[e,t,a]},x.clamp=function(w){return arguments.length?(f=!!w,x):f},x.interpolator=function(w){return arguments.length?(d=w,x):d};function y(w){return function(v){var C,N,S;return arguments.length?([C,N,S]=v,d=Cme(w,[C,N,S]),x):[d(0),d(.5),d(1)]}}return x.range=y(Bf),x.rangeRound=y(CL),x.unknown=function(w){return arguments.length?(p=w,x):p},function(w){return u=w,r=w(e),i=w(t),l=w(a),o=r===i?0:.5/(i-r),c=i===l?0:.5/(l-i),s=i<r?-1:1,x}}function wG(){var e=id(gN()(Rs));return e.copy=function(){return ld(e,wG())},Bo.apply(e,arguments)}function NG(){var e=EL(gN()).domain([.1,1,10]);return e.copy=function(){return ld(e,NG()).base(e.base())},Bo.apply(e,arguments)}function jG(){var e=TL(gN());return e.copy=function(){return ld(e,jG()).constant(e.constant())},Bo.apply(e,arguments)}function GL(){var e=LL(gN());return e.copy=function(){return ld(e,GL()).exponent(e.exponent())},Bo.apply(e,arguments)}function dhe(){return GL.apply(null,arguments).exponent(.5)}function CG(e){return e.type==="piecewise"?PL(e.thresholds,e.colors):BL([e.min??0,e.max??100],e.color)}function bf(e){return e.values?op(e.values,e.colors).unknown(e.unknownColor??null):op(e.colors.map((t,a)=>a),e.colors).unknown(e.unknownColor??null)}function rf(e){return e.type==="ordinal"?bf(e):CG(e)}function SG(e,t,a){const{tickMaxStep:s,tickMinStep:r,tickNumber:i}=e,l=r===void 0?999:Math.floor(Math.abs(t[1]-t[0])/r),o=s===void 0?2:Math.ceil(Math.abs(t[1]-t[0])/s);return Math.min(l,Math.max(o,i??a))}function _G(e,t){return t[1]-t[0]===0?1:e/((t[1]-t[0])/100)}function WL(e){return Math.floor(Math.abs(e)/50)}function H$(e){return Array.isArray(e)?JSON.stringify(e):typeof e=="object"&&e!==null?e.valueOf():e}function pN(...e){let t=new sv(void 0,H$),a=[],s=[],r=0,i=1,l,o,c=!1,d=0,u=0,f=.5;const p=v=>{const C=t.get(v);if(C!==void 0)return s[C%s.length]},x=()=>{const v=a.length,C=i<r,N=C?i:r,S=C?r:i;l=(S-N)/Math.max(1,v-d+u*2),c&&(l=Math.floor(l));const T=N+(S-N-l*(v-d))*f;o=l*(1-d);const k=c?Math.round(T):T;o=c?Math.round(o):o;const E=Q9(v).map(A=>k+l*A);return s=C?E.reverse():E,p};p.domain=function(v){if(!arguments.length)return a.slice();a=[],t=new sv(void 0,H$);for(const C of v)t.has(C)||t.set(C,a.push(C)-1);return x()},p.range=function(v){if(!arguments.length)return[r,i];const[C,N]=v;return r=+C,i=+N,x()},p.rangeRound=function(v){const[C,N]=v;return r=+C,i=+N,c=!0,x()},p.bandwidth=function(){return o},p.step=function(){return l},p.round=function(v){return arguments.length?(c=!!v,x()):c},p.padding=function(v){return arguments.length?(d=Math.min(1,u=+v),x()):d},p.paddingInner=function(v){return arguments.length?(d=Math.min(1,v),x()):d},p.paddingOuter=function(v){return arguments.length?(u=+v,x()):u},p.align=function(v){return arguments.length?(f=Math.max(0,Math.min(1,v)),x()):f},p.copy=()=>pN(a,[r,i]).round(c).paddingInner(d).paddingOuter(u).align(f);const[y,w]=e;return e.length>1?(p.domain(y),p.range(w)):y?p.range(y):x(),p}function AG(...e){const t=pN(...e).paddingInner(1),a=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=()=>{const s=a();return s.padding=s.paddingOuter,delete s.paddingInner,delete s.paddingOuter,s.copy=t.copy,s},t}function EG(...e){const t=kL(...e),a=t.ticks,{negativeScale:s,linearScale:r,positiveScale:i}=uhe(t);return t.ticks=l=>{const o=a(l),c=t.constant();let d=0,u=0,f=0;o.forEach(x=>{x>-c&&x<c&&(u+=1),x<=-c&&(d+=1),x>=c&&(f+=1)});const p=[];if(d>0&&p.push(...s.ticks(d)),u>0){const x=r.ticks(u);p.at(-1)===x[0]?p.push(...x.slice(1)):p.push(...x)}if(f>0){const x=i.ticks(f);p.at(-1)===x[0]?p.push(...x.slice(1)):p.push(...x)}return p},t.tickFormat=(l=10,o)=>{const c=t.constant(),[d,u]=t.domain(),f=u-d,p=s.domain(),x=p[1]-p[0],w=(f===0?0:x/f)*l,v=r.domain(),C=v[1]-v[0],S=(f===0?0:C/f)*l,T=i.domain(),k=T[1]-T[0],E=(f===0?0:k/f)*l,A=s.tickFormat(w,o),I=r.tickFormat(S,o),z=i.tickFormat(E,o);return F=>(F.valueOf()<=-c?A:F.valueOf()>=c?z:I)(F)},t.copy=()=>EG(t.domain(),t.range()).constant(t.constant()),t}function uhe(e){const t=e.constant(),a=e.domain(),s=[a[0],Math.min(a[1],-t)],r=fp(s,e.range()),i=[Math.max(a[0],-t),Math.min(a[1],t)],l=cN(i,e.range()),o=[Math.max(a[0],t),a[1]],c=fp(o,e.range());return{negativeScale:r,linearScale:l,positiveScale:c}}function xN(e,t,a){switch(e){case"log":return fp(t,a);case"pow":return dN(t,a);case"sqrt":return rG(t,a);case"time":return UL(t,a);case"utc":return xG(t,a);case"symlog":return EG(t,a);default:return cN(t,a)}}const UE=e=>e?.[0]instanceof Date;function BE(e,t,a){const s=UL(e,t);return(r,{location:i})=>i==="tick"?s.tickFormat(a)(r):`${r.toLocaleString()}`}let G$,W$;class mhe{types=new Set;constructor(){if(G$)throw new Error("You can only create one instance!");G$=this.types}addType(t){this.types.add(t)}getTypes(){return this.types}}class fhe{types=new Set;constructor(){if(W$)throw new Error("You can only create one instance!");W$=this.types}addType(t){this.types.add(t)}getTypes(){return this.types}}const yN=new mhe;yN.addType("bar");yN.addType("line");yN.addType("scatter");const TG=new fhe;TG.addType("radar");function bN(e){return yN.getTypes().has(e)}function mv(e){return bN(e.type)}const hhe=(e,t,a,s)=>{const r=new Set;return Object.keys(t).filter(bN).forEach(l=>{const o=a[l]?.series??{},c=t[l].axisTooltipGetter?.(o);c!==void 0&&c.forEach(({axisId:d,direction:u})=>{u===e&&r.add(d??s)})}),r};function ms(e){return e.bandwidth!==void 0}function ghe(e){return ms(e)&&e.paddingOuter!==void 0}function phe(e,t,a){const s=t==="x"?[e.left,e.left+e.width]:[e.top+e.height,e.top];return a?[s[1],s[0]]:s}const xhe=.2,yhe=.1;function kG({scales:e,drawingArea:t,formattedSeries:a,axis:s,seriesConfig:r,axisDirection:i,zoomMap:l,domains:o}){if(s===void 0)return{axis:{},axisIds:[]};const c=hhe(i,r,a,s[0].id),d={};return s.forEach(u=>{const f=u,p=e[f.id],x=l?.get(f.id),y=x?[x.start,x.end]:[0,100],w=phe(t,i,f.reverse??!1),v=!f.ignoreTooltip&&c.has(f.id),C=f.data??[];if(ms(p)){const _=i==="y"?[w[1],w[0]]:w;if(ghe(p)&&Mu(f)){const E=f.categoryGapRatio??xhe,A=f.barGapRatio??yhe;d[f.id]=Ve({offset:0,height:0,categoryGapRatio:E,barGapRatio:A,triggerTooltip:v},f,{data:C,scale:p,tickNumber:f.data.length,colorScale:f.colorMap&&(f.colorMap.type==="ordinal"?bf(Ve({values:f.data},f.colorMap)):rf(f.colorMap))})}if(Iu(f)&&(d[f.id]=Ve({offset:0,height:0,triggerTooltip:v},f,{data:C,scale:p,tickNumber:f.data.length,colorScale:f.colorMap&&(f.colorMap.type==="ordinal"?bf(Ve({values:f.data},f.colorMap)):rf(f.colorMap))})),UE(f.data)){const E=BE(f.data,_,f.tickNumber);d[f.id].valueFormatter=f.valueFormatter??E}return}if(f.scaleType==="band"||f.scaleType==="point")return;const N=o[f.id].tickNumber,S=f,T=S.scaleType??"linear",k=_G(N,y);d[f.id]=Ve({offset:0,height:0,triggerTooltip:v},S,{data:C,scaleType:T,scale:p,tickNumber:k,colorScale:S.colorMap&&CG(S.colorMap),valueFormatter:f.valueFormatter??Wue(k,xN(T,w.map(_=>p.invert(_)),w))})}),{axis:d,axisIds:s.map(({id:u})=>u)}}function bhe(e){return e!=null}function vhe(e,t,a,s){const r=e?.length??0,i=Math.floor(t*r/100),l=Math.ceil(a*r/100);return function(c,d){return(c[s]??e?.[d])==null?!0:d>=i&&d<l}}function whe(e,t,a,s,r){const i=e[0].valueOf(),l=e[1].valueOf(),o=i+t*(l-i)/100,c=i+a*(l-i)/100;return function(u,f){const p=u[s]??r?.[f];return p==null?!0:p>=o&&p<=c}}const Nhe=e=>({currentAxisId:t,seriesXAxisId:a,seriesYAxisId:s,isDefaultAxis:r})=>(i,l)=>!(t===a?s:a)||r?Object.values(e??{})[0]?.(i,l)??!0:[s,a].filter(d=>d!==t).map(d=>e[d??""]).filter(bhe).every(d=>d(i,l)),V$=e=>(t=[])=>t.reduce((a,s)=>{const{zoom:r,id:i,reverse:l}=s,o=xL(r,i,e,l);return o&&(a[i]=o),a},{}),jhe=.2;function LG(e,t,a){const s=t==="x"?[e.left,e.left+e.width]:[e.top+e.height,e.top];return a.reverse?[s[1],s[0]]:s}function PG(e,t){const a=[0,1];if(Mu(e)){const i=e.categoryGapRatio??jhe;return pN(t,a).paddingInner(i).paddingOuter(i/2)}if(Iu(e))return AG(t,a);const s=e.scaleType??"linear",r=xN(s,t,a);return que(e)&&e.constant!=null&&r.constant(e.constant),r}const DG=(e,t)=>{const a=e[1]-e[0],s=t[1]-t[0],r=e[0]-t[0]*a/s,i=e[1]+(100-t[1])*a/s;return[r,i]},Che=(e,t,a,s,r,i,l)=>{const o=a==="x"?s[e].xExtremumGetter:s[e].yExtremumGetter,c=i[e]?.series??{};return o?.({series:c,axis:t,axisIndex:r,isDefaultAxis:r===0,getFilters:l})??[1/0,-1/0]};function vN(e,t,a,s,r,i){const l=Object.keys(a).filter(bN);let o=[1/0,-1/0];for(const c of l){const[d,u]=Che(c,e,t,a,s,r,i);o=[Math.min(o[0],d),Math.max(o[1],u)]}return Number.isNaN(o[0])||Number.isNaN(o[1])?[1/0,-1/0]:o}const She=(e,t,a,s)=>{if(e.domainLimit!==void 0)return e.domainLimit;if(t==="x")for(const r of s.line?.seriesOrder??[]){const i=s.line.series[r];if(i.xAxisId===e.id||i.xAxisId===void 0&&a===0)return"strict"}return"nice"};function OG(e,t,a){return xN(e??"linear",t,[0,1]).nice(a).domain()}function MG(e,t,a,s,[r,i],l,o){const c=$G(e,t,a,s,o);let d=RG(e,r,i);if(typeof c=="function"){const{min:f,max:p}=c(r.valueOf(),i.valueOf());d[0]=f,d[1]=p}const u=SG(e,d,l);return c==="nice"&&(d=OG(e.scaleType,d,u)),d=["min"in e?e.min??d[0]:d[0],"max"in e?e.max??d[1]:d[1]],{domain:d,tickNumber:u}}function IG(e,t,a,s,[r,i],l,o){const c=$G(e,t,a,s,o);let d=RG(e,r,i);if(typeof c=="function"){const{min:u,max:f}=c(r.valueOf(),i.valueOf());d[0]=u,d[1]=f}return c==="nice"&&(d=OG(e.scaleType,d,l)),[e.min??d[0],e.max??d[1]]}function $G(e,t,a,s,r){return r?She(e,t,a,s):e.domainLimit??"nice"}function RG(e,t,a){let s=t,r=a;return"max"in e&&e.max!=null&&e.max<t&&(s=e.max),"min"in e&&e.min!=null&&e.min>t&&(r=e.min),!("min"in e)&&!("max"in e)?[s,r]:[e.min??s,e.max??r]}class _he{constructor(){this.ids=[],this.values=[],this.length=0}clear(){this.length=0}push(t,a){let s=this.length++;for(;s>0;){const r=s-1>>1,i=this.values[r];if(a>=i)break;this.ids[s]=this.ids[r],this.values[s]=i,s=r}this.ids[s]=t,this.values[s]=a}pop(){if(this.length===0)return;const t=this.ids,a=this.values,s=t[0],r=--this.length;if(r>0){const i=t[r],l=a[r];let o=0;const c=r>>1;for(;o<c;){const d=(o<<1)+1,u=d+1,f=d+(+(u<r)&+(a[u]<a[d]));if(a[f]>=l)break;t[o]=t[f],a[o]=a[f],o=f}t[o]=i,a[o]=l}return s}peek(){return this.length>0?this.ids[0]:void 0}peekValue(){return this.length>0?this.values[0]:void 0}shrink(){this.ids.length=this.values.length=this.length}}const q$=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],zS=3;class VL{static from(t,a=0){if(a%8!==0)throw new Error("byteOffset must be 8-byte aligned.");if(!t||t.byteLength===void 0||t.buffer)throw new Error("Data must be an instance of ArrayBuffer or SharedArrayBuffer.");const[s,r]=new Uint8Array(t,a+0,2);if(s!==251)throw new Error("Data does not appear to be in a Flatbush format.");const i=r>>4;if(i!==zS)throw new Error(`Got v${i} data when expected v${zS}.`);const l=q$[r&15];if(!l)throw new Error("Unrecognized array type.");const[o]=new Uint16Array(t,a+2,1),[c]=new Uint32Array(t,a+4,1);return new VL(c,o,l,void 0,t,a)}constructor(t,a=16,s=Float64Array,r=ArrayBuffer,i,l=0){if(t===void 0)throw new Error("Missing required argument: numItems.");if(isNaN(t)||t<=0)throw new Error(`Unexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+a,2),65535),this.byteOffset=l;let o=t,c=o;this._levelBounds=[o*4];do o=Math.ceil(o/this.nodeSize),c+=o,this._levelBounds.push(c*4);while(o!==1);this.ArrayType=s,this.IndexArrayType=c<16384?Uint16Array:Uint32Array;const d=q$.indexOf(s),u=c*4*s.BYTES_PER_ELEMENT;if(d<0)throw new Error(`Unexpected typed array class: ${s}.`);if(i)this.data=i,this._boxes=new s(i,l+8,c*4),this._indices=new this.IndexArrayType(i,l+8+u,c),this._pos=c*4,this.minX=this._boxes[this._pos-4],this.minY=this._boxes[this._pos-3],this.maxX=this._boxes[this._pos-2],this.maxY=this._boxes[this._pos-1];else{const f=this.data=new r(8+u+c*this.IndexArrayType.BYTES_PER_ELEMENT);this._boxes=new s(f,8,c*4),this._indices=new this.IndexArrayType(f,8+u,c),this._pos=0,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,new Uint8Array(f,0,2).set([251,(zS<<4)+d]),new Uint16Array(f,2,1)[0]=a,new Uint32Array(f,4,1)[0]=t}this._queue=new _he}add(t,a,s=t,r=a){const i=this._pos>>2,l=this._boxes;return this._indices[i]=i,l[this._pos++]=t,l[this._pos++]=a,l[this._pos++]=s,l[this._pos++]=r,t<this.minX&&(this.minX=t),a<this.minY&&(this.minY=a),s>this.maxX&&(this.maxX=s),r>this.maxY&&(this.maxY=r),i}finish(){if(this._pos>>2!==this.numItems)throw new Error(`Added ${this._pos>>2} items when expected ${this.numItems}.`);const t=this._boxes;if(this.numItems<=this.nodeSize){t[this._pos++]=this.minX,t[this._pos++]=this.minY,t[this._pos++]=this.maxX,t[this._pos++]=this.maxY;return}const a=this.maxX-this.minX||1,s=this.maxY-this.minY||1,r=new Uint32Array(this.numItems),i=65535;for(let l=0,o=0;l<this.numItems;l++){const c=t[o++],d=t[o++],u=t[o++],f=t[o++],p=Math.floor(i*((c+u)/2-this.minX)/a),x=Math.floor(i*((d+f)/2-this.minY)/s);r[l]=The(p,x)}HE(r,t,this._indices,0,this.numItems-1,this.nodeSize);for(let l=0,o=0;l<this._levelBounds.length-1;l++){const c=this._levelBounds[l];for(;o<c;){const d=o;let u=t[o++],f=t[o++],p=t[o++],x=t[o++];for(let y=1;y<this.nodeSize&&o<c;y++)u=Math.min(u,t[o++]),f=Math.min(f,t[o++]),p=Math.max(p,t[o++]),x=Math.max(x,t[o++]);this._indices[this._pos>>2]=d,t[this._pos++]=u,t[this._pos++]=f,t[this._pos++]=p,t[this._pos++]=x}}}search(t,a,s,r,i){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let l=this._boxes.length-4;const o=[],c=[];for(;l!==void 0;){const d=Math.min(l+this.nodeSize*4,Y$(l,this._levelBounds));for(let u=l;u<d;u+=4){if(s<this._boxes[u]||r<this._boxes[u+1]||t>this._boxes[u+2]||a>this._boxes[u+3])continue;const f=this._indices[u>>2]|0;l>=this.numItems*4?o.push(f):(i===void 0||i(f))&&(c.push(f),c.push(this._boxes[u]),c.push(this._boxes[u+1]))}l=o.pop()}return c}neighbors(t,a,s=1/0,r=1/0,i,l=Ahe){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let o=this._boxes.length-4;const c=this._queue,d=[];e:for(;o!==void 0;){const u=Math.min(o+this.nodeSize*4,Y$(o,this._levelBounds));for(let f=o;f<u;f+=4){const p=this._indices[f>>2]|0,x=this._boxes[f],y=this._boxes[f+1],w=this._boxes[f+2],v=this._boxes[f+3],C=t<x?x-t:t>w?t-w:0,N=a<y?y-a:a>v?a-v:0,S=l(C,N);S>r||(o>=this.numItems*4?c.push(p<<1,S):(i===void 0||i(p))&&c.push((p<<1)+1,S))}for(;c.length&&c.peek()&1;)if(c.peekValue()>r||(d.push(c.pop()>>1),d.length===s))break e;o=c.length?c.pop()>>1:void 0}return c.clear(),d}}function Ahe(e,t){return e*e+t*t}function Y$(e,t){let a=0,s=t.length-1;for(;a<s;){const r=a+s>>1;t[r]>e?s=r:a=r+1}return t[a]}function HE(e,t,a,s,r,i){if(Math.floor(s/i)>=Math.floor(r/i))return;const l=e[s],o=e[s+r>>1],c=e[r];let d=c;const u=Math.max(l,o);c>u?d=u:u===l?d=Math.max(o,c):u===o&&(d=Math.max(l,c));let f=s-1,p=r+1;for(;;){do f++;while(e[f]<d);do p--;while(e[p]>d);if(f>=p)break;Ehe(e,t,a,f,p)}HE(e,t,a,s,p,i),HE(e,t,a,p+1,r,i)}function Ehe(e,t,a,s,r){const i=e[s];e[s]=e[r],e[r]=i;const l=4*s,o=4*r,c=t[l],d=t[l+1],u=t[l+2],f=t[l+3];t[l]=t[o],t[l+1]=t[o+1],t[l+2]=t[o+2],t[l+3]=t[o+3],t[o]=c,t[o+1]=d,t[o+2]=u,t[o+3]=f;const p=a[s];a[s]=a[r],a[r]=p}function The(e,t){let a=e^t,s=65535^a,r=65535^(e|t),i=e&(t^65535),l=a|s>>1,o=a>>1^a,c=r>>1^s&i>>1^r,d=a&r>>1^i>>1^i;a=l,s=o,r=c,i=d,l=a&a>>2^s&s>>2,o=a&s>>2^s&(a^s)>>2,c^=a&r>>2^s&i>>2,d^=s&r>>2^(a^s)&i>>2,a=l,s=o,r=c,i=d,l=a&a>>4^s&s>>4,o=a&s>>4^s&(a^s)>>4,c^=a&r>>4^s&i>>4,d^=s&r>>4^(a^s)&i>>4,a=l,s=o,r=c,i=d,c^=a&r>>8^s&i>>8,d^=s&r>>8^(a^s)&i>>8,a=c^c>>1,s=d^d>>1;let u=e^t,f=s|65535^(u|a);return u=(u|u<<8)&16711935,u=(u|u<<4)&252645135,u=(u|u<<2)&858993459,u=(u|u<<1)&1431655765,f=(f|f<<8)&16711935,f=(f|f<<4)&252645135,f=(f|f<<2)&858993459,f=(f|f<<1)&1431655765,(f<<1|u)>>>0}const khe=e=>{const t=new Map;return e.forEach(a=>{t.set(a.axisId,a)}),t},zG=e=>e.zoom,Lhe=wt(Ll,Uo,(e,t)=>e?.some(a=>!!a.zoom)||t?.some(a=>!!a.zoom)||!1),FG=wt(zG,e=>e?.isInteracting),od=Aa(zG,function(t){return t?.zoomData&&khe(t?.zoomData)}),Q$=wt(od,(e,t)=>e?.get(t)),fx=Aa(Ll,Uo,function(t,a){return Ve({},V$("x")(t),V$("y")(a))});wt(fx,(e,t)=>e[t]);const Phe=wt(cr,function(t){return WL(t.width)}),Dhe=wt(cr,function(t){return WL(t.height)}),qL=Aa(Ll,da,$r,rN,Phe,function(t,a,s,r,i){const o={};return t?.forEach((c,d)=>{const u=c;if(Mu(u)||Iu(u)){o[u.id]={domain:u.data};return}const f=vN(u,"x",s,d,a);o[u.id]=MG(u,"x",d,a,f,i,r)}),{axes:t,domains:o}}),YL=Aa(Uo,da,$r,rN,Dhe,function(t,a,s,r,i){const o={};return t?.forEach((c,d)=>{const u=c;if(Mu(u)||Iu(u)){o[u.id]={domain:u.data};return}const f=vN(u,"y",s,d,a);o[u.id]=MG(u,"y",d,a,f,i,r)}),{axes:t,domains:o}}),UG=Aa(od,fx,qL,YL,function(t,a,{axes:s,domains:r},{axes:i,domains:l}){if(!t||!a)return;let o=!1;const c={},d=[...s??[],...i??[]];for(let u=0;u<d.length;u+=1){const f=d[u];if(!a[f.id]||a[f.id].filterMode!=="discard")continue;const p=t.get(f.id);if(p===void 0||p.start<=0&&p.end>=100)continue;const x=u<(s?.length??0)?"x":"y";if(f.scaleType==="band"||f.scaleType==="point")c[f.id]=vhe(f.data,p.start,p.end,x);else{const{domain:y}=x==="x"?r[f.id]:l[f.id];c[f.id]=whe(y,p.start,p.end,x,f.data)}o=!0}if(o)return Nhe(c)}),Ohe=Aa(da,$r,od,fx,UG,rN,qL,function(t,a,s,r,i,l,{axes:o,domains:c}){const d={};return o?.forEach((u,f)=>{const p=c[u.id].domain;if(Mu(u)||Iu(u)){d[u.id]=p;return}const x=s?.get(u.id),y=r?.[u.id],w=x===void 0&&!y?i:void 0;if(!w){d[u.id]=p;return}const v=c[u.id].tickNumber,C=vN(u,"x",a,f,t,w);d[u.id]=IG(u,"x",f,t,C,v,l)}),d}),Mhe=Aa(da,$r,od,fx,UG,rN,YL,function(t,a,s,r,i,l,{axes:o,domains:c}){const d={};return o?.forEach((u,f)=>{const p=c[u.id].domain;if(Mu(u)||Iu(u)){d[u.id]=p;return}const x=s?.get(u.id),y=r?.[u.id],w=x===void 0&&!y?i:void 0;if(!w){d[u.id]=p;return}const v=c[u.id].tickNumber,C=vN(u,"y",a,f,t,w);d[u.id]=IG(u,"y",f,t,C,v,l)}),d}),BG=Aa(Ll,Ohe,function(t,a){const s={};return t?.forEach(r=>{const i=r,l=a[i.id];s[i.id]=PG(i,l)}),s}),HG=Aa(Uo,Mhe,function(t,a){const s={};return t?.forEach(r=>{const i=r,l=a[i.id];s[i.id]=PG(i,l)}),s}),Ihe=Aa(Ll,BG,cr,od,function(t,a,s,r){const i={};return t?.forEach(l=>{const o=l,c=r?.get(o.id),d=c?[c.start,c.end]:[0,100],u=LG(s,"x",o),f=a[o.id].copy(),p=DG(u,d);f.range(p),i[o.id]=f}),i}),$he=Aa(Uo,HG,cr,od,function(t,a,s,r){const i={};return t?.forEach(l=>{const o=l,c=r?.get(o.id),d=c?[c.start,c.end]:[0,100],u=LG(s,"y",o),f=a[o.id].copy(),p=ms(f)?u.reverse():u,x=DG(p,d);f.range(x),i[o.id]=f}),i}),Hs=Aa(cr,da,$r,od,qL,Ihe,function(t,a,s,r,{axes:i,domains:l},o){return kG({scales:o,drawingArea:t,formattedSeries:a,axis:i,seriesConfig:s,axisDirection:"x",zoomMap:r,domains:l})}),Gs=Aa(cr,da,$r,od,YL,$he,function(t,a,s,r,{axes:i,domains:l},o){return kG({scales:o,drawingArea:t,formattedSeries:a,axis:i,seriesConfig:s,axisDirection:"y",zoomMap:r,domains:l})});wt(Hs,Gs,(e,t,a)=>e?.axis[a]??t?.axis[a]);wt(Ll,Uo,(e,t,a)=>{const s=e?.find(r=>r.id===a)??t?.find(r=>r.id===a)??null;if(s)return s});const Rhe=wt(Ll,e=>e[0].id),zhe=wt(Uo,e=>e[0].id),Fhe=new Map,Uhe=()=>Fhe,Bhe=Aa(da,BG,HG,Rhe,zhe,function(t,a,s,r,i){const l=t.scatter,o=new Map;return l&&l.seriesOrder.forEach(c=>{const{data:d,xAxisId:u=r,yAxisId:f=i}=l.series[c],p=new VL(d.length),x=a[u],y=s[f];for(const w of d)p.add(x(w.x),y(w.y));p.finish(),o.set(c,p)}),o});function Dm(e){return e instanceof Date?e.getTime():e}function vf(e,t){const{scale:a,data:s,reverse:r}=e;if(!ms(a)){const l=a.invert(t);if(s===void 0)return-1;const o=Dm(l);return s?.findIndex((d,u)=>{const f=Dm(d);return f>o&&(u===0||Math.abs(o-f)<=Math.abs(o-Dm(s[u-1])))||f<=o&&(u===s.length-1||Math.abs(Dm(l)-f)<Math.abs(Dm(l)-Dm(s[u+1])))})}const i=a.bandwidth()===0?Math.floor((t-Math.min(...a.range())+a.step()/2)/a.step()):Math.floor((t-Math.min(...a.range()))/a.step());return i<0||i>=s.length?-1:r?s.length-1-i:i}function K$(e,t,a,s){if(!ms(e)){if(s===null){const r=e.invert(a);return Number.isNaN(r)?null:r}return t[s]}return s===null||s<0||s>=t.length?null:t[s]}function hp(e,t){const a=e.createSVGPoint();return a.x=t.clientX,a.y=t.clientY,a.matrixTransform(e.getScreenCTM().inverse())}const Hhe=Object.is;function GG(e,t){if(e===t)return!0;if(!(e instanceof Object)||!(t instanceof Object))return!1;let a=0,s=0;for(const r in e)if(a+=1,!Hhe(e[r],t[r])||!(r in t))return!1;for(const r in t)s+=1;return a===s}const hx=({store:e})=>{const t=os(function(){e.set("interaction",Ve({},e.state.interaction,{pointer:null,item:null}))}),a=os(function(l){const o=e.state.interaction.item;if(!l){o!==null&&e.set("interaction",Ve({},e.state.interaction,{item:null}));return}o===null||Object.keys(l).some(c=>l[c]!==o[c])||e.set("interaction",Ve({},e.state.interaction,{item:null}))}),s=os(function(l,o){GG(e.state.interaction.item,l)||e.set("interaction",Ve({},e.state.interaction,{lastUpdate:o.interaction,item:l}))}),r=os(function(l){e.set("interaction",Ve({},e.state.interaction,{pointer:l,lastUpdate:l!==null?"pointer":e.state.interaction.lastUpdate}))});return{instance:{cleanInteraction:t,setItemInteraction:s,removeItemInteraction:a,setPointerCoordinate:r}}};hx.getInitialState=()=>({interaction:{item:null,pointer:null,lastUpdate:"pointer"}});hx.params={};const wN=e=>e.interaction,Ghe=wt(wN,e=>e!==void 0),WG=wt(wN,e=>e?.item??null),VG=wt(wN,e=>e?.pointer??null),gx=wt(VG,e=>e&&e.x),px=wt(VG,e=>e&&e.y),Whe=wt(WG,e=>e!==null),xx=wt(wN,e=>e?.lastUpdate),Vhe=new Set(["bar","line","scatter","pie"]);function qG(e){return Vhe.has(e)}function YG(e,t,a){const s=Object.keys(e),r=t!==void 0&&e[t]?s.indexOf(t):0,i=t!==void 0&&a!==void 0&&e[t]&&e[t].series[a]?e[t].seriesOrder.indexOf(a):-1,l=s.filter(qG);for(let u=0;u<l.length;u+=1){const f=(r+u)%l.length,p=e[l[f]],x=u===0?i+1:0;for(let y=x;y<p.seriesOrder.length;y+=1)if(p.series[p.seriesOrder[y]].data.length>0)return{type:l[f],seriesId:p.seriesOrder[y]}}const o=r,c=e[l[o]],d=i;for(let u=0;u<d;u+=1)if(c.series[c.seriesOrder[u]].data.length>0)return{type:l[o],seriesId:c.seriesOrder[u]};return null}function QG(e,t,a){const s=Object.keys(e),r=t!==void 0&&e[t]?s.indexOf(t):0,i=t!==void 0&&a!==void 0&&e[t]&&e[t].series[a]?e[t].seriesOrder.indexOf(a):1,l=s.filter(qG);for(let u=0;u<l.length;u+=1){const f=(l.length+r-u)%l.length,p=e[l[f]],x=u===0?i+1:p.seriesOrder.length;for(let y=1;y<x;y+=1){const w=(p.seriesOrder.length+i-y)%p.seriesOrder.length;if(p.series[p.seriesOrder[w]].data.length>0)return{type:l[f],seriesId:p.seriesOrder[w]}}}const o=r,c=e[l[o]],d=c.seriesOrder;for(let u=d.length-1;u>i;u-=1)if(c.series[c.seriesOrder[u]].data.length>0)return{type:l[o],seriesId:c.seriesOrder[u]};return null}function KG(e,t,a){if(t==="sankey")return!1;const s=e[t]?.series[a]?.data;return s&&s.length>0}function qhe(e){const t=da(e);let{type:a,seriesId:s}=e.keyboardNavigation.item??{};if(a===void 0||a==="sankey"||s===void 0||!KG(t,a,s)){const i=YG(t,a,s);if(i===null)return null;a=i.type,s=i.seriesId}const r=t[a].series[s].data.length;return{type:a,seriesId:s,dataIndex:((e.keyboardNavigation.item?.dataIndex??-1)+1)%r}}function Yhe(e){const t=da(e);let{type:a,seriesId:s}=e.keyboardNavigation.item??{};if(a===void 0||a==="sankey"||s===void 0||!KG(t,a,s)){const i=QG(t,a,s);if(i===null)return null;a=i.type,s=i.seriesId}const r=t[a].series[s].data.length;return{type:a,seriesId:s,dataIndex:(r+(e.keyboardNavigation.item?.dataIndex??1)-1)%r}}function Qhe(e){const t=da(e);let{type:a,seriesId:s}=e.keyboardNavigation.item??{};const r=YG(t,a,s);if(r===null)return null;a=r.type,s=r.seriesId;const i=t[a].series[s].data.length;return{type:a,seriesId:s,dataIndex:Math.min(i-1,e.keyboardNavigation.item?.dataIndex??0)}}function Khe(e){const t=da(e);let{type:a,seriesId:s}=e.keyboardNavigation.item??{};const r=QG(t,a,s);if(r===null)return null;a=r.type,s=r.seriesId;const i=t[a].series[s].data.length;return{type:a,seriesId:s,dataIndex:Math.min(i-1,e.keyboardNavigation.item?.dataIndex??0)}}const NN=({params:e,store:t,svgRef:a})=>{const s=os(function(){t.state.keyboardNavigation.item!==null&&t.set("keyboardNavigation",Ve({},t.state.keyboardNavigation,{item:null}))});return h.useEffect(()=>{const r=a.current;if(!r||!e.enableKeyboardNavigation)return;function i(l){let o=t.state.keyboardNavigation.item;switch(l.key){case"ArrowRight":o=qhe(t.state);break;case"ArrowLeft":o=Yhe(t.state);break;case"ArrowDown":{o=Khe(t.state);break}case"ArrowUp":{o=Qhe(t.state);break}}o!==t.state.keyboardNavigation.item&&(l.preventDefault(),t.update(Ve({},t.state.highlight&&{highlight:Ve({},t.state.highlight,{lastUpdate:"keyboard"})},t.state.interaction&&{interaction:Ve({},t.state.interaction,{lastUpdate:"keyboard"})},{keyboardNavigation:Ve({},t.state.keyboardNavigation,{item:o})})))}return r.addEventListener("keydown",i),r.addEventListener("blur",s),()=>{r.removeEventListener("keydown",i),r.removeEventListener("blur",s)}},[a,s,e.enableKeyboardNavigation,t]),Xa(()=>{t.state.keyboardNavigation.enableKeyboardNavigation!==e.enableKeyboardNavigation&&t.set("keyboardNavigation",Ve({},t.state.keyboardNavigation,{enableKeyboardNavigation:!!e.enableKeyboardNavigation}))},[t,e.enableKeyboardNavigation]),{}};NN.getInitialState=e=>({keyboardNavigation:{item:null,enableKeyboardNavigation:!!e.enableKeyboardNavigation}});NN.params={enableKeyboardNavigation:!0};const zu=e=>e.keyboardNavigation;wt(zu,(e,t)=>e?.item!=null&&e.item.type===t.seriesType&&e.item.seriesId===t.seriesId&&e.item.dataIndex===t.dataIndex);const Xhe=wt(zu,e=>e?.item!=null),jN=wt(zu,e=>e?.item?.type),CN=wt(zu,e=>e?.item?.seriesId),SN=wt(zu,e=>e?.item?.dataIndex),Zhe=wt(zu,e=>!!e?.enableKeyboardNavigation),XG=e=>(t,a,s,r,i)=>{if(t===void 0||a===void 0||s===void 0)return;const l=i[t]?.series[a];if(!l)return;let o=e==="x"?"xAxisId"in l&&l.xAxisId:"yAxisId"in l&&l.yAxisId;return(o===void 0||o===!1)&&(o=r.axisIds[0]),{axisId:o,dataIndex:s}},Jhe=wt(jN,CN,SN,Hs,da,XG("x")),ege=wt(jN,CN,SN,Gs,da,XG("y")),ZG=wt(zu,function(t){if(t?.item==null)return null;const{type:a,seriesId:s}=t.item;return a===void 0||s===void 0?null:t.item}),tge=wt(jN,CN,SN,function(t,a,s){return a!==void 0&&s!==void 0}),JG=wt(xx,WG,ZG,(e,t,a)=>e==="keyboard"?a:t??null),nge=wt(xx,Whe,tge,(e,t,a)=>e==="keyboard"?a:t),age=wt(JG,cr,$r,Hs,Gs,da,function(t,a,s,{axis:r,axisIds:i},{axis:l,axisIds:o},c,d="top"){if(!t)return null;const u=c[t.type]?.series[t.seriesId];if(u){const f={},p=mv(u)?u.xAxisId??i[0]:void 0,x=mv(u)?u.yAxisId??o[0]:void 0;return p!==void 0&&(f.x=r[p]),x!==void 0&&(f.y=l[x]),s[u.type].tooltipItemPositionGetter?.({series:c,drawingArea:a,axesConfig:f,identifier:t,placement:d})??null}return null});function lf(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;if(Array.isArray(e)){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;i+=1)if(!lf(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;const r=Array.from(e.entries());for(let i=0;i<r.length;i+=1)if(!t.has(r[i][0]))return!1;for(let i=0;i<r.length;i+=1){const l=r[i];if(!lf(l[1],t.get(l[0])))return!1}return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;const r=Array.from(e.entries());for(let i=0;i<r.length;i+=1)if(!t.has(r[i][0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;i+=1)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();const a=Object.keys(e),s=a.length;if(s!==Object.keys(t).length)return!1;for(let r=0;r<s;r+=1)if(!Object.prototype.hasOwnProperty.call(t,a[r]))return!1;for(let r=0;r<s;r+=1){const i=a[r];if(!lf(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function GE(e,t,a=t.axisIds[0]){return Array.isArray(a)?a.map(s=>vf(t.axis[s],e)):vf(t.axis[a],e)}const eW=(e,t,a)=>{if(e===null)return null;const s=GE(e,t,a);return s===-1?null:s},QL=wt(gx,Hs,eW),KL=wt(px,Gs,eW),sge=wt(gx,px,Hs,Gs,(e,t,a,s)=>[...e===null?[]:a.axisIds.map(r=>({axisId:r,dataIndex:GE(e,a,r)})),...t===null?[]:s.axisIds.map(r=>({axisId:r,dataIndex:GE(t,s,r)}))].filter(r=>r.dataIndex!==null&&r.dataIndex>=0));function tW(e,t,a,s=t.axisIds[0]){return Array.isArray(s)?s.map((r,i)=>{const l=t.axis[r];return K$(l.scale,l.data,e,a[i])}):K$(t.axis[s].scale,t.axis[s].data,e,a)}const rge=wt(gx,Hs,QL,(e,t,a,s)=>e===null||t.axisIds.length===0?null:tW(e,t,a,s)),ige=wt(px,Gs,KL,(e,t,a,s)=>e===null||t.axisIds.length===0?null:tW(e,t,a,s)),nW=[],aW=eN({memoizeOptions:{resultEqualityCheck:lf}})(gx,Hs,(e,t)=>e===null?nW:t.axisIds.filter(a=>t.axis[a].triggerTooltip).map(a=>({axisId:a,dataIndex:vf(t.axis[a],e)})).filter(({dataIndex:a})=>a>=0)),sW=eN({memoizeOptions:{resultEqualityCheck:lf}})(px,Gs,(e,t)=>e===null?nW:t.axisIds.filter(a=>t.axis[a].triggerTooltip).map(a=>({axisId:a,dataIndex:vf(t.axis[a],e)})).filter(({dataIndex:a})=>a>=0)),lge=wt(aW,sW,(e,t)=>e.length>0||t.length>0);function oge(e){return e.setPointerCoordinate!==void 0}const Hf=({params:e,store:t,seriesConfig:a,svgRef:s,instance:r})=>{const{xAxis:i,yAxis:l,dataset:o,onHighlightedAxisChange:c}=e,d=$t(t,cr),u=$t(t,da),f=$t(t,Ghe),{axis:p,axisIds:x}=$t(t,Hs),{axis:y,axisIds:w}=$t(t,Gs);U9({controlled:e.highlightedAxis}),Xa(()=>{e.highlightedAxis!==void 0&&t.set("controlledCartesianAxisHighlight",e.highlightedAxis)},[t,e.highlightedAxis]);const v=h.useRef(!0);h.useEffect(()=>{if(v.current){v.current=!1;return}t.set("cartesianAxis",{x:G9(i,o),y:W9(l,o)})},[a,d,i,l,o,t]);const C=x[0],N=w[0];Xde(t,sge,(T,k)=>{if(c&&!Object.is(T,k)){if(T.length!==k.length){c(k);return}T?.some(({axisId:_,dataIndex:E},A)=>k[A].axisId!==_||k[A].dataIndex!==E)&&c(k)}});const S=oge(r);return h.useEffect(()=>{const T=s.current;if(!f||!S||!T||e.disableAxisListener)return()=>{};const k=r.addInteractionListener("moveEnd",D=>{D.detail.activeGestures.pan||r.cleanInteraction()}),_=r.addInteractionListener("panEnd",D=>{D.detail.activeGestures.move||r.cleanInteraction()}),E=r.addInteractionListener("quickPressEnd",D=>{!D.detail.activeGestures.move&&!D.detail.activeGestures.pan&&r.cleanInteraction()}),A=D=>{const M=D.detail.srcEvent,W=D.detail.target,Z=hp(T,M);if(D.detail.srcEvent.buttons>=1&&W?.hasPointerCapture(D.detail.srcEvent.pointerId)&&!W?.closest("[data-charts-zoom-slider]")&&W?.releasePointerCapture(D.detail.srcEvent.pointerId),!r.isPointInside(Z.x,Z.y,W)){r.cleanInteraction?.();return}r.setPointerCoordinate(Z)},I=r.addInteractionListener("move",A),z=r.addInteractionListener("pan",A),F=r.addInteractionListener("quickPress",A);return()=>{I.cleanup(),k.cleanup(),z.cleanup(),_.cleanup(),F.cleanup(),E.cleanup()}},[s,t,p,C,y,N,r,e.disableAxisListener,f,S]),h.useEffect(()=>{const T=s.current,k=e.onAxisClick;if(T===null||!k)return()=>{};const _=r.addInteractionListener("tap",E=>{let A=null,I=!1;const z=hp(T,E.detail.srcEvent),F=vf(p[C],z.x);I=F!==-1,A=I?F:vf(y[N],z.y);const D=I?x[0]:w[0];if(A==null||A===-1)return;const M=(I?p:y)[D].data[A],W={};Object.keys(u).filter(Z=>["bar","line"].includes(Z)).forEach(Z=>{u[Z]?.seriesOrder.forEach(R=>{const Q=u[Z].series[R],Y=Q.xAxisId,oe=Q.yAxisId,re=I?Y:oe;(re===void 0||re===D)&&(W[R]=Q.data[A])})}),k(E.detail.srcEvent,{dataIndex:A,axisValue:M,seriesValues:W})});return()=>{_.cleanup()}},[e.onAxisClick,u,s,p,x,y,w,C,N,r]),{}};Hf.params={xAxis:!0,yAxis:!0,dataset:!0,onAxisClick:!0,disableAxisListener:!0,onHighlightedAxisChange:!0,highlightedAxis:!0};Hf.getDefaultizedParams=({params:e})=>Ve({},e,{colors:e.colors??$9,theme:e.theme??"light",defaultizedXAxis:G9(e.xAxis,e.dataset),defaultizedYAxis:W9(e.yAxis,e.dataset)});Hf.getInitialState=e=>Ve({cartesianAxis:{x:e.defaultizedXAxis,y:e.defaultizedYAxis}},e.highlightedAxis===void 0?{}:{controlledCartesianAxisHighlight:e.highlightedAxis});const Pl=e=>e.brush;wt(Pl,e=>e?.start);wt(Pl,e=>e?.current);const cge=wt(Pl,e=>e?.start?.x??null),dge=wt(Pl,e=>e?.start?.y??null),uge=wt(Pl,e=>e?.current?.x??null),mge=wt(Pl,e=>e?.current?.y??null);wt(cge,dge,uge,mge,(e,t,a,s)=>e===null||t===null||a===null||s===null?null:{start:{x:e,y:t},current:{x:a,y:s}});const fge=wt(da,e=>{let t=!1,a=!1;return e&&Object.entries(e).forEach(([s,r])=>{Object.values(r.series).some(i=>i.layout==="horizontal")&&(t=!0),s==="scatter"&&r.seriesOrder.length>0&&(a=!0)}),a?"xy":t?"y":"x"}),hge=wt(fx,function(t){let a=!1,s=!1;return Object.values(t).forEach(r=>{r.axisDirection==="y"&&(s=!0),r.axisDirection==="x"&&(a=!0)}),a&&s?"xy":s?"y":a?"x":null});wt(fge,hge,(e,t)=>t??e);const rW=wt(Pl,e=>e?.enabled||e?.isZoomBrushEnabled),iW=wt(rW,Pl,(e,t)=>e&&t?.start!==null&&t?.current!==null),_N=wt(Pl,iW,(e,t)=>t&&e?.preventHighlight),gge=wt(Pl,iW,(e,t)=>t&&e?.preventTooltip),yx=({store:e,svgRef:t,instance:a,params:s})=>{const r=$t(e,rW);Xa(()=>{e.set("brush",Ve({},e.state.brush,{enabled:s.brushConfig.enabled,preventTooltip:s.brushConfig.preventTooltip,preventHighlight:s.brushConfig.preventHighlight}))},[e,s.brushConfig.enabled,s.brushConfig.preventTooltip,s.brushConfig.preventHighlight]);const i=os(function(d){e.set("brush",Ve({},e.state.brush,{start:e.state.brush.start??d,current:d}))}),l=os(function(){e.set("brush",Ve({},e.state.brush,{start:null,current:null}))}),o=os(function(d){e.state.brush.isZoomBrushEnabled!==d&&e.set("brush",Ve({},e.state.brush,{isZoomBrushEnabled:d}))});return h.useEffect(()=>{const c=t.current;if(c===null||!r)return()=>{};const d=w=>{if(w.detail.target?.closest("[data-charts-zoom-slider]"))return;const v=hp(c,{clientX:w.detail.initialCentroid.x,clientY:w.detail.initialCentroid.y});i(v)},u=w=>{const v=hp(c,{clientX:w.detail.centroid.x,clientY:w.detail.centroid.y});i(v)},f=a.addInteractionListener("brushStart",d),p=a.addInteractionListener("brush",u),x=a.addInteractionListener("brushCancel",l),y=a.addInteractionListener("brushEnd",l);return()=>{f.cleanup(),p.cleanup(),y.cleanup(),x.cleanup()}},[t,a,e,l,i,r]),{instance:{setBrushCoordinates:i,clearBrush:l,setZoomBrushEnabled:o}}};yx.params={brushConfig:!0};yx.getDefaultizedParams=({params:e})=>Ve({},e,{brushConfig:{enabled:e?.brushConfig?.enabled??!1,preventTooltip:e?.brushConfig?.preventTooltip??!0,preventHighlight:e?.brushConfig?.preventHighlight??!0}});yx.getInitialState=e=>({brush:{enabled:e.brushConfig.enabled,isZoomBrushEnabled:!1,preventTooltip:e.brushConfig.preventTooltip,preventHighlight:e.brushConfig.preventHighlight,start:null,current:null}});const Gf=e=>e.controlledCartesianAxisHighlight,lW=(e,t,a,s)=>s?[]:a!==void 0?a.filter(r=>t.axis[r.axisId]!==void 0).map(r=>r):e===null?[]:[{axisId:t.axisIds[0],dataIndex:e}],oW=Aa(QL,Hs,Gf,_N,lW);Aa(KL,Gs,Gf,_N,lW);const cW=(e,t,a,s,r,i,l)=>{if(l)return[];if(s!==void 0)return s.map(u=>Ve({},u,{value:a.axis[u.axisId]?.data?.[u.dataIndex]})).filter(({value:u})=>u!==void 0);const o=t!==null&&{axisId:a.axisIds[0],dataIndex:e,value:t},c=r&&a.axis[r.axisId]?.data?.[r.dataIndex],d=r&&c!=null&&Ve({},r,{value:c});if(i==="pointer"){if(o)return[o];if(d)return[d]}if(i==="keyboard"){if(d)return[d];if(o)return[o]}return[]},pge=wt(QL,rge,Hs,Gf,Jhe,xx,_N,cW),xge=wt(KL,ige,Gs,Gf,ege,xx,_N,cW),dW=(e,t)=>e===void 0?[t.axis[t.axisIds[0]]]:e.map(s=>t.axis[s.axisId]??null).filter(s=>s!==null);wt(Gf,Hs,dW);wt(Gf,Gs,dW);function X$(e,t){return e.id!==void 0?e:Ve({id:t},e)}function Z$(e){return e.colorMap?Ve({},e,{colorScale:e.colorMap.type==="ordinal"&&e.data?bf(Ve({values:e.data},e.colorMap)):rf(e.colorMap.type==="continuous"?Ve({min:e.min,max:e.max},e.colorMap):e.colorMap)}):e}function uW(e,t){if(!e||e.length===0)return{axis:{},axisIds:[]};const a={},s=[];return e.forEach((r,i)=>{const l=r.dataKey,o=r.id??`defaultized-z-axis-${i}`;if(l===void 0||r.data!==void 0){a[o]=Z$(X$(r,o)),s.push(o);return}if(t===void 0)throw new Error("MUI X Charts: z-axis uses `dataKey` but no `dataset` is provided.");a[o]=Z$(X$(Ve({},r,{data:t.map(c=>c[l])}),o)),s.push(o)}),{axis:a,axisIds:s}}const bx=({params:e,store:t})=>{const{zAxis:a,dataset:s}=e,r=h.useRef(!0);return h.useEffect(()=>{if(r.current){r.current=!1;return}t.set("zAxis",uW(a,s))},[a,s,t]),{}};bx.params={zAxis:!0,dataset:!0};bx.getInitialState=e=>({zAxis:uW(e.zAxis,e.dataset)});const yge=e=>e,bge=wt(yge,e=>e.zAxis),vx=({store:e,params:t})=>{U9({controlled:t.highlightedItem}),Xa(()=>{e.state.highlight.item!==t.highlightedItem&&e.set("highlight",Ve({},e.state.highlight,{item:t.highlightedItem}))},[e,t.highlightedItem]);const a=os(()=>{t.onHighlightChange?.(null);const r=e.getSnapshot().highlight;r.item===null||r.isControlled||e.set("highlight",{item:null,lastUpdate:"pointer",isControlled:!1})}),s=os(r=>{const i=e.getSnapshot().highlight;i.isControlled||GG(i.item,r)||(t.onHighlightChange?.(r),e.set("highlight",{item:r,lastUpdate:"pointer",isControlled:!1}))});return{instance:{clearHighlight:a,setHighlight:s}}};vx.getInitialState=e=>({highlight:{item:e.highlightedItem,lastUpdate:"pointer",isControlled:e.highlightedItem!==void 0}});vx.params={highlightedItem:!0,onHighlightChange:!0};function fv(e){let t=1/0,a=-1/0;for(const s of e??[])s<t&&(t=s),s>a&&(a=s);return[t,a]}const J$=(e,t)=>t==="x"?{x:e,y:null}:{x:null,y:e},mW=e=>{const{axis:t,getFilters:a,isDefaultAxis:s}=e,r=a?.({currentAxisId:t.id,isDefaultAxis:s}),i=r?t.data?.filter((l,o)=>r({x:null,y:null},o)):t.data;return fv(i??[])},fW=e=>t=>{const{series:a,axis:s,getFilters:r,isDefaultAxis:i}=t;return Object.keys(a).filter(l=>{const o=e==="x"?a[l].xAxisId:a[l].yAxisId;return o===s.id||i&&o===void 0}).reduce((l,o)=>{const{stackedData:c}=a[o],d=r?.({currentAxisId:s.id,isDefaultAxis:i,seriesXAxisId:a[o].xAxisId,seriesYAxisId:a[o].yAxisId}),[u,f]=c?.reduce((p,x,y)=>d&&(!d(J$(x[0],e),y)||!d(J$(x[1],e),y))?p:[Math.min(...x,p[0]),Math.max(...x,p[1])],[1/0,-1/0])??[1/0,-1/0];return[Math.min(u,l[0]),Math.max(f,l[1])]},[1/0,-1/0])},vge=e=>Object.keys(e.series).some(a=>e.series[a].layout==="horizontal")?fW("x")(e):mW(e),wge=e=>Object.keys(e.series).some(a=>e.series[a].layout==="horizontal")?mW(e):fW("y")(e);function gn(e){return function(){return e}}const hW=Math.cos,hv=Math.sin,Wi=Math.sqrt,e6=1e-12,gv=Math.PI,iu=2*gv,WE=Math.PI,VE=2*WE,$d=1e-6,Nge=VE-$d;function gW(e){this._+=e[0];for(let t=1,a=e.length;t<a;++t)this._+=arguments[t]+e[t]}function jge(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return gW;const a=10**t;return function(s){this._+=s[0];for(let r=1,i=s.length;r<i;++r)this._+=Math.round(arguments[r]*a)/a+s[r]}}class Cge{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?gW:jge(t)}moveTo(t,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+a}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,a){this._append`L${this._x1=+t},${this._y1=+a}`}quadraticCurveTo(t,a,s,r){this._append`Q${+t},${+a},${this._x1=+s},${this._y1=+r}`}bezierCurveTo(t,a,s,r,i,l){this._append`C${+t},${+a},${+s},${+r},${this._x1=+i},${this._y1=+l}`}arcTo(t,a,s,r,i){if(t=+t,a=+a,s=+s,r=+r,i=+i,i<0)throw new Error(`negative radius: ${i}`);let l=this._x1,o=this._y1,c=s-t,d=r-a,u=l-t,f=o-a,p=u*u+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=a}`;else if(p>$d)if(!(Math.abs(f*c-d*u)>$d)||!i)this._append`L${this._x1=t},${this._y1=a}`;else{let x=s-l,y=r-o,w=c*c+d*d,v=x*x+y*y,C=Math.sqrt(w),N=Math.sqrt(p),S=i*Math.tan((WE-Math.acos((w+p-v)/(2*C*N)))/2),T=S/N,k=S/C;Math.abs(T-1)>$d&&this._append`L${t+T*u},${a+T*f}`,this._append`A${i},${i},0,0,${+(f*x>u*y)},${this._x1=t+k*c},${this._y1=a+k*d}`}}arc(t,a,s,r,i,l){if(t=+t,a=+a,s=+s,l=!!l,s<0)throw new Error(`negative radius: ${s}`);let o=s*Math.cos(r),c=s*Math.sin(r),d=t+o,u=a+c,f=1^l,p=l?r-i:i-r;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>$d||Math.abs(this._y1-u)>$d)&&this._append`L${d},${u}`,s&&(p<0&&(p=p%VE+VE),p>Nge?this._append`A${s},${s},0,1,${f},${t-o},${a-c}A${s},${s},0,1,${f},${this._x1=d},${this._y1=u}`:p>$d&&this._append`A${s},${s},0,${+(p>=WE)},${f},${this._x1=t+s*Math.cos(i)},${this._y1=a+s*Math.sin(i)}`)}rect(t,a,s,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+a}h${s=+s}v${+r}h${-s}Z`}toString(){return this._}}function XL(e){let t=3;return e.digits=function(a){if(!arguments.length)return t;if(a==null)t=null;else{const s=Math.floor(a);if(!(s>=0))throw new RangeError(`invalid digits: ${a}`);t=s}return e},()=>new Cge(t)}function AN(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function pW(e){this._context=e}pW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function wx(e){return new pW(e)}function xW(e){return e[0]}function yW(e){return e[1]}function ZL(e,t){var a=gn(!0),s=null,r=wx,i=null,l=XL(o);e=typeof e=="function"?e:e===void 0?xW:gn(e),t=typeof t=="function"?t:t===void 0?yW:gn(t);function o(c){var d,u=(c=AN(c)).length,f,p=!1,x;for(s==null&&(i=r(x=l())),d=0;d<=u;++d)!(d<u&&a(f=c[d],d,c))===p&&((p=!p)?i.lineStart():i.lineEnd()),p&&i.point(+e(f,d,c),+t(f,d,c));if(x)return i=null,x+""||null}return o.x=function(c){return arguments.length?(e=typeof c=="function"?c:gn(+c),o):e},o.y=function(c){return arguments.length?(t=typeof c=="function"?c:gn(+c),o):t},o.defined=function(c){return arguments.length?(a=typeof c=="function"?c:gn(!!c),o):a},o.curve=function(c){return arguments.length?(r=c,s!=null&&(i=r(s)),o):r},o.context=function(c){return arguments.length?(c==null?s=i=null:i=r(s=c),o):s},o}function Tg(e,t,a){var s=null,r=gn(!0),i=null,l=wx,o=null,c=XL(d);e=typeof e=="function"?e:e===void 0?xW:gn(+e),t=typeof t=="function"?t:gn(t===void 0?0:+t),a=typeof a=="function"?a:a===void 0?yW:gn(+a);function d(f){var p,x,y,w=(f=AN(f)).length,v,C=!1,N,S=new Array(w),T=new Array(w);for(i==null&&(o=l(N=c())),p=0;p<=w;++p){if(!(p<w&&r(v=f[p],p,f))===C)if(C=!C)x=p,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),y=p-1;y>=x;--y)o.point(S[y],T[y]);o.lineEnd(),o.areaEnd()}C&&(S[p]=+e(v,p,f),T[p]=+t(v,p,f),o.point(s?+s(v,p,f):S[p],a?+a(v,p,f):T[p]))}if(N)return o=null,N+""||null}function u(){return ZL().defined(r).curve(l).context(i)}return d.x=function(f){return arguments.length?(e=typeof f=="function"?f:gn(+f),s=null,d):e},d.x0=function(f){return arguments.length?(e=typeof f=="function"?f:gn(+f),d):e},d.x1=function(f){return arguments.length?(s=f==null?null:typeof f=="function"?f:gn(+f),d):s},d.y=function(f){return arguments.length?(t=typeof f=="function"?f:gn(+f),a=null,d):t},d.y0=function(f){return arguments.length?(t=typeof f=="function"?f:gn(+f),d):t},d.y1=function(f){return arguments.length?(a=f==null?null:typeof f=="function"?f:gn(+f),d):a},d.lineX0=d.lineY0=function(){return u().x(e).y(t)},d.lineY1=function(){return u().x(e).y(a)},d.lineX1=function(){return u().x(s).y(t)},d.defined=function(f){return arguments.length?(r=typeof f=="function"?f:gn(!!f),d):r},d.curve=function(f){return arguments.length?(l=f,i!=null&&(o=l(i)),d):l},d.context=function(f){return arguments.length?(f==null?i=o=null:o=l(i=f),d):i},d}function Sge(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function _ge(e){return e}function Age(){var e=_ge,t=Sge,a=null,s=gn(0),r=gn(iu),i=gn(0);function l(o){var c,d=(o=AN(o)).length,u,f,p=0,x=new Array(d),y=new Array(d),w=+s.apply(this,arguments),v=Math.min(iu,Math.max(-iu,r.apply(this,arguments)-w)),C,N=Math.min(Math.abs(v)/d,i.apply(this,arguments)),S=N*(v<0?-1:1),T;for(c=0;c<d;++c)(T=y[x[c]=c]=+e(o[c],c,o))>0&&(p+=T);for(t!=null?x.sort(function(k,_){return t(y[k],y[_])}):a!=null&&x.sort(function(k,_){return a(o[k],o[_])}),c=0,f=p?(v-d*S)/p:0;c<d;++c,w=C)u=x[c],T=y[u],C=w+(T>0?T*f:0)+S,y[u]={data:o[u],index:c,value:T,startAngle:w,endAngle:C,padAngle:N};return y}return l.value=function(o){return arguments.length?(e=typeof o=="function"?o:gn(+o),l):e},l.sortValues=function(o){return arguments.length?(t=o,a=null,l):t},l.sort=function(o){return arguments.length?(a=o,t=null,l):a},l.startAngle=function(o){return arguments.length?(s=typeof o=="function"?o:gn(+o),l):s},l.endAngle=function(o){return arguments.length?(r=typeof o=="function"?o:gn(+o),l):r},l.padAngle=function(o){return arguments.length?(i=typeof o=="function"?o:gn(+o),l):i},l}class bW{constructor(t,a){this._context=t,this._x=a}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,a){switch(t=+t,a=+a,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,a):this._context.moveTo(t,a);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,a,t,a):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+a)/2,t,this._y0,t,a);break}}this._x0=t,this._y0=a}}function vW(e){return new bW(e,!0)}function wW(e){return new bW(e,!1)}const EN={draw(e,t){const a=Wi(t/gv);e.moveTo(a,0),e.arc(0,0,a,0,iu)}},NW={draw(e,t){const a=Wi(t/5)/2;e.moveTo(-3*a,-a),e.lineTo(-a,-a),e.lineTo(-a,-3*a),e.lineTo(a,-3*a),e.lineTo(a,-a),e.lineTo(3*a,-a),e.lineTo(3*a,a),e.lineTo(a,a),e.lineTo(a,3*a),e.lineTo(-a,3*a),e.lineTo(-a,a),e.lineTo(-3*a,a),e.closePath()}},jW=Wi(1/3),Ege=jW*2,CW={draw(e,t){const a=Wi(t/Ege),s=a*jW;e.moveTo(0,-a),e.lineTo(s,0),e.lineTo(0,a),e.lineTo(-s,0),e.closePath()}},SW={draw(e,t){const a=Wi(t),s=-a/2;e.rect(s,s,a,a)}},Tge=.8908130915292852,_W=hv(gv/10)/hv(7*gv/10),kge=hv(iu/10)*_W,Lge=-hW(iu/10)*_W,AW={draw(e,t){const a=Wi(t*Tge),s=kge*a,r=Lge*a;e.moveTo(0,-a),e.lineTo(s,r);for(let i=1;i<5;++i){const l=iu*i/5,o=hW(l),c=hv(l);e.lineTo(c*a,-o*a),e.lineTo(o*s-c*r,c*s+o*r)}e.closePath()}},FS=Wi(3),EW={draw(e,t){const a=-Wi(t/(FS*3));e.moveTo(0,a*2),e.lineTo(-FS*a,-a),e.lineTo(FS*a,-a),e.closePath()}},Qr=-.5,Kr=Wi(3)/2,qE=1/Wi(12),Pge=(qE/2+1)*3,TW={draw(e,t){const a=Wi(t/Pge),s=a/2,r=a*qE,i=s,l=a*qE+a,o=-i,c=l;e.moveTo(s,r),e.lineTo(i,l),e.lineTo(o,c),e.lineTo(Qr*s-Kr*r,Kr*s+Qr*r),e.lineTo(Qr*i-Kr*l,Kr*i+Qr*l),e.lineTo(Qr*o-Kr*c,Kr*o+Qr*c),e.lineTo(Qr*s+Kr*r,Qr*r-Kr*s),e.lineTo(Qr*i+Kr*l,Qr*l-Kr*i),e.lineTo(Qr*o+Kr*c,Qr*c-Kr*o),e.closePath()}},kW=[EN,NW,CW,SW,AW,EW,TW];function JL(e,t){let a=null,s=XL(r);e=typeof e=="function"?e:gn(e||EN),t=typeof t=="function"?t:gn(t===void 0?64:+t);function r(){let i;if(a||(a=i=s()),e.apply(this,arguments).draw(a,+t.apply(this,arguments)),i)return a=null,i+""||null}return r.type=function(i){return arguments.length?(e=typeof i=="function"?i:gn(i),r):e},r.size=function(i){return arguments.length?(t=typeof i=="function"?i:gn(+i),r):t},r.context=function(i){return arguments.length?(a=i??null,r):a},r}function pv(){}function xv(e,t,a){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+a)/6)}function LW(e){this._context=e}LW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:xv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:xv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Dge(e){return new LW(e)}function PW(e){this._context=e}PW.prototype={areaStart:pv,areaEnd:pv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:xv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Oge(e){return new PW(e)}function DW(e){this._context=e}DW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var a=(this._x0+4*this._x1+e)/6,s=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(a,s):this._context.moveTo(a,s);break;case 3:this._point=4;default:xv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Mge(e){return new DW(e)}function t6(e,t,a){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-a),e._x2,e._y2)}function eP(e,t){this._context=e,this._k=(1-t)/6}eP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:t6(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:t6(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};(function e(t){function a(s){return new eP(s,t)}return a.tension=function(s){return e(+s)},a})(0);function Ige(e,t,a){var s=e._x1,r=e._y1,i=e._x2,l=e._y2;if(e._l01_a>e6){var o=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,c=3*e._l01_a*(e._l01_a+e._l12_a);s=(s*o-e._x0*e._l12_2a+e._x2*e._l01_2a)/c,r=(r*o-e._y0*e._l12_2a+e._y2*e._l01_2a)/c}if(e._l23_a>e6){var d=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);i=(i*d+e._x1*e._l23_2a-t*e._l12_2a)/u,l=(l*d+e._y1*e._l23_2a-a*e._l12_2a)/u}e._context.bezierCurveTo(s,r,i,l,e._x2,e._y2)}function OW(e,t){this._context=e,this._alpha=t}OW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var a=this._x2-e,s=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(a*a+s*s,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Ige(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const $ge=(function e(t){function a(s){return t?new OW(s,t):new eP(s,0)}return a.alpha=function(s){return e(+s)},a})(.5);function MW(e){this._context=e}MW.prototype={areaStart:pv,areaEnd:pv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Rge(e){return new MW(e)}function n6(e){return e<0?-1:1}function a6(e,t,a){var s=e._x1-e._x0,r=t-e._x1,i=(e._y1-e._y0)/(s||r<0&&-0),l=(a-e._y1)/(r||s<0&&-0),o=(i*r+l*s)/(s+r);return(n6(i)+n6(l))*Math.min(Math.abs(i),Math.abs(l),.5*Math.abs(o))||0}function s6(e,t){var a=e._x1-e._x0;return a?(3*(e._y1-e._y0)/a-t)/2:t}function US(e,t,a){var s=e._x0,r=e._y0,i=e._x1,l=e._y1,o=(i-s)/3;e._context.bezierCurveTo(s+o,r+o*t,i-o,l-o*a,i,l)}function yv(e){this._context=e}yv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:US(this,this._t0,s6(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var a=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,US(this,s6(this,a=a6(this,e,t)),a);break;default:US(this,this._t0,a=a6(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=a}}};function IW(e){this._context=new $W(e)}(IW.prototype=Object.create(yv.prototype)).point=function(e,t){yv.prototype.point.call(this,t,e)};function $W(e){this._context=e}$W.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,a,s,r,i){this._context.bezierCurveTo(t,e,s,a,i,r)}};function YE(e){return new yv(e)}function RW(e){return new IW(e)}function zW(e){this._context=e}zW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,a=e.length;if(a)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),a===2)this._context.lineTo(e[1],t[1]);else for(var s=r6(e),r=r6(t),i=0,l=1;l<a;++i,++l)this._context.bezierCurveTo(s[0][i],r[0][i],s[1][i],r[1][i],e[l],t[l]);(this._line||this._line!==0&&a===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function r6(e){var t,a=e.length-1,s,r=new Array(a),i=new Array(a),l=new Array(a);for(r[0]=0,i[0]=2,l[0]=e[0]+2*e[1],t=1;t<a-1;++t)r[t]=1,i[t]=4,l[t]=4*e[t]+2*e[t+1];for(r[a-1]=2,i[a-1]=7,l[a-1]=8*e[a-1]+e[a],t=1;t<a;++t)s=r[t]/i[t-1],i[t]-=s,l[t]-=s*l[t-1];for(r[a-1]=l[a-1]/i[a-1],t=a-2;t>=0;--t)r[t]=(l[t]-r[t+1])/i[t];for(i[a-1]=(e[a]+r[a-1])/2,t=0;t<a-1;++t)i[t]=2*e[t+1]-r[t+1];return[r,i]}function FW(e){return new zW(e)}function TN(e,t){this._context=e,this._t=t}TN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var a=this._x*(1-this._t)+e*this._t;this._context.lineTo(a,this._y),this._context.lineTo(a,t)}break}}this._x=e,this._y=t}};function UW(e){return new TN(e,.5)}function BW(e){return new TN(e,0)}function HW(e){return new TN(e,1)}function Kc(e,t){if((l=e.length)>1)for(var a=1,s,r,i=e[t[0]],l,o=i.length;a<l;++a)for(r=i,i=e[t[a]],s=0;s<o;++s)i[s][1]+=i[s][0]=isNaN(r[s][1])?r[s][0]:r[s][1]}function bu(e){for(var t=e.length,a=new Array(t);--t>=0;)a[t]=t;return a}function zge(e,t){return e[t]}function Fge(e){const t=[];return t.key=e,t}function tP(){var e=gn([]),t=bu,a=Kc,s=zge;function r(i){var l=Array.from(e.apply(this,arguments),Fge),o,c=l.length,d=-1,u;for(const f of i)for(o=0,++d;o<c;++o)(l[o][d]=[0,+s(f,l[o].key,d,i)]).data=f;for(o=0,u=AN(t(l));o<c;++o)l[u[o]].index=o;return a(l,u),l}return r.keys=function(i){return arguments.length?(e=typeof i=="function"?i:gn(Array.from(i)),r):e},r.value=function(i){return arguments.length?(s=typeof i=="function"?i:gn(+i),r):s},r.order=function(i){return arguments.length?(t=i==null?bu:typeof i=="function"?i:gn(Array.from(i)),r):t},r.offset=function(i){return arguments.length?(a=i??Kc,r):a},r}function GW(e,t){if((s=e.length)>0){for(var a,s,r=0,i=e[0].length,l;r<i;++r){for(l=a=0;a<s;++a)l+=e[a][r][1]||0;if(l)for(a=0;a<s;++a)e[a][r][1]/=l}Kc(e,t)}}function Uge(e,t){if((c=e.length)>0)for(var a,s=0,r,i,l,o,c,d=e[t[0]].length;s<d;++s)for(l=o=0,a=0;a<c;++a)(i=(r=e[t[a]][s])[1]-r[0])>0?(r[0]=l,r[1]=l+=i):i<0?(r[1]=o,r[0]=o+=i):(r[0]=0,r[1]=i)}function WW(e,t){if((r=e.length)>0){for(var a=0,s=e[t[0]],r,i=s.length;a<i;++a){for(var l=0,o=0;l<r;++l)o+=e[l][a][1]||0;s[a][1]+=s[a][0]=-o/2}Kc(e,t)}}function VW(e,t){if(!(!((l=e.length)>0)||!((i=(r=e[t[0]]).length)>0))){for(var a=0,s=1,r,i,l;s<i;++s){for(var o=0,c=0,d=0;o<l;++o){for(var u=e[t[o]],f=u[s][1]||0,p=u[s-1][1]||0,x=(f-p)/2,y=0;y<o;++y){var w=e[t[y]],v=w[s][1]||0,C=w[s-1][1]||0;x+=v-C}c+=f,d+=x*f}r[s-1][1]+=r[s-1][0]=a,c&&(a-=d/c)}r[s-1][1]+=r[s-1][0]=a,Kc(e,t)}}function qW(e){var t=e.map(Bge);return bu(e).sort(function(a,s){return t[a]-t[s]})}function Bge(e){for(var t=-1,a=0,s=e.length,r,i=-1/0;++t<s;)(r=+e[t][1])>i&&(i=r,a=t);return a}function YW(e){var t=e.map(QW);return bu(e).sort(function(a,s){return t[a]-t[s]})}function QW(e){for(var t=0,a=-1,s=e.length,r;++a<s;)(r=+e[a][1])&&(t+=r);return t}function Hge(e){return YW(e).reverse()}function Gge(e){var t=e.length,a,s,r=e.map(QW),i=qW(e),l=0,o=0,c=[],d=[];for(a=0;a<t;++a)s=i[a],l<o?(l+=r[s],c.push(s)):(o+=r[s],d.push(s));return d.reverse().concat(c)}function Wge(e){return bu(e).reverse()}const BS={appearance:qW,ascending:YW,descending:Hge,insideOut:Gge,none:bu,reverse:Wge},HS={expand:GW,diverging:Uge,none:Kc,silhouette:WW,wiggle:VW},KW=e=>{const{series:t,seriesOrder:a,defaultStrategy:s}=e,r=[],i={};return a.forEach(l=>{const{stack:o,stackOrder:c,stackOffset:d}=t[l];o===void 0?r.push({ids:[l],stackingOrder:BS.none,stackingOffset:HS.none}):i[o]===void 0?(i[o]=r.length,r.push({ids:[l],stackingOrder:BS[c??s?.stackOrder??"none"],stackingOffset:HS[d??s?.stackOffset??"diverging"]})):(r[i[o]].ids.push(l),c!==void 0&&(r[i[o]].stackingOrder=BS[c]),d!==void 0&&(r[i[o]].stackingOffset=HS[d]))}),r},Vge=e=>e==null?"":e.toLocaleString(),qge=(e,t)=>{const{seriesOrder:a,series:s}=e,r=KW(e),i=t??[];a.forEach(o=>{const c=s[o].data;if(c!==void 0)c.forEach((d,u)=>{i.length<=u?i.push({[o]:d}):i[u][o]=d});else if(t===void 0)throw new Error([`MUI X Charts: bar series with id='${o}' has no data.`,"Either provide a data property to the series or use the dataset prop."].join(`
`))});const l={};return r.forEach(o=>{const{ids:c,stackingOffset:d,stackingOrder:u}=o,f=tP().keys(c.map(p=>{const x=s[p].dataKey;return s[p].data===void 0&&x!==void 0?x:p})).value((p,x)=>p[x]??0).order(u).offset(d)(i);c.forEach((p,x)=>{const y=s[p].dataKey;l[p]=Ve({layout:"vertical",labelMarkType:"square",minBarSize:0,valueFormatter:s[p].valueFormatter??Vge},s[p],{data:y?t.map(w=>{const v=w[y];return typeof v=="number"?v:null}):s[p].data,stackedData:f[x].map(([w,v])=>[w,v])})})}),{seriesOrder:a,stackingGroups:r,series:l}};function zi(e,t){return typeof e=="function"?e(t):e}const Yge=e=>{const{seriesOrder:t,series:a}=e;return t.reduce((s,r)=>{const i=zi(a[r].label,"legend");return i===void 0||s.push({markType:a[r].labelMarkType,id:r,seriesId:r,color:a[r].color,label:i}),s},[])};function nP(e){return e.colorGetter?e.colorGetter:()=>e.color}const Qge=(e,t,a)=>{const s=e.layout==="vertical",r=s?t?.colorScale:a?.colorScale,i=s?a?.colorScale:t?.colorScale,l=s?t?.data:a?.data,o=nP(e);return i?c=>{if(c===void 0)return e.color;const d=e.data[c],u=d===null?o({value:d,dataIndex:c}):i(d);return u===null?o({value:d,dataIndex:c}):u}:r&&l?c=>{if(c===void 0)return e.color;const d=l[c],u=d===null?o({value:d,dataIndex:c}):r(d);return u===null?o({value:d,dataIndex:c}):u}:c=>{if(c===void 0)return e.color;const d=e.data[c];return o({value:d,dataIndex:c})}},Kge=e=>{const{series:t,getColor:a,identifier:s}=e;if(!s||s.dataIndex===void 0)return null;const r=zi(t.label,"tooltip"),i=t.data[s.dataIndex];if(i==null)return null;const l=t.valueFormatter(i,{dataIndex:s.dataIndex});return{identifier:s,color:a(s.dataIndex),label:r,value:i,formattedValue:l,markType:t.labelMarkType}},Xge=e=>Object.values(e).map(t=>t.layout==="horizontal"?{direction:"y",axisId:t.yAxisId}:{direction:"x",axisId:t.xAxisId});function Gn(){const e=Rr();if(!e)throw new Error(["MUI X Charts: Could not find the charts context.","It looks like you rendered your component outside of a ChartContainer parent component."].join(`
`));return e.store}function vi(){const e=Gn();return $t(e,cr)}function kN(){const e=Gn();return $t(e,vue)}function aP(e){return TG.getTypes().has(e)}const Zge=(e,t,a,s,r,i,l)=>{const o=s==="rotation"?r[t].rotationExtremumGetter:r[t].radiusExtremumGetter,c=l[t]?.series??{},[d,u]=o?.({series:c,axis:a,axisIndex:i,isDefaultAxis:i===0})??[1/0,-1/0],[f,p]=e;return[Math.min(d,f),Math.max(u,p)]},Jge=(e,t,a,s,r)=>{const l=Object.keys(a).filter(aP).reduce((o,c)=>Zge(o,c,e,t,a,s,r),[1/0,-1/0]);return Number.isNaN(l[0])||Number.isNaN(l[1])?[1/0,-1/0]:l},$c=(e,t)=>e===void 0?t:Math.PI*e/180,epe=(e,t,a,s)=>{const r=new Set;return Object.keys(t).filter(aP).forEach(l=>{const o=a[l]?.series??{},c=t[l].axisTooltipGetter?.(o);c!==void 0&&c.forEach(({axisId:d,direction:u})=>{u===e&&r.add(d??s)})}),r};function tpe(e,t,a){if(t==="rotation"){if(a.scaleType==="point"){const s=[$c(a.startAngle,0),$c(a.endAngle,2*Math.PI)],r=s[1]-s[0];return r>Math.PI*2-.1&&(s[1]-=r/a.data.length),s}return[$c(a.startAngle,0),$c(a.endAngle,2*Math.PI)]}return[0,Math.min(e.height,e.width)/2]}const npe=.2,ape=.1;function XW({drawingArea:e,formattedSeries:t,axis:a,seriesConfig:s,axisDirection:r}){if(a===void 0)return{axis:{},axisIds:[]};const i=epe(r,s,t,a[0].id),l={};return a.forEach((o,c)=>{const d=o,u=tpe(e,r,d),[f,p]=Jge(d,r,s,c,t),x=!d.ignoreTooltip&&i.has(d.id),y=d.data??[];if(Mu(d)){const I=d.categoryGapRatio??npe,z=d.barGapRatio??ape;if(l[d.id]=Ve({offset:0,categoryGapRatio:I,barGapRatio:z,triggerTooltip:x},d,{data:y,scale:pN(d.data,u).paddingInner(I).paddingOuter(I/2),tickNumber:d.data.length,colorScale:d.colorMap&&(d.colorMap.type==="ordinal"?bf(Ve({values:d.data},d.colorMap)):rf(d.colorMap))}),UE(d.data)){const F=BE(d.data,u,d.tickNumber);l[d.id].valueFormatter=d.valueFormatter??F}}if(Iu(d)&&(l[d.id]=Ve({offset:0,triggerTooltip:x},d,{data:y,scale:AG(d.data,u),tickNumber:d.data.length,colorScale:d.colorMap&&(d.colorMap.type==="ordinal"?bf(Ve({values:d.data},d.colorMap)):rf(d.colorMap))}),UE(d.data))){const I=BE(d.data,u,d.tickNumber);l[d.id].valueFormatter=d.valueFormatter??I}if(!Vue(d))return;const w=d.scaleType??"linear",v=d.domainLimit??"nice",C=[d.min??f,d.max??p];if(typeof v=="function"){const{min:I,max:z}=v(f,p);C[0]=I,C[1]=z}const N=SG(d,C,WL(Math.abs(u[1]-u[0]))),S=_G(N,u),T=xN(w,C,u),k=v==="nice"?T.nice(N):T,[_,E]=k.domain(),A=[d.min??_,d.max??E];l[d.id]=Ve({offset:0,triggerTooltip:x},d,{data:y,scaleType:w,scale:k.domain(A),tickNumber:S,colorScale:d.colorMap&&rf(d.colorMap)})}),{axis:l,axisIds:a.map(({id:o})=>o)}}const ZW=e=>e.polarAxis,JW=wt(ZW,e=>e?.rotation),spe=wt(ZW,e=>e?.radius),Fu=wt(JW,cr,da,$r,(e,t,a,s)=>XW({drawingArea:t,formattedSeries:a,axis:e,seriesConfig:s,axisDirection:"rotation"}));wt(spe,cr,da,$r,(e,t,a,s)=>XW({drawingArea:t,formattedSeries:a,axis:e,seriesConfig:s,axisDirection:"radius"}));const rpe=wt(cr,e=>({cx:e.left+e.width/2,cy:e.top+e.height/2})),ipe=e=>(t,a)=>Math.atan2(t-e.cx,e.cy-a);function LN(e){return(e%360+360)%360}const GS=2*Math.PI;function lpe(e){return(e%GS+GS)%GS}function i6(e,t){const{scale:a,data:s,reverse:r}=e;if(!ms(a))throw new Error("MUI X Charts: getAxisValue is not implemented for polare continuous axes.");if(!s)return-1;const i=lpe(t-Math.min(...a.range())),l=a.bandwidth()===0?Math.floor((i+a.step()/2)/a.step())%s.length:Math.floor(i/a.step());return l<0||l>=s.length?-1:r?s.length-1-l:l}function dr(){const e=Gn(),{axis:t,axisIds:a}=$t(e,Hs);return{xAxis:t,xAxisIds:a}}function ur(){const e=Gn(),{axis:t,axisIds:a}=$t(e,Gs);return{yAxis:t,yAxisIds:a}}function ope(e){const t=Gn(),{axis:a,axisIds:s}=$t(t,Hs),r=s[0];return a[r]}function cpe(e){const t=Gn(),{axis:a,axisIds:s}=$t(t,Gs),r=s[0];return a[r]}function eV(){const e=Gn(),{axis:t,axisIds:a}=$t(e,Fu);return{rotationAxis:t,rotationAxisIds:a}}function dpe(e){const t=Gn(),{axis:a,axisIds:s}=$t(t,Fu),r=s[0];return a[r]}function Wf(e){if(ms(e))return a=>(e(a)??0)+e.bandwidth()/2;const t=e.domain();return t[0]===t[1]?a=>a===t[0]?e(a):NaN:a=>e(a)}function sP(){const e=Gn(),{axis:t,axisIds:a}=$t(e,bge)??{axis:{},axisIds:[]};return{zAxis:t,zAxisIds:a}}function rP(){const e=Rr();if(!e)throw new Error(["MUI X Charts: Could not find the svg ref context.","It looks like you rendered your component outside of a ChartContainer parent component."].join(`
`));return e.svgRef}function PN(){const e=Gn();return $t(e,da)}const upe=wt(da,(e,t)=>e[t]);Aa(da,(e,t,a)=>{if(!a||Array.isArray(a)&&a.length===0)return e[t]?.seriesOrder?.map(r=>e[t]?.series[r])??[];if(!Array.isArray(a))return e[t]?.series?.[a];const s=[];for(const r of a){const i=e[t]?.series?.[r];i&&s.push(i)}return s});const mpe=e=>{const t=Gn();return $t(t,upe,e)};function Nx(){return mpe("line")}function fpe(){return!1}function tV(e,t){return!e||!t?fpe:function(s){return s?e.highlight==="series"?s.seriesId===t.seriesId:e.highlight==="item"?s.dataIndex===t.dataIndex&&s.seriesId===t.seriesId:!1:!1}}function hpe(){return!1}function nV(e,t){return!e||!t?hpe:function(s){return s?e.fade==="series"?s.seriesId===t.seriesId&&s.dataIndex!==t.dataIndex:e.fade==="global"?s.seriesId!==t.seriesId||s.dataIndex!==t.dataIndex:!1:!1}}function iP(e,t,a){return e?.highlight==="series"&&t?.seriesId===a}function gpe(e,t,a){return iP(e,t,a)?!1:e?.fade==="global"&&t!=null||e?.fade==="series"&&t?.seriesId===a}function aV(e,t,a){return e?.highlight==="item"&&t?.seriesId===a?t.dataIndex:null}function ppe(e,t,a){return iP(e,t,a)||aV(e,t,a)===t?.dataIndex?null:(e?.fade==="series"||e?.fade==="global")&&t?.seriesId===a?t.dataIndex:null}const xpe=e=>e.highlight,ype=wt(da,e=>{const t=new Map;return Object.keys(e).forEach(a=>{const s=e[a];s?.seriesOrder?.forEach(r=>{const i=s?.series[r];t.set(r,i?.highlightScope)})}),t}),Ho=Aa(xpe,ZG,function(t,a){return t.isControlled||t.lastUpdate==="pointer"?t.item:a}),cd=wt(ype,Ho,function(t,a){if(!a)return null;const s=t.get(a.seriesId);return s===void 0?null:s}),bpe=wt(cd,Ho,tV),vpe=wt(cd,Ho,nV),wpe=wt(cd,Ho,function(t,a,s){return tV(t,a)(s)});wt(cd,Ho,iP);wt(cd,Ho,gpe);wt(cd,Ho,ppe);wt(cd,Ho,aV);const Npe=wt(cd,Ho,function(t,a,s){return nV(t,a)(s)});function sV(e){const t=Gn(),a=$t(t,wpe,e),s=$t(t,Npe,e);return{isHighlighted:a,isFaded:!a&&s}}function jpe(){const e=Gn(),t=$t(e,bpe),a=$t(e,vpe);return{isHighlighted:t,isFaded:a}}function Cpe(e,t){return Object.keys(e).flatMap(a=>{const s=t[a].legendGetter;return s===void 0?[]:s(e[a])})}function Spe(){const e=PN(),t=Gn(),a=$t(t,$r);return{items:Cpe(e,a)}}function lP(){const e=kN();return h.useCallback(t=>`${e}-gradient-${t}`,[e])}function _pe(){const e=kN();return h.useCallback(t=>`${e}-gradient-${t}-object-bound`,[e])}var WS,l6;function Ape(){if(l6)return WS;l6=1;var e=4,t=.001,a=1e-7,s=10,r=11,i=1/(r-1),l=typeof Float32Array=="function";function o(w,v){return 1-3*v+3*w}function c(w,v){return 3*v-6*w}function d(w){return 3*w}function u(w,v,C){return((o(v,C)*w+c(v,C))*w+d(v))*w}function f(w,v,C){return 3*o(v,C)*w*w+2*c(v,C)*w+d(v)}function p(w,v,C,N,S){var T,k,_=0;do k=v+(C-v)/2,T=u(k,N,S)-w,T>0?C=k:v=k;while(Math.abs(T)>a&&++_<s);return k}function x(w,v,C,N){for(var S=0;S<e;++S){var T=f(v,C,N);if(T===0)return v;var k=u(v,C,N)-w;v-=k/T}return v}function y(w){return w}return WS=function(v,C,N,S){if(!(0<=v&&v<=1&&0<=N&&N<=1))throw new Error("bezier x values must be in [0, 1] range");if(v===C&&N===S)return y;for(var T=l?new Float32Array(r):new Array(r),k=0;k<r;++k)T[k]=u(k*i,v,N);function _(E){for(var A=0,I=1,z=r-1;I!==z&&T[I]<=E;++I)A+=i;--I;var F=(E-T[I])/(T[I+1]-T[I]),D=A+F*i,M=f(D,v,N);return M>=t?x(E,D,v,N):M===0?D:p(E,A,A+i,v,N)}return function(A){return A===0?0:A===1?1:u(_(A),C,S)}},WS}var Epe=Ape();const Tpe=Hi(Epe),DN=300,oP="cubic-bezier(0.66, 0, 0.34, 1)",kpe=Tpe(.66,0,.34,1);var wf=0,kg=0,rg=0,rV=1e3,bv,Lg,vv=0,vu=0,ON=0,gp=typeof performance=="object"&&performance.now?performance:Date,iV=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function cP(){return vu||(iV(Lpe),vu=gp.now()+ON)}function Lpe(){vu=0}function wv(){this._call=this._time=this._next=null}wv.prototype=lV.prototype={constructor:wv,restart:function(e,t,a){if(typeof e!="function")throw new TypeError("callback is not a function");a=(a==null?cP():+a)+(t==null?0:+t),!this._next&&Lg!==this&&(Lg?Lg._next=this:bv=this,Lg=this),this._call=e,this._time=a,QE()},stop:function(){this._call&&(this._call=null,this._time=1/0,QE())}};function lV(e,t,a){var s=new wv;return s.restart(e,t,a),s}function Ppe(){cP(),++wf;for(var e=bv,t;e;)(t=vu-e._time)>=0&&e._call.call(void 0,t),e=e._next;--wf}function o6(){vu=(vv=gp.now())+ON,wf=kg=0;try{Ppe()}finally{wf=0,Ope(),vu=0}}function Dpe(){var e=gp.now(),t=e-vv;t>rV&&(ON-=t,vv=e)}function Ope(){for(var e,t=bv,a,s=1/0;t;)t._call?(s>t._time&&(s=t._time),e=t,t=t._next):(a=t._next,t._next=null,t=e?e._next=a:bv=a);Lg=e,QE(s)}function QE(e){if(!wf){kg&&(kg=clearTimeout(kg));var t=e-vu;t>24?(e<1/0&&(kg=setTimeout(o6,e-gp.now()-ON)),rg&&(rg=clearInterval(rg))):(rg||(vv=gp.now(),rg=setInterval(Dpe,rV)),wf=1,iV(o6))}}function Mpe(e,t,a){var s=new wv;return t=t==null?0:+t,s.restart(r=>{s.stop(),e(r+t)},t,a),s}class Ipe{elapsed=0;timer=null;constructor(t,a,s){this.duration=t,this.easingFn=a,this.onTickCallback=s,this.resume()}get running(){return this.timer!==null}timerCallback(t){this.elapsed=Math.min(t,this.duration);const a=this.duration===0?1:this.elapsed/this.duration,s=this.easingFn(a);this.onTickCallback(s),this.elapsed>=this.duration&&this.stop()}resume(){if(this.running||this.elapsed>=this.duration)return this;const t=cP()-this.elapsed;return this.timer=lV(a=>this.timerCallback(a),0,t),this}stop(){return this.running?(this.timer&&(this.timer.stop(),this.timer=null),this):this}finish(){return this.stop(),Mpe(()=>this.timerCallback(this.duration)),this}}function $pe(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;for(let r=0;r<a.length;r+=1){const i=a[r];if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(e[i],t[i]))return!1}return!0}function Rpe(e,{createInterpolator:t,applyProps:a,skip:s,initialProps:r=e}){const i=h.useRef(r),l=h.useRef(null),o=h.useRef(null),c=h.useRef(e);Xa(()=>{c.current=e},[e]),Xa(()=>{s&&(l.current?.finish(),l.current=null,o.current=null,i.current=e)},[e,s]);const d=h.useCallback(f=>{const p=i.current,x=t(p,e);l.current=new Ipe(DN,kpe,y=>{const w=x(y);i.current=w,a(f,w)})},[a,t,e]);return[h.useCallback(f=>{if(f===null){l.current?.stop();return}const p=o.current;if(p===f){if($pe(c.current,e)){l.current?.resume();return}l.current?.stop()}p&&l.current?.stop(),o.current=f,(l.current||!s)&&d(f)},[d,e,s]),i.current]}function oV(e,{createInterpolator:t,transformProps:a,applyProps:s,skip:r,initialProps:i=e,ref:l}){const o=a??(f=>f),[c,d]=Rpe(e,{initialProps:i,createInterpolator:t,applyProps:(f,p)=>s(f,o(p)),skip:r}),u=a(r?e:d);return Ve({},u,{ref:Cl(c,l)})}function zpe(e){return oV({d:e.d},{createInterpolator:(t,a)=>{const s=jL(t.d,a.d);return r=>({d:s(r)})},applyProps:(t,{d:a})=>t.setAttribute("d",a),transformProps:t=>t,skip:e.skipAnimation,ref:e.ref})}function Fpe(e){return oV({d:e.d},{createInterpolator:(t,a)=>{const s=jL(t.d,a.d);return r=>({d:s(r)})},applyProps:(t,{d:a})=>t.setAttribute("d",a),skip:e.skipAnimation,transformProps:t=>t,ref:e.ref})}function Upe(){return Rr().chartRootRef}const Bpe={"image/png":"PNG","image/jpeg":"JPEG","image/webp":"WebP"},Hpe=e=>({components:{MuiChartsLocalizationProvider:{defaultProps:{localeText:Ve({},e)}}}}),cV={loading:"Loading data",noData:"No data to display",zoomIn:"Zoom in",zoomOut:"Zoom out",toolbarExport:"Export",toolbarExportPrint:"Print",toolbarExportImage:e=>`Export as ${Bpe[e]??e}`,chartTypeBar:"Bar",chartTypeColumn:"Column",chartTypeLine:"Line",chartTypeArea:"Area",chartTypePie:"Pie",chartPaletteLabel:"Color palette",chartPaletteNameRainbowSurge:"Rainbow Surge",chartPaletteNameBlueberryTwilight:"Blueberry Twilight",chartPaletteNameMangoFusion:"Mango Fusion",chartPaletteNameCheerfulFiesta:"Cheerful Fiesta",chartPaletteNameStrawberrySky:"Strawberry Sky",chartPaletteNameBlue:"Blue",chartPaletteNameGreen:"Green",chartPaletteNamePurple:"Purple",chartPaletteNameRed:"Red",chartPaletteNameOrange:"Orange",chartPaletteNameYellow:"Yellow",chartPaletteNameCyan:"Cyan",chartPaletteNamePink:"Pink",chartConfigurationSectionChart:"Chart",chartConfigurationSectionColumns:"Columns",chartConfigurationSectionBars:"Bars",chartConfigurationSectionAxes:"Axes",chartConfigurationGrid:"Grid",chartConfigurationBorderRadius:"Border radius",chartConfigurationCategoryGapRatio:"Category gap ratio",chartConfigurationBarGapRatio:"Series gap ratio",chartConfigurationStacked:"Stacked",chartConfigurationShowToolbar:"Show toolbar",chartConfigurationSkipAnimation:"Skip animation",chartConfigurationInnerRadius:"Inner radius",chartConfigurationOuterRadius:"Outer radius",chartConfigurationColors:"Colors",chartConfigurationHideLegend:"Hide legend",chartConfigurationShowMark:"Show mark",chartConfigurationHeight:"Height",chartConfigurationWidth:"Width",chartConfigurationSeriesGap:"Series gap",chartConfigurationTickPlacement:"Tick placement",chartConfigurationTickLabelPlacement:"Tick label placement",chartConfigurationCategoriesAxisLabel:"Categories axis label",chartConfigurationSeriesAxisLabel:"Series axis label",chartConfigurationXAxisPosition:"X-axis position",chartConfigurationYAxisPosition:"Y-axis position",chartConfigurationSeriesAxisReverse:"Reverse series axis",chartConfigurationTooltipPlacement:"Placement",chartConfigurationTooltipTrigger:"Trigger",chartConfigurationLegendPosition:"Position",chartConfigurationLegendDirection:"Direction",chartConfigurationBarLabels:"Bar labels",chartConfigurationColumnLabels:"Column labels",chartConfigurationInterpolation:"Interpolation",chartConfigurationSectionTooltip:"Tooltip",chartConfigurationSectionLegend:"Legend",chartConfigurationSectionLines:"Lines",chartConfigurationSectionAreas:"Areas",chartConfigurationSectionArcs:"Arcs",chartConfigurationPaddingAngle:"Padding angle",chartConfigurationCornerRadius:"Corner radius",chartConfigurationArcLabels:"Arc labels",chartConfigurationStartAngle:"Start angle",chartConfigurationEndAngle:"End angle",chartConfigurationPieTooltipTrigger:"Trigger",chartConfigurationPieLegendPosition:"Position",chartConfigurationPieLegendDirection:"Direction",chartConfigurationOptionNone:"None",chartConfigurationOptionValue:"Value",chartConfigurationOptionAuto:"Auto",chartConfigurationOptionTop:"Top",chartConfigurationOptionTopLeft:"Top Left",chartConfigurationOptionTopRight:"Top Right",chartConfigurationOptionBottom:"Bottom",chartConfigurationOptionBottomLeft:"Bottom Left",chartConfigurationOptionBottomRight:"Bottom Right",chartConfigurationOptionLeft:"Left",chartConfigurationOptionRight:"Right",chartConfigurationOptionAxis:"Axis",chartConfigurationOptionItem:"Item",chartConfigurationOptionHorizontal:"Horizontal",chartConfigurationOptionVertical:"Vertical",chartConfigurationOptionBoth:"Both",chartConfigurationOptionStart:"Start",chartConfigurationOptionMiddle:"Middle",chartConfigurationOptionEnd:"End",chartConfigurationOptionExtremities:"Extremities",chartConfigurationOptionTick:"Tick",chartConfigurationOptionMonotoneX:"Monotone X",chartConfigurationOptionMonotoneY:"Monotone Y",chartConfigurationOptionCatmullRom:"Catmull-Rom",chartConfigurationOptionLinear:"Linear",chartConfigurationOptionNatural:"Natural",chartConfigurationOptionStep:"Step",chartConfigurationOptionStepBefore:"Step Before",chartConfigurationOptionStepAfter:"Step After",chartConfigurationOptionBumpX:"Bump X",chartConfigurationOptionBumpY:"Bump Y"},Gpe=cV;Hpe(cV);const Wpe=["localeText"],KE=h.createContext(null);function Vpe(e){const{localeText:t}=e,a=cn(e,Wpe),{localeText:s}=h.useContext(KE)??{localeText:void 0},r=yi({props:a,name:"MuiChartsLocalizationProvider"}),{children:i,localeText:l}=r,o=h.useMemo(()=>Ve({},Gpe,l,s,t),[l,s,t]),c=h.useMemo(()=>({localeText:o}),[o]);return n.jsx(KE.Provider,{value:c,children:i})}const dV=()=>{const e=h.useContext(KE);if(e===null)throw new Error(["MUI X Charts: Can not find the charts localization context.","It looks like you forgot to wrap your component in ChartsLocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-charts` package"].join(`
`));return e};function qpe({bandWidth:e,numberOfGroups:t,gapRatio:a}){if(a===0)return{barWidth:e/t,offset:0};const s=e/(t+(t-1)*a),r=a*s;return{barWidth:s,offset:r}}function Ype(e,t,a){const s=e&&t>0,r=!e&&t<0,i=s||r;return a?!i:i}function Qpe(e){const{verticalLayout:t,xAxisConfig:a,yAxisConfig:s,series:r,dataIndex:i,numberOfGroups:l,groupIndex:o}=e,c=t?a:s,d=(t?s.reverse:a.reverse)??!1,{barWidth:u,offset:f}=qpe({bandWidth:c.scale.bandwidth(),numberOfGroups:l,gapRatio:c.barGapRatio}),p=o*(u+f),x=a.scale,y=s.scale,w=c.data[i],v=r.data[i];if(v==null)return null;const N=r.stackedData[i].map(E=>t?y(E):x(E)),S=Math.round(Math.min(...N)),T=Math.round(Math.max(...N)),k=v===0?0:Math.max(r.minBarSize,T-S),_=Ype(t,v,d)?T-k:S;return{x:t?x(w)+p:_,y:t?_:y(w)+p,height:t?k:u,width:t?u:k}}const Kpe=e=>{const{series:t,identifier:a,axesConfig:s,placement:r}=e;if(!a||a.dataIndex===void 0)return null;const i=t.bar?.series[a.seriesId];if(t.bar==null||i==null||s.x===void 0||s.y===void 0)return null;const l=Qpe({verticalLayout:i.layout==="vertical",xAxisConfig:s.x,yAxisConfig:s.y,series:i,dataIndex:a.dataIndex,numberOfGroups:t.bar.stackingGroups.length,groupIndex:t.bar.stackingGroups.findIndex(f=>f.ids.includes(i.id))});if(l==null)return null;const{x:o,y:c,width:d,height:u}=l;switch(r){case"right":return{x:o+d,y:c+u/2};case"bottom":return{x:o+d/2,y:c+u};case"left":return{x:o,y:c+u/2};default:return{x:o+d/2,y:c}}},Xpe=(e,t,a)=>Ve({},e,{id:e.id??`auto-generated-id-${t}`,color:e.color??a[t%a.length]}),Zpe={seriesProcessor:qge,colorProcessor:Qge,legendGetter:Yge,tooltipGetter:Kge,tooltipItemPositionGetter:Kpe,axisTooltipGetter:Xge,xExtremumGetter:vge,yExtremumGetter:wge,getSeriesWithDefaultValues:Xpe},Jpe=e=>{const{series:t,axis:a,isDefaultAxis:s,getFilters:r}=e;let i=1/0,l=-1/0;for(const o in t){if(!Object.hasOwn(t,o))continue;const c=t[o].xAxisId;if(!(c===a.id||c===void 0&&s))continue;const d=r?.({currentAxisId:a.id,isDefaultAxis:s,seriesXAxisId:t[o].xAxisId,seriesYAxisId:t[o].yAxisId}),u=t[o].data??[];for(let f=0;f<u.length;f+=1){const p=u[f];d&&!d(p,f)||p.x!==null&&(p.x<i&&(i=p.x),p.x>l&&(l=p.x))}}return[i,l]},exe=e=>{const{series:t,axis:a,isDefaultAxis:s,getFilters:r}=e;let i=1/0,l=-1/0;for(const o in t){if(!Object.hasOwn(t,o))continue;const c=t[o].yAxisId;if(!(c===a.id||c===void 0&&s))continue;const d=r?.({currentAxisId:a.id,isDefaultAxis:s,seriesXAxisId:t[o].xAxisId,seriesYAxisId:t[o].yAxisId}),u=t[o].data??[];for(let f=0;f<u.length;f+=1){const p=u[f];d&&!d(p,f)||p.y!==null&&(p.y<i&&(i=p.y),p.y>l&&(l=p.y))}}return[i,l]},txe=({series:e,seriesOrder:t},a)=>({series:Object.fromEntries(Object.entries(e).map(([r,i])=>{const l=i?.datasetKeys,o=["x","y"].filter(d=>typeof l?.[d]!="string");if(i?.datasetKeys&&o.length>0)throw new Error([`MUI X Charts: scatter series with id='${r}' has incomplete datasetKeys.`,`Properties ${o.map(d=>`"${d}"`).join(", ")} are missing.`].join(`
`));const c=l?a?.map(d=>({x:d[l.x]??null,y:d[l.y]??null,z:l.z&&d[l.z],id:l.id&&d[l.id]}))??[]:i.data??[];return[r,Ve({labelMarkType:"circle",markerSize:4},i,{preview:Ve({markerSize:1},i?.preview),data:c,valueFormatter:i.valueFormatter??(d=>d&&`(${d.x}, ${d.y})`)})]})),seriesOrder:t}),nxe=(e,t,a,s)=>{const r=s?.colorScale,i=a?.colorScale,l=t?.colorScale,o=nP(e);return r?c=>{if(c===void 0)return e.color;if(s?.data?.[c]!==void 0){const f=r(s?.data?.[c]);if(f!==null)return f}const d=e.data[c],u=d===null?o({value:d,dataIndex:c}):r(d.z);return u===null?o({value:d,dataIndex:c}):u}:i?c=>{if(c===void 0)return e.color;const d=e.data[c],u=d===null?o({value:d,dataIndex:c}):i(d.y);return u===null?o({value:d,dataIndex:c}):u}:l?c=>{if(c===void 0)return e.color;const d=e.data[c],u=d===null?o({value:d,dataIndex:c}):l(d.x);return u===null?o({value:d,dataIndex:c}):u}:c=>{if(c===void 0)return e.color;const d=e.data[c];return o({value:d,dataIndex:c})}},axe=e=>{const{seriesOrder:t,series:a}=e;return t.reduce((s,r)=>{const i=zi(a[r].label,"legend");return i===void 0||s.push({markType:a[r].labelMarkType,id:r,seriesId:r,color:a[r].color,label:i}),s},[])},sxe=e=>{const{series:t,getColor:a,identifier:s}=e;if(!s||s.dataIndex===void 0)return null;const r=zi(t.label,"tooltip"),i=t.data[s.dataIndex],l=t.valueFormatter(i,{dataIndex:s.dataIndex});return{identifier:s,color:a(s.dataIndex),label:r,value:i,formattedValue:l,markType:t.labelMarkType}},rxe=(e,t,a)=>Ve({},e,{id:e.id??`auto-generated-id-${t}`,color:e.color??a[t%a.length]}),ixe=e=>{const{series:t,identifier:a,axesConfig:s}=e;if(!a||a.dataIndex===void 0)return null;const r=t.scatter?.series[a.seriesId];if(r==null||s.x===void 0||s.y===void 0)return null;const i=r.data?.[a.dataIndex].x,l=r.data?.[a.dataIndex].y;return i==null||l==null?null:{x:s.x.scale(i),y:s.y.scale(l)}},lxe={seriesProcessor:txe,colorProcessor:nxe,legendGetter:axe,tooltipGetter:sxe,tooltipItemPositionGetter:ixe,xExtremumGetter:Jpe,yExtremumGetter:exe,getSeriesWithDefaultValues:rxe},oxe=e=>{const{axis:t}=e;return fv(t.data??[])};function cxe(e,t,a,s){return a.reduce((r,i,l)=>{if(t[l]===null)return r;const[o,c]=e(i);return s&&(!s({y:o,x:null},l)||!s({y:c,x:null},l))?r:[Math.min(o,c,r[0]),Math.max(o,c,r[1])]},[1/0,-1/0])}const dxe=e=>{const{series:t,axis:a,isDefaultAxis:s,getFilters:r}=e;return Object.keys(t).filter(i=>{const l=t[i].yAxisId;return l===a.id||s&&l===void 0}).reduce((i,l)=>{const{area:o,stackedData:c,data:d}=t[l],u=o!==void 0,f=r?.({currentAxisId:a.id,isDefaultAxis:s,seriesXAxisId:t[l].xAxisId,seriesYAxisId:t[l].yAxisId}),p=u&&a.scaleType!=="log"&&typeof t[l].baseline!="string"?v=>v:v=>[v[1],v[1]],x=cxe(p,d,c,f),[y,w]=x;return[Math.min(y,i[0]),Math.max(w,i[1])]},[1/0,-1/0])};function uxe(e,t){const a={};return Object.keys(e).forEach(s=>{a[s]=Ve({},e[s],{valueFormatter:e[s].valueFormatter??t})}),a}const mxe=(e,t)=>{const{seriesOrder:a,series:s}=e,r=KW(Ve({},e,{defaultStrategy:{stackOffset:"none"}})),i=t??[];a.forEach(o=>{const c=s[o].data;c!==void 0&&c.forEach((d,u)=>{i.length<=u?i.push({[o]:d}):i[u][o]=d})});const l={};return r.forEach(o=>{const{ids:c,stackingOrder:d,stackingOffset:u}=o,f=tP().keys(c.map(p=>{const x=s[p].dataKey;return s[p].data===void 0&&x!==void 0?x:p})).value((p,x)=>p[x]??0).order(d).offset(u)(i);c.forEach((p,x)=>{const y=s[p].dataKey;l[p]=Ve({labelMarkType:"line"},s[p],{data:y?t.map(w=>{const v=w[y];return typeof v=="number"?v:null}):s[p].data,stackedData:f[x].map(([w,v])=>[w,v])})})}),{seriesOrder:a,stackingGroups:r,series:uxe(l,o=>o==null?"":o.toLocaleString())}},dP=(e,t,a)=>{const s=a?.colorScale,r=t?.colorScale,i=nP(e);return s?l=>{if(l===void 0)return e.color;const o=e.data[l],c=o===null?i({value:o,dataIndex:l}):s(o);return c===null?i({value:o,dataIndex:l}):c}:r?l=>{if(l===void 0)return e.color;const o=t.data?.[l],c=o===null?i({value:o,dataIndex:l}):r(o);return c===null?i({value:o,dataIndex:l}):c}:l=>{if(l===void 0)return e.color;const o=e.data[l];return i({value:o,dataIndex:l})}},fxe=e=>{const{seriesOrder:t,series:a}=e;return t.reduce((s,r)=>{const i=zi(a[r].label,"legend");return i===void 0||s.push({markType:a[r].labelMarkType,id:r,seriesId:r,color:a[r].color,label:i}),s},[])},hxe=e=>{const{series:t,getColor:a,identifier:s}=e;if(!s||s.dataIndex===void 0)return null;const r=zi(t.label,"tooltip"),i=t.data[s.dataIndex],l=t.valueFormatter(i,{dataIndex:s.dataIndex});return{identifier:s,color:a(s.dataIndex),label:r,value:i,formattedValue:l,markType:t.labelMarkType}},gxe=e=>Object.values(e).map(t=>({direction:"x",axisId:t.xAxisId})),pxe=(e,t,a)=>Ve({},e,{id:e.id??`auto-generated-id-${t}`,color:e.color??a[t%a.length]}),xxe=e=>{const{series:t,identifier:a,axesConfig:s}=e;if(!a||a.dataIndex===void 0)return null;const r=t.line?.series[a.seriesId];if(r==null||s.x===void 0||s.y===void 0)return null;const i=s.x.data?.[a.dataIndex],l=r.data[a.dataIndex];return i==null||l==null?null:{x:s.x.scale(i),y:s.y.scale(l)}},yxe={colorProcessor:dP,seriesProcessor:mxe,legendGetter:fxe,tooltipGetter:hxe,tooltipItemPositionGetter:xxe,axisTooltipGetter:gxe,xExtremumGetter:oxe,yExtremumGetter:dxe,getSeriesWithDefaultValues:pxe},bxe=(e="none")=>{if(typeof e=="function")return e;switch(e){case"none":return null;case"desc":return(t,a)=>a-t;case"asc":return(t,a)=>t-a;default:return null}},vxe=e=>{const{seriesOrder:t,series:a}=e,s={};return t.forEach(r=>{const i=Age().startAngle($c(a[r].startAngle??0)).endAngle($c(a[r].endAngle??360)).padAngle($c(a[r].paddingAngle??0)).sortValues(bxe(a[r].sortingValues??"none"))(a[r].data.map(l=>l.value));s[r]=Ve({labelMarkType:"circle",valueFormatter:l=>l.value.toLocaleString()},a[r],{data:a[r].data.map((l,o)=>Ve({},l,{id:l.id??`auto-generated-pie-id-${r}-${o}`},i[o])).map((l,o)=>Ve({labelMarkType:"circle"},l,{formattedValue:a[r].valueFormatter?.(Ve({},l,{label:zi(l.label,"arc")}),{dataIndex:o})??l.value.toLocaleString()}))})}),{seriesOrder:t,series:s}},wxe=e=>t=>e.data[t].color,Nxe=e=>{const{seriesOrder:t,series:a}=e;return t.reduce((s,r)=>(a[r].data.forEach((i,l)=>{const o=zi(i.label,"legend");o!==void 0&&s.push({markType:i.labelMarkType??a[r].labelMarkType,id:i.id??l,seriesId:r,color:i.color,label:o,itemId:i.id??l})}),s),[])},jxe=e=>{const{series:t,getColor:a,identifier:s}=e;if(!s||s.dataIndex===void 0)return null;const r=t.data[s.dataIndex];if(r==null)return null;const i=zi(r.label,"tooltip"),l=Ve({},r,{label:i}),o=t.valueFormatter(l,{dataIndex:s.dataIndex});return{identifier:s,color:a(s.dataIndex),label:i,value:l,formattedValue:o,markType:r.labelMarkType??t.labelMarkType}},Cxe=(e,t,a)=>Ve({},e,{id:e.id??`auto-generated-id-${t}`,data:e.data.map((s,r)=>Ve({},s,{color:s.color??a[r%a.length]}))});function Nv(e,t){if(typeof e=="number")return e;if(e==="100%")return t;if(e.endsWith("%")){const a=Number.parseFloat(e.slice(0,e.length-1));if(!Number.isNaN(a))return a*t/100}if(e.endsWith("px")){const a=Number.parseFloat(e.slice(0,e.length-2));if(!Number.isNaN(a))return a}throw new Error(`MUI X Charts: Received an unknown value "${e}". It should be a number, or a string with a percentage value.`)}function Sxe(e,t){const{height:a,width:s}=t,{cx:r,cy:i}=e,l=Math.min(s,a)/2,o=Nv(r??"50%",s),c=Nv(i??"50%",a);return{cx:o,cy:c,availableRadius:l}}const _xe=e=>{const{series:t,drawingArea:a,identifier:s,placement:r}=e;if(!s||s.dataIndex===void 0)return null;const i=t.pie?.series[s.seriesId];if(i==null)return null;const{cx:l,cy:o,availableRadius:c}=Sxe({cx:i.cx,cy:i.cy},a),{data:d,innerRadius:u=0,outerRadius:f}=i,p=Math.max(0,Nv(u??0,c)),x=Math.max(0,Nv(f??c,c)),y=d[s.dataIndex];if(!y)return null;const w=[[p,y.startAngle],[p,y.endAngle],[x,y.startAngle],[x,y.endAngle]].map(([T,k])=>({x:l+T*Math.sin(k),y:o-T*Math.cos(k)})),[v,C]=fv(w.map(T=>T.x)),[N,S]=fv(w.map(T=>T.y));switch(r){case"bottom":return{x:(C+v)/2,y:S};case"left":return{x:v,y:(S+N)/2};case"right":return{x:C,y:(S+N)/2};default:return{x:(C+v)/2,y:N}}},Axe={colorProcessor:wxe,seriesProcessor:vxe,legendGetter:Nxe,tooltipGetter:jxe,tooltipItemPositionGetter:_xe,getSeriesWithDefaultValues:Cxe},Exe={bar:Zpe,scatter:lxe,line:yxe,pie:Axe},Txe=[bx,hx,Hf,vx];function kxe(e){const{children:t,plugins:a=Txe,pluginParams:s={},seriesConfig:r=Exe}=e,{contextValue:i}=Fue(a,s,r);return n.jsx(F9.Provider,{value:i,children:t})}const Rr=()=>{const e=h.useContext(F9);if(e==null)throw new Error(["MUI X Charts: Could not find the Chart context.","It looks like you rendered your component outside of a ChartDataProvider.","This can also happen if you are bundling multiple versions of the library."].join(`
`));return e};function Lxe(e){"hasPointerCapture"in e.currentTarget&&e.currentTarget.hasPointerCapture(e.pointerId)&&e.currentTarget.releasePointerCapture(e.pointerId)}const MN=(e,t)=>{const{instance:a}=Rr(),s=h.useRef(!1),r=os(()=>{s.current=!0,a.setItemInteraction(e,{interaction:"pointer"}),a.setHighlight(e)}),i=os(()=>{s.current=!1,a.removeItemInteraction(e),a.clearHighlight()});return h.useEffect(()=>()=>{s.current&&i()},[i]),h.useMemo(()=>({onPointerEnter:r,onPointerLeave:i,onPointerDown:Lxe}),[t,r,i])};function uV(e){return e.replace(" ","_")}const mV=va("MuiAppearingMask",["animate"]),Pxe=an("rect")({animationName:"animate-width",animationTimingFunction:oP,animationDuration:"0s",[`&.${mV.animate}`]:{animationDuration:`${DN}ms`},"@keyframes animate-width":{from:{width:0}}});function fV(e){const t=vi(),a=kN(),s=uV(`${a}-${e.id}`);return n.jsxs(h.Fragment,{children:[n.jsx("clipPath",{id:s,children:n.jsx(Pxe,{className:e.skipAnimation?"":mV.animate,x:0,y:0,width:t.left+t.width+t.right,height:t.top+t.height+t.bottom})}),n.jsx("g",{clipPath:`url(#${s})`,children:e.children})]})}const Dxe=["skipAnimation","ownerState"];function Oxe(e){const{skipAnimation:t,ownerState:a}=e,s=cn(e,Dxe),r=zpe(e);return n.jsx(fV,{skipAnimation:t,id:`${a.id}-area-clip`,children:n.jsx("path",Ve({fill:a.gradientId?`url(#${a.gradientId})`:a.color,filter:a.isHighlighted?"brightness(140%)":a.gradientId?void 0:"brightness(120%)",opacity:a.isFaded?.3:1,stroke:"none","data-series":a.id,"data-highlighted":a.isHighlighted||void 0,"data-faded":a.isFaded||void 0},s,r))})}const Mxe=["id","classes","color","gradientId","slots","slotProps","onClick"];function Ixe(e){return Ra("MuiAreaElement",e)}const $xe=va("MuiAreaElement",["root","highlighted","faded","series"]),Rxe=e=>{const{classes:t,id:a,isFaded:s,isHighlighted:r}=e,i={root:["root",`series-${a}`,r&&"highlighted",s&&"faded"]};return $a(i,Ixe,t)};function zxe(e){const{id:t,classes:a,color:s,gradientId:r,slots:i,slotProps:l,onClick:o}=e,c=cn(e,Mxe),d=MN({type:"line",seriesId:t}),{isFaded:u,isHighlighted:f}=sV({seriesId:t}),p={id:t,classes:a,color:s,gradientId:r,isFaded:u,isHighlighted:f},x=Rxe(p),y=i?.area??Oxe,w=Co({elementType:y,externalSlotProps:l?.area,additionalProps:Ve({},d,{onClick:o,cursor:o?"pointer":"unset"}),className:x.root,ownerState:p});return n.jsx(y,Ve({},c,w))}function uP(e){const t=Gn(),a=$t(t,eue);return e||a}function mP(){const e=Gn();return $t(e,FG)}function hV(e){switch(e){case"catmullRom":return $ge.alpha(.5);case"linear":return wx;case"monotoneX":return YE;case"monotoneY":return RW;case"natural":return FW;case"step":return UW;case"stepBefore":return BW;case"stepAfter":return HW;case"bumpY":return wW;case"bumpX":return vW;default:return YE}}function Fxe(e,t){const a=Nx(),s=dr().xAxisIds[0],r=ur().yAxisIds[0],i=lP();return h.useMemo(()=>{if(a===void 0)return[];const{series:o,stackingGroups:c}=a,d=[];for(const u of c){const f=u.ids;for(let p=f.length-1;p>=0;p-=1){const x=f[p],{xAxisId:y=s,yAxisId:w=r,stackedData:v,data:C,connectNulls:N,baseline:S,curve:T,strictStepCurve:k,area:_}=o[x];if(!_||!(y in e)||!(w in t))continue;const E=e[y].scale,A=Wf(E),I=t[w].scale,z=e[y].data,F=t[w].colorScale&&i(w)||e[y].colorScale&&i(y)||void 0,D=T?.includes("step")&&!k&&ms(E),M=z?.flatMap((Q,Y)=>{const oe=C[Y]==null;if(D){const re=[{x:Q,y:v[Y],nullData:oe,isExtension:!1}];return!oe&&(Y===0||C[Y-1]==null)&&re.unshift({x:(E(Q)??0)-(E.step()-E.bandwidth())/2,y:v[Y],nullData:oe,isExtension:!0}),!oe&&(Y===C.length-1||C[Y+1]==null)&&re.push({x:(E(Q)??0)+(E.step()+E.bandwidth())/2,y:v[Y],nullData:oe,isExtension:!0}),re}return{x:Q,y:v[Y],nullData:oe}})??[],W=N?M.filter(Q=>!Q.nullData):M,R=Tg().x(Q=>Q.isExtension?Q.x:A(Q.x)).defined(Q=>N||!Q.nullData||!!Q.isExtension).y0(Q=>{if(typeof S=="number")return I(S);if(S==="max")return I.range()[1];if(S==="min")return I.range()[0];const Y=Q.y&&I(Q.y[0]);return Number.isNaN(Y)?I.range()[0]:Y}).y1(Q=>Q.y&&I(Q.y[1])).curve(hV(T))(W)||"";d.push({area:o[x].area,color:o[x].color,gradientId:F,d:R,seriesId:x})}}return d},[a,s,r,e,t,i])}const Uxe=["slots","slotProps","onItemClick","skipAnimation"],Bxe=an("g",{name:"MuiAreaPlot",slot:"Root"})({[`& .${$xe.root}`]:{transition:"opacity 0.2s ease-in, fill 0.2s ease-in"}}),Hxe=()=>{const{xAxis:e}=dr(),{yAxis:t}=ur();return Fxe(e,t)};function Gxe(e){const{slots:t,slotProps:a,onItemClick:s,skipAnimation:r}=e,i=cn(e,Uxe),l=mP(),o=uP(l||r),c=Hxe();return n.jsx(Bxe,Ve({},i,{children:c.map(({d,seriesId:u,color:f,area:p,gradientId:x})=>!!p&&n.jsx(zxe,{id:u,d,color:f,gradientId:x,slots:t,slotProps:a,onClick:s&&(y=>s(y,{type:"line",seriesId:u})),skipAnimation:o},u))}))}const Wxe=["skipAnimation","ownerState"],Vxe=h.forwardRef(function(t,a){const{skipAnimation:s,ownerState:r}=t,i=cn(t,Wxe),l=Fpe(Ve({},t,{ref:a}));return n.jsx(fV,{skipAnimation:s,id:`${r.id}-line-clip`,children:n.jsx("path",Ve({stroke:r.gradientId?`url(#${r.gradientId})`:r.color,strokeWidth:2,strokeLinejoin:"round",fill:"none",filter:r.isHighlighted?"brightness(120%)":void 0,opacity:r.isFaded?.3:1,"data-series":r.id,"data-highlighted":r.isHighlighted||void 0,"data-faded":r.isFaded||void 0},i,l))})}),qxe=["id","classes","color","gradientId","slots","slotProps","onClick"];function Yxe(e){return Ra("MuiLineElement",e)}const Qxe=va("MuiLineElement",["root","highlighted","faded","series"]),Kxe=e=>{const{classes:t,id:a,isFaded:s,isHighlighted:r}=e,i={root:["root",`series-${a}`,r&&"highlighted",s&&"faded"]};return $a(i,Yxe,t)};function Xxe(e){const{id:t,classes:a,color:s,gradientId:r,slots:i,slotProps:l,onClick:o}=e,c=cn(e,qxe),d=MN({type:"line",seriesId:t}),{isFaded:u,isHighlighted:f}=sV({seriesId:t}),p={id:t,classes:a,color:s,gradientId:r,isFaded:u,isHighlighted:f},x=Kxe(p),y=i?.line??Vxe,w=Co({elementType:y,externalSlotProps:l?.line,additionalProps:Ve({},d,{onClick:o,cursor:o?"pointer":"unset"}),className:x.root,ownerState:p});return n.jsx(y,Ve({},c,w))}function Zxe(e,t){const a=Nx(),s=dr().xAxisIds[0],r=ur().yAxisIds[0],i=lP();return h.useMemo(()=>{if(a===void 0)return[];const{series:o,stackingGroups:c}=a,d=[];for(const u of c){const f=u.ids;for(const p of f){const{xAxisId:x=s,yAxisId:y=r,stackedData:w,data:v,connectNulls:C,curve:N,strictStepCurve:S}=o[p];if(!(x in e)||!(y in t))continue;const T=e[x].scale,k=Wf(T),_=t[y].scale,E=e[x].data,A=t[y].colorScale&&i(y)||e[x].colorScale&&i(x)||void 0,I=N?.includes("step")&&!S&&ms(T),z=E?.flatMap((W,Z)=>{const R=v[Z]==null;if(I){const Q=[{x:W,y:w[Z],nullData:R,isExtension:!1}];return!R&&(Z===0||v[Z-1]==null)&&Q.unshift({x:(T(W)??0)-(T.step()-T.bandwidth())/2,y:w[Z],nullData:R,isExtension:!0}),!R&&(Z===v.length-1||v[Z+1]==null)&&Q.push({x:(T(W)??0)+(T.step()+T.bandwidth())/2,y:w[Z],nullData:R,isExtension:!0}),Q}return{x:W,y:w[Z],nullData:R}})??[],F=C?z.filter(W=>!W.nullData):z,M=ZL().x(W=>W.isExtension?W.x:k(W.x)).defined(W=>C||!W.nullData||!!W.isExtension).y(W=>_(W.y[1])).curve(hV(N))(F)||"";d.push({color:o[p].color,gradientId:A,d:M,seriesId:p})}}return d},[a,s,r,e,t,i])}const Jxe=["slots","slotProps","skipAnimation","onItemClick"],e0e=an("g",{name:"MuiAreaPlot",slot:"Root"})({[`& .${Qxe.root}`]:{transition:"opacity 0.2s ease-in, fill 0.2s ease-in"}}),t0e=()=>{const{xAxis:e}=dr(),{yAxis:t}=ur();return Zxe(e,t)};function n0e(e){const{slots:t,slotProps:a,skipAnimation:s,onItemClick:r}=e,i=cn(e,Jxe),l=mP(),o=uP(l||s),c=t0e();return n.jsx(e0e,Ve({},i,{children:c.map(({d,seriesId:u,color:f,gradientId:p})=>n.jsx(Xxe,{id:u,d,color:f,gradientId:p,skipAnimation:o,slots:t,slotProps:a,onClick:r&&(x=>r(x,{type:"line",seriesId:u}))},u))}))}function a0e(e){return Ra("MuiMarkElement",e)}const gV=va("MuiMarkElement",["root","highlighted","faded","animate","series"]),pV=e=>{const{classes:t,id:a,isFaded:s,isHighlighted:r,skipAnimation:i}=e,l={root:["root",`series-${a}`,r&&"highlighted",s&&"faded",i?void 0:"animate"]};return $a(l,a0e,t)},s0e=["x","y","id","classes","color","dataIndex","onClick","skipAnimation","isFaded","isHighlighted"],r0e=an("circle")({[`&.${gV.animate}`]:{transitionDuration:`${DN}ms`,transitionProperty:"cx, cy",transitionTimingFunction:oP}});function i0e(e){const{x:t,y:a,id:s,classes:r,color:i,dataIndex:l,onClick:o,skipAnimation:c,isFaded:d=!1,isHighlighted:u=!1}=e,f=cn(e,s0e),p=kl(),x=MN({type:"line",seriesId:s,dataIndex:l}),w=pV({id:s,classes:r,isHighlighted:u,isFaded:d,skipAnimation:c});return n.jsx(r0e,Ve({},f,{cx:t,cy:a,r:5,fill:(p.vars||p).palette.background.paper,stroke:i,strokeWidth:2,className:w.root,onClick:o,cursor:o?"pointer":"unset"},x,{"data-highlighted":u||void 0,"data-faded":d||void 0}))}function xV(e){switch(e){case"circle":return 0;case"cross":return 1;case"diamond":return 2;case"square":return 3;case"star":return 4;case"triangle":return 5;case"wye":return 6;default:return 0}}const l0e=["x","y","id","classes","color","shape","dataIndex","onClick","skipAnimation","isFaded","isHighlighted"],o0e=an("path",{name:"MuiMarkElement",slot:"Root"})(({ownerState:e,theme:t})=>({fill:(t.vars||t).palette.background.paper,stroke:e.color,strokeWidth:2,[`&.${gV.animate}`]:{transitionDuration:`${DN}ms`,transitionProperty:"transform, transform-origin",transitionTimingFunction:oP}}));function c0e(e){const{x:t,y:a,id:s,classes:r,color:i,shape:l,dataIndex:o,onClick:c,skipAnimation:d,isFaded:u=!1,isHighlighted:f=!1}=e,p=cn(e,l0e),x=MN({type:"line",seriesId:s,dataIndex:o}),y={id:s,classes:r,isHighlighted:f,isFaded:u,color:i,skipAnimation:d},w=pV(y);return n.jsx(o0e,Ve({},p,{style:{transform:`translate(${t}px, ${a}px)`,transformOrigin:`${t}px ${a}px`},ownerState:y,className:w.root,d:JL(kW[xV(l)])(),onClick:c,cursor:c?"pointer":"unset"},x,{"data-highlighted":f||void 0,"data-faded":u||void 0}))}const d0e=["slots","slotProps","skipAnimation","onItemClick"];function u0e(e){const{slots:t,slotProps:a,skipAnimation:s,onItemClick:r}=e,i=cn(e,d0e),l=mP(),o=uP(l||s),c=Nx(),{xAxis:d,xAxisIds:u}=dr(),{yAxis:f,yAxisIds:p}=ur(),x=kN(),{instance:y,store:w}=Rr(),{isFaded:v,isHighlighted:C}=jpe(),N=$t(w,oW),S=h.useMemo(()=>{const A={};for(const{dataIndex:I,axisId:z}of N)A[z]===void 0?A[z]=new Set([I]):A[z].add(I);return A},[N]);if(c===void 0)return null;const{series:T,stackingGroups:k}=c,_=u[0],E=p[0];return n.jsx("g",Ve({},i,{children:k.flatMap(({ids:A})=>A.map(I=>{const{xAxisId:z=_,yAxisId:F=E,stackedData:D,data:M,showMark:W=!0,shape:Z="circle"}=T[I];if(W===!1)return null;const R=Wf(d[z].scale),Q=f[F].scale,Y=d[z].data;if(Y===void 0)throw new Error(`MUI X Charts: ${z===aN?"The first `xAxis`":`The x-axis with id "${z}"`} should have data property to be able to display a line plot.`);const oe=uV(`${x}-${I}-line-clip`),re=dP(T[I],d[z],f[F]),ee=t?.mark??(Z==="circle"?i0e:c0e),H=C({seriesId:I}),ye=!H&&v({seriesId:I});return n.jsx("g",{clipPath:`url(#${oe})`,"data-series":I,children:Y?.map((te,ve)=>{const je=M[ve]==null?null:D[ve][1];return{x:R(te),y:je===null?null:Q(je),position:te,value:je,index:ve}}).filter(({x:te,y:ve,index:je,position:Oe,value:$e})=>$e===null||ve===null||!y.isPointInside(te,ve)?!1:W===!0?!0:W({x:te,y:ve,index:je,position:Oe,value:$e})).map(({x:te,y:ve,index:je})=>n.jsx(ee,Ve({id:I,dataIndex:je,shape:Z,color:re(je),x:te,y:ve,skipAnimation:o,onClick:r&&(Oe=>r(Oe,{type:"line",seriesId:I,dataIndex:je})),isHighlighted:S[z]?.has(je)||H,isFaded:ye},a?.mark),`${I}-${je}`))},I)}))}))}function IN(){const[e,t]=h.useState(typeof window<"u"||!1);return h.useEffect(()=>{t(!0)},[]),e}function fP(e){return typeof e=="number"&&!Number.isFinite(e)}const XE={start:0,extremities:0,end:1,middle:.5};function VS(e,t,a){return e(t)-(e.step()-e.bandwidth())/2+XE[a]*e.step()}function m0e(e){const{scale:t,tickNumber:a,valueFormatter:s,tickInterval:r,tickPlacement:i="extremities",tickLabelPlacement:l,isInside:o}=e;if(ms(t)){const p=t.domain(),x=l??"middle";if(t.bandwidth()>0){const w=typeof r=="function"&&p.filter(r)||typeof r=="object"&&r||p,v=t.range()[0]>t.range()[1],C=w.findIndex(S=>o(VS(t,S,v?"start":"end"))),N=w.findLastIndex(S=>o(VS(t,S,v?"end":"start")));return[...w.slice(C,N+1).map(S=>{const T=`${S}`;return{value:S,formattedValue:s?.(S,{location:"tick",scale:t,tickNumber:a,defaultTickLabel:T})??T,offset:VS(t,S,i),labelOffset:x==="tick"?0:t.step()*(XE[x]-XE[i])}}),...i==="extremities"&&N===p.length-1&&o(t.range()[1])?[{formattedValue:void 0,offset:t.range()[1],labelOffset:0}]:[]]}return(typeof r=="function"&&p.filter(r)||typeof r=="object"&&r||p).map(w=>{const v=`${w}`;return{value:w,formattedValue:s?.(w,{location:"tick",scale:t,tickNumber:a,defaultTickLabel:v})??v,offset:t(w),labelOffset:0}})}if(t.domain().some(fP))return[];const d=l,u=typeof r=="object"?r:f0e(t,a),f=[];for(let p=0;p<u.length;p+=1){const x=u[p],y=t(x);if(o(y)){const w=t.tickFormat(a)(x);f.push({value:x,formattedValue:s?.(x,{location:"tick",scale:t,tickNumber:a,defaultTickLabel:w})??w,offset:y,labelOffset:d==="middle"?t(u[p-1]??0)-(y+t(u[p-1]??0))/2:0})}}return f}function f0e(e,t){const a=e.domain();return a[0]===a[1]?[a[0]]:e.ticks(t)}function $N(e){const{scale:t,tickNumber:a,valueFormatter:s,tickInterval:r,tickPlacement:i="extremities",tickLabelPlacement:l,direction:o}=e,{instance:c}=Rr(),d=o==="x"?c.isXInside:c.isYInside;return h.useMemo(()=>m0e({scale:t,tickNumber:a,tickPlacement:i,tickInterval:r,tickLabelPlacement:l,valueFormatter:s,isInside:d}),[t,a,i,r,l,s,d])}function h0e(e=!1){const[t,a]=h.useState(!1);return Xa(()=>{e||a(!0)},[e]),h.useEffect(()=>{e&&a(!0)},[e]),t}const yV=typeof window<"u"&&"Intl"in window&&"Segmenter"in Intl?new Intl.Segmenter(void 0,{granularity:"grapheme"}):null;function g0e(e){return e.length}function p0e(e){const t=yV.segment(e);let a=0;for(const s of t)a+=1;return a}const x0e=yV?p0e:g0e;function y0e(e){return e*(Math.PI/180)}const bV=typeof window<"u"&&"Intl"in window&&"Segmenter"in Intl?new Intl.Segmenter(void 0,{granularity:"grapheme"}):null;function b0e(e,t){return e.slice(0,t)}function v0e(e,t){const a=bV.segment(e);let s="",r=0;for(const i of a)if(s+=i.segment,r+=1,r>=t)break;return s}const w0e=bV?v0e:b0e,c6="";function vV(e,t){const{width:a,height:s,measureText:r}=t,i=y0e(t.angle),l=r(e),o=Math.abs(l.width*Math.cos(i))+Math.abs(l.height*Math.sin(i)),c=Math.abs(l.width*Math.sin(i))+Math.abs(l.height*Math.cos(i));return o<=a&&c<=s}function wV(e,t){if(t(e))return e;let a=e,s=1,r=1/2;const i=x0e(e);let l=i,o=i,c=null;do{if(o=l,l=Math.floor(i*r),l===0)break;a=w0e(e,l).trim();const d=t(a+c6);s+=1,d?(c=a,r+=1/2**s):r-=1/2**s}while(Math.abs(l-o)!==1);return c?c+c6:""}function NV(){return typeof window>"u"}const Rc=new Map,jV=2e3,N0e=new Set(["minWidth","maxWidth","width","minHeight","maxHeight","height","top","left","fontSize","padding","margin","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom"]);function hP(e,t){return N0e.has(e)&&t===+t?`${t}px`:t}const j0e=/([A-Z])/g;function gP(e){return String(e).replace(j0e,t=>`-${t.toLowerCase()}`)}function CV(e){let t="";for(const a in e)if(Object.hasOwn(e,a)){const s=a,r=e[s];if(r===void 0)continue;t+=`${gP(s)}:${hP(s,r)};`}return t}const jx=(e,t={})=>{if(e==null||NV())return{width:0,height:0};const a=String(e),s=CV(t),r=`${a}-${s}`,i=Rc.get(r);if(i)return i;try{const l=_V(),o=document.createElementNS("http://www.w3.org/2000/svg","text");Object.keys(t).map(d=>(o.style[gP(d)]=hP(d,t[d]),d)),o.textContent=a,l.replaceChildren(o);const c=SV(o);return Rc.set(r,c),Rc.size+1>jV&&Rc.clear(),c}catch{return{width:0,height:0}}};function C0e(e,t={}){if(NV())return new Map(Array.from(e).map(c=>[c,{width:0,height:0}]));const a=new Map,s=[],r=CV(t);for(const c of e){const d=`${c}-${r}`,u=Rc.get(d);u?a.set(c,u):s.push(c)}const i=_V(),l=Ve({},t);Object.keys(l).map(c=>(i.style[gP(c)]=hP(c,l[c]),c));const o=[];for(const c of s){const d=document.createElementNS("http://www.w3.org/2000/svg","text");d.textContent=`${c}`,o.push(d)}i.replaceChildren(...o);for(let c=0;c<s.length;c+=1){const d=s[c],u=i.children[c],f=SV(u),p=`${d}-${r}`;Rc.set(p,f),a.set(d,f)}return Rc.size+1>jV&&Rc.clear(),a}function SV(e){try{const t=e.getBBox();return{width:t.width,height:t.height}}catch{const t=e.getBoundingClientRect();return{width:t.width,height:t.height}}}let Xs=null;function _V(){return Xs===null&&(Xs=document.createElementNS("http://www.w3.org/2000/svg","svg"),Xs.setAttribute("aria-hidden","true"),Xs.style.position="absolute",Xs.style.top="-20000px",Xs.style.left="0",Xs.style.padding="0",Xs.style.margin="0",Xs.style.border="none",Xs.style.pointerEvents="none",Xs.style.visibility="hidden",Xs.style.contain="strict",document.body.appendChild(Xs)),Xs}function S0e(e,t,a,s,r){const i=new Map,l=LN(r?.angle??0);let o=1,c=1;r?.textAnchor==="start"?(o=1/0,c=1):r?.textAnchor==="end"?(o=1,c=1/0):(o=2,c=2),l>90&&l<270&&([o,c]=[c,o]),s&&([o,c]=[c,o]);for(const d of e)if(d.formattedValue){const u=Math.min((d.offset+d.labelOffset)*o,(t.left+t.width+t.right-d.offset-d.labelOffset)*c),f=p=>vV(p,{width:u,height:a,angle:l,measureText:x=>jx(x,r)});i.set(d,wV(d.formattedValue.toString(),f))}return i}const d6=5;function _0e(e,t,a=0){const s=Math.min(Math.abs(a)%180,Math.abs(Math.abs(a)%180-180)%180);if(s<d6)return e;if(s>90-d6)return t;const r=$c(s),i=Math.atan2(t,e);return r<i?e/Math.cos(r):t/Math.sin(r)}function A0e(e,{tickLabelStyle:t,tickLabelInterval:a,tickLabelMinGap:s,reverse:r,isMounted:i,isXInside:l}){if(typeof a=="function")return new Set(e.filter((f,p)=>a(f.value,p)));let o=0;const c=r?-1:1,d=e.filter(f=>{const{offset:p,labelOffset:x,formattedValue:y}=f;if(y==="")return!1;const w=p+x;return l(w)}),u=T0e(d,t);return new Set(d.filter((f,p)=>{const{offset:x,labelOffset:y}=f,w=x+y;if(p>0&&c*w<c*(o+s))return!1;const{width:v,height:C}=i?E0e(u,f):{width:0,height:0},N=_0e(v,C,t?.angle),S=w-c*N/2;return p>0&&c*S<c*(o+s)?!1:(o=w+c*N/2,!0)}))}function E0e(e,t){if(t.formattedValue===void 0)return{width:0,height:0};let a=0,s=0;for(const r of t.formattedValue.split(`
`)){const i=e.get(r);i&&(a=Math.max(a,i.width),s+=i.height)}return{width:a,height:s}}function T0e(e,t){const a=new Set;for(const s of e)s.formattedValue&&s.formattedValue.split(`
`).forEach(r=>a.add(r));return C0e(a,t)}function AV(e){return Ra("MuiChartsAxis",e)}const Dy=va("MuiChartsAxis",["root","line","tickContainer","tick","tickLabel","label","directionX","directionY","top","bottom","left","right","id"]),EV=e=>{const{classes:t,position:a,id:s}=e,r={root:["root","directionX",a,`id-${s}`],line:["line"],tickContainer:["tickContainer"],tick:["tick"],tickLabel:["tickLabel"],label:["label"]};return $a(r,AV,t)},ZE=3,k0e=4,TV={disableLine:!1,disableTicks:!1,tickSize:6,tickLabelMinGap:4};function L0e({style:e,needsComputation:t,text:a}){return a.split(`
`).map(s=>Ve({text:s},t?jx(s,e):{width:0,height:0}))}const P0e=["x","y","style","text","ownerState"],D0e=["angle","textAnchor","dominantBaseline"];function RN(e){const{x:t,y:a,style:s,text:r}=e,i=cn(e,P0e),l=s??{},{angle:o,textAnchor:c,dominantBaseline:d}=l,u=cn(l,D0e),f=IN(),p=h.useMemo(()=>L0e({style:u,needsComputation:f&&r.includes(`
`),text:r}),[u,r,f]);let x;switch(d){case"hanging":case"text-before-edge":x=0;break;case"central":x=(p.length-1)/2*-p[0].height;break;default:x=(p.length-1)*-p[0].height;break}return n.jsx("text",Ve({},i,{transform:o?`rotate(${o}, ${t}, ${a})`:void 0,x:t,y:a,textAnchor:c,dominantBaseline:d,style:u,children:p.map((y,w)=>n.jsx("tspan",{x:t,dy:`${w===0?x:p[0].height}px`,dominantBaseline:d,children:y.text},w))}))}function kV(e){const t=LN(e);return t<=30||t>=330||t<=210&&t>=150?"middle":t<=180?"end":"start"}function LV(e){const t=LN(e);return t<=30||t>=330?"hanging":t<=210&&t>=150?"auto":"central"}function PV(e){switch(e){case"start":return"end";case"end":return"start";default:return e}}const O0e=["scale","tickNumber","reverse"];function DV(e){const{xAxis:t,xAxisIds:a}=dr(),s=t[e.axisId??a[0]],{scale:r,tickNumber:i,reverse:l}=s,o=cn(s,O0e),c=yi({props:Ve({},o,e),name:"MuiChartsXAxis"}),d=Ve({},TV,c),{position:u,tickLabelStyle:f,slots:p,slotProps:x}=d,y=kl(),w=ix(),v=EV(d),C=u==="bottom"?1:-1,N=p?.axisTick??"line",S=p?.axisTickLabel??RN,T=kV((u==="bottom"?0:180)-(f?.angle??0)),k=LV((u==="bottom"?0:180)-(f?.angle??0)),_=Co({elementType:S,externalSlotProps:x?.axisTickLabel,additionalProps:{style:Ve({},y.typography.caption,{fontSize:12,lineHeight:1.25,textAnchor:w?PV(T):T,dominantBaseline:k},f)},className:v.tickLabel,ownerState:{}});return{xScale:r,defaultizedProps:d,tickNumber:i,positionSign:C,classes:v,Tick:N,TickLabel:S,axisTickLabelProps:_,reverse:l}}function M0e(e){const{axisLabelHeight:t}=e,{xScale:a,defaultizedProps:s,tickNumber:r,positionSign:i,classes:l,Tick:o,TickLabel:c,axisTickLabelProps:d,reverse:u}=DV(e),f=ix(),p=h0e(),{disableTicks:x,tickSize:y,valueFormatter:w,slotProps:v,tickInterval:C,tickLabelInterval:N,tickPlacement:S,tickLabelPlacement:T,tickLabelMinGap:k,height:_}=s,E=vi(),{instance:A}=Rr(),I=IN(),z=x?4:y,F=$N({scale:a,tickNumber:r,valueFormatter:w,tickInterval:C,tickPlacement:S,tickLabelPlacement:T,direction:"x"}),D=A0e(F,{tickLabelStyle:d.style,tickLabelInterval:N,tickLabelMinGap:k,reverse:u,isMounted:p,isXInside:A.isXInside}),M=Math.max(0,_-(t>0?t+k0e:0)-z-ZE),W=I?S0e(D,E,M,f,d.style):new Map(Array.from(D).map(Z=>[Z,Z.formattedValue]));return n.jsx(h.Fragment,{children:F.map((Z,R)=>{const{offset:Q,labelOffset:Y}=Z,oe=Y??0,re=i*(z+ZE),ee=A.isXInside(Q),H=W.get(Z),ye=D.has(Z);return n.jsxs("g",{transform:`translate(${Q}, 0)`,className:l.tickContainer,children:[!x&&ee&&n.jsx(o,Ve({y2:i*z,className:l.tick},v?.axisTick)),H!==void 0&&ye&&n.jsx(c,Ve({x:oe,y:re},d,{text:H}))]},R)})})}const ig={start:0,extremities:0,end:1,middle:.5,tick:0};function OV(e){const{scale:t,tickInterval:a,tickLabelPlacement:s="middle",tickPlacement:r="extremities",groups:i}=e;return h.useMemo(()=>{const l=t.domain(),o=typeof a=="function"&&l.filter(a)||typeof a=="object"&&a||l;if(t.bandwidth()>0){const c=u6(o,i,r,s,t);return c[0]&&(c[0].ignoreTick=!0),[{formattedValue:void 0,offset:t.range()[0],labelOffset:0,groupIndex:i.length-1},...c,{formattedValue:void 0,offset:t.range()[1],labelOffset:0,groupIndex:i.length-1}]}return u6(o,i,r,s,t)},[t,a,i,r,s])}function u6(e,t,a,s,r){const i=[],l=new Map;let o=0;for(let c=0;c<t.length;c+=1)for(let d=0;d<e.length;d+=1){const u=e[d],f=t[c].getValue(u,d),p=i[i.length-1];if(p?.value!==f||p?.groupIndex!==c){o=1;const y=ms(r)?r(u)-(r.step()-r.bandwidth())/2+ig[a]*r.step():r(u),w=r.step()*o*(ig[s]-ig[a]);i.push({value:f,formattedValue:`${f}`,offset:y,groupIndex:c,dataIndex:d,ignoreTick:!1,labelOffset:w}),l.has(d)||l.set(d,new Set);const v=l.get(d);for(const C of v.values())i[C].ignoreTick=!0;v.add(i.length-1)}else{o+=1;const y=r.step()*o*(ig[s]-ig[a]);p.labelOffset=y}}return i}const m6={tickSize:6},I0e=(e,t,a)=>{const s=e[t]??{},r=a??m6.tickSize,i=r*t*2+r;return Ve({},m6,s,{tickSize:s.tickSize??i})};function $0e(e){const{xScale:t,defaultizedProps:a,positionSign:s,classes:r,Tick:i,TickLabel:l,axisTickLabelProps:o}=DV(e);if(!ms(t))throw new Error("MUI X Charts: ChartsGroupedXAxis only supports the `band` and `point` scale types.");const{disableTicks:c,tickSize:d,valueFormatter:u,slotProps:f,tickInterval:p,tickPlacement:x,tickLabelPlacement:y}=a,w=a.groups,{instance:v}=Rr(),C=OV({scale:t,tickInterval:p,tickPlacement:x,tickLabelPlacement:y,groups:w});return n.jsx(h.Fragment,{children:C.map((N,S)=>{const{offset:T,labelOffset:k}=N,_=k??0,E=v.isXInside(T),A=N.formattedValue,I=N.ignoreTick??!1,z=N.groupIndex??0,F=I0e(w,z,d),D=s*F.tickSize,M=s*(F.tickSize+ZE);return n.jsxs("g",{transform:`translate(${T}, 0)`,className:r.tickContainer,"data-group-index":z,children:[!c&&!I&&E&&n.jsx(i,Ve({y2:D,className:r.tick},f?.axisTick)),A!==void 0&&n.jsx(l,Ve({x:_,y:M},o,{style:Ve({},o.style,F.tickLabelStyle),text:A}))]},S)})})}const MV=an("g",{name:"MuiChartsAxis",slot:"Root"})(({theme:e})=>({[`& .${Dy.tickLabel}`]:Ve({},e.typography.caption,{fill:(e.vars||e).palette.text.primary}),[`& .${Dy.label}`]:{fill:(e.vars||e).palette.text.primary},[`& .${Dy.line}`]:{stroke:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges",strokeWidth:1},[`& .${Dy.tick}`]:{stroke:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges"}})),R0e=["axis"],z0e=["scale","tickNumber","reverse"],F0e=an(MV,{name:"MuiChartsXAxis",slot:"Root"})({});function U0e(e){let{axis:t}=e,a=cn(e,R0e);const{scale:s}=t,r=cn(t,z0e),i=yi({props:Ve({},r,a),name:"MuiChartsXAxis"}),l=Ve({},TV,i),{position:o,labelStyle:c,offset:d,slots:u,slotProps:f,sx:p,disableLine:x,label:y,height:w}=l,v=kl(),C=EV(l),{left:N,top:S,width:T,height:k}=vi(),_=o==="bottom"?1:-1,E=u?.axisLine??"line",A=u?.axisLabel??RN,I=Co({elementType:A,externalSlotProps:f?.axisLabel,additionalProps:{style:Ve({},v.typography.body1,{lineHeight:1,fontSize:14,textAnchor:"middle",dominantBaseline:o==="bottom"?"text-after-edge":"text-before-edge"},c)},ownerState:{}});if(o==="none")return null;const z=y?jx(y,I.style).height:0,F=s.domain(),M=ms(s)?F.length===0:F.some(fP);let W=null;M||(W="groups"in t&&Array.isArray(t.groups)?n.jsx($0e,Ve({},a)):n.jsx(M0e,Ve({},a,{axisLabelHeight:z})));const Z={x:N+T/2,y:_*w};return n.jsxs(F0e,{transform:`translate(0, ${o==="bottom"?S+k+d:S-d})`,className:C.root,sx:p,children:[!x&&n.jsx(E,Ve({x1:N,x2:N+T,className:C.line},f?.axisLine)),W,y&&n.jsx("g",{className:C.label,children:n.jsx(A,Ve({},Z,I,{text:y}))})]})}function B0e(e){const{xAxis:t,xAxisIds:a}=dr(),s=t[e.axisId??a[0]];return s?n.jsx(U0e,Ve({},e,{axis:s})):(`${e.axisId}`,null)}function H0e(e,t,a,s,r){const i=new Map,l=LN(r?.angle??0);let o=1,c=1;r?.textAnchor==="start"?(o=1/0,c=1):r?.textAnchor==="end"?(o=1,c=1/0):(o=2,c=2),l>180&&([o,c]=[c,o]),s&&([o,c]=[c,o]);for(const d of e)if(d.formattedValue){const u=Math.min((d.offset+d.labelOffset)*o,(t.top+t.height+t.bottom-d.offset-d.labelOffset)*c),f=p=>vV(p,{width:a,height:u,angle:l,measureText:x=>jx(x,r)});i.set(d,wV(d.formattedValue.toString(),f))}return i}const IV=e=>{const{classes:t,position:a,id:s}=e,r={root:["root","directionY",a,`id-${s}`],line:["line"],tickContainer:["tickContainer"],tick:["tick"],tickLabel:["tickLabel"],label:["label"]};return $a(r,AV,t)},JE=2,G0e=2,$V={disableLine:!1,disableTicks:!1,tickSize:6},W0e=["scale","tickNumber","reverse"];function RV(e){const{yAxis:t,yAxisIds:a}=ur(),s=t[e.axisId??a[0]],{scale:r,tickNumber:i}=s,l=cn(s,W0e),o=yi({props:Ve({},l,e),name:"MuiChartsYAxis"}),c=Ve({},$V,o),{position:d,tickLabelStyle:u,slots:f,slotProps:p}=c,x=kl(),y=ix(),w=IV(c),v=d==="right"?1:-1,C=typeof u?.fontSize=="number"?u.fontSize:12,N=f?.axisTick??"line",S=f?.axisTickLabel??RN,T=kV((d==="right"?-90:90)-(u?.angle??0)),k=LV((d==="right"?-90:90)-(u?.angle??0)),_=Co({elementType:S,externalSlotProps:p?.axisTickLabel,additionalProps:{style:Ve({},x.typography.caption,{fontSize:C,textAnchor:y?PV(T):T,dominantBaseline:k},u)},className:w.tickLabel,ownerState:{}});return{yScale:r,defaultizedProps:c,tickNumber:i,positionSign:v,classes:w,Tick:N,TickLabel:S,axisTickLabelProps:_}}function V0e(e){const{axisLabelHeight:t}=e,{yScale:a,defaultizedProps:s,tickNumber:r,positionSign:i,classes:l,Tick:o,TickLabel:c,axisTickLabelProps:d}=RV(e),u=ix(),{disableTicks:f,tickSize:p,valueFormatter:x,slotProps:y,tickPlacement:w,tickLabelPlacement:v,tickInterval:C,tickLabelInterval:N,width:S}=s,T=vi(),{instance:k}=Rr(),_=IN(),E=f?4:p,A=$N({scale:a,tickNumber:r,valueFormatter:x,tickPlacement:w,tickLabelPlacement:v,tickInterval:C,direction:"y"}),I=Math.max(0,S-(t>0?t+G0e:0)-E-JE),z=_?H0e(A,T,I,u,d.style):new Map(Array.from(A).map(F=>[F,F.formattedValue]));return n.jsx(h.Fragment,{children:A.map((F,D)=>{const{offset:M,labelOffset:W,value:Z}=F,R=i*(E+JE),Q=W,Y=typeof N=="function"&&!N?.(Z,D),oe=k.isYInside(M),re=z.get(F);return oe?n.jsxs("g",{transform:`translate(0, ${M})`,className:l.tickContainer,children:[!f&&n.jsx(o,Ve({x2:i*E,className:l.tick},y?.axisTick)),re!==void 0&&!Y&&n.jsx(c,Ve({x:R,y:Q,text:re},d))]},D):null})})}const f6={tickSize:6},q0e=(e,t,a)=>{const s=e[t]??{},r=a??f6.tickSize,i=r*t*2+r;return Ve({},f6,s,{tickSize:s.tickSize??i})};function Y0e(e){const{yScale:t,defaultizedProps:a,positionSign:s,classes:r,Tick:i,TickLabel:l,axisTickLabelProps:o}=RV(e);if(!ms(t))throw new Error("MUI X Charts: ChartsGroupedYAxis only supports the `band` and `point` scale types.");const{disableTicks:c,tickSize:d,valueFormatter:u,slotProps:f,tickInterval:p,tickPlacement:x,tickLabelPlacement:y}=a,w=a.groups,{instance:v}=Rr(),C=OV({scale:t,tickInterval:p,tickPlacement:x,tickLabelPlacement:y,groups:w});return n.jsx(h.Fragment,{children:C.map((N,S)=>{const{offset:T,labelOffset:k}=N,_=k??0,E=v.isYInside(T),A=N.formattedValue,I=N.ignoreTick??!1,z=N.groupIndex??0,F=q0e(w,z,d),D=s*F.tickSize,M=s*(F.tickSize+JE);return n.jsxs("g",{transform:`translate(0, ${T})`,className:r.tickContainer,"data-group-index":z,children:[!c&&!I&&E&&n.jsx(i,Ve({x2:D,className:r.tick},f?.axisTick)),A!==void 0&&n.jsx(l,Ve({x:M,y:_},o,{style:Ve({},o.style,F.tickLabelStyle),text:A}))]},S)})})}const Q0e=["axis"],K0e=["scale","tickNumber","reverse"],X0e=an(MV,{name:"MuiChartsYAxis",slot:"Root"})({});function Z0e(e){let{axis:t}=e,a=cn(e,Q0e);const{scale:s}=t,r=cn(t,K0e),i=IN(),l=yi({props:Ve({},r,a),name:"MuiChartsYAxis"}),o=Ve({},$V,l),{position:c,disableLine:d,label:u,labelStyle:f,offset:p,width:x,sx:y,slots:w,slotProps:v}=o,C=kl(),N=IV(o),{left:S,top:T,width:k,height:_}=vi(),E=c==="right"?1:-1,A=w?.axisLine??"line",I=w?.axisLabel??RN,z=Co({elementType:A,externalSlotProps:v?.axisLine,additionalProps:{strokeLinecap:"square"},ownerState:{}}),F=Co({elementType:I,externalSlotProps:v?.axisLabel,additionalProps:{style:Ve({},C.typography.body1,{lineHeight:1,fontSize:14,angle:E*90,textAnchor:"middle",dominantBaseline:"text-before-edge"},f)},ownerState:{}});if(c==="none")return null;const D={x:E*x,y:T+_/2},M=u==null?0:jx(u,F.style).height,W=s.domain(),R=ms(s)?W.length===0:W.some(fP);let Q=null;return R||(Q="groups"in t&&Array.isArray(t.groups)?n.jsx(Y0e,Ve({},a)):n.jsx(V0e,Ve({},a,{axisLabelHeight:M}))),n.jsxs(X0e,{transform:`translate(${c==="right"?S+k+p:S-p}, 0)`,className:N.root,sx:y,children:[!d&&n.jsx(A,Ve({y1:T,y2:T+_,className:N.line},z)),Q,u&&i&&n.jsx("g",{className:N.label,children:n.jsx(I,Ve({},D,F,{text:u}))})]})}function J0e(e){const{yAxis:t,yAxisIds:a}=ur(),s=t[e.axisId??a[0]];return s?n.jsx(Z0e,Ve({},e,{axis:s})):(`${e.axisId}`,null)}function eye(e){const{slots:t,slotProps:a}=e,{xAxisIds:s,xAxis:r}=dr(),{yAxisIds:i,yAxis:l}=ur();return n.jsxs(h.Fragment,{children:[s.map(o=>!r[o].position||r[o].position==="none"?null:n.jsx(B0e,{slots:t,slotProps:a,axisId:o},o)),i.map(o=>!l[o].position||l[o].position==="none"?null:n.jsx(J0e,{slots:t,slotProps:a,axisId:o},o))]})}function tye(e){return Ra("MuiTypography",e)}va("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const nye={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},aye=Oce(),sye=e=>{const{align:t,gutterBottom:a,noWrap:s,paragraph:r,variant:i,classes:l}=e,o={root:["root",i,e.align!=="inherit"&&`align${Un(t)}`,a&&"gutterBottom",s&&"noWrap",r&&"paragraph"]};return $a(o,tye,l)},rye=an("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.variant&&t[a.variant],a.align!=="inherit"&&t[`align${Un(a.align)}`],a.noWrap&&t.noWrap,a.gutterBottom&&t.gutterBottom,a.paragraph&&t.paragraph]}})(yu(({theme:e})=>({margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(e.typography).filter(([t,a])=>t!=="inherit"&&a&&typeof a=="object").map(([t,a])=>({props:{variant:t},style:a})),...Object.entries(e.palette).filter(ip()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette?.text||{}).filter(([,t])=>typeof t=="string").map(([t])=>({props:{color:`text${Un(t)}`},style:{color:(e.vars||e).palette.text[t]}})),{props:({ownerState:t})=>t.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:t})=>t.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:t})=>t.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:t})=>t.paragraph,style:{marginBottom:16}}]}))),h6={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},pP=h.forwardRef(function(t,a){const{color:s,...r}=rd({props:t,name:"MuiTypography"}),i=!nye[s],l=aye({...r,...i&&{color:s}}),{align:o="inherit",className:c,component:d,gutterBottom:u=!1,noWrap:f=!1,paragraph:p=!1,variant:x="body1",variantMapping:y=h6,...w}=l,v={...l,align:o,color:s,className:c,component:d,gutterBottom:u,noWrap:f,paragraph:p,variant:x,variantMapping:y},C=d||(p?"p":y[x]||h6[x])||"span",N=sye(v);return n.jsx(rye,{as:C,ref:a,className:Tt(N.root,c),...w,ownerState:v,style:{...o!=="inherit"&&{"--Typography-textAlign":o},...w.style}})});function iye(e){return Ra("MuiChartsTooltip",e)}const Ym=va("MuiChartsTooltip",["root","paper","table","row","cell","mark","markContainer","labelCell","valueCell","axisValueCell"]),zN=e=>$a({root:["root"],paper:["paper"],table:["table"],row:["row"],cell:["cell"],mark:["mark"],markContainer:["markContainer"],labelCell:["labelCell"],valueCell:["valueCell"],axisValueCell:["axisValueCell"]},iye,e);function lye(){const e=Gn(),t=$t(e,JG),a=$t(e,$r),s=PN(),{xAxis:r,xAxisIds:i}=dr(),{yAxis:l,yAxisIds:o}=ur(),{zAxis:c,zAxisIds:d}=sP(),{rotationAxis:u,rotationAxisIds:f}=eV();if(!t)return null;const p=s[t.type]?.series[t.seriesId];if(!p)return null;const x=mv(p)?p.xAxisId??i[0]:void 0,y=mv(p)?p.yAxisId??o[0]:void 0,w="zAxisId"in p?p.zAxisId??d[0]:d[0],v=f[0],C=a[p.type].colorProcessor?.(p,x!==void 0?r[x]:void 0,y!==void 0?l[y]:void 0,w!==void 0?c[w]:void 0)??(()=>""),N={};return x!==void 0&&(N.x=r[x]),y!==void 0&&(N.y=l[y]),v!==void 0&&(N.rotation=u[v]),a[p.type].tooltipGetter({series:p,axesConfig:N,getColor:C,identifier:t})}const eT=an("div",{name:"MuiChartsTooltip",slot:"Container",overridesResolver:(e,t)=>t.paper})(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,borderRadius:(e.vars||e).shape?.borderRadius,border:`solid ${(e.vars||e).palette.divider} 1px`})),tT=an("table",{name:"MuiChartsTooltip",slot:"Table"})(({theme:e})=>({borderSpacing:0,[`& .${Ym.markContainer}`]:{display:"inline-block",width:`calc(20px + ${e.spacing(1.5)})`,verticalAlign:"middle"},"& caption":{borderBottom:`solid ${(e.vars||e).palette.divider} 1px`,padding:e.spacing(.5,1.5),textAlign:"start",whiteSpace:"nowrap","& span":{marginRight:e.spacing(1.5)}}})),nT=an("tr",{name:"MuiChartsTooltip",slot:"Row"})(({theme:e})=>({"tr:first-of-type& td":{paddingTop:e.spacing(.5)},"tr:last-of-type& td":{paddingBottom:e.spacing(.5)}})),Km=an(pP,{name:"MuiChartsTooltip",slot:"Cell"})(({theme:e})=>({verticalAlign:"middle",color:(e.vars||e).palette.text.secondary,textAlign:"start",[`&.${Ym.cell}`]:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)},[`&.${Ym.labelCell}`]:{whiteSpace:"nowrap",fontWeight:e.typography.fontWeightRegular},[`&.${Ym.valueCell}, &.${Ym.axisValueCell}`]:{color:(e.vars||e).palette.text.primary,fontWeight:e.typography.fontWeightMedium},[`&.${Ym.valueCell}`]:{paddingLeft:e.spacing(1.5),paddingRight:e.spacing(1.5)},"td:first-of-type&, th:first-of-type&":{paddingLeft:e.spacing(1.5)},"td:last-of-type&, th:last-of-type&":{paddingRight:e.spacing(1.5)}}));function oye(e){return Ra("MuiChartsLabelMark",e)}const Om=va("MuiChartsLabelMark",["root","line","square","circle","mask","fill"]),cye=e=>{const{type:t}=e;return $a({root:typeof t=="function"?["root"]:["root",t],mask:["mask"],fill:["fill"]},oye,e.classes)},zV=(e,t,a)=>h.forwardRef(function(r,i){const l=yi({props:r,name:e}),o=typeof t.defaultProps=="function"?t.defaultProps(l):t.defaultProps??{},c=xu(o,l),d=kl(),u=t.classesResolver?.(c,d),f=h.forwardRef(a);return n.jsx(f,Ve({},c,{classes:u,ref:i}))}),dye=["type","color","className","classes"],uye=an("div",{name:"MuiChartsLabelMark",slot:"Root"})(()=>({display:"flex",width:14,height:14,[`&.${Om.line}`]:{width:16,height:"unset",alignItems:"center",[`.${Om.mask}`]:{height:4,width:"100%",borderRadius:1,overflow:"hidden"}},[`&.${Om.square}`]:{height:13,width:13,borderRadius:2,overflow:"hidden"},[`&.${Om.circle}`]:{height:15,width:15},svg:{display:"block"},[`& .${Om.mask} > *`]:{height:"100%",width:"100%"},[`& .${Om.mask}`]:{height:"100%",width:"100%"}})),jv=zV("MuiChartsLabelMark",{defaultProps:{type:"square"},classesResolver:cye},function(t,a){const{type:s,color:r,className:i,classes:l}=t,o=cn(t,dye),c=s;return n.jsx(uye,Ve({className:Tt(l?.root,i),ownerState:t,"aria-hidden":"true",ref:a},o,{children:n.jsx("div",{className:l?.mask,children:typeof c=="function"?n.jsx(c,{className:l?.fill,color:r}):n.jsx("svg",{viewBox:"0 0 24 24",preserveAspectRatio:s==="line"?"none":void 0,children:s==="circle"?n.jsx("circle",{className:l?.fill,r:"12",cx:"12",cy:"12",fill:r}):n.jsx("rect",{className:l?.fill,width:"24",height:"24",fill:r})})})}))});function mye(e){const{classes:t,sx:a}=e,s=lye(),r=zN(t);if(!s)return null;if("values"in s){const{label:d,color:u,markType:f}=s;return n.jsx(eT,{sx:a,className:r.paper,children:n.jsxs(tT,{className:r.table,children:[n.jsxs(pP,{component:"caption",children:[n.jsx("div",{className:r.markContainer,children:n.jsx(jv,{type:f,color:u,className:r.mark})}),d]}),n.jsx("tbody",{children:s.values.map(({formattedValue:p,label:x})=>n.jsxs(nT,{className:r.row,children:[n.jsx(Km,{className:Tt(r.labelCell,r.cell),component:"th",children:x}),n.jsx(Km,{className:Tt(r.valueCell,r.cell),component:"td",children:p})]},x))})]})})}const{color:i,label:l,formattedValue:o,markType:c}=s;return n.jsx(eT,{sx:a,className:r.paper,children:n.jsx(tT,{className:r.table,children:n.jsx("tbody",{children:n.jsxs(nT,{className:r.row,children:[n.jsxs(Km,{className:Tt(r.labelCell,r.cell),component:"th",children:[n.jsx("div",{className:r.markContainer,children:n.jsx(jv,{type:c,color:i,className:r.mark})}),l]}),n.jsx(Km,{className:Tt(r.valueCell,r.cell),component:"td",children:o})]})})})})}function fye(e){const t=Gn(),a=$t(t,$r);return h.useMemo(()=>{const r={};return Object.keys(a).forEach(i=>{r[i]=a[i].colorProcessor}),r},[a])}const hye=f9({themeId:Jw});function gye(){const e=rP(),[t,a]=h.useState(null);return h.useEffect(()=>{const s=e.current;if(s===null)return()=>{};const r=l=>{l.pointerType!=="mouse"&&a(null)},i=l=>{a({pointerType:l.pointerType})};return s.addEventListener("pointerenter",i),s.addEventListener("pointerup",r),()=>{s.removeEventListener("pointerenter",i),s.removeEventListener("pointerup",r)}},[e]),t}function pye(e){return e instanceof Date?e.toUTCString():e.toLocaleString()}const xye="@media (pointer: fine)",yye=()=>hye(xye,{defaultMatches:!0}),FV=(e,t)=>t,UV=(e,t)=>t;function BV(e,t,a){return Array.isArray(a)?a.map(s=>i6(t.axis[s],e)):i6(t.axis[a],e)}const HV=wt(gx,px,rpe,(e,t,a)=>e===null||t===null?null:ipe(a)(e,t)),bye=wt(HV,Fu,FV,(e,t,a=t.axisIds[0])=>e===null?null:BV(e,t,a)),GV=wt(HV,Fu,UV,(e,t,a=t.axisIds)=>e===null?null:BV(e,t,a));wt(Fu,bye,FV,(e,t,a=e.axisIds[0])=>{if(t===null||t===-1||e.axisIds.length===0)return null;const s=e.axis[a]?.data;return s?s[t]:null});wt(Fu,GV,UV,(e,t,a=e.axisIds)=>t===null?null:a.map((s,r)=>{const i=t[r];return i===-1?null:e.axis[s].data?.[i]}));const WV=eN({memoizeOptions:{resultEqualityCheck:lf}})(GV,Fu,(e,t)=>e===null?[]:t.axisIds.map((a,s)=>({axisId:a,dataIndex:e[s]})).filter(({axisId:a,dataIndex:s})=>t.axis[a].triggerTooltip&&s>=0)),vye=wt(WV,e=>e.length>0);function qS(e,t,a){const s=e.data?.[t]??null,i=(e.valueFormatter??(l=>e.scaleType==="utc"?pye(l):l.toLocaleString()))(s,{location:"tooltip",scale:e.scale});return{axisDirection:a,axisId:e.id,mainAxis:e,dataIndex:t,axisValue:s,axisFormattedValue:i,seriesItems:[]}}function wye(e={}){const{multipleAxes:t,directions:a}=e,s=ope(),r=cpe(),i=dpe(),l=Gn(),o=$t(l,aW),c=$t(l,sW),d=$t(l,WV),u=PN(),{xAxis:f}=dr(),{yAxis:p}=ur(),{zAxis:x,zAxisIds:y}=sP(),{rotationAxis:w}=eV(),v=fye();if(o.length===0&&c.length===0&&d.length===0)return null;const C=[];return(a===void 0||a.includes("x"))&&o.forEach(({axisId:N,dataIndex:S})=>{!t&&C.length>1||C.push(qS(f[N],S,"x"))}),(a===void 0||a.includes("y"))&&c.forEach(({axisId:N,dataIndex:S})=>{!t&&C.length>1||C.push(qS(p[N],S,"y"))}),(a===void 0||a.includes("rotation"))&&d.forEach(({axisId:N,dataIndex:S})=>{!t&&C.length>1||C.push(qS(w[N],S,"rotation"))}),Object.keys(u).filter(bN).forEach(N=>{const S=u[N];return S?S.seriesOrder.forEach(T=>{const k=S.series[T],_=k.xAxisId??s.id,E=k.yAxisId??r.id,A=C.findIndex(({axisDirection:I,axisId:z})=>I==="x"&&z===_||I==="y"&&z===E);if(A>=0){const I="zAxisId"in k?k.zAxisId:y[0],{dataIndex:z}=C[A],F=v[N]?.(k,f[_],p[E],I?x[I]:void 0)(z)??"",D=k.data[z]??null,M=k.valueFormatter(D,{dataIndex:z}),W=zi(k.label,"tooltip")??null;C[A].seriesItems.push({seriesId:T,color:F,value:D,formattedValue:M,formattedLabel:W,markType:k.labelMarkType})}}):[]}),Object.keys(u).filter(aP).forEach(N=>{const S=u[N];return S?S.seriesOrder.forEach(T=>{const k=S.series[T],_=k.rotationAxisId??i?.id,E=C.findIndex(({axisDirection:A,axisId:I})=>A==="rotation"&&I===_);if(E>=0){const{dataIndex:A}=C[E],I=v[N]?.(k)(A)??"",z=k.data[A]??null,F=k.valueFormatter(z,{dataIndex:A}),D=zi(k.label,"tooltip")??null;C[E].seriesItems.push({seriesId:T,color:I,value:z,formattedValue:F,formattedLabel:D,markType:k.labelMarkType})}}):[]}),t?C:C.length===0?C[0]:null}function Nye(e){return wye(Ve({},e,{multipleAxes:!0}))}function jye(e){const t=zN(e.classes),a=Nye();return a===null?null:n.jsx(eT,{sx:e.sx,className:t.paper,children:a.map(({axisId:s,mainAxis:r,axisValue:i,axisFormattedValue:l,seriesItems:o})=>n.jsxs(tT,{className:t.table,children:[i!=null&&!r.hideTooltip&&n.jsx(pP,{component:"caption",children:l}),n.jsx("tbody",{children:o.map(({seriesId:c,color:d,formattedValue:u,formattedLabel:f,markType:p})=>u==null?null:n.jsxs(nT,{className:t.row,children:[n.jsxs(Km,{className:Tt(t.labelCell,t.cell),component:"th",children:[n.jsx("div",{className:t.markContainer,children:n.jsx(jv,{type:p,color:d,className:t.mark})}),f||null]}),n.jsx(Km,{className:Tt(t.valueCell,t.cell),component:"td",children:u})]},c))})]},s))})}var rr="top",di="bottom",ui="right",ir="left",xP="auto",Cx=[rr,di,ui,ir],Nf="start",pp="end",Cye="clippingParents",VV="viewport",lg="popper",Sye="reference",g6=Cx.reduce(function(e,t){return e.concat([t+"-"+Nf,t+"-"+pp])},[]),qV=[].concat(Cx,[xP]).reduce(function(e,t){return e.concat([t,t+"-"+Nf,t+"-"+pp])},[]),_ye="beforeRead",Aye="read",Eye="afterRead",Tye="beforeMain",kye="main",Lye="afterMain",Pye="beforeWrite",Dye="write",Oye="afterWrite",Mye=[_ye,Aye,Eye,Tye,kye,Lye,Pye,Dye,Oye];function Sl(e){return e?(e.nodeName||"").toLowerCase():null}function Dr(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function wu(e){var t=Dr(e).Element;return e instanceof t||e instanceof Element}function oi(e){var t=Dr(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function yP(e){if(typeof ShadowRoot>"u")return!1;var t=Dr(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Iye(e){var t=e.state;Object.keys(t.elements).forEach(function(a){var s=t.styles[a]||{},r=t.attributes[a]||{},i=t.elements[a];!oi(i)||!Sl(i)||(Object.assign(i.style,s),Object.keys(r).forEach(function(l){var o=r[l];o===!1?i.removeAttribute(l):i.setAttribute(l,o===!0?"":o)}))})}function $ye(e){var t=e.state,a={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,a.popper),t.styles=a,t.elements.arrow&&Object.assign(t.elements.arrow.style,a.arrow),function(){Object.keys(t.elements).forEach(function(s){var r=t.elements[s],i=t.attributes[s]||{},l=Object.keys(t.styles.hasOwnProperty(s)?t.styles[s]:a[s]),o=l.reduce(function(c,d){return c[d]="",c},{});!oi(r)||!Sl(r)||(Object.assign(r.style,o),Object.keys(i).forEach(function(c){r.removeAttribute(c)}))})}}const Rye={name:"applyStyles",enabled:!0,phase:"write",fn:Iye,effect:$ye,requires:["computeStyles"]};function yl(e){return e.split("-")[0]}var lu=Math.max,Cv=Math.min,jf=Math.round;function aT(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function YV(){return!/^((?!chrome|android).)*safari/i.test(aT())}function Cf(e,t,a){t===void 0&&(t=!1),a===void 0&&(a=!1);var s=e.getBoundingClientRect(),r=1,i=1;t&&oi(e)&&(r=e.offsetWidth>0&&jf(s.width)/e.offsetWidth||1,i=e.offsetHeight>0&&jf(s.height)/e.offsetHeight||1);var l=wu(e)?Dr(e):window,o=l.visualViewport,c=!YV()&&a,d=(s.left+(c&&o?o.offsetLeft:0))/r,u=(s.top+(c&&o?o.offsetTop:0))/i,f=s.width/r,p=s.height/i;return{width:f,height:p,top:u,right:d+f,bottom:u+p,left:d,x:d,y:u}}function bP(e){var t=Cf(e),a=e.offsetWidth,s=e.offsetHeight;return Math.abs(t.width-a)<=1&&(a=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:e.offsetLeft,y:e.offsetTop,width:a,height:s}}function QV(e,t){var a=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(a&&yP(a)){var s=t;do{if(s&&e.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function To(e){return Dr(e).getComputedStyle(e)}function zye(e){return["table","td","th"].indexOf(Sl(e))>=0}function dd(e){return((wu(e)?e.ownerDocument:e.document)||window.document).documentElement}function FN(e){return Sl(e)==="html"?e:e.assignedSlot||e.parentNode||(yP(e)?e.host:null)||dd(e)}function p6(e){return!oi(e)||To(e).position==="fixed"?null:e.offsetParent}function Fye(e){var t=/firefox/i.test(aT()),a=/Trident/i.test(aT());if(a&&oi(e)){var s=To(e);if(s.position==="fixed")return null}var r=FN(e);for(yP(r)&&(r=r.host);oi(r)&&["html","body"].indexOf(Sl(r))<0;){var i=To(r);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||t&&i.willChange==="filter"||t&&i.filter&&i.filter!=="none")return r;r=r.parentNode}return null}function Sx(e){for(var t=Dr(e),a=p6(e);a&&zye(a)&&To(a).position==="static";)a=p6(a);return a&&(Sl(a)==="html"||Sl(a)==="body"&&To(a).position==="static")?t:a||Fye(e)||t}function vP(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Ug(e,t,a){return lu(e,Cv(t,a))}function Uye(e,t,a){var s=Ug(e,t,a);return s>a?a:s}function KV(){return{top:0,right:0,bottom:0,left:0}}function XV(e){return Object.assign({},KV(),e)}function ZV(e,t){return t.reduce(function(a,s){return a[s]=e,a},{})}var Bye=function(t,a){return t=typeof t=="function"?t(Object.assign({},a.rects,{placement:a.placement})):t,XV(typeof t!="number"?t:ZV(t,Cx))};function Hye(e){var t,a=e.state,s=e.name,r=e.options,i=a.elements.arrow,l=a.modifiersData.popperOffsets,o=yl(a.placement),c=vP(o),d=[ir,ui].indexOf(o)>=0,u=d?"height":"width";if(!(!i||!l)){var f=Bye(r.padding,a),p=bP(i),x=c==="y"?rr:ir,y=c==="y"?di:ui,w=a.rects.reference[u]+a.rects.reference[c]-l[c]-a.rects.popper[u],v=l[c]-a.rects.reference[c],C=Sx(i),N=C?c==="y"?C.clientHeight||0:C.clientWidth||0:0,S=w/2-v/2,T=f[x],k=N-p[u]-f[y],_=N/2-p[u]/2+S,E=Ug(T,_,k),A=c;a.modifiersData[s]=(t={},t[A]=E,t.centerOffset=E-_,t)}}function Gye(e){var t=e.state,a=e.options,s=a.element,r=s===void 0?"[data-popper-arrow]":s;r!=null&&(typeof r=="string"&&(r=t.elements.popper.querySelector(r),!r)||QV(t.elements.popper,r)&&(t.elements.arrow=r))}const Wye={name:"arrow",enabled:!0,phase:"main",fn:Hye,effect:Gye,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Sf(e){return e.split("-")[1]}var Vye={top:"auto",right:"auto",bottom:"auto",left:"auto"};function qye(e,t){var a=e.x,s=e.y,r=t.devicePixelRatio||1;return{x:jf(a*r)/r||0,y:jf(s*r)/r||0}}function x6(e){var t,a=e.popper,s=e.popperRect,r=e.placement,i=e.variation,l=e.offsets,o=e.position,c=e.gpuAcceleration,d=e.adaptive,u=e.roundOffsets,f=e.isFixed,p=l.x,x=p===void 0?0:p,y=l.y,w=y===void 0?0:y,v=typeof u=="function"?u({x,y:w}):{x,y:w};x=v.x,w=v.y;var C=l.hasOwnProperty("x"),N=l.hasOwnProperty("y"),S=ir,T=rr,k=window;if(d){var _=Sx(a),E="clientHeight",A="clientWidth";if(_===Dr(a)&&(_=dd(a),To(_).position!=="static"&&o==="absolute"&&(E="scrollHeight",A="scrollWidth")),_=_,r===rr||(r===ir||r===ui)&&i===pp){T=di;var I=f&&_===k&&k.visualViewport?k.visualViewport.height:_[E];w-=I-s.height,w*=c?1:-1}if(r===ir||(r===rr||r===di)&&i===pp){S=ui;var z=f&&_===k&&k.visualViewport?k.visualViewport.width:_[A];x-=z-s.width,x*=c?1:-1}}var F=Object.assign({position:o},d&&Vye),D=u===!0?qye({x,y:w},Dr(a)):{x,y:w};if(x=D.x,w=D.y,c){var M;return Object.assign({},F,(M={},M[T]=N?"0":"",M[S]=C?"0":"",M.transform=(k.devicePixelRatio||1)<=1?"translate("+x+"px, "+w+"px)":"translate3d("+x+"px, "+w+"px, 0)",M))}return Object.assign({},F,(t={},t[T]=N?w+"px":"",t[S]=C?x+"px":"",t.transform="",t))}function Yye(e){var t=e.state,a=e.options,s=a.gpuAcceleration,r=s===void 0?!0:s,i=a.adaptive,l=i===void 0?!0:i,o=a.roundOffsets,c=o===void 0?!0:o,d={placement:yl(t.placement),variation:Sf(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,x6(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:l,roundOffsets:c})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,x6(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const Qye={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Yye,data:{}};var Oy={passive:!0};function Kye(e){var t=e.state,a=e.instance,s=e.options,r=s.scroll,i=r===void 0?!0:r,l=s.resize,o=l===void 0?!0:l,c=Dr(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&d.forEach(function(u){u.addEventListener("scroll",a.update,Oy)}),o&&c.addEventListener("resize",a.update,Oy),function(){i&&d.forEach(function(u){u.removeEventListener("scroll",a.update,Oy)}),o&&c.removeEventListener("resize",a.update,Oy)}}const Xye={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Kye,data:{}};var Zye={left:"right",right:"left",bottom:"top",top:"bottom"};function Rb(e){return e.replace(/left|right|bottom|top/g,function(t){return Zye[t]})}var Jye={start:"end",end:"start"};function y6(e){return e.replace(/start|end/g,function(t){return Jye[t]})}function wP(e){var t=Dr(e),a=t.pageXOffset,s=t.pageYOffset;return{scrollLeft:a,scrollTop:s}}function NP(e){return Cf(dd(e)).left+wP(e).scrollLeft}function ebe(e,t){var a=Dr(e),s=dd(e),r=a.visualViewport,i=s.clientWidth,l=s.clientHeight,o=0,c=0;if(r){i=r.width,l=r.height;var d=YV();(d||!d&&t==="fixed")&&(o=r.offsetLeft,c=r.offsetTop)}return{width:i,height:l,x:o+NP(e),y:c}}function tbe(e){var t,a=dd(e),s=wP(e),r=(t=e.ownerDocument)==null?void 0:t.body,i=lu(a.scrollWidth,a.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),l=lu(a.scrollHeight,a.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),o=-s.scrollLeft+NP(e),c=-s.scrollTop;return To(r||a).direction==="rtl"&&(o+=lu(a.clientWidth,r?r.clientWidth:0)-i),{width:i,height:l,x:o,y:c}}function jP(e){var t=To(e),a=t.overflow,s=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(a+r+s)}function JV(e){return["html","body","#document"].indexOf(Sl(e))>=0?e.ownerDocument.body:oi(e)&&jP(e)?e:JV(FN(e))}function Bg(e,t){var a;t===void 0&&(t=[]);var s=JV(e),r=s===((a=e.ownerDocument)==null?void 0:a.body),i=Dr(s),l=r?[i].concat(i.visualViewport||[],jP(s)?s:[]):s,o=t.concat(l);return r?o:o.concat(Bg(FN(l)))}function sT(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function nbe(e,t){var a=Cf(e,!1,t==="fixed");return a.top=a.top+e.clientTop,a.left=a.left+e.clientLeft,a.bottom=a.top+e.clientHeight,a.right=a.left+e.clientWidth,a.width=e.clientWidth,a.height=e.clientHeight,a.x=a.left,a.y=a.top,a}function b6(e,t,a){return t===VV?sT(ebe(e,a)):wu(t)?nbe(t,a):sT(tbe(dd(e)))}function abe(e){var t=Bg(FN(e)),a=["absolute","fixed"].indexOf(To(e).position)>=0,s=a&&oi(e)?Sx(e):e;return wu(s)?t.filter(function(r){return wu(r)&&QV(r,s)&&Sl(r)!=="body"}):[]}function sbe(e,t,a,s){var r=t==="clippingParents"?abe(e):[].concat(t),i=[].concat(r,[a]),l=i[0],o=i.reduce(function(c,d){var u=b6(e,d,s);return c.top=lu(u.top,c.top),c.right=Cv(u.right,c.right),c.bottom=Cv(u.bottom,c.bottom),c.left=lu(u.left,c.left),c},b6(e,l,s));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function eq(e){var t=e.reference,a=e.element,s=e.placement,r=s?yl(s):null,i=s?Sf(s):null,l=t.x+t.width/2-a.width/2,o=t.y+t.height/2-a.height/2,c;switch(r){case rr:c={x:l,y:t.y-a.height};break;case di:c={x:l,y:t.y+t.height};break;case ui:c={x:t.x+t.width,y:o};break;case ir:c={x:t.x-a.width,y:o};break;default:c={x:t.x,y:t.y}}var d=r?vP(r):null;if(d!=null){var u=d==="y"?"height":"width";switch(i){case Nf:c[d]=c[d]-(t[u]/2-a[u]/2);break;case pp:c[d]=c[d]+(t[u]/2-a[u]/2);break}}return c}function xp(e,t){t===void 0&&(t={});var a=t,s=a.placement,r=s===void 0?e.placement:s,i=a.strategy,l=i===void 0?e.strategy:i,o=a.boundary,c=o===void 0?Cye:o,d=a.rootBoundary,u=d===void 0?VV:d,f=a.elementContext,p=f===void 0?lg:f,x=a.altBoundary,y=x===void 0?!1:x,w=a.padding,v=w===void 0?0:w,C=XV(typeof v!="number"?v:ZV(v,Cx)),N=p===lg?Sye:lg,S=e.rects.popper,T=e.elements[y?N:p],k=sbe(wu(T)?T:T.contextElement||dd(e.elements.popper),c,u,l),_=Cf(e.elements.reference),E=eq({reference:_,element:S,placement:r}),A=sT(Object.assign({},S,E)),I=p===lg?A:_,z={top:k.top-I.top+C.top,bottom:I.bottom-k.bottom+C.bottom,left:k.left-I.left+C.left,right:I.right-k.right+C.right},F=e.modifiersData.offset;if(p===lg&&F){var D=F[r];Object.keys(z).forEach(function(M){var W=[ui,di].indexOf(M)>=0?1:-1,Z=[rr,di].indexOf(M)>=0?"y":"x";z[M]+=D[Z]*W})}return z}function rbe(e,t){t===void 0&&(t={});var a=t,s=a.placement,r=a.boundary,i=a.rootBoundary,l=a.padding,o=a.flipVariations,c=a.allowedAutoPlacements,d=c===void 0?qV:c,u=Sf(s),f=u?o?g6:g6.filter(function(y){return Sf(y)===u}):Cx,p=f.filter(function(y){return d.indexOf(y)>=0});p.length===0&&(p=f);var x=p.reduce(function(y,w){return y[w]=xp(e,{placement:w,boundary:r,rootBoundary:i,padding:l})[yl(w)],y},{});return Object.keys(x).sort(function(y,w){return x[y]-x[w]})}function ibe(e){if(yl(e)===xP)return[];var t=Rb(e);return[y6(e),t,y6(t)]}function lbe(e){var t=e.state,a=e.options,s=e.name;if(!t.modifiersData[s]._skip){for(var r=a.mainAxis,i=r===void 0?!0:r,l=a.altAxis,o=l===void 0?!0:l,c=a.fallbackPlacements,d=a.padding,u=a.boundary,f=a.rootBoundary,p=a.altBoundary,x=a.flipVariations,y=x===void 0?!0:x,w=a.allowedAutoPlacements,v=t.options.placement,C=yl(v),N=C===v,S=c||(N||!y?[Rb(v)]:ibe(v)),T=[v].concat(S).reduce(function(te,ve){return te.concat(yl(ve)===xP?rbe(t,{placement:ve,boundary:u,rootBoundary:f,padding:d,flipVariations:y,allowedAutoPlacements:w}):ve)},[]),k=t.rects.reference,_=t.rects.popper,E=new Map,A=!0,I=T[0],z=0;z<T.length;z++){var F=T[z],D=yl(F),M=Sf(F)===Nf,W=[rr,di].indexOf(D)>=0,Z=W?"width":"height",R=xp(t,{placement:F,boundary:u,rootBoundary:f,altBoundary:p,padding:d}),Q=W?M?ui:ir:M?di:rr;k[Z]>_[Z]&&(Q=Rb(Q));var Y=Rb(Q),oe=[];if(i&&oe.push(R[D]<=0),o&&oe.push(R[Q]<=0,R[Y]<=0),oe.every(function(te){return te})){I=F,A=!1;break}E.set(F,oe)}if(A)for(var re=y?3:1,ee=function(ve){var je=T.find(function(Oe){var $e=E.get(Oe);if($e)return $e.slice(0,ve).every(function(pe){return pe})});if(je)return I=je,"break"},H=re;H>0;H--){var ye=ee(H);if(ye==="break")break}t.placement!==I&&(t.modifiersData[s]._skip=!0,t.placement=I,t.reset=!0)}}const obe={name:"flip",enabled:!0,phase:"main",fn:lbe,requiresIfExists:["offset"],data:{_skip:!1}};function v6(e,t,a){return a===void 0&&(a={x:0,y:0}),{top:e.top-t.height-a.y,right:e.right-t.width+a.x,bottom:e.bottom-t.height+a.y,left:e.left-t.width-a.x}}function w6(e){return[rr,ui,di,ir].some(function(t){return e[t]>=0})}function cbe(e){var t=e.state,a=e.name,s=t.rects.reference,r=t.rects.popper,i=t.modifiersData.preventOverflow,l=xp(t,{elementContext:"reference"}),o=xp(t,{altBoundary:!0}),c=v6(l,s),d=v6(o,r,i),u=w6(c),f=w6(d);t.modifiersData[a]={referenceClippingOffsets:c,popperEscapeOffsets:d,isReferenceHidden:u,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":f})}const dbe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:cbe};function ube(e,t,a){var s=yl(e),r=[ir,rr].indexOf(s)>=0?-1:1,i=typeof a=="function"?a(Object.assign({},t,{placement:e})):a,l=i[0],o=i[1];return l=l||0,o=(o||0)*r,[ir,ui].indexOf(s)>=0?{x:o,y:l}:{x:l,y:o}}function mbe(e){var t=e.state,a=e.options,s=e.name,r=a.offset,i=r===void 0?[0,0]:r,l=qV.reduce(function(u,f){return u[f]=ube(f,t.rects,i),u},{}),o=l[t.placement],c=o.x,d=o.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=d),t.modifiersData[s]=l}const fbe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:mbe};function hbe(e){var t=e.state,a=e.name;t.modifiersData[a]=eq({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const gbe={name:"popperOffsets",enabled:!0,phase:"read",fn:hbe,data:{}};function pbe(e){return e==="x"?"y":"x"}function xbe(e){var t=e.state,a=e.options,s=e.name,r=a.mainAxis,i=r===void 0?!0:r,l=a.altAxis,o=l===void 0?!1:l,c=a.boundary,d=a.rootBoundary,u=a.altBoundary,f=a.padding,p=a.tether,x=p===void 0?!0:p,y=a.tetherOffset,w=y===void 0?0:y,v=xp(t,{boundary:c,rootBoundary:d,padding:f,altBoundary:u}),C=yl(t.placement),N=Sf(t.placement),S=!N,T=vP(C),k=pbe(T),_=t.modifiersData.popperOffsets,E=t.rects.reference,A=t.rects.popper,I=typeof w=="function"?w(Object.assign({},t.rects,{placement:t.placement})):w,z=typeof I=="number"?{mainAxis:I,altAxis:I}:Object.assign({mainAxis:0,altAxis:0},I),F=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,D={x:0,y:0};if(_){if(i){var M,W=T==="y"?rr:ir,Z=T==="y"?di:ui,R=T==="y"?"height":"width",Q=_[T],Y=Q+v[W],oe=Q-v[Z],re=x?-A[R]/2:0,ee=N===Nf?E[R]:A[R],H=N===Nf?-A[R]:-E[R],ye=t.elements.arrow,te=x&&ye?bP(ye):{width:0,height:0},ve=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:KV(),je=ve[W],Oe=ve[Z],$e=Ug(0,E[R],te[R]),pe=S?E[R]/2-re-$e-je-z.mainAxis:ee-$e-je-z.mainAxis,Me=S?-E[R]/2+re+$e+Oe+z.mainAxis:H+$e+Oe+z.mainAxis,Le=t.elements.arrow&&Sx(t.elements.arrow),he=Le?T==="y"?Le.clientTop||0:Le.clientLeft||0:0,ae=(M=F?.[T])!=null?M:0,Ae=Q+pe-ae-he,ge=Q+Me-ae,Be=Ug(x?Cv(Y,Ae):Y,Q,x?lu(oe,ge):oe);_[T]=Be,D[T]=Be-Q}if(o){var qe,Te=T==="x"?rr:ir,He=T==="x"?di:ui,Ye=_[k],B=k==="y"?"height":"width",fe=Ye+v[Te],Se=Ye-v[He],de=[rr,ir].indexOf(C)!==-1,ke=(qe=F?.[k])!=null?qe:0,se=de?fe:Ye-E[B]-A[B]-ke+z.altAxis,We=de?Ye+E[B]+A[B]-ke-z.altAxis:Se,Re=x&&de?Uye(se,Ye,We):Ug(x?se:fe,Ye,x?We:Se);_[k]=Re,D[k]=Re-Ye}t.modifiersData[s]=D}}const ybe={name:"preventOverflow",enabled:!0,phase:"main",fn:xbe,requiresIfExists:["offset"]};function bbe(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function vbe(e){return e===Dr(e)||!oi(e)?wP(e):bbe(e)}function wbe(e){var t=e.getBoundingClientRect(),a=jf(t.width)/e.offsetWidth||1,s=jf(t.height)/e.offsetHeight||1;return a!==1||s!==1}function Nbe(e,t,a){a===void 0&&(a=!1);var s=oi(t),r=oi(t)&&wbe(t),i=dd(t),l=Cf(e,r,a),o={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(s||!s&&!a)&&((Sl(t)!=="body"||jP(i))&&(o=vbe(t)),oi(t)?(c=Cf(t,!0),c.x+=t.clientLeft,c.y+=t.clientTop):i&&(c.x=NP(i))),{x:l.left+o.scrollLeft-c.x,y:l.top+o.scrollTop-c.y,width:l.width,height:l.height}}function jbe(e){var t=new Map,a=new Set,s=[];e.forEach(function(i){t.set(i.name,i)});function r(i){a.add(i.name);var l=[].concat(i.requires||[],i.requiresIfExists||[]);l.forEach(function(o){if(!a.has(o)){var c=t.get(o);c&&r(c)}}),s.push(i)}return e.forEach(function(i){a.has(i.name)||r(i)}),s}function Cbe(e){var t=jbe(e);return Mye.reduce(function(a,s){return a.concat(t.filter(function(r){return r.phase===s}))},[])}function Sbe(e){var t;return function(){return t||(t=new Promise(function(a){Promise.resolve().then(function(){t=void 0,a(e())})})),t}}function _be(e){var t=e.reduce(function(a,s){var r=a[s.name];return a[s.name]=r?Object.assign({},r,s,{options:Object.assign({},r.options,s.options),data:Object.assign({},r.data,s.data)}):s,a},{});return Object.keys(t).map(function(a){return t[a]})}var N6={placement:"bottom",modifiers:[],strategy:"absolute"};function j6(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return!t.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function Abe(e){e===void 0&&(e={});var t=e,a=t.defaultModifiers,s=a===void 0?[]:a,r=t.defaultOptions,i=r===void 0?N6:r;return function(o,c,d){d===void 0&&(d=i);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},N6,i),modifiersData:{},elements:{reference:o,popper:c},attributes:{},styles:{}},f=[],p=!1,x={state:u,setOptions:function(C){var N=typeof C=="function"?C(u.options):C;w(),u.options=Object.assign({},i,u.options,N),u.scrollParents={reference:wu(o)?Bg(o):o.contextElement?Bg(o.contextElement):[],popper:Bg(c)};var S=Cbe(_be([].concat(s,u.options.modifiers)));return u.orderedModifiers=S.filter(function(T){return T.enabled}),y(),x.update()},forceUpdate:function(){if(!p){var C=u.elements,N=C.reference,S=C.popper;if(j6(N,S)){u.rects={reference:Nbe(N,Sx(S),u.options.strategy==="fixed"),popper:bP(S)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(z){return u.modifiersData[z.name]=Object.assign({},z.data)});for(var T=0;T<u.orderedModifiers.length;T++){if(u.reset===!0){u.reset=!1,T=-1;continue}var k=u.orderedModifiers[T],_=k.fn,E=k.options,A=E===void 0?{}:E,I=k.name;typeof _=="function"&&(u=_({state:u,options:A,name:I,instance:x})||u)}}}},update:Sbe(function(){return new Promise(function(v){x.forceUpdate(),v(u)})}),destroy:function(){w(),p=!0}};if(!j6(o,c))return x;x.setOptions(d).then(function(v){!p&&d.onFirstUpdate&&d.onFirstUpdate(v)});function y(){u.orderedModifiers.forEach(function(v){var C=v.name,N=v.options,S=N===void 0?{}:N,T=v.effect;if(typeof T=="function"){var k=T({state:u,name:C,instance:x,options:S}),_=function(){};f.push(k||_)}})}function w(){f.forEach(function(v){return v()}),f=[]}return x}}var Ebe=[Xye,gbe,Qye,Rye,fbe,obe,ybe,Wye,dbe],Tbe=Abe({defaultModifiers:Ebe});function C6(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function kbe(e){return typeof e=="function"?e():e}const Lbe=h.forwardRef(function(t,a){const{children:s,container:r,disablePortal:i=!1}=t,[l,o]=h.useState(null),c=Cl(h.isValidElement(s)?A9(s):null,a);if(Xa(()=>{i||o(kbe(r)||document.body)},[r,i]),Xa(()=>{if(l&&!i)return C6(a,l),()=>{C6(a,null)}},[a,l,i]),i){if(h.isValidElement(s)){const d={ref:c};return h.cloneElement(s,d)}return s}return l&&Mi.createPortal(s,l)});function Pbe(e){return Ra("MuiPopper",e)}va("MuiPopper",["root"]);function Dbe(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function rT(e){return typeof e=="function"?e():e}function Obe(e){return e.nodeType!==void 0}const Mbe=e=>{const{classes:t}=e;return $a({root:["root"]},Pbe,t)},Ibe={},$be=h.forwardRef(function(t,a){const{anchorEl:s,children:r,direction:i,disablePortal:l,modifiers:o,open:c,placement:d,popperOptions:u,popperRef:f,slotProps:p={},slots:x={},TransitionProps:y,ownerState:w,...v}=t,C=h.useRef(null),N=Cl(C,a),S=h.useRef(null),T=Cl(S,f),k=h.useRef(T);Xa(()=>{k.current=T},[T]),h.useImperativeHandle(f,()=>S.current,[]);const _=Dbe(d,i),[E,A]=h.useState(_),[I,z]=h.useState(rT(s));h.useEffect(()=>{S.current&&S.current.forceUpdate()}),h.useEffect(()=>{s&&z(rT(s))},[s]),Xa(()=>{if(!I||!c)return;const Z=Y=>{A(Y.placement)};let R=[{name:"preventOverflow",options:{altBoundary:l}},{name:"flip",options:{altBoundary:l}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:Y})=>{Z(Y)}}];o!=null&&(R=R.concat(o)),u&&u.modifiers!=null&&(R=R.concat(u.modifiers));const Q=Tbe(I,C.current,{placement:_,...u,modifiers:R});return k.current(Q),()=>{Q.destroy(),k.current(null)}},[I,l,o,c,u,_]);const F={placement:E};y!==null&&(F.TransitionProps=y);const D=Mbe(t),M=x.root??"div",W=Co({elementType:M,externalSlotProps:p.root,externalForwardedProps:v,additionalProps:{role:"tooltip",ref:N},ownerState:t,className:D.root});return n.jsx(M,{...W,children:typeof r=="function"?r(F):r})}),Rbe=h.forwardRef(function(t,a){const{anchorEl:s,children:r,container:i,direction:l="ltr",disablePortal:o=!1,keepMounted:c=!1,modifiers:d,open:u,placement:f="bottom",popperOptions:p=Ibe,popperRef:x,style:y,transition:w=!1,slotProps:v={},slots:C={},...N}=t,[S,T]=h.useState(!0),k=()=>{T(!1)},_=()=>{T(!0)};if(!c&&!u&&(!w||S))return null;let E;if(i)E=i;else if(s){const z=rT(s);E=z&&Obe(z)?LE(z).body:LE(null).body}const A=!u&&c&&(!w||S)?"none":void 0,I=w?{in:u,onEnter:k,onExited:_}:void 0;return n.jsx(Lbe,{disablePortal:o,container:E,children:n.jsx($be,{anchorEl:s,direction:l,disablePortal:o,modifiers:d,ref:a,open:w?!S:u,placement:f,popperOptions:p,popperRef:x,slotProps:v,slots:C,...N,style:{position:"fixed",top:0,left:0,display:A,...y},TransitionProps:I,children:r})})}),zbe=an(Rbe,{name:"MuiPopper",slot:"Root"})({}),Fbe=h.forwardRef(function(t,a){const s=ix(),r=rd({props:t,name:"MuiPopper"}),{anchorEl:i,component:l,components:o,componentsProps:c,container:d,disablePortal:u,keepMounted:f,modifiers:p,open:x,placement:y,popperOptions:w,popperRef:v,transition:C,slots:N,slotProps:S,...T}=r,k=N?.root??o?.Root,_={anchorEl:i,container:d,disablePortal:u,keepMounted:f,modifiers:p,open:x,placement:y,popperOptions:w,popperRef:v,transition:C,...T};return n.jsx(zbe,{as:l,direction:s?"rtl":"ltr",slots:{root:k},slotProps:S??c,..._,ref:a})});function Ube(e){const{children:t,defer:a=!1,fallback:s=null}=e,[r,i]=h.useState(!1);return Xa(()=>{a||i(!0)},[a]),h.useEffect(()=>{a&&i(!0)},[a]),r?t:s}function S6(e){let t,a;const s=()=>{a=null,e(...t)};function r(...i){t=i,a||(a=requestAnimationFrame(s))}return r.clear=()=>{a&&(cancelAnimationFrame(a),a=null)},r}function Bbe(){const e=Gn(),t=$t(e,JW),a=$t(e,Ll);return t!==void 0?"polar":a!==void 0?"cartesian":"none"}const Hbe=["trigger","position","anchor","classes","children"],_6=()=>!1;function Gbe(e,t,a){return a?_6:e==="item"?nge:t==="polar"?vye:t==="cartesian"?lge:_6}const Wbe=an(Fbe,{name:"MuiChartsTooltip",slot:"Root"})(({theme:e})=>({pointerEvents:"none",zIndex:e.zIndex.modal}));function Vbe(e){const t=yi({props:e,name:"MuiChartsTooltipContainer"}),{trigger:a="axis",position:s,anchor:r="pointer",classes:i,children:l}=t,o=cn(t,Hbe),c=rP(),d=zN(i),u=gye(),f=yye(),p=h.useRef(null),x=tN(()=>({x:0,y:0})),y=Bbe(),w=Gn(),v=$t(w,gge),C=$t(w,Gbe(a,y,v)),S=$t(w,xx)==="keyboard"?"node":r,T=$t(w,a==="item"&&S==="node"?age:()=>null,s);h.useEffect(()=>{const I=c.current;if(I===null)return()=>{};if(T!==null){const D=S6(()=>{x.current={x:I.getBoundingClientRect().left+(T?.x??0),y:I.getBoundingClientRect().top+(T?.y??0)},p.current?.update()});return D(),()=>D.clear()}const z=S6((D,M)=>{x.current={x:D,y:M},p.current?.update()}),F=D=>{z(D.clientX,D.clientY)};return I.addEventListener("pointerdown",F),I.addEventListener("pointermove",F),I.addEventListener("pointerenter",F),()=>{I.removeEventListener("pointerdown",F),I.removeEventListener("pointermove",F),I.removeEventListener("pointerenter",F),z.clear()}},[c,x,T]);const k=h.useMemo(()=>({getBoundingClientRect:()=>({x:x.current.x,y:x.current.y,top:x.current.y,left:x.current.x,right:x.current.x,bottom:x.current.y,width:0,height:0,toJSON:()=>""})}),[x]),_=u?.pointerType==="mouse"||f,E=u?.pointerType==="touch"||!f,A=h.useMemo(()=>[{name:"offset",options:{offset:()=>E?[0,64]:[0,8]}},..._?[]:[{name:"flip",options:{fallbackPlacements:["top-end","top-start","bottom-end","bottom"]}}],{name:"preventOverflow",options:{altAxis:!0}}],[_,E]);return a==="none"?null:n.jsx(Ube,{children:C&&n.jsx(Wbe,Ve({},o,{className:d?.root,open:C,placement:o.placement??s??(_?"right-start":"top"),popperRef:p,anchorEl:k,modifiers:A,children:l}))})}function qbe(e){const{classes:t,trigger:a="axis"}=e,s=zN(t);return n.jsx(Vbe,Ve({},e,{classes:t,children:a==="axis"?n.jsx(jye,{classes:s}):n.jsx(mye,{classes:s})}))}const Ybe=e=>({type:"series",color:e.color,label:e.label,seriesId:e.seriesId,itemId:e.itemId});function Qbe(e){return Ra("MuiChartsLegend",e)}const Kbe=e=>{const{classes:t,direction:a}=e;return $a({root:["root",a],item:["item"],mark:["mark"],label:["label"],series:["series"]},Qbe,t)},A6=va("MuiChartsLegend",["root","item","series","mark","label","vertical","horizontal"]),Xbe=["slots","slotProps"],Zbe=["ownerState"],Jbe=(e,t,a,s)=>{function r(i,l){const o=yi({props:i,name:e}),c=typeof a.defaultProps=="function"?a.defaultProps(o):a.defaultProps??{},d=xu(c,o),u=d,{slots:f,slotProps:p}=u,x=cn(u,Xbe),y=kl(),w=a.classesResolver?.(d,y),v=f?.[t]??s,C=a.propagateSlots&&!f?.[t],N=Co({elementType:v,externalSlotProps:p?.[t],additionalProps:Ve({},x,{classes:w},C&&{slots:f,slotProps:p}),ownerState:{}}),S=cn(N,Zbe),T=Ve({},S);for(const k of a.omitProps??[])delete T[k];return n.jsx(v,Ve({},T,{ref:l}))}return h.forwardRef(r)};function eve(e){return Ra("MuiChartsLabel",e)}va("MuiChartsLabel",["root"]);const tve=e=>$a({root:["root"]},eve,e.classes),nve=["children","className","classes"],ave=zV("MuiChartsLabel",{classesResolver:tve},function(t,a){const{children:s,className:r,classes:i}=t,l=cn(t,nve);return n.jsx("span",Ve({className:Tt(i?.root,r),ref:a},l,{children:s}))}),sve=["direction","onItemClick","className","classes"],rve=an("ul",{name:"MuiChartsLegend",slot:"Root"})(({ownerState:e,theme:t})=>Ve({},t.typography.caption,{color:(t.vars||t).palette.text.primary,lineHeight:"100%",display:"flex",flexDirection:e.direction==="vertical"?"column":"row",alignItems:e.direction==="vertical"?void 0:"center",flexShrink:0,gap:t.spacing(2),listStyleType:"none",paddingInlineStart:0,marginBlock:t.spacing(1),marginInline:t.spacing(1),flexWrap:"wrap",li:{display:e.direction==="horizontal"?"inline-flex":void 0},[`button.${A6.series}`]:{background:"none",border:"none",padding:0,fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",letterSpacing:"inherit",color:"inherit"},[`& .${A6.series}`]:{display:e.direction==="vertical"?"flex":"inline-flex",alignItems:"center",gap:t.spacing(1)},gridArea:"legend"})),ive=Jbe("MuiChartsLegend","legend",{defaultProps:{direction:"horizontal"},omitProps:["position"],classesResolver:Kbe},h.forwardRef(function(t,a){const s=Spe(),{onItemClick:r,className:i,classes:l}=t,o=cn(t,sve);if(s.items.length===0)return null;const c=r?"button":"div";return n.jsx(rve,Ve({className:Tt(l?.root,i),ref:a},o,{ownerState:t,children:s.items.map((d,u)=>n.jsx("li",{className:l?.item,"data-series":d.id,children:n.jsxs(c,{className:l?.series,role:r?"button":void 0,type:r?"button":void 0,onClick:r?(f=>r(f,Ybe(d),u)):void 0,children:[n.jsx(jv,{className:l?.mark,color:d.color,type:d.markType}),n.jsx(ave,{className:l?.label,children:d.label})]})},d.id))}))}));function lve(e){return Ra("MuiChartsAxisHighlight",e)}va("MuiChartsAxisHighlight",["root"]);const Sv=an("path",{name:"MuiChartsAxisHighlight",slot:"Root"})(({theme:e})=>({pointerEvents:"none",variants:[{props:{axisHighlight:"band"},style:Ve({fill:"white",fillOpacity:.1},e.applyStyles("light",{fill:"gray"}))},{props:{axisHighlight:"line"},style:Ve({strokeDasharray:"5 2",stroke:"#ffffff"},e.applyStyles("light",{stroke:"#000000"}))}]}));function ove(e){const{type:t,classes:a}=e,{left:s,width:r}=vi(),i=Gn(),l=$t(i,xge),o=$t(i,Gs);return l.length===0?null:l.map(({axisId:c,value:d})=>{const f=o.axis[c].scale,p=Wf(f),x=t==="band"&&d!==null&&ms(f);return n.jsxs(h.Fragment,{children:[x&&f(d)!==void 0&&n.jsx(Sv,{d:`M ${s} ${f(d)-(f.step()-f.bandwidth())/2} l 0 ${f.step()} l ${r} 0 l 0 ${-f.step()} Z`,className:a.root,ownerState:{axisHighlight:"band"}}),t==="line"&&d!==null&&n.jsx(Sv,{d:`M ${s} ${p(d)} L ${s+r} ${p(d)}`,className:a.root,ownerState:{axisHighlight:"line"}})]},`${c}-${d}`)})}function cve(e){const{type:t,classes:a}=e,{top:s,height:r}=vi(),i=Gn(),l=$t(i,pge),o=$t(i,Hs);return l.length===0?null:l.map(({axisId:c,value:d})=>{const f=o.axis[c].scale,p=Wf(f),x=t==="band"&&d!==null&&ms(f);return n.jsxs(h.Fragment,{children:[x&&f(d)!==void 0&&n.jsx(Sv,{d:`M ${f(d)-(f.step()-f.bandwidth())/2} ${s} l ${f.step()} 0 l 0 ${r} l ${-f.step()} 0 Z`,className:a.root,ownerState:{axisHighlight:"band"}}),t==="line"&&d!==null&&n.jsx(Sv,{d:`M ${p(d)} ${s} L ${p(d)} ${s+r}`,className:a.root,ownerState:{axisHighlight:"line"}})]},`${c}-${d}`)})}const dve=()=>$a({root:["root"]},lve);function uve(e){const{x:t,y:a}=e,s=dve();return n.jsxs(h.Fragment,{children:[t&&t!=="none"&&n.jsx(cve,{type:t,classes:s}),a&&a!=="none"&&n.jsx(ove,{type:a,classes:s})]})}function mve(e){const{id:t,offset:a}=e,{left:s,top:r,width:i,height:l}=vi(),o=Ve({top:0,right:0,bottom:0,left:0},a);return n.jsx("clipPath",{id:t,children:n.jsx("rect",{x:s-o.left,y:r-o.top,width:i+o.left+o.right,height:l+o.top+o.bottom})})}const fve=parseInt(h.version,10),hve=["x","y","id","classes","color","shape"];function gve(e){return Ra("MuiHighlightElement",e)}va("MuiHighlightElement",["root"]);const pve=e=>{const{classes:t,id:a}=e,s={root:["root",`series-${a}`]};return $a(s,gve,t)};function xve(e){const{x:t,y:a,color:s,shape:r}=e,i=cn(e,hve),l=pve(e),o=r==="circle"?"circle":"path",c=r==="circle"?{cx:0,cy:0,r:i.r===void 0?5:i.r}:{d:JL(kW[xV(r)])()},d=fve>18?{transformOrigin:`${t} ${a}`}:{"transform-origin":`${t} ${a}`};return n.jsx(o,Ve({pointerEvents:"none",className:l.root,transform:`translate(${t} ${a})`,fill:s},d,c,i))}const yve=["slots","slotProps"];function bve(e){const{slots:t,slotProps:a}=e,s=cn(e,yve),r=Nx(),{xAxis:i,xAxisIds:l}=dr(),{yAxis:o,yAxisIds:c}=ur(),{instance:d}=Rr(),u=Gn(),f=$t(u,oW);if(f.length===0||r===void 0)return null;const{series:p,stackingGroups:x}=r,y=l[0],w=c[0],v=t?.lineHighlight??xve;return n.jsx("g",Ve({},s,{children:f.flatMap(({dataIndex:C,axisId:N})=>x.flatMap(({ids:S})=>S.flatMap(T=>{const{xAxisId:k=y,yAxisId:_=w,stackedData:E,data:A,disableHighlight:I,shape:z="circle"}=p[T];if(I||A[C]==null||N!==k)return null;const F=Wf(i[k].scale),D=o[_].scale,M=i[k].data;if(M===void 0)throw new Error(`MUI X Charts: ${k===aN?"The first `xAxis`":`The x-axis with id "${k}"`} should have data property to be able to display a line plot.`);const W=F(M[C]),Z=D(E[C][1]);if(!d.isPointInside(W,Z))return null;const R=dP(p[T],i[k],o[_]);return n.jsx(v,Ve({id:T,color:R(C),x:W,y:Z,shape:z},a?.lineHighlight),`${T}`)})))}))}function vve(e){return Ra("MuiChartsGrid",e)}const E6=va("MuiChartsGrid",["root","line","horizontalLine","verticalLine"]),wve=an("g",{name:"MuiChartsGrid",slot:"Root",overridesResolver:(e,t)=>[{[`&.${E6.verticalLine}`]:t.verticalLine},{[`&.${E6.horizontalLine}`]:t.horizontalLine},t.root]})({}),tq=an("line",{name:"MuiChartsGrid",slot:"Line"})(({theme:e})=>({stroke:(e.vars||e).palette.divider,shapeRendering:"crispEdges",strokeWidth:1}));function Nve(e){const{instance:t}=Rr(),{axis:a,start:s,end:r,classes:i}=e,{scale:l,tickNumber:o,tickInterval:c}=a,d=$N({scale:l,tickNumber:o,tickInterval:c,direction:"x"});return n.jsx(h.Fragment,{children:d.map(({value:u,offset:f})=>t.isXInside(f)?n.jsx(tq,{y1:s,y2:r,x1:f,x2:f,className:i.verticalLine},`vertical-${u?.getTime?.()??u}`):null)})}function jve(e){const{instance:t}=Rr(),{axis:a,start:s,end:r,classes:i}=e,{scale:l,tickNumber:o,tickInterval:c}=a,d=$N({scale:l,tickNumber:o,tickInterval:c,direction:"y"});return n.jsx(h.Fragment,{children:d.map(({value:u,offset:f})=>t.isYInside(f)?n.jsx(tq,{y1:f,y2:f,x1:s,x2:r,className:i.horizontalLine},`horizontal-${u?.getTime?.()??u}`):null)})}const Cve=["vertical","horizontal"],Sve=({classes:e})=>$a({root:["root"],verticalLine:["line","verticalLine"],horizontalLine:["line","horizontalLine"]},vve,e);function _ve(e){const t=yi({props:e,name:"MuiChartsGrid"}),a=vi(),{vertical:s,horizontal:r}=t,i=cn(t,Cve),{xAxis:l,xAxisIds:o}=dr(),{yAxis:c,yAxisIds:d}=ur(),u=Sve(t),f=c[d[0]],p=l[o[0]];return n.jsxs(wve,Ve({},i,{className:u.root,children:[s&&n.jsx(Nve,{axis:p,start:a.top,end:a.height+a.top,classes:u}),r&&n.jsx(jve,{axis:f,start:a.left,end:a.width+a.left,classes:u})]}))}const Ave=["message"],Eve=an("text")(({theme:e})=>Ve({},e.typography.body2,{stroke:"none",fill:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges",textAnchor:"middle",dominantBaseline:"middle"}));function Tve(e){const{message:t}=e,a=cn(e,Ave),{top:s,left:r,height:i,width:l}=vi(),{localeText:o}=dV();return n.jsx(Eve,Ve({x:r+l/2,y:s+i/2},a,{children:t??o.loading}))}const kve=["message"],Lve=an("text")(({theme:e})=>Ve({},e.typography.body2,{stroke:"none",fill:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges",textAnchor:"middle",dominantBaseline:"middle"}));function Pve(e){const{message:t}=e,a=cn(e,kve),{top:s,left:r,height:i,width:l}=vi(),{localeText:o}=dV();return n.jsx(Lve,Ve({x:r+l/2,y:s+i/2},a,{children:t??o.noData}))}function Dve(){const e=PN();return Object.values(e).every(t=>{if(!t)return!0;const{series:a,seriesOrder:s}=t;return s.every(r=>{const i=a[r];return i.type==="sankey"?i.data.links.length===0:i.data.length===0})})}function Ove(e){const t=Dve();if(e.loading){const a=e.slots?.loadingOverlay??Tve;return n.jsx(a,Ve({},e.slotProps?.loadingOverlay))}if(t){const a=e.slots?.noDataOverlay??Pve;return n.jsx(a,Ve({},e.slotProps?.noDataOverlay))}return null}const Mve=[bx,yx,hx,Hf,vx,NN],Ive=["xAxis","yAxis","series","width","height","margin","colors","dataset","sx","onAreaClick","onLineClick","onMarkClick","axisHighlight","disableLineItemHighlight","hideLegend","grid","children","slots","slotProps","skipAnimation","loading","highlightedItem","onHighlightChange","className","showToolbar","brushConfig"],$ve=e=>{const{xAxis:t,yAxis:a,series:s,width:r,height:i,margin:l,colors:o,dataset:c,sx:d,onAreaClick:u,onLineClick:f,onMarkClick:p,axisHighlight:x,disableLineItemHighlight:y,grid:w,children:v,slots:C,slotProps:N,skipAnimation:S,loading:T,highlightedItem:k,onHighlightChange:_,className:E,brushConfig:A}=e,I=cn(e,Ive),F=`${Zw()}-clip-path`,D=h.useMemo(()=>s.map(je=>Ve({disableHighlight:!!y,type:"line"},je)),[y,s]),M=Ve({},I,{series:D,width:r,height:i,margin:l,colors:o,dataset:c,xAxis:t??[{id:aN,scaleType:"point",data:Array.from({length:Math.max(...s.map(je=>(je.data??c??[]).length))},(je,Oe)=>Oe)}],yAxis:a,highlightedItem:k,onHighlightChange:_,disableAxisListener:N?.tooltip?.trigger!=="axis"&&x?.x==="none"&&x?.y==="none",className:E,skipAnimation:S,brushConfig:A,plugins:Mve}),W={vertical:w?.vertical,horizontal:w?.horizontal},Z={clipPath:`url(#${F})`},R={id:F},Q={slots:C,slotProps:N,onItemClick:u},Y={slots:C,slotProps:N,onItemClick:f},oe={slots:C,slotProps:N,onItemClick:p,skipAnimation:S},re={slots:C,slotProps:N,loading:T},ee={slots:C,slotProps:N},H=Ve({x:"line"},x),ye={slots:C,slotProps:N},te={slots:C,slotProps:N};return{chartsWrapperProps:{sx:d,legendPosition:e.slotProps?.legend?.position,legendDirection:e.slotProps?.legend?.direction,hideLegend:e.hideLegend??!1},chartContainerProps:M,gridProps:W,clipPathProps:R,clipPathGroupProps:Z,areaPlotProps:Q,linePlotProps:Y,markPlotProps:oe,overlayProps:re,chartsAxisProps:ee,axisHighlightProps:H,lineHighlightPlotProps:ye,legendProps:te,children:v}};function Rve(e,t,a,s,r,i,l,o,c,d,u,f=1/0,p=1){const x=s.copy(),y=r.copy();x.range([0,1]),y.range([0,1]);const w=function(A){const I=x(a[A].x),z=y(a[A].y);return I>=i&&I<=l&&z>=o&&z<=c},v=s.range()[1]-s.range()[0],C=r.range()[1]-r.range()[0],N=v*v,S=C*C;function T(E,A){return N*E*E+S*A*A}const k=x(T6(s,d,E=>a[E]?.x)),_=y(T6(r,u,E=>a[E]?.y));return e.neighbors(k,_,p,f!=null?f*f:1/0,w,T)}function T6(e,t,a){if(ms(e)){const s=e.bandwidth()===0?Math.floor((t-Math.min(...e.range())+e.step()/2)/e.step()):Math.floor((t-Math.min(...e.range()))/e.step());return a(s)}return e.invert(t)}const UN=({svgRef:e,params:t,store:a,instance:s})=>{const{disableVoronoi:r,voronoiMaxRadius:i,onItemClick:l}=t,o=$t(a,cr),{axis:c,axisIds:d}=$t(a,Hs),{axis:u,axisIds:f}=$t(a,Gs),p=$t(a,FG),{series:x,seriesOrder:y}=$t(a,da)?.scatter??{},w=$t(a,p?Uhe:Bhe),v=d[0],C=f[0];Xa(()=>{a.set("voronoi",{isVoronoiEnabled:!r})},[a,r]),h.useEffect(()=>{if(e.current===null||r)return;const T=e.current;function k(W){const Z=hp(T,W);if(!s.isPointInside(Z.x,Z.y))return"outside-chart";let R;for(const Q of y??[]){const Y=(x??{})[Q],oe=w.get(Q);if(!oe)continue;const re=Y.xAxisId??v,ee=Y.yAxisId??C,H=Q$(a.getSnapshot(),re),ye=Q$(a.getSnapshot(),ee),te=i==="item"?Y.markerSize:i,ve=(H?.start??0)/100,je=(H?.end??100)/100,Oe=(ye?.start??0)/100,$e=(ye?.end??100)/100,pe=c[re].scale,Me=u[ee].scale,Le=Rve(oe,o,Y.data,pe,Me,ve,je,Oe,$e,Z.x,Z.y,te)[0];if(Le===void 0)continue;const he=Y.data[Le],ae=pe(he.x),Ae=Me(he.y),ge=(ae-Z.x)**2+(Ae-Z.y)**2;(R===void 0||ge<R.distanceSq)&&(R={dataIndex:Le,seriesId:Q,distanceSq:ge})}return R===void 0?"no-point-found":{seriesId:R.seriesId,dataIndex:R.dataIndex}}const _=s.addInteractionListener("moveEnd",W=>{W.detail.activeGestures.pan||(s.cleanInteraction?.(),s.clearHighlight?.())}),E=s.addInteractionListener("panEnd",W=>{W.detail.activeGestures.move||(s.cleanInteraction?.(),s.clearHighlight?.())}),A=s.addInteractionListener("quickPressEnd",W=>{!W.detail.activeGestures.move&&!W.detail.activeGestures.pan&&(s.cleanInteraction?.(),s.clearHighlight?.())}),I=W=>{const Z=k(W.detail.srcEvent);if(Z==="outside-chart"){s.cleanInteraction?.(),s.clearHighlight?.();return}if(Z==="outside-voronoi-max-radius"||Z==="no-point-found"){s.removeItemInteraction?.(),s.clearHighlight?.();return}const{seriesId:R,dataIndex:Q}=Z;s.setItemInteraction?.({type:"scatter",seriesId:R,dataIndex:Q},{interaction:"pointer"}),s.setHighlight?.({seriesId:R,dataIndex:Q})},z=s.addInteractionListener("tap",W=>{const Z=k(W.detail.srcEvent);if(typeof Z!="string"&&l){const{seriesId:R,dataIndex:Q}=Z;l(W.detail.srcEvent,{type:"scatter",seriesId:R,dataIndex:Q})}}),F=s.addInteractionListener("move",I),D=s.addInteractionListener("pan",I),M=s.addInteractionListener("quickPress",I);return()=>{z.cleanup(),F.cleanup(),_.cleanup(),D.cleanup(),E.cleanup(),M.cleanup(),A.cleanup()}},[e,u,c,i,l,r,o,s,y,x,w,v,C,a]);const N=os(()=>{a.set("voronoi",{isVoronoiEnabled:!0})}),S=os(()=>{a.set("voronoi",{isVoronoiEnabled:!1})});return{instance:{enableVoronoi:N,disableVoronoi:S}}};UN.getDefaultizedParams=({params:e})=>Ve({},e,{disableVoronoi:e.disableVoronoi??!e.series.some(t=>t.type==="scatter")});UN.getInitialState=e=>({voronoi:{isVoronoiEnabled:!e.disableVoronoi}});UN.params={disableVoronoi:!0,voronoiMaxRadius:!0,onItemClick:!0};const nq=[bx,yx,hx,Hf,vx,UN,NN],zve=["width","height","margin","children","series","colors","dataset","desc","onAxisClick","highlightedAxis","onHighlightedAxisChange","disableVoronoi","voronoiMaxRadius","onItemClick","disableAxisListener","highlightedItem","onHighlightChange","sx","title","xAxis","yAxis","zAxis","rotationAxis","radiusAxis","skipAnimation","seriesConfig","plugins","localeText","slots","slotProps","experimentalFeatures","enableKeyboardNavigation","brushConfig"],Fve=(e,t)=>{const a=e,{width:s,height:r,margin:i,children:l,series:o,colors:c,dataset:d,desc:u,onAxisClick:f,highlightedAxis:p,onHighlightedAxisChange:x,disableVoronoi:y,voronoiMaxRadius:w,onItemClick:v,disableAxisListener:C,highlightedItem:N,onHighlightChange:S,sx:T,title:k,xAxis:_,yAxis:E,zAxis:A,rotationAxis:I,radiusAxis:z,skipAnimation:F,seriesConfig:D,plugins:M,localeText:W,slots:Z,slotProps:R,experimentalFeatures:Q,enableKeyboardNavigation:Y,brushConfig:oe}=a,re=cn(a,zve),ee=Ve({title:k,desc:u,sx:T,ref:t},re);return{chartDataProviderProps:{margin:i,series:o,colors:c,dataset:d,disableAxisListener:C,highlightedItem:N,onHighlightChange:S,onAxisClick:f,highlightedAxis:p,onHighlightedAxisChange:x,disableVoronoi:y,voronoiMaxRadius:w,onItemClick:v,xAxis:_,yAxis:E,zAxis:A,rotationAxis:I,radiusAxis:z,skipAnimation:F,width:s,height:r,localeText:W,seriesConfig:D,experimentalFeatures:Q,enableKeyboardNavigation:Y,brushConfig:oe,plugins:M??nq,slots:Z,slotProps:R},chartsSurfaceProps:ee,children:l}};function k6(e){try{return e.matches(":focus-visible")}catch{}return!1}class _v{static create(){return new _v}static use(){const t=tN(_v.create).current,[a,s]=h.useState(!1);return t.shouldMount=a,t.setShouldMount=s,h.useEffect(t.mountEffect,[a]),t}constructor(){this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=Bve(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}mountEffect=()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())};start(...t){this.mount().then(()=>this.ref.current?.start(...t))}stop(...t){this.mount().then(()=>this.ref.current?.stop(...t))}pulsate(...t){this.mount().then(()=>this.ref.current?.pulsate(...t))}}function Uve(){return _v.use()}function Bve(){let e,t;const a=new Promise((s,r)=>{e=s,t=r});return a.resolve=e,a.reject=t,a}class CP{static create(){return new CP}currentId=null;start(t,a){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,a()},t)}clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)};disposeEffect=()=>this.clear}function Hve(){const e=tN(CP.create).current;return D9(e.disposeEffect),e}function Gve(e){const{className:t,classes:a,pulsate:s=!1,rippleX:r,rippleY:i,rippleSize:l,in:o,onExited:c,timeout:d}=e,[u,f]=h.useState(!1),p=Tt(t,a.ripple,a.rippleVisible,s&&a.ripplePulsate),x={width:l,height:l,top:-(l/2)+i,left:-(l/2)+r},y=Tt(a.child,u&&a.childLeaving,s&&a.childPulsate);return!o&&!u&&f(!0),h.useEffect(()=>{if(!o&&c!=null){const w=setTimeout(c,d);return()=>{clearTimeout(w)}}},[c,o,d]),n.jsx("span",{className:p,style:x,children:n.jsx("span",{className:y})})}const ni=va("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),iT=550,Wve=80,Vve=rx`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,qve=rx`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,Yve=rx`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,Qve=an("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Kve=an(Gve,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${ni.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${Vve};
    animation-duration: ${iT}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  &.${ni.ripplePulsate} {
    animation-duration: ${({theme:e})=>e.transitions.duration.shorter}ms;
  }

  & .${ni.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${ni.childLeaving} {
    opacity: 0;
    animation-name: ${qve};
    animation-duration: ${iT}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  & .${ni.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${Yve};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,Xve=h.forwardRef(function(t,a){const s=rd({props:t,name:"MuiTouchRipple"}),{center:r=!1,classes:i={},className:l,...o}=s,[c,d]=h.useState([]),u=h.useRef(0),f=h.useRef(null);h.useEffect(()=>{f.current&&(f.current(),f.current=null)},[c]);const p=h.useRef(!1),x=Hve(),y=h.useRef(null),w=h.useRef(null),v=h.useCallback(T=>{const{pulsate:k,rippleX:_,rippleY:E,rippleSize:A,cb:I}=T;d(z=>[...z,n.jsx(Kve,{classes:{ripple:Tt(i.ripple,ni.ripple),rippleVisible:Tt(i.rippleVisible,ni.rippleVisible),ripplePulsate:Tt(i.ripplePulsate,ni.ripplePulsate),child:Tt(i.child,ni.child),childLeaving:Tt(i.childLeaving,ni.childLeaving),childPulsate:Tt(i.childPulsate,ni.childPulsate)},timeout:iT,pulsate:k,rippleX:_,rippleY:E,rippleSize:A},u.current)]),u.current+=1,f.current=I},[i]),C=h.useCallback((T={},k={},_=()=>{})=>{const{pulsate:E=!1,center:A=r||k.pulsate,fakeElement:I=!1}=k;if(T?.type==="mousedown"&&p.current){p.current=!1;return}T?.type==="touchstart"&&(p.current=!0);const z=I?null:w.current,F=z?z.getBoundingClientRect():{width:0,height:0,left:0,top:0};let D,M,W;if(A||T===void 0||T.clientX===0&&T.clientY===0||!T.clientX&&!T.touches)D=Math.round(F.width/2),M=Math.round(F.height/2);else{const{clientX:Z,clientY:R}=T.touches&&T.touches.length>0?T.touches[0]:T;D=Math.round(Z-F.left),M=Math.round(R-F.top)}if(A)W=Math.sqrt((2*F.width**2+F.height**2)/3),W%2===0&&(W+=1);else{const Z=Math.max(Math.abs((z?z.clientWidth:0)-D),D)*2+2,R=Math.max(Math.abs((z?z.clientHeight:0)-M),M)*2+2;W=Math.sqrt(Z**2+R**2)}T?.touches?y.current===null&&(y.current=()=>{v({pulsate:E,rippleX:D,rippleY:M,rippleSize:W,cb:_})},x.start(Wve,()=>{y.current&&(y.current(),y.current=null)})):v({pulsate:E,rippleX:D,rippleY:M,rippleSize:W,cb:_})},[r,v,x]),N=h.useCallback(()=>{C({},{pulsate:!0})},[C]),S=h.useCallback((T,k)=>{if(x.clear(),T?.type==="touchend"&&y.current){y.current(),y.current=null,x.start(0,()=>{S(T,k)});return}y.current=null,d(_=>_.length>0?_.slice(1):_),f.current=k},[x]);return h.useImperativeHandle(a,()=>({pulsate:N,start:C,stop:S}),[N,C,S]),n.jsx(Qve,{className:Tt(ni.root,i.root,l),ref:w,...o,children:n.jsx(iL,{component:null,exit:!0,children:c})})});function Zve(e){return Ra("MuiButtonBase",e)}const Jve=va("MuiButtonBase",["root","disabled","focusVisible"]),ewe=e=>{const{disabled:t,focusVisible:a,focusVisibleClassName:s,classes:r}=e,l=$a({root:["root",t&&"disabled",a&&"focusVisible"]},Zve,r);return a&&s&&(l.root+=` ${s}`),l},twe=an("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Jve.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),aq=h.forwardRef(function(t,a){const s=rd({props:t,name:"MuiButtonBase"}),{action:r,centerRipple:i=!1,children:l,className:o,component:c="button",disabled:d=!1,disableRipple:u=!1,disableTouchRipple:f=!1,focusRipple:p=!1,focusVisibleClassName:x,LinkComponent:y="a",onBlur:w,onClick:v,onContextMenu:C,onDragLeave:N,onFocus:S,onFocusVisible:T,onKeyDown:k,onKeyUp:_,onMouseDown:E,onMouseLeave:A,onMouseUp:I,onTouchEnd:z,onTouchMove:F,onTouchStart:D,tabIndex:M=0,TouchRippleProps:W,touchRippleRef:Z,type:R,...Q}=s,Y=h.useRef(null),oe=Uve(),re=Cl(oe.ref,Z),[ee,H]=h.useState(!1);d&&ee&&H(!1),h.useImperativeHandle(r,()=>({focusVisible:()=>{H(!0),Y.current.focus()}}),[]);const ye=oe.shouldMount&&!u&&!d;h.useEffect(()=>{ee&&p&&!u&&oe.pulsate()},[u,p,ee,oe]);const te=Jl(oe,"start",E,f),ve=Jl(oe,"stop",C,f),je=Jl(oe,"stop",N,f),Oe=Jl(oe,"stop",I,f),$e=Jl(oe,"stop",fe=>{ee&&fe.preventDefault(),A&&A(fe)},f),pe=Jl(oe,"start",D,f),Me=Jl(oe,"stop",z,f),Le=Jl(oe,"stop",F,f),he=Jl(oe,"stop",fe=>{k6(fe.target)||H(!1),w&&w(fe)},!1),ae=os(fe=>{Y.current||(Y.current=fe.currentTarget),k6(fe.target)&&(H(!0),T&&T(fe)),S&&S(fe)}),Ae=()=>{const fe=Y.current;return c&&c!=="button"&&!(fe.tagName==="A"&&fe.href)},ge=os(fe=>{p&&!fe.repeat&&ee&&fe.key===" "&&oe.stop(fe,()=>{oe.start(fe)}),fe.target===fe.currentTarget&&Ae()&&fe.key===" "&&fe.preventDefault(),k&&k(fe),fe.target===fe.currentTarget&&Ae()&&fe.key==="Enter"&&!d&&(fe.preventDefault(),v&&v(fe))}),Be=os(fe=>{p&&fe.key===" "&&ee&&!fe.defaultPrevented&&oe.stop(fe,()=>{oe.pulsate(fe)}),_&&_(fe),v&&fe.target===fe.currentTarget&&Ae()&&fe.key===" "&&!fe.defaultPrevented&&v(fe)});let qe=c;qe==="button"&&(Q.href||Q.to)&&(qe=y);const Te={};qe==="button"?(Te.type=R===void 0?"button":R,Te.disabled=d):(!Q.href&&!Q.to&&(Te.role="button"),d&&(Te["aria-disabled"]=d));const He=Cl(a,Y),Ye={...s,centerRipple:i,component:c,disabled:d,disableRipple:u,disableTouchRipple:f,focusRipple:p,tabIndex:M,focusVisible:ee},B=ewe(Ye);return n.jsxs(twe,{as:qe,className:Tt(B.root,o),ownerState:Ye,onBlur:he,onClick:v,onContextMenu:ve,onFocus:ae,onKeyDown:ge,onKeyUp:Be,onMouseDown:te,onMouseLeave:$e,onMouseUp:Oe,onDragLeave:je,onTouchEnd:Me,onTouchMove:Le,onTouchStart:pe,ref:He,tabIndex:d?-1:M,type:R,...Te,...Q,children:[l,ye?n.jsx(Xve,{ref:re,center:i,...W}):null]})});function Jl(e,t,a,s=!1){return os(r=>(a&&a(r),s||e[t](r),!0))}function nwe(e){return Ra("MuiIconButton",e)}const L6=va("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),awe=e=>{const{classes:t,disabled:a,color:s,edge:r,size:i,loading:l}=e,o={root:["root",l&&"loading",a&&"disabled",s!=="default"&&`color${Un(s)}`,r&&`edge${Un(r)}`,`size${Un(i)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return $a(o,nwe,t)},swe=an(aq,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.loading&&t.loading,a.color!=="default"&&t[`color${Un(a.color)}`],a.edge&&t[`edge${Un(a.edge)}`],t[`size${Un(a.size)}`]]}})(yu(({theme:e})=>({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),variants:[{props:t=>!t.disableRipple,style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),yu(({theme:e})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(e.palette).filter(ip()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette).filter(ip()).map(([t])=>({props:{color:t},style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:e.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:e.typography.pxToRem(28)}}],[`&.${L6.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled},[`&.${L6.loading}`]:{color:"transparent"}}))),rwe=an("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(e.vars||e).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),iwe=h.forwardRef(function(t,a){const s=rd({props:t,name:"MuiIconButton"}),{edge:r=!1,children:i,className:l,color:o="default",disabled:c=!1,disableFocusRipple:d=!1,size:u="medium",id:f,loading:p=null,loadingIndicator:x,...y}=s,w=Zw(f),v=x??n.jsx(lL,{"aria-labelledby":w,color:"inherit",size:16}),C={...s,edge:r,color:o,disabled:c,disableFocusRipple:d,loading:p,loadingIndicator:v,size:u},N=awe(C);return n.jsxs(swe,{id:p?w:f,className:Tt(N.root,l),centerRipple:!0,focusRipple:!d,disabled:c||p,ref:a,...y,ownerState:C,children:[typeof p=="boolean"&&n.jsx("span",{className:N.loadingWrapper,style:{display:"contents"},children:n.jsx(rwe,{className:N.loadingIndicator,ownerState:C,children:p&&v})}),i]})});function lwe(e){return Ra("MuiButton",e)}const Ld=va("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),owe=h.createContext({}),cwe=h.createContext(void 0),dwe=e=>{const{color:t,disableElevation:a,fullWidth:s,size:r,variant:i,loading:l,loadingPosition:o,classes:c}=e,d={root:["root",l&&"loading",i,`${i}${Un(t)}`,`size${Un(r)}`,`${i}Size${Un(r)}`,`color${Un(t)}`,a&&"disableElevation",s&&"fullWidth",l&&`loadingPosition${Un(o)}`],startIcon:["icon","startIcon",`iconSize${Un(r)}`],endIcon:["icon","endIcon",`iconSize${Un(r)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},u=$a(d,lwe,c);return{...c,...u}},sq=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],uwe=an(aq,{shouldForwardProp:e=>N9(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[a.variant],t[`${a.variant}${Un(a.color)}`],t[`size${Un(a.size)}`],t[`${a.variant}Size${Un(a.size)}`],a.color==="inherit"&&t.colorInherit,a.disableElevation&&t.disableElevation,a.fullWidth&&t.fullWidth,a.loading&&t.loading]}})(yu(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],a=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return{...e.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${Ld.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(e.vars||e).shadows[2],"&:hover":{boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2]}},"&:active":{boxShadow:(e.vars||e).shadows[8]},[`&.${Ld.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},[`&.${Ld.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${Ld.disabled}`]:{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(e.palette).filter(ip()).map(([s])=>({props:{color:s},style:{"--variant-textColor":(e.vars||e).palette[s].main,"--variant-outlinedColor":(e.vars||e).palette[s].main,"--variant-outlinedBorder":e.alpha((e.vars||e).palette[s].main,.5),"--variant-containedColor":(e.vars||e).palette[s].contrastText,"--variant-containedBg":(e.vars||e).palette[s].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(e.vars||e).palette[s].dark,"--variant-textBg":e.alpha((e.vars||e).palette[s].main,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBorder":(e.vars||e).palette[s].main,"--variant-outlinedBg":e.alpha((e.vars||e).palette[s].main,(e.vars||e).palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedBg:t,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedHoverBg:a,"--variant-textBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${Ld.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${Ld.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),[`&.${Ld.loading}`]:{color:"transparent"}}}]}})),mwe=an("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.startIcon,a.loading&&t.startIconLoadingStart,t[`iconSize${Un(a.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...sq]})),fwe=an("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.endIcon,a.loading&&t.endIconLoadingEnd,t[`iconSize${Un(a.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...sq]})),hwe=an("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(e.vars||e).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),P6=an("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),gwe=h.forwardRef(function(t,a){const s=h.useContext(owe),r=h.useContext(cwe),i=xu(s,t),l=rd({props:i,name:"MuiButton"}),{children:o,color:c="primary",component:d="button",className:u,disabled:f=!1,disableElevation:p=!1,disableFocusRipple:x=!1,endIcon:y,focusVisibleClassName:w,fullWidth:v=!1,id:C,loading:N=null,loadingIndicator:S,loadingPosition:T="center",size:k="medium",startIcon:_,type:E,variant:A="text",...I}=l,z=Zw(C),F=S??n.jsx(lL,{"aria-labelledby":z,color:"inherit",size:16}),D={...l,color:c,component:d,disabled:f,disableElevation:p,disableFocusRipple:x,fullWidth:v,loading:N,loadingIndicator:F,loadingPosition:T,size:k,type:E,variant:A},M=dwe(D),W=(_||N&&T==="start")&&n.jsx(mwe,{className:M.startIcon,ownerState:D,children:_||n.jsx(P6,{className:M.loadingIconPlaceholder,ownerState:D})}),Z=(y||N&&T==="end")&&n.jsx(fwe,{className:M.endIcon,ownerState:D,children:y||n.jsx(P6,{className:M.loadingIconPlaceholder,ownerState:D})}),R=r||"",Q=typeof N=="boolean"?n.jsx("span",{className:M.loadingWrapper,style:{display:"contents"},children:N&&n.jsx(hwe,{className:M.loadingIndicator,ownerState:D,children:F})}):null;return n.jsxs(uwe,{ownerState:D,className:Tt(s.className,M.root,u,R),component:d,disabled:f||N,focusRipple:!x,focusVisibleClassName:Tt(M.focusVisible,w),ref:a,type:E,id:N?z:C,...I,classes:M,children:[W,T!=="end"&&Q,o,T==="end"&&Q,Z]})}),pwe={baseButton:gwe,baseIconButton:iwe},xwe={},ywe=Ve({},pwe,xwe),bwe=h.createContext(null);function vwe(e){const{slots:t,slotProps:a={},defaultSlots:s,children:r}=e,i=h.useMemo(()=>({slots:Ve({},s,t),slotProps:a}),[s,t,a]);return n.jsx(bwe.Provider,{value:i,children:r})}const wwe=["children","localeText","plugins","seriesConfig","slots","slotProps"],Nwe=e=>{const t=yi({props:e,name:"MuiChartDataProvider"}),{children:a,localeText:s,plugins:r=nq,seriesConfig:i,slots:l,slotProps:o}=t,c=cn(t,wwe),d=kl(),u={plugins:r,seriesConfig:i,pluginParams:Ve({theme:d.palette.mode},c)};return{children:a,localeText:s,chartProviderProps:u,slots:l,slotProps:o}};function jwe(e){const{children:t,localeText:a,chartProviderProps:s,slots:r,slotProps:i}=Nwe(e);return n.jsx(kxe,Ve({},s,{children:n.jsx(Vpe,{localeText:a,children:n.jsx(vwe,{slots:r,slotProps:i,defaultSlots:ywe,children:t})})}))}function D6(e){const{isReversed:t,gradientId:a,size:s,direction:r,scale:i,colorMap:l}=e;return s<=0?null:n.jsx("linearGradient",{id:a,x1:"0",x2:"0",y1:"0",y2:"0",[`${r}${t?1:2}`]:`${s}px`,gradientUnits:"userSpaceOnUse",children:l.thresholds.map((o,c)=>{const d=i(o);if(d===void 0)return null;const u=t?1-d/s:d/s;return Number.isNaN(u)?null:n.jsxs(h.Fragment,{children:[n.jsx("stop",{offset:u,stopColor:l.colors[c],stopOpacity:1}),n.jsx("stop",{offset:u,stopColor:l.colors[c+1],stopOpacity:1})]},o.toString()+c)})})}const Cwe=10;function O6(e){const{gradientUnits:t,isReversed:a,gradientId:s,size:r,direction:i,scale:l,colorScale:o,colorMap:c}=e,d=[c.min??0,c.max??100],u=d.map(l).filter(y=>y!==void 0);if(u.length!==2)return null;const f=typeof d[0]=="number"?gf(d[0],d[1]):NL(d[0],d[1]),p=Math.round((Math.max(...u)-Math.min(...u))/Cwe),x=`${d[0]}-${d[1]}-`;return n.jsx("linearGradient",{id:s,x1:"0",x2:"0",y1:"0",y2:"0",[`${i}${a?1:2}`]:t==="objectBoundingBox"?1:`${r}px`,gradientUnits:t??"userSpaceOnUse",children:Array.from({length:p+1},(y,w)=>{const v=f(w/p);if(v===void 0)return null;const C=l(v);if(C===void 0)return null;const N=a?1-C/r:C/r,S=o(v);return S===null?null:n.jsx("stop",{offset:N,stopColor:S,stopOpacity:1},x+w)})})}const Swe=10,_we=e=>e?{x1:"1",x2:"0",y1:"0",y2:"0"}:{x1:"0",x2:"1",y1:"0",y2:"0"};function YS(e){const{isReversed:t,gradientId:a,colorScale:s,colorMap:r}=e,i=[r.min??0,r.max??100],l=typeof i[0]=="number"?gf(i[0],i[1]):NL(i[0],i[1]),o=Swe,c=`${i[0]}-${i[1]}-`;return n.jsx("linearGradient",Ve({id:a},_we(t),{gradientUnits:"objectBoundingBox",children:Array.from({length:o+1},(d,u)=>{const f=u/o,p=l(f);if(p===void 0)return null;const x=s(p);return x===null?null:n.jsx("stop",{offset:f,stopColor:x,stopOpacity:1},c+u)})}))}function Awe(){const{top:e,height:t,bottom:a,left:s,width:r,right:i}=vi(),l=e+t+a,o=s+r+i,c=lP(),d=_pe(),{xAxis:u,xAxisIds:f}=dr(),{yAxis:p,yAxisIds:x}=ur(),{zAxis:y,zAxisIds:w}=sP(),v=x.filter(S=>p[S].colorMap!==void 0),C=f.filter(S=>u[S].colorMap!==void 0),N=w.filter(S=>y[S].colorMap!==void 0);return v.length===0&&C.length===0&&N.length===0?null:n.jsxs("defs",{children:[v.map(S=>{const T=c(S),k=d(S),{colorMap:_,scale:E,colorScale:A,reverse:I}=p[S];return _?.type==="piecewise"?n.jsx(D6,{isReversed:!I,scale:E,colorMap:_,size:l,gradientId:T,direction:"y"},T):_?.type==="continuous"?n.jsxs(h.Fragment,{children:[n.jsx(O6,{isReversed:!I,scale:E,colorScale:A,colorMap:_,size:l,gradientId:T,direction:"y"}),n.jsx(YS,{isReversed:I,colorScale:A,colorMap:_,gradientId:k})]},T):null}),C.map(S=>{const T=c(S),k=d(S),{colorMap:_,scale:E,reverse:A,colorScale:I}=u[S];return _?.type==="piecewise"?n.jsx(D6,{isReversed:A,scale:E,colorMap:_,size:o,gradientId:T,direction:"x"},T):_?.type==="continuous"?n.jsxs(h.Fragment,{children:[n.jsx(O6,{isReversed:A,scale:E,colorScale:I,colorMap:_,size:o,gradientId:T,direction:"x"}),n.jsx(YS,{isReversed:A,colorScale:I,colorMap:_,gradientId:k})]},T):null}),N.map(S=>{const T=d(S),{colorMap:k,colorScale:_}=y[S];return k?.type==="continuous"?n.jsx(YS,{colorScale:_,colorMap:k,gradientId:T},T):null})]})}function Ewe(e){return Ra("MuiChartsSurface",e)}const Twe=()=>$a({root:["root"]},Ewe);va("MuiChartsSurface",["root"]);const kwe=["children","className","title","desc"],Lwe=an("svg",{name:"MuiChartsSurface",slot:"Root"})(({ownerState:e,theme:t})=>({width:e.width??"100%",height:e.height??"100%",display:"flex",position:"relative",flexDirection:"column",alignItems:"center",justifyContent:"center",overflow:"hidden",touchAction:e.hasZoom?"pan-y":void 0,userSelect:"none",gridArea:"chart","&:focus":{outline:"none"},"&:focus-visible":{outline:`${(t.vars??t).palette.text.primary} solid 2px`,"&[data-has-focused-item=true]":{outline:"none"}},"& [data-focused=true]":{outline:`${(t.vars??t).palette.text.primary} solid 2px`}})),Pwe=h.forwardRef(function(t,a){const s=Gn(),r=$t(s,fue),i=$t(s,hue),l=$t(s,M9),o=$t(s,I9),c=$t(s,Zhe),d=$t(s,Xhe),u=$t(s,Lhe),f=rP(),p=Cl(f,a),x=yi({props:t,name:"MuiChartsSurface"}),{children:y,className:w,title:v,desc:C}=x,N=cn(x,kwe),S=Twe(),T=i>0&&r>0;return n.jsxs(Lwe,Ve({ownerState:{width:l,height:o,hasZoom:u},viewBox:`0 0 ${r} ${i}`,className:Tt(S.root,w),tabIndex:c?0:void 0,"data-has-focused-item":d||void 0},N,{ref:p,children:[v&&n.jsx("title",{children:v}),C&&n.jsx("desc",{children:C}),n.jsx(Awe,{}),T&&y]}))}),M6=va("MuiChartsToolbar",["root"]),Dwe=e=>e?.horizontal==="start"?"start":e?.horizontal==="end"?"end":"center",Owe=e=>e?.vertical==="top"?"flex-start":e?.vertical==="bottom"?"flex-end":"center",Mwe=(e,t,a)=>e?'"chart"':t==="vertical"?a?.horizontal==="start"?'"legend chart"':'"chart legend"':a?.vertical==="bottom"?`"chart"
            "legend"`:`"legend"
          "chart"`,Iwe=(e=!1,t="horizontal",a="end",s=void 0)=>{const r=s?"auto":"1fr";return t==="horizontal"||e?r:a==="start"?`auto ${r}`:`${r} auto`},$we=(e=!1,t="horizontal",a="top")=>t==="vertical"||e?"1fr":a==="bottom"?"1fr auto":"auto 1fr",Rwe=an("div",{name:"MuiChartsWrapper",slot:"Root",shouldForwardProp:e=>Ib(e)&&e!=="extendVertically"&&e!=="width"})(({ownerState:e,width:t})=>{const a=Iwe(e.hideLegend,e.legendDirection,e.legendPosition?.horizontal,t),s=$we(e.hideLegend,e.legendDirection,e.legendPosition?.vertical),r=Mwe(e.hideLegend,e.legendDirection,e.legendPosition);return{variants:[{props:{extendVertically:!0},style:{height:"100%",minHeight:0}}],flex:1,display:"grid",gridTemplateColumns:a,gridTemplateRows:s,gridTemplateAreas:r,[`&:has(.${M6.root})`]:{gridTemplateRows:`auto ${s}`,gridTemplateAreas:`"${a.split(" ").map(()=>"toolbar").join(" ")}"
        ${r}`},[`& .${M6.root}`]:{gridArea:"toolbar",justifySelf:"center"},justifyContent:"safe center",justifyItems:Dwe(e.legendPosition),alignItems:Owe(e.legendPosition)}});function zwe(e){const{children:t,sx:a,extendVertically:s}=e,r=Upe(),i=Gn(),l=$t(i,M9),o=$t(i,I9);return n.jsx(Rwe,{ref:r,ownerState:e,sx:a,extendVertically:s??o===void 0,width:l,children:t})}function Fwe(){const e=Gn(),t=$t(e,jN),a=$t(e,CN),s=$t(e,SN);return h.useMemo(()=>t===void 0||a===void 0||s===void 0?null:{seriesType:t,seriesId:a,dataIndex:s},[t,a,s])}const My=6;function Uwe(){const e=kl(),t=Fwe(),a=Nx(),{xAxis:s,xAxisIds:r}=dr(),{yAxis:i,yAxisIds:l}=ur();if(t===null||t.seriesType!=="line"||!a)return null;const o=a?.series[t.seriesId],c=o.xAxisId??r[0],d=o.yAxisId??l[0];return n.jsx("rect",{fill:"none",stroke:(e.vars??e).palette.text.primary,strokeWidth:2,x:s[c].scale(s[c].data[t.dataIndex])-My,y:i[d].scale(o.stackedData[t.dataIndex][1])-My,width:2*My,height:2*My,rx:3,ry:3})}const BN=h.forwardRef(function(t,a){const s=yi({props:t,name:"MuiLineChart"}),{chartsWrapperProps:r,chartContainerProps:i,gridProps:l,clipPathProps:o,clipPathGroupProps:c,areaPlotProps:d,linePlotProps:u,markPlotProps:f,overlayProps:p,chartsAxisProps:x,axisHighlightProps:y,lineHighlightPlotProps:w,legendProps:v,children:C}=$ve(s),{chartDataProviderProps:N,chartsSurfaceProps:S}=Fve(i,a),T=s.slots?.tooltip??qbe,k=s.slots?.toolbar;return n.jsx(jwe,Ve({},N,{children:n.jsxs(zwe,Ve({},r,{children:[s.showToolbar&&k?n.jsx(k,Ve({},s.slotProps?.toolbar)):null,!s.hideLegend&&n.jsx(ive,Ve({},v)),n.jsxs(Pwe,Ve({},S,{children:[n.jsx(_ve,Ve({},l)),n.jsxs("g",Ve({},c,{children:[n.jsx(Gxe,Ve({},d)),n.jsx(n0e,Ve({},u)),n.jsx(Ove,Ve({},p)),n.jsx(uve,Ve({},y))]})),n.jsx(Uwe,{}),n.jsx(eye,Ve({},x)),n.jsx("g",{"data-drawing-container":!0,children:n.jsx(u0e,Ve({},f))}),n.jsx(bve,Ve({},w)),n.jsx(mve,Ve({},o)),C]})),!s.loading&&n.jsx(T,Ve({},s.slotProps?.tooltip))]}))}))});function Bwe(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return h.useMemo(()=>s=>{t.forEach(r=>r(s))},t)}const HN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Vf(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function SP(e){return"nodeType"in e}function mr(e){var t,a;return e?Vf(e)?e:SP(e)&&(t=(a=e.ownerDocument)==null?void 0:a.defaultView)!=null?t:window:window}function _P(e){const{Document:t}=mr(e);return e instanceof t}function _x(e){return Vf(e)?!1:e instanceof mr(e).HTMLElement}function rq(e){return e instanceof mr(e).SVGElement}function qf(e){return e?Vf(e)?e.document:SP(e)?_P(e)?e:_x(e)||rq(e)?e.ownerDocument:document:document:document}const _l=HN?h.useLayoutEffect:h.useEffect;function AP(e){const t=h.useRef(e);return _l(()=>{t.current=e}),h.useCallback(function(){for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return t.current==null?void 0:t.current(...s)},[])}function Hwe(){const e=h.useRef(null),t=h.useCallback((s,r)=>{e.current=setInterval(s,r)},[]),a=h.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,a]}function yp(e,t){t===void 0&&(t=[e]);const a=h.useRef(e);return _l(()=>{a.current!==e&&(a.current=e)},t),a}function Ax(e,t){const a=h.useRef();return h.useMemo(()=>{const s=e(a.current);return a.current=s,s},[...t])}function Av(e){const t=AP(e),a=h.useRef(null),s=h.useCallback(r=>{r!==a.current&&t?.(r,a.current),a.current=r},[]);return[a,s]}function lT(e){const t=h.useRef();return h.useEffect(()=>{t.current=e},[e]),t.current}let QS={};function Ex(e,t){return h.useMemo(()=>{if(t)return t;const a=QS[e]==null?0:QS[e]+1;return QS[e]=a,e+"-"+a},[e,t])}function iq(e){return function(t){for(var a=arguments.length,s=new Array(a>1?a-1:0),r=1;r<a;r++)s[r-1]=arguments[r];return s.reduce((i,l)=>{const o=Object.entries(l);for(const[c,d]of o){const u=i[c];u!=null&&(i[c]=u+e*d)}return i},{...t})}}const of=iq(1),bp=iq(-1);function Gwe(e){return"clientX"in e&&"clientY"in e}function EP(e){if(!e)return!1;const{KeyboardEvent:t}=mr(e.target);return t&&e instanceof t}function Wwe(e){if(!e)return!1;const{TouchEvent:t}=mr(e.target);return t&&e instanceof t}function oT(e){if(Wwe(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:a}=e.touches[0];return{x:t,y:a}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:a}=e.changedTouches[0];return{x:t,y:a}}}return Gwe(e)?{x:e.clientX,y:e.clientY}:null}const vp=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:a}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(a?Math.round(a):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:a}=e;return"scaleX("+t+") scaleY("+a+")"}},Transform:{toString(e){if(e)return[vp.Translate.toString(e),vp.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:a,easing:s}=e;return t+" "+a+"ms "+s}}}),I6="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Vwe(e){return e.matches(I6)?e:e.querySelector(I6)}const qwe={display:"none"};function Ywe(e){let{id:t,value:a}=e;return pt.createElement("div",{id:t,style:qwe},a)}function Qwe(e){let{id:t,announcement:a,ariaLiveType:s="assertive"}=e;const r={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return pt.createElement("div",{id:t,style:r,role:"status","aria-live":s,"aria-atomic":!0},a)}function Kwe(){const[e,t]=h.useState("");return{announce:h.useCallback(s=>{s!=null&&t(s)},[]),announcement:e}}const lq=h.createContext(null);function Xwe(e){const t=h.useContext(lq);h.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Zwe(){const[e]=h.useState(()=>new Set),t=h.useCallback(s=>(e.add(s),()=>e.delete(s)),[e]);return[h.useCallback(s=>{let{type:r,event:i}=s;e.forEach(l=>{var o;return(o=l[r])==null?void 0:o.call(l,i)})},[e]),t]}const Jwe={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},eNe={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:a}=e;return a?"Draggable item "+t.id+" was moved over droppable area "+a.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:a}=e;return a?"Draggable item "+t.id+" was dropped over droppable area "+a.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function tNe(e){let{announcements:t=eNe,container:a,hiddenTextDescribedById:s,screenReaderInstructions:r=Jwe}=e;const{announce:i,announcement:l}=Kwe(),o=Ex("DndLiveRegion"),[c,d]=h.useState(!1);if(h.useEffect(()=>{d(!0)},[]),Xwe(h.useMemo(()=>({onDragStart(f){let{active:p}=f;i(t.onDragStart({active:p}))},onDragMove(f){let{active:p,over:x}=f;t.onDragMove&&i(t.onDragMove({active:p,over:x}))},onDragOver(f){let{active:p,over:x}=f;i(t.onDragOver({active:p,over:x}))},onDragEnd(f){let{active:p,over:x}=f;i(t.onDragEnd({active:p,over:x}))},onDragCancel(f){let{active:p,over:x}=f;i(t.onDragCancel({active:p,over:x}))}}),[i,t])),!c)return null;const u=pt.createElement(pt.Fragment,null,pt.createElement(Ywe,{id:s,value:r.draggable}),pt.createElement(Qwe,{id:o,announcement:l}));return a?Mi.createPortal(u,a):u}var qa;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(qa||(qa={}));function Ev(){}function $6(e,t){return h.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function nNe(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return h.useMemo(()=>[...t].filter(s=>s!=null),[...t])}const Fi=Object.freeze({x:0,y:0});function oq(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function cq(e,t){let{data:{value:a}}=e,{data:{value:s}}=t;return a-s}function aNe(e,t){let{data:{value:a}}=e,{data:{value:s}}=t;return s-a}function R6(e){let{left:t,top:a,height:s,width:r}=e;return[{x:t,y:a},{x:t+r,y:a},{x:t,y:a+s},{x:t+r,y:a+s}]}function dq(e,t){if(!e||e.length===0)return null;const[a]=e;return a[t]}function z6(e,t,a){return t===void 0&&(t=e.left),a===void 0&&(a=e.top),{x:t+e.width*.5,y:a+e.height*.5}}const sNe=e=>{let{collisionRect:t,droppableRects:a,droppableContainers:s}=e;const r=z6(t,t.left,t.top),i=[];for(const l of s){const{id:o}=l,c=a.get(o);if(c){const d=oq(z6(c),r);i.push({id:o,data:{droppableContainer:l,value:d}})}}return i.sort(cq)},rNe=e=>{let{collisionRect:t,droppableRects:a,droppableContainers:s}=e;const r=R6(t),i=[];for(const l of s){const{id:o}=l,c=a.get(o);if(c){const d=R6(c),u=r.reduce((p,x,y)=>p+oq(d[y],x),0),f=Number((u/4).toFixed(4));i.push({id:o,data:{droppableContainer:l,value:f}})}}return i.sort(cq)};function iNe(e,t){const a=Math.max(t.top,e.top),s=Math.max(t.left,e.left),r=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),l=r-s,o=i-a;if(s<r&&a<i){const c=t.width*t.height,d=e.width*e.height,u=l*o,f=u/(c+d-u);return Number(f.toFixed(4))}return 0}const lNe=e=>{let{collisionRect:t,droppableRects:a,droppableContainers:s}=e;const r=[];for(const i of s){const{id:l}=i,o=a.get(l);if(o){const c=iNe(o,t);c>0&&r.push({id:l,data:{droppableContainer:i,value:c}})}}return r.sort(aNe)};function oNe(e,t,a){return{...e,scaleX:t&&a?t.width/a.width:1,scaleY:t&&a?t.height/a.height:1}}function uq(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Fi}function cNe(e){return function(a){for(var s=arguments.length,r=new Array(s>1?s-1:0),i=1;i<s;i++)r[i-1]=arguments[i];return r.reduce((l,o)=>({...l,top:l.top+e*o.y,bottom:l.bottom+e*o.y,left:l.left+e*o.x,right:l.right+e*o.x}),{...a})}}const dNe=cNe(1);function uNe(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function mNe(e,t,a){const s=uNe(t);if(!s)return e;const{scaleX:r,scaleY:i,x:l,y:o}=s,c=e.left-l-(1-r)*parseFloat(a),d=e.top-o-(1-i)*parseFloat(a.slice(a.indexOf(" ")+1)),u=r?e.width/r:e.width,f=i?e.height/i:e.height;return{width:u,height:f,top:d,right:c+u,bottom:d+f,left:c}}const fNe={ignoreTransform:!1};function Yf(e,t){t===void 0&&(t=fNe);let a=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:d,transformOrigin:u}=mr(e).getComputedStyle(e);d&&(a=mNe(a,d,u))}const{top:s,left:r,width:i,height:l,bottom:o,right:c}=a;return{top:s,left:r,width:i,height:l,bottom:o,right:c}}function F6(e){return Yf(e,{ignoreTransform:!0})}function hNe(e){const t=e.innerWidth,a=e.innerHeight;return{top:0,left:0,right:t,bottom:a,width:t,height:a}}function gNe(e,t){return t===void 0&&(t=mr(e).getComputedStyle(e)),t.position==="fixed"}function pNe(e,t){t===void 0&&(t=mr(e).getComputedStyle(e));const a=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(r=>{const i=t[r];return typeof i=="string"?a.test(i):!1})}function GN(e,t){const a=[];function s(r){if(t!=null&&a.length>=t||!r)return a;if(_P(r)&&r.scrollingElement!=null&&!a.includes(r.scrollingElement))return a.push(r.scrollingElement),a;if(!_x(r)||rq(r)||a.includes(r))return a;const i=mr(e).getComputedStyle(r);return r!==e&&pNe(r,i)&&a.push(r),gNe(r,i)?a:s(r.parentNode)}return e?s(e):a}function mq(e){const[t]=GN(e,1);return t??null}function KS(e){return!HN||!e?null:Vf(e)?e:SP(e)?_P(e)||e===qf(e).scrollingElement?window:_x(e)?e:null:null}function fq(e){return Vf(e)?e.scrollX:e.scrollLeft}function hq(e){return Vf(e)?e.scrollY:e.scrollTop}function cT(e){return{x:fq(e),y:hq(e)}}var ls;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(ls||(ls={}));function gq(e){return!HN||!e?!1:e===document.scrollingElement}function pq(e){const t={x:0,y:0},a=gq(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},s={x:e.scrollWidth-a.width,y:e.scrollHeight-a.height},r=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,l=e.scrollTop>=s.y,o=e.scrollLeft>=s.x;return{isTop:r,isLeft:i,isBottom:l,isRight:o,maxScroll:s,minScroll:t}}const xNe={x:.2,y:.2};function yNe(e,t,a,s,r){let{top:i,left:l,right:o,bottom:c}=a;s===void 0&&(s=10),r===void 0&&(r=xNe);const{isTop:d,isBottom:u,isLeft:f,isRight:p}=pq(e),x={x:0,y:0},y={x:0,y:0},w={height:t.height*r.y,width:t.width*r.x};return!d&&i<=t.top+w.height?(x.y=ls.Backward,y.y=s*Math.abs((t.top+w.height-i)/w.height)):!u&&c>=t.bottom-w.height&&(x.y=ls.Forward,y.y=s*Math.abs((t.bottom-w.height-c)/w.height)),!p&&o>=t.right-w.width?(x.x=ls.Forward,y.x=s*Math.abs((t.right-w.width-o)/w.width)):!f&&l<=t.left+w.width&&(x.x=ls.Backward,y.x=s*Math.abs((t.left+w.width-l)/w.width)),{direction:x,speed:y}}function bNe(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:l}=window;return{top:0,left:0,right:i,bottom:l,width:i,height:l}}const{top:t,left:a,right:s,bottom:r}=e.getBoundingClientRect();return{top:t,left:a,right:s,bottom:r,width:e.clientWidth,height:e.clientHeight}}function xq(e){return e.reduce((t,a)=>of(t,cT(a)),Fi)}function vNe(e){return e.reduce((t,a)=>t+fq(a),0)}function wNe(e){return e.reduce((t,a)=>t+hq(a),0)}function NNe(e,t){if(t===void 0&&(t=Yf),!e)return;const{top:a,left:s,bottom:r,right:i}=t(e);mq(e)&&(r<=0||i<=0||a>=window.innerHeight||s>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const jNe=[["x",["left","right"],vNe],["y",["top","bottom"],wNe]];class TP{constructor(t,a){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=GN(a),r=xq(s);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,l,o]of jNe)for(const c of l)Object.defineProperty(this,c,{get:()=>{const d=o(s),u=r[i]-d;return this.rect[c]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Hg{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(a=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...a)})},this.target=t}add(t,a,s){var r;(r=this.target)==null||r.addEventListener(t,a,s),this.listeners.push([t,a,s])}}function CNe(e){const{EventTarget:t}=mr(e);return e instanceof t?e:qf(e)}function XS(e,t){const a=Math.abs(e.x),s=Math.abs(e.y);return typeof t=="number"?Math.sqrt(a**2+s**2)>t:"x"in t&&"y"in t?a>t.x&&s>t.y:"x"in t?a>t.x:"y"in t?s>t.y:!1}var ai;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(ai||(ai={}));function U6(e){e.preventDefault()}function SNe(e){e.stopPropagation()}var fn;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(fn||(fn={}));const yq={start:[fn.Space,fn.Enter],cancel:[fn.Esc],end:[fn.Space,fn.Enter,fn.Tab]},_Ne=(e,t)=>{let{currentCoordinates:a}=t;switch(e.code){case fn.Right:return{...a,x:a.x+25};case fn.Left:return{...a,x:a.x-25};case fn.Down:return{...a,y:a.y+25};case fn.Up:return{...a,y:a.y-25}}};class kP{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:a}}=t;this.props=t,this.listeners=new Hg(qf(a)),this.windowListeners=new Hg(mr(a)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ai.Resize,this.handleCancel),this.windowListeners.add(ai.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ai.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:a}=this.props,s=t.node.current;s&&NNe(s),a(Fi)}handleKeyDown(t){if(EP(t)){const{active:a,context:s,options:r}=this.props,{keyboardCodes:i=yq,coordinateGetter:l=_Ne,scrollBehavior:o="smooth"}=r,{code:c}=t;if(i.end.includes(c)){this.handleEnd(t);return}if(i.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:d}=s.current,u=d?{x:d.left,y:d.top}:Fi;this.referenceCoordinates||(this.referenceCoordinates=u);const f=l(t,{active:a,context:s.current,currentCoordinates:u});if(f){const p=bp(f,u),x={x:0,y:0},{scrollableAncestors:y}=s.current;for(const w of y){const v=t.code,{isTop:C,isRight:N,isLeft:S,isBottom:T,maxScroll:k,minScroll:_}=pq(w),E=bNe(w),A={x:Math.min(v===fn.Right?E.right-E.width/2:E.right,Math.max(v===fn.Right?E.left:E.left+E.width/2,f.x)),y:Math.min(v===fn.Down?E.bottom-E.height/2:E.bottom,Math.max(v===fn.Down?E.top:E.top+E.height/2,f.y))},I=v===fn.Right&&!N||v===fn.Left&&!S,z=v===fn.Down&&!T||v===fn.Up&&!C;if(I&&A.x!==f.x){const F=w.scrollLeft+p.x,D=v===fn.Right&&F<=k.x||v===fn.Left&&F>=_.x;if(D&&!p.y){w.scrollTo({left:F,behavior:o});return}D?x.x=w.scrollLeft-F:x.x=v===fn.Right?w.scrollLeft-k.x:w.scrollLeft-_.x,x.x&&w.scrollBy({left:-x.x,behavior:o});break}else if(z&&A.y!==f.y){const F=w.scrollTop+p.y,D=v===fn.Down&&F<=k.y||v===fn.Up&&F>=_.y;if(D&&!p.x){w.scrollTo({top:F,behavior:o});return}D?x.y=w.scrollTop-F:x.y=v===fn.Down?w.scrollTop-k.y:w.scrollTop-_.y,x.y&&w.scrollBy({top:-x.y,behavior:o});break}}this.handleMove(t,of(bp(f,this.referenceCoordinates),x))}}}handleMove(t,a){const{onMove:s}=this.props;t.preventDefault(),s(a)}handleEnd(t){const{onEnd:a}=this.props;t.preventDefault(),this.detach(),a()}handleCancel(t){const{onCancel:a}=this.props;t.preventDefault(),this.detach(),a()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}kP.activators=[{eventName:"onKeyDown",handler:(e,t,a)=>{let{keyboardCodes:s=yq,onActivation:r}=t,{active:i}=a;const{code:l}=e.nativeEvent;if(s.start.includes(l)){const o=i.activatorNode.current;return o&&e.target!==o?!1:(e.preventDefault(),r?.({event:e.nativeEvent}),!0)}return!1}}];function B6(e){return!!(e&&"distance"in e)}function H6(e){return!!(e&&"delay"in e)}class LP{constructor(t,a,s){var r;s===void 0&&(s=CNe(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=a;const{event:i}=t,{target:l}=i;this.props=t,this.events=a,this.document=qf(l),this.documentListeners=new Hg(this.document),this.listeners=new Hg(s),this.windowListeners=new Hg(mr(l)),this.initialCoordinates=(r=oT(i))!=null?r:Fi,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:a,bypassActivationConstraint:s}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(ai.Resize,this.handleCancel),this.windowListeners.add(ai.DragStart,U6),this.windowListeners.add(ai.VisibilityChange,this.handleCancel),this.windowListeners.add(ai.ContextMenu,U6),this.documentListeners.add(ai.Keydown,this.handleKeydown),a){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(H6(a)){this.timeoutId=setTimeout(this.handleStart,a.delay),this.handlePending(a);return}if(B6(a)){this.handlePending(a);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,a){const{active:s,onPending:r}=this.props;r(s,t,this.initialCoordinates,a)}handleStart(){const{initialCoordinates:t}=this,{onStart:a}=this.props;t&&(this.activated=!0,this.documentListeners.add(ai.Click,SNe,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ai.SelectionChange,this.removeTextSelection),a(t))}handleMove(t){var a;const{activated:s,initialCoordinates:r,props:i}=this,{onMove:l,options:{activationConstraint:o}}=i;if(!r)return;const c=(a=oT(t))!=null?a:Fi,d=bp(r,c);if(!s&&o){if(B6(o)){if(o.tolerance!=null&&XS(d,o.tolerance))return this.handleCancel();if(XS(d,o.distance))return this.handleStart()}if(H6(o)&&XS(d,o.tolerance))return this.handleCancel();this.handlePending(o,d);return}t.cancelable&&t.preventDefault(),l(c)}handleEnd(){const{onAbort:t,onEnd:a}=this.props;this.detach(),this.activated||t(this.props.active),a()}handleCancel(){const{onAbort:t,onCancel:a}=this.props;this.detach(),this.activated||t(this.props.active),a()}handleKeydown(t){t.code===fn.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const ANe={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class PP extends LP{constructor(t){const{event:a}=t,s=qf(a.target);super(t,ANe,s)}}PP.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:a}=e,{onActivation:s}=t;return!a.isPrimary||a.button!==0?!1:(s?.({event:a}),!0)}}];const ENe={move:{name:"mousemove"},end:{name:"mouseup"}};var dT;(function(e){e[e.RightClick=2]="RightClick"})(dT||(dT={}));class TNe extends LP{constructor(t){super(t,ENe,qf(t.event.target))}}TNe.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:a}=e,{onActivation:s}=t;return a.button===dT.RightClick?!1:(s?.({event:a}),!0)}}];const ZS={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class kNe extends LP{constructor(t){super(t,ZS)}static setup(){return window.addEventListener(ZS.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(ZS.move.name,t)};function t(){}}}kNe.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:a}=e,{onActivation:s}=t;const{touches:r}=a;return r.length>1?!1:(s?.({event:a}),!0)}}];var Gg;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Gg||(Gg={}));var Tv;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Tv||(Tv={}));function LNe(e){let{acceleration:t,activator:a=Gg.Pointer,canScroll:s,draggingRect:r,enabled:i,interval:l=5,order:o=Tv.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:u,delta:f,threshold:p}=e;const x=DNe({delta:f,disabled:!i}),[y,w]=Hwe(),v=h.useRef({x:0,y:0}),C=h.useRef({x:0,y:0}),N=h.useMemo(()=>{switch(a){case Gg.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Gg.DraggableRect:return r}},[a,r,c]),S=h.useRef(null),T=h.useCallback(()=>{const _=S.current;if(!_)return;const E=v.current.x*C.current.x,A=v.current.y*C.current.y;_.scrollBy(E,A)},[]),k=h.useMemo(()=>o===Tv.TreeOrder?[...d].reverse():d,[o,d]);h.useEffect(()=>{if(!i||!d.length||!N){w();return}for(const _ of k){if(s?.(_)===!1)continue;const E=d.indexOf(_),A=u[E];if(!A)continue;const{direction:I,speed:z}=yNe(_,A,N,t,p);for(const F of["x","y"])x[F][I[F]]||(z[F]=0,I[F]=0);if(z.x>0||z.y>0){w(),S.current=_,y(T,l),v.current=z,C.current=I;return}}v.current={x:0,y:0},C.current={x:0,y:0},w()},[t,T,s,w,i,l,JSON.stringify(N),JSON.stringify(x),y,d,k,u,JSON.stringify(p)])}const PNe={x:{[ls.Backward]:!1,[ls.Forward]:!1},y:{[ls.Backward]:!1,[ls.Forward]:!1}};function DNe(e){let{delta:t,disabled:a}=e;const s=lT(t);return Ax(r=>{if(a||!s||!r)return PNe;const i={x:Math.sign(t.x-s.x),y:Math.sign(t.y-s.y)};return{x:{[ls.Backward]:r.x[ls.Backward]||i.x===-1,[ls.Forward]:r.x[ls.Forward]||i.x===1},y:{[ls.Backward]:r.y[ls.Backward]||i.y===-1,[ls.Forward]:r.y[ls.Forward]||i.y===1}}},[a,t,s])}function ONe(e,t){const a=t!=null?e.get(t):void 0,s=a?a.node.current:null;return Ax(r=>{var i;return t==null?null:(i=s??r)!=null?i:null},[s,t])}function MNe(e,t){return h.useMemo(()=>e.reduce((a,s)=>{const{sensor:r}=s,i=r.activators.map(l=>({eventName:l.eventName,handler:t(l.handler,s)}));return[...a,...i]},[]),[e,t])}var wp;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(wp||(wp={}));var uT;(function(e){e.Optimized="optimized"})(uT||(uT={}));const G6=new Map;function INe(e,t){let{dragging:a,dependencies:s,config:r}=t;const[i,l]=h.useState(null),{frequency:o,measure:c,strategy:d}=r,u=h.useRef(e),f=v(),p=yp(f),x=h.useCallback(function(C){C===void 0&&(C=[]),!p.current&&l(N=>N===null?C:N.concat(C.filter(S=>!N.includes(S))))},[p]),y=h.useRef(null),w=Ax(C=>{if(f&&!a)return G6;if(!C||C===G6||u.current!==e||i!=null){const N=new Map;for(let S of e){if(!S)continue;if(i&&i.length>0&&!i.includes(S.id)&&S.rect.current){N.set(S.id,S.rect.current);continue}const T=S.node.current,k=T?new TP(c(T),T):null;S.rect.current=k,k&&N.set(S.id,k)}return N}return C},[e,i,a,f,c]);return h.useEffect(()=>{u.current=e},[e]),h.useEffect(()=>{f||x()},[a,f]),h.useEffect(()=>{i&&i.length>0&&l(null)},[JSON.stringify(i)]),h.useEffect(()=>{f||typeof o!="number"||y.current!==null||(y.current=setTimeout(()=>{x(),y.current=null},o))},[o,f,x,...s]),{droppableRects:w,measureDroppableContainers:x,measuringScheduled:i!=null};function v(){switch(d){case wp.Always:return!1;case wp.BeforeDragging:return a;default:return!a}}}function bq(e,t){return Ax(a=>e?a||(typeof t=="function"?t(e):e):null,[t,e])}function $Ne(e,t){return bq(e,t)}function RNe(e){let{callback:t,disabled:a}=e;const s=AP(t),r=h.useMemo(()=>{if(a||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(s)},[s,a]);return h.useEffect(()=>()=>r?.disconnect(),[r]),r}function WN(e){let{callback:t,disabled:a}=e;const s=AP(t),r=h.useMemo(()=>{if(a||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(s)},[a]);return h.useEffect(()=>()=>r?.disconnect(),[r]),r}function zNe(e){return new TP(Yf(e),e)}function W6(e,t,a){t===void 0&&(t=zNe);const[s,r]=h.useState(null);function i(){r(c=>{if(!e)return null;if(e.isConnected===!1){var d;return(d=c??a)!=null?d:null}const u=t(e);return JSON.stringify(c)===JSON.stringify(u)?c:u})}const l=RNe({callback(c){if(e)for(const d of c){const{type:u,target:f}=d;if(u==="childList"&&f instanceof HTMLElement&&f.contains(e)){i();break}}}}),o=WN({callback:i});return _l(()=>{i(),e?(o?.observe(e),l?.observe(document.body,{childList:!0,subtree:!0})):(o?.disconnect(),l?.disconnect())},[e]),s}function FNe(e){const t=bq(e);return uq(e,t)}const V6=[];function UNe(e){const t=h.useRef(e),a=Ax(s=>e?s&&s!==V6&&e&&t.current&&e.parentNode===t.current.parentNode?s:GN(e):V6,[e]);return h.useEffect(()=>{t.current=e},[e]),a}function BNe(e){const[t,a]=h.useState(null),s=h.useRef(e),r=h.useCallback(i=>{const l=KS(i.target);l&&a(o=>o?(o.set(l,cT(l)),new Map(o)):null)},[]);return h.useEffect(()=>{const i=s.current;if(e!==i){l(i);const o=e.map(c=>{const d=KS(c);return d?(d.addEventListener("scroll",r,{passive:!0}),[d,cT(d)]):null}).filter(c=>c!=null);a(o.length?new Map(o):null),s.current=e}return()=>{l(e),l(i)};function l(o){o.forEach(c=>{const d=KS(c);d?.removeEventListener("scroll",r)})}},[r,e]),h.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,l)=>of(i,l),Fi):xq(e):Fi,[e,t])}function q6(e,t){t===void 0&&(t=[]);const a=h.useRef(null);return h.useEffect(()=>{a.current=null},t),h.useEffect(()=>{const s=e!==Fi;s&&!a.current&&(a.current=e),!s&&a.current&&(a.current=null)},[e]),a.current?bp(e,a.current):Fi}function HNe(e){h.useEffect(()=>{if(!HN)return;const t=e.map(a=>{let{sensor:s}=a;return s.setup==null?void 0:s.setup()});return()=>{for(const a of t)a?.()}},e.map(t=>{let{sensor:a}=t;return a}))}function GNe(e,t){return h.useMemo(()=>e.reduce((a,s)=>{let{eventName:r,handler:i}=s;return a[r]=l=>{i(l,t)},a},{}),[e,t])}function vq(e){return h.useMemo(()=>e?hNe(e):null,[e])}const Y6=[];function WNe(e,t){t===void 0&&(t=Yf);const[a]=e,s=vq(a?mr(a):null),[r,i]=h.useState(Y6);function l(){i(()=>e.length?e.map(c=>gq(c)?s:new TP(t(c),c)):Y6)}const o=WN({callback:l});return _l(()=>{o?.disconnect(),l(),e.forEach(c=>o?.observe(c))},[e]),r}function VNe(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return _x(t)?t:e}function qNe(e){let{measure:t}=e;const[a,s]=h.useState(null),r=h.useCallback(d=>{for(const{target:u}of d)if(_x(u)){s(f=>{const p=t(u);return f?{...f,width:p.width,height:p.height}:p});break}},[t]),i=WN({callback:r}),l=h.useCallback(d=>{const u=VNe(d);i?.disconnect(),u&&i?.observe(u),s(u?t(u):null)},[t,i]),[o,c]=Av(l);return h.useMemo(()=>({nodeRef:o,rect:a,setRef:c}),[a,o,c])}const YNe=[{sensor:PP,options:{}},{sensor:kP,options:{}}],QNe={current:{}},zb={draggable:{measure:F6},droppable:{measure:F6,strategy:wp.WhileDragging,frequency:uT.Optimized},dragOverlay:{measure:Yf}};class Wg extends Map{get(t){var a;return t!=null&&(a=super.get(t))!=null?a:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:a}=t;return!a})}getNodeFor(t){var a,s;return(a=(s=this.get(t))==null?void 0:s.node.current)!=null?a:void 0}}const KNe={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Wg,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Ev},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:zb,measureDroppableContainers:Ev,windowRect:null,measuringScheduled:!1},XNe={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Ev,draggableNodes:new Map,over:null,measureDroppableContainers:Ev},VN=h.createContext(XNe),wq=h.createContext(KNe);function ZNe(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Wg}}}function JNe(e,t){switch(t.type){case qa.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case qa.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case qa.DragEnd:case qa.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case qa.RegisterDroppable:{const{element:a}=t,{id:s}=a,r=new Wg(e.droppable.containers);return r.set(s,a),{...e,droppable:{...e.droppable,containers:r}}}case qa.SetDroppableDisabled:{const{id:a,key:s,disabled:r}=t,i=e.droppable.containers.get(a);if(!i||s!==i.key)return e;const l=new Wg(e.droppable.containers);return l.set(a,{...i,disabled:r}),{...e,droppable:{...e.droppable,containers:l}}}case qa.UnregisterDroppable:{const{id:a,key:s}=t,r=e.droppable.containers.get(a);if(!r||s!==r.key)return e;const i=new Wg(e.droppable.containers);return i.delete(a),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function eje(e){let{disabled:t}=e;const{active:a,activatorEvent:s,draggableNodes:r}=h.useContext(VN),i=lT(s),l=lT(a?.id);return h.useEffect(()=>{if(!t&&!s&&i&&l!=null){if(!EP(i)||document.activeElement===i.target)return;const o=r.get(l);if(!o)return;const{activatorNode:c,node:d}=o;if(!c.current&&!d.current)return;requestAnimationFrame(()=>{for(const u of[c.current,d.current]){if(!u)continue;const f=Vwe(u);if(f){f.focus();break}}})}},[s,t,r,l,i]),null}function tje(e,t){let{transform:a,...s}=t;return e!=null&&e.length?e.reduce((r,i)=>i({transform:r,...s}),a):a}function nje(e){return h.useMemo(()=>({draggable:{...zb.draggable,...e?.draggable},droppable:{...zb.droppable,...e?.droppable},dragOverlay:{...zb.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function aje(e){let{activeNode:t,measure:a,initialRect:s,config:r=!0}=e;const i=h.useRef(!1),{x:l,y:o}=typeof r=="boolean"?{x:r,y:r}:r;_l(()=>{if(!l&&!o||!t){i.current=!1;return}if(i.current||!s)return;const d=t?.node.current;if(!d||d.isConnected===!1)return;const u=a(d),f=uq(u,s);if(l||(f.x=0),o||(f.y=0),i.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const p=mq(d);p&&p.scrollBy({top:f.y,left:f.x})}},[t,l,o,s,a])}const Nq=h.createContext({...Fi,scaleX:1,scaleY:1});var kc;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(kc||(kc={}));const sje=h.memo(function(t){var a,s,r,i;let{id:l,accessibility:o,autoScroll:c=!0,children:d,sensors:u=YNe,collisionDetection:f=lNe,measuring:p,modifiers:x,...y}=t;const w=h.useReducer(JNe,void 0,ZNe),[v,C]=w,[N,S]=Zwe(),[T,k]=h.useState(kc.Uninitialized),_=T===kc.Initialized,{draggable:{active:E,nodes:A,translate:I},droppable:{containers:z}}=v,F=E!=null?A.get(E):null,D=h.useRef({initial:null,translated:null}),M=h.useMemo(()=>{var K;return E!=null?{id:E,data:(K=F?.data)!=null?K:QNe,rect:D}:null},[E,F]),W=h.useRef(null),[Z,R]=h.useState(null),[Q,Y]=h.useState(null),oe=yp(y,Object.values(y)),re=Ex("DndDescribedBy",l),ee=h.useMemo(()=>z.getEnabled(),[z]),H=nje(p),{droppableRects:ye,measureDroppableContainers:te,measuringScheduled:ve}=INe(ee,{dragging:_,dependencies:[I.x,I.y],config:H.droppable}),je=ONe(A,E),Oe=h.useMemo(()=>Q?oT(Q):null,[Q]),$e=G(),pe=$Ne(je,H.draggable.measure);aje({activeNode:E!=null?A.get(E):null,config:$e.layoutShiftCompensation,initialRect:pe,measure:H.draggable.measure});const Me=W6(je,H.draggable.measure,pe),Le=W6(je?je.parentElement:null),he=h.useRef({activatorEvent:null,active:null,activeNode:je,collisionRect:null,collisions:null,droppableRects:ye,draggableNodes:A,draggingNode:null,draggingNodeRect:null,droppableContainers:z,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ae=z.getNodeFor((a=he.current.over)==null?void 0:a.id),Ae=qNe({measure:H.dragOverlay.measure}),ge=(s=Ae.nodeRef.current)!=null?s:je,Be=_?(r=Ae.rect)!=null?r:Me:null,qe=!!(Ae.nodeRef.current&&Ae.rect),Te=FNe(qe?null:Me),He=vq(ge?mr(ge):null),Ye=UNe(_?ae??je:null),B=WNe(Ye),fe=tje(x,{transform:{x:I.x-Te.x,y:I.y-Te.y,scaleX:1,scaleY:1},activatorEvent:Q,active:M,activeNodeRect:Me,containerNodeRect:Le,draggingNodeRect:Be,over:he.current.over,overlayNodeRect:Ae.rect,scrollableAncestors:Ye,scrollableAncestorRects:B,windowRect:He}),Se=Oe?of(Oe,I):null,de=BNe(Ye),ke=q6(de),se=q6(de,[Me]),We=of(fe,ke),Re=Be?dNe(Be,fe):null,ct=M&&Re?f({active:M,collisionRect:Re,droppableRects:ye,droppableContainers:ee,pointerCoordinates:Se}):null,Ie=dq(ct,"id"),[ue,Ne]=h.useState(null),Fe=qe?fe:of(fe,se),Ze=oNe(Fe,(i=ue?.rect)!=null?i:null,Me),st=h.useRef(null),Ee=h.useCallback((K,ne)=>{let{sensor:J,options:Ce}=ne;if(W.current==null)return;const me=A.get(W.current);if(!me)return;const V=K.nativeEvent,_e=new J({active:W.current,activeNode:me,event:V,options:Ce,context:he,onAbort(rt){if(!A.get(rt))return;const{onDragAbort:gt}=oe.current,_t={id:rt};gt?.(_t),N({type:"onDragAbort",event:_t})},onPending(rt,bt,gt,_t){if(!A.get(rt))return;const{onDragPending:un}=oe.current,le={id:rt,constraint:bt,initialCoordinates:gt,offset:_t};un?.(le),N({type:"onDragPending",event:le})},onStart(rt){const bt=W.current;if(bt==null)return;const gt=A.get(bt);if(!gt)return;const{onDragStart:_t}=oe.current,Wt={activatorEvent:V,active:{id:bt,data:gt.data,rect:D}};Mi.unstable_batchedUpdates(()=>{_t?.(Wt),k(kc.Initializing),C({type:qa.DragStart,initialCoordinates:rt,active:bt}),N({type:"onDragStart",event:Wt}),R(st.current),Y(V)})},onMove(rt){C({type:qa.DragMove,coordinates:rt})},onEnd:Ue(qa.DragEnd),onCancel:Ue(qa.DragCancel)});st.current=_e;function Ue(rt){return async function(){const{active:gt,collisions:_t,over:Wt,scrollAdjustedTranslate:un}=he.current;let le=null;if(gt&&un){const{cancelDrop:it}=oe.current;le={activatorEvent:V,active:gt,collisions:_t,delta:un,over:Wt},rt===qa.DragEnd&&typeof it=="function"&&await Promise.resolve(it(le))&&(rt=qa.DragCancel)}W.current=null,Mi.unstable_batchedUpdates(()=>{C({type:rt}),k(kc.Uninitialized),Ne(null),R(null),Y(null),st.current=null;const it=rt===qa.DragEnd?"onDragEnd":"onDragCancel";if(le){const Et=oe.current[it];Et?.(le),N({type:it,event:le})}})}}},[A]),Je=h.useCallback((K,ne)=>(J,Ce)=>{const me=J.nativeEvent,V=A.get(Ce);if(W.current!==null||!V||me.dndKit||me.defaultPrevented)return;const _e={active:V};K(J,ne.options,_e)===!0&&(me.dndKit={capturedBy:ne.sensor},W.current=Ce,Ee(J,ne))},[A,Ee]),be=MNe(u,Je);HNe(u),_l(()=>{Me&&T===kc.Initializing&&k(kc.Initialized)},[Me,T]),h.useEffect(()=>{const{onDragMove:K}=oe.current,{active:ne,activatorEvent:J,collisions:Ce,over:me}=he.current;if(!ne||!J)return;const V={active:ne,activatorEvent:J,collisions:Ce,delta:{x:We.x,y:We.y},over:me};Mi.unstable_batchedUpdates(()=>{K?.(V),N({type:"onDragMove",event:V})})},[We.x,We.y]),h.useEffect(()=>{const{active:K,activatorEvent:ne,collisions:J,droppableContainers:Ce,scrollAdjustedTranslate:me}=he.current;if(!K||W.current==null||!ne||!me)return;const{onDragOver:V}=oe.current,_e=Ce.get(Ie),Ue=_e&&_e.rect.current?{id:_e.id,rect:_e.rect.current,data:_e.data,disabled:_e.disabled}:null,rt={active:K,activatorEvent:ne,collisions:J,delta:{x:me.x,y:me.y},over:Ue};Mi.unstable_batchedUpdates(()=>{Ne(Ue),V?.(rt),N({type:"onDragOver",event:rt})})},[Ie]),_l(()=>{he.current={activatorEvent:Q,active:M,activeNode:je,collisionRect:Re,collisions:ct,droppableRects:ye,draggableNodes:A,draggingNode:ge,draggingNodeRect:Be,droppableContainers:z,over:ue,scrollableAncestors:Ye,scrollAdjustedTranslate:We},D.current={initial:Be,translated:Re}},[M,je,ct,Re,A,ge,Be,ye,z,ue,Ye,We]),LNe({...$e,delta:I,draggingRect:Re,pointerCoordinates:Se,scrollableAncestors:Ye,scrollableAncestorRects:B});const Ke=h.useMemo(()=>({active:M,activeNode:je,activeNodeRect:Me,activatorEvent:Q,collisions:ct,containerNodeRect:Le,dragOverlay:Ae,draggableNodes:A,droppableContainers:z,droppableRects:ye,over:ue,measureDroppableContainers:te,scrollableAncestors:Ye,scrollableAncestorRects:B,measuringConfiguration:H,measuringScheduled:ve,windowRect:He}),[M,je,Me,Q,ct,Le,Ae,A,z,ye,ue,te,Ye,B,H,ve,He]),$=h.useMemo(()=>({activatorEvent:Q,activators:be,active:M,activeNodeRect:Me,ariaDescribedById:{draggable:re},dispatch:C,draggableNodes:A,over:ue,measureDroppableContainers:te}),[Q,be,M,Me,C,re,A,ue,te]);return pt.createElement(lq.Provider,{value:S},pt.createElement(VN.Provider,{value:$},pt.createElement(wq.Provider,{value:Ke},pt.createElement(Nq.Provider,{value:Ze},d)),pt.createElement(eje,{disabled:o?.restoreFocus===!1})),pt.createElement(tNe,{...o,hiddenTextDescribedById:re}));function G(){const K=Z?.autoScrollEnabled===!1,ne=typeof c=="object"?c.enabled===!1:c===!1,J=_&&!K&&!ne;return typeof c=="object"?{...c,enabled:J}:{enabled:J}}}),rje=h.createContext(null),Q6="button",ije="Draggable";function lje(e){let{id:t,data:a,disabled:s=!1,attributes:r}=e;const i=Ex(ije),{activators:l,activatorEvent:o,active:c,activeNodeRect:d,ariaDescribedById:u,draggableNodes:f,over:p}=h.useContext(VN),{role:x=Q6,roleDescription:y="draggable",tabIndex:w=0}=r??{},v=c?.id===t,C=h.useContext(v?Nq:rje),[N,S]=Av(),[T,k]=Av(),_=GNe(l,t),E=yp(a);_l(()=>(f.set(t,{id:t,key:i,node:N,activatorNode:T,data:E}),()=>{const I=f.get(t);I&&I.key===i&&f.delete(t)}),[f,t]);const A=h.useMemo(()=>({role:x,tabIndex:w,"aria-disabled":s,"aria-pressed":v&&x===Q6?!0:void 0,"aria-roledescription":y,"aria-describedby":u.draggable}),[s,x,w,v,y,u.draggable]);return{active:c,activatorEvent:o,activeNodeRect:d,attributes:A,isDragging:v,listeners:s?void 0:_,node:N,over:p,setNodeRef:S,setActivatorNodeRef:k,transform:C}}function oje(){return h.useContext(wq)}const cje="Droppable",dje={timeout:25};function uje(e){let{data:t,disabled:a=!1,id:s,resizeObserverConfig:r}=e;const i=Ex(cje),{active:l,dispatch:o,over:c,measureDroppableContainers:d}=h.useContext(VN),u=h.useRef({disabled:a}),f=h.useRef(!1),p=h.useRef(null),x=h.useRef(null),{disabled:y,updateMeasurementsFor:w,timeout:v}={...dje,...r},C=yp(w??s),N=h.useCallback(()=>{if(!f.current){f.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{d(Array.isArray(C.current)?C.current:[C.current]),x.current=null},v)},[v]),S=WN({callback:N,disabled:y||!l}),T=h.useCallback((A,I)=>{S&&(I&&(S.unobserve(I),f.current=!1),A&&S.observe(A))},[S]),[k,_]=Av(T),E=yp(t);return h.useEffect(()=>{!S||!k.current||(S.disconnect(),f.current=!1,S.observe(k.current))},[k,S]),h.useEffect(()=>(o({type:qa.RegisterDroppable,element:{id:s,key:i,disabled:a,node:k,rect:p,data:E}}),()=>o({type:qa.UnregisterDroppable,key:i,id:s})),[s]),h.useEffect(()=>{a!==u.current.disabled&&(o({type:qa.SetDroppableDisabled,id:s,key:i,disabled:a}),u.current.disabled=a)},[s,i,a,o]),{active:l,rect:p,isOver:c?.id===s,node:k,over:c,setNodeRef:_}}function DP(e,t,a){const s=e.slice();return s.splice(a<0?s.length+a:a,0,s.splice(t,1)[0]),s}function mje(e,t){return e.reduce((a,s,r)=>{const i=t.get(s);return i&&(a[r]=i),a},Array(e.length))}function Iy(e){return e!==null&&e>=0}function fje(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}function hje(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const OP=e=>{let{rects:t,activeIndex:a,overIndex:s,index:r}=e;const i=DP(t,s,a),l=t[r],o=i[r];return!o||!l?null:{x:o.left-l.left,y:o.top-l.top,scaleX:o.width/l.width,scaleY:o.height/l.height}},jq="Sortable",Cq=pt.createContext({activeIndex:-1,containerId:jq,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:OP,disabled:{draggable:!1,droppable:!1}});function gje(e){let{children:t,id:a,items:s,strategy:r=OP,disabled:i=!1}=e;const{active:l,dragOverlay:o,droppableRects:c,over:d,measureDroppableContainers:u}=oje(),f=Ex(jq,a),p=o.rect!==null,x=h.useMemo(()=>s.map(_=>typeof _=="object"&&"id"in _?_.id:_),[s]),y=l!=null,w=l?x.indexOf(l.id):-1,v=d?x.indexOf(d.id):-1,C=h.useRef(x),N=!fje(x,C.current),S=v!==-1&&w===-1||N,T=hje(i);_l(()=>{N&&y&&u(x)},[N,x,y,u]),h.useEffect(()=>{C.current=x},[x]);const k=h.useMemo(()=>({activeIndex:w,containerId:f,disabled:T,disableTransforms:S,items:x,overIndex:v,useDragOverlay:p,sortedRects:mje(x,c),strategy:r}),[w,f,T.draggable,T.droppable,S,x,v,c,p,r]);return pt.createElement(Cq.Provider,{value:k},t)}const pje=e=>{let{id:t,items:a,activeIndex:s,overIndex:r}=e;return DP(a,s,r).indexOf(t)},xje=e=>{let{containerId:t,isSorting:a,wasDragging:s,index:r,items:i,newIndex:l,previousItems:o,previousContainerId:c,transition:d}=e;return!d||!s||o!==i&&r===l?!1:a?!0:l!==r&&t===c},yje={duration:200,easing:"ease"},Sq="transform",bje=vp.Transition.toString({property:Sq,duration:0,easing:"linear"}),vje={roleDescription:"sortable"};function wje(e){let{disabled:t,index:a,node:s,rect:r}=e;const[i,l]=h.useState(null),o=h.useRef(a);return _l(()=>{if(!t&&a!==o.current&&s.current){const c=r.current;if(c){const d=Yf(s.current,{ignoreTransform:!0}),u={x:c.left-d.left,y:c.top-d.top,scaleX:c.width/d.width,scaleY:c.height/d.height};(u.x||u.y)&&l(u)}}a!==o.current&&(o.current=a)},[t,a,s,r]),h.useEffect(()=>{i&&l(null)},[i]),i}function Nje(e){let{animateLayoutChanges:t=xje,attributes:a,disabled:s,data:r,getNewIndex:i=pje,id:l,strategy:o,resizeObserverConfig:c,transition:d=yje}=e;const{items:u,containerId:f,activeIndex:p,disabled:x,disableTransforms:y,sortedRects:w,overIndex:v,useDragOverlay:C,strategy:N}=h.useContext(Cq),S=jje(s,x),T=u.indexOf(l),k=h.useMemo(()=>({sortable:{containerId:f,index:T,items:u},...r}),[f,r,T,u]),_=h.useMemo(()=>u.slice(u.indexOf(l)),[u,l]),{rect:E,node:A,isOver:I,setNodeRef:z}=uje({id:l,data:k,disabled:S.droppable,resizeObserverConfig:{updateMeasurementsFor:_,...c}}),{active:F,activatorEvent:D,activeNodeRect:M,attributes:W,setNodeRef:Z,listeners:R,isDragging:Q,over:Y,setActivatorNodeRef:oe,transform:re}=lje({id:l,data:k,attributes:{...vje,...a},disabled:S.draggable}),ee=Bwe(z,Z),H=!!F,ye=H&&!y&&Iy(p)&&Iy(v),te=!C&&Q,ve=te&&ye?re:null,Oe=ye?ve??(o??N)({rects:w,activeNodeRect:M,activeIndex:p,overIndex:v,index:T}):null,$e=Iy(p)&&Iy(v)?i({id:l,items:u,activeIndex:p,overIndex:v}):T,pe=F?.id,Me=h.useRef({activeId:pe,items:u,newIndex:$e,containerId:f}),Le=u!==Me.current.items,he=t({active:F,containerId:f,isDragging:Q,isSorting:H,id:l,index:T,items:u,newIndex:Me.current.newIndex,previousItems:Me.current.items,previousContainerId:Me.current.containerId,transition:d,wasDragging:Me.current.activeId!=null}),ae=wje({disabled:!he,index:T,node:A,rect:E});return h.useEffect(()=>{H&&Me.current.newIndex!==$e&&(Me.current.newIndex=$e),f!==Me.current.containerId&&(Me.current.containerId=f),u!==Me.current.items&&(Me.current.items=u)},[H,$e,f,u]),h.useEffect(()=>{if(pe===Me.current.activeId)return;if(pe!=null&&Me.current.activeId==null){Me.current.activeId=pe;return}const ge=setTimeout(()=>{Me.current.activeId=pe},50);return()=>clearTimeout(ge)},[pe]),{active:F,activeIndex:p,attributes:W,data:k,rect:E,index:T,newIndex:$e,items:u,isOver:I,isSorting:H,isDragging:Q,listeners:R,node:A,overIndex:v,over:Y,setNodeRef:ee,setActivatorNodeRef:oe,setDroppableNodeRef:z,setDraggableNodeRef:Z,transform:ae??Oe,transition:Ae()};function Ae(){if(ae||Le&&Me.current.newIndex===T)return bje;if(!(te&&!EP(D)||!d)&&(H||he))return vp.Transition.toString({...d,property:Sq})}}function jje(e,t){var a,s;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(a=e?.draggable)!=null?a:t.draggable,droppable:(s=e?.droppable)!=null?s:t.droppable}}function kv(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const Cje=[fn.Down,fn.Right,fn.Up,fn.Left],Sje=(e,t)=>{let{context:{active:a,collisionRect:s,droppableRects:r,droppableContainers:i,over:l,scrollableAncestors:o}}=t;if(Cje.includes(e.code)){if(e.preventDefault(),!a||!s)return;const c=[];i.getEnabled().forEach(f=>{if(!f||f!=null&&f.disabled)return;const p=r.get(f.id);if(p)switch(e.code){case fn.Down:s.top<p.top&&c.push(f);break;case fn.Up:s.top>p.top&&c.push(f);break;case fn.Left:s.left>p.left&&c.push(f);break;case fn.Right:s.left<p.left&&c.push(f);break}});const d=rNe({collisionRect:s,droppableRects:r,droppableContainers:c});let u=dq(d,"id");if(u===l?.id&&d.length>1&&(u=d[1].id),u!=null){const f=i.get(a.id),p=i.get(u),x=p?r.get(p.id):null,y=p?.node.current;if(y&&x&&f&&p){const v=GN(y).some((_,E)=>o[E]!==_),C=_q(f,p),N=_je(f,p),S=v||!C?{x:0,y:0}:{x:N?s.width-x.width:0,y:N?s.height-x.height:0},T={x:x.left,y:x.top};return S.x&&S.y?T:bp(T,S)}}}};function _q(e,t){return!kv(e)||!kv(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function _je(e,t){return!kv(e)||!kv(t)||!_q(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const bl=(e,t="")=>`${t} ${new Intl.NumberFormat("en-US",{minimumFractionDigits:0}).format(e||0)}`,mT=e=>e?new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",Aje=e=>{if(!e)return 0;const t=new Date-new Date(e);return Math.floor(t/(1e3*60*60*24))},Eje=(e,t)=>{if(!e||e.length===0)return;const a=e.map(c=>({ID:c.id,Name:c.name||`${c.first_name} ${c.last_name}`,Company:c.company_name||c.account?.name||"",Stage:c.stage||c.status,Amount:c.amount||0,Date:mT(c.created_at)})),s=Object.keys(a[0]).join(","),r=a.map(c=>Object.values(c).map(d=>typeof d=="string"?`"${d.replace(/"/g,'""')}"`:d).join(",")),i="data:text/csv;charset=utf-8,"+[s,...r].join(`
`),l=encodeURI(i),o=document.createElement("a");o.setAttribute("href",l),o.setAttribute("download",`${t}.csv`),document.body.appendChild(o),o.click(),document.body.removeChild(o)},fT=({label:e,count:t,value:a,width:s,color:r,onClick:i,isActive:l,isLead:o,weightedValue:c,currencySymbol:d,conversionRate:u,compact:f=!1})=>n.jsxs("div",{className:"flex flex-col items-center w-full",children:[u&&n.jsx("div",{className:`flex justify-center relative z-0 ${f?"-my-1":"-my-2 mb-1"}`,children:n.jsxs("div",{className:`bg-gray-100 text-gray-500 font-bold rounded-full border border-white shadow-sm flex items-center ${f?"text-[8px] px-1.5":"text-[10px] px-2 py-0.5"}`,children:[n.jsx(xE,{className:"mr-1"})," ",u,"%"]})}),n.jsxs("div",{onClick:i,className:`w-full relative group cursor-pointer transition-all duration-300 transform ${l?"scale-105 z-10":"hover:scale-102 hover:opacity-90"}`,children:[n.jsxs("div",{className:"flex justify-between items-end mb-1 px-1",children:[n.jsx("span",{className:`${f?"text-[10px]":"text-xs"} font-bold uppercase tracking-wider ${l?"text-blue-700":"text-gray-500"}`,children:e}),n.jsx("span",{className:`${f?"text-[10px]":"text-xs"} text-gray-400`,children:t})]}),n.jsxs("div",{className:`${f?"h-6":"h-10"} w-full bg-gray-100 rounded-r-lg overflow-hidden flex items-center relative shadow-sm`,children:[n.jsx("div",{className:`h-full ${r} transition-all duration-700 ease-out flex items-center px-2 text-white font-bold relative overflow-hidden`,style:{width:s},children:n.jsx("span",{className:`z-10 drop-shadow-md ${f?"text-xs":"text-sm"}`,children:o?t:bl(a,d)})}),!o&&c>0&&n.jsx("div",{className:"absolute left-0 top-0 h-full bg-white opacity-20 z-20",style:{width:`${c/a*parseFloat(s)}%`}})]})]})]}),Tje=({id:e,children:t})=>{const{attributes:a,listeners:s,setNodeRef:r,transform:i,transition:l,isDragging:o}=Nje({id:e}),c={transform:vp.Transform.toString(i),transition:l,zIndex:o?50:"auto",opacity:o?.5:1,position:"relative"};return n.jsx("div",{ref:r,style:c,className:"h-full",children:pt.cloneElement(t,{dragHandleProps:{...a,...s}})})},kje=({user:e,metrics:t,stages:a,currencySymbol:s,target:r,dragHandleProps:i})=>{t.filteredDeals.reduce((f,p)=>f+parseFloat(p.amount||0)*((p.probability||0)/100),0);const l=t.metrics.CLOSED_WON?.value||0,o=t.metrics.CLOSED_LOST?.value||0,c=t.metrics.CLOSED_WON.count+t.metrics.CLOSED_LOST.count,d=c>0?(t.metrics.CLOSED_WON.count/c*100).toFixed(0):0,u=r>0?l/r*100:0;return n.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md border border-gray-100 flex flex-col h-full hover:shadow-lg transition-shadow relative group",children:[n.jsxs("div",{className:"flex flex-col mb-4 pb-4 border-b border-gray-100",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-bold mr-3 flex-shrink-0",children:e.name.charAt(0)}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-gray-800 text-sm",children:e.name}),n.jsxs("div",{className:"flex gap-2 text-[10px] mt-1",children:[n.jsxs("span",{className:"text-green-600 bg-green-50 px-1.5 py-0.5 rounded border border-green-100",children:["Win: ",d,"%"]}),n.jsxs("span",{className:"text-red-600 bg-red-50 px-1.5 py-0.5 rounded border border-red-100",children:["Lost: ",bl(o,s)]})]})]})]}),i&&n.jsx("button",{...i,className:"p-1.5 text-gray-300 hover:text-blue-500 hover:bg-blue-50 rounded-md cursor-grab active:cursor-grabbing transition-colors touch-none",title:"Drag to reorder",children:n.jsx(lie,{size:16})})]}),r>0?n.jsxs("div",{className:"w-full mt-2 bg-gray-50 p-2 rounded-lg border border-gray-100",children:[n.jsxs("div",{className:"flex justify-between items-center text-[10px] text-gray-500 mb-1",children:[n.jsx("span",{className:"font-semibold text-gray-600",children:"Target Achievement"}),n.jsxs("span",{className:u>=100?"text-green-600 font-bold":"text-blue-600 font-bold",children:[u.toFixed(0),"%"]})]}),n.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden mb-1",children:n.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${u>=100?"bg-green-500":"bg-blue-500"}`,style:{width:`${Math.min(u,100)}%`}})}),n.jsxs("div",{className:"flex justify-between text-[9px] text-gray-400",children:[n.jsxs("span",{children:["Achieved: ",n.jsx("span",{className:"text-gray-700 font-medium",children:bl(l,s)})]}),n.jsxs("span",{children:["Target: ",bl(r,s)]})]})]}):n.jsx("div",{className:"text-[10px] text-gray-400 italic mt-1 text-center bg-gray-50 p-1 rounded",children:"No target assigned"})]}),n.jsx("div",{className:"flex-grow space-y-2",children:a.map((f,p)=>{const x=t.metrics[f.key];let y=null;if(p>0){const w=a[p-1].key,v=t.metrics[w].count;v>0&&(y=(x.count/v*100).toFixed(0))}return n.jsx(fT,{label:f.label,count:x.count,value:x.value,width:x.width,color:x.color,isLead:!f.isDeal,weightedValue:x.weightedValue,currencySymbol:s,conversionRate:y,compact:!0,onClick:()=>{},isActive:!1},f.key)})})]})},Lje=({data:e,stageKey:t,currencySymbol:a})=>{const s=yt(),[r,i]=h.useState({key:null,direction:"desc"}),l=t==="LEADS",o=t==="CLOSED_WON",c=t==="CLOSED_LOST",d=!l&&!o&&!c,u=h.useMemo(()=>r.key?[...e].sort((x,y)=>{let w=x[r.key],v=y[r.key];return(r.key==="amount"||r.key==="probability")&&(w=parseFloat(x[r.key]||0),v=parseFloat(y[r.key]||0)),w<v?r.direction==="asc"?-1:1:w>v?r.direction==="asc"?1:-1:0}):e,[e,r]),f=x=>{i({key:x,direction:r.key===x&&r.direction==="desc"?"asc":"desc"})},p=({columnKey:x})=>r.key!==x?n.jsx(xE,{className:"inline ml-1 opacity-0 group-hover:opacity-30"}):r.direction==="asc"?n.jsx(nie,{className:"inline ml-1 text-blue-600"}):n.jsx(xE,{className:"inline ml-1 text-blue-600"});return!e||e.length===0?n.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-400 bg-gray-50 rounded-xl border-2 border-dashed border-gray-200",children:[n.jsx(zk,{size:48,className:"mb-4 opacity-50"}),n.jsx("p",{className:"font-medium",children:"No records in this stage"})]}):n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden flex flex-col h-full",children:n.jsx("div",{className:"overflow-x-auto flex-grow",children:n.jsxs("table",{className:"w-full text-left border-collapse",children:[n.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:n.jsxs("tr",{children:[n.jsxs("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer group",onClick:()=>f("name"),children:["Name ",n.jsx(p,{columnKey:"name"})]}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Company"}),l&&n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Contact Info"}),d&&n.jsxs(n.Fragment,{children:[n.jsxs("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right cursor-pointer group",onClick:()=>f("amount"),children:["Value ",n.jsx(p,{columnKey:"amount"})]}),n.jsxs("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-center cursor-pointer group",onClick:()=>f("probability"),children:["Prob. ",n.jsx(p,{columnKey:"probability"})]}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-center",children:"Age"})]}),o&&n.jsxs("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right text-green-600 cursor-pointer group",onClick:()=>f("amount"),children:["Booked ",n.jsx(p,{columnKey:"amount"})]}),c&&n.jsxs(n.Fragment,{children:[n.jsxs("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right text-red-600 cursor-pointer group",onClick:()=>f("amount"),children:["Lost Value ",n.jsx(p,{columnKey:"amount"})]}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-center",children:"Lost Date"})]}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right",children:"Owner"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-100",children:u.map(x=>{const y=l?0:Aje(x.stage_updated_at||x.created_at),w=y>30&&d;return n.jsxs("tr",{className:"hover:bg-blue-50 transition-colors cursor-pointer group",onClick:()=>s(l?`/admin/leads/${x.id}`:`/admin/deals/info?id=${x.id}`),children:[n.jsxs("td",{className:"p-4",children:[n.jsx("p",{className:"font-bold text-gray-800 text-sm group-hover:text-blue-600 transition-colors",children:l?`${x.first_name} ${x.last_name}`:x.name}),n.jsx("p",{className:"text-xs text-gray-400 mt-0.5",children:mT(x.created_at)})]}),n.jsx("td",{className:"p-4 text-sm text-gray-600",children:l?x.company_name:x.account?.name}),l&&n.jsxs("td",{className:"p-4 text-xs text-gray-500",children:[x.email&&n.jsxs("div",{className:"flex items-center mb-1",children:[n.jsx(Zn,{className:"mr-1"})," ",x.email]}),x.phone&&n.jsxs("div",{className:"flex items-center",children:[n.jsx(At,{className:"mr-1"})," ",x.phone]})]}),d&&n.jsxs(n.Fragment,{children:[n.jsx("td",{className:"p-4 text-right font-medium text-gray-700",children:bl(x.amount,a)}),n.jsx("td",{className:"p-4 text-center",children:n.jsxs("span",{className:`inline-block px-2 py-1 rounded text-xs font-bold ${x.probability>=80?"bg-green-100 text-green-700":x.probability>=50?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-600"}`,children:[x.probability,"%"]})}),n.jsx("td",{className:"p-4 text-center",children:w?n.jsxs("div",{className:"flex items-center justify-center text-red-600 bg-red-50 px-2 py-1 rounded border border-red-100",title:"Stuck for >30 days",children:[n.jsx(Ri,{size:14,className:"mr-1"}),n.jsxs("span",{className:"text-xs font-bold",children:[y,"d"]})]}):n.jsxs("span",{className:"text-xs text-gray-400",children:[y,"d"]})})]}),o&&n.jsx("td",{className:"p-4 text-right font-bold text-green-700",children:bl(x.amount,a)}),c&&n.jsxs(n.Fragment,{children:[n.jsx("td",{className:"p-4 text-right font-bold text-red-600 opacity-75",children:bl(x.amount,a)}),n.jsx("td",{className:"p-4 text-center text-xs text-gray-500",children:mT(x.stage_updated_at)})]}),n.jsx("td",{className:"p-4 text-right",children:n.jsxs("div",{className:"flex items-center justify-end text-gray-500 text-xs",children:[n.jsx(Jt,{className:"mr-1"}),l?x.lead_owner?.first_name||x.owner?.first_name||x.assigned_to?.first_name||"Unassigned":x.assigned_deals?.first_name||x.deal_creator?.first_name||"Unassigned"]})})]},x.id)})})]})})})},Pje=({leads:e,deals:t,currencySymbol:a,targets:s=[]})=>{const[r,i]=h.useState("ALL"),[l,o]=h.useState("ALL"),[c,d]=h.useState("ALL"),[u,f]=h.useState("AGGREGATE"),[p,x]=h.useState([]),y=nNe($6(PP,{activationConstraint:{distance:5}}),$6(kP,{coordinateGetter:Sje})),w=h.useMemo(()=>{const E=new Date;if(l==="THIS_MONTH")return{start:new Date(E.getFullYear(),E.getMonth(),1),end:new Date(E.getFullYear(),E.getMonth()+1,0)};if(l==="THIS_QUARTER"){const A=Math.floor(E.getMonth()/3)*3;return{start:new Date(E.getFullYear(),A,1),end:new Date(E.getFullYear(),A+3,0)}}return l==="THIS_YEAR"?{start:new Date(E.getFullYear(),0,1),end:new Date(E.getFullYear(),11,31)}:null},[l]),v=h.useMemo(()=>s.filter(E=>{if(c!=="ALL"){const A=E.user?.id||E.user_id||E.assigned_to;if(parseInt(A)!==parseInt(c))return!1}if(w){const A=new Date(E.start_date),I=new Date(E.end_date);return A<=w.end&&I>=w.start}return!0}),[s,c,w]),C=h.useMemo(()=>{const E=new Map,A=I=>{I&&I.id&&E.set(I.id,`${I.first_name} ${I.last_name}`)};return e.forEach(I=>A(I.lead_owner||I.owner||I.assigned_to)),t.forEach(I=>{A(I.assigned_deals),A(I.deal_creator)}),Array.from(E.entries()).map(([I,z])=>({id:I,name:z}))},[e,t]),N=h.useMemo(()=>{const E=new Date;let A=null;l==="THIS_MONTH"?A=new Date(E.getFullYear(),E.getMonth(),1):l==="THIS_QUARTER"?A=new Date(E.getFullYear(),Math.floor(E.getMonth()/3)*3,1):l==="THIS_YEAR"&&(A=new Date(E.getFullYear(),0,1));const I=R=>{const Q=new Date(R.created_at);if(A&&Q<A)return!1;if(c!=="ALL"){const Y=parseInt(c);return!!(R.lead_owner&&(R.lead_owner.id||R.lead_owner)===Y||R.assigned_to?.id===Y||R.owner?.id===Y||R.assigned_deals?.id===Y||R.created_by===Y)}return!0},z=e.filter(I),F=t.filter(I),D=[{key:"LEADS",label:"Top Leads",color:"bg-blue-400",isDeal:!1},{key:"PROSPECTING",label:"Prospecting",color:"bg-blue-600",isDeal:!0},{key:"QUALIFICATION",label:"Qualification",color:"bg-indigo-600",isDeal:!0},{key:"PROPOSAL",label:"Proposal",color:"bg-purple-600",isDeal:!0},{key:"NEGOTIATION",label:"Negotiation",color:"bg-pink-600",isDeal:!0},{key:"CLOSED_WON",label:"Closed Won",color:"bg-emerald-500",isDeal:!0},{key:"CLOSED_LOST",label:"Closed Lost",color:"bg-red-500",isDeal:!0}],M=(R,Q)=>{const Y=D.reduce((re,ee)=>(re[ee.key]={...ee,count:0,value:0,weightedValue:0,items:[]},re),{});Y.LEADS.count=R.length,Y.LEADS.items=R,Q.forEach(re=>{const ee=(re.stage||"").toUpperCase();if(Y[ee]){Y[ee].count++,Y[ee].items.push(re);const H=parseFloat(re.amount||0);Y[ee].value+=H,Y[ee].weightedValue+=H*((re.probability||0)/100)}});const oe=Math.max(...Object.values(Y).map(re=>re.count),1);return Object.keys(Y).forEach(re=>{const ee=Y[re];ee.width=ee.count===0?"0%":`${Math.max(ee.count/oe*100,15)}%`}),{metrics:Y,filteredDeals:Q,filteredLeads:R}},W=M(z,F),Z=[];return u==="COMPARE"&&(c==="ALL"?C:C.filter(Q=>Q.id===parseInt(c))).forEach(Q=>{const Y=parseInt(Q.id),oe=z.filter(ye=>(ye.lead_owner?.id||ye.lead_owner||ye.assigned_to?.id||ye.owner?.id)===Y),re=F.filter(ye=>(ye.assigned_deals?.id||ye.created_by)===Y),ee=v.find(ye=>{const te=ye.user?.id||ye.user_id||ye.assigned_to;return parseInt(te)===Y}),H=parseFloat(ee?.amount||ee?.target_amount||ee?.value||0);(oe.length>0||re.length>0||H>0)&&Z.push({user:Q,data:M(oe,re),target:H})}),{stages:D,aggregate:W,userGroups:Z}},[t,e,l,c,u,C,v]),S=h.useMemo(()=>{if(!N.userGroups.length)return[];const E=[...N.userGroups];return p.length>0&&E.sort((A,I)=>{const z=p.indexOf(A.user.id),F=p.indexOf(I.user.id);return z!==-1&&F!==-1?z-F:z!==-1?-1:F!==-1?1:0}),E},[N.userGroups,p]),T=E=>{const{active:A,over:I}=E;A.id!==I.id&&x(z=>{const F=S.map(W=>W.user.id),D=F.indexOf(A.id),M=F.indexOf(I.id);return DP(F,D,M)})},k=h.useMemo(()=>{const E=v.reduce((Y,oe)=>Y+parseFloat(oe.amount||oe.target_amount||oe.value||0),0),A=N.aggregate.metrics,I=A.CLOSED_WON?.value||0,z=A.CLOSED_WON?.count||0,F=A.CLOSED_LOST?.value||0,D=A.CLOSED_LOST?.count||0,M=A.LEADS?.count||0,W=E>0?I/E*100:0,Z=z+D,R=Z>0?z/Z*100:0,Q=M>0?z/M*100:0;return{totalTarget:E,totalWon:I,totalLost:F,progress:W,winRate:R,conversionRate:Q}},[v,N]),_=h.useMemo(()=>r==="ALL"?[]:N.aggregate.metrics[r]?.items||[],[r,N]);return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 flex flex-col h-full",children:[n.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center",children:[n.jsx(zk,{className:"mr-2"})," Pipeline Intelligence"]}),n.jsx("p",{className:"text-sm text-gray-500",children:"Analyze pipeline velocity and bottlenecks."})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 mt-4 md:mt-0",children:[n.jsxs("select",{value:l,onChange:E=>o(E.target.value),className:"bg-gray-50 border border-gray-200 text-gray-700 text-xs rounded-lg p-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"ALL",children:"All Time"}),n.jsx("option",{value:"THIS_MONTH",children:"This Month"}),n.jsx("option",{value:"THIS_QUARTER",children:"This Quarter"}),n.jsx("option",{value:"THIS_YEAR",children:"This Year"})]}),n.jsxs("select",{value:c,onChange:E=>d(E.target.value),className:"bg-gray-50 border border-gray-200 text-gray-700 text-xs rounded-lg p-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"ALL",children:"All Users"}),C.map(E=>n.jsx("option",{value:E.id,children:E.name},E.id))]}),n.jsxs("div",{className:"flex bg-gray-100 p-0.5 rounded-lg",children:[n.jsx("button",{onClick:()=>f("AGGREGATE"),className:`px-2 py-1 rounded-md text-xs font-medium transition-all ${u==="AGGREGATE"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Aggregate"}),n.jsx("button",{onClick:()=>f("COMPARE"),className:`px-2 py-1 rounded-md text-xs font-medium transition-all ${u==="COMPARE"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Compare"})]})]})]}),u==="COMPARE"?n.jsx(sje,{sensors:y,collisionDetection:sNe,onDragEnd:T,children:n.jsx(gje,{items:S.map(E=>E.user.id),strategy:OP,children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 overflow-x-auto pb-4",children:[S.map(E=>n.jsx(Tje,{id:E.user.id,children:n.jsx(kje,{user:E.user,metrics:E.data,stages:N.stages.filter(A=>A.key!=="CLOSED_LOST"),currencySymbol:a,target:E.target})},E.user.id)),S.length===0&&n.jsx("div",{className:"col-span-full text-center py-10 text-gray-400",children:"No data for selected filters."})]})})}):n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[n.jsxs("div",{className:"lg:col-span-4 flex flex-col space-y-2 relative",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute left-6 top-4 bottom-4 w-0.5 bg-gray-100 -z-0"}),N.stages.filter(E=>E.key!=="CLOSED_LOST").map((E,A)=>{const I=N.aggregate.metrics[E.key];let z=null;if(A>0){const F=N.stages[A-1].key,D=N.aggregate.metrics[F].count;D>0&&(z=(I.count/D*100).toFixed(0))}return n.jsx(fT,{label:E.label,count:I.count,value:I.value,width:I.width,color:I.color,isLead:!E.isDeal,weightedValue:I.weightedValue,currencySymbol:a,isActive:r===E.key,conversionRate:z,onClick:()=>i(E.key)},E.key)})]}),n.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[n.jsx("div",{className:"mb-2 text-xs font-bold text-gray-400 uppercase",children:"Funnel Health"}),n.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center mb-4",children:[n.jsxs("div",{className:"bg-green-50 rounded p-2 border border-green-100",children:[n.jsx("p",{className:"text-[9px] text-green-600 uppercase font-bold",children:"Win Rate"}),n.jsxs("p",{className:"text-sm font-bold text-gray-800",children:[k.winRate.toFixed(0),"%"]})]}),n.jsxs("div",{className:"bg-blue-50 rounded p-2 border border-blue-100",children:[n.jsx("p",{className:"text-[9px] text-blue-600 uppercase font-bold",children:"Conversion"}),n.jsxs("p",{className:"text-sm font-bold text-gray-800",children:[k.conversionRate.toFixed(0),"%"]})]}),n.jsxs("div",{className:"bg-red-50 rounded p-2 border border-red-100",children:[n.jsx("p",{className:"text-[9px] text-red-600 uppercase font-bold",children:"Lost Value"}),n.jsx("p",{className:"text-sm font-bold text-gray-800",children:bl(k.totalLost,a)})]})]}),n.jsx(fT,{label:"Closed Lost",count:N.aggregate.metrics.CLOSED_LOST.count,value:N.aggregate.metrics.CLOSED_LOST.value,width:N.aggregate.metrics.CLOSED_LOST.width,color:"bg-red-500 opacity-90",isLead:!1,weightedValue:0,currencySymbol:a,isActive:r==="CLOSED_LOST",onClick:()=>i("CLOSED_LOST")},"CLOSED_LOST"),n.jsxs("div",{className:"bg-gray-50 p-2 rounded-lg border border-gray-100 mt-4",children:[n.jsxs("div",{className:"flex justify-between items-center text-[10px] mb-1",children:[n.jsxs("span",{className:"font-bold text-gray-600 flex items-center",children:[n.jsx(tr,{className:"mr-1"})," Total Target"]}),n.jsxs("span",{className:k.progress>=100?"text-green-600 font-bold":"text-blue-600 font-bold",children:[k.progress.toFixed(0),"%"]})]}),n.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden mb-1",children:n.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${k.progress>=100?"bg-green-500":"bg-blue-500"}`,style:{width:`${Math.min(k.progress,100)}%`}})}),n.jsxs("div",{className:"flex justify-between text-[9px] text-gray-400",children:[n.jsxs("span",{children:["Achieved: ",n.jsx("span",{className:"text-gray-700 font-medium",children:bl(k.totalWon,a)})]}),n.jsxs("span",{children:["Goal: ",bl(k.totalTarget,a)]})]})]})]})]}),n.jsxs("div",{className:"lg:col-span-8 h-[600px] flex flex-col",children:[n.jsxs("div",{className:"bg-gray-50 p-3 rounded-t-xl border-b border-gray-200 flex justify-between items-center",children:[n.jsx("h3",{className:"text-sm font-bold text-gray-800 flex items-center",children:r==="ALL"?n.jsx("span",{children:"Select a stage to view details"}):n.jsxs(n.Fragment,{children:[n.jsx("span",{className:`w-2.5 h-2.5 rounded-full mr-2 ${N.aggregate.metrics[r]?.color}`}),N.stages.find(E=>E.key===r)?.label," Details",n.jsxs("span",{className:"ml-2 px-2 py-0.5 bg-white border border-gray-200 text-gray-600 text-[10px] rounded-full",children:[_.length," records"]})]})}),r!=="ALL"&&_.length>0&&n.jsxs("button",{onClick:()=>Eje(_,`Funnel_${r}`),className:"text-[10px] font-bold text-blue-600 hover:bg-blue-100 px-2 py-1 rounded transition-colors flex items-center",children:[n.jsx($o,{className:"mr-1"})," Export"]})]}),r==="ALL"?n.jsxs("div",{className:"bg-white flex-grow rounded-b-xl border border-gray-100 flex flex-col items-center justify-center p-12 text-center text-gray-400",children:[n.jsx(iie,{size:48,className:"mb-4 text-blue-100"}),n.jsx("p",{children:"Click on any stage bar (including Lost Deals) to inspect records."})]}):n.jsx(Lje,{data:_,stageKey:r,currencySymbol:a})]})]})]})},Dje=e=>n.jsx(Bt,{...e}),Oje=e=>n.jsx(zf,{...e}),MP=e=>n.jsx(zs,{...e}),Mje=e=>n.jsx(Xp,{...e}),Ije=e=>n.jsx(Dw,{...e}),$je=e=>n.jsx(Ct,{...e}),Rje=e=>n.jsx(At,{...e}),zje=e=>n.jsx(Mw,{...e}),Aq=e=>n.jsx(Ow,{...e}),Eq=e=>n.jsx(On,{...e}),Tq=e=>n.jsx(Jt,{...e}),Fje=e=>n.jsx(Wn,{...e}),Uje=e=>n.jsx(Qt,{...e}),Bje=e=>n.jsx(xn,{...e}),kq=e=>n.jsx(tr,{...e}),Hje=e=>n.jsx(ba,{...e}),Gje=e=>n.jsx(Ct,{...e}),Wje=e=>n.jsx(Ls,{...e}),Vje=e=>n.jsx(zo,{...e}),qje=e=>n.jsx(ws,{...e}),Lq=(e,t="")=>{const a=parseFloat(e)||0;return new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short",maximumFractionDigits:1}).format(a).replace(/^/,`${t} `)},Yje=e=>{if(!e)return 0;const t=new Date-new Date(e);return Math.floor(t/(1e3*60*60*24))},Qje=e=>{switch(e){case"Negotiation":return{text:"text-purple-700",bg:"bg-purple-100"};case"Proposal":return{text:"text-red-700",bg:"bg-red-100"};case"Qualification":return{text:"text-yellow-700",bg:"bg-yellow-100"};case"Prospecting":return{text:"text-blue-700",bg:"bg-blue-100"};case"Closed Won":return{text:"text-green-700",bg:"bg-green-100"};case"Closed Lost":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},Kje=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},Xje=e=>{switch(e){case"call":return{Icon:Rje,color:"text-red-500",bgColor:"bg-red-100"};case"qualification":return{Icon:zje,color:"text-green-600",bgColor:"bg-green-100"};default:return{Icon:$je,color:"text-blue-500",bgColor:"bg-blue-100"}}},Zje=e=>{switch(e.toUpperCase()){case"HIGH":return{text:"text-red-700",bg:"bg-red-100"};case"LOW":return{text:"text-blue-700",bg:"bg-blue-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},Jje=({searchQuery:e,onSearchChange:t,searchResults:a,onSearchResultClick:s})=>{const r=yt(),[i,l]=h.useState(!1),o=h.useRef(null),c=[{icon:Eq,label:"Account"},{icon:Tq,label:"Contact"},{icon:Fje,label:"Leads"},{icon:Uje,label:"Deals"},{icon:Bje,label:"Quotes"},{icon:kq,label:"Target"},{icon:Hje,label:"Task"},{icon:Gje,label:"Meeting"},{icon:Wje,label:"Call"},{icon:qje,label:"Audit"},{icon:Vje,label:"Territory"}];h.useEffect(()=>{const f=p=>{o.current&&!o.current.contains(p.target)&&l(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const d=f=>{t(f.target.value),l(f.target.value.trim().length>0)},u=f=>{s&&s(f),l(!1)};return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 sm:p-4 flex flex-col items-start space-y-4 w-full",children:[n.jsxs("div",{className:"w-full flex justify-center relative",ref:o,children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg lg:mt-3 px-4 py-2 w-full max-w-md md:max-w-2xl lg:max-w-2xl focus-within:ring-2 focus-within:ring-blue-500 transition duration-150",children:[n.jsx(Dje,{size:20,className:"text-gray-400 mr-3 flex-shrink-0"}),n.jsx("input",{type:"text",placeholder:"Search Leads, Deals, or Accounts...",className:"focus:outline-none text-base w-full",value:e,onChange:d,onFocus:()=>e.trim().length>0&&l(!0)})]}),i&&Array.isArray(a)&&a.length>0&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:a.map((f,p)=>n.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition duration-150",onClick:()=>u(f),children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:f.name}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:f.type}),f.details&&n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:f.details})]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${f.type==="Lead"?"bg-blue-100 text-blue-600":f.type==="Deal"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:f.type})]})},p))})]}),n.jsx("div",{className:"w-full overflow-x-auto lg:overflow-x-hidden scroll-smooth flex justify-center",children:n.jsx("div",{className:"flex flex-nowrap space-x-3 lg:space-x-4 xl:space-x-3 px-2 sm:px-0",children:c.map((f,p)=>n.jsxs("div",{className:"relative flex-shrink-0 group",children:[n.jsx("button",{className:"p-3 text-gray-500 hover:text-gray-900 transition duration-150 rounded-full hover:bg-gray-100 focus:outline-none cursor-pointer","aria-label":f.label,title:f.label,onClick:()=>{const x={Account:"/admin/accounts",Contact:"/admin/contacts",Leads:"/admin/leads",Deals:"/admin/deals",Quotes:"/admin/quotes",Target:"/admin/targets",Task:"/admin/tasks",Meeting:"/admin/meetings",Call:"/admin/calls",Audit:"/admin/audit",Territory:"/admin/territory"};x[f.label]&&r(x[f.label])},children:n.jsx(f.icon,{size:24,className:"lg:scale-95"})}),n.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-1.5 bg-gray-900 text-white text-xs font-semibold rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-75 ease-in-out z-50 shadow-lg",children:[f.label,n.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]},p))})})]})},e1e=({action:e,description:t,entity_type:a,entity_name:s,timestamp:r})=>{const i=yt(),l=u=>{if(!u)return"Unknown";const f=new Date(u),x=new Date-f,y=Math.floor(x/6e4),w=Math.floor(x/36e5),v=Math.floor(x/864e5);return y<1?"Just now":y<60?`${y} min ago`:w<24?`${w} hour${w>1?"s":""} ago`:v<7?`${v} day${v>1?"s":""} ago`:f.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},o=e||t||"Action",c=s||a||"System",d=l(r);return n.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i("/admin/audit"),children:[n.jsxs("p",{className:"text-sm text-gray-800 flex-grow font-medium",children:[o," ",n.jsxs("span",{className:"text-gray-500 italic text-xs",children:["(",c,")"]})]}),n.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-4",children:d})]})},t1e=({logs:e,loading:t})=>{const a=yt();return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Recent Logs"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/admin/audit"),children:[n.jsx("span",{children:"See All"}),n.jsx(Aq,{size:14,className:"transform -rotate-45"})]})]}),e&&e.length>0?n.jsx("ul",{className:"space-y-1",children:e.slice(0,3).map((s,r)=>n.jsx(e1e,{...s},r))}):n.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No recent logs"})]})},n1e=({icon:e,title:t,value:a,color:s,bgColor:r,loading:i,onClick:l})=>n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l||(()=>console.log(`Clicked metric card: ${t}`)),children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:20})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a||0})]})]}),a1e=({revenueData:e,loading:t})=>{const a=yt(),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=h.useMemo(()=>{if(!e||e.length===0){const w=new Date().getMonth(),v=[],C=[];for(let N=0;N<=w;N++)v.push(s[N]),C.push(0);return{labels:v,revenues:C,maxRevenue:0}}const o={};e.forEach(y=>{const w=y.close_date||y.closeDate||null,v=y.stage||"",C=v.toUpperCase()==="CLOSED_WON"||v==="CLOSED_WON";let N=y.amount;N&&typeof N=="object"&&N.toString?N=parseFloat(N.toString()):N=parseFloat(N)||0;const S=N>0;if(w&&w!==null&&C&&S)try{let T=new Date(w);if(isNaN(T.getTime())){const k=String(w).split("T")[0];T=new Date(k+"T00:00:00")}if(!isNaN(T.getTime())){const k=T.getFullYear(),_=T.getMonth()+1,E=`${k}-${String(_).padStart(2,"0")}`;o[E]||(o[E]=0),o[E]+=N}}catch(T){console.error("Error parsing deal date:",w,T)}});const c=Object.keys(o).map(y=>parseInt(y.split("-")[0])),d=c.length>0?[...new Set(c)].sort():[],u=new Date().getFullYear(),f=[],p=[];for(let y=0;y<12;y++){const w=`${u}-${String(y+1).padStart(2,"0")}`;f.push(s[y]),p.push(o[w]||0)}if(d.length>0){const y=Math.max(...d);if(y>u)for(let w=u+1;w<=y;w++)for(let v=0;v<12;v++){const C=`${w}-${String(v+1).padStart(2,"0")}`,N=o[C]||0;f.push(`${s[v]} ${w}`),p.push(N)}}const x=Math.max(...p,1);return{labels:f,revenues:p,maxRevenue:x}},[e]),i=r.labels,l=r.revenues;return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Overview"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/admin/deals"),children:[n.jsx("span",{children:"See All"}),n.jsx(Aq,{size:14,className:"transform -rotate-45"})]})]}),n.jsx("div",{className:"h-80 relative flex-1 flex items-center justify-center p-6",children:n.jsx("div",{className:"w-full h-full flex items-center justify-start lg:justify-center overflow-x-auto sm:overflow-x-hidden",children:i&&i.length>0&&l&&l.length>0?n.jsx(BN,{xAxis:[{data:i,scaleType:"point"}],yAxis:[{valueFormatter:o=>o>=1e3?`${(o/1e3).toFixed(0)}k`:o.toString()}],series:[{data:l,showMark:!0,area:!0}],height:320,width:void 0,grid:{vertical:!0,horizontal:!0},margin:{top:40,right:40,bottom:50,left:50},sx:{width:"100%",maxWidth:"100%",minWidth:{xs:600,lg:"100%"}}}):n.jsxs("div",{className:"text-center text-gray-500",children:[n.jsx("p",{className:"text-sm",children:"No revenue data available"}),n.jsx("p",{className:"text-xs mt-2",children:"Closed won deals with close dates will appear here"})]})})})]})},JS=({title:e,items:t,children:a,onSeeAll:s})=>{const r=yt(),i=()=>{if(s)s();else{const l={"Latest Leads":"/admin/leads","Latest Deals":"/admin/deals","Upcoming Activities":"/admin/tasks"};l[e]&&r(l[e])}};return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col h-full",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e}),n.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:i,children:"See All"})]}),a]})},s1e=({first_name:e,last_name:t,company_name:a,source:s,created_at:r,id:i})=>{const l=yt(),{text:o,bg:c}=Kje(s||"Website"),d=x=>{if(!x)return"Unknown";const y=new Date(x),v=new Date-y,C=Math.floor(v/6e4),N=Math.floor(v/36e5),S=Math.floor(v/864e5);return C<60?`${C} min ago`:N<24?y.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):S<7?y.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):y.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},u=`${e||""} ${t||""}`.trim()||"Unknown",f=a||"Unknown Company",p=d(r);return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&l(`/admin/leads/${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800",children:u}),n.jsx("p",{className:"text-xs text-gray-500",children:f})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-400",children:p}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${o} ${c} px-2 py-0.5 rounded-full`,children:s||"Website"})]})]})})},r1e=({name:e,amount:t,account:a,stage:s,created_at:r,stage_updated_at:i,id:l,previousAmount:o,currencySymbol:c})=>{const d=yt(),f={PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"}[s]||s||"Unknown",{text:p,bg:x}=Qje(f),y=Yje(i||r),w=y>30&&s!=="CLOSED_WON"&&s!=="CLOSED_LOST",v=parseFloat(t||0),C=o?v>=o?"up":"down":"up",N=C==="up"?Mje:Ije,S=C==="up"?"text-green-400":"text-red-400",T=a?.name||"Unknown Company";return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>l&&d(`/admin/deals/info?id=${l}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex-shrink",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("p",{className:"font-semibold text-sm text-gray-900",children:e||"Unnamed Deal"}),w&&n.jsxs("span",{className:"text-[10px] bg-red-100 text-red-600 px-1.5 py-0.5 rounded border border-red-200 font-bold flex items-center",children:[n.jsx(MP,{size:10,className:"mr-1"})," ",y," days stuck"]})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:T}),n.jsx("div",{className:"mt-1 flex items-center space-x-2",children:n.jsx("span",{className:`inline-block text-xs font-medium ${p} ${x} px-2 py-0.5 rounded-full`,children:f})})]}),n.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[n.jsx("p",{className:"text-md font-bold text-gray-800",children:Lq(v,c)}),n.jsx(N,{size:16,className:`${S} mt-1`})]})]})})},i1e=({type:e,title:t,assignedTo:a,dueDate:s,scheduledDate:r,priority:i,id:l,activityType:o,fullData:c})=>{const d=yt(),f=o||{Call:"call",Meeting:"meeting",Task:"qualification"}[e]||"meeting",{Icon:p,color:x,bgColor:y}=Xje(f),{text:w,bg:v}=Zje(i||"MEDIUM"),S=(_=>{if(!_)return"No date set";const E=new Date(_),I=E-new Date,z=Math.floor(I/864e5);return z===0?`Today, ${E.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:z===1?`Tomorrow, ${E.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:z===-1?`Yesterday, ${E.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:E.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(s||r),T=a||"Unassigned",k=()=>{l&&(c?f==="call"?(sessionStorage.setItem("callDetailData",JSON.stringify(c)),d(`/admin/calls/info?id=${l}`)):f==="meeting"?(sessionStorage.setItem("meetingDetailData",JSON.stringify(c)),d(`/admin/meetings/info?id=${l}`)):d("/admin/tasks"):d(f==="call"?`/admin/calls/info?id=${l}`:f==="meeting"?`/admin/meetings/info?id=${l}`:"/admin/tasks"))};return n.jsxs("div",{className:"flex items-start py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:k,children:[n.jsx("div",{className:`p-2 rounded-lg ${y} mr-3 flex-shrink-0 mt-1`,children:n.jsx(p,{size:20,className:`${x}`})}),n.jsxs("div",{className:"flex-grow",children:[n.jsxs("p",{className:"font-medium text-gray-800 flex items-center mb-1",children:[n.jsx("span",{className:"text-xl leading-none mr-2",children:""}),t||"Untitled Activity"]}),n.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[n.jsxs("p",{className:"flex items-center",children:[n.jsx(MP,{size:14,className:"mr-1.5 text-gray-400"}),S]}),n.jsxs("p",{className:"flex items-center",children:[n.jsx(Tq,{size:14,className:"mr-1.5 text-gray-400"}),"Assigned to: ",T]})]})]}),n.jsx("span",{className:`inline-block text-xs font-medium ${w} ${v} px-2 py-0.5 rounded-full flex-shrink-0 self-center ml-4`,children:(i||"MEDIUM").toUpperCase()})]})},l1e=()=>{const e=yt(),{user:t}=Kt(),a=t?.company?.currency||"",[s,r]=h.useState([]),[i,l]=h.useState(0),[o,c]=h.useState({activeLeads:0,totalDeals:0,activeAccounts:0,overdueTasks:0}),[d,u]=h.useState([]),[f,p]=h.useState([]),[x,y]=h.useState([]),[w,v]=h.useState([]),[C,N]=h.useState([]),[S,T]=h.useState(!0),[k,_]=h.useState(null),[E,A]=h.useState(""),[I,z]=h.useState([]),[F,D]=h.useState([]),[M,W]=h.useState([]),[Z,R]=h.useState(new Date),Q=h.useRef(null);h.useRef(null);const Y=h.useMemo(()=>{try{if(!E.trim())return[];const H=E.toLowerCase().trim(),ye=[];return Array.isArray(I)&&I.forEach(te=>{const ve=`${te.first_name||""} ${te.last_name||""}`.trim().toLowerCase(),je=(te.company_name||"").toLowerCase(),Oe=(te.email||"").toLowerCase(),$e=(te.phone||"").toLowerCase();(ve.includes(H)||je.includes(H)||Oe.includes(H)||$e.includes(H))&&ye.push({id:te.id,name:`${te.first_name||""} ${te.last_name||""}`.trim()||"Unnamed Lead",type:"Lead",details:te.company_name||"No company",route:`/admin/leads/${te.id}`})}),Array.isArray(F)&&F.forEach(te=>{const ve=(te.name||"").toLowerCase(),je=(te.account?.name||"").toLowerCase(),Oe=(te.description||"").toLowerCase();(ve.includes(H)||je.includes(H)||Oe.includes(H))&&ye.push({id:te.id,name:te.name||"Unnamed Deal",type:"Deal",details:te.account?.name||"No account",route:`/admin/deals/info?id=${te.id}`})}),Array.isArray(M)&&M.forEach(te=>{const ve=(te.name||"").toLowerCase(),je=(te.email||"").toLowerCase(),Oe=(te.phone||"").toLowerCase(),$e=(te.website||"").toLowerCase();(ve.includes(H)||je.includes(H)||Oe.includes(H)||$e.includes(H))&&ye.push({id:te.id,name:te.name||"Unnamed Account",type:"Account",details:te.email||te.phone||"No contact info",route:"/admin/accounts"})}),ye.slice(0,10)}catch(H){return console.error("Error in search:",H),[]}},[E,I,F,M]),oe=H=>{H.route&&(e(H.route),A(""))},re=h.useCallback(async()=>{T(!0),_(null);try{const[H,ye,te,ve,je,Oe,$e,pe]=await Promise.all([ce.get("/leads/admin/getLeads").catch(ke=>(console.error("Error fetching leads:",ke),{data:[]})),ce.get("/deals/admin/fetch-all").catch(ke=>(console.error("Error fetching deals:",ke),{data:[]})),ce.get("/accounts/admin/fetch-all").catch(ke=>(console.error("Error fetching accounts:",ke),{data:[]})),ce.get("/tasks/all").catch(ke=>(console.error("Error fetching tasks:",ke),{data:[]})),ce.get("/meetings/admin/fetch-all").catch(ke=>(console.error("Error fetching meetings:",ke),{data:[]})),ce.get("/calls/admin/fetch-all").catch(ke=>(console.error("Error fetching calls:",ke),{data:[]})),ce.get("/logs/read-all").catch(ke=>(console.error("Error fetching logs:",ke),{data:[]})),ce.get("/targets/admin/fetch-all").catch(ke=>(console.error("Error fetching targets:",ke),{data:[]}))]),Me=Array.isArray(H.data)?H.data:[],Le=Array.isArray(ye.data)?ye.data:[],he=Array.isArray(te.data)?te.data:[],ae=Array.isArray(ve.data)?ve.data:[],Ae=Array.isArray(je.data)?je.data:[],ge=Array.isArray(Oe.data)?Oe.data:[],Be=Array.isArray($e.data)?$e.data:[],qe=Array.isArray(pe.data)?pe.data:[];z(Me),D(Le),W(he),r(qe);const Te=qe.reduce((ke,se)=>{const We=se.amount||se.value||se.target_amount||0,Re=parseFloat(typeof We=="string"?We.replace(/[^\d.-]/g,""):We);return ke+(isNaN(Re)?0:Re)},0);l(Te),c({activeLeads:Me.filter(ke=>ke.status&&!["Lost","Converted"].includes(ke.status)).length,totalDeals:Le.length,activeAccounts:he.length,overdueTasks:ae.filter(ke=>!ke.dueDate||ke.status==="Completed"?!1:new Date(ke.dueDate)<new Date).length});const He=[...Me].sort((ke,se)=>new Date(se.created_at||0)-new Date(ke.created_at||0)).slice(0,5);u(He);const Ye=[...Le].sort((ke,se)=>new Date(se.created_at||0)-new Date(ke.created_at||0)).slice(0,5);p(Ye);const B=[];ge.forEach(ke=>{const se=ke.due_date||ke.call_time,We=(ke.status||"").toUpperCase();se&&!["COMPLETED","MISSED","NOT_HELD","HELD"].includes(We)&&B.push({type:"Call",title:ke.subject||"Untitled Call",assignedTo:ke.assigned_to||(ke.call_assign_to?`${ke.call_assign_to.first_name||""} ${ke.call_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:se,priority:(ke.priority||"MEDIUM").toUpperCase(),id:ke.id,activityType:"call",fullData:ke})}),Ae.forEach(ke=>{const se=ke.dueDate||ke.start_time,We=(ke.status||"").toUpperCase();se&&!["COMPLETED","CANCELLED","DONE"].includes(We)&&B.push({type:"Meeting",title:ke.subject||ke.activity||"Untitled Meeting",assignedTo:ke.assignedTo||(ke.meet_assign_to?`${ke.meet_assign_to.first_name||""} ${ke.meet_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:se,priority:(ke.priority||"MEDIUM").toUpperCase(),id:ke.id,activityType:"meeting",fullData:ke})});const fe={HIGH:1,MEDIUM:2,LOW:3},Se=B.sort((ke,se)=>{const We=fe[ke.priority]||3,Re=fe[se.priority]||3;return We!==Re?We-Re:new Date(ke.scheduledDate||0)-new Date(se.scheduledDate||0)}).slice(0,5);y(Se),N(Le);const de=[...Be].sort((ke,se)=>new Date(se.timestamp||0)-new Date(ke.timestamp||0));v(de)}catch(H){console.error("Error fetching dashboard data:",H),_("Failed to load dashboard data. Please refresh the page.")}finally{T(!1)}},[]);h.useEffect(()=>(document.title="Dashboard | Sari-Sari CRM",re(),Q.current=setInterval(()=>{re(),R(new Date)},3e4),()=>{Q.current&&clearInterval(Q.current)}),[re]);const ee=[{icon:Eq,title:"Active Leads",value:o.activeLeads,color:"text-blue-600",bgColor:"bg-blue-50",onClick:()=>e("/admin/leads")},{icon:kq,title:"Total Targets",value:Lq(i,a),color:"text-purple-600",bgColor:"bg-purple-50",onClick:()=>e("/admin/targets")},{icon:Oje,title:"Total Deals",value:o.totalDeals,color:"text-yellow-600",bgColor:"bg-yellow-50",onClick:()=>e("/admin/deals")},{icon:MP,title:"Overdue Tasks",value:o.overdueTasks,color:"text-red-600",bgColor:"bg-red-50",onClick:()=>e("/admin/tasks")}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative w-full",children:[S&&n.jsx(Rt,{}),n.jsxs("div",{className:"max-w-screen-2xl mx-auto",children:[k&&n.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:n.jsx("p",{className:"font-medium",children:k})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 mb-8",children:[n.jsxs("div",{className:"lg:col-span-9 flex flex-col space-y-4",children:[n.jsx(Jje,{searchQuery:E,onSearchChange:A,searchResults:Y,onSearchResultClick:oe}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4",children:ee.map(H=>n.jsx(n1e,{...H,loading:S},H.title))})]}),n.jsx("div",{className:"lg:col-span-3",children:n.jsx(t1e,{logs:w,loading:S})})]}),n.jsx("div",{className:"mb-8",children:n.jsx(Pje,{leads:I,deals:F,targets:s,currencySymbol:a})}),n.jsx("div",{className:"grid grid-cols-1 mb-8",children:n.jsx(a1e,{revenueData:C,loading:S})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsx(JS,{title:"Latest Leads",children:d.length>0?d.map((H,ye)=>n.jsx(s1e,{...H},H.id||ye)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No leads found"})}),n.jsx(JS,{title:"Latest Deals",children:f.length>0?f.map((H,ye)=>n.jsx(r1e,{...H,stage_updated_at:H.stage_updated_at,currencySymbol:a},H.id||ye)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No deals found"})}),n.jsx(JS,{title:"Upcoming Activities",children:x.length>0?x.map((H,ye)=>n.jsx(i1e,{...H},H.id||ye)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No upcoming activities"})})]})]})]})};function en({totalItems:e=0,pageSize:t=10,currentPage:a=1,onPrev:s,onNext:r,onPageSizeChange:i,pageSizeOptions:l=[10,20,30,40,50],className:o="",label:c="records"}){const d=e===0?1:Math.ceil(e/t),u=e===0?0:(a-1)*t+1,f=Math.min(a*t,e),p=a<=1||e===0,x=a>=d||e===0,y="inline-flex items-center gap-1 px-3 sm:px-4 py-2 text-sm font-semibold rounded-lg transition focus:outline-none focus:ring-2 focus:ring-offset-1",w="bg-black text-white hover:bg-gray-900",v="bg-gray-200 text-gray-500 cursor-not-allowed focus:ring-transparent";return n.jsxs("div",{className:`flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 ${o}`,children:[n.jsxs("div",{className:"text-sm text-gray-600 font-medium text-center sm:text-left w-full sm:w-auto order-1",children:["Showing ",e===0?0:u,"-",f," of ",e," ",c]}),i&&n.jsxs("div",{className:"flex items-center justify-center gap-2 w-full sm:w-auto order-3 sm:order-2",children:[n.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"Rows per page"}),n.jsx("select",{value:t,onChange:C=>i(Number(C.target.value)),className:"border border-gray-300 rounded-md text-sm py-1 pl-2 pr-6 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:l.map(C=>n.jsx("option",{value:C,children:C},C))})]}),n.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-end w-full sm:w-auto order-2 sm:order-3",children:[n.jsxs("button",{type:"button",onClick:s,disabled:p,className:`${y} ${p?v:w}`,children:[n.jsx(sie,{className:"text-base"}),"Prev"]}),n.jsxs("div",{className:"text-sm font-semibold text-white bg-gray-900 border border-gray-900 shadow-sm px-3 py-1.5 rounded-full",children:["Page ",e===0?0:a," of"," ",e===0?0:d]}),n.jsxs("button",{type:"button",onClick:r,disabled:x,className:`${y} ${x?v:w}`,children:["Next",n.jsx(Mt,{className:"text-base"})]})]})]})}const o1e=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),c1e=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,a,s)=>s?s.toUpperCase():a.toLowerCase()),K6=e=>{const t=c1e(e);return t.charAt(0).toUpperCase()+t.slice(1)},Pq=(...e)=>e.filter((t,a,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===a).join(" ").trim(),d1e=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var u1e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const m1e=h.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:r="",children:i,iconNode:l,...o},c)=>h.createElement("svg",{ref:c,...u1e,width:t,height:t,stroke:e,strokeWidth:s?Number(a)*24/Number(t):a,className:Pq("lucide",r),...!i&&!d1e(o)&&{"aria-hidden":"true"},...o},[...l.map(([d,u])=>h.createElement(d,u)),...Array.isArray(i)?i:[i]]));const Qf=(e,t)=>{const a=h.forwardRef(({className:s,...r},i)=>h.createElement(m1e,{ref:i,iconNode:t,className:Pq(`lucide-${o1e(K6(e))}`,`lucide-${e}`,s),...r}));return a.displayName=K6(e),a};const f1e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],h1e=Qf("globe",f1e);const g1e=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],X6=Qf("lock",g1e);const p1e=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],x1e=Qf("message-circle",p1e);const y1e=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],b1e=Qf("message-square",y1e);const v1e=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],w1e=Qf("send",v1e);const N1e=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],qN=Qf("x",N1e);function j1e({comments:e=[],onAddComment:t,currentUser:a}){const[s,r]=h.useState(""),[i,l]=h.useState(!1),[o,c]=h.useState(!1),d=async u=>{if(u.preventDefault(),!!s.trim()){c(!0);try{t&&await t({comment:s.trim(),is_private:i}),r("")}catch(f){console.error("Failed to add comment:",f)}finally{c(!1)}}};return n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200 mt-5",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2 flex items-center gap-2",children:[n.jsx(b1e,{className:"w-5 h-5 text-gray-600"}),"Comments",e.length>0&&n.jsxs("span",{className:"text-sm font-normal text-gray-500",children:["(",e.length,")"]})]}),n.jsx("div",{className:"mt-4",children:e.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:n.jsx(x1e,{className:"w-8 h-8 text-gray-400"})}),n.jsx("h4",{className:"text-lg font-medium text-gray-700 mb-1",children:"No comments yet"}),n.jsx("p",{className:"text-sm text-gray-500 max-w-sm",children:"Be the first to share your thoughts. Start a conversation by adding a comment below."})]}):n.jsx("div",{className:"space-y-4",children:e.map(u=>n.jsxs("div",{className:"flex gap-3 p-4 bg-gray-50 rounded-lg border border-gray-100",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold text-sm",children:u.comment_creator?.first_name?.[0]||u.comment_creator?.email?.[0]?.toUpperCase()||"U"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx("span",{className:"font-medium text-gray-800",children:u.comment_creator?.first_name||u.comment_creator?.email||"Unknown User"}),n.jsx("span",{className:"text-xs text-gray-400",children:new Date(u.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}),u.is_private&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-amber-100 text-amber-700 rounded-full text-xs font-medium",children:[n.jsx(X6,{className:"w-3 h-3"}),"Private"]})]}),n.jsx("p",{className:"mt-1 text-gray-600 whitespace-pre-wrap break-words",children:u.comment})]})]},u.id))})}),n.jsxs("form",{onSubmit:d,className:"mt-6 pt-4 border-t border-gray-200",children:[n.jsx("div",{className:"relative",children:n.jsx("textarea",{value:s,onChange:u=>r(u.target.value),placeholder:"Write a comment...",rows:2,className:"w-full px-4 py-3 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-700 placeholder-gray-400"})}),n.jsxs("div",{className:"flex items-center justify-between mt-3",children:[n.jsx("button",{type:"button",onClick:()=>l(!i),className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium transition-all duration-200 ${i?"bg-amber-100 text-amber-700 hover:bg-amber-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:i?n.jsxs(n.Fragment,{children:[n.jsx(X6,{className:"w-4 h-4"}),"Private"]}):n.jsxs(n.Fragment,{children:[n.jsx(h1e,{className:"w-4 h-4"}),"Public"]})}),n.jsxs("button",{type:"submit",disabled:!s.trim()||o,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[n.jsx(w1e,{className:"w-4 h-4"}),o?"Posting...":"Post Comment"]})]})]})]})}const e2=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Active"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Former"}],t2={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",parent_company:"",status:"PROSPECT",territory_id:"",assigned_to:""},Js=e=>e?e.toUpperCase():"",n2=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",C1e=e=>{switch(Js(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},S1e=e=>{switch(Js(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}};function _1e(){const e=yt();h.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[t,a]=h.useState(!1),[s,r]=h.useState(!1),[i,l]=h.useState(!1),[o,c]=h.useState(null),[d,u]=h.useState(null),[f,p]=h.useState(t2),[x,y]=h.useState(null),[w,v]=h.useState([]),[C,N]=h.useState(!1),[S,T]=h.useState([]),[k,_]=h.useState(null),[E,A]=h.useState([]),[I,z]=h.useState([]),[F,D]=h.useState("Filter by Status"),[M,W]=h.useState(""),[Z,R]=h.useState(null),[Q,Y]=h.useState(!1),[oe,re]=h.useState(1),[ee,H]=h.useState(10),[ye,te]=h.useState("Overview"),[ve,je]=h.useState(""),[Oe,$e]=h.useState(!1),[pe,Me]=h.useState([]),[Le,he]=h.useState({}),[ae,Ae]=h.useState(null),ge=h.useCallback(async(U=null)=>{N(!0);try{const xe=await ce.get("/accounts/admin/fetch-all"),ie=[...Array.isArray(xe.data)?xe.data:[]].sort((Pe,Qe)=>{const vt=Pe?.created_at||Pe?.updated_at||0,ht=Qe?.created_at||Qe?.updated_at||0;return new Date(ht)-new Date(vt)});if(v(ie),U){const Pe=ie.find(Qe=>Qe.id===U);y(Pe||null)}}catch(xe){console.error(xe),v([]),xe.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch accounts. Please try again later.")}finally{N(!1)}},[y]),Be=h.useCallback(async()=>{try{const U=await ce.get("/users/all");T(Array.isArray(U.data)?U.data:[])}catch(U){console.error(U),U.response?.status===403&&q.warn("Unable to load users for assignment (permission denied).")}},[]),qe=h.useCallback(async()=>{try{const U=await ce.get("/territories/fetch");A(Array.isArray(U.data)?U.data:[])}catch(U){console.error(U),U.response?.status===403&&q.warn("Unable to load territories (permission denied).")}},[]),Te=h.useCallback(async()=>{try{const U=await ce.get("/accounts/admin/parent-companies");z(Array.isArray(U.data)?U.data:[])}catch(U){console.error(U),U.response?.status===403&&q.warn("Unable to load parent companies (permission denied).")}},[]),He=h.useCallback(async U=>{try{const xe=await ce.get(`/activities/accounts/${U}`);he(xe.data&&typeof xe.data=="object"?xe.data:{})}catch(xe){console.error(xe),xe.response?.status===404&&(console.warn("No activities found for this account."),he({}))}},[]);h.useEffect(()=>{ge(),Be(),qe(),Te()},[ge,Be,qe,Te]),h.useEffect(()=>{re(1)},[M,F,ee]);const Ye=h.useMemo(()=>{const U=M.toLowerCase(),xe=F;return w.filter(De=>{const ie=De.name?.toLowerCase().includes(U)||De.website?.toLowerCase().includes(U)||De.phone_number?.toLowerCase().includes(U)||De.industry?.toLowerCase().includes(U)||De.parent_company?.toLowerCase().includes(U)||De.territory?.name?.toLowerCase().includes(U),Pe=xe==="Filter by Status"||Js(De.status)===Js(xe);return ie&&Pe})},[w,M,F]),B=Math.max(1,Math.ceil(Ye.length/ee)||1);h.useEffect(()=>{re(U=>{const xe=Math.max(1,Math.ceil(Ye.length/ee)||1);return U>xe?xe:U})},[Ye.length,ee]);const fe=h.useMemo(()=>{const U=(oe-1)*ee;return Ye.slice(U,U+ee)},[Ye,oe,ee]),Se=U=>{if(U.target.checked){const xe=fe.map(De=>De.id);Me(xe)}else Me([])},de=U=>{Me(xe=>xe.includes(U)?xe.filter(De=>De!==U):[...xe,U])},ke=async()=>{pe.length!==0&&R({title:"Delete Accounts",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:pe.length})," selected accounts? This action cannot be undone."]}),confirmLabel:`Delete ${pe.length} Account(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",accountIds:pe}})};Ye.length===0||(oe-1)*ee+1,Math.min(oe*ee,Ye.length);const se=()=>re(U=>Math.max(U-1,1)),We=()=>re(U=>Math.min(U+1,B));h.useEffect(()=>{x&&je(Js(x.status)||"PROSPECT")},[x]);const Re=w.length,ct=h.useMemo(()=>w.filter(U=>U.status?.toLowerCase()==="customer").length,[w]),Ie=h.useMemo(()=>w.filter(U=>U.status?.toLowerCase()==="prospect").length,[w]),ue=h.useMemo(()=>w.filter(U=>U.status?.toLowerCase()==="partner").length,[w]),Ne=h.useMemo(()=>w.filter(U=>U.status?.toLowerCase()==="active").length,[w]),Fe=h.useMemo(()=>w.filter(U=>U.status?.toLowerCase()==="inactive").length,[w]),Ze=h.useMemo(()=>w.filter(U=>U.status?.toLowerCase()==="former").length,[w]),st=h.useMemo(()=>[{title:"Total",value:Re,icon:On,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:ct,icon:Nl,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:Ie,icon:Wn,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:ue,icon:Jt,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:Ne,icon:Nl,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:Fe,icon:jl,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:Ze,icon:jl,color:"text-orange-600",bgColor:"bg-orange-100"}],[Re,ct,Ie,ue,Ne,Fe,Ze]),Ee=U=>{y(U),te("Overview"),je(Js(U?.status)||"PROSPECT")},Je=()=>y(null),be=U=>{U.target.id==="accountModalBackdrop"&&!Q&&Je()},Ke=()=>{a(!1),r(!1),u(null),p(t2),l(!1),_(null)},$=U=>{U.target.id==="modalBackdrop"&&Ke()},G=U=>U?new Date(U).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",K=U=>{const{name:xe,value:De}=U.target;p(ie=>({...ie,[xe]:De}))},ne=()=>{p(t2),r(!1),u(null),a(!0)},J=U=>{y(null),U.assigned_accs?_(U.assigned_accs):_(null),p({name:U.name||"",website:U.website||"",phone_number:U.phone_number||"",billing_address:U.billing_address||"",shipping_address:U.shipping_address||"",industry:U.industry||"",status:Js(U.status)||"PROSPECT",territory_id:U.territory?.id?String(U.territory.id):"",assigned_to:U.assigned_accs?.id?String(U.assigned_accs.id):""}),r(!0),u(U.id),a(!0)},Ce=U=>{U&&R({title:"Delete Account",message:n.jsxs("span",{children:["Are you sure you want to permanently delete the account"," ",n.jsx("span",{className:"font-semibold",children:U.name}),"? This action cannot be undone."]}),confirmLabel:"Delete Account",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:U.id,name:U.name}})},me=async()=>{if(!Z?.action){R(null);return}const{action:U}=Z,{type:xe,payload:De,targetId:ie,name:Pe,accountIds:Qe}=U;Y(!0);try{if(xe==="create"){l(!0);const vt=await ce.post("/accounts/admin",De);Te(),q.success(`Account "${Pe}" created successfully.`);const ht=x?.id||null;Ke(),await ge(ht),!x&&vt.data?.id}else if(xe==="update"){if(!ie)throw new Error("Missing account identifier for update.");l(!0),await ce.put(`/accounts/admin/${ie}`,De),q.success(`Account "${Pe}" updated successfully.`);const vt=x?.id&&x.id===ie?ie:null;Ke(),await ge(vt),x?.id===ie&&y(null)}else if(xe==="delete"){if(!ie)throw new Error("Missing account identifier for deletion.");const vt=x?.id;c(ie),await ce.delete(`/accounts/admin/${ie}`),q.success(`Account "${Pe}" deleted successfully.`),await ge(vt&&vt!==ie?vt:null),vt===ie&&y(null)}else xe==="bulk-delete"&&(await ce.delete("/accounts/admin/bulk-delete",{data:{account_ids:Qe}}),q.success(`Successfully deleted ${Qe.length} accounts`),Me([]),await ge())}catch(vt){console.error(vt);const ht=xe==="create"?"Failed to create account. Please review the details and try again.":xe==="update"?"Failed to update account. Please review the details and try again.":xe==="bulk-delete"?"Failed to delete selected accounts.":"Failed to delete account. Please try again.",Ut=vt.response?.data?.detail||ht;q.error(Ut),(xe==="create"||xe==="update")&&l(!1),xe==="delete"&&c(null)}finally{(xe==="create"||xe==="update")&&l(!1),xe==="delete"&&c(null),Y(!1),R(null)}},V=()=>{Q||R(null)},_e=async()=>{if(!x||!ve)return;const U=Js(ve),xe=Js(x.status);if(U!==xe){$e(!0);try{await ce.put(`/accounts/admin/${x.id}`,{status:U}),q.success(`Account status updated to ${n2(U)}`),v(De=>De.map(ie=>ie.id===x.id?{...ie,status:U}:ie)),y(null)}catch(De){console.error(De);const ie=De.response?.data?.detail||"Failed to update account status. Please try again.";q.error(ie)}finally{$e(!1)}}},[Ue,rt]=h.useState(!1),bt=U=>{U.preventDefault(),rt(!0);const xe=f.name.trim();if(!xe){q.error("Account name is required.");return}if(!f.assigned_to){q.error("Assigned To is required.");return}const ie={name:xe,website:f.website?.trim()||null,phone_number:f.phone_number?.trim()||null,billing_address:f.billing_address?.trim()||null,shipping_address:f.shipping_address?.trim()||null,industry:f.industry?.trim()||null,parent_company:f.parent_company?.trim()||null,status:f.status||"PROSPECT",territory_id:f.territory_id?Number(f.territory_id):null,assigned_to:f.assigned_to?Number(f.assigned_to):null},Pe=s&&d?"update":"create";R({title:Pe==="create"?"Confirm New Account":"Confirm Update",message:Pe==="create"?n.jsxs("span",{children:["Are you sure you want to create the account"," ",n.jsx("span",{className:"font-semibold",children:xe}),"?"]}):n.jsxs("span",{children:["Save changes to the account"," ",n.jsx("span",{className:"font-semibold",children:xe}),"?"]}),confirmLabel:Pe==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:Pe,payload:ie,targetId:d||null,name:xe}})},gt=[{label:"Filter by Status",value:"Filter by Status"},...e2.map(U=>({label:U.label,value:U.value}))],_t=Z?.action?.type==="delete"?Z.action.targetId:null,Wt=x&&(o===x.id||_t===x.id),un=x&&o===x.id,le=x?C1e(x.status):"",it=x?n.jsx("div",{id:"accountModalBackdrop",onClick:be,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:U=>U.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),n.jsx("button",{onClick:Je,className:"text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Vn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:x.name}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${le}`,children:n2(x.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>J(x),disabled:Z?.action?.type==="update"&&Z.action.targetId===x.id,children:[n.jsx(ia,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>Ce(x),disabled:!!Wt,children:un?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(zt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(U=>n.jsx("button",{onClick:()=>te(U),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${ye===U?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:U},U))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[ye==="Overview"&&n.jsxs("div",{className:"h-full max-h-100 md:max-h-70 overflow-y-auto hide-scrollbar",children:[n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Website:"}),n.jsx("p",{children:x.website?n.jsx("a",{href:x.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:x.website}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Industry:"}),n.jsx("p",{children:x.industry||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Parent Company:"}),n.jsx("p",{children:x.parent_company||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:x.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:x.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Billing Address:"}),n.jsx("p",{children:x.billing_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),n.jsx("p",{children:x.shipping_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:x.assigned_accs?`${x.assigned_accs.first_name} ${x.assigned_accs.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:x.acc_creator?`${x.acc_creator.first_name} ${x.acc_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:G(x.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:G(x.updated_at)||"N/A"})]})]})}),n.jsx(j1e,{})]}),ye==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:w.notes||"No notes available."})]})]}),ye==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[Le.tasks&&Le.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ae(ae==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Gt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",Le.tasks.length,")"]})]}),ae==="tasks"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),ae==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Le.tasks.map((U,xe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/tasks",{state:{taskID:U.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Gt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:U.subject||U.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:U.description||"No description"}),U.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",U.assigned_to.first_name," ",U.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:G(U.due_date||U.created_at)})]},`task-${xe}`))})]}),Le.meetings&&Le.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ae(ae==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ct,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",Le.meetings.length,")"]})]}),ae==="meetings"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),ae==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Le.meetings.map((U,xe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/meetings",{state:{meetingID:U.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Ct,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:U.subject||U.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:U.description||U.location||"No description"}),U.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",U.host.first_name," ",U.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:G(U.start_time||U.created_at)})]},`meeting-${xe}`))})]}),Le.calls&&Le.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ae(ae==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(At,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",Le.calls.length,")"]})]}),ae==="calls"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),ae==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Le.calls.map((U,xe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/calls",{state:{callID:U.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(At,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:U.subject||U.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:U.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:G(U.call_time||U.created_at)})]},`call-${xe}`))})]}),Le.contacts&&Le.contacts.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ae(ae==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Jt,{className:"text-teal-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",Le.contacts.length,")"]})]}),ae==="contacts"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),ae==="contacts"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Le.contacts.map((U,xe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/contacts",{state:{contactID:U.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-teal-600 mt-1",children:n.jsx(Jt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[U.first_name?`${U.first_name} `:"",U.last_name]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:U.title||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:G(U.created_at)})]},`contact-${xe}`))})]}),Le.deals&&Le.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ae(ae==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",Le.deals.length,")"]})]}),ae==="deals"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),ae==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Le.deals.map((U,xe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/deals",{state:{dealID:U.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[U.deal_id?U.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",U.name||U.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:U.stage||U.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:G(U.close_date||U.created_at)})]},`deal-${xe}`))})]}),Le.quotes&&Le.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ae(ae==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(xn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",Le.quotes.length,")"]})]}),ae==="quotes"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),ae==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Le.quotes.map((U,xe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/quotes",{state:{quoteID:U.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(xn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(U.quote_id?U.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:U.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:G(U.presented_date)||""})]},`quote-${xe}`))})]}),(!Le||(!Le.tasks||Le.tasks.length===0)&&(!Le.meetings||Le.meetings.length===0)&&(!Le.calls||Le.calls.length===0)&&(!Le.quotes||Le.quotes.length===0)&&(!Le.deals||Le.deals.length===0)&&(!Le.contacts||Le.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assigned_to:x.assigned_accs?.id?String(x.assigned_accs.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(At,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assignedTo:x.assigned_accs?.id?String(x.assigned_accs.id):"",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Ct,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assignedTo:x.assigned_accs?.id?String(x.assigned_accs.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Gt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:ve||Js(x?.status)||"PROSPECT",onChange:U=>je(U.target.value),children:e2.map(U=>n.jsx("option",{value:U.value,children:U.label},U.value))}),n.jsx("button",{onClick:_e,disabled:Oe||!ve||Js(ve)===Js(x?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Oe||!ve||Js(ve)===Js(x?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:Oe?"Updating...":"Update"})]})]})]})]})]})}):null,Et=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[C&&n.jsx(Rt,{message:"Loading accounts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(On,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{ne(),rt(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(dn,{className:"mr-2"})," Add Account"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:st.map(U=>n.jsx(A1e,{...U},U.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search accounts",value:M,onChange:U=>W(U.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:F,onChange:U=>D(U.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:gt.map(U=>n.jsx("option",{value:U.value,children:U.label},U.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-center w-12",children:n.jsx("input",{type:"checkbox",checked:fe.length>0&&fe.every(U=>pe.includes(U.id)),onChange:Se,className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Industry"}),n.jsx("th",{className:"py-3 px-4",children:"Territory"}),n.jsx("th",{className:"py-3 px-4",children:"Phone"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:pe.length>0?n.jsx("button",{onClick:ke,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${pe.length} selected items`,children:n.jsx(zt,{size:18})}):""})]})}),n.jsx("tbody",{children:C?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"Loading accounts..."})}):Ye.length>0?fe.map(U=>n.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>{Ee(U),He(U.id)},children:[n.jsx("td",{className:"py-3 px-4 text-center",children:n.jsx("input",{type:"checkbox",checked:pe.includes(U.id),onChange:()=>de(U.id),onClick:xe=>xe.stopPropagation(),className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:U.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:U.website||"--"})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${S1e(U.status)}`,children:n2(U.status)})}),n.jsx("td",{className:"py-3 px-4 text-sm",children:U.industry||"--"}),n.jsx("td",{className:"py-3 px-4 text-sm",children:U.territory?.name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(At,{className:"text-gray-500"}),n.jsx("span",{children:U.phone_number||"--"})]})}),n.jsx("td",{className:"py-3 px-4 text-center"})]},U.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No accounts found."})})})]})}),n.jsx(en,{className:"mt-4",totalItems:Ye.length,pageSize:ee,currentPage:oe,onPrev:se,onNext:We,onPageSizeChange:U=>{H(U),re(1)},pageSizeOptions:[10,20,30,40,50],label:"accounts"})]}),Nt=t?n.jsx("div",{id:"modalBackdrop",onClick:$,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto hide-scrollbar max-h-[90vh]",onClick:U=>U.stopPropagation(),children:[n.jsx("button",{onClick:()=>{Ke(),rt(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:i||Q,children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Account":"Add New Account"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:bt,noValidate:!0,children:[n.jsx("div",{className:"md:col-span-2",children:n.jsx(Mm,{label:"Name",name:"name",value:f.name,onChange:K,placeholder:"Company name",required:!0,isSubmitted:Ue})}),n.jsx(J6,{label:"Parent Company",value:f.parent_company,onChange:U=>{p(xe=>({...xe,parent_company:U}))},items:I.map(U=>({id:U,name:U})),getLabel:U=>U?.name||"",placeholder:"Select parent company...",disabled:i}),n.jsx(Mm,{label:"Website",name:"website",value:f.website,onChange:K,placeholder:"https://example.com",disabled:i}),n.jsx(Mm,{label:"Phone Number",name:"phone_number",value:f.phone_number,onChange:K,placeholder:"09xx xxx xxxx",type:"tel",disabled:i}),n.jsx(Mm,{label:"Industry",name:"industry",value:f.industry,onChange:K,placeholder:"Industry",disabled:i}),n.jsx(Mm,{label:"Billing Address",name:"billing_address",value:f.billing_address,onChange:K,placeholder:"Billing address",disabled:i}),n.jsx(Mm,{label:"Shipping Address",name:"shipping_address",value:f.shipping_address,onChange:K,placeholder:"Shipping address",disabled:i}),n.jsx(Z6,{label:"Status",name:"status",value:f.status,onChange:K,options:[{value:"",label:"Select status"},...e2],required:!0,disabled:i}),n.jsx(J6,{label:"Assigned To",value:f.assigned_to,onChange:U=>{const xe=S.find(ie=>String(ie.id)===String(U));_(xe);let De=null;xe&&xe.assigned_territory&&xe.assigned_territory.length===1&&(De=xe.assigned_territory[0].id),p(ie=>({...ie,assigned_to:U,territory_id:De}))},items:S||[],getLabel:U=>`${U?.first_name??""} ${U?.last_name??""} (${U?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:Ue,disabled:i||S.length===0}),n.jsx("div",{className:"md:col-span-2",children:n.jsx(Z6,{label:"Territory",name:"territory_id",value:f.territory_id||"",onChange:K,options:[{value:"",label:k?k.assigned_territory&&k.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"},...k&&k.assigned_territory&&k.assigned_territory.map(U=>({value:String(U.id),label:U.name}))||[]],disabled:i||!k||!k.assigned_territory||k.assigned_territory.length===0})}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{Ke(),rt(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i||Q,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i||Q,children:i?"Saving...":s?"Update Account":"Save Account"})]})]})]})}):null,L=Z?n.jsx(T1e,{open:!0,title:Z.title,message:Z.message,confirmLabel:Z.confirmLabel,cancelLabel:Z.cancelLabel,variant:Z.variant,onConfirm:me,onCancel:V,loading:Q}):null;return n.jsxs(n.Fragment,{children:[Et,it,Nt,L]})}function A1e({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function Mm({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function Z6({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:l=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(o=>n.jsx("option",{value:o.value,children:o.label},o.value))})]})}function J6({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",required:c=!1,isSubmitted:d=!1,allowFreeText:u=!1}){const f=d&&c&&!a;return n.jsxs("div",{className:o,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(E1e,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:l,hasError:f,allowFreeText:u})]})}function E1e({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,hasError:o=!1,allowFreeText:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),y=e.find(C=>String(C.id)===String(t)),w=y?s(y):t,v=h.useMemo(()=>{const C=f.trim().toLowerCase();return(C?e.filter(S=>(s(S)||"").toLowerCase().includes(C)):e).slice(0,l)},[e,f,s,l]);return h.useEffect(()=>{const C=N=>{x.current&&!x.current.contains(N.target)&&u(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:w,placeholder:r,onFocus:()=>!i&&u(!0),onChange:C=>{p(C.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${o?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsxs("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:[c&&f.trim()&&!v.some(C=>s(C).toLowerCase()===f.trim().toLowerCase())&&n.jsxs("button",{type:"button",onClick:()=>{a(f.trim()),u(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-green-50 bg-blue-50 font-medium text-blue-700",children:['+ Add "',f.trim(),'" as new parent company']}),v.length>0?v.map(C=>{const N=String(C.id),S=s(C),T=String(t)===N;return n.jsx("button",{type:"button",onClick:()=>{a(N),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${T?"bg-blue-50":""}`,children:S||"--"},N)}):!c||!f.trim()?n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"}):null]}),e.length>l&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function T1e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),n.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}function Tx(e){return St({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M4 2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zm3 0a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zm3.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zM4 5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zM7.5 5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm2.5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zM4.5 8a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm2.5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zm3.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5z"},child:[]},{tag:"path",attr:{d:"M2 1a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1zm11 0H3v14h3v-2.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5V15h3z"},child:[]}]})(e)}const a2={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:""},Im=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),Zi=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function k1e(){const e=yt(),t=Yt();h.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[a,s]=h.useState([]),[r,i]=h.useState(!1),[l,o]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState(null),[p,x]=h.useState(!1),[y,w]=h.useState(!1),[v,C]=h.useState(!1),[N,S]=h.useState(null),[T,k]=h.useState(!1),[_,E]=h.useState(null),[A,I]=h.useState(a2),[z,F]=h.useState(""),[D,M]=h.useState("Filter by Accounts"),[W,Z]=h.useState(null),[R,Q]=h.useState("Overview"),[Y,oe]=h.useState(1),[re,ee]=h.useState(10),[H,ye]=h.useState({}),[te,ve]=h.useState(null),[je,Oe]=h.useState([]),[$e,pe]=h.useState(null);h.useEffect(()=>{const J=t.state?.contactID;J&&(pe(J),e(t.pathname,{replace:!0,state:{}}))},[t,e]),h.useEffect(()=>{if($e&&a.length>0&&!r){const J=a.find(Ce=>Ce.id===$e);J?f(J):q.error("Contact not found."),pe(null)}},[$e,a,r]);const Me=h.useCallback(async(J=null)=>{i(!0);try{const Ce=await ce.get("/contacts/admin/fetch-all"),V=[...Array.isArray(Ce.data)?Ce.data:[]].sort((_e,Ue)=>{const rt=_e?.created_at||_e?.updated_at||0,bt=Ue?.created_at||Ue?.updated_at||0;return new Date(bt)-new Date(rt)});if(s(V),J){const _e=V.find(Ue=>Ue.id===J);f(_e||null)}}catch(Ce){console.error(Ce),s([]),Ce.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch contacts. Please try again later.")}finally{i(!1)}},[f]),Le=h.useCallback(async()=>{try{const J=await ce.get("/accounts/admin/fetch-all"),me=[...Array.isArray(J.data)?J.data:[]].sort((V,_e)=>(V?.name||"").localeCompare(_e?.name||""));o(me)}catch(J){console.error(J),o([]),J.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},[]),he=h.useCallback(async()=>{try{const J=await ce.get("/users/all"),me=[...Array.isArray(J.data)?J.data:[]].sort((V,_e)=>Im(V).localeCompare(Im(_e)));d(me)}catch(J){console.error(J),d([]),J.response?.status===403&&q.warn("Unable to load users for assignment (permission denied).")}},[]),ae=h.useCallback(async J=>{try{const Ce=await ce.get(`/activities/contact/${J}`);ye(Ce.data&&typeof Ce.data=="object"?Ce.data:{})}catch(Ce){console.error(Ce),Ce.response?.status===404&&(console.warn("No activities found for this account."),ye({}))}},[]);h.useEffect(()=>{Me(),Le(),he()},[Me,Le,he]);const Ae=h.useMemo(()=>{const J=new Map;l.forEach(me=>{me?.id&&me?.name&&J.set(String(me.id),me.name)}),a.forEach(me=>{me?.account_id&&me?.account?.name&&J.set(String(me.account_id),me.account.name)});const Ce=Array.from(J.entries()).sort((me,V)=>me[1].localeCompare(V[1])).map(([me,V])=>({value:me,label:V}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...Ce]},[l,a]),ge=h.useMemo(()=>{const J=z.trim().toLowerCase(),Ce=D.trim();return a.filter(me=>{const V=[me?.first_name,me?.last_name,me?.email,me?.title,me?.department,me?.account?.name,me?.account?.status,me?.work_phone,me?.mobile_phone_1,me?.mobile_phone_2,me?.assigned_contact?.first_name,me?.assigned_contact?.last_name,me?.contact_creator?.first_name,me?.contact_creator?.last_name,me?.notes,Zi(me?.created_at),Zi(me?.updated_at)],_e=J===""||V.some(rt=>rt==null?!1:rt.toString().toLowerCase().includes(J)),Ue=Ce==="Filter by Accounts"||String(me.account_id)===Ce;return _e&&Ue})},[a,z,D]),Be=Math.max(1,Math.ceil(ge.length/re)||1);h.useEffect(()=>{oe(1)},[z,D,re]),h.useEffect(()=>{oe(J=>{const Ce=Math.max(1,Math.ceil(ge.length/re)||1);return J>Ce?Ce:J})},[ge.length,re]);const qe=h.useMemo(()=>{const J=(Y-1)*re;return ge.slice(J,J+re)},[ge,Y,re]),Te=()=>oe(J=>Math.max(J-1,1)),He=()=>oe(J=>Math.min(J+1,Be)),Ye=J=>{if(J.target.checked){const Ce=qe.map(me=>me.id);Oe(Ce)}else Oe([])},B=J=>{Oe(Ce=>Ce.includes(J)?Ce.filter(me=>me!==J):[...Ce,J])},fe=async()=>{je.length!==0&&S({title:"Delete Contacts",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:je.length})," selected contacts? This action cannot be undone."]}),confirmLabel:`Delete ${je.length} Contact(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",contact_ids:je}})},Se=h.useCallback(()=>{x(!1),w(!1),E(null),I(a2),C(!1),Ie(!1)},[]),de=J=>{J.target.id==="modalBackdrop"&&!v&&!T&&Se()},ke=J=>{const{name:Ce,value:me}=J.target;I(V=>({...V,[Ce]:me}))},se=()=>{I(a2),w(!1),E(null),x(!0)},We=J=>{J&&(I({first_name:J.first_name||"",last_name:J.last_name||"",account_id:J.account_id?String(J.account_id):"",title:J.title||"",department:J.department||"",email:J.email||"",work_phone:J.work_phone||"",mobile_phone_1:J.mobile_phone_1||"",mobile_phone_2:J.mobile_phone_2||"",notes:J.notes||"",assigned_to:J.assigned_to?String(J.assigned_to):""}),w(!0),E(J.id),x(!0),f(null))},Re=J=>{if(!J)return;const Ce=Im(J)||"this contact";S({title:"Delete Contact",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:Ce}),"? This action cannot be undone."]}),confirmLabel:"Delete Contact",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:J.id,name:Ce}})},[ct,Ie]=h.useState(!1),ue=J=>{J.preventDefault(),Ie(!0);const Ce=A.first_name.trim(),me=A.last_name.trim();if(!Ce||!me){q.error("First name and last name are required.");return}if(!A.account_id){q.error("Account is required.");return}if(!A.assigned_to){q.error("Assigned To is required.");return}const _e=A.email?.trim();if(!_e){q.error("Email is required.");return}if(!_e.includes("@")){q.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(_e)){q.error("Please enter a valid email address.");return}const rt={first_name:Ce,last_name:me,account_id:Number(A.account_id),title:A.title?.trim()||null,department:A.department?.trim()||null,email:A.email?.trim().toLowerCase()||null,work_phone:A.work_phone?.trim()||null,mobile_phone_1:A.mobile_phone_1?.trim()||null,mobile_phone_2:A.mobile_phone_2?.trim()||null,notes:A.notes?.trim()||null,assigned_to:A.assigned_to?Number(A.assigned_to):null},bt=y&&_?"update":"create",gt=`${Ce} ${me}`.trim();S({title:bt==="create"?"Confirm New Contact":"Confirm Update",message:bt==="create"?n.jsxs("span",{children:["Are you sure you want to add"," ",n.jsx("span",{className:"font-semibold",children:gt})," to your contacts?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:gt}),"?"]}),confirmLabel:bt==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:bt,payload:rt,targetId:_||null,name:gt}})},Ne=async()=>{if(!N?.action){S(null);return}const{action:J}=N,{type:Ce,payload:me,targetId:V,name:_e}=J;k(!0);try{if(Ce==="create"){C(!0),await ce.post("/contacts/admin",me),q.success(`Contact "${_e}" created successfully.`);const Ue=u?.id||null;Se(),await Me(Ue)}else if(Ce==="update"){if(!V)throw new Error("Missing contact identifier for update.");C(!0),await ce.put(`/contacts/admin/${V}`,me),q.success(`Contact "${_e}" updated successfully.`);const Ue=u?.id&&u.id===V?V:u?.id||null;Se(),await Me(Ue),u?.id===V&&f(null)}else if(Ce==="delete"){if(!V)throw new Error("Missing contact identifier for deletion.");const Ue=u?.id;Z(V),await ce.delete(`/contacts/admin/${V}`),q.success(`Contact "${_e}" deleted successfully.`),await Me(Ue&&Ue!==V?Ue:null),Ue===V&&f(null)}else if(Ce==="bulk-delete"){const Ue=J.contact_ids;await ce.delete("/contacts/admin/bulk-delete",{data:{contact_ids:Ue}}),q.success(`Successfully deleted ${Ue.length} contacts`),Oe([]),await Me()}}catch(Ue){console.error(Ue);const rt=Ce==="create"?"Failed to create contact. Please review the details and try again.":Ce==="update"?"Failed to update contact. Please review the details and try again.":Ce==="bulk-delete"?"Failed to delete selected contacts.":"Failed to delete contact. Please try again.",bt=Ue.response?.data?.detail||rt;q.error(bt)}finally{(Ce==="create"||Ce==="update")&&C(!1),Ce==="delete"&&Z(null),k(!1),S(null)}},Fe=()=>{T||S(null)},Ze=J=>{f(J),Q("Overview")},st=()=>f(null),Ee=J=>{J.target.id==="contactModalBackdrop"&&!T&&st()},Je=N?.action?.type==="delete"?N.action.targetId:null,be=u&&(W===u.id||Je===u.id),Ke=u&&W===u.id,$=u?n.jsx("div",{id:"contactModalBackdrop",onClick:Ee,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:J=>J.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),n.jsx("button",{onClick:st,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Vn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:Im(u)||"Unnamed contact"})}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>We(u),disabled:T||N?.action?.type==="update"&&N.action.targetId===u.id,children:[n.jsx(ia,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>Re(u),disabled:!!be,children:Ke?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(zt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:n.jsx("p",{className:"text-sm text-gray-500",children:u.account?.name||"No associated account"})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(J=>n.jsx("button",{onClick:()=>Q(J),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${R===J?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:J},J))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[R==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact Name:"}),n.jsx("p",{children:Im(u)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Title:"}),n.jsx("p",{children:u.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:u.email?n.jsx("a",{href:`mailto:${u.email}`,className:"text-blue-600 hover:underline break-all",children:u.email}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:u.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:u.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:u.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:u.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:u.assigned_contact?`${u.assigned_contact.first_name} ${u.assigned_contact.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:u.contact_creator?`${u.contact_creator.first_name} ${u.contact_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:Zi(u.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:Zi(u.updated_at)||"N/A"})]})]})}),R==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:u.notes||"No notes available."})]})]}),R==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[H.tasks&&H.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ve(te==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Gt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",H.tasks.length,")"]})]}),te==="tasks"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),te==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:H.tasks.map((J,Ce)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/tasks",{state:{taskID:J.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Gt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:J.subject||J.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:J.description||"No description"}),J.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",J.assigned_to.first_name," ",J.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Zi(J.due_date||J.created_at)})]},`task-${Ce}`))})]}),H.meetings&&H.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ve(te==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ct,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",H.meetings.length,")"]})]}),te==="meetings"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),te==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:H.meetings.map((J,Ce)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/meetings",{state:{meetingID:J.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Ct,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:J.subject||J.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:J.description||J.location||"No description"}),J.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",J.host.first_name," ",J.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Zi(J.start_time||J.created_at)})]},`meeting-${Ce}`))})]}),H.calls&&H.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ve(te==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(At,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",H.calls.length,")"]})]}),te==="calls"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),te==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:H.calls.map((J,Ce)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/calls",{state:{callID:J.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(At,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:J.subject||J.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:J.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Zi(J.call_time||J.created_at)})]},`call-${Ce}`))})]}),H.deals&&H.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ve(te==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",H.deals.length,")"]})]}),te==="deals"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),te==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:H.deals.map((J,Ce)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/deals",{state:{dealID:J.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[J.deal_id?J.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",J.name||J.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:J.stage||J.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Zi(J.close_date||J.created_at)})]},`deal-${Ce}`))})]}),H.quotes&&H.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ve(te==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(xn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",H.quotes.length,")"]})]}),te==="quotes"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),te==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:H.quotes.map((J,Ce)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/quotes",{state:{quoteID:J.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(xn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(J.quote_id?J.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:J.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Zi(J.presented_date)||""})]},`quote-${Ce}`))})]}),(!H||(!H.tasks||H.tasks.length===0)&&(!H.meetings||H.meetings.length===0)&&(!H.calls||H.calls.length===0)&&(!H.quotes||H.quotes.length===0)&&(!H.deals||H.deals.length===0)&&(!H.contacts||H.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsx("div",{className:"flex flex-col gap-4",children:n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Contact"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(At,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!u?.email){alert("No email address available");return}const J=encodeURIComponent(u.email),Ce=encodeURIComponent(""),me=encodeURIComponent(""),V=`mailto:${J}?subject=${Ce}&body=${me}`;window.location.href=V},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Zn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Contact"}}}),children:[n.jsx(Ct,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Contact"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Gt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]})})]})]})]})}):null,G=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&n.jsx(Rt,{message:"Loading contacts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(On,{className:"mr-2 text-blue-600"})," Contacts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{se(),Ie(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(dn,{className:"mr-2"})," Add Contact"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search contacts",value:z,onChange:J=>F(J.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:D,onChange:J=>M(J.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:Ae.map(J=>n.jsx("option",{value:J.value,children:J.label},J.value??J.label))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-center w-12",children:n.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer",checked:qe.length>0&&je.length===qe.length,onChange:Ye})}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),n.jsx("th",{className:"py-3 px-4",children:"Department"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Created"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:je.length>0?n.jsx("button",{onClick:fe,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${je.length} selected items`,children:n.jsx(zt,{size:18})}):""})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:9,children:"Loading contacts..."})}):ge.length>0?qe.map(J=>{const Ce=[{Icon:Zn,value:J.email,key:"email"},{Icon:At,value:J.work_phone,key:"work_phone"},{Icon:Yc,value:J.mobile_phone_1,key:"mobile_phone_1"},{Icon:Yc,value:J.mobile_phone_2,key:"mobile_phone_2"}].filter(me=>!!me.value);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:me=>{me.target.closest('input[type="checkbox"]')||me.target.closest("button")||(Ze(J),ae(J.id))},children:[n.jsx("td",{className:"py-3 px-4 text-center align-top",children:n.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer",checked:je.includes(J.id),onChange:()=>B(J.id)})}),n.jsxs("td",{className:"py-3 px-4 align-top",children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:Im(J)||"--"}),n.jsx("div",{className:"text-xs text-gray-500",children:J.title||"No title"})]}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[n.jsx(Tx,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"break-words",children:J.account?.name||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:Ce.length>0?n.jsx("div",{className:"space-y-1 text-gray-700",children:Ce.map(({Icon:me,value:V,key:_e})=>{const Ue=pt.createElement(me,{className:"text-gray-500 flex-shrink-0"});return n.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[Ue,n.jsx("span",{children:V})]},_e)})}):n.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[n.jsx(Qt,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:J.department||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(Jt,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:J.assigned_contact?`${J.assigned_contact.first_name} ${J.assigned_contact.last_name}`:"Unassigned"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[n.jsx(Ct,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"text-xs",children:Zi(J.created_at)||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${J.status==="Inactive"?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:J.status||"Active"})}),n.jsx("td",{className:"py-3 px-4 align-top"})]},J.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:9,children:"No contacts found."})})})]})}),n.jsx(en,{className:"mt-4",totalItems:ge.length,pageSize:re,currentPage:Y,onPrev:Te,onNext:He,onPageSizeChange:J=>{ee(J),oe(1)},pageSizeOptions:[10,20,30,40,50],label:"contacts"})]}),K=p?n.jsx("div",{id:"modalBackdrop",onClick:de,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:J=>J.stopPropagation(),children:[n.jsx("button",{onClick:()=>{Se(),Ie(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:v||T,children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:y?"Edit Contact":"Add New Contact"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:ue,noValidate:!0,children:[n.jsx(Nc,{label:"First Name",name:"first_name",value:A.first_name,onChange:ke,placeholder:"First name",required:!0,isSubmitted:ct}),n.jsx(Nc,{label:"Last Name",name:"last_name",value:A.last_name,onChange:ke,placeholder:"Last name",required:!0,isSubmitted:ct}),n.jsx(eR,{label:"Account",value:A.account_id,onChange:J=>I(Ce=>({...Ce,account_id:J})),items:l||[],getLabel:J=>J?.name??"",placeholder:"Search account...",required:!0,isSubmitted:ct,disabled:v||l.length===0}),n.jsx(eR,{label:"Assigned To",value:A.assigned_to,onChange:J=>I(Ce=>({...Ce,assigned_to:J})),items:c||[],getLabel:J=>`${J?.first_name??""} ${J?.last_name??""} (${J?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:ct,disabled:v||c.length===0}),n.jsx(Nc,{label:"Title",name:"title",value:A.title,onChange:ke,placeholder:"Job title",disabled:v}),n.jsx(Nc,{label:"Department",name:"department",value:A.department,onChange:ke,placeholder:"Department",disabled:v}),n.jsx(Nc,{label:"Email",name:"email",type:"email",value:A.email,onChange:ke,placeholder:"example@email.com",required:!0,isSubmitted:ct}),n.jsx(Nc,{label:"Work Phone",name:"work_phone",value:A.work_phone,onChange:ke,placeholder:"09xx xxx xxxx",disabled:v}),n.jsx(Nc,{label:"Mobile Phone 1",name:"mobile_phone_1",value:A.mobile_phone_1,onChange:ke,placeholder:"09xx xxx xxxx",disabled:v}),n.jsx(Nc,{label:"Mobile Phone 2",name:"mobile_phone_2",value:A.mobile_phone_2,onChange:ke,placeholder:"09xx xxx xxxx",disabled:v}),n.jsx(P1e,{label:"Notes",name:"notes",value:A.notes,onChange:ke,placeholder:"Additional details...",rows:3,disabled:v,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{Se(),Ie(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:v||T,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:v||T,children:v?"Saving...":y?"Update Contact":"Save Contact"})]})]})]})}):null,ne=N?n.jsx(D1e,{open:!0,title:N.title,message:N.message,confirmLabel:N.confirmLabel,cancelLabel:N.cancelLabel,variant:N.variant,onConfirm:Ne,onCancel:Fe,loading:T}):null;return n.jsxs(n.Fragment,{children:[G,$,K,ne]})}function Nc({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,isSubmitted:c=!1,className:d=""}){const u=c&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${d}
        `})]})}function eR({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:o,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(L1e,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:l,hasError:u})]})}function L1e({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,hasError:o=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(v=>String(v.id)===String(t)),y=x?s(x):"",w=h.useMemo(()=>{const v=u.trim().toLowerCase();return(v?e.filter(N=>(s(N)||"").toLowerCase().includes(v)):e).slice(0,l)},[e,u,s,l]);return h.useEffect(()=>{const v=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:y,placeholder:r,onFocus:()=>!i&&d(!0),onChange:v=>{f(v.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${o?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:w.length>0?w.map(v=>{const C=String(v.id),N=s(v),S=String(t)===C;return n.jsx("button",{type:"button",onClick:()=>{a(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:N||"--"},C)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function P1e({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:l=!1,className:o=""}){return n.jsxs("div",{className:o,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function D1e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),n.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}const s2=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function Dq({lead:e,onBack:t,fetchLeads:a,onEdit:s,onDelete:r,setSelectedLead:i,relatedActs:l}){const o=yt(),{leadID:c}=Io(),[d,u]=h.useState(e||null),[f,p]=h.useState("Overview"),[x,y]=h.useState(""),w=d?.status?.toUpperCase()==="QUALIFIED",[v,C]=h.useState(null),[N,S]=h.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[T,k]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[_,E]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),A=async()=>{try{if(e){u(e),y(e.status||"New");return}if(!c)return;const M=await ce.get(`/leads/get/${c}`);u(M.data),y(M.data.status||"New"),S({name:M.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:M.data.territory?.id||null,assigned_to:M.data.assigned_to?.id||null,created_by:M.data.creator?.id||null}),k({last_name:M.data.last_name||"",first_name:M.data.first_name||"",account_id:null,title:M.data.title||"",department:M.data.department||"",email:M.data.email||"",work_phone:M.data.work_phone||"",mobile_phone_1:M.data.mobile_phone_1||"",mobile_phone_2:M.data.mobile_phone_2||"",notes:"",assigned_to:M.data.assigned_to?.id||null,created_by:M.data.creator?.id||null}),E({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:M.data.assigned_to?.id||null,created_by:M.data.creator?.id||null})}catch(M){console.error(M)}};h.useEffect(()=>{e?(u(e),y(e.status||"New")):c&&A()},[c,e]);const I=async()=>{try{if(x==="Converted"&&d?.status?.toUpperCase()!=="QUALIFIED"){q.error("Lead must be Qualified before it can be converted.");return}const M=await ce.put(`/leads/${d.id}/update/status`,{status:x});q.success("Lead status updated successfully");const W={...d,status:M.data.status};u(W),i&&i(W),a&&a(),t&&t()}catch(M){console.error(M),q.error("Failed to update lead status")}},z=async M=>{const W={...N,assigned_to:M.assigned_to?.id,billing_address:M.address,shipping_address:M.address,created_by:M.creator?.id,industry:null,name:M.company_name,phone_number:M.work_phone,status:"Prospect",territory_id:M.territory?.id,website:""};console.log("Account data: ",W),console.log("Contact data: ",T),console.log("Deal data: ",_),console.log("Lead data: ",M);try{const R=(await ce.post("/accounts/convertedLead",W)).data.id,Q={...T,account_id:R,assigned_to:M.assigned_to?.id,created_by:M.creator?.id,department:M.department,email:M.email,first_name:M.first_name,last_name:M.last_name,mobile_phone_1:M.mobile_phone_1,mobile_phone_2:M.mobile_phone_2,notes:M.notes,title:M.title,work_phone:M.work_phone},oe=(await ce.post("/contacts/convertedLead",Q)).data.id,re=()=>{switch(_.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},ee=_.amount&&_.amount!==""?parseFloat(_.amount):0,H={..._,account_id:R,assigned_to:M.assigned_to?.id,created_by:M.creator?.id,primary_contact_id:oe,probability:re(),stage:"Prospecting"},ye=await ce.post("/deals/convertedLead",H),te=await ce.put(`/leads/convert/${M.id}`);i&&i(null),a(),q.success("Lead converted successfully!"),t()}catch(Z){console.error("Error during conversion:",Z);const R=Z.response?.data?.detail||Z.message||"Failed to convert lead. Please try again.";q.error(R)}},F=M=>{switch((M||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},D=M=>M.toString().toLowerCase().replace(/\b\w/g,W=>W.toUpperCase());return d?n.jsx(n.Fragment,{children:n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),n.jsx("button",{onClick:()=>{t?t():o(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Vn,{size:25})})]})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[d.first_name," ",d.last_name]}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${F(d.status)}`,children:D(d.status||"New")}),n.jsx("div",{className:"flex flex-col",children:n.jsx("button",{onClick:()=>z(d),disabled:!w,title:w?"Convert Lead":"Lead must be Qualified before converting",className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2
      ${w?"bg-green-600 hover:bg-green-700 text-white focus:ring-green-400":"bg-gray-200 text-gray-400 cursor-not-allowed"}
    `,children:"Convert"})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",onClick:()=>{s&&d&&s(d)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(oa,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",onClick:()=>{r&&d&&r(d)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(zt,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-4 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(M=>n.jsx("button",{onClick:()=>p(M),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${f===M?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:M},M))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[f==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Name:"}),n.jsxs("p",{children:[d.first_name," ",d.last_name||"N/A"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:d.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Job Title:"}),n.jsx("p",{children:d.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:d.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:d.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:d.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:d.assigned_to?`${d.assigned_to.first_name} ${d.assigned_to.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:d.creator?`${d.creator.first_name} ${d.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:d.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Source:"}),n.jsx("p",{children:d.source||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Address:"}),n.jsx("p",{children:d.address||"N/A"})]})]})}),f==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]})]}),f==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[l.tasks&&l.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(v==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Gt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",l.tasks.length,")"]})]}),v==="tasks"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),v==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:l.tasks.map((M,W)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>o("/admin/tasks",{state:{taskID:M.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Gt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:M.subject||M.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:M.description||"No description"}),M.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned:"," ",M.assigned_to.first_name," ",M.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:s2(M.due_date||M.created_at)})]},`task-${W}`))})]}),l.meetings&&l.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(v==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ct,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",l.meetings.length,")"]})]}),v==="meetings"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),v==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:l.meetings.map((M,W)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>o("/admin/meetings",{state:{meetingID:M.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Ct,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:M.subject||M.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:M.description||M.location||"No description"}),M.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",M.host.first_name," ",M.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:s2(M.start_time||M.created_at)})]},`meeting-${W}`))})]}),l.calls&&l.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(v==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(At,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",l.calls.length,")"]})]}),v==="calls"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),v==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:l.calls.map((M,W)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>o("/admin/calls",{state:{callID:M.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(At,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:M.subject||M.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:M.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:s2(M.call_time||M.created_at)})]},`call-${W}`))})]}),(!l||(!l.tasks||l.tasks.length===0)&&(!l.meetings||l.meetings.length===0)&&(!l.calls||l.calls.length===0)&&(!l.quotes||l.quotes.length===0)&&(!l.deals||l.deals.length===0)&&(!l.contacts||l.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{d&&o("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:d.title?`Call regarding ${d.title}`:`Call with ${d.first_name} ${d.last_name}`,relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assigned_to:d.assigned_to?.id?String(d.assigned_to.id):"",direction:"Outgoing",status:"Planned"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(At,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const M=encodeURIComponent(d.email),W=encodeURIComponent(""),Z=encodeURIComponent(""),R=`mailto:${M}?subject=${W}&body=${Z}`;window.location.href=R},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Zn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{d&&o("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:d.title?`Meeting regarding ${d.title}`:`Meeting with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",status:"Planned"}}})},children:[n.jsx(Ct,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{d&&o("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:d.title?`Follow up on ${d.title}`:`Follow up with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Gt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:x,onChange:M=>y(M.target.value),children:[n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),d?.status?.toUpperCase()==="QUALIFIED"&&n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]}),n.jsx("button",{onClick:I,disabled:x===d.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${x===d.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const O1e=Uf.all(),r2=O1e.map((e,t)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${t}`})),M1e=e=>e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()),I1e=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},i2={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function $1e(){const e=yt(),{leadID:t}=Io();Ds();const[a,s]=h.useState(null),[r,i]=h.useState(!1),[l,o]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(!1),[y,w]=h.useState(""),[v,C]=h.useState("Filter by Status"),[N,S]=h.useState(""),[T,k]=h.useState(1),[_,E]=h.useState(10),[A,I]=h.useState(i2),[z,F]=h.useState(!1),[D,M]=h.useState(null),[W,Z]=h.useState(!1),[R,Q]=h.useState(null),[Y,oe]=h.useState(!1),[re,ee]=h.useState([]),[H,ye]=h.useState({});h.useRef(null);const[te,ve]=h.useState(!1),[je,Oe]=h.useState(null),[$e,pe]=h.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[Me,Le]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[he,ae]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});h.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const Ae=async()=>{try{const me=await ce.get("/leads/getUsers");o(me.data)}catch(me){console.error(`Error fetching users: ${me}`)}},ge=async()=>{x(!0);try{const me=await ce.get("/leads/admin/getLeads");f(me.data),console.log(me.data)}catch(me){console.error(`Error fetching leads: ${me}`)}finally{x(!1)}};h.useEffect(()=>{Ae(),ge()},[]),h.useEffect(()=>{if(t&&u.length>0&&!r&&!z){const me=u.find(V=>V.id===Number(t));me&&s(me)}else!t&&!a&&s(null)},[t,u,r,z]),h.useEffect(()=>{if(je){const V=(rt=>{if(!rt)return{code:"+63",number:""};const bt=rt.match(/^(\+\d+)\s(.+)$/);if(bt)return{code:bt[1],number:bt[2]};if(rt.startsWith("+")){const gt=rt.match(/^(\+\d{1,3})/);if(gt)return{code:gt[1],number:rt.substring(gt[1].length).trim()}}return{code:"+63",number:rt}})(je.work_phone),_e=[];je.work_phone&&_e.push(`Work: ${je.work_phone}`),je.mobile_phone_1&&_e.push(`Mobile 1: ${je.mobile_phone_1}`),je.mobile_phone_2&&_e.push(`Mobile 2: ${je.mobile_phone_2}`);const Ue=_e.length>0?_e.join(" | "):"";pe({name:je.company_name||"",website:"",countryCode:V.code,phone_number:V.number,combinedPhoneNumbers:Ue,billing_address:je.address||"",shipping_address:je.address||"",industry:"",status:"Prospect",territory_id:je.assigned_to?.territory?.id||null,assigned_to:je.assigned_to?.id||null,created_by:je.creator?.id||null}),Le({last_name:je.last_name||"",first_name:je.first_name||"",account_id:null,title:je.title||"",department:je.department||"",email:je.email||"",work_phone:je.work_phone||"",mobile_phone_1:je.mobile_phone_1||"",mobile_phone_2:je.mobile_phone_2||"",notes:je.notes||"",assigned_to:je.assigned_to?.id||null,created_by:je.creator?.id||null}),ae({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:je.assigned_to?.id||null,created_by:je.creator?.id||null})}},[je]);const Be=me=>w(me.target.value),qe=h.useMemo(()=>{let me=[...u];const V=y.trim().toLowerCase();V&&(me=me.filter(Ue=>[Ue?.first_name,Ue?.last_name,Ue?.company_name,Ue?.title,Ue?.email,Ue?.work_phone,Ue?.assigned_to?`${Ue.assigned_to.first_name} ${Ue.assigned_to.last_name}`:""].some(bt=>bt&&bt.toString().toLowerCase().includes(V))));const _e=v.trim().toUpperCase();return _e&&_e!=="FILTER BY STATUS"?me=me.filter(Ue=>(Ue.status?Ue.status.toUpperCase():"")===_e):me=me.filter(Ue=>(Ue.status?Ue.status.toUpperCase():"")!=="CONVERTED"),N&&me.sort((Ue,rt)=>{const bt=`${Ue.first_name} ${Ue.last_name}`,gt=`${rt.first_name} ${rt.last_name}`;return N==="asc"?bt.localeCompare(gt):gt.localeCompare(bt)}),me},[u,y,v,N]),Te=Math.max(1,Math.ceil(qe.length/_)||1);h.useEffect(()=>{k(1)},[y,v]),h.useEffect(()=>{k(me=>{const V=Math.max(1,Math.ceil(qe.length/_)||1);return me>V?V:me})},[qe.length,_]);const He=h.useMemo(()=>{const me=(T-1)*_;return qe.slice(me,me+_)},[qe,T,_]),Ye=()=>k(me=>Math.max(me-1,1)),B=()=>k(me=>Math.min(me+1,Te)),fe=me=>{E(me),k(1)},Se=h.useCallback(async me=>{try{const V=await ce.get(`/activities/lead/${me}`);ye(V.data&&typeof V.data=="object"?V.data:{})}catch(V){console.error(V),V.response?.status===404&&(console.warn("No activities found for this account."),ye({}))}},[]),de=me=>{s(me),Se(me.id)},ke=()=>{s(null),t&&e("/admin/leads",{replace:!0})},se=()=>{i(!1),I(i2),F(!1),M(null),Z(!1),d(null),sessionStorage.removeItem("editLeadData")},We=me=>{me.target.id==="modalBackdrop"&&se()},Re=()=>{I(i2),F(!1),M(null),d(null),i(!0)},ct=me=>{if(!me){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",me),console.log("Current state - leadID:",t,"selectedLead:",a,"showModal:",r);const V=gt=>{if(!gt)return{code:"+63",number:""};const _t=gt.match(/^(\+\d+)\s(.+)$/);return _t?{code:_t[1],number:_t[2]}:{code:"+63",number:gt}},_e=V(me.work_phone),Ue=V(me.mobile_phone_1),rt=V(me.mobile_phone_2);let bt="";if(me.assigned_to){bt=String(me.assigned_to.id);const gt=l?.find(_t=>_t.id===me.assigned_to.id);d(gt)}I({first_name:me.first_name||"",last_name:me.last_name||"",company_name:me.company_name||"",title:me.title||"",department:me.department||"",email:me.email||"",work_ccode:_e.code,work_phone:_e.number,m1_ccode:Ue.code,mobile_phone_1:Ue.number,m2_ccode:rt.code,mobile_phone_2:rt.number,address:me.address||"",notes:me.notes||"",source:me.source||"",territory_id:me.territory?.id||null,lead_owner:bt,status:me.status||"New"}),F(!0),M(me.id),a?(console.log("Coming from detail view - closing detail modal and showing edit form"),s(null),i(!0)):(console.log("Already in list view - showing modal"),i(!0))},Ie=me=>{if(!me){console.error("handleDelete: lead is null or undefined");return}console.log("handleDelete called with lead:",me);const V=`${me.first_name} ${me.last_name}`||"this lead";Q({title:"Delete Lead",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:V}),"? This action cannot be undone."]}),confirmLabel:"Delete Lead",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:me.id,name:V}})},ue=me=>{const{name:V,value:_e}=me.target;if(I(Ue=>({...Ue,[V]:_e})),V==="lead_owner"){const Ue=l.find(rt=>rt.id===parseInt(_e));d(Ue)}},[Ne,Fe]=h.useState(!1),Ze=me=>{if(me.preventDefault(),Fe(!0),!A.last_name?.trim()){q.error("Last name is required.");return}if(!A.company_name?.trim()){q.error("Company is required.");return}if(!A.title?.trim()){q.error("Job title is required.");return}if(!A.email?.trim()){q.error("Email is required.");return}if(!A.email.includes("@")){q.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(A.email)){q.error("Please enter a valid email address with a dot in the domain.");return}if(!A.lead_owner){q.error("Please assign a lead owner.");return}const _e={...A,territory_id:A.territory_id?parseInt(A.territory_id):null,lead_owner:parseInt(A.lead_owner),work_phone:`${A.work_ccode} ${A.work_phone}`,mobile_phone_1:`${A.m1_ccode} ${A.mobile_phone_1}`,mobile_phone_2:`${A.m2_ccode} ${A.mobile_phone_2}`},Ue=z&&D?"update":"create",rt=`${A.first_name} ${A.last_name}`;Q({title:Ue==="create"?"Confirm New Lead":"Confirm Update",message:Ue==="create"?n.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",n.jsx("span",{className:"font-semibold",children:rt}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:rt}),"?"]}),confirmLabel:Ue==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:Ue,payload:_e,targetId:D||null,name:rt}})},st=me=>{if(me.target.checked){const V=He.map(_e=>_e.id);ee(V)}else ee([])},Ee=me=>{ee(V=>V.includes(me)?V.filter(_e=>_e!==me):[...V,me])},Je=async()=>{re.length!==0&&Q({title:"Delete Leads",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:re.length})," selected leads? This action cannot be undone."]}),confirmLabel:`Delete ${re.length} Lead(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",leadIds:re}})},be=async()=>{if(!R?.action){Q(null);return}const{action:me}=R,{type:V,payload:_e,targetId:Ue,name:rt,lead:bt,leadIds:gt}=me;console.log(_e),oe(!0);try{if(V==="create")Z(!0),await ce.post("/leads/create",_e),q.success(`Lead "${rt}" created successfully.`),se(),await ge();else if(V==="update"){if(!Ue)throw new Error("Missing lead identifier for update.");Z(!0);const _t=await ce.put(`/leads/${Ue}`,_e);q.success(`Lead "${rt}" updated successfully.`),a&&a.id===Ue&&s(null),se(),await ge()}else if(V==="delete"){if(!Ue)throw new Error("Missing lead identifier for deletion.");await ce.delete(`/leads/${Ue}`),q.success(`Lead "${rt}" deleted successfully.`),a?.id===Ue&&s(null),await ge()}else V==="bulk-delete"&&(await ce.delete("/leads/admin/bulk-delete",{data:{lead_ids:gt}}),q.success(`Successfully deleted ${gt.length} leads`),ee([]),await ge())}catch(_t){console.error(_t);const Wt=V==="create"?"Failed to create lead. Please review the details and try again.":V==="update"?"Failed to update lead. Please review the details and try again.":"Failed to delete lead. Please try again.",un=_t.response?.data?.detail||Wt;q.error(un)}finally{(V==="create"||V==="update")&&Z(!1),V!=="edit"&&(oe(!1),Q(null))}},Ke=()=>{Y||Q(null)},$=u.filter(me=>me.status==="New").length,G=u.filter(me=>me.status==="Contacted").length,K=u.filter(me=>me.status==="Qualified").length,ne=u.filter(me=>me.status==="Converted").length,J=u.filter(me=>me.status==="Lost").length,Ce=[{title:"New",value:$,icon:Wn,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:G,icon:At,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:K,icon:ba,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:ne,icon:Ro,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:J,icon:Ps,color:"text-red-600",bgColor:"bg-red-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[p&&n.jsx(Rt,{message:"Loading leads..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Wn,{className:"mr-2 text-blue-600"}),"Leads"]}),n.jsxs("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:[n.jsxs("button",{onClick:()=>{q.info("Download functionality coming soon")},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx($o,{className:"mr-2"})," Download"]}),n.jsxs("button",{onClick:()=>{Re(),Fe(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(dn,{className:"mr-2"})," Add Lead"]})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ce.map(me=>n.jsx(z1e,{...me},me.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search leads",value:y,onChange:Be,className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:v,onChange:me=>C(me.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]})}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:N,onChange:me=>S(me.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"",children:"Sort by Name"}),n.jsx("option",{value:"asc",children:"A-Z"}),n.jsx("option",{value:"desc",children:"Z-A"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:He.length>0&&He.every(me=>re.includes(me.id)),onChange:st})}),n.jsx("th",{className:"py-3 px-4",children:"Name"}),n.jsx("th",{className:"py-3 px-4",children:"Company"}),n.jsx("th",{className:"py-3 px-4",children:"Job Title"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:re.length>0?n.jsx("button",{onClick:Je,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${re.length} selected leads`,children:n.jsx(zt,{size:18})}):""})]})}),n.jsx("tbody",{children:qe.length>0?He.map(me=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",children:[n.jsx("td",{className:"py-3 px-4",onClick:V=>V.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:re.includes(me.id),onChange:()=>Ee(me.id)})}),n.jsx("td",{className:"py-3 px-4",onClick:()=>de(me),children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[me.first_name," ",me.last_name]})}),n.jsx("td",{className:"py-3 px-4",onClick:()=>de(me),children:n.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:me.company_name||"--"})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",onClick:()=>de(me),children:me.title||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",onClick:()=>de(me),children:me.email||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",onClick:()=>de(me),children:me.assigned_to?`${me.assigned_to.first_name} ${me.assigned_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",onClick:()=>de(me),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${I1e(me.status||"New")}`,children:M1e(me.status||"New")})}),n.jsx("td",{})]},me.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No leads found."})})})]})}),n.jsx(en,{className:"mt-4",totalItems:qe.length,pageSize:_,currentPage:T,onPrev:Ye,onNext:B,onPageSizeChange:fe,label:"leads"}),r&&n.jsx("div",{id:"modalBackdrop",onClick:We,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:me=>me.stopPropagation(),children:[n.jsx("button",{onClick:()=>{se(),Fe(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:z?"Edit Lead":"Add New Lead"}),n.jsxs("form",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),n.jsx("input",{type:"text",name:"first_name",value:A.first_name,onChange:ue,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"last_name",placeholder:"Smith",value:A.last_name,onChange:ue,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
              ${Ne&&!A.last_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
          focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Company ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:A.company_name,onChange:ue,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Ne&&!A.company_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Job Title",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:A.title,onChange:ue,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Ne&&!A.title?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),n.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:A.department,onChange:ue,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Email",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:A.email,onChange:ue,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Ne&&!A.email?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"work_ccode",value:A.work_ccode,onChange:ue,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:r2.map(me=>n.jsx("option",{value:me.code,children:me.code},me.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:A.work_phone,onChange:ue,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m1_ccode",value:A.m1_ccode,onChange:ue,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:r2.map(me=>n.jsx("option",{value:me.code,children:me.code},me.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:A.mobile_phone_1,onChange:ue,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m2_ccode",value:A.m2_ccode,onChange:ue,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:r2.map(me=>n.jsx("option",{value:me.code,children:me.code},me.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:A.mobile_phone_2,onChange:ue,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),n.jsx("input",{type:"text",name:"address",value:A.address,onChange:ue,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:`w-full rounded-lg ${Ne&&!A.lead_owner?"border border-red-400":"border border-gray-300"}`,children:n.jsx(F1e,{items:Array.isArray(l)?l:[],value:A.lead_owner??"",placeholder:"Search a user...",getLabel:me=>`${me.first_name} ${me.last_name}`,onChange:me=>{const V=l.find(Ue=>String(Ue.id)===String(me));d(V);let _e=null;V&&V.assigned_territory&&V.assigned_territory.length===1&&(_e=V.assigned_territory[0].id),I(Ue=>({...Ue,lead_owner:me,territory_id:_e}))}})})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),n.jsxs("select",{name:"territory_id",value:A.territory_id||"",onChange:ue,disabled:!c||!c.assigned_territory||c.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[n.jsx("option",{value:"",disabled:!0,children:c?c.assigned_territory&&c.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),c&&c.assigned_territory&&c.assigned_territory.map(me=>n.jsx("option",{value:me.id,children:me.name},me.id))]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),n.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:A.source,onChange:ue,children:[n.jsx("option",{value:"",disabled:!0,children:"Select Source"}),n.jsx("option",{value:"Website",children:"Website"}),n.jsx("option",{value:"Referral",children:"Referral"}),n.jsx("option",{value:"Cold call",children:"Cold call"}),n.jsx("option",{value:"Event",children:"Event"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),n.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:A.notes,onChange:ue,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("button",{type:"button",onClick:()=>{se(),Fe(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:W||Y,children:"Cancel"}),n.jsx("button",{type:"submit",onClick:Ze,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:W||Y,children:W||Y?"Processing...":z?"Update Lead":"Save Lead"})]})]})]})}),R&&n.jsx(R1e,{open:!0,title:R.title,message:R.message,confirmLabel:R.confirmLabel,cancelLabel:R.cancelLabel,variant:R.variant,onConfirm:be,onCancel:Ke,loading:Y}),a&&!r&&!z&&n.jsx(Dq,{relatedActs:H,lead:a,onBack:ke,fetchLeads:ge,setSelectedLead:s,onEdit:ct,onDelete:Ie})]})}function R1e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),n.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}function z1e({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function F1e({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200}){const[o,c]=h.useState(!1),[d,u]=h.useState(""),f=h.useRef(null),p=e.find(w=>String(w.id)===String(t)),x=p?s(p):"",y=h.useMemo(()=>{const w=d.trim().toLowerCase();return(w?e.filter(C=>(s(C)||"").toLowerCase().includes(w)):e).slice(0,l)},[e,d,s,l]);return h.useEffect(()=>{const w=v=>{f.current&&!f.current.contains(v.target)&&c(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{o||u("")},[o]),n.jsxs("div",{ref:f,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:o?d:x,placeholder:r,onFocus:()=>!i&&c(!0),onChange:w=>{u(w.target.value),o||c(!0)},className:"w-full rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),o&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:y.length>0?y.map(w=>{const v=String(w.id),C=s(w),N=String(t)===v;return n.jsx("button",{type:"button",onClick:()=>{a(v),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${N?"bg-blue-50":""}`,children:C||"--"},v)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}let U1e={data:""},B1e=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||U1e},H1e=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,G1e=/\/\*[^]*?\*\/|  +/g,tR=/\n+/g,Dc=(e,t)=>{let a="",s="",r="";for(let i in e){let l=e[i];i[0]=="@"?i[1]=="i"?a=i+" "+l+";":s+=i[1]=="f"?Dc(l,i):i+"{"+Dc(l,i[1]=="k"?"":t)+"}":typeof l=="object"?s+=Dc(l,t?t.replace(/([^,])+/g,o=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,o):o?o+" "+c:c)):i):l!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=Dc.p?Dc.p(i,l):i+":"+l+";")}return a+(t&&r?t+"{"+r+"}":r)+s},eo={},Oq=e=>{if(typeof e=="object"){let t="";for(let a in e)t+=a+Oq(e[a]);return t}return e},W1e=(e,t,a,s,r)=>{let i=Oq(e),l=eo[i]||(eo[i]=(c=>{let d=0,u=11;for(;d<c.length;)u=101*u+c.charCodeAt(d++)>>>0;return"go"+u})(i));if(!eo[l]){let c=i!==e?e:(d=>{let u,f,p=[{}];for(;u=H1e.exec(d.replace(G1e,""));)u[4]?p.shift():u[3]?(f=u[3].replace(tR," ").trim(),p.unshift(p[0][f]=p[0][f]||{})):p[0][u[1]]=u[2].replace(tR," ").trim();return p[0]})(e);eo[l]=Dc(r?{["@keyframes "+l]:c}:c,a?"":"."+l)}let o=a&&eo.g?eo.g:null;return a&&(eo.g=eo[l]),((c,d,u,f)=>{f?d.data=d.data.replace(f,c):d.data.indexOf(c)===-1&&(d.data=u?c+d.data:d.data+c)})(eo[l],t,s,o),l},V1e=(e,t,a)=>e.reduce((s,r,i)=>{let l=t[i];if(l&&l.call){let o=l(a),c=o&&o.props&&o.props.className||/^go/.test(o)&&o;l=c?"."+c:o&&typeof o=="object"?o.props?"":Dc(o,""):o===!1?"":o}return s+r+(l??"")},"");function YN(e){let t=this||{},a=e.call?e(t.p):e;return W1e(a.unshift?a.raw?V1e(a,[].slice.call(arguments,1),t.p):a.reduce((s,r)=>Object.assign(s,r&&r.call?r(t.p):r),{}):a,B1e(t.target),t.g,t.o,t.k)}let Mq,hT,gT;YN.bind({g:1});let ko=YN.bind({k:1});function q1e(e,t,a,s){Dc.p=t,Mq=e,hT=a,gT=s}function ud(e,t){let a=this||{};return function(){let s=arguments;function r(i,l){let o=Object.assign({},i),c=o.className||r.className;a.p=Object.assign({theme:hT&&hT()},o),a.o=/ *go\d+/.test(c),o.className=YN.apply(a,s)+(c?" "+c:"");let d=e;return e[0]&&(d=o.as||e,delete o.as),gT&&d[0]&&gT(o),Mq(d,o)}return r}}var Y1e=e=>typeof e=="function",Lv=(e,t)=>Y1e(e)?e(t):e,Q1e=(()=>{let e=0;return()=>(++e).toString()})(),Iq=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),K1e=20,IP="default",$q=(e,t)=>{let{toastLimit:a}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,a)};case 1:return{...e,toasts:e.toasts.map(l=>l.id===t.toast.id?{...l,...t.toast}:l)};case 2:let{toast:s}=t;return $q(e,{type:e.toasts.find(l=>l.id===s.id)?1:0,toast:s});case 3:let{toastId:r}=t;return{...e,toasts:e.toasts.map(l=>l.id===r||r===void 0?{...l,dismissed:!0,visible:!1}:l)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(l=>l.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(l=>({...l,pauseDuration:l.pauseDuration+i}))}}},Fb=[],Rq={toasts:[],pausedAt:void 0,settings:{toastLimit:K1e}},hl={},zq=(e,t=IP)=>{hl[t]=$q(hl[t]||Rq,e),Fb.forEach(([a,s])=>{a===t&&s(hl[t])})},Fq=e=>Object.keys(hl).forEach(t=>zq(e,t)),X1e=e=>Object.keys(hl).find(t=>hl[t].toasts.some(a=>a.id===e)),QN=(e=IP)=>t=>{zq(t,e)},Z1e={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},J1e=(e={},t=IP)=>{let[a,s]=h.useState(hl[t]||Rq),r=h.useRef(hl[t]);h.useEffect(()=>(r.current!==hl[t]&&s(hl[t]),Fb.push([t,s]),()=>{let l=Fb.findIndex(([o])=>o===t);l>-1&&Fb.splice(l,1)}),[t]);let i=a.toasts.map(l=>{var o,c,d;return{...e,...e[l.type],...l,removeDelay:l.removeDelay||((o=e[l.type])==null?void 0:o.removeDelay)||e?.removeDelay,duration:l.duration||((c=e[l.type])==null?void 0:c.duration)||e?.duration||Z1e[l.type],style:{...e.style,...(d=e[l.type])==null?void 0:d.style,...l.style}}});return{...a,toasts:i}},eCe=(e,t="blank",a)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...a,id:a?.id||Q1e()}),kx=e=>(t,a)=>{let s=eCe(t,e,a);return QN(s.toasterId||X1e(s.id))({type:2,toast:s}),s.id},Ya=(e,t)=>kx("blank")(e,t);Ya.error=kx("error");Ya.success=kx("success");Ya.loading=kx("loading");Ya.custom=kx("custom");Ya.dismiss=(e,t)=>{let a={type:3,toastId:e};t?QN(t)(a):Fq(a)};Ya.dismissAll=e=>Ya.dismiss(void 0,e);Ya.remove=(e,t)=>{let a={type:4,toastId:e};t?QN(t)(a):Fq(a)};Ya.removeAll=e=>Ya.remove(void 0,e);Ya.promise=(e,t,a)=>{let s=Ya.loading(t.loading,{...a,...a?.loading});return typeof e=="function"&&(e=e()),e.then(r=>{let i=t.success?Lv(t.success,r):void 0;return i?Ya.success(i,{id:s,...a,...a?.success}):Ya.dismiss(s),r}).catch(r=>{let i=t.error?Lv(t.error,r):void 0;i?Ya.error(i,{id:s,...a,...a?.error}):Ya.dismiss(s)}),e};var tCe=1e3,nCe=(e,t="default")=>{let{toasts:a,pausedAt:s}=J1e(e,t),r=h.useRef(new Map).current,i=h.useCallback((f,p=tCe)=>{if(r.has(f))return;let x=setTimeout(()=>{r.delete(f),l({type:4,toastId:f})},p);r.set(f,x)},[]);h.useEffect(()=>{if(s)return;let f=Date.now(),p=a.map(x=>{if(x.duration===1/0)return;let y=(x.duration||0)+x.pauseDuration-(f-x.createdAt);if(y<0){x.visible&&Ya.dismiss(x.id);return}return setTimeout(()=>Ya.dismiss(x.id,t),y)});return()=>{p.forEach(x=>x&&clearTimeout(x))}},[a,s,t]);let l=h.useCallback(QN(t),[t]),o=h.useCallback(()=>{l({type:5,time:Date.now()})},[l]),c=h.useCallback((f,p)=>{l({type:1,toast:{id:f,height:p}})},[l]),d=h.useCallback(()=>{s&&l({type:6,time:Date.now()})},[s,l]),u=h.useCallback((f,p)=>{let{reverseOrder:x=!1,gutter:y=8,defaultPosition:w}=p||{},v=a.filter(S=>(S.position||w)===(f.position||w)&&S.height),C=v.findIndex(S=>S.id===f.id),N=v.filter((S,T)=>T<C&&S.visible).length;return v.filter(S=>S.visible).slice(...x?[N+1]:[0,N]).reduce((S,T)=>S+(T.height||0)+y,0)},[a]);return h.useEffect(()=>{a.forEach(f=>{if(f.dismissed)i(f.id,f.removeDelay);else{let p=r.get(f.id);p&&(clearTimeout(p),r.delete(f.id))}})},[a,i]),{toasts:a,handlers:{updateHeight:c,startPause:o,endPause:d,calculateOffset:u}}},aCe=ko`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,sCe=ko`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,rCe=ko`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,iCe=ud("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${aCe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${sCe} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${rCe} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,lCe=ko`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,oCe=ud("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${lCe} 1s linear infinite;
`,cCe=ko`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,dCe=ko`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,uCe=ud("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${cCe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${dCe} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,mCe=ud("div")`
  position: absolute;
`,fCe=ud("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,hCe=ko`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,gCe=ud("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${hCe} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,pCe=({toast:e})=>{let{icon:t,type:a,iconTheme:s}=e;return t!==void 0?typeof t=="string"?h.createElement(gCe,null,t):t:a==="blank"?null:h.createElement(fCe,null,h.createElement(oCe,{...s}),a!=="loading"&&h.createElement(mCe,null,a==="error"?h.createElement(iCe,{...s}):h.createElement(uCe,{...s})))},xCe=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,yCe=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,bCe="0%{opacity:0;} 100%{opacity:1;}",vCe="0%{opacity:1;} 100%{opacity:0;}",wCe=ud("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,NCe=ud("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,jCe=(e,t)=>{let a=e.includes("top")?1:-1,[s,r]=Iq()?[bCe,vCe]:[xCe(a),yCe(a)];return{animation:t?`${ko(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ko(r)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},CCe=h.memo(({toast:e,position:t,style:a,children:s})=>{let r=e.height?jCe(e.position||t||"top-center",e.visible):{opacity:0},i=h.createElement(pCe,{toast:e}),l=h.createElement(NCe,{...e.ariaProps},Lv(e.message,e));return h.createElement(wCe,{className:e.className,style:{...r,...a,...e.style}},typeof s=="function"?s({icon:i,message:l}):h.createElement(h.Fragment,null,i,l))});q1e(h.createElement);var SCe=({id:e,className:t,style:a,onHeightUpdate:s,children:r})=>{let i=h.useCallback(l=>{if(l){let o=()=>{let c=l.getBoundingClientRect().height;s(e,c)};o(),new MutationObserver(o).observe(l,{subtree:!0,childList:!0,characterData:!0})}},[e,s]);return h.createElement("div",{ref:i,className:t,style:a},r)},_Ce=(e,t)=>{let a=e.includes("top"),s=a?{top:0}:{bottom:0},r=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Iq()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(a?1:-1)}px)`,...s,...r}},ACe=YN`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,$y=16,Lx=({reverseOrder:e,position:t="top-center",toastOptions:a,gutter:s,children:r,toasterId:i,containerStyle:l,containerClassName:o})=>{let{toasts:c,handlers:d}=nCe(a,i);return h.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:$y,left:$y,right:$y,bottom:$y,pointerEvents:"none",...l},className:o,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map(u=>{let f=u.position||t,p=d.calculateOffset(u,{reverseOrder:e,gutter:s,defaultPosition:t}),x=_Ce(f,p);return h.createElement(SCe,{id:u.id,key:u.id,onHeightUpdate:d.updateHeight,className:u.visible?ACe:"",style:x},u.type==="custom"?Lv(u.message,u):r?r(u):h.createElement(CCe,{toast:u,position:f}))}))},Px=Ya;function ECe(){h.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,t]=h.useState(null),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Actions"),[l,o]=h.useState(1),[c,d]=h.useState(10),u=async()=>{try{const N=await ce.get("/logs/read-all");t(N.data)}catch(N){console.error("Error fetching audit logs:",N)}};h.useEffect(()=>{u()},[]);const f=h.useMemo(()=>{if(!Array.isArray(e))return[];const N=a.trim().toLowerCase(),S=r?.toUpperCase?.()||"ALL";return e.filter(k=>{const _=k.timestamp?new Date(k.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",E=`${k.entity_type||""} ${k.entity_name||k.entity_details?.name||k.entity_details?.title||k.entity_id||""}`,A=`${k.logger?.first_name||""} ${k.logger?.last_name||""}`,I=[_,A,k.action,k.entity_type,E,k.description],z=N===""||I.some(D=>D==null?!1:D.toString().toLowerCase().includes(N)),F=S==="FILTER BY ACTIONS"||(k.action||"").toUpperCase()===S;return z&&F}).sort((k,_)=>{const E=k.timestamp?new Date(k.timestamp).getTime():0;return(_.timestamp?new Date(_.timestamp).getTime():0)-E})},[e,a,r]),p=Math.max(1,Math.ceil(f.length/c)||1);h.useEffect(()=>{o(1)},[a,r]),h.useEffect(()=>{o(N=>{const S=Math.max(1,Math.ceil(f.length/c)||1);return N>S?S:N})},[f.length,c]);const x=h.useMemo(()=>{const N=(l-1)*c;return f.slice(N,N+c)},[f,l,c]);f.length===0||(l-1)*c+1,Math.min(l*c,f.length);const y=()=>o(N=>Math.max(N-1,1)),w=()=>o(N=>Math.min(N+1,p)),v=()=>{if(!f.length){Px.error("No logs to export!");return}const N=["Timestamp","User","Action","Resource","Details"],S=f.map(A=>[new Date(A.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${A.logger?.first_name||""} ${A.logger?.last_name||""}`.trim(),A.action,`${A.entity_type}: ${A.entity_id}`,A.description||""]),T=[N.join(","),...S.map(A=>A.map(I=>`"${String(I).replace(/"/g,'""')}"`).join(","))].join(`
`),k=new Blob([T],{type:"text/csv;charset=utf-8;"}),_=URL.createObjectURL(k),E=document.createElement("a");E.href=_,E.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL(_)},C=N=>{switch((N||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&n.jsx(Rt,{message:"Loading audit logs..."}),n.jsx(Lx,{toastOptions:{duration:1e3}}),n.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[n.jsx(Ct,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),n.jsxs("p",{className:"text-sm text-blue-700",children:[n.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ws,{className:"text-blue-600",size:20}),n.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:v,children:[n.jsx($o,{className:"mr-2"}),"Export Logs"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[n.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search audit logs",value:a,onChange:N=>s(N.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:r,onChange:N=>i(N.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),n.jsx("option",{value:"CREATE",children:"CREATE"}),n.jsx("option",{value:"DELETE",children:"DELETE"}),n.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),n.jsx("th",{className:"py-3 px-4",children:"User"}),n.jsx("th",{className:"py-3 px-4",children:"Action"}),n.jsx("th",{className:"py-3 px-4",children:"Resource"}),n.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),n.jsx("tbody",{children:Array.isArray(f)&&f.length>0?x.map((N,S)=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(N.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:N.name}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${C(N.action)}`,children:N.action})}),n.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[N.entity_type,": ",N.entity_id]}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:N.description})]},S)):n.jsx("tr",{children:n.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),n.jsx(en,{className:"mt-4",totalItems:f.length,pageSize:c,currentPage:l,onPrev:y,onNext:w,onPageSizeChange:N=>{d(N),o(1)},pageSizeOptions:[10,20,30,40,50],label:"logs"})]})}var TCe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function $P(e){if(typeof e!="string")return!1;var t=TCe;return t.includes(e)}var kCe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],LCe=new Set(kCe);function Uq(e){return typeof e!="string"?!1:LCe.has(e)}function Bq(e){return typeof e=="string"&&e.startsWith("data-")}function Or(e){if(typeof e!="object"||e===null)return{};var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(Uq(a)||Bq(a))&&(t[a]=e[a]);return t}function Nu(e){if(e==null)return null;if(h.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Or(t)}return typeof e=="object"&&!Array.isArray(e)?Or(e):null}function Fs(e){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(Uq(a)||Bq(a)||$P(a))&&(t[a]=e[a]);return t}function PCe(e){return e==null?null:h.isValidElement(e)?Fs(e.props):typeof e=="object"&&!Array.isArray(e)?Fs(e):null}var DCe=["children","width","height","viewBox","className","style","title","desc"];function pT(){return pT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},pT.apply(null,arguments)}function OCe(e,t){if(e==null)return{};var a,s,r=MCe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function MCe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var RP=h.forwardRef((e,t)=>{var{children:a,width:s,height:r,viewBox:i,className:l,style:o,title:c,desc:d}=e,u=OCe(e,DCe),f=i||{width:s,height:r,x:0,y:0},p=Tt("recharts-surface",l);return h.createElement("svg",pT({},Fs(u),{className:p,width:s,height:r,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),h.createElement("title",null,c),h.createElement("desc",null,d),a)}),ICe=["children","className"];function xT(){return xT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},xT.apply(null,arguments)}function $Ce(e,t){if(e==null)return{};var a,s,r=RCe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function RCe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var ds=h.forwardRef((e,t)=>{var{children:a,className:s}=e,r=$Ce(e,ICe),i=Tt("recharts-layer",s);return h.createElement("g",xT({className:i},Fs(r),{ref:t}),a)}),Hq=h.createContext(null),zCe=()=>h.useContext(Hq),l2={},o2={},nR;function FCe(){return nR||(nR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a==="__proto__"}e.isUnsafeProperty=t})(o2)),o2}var c2={},aR;function Gq(){return aR||(aR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){switch(typeof a){case"number":case"symbol":return!1;case"string":return a.includes(".")||a.includes("[")||a.includes("]")}}e.isDeepKey=t})(c2)),c2}var d2={},sR;function zP(){return sR||(sR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="string"||typeof a=="symbol"?a:Object.is(a?.valueOf?.(),-0)?"-0":String(a)}e.toKey=t})(d2)),d2}var u2={},m2={},rR;function UCe(){return rR||(rR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){if(a==null)return"";if(typeof a=="string")return a;if(Array.isArray(a))return a.map(t).join(",");const s=String(a);return s==="0"&&Object.is(Number(a),-0)?"-0":s}e.toString=t})(m2)),m2}var iR;function FP(){return iR||(iR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UCe(),a=zP();function s(r){if(Array.isArray(r))return r.map(a.toKey);if(typeof r=="symbol")return[r];r=t.toString(r);const i=[],l=r.length;if(l===0)return i;let o=0,c="",d="",u=!1;for(r.charCodeAt(0)===46&&(i.push(""),o++);o<l;){const f=r[o];d?f==="\\"&&o+1<l?(o++,c+=r[o]):f===d?d="":c+=f:u?f==='"'||f==="'"?d=f:f==="]"?(u=!1,i.push(c),c=""):c+=f:f==="["?(u=!0,c&&(i.push(c),c="")):f==="."?c&&(i.push(c),c=""):c+=f,o++}return c&&i.push(c),i}e.toPath=s})(u2)),u2}var lR;function UP(){return lR||(lR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FCe(),a=Gq(),s=zP(),r=FP();function i(o,c,d){if(o==null)return d;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return d;const u=o[c];return u===void 0?a.isDeepKey(c)?i(o,r.toPath(c),d):d:u}case"number":case"symbol":{typeof c=="number"&&(c=s.toKey(c));const u=o[c];return u===void 0?d:u}default:{if(Array.isArray(c))return l(o,c,d);if(Object.is(c?.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return d;const u=o[c];return u===void 0?d:u}}}function l(o,c,d){if(c.length===0)return d;let u=o;for(let f=0;f<c.length;f++){if(u==null||t.isUnsafeProperty(c[f]))return d;u=u[c[f]]}return u===void 0?d:u}e.get=i})(l2)),l2}var f2,oR;function BCe(){return oR||(oR=1,f2=UP().get),f2}var HCe=BCe();const ju=Hi(HCe);var GCe=4;function zc(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:GCe,a=10**t,s=Math.round(e*a)/a;return Object.is(s,-0)?0:s}function pa(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),s=1;s<t;s++)a[s-1]=arguments[s];return e.reduce((r,i,l)=>{var o=a[l-1];return typeof o=="string"?r+o+i:o!==void 0?r+zc(o)+i:r+i},"")}var cs=e=>e===0?0:e>0?1:-1,Ui=e=>typeof e=="number"&&e!=+e,Lo=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Pt=e=>(typeof e=="number"||e instanceof Number)&&!Ui(e),Al=e=>Pt(e)||typeof e=="string",WCe=0,Np=e=>{var t=++WCe;return"".concat(e||"").concat(t)},ks=function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Pt(t)&&typeof t!="string")return s;var i;if(Lo(t)){if(a==null)return s;var l=t.indexOf("%");i=a*parseFloat(t.slice(0,l))/100}else i=+t;return Ui(i)&&(i=s),r&&a!=null&&i>a&&(i=a),i},Wq=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,a={},s=0;s<t;s++)if(!a[String(e[s])])a[String(e[s])]=!0;else return!0;return!1};function na(e,t,a){return Pt(e)&&Pt(t)?zc(e+a*(t-e)):t}function Vq(e,t,a){if(!(!e||!e.length))return e.find(s=>s&&(typeof t=="function"?t(s):ju(s,t))===a)}var ra=e=>e===null||typeof e>"u",Dx=e=>ra(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function VCe(e){return e!=null}function Ox(){}var qCe=["type","size","sizeType"];function yT(){return yT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},yT.apply(null,arguments)}function cR(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function dR(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?cR(Object(a),!0).forEach(function(s){YCe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):cR(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function YCe(e,t,a){return(t=QCe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function QCe(e){var t=KCe(e,"string");return typeof t=="symbol"?t:t+""}function KCe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XCe(e,t){if(e==null)return{};var a,s,r=ZCe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function ZCe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var qq={symbolCircle:EN,symbolCross:NW,symbolDiamond:CW,symbolSquare:SW,symbolStar:AW,symbolTriangle:EW,symbolWye:TW},JCe=Math.PI/180,eSe=e=>{var t="symbol".concat(Dx(e));return qq[t]||EN},tSe=(e,t,a)=>{if(t==="area")return e;switch(a){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var s=18*JCe;return 1.25*e*e*(Math.tan(s)-Math.tan(s*2)*Math.tan(s)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},nSe=(e,t)=>{qq["symbol".concat(Dx(e))]=t},BP=e=>{var{type:t="circle",size:a=64,sizeType:s="area"}=e,r=XCe(e,qCe),i=dR(dR({},r),{},{type:t,size:a,sizeType:s}),l="circle";typeof t=="string"&&(l=t);var o=()=>{var p=eSe(l),x=JL().type(p).size(tSe(a,s,l)),y=x();if(y!==null)return y},{className:c,cx:d,cy:u}=i,f=Fs(i);return Pt(d)&&Pt(u)&&Pt(a)?h.createElement("path",yT({},f,{className:Tt("recharts-symbols",c),transform:"translate(".concat(d,", ").concat(u,")"),d:o()})):null};BP.registerSymbol=nSe;var Yq=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,HP=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(h.isValidElement(e)&&(a=e.props),typeof a!="object"&&typeof a!="function")return null;var s={};return Object.keys(a).forEach(r=>{$P(r)&&(s[r]=(i=>a[r](a,i)))}),s},aSe=(e,t,a)=>s=>(e(t,a,s),null),Mx=(e,t,a)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var s=null;return Object.keys(e).forEach(r=>{var i=e[r];$P(r)&&typeof i=="function"&&(s||(s={}),s[r]=aSe(i,t,a))}),s};function uR(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function sSe(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?uR(Object(a),!0).forEach(function(s){rSe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):uR(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function rSe(e,t,a){return(t=iSe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function iSe(e){var t=lSe(e,"string");return typeof t=="symbol"?t:t+""}function lSe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function za(e,t){var a=sSe({},e),s=t,r=Object.keys(t),i=r.reduce((l,o)=>(l[o]===void 0&&s[o]!==void 0&&(l[o]=s[o]),l),a);return i}function Pv(){return Pv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Pv.apply(null,arguments)}function mR(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function oSe(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?mR(Object(a),!0).forEach(function(s){cSe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):mR(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function cSe(e,t,a){return(t=dSe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function dSe(e){var t=uSe(e,"string");return typeof t=="symbol"?t:t+""}function uSe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ei=32,mSe={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function fSe(e){var{data:t,iconType:a,inactiveColor:s}=e,r=ei/2,i=ei/6,l=ei/3,o=t.inactive?s:t.color,c=a??t.type;if(c==="none")return null;if(c==="plainline"){var d;return h.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:(d=t.payload)===null||d===void 0?void 0:d.strokeDasharray,x1:0,y1:r,x2:ei,y2:r,className:"recharts-legend-icon"})}if(c==="line")return h.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(r,"h").concat(l,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*l,",").concat(r,`
            H`).concat(ei,"M").concat(2*l,",").concat(r,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(l,",").concat(r),className:"recharts-legend-icon"});if(c==="rect")return h.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(ei/8,"h").concat(ei,"v").concat(ei*3/4,"h").concat(-ei,"z"),className:"recharts-legend-icon"});if(h.isValidElement(t.legendIcon)){var u=oSe({},t);return delete u.legendIcon,h.cloneElement(t.legendIcon,u)}return h.createElement(BP,{fill:o,cx:r,cy:r,size:ei,sizeType:"diameter",type:c})}function hSe(e){var{payload:t,iconSize:a,layout:s,formatter:r,inactiveColor:i,iconType:l}=e,o={x:0,y:0,width:ei,height:ei},c={display:s==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((u,f)=>{var p=u.formatter||r,x=Tt({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:u.inactive});if(u.type==="none")return null;var y=u.inactive?i:u.color,w=p?p(u.value,u,f):u.value;return h.createElement("li",Pv({className:x,style:c,key:"legend-item-".concat(f)},Mx(e,u,f)),h.createElement(RP,{width:a,height:a,viewBox:o,style:d,"aria-label":"".concat(w," legend icon")},h.createElement(fSe,{data:u,iconType:l,inactiveColor:i})),h.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},w))})}var gSe=e=>{var t=za(e,mSe),{payload:a,layout:s,align:r}=t;if(!a||!a.length)return null;var i={padding:0,margin:0,textAlign:s==="horizontal"?r:"left"};return h.createElement("ul",{className:"recharts-default-legend",style:i},h.createElement(hSe,Pv({},t,{payload:a})))},h2={},g2={},fR;function pSe(){return fR||(fR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a,s){const r=new Map;for(let i=0;i<a.length;i++){const l=a[i],o=s(l);r.has(o)||r.set(o,l)}return Array.from(r.values())}e.uniqBy=t})(g2)),g2}var p2={},hR;function Qq(){return hR||(hR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a}e.identity=t})(p2)),p2}var x2={},y2={},b2={},gR;function xSe(){return gR||(gR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return Number.isSafeInteger(a)&&a>=0}e.isLength=t})(b2)),b2}var pR;function GP(){return pR||(pR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xSe();function a(s){return s!=null&&typeof s!="function"&&t.isLength(s.length)}e.isArrayLike=a})(y2)),y2}var v2={},xR;function ySe(){return xR||(xR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="object"&&a!==null}e.isObjectLike=t})(v2)),v2}var yR;function bSe(){return yR||(yR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GP(),a=ySe();function s(r){return a.isObjectLike(r)&&t.isArrayLike(r)}e.isArrayLikeObject=s})(x2)),x2}var w2={},N2={},bR;function vSe(){return bR||(bR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UP();function a(s){return function(r){return t.get(r,s)}}e.property=a})(N2)),N2}var j2={},C2={},S2={},_2={},vR;function Kq(){return vR||(vR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a!==null&&(typeof a=="object"||typeof a=="function")}e.isObject=t})(_2)),_2}var A2={},wR;function Xq(){return wR||(wR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a==null||typeof a!="object"&&typeof a!="function"}e.isPrimitive=t})(A2)),A2}var E2={},NR;function Zq(){return NR||(NR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a,s){return a===s||Number.isNaN(a)&&Number.isNaN(s)}e.eq=t})(E2)),E2}var jR;function wSe(){return jR||(jR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Kq(),a=Xq(),s=Zq();function r(u,f,p){return typeof p!="function"?r(u,f,()=>{}):i(u,f,function x(y,w,v,C,N,S){const T=p(y,w,v,C,N,S);return T!==void 0?!!T:i(y,w,x,S)},new Map)}function i(u,f,p,x){if(f===u)return!0;switch(typeof f){case"object":return l(u,f,p,x);case"function":return Object.keys(f).length>0?i(u,{...f},p,x):s.eq(u,f);default:return t.isObject(u)?typeof f=="string"?f==="":!0:s.eq(u,f)}}function l(u,f,p,x){if(f==null)return!0;if(Array.isArray(f))return c(u,f,p,x);if(f instanceof Map)return o(u,f,p,x);if(f instanceof Set)return d(u,f,p,x);const y=Object.keys(f);if(u==null||a.isPrimitive(u))return y.length===0;if(y.length===0)return!0;if(x?.has(f))return x.get(f)===u;x?.set(f,u);try{for(let w=0;w<y.length;w++){const v=y[w];if(!a.isPrimitive(u)&&!(v in u)||f[v]===void 0&&u[v]!==void 0||f[v]===null&&u[v]!==null||!p(u[v],f[v],v,u,f,x))return!1}return!0}finally{x?.delete(f)}}function o(u,f,p,x){if(f.size===0)return!0;if(!(u instanceof Map))return!1;for(const[y,w]of f.entries()){const v=u.get(y);if(p(v,w,y,u,f,x)===!1)return!1}return!0}function c(u,f,p,x){if(f.length===0)return!0;if(!Array.isArray(u))return!1;const y=new Set;for(let w=0;w<f.length;w++){const v=f[w];let C=!1;for(let N=0;N<u.length;N++){if(y.has(N))continue;const S=u[N];let T=!1;if(p(S,v,w,u,f,x)&&(T=!0),T){y.add(N),C=!0;break}}if(!C)return!1}return!0}function d(u,f,p,x){return f.size===0?!0:u instanceof Set?c([...u],[...f],p,x):!1}e.isMatchWith=r,e.isSetMatch=d})(S2)),S2}var CR;function Jq(){return CR||(CR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wSe();function a(s,r){return t.isMatchWith(s,r,()=>{})}e.isMatch=a})(C2)),C2}var T2={},k2={},L2={},SR;function NSe(){return SR||(SR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return Object.getOwnPropertySymbols(a).filter(s=>Object.prototype.propertyIsEnumerable.call(a,s))}e.getSymbols=t})(L2)),L2}var P2={},_R;function eY(){return _R||(_R=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a==null?a===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(a)}e.getTag=t})(P2)),P2}var D2={},AR;function tY(){return AR||(AR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",a="[object String]",s="[object Number]",r="[object Boolean]",i="[object Arguments]",l="[object Symbol]",o="[object Date]",c="[object Map]",d="[object Set]",u="[object Array]",f="[object Function]",p="[object ArrayBuffer]",x="[object Object]",y="[object Error]",w="[object DataView]",v="[object Uint8Array]",C="[object Uint8ClampedArray]",N="[object Uint16Array]",S="[object Uint32Array]",T="[object BigUint64Array]",k="[object Int8Array]",_="[object Int16Array]",E="[object Int32Array]",A="[object BigInt64Array]",I="[object Float32Array]",z="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=p,e.arrayTag=u,e.bigInt64ArrayTag=A,e.bigUint64ArrayTag=T,e.booleanTag=r,e.dataViewTag=w,e.dateTag=o,e.errorTag=y,e.float32ArrayTag=I,e.float64ArrayTag=z,e.functionTag=f,e.int16ArrayTag=_,e.int32ArrayTag=E,e.int8ArrayTag=k,e.mapTag=c,e.numberTag=s,e.objectTag=x,e.regexpTag=t,e.setTag=d,e.stringTag=a,e.symbolTag=l,e.uint16ArrayTag=N,e.uint32ArrayTag=S,e.uint8ArrayTag=v,e.uint8ClampedArrayTag=C})(D2)),D2}var O2={},ER;function jSe(){return ER||(ER=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)}e.isTypedArray=t})(O2)),O2}var TR;function nY(){return TR||(TR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=NSe(),a=eY(),s=tY(),r=Xq(),i=jSe();function l(u,f){return o(u,void 0,u,new Map,f)}function o(u,f,p,x=new Map,y=void 0){const w=y?.(u,f,p,x);if(w!==void 0)return w;if(r.isPrimitive(u))return u;if(x.has(u))return x.get(u);if(Array.isArray(u)){const v=new Array(u.length);x.set(u,v);for(let C=0;C<u.length;C++)v[C]=o(u[C],C,p,x,y);return Object.hasOwn(u,"index")&&(v.index=u.index),Object.hasOwn(u,"input")&&(v.input=u.input),v}if(u instanceof Date)return new Date(u.getTime());if(u instanceof RegExp){const v=new RegExp(u.source,u.flags);return v.lastIndex=u.lastIndex,v}if(u instanceof Map){const v=new Map;x.set(u,v);for(const[C,N]of u)v.set(C,o(N,C,p,x,y));return v}if(u instanceof Set){const v=new Set;x.set(u,v);for(const C of u)v.add(o(C,void 0,p,x,y));return v}if(typeof Buffer<"u"&&Buffer.isBuffer(u))return u.subarray();if(i.isTypedArray(u)){const v=new(Object.getPrototypeOf(u)).constructor(u.length);x.set(u,v);for(let C=0;C<u.length;C++)v[C]=o(u[C],C,p,x,y);return v}if(u instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&u instanceof SharedArrayBuffer)return u.slice(0);if(u instanceof DataView){const v=new DataView(u.buffer.slice(0),u.byteOffset,u.byteLength);return x.set(u,v),c(v,u,p,x,y),v}if(typeof File<"u"&&u instanceof File){const v=new File([u],u.name,{type:u.type});return x.set(u,v),c(v,u,p,x,y),v}if(typeof Blob<"u"&&u instanceof Blob){const v=new Blob([u],{type:u.type});return x.set(u,v),c(v,u,p,x,y),v}if(u instanceof Error){const v=new u.constructor;return x.set(u,v),v.message=u.message,v.name=u.name,v.stack=u.stack,v.cause=u.cause,c(v,u,p,x,y),v}if(u instanceof Boolean){const v=new Boolean(u.valueOf());return x.set(u,v),c(v,u,p,x,y),v}if(u instanceof Number){const v=new Number(u.valueOf());return x.set(u,v),c(v,u,p,x,y),v}if(u instanceof String){const v=new String(u.valueOf());return x.set(u,v),c(v,u,p,x,y),v}if(typeof u=="object"&&d(u)){const v=Object.create(Object.getPrototypeOf(u));return x.set(u,v),c(v,u,p,x,y),v}return u}function c(u,f,p=u,x,y){const w=[...Object.keys(f),...t.getSymbols(f)];for(let v=0;v<w.length;v++){const C=w[v],N=Object.getOwnPropertyDescriptor(u,C);(N==null||N.writable)&&(u[C]=o(f[C],C,p,x,y))}}function d(u){switch(a.getTag(u)){case s.argumentsTag:case s.arrayTag:case s.arrayBufferTag:case s.dataViewTag:case s.booleanTag:case s.dateTag:case s.float32ArrayTag:case s.float64ArrayTag:case s.int8ArrayTag:case s.int16ArrayTag:case s.int32ArrayTag:case s.mapTag:case s.numberTag:case s.objectTag:case s.regexpTag:case s.setTag:case s.stringTag:case s.symbolTag:case s.uint8ArrayTag:case s.uint8ClampedArrayTag:case s.uint16ArrayTag:case s.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=o,e.copyProperties=c})(k2)),k2}var kR;function CSe(){return kR||(kR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nY();function a(s){return t.cloneDeepWithImpl(s,void 0,s,new Map,void 0)}e.cloneDeep=a})(T2)),T2}var LR;function SSe(){return LR||(LR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Jq(),a=CSe();function s(r){return r=a.cloneDeep(r),i=>t.isMatch(i,r)}e.matches=s})(j2)),j2}var M2={},I2={},$2={},PR;function _Se(){return PR||(PR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nY(),a=tY();function s(r,i){return t.cloneDeepWith(r,(l,o,c,d)=>{const u=i?.(l,o,c,d);if(u!==void 0)return u;if(typeof r=="object")switch(Object.prototype.toString.call(r)){case a.numberTag:case a.stringTag:case a.booleanTag:{const f=new r.constructor(r?.valueOf());return t.copyProperties(f,r),f}case a.argumentsTag:{const f={};return t.copyProperties(f,r),f.length=r.length,f[Symbol.iterator]=r[Symbol.iterator],f}default:return}})}e.cloneDeepWith=s})($2)),$2}var DR;function ASe(){return DR||(DR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_Se();function a(s){return t.cloneDeepWith(s)}e.cloneDeep=a})(I2)),I2}var R2={},z2={},OR;function aY(){return OR||(OR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function a(s,r=Number.MAX_SAFE_INTEGER){switch(typeof s){case"number":return Number.isInteger(s)&&s>=0&&s<r;case"symbol":return!1;case"string":return t.test(s)}}e.isIndex=a})(z2)),z2}var F2={},MR;function ESe(){return MR||(MR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eY();function a(s){return s!==null&&typeof s=="object"&&t.getTag(s)==="[object Arguments]"}e.isArguments=a})(F2)),F2}var IR;function TSe(){return IR||(IR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Gq(),a=aY(),s=ESe(),r=FP();function i(l,o){let c;if(Array.isArray(o)?c=o:typeof o=="string"&&t.isDeepKey(o)&&l?.[o]==null?c=r.toPath(o):c=[o],c.length===0)return!1;let d=l;for(let u=0;u<c.length;u++){const f=c[u];if((d==null||!Object.hasOwn(d,f))&&!((Array.isArray(d)||s.isArguments(d))&&a.isIndex(f)&&f<d.length))return!1;d=d[f]}return!0}e.has=i})(R2)),R2}var $R;function kSe(){return $R||($R=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Jq(),a=zP(),s=ASe(),r=UP(),i=TSe();function l(o,c){switch(typeof o){case"object":{Object.is(o?.valueOf(),-0)&&(o="-0");break}case"number":{o=a.toKey(o);break}}return c=s.cloneDeep(c),function(d){const u=r.get(d,o);return u===void 0?i.has(d,o):c===void 0?u===void 0:t.isMatch(u,c)}}e.matchesProperty=l})(M2)),M2}var RR;function LSe(){return RR||(RR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Qq(),a=vSe(),s=SSe(),r=kSe();function i(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?r.matchesProperty(l[0],l[1]):s.matches(l);case"string":case"symbol":case"number":return a.property(l)}}e.iteratee=i})(w2)),w2}var zR;function PSe(){return zR||(zR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pSe(),a=Qq(),s=bSe(),r=LSe();function i(l,o=a.identity){return s.isArrayLikeObject(l)?t.uniqBy(Array.from(l),r.iteratee(o)):[]}e.uniqBy=i})(h2)),h2}var U2,FR;function DSe(){return FR||(FR=1,U2=PSe().uniqBy),U2}var OSe=DSe();const UR=Hi(OSe);function sY(e,t,a){return t===!0?UR(e,a):typeof t=="function"?UR(e,t):e}var WP=h.createContext(null),MSe=e=>e,qn=()=>{var e=h.useContext(WP);return e?e.store.dispatch:MSe},Ub=()=>{},ISe=()=>Ub,$Se=(e,t)=>e===t;function Ot(e){var t=h.useContext(WP);return P9.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:ISe,t?t.store.getState:Ub,t?t.store.getState:Ub,t?e:Ub,$Se)}var B2={},H2={},G2={},BR;function RSe(){return BR||(BR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return typeof s=="symbol"?1:s===null?2:s===void 0?3:s!==s?4:0}const a=(s,r,i)=>{if(s!==r){const l=t(s),o=t(r);if(l===o&&l===0){if(s<r)return i==="desc"?1:-1;if(s>r)return i==="desc"?-1:1}return i==="desc"?o-l:l-o}return 0};e.compareValues=a})(G2)),G2}var W2={},V2={},HR;function rY(){return HR||(HR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="symbol"||a instanceof Symbol}e.isSymbol=t})(V2)),V2}var GR;function zSe(){return GR||(GR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rY(),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;function r(i,l){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(s.test(i)||!a.test(i))||l!=null&&Object.hasOwn(l,i)}e.isKey=r})(W2)),W2}var WR;function FSe(){return WR||(WR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=RSe(),a=zSe(),s=FP();function r(i,l,o,c){if(i==null)return[];o=c?void 0:o,Array.isArray(i)||(i=Object.values(i)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(x=>String(x));const d=(x,y)=>{let w=x;for(let v=0;v<y.length&&w!=null;++v)w=w[y[v]];return w},u=(x,y)=>y==null||x==null?y:typeof x=="object"&&"key"in x?Object.hasOwn(y,x.key)?y[x.key]:d(y,x.path):typeof x=="function"?x(y):Array.isArray(x)?d(y,x):typeof y=="object"?y[x]:y,f=l.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||a.isKey(x)?x:{key:x,path:s.toPath(x)}));return i.map(x=>({original:x,criteria:f.map(y=>u(y,x))})).slice().sort((x,y)=>{for(let w=0;w<f.length;w++){const v=t.compareValues(x.criteria[w],y.criteria[w],o[w]);if(v!==0)return v}return 0}).map(x=>x.original)}e.orderBy=r})(H2)),H2}var q2={},VR;function USe(){return VR||(VR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a,s=1){const r=[],i=Math.floor(s),l=(o,c)=>{for(let d=0;d<o.length;d++){const u=o[d];Array.isArray(u)&&c<i?l(u,c+1):r.push(u)}};return l(a,0),r}e.flatten=t})(q2)),q2}var Y2={},qR;function iY(){return qR||(qR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=aY(),a=GP(),s=Kq(),r=Zq();function i(l,o,c){return s.isObject(c)&&(typeof o=="number"&&a.isArrayLike(c)&&t.isIndex(o)&&o<c.length||typeof o=="string"&&o in c)?r.eq(c[o],l):!1}e.isIterateeCall=i})(Y2)),Y2}var YR;function BSe(){return YR||(YR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FSe(),a=USe(),s=iY();function r(i,...l){const o=l.length;return o>1&&s.isIterateeCall(i,l[0],l[1])?l=[]:o>2&&s.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(i,a.flatten(l),["asc"])}e.sortBy=r})(B2)),B2}var Q2,QR;function HSe(){return QR||(QR=1,Q2=BSe().sortBy),Q2}var GSe=HSe();const KN=Hi(GSe);var lY=e=>e.legend.settings,WSe=e=>e.legend.size,VSe=e=>e.legend.payload,qSe=nt([VSe,lY],(e,t)=>{var{itemSorter:a}=t,s=e.flat(1);return a?KN(s,a):s});function YSe(){return Ot(qSe)}var Ry=1;function oY(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,a]=h.useState({height:0,left:0,top:0,width:0}),s=h.useCallback(r=>{if(r!=null){var i=r.getBoundingClientRect(),l={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(l.height-t.height)>Ry||Math.abs(l.left-t.left)>Ry||Math.abs(l.top-t.top)>Ry||Math.abs(l.width-t.width)>Ry)&&a({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,s]}function ys(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var QSe=typeof Symbol=="function"&&Symbol.observable||"@@observable",KR=QSe,K2=()=>Math.random().toString(36).substring(7).split("").join("."),KSe={INIT:`@@redux/INIT${K2()}`,REPLACE:`@@redux/REPLACE${K2()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${K2()}`},Dv=KSe;function VP(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function cY(e,t,a){if(typeof e!="function")throw new Error(ys(2));if(typeof t=="function"&&typeof a=="function"||typeof a=="function"&&typeof arguments[3]=="function")throw new Error(ys(0));if(typeof t=="function"&&typeof a>"u"&&(a=t,t=void 0),typeof a<"u"){if(typeof a!="function")throw new Error(ys(1));return a(cY)(e,t)}let s=e,r=t,i=new Map,l=i,o=0,c=!1;function d(){l===i&&(l=new Map,i.forEach((v,C)=>{l.set(C,v)}))}function u(){if(c)throw new Error(ys(3));return r}function f(v){if(typeof v!="function")throw new Error(ys(4));if(c)throw new Error(ys(5));let C=!0;d();const N=o++;return l.set(N,v),function(){if(C){if(c)throw new Error(ys(6));C=!1,d(),l.delete(N),i=null}}}function p(v){if(!VP(v))throw new Error(ys(7));if(typeof v.type>"u")throw new Error(ys(8));if(typeof v.type!="string")throw new Error(ys(17));if(c)throw new Error(ys(9));try{c=!0,r=s(r,v)}finally{c=!1}return(i=l).forEach(N=>{N()}),v}function x(v){if(typeof v!="function")throw new Error(ys(10));s=v,p({type:Dv.REPLACE})}function y(){const v=f;return{subscribe(C){if(typeof C!="object"||C===null)throw new Error(ys(11));function N(){const T=C;T.next&&T.next(u())}return N(),{unsubscribe:v(N)}},[KR](){return this}}}return p({type:Dv.INIT}),{dispatch:p,subscribe:f,getState:u,replaceReducer:x,[KR]:y}}function XSe(e){Object.keys(e).forEach(t=>{const a=e[t];if(typeof a(void 0,{type:Dv.INIT})>"u")throw new Error(ys(12));if(typeof a(void 0,{type:Dv.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ys(13))})}function dY(e){const t=Object.keys(e),a={};for(let i=0;i<t.length;i++){const l=t[i];typeof e[l]=="function"&&(a[l]=e[l])}const s=Object.keys(a);let r;try{XSe(a)}catch(i){r=i}return function(l={},o){if(r)throw r;let c=!1;const d={};for(let u=0;u<s.length;u++){const f=s[u],p=a[f],x=l[f],y=p(x,o);if(typeof y>"u")throw o&&o.type,new Error(ys(14));d[f]=y,c=c||y!==x}return c=c||s.length!==Object.keys(l).length,c?d:l}}function Ov(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,a)=>(...s)=>t(a(...s)))}function ZSe(...e){return t=>(a,s)=>{const r=t(a,s);let i=()=>{throw new Error(ys(15))};const l={getState:r.getState,dispatch:(c,...d)=>i(c,...d)},o=e.map(c=>c(l));return i=Ov(...o)(r.dispatch),{...r,dispatch:i}}}function uY(e){return VP(e)&&"type"in e&&typeof e.type=="string"}var mY=Symbol.for("immer-nothing"),XR=Symbol.for("immer-draftable"),Us=Symbol.for("immer-state");function Di(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Tr=Object,_f=Tr.getPrototypeOf,Mv="constructor",XN="prototype",bT="configurable",Iv="enumerable",Bb="writable",jp="value",Po=e=>!!e&&!!e[Us];function Bi(e){return e?fY(e)||ZN(e)||!!e[XR]||!!e[Mv]?.[XR]||JN(e)||ej(e):!1}var JSe=Tr[XN][Mv].toString(),ZR=new WeakMap;function fY(e){if(!e||!qP(e))return!1;const t=_f(e);if(t===null||t===Tr[XN])return!0;const a=Tr.hasOwnProperty.call(t,Mv)&&t[Mv];if(a===Object)return!0;if(!Qm(a))return!1;let s=ZR.get(a);return s===void 0&&(s=Function.toString.call(a),ZR.set(a,s)),s===JSe}function Ix(e,t,a=!0){$x(e)===0?(a?Reflect.ownKeys(e):Tr.keys(e)).forEach(r=>{t(r,e[r],e)}):e.forEach((s,r)=>t(r,s,e))}function $x(e){const t=e[Us];return t?t.type_:ZN(e)?1:JN(e)?2:ej(e)?3:0}var JR=(e,t,a=$x(e))=>a===2?e.has(t):Tr[XN].hasOwnProperty.call(e,t),vT=(e,t,a=$x(e))=>a===2?e.get(t):e[t],$v=(e,t,a,s=$x(e))=>{s===2?e.set(t,a):s===3?e.add(a):e[t]=a};function e2e(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var ZN=Array.isArray,JN=e=>e instanceof Map,ej=e=>e instanceof Set,qP=e=>typeof e=="object",Qm=e=>typeof e=="function",X2=e=>typeof e=="boolean";function t2e(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var oo=e=>e.copy_||e.base_,YP=e=>e.modified_?e.copy_:e.base_;function wT(e,t){if(JN(e))return new Map(e);if(ej(e))return new Set(e);if(ZN(e))return Array[XN].slice.call(e);const a=fY(e);if(t===!0||t==="class_only"&&!a){const s=Tr.getOwnPropertyDescriptors(e);delete s[Us];let r=Reflect.ownKeys(s);for(let i=0;i<r.length;i++){const l=r[i],o=s[l];o[Bb]===!1&&(o[Bb]=!0,o[bT]=!0),(o.get||o.set)&&(s[l]={[bT]:!0,[Bb]:!0,[Iv]:o[Iv],[jp]:e[l]})}return Tr.create(_f(e),s)}else{const s=_f(e);if(s!==null&&a)return{...e};const r=Tr.create(s);return Tr.assign(r,e)}}function QP(e,t=!1){return tj(e)||Po(e)||!Bi(e)||($x(e)>1&&Tr.defineProperties(e,{set:zy,add:zy,clear:zy,delete:zy}),Tr.freeze(e),t&&Ix(e,(a,s)=>{QP(s,!0)},!1)),e}function n2e(){Di(2)}var zy={[jp]:n2e};function tj(e){return e===null||!qP(e)?!0:Tr.isFrozen(e)}var Rv="MapSet",NT="Patches",ez="ArrayMethods",hY={};function Cu(e){const t=hY[e];return t||Di(0,e),t}var tz=e=>!!hY[e],Cp,gY=()=>Cp,a2e=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:tz(Rv)?Cu(Rv):void 0,arrayMethodsPlugin_:tz(ez)?Cu(ez):void 0});function nz(e,t){t&&(e.patchPlugin_=Cu(NT),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function jT(e){CT(e),e.drafts_.forEach(s2e),e.drafts_=null}function CT(e){e===Cp&&(Cp=e.parent_)}var az=e=>Cp=a2e(Cp,e);function s2e(e){const t=e[Us];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function sz(e,t){t.unfinalizedDrafts_=t.drafts_.length;const a=t.drafts_[0];if(e!==void 0&&e!==a){a[Us].modified_&&(jT(t),Di(4)),Bi(e)&&(e=rz(t,e));const{patchPlugin_:r}=t;r&&r.generateReplacementPatches_(a[Us].base_,e,t)}else e=rz(t,a);return r2e(t,e,!0),jT(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==mY?e:void 0}function rz(e,t){if(tj(t))return t;const a=t[Us];if(!a)return KP(t,e.handledSet_,e);if(!nj(a,e))return t;if(!a.modified_)return a.base_;if(!a.finalized_){const{callbacks_:s}=a;if(s)for(;s.length>0;)s.pop()(e);yY(a,e)}return a.copy_}function r2e(e,t,a=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&QP(t,a)}function pY(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var nj=(e,t)=>e.scope_===t,i2e=[];function xY(e,t,a,s){const r=oo(e),i=e.type_;if(s!==void 0&&vT(r,s,i)===t){$v(r,s,a,i);return}if(!e.draftLocations_){const o=e.draftLocations_=new Map;Ix(r,(c,d)=>{if(Po(d)){const u=o.get(d)||[];u.push(c),o.set(d,u)}})}const l=e.draftLocations_.get(t)??i2e;for(const o of l)$v(r,o,a,i)}function l2e(e,t,a){e.callbacks_.push(function(r){const i=t;if(!i||!nj(i,r))return;r.mapSetPlugin_?.fixSetContents(i);const l=YP(i);xY(e,i.draft_??i,l,a),yY(i,r)})}function yY(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){const{patchPlugin_:s}=t;if(s){const r=s.getPath(e);r&&s.generatePatches_(e,r,t)}pY(e)}}function o2e(e,t,a){const{scope_:s}=e;if(Po(a)){const r=a[Us];nj(r,s)&&r.callbacks_.push(function(){Hb(e);const l=YP(r);xY(e,a,l,t)})}else Bi(a)&&e.callbacks_.push(function(){const i=oo(e);vT(i,t,e.type_)===a&&s.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&KP(vT(e.copy_,t,e.type_),s.handledSet_,s)})}function KP(e,t,a){return!a.immer_.autoFreeze_&&a.unfinalizedDrafts_<1||Po(e)||t.has(e)||!Bi(e)||tj(e)||(t.add(e),Ix(e,(s,r)=>{if(Po(r)){const i=r[Us];if(nj(i,a)){const l=YP(i);$v(e,s,l,e.type_),pY(i)}}else Bi(r)&&KP(r,t,a)})),e}function c2e(e,t){const a=ZN(e),s={type_:a?1:0,scope_:t?t.scope_:gY(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let r=s,i=XP;a&&(r=[s],i=Sp);const{revoke:l,proxy:o}=Proxy.revocable(r,i);return s.draft_=o,s.revoke_=l,[o,s]}var XP={get(e,t){if(t===Us)return e;let a=e.scope_.arrayMethodsPlugin_;const s=e.type_===1&&typeof t=="string";if(s&&a?.isArrayOperationMethod(t))return a.createMethodInterceptor(e,t);const r=oo(e);if(!JR(r,t,e.type_))return d2e(e,r,t);const i=r[t];if(e.finalized_||!Bi(i)||s&&e.operationMethod&&a?.isMutatingArrayMethod(e.operationMethod)&&t2e(t))return i;if(i===Z2(e.base_,t)){Hb(e);const l=e.type_===1?+t:t,o=_T(e.scope_,i,e,l);return e.copy_[l]=o}return i},has(e,t){return t in oo(e)},ownKeys(e){return Reflect.ownKeys(oo(e))},set(e,t,a){const s=bY(oo(e),t);if(s?.set)return s.set.call(e.draft_,a),!0;if(!e.modified_){const r=Z2(oo(e),t),i=r?.[Us];if(i&&i.base_===a)return e.copy_[t]=a,e.assigned_.set(t,!1),!0;if(e2e(a,r)&&(a!==void 0||JR(e.base_,t,e.type_)))return!0;Hb(e),ST(e)}return e.copy_[t]===a&&(a!==void 0||t in e.copy_)||Number.isNaN(a)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=a,e.assigned_.set(t,!0),o2e(e,t,a)),!0},deleteProperty(e,t){return Hb(e),Z2(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),ST(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const a=oo(e),s=Reflect.getOwnPropertyDescriptor(a,t);return s&&{[Bb]:!0,[bT]:e.type_!==1||t!=="length",[Iv]:s[Iv],[jp]:a[t]}},defineProperty(){Di(11)},getPrototypeOf(e){return _f(e.base_)},setPrototypeOf(){Di(12)}},Sp={};Ix(XP,(e,t)=>{Sp[e]=function(){const a=arguments;return a[0]=a[0][0],t.apply(this,a)}});Sp.deleteProperty=function(e,t){return Sp.set.call(this,e,t,void 0)};Sp.set=function(e,t,a){return XP.set.call(this,e[0],t,a,e[0])};function Z2(e,t){const a=e[Us];return(a?oo(a):e)[t]}function d2e(e,t,a){const s=bY(t,a);return s?jp in s?s[jp]:s.get?.call(e.draft_):void 0}function bY(e,t){if(!(t in e))return;let a=_f(e);for(;a;){const s=Object.getOwnPropertyDescriptor(a,t);if(s)return s;a=_f(a)}}function ST(e){e.modified_||(e.modified_=!0,e.parent_&&ST(e.parent_))}function Hb(e){e.copy_||(e.assigned_=new Map,e.copy_=wT(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var u2e=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(a,s,r)=>{if(Qm(a)&&!Qm(s)){const l=s;s=a;const o=this;return function(d=l,...u){return o.produce(d,f=>s.call(this,f,...u))}}Qm(s)||Di(6),r!==void 0&&!Qm(r)&&Di(7);let i;if(Bi(a)){const l=az(this),o=_T(l,a,void 0);let c=!0;try{i=s(o),c=!1}finally{c?jT(l):CT(l)}return nz(l,r),sz(i,l)}else if(!a||!qP(a)){if(i=s(a),i===void 0&&(i=a),i===mY&&(i=void 0),this.autoFreeze_&&QP(i,!0),r){const l=[],o=[];Cu(NT).generateReplacementPatches_(a,i,{patches_:l,inversePatches_:o}),r(l,o)}return i}else Di(1,a)},this.produceWithPatches=(a,s)=>{if(Qm(a))return(o,...c)=>this.produceWithPatches(o,d=>a(d,...c));let r,i;return[this.produce(a,s,(o,c)=>{r=o,i=c}),r,i]},X2(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),X2(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),X2(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Bi(t)||Di(8),Po(t)&&(t=$i(t));const a=az(this),s=_T(a,t,void 0);return s[Us].isManual_=!0,CT(a),s}finishDraft(t,a){const s=t&&t[Us];(!s||!s.isManual_)&&Di(9);const{scope_:r}=s;return nz(r,a),sz(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,a){let s;for(s=a.length-1;s>=0;s--){const i=a[s];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}s>-1&&(a=a.slice(s+1));const r=Cu(NT).applyPatches_;return Po(t)?r(t,a):this.produce(t,i=>r(i,a))}};function _T(e,t,a,s){const[r,i]=JN(t)?Cu(Rv).proxyMap_(t,a):ej(t)?Cu(Rv).proxySet_(t,a):c2e(t,a);return(a?.scope_??gY()).drafts_.push(r),i.callbacks_=a?.callbacks_??[],i.key_=s,a&&s!==void 0?l2e(a,i,s):i.callbacks_.push(function(c){c.mapSetPlugin_?.fixSetContents(i);const{patchPlugin_:d}=c;i.modified_&&d&&d.generatePatches_(i,[],c)}),r}function $i(e){return Po(e)||Di(10,e),vY(e)}function vY(e){if(!Bi(e)||tj(e))return e;const t=e[Us];let a,s=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,a=wT(e,t.scope_.immer_.useStrictShallowCopy_),s=t.scope_.immer_.shouldUseStrictIteration()}else a=wT(e,!0);return Ix(a,(r,i)=>{$v(a,r,vY(i))},s),t&&(t.finalized_=!1),a}var m2e=new u2e,wY=m2e.produce;function NY(e){return({dispatch:a,getState:s})=>r=>i=>typeof i=="function"?i(a,s,e):r(i)}var f2e=NY(),h2e=NY,g2e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Ov:Ov.apply(null,arguments)};function mi(e,t){function a(...s){if(t){let r=t(...s);if(!r)throw new Error(Pr(0));return{type:e,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:e,payload:s[0]}}return a.toString=()=>`${e}`,a.type=e,a.match=s=>uY(s)&&s.type===e,a}var jY=class Pg extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Pg.prototype)}static get[Symbol.species](){return Pg}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Pg(...t[0].concat(this)):new Pg(...t.concat(this))}};function iz(e){return Bi(e)?wY(e,()=>{}):e}function Fy(e,t,a){return e.has(t)?e.get(t):e.set(t,a(t)).get(t)}function p2e(e){return typeof e=="boolean"}var x2e=()=>function(t){const{thunk:a=!0,immutableCheck:s=!0,serializableCheck:r=!0,actionCreatorCheck:i=!0}=t??{};let l=new jY;return a&&(p2e(a)?l.push(f2e):l.push(h2e(a.extraArgument))),l},CY="RTK_autoBatch",ta=()=>e=>({payload:e,meta:{[CY]:!0}}),lz=e=>t=>{setTimeout(t,e)},SY=(e={type:"raf"})=>t=>(...a)=>{const s=t(...a);let r=!0,i=!1,l=!1;const o=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:lz(10):e.type==="callback"?e.queueNotification:lz(e.timeout),d=()=>{l=!1,i&&(i=!1,o.forEach(u=>u()))};return Object.assign({},s,{subscribe(u){const f=()=>r&&u(),p=s.subscribe(f);return o.add(u),()=>{p(),o.delete(u)}},dispatch(u){try{return r=!u?.meta?.[CY],i=!r,i&&(l||(l=!0,c(d))),s.dispatch(u)}finally{r=!0}}})},y2e=e=>function(a){const{autoBatch:s=!0}=a??{};let r=new jY(e);return s&&r.push(SY(typeof s=="object"?s:void 0)),r};function b2e(e){const t=x2e(),{reducer:a=void 0,middleware:s,devTools:r=!0,preloadedState:i=void 0,enhancers:l=void 0}=e||{};let o;if(typeof a=="function")o=a;else if(VP(a))o=dY(a);else throw new Error(Pr(1));let c;typeof s=="function"?c=s(t):c=t();let d=Ov;r&&(d=g2e({trace:!1,...typeof r=="object"&&r}));const u=ZSe(...c),f=y2e(u);let p=typeof l=="function"?l(f):f();const x=d(...p);return cY(o,i,x)}function _Y(e){const t={},a=[];let s;const r={addCase(i,l){const o=typeof i=="string"?i:i.type;if(!o)throw new Error(Pr(28));if(o in t)throw new Error(Pr(29));return t[o]=l,r},addAsyncThunk(i,l){return l.pending&&(t[i.pending.type]=l.pending),l.rejected&&(t[i.rejected.type]=l.rejected),l.fulfilled&&(t[i.fulfilled.type]=l.fulfilled),l.settled&&a.push({matcher:i.settled,reducer:l.settled}),r},addMatcher(i,l){return a.push({matcher:i,reducer:l}),r},addDefaultCase(i){return s=i,r}};return e(r),[t,a,s]}function v2e(e){return typeof e=="function"}function w2e(e,t){let[a,s,r]=_Y(t),i;if(v2e(e))i=()=>iz(e());else{const o=iz(e);i=()=>o}function l(o=i(),c){let d=[a[c.type],...s.filter(({matcher:u})=>u(c)).map(({reducer:u})=>u)];return d.filter(u=>!!u).length===0&&(d=[r]),d.reduce((u,f)=>{if(f)if(Po(u)){const x=f(u,c);return x===void 0?u:x}else{if(Bi(u))return wY(u,p=>f(p,c));{const p=f(u,c);if(p===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return p}}return u},o)}return l.getInitialState=i,l}var N2e="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",j2e=(e=21)=>{let t="",a=e;for(;a--;)t+=N2e[Math.random()*64|0];return t},C2e=Symbol.for("rtk-slice-createasyncthunk");function S2e(e,t){return`${e}/${t}`}function _2e({creators:e}={}){const t=e?.asyncThunk?.[C2e];return function(s){const{name:r,reducerPath:i=r}=s;if(!r)throw new Error(Pr(11));const l=(typeof s.reducers=="function"?s.reducers(E2e()):s.reducers)||{},o=Object.keys(l),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(S,T){const k=typeof S=="string"?S:S.type;if(!k)throw new Error(Pr(12));if(k in c.sliceCaseReducersByType)throw new Error(Pr(13));return c.sliceCaseReducersByType[k]=T,d},addMatcher(S,T){return c.sliceMatchers.push({matcher:S,reducer:T}),d},exposeAction(S,T){return c.actionCreators[S]=T,d},exposeCaseReducer(S,T){return c.sliceCaseReducersByName[S]=T,d}};o.forEach(S=>{const T=l[S],k={reducerName:S,type:S2e(r,S),createNotation:typeof s.reducers=="function"};k2e(T)?P2e(k,T,d,t):T2e(k,T,d)});function u(){const[S={},T=[],k=void 0]=typeof s.extraReducers=="function"?_Y(s.extraReducers):[s.extraReducers],_={...S,...c.sliceCaseReducersByType};return w2e(s.initialState,E=>{for(let A in _)E.addCase(A,_[A]);for(let A of c.sliceMatchers)E.addMatcher(A.matcher,A.reducer);for(let A of T)E.addMatcher(A.matcher,A.reducer);k&&E.addDefaultCase(k)})}const f=S=>S,p=new Map,x=new WeakMap;let y;function w(S,T){return y||(y=u()),y(S,T)}function v(){return y||(y=u()),y.getInitialState()}function C(S,T=!1){function k(E){let A=E[S];return typeof A>"u"&&T&&(A=Fy(x,k,v)),A}function _(E=f){const A=Fy(p,T,()=>new WeakMap);return Fy(A,E,()=>{const I={};for(const[z,F]of Object.entries(s.selectors??{}))I[z]=A2e(F,E,()=>Fy(x,E,v),T);return I})}return{reducerPath:S,getSelectors:_,get selectors(){return _(k)},selectSlice:k}}const N={name:r,reducer:w,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:v,...C(i),injectInto(S,{reducerPath:T,...k}={}){const _=T??i;return S.inject({reducerPath:_,reducer:w},k),{...N,...C(_,!0)}}};return N}}function A2e(e,t,a,s){function r(i,...l){let o=t(i);return typeof o>"u"&&s&&(o=a()),e(o,...l)}return r.unwrapped=e,r}var fr=_2e();function E2e(){function e(t,a){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...a}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...a){return t(...a)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,a){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:a}},asyncThunk:e}}function T2e({type:e,reducerName:t,createNotation:a},s,r){let i,l;if("reducer"in s){if(a&&!L2e(s))throw new Error(Pr(17));i=s.reducer,l=s.prepare}else i=s;r.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,l?mi(e,l):mi(e))}function k2e(e){return e._reducerDefinitionType==="asyncThunk"}function L2e(e){return e._reducerDefinitionType==="reducerWithPrepare"}function P2e({type:e,reducerName:t},a,s,r){if(!r)throw new Error(Pr(18));const{payloadCreator:i,fulfilled:l,pending:o,rejected:c,settled:d,options:u}=a,f=r(e,i,u);s.exposeAction(t,f),l&&s.addCase(f.fulfilled,l),o&&s.addCase(f.pending,o),c&&s.addCase(f.rejected,c),d&&s.addMatcher(f.settled,d),s.exposeCaseReducer(t,{fulfilled:l||Uy,pending:o||Uy,rejected:c||Uy,settled:d||Uy})}function Uy(){}var D2e="task",AY="listener",EY="completed",ZP="cancelled",O2e=`task-${ZP}`,M2e=`task-${EY}`,AT=`${AY}-${ZP}`,I2e=`${AY}-${EY}`,aj=class{constructor(e){this.code=e,this.message=`${D2e} ${ZP} (reason: ${e})`}name="TaskAbortError";message},JP=(e,t)=>{if(typeof e!="function")throw new TypeError(Pr(32))},zv=()=>{},TY=(e,t=zv)=>(e.catch(t),e),kY=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),ou=e=>{if(e.aborted)throw new aj(e.reason)};function LY(e,t){let a=zv;return new Promise((s,r)=>{const i=()=>r(new aj(e.reason));if(e.aborted){i();return}a=kY(e,i),t.finally(()=>a()).then(s,r)}).finally(()=>{a=zv})}var $2e=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(a){return{status:a instanceof aj?"cancelled":"rejected",error:a}}finally{t?.()}},Fv=e=>t=>TY(LY(e,t).then(a=>(ou(e),a))),PY=e=>{const t=Fv(e);return a=>t(new Promise(s=>setTimeout(s,a)))},{assign:cf}=Object,oz={},sj="listenerMiddleware",R2e=(e,t)=>{const a=s=>kY(e,()=>s.abort(e.reason));return(s,r)=>{JP(s);const i=new AbortController;a(i);const l=$2e(async()=>{ou(e),ou(i.signal);const o=await s({pause:Fv(i.signal),delay:PY(i.signal),signal:i.signal});return ou(i.signal),o},()=>i.abort(M2e));return r?.autoJoin&&t.push(l.catch(zv)),{result:Fv(e)(l),cancel(){i.abort(O2e)}}}},z2e=(e,t)=>{const a=async(s,r)=>{ou(t);let i=()=>{};const o=[new Promise((c,d)=>{let u=e({predicate:s,effect:(f,p)=>{p.unsubscribe(),c([f,p.getState(),p.getOriginalState()])}});i=()=>{u(),d()}})];r!=null&&o.push(new Promise(c=>setTimeout(c,r,null)));try{const c=await LY(t,Promise.race(o));return ou(t),c}finally{i()}};return(s,r)=>TY(a(s,r))},DY=e=>{let{type:t,actionCreator:a,matcher:s,predicate:r,effect:i}=e;if(t)r=mi(t).match;else if(a)t=a.type,r=a.match;else if(s)r=s;else if(!r)throw new Error(Pr(21));return JP(i),{predicate:r,type:t,effect:i}},OY=cf(e=>{const{type:t,predicate:a,effect:s}=DY(e);return{id:j2e(),effect:s,type:t,predicate:a,pending:new Set,unsubscribe:()=>{throw new Error(Pr(22))}}},{withTypes:()=>OY}),cz=(e,t)=>{const{type:a,effect:s,predicate:r}=DY(t);return Array.from(e.values()).find(i=>(typeof a=="string"?i.type===a:i.predicate===r)&&i.effect===s)},ET=e=>{e.pending.forEach(t=>{t.abort(AT)})},F2e=(e,t)=>()=>{for(const a of t.keys())ET(a);e.clear()},dz=(e,t,a)=>{try{e(t,a)}catch(s){setTimeout(()=>{throw s},0)}},MY=cf(mi(`${sj}/add`),{withTypes:()=>MY}),U2e=mi(`${sj}/removeAll`),IY=cf(mi(`${sj}/remove`),{withTypes:()=>IY}),B2e=(...e)=>{console.error(`${sj}/error`,...e)},Rx=(e={})=>{const t=new Map,a=new Map,s=x=>{const y=a.get(x)??0;a.set(x,y+1)},r=x=>{const y=a.get(x)??1;y===1?a.delete(x):a.set(x,y-1)},{extra:i,onError:l=B2e}=e;JP(l);const o=x=>(x.unsubscribe=()=>t.delete(x.id),t.set(x.id,x),y=>{x.unsubscribe(),y?.cancelActive&&ET(x)}),c=x=>{const y=cz(t,x)??OY(x);return o(y)};cf(c,{withTypes:()=>c});const d=x=>{const y=cz(t,x);return y&&(y.unsubscribe(),x.cancelActive&&ET(y)),!!y};cf(d,{withTypes:()=>d});const u=async(x,y,w,v)=>{const C=new AbortController,N=z2e(c,C.signal),S=[];try{x.pending.add(C),s(x),await Promise.resolve(x.effect(y,cf({},w,{getOriginalState:v,condition:(T,k)=>N(T,k).then(Boolean),take:N,delay:PY(C.signal),pause:Fv(C.signal),extra:i,signal:C.signal,fork:R2e(C.signal,S),unsubscribe:x.unsubscribe,subscribe:()=>{t.set(x.id,x)},cancelActiveListeners:()=>{x.pending.forEach((T,k,_)=>{T!==C&&(T.abort(AT),_.delete(T))})},cancel:()=>{C.abort(AT),x.pending.delete(C)},throwIfCancelled:()=>{ou(C.signal)}})))}catch(T){T instanceof aj||dz(l,T,{raisedBy:"effect"})}finally{await Promise.all(S),C.abort(I2e),r(x),x.pending.delete(C)}},f=F2e(t,a);return{middleware:x=>y=>w=>{if(!uY(w))return y(w);if(MY.match(w))return c(w.payload);if(U2e.match(w)){f();return}if(IY.match(w))return d(w.payload);let v=x.getState();const C=()=>{if(v===oz)throw new Error(Pr(23));return v};let N;try{if(N=y(w),t.size>0){const S=x.getState(),T=Array.from(t.values());for(const k of T){let _=!1;try{_=k.predicate(w,S,v)}catch(E){_=!1,dz(l,E,{raisedBy:"predicate"})}_&&u(k,w,x,C)}}}finally{v=oz}return N},startListening:c,stopListening:d,clearListeners:f}};function Pr(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var H2e={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},$Y=fr({name:"chartLayout",initialState:H2e,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var a,s,r,i;e.margin.top=(a=t.payload.top)!==null&&a!==void 0?a:0,e.margin.right=(s=t.payload.right)!==null&&s!==void 0?s:0,e.margin.bottom=(r=t.payload.bottom)!==null&&r!==void 0?r:0,e.margin.left=(i=t.payload.left)!==null&&i!==void 0?i:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:G2e,setLayout:W2e,setChartSize:V2e,setScale:q2e}=$Y.actions,Y2e=$Y.reducer;function RY(e,t,a){return Array.isArray(e)&&e&&t+a!==0?e.slice(t,a+1):e}function ca(e){return Number.isFinite(e)}function El(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function uz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Xm(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?uz(Object(a),!0).forEach(function(s){Q2e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):uz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function Q2e(e,t,a){return(t=K2e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function K2e(e){var t=X2e(e,"string");return typeof t=="symbol"?t:t+""}function X2e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zn(e,t,a){return ra(e)||ra(t)?a:Al(t)?ju(e,t,a):typeof t=="function"?t(e):a}var Z2e=(e,t,a)=>{if(t&&a){var{width:s,height:r}=a,{align:i,verticalAlign:l,layout:o}=t;if((o==="vertical"||o==="horizontal"&&l==="middle")&&i!=="center"&&Pt(e[i]))return Xm(Xm({},e),{},{[i]:e[i]+(s||0)});if((o==="horizontal"||o==="vertical"&&i==="center")&&l!=="middle"&&Pt(e[l]))return Xm(Xm({},e),{},{[l]:e[l]+(r||0)})}return e},md=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",zY=(e,t,a,s)=>{if(s)return e.map(o=>o.coordinate);var r,i,l=e.map(o=>(o.coordinate===t&&(r=!0),o.coordinate===a&&(i=!0),o.coordinate));return r||l.push(t),i||l.push(a),l},FY=(e,t,a)=>{if(!e)return null;var{duplicateDomain:s,type:r,range:i,scale:l,realScaleType:o,isCategorical:c,categoricalDomain:d,tickCount:u,ticks:f,niceTicks:p,axisType:x}=e;if(!l)return null;var y=o==="scaleBand"&&l.bandwidth?l.bandwidth()/2:2,w=r==="category"&&l.bandwidth?l.bandwidth()/y:0;if(w=x==="angleAxis"&&i&&i.length>=2?cs(i[0]-i[1])*2*w:w,f||p){var v=(f||p||[]).map((C,N)=>{var S=s?s.indexOf(C):C;return{coordinate:l(S)+w,value:C,offset:w,index:N}});return v.filter(C=>!Ui(C.coordinate))}return c&&d?d.map((C,N)=>({coordinate:l(C)+w,value:C,index:N,offset:w})):l.ticks&&u!=null?l.ticks(u).map((C,N)=>({coordinate:l(C)+w,value:C,offset:w,index:N})):l.domain().map((C,N)=>({coordinate:l(C)+w,value:s?s[C]:C,index:N,offset:w}))},mz=1e-4,J2e=e=>{var t=e.domain();if(!(!t||t.length<=2)){var a=t.length,s=e.range(),r=Math.min(s[0],s[1])-mz,i=Math.max(s[0],s[1])+mz,l=e(t[0]),o=e(t[a-1]);(l<r||l>i||o<r||o>i)&&e.domain([t[0],t[a-1]])}},e_e=(e,t)=>{if(!t||t.length!==2||!Pt(t[0])||!Pt(t[1]))return e;var a=Math.min(t[0],t[1]),s=Math.max(t[0],t[1]),r=[e[0],e[1]];return(!Pt(e[0])||e[0]<a)&&(r[0]=a),(!Pt(e[1])||e[1]>s)&&(r[1]=s),r[0]>s&&(r[0]=s),r[1]<a&&(r[1]=a),r},t_e=e=>{var t,a=e.length;if(!(a<=0)){var s=(t=e[0])===null||t===void 0?void 0:t.length;if(!(s==null||s<=0))for(var r=0;r<s;++r)for(var i=0,l=0,o=0;o<a;++o){var c=e[o],d=c?.[r];if(d!=null){var u=d[1],f=d[0],p=Ui(u)?f:u;p>=0?(d[0]=i,d[1]=i+p,i=u):(d[0]=l,d[1]=l+p,l=u)}}}},n_e=e=>{var t,a=e.length;if(!(a<=0)){var s=(t=e[0])===null||t===void 0?void 0:t.length;if(!(s==null||s<=0))for(var r=0;r<s;++r)for(var i=0,l=0;l<a;++l){var o=e[l],c=o?.[r];if(c!=null){var d=Ui(c[1])?c[0]:c[1];d>=0?(c[0]=i,c[1]=i+d,i=c[1]):(c[0]=0,c[1]=0)}}}},a_e={sign:t_e,expand:GW,none:Kc,silhouette:WW,wiggle:VW,positive:n_e},s_e=(e,t,a)=>{var s,r=(s=a_e[a])!==null&&s!==void 0?s:Kc,i=tP().keys(t).value((o,c)=>Number(zn(o,c,0))).order(bu).offset(r),l=i(e);return l.forEach((o,c)=>{o.forEach((d,u)=>{var f=zn(e[u],t[c],0);Array.isArray(f)&&f.length===2&&Pt(f[0])&&Pt(f[1])&&(d[0]=f[0],d[1]=f[1])})}),l};function r_e(e){return e==null?void 0:String(e)}function fz(e){var{axis:t,ticks:a,bandSize:s,entry:r,index:i,dataKey:l}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!ra(r[t.dataKey])){var o=Vq(a,"value",r[t.dataKey]);if(o)return o.coordinate+s/2}return a[i]?a[i].coordinate+s/2:null}var c=zn(r,ra(l)?t.dataKey:l);return ra(c)?null:t.scale(c)}var hz=e=>{var{axis:t,ticks:a,offset:s,bandSize:r,entry:i,index:l}=e;if(t.type==="category")return a[l]?a[l].coordinate+s:null;var o=zn(i,t.dataKey,t.scale.domain()[l]);return ra(o)?null:t.scale(o)-r/2+s},i_e=e=>{var{numericAxis:t}=e,a=t.scale.domain();if(t.type==="number"){var s=Math.min(a[0],a[1]),r=Math.max(a[0],a[1]);return s<=0&&r>=0?0:r<0?r:s}return a[0]},l_e=e=>{var t=e.flat(2).filter(Pt);return[Math.min(...t),Math.max(...t)]},o_e=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],c_e=(e,t,a)=>{if(e!=null)return o_e(Object.keys(e).reduce((s,r)=>{var i=e[r];if(!i)return s;var{stackedData:l}=i,o=l.reduce((c,d)=>{var u=RY(d,t,a),f=l_e(u);return!ca(f[0])||!ca(f[1])?c:[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(o[0],s[0]),Math.max(o[1],s[1])]},[1/0,-1/0]))},gz=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,pz=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Af=(e,t,a)=>{if(e&&e.scale&&e.scale.bandwidth){var s=e.scale.bandwidth();if(!a||s>0)return s}if(e&&t&&t.length>=2){for(var r=KN(t,u=>u.coordinate),i=1/0,l=1,o=r.length;l<o;l++){var c=r[l],d=r[l-1];i=Math.min((c?.coordinate||0)-(d?.coordinate||0),i)}return i===1/0?0:i}return a?void 0:0};function xz(e){var{tooltipEntrySettings:t,dataKey:a,payload:s,value:r,name:i}=e;return Xm(Xm({},t),{},{dataKey:a,payload:s,value:r,name:i})}function Kf(e,t){if(e)return String(e);if(typeof t=="string")return t}var d_e=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},u_e=(e,t)=>t==="centric"?e.angle:e.radius,Go=e=>e.layout.width,Wo=e=>e.layout.height,m_e=e=>e.layout.scale,UY=e=>e.layout.margin,rj=nt(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),ij=nt(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),BY="data-recharts-item-index",HY="data-recharts-item-id",zx=60;function yz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function By(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?yz(Object(a),!0).forEach(function(s){f_e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):yz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function f_e(e,t,a){return(t=h_e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function h_e(e){var t=g_e(e,"string");return typeof t=="symbol"?t:t+""}function g_e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var p_e=e=>e.brush.height;function x_e(e){var t=ij(e);return t.reduce((a,s)=>{if(s.orientation==="left"&&!s.mirror&&!s.hide){var r=typeof s.width=="number"?s.width:zx;return a+r}return a},0)}function y_e(e){var t=ij(e);return t.reduce((a,s)=>{if(s.orientation==="right"&&!s.mirror&&!s.hide){var r=typeof s.width=="number"?s.width:zx;return a+r}return a},0)}function b_e(e){var t=rj(e);return t.reduce((a,s)=>s.orientation==="top"&&!s.mirror&&!s.hide?a+s.height:a,0)}function v_e(e){var t=rj(e);return t.reduce((a,s)=>s.orientation==="bottom"&&!s.mirror&&!s.hide?a+s.height:a,0)}var Ja=nt([Go,Wo,UY,p_e,x_e,y_e,b_e,v_e,lY,WSe],(e,t,a,s,r,i,l,o,c,d)=>{var u={left:(a.left||0)+r,right:(a.right||0)+i},f={top:(a.top||0)+l,bottom:(a.bottom||0)+o},p=By(By({},f),u),x=p.bottom;p.bottom+=s,p=Z2e(p,c,d);var y=e-p.left-p.right,w=t-p.top-p.bottom;return By(By({brushBottom:x},p),{},{width:Math.max(y,0),height:Math.max(w,0)})}),w_e=nt(Ja,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),e4=nt(Go,Wo,(e,t)=>({x:0,y:0,width:e,height:t})),N_e=h.createContext(null),Os=()=>h.useContext(N_e)!=null,lj=e=>e.brush,oj=nt([lj,Ja,UY],(e,t,a)=>({height:e.height,x:Pt(e.x)?e.x:t.left,y:Pt(e.y)?e.y:t.top+t.height+t.brushBottom-(a?.bottom||0),width:Pt(e.width)?e.width:t.width})),J2={},e_={},t_={},bz;function j_e(){return bz||(bz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a,s,{signal:r,edges:i}={}){let l,o=null;const c=i!=null&&i.includes("leading"),d=i==null||i.includes("trailing"),u=()=>{o!==null&&(a.apply(l,o),l=void 0,o=null)},f=()=>{d&&u(),w()};let p=null;const x=()=>{p!=null&&clearTimeout(p),p=setTimeout(()=>{p=null,f()},s)},y=()=>{p!==null&&(clearTimeout(p),p=null)},w=()=>{y(),l=void 0,o=null},v=()=>{u()},C=function(...N){if(r?.aborted)return;l=this,o=N;const S=p==null;x(),c&&S&&u()};return C.schedule=x,C.cancel=w,C.flush=v,r?.addEventListener("abort",w,{once:!0}),C}e.debounce=t})(t_)),t_}var vz;function C_e(){return vz||(vz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=j_e();function a(s,r=0,i={}){typeof i!="object"&&(i={});const{leading:l=!1,trailing:o=!0,maxWait:c}=i,d=Array(2);l&&(d[0]="leading"),o&&(d[1]="trailing");let u,f=null;const p=t.debounce(function(...w){u=s.apply(this,w),f=null},r,{edges:d}),x=function(...w){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(u=s.apply(this,w),f=Date.now(),p.cancel(),p.schedule(),u):(p.apply(this,w),u)},y=()=>(p.flush(),u);return x.cancel=p.cancel,x.flush=y,x}e.debounce=a})(e_)),e_}var wz;function S_e(){return wz||(wz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=C_e();function a(s,r=0,i={}){const{leading:l=!0,trailing:o=!0}=i;return t.debounce(s,r,{leading:l,maxWait:r,trailing:o})}e.throttle=a})(J2)),J2}var n_,Nz;function __e(){return Nz||(Nz=1,n_=S_e().throttle),n_}var A_e=__e();const E_e=Hi(A_e);var Uv=function(t,a){for(var s=arguments.length,r=new Array(s>2?s-2:0),i=2;i<s;i++)r[i-2]=arguments[i];if(typeof console<"u"&&console.warn&&(a===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(a===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=0;console.warn(a.replace(/%s/g,()=>r[l++]))}},GY=(e,t,a)=>{var{width:s="100%",height:r="100%",aspect:i,maxHeight:l}=a,o=Lo(s)?e:Number(s),c=Lo(r)?t:Number(r);return i&&i>0&&(o?c=o/i:c&&(o=c*i),l&&c!=null&&c>l&&(c=l)),{calculatedWidth:o,calculatedHeight:c}},T_e={width:0,height:0,overflow:"visible"},k_e={width:0,overflowX:"visible"},L_e={height:0,overflowY:"visible"},P_e={},D_e=e=>{var{width:t,height:a}=e,s=Lo(t),r=Lo(a);return s&&r?T_e:s?k_e:r?L_e:P_e};function O_e(e){var{width:t,height:a,aspect:s}=e,r=t,i=a;return r===void 0&&i===void 0?(r="100%",i="100%"):r===void 0?r=s&&s>0?void 0:"100%":i===void 0&&(i=s&&s>0?void 0:"100%"),{width:r,height:i}}function TT(){return TT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},TT.apply(null,arguments)}function jz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Cz(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?jz(Object(a),!0).forEach(function(s){M_e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):jz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function M_e(e,t,a){return(t=I_e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function I_e(e){var t=$_e(e,"string");return typeof t=="symbol"?t:t+""}function $_e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var WY=h.createContext({width:-1,height:-1});function R_e(e){return El(e.width)&&El(e.height)}function VY(e){var{children:t,width:a,height:s}=e,r=h.useMemo(()=>({width:a,height:s}),[a,s]);return R_e(r)?h.createElement(WY.Provider,{value:r},t):null}var t4=()=>h.useContext(WY),z_e=h.forwardRef((e,t)=>{var{aspect:a,initialDimension:s={width:-1,height:-1},width:r,height:i,minWidth:l=0,minHeight:o,maxHeight:c,children:d,debounce:u=0,id:f,className:p,onResize:x,style:y={}}=e,w=h.useRef(null),v=h.useRef();v.current=x,h.useImperativeHandle(t,()=>w.current);var[C,N]=h.useState({containerWidth:s.width,containerHeight:s.height}),S=h.useCallback((A,I)=>{N(z=>{var F=Math.round(A),D=Math.round(I);return z.containerWidth===F&&z.containerHeight===D?z:{containerWidth:F,containerHeight:D}})},[]);h.useEffect(()=>{if(w.current==null||typeof ResizeObserver>"u")return Ox;var A=D=>{var M,{width:W,height:Z}=D[0].contentRect;S(W,Z),(M=v.current)===null||M===void 0||M.call(v,W,Z)};u>0&&(A=E_e(A,u,{trailing:!0,leading:!1}));var I=new ResizeObserver(A),{width:z,height:F}=w.current.getBoundingClientRect();return S(z,F),I.observe(w.current),()=>{I.disconnect()}},[S,u]);var{containerWidth:T,containerHeight:k}=C;Uv(!a||a>0,"The aspect(%s) must be greater than zero.",a);var{calculatedWidth:_,calculatedHeight:E}=GY(T,k,{width:r,height:i,aspect:a,maxHeight:c});return Uv(_!=null&&_>0||E!=null&&E>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,_,E,r,i,l,o,a),h.createElement("div",{id:f?"".concat(f):void 0,className:Tt("recharts-responsive-container",p),style:Cz(Cz({},y),{},{width:r,height:i,minWidth:l,minHeight:o,maxHeight:c}),ref:w},h.createElement("div",{style:D_e({width:r,height:i})},h.createElement(VY,{width:_,height:E},d)))}),a_=h.forwardRef((e,t)=>{var a=t4();if(El(a.width)&&El(a.height))return e.children;var{width:s,height:r}=O_e({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:i,calculatedHeight:l}=GY(void 0,void 0,{width:s,height:r,aspect:e.aspect,maxHeight:e.maxHeight});return Pt(i)&&Pt(l)?h.createElement(VY,{width:i,height:l},e.children):h.createElement(z_e,TT({},e,{width:s,height:r,ref:t}))});function qY(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var cj=()=>{var e,t=Os(),a=Ot(w_e),s=Ot(oj),r=(e=Ot(lj))===null||e===void 0?void 0:e.padding;return!t||!s||!r?a:{width:s.width-r.left-r.right,height:s.height-r.top-r.bottom,x:r.left,y:r.top}},F_e={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},YY=()=>{var e;return(e=Ot(Ja))!==null&&e!==void 0?e:F_e},n4=()=>Ot(Go),a4=()=>Ot(Wo),U_e=()=>Ot(e=>e.layout.margin),hn=e=>e.layout.layoutType,Xf=()=>Ot(hn),B_e=()=>{var e=Xf();return e!==void 0},dj=e=>{var t=qn(),a=Os(),{width:s,height:r}=e,i=t4(),l=s,o=r;return i&&(l=i.width>0?i.width:s,o=i.height>0?i.height:r),h.useEffect(()=>{!a&&El(l)&&El(o)&&t(V2e({width:l,height:o}))},[t,a,l,o]),null},QY=Symbol.for("immer-nothing"),Sz=Symbol.for("immer-draftable"),Mr=Symbol.for("immer-state");function Oi(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var _p=Object.getPrototypeOf;function Ef(e){return!!e&&!!e[Mr]}function Su(e){return e?KY(e)||Array.isArray(e)||!!e[Sz]||!!e.constructor?.[Sz]||Fx(e)||mj(e):!1}var H_e=Object.prototype.constructor.toString(),_z=new WeakMap;function KY(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const a=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(a===Object)return!0;if(typeof a!="function")return!1;let s=_z.get(a);return s===void 0&&(s=Function.toString.call(a),_z.set(a,s)),s===H_e}function Bv(e,t,a=!0){uj(e)===0?(a?Reflect.ownKeys(e):Object.keys(e)).forEach(r=>{t(r,e[r],e)}):e.forEach((s,r)=>t(r,s,e))}function uj(e){const t=e[Mr];return t?t.type_:Array.isArray(e)?1:Fx(e)?2:mj(e)?3:0}function kT(e,t){return uj(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function XY(e,t,a){const s=uj(e);s===2?e.set(t,a):s===3?e.add(a):e[t]=a}function G_e(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Fx(e){return e instanceof Map}function mj(e){return e instanceof Set}function Rd(e){return e.copy_||e.base_}function LT(e,t){if(Fx(e))return new Map(e);if(mj(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const a=KY(e);if(t===!0||t==="class_only"&&!a){const s=Object.getOwnPropertyDescriptors(e);delete s[Mr];let r=Reflect.ownKeys(s);for(let i=0;i<r.length;i++){const l=r[i],o=s[l];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(s[l]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[l]})}return Object.create(_p(e),s)}else{const s=_p(e);if(s!==null&&a)return{...e};const r=Object.create(s);return Object.assign(r,e)}}function s4(e,t=!1){return fj(e)||Ef(e)||!Su(e)||(uj(e)>1&&Object.defineProperties(e,{set:Hy,add:Hy,clear:Hy,delete:Hy}),Object.freeze(e),t&&Object.values(e).forEach(a=>s4(a,!0))),e}function W_e(){Oi(2)}var Hy={value:W_e};function fj(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var V_e={};function _u(e){const t=V_e[e];return t||Oi(0,e),t}var Ap;function ZY(){return Ap}function q_e(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Az(e,t){t&&(_u("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function PT(e){DT(e),e.drafts_.forEach(Y_e),e.drafts_=null}function DT(e){e===Ap&&(Ap=e.parent_)}function Ez(e){return Ap=q_e(Ap,e)}function Y_e(e){const t=e[Mr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Tz(e,t){t.unfinalizedDrafts_=t.drafts_.length;const a=t.drafts_[0];return e!==void 0&&e!==a?(a[Mr].modified_&&(PT(t),Oi(4)),Su(e)&&(e=Hv(t,e),t.parent_||Gv(t,e)),t.patches_&&_u("Patches").generateReplacementPatches_(a[Mr].base_,e,t.patches_,t.inversePatches_)):e=Hv(t,a,[]),PT(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==QY?e:void 0}function Hv(e,t,a){if(fj(t))return t;const s=e.immer_.shouldUseStrictIteration(),r=t[Mr];if(!r)return Bv(t,(i,l)=>kz(e,r,t,i,l,a),s),t;if(r.scope_!==e)return t;if(!r.modified_)return Gv(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let l=i,o=!1;r.type_===3&&(l=new Set(i),i.clear(),o=!0),Bv(l,(c,d)=>kz(e,r,i,c,d,a,o),s),Gv(e,i,!1),a&&e.patches_&&_u("Patches").generatePatches_(r,a,e.patches_,e.inversePatches_)}return r.copy_}function kz(e,t,a,s,r,i,l){if(r==null||typeof r!="object"&&!l)return;const o=fj(r);if(!(o&&!l)){if(Ef(r)){const c=i&&t&&t.type_!==3&&!kT(t.assigned_,s)?i.concat(s):void 0,d=Hv(e,r,c);if(XY(a,s,d),Ef(d))e.canAutoFreeze_=!1;else return}else l&&a.add(r);if(Su(r)&&!o){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[s]===r&&o)return;Hv(e,r),(!t||!t.scope_.parent_)&&typeof s!="symbol"&&(Fx(a)?a.has(s):Object.prototype.propertyIsEnumerable.call(a,s))&&Gv(e,r)}}}function Gv(e,t,a=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&s4(t,a)}function Q_e(e,t){const a=Array.isArray(e),s={type_:a?1:0,scope_:t?t.scope_:ZY(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=s,i=r4;a&&(r=[s],i=Ep);const{revoke:l,proxy:o}=Proxy.revocable(r,i);return s.draft_=o,s.revoke_=l,o}var r4={get(e,t){if(t===Mr)return e;const a=Rd(e);if(!kT(a,t))return K_e(e,a,t);const s=a[t];return e.finalized_||!Su(s)?s:s===s_(e.base_,t)?(r_(e),e.copy_[t]=MT(s,e)):s},has(e,t){return t in Rd(e)},ownKeys(e){return Reflect.ownKeys(Rd(e))},set(e,t,a){const s=JY(Rd(e),t);if(s?.set)return s.set.call(e.draft_,a),!0;if(!e.modified_){const r=s_(Rd(e),t),i=r?.[Mr];if(i&&i.base_===a)return e.copy_[t]=a,e.assigned_[t]=!1,!0;if(G_e(a,r)&&(a!==void 0||kT(e.base_,t)))return!0;r_(e),OT(e)}return e.copy_[t]===a&&(a!==void 0||t in e.copy_)||Number.isNaN(a)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=a,e.assigned_[t]=!0),!0},deleteProperty(e,t){return s_(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,r_(e),OT(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const a=Rd(e),s=Reflect.getOwnPropertyDescriptor(a,t);return s&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:s.enumerable,value:a[t]}},defineProperty(){Oi(11)},getPrototypeOf(e){return _p(e.base_)},setPrototypeOf(){Oi(12)}},Ep={};Bv(r4,(e,t)=>{Ep[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Ep.deleteProperty=function(e,t){return Ep.set.call(this,e,t,void 0)};Ep.set=function(e,t,a){return r4.set.call(this,e[0],t,a,e[0])};function s_(e,t){const a=e[Mr];return(a?Rd(a):e)[t]}function K_e(e,t,a){const s=JY(t,a);return s?"value"in s?s.value:s.get?.call(e.draft_):void 0}function JY(e,t){if(!(t in e))return;let a=_p(e);for(;a;){const s=Object.getOwnPropertyDescriptor(a,t);if(s)return s;a=_p(a)}}function OT(e){e.modified_||(e.modified_=!0,e.parent_&&OT(e.parent_))}function r_(e){e.copy_||(e.copy_=LT(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var X_e=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,a,s)=>{if(typeof t=="function"&&typeof a!="function"){const i=a;a=t;const l=this;return function(c=i,...d){return l.produce(c,u=>a.call(this,u,...d))}}typeof a!="function"&&Oi(6),s!==void 0&&typeof s!="function"&&Oi(7);let r;if(Su(t)){const i=Ez(this),l=MT(t,void 0);let o=!0;try{r=a(l),o=!1}finally{o?PT(i):DT(i)}return Az(i,s),Tz(r,i)}else if(!t||typeof t!="object"){if(r=a(t),r===void 0&&(r=t),r===QY&&(r=void 0),this.autoFreeze_&&s4(r,!0),s){const i=[],l=[];_u("Patches").generateReplacementPatches_(t,r,i,l),s(i,l)}return r}else Oi(1,t)},this.produceWithPatches=(t,a)=>{if(typeof t=="function")return(l,...o)=>this.produceWithPatches(l,c=>t(c,...o));let s,r;return[this.produce(t,a,(l,o)=>{s=l,r=o}),s,r]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Su(e)||Oi(8),Ef(e)&&(e=Z_e(e));const t=Ez(this),a=MT(e,void 0);return a[Mr].isManual_=!0,DT(t),a}finishDraft(e,t){const a=e&&e[Mr];(!a||!a.isManual_)&&Oi(9);const{scope_:s}=a;return Az(s,t),Tz(void 0,s)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let a;for(a=t.length-1;a>=0;a--){const r=t[a];if(r.path.length===0&&r.op==="replace"){e=r.value;break}}a>-1&&(t=t.slice(a+1));const s=_u("Patches").applyPatches_;return Ef(e)?s(e,t):this.produce(e,r=>s(r,t))}};function MT(e,t){const a=Fx(e)?_u("MapSet").proxyMap_(e,t):mj(e)?_u("MapSet").proxySet_(e,t):Q_e(e,t);return(t?t.scope_:ZY()).drafts_.push(a),a}function Z_e(e){return Ef(e)||Oi(10,e),eQ(e)}function eQ(e){if(!Su(e)||fj(e))return e;const t=e[Mr];let a,s=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,a=LT(e,t.scope_.immer_.useStrictShallowCopy_),s=t.scope_.immer_.shouldUseStrictIteration()}else a=LT(e,!0);return Bv(a,(r,i)=>{XY(a,r,eQ(i))},s),t&&(t.finalized_=!1),a}var J_e=new X_e;J_e.produce;var eAe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},tQ=fr({name:"legend",initialState:eAe,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:ta()},replaceLegendPayload:{reducer(e,t){var{prev:a,next:s}=t.payload,r=$i(e).payload.indexOf(a);r>-1&&(e.payload[r]=s)},prepare:ta()},removeLegendPayload:{reducer(e,t){var a=$i(e).payload.indexOf(t.payload);a>-1&&e.payload.splice(a,1)},prepare:ta()}}}),{setLegendSize:Lz,setLegendSettings:tAe,addLegendPayload:nQ,replaceLegendPayload:aQ,removeLegendPayload:sQ}=tQ.actions,nAe=tQ.reducer,aAe=["contextPayload"];function IT(){return IT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},IT.apply(null,arguments)}function Pz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Tf(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Pz(Object(a),!0).forEach(function(s){sAe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Pz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function sAe(e,t,a){return(t=rAe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function rAe(e){var t=iAe(e,"string");return typeof t=="symbol"?t:t+""}function iAe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lAe(e,t){if(e==null)return{};var a,s,r=oAe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function oAe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function cAe(e){return e.value}function dAe(e){var{contextPayload:t}=e,a=lAe(e,aAe),s=sY(t,e.payloadUniqBy,cAe),r=Tf(Tf({},a),{},{payload:s});return h.isValidElement(e.content)?h.cloneElement(e.content,r):typeof e.content=="function"?h.createElement(e.content,r):h.createElement(gSe,r)}function uAe(e,t,a,s,r,i){var{layout:l,align:o,verticalAlign:c}=t,d,u;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(o==="center"&&l==="vertical"?d={left:((s||0)-i.width)/2}:d=o==="right"?{right:a&&a.right||0}:{left:a&&a.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?u={top:((r||0)-i.height)/2}:u=c==="bottom"?{bottom:a&&a.bottom||0}:{top:a&&a.top||0}),Tf(Tf({},d),u)}function mAe(e){var t=qn();return h.useEffect(()=>{t(tAe(e))},[t,e]),null}function fAe(e){var t=qn();return h.useEffect(()=>(t(Lz(e)),()=>{t(Lz({width:0,height:0}))}),[t,e]),null}function hAe(e,t,a,s){return e==="vertical"&&Pt(t)?{height:t}:e==="horizontal"?{width:a||s}:null}var gAe={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function rQ(e){var t=za(e,gAe),a=YSe(),s=zCe(),r=U_e(),{width:i,height:l,wrapperStyle:o,portal:c}=t,[d,u]=oY([a]),f=n4(),p=a4();if(f==null||p==null)return null;var x=f-(r?.left||0)-(r?.right||0),y=hAe(t.layout,l,i,x),w=c?o:Tf(Tf({position:"absolute",width:y?.width||i||"auto",height:y?.height||l||"auto"},uAe(o,t,r,f,p,d)),o),v=c??s;if(v==null||a==null)return null;var C=h.createElement("div",{className:"recharts-legend-wrapper",style:w,ref:u},h.createElement(mAe,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),!c&&h.createElement(fAe,{width:d.width,height:d.height}),h.createElement(dAe,IT({},t,y,{margin:r,chartWidth:f,chartHeight:p,contextPayload:a})));return Mi.createPortal(C,v)}rQ.displayName="Legend";function $T(){return $T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},$T.apply(null,arguments)}function Dz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function i_(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Dz(Object(a),!0).forEach(function(s){pAe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Dz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function pAe(e,t,a){return(t=xAe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function xAe(e){var t=yAe(e,"string");return typeof t=="symbol"?t:t+""}function yAe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bAe(e){return Array.isArray(e)&&Al(e[0])&&Al(e[1])?e.join(" ~ "):e}var vAe=e=>{var{separator:t=" : ",contentStyle:a={},itemStyle:s={},labelStyle:r={},payload:i,formatter:l,itemSorter:o,wrapperClassName:c,labelClassName:d,label:u,labelFormatter:f,accessibilityLayer:p=!1}=e,x=()=>{if(i&&i.length){var k={padding:0,margin:0},_=(o?KN(i,o):i).map((E,A)=>{if(E.type==="none")return null;var I=E.formatter||l||bAe,{value:z,name:F}=E,D=z,M=F;if(I){var W=I(z,F,E,A,i);if(Array.isArray(W))[D,M]=W;else if(W!=null)D=W;else return null}var Z=i_({display:"block",paddingTop:4,paddingBottom:4,color:E.color||"#000"},s);return h.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(A),style:Z},Al(M)?h.createElement("span",{className:"recharts-tooltip-item-name"},M):null,Al(M)?h.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,h.createElement("span",{className:"recharts-tooltip-item-value"},D),h.createElement("span",{className:"recharts-tooltip-item-unit"},E.unit||""))});return h.createElement("ul",{className:"recharts-tooltip-item-list",style:k},_)}return null},y=i_({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),w=i_({margin:0},r),v=!ra(u),C=v?u:"",N=Tt("recharts-default-tooltip",c),S=Tt("recharts-tooltip-label",d);v&&f&&i!==void 0&&i!==null&&(C=f(u,i));var T=p?{role:"status","aria-live":"assertive"}:{};return h.createElement("div",$T({className:N,style:y},T),h.createElement("p",{className:S,style:w},h.isValidElement(C)?C:"".concat(C)),x())},og="recharts-tooltip-wrapper",wAe={visibility:"hidden"};function NAe(e){var{coordinate:t,translateX:a,translateY:s}=e;return Tt(og,{["".concat(og,"-right")]:Pt(a)&&t&&Pt(t.x)&&a>=t.x,["".concat(og,"-left")]:Pt(a)&&t&&Pt(t.x)&&a<t.x,["".concat(og,"-bottom")]:Pt(s)&&t&&Pt(t.y)&&s>=t.y,["".concat(og,"-top")]:Pt(s)&&t&&Pt(t.y)&&s<t.y})}function Oz(e){var{allowEscapeViewBox:t,coordinate:a,key:s,offsetTopLeft:r,position:i,reverseDirection:l,tooltipDimension:o,viewBox:c,viewBoxDimension:d}=e;if(i&&Pt(i[s]))return i[s];var u=a[s]-o-(r>0?r:0),f=a[s]+r;if(t[s])return l[s]?u:f;var p=c[s];if(p==null)return 0;if(l[s]){var x=u,y=p;return x<y?Math.max(f,p):Math.max(u,p)}if(d==null)return 0;var w=f+o,v=p+d;return w>v?Math.max(u,p):Math.max(f,p)}function jAe(e){var{translateX:t,translateY:a,useTranslate3d:s}=e;return{transform:s?"translate3d(".concat(t,"px, ").concat(a,"px, 0)"):"translate(".concat(t,"px, ").concat(a,"px)")}}function CAe(e){var{allowEscapeViewBox:t,coordinate:a,offsetTopLeft:s,position:r,reverseDirection:i,tooltipBox:l,useTranslate3d:o,viewBox:c}=e,d,u,f;return l.height>0&&l.width>0&&a?(u=Oz({allowEscapeViewBox:t,coordinate:a,key:"x",offsetTopLeft:s,position:r,reverseDirection:i,tooltipDimension:l.width,viewBox:c,viewBoxDimension:c.width}),f=Oz({allowEscapeViewBox:t,coordinate:a,key:"y",offsetTopLeft:s,position:r,reverseDirection:i,tooltipDimension:l.height,viewBox:c,viewBoxDimension:c.height}),d=jAe({translateX:u,translateY:f,useTranslate3d:o})):d=wAe,{cssProperties:d,cssClasses:NAe({translateX:u,translateY:f,coordinate:a})}}function Mz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Gy(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Mz(Object(a),!0).forEach(function(s){RT(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Mz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function RT(e,t,a){return(t=SAe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function SAe(e){var t=_Ae(e,"string");return typeof t=="symbol"?t:t+""}function _Ae(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class AAe extends h.PureComponent{constructor(){super(...arguments),RT(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),RT(this,"handleKeyDown",t=>{if(t.key==="Escape"){var a,s,r,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.x)!==null&&a!==void 0?a:0,y:(r=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&r!==void 0?r:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,a;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:a,animationDuration:s,animationEasing:r,children:i,coordinate:l,hasPayload:o,isAnimationActive:c,offset:d,position:u,reverseDirection:f,useTranslate3d:p,viewBox:x,wrapperStyle:y,lastBoundingBox:w,innerRef:v,hasPortalFromProps:C}=this.props,{cssClasses:N,cssProperties:S}=CAe({allowEscapeViewBox:a,coordinate:l,offsetTopLeft:d,position:u,reverseDirection:f,tooltipBox:{height:w.height,width:w.width},useTranslate3d:p,viewBox:x}),T=C?{}:Gy(Gy({transition:c&&t?"transform ".concat(s,"ms ").concat(r):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&o?"visible":"hidden",position:"absolute",top:0,left:0}),k=Gy(Gy({},T),{},{visibility:!this.state.dismissed&&t&&o?"visible":"hidden"},y);return h.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:N,style:k,ref:v},i)}}var iQ=()=>{var e;return(e=Ot(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function zT(){return zT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},zT.apply(null,arguments)}function Iz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function $z(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Iz(Object(a),!0).forEach(function(s){EAe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Iz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function EAe(e,t,a){return(t=TAe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function TAe(e){var t=kAe(e,"string");return typeof t=="symbol"?t:t+""}function kAe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Rz={curveBasisClosed:Oge,curveBasisOpen:Mge,curveBasis:Dge,curveBumpX:vW,curveBumpY:wW,curveLinearClosed:Rge,curveLinear:wx,curveMonotoneX:YE,curveMonotoneY:RW,curveNatural:FW,curveStep:UW,curveStepAfter:HW,curveStepBefore:BW},Wv=e=>ca(e.x)&&ca(e.y),zz=e=>e.base!=null&&Wv(e.base)&&Wv(e),cg=e=>e.x,dg=e=>e.y,LAe=(e,t)=>{if(typeof e=="function")return e;var a="curve".concat(Dx(e));return(a==="curveMonotone"||a==="curveBump")&&t?Rz["".concat(a).concat(t==="vertical"?"Y":"X")]:Rz[a]||wx},PAe=e=>{var{type:t="linear",points:a=[],baseLine:s,layout:r,connectNulls:i=!1}=e,l=LAe(t,r),o=i?a.filter(Wv):a,c;if(Array.isArray(s)){var d=a.map((x,y)=>$z($z({},x),{},{base:s[y]}));r==="vertical"?c=Tg().y(dg).x1(cg).x0(x=>x.base.x):c=Tg().x(cg).y1(dg).y0(x=>x.base.y);var u=c.defined(zz).curve(l),f=i?d.filter(zz):d;return u(f)}r==="vertical"&&Pt(s)?c=Tg().y(dg).x1(cg).x0(s):Pt(s)?c=Tg().x(cg).y1(dg).y0(s):c=ZL().x(cg).y(dg);var p=c.defined(Wv).curve(l);return p(o)},i4=e=>{var{className:t,points:a,path:s,pathRef:r}=e,i=Xf();if((!a||!a.length)&&!s)return null;var l={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||i,connectNulls:e.connectNulls},o=a&&a.length?PAe(l):s;return h.createElement("path",zT({},Or(e),HP(e),{className:Tt("recharts-curve",t),d:o===null?void 0:o,ref:r}))},DAe=["x","y","top","left","width","height","className"];function FT(){return FT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},FT.apply(null,arguments)}function Fz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function OAe(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Fz(Object(a),!0).forEach(function(s){MAe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Fz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function MAe(e,t,a){return(t=IAe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function IAe(e){var t=$Ae(e,"string");return typeof t=="symbol"?t:t+""}function $Ae(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function RAe(e,t){if(e==null)return{};var a,s,r=zAe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function zAe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var FAe=(e,t,a,s,r,i)=>"M".concat(e,",").concat(r,"v").concat(s,"M").concat(i,",").concat(t,"h").concat(a),UAe=e=>{var{x:t=0,y:a=0,top:s=0,left:r=0,width:i=0,height:l=0,className:o}=e,c=RAe(e,DAe),d=OAe({x:t,y:a,top:s,left:r,width:i,height:l},c);return!Pt(t)||!Pt(a)||!Pt(i)||!Pt(l)||!Pt(s)||!Pt(r)?null:h.createElement("path",FT({},Fs(d),{className:Tt("recharts-cross",o),d:FAe(t,a,i,l,s,r)}))};function BAe(e,t,a,s){var r=s/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-r:a.left+.5,y:e==="horizontal"?a.top+.5:t.y-r,width:e==="horizontal"?s:a.width-1,height:e==="horizontal"?a.height-1:s}}function Uz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Bz(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Uz(Object(a),!0).forEach(function(s){HAe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Uz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function HAe(e,t,a){return(t=GAe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function GAe(e){var t=WAe(e,"string");return typeof t=="symbol"?t:t+""}function WAe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var VAe=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),lQ=(e,t,a)=>e.map(s=>"".concat(VAe(s)," ").concat(t,"ms ").concat(a)).join(","),qAe=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((a,s)=>a.filter(r=>s.includes(r))),Tp=(e,t)=>Object.keys(t).reduce((a,s)=>Bz(Bz({},a),{},{[s]:e(s,t[s])}),{});function Hz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Ba(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Hz(Object(a),!0).forEach(function(s){YAe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Hz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function YAe(e,t,a){return(t=QAe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function QAe(e){var t=KAe(e,"string");return typeof t=="symbol"?t:t+""}function KAe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Vv=(e,t,a)=>e+(t-e)*a,UT=e=>{var{from:t,to:a}=e;return t!==a},oQ=(e,t,a)=>{var s=Tp((r,i)=>{if(UT(i)){var[l,o]=e(i.from,i.to,i.velocity);return Ba(Ba({},i),{},{from:l,velocity:o})}return i},t);return a<1?Tp((r,i)=>UT(i)&&s[r]!=null?Ba(Ba({},i),{},{velocity:Vv(i.velocity,s[r].velocity,a),from:Vv(i.from,s[r].from,a)}):i,t):oQ(e,s,a-1)};function XAe(e,t,a,s,r,i){var l,o=s.reduce((p,x)=>Ba(Ba({},p),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),c=()=>Tp((p,x)=>x.from,o),d=()=>!Object.values(o).filter(UT).length,u=null,f=p=>{l||(l=p);var x=p-l,y=x/a.dt;o=oQ(a,o,y),r(Ba(Ba(Ba({},e),t),c())),l=p,d()||(u=i.setTimeout(f))};return()=>(u=i.setTimeout(f),()=>{var p;(p=u)===null||p===void 0||p()})}function ZAe(e,t,a,s,r,i,l){var o=null,c=r.reduce((f,p)=>{var x=e[p],y=t[p];return x==null||y==null?f:Ba(Ba({},f),{},{[p]:[x,y]})},{}),d,u=f=>{d||(d=f);var p=(f-d)/s,x=Tp((w,v)=>Vv(...v,a(p)),c);if(i(Ba(Ba(Ba({},e),t),x)),p<1)o=l.setTimeout(u);else{var y=Tp((w,v)=>Vv(...v,a(1)),c);i(Ba(Ba(Ba({},e),t),y))}};return()=>(o=l.setTimeout(u),()=>{var f;(f=o)===null||f===void 0||f()})}const JAe=(e,t,a,s,r,i)=>{var l=qAe(e,t);return a==null?()=>(r(Ba(Ba({},e),t)),()=>{}):a.isStepper===!0?XAe(e,t,a,l,r,i):ZAe(e,t,a,s,l,r,i)};var qv=1e-4,cQ=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],dQ=(e,t)=>e.map((a,s)=>a*t**s).reduce((a,s)=>a+s),Gz=(e,t)=>a=>{var s=cQ(e,t);return dQ(s,a)},eEe=(e,t)=>a=>{var s=cQ(e,t),r=[...s.map((i,l)=>i*l).slice(1),0];return dQ(r,a)},tEe=e=>{var t,a=e.split("(");if(a.length!==2||a[0]!=="cubic-bezier")return null;var s=(t=a[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(s==null||s.length!==4)return null;var r=s.map(i=>parseFloat(i));return[r[0],r[1],r[2],r[3]]},nEe=function(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];if(a.length===1)switch(a[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var r=tEe(a[0]);if(r)return r}}return a.length===4?a:[0,0,1,1]},aEe=(e,t,a,s)=>{var r=Gz(e,a),i=Gz(t,s),l=eEe(e,a),o=d=>d>1?1:d<0?0:d,c=d=>{for(var u=d>1?1:d,f=u,p=0;p<8;++p){var x=r(f)-u,y=l(f);if(Math.abs(x-u)<qv||y<qv)return i(f);f=o(f-x/y)}return i(f)};return c.isStepper=!1,c},Wz=function(){return aEe(...nEe(...arguments))},sEe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:a=100,damping:s=8,dt:r=17}=t,i=(l,o,c)=>{var d=-(l-o)*a,u=c*s,f=c+(d-u)*r/1e3,p=c*r/1e3+l;return Math.abs(p-o)<qv&&Math.abs(f)<qv?[o,0]:[p,f]};return i.isStepper=!0,i.dt=r,i},rEe=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Wz(e);case"spring":return sEe();default:if(e.split("(")[0]==="cubic-bezier")return Wz(e)}return typeof e=="function"?e:null};function iEe(e){var t,a=()=>null,s=!1,r=null,i=l=>{if(!s){if(Array.isArray(l)){if(!l.length)return;var o=l,[c,...d]=o;if(typeof c=="number"){r=e.setTimeout(i.bind(null,d),c);return}i(c),r=e.setTimeout(i.bind(null,d));return}typeof l=="string"&&(t=l,a(t)),typeof l=="object"&&(t=l,a(t)),typeof l=="function"&&l()}};return{stop:()=>{s=!0},start:l=>{s=!1,r&&(r(),r=null),i(l)},subscribe:l=>(a=l,()=>{a=()=>null}),getTimeoutController:()=>e}}class lEe{setTimeout(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=performance.now(),r=null,i=l=>{l-s>=a?t(l):typeof requestAnimationFrame=="function"&&(r=requestAnimationFrame(i))};return r=requestAnimationFrame(i),()=>{r!=null&&cancelAnimationFrame(r)}}}function oEe(){return iEe(new lEe)}var cEe=h.createContext(oEe);function dEe(e,t){var a=h.useContext(cEe);return h.useMemo(()=>t??a(e),[e,t,a])}var uEe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),hj={isSsr:uEe()},mEe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},Vz={t:0},l_={t:1};function Ux(e){var t=za(e,mEe),{isActive:a,canBegin:s,duration:r,easing:i,begin:l,onAnimationEnd:o,onAnimationStart:c,children:d}=t,u=a==="auto"?!hj.isSsr:a,f=dEe(t.animationId,t.animationManager),[p,x]=h.useState(u?Vz:l_),y=h.useRef(null);return h.useEffect(()=>{u||x(l_)},[u]),h.useEffect(()=>{if(!u||!s)return Ox;var w=JAe(Vz,l_,rEe(i),r,x,f.getTimeoutController()),v=()=>{y.current=w()};return f.start([c,l,v,r,o]),()=>{f.stop(),y.current&&y.current(),o()}},[u,s,r,i,l,c,o,f]),d(p.t)}function Bx(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",a=h.useRef(Np(t)),s=h.useRef(e);return s.current!==e&&(a.current=Np(t),s.current=e),a.current}var fEe=["radius"],hEe=["radius"],qz,Yz,Qz,Kz,Xz,Zz,Jz,eF,tF,nF;function aF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function sF(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?aF(Object(a),!0).forEach(function(s){gEe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):aF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function gEe(e,t,a){return(t=pEe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function pEe(e){var t=xEe(e,"string");return typeof t=="symbol"?t:t+""}function xEe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yv(){return Yv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Yv.apply(null,arguments)}function rF(e,t){if(e==null)return{};var a,s,r=yEe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function yEe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function Ji(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var iF=(e,t,a,s,r)=>{var i=zc(a),l=zc(s),o=Math.min(Math.abs(i)/2,Math.abs(l)/2),c=l>=0?1:-1,d=i>=0?1:-1,u=l>=0&&i>=0||l<0&&i<0?1:0,f;if(o>0&&r instanceof Array){for(var p=[0,0,0,0],x=0,y=4;x<y;x++)p[x]=r[x]>o?o:r[x];f=pa(qz||(qz=Ji(["M",",",""])),e,t+c*p[0]),p[0]>0&&(f+=pa(Yz||(Yz=Ji(["A ",",",",0,0,",",",",",""])),p[0],p[0],u,e+d*p[0],t)),f+=pa(Qz||(Qz=Ji(["L ",",",""])),e+a-d*p[1],t),p[1]>0&&(f+=pa(Kz||(Kz=Ji(["A ",",",",0,0,",`,
        `,",",""])),p[1],p[1],u,e+a,t+c*p[1])),f+=pa(Xz||(Xz=Ji(["L ",",",""])),e+a,t+s-c*p[2]),p[2]>0&&(f+=pa(Zz||(Zz=Ji(["A ",",",",0,0,",`,
        `,",",""])),p[2],p[2],u,e+a-d*p[2],t+s)),f+=pa(Jz||(Jz=Ji(["L ",",",""])),e+d*p[3],t+s),p[3]>0&&(f+=pa(eF||(eF=Ji(["A ",",",",0,0,",`,
        `,",",""])),p[3],p[3],u,e,t+s-c*p[3])),f+="Z"}else if(o>0&&r===+r&&r>0){var w=Math.min(o,r);f=pa(tF||(tF=Ji(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+c*w,w,w,u,e+d*w,t,e+a-d*w,t,w,w,u,e+a,t+c*w,e+a,t+s-c*w,w,w,u,e+a-d*w,t+s,e+d*w,t+s,w,w,u,e,t+s-c*w)}else f=pa(nF||(nF=Ji(["M ",","," h "," v "," h "," Z"])),e,t,a,s,-a);return f},lF={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},uQ=e=>{var t=za(e,lF),a=h.useRef(null),[s,r]=h.useState(-1);h.useEffect(()=>{if(a.current&&a.current.getTotalLength)try{var Q=a.current.getTotalLength();Q&&r(Q)}catch{}},[]);var{x:i,y:l,width:o,height:c,radius:d,className:u}=t,{animationEasing:f,animationDuration:p,animationBegin:x,isAnimationActive:y,isUpdateAnimationActive:w}=t,v=h.useRef(o),C=h.useRef(c),N=h.useRef(i),S=h.useRef(l),T=h.useMemo(()=>({x:i,y:l,width:o,height:c,radius:d}),[i,l,o,c,d]),k=Bx(T,"rectangle-");if(i!==+i||l!==+l||o!==+o||c!==+c||o===0||c===0)return null;var _=Tt("recharts-rectangle",u);if(!w){var E=Fs(t),{radius:A}=E,I=rF(E,fEe);return h.createElement("path",Yv({},I,{x:zc(i),y:zc(l),width:zc(o),height:zc(c),radius:typeof d=="number"?d:void 0,className:_,d:iF(i,l,o,c,d)}))}var z=v.current,F=C.current,D=N.current,M=S.current,W="0px ".concat(s===-1?1:s,"px"),Z="".concat(s,"px 0px"),R=lQ(["strokeDasharray"],p,typeof f=="string"?f:lF.animationEasing);return h.createElement(Ux,{animationId:k,key:k,canBegin:s>0,duration:p,easing:f,isActive:w,begin:x},Q=>{var Y=na(z,o,Q),oe=na(F,c,Q),re=na(D,i,Q),ee=na(M,l,Q);a.current&&(v.current=Y,C.current=oe,N.current=re,S.current=ee);var H;y?Q>0?H={transition:R,strokeDasharray:Z}:H={strokeDasharray:W}:H={strokeDasharray:Z};var ye=Fs(t),{radius:te}=ye,ve=rF(ye,hEe);return h.createElement("path",Yv({},ve,{radius:typeof d=="number"?d:void 0,className:_,d:iF(re,ee,Y,oe,d),ref:a,style:sF(sF({},H),t.style)}))})};function oF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function cF(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?oF(Object(a),!0).forEach(function(s){bEe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):oF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function bEe(e,t,a){return(t=vEe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function vEe(e){var t=wEe(e,"string");return typeof t=="symbol"?t:t+""}function wEe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Qv=Math.PI/180,NEe=e=>e*180/Math.PI,Oa=(e,t,a,s)=>({x:e+Math.cos(-Qv*s)*a,y:t+Math.sin(-Qv*s)*a}),mQ=function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(s.left||0)-(s.right||0)),Math.abs(a-(s.top||0)-(s.bottom||0)))/2},jEe=(e,t)=>{var{x:a,y:s}=e,{x:r,y:i}=t;return Math.sqrt((a-r)**2+(s-i)**2)},CEe=(e,t)=>{var{x:a,y:s}=e,{cx:r,cy:i}=t,l=jEe({x:a,y:s},{x:r,y:i});if(l<=0)return{radius:l,angle:0};var o=(a-r)/l,c=Math.acos(o);return s>i&&(c=2*Math.PI-c),{radius:l,angle:NEe(c),angleInRadian:c}},SEe=e=>{var{startAngle:t,endAngle:a}=e,s=Math.floor(t/360),r=Math.floor(a/360),i=Math.min(s,r);return{startAngle:t-i*360,endAngle:a-i*360}},_Ee=(e,t)=>{var{startAngle:a,endAngle:s}=t,r=Math.floor(a/360),i=Math.floor(s/360),l=Math.min(r,i);return e+l*360},AEe=(e,t)=>{var{chartX:a,chartY:s}=e,{radius:r,angle:i}=CEe({x:a,y:s},t),{innerRadius:l,outerRadius:o}=t;if(r<l||r>o||r===0)return null;var{startAngle:c,endAngle:d}=SEe(t),u=i,f;if(c<=d){for(;u>d;)u-=360;for(;u<c;)u+=360;f=u>=c&&u<=d}else{for(;u>c;)u-=360;for(;u<d;)u+=360;f=u>=d&&u<=c}return f?cF(cF({},t),{},{radius:r,angle:_Ee(u,t)}):null};function fQ(e){var{cx:t,cy:a,radius:s,startAngle:r,endAngle:i}=e,l=Oa(t,a,s,r),o=Oa(t,a,s,i);return{points:[l,o],cx:t,cy:a,radius:s,startAngle:r,endAngle:i}}var dF,uF,mF,fF,hF,gF,pF;function BT(){return BT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},BT.apply(null,arguments)}function Xd(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var EEe=(e,t)=>{var a=cs(t-e),s=Math.min(Math.abs(t-e),359.999);return a*s},Wy=e=>{var{cx:t,cy:a,radius:s,angle:r,sign:i,isExternal:l,cornerRadius:o,cornerIsExternal:c}=e,d=o*(l?1:-1)+s,u=Math.asin(o/d)/Qv,f=c?r:r+i*u,p=Oa(t,a,d,f),x=Oa(t,a,s,f),y=c?r-i*u:r,w=Oa(t,a,d*Math.cos(u*Qv),y);return{center:p,circleTangency:x,lineTangency:w,theta:u}},hQ=e=>{var{cx:t,cy:a,innerRadius:s,outerRadius:r,startAngle:i,endAngle:l}=e,o=EEe(i,l),c=i+o,d=Oa(t,a,r,i),u=Oa(t,a,r,c),f=pa(dF||(dF=Xd(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),d.x,d.y,r,r,+(Math.abs(o)>180),+(i>c),u.x,u.y);if(s>0){var p=Oa(t,a,s,i),x=Oa(t,a,s,c);f+=pa(uF||(uF=Xd(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),x.x,x.y,s,s,+(Math.abs(o)>180),+(i<=c),p.x,p.y)}else f+=pa(mF||(mF=Xd(["L ",","," Z"])),t,a);return f},TEe=e=>{var{cx:t,cy:a,innerRadius:s,outerRadius:r,cornerRadius:i,forceCornerRadius:l,cornerIsExternal:o,startAngle:c,endAngle:d}=e,u=cs(d-c),{circleTangency:f,lineTangency:p,theta:x}=Wy({cx:t,cy:a,radius:r,angle:c,sign:u,cornerRadius:i,cornerIsExternal:o}),{circleTangency:y,lineTangency:w,theta:v}=Wy({cx:t,cy:a,radius:r,angle:d,sign:-u,cornerRadius:i,cornerIsExternal:o}),C=o?Math.abs(c-d):Math.abs(c-d)-x-v;if(C<0)return l?pa(fF||(fF=Xd(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),p.x,p.y,i,i,i*2,i,i,-i*2):hQ({cx:t,cy:a,innerRadius:s,outerRadius:r,startAngle:c,endAngle:d});var N=pa(hF||(hF=Xd(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),p.x,p.y,i,i,+(u<0),f.x,f.y,r,r,+(C>180),+(u<0),y.x,y.y,i,i,+(u<0),w.x,w.y);if(s>0){var{circleTangency:S,lineTangency:T,theta:k}=Wy({cx:t,cy:a,radius:s,angle:c,sign:u,isExternal:!0,cornerRadius:i,cornerIsExternal:o}),{circleTangency:_,lineTangency:E,theta:A}=Wy({cx:t,cy:a,radius:s,angle:d,sign:-u,isExternal:!0,cornerRadius:i,cornerIsExternal:o}),I=o?Math.abs(c-d):Math.abs(c-d)-k-A;if(I<0&&i===0)return"".concat(N,"L").concat(t,",").concat(a,"Z");N+=pa(gF||(gF=Xd(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),E.x,E.y,i,i,+(u<0),_.x,_.y,s,s,+(I>180),+(u>0),S.x,S.y,i,i,+(u<0),T.x,T.y)}else N+=pa(pF||(pF=Xd(["L",",","Z"])),t,a);return N},kEe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},gQ=e=>{var t=za(e,kEe),{cx:a,cy:s,innerRadius:r,outerRadius:i,cornerRadius:l,forceCornerRadius:o,cornerIsExternal:c,startAngle:d,endAngle:u,className:f}=t;if(i<r||d===u)return null;var p=Tt("recharts-sector",f),x=i-r,y=ks(l,x,0,!0),w;return y>0&&Math.abs(d-u)<360?w=TEe({cx:a,cy:s,innerRadius:r,outerRadius:i,cornerRadius:Math.min(y,x/2),forceCornerRadius:o,cornerIsExternal:c,startAngle:d,endAngle:u}):w=hQ({cx:a,cy:s,innerRadius:r,outerRadius:i,startAngle:d,endAngle:u}),h.createElement("path",BT({},Fs(t),{className:p,d:w}))};function LEe(e,t,a){if(e==="horizontal")return[{x:t.x,y:a.top},{x:t.x,y:a.top+a.height}];if(e==="vertical")return[{x:a.left,y:t.y},{x:a.left+a.width,y:t.y}];if(Yq(t)){if(e==="centric"){var{cx:s,cy:r,innerRadius:i,outerRadius:l,angle:o}=t,c=Oa(s,r,i,o),d=Oa(s,r,l,o);return[{x:c.x,y:c.y},{x:d.x,y:d.y}]}return fQ(t)}}var o_={},c_={},d_={},xF;function PEe(){return xF||(xF=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rY();function a(s){return t.isSymbol(s)?NaN:Number(s)}e.toNumber=a})(d_)),d_}var yF;function DEe(){return yF||(yF=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=PEe();function a(s){return s?(s=t.toNumber(s),s===1/0||s===-1/0?(s<0?-1:1)*Number.MAX_VALUE:s===s?s:0):s===0?s:0}e.toFinite=a})(c_)),c_}var bF;function OEe(){return bF||(bF=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iY(),a=DEe();function s(r,i,l){l&&typeof l!="number"&&t.isIterateeCall(r,i,l)&&(i=l=void 0),r=a.toFinite(r),i===void 0?(i=r,r=0):i=a.toFinite(i),l=l===void 0?r<i?1:-1:a.toFinite(l);const o=Math.max(Math.ceil((i-r)/(l||1)),0),c=new Array(o);for(let d=0;d<o;d++)c[d]=r,r+=l;return c}e.range=s})(o_)),o_}var u_,vF;function MEe(){return vF||(vF=1,u_=OEe().range),u_}var IEe=MEe();const pQ=Hi(IEe),Dg=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:bL,scaleDiverging:wG,scaleDivergingLog:NG,scaleDivergingPow:GL,scaleDivergingSqrt:dhe,scaleDivergingSymlog:jG,scaleIdentity:aG,scaleImplicit:$E,scaleLinear:cN,scaleLog:fp,scaleOrdinal:op,scalePoint:nme,scalePow:dN,scaleQuantile:lG,scaleQuantize:oG,scaleRadial:iG,scaleSequential:BL,scaleSequentialLog:yG,scaleSequentialPow:HL,scaleSequentialQuantile:vG,scaleSequentialSqrt:che,scaleSequentialSymlog:bG,scaleSqrt:rG,scaleSymlog:kL,scaleThreshold:PL,scaleTime:UL,scaleUtc:xG,tickFormat:nG},Symbol.toStringTag,{value:"Module"}));var Vo=e=>e.chartData,gj=nt([Vo],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),l4=(e,t,a,s)=>s?gj(e):Vo(e),$Ee=(e,t,a)=>a?gj(e):Vo(e);function Xc(e){if(Array.isArray(e)&&e.length===2){var[t,a]=e;if(ca(t)&&ca(a))return!0}return!1}function wF(e,t,a){return a?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function xQ(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[a,s]=e,r,i;if(ca(a))r=a;else if(typeof a=="function")return;if(ca(s))i=s;else if(typeof s=="function")return;var l=[r,i];if(Xc(l))return l}}function REe(e,t,a){if(!(!a&&t==null)){if(typeof e=="function"&&t!=null)try{var s=e(t,a);if(Xc(s))return wF(s,t,a)}catch{}if(Array.isArray(e)&&e.length===2){var[r,i]=e,l,o;if(r==="auto")t!=null&&(l=Math.min(...t));else if(Pt(r))l=r;else if(typeof r=="function")try{t!=null&&(l=r(t?.[0]))}catch{}else if(typeof r=="string"&&gz.test(r)){var c=gz.exec(r);if(c==null||c[1]==null||t==null)l=void 0;else{var d=+c[1];l=t[0]-d}}else l=t?.[0];if(i==="auto")t!=null&&(o=Math.max(...t));else if(Pt(i))o=i;else if(typeof i=="function")try{t!=null&&(o=i(t?.[1]))}catch{}else if(typeof i=="string"&&pz.test(i)){var u=pz.exec(i);if(u==null||u[1]==null||t==null)o=void 0;else{var f=+u[1];o=t[1]+f}}else o=t?.[1];var p=[l,o];if(Xc(p))return t==null?p:wF(p,t,a)}}}var Zf=1e9,zEe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},c4,aa=!0,fi="[DecimalError] ",cu=fi+"Invalid argument: ",o4=fi+"Exponent out of range: ",Jf=Math.floor,zd=Math.pow,FEe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Er,is=1e7,Xn=7,yQ=9007199254740991,Kv=Jf(yQ/Xn),kt={};kt.absoluteValue=kt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};kt.comparedTo=kt.cmp=function(e){var t,a,s,r,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(s=i.d.length,r=e.d.length,t=0,a=s<r?s:r;t<a;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return s===r?0:s>r^i.s<0?1:-1};kt.decimalPlaces=kt.dp=function(){var e=this,t=e.d.length-1,a=(t-e.e)*Xn;if(t=e.d[t],t)for(;t%10==0;t/=10)a--;return a<0?0:a};kt.dividedBy=kt.div=function(e){return yo(this,new this.constructor(e))};kt.dividedToIntegerBy=kt.idiv=function(e){var t=this,a=t.constructor;return Bn(yo(t,new a(e),0,1),a.precision)};kt.equals=kt.eq=function(e){return!this.cmp(e)};kt.exponent=function(){return Ia(this)};kt.greaterThan=kt.gt=function(e){return this.cmp(e)>0};kt.greaterThanOrEqualTo=kt.gte=function(e){return this.cmp(e)>=0};kt.isInteger=kt.isint=function(){return this.e>this.d.length-2};kt.isNegative=kt.isneg=function(){return this.s<0};kt.isPositive=kt.ispos=function(){return this.s>0};kt.isZero=function(){return this.s===0};kt.lessThan=kt.lt=function(e){return this.cmp(e)<0};kt.lessThanOrEqualTo=kt.lte=function(e){return this.cmp(e)<1};kt.logarithm=kt.log=function(e){var t,a=this,s=a.constructor,r=s.precision,i=r+5;if(e===void 0)e=new s(10);else if(e=new s(e),e.s<1||e.eq(Er))throw Error(fi+"NaN");if(a.s<1)throw Error(fi+(a.s?"NaN":"-Infinity"));return a.eq(Er)?new s(0):(aa=!1,t=yo(kp(a,i),kp(e,i),i),aa=!0,Bn(t,r))};kt.minus=kt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?wQ(t,e):bQ(t,(e.s=-e.s,e))};kt.modulo=kt.mod=function(e){var t,a=this,s=a.constructor,r=s.precision;if(e=new s(e),!e.s)throw Error(fi+"NaN");return a.s?(aa=!1,t=yo(a,e,0,1).times(e),aa=!0,a.minus(t)):Bn(new s(a),r)};kt.naturalExponential=kt.exp=function(){return vQ(this)};kt.naturalLogarithm=kt.ln=function(){return kp(this)};kt.negated=kt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};kt.plus=kt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?bQ(t,e):wQ(t,(e.s=-e.s,e))};kt.precision=kt.sd=function(e){var t,a,s,r=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(cu+e);if(t=Ia(r)+1,s=r.d.length-1,a=s*Xn+1,s=r.d[s],s){for(;s%10==0;s/=10)a--;for(s=r.d[0];s>=10;s/=10)a++}return e&&t>a?t:a};kt.squareRoot=kt.sqrt=function(){var e,t,a,s,r,i,l,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(fi+"NaN")}for(e=Ia(o),aa=!1,r=Math.sqrt(+o),r==0||r==1/0?(t=gl(o.d),(t.length+e)%2==0&&(t+="0"),r=Math.sqrt(t),e=Jf((e+1)/2)-(e<0||e%2),r==1/0?t="5e"+e:(t=r.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),s=new c(t)):s=new c(r.toString()),a=c.precision,r=l=a+3;;)if(i=s,s=i.plus(yo(o,i,l+2)).times(.5),gl(i.d).slice(0,l)===(t=gl(s.d)).slice(0,l)){if(t=t.slice(l-3,l+1),r==l&&t=="4999"){if(Bn(i,a+1,0),i.times(i).eq(o)){s=i;break}}else if(t!="9999")break;l+=4}return aa=!0,Bn(s,a)};kt.times=kt.mul=function(e){var t,a,s,r,i,l,o,c,d,u=this,f=u.constructor,p=u.d,x=(e=new f(e)).d;if(!u.s||!e.s)return new f(0);for(e.s*=u.s,a=u.e+e.e,c=p.length,d=x.length,c<d&&(i=p,p=x,x=i,l=c,c=d,d=l),i=[],l=c+d,s=l;s--;)i.push(0);for(s=d;--s>=0;){for(t=0,r=c+s;r>s;)o=i[r]+x[s]*p[r-s-1]+t,i[r--]=o%is|0,t=o/is|0;i[r]=(i[r]+t)%is|0}for(;!i[--l];)i.pop();return t?++a:i.shift(),e.d=i,e.e=a,aa?Bn(e,f.precision):e};kt.toDecimalPlaces=kt.todp=function(e,t){var a=this,s=a.constructor;return a=new s(a),e===void 0?a:(Tl(e,0,Zf),t===void 0?t=s.rounding:Tl(t,0,8),Bn(a,e+Ia(a)+1,t))};kt.toExponential=function(e,t){var a,s=this,r=s.constructor;return e===void 0?a=Au(s,!0):(Tl(e,0,Zf),t===void 0?t=r.rounding:Tl(t,0,8),s=Bn(new r(s),e+1,t),a=Au(s,!0,e+1)),a};kt.toFixed=function(e,t){var a,s,r=this,i=r.constructor;return e===void 0?Au(r):(Tl(e,0,Zf),t===void 0?t=i.rounding:Tl(t,0,8),s=Bn(new i(r),e+Ia(r)+1,t),a=Au(s.abs(),!1,e+Ia(s)+1),r.isneg()&&!r.isZero()?"-"+a:a)};kt.toInteger=kt.toint=function(){var e=this,t=e.constructor;return Bn(new t(e),Ia(e)+1,t.rounding)};kt.toNumber=function(){return+this};kt.toPower=kt.pow=function(e){var t,a,s,r,i,l,o=this,c=o.constructor,d=12,u=+(e=new c(e));if(!e.s)return new c(Er);if(o=new c(o),!o.s){if(e.s<1)throw Error(fi+"Infinity");return o}if(o.eq(Er))return o;if(s=c.precision,e.eq(Er))return Bn(o,s);if(t=e.e,a=e.d.length-1,l=t>=a,i=o.s,l){if((a=u<0?-u:u)<=yQ){for(r=new c(Er),t=Math.ceil(s/Xn+4),aa=!1;a%2&&(r=r.times(o),jF(r.d,t)),a=Jf(a/2),a!==0;)o=o.times(o),jF(o.d,t);return aa=!0,e.s<0?new c(Er).div(r):Bn(r,s)}}else if(i<0)throw Error(fi+"NaN");return i=i<0&&e.d[Math.max(t,a)]&1?-1:1,o.s=1,aa=!1,r=e.times(kp(o,s+d)),aa=!0,r=vQ(r),r.s=i,r};kt.toPrecision=function(e,t){var a,s,r=this,i=r.constructor;return e===void 0?(a=Ia(r),s=Au(r,a<=i.toExpNeg||a>=i.toExpPos)):(Tl(e,1,Zf),t===void 0?t=i.rounding:Tl(t,0,8),r=Bn(new i(r),e,t),a=Ia(r),s=Au(r,e<=a||a<=i.toExpNeg,e)),s};kt.toSignificantDigits=kt.tosd=function(e,t){var a=this,s=a.constructor;return e===void 0?(e=s.precision,t=s.rounding):(Tl(e,1,Zf),t===void 0?t=s.rounding:Tl(t,0,8)),Bn(new s(a),e,t)};kt.toString=kt.valueOf=kt.val=kt.toJSON=kt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ia(e),a=e.constructor;return Au(e,t<=a.toExpNeg||t>=a.toExpPos)};function bQ(e,t){var a,s,r,i,l,o,c,d,u=e.constructor,f=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),aa?Bn(t,f):t;if(c=e.d,d=t.d,l=e.e,r=t.e,c=c.slice(),i=l-r,i){for(i<0?(s=c,i=-i,o=d.length):(s=d,r=l,o=c.length),l=Math.ceil(f/Xn),o=l>o?l+1:o+1,i>o&&(i=o,s.length=1),s.reverse();i--;)s.push(0);s.reverse()}for(o=c.length,i=d.length,o-i<0&&(i=o,s=d,d=c,c=s),a=0;i;)a=(c[--i]=c[i]+d[i]+a)/is|0,c[i]%=is;for(a&&(c.unshift(a),++r),o=c.length;c[--o]==0;)c.pop();return t.d=c,t.e=r,aa?Bn(t,f):t}function Tl(e,t,a){if(e!==~~e||e<t||e>a)throw Error(cu+e)}function gl(e){var t,a,s,r=e.length-1,i="",l=e[0];if(r>0){for(i+=l,t=1;t<r;t++)s=e[t]+"",a=Xn-s.length,a&&(i+=Lc(a)),i+=s;l=e[t],s=l+"",a=Xn-s.length,a&&(i+=Lc(a))}else if(l===0)return"0";for(;l%10===0;)l/=10;return i+l}var yo=(function(){function e(s,r){var i,l=0,o=s.length;for(s=s.slice();o--;)i=s[o]*r+l,s[o]=i%is|0,l=i/is|0;return l&&s.unshift(l),s}function t(s,r,i,l){var o,c;if(i!=l)c=i>l?1:-1;else for(o=c=0;o<i;o++)if(s[o]!=r[o]){c=s[o]>r[o]?1:-1;break}return c}function a(s,r,i){for(var l=0;i--;)s[i]-=l,l=s[i]<r[i]?1:0,s[i]=l*is+s[i]-r[i];for(;!s[0]&&s.length>1;)s.shift()}return function(s,r,i,l){var o,c,d,u,f,p,x,y,w,v,C,N,S,T,k,_,E,A,I=s.constructor,z=s.s==r.s?1:-1,F=s.d,D=r.d;if(!s.s)return new I(s);if(!r.s)throw Error(fi+"Division by zero");for(c=s.e-r.e,E=D.length,k=F.length,x=new I(z),y=x.d=[],d=0;D[d]==(F[d]||0);)++d;if(D[d]>(F[d]||0)&&--c,i==null?N=i=I.precision:l?N=i+(Ia(s)-Ia(r))+1:N=i,N<0)return new I(0);if(N=N/Xn+2|0,d=0,E==1)for(u=0,D=D[0],N++;(d<k||u)&&N--;d++)S=u*is+(F[d]||0),y[d]=S/D|0,u=S%D|0;else{for(u=is/(D[0]+1)|0,u>1&&(D=e(D,u),F=e(F,u),E=D.length,k=F.length),T=E,w=F.slice(0,E),v=w.length;v<E;)w[v++]=0;A=D.slice(),A.unshift(0),_=D[0],D[1]>=is/2&&++_;do u=0,o=t(D,w,E,v),o<0?(C=w[0],E!=v&&(C=C*is+(w[1]||0)),u=C/_|0,u>1?(u>=is&&(u=is-1),f=e(D,u),p=f.length,v=w.length,o=t(f,w,p,v),o==1&&(u--,a(f,E<p?A:D,p))):(u==0&&(o=u=1),f=D.slice()),p=f.length,p<v&&f.unshift(0),a(w,f,v),o==-1&&(v=w.length,o=t(D,w,E,v),o<1&&(u++,a(w,E<v?A:D,v))),v=w.length):o===0&&(u++,w=[0]),y[d++]=u,o&&w[0]?w[v++]=F[T]||0:(w=[F[T]],v=1);while((T++<k||w[0]!==void 0)&&N--)}return y[0]||y.shift(),x.e=c,Bn(x,l?i+Ia(x)+1:i)}})();function vQ(e,t){var a,s,r,i,l,o,c=0,d=0,u=e.constructor,f=u.precision;if(Ia(e)>16)throw Error(o4+Ia(e));if(!e.s)return new u(Er);for(aa=!1,o=f,l=new u(.03125);e.abs().gte(.1);)e=e.times(l),d+=5;for(s=Math.log(zd(2,d))/Math.LN10*2+5|0,o+=s,a=r=i=new u(Er),u.precision=o;;){if(r=Bn(r.times(e),o),a=a.times(++c),l=i.plus(yo(r,a,o)),gl(l.d).slice(0,o)===gl(i.d).slice(0,o)){for(;d--;)i=Bn(i.times(i),o);return u.precision=f,t==null?(aa=!0,Bn(i,f)):i}i=l}}function Ia(e){for(var t=e.e*Xn,a=e.d[0];a>=10;a/=10)t++;return t}function m_(e,t,a){if(t>e.LN10.sd())throw aa=!0,a&&(e.precision=a),Error(fi+"LN10 precision limit exceeded");return Bn(new e(e.LN10),t)}function Lc(e){for(var t="";e--;)t+="0";return t}function kp(e,t){var a,s,r,i,l,o,c,d,u,f=1,p=10,x=e,y=x.d,w=x.constructor,v=w.precision;if(x.s<1)throw Error(fi+(x.s?"NaN":"-Infinity"));if(x.eq(Er))return new w(0);if(t==null?(aa=!1,d=v):d=t,x.eq(10))return t==null&&(aa=!0),m_(w,d);if(d+=p,w.precision=d,a=gl(y),s=a.charAt(0),i=Ia(x),Math.abs(i)<15e14){for(;s<7&&s!=1||s==1&&a.charAt(1)>3;)x=x.times(e),a=gl(x.d),s=a.charAt(0),f++;i=Ia(x),s>1?(x=new w("0."+a),i++):x=new w(s+"."+a.slice(1))}else return c=m_(w,d+2,v).times(i+""),x=kp(new w(s+"."+a.slice(1)),d-p).plus(c),w.precision=v,t==null?(aa=!0,Bn(x,v)):x;for(o=l=x=yo(x.minus(Er),x.plus(Er),d),u=Bn(x.times(x),d),r=3;;){if(l=Bn(l.times(u),d),c=o.plus(yo(l,new w(r),d)),gl(c.d).slice(0,d)===gl(o.d).slice(0,d))return o=o.times(2),i!==0&&(o=o.plus(m_(w,d+2,v).times(i+""))),o=yo(o,new w(f),d),w.precision=v,t==null?(aa=!0,Bn(o,v)):o;o=c,r+=2}}function NF(e,t){var a,s,r;for((a=t.indexOf("."))>-1&&(t=t.replace(".","")),(s=t.search(/e/i))>0?(a<0&&(a=s),a+=+t.slice(s+1),t=t.substring(0,s)):a<0&&(a=t.length),s=0;t.charCodeAt(s)===48;)++s;for(r=t.length;t.charCodeAt(r-1)===48;)--r;if(t=t.slice(s,r),t){if(r-=s,a=a-s-1,e.e=Jf(a/Xn),e.d=[],s=(a+1)%Xn,a<0&&(s+=Xn),s<r){for(s&&e.d.push(+t.slice(0,s)),r-=Xn;s<r;)e.d.push(+t.slice(s,s+=Xn));t=t.slice(s),s=Xn-t.length}else s-=r;for(;s--;)t+="0";if(e.d.push(+t),aa&&(e.e>Kv||e.e<-Kv))throw Error(o4+a)}else e.s=0,e.e=0,e.d=[0];return e}function Bn(e,t,a){var s,r,i,l,o,c,d,u,f=e.d;for(l=1,i=f[0];i>=10;i/=10)l++;if(s=t-l,s<0)s+=Xn,r=t,d=f[u=0];else{if(u=Math.ceil((s+1)/Xn),i=f.length,u>=i)return e;for(d=i=f[u],l=1;i>=10;i/=10)l++;s%=Xn,r=s-Xn+l}if(a!==void 0&&(i=zd(10,l-r-1),o=d/i%10|0,c=t<0||f[u+1]!==void 0||d%i,c=a<4?(o||c)&&(a==0||a==(e.s<0?3:2)):o>5||o==5&&(a==4||c||a==6&&(s>0?r>0?d/zd(10,l-r):0:f[u-1])%10&1||a==(e.s<0?8:7))),t<1||!f[0])return c?(i=Ia(e),f.length=1,t=t-i-1,f[0]=zd(10,(Xn-t%Xn)%Xn),e.e=Jf(-t/Xn)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(s==0?(f.length=u,i=1,u--):(f.length=u+1,i=zd(10,Xn-s),f[u]=r>0?(d/zd(10,l-r)%zd(10,r)|0)*i:0),c)for(;;)if(u==0){(f[0]+=i)==is&&(f[0]=1,++e.e);break}else{if(f[u]+=i,f[u]!=is)break;f[u--]=0,i=1}for(s=f.length;f[--s]===0;)f.pop();if(aa&&(e.e>Kv||e.e<-Kv))throw Error(o4+Ia(e));return e}function wQ(e,t){var a,s,r,i,l,o,c,d,u,f,p=e.constructor,x=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),aa?Bn(t,x):t;if(c=e.d,f=t.d,s=t.e,d=e.e,c=c.slice(),l=d-s,l){for(u=l<0,u?(a=c,l=-l,o=f.length):(a=f,s=d,o=c.length),r=Math.max(Math.ceil(x/Xn),o)+2,l>r&&(l=r,a.length=1),a.reverse(),r=l;r--;)a.push(0);a.reverse()}else{for(r=c.length,o=f.length,u=r<o,u&&(o=r),r=0;r<o;r++)if(c[r]!=f[r]){u=c[r]<f[r];break}l=0}for(u&&(a=c,c=f,f=a,t.s=-t.s),o=c.length,r=f.length-o;r>0;--r)c[o++]=0;for(r=f.length;r>l;){if(c[--r]<f[r]){for(i=r;i&&c[--i]===0;)c[i]=is-1;--c[i],c[r]+=is}c[r]-=f[r]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--s;return c[0]?(t.d=c,t.e=s,aa?Bn(t,x):t):new p(0)}function Au(e,t,a){var s,r=Ia(e),i=gl(e.d),l=i.length;return t?(a&&(s=a-l)>0?i=i.charAt(0)+"."+i.slice(1)+Lc(s):l>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(r<0?"e":"e+")+r):r<0?(i="0."+Lc(-r-1)+i,a&&(s=a-l)>0&&(i+=Lc(s))):r>=l?(i+=Lc(r+1-l),a&&(s=a-r-1)>0&&(i=i+"."+Lc(s))):((s=r+1)<l&&(i=i.slice(0,s)+"."+i.slice(s)),a&&(s=a-l)>0&&(r+1===l&&(i+="."),i+=Lc(s))),e.s<0?"-"+i:i}function jF(e,t){if(e.length>t)return e.length=t,!0}function NQ(e){var t,a,s;function r(i){var l=this;if(!(l instanceof r))return new r(i);if(l.constructor=r,i instanceof r){l.s=i.s,l.e=i.e,l.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(cu+i);if(i>0)l.s=1;else if(i<0)i=-i,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(i===~~i&&i<1e7){l.e=0,l.d=[i];return}return NF(l,i.toString())}else if(typeof i!="string")throw Error(cu+i);if(i.charCodeAt(0)===45?(i=i.slice(1),l.s=-1):l.s=1,FEe.test(i))NF(l,i);else throw Error(cu+i)}if(r.prototype=kt,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.clone=NQ,r.config=r.set=UEe,e===void 0&&(e={}),e)for(s=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<s.length;)e.hasOwnProperty(a=s[t++])||(e[a]=this[a]);return r.config(e),r}function UEe(e){if(!e||typeof e!="object")throw Error(fi+"Object expected");var t,a,s,r=["precision",1,Zf,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<r.length;t+=3)if((s=e[a=r[t]])!==void 0)if(Jf(s)===s&&s>=r[t+1]&&s<=r[t+2])this[a]=s;else throw Error(cu+a+": "+s);if((s=e[a="LN10"])!==void 0)if(s==Math.LN10)this[a]=new this(s);else throw Error(cu+a+": "+s);return this}var c4=NQ(zEe);Er=new c4(1);const Pn=c4;var BEe=e=>e,jQ={},CQ=e=>e===jQ,CF=e=>function t(){return arguments.length===0||arguments.length===1&&CQ(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},SQ=(e,t)=>e===1?t:CF(function(){for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];var i=s.filter(l=>l!==jQ).length;return i>=e?t(...s):SQ(e-i,CF(function(){for(var l=arguments.length,o=new Array(l),c=0;c<l;c++)o[c]=arguments[c];var d=s.map(u=>CQ(u)?o.shift():u);return t(...d,...o)}))}),HEe=e=>SQ(e.length,e),HT=(e,t)=>{for(var a=[],s=e;s<t;++s)a[s-e]=s;return a},GEe=HEe((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(a=>t[a]).map(e)),WEe=function(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];if(!a.length)return BEe;var r=a.reverse(),i=r[0],l=r.slice(1);return function(){return l.reduce((o,c)=>c(o),i(...arguments))}};function _Q(e){var t;return e===0?t=1:t=Math.floor(new Pn(e).abs().log(10).toNumber())+1,t}function AQ(e,t,a){for(var s=new Pn(e),r=0,i=[];s.lt(t)&&r<1e5;)i.push(s.toNumber()),s=s.add(a),r++;return i}var EQ=e=>{var[t,a]=e,[s,r]=[t,a];return t>a&&([s,r]=[a,t]),[s,r]},TQ=(e,t,a)=>{if(e.lte(0))return new Pn(0);var s=_Q(e.toNumber()),r=new Pn(10).pow(s),i=e.div(r),l=s!==1?.05:.1,o=new Pn(Math.ceil(i.div(l).toNumber())).add(a).mul(l),c=o.mul(r);return t?new Pn(c.toNumber()):new Pn(Math.ceil(c.toNumber()))},VEe=(e,t,a)=>{var s=new Pn(1),r=new Pn(e);if(!r.isint()&&a){var i=Math.abs(e);i<1?(s=new Pn(10).pow(_Q(e)-1),r=new Pn(Math.floor(r.div(s).toNumber())).mul(s)):i>1&&(r=new Pn(Math.floor(e)))}else e===0?r=new Pn(Math.floor((t-1)/2)):a||(r=new Pn(Math.floor(e)));var l=Math.floor((t-1)/2),o=WEe(GEe(c=>r.add(new Pn(c-l).mul(s)).toNumber()),HT);return o(0,t)},kQ=function(t,a,s,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((a-t)/(s-1)))return{step:new Pn(0),tickMin:new Pn(0),tickMax:new Pn(0)};var l=TQ(new Pn(a).sub(t).div(s-1),r,i),o;t<=0&&a>=0?o=new Pn(0):(o=new Pn(t).add(a).div(2),o=o.sub(new Pn(o).mod(l)));var c=Math.ceil(o.sub(t).div(l).toNumber()),d=Math.ceil(new Pn(a).sub(o).div(l).toNumber()),u=c+d+1;return u>s?kQ(t,a,s,r,i+1):(u<s&&(d=a>0?d+(s-u):d,c=a>0?c:c+(s-u)),{step:l,tickMin:o.sub(new Pn(c).mul(l)),tickMax:o.add(new Pn(d).mul(l))})},qEe=function(t){var[a,s]=t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=Math.max(r,2),[o,c]=EQ([a,s]);if(o===-1/0||c===1/0){var d=c===1/0?[o,...HT(0,r-1).map(()=>1/0)]:[...HT(0,r-1).map(()=>-1/0),c];return a>s?d.reverse():d}if(o===c)return VEe(o,r,i);var{step:u,tickMin:f,tickMax:p}=kQ(o,c,l,i,0),x=AQ(f,p.add(new Pn(.1).mul(u)),u);return a>s?x.reverse():x},YEe=function(t,a){var[s,r]=t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[l,o]=EQ([s,r]);if(l===-1/0||o===1/0)return[s,r];if(l===o)return[l];var c=Math.max(a,2),d=TQ(new Pn(o).sub(l).div(c-1),i,0),u=[...AQ(new Pn(l),new Pn(o),d),o];return i===!1&&(u=u.map(f=>Math.round(f))),s>r?u.reverse():u},LQ=e=>e.rootProps.maxBarSize,QEe=e=>e.rootProps.barGap,PQ=e=>e.rootProps.barCategoryGap,KEe=e=>e.rootProps.barSize,Hx=e=>e.rootProps.stackOffset,DQ=e=>e.rootProps.reverseStackOrder,d4=e=>e.options.chartName,u4=e=>e.rootProps.syncId,OQ=e=>e.rootProps.syncMethod,m4=e=>e.options.eventEmitter,Ma={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},uo={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},_r={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},pj=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},XEe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:uo.angleAxisId,includeHidden:!1,name:void 0,reversed:uo.reversed,scale:uo.scale,tick:uo.tick,tickCount:void 0,ticks:void 0,type:uo.type,unit:void 0},ZEe={allowDataOverflow:_r.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:_r.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:_r.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:_r.scale,tick:_r.tick,tickCount:_r.tickCount,ticks:void 0,type:_r.type,unit:void 0},JEe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:uo.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:uo.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:uo.scale,tick:uo.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},eTe={allowDataOverflow:_r.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:_r.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:_r.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:_r.scale,tick:_r.tick,tickCount:_r.tickCount,ticks:void 0,type:"category",unit:void 0},f4=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?JEe:XEe,h4=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?eTe:ZEe,xj=e=>e.polarOptions,g4=nt([Go,Wo,Ja],mQ),MQ=nt([xj,g4],(e,t)=>{if(e!=null)return ks(e.innerRadius,t,0)}),IQ=nt([xj,g4],(e,t)=>{if(e!=null)return ks(e.outerRadius,t,t*.8)}),tTe=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:a}=e;return[t,a]},$Q=nt([xj],tTe);nt([f4,$Q],pj);var RQ=nt([g4,MQ,IQ],(e,t,a)=>{if(!(e==null||t==null||a==null))return[t,a]});nt([h4,RQ],pj);var zQ=nt([hn,xj,MQ,IQ,Go,Wo],(e,t,a,s,r,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||a==null||s==null)){var{cx:l,cy:o,startAngle:c,endAngle:d}=t;return{cx:ks(l,r,r/2),cy:ks(o,i,i/2),innerRadius:a,outerRadius:s,startAngle:c,endAngle:d,clockWise:!1}}}),la=(e,t)=>t,Gx=(e,t,a)=>a;function p4(e){return e?.id}function FQ(e,t,a){var{chartData:s=[]}=t,{allowDuplicatedCategory:r,dataKey:i}=a,l=new Map;return e.forEach(o=>{var c,d=(c=o.data)!==null&&c!==void 0?c:s;if(!(d==null||d.length===0)){var u=p4(o);d.forEach((f,p)=>{var x=i==null||r?p:String(zn(f,i,null)),y=zn(f,o.dataKey,0),w;l.has(x)?w=l.get(x):w={},Object.assign(w,{[u]:y}),l.set(x,w)})}}),Array.from(l.values())}function yj(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var bj=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function vj(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function nTe(e,t){if(e.length===t.length){for(var a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}return!1}var es=e=>{var t=hn(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},eh=e=>e.tooltip.settings.axisId;function SF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Xv(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?SF(Object(a),!0).forEach(function(s){aTe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):SF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function aTe(e,t,a){return(t=sTe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function sTe(e){var t=rTe(e,"string");return typeof t=="symbol"?t:t+""}function rTe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var GT=[0,"auto"],ss={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},UQ=(e,t)=>e.cartesianAxis.xAxis[t],qo=(e,t)=>{var a=UQ(e,t);return a??ss},rs={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:GT,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:zx},BQ=(e,t)=>e.cartesianAxis.yAxis[t],Yo=(e,t)=>{var a=BQ(e,t);return a??rs},iTe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},x4=(e,t)=>{var a=e.cartesianAxis.zAxis[t];return a??iTe},ua=(e,t,a)=>{switch(t){case"xAxis":return qo(e,a);case"yAxis":return Yo(e,a);case"zAxis":return x4(e,a);case"angleAxis":return f4(e,a);case"radiusAxis":return h4(e,a);default:throw new Error("Unexpected axis type: ".concat(t))}},lTe=(e,t,a)=>{switch(t){case"xAxis":return qo(e,a);case"yAxis":return Yo(e,a);default:throw new Error("Unexpected axis type: ".concat(t))}},Wx=(e,t,a)=>{switch(t){case"xAxis":return qo(e,a);case"yAxis":return Yo(e,a);case"angleAxis":return f4(e,a);case"radiusAxis":return h4(e,a);default:throw new Error("Unexpected axis type: ".concat(t))}},HQ=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function y4(e,t){return a=>{switch(e){case"xAxis":return"xAxisId"in a&&a.xAxisId===t;case"yAxis":return"yAxisId"in a&&a.yAxisId===t;case"zAxis":return"zAxisId"in a&&a.zAxisId===t;case"angleAxis":return"angleAxisId"in a&&a.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in a&&a.radiusAxisId===t;default:return!1}}}var wj=e=>e.graphicalItems.cartesianItems,oTe=nt([la,Gx],y4),b4=(e,t,a)=>e.filter(a).filter(s=>t?.includeHidden===!0?!0:!s.hide),Vx=nt([wj,ua,oTe],b4,{memoizeOptions:{resultEqualityCheck:vj}}),GQ=nt([Vx],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(yj)),WQ=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),cTe=nt([Vx],WQ),v4=e=>e.map(t=>t.data).filter(Boolean).flat(1),dTe=nt([Vx],v4,{memoizeOptions:{resultEqualityCheck:vj}}),w4=(e,t)=>{var{chartData:a=[],dataStartIndex:s,dataEndIndex:r}=t;return e.length>0?e:a.slice(s,r+1)},N4=nt([dTe,l4],w4),j4=(e,t,a)=>t?.dataKey!=null?e.map(s=>({value:zn(s,t.dataKey)})):a.length>0?a.map(s=>s.dataKey).flatMap(s=>e.map(r=>({value:zn(r,s)}))):e.map(s=>({value:s})),Nj=nt([N4,ua,Vx],j4);function VQ(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Gb(e){if(Al(e)||e instanceof Date){var t=Number(e);if(ca(t))return t}}function _F(e){if(Array.isArray(e)){var t=[Gb(e[0]),Gb(e[1])];return Xc(t)?t:void 0}var a=Gb(e);if(a!=null)return[a,a]}function Do(e){return e.map(Gb).filter(VCe)}function uTe(e,t,a){return!a||typeof t!="number"||Ui(t)?[]:a.length?Do(a.flatMap(s=>{var r=zn(e,s.dataKey),i,l;if(Array.isArray(r)?[i,l]=r:i=l=r,!(!ca(i)||!ca(l)))return[t-i,t+l]})):[]}var ts=e=>{var t=es(e),a=eh(e);return Wx(e,t,a)},qx=nt([ts],e=>e?.dataKey),mTe=nt([GQ,l4,ts],FQ),qQ=(e,t,a,s)=>{var r={},i=t.reduce((l,o)=>{if(o.stackId==null)return l;var c=l[o.stackId];return c==null&&(c=[]),c.push(o),l[o.stackId]=c,l},r);return Object.fromEntries(Object.entries(i).map(l=>{var[o,c]=l,d=s?[...c].reverse():c,u=d.map(p4);return[o,{stackedData:s_e(e,u,a),graphicalItems:d}]}))},WT=nt([mTe,GQ,Hx,DQ],qQ),YQ=(e,t,a,s)=>{var{dataStartIndex:r,dataEndIndex:i}=t;if(s==null&&a!=="zAxis"){var l=c_e(e,r,i);if(!(l!=null&&l[0]===0&&l[1]===0))return l}},fTe=nt([ua],e=>e.allowDataOverflow),C4=e=>{var t;if(e==null||!("domain"in e))return GT;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var a=Do(e.ticks);return[Math.min(...a),Math.max(...a)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:GT},S4=nt([ua],C4),_4=nt([S4,fTe],xQ),hTe=nt([WT,Vo,la,_4],YQ,{memoizeOptions:{resultEqualityCheck:bj}}),jj=e=>e.errorBars,gTe=(e,t,a)=>e.flatMap(s=>t[s.id]).filter(Boolean).filter(s=>VQ(a,s)),Zv=function(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];var r=a.filter(Boolean);if(r.length!==0){var i=r.flat(),l=Math.min(...i),o=Math.max(...i);return[l,o]}},A4=(e,t,a,s,r)=>{var i,l;if(a.length>0&&e.forEach(o=>{a.forEach(c=>{var d,u,f=(d=s[c.id])===null||d===void 0?void 0:d.filter(C=>VQ(r,C)),p=zn(o,(u=t.dataKey)!==null&&u!==void 0?u:c.dataKey),x=uTe(o,p,f);if(x.length>=2){var y=Math.min(...x),w=Math.max(...x);(i==null||y<i)&&(i=y),(l==null||w>l)&&(l=w)}var v=_F(p);v!=null&&(i=i==null?v[0]:Math.min(i,v[0]),l=l==null?v[1]:Math.max(l,v[1]))})}),t?.dataKey!=null&&e.forEach(o=>{var c=_F(zn(o,t.dataKey));c!=null&&(i=i==null?c[0]:Math.min(i,c[0]),l=l==null?c[1]:Math.max(l,c[1]))}),ca(i)&&ca(l))return[i,l]},pTe=nt([N4,ua,cTe,jj,la],A4,{memoizeOptions:{resultEqualityCheck:bj}});function xTe(e){var{value:t}=e;if(Al(t)||t instanceof Date)return t}var yTe=(e,t,a)=>{var s=e.map(xTe).filter(r=>r!=null);return a&&(t.dataKey==null||t.allowDuplicatedCategory&&Wq(s))?pQ(0,e.length):t.allowDuplicatedCategory?s:Array.from(new Set(s))},QQ=e=>e.referenceElements.dots,th=(e,t,a)=>e.filter(s=>s.ifOverflow==="extendDomain").filter(s=>t==="xAxis"?s.xAxisId===a:s.yAxisId===a),bTe=nt([QQ,la,Gx],th),KQ=e=>e.referenceElements.areas,vTe=nt([KQ,la,Gx],th),XQ=e=>e.referenceElements.lines,wTe=nt([XQ,la,Gx],th),ZQ=(e,t)=>{if(e!=null){var a=Do(e.map(s=>t==="xAxis"?s.x:s.y));if(a.length!==0)return[Math.min(...a),Math.max(...a)]}},NTe=nt(bTe,la,ZQ),JQ=(e,t)=>{if(e!=null){var a=Do(e.flatMap(s=>[t==="xAxis"?s.x1:s.y1,t==="xAxis"?s.x2:s.y2]));if(a.length!==0)return[Math.min(...a),Math.max(...a)]}},jTe=nt([vTe,la],JQ);function CTe(e){var t;if(e.x!=null)return Do([e.x]);var a=(t=e.segment)===null||t===void 0?void 0:t.map(s=>s.x);return a==null||a.length===0?[]:Do(a)}function STe(e){var t;if(e.y!=null)return Do([e.y]);var a=(t=e.segment)===null||t===void 0?void 0:t.map(s=>s.y);return a==null||a.length===0?[]:Do(a)}var eK=(e,t)=>{if(e!=null){var a=e.flatMap(s=>t==="xAxis"?CTe(s):STe(s));if(a.length!==0)return[Math.min(...a),Math.max(...a)]}},_Te=nt([wTe,la],eK),ATe=nt(NTe,_Te,jTe,(e,t,a)=>Zv(e,a,t)),E4=(e,t,a,s,r,i,l,o)=>{if(a!=null)return a;var c=l==="vertical"&&o==="xAxis"||l==="horizontal"&&o==="yAxis",d=c?Zv(s,i,r):Zv(i,r);return REe(t,d,e.allowDataOverflow)},ETe=nt([ua,S4,_4,hTe,pTe,ATe,hn,la],E4,{memoizeOptions:{resultEqualityCheck:bj}}),TTe=[0,1],T4=(e,t,a,s,r,i,l)=>{if(!((e==null||a==null||a.length===0)&&l===void 0)){var{dataKey:o,type:c}=e,d=md(t,i);if(d&&o==null){var u;return pQ(0,(u=a?.length)!==null&&u!==void 0?u:0)}return c==="category"?yTe(s,e,d):r==="expand"?TTe:l}},k4=nt([ua,hn,N4,Nj,Hx,la,ETe],T4),tK=(e,t,a,s,r)=>{if(e!=null){var{scale:i,type:l}=e;if(i==="auto")return t==="radial"&&r==="radiusAxis"?"band":t==="radial"&&r==="angleAxis"?"linear":l==="category"&&s&&(s.indexOf("LineChart")>=0||s.indexOf("AreaChart")>=0||s.indexOf("ComposedChart")>=0&&!a)?"point":l==="category"?"band":"linear";if(typeof i=="string"){var o="scale".concat(Dx(i));return o in Dg?o:"point"}}},nh=nt([ua,hn,HQ,d4,la],tK);function kTe(e){if(e!=null){if(e in Dg)return Dg[e]();var t="scale".concat(Dx(e));if(t in Dg)return Dg[t]()}}function L4(e,t,a,s){if(!(a==null||s==null)){if(typeof e.scale=="function")return e.scale.copy().domain(a).range(s);var r=kTe(t);if(r!=null){var i=r.domain(a).range(s);return J2e(i),i}}}var P4=(e,t,a)=>{var s=C4(t);if(!(a!=="auto"&&a!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(s)&&(s[0]==="auto"||s[1]==="auto")&&Xc(e))return qEe(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Xc(e))return YEe(e,t.tickCount,t.allowDecimals)}},D4=nt([k4,Wx,nh],P4),O4=(e,t,a,s)=>{if(s!=="angleAxis"&&e?.type==="number"&&Xc(t)&&Array.isArray(a)&&a.length>0){var r=t[0],i=a[0],l=t[1],o=a[a.length-1];return[Math.min(r,i),Math.max(l,o)]}return t},LTe=nt([ua,k4,D4,la],O4),PTe=nt(Nj,ua,(e,t)=>{if(!(!t||t.type!=="number")){var a=1/0,s=Array.from(Do(e.map(f=>f.value))).sort((f,p)=>f-p),r=s[0],i=s[s.length-1];if(r==null||i==null)return 1/0;var l=i-r;if(l===0)return 1/0;for(var o=0;o<s.length-1;o++){var c=s[o],d=s[o+1];if(!(c==null||d==null)){var u=d-c;a=Math.min(a,u)}}return a/l}}),nK=nt(PTe,hn,PQ,Ja,(e,t,a,s,r)=>r,(e,t,a,s,r)=>{if(!ca(e))return 0;var i=t==="vertical"?s.height:s.width;if(r==="gap")return e*i/2;if(r==="no-gap"){var l=ks(a,e*i),o=e*i/2;return o-l-(o-l)/i*l}return 0}),DTe=(e,t,a)=>{var s=qo(e,t);return s==null||typeof s.padding!="string"?0:nK(e,"xAxis",t,a,s.padding)},OTe=(e,t,a)=>{var s=Yo(e,t);return s==null||typeof s.padding!="string"?0:nK(e,"yAxis",t,a,s.padding)},MTe=nt(qo,DTe,(e,t)=>{var a,s;if(e==null)return{left:0,right:0};var{padding:r}=e;return typeof r=="string"?{left:t,right:t}:{left:((a=r.left)!==null&&a!==void 0?a:0)+t,right:((s=r.right)!==null&&s!==void 0?s:0)+t}}),ITe=nt(Yo,OTe,(e,t)=>{var a,s;if(e==null)return{top:0,bottom:0};var{padding:r}=e;return typeof r=="string"?{top:t,bottom:t}:{top:((a=r.top)!==null&&a!==void 0?a:0)+t,bottom:((s=r.bottom)!==null&&s!==void 0?s:0)+t}}),$Te=nt([Ja,MTe,oj,lj,(e,t,a)=>a],(e,t,a,s,r)=>{var{padding:i}=s;return r?[i.left,a.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),RTe=nt([Ja,hn,ITe,oj,lj,(e,t,a)=>a],(e,t,a,s,r,i)=>{var{padding:l}=r;return i?[s.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-a.bottom,e.top+a.top]:[e.top+a.top,e.top+e.height-a.bottom]}),Yx=(e,t,a,s)=>{var r;switch(t){case"xAxis":return $Te(e,a,s);case"yAxis":return RTe(e,a,s);case"zAxis":return(r=x4(e,a))===null||r===void 0?void 0:r.range;case"angleAxis":return $Q(e);case"radiusAxis":return RQ(e,a);default:return}},aK=nt([ua,Yx],pj),Cj=nt([ua,nh,LTe,aK],L4);nt([Vx,jj,la],gTe);function sK(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Sj=(e,t)=>t,_j=(e,t,a)=>a,zTe=nt(rj,Sj,_j,(e,t,a)=>e.filter(s=>s.orientation===t).filter(s=>s.mirror===a).sort(sK)),FTe=nt(ij,Sj,_j,(e,t,a)=>e.filter(s=>s.orientation===t).filter(s=>s.mirror===a).sort(sK)),rK=(e,t)=>({width:e.width,height:t.height}),UTe=(e,t)=>{var a=typeof t.width=="number"?t.width:zx;return{width:a,height:e.height}},iK=nt(Ja,qo,rK),BTe=(e,t,a)=>{switch(t){case"top":return e.top;case"bottom":return a-e.bottom;default:return 0}},HTe=(e,t,a)=>{switch(t){case"left":return e.left;case"right":return a-e.right;default:return 0}},GTe=nt(Wo,Ja,zTe,Sj,_j,(e,t,a,s,r)=>{var i={},l;return a.forEach(o=>{var c=rK(t,o);l==null&&(l=BTe(t,s,e));var d=s==="top"&&!r||s==="bottom"&&r;i[o.id]=l-Number(d)*c.height,l+=(d?-1:1)*c.height}),i}),WTe=nt(Go,Ja,FTe,Sj,_j,(e,t,a,s,r)=>{var i={},l;return a.forEach(o=>{var c=UTe(t,o);l==null&&(l=HTe(t,s,e));var d=s==="left"&&!r||s==="right"&&r;i[o.id]=l-Number(d)*c.width,l+=(d?-1:1)*c.width}),i}),VTe=(e,t)=>{var a=qo(e,t);if(a!=null)return GTe(e,a.orientation,a.mirror)},qTe=nt([Ja,qo,VTe,(e,t)=>t],(e,t,a,s)=>{if(t!=null){var r=a?.[s];return r==null?{x:e.left,y:0}:{x:e.left,y:r}}}),YTe=(e,t)=>{var a=Yo(e,t);if(a!=null)return WTe(e,a.orientation,a.mirror)},QTe=nt([Ja,Yo,YTe,(e,t)=>t],(e,t,a,s)=>{if(t!=null){var r=a?.[s];return r==null?{x:0,y:e.top}:{x:r,y:e.top}}}),lK=nt(Ja,Yo,(e,t)=>{var a=typeof t.width=="number"?t.width:zx;return{width:a,height:e.height}}),AF=(e,t,a)=>{switch(t){case"xAxis":return iK(e,a).width;case"yAxis":return lK(e,a).height;default:return}},oK=(e,t,a,s)=>{if(a!=null){var{allowDuplicatedCategory:r,type:i,dataKey:l}=a,o=md(e,s),c=t.map(d=>d.value);if(l&&o&&i==="category"&&r&&Wq(c))return c}},M4=nt([hn,Nj,ua,la],oK),cK=(e,t,a,s)=>{if(!(a==null||a.dataKey==null)){var{type:r,scale:i}=a,l=md(e,s);if(l&&(r==="number"||i!=="auto"))return t.map(o=>o.value)}},I4=nt([hn,Nj,Wx,la],cK),EF=nt([hn,lTe,nh,Cj,M4,I4,Yx,D4,la],(e,t,a,s,r,i,l,o,c)=>{if(t!=null){var d=md(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:i,duplicateDomain:r,isCategorical:d,niceTicks:o,range:l,realScaleType:a,scale:s}}}),KTe=(e,t,a,s,r,i,l,o,c)=>{if(!(t==null||s==null)){var d=md(e,c),{type:u,ticks:f,tickCount:p}=t,x=a==="scaleBand"&&typeof s.bandwidth=="function"?s.bandwidth()/2:2,y=u==="category"&&s.bandwidth?s.bandwidth()/x:0;y=c==="angleAxis"&&i!=null&&i.length>=2?cs(i[0]-i[1])*2*y:y;var w=f||r;if(w){var v=w.map((C,N)=>{var S=l?l.indexOf(C):C;return{index:N,coordinate:s(S)+y,value:C,offset:y}});return v.filter(C=>ca(C.coordinate))}return d&&o?o.map((C,N)=>({coordinate:s(C)+y,value:C,index:N,offset:y})).filter(C=>ca(C.coordinate)):s.ticks?s.ticks(p).map(C=>({coordinate:s(C)+y,value:C,offset:y})):s.domain().map((C,N)=>({coordinate:s(C)+y,value:l?l[C]:C,index:N,offset:y}))}},dK=nt([hn,Wx,nh,Cj,D4,Yx,M4,I4,la],KTe),XTe=(e,t,a,s,r,i,l)=>{if(!(t==null||a==null||s==null||s[0]===s[1])){var o=md(e,l),{tickCount:c}=t,d=0;return d=l==="angleAxis"&&s?.length>=2?cs(s[0]-s[1])*2*d:d,o&&i?i.map((u,f)=>({coordinate:a(u)+d,value:u,index:f,offset:d})):a.ticks?a.ticks(c).map(u=>({coordinate:a(u)+d,value:u,offset:d})):a.domain().map((u,f)=>({coordinate:a(u)+d,value:r?r[u]:u,index:f,offset:d}))}},Zc=nt([hn,Wx,Cj,Yx,M4,I4,la],XTe),Jc=nt(ua,Cj,(e,t)=>{if(!(e==null||t==null))return Xv(Xv({},e),{},{scale:t})}),ZTe=nt([ua,nh,k4,aK],L4);nt((e,t,a)=>x4(e,a),ZTe,(e,t)=>{if(!(e==null||t==null))return Xv(Xv({},e),{},{scale:t})});var JTe=nt([hn,rj,ij],(e,t,a)=>{switch(e){case"horizontal":return t.some(s=>s.reversed)?"right-to-left":"left-to-right";case"vertical":return a.some(s=>s.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),uK=e=>e.options.defaultTooltipEventType,mK=e=>e.options.validateTooltipEventTypes;function fK(e,t,a){if(e==null)return t;var s=e?"axis":"item";return a==null?t:a.includes(s)?s:t}function $4(e,t){var a=uK(e),s=mK(e);return fK(t,a,s)}function eke(e){return Ot(t=>$4(t,e))}var hK=(e,t)=>{var a,s=Number(t);if(!(Ui(s)||t==null))return s>=0?e==null||(a=e[s])===null||a===void 0?void 0:a.value:void 0},tke=e=>e.tooltip.settings,Oc={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},nke={itemInteraction:{click:Oc,hover:Oc},axisInteraction:{click:Oc,hover:Oc},keyboardInteraction:Oc,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},gK=fr({name:"tooltip",initialState:nke,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:ta()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:a,next:s}=t.payload,r=$i(e).tooltipItemPayloads.indexOf(a);r>-1&&(e.tooltipItemPayloads[r]=s)},prepare:ta()},removeTooltipEntrySettings:{reducer(e,t){var a=$i(e).tooltipItemPayloads.indexOf(t.payload);a>-1&&e.tooltipItemPayloads.splice(a,1)},prepare:ta()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:ake,replaceTooltipEntrySettings:ske,removeTooltipEntrySettings:rke,setTooltipSettingsState:ike,setActiveMouseOverItemIndex:pK,mouseLeaveItem:lke,mouseLeaveChart:xK,setActiveClickItemIndex:oke,setMouseOverAxisIndex:yK,setMouseClickAxisIndex:cke,setSyncInteraction:VT,setKeyboardInteraction:qT}=gK.actions,dke=gK.reducer;function TF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Vy(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?TF(Object(a),!0).forEach(function(s){uke(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):TF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function uke(e,t,a){return(t=mke(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function mke(e){var t=fke(e,"string");return typeof t=="symbol"?t:t+""}function fke(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hke(e,t,a){return t==="axis"?a==="click"?e.axisInteraction.click:e.axisInteraction.hover:a==="click"?e.itemInteraction.click:e.itemInteraction.hover}function gke(e){return e.index!=null}var bK=(e,t,a,s)=>{if(t==null)return Oc;var r=hke(e,t,a);if(r==null)return Oc;if(r.active)return r;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(gke(r)){if(i)return Vy(Vy({},r),{},{active:!0})}else if(s!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:s,graphicalItemId:void 0};return Vy(Vy({},Oc),{},{coordinate:r.coordinate})};function pke(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var a=Number(e);return Number.isFinite(a)?a:void 0}function xke(e,t){var a=pke(e),s=t[0],r=t[1];if(a===void 0)return!1;var i=Math.min(s,r),l=Math.max(s,r);return a>=i&&a<=l}function yke(e,t,a){if(a==null||t==null)return!0;var s=zn(e,t);return s==null||!Xc(a)?!0:xke(s,a)}var R4=(e,t,a,s)=>{var r=e?.index;if(r==null)return null;var i=Number(r);if(!ca(i))return r;var l=0,o=1/0;t.length>0&&(o=t.length-1);var c=Math.max(l,Math.min(i,o)),d=t[c];return d==null||yke(d,a,s)?String(c):null},vK=(e,t,a,s,r,i,l,o)=>{if(!(i==null||o==null)){var c=l[0],d=c==null?void 0:o(c.positions,i);if(d!=null)return d;var u=r?.[Number(i)];if(u)return a==="horizontal"?{x:u.coordinate,y:(s.top+t)/2}:{x:(s.left+e)/2,y:u.coordinate}}},wK=(e,t,a,s)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var r;if(a==="hover"?r=e.itemInteraction.hover.graphicalItemId:r=e.itemInteraction.click.graphicalItemId,r==null&&s!=null){var i=e.tooltipItemPayloads[0];return i!=null?[i]:[]}return e.tooltipItemPayloads.filter(l=>{var o;return((o=l.settings)===null||o===void 0?void 0:o.graphicalItemId)===r})},Qx=e=>e.options.tooltipPayloadSearcher,ah=e=>e.tooltip;function kF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function LF(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?kF(Object(a),!0).forEach(function(s){bke(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):kF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function bke(e,t,a){return(t=vke(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function vke(e){var t=wke(e,"string");return typeof t=="symbol"?t:t+""}function wke(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nke(e,t){return e??t}var NK=(e,t,a,s,r,i,l)=>{if(!(t==null||i==null)){var{chartData:o,computedData:c,dataStartIndex:d,dataEndIndex:u}=a,f=[];return e.reduce((p,x)=>{var y,{dataDefinedOnItem:w,settings:v}=x,C=Nke(w,o),N=Array.isArray(C)?RY(C,d,u):C,S=(y=v?.dataKey)!==null&&y!==void 0?y:s,T=v?.nameKey,k;if(s&&Array.isArray(N)&&!Array.isArray(N[0])&&l==="axis"?k=Vq(N,s,r):k=i(N,t,c,T),Array.isArray(k))k.forEach(E=>{var A=LF(LF({},v),{},{name:E.name,unit:E.unit,color:void 0,fill:void 0});p.push(xz({tooltipEntrySettings:A,dataKey:E.dataKey,payload:E.payload,value:zn(E.payload,E.dataKey),name:E.name}))});else{var _;p.push(xz({tooltipEntrySettings:v,dataKey:S,payload:k,value:zn(k,S),name:(_=zn(k,T))!==null&&_!==void 0?_:v?.name}))}return p},f)}},z4=nt([ts,hn,HQ,d4,es],tK),jke=nt([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),Cke=nt([es,eh],y4),sh=nt([jke,ts,Cke],b4,{memoizeOptions:{resultEqualityCheck:vj}}),Ske=nt([sh],e=>e.filter(yj)),_ke=nt([sh],v4,{memoizeOptions:{resultEqualityCheck:vj}}),rh=nt([_ke,Vo],w4),Ake=nt([Ske,Vo,ts],FQ),F4=nt([rh,ts,sh],j4),jK=nt([ts],C4),Eke=nt([ts],e=>e.allowDataOverflow),CK=nt([jK,Eke],xQ),Tke=nt([sh],e=>e.filter(yj)),kke=nt([Ake,Tke,Hx,DQ],qQ),Lke=nt([kke,Vo,es,CK],YQ),Pke=nt([sh],WQ),Dke=nt([rh,ts,Pke,jj,es],A4,{memoizeOptions:{resultEqualityCheck:bj}}),Oke=nt([QQ,es,eh],th),Mke=nt([Oke,es],ZQ),Ike=nt([KQ,es,eh],th),$ke=nt([Ike,es],JQ),Rke=nt([XQ,es,eh],th),zke=nt([Rke,es],eK),Fke=nt([Mke,zke,$ke],Zv),Uke=nt([ts,jK,CK,Lke,Dke,Fke,hn,es],E4),Kx=nt([ts,hn,rh,F4,Hx,es,Uke],T4),Bke=nt([Kx,ts,z4],P4),Hke=nt([ts,Kx,Bke,es],O4),SK=e=>{var t=es(e),a=eh(e),s=!1;return Yx(e,t,a,s)},_K=nt([ts,SK],pj),AK=nt([ts,z4,Hke,_K],L4),Gke=nt([hn,F4,ts,es],oK),Wke=nt([hn,F4,ts,es],cK),Vke=(e,t,a,s,r,i,l,o)=>{if(t){var{type:c}=t,d=md(e,o);if(s){var u=a==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,f=c==="category"&&s.bandwidth?s.bandwidth()/u:0;return f=o==="angleAxis"&&r!=null&&r?.length>=2?cs(r[0]-r[1])*2*f:f,d&&l?l.map((p,x)=>({coordinate:s(p)+f,value:p,index:x,offset:f})):s.domain().map((p,x)=>({coordinate:s(p)+f,value:i?i[p]:p,index:x,offset:f}))}}},Qo=nt([hn,ts,z4,AK,SK,Gke,Wke,es],Vke),U4=nt([uK,mK,tke],(e,t,a)=>fK(a.shared,e,t)),EK=e=>e.tooltip.settings.trigger,B4=e=>e.tooltip.settings.defaultIndex,Xx=nt([ah,U4,EK,B4],bK),ed=nt([Xx,rh,qx,Kx],R4),TK=nt([Qo,ed],hK),H4=nt([Xx],e=>{if(e)return e.dataKey}),qke=nt([Xx],e=>{if(e)return e.graphicalItemId}),kK=nt([ah,U4,EK,B4],wK),Yke=nt([Go,Wo,hn,Ja,Qo,B4,kK,Qx],vK),Qke=nt([Xx,Yke],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),Kke=nt([Xx],e=>{var t;return(t=e?.active)!==null&&t!==void 0?t:!1}),Xke=nt([kK,ed,Vo,qx,TK,Qx,U4],NK),Zke=nt([Xke],e=>{if(e!=null){var t=e.map(a=>a.payload).filter(a=>a!=null);return Array.from(new Set(t))}});function PF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function DF(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?PF(Object(a),!0).forEach(function(s){Jke(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):PF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function Jke(e,t,a){return(t=eLe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function eLe(e){var t=tLe(e,"string");return typeof t=="symbol"?t:t+""}function tLe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nLe=()=>Ot(ts),aLe=()=>{var e=nLe(),t=Ot(Qo),a=Ot(AK);return Af(!e||!a?void 0:DF(DF({},e),{},{scale:a}),t)};function OF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function $m(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?OF(Object(a),!0).forEach(function(s){sLe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):OF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function sLe(e,t,a){return(t=rLe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function rLe(e){var t=iLe(e,"string");return typeof t=="symbol"?t:t+""}function iLe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lLe=(e,t,a,s)=>{var r=t.find(i=>i&&i.index===a);if(r){if(e==="horizontal")return{x:r.coordinate,y:s.chartY};if(e==="vertical")return{x:s.chartX,y:r.coordinate}}return{x:0,y:0}},oLe=(e,t,a,s)=>{var r=t.find(d=>d&&d.index===a);if(r){if(e==="centric"){var i=r.coordinate,{radius:l}=s;return $m($m($m({},s),Oa(s.cx,s.cy,l,i)),{},{angle:i,radius:l})}var o=r.coordinate,{angle:c}=s;return $m($m($m({},s),Oa(s.cx,s.cy,o,c)),{},{angle:c,radius:o})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function cLe(e,t){var{chartX:a,chartY:s}=e;return a>=t.left&&a<=t.left+t.width&&s>=t.top&&s<=t.top+t.height}var LK=(e,t,a,s,r)=>{var i,l=(i=t?.length)!==null&&i!==void 0?i:0;if(l<=1||e==null)return 0;if(s==="angleAxis"&&r!=null&&Math.abs(Math.abs(r[1]-r[0])-360)<=1e-6)for(var o=0;o<l;o++){var c,d,u,f,p,x=o>0?(c=a[o-1])===null||c===void 0?void 0:c.coordinate:(d=a[l-1])===null||d===void 0?void 0:d.coordinate,y=(u=a[o])===null||u===void 0?void 0:u.coordinate,w=o>=l-1?(f=a[0])===null||f===void 0?void 0:f.coordinate:(p=a[o+1])===null||p===void 0?void 0:p.coordinate,v=void 0;if(!(x==null||y==null||w==null))if(cs(y-x)!==cs(w-y)){var C=[];if(cs(w-y)===cs(r[1]-r[0])){v=w;var N=y+r[1]-r[0];C[0]=Math.min(N,(N+x)/2),C[1]=Math.max(N,(N+x)/2)}else{v=x;var S=w+r[1]-r[0];C[0]=Math.min(y,(S+y)/2),C[1]=Math.max(y,(S+y)/2)}var T=[Math.min(y,(v+y)/2),Math.max(y,(v+y)/2)];if(e>T[0]&&e<=T[1]||e>=C[0]&&e<=C[1]){var k;return(k=a[o])===null||k===void 0?void 0:k.index}}else{var _=Math.min(x,w),E=Math.max(x,w);if(e>(_+y)/2&&e<=(E+y)/2){var A;return(A=a[o])===null||A===void 0?void 0:A.index}}}else if(t)for(var I=0;I<l;I++){var z=t[I];if(z!=null){var F=t[I+1],D=t[I-1];if(I===0&&F!=null&&e<=(z.coordinate+F.coordinate)/2||I===l-1&&D!=null&&e>(z.coordinate+D.coordinate)/2||I>0&&I<l-1&&D!=null&&F!=null&&e>(z.coordinate+D.coordinate)/2&&e<=(z.coordinate+F.coordinate)/2)return z.index}}return-1},dLe=()=>Ot(d4),G4=(e,t)=>t,PK=(e,t,a)=>a,W4=(e,t,a,s)=>s,uLe=nt(Qo,e=>KN(e,t=>t.coordinate)),V4=nt([ah,G4,PK,W4],bK),q4=nt([V4,rh,qx,Kx],R4),mLe=(e,t,a)=>{if(t!=null){var s=ah(e);return t==="axis"?a==="hover"?s.axisInteraction.hover.dataKey:s.axisInteraction.click.dataKey:a==="hover"?s.itemInteraction.hover.dataKey:s.itemInteraction.click.dataKey}},DK=nt([ah,G4,PK,W4],wK),Jv=nt([Go,Wo,hn,Ja,Qo,W4,DK,Qx],vK),fLe=nt([V4,Jv],(e,t)=>{var a;return(a=e.coordinate)!==null&&a!==void 0?a:t}),OK=nt([Qo,q4],hK),hLe=nt([DK,q4,Vo,qx,OK,Qx,G4],NK),gLe=nt([V4,q4],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),pLe=(e,t,a,s,r,i,l)=>{if(!(!e||!a||!s||!r)&&cLe(e,l)){var o=d_e(e,t),c=LK(o,i,r,a,s),d=lLe(t,r,c,e);return{activeIndex:String(c),activeCoordinate:d}}},xLe=(e,t,a,s,r,i,l)=>{if(!(!e||!s||!r||!i||!a)){var o=AEe(e,a);if(o){var c=u_e(o,t),d=LK(c,l,i,s,r),u=oLe(t,i,d,o);return{activeIndex:String(d),activeCoordinate:u}}}},yLe=(e,t,a,s,r,i,l,o)=>{if(!(!e||!t||!s||!r||!i))return t==="horizontal"||t==="vertical"?pLe(e,t,s,r,i,l,o):xLe(e,t,a,s,r,i,l)},bLe=nt(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,a)=>a,(e,t,a)=>{if(t!=null){var s=e[t];if(s!=null)return a?s.panoramaElement:s.element}}),vLe=nt(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(s=>parseInt(s,10)).concat(Object.values(Ma)),a=Array.from(new Set(t));return a.sort((s,r)=>s-r)},{memoizeOptions:{resultEqualityCheck:nTe}});function MF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function IF(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?MF(Object(a),!0).forEach(function(s){wLe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):MF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function wLe(e,t,a){return(t=NLe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function NLe(e){var t=jLe(e,"string");return typeof t=="symbol"?t:t+""}function jLe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var CLe={},SLe={zIndexMap:Object.values(Ma).reduce((e,t)=>IF(IF({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),CLe)},_Le=new Set(Object.values(Ma));function ALe(e){return _Le.has(e)}var MK=fr({name:"zIndex",initialState:SLe,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:a}=t.payload;e.zIndexMap[a]?e.zIndexMap[a].consumers+=1:e.zIndexMap[a]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:ta()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:a}=t.payload;e.zIndexMap[a]&&(e.zIndexMap[a].consumers-=1,e.zIndexMap[a].consumers<=0&&!ALe(a)&&delete e.zIndexMap[a])},prepare:ta()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:a,element:s,isPanorama:r}=t.payload;e.zIndexMap[a]?r?e.zIndexMap[a].panoramaElement=s:e.zIndexMap[a].element=s:e.zIndexMap[a]={consumers:0,element:r?void 0:s,panoramaElement:r?s:void 0}},prepare:ta()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:a}=t.payload;e.zIndexMap[a]&&(t.payload.isPanorama?e.zIndexMap[a].panoramaElement=void 0:e.zIndexMap[a].element=void 0)},prepare:ta()}}}),{registerZIndexPortal:ELe,unregisterZIndexPortal:TLe,registerZIndexPortalElement:kLe,unregisterZIndexPortalElement:LLe}=MK.actions,PLe=MK.reducer;function hr(e){var{zIndex:t,children:a}=e,s=B_e(),r=s&&t!==void 0&&t!==0,i=Os(),l=qn();h.useLayoutEffect(()=>r?(l(ELe({zIndex:t})),()=>{l(TLe({zIndex:t}))}):Ox,[l,t,r]);var o=Ot(c=>bLe(c,t,i));return r?o?Mi.createPortal(a,o):null:a}function YT(){return YT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},YT.apply(null,arguments)}function $F(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function qy(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?$F(Object(a),!0).forEach(function(s){DLe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$F(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function DLe(e,t,a){return(t=OLe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function OLe(e){var t=MLe(e,"string");return typeof t=="symbol"?t:t+""}function MLe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ILe(e){var{cursor:t,cursorComp:a,cursorProps:s}=e;return h.isValidElement(t)?h.cloneElement(t,s):h.createElement(a,s)}function $Le(e){var t,{coordinate:a,payload:s,index:r,offset:i,tooltipAxisBandSize:l,layout:o,cursor:c,tooltipEventType:d,chartName:u}=e,f=a,p=s,x=r;if(!c||!f||u!=="ScatterChart"&&d!=="axis")return null;var y,w,v;if(u==="ScatterChart")y=f,w=UAe,v=Ma.cursorLine;else if(u==="BarChart")y=BAe(o,f,i,l),w=uQ,v=Ma.cursorRectangle;else if(o==="radial"&&Yq(f)){var{cx:C,cy:N,radius:S,startAngle:T,endAngle:k}=fQ(f);y={cx:C,cy:N,startAngle:T,endAngle:k,innerRadius:S,outerRadius:S},w=gQ,v=Ma.cursorLine}else y={points:LEe(o,f,i)},w=i4,v=Ma.cursorLine;var _=typeof c=="object"&&"className"in c?c.className:void 0,E=qy(qy(qy(qy({stroke:"#ccc",pointerEvents:"none"},i),y),Nu(c)),{},{payload:p,payloadIndex:x,className:Tt("recharts-tooltip-cursor",_)});return h.createElement(hr,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:v},h.createElement(ILe,{cursor:c,cursorComp:w,cursorProps:E}))}function RLe(e){var t=aLe(),a=YY(),s=Xf(),r=dLe();return t==null||a==null||s==null||r==null?null:h.createElement($Le,YT({},e,{offset:a,layout:s,tooltipAxisBandSize:t,chartName:r}))}var IK=h.createContext(null),zLe=()=>h.useContext(IK),f_={exports:{}},RF;function FLe(){return RF||(RF=1,(function(e){var t=Object.prototype.hasOwnProperty,a="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(a=!1));function r(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function i(c,d,u,f,p){if(typeof u!="function")throw new TypeError("The listener must be a function");var x=new r(u,f||c,p),y=a?a+d:d;return c._events[y]?c._events[y].fn?c._events[y]=[c._events[y],x]:c._events[y].push(x):(c._events[y]=x,c._eventsCount++),c}function l(c,d){--c._eventsCount===0?c._events=new s:delete c._events[d]}function o(){this._events=new s,this._eventsCount=0}o.prototype.eventNames=function(){var d=[],u,f;if(this._eventsCount===0)return d;for(f in u=this._events)t.call(u,f)&&d.push(a?f.slice(1):f);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},o.prototype.listeners=function(d){var u=a?a+d:d,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,x=f.length,y=new Array(x);p<x;p++)y[p]=f[p].fn;return y},o.prototype.listenerCount=function(d){var u=a?a+d:d,f=this._events[u];return f?f.fn?1:f.length:0},o.prototype.emit=function(d,u,f,p,x,y){var w=a?a+d:d;if(!this._events[w])return!1;var v=this._events[w],C=arguments.length,N,S;if(v.fn){switch(v.once&&this.removeListener(d,v.fn,void 0,!0),C){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,u),!0;case 3:return v.fn.call(v.context,u,f),!0;case 4:return v.fn.call(v.context,u,f,p),!0;case 5:return v.fn.call(v.context,u,f,p,x),!0;case 6:return v.fn.call(v.context,u,f,p,x,y),!0}for(S=1,N=new Array(C-1);S<C;S++)N[S-1]=arguments[S];v.fn.apply(v.context,N)}else{var T=v.length,k;for(S=0;S<T;S++)switch(v[S].once&&this.removeListener(d,v[S].fn,void 0,!0),C){case 1:v[S].fn.call(v[S].context);break;case 2:v[S].fn.call(v[S].context,u);break;case 3:v[S].fn.call(v[S].context,u,f);break;case 4:v[S].fn.call(v[S].context,u,f,p);break;default:if(!N)for(k=1,N=new Array(C-1);k<C;k++)N[k-1]=arguments[k];v[S].fn.apply(v[S].context,N)}}return!0},o.prototype.on=function(d,u,f){return i(this,d,u,f,!1)},o.prototype.once=function(d,u,f){return i(this,d,u,f,!0)},o.prototype.removeListener=function(d,u,f,p){var x=a?a+d:d;if(!this._events[x])return this;if(!u)return l(this,x),this;var y=this._events[x];if(y.fn)y.fn===u&&(!p||y.once)&&(!f||y.context===f)&&l(this,x);else{for(var w=0,v=[],C=y.length;w<C;w++)(y[w].fn!==u||p&&!y[w].once||f&&y[w].context!==f)&&v.push(y[w]);v.length?this._events[x]=v.length===1?v[0]:v:l(this,x)}return this},o.prototype.removeAllListeners=function(d){var u;return d?(u=a?a+d:d,this._events[u]&&l(this,u)):(this._events=new s,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=a,o.EventEmitter=o,e.exports=o})(f_)),f_.exports}var ULe=FLe();const BLe=Hi(ULe);var Lp=new BLe,QT="recharts.syncEvent.tooltip",zF="recharts.syncEvent.brush";function Y4(e,t){if(t){var a=Number.parseInt(t,10);if(!Ui(a))return e?.[a]}}var HLe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},$K=fr({name:"options",initialState:HLe,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),GLe=$K.reducer,{createEventEmitter:WLe}=$K.actions;function VLe(e){return e.tooltip.syncInteraction}var qLe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},RK=fr({name:"chartData",initialState:qLe,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:a,endIndex:s}=t.payload;a!=null&&(e.dataStartIndex=a),s!=null&&(e.dataEndIndex=s)}}}),{setChartData:FF,setDataStartEndIndexes:YLe,setComputedData:PVe}=RK.actions,QLe=RK.reducer,KLe=["x","y"];function UF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Rm(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?UF(Object(a),!0).forEach(function(s){XLe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):UF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function XLe(e,t,a){return(t=ZLe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ZLe(e){var t=JLe(e,"string");return typeof t=="symbol"?t:t+""}function JLe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ePe(e,t){if(e==null)return{};var a,s,r=tPe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function tPe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function nPe(){var e=Ot(u4),t=Ot(m4),a=qn(),s=Ot(OQ),r=Ot(Qo),i=Xf(),l=cj(),o=Ot(c=>c.rootProps.className);h.useEffect(()=>{if(e==null)return Ox;var c=(d,u,f)=>{if(t!==f&&e===d){if(s==="index"){var p;if(l&&u!==null&&u!==void 0&&(p=u.payload)!==null&&p!==void 0&&p.coordinate&&u.payload.sourceViewBox){var x=u.payload.coordinate,{x:y,y:w}=x,v=ePe(x,KLe),{x:C,y:N,width:S,height:T}=u.payload.sourceViewBox,k=Rm(Rm({},v),{},{x:l.x+(S?(y-C)/S:0)*l.width,y:l.y+(T?(w-N)/T:0)*l.height});a(Rm(Rm({},u),{},{payload:Rm(Rm({},u.payload),{},{coordinate:k})}))}else a(u);return}if(r!=null){var _;if(typeof s=="function"){var E={activeTooltipIndex:u.payload.index==null?void 0:Number(u.payload.index),isTooltipActive:u.payload.active,activeIndex:u.payload.index==null?void 0:Number(u.payload.index),activeLabel:u.payload.label,activeDataKey:u.payload.dataKey,activeCoordinate:u.payload.coordinate},A=s(r,E);_=r[A]}else s==="value"&&(_=r.find(R=>String(R.value)===u.payload.label));var{coordinate:I}=u.payload;if(_==null||u.payload.active===!1||I==null||l==null){a(VT({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:z,y:F}=I,D=Math.min(z,l.x+l.width),M=Math.min(F,l.y+l.height),W={x:i==="horizontal"?_.coordinate:D,y:i==="horizontal"?M:_.coordinate},Z=VT({active:u.payload.active,coordinate:W,dataKey:u.payload.dataKey,index:String(_.index),label:u.payload.label,sourceViewBox:u.payload.sourceViewBox,graphicalItemId:u.payload.graphicalItemId});a(Z)}}};return Lp.on(QT,c),()=>{Lp.off(QT,c)}},[o,a,t,e,s,r,i,l])}function aPe(){var e=Ot(u4),t=Ot(m4),a=qn();h.useEffect(()=>{if(e==null)return Ox;var s=(r,i,l)=>{t!==l&&e===r&&a(YLe(i))};return Lp.on(zF,s),()=>{Lp.off(zF,s)}},[a,t,e])}function sPe(){var e=qn();h.useEffect(()=>{e(WLe())},[e]),nPe(),aPe()}function rPe(e,t,a,s,r,i){var l=Ot(x=>mLe(x,e,t)),o=Ot(m4),c=Ot(u4),d=Ot(OQ),u=Ot(VLe),f=u?.active,p=cj();h.useEffect(()=>{if(!f&&c!=null&&o!=null){var x=VT({active:i,coordinate:a,dataKey:l,index:r,label:typeof s=="number"?String(s):s,sourceViewBox:p,graphicalItemId:void 0});Lp.emit(QT,c,x,o)}},[f,a,l,r,s,o,c,d,i,p])}function BF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function HF(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?BF(Object(a),!0).forEach(function(s){iPe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):BF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function iPe(e,t,a){return(t=lPe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function lPe(e){var t=oPe(e,"string");return typeof t=="symbol"?t:t+""}function oPe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cPe(e){return e.dataKey}function dPe(e,t){return h.isValidElement(e)?h.cloneElement(e,t):typeof e=="function"?h.createElement(e,t):h.createElement(vAe,t)}var GF=[],uPe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function h_(e){var t,a,s=za(e,uPe),{active:r,allowEscapeViewBox:i,animationDuration:l,animationEasing:o,content:c,filterNull:d,isAnimationActive:u,offset:f,payloadUniqBy:p,position:x,reverseDirection:y,useTranslate3d:w,wrapperStyle:v,cursor:C,shared:N,trigger:S,defaultIndex:T,portal:k,axisId:_}=s,E=qn(),A=typeof T=="number"?String(T):T;h.useEffect(()=>{E(ike({shared:N,trigger:S,axisId:_,active:r,defaultIndex:A}))},[E,N,S,_,r,A]);var I=cj(),z=iQ(),F=eke(N),{activeIndex:D,isActive:M}=(t=Ot(Oe=>gLe(Oe,F,S,A)))!==null&&t!==void 0?t:{},W=Ot(Oe=>hLe(Oe,F,S,A)),Z=Ot(Oe=>OK(Oe,F,S,A)),R=Ot(Oe=>fLe(Oe,F,S,A)),Q=W,Y=zLe(),oe=(a=r??M)!==null&&a!==void 0?a:!1,[re,ee]=oY([Q,oe]),H=F==="axis"?Z:void 0;rPe(F,S,R,H,D,oe);var ye=k??Y;if(ye==null||I==null||F==null)return null;var te=Q??GF;oe||(te=GF),d&&te.length&&(te=sY(te.filter(Oe=>Oe.value!=null&&(Oe.hide!==!0||s.includeHidden)),p,cPe));var ve=te.length>0,je=h.createElement(AAe,{allowEscapeViewBox:i,animationDuration:l,animationEasing:o,isAnimationActive:u,active:oe,coordinate:R,hasPayload:ve,offset:f,position:x,reverseDirection:y,useTranslate3d:w,viewBox:I,wrapperStyle:v,lastBoundingBox:re,innerRef:ee,hasPortalFromProps:!!k},dPe(c,HF(HF({},s),{},{payload:te,label:H,active:oe,activeIndex:D,coordinate:R,accessibilityLayer:z})));return h.createElement(h.Fragment,null,Mi.createPortal(je,ye),oe&&h.createElement(RLe,{cursor:C,tooltipEventType:F,coordinate:R,payload:te,index:D}))}var Aj=e=>null;Aj.displayName="Cell";function mPe(e,t,a){return(t=fPe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function fPe(e){var t=hPe(e,"string");return typeof t=="symbol"?t:t+""}function hPe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class gPe{constructor(t){mPe(this,"cache",new Map),this.maxSize=t}get(t){var a=this.cache.get(t);return a!==void 0&&(this.cache.delete(t),this.cache.set(t,a)),a}set(t,a){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var s=this.cache.keys().next().value;s!=null&&this.cache.delete(s)}this.cache.set(t,a)}clear(){this.cache.clear()}size(){return this.cache.size}}function WF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function pPe(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?WF(Object(a),!0).forEach(function(s){xPe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):WF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function xPe(e,t,a){return(t=yPe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function yPe(e){var t=bPe(e,"string");return typeof t=="symbol"?t:t+""}function bPe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vPe={cacheSize:2e3,enableCache:!0},zK=pPe({},vPe),VF=new gPe(zK.cacheSize),wPe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},qF="recharts_measurement_span";function NPe(e,t){var a=t.fontSize||"",s=t.fontFamily||"",r=t.fontWeight||"",i=t.fontStyle||"",l=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(a,"|").concat(s,"|").concat(r,"|").concat(i,"|").concat(l,"|").concat(o)}var YF=(e,t)=>{try{var a=document.getElementById(qF);a||(a=document.createElement("span"),a.setAttribute("id",qF),a.setAttribute("aria-hidden","true"),document.body.appendChild(a)),Object.assign(a.style,wPe,t),a.textContent="".concat(e);var s=a.getBoundingClientRect();return{width:s.width,height:s.height}}catch{return{width:0,height:0}}},Vg=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||hj.isSsr)return{width:0,height:0};if(!zK.enableCache)return YF(t,a);var s=NPe(t,a),r=VF.get(s);if(r)return r;var i=YF(t,a);return VF.set(s,i),i},FK;function jPe(e,t,a){return(t=CPe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function CPe(e){var t=SPe(e,"string");return typeof t=="symbol"?t:t+""}function SPe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var QF=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,KF=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,_Pe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,APe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,EPe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},TPe=["cm","mm","pt","pc","in","Q","px"];function kPe(e){return TPe.includes(e)}var Zm="NaN";function LPe(e,t){return e*EPe[t]}class bs{static parse(t){var a,[,s,r]=(a=APe.exec(t))!==null&&a!==void 0?a:[];return s==null?bs.NaN:new bs(parseFloat(s),r??"")}constructor(t,a){this.num=t,this.unit=a,this.num=t,this.unit=a,Ui(t)&&(this.unit=""),a!==""&&!_Pe.test(a)&&(this.num=NaN,this.unit=""),kPe(a)&&(this.num=LPe(t,a),this.unit="px")}add(t){return this.unit!==t.unit?new bs(NaN,""):new bs(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new bs(NaN,""):new bs(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new bs(NaN,""):new bs(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new bs(NaN,""):new bs(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Ui(this.num)}}FK=bs;jPe(bs,"NaN",new FK(NaN,""));function UK(e){if(e==null||e.includes(Zm))return Zm;for(var t=e;t.includes("*")||t.includes("/");){var a,[,s,r,i]=(a=QF.exec(t))!==null&&a!==void 0?a:[],l=bs.parse(s??""),o=bs.parse(i??""),c=r==="*"?l.multiply(o):l.divide(o);if(c.isNaN())return Zm;t=t.replace(QF,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,[,u,f,p]=(d=KF.exec(t))!==null&&d!==void 0?d:[],x=bs.parse(u??""),y=bs.parse(p??""),w=f==="+"?x.add(y):x.subtract(y);if(w.isNaN())return Zm;t=t.replace(KF,w.toString())}return t}var XF=/\(([^()]*)\)/;function PPe(e){for(var t=e,a;(a=XF.exec(t))!=null;){var[,s]=a;t=t.replace(XF,UK(s))}return t}function DPe(e){var t=e.replace(/\s+/g,"");return t=PPe(t),t=UK(t),t}function OPe(e){try{return DPe(e)}catch{return Zm}}function g_(e){var t=OPe(e.slice(5,-1));return t===Zm?"":t}var MPe=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],IPe=["dx","dy","angle","className","breakAll"];function KT(){return KT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},KT.apply(null,arguments)}function ZF(e,t){if(e==null)return{};var a,s,r=$Pe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function $Pe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var BK=/[ \f\n\r\t\v\u2028\u2029]+/,HK=e=>{var{children:t,breakAll:a,style:s}=e;try{var r=[];ra(t)||(a?r=t.toString().split(""):r=t.toString().split(BK));var i=r.map(o=>({word:o,width:Vg(o,s).width})),l=a?0:Vg("",s).width;return{wordsWithComputedWidth:i,spaceWidth:l}}catch{return null}};function RPe(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var GK=(e,t,a,s)=>e.reduce((r,i)=>{var{word:l,width:o}=i,c=r[r.length-1];if(c&&o!=null&&(t==null||s||c.width+o+a<Number(t)))c.words.push(l),c.width+=o+a;else{var d={words:[l],width:o};r.push(d)}return r},[]),WK=e=>e.reduce((t,a)=>t.width>a.width?t:a),zPe="",JF=(e,t,a,s,r,i,l,o)=>{var c=e.slice(0,t),d=HK({breakAll:a,style:s,children:c+zPe});if(!d)return[!1,[]];var u=GK(d.wordsWithComputedWidth,i,l,o),f=u.length>r||WK(u).width>Number(i);return[f,u]},FPe=(e,t,a,s,r)=>{var{maxLines:i,children:l,style:o,breakAll:c}=e,d=Pt(i),u=String(l),f=GK(t,s,a,r);if(!d||r)return f;var p=f.length>i||WK(f).width>Number(s);if(!p)return f;for(var x=0,y=u.length-1,w=0,v;x<=y&&w<=u.length-1;){var C=Math.floor((x+y)/2),N=C-1,[S,T]=JF(u,N,c,o,i,s,a,r),[k]=JF(u,C,c,o,i,s,a,r);if(!S&&!k&&(x=C+1),S&&k&&(y=C-1),!S&&k){v=T;break}w++}return v||f},eU=e=>{var t=ra(e)?[]:e.toString().split(BK);return[{words:t,width:void 0}]},UPe=e=>{var{width:t,scaleToFit:a,children:s,style:r,breakAll:i,maxLines:l}=e;if((t||a)&&!hj.isSsr){var o,c,d=HK({breakAll:i,children:s,style:r});if(d){var{wordsWithComputedWidth:u,spaceWidth:f}=d;o=u,c=f}else return eU(s);return FPe({breakAll:i,children:s,maxLines:l,style:r},o,c,t,!!a)}return eU(s)},VK="#808080",BPe={angle:0,breakAll:!1,capHeight:"0.71em",fill:VK,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},Ej=h.forwardRef((e,t)=>{var a=za(e,BPe),{x:s,y:r,lineHeight:i,capHeight:l,fill:o,scaleToFit:c,textAnchor:d,verticalAnchor:u}=a,f=ZF(a,MPe),p=h.useMemo(()=>UPe({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:c,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,c,f.style,f.width]),{dx:x,dy:y,angle:w,className:v,breakAll:C}=f,N=ZF(f,IPe);if(!Al(s)||!Al(r)||p.length===0)return null;var S=Number(s)+(Pt(x)?x:0),T=Number(r)+(Pt(y)?y:0);if(!ca(S)||!ca(T))return null;var k;switch(u){case"start":k=g_("calc(".concat(l,")"));break;case"middle":k=g_("calc(".concat((p.length-1)/2," * -").concat(i," + (").concat(l," / 2))"));break;default:k=g_("calc(".concat(p.length-1," * -").concat(i,")"));break}var _=[];if(c){var E=p[0].width,{width:A}=f;_.push("scale(".concat(Pt(A)&&Pt(E)?A/E:1,")"))}return w&&_.push("rotate(".concat(w,", ").concat(S,", ").concat(T,")")),_.length&&(N.transform=_.join(" ")),h.createElement("text",KT({},Fs(N),{ref:t,x:S,y:T,className:Tt("recharts-text",v),textAnchor:d,fill:o.includes("url")?VK:o}),p.map((I,z)=>{var F=I.words.join(C?"":" ");return h.createElement("tspan",{x:S,dy:z===0?k:i,key:"".concat(F,"-").concat(z)},F)}))});Ej.displayName="Text";var HPe=["labelRef"],GPe=["content"];function tU(e,t){if(e==null)return{};var a,s,r=WPe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function WPe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function nU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function ja(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?nU(Object(a),!0).forEach(function(s){VPe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):nU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function VPe(e,t,a){return(t=qPe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function qPe(e){var t=YPe(e,"string");return typeof t=="symbol"?t:t+""}function YPe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mo(){return mo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},mo.apply(null,arguments)}var qK=h.createContext(null),QPe=e=>{var{x:t,y:a,upperWidth:s,lowerWidth:r,width:i,height:l,children:o}=e,c=h.useMemo(()=>({x:t,y:a,upperWidth:s,lowerWidth:r,width:i,height:l}),[t,a,s,r,i,l]);return h.createElement(qK.Provider,{value:c},o)},YK=()=>{var e=h.useContext(qK),t=cj();return e||qY(t)},KPe=h.createContext(null),XPe=()=>{var e=h.useContext(KPe),t=Ot(zQ);return e||t},ZPe=e=>{var{value:t,formatter:a}=e,s=ra(e.children)?t:e.children;return typeof a=="function"?a(s):s},Q4=e=>e!=null&&typeof e=="function",JPe=(e,t)=>{var a=cs(t-e),s=Math.min(Math.abs(t-e),360);return a*s},e4e=(e,t,a,s,r)=>{var{offset:i,className:l}=e,{cx:o,cy:c,innerRadius:d,outerRadius:u,startAngle:f,endAngle:p,clockWise:x}=r,y=(d+u)/2,w=JPe(f,p),v=w>=0?1:-1,C,N;switch(t){case"insideStart":C=f+v*i,N=x;break;case"insideEnd":C=p-v*i,N=!x;break;case"end":C=p+v*i,N=x;break;default:throw new Error("Unsupported position ".concat(t))}N=w<=0?N:!N;var S=Oa(o,c,y,C),T=Oa(o,c,y,C+(N?1:-1)*359),k="M".concat(S.x,",").concat(S.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(N?0:1,`,
    `).concat(T.x,",").concat(T.y),_=ra(e.id)?Np("recharts-radial-line-"):e.id;return h.createElement("text",mo({},s,{dominantBaseline:"central",className:Tt("recharts-radial-bar-label",l)}),h.createElement("defs",null,h.createElement("path",{id:_,d:k})),h.createElement("textPath",{xlinkHref:"#".concat(_)},a))},t4e=(e,t,a)=>{var{cx:s,cy:r,innerRadius:i,outerRadius:l,startAngle:o,endAngle:c}=e,d=(o+c)/2;if(a==="outside"){var{x:u,y:f}=Oa(s,r,l+t,d);return{x:u,y:f,textAnchor:u>=s?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:s,y:r,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:s,y:r,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:s,y:r,textAnchor:"middle",verticalAnchor:"end"};var p=(i+l)/2,{x,y}=Oa(s,r,p,d);return{x,y,textAnchor:"middle",verticalAnchor:"middle"}},XT=e=>"cx"in e&&Pt(e.cx),n4e=(e,t)=>{var{parentViewBox:a,offset:s,position:r}=e,i;a!=null&&!XT(a)&&(i=a);var{x:l,y:o,upperWidth:c,lowerWidth:d,height:u}=t,f=l,p=l+(c-d)/2,x=(f+p)/2,y=(c+d)/2,w=f+c/2,v=u>=0?1:-1,C=v*s,N=v>0?"end":"start",S=v>0?"start":"end",T=c>=0?1:-1,k=T*s,_=T>0?"end":"start",E=T>0?"start":"end";if(r==="top"){var A={x:f+c/2,y:o-C,textAnchor:"middle",verticalAnchor:N};return ja(ja({},A),i?{height:Math.max(o-i.y,0),width:c}:{})}if(r==="bottom"){var I={x:p+d/2,y:o+u+C,textAnchor:"middle",verticalAnchor:S};return ja(ja({},I),i?{height:Math.max(i.y+i.height-(o+u),0),width:d}:{})}if(r==="left"){var z={x:x-k,y:o+u/2,textAnchor:_,verticalAnchor:"middle"};return ja(ja({},z),i?{width:Math.max(z.x-i.x,0),height:u}:{})}if(r==="right"){var F={x:x+y+k,y:o+u/2,textAnchor:E,verticalAnchor:"middle"};return ja(ja({},F),i?{width:Math.max(i.x+i.width-F.x,0),height:u}:{})}var D=i?{width:y,height:u}:{};return r==="insideLeft"?ja({x:x+k,y:o+u/2,textAnchor:E,verticalAnchor:"middle"},D):r==="insideRight"?ja({x:x+y-k,y:o+u/2,textAnchor:_,verticalAnchor:"middle"},D):r==="insideTop"?ja({x:f+c/2,y:o+C,textAnchor:"middle",verticalAnchor:S},D):r==="insideBottom"?ja({x:p+d/2,y:o+u-C,textAnchor:"middle",verticalAnchor:N},D):r==="insideTopLeft"?ja({x:f+k,y:o+C,textAnchor:E,verticalAnchor:S},D):r==="insideTopRight"?ja({x:f+c-k,y:o+C,textAnchor:_,verticalAnchor:S},D):r==="insideBottomLeft"?ja({x:p+k,y:o+u-C,textAnchor:E,verticalAnchor:N},D):r==="insideBottomRight"?ja({x:p+d-k,y:o+u-C,textAnchor:_,verticalAnchor:N},D):r&&typeof r=="object"&&(Pt(r.x)||Lo(r.x))&&(Pt(r.y)||Lo(r.y))?ja({x:l+ks(r.x,y),y:o+ks(r.y,u),textAnchor:"end",verticalAnchor:"end"},D):ja({x:w,y:o+u/2,textAnchor:"middle",verticalAnchor:"middle"},D)},a4e={angle:0,offset:5,zIndex:Ma.label,position:"middle",textBreakAll:!1};function Pc(e){var t=za(e,a4e),{viewBox:a,position:s,value:r,children:i,content:l,className:o="",textBreakAll:c,labelRef:d}=t,u=XPe(),f=YK(),p=s==="center"?f:u??f,x,y,w;if(a==null?x=p:XT(a)?x=a:x=qY(a),!x||ra(r)&&ra(i)&&!h.isValidElement(l)&&typeof l!="function")return null;var v=ja(ja({},t),{},{viewBox:x});if(h.isValidElement(l)){var{labelRef:C}=v,N=tU(v,HPe);return h.cloneElement(l,N)}if(typeof l=="function"){var{content:S}=v,T=tU(v,GPe);if(y=h.createElement(l,T),h.isValidElement(y))return y}else y=ZPe(t);var k=Fs(t);if(XT(x)){if(s==="insideStart"||s==="insideEnd"||s==="end")return e4e(t,s,y,k,x);w=t4e(x,t.offset,t.position)}else w=n4e(t,x);return h.createElement(hr,{zIndex:t.zIndex},h.createElement(Ej,mo({ref:d,className:Tt("recharts-label",o)},k,w,{textAnchor:RPe(k.textAnchor)?k.textAnchor:w.textAnchor,breakAll:c}),y))}Pc.displayName="Label";var s4e=(e,t,a)=>{if(!e)return null;var s={viewBox:t,labelRef:a};return e===!0?h.createElement(Pc,mo({key:"label-implicit"},s)):Al(e)?h.createElement(Pc,mo({key:"label-implicit",value:e},s)):h.isValidElement(e)?e.type===Pc?h.cloneElement(e,ja({key:"label-implicit"},s)):h.createElement(Pc,mo({key:"label-implicit",content:e},s)):Q4(e)?h.createElement(Pc,mo({key:"label-implicit",content:e},s)):e&&typeof e=="object"?h.createElement(Pc,mo({},e,{key:"label-implicit"},s)):null};function r4e(e){var{label:t,labelRef:a}=e,s=YK();return s4e(t,s,a)||null}var p_={},x_={},aU;function i4e(){return aU||(aU=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a[a.length-1]}e.last=t})(x_)),x_}var y_={},sU;function l4e(){return sU||(sU=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return Array.isArray(a)?a:Array.from(a)}e.toArray=t})(y_)),y_}var rU;function o4e(){return rU||(rU=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=i4e(),a=l4e(),s=GP();function r(i){if(s.isArrayLike(i))return t.last(a.toArray(i))}e.last=r})(p_)),p_}var b_,iU;function c4e(){return iU||(iU=1,b_=o4e().last),b_}var d4e=c4e();const u4e=Hi(d4e);var m4e=["valueAccessor"],f4e=["dataKey","clockWise","id","textBreakAll","zIndex"];function ew(){return ew=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},ew.apply(null,arguments)}function lU(e,t){if(e==null)return{};var a,s,r=h4e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function h4e(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var g4e=e=>Array.isArray(e.value)?u4e(e.value):e.value,QK=h.createContext(void 0),KK=QK.Provider,XK=h.createContext(void 0),p4e=XK.Provider;function x4e(){return h.useContext(QK)}function y4e(){return h.useContext(XK)}function Wb(e){var{valueAccessor:t=g4e}=e,a=lU(e,m4e),{dataKey:s,clockWise:r,id:i,textBreakAll:l,zIndex:o}=a,c=lU(a,f4e),d=x4e(),u=y4e(),f=d||u;return!f||!f.length?null:h.createElement(hr,{zIndex:o??Ma.label},h.createElement(ds,{className:"recharts-label-list"},f.map((p,x)=>{var y,w=ra(s)?t(p,x):zn(p&&p.payload,s),v=ra(i)?{}:{id:"".concat(i,"-").concat(x)};return h.createElement(Pc,ew({key:"label-".concat(x)},Fs(p),c,v,{fill:(y=a.fill)!==null&&y!==void 0?y:p.fill,parentViewBox:p.parentViewBox,value:w,textBreakAll:l,viewBox:p.viewBox,index:x,zIndex:0}))})))}Wb.displayName="LabelList";function K4(e){var{label:t}=e;return t?t===!0?h.createElement(Wb,{key:"labelList-implicit"}):h.isValidElement(t)||Q4(t)?h.createElement(Wb,{key:"labelList-implicit",content:t}):typeof t=="object"?h.createElement(Wb,ew({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function ZT(){return ZT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},ZT.apply(null,arguments)}var ZK=e=>{var{cx:t,cy:a,r:s,className:r}=e,i=Tt("recharts-dot",r);return Pt(t)&&Pt(a)&&Pt(s)?h.createElement("circle",ZT({},Or(e),HP(e),{className:i,cx:t,cy:a,r:s})):null},JK=e=>e.graphicalItems.polarItems,b4e=nt([la,Gx],y4),Tj=nt([JK,ua,b4e],b4),v4e=nt([Tj],v4),kj=nt([v4e,gj],w4),w4e=nt([kj,ua,Tj],j4);nt([kj,ua,Tj],(e,t,a)=>a.length>0?e.flatMap(s=>a.flatMap(r=>{var i,l=zn(s,(i=t.dataKey)!==null&&i!==void 0?i:r.dataKey);return{value:l,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(s=>({value:zn(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})));var oU=()=>{},N4e=nt([kj,ua,Tj,jj,la],A4),j4e=nt([ua,S4,_4,oU,N4e,oU,hn,la],E4),eX=nt([ua,hn,kj,w4e,Hx,la,j4e],T4),C4e=nt([eX,ua,nh],P4);nt([ua,eX,C4e,la],O4);var S4e={radiusAxis:{},angleAxis:{}},tX=fr({name:"polarAxis",initialState:S4e,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:DVe,removeRadiusAxis:OVe,addAngleAxis:MVe,removeAngleAxis:IVe}=tX.actions,_4e=tX.reducer;function cU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function dU(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?cU(Object(a),!0).forEach(function(s){A4e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):cU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function A4e(e,t,a){return(t=E4e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function E4e(e){var t=T4e(e,"string");return typeof t=="symbol"?t:t+""}function T4e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var k4e=(e,t)=>t,X4=nt([JK,k4e],(e,t)=>e.filter(a=>a.type==="pie").find(a=>a.id===t)),L4e=[],Z4=(e,t,a)=>a?.length===0?L4e:a,nX=nt([gj,X4,Z4],(e,t,a)=>{var{chartData:s}=e;if(t!=null){var r;if(t?.data!=null&&t.data.length>0?r=t.data:r=s,(!r||!r.length)&&a!=null&&(r=a.map(i=>dU(dU({},t.presentationProps),i.props))),r!=null)return r}}),P4e=nt([nX,X4,Z4],(e,t,a)=>{if(!(e==null||t==null))return e.map((s,r)=>{var i,l=zn(s,t.nameKey,t.name),o;return a!=null&&(i=a[r])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?o=a[r].props.fill:typeof s=="object"&&s!=null&&"fill"in s?o=s.fill:o=t.fill,{value:Kf(l,t.dataKey),color:o,payload:s,type:t.legendType}})}),D4e=nt([nX,X4,Z4,Ja],(e,t,a,s)=>{if(!(t==null||e==null))return PDe({offset:s,pieSettings:t,displayedData:e,cells:a})}),uU=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",mU=null,v_=null,aX=e=>{if(e===mU&&Array.isArray(v_))return v_;var t=[];return h.Children.forEach(e,a=>{ra(a)||(Hk.isFragment(a)?t=t.concat(aX(a.props.children)):t.push(a))}),v_=t,mU=e,t};function J4(e,t){var a=[],s=[];return Array.isArray(t)?s=t.map(r=>uU(r)):s=[uU(t)],aX(e).forEach(r=>{var i=ju(r,"type.displayName")||ju(r,"type.name");i&&s.indexOf(i)!==-1&&a.push(r)}),a}var sX=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,w_={},fU;function O4e(){return fU||(fU=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){if(typeof a!="object"||a==null)return!1;if(Object.getPrototypeOf(a)===null)return!0;if(Object.prototype.toString.call(a)!=="[object Object]"){const r=a[Symbol.toStringTag];return r==null||!Object.getOwnPropertyDescriptor(a,Symbol.toStringTag)?.writable?!1:a.toString()===`[object ${r}]`}let s=a;for(;Object.getPrototypeOf(s)!==null;)s=Object.getPrototypeOf(s);return Object.getPrototypeOf(a)===s}e.isPlainObject=t})(w_)),w_}var N_,hU;function M4e(){return hU||(hU=1,N_=O4e().isPlainObject),N_}var I4e=M4e();const $4e=Hi(I4e);var gU,pU,xU,yU,bU;function vU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function wU(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?vU(Object(a),!0).forEach(function(s){R4e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):vU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function R4e(e,t,a){return(t=z4e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function z4e(e){var t=F4e(e,"string");return typeof t=="symbol"?t:t+""}function F4e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tw(){return tw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},tw.apply(null,arguments)}function ug(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var NU=(e,t,a,s,r)=>{var i=a-s,l;return l=pa(gU||(gU=ug(["M ",",",""])),e,t),l+=pa(pU||(pU=ug(["L ",",",""])),e+a,t),l+=pa(xU||(xU=ug(["L ",",",""])),e+a-i/2,t+r),l+=pa(yU||(yU=ug(["L ",",",""])),e+a-i/2-s,t+r),l+=pa(bU||(bU=ug(["L ",","," Z"])),e,t),l},U4e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},B4e=e=>{var t=za(e,U4e),{x:a,y:s,upperWidth:r,lowerWidth:i,height:l,className:o}=t,{animationEasing:c,animationDuration:d,animationBegin:u,isUpdateAnimationActive:f}=t,p=h.useRef(null),[x,y]=h.useState(-1),w=h.useRef(r),v=h.useRef(i),C=h.useRef(l),N=h.useRef(a),S=h.useRef(s),T=Bx(e,"trapezoid-");if(h.useEffect(()=>{if(p.current&&p.current.getTotalLength)try{var W=p.current.getTotalLength();W&&y(W)}catch{}},[]),a!==+a||s!==+s||r!==+r||i!==+i||l!==+l||r===0&&i===0||l===0)return null;var k=Tt("recharts-trapezoid",o);if(!f)return h.createElement("g",null,h.createElement("path",tw({},Fs(t),{className:k,d:NU(a,s,r,i,l)})));var _=w.current,E=v.current,A=C.current,I=N.current,z=S.current,F="0px ".concat(x===-1?1:x,"px"),D="".concat(x,"px 0px"),M=lQ(["strokeDasharray"],d,c);return h.createElement(Ux,{animationId:T,key:T,canBegin:x>0,duration:d,easing:c,isActive:f,begin:u},W=>{var Z=na(_,r,W),R=na(E,i,W),Q=na(A,l,W),Y=na(I,a,W),oe=na(z,s,W);p.current&&(w.current=Z,v.current=R,C.current=Q,N.current=Y,S.current=oe);var re=W>0?{transition:M,strokeDasharray:D}:{strokeDasharray:F};return h.createElement("path",tw({},Fs(t),{className:k,d:NU(Y,oe,Z,R,Q),ref:p,style:wU(wU({},re),t.style)}))})},H4e=["option","shapeType","activeClassName"];function G4e(e,t){if(e==null)return{};var a,s,r=W4e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function W4e(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function jU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function nw(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?jU(Object(a),!0).forEach(function(s){V4e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):jU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function V4e(e,t,a){return(t=q4e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function q4e(e){var t=Y4e(e,"string");return typeof t=="symbol"?t:t+""}function Y4e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Q4e(e,t){return nw(nw({},t),e)}function K4e(e,t){return e==="symbols"}function CU(e){var{shapeType:t,elementProps:a}=e;switch(t){case"rectangle":return h.createElement(uQ,a);case"trapezoid":return h.createElement(B4e,a);case"sector":return h.createElement(gQ,a);case"symbols":if(K4e(t))return h.createElement(BP,a);break;case"curve":return h.createElement(i4,a);default:return null}}function X4e(e){return h.isValidElement(e)?e.props:e}function eD(e){var{option:t,shapeType:a,activeClassName:s="recharts-active-shape"}=e,r=G4e(e,H4e),i;if(h.isValidElement(t))i=h.cloneElement(t,nw(nw({},r),X4e(t)));else if(typeof t=="function")i=t(r,r.index);else if($4e(t)&&typeof t!="boolean"){var l=Q4e(t,r);i=h.createElement(CU,{shapeType:a,elementProps:l})}else{var o=r;i=h.createElement(CU,{shapeType:a,elementProps:o})}return r.isActive?h.createElement(ds,{className:s},i):i}var tD=(e,t,a)=>{var s=qn();return(r,i)=>l=>{e?.(r,i,l),s(pK({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition,activeGraphicalItemId:a}))}},nD=e=>{var t=qn();return(a,s)=>r=>{e?.(a,s,r),t(lke())}},aD=(e,t,a)=>{var s=qn();return(r,i)=>l=>{e?.(r,i,l),s(oke({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition,activeGraphicalItemId:a}))}};function sD(e){var{tooltipEntrySettings:t}=e,a=qn(),s=Os(),r=h.useRef(null);return h.useLayoutEffect(()=>{s||(r.current===null?a(ake(t)):r.current!==t&&a(ske({prev:r.current,next:t})),r.current=t)},[t,a,s]),h.useLayoutEffect(()=>()=>{r.current&&(a(rke(r.current)),r.current=null)},[a]),null}function rX(e){var{legendPayload:t}=e,a=qn(),s=Os(),r=h.useRef(null);return h.useLayoutEffect(()=>{s||(r.current===null?a(nQ(t)):r.current!==t&&a(aQ({prev:r.current,next:t})),r.current=t)},[a,s,t]),h.useLayoutEffect(()=>()=>{r.current&&(a(sQ(r.current)),r.current=null)},[a]),null}function Z4e(e){var{legendPayload:t}=e,a=qn(),s=Ot(hn),r=h.useRef(null);return h.useLayoutEffect(()=>{s!=="centric"&&s!=="radial"||(r.current===null?a(nQ(t)):r.current!==t&&a(aQ({prev:r.current,next:t})),r.current=t)},[a,s,t]),h.useLayoutEffect(()=>()=>{r.current&&(a(sQ(r.current)),r.current=null)},[a]),null}var j_,J4e=()=>{var[e]=h.useState(()=>Np("uid-"));return e},eDe=(j_=uu.useId)!==null&&j_!==void 0?j_:J4e;function tDe(e,t){var a=eDe();return t||(e?"".concat(e,"-").concat(a):a)}var nDe=h.createContext(void 0),rD=e=>{var{id:t,type:a,children:s}=e,r=tDe("recharts-".concat(a),t);return h.createElement(nDe.Provider,{value:r},s(r))},aDe={cartesianItems:[],polarItems:[]},iX=fr({name:"graphicalItems",initialState:aDe,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:ta()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:a,next:s}=t.payload,r=$i(e).cartesianItems.indexOf(a);r>-1&&(e.cartesianItems[r]=s)},prepare:ta()},removeCartesianGraphicalItem:{reducer(e,t){var a=$i(e).cartesianItems.indexOf(t.payload);a>-1&&e.cartesianItems.splice(a,1)},prepare:ta()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:ta()},removePolarGraphicalItem:{reducer(e,t){var a=$i(e).polarItems.indexOf(t.payload);a>-1&&e.polarItems.splice(a,1)},prepare:ta()}}}),{addCartesianGraphicalItem:sDe,replaceCartesianGraphicalItem:rDe,removeCartesianGraphicalItem:iDe,addPolarGraphicalItem:lDe,removePolarGraphicalItem:oDe}=iX.actions,cDe=iX.reducer,dDe=e=>{var t=qn(),a=h.useRef(null);return h.useLayoutEffect(()=>{a.current===null?t(sDe(e)):a.current!==e&&t(rDe({prev:a.current,next:e})),a.current=e},[t,e]),h.useLayoutEffect(()=>()=>{a.current&&(t(iDe(a.current)),a.current=null)},[t]),null},lX=h.memo(dDe);function uDe(e){var t=qn();return h.useLayoutEffect(()=>(t(lDe(e)),()=>{t(oDe(e))}),[t,e]),null}var mDe=["key"],fDe=["onMouseEnter","onClick","onMouseLeave"],hDe=["id"],gDe=["id"];function SU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function xa(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?SU(Object(a),!0).forEach(function(s){pDe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):SU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function pDe(e,t,a){return(t=xDe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function xDe(e){var t=yDe(e,"string");return typeof t=="symbol"?t:t+""}function yDe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function td(){return td=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},td.apply(null,arguments)}function Lj(e,t){if(e==null)return{};var a,s,r=bDe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function bDe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function vDe(e){var t=h.useMemo(()=>J4(e.children,Aj),[e.children]),a=Ot(s=>P4e(s,e.id,t));return a==null?null:h.createElement(Z4e,{legendPayload:a})}var wDe=h.memo(e=>{var{dataKey:t,nameKey:a,sectors:s,stroke:r,strokeWidth:i,fill:l,name:o,hide:c,tooltipType:d,id:u}=e,f={dataDefinedOnItem:s.map(p=>p.tooltipPayload),positions:s.map(p=>p.tooltipPosition),settings:{stroke:r,strokeWidth:i,fill:l,dataKey:t,nameKey:a,name:Kf(o,t),hide:c,type:d,color:l,unit:"",graphicalItemId:u}};return h.createElement(sD,{tooltipEntrySettings:f})}),NDe=(e,t)=>e>t?"start":e<t?"end":"middle",jDe=(e,t,a)=>ks(typeof t=="function"?t(e):t,a,a*.8),CDe=(e,t,a)=>{var{top:s,left:r,width:i,height:l}=t,o=mQ(i,l),c=r+ks(e.cx,i,i/2),d=s+ks(e.cy,l,l/2),u=ks(e.innerRadius,o,0),f=jDe(a,e.outerRadius,o),p=e.maxRadius||Math.sqrt(i*i+l*l)/2;return{cx:c,cy:d,innerRadius:u,outerRadius:f,maxRadius:p}},SDe=(e,t)=>{var a=cs(t-e),s=Math.min(Math.abs(t-e),360);return a*s};function _De(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var ADe=(e,t)=>{if(h.isValidElement(e))return h.cloneElement(e,t);if(typeof e=="function")return e(t);var a=Tt("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:s}=t,r=Lj(t,mDe);return h.createElement(i4,td({},r,{type:"linear",className:a}))},EDe=(e,t,a)=>{if(h.isValidElement(e))return h.cloneElement(e,t);var s=a;if(typeof e=="function"&&(s=e(t),h.isValidElement(s)))return s;var r=Tt("recharts-pie-label-text",_De(e));return h.createElement(Ej,td({},t,{alignmentBaseline:"middle",className:r}),s)};function TDe(e){var{sectors:t,props:a,showLabels:s}=e,{label:r,labelLine:i,dataKey:l}=a;if(!s||!r||!t)return null;var o=Or(a),c=Nu(r),d=Nu(i),u=typeof r=="object"&&"offsetRadius"in r&&typeof r.offsetRadius=="number"&&r.offsetRadius||20,f=t.map((p,x)=>{var y=(p.startAngle+p.endAngle)/2,w=Oa(p.cx,p.cy,p.outerRadius+u,y),v=xa(xa(xa(xa({},o),p),{},{stroke:"none"},c),{},{index:x,textAnchor:NDe(w.x,p.cx)},w),C=xa(xa(xa(xa({},o),p),{},{fill:"none",stroke:p.fill},d),{},{index:x,points:[Oa(p.cx,p.cy,p.outerRadius,y),w],key:"line"});return h.createElement(hr,{zIndex:Ma.label,key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(x)},h.createElement(ds,null,i&&ADe(i,C),EDe(r,v,zn(p,l))))});return h.createElement(ds,{className:"recharts-pie-labels"},f)}function kDe(e){var{sectors:t,props:a,showLabels:s}=e,{label:r}=a;return typeof r=="object"&&r!=null&&"position"in r?h.createElement(K4,{label:r}):h.createElement(TDe,{sectors:t,props:a,showLabels:s})}function LDe(e){var{sectors:t,activeShape:a,inactiveShape:s,allOtherPieProps:r,shape:i,id:l}=e,o=Ot(ed),c=Ot(H4),d=Ot(qke),{onMouseEnter:u,onClick:f,onMouseLeave:p}=r,x=Lj(r,fDe),y=tD(u,r.dataKey,l),w=nD(p),v=aD(f,r.dataKey,l);return t==null||t.length===0?null:h.createElement(h.Fragment,null,t.map((C,N)=>{if(C?.startAngle===0&&C?.endAngle===0&&t.length!==1)return null;var S=d==null||d===l,T=String(N)===o&&(c==null||r.dataKey===c)&&S,k=o?s:null,_=a&&T?a:k,E=xa(xa({},C),{},{stroke:C.stroke,tabIndex:-1,[BY]:N,[HY]:l});return h.createElement(ds,td({key:"sector-".concat(C?.startAngle,"-").concat(C?.endAngle,"-").concat(C.midAngle,"-").concat(N),tabIndex:-1,className:"recharts-pie-sector"},Mx(x,C,N),{onMouseEnter:y(C,N),onMouseLeave:w(C,N),onClick:v(C,N)}),h.createElement(eD,td({option:i??_,index:N,shapeType:"sector",isActive:T},E)))}))}function PDe(e){var t,{pieSettings:a,displayedData:s,cells:r,offset:i}=e,{cornerRadius:l,startAngle:o,endAngle:c,dataKey:d,nameKey:u,tooltipType:f}=a,p=Math.abs(a.minAngle),x=SDe(o,c),y=Math.abs(x),w=s.length<=1?0:(t=a.paddingAngle)!==null&&t!==void 0?t:0,v=s.filter(_=>zn(_,d,0)!==0).length,C=(y>=360?v:v-1)*w,N=y-v*p-C,S=s.reduce((_,E)=>{var A=zn(E,d,0);return _+(Pt(A)?A:0)},0),T;if(S>0){var k;T=s.map((_,E)=>{var A=zn(_,d,0),I=zn(_,u,E),z=CDe(a,i,_),F=(Pt(A)?A:0)/S,D,M=xa(xa({},_),r&&r[E]&&r[E].props);E?D=k.endAngle+cs(x)*w*(A!==0?1:0):D=o;var W=D+cs(x)*((A!==0?p:0)+F*N),Z=(D+W)/2,R=(z.innerRadius+z.outerRadius)/2,Q=[{name:I,value:A,payload:M,dataKey:d,type:f,graphicalItemId:a.id}],Y=Oa(z.cx,z.cy,R,Z);return k=xa(xa(xa(xa({},a.presentationProps),{},{percent:F,cornerRadius:typeof l=="string"?parseFloat(l):l,name:I,tooltipPayload:Q,midAngle:Z,middleRadius:R,tooltipPosition:Y},M),z),{},{value:A,dataKey:d,startAngle:D,endAngle:W,payload:M,paddingAngle:cs(x)*w}),k})}return T}function DDe(e){var{showLabels:t,sectors:a,children:s}=e,r=h.useMemo(()=>!t||!a?[]:a.map(i=>({value:i.value,payload:i.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:i.cx,cy:i.cy,innerRadius:i.innerRadius,outerRadius:i.outerRadius,startAngle:i.startAngle,endAngle:i.endAngle,clockWise:!1},fill:i.fill})),[a,t]);return h.createElement(p4e,{value:t?r:void 0},s)}function ODe(e){var{props:t,previousSectorsRef:a,id:s}=e,{sectors:r,isAnimationActive:i,animationBegin:l,animationDuration:o,animationEasing:c,activeShape:d,inactiveShape:u,onAnimationStart:f,onAnimationEnd:p}=t,x=Bx(t,"recharts-pie-"),y=a.current,[w,v]=h.useState(!1),C=h.useCallback(()=>{typeof p=="function"&&p(),v(!1)},[p]),N=h.useCallback(()=>{typeof f=="function"&&f(),v(!0)},[f]);return h.createElement(DDe,{showLabels:!w,sectors:r},h.createElement(Ux,{animationId:x,begin:l,duration:o,isActive:i,easing:c,onAnimationStart:N,onAnimationEnd:C,key:x},S=>{var T=[],k=r&&r[0],_=k?.startAngle;return r?.forEach((E,A)=>{var I=y&&y[A],z=A>0?ju(E,"paddingAngle",0):0;if(I){var F=na(I.endAngle-I.startAngle,E.endAngle-E.startAngle,S),D=xa(xa({},E),{},{startAngle:_+z,endAngle:_+F+z});T.push(D),_=D.endAngle}else{var{endAngle:M,startAngle:W}=E,Z=na(0,M-W,S),R=xa(xa({},E),{},{startAngle:_+z,endAngle:_+Z+z});T.push(R),_=R.endAngle}}),a.current=T,h.createElement(ds,null,h.createElement(LDe,{sectors:T,activeShape:d,inactiveShape:u,allOtherPieProps:t,shape:t.shape,id:s}))}),h.createElement(kDe,{showLabels:!w,sectors:r,props:t}),t.children)}var MDe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Ma.area};function IDe(e){var{id:t}=e,a=Lj(e,hDe),{hide:s,className:r,rootTabIndex:i}=e,l=h.useMemo(()=>J4(e.children,Aj),[e.children]),o=Ot(u=>D4e(u,t,l)),c=h.useRef(null),d=Tt("recharts-pie",r);return s||o==null?(c.current=null,h.createElement(ds,{tabIndex:i,className:d})):h.createElement(hr,{zIndex:e.zIndex},h.createElement(wDe,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:o,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),h.createElement(ds,{tabIndex:i,className:d},h.createElement(ODe,{props:xa(xa({},a),{},{sectors:o}),previousSectorsRef:c,id:t})))}function oX(e){var t=za(e,MDe),{id:a}=t,s=Lj(t,gDe),r=Or(s);return h.createElement(rD,{id:a,type:"pie"},i=>h.createElement(h.Fragment,null,h.createElement(uDe,{type:"pie",id:i,data:s.data,dataKey:s.dataKey,hide:s.hide,angleAxisId:0,radiusAxisId:0,name:s.name,nameKey:s.nameKey,tooltipType:s.tooltipType,legendType:s.legendType,fill:s.fill,cx:s.cx,cy:s.cy,startAngle:s.startAngle,endAngle:s.endAngle,paddingAngle:s.paddingAngle,minAngle:s.minAngle,innerRadius:s.innerRadius,outerRadius:s.outerRadius,cornerRadius:s.cornerRadius,presentationProps:r,maxRadius:t.maxRadius}),h.createElement(vDe,td({},s,{id:i})),h.createElement(IDe,td({},s,{id:i}))))}oX.displayName="Pie";var $De=["points"];function _U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function C_(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?_U(Object(a),!0).forEach(function(s){RDe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_U(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function RDe(e,t,a){return(t=zDe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function zDe(e){var t=FDe(e,"string");return typeof t=="symbol"?t:t+""}function FDe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aw(){return aw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},aw.apply(null,arguments)}function UDe(e,t){if(e==null)return{};var a,s,r=BDe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function BDe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function HDe(e){var{option:t,dotProps:a,className:s}=e;if(h.isValidElement(t))return h.cloneElement(t,a);if(typeof t=="function")return t(a);var r=Tt(s,typeof t!="boolean"?t.className:""),i=a??{},{points:l}=i,o=UDe(i,$De);return h.createElement(ZK,aw({},o,{className:r}))}function GDe(e,t){return e==null?!1:t?!0:e.length===1}function WDe(e){var{points:t,dot:a,className:s,dotClassName:r,dataKey:i,baseProps:l,needClip:o,clipPathId:c,zIndex:d=Ma.scatter}=e;if(!GDe(t,a))return null;var u=sX(a),f=PCe(a),p=t.map((y,w)=>{var v,C,N=C_(C_(C_({r:3},l),f),{},{index:w,cx:(v=y.x)!==null&&v!==void 0?v:void 0,cy:(C=y.y)!==null&&C!==void 0?C:void 0,dataKey:i,value:y.value,payload:y.payload,points:t});return h.createElement(HDe,{key:"dot-".concat(w),option:a,dotProps:N,className:r})}),x={};return o&&c!=null&&(x.clipPath="url(#clipPath-".concat(u?"":"dots-").concat(c,")")),h.createElement(hr,{zIndex:d},h.createElement(ds,aw({className:s},x),p))}function AU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function EU(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?AU(Object(a),!0).forEach(function(s){VDe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):AU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function VDe(e,t,a){return(t=qDe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function qDe(e){var t=YDe(e,"string");return typeof t=="symbol"?t:t+""}function YDe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cX=0,QDe={xAxis:{},yAxis:{},zAxis:{}},dX=fr({name:"cartesianAxis",initialState:QDe,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:ta()},replaceXAxis:{reducer(e,t){var{prev:a,next:s}=t.payload;e.xAxis[a.id]!==void 0&&(a.id!==s.id&&delete e.xAxis[a.id],e.xAxis[s.id]=s)},prepare:ta()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:ta()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:ta()},replaceYAxis:{reducer(e,t){var{prev:a,next:s}=t.payload;e.yAxis[a.id]!==void 0&&(a.id!==s.id&&delete e.yAxis[a.id],e.yAxis[s.id]=s)},prepare:ta()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:ta()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:ta()},replaceZAxis:{reducer(e,t){var{prev:a,next:s}=t.payload;e.zAxis[a.id]!==void 0&&(a.id!==s.id&&delete e.zAxis[a.id],e.zAxis[s.id]=s)},prepare:ta()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:ta()},updateYAxisWidth(e,t){var{id:a,width:s}=t.payload,r=e.yAxis[a];if(r){var i=r.widthHistory||[];if(i.length===3&&i[0]===i[2]&&s===i[1]&&s!==r.width&&Math.abs(s-i[0])<=1)return;var l=[...i,s].slice(-3);e.yAxis[a]=EU(EU({},e.yAxis[a]),{},{width:s,widthHistory:l})}}}}),{addXAxis:KDe,replaceXAxis:XDe,removeXAxis:ZDe,addYAxis:JDe,replaceYAxis:eOe,removeYAxis:tOe,addZAxis:$Ve,replaceZAxis:RVe,removeZAxis:zVe,updateYAxisWidth:nOe}=dX.actions,aOe=dX.reducer,sOe=nt([Ja],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),rOe=nt([sOe,Go,Wo],(e,t,a)=>{if(!(!e||t==null||a==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,a-e.top-e.bottom)}}),iD=()=>Ot(rOe),iOe=()=>Ot(Zke);function TU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function S_(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?TU(Object(a),!0).forEach(function(s){lOe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):TU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function lOe(e,t,a){return(t=oOe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function oOe(e){var t=cOe(e,"string");return typeof t=="symbol"?t:t+""}function cOe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dOe=e=>{var{point:t,childIndex:a,mainColor:s,activeDot:r,dataKey:i,clipPath:l}=e;if(r===!1||t.x==null||t.y==null)return null;var o={index:a,dataKey:i,cx:t.x,cy:t.y,r:4,fill:s??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},c=S_(S_(S_({},o),Nu(r)),HP(r)),d;return h.isValidElement(r)?d=h.cloneElement(r,c):typeof r=="function"?d=r(c):d=h.createElement(ZK,c),h.createElement(ds,{className:"recharts-active-dot",clipPath:l},d)};function uOe(e){var{points:t,mainColor:a,activeDot:s,itemDataKey:r,clipPath:i,zIndex:l=Ma.activeDot}=e,o=Ot(ed),c=iOe();if(t==null||c==null)return null;var d=t.find(u=>c.includes(u.payload));return ra(d)?null:h.createElement(hr,{zIndex:l},h.createElement(dOe,{point:d,childIndex:Number(o),mainColor:a,dataKey:r,activeDot:s,clipPath:i}))}var kU=(e,t,a)=>{var s=a??e;if(!ra(s))return ks(s,t,0)},mOe=(e,t,a)=>{var s={},r=e.filter(yj),i=e.filter(d=>d.stackId==null),l=r.reduce((d,u)=>(d[u.stackId]||(d[u.stackId]=[]),d[u.stackId].push(u),d),s),o=Object.entries(l).map(d=>{var[u,f]=d,p=f.map(y=>y.dataKey),x=kU(t,a,f[0].barSize);return{stackId:u,dataKeys:p,barSize:x}}),c=i.map(d=>{var u=[d.dataKey].filter(p=>p!=null),f=kU(t,a,d.barSize);return{stackId:void 0,dataKeys:u,barSize:f}});return[...o,...c]};function LU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Yy(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?LU(Object(a),!0).forEach(function(s){fOe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):LU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function fOe(e,t,a){return(t=hOe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function hOe(e){var t=gOe(e,"string");return typeof t=="symbol"?t:t+""}function gOe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pOe(e,t,a,s,r){var i=s.length;if(!(i<1)){var l=ks(e,a,0,!0),o,c=[];if(ca(s[0].barSize)){var d=!1,u=a/i,f=s.reduce((C,N)=>C+(N.barSize||0),0);f+=(i-1)*l,f>=a&&(f-=(i-1)*l,l=0),f>=a&&u>0&&(d=!0,u*=.9,f=i*u);var p=(a-f)/2>>0,x={offset:p-l,size:0};o=s.reduce((C,N)=>{var S,T={stackId:N.stackId,dataKeys:N.dataKeys,position:{offset:x.offset+x.size+l,size:d?u:(S=N.barSize)!==null&&S!==void 0?S:0}},k=[...C,T];return x=k[k.length-1].position,k},c)}else{var y=ks(t,a,0,!0);a-2*y-(i-1)*l<=0&&(l=0);var w=(a-2*y-(i-1)*l)/i;w>1&&(w>>=0);var v=ca(r)?Math.min(w,r):w;o=s.reduce((C,N,S)=>[...C,{stackId:N.stackId,dataKeys:N.dataKeys,position:{offset:y+(w+l)*S+(w-v)/2,size:v}}],c)}return o}}var xOe=(e,t,a,s,r,i,l)=>{var o=ra(l)?t:l,c=pOe(a,s,r!==i?r:i,e,o);return r!==i&&c!=null&&(c=c.map(d=>Yy(Yy({},d),{},{position:Yy(Yy({},d.position),{},{offset:d.position.offset-r/2})}))),c},yOe=(e,t)=>{var a=p4(t);if(!(!e||a==null||t==null)){var{stackId:s}=t;if(s!=null){var r=e[s];if(r){var{stackedData:i}=r;if(i)return i.find(l=>l.key===a)}}}};function bOe(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&ca(e.zIndex)?e.zIndex:t}var uX=e=>{var{chartData:t}=e,a=qn(),s=Os();return h.useEffect(()=>s?()=>{}:(a(FF(t)),()=>{a(FF(void 0))}),[t,a,s]),null},PU={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},mX=fr({name:"brush",initialState:PU,reducers:{setBrushSettings(e,t){return t.payload==null?PU:t.payload}}}),{setBrushSettings:FVe}=mX.actions,vOe=mX.reducer;function wOe(e,t,a){return(t=NOe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function NOe(e){var t=jOe(e,"string");return typeof t=="symbol"?t:t+""}function jOe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class lD{static create(t){return new lD(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:a,position:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(s)switch(s){case"start":return this.scale(t);case"middle":{var r=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+r}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(a){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}isInRange(t){var a=this.range(),s=a[0],r=a[a.length-1];return s<=r?t>=s&&t<=r:t>=r&&t<=s}}wOe(lD,"EPS",1e-4);function COe(e){return(e%180+180)%180}var SOe=function(t){var{width:a,height:s}=t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=COe(r),l=i*Math.PI/180,o=Math.atan(s/a),c=l>o&&l<Math.PI-o?s/Math.sin(l):a/Math.cos(l);return Math.abs(c)},_Oe={dots:[],areas:[],lines:[]},fX=fr({name:"referenceElements",initialState:_Oe,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var a=$i(e).dots.findIndex(s=>s===t.payload);a!==-1&&e.dots.splice(a,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var a=$i(e).areas.findIndex(s=>s===t.payload);a!==-1&&e.areas.splice(a,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var a=$i(e).lines.findIndex(s=>s===t.payload);a!==-1&&e.lines.splice(a,1)}}}),{addDot:UVe,removeDot:BVe,addArea:HVe,removeArea:GVe,addLine:WVe,removeLine:VVe}=fX.actions,AOe=fX.reducer,EOe=h.createContext(void 0),TOe=e=>{var{children:t}=e,[a]=h.useState("".concat(Np("recharts"),"-clip")),s=iD();if(s==null)return null;var{x:r,y:i,width:l,height:o}=s;return h.createElement(EOe.Provider,{value:a},h.createElement("defs",null,h.createElement("clipPath",{id:a},h.createElement("rect",{x:r,y:i,height:o,width:l}))),t)};function hX(e,t){if(t<1)return[];if(t===1)return e;for(var a=[],s=0;s<e.length;s+=t){var r=e[s];r!==void 0&&a.push(r)}return a}function kOe(e,t,a){var s={width:e.width+t.width,height:e.height+t.height};return SOe(s,a)}function LOe(e,t,a){var s=a==="width",{x:r,y:i,width:l,height:o}=e;return t===1?{start:s?r:i,end:s?r+l:i+o}:{start:s?r+l:i+o,end:s?r:i}}function Pp(e,t,a,s,r){if(e*t<e*s||e*t>e*r)return!1;var i=a();return e*(t-e*i/2-s)>=0&&e*(t+e*i/2-r)<=0}function POe(e,t){return hX(e,t+1)}function DOe(e,t,a,s,r){for(var i=(s||[]).slice(),{start:l,end:o}=t,c=0,d=1,u=l,f=function(){var y=s?.[c];if(y===void 0)return{v:hX(s,d)};var w=c,v,C=()=>(v===void 0&&(v=a(y,w)),v),N=y.coordinate,S=c===0||Pp(e,N,C,u,o);S||(c=0,u=l,d+=1),S&&(u=N+e*(C()/2+r),c+=d)},p;d<=i.length;)if(p=f(),p)return p.v;return[]}function OOe(e,t,a,s,r){var i=(s||[]).slice(),l=i.length;if(l===0)return[];for(var{start:o,end:c}=t,d=1;d<=l;d++){for(var u=(l-1)%d,f=o,p=!0,x=function(){var N=s[y],S=y,T,k=()=>(T===void 0&&(T=a(N,S)),T),_=N.coordinate,E=y===u||Pp(e,_,k,f,c);if(!E)return p=!1,1;E&&(f=_+e*(k()/2+r))},y=u;y<l&&!x();y+=d);if(p){for(var w=[],v=u;v<l;v+=d)w.push(s[v]);return w}}return[]}function DU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Ss(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?DU(Object(a),!0).forEach(function(s){MOe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):DU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function MOe(e,t,a){return(t=IOe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function IOe(e){var t=$Oe(e,"string");return typeof t=="symbol"?t:t+""}function $Oe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ROe(e,t,a,s,r){for(var i=(s||[]).slice(),l=i.length,{start:o}=t,{end:c}=t,d=function(p){var x=i[p],y,w=()=>(y===void 0&&(y=a(x,p)),y);if(p===l-1){var v=e*(x.coordinate+e*w()/2-c);i[p]=x=Ss(Ss({},x),{},{tickCoord:v>0?x.coordinate-v*e:x.coordinate})}else i[p]=x=Ss(Ss({},x),{},{tickCoord:x.coordinate});if(x.tickCoord!=null){var C=Pp(e,x.tickCoord,w,o,c);C&&(c=x.tickCoord-e*(w()/2+r),i[p]=Ss(Ss({},x),{},{isShow:!0}))}},u=l-1;u>=0;u--)d(u);return i}function zOe(e,t,a,s,r,i){var l=(s||[]).slice(),o=l.length,{start:c,end:d}=t;if(i){var u=s[o-1],f=a(u,o-1),p=e*(u.coordinate+e*f/2-d);if(l[o-1]=u=Ss(Ss({},u),{},{tickCoord:p>0?u.coordinate-p*e:u.coordinate}),u.tickCoord!=null){var x=Pp(e,u.tickCoord,()=>f,c,d);x&&(d=u.tickCoord-e*(f/2+r),l[o-1]=Ss(Ss({},u),{},{isShow:!0}))}}for(var y=i?o-1:o,w=function(N){var S=l[N],T,k=()=>(T===void 0&&(T=a(S,N)),T);if(N===0){var _=e*(S.coordinate-e*k()/2-c);l[N]=S=Ss(Ss({},S),{},{tickCoord:_<0?S.coordinate-_*e:S.coordinate})}else l[N]=S=Ss(Ss({},S),{},{tickCoord:S.coordinate});if(S.tickCoord!=null){var E=Pp(e,S.tickCoord,k,c,d);E&&(c=S.tickCoord+e*(k()/2+r),l[N]=Ss(Ss({},S),{},{isShow:!0}))}},v=0;v<y;v++)w(v);return l}function oD(e,t,a){var{tick:s,ticks:r,viewBox:i,minTickGap:l,orientation:o,interval:c,tickFormatter:d,unit:u,angle:f}=e;if(!r||!r.length||!s)return[];if(Pt(c)||hj.isSsr){var p;return(p=POe(r,Pt(c)?c:0))!==null&&p!==void 0?p:[]}var x=[],y=o==="top"||o==="bottom"?"width":"height",w=u&&y==="width"?Vg(u,{fontSize:t,letterSpacing:a}):{width:0,height:0},v=(S,T)=>{var k=typeof d=="function"?d(S.value,T):S.value;return y==="width"?kOe(Vg(k,{fontSize:t,letterSpacing:a}),w,f):Vg(k,{fontSize:t,letterSpacing:a})[y]},C=r.length>=2?cs(r[1].coordinate-r[0].coordinate):1,N=LOe(i,C,y);return c==="equidistantPreserveStart"?DOe(C,N,v,r,l):c==="equidistantPreserveEnd"?OOe(C,N,v,r,l):(c==="preserveStart"||c==="preserveStartEnd"?x=zOe(C,N,v,r,l,c==="preserveStartEnd"):x=ROe(C,N,v,r,l),x.filter(S=>S.isShow))}var FOe=e=>{var{ticks:t,label:a,labelGapWithTick:s=5,tickSize:r=0,tickMargin:i=0}=e,l=0;if(t){Array.from(t).forEach(u=>{if(u){var f=u.getBoundingClientRect();f.width>l&&(l=f.width)}});var o=a?a.getBoundingClientRect().width:0,c=r+i,d=l+c+o+(a?s:0);return Math.round(d)}return 0},UOe=["axisLine","width","height","className","hide","ticks","axisType"];function BOe(e,t){if(e==null)return{};var a,s,r=HOe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function HOe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function Eu(){return Eu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Eu.apply(null,arguments)}function OU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Pa(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?OU(Object(a),!0).forEach(function(s){GOe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):OU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function GOe(e,t,a){return(t=WOe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function WOe(e){var t=VOe(e,"string");return typeof t=="symbol"?t:t+""}function VOe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bo={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Ma.axis};function qOe(e){var{x:t,y:a,width:s,height:r,orientation:i,mirror:l,axisLine:o,otherSvgProps:c}=e;if(!o)return null;var d=Pa(Pa(Pa({},c),Or(o)),{},{fill:"none"});if(i==="top"||i==="bottom"){var u=+(i==="top"&&!l||i==="bottom"&&l);d=Pa(Pa({},d),{},{x1:t,y1:a+u*r,x2:t+s,y2:a+u*r})}else{var f=+(i==="left"&&!l||i==="right"&&l);d=Pa(Pa({},d),{},{x1:t+f*s,y1:a,x2:t+f*s,y2:a+r})}return h.createElement("line",Eu({},d,{className:Tt("recharts-cartesian-axis-line",ju(o,"className"))}))}function YOe(e,t,a,s,r,i,l,o,c){var d,u,f,p,x,y,w=o?-1:1,v=e.tickSize||l,C=Pt(e.tickCoord)?e.tickCoord:e.coordinate;switch(i){case"top":d=u=e.coordinate,p=a+ +!o*r,f=p-w*v,y=f-w*c,x=C;break;case"left":f=p=e.coordinate,u=t+ +!o*s,d=u-w*v,x=d-w*c,y=C;break;case"right":f=p=e.coordinate,u=t+ +o*s,d=u+w*v,x=d+w*c,y=C;break;default:d=u=e.coordinate,p=a+ +o*r,f=p+w*v,y=f+w*c,x=C;break}return{line:{x1:d,y1:f,x2:u,y2:p},tick:{x,y}}}function QOe(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function KOe(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function XOe(e){var{option:t,tickProps:a,value:s}=e,r,i=Tt(a.className,"recharts-cartesian-axis-tick-value");if(h.isValidElement(t))r=h.cloneElement(t,Pa(Pa({},a),{},{className:i}));else if(typeof t=="function")r=t(Pa(Pa({},a),{},{className:i}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=Tt(l,t?.className)),r=h.createElement(Ej,Eu({},a,{className:l}),s)}return r}var ZOe=h.forwardRef((e,t)=>{var{ticks:a=[],tick:s,tickLine:r,stroke:i,tickFormatter:l,unit:o,padding:c,tickTextProps:d,orientation:u,mirror:f,x:p,y:x,width:y,height:w,tickSize:v,tickMargin:C,fontSize:N,letterSpacing:S,getTicksConfig:T,events:k,axisType:_}=e,E=oD(Pa(Pa({},T),{},{ticks:a}),N,S),A=QOe(u,f),I=KOe(u,f),z=Or(T),F=Nu(s),D={};typeof r=="object"&&(D=r);var M=Pa(Pa({},z),{},{fill:"none"},D),W=E.map(Q=>Pa({entry:Q},YOe(Q,p,x,y,w,u,v,f,C))),Z=W.map(Q=>{var{entry:Y,line:oe}=Q;return h.createElement(ds,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(Y.value,"-").concat(Y.coordinate,"-").concat(Y.tickCoord)},r&&h.createElement("line",Eu({},M,oe,{className:Tt("recharts-cartesian-axis-tick-line",ju(r,"className"))})))}),R=W.map((Q,Y)=>{var{entry:oe,tick:re}=Q,ee=Pa(Pa(Pa(Pa({textAnchor:A,verticalAnchor:I},z),{},{stroke:"none",fill:i},F),re),{},{index:Y,payload:oe,visibleTicksCount:E.length,tickFormatter:l,padding:c},d);return h.createElement(ds,Eu({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(oe.value,"-").concat(oe.coordinate,"-").concat(oe.tickCoord)},Mx(k,oe,Y)),s&&h.createElement(XOe,{option:s,tickProps:ee,value:"".concat(typeof l=="function"?l(oe.value,Y):oe.value).concat(o||"")}))});return h.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(_,"-ticks")},R.length>0&&h.createElement(hr,{zIndex:Ma.label},h.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(_,"-tick-labels"),ref:t},R)),Z.length>0&&h.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(_,"-tick-lines")},Z))}),JOe=h.forwardRef((e,t)=>{var{axisLine:a,width:s,height:r,className:i,hide:l,ticks:o,axisType:c}=e,d=BOe(e,UOe),[u,f]=h.useState(""),[p,x]=h.useState(""),y=h.useRef(null);h.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var v;return FOe({ticks:y.current,label:(v=e.labelRef)===null||v===void 0?void 0:v.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var w=h.useCallback(v=>{if(v){var C=v.getElementsByClassName("recharts-cartesian-axis-tick-value");y.current=C;var N=C[0];if(N){var S=window.getComputedStyle(N),T=S.fontSize,k=S.letterSpacing;(T!==u||k!==p)&&(f(T),x(k))}}},[u,p]);return l||s!=null&&s<=0||r!=null&&r<=0?null:h.createElement(hr,{zIndex:e.zIndex},h.createElement(ds,{className:Tt("recharts-cartesian-axis",i)},h.createElement(qOe,{x:e.x,y:e.y,width:s,height:r,orientation:e.orientation,mirror:e.mirror,axisLine:a,otherSvgProps:Or(e)}),h.createElement(ZOe,{ref:w,axisType:c,events:d,fontSize:u,getTicksConfig:e,height:e.height,letterSpacing:p,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:o,unit:e.unit,width:e.width,x:e.x,y:e.y}),h.createElement(QPe,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},h.createElement(r4e,{label:e.label,labelRef:e.labelRef}),e.children)))}),cD=h.forwardRef((e,t)=>{var a=za(e,bo);return h.createElement(JOe,Eu({},a,{ref:t}))});cD.displayName="CartesianAxis";var e3e=["x1","y1","x2","y2","key"],t3e=["offset"],n3e=["xAxisId","yAxisId"],a3e=["xAxisId","yAxisId"];function MU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function _s(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?MU(Object(a),!0).forEach(function(s){s3e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):MU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function s3e(e,t,a){return(t=r3e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r3e(e){var t=i3e(e,"string");return typeof t=="symbol"?t:t+""}function i3e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zd(){return Zd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Zd.apply(null,arguments)}function sw(e,t){if(e==null)return{};var a,s,r=l3e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function l3e(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var o3e=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:a,x:s,y:r,width:i,height:l,ry:o}=e;return h.createElement("rect",{x:s,y:r,ry:o,width:i,height:l,stroke:"none",fill:t,fillOpacity:a,className:"recharts-cartesian-grid-bg"})};function gX(e){var{option:t,lineItemProps:a}=e,s;if(h.isValidElement(t))s=h.cloneElement(t,a);else if(typeof t=="function")s=t(a);else{var r,{x1:i,y1:l,x2:o,y2:c,key:d}=a,u=sw(a,e3e),f=(r=Or(u))!==null&&r!==void 0?r:{},{offset:p}=f,x=sw(f,t3e);s=h.createElement("line",Zd({},x,{x1:i,y1:l,x2:o,y2:c,fill:"none",key:d}))}return s}function c3e(e){var{x:t,width:a,horizontal:s=!0,horizontalPoints:r}=e;if(!s||!r||!r.length)return null;var{xAxisId:i,yAxisId:l}=e,o=sw(e,n3e),c=r.map((d,u)=>{var f=_s(_s({},o),{},{x1:t,y1:d,x2:t+a,y2:d,key:"line-".concat(u),index:u});return h.createElement(gX,{key:"line-".concat(u),option:s,lineItemProps:f})});return h.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function d3e(e){var{y:t,height:a,vertical:s=!0,verticalPoints:r}=e;if(!s||!r||!r.length)return null;var{xAxisId:i,yAxisId:l}=e,o=sw(e,a3e),c=r.map((d,u)=>{var f=_s(_s({},o),{},{x1:d,y1:t,x2:d,y2:t+a,key:"line-".concat(u),index:u});return h.createElement(gX,{option:s,lineItemProps:f,key:"line-".concat(u)})});return h.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function u3e(e){var{horizontalFill:t,fillOpacity:a,x:s,y:r,width:i,height:l,horizontalPoints:o,horizontal:c=!0}=e;if(!c||!t||!t.length||o==null)return null;var d=o.map(f=>Math.round(f+r-r)).sort((f,p)=>f-p);r!==d[0]&&d.unshift(0);var u=d.map((f,p)=>{var x=!d[p+1],y=x?r+l-f:d[p+1]-f;if(y<=0)return null;var w=p%t.length;return h.createElement("rect",{key:"react-".concat(p),y:f,x:s,height:y,width:i,stroke:"none",fill:t[w],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return h.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function m3e(e){var{vertical:t=!0,verticalFill:a,fillOpacity:s,x:r,y:i,width:l,height:o,verticalPoints:c}=e;if(!t||!a||!a.length)return null;var d=c.map(f=>Math.round(f+r-r)).sort((f,p)=>f-p);r!==d[0]&&d.unshift(0);var u=d.map((f,p)=>{var x=!d[p+1],y=x?r+l-f:d[p+1]-f;if(y<=0)return null;var w=p%a.length;return h.createElement("rect",{key:"react-".concat(p),x:f,y:i,width:y,height:o,stroke:"none",fill:a[w],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return h.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var f3e=(e,t)=>{var{xAxis:a,width:s,height:r,offset:i}=e;return zY(oD(_s(_s(_s({},bo),a),{},{ticks:FY(a),viewBox:{x:0,y:0,width:s,height:r}})),i.left,i.left+i.width,t)},h3e=(e,t)=>{var{yAxis:a,width:s,height:r,offset:i}=e;return zY(oD(_s(_s(_s({},bo),a),{},{ticks:FY(a),viewBox:{x:0,y:0,width:s,height:r}})),i.top,i.top+i.height,t)},g3e={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Ma.grid};function JT(e){var t=n4(),a=a4(),s=YY(),r=_s(_s({},za(e,g3e)),{},{x:Pt(e.x)?e.x:s.left,y:Pt(e.y)?e.y:s.top,width:Pt(e.width)?e.width:s.width,height:Pt(e.height)?e.height:s.height}),{xAxisId:i,yAxisId:l,x:o,y:c,width:d,height:u,syncWithTicks:f,horizontalValues:p,verticalValues:x}=r,y=Os(),w=Ot(I=>EF(I,"xAxis",i,y)),v=Ot(I=>EF(I,"yAxis",l,y));if(!El(d)||!El(u)||!Pt(o)||!Pt(c))return null;var C=r.verticalCoordinatesGenerator||f3e,N=r.horizontalCoordinatesGenerator||h3e,{horizontalPoints:S,verticalPoints:T}=r;if((!S||!S.length)&&typeof N=="function"){var k=p&&p.length,_=N({yAxis:v?_s(_s({},v),{},{ticks:k?p:v.ticks}):void 0,width:t??d,height:a??u,offset:s},k?!0:f);Uv(Array.isArray(_),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof _,"]")),Array.isArray(_)&&(S=_)}if((!T||!T.length)&&typeof C=="function"){var E=x&&x.length,A=C({xAxis:w?_s(_s({},w),{},{ticks:E?x:w.ticks}):void 0,width:t??d,height:a??u,offset:s},E?!0:f);Uv(Array.isArray(A),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof A,"]")),Array.isArray(A)&&(T=A)}return h.createElement(hr,{zIndex:r.zIndex},h.createElement("g",{className:"recharts-cartesian-grid"},h.createElement(o3e,{fill:r.fill,fillOpacity:r.fillOpacity,x:r.x,y:r.y,width:r.width,height:r.height,ry:r.ry}),h.createElement(u3e,Zd({},r,{horizontalPoints:S})),h.createElement(m3e,Zd({},r,{verticalPoints:T})),h.createElement(c3e,Zd({},r,{offset:s,horizontalPoints:S,xAxis:w,yAxis:v})),h.createElement(d3e,Zd({},r,{offset:s,verticalPoints:T,xAxis:w,yAxis:v}))))}JT.displayName="CartesianGrid";var p3e={},pX=fr({name:"errorBars",initialState:p3e,reducers:{addErrorBar:(e,t)=>{var{itemId:a,errorBar:s}=t.payload;e[a]||(e[a]=[]),e[a].push(s)},replaceErrorBar:(e,t)=>{var{itemId:a,prev:s,next:r}=t.payload;e[a]&&(e[a]=e[a].map(i=>i.dataKey===s.dataKey&&i.direction===s.direction?r:i))},removeErrorBar:(e,t)=>{var{itemId:a,errorBar:s}=t.payload;e[a]&&(e[a]=e[a].filter(r=>r.dataKey!==s.dataKey||r.direction!==s.direction))}}}),{addErrorBar:qVe,replaceErrorBar:YVe,removeErrorBar:QVe}=pX.actions,x3e=pX.reducer,y3e=["children"];function b3e(e,t){if(e==null)return{};var a,s,r=v3e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function v3e(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var w3e={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},N3e=h.createContext(w3e);function xX(e){var{children:t}=e,a=b3e(e,y3e);return h.createElement(N3e.Provider,{value:a},t)}function dD(e,t){var a,s,r=Ot(d=>qo(d,e)),i=Ot(d=>Yo(d,t)),l=(a=r?.allowDataOverflow)!==null&&a!==void 0?a:ss.allowDataOverflow,o=(s=i?.allowDataOverflow)!==null&&s!==void 0?s:rs.allowDataOverflow,c=l||o;return{needClip:c,needClipX:l,needClipY:o}}function yX(e){var{xAxisId:t,yAxisId:a,clipPathId:s}=e,r=iD(),{needClipX:i,needClipY:l,needClip:o}=dD(t,a);if(!o||!r)return null;var{x:c,y:d,width:u,height:f}=r;return h.createElement("clipPath",{id:"clipPath-".concat(s)},h.createElement("rect",{x:i?c:c-u/2,y:l?d:d-f/2,width:i?u:u*2,height:l?f:f*2}))}var bX=(e,t,a,s)=>Jc(e,"xAxis",t,s),vX=(e,t,a,s)=>Zc(e,"xAxis",t,s),wX=(e,t,a,s)=>Jc(e,"yAxis",a,s),NX=(e,t,a,s)=>Zc(e,"yAxis",a,s),j3e=nt([hn,bX,wX,vX,NX],(e,t,a,s,r)=>md(e,"xAxis")?Af(t,s,!1):Af(a,r,!1)),C3e=(e,t,a,s,r)=>r;function S3e(e){return e.type==="line"}var _3e=nt([wj,C3e],(e,t)=>e.filter(S3e).find(a=>a.id===t)),A3e=nt([hn,bX,wX,vX,NX,_3e,j3e,l4],(e,t,a,s,r,i,l,o)=>{var{chartData:c,dataStartIndex:d,dataEndIndex:u}=o;if(!(i==null||t==null||a==null||s==null||r==null||s.length===0||r.length===0||l==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:f,data:p}=i,x;if(p!=null&&p.length>0?x=p:x=c?.slice(d,u+1),x!=null)return g5e({layout:e,xAxis:t,yAxis:a,xAxisTicks:s,yAxisTicks:r,dataKey:f,bandSize:l,displayedData:x})}});function E3e(e){var t=Nu(e),a=3,s=2;if(t!=null){var{r,strokeWidth:i}=t,l=Number(r),o=Number(i);return(Number.isNaN(l)||l<0)&&(l=a),(Number.isNaN(o)||o<0)&&(o=s),{r:l,strokeWidth:o}}return{r:a,strokeWidth:s}}var __={exports:{}},A_={};var IU;function T3e(){if(IU)return A_;IU=1;var e=Pf();function t(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var a=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,r=e.useRef,i=e.useEffect,l=e.useMemo,o=e.useDebugValue;return A_.useSyncExternalStoreWithSelector=function(c,d,u,f,p){var x=r(null);if(x.current===null){var y={hasValue:!1,value:null};x.current=y}else y=x.current;x=l(function(){function v(k){if(!C){if(C=!0,N=k,k=f(k),p!==void 0&&y.hasValue){var _=y.value;if(p(_,k))return S=_}return S=k}if(_=S,a(N,k))return _;var E=f(k);return p!==void 0&&p(_,E)?(N=k,_):(N=k,S=E)}var C=!1,N,S,T=u===void 0?null:u;return[function(){return v(d())},T===null?void 0:function(){return v(T())}]},[d,u,f,p]);var w=s(c,x[0],x[1]);return i(function(){y.hasValue=!0,y.value=w},[w]),o(w),w},A_}var $U;function k3e(){return $U||($U=1,__.exports=T3e()),__.exports}var L3e=k3e();function P3e(e){e()}function D3e(){let e=null,t=null;return{clear(){e=null,t=null},notify(){P3e(()=>{let a=e;for(;a;)a.callback(),a=a.next})},get(){const a=[];let s=e;for(;s;)a.push(s),s=s.next;return a},subscribe(a){let s=!0;const r=t={callback:a,next:null,prev:t};return r.prev?r.prev.next=r:e=r,function(){!s||e===null||(s=!1,r.next?r.next.prev=r.prev:t=r.prev,r.prev?r.prev.next=r.next:e=r.next)}}}}var RU={notify(){},get:()=>[]};function O3e(e,t){let a,s=RU,r=0,i=!1;function l(w){u();const v=s.subscribe(w);let C=!1;return()=>{C||(C=!0,v(),f())}}function o(){s.notify()}function c(){y.onStateChange&&y.onStateChange()}function d(){return i}function u(){r++,a||(a=e.subscribe(c),s=D3e())}function f(){r--,a&&r===0&&(a(),a=void 0,s.clear(),s=RU)}function p(){i||(i=!0,u())}function x(){i&&(i=!1,f())}const y={addNestedSub:l,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:d,trySubscribe:p,tryUnsubscribe:x,getListeners:()=>s};return y}var M3e=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",I3e=M3e(),$3e=()=>typeof navigator<"u"&&navigator.product==="ReactNative",R3e=$3e(),z3e=()=>I3e||R3e?h.useLayoutEffect:h.useEffect,F3e=z3e();function zU(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function U3e(e,t){if(zU(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;for(let r=0;r<a.length;r++)if(!Object.prototype.hasOwnProperty.call(t,a[r])||!zU(e[a[r]],t[a[r]]))return!1;return!0}var B3e=Symbol.for("react-redux-context"),H3e=typeof globalThis<"u"?globalThis:{};function G3e(){if(!h.createContext)return{};const e=H3e[B3e]??=new Map;let t=e.get(h.createContext);return t||(t=h.createContext(null),e.set(h.createContext,t)),t}var W3e=G3e();function V3e(e){const{children:t,context:a,serverState:s,store:r}=e,i=h.useMemo(()=>{const c=O3e(r);return{store:r,subscription:c,getServerState:s?()=>s:void 0}},[r,s]),l=h.useMemo(()=>r.getState(),[r]);F3e(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),l!==r.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,l]);const o=a||W3e;return h.createElement(o.Provider,{value:i},t)}var q3e=V3e,Y3e=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function Q3e(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function Pj(e,t){var a=new Set([...Object.keys(e),...Object.keys(t)]);for(var s of a)if(Y3e.has(s)){if(e[s]==null&&t[s]==null)continue;if(!U3e(e[s],t[s]))return!1}else if(!Q3e(e[s],t[s]))return!1;return!0}var K3e=["id"],X3e=["type","layout","connectNulls","needClip","shape"],Z3e=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Dp(){return Dp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Dp.apply(null,arguments)}function FU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function ol(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?FU(Object(a),!0).forEach(function(s){J3e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):FU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function J3e(e,t,a){return(t=e5e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function e5e(e){var t=t5e(e,"string");return typeof t=="symbol"?t:t+""}function t5e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uD(e,t){if(e==null)return{};var a,s,r=n5e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function n5e(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var a5e=e=>{var{dataKey:t,name:a,stroke:s,legendType:r,hide:i}=e;return[{inactive:i,dataKey:t,type:r,color:s,value:Kf(a,t),payload:e}]},s5e=h.memo(e=>{var{dataKey:t,data:a,stroke:s,strokeWidth:r,fill:i,name:l,hide:o,unit:c,tooltipType:d,id:u}=e,f={dataDefinedOnItem:a,positions:void 0,settings:{stroke:s,strokeWidth:r,fill:i,dataKey:t,nameKey:void 0,name:Kf(l,t),hide:o,type:d,color:s,unit:c,graphicalItemId:u}};return h.createElement(sD,{tooltipEntrySettings:f})}),jX=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function r5e(e,t){for(var a=e.length%2!==0?[...e,0]:e,s=[],r=0;r<t;++r)s=[...s,...a];return s}var i5e=(e,t,a)=>{var s=a.reduce((f,p)=>f+p);if(!s)return jX(t,e);for(var r=Math.floor(e/s),i=e%s,l=t-e,o=[],c=0,d=0;c<a.length;d+=a[c],++c)if(d+a[c]>i){o=[...a.slice(0,c),i-d];break}var u=o.length%2===0?[0,l]:[l];return[...r5e(a,r),...o,...u].map(f=>"".concat(f,"px")).join(", ")};function l5e(e){var{clipPathId:t,points:a,props:s}=e,{dot:r,dataKey:i,needClip:l}=s,{id:o}=s,c=uD(s,K3e),d=Or(c);return h.createElement(WDe,{points:a,dot:r,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:i,baseProps:d,needClip:l,clipPathId:t})}function o5e(e){var{showLabels:t,children:a,points:s}=e,r=h.useMemo(()=>s?.map(i=>{var l,o,c={x:(l=i.x)!==null&&l!==void 0?l:0,y:(o=i.y)!==null&&o!==void 0?o:0,width:0,lowerWidth:0,upperWidth:0,height:0};return ol(ol({},c),{},{value:i.value,payload:i.payload,viewBox:c,parentViewBox:void 0,fill:void 0})}),[s]);return h.createElement(KK,{value:t?r:void 0},a)}function UU(e){var{clipPathId:t,pathRef:a,points:s,strokeDasharray:r,props:i}=e,{type:l,layout:o,connectNulls:c,needClip:d,shape:u}=i,f=uD(i,X3e),p=ol(ol({},Fs(f)),{},{fill:"none",className:"recharts-line-curve",clipPath:d?"url(#clipPath-".concat(t,")"):void 0,points:s,type:l,layout:o,connectNulls:c,strokeDasharray:r??i.strokeDasharray});return h.createElement(h.Fragment,null,s?.length>1&&h.createElement(eD,Dp({shapeType:"curve",option:u},p,{pathRef:a})),h.createElement(l5e,{points:s,clipPathId:t,props:i}))}function c5e(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function d5e(e){var{clipPathId:t,props:a,pathRef:s,previousPointsRef:r,longestAnimatedLengthRef:i}=e,{points:l,strokeDasharray:o,isAnimationActive:c,animationBegin:d,animationDuration:u,animationEasing:f,animateNewValues:p,width:x,height:y,onAnimationEnd:w,onAnimationStart:v}=a,C=r.current,N=Bx(l,"recharts-line-"),S=h.useRef(N),[T,k]=h.useState(!1),_=!T,E=h.useCallback(()=>{typeof w=="function"&&w(),k(!1)},[w]),A=h.useCallback(()=>{typeof v=="function"&&v(),k(!0)},[v]),I=c5e(s.current),z=h.useRef(0);S.current!==N&&(z.current=i.current,S.current=N);var F=z.current;return h.createElement(o5e,{points:l,showLabels:_},a.children,h.createElement(Ux,{animationId:N,begin:d,duration:u,isActive:c,easing:f,onAnimationEnd:E,onAnimationStart:A,key:N},D=>{var M=na(F,I+F,D),W=Math.min(M,I),Z;if(c)if(o){var R="".concat(o).split(/[,\s]+/gim).map(oe=>parseFloat(oe));Z=i5e(W,I,R)}else Z=jX(I,W);else Z=o==null?void 0:String(o);if(D>0&&I>0&&(r.current=l,i.current=Math.max(i.current,W)),C){var Q=C.length/l.length,Y=D===1?l:l.map((oe,re)=>{var ee=Math.floor(re*Q);if(C[ee]){var H=C[ee];return ol(ol({},oe),{},{x:na(H.x,oe.x,D),y:na(H.y,oe.y,D)})}return p?ol(ol({},oe),{},{x:na(x*2,oe.x,D),y:na(y/2,oe.y,D)}):ol(ol({},oe),{},{x:oe.x,y:oe.y})});return r.current=Y,h.createElement(UU,{props:a,points:Y,clipPathId:t,pathRef:s,strokeDasharray:Z})}return h.createElement(UU,{props:a,points:l,clipPathId:t,pathRef:s,strokeDasharray:Z})}),h.createElement(K4,{label:a.label}))}function u5e(e){var{clipPathId:t,props:a}=e,s=h.useRef(null),r=h.useRef(0),i=h.useRef(null);return h.createElement(d5e,{props:a,clipPathId:t,previousPointsRef:s,longestAnimatedLengthRef:r,pathRef:i})}var m5e=(e,t)=>{var a,s;return{x:(a=e.x)!==null&&a!==void 0?a:void 0,y:(s=e.y)!==null&&s!==void 0?s:void 0,value:e.value,errorVal:zn(e.payload,t)}};class f5e extends h.Component{render(){var{hide:t,dot:a,points:s,className:r,xAxisId:i,yAxisId:l,top:o,left:c,width:d,height:u,id:f,needClip:p,zIndex:x}=this.props;if(t)return null;var y=Tt("recharts-line",r),w=f,{r:v,strokeWidth:C}=E3e(a),N=sX(a),S=v*2+C,T=p?"url(#clipPath-".concat(N?"":"dots-").concat(w,")"):void 0;return h.createElement(hr,{zIndex:x},h.createElement(ds,{className:y},p&&h.createElement("defs",null,h.createElement(yX,{clipPathId:w,xAxisId:i,yAxisId:l}),!N&&h.createElement("clipPath",{id:"clipPath-dots-".concat(w)},h.createElement("rect",{x:c-S/2,y:o-S/2,width:d+S,height:u+S}))),h.createElement(xX,{xAxisId:i,yAxisId:l,data:s,dataPointFormatter:m5e,errorBarOffset:0},h.createElement(u5e,{props:this.props,clipPathId:w}))),h.createElement(uOe,{activeDot:this.props.activeDot,points:s,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:T}))}}var CX={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:Ma.line,type:"linear"};function h5e(e){var t=za(e,CX),{activeDot:a,animateNewValues:s,animationBegin:r,animationDuration:i,animationEasing:l,connectNulls:o,dot:c,hide:d,isAnimationActive:u,label:f,legendType:p,xAxisId:x,yAxisId:y,id:w}=t,v=uD(t,Z3e),{needClip:C}=dD(x,y),N=iD(),S=Xf(),T=Os(),k=Ot(z=>A3e(z,x,y,T,w));if(S!=="horizontal"&&S!=="vertical"||k==null||N==null)return null;var{height:_,width:E,x:A,y:I}=N;return h.createElement(f5e,Dp({},v,{id:w,connectNulls:o,dot:c,activeDot:a,animateNewValues:s,animationBegin:r,animationDuration:i,animationEasing:l,isAnimationActive:u,hide:d,label:f,legendType:p,xAxisId:x,yAxisId:y,points:k,layout:S,height:_,width:E,left:A,top:I,needClip:C}))}function g5e(e){var{layout:t,xAxis:a,yAxis:s,xAxisTicks:r,yAxisTicks:i,dataKey:l,bandSize:o,displayedData:c}=e;return c.map((d,u)=>{var f=zn(d,l);if(t==="horizontal"){var p=fz({axis:a,ticks:r,bandSize:o,entry:d,index:u}),x=ra(f)?null:s.scale(f);return{x:p,y:x,value:f,payload:d}}var y=ra(f)?null:a.scale(f),w=fz({axis:s,ticks:i,bandSize:o,entry:d,index:u});return y==null||w==null?null:{x:y,y:w,value:f,payload:d}}).filter(Boolean)}function p5e(e){var t=za(e,CX),a=Os();return h.createElement(rD,{id:t.id,type:"line"},s=>h.createElement(h.Fragment,null,h.createElement(rX,{legendPayload:a5e(t)}),h.createElement(s5e,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:s}),h.createElement(lX,{type:"line",id:s,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:a}),h.createElement(h5e,Dp({},t,{id:s}))))}var ek=h.memo(p5e,Pj);ek.displayName="Line";function Uu(e,t){var a,s;return(a=(s=e.graphicalItems.cartesianItems.find(r=>r.id===t))===null||s===void 0?void 0:s.xAxisId)!==null&&a!==void 0?a:cX}function Bu(e,t){var a,s;return(a=(s=e.graphicalItems.cartesianItems.find(r=>r.id===t))===null||s===void 0?void 0:s.yAxisId)!==null&&a!==void 0?a:cX}var x5e="Invariant failed";function y5e(e,t){throw new Error(x5e)}function tk(){return tk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},tk.apply(null,arguments)}function rw(e){return h.createElement(eD,tk({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var b5e=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(s,r)=>{if(Pt(t))return t;var i=Pt(s)||ra(s);return i?t(s,r):(i||y5e(),a)}},v5e=(e,t,a)=>a,w5e=(e,t)=>t,Zx=nt([wj,w5e],(e,t)=>e.filter(a=>a.type==="bar").find(a=>a.id===t)),N5e=nt([Zx],e=>e?.maxBarSize),j5e=(e,t,a,s)=>s,C5e=nt([hn,wj,Uu,Bu,v5e],(e,t,a,s,r)=>t.filter(i=>e==="horizontal"?i.xAxisId===a:i.yAxisId===s).filter(i=>i.isPanorama===r).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),S5e=(e,t,a)=>{var s=hn(e),r=Uu(e,t),i=Bu(e,t);if(!(r==null||i==null))return s==="horizontal"?WT(e,"yAxis",i,a):WT(e,"xAxis",r,a)},_5e=(e,t)=>{var a=hn(e),s=Uu(e,t),r=Bu(e,t);if(!(s==null||r==null))return a==="horizontal"?AF(e,"xAxis",s):AF(e,"yAxis",r)},A5e=nt([C5e,KEe,_5e],mOe),E5e=(e,t,a)=>{var s,r,i=Zx(e,t);if(i!=null){var l=Uu(e,t),o=Bu(e,t);if(!(l==null||o==null)){var c=hn(e),d=LQ(e),{maxBarSize:u}=i,f=ra(u)?d:u,p,x;return c==="horizontal"?(p=Jc(e,"xAxis",l,a),x=Zc(e,"xAxis",l,a)):(p=Jc(e,"yAxis",o,a),x=Zc(e,"yAxis",o,a)),(s=(r=Af(p,x,!0))!==null&&r!==void 0?r:f)!==null&&s!==void 0?s:0}}},SX=(e,t,a)=>{var s=hn(e),r=Uu(e,t),i=Bu(e,t);if(!(r==null||i==null)){var l,o;return s==="horizontal"?(l=Jc(e,"xAxis",r,a),o=Zc(e,"xAxis",r,a)):(l=Jc(e,"yAxis",i,a),o=Zc(e,"yAxis",i,a)),Af(l,o)}},T5e=nt([A5e,LQ,QEe,PQ,E5e,SX,N5e],xOe),k5e=(e,t,a)=>{var s=Uu(e,t);if(s!=null)return Jc(e,"xAxis",s,a)},L5e=(e,t,a)=>{var s=Bu(e,t);if(s!=null)return Jc(e,"yAxis",s,a)},P5e=(e,t,a)=>{var s=Uu(e,t);if(s!=null)return Zc(e,"xAxis",s,a)},D5e=(e,t,a)=>{var s=Bu(e,t);if(s!=null)return Zc(e,"yAxis",s,a)},O5e=nt([T5e,Zx],(e,t)=>{if(!(e==null||t==null)){var a=e.find(s=>s.stackId===t.stackId&&t.dataKey!=null&&s.dataKeys.includes(t.dataKey));if(a!=null)return a.position}}),M5e=nt([S5e,Zx],yOe),I5e=nt([Ja,e4,k5e,L5e,P5e,D5e,O5e,hn,$Ee,SX,M5e,Zx,j5e],(e,t,a,s,r,i,l,o,c,d,u,f,p)=>{var{chartData:x,dataStartIndex:y,dataEndIndex:w}=c;if(!(f==null||l==null||t==null||o!=="horizontal"&&o!=="vertical"||a==null||s==null||r==null||i==null||d==null)){var{data:v}=f,C;if(v!=null&&v.length>0?C=v:C=x?.slice(y,w+1),C!=null)return uMe({layout:o,barSettings:f,pos:l,parentViewBox:t,bandSize:d,xAxis:a,yAxis:s,xAxisTicks:r,yAxisTicks:i,stackedData:u,displayedData:C,offset:e,cells:p,dataStartIndex:y})}}),$5e=["index"];function nk(){return nk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},nk.apply(null,arguments)}function R5e(e,t){if(e==null)return{};var a,s,r=z5e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function z5e(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var _X=h.createContext(void 0),F5e=e=>{var t=h.useContext(_X);if(t!=null)return t.stackId;if(e!=null)return r_e(e)},U5e=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),B5e=e=>{var t=h.useContext(_X);if(t!=null){var{stackId:a}=t;return"url(#".concat(U5e(a,e),")")}},H5e=e=>{var{index:t}=e,a=R5e(e,$5e),s=B5e(t);return h.createElement(ds,nk({className:"recharts-bar-stack-layer",clipPath:s},a))},G5e=["onMouseEnter","onMouseLeave","onClick"],W5e=["value","background","tooltipPosition"],V5e=["id"],q5e=["onMouseEnter","onClick","onMouseLeave"];function Oo(){return Oo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Oo.apply(null,arguments)}function BU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Is(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?BU(Object(a),!0).forEach(function(s){Y5e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):BU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function Y5e(e,t,a){return(t=Q5e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Q5e(e){var t=K5e(e,"string");return typeof t=="symbol"?t:t+""}function K5e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iw(e,t){if(e==null)return{};var a,s,r=X5e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function X5e(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var Z5e=e=>{var{dataKey:t,name:a,fill:s,legendType:r,hide:i}=e;return[{inactive:i,dataKey:t,type:r,color:s,value:Kf(a,t),payload:e}]},J5e=h.memo(e=>{var{dataKey:t,stroke:a,strokeWidth:s,fill:r,name:i,hide:l,unit:o,tooltipType:c,id:d}=e,u={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:a,strokeWidth:s,fill:r,dataKey:t,nameKey:void 0,name:Kf(i,t),hide:l,type:c,color:r,unit:o,graphicalItemId:d}};return h.createElement(sD,{tooltipEntrySettings:u})});function eMe(e){var t=Ot(ed),{data:a,dataKey:s,background:r,allOtherBarProps:i}=e,{onMouseEnter:l,onMouseLeave:o,onClick:c}=i,d=iw(i,G5e),u=tD(l,s,i.id),f=nD(o),p=aD(c,s,i.id);if(!r||a==null)return null;var x=Nu(r);return h.createElement(hr,{zIndex:bOe(r,Ma.barBackground)},a.map((y,w)=>{var{value:v,background:C,tooltipPosition:N}=y,S=iw(y,W5e);if(!C)return null;var T=u(y,w),k=f(y,w),_=p(y,w),E=Is(Is(Is(Is(Is({option:r,isActive:String(w)===t},S),{},{fill:"#eee"},C),x),Mx(d,y,w)),{},{onMouseEnter:T,onMouseLeave:k,onClick:_,dataKey:s,index:w,className:"recharts-bar-background-rectangle"});return h.createElement(rw,Oo({key:"background-bar-".concat(w)},E))}))}function tMe(e){var{showLabels:t,children:a,rects:s}=e,r=s?.map(i=>{var l={x:i.x,y:i.y,width:i.width,lowerWidth:i.width,upperWidth:i.width,height:i.height};return Is(Is({},l),{},{value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:l,fill:i.fill})});return h.createElement(KK,{value:t?r:void 0},a)}function nMe(e){var{shape:t,activeBar:a,baseProps:s,entry:r,index:i,dataKey:l}=e,o=Ot(ed),c=Ot(H4),d=a&&String(i)===o&&(c==null||l===c),u=d?a:t;return d?h.createElement(hr,{zIndex:Ma.activeBar},h.createElement(rw,Oo({},s,{name:String(s.name)},r,{isActive:d,option:u,index:i,dataKey:l}))):h.createElement(rw,Oo({},s,{name:String(s.name)},r,{isActive:d,option:u,index:i,dataKey:l}))}function aMe(e){var{shape:t,baseProps:a,entry:s,index:r,dataKey:i}=e;return h.createElement(rw,Oo({},a,{name:String(a.name)},s,{isActive:!1,option:t,index:r,dataKey:i}))}function sMe(e){var t,{data:a,props:s}=e,r=(t=Or(s))!==null&&t!==void 0?t:{},{id:i}=r,l=iw(r,V5e),{shape:o,dataKey:c,activeBar:d}=s,{onMouseEnter:u,onClick:f,onMouseLeave:p}=s,x=iw(s,q5e),y=tD(u,c,i),w=nD(p),v=aD(f,c,i);return a?h.createElement(h.Fragment,null,a.map((C,N)=>h.createElement(H5e,Oo({index:N,key:"rectangle-".concat(C?.x,"-").concat(C?.y,"-").concat(C?.value,"-").concat(N),className:"recharts-bar-rectangle"},Mx(x,C,N),{onMouseEnter:y(C,N),onMouseLeave:w(C,N),onClick:v(C,N)}),d?h.createElement(nMe,{shape:o,activeBar:d,baseProps:l,entry:C,index:N,dataKey:c}):h.createElement(aMe,{shape:o,baseProps:l,entry:C,index:N,dataKey:c})))):null}function rMe(e){var{props:t,previousRectanglesRef:a}=e,{data:s,layout:r,isAnimationActive:i,animationBegin:l,animationDuration:o,animationEasing:c,onAnimationEnd:d,onAnimationStart:u}=t,f=a.current,p=Bx(t,"recharts-bar-"),[x,y]=h.useState(!1),w=!x,v=h.useCallback(()=>{typeof d=="function"&&d(),y(!1)},[d]),C=h.useCallback(()=>{typeof u=="function"&&u(),y(!0)},[u]);return h.createElement(tMe,{showLabels:w,rects:s},h.createElement(Ux,{animationId:p,begin:l,duration:o,isActive:i,easing:c,onAnimationEnd:v,onAnimationStart:C,key:p},N=>{var S=N===1?s:s?.map((T,k)=>{var _=f&&f[k];if(_)return Is(Is({},T),{},{x:na(_.x,T.x,N),y:na(_.y,T.y,N),width:na(_.width,T.width,N),height:na(_.height,T.height,N)});if(r==="horizontal"){var E=na(0,T.height,N),A=na(T.stackedBarStart,T.y,N);return Is(Is({},T),{},{y:A,height:E})}var I=na(0,T.width,N),z=na(T.stackedBarStart,T.x,N);return Is(Is({},T),{},{width:I,x:z})});return N>0&&(a.current=S??null),S==null?null:h.createElement(ds,null,h.createElement(sMe,{props:t,data:S}))}),h.createElement(K4,{label:t.label}),t.children)}function iMe(e){var t=h.useRef(null);return h.createElement(rMe,{previousRectanglesRef:t,props:e})}var AX=0,lMe=(e,t)=>{var a=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:a,errorVal:zn(e,t)}};class oMe extends h.PureComponent{render(){var{hide:t,data:a,dataKey:s,className:r,xAxisId:i,yAxisId:l,needClip:o,background:c,id:d}=this.props;if(t||a==null)return null;var u=Tt("recharts-bar",r),f=d;return h.createElement(ds,{className:u,id:d},o&&h.createElement("defs",null,h.createElement(yX,{clipPathId:f,xAxisId:i,yAxisId:l})),h.createElement(ds,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(f,")"):void 0},h.createElement(eMe,{data:a,dataKey:s,background:c,allOtherBarProps:this.props}),h.createElement(iMe,this.props)))}}var cMe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:AX,xAxisId:0,yAxisId:0,zIndex:Ma.bar};function dMe(e){var{xAxisId:t,yAxisId:a,hide:s,legendType:r,minPointSize:i,activeBar:l,animationBegin:o,animationDuration:c,animationEasing:d,isAnimationActive:u}=e,{needClip:f}=dD(t,a),p=Xf(),x=Os(),y=J4(e.children,Aj),w=Ot(N=>I5e(N,e.id,x,y));if(p!=="vertical"&&p!=="horizontal")return null;var v,C=w?.[0];return C==null||C.height==null||C.width==null?v=0:v=p==="vertical"?C.height/2:C.width/2,h.createElement(xX,{xAxisId:t,yAxisId:a,data:w,dataPointFormatter:lMe,errorBarOffset:v},h.createElement(oMe,Oo({},e,{layout:p,needClip:f,data:w,xAxisId:t,yAxisId:a,hide:s,legendType:r,minPointSize:i,activeBar:l,animationBegin:o,animationDuration:c,animationEasing:d,isAnimationActive:u})))}function uMe(e){var{layout:t,barSettings:{dataKey:a,minPointSize:s},pos:r,bandSize:i,xAxis:l,yAxis:o,xAxisTicks:c,yAxisTicks:d,stackedData:u,displayedData:f,offset:p,cells:x,parentViewBox:y,dataStartIndex:w}=e,v=t==="horizontal"?o:l,C=u?v.scale.domain():null,N=i_e({numericAxis:v}),S=v.scale(N);return f.map((T,k)=>{var _,E,A,I,z,F;if(u){var D=u[k+w];if(D==null)return null;_=e_e(D,C)}else _=zn(T,a),Array.isArray(_)||(_=[N,_]);var M=b5e(s,AX)(_[1],k);if(t==="horizontal"){var W,[Z,R]=[o.scale(_[0]),o.scale(_[1])];E=hz({axis:l,ticks:c,bandSize:i,offset:r.offset,entry:T,index:k}),A=(W=R??Z)!==null&&W!==void 0?W:void 0,I=r.size;var Q=Z-R;if(z=Ui(Q)?0:Q,F={x:E,y:p.top,width:I,height:p.height},Math.abs(M)>0&&Math.abs(z)<Math.abs(M)){var Y=cs(z||M)*(Math.abs(M)-Math.abs(z));A-=Y,z+=Y}}else{var[oe,re]=[l.scale(_[0]),l.scale(_[1])];if(E=oe,A=hz({axis:o,ticks:d,bandSize:i,offset:r.offset,entry:T,index:k}),I=re-oe,z=r.size,F={x:p.left,y:A,width:p.width,height:z},Math.abs(M)>0&&Math.abs(I)<Math.abs(M)){var ee=cs(I||M)*(Math.abs(M)-Math.abs(I));I+=ee}}if(E==null||A==null||I==null||z==null)return null;var H=Is(Is({},T),{},{stackedBarStart:S,x:E,y:A,width:I,height:z,value:u?_:_[1],payload:T,background:F,tooltipPosition:{x:E+I/2,y:A+z/2},parentViewBox:y},x&&x[k]&&x[k].props);return H}).filter(Boolean)}function mMe(e){var t=za(e,cMe),a=F5e(t.stackId),s=Os();return h.createElement(rD,{id:t.id,type:"bar"},r=>h.createElement(h.Fragment,null,h.createElement(rX,{legendPayload:Z5e(t)}),h.createElement(J5e,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:r}),h.createElement(lX,{type:"bar",id:r,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:a,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:s}),h.createElement(hr,{zIndex:t.zIndex},h.createElement(dMe,Oo({},t,{id:r})))))}var ak=h.memo(mMe,Pj);ak.displayName="Bar";var fMe=["domain","range"],hMe=["domain","range"];function HU(e,t){if(e==null)return{};var a,s,r=gMe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function gMe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function GU(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function EX(e,t){if(e===t)return!0;var{domain:a,range:s}=e,r=HU(e,fMe),{domain:i,range:l}=t,o=HU(t,hMe);return!GU(a,i)||!GU(s,l)?!1:Pj(r,o)}var pMe=["dangerouslySetInnerHTML","ticks","scale"],xMe=["id","scale"];function sk(){return sk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},sk.apply(null,arguments)}function WU(e,t){if(e==null)return{};var a,s,r=yMe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function yMe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function bMe(e){var t=qn(),a=h.useRef(null);return h.useLayoutEffect(()=>{a.current===null?t(KDe(e)):a.current!==e&&t(XDe({prev:a.current,next:e})),a.current=e},[e,t]),h.useLayoutEffect(()=>()=>{a.current&&(t(ZDe(a.current)),a.current=null)},[t]),null}var vMe=e=>{var{xAxisId:t,className:a}=e,s=Ot(e4),r=Os(),i="xAxis",l=Ot(C=>dK(C,i,t,r)),o=Ot(C=>iK(C,t)),c=Ot(C=>qTe(C,t)),d=Ot(C=>UQ(C,t));if(o==null||c==null||d==null)return null;var{dangerouslySetInnerHTML:u,ticks:f,scale:p}=e,x=WU(e,pMe),{id:y,scale:w}=d,v=WU(d,xMe);return h.createElement(cD,sk({},x,v,{x:c.x,y:c.y,width:o.width,height:o.height,className:Tt("recharts-".concat(i," ").concat(i),a),viewBox:s,ticks:l,axisType:i}))},wMe={allowDataOverflow:ss.allowDataOverflow,allowDecimals:ss.allowDecimals,allowDuplicatedCategory:ss.allowDuplicatedCategory,angle:ss.angle,axisLine:bo.axisLine,height:ss.height,hide:!1,includeHidden:ss.includeHidden,interval:ss.interval,minTickGap:ss.minTickGap,mirror:ss.mirror,orientation:ss.orientation,padding:ss.padding,reversed:ss.reversed,scale:ss.scale,tick:ss.tick,tickCount:ss.tickCount,tickLine:bo.tickLine,tickSize:bo.tickSize,type:ss.type,xAxisId:0},NMe=e=>{var t=za(e,wMe);return h.createElement(h.Fragment,null,h.createElement(bMe,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),h.createElement(vMe,t))},rk=h.memo(NMe,EX);rk.displayName="XAxis";var jMe=["dangerouslySetInnerHTML","ticks","scale"],CMe=["id","scale"];function ik(){return ik=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},ik.apply(null,arguments)}function VU(e,t){if(e==null)return{};var a,s,r=SMe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function SMe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function _Me(e){var t=qn(),a=h.useRef(null);return h.useLayoutEffect(()=>{a.current===null?t(JDe(e)):a.current!==e&&t(eOe({prev:a.current,next:e})),a.current=e},[e,t]),h.useLayoutEffect(()=>()=>{a.current&&(t(tOe(a.current)),a.current=null)},[t]),null}var AMe=e=>{var{yAxisId:t,className:a,width:s,label:r}=e,i=h.useRef(null),l=h.useRef(null),o=Ot(e4),c=Os(),d=qn(),u="yAxis",f=Ot(_=>lK(_,t)),p=Ot(_=>QTe(_,t)),x=Ot(_=>dK(_,u,t,c)),y=Ot(_=>BQ(_,t));if(h.useLayoutEffect(()=>{if(!(s!=="auto"||!f||Q4(r)||h.isValidElement(r)||y==null)){var _=i.current;if(_){var E=_.getCalculatedWidth();Math.round(f.width)!==Math.round(E)&&d(nOe({id:t,width:E}))}}},[x,f,d,r,t,s,y]),f==null||p==null||y==null)return null;var{dangerouslySetInnerHTML:w,ticks:v,scale:C}=e,N=VU(e,jMe),{id:S,scale:T}=y,k=VU(y,CMe);return h.createElement(cD,ik({},N,k,{ref:i,labelRef:l,x:p.x,y:p.y,tickTextProps:s==="auto"?{width:void 0}:{width:s},width:f.width,height:f.height,className:Tt("recharts-".concat(u," ").concat(u),a),viewBox:o,ticks:x,axisType:u}))},EMe={allowDataOverflow:rs.allowDataOverflow,allowDecimals:rs.allowDecimals,allowDuplicatedCategory:rs.allowDuplicatedCategory,angle:rs.angle,axisLine:bo.axisLine,hide:!1,includeHidden:rs.includeHidden,interval:rs.interval,minTickGap:rs.minTickGap,mirror:rs.mirror,orientation:rs.orientation,padding:rs.padding,reversed:rs.reversed,scale:rs.scale,tick:rs.tick,tickCount:rs.tickCount,tickLine:bo.tickLine,tickSize:bo.tickSize,type:rs.type,width:rs.width,yAxisId:0},TMe=e=>{var t=za(e,EMe);return h.createElement(h.Fragment,null,h.createElement(_Me,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),h.createElement(AMe,t))},lk=h.memo(TMe,EX);lk.displayName="YAxis";var kMe=(e,t)=>t,mD=nt([kMe,hn,zQ,es,_K,Qo,uLe,Ja],yLe),fD=e=>{var t=e.currentTarget.getBoundingClientRect(),a=t.width/e.currentTarget.offsetWidth,s=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/a),chartY:Math.round((e.clientY-t.top)/s)}},TX=mi("mouseClick"),kX=Rx();kX.startListening({actionCreator:TX,effect:(e,t)=>{var a=e.payload,s=mD(t.getState(),fD(a));s?.activeIndex!=null&&t.dispatch(cke({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}});var ok=mi("mouseMove"),LX=Rx(),Qy=null;LX.startListening({actionCreator:ok,effect:(e,t)=>{var a=e.payload;Qy!==null&&cancelAnimationFrame(Qy);var s=fD(a);Qy=requestAnimationFrame(()=>{var r=t.getState(),i=$4(r,r.tooltip.settings.shared);if(i==="axis"){var l=mD(r,s);l?.activeIndex!=null?t.dispatch(yK({activeIndex:l.activeIndex,activeDataKey:void 0,activeCoordinate:l.activeCoordinate})):t.dispatch(xK())}Qy=null})}});function LMe(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var qU={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},PX=fr({name:"rootProps",initialState:qU,reducers:{updateOptions:(e,t)=>{var a;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(a=t.payload.barGap)!==null&&a!==void 0?a:qU.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),PMe=PX.reducer,{updateOptions:DMe}=PX.actions,DX=fr({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:OMe}=DX.actions,MMe=DX.reducer,OX=mi("keyDown"),MX=mi("focus"),hD=Rx();hD.startListening({actionCreator:OX,effect:(e,t)=>{var a=t.getState(),s=a.rootProps.accessibilityLayer!==!1;if(s){var{keyboardInteraction:r}=a.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var l=R4(r,rh(a),qx(a),Kx(a)),o=l==null?-1:Number(l);if(!(!Number.isFinite(o)||o<0)){var c=Qo(a);if(i==="Enter"){var d=Jv(a,"axis","hover",String(r.index));t.dispatch(qT({active:!r.active,activeIndex:r.index,activeCoordinate:d}));return}var u=JTe(a),f=u==="left-to-right"?1:-1,p=i==="ArrowRight"?1:-1,x=o+p*f;if(!(c==null||x>=c.length||x<0)){var y=Jv(a,"axis","hover",String(x));t.dispatch(qT({active:!0,activeIndex:x.toString(),activeCoordinate:y}))}}}}}});hD.startListening({actionCreator:MX,effect:(e,t)=>{var a=t.getState(),s=a.rootProps.accessibilityLayer!==!1;if(s){var{keyboardInteraction:r}=a.tooltip;if(!r.active&&r.index==null){var i="0",l=Jv(a,"axis","hover",String(i));t.dispatch(qT({active:!0,activeIndex:i,activeCoordinate:l}))}}}});var Jr=mi("externalEvent"),IX=Rx(),E_=new Map;IX.startListening({actionCreator:Jr,effect:(e,t)=>{var{handler:a,reactEvent:s}=e.payload;if(a!=null){s.persist();var r=s.type,i=E_.get(r);i!==void 0&&cancelAnimationFrame(i);var l=requestAnimationFrame(()=>{try{var o=t.getState(),c={activeCoordinate:Qke(o),activeDataKey:H4(o),activeIndex:ed(o),activeLabel:TK(o),activeTooltipIndex:ed(o),isTooltipActive:Kke(o)};a(c,s)}finally{E_.delete(r)}});E_.set(r,l)}}});var IMe=nt([ah],e=>e.tooltipItemPayloads),$Me=nt([IMe,Qx,(e,t)=>t,(e,t,a)=>a],(e,t,a,s)=>{var r=e.find(o=>o.settings.graphicalItemId===s);if(r!=null){var{positions:i}=r;if(i!=null){var l=t(i,a);return l}}}),$X=mi("touchMove"),RX=Rx();RX.startListening({actionCreator:$X,effect:(e,t)=>{var a=e.payload;if(!(a.touches==null||a.touches.length===0)){var s=t.getState(),r=$4(s,s.tooltip.settings.shared);if(r==="axis"){var i=a.touches[0];if(i==null)return;var l=mD(s,fD({clientX:i.clientX,clientY:i.clientY,currentTarget:a.currentTarget}));l?.activeIndex!=null&&t.dispatch(yK({activeIndex:l.activeIndex,activeDataKey:void 0,activeCoordinate:l.activeCoordinate}))}else if(r==="item"){var o,c=a.touches[0];if(document.elementFromPoint==null||c==null)return;var d=document.elementFromPoint(c.clientX,c.clientY);if(!d||!d.getAttribute)return;var u=d.getAttribute(BY),f=(o=d.getAttribute(HY))!==null&&o!==void 0?o:void 0,p=sh(s).find(w=>w.id===f);if(u==null||p==null||f==null)return;var{dataKey:x}=p,y=$Me(s,u,f);t.dispatch(pK({activeDataKey:x,activeIndex:u,activeCoordinate:y,activeGraphicalItemId:f}))}}}});var RMe=dY({brush:vOe,cartesianAxis:aOe,chartData:QLe,errorBars:x3e,graphicalItems:cDe,layout:Y2e,legend:nAe,options:GLe,polarAxis:_4e,polarOptions:MMe,referenceElements:AOe,rootProps:PMe,tooltip:dke,zIndex:PLe}),zMe=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return b2e({reducer:RMe,preloadedState:t,middleware:s=>{var r;return s({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((r="es6")!==null&&r!==void 0?r:"")}).concat([kX.middleware,LX.middleware,hD.middleware,IX.middleware,RX.middleware])},enhancers:s=>{var r=s;return typeof s=="function"&&(r=s()),r.concat(SY({type:"raf"}))},devTools:{serialize:{replacer:LMe},name:"recharts-".concat(a)}})};function zX(e){var{preloadedState:t,children:a,reduxStoreName:s}=e,r=Os(),i=h.useRef(null);if(r)return a;i.current==null&&(i.current=zMe(t,s));var l=WP;return h.createElement(q3e,{context:l,store:i.current},a)}function FMe(e){var{layout:t,margin:a}=e,s=qn(),r=Os();return h.useEffect(()=>{r||(s(W2e(t)),s(G2e(a)))},[s,r,t,a]),null}var FX=h.memo(FMe,Pj);function UX(e){var t=qn();return h.useEffect(()=>{t(DMe(e))},[t,e]),null}function YU(e){var{zIndex:t,isPanorama:a}=e,s=h.useRef(null),r=qn();return h.useLayoutEffect(()=>(s.current&&r(kLe({zIndex:t,element:s.current,isPanorama:a})),()=>{r(LLe({zIndex:t,isPanorama:a}))}),[r,t,a]),h.createElement("g",{tabIndex:-1,ref:s})}function QU(e){var{children:t,isPanorama:a}=e,s=Ot(vLe);if(!s||s.length===0)return t;var r=s.filter(l=>l<0),i=s.filter(l=>l>0);return h.createElement(h.Fragment,null,r.map(l=>h.createElement(YU,{key:l,zIndex:l,isPanorama:a})),t,i.map(l=>h.createElement(YU,{key:l,zIndex:l,isPanorama:a})))}var UMe=["children"];function BMe(e,t){if(e==null)return{};var a,s,r=HMe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function HMe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function lw(){return lw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},lw.apply(null,arguments)}var GMe={width:"100%",height:"100%",display:"block"},WMe=h.forwardRef((e,t)=>{var a=n4(),s=a4(),r=iQ();if(!El(a)||!El(s))return null;var{children:i,otherAttributes:l,title:o,desc:c}=e,d,u;return l!=null&&(typeof l.tabIndex=="number"?d=l.tabIndex:d=r?0:void 0,typeof l.role=="string"?u=l.role:u=r?"application":void 0),h.createElement(RP,lw({},l,{title:o,desc:c,role:u,tabIndex:d,width:a,height:s,style:GMe,ref:t}),i)}),VMe=e=>{var{children:t}=e,a=Ot(oj);if(!a)return null;var{width:s,height:r,y:i,x:l}=a;return h.createElement(RP,{width:s,height:r,x:l,y:i},t)},KU=h.forwardRef((e,t)=>{var{children:a}=e,s=BMe(e,UMe),r=Os();return r?h.createElement(VMe,null,h.createElement(QU,{isPanorama:!0},a)):h.createElement(WMe,lw({ref:t},s),h.createElement(QU,{isPanorama:!1},a))});function qMe(){var e=qn(),[t,a]=h.useState(null),s=Ot(m_e);return h.useEffect(()=>{if(t!=null){var r=t.getBoundingClientRect(),i=r.width/t.offsetWidth;ca(i)&&i!==s&&e(q2e(i))}},[t,e,s]),a}function XU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function YMe(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?XU(Object(a),!0).forEach(function(s){QMe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):XU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function QMe(e,t,a){return(t=KMe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function KMe(e){var t=XMe(e,"string");return typeof t=="symbol"?t:t+""}function XMe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tu(){return Tu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Tu.apply(null,arguments)}var ZMe=()=>(sPe(),null);function ow(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var JMe=h.forwardRef((e,t)=>{var a,s,r=h.useRef(null),[i,l]=h.useState({containerWidth:ow((a=e.style)===null||a===void 0?void 0:a.width),containerHeight:ow((s=e.style)===null||s===void 0?void 0:s.height)}),o=h.useCallback((d,u)=>{l(f=>{var p=Math.round(d),x=Math.round(u);return f.containerWidth===p&&f.containerHeight===x?f:{containerWidth:p,containerHeight:x}})},[]),c=h.useCallback(d=>{if(typeof t=="function"&&t(d),d!=null&&typeof ResizeObserver<"u"){var{width:u,height:f}=d.getBoundingClientRect();o(u,f);var p=y=>{var{width:w,height:v}=y[0].contentRect;o(w,v)},x=new ResizeObserver(p);x.observe(d),r.current=x}},[t,o]);return h.useEffect(()=>()=>{var d=r.current;d?.disconnect()},[o]),h.createElement(h.Fragment,null,h.createElement(dj,{width:i.containerWidth,height:i.containerHeight}),h.createElement("div",Tu({ref:c},e)))}),eIe=h.forwardRef((e,t)=>{var{width:a,height:s}=e,[r,i]=h.useState({containerWidth:ow(a),containerHeight:ow(s)}),l=h.useCallback((c,d)=>{i(u=>{var f=Math.round(c),p=Math.round(d);return u.containerWidth===f&&u.containerHeight===p?u:{containerWidth:f,containerHeight:p}})},[]),o=h.useCallback(c=>{if(typeof t=="function"&&t(c),c!=null){var{width:d,height:u}=c.getBoundingClientRect();l(d,u)}},[t,l]);return h.createElement(h.Fragment,null,h.createElement(dj,{width:r.containerWidth,height:r.containerHeight}),h.createElement("div",Tu({ref:o},e)))}),tIe=h.forwardRef((e,t)=>{var{width:a,height:s}=e;return h.createElement(h.Fragment,null,h.createElement(dj,{width:a,height:s}),h.createElement("div",Tu({ref:t},e)))}),nIe=h.forwardRef((e,t)=>{var{width:a,height:s}=e;return Lo(a)||Lo(s)?h.createElement(eIe,Tu({},e,{ref:t})):h.createElement(tIe,Tu({},e,{ref:t}))});function aIe(e){return e===!0?JMe:nIe}var sIe=h.forwardRef((e,t)=>{var{children:a,className:s,height:r,onClick:i,onContextMenu:l,onDoubleClick:o,onMouseDown:c,onMouseEnter:d,onMouseLeave:u,onMouseMove:f,onMouseUp:p,onTouchEnd:x,onTouchMove:y,onTouchStart:w,style:v,width:C,responsive:N,dispatchTouchEvents:S=!0}=e,T=h.useRef(null),k=qn(),[_,E]=h.useState(null),[A,I]=h.useState(null),z=qMe(),F=t4(),D=F?.width>0?F.width:C,M=F?.height>0?F.height:r,W=h.useCallback(pe=>{z(pe),typeof t=="function"&&t(pe),E(pe),I(pe),pe!=null&&(T.current=pe)},[z,t,E,I]),Z=h.useCallback(pe=>{k(TX(pe)),k(Jr({handler:i,reactEvent:pe}))},[k,i]),R=h.useCallback(pe=>{k(ok(pe)),k(Jr({handler:d,reactEvent:pe}))},[k,d]),Q=h.useCallback(pe=>{k(xK()),k(Jr({handler:u,reactEvent:pe}))},[k,u]),Y=h.useCallback(pe=>{k(ok(pe)),k(Jr({handler:f,reactEvent:pe}))},[k,f]),oe=h.useCallback(()=>{k(MX())},[k]),re=h.useCallback(pe=>{k(OX(pe.key))},[k]),ee=h.useCallback(pe=>{k(Jr({handler:l,reactEvent:pe}))},[k,l]),H=h.useCallback(pe=>{k(Jr({handler:o,reactEvent:pe}))},[k,o]),ye=h.useCallback(pe=>{k(Jr({handler:c,reactEvent:pe}))},[k,c]),te=h.useCallback(pe=>{k(Jr({handler:p,reactEvent:pe}))},[k,p]),ve=h.useCallback(pe=>{k(Jr({handler:w,reactEvent:pe}))},[k,w]),je=h.useCallback(pe=>{S&&k($X(pe)),k(Jr({handler:y,reactEvent:pe}))},[k,S,y]),Oe=h.useCallback(pe=>{k(Jr({handler:x,reactEvent:pe}))},[k,x]),$e=aIe(N);return h.createElement(IK.Provider,{value:_},h.createElement(Hq.Provider,{value:A},h.createElement($e,{width:D??v?.width,height:M??v?.height,className:Tt("recharts-wrapper",s),style:YMe({position:"relative",cursor:"default",width:D,height:M},v),onClick:Z,onContextMenu:ee,onDoubleClick:H,onFocus:oe,onKeyDown:re,onMouseDown:ye,onMouseEnter:R,onMouseLeave:Q,onMouseMove:Y,onMouseUp:te,onTouchEnd:Oe,onTouchMove:je,onTouchStart:ve,ref:W},h.createElement(ZMe,null),a)))}),rIe=["width","height","responsive","children","className","style","compact","title","desc"];function iIe(e,t){if(e==null)return{};var a,s,r=lIe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function lIe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var BX=h.forwardRef((e,t)=>{var{width:a,height:s,responsive:r,children:i,className:l,style:o,compact:c,title:d,desc:u}=e,f=iIe(e,rIe),p=Or(f);return c?h.createElement(h.Fragment,null,h.createElement(dj,{width:a,height:s}),h.createElement(KU,{otherAttributes:p,title:d,desc:u},i)):h.createElement(sIe,{className:l,style:o,width:a,height:s,responsive:r??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},h.createElement(KU,{otherAttributes:p,title:d,desc:u,ref:t},h.createElement(TOe,null,i)))});function ck(){return ck=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},ck.apply(null,arguments)}var oIe={top:5,right:5,bottom:5,left:5},cIe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:oIe,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},HX=h.forwardRef(function(t,a){var s,r=za(t.categoricalChartProps,cIe),{chartName:i,defaultTooltipEventType:l,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,categoricalChartProps:d}=t,u={chartName:i,defaultTooltipEventType:l,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,eventEmitter:void 0};return h.createElement(zX,{preloadedState:{options:u},reduxStoreName:(s=d.id)!==null&&s!==void 0?s:i},h.createElement(uX,{chartData:d.data}),h.createElement(FX,{layout:r.layout,margin:r.margin}),h.createElement(UX,{baseValue:r.baseValue,accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className,reverseStackOrder:r.reverseStackOrder}),h.createElement(BX,ck({},r,{ref:a})))}),dIe=["axis"],uIe=h.forwardRef((e,t)=>h.createElement(HX,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:dIe,tooltipPayloadSearcher:Y4,categoricalChartProps:e,ref:t})),mIe=["axis","item"],fIe=h.forwardRef((e,t)=>h.createElement(HX,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:mIe,tooltipPayloadSearcher:Y4,categoricalChartProps:e,ref:t}));function hIe(e){var t=qn();return h.useEffect(()=>{t(OMe(e))},[t,e]),null}var gIe=["layout"];function dk(){return dk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},dk.apply(null,arguments)}function pIe(e,t){if(e==null)return{};var a,s,r=xIe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function xIe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var yIe={top:5,right:5,bottom:5,left:5},GX={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:yIe,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},bIe=h.forwardRef(function(t,a){var s,r=za(t.categoricalChartProps,GX),{layout:i}=r,l=pIe(r,gIe),{chartName:o,defaultTooltipEventType:c,validateTooltipEventTypes:d,tooltipPayloadSearcher:u}=t,f={chartName:o,defaultTooltipEventType:c,validateTooltipEventTypes:d,tooltipPayloadSearcher:u,eventEmitter:void 0};return h.createElement(zX,{preloadedState:{options:f},reduxStoreName:(s=r.id)!==null&&s!==void 0?s:o},h.createElement(uX,{chartData:r.data}),h.createElement(FX,{layout:i,margin:r.margin}),h.createElement(UX,{baseValue:void 0,accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className,reverseStackOrder:r.reverseStackOrder}),h.createElement(hIe,{cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius}),h.createElement(BX,dk({},l,{ref:a})))});function ZU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function JU(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?ZU(Object(a),!0).forEach(function(s){vIe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ZU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function vIe(e,t,a){return(t=wIe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function wIe(e){var t=NIe(e,"string");return typeof t=="symbol"?t:t+""}function NIe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jIe=["item"],CIe=JU(JU({},GX),{},{layout:"centric",startAngle:0,endAngle:360}),SIe=h.forwardRef((e,t)=>{var a=za(e,CIe);return h.createElement(bIe,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:jIe,tooltipPayloadSearcher:Y4,categoricalChartProps:a,ref:t})});const e7={user_id:"",start_date:"",end_date:"",target_amount:"",period_type:"CUSTOM",period_year:new Date().getFullYear(),period_number:1},_Ie=[{value:"MONTHLY",label:"Monthly"},{value:"QUARTERLY",label:"Quarterly"},{value:"SEMIANNUAL",label:"Semi-Annual"},{value:"ANNUAL",label:"Annual"},{value:"CUSTOM",label:"Custom"}],t7=["#6366f1","#22c55e","#f97316","#0ea5e9","#a855f7","#f43f5e","#eab308","#8b5cf6","#10b981","#ec4899","#14b8a6","#f59e0b"];function AIe({name:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search..."}){const[l,o]=h.useState(!1),[c,d]=h.useState(""),u=h.useRef(null),f=t.find(y=>String(y.id)===String(a)),p=f?r(f):"",x=h.useMemo(()=>{const y=c.toLowerCase();return y?t.filter(w=>r(w).toLowerCase().includes(y)):t},[t,c,r]);return h.useEffect(()=>{const y=w=>{u.current&&!u.current.contains(w.target)&&o(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]),n.jsxs("div",{ref:u,className:"relative flex justify-center w-full",children:[n.jsx("input",{value:l?c:p,placeholder:i,onFocus:()=>o(!0),onChange:y=>{d(y.target.value),o(!0)},className:"w-full max-w-md border text-gray-500 border-gray-300 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"}),l&&n.jsx("div",{className:"absolute top-full left-0 z-50 mt-1 w-full bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:x.length?x.map(y=>n.jsx("button",{type:"button",onClick:()=>{s({target:{name:e,value:String(y.id)}}),o(!1),d("")},className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-50",children:r(y)},y.id)):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results found"})})]})}function Dj({currentUserRole:e,currentUserId:t}){const{user:a,mutate:s}=Kt(),r=a?.company?.currency||"",i=r==="$"?_de:Ede;h.useEffect(()=>{s&&s()},[s]),h.useEffect(()=>{a?.company&&console.log("Dashboard detected Company Settings:",a.company)},[a]),h.useEffect(()=>{document.title="Targets | Sari-Sari CRM"},[]);const[l,o]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState(!1),[p,x]=h.useState(""),[y,w]=h.useState(1),[v,C]=h.useState(10),[N,S]=h.useState(!1),[T,k]=h.useState(!1),[_,E]=h.useState(!1),[A,I]=h.useState(null),[z,F]=h.useState(e7),[D,M]=h.useState(null),[W,Z]=h.useState(null),[R,Q]=h.useState(!1),[Y,oe]=h.useState([]),[re,ee]=h.useState("annual"),[H,ye]=h.useState(1),[te,ve]=h.useState("overview"),[je,Oe]=h.useState(null),[$e,pe]=h.useState(!1),[Me,Le]=h.useState(null),[he,ae]=h.useState(!1),[Ae,ge]=h.useState(null),[Be,qe]=h.useState(null),[Te,He]=h.useState(new Date().getFullYear()),[Ye,B]=h.useState(""),[fe,Se]=h.useState(1),de=h.useMemo(()=>["CEO","ADMIN","GROUP MANAGER","MANAGER"].includes(e?.toUpperCase()),[e]),ke=h.useMemo(()=>["CEO","ADMIN","GROUP MANAGER","MANAGER"].includes(e?.toUpperCase()),[e]),se=h.useCallback(async()=>{f(!0);try{const V=await ce.get("/targets/admin/fetch-all");o(V.data)}catch(V){console.error(V),q.error("Failed to load targets.")}finally{f(!1)}},[]),We=h.useCallback(async()=>{try{if(de){const V=await ce.get("/targets/admin/get-users");d(V.data)}}catch(V){console.error(V)}},[de]),Re=h.useCallback(async()=>{try{const V=await ce.get("/targets/fiscal-settings");qe(V.data)}catch(V){console.error("Failed to fetch fiscal settings:",V)}},[]),ct=h.useCallback(async()=>{pe(!0);try{const V=new URLSearchParams;Ye&&V.append("period_type",Ye),Te&&V.append("period_year",Te),fe&&V.append("period_number",fe);const _e=await ce.get(`/targets/leaderboard?${V.toString()}`);Oe(_e.data)}catch(V){console.error(V),q.error("Failed to load leaderboard.")}finally{pe(!1)}},[Ye,Te,fe]),Ie=h.useCallback(async()=>{try{const V=new URLSearchParams;Ye&&V.append("period_type",Ye),Te&&V.append("period_year",Te),fe&&V.append("period_number",fe);const _e=await ce.get(`/targets/team-summary?${V.toString()}`);ge(_e.data)}catch(V){console.error(V)}},[Ye,Te,fe]),ue=h.useCallback(async V=>{ae(!0);try{const _e=await ce.get(`/targets/history/${V}`);Le(_e.data)}catch(_e){console.error(_e),q.error("Failed to load user history.")}finally{ae(!1)}},[]);h.useEffect(()=>{se(),We(),Re()},[se,We,Re]),h.useEffect(()=>{te==="leaderboard"&&(ct(),Ie())},[te,ct,Ie]);const Ne=h.useMemo(()=>{const V=l.reduce((bt,gt)=>bt+(Number(gt.target_amount)||0),0),_e=l.reduce((bt,gt)=>bt+(Number(gt.achieved_amount)||0),0),Ue=V>0?(_e/V*100).toFixed(1):0,rt=Math.max(0,V-_e);return{totalTarget:V,totalAchieved:_e,achievement:Ue,remaining:rt,totalCount:l.length}},[l]),Fe=h.useCallback(()=>(_e=>re==="annual"?_e:_e.filter(Ue=>{const rt=new Date(Ue.start_date),bt=new Date(Ue.end_date),gt=rt.getMonth(),_t=bt.getMonth();let Wt=!1;if(re==="semiannual")H===1?Wt=gt<=5&&_t>=0:Wt=gt<=11&&_t>=6;else if(re==="trimester"){const le=[{start:0,end:3},{start:4,end:7},{start:8,end:11}][H-1];Wt=gt<=le.end&&_t>=le.start}else if(re==="quarterly"){const le=[{start:0,end:2},{start:3,end:5},{start:6,end:8},{start:9,end:11}][H-1];Wt=gt<=le.end&&_t>=le.start}return Wt}))(l),[l,re,H]),Ze=h.useMemo(()=>{const V=Fe(),_e={};V.forEach(gt=>{const _t=gt.user_id,Wt=gt.user?`${gt.user.first_name} ${gt.user.last_name}`:"Unknown";_e[_t]||(_e[_t]={userId:_t,name:Wt,targetAmount:0,achievedAmount:0}),_e[_t].targetAmount+=Number(gt.target_amount)||0,_e[_t].achievedAmount+=Number(gt.achieved_amount)||0});const Ue=Object.values(_e).map((gt,_t)=>({...gt,fill:t7[_t%t7.length]})),rt=Ue.reduce((gt,_t)=>gt+_t.targetAmount,0);return Ue.map(gt=>({...gt,percentage:rt>0?(gt.targetAmount/rt*100).toFixed(1):0}))},[Fe]),st=h.useMemo(()=>Ze.slice(0,8).map(V=>({name:V.name.split(" ")[0],achievement:Number(V.achievedAmount),target:Number(V.targetAmount)})),[Ze]),Ee=h.useMemo(()=>{const V=p.toLowerCase();return l.filter(_e=>(_e.user?`${_e.user.first_name} ${_e.user.last_name}`.toLowerCase():"").includes(V)||_e.start_date?.includes(V)||_e.end_date?.includes(V))},[l,p]),Je=Math.max(1,Math.ceil(Ee.length/v)),be=h.useMemo(()=>{const V=(y-1)*v;return Ee.slice(V,V+v)},[Ee,y,v]),Ke=V=>{const{name:_e,value:Ue}=V.target;F(rt=>({...rt,[_e]:Ue}))},$=()=>{F(e7),k(!1),I(null),S(!0)},G=V=>{F({user_id:V.user?.id?String(V.user.id):"",start_date:V.start_date||"",end_date:V.end_date||"",target_amount:V.target_amount?.toString()||"",period_type:V.period_type||"CUSTOM",period_year:V.period_year||new Date().getFullYear(),period_number:V.period_number||1}),k(!0),I(V.id),S(!0),M(null)},K=V=>{const _e=V.user?`${V.user.first_name} ${V.user.last_name}`:"Unknown";Z({title:"Delete Target",message:n.jsxs("span",{children:["Are you sure you want to delete the target for"," ",n.jsx("span",{className:"font-semibold",children:_e}),"?"]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:async()=>{await ce.delete(`/targets/admin/${V.id}`),q.success("Target deleted successfully."),se(),M(null)}})},ne=()=>{if(be.every(V=>Y.includes(V.id)))oe(Y.filter(V=>!be.map(_e=>_e.id).includes(V)));else{const V=be.map(_e=>_e.id);oe([...new Set([...Y,...V])])}},J=V=>{oe(_e=>_e.includes(V)?_e.filter(Ue=>Ue!==V):[..._e,V])},Ce=async()=>{Y.length!==0&&Z({title:"Delete Targets",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:Y.length})," selected targets? This action cannot be undone."]}),confirmLabel:`Delete ${Y.length} Target(s)`,cancelLabel:"Cancel",variant:"danger",action:async()=>{await ce.post("/targets/admin/bulk-delete",{target_ids:Y}),q.success(`Successfully deleted ${Y.length} targets`),oe([]),se()}})},me=V=>{if(V.preventDefault(),!z.user_id||!z.start_date||!z.end_date||!z.target_amount){q.error("All fields are required.");return}if(new Date(z.end_date)<new Date(z.start_date)){q.error("End date must be after start date.");return}const _e={user_id:Number(z.user_id),target_amount:Number(z.target_amount),start_date:z.start_date,end_date:z.end_date,period_type:z.period_type||"CUSTOM",period_year:z.period_year||new Date().getFullYear(),period_number:z.period_number||null},Ue=T?"Update Target":"Create Target";Z({title:Ue,message:"Are you sure you want to proceed?",confirmLabel:Ue,cancelLabel:"Cancel",variant:"primary",action:async()=>{E(!0);try{T?(await ce.put(`/targets/admin/${A}`,_e),q.success("Target updated successfully.")):(await ce.post("/targets/admin/create",_e),q.success("Target created successfully.")),S(!1),se()}catch(rt){console.error(rt);const bt=rt.response?.data?.detail||rt.message||"Operation failed.";q.error(bt)}finally{E(!1)}}})};return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[u&&n.jsx(Rt,{message:"Loading targets..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold",children:[n.jsx(tr,{className:"mr-2 text-blue-600"})," Targets"]}),de&&n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:$,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(dn,{className:"mr-2"})," Add Target"]})})]}),e?.toUpperCase()!=="SALES"&&n.jsxs("div",{className:"flex border-b border-gray-200 mb-6",children:[n.jsxs("button",{onClick:()=>ve("overview"),className:`px-4 py-3 text-sm font-medium border-b-2 transition ${te==="overview"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[n.jsx(cI,{className:"inline mr-2"}),"Overview"]}),n.jsxs("button",{onClick:()=>ve("leaderboard"),className:`px-4 py-3 text-sm font-medium border-b-2 transition ${te==="leaderboard"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[n.jsx(yS,{className:"inline mr-2"}),"Leaderboard"]}),n.jsxs("button",{onClick:()=>ve("history"),className:`px-4 py-3 text-sm font-medium border-b-2 transition ${te==="history"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[n.jsx(zs,{className:"inline mr-2"}),"History"]})]}),te==="overview"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[n.jsx(jc,{title:"Total Targets",value:Ne.totalCount,icon:n.jsx(tr,{size:22}),color:"blue"}),n.jsx(jc,{title:"Target Amount",value:`${r}${Ne.totalTarget.toLocaleString("en-US",{maximumFractionDigits:0})}`,icon:n.jsx(i,{size:22}),color:"green"}),n.jsx(jc,{title:"Achieved Amount",value:`${r}${Ne.totalAchieved.toLocaleString("en-US",{maximumFractionDigits:0})}`,icon:n.jsx(nu,{size:22}),color:"purple"}),n.jsx(jc,{title:"Achievement Rate",value:`${Ne.achievement}%`,icon:n.jsx(tr,{size:22}),color:"orange"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow p-4 md:h-[420px] h-[350px] flex flex-col",children:[n.jsxs("div",{className:"mb-4 text-center",children:[n.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Sales Achievement"}),n.jsx("div",{className:"h-[38px] w-full invisible"})]}),st.length>0?n.jsx("div",{className:"flex-1 min-h-0 w-full",children:n.jsx(a_,{width:"100%",height:"100%",children:n.jsxs(fIe,{data:st,children:[n.jsx(JT,{strokeDasharray:"3 3",vertical:!1}),n.jsx(rk,{dataKey:"name",tickLine:!1,axisLine:!1,tick:{fontSize:12,fill:"#6b7280"}}),n.jsx(lk,{tickLine:!1,axisLine:!1,label:{value:"Amount",angle:-90,position:"insideLeft",offset:3},domain:[0,V=>Math.ceil(V/50)*50],tick:{fontSize:12,fill:"#6b7280"}}),n.jsx(h_,{cursor:{fill:"rgba(0, 0, 0, 0.15)"},wrapperStyle:{outline:"none",zIndex:9999,pointerEvents:"auto"},contentStyle:{backgroundColor:"#ffffff",border:"2px solid #1f2937",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.2)",zIndex:9999,pointerEvents:"auto"},labelFormatter:V=>`Sales: ${V}`,formatter:(V,_e,Ue)=>{if(!Ue||!Ue.payload)return[V,_e];const rt=Ue.payload,bt=Number(rt.achievement)||0,gt=Number(rt.target)||0,_t=Math.max(0,gt-bt),Wt=gt>0?(bt/gt*100).toFixed(1):0;return _e==="Achieved"?[`${r}${bt.toLocaleString()} (${Wt}%)`,"Achieved"]:_e==="Remaining"?[`${r}${_t.toLocaleString()}`,"Remaining"]:[V,_e]}}),n.jsx(ak,{dataKey:"achievement",stackId:"a",fill:"#10b981",name:"Achieved",label:({x:V,y:_e,width:Ue,value:rt,payload:bt})=>{if(!bt||bt.target===void 0)return null;const gt=(rt/bt.target*100).toFixed(0),_t=_e-10<0?10:_e-10;return n.jsxs("text",{x:V+Ue/2,y:_t,textAnchor:"middle",fill:"#111827",fontSize:10,fontWeight:500,children:[gt,"%"]})}}),n.jsx(ak,{dataKey:V=>Math.max(0,V.target-V.achievement),stackId:"a",fill:"#e5e7eb",name:"Remaining",radius:[0,4,4,0]})]})})}):n.jsxs("div",{className:"flex flex-col items-center justify-center flex-1 text-gray-400",children:[n.jsx(aie,{size:48,className:"mb-2 opacity-20"}),n.jsx("p",{className:"text-gray-500 font-medium text-center",children:"No sales data available"})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow p-4 md:h-[420px] h-[350px] flex flex-col",children:[n.jsxs("div",{className:"text-center mb-4",children:[n.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Target Distribution by Sales"}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center items-center flex-wrap",children:[n.jsxs("select",{value:re,onChange:V=>{ee(V.target.value),ye(1)},className:"border border-gray-300 rounded px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"annual",children:"Annual"}),n.jsx("option",{value:"semiannual",children:"Every 6 Months"}),n.jsx("option",{value:"trimester",children:"Every 4 Months"}),n.jsx("option",{value:"quarterly",children:"Quarterly"})]}),re!=="annual"&&n.jsxs("select",{value:H,onChange:V=>ye(parseInt(V.target.value)),className:"border border-gray-300 rounded px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[re==="semiannual"&&n.jsxs(n.Fragment,{children:[n.jsx("option",{value:1,children:"Jan - Jun"}),n.jsx("option",{value:2,children:"Jul - Dec"})]}),re==="trimester"&&n.jsxs(n.Fragment,{children:[n.jsx("option",{value:1,children:"Jan - Apr"}),n.jsx("option",{value:2,children:"May - Aug"}),n.jsx("option",{value:3,children:"Sep - Dec"})]}),re==="quarterly"&&n.jsxs(n.Fragment,{children:[n.jsx("option",{value:1,children:"Q1 (Jan - Mar)"}),n.jsx("option",{value:2,children:"Q2 (Apr - Jun)"}),n.jsx("option",{value:3,children:"Q3 (Jul - Sep)"}),n.jsx("option",{value:4,children:"Q4 (Oct - Dec)"})]})]})]})]}),Ze.length>0?n.jsx("div",{className:"flex-1 min-h-0 w-full",children:n.jsx(a_,{width:"100%",height:"100%",children:n.jsxs(SIe,{children:[n.jsx(h_,{contentStyle:{backgroundColor:"#fff",border:"1px solid #333",borderRadius:"6px",padding:"10px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",outline:"none"},content:({active:V,payload:_e})=>{if(V&&_e&&_e.length>0){const Ue=_e[0].payload;return n.jsxs("div",{className:"bg-white p-3 border border-gray-300 rounded shadow-lg",children:[n.jsx("p",{className:"text-sm font-semibold text-gray-800",children:Ue.name}),n.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[n.jsx("span",{className:"font-semibold",children:"Target Amount:"})," ",r,Number(Ue.targetAmount||0).toLocaleString("en-US",{maximumFractionDigits:0})]}),n.jsxs("p",{className:"text-xs text-purple-600 font-semibold mt-2",children:["Distribution: ",Ue.percentage,"%"]})]})}return null}}),n.jsx(oX,{data:Ze,dataKey:"targetAmount",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:({name:V,percentage:_e,fill:Ue})=>n.jsxs("text",{fill:Ue,fontSize:12,fontWeight:600,children:[V.split(" ")[0],": ",_e,"%"]}),labelLine:!1,isAnimationActive:!0,animationDuration:800})]})})}):n.jsxs("div",{className:"flex flex-col items-center justify-center flex-1 text-gray-400",children:[n.jsx(cI,{size:48,className:"mb-2 opacity-20"}),n.jsx("p",{className:"text-gray-500 font-medium text-center",children:"No targets data available"})]})]})]}),de&&n.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Bt,{className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search targets...",value:p,onChange:V=>x(V.target.value),className:"w-full outline-none"})]})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 font-semibold text-gray-600",children:n.jsxs("tr",{children:[ke&&n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:be.length>0&&be.every(V=>Y.includes(V.id)),onChange:ne})}),n.jsx("th",{className:"py-3 px-4 text-left",children:"User"}),n.jsx("th",{className:"py-3 px-4 text-left",children:"Target Amount"}),n.jsx("th",{className:"py-3 px-4 text-left",children:"Achieved Amount"}),n.jsx("th",{className:"py-3 px-4 text-left",children:"Achievement %"}),n.jsx("th",{className:"py-3 px-4 text-left",children:"Start Date"}),n.jsx("th",{className:"py-3 px-4 text-left",children:"End Date"}),ke&&n.jsx("th",{className:"py-3 px-4 text-center w-24",children:Y.length>0?n.jsx("button",{onClick:Ce,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${Y.length} selected targets`,children:n.jsx(zt,{size:18})}):""})]})}),n.jsx("tbody",{children:be.length>0?be.map(V=>{const _e=Number(V.target_amount)>0?(Number(V.achieved_amount)/Number(V.target_amount)*100).toFixed(1):0;return n.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer border-b border-gray-200",children:[ke&&n.jsx("td",{className:"py-3 px-4",onClick:Ue=>Ue.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:Y.includes(V.id),onChange:()=>J(V.id)})}),n.jsx("td",{className:"py-3 px-4 text-left font-medium",onClick:()=>M(V),children:V.user?`${V.user.first_name} ${V.user.last_name}`:"Unknown"}),n.jsxs("td",{className:"py-3 px-4 text-left",onClick:()=>M(V),children:[r,Number(V.target_amount).toLocaleString()]}),n.jsxs("td",{className:"py-3 px-4 text-left",onClick:()=>M(V),children:[r,Number(V.achieved_amount).toLocaleString()]}),n.jsx("td",{className:"py-3 px-4 text-left",onClick:()=>M(V),children:n.jsxs("span",{className:`px-2 py-1 rounded text-white text-xs font-semibold ${_e>=100?"bg-green-500":_e>=75?"bg-blue-500":_e>=50?"bg-yellow-500":"bg-red-500"}`,children:[_e,"%"]})}),n.jsx("td",{className:"py-3 px-4 text-left",onClick:()=>M(V),children:V.start_date}),n.jsx("td",{className:"py-3 px-4 text-left",onClick:()=>M(V),children:V.end_date}),n.jsx("td",{})]},V.id)}):n.jsx("tr",{children:n.jsx("td",{colSpan:"8",className:"py-4 px-4 text-center text-gray-500",children:"No targets found"})})})]})}),n.jsx(en,{className:"mt-4",totalItems:Ee.length,pageSize:v,currentPage:y,onPrev:()=>w(V=>Math.max(V-1,1)),onNext:()=>w(V=>Math.min(V+1,Je)),onPageSizeChange:V=>{C(V),w(1)},pageSizeOptions:[10,20,30,40,50],label:"targets"})]}),te==="leaderboard"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm flex flex-wrap gap-4 items-center",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ct,{className:"text-gray-500"}),n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filter by Period:"})]}),n.jsx("select",{value:Te,onChange:V=>He(Number(V.target.value)),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[...Array(5)].map((V,_e)=>{const Ue=new Date().getFullYear()-_e;return n.jsx("option",{value:Ue,children:Ue},Ue)})}),n.jsxs("select",{value:Ye,onChange:V=>{B(V.target.value),Se(1)},className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[n.jsx("option",{value:"",children:"All Periods"}),n.jsx("option",{value:"MONTHLY",children:"Monthly"}),n.jsx("option",{value:"QUARTERLY",children:"Quarterly"}),n.jsx("option",{value:"SEMIANNUAL",children:"Semi-Annual"}),n.jsx("option",{value:"ANNUAL",children:"Annual"})]}),Ye==="QUARTERLY"&&n.jsxs("select",{value:fe,onChange:V=>Se(Number(V.target.value)),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[n.jsx("option",{value:1,children:"Q1"}),n.jsx("option",{value:2,children:"Q2"}),n.jsx("option",{value:3,children:"Q3"}),n.jsx("option",{value:4,children:"Q4"})]}),Ye==="SEMIANNUAL"&&n.jsxs("select",{value:fe,onChange:V=>Se(Number(V.target.value)),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[n.jsx("option",{value:1,children:"H1 (Jan-Jun)"}),n.jsx("option",{value:2,children:"H2 (Jul-Dec)"})]}),Ye==="MONTHLY"&&n.jsx("select",{value:fe,onChange:V=>Se(Number(V.target.value)),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((V,_e)=>n.jsx("option",{value:_e+1,children:V},_e))}),n.jsx("button",{onClick:ct,className:"bg-blue-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-blue-700",children:"Apply Filter"})]}),Ae&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsx(jc,{title:"Sales Reps",value:Ae.total_sales_reps,icon:n.jsx(On,{size:22}),color:"blue"}),n.jsx(jc,{title:"Met Quota",value:Ae.above_target_count,icon:n.jsx(nu,{size:22}),color:"green"}),n.jsx(jc,{title:"Below Quota",value:Ae.below_target_count,icon:n.jsx(bS,{size:22}),color:"orange"}),n.jsx(jc,{title:"Team Achievement",value:`${Ae.overall_achievement}%`,icon:n.jsx(tr,{size:22}),color:"purple"})]}),$e?n.jsx(Rt,{message:"Loading leaderboard..."}):je?.entries?.length>0?n.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[n.jsx("div",{className:"p-4 border-b border-gray-200",children:n.jsxs("h2",{className:"text-lg font-semibold flex items-center",children:[n.jsx(yS,{className:"mr-2 text-yellow-500"}),"Sales Leaderboard",je.period_type!=="ALL"&&n.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-500",children:["(",je.period_type," ",je.period_year,")"]})]})}),n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-600",children:"Rank"}),n.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-600",children:"Sales Rep"}),n.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-600",children:"Role"}),n.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Target"}),n.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Achieved"}),n.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Achievement"}),n.jsx("th",{className:"py-3 px-4 text-center font-semibold text-gray-600",children:"Actions"})]})}),n.jsx("tbody",{children:je.entries.map(V=>n.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`inline-flex items-center justify-center w-8 h-8 rounded-full font-bold text-sm ${V.rank===1?"bg-yellow-100 text-yellow-700":V.rank===2?"bg-gray-100 text-gray-700":V.rank===3?"bg-orange-100 text-orange-700":"bg-gray-50 text-gray-600"}`,children:V.rank})}),n.jsx("td",{className:"py-3 px-4 font-medium",children:V.user_name}),n.jsx("td",{className:"py-3 px-4 text-gray-500",children:V.role}),n.jsxs("td",{className:"py-3 px-4 text-right",children:[r,Number(V.target_amount).toLocaleString()]}),n.jsxs("td",{className:"py-3 px-4 text-right",children:[r,Number(V.achieved_amount).toLocaleString()]}),n.jsx("td",{className:"py-3 px-4 text-right",children:n.jsxs("span",{className:`px-2 py-1 rounded text-white text-xs font-semibold ${V.achievement_percentage>=100?"bg-green-500":V.achievement_percentage>=75?"bg-blue-500":V.achievement_percentage>=50?"bg-yellow-500":"bg-red-500"}`,children:[V.achievement_percentage,"%"]})}),n.jsx("td",{className:"py-3 px-4 text-center",children:n.jsx("button",{onClick:()=>{ue(V.user_id),ve("history")},className:"text-blue-600 hover:text-blue-800 text-sm",children:"View History"})})]},V.user_id))})]})]}):n.jsxs("div",{className:"bg-white rounded-xl p-8 text-center text-gray-500",children:[n.jsx(yS,{size:48,className:"mx-auto mb-4 opacity-20"}),n.jsx("p",{children:"No leaderboard data available for the selected period."})]}),Ae?.needs_attention?.length>0&&n.jsxs("div",{className:"bg-red-50 rounded-xl p-4 border border-red-200",children:[n.jsxs("h3",{className:"text-lg font-semibold text-red-800 mb-3 flex items-center",children:[n.jsx(bS,{className:"mr-2"}),"Needs Attention (Below 50%)"]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:Ae.needs_attention.map(V=>n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-red-100",children:[n.jsx("p",{className:"font-medium text-gray-800",children:V.user_name}),n.jsx("p",{className:"text-sm text-gray-500",children:V.role}),n.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[n.jsxs("span",{className:"text-red-600 font-semibold",children:[V.achievement_percentage,"%"]}),n.jsxs("span",{className:"text-xs text-gray-500",children:[r,Number(V.remaining_amount).toLocaleString()," remaining"]})]})]},V.user_id))})]})]}),te==="history"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Select Sales Rep to View History:"}),n.jsx("div",{className:"flex gap-4 flex-wrap",children:n.jsxs("select",{onChange:V=>V.target.value&&ue(Number(V.target.value)),className:"border border-gray-300 rounded-lg px-4 py-2 text-sm",value:Me?.user_id||"",children:[n.jsx("option",{value:"",children:"-- Select User --"}),c.map(V=>n.jsxs("option",{value:V.id,children:[V.first_name," ",V.last_name]},V.id))]})})]}),he?n.jsx(Rt,{message:"Loading history..."}):Me?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:Me.user_name}),Me.current_period&&Me.previous_period&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[n.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Current Period"}),n.jsx("p",{className:"text-xs text-gray-500",children:Me.current_period.period_label}),n.jsxs("p",{className:"text-2xl font-bold text-blue-700 mt-2",children:[Me.current_period.achievement_percentage,"%"]}),n.jsxs("p",{className:"text-sm text-gray-600",children:[r,Number(Me.current_period.achieved_amount).toLocaleString()," / ",r,Number(Me.current_period.target_amount).toLocaleString()]})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Previous Period"}),n.jsx("p",{className:"text-xs text-gray-500",children:Me.previous_period.period_label}),n.jsxs("p",{className:"text-2xl font-bold text-gray-700 mt-2",children:[Me.previous_period.achievement_percentage,"%"]}),n.jsxs("p",{className:"text-sm text-gray-600",children:[r,Number(Me.previous_period.achieved_amount).toLocaleString()," / ",r,Number(Me.previous_period.target_amount).toLocaleString()]})]}),n.jsxs("div",{className:`rounded-lg p-4 ${Me.growth_percentage>=0?"bg-green-50":"bg-red-50"}`,children:[n.jsx("p",{className:"text-sm font-medium",style:{color:Me.growth_percentage>=0?"#16a34a":"#dc2626"},children:"Growth"}),n.jsxs("p",{className:`text-2xl font-bold mt-2 flex items-center ${Me.growth_percentage>=0?"text-green-700":"text-red-700"}`,children:[Me.growth_percentage>=0?n.jsx(nu,{className:"mr-2"}):n.jsx(bS,{className:"mr-2"}),Me.growth_percentage>=0?"+":"",Me.growth_percentage?.toFixed(1),"%"]}),n.jsxs("p",{className:"text-sm text-gray-600",children:[Me.growth_amount>=0?"+":"",r,Number(Me.growth_amount||0).toLocaleString()]})]})]}),Me.periods?.length>0&&n.jsx("div",{className:"h-64",children:n.jsx(a_,{width:"100%",height:"100%",children:n.jsxs(uIe,{data:[...Me.periods].reverse(),children:[n.jsx(JT,{strokeDasharray:"3 3"}),n.jsx(rk,{dataKey:"period_label",tick:{fontSize:12}}),n.jsx(lk,{tick:{fontSize:12}}),n.jsx(h_,{formatter:(V,_e)=>[`${r}${Number(V).toLocaleString()}`,_e==="achieved_amount"?"Achieved":"Target"]}),n.jsx(rQ,{}),n.jsx(ek,{type:"monotone",dataKey:"target_amount",stroke:"#6366f1",name:"Target",strokeWidth:2}),n.jsx(ek,{type:"monotone",dataKey:"achieved_amount",stroke:"#22c55e",name:"Achieved",strokeWidth:2})]})})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[n.jsx("div",{className:"p-4 border-b border-gray-200",children:n.jsx("h3",{className:"font-semibold",children:"All Historical Periods"})}),n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-600",children:"Period"}),n.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-600",children:"Date Range"}),n.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Target"}),n.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Achieved"}),n.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Achievement"})]})}),n.jsx("tbody",{children:Me.periods.map((V,_e)=>n.jsxs("tr",{className:"border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 font-medium",children:V.period_label}),n.jsxs("td",{className:"py-3 px-4 text-gray-500",children:[V.start_date," - ",V.end_date]}),n.jsxs("td",{className:"py-3 px-4 text-right",children:[r,Number(V.target_amount).toLocaleString()]}),n.jsxs("td",{className:"py-3 px-4 text-right",children:[r,Number(V.achieved_amount).toLocaleString()]}),n.jsx("td",{className:"py-3 px-4 text-right",children:n.jsxs("span",{className:`px-2 py-1 rounded text-white text-xs font-semibold ${V.achievement_percentage>=100?"bg-green-500":V.achievement_percentage>=75?"bg-blue-500":V.achievement_percentage>=50?"bg-yellow-500":"bg-red-500"}`,children:[V.achievement_percentage,"%"]})})]},_e))})]})]})]}):n.jsxs("div",{className:"bg-white rounded-xl p-8 text-center text-gray-500",children:[n.jsx(zs,{size:48,className:"mx-auto mb-4 opacity-20"}),n.jsx("p",{children:"Select a sales rep to view their historical performance."})]})]})]}),D&&n.jsx(EIe,{target:D,currencySymbol:r,onClose:()=>M(null),onEdit:()=>G(D),onDelete:()=>K(D),canEdit:de,canDelete:ke}),N&&de&&n.jsx(TIe,{formData:z,users:c,isEditing:T,isSubmitting:_,onChange:Ke,onClose:()=>S(!1),onSubmit:me,fiscalSettings:Be}),W&&n.jsx(kIe,{...W,loading:R,onConfirm:async()=>{Q(!0),await W.action(),Q(!1),Z(null)},onCancel:()=>Z(null)})]})}function jc({title:e,value:t,icon:a,color:s="blue"}){const r={blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",purple:"bg-purple-100 text-purple-600",orange:"bg-orange-100 text-orange-600"};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200",children:[n.jsx("div",{className:`p-3 rounded-full ${r[s]} mr-4`,children:a}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:e}),n.jsx("p",{className:"text-2xl font-bold",children:t})]})]})}function EIe({target:e,onClose:t,onEdit:a,onDelete:s,canEdit:r,canDelete:i,currencySymbol:l}){const o=Number(e.target_amount)>0?(Number(e.achieved_amount)/Number(e.target_amount)*100).toFixed(1):0;return n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",onClick:t,children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:c=>c.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-4 rounded-t-xl",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Target Details"}),n.jsx("button",{onClick:t,className:"text-gray-200 hover:text-white transition cursor-pointer",children:n.jsx(Vt,{size:25})})]}),r&&n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:e.user&&`${e.user.first_name} ${e.user.last_name}`})}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 cursor-pointer",onClick:a,children:[n.jsx(ia,{className:"mr-2"}),"Edit"]}),i&&n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400 cursor-pointer",onClick:s,children:[n.jsx(zt,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"})]}),n.jsxs("div",{className:"p-4 lg:p-6",children:[n.jsx("div",{className:"flex w-full bg-gray-600 text-white overflow-x-auto",children:n.jsx("button",{className:"flex-1 min-w-[90px] px-4 py-2 lg:text-lg text-sm font-medium text-center text-white",children:"Overview"})}),n.jsx("div",{className:"bg-white rounded-xl shadow-sm sm:p-6 lg:p-5 border border-gray-200 text-sm text-gray-700",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Sales Person:"}),n.jsx("p",{children:e.user?`${e.user.first_name} ${e.user.last_name}`:"Unknown"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Target Amount:"}),n.jsxs("p",{className:"text-green-600 font-semibold",children:[l,Number(e.target_amount).toLocaleString()]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Achieved Amount:"}),n.jsxs("p",{className:"text-blue-600 font-semibold",children:[l,Number(e.achieved_amount).toLocaleString()]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Achievement Rate:"}),n.jsxs("p",{className:`font-semibold ${o>=100?"text-green-600":o>=75?"text-blue-600":o>=50?"text-yellow-600":"text-red-600"}`,children:[o,"%"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Start Date:"}),n.jsx("p",{children:e.start_date})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"End Date:"}),n.jsx("p",{children:e.end_date})]})]})})]})]})})}function TIe({formData:e,users:t,isEditing:a,isSubmitting:s,onChange:r,onClose:i,onSubmit:l,fiscalSettings:o}){const c=o?.fiscal_start_month||1,d=y=>{const w=y.getFullYear(),v=String(y.getMonth()+1).padStart(2,"0"),C=String(y.getDate()).padStart(2,"0");return`${w}-${v}-${C}`},u=(y,w,v)=>{let C,N;if(y==="MONTHLY")C=new Date(w,v-1,1),N=new Date(w,v,0);else if(y==="QUARTERLY"){const S=(v-1)*3,T=(c-1+S)%12;let k=w;c>1&&(T>=c-1?k=w-1:k=w),C=new Date(k,T,1);const _=(T+2)%12,E=T+2>=12?k+1:k;N=new Date(E,_+1,0)}else if(y==="SEMIANNUAL"){const S=(v-1)*6,T=(c-1+S)%12;let k=w;c>1&&(T>=c-1?k=w-1:k=w),C=new Date(k,T,1);const _=(T+5)%12,E=T+5>=12?k+1:k;N=new Date(E,_+1,0)}else if(y==="ANNUAL"){const S=c-1;let T=c>1?w-1:w;C=new Date(T,S,1);const k=(c-2+12)%12;N=new Date(T+1,k+1,0)}return{startDate:C,endDate:N}},f=y=>{const w=y.target.value;if(r({target:{name:"period_type",value:w}}),w!=="CUSTOM"){const v=e.period_year||new Date().getFullYear(),C=e.period_number||1,{startDate:N,endDate:S}=u(w,v,C);N&&S&&(r({target:{name:"start_date",value:d(N)}}),r({target:{name:"end_date",value:d(S)}}))}},p=y=>{const w=Number(y.target.value);r({target:{name:"period_number",value:w}});const v=e.period_year||new Date().getFullYear(),C=e.period_type;if(C!=="CUSTOM"){const{startDate:N,endDate:S}=u(C,v,w);N&&S&&(r({target:{name:"start_date",value:d(N)}}),r({target:{name:"end_date",value:d(S)}}))}},x=y=>{const w=Number(y.target.value);r({target:{name:"period_year",value:w}});const v=e.period_type,C=e.period_number||1;if(v!=="CUSTOM"){const{startDate:N,endDate:S}=u(v,w,C);N&&S&&(r({target:{name:"start_date",value:d(N)}}),r({target:{name:"end_date",value:d(S)}}))}};return h.useEffect(()=>{if(e.period_type!=="CUSTOM"&&!e.start_date){const y=e.period_year||new Date().getFullYear(),w=e.period_number||1,{startDate:v,endDate:C}=u(e.period_type,y,w);v&&C&&(r({target:{name:"start_date",value:d(v)}}),r({target:{name:"end_date",value:d(C)}}))}},[o]),n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl p-8 relative overflow-y-auto max-h-[90vh] hide-scrollbar",children:[n.jsx("button",{onClick:i,className:"absolute top-5 right-5",children:n.jsx(Vt,{size:24})}),n.jsx("h2",{className:"text-2xl font-semibold text-center mb-6",children:a?"Edit Target":"Add New Target"}),n.jsxs("form",{onSubmit:l,className:"grid gap-4 text-base",children:[n.jsxs("div",{className:"flex flex-col gap-1 relative",children:[n.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Assign User"}),n.jsx(AIe,{name:"user_id",items:t,value:e.user_id,onChange:r,getLabel:y=>`${y.first_name} ${y.last_name}`,placeholder:"Search user..."})]}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:"Period Type"}),n.jsx("select",{name:"period_type",value:e.period_type,onChange:f,className:"w-full border text-gray-500 border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400",children:_Ie.map(y=>n.jsx("option",{value:y.value,children:y.label},y.value))})]}),e.period_type!=="CUSTOM"&&e.period_type!=="ANNUAL"&&n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:e.period_type==="MONTHLY"?"Month":e.period_type==="QUARTERLY"?"Quarter":"Half"}),n.jsxs("select",{name:"period_number",value:e.period_number,onChange:p,className:"w-full border text-gray-500 border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400",children:[e.period_type==="MONTHLY"&&["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((y,w)=>n.jsx("option",{value:w+1,children:y},w)),e.period_type==="QUARTERLY"&&[1,2,3,4].map(y=>n.jsxs("option",{value:y,children:["Q",y," ",o?.quarters?.[`Q${y}`]?`(${o.quarters[`Q${y}`]})`:""]},y)),e.period_type==="SEMIANNUAL"&&[1,2].map(y=>n.jsxs("option",{value:y,children:["H",y," ",o?.halves?.[`H${y}`]?`(${o.halves[`H${y}`]})`:`(${y===1?"Jan-Jun":"Jul-Dec"})`]},y))]})]}),e.period_type!=="CUSTOM"&&n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:c!==1?"Fiscal Year":"Year"}),n.jsx("select",{name:"period_year",value:e.period_year,onChange:x,className:"w-full border text-gray-500 border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400",children:[...Array(5)].map((y,w)=>{const v=new Date().getFullYear()+1-w;return n.jsx("option",{value:v,children:c!==1?`FY${v}`:v},v)})})]}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:"Target Amount"}),n.jsx("div",{className:"flex justify-center w-full",children:n.jsx("input",{type:"number",name:"target_amount",placeholder:"0.00",value:e.target_amount,onChange:r,required:!0,className:"w-full max-w-md border text-gray-500 border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"})})]}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("label",{className:"text-sm font-medium text-gray-700 text-left",children:["Start Date ",e.period_type!=="CUSTOM"&&n.jsx("span",{className:"text-gray-400 text-xs",children:"(auto-calculated)"})]}),n.jsx("div",{className:"flex justify-center w-full",children:n.jsx("input",{type:"date",name:"start_date",value:e.start_date,onChange:r,required:!0,className:"w-full max-w-md border text-gray-500 border-gray-300 text-gray-500 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"})})]}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:"End Date"}),n.jsx("div",{className:"flex justify-center w-full",children:n.jsx("input",{type:"date",name:"end_date",value:e.end_date,onChange:r,required:!0,className:"w-full max-w-md border text-gray-500 border-gray-300 text-gray-500 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"})})]}),n.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[n.jsx("button",{type:"button",onClick:i,className:"bg-red-400 text-white px-5 py-2 rounded-lg",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:s,className:"bg-tertiary text-white px-5 py-2 rounded-lg hover:bg-tertiary/90 disabled:opacity-50",children:s?"Saving...":"Save Target"})]})]})]})})}function kIe({title:e,message:t,confirmLabel:a,cancelLabel:s,variant:r,loading:i,onConfirm:l,onCancel:o}){return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:e}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:t}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{onClick:o,disabled:i,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:s}),n.jsx("button",{onClick:l,disabled:i,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${r==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-tertiary/90 border border-tertiary"}`,children:i?"Processing...":a})]})]})})}function LIe(){const{userRole:e}=Bs();return n.jsx(Dj,{currentUserRole:e,currentUserId:null})}const n7=[{value:"Product",label:"Product"},{value:"Service",label:"Service"}],T_={id:null,item_type:"Product",name:"",description:"",sku:"",variant:"",unit:"pcs",quantity:1,unit_price:0,discount_percent:0,discount_amount:0,line_total:0,sort_order:0},Ky=e=>{const t=parseFloat(e.quantity)||0,a=parseFloat(e.unit_price)||0,s=parseFloat(e.discount_percent)||0,r=t*a,i=r*(s/100),l=r-i;return{discount_amount:i,line_total:l}},Cc=(e,t="")=>{const a=parseFloat(e)||0;return`${t}${a.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`};function nd({items:e=[],onChange:t,currencySymbol:a="",readOnly:s=!1,taxRate:r=0,discountType:i=null,discountValue:l=0,onTotalsChange:o}){const[c,d]=h.useState(null),[u,f]=h.useState(null),[p,x]=h.useState(!1),[y,w]=h.useState({...T_});h.useEffect(()=>{if(o){const A=e.reduce((M,W)=>M+(parseFloat(W.line_total)||0),0);let I=0;i==="percentage"&&l?I=A*(parseFloat(l)/100):i==="fixed"&&l&&(I=parseFloat(l));const z=A-I,F=z*(parseFloat(r)/100),D=z+F;o({subtotal:A,discount_amount:I,tax_amount:F,total_amount:D})}},[e,r,i,l,o]);const v=h.useCallback(()=>{if(!y.name.trim()){q.error("Item name is required");return}if(parseFloat(y.unit_price)<=0){q.error("Unit price must be greater than 0");return}if(parseFloat(y.quantity)<=0){q.error("Quantity must be greater than 0");return}const A=Ky(y),I={...y,...A,sort_order:e.length};t([...e,I]),w({...T_}),x(!1),q.success("Item added")},[y,e,t]),C=A=>{if(!u){q.error("No item being edited");return}if(!u.name.trim()){q.error("Item name is required");return}if(parseFloat(u.unit_price)<=0){q.error("Unit price must be greater than 0");return}if(parseFloat(u.quantity)<=0){q.error("Quantity must be greater than 0");return}const I=Ky(u),z={...u,...I},F=e.map((D,M)=>M===A?z:D);t(F),d(null),f(null),q.success("Item updated")},N=h.useCallback(A=>{const I=e.filter((z,F)=>F!==A);I.forEach((z,F)=>{z.sort_order=F}),t(I),q.success("Item removed")},[e,t]),S=h.useCallback((A,I)=>{const z=I==="up"?A-1:A+1;if(z<0||z>=e.length)return;const F=[...e];[F[A],F[z]]=[F[z],F[A]],F.forEach((D,M)=>{D.sort_order=M}),t(F)},[e,t]),T=A=>{d(A),f({...e[A]})},k=()=>{d(null),f(null)},_=e.reduce((A,I)=>A+(parseFloat(I.line_total)||0),0),E=(A,I)=>c===I&&!s?n.jsxs("tr",{className:"bg-blue-50",children:[n.jsx("td",{className:"px-3 py-2",children:n.jsx("select",{value:u.item_type,onChange:F=>f(D=>({...D,item_type:F.target.value})),className:"w-full px-2 py-1 border rounded text-sm",children:n7.map(F=>n.jsx("option",{value:F.value,children:F.label},F.value))})}),n.jsxs("td",{className:"px-3 py-2",children:[n.jsx("input",{type:"text",value:u.name,onChange:F=>f(D=>({...D,name:F.target.value})),className:"w-full px-2 py-1 border rounded text-sm",placeholder:"Name *"}),n.jsx("input",{type:"text",value:u.variant||"",onChange:F=>f(D=>({...D,variant:F.target.value})),className:"w-full px-2 py-1 border rounded text-sm mt-1",placeholder:"Variant (optional)"})]}),n.jsx("td",{className:"px-3 py-2",children:n.jsx("input",{type:"text",value:u.sku||"",onChange:F=>f(D=>({...D,sku:F.target.value})),className:"w-full px-2 py-1 border rounded text-sm",placeholder:"SKU"})}),n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{className:"flex gap-1",children:[n.jsx("input",{type:"number",value:u.quantity,onChange:F=>f(D=>({...D,quantity:F.target.value})),className:"w-16 px-2 py-1 border rounded text-sm text-right",min:"0.01",step:"0.01"}),n.jsx("input",{type:"text",value:u.unit||"",onChange:F=>f(D=>({...D,unit:F.target.value})),className:"w-16 px-2 py-1 border rounded text-sm",placeholder:"Unit"})]})}),n.jsx("td",{className:"px-3 py-2",children:n.jsx("input",{type:"number",value:u.unit_price,onChange:F=>f(D=>({...D,unit_price:F.target.value})),className:"w-24 px-2 py-1 border rounded text-sm text-right",min:"0",step:"0.01"})}),n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("input",{type:"number",value:u.discount_percent||0,onChange:F=>f(D=>({...D,discount_percent:F.target.value})),className:"w-16 px-2 py-1 border rounded text-sm text-right",min:"0",max:"100",step:"0.01"}),n.jsx("span",{className:"text-sm text-gray-500",children:"%"})]})}),n.jsx("td",{className:"px-3 py-2 text-right font-medium",children:Cc(Ky(u).line_total,a)}),n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{type:"button",onClick:()=>C(I),className:"p-1 text-green-600 hover:bg-green-100 rounded",title:"Save",children:n.jsx(Rk,{size:16})}),n.jsx("button",{type:"button",onClick:k,className:"p-1 text-gray-600 hover:bg-gray-100 rounded",title:"Cancel",children:n.jsx(Vt,{size:16})})]})})]},A.id||`edit-${I}`):n.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[n.jsx("td",{className:"px-3 py-2",children:n.jsx("span",{className:`inline-block px-2 py-0.5 rounded text-xs font-medium ${A.item_type==="Service"?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:A.item_type})}),n.jsxs("td",{className:"px-3 py-2",children:[n.jsx("div",{className:"font-medium text-gray-900",children:A.name}),A.variant&&n.jsx("div",{className:"text-xs text-gray-500",children:A.variant}),A.description&&n.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:A.description})]}),n.jsx("td",{className:"px-3 py-2 text-gray-600 text-sm",children:A.sku||"-"}),n.jsxs("td",{className:"px-3 py-2 text-center",children:[n.jsx("span",{className:"font-medium",children:parseFloat(A.quantity).toLocaleString()}),A.unit&&n.jsx("span",{className:"text-gray-500 text-sm ml-1",children:A.unit})]}),n.jsx("td",{className:"px-3 py-2 text-right",children:Cc(A.unit_price,a)}),n.jsx("td",{className:"px-3 py-2 text-right text-sm",children:parseFloat(A.discount_percent)>0?n.jsxs("span",{className:"text-red-600",children:["-",parseFloat(A.discount_percent).toFixed(1),"%"]}):n.jsx("span",{className:"text-gray-400",children:"-"})}),n.jsx("td",{className:"px-3 py-2 text-right font-medium",children:Cc(A.line_total,a)}),!s&&n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{type:"button",onClick:()=>S(I,"up"),disabled:I===0,className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded disabled:opacity-30",title:"Move up",children:n.jsx(rie,{size:14})}),n.jsx("button",{type:"button",onClick:()=>S(I,"down"),disabled:I===e.length-1,className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded disabled:opacity-30",title:"Move down",children:n.jsx(jt,{size:14})}),n.jsx("button",{type:"button",onClick:()=>T(I),className:"p-1 text-blue-600 hover:bg-blue-100 rounded",title:"Edit",children:n.jsx(oa,{size:14})}),n.jsx("button",{type:"button",onClick:()=>N(I),className:"p-1 text-red-600 hover:bg-red-100 rounded",title:"Delete",children:n.jsx(zt,{size:14})})]})})]},A.id||`row-${I}`);return n.jsxs("div",{className:"border rounded-lg overflow-hidden bg-white",children:[n.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-50 border-b",children:[n.jsxs("h3",{className:"font-semibold text-gray-800",children:["Line Items ",e.length>0&&n.jsxs("span",{className:"text-gray-500 font-normal",children:["(",e.length,")"]})]}),!s&&!p&&n.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-1.5 px-3 py-1.5 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition",children:[n.jsx(dn,{size:14}),"Add Item"]})]}),p&&!s&&n.jsxs("div",{className:"p-4 bg-blue-50 border-b",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Type"}),n.jsx("select",{value:y.item_type,onChange:A=>w({...y,item_type:A.target.value}),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:n7.map(A=>n.jsx("option",{value:A.value,children:A.label},A.value))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Name *"}),n.jsx("input",{type:"text",value:y.name,onChange:A=>w({...y,name:A.target.value}),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Product/Service name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"SKU"}),n.jsx("input",{type:"text",value:y.sku,onChange:A=>w({...y,sku:A.target.value}),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Item code"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Variant"}),n.jsx("input",{type:"text",value:y.variant,onChange:A=>w({...y,variant:A.target.value}),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Size, color, etc."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Quantity *"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"number",value:y.quantity,onChange:A=>w({...y,quantity:A.target.value}),className:"w-20 px-3 py-2 border rounded-lg text-sm text-right focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"0.01",step:"0.01"}),n.jsx("input",{type:"text",value:y.unit,onChange:A=>w({...y,unit:A.target.value}),className:"w-20 px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Unit"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Unit Price *"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:a}),n.jsx("input",{type:"number",value:y.unit_price,onChange:A=>w({...y,unit_price:A.target.value}),className:"w-full pl-8 pr-3 py-2 border rounded-lg text-sm text-right focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"0",step:"0.01"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Discount %"}),n.jsx("input",{type:"number",value:y.discount_percent,onChange:A=>w({...y,discount_percent:A.target.value}),className:"w-full px-3 py-2 border rounded-lg text-sm text-right focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"0",max:"100",step:"0.01"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Line Total"}),n.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded-lg text-sm text-right font-medium",children:Cc(Ky(y).line_total,a)})]})]}),n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Description (optional)"}),n.jsx("textarea",{value:y.description,onChange:A=>w({...y,description:A.target.value}),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:2,placeholder:"Additional details about this item..."})]}),n.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[n.jsx("button",{onClick:()=>{x(!1),w({...T_})},className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition text-sm",children:"Cancel"}),n.jsx("button",{onClick:v,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition text-sm",children:"Add Item"})]})]}),e.length>0?n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-50 border-b",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-600 w-20",children:"Type"}),n.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-600",children:"Item"}),n.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-600 w-24",children:"SKU"}),n.jsx("th",{className:"px-3 py-2 text-center font-medium text-gray-600 w-28",children:"Qty"}),n.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-600 w-28",children:"Price"}),n.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-600 w-20",children:"Disc."}),n.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-600 w-28",children:"Total"}),!s&&n.jsx("th",{className:"px-3 py-2 w-28"})]})}),n.jsx("tbody",{children:e.map((A,I)=>E(A,I))})]})}):n.jsxs("div",{className:"p-8 text-center text-gray-500",children:[n.jsx("p",{children:"No items added yet."}),!s&&n.jsx("button",{onClick:()=>x(!0),className:"mt-2 text-blue-600 hover:underline text-sm",children:"+ Add your first item"})]}),e.length>0&&n.jsx("div",{className:"border-t bg-gray-50 px-4 py-3",children:n.jsx("div",{className:"flex justify-end",children:n.jsxs("div",{className:"w-64 space-y-1",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),n.jsx("span",{className:"font-medium",children:Cc(_,a)})]}),parseFloat(l)>0&&n.jsxs("div",{className:"flex justify-between text-sm text-red-600",children:[n.jsxs("span",{children:["Discount (",i==="percentage"?`${l}%`:"Fixed","):"]}),n.jsxs("span",{children:["-",Cc(i==="percentage"?_*(parseFloat(l)/100):parseFloat(l),a)]})]}),parseFloat(r)>0&&n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsxs("span",{className:"text-gray-600",children:["Tax (",r,"%):"]}),n.jsx("span",{children:Cc((_-(i==="percentage"?_*(parseFloat(l)/100):parseFloat(l)||0))*(parseFloat(r)/100),a)})]}),n.jsxs("div",{className:"flex justify-between text-base font-semibold pt-1 border-t",children:[n.jsx("span",{children:"Total:"}),n.jsx("span",{children:Cc((()=>{let A=0;i==="percentage"&&l?A=_*(parseFloat(l)/100):i==="fixed"&&l&&(A=parseFloat(l));const I=_-A,z=I*(parseFloat(r)/100);return I+z})(),a)})]})]})})})]})}const k_=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],L_={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:"",subtotal:0,tax_rate:0,tax_amount:0,discount_type:"",discount_value:0,discount_amount:0,currency:"PHP",items:[]},Ai=e=>{if(!e)return"Draft";const t=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[t]||"Draft"},P_=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",PIe=e=>{switch(Ai(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},DIe=e=>{switch(Ai(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},Xy=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",mg=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",OIe=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const t=new Date(e);if(isNaN(t.getTime()))return"";const a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`}catch{return""}},D_=(e,t)=>{if(!e||t==null||t==="")return"";const a=Number(t);if(Number.isNaN(a))return"";const s=new Date(e);return isNaN(s.getTime())?"":(s.setDate(s.getDate()+a),s.toISOString().slice(0,10))},a7=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},s7=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},cw=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},MIe=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const s of e){const r=localStorage.getItem(s);if(r)try{const i=JSON.parse(r),l=cw(i);if(l)return l}catch{}}const t=localStorage.getItem("user_id"),a=cw(t);return a||null},IIe=e=>{if(!e)return"";const a=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""},$Ie=e=>{if(!e)return"";const a=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""};function RIe(){const e=yt(),t=Yt(),{user:a}=Kt(),s=a?.company?.currency||"";h.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[r,i]=h.useState([]),[l,o]=h.useState(!1),[c,d]=h.useState([]),[u,f]=h.useState([]),[p,x]=h.useState([]),[y,w]=h.useState([]),[v,C]=h.useState(null),[N,S]=h.useState(null),[T,k]=h.useState(!1),[_,E]=h.useState(!1),[A,I]=h.useState(!1),[z,F]=h.useState(null),[D,M]=h.useState(!1),[W,Z]=h.useState(null),[R,Q]=h.useState(L_),[Y,oe]=h.useState(""),[re,ee]=h.useState("Filter by Status"),[H,ye]=h.useState(null),[te,ve]=h.useState(1),[je,Oe]=h.useState(10),[$e,pe]=h.useState("Overview"),[Me,Le]=h.useState("Draft"),[he,ae]=h.useState([]),[Ae,ge]=h.useState(null);h.useEffect(()=>{const U=t.state?.quoteID;if(U){ge(U),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(Ae&&r.length>0&&!l){const L=r.find(U=>U.id===Ae);L?S(L):q.error("Quote not found."),ge(null)}},[Ae,p,l]),h.useEffect(()=>{let L=!0;return(async()=>{const xe=MIe();if(xe&&L){C(xe);return}try{const De=await ce.get("/auth/me"),ie=cw(De?.data);if(ie&&L){C(ie);return}}catch{}try{const De=await ce.get("/users/me"),ie=cw(De?.data);if(ie&&L){C(ie);return}}catch{}L&&C(null)})(),()=>{L=!1}},[]);const Be=h.useCallback(L=>L&&u.find(xe=>String(xe.id)===String(L))?.name||"",[u]),qe=h.useCallback(L=>{if(!L)return"";const U=p.find(xe=>String(xe.id)===String(L));return U?`${U.first_name} ${U.last_name}`.trim():""},[p]),Te=h.useCallback(L=>{if(!L)return"--";const U=c.find(xe=>String(xe.id)===String(L));return U?.deal_name||U?.name||`Deal #${a7(L)}`},[c]),He=h.useCallback(L=>{const U=c.find(ie=>String(ie.id)===String(L)),xe=IIe(U);let De=$Ie(U);if(!De&&xe){const ie=p.filter(Pe=>String(Pe.account_id||"")===String(xe));if(ie.length>0){const Pe=[...ie].sort((Qe,vt)=>{const ht=`${Qe.first_name||""} ${Qe.last_name||""}`.trim().toLowerCase(),Ut=`${vt.first_name||""} ${vt.last_name||""}`.trim().toLowerCase();return ht.localeCompare(Ut)});De=String(Pe[0].id)}}if(xe&&De){const ie=p.find(Pe=>String(Pe.id)===String(De));ie?.account_id&&String(ie.account_id)!==String(xe)&&(De="")}return{accountId:xe||"",contactId:De||""}},[c,p]),Ye=h.useCallback(L=>{if(!L)return"--";if(L.deal?.deal_name)return L.deal.deal_name;if(L.deal?.name)return L.deal.name;const U=L.deal_id||L.deal?.id;return U?Te(U):"--"},[Te]),B=h.useCallback(L=>{if(!L)return"--";if(L.account?.name)return L.account.name;let U=L.account_id||L.account?.id;if(!U){const xe=L.deal_id||L.deal?.id;xe&&(U=He(xe).accountId)}return U?Be(U)||`Account #${U}`:"--"},[He,Be]),fe=h.useCallback(L=>{if(!L)return"--";if(L.contact?.first_name||L.contact?.last_name)return`${L.contact?.first_name||""} ${L.contact?.last_name||""}`.trim()||"--";let U=L.contact_id||L.contact?.id;if(!U){const De=L.deal_id||L.deal?.id;De&&(U=He(De).contactId)}return(U?qe(U):"")||(U?`Contact #${U}`:"--")},[He,qe]),Se=h.useCallback(async(L=null)=>{o(!0);try{const U=await ce.get("/quotes/admin/fetch-all"),De=[...Array.isArray(U.data)?U.data:[]].sort((ie,Pe)=>{const Qe=ie?.created_at||ie?.updated_at||0,vt=Pe?.created_at||Pe?.updated_at||0;return new Date(vt)-new Date(Qe)});if(i(De),L){const ie=De.find(Pe=>Pe.id===L);S(ie||null)}}catch(U){console.error(U),i([]),U.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch quotes. Please try again later.")}finally{o(!1)}},[]),de=h.useCallback(async()=>{try{const L=await ce.get("/deals/admin/fetch-all");d(Array.isArray(L.data)?L.data:[])}catch(L){console.error(L),L.response?.status===403&&q.warn("Unable to load deals (permission denied).")}},[]),ke=h.useCallback(async()=>{try{const L=await ce.get("/accounts/admin/fetch-all");f(Array.isArray(L.data)?L.data:[])}catch(L){console.error(L),L.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},[]),se=h.useCallback(async()=>{try{const L=await ce.get("/contacts/admin/fetch-all");x(Array.isArray(L.data)?L.data:[])}catch(L){console.error(L),L.response?.status===403&&q.warn("Unable to load contacts (permission denied).")}},[]),We=h.useCallback(async()=>{try{const L=await ce.get("/users/all");w(Array.isArray(L.data)?L.data:[])}catch(L){console.error(L),L.response?.status===403&&q.warn("Unable to load users (permission denied).")}},[]);h.useEffect(()=>{Se(),de(),ke(),se(),We()},[Se,de,ke,se,We]);const Re=h.useMemo(()=>{const L=Y.trim().toLowerCase(),U=re.trim();return r.filter(xe=>{const De=Ye(xe),ie=B(xe),Pe=fe(xe),Qe=D_(xe.presented_date,xe.validity_days),vt=[xe.quote_id,De,ie,Pe,xe.total_amount?.toString(),xe.validity_days?.toString(),xe.presented_date?mg(xe.presented_date):"",Qe?mg(Qe):"",xe.assigned_user?.first_name,xe.assigned_user?.last_name,xe.creator?.first_name,xe.creator?.last_name,xe.status,xe.notes,Xy(xe.created_at),Xy(xe.updated_at)],ht=L===""||vt.some(wn=>wn==null?!1:wn.toString().toLowerCase().includes(L)),Ut=U==="Filter by Status"||Ai(xe.status)===U;return ht&&Ut})},[r,Y,re,Ye,B,fe]),ct=Math.max(1,Math.ceil(Re.length/je)||1);h.useEffect(()=>ve(1),[Y,re]),h.useEffect(()=>{ve(L=>{const U=Math.max(1,Math.ceil(Re.length/je)||1);return L>U?U:L})},[Re.length,je]);const Ie=h.useMemo(()=>{const L=(te-1)*je;return Re.slice(L,L+je)},[Re,te,je]),ue=()=>ve(L=>Math.max(L-1,1)),Ne=()=>ve(L=>Math.min(L+1,ct)),Fe=L=>{S(L),pe("Overview"),Le(Ai(L?.status)||"Draft")},Ze=()=>{S(null),pe("Overview")},st=L=>{L.target.id==="quoteModalBackdrop"&&!D&&Ze()},Ee=h.useCallback(()=>{k(!1),E(!1),Z(null),Q(L_),I(!1)},[]),Je=L=>{L.target.id==="modalBackdrop"&&!A&&!D&&Ee()},be=L=>{const{name:U,value:xe}=L.target;if(U==="deal_id"){const{accountId:De,contactId:ie}=He(xe);Q(Pe=>({...Pe,deal_id:xe,account_id:De,contact_id:ie}));return}Q(De=>({...De,[U]:xe}))},Ke=()=>{Q(L_),E(!1),Z(null),k(!0)},$=L=>{if(!L)return;S(null);const U=L.deal?.id?String(L.deal.id):L.deal_id?String(L.deal_id):"",xe=U?He(U):{accountId:"",contactId:""},De=L.account?.id?String(L.account.id):L.account_id?String(L.account_id):xe.accountId,ie=L.contact?.id?String(L.contact.id):L.contact_id?String(L.contact_id):xe.contactId,Pe=L.assigned_user?.id?String(L.assigned_user.id):L.assigned_to?String(L.assigned_to):"";Q({deal_id:U,account_id:De||"",contact_id:ie||"",total_amount:L.total_amount?.toString()||"",presented_date:OIe(L.presented_date),validity_days:L.validity_days!==null&&L.validity_days!==void 0?String(L.validity_days):"",status:Ai(L.status)||"Draft",assigned_to:Pe,notes:L.notes||"",subtotal:parseFloat(L.subtotal)||0,tax_rate:parseFloat(L.tax_rate)||0,tax_amount:parseFloat(L.tax_amount)||0,discount_type:L.discount_type||"",discount_value:parseFloat(L.discount_value)||0,discount_amount:parseFloat(L.discount_amount)||0,currency:L.currency||"PHP",items:Array.isArray(L.items)?L.items.map(Qe=>({id:Qe.id,item_type:Qe.item_type||"Product",name:Qe.name||"",description:Qe.description||"",sku:Qe.sku||"",variant:Qe.variant||"",unit:Qe.unit||"pcs",quantity:parseFloat(Qe.quantity)||1,unit_price:parseFloat(Qe.unit_price)||0,discount_percent:parseFloat(Qe.discount_percent)||0,discount_amount:parseFloat(Qe.discount_amount)||0,line_total:parseFloat(Qe.line_total)||0,sort_order:Qe.sort_order||0})):[]}),E(!0),Z(L.id),k(!0)},G=L=>{if(L.target.checked){const U=Ie.map(xe=>xe.id);ae(U)}else ae([])},K=L=>{ae(U=>U.includes(L)?U.filter(xe=>xe!==L):[...U,L])},ne=L=>{if(!L)return;const U=L.quote_id||"this quote";F({title:"Delete Quote",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:U}),"? This action cannot be undone."]}),confirmLabel:"Delete Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:L.id,name:U}})},J=async()=>{he.length!==0&&F({title:"Delete Quotes",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:he.length})," selected quotes? This action cannot be undone."]}),confirmLabel:`Delete ${he.length} Quote(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",quote_ids:he}})},[Ce,me]=h.useState(!1),V=L=>{if(L.preventDefault(),me(!0),!v){q.error("Unable to determine current user. Please log in again.");return}if(!R.deal_id){q.error("Deal is required.");return}if(!R.assigned_to){q.error("Assigned To is required.");return}const xe=He(R.deal_id),De=R.items.map((ht,Ut)=>({item_type:ht.item_type||"Product",name:ht.name,description:ht.description||null,sku:ht.sku||null,variant:ht.variant||null,unit:ht.unit||null,quantity:parseFloat(ht.quantity)||1,unit_price:parseFloat(ht.unit_price)||0,discount_percent:parseFloat(ht.discount_percent)||0,sort_order:ht.sort_order??Ut})),ie={deal_id:Number(R.deal_id),account_id:xe.accountId?Number(xe.accountId):null,contact_id:xe.contactId?Number(xe.contactId):null,subtotal:parseFloat(R.subtotal)||0,tax_rate:parseFloat(R.tax_rate)||0,tax_amount:parseFloat(R.tax_amount)||0,discount_type:R.discount_type||null,discount_value:parseFloat(R.discount_value)||0,discount_amount:parseFloat(R.discount_amount)||0,total_amount:parseFloat(R.total_amount)||0,currency:R.currency||"PHP",presented_date:R.presented_date||null,validity_days:R.validity_days===""?null:Number(R.validity_days),status:R.status||"Draft",assigned_to:R.assigned_to?Number(R.assigned_to):null,notes:R.notes?.trim()||null,items:De},Pe=_&&W?"update":"create",Qe=Te(R.deal_id),vt=Pe==="create"?{...ie,created_by_id:Number(v)}:ie;F({title:Pe==="create"?"Confirm New Quote":"Confirm Update",message:Pe==="create"?n.jsxs("span",{children:["Are you sure you want to create a quote for"," ",n.jsx("span",{className:"font-semibold",children:Qe}),"?"]}):n.jsxs("span",{children:["Save changes to"," ",n.jsx("span",{className:"font-semibold",children:Qe}),"?"]}),confirmLabel:Pe==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:Pe,payload:vt,targetId:W||null,name:Qe}})},_e=async()=>{if(!z?.action){F(null);return}const{action:L}=z,{type:U,payload:xe,targetId:De,name:ie}=L;M(!0);try{if(U==="create")I(!0),await ce.post("/quotes/admin",xe),q.success("Quote created successfully."),Ee(),await Se();else if(U==="update"){if(!De)throw new Error("Missing quote identifier for update.");I(!0),await ce.put(`/quotes/admin/${De}`,xe),q.success("Quote updated successfully."),Ee(),await Se(),N?.id===De&&S(null)}else if(U==="delete"){if(!De)throw new Error("Missing quote identifier for deletion.");const Pe=N?.id;ye(De),await ce.delete(`/quotes/admin/${De}`),q.success(`Quote "${ie}" deleted successfully.`),await Se(Pe&&Pe!==De?Pe:null),Pe===De&&S(null)}else U==="bulk-delete"&&(await ce.post("/quotes/admin/bulk-delete",{quote_ids:he}),q.success(`Successfully deleted ${he.length} quotes`),ae([]),await Se())}catch(Pe){console.error(Pe);const Qe=U==="create"?"Failed to create quote. Please review the details and try again.":U==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";q.error(Qe),(U==="create"||U==="update")&&I(!1),U==="delete"&&ye(null)}finally{(U==="create"||U==="update")&&I(!1),U==="delete"&&ye(null),M(!1),F(null)}},Ue=()=>{D||F(null)},rt=h.useCallback((L,U)=>{const xe=L?.deal_id??L?.deal?.id??"",De=xe?Number(xe):null,ie=De?He(String(De)):{accountId:"",contactId:""},Pe=L?.account_id??L?.account?.id??ie.accountId??null,Qe=L?.contact_id??L?.contact?.id??ie.contactId??null,vt=L?.total_amount??0,ht=L?.assigned_to??L?.assigned_user?.id??null;return{deal_id:De,account_id:Pe!=null&&String(Pe).trim()!==""?Number(Pe):null,contact_id:Qe!=null&&String(Qe).trim()!==""?Number(Qe):null,total_amount:Number(vt),presented_date:L?.presented_date||null,validity_days:L?.validity_days===""||L?.validity_days===void 0||L?.validity_days===null?null:Number(L.validity_days),status:U,assigned_to:ht!=null&&String(ht).trim()!==""?Number(ht):null,notes:L?.notes?.trim()||null}},[He]),bt=h.useCallback(async()=>{if(!N?.id)return;const L=Ai(Me),U=[L,L.toLowerCase()],xe=async De=>ce.patch(`/quotes/admin/${N.id}/status`,{status:De},{headers:{"Content-Type":"application/json"}});try{let De=!1;for(const ie of U)try{await xe(ie),De=!0;break}catch(Pe){if(Pe?.response?.status===422)continue;throw Pe}if(!De){const ie=rt(N,L);if(!ie.deal_id){q.error("Cannot update status: missing deal_id on selected quote.");return}if(!ie.total_amount||ie.total_amount<=0){q.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await ce.put(`/quotes/admin/${N.id}`,ie)}q.success(`Quote status updated to ${L}`),S(null),pe("Overview"),await Se()}catch(De){console.error(De);const ie=De?.response?.data?.message||(De?.response?.data?.errors?Object.values(De.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";q.error(ie)}},[N,Me,Se,rt]),gt=[{label:"Filter by Status",value:"Filter by Status"},...k_.map(L=>({label:L.label,value:L.value}))],_t=z?.action?.type==="delete"?z.action.targetId:null,Wt=N&&(H===N.id||_t===N.id),un=N&&H===N.id,le=N?n.jsx("div",{id:"quoteModalBackdrop",onClick:st,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:L=>L.stopPropagation(),children:[n.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:n.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),n.jsx("button",{onClick:Ze,className:"text-gray-500 hover:text-white transition cursor-pointer",children:n.jsx(Vn,{size:25})})]})}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:Ye(N)}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${DIe(N.status)}`,children:P_(N.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>$(N),disabled:D||z?.action?.type==="update"&&z.action.targetId===N.id,children:[n.jsx(ia,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>ne(N),disabled:!!Wt,children:un?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(zt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-1 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(L=>n.jsx("button",{onClick:()=>pe(L),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${$e===L?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:L},L))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[$e==="Overview"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Quote ID:"}),n.jsx("p",{children:s7(N.quote_id)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Deal:"}),n.jsx("p",{children:Ye(N)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Account:"}),n.jsx("p",{children:B(N)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact:"}),n.jsx("p",{children:fe(N)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Total Amount:"}),n.jsx("p",{children:N.total_amount?`${s}${Number(N.total_amount).toLocaleString()}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Presented Date:"}),n.jsx("p",{children:mg(N.presented_date)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Validity Days:"}),n.jsx("p",{children:N.validity_days!==null&&N.validity_days!==void 0?N.validity_days:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),n.jsx("p",{children:mg(D_(N.presented_date,N.validity_days))||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:P_(N.status)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:N.assigned_user?`${N.assigned_user.first_name} ${N.assigned_user.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:N.creator?`${N.creator.first_name} ${N.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:Xy(N.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:Xy(N.updated_at)||"N/A"})]})]}),N.items&&N.items.length>0&&n.jsx("div",{className:"mt-6",children:n.jsx(nd,{items:N.items,onChange:()=>{},currencySymbol:s,readOnly:!0,taxRate:parseFloat(N.tax_rate)||0,discountType:N.discount_type,discountValue:parseFloat(N.discount_value)||0})})]}),$e==="Notes"&&n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),n.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:N.notes||"No notes available."})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(At,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Quotes"}}}),children:[n.jsx(Ct,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Gt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:Me||Ai(N.status)||"Draft",onChange:L=>Le(L.target.value),children:k_.map(L=>n.jsx("option",{value:L.value,children:L.label},L.value))}),n.jsx("button",{onClick:bt,disabled:Ai(Me)===Ai(N.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Ai(Me)===Ai(N.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,it=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[l&&n.jsx(Rt,{message:"Loading quotes..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(xn,{className:"mr-2 text-blue-600"})," Quotes"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto gap-2",children:n.jsxs("button",{onClick:()=>{Ke(),me(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(dn,{className:"mr-2"})," Add Quote"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search quotes",value:Y,onChange:L=>oe(L.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:re,onChange:L=>ee(L.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:gt.map(L=>n.jsx("option",{value:L.value,children:L.label},L.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:Ie.length>0&&he.length===Ie.length,onChange:G,className:"cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),n.jsx("th",{className:"py-3 px-4",children:"Deal"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Expiry Date"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:he.length>0?n.jsx("button",{onClick:J,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${he.length} selected items`,children:n.jsx(zt,{size:18})}):""})]})}),n.jsx("tbody",{children:l?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"Loading quotes..."})}):Re.length>0?Ie.map(L=>{const U=D_(L.presented_date,L.validity_days);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>Fe(L),children:[n.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:xe=>xe.stopPropagation(),children:n.jsx("input",{type:"checkbox",checked:he.includes(L.id),onChange:()=>K(L.id),className:"cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:s7(L.quote_id)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:Ye(L)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-sm text-gray-700 break-words",children:B(L)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:fe(L)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-700",children:L.total_amount?`${s}${Number(L.total_amount).toLocaleString()}`:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${PIe(L.status)}`,children:P_(L.status)})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{children:L.assigned_user?`${L.assigned_user.first_name} ${L.assigned_user.last_name}`:"Unassigned"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-500 text-xs",children:mg(U)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top text-center w-24"})]},L.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"No quotes found."})})})]})}),n.jsx(en,{className:"mt-4",totalItems:Re.length,pageSize:je,currentPage:te,onPrev:ue,onNext:Ne,onPageSizeChange:L=>{Oe(L),ve(1)},pageSizeOptions:[10,20,30,40,50],label:"quotes"})]}),Et=T?n.jsx("div",{id:"modalBackdrop",onClick:Je,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:L=>L.stopPropagation(),children:[n.jsx("button",{onClick:()=>{Ee(),me(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:A||D,children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:_?"Edit Quote":"Add New Quote"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:V,children:[n.jsx(l7,{label:"Deal",name:"deal_id",value:R.deal_id,onChange:L=>{const{accountId:U,contactId:xe}=He(L);Q(De=>({...De,deal_id:L,account_id:U,contact_id:xe}))},items:Array.isArray(c)?c:[],getLabel:L=>`${a7(L?.deal_id??"")} ${L?.name??""}`.trim(),placeholder:"Search deal...",required:!0,isSubmitted:Ce,disabled:A||c.length===0,className:"md:col-span-2"}),n.jsx(i7,{label:"Account",value:Be(R.account_id)||(R.account_id?`Account #${R.account_id}`:""),disabled:!0}),n.jsx(i7,{label:"Contact",value:qe(R.contact_id)||(R.contact_id?`Contact #${R.contact_id}`:""),disabled:!0}),n.jsx("div",{className:"md:col-span-2 mt-2",children:n.jsx(nd,{items:R.items,onChange:L=>Q(U=>({...U,items:L})),currencySymbol:s,readOnly:A,taxRate:R.tax_rate,discountType:R.discount_type,discountValue:R.discount_value,onTotalsChange:L=>{Q(U=>({...U,subtotal:L.subtotal,discount_amount:L.discount_amount,tax_amount:L.tax_amount,total_amount:L.total_amount}))}})}),n.jsxs("div",{className:"md:col-span-2 mt-2 p-4 bg-gray-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Pricing Settings"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Discount Type"}),n.jsxs("select",{value:R.discount_type||"",onChange:L=>Q(U=>({...U,discount_type:L.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",disabled:A,children:[n.jsx("option",{value:"",children:"No Discount"}),n.jsx("option",{value:"percentage",children:"Percentage (%)"}),n.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-600 text-xs mb-1",children:["Discount ",R.discount_type==="percentage"?"%":"Amount"]}),n.jsx("input",{type:"number",value:R.discount_value||"",onChange:L=>Q(U=>({...U,discount_value:L.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:R.discount_type==="percentage"?"100":void 0,step:"0.01",disabled:A||!R.discount_type})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Tax Rate (%)"}),n.jsx("input",{type:"number",value:R.tax_rate||"",onChange:L=>Q(U=>({...U,tax_rate:L.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:"100",step:"0.01",disabled:A})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Total Amount"}),n.jsxs("div",{className:"w-full bg-gray-100 border border-gray-300 rounded-md px-2 py-1.5 text-sm font-medium",children:[s,parseFloat(R.total_amount||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),n.jsx(r7,{label:"Presented Date",name:"presented_date",type:"date",value:R.presented_date,onChange:be,disabled:A}),n.jsx(r7,{label:"Validity Days",name:"validity_days",type:"number",value:R.validity_days,onChange:be,placeholder:"30",disabled:A}),n.jsx(l7,{label:"Assigned To",value:R.assigned_to||"",onChange:L=>Q(U=>({...U,assigned_to:L})),items:Array.isArray(y)?y:[],getLabel:L=>{const U=`${L?.first_name??""} ${L?.last_name??""}`.trim();return U?L?.role?`${U} (${L.role})`:U:L?.email||""},placeholder:"Search assignee...",required:!0,isSubmitted:Ce,disabled:A}),n.jsx(zIe,{label:"Status",name:"status",value:R.status,onChange:be,options:k_,required:!0,disabled:A,className:"md:col-span-2"}),n.jsx(UIe,{label:"Notes",name:"notes",value:R.notes,onChange:be,placeholder:"Additional details...",rows:3,disabled:A,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{Ee(),me(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:A||D,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:A||D,children:A?"Saving...":_?"Update Quote":"Save Quote"})]})]})]})}):null,Nt=z?n.jsx(BIe,{open:!0,title:z.title,message:z.message,confirmLabel:z.confirmLabel,cancelLabel:z.cancelLabel,variant:z.variant,onConfirm:_e,onCancel:Ue,loading:D}):null;return n.jsxs(n.Fragment,{children:[N?le:it,Et,Nt]})}function r7({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function i7({label:e,value:t,className:a="",disabled:s=!0}){return n.jsxs("div",{className:a,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("input",{type:"text",value:t??"",disabled:s,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function zIe({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:l=!1,className:o=""}){const c=a!=null?String(a):"",u=r.some(f=>String(f.value)===c)?c:"";return n.jsxs("div",{className:o,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:u,onChange:s,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(f=>n.jsx("option",{value:String(f.value??""),children:f.label},f.value??f.label))})]})}function l7({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:o,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(FIe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:l,hasError:u})]})}function FIe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,hasError:o=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(v=>String(v.id)===String(t)),y=x?s(x):"",w=h.useMemo(()=>{const v=u.trim().toLowerCase();return(v?e.filter(N=>(s(N)||"").toLowerCase().includes(v)):e).slice(0,l)},[e,u,s,l]);return h.useEffect(()=>{const v=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:y,placeholder:r,onFocus:()=>!i&&d(!0),onChange:v=>{f(v.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${o?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:w.length>0?w.map(v=>{const C=String(v.id),N=s(v),S=String(t)===C;return n.jsx("button",{type:"button",onClick:()=>{a(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:N||"--"},C)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function UIe({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:l=!1,className:o=""}){return n.jsxs("div",{className:o,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function BIe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),n.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}const Oj=[{value:"CEO",label:"CEO"},{value:"Group Manager",label:"Group Manager"},{value:"Manager",label:"Manager"},{value:"Sales",label:"Sales"}],fg={firstName:"",lastName:"",email:"",password:"",role:""},HIe={CEO:"bg-purple-100 text-purple-700",ADMIN:"bg-purple-100 text-purple-700",GROUP_MANAGER:"bg-indigo-100 text-indigo-700",MANAGER:"bg-blue-100 text-blue-700",MARKETING:"bg-yellow-100 text-yellow-700",SALES:"bg-green-100 text-green-700"},dl=e=>e?e.toString().trim().replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/\s+/g,"_").toUpperCase():"",GIe=e=>{const t=dl(e),a=Oj.find(s=>dl(s.value)===t);return a?a.value:e||""},uk=e=>{const t=dl(e),a=Oj.find(s=>dl(s.value)===t);return a?a.label:typeof e=="string"?e.toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()):"--"},o7=e=>{if(!e)return"--";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",","")},O_=(e,{size:t="sm"}={})=>{const a=dl(e),s=HIe[a]||"bg-gray-100 text-gray-700",r=t==="lg"?"px-3 py-1 text-sm":t==="md"?"px-2.5 py-1 text-sm":"px-2 py-1 text-xs";return n.jsx("span",{className:`${r} font-semibold rounded-md inline-flex items-center justify-center ${s}`,children:uk(e)})},WIe=(e,t)=>{const a=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${a}${s}`.toUpperCase()||"U"},c7=e=>[...e].sort((t,a)=>{const s=t.created_at?new Date(t.created_at).getTime():0;return(a.created_at?new Date(a.created_at).getTime():0)-s});function VIe(){const{user:e,loading:t}=Kt(),[a,s]=h.useState([]),[r,i]=h.useState(!1),[l,o]=h.useState(""),[c,d]=h.useState(""),[u,f]=h.useState(null),[p,x]=h.useState(!1),[y,w]=h.useState(!1),[v,C]=h.useState(null),[N,S]=h.useState(fg),[T,k]=h.useState(!1),[_,E]=h.useState(null),[A,I]=h.useState(!1),[z,F]=h.useState(1),[D,M]=h.useState(10),[W,Z]=h.useState("Overview"),[R,Q]=h.useState(""),[Y,oe]=h.useState(!1),[re,ee]=h.useState([]),H=dl(e?.role),ye=["ADMIN","CEO"].includes(H),te=!t&&ye,ve=h.useMemo(()=>{const ue=Oj.filter(Ne=>dl(Ne.value)!=="CEO");return[{label:"Filter by Roles",value:""},{label:"CEO",value:"CEO"},...ue]},[]),je=h.useCallback(ue=>{ue&&(s(Ne=>Ne.map(Fe=>Fe.id===ue?{...Fe,highlight:!0}:Fe)),setTimeout(()=>{s(Ne=>Ne.map(Fe=>Fe.id===ue?{...Fe,highlight:!1}:Fe))},2e3))},[]),Oe=h.useCallback(async()=>{i(!0);try{const ue=await ce.get("/users/all"),Ne=Array.isArray(ue.data)?ue.data:[],Fe=c7(Ne);s(Fe),f(Ze=>Ze&&(Fe.find(Ee=>Ee.id===Ze.id)||null)),console.log(ue.data)}catch(ue){console.error("Error fetching users:",ue);const Ne=ue.response?.data?.detail||"Failed to load users. Please try again later.";q.error(Ne)}finally{i(!1)}},[]);h.useEffect(()=>{!t&&!ye&&e&&q.error("You are not authorized to access User Management.")},[ye,t,e]),h.useEffect(()=>{t||!ye||Oe()},[t,ye,Oe]),h.useEffect(()=>{document.title="Users | Sari-Sari CRM"},[]);const $e=h.useMemo(()=>{const ue=l.trim().toLowerCase(),Ne=dl(c);return c7(a.filter(Fe=>{if(!Fe)return!1;const Ze=ue===""||[Fe.first_name,Fe.last_name,`${Fe.first_name||""} ${Fe.last_name||""}`,Fe.email,uk(Fe.role)].filter(Boolean).some(Ee=>Ee.toString().toLowerCase().includes(ue)),st=Ne===""||Ne==="CEO"&&["CEO","ADMIN"].includes(dl(Fe.role))||dl(Fe.role)===Ne;return Ze&&st}))},[a,l,c]),pe=Math.max(1,Math.ceil($e.length/D)||1);h.useEffect(()=>{F(1)},[l,c,D]),h.useEffect(()=>{F(ue=>{const Ne=Math.max(1,Math.ceil($e.length/D)||1);return ue>Ne?Ne:ue})},[$e.length,D]);const Me=h.useMemo(()=>{const ue=(z-1)*D;return $e.slice(ue,ue+D)},[$e,z,D]);$e.length===0||(z-1)*D+1,Math.min(z*D,$e.length);const Le=()=>F(ue=>Math.max(ue-1,1)),he=()=>F(ue=>Math.min(ue+1,pe)),ae=()=>{S(fg),w(!1),C(null),x(!0)},Ae=ue=>{f(ue),Z("Overview"),Q(ue?.is_active?"Active":"Inactive")},ge=ue=>{ue.target.id==="userModalBackdrop"&&!A&&Be()},Be=()=>{f(null)},qe=(ue,Ne)=>{S(Fe=>({...Fe,[ue]:Ne}))},Te=()=>{const ue="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let Ne="";for(let Fe=0;Fe<10;Fe+=1)Ne+=ue.charAt(Math.floor(Math.random()*ue.length));qe("password",Ne)},He=()=>{T||A||(x(!1),S(fg),C(null),w(!1))},Ye=ue=>{S({firstName:ue.first_name||"",lastName:ue.last_name||"",email:ue.email||"",password:"",role:GIe(ue.role)}),w(!0),C(ue.id),x(!0),f(null)},B=ue=>{E({title:"Delete User",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsxs("span",{className:"font-semibold",children:[ue.first_name," ",ue.last_name]}),"? This action cannot be undone."]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:ue.id,name:`${ue.first_name||""} ${ue.last_name||""}`.trim()||ue.email||"user"}})},fe=ue=>{ue.preventDefault();const Ne=N.firstName.trim(),Fe=N.lastName.trim(),Ze=N.email.trim(),st=N.password.trim(),Ee=N.role,Je=!(y&&v);if(!Ne||!Ze||!Ee){q.warn("Please fill in all required fields.");return}if(Je&&!st){q.warn("Please fill in all required fields.");return}if(st&&st.length<8){q.warn("Password should be at least 8 characters long.");return}const be={first_name:Ne,last_name:Fe,email:Ze,role:Ee};(Je||st)&&(be.password=st);const Ke=`${Ne} ${Fe}`.trim(),$=Je?"create":"update";E({title:$==="create"?"Confirm New User":"Confirm User Update",message:$==="create"?n.jsxs("span",{children:["Create user ",n.jsx("span",{className:"font-semibold",children:Ke})," with role"," ",n.jsx("span",{className:"font-semibold",children:uk(Ee)}),"?"]}):n.jsxs("span",{children:["Save changes for"," ",n.jsx("span",{className:"font-semibold",children:Ke||Ze}),"?"]}),confirmLabel:$==="create"?"Create User":"Update User",cancelLabel:"Cancel",variant:"primary",action:{type:$,payload:be,targetId:v,name:Ke||Ze}})},Se=async()=>{re.length!==0&&E({title:"Delete Users",message:n.jsxs("span",{children:["Are you sure you want to deactivate"," ",n.jsx("span",{className:"font-semibold",children:re.length})," selected users? This action cannot be undone."]}),confirmLabel:`Deactivate ${re.length} User(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",user_ids:re}})},de=ue=>{if(ue.target.checked){const Ne=Me.map(Fe=>Fe.id);ee(Ne)}else ee([])},ke=ue=>{ee(Ne=>Ne.includes(ue)?Ne.filter(Fe=>Fe!==ue):[...Ne,ue])},se=async()=>{if(!_?.action){E(null);return}const{action:ue}=_,{type:Ne,payload:Fe,targetId:Ze,name:st}=ue;I(!0),(Ne==="create"||Ne==="update")&&k(!0);try{if(Ne==="create"){const Je=(await ce.post("/users/createuser",Fe)).data;await Oe(),je(Je.id),q.success(`User "${st}" created successfully.`),x(!1),S(fg),C(null),w(!1)}else if(Ne==="update"){if(!Ze)throw new Error("Missing user identifier for update.");const Je=(await ce.put(`/users/updateuser/${Ze}`,Fe)).data;await Oe(),f(null),je(Je.id),q.success(`User "${st}" updated successfully.`),x(!1),S(fg),C(null),w(!1)}else if(Ne==="delete"){if(!Ze)throw new Error("Missing user identifier for deletion.");await ce.delete(`/users/deleteuser/${Ze}`),s(Ee=>Ee.map(Je=>Je.id===Ze?{...Je,is_active:!1}:Je)),u&&u.id===Ze&&(f(null),Q("")),q.success(`User "${st}" deactivated successfully.`)}else Ne==="bulk-delete"&&(await ce.delete("/users/admin/bulk-delete",{data:{user_ids:ue.user_ids}}),s(Ee=>Ee.map(Je=>ue.user_ids.includes(Je.id)?{...Je,is_active:!1}:Je)),u&&ue.user_ids.includes(u.id)&&(f(null),Q("")),q.success(`Successfully deactivated ${ue.user_ids.length} users`),ee([]))}catch(Ee){console.error("User management error:",Ee);const Je=Ne==="create"?"Failed to create user. Please review the details and try again.":Ne==="update"?"Failed to update user. Please review the details and try again.":"Failed to delete user. Please try again.",be=Ee.response?.data?.detail||Je;q.error(be)}finally{(Ne==="create"||Ne==="update")&&k(!1),I(!1),E(null)}},We=()=>{A||E(null)},Re=async()=>{if(!u||!R)return;const ue=u.is_active?"Active":"Inactive";if(R===ue)return;const Ne=R==="Active";oe(!0);try{const Ze=(await ce.put(`/users/updateuser/${u.id}`,{is_active:Ne})).data;s(st=>st.map(Ee=>Ee.id===Ze.id?Ze:Ee)),f(null),Q(""),q.success(`User status updated to ${R}`)}catch(Fe){console.error("Failed to update user status:",Fe);const Ze=Fe.response?.data?.detail||"Failed to update user status. Please try again.";q.error(Ze)}finally{oe(!1)}},ct=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[(r||t||!te)&&n.jsx(Rt,{}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Iw,{className:"mr-2 text-blue-600"}),"User Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:ae,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(Wn,{className:"mr-2"})," Add User"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search users",value:l,onChange:ue=>o(ue.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:c,onChange:ue=>d(ue.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:ve.map(ue=>n.jsx("option",{value:ue.value,children:ue.label},ue.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:Me.length>0&&Me.every(ue=>re.includes(ue.id)),onChange:de})}),n.jsx("th",{className:"py-3 px-4",children:"Fullname"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Role"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:re.length>0?n.jsx("button",{onClick:Se,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Deactivate ${re.length} selected users`,children:n.jsx(zt,{size:18})}):""})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:3,children:"Loading users..."})}):$e.length===0?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-400",colSpan:4,children:"No users found."})}):Me.map(ue=>n.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${ue.highlight?"bg-green-50":""} ${ue.is_active?"":"opacity-60 bg-gray-50"}`,children:[n.jsx("td",{className:"py-3 px-4",onClick:Ne=>Ne.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:re.includes(ue.id),onChange:()=>ke(ue.id)})}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>Ae(ue),children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline text-sm",children:[ue.first_name," ",ue.last_name]})}),n.jsx("td",{className:"py-3 px-4 cursor-pointer text-sm",onClick:()=>Ae(ue),children:ue.email}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>Ae(ue),children:O_(ue.role)}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>Ae(ue),children:n.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-md ${ue.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:ue.is_active?"Active":"Inactive"})})]},ue.id))})]})}),n.jsx(en,{className:"mt-4",totalItems:$e.length,pageSize:D,currentPage:z,onPrev:Le,onNext:he,onPageSizeChange:ue=>{M(ue),F(1)},label:"users"})]}),Ie=u?n.jsx("div",{id:"userModalBackdrop",onClick:ge,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in p-4 sm:p-6 md:p-8 font-inter relative",children:[n.jsx("div",{className:"flex justify-end w-full",children:n.jsx("button",{onClick:Be,className:"text-gray-500 hover:text-gray-700 transition mb-5 cursor-pointer",children:n.jsx(Vn,{size:30})})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7 mb-4 lg:mb-6 md:mb-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[u.profile_picture?n.jsx("img",{src:u.profile_picture,alt:`${u.first_name} ${u.last_name}`,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover border border-gray-200 shadow-sm"}):n.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-200 text-gray-700 flex items-center justify-center text-lg sm:text-xl font-semibold border border-gray-200 shadow-sm",children:WIe(u.first_name,u.last_name)}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[u.first_name," ",u.last_name]}),n.jsx("p",{className:"text-sm text-gray-500 break-all",children:u.email})]})]}),O_(u.role,{size:"md"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Ye(u),disabled:A,children:[n.jsx(oa,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>B(u),disabled:A,children:[n.jsx(zt,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 mb-6"}),n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview"].map(ue=>n.jsx("button",{onClick:()=>Z(ue),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${W===ue?"bg-[#5c636d] text-white border-white":"text-white hover:bg-[#5c636d]"}`,children:ue},ue))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsx("div",{className:"lg:col-span-3",children:W==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:u.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Role:"}),n.jsx("p",{children:O_(u.role,{size:"sm"})})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:u.is_active?"Active":"Inactive"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Auth Provider:"}),n.jsx("p",{children:u.auth_provider?u.auth_provider.toString().replace(/\b\w/g,ue=>ue.toUpperCase()):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:u.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:u.company?.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company Number:"}),n.jsx("p",{children:u.company?.company_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Related to CEO:"}),n.jsx("p",{children:u.manager?`${u.manager.first_name} ${u.manager.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:o7(u.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Login:"}),n.jsx("p",{children:u.last_login?o7(u.last_login):"Never"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Profile Picture:"}),n.jsx("p",{children:u.profile_picture?n.jsx("a",{href:u.profile_picture,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline break-all",children:"View image"}):"N/A"})]})]})})}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsx("div",{className:"flex flex-col gap-2 w-full",children:n.jsxs("button",{type:"button",onClick:()=>{if(!u.email){alert("No email address available");return}const ue=encodeURIComponent(u.email),Ne=encodeURIComponent(""),Fe=encodeURIComponent(""),Ze=`https://mail.google.com/mail/?view=cm&fs=1&to=${ue}&su=${Ne}&body=${Fe}`;window.open(Ze,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Zn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]})})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:R||(u.is_active?"Active":"Inactive"),onChange:ue=>Q(ue.target.value),children:[n.jsx("option",{value:"Active",children:"Active"}),n.jsx("option",{value:"Inactive",children:"Inactive"})]}),n.jsx("button",{onClick:Re,disabled:Y||R===(u.is_active?"Active":"Inactive"),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Y||R===(u.is_active?"Active":"Inactive")?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:Y?"Updating...":"Update"})]})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[ct,Ie,n.jsx(qIe,{open:p,isEditing:y,isSubmitting:T,confirmProcessing:A,formData:N,onClose:He,onSubmit:fe,onChange:qe,onGeneratePassword:Te}),n.jsx(YIe,{open:!!_,title:_?.title,message:_?.message,confirmLabel:_?.confirmLabel,cancelLabel:_?.cancelLabel,variant:_?.variant,loading:A,onConfirm:se,onCancel:We})]})}function qIe({open:e,isEditing:t,isSubmitting:a,confirmProcessing:s,formData:r,onClose:i,onSubmit:l,onChange:o,onGeneratePassword:c}){if(!e)return null;const d=a||s;return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-lg border border-gray-200 p-6 sm:p-8 relative overflow-y-auto max-h-[90vh]",children:[n.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:d,children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-6 text-center",children:t?"Edit User":"Add New User"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:l,children:[n.jsx(Zy,{label:"First Name",value:r.firstName,onChange:u=>o("firstName",u),placeholder:"John",required:!0,disabled:d}),n.jsx(Zy,{label:"Last Name",value:r.lastName,onChange:u=>o("lastName",u),placeholder:"Doe",required:!0,disabled:d}),n.jsx(Zy,{label:"Email",type:"email",value:r.email,onChange:u=>o("email",u),placeholder:"john.doe@company.com",required:!0,disabled:d||t}),n.jsx(Zy,{label:"Role",type:"select",value:r.role,onChange:u=>o("role",u),options:[{value:"",label:"Select role"},...Oj],required:!0,disabled:d}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Password"}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[n.jsx("input",{type:"text",value:r.password,onChange:u=>o("password",u.target.value),placeholder:t?"Leave blank to keep current password":"Enter or generate password",required:!t,disabled:d,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"}),n.jsx("button",{type:"button",onClick:c,className:"flex items-center justify-center px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-60",disabled:d,children:"Generate"})]}),t?n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Setting a password will reset the user's credentials; leave it blank to keep the current password."}):n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long."})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:i,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:d,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:d,children:a?"Saving...":t?"Update User":"Save User"})]})]})]})})}function Zy({label:e,type:t="text",value:a,onChange:s,placeholder:r,options:i=[],required:l=!1,disabled:o=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t==="select"?n.jsx("select",{value:a??"",onChange:c=>s(c.target.value),required:l,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100",children:i.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))}):n.jsx("input",{type:t,value:a??"",onChange:c=>s(c.target.value),placeholder:r,required:l,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"})]})}function YIe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-black hover:bg-gray-800 border border-black";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("div",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),n.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}const QIe=(e,t)=>{const a=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${a}${s}`.toUpperCase()||"U"};function KIe(){const{user:e,loading:t,fetchUser:a}=Kt(),[s,r]=h.useState(!1),[i,l]=h.useState(!1),[o,c]=h.useState(!1),[d,u]=h.useState(!1),[f,p]=h.useState(!1),[x,y]=h.useState(null),[w,v]=h.useState(null),C=h.useRef(null),[N,S]=h.useState({firstName:"",lastName:"",email:"",phoneNumber:""}),[T,k]=h.useState({currentPassword:"",newPassword:"",confirmPassword:""});h.useEffect(()=>{e&&(S({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),v(e.profile_picture||null))},[e]),h.useEffect(()=>{document.title="Manage Account | Sari-Sari CRM"},[]);const _=(F,D)=>{S(M=>({...M,[F]:D}))},E=(F,D)=>{k(M=>({...M,[F]:D}))},A=F=>{const D=F.target.files?.[0];if(!D)return;if(!D.type.startsWith("image/")){q.error("Please select an image file");return}if(D.size>5*1024*1024){q.error("Image size should be less than 5MB");return}const M=new FileReader;M.onloadend=()=>{y(M.result),v(M.result)},M.readAsDataURL(D)},I=async F=>{if(F.preventDefault(),!N.firstName.trim()||!N.lastName.trim()){q.warn("Please fill in all required fields.");return}r(!0);try{const D={first_name:N.firstName.trim(),last_name:N.lastName.trim(),phone_number:N.phoneNumber.trim()||null};x!==null&&(D.profile_picture=x),await ce.put("/users/me",D),await a(),l(!1),y(null),window.dispatchEvent(new CustomEvent("userProfileUpdated")),q.success("Account information updated successfully!")}catch(D){console.error("Error updating account:",D);const M=D.response?.data?.detail||"Failed to update account information. Please try again.";q.error(M)}finally{r(!1)}},z=async F=>{if(F.preventDefault(),!T.newPassword||!T.confirmPassword){q.warn("Please fill in all password fields.");return}if(T.newPassword.length<8){q.warn("Password must be at least 8 characters long.");return}if(T.newPassword!==T.confirmPassword){q.warn("New password and confirm password do not match.");return}p(!0);try{const D={password:T.newPassword};await ce.put("/users/me",D),await a(),k({currentPassword:"",newPassword:"",confirmPassword:""}),window.dispatchEvent(new CustomEvent("userProfileUpdated")),p(!1),q.success("Password changed successfully!")}catch(D){console.error("Error changing password:",D);const M=D.response?.data?.detail||"Failed to change password. Please try again.";q.error(M)}finally{p(!1)}};return n.jsxs("div",{className:"p-2 lg:p-8 font-inter relative",children:[(t||!e)&&n.jsx(Rt,{}),e&&n.jsxs("div",{children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-gray-800 mb-2",children:"Manage Your Account"}),n.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Update your account information and change your password"})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mb-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2",children:[n.jsx(Jt,{className:"text-blue-600"}),"Profile Information"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:!i&&n.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition text-sm",children:[n.jsx(oa,{}),"Edit Profile"]})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 mb-6 pb-6 border-b border-gray-200",children:[n.jsxs("div",{className:"flex-shrink-0 relative group",children:[w?n.jsx("div",{className:"relative",children:n.jsx("img",{src:w,alt:`${e.first_name} ${e.last_name}`,className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full object-cover border-2 border-gray-200 shadow-sm"})}):n.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 text-white flex items-center justify-center text-2xl sm:text-3xl font-semibold border-2 border-gray-200 shadow-sm",children:QIe(e.first_name,e.last_name)}),i&&n.jsxs("div",{className:"absolute bottom-0 right-0",children:[n.jsx("input",{type:"file",ref:C,accept:"image/*",onChange:A,className:"hidden",id:"profile-picture-upload"}),n.jsx("label",{htmlFor:"profile-picture-upload",className:"cursor-pointer bg-gray-900 text-white p-1.5 rounded-full shadow-lg hover:bg-gray-800 transition flex items-center justify-center border-2 border-white",title:"Change profile picture",children:n.jsx(FH,{size:14})})]})]}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[i?N.firstName:e.first_name," ",i?N.lastName:e.last_name]}),n.jsx("p",{className:"text-gray-600 text-sm",children:e.email}),n.jsx("span",{className:"inline-block mt-2 px-3 py-1 bg-blue-100 text-blue-700 text-xs font-semibold rounded-md",children:e.role})]})]}),i?n.jsxs("form",{onSubmit:I,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["First Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Jt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",value:N.firstName,onChange:F=>_("firstName",F.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Jt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",value:N.lastName,onChange:F=>_("lastName",F.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),n.jsxs("div",{className:"sm:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Email"}),n.jsxs("div",{className:"relative",children:[n.jsx(Zn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"email",value:N.email,disabled:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-600 cursor-not-allowed outline-none",readOnly:!0})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),n.jsxs("div",{className:"sm:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Phone Number"}),n.jsxs("div",{className:"relative",children:[n.jsx(At,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"tel",value:N.phoneNumber,onChange:F=>_("phoneNumber",F.target.value),placeholder:"+1 (555) 123-4567",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t border-gray-200",children:[n.jsx("button",{type:"button",onClick:()=>{l(!1),S({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),y(null),v(e.profile_picture||null),C.current&&(C.current.value="")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition",disabled:s,children:"Cancel"}),n.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:s,children:[n.jsx(Fk,{}),s?"Saving...":"Save Changes"]})]})]}):n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"First Name"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.first_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Name"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.last_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Email"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Phone Number"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.phone_number||"N/A"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[n.jsx(fl,{className:"text-blue-600"}),"Change Password"]}),n.jsxs("form",{onSubmit:z,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["New Password ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(fl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",style:o?void 0:{WebkitTextSecurity:"disc"},value:T.newPassword,onChange:F=>E("newPassword",F.target.value),placeholder:"Enter new password (min. 8 characters)",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),n.jsx("button",{type:"button",onClick:()=>c(F=>!F),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":o?"Hide password":"Show password",children:o?n.jsx(hu,{className:"size-5"}):n.jsx(gu,{className:"size-5"})})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Confirm New Password ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(fl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",style:d?void 0:{WebkitTextSecurity:"disc"},value:T.confirmPassword,onChange:F=>E("confirmPassword",F.target.value),placeholder:"Confirm new password",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),n.jsx("button",{type:"button",onClick:()=>u(F=>!F),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":d?"Hide password":"Show password",children:d?n.jsx(hu,{className:"size-5"}):n.jsx(gu,{className:"size-5"})})]})]}),n.jsx("div",{className:"pt-4 border-t border-gray-200 flex justify-center lg:justify-start",children:n.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:f,children:[n.jsx(fl,{}),f?"Changing Password...":"Change Password"]})})]})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mt-6",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[n.jsx(UH,{className:"text-blue-600"}),"Account Information"]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Role"}),n.jsx("span",{className:"inline-block px-3 py-1 bg-blue-100 text-blue-700 text-sm font-semibold rounded-md",children:e.role})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Status"}),n.jsx("span",{className:`inline-block px-3 py-1 text-sm font-semibold rounded-md ${e.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:e.is_active?"Active":"Inactive"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Company"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.company?.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Auth Provider"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.auth_provider?e.auth_provider.charAt(0).toUpperCase()+e.auth_provider.slice(1):"N/A"})]}),e.created_at&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Account Created"}),n.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),e.last_login&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Login"}),n.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.last_login).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})})]})]})]})]})]})}function WX({selectedDeal:e,onStatusUpdate:t,onClose:a}){const[s,r]=h.useState(e?.stage||""),[i,l]=h.useState(!1),o=yt(),c=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}];h.useEffect(()=>{e?.stage&&r(e.stage)},[e]);const d=async()=>{if(!e||!e.id){q.error("No deal selected");return}if(!s||s===e.stage){q.info("Please select a different stage");return}const u=e.id;l(!0);try{await ce.put(`/deals/admin/${u}`,{stage:s}),a&&a(),t&&setTimeout(async()=>{await t(!0)},100),setTimeout(()=>{q.success("Deal status updated successfully")},300)}catch(f){console.error(f);const p=f.response?.data?.detail||"Failed to update deal status";q.error(p)}finally{l(!1)}};return e?n.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{const u=e.account?.id||e.account_id;o("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:e.name?`Call regarding: ${e.name}`:"",relatedType1:"Account",relatedTo1:u,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assigned_to:e.assigned_deals?.id?String(e.assigned_deals.id):"",assignedTo:e.assigned_to?.id?String(e.assigned_to.id):""}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(At,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const u=encodeURIComponent(e.contact.email),f=encodeURIComponent(""),p=encodeURIComponent(""),x=`mailto:${u}?subject=${f}&body=${p}`;window.location.href=x},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Zn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{const u=e.account?.id||e.account_id;o("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:e.name?`Meeting: ${e.name}`:"",relatedType1:"Account",relatedTo1:u,relatedType2:"Deal",relatedTo2:e.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):""}}})},children:[n.jsx(Ct,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{const u=e.account?.id||e.account_id;o("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:e.name?`Task for: ${e.name}`:"",relatedType1:"Account",relatedTo1:u,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Gt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:s,onChange:u=>r(u.target.value),disabled:i,children:c.map(u=>n.jsx("option",{value:u.value,children:u.label},u.value))}),n.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:d,disabled:i||!s||s===e.stage,children:i?"Updating...":"Update"})]})]}):null}function Jx({selectedDeal:e,show:t,onClose:a,activeTab:s,setActiveTab:r,onEdit:i,onDelete:l,onStatusUpdate:o,relatedActs:c}){const d=yt(),[u]=Ds(),f=u.get("id"),[p,x]=h.useState(e||null),[y,w]=h.useState(s||"Overview"),[v,C]=h.useState(null),[N,S]=h.useState(""),{userRole:T}=Bs(),k=s!==void 0?s:y;if(h.useEffect(()=>{T.toLowerCase()==="ceo"||T.toLowerCase()==="admin"?S("admin"):T.toLowerCase()==="group manager"||T.toLowerCase()==="group_manager"?S("group-manager"):T.toLowerCase()==="manager"?S("manager"):T.toLowerCase()==="sales"?S("sales"):S("guest")},[T]),h.useEffect(()=>{(async()=>{if(f&&!e)try{const F=((await ce.get("/deals/admin/fetch-all")).data||[]).find(D=>D.id===parseInt(f));if(F){const D={...F,amount:typeof F.amount=="number"?F.amount:parseFloat(F.amount||0),probability:F.probability||0};x(D)}else console.warn("Deal not found with ID:",f)}catch(I){console.error("Error fetching deal:",I)}})()},[f,e]),!p&&!f||f&&!p)return null;const _=A=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[A]||"bg-gray-100 text-gray-700";function E(A){return A?new Date(A).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),n.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:n.jsx("button",{onClick:()=>{a?a():d(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Vt,{size:25})})})]})}),n.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:n.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[n.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:p.name}),n.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${_(p.stage)}`,children:p.stage})]}),n.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",E(p.created_at)]})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2",children:[n.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[""," ",p.amount?p.amount.toLocaleString():"0"]}),n.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${p.probability}%`}})}),n.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",p.probability,"% Complete"," "]}),n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[n.jsxs("button",{type:"button",onClick:()=>{i&&i(p)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(oa,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),n.jsxs("button",{type:"button",onClick:()=>{l&&l(p)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(zt,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(A=>n.jsx("button",{onClick:()=>{r?r(A):w(A)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${k===A?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:A},A))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[k==="Overview"&&n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Description:"})," ",p.description]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Expected Close Date:"})," ",p.close_date]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("div",{className:"mt-4 py-3 w-full",children:[n.jsxs("div",{className:"relative flex flex-col w-full",children:[n.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const A=(p?.stage||"PROSPECTING").toUpperCase(),z=(D=>D==="PROSPECTING"?0:D==="QUALIFICATION"?1:D==="PROPOSAL"?2:D==="NEGOTIATION"?3:D==="CLOSED_WON"||D==="CLOSED_LOST"?4:-1)(A);return[0,1,2,3,4].map(D=>z===D?"orange":z>D?"green":"gray").map((D,M)=>n.jsxs(pt.Fragment,{children:[n.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${D==="green"?"bg-green-500 border-green-500":D==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),M<4&&n.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},M))})()}),n.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((A,I)=>n.jsx("span",{className:"text-center flex-1 break-words",children:A},I))})]}),n.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:p.stage})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),n.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Account:"})," ",p.account?.name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Primary Contact:"})," ",p.contact?.first_name," ",p.contact?.last_name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Phone:"})," ",p.contact?.work_phone]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",p.contact?.email]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Assigned To:"})," ",p.assigned_deals?.first_name," ",p.assigned_deals?.last_name]})]})]})]}),k==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:p.description||"No notes available."})]})]}),s==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[c.tasks&&c.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(v==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Gt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",c.tasks.length,")"]})]}),v==="tasks"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),v==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:c.tasks.map((A,I)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>d(`/${N}/tasks`,{state:{taskID:A.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Gt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:A.subject||A.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:A.description||"No description"}),A.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",A.assigned_to.first_name," ",A.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:E(A.due_date||A.created_at)})]},`task-${I}`))})]}),c.meetings&&c.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(v==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ct,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",c.meetings.length,")"]})]}),v==="meetings"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),v==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:c.meetings.map((A,I)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>d(`/${N}/meetings`,{state:{meetingID:A.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Ct,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:A.subject||A.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:A.description||A.location||"No description"}),A.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",A.host.first_name," ",A.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:E(A.start_time||A.created_at)})]},`meeting-${I}`))})]}),c.calls&&c.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(v==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(At,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",c.calls.length,")"]})]}),v==="calls"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),v==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:c.calls.map((A,I)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>d(`/${N}/calls`,{state:{callID:A.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(At,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:A.subject||A.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:A.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:E(A.call_time||A.created_at)})]},`call-${I}`))})]}),c.quotes&&c.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(v==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(xn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",c.quotes.length,")"]})]}),v==="quotes"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),v==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:c.quotes.map((A,I)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>d(`/${N}/quotes`,{state:{quoteID:A.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(xn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(A.quote_id?A.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:A.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:E(A.presented_date)||""})]},`quote-${I}`))})]}),(!c||(!c.tasks||c.tasks.length===0)&&(!c.meetings||c.meetings.length===0)&&(!c.calls||c.calls.length===0)&&(!c.quotes||c.quotes.length===0)&&(!c.deals||c.deals.length===0)&&(!c.contacts||c.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]}),k==="Edit"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),n.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:p.name})]}),n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),n.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:p.description})]}),n.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),n.jsx("div",{className:"w-full lg:w-auto",children:n.jsx(WX,{selectedDeal:p,onStatusUpdate:o,onClose:a})})]})]})]})})}function XIe(){h.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const e=yt(),t=Yt(),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Stage"),[l,o]=h.useState("Filter by Owner"),[c,d]=h.useState(null),[u,f]=h.useState("Overview"),[p,x]=h.useState(!1),[y,w]=h.useState(null),[v,C]=h.useState(!1),[N,S]=h.useState(1),[T,k]=h.useState(10),[_,E]=h.useState(!1),[A,I]=h.useState(null),[z,F]=h.useState(!1),[D,M]=h.useState([]),[W,Z]=h.useState(!1),[R,Q]=h.useState(null),[Y,oe]=h.useState([]),[re,ee]=h.useState([]),[H,ye]=h.useState([]),[te,ve]=h.useState({}),[je,Oe]=h.useState(null);h.useEffect(()=>{const K=t.state,ne=K?.dealID;if(ne&&!K?.openDealModal){Oe(ne),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(je&&y?.length>0&&!v){const K=y.find(ne=>ne.id===je);K?d(K):q.error("Deal not found."),Oe(null)}},[je,y,v]);const[$e,pe]=h.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),Me={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST","Closed Cancelled Stage":"CLOSED_CANCELLED"},Le=K=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost",CLOSED_CANCELLED:"Closed Cancelled"})[K]||K||"--",he=K=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700",CLOSED_CANCELLED:"bg-red-100 text-red-700"})[K]||"bg-gray-100 text-gray-700",ae=h.useCallback(async K=>{try{const ne=await ce.get(`/activities/deal/${K}`);ve(ne.data&&typeof ne.data=="object"?ne.data:{})}catch(ne){console.error(ne),ne.response?.status===404&&(console.warn("No activities found for this account."),ve({}))}},[]),Ae=h.useMemo(()=>{const K=a.trim().toLowerCase(),ne=r.trim(),J=l.trim();return(y??[]).filter(Ce=>{const me=[Ce?.name,Ce?.description,Ce?.account?.name,Ce?.contact?.first_name,Ce?.contact?.last_name,Ce?.assigned_deals?.first_name,Ce?.assigned_deals?.last_name],V=K===""||me.some(rt=>rt==null||rt===""?!1:rt.toString().toLowerCase().includes(K)),_e=ne==="Filter by Stage"||ne===""||Ce.stage===Me[ne]||Ce.stage===ne,Ue=J==="Filter by Owner"||J===""||`${Ce.assigned_deals?.first_name||""} ${Ce.assigned_deals?.last_name||""}`.trim().toLowerCase()===J.toLowerCase();return V&&_e&&Ue})},[y,a,r,l]),ge=Math.max(1,Math.ceil(Ae.length/T)||1);h.useEffect(()=>{S(1)},[a,r,l,T]),h.useEffect(()=>{S(K=>{const ne=Math.max(1,Math.ceil(Ae.length/T)||1);return K>ne?ne:K})},[Ae.length,T]);const Be=h.useMemo(()=>{const K=(N-1)*T;return Ae.slice(K,K+T)},[Ae,N,T]),qe=()=>S(K=>Math.max(K-1,1)),Te=()=>S(K=>Math.min(K+1,ge)),He=()=>{pe({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),Z(!1),Q(null),x(!0)},Ye=async()=>{C(!0);try{const K=await ce.get("/deals/admin/fetch-all"),J=[...Array.isArray(K.data)?K.data:[]].sort((Ce,me)=>{const V=Ce?.created_at?new Date(Ce.created_at).getTime():0;return(me?.created_at?new Date(me.created_at).getTime():0)-V});w(J)}catch(K){K.response&&K.response.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch deals. Please try again later."),console.error(K)}finally{C(!1)}},B=async()=>{try{const K=await ce.get("/accounts/admin/fetch-all");oe(Array.isArray(K.data)?K.data:[])}catch(K){console.error(K),K.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},fe=async()=>{try{const K=await ce.get("/contacts/admin/fetch-all");ee(Array.isArray(K.data)?K.data:[])}catch(K){console.error(K),K.response?.status===403&&q.warn("Unable to load contacts (permission denied).")}},Se=async()=>{try{const K=await ce.get("/users/all");ye(Array.isArray(K.data)?K.data:[])}catch(K){console.error(K),K.response?.status===403&&q.warn("Unable to load users (permission denied).")}};h.useEffect(()=>{Ye(),B(),fe(),Se()},[]);const de=K=>{K&&(pe({id:K.id||null,name:K.name||"",account_id:K.account_id?.toString()||"",primary_contact_id:K.primary_contact_id?.toString()||"",stage:K.stage||"PROPOSAL",amount:K.amount?.toString()||"",close_date:K.close_date?new Date(K.close_date).toISOString().split("T")[0]:"",assigned_to:K.assigned_to?.toString()||"",currency:K.currency||"PHP",description:K.description||""}),Z(!0),Q(K.id),d(null),x(!0))},ke=async(K=!1)=>{try{const ne=await ce.get("/deals/admin/fetch-all"),Ce=[...Array.isArray(ne.data)?ne.data:[]].sort((me,V)=>{const _e=me?.created_at?new Date(me.created_at).getTime():0;return(V?.created_at?new Date(V.created_at).getTime():0)-_e});if(w(Ce),!K&&c&&c.id){const me=Ce.find(V=>V.id===c.id);me&&d({...me})}}catch(ne){console.error("Failed to refresh deal data:",ne),await Ye()}},se=K=>{const ne=K.name.trim();if(!ne){q.error("Deal name is required.");return}if(!K.account_id){q.error("Account is required.");return}const J=W&&R?"update":"create",Ce=ne;I({title:J==="create"?"Confirm New Deal":"Confirm Update",message:J==="create"?n.jsxs("span",{children:["Are you sure you want to create"," ",n.jsx("span",{className:"font-semibold",children:Ce}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:Ce}),"?"]}),confirmLabel:J==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:J,formData:K,targetId:R||null,name:Ce}})},We=K=>{if(!K)return;const ne=K.name||"this deal";I({title:"Delete Deal",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:ne}),"? This action cannot be undone."]}),confirmLabel:"Delete Deal",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:K.id,name:ne}})},Re=K=>{if(K.target.checked){const ne=Be.map(J=>J.id);M(ne)}else M([])},ct=K=>{M(ne=>ne.includes(K)?ne.filter(J=>J!==K):[...ne,K])},Ie=async()=>{D.length!==0&&I({title:"Delete Deals",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:D.length})," selected deals? This action cannot be undone."]}),confirmLabel:`Delete ${D.length} Deal(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",dealIds:D}})},ue=async()=>{if(!A?.action){I(null);return}const{action:K}=A,{type:ne,formData:J,targetId:Ce,name:me}=K;F(!0);try{if(ne==="create"){E(!0);const V={name:J.name.trim(),account_id:parseInt(J.account_id),primary_contact_id:J.primary_contact_id?parseInt(J.primary_contact_id):null,stage:J.stage,amount:J.amount?parseFloat(J.amount):null,currency:J.currency||"PHP",close_date:J.close_date||null,description:J.description||null,assigned_to:J.assigned_to?parseInt(J.assigned_to):null};await ce.post("/deals/admin/create",V),q.success(`Deal "${me}" created successfully.`),x(!1),await Ye()}else if(ne==="update"){if(!Ce)throw new Error("Missing deal identifier for update.");E(!0);const V={};J.name!==void 0&&(V.name=J.name.trim()),J.account_id!==void 0&&J.account_id!==""&&(V.account_id=parseInt(J.account_id)),J.primary_contact_id!==void 0&&(V.primary_contact_id=J.primary_contact_id?parseInt(J.primary_contact_id):null),J.stage!==void 0&&(V.stage=J.stage),J.amount!==void 0&&J.amount!==""&&(V.amount=parseFloat(J.amount)),J.currency!==void 0&&(V.currency=J.currency),J.close_date!==void 0&&(V.close_date=J.close_date||null),J.description!==void 0&&(V.description=J.description||null),J.assigned_to!==void 0&&(V.assigned_to=J.assigned_to?parseInt(J.assigned_to):null),await ce.put(`/deals/admin/${Ce}`,V),q.success(`Deal "${me}" updated successfully.`),x(!1),await Ye()}else if(ne==="delete"){if(!Ce)throw new Error("Missing deal identifier for deletion.");await ce.delete(`/deals/admin/${Ce}`),q.success(`Deal "${me}" deleted successfully.`),c?.id===Ce&&d(null),await Ye()}else if(ne==="bulk-delete"){const{dealIds:V}=K;await ce.delete("/deals/admin/bulk-delete",{data:{deal_ids:V}}),q.success(`Successfully deleted ${V.length} deals`),M([]),await Ye()}}catch(V){console.error(V);const _e=ne==="create"?"Failed to create deal. Please review the details and try again.":ne==="update"?"Failed to update deal. Please review the details and try again.":"Failed to delete deal. Please try again.",Ue=V.response?.data?.detail||_e;q.error(Ue)}finally{(ne==="create"||ne==="update")&&E(!1),F(!1),I(null)}},Ne=()=>{z||I(null)},Fe=()=>{x(!1),pe({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),Z(!1),Q(null),E(!1)},Ze=(y??[]).filter(K=>K.stage==="PROSPECTING").length,st=(y??[]).filter(K=>K.stage==="QUALIFICATION").length,Ee=(y??[]).filter(K=>K.stage==="PROPOSAL").length,Je=(y??[]).filter(K=>K.stage==="NEGOTIATION").length,be=(y??[]).filter(K=>K.stage==="CLOSED_WON").length,Ke=(y??[]).filter(K=>K.stage==="CLOSED_LOST").length,$=(y??[]).filter(K=>K.stage==="CLOSED_CANCELLED").length,G=[{title:"Prospecting",value:Ze,icon:$w,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:st,icon:ia,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:Ee,icon:Qt,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:Je,icon:nu,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:be,icon:ba,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:Ke,icon:Ps,color:"text-red-600",bgColor:"bg-red-100"},{title:"Closed Cancelled",value:$,icon:Ps,color:"text-gray-600",bgColor:"bg-gray-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[v&&n.jsx(Rt,{message:"Loading deals..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Qt,{className:"mr-2 text-blue-600"}),"Deals"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:He,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(dn,{className:"mr-2"})," Add Deal"]})})]}),n.jsx("div",{className:"grid grid-cols-1 p-2 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden",children:G.map(K=>n.jsx(JIe,{...K},K.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search deals",value:a,onChange:K=>s(K.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[n.jsxs("select",{value:r,onChange:K=>i(K.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),n.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),n.jsx("option",{value:"Qualification Stage",children:"Qualification"}),n.jsx("option",{value:"Proposal Stage",children:"Proposal"}),n.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),n.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),n.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"}),n.jsx("option",{value:"Closed Cancelled Stage",children:"Closed Cancelled"})]}),n.jsxs("select",{value:l,onChange:K=>o(K.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((y??[]).map(K=>`${K.assigned_deals?.first_name} ${K.assigned_deals?.last_name}`))].map((K,ne)=>n.jsx("option",{value:K,children:K},ne))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:Be.length>0&&Be.every(K=>D.includes(K.id)),onChange:Re})}),n.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Stage"}),n.jsx("th",{className:"py-3 px-4",children:"Value"}),n.jsx("th",{className:"py-3 px-4",children:"Close Date"}),n.jsx("th",{className:"py-3 px-4",children:"Owner"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:D.length>0?n.jsx("button",{onClick:Ie,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${D.length} selected items`,children:n.jsx(zt,{size:18})}):""})]})}),n.jsx("tbody",{children:Ae.length>0?Be.map(K=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{d({...K}),ae(K.id)},children:[n.jsx("td",{className:"py-3 px-4",onClick:ne=>ne.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:D.includes(K.id),onChange:()=>ct(K.id)})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:K.deal_id?K.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:K.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:K.description||"--"})]})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:K.account?.name||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:K.contact?.first_name&&K.contact?.last_name?`${K.contact.first_name} ${K.contact.last_name}`:K.contact?.first_name||K.contact?.last_name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${he(K.stage)}`,children:Le(K.stage)})}),n.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",K.amount?.toLocaleString()||"0"]}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:K.close_date||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:K.assigned_deals?.first_name&&K.assigned_deals?.last_name?`${K.assigned_deals.first_name} ${K.assigned_deals.last_name}`:K.assigned_deals?.first_name||K.assigned_deals?.last_name||"--"})]},K.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No deals found."})})})]})}),n.jsx(en,{className:"mt-4",totalItems:Ae.length,pageSize:T,currentPage:N,onPrev:qe,onNext:Te,onPageSizeChange:K=>{k(K),S(1)},pageSizeOptions:[10,20,30,40,50],label:"deals"}),p&&n.jsx(e$e,{onClose:Fe,formData:$e,setFormData:pe,isEditing:W,onSubmit:se,isSubmitting:_||z,accounts:Y,contacts:re,users:H}),c&&n.jsx(Jx,{relatedActs:te,selectedDeal:c,show:!!c,onClose:()=>d(null),activeTab:u,setActiveTab:f,onEdit:de,onDelete:We,onStatusUpdate:ke}),A&&n.jsx(ZIe,{open:!0,title:A.title,message:A.message,confirmLabel:A.confirmLabel,cancelLabel:A.cancelLabel,variant:A.variant,onConfirm:ue,onCancel:Ne,loading:z})]})}function ZIe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),n.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}function JIe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function e$e({onClose:e,formData:t,setFormData:a,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,accounts:l=[],contacts:o=[],users:c=[]}){const[d,u]=h.useState(!1),f=y=>{if(y.preventDefault(),u(!0),!t.name?.trim()){q.error("Deal name is required.");return}const w=Number(t.amount);if(!t.amount||isNaN(w)||w<=0){q.error("Amount must be a number greater than 0.");return}if(!t.account_id){q.error("Please select an account.");return}if(!t.primary_contact_id){q.error("Please select a primary contact.");return}if(!t.assigned_to){q.error("Please assign this deal to a user.");return}r?.(t)},p=y=>{y.target.id==="modalBackdrop"&&e()},x=h.useMemo(()=>{const y=String(t.account_id||"").trim(),w=Array.isArray(o)?o:[];return y?w.filter(v=>{const N=[v?.account_id,v?.accountId,v?.account?.id,v?.account?.account_id,v?.account?.accountId].find(S=>S!=null&&String(S).trim()!=="");return N?String(N)===y:!1}):w},[o,t.account_id]);return h.useEffect(()=>{const y=String(t.account_id||"").trim(),w=String(t.primary_contact_id||"").trim();if(!w||!y)return;x.some(C=>String(C?.id)===w)||a(C=>({...C,primary_contact_id:""}))},[t.account_id,t.primary_contact_id,x,a]),n.jsx("div",{id:"modalBackdrop",onClick:p,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:y=>y.stopPropagation(),children:[n.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Deal":"Create Deal"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:f,noValidate:!0,children:[n.jsx(M_,{label:"Deal Name",name:"name",value:t.name,onChange:y=>a({...t,name:y.target.value}),placeholder:"Enter deal name",required:!0,isSubmitted:d,className:"md:col-span-2"}),n.jsx(I_,{label:"Account",value:t.account_id||"",onChange:y=>a({...t,account_id:y}),items:l||[],getLabel:y=>y?.name??"",placeholder:"Search account...",disabled:i,required:!0,isSubmitted:d}),n.jsx(I_,{label:"Primary Contact",value:t.primary_contact_id||"",onChange:y=>a({...t,primary_contact_id:y}),items:x||[],getLabel:y=>`${y?.first_name??""} ${y?.last_name??""}`.trim()||y?.email||"",placeholder:"Search contact...",required:!0,isSubmitted:d,disabled:i}),n.jsx(d7,{label:"Stage",name:"stage",value:t.stage,onChange:y=>a({...t,stage:y.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}],disabled:i}),n.jsx(M_,{label:"Amount",name:"amount",type:"number",step:"0.01",value:t.amount,onChange:y=>a({...t,amount:y.target.value}),placeholder:"0",required:!0,isSubmitted:d}),n.jsx(d7,{label:"Currency",name:"currency",value:t.currency||"PHP",onChange:y=>a({...t,currency:y.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),n.jsx(M_,{label:"Close Date",name:"close_date",type:"date",value:t.close_date||"",onChange:y=>a({...t,close_date:y.target.value}),disabled:i}),n.jsx(I_,{label:"Assign To",value:t.assigned_to||"",onChange:y=>a({...t,assigned_to:y}),items:c||[],getLabel:y=>`${y?.first_name??""} ${y?.last_name??""}`.trim()||y?.email||"",placeholder:"Search assignee...",disabled:i,required:!0,isSubmitted:d,className:"md:col-span-2"}),n.jsx(n$e,{label:"Description",name:"description",value:t.description,onChange:y=>a({...t,description:y.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Deal":"Save Deal"})]})]})]})})}function M_({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function d7({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:l=!1,className:o=""}){return n.jsxs("div",{className:o,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))})]})}function I_({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:o,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(t$e,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:l,hasError:u})]})}function t$e({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,hasError:o=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(v=>String(v.id)===String(t)),y=x?s(x):"",w=h.useMemo(()=>{const v=u.trim().toLowerCase();return(v?e.filter(N=>(s(N)||"").toLowerCase().includes(v)):e).slice(0,l)},[e,u,s,l]);return h.useEffect(()=>{const v=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:y,placeholder:r,onFocus:()=>!i&&d(!0),onChange:v=>{f(v.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${o?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:w.length>0?w.map(v=>{const C=String(v.id),N=s(v),S=String(t)===C;return n.jsx("button",{type:"button",onClick:()=>{a(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:N||"--"},C)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function n$e({label:e,name:t,value:a,onChange:s,placeholder:r,required:i=!1,disabled:l=!1,className:o="",rows:c=3}){return n.jsxs("div",{className:o,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,required:i,disabled:l,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}var a$e=Object.defineProperty,s$e=(e,t,a)=>t in e?a$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,$_=(e,t,a)=>(s$e(e,typeof t!="symbol"?t+"":t,a),a);let r$e=class{constructor(){$_(this,"current",this.detect()),$_(this,"handoffState","pending"),$_(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},vl=new r$e;function e0(e){var t;return vl.isServer?null:e==null?document:(t=e?.ownerDocument)!=null?t:document}function mk(e){var t,a;return vl.isServer?null:e==null?document:(a=(t=e?.getRootNode)==null?void 0:t.call(e))!=null?a:document}function VX(e){var t,a;return(a=(t=mk(e))==null?void 0:t.activeElement)!=null?a:null}function i$e(e){return VX(e)===e}function Mj(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Ko(){let e=[],t={addEventListener(a,s,r,i){return a.addEventListener(s,r,i),t.add(()=>a.removeEventListener(s,r,i))},requestAnimationFrame(...a){let s=requestAnimationFrame(...a);return t.add(()=>cancelAnimationFrame(s))},nextFrame(...a){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...a))},setTimeout(...a){let s=setTimeout(...a);return t.add(()=>clearTimeout(s))},microTask(...a){let s={current:!0};return Mj(()=>{s.current&&a[0]()}),t.add(()=>{s.current=!1})},style(a,s,r){let i=a.style.getPropertyValue(s);return Object.assign(a.style,{[s]:r}),this.add(()=>{Object.assign(a.style,{[s]:i})})},group(a){let s=Ko();return a(s),this.add(()=>s.dispose())},add(a){return e.includes(a)||e.push(a),()=>{let s=e.indexOf(a);if(s>=0)for(let r of e.splice(s,1))r()}},dispose(){for(let a of e.splice(0))a()}};return t}function Ij(){let[e]=h.useState(Ko);return h.useEffect(()=>()=>e.dispose(),[e]),e}let lr=(e,t)=>{vl.isServer?h.useEffect(e,t):h.useLayoutEffect(e,t)};function Hu(e){let t=h.useRef(e);return lr(()=>{t.current=e},[e]),t}let Hn=function(e){let t=Hu(e);return pt.useCallback((...a)=>t.current(...a),[t])};function t0(e){return h.useMemo(()=>e,Object.values(e))}let l$e=h.createContext(void 0);function o$e(){return h.useContext(l$e)}function fk(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function Mo(e,t,...a){if(e in t){let r=t[e];return typeof r=="function"?r(...a):r}let s=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(r=>`"${r}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,Mo),s}var dw=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(dw||{}),Fc=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Fc||{});function wi(){let e=d$e();return h.useCallback(t=>c$e({mergeRefs:e,...t}),[e])}function c$e({ourProps:e,theirProps:t,slot:a,defaultTag:s,features:r,visible:i=!0,name:l,mergeRefs:o}){o=o??u$e;let c=qX(t,e);if(i)return Jy(c,a,s,l,o);let d=r??0;if(d&2){let{static:u=!1,...f}=c;if(u)return Jy(f,a,s,l,o)}if(d&1){let{unmount:u=!0,...f}=c;return Mo(u?0:1,{0(){return null},1(){return Jy({...f,hidden:!0,style:{display:"none"}},a,s,l,o)}})}return Jy(c,a,s,l,o)}function Jy(e,t={},a,s,r){let{as:i=a,children:l,refName:o="ref",...c}=R_(e,["unmount","static"]),d=e.ref!==void 0?{[o]:e.ref}:{},u=typeof l=="function"?l(t):l;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(t)),c["aria-labelledby"]&&c["aria-labelledby"]===c.id&&(c["aria-labelledby"]=void 0);let f={};if(t){let p=!1,x=[];for(let[y,w]of Object.entries(t))typeof w=="boolean"&&(p=!0),w===!0&&x.push(y.replace(/([A-Z])/g,v=>`-${v.toLowerCase()}`));if(p){f["data-headlessui-state"]=x.join(" ");for(let y of x)f[`data-${y}`]=""}}if(qg(i)&&(Object.keys(Fd(c)).length>0||Object.keys(Fd(f)).length>0))if(!h.isValidElement(u)||Array.isArray(u)&&u.length>1||f$e(u)){if(Object.keys(Fd(c)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${s} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(Fd(c)).concat(Object.keys(Fd(f))).map(p=>`  - ${p}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(p=>`  - ${p}`).join(`
`)].join(`
`))}else{let p=u.props,x=p?.className,y=typeof x=="function"?(...C)=>fk(x(...C),c.className):fk(x,c.className),w=y?{className:y}:{},v=qX(u.props,Fd(R_(c,["ref"])));for(let C in f)C in v&&delete f[C];return h.cloneElement(u,Object.assign({},v,f,d,{ref:r(m$e(u),d.ref)},w))}return h.createElement(i,Object.assign({},R_(c,["ref"]),!qg(i)&&d,!qg(i)&&f),u)}function d$e(){let e=h.useRef([]),t=h.useCallback(a=>{for(let s of e.current)s!=null&&(typeof s=="function"?s(a):s.current=a)},[]);return(...a)=>{if(!a.every(s=>s==null))return e.current=a,t}}function u$e(...e){return e.every(t=>t==null)?void 0:t=>{for(let a of e)a!=null&&(typeof a=="function"?a(t):a.current=t)}}function qX(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},a={};for(let s of e)for(let r in s)r.startsWith("on")&&typeof s[r]=="function"?(a[r]!=null||(a[r]=[]),a[r].push(s[r])):t[r]=s[r];if(t.disabled||t["aria-disabled"])for(let s in a)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(s)&&(a[s]=[r=>{var i;return(i=r?.preventDefault)==null?void 0:i.call(r)}]);for(let s in a)Object.assign(t,{[s](r,...i){let l=a[s];for(let o of l){if((r instanceof Event||r?.nativeEvent instanceof Event)&&r.defaultPrevented)return;o(r,...i)}}});return t}function gr(e){var t;return Object.assign(h.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function Fd(e){let t=Object.assign({},e);for(let a in t)t[a]===void 0&&delete t[a];return t}function R_(e,t=[]){let a=Object.assign({},e);for(let s of t)s in a&&delete a[s];return a}function m$e(e){return pt.version.split(".")[0]>="19"?e.props.ref:e.ref}function qg(e){return e===h.Fragment||e===Symbol.for("react.fragment")}function f$e(e){return qg(e.type)}let h$e="span";var uw=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(uw||{});function g$e(e,t){var a;let{features:s=1,...r}=e,i={ref:t,"aria-hidden":(s&2)===2?!0:(a=r["aria-hidden"])!=null?a:void 0,hidden:(s&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(s&4)===4&&(s&2)!==2&&{display:"none"}}};return wi()({ourProps:i,theirProps:r,slot:{},defaultTag:h$e,name:"Hidden"})}let hk=gr(g$e);function p$e(e){return typeof e!="object"||e===null?!1:"nodeType"in e}function Vc(e){return p$e(e)&&"tagName"in e}function ku(e){return Vc(e)&&"accessKey"in e}function Uc(e){return Vc(e)&&"tabIndex"in e}function x$e(e){return Vc(e)&&"style"in e}function y$e(e){return ku(e)&&e.nodeName==="IFRAME"}function b$e(e){return ku(e)&&e.nodeName==="INPUT"}let YX=Symbol();function v$e(e,t=!0){return Object.assign(e,{[YX]:t})}function Dl(...e){let t=h.useRef(e);h.useEffect(()=>{t.current=e},[e]);let a=Hn(s=>{for(let r of t.current)r!=null&&(typeof r=="function"?r(s):r.current=s)});return e.every(s=>s==null||s?.[YX])?void 0:a}let gD=h.createContext(null);gD.displayName="DescriptionContext";function QX(){let e=h.useContext(gD);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,QX),t}return e}function w$e(){let[e,t]=h.useState([]);return[e.length>0?e.join(" "):void 0,h.useMemo(()=>function(a){let s=Hn(i=>(t(l=>[...l,i]),()=>t(l=>{let o=l.slice(),c=o.indexOf(i);return c!==-1&&o.splice(c,1),o}))),r=h.useMemo(()=>({register:s,slot:a.slot,name:a.name,props:a.props,value:a.value}),[s,a.slot,a.name,a.props,a.value]);return pt.createElement(gD.Provider,{value:r},a.children)},[t])]}let N$e="p";function j$e(e,t){let a=h.useId(),s=o$e(),{id:r=`headlessui-description-${a}`,...i}=e,l=QX(),o=Dl(t);lr(()=>l.register(r),[r,l.register]);let c=t0({...l.slot,disabled:s||!1}),d={ref:o,...l.props,id:r};return wi()({ourProps:d,theirProps:i,slot:c,defaultTag:N$e,name:l.name||"Description"})}let C$e=gr(j$e),S$e=Object.assign(C$e,{});var KX=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(KX||{});let _$e=h.createContext(()=>{});function A$e({value:e,children:t}){return pt.createElement(_$e.Provider,{value:e},t)}let XX=class extends Map{constructor(t){super(),this.factory=t}get(t){let a=super.get(t);return a===void 0&&(a=this.factory(t),this.set(t,a)),a}};var E$e=Object.defineProperty,T$e=(e,t,a)=>t in e?E$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,k$e=(e,t,a)=>(T$e(e,t+"",a),a),ZX=(e,t,a)=>{if(!t.has(e))throw TypeError("Cannot "+a)},Xr=(e,t,a)=>(ZX(e,t,"read from private field"),a?a.call(e):t.get(e)),z_=(e,t,a)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,a)},u7=(e,t,a,s)=>(ZX(e,t,"write to private field"),t.set(e,a),a),al,Og,Mg;let L$e=class{constructor(t){z_(this,al,{}),z_(this,Og,new XX(()=>new Set)),z_(this,Mg,new Set),k$e(this,"disposables",Ko()),u7(this,al,t),vl.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return Xr(this,al)}subscribe(t,a){if(vl.isServer)return()=>{};let s={selector:t,callback:a,current:t(Xr(this,al))};return Xr(this,Mg).add(s),this.disposables.add(()=>{Xr(this,Mg).delete(s)})}on(t,a){return vl.isServer?()=>{}:(Xr(this,Og).get(t).add(a),this.disposables.add(()=>{Xr(this,Og).get(t).delete(a)}))}send(t){let a=this.reduce(Xr(this,al),t);if(a!==Xr(this,al)){u7(this,al,a);for(let s of Xr(this,Mg)){let r=s.selector(Xr(this,al));JX(s.current,r)||(s.current=r,s.callback(r))}for(let s of Xr(this,Og).get(t.type))s(Xr(this,al),t)}}};al=new WeakMap,Og=new WeakMap,Mg=new WeakMap;function JX(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:Array.isArray(e)&&Array.isArray(t)?e.length!==t.length?!1:F_(e[Symbol.iterator](),t[Symbol.iterator]()):e instanceof Map&&t instanceof Map||e instanceof Set&&t instanceof Set?e.size!==t.size?!1:F_(e.entries(),t.entries()):m7(e)&&m7(t)?F_(Object.entries(e)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()):!1}function F_(e,t){do{let a=e.next(),s=t.next();if(a.done&&s.done)return!0;if(a.done||s.done||!Object.is(a.value,s.value))return!1}while(!0)}function m7(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||Object.getPrototypeOf(t)===null}var P$e=Object.defineProperty,D$e=(e,t,a)=>t in e?P$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,f7=(e,t,a)=>(D$e(e,typeof t!="symbol"?t+"":t,a),a),O$e=(e=>(e[e.Push=0]="Push",e[e.Pop=1]="Pop",e))(O$e||{});let M$e={0(e,t){let a=t.id,s=e.stack,r=e.stack.indexOf(a);if(r!==-1){let i=e.stack.slice();return i.splice(r,1),i.push(a),s=i,{...e,stack:s}}return{...e,stack:[...e.stack,a]}},1(e,t){let a=t.id,s=e.stack.indexOf(a);if(s===-1)return e;let r=e.stack.slice();return r.splice(s,1),{...e,stack:r}}},I$e=class eZ extends L$e{constructor(){super(...arguments),f7(this,"actions",{push:t=>this.send({type:0,id:t}),pop:t=>this.send({type:1,id:t})}),f7(this,"selectors",{isTop:(t,a)=>t.stack[t.stack.length-1]===a,inStack:(t,a)=>t.stack.includes(a)})}static new(){return new eZ({stack:[]})}reduce(t,a){return Mo(a.type,M$e,t,a)}};const tZ=new XX(()=>I$e.new());function nZ(e,t,a=JX){return L3e.useSyncExternalStoreWithSelector(Hn(s=>e.subscribe($$e,s)),Hn(()=>e.state),Hn(()=>e.state),Hn(t),a)}function $$e(e){return e}function n0(e,t){let a=h.useId(),s=tZ.get(t),[r,i]=nZ(s,h.useCallback(l=>[s.selectors.isTop(l,a),s.selectors.inStack(l,a)],[s,a]));return lr(()=>{if(e)return s.actions.push(a),()=>s.actions.pop(a)},[s,e,a]),e?i?r:!0:!1}let gk=new Map,Yg=new Map;function h7(e){var t;let a=(t=Yg.get(e))!=null?t:0;return Yg.set(e,a+1),a!==0?()=>g7(e):(gk.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>g7(e))}function g7(e){var t;let a=(t=Yg.get(e))!=null?t:1;if(a===1?Yg.delete(e):Yg.set(e,a-1),a!==1)return;let s=gk.get(e);s&&(s["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",s["aria-hidden"]),e.inert=s.inert,gk.delete(e))}function R$e(e,{allowed:t,disallowed:a}={}){let s=n0(e,"inert-others");lr(()=>{var r,i;if(!s)return;let l=Ko();for(let c of(r=a?.())!=null?r:[])c&&l.add(h7(c));let o=(i=t?.())!=null?i:[];for(let c of o){if(!c)continue;let d=e0(c);if(!d)continue;let u=c.parentElement;for(;u&&u!==d.body;){for(let f of u.children)o.some(p=>f.contains(p))||l.add(h7(f));u=u.parentElement}}return l.dispose},[s,t,a])}function z$e(e,t,a){let s=Hu(r=>{let i=r.getBoundingClientRect();i.x===0&&i.y===0&&i.width===0&&i.height===0&&a()});h.useEffect(()=>{if(!e)return;let r=t===null?null:ku(t)?t:t.current;if(!r)return;let i=Ko();if(typeof ResizeObserver<"u"){let l=new ResizeObserver(()=>s.current(r));l.observe(r),i.add(()=>l.disconnect())}if(typeof IntersectionObserver<"u"){let l=new IntersectionObserver(()=>s.current(r));l.observe(r),i.add(()=>l.disconnect())}return()=>i.dispose()},[t,s,e])}let mw=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","details>summary","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),F$e=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var fo=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(fo||{}),pk=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(pk||{}),U$e=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(U$e||{});function B$e(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(mw)).sort((t,a)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(a.tabIndex||Number.MAX_SAFE_INTEGER)))}function H$e(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(F$e)).sort((t,a)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(a.tabIndex||Number.MAX_SAFE_INTEGER)))}var aZ=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(aZ||{});function G$e(e,t=0){var a;return e===((a=e0(e))==null?void 0:a.body)?!1:Mo(t,{0(){return e.matches(mw)},1(){let s=e;for(;s!==null;){if(s.matches(mw))return!0;s=s.parentElement}return!1}})}var W$e=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(W$e||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function vo(e){e?.focus({preventScroll:!0})}let V$e=["textarea","input"].join(",");function q$e(e){var t,a;return(a=(t=e?.matches)==null?void 0:t.call(e,V$e))!=null?a:!1}function Y$e(e,t=a=>a){return e.slice().sort((a,s)=>{let r=t(a),i=t(s);if(r===null||i===null)return 0;let l=r.compareDocumentPosition(i);return l&Node.DOCUMENT_POSITION_FOLLOWING?-1:l&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Qg(e,t,{sorted:a=!0,relativeTo:s=null,skipElements:r=[]}={}){let i=Array.isArray(e)?e.length>0?mk(e[0]):document:mk(e),l=Array.isArray(e)?a?Y$e(e):e:t&64?H$e(e):B$e(e);r.length>0&&l.length>1&&(l=l.filter(x=>!r.some(y=>y!=null&&"current"in y?y?.current===x:y===x))),s=s??i?.activeElement;let o=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,l.indexOf(s))-1;if(t&4)return Math.max(0,l.indexOf(s))+1;if(t&8)return l.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=t&32?{preventScroll:!0}:{},u=0,f=l.length,p;do{if(u>=f||u+f<=0)return 0;let x=c+u;if(t&16)x=(x+f)%f;else{if(x<0)return 3;if(x>=f)return 1}p=l[x],p?.focus(d),u+=o}while(p!==VX(p));return t&6&&q$e(p)&&p.select(),2}function sZ(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function Q$e(){return/Android/gi.test(window.navigator.userAgent)}function p7(){return sZ()||Q$e()}function eb(e,t,a,s){let r=Hu(a);h.useEffect(()=>{if(!e)return;function i(l){r.current(l)}return document.addEventListener(t,i,s),()=>document.removeEventListener(t,i,s)},[e,t,s])}function rZ(e,t,a,s){let r=Hu(a);h.useEffect(()=>{if(!e)return;function i(l){r.current(l)}return window.addEventListener(t,i,s),()=>window.removeEventListener(t,i,s)},[e,t,s])}const x7=30;function K$e(e,t,a){let s=Hu(a),r=h.useCallback(function(o,c){if(o.defaultPrevented)return;let d=c(o);if(d===null||!d.getRootNode().contains(d)||!d.isConnected)return;let u=(function f(p){return typeof p=="function"?f(p()):Array.isArray(p)||p instanceof Set?p:[p]})(t);for(let f of u)if(f!==null&&(f.contains(d)||o.composed&&o.composedPath().includes(f)))return;return!G$e(d,aZ.Loose)&&d.tabIndex!==-1&&o.preventDefault(),s.current(o,d)},[s,t]),i=h.useRef(null);eb(e,"pointerdown",o=>{var c,d;p7()||(i.current=((d=(c=o.composedPath)==null?void 0:c.call(o))==null?void 0:d[0])||o.target)},!0),eb(e,"pointerup",o=>{if(p7()||!i.current)return;let c=i.current;return i.current=null,r(o,()=>c)},!0);let l=h.useRef({x:0,y:0});eb(e,"touchstart",o=>{l.current.x=o.touches[0].clientX,l.current.y=o.touches[0].clientY},!0),eb(e,"touchend",o=>{let c={x:o.changedTouches[0].clientX,y:o.changedTouches[0].clientY};if(!(Math.abs(c.x-l.current.x)>=x7||Math.abs(c.y-l.current.y)>=x7))return r(o,()=>Uc(o.target)?o.target:null)},!0),rZ(e,"blur",o=>r(o,()=>y$e(window.document.activeElement)?window.document.activeElement:null),!0)}function pD(...e){return h.useMemo(()=>e0(...e),[...e])}function iZ(e,t,a,s){let r=Hu(a);h.useEffect(()=>{e=e??window;function i(l){r.current(l)}return e.addEventListener(t,i,s),()=>e.removeEventListener(t,i,s)},[e,t,s])}function X$e(e){return h.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}function Z$e(e,t){let a=e(),s=new Set;return{getSnapshot(){return a},subscribe(r){return s.add(r),()=>s.delete(r)},dispatch(r,...i){let l=t[r].call(a,...i);l&&(a=l,s.forEach(o=>o()))}}}function J$e(){let e;return{before({doc:t}){var a;let s=t.documentElement,r=(a=t.defaultView)!=null?a:window;e=Math.max(0,r.innerWidth-s.clientWidth)},after({doc:t,d:a}){let s=t.documentElement,r=Math.max(0,s.clientWidth-s.offsetWidth),i=Math.max(0,e-r);a.style(s,"paddingRight",`${i}px`)}}}function e6e(){return sZ()?{before({doc:e,d:t,meta:a}){function s(r){for(let i of a().containers)for(let l of i())if(l.contains(r))return!0;return!1}t.microTask(()=>{var r;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let o=Ko();o.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>o.dispose()))}let i=(r=window.scrollY)!=null?r:window.pageYOffset,l=null;t.addEventListener(e,"click",o=>{if(Uc(o.target))try{let c=o.target.closest("a");if(!c)return;let{hash:d}=new URL(c.href),u=e.querySelector(d);Uc(u)&&!s(u)&&(l=u)}catch{}},!0),t.group(o=>{t.addEventListener(e,"touchstart",c=>{if(o.dispose(),Uc(c.target)&&x$e(c.target))if(s(c.target)){let d=c.target;for(;d.parentElement&&s(d.parentElement);)d=d.parentElement;o.style(d,"overscrollBehavior","contain")}else o.style(c.target,"touchAction","none")})}),t.addEventListener(e,"touchmove",o=>{if(Uc(o.target)){if(b$e(o.target))return;if(s(o.target)){let c=o.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&o.preventDefault()}else o.preventDefault()}},{passive:!1}),t.add(()=>{var o;let c=(o=window.scrollY)!=null?o:window.pageYOffset;i!==c&&window.scrollTo(0,i),l&&l.isConnected&&(l.scrollIntoView({block:"nearest"}),l=null)})})}}:{}}function t6e(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function y7(e){let t={};for(let a of e)Object.assign(t,a(t));return t}let Jd=Z$e(()=>new Map,{PUSH(e,t){var a;let s=(a=this.get(e))!=null?a:{doc:e,count:0,d:Ko(),meta:new Set,computedMeta:{}};return s.count++,s.meta.add(t),s.computedMeta=y7(s.meta),this.set(e,s),this},POP(e,t){let a=this.get(e);return a&&(a.count--,a.meta.delete(t),a.computedMeta=y7(a.meta)),this},SCROLL_PREVENT(e){let t={doc:e.doc,d:e.d,meta(){return e.computedMeta}},a=[e6e(),J$e(),t6e()];a.forEach(({before:s})=>s?.(t)),a.forEach(({after:s})=>s?.(t))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});Jd.subscribe(()=>{let e=Jd.getSnapshot(),t=new Map;for(let[a]of e)t.set(a,a.documentElement.style.overflow);for(let a of e.values()){let s=t.get(a.doc)==="hidden",r=a.count!==0;(r&&!s||!r&&s)&&Jd.dispatch(a.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",a),a.count===0&&Jd.dispatch("TEARDOWN",a)}});function n6e(e,t,a=()=>({containers:[]})){let s=X$e(Jd),r=t?s.get(t):void 0,i=r?r.count>0:!1;return lr(()=>{if(!(!t||!e))return Jd.dispatch("PUSH",t,a),()=>Jd.dispatch("POP",t,a)},[e,t]),i}function a6e(e,t,a=()=>[document.body]){let s=n0(e,"scroll-lock");n6e(s,t,r=>{var i;return{containers:[...(i=r.containers)!=null?i:[],a]}})}function s6e(e=0){let[t,a]=h.useState(e),s=h.useCallback(c=>a(c),[]),r=h.useCallback(c=>a(d=>d|c),[]),i=h.useCallback(c=>(t&c)===c,[t]),l=h.useCallback(c=>a(d=>d&~c),[]),o=h.useCallback(c=>a(d=>d^c),[]);return{flags:t,setFlag:s,addFlag:r,hasFlag:i,removeFlag:l,toggleFlag:o}}var r6e={},b7,v7;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((b7=process==null?void 0:r6e)==null?void 0:b7.NODE_ENV)==="test"&&typeof((v7=Element?.prototype)==null?void 0:v7.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var i6e=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(i6e||{});function l6e(e){let t={};for(let a in e)e[a]===!0&&(t[`data-${a}`]="");return t}function o6e(e,t,a,s){let[r,i]=h.useState(a),{hasFlag:l,addFlag:o,removeFlag:c}=s6e(e&&r?3:0),d=h.useRef(!1),u=h.useRef(!1),f=Ij();return lr(()=>{var p;if(e){if(a&&i(!0),!t){a&&o(3);return}return(p=s?.start)==null||p.call(s,a),c6e(t,{inFlight:d,prepare(){u.current?u.current=!1:u.current=d.current,d.current=!0,!u.current&&(a?(o(3),c(4)):(o(4),c(2)))},run(){u.current?a?(c(3),o(4)):(c(4),o(3)):a?c(1):o(1)},done(){var x;u.current&&m6e(t)||(d.current=!1,c(7),a||i(!1),(x=s?.end)==null||x.call(s,a))}})}},[e,a,t,f]),e?[r,{closed:l(1),enter:l(2),leave:l(4),transition:l(2)||l(4)}]:[a,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function c6e(e,{prepare:t,run:a,done:s,inFlight:r}){let i=Ko();return u6e(e,{prepare:t,inFlight:r}),i.nextFrame(()=>{a(),i.requestAnimationFrame(()=>{i.add(d6e(e,s))})}),i.dispose}function d6e(e,t){var a,s;let r=Ko();if(!e)return r.dispose;let i=!1;r.add(()=>{i=!0});let l=(s=(a=e.getAnimations)==null?void 0:a.call(e).filter(o=>o instanceof CSSTransition))!=null?s:[];return l.length===0?(t(),r.dispose):(Promise.allSettled(l.map(o=>o.finished)).then(()=>{i||t()}),r.dispose)}function u6e(e,{inFlight:t,prepare:a}){if(t!=null&&t.current){a();return}let s=e.style.transition;e.style.transition="none",a(),e.offsetHeight,e.style.transition=s}function m6e(e){var t,a;return((a=(t=e.getAnimations)==null?void 0:t.call(e))!=null?a:[]).some(s=>s instanceof CSSTransition&&s.playState!=="finished")}function xD(e,t){let a=h.useRef([]),s=Hn(e);h.useEffect(()=>{let r=[...a.current];for(let[i,l]of t.entries())if(a.current[i]!==l){let o=s(t,r);return a.current=t,o}},[s,...t])}let $j=h.createContext(null);$j.displayName="OpenClosedContext";var Ii=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(Ii||{});function Rj(){return h.useContext($j)}function f6e({value:e,children:t}){return pt.createElement($j.Provider,{value:e},t)}function h6e({children:e}){return pt.createElement($j.Provider,{value:null},e)}function g6e(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Mc=[];g6e(()=>{function e(t){if(!Uc(t.target)||t.target===document.body||Mc[0]===t.target)return;let a=t.target;a=a.closest(mw),Mc.unshift(a??t.target),Mc=Mc.filter(s=>s!=null&&s.isConnected),Mc.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function lZ(e){let t=Hn(e),a=h.useRef(!1);h.useEffect(()=>(a.current=!1,()=>{a.current=!0,Mj(()=>{a.current&&t()})}),[t])}let oZ=h.createContext(!1);function p6e(){return h.useContext(oZ)}function w7(e){return pt.createElement(oZ.Provider,{value:e.force},e.children)}function x6e(e){let t=p6e(),a=h.useContext(dZ),[s,r]=h.useState(()=>{var i;if(!t&&a!==null)return(i=a.current)!=null?i:null;if(vl.isServer)return null;let l=e?.getElementById("headlessui-portal-root");if(l)return l;if(e===null)return null;let o=e.createElement("div");return o.setAttribute("id","headlessui-portal-root"),e.body.appendChild(o)});return h.useEffect(()=>{s!==null&&(e!=null&&e.body.contains(s)||e==null||e.body.appendChild(s))},[s,e]),h.useEffect(()=>{t||a!==null&&r(a.current)},[a,r,t]),s}let cZ=h.Fragment,y6e=gr(function(e,t){let{ownerDocument:a=null,...s}=e,r=h.useRef(null),i=Dl(v$e(p=>{r.current=p}),t),l=pD(r.current),o=a??l,c=x6e(o),d=h.useContext(xk),u=Ij(),f=wi();return lZ(()=>{var p;c&&c.childNodes.length<=0&&((p=c.parentElement)==null||p.removeChild(c))}),c?Mi.createPortal(pt.createElement("div",{"data-headlessui-portal":"",ref:p=>{u.dispose(),d&&p&&u.add(d.register(p))}},f({ourProps:{ref:i},theirProps:s,slot:{},defaultTag:cZ,name:"Portal"})),c):null});function b6e(e,t){let a=Dl(t),{enabled:s=!0,ownerDocument:r,...i}=e,l=wi();return s?pt.createElement(y6e,{...i,ownerDocument:r,ref:a}):l({ourProps:{ref:a},theirProps:i,slot:{},defaultTag:cZ,name:"Portal"})}let v6e=h.Fragment,dZ=h.createContext(null);function w6e(e,t){let{target:a,...s}=e,r={ref:Dl(t)},i=wi();return pt.createElement(dZ.Provider,{value:a},i({ourProps:r,theirProps:s,defaultTag:v6e,name:"Popover.Group"}))}let xk=h.createContext(null);function N6e(){let e=h.useContext(xk),t=h.useRef([]),a=Hn(i=>(t.current.push(i),e&&e.register(i),()=>s(i))),s=Hn(i=>{let l=t.current.indexOf(i);l!==-1&&t.current.splice(l,1),e&&e.unregister(i)}),r=h.useMemo(()=>({register:a,unregister:s,portals:t}),[a,s,t]);return[t,h.useMemo(()=>function({children:i}){return pt.createElement(xk.Provider,{value:r},i)},[r])]}let j6e=gr(b6e),uZ=gr(w6e),C6e=Object.assign(j6e,{Group:uZ});function S6e(e,t=typeof document<"u"?document.defaultView:null,a){let s=n0(e,"escape");iZ(t,"keydown",r=>{s&&(r.defaultPrevented||r.key===KX.Escape&&a(r))})}function _6e(){var e;let[t]=h.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[a,s]=h.useState((e=t?.matches)!=null?e:!1);return lr(()=>{if(!t)return;function r(i){s(i.matches)}return t.addEventListener("change",r),()=>t.removeEventListener("change",r)},[t]),a}function A6e({defaultContainers:e=[],portals:t,mainTreeNode:a}={}){let s=Hn(()=>{var r,i;let l=e0(a),o=[];for(let c of e)c!==null&&(Vc(c)?o.push(c):"current"in c&&Vc(c.current)&&o.push(c.current));if(t!=null&&t.current)for(let c of t.current)o.push(c);for(let c of(r=l?.querySelectorAll("html > *, body > *"))!=null?r:[])c!==document.body&&c!==document.head&&Vc(c)&&c.id!=="headlessui-portal-root"&&(a&&(c.contains(a)||c.contains((i=a?.getRootNode())==null?void 0:i.host))||o.some(d=>c.contains(d))||o.push(c));return o});return{resolveContainers:s,contains:Hn(r=>s().some(i=>i.contains(r)))}}let mZ=h.createContext(null);function N7({children:e,node:t}){let[a,s]=h.useState(null),r=fZ(t??a);return pt.createElement(mZ.Provider,{value:r},e,r===null&&pt.createElement(hk,{features:uw.Hidden,ref:i=>{var l,o;if(i){for(let c of(o=(l=e0(i))==null?void 0:l.querySelectorAll("html > *, body > *"))!=null?o:[])if(c!==document.body&&c!==document.head&&Vc(c)&&c!=null&&c.contains(i)){s(c);break}}}}))}function fZ(e=null){var t;return(t=h.useContext(mZ))!=null?t:e}function E6e(){let e=typeof document>"u";return"useSyncExternalStore"in uu?(t=>t.useSyncExternalStore)(uu)(()=>()=>{},()=>!1,()=>!e):!1}function zj(){let e=E6e(),[t,a]=h.useState(vl.isHandoffComplete);return t&&vl.isHandoffComplete===!1&&a(!1),h.useEffect(()=>{t!==!0&&a(!0)},[t]),h.useEffect(()=>vl.handoff(),[]),e?!1:t}function yD(){let e=h.useRef(!1);return lr(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var Ig=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Ig||{});function T6e(){let e=h.useRef(0);return rZ(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function hZ(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let a of e.current)Vc(a.current)&&t.add(a.current);return t}let k6e="div";var Gd=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(Gd||{});function L6e(e,t){let a=h.useRef(null),s=Dl(a,t),{initialFocus:r,initialFocusFallback:i,containers:l,features:o=15,...c}=e;zj()||(o=0);let d=pD(a.current);M6e(o,{ownerDocument:d});let u=I6e(o,{ownerDocument:d,container:a,initialFocus:r,initialFocusFallback:i});$6e(o,{ownerDocument:d,container:a,containers:l,previousActiveElement:u});let f=T6e(),p=Hn(N=>{if(!ku(a.current))return;let S=a.current;(T=>T())(()=>{Mo(f.current,{[Ig.Forwards]:()=>{Qg(S,fo.First,{skipElements:[N.relatedTarget,i]})},[Ig.Backwards]:()=>{Qg(S,fo.Last,{skipElements:[N.relatedTarget,i]})}})})}),x=n0(!!(o&2),"focus-trap#tab-lock"),y=Ij(),w=h.useRef(!1),v={ref:s,onKeyDown(N){N.key=="Tab"&&(w.current=!0,y.requestAnimationFrame(()=>{w.current=!1}))},onBlur(N){if(!(o&4))return;let S=hZ(l);ku(a.current)&&S.add(a.current);let T=N.relatedTarget;Uc(T)&&T.dataset.headlessuiFocusGuard!=="true"&&(gZ(S,T)||(w.current?Qg(a.current,Mo(f.current,{[Ig.Forwards]:()=>fo.Next,[Ig.Backwards]:()=>fo.Previous})|fo.WrapAround,{relativeTo:N.target}):Uc(N.target)&&vo(N.target)))}},C=wi();return pt.createElement(pt.Fragment,null,x&&pt.createElement(hk,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:uw.Focusable}),C({ourProps:v,theirProps:c,defaultTag:k6e,name:"FocusTrap"}),x&&pt.createElement(hk,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:uw.Focusable}))}let P6e=gr(L6e),D6e=Object.assign(P6e,{features:Gd});function O6e(e=!0){let t=h.useRef(Mc.slice());return xD(([a],[s])=>{s===!0&&a===!1&&Mj(()=>{t.current.splice(0)}),s===!1&&a===!0&&(t.current=Mc.slice())},[e,Mc,t]),Hn(()=>{var a;return(a=t.current.find(s=>s!=null&&s.isConnected))!=null?a:null})}function M6e(e,{ownerDocument:t}){let a=!!(e&8),s=O6e(a);xD(()=>{a||i$e(t?.body)&&vo(s())},[a]),lZ(()=>{a&&vo(s())})}function I6e(e,{ownerDocument:t,container:a,initialFocus:s,initialFocusFallback:r}){let i=h.useRef(null),l=n0(!!(e&1),"focus-trap#initial-focus"),o=yD();return xD(()=>{if(e===0)return;if(!l){r!=null&&r.current&&vo(r.current);return}let c=a.current;c&&Mj(()=>{if(!o.current)return;let d=t?.activeElement;if(s!=null&&s.current){if(s?.current===d){i.current=d;return}}else if(c.contains(d)){i.current=d;return}if(s!=null&&s.current)vo(s.current);else{if(e&16){if(Qg(c,fo.First|fo.AutoFocus)!==pk.Error)return}else if(Qg(c,fo.First)!==pk.Error)return;if(r!=null&&r.current&&(vo(r.current),t?.activeElement===r.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}i.current=t?.activeElement})},[r,l,e]),i}function $6e(e,{ownerDocument:t,container:a,containers:s,previousActiveElement:r}){let i=yD(),l=!!(e&4);iZ(t?.defaultView,"focus",o=>{if(!l||!i.current)return;let c=hZ(s);ku(a.current)&&c.add(a.current);let d=r.current;if(!d)return;let u=o.target;ku(u)?gZ(c,u)?(r.current=u,vo(u)):(o.preventDefault(),o.stopPropagation(),vo(d)):vo(r.current)},!0)}function gZ(e,t){for(let a of e)if(a.contains(t))return!0;return!1}function pZ(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||!qg((t=e.as)!=null?t:yZ)||pt.Children.count(e.children)===1}let Fj=h.createContext(null);Fj.displayName="TransitionContext";var R6e=(e=>(e.Visible="visible",e.Hidden="hidden",e))(R6e||{});function z6e(){let e=h.useContext(Fj);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function F6e(){let e=h.useContext(Uj);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let Uj=h.createContext(null);Uj.displayName="NestingContext";function Bj(e){return"children"in e?Bj(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function xZ(e,t){let a=Hu(e),s=h.useRef([]),r=yD(),i=Ij(),l=Hn((x,y=Fc.Hidden)=>{let w=s.current.findIndex(({el:v})=>v===x);w!==-1&&(Mo(y,{[Fc.Unmount](){s.current.splice(w,1)},[Fc.Hidden](){s.current[w].state="hidden"}}),i.microTask(()=>{var v;!Bj(s)&&r.current&&((v=a.current)==null||v.call(a))}))}),o=Hn(x=>{let y=s.current.find(({el:w})=>w===x);return y?y.state!=="visible"&&(y.state="visible"):s.current.push({el:x,state:"visible"}),()=>l(x,Fc.Unmount)}),c=h.useRef([]),d=h.useRef(Promise.resolve()),u=h.useRef({enter:[],leave:[]}),f=Hn((x,y,w)=>{c.current.splice(0),t&&(t.chains.current[y]=t.chains.current[y].filter(([v])=>v!==x)),t?.chains.current[y].push([x,new Promise(v=>{c.current.push(v)})]),t?.chains.current[y].push([x,new Promise(v=>{Promise.all(u.current[y].map(([C,N])=>N)).then(()=>v())})]),y==="enter"?d.current=d.current.then(()=>t?.wait.current).then(()=>w(y)):w(y)}),p=Hn((x,y,w)=>{Promise.all(u.current[y].splice(0).map(([v,C])=>C)).then(()=>{var v;(v=c.current.shift())==null||v()}).then(()=>w(y))});return h.useMemo(()=>({children:s,register:o,unregister:l,onStart:f,onStop:p,wait:d,chains:u}),[o,l,s,f,p,u,d])}let yZ=h.Fragment,bZ=dw.RenderStrategy;function U6e(e,t){var a,s;let{transition:r=!0,beforeEnter:i,afterEnter:l,beforeLeave:o,afterLeave:c,enter:d,enterFrom:u,enterTo:f,entered:p,leave:x,leaveFrom:y,leaveTo:w,...v}=e,[C,N]=h.useState(null),S=h.useRef(null),T=pZ(e),k=Dl(...T?[S,t,N]:t===null?[]:[t]),_=(a=v.unmount)==null||a?Fc.Unmount:Fc.Hidden,{show:E,appear:A,initial:I}=z6e(),[z,F]=h.useState(E?"visible":"hidden"),D=F6e(),{register:M,unregister:W}=D;lr(()=>M(S),[M,S]),lr(()=>{if(_===Fc.Hidden&&S.current){if(E&&z!=="visible"){F("visible");return}return Mo(z,{hidden:()=>W(S),visible:()=>M(S)})}},[z,S,M,W,E,_]);let Z=zj();lr(()=>{if(T&&Z&&z==="visible"&&S.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[S,z,Z,T]);let R=I&&!A,Q=A&&E&&I,Y=h.useRef(!1),oe=xZ(()=>{Y.current||(F("hidden"),W(S))},D),re=Hn(Oe=>{Y.current=!0;let $e=Oe?"enter":"leave";oe.onStart(S,$e,pe=>{pe==="enter"?i?.():pe==="leave"&&o?.()})}),ee=Hn(Oe=>{let $e=Oe?"enter":"leave";Y.current=!1,oe.onStop(S,$e,pe=>{pe==="enter"?l?.():pe==="leave"&&c?.()}),$e==="leave"&&!Bj(oe)&&(F("hidden"),W(S))});h.useEffect(()=>{T&&r||(re(E),ee(E))},[E,T,r]);let H=!(!r||!T||!Z||R),[,ye]=o6e(H,C,E,{start:re,end:ee}),te=Fd({ref:k,className:((s=fk(v.className,Q&&d,Q&&u,ye.enter&&d,ye.enter&&ye.closed&&u,ye.enter&&!ye.closed&&f,ye.leave&&x,ye.leave&&!ye.closed&&y,ye.leave&&ye.closed&&w,!ye.transition&&E&&p))==null?void 0:s.trim())||void 0,...l6e(ye)}),ve=0;z==="visible"&&(ve|=Ii.Open),z==="hidden"&&(ve|=Ii.Closed),E&&z==="hidden"&&(ve|=Ii.Opening),!E&&z==="visible"&&(ve|=Ii.Closing);let je=wi();return pt.createElement(Uj.Provider,{value:oe},pt.createElement(f6e,{value:ve},je({ourProps:te,theirProps:v,defaultTag:yZ,features:bZ,visible:z==="visible",name:"Transition.Child"})))}function B6e(e,t){let{show:a,appear:s=!1,unmount:r=!0,...i}=e,l=h.useRef(null),o=pZ(e),c=Dl(...o?[l,t]:t===null?[]:[t]);zj();let d=Rj();if(a===void 0&&d!==null&&(a=(d&Ii.Open)===Ii.Open),a===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[u,f]=h.useState(a?"visible":"hidden"),p=xZ(()=>{a||f("hidden")}),[x,y]=h.useState(!0),w=h.useRef([a]);lr(()=>{x!==!1&&w.current[w.current.length-1]!==a&&(w.current.push(a),y(!1))},[w,a]);let v=h.useMemo(()=>({show:a,appear:s,initial:x}),[a,s,x]);lr(()=>{a?f("visible"):!Bj(p)&&l.current!==null&&f("hidden")},[a,p]);let C={unmount:r},N=Hn(()=>{var k;x&&y(!1),(k=e.beforeEnter)==null||k.call(e)}),S=Hn(()=>{var k;x&&y(!1),(k=e.beforeLeave)==null||k.call(e)}),T=wi();return pt.createElement(Uj.Provider,{value:p},pt.createElement(Fj.Provider,{value:v},T({ourProps:{...C,as:h.Fragment,children:pt.createElement(vZ,{ref:c,...C,...i,beforeEnter:N,beforeLeave:S})},theirProps:{},defaultTag:h.Fragment,features:bZ,visible:u==="visible",name:"Transition"})))}function H6e(e,t){let a=h.useContext(Fj)!==null,s=Rj()!==null;return pt.createElement(pt.Fragment,null,!a&&s?pt.createElement(yk,{ref:t,...e}):pt.createElement(vZ,{ref:t,...e}))}let yk=gr(B6e),vZ=gr(U6e),bD=gr(H6e),Vb=Object.assign(yk,{Child:bD,Root:yk});var G6e=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(G6e||{}),W6e=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(W6e||{});let V6e={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},vD=h.createContext(null);vD.displayName="DialogContext";function Hj(e){let t=h.useContext(vD);if(t===null){let a=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,Hj),a}return t}function q6e(e,t){return Mo(t.type,V6e,e,t)}let j7=gr(function(e,t){let a=h.useId(),{id:s=`headlessui-dialog-${a}`,open:r,onClose:i,initialFocus:l,role:o="dialog",autoFocus:c=!0,__demoMode:d=!1,unmount:u=!1,...f}=e,p=h.useRef(!1);o=(function(){return o==="dialog"||o==="alertdialog"?o:(p.current||(p.current=!0,console.warn(`Invalid role [${o}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")})();let x=Rj();r===void 0&&x!==null&&(r=(x&Ii.Open)===Ii.Open);let y=h.useRef(null),w=Dl(y,t),v=pD(y.current),C=r?0:1,[N,S]=h.useReducer(q6e,{titleId:null,descriptionId:null,panelRef:h.createRef()}),T=Hn(()=>i(!1)),k=Hn(ye=>S({type:0,id:ye})),_=zj()?C===0:!1,[E,A]=N6e(),I={get current(){var ye;return(ye=N.panelRef.current)!=null?ye:y.current}},z=fZ(),{resolveContainers:F}=A6e({mainTreeNode:z,portals:E,defaultContainers:[I]}),D=x!==null?(x&Ii.Closing)===Ii.Closing:!1;R$e(d||D?!1:_,{allowed:Hn(()=>{var ye,te;return[(te=(ye=y.current)==null?void 0:ye.closest("[data-headlessui-portal]"))!=null?te:null]}),disallowed:Hn(()=>{var ye;return[(ye=z?.closest("body > *:not(#headlessui-portal-root)"))!=null?ye:null]})});let M=tZ.get(null);lr(()=>{if(_)return M.actions.push(s),()=>M.actions.pop(s)},[M,s,_]);let W=nZ(M,h.useCallback(ye=>M.selectors.isTop(ye,s),[M,s]));K$e(W,F,ye=>{ye.preventDefault(),T()}),S6e(W,v?.defaultView,ye=>{ye.preventDefault(),ye.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),T()}),a6e(d||D?!1:_,v,F),z$e(_,y,T);let[Z,R]=w$e(),Q=h.useMemo(()=>[{dialogState:C,close:T,setTitleId:k,unmount:u},N],[C,T,k,u,N]),Y=t0({open:C===0}),oe={ref:w,id:s,role:o,tabIndex:-1,"aria-modal":d?void 0:C===0?!0:void 0,"aria-labelledby":N.titleId,"aria-describedby":Z,unmount:u},re=!_6e(),ee=Gd.None;_&&!d&&(ee|=Gd.RestoreFocus,ee|=Gd.TabLock,c&&(ee|=Gd.AutoFocus),re&&(ee|=Gd.InitialFocus));let H=wi();return pt.createElement(h6e,null,pt.createElement(w7,{force:!0},pt.createElement(C6e,null,pt.createElement(vD.Provider,{value:Q},pt.createElement(uZ,{target:y},pt.createElement(w7,{force:!1},pt.createElement(R,{slot:Y},pt.createElement(A,null,pt.createElement(D6e,{initialFocus:l,initialFocusFallback:y,containers:F,features:ee},pt.createElement(A$e,{value:T},H({ourProps:oe,theirProps:f,slot:Y,defaultTag:Y6e,features:Q6e,visible:C===0,name:"Dialog"})))))))))))}),Y6e="div",Q6e=dw.RenderStrategy|dw.Static;function K6e(e,t){let{transition:a=!1,open:s,...r}=e,i=Rj(),l=e.hasOwnProperty("open")||i!==null,o=e.hasOwnProperty("onClose");if(!l&&!o)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!l)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!o)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!i&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(s!==void 0||a)&&!r.static?pt.createElement(N7,null,pt.createElement(Vb,{show:s,transition:a,unmount:r.unmount},pt.createElement(j7,{ref:t,...r}))):pt.createElement(N7,null,pt.createElement(j7,{ref:t,open:s,...r}))}let X6e="div";function Z6e(e,t){let a=h.useId(),{id:s=`headlessui-dialog-panel-${a}`,transition:r=!1,...i}=e,[{dialogState:l,unmount:o},c]=Hj("Dialog.Panel"),d=Dl(t,c.panelRef),u=t0({open:l===0}),f=Hn(v=>{v.stopPropagation()}),p={ref:d,id:s,onClick:f},x=r?bD:h.Fragment,y=r?{unmount:o}:{},w=wi();return pt.createElement(x,{...y},w({ourProps:p,theirProps:i,slot:u,defaultTag:X6e,name:"Dialog.Panel"}))}let J6e="div";function eRe(e,t){let{transition:a=!1,...s}=e,[{dialogState:r,unmount:i}]=Hj("Dialog.Backdrop"),l=t0({open:r===0}),o={ref:t,"aria-hidden":!0},c=a?bD:h.Fragment,d=a?{unmount:i}:{},u=wi();return pt.createElement(c,{...d},u({ourProps:o,theirProps:s,slot:l,defaultTag:J6e,name:"Dialog.Backdrop"}))}let tRe="h2";function nRe(e,t){let a=h.useId(),{id:s=`headlessui-dialog-title-${a}`,...r}=e,[{dialogState:i,setTitleId:l}]=Hj("Dialog.Title"),o=Dl(t);h.useEffect(()=>(l(s),()=>l(null)),[s,l]);let c=t0({open:i===0}),d={ref:o,id:s};return wi()({ourProps:d,theirProps:r,slot:c,defaultTag:tRe,name:"Dialog.Title"})}let aRe=gr(K6e),sRe=gr(Z6e);gr(eRe);let rRe=gr(nRe),C7=Object.assign(aRe,{Panel:sRe,Title:rRe,Description:S$e});function a0({isOpen:e,onClose:t,onSave:a,onEdit:s,setFormData:r,formData:i,isEditing:l=!1,viewMode:o=!1,users:c=[],currentUser:d,onDelete:u}){const[f,p]=h.useState([]),[x,y]=h.useState([]),[w,v]=h.useState({}),C=E=>{if(!E)return"";const A=String(E).split("-");return A.length===3?`${A[0]}-${A[2]}`:String(E)},N=E=>{const{name:A,value:I}=E.target;A==="subject"&&I.trim()&&v(z=>({...z,subject:!1})),r(z=>{const F={...z,[A]:I};return A==="relatedType1"&&(F.relatedTo1="",I==="Lead"?(F.relatedType2=null,F.relatedTo2=null,y([])):I==="Account"&&(F.relatedType2="Contact")),A==="relatedType2"&&(F.relatedTo2=""),F})};h.useEffect(()=>{if(!e)return;(async()=>{try{p([]);let A;i.relatedType1==="Lead"?A=await ce.get("/leads/admin/getLeads"):i.relatedType1==="Account"&&(A=await ce.get("/accounts/admin/fetch-all"));let I=[];if(A&&Array.isArray(A.data)&&(I=A.data),l&&i.relatedTo1)try{let z;i.relatedType1==="Lead"?z=await ce.get(`/leads/get/${i.relatedTo1}`):i.relatedType1==="Account"&&(z=await ce.get(`/accounts/get/${i.relatedTo1}`)),z&&z.data&&(I.some(D=>String(D.id)===String(i.relatedTo1))||(I=[z.data,...I]))}catch(z){console.error("Error fetching specific related item:",z)}p(I)}catch(A){console.error("Error fetching related 1 data:",A),p([])}})()},[i.relatedType1,e,l,i.relatedTo1]),h.useEffect(()=>{if(!e||o)return;(async()=>{try{if(y([]),i.relatedType1==="Account"&&i.relatedTo1){let A;i.relatedType2==="Contact"?A=await ce.get(`/contacts/from-acc/${i.relatedTo1}`):i.relatedType2==="Deal"?A=await ce.get(`/deals/from-acc/${i.relatedTo1}`):i.relatedType2==="Quote"&&(A=await ce.get(`/quotes/from-acc/${i.relatedTo1}`));let I=[];if(A&&Array.isArray(A.data)&&(I=A.data),l&&i.relatedTo2)try{let z;i.relatedType2==="Contact"?z=await ce.get(`/contacts/get/${i.relatedTo2}`):i.relatedType2==="Deal"?z=await ce.get(`/deals/get/${i.relatedTo2}`):i.relatedType2==="Quote"&&(z=await ce.get(`/quotes/get/${i.relatedTo2}`)),z&&z.data&&(I.some(D=>String(D.id)===String(i.relatedTo2))||(I=[z.data,...I]))}catch(z){console.error("Error fetching specific related item:",z)}y(I)}}catch(A){console.error("Error fetching related 2 data:",A),y([])}})()},[i.relatedType1,i.relatedTo1,i.relatedType2,i.relatedTo2,e,o,l]);const[S,T]=h.useState(!1);h.useEffect(()=>{e&&(T(!1),v({}))},[e]);const k=E=>{E.preventDefault(),T(!0);const A={};i.subject?.trim()||(A.subject=!0,q.error("Title is required")),v(A),i.relatedTo1||(A.relatedTo1=!0,q.error(`Please select a ${i.relatedType1||"Lead/Account"}.`)),i.assignedTo||(A.assignedTo=!0,q.error("Assigned To is required.")),!(Object.keys(A).length>0)&&a?.(i)},_=o?"Task Details":l?"Edit Task":"Create Task";return n.jsx(Vb,{appear:!0,show:e,as:h.Fragment,children:n.jsxs(C7,{as:"div",className:"relative z-50",onClose:t,children:[n.jsx(Vb.Child,{as:h.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:n.jsx("div",{className:"fixed inset-0 bg-black/40"})}),n.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 overflow-y-auto",children:n.jsx("div",{className:"flex min-h-full items-center justify-center text-center",children:n.jsx(Vb.Child,{as:h.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:n.jsx(C7.Panel,{className:"w-full max-w-full sm:max-w-3xl text-left align-middle transform transition-all",children:n.jsxs("div",{className:"bg-white w-full min-w-sm md:min-w-lg rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] flex flex-col hide-scrollbar",children:[n.jsx("button",{onClick:()=>{t(),T(!1),v({})},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Vn,{size:25})}),n.jsx("h3",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:_}),o&&n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",onClick:t,children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[90vh] overflow-y-auto hide-scrollbar font-manrope relative",onClick:E=>E.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-4 rounded-t-xl",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Tasks"}),n.jsx("button",{onClick:()=>{t(),T(!1)},className:"text-gray-500 hover:text-white transition cursor-pointer",children:n.jsx(Vn,{size:25})})]}),n.jsx("div",{className:"p-6 lg:p-4",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:i.subject||"No Title"})}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 cursor-pointer",onClick:()=>{r&&r(i),typeof s=="function"&&s()},children:"Edit"}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400 cursor-pointer",onClick:()=>u(i),children:[n.jsx(zt,{className:"mr-2"}),"Delete"]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white overflow-x-auto",children:n.jsx("button",{className:"flex-1 min-w-[90px] px-4 py-2 lg:text-lg text-sm font-medium text-center text-white",children:"Overview"})}),n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 lg:p-5 border border-gray-200 text-sm text-gray-700",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Title:"}),n.jsx("p",{children:i.subject||""})]}),i.relatedType1Text&&i.relatedTo1Text&&n.jsxs("div",{children:[n.jsxs("p",{className:"font-semibold",children:[i.relatedType1Text,":"]}),n.jsx("p",{children:i.relatedTo1Text})]}),i.relatedType2Text&&i.relatedTo2Text&&n.jsxs("div",{children:[n.jsxs("p",{className:"font-semibold",children:[i.relatedType2,":"]}),n.jsx("p",{children:i.relatedTo2Text})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Priority:"}),n.jsx("p",{children:i.priority||""})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:i.status||""})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Due Date:"}),n.jsx("p",{children:i.dueDate||""})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("p",{className:"font-semibold",children:"Description:"}),n.jsx("p",{className:"whitespace-pre-wrap",children:i.description||""})]})]})})]})]})}),!o&&n.jsxs("form",{onSubmit:k,className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm flex-1",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Title ",n.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),n.jsx("input",{type:"text",name:"subject",value:i.subject,onChange:N,disabled:o,placeholder:"Enter task title",className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
                            ${w.subject?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
                            ${o?"bg-gray-50 cursor-not-allowed":""}
                          `})]}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("div",{className:"relative w-23",children:[n.jsxs("select",{name:"relatedType1",onChange:N,value:i.relatedType1,disabled:o,className:"w-full pr-6 rounded-md text-sm",children:[n.jsx("option",{value:"Lead",children:"Lead"}),n.jsx("option",{value:"Account",children:"Account"})]}),n.jsx("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),n.jsx(U_,{disabled:!1,items:Array.isArray(f)?f:[],value:i.relatedTo1??"",placeholder:`Search ${i.relatedType1||"here"}...`,getLabel:E=>i.relatedType1==="Lead"?E.title:E.name??"",onChange:E=>r(A=>({...A,relatedTo1:E})),required:!0,isSubmitted:S})]}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("select",{name:"relatedType2",onChange:N,value:i.relatedType2??"Contact",className:"w-23 rounded-md text-sm focus:ring-2 focus:ring-blue-400 outline-none mb-2 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:o||i.relatedType1==="Lead",children:[n.jsx("option",{value:"Contact",children:"Contact"}),n.jsx("option",{value:"Deal",children:"Deal"}),n.jsx("option",{value:"Quote",children:"Quote"})]}),n.jsx(U_,{disabled:i.relatedType1==="Lead",items:Array.isArray(x)?x:[],value:i.relatedTo2??"",placeholder:i.relatedType1==="Lead"?"":Array.isArray(x)&&x.length>0?`Search ${i.relatedType2||"Contact"}...`:`No ${i.relatedType2||""} data found`,getLabel:E=>i.relatedType2==="Contact"?`${E.first_name??""} ${E.last_name??""}`.trim():i.relatedType2==="Quote"?C(E.quote_id)??"":E.name??"",onChange:E=>r(A=>({...A,relatedTo2:E}))})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Description"}),n.jsx("textarea",{name:"description",value:i.description,onChange:N,disabled:o,placeholder:"Enter task description",rows:3,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${o?"bg-gray-50 cursor-not-allowed":""}`})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Priority"}),n.jsxs("select",{name:"priority",value:i.priority,onChange:N,disabled:o,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${o?"bg-gray-50 cursor-not-allowed":""}`,children:[n.jsx("option",{value:"Low",children:"Low"}),n.jsx("option",{value:"Normal",children:"Normal"}),n.jsx("option",{value:"High",children:"High"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Due Date"}),n.jsx("input",{type:"datetime-local",name:"dueDate",value:i.dueDate,onChange:N,disabled:o,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${o?"bg-gray-50 cursor-not-allowed":""}`})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),n.jsx(U_,{items:Array.isArray(c)?c:[],value:i.assignedTo??"",placeholder:"Search an account...",getLabel:E=>`${E.first_name} ${E.last_name}`,onChange:E=>r(A=>({...A,assignedTo:E})),disabled:o||d?.role==="Sales",required:!0,isSubmitted:S})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),n.jsxs("select",{name:"status",value:i.status,onChange:N,disabled:o,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${o?"bg-gray-50 cursor-not-allowed":""}`,children:[n.jsx("option",{value:"Not started",children:"Not started"}),n.jsx("option",{value:"In progress",children:"In Progress"}),n.jsx("option",{value:"Deferred",children:"Deferred"}),n.jsx("option",{value:"Completed",children:"Completed"})]})]}),!o&&n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{t(),T(!1),v({})},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition",children:l?"Update Task":"Create Task"})]})]})]})})})})})]})})}function U_({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,required:o=!1,isSubmitted:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),y=e.find(N=>String(N.id)===String(t)),w=y?s(y):"",v=o&&c&&!t,C=h.useMemo(()=>{const N=f.trim().toLowerCase();return(N?e.filter(T=>(s(T)||"").toLowerCase().includes(N)):e).slice(0,l)},[e,f,s,l]);return h.useEffect(()=>{const N=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:w,placeholder:r,onFocus:()=>!i&&u(!0),onChange:N=>{p(N.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${v?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:C.length>0?C.map(N=>{const S=String(N.id),T=s(N),k=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:T||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}const S7=["Not started","In progress","Deferred","Completed"],_7={NOT_STARTED:"Not started","NOT STARTED":"Not started","TO DO":"Not started",IN_PROGRESS:"In progress","IN PROGRESS":"In progress",COMPLETED:"Completed",DEFERRED:"Deferred","Not started":"Not started","In progress":"In progress",Completed:"Completed",Deferred:"Deferred","In Progress":"In progress","To Do":"Not started",Review:"Deferred"},wZ=e=>e&&(_7[e]||_7[String(e).toUpperCase()])||"Not started",iRe=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const a=t.getTimezoneOffset();return new Date(t.getTime()-a*60*1e3).toISOString().slice(0,16)},A7=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},lRe=e=>{const t=e.subject?.trim()??"",a=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),wZ(e.status);let r=null,i=null,l=null,o=null,c=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2?o=Number(e.relatedTo2):e.relatedType2==="Quote"&&e.relatedTo2&&(c=Number(e.relatedTo2)));const d=e.assignedTo?Number(e.assignedTo):null,u=l||o||i||r,f=l?"Contact":o?"Deal":i?"Account":r?"Lead":c?"Quote":null;return{title:t,description:a,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:d,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:l,deal_id:o,quote_id:c,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:u,related_type:f}},oRe=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",a=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",l=W=>{if(!W)return"";const Z=String(W).split("-");return Z.length===3?`${Z[0]}-${Z[2]}`:String(W)},o=()=>e.lead?.id||e.lead_id,c=()=>e.account?.id||e.account_id,d=()=>e.contact?.id||e.contact_id,u=()=>e.deal?.id||e.deal_id,f=()=>e.quote?.id||e.quote_id,p=()=>e.task_assign_to?.id||e.assigned_to,x=()=>e.lead?.title||e.lead_id,y=()=>e.account?.name||e.account_id,w=()=>i||e.contact_id,v=()=>e.deal?.name||e.deal_id,C=()=>l(e.quote?.quote_id)||e.id;let N="Lead",S="",T="",k="",_="Lead",E="",A="",I="";const z=c(),F=y(),D=o(),M=x();if(z){N="Account",_="Account",E=F,S=String(z);const W=d(),Z=u(),R=w(),Q=v(),Y=f(),oe=C();W?(T="Contact",A="Contact",I=R,k=String(W)):Z?(A="Deal",T="Deal",I=Q,k=String(Z)):Y&&(A="Quote",T="Quote",I=oe,k=String(Y))}else D?(_="Lead",E=M,N="Lead",S=String(D)):e.related_type==="Account"&&(N="Account",S=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:wZ(e.status),dueDate:s,dateAssigned:r,assignedToId:p()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:a,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:_,relatedTo1Text:E,relatedType2Text:A,relatedTo2Text:I,subject:e.title,relatedType1:N,relatedTo1:S,relatedType2:T,relatedTo2:k}};function cRe(){h.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=Kt(),[a,s]=h.useState("board"),[r,i]=h.useState(!1),[l,o]=h.useState(null),[c,d]=h.useState(!1),[u,f]=h.useState([]),[p,x]=h.useState(!0),[y,w]=h.useState(""),[v,C]=h.useState("Filter by Status"),[N,S]=h.useState("Filter by Priority"),[T,k]=h.useState([]),[_,E]=h.useState(1),[A,I]=h.useState(10),[z,F]=h.useState(null),[D,M]=h.useState(!1),[W,Z]=h.useState([]),R=yt(),Q=Yt(),[Y,oe]=h.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""}),[re,ee]=h.useState(null);h.useEffect(()=>{const B=Q.state?.openTaskModal,fe=Q.state?.initialTaskData,Se=Q.state?.taskID;B?(i(!0),fe&&oe(de=>({...de,...fe})),R(Q.pathname,{replace:!0,state:{}})):Se&&(ee(Se),R(Q.pathname,{replace:!0,state:{}}))},[Q,R]),h.useEffect(()=>{if(re&&u.length>0&&!p){const B=u.find(fe=>fe.id===re);B?ve(B,!0):q.error("Task not found."),ee(null)}},[re,u,p]);const H=async()=>{try{const B=await ce.get("/users/all");k(Array.isArray(B.data)?B.data:[])}catch(B){console.error("Failed to fetch users:",B),q.error("Failed to fetch users.")}},ye=async()=>{try{x(!0);const B=await ce.get("/tasks/all"),fe=Array.isArray(B.data)?B.data:[],Se=fe.map(oRe);console.log("Raw Tasks from API:",fe),console.log("Formatted Tasks:",Se),Se.sort((de,ke)=>{const se=de.createdAt?new Date(de.createdAt):0;return(ke.createdAt?new Date(ke.createdAt):0)-se}),console.log("Fetched Tasks:",Se),f(Se),a==="list"&&E(1)}catch(B){console.error("Failed to load tasks:",B),q.error("Failed to load tasks.")}finally{x(!1)}};h.useEffect(()=>{!t&&e&&(H(),ye())},[t,e]);const te=()=>{o(null),oe({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},ve=(B=null,fe=!1)=>{o(B),d(fe),B?oe({id:B.id,subject:B.title||"",description:B.description||"",priority:B.priority||"Normal",status:B.status||"Not started",dueDate:iRe(B.dueDate),assignedTo:B.assignedToId?String(B.assignedToId):"",notes:B.notes||"",relatedType1Text:B.relatedType1Text||"",relatedTo1Text:B.relatedTo1Text||"",relatedType2Text:B.relatedType2Text||"",relatedTo2Text:B.relatedTo2Text||"",relatedType1:B.relatedType1||"",relatedTo1:B.relatedTo1||"",relatedType2:B.relatedType2||"",relatedTo2:B.relatedTo2||""}):te(),i(!0)},je=()=>{i(!1),o(null),d(!1),te()},Oe=async B=>{const fe=lRe(B);console.log("Request Payload for Save:",fe);try{l&&!c?(await ce.put(`/tasks/${l.id}`,fe),q.success("Task updated successfully.")):(await ce.post("/tasks/create",fe),q.success("Task created successfully.")),i(!1),await ye()}catch(Se){console.error("Failed to save task:",Se);const de=Se.response?.data?.detail||"Failed to save task.";q.error(de)}},$e=B=>{B&&F({title:"Delete Task",message:n.jsxs(n.Fragment,{children:["Are you sure you want to delete ",n.jsx("span",{className:"font-semibold",children:B.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:B.id}})},pe=()=>{if(ge.every(B=>W.includes(B.id)))Z(W.filter(B=>!ge.map(fe=>fe.id).includes(B)));else{const B=ge.map(fe=>fe.id);Z([...new Set([...W,...B])])}},Me=B=>{Z(fe=>fe.includes(B)?fe.filter(Se=>Se!==B):[...fe,B])},Le=async()=>{W.length!==0&&F({title:"Delete Tasks",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:W.length})," selected tasks? This action cannot be undone."]}),confirmLabel:`Delete ${W.length} Task(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",task_ids:W}})},he=async()=>{if(!z?.action){F(null);return}const{action:B}=z;M(!0);try{B.type==="delete"?(await ce.delete(`/tasks/${B.targetId}`),q.success("Task deleted successfully."),await ye()):B.type==="bulk-delete"&&(await ce.delete("/tasks/admin/bulk-delete",{data:{task_ids:B.task_ids}}),q.success(`Successfully deleted ${B.task_ids.length} tasks`),Z([]),await ye())}catch(fe){console.error("Task action failed:",fe),q.error("Failed to delete task.")}finally{M(!1),F(null)}},ae=()=>{D||F(null)},Ae=h.useMemo(()=>{const B=y.trim().toLowerCase();return[...u].sort((Se,de)=>{const ke=Se.createdAt?new Date(Se.createdAt):0;return(de.createdAt?new Date(de.createdAt):0)-ke}).filter(Se=>{const de=B===""||Se.title?.toLowerCase().includes(B)||Se.description?.toLowerCase().includes(B)||Se.assignedToName?.toLowerCase().includes(B)||Se.createdBy?.toLowerCase().includes(B),ke=v==="Filter by Status"||Se.status===v,se=N==="Filter by Priority"||Se.priority===N;return de&&ke&&se})},[u,y,v,N]);h.useEffect(()=>{E(1)},[y,v,N,a,A]),h.useEffect(()=>{if(a==="list"){const B=Ae.length===0?1:Math.ceil(Ae.length/A);_>B&&E(B)}},[Ae.length,_,a,A]);const ge=h.useMemo(()=>{if(a==="board")return Ae;const B=(_-1)*A;return Ae.slice(B,B+A)},[Ae,_,a,A]),Be=h.useMemo(()=>{const B=new Date;return[{title:"To Do",value:u.filter(fe=>fe.status==="Not started").length,icon:zs,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:u.filter(fe=>fe.status==="In progress").length,icon:Ri,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:u.filter(fe=>fe.status==="Completed").length,icon:ba,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:u.filter(fe=>fe.dueDate&&new Date(fe.dueDate)<B&&fe.status!=="Completed").length,icon:Rf,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:u.filter(fe=>fe.priority==="High").length,icon:Ro,color:"text-orange-600",bgColor:"bg-orange-100"}]},[u]),qe=B=>B.dueDate&&new Date(B.dueDate)<new Date&&B.status!=="Completed",Te=B=>{switch(B.status){case"Not started":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Deferred":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},He=B=>{switch(B){case"Not started":return"bg-blue-100 text-blue-700";case"In progress":return"bg-purple-100 text-purple-700";case"Deferred":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},Ye=B=>{switch(B){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&n.jsx(Rt,{message:"Loading tasks..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(Ri,{className:"text-blue-600"})," Tasks Board"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:()=>ve(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[n.jsx(dn,{})," Create Task"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Be.map(B=>n.jsx(dRe,{...B},B.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search tasks",value:y,onChange:B=>w(B.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{value:v,onChange:B=>C(B.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Status"}),S7.map(B=>n.jsx("option",{children:B},B))]}),n.jsxs("select",{value:N,onChange:B=>S(B.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Priority"}),n.jsx("option",{children:"High"}),n.jsx("option",{children:"Normal"}),n.jsx("option",{children:"Low"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${a==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),n.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${a==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&a==="board"&&(Ae.length>0?n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:S7.map(B=>{const fe=ge.filter(Se=>Se.status===B);return n.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative rounded-md",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),n.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:B}),n.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:fe.length})]}),n.jsx("div",{className:`space-y-3 ${fe.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:fe.length>0?fe.map(Se=>n.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${Te(Se)}`,onClick:()=>ve(Se,!0),children:[n.jsxs("div",{className:"text-left flex-1",children:[n.jsx("p",{className:"font-medium text-gray-800 text-sm",children:Se.title}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",Se.priority]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",Se.assignedToName]}),n.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",n.jsx("span",{className:qe(Se)?"text-red-600":"text-gray-600",children:Se.dateAssigned?A7(Se.dateAssigned):""})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[n.jsx("button",{type:"button",onClick:de=>{de.stopPropagation(),ve(Se)},className:"text-blue-500 hover:text-blue-700",children:n.jsx(oa,{})}),n.jsx("button",{type:"button",onClick:de=>{de.stopPropagation(),$e(Se)},className:"text-red-500 hover:text-red-700",children:n.jsx(zt,{})})]})]},Se.id)):n.jsx("div",{className:"text-center py-10 text-gray-500",children:"No tasks"})})]},B)})}):n.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No tasks found."})),!p&&!t&&a==="list"&&n.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:ge.length>0&&ge.every(B=>W.includes(B.id)),onChange:pe})}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),n.jsx("th",{className:"py-3 px-4 font-medium text-center w-24",children:W.length>0?n.jsx("button",{onClick:Le,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${W.length} selected tasks`,children:n.jsx(zt,{size:18})}):""})]})}),n.jsx("tbody",{children:ge.length>0?ge.map(B=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",children:[n.jsx("td",{className:"py-3 px-4",onClick:fe=>fe.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:W.includes(B.id),onChange:()=>Me(B.id)})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",onClick:()=>ve(B,!0),children:B.title}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>ve(B,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${He(B.status||"Not started")}`,children:B.status||"Not started"})}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>ve(B,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Ye(B.priority||"Low")}`,children:B.priority||"Low"})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",onClick:()=>ve(B,!0),children:B.assignedToName||"Unassigned"}),n.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${qe(B)?"text-red-600 font-medium":""}`,onClick:()=>ve(B,!0),children:B.dateAssigned?A7(B.dateAssigned):""}),n.jsx("td",{})]},B.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No tasks found."})})})]})})}),!p&&!t&&a==="list"&&n.jsx(en,{className:"mt-6",totalItems:Ae.length,pageSize:A,currentPage:Ae.length===0?0:_,onPrev:()=>E(B=>Math.max(B-1,1)),onNext:()=>E(B=>Math.min(B+1,Math.max(1,Math.ceil(Ae.length/A)||1))),onPageSizeChange:B=>{I(B),E(1)},pageSizeOptions:[10,20,30,40,50],label:"tasks"}),n.jsx(a0,{isOpen:r,onClose:je,onSave:Oe,onEdit:()=>d(!1),setFormData:oe,formData:Y,isEditing:!c&&!!l,viewMode:c,users:T,currentUser:e,onDelete:$e}),z&&n.jsx(uRe,{open:!0,title:z.title,message:z.message,confirmLabel:z.confirmLabel,cancelLabel:z.cancelLabel,variant:z.variant,onConfirm:he,onCancel:ae,loading:D})]})}function dRe({icon:e,title:t,value:a,color:s,bgColor:r,onClick:i}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function uRe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r,variant:i,loading:l,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),n.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}function mRe(e){return St({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M235.4 172.2c0-11.4 9.3-19.9 20.5-19.9 11.4 0 20.7 8.5 20.7 19.9s-9.3 20-20.7 20c-11.2 0-20.5-8.6-20.5-20zm1.4 35.7H275V352h-38.2V207.9z"},child:[]},{tag:"path",attr:{d:"M256 76c48.1 0 93.3 18.7 127.3 52.7S436 207.9 436 256s-18.7 93.3-52.7 127.3S304.1 436 256 436c-48.1 0-93.3-18.7-127.3-52.7S76 304.1 76 256s18.7-93.3 52.7-127.3S207.9 76 256 76m0-28C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48z"},child:[]}]})(e)}const B_={name:"",description:"",manager_id:"",user_ids:[],company_id:""};function fRe({label:e,options:t,selectedValues:a,onChange:s,disabled:r=!1,placeholder:i="Select users...",isSubmitted:l=!1,required:o=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null);h.useEffect(()=>{function C(N){p.current&&!p.current.contains(N.target)&&(d(!1),f(""))}return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]);const x=t.filter(C=>C.label.toLowerCase().includes(u.toLowerCase())),y=C=>{const N=a.includes(C);let S;N?S=a.filter(T=>T!==C):S=[...a,C],s(S)},w=(C,N)=>{C.stopPropagation(),s(a.filter(S=>S!==N))},v=t.filter(C=>a.includes(C.value));return n.jsxs("div",{className:"relative",ref:p,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsxs("div",{onClick:()=>!r&&d(!c),className:`w-full border ${o&&l&&a.length===0?"border-red-500 ring-red-500":c?"border-gray-500 ring-1 ring-gray-400":"border-gray-300"} 
  rounded-md px-3 py-2 text-sm bg-white cursor-pointer min-h-[38px] flex flex-wrap items-center gap-2
  ${r?"bg-gray-100 cursor-not-allowed":""}`,children:[a.length===0&&n.jsx("span",{className:"text-gray-400 select-none",children:i}),v.map(C=>n.jsxs("span",{className:"bg-indigo-100 text-indigo-700 px-2 py-0.5 rounded text-xs flex items-center gap-1 border border-indigo-200",children:[C.label,!r&&n.jsx(Vt,{className:"cursor-pointer hover:text-indigo-900",onClick:N=>w(N,C.value)})]},C.value)),n.jsx("div",{className:"ml-auto text-gray-400",children:n.jsx(jt,{})})]}),c&&!r&&n.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden flex flex-col",children:[n.jsx("div",{className:"p-2 border-b border-gray-100 sticky top-0 bg-white",children:n.jsxs("div",{className:"flex items-center px-2 py-1 bg-gray-50 rounded border border-gray-200",children:[n.jsx(Bt,{className:"text-gray-400 mr-2"}),n.jsx("input",{type:"text",className:"bg-transparent outline-none w-full text-sm",placeholder:"Search...",value:u,onChange:C=>f(C.target.value),autoFocus:!0})]})}),n.jsx("div",{className:"overflow-y-auto flex-1",children:x.length>0?x.map(C=>{const N=a.includes(C.value);return n.jsxs("div",{onClick:()=>y(C.value),className:`px-4 py-2 text-sm cursor-pointer flex items-center justify-between hover:bg-gray-50 
                      ${N?"bg-indigo-50 text-indigo-700":"text-gray-700"}`,children:[n.jsx("span",{children:C.label}),N&&n.jsx(Rk,{className:"text-indigo-600"})]},C.value)}):n.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:"No results found"})})]})]})}function Sc(){h.useEffect(()=>{document.title="Territory | Sari-Sari CRM"},[]);const e=yt(),{id:t}=Io(),[a,s]=h.useState(""),[r,i]=h.useState(""),[l,o]=h.useState(""),[c,d]=h.useState(null),[u,f]=h.useState(!1),[p,x]=h.useState([]),[y,w]=h.useState(!1),[v,C]=h.useState([]),[N,S]=h.useState(B_),[T,k]=h.useState(!1),[_,E]=h.useState(!1),[A,I]=h.useState(null),[z,F]=h.useState(null),[D,M]=h.useState("board"),[W,Z]=h.useState(null),[R,Q]=h.useState(!1),[Y,oe]=h.useState(null),[re,ee]=h.useState(1),[H,ye]=h.useState(10),[te,ve]=h.useState([]),je=h.useRef(!1),{userRole:Oe}=Bs(),$e=h.useMemo(()=>{const ue=new Map;return p.forEach(Ne=>{const Fe=`${Ne.name}-${Ne.manager_id||"no-manager"}`;if(!ue.has(Fe))ue.set(Fe,{...Ne,assigned_users_list:Ne.assigned_to?[Ne.assigned_to]:[]});else{const Ze=ue.get(Fe);Ne.assigned_to&&(Ze.assigned_users_list.some(st=>st.id===Ne.assigned_to.id)||Ze.assigned_users_list.push(Ne.assigned_to))}}),Array.from(ue.values())},[p]),pe=h.useMemo(()=>{const ue=a.trim().toLowerCase(),Ne=r.trim().toLowerCase(),Fe=l.trim();return[...$e].sort((st,Ee)=>{const Je=st?.created_at?new Date(st.created_at):0;return(Ee?.created_at?new Date(Ee.created_at):0)-Je}).filter(st=>{const Ee=st.name?.toLowerCase()||"",Je=st.description?.toLowerCase()||"",be=st.managed_by?`${st.managed_by.first_name} ${st.managed_by.last_name}`.toLowerCase():"",Ke=st.status?.toString().toLowerCase()||"",$=st.assigned_users_list.map(Ce=>`${Ce.first_name} ${Ce.last_name}`.toLowerCase()).join(" "),K=ue===""||[Ee,Je,be,Ke,$].some(Ce=>Ce&&Ce.includes(ue)),ne=Ne===""||Ke===Ne,J=Fe===""||String(st.managed_by?.id||"")===Fe||st.assigned_users_list.some(Ce=>String(Ce.id)===Fe);return K&&ne&&J})},[$e,a,r,l]);h.useEffect(()=>{if(je.current){je.current=!1;return}if(t&&$e.length>0&&!T&&!u&&!_){const ue=$e.find(Ne=>Ne.id===parseInt(t));ue&&d(ue)}!t&&!T&&!u&&d(null)},[t,$e,T,u,_]),h.useEffect(()=>{ee(1)},[a,r,l]),h.useEffect(()=>{ee(ue=>{const Ne=Math.max(1,Math.ceil(pe.length/H)||1);return ue>Ne?Ne:ue})},[pe.length,H]);const Me=async()=>{try{const ue=await ce.get("/users/read/territory");C(ue.data)}catch(ue){console.error("Error fetching users:",ue)}},Le=async()=>{w(!0);try{const ue=await ce.get("/territories/fetch"),Ne=Array.isArray(ue.data)?ue.data:[];x(Ne),console.log(ue.data)}catch(ue){console.error("Error fetching territories:",ue)}finally{w(!1)}};h.useEffect(()=>{Me(),Le()},[]);const he=ue=>{const{name:Ne,value:Fe}=ue.target;S(Ze=>({...Ze,[Ne]:Fe}))},ae=ue=>{S(Ne=>({...Ne,user_ids:ue}))},Ae=()=>{S(B_),k(!1),I(null),f(!0)},ge=(ue=!0)=>{f(!1),k(!1),I(null),S(B_)},Be=ue=>{if(!ue)return;const Ne=ue.assigned_users_list?ue.assigned_users_list.map(Fe=>String(Fe.id)):[];S({name:ue.name||"",description:ue.description||"",manager_id:ue.managed_by?String(ue.managed_by.id):"",user_ids:Ne,company_id:ue.company_id?String(ue.company_id):""}),k(!0),I(ue.id),d(null),f(!0)},[qe,Te]=h.useState(!1),He=ue=>{ue.preventDefault(),Te(!0);const Ne=N.name.trim();if(!Ne){q.error("Territory name is required.");return}if(!N.manager_id){q.error("Territory manager is required.");return}if(N.user_ids.length===0){q.error("Please assign at least one user.");return}let Fe=N.company_id?Number(N.company_id):null;if(!Fe&&N.user_ids.length>0){const Ee=N.user_ids[0],Je=v.find(be=>String(be.id)===String(Ee));Je&&Je.company&&(Fe=Je.company.id)}const Ze={name:Ne,description:N.description?.trim()||"",manager_id:N.manager_id?Number(N.manager_id):null,user_ids:N.user_ids.map(Ee=>Number(Ee)),company_id:Fe},st=T&&A?"update":"create";Z({title:st==="create"?"Confirm New Territory":"Confirm Update",message:n.jsxs("span",{children:[st==="create"?"Create":"Update"," territory ",n.jsx("span",{className:"font-semibold",children:Ne})," with ",Ze.user_ids.length," assigned users?"]}),confirmLabel:st==="create"?"Create":"Update",cancelLabel:"Cancel",variant:"primary",action:{type:st,payload:Ze,targetId:A,name:Ne}})},Ye=ue=>{ue&&Z({title:"Delete Territory Group",message:n.jsxs("span",{children:["Are you sure you want to delete ",n.jsx("span",{className:"font-semibold",children:ue.name}),"?",n.jsx("br",{}),n.jsxs("span",{className:"text-xs text-red-500",children:["This will remove assignments for all ",ue.assigned_users_list.length," users in this group."]})]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:ue.id,name:ue.name}})},B=async()=>{te.length!==0&&Z({title:"Delete Territories",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:te.length})," selected territories? This action cannot be undone."]}),confirmLabel:`Delete ${te.length} Territory(ies)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",territory_ids:te}})},fe=ue=>{if(ue.target.checked){const Ne=se.map(Fe=>Fe.id);ve(Ne)}else ve([])},Se=ue=>{ve(Ne=>Ne.includes(ue)?Ne.filter(Fe=>Fe!==ue):[...Ne,ue])},de=async()=>{if(!W?.action){Z(null);return}const{action:ue}=W,{type:Ne,payload:Fe,targetId:Ze,name:st}=ue;Q(!0);try{Ne==="create"?(E(!0),await ce.post("/territories/assign",Fe),q.success(`Territory "${st}" created.`),await Le(),await Me(),ge(!1)):Ne==="update"?(E(!0),await ce.put(`/territories/${Ze}`,Fe),q.success(`Territory "${st}" updated.`),je.current=!0,ge(!1),d(null),t&&e("/admin/territory"),await Le(),await Me()):Ne==="delete"?(oe(Ze),await ce.delete(`/territories/${Ze}`),q.success(`Territory "${st}" deleted.`),await Le(),c?.id===Ze&&d(null)):Ne==="bulk-delete"&&(await ce.delete("/territories/admin/bulk-delete",{data:{territory_ids:ue.territory_ids}}),q.success(`Successfully deleted ${ue.territory_ids.length} territories`),ve([]),await Le())}catch(Ee){console.error(Ee),q.error("An error occurred.")}finally{E(!1),Te(!1),oe(null),Q(!1),Z(null)}},ke=()=>{R||Z(null)},se=h.useMemo(()=>{if(D==="board")return pe;const ue=(re-1)*H;return pe.slice(ue,ue+H)},[pe,re,H,D]),We=pe.length>0,Re=()=>ee(ue=>Math.max(ue-1,1)),ct=()=>ee(ue=>Math.min(ue+1,Math.ceil(pe.length/H)||1)),Ie=ue=>!ue||ue.length===0?"Unassigned":ue.length===1?`${ue[0].first_name} ${ue[0].last_name}`:`${ue[0].first_name} ${ue[0].last_name} +${ue.length-1} more`;return n.jsx(n.Fragment,{children:n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[y&&n.jsx(Rt,{message:"Loading territories..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-0 mb-7",children:[n.jsxs("h2",{className:"flex items-center text-2xl font-semibold text-gray-800",children:[n.jsx(zo,{className:"mr-2 text-blue-600"})," Territory"]}),n.jsx("div",{className:"flex justify-center lg:justify-end md:justify-end w-full",children:["ceo","admin","group manager","group_manager"].includes(Oe.toLowerCase())&&(Array.isArray(v)&&v.length>0?n.jsxs("button",{onClick:Ae,className:"flex items-center bg-black text-white px-3 py-2 rounded-md hover:bg-gray-800 text-sm",children:[n.jsx(dn,{})," Create Territory"]}):n.jsxs("div",{className:"text-xs bg-red-50 p-2 rounded-lg ring ring-red-300 text-red-700 flex items-center gap-1",children:[n.jsx(mRe,{})," Add users to assign territories"]}))})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mt-6 mb-4 flex flex-col md:flex-row items-center gap-2",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full md:w-4/4",children:[n.jsx(Bt,{className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search territory",className:"focus:outline-none w-full",value:a,onChange:ue=>s(ue.target.value)})]}),Oe.toLowerCase()!=="sales"&&n.jsx("div",{className:"flex flex-col md:flex-row gap-2 w-full md:w-1/2",children:n.jsxs("select",{className:"border border-gray-300 rounded-lg px-3 h-11 w-full text-sm",value:l,onChange:ue=>o(ue.target.value),children:[n.jsx("option",{value:"",children:"Filter by Users"}),v.map(ue=>n.jsxs("option",{value:String(ue.id),children:[ue.first_name," ",ue.last_name]},ue.id))]})})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("button",{onClick:()=>M("board"),className:`px-4 py-2 rounded-full text-sm ${D==="board"?"bg-gray-800 text-white":"bg-gray-100"}`,children:"Board View"}),n.jsx("button",{onClick:()=>M("list"),className:`px-4 py-2 rounded-full text-sm ${D==="list"?"bg-gray-800 text-white":"bg-gray-100"}`,children:"List View"})]}),D==="board"&&n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:We?se.map(ue=>n.jsxs("div",{onClick:()=>{d(ue);let Ne;Oe.toLowerCase()==="ceo"||Oe.toLowerCase()==="admin"?Ne="admin":Oe.toLowerCase()==="group manager"||Oe.toLowerCase()==="group_manager"?Ne="group-manager":Oe.toLowerCase()==="manager"?Ne="manager":Ne="sales",e(`/${Ne}/territory/${ue.id}`)},className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative cursor-pointer hover:shadow-md transition",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),n.jsx("h3",{className:"font-medium text-gray-900 mb-2 pt-7",children:ue.name}),ue.description&&n.jsx("p",{className:"text-xs text-gray-600 mb-2 line-clamp-2",children:ue.description}),n.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-2",children:[n.jsx(Jt,{})," ",Ie(ue.assigned_users_list)]}),n.jsx("div",{className:"h-px bg-gray-200 w-full mb-2"}),n.jsx("div",{className:"text-gray-400 text-xs text-right",children:ue.created_at?new Date(ue.created_at).toLocaleDateString():""})]},ue.id)):n.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No territories found."})}),D==="list"&&n.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:n.jsxs("tr",{children:[Oe.toLowerCase()!=="sales"&&n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:se.length>0&&se.every(ue=>te.includes(ue.id)),onChange:fe})}),n.jsx("th",{className:"py-3 px-4",children:"Territory"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Manager"}),Oe.toLowerCase()!=="sales"&&n.jsx("th",{className:"py-3 px-4 text-center w-24",children:te.length>0?n.jsx("button",{onClick:B,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${te.length} selected territories`,children:n.jsx(zt,{size:18})}):""})]})}),n.jsx("tbody",{children:We?se.map(ue=>n.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",children:[Oe.toLowerCase()!=="sales"&&n.jsx("td",{className:"py-3 px-4",onClick:Ne=>Ne.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:te.includes(ue.id),onChange:()=>Se(ue.id)})}),n.jsx("td",{className:"py-3 px-4 font-medium",onClick:()=>{d(ue);let Ne;Oe.toLowerCase()==="ceo"||Oe.toLowerCase()==="admin"?Ne="admin":Oe.toLowerCase()==="group manager"||Oe.toLowerCase()==="group_manager"?Ne="group-manager":Oe.toLowerCase()==="manager"?Ne="manager":Ne="sales",e(`/${Ne}/territory/${ue.id}`)},children:ue.name}),n.jsx("td",{className:"py-3 px-4",children:Ie(ue.assigned_users_list)}),n.jsx("td",{className:"py-3 px-4",children:ue.managed_by?`${ue.managed_by.first_name}`:""}),n.jsx("td",{})]},ue.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No territories found."})})})]})}),c&&n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-xl p-8 relative",children:[n.jsx("button",{className:"absolute top-2 right-4 text-gray-500 hover:text-black",onClick:()=>{d(null);let ue;Oe.toLowerCase()==="ceo"||Oe.toLowerCase()==="admin"?ue="admin":Oe.toLowerCase()==="group manager"||Oe.toLowerCase()==="group_manager"?ue="group-manager":Oe.toLowerCase()==="manager"?ue="manager":ue="sales",e(`/${ue}/territory`)},children:n.jsx(Vt,{size:24})}),n.jsx("h2",{className:"text-3xl font-semibold mb-1",children:c.name}),n.jsx("div",{className:"h-px bg-gray-200 w-full mb-4"}),n.jsx("p",{className:"text-gray-500 mb-1",children:"Description"}),n.jsx("p",{className:"text-gray-700 text-sm mb-6",children:c.description||""}),n.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6 text-sm",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500",children:"Manager"}),n.jsx("div",{className:"font-medium",children:c.managed_by?`${c.managed_by.first_name} ${c.managed_by.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500",children:"Assigned To"}),n.jsx("div",{className:"flex flex-col gap-1 mt-1 max-h-32 overflow-y-auto",children:c.assigned_users_list&&c.assigned_users_list.length>0?c.assigned_users_list.map(ue=>n.jsxs("div",{className:"flex items-center gap-2 text-gray-800 font-medium",children:[n.jsx(Jt,{})," ",ue.first_name," ",ue.last_name]},ue.id)):"Unassigned"})]})]}),!["sales","manager"].includes(Oe.toLowerCase())&&n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsxs("button",{onClick:()=>Be(c),className:"bg-blue-500 text-white px-4 py-2 rounded flex items-center gap-2",children:[n.jsx(oa,{})," Edit"]}),n.jsxs("button",{onClick:()=>Ye(c),className:"bg-red-500 text-white px-4 py-2 rounded flex items-center gap-2",children:[n.jsx(zt,{})," Delete"]})]})]})}),u&&n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-lg w-full max-w-xl p-6 relative",children:[n.jsxs("button",{className:"absolute top-4 right-4",onClick:()=>{ge(),Te(!1)},children:[n.jsx(Vt,{size:22})," "]}),n.jsx("h2",{className:"text-xl font-semibold text-center mb-6",children:T?"Edit Territory":"Create Territory"}),n.jsxs("form",{className:"space-y-4",onSubmit:He,noValidate:!0,children:[n.jsx(hRe,{label:"Territory Name",name:"name",value:N.name,onChange:he,required:!0,isSubmitted:qe}),n.jsx(gRe,{label:"Territory Manager",name:"manager_id",value:N.manager_id,onChange:he,options:[{value:"",label:"Assign Manager"},...v.map(ue=>({value:String(ue.id),label:`${ue.first_name} ${ue.last_name}`}))],required:!0,isSubmitted:qe}),n.jsx(fRe,{label:n.jsxs(n.Fragment,{children:["Assign Users ",n.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),placeholder:"Search and select users...",options:v.map(ue=>({value:String(ue.id),label:`${ue.first_name} ${ue.last_name}`})),selectedValues:N.user_ids,onChange:ae,required:!0,isSubmitted:qe}),n.jsx(pRe,{label:"Description",name:"description",value:N.description,onChange:he}),n.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[n.jsx("button",{type:"button",onClick:()=>{ge(),Te(!1)},className:"px-4 py-2 bg-red-400 text-white rounded",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:_,className:"px-4 py-2 bg-tertiary text-white rounded",children:_?"Saving...":"Save Territory"})]})]})]})}),D==="list"&&n.jsx(en,{className:"mt-4",totalItems:pe.length,pageSize:H,currentPage:re,onPrev:Re,onNext:ct,onPageSizeChange:ue=>{ye(ue),ee(1)},label:"territories"}),W&&n.jsx(xRe,{open:!0,title:W.title,message:W.message,confirmLabel:W.confirmLabel,cancelLabel:W.cancelLabel,variant:W.variant,onConfirm:de,onCancel:ke,loading:R})]})})}function hRe({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,isSubmitted:c=!1,className:d=""}){const u=c&&l&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100 ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
${d}
`})]})}function gRe({label:e,name:t,value:a,onChange:s,options:r,disabled:i=!1,required:l=!1,isSubmitted:o=!1}){const c=o&&l&&!a;return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("select",{name:t,value:a??"",onChange:s,disabled:i,className:`w-full border rounded-md px-3 py-2 text-sm bg-white focus:ring-2 outline-none disabled:bg-gray-100 ${c?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-gray-400"}`,children:r.map(d=>n.jsx("option",{value:d.value,children:d.label},d.value))})]})}function pRe({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:l=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-gray-400 outline-none disabled:bg-gray-100"})]})}function xRe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),n.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}const yRe=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"}],bRe=e=>e?String(e).toUpperCase():"",Wd=e=>{const t=bRe(e);return t==="PLANNED"||t==="PENDING"?"PLANNED":t==="HELD"||t==="COMPLETED"?"HELD":t==="NOT HELD"||t==="NOT_HELD"||t==="CANCELLED"?"NOT_HELD":"PLANNED"},H_=e=>{const t=Wd(e);return t==="PLANNED"?"PLANNED":t==="HELD"?"HELD":t==="NOT_HELD"?"NOT HELD":"--"},E7=e=>{switch(Wd(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},T7=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function k7(){const[e,t]=h.useState(!1),[a,s]=h.useState(null),[r,i]=h.useState(null),[l,o]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(null),[y,w]=h.useState(!1),[v,C]=h.useState(null),[N,S]=h.useState(!1),[T,k]=h.useState(!1),[_,E]=h.useState("PLANNED"),[A,I]=h.useState(!1),[z,F]=h.useState(!1),[D,M]=h.useState(10),[W,Z]=h.useState(1),[R,Q]=h.useState([]),[Y,oe]=h.useState(null);Ds();const re=yt(),ee=Yt(),ye={subject:"",call_time:(()=>{const $=new Date,G=$.getFullYear(),K=String($.getMonth()+1).padStart(2,"0"),ne=String($.getDate()).padStart(2,"0");return`${G}-${K}-${ne}T08:00`})(),duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[te,ve]=h.useState(ye);h.useEffect(()=>{const $=ee.state,G=$?.callID;if(G&&!$?.openCallModal){oe(G),re(ee.pathname,{replace:!0,state:{}});return}!$?.openCallModal||!$?.initialCallData||$.initialCallData.relatedType1==="Lead"&&Array.isArray(l)&&l.length===0||$.initialCallData.relatedType1==="Account"&&(!Array.isArray(l)||l.length===0)||(t(!0),ve(K=>({...K,...$.initialCallData,relatedTo1:$.initialCallData.relatedTo1?String($.initialCallData.relatedTo1):"",relatedTo2:$.initialCallData.relatedTo2?String($.initialCallData.relatedTo2):""})),re(ee.pathname,{replace:!0,state:{}}))},[ee.state,l]),h.useEffect(()=>{if(Y&&u.length>0&&!z){const $=u.find(G=>G.id===Y);$?s($):q.error("Call not found."),oe(null)}},[Y,u,z]);const je=async()=>{try{F(!0);const $=await ce.get("/calls/admin/fetch-all"),K=[...Array.isArray($.data)?$.data:[]].sort((ne,J)=>{const Ce=ne?.created_at?new Date(ne.created_at):0;return(J?.created_at?new Date(J.created_at):0)-Ce});f(K)}catch($){console.error("Error fetching calls:",$),q.error("Failed to load calls")}finally{F(!1)}},Oe=async()=>{try{const $=await ce.get("/users/all");x($.data)}catch($){console.error("Error fetching users: ",$)}};h.useEffect(()=>{Oe(),je()},[]);const[$e,pe]=h.useState(""),[Me,Le]=h.useState("Filter by Status"),[he,ae]=h.useState("Filter by Users");h.useEffect(()=>{Z(1)},[$e,Me,he,D]);const Ae=h.useMemo(()=>u.filter($=>{const G=!$e||[$.subject,$.notes,$.lead?.title,$.account?.name,$.contact?.first_name,$.contact?.last_name,$.deal?.name].some(Ce=>Ce&&String(Ce).toLowerCase().includes($e.toLowerCase())),K=Me==="Filter by Status"||Wd($.status)===Me,ne=$.call_assign_to?`${$.call_assign_to.first_name} ${$.call_assign_to.last_name}`:"";return G&&K&&(he==="Filter by Users"||ne===he)}),[u,$e,Me,he]),ge=h.useMemo(()=>{const $=(W-1)*D;return Ae.slice($,$+D)},[Ae,W,D]),Be=Array.isArray(p)?p.map($=>({id:$.id,name:`${$.first_name} ${$.last_name}`})):[],qe=()=>Z($=>Math.max(1,$-1)),Te=()=>Z($=>Math.min($+1,Math.ceil(Ae.length/D)||1)),He=$=>{if($.target.checked){const G=ge.map(K=>K.id);Q(G)}else Q([])},Ye=$=>{Q(G=>G.includes($)?G.filter(K=>K!==$):[...G,$])},B=u.length,fe=u.filter($=>Wd($.status)==="PLANNED").length,Se=u.filter($=>Wd($.status)==="HELD").length,de=u.filter($=>Wd($.status)==="NOT_HELD").length,ke=[{title:"Total",value:B,icon:Ls,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:fe,icon:zs,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:Se,icon:ba,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:de,icon:Ps,color:"text-gray-600",bgColor:"bg-gray-100"}],[se,We]=h.useState("Overview"),Re=$=>{const{name:G,value:K}=$.target;ve(ne=>{const J={...ne,[G]:K};return G==="relatedType1"&&(J.relatedTo1="",K==="Lead"?(J.relatedType2=null,J.relatedTo2=null,d([])):K==="Account"&&(J.relatedType2="Contact")),G==="relatedType2"&&(J.relatedTo2=""),J})};h.useEffect(()=>{const $=async()=>{try{o([]);let G;te.relatedType1==="Lead"?G=await ce.get("/leads/admin/getLeads"):te.relatedType1==="Account"&&(G=await ce.get("/accounts/admin/fetch-all")),G&&Array.isArray(G.data)?o(G.data):o([])}catch(G){console.error("Error fetching data:",G),o([])}};te.relatedType1&&$()},[te.relatedType1]),h.useEffect(()=>{const $=async()=>{try{d([]);let G;if(te.relatedType1==="Account"&&te.relatedTo1)te.relatedType2==="Contact"?G=await ce.get(`/contacts/from-acc/${te.relatedTo1}`):te.relatedType2==="Deal"&&(G=await ce.get(`/deals/from-acc/${te.relatedTo1}`));else{d([]);return}G&&Array.isArray(G.data)?d(G.data):d([])}catch(G){console.error("Error fetching data:",G),d([])}};te.relatedType2&&$()},[te.relatedType2,te.relatedTo1,te.relatedType1]);const[ct,Ie]=h.useState(!1),ue=$=>{$.preventDefault(),Ie(!0);const G=te.subject;if(!G||G.trim()===""){q.error("Subject is required.");return}if(!te.relatedTo1){q.error(`Please select a ${te.relatedType1||"Lead/Account"}.`);return}if(!te.assigned_to){q.error("Subject is required.");return}const ne={...te,duration_minutes:te.duration_minutes?parseInt(te.duration_minutes,10):null,relatedTo1:te.relatedTo1?parseInt(te.relatedTo1,10):null,relatedTo2:te.relatedType1==="Lead"?null:te.relatedTo2?parseInt(te.relatedTo2,10):null,relatedType2:te.relatedType1==="Lead"?null:te.relatedType2,assigned_to:te.assigned_to?parseInt(te.assigned_to,10):null},J=y&&v?"update":"create",Ce=(te.subject||"").trim()||"Untitled Call";i({title:J==="create"?"Confirm New Call":"Confirm Update",message:J==="create"?`Create "${Ce}"?`:`Save changes to "${Ce}"?`,confirmLabel:J==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:J,payload:ne,targetId:v||null,name:Ce}})},Ne=$=>s($),Fe=()=>{t(!1),w(!1),C(null)},Ze=async()=>{R.length!==0&&i({title:"Delete Calls",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:R.length})," selected calls? This action cannot be undone."]}),confirmLabel:`Delete ${R.length} Call(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",call_ids:R}})},st=async()=>{if(!r?.action){i(null);return}const{action:$}=r,{type:G,payload:K,targetId:ne,name:J}=$;k(!0);try{if(G==="create")S(!0),await ce.post("/calls/create",K),q.success(`Call "${J}" created successfully.`),t(!1),ve(ye),w(!1),C(null),await je();else if(G==="update"){if(!ne)throw new Error("Missing call identifier for update.");S(!0),await ce.put(`/calls/${ne}`,K),q.success(`Call "${J}" updated successfully.`),t(!1),ve(ye),w(!1),C(null),await je()}else if(G==="delete"){if(!ne)throw new Error("Missing call identifier for deletion.");await ce.delete(`/calls/${ne}`),q.success(`Call "${J}" deleted successfully.`),a?.id===ne&&s(null),await je()}else G==="bulk-delete"&&(await ce.delete("/calls/admin/bulk-delete",{data:{call_ids:R}}),q.success(`Successfully deleted ${R.length} calls`),Q([]),await je())}catch(Ce){const me=G==="create"?"Failed to create call. Please review the details and try again.":G==="update"?"Failed to update call. Please review the details and try again.":"Failed to delete call. Please try again.",V=Ce?.response?.data?.detail||me;q.error(V)}finally{(G==="create"||G==="update")&&S(!1),k(!1),i(null)}},Ee=()=>{T||i(null)},Je=async()=>{if(a?.id)try{I(!0),await ce.put(`/calls/${a.id}`,{status:_}),q.success(`Status updated to ${H_(_)}`),f($=>Array.isArray($)?$.map(G=>G.id===a.id?{...G,status:_}:G):$),s(null)}catch($){const G=$.response?.data?.detail||"Failed to update status.";q.error(G)}finally{I(!1)}};h.useEffect(()=>{a&&E(Wd(a.status))},[a]);const be=a?n.jsxs("div",{id:"callModalBackdrop",onClick:$=>$.target.id==="callModalBackdrop"&&s(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[z&&n.jsx(Rt,{message:"Loading call details..."}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),n.jsx("button",{onClick:()=>s(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:n.jsx(Vn,{size:25})})]}),n.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:a.subject}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${E7(a.status)}`,children:H_(a.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const $=Ce=>{if(!Ce)return"";const me=new Date(Ce),V=me.getFullYear(),_e=String(me.getMonth()+1).padStart(2,"0"),Ue=String(me.getDate()).padStart(2,"0"),rt=String(me.getHours()).padStart(2,"0"),bt=String(me.getMinutes()).padStart(2,"0");return`${V}-${_e}-${Ue}T${rt}:${bt}`},G=a.lead?"Lead":a.account?"Account":"Lead",K=a.lead?a.lead.id:a.account?a.account.id:null,ne=G==="Lead"?null:a.contact?"Contact":a.deal?"Deal":"Contact",J=G==="Lead"?null:a.contact?a.contact.id:a.deal?a.deal.id:null;ve({subject:a.subject||"",call_time:$(a.call_time),duration_minutes:a.duration_minutes?String(a.duration_minutes):"",direction:a.direction||"Outgoing",status:a.status||"Planned",notes:a.notes||"",relatedType1:G,relatedType2:ne,relatedTo1:K?String(K):"",relatedTo2:J?String(J):"",assigned_to:a.call_assign_to?.id?String(a.call_assign_to.id):""}),w(!0),C(a.id),s(null),t(!0)},children:[n.jsx(ia,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>{const $=a.subject||"this call";i({title:"Delete Call",message:`Are you sure you want to permanently delete "${$}"? This action cannot be undone.`,confirmLabel:"Delete Call",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:a.id,name:$}})},children:[n.jsx(zt,{className:"mr-2"}),"Delete"]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map($=>n.jsx("button",{onClick:()=>We($),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${se===$?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:$},$))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[se==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsx(to,{label:"Call Time",value:T7(a.call_time)}),n.jsx(to,{label:"Duration",value:a.duration_minutes?`${a.duration_minutes} min`:null}),n.jsx(to,{label:"Direction",value:a.direction||"--"}),n.jsx(to,{label:"Assigned To",value:`${a.call_assign_to.first_name} ${a.call_assign_to.last_name}`}),a.lead&&n.jsx(to,{label:"Lead",value:a.lead.title}),a.account&&n.jsx(to,{label:"Account",value:a.account.name}),a.contact&&n.jsx(to,{label:"Contact",value:`${a.contact.first_name} ${a.contact.last_name}`}),a.deal&&n.jsx(to,{label:"Deal",value:a.deal.name}),n.jsx(to,{label:"Created At",value:T7(a.created_at)})]})}),se==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Call Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:a.notes||"No notes available."})]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:_,onChange:$=>E($.target.value),children:[n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),n.jsx("button",{onClick:Je,disabled:A,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:A?"Updating...":"Update"})]})]})]})]})]}):null,Ke=e?n.jsx("div",{id:"modalBackdrop",onClick:$=>$.target.id==="modalBackdrop"&&Fe(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[n.jsx("button",{onClick:()=>{Fe(),Ie(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:y?"Edit Call":"Add New Call"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:ue,noValidate:!0,children:[n.jsx(wRe,{label:"Subject",className:"md:col-span-2",name:"subject",value:te.subject,onChange:Re,isSubmitted:ct,required:!0}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("div",{className:"relative w-25",children:[n.jsxs("select",{name:"relatedType1",onChange:Re,value:te.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:N||y,children:[n.jsx("option",{value:"Lead",children:"Lead"}),n.jsx("option",{value:"Account",children:"Account"})]}),n.jsx("span",{className:"absolute left-10 md:pl-6 pl-6 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),n.jsx(G_,{items:Array.isArray(l)?l:[],value:te.relatedTo1??"",placeholder:`Search ${te.relatedType1||"here"}...`,getLabel:$=>te.relatedType1==="Lead"?$.title:$.name??"",onChange:$=>ve(G=>({...G,relatedTo1:$})),required:!0,isSubmitted:ct,disabled:N||y})]}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("select",{name:"relatedType2",onChange:Re,value:te.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:te.relatedType1==="Lead"||N||y,children:[n.jsx("option",{value:"Contact",children:"Contact"}),n.jsx("option",{value:"Deal",children:"Deal"})]}),n.jsx(G_,{disabled:te.relatedType1==="Lead"||N||y,items:Array.isArray(c)?c:[],value:te.relatedTo2??"",placeholder:te.relatedType1==="Lead"?"":Array.isArray(c)&&c.length>0?`Search ${te.relatedType2||"Contact"}...`:`No ${te.relatedType2||""} data found`,getLabel:$=>te.relatedType2==="Contact"?`${$.first_name??""} ${$.last_name??""}`.trim():$.name??"",onChange:$=>ve(G=>({...G,relatedTo2:$}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),n.jsx("input",{type:"datetime-local",value:te.call_time,onChange:Re,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),n.jsxs("div",{className:"w-full",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),n.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[n.jsx("input",{type:"tel",value:te.duration_minutes,onChange:Re,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),n.jsx("p",{children:"minutes"})]})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[" Assign To ",n.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),n.jsx(G_,{items:Array.isArray(p)?p:[],value:te.assigned_to??"",placeholder:"Search an account...",getLabel:$=>`${$.first_name} ${$.last_name}`,onChange:$=>ve(G=>({...G,assigned_to:$})),required:!0,isSubmitted:ct})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),n.jsxs("select",{name:"direction",onChange:Re,value:te.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Incoming",children:"Incoming"}),n.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),n.jsxs("select",{name:"status",onChange:Re,value:te.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Planned",children:"Planned"}),n.jsx("option",{value:"Held",children:"Held"}),n.jsx("option",{value:"Not held",children:"Not held"})]})]}),n.jsx(NRe,{className:"col-span-2",label:"Notes",value:te.notes,onChange:Re,name:"notes"}),n.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{Fe(),Ie(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:N,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:N?"Saving...":y?"Update Call":"Save Call"})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Ls,{className:"mr-2 text-blue-600"})," Calls"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto gap-2",children:n.jsxs("button",{onClick:()=>{ve(ye),w(!1),C(null),t(!0),Ie(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(dn,{className:"mr-2"})," Add Call"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:ke.map($=>n.jsx(vRe,{...$},$.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[n.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",value:$e,onChange:$=>pe($.target.value)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{value:Me,onChange:$=>Le($.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),yRe.map($=>n.jsx("option",{value:$.value,children:$.label},$.value))]}),n.jsxs("select",{value:he,onChange:$=>ae($.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),Be.map($=>n.jsx("option",{value:$.name,children:$.name},$.id))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:ge.length>0&&R.length===ge.length,onChange:He,className:"cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Call Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:R.length>0?n.jsx("button",{onClick:Ze,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${R.length} selected calls`,children:n.jsx(zt,{size:18})}):""})]})}),n.jsx("tbody",{children:z?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"py-10",children:n.jsx(Rt,{message:"Loading calls..."})})}):ge.length>0?ge.map($=>n.jsxs("tr",{onClick:()=>Ne($),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:G=>G.stopPropagation(),children:n.jsx("input",{type:"checkbox",checked:R.includes($.id),onChange:()=>Ye($.id),className:"cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:$.subject||"--"}),n.jsxs("td",{className:"py-3 px-4",children:[$.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:$.lead.title}),$.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:$.account.name}),$.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[$.contact.first_name," ",$.contact.last_name]}),$.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:$.deal.name})]}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:$.call_time?new Date($.call_time).toLocaleString():"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:$?.call_assign_to?`${$.call_assign_to.first_name} ${$.call_assign_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${E7($.status)}`,children:H_($.status)})}),n.jsx("td",{className:"py-3 px-4"})]},$.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),n.jsx(en,{totalItems:Ae.length,pageSize:D,currentPage:W,onPrev:qe,onNext:Te,onPageSizeChange:$=>{M($),Z(1)},pageSizeOptions:[10,20,30,40,50],label:"calls"})]}),be,Ke,r&&n.jsx(jRe,{open:!0,title:r.title,message:r.message,confirmLabel:r.confirmLabel,cancelLabel:r.cancelLabel,variant:r.variant,onConfirm:st,onCancel:Ee,loading:T})]})}function vRe({icon:e,title:t,value:a,color:s,bgColor:r}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:22})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function wRe({label:e,name:t,value:a,onChange:s,placeholder:r="",type:i="text",required:l=!1,disabled:o=!1,isSubmitted:c=!1,className:d=""}){const u=c&&l&&!a;return n.jsxs("div",{className:d,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
        `})]})}function NRe(e){return n.jsxs("div",{className:e.className,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),n.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function to({label:e,value:t}){return n.jsxs("p",{children:[n.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",n.jsx("br",{}),n.jsx("span",{className:"break-words",children:t||"--"})]})}function jRe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),n.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}function G_({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,required:o=!1,isSubmitted:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),y=e.find(N=>String(N.id)===String(t)),w=y?s(y):"",v=o&&c&&!t,C=h.useMemo(()=>{const N=f.trim().toLowerCase();return(N?e.filter(T=>(s(T)||"").toLowerCase().includes(N)):e).slice(0,l)},[e,f,s,l]);return h.useEffect(()=>{const N=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:w,placeholder:r,onFocus:()=>!i&&u(!0),onChange:N=>{p(N.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${v?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:C.length>0?C.map(N=>{const S=String(N.id),T=s(N),k=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:T||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}const Gj=({onClose:e,formData:t,setFormData:a,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,users:l=[]})=>{const c=(()=>{const _=new Date,E=_.getFullYear(),A=String(_.getMonth()+1).padStart(2,"0"),I=String(_.getDate()).padStart(2,"0");return{startTime:`${E}-${A}-${I}T08:00`,endTime:`${E}-${A}-${I}T09:00`}})(),[d,u]=h.useState({subject:"",startTime:c.startTime,endTime:c.endTime,location:"",status:"Planned",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:"Contact",relatedTo2:""}),[f,p]=h.useState([]),[x,y]=h.useState([]);h.useEffect(()=>{t!==void 0&&a&&(!t.startTime||!t.endTime)&&a(_=>({..._,startTime:_.startTime||c.startTime,endTime:_.endTime||c.endTime}))},[]);const w=t!==void 0?t:d,v=a||u,{userRole:C}=Bs();h.useEffect(()=>{const _=async()=>{try{p([]);let E;w.relatedType1==="Lead"?E=await ce.get("/leads/admin/getLeads"):w.relatedType1==="Account"&&(E=await ce.get("/accounts/admin/fetch-all"));let A=[];if(E&&Array.isArray(E.data)&&(A=E.data),s&&w.relatedTo1)try{let I;w.relatedType1==="Lead"?I=await ce.get(`/leads/get/${w.relatedTo1}`):w.relatedType1==="Account"&&(I=await ce.get(`/accounts/get/${w.relatedTo1}`)),I&&I.data&&(A.some(F=>String(F.id)===String(w.relatedTo1))||(A=[I.data,...A]))}catch(I){console.error("Error fetching specific related item:",I)}p(A)}catch(E){console.error("Error fetching relatedTo1 data:",E),p([])}};w.relatedType1&&_()},[w.relatedType1,C,s,w.relatedTo1]),h.useEffect(()=>{const _=async()=>{try{if(y([]),w.relatedType1==="Account"&&w.relatedTo1){let E;w.relatedType2==="Contact"?E=await ce.get(`/contacts/from-acc/${w.relatedTo1}`):w.relatedType2==="Deal"&&(E=await ce.get(`/deals/from-acc/${w.relatedTo1}`)),E&&Array.isArray(E.data)?y(E.data):y([])}else y([])}catch(E){console.error("Error fetching relatedTo2 data:",E),y([])}};w.relatedType2&&_()},[w.relatedType2,w.relatedTo1,w.relatedType1]);const N=_=>{const{name:E,value:A}=_.target;v(I=>{const z={...I,[E]:A};return E==="relatedType1"&&(I.relatedType1!==A&&(z.relatedTo1=""),A==="Lead"?(z.relatedType2=null,z.relatedTo2=null,y([])):A==="Account"&&(z.relatedType2="Contact",z.relatedTo2="")),E==="relatedType2"&&I.relatedType2!==A&&(z.relatedTo2=""),z})},[S,T]=h.useState(!1),k=_=>{if(_.preventDefault(),T(!0),w.status==="--"){q.warn("Please select a valid status.");return}const E=w.subject;if(!E||E.trim()===""){q.error("Subject is required.");return}if(!w.assignedTo){q.error("Assigned To is required.");return}if(!w.relatedTo1){q.error(`Please select a ${w.relatedType1||"Lead/Account"}.`);return}r?r(w):(console.log("Meeting Scheduled:",w),e())};return n.jsx("div",{id:"modalBackdrop",onClick:_=>_.target.id==="modalBackdrop"&&e(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-60 p-2 sm:p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-3 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[n.jsx("button",{onClick:e,className:"absolute top-3 right-3 sm:top-4 sm:right-4 text-gray-500 hover:text-black transition",children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-lg sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 text-center",children:s?"Edit Meeting":"Schedule Meeting"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4 text-sm",onSubmit:k,noValidate:!0,children:[n.jsx(tb,{label:"Subject",name:"subject",value:w.subject,onChange:N,placeholder:"e.g. Meeting with Client",required:!0,isSubmitted:S,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col w-full",children:[n.jsxs("select",{name:"relatedType1",onChange:N,value:w.relatedType1||"Lead",className:"w-full outline-none cursor-pointer mb-1 rounded p-2 text-gray-700 disabled:text-gray-400",disabled:i,children:[n.jsx("option",{value:"Lead",children:"Lead"}),n.jsx("option",{value:"Account",children:"Account"})]}),n.jsx(W_,{items:Array.isArray(f)?f:[],disabled:i,value:w.relatedTo1??"",placeholder:`Search ${w.relatedType1||"here"}...`,getLabel:_=>w.relatedType1==="Lead"?_.title:_.name??"",onChange:_=>v(E=>({...E,relatedTo1:_})),required:!0,isSubmitted:S})]}),n.jsxs("div",{className:"flex flex-col w-full",children:[n.jsxs("select",{name:"relatedType2",onChange:N,value:w.relatedType2||"Contact",className:"w-full outline-none cursor-pointer mb-1 rounded p-2 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:i||w.relatedType1==="Lead",children:[n.jsx("option",{value:"Contact",children:"Contact"}),n.jsx("option",{value:"Deal",children:"Deal"})]}),n.jsx(W_,{items:Array.isArray(x)?x:[],value:w.relatedTo2??"",placeholder:w.relatedType1==="Lead"?"":x?.length?`Search ${w.relatedType2}...`:`No ${w.relatedType2} data found`,getLabel:_=>w.relatedType2==="Contact"?`${_.first_name??""} ${_.last_name??""}`.trim():_.name??"",onChange:_=>v(E=>({...E,relatedTo2:_})),disabled:w.relatedType1==="Lead"})]}),n.jsx(tb,{label:"Location",name:"location",className:"md:col-span-2",value:w.location,onChange:N,disabled:i}),n.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[n.jsx(tb,{label:"Start Time",name:"startTime",type:"datetime-local",value:w.startTime,onChange:N,disabled:i}),n.jsx(tb,{label:"End Time",name:"endTime",type:"datetime-local",value:w.endTime,onChange:N,disabled:i})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),n.jsx(W_,{items:Array.isArray(l)?l:[],value:w.assignedTo??"",placeholder:"Search an account...",getLabel:_=>`${_.first_name} ${_.last_name}`,onChange:_=>v(E=>({...E,assignedTo:_})),disabled:C==="Sales",required:!0,isSubmitted:S})]}),n.jsx(CRe,{label:"Status",name:"status",value:w.status,onChange:N,options:["--","Planned","Held","Not held"].map(_=>({value:_,label:_.replace("_"," ")})),disabled:i}),n.jsx(SRe,{label:"Notes",name:"notes",value:w.notes,onChange:N,rows:3,className:"md:col-span-2",disabled:i}),n.jsxs("div",{className:"md:col-span-2 flex flex-col sm:flex-row justify-end gap-2 mt-4",children:[n.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Meeting":"Save Meeting"})]})]})]})})};function tb({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 outline-none disabled:bg-gray-100
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function CRe({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:l=!1,className:o="",isSubmitted:c=!1}){const d=c&&i&&!a;return n.jsxs("div",{className:o,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",i&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:l,hasError:d,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(u=>n.jsx("option",{value:u.value,children:u.label},u.value))})]})}function SRe({label:e,name:t,value:a,onChange:s,placeholder:r,required:i=!1,disabled:l=!1,className:o="",rows:c=3}){return n.jsxs("div",{className:o,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,required:i,disabled:l,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function W_({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,required:o=!1,isSubmitted:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),y=e.find(N=>String(N.id)===String(t)),w=y?s(y):"",v=o&&c&&!t,C=h.useMemo(()=>{const N=f.trim().toLowerCase();return(N?e.filter(T=>(s(T)||"").toLowerCase().includes(N)):e).slice(0,l)},[e,f,s,l]);return h.useEffect(()=>{const N=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:w,placeholder:r,onFocus:()=>!i&&u(!0),onChange:N=>{p(N.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${v?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:C.length>0?C.map(N=>{const S=String(N.id),T=s(N),k=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:T||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}const ad=({meeting:e,onClose:t,onEdit:a,onDelete:s,onStatusUpdate:r})=>{yt();const[i,l]=h.useState("Overview"),o=y=>{const w=(y||"").toUpperCase();return w==="PLANNED"||w==="IN PROGRESS"?"PLANNED":w==="HELD"||w==="DONE"?"HELD":w==="NOT HELD"?"NOT_HELD":"PLANNED"},c=y=>{const w=(y||"").toUpperCase();return w==="PLANNED"?"PLANNED":w==="HELD"?"HELD":w==="NOT HELD"||w==="NOT_HELD"?"NOT HELD":"PENDING"},[d,u]=h.useState(o(e?.status||"PENDING")),[f,p]=h.useState(!1);if(!e)return null;const x=y=>{const w=(y||"").toUpperCase(),v=w==="PLANNED"?"PENDING":w==="HELD"?"COMPLETED":w==="NOT_HELD"?"CANCELLED":w;switch(w){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:switch(v){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}}};return n.jsx(n.Fragment,{children:n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Meeting"}),n.jsx("button",{onClick:t,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Vn,{size:25})})]}),n.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:e.subject||"Meeting"}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${x(o(e.status))}`,children:o(e.status||"PENDING").replace("_"," ")})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",onClick:()=>{a&&a(e)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(oa,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",onClick:()=>{s&&s(e)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(zt,{className:"mr-2"}),"Delete"]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(y=>n.jsx("button",{onClick:()=>l(y),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${i===y?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:y},y))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[i==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Start Time:"}),n.jsx("p",{children:e.start_time?new Date(e.start_time).toLocaleString():"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"End Time:"}),n.jsx("p",{children:e.end_time?new Date(e.end_time).toLocaleString():"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Meeting Title:"}),n.jsx("p",{children:e.subject||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Location:"}),n.jsx("p",{children:e.location||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsxs("p",{children:[e.meet_assign_to.first_name," ",e.meet_assign_to.last_name]})]}),e.lead&&n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Lead:"}),n.jsx("p",{children:e.lead.title})]}),e.account&&n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Account:"}),n.jsx("p",{children:e.account.name})]}),e.contact&&n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact:"}),n.jsxs("p",{children:[e.contact.first_name," ",e.contact.last_name]})]}),e.deal&&n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Deal:"}),n.jsx("p",{children:e.deal.name})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:o(e.status||"PENDING").replace("_"," ")})]})]})}),i==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Meeting Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:e.notes||"No notes available."})]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:d,onChange:y=>u(y.target.value),children:[n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),n.jsx("button",{onClick:async()=>{if(!r||!e?.id)return;const y=c(d);if(o(e.status)!==d){p(!0);try{await r(e.id,y)}catch(w){console.error("Failed to update status:",w)}finally{p(!1)}}},disabled:d===e.status||f,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${d===e.status||f?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:f?"Updating...":"Update"})]})]})]})]})})})},NZ=e=>e?e.toUpperCase():"",nb=e=>{const t=NZ(e);return t==="PLANNED"||t==="IN PROGRESS"?"PLANNED":t==="HELD"||t==="DONE"?"HELD":t==="NOT_HELD"||t==="NOT HELD"?"NOT_HELD":"PLANNED"},_Re=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},ARe=e=>{const t=NZ(e);switch(t==="PLANNED"?"PENDING":t==="HELD"?"COMPLETED":t==="NOT_HELD"?"CANCELLED":t){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},V_={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},L7=()=>{const e=yt(),t=Yt(),[a]=Ds(),s=a.get("id"),r=t.pathname==="/admin/meetings/info";h.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[i,l]=h.useState([]),[o,c]=h.useState(!1),[d,u]=h.useState([]),[f,p]=h.useState(""),[x,y]=h.useState("Filter by Status"),[w,v]=h.useState(!1),[C,N]=h.useState(null),[S,T]=h.useState(1),[k,_]=h.useState(10),[E,A]=h.useState(V_),[I,z]=h.useState(!1),[F,D]=h.useState(null),[M,W]=h.useState(!1),[Z,R]=h.useState(null),[Q,Y]=h.useState(!1),[oe,re]=h.useState([]),[ee,H]=h.useState(null);h.useEffect(()=>{const Te=t.state?.openMeetingModal,He=t.state?.initialMeetingData?.relatedTo||a.get("id"),Ye=t.state?.meetingID;Te||He?(v(!0),t.state?.initialMeetingData&&A(B=>({...B,...t.state.initialMeetingData})),e(t.pathname,{replace:!0,state:{}})):Ye&&(H(Ye),e(t.pathname,{replace:!0,state:{}}))},[t,a,e]),h.useEffect(()=>{if(ee&&i.length>0&&!o){const Te=i.find(He=>He.id===ee);Te?N(Te):q.error("Meeting not found."),H(null)}},[ee,i,o]);const ye=async()=>{if(s&&r){const Te=sessionStorage.getItem("meetingDetailData");if(Te)try{const He=JSON.parse(Te);if(He.id===parseInt(s)){N(He),sessionStorage.removeItem("meetingDetailData");return}}catch(He){console.error(He)}}c(!0);try{const Te=await ce.get("/meetings/admin/fetch-all"),Ye=[...Array.isArray(Te.data)?Te.data:[]].sort((B,fe)=>{const Se=B?.createdAt?new Date(B.createdAt).getTime():0;return(fe?.createdAt?new Date(fe.createdAt).getTime():0)-Se});if(l(Ye),s&&!C){const B=Ye.find(fe=>fe.id===parseInt(s));B&&N(B)}console.log(Te.data)}catch{q.error("Failed to load meetings.")}finally{c(!1)}},te=async()=>{try{const Te=await ce.get("/users/all");u(Array.isArray(Te.data)?Te.data:[])}catch(Te){console.error(Te)}};h.useEffect(()=>{ye(),te()},[]);const ve=Te=>p(Te.target.value),je=Te=>{if(Te.target.checked){const He=pe.map(Ye=>Ye.id);re(He)}else re([])},Oe=Te=>{re(He=>He.includes(Te)?He.filter(Ye=>Ye!==Te):[...He,Te])},$e=h.useMemo(()=>{const Te=f.trim().toLowerCase(),He=x.trim().toUpperCase();return i.filter(Ye=>{const B=[Ye?.activity,Ye?.description,Ye?.relatedTo,Ye?.assignedTo],fe=Te===""||B.some(de=>de&&de.toString().toLowerCase().includes(Te)),Se=He==="FILTER BY STATUS"||nb(Ye.status||"PENDING")===He;return fe&&Se})},[i,f,x]);h.useEffect(()=>{T(1)},[f,x,k]);const pe=h.useMemo(()=>{const Te=(S-1)*k;return $e.slice(Te,Te+k)},[$e,S,k]),Me=()=>{v(!1),A(V_),z(!1),D(null),W(!1)},Le=()=>{A(V_),z(!1),D(null),v(!0)},he=Te=>{let He="";if(Te.meet_assign_to?.id)He=String(Te.meet_assign_to.id);else if(Te.assignedTo){const Re=d.find(ct=>`${ct.first_name} ${ct.last_name}`===Te.assignedTo);He=Re?String(Re.id):""}const Ye=Re=>{if(!Re)return"";try{const ct=new Date(Re),Ie=ct.getTimezoneOffset()*6e4;return new Date(ct.getTime()-Ie).toISOString().slice(0,16)}catch{return""}};let B="Lead",fe="",Se="Contact",de="";if(Te.lead)B="Lead",fe=String(Te.lead.id);else if(Te.account)B="Account",fe=String(Te.account.id),Te.contact?(Se="Contact",de=String(Te.contact.id)):Te.deal&&(Se="Deal",de=String(Te.deal.id));else if(Te.relatedType||Te.related_type){const Re=Te.relatedType||Te.related_type,ct=Te.related_to||Te.relatedToId;Re==="Lead"?(B="Lead",fe=String(ct)):(B="Account",fe=Te.account_id?String(Te.account_id):"")}const ke={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},se=nb(Te.status),We=ke[se]||"Planned";A({subject:Te.subject||Te.activity||"",location:Te.location||"",startTime:Ye(Te.start_time||Te.startTime),endTime:Ye(Te.end_time||Te.endTime),status:We,notes:Te.description||Te.notes||"",assignedTo:He,relatedType1:B,relatedTo1:fe,relatedType2:Se,relatedTo2:de}),z(!0),D(Te.id),N(null),v(!0)},ae=Te=>{if(!Te.subject?.trim())return q.error("Subject is required.");if(!Te.startTime)return q.error("Start time is required.");if(Te.endTime&&!(new Date(Te.endTime)-new Date(Te.startTime)>0))return q.error("End time must be after start time.");Te.relatedType1,Te.relatedTo1,Te.relatedType1==="Account"&&Te.relatedType2&&Te.relatedTo2&&(Te.relatedType2,Te.relatedTo2);const He={...Te,assignedTo:parseInt(Te.assignedTo),relatedTo1:parseInt(Te.relatedTo1),relatedTo2:parseInt(Te.relatedTo2)},Ye=I&&F?"update":"create";R({title:Ye==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${Ye} "${He.subject}"?`,confirmLabel:Ye==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:Ye,payload:He,targetId:F,name:He.subject}})},Ae=async()=>{if(!Z?.action)return;const{type:Te,payload:He,targetId:Ye,name:B}=Z.action;console.log(He),Y(!0);try{if(Te==="create")W(!0),await ce.post("/meetings/create",He),q.success(`Meeting "${B}" created.`),Me(),await ye();else if(Te==="update")W(!0),await ce.put(`/meetings/${Ye}`,He),q.success(`Meeting "${B}" updated.`),Me(),await ye();else if(Te==="delete")await ce.delete(`/meetings/${Ye}`),q.success(`Meeting "${B}" deleted.`),C?.id===Ye&&N(null),await ye();else if(Te==="bulk-delete"){const{meeting_ids:fe}=Z.action;await ce.delete("/meetings/admin/bulk-delete",{data:{meeting_ids:fe}}),q.success(`${fe.length} meetings deleted.`),re([]),await ye()}}catch(fe){const Se=fe.response?.data?.detail||"Action failed.";q.error(typeof Se=="string"?Se:JSON.stringify(Se)),console.error(Se)}finally{W(!1),Y(!1),R(null)}},ge=async()=>{oe.length!==0&&R({title:"Delete Meetings",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:oe.length})," selected meetings? This action cannot be undone."]}),confirmLabel:`Delete ${oe.length} Meeting(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",meeting_ids:oe}})},Be=Te=>{R({title:"Delete Meeting",message:`Permanently delete "${Te.activity}"?`,confirmLabel:"Delete",variant:"danger",action:{type:"delete",targetId:Te.id,name:Te.activity}})},qe=async(Te,He)=>{try{await ce.put(`/meetings/${Te}`,{status:He}),q.success("Status updated"),ye(),N(null)}catch{q.error("Failed to update status")}};return r&&s?C?n.jsx(ad,{meeting:C,onClose:()=>{N(null),e("/admin/dashboard")},onEdit:he,onDelete:Be,onStatusUpdate:qe}):n.jsx(Rt,{message:"Loading meeting..."}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[o&&n.jsx(Rt,{message:"Loading meetings..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[n.jsx(Ct,{className:"mr-2 text-blue-600"})," Meetings"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:Le,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[n.jsx(dn,{className:"mr-2"})," Add Meeting"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[n.jsx(Bt,{className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search meetings",value:f,onChange:ve,className:"w-full outline-none"})]}),n.jsxs("select",{value:x,onChange:Te=>y(Te.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[n.jsx("option",{children:"Filter by Status"}),n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:pe.length>0&&oe.length===pe.length,onChange:je,className:"cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Start Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:oe.length>0?n.jsx("button",{onClick:ge,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${oe.length} selected items`,children:n.jsx(zt,{size:18})}):n.jsx("span",{className:"text-gray-400",children:"Actions"})})]})}),n.jsx("tbody",{children:pe.length>0?pe.map(Te=>n.jsxs("tr",{onClick:()=>N(Te),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:He=>He.stopPropagation(),children:n.jsx("input",{type:"checkbox",checked:oe.includes(Te.id),onChange:()=>Oe(Te.id),className:"cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:Te.subject}),n.jsxs("td",{className:"py-3 px-4",children:[Te.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Te.lead.title}),Te.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Te.account.name}),Te.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[Te.contact.first_name," ",Te.contact.last_name]}),Te.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Te.deal.name})]}),n.jsx("td",{className:"py-3 px-4",children:_Re(Te.start_time)}),n.jsxs("td",{className:"py-3 px-4",children:[Te.meet_assign_to.first_name," ",Te.meet_assign_to.last_name]}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ARe(nb(Te.status))}`,children:nb(Te.status).replace("_"," ")})}),n.jsx("td",{className:"py-3 px-4 text-center"})]},Te.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),n.jsx(en,{totalItems:$e.length,pageSize:k,currentPage:S,onPrev:()=>T(Te=>Math.max(1,Te-1)),onNext:()=>T(Te=>Math.min(Te+1,Math.ceil($e.length/k)||1)),onPageSizeChange:_,label:"meetings"}),w&&n.jsx(Gj,{onClose:Me,formData:E,setFormData:A,isEditing:I,onSubmit:ae,isSubmitting:M||Q,users:d}),C&&n.jsx(ad,{meeting:C,onClose:()=>N(null),onEdit:he,onDelete:Be,onStatusUpdate:qe}),Z&&n.jsx(ERe,{open:!0,title:Z.title,message:Z.message,confirmLabel:Z.confirmLabel,variant:Z.variant,onConfirm:Ae,onCancel:()=>R(null),loading:Q})]})};function ERe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{onClick:c,disabled:l,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),n.jsx("button",{onClick:o,disabled:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${d}`,children:l?"...":s})]})]})})}function TRe(){const{user:e,mutate:t}=Kt(),[a,s]=h.useState(""),[r,i]=h.useState(""),[l,o]=h.useState("January"),[c,d]=h.useState(!1),[u,f]=h.useState({type:"",text:""}),p=["January","February","March","April","May","June","July","August","September","October","November","December"];h.useEffect(()=>{e?.company&&(e.company.company_name&&s(e.company.company_name),e.company.currency&&i(e.company.currency),e.company.quota_period&&o(e.company.quota_period))},[e]);const x=async w=>{w.preventDefault(),d(!0),f({type:"",text:""});try{await ce.put("/company/update-name",{company_name:a,currency:r,quota_period:l}),t&&await t(),f({type:"success",text:"Company settings updated successfully!"})}catch(v){console.error("Update error:",v);const C=v.response?.data?.detail||"Failed to update settings.";f({type:"error",text:C})}finally{d(!1)}},y=["CEO","ADMIN"].includes(e?.role?.toUpperCase());return n.jsxs("div",{className:"max-w-2xl mx-auto mt-10 bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[n.jsxs("div",{className:"bg-[#fbbf24] px-6 py-4",children:[n.jsxs("h2",{className:"text-gray-900 font-bold text-xl flex items-center gap-2",children:[n.jsx(Qt,{})," Company Details"]}),n.jsx("p",{className:"text-gray-700 text-sm",children:"Manage your organization's identity and fiscal settings"})]}),n.jsxs("form",{onSubmit:x,className:"p-6 space-y-6",children:[!y&&n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-amber-50 text-amber-700 rounded-lg text-sm border border-amber-200",children:[n.jsx(Rf,{}),n.jsx("span",{children:"You only have view-access. Changes can only be made by an Admin or CEO."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Company Name"}),n.jsx("input",{type:"text",value:a,onChange:w=>s(w.target.value),disabled:!y||c,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fbbf24] focus:border-transparent outline-none transition disabled:bg-gray-50 disabled:cursor-not-allowed",placeholder:"Enter company name",required:!0})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[n.jsx(Ct,{className:"text-gray-500"})," Fiscal Year Start"]}),n.jsxs("div",{className:"relative",children:[n.jsx("select",{value:l,onChange:w=>o(w.target.value),disabled:!y||c,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fbbf24] focus:border-transparent outline-none appearance-none bg-white disabled:bg-gray-50 cursor-pointer",children:p.map(w=>n.jsx("option",{value:w,children:w},w))}),n.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none text-gray-500",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select the month your sales year begins."})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[n.jsx(zf,{className:"text-gray-500"})," Currency"]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("label",{className:`flex-1 flex items-center justify-center gap-1 p-2 border rounded-lg cursor-pointer transition-all ${r===""?"bg-amber-50 border-[#fbbf24] text-amber-900 font-medium ring-1 ring-[#fbbf24]":"border-gray-200 hover:bg-gray-50 text-gray-600"} ${!y||c?"opacity-50 cursor-not-allowed":""}`,children:[n.jsx("input",{type:"radio",name:"currency",value:"",checked:r==="",onChange:()=>i(""),disabled:!y||c,className:"hidden"}),n.jsx("span",{className:"text-lg font-bold",children:""})," PHP"]}),n.jsxs("label",{className:`flex-1 flex items-center justify-center gap-1 p-2 border rounded-lg cursor-pointer transition-all ${r==="$"?"bg-amber-50 border-[#fbbf24] text-amber-900 font-medium ring-1 ring-[#fbbf24]":"border-gray-200 hover:bg-gray-50 text-gray-600"} ${!y||c?"opacity-50 cursor-not-allowed":""}`,children:[n.jsx("input",{type:"radio",name:"currency",value:"$",checked:r==="$",onChange:()=>i("$"),disabled:!y||c,className:"hidden"}),n.jsx("span",{className:"text-lg font-bold",children:"$"})," USD"]})]})]})]}),u.text&&n.jsx("div",{className:`p-3 rounded-lg text-sm border transition-all ${u.type==="success"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"}`,children:u.text}),n.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-100",children:y&&n.jsxs("button",{type:"submit",disabled:c,className:"flex items-center gap-2 bg-[#1e293b] text-white px-6 py-2 rounded-lg font-medium hover:bg-[#334155] disabled:opacity-50 transition shadow-md active:scale-95",children:[n.jsx(Fk,{}),c?"Updating...":"Save Settings"]})})]})]})}function kRe({toggleSidebar:e}){const[t,a]=h.useState(!1),[s,r]=h.useState(!1),[i,l]=h.useState([]),[o,c]=h.useState(0),d=h.useRef(null),u=h.useRef(null),f=Yt(),p=yt(),{logout:x}=Bs(),{user:y,fetchUser:w}=Kt(),C={"/sales/overview":"Dashboard","/sales/accounts":"Accounts","/sales/contacts":"Contacts","/sales/leads":"Leads","/sales/deals":"Deals","/sales/quotes":"Quotes","/sales/targets":"Targets","/sales/reports":"Reports","/sales/tasks":"Tasks"}[f.pathname]||"Sales Panel";h.useEffect(()=>{w();const _=()=>{w()};return window.addEventListener("userProfileUpdated",_),()=>{window.removeEventListener("userProfileUpdated",_)}},[]);const N=_=>{const E=String(_.action||_.type||"").toLowerCase(),A=String(_.title||_.description||"").toLowerCase(),I=E.includes("create"),z=E.includes("update");return A.includes("task")?"task_assignment":A.includes("territory")?"territory_assignment":A.includes("lead")?I?"lead_assignment":"lead_update":A.includes("contact")?I?"contact_assignment":"contact_update":A.includes("deal")?I?"deal_assignment":"deal_update":A.includes("account")?I?"account_assignment":"account_update":"info"},S=_=>{const E={..._};switch(E.read=!!E.read,E.type){case"territory_assignment":E.title=E.title||`You have been assigned to ${E.territoryName||"a territory"}`;break;case"lead_assigned":E.type="lead_assignment",E.title=E.title||`New lead assigned: ${E.leadName||E.company||"Lead"}`;break;case"lead_assignment":E.title=E.title||`New lead assigned: ${E.leadName||E.company||"Lead"}`;break;case"lead_update":E.title=E.title||`Lead updated: ${E.leadName||E.company||"Lead"}`;break;case"task_assignment":E.title=E.title||`New Task Assigned: ${E.taskTitle||"Task"}`;break;case"contact_assignment":E.title=E.title||`New contact assigned: ${E.contactName||E.contact||"Contact"}`;break;case"contact_update":E.title=E.title||`Contact updated: ${E.contactName||E.contact||"Contact"}`;break;case"deal_assignment":E.title=E.title||`New deal assigned: ${E.dealName||E.name||"Deal"}`;break;case"deal_update":E.title=E.title||`Deal updated: ${E.dealName||E.name||"Deal"}`;break;case"account_assignment":E.title=E.title||`New account assigned: ${E.accountName||E.name||"Account"}`;break;case"account_update":E.title=E.title||`Account updated: ${E.accountName||E.name||"Account"}`;break;default:E.title=E.title||"New Notification"}return E},T=_=>{switch(_.type){case"task_assignment":p(`/sales/hub/${_.taskId||_.task_id||""}`);break;case"lead_assignment":case"lead_update":p(`/sales/leads/${_.leadId||_.lead_id||""}`);break;case"contact_assignment":case"contact_update":p(`/sales/contacts/${_.contactId||_.contact_id||""}`);break;case"deal_assignment":case"deal_update":p(`/sales/deals/${_.dealId||_.deal_id||""}`);break;case"account_assignment":case"account_update":p(`/sales/accounts/${_.accountId||_.account_id||""}`);break;default:p("/sales/overview")}},k=async _=>{if(_.read){T(_);return}try{await ce.patch(`/logs/mark-read/${_.id}`),l(E=>E.map(A=>A.id===_.id?{...A,read:!0}:A)),c(E=>E>0?E-1:0),T(_)}catch(E){console.error("Failed to mark notification as read",E),T(_)}};return h.useEffect(()=>{if(!y?.id)return;const _=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",E=window.location.protocol==="https:"?"wss:":"ws:",A=_?"localhost:8000":window.location.host,I=`${E}//${A}/ws/notifications?user_id=${y.id}`,z=new WebSocket(I);return z.onopen=()=>console.log("WS Connected to:",I),z.onmessage=F=>{const D=JSON.parse(F.data),M=S(D);l(W=>[M,...W]),c(W=>W+1)},z.onclose=()=>console.log("WS Disconnected"),z.onerror=F=>console.error("WS Error",F),()=>z.close()},[y?.id]),h.useEffect(()=>{const _=async()=>{try{const A=((await ce.get("/logs/read-all")).data||[]).map(I=>S({id:I.id,type:I.notif_type||I.notification_type||I.type||N(I),title:I.title||I.description,assignedBy:I.assignedBy||I.name,createdAt:I.createdAt||I.timestamp,read:I.is_read??I.read??!1,leadId:I.leadId||I.lead_id,taskId:I.taskId||I.task_id,contactId:I.contactId||I.contact_id,dealId:I.dealId||I.deal_id,accountId:I.accountId||I.account_id}));l(A),c(A.filter(I=>!I.read).length)}catch(E){console.error("Failed to load history notifications",E)}};y?.id&&_()},[y?.id]),h.useEffect(()=>{function _(E){d.current&&!d.current.contains(E.target)&&a(!1),u.current&&!u.current.contains(E.target)&&r(!1)}return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]),n.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:n.jsx(ex,{className:"text-2xl"})}),n.jsx("h1",{className:"text-lg sm:text-xl font-semibold text-gray-800 truncate max-w-[150px] sm:max-w-none",children:C})]}),n.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[n.jsxs("div",{className:"relative",ref:u,children:[n.jsxs("button",{onClick:()=>r(!s),className:"relative text-gray-600 hover:text-gray-800 transition",children:[n.jsx(Zp,{className:"text-xl sm:text-2xl"}),o>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] w-4 h-4 flex items-center justify-center rounded-full font-semibold",children:o})]}),s&&n.jsxs("div",{className:"absolute right-0 mt-3 w-80 bg-white rounded-xl shadow-lg border z-50 overflow-hidden animate-fade-in",children:[n.jsxs("div",{className:"p-3 border-b bg-gray-50 flex justify-between items-center",children:[n.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:"Notifications"}),i.length>0&&n.jsx("button",{onClick:()=>{l([]),c(0)},className:"text-xs text-blue-600 hover:underline",children:"Clear all"})]}),n.jsx("div",{className:"max-h-80 overflow-y-auto",children:i.length>0?i.map((_,E)=>n.jsxs("div",{onClick:()=>k(_),className:`p-4 border-b hover:bg-gray-50 cursor-pointer transition ${_.read?"bg-gray-50":"bg-white"}`,children:[n.jsxs("div",{className:"flex justify-between items-center mb-1",children:[n.jsx("span",{className:`text-[10px] px-2 py-1 rounded-full font-semibold uppercase
                            ${_.type==="task_assignment"?"bg-purple-100 text-purple-700":_.type==="lead_assignment"||_.type==="lead_update"?"bg-green-100 text-green-700":_.type==="contact_assignment"||_.type==="contact_update"?"bg-amber-100 text-amber-700":_.type==="deal_assignment"||_.type==="deal_update"?"bg-indigo-100 text-indigo-700":_.type==="account_assignment"||_.type==="account_update"?"bg-cyan-100 text-cyan-700":_.type==="territory_assignment"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:_.type==="task_assignment"?"Task":_.type==="lead_assignment"?"Lead":_.type==="lead_update"?"Lead Update":_.type==="contact_assignment"?"Contact":_.type==="contact_update"?"Contact Update":_.type==="deal_assignment"?"Deal":_.type==="deal_update"?"Deal Update":_.type==="account_assignment"?"Account":_.type==="account_update"?"Account Update":_.type==="territory_assignment"?"Territory":"Info"}),!_.read&&n.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"font-medium text-gray-800 text-sm",children:_.title}),n.jsx("span",{className:"text-xs text-gray-600 mt-0.5",children:_.assignedBy?`Assigned by ${_.assignedBy}`:"System"}),n.jsx("span",{className:"text-[11px] text-gray-400 mt-1",children:_.createdAt?new Date(_.createdAt).toLocaleString():""})]})]},_.id??E)):n.jsx("div",{className:"p-6 text-center text-gray-500 text-sm",children:"No new notifications"})})]})]}),n.jsxs("div",{className:"relative",ref:d,children:[n.jsxs("button",{onClick:()=>a(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[n.jsx("img",{src:y?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 aspect-square object-cover rounded-full"}),n.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[y?.first_name," ",y?.last_name]})]}),t&&n.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4",children:[n.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[n.jsx("img",{src:y?.profile_picture||"https://via.placeholder.com/80",alt:"Profile",className:"w-16 h-16 rounded-full object-cover"}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[y?.first_name," ",y?.middle_name," ",y?.last_name]}),n.jsx("p",{className:"text-[11px] text-gray-600 font-light w-full truncate",children:"Sales"})]})]}),n.jsxs("div",{className:"mt-4 space-y-1 px-4 text-left",children:[n.jsx("button",{className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-2 rounded text-left",onClick:()=>{p("/sales/manage-account"),a(!1)},children:"Manage Your Account"}),n.jsx("div",{className:"border-t border-gray-200 my-2"}),n.jsx("button",{onClick:x,className:"block w-full text-sm text-red-600 hover:text-red-700 hover:bg-gray-50 py-2 rounded text-left",children:"Logout"})]})]})]})]})]})}function LRe(){const[e,t]=h.useState(!1),[a,s]=h.useState(!1),{user:r}=Kt(),[i,l]=h.useState(!1);h.useEffect(()=>{r&&console.log("Fetched user:",r)},[r]);const o=["/sales/overview","/sales/hub","/sales/accounts","/sales/contacts","/sales/leads","/sales/deals","/sales/quotes","/sales/targets"],c=Yt(),d=o.includes(c.pathname);h.useEffect(()=>{d&&l(!0)},[c.pathname]);const u="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",f="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition";return n.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[n.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
        ${e?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[n.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[n.jsxs("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:[" Sari-Sari.CRM"," ",n.jsx("span",{className:"text-[12px] text-gray-700 font-medium align-bottom",children:"v2"})]}),r&&r.company&&n.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:r.company.company_name})]}),n.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[n.jsxs(Dt,{to:"/sales/overview",className:({isActive:p})=>p?u:f,children:[n.jsx(Jp,{})," Dashboard"]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>l(!i),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-lg"}),"Sales"]}),n.jsx(jt,{className:`transition-transform ${i?"rotate-180":""}`})]}),i&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(Dt,{to:"/sales/accounts",className:({isActive:p})=>p?u:f,children:[n.jsx(On,{})," Accounts"]}),n.jsxs(Dt,{to:"/sales/contacts",className:({isActive:p})=>p?u:f,children:[n.jsx(Jt,{})," Contacts"]}),n.jsxs(Dt,{to:"/sales/leads",className:({isActive:p})=>p?u:f,children:[n.jsx(Wn,{})," Leads"]}),n.jsxs(Dt,{to:"/sales/deals",className:({isActive:p})=>p?u:f,children:[n.jsx(Qt,{})," Deals"]}),n.jsxs(Dt,{to:"/sales/quotes",className:({isActive:p})=>p?u:f,children:[n.jsx(xn,{})," Quotes"]}),n.jsxs(Dt,{to:"/sales/targets",className:({isActive:p})=>p?u:f,children:[n.jsx(tr,{})," Targets"]})]})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!a),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(ws,{className:"text-lg"}),"Activity"]}),n.jsx(jt,{className:`transition-transform ${a?"rotate-180":""}`})]}),a&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(Dt,{to:"/sales/tasks",className:({isActive:p})=>p?u:f,children:[n.jsx(Gt,{})," Tasks"]}),n.jsxs(Dt,{to:"/sales/meetings",className:({isActive:p})=>p?u:f,children:[n.jsx(Ct,{})," Meetings"]}),n.jsxs(Dt,{to:"/sales/calls",className:({isActive:p})=>p?u:f,children:[n.jsx(Ls,{})," Calls"]}),n.jsxs(Dt,{to:"/sales/audit",className:({isActive:p})=>p?u:f,children:[n.jsx(ws,{})," Audit"]})]})]}),n.jsx("div",{children:n.jsx(Dt,{to:"/sales/territory",className:({isActive:p})=>p?u:f,children:n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(zo,{className:"text-lg"}),"Territory"]})})}),n.jsxs(Dt,{to:"/sales/manage-account",className:({isActive:p})=>p?u:f,children:[n.jsx(Jt,{className:"text-lg"}),n.jsx("span",{children:"Manage Account"})]})]}),n.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),e&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>t(!1)}),n.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[n.jsx(kRe,{toggleSidebar:()=>t(!0)}),n.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:n.jsx(Gp,{})})]})]})}const PRe=e=>n.jsx(Bt,{...e}),DRe=e=>n.jsx(zf,{...e}),ORe=e=>n.jsx(Bk,{...e}),jZ=e=>n.jsx(zs,{...e}),MRe=e=>n.jsx(Xp,{...e}),IRe=e=>n.jsx(Dw,{...e}),$Re=e=>n.jsx(Ct,{...e}),RRe=e=>n.jsx(At,{...e}),zRe=e=>n.jsx(Mw,{...e}),CZ=e=>n.jsx(Ow,{...e}),SZ=e=>n.jsx(On,{...e}),_Z=e=>n.jsx(Jt,{...e}),FRe=e=>n.jsx(Wn,{...e}),URe=e=>n.jsx(Qt,{...e}),BRe=e=>n.jsx(xn,{...e}),HRe=e=>n.jsx(tr,{...e}),GRe=e=>n.jsx(ba,{...e}),WRe=e=>n.jsx(Ct,{...e}),VRe=e=>n.jsx(Ls,{...e}),qRe=e=>n.jsx(zo,{...e}),YRe=e=>n.jsx(ws,{...e}),AZ=e=>`P ${new Intl.NumberFormat("en-PH",{minimumFractionDigits:0}).format(e)}`,QRe=e=>{switch(e){case"Negotiation":return{text:"text-purple-700",bg:"bg-purple-100"};case"Proposal":return{text:"text-red-700",bg:"bg-red-100"};case"Qualification":return{text:"text-yellow-700",bg:"bg-yellow-100"};case"Prospecting":return{text:"text-blue-700",bg:"bg-blue-100"};case"Closed Won":return{text:"text-green-700",bg:"bg-green-100"};case"Closed Lost":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},KRe=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},XRe=e=>{switch(e){case"call":return{Icon:RRe,color:"text-red-500",bgColor:"bg-red-100"};case"qualification":return{Icon:zRe,color:"text-green-600",bgColor:"bg-green-100"};default:return{Icon:$Re,color:"text-blue-500",bgColor:"bg-blue-100"}}},ZRe=e=>{switch(e.toUpperCase()){case"HIGH":return{text:"text-red-700",bg:"bg-red-100"};case"LOW":return{text:"text-blue-700",bg:"bg-blue-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},JRe=({searchQuery:e,onSearchChange:t,searchResults:a,onSearchResultClick:s})=>{const r=yt(),[i,l]=h.useState(!1),o=h.useRef(null),c=[{icon:SZ,label:"Account"},{icon:_Z,label:"Contact"},{icon:FRe,label:"Leads"},{icon:URe,label:"Deals"},{icon:BRe,label:"Quotes"},{icon:HRe,label:"Target"},{icon:GRe,label:"Task"},{icon:WRe,label:"Meeting"},{icon:VRe,label:"Call"},{icon:YRe,label:"Audit"},{icon:qRe,label:"Territory"}];h.useEffect(()=>{const f=p=>{o.current&&!o.current.contains(p.target)&&l(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const d=f=>{t(f.target.value),l(f.target.value.trim().length>0)},u=f=>{s&&s(f),l(!1)};return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 sm:p-4 flex flex-col items-start space-y-4 w-full",children:[n.jsxs("div",{className:"w-full flex justify-center relative",ref:o,children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg lg:mt-3 px-4 py-2 w-full max-w-md md:max-w-lg lg:max-w-2xl focus-within:ring-2 focus-within:ring-blue-500 transition duration-150",children:[n.jsx(PRe,{size:20,className:"text-gray-400 mr-3 flex-shrink-0"}),n.jsx("input",{type:"text",placeholder:"Search Leads, Deals, or Accounts...",className:"focus:outline-none text-base w-full",value:e,onChange:d,onFocus:()=>e.trim().length>0&&l(!0)})]}),i&&Array.isArray(a)&&a.length>0&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:a.map((f,p)=>n.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition duration-150",onClick:()=>u(f),children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:f.name}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:f.type}),f.details&&n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:f.details})]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${f.type==="Lead"?"bg-blue-100 text-blue-600":f.type==="Deal"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:f.type})]})},p))}),i&&e.trim().length>0&&(!Array.isArray(a)||a.length===0)&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 p-4 text-center text-sm text-gray-500",children:"No results found"})]}),n.jsx("div",{className:"w-full overflow-x-auto lg:overflow-x-hidden scroll-smooth flex justify-center",children:n.jsx("div",{className:"flex flex-nowrap space-x-3 lg:space-x-4 xl:space-x-3 px-2 sm:px-0",children:c.map((f,p)=>n.jsxs("div",{className:"relative flex-shrink-0 group flex items-center justify-center",children:[n.jsx("button",{className:"p-3 text-gray-500 hover:text-gray-900 transition duration-150 rounded-full hover:bg-gray-100 focus:outline-none cursor-pointer","aria-label":f.label,title:f.label,onClick:()=>{switch(f.label){case"Account":r("/sales/accounts");break;case"Contact":r("/sales/contacts");break;case"Leads":r("/sales/leads");break;case"Deals":r("/sales/deals");break;case"Quotes":r("/sales/quotes");break;case"Target":r("/sales/targets");break;case"Task":r("/sales/tasks");break;case"Meeting":r("/sales/meetings");break;case"Call":r("/sales/calls");break;case"Audit":r("/sales/audit");break;case"Territory":r("/sales/territory");break;default:console.log(`Clicked ${f.label}`)}},children:n.jsx(f.icon,{size:24,className:"lg:scale-95"})}),n.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-1.5 bg-gray-900 text-white text-xs font-semibold rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-75 ease-in-out z-50 shadow-lg",children:[f.label,n.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]},p))})})]})},eze=({action:e,description:t,entity_type:a,entity_name:s,timestamp:r})=>{const i=yt(),l=u=>{if(!u)return"Unknown";const f=new Date(u),x=new Date-f,y=Math.floor(x/6e4),w=Math.floor(x/36e5),v=Math.floor(x/864e5);return y<1?"Just now":y<60?`${y} min ago`:w<24?`${w} hour${w>1?"s":""} ago`:v<7?`${v} day${v>1?"s":""} ago`:f.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},o=e||t||"Action",c=s||a||"System",d=l(r);return n.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i("/sales/audit"),children:[n.jsxs("p",{className:"text-sm text-gray-800 flex-grow font-medium",children:[o," ",n.jsxs("span",{className:"text-gray-500 italic text-xs",children:["(",c,")"]})]}),n.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-4",children:d})]})},tze=({logs:e,loading:t})=>{const a=yt();return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Recent Logs"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/sales/audit"),children:[n.jsx("span",{children:"See All"}),n.jsx(CZ,{size:14,className:"transform -rotate-45"})]})]}),e&&e.length>0?n.jsx("ul",{className:"space-y-1",children:e.slice(0,3).map((s,r)=>n.jsx(eze,{...s},r))}):n.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No recent logs"})]})},nze=({icon:e,title:t,value:a,color:s,bgColor:r,loading:i,onClick:l})=>n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l||(()=>console.log(`Clicked metric card: ${t}`)),children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:20})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a||0})]})]}),aze=({revenueData:e,loading:t})=>{const a=yt(),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=h.useMemo(()=>{if(console.log("=== RevenueChart calculateRevenueData ==="),console.log("revenueData:",e),console.log("revenueData length:",e?.length),!e||e.length===0){console.log("No revenue data, returning empty chart");const v=new Date;v.getFullYear();const C=v.getMonth(),N=[],S=[];for(let T=0;T<=C;T++)N.push(s[T]),S.push(0);return{labels:N,revenues:S,maxRevenue:0}}const o={};let c=0,d=0;console.log("Processing deals:",e.length),e.forEach((v,C)=>{const N=v.close_date||v.closeDate||null,S=N&&N!==null&&N!=="",T=v.stage||"",k=T.toUpperCase()==="CLOSED_WON"||T==="CLOSED_WON";let _=v.amount;_&&typeof _=="object"&&_.toString?_=parseFloat(_.toString()):_=parseFloat(_)||0;const E=_>0;if(k&&(d++,console.log(`Deal ${C+1} (CLOSED_WON):`,{id:v.id,name:v.name,stage:T,close_date:N,close_date_type:typeof N,amount:_,amount_type:typeof v.amount,hasCloseDate:S,hasAmount:E,willBeAdded:S&&E,allFields:Object.keys(v)})),S&&k&&E)try{let A=new Date(N);if(isNaN(A.getTime())){const I=String(N).split("T")[0];A=new Date(I+"T00:00:00")}if(isNaN(A.getTime()))console.warn(` Invalid date for deal ${v.id}:`,N,"Type:",typeof N);else{const I=A.getFullYear(),z=A.getMonth()+1,F=`${I}-${String(z).padStart(2,"0")}`;o[F]||(o[F]=0),o[F]+=_,c++,console.log(` Added deal ${v.id} to month ${F}: ${_}, total: ${o[F]}`),console.log(`  - Close date: ${N} -> Parsed: ${A.toISOString()} -> Month: ${F} (Year: ${I}, Month: ${z})`)}}catch(A){console.error("Error parsing deal date:",N,A)}else k&&console.warn(` Deal ${v.id} is CLOSED_WON but missing data:`,{hasCloseDate:S,hasAmount:E,closeDate:N,amount:_,originalAmount:v.amount})}),console.log("Summary:",{totalDeals:e.length,closedWonDeals:d,validDealsForGraph:c,monthlyRevenue:o});const u=Object.keys(o).map(v=>parseInt(v.split("-")[0])),f=u.length>0?[...new Set(u)].sort():[],p=new Date().getFullYear();new Date().getMonth();const x=[],y=[];for(let v=0;v<12;v++){const C=`${p}-${String(v+1).padStart(2,"0")}`;x.push(s[v]);const N=o[C]||0;y.push(N),N>0&&console.log(`Month ${s[v]} (${C}): ${N}`)}if(f.length>0){const v=Math.max(...f);if(v>p)for(let C=p+1;C<=v;C++)for(let N=0;N<12;N++){const S=`${C}-${String(N+1).padStart(2,"0")}`,T=o[S]||0;x.push(`${s[N]} ${C}`),y.push(T),T>0&&console.log(`Month ${s[N]} ${C} (${S}): ${T}`)}}const w=Math.max(...y,1);return console.log("Final chart data:",{labels:x,revenues:y,maxRevenue:w,hasData:y.some(v=>v>0)}),{labels:x,revenues:y,maxRevenue:w}},[e]),i=r.labels,l=r.revenues;return console.log("=== FINAL CHART DATA ==="),console.log("X Axis (Months):",i),console.log("Y Axis (Revenue):",l),console.log("Has any revenue > 0:",l.some(o=>o>0)),console.log("All revenue values:",l),console.log("Max revenue:",r.maxRevenue),n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Overview"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/sales/deals"),children:[n.jsx("span",{children:"See All"}),n.jsx(CZ,{size:14,className:"transform -rotate-45"})]})]}),n.jsx("div",{className:"h-80 relative flex-1 flex items-center justify-center p-6",children:n.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i&&i.length>0&&l&&l.length>0?n.jsx(BN,{xAxis:[{data:i,scaleType:"point"}],yAxis:[{valueFormatter:o=>o>=1e3?`${(o/1e3).toFixed(0)}k`:o.toString()}],series:[{data:l,showMark:!0,area:!0}],height:320,width:void 0,grid:{vertical:!0,horizontal:!0},margin:{top:40,right:40,bottom:50,left:50},sx:{width:"100%",maxWidth:"100%"}}):n.jsxs("div",{className:"text-center text-gray-500",children:[n.jsx("p",{className:"text-sm",children:"No revenue data available"}),n.jsx("p",{className:"text-xs mt-2",children:"Closed won deals with close dates will appear here"})]})})})]})},sze=({pipelineData:e,loading:t})=>{const a=yt(),s=l=>{const o=(l||"").toUpperCase(),c={PROSPECTING:{name:"Prospecting",color:"bg-blue-500"},QUALIFICATION:{name:"Qualification",color:"bg-yellow-500"},PROPOSAL:{name:"Proposal",color:"bg-orange-500"},NEGOTIATION:{name:"Negotiation",color:"bg-purple-500"},CLOSED_WON:{name:"Closed Won",color:"bg-green-500"},CLOSED_LOST:{name:"Closed Lost",color:"bg-red-500"}};if(c[o])return c[o];const d=["bg-blue-500","bg-yellow-500","bg-orange-500","bg-purple-500","bg-green-500","bg-red-500"],u=Math.abs(o.split("").reduce((f,p)=>f+p.charCodeAt(0),0))%d.length;return{name:l||"Unknown",color:d[u]}},i=(()=>{if(!e||e.length===0)return["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"].map(f=>{const p=s(f);return{stage:p.name,value:0,deals:0,color:p.color}});const l={};e.forEach(u=>{const f=u.stage||"PROSPECTING";l[f]||(l[f]={deals:0,value:0}),l[f].deals+=1,l[f].value+=parseFloat(u.amount||0)});const o=Math.max(...Object.values(l).map(u=>u.value),1),c=["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"],d=[];return c.forEach(u=>{const f=s(u),p=l[u]||{deals:0,value:0};d.push({stage:f.name,value:p.value,deals:p.deals,color:f.color,percentage:o>0?p.value/o*100:0})}),d})();return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Sales Pipeline"}),n.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:()=>a("/sales/deals"),children:"See All"})]}),n.jsx("div",{className:"space-y-4 flex-grow",children:i.slice(0,6).map(l=>n.jsxs("div",{className:"flex flex-col cursor-pointer hover:opacity-85 transition duration-150",onClick:()=>a("/sales/deals"),children:[n.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[n.jsx("span",{className:"font-medium text-gray-700",children:l.stage}),n.jsx("span",{className:"font-semibold text-gray-800",children:AZ(l.value)})]}),n.jsx("div",{className:"relative h-2 rounded-full bg-gray-200",children:n.jsx("div",{className:`absolute top-0 left-0 h-full rounded-full ${l.color}`,style:{width:`${Math.min(l.percentage,100)}%`}})}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[l.deals," Deals"]})]},l.stage))})]})},q_=({title:e,items:t,children:a,onSeeAll:s})=>{const r=yt(),i=()=>{if(s)s();else{const l={"Latest Leads":"/sales/leads","Latest Deals":"/sales/deals","Upcoming Activities":"/sales/tasks"};l[e]&&r(l[e])}};return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e}),n.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:i,children:"See All"})]}),a]})},rze=({first_name:e,last_name:t,company_name:a,source:s,created_at:r,id:i})=>{const l=yt(),{text:o,bg:c}=KRe(s||"Website"),d=x=>{if(!x)return"Unknown";const y=new Date(x),v=new Date-y,C=Math.floor(v/6e4),N=Math.floor(v/36e5),S=Math.floor(v/864e5);return C<60?`${C} min ago`:N<24?y.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):S<7?y.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):y.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},u=`${e||""} ${t||""}`.trim()||"Unknown",f=a||"Unknown Company",p=d(r);return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&l(`/sales/leads/${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800",children:u}),n.jsx("p",{className:"text-xs text-gray-500",children:f})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-400",children:p}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${o} ${c} px-2 py-0.5 rounded-full`,children:s||"Website"})]})]})})},ize=({name:e,amount:t,account:a,stage:s,created_at:r,id:i,previousAmount:l})=>{const o=yt(),d={PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"}[s]||s||"Unknown",{text:u,bg:f}=QRe(d),p=parseFloat(t||0),x=l?p>=l?"up":"down":"up",y=x==="up"?MRe:IRe,w=x==="up"?"text-green-400":"text-red-400",v=a?.name||"Unknown Company";return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&o(`/sales/deals/info?id=${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex-shrink",children:[n.jsx("p",{className:"font-semibold text-sm text-gray-900",children:e||"Unnamed Deal"}),n.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:v}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${u} ${f} px-2 py-0.5 rounded-full`,children:d})]}),n.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[n.jsx("p",{className:"text-md font-bold text-gray-800",children:AZ(p)}),n.jsx(y,{size:16,className:`${w} mt-1`})]})]})})},lze=({type:e,title:t,assignedTo:a,dueDate:s,scheduledDate:r,priority:i,id:l,activityType:o,fullData:c})=>{const d=yt(),f=o||{Call:"call",Meeting:"meeting",Task:"qualification"}[e]||"meeting",{Icon:p,color:x,bgColor:y}=XRe(f),{text:w,bg:v}=ZRe(i||"MEDIUM"),S=(_=>{if(!_)return"No date set";const E=new Date(_),I=E-new Date,z=Math.floor(I/864e5);return z===0?`Today, ${E.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:z===1?`Tomorrow, ${E.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:z===-1?`Yesterday, ${E.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:E.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(s||r),T=a||"Unassigned",k=()=>{l&&(c?f==="call"?(sessionStorage.setItem("callDetailData",JSON.stringify(c)),d(`/sales/calls/info?id=${l}`)):f==="meeting"?(sessionStorage.setItem("meetingDetailData",JSON.stringify(c)),d(`/sales/meetings/info?id=${l}`)):d("/sales/tasks"):d(f==="call"?`/sales/calls/info?id=${l}`:f==="meeting"?`/sales/meetings/info?id=${l}`:"/sales/tasks"))};return n.jsxs("div",{className:"flex items-start py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:k,children:[n.jsx("div",{className:`p-2 rounded-lg ${y} mr-3 flex-shrink-0 mt-1`,children:n.jsx(p,{size:20,className:`${x}`})}),n.jsxs("div",{className:"flex-grow",children:[n.jsxs("p",{className:"font-medium text-gray-800 flex items-center mb-1",children:[n.jsx("span",{className:"text-xl leading-none mr-2",children:""}),t||"Untitled Activity"]}),n.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[n.jsxs("p",{className:"flex items-center",children:[n.jsx(jZ,{size:14,className:"mr-1.5 text-gray-400"}),S]}),n.jsxs("p",{className:"flex items-center",children:[n.jsx(_Z,{size:14,className:"mr-1.5 text-gray-400"}),"Assigned to: ",T]})]})]}),n.jsx("span",{className:`inline-block text-xs font-medium ${w} ${v} px-2 py-0.5 rounded-full flex-shrink-0 self-center ml-4`,children:(i||"MEDIUM").toUpperCase()})]})},oze=()=>{const e=yt(),{user:t}=Kt(),[a,s]=h.useState({activeLeads:0,totalDeals:0,activeAccounts:0,overdueTasks:0}),[r,i]=h.useState([]),[l,o]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState([]),[p,x]=h.useState([]),[y,w]=h.useState([]),[v,C]=h.useState(!0),[N,S]=h.useState(null),[T,k]=h.useState(""),[_,E]=h.useState([]),[A,I]=h.useState([]),[z,F]=h.useState([]),[D,M]=h.useState(new Date),W=h.useRef(null),Z=h.useRef(null),R=h.useMemo(()=>{try{if(!T.trim())return[];const re=T.toLowerCase().trim(),ee=[];return Array.isArray(_)&&_.forEach(H=>{const ye=`${H.first_name||""} ${H.last_name||""}`.trim().toLowerCase(),te=(H.company_name||"").toLowerCase(),ve=(H.email||"").toLowerCase(),je=(H.phone||"").toLowerCase();(ye.includes(re)||te.includes(re)||ve.includes(re)||je.includes(re))&&ee.push({id:H.id,name:`${H.first_name||""} ${H.last_name||""}`.trim()||"Unnamed Lead",type:"Lead",details:H.company_name||"No company",route:`/sales/leads/${H.id}`})}),Array.isArray(A)&&A.forEach(H=>{const ye=(H.name||"").toLowerCase(),te=(H.account?.name||"").toLowerCase(),ve=(H.description||"").toLowerCase();(ye.includes(re)||te.includes(re)||ve.includes(re))&&ee.push({id:H.id,name:H.name||"Unnamed Deal",type:"Deal",details:H.account?.name||"No account",route:`/sales/deals/info?id=${H.id}`})}),Array.isArray(z)&&z.forEach(H=>{const ye=(H.name||"").toLowerCase(),te=(H.email||"").toLowerCase(),ve=(H.phone||"").toLowerCase(),je=(H.website||"").toLowerCase();(ye.includes(re)||te.includes(re)||ve.includes(re)||je.includes(re))&&ee.push({id:H.id,name:H.name||"Unnamed Account",type:"Account",details:H.email||H.phone||"No contact info",route:"/sales/accounts"})}),ee.slice(0,10)}catch(re){return console.error("Error in search:",re),[]}},[T,_,A,z]),Q=re=>{re.route&&(e(re.route),k(""))},Y=h.useCallback(async()=>{C(!0),S(null);try{const[re,ee,H,ye,te,ve,je]=await Promise.all([ce.get("/leads/sales/getLeads").catch(de=>(console.error("Error fetching leads:",de),{data:[]})),ce.get("/deals/sales/fetch-all").catch(de=>(console.error("Error fetching deals:",de),{data:[]})),ce.get("/accounts/sales/fetch-all").catch(de=>(console.error("Error fetching accounts:",de),{data:[]})),ce.get("/tasks/all").catch(de=>(console.error("Error fetching tasks:",de),{data:[]})),ce.get("/meetings/sales/fetch-all").catch(de=>(console.error("Error fetching meetings:",de),{data:[]})),ce.get("/calls/sales/fetch-all").catch(de=>(console.error("Error fetching calls:",de),{data:[]})),ce.get("/logs/read-all").catch(de=>(console.error("Error fetching logs:",de),{data:[]}))]),Oe=Array.isArray(re.data)?re.data:[],$e=Array.isArray(ee.data)?ee.data:[],pe=Array.isArray(H.data)?H.data:[],Me=Array.isArray(ye.data)?ye.data:[],Le=Array.isArray(te.data)?te.data:[],he=Array.isArray(ve.data)?ve.data:[],ae=Array.isArray(je.data)?je.data:[];console.log("=== RAW DEALS API RESPONSE ==="),console.log("Deals count:",$e.length),$e.length>0&&(console.log("First deal sample (raw):",JSON.stringify($e[0],null,2)),console.log("First deal keys:",Object.keys($e[0]))),E(Oe),I($e),F(pe);const Ae=Oe.filter(de=>de.status&&!["Lost","Converted"].includes(de.status)).length,ge=Me.filter(de=>!de.dueDate||de.status==="Completed"?!1:new Date(de.dueDate)<new Date).length;s({activeLeads:Ae,totalDeals:$e.length,activeAccounts:pe.length,overdueTasks:ge});const Be=[...Oe].sort((de,ke)=>new Date(ke.created_at||0)-new Date(de.created_at||0)).slice(0,5);i(Be);const qe=[...$e].sort((de,ke)=>new Date(ke.created_at||0)-new Date(de.created_at||0)).slice(0,5);o(qe);const Te=new Date,He=[];he.forEach(de=>{const ke=de.due_date||de.call_time,se=(de.status||"").toUpperCase();if(ke){const We=new Date(ke);se==="COMPLETED"||se==="MISSED"||se==="NOT_HELD"||se==="HELD"||He.push({type:"Call",title:de.subject||"Untitled Call",assignedTo:de.assigned_to||(de.call_assign_to?`${de.call_assign_to.first_name||""} ${de.call_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:ke,priority:(de.priority||"MEDIUM").toUpperCase(),id:de.id,activityType:"call",fullData:de})}}),Le.forEach(de=>{const ke=de.dueDate||de.start_time,se=(de.status||"").toUpperCase();if(ke){const We=new Date(ke);se==="COMPLETED"||se==="CANCELLED"||se==="DONE"||He.push({type:"Meeting",title:de.subject||de.activity||"Untitled Meeting",assignedTo:de.assignedTo||(de.meet_assign_to?`${de.meet_assign_to.first_name||""} ${de.meet_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:ke,priority:(de.priority||"MEDIUM").toUpperCase(),id:de.id,activityType:"meeting",fullData:de})}});const Ye={HIGH:1,MEDIUM:2,LOW:3},B=He.sort((de,ke)=>{const se=Ye[de.priority]||3,We=Ye[ke.priority]||3;if(se!==We)return se-We;const Re=new Date(de.scheduledDate||0),ct=new Date(ke.scheduledDate||0);return Re-ct}).slice(0,5);d(B),f($e),console.log("=== ALL DEALS DATA ==="),console.log("Total deals:",$e.length);const fe=$e.filter(de=>(de.stage||"").toUpperCase()==="CLOSED_WON");console.log("CLOSED_WON deals:",fe.length),fe.length>0?(console.log("=== CLOSED_WON DEALS DETAILS ==="),fe.forEach((de,ke)=>{let se=de.amount;se&&typeof se=="object"?se.toString?se=parseFloat(se.toString()):se=parseFloat(se):se=parseFloat(se)||0,console.log(`Deal ${ke+1}:`,{id:de.id,name:de.name,stage:de.stage,stage_upper:(de.stage||"").toUpperCase(),amount:de.amount,amount_parsed:se,amount_type:typeof de.amount,close_date:de.close_date,close_date_type:typeof de.close_date,close_date_value:de.close_date?new Date(de.close_date):null,has_close_date:!!de.close_date,has_amount:se>0,all_keys:Object.keys(de),full_deal:de})})):(console.log(" No CLOSED_WON deals found!"),console.log("All deal stages:",$e.map(de=>de.stage))),w($e);const Se=[...ae].sort((de,ke)=>new Date(ke.timestamp||0)-new Date(de.timestamp||0));x(Se)}catch(re){console.error("Error fetching dashboard data:",re),S("Failed to load dashboard data. Please refresh the page.")}finally{C(!1)}},[]);h.useEffect(()=>(document.title="Dashboard | Sari-Sari CRM",console.log("SalesOverview mounted, fetching data..."),Y(),W.current=setInterval(()=>{console.log("Auto-refreshing dashboard data..."),Y(),M(new Date)},3e4),()=>{W.current&&clearInterval(W.current)}),[Y]),h.useEffect(()=>{if(!t||!t.id)return;let re=0;const ee=3;let H=null;const ye=()=>{const te=window.location.protocol==="https:"?"wss:":"ws:",ve=window.location.hostname==="localhost"?"localhost:8000":window.location.host,je=`${te}//${ve}/ws/notifications?user_id=${t.id}`;try{const Oe=new WebSocket(je);Z.current=Oe,Oe.onopen=()=>{console.log(" WebSocket connected for dashboard updates"),re=0},Oe.onmessage=$e=>{try{const pe=JSON.parse($e.data);console.log(" Real-time notification received:",pe),pe.event&&["new_task","task_updated","new_lead","lead_updated","new_deal","deal_updated","new_account","account_updated","new_meeting","meeting_updated","new_call","call_updated"].includes(pe.event)&&(console.log(" Refreshing dashboard due to:",pe.event),Y(),M(new Date))}catch(pe){console.error("Error parsing WebSocket message:",pe)}},Oe.onerror=$e=>{re===0&&console.warn(" WebSocket connection unavailable (this is optional)")},Oe.onclose=()=>{re<ee&&(re++,H=setTimeout(()=>{t&&t.id&&ye()},5e3))}}catch{console.warn(" WebSocket not available (optional feature)")}};return ye(),()=>{H&&clearTimeout(H),Z.current&&(Z.current.close(),Z.current=null)}},[t,Y]);const oe=[{icon:SZ,title:"Active Leads",value:a.activeLeads,color:"text-blue-600",bgColor:"bg-blue-50",onClick:()=>e("/sales/leads")},{icon:DRe,title:"Total Deals",value:a.totalDeals,color:"text-yellow-600",bgColor:"bg-yellow-50",onClick:()=>e("/sales/deals")},{icon:ORe,title:"Active Account",value:a.activeAccounts,color:"text-green-600",bgColor:"bg-green-50",onClick:()=>e("/sales/accounts")},{icon:jZ,title:"Overdue Tasks",value:a.overdueTasks,color:"text-red-600",bgColor:"bg-red-50",onClick:()=>e("/sales/tasks")}];return console.log("SalesOverview rendering, loading:",v,"error:",N),n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative w-full",children:[v&&n.jsx(Rt,{}),n.jsxs("div",{className:"max-w-screen-2xl mx-auto",children:[N&&n.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:n.jsx("p",{className:"font-medium",children:N})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 mb-8",children:[n.jsxs("div",{className:"lg:col-span-9 flex flex-col space-y-4",children:[n.jsx(JRe,{searchQuery:T,onSearchChange:k,searchResults:R,onSearchResultClick:Q}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:oe.map(re=>n.jsx(nze,{...re,loading:v},re.title))})]}),n.jsx("div",{className:"lg:col-span-3",children:n.jsx(tze,{logs:p,loading:v})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[n.jsx("div",{className:"lg:col-span-2",children:n.jsx(aze,{revenueData:y,loading:v})}),n.jsx("div",{children:n.jsx(sze,{pipelineData:u,loading:v})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsx(q_,{title:"Latest Leads",children:r.length>0?r.map((re,ee)=>n.jsx(rze,{...re},re.id||ee)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No leads found"})}),n.jsx(q_,{title:"Latest Deals",children:v?n.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mb-2"}),n.jsx("div",{className:"text-sm text-gray-500",children:"Loading deals..."})]}):l.length>0?l.map((re,ee)=>n.jsx(ize,{...re},re.id||ee)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No deals found"})}),n.jsx(q_,{title:"Upcoming Activities",children:c.length>0?c.map((re,ee)=>n.jsx(lze,{...re},re.id||ee)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No upcoming activities"})})]})]})]})},Y_=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Active"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Former"}],Q_={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",parent_company:"",status:"PROSPECT",territory_id:"",assigned_to:""},jr=e=>e?e.toUpperCase():"",K_=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",cze=e=>{switch(jr(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},dze=e=>{switch(jr(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}};function uze(){const e=yt(),{user:t}=Kt(),a=t?.role==="Sales";h.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[s,r]=h.useState(!1),[i,l]=h.useState(!1),[o,c]=h.useState(!1),[d,u]=h.useState(null),[f,p]=h.useState(null),[x,y]=h.useState(Q_),[w,v]=h.useState(null),[C,N]=h.useState([]),[S,T]=h.useState(!1),[k,_]=h.useState([]),[E,A]=h.useState(null),[I,z]=h.useState([]),[F,D]=h.useState([]),[M,W]=h.useState("Filter by Status"),[Z,R]=h.useState(""),[Q,Y]=h.useState(null),[oe,re]=h.useState(!1),[ee,H]=h.useState(1),[ye,te]=h.useState(10),[ve,je]=h.useState("Overview"),[Oe,$e]=h.useState(""),[pe,Me]=h.useState(!1),[Le,he]=h.useState([]),[ae,Ae]=h.useState({}),[ge,Be]=h.useState(null);h.useEffect(()=>{s&&!i&&a&&t&&!x.assigned_to&&y(ie=>({...ie,assigned_to:t.id}))},[s,i,a,t,x.assigned_to]);const qe=h.useCallback(async(ie=null)=>{T(!0);try{const Pe=await ce.get("/accounts/admin/fetch-all"),vt=[...Array.isArray(Pe.data)?Pe.data:[]].sort((ht,Ut)=>{const wn=ht?.created_at||ht?.updated_at||0,ns=Ut?.created_at||Ut?.updated_at||0;return new Date(ns)-new Date(wn)});if(N(vt),ie){const ht=vt.find(Ut=>Ut.id===ie);v(ht||null)}}catch(Pe){console.error(Pe),N([]),Pe.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch accounts. Please try again later.")}finally{T(!1)}},[v]),Te=h.useCallback(async()=>{try{const ie=await ce.get("/users/all");_(Array.isArray(ie.data)?ie.data:[])}catch(ie){console.error(ie),ie.response?.status===403&&q.warn("Unable to load users for assignment (permission denied).")}},[]),He=h.useCallback(async()=>{try{const ie=await ce.get("/territories/fetch");z(Array.isArray(ie.data)?ie.data:[])}catch(ie){console.error(ie),ie.response?.status===403&&q.warn("Unable to load territories (permission denied).")}},[]),Ye=h.useCallback(async()=>{try{const ie=await ce.get("/accounts/admin/parent-companies");D(Array.isArray(ie.data)?ie.data:[])}catch(ie){console.error(ie),ie.response?.status===403&&q.warn("Unable to load parent companies (permission denied).")}},[]),B=h.useCallback(async ie=>{try{const Pe=await ce.get(`/activities/accounts/${ie}`);Ae(Pe.data&&typeof Pe.data=="object"?Pe.data:{})}catch(Pe){console.error(Pe),Pe.response?.status===404&&(console.warn("No activities found for this account."),Ae({}))}},[]);h.useEffect(()=>{qe(),Te(),He(),Ye()},[qe,Te,He,Ye]),h.useEffect(()=>{w&&$e(jr(w.status)||"PROSPECT")},[w]);const fe=C.filter(ie=>ie.acc_creator?.id===t?.id&&ie.assigned_accs?.id===t?.id),Se=fe.length,de=h.useMemo(()=>fe.filter(ie=>ie.status?.toLowerCase()==="customer").length,[fe]),ke=h.useMemo(()=>fe.filter(ie=>ie.status?.toLowerCase()==="prospect").length,[fe]),se=h.useMemo(()=>fe.filter(ie=>ie.status?.toLowerCase()==="partner").length,[fe]),We=h.useMemo(()=>fe.filter(ie=>ie.status?.toLowerCase()==="active").length,[fe]),Re=h.useMemo(()=>fe.filter(ie=>ie.status?.toLowerCase()==="inactive").length,[fe]),ct=h.useMemo(()=>fe.filter(ie=>ie.status?.toLowerCase()==="former").length,[fe]),Ie=h.useMemo(()=>[{title:"Total",value:Se,icon:On,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:de,icon:Nl,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:ke,icon:Wn,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:se,icon:Jt,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:We,icon:Nl,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:Re,icon:jl,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:ct,icon:jl,color:"text-orange-600",bgColor:"bg-orange-100"}],[Se,de,ke,se,We,Re,ct]),ue=h.useMemo(()=>{const ie=Z.trim().toLowerCase(),Pe=M.trim().toUpperCase();return C.filter(Qe=>{if(!(t?.role==="Admin"||t?.role==="CEO"||t?.role==="MANAGER"||t?.role==="GROUP MANAGER")&&Qe.status?.toUpperCase()==="INACTIVE")return!1;const ht=[Qe?.name,Qe?.website,Qe?.industry,Qe?.territory?.name,Qe?.phone_number],Ut=ie===""||ht.some(ns=>ns==null?!1:ns.toString().toLowerCase().includes(ie)),wn=Pe==="FILTER BY STATUS"||jr(Qe.status)===Pe;return Ut&&wn})},[C,Z,M,t]),Ne=Math.max(1,Math.ceil(ue.length/ye)||1);h.useEffect(()=>{H(1)},[Z,M]),h.useEffect(()=>{H(ie=>{const Pe=Math.max(1,Math.ceil(ue.length/ye)||1);return ie>Pe?Pe:ie})},[ue.length,ye]);const Fe=h.useMemo(()=>{const ie=(ee-1)*ye;return ue.slice(ie,ie+ye)},[ue,ee,ye]),Ze=ie=>{if(ie.target.checked){const Pe=Fe.filter(Qe=>Qe.assigned_accs?.id===t?.id&&Qe.acc_creator?.id===t?.id).map(Qe=>Qe.id);he(Pe)}else he([])},st=ie=>{he(Pe=>Pe.includes(ie)?Pe.filter(Qe=>Qe!==ie):[...Pe,ie])},Ee=async()=>{if(Le.length===0)return;const ie=t?.role==="Admin"||t?.role==="CEO"||t?.role==="MANAGER"||t?.role==="GROUP MANAGER",Pe=ie?"delete":"archive",Qe=ie?"This action cannot be undone.":"These accounts will be hidden from your view but admins can still see them.",vt=!ie;Y({title:`${Pe.charAt(0).toUpperCase()+Pe.slice(1)} Accounts`,message:n.jsxs("span",{children:["Are you sure you want to ",Pe," ",n.jsx("span",{className:"font-semibold",children:Le.length})," selected accounts? ",Qe]}),confirmLabel:`${Pe.charAt(0).toUpperCase()+Pe.slice(1)} ${Le.length} account(s)`,cancelLabel:"Cancel",variant:"danger",icon:vt?Ic:null,isArchive:vt,action:{type:"bulk-delete",accountIds:Le}})};ue.length===0||(ee-1)*ye+1,Math.min(ee*ye,ue.length);const Je=()=>H(ie=>Math.max(ie-1,1)),be=()=>H(ie=>Math.min(ie+1,Ne)),Ke=ie=>{v(ie),je("Overview"),$e(jr(ie?.status)||"PROSPECT")},$=()=>v(null),G=ie=>{ie.target.id==="accountModalBackdrop"&&!oe&&$()},K=()=>{r(!1),l(!1),p(null),y(Q_),c(!1),A(null)},ne=ie=>{ie.target.id==="modalBackdrop"&&K()},J=ie=>ie?new Date(ie).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",Ce=ie=>{const{name:Pe,value:Qe}=ie.target;y(vt=>({...vt,[Pe]:Qe}))},me=()=>{y(Q_),l(!1),p(null),r(!0)},V=ie=>{v(null),ie.assigned_accs?A(ie.assigned_accs):A(null),y({name:ie.name||"",website:ie.website||"",phone_number:ie.phone_number||"",billing_address:ie.billing_address||"",shipping_address:ie.shipping_address||"",industry:ie.industry||"",status:jr(ie.status)||"PROSPECT",territory_id:ie.territory?.id?String(ie.territory.id):"",assigned_to:ie.assigned_accs?.id?String(ie.assigned_accs.id):""}),l(!0),p(ie.id),r(!0)},_e=ie=>{if(!ie)return;const Pe=t?.role==="Admin"||t?.role==="CEO"||t?.role==="MANAGER"||t?.role==="GROUP MANAGER",Qe=Pe?"delete":"archive",vt=Pe?"This action cannot be undone.":"This account will be hidden from your view but admins can still see it.",ht=!Pe;Y({title:`${Qe.charAt(0).toUpperCase()+Qe.slice(1)} Account`,message:n.jsxs("span",{children:["Are you sure you want to ",Qe," the account"," ",n.jsx("span",{className:"font-semibold",children:ie.name}),"? ",vt]}),confirmLabel:`${Qe.charAt(0).toUpperCase()+Qe.slice(1)} Account`,cancelLabel:"Cancel",variant:"danger",icon:ht?Ic:null,isArchive:ht,action:{type:"delete",targetId:ie.id,name:ie.name}})},Ue=async()=>{if(!Q?.action){Y(null);return}const{action:ie}=Q,{type:Pe,payload:Qe,targetId:vt,name:ht}=ie;re(!0);try{if(Pe==="create"){c(!0);const Ut=await ce.post("/accounts/admin",Qe);Ye(),q.success(`Account "${ht}" created successfully.`);const wn=w?.id||null;K(),await qe(wn),!w&&Ut.data?.id}else if(Pe==="update"){if(!vt)throw new Error("Missing account identifier for update.");c(!0),await ce.put(`/accounts/admin/${vt}`,Qe),q.success(`Account "${ht}" updated successfully.`);const Ut=w?.id&&w.id===vt?vt:null;K(),await qe(Ut),w?.id===vt&&v(null)}else if(Pe==="delete"){if(!vt)throw new Error("Missing account identifier for deletion.");const Ut=w?.id;u(vt);const ns=t?.role==="Admin"||t?.role==="CEO"||t?.role==="MANAGER"||t?.role==="GROUP MANAGER"?`Account "${ht}" deleted successfully.`:`Account "${ht}" archived successfully.`;await ce.delete(`/accounts/admin/${vt}`),q.success(ns),await qe(Ut&&Ut!==vt?Ut:null),Ut===vt&&v(null)}else if(Pe==="bulk-delete"){const{accountIds:Ut}=ie,ns=t?.role==="Admin"||t?.role==="CEO"||t?.role==="MANAGER"||t?.role==="GROUP MANAGER"?"deleted":"archived";await ce.delete("/accounts/admin/bulk-delete",{data:{account_ids:Ut}}),q.success(`Successfully ${ns} ${Ut.length} accounts`),he([]),await qe()}}catch(Ut){console.error(Ut);const wn=Pe==="create"?"Failed to create account. Please review the details and try again.":Pe==="update"?"Failed to update account. Please review the details and try again.":Pe==="bulk-delete"?"Failed to delete selected accounts.":"Failed to delete account. Please try again.",ns=Ut.response?.data?.detail||wn;q.error(ns),(Pe==="create"||Pe==="update")&&c(!1),Pe==="delete"&&u(null)}finally{(Pe==="create"||Pe==="update")&&c(!1),Pe==="delete"&&u(null),re(!1),Y(null)}},rt=()=>{oe||Y(null)},bt=async()=>{if(!w||!Oe)return;const ie=jr(Oe),Pe=jr(w.status);if(ie!==Pe){Me(!0);try{await ce.put(`/accounts/admin/${w.id}`,{status:ie}),q.success(`Account status updated to ${K_(ie)}`),N(Qe=>Qe.map(vt=>vt.id===w.id?{...vt,status:ie}:vt)),v(null)}catch(Qe){console.error(Qe);const vt=Qe.response?.data?.detail||"Failed to update account status. Please try again.";q.error(vt)}finally{Me(!1)}}},[gt,_t]=h.useState(!1),Wt=ie=>{ie.preventDefault(),_t(!0);const Pe=x.name.trim();if(!Pe){q.error("Account name is required.");return}if(!x.assigned_to){q.error("Assigned To is required.");return}const vt={name:Pe,website:x.website?.trim()||null,phone_number:x.phone_number?.trim()||null,billing_address:x.billing_address?.trim()||null,shipping_address:x.shipping_address?.trim()||null,industry:x.industry?.trim()||null,parent_company:x.parent_company?.trim()||null,status:x.status||"PROSPECT",territory_id:x.territory_id?Number(x.territory_id):null,assigned_to:x.assigned_to?Number(x.assigned_to):null},ht=i&&f?"update":"create";Y({title:ht==="create"?"Confirm New Account":"Confirm Update",message:ht==="create"?n.jsxs("span",{children:["Are you sure you want to create the account"," ",n.jsx("span",{className:"font-semibold",children:Pe}),"?"]}):n.jsxs("span",{children:["Save changes to the account"," ",n.jsx("span",{className:"font-semibold",children:Pe}),"?"]}),confirmLabel:ht==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:ht,payload:vt,targetId:f||null,name:Pe}})},un=[{label:"Filter by Status",value:"Filter by Status"},...Y_.map(ie=>({label:ie.label,value:ie.value}))],le=Q?.action?.type==="delete"?Q.action.targetId:null,it=w&&(d===w.id||le===w.id),Et=w&&d===w.id,Nt=w?cze(w.status):"",L=w?n.jsx("div",{id:"accountModalBackdrop",onClick:G,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:ie=>ie.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),n.jsx("button",{onClick:$,className:"text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Vn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:w.name}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${Nt}`,children:K_(w.status)})]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:w.assigned_accs&&w.assigned_accs.id===t?.id&&w.acc_creator&&w.acc_creator.id===t?.id&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>V(w),disabled:Q?.action?.type==="update"&&Q.action.targetId===w.id,children:[n.jsx(ia,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>_e(w),disabled:!!it,children:Et?"Archiving...":n.jsxs(n.Fragment,{children:[n.jsx(Ic,{className:"mr-2"}),"Archive"]})})]})})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(ie=>n.jsx("button",{onClick:()=>je(ie),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${ve===ie?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:ie},ie))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[ve==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Website:"}),n.jsx("p",{children:w.website?n.jsx("a",{href:w.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:w.website}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Industry:"}),n.jsx("p",{children:w.industry||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Parent Company:"}),n.jsx("p",{children:w.parent_company||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:w.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:w.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Billing Address:"}),n.jsx("p",{children:w.billing_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),n.jsx("p",{children:w.shipping_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:w.assigned_accs?`${w.assigned_accs.first_name} ${w.assigned_accs.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:w.acc_creator?`${w.acc_creator.first_name} ${w.acc_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:J(w.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:J(w.updated_at)||"N/A"})]})]})}),ve==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:C.notes||"No notes available."})]})]}),ve==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[ae.tasks&&ae.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Be(ge==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Gt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",ae.tasks.length,")"]})]}),ge==="tasks"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),ge==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ae.tasks.map((ie,Pe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/tasks",{state:{taskID:ie.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Gt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:ie.subject||ie.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:ie.description||"No description"}),ie.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",ie.assigned_to.first_name," ",ie.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:J(ie.due_date||ie.created_at)})]},`task-${Pe}`))})]}),ae.meetings&&ae.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Be(ge==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ct,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",ae.meetings.length,")"]})]}),ge==="meetings"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),ge==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ae.meetings.map((ie,Pe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/meetings",{state:{meetingID:ie.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Ct,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:ie.subject||ie.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:ie.description||ie.location||"No description"}),ie.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",ie.host.first_name," ",ie.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:J(ie.start_time||ie.created_at)})]},`meeting-${Pe}`))})]}),ae.calls&&ae.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Be(ge==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(At,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",ae.calls.length,")"]})]}),ge==="calls"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),ge==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ae.calls.map((ie,Pe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/calls",{state:{callID:ie.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(At,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:ie.subject||ie.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:ie.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:J(ie.call_time||ie.created_at)})]},`call-${Pe}`))})]}),ae.contacts&&ae.contacts.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Be(ge==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Jt,{className:"text-teal-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",ae.contacts.length,")"]})]}),ge==="contacts"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),ge==="contacts"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ae.contacts.map((ie,Pe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/contacts",{state:{contactID:ie.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-teal-600 mt-1",children:n.jsx(Jt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[ie.first_name?`${ie.first_name} `:"",ie.last_name]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ie.title||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:J(ie.created_at)})]},`contact-${Pe}`))})]}),ae.deals&&ae.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Be(ge==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",ae.deals.length,")"]})]}),ge==="deals"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),ge==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ae.deals.map((ie,Pe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/deals",{state:{dealID:ie.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[ie.deal_id?ie.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",ie.name||ie.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:ie.stage||ie.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:J(ie.close_date||ie.created_at)})]},`deal-${Pe}`))})]}),ae.quotes&&ae.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Be(ge==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(xn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",ae.quotes.length,")"]})]}),ge==="quotes"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),ge==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ae.quotes.map((ie,Pe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/quotes",{state:{quoteID:ie.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(xn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(ie.quote_id?ie.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ie.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:J(ie.presented_date)||""})]},`quote-${Pe}`))})]}),(!ae||(!ae.tasks||ae.tasks.length===0)&&(!ae.meetings||ae.meetings.length===0)&&(!ae.calls||ae.calls.length===0)&&(!ae.quotes||ae.quotes.length===0)&&(!ae.deals||ae.deals.length===0)&&(!ae.contacts||ae.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/sales/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${w.name}`,relatedType1:"Account",relatedTo1:String(w.id),relatedType2:null,relatedTo2:null,assigned_to:w.assigned_accs?.id?String(w.assigned_accs.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(At,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/sales/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${w.name}`,relatedType1:"Account",relatedTo1:String(w.id),relatedType2:null,relatedTo2:null,assigned_to:w.assigned_accs?.id?String(w.assigned_accs.id):"",status:"Planned"}}}),children:[n.jsx(Ct,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/sales/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${w.name}`,relatedType1:"Account",relatedTo1:String(w.id),relatedType2:null,relatedTo2:null,assignedTo:w.assigned_accs?.id?String(w.assigned_accs.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Gt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:Oe||jr(w?.status)||"PROSPECT",onChange:ie=>$e(ie.target.value),children:Y_.map(ie=>n.jsx("option",{value:ie.value,children:ie.label},ie.value))}),n.jsx("button",{onClick:bt,disabled:pe||!Oe||jr(Oe)===jr(w?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${pe||!Oe||jr(Oe)===jr(w?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:pe?"Updating...":"Update"})]})]})]})]})]})}):null,U=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[S&&n.jsx(Rt,{message:"Loading accounts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(On,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{me(),_t(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(dn,{className:"mr-2"})," Add Account"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ie.map(ie=>n.jsx(mze,{...ie},ie.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search accounts",value:Z,onChange:ie=>R(ie.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:M,onChange:ie=>W(ie.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:un.map(ie=>n.jsx("option",{value:ie.value,children:ie.label},ie.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-center w-12",children:n.jsx("input",{type:"checkbox",checked:Fe.length>0&&Fe.filter(ie=>ie.assigned_accs?.id===t?.id&&ie.acc_creator?.id===t?.id).every(ie=>Le.includes(ie.id))&&Fe.some(ie=>ie.assigned_accs?.id===t?.id&&ie.acc_creator?.id===t?.id),onChange:Ze,className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Industry"}),n.jsx("th",{className:"py-3 px-4",children:"Territory"}),n.jsx("th",{className:"py-3 px-4",children:"Phone"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:Le.length>0?n.jsx("button",{onClick:Ee,className:"text-orange-600 hover:text-orange-800 transition p-1 rounded-full hover:bg-orange-50",title:`Archive ${Le.length} selected accounts`,children:n.jsx(Ic,{size:18})}):""})]})}),n.jsx("tbody",{children:S?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"Loading accounts..."})}):ue.length>0?Fe.map(ie=>n.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>{Ke(ie),B(ie.id)},children:[n.jsx("td",{className:"py-3 px-4 text-center",children:ie.assigned_accs?.id===t?.id&&ie.acc_creator?.id===t?.id?n.jsx("input",{type:"checkbox",checked:Le.includes(ie.id),onChange:()=>st(ie.id),onClick:Pe=>Pe.stopPropagation(),className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"}):null}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:ie.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:ie.website||"--"})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${dze(ie.status)}`,children:K_(ie.status)})}),n.jsx("td",{className:"py-3 px-4 text-sm",children:ie.industry||"--"}),n.jsx("td",{className:"py-3 px-4 text-sm",children:ie.territory?.name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(At,{className:"text-gray-500"}),n.jsx("span",{children:ie.phone_number||"--"})]})}),n.jsx("td",{className:"py-3 px-4"})]},ie.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No accounts found."})})})]})}),n.jsx(en,{className:"mt-4",totalItems:ue.length,pageSize:ye,currentPage:ee,onPrev:Je,onNext:be,onPageSizeChange:ie=>{te(ie),H(1)},pageSizeOptions:[10,20,30,40,50],label:"accounts"})]}),xe=s?n.jsx("div",{id:"modalBackdrop",onClick:ne,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto hide-scrollbar max-h-[90vh]",onClick:ie=>ie.stopPropagation(),children:[n.jsx("button",{onClick:()=>{K(),_t(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:o||oe,children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:i?"Edit Account":"Add New Account"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:Wt,noValidate:!0,children:[n.jsx("div",{className:"md:col-span-2",children:n.jsx(zm,{label:"Name",name:"name",value:x.name,onChange:Ce,placeholder:"Company name",required:!0,isSubmitted:gt})}),n.jsx(D7,{label:"Parent Company",value:x.parent_company,onChange:ie=>{y(Pe=>({...Pe,parent_company:ie}))},items:F.map(ie=>({id:ie,name:ie})),getLabel:ie=>ie?.name||"",placeholder:"Select parent company...",disabled:o}),n.jsx(zm,{label:"Website",name:"website",value:x.website,onChange:Ce,placeholder:"https://example.com",disabled:o}),n.jsx(zm,{label:"Phone Number",name:"phone_number",value:x.phone_number,onChange:Ce,placeholder:"09xx xxx xxxx",type:"tel",disabled:o}),n.jsx(zm,{label:"Industry",name:"industry",value:x.industry,onChange:Ce,placeholder:"Industry",disabled:o}),n.jsx(zm,{label:"Billing Address",name:"billing_address",value:x.billing_address,onChange:Ce,placeholder:"Billing address",disabled:o}),n.jsx(zm,{label:"Shipping Address",name:"shipping_address",value:x.shipping_address,onChange:Ce,placeholder:"Shipping address",disabled:o}),n.jsx(P7,{label:"Status",name:"status",value:x.status,onChange:Ce,options:[{value:"",label:"Select status"},...Y_],required:!0,disabled:o}),n.jsx(D7,{label:"Assigned To",value:x.assigned_to,onChange:ie=>{const Pe=k.find(vt=>String(vt.id)===String(ie));A(Pe);let Qe=null;Pe&&Pe.assigned_territory&&Pe.assigned_territory.length===1&&(Qe=Pe.assigned_territory[0].id),y(vt=>({...vt,assigned_to:ie,territory_id:Qe}))},items:k||[],getLabel:ie=>`${ie?.first_name??""} ${ie?.last_name??""} (${ie?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:gt,disabled:o||k.length===0||a}),n.jsx("div",{className:"md:col-span-2",children:n.jsx(P7,{label:"Territory",name:"territory_id",value:x.territory_id||"",onChange:Ce,options:[{value:"",label:E?E.assigned_territory&&E.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"},...E&&E.assigned_territory&&E.assigned_territory.map(ie=>({value:String(ie.id),label:ie.name}))||[]],disabled:o||!E||!E.assigned_territory||E.assigned_territory.length===0})}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{K(),_t(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:o||oe,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:o||oe,children:o?"Saving...":i?"Update Account":"Save Account"})]})]})]})}):null,De=Q?n.jsx(hze,{open:!0,title:Q.title,message:Q.message,confirmLabel:Q.confirmLabel,cancelLabel:Q.cancelLabel,variant:Q.variant,onConfirm:Ue,onCancel:rt,loading:oe,icon:Q.icon,isArchive:Q.isArchive}):null;return n.jsxs(n.Fragment,{children:[U,L,xe,De]})}function mze({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function zm({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function P7({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:l=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(o=>n.jsx("option",{value:o.value,children:o.label},o.value))})]})}function D7({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",required:c=!1,isSubmitted:d=!1,allowFreeText:u=!1}){const f=d&&c&&!a;return n.jsxs("div",{className:o,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(fze,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:l,hasError:f,allowFreeText:u})]})}function fze({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,hasError:o=!1,allowFreeText:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),y=e.find(C=>String(C.id)===String(t)),w=y?s(y):t,v=h.useMemo(()=>{const C=f.trim().toLowerCase();return(C?e.filter(S=>(s(S)||"").toLowerCase().includes(C)):e).slice(0,l)},[e,f,s,l]);return h.useEffect(()=>{const C=N=>{x.current&&!x.current.contains(N.target)&&u(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:w,placeholder:r,onFocus:()=>!i&&u(!0),onChange:C=>{p(C.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${o?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsxs("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:[c&&f.trim()&&!v.some(C=>s(C).toLowerCase()===f.trim().toLowerCase())&&n.jsxs("button",{type:"button",onClick:()=>{a(f.trim()),u(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-green-50 bg-blue-50 font-medium text-blue-700",children:['+ Add "',f.trim(),'" as new parent company']}),v.length>0?v.map(C=>{const N=String(C.id),S=s(C),T=String(t)===N;return n.jsx("button",{type:"button",onClick:()=>{a(N),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${T?"bg-blue-50":""}`,children:S||"--"},N)}):!c||!f.trim()?n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"}):null]}),e.length>l&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function hze({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c,icon:d=null,isArchive:u=!1}){if(!e)return null;const f=u?"bg-orange-500 hover:bg-orange-600 border border-orange-400":i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),n.jsxs("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 flex items-center justify-center ${f}`,disabled:l,children:[d&&n.jsx(d,{className:"mr-2",size:18}),l?"Processing...":s]})]})]})})}const X_={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:""},Fm=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),_i=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function gze(){const e=yt(),t=Yt();h.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[a,s]=h.useState([]),[r,i]=h.useState(!1),[l,o]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState(null),[p,x]=h.useState(!1),[y,w]=h.useState(!1),[v,C]=h.useState(!1),[N,S]=h.useState(null),[T,k]=h.useState(!1),[_,E]=h.useState(null),[A,I]=h.useState(X_),[z,F]=h.useState(""),[D,M]=h.useState("Filter by Accounts"),[W,Z]=h.useState(null),[R,Q]=h.useState("Overview"),[Y,oe]=h.useState(1),[re,ee]=h.useState(10),[H,ye]=h.useState({}),[te,ve]=h.useState(null),[je,Oe]=h.useState(null),[$e,pe]=h.useState(null),[Me,Le]=h.useState([]);h.useEffect(()=>{const V=t.state?.contactID;V&&(pe(V),e(t.pathname,{replace:!0,state:{}}))},[t,e]),h.useEffect(()=>{if($e&&a.length>0&&!r){const V=a.find(_e=>_e.id===$e);V?f(V):q.error("Contact not found."),pe(null)}},[$e,a,r]),h.useEffect(()=>{async function V(){try{const _e=await ce.get("/auth/me");Oe(_e.data)}catch(_e){console.error("Failed to fetch current user",_e)}}V()},[]);const he=h.useCallback(async(V=null)=>{i(!0);try{const _e=await ce.get("/contacts/admin/fetch-all"),rt=[...Array.isArray(_e.data)?_e.data:[]].sort((bt,gt)=>{const _t=bt?.created_at||bt?.updated_at||0,Wt=gt?.created_at||gt?.updated_at||0;return new Date(Wt)-new Date(_t)});if(s(rt),V){const bt=rt.find(gt=>gt.id===V);f(bt||null)}}catch(_e){console.error(_e),s([]),_e.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch contacts. Please try again later.")}finally{i(!1)}},[f]),ae=h.useCallback(async()=>{try{const V=await ce.get("/accounts/admin/fetch-all"),Ue=[...Array.isArray(V.data)?V.data:[]].sort((rt,bt)=>(rt?.name||"").localeCompare(bt?.name||""));o(Ue)}catch(V){console.error(V),o([]),V.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},[]),Ae=h.useCallback(async()=>{try{const V=await ce.get("/users/all"),Ue=[...Array.isArray(V.data)?V.data:[]].sort((rt,bt)=>Fm(rt).localeCompare(Fm(bt)));d(Ue)}catch(V){console.error(V),d([]),V.response?.status===403&&q.warn("Unable to load users for assignment (permission denied).")}},[]),ge=h.useCallback(async V=>{try{const _e=await ce.get(`/activities/contact/${V}`);ye(_e.data&&typeof _e.data=="object"?_e.data:{})}catch(_e){console.error(_e),_e.response?.status===404&&(console.warn("No activities found for this account."),ye({}))}},[]);h.useEffect(()=>{he(),ae(),Ae()},[he,ae,Ae]);const Be=h.useMemo(()=>{const V=new Map;l.forEach(Ue=>{Ue?.id&&Ue?.name&&V.set(String(Ue.id),Ue.name)}),a.forEach(Ue=>{Ue?.account_id&&Ue?.account?.name&&V.set(String(Ue.account_id),Ue.account.name)});const _e=Array.from(V.entries()).sort((Ue,rt)=>Ue[1].localeCompare(rt[1])).map(([Ue,rt])=>({value:Ue,label:rt}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},..._e]},[l,a]),qe=h.useMemo(()=>{const V=z.trim().toLowerCase(),_e=D.trim();return a.filter(Ue=>{const rt=[Ue?.first_name,Ue?.last_name,Ue?.email,Ue?.title,Ue?.department,Ue?.account?.name,Ue?.account?.status,Ue?.work_phone,Ue?.mobile_phone_1,Ue?.mobile_phone_2,Ue?.assigned_contact?.first_name,Ue?.assigned_contact?.last_name,Ue?.contact_creator?.first_name,Ue?.contact_creator?.last_name,Ue?.notes,_i(Ue?.created_at),_i(Ue?.updated_at)],bt=V===""||rt.some(_t=>_t==null?!1:_t.toString().toLowerCase().includes(V)),gt=_e==="Filter by Accounts"||String(Ue.account_id)===_e;return bt&&gt})},[a,z,D]),Te=Math.max(1,Math.ceil(qe.length/re)||1);h.useEffect(()=>{oe(1)},[z,D]),h.useEffect(()=>{oe(V=>{const _e=Math.max(1,Math.ceil(qe.length/re)||1);return V>_e?_e:V})},[qe.length,re]);const He=h.useMemo(()=>{const V=(Y-1)*re;return qe.slice(V,V+re)},[qe,Y,re]),Ye=()=>oe(V=>Math.max(V-1,1)),B=()=>oe(V=>Math.min(V+1,Te)),fe=h.useMemo(()=>{if(!y||!_)return l;const V=a.find(Ue=>Ue.id===_);return!V||!V.account||l.some(Ue=>Ue.id===V.account.id)?l:[...l,V.account]},[l,y,_,a]),Se=h.useCallback(()=>{x(!1),w(!1),E(null),I(X_),C(!1),Fe(!1)},[]),de=V=>{V.target.id==="modalBackdrop"&&!v&&!T&&Se()},ke=V=>{const{name:_e,value:Ue}=V.target;I(rt=>({...rt,[_e]:Ue}))},se=()=>{I(X_),w(!1),E(null),x(!0),je?.role==="Sales"&&I(V=>({...V,assigned_to:je.id}))},We=async V=>{if(!V)return;const _e=await ce.get(`/accounts/get/${V.account_id}`);I({first_name:V.first_name||"",last_name:V.last_name||"",account_id:_e.data.id?_e.data.id:"",title:V.title||"",department:V.department||"",email:V.email||"",work_phone:V.work_phone||"",mobile_phone_1:V.mobile_phone_1||"",mobile_phone_2:V.mobile_phone_2||"",notes:V.notes||"",assigned_to:V.assigned_to?String(V.assigned_to):""}),w(!0),E(V.id),x(!0),f(null)},Re=V=>{if(!V)return;const _e=Fm(V)||"this contact",Ue=je?.role==="Admin"||je?.role==="CEO"||je?.role==="MANAGER"||je?.role==="GROUP MANAGER",rt=Ue?"delete":"archive",bt=Ue?"This action cannot be undone.":"This contact will be hidden from your view but admins can still see it.",gt=!Ue;S({title:`${rt.charAt(0).toUpperCase()+rt.slice(1)} Contact`,message:n.jsxs("span",{children:["Are you sure you want to ",rt," ",n.jsx("span",{className:"font-semibold",children:_e}),"? ",bt]}),confirmLabel:`${rt.charAt(0).toUpperCase()+rt.slice(1)} Contact`,cancelLabel:"Cancel",variant:"danger",icon:gt?Ic:null,isArchive:gt,action:{type:"delete",targetId:V.id,name:_e}})},ct=()=>{const V=He.filter(_e=>_e.assigned_contact?.id===je?.id&&_e.contact_creator?.id===je?.id);Me.length===V.length&&V.length>0?Le([]):Le(V.map(_e=>_e.id))},Ie=V=>{Le(_e=>_e.includes(V)?_e.filter(Ue=>Ue!==V):[..._e,V])},ue=async()=>{if(Me.length===0)return;const V=je?.role==="Admin"||je?.role==="CEO"||je?.role==="MANAGER"||je?.role==="GROUP MANAGER",_e=V?"delete":"archive",Ue=V?"This action cannot be undone.":"These contacts will be hidden from your view but admins can still see them.",rt=!V;S({title:`${_e.charAt(0).toUpperCase()+_e.slice(1)} Contacts`,message:n.jsxs("span",{children:["Are you sure you want to ",_e," ",n.jsx("span",{className:"font-semibold",children:Me.length})," selected contacts? ",Ue]}),confirmLabel:`${_e.charAt(0).toUpperCase()+_e.slice(1)} ${Me.length} contact(s)`,cancelLabel:"Cancel",variant:"danger",icon:rt?Ic:null,isArchive:rt,action:{type:"bulk-delete",contactIds:Me}})},[Ne,Fe]=h.useState(!1),Ze=V=>{V.preventDefault(),Fe(!0);const _e=A.first_name.trim(),Ue=A.last_name.trim();if(!_e||!Ue){q.error("First name and last name are required.");return}if(!A.account_id){q.error("Account is required.");return}if(!A.assigned_to){q.error("Assigned To is required.");return}const bt=A.email?.trim();if(!bt){q.error("Email is required.");return}if(!bt.includes("@")){q.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(bt)){q.error("Please enter a valid email address.");return}const _t={first_name:_e,last_name:Ue,account_id:Number(A.account_id),title:A.title?.trim()||null,department:A.department?.trim()||null,email:A.email?.trim().toLowerCase()||null,work_phone:A.work_phone?.trim()||null,mobile_phone_1:A.mobile_phone_1?.trim()||null,mobile_phone_2:A.mobile_phone_2?.trim()||null,notes:A.notes?.trim()||null,assigned_to:A.assigned_to?Number(A.assigned_to):null},Wt=y&&_?"update":"create",un=`${_e} ${Ue}`.trim();S({title:Wt==="create"?"Confirm New Contact":"Confirm Update",message:Wt==="create"?n.jsxs("span",{children:["Are you sure you want to add"," ",n.jsx("span",{className:"font-semibold",children:un})," to your contacts?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:un}),"?"]}),confirmLabel:Wt==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:Wt,payload:_t,targetId:_||null,name:un}})},st=async()=>{if(!N?.action){S(null);return}const{action:V}=N,{type:_e,payload:Ue,targetId:rt,name:bt}=V;k(!0);try{if(_e==="create"){C(!0),await ce.post("/contacts/admin",Ue),q.success(`Contact "${bt}" created successfully.`);const gt=u?.id||null;Se(),await he(gt)}else if(_e==="update"){if(!rt)throw new Error("Missing contact identifier for update.");C(!0),await ce.put(`/contacts/admin/${rt}`,Ue),q.success(`Contact "${bt}" updated successfully.`);const gt=u?.id&&u.id===rt?rt:u?.id||null;Se(),await he(gt),u?.id===rt&&f(null)}else if(_e==="delete"){if(!rt)throw new Error("Missing contact identifier for deletion.");const gt=u?.id;Z(rt);const Wt=je?.role==="Admin"||je?.role==="CEO"||je?.role==="MANAGER"||je?.role==="GROUP MANAGER"?`Contact "${bt}" deleted successfully.`:`Contact "${bt}" archived successfully.`;await ce.delete(`/contacts/admin/${rt}`),q.success(Wt),await he(gt&&gt!==rt?gt:null),gt===rt&&f(null)}else if(_e==="bulk-delete"){const{contactIds:gt}=V;if(!gt||gt.length===0)throw new Error("No contacts provided for bulk deletion.");const Wt=je?.role==="Admin"||je?.role==="CEO"||je?.role==="MANAGER"||je?.role==="GROUP MANAGER"?`Successfully deleted ${gt.length} contact(s).`:`Successfully archived ${gt.length} contact(s).`;await ce.delete("/contacts/admin/bulk-delete",{data:{contact_ids:gt}}),q.success(Wt),Le([]),await he(),f(null)}}catch(gt){console.error(gt);const _t=_e==="create"?"Failed to create contact. Please review the details and try again.":_e==="update"?"Failed to update contact. Please review the details and try again.":_e==="bulk-delete"?"Failed to delete contacts. Please try again.":"Failed to delete contact. Please try again.",Wt=gt.response?.data?.detail||_t;q.error(Wt)}finally{(_e==="create"||_e==="update")&&C(!1),_e==="delete"&&Z(null),k(!1),S(null)}},Ee=()=>{T||S(null)},Je=V=>{f(V),Q("Overview")},be=()=>f(null),Ke=V=>{V.target.id==="contactModalBackdrop"&&!T&&be()},$=N?.action?.type==="delete"?N.action.targetId:null,G=u&&(W===u.id||$===u.id),K=u&&W===u.id,ne=u?n.jsx("div",{id:"contactModalBackdrop",onClick:Ke,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:V=>V.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),n.jsx("button",{onClick:be,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Vn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:Fm(u)||"Unnamed contact"})}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:u.assigned_contact&&u.assigned_contact.id===je?.id&&u.contact_creator&&u.contact_creator.id===je?.id&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>We(u),disabled:T||N?.action?.type==="update"&&N.action.targetId===u.id,children:[n.jsx(ia,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>Re(u),disabled:!!G,children:K?"Archiving...":n.jsxs(n.Fragment,{children:[n.jsx(Ic,{className:"mr-2"}),"Archive"]})})]})})]}),n.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:n.jsx("p",{className:"text-sm text-gray-500",children:u.account?.name||"No associated account"})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(V=>n.jsx("button",{onClick:()=>Q(V),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${R===V?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:V},V))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[R==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact Name:"}),n.jsx("p",{children:Fm(u)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Title:"}),n.jsx("p",{children:u.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:u.email?n.jsx("a",{href:`mailto:${u.email}`,className:"text-blue-600 hover:underline break-all",children:u.email}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:u.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:u.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:u.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:u.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:u.assigned_contact?`${u.assigned_contact.first_name} ${u.assigned_contact.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:u.contact_creator?`${u.contact_creator.first_name} ${u.contact_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:_i(u.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:_i(u.updated_at)||"N/A"})]})]})}),R==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:u.notes||"No notes available."})]})]}),R==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[H.tasks&&H.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ve(te==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Gt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",H.tasks.length,")"]})]}),te==="tasks"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),te==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:H.tasks.map((V,_e)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Gt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:V.subject||V.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:V.description||"No description"}),V.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",V.assigned_to.first_name," ",V.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:_i(V.due_date||V.created_at)})]},`task-${_e}`))})]}),H.meetings&&H.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ve(te==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ct,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",H.meetings.length,")"]})]}),te==="meetings"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),te==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:H.meetings.map((V,_e)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Ct,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:V.subject||V.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:V.description||V.location||"No description"}),V.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",V.host.first_name," ",V.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:_i(V.start_time||V.created_at)})]},`meeting-${_e}`))})]}),H.calls&&H.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ve(te==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(At,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",H.calls.length,")"]})]}),te==="calls"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),te==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:H.calls.map((V,_e)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(At,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:V.subject||V.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:V.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:_i(V.call_time||V.created_at)})]},`call-${_e}`))})]}),H.contacts&&H.contacts.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ve(te==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Jt,{className:"text-teal-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",H.contacts.length,")"]})]}),te==="contacts"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),te==="contacts"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:H.contacts.map((V,_e)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-teal-600 mt-1",children:n.jsx(Jt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[V.first_name?`${V.first_name} `:"",V.last_name]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:V.title||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:_i(V.created_at)})]},`contact-${_e}`))})]}),H.deals&&H.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ve(te==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",H.deals.length,")"]})]}),te==="deals"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),te==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:H.deals.map((V,_e)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[V.deal_id?V.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",V.name||V.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:V.stage||V.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:_i(V.close_date||V.created_at)})]},`deal-${_e}`))})]}),H.quotes&&H.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ve(te==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(xn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",H.quotes.length,")"]})]}),te==="quotes"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),te==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:H.quotes.map((V,_e)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(xn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(V.quote_id?V.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:V.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:_i(V.presented_date)||""})]},`quote-${_e}`))})]}),(!H||(!H.tasks||H.tasks.length===0)&&(!H.meetings||H.meetings.length===0)&&(!H.calls||H.calls.length===0)&&(!H.quotes||H.quotes.length===0)&&(!H.deals||H.deals.length===0)&&(!H.contacts||H.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsx("div",{className:"flex flex-col gap-4",children:n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Contact"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(At,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!u?.email){alert("No email address available");return}const V=encodeURIComponent(u.email),_e=encodeURIComponent(""),Ue=encodeURIComponent(""),rt=`https://mail.google.com/mail/?view=cm&fs=1&to=${V}&su=${_e}&body=${Ue}`;window.open(rt,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Zn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Contact"}}}),children:[n.jsx(Ct,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Contact"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Gt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]})})]})]})]})}):null,J=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&n.jsx(Rt,{message:"Loading contacts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(On,{className:"mr-2 text-blue-600"})," Contacts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{se(),Fe(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(dn,{className:"mr-2"})," Add Contact"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search contacts",value:z,onChange:V=>F(V.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:D,onChange:V=>M(V.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:Be.map(V=>n.jsx("option",{value:V.value,children:V.label},V.value??V.label))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-center w-12",children:n.jsx("input",{type:"checkbox",checked:He.length>0&&He.filter(V=>V.assigned_contact?.id===je?.id&&V.contact_creator?.id===je?.id).every(V=>Me.includes(V.id))&&He.some(V=>V.assigned_contact?.id===je?.id&&V.contact_creator?.id===je?.id),onChange:ct,className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),n.jsx("th",{className:"py-3 px-4",children:"Department"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Created"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:Me.length>0?n.jsx("button",{onClick:ue,className:"text-orange-600 hover:text-orange-800 transition p-1 rounded-full hover:bg-orange-50",title:`Archive ${Me.length} selected contacts`,children:n.jsx(Ic,{size:18})}):""})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"Loading contacts..."})}):qe.length>0?He.map(V=>{const _e=[{Icon:Zn,value:V.email,key:"email"},{Icon:At,value:V.work_phone,key:"work_phone"},{Icon:Yc,value:V.mobile_phone_1,key:"mobile_phone_1"},{Icon:Yc,value:V.mobile_phone_2,key:"mobile_phone_2"}].filter(Ue=>!!Ue.value);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",children:[n.jsx("td",{className:"py-3 px-4 align-top text-center",onClick:Ue=>Ue.stopPropagation(),children:V.assigned_contact&&V.assigned_contact.id===je?.id&&V.contact_creator&&V.contact_creator.id===je?.id?n.jsx("input",{type:"checkbox",checked:Me.includes(V.id),onChange:()=>Ie(V.id),className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300",onClick:Ue=>Ue.stopPropagation()}):null}),n.jsxs("td",{className:"py-3 px-4 align-top",onClick:()=>{Je(V),ge(V.id)},children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:Fm(V)||"--"}),n.jsx("div",{className:"text-xs text-gray-500",children:V.title||"No title"})]}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{Je(V),ge(V.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[n.jsx(Tx,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"break-words",children:V.account?.name||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{Je(V),ge(V.id)},children:_e.length>0?n.jsx("div",{className:"space-y-1 text-gray-700",children:_e.map(({Icon:Ue,value:rt,key:bt})=>{const gt=pt.createElement(Ue,{className:"text-gray-500 flex-shrink-0"});return n.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[gt,n.jsx("span",{children:rt})]},bt)})}):n.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{Je(V),ge(V.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[n.jsx(Qt,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:V.department||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{Je(V),ge(V.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(Jt,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:V.assigned_contact?`${V.assigned_contact.first_name} ${V.assigned_contact.last_name}`:"Unassigned"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{Je(V),ge(V.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[n.jsx(Ct,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"text-xs",children:_i(V.created_at)||"--"})]})})]},V.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No contacts found."})})})]})}),n.jsx(en,{className:"mt-4",totalItems:qe.length,pageSize:re,currentPage:Y,onPrev:Ye,onNext:B,onPageSizeChange:V=>{ee(V),oe(1)},pageSizeOptions:[10,20,30,40,50],label:"contacts"})]}),Ce=p?n.jsx("div",{id:"modalBackdrop",onClick:de,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:V=>V.stopPropagation(),children:[n.jsx("button",{onClick:()=>{Se(),Fe(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:v||T,children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:y?"Edit Contact":"Add New Contact"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:Ze,noValidate:!0,children:[n.jsx(_c,{label:"First Name",name:"first_name",value:A.first_name,onChange:ke,placeholder:"First name",required:!0,isSubmitted:Ne}),n.jsx(_c,{label:"Last Name",name:"last_name",value:A.last_name,onChange:ke,placeholder:"Last name",required:!0,isSubmitted:Ne}),n.jsx(O7,{label:"Account",value:A.account_id,onChange:V=>I(_e=>({..._e,account_id:V})),items:y?fe:l||[],getLabel:V=>V?.name??"",placeholder:"Search account...",disabled:v||(y?fe.length===0:l.length===0),required:!0,isSubmitted:Ne}),n.jsx(O7,{label:"Assigned To",value:A.assigned_to,onChange:V=>I(_e=>({..._e,assigned_to:V})),items:c||[],getLabel:V=>`${V?.first_name??""} ${V?.last_name??""} (${V?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:Ne,disabled:v||c.length===0||je?.role==="Sales"}),n.jsx(_c,{label:"Title",name:"title",value:A.title,onChange:ke,placeholder:"Job title",disabled:v}),n.jsx(_c,{label:"Department",name:"department",value:A.department,onChange:ke,placeholder:"Department",disabled:v}),n.jsx(_c,{label:"Email",name:"email",type:"email",value:A.email,onChange:ke,placeholder:"example@email.com",required:!0,isSubmitted:Ne}),n.jsx(_c,{label:"Work Phone",name:"work_phone",value:A.work_phone,onChange:ke,placeholder:"09xx xxx xxxx",disabled:v}),n.jsx(_c,{label:"Mobile Phone 1",name:"mobile_phone_1",value:A.mobile_phone_1,onChange:ke,placeholder:"09xx xxx xxxx",disabled:v}),n.jsx(_c,{label:"Mobile Phone 2",name:"mobile_phone_2",value:A.mobile_phone_2,onChange:ke,placeholder:"09xx xxx xxxx",disabled:v}),n.jsx(xze,{label:"Notes",name:"notes",value:A.notes,onChange:ke,placeholder:"Additional details...",rows:3,disabled:v,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{Se(),Fe(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:v||T,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:v||T,children:v?"Saving...":y?"Update Contact":"Save Contact"})]})]})]})}):null,me=N?n.jsx(yze,{open:!0,title:N.title,message:N.message,confirmLabel:N.confirmLabel,cancelLabel:N.cancelLabel,variant:N.variant,onConfirm:st,onCancel:Ee,loading:T,icon:N.icon,isArchive:N.isArchive}):null;return n.jsxs(n.Fragment,{children:[J,ne,Ce,me]})}function _c({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,isSubmitted:c=!1,className:d=""}){const u=c&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${d}
        `})]})}function O7({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:o,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(pze,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:l,hasError:u})]})}function pze({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,hasError:o=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(v=>String(v.id)===String(t)),y=x?s(x):"",w=h.useMemo(()=>{const v=u.trim().toLowerCase();return(v?e.filter(N=>(s(N)||"").toLowerCase().includes(v)):e).slice(0,l)},[e,u,s,l]);return h.useEffect(()=>{const v=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:y,placeholder:r,onFocus:()=>!i&&d(!0),onChange:v=>{f(v.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${o?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:w.length>0?w.map(v=>{const C=String(v.id),N=s(v),S=String(t)===C;return n.jsx("button",{type:"button",onClick:()=>{a(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:N||"--"},C)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function xze({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:l=!1,className:o=""}){return n.jsxs("div",{className:o,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function yze({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c,icon:d=null,isArchive:u=!1}){if(!e)return null;const f=u?"bg-orange-500 hover:bg-orange-600 border border-orange-400":i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),n.jsxs("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 flex items-center justify-center ${f}`,disabled:l,children:[d&&n.jsx(d,{className:"mr-2",size:18}),l?"Processing...":s]})]})]})})}const Z_=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function EZ({lead:e,onBack:t,fetchLeads:a,onEdit:s,onDelete:r,setSelectedLead:i,relatedActs:l}){const o=yt(),{leadID:c}=Io(),[d,u]=h.useState(e||null),[f,p]=h.useState("Overview"),[x,y]=h.useState(""),w=d?.status?.toUpperCase()==="QUALIFIED",[v,C]=h.useState(null),[N,S]=h.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[T,k]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[_,E]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),A=async()=>{try{if(e){u(e),y(e.status||"New");return}if(!c)return;const M=await ce.get(`/leads/get/${c}`);u(M.data),y(M.data.status||"New"),S({name:M.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:M.data.territory?.id||null,assigned_to:M.data.assigned_to?.id||null,created_by:M.data.creator?.id||null}),k({last_name:M.data.last_name||"",first_name:M.data.first_name||"",account_id:null,title:M.data.title||"",department:M.data.department||"",email:M.data.email||"",work_phone:M.data.work_phone||"",mobile_phone_1:M.data.mobile_phone_1||"",mobile_phone_2:M.data.mobile_phone_2||"",notes:"",assigned_to:M.data.assigned_to?.id||null,created_by:M.data.creator?.id||null}),E({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:M.data.assigned_to?.id||null,created_by:M.data.creator?.id||null})}catch(M){console.error(M)}};h.useEffect(()=>{e?(u(e),y(e.status||"New")):c&&A()},[c,e]);const I=async()=>{try{if(x==="Converted"&&d?.status?.toUpperCase()!=="QUALIFIED"){q.error("Lead must be Qualified before it can be converted.");return}const M=await ce.put(`/leads/${d.id}/update/status`,{status:x});q.success("Lead status updated successfully");const W={...d,status:M.data.status};u(W),i&&i(W),a&&a(),t&&t()}catch(M){console.error(M),q.error("Failed to update lead status")}},z=async M=>{const W={...N,assigned_to:M.assigned_to?.id,billing_address:M.address,shipping_address:M.address,created_by:M.creator?.id,industry:null,name:M.company_name,phone_number:M.work_phone,status:"Prospect",territory_id:M.territory?.id,website:""};console.log("Account data: ",W),console.log("Contact data: ",T),console.log("Deal data: ",_),console.log("Lead data: ",M);try{const R=(await ce.post("/accounts/convertedLead",W)).data.id,Q={...T,account_id:R,assigned_to:M.assigned_to?.id,created_by:M.creator?.id,department:M.department,email:M.email,first_name:M.first_name,last_name:M.last_name,mobile_phone_1:M.mobile_phone_1,mobile_phone_2:M.mobile_phone_2,notes:M.notes,title:M.title,work_phone:M.work_phone},oe=(await ce.post("/contacts/convertedLead",Q)).data.id,re=()=>{switch(_.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},ee=_.amount&&_.amount!==""?parseFloat(_.amount):0,H={..._,account_id:R,assigned_to:M.assigned_to?.id,created_by:M.creator?.id,primary_contact_id:oe,probability:re(),stage:"Prospecting"},ye=await ce.post("/deals/convertedLead",H),te=await ce.put(`/leads/convert/${M.id}`);i&&i(null),a(),q.success("Lead converted successfully!"),t()}catch(Z){console.error("Error during conversion:",Z);const R=Z.response?.data?.detail||Z.message||"Failed to convert lead. Please try again.";q.error(R)}},F=M=>{switch((M||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},D=M=>M.toString().toLowerCase().replace(/\b\w/g,W=>W.toUpperCase());return d?n.jsx(n.Fragment,{children:n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),n.jsx("button",{onClick:()=>{t?t():o(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Vn,{size:25})})]})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[d.first_name," ",d.last_name]}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${F(d.status)}`,children:D(d.status||"New")}),n.jsx("div",{className:"flex flex-col",children:n.jsx("button",{onClick:()=>z(d),disabled:!w,title:w?"Convert Lead":"Lead must be Qualified before converting",className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2
      ${w?"bg-green-600 hover:bg-green-700 text-white focus:ring-green-400":"bg-gray-200 text-gray-400 cursor-not-allowed"}
    `,children:"Convert"})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",onClick:()=>{s&&d&&s(d)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(oa,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",onClick:()=>{r&&d&&r(d)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(zt,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-4 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(M=>n.jsx("button",{onClick:()=>p(M),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${f===M?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:M},M))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[f==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Name:"}),n.jsxs("p",{children:[d.first_name," ",d.last_name||"N/A"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:d.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Job Title:"}),n.jsx("p",{children:d.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:d.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:d.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:d.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:d.assigned_to?`${d.assigned_to.first_name} ${d.assigned_to.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:d.creator?`${d.creator.first_name} ${d.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:d.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Source:"}),n.jsx("p",{children:d.source||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Address:"}),n.jsx("p",{children:d.address||"N/A"})]})]})}),f==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]})]}),f==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[l.tasks&&l.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(v==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Gt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",l.tasks.length,")"]})]}),v==="tasks"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),v==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:l.tasks.map((M,W)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Gt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:M.subject||M.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:M.description||"No description"}),M.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned:"," ",M.assigned_to.first_name," ",M.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Z_(M.due_date||M.created_at)})]},`task-${W}`))})]}),l.meetings&&l.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(v==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ct,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",l.meetings.length,")"]})]}),v==="meetings"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),v==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:l.meetings.map((M,W)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Ct,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:M.subject||M.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:M.description||M.location||"No description"}),M.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",M.host.first_name," ",M.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Z_(M.start_time||M.created_at)})]},`meeting-${W}`))})]}),l.calls&&l.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(v==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(At,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",l.calls.length,")"]})]}),v==="calls"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),v==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:l.calls.map((M,W)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(At,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:M.subject||M.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:M.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Z_(M.call_time||M.created_at)})]},`call-${W}`))})]}),(!l||(!l.tasks||l.tasks.length===0)&&(!l.meetings||l.meetings.length===0)&&(!l.calls||l.calls.length===0)&&(!l.quotes||l.quotes.length===0)&&(!l.deals||l.deals.length===0)&&(!l.contacts||l.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{d&&o("/sales/calls",{state:{openCallModal:!0,initialCallData:{subject:d.title?`Call regarding ${d.title}`:`Call with ${d.first_name} ${d.last_name}`,relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assigned_to:d.assigned_to?.id?String(d.assigned_to.id):"",direction:"Outgoing",status:"Planned"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(At,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const M=encodeURIComponent(d.email),W=encodeURIComponent(""),Z=encodeURIComponent(""),R=`mailto:${M}?subject=${W}&body=${Z}`;window.location.href=R},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Zn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{d&&o("/sales/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:d.title?`Meeting regarding ${d.title}`:`Meeting with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",status:"Planned"}}})},children:[n.jsx(Ct,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{d&&o("/sales/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:d.title?`Follow up on ${d.title}`:`Follow up with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Gt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:x,onChange:M=>y(M.target.value),children:[n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),d?.status?.toUpperCase()==="QUALIFIED"&&n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]}),n.jsx("button",{onClick:I,disabled:x===d.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${x===d.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const bze=Uf.all(),J_=bze.map((e,t)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${t}`})),vze=e=>e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()),wze=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},eA={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function Nze(){const e=yt(),{leadID:t}=Io();Ds();const[a,s]=h.useState(null),[r,i]=h.useState(!1),[l,o]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(!1),[y,w]=h.useState(""),[v,C]=h.useState("Filter by Status"),[N,S]=h.useState(1),[T,k]=h.useState(10),[_,E]=h.useState(eA),[A,I]=h.useState(!1),[z,F]=h.useState(null),[D,M]=h.useState(!1),[W,Z]=h.useState(null),[R,Q]=h.useState(!1),[Y,oe]=h.useState({});h.useRef(null);const[re,ee]=h.useState(!1),[H,ye]=h.useState(null),[te,ve]=h.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[je,Oe]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[$e,pe]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});h.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const Me=async()=>{try{const $=await ce.get("/leads/getUsers");o($.data)}catch($){console.error(`Error fetching users: ${$}`)}},Le=async()=>{x(!0);try{const $=await ce.get("/leads/admin/getLeads");f($.data),console.log($.data)}catch($){console.error(`Error fetching leads: ${$}`)}finally{x(!1)}};h.useEffect(()=>{Me(),Le()},[]);const{user:he}=Kt(),ae=he?.role==="Sales";h.useEffect(()=>{r&&!A&&ae&&he&&!_.lead_owner&&E($=>({...$,lead_owner:he.id}))},[r,A,ae,he,_.lead_owner]),h.useEffect(()=>{if(t&&u.length>0&&!r&&!A){const $=u.find(G=>G.id===Number(t));$&&s($)}else!t&&!a&&s(null)},[t,u,r,A]),h.useEffect(()=>{if(H){const G=(J=>{if(!J)return{code:"+63",number:""};const Ce=J.match(/^(\+\d+)\s(.+)$/);if(Ce)return{code:Ce[1],number:Ce[2]};if(J.startsWith("+")){const me=J.match(/^(\+\d{1,3})/);if(me)return{code:me[1],number:J.substring(me[1].length).trim()}}return{code:"+63",number:J}})(H.work_phone),K=[];H.work_phone&&K.push(`Work: ${H.work_phone}`),H.mobile_phone_1&&K.push(`Mobile 1: ${H.mobile_phone_1}`),H.mobile_phone_2&&K.push(`Mobile 2: ${H.mobile_phone_2}`);const ne=K.length>0?K.join(" | "):"";ve({name:H.company_name||"",website:"",countryCode:G.code,phone_number:G.number,combinedPhoneNumbers:ne,billing_address:H.address||"",shipping_address:H.address||"",industry:"",status:"Prospect",territory_id:H.assigned_to?.territory?.id||null,assigned_to:H.assigned_to?.id||null,created_by:H.creator?.id||null}),Oe({last_name:H.last_name||"",first_name:H.first_name||"",account_id:null,title:H.title||"",department:H.department||"",email:H.email||"",work_phone:H.work_phone||"",mobile_phone_1:H.mobile_phone_1||"",mobile_phone_2:H.mobile_phone_2||"",notes:H.notes||"",assigned_to:H.assigned_to?.id||null,created_by:H.creator?.id||null}),pe({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:H.assigned_to?.id||null,created_by:H.creator?.id||null})}},[H]);const Ae=$=>w($.target.value),ge=h.useMemo(()=>{const $=y.trim().toLowerCase(),G=v.trim().toUpperCase();return u.filter(K=>{const ne=[K?.first_name,K?.last_name,K?.company_name,K?.title,K?.email,K?.work_phone,K?.assigned_to?`${K.assigned_to.first_name} ${K.assigned_to.last_name}`:""],J=$===""||ne.some(me=>me==null||me===""?!1:me.toString().toLowerCase().includes($));let Ce=!1;return G==="FILTER BY STATUS"?Ce=(K.status?K.status.toUpperCase():"")!=="CONVERTED":Ce=(K.status?K.status.toUpperCase():"")===G,J&&Ce})},[u,y,v]),Be=Math.max(1,Math.ceil(ge.length/T)||1);h.useEffect(()=>{S(1)},[y,v]),h.useEffect(()=>{S($=>{const G=Math.max(1,Math.ceil(ge.length/T)||1);return $>G?G:$})},[ge.length,T]);const qe=h.useMemo(()=>{const $=(N-1)*T;return ge.slice($,$+T)},[ge,N,T]),Te=()=>S($=>Math.max($-1,1)),He=()=>S($=>Math.min($+1,Be)),Ye=h.useCallback(async $=>{try{const G=await ce.get(`/activities/lead/${$}`);oe(G.data&&typeof G.data=="object"?G.data:{})}catch(G){console.error(G),G.response?.status===404&&(console.warn("No activities found for this account."),oe({}))}},[]),B=$=>{s($),Ye($.id)},fe=()=>{s(null),t&&e("/admin/leads",{replace:!0})},Se=()=>{i(!1),E(eA),I(!1),F(null),M(!1),d(null),sessionStorage.removeItem("editLeadData")},de=$=>{$.target.id==="modalBackdrop"&&Se()},ke=()=>{E(eA),I(!1),F(null),d(null),i(!0)},se=$=>{if(!$){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",$),console.log("Current state - leadID:",t,"selectedLead:",a,"showModal:",r);const G=me=>{if(!me)return{code:"+63",number:""};const V=me.match(/^(\+\d+)\s(.+)$/);return V?{code:V[1],number:V[2]}:{code:"+63",number:me}},K=G($.work_phone),ne=G($.mobile_phone_1),J=G($.mobile_phone_2);let Ce="";if($.assigned_to){Ce=String($.assigned_to.id);const me=l?.find(V=>V.id===$.assigned_to.id);d(me)}E({first_name:$.first_name||"",last_name:$.last_name||"",company_name:$.company_name||"",title:$.title||"",department:$.department||"",email:$.email||"",work_ccode:K.code,work_phone:K.number,m1_ccode:ne.code,mobile_phone_1:ne.number,m2_ccode:J.code,mobile_phone_2:J.number,address:$.address||"",notes:$.notes||"",source:$.source||"",territory_id:$.territory?.id||null,lead_owner:Ce,status:$.status||"New"}),I(!0),F($.id),a?(console.log("Coming from detail view - closing detail modal and showing edit form"),s(null),i(!0)):(console.log("Already in list view - showing modal"),i(!0))},We=$=>{if(!$){console.error("handleDelete: lead is null or undefined");return}console.log("handleDelete called with lead:",$);const G=`${$.first_name} ${$.last_name}`||"this lead";Z({title:"Delete Lead",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:G}),"? This action cannot be undone."]}),confirmLabel:"Delete Lead",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:$.id,name:G}})},Re=$=>{const{name:G,value:K}=$.target;if(E(ne=>({...ne,[G]:K})),G==="lead_owner"){const ne=l.find(J=>J.id===parseInt(K));d(ne)}},[ct,Ie]=h.useState(!1),ue=$=>{if($.preventDefault(),Ie(!0),!_.last_name?.trim()){q.error("Last name is required.");return}if(!_.company_name?.trim()){q.error("Company is required.");return}if(!_.email?.trim()){q.error("Email is required.");return}if(!_.email.includes("@")){q.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(_.email)){q.error("Please enter a valid email address with a dot in the domain.");return}if(!_.lead_owner){q.error("Please assign a lead owner.");return}const K={..._,territory_id:_.territory_id?parseInt(_.territory_id):null,lead_owner:parseInt(_.lead_owner),work_phone:`${_.work_ccode} ${_.work_phone}`,mobile_phone_1:`${_.m1_ccode} ${_.mobile_phone_1}`,mobile_phone_2:`${_.m2_ccode} ${_.mobile_phone_2}`},ne=A&&z?"update":"create",J=`${_.first_name} ${_.last_name}`;Z({title:ne==="create"?"Confirm New Lead":"Confirm Update",message:ne==="create"?n.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",n.jsx("span",{className:"font-semibold",children:J}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:J}),"?"]}),confirmLabel:ne==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:ne,payload:K,targetId:z||null,name:J}})},Ne=async()=>{if(!W?.action){Z(null);return}const{action:$}=W,{type:G,payload:K,targetId:ne,name:J,lead:Ce}=$;console.log(K),Q(!0);try{if(G==="create")M(!0),await ce.post("/leads/create",K),q.success(`Lead "${J}" created successfully.`),Se(),await Le();else if(G==="update"){if(!ne)throw new Error("Missing lead identifier for update.");M(!0);const me=await ce.put(`/leads/${ne}`,K);q.success(`Lead "${J}" updated successfully.`),a&&a.id===ne&&s(null),Se(),await Le()}else if(G==="delete"){if(!ne)throw new Error("Missing lead identifier for deletion.");await ce.delete(`/leads/${ne}`),q.success(`Lead "${J}" deleted successfully.`),a?.id===ne&&s(null),await Le()}}catch(me){console.error(me);const V=G==="create"?"Failed to create lead. Please review the details and try again.":G==="update"?"Failed to update lead. Please review the details and try again.":"Failed to delete lead. Please try again.",_e=me.response?.data?.detail||V;q.error(_e)}finally{(G==="create"||G==="update")&&M(!1),G!=="edit"&&(Q(!1),Z(null))}},Fe=()=>{R||Z(null)},Ze=u.filter($=>$.status==="New").length,st=u.filter($=>$.status==="Contacted").length,Ee=u.filter($=>$.status==="Qualified").length,Je=u.filter($=>$.status==="Converted").length,be=u.filter($=>$.status==="Lost").length,Ke=[{title:"New",value:Ze,icon:Wn,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:st,icon:At,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:Ee,icon:ba,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:Je,icon:Ro,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:be,icon:Ps,color:"text-red-600",bgColor:"bg-red-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[p&&n.jsx(Rt,{message:"Loading leads..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Wn,{className:"mr-2 text-blue-600"}),"Leads"]}),n.jsx("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{ke(),Ie(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(dn,{className:"mr-2"})," Add Lead"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ke.map($=>n.jsx(Cze,{...$},$.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search leads",value:y,onChange:Ae,className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:v,onChange:$=>C($.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Name"}),n.jsx("th",{className:"py-3 px-4",children:"Company"}),n.jsx("th",{className:"py-3 px-4",children:"Job Title"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:ge.length>0?qe.map($=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>B($),children:[n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[$.first_name," ",$.last_name]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:$.company_name||"--"})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:$.title||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:$.email||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:$.assigned_to?`${$.assigned_to.first_name} ${$.assigned_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${wze($.status||"New")}`,children:vze($.status||"New")})})]},$.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No leads found."})})})]})}),n.jsx(en,{className:"mt-4",totalItems:ge.length,pageSize:T,currentPage:N,onPrev:Te,onNext:He,onPageSizeChange:$=>{k($),S(1)},pageSizeOptions:[10,20,30,40,50],label:"leads"}),r&&n.jsx("div",{id:"modalBackdrop",onClick:de,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:$=>$.stopPropagation(),children:[n.jsx("button",{onClick:()=>{Se(),Ie(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:A?"Edit Lead":"Add New Lead"}),n.jsxs("form",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),n.jsx("input",{type:"text",name:"first_name",value:_.first_name,onChange:Re,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"Smith",name:"last_name",value:_.last_name,onChange:Re,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                      ${ct&&!_.last_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Company ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:_.company_name,onChange:Re,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${ct&&!_.company_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Job Title",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:_.title,onChange:Re,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${ct&&!_.title?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),n.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:_.department,onChange:Re,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Email",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:_.email,onChange:Re,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${ct&&!_.email?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"work_ccode",value:_.work_ccode,onChange:Re,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:J_.map($=>n.jsx("option",{value:$.code,children:$.code},$.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:_.work_phone,onChange:Re,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m1_ccode",value:_.m1_ccode,onChange:Re,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:J_.map($=>n.jsx("option",{value:$.code,children:$.code},$.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:_.mobile_phone_1,onChange:Re,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m2_ccode",value:_.m2_ccode,onChange:Re,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:J_.map($=>n.jsx("option",{value:$.code,children:$.code},$.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:_.mobile_phone_2,onChange:Re,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),n.jsx("input",{type:"text",name:"address",value:_.address,onChange:Re,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:`w-full rounded-lg ${ct&&!_.lead_owner?"border border-red-400":"border border-gray-300"}`,children:n.jsx(Sze,{items:Array.isArray(l)?l:[],value:_.lead_owner??"",placeholder:"Search a user...",disabled:D||ae,getLabel:$=>`${$.first_name} ${$.last_name}`,onChange:$=>{const G=l.find(ne=>String(ne.id)===String($));d(G);let K=null;G&&G.assigned_territory&&G.assigned_territory.length===1&&(K=G.assigned_territory[0].id),E(ne=>({...ne,lead_owner:$,territory_id:K}))}})})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),n.jsxs("select",{name:"territory_id",value:_.territory_id||"",onChange:Re,disabled:!c||!c.assigned_territory||c.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[n.jsx("option",{value:"",disabled:!0,children:c?c.assigned_territory&&c.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),c&&c.assigned_territory&&c.assigned_territory.map($=>n.jsx("option",{value:$.id,children:$.name},$.id))]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),n.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:_.source,onChange:Re,children:[n.jsx("option",{value:"",disabled:!0,children:"Select Source"}),n.jsx("option",{value:"Website",children:"Website"}),n.jsx("option",{value:"Referral",children:"Referral"}),n.jsx("option",{value:"Cold call",children:"Cold call"}),n.jsx("option",{value:"Event",children:"Event"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),n.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:_.notes,onChange:Re,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("button",{type:"button",onClick:()=>{Se(),Ie(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:D||R,children:"Cancel"}),n.jsx("button",{type:"submit",onClick:ue,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:D||R,children:D||R?"Processing...":A?"Update Lead":"Save Lead"})]})]})]})}),W&&n.jsx(jze,{open:!0,title:W.title,message:W.message,confirmLabel:W.confirmLabel,cancelLabel:W.cancelLabel,variant:W.variant,onConfirm:Ne,onCancel:Fe,loading:R}),a&&!r&&!A&&n.jsx(EZ,{relatedActs:Y,lead:a,onBack:fe,fetchLeads:Le,setSelectedLead:s,onEdit:se,onDelete:We})]})}function jze({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),n.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}function Cze({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function Sze({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200}){const[o,c]=h.useState(!1),[d,u]=h.useState(""),f=h.useRef(null),p=e.find(w=>String(w.id)===String(t)),x=p?s(p):"",y=h.useMemo(()=>{const w=d.trim().toLowerCase();return(w?e.filter(C=>(s(C)||"").toLowerCase().includes(w)):e).slice(0,l)},[e,d,s,l]);return h.useEffect(()=>{const w=v=>{f.current&&!f.current.contains(v.target)&&c(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{o||u("")},[o]),n.jsxs("div",{ref:f,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:o?d:x,placeholder:r,onFocus:()=>!i&&c(!0),onChange:w=>{u(w.target.value),o||c(!0)},className:"w-full rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),o&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:y.length>0?y.map(w=>{const v=String(w.id),C=s(w),N=String(t)===v;return n.jsx("button",{type:"button",onClick:()=>{a(v),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${N?"bg-blue-50":""}`,children:C||"--"},v)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}const ab={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},Ha=({label:e,value:t,name:a,className:s=""})=>n.jsxs("div",{className:`flex flex-col ${s}`,children:[n.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),n.jsx("input",{type:"text",name:a,defaultValue:t,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),_ze=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(Ha,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),n.jsx(Ha,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),n.jsx(Ha,{label:"Industry",name:"industry",value:e.industry})]}),n.jsx(Ha,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),n.jsx(Ha,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),Aze=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Ha,{label:"First Name",name:"firstName",value:e.firstName}),n.jsx(Ha,{label:"Last Name",name:"lastName",value:e.lastName}),n.jsx(Ha,{label:"Department",name:"department",value:e.department}),n.jsx(Ha,{label:"Title",name:"title",value:e.title}),n.jsx(Ha,{label:"Work Phone",name:"workPhone",value:e.workPhone}),n.jsx(Ha,{label:"Email",name:"email",value:e.email}),n.jsx(Ha,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),n.jsx(Ha,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),Eze=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Ha,{label:"Deal Name",name:"dealName",value:e.dealName}),n.jsxs("div",{className:"flex",children:[n.jsx(Ha,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),n.jsx("div",{className:"flex flex-col justify-end ml-1",children:n.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),n.jsx(Ha,{label:"Stage",name:"stage",value:e.stage}),n.jsx(Ha,{label:"Territory",name:"territory",value:e.territory})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Ha,{label:"Description",name:"description",value:e.description}),n.jsx(Ha,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function Tze({isOpen:e,onClose:t}){const[a,s]=h.useState(1),r=3;if(!e)return null;const i=()=>{a<r?s(a+1):(t(),s(1))},l=()=>{a>1&&s(a-1)},o=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],c=()=>{switch(a){case 1:return n.jsx(_ze,{data:ab});case 2:return n.jsx(Aze,{data:ab});case 3:return n.jsx(Eze,{data:ab});default:return null}};return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:ab.accountName})]}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:n.jsx(qN,{className:"w-6 h-6"})})]}),n.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:o.map(d=>n.jsx("button",{onClick:()=>s(d.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${a===d.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:d.name},d.id))}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c()}),n.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[a>1&&n.jsx("button",{onClick:l,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),a<r?n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}function kze(){h.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const e=yt(),t=Yt(),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Stage"),[l,o]=h.useState("Filter by Owner"),[c,d]=h.useState(null),[u,f]=h.useState("Overview"),[p,x]=h.useState(!1),[y,w]=h.useState(null),[v,C]=h.useState(!1),[N,S]=h.useState(1),[T,k]=h.useState(10),[_,E]=h.useState(!1),[A,I]=h.useState(null),[z,F]=h.useState(!1),[D,M]=h.useState(!1),[W,Z]=h.useState(null),[R,Q]=h.useState([]),[Y,oe]=h.useState([]),[re,ee]=h.useState([]),[H,ye]=h.useState({}),[te,ve]=h.useState(null);h.useEffect(()=>{const ne=t.state,J=ne?.dealID;if(J&&!ne?.openDealModal){ve(J),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(te&&y?.length>0&&!v){const ne=y.find(J=>J.id===te);ne?d(ne):q.error("Deal not found."),ve(null)}},[te,y,v]);const[je,Oe]=h.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),[$e,pe]=h.useState(null),[Me,Le]=h.useState(null),he={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST","Closed Cancelled Stage":"CLOSED_CANCELLED"},ae=ne=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost",CLOSED_CANCELLED:"Closed Cancelled"})[ne]||ne||"--",Ae=ne=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700",CLOSED_CANCELLED:"bg-red-100 text-red-700"})[ne]||"bg-gray-100 text-gray-700",ge=h.useCallback(async ne=>{try{const J=await ce.get(`/activities/deal/${ne}`);ye(J.data&&typeof J.data=="object"?J.data:{})}catch(J){console.error(J),J.response?.status===404&&(console.warn("No activities found for this account."),ye({}))}},[]),Be=h.useMemo(()=>{const ne=a.trim().toLowerCase(),J=r.trim(),Ce=l.trim();return(y??[]).filter(me=>{const V=[me?.name,me?.description,me?.account?.name,me?.contact?.first_name,me?.contact?.last_name,me?.assigned_deals?.first_name,me?.assigned_deals?.last_name],_e=ne===""||V.some(bt=>bt==null||bt===""?!1:bt.toString().toLowerCase().includes(ne)),Ue=J==="Filter by Stage"||J===""||me.stage===he[J]||me.stage===J,rt=Ce==="Filter by Owner"||Ce===""||`${me.assigned_deals?.first_name||""} ${me.assigned_deals?.last_name||""}`.trim().toLowerCase()===Ce.toLowerCase();return _e&&Ue&&rt})},[y,a,r,l]),qe=Math.max(1,Math.ceil(Be.length/T)||1);h.useEffect(()=>{S(1)},[a,r,l]),h.useEffect(()=>{S(ne=>{const J=Math.max(1,Math.ceil(Be.length/T)||1);return ne>J?J:ne})},[Be.length,T]);const Te=h.useMemo(()=>{const ne=(N-1)*T;return Be.slice(ne,ne+T)},[Be,N,T]),He=()=>S(ne=>Math.max(ne-1,1)),Ye=()=>S(ne=>Math.min(ne+1,qe)),B=()=>{Oe({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),M(!1),Z(null),x(!0)},fe=async()=>{C(!0);try{const ne=await ce.get("/deals/admin/fetch-all"),Ce=[...Array.isArray(ne.data)?ne.data:[]].sort((me,V)=>{const _e=me?.created_at?new Date(me.created_at).getTime():0;return(V?.created_at?new Date(V.created_at).getTime():0)-_e});w(Ce)}catch(ne){ne.response&&ne.response.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch deals. Please try again later."),console.error(ne)}finally{C(!1)}},Se=async()=>{try{const ne=await ce.get("/accounts/admin/fetch-all");Q(Array.isArray(ne.data)?ne.data:[])}catch(ne){console.error(ne),ne.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},de=async()=>{try{const ne=await ce.get("/contacts/admin/fetch-all");oe(Array.isArray(ne.data)?ne.data:[])}catch(ne){console.error(ne),ne.response?.status===403&&q.warn("Unable to load contacts (permission denied).")}},ke=async()=>{try{const ne=await ce.get("/users/all");ee(Array.isArray(ne.data)?ne.data:[])}catch(ne){console.error(ne),ne.response?.status===403&&q.warn("Unable to load users (permission denied).")}};h.useEffect(()=>{fe(),Se(),de(),ke()},[]);const{user:se}=Kt(),We=se?.role==="Sales";h.useEffect(()=>{p&&!D&&We&&se&&!je.assigned_to&&Oe(ne=>({...ne,assigned_to:se.id}))},[p,D,We,se,je.assigned_to]);const Re=async ne=>{ne&&(Oe({id:ne.id||null,name:ne.name||"",account_id:ne.account_id?.toString()||"",primary_contact_id:ne.primary_contact_id?.toString()||"",stage:ne.stage||"PROPOSAL",amount:ne.amount?.toString()||"",close_date:ne.close_date?new Date(ne.close_date).toISOString().split("T")[0]:"",assigned_to:ne.assigned_to?.toString()||"",currency:ne.currency||"PHP",description:ne.description||""}),pe(ne.account||null),Le(ne.contact||null),M(!0),Z(ne.id),d(null),x(!0))},ct=async(ne=!1)=>{try{const J=await ce.get("/deals/admin/fetch-all"),me=[...Array.isArray(J.data)?J.data:[]].sort((V,_e)=>{const Ue=V?.created_at?new Date(V.created_at).getTime():0;return(_e?.created_at?new Date(_e.created_at).getTime():0)-Ue});if(w(me),!ne&&c&&c.id){const V=me.find(_e=>_e.id===c.id);V&&d({...V})}}catch(J){console.error("Failed to refresh deal data:",J),await fe()}},Ie=ne=>{const J=ne.name.trim();if(!J){q.error("Deal name is required.");return}if(!ne.account_id){q.error("Account is required.");return}const Ce=D&&W?"update":"create",me=J;I({title:Ce==="create"?"Confirm New Deal":"Confirm Update",message:Ce==="create"?n.jsxs("span",{children:["Are you sure you want to create"," ",n.jsx("span",{className:"font-semibold",children:me}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:me}),"?"]}),confirmLabel:Ce==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:Ce,formData:ne,targetId:W||null,name:me}})},ue=ne=>{if(!ne)return;const J=ne.name||"this deal";I({title:"Delete Deal",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:J}),"? This action cannot be undone."]}),confirmLabel:"Delete Deal",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:ne.id,name:J}})},Ne=async()=>{if(!A?.action){I(null);return}const{action:ne}=A,{type:J,formData:Ce,targetId:me,name:V}=ne;F(!0);try{if(J==="create"){E(!0);const _e={name:Ce.name.trim(),account_id:parseInt(Ce.account_id),primary_contact_id:Ce.primary_contact_id?parseInt(Ce.primary_contact_id):null,stage:Ce.stage,amount:Ce.amount?parseFloat(Ce.amount):null,currency:Ce.currency||"PHP",close_date:Ce.close_date||null,description:Ce.description||null,assigned_to:Ce.assigned_to?parseInt(Ce.assigned_to):null};await ce.post("/deals/admin/create",_e),q.success(`Deal "${V}" created successfully.`),x(!1),await fe()}else if(J==="update"){if(!me)throw new Error("Missing deal identifier for update.");E(!0);const _e={};Ce.name!==void 0&&(_e.name=Ce.name.trim()),Ce.account_id!==void 0&&Ce.account_id!==""&&(_e.account_id=parseInt(Ce.account_id)),Ce.primary_contact_id!==void 0&&(_e.primary_contact_id=Ce.primary_contact_id?parseInt(Ce.primary_contact_id):null),Ce.stage!==void 0&&(_e.stage=Ce.stage),Ce.amount!==void 0&&Ce.amount!==""&&(_e.amount=parseFloat(Ce.amount)),Ce.currency!==void 0&&(_e.currency=Ce.currency),Ce.close_date!==void 0&&(_e.close_date=Ce.close_date||null),Ce.description!==void 0&&(_e.description=Ce.description||null),Ce.assigned_to!==void 0&&(_e.assigned_to=Ce.assigned_to?parseInt(Ce.assigned_to):null),await ce.put(`/deals/admin/${me}`,_e),q.success(`Deal "${V}" updated successfully.`),x(!1),await fe()}else if(J==="delete"){if(!me)throw new Error("Missing deal identifier for deletion.");await ce.delete(`/deals/admin/${me}`),q.success(`Deal "${V}" deleted successfully.`),c?.id===me&&d(null),await fe()}}catch(_e){console.error(_e);const Ue=J==="create"?"Failed to create deal. Please review the details and try again.":J==="update"?"Failed to update deal. Please review the details and try again.":"Failed to delete deal. Please try again.",rt=_e.response?.data?.detail||Ue;q.error(rt)}finally{(J==="create"||J==="update")&&E(!1),F(!1),I(null)}},Fe=()=>{z||I(null)},Ze=()=>{x(!1),Oe({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),pe(null),Le(null),M(!1),Z(null),E(!1)},st=(y??[]).filter(ne=>ne.stage==="PROSPECTING").length,Ee=(y??[]).filter(ne=>ne.stage==="QUALIFICATION").length,Je=(y??[]).filter(ne=>ne.stage==="PROPOSAL").length,be=(y??[]).filter(ne=>ne.stage==="NEGOTIATION").length,Ke=(y??[]).filter(ne=>ne.stage==="CLOSED_WON").length,$=(y??[]).filter(ne=>ne.stage==="CLOSED_LOST").length,G=(y??[]).filter(ne=>ne.stage==="CLOSED_CANCELLED").length,K=[{title:"Prospecting",value:st,icon:$w,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:Ee,icon:ia,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:Je,icon:Qt,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:be,icon:nu,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:Ke,icon:ba,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:$,icon:Ps,color:"text-red-600",bgColor:"bg-red-100"},{title:"Closed Cancelled",value:G,icon:Ps,color:"text-gray-600",bgColor:"bg-gray-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[v&&n.jsx(Rt,{message:"Loading deals..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Qt,{className:"mr-2 text-blue-600"}),"Deals"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:B,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(dn,{className:"mr-2"})," Add Deal"]})})]}),n.jsx("div",{className:"grid grid-cols-1 p-2 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden",children:K.map(ne=>n.jsx(Pze,{...ne},ne.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search deals",value:a,onChange:ne=>s(ne.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[n.jsxs("select",{value:r,onChange:ne=>i(ne.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),n.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),n.jsx("option",{value:"Qualification Stage",children:"Qualification"}),n.jsx("option",{value:"Proposal Stage",children:"Proposal"}),n.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),n.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),n.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"}),n.jsx("option",{value:"Closed Cancelled Stage",children:"Closed Cancelled"})]}),n.jsxs("select",{value:l,onChange:ne=>o(ne.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((y??[]).map(ne=>`${ne.assigned_deals?.first_name} ${ne.assigned_deals?.last_name}`))].map((ne,J)=>n.jsx("option",{value:ne,children:ne},J))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Stage"}),n.jsx("th",{className:"py-3 px-4",children:"Value"}),n.jsx("th",{className:"py-3 px-4",children:"Close Date"}),n.jsx("th",{className:"py-3 px-4",children:"Owner"})]})}),n.jsx("tbody",{children:Be.length>0?Te.map(ne=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{d({...ne}),ge(ne.id)},children:[n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:ne.deal_id?ne.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:ne.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:ne.description||"--"})]})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:ne.account?.name||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:ne.contact?.first_name&&ne.contact?.last_name?`${ne.contact.first_name} ${ne.contact.last_name}`:ne.contact?.first_name||ne.contact?.last_name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Ae(ne.stage)}`,children:ae(ne.stage)})}),n.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",ne.amount?.toLocaleString()||"0"]}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:ne.close_date||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:ne.assigned_deals?.first_name&&ne.assigned_deals?.last_name?`${ne.assigned_deals.first_name} ${ne.assigned_deals.last_name}`:ne.assigned_deals?.first_name||ne.assigned_deals?.last_name||"--"})]},ne.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No deals found."})})})]})}),n.jsx(en,{className:"mt-4",totalItems:Be.length,pageSize:T,currentPage:N,onPrev:He,onNext:Ye,onPageSizeChange:ne=>{k(ne),S(1)},pageSizeOptions:[10,20,30,40,50],label:"deals"}),p&&n.jsx(Dze,{onClose:Ze,formData:je,setFormData:Oe,isEditing:D,onSubmit:Ie,isSubmitting:_||z,accounts:R,contacts:Y,users:re,currentAccount:$e,currentContact:Me}),c&&n.jsx(Jx,{relatedActs:H,selectedDeal:c,show:!!c,onClose:()=>d(null),activeTab:u,setActiveTab:f,onEdit:Re,onDelete:ue,onStatusUpdate:ct}),A&&n.jsx(Lze,{open:!0,title:A.title,message:A.message,confirmLabel:A.confirmLabel,cancelLabel:A.cancelLabel,variant:A.variant,onConfirm:Ne,onCancel:Fe,loading:z})]})}function Lze({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),n.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}function Pze({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function Dze({onClose:e,formData:t,setFormData:a,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,accounts:l=[],contacts:o=[],users:c=[],currentAccount:d=null,currentContact:u=null}){const{user:f}=Kt(),p=f?.role==="Sales";h.useEffect(()=>{!s&&p&&f&&!t.assigned_to&&a(N=>({...N,assigned_to:f.id}))},[s,p,f,t.assigned_to,a]);const[x,y]=h.useState(!1),w=N=>{if(N.preventDefault(),y(!0),!t.name?.trim()){q.error("Deal name is required.");return}const S=Number(t.amount);if(!t.amount||isNaN(S)||S<=0){q.error("Amount must be a number greater than 0.");return}if(!t.account_id){q.error("Please select an account.");return}if(!t.primary_contact_id){q.error("Please select a primary contact.");return}r?.(t)},v=N=>{N.target.id==="modalBackdrop"&&e()},C=h.useMemo(()=>{const N=String(t.account_id||"").trim(),S=Array.isArray(o)?o:[];return N?S.filter(T=>{const _=[T?.account_id,T?.accountId,T?.account?.id,T?.account?.account_id,T?.account?.accountId].find(E=>E!=null&&String(E).trim()!=="");return _?String(_)===N:!1}):S},[o,t.account_id]);return h.useEffect(()=>{const N=String(t.account_id||"").trim(),S=String(t.primary_contact_id||"").trim();if(!S||!N)return;C.some(k=>String(k?.id)===S)||a(k=>({...k,primary_contact_id:""}))},[t.account_id,t.primary_contact_id,C,a]),n.jsx("div",{id:"modalBackdrop",onClick:v,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:N=>N.stopPropagation(),children:[n.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Deal":"Create Deal"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:w,noValidate:!0,children:[n.jsx(tA,{label:"Deal Name",name:"name",value:t.name,onChange:N=>a({...t,name:N.target.value}),placeholder:"Enter deal name",required:!0,isSubmitted:x,className:"md:col-span-2"}),n.jsx(nA,{label:"Account",value:t.account_id||"",onChange:N=>a({...t,account_id:N}),items:l||[],getLabel:N=>N?.name??"",placeholder:"Search account...",disabled:i,currentItem:d,required:!0,isSubmitted:x}),n.jsx(nA,{label:"Primary Contact",value:t.primary_contact_id||"",onChange:N=>a({...t,primary_contact_id:N}),items:C||[],getLabel:N=>`${N?.first_name??""} ${N?.last_name??""}`.trim()||N?.email||"",placeholder:"Search contact...",disabled:i,currentItem:u,required:!0,isSubmitted:x}),n.jsx(M7,{label:"Stage",name:"stage",value:t.stage,onChange:N=>a({...t,stage:N.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}],disabled:i}),n.jsx(tA,{label:"Amount",name:"amount",type:"number",step:"0",value:t.amount,onChange:N=>a({...t,amount:N.target.value}),placeholder:"0",required:!0,isSubmitted:x}),n.jsx(M7,{label:"Currency",name:"currency",value:t.currency||"PHP",onChange:N=>a({...t,currency:N.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),n.jsx(tA,{label:"Close Date",name:"close_date",type:"date",value:t.close_date||"",onChange:N=>a({...t,close_date:N.target.value}),disabled:i}),n.jsx(nA,{label:"Assign To",value:t.assigned_to||"",onChange:N=>a({...t,assigned_to:N}),items:c||[],getLabel:N=>`${N?.first_name??""} ${N?.last_name??""}`.trim()||N?.email||"",placeholder:"Search assignee...",required:!0,disabled:i||p,className:"md:col-span-2"}),n.jsx(Mze,{label:"Description",name:"description",value:t.description,onChange:N=>a({...t,description:N.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Deal":"Save Deal"})]})]})]})})}function tA({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function M7({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:l=!1,className:o=""}){return n.jsxs("div",{className:o,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))})]})}function nA({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",currentItem:c=null,required:d=!1,isSubmitted:u=!1}){const f=u&&d&&!a;return n.jsxs("div",{className:o,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",d&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(Oze,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:l,currentItem:c,hasError:f})]})}function Oze({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,currentItem:o=null,hasError:c={hasError:c}}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),w=e.find(N=>String(N.id)===String(t))||o,v=w?s(w):"",C=h.useMemo(()=>{const N=f.trim().toLowerCase();return(N?e.filter(T=>(s(T)||"").toLowerCase().includes(N)):e).slice(0,l)},[e,f,s,l]);return h.useEffect(()=>{const N=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:v,placeholder:r,onFocus:()=>!i&&u(!0),onChange:N=>{p(N.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${c?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:C.length>0?C.map(N=>{const S=String(N.id),T=s(N),k=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:T||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function Mze({label:e,name:t,value:a,onChange:s,placeholder:r,required:i=!1,disabled:l=!1,className:o="",rows:c=3}){return n.jsxs("div",{className:o,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,required:i,disabled:l,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function Wj({selectedDeal:e,onStatusUpdate:t,onClose:a}){const[s,r]=h.useState(e?.stage||""),[i,l]=h.useState(!1),o=yt(),{user:c}=Kt();h.useEffect(()=>{console.log("AdminDealsInformation mounted sahdksd",e),console.log("User sadad:",c)},[e,c]);const d=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}];h.useEffect(()=>{e?.stage&&r(e.stage)},[e]);const u=async()=>{if(!e||!e.id){q.error("No deal selected");return}if(!s||s===e.stage){q.info("Please select a different stage");return}const f=e.id;l(!0);try{await ce.put(`/deals/admin/${f}`,{stage:s}),a&&a(),t&&setTimeout(async()=>{await t(!0)},100),setTimeout(()=>{q.success("Deal status updated successfully")},300)}catch(p){console.error(p);const x=p.response?.data?.detail||"Failed to update deal status";q.error(x)}finally{l(!1)}};return e?n.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>o("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Deal"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(At,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const f=encodeURIComponent(e.contact.email),p=encodeURIComponent(""),x=encodeURIComponent(""),y=`mailto:${f}?subject=${p}&body=${x}`;window.location.href=y},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Zn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>o("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Deal"}}}),children:[n.jsx(Ct,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>o("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Deal"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Gt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:s,onChange:f=>r(f.target.value),disabled:i||e.created_by!==c?.id&&e.assigned_to!==c?.id,children:d.map(f=>n.jsx("option",{value:f.value,children:f.label},f.value))}),(e.created_by===c?.id||e.assigned_to===c?.id)&&n.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:u,disabled:i||!s||s===e.stage,children:i?"Updating...":"Update"})]})]}):null}function Ize({selectedDeal:e,show:t,onClose:a,activeTab:s,setActiveTab:r,onEdit:i,onDelete:l,onStatusUpdate:o}){const c=yt(),[d]=Ds(),u=d.get("id"),[f,p]=h.useState(e||null),[x,y]=h.useState(s||"Overview"),{user:w}=Kt();h.useEffect(()=>{console.log("SalesDealsInformation mounted",f),console.log("User:",w)},[f,w]);const v=s!==void 0?s:x;if(h.useEffect(()=>{(async()=>{if(u&&!e)try{console.log("Fetching deal from route, ID:",u);const k=(await ce.get("/deals/admin/fetch-all")).data||[];console.log("All deals fetched:",k.length);const _=k.find(E=>E.id===parseInt(u));if(console.log("Found deal:",_),_){console.log("Deal data structure:",{id:_.id,name:_.name,amount:_.amount,stage:_.stage,account:_.account,contact:_.contact,assigned_deals:_.assigned_deals,deal_creator:_.deal_creator,allKeys:Object.keys(_)});const E={..._,amount:typeof _.amount=="number"?_.amount:parseFloat(_.amount||0),probability:_.probability||0};p(E)}else console.warn("Deal not found with ID:",u)}catch(T){console.error("Error fetching deal:",T)}})()},[u,e]),!f&&!u||u&&!f)return null;const C=S=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[S]||"bg-gray-100 text-gray-700";function N(S){return S?new Date(S).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),n.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:n.jsx("button",{onClick:()=>{a?a():c(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Vt,{size:25})})})]})}),n.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:n.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[n.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:f.name}),n.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${C(f.stage)}`,children:f.stage})]}),n.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",N(f.created_at)]})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2",children:[n.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[" ",f.amount?f.amount.toLocaleString():"0"]}),n.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${f.probability}%`}})}),n.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",f.probability,"% Complete "]}),(f.created_by===w?.id||f.assigned_to===w?.id)&&n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[n.jsxs("button",{type:"button",onClick:()=>{i&&i(f)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(oa,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),n.jsxs("button",{type:"button",onClick:()=>{l&&l(f)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(zt,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(S=>n.jsx("button",{onClick:()=>{r?r(S):y(S)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${v===S?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:S},S))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[v==="Overview"&&n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Description:"})," ",f.description]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Expected Close Date:"})," ",f.close_date]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("div",{className:"mt-4 py-3 w-full",children:[n.jsxs("div",{className:"relative flex flex-col w-full",children:[n.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const S=(f?.stage||"PROSPECTING").toUpperCase(),k=(E=>E==="PROSPECTING"?0:E==="QUALIFICATION"?1:E==="PROPOSAL"?2:E==="NEGOTIATION"?3:E==="CLOSED_WON"||E==="CLOSED_LOST"?4:-1)(S);return[0,1,2,3,4].map(E=>k===E?"orange":k>E?"green":"gray").map((E,A)=>n.jsxs(pt.Fragment,{children:[n.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${E==="green"?"bg-green-500 border-green-500":E==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),A<4&&n.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},A))})()}),n.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((S,T)=>n.jsx("span",{className:"text-center flex-1 break-words",children:S},T))})]}),n.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:f.stage})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),n.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Account:"})," ",f.account?.name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Primary Contact:"})," ",f.contact?.first_name," ",f.contact?.last_name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Phone:"})," ",f.contact?.work_phone]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",f.contact?.email]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Assigned To:"})," ",f.assigned_deals?.first_name," ",f.assigned_deals?.last_name]})]})]})]}),v==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:f.description||"No notes available."})]})]}),v==="Activities"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:At,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:Ct,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((S,T)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[n.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-gray-600 mt-1",children:n.jsx(S.icon,{size:24})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-gray-900 break-words",children:S.title}),n.jsx("p",{className:"text-sm text-gray-500 break-words",children:S.desc}),n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),n.jsx("p",{className:"text-sm text-gray-700 break-words",children:S.user})]})]})]}),n.jsx("p",{className:"text-sm text-gray-500 break-words",children:S.date})]},T))]}),v==="Edit"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),n.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:f.name})]}),n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),n.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:f.description})]}),n.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),n.jsx("div",{className:"w-full lg:w-auto",children:n.jsx(Wj,{selectedDeal:f,onStatusUpdate:o,onClose:a})})]})]})]})})}function $ze({selectedDeal:e,onStatusUpdate:t,onClose:a}){const[s,r]=h.useState(e?.stage||""),[i,l]=h.useState(!1),o=yt(),{user:c}=Kt();h.useEffect(()=>{console.log("AdminDealsInformation mounted sahdksd",e),console.log("User sadad:",c)},[e,c]);const d=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"}];h.useEffect(()=>{e?.stage&&r(e.stage)},[e]);const u=async()=>{if(!e||!e.id){q.error("No deal selected");return}if(!s||s===e.stage){q.info("Please select a different stage");return}const f=e.id;l(!0);try{await ce.put(`/deals/admin/${f}`,{stage:s}),a&&a(),t&&setTimeout(async()=>{await t(!0)},100),setTimeout(()=>{q.success("Deal status updated successfully")},300)}catch(p){console.error(p);const x=p.response?.data?.detail||"Failed to update deal status";q.error(x)}finally{l(!1)}};return e?n.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>o("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Deal"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(At,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const f=encodeURIComponent(e.contact.email),p=encodeURIComponent(""),x=encodeURIComponent(""),y=`https://mail.google.com/mail/?view=cm&fs=1&to=${f}&su=${p}&body=${x}`;window.open(y,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Zn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>o("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Deal"}}}),children:[n.jsx(Ct,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>o("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Deal"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Gt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:s,onChange:f=>r(f.target.value),disabled:i||e.created_by!==c?.id&&e.assigned_to!==c?.id,children:d.map(f=>n.jsx("option",{value:f.value,children:f.label},f.value))}),(e.created_by===c?.id||e.assigned_to===c?.id)&&n.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:u,disabled:i||!s||s===e.stage,children:i?"Updating...":"Update"})]})]}):null}const aA=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],sA={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:"",subtotal:0,tax_rate:0,tax_amount:0,discount_type:"",discount_value:0,discount_amount:0,currency:"PHP",items:[]},Ei=e=>{if(!e)return"Draft";const t=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[t]||"Draft"},rA=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",Rze=e=>{switch(Ei(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},zze=e=>{switch(Ei(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},sb=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",hg=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",Fze=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const t=new Date(e);if(isNaN(t.getTime()))return"";const a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`}catch{return""}},iA=(e,t)=>{if(!e||t==null||t==="")return"";const a=Number(t);if(Number.isNaN(a))return"";const s=new Date(e);return isNaN(s.getTime())?"":(s.setDate(s.getDate()+a),s.toISOString().slice(0,10))},I7=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},$7=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},fw=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},Uze=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const s of e){const r=localStorage.getItem(s);if(r)try{const i=JSON.parse(r),l=fw(i);if(l)return l}catch{}}const t=localStorage.getItem("user_id"),a=fw(t);return a||null},Bze=e=>{if(!e)return"";const a=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""},Hze=e=>{if(!e)return"";const a=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""};function Gze(){const e=yt(),t=Yt(),{user:a}=Kt(),s=a?.company?.currency||"";h.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[r,i]=h.useState([]),[l,o]=h.useState(!1),[c,d]=h.useState([]),[u,f]=h.useState([]),[p,x]=h.useState([]),[y,w]=h.useState([]),[v,C]=h.useState(null),[N,S]=h.useState(null),[T,k]=h.useState(!1),[_,E]=h.useState(!1),[A,I]=h.useState(!1),[z,F]=h.useState(null),[D,M]=h.useState(!1),[W,Z]=h.useState(null),[R,Q]=h.useState(sA),[Y,oe]=h.useState(""),[re,ee]=h.useState("Filter by Status"),[H,ye]=h.useState(null),[te,ve]=h.useState(1),[je,Oe]=h.useState(10),[$e,pe]=h.useState("Overview"),[Me,Le]=h.useState("Draft"),[he,ae]=h.useState([]),[Ae,ge]=h.useState(null);h.useEffect(()=>{const U=t.state?.quoteID;if(U){ge(U),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(Ae&&r.length>0&&!l){const L=r.find(U=>U.id===Ae);L?S(L):q.error("Quote not found."),ge(null)}},[Ae,p,l]),h.useEffect(()=>{let L=!0;return(async()=>{const xe=Uze();if(xe&&L){C(xe);return}try{const De=await ce.get("/auth/me"),ie=fw(De?.data);if(ie&&L){C(ie);return}}catch{}try{const De=await ce.get("/users/me"),ie=fw(De?.data);if(ie&&L){C(ie);return}}catch{}L&&C(null)})(),()=>{L=!1}},[]);const Be=h.useCallback(L=>L&&u.find(xe=>String(xe.id)===String(L))?.name||"",[u]),qe=h.useCallback(L=>{if(!L)return"";const U=p.find(xe=>String(xe.id)===String(L));return U?`${U.first_name} ${U.last_name}`.trim():""},[p]),Te=h.useCallback(L=>{if(!L)return"--";const U=c.find(xe=>String(xe.id)===String(L));return U?.deal_name||U?.name||`Deal #${I7(L)}`},[c]),He=h.useCallback(L=>{const U=c.find(ie=>String(ie.id)===String(L)),xe=Bze(U);let De=Hze(U);if(!De&&xe){const ie=p.filter(Pe=>String(Pe.account_id||"")===String(xe));if(ie.length>0){const Pe=[...ie].sort((Qe,vt)=>{const ht=`${Qe.first_name||""} ${Qe.last_name||""}`.trim().toLowerCase(),Ut=`${vt.first_name||""} ${vt.last_name||""}`.trim().toLowerCase();return ht.localeCompare(Ut)});De=String(Pe[0].id)}}if(xe&&De){const ie=p.find(Pe=>String(Pe.id)===String(De));ie?.account_id&&String(ie.account_id)!==String(xe)&&(De="")}return{accountId:xe||"",contactId:De||""}},[c,p]),Ye=h.useCallback(L=>{if(!L)return"--";if(L.deal?.deal_name)return L.deal.deal_name;if(L.deal?.name)return L.deal.name;const U=L.deal_id||L.deal?.id;return U?Te(U):"--"},[Te]),B=h.useCallback(L=>{if(!L)return"--";if(L.account?.name)return L.account.name;let U=L.account_id||L.account?.id;if(!U){const xe=L.deal_id||L.deal?.id;xe&&(U=He(xe).accountId)}return U?Be(U)||`Account #${U}`:"--"},[He,Be]),fe=h.useCallback(L=>{if(!L)return"--";if(L.contact?.first_name||L.contact?.last_name)return`${L.contact?.first_name||""} ${L.contact?.last_name||""}`.trim()||"--";let U=L.contact_id||L.contact?.id;if(!U){const De=L.deal_id||L.deal?.id;De&&(U=He(De).contactId)}return(U?qe(U):"")||(U?`Contact #${U}`:"--")},[He,qe]),Se=h.useCallback(async(L=null)=>{o(!0);try{const U=await ce.get("/quotes/admin/fetch-all"),De=[...Array.isArray(U.data)?U.data:[]].sort((ie,Pe)=>{const Qe=ie?.created_at||ie?.updated_at||0,vt=Pe?.created_at||Pe?.updated_at||0;return new Date(vt)-new Date(Qe)});if(i(De),L){const ie=De.find(Pe=>Pe.id===L);S(ie||null)}}catch(U){console.error(U),i([]),U.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch quotes. Please try again later.")}finally{o(!1)}},[]),de=h.useCallback(async()=>{try{const L=await ce.get("/deals/admin/fetch-all");d(Array.isArray(L.data)?L.data:[])}catch(L){console.error(L),L.response?.status===403&&q.warn("Unable to load deals (permission denied).")}},[]),ke=h.useCallback(async()=>{try{const L=await ce.get("/accounts/admin/fetch-all");f(Array.isArray(L.data)?L.data:[])}catch(L){console.error(L),L.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},[]),se=h.useCallback(async()=>{try{const L=await ce.get("/contacts/admin/fetch-all");x(Array.isArray(L.data)?L.data:[])}catch(L){console.error(L),L.response?.status===403&&q.warn("Unable to load contacts (permission denied).")}},[]),We=h.useCallback(async()=>{try{const L=await ce.get("/users/all");w(Array.isArray(L.data)?L.data:[])}catch(L){console.error(L),L.response?.status===403&&q.warn("Unable to load users (permission denied).")}},[]);h.useEffect(()=>{Se(),de(),ke(),se(),We()},[Se,de,ke,se,We]);const Re=h.useMemo(()=>{const L=Y.trim().toLowerCase(),U=re.trim();return r.filter(xe=>{const De=Ye(xe),ie=B(xe),Pe=fe(xe),Qe=iA(xe.presented_date,xe.validity_days),vt=[xe.quote_id,De,ie,Pe,xe.total_amount?.toString(),xe.validity_days?.toString(),xe.presented_date?hg(xe.presented_date):"",Qe?hg(Qe):"",xe.assigned_user?.first_name,xe.assigned_user?.last_name,xe.creator?.first_name,xe.creator?.last_name,xe.status,xe.notes,sb(xe.created_at),sb(xe.updated_at)],ht=L===""||vt.some(wn=>wn==null?!1:wn.toString().toLowerCase().includes(L)),Ut=U==="Filter by Status"||Ei(xe.status)===U;return ht&&Ut})},[r,Y,re,Ye,B,fe]),ct=Math.max(1,Math.ceil(Re.length/je)||1);h.useEffect(()=>ve(1),[Y,re]),h.useEffect(()=>{ve(L=>{const U=Math.max(1,Math.ceil(Re.length/je)||1);return L>U?U:L})},[Re.length,je]);const Ie=h.useMemo(()=>{const L=(te-1)*je;return Re.slice(L,L+je)},[Re,te,je]),ue=()=>ve(L=>Math.max(L-1,1)),Ne=()=>ve(L=>Math.min(L+1,ct)),Fe=L=>{S(L),pe("Overview"),Le(Ei(L?.status)||"Draft")},Ze=()=>{S(null),pe("Overview")},st=L=>{L.target.id==="quoteModalBackdrop"&&!D&&Ze()},Ee=h.useCallback(()=>{k(!1),E(!1),Z(null),Q(sA),I(!1)},[]),Je=L=>{L.target.id==="modalBackdrop"&&!A&&!D&&Ee()},be=L=>{const{name:U,value:xe}=L.target;if(U==="deal_id"){const{accountId:De,contactId:ie}=He(xe);Q(Pe=>({...Pe,deal_id:xe,account_id:De,contact_id:ie}));return}Q(De=>({...De,[U]:xe}))},Ke=()=>{Q(sA),E(!1),Z(null),k(!0)},$=L=>{if(!L)return;S(null);const U=L.deal?.id?String(L.deal.id):L.deal_id?String(L.deal_id):"",xe=U?He(U):{accountId:"",contactId:""},De=L.account?.id?String(L.account.id):L.account_id?String(L.account_id):xe.accountId,ie=L.contact?.id?String(L.contact.id):L.contact_id?String(L.contact_id):xe.contactId,Pe=L.assigned_user?.id?String(L.assigned_user.id):L.assigned_to?String(L.assigned_to):"";Q({deal_id:U,account_id:De||"",contact_id:ie||"",total_amount:L.total_amount?.toString()||"",presented_date:Fze(L.presented_date),validity_days:L.validity_days!==null&&L.validity_days!==void 0?String(L.validity_days):"",status:Ei(L.status)||"Draft",assigned_to:Pe,notes:L.notes||"",subtotal:parseFloat(L.subtotal)||0,tax_rate:parseFloat(L.tax_rate)||0,tax_amount:parseFloat(L.tax_amount)||0,discount_type:L.discount_type||"",discount_value:parseFloat(L.discount_value)||0,discount_amount:parseFloat(L.discount_amount)||0,currency:L.currency||"PHP",items:Array.isArray(L.items)?L.items.map(Qe=>({id:Qe.id,item_type:Qe.item_type||"Product",name:Qe.name||"",description:Qe.description||"",sku:Qe.sku||"",variant:Qe.variant||"",unit:Qe.unit||"pcs",quantity:parseFloat(Qe.quantity)||1,unit_price:parseFloat(Qe.unit_price)||0,discount_percent:parseFloat(Qe.discount_percent)||0,discount_amount:parseFloat(Qe.discount_amount)||0,line_total:parseFloat(Qe.line_total)||0,sort_order:Qe.sort_order||0})):[]}),E(!0),Z(L.id),k(!0)},G=L=>{if(L.target.checked){const U=Ie.map(xe=>xe.id);ae(U)}else ae([])},K=L=>{ae(U=>U.includes(L)?U.filter(xe=>xe!==L):[...U,L])},ne=L=>{if(!L)return;const U=L.quote_id||"this quote";F({title:"Delete Quote",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:U}),"? This action cannot be undone."]}),confirmLabel:"Delete Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:L.id,name:U}})},J=async()=>{he.length!==0&&F({title:"Delete Quotes",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:he.length})," selected quotes? This action cannot be undone."]}),confirmLabel:`Delete ${he.length} Quote(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",quote_ids:he}})},[Ce,me]=h.useState(!1),V=L=>{if(L.preventDefault(),me(!0),!v){q.error("Unable to determine current user. Please log in again.");return}if(!R.deal_id){q.error("Deal is required.");return}if(!R.assigned_to){q.error("Assigned To is required.");return}const xe=He(R.deal_id),De=R.items.map((ht,Ut)=>({item_type:ht.item_type||"Product",name:ht.name,description:ht.description||null,sku:ht.sku||null,variant:ht.variant||null,unit:ht.unit||null,quantity:parseFloat(ht.quantity)||1,unit_price:parseFloat(ht.unit_price)||0,discount_percent:parseFloat(ht.discount_percent)||0,sort_order:ht.sort_order??Ut})),ie={deal_id:Number(R.deal_id),account_id:xe.accountId?Number(xe.accountId):null,contact_id:xe.contactId?Number(xe.contactId):null,subtotal:parseFloat(R.subtotal)||0,tax_rate:parseFloat(R.tax_rate)||0,tax_amount:parseFloat(R.tax_amount)||0,discount_type:R.discount_type||null,discount_value:parseFloat(R.discount_value)||0,discount_amount:parseFloat(R.discount_amount)||0,total_amount:parseFloat(R.total_amount)||0,currency:R.currency||"PHP",presented_date:R.presented_date||null,validity_days:R.validity_days===""?null:Number(R.validity_days),status:R.status||"Draft",assigned_to:R.assigned_to?Number(R.assigned_to):null,notes:R.notes?.trim()||null,items:De},Pe=_&&W?"update":"create",Qe=Te(R.deal_id),vt=Pe==="create"?{...ie,created_by_id:Number(v)}:ie;F({title:Pe==="create"?"Confirm New Quote":"Confirm Update",message:Pe==="create"?n.jsxs("span",{children:["Are you sure you want to create a quote for"," ",n.jsx("span",{className:"font-semibold",children:Qe}),"?"]}):n.jsxs("span",{children:["Save changes to"," ",n.jsx("span",{className:"font-semibold",children:Qe}),"?"]}),confirmLabel:Pe==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:Pe,payload:vt,targetId:W||null,name:Qe}})},_e=async()=>{if(!z?.action){F(null);return}const{action:L}=z,{type:U,payload:xe,targetId:De,name:ie}=L;M(!0);try{if(U==="create")I(!0),await ce.post("/quotes/admin",xe),q.success("Quote created successfully."),Ee(),await Se();else if(U==="update"){if(!De)throw new Error("Missing quote identifier for update.");I(!0),await ce.put(`/quotes/admin/${De}`,xe),q.success("Quote updated successfully."),Ee(),await Se(),N?.id===De&&S(null)}else if(U==="delete"){if(!De)throw new Error("Missing quote identifier for deletion.");const Pe=N?.id;ye(De),await ce.delete(`/quotes/admin/${De}`),q.success(`Quote "${ie}" deleted successfully.`),await Se(Pe&&Pe!==De?Pe:null),Pe===De&&S(null)}else U==="bulk-delete"&&(await ce.post("/quotes/admin/bulk-delete",{quote_ids:he}),q.success(`Successfully deleted ${he.length} quotes`),ae([]),await Se())}catch(Pe){console.error(Pe);const Qe=U==="create"?"Failed to create quote. Please review the details and try again.":U==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";q.error(Qe),(U==="create"||U==="update")&&I(!1),U==="delete"&&ye(null)}finally{(U==="create"||U==="update")&&I(!1),U==="delete"&&ye(null),M(!1),F(null)}},Ue=()=>{D||F(null)},rt=h.useCallback((L,U)=>{const xe=L?.deal_id??L?.deal?.id??"",De=xe?Number(xe):null,ie=De?He(String(De)):{accountId:"",contactId:""},Pe=L?.account_id??L?.account?.id??ie.accountId??null,Qe=L?.contact_id??L?.contact?.id??ie.contactId??null,vt=L?.total_amount??0,ht=L?.assigned_to??L?.assigned_user?.id??null;return{deal_id:De,account_id:Pe!=null&&String(Pe).trim()!==""?Number(Pe):null,contact_id:Qe!=null&&String(Qe).trim()!==""?Number(Qe):null,total_amount:Number(vt),presented_date:L?.presented_date||null,validity_days:L?.validity_days===""||L?.validity_days===void 0||L?.validity_days===null?null:Number(L.validity_days),status:U,assigned_to:ht!=null&&String(ht).trim()!==""?Number(ht):null,notes:L?.notes?.trim()||null}},[He]),bt=h.useCallback(async()=>{if(!N?.id)return;const L=Ei(Me),U=[L,L.toLowerCase()],xe=async De=>ce.patch(`/quotes/admin/${N.id}/status`,{status:De},{headers:{"Content-Type":"application/json"}});try{let De=!1;for(const ie of U)try{await xe(ie),De=!0;break}catch(Pe){if(Pe?.response?.status===422)continue;throw Pe}if(!De){const ie=rt(N,L);if(!ie.deal_id){q.error("Cannot update status: missing deal_id on selected quote.");return}if(!ie.total_amount||ie.total_amount<=0){q.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await ce.put(`/quotes/admin/${N.id}`,ie)}q.success(`Quote status updated to ${L}`),S(null),pe("Overview"),await Se()}catch(De){console.error(De);const ie=De?.response?.data?.message||(De?.response?.data?.errors?Object.values(De.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";q.error(ie)}},[N,Me,Se,rt]),gt=[{label:"Filter by Status",value:"Filter by Status"},...aA.map(L=>({label:L.label,value:L.value}))],_t=z?.action?.type==="delete"?z.action.targetId:null,Wt=N&&(H===N.id||_t===N.id),un=N&&H===N.id,le=N?n.jsx("div",{id:"quoteModalBackdrop",onClick:st,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:L=>L.stopPropagation(),children:[n.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:n.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),n.jsx("button",{onClick:Ze,className:"text-gray-500 hover:text-white transition cursor-pointer",children:n.jsx(Vn,{size:25})})]})}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:Ye(N)}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${zze(N.status)}`,children:rA(N.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>$(N),disabled:D||z?.action?.type==="update"&&z.action.targetId===N.id,children:[n.jsx(ia,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>ne(N),disabled:!!Wt,children:un?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(zt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-1 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(L=>n.jsx("button",{onClick:()=>pe(L),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${$e===L?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:L},L))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[$e==="Overview"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Quote ID:"}),n.jsx("p",{children:$7(N.quote_id)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Deal:"}),n.jsx("p",{children:Ye(N)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Account:"}),n.jsx("p",{children:B(N)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact:"}),n.jsx("p",{children:fe(N)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Total Amount:"}),n.jsx("p",{children:N.total_amount?`${s}${Number(N.total_amount).toLocaleString()}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Presented Date:"}),n.jsx("p",{children:hg(N.presented_date)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Validity Days:"}),n.jsx("p",{children:N.validity_days!==null&&N.validity_days!==void 0?N.validity_days:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),n.jsx("p",{children:hg(iA(N.presented_date,N.validity_days))||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:rA(N.status)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:N.assigned_user?`${N.assigned_user.first_name} ${N.assigned_user.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:N.creator?`${N.creator.first_name} ${N.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:sb(N.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:sb(N.updated_at)||"N/A"})]})]}),N.items&&N.items.length>0&&n.jsx("div",{className:"mt-6",children:n.jsx(nd,{items:N.items,onChange:()=>{},currencySymbol:s,readOnly:!0,taxRate:parseFloat(N.tax_rate)||0,discountType:N.discount_type,discountValue:parseFloat(N.discount_value)||0})})]}),$e==="Notes"&&n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),n.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:N.notes||"No notes available."})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(At,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Quotes"}}}),children:[n.jsx(Ct,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Gt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:Me||Ei(N.status)||"Draft",onChange:L=>Le(L.target.value),children:aA.map(L=>n.jsx("option",{value:L.value,children:L.label},L.value))}),n.jsx("button",{onClick:bt,disabled:Ei(Me)===Ei(N.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Ei(Me)===Ei(N.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,it=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[l&&n.jsx(Rt,{message:"Loading quotes..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(xn,{className:"mr-2 text-blue-600"})," Quotes"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto gap-2",children:n.jsxs("button",{onClick:()=>{Ke(),me(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(dn,{className:"mr-2"})," Add Quote"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search quotes",value:Y,onChange:L=>oe(L.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:re,onChange:L=>ee(L.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:gt.map(L=>n.jsx("option",{value:L.value,children:L.label},L.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:Ie.length>0&&he.length===Ie.length,onChange:G,className:"cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),n.jsx("th",{className:"py-3 px-4",children:"Deal"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Expiry Date"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:he.length>0?n.jsx("button",{onClick:J,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${he.length} selected items`,children:n.jsx(zt,{size:18})}):""})]})}),n.jsx("tbody",{children:l?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"Loading quotes..."})}):Re.length>0?Ie.map(L=>{const U=iA(L.presented_date,L.validity_days);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>Fe(L),children:[n.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:xe=>xe.stopPropagation(),children:n.jsx("input",{type:"checkbox",checked:he.includes(L.id),onChange:()=>K(L.id),className:"cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:$7(L.quote_id)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:Ye(L)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-sm text-gray-700 break-words",children:B(L)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:fe(L)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-700",children:L.total_amount?`${s}${Number(L.total_amount).toLocaleString()}`:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${Rze(L.status)}`,children:rA(L.status)})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{children:L.assigned_user?`${L.assigned_user.first_name} ${L.assigned_user.last_name}`:"Unassigned"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-500 text-xs",children:hg(U)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top text-center w-24"})]},L.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"No quotes found."})})})]})}),n.jsx(en,{className:"mt-4",totalItems:Re.length,pageSize:je,currentPage:te,onPrev:ue,onNext:Ne,onPageSizeChange:L=>{Oe(L),ve(1)},pageSizeOptions:[10,20,30,40,50],label:"quotes"})]}),Et=T?n.jsx("div",{id:"modalBackdrop",onClick:Je,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:L=>L.stopPropagation(),children:[n.jsx("button",{onClick:()=>{Ee(),me(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:A||D,children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:_?"Edit Quote":"Add New Quote"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:V,children:[n.jsx(F7,{label:"Deal",name:"deal_id",value:R.deal_id,onChange:L=>{const{accountId:U,contactId:xe}=He(L);Q(De=>({...De,deal_id:L,account_id:U,contact_id:xe}))},items:Array.isArray(c)?c:[],getLabel:L=>`${I7(L?.deal_id??"")} ${L?.name??""}`.trim(),placeholder:"Search deal...",required:!0,isSubmitted:Ce,disabled:A||c.length===0,className:"md:col-span-2"}),n.jsx(z7,{label:"Account",value:Be(R.account_id)||(R.account_id?`Account #${R.account_id}`:""),disabled:!0}),n.jsx(z7,{label:"Contact",value:qe(R.contact_id)||(R.contact_id?`Contact #${R.contact_id}`:""),disabled:!0}),n.jsx("div",{className:"md:col-span-2 mt-2",children:n.jsx(nd,{items:R.items,onChange:L=>Q(U=>({...U,items:L})),currencySymbol:s,readOnly:A,taxRate:R.tax_rate,discountType:R.discount_type,discountValue:R.discount_value,onTotalsChange:L=>{Q(U=>({...U,subtotal:L.subtotal,discount_amount:L.discount_amount,tax_amount:L.tax_amount,total_amount:L.total_amount}))}})}),n.jsxs("div",{className:"md:col-span-2 mt-2 p-4 bg-gray-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Pricing Settings"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Discount Type"}),n.jsxs("select",{value:R.discount_type||"",onChange:L=>Q(U=>({...U,discount_type:L.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",disabled:A,children:[n.jsx("option",{value:"",children:"No Discount"}),n.jsx("option",{value:"percentage",children:"Percentage (%)"}),n.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-600 text-xs mb-1",children:["Discount ",R.discount_type==="percentage"?"%":"Amount"]}),n.jsx("input",{type:"number",value:R.discount_value||"",onChange:L=>Q(U=>({...U,discount_value:L.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:R.discount_type==="percentage"?"100":void 0,step:"0.01",disabled:A||!R.discount_type})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Tax Rate (%)"}),n.jsx("input",{type:"number",value:R.tax_rate||"",onChange:L=>Q(U=>({...U,tax_rate:L.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:"100",step:"0.01",disabled:A})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Total Amount"}),n.jsxs("div",{className:"w-full bg-gray-100 border border-gray-300 rounded-md px-2 py-1.5 text-sm font-medium",children:[s,parseFloat(R.total_amount||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),n.jsx(R7,{label:"Presented Date",name:"presented_date",type:"date",value:R.presented_date,onChange:be,disabled:A}),n.jsx(R7,{label:"Validity Days",name:"validity_days",type:"number",value:R.validity_days,onChange:be,placeholder:"30",disabled:A}),n.jsx(F7,{label:"Assigned To",value:R.assigned_to||"",onChange:L=>Q(U=>({...U,assigned_to:L})),items:Array.isArray(y)?y:[],getLabel:L=>{const U=`${L?.first_name??""} ${L?.last_name??""}`.trim();return U?L?.role?`${U} (${L.role})`:U:L?.email||""},placeholder:"Search assignee...",required:!0,isSubmitted:Ce,disabled:A}),n.jsx(Wze,{label:"Status",name:"status",value:R.status,onChange:be,options:aA,required:!0,disabled:A,className:"md:col-span-2"}),n.jsx(qze,{label:"Notes",name:"notes",value:R.notes,onChange:be,placeholder:"Additional details...",rows:3,disabled:A,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{Ee(),me(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:A||D,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:A||D,children:A?"Saving...":_?"Update Quote":"Save Quote"})]})]})]})}):null,Nt=z?n.jsx(Yze,{open:!0,title:z.title,message:z.message,confirmLabel:z.confirmLabel,cancelLabel:z.cancelLabel,variant:z.variant,onConfirm:_e,onCancel:Ue,loading:D}):null;return n.jsxs(n.Fragment,{children:[N?le:it,Et,Nt]})}function R7({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function z7({label:e,value:t,className:a="",disabled:s=!0}){return n.jsxs("div",{className:a,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("input",{type:"text",value:t??"",disabled:s,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function Wze({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:l=!1,className:o=""}){const c=a!=null?String(a):"",u=r.some(f=>String(f.value)===c)?c:"";return n.jsxs("div",{className:o,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:u,onChange:s,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(f=>n.jsx("option",{value:String(f.value??""),children:f.label},f.value??f.label))})]})}function F7({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:o,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(Vze,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:l,hasError:u})]})}function Vze({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,hasError:o=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(v=>String(v.id)===String(t)),y=x?s(x):"",w=h.useMemo(()=>{const v=u.trim().toLowerCase();return(v?e.filter(N=>(s(N)||"").toLowerCase().includes(v)):e).slice(0,l)},[e,u,s,l]);return h.useEffect(()=>{const v=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:y,placeholder:r,onFocus:()=>!i&&d(!0),onChange:v=>{f(v.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${o?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:w.length>0?w.map(v=>{const C=String(v.id),N=s(v),S=String(t)===C;return n.jsx("button",{type:"button",onClick:()=>{a(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:N||"--"},C)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function qze({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:l=!1,className:o=""}){return n.jsxs("div",{className:o,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function Yze({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),n.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}function Qze(){const{userRole:e}=Bs();return n.jsx(Dj,{currentUserRole:e,currentUserId:null})}function Kze(){h.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,t]=h.useState(null),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Actions"),[l,o]=h.useState(1),[c,d]=h.useState(10),u=async()=>{try{const N=await ce.get("/logs/read-all");t(N.data)}catch(N){console.error("Error fetching audit logs:",N)}};h.useEffect(()=>{u()},[]);const f=h.useMemo(()=>{if(!Array.isArray(e))return[];const N=a.trim().toLowerCase(),S=r?.toUpperCase?.()||"ALL";return e.filter(k=>{const _=k.timestamp?new Date(k.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",E=`${k.entity_type||""} ${k.entity_name||k.entity_details?.name||k.entity_details?.title||k.entity_id||""}`,A=`${k.logger?.first_name||""} ${k.logger?.last_name||""}`,I=[_,A,k.action,k.entity_type,E,k.description],z=N===""||I.some(D=>D==null?!1:D.toString().toLowerCase().includes(N)),F=S==="FILTER BY ACTIONS"||(k.action||"").toUpperCase()===S;return z&&F}).sort((k,_)=>{const E=k.timestamp?new Date(k.timestamp).getTime():0;return(_.timestamp?new Date(_.timestamp).getTime():0)-E})},[e,a,r]),p=Math.max(1,Math.ceil(f.length/c)||1);h.useEffect(()=>{o(1)},[a,r]),h.useEffect(()=>{o(N=>{const S=Math.max(1,Math.ceil(f.length/c)||1);return N>S?S:N})},[f.length,c]);const x=h.useMemo(()=>{const N=(l-1)*c;return f.slice(N,N+c)},[f,l,c]);f.length===0||(l-1)*c+1,Math.min(l*c,f.length);const y=()=>o(N=>Math.max(N-1,1)),w=()=>o(N=>Math.min(N+1,p)),v=()=>{if(!f.length){Px.error("No logs to export!");return}const N=["Timestamp","User","Action","Resource","Details"],S=f.map(A=>[new Date(A.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${A.logger?.first_name||""} ${A.logger?.last_name||""}`.trim(),A.action,`${A.entity_type}: ${A.entity_id}`,A.description||""]),T=[N.join(","),...S.map(A=>A.map(I=>`"${String(I).replace(/"/g,'""')}"`).join(","))].join(`
`),k=new Blob([T],{type:"text/csv;charset=utf-8;"}),_=URL.createObjectURL(k),E=document.createElement("a");E.href=_,E.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL(_)},C=N=>{switch((N||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&n.jsx(Rt,{message:"Loading audit logs..."}),n.jsx(Lx,{toastOptions:{duration:1e3}}),n.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[n.jsx(Ct,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),n.jsxs("p",{className:"text-sm text-blue-700",children:[n.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ws,{className:"text-blue-600",size:20}),n.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:v,children:[n.jsx($o,{className:"mr-2"}),"Export Logs"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[n.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search audit logs",value:a,onChange:N=>s(N.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:r,onChange:N=>i(N.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),n.jsx("option",{value:"CREATE",children:"CREATE"}),n.jsx("option",{value:"DELETE",children:"DELETE"}),n.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),n.jsx("th",{className:"py-3 px-4",children:"User"}),n.jsx("th",{className:"py-3 px-4",children:"Action"}),n.jsx("th",{className:"py-3 px-4",children:"Resource"}),n.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),n.jsx("tbody",{children:Array.isArray(f)&&f.length>0?x.map((N,S)=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(N.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:N.name}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${C(N.action)}`,children:N.action})}),n.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[N.entity_type,": ",N.entity_id]}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:N.description})]},S)):n.jsx("tr",{children:n.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),n.jsx(en,{className:"mt-4",totalItems:f.length,pageSize:c,currentPage:l,onPrev:y,onNext:w,onPageSizeChange:N=>{d(N),o(1)},pageSizeOptions:[10,20,30,40,50],label:"logs"})]})}const U7=["Not started","In progress","Deferred","Completed"],B7={NOT_STARTED:"Not started","NOT STARTED":"Not started","TO DO":"Not started",IN_PROGRESS:"In progress","IN PROGRESS":"In progress",COMPLETED:"Completed",DEFERRED:"Deferred","Not started":"Not started","In progress":"In progress",Completed:"Completed",Deferred:"Deferred","In Progress":"In progress","To Do":"Not started",Review:"Deferred"},TZ=e=>e&&(B7[e]||B7[String(e).toUpperCase()])||"Not started",Xze=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const a=t.getTimezoneOffset();return new Date(t.getTime()-a*60*1e3).toISOString().slice(0,16)},H7=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},Zze=e=>{const t=e.subject?.trim()??"",a=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),TZ(e.status);let r=null,i=null,l=null,o=null,c=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2?o=Number(e.relatedTo2):e.relatedType2==="Quote"&&e.relatedTo2&&(c=Number(e.relatedTo2)));const d=e.assignedTo?Number(e.assignedTo):null,u=l||o||i||r,f=l?"Contact":o?"Deal":i?"Account":r?"Lead":c?"Quote":null;return{title:t,description:a,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:d,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:l,deal_id:o,quote_id:c,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:u,related_type:f}},Jze=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",a=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",l=W=>{if(!W)return"";const Z=String(W).split("-");return Z.length===3?`${Z[0]}-${Z[2]}`:String(W)},o=()=>e.lead?.id||e.lead_id,c=()=>e.account?.id||e.account_id,d=()=>e.contact?.id||e.contact_id,u=()=>e.deal?.id||e.deal_id,f=()=>e.quote?.id||e.quote_id,p=()=>e.task_assign_to?.id||e.assigned_to,x=()=>e.lead?.title||e.lead_id,y=()=>e.account?.name||e.account_id,w=()=>i||e.contact_id,v=()=>e.deal?.name||e.deal_id,C=()=>l(e.quote?.quote_id)||e.id;let N="Lead",S="",T="",k="",_="Lead",E="",A="",I="";const z=c(),F=y(),D=o(),M=x();if(z){N="Account",_="Account",E=F,S=String(z);const W=d(),Z=u(),R=w(),Q=v(),Y=f(),oe=C();W?(T="Contact",A="Contact",I=R,k=String(W)):Z?(A="Deal",T="Deal",I=Q,k=String(Z)):Y&&(A="Quote",T="Quote",I=oe,k=String(Y))}else D?(_="Lead",E=M,N="Lead",S=String(D)):e.related_type==="Account"&&(N="Account",S=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:TZ(e.status),dueDate:s,dateAssigned:r,assignedToId:p()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:a,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:_,relatedTo1Text:E,relatedType2Text:A,relatedTo2Text:I,subject:e.title,relatedType1:N,relatedTo1:S,relatedType2:T,relatedTo2:k}};function eFe(){h.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=Kt(),[a,s]=h.useState("board"),[r,i]=h.useState(!1),[l,o]=h.useState(null),[c,d]=h.useState(!1),[u,f]=h.useState([]),[p,x]=h.useState(!0),[y,w]=h.useState(""),[v,C]=h.useState("Filter by Status"),[N,S]=h.useState("Filter by Priority"),[T,k]=h.useState([]),[_,E]=h.useState(1),[A,I]=h.useState(10),[z,F]=h.useState(null),[D,M]=h.useState(!1),[W,Z]=h.useState([]),R=yt(),Q=Yt(),[Y,oe]=h.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""}),[re,ee]=h.useState(null);h.useEffect(()=>{const B=Q.state?.openTaskModal,fe=Q.state?.initialTaskData,Se=Q.state?.taskID;B?(i(!0),fe&&oe(de=>({...de,...fe})),R(Q.pathname,{replace:!0,state:{}})):Se&&(ee(Se),R(Q.pathname,{replace:!0,state:{}}))},[Q,R]),h.useEffect(()=>{if(re&&u.length>0&&!p){const B=u.find(fe=>fe.id===re);B?ve(B,!0):q.error("Task not found."),ee(null)}},[re,u,p]);const H=async()=>{try{const B=await ce.get("/users/all");k(Array.isArray(B.data)?B.data:[])}catch(B){console.error("Failed to fetch users:",B),q.error("Failed to fetch users.")}},ye=async()=>{try{x(!0);const B=await ce.get("/tasks/all"),fe=Array.isArray(B.data)?B.data:[],Se=fe.map(Jze);console.log("Raw Tasks from API:",fe),console.log("Formatted Tasks:",Se),Se.sort((de,ke)=>{const se=de.createdAt?new Date(de.createdAt):0;return(ke.createdAt?new Date(ke.createdAt):0)-se}),console.log("Fetched Tasks:",Se),f(Se),a==="list"&&E(1)}catch(B){console.error("Failed to load tasks:",B),q.error("Failed to load tasks.")}finally{x(!1)}};h.useEffect(()=>{!t&&e&&(H(),ye())},[t,e]);const te=()=>{o(null),oe({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},ve=(B=null,fe=!1)=>{o(B),d(fe),B?oe({id:B.id,subject:B.title||"",description:B.description||"",priority:B.priority||"Normal",status:B.status||"Not started",dueDate:Xze(B.dueDate),assignedTo:B.assignedToId?String(B.assignedToId):"",notes:B.notes||"",relatedType1Text:B.relatedType1Text||"",relatedTo1Text:B.relatedTo1Text||"",relatedType2Text:B.relatedType2Text||"",relatedTo2Text:B.relatedTo2Text||"",relatedType1:B.relatedType1||"",relatedTo1:B.relatedTo1||"",relatedType2:B.relatedType2||"",relatedTo2:B.relatedTo2||""}):te(),i(!0)},je=()=>{i(!1),o(null),d(!1),te()},Oe=async B=>{const fe=Zze(B);console.log("Request Payload for Save:",fe);try{l&&!c?(await ce.put(`/tasks/${l.id}`,fe),q.success("Task updated successfully.")):(await ce.post("/tasks/create",fe),q.success("Task created successfully.")),i(!1),await ye()}catch(Se){console.error("Failed to save task:",Se);const de=Se.response?.data?.detail||"Failed to save task.";q.error(de)}},$e=B=>{B&&F({title:"Delete Task",message:n.jsxs(n.Fragment,{children:["Are you sure you want to delete ",n.jsx("span",{className:"font-semibold",children:B.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:B.id}})},pe=()=>{if(ge.every(B=>W.includes(B.id)))Z(W.filter(B=>!ge.map(fe=>fe.id).includes(B)));else{const B=ge.map(fe=>fe.id);Z([...new Set([...W,...B])])}},Me=B=>{Z(fe=>fe.includes(B)?fe.filter(Se=>Se!==B):[...fe,B])},Le=async()=>{W.length!==0&&F({title:"Delete Tasks",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:W.length})," selected tasks? This action cannot be undone."]}),confirmLabel:`Delete ${W.length} Task(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",task_ids:W}})},he=async()=>{if(!z?.action){F(null);return}const{action:B}=z;M(!0);try{B.type==="delete"?(await ce.delete(`/tasks/${B.targetId}`),q.success("Task deleted successfully."),await ye()):B.type==="bulk-delete"&&(await ce.delete("/tasks/admin/bulk-delete",{data:{task_ids:B.task_ids}}),q.success(`Successfully deleted ${B.task_ids.length} tasks`),Z([]),await ye())}catch(fe){console.error("Task action failed:",fe),q.error("Failed to delete task.")}finally{M(!1),F(null)}},ae=()=>{D||F(null)},Ae=h.useMemo(()=>{const B=y.trim().toLowerCase();return[...u].sort((Se,de)=>{const ke=Se.createdAt?new Date(Se.createdAt):0;return(de.createdAt?new Date(de.createdAt):0)-ke}).filter(Se=>{const de=B===""||Se.title?.toLowerCase().includes(B)||Se.description?.toLowerCase().includes(B)||Se.assignedToName?.toLowerCase().includes(B)||Se.createdBy?.toLowerCase().includes(B),ke=v==="Filter by Status"||Se.status===v,se=N==="Filter by Priority"||Se.priority===N;return de&&ke&&se})},[u,y,v,N]);h.useEffect(()=>{E(1)},[y,v,N,a,A]),h.useEffect(()=>{if(a==="list"){const B=Ae.length===0?1:Math.ceil(Ae.length/A);_>B&&E(B)}},[Ae.length,_,a,A]);const ge=h.useMemo(()=>{if(a==="board")return Ae;const B=(_-1)*A;return Ae.slice(B,B+A)},[Ae,_,a,A]),Be=h.useMemo(()=>{const B=new Date;return[{title:"To Do",value:u.filter(fe=>fe.status==="Not started").length,icon:zs,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:u.filter(fe=>fe.status==="In progress").length,icon:Ri,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:u.filter(fe=>fe.status==="Completed").length,icon:ba,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:u.filter(fe=>fe.dueDate&&new Date(fe.dueDate)<B&&fe.status!=="Completed").length,icon:Rf,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:u.filter(fe=>fe.priority==="High").length,icon:Ro,color:"text-orange-600",bgColor:"bg-orange-100"}]},[u]),qe=B=>B.dueDate&&new Date(B.dueDate)<new Date&&B.status!=="Completed",Te=B=>{switch(B.status){case"Not started":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Deferred":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},He=B=>{switch(B){case"Not started":return"bg-blue-100 text-blue-700";case"In progress":return"bg-purple-100 text-purple-700";case"Deferred":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},Ye=B=>{switch(B){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&n.jsx(Rt,{message:"Loading tasks..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(Ri,{className:"text-blue-600"})," Tasks Board"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:()=>ve(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[n.jsx(dn,{})," Create Task"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Be.map(B=>n.jsx(tFe,{...B},B.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search tasks",value:y,onChange:B=>w(B.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{value:v,onChange:B=>C(B.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Status"}),U7.map(B=>n.jsx("option",{children:B},B))]}),n.jsxs("select",{value:N,onChange:B=>S(B.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Priority"}),n.jsx("option",{children:"High"}),n.jsx("option",{children:"Normal"}),n.jsx("option",{children:"Low"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${a==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),n.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${a==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&a==="board"&&(Ae.length>0?n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:U7.map(B=>{const fe=ge.filter(Se=>Se.status===B);return n.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative rounded-md",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),n.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:B}),n.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:fe.length})]}),n.jsx("div",{className:`space-y-3 ${fe.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:fe.length>0?fe.map(Se=>n.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${Te(Se)}`,onClick:()=>ve(Se,!0),children:[n.jsxs("div",{className:"text-left flex-1",children:[n.jsx("p",{className:"font-medium text-gray-800 text-sm",children:Se.title}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",Se.priority]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",Se.assignedToName]}),n.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",n.jsx("span",{className:qe(Se)?"text-red-600":"text-gray-600",children:Se.dateAssigned?H7(Se.dateAssigned):""})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[n.jsx("button",{type:"button",onClick:de=>{de.stopPropagation(),ve(Se)},className:"text-blue-500 hover:text-blue-700",children:n.jsx(oa,{})}),n.jsx("button",{type:"button",onClick:de=>{de.stopPropagation(),$e(Se)},className:"text-red-500 hover:text-red-700",children:n.jsx(zt,{})})]})]},Se.id)):n.jsx("div",{className:"text-center py-10 text-gray-500",children:"No tasks"})})]},B)})}):n.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No tasks found."})),!p&&!t&&a==="list"&&n.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:ge.length>0&&ge.every(B=>W.includes(B.id)),onChange:pe})}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),n.jsx("th",{className:"py-3 px-4 font-medium text-center w-24",children:W.length>0?n.jsx("button",{onClick:Le,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${W.length} selected tasks`,children:n.jsx(zt,{size:18})}):""})]})}),n.jsx("tbody",{children:ge.length>0?ge.map(B=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",children:[n.jsx("td",{className:"py-3 px-4",onClick:fe=>fe.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:W.includes(B.id),onChange:()=>Me(B.id)})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",onClick:()=>ve(B,!0),children:B.title}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>ve(B,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${He(B.status||"Not started")}`,children:B.status||"Not started"})}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>ve(B,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Ye(B.priority||"Low")}`,children:B.priority||"Low"})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",onClick:()=>ve(B,!0),children:B.assignedToName||"Unassigned"}),n.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${qe(B)?"text-red-600 font-medium":""}`,onClick:()=>ve(B,!0),children:B.dateAssigned?H7(B.dateAssigned):""}),n.jsx("td",{})]},B.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No tasks found."})})})]})})}),!p&&!t&&a==="list"&&n.jsx(en,{className:"mt-6",totalItems:Ae.length,pageSize:A,currentPage:Ae.length===0?0:_,onPrev:()=>E(B=>Math.max(B-1,1)),onNext:()=>E(B=>Math.min(B+1,Math.max(1,Math.ceil(Ae.length/A)||1))),onPageSizeChange:B=>{I(B),E(1)},pageSizeOptions:[10,20,30,40,50],label:"tasks"}),n.jsx(a0,{isOpen:r,onClose:je,onSave:Oe,onEdit:()=>d(!1),setFormData:oe,formData:Y,isEditing:!c&&!!l,viewMode:c,users:T,currentUser:e,onDelete:$e}),z&&n.jsx(nFe,{open:!0,title:z.title,message:z.message,confirmLabel:z.confirmLabel,cancelLabel:z.cancelLabel,variant:z.variant,onConfirm:he,onCancel:ae,loading:D})]})}function tFe({icon:e,title:t,value:a,color:s,bgColor:r,onClick:i}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function nFe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r,variant:i,loading:l,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),n.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}const kZ=e=>e?e.toUpperCase():"",rb=e=>{const t=kZ(e);return t==="PLANNED"||t==="IN PROGRESS"?"PLANNED":t==="HELD"||t==="DONE"?"HELD":t==="NOT_HELD"||t==="NOT HELD"?"NOT_HELD":"PLANNED"},aFe=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},sFe=e=>{const t=kZ(e);switch(t==="PLANNED"?"PENDING":t==="HELD"?"COMPLETED":t==="NOT_HELD"?"CANCELLED":t){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},lA={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},rFe=()=>{const e=yt(),t=Yt(),{user:a}=Kt(),s=a?.role==="Sales",[r]=Ds(),i=r.get("id"),l=t.pathname==="/admin/meetings/info";h.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[o,c]=h.useState([]),[d,u]=h.useState(!1),[f,p]=h.useState([]),[x,y]=h.useState(""),[w,v]=h.useState("Filter by Status"),[C,N]=h.useState(!1),[S,T]=h.useState(null),[k,_]=h.useState(1),[E,A]=h.useState(10),[I,z]=h.useState(lA),[F,D]=h.useState(!1),[M,W]=h.useState(null),[Z,R]=h.useState(!1),[Q,Y]=h.useState(null),[oe,re]=h.useState(!1),[ee,H]=h.useState(null);h.useEffect(()=>{C&&!F&&s&&a&&!I.assignedTo&&z(ge=>({...ge,assignedTo:a.id}))},[C,F,a,s]),h.useEffect(()=>{const ge=t.state?.openMeetingModal,Be=t.state?.initialMeetingData?.relatedTo||r.get("id"),qe=t.state?.meetingID;ge||Be?(N(!0),t.state?.initialMeetingData&&z(Te=>({...Te,...t.state.initialMeetingData})),e(t.pathname,{replace:!0,state:{}})):qe&&(H(qe),e(t.pathname,{replace:!0,state:{}}))},[t,r,e]),h.useEffect(()=>{if(ee&&o.length>0&&!d){const ge=o.find(Be=>Be.id===ee);ge?T(ge):q.error("Meeting not found."),H(null)}},[ee,o,d]);const ye=async()=>{if(i&&l){const ge=sessionStorage.getItem("meetingDetailData");if(ge)try{const Be=JSON.parse(ge);if(Be.id===parseInt(i)){T(Be),sessionStorage.removeItem("meetingDetailData");return}}catch(Be){console.error(Be)}}u(!0);try{const ge=await ce.get("/meetings/admin/fetch-all"),qe=[...Array.isArray(ge.data)?ge.data:[]].sort((Te,He)=>{const Ye=Te?.createdAt?new Date(Te.createdAt).getTime():0;return(He?.createdAt?new Date(He.createdAt).getTime():0)-Ye});if(c(qe),i&&!S){const Te=qe.find(He=>He.id===parseInt(i));Te&&T(Te)}}catch{q.error("Failed to load meetings.")}finally{u(!1)}},te=async()=>{try{const ge=await ce.get("/users/all");p(Array.isArray(ge.data)?ge.data:[])}catch(ge){console.error(ge)}};h.useEffect(()=>{ye(),te()},[]);const ve=ge=>y(ge.target.value),je=h.useMemo(()=>{const ge=x.trim().toLowerCase(),Be=w.trim().toUpperCase();return o.filter(qe=>{const Te=[qe?.activity,qe?.description,qe?.relatedTo,qe?.assignedTo],He=ge===""||Te.some(B=>B&&B.toString().toLowerCase().includes(ge)),Ye=Be==="FILTER BY STATUS"||rb(qe.status||"PENDING")===Be;return He&&Ye})},[o,x,w]),Oe=h.useMemo(()=>{const ge=(k-1)*E;return je.slice(ge,ge+E)},[je,k,E]),$e=()=>{N(!1),z(lA),D(!1),W(null),R(!1)},pe=()=>{z(lA),D(!1),W(null),N(!0)},Me=ge=>{let Be="";if(ge.meet_assign_to?.id)Be=String(ge.meet_assign_to.id);else if(ge.assignedTo){const ke=f.find(se=>`${se.first_name} ${se.last_name}`===ge.assignedTo);Be=ke?String(ke.id):""}const qe=ke=>{if(!ke)return"";try{const se=new Date(ke),We=se.getTimezoneOffset()*6e4;return new Date(se.getTime()-We).toISOString().slice(0,16)}catch{return""}};let Te="Lead",He="",Ye="Contact",B="";if(ge.lead)Te="Lead",He=String(ge.lead.id);else if(ge.account)Te="Account",He=String(ge.account.id),ge.contact?(Ye="Contact",B=String(ge.contact.id)):ge.deal&&(Ye="Deal",B=String(ge.deal.id));else if(ge.relatedType||ge.related_type){const ke=ge.relatedType||ge.related_type,se=ge.related_to||ge.relatedToId;ke==="Lead"?(Te="Lead",He=String(se)):(Te="Account",He=ge.account_id?String(ge.account_id):"")}const fe={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},Se=rb(ge.status),de=fe[Se]||"Planned";z({subject:ge.subject||ge.activity||"",location:ge.location||"",startTime:qe(ge.start_time||ge.startTime),endTime:qe(ge.end_time||ge.endTime),status:de,notes:ge.description||ge.notes||"",assignedTo:Be,relatedType1:Te,relatedTo1:He,relatedType2:Ye,relatedTo2:B}),D(!0),W(ge.id),T(null),N(!0)},Le=ge=>{if(!ge.subject?.trim())return q.error("Subject is required.");if(!ge.startTime)return q.error("Start time is required.");if(ge.endTime&&!(new Date(ge.endTime)-new Date(ge.startTime)>0))return q.error("End time must be after start time.");ge.relatedType1,ge.relatedTo1,ge.relatedType1==="Account"&&ge.relatedType2&&ge.relatedTo2&&(ge.relatedType2,ge.relatedTo2);const Be={...ge,assignedTo:parseInt(ge.assignedTo),relatedTo1:parseInt(ge.relatedTo1),relatedTo2:parseInt(ge.relatedTo2)},qe=F&&M?"update":"create";Y({title:qe==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${qe} "${Be.subject}"?`,confirmLabel:qe==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:qe,payload:Be,targetId:M,name:Be.subject}})},he=async()=>{if(!Q?.action)return;const{type:ge,payload:Be,targetId:qe,name:Te}=Q.action;re(!0);try{ge==="create"?(R(!0),await ce.post("/meetings/create",Be),q.success(`Meeting "${Te}" created.`),$e(),await ye()):ge==="update"?(R(!0),await ce.put(`/meetings/${qe}`,Be),q.success(`Meeting "${Te}" updated.`),$e(),await ye()):ge==="delete"&&(await ce.delete(`/meetings/${qe}`),q.success(`Meeting "${Te}" deleted.`),S?.id===qe&&T(null),await ye())}catch(He){const Ye=He.response?.data?.detail||"Action failed.";q.error(typeof Ye=="string"?Ye:JSON.stringify(Ye)),console.error(Ye)}finally{R(!1),re(!1),Y(null)}},ae=ge=>{Y({title:"Delete Meeting",message:`Permanently delete "${ge.activity}"?`,confirmLabel:"Delete",variant:"danger",action:{type:"delete",targetId:ge.id,name:ge.activity}})},Ae=async(ge,Be)=>{try{await ce.put(`/meetings/${ge}`,{status:Be}),q.success("Status updated"),ye(),T(null)}catch{q.error("Failed to update status")}};return l&&i?S?n.jsx(ad,{meeting:S,onClose:()=>{T(null),e("/admin/dashboard")},onEdit:Me,onDelete:ae,onStatusUpdate:Ae}):n.jsx(Rt,{message:"Loading meeting..."}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[d&&n.jsx(Rt,{message:"Loading meetings..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[n.jsx(Ct,{className:"mr-2 text-blue-600"})," Meetings"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:pe,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[n.jsx(dn,{className:"mr-2"})," Add Meeting"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[n.jsx(Bt,{className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search meetings",value:x,onChange:ve,className:"w-full outline-none"})]}),n.jsxs("select",{value:w,onChange:ge=>v(ge.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[n.jsx("option",{children:"Filter by Status"}),n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Start Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:Oe.length>0?Oe.map(ge=>n.jsxs("tr",{onClick:()=>T(ge),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:ge.subject}),n.jsxs("td",{className:"py-3 px-4",children:[ge.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ge.lead.title}),ge.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ge.account.name}),ge.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[ge.contact.first_name," ",ge.contact.last_name]}),ge.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ge.deal.name})]}),n.jsx("td",{className:"py-3 px-4",children:aFe(ge.start_time)}),n.jsxs("td",{className:"py-3 px-4",children:[ge.meet_assign_to.first_name," ",ge.meet_assign_to.last_name]}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${sFe(rb(ge.status))}`,children:rb(ge.status).replace("_"," ")})})]},ge.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),n.jsx(en,{totalItems:je.length,pageSize:E,currentPage:k,onPrev:()=>_(ge=>Math.max(1,ge-1)),onNext:()=>_(ge=>ge+1),onPageSizeChange:ge=>{A(ge),_(1)},pageSizeOptions:[10,20,30,40,50],label:"meetings"}),C&&n.jsx(Gj,{onClose:$e,formData:I,setFormData:z,isEditing:F,onSubmit:Le,isSubmitting:Z||oe,users:f,currentUser:a}),S&&n.jsx(ad,{meeting:S,onClose:()=>T(null),onEdit:Me,onDelete:ae,onStatusUpdate:Ae}),Q&&n.jsx(iFe,{open:!0,title:Q.title,message:Q.message,confirmLabel:Q.confirmLabel,variant:Q.variant,onConfirm:he,onCancel:()=>Y(null),loading:oe})]})};function iFe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{onClick:c,disabled:l,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),n.jsx("button",{onClick:o,disabled:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${d}`,children:l?"...":s})]})]})})}const lFe=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"}],oFe=e=>e?String(e).toUpperCase():"",Jm=e=>{const t=oFe(e);return t==="PLANNED"||t==="PENDING"?"PLANNED":t==="HELD"||t==="COMPLETED"?"HELD":t==="NOT HELD"||t==="NOT_HELD"||t==="CANCELLED"?"NOT_HELD":"PLANNED"},oA=e=>{const t=Jm(e);return t==="PLANNED"?"PLANNED":t==="HELD"?"HELD":t==="NOT_HELD"?"NOT HELD":"--"},G7=e=>{switch(Jm(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},W7=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function cFe(){const[e,t]=h.useState(!1),[a,s]=h.useState(null),[r,i]=h.useState(null),[l,o]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(null),[y,w]=h.useState(!1),[v,C]=h.useState(null),[N,S]=h.useState(!1),[T,k]=h.useState(!1),[_,E]=h.useState("PLANNED"),[A,I]=h.useState(!1),[z,F]=h.useState(!1),[D,M]=h.useState(1),[W,Z]=h.useState(10),[R,Q]=h.useState(null);Ds();const Y=yt(),oe=Yt(),{user:re}=Kt(),ee=re?.role==="Sales",ye={subject:"",call_time:(()=>{const Ne=new Date,Fe=Ne.getFullYear(),Ze=String(Ne.getMonth()+1).padStart(2,"0"),st=String(Ne.getDate()).padStart(2,"0");return`${Fe}-${Ze}-${st}T08:00`})(),duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[te,ve]=h.useState(ye);h.useEffect(()=>{e&&!y&&ee&&re&&!te.assigned_to&&ve(Ne=>({...Ne,assigned_to:re.id}))},[e,y,re,ee]),h.useEffect(()=>{const Ne=oe.state,Fe=Ne?.callID;if(Fe&&!Ne?.openCallModal){Q(Fe),Y(oe.pathname,{replace:!0,state:{}});return}!Ne?.openCallModal||!Ne?.initialCallData||Ne.initialCallData.relatedType1==="Lead"&&Array.isArray(l)&&l.length===0||Ne.initialCallData.relatedType1==="Account"&&(!Array.isArray(l)||l.length===0)||(t(!0),ve(Ze=>({...Ze,...Ne.initialCallData,relatedTo1:Ne.initialCallData.relatedTo1?String(Ne.initialCallData.relatedTo1):"",relatedTo2:Ne.initialCallData.relatedTo2?String(Ne.initialCallData.relatedTo2):""})),Y(oe.pathname,{replace:!0,state:{}}))},[oe.state,l]),h.useEffect(()=>{if(R&&u.length>0&&!z){const Ne=u.find(Fe=>Fe.id===R);Ne?s(Ne):q.error("Call not found."),Q(null)}},[R,u,z]);const je=async()=>{try{F(!0);const Ne=await ce.get("/calls/admin/fetch-all"),Ze=[...Array.isArray(Ne.data)?Ne.data:[]].sort((st,Ee)=>{const Je=st?.created_at?new Date(st.created_at):0;return(Ee?.created_at?new Date(Ee.created_at):0)-Je});f(Ze)}catch(Ne){console.error("Error fetching calls:",Ne),q.error("Failed to load calls")}finally{F(!1)}},Oe=async()=>{try{const Ne=await ce.get("/users/all");x(Ne.data)}catch(Ne){console.error("Error fetching users: ",Ne)}};h.useEffect(()=>{Oe(),je()},[]);const $e=[],pe="",Me="Filter by Status",Le="Filter by Users",he=u,ae=h.useMemo(()=>{const Ne=(D-1)*W;return he.slice(Ne,Ne+W)},[he,D,W]),Ae=u.length,ge=u.filter(Ne=>Jm(Ne.status)==="PLANNED").length,Be=u.filter(Ne=>Jm(Ne.status)==="HELD").length,qe=u.filter(Ne=>Jm(Ne.status)==="NOT_HELD").length,Te=[{title:"Total",value:Ae,icon:Ls,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:ge,icon:zs,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:Be,icon:ba,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:qe,icon:Ps,color:"text-gray-600",bgColor:"bg-gray-100"}],[He,Ye]=h.useState("Overview"),B=Ne=>{const{name:Fe,value:Ze}=Ne.target;ve(st=>{const Ee={...st,[Fe]:Ze};return Fe==="relatedType1"&&(Ee.relatedTo1="",Ze==="Lead"?(Ee.relatedType2=null,Ee.relatedTo2=null,d([])):Ze==="Account"&&(Ee.relatedType2="Contact")),Fe==="relatedType2"&&(Ee.relatedTo2=""),Ee})};h.useEffect(()=>{const Ne=async()=>{try{o([]);let Fe;te.relatedType1==="Lead"?Fe=await ce.get("/leads/admin/getLeads"):te.relatedType1==="Account"&&(Fe=await ce.get("/accounts/admin/fetch-all"));let Ze=[];if(Fe&&Array.isArray(Fe.data)?Ze=Fe.data:Ze=[],y&&te.relatedTo1)try{let st;te.relatedType1==="Lead"?st=await ce.get(`/leads/get/${te.relatedTo1}`):te.relatedType1==="Account"&&(st=await ce.get(`/accounts/get/${te.relatedTo1}`)),st&&st.data&&(Ze.some(Je=>String(Je.id)===String(te.relatedTo1))||(Ze=[st.data,...Ze]))}catch(st){console.error("Error fetching specific related item:",st)}o(Ze)}catch(Fe){console.error("Error fetching data:",Fe),o([])}};te.relatedType1&&Ne()},[te.relatedType1,y,te.relatedTo1]),h.useEffect(()=>{const Ne=async()=>{try{d([]);let Fe;if(te.relatedType1==="Account"&&te.relatedTo1)te.relatedType2==="Contact"?Fe=await ce.get(`/contacts/from-acc/${te.relatedTo1}`):te.relatedType2==="Deal"&&(Fe=await ce.get(`/deals/from-acc/${te.relatedTo1}`));else{d([]);return}Fe&&Array.isArray(Fe.data)?d(Fe.data):d([])}catch(Fe){console.error("Error fetching data:",Fe),d([])}};te.relatedType2&&Ne()},[te.relatedType2,te.relatedTo1,te.relatedType1]);const[fe,Se]=h.useState(!1),de=Ne=>{Ne.preventDefault(),Se(!0);const Fe=te.subject;if(!Fe||Fe.trim()===""){q.error("Subject is required.");return}if(!te.relatedTo1){q.error(`Please select a ${te.relatedType1||"Lead/Account"}.`);return}if(!te.assigned_to){q.error("Subject is required.");return}const st={...te,duration_minutes:te.duration_minutes?parseInt(te.duration_minutes,10):null,relatedTo1:te.relatedTo1?parseInt(te.relatedTo1,10):null,relatedTo2:te.relatedType1==="Lead"?null:te.relatedTo2?parseInt(te.relatedTo2,10):null,relatedType2:te.relatedType1==="Lead"?null:te.relatedType2,assigned_to:te.assigned_to?parseInt(te.assigned_to,10):null},Ee=y&&v?"update":"create",Je=(te.subject||"").trim()||"Untitled Call";i({title:Ee==="create"?"Confirm New Call":"Confirm Update",message:Ee==="create"?`Create "${Je}"?`:`Save changes to "${Je}"?`,confirmLabel:Ee==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:Ee,payload:st,targetId:v||null,name:Je}})},ke=Ne=>s(Ne),se=()=>{t(!1),w(!1),C(null)},We=async()=>{if(!r?.action){i(null);return}const{action:Ne}=r,{type:Fe,payload:Ze,targetId:st,name:Ee}=Ne;k(!0);try{if(Fe==="create")S(!0),await ce.post("/calls/create",Ze),q.success(`Call "${Ee}" created successfully.`),t(!1),ve(ye),w(!1),C(null),await je();else if(Fe==="update"){if(!st)throw new Error("Missing call identifier for update.");S(!0),await ce.put(`/calls/${st}`,Ze),q.success(`Call "${Ee}" updated successfully.`),t(!1),ve(ye),w(!1),C(null),await je()}else if(Fe==="delete"){if(!st)throw new Error("Missing call identifier for deletion.");await ce.delete(`/calls/${st}`),q.success(`Call "${Ee}" deleted successfully.`),a?.id===st&&s(null),await je()}}catch(Je){const be=Fe==="create"?"Failed to create call. Please review the details and try again.":Fe==="update"?"Failed to update call. Please review the details and try again.":"Failed to delete call. Please try again.",Ke=Je?.response?.data?.detail||be;q.error(Ke)}finally{(Fe==="create"||Fe==="update")&&S(!1),k(!1),i(null)}},Re=()=>{T||i(null)},ct=async()=>{if(a?.id)try{I(!0),await ce.put(`/calls/${a.id}`,{status:_}),q.success(`Status updated to ${oA(_)}`),f(Ne=>Array.isArray(Ne)?Ne.map(Fe=>Fe.id===a.id?{...Fe,status:_}:Fe):Ne),s(null)}catch(Ne){const Fe=Ne.response?.data?.detail||"Failed to update status.";q.error(Fe)}finally{I(!1)}};h.useEffect(()=>{a&&E(Jm(a.status))},[a]);const Ie=a?n.jsxs("div",{id:"callModalBackdrop",onClick:Ne=>Ne.target.id==="callModalBackdrop"&&s(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[z&&n.jsx(Rt,{message:"Loading call details..."}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),n.jsx("button",{onClick:()=>s(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:n.jsx(Vn,{size:25})})]}),n.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:a.subject}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${G7(a.status)}`,children:oA(a.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const Ne=Je=>{if(!Je)return"";const be=new Date(Je),Ke=be.getFullYear(),$=String(be.getMonth()+1).padStart(2,"0"),G=String(be.getDate()).padStart(2,"0"),K=String(be.getHours()).padStart(2,"0"),ne=String(be.getMinutes()).padStart(2,"0");return`${Ke}-${$}-${G}T${K}:${ne}`},Fe=a.lead?"Lead":a.account?"Account":"Lead",Ze=a.lead?a.lead.id:a.account?a.account.id:null,st=Fe==="Lead"?null:a.contact?"Contact":a.deal?"Deal":"Contact",Ee=Fe==="Lead"?null:a.contact?a.contact.id:a.deal?a.deal.id:null;ve({subject:a.subject||"",call_time:Ne(a.call_time),duration_minutes:a.duration_minutes?String(a.duration_minutes):"",direction:a.direction||"Outgoing",status:a.status||"Planned",notes:a.notes||"",relatedType1:Fe,relatedType2:st,relatedTo1:Ze?String(Ze):"",relatedTo2:Ee?String(Ee):"",assigned_to:a.call_assign_to?.id?String(a.call_assign_to.id):""}),w(!0),C(a.id),s(null),t(!0)},children:[n.jsx(ia,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>{const Ne=a.subject||"this call";i({title:"Delete Call",message:`Are you sure you want to permanently delete "${Ne}"? This action cannot be undone.`,confirmLabel:"Delete Call",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:a.id,name:Ne}})},children:[n.jsx(zt,{className:"mr-2"}),"Delete"]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(Ne=>n.jsx("button",{onClick:()=>Ye(Ne),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${He===Ne?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:Ne},Ne))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[He==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsx(no,{label:"Call Time",value:W7(a.call_time)}),n.jsx(no,{label:"Duration",value:a.duration_minutes?`${a.duration_minutes} min`:null}),n.jsx(no,{label:"Direction",value:a.direction||"--"}),n.jsx(no,{label:"Assigned To",value:`${a.call_assign_to.first_name} ${a.call_assign_to.last_name}`}),a.lead&&n.jsx(no,{label:"Lead",value:a.lead.title}),a.account&&n.jsx(no,{label:"Account",value:a.account.name}),a.contact&&n.jsx(no,{label:"Contact",value:`${a.contact.first_name} ${a.contact.last_name}`}),a.deal&&n.jsx(no,{label:"Deal",value:a.deal.name}),n.jsx(no,{label:"Created At",value:W7(a.created_at)})]})}),He==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Call Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:a.notes||"No notes available."})]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:_,onChange:Ne=>E(Ne.target.value),children:[n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),n.jsx("button",{onClick:ct,disabled:A,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:A?"Updating...":"Update"})]})]})]})]})]}):null,ue=e?n.jsx("div",{id:"modalBackdrop",onClick:Ne=>Ne.target.id==="modalBackdrop"&&se(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[n.jsx("button",{onClick:()=>{se(),Se(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:y?"Edit Call":"Add New Call"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:de,noValidate:!0,children:[n.jsx(uFe,{label:"Subject",className:"md:col-span-2",name:"subject",value:te.subject,onChange:B,isSubmitted:fe,required:!0}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("div",{className:"relative w-25",children:[n.jsxs("select",{name:"relatedType1",onChange:B,value:te.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:N,children:[n.jsx("option",{value:"Lead",children:"Lead"}),n.jsx("option",{value:"Account",children:"Account"})]}),n.jsx("span",{className:"absolute left-10 md:pl-6 pl-6 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),n.jsx(cA,{items:Array.isArray(l)?l:[],value:te.relatedTo1??"",placeholder:`Search ${te.relatedType1||"here"}...`,getLabel:Ne=>te.relatedType1==="Lead"?Ne.title:Ne.name??"",onChange:Ne=>ve(Fe=>({...Fe,relatedTo1:Ne})),required:!0,isSubmitted:fe,disabled:N})]}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("select",{name:"relatedType2",onChange:B,value:te.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:te.relatedType1==="Lead"||N,children:[n.jsx("option",{value:"Contact",children:"Contact"}),n.jsx("option",{value:"Deal",children:"Deal"})]}),n.jsx(cA,{disabled:te.relatedType1==="Lead"||N,items:Array.isArray(c)?c:[],value:te.relatedTo2??"",placeholder:te.relatedType1==="Lead"?"":Array.isArray(c)&&c.length>0?`Search ${te.relatedType2||"Contact"}...`:`No ${te.relatedType2||""} data found`,getLabel:Ne=>te.relatedType2==="Contact"?`${Ne.first_name??""} ${Ne.last_name??""}`.trim():Ne.name??"",onChange:Ne=>ve(Fe=>({...Fe,relatedTo2:Ne}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),n.jsx("input",{type:"datetime-local",value:te.call_time,onChange:B,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),n.jsxs("div",{className:"w-full",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),n.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[n.jsx("input",{type:"tel",value:te.duration_minutes,onChange:B,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),n.jsx("p",{children:"minutes"})]})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),n.jsx(cA,{items:Array.isArray(p)?p:[],value:te.assigned_to??"",placeholder:"Search an account...",getLabel:Ne=>`${Ne.first_name} ${Ne.last_name}`,onChange:Ne=>ve(Fe=>({...Fe,assigned_to:Ne})),disabled:ee,required:!0,isSubmitted:fe})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),n.jsxs("select",{name:"direction",onChange:B,value:te.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Incoming",children:"Incoming"}),n.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),n.jsxs("select",{name:"status",onChange:B,value:te.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Planned",children:"Planned"}),n.jsx("option",{value:"Held",children:"Held"}),n.jsx("option",{value:"Not held",children:"Not held"})]})]}),n.jsx(mFe,{className:"col-span-2",label:"Notes",value:te.notes,onChange:B,name:"notes"}),n.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{se(),Se(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:N,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:N?"Saving...":y?"Update Call":"Save Call"})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Ls,{className:"mr-2 text-blue-600"})," Calls"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{ve(ye),w(!1),C(null),t(!0),Se(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(dn,{className:"mr-2"})," Add Call"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Te.map(Ne=>n.jsx(dFe,{...Ne},Ne.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[n.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",defaultValue:pe})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{defaultValue:Me,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),lFe.map(Ne=>n.jsx("option",{value:Ne.value,children:Ne.label},Ne.value))]}),n.jsxs("select",{defaultValue:Le,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),$e.map(Ne=>n.jsx("option",{value:Ne.name,children:Ne.name},Ne.id))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Call Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:z?n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"py-10",children:n.jsx(Rt,{message:"Loading calls..."})})}):ae.length>0?ae.map(Ne=>n.jsxs("tr",{onClick:()=>ke(Ne),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:Ne.subject||"--"}),n.jsxs("td",{className:"py-3 px-4",children:[Ne.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Ne.lead.title}),Ne.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Ne.account.name}),Ne.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[Ne.contact.first_name," ",Ne.contact.last_name]}),Ne.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Ne.deal.name})]}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:Ne.call_time?new Date(Ne.call_time).toLocaleString():"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:Ne?.call_assign_to?`${Ne.call_assign_to.first_name} ${Ne.call_assign_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${G7(Ne.status)}`,children:oA(Ne.status)})})]},Ne.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),n.jsx(en,{totalItems:he.length,pageSize:W,currentPage:D,onPrev:()=>M(Ne=>Math.max(Ne-1,1)),onNext:()=>M(Ne=>Math.min(Ne+1,Math.max(1,Math.ceil(he.length/W)||1))),onPageSizeChange:Ne=>{Z(Ne),M(1)},pageSizeOptions:[10,20,30,40,50],label:"calls"})]}),Ie,ue,r&&n.jsx(fFe,{open:!0,title:r.title,message:r.message,confirmLabel:r.confirmLabel,onConfirm:We,onCancel:Re,loading:T})]})}function dFe({icon:e,title:t,value:a,color:s,bgColor:r}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:22})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function uFe({label:e,name:t,value:a,onChange:s,placeholder:r="",type:i="text",required:l=!1,disabled:o=!1,isSubmitted:c=!1,className:d=""}){const u=c&&l&&!a;return n.jsxs("div",{className:d,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
        `})]})}function mFe(e){return n.jsxs("div",{className:e.className,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),n.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function no({label:e,value:t}){return n.jsxs("p",{children:[n.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",n.jsx("br",{}),n.jsx("span",{className:"break-words",children:t||"--"})]})}function fFe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),n.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}function cA({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,required:o=!1,isSubmitted:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),y=e.find(N=>String(N.id)===String(t)),w=y?s(y):"",v=o&&c&&!t,C=h.useMemo(()=>{const N=f.trim().toLowerCase();return(N?e.filter(T=>(s(T)||"").toLowerCase().includes(N)):e).slice(0,l)},[e,f,s,l]);return h.useEffect(()=>{const N=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:w,placeholder:r,onFocus:()=>!i&&u(!0),onChange:N=>{p(N.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${v?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:C.length>0?C.map(N=>{const S=String(N.id),T=s(N),k=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:T||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function hFe({toggleSidebar:e}){const[t,a]=h.useState(!1),[s,r]=h.useState(!1),[i,l]=h.useState([]),[o,c]=h.useState(0),d=h.useRef(null),u=h.useRef(null),f=Yt(),p=yt(),{logout:x}=Bs(),{user:y,fetchUser:w}=Kt(),C={"/manager/dashboard":"Dashboard","/manager/accounts":"Accounts","/manager/contacts":"Contacts","/reports":"Reports","/leads":"Leads","/manager/Audit":"Audit","/manager/targets":"Targets","/manager/leads":"Leads","/manager/quotes":"Quotes","/manager/users":"Users","/manager/deals":"Deals"}[f.pathname]||"Manager Panel";return h.useEffect(()=>{w()},[]),h.useEffect(()=>{const N=()=>w();return window.addEventListener("userProfileUpdated",N),()=>window.removeEventListener("userProfileUpdated",N)},[w]),h.useEffect(()=>{if(!y?.id)return;const N=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",S=window.location.protocol==="https:"?"wss:":"ws:",T=N?"localhost:8000":window.location.host,k=`${S}//${T}/ws/notifications?user_id=${y.id}`,_=new WebSocket(k);return _.onmessage=E=>{const A=JSON.parse(E.data);l(I=>[A,...I]),c(I=>I+1)},()=>_.close()},[y?.id]),h.useEffect(()=>{function N(S){d.current&&!d.current.contains(S.target)&&a(!1),u.current&&!u.current.contains(S.target)&&r(!1)}return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),n.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative z-50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:n.jsx(ex,{className:"text-2xl"})}),n.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:C})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"relative",ref:u,children:[n.jsxs("button",{onClick:()=>r(!s),className:"relative text-gray-600 hover:text-gray-800 transition",children:[n.jsx(Zp,{className:"text-xl"}),o>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] w-4 h-4 flex items-center justify-center rounded-full font-semibold",children:o})]}),s&&n.jsxs("div",{className:"absolute right-0 mt-3 w-80 bg-white rounded-xl shadow-lg border z-50 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200",children:[n.jsxs("div",{className:"p-3 border-b bg-gray-50 flex justify-between items-center",children:[n.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:"Notifications"}),n.jsx("button",{onClick:()=>{l([]),c(0)},className:"text-xs text-blue-600 hover:underline",children:"Clear All"})]}),n.jsx("div",{className:"max-h-60 overflow-y-auto",children:i.length>0?i.map((N,S)=>n.jsx("div",{className:"p-3 border-b text-sm hover:bg-gray-50 cursor-pointer transition",children:N.title||N.message||"New Notification"},S)):n.jsx("div",{className:"p-4 text-center text-gray-500 text-xs",children:"No notifications"})})]})]}),n.jsxs("div",{className:"relative",ref:d,children:[n.jsxs("button",{onClick:()=>a(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded transition",children:[n.jsx("img",{src:y?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 h-8 object-cover rounded-full border border-gray-200"}),n.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[y?.first_name," ",y?.last_name]})]}),t&&n.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4 animate-in fade-in slide-in-from-top-2 duration-200",children:[n.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[n.jsx("img",{src:y?.profile_picture||"https://via.placeholder.com/80",alt:"Profile Large",className:"w-16 h-16 rounded-full object-cover border-2 border-gray-100"}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[y?.first_name," ",y?.middle_name," ",y?.last_name]}),n.jsx("p",{className:"text-[11px] text-gray-600 font-light w-full truncate",children:"Manager"})]})]}),n.jsxs("div",{className:"mt-6 space-y-1 px-2",children:[n.jsx("button",{onClick:()=>{p("/manager/users"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 p-2 rounded text-left transition",children:"Invite Your Team"}),n.jsx("button",{onClick:()=>{p("/manager/manage-account"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 p-2 rounded text-left transition",children:"Manage Your Account"}),n.jsx("div",{className:"border-t border-gray-100 my-2"}),n.jsx("button",{onClick:x,className:"block w-full text-sm text-red-600 hover:bg-red-50 p-2 rounded text-left transition font-medium",children:"Logout"})]})]})]})]})]})}function gFe(){const[e,t]=h.useState(!0),[a,s]=h.useState(!1),[r,i]=h.useState(!1),[l,o]=h.useState(!1),c=Yt(),{user:d}=Kt();h.useEffect(()=>{d&&console.log("Fetched user:",d)},[d]),h.useEffect(()=>{document.title="Panel | Sari-Sari CRM"},[]);const u="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",f="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition",x=["/manager/accounts","/manager/contacts","/manager/leads","/manager/deals","/manager/quotes","/manager/targets","/manager/meetings","/manager/manage-account"].includes(c.pathname);return n.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[n.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${l?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[n.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[n.jsxs("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:[" Sari-Sari.CRM"," ",n.jsx("span",{className:"text-[12px] text-gray-700 font-medium align-bottom",children:"v2"})]}),d&&d.company&&n.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:d.company.company_name})]}),n.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[n.jsxs(Dt,{to:"/manager/dashboard",className:({isActive:y})=>y?u:f,children:[n.jsx(Jp,{className:"text-lg"}),n.jsx("span",{children:"Dashboard"})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>t(!e),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-lg"}),"Sales"]}),n.jsx(jt,{className:`transition-transform ${e||x?"rotate-180":""}`})]}),(e||x)&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(Dt,{to:"/manager/accounts",className:({isActive:y})=>y?u:f,children:[n.jsx(On,{})," Accounts"]}),n.jsxs(Dt,{to:"/manager/contacts",className:({isActive:y})=>y?u:f,children:[n.jsx(Jt,{})," Contacts"]}),n.jsxs(Dt,{to:"/manager/leads",className:({isActive:y})=>y?u:f,children:[n.jsx(Wn,{})," Leads"]}),n.jsxs(Dt,{to:"/manager/deals",className:({isActive:y})=>y?u:f,children:[n.jsx(Qt,{})," Deals"]}),n.jsxs(Dt,{to:"/manager/quotes",className:({isActive:y})=>y?u:f,children:[n.jsx(xn,{})," Quotes"]}),n.jsxs(Dt,{to:"/manager/targets",className:({isActive:y})=>y?u:f,children:[n.jsx(tr,{})," Targets"]})]})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!a),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(ws,{className:"text-lg"}),"Activity"]}),n.jsx(jt,{className:`transition-transform ${a?"rotate-180":""}`})]}),a&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(Dt,{to:"/manager/tasks",className:({isActive:y})=>y?u:f,children:[n.jsx(Gt,{})," Tasks"]}),n.jsxs(Dt,{to:"/manager/meetings",className:({isActive:y})=>y?u:f,children:[n.jsx(Ct,{})," Meetings"]}),n.jsxs(Dt,{to:"/manager/calls",className:({isActive:y})=>y?u:f,children:[n.jsx(Ls,{})," Calls"]}),n.jsxs(Dt,{to:"/manager/audit",className:({isActive:y})=>y?u:f,children:[n.jsx(ws,{})," Audit"]})]})]}),n.jsx("div",{children:n.jsx(Dt,{to:"/manager/territory",className:({isActive:y})=>y?u:f,children:n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(zo,{className:"text-lg"}),"Territory"]})})}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!r),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Uk,{className:"text-lg"}),"User Management"]}),n.jsx(jt,{className:`transition-transform ${r?"rotate-180":""}`})]}),r&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(Dt,{to:"/manager/users",className:({isActive:y})=>y?u:f,children:[n.jsx(On,{})," Users"]}),n.jsxs(Dt,{to:"/manager/manage-account",className:({isActive:y})=>y?u:f,children:[n.jsx(Jt,{})," Manage Account"]})]})]})]}),n.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),l&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>o(!1)}),n.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[n.jsx(hFe,{toggleSidebar:()=>o(!l)}),n.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:n.jsx(Gp,{})})]})]})}const pFe=e=>n.jsx(Bt,{...e}),xFe=e=>n.jsx(zf,{...e}),yFe=e=>n.jsx(Bk,{...e}),LZ=e=>n.jsx(zs,{...e}),bFe=e=>n.jsx(Xp,{...e}),vFe=e=>n.jsx(Dw,{...e}),wFe=e=>n.jsx(Ct,{...e}),NFe=e=>n.jsx(At,{...e}),jFe=e=>n.jsx(Mw,{...e}),PZ=e=>n.jsx(Ow,{...e}),DZ=e=>n.jsx(On,{...e}),OZ=e=>n.jsx(Jt,{...e}),CFe=e=>n.jsx(Wn,{...e}),SFe=e=>n.jsx(Qt,{...e}),_Fe=e=>n.jsx(xn,{...e}),AFe=e=>n.jsx(tr,{...e}),EFe=e=>n.jsx(ba,{...e}),TFe=e=>n.jsx(Ct,{...e}),kFe=e=>n.jsx(Ls,{...e}),LFe=e=>n.jsx(zo,{...e}),PFe=e=>n.jsx(ws,{...e}),MZ=e=>`P ${new Intl.NumberFormat("en-PH",{minimumFractionDigits:0}).format(e)}`,DFe=e=>{switch(e){case"Negotiation":return{text:"text-purple-700",bg:"bg-purple-100"};case"Proposal":return{text:"text-red-700",bg:"bg-red-100"};case"Qualification":return{text:"text-yellow-700",bg:"bg-yellow-100"};case"Prospecting":return{text:"text-blue-700",bg:"bg-blue-100"};case"Closed Won":return{text:"text-green-700",bg:"bg-green-100"};case"Closed Lost":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},OFe=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},MFe=e=>{switch(e){case"call":return{Icon:NFe,color:"text-red-500",bgColor:"bg-red-100"};case"qualification":return{Icon:jFe,color:"text-green-600",bgColor:"bg-green-100"};default:return{Icon:wFe,color:"text-blue-500",bgColor:"bg-blue-100"}}},IFe=e=>{switch(e.toUpperCase()){case"HIGH":return{text:"text-red-700",bg:"bg-red-100"};case"LOW":return{text:"text-blue-700",bg:"bg-blue-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},$Fe=({searchQuery:e,onSearchChange:t,searchResults:a,onSearchResultClick:s})=>{const r=yt(),[i,l]=h.useState(!1),o=h.useRef(null),c=[{icon:DZ,label:"Account"},{icon:OZ,label:"Contact"},{icon:CFe,label:"Leads"},{icon:SFe,label:"Deals"},{icon:_Fe,label:"Quotes"},{icon:AFe,label:"Target"},{icon:EFe,label:"Task"},{icon:TFe,label:"Meeting"},{icon:kFe,label:"Call"},{icon:PFe,label:"Audit"},{icon:LFe,label:"Territory"}];h.useEffect(()=>{const f=p=>{o.current&&!o.current.contains(p.target)&&l(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const d=f=>{t(f.target.value),l(f.target.value.trim().length>0)},u=f=>{s&&s(f),l(!1)};return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 sm:p-4 flex flex-col items-start space-y-4 w-full",children:[n.jsxs("div",{className:"w-full flex justify-center relative",ref:o,children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg lg:mt-3 px-4 py-2 w-full max-w-md md:max-w-lg lg:max-w-2xl focus-within:ring-2 focus-within:ring-blue-500 transition duration-150",children:[n.jsx(pFe,{size:20,className:"text-gray-400 mr-3 flex-shrink-0"}),n.jsx("input",{type:"text",placeholder:"Search Leads, Deals, or Accounts...",className:"focus:outline-none text-base w-full",value:e,onChange:d,onFocus:()=>e.trim().length>0&&l(!0)})]}),i&&Array.isArray(a)&&a.length>0&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:a.map((f,p)=>n.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition duration-150",onClick:()=>u(f),children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:f.name}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:f.type}),f.details&&n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:f.details})]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${f.type==="Lead"?"bg-blue-100 text-blue-600":f.type==="Deal"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:f.type})]})},p))}),i&&e.trim().length>0&&(!Array.isArray(a)||a.length===0)&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 p-4 text-center text-sm text-gray-500",children:"No results found"})]}),n.jsx("div",{className:"w-full overflow-x-auto lg:overflow-x-hidden scroll-smooth flex justify-center",children:n.jsx("div",{className:"flex flex-nowrap space-x-3 lg:space-x-4 xl:space-x-3 px-2 sm:px-0",children:c.map((f,p)=>n.jsxs("div",{className:"relative flex-shrink-0 group",children:[n.jsx("button",{className:"p-3 text-gray-500 hover:text-gray-900 transition duration-150 rounded-full hover:bg-gray-100 focus:outline-none cursor-pointer","aria-label":f.label,title:f.label,onClick:()=>{switch(f.label){case"Account":r("/manager/accounts");break;case"Contact":r("/manager/contacts");break;case"Leads":r("/manager/leads");break;case"Deals":r("/manager/deals");break;case"Quotes":r("/manager/quotes");break;case"Target":r("/manager/targets");break;case"Task":r("/manager/tasks");break;case"Meeting":r("/manager/meetings");break;case"Call":r("/manager/calls");break;case"Audit":r("/manager/audit");break;case"Territory":r("/manager/territory");break;default:console.log(`Clicked ${f.label}`)}},children:n.jsx(f.icon,{size:24,className:"lg:scale-95"})}),n.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-1.5 bg-gray-900 text-white text-xs font-semibold rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-75 ease-in-out z-50 shadow-lg",children:[f.label,n.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]},p))})})]})},RFe=({action:e,description:t,entity_type:a,entity_name:s,timestamp:r})=>{const i=yt(),l=u=>{if(!u)return"Unknown";const f=new Date(u),x=new Date-f,y=Math.floor(x/6e4),w=Math.floor(x/36e5),v=Math.floor(x/864e5);return y<1?"Just now":y<60?`${y} min ago`:w<24?`${w} hour${w>1?"s":""} ago`:v<7?`${v} day${v>1?"s":""} ago`:f.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},o=e||t||"Action",c=s||a||"System",d=l(r);return n.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i("/manager/audit"),children:[n.jsxs("p",{className:"text-sm text-gray-800 flex-grow font-medium",children:[o," ",n.jsxs("span",{className:"text-gray-500 italic text-xs",children:["(",c,")"]})]}),n.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-4",children:d})]})},zFe=({logs:e,loading:t})=>{const a=yt();return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Recent Logs"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/manager/audit"),children:[n.jsx("span",{children:"See All"}),n.jsx(PZ,{size:14,className:"transform -rotate-45"})]})]}),e&&e.length>0?n.jsx("ul",{className:"space-y-1",children:e.slice(0,3).map((s,r)=>n.jsx(RFe,{...s},r))}):n.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No recent logs"})]})},FFe=({icon:e,title:t,value:a,color:s,bgColor:r,loading:i,onClick:l})=>n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l||(()=>console.log(`Clicked metric card: ${t}`)),children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:20})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a||0})]})]}),UFe=({revenueData:e,loading:t})=>{const a=yt(),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=h.useMemo(()=>{if(console.log("=== RevenueChart calculateRevenueData ==="),console.log("revenueData:",e),console.log("revenueData length:",e?.length),!e||e.length===0){console.log("No revenue data, returning empty chart");const v=new Date;v.getFullYear();const C=v.getMonth(),N=[],S=[];for(let T=0;T<=C;T++)N.push(s[T]),S.push(0);return{labels:N,revenues:S,maxRevenue:0}}const o={};let c=0,d=0;console.log("Processing deals:",e.length),e.forEach((v,C)=>{const N=v.close_date||v.closeDate||null,S=N&&N!==null&&N!=="",T=v.stage||"",k=T.toUpperCase()==="CLOSED_WON"||T==="CLOSED_WON";let _=v.amount;_&&typeof _=="object"&&_.toString?_=parseFloat(_.toString()):_=parseFloat(_)||0;const E=_>0;if(k&&(d++,console.log(`Deal ${C+1} (CLOSED_WON):`,{id:v.id,name:v.name,stage:T,close_date:N,close_date_type:typeof N,amount:_,amount_type:typeof v.amount,hasCloseDate:S,hasAmount:E,willBeAdded:S&&E,allFields:Object.keys(v)})),S&&k&&E)try{let A=new Date(N);if(isNaN(A.getTime())){const I=String(N).split("T")[0];A=new Date(I+"T00:00:00")}if(isNaN(A.getTime()))console.warn(` Invalid date for deal ${v.id}:`,N,"Type:",typeof N);else{const I=A.getFullYear(),z=A.getMonth()+1,F=`${I}-${String(z).padStart(2,"0")}`;o[F]||(o[F]=0),o[F]+=_,c++,console.log(` Added deal ${v.id} to month ${F}: ${_}, total: ${o[F]}`),console.log(`  - Close date: ${N} -> Parsed: ${A.toISOString()} -> Month: ${F} (Year: ${I}, Month: ${z})`)}}catch(A){console.error("Error parsing deal date:",N,A)}else k&&console.warn(` Deal ${v.id} is CLOSED_WON but missing data:`,{hasCloseDate:S,hasAmount:E,closeDate:N,amount:_,originalAmount:v.amount})}),console.log("Summary:",{totalDeals:e.length,closedWonDeals:d,validDealsForGraph:c,monthlyRevenue:o});const u=Object.keys(o).map(v=>parseInt(v.split("-")[0])),f=u.length>0?[...new Set(u)].sort():[],p=new Date().getFullYear();new Date().getMonth();const x=[],y=[];for(let v=0;v<12;v++){const C=`${p}-${String(v+1).padStart(2,"0")}`;x.push(s[v]);const N=o[C]||0;y.push(N),N>0&&console.log(`Month ${s[v]} (${C}): ${N}`)}if(f.length>0){const v=Math.max(...f);if(v>p)for(let C=p+1;C<=v;C++)for(let N=0;N<12;N++){const S=`${C}-${String(N+1).padStart(2,"0")}`,T=o[S]||0;x.push(`${s[N]} ${C}`),y.push(T),T>0&&console.log(`Month ${s[N]} ${C} (${S}): ${T}`)}}const w=Math.max(...y,1);return console.log("Final chart data:",{labels:x,revenues:y,maxRevenue:w,hasData:y.some(v=>v>0)}),{labels:x,revenues:y,maxRevenue:w}},[e]),i=r.labels,l=r.revenues;return console.log("=== FINAL CHART DATA ==="),console.log("X Axis (Months):",i),console.log("Y Axis (Revenue):",l),console.log("Has any revenue > 0:",l.some(o=>o>0)),console.log("All revenue values:",l),console.log("Max revenue:",r.maxRevenue),n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Overview"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/manager/deals"),children:[n.jsx("span",{children:"See All"}),n.jsx(PZ,{size:14,className:"transform -rotate-45"})]})]}),n.jsx("div",{className:"h-80 relative flex-1 flex items-center justify-center p-6",children:n.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i&&i.length>0&&l&&l.length>0?n.jsx(BN,{xAxis:[{data:i,scaleType:"point"}],yAxis:[{valueFormatter:o=>o>=1e3?`${(o/1e3).toFixed(0)}k`:o.toString()}],series:[{data:l,showMark:!0,area:!0}],height:320,width:void 0,grid:{vertical:!0,horizontal:!0},margin:{top:40,right:40,bottom:50,left:50},sx:{width:"100%",maxWidth:"100%"}}):n.jsxs("div",{className:"text-center text-gray-500",children:[n.jsx("p",{className:"text-sm",children:"No revenue data available"}),n.jsx("p",{className:"text-xs mt-2",children:"Closed won deals with close dates will appear here"})]})})})]})},BFe=({pipelineData:e,loading:t})=>{const a=yt(),s=l=>{const o=(l||"").toUpperCase(),c={PROSPECTING:{name:"Prospecting",color:"bg-blue-500"},QUALIFICATION:{name:"Qualification",color:"bg-yellow-500"},PROPOSAL:{name:"Proposal",color:"bg-orange-500"},NEGOTIATION:{name:"Negotiation",color:"bg-purple-500"},CLOSED_WON:{name:"Closed Won",color:"bg-green-500"},CLOSED_LOST:{name:"Closed Lost",color:"bg-red-500"}};if(c[o])return c[o];const d=["bg-blue-500","bg-yellow-500","bg-orange-500","bg-purple-500","bg-green-500","bg-red-500"],u=Math.abs(o.split("").reduce((f,p)=>f+p.charCodeAt(0),0))%d.length;return{name:l||"Unknown",color:d[u]}},i=(()=>{if(!e||e.length===0)return["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"].map(f=>{const p=s(f);return{stage:p.name,value:0,deals:0,color:p.color}});const l={};e.forEach(u=>{const f=u.stage||"PROSPECTING";l[f]||(l[f]={deals:0,value:0}),l[f].deals+=1,l[f].value+=parseFloat(u.amount||0)});const o=Math.max(...Object.values(l).map(u=>u.value),1),c=["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"],d=[];return c.forEach(u=>{const f=s(u),p=l[u]||{deals:0,value:0};d.push({stage:f.name,value:p.value,deals:p.deals,color:f.color,percentage:o>0?p.value/o*100:0})}),d})();return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Sales Pipeline"}),n.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:()=>a("/manager/deals"),children:"See All"})]}),n.jsx("div",{className:"space-y-4 flex-grow",children:i.slice(0,6).map(l=>n.jsxs("div",{className:"flex flex-col cursor-pointer hover:opacity-85 transition duration-150",onClick:()=>a("/manager/deals"),children:[n.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[n.jsx("span",{className:"font-medium text-gray-700",children:l.stage}),n.jsx("span",{className:"font-semibold text-gray-800",children:MZ(l.value)})]}),n.jsx("div",{className:"relative h-2 rounded-full bg-gray-200",children:n.jsx("div",{className:`absolute top-0 left-0 h-full rounded-full ${l.color}`,style:{width:`${Math.min(l.percentage,100)}%`}})}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[l.deals," Deals"]})]},l.stage))})]})},dA=({title:e,items:t,children:a,onSeeAll:s})=>{const r=yt(),i=()=>{if(s)s();else{const l={"Latest Leads":"/manager/leads","Latest Deals":"/manager/deals","Upcoming Activities":"/manager/tasks"};l[e]&&r(l[e])}};return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e}),n.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:i,children:"See All"})]}),a]})},HFe=({first_name:e,last_name:t,company_name:a,source:s,created_at:r,id:i})=>{const l=yt(),{text:o,bg:c}=OFe(s||"Website"),d=x=>{if(!x)return"Unknown";const y=new Date(x),v=new Date-y,C=Math.floor(v/6e4),N=Math.floor(v/36e5),S=Math.floor(v/864e5);return C<60?`${C} min ago`:N<24?y.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):S<7?y.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):y.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},u=`${e||""} ${t||""}`.trim()||"Unknown",f=a||"Unknown Company",p=d(r);return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&l(`/manager/leads/${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800",children:u}),n.jsx("p",{className:"text-xs text-gray-500",children:f})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-400",children:p}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${o} ${c} px-2 py-0.5 rounded-full`,children:s||"Website"})]})]})})},GFe=({name:e,amount:t,account:a,stage:s,created_at:r,id:i,previousAmount:l})=>{const o=yt(),d={PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"}[s]||s||"Unknown",{text:u,bg:f}=DFe(d),p=parseFloat(t||0),x=l?p>=l?"up":"down":"up",y=x==="up"?bFe:vFe,w=x==="up"?"text-green-400":"text-red-400",v=a?.name||"Unknown Company";return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&o(`/manager/deals/info?id=${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex-shrink",children:[n.jsx("p",{className:"font-semibold text-sm text-gray-900",children:e||"Unnamed Deal"}),n.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:v}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${u} ${f} px-2 py-0.5 rounded-full`,children:d})]}),n.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[n.jsx("p",{className:"text-md font-bold text-gray-800",children:MZ(p)}),n.jsx(y,{size:16,className:`${w} mt-1`})]})]})})},WFe=({type:e,title:t,assignedTo:a,dueDate:s,scheduledDate:r,priority:i,id:l,activityType:o,fullData:c})=>{const d=yt(),f=o||{Call:"call",Meeting:"meeting",Task:"qualification"}[e]||"meeting",{Icon:p,color:x,bgColor:y}=MFe(f),{text:w,bg:v}=IFe(i||"MEDIUM"),S=(_=>{if(!_)return"No date set";const E=new Date(_),I=E-new Date,z=Math.floor(I/864e5);return z===0?`Today, ${E.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:z===1?`Tomorrow, ${E.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:z===-1?`Yesterday, ${E.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:E.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(s||r),T=a||"Unassigned",k=()=>{l&&(c?f==="call"?(sessionStorage.setItem("callDetailData",JSON.stringify(c)),d(`/manager/calls/info?id=${l}`)):f==="meeting"?(sessionStorage.setItem("meetingDetailData",JSON.stringify(c)),d(`/manager/meetings/info?id=${l}`)):d("/manager/tasks"):d(f==="call"?`/manager/calls/info?id=${l}`:f==="meeting"?`/manager/meetings/info?id=${l}`:"/manager/tasks"))};return n.jsxs("div",{className:"flex items-start py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:k,children:[n.jsx("div",{className:`p-2 rounded-lg ${y} mr-3 flex-shrink-0 mt-1`,children:n.jsx(p,{size:20,className:`${x}`})}),n.jsxs("div",{className:"flex-grow",children:[n.jsxs("p",{className:"font-medium text-gray-800 flex items-center mb-1",children:[n.jsx("span",{className:"text-xl leading-none mr-2",children:""}),t||"Untitled Activity"]}),n.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[n.jsxs("p",{className:"flex items-center",children:[n.jsx(LZ,{size:14,className:"mr-1.5 text-gray-400"}),S]}),n.jsxs("p",{className:"flex items-center",children:[n.jsx(OZ,{size:14,className:"mr-1.5 text-gray-400"}),"Assigned to: ",T]})]})]}),n.jsx("span",{className:`inline-block text-xs font-medium ${w} ${v} px-2 py-0.5 rounded-full flex-shrink-0 self-center ml-4`,children:(i||"MEDIUM").toUpperCase()})]})},VFe=()=>{const e=yt(),{user:t}=Kt(),[a,s]=h.useState({activeLeads:0,totalDeals:0,activeAccounts:0,overdueTasks:0}),[r,i]=h.useState([]),[l,o]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState([]),[p,x]=h.useState([]),[y,w]=h.useState([]),[v,C]=h.useState(!0),[N,S]=h.useState(null),[T,k]=h.useState(""),[_,E]=h.useState([]),[A,I]=h.useState([]),[z,F]=h.useState([]),[D,M]=h.useState(new Date),W=h.useRef(null),Z=h.useRef(null),R=h.useMemo(()=>{try{if(!T.trim())return[];const re=T.toLowerCase().trim(),ee=[];return Array.isArray(_)&&_.forEach(H=>{const ye=`${H.first_name||""} ${H.last_name||""}`.trim().toLowerCase(),te=(H.company_name||"").toLowerCase(),ve=(H.email||"").toLowerCase(),je=(H.phone||"").toLowerCase();(ye.includes(re)||te.includes(re)||ve.includes(re)||je.includes(re))&&ee.push({id:H.id,name:`${H.first_name||""} ${H.last_name||""}`.trim()||"Unnamed Lead",type:"Lead",details:H.company_name||"No company",route:`/manager/leads/${H.id}`})}),Array.isArray(A)&&A.forEach(H=>{const ye=(H.name||"").toLowerCase(),te=(H.account?.name||"").toLowerCase(),ve=(H.description||"").toLowerCase();(ye.includes(re)||te.includes(re)||ve.includes(re))&&ee.push({id:H.id,name:H.name||"Unnamed Deal",type:"Deal",details:H.account?.name||"No account",route:`/manager/deals/info?id=${H.id}`})}),Array.isArray(z)&&z.forEach(H=>{const ye=(H.name||"").toLowerCase(),te=(H.email||"").toLowerCase(),ve=(H.phone||"").toLowerCase(),je=(H.website||"").toLowerCase();(ye.includes(re)||te.includes(re)||ve.includes(re)||je.includes(re))&&ee.push({id:H.id,name:H.name||"Unnamed Account",type:"Account",details:H.email||H.phone||"No contact info",route:"/manager/accounts"})}),ee.slice(0,10)}catch(re){return console.error("Error in search:",re),[]}},[T,_,A,z]),Q=re=>{re.route&&(e(re.route),k(""))},Y=h.useCallback(async()=>{C(!0),S(null);try{const[re,ee,H,ye,te,ve,je]=await Promise.all([ce.get("/leads/manager/getLeads").catch(de=>(console.error("Error fetching leads:",de),{data:[]})),ce.get("/deals/manager/fetch-all").catch(de=>(console.error("Error fetching deals:",de),{data:[]})),ce.get("/accounts/manager/fetch-all").catch(de=>(console.error("Error fetching accounts:",de),{data:[]})),ce.get("/tasks/all").catch(de=>(console.error("Error fetching tasks:",de),{data:[]})),ce.get("/meetings/manager/fetch-all").catch(de=>(console.error("Error fetching meetings:",de),{data:[]})),ce.get("/calls/manager/fetch-all").catch(de=>(console.error("Error fetching calls:",de),{data:[]})),ce.get("/logs/read-all").catch(de=>(console.error("Error fetching logs:",de),{data:[]}))]),Oe=Array.isArray(re.data)?re.data:[],$e=Array.isArray(ee.data)?ee.data:[],pe=Array.isArray(H.data)?H.data:[],Me=Array.isArray(ye.data)?ye.data:[],Le=Array.isArray(te.data)?te.data:[],he=Array.isArray(ve.data)?ve.data:[],ae=Array.isArray(je.data)?je.data:[];console.log("=== RAW DEALS API RESPONSE ==="),console.log("Deals count:",$e.length),$e.length>0&&(console.log("First deal sample (raw):",JSON.stringify($e[0],null,2)),console.log("First deal keys:",Object.keys($e[0]))),E(Oe),I($e),F(pe);const Ae=Oe.filter(de=>de.status&&!["Lost","Converted"].includes(de.status)).length,ge=Me.filter(de=>!de.dueDate||de.status==="Completed"?!1:new Date(de.dueDate)<new Date).length;s({activeLeads:Ae,totalDeals:$e.length,activeAccounts:pe.length,overdueTasks:ge});const Be=[...Oe].sort((de,ke)=>new Date(ke.created_at||0)-new Date(de.created_at||0)).slice(0,5);i(Be);const qe=[...$e].sort((de,ke)=>new Date(ke.created_at||0)-new Date(de.created_at||0)).slice(0,5);o(qe);const Te=new Date,He=[];he.forEach(de=>{const ke=de.due_date||de.call_time,se=(de.status||"").toUpperCase();if(ke){const We=new Date(ke);se==="COMPLETED"||se==="MISSED"||se==="NOT_HELD"||se==="HELD"||He.push({type:"Call",title:de.subject||"Untitled Call",assignedTo:de.assigned_to||(de.call_assign_to?`${de.call_assign_to.first_name||""} ${de.call_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:ke,priority:(de.priority||"MEDIUM").toUpperCase(),id:de.id,activityType:"call",fullData:de})}}),Le.forEach(de=>{const ke=de.dueDate||de.start_time,se=(de.status||"").toUpperCase();if(ke){const We=new Date(ke);se==="COMPLETED"||se==="CANCELLED"||se==="DONE"||He.push({type:"Meeting",title:de.subject||de.activity||"Untitled Meeting",assignedTo:de.assignedTo||(de.meet_assign_to?`${de.meet_assign_to.first_name||""} ${de.meet_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:ke,priority:(de.priority||"MEDIUM").toUpperCase(),id:de.id,activityType:"meeting",fullData:de})}});const Ye={HIGH:1,MEDIUM:2,LOW:3},B=He.sort((de,ke)=>{const se=Ye[de.priority]||3,We=Ye[ke.priority]||3;if(se!==We)return se-We;const Re=new Date(de.scheduledDate||0),ct=new Date(ke.scheduledDate||0);return Re-ct}).slice(0,5);d(B),f($e),console.log("=== ALL DEALS DATA ==="),console.log("Total deals:",$e.length);const fe=$e.filter(de=>(de.stage||"").toUpperCase()==="CLOSED_WON");console.log("CLOSED_WON deals:",fe.length),fe.length>0?(console.log("=== CLOSED_WON DEALS DETAILS ==="),fe.forEach((de,ke)=>{let se=de.amount;se&&typeof se=="object"?se.toString?se=parseFloat(se.toString()):se=parseFloat(se):se=parseFloat(se)||0,console.log(`Deal ${ke+1}:`,{id:de.id,name:de.name,stage:de.stage,stage_upper:(de.stage||"").toUpperCase(),amount:de.amount,amount_parsed:se,amount_type:typeof de.amount,close_date:de.close_date,close_date_type:typeof de.close_date,close_date_value:de.close_date?new Date(de.close_date):null,has_close_date:!!de.close_date,has_amount:se>0,all_keys:Object.keys(de),full_deal:de})})):(console.log(" No CLOSED_WON deals found!"),console.log("All deal stages:",$e.map(de=>de.stage))),w($e);const Se=[...ae].sort((de,ke)=>new Date(ke.timestamp||0)-new Date(de.timestamp||0));x(Se)}catch(re){console.error("Error fetching dashboard data:",re),S("Failed to load dashboard data. Please refresh the page.")}finally{C(!1)}},[]);h.useEffect(()=>(document.title="Dashboard | Sari-Sari CRM",console.log("ManagerDashboard mounted, fetching data..."),Y(),W.current=setInterval(()=>{console.log("Auto-refreshing dashboard data..."),Y(),M(new Date)},3e4),()=>{W.current&&clearInterval(W.current)}),[Y]),h.useEffect(()=>{if(!t||!t.id)return;let re=0;const ee=3;let H=null;const ye=()=>{const te=window.location.protocol==="https:"?"wss:":"ws:",ve=window.location.hostname==="localhost"?"localhost:8000":window.location.host,je=`${te}//${ve}/ws/notifications?user_id=${t.id}`;try{const Oe=new WebSocket(je);Z.current=Oe,Oe.onopen=()=>{console.log(" WebSocket connected for dashboard updates"),re=0},Oe.onmessage=$e=>{try{const pe=JSON.parse($e.data);console.log(" Real-time notification received:",pe),pe.event&&["new_task","task_updated","new_lead","lead_updated","new_deal","deal_updated","new_account","account_updated","new_meeting","meeting_updated","new_call","call_updated"].includes(pe.event)&&(console.log(" Refreshing dashboard due to:",pe.event),Y(),M(new Date))}catch(pe){console.error("Error parsing WebSocket message:",pe)}},Oe.onerror=$e=>{re===0&&console.warn(" WebSocket connection unavailable (this is optional)")},Oe.onclose=()=>{re<ee&&(re++,H=setTimeout(()=>{t&&t.id&&ye()},5e3))}}catch{console.warn(" WebSocket not available (optional feature)")}};return ye(),()=>{H&&clearTimeout(H),Z.current&&(Z.current.close(),Z.current=null)}},[t,Y]);const oe=[{icon:DZ,title:"Active Leads",value:a.activeLeads,color:"text-blue-600",bgColor:"bg-blue-50",onClick:()=>e("/manager/leads")},{icon:xFe,title:"Total Deals",value:a.totalDeals,color:"text-yellow-600",bgColor:"bg-yellow-50",onClick:()=>e("/manager/deals")},{icon:yFe,title:"Active Account",value:a.activeAccounts,color:"text-green-600",bgColor:"bg-green-50",onClick:()=>e("/manager/accounts")},{icon:LZ,title:"Overdue Tasks",value:a.overdueTasks,color:"text-red-600",bgColor:"bg-red-50",onClick:()=>e("/manager/tasks")}];return console.log("ManagerDashboard rendering, loading:",v,"error:",N),n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative w-full",children:[v&&n.jsx(Rt,{}),n.jsxs("div",{className:"max-w-screen-2xl mx-auto",children:[N&&n.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:n.jsx("p",{className:"font-medium",children:N})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 mb-8",children:[n.jsxs("div",{className:"lg:col-span-9 flex flex-col space-y-4",children:[n.jsx($Fe,{searchQuery:T,onSearchChange:k,searchResults:R,onSearchResultClick:Q}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:oe.map(re=>n.jsx(FFe,{...re,loading:v},re.title))})]}),n.jsx("div",{className:"lg:col-span-3",children:n.jsx(zFe,{logs:p,loading:v})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[n.jsx("div",{className:"lg:col-span-2",children:n.jsx(UFe,{revenueData:y,loading:v})}),n.jsx("div",{children:n.jsx(BFe,{pipelineData:u,loading:v})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsx(dA,{title:"Latest Leads",children:r.length>0?r.map((re,ee)=>n.jsx(HFe,{...re},re.id||ee)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No leads found"})}),n.jsx(dA,{title:"Latest Deals",children:v?n.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mb-2"}),n.jsx("div",{className:"text-sm text-gray-500",children:"Loading deals..."})]}):l.length>0?l.map((re,ee)=>n.jsx(GFe,{...re},re.id||ee)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No deals found"})}),n.jsx(dA,{title:"Upcoming Activities",children:c.length>0?c.map((re,ee)=>n.jsx(WFe,{...re},re.id||ee)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No upcoming activities"})})]})]})]})},uA=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Active"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Former"}],mA={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",parent_company:"",status:"PROSPECT",territory_id:"",assigned_to:""},Cr=e=>e?e.toUpperCase():"",fA=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",qFe=e=>{switch(Cr(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},YFe=e=>{switch(Cr(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}};function QFe(){const e=yt();h.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[t,a]=h.useState(!1),[s,r]=h.useState(!1),[i,l]=h.useState(!1),[o,c]=h.useState(null),[d,u]=h.useState(null),[f,p]=h.useState(mA),[x,y]=h.useState(null),[w,v]=h.useState([]),[C,N]=h.useState(!1),[S,T]=h.useState([]),[k,_]=h.useState(null),[E,A]=h.useState([]),[I,z]=h.useState([]),[F,D]=h.useState("Filter by Status"),[M,W]=h.useState(""),[Z,R]=h.useState(null),[Q,Y]=h.useState(!1),[oe,re]=h.useState(1),[ee,H]=h.useState(10),[ye,te]=h.useState("Overview"),[ve,je]=h.useState(""),[Oe,$e]=h.useState(!1),[pe,Me]=h.useState({}),[Le,he]=h.useState(null),ae=h.useCallback(async(le=null)=>{N(!0);try{const it=await ce.get("/accounts/admin/fetch-all"),Nt=[...Array.isArray(it.data)?it.data:[]].sort((L,U)=>{const xe=L?.created_at||L?.updated_at||0,De=U?.created_at||U?.updated_at||0;return new Date(De)-new Date(xe)});if(v(Nt),console.log("Fetch from backend: ",it.data),le){const L=Nt.find(U=>U.id===le);y(L||null)}}catch(it){console.error(it),v([]),it.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch accounts. Please try again later.")}finally{N(!1)}},[y]),Ae=h.useCallback(async()=>{try{const le=await ce.get("/users/all");T(Array.isArray(le.data)?le.data:[])}catch(le){console.error(le),le.response?.status===403&&q.warn("Unable to load users for assignment (permission denied).")}},[]),ge=h.useCallback(async()=>{try{const le=await ce.get("/territories/fetch");A(Array.isArray(le.data)?le.data:[])}catch(le){console.error(le),le.response?.status===403&&q.warn("Unable to load territories (permission denied).")}},[]),Be=h.useCallback(async()=>{try{const le=await ce.get("/accounts/admin/parent-companies");z(Array.isArray(le.data)?le.data:[])}catch(le){console.error(le),le.response?.status===403&&q.warn("Unable to load parent companies (permission denied).")}},[]),qe=h.useCallback(async le=>{try{const it=await ce.get(`/activities/accounts/${le}`);console.log("Related activities: ",it.data),Me(it.data&&typeof it.data=="object"?it.data:{})}catch(it){console.error(it),it.response?.status===404&&(console.warn("No activities found for this account."),Me({}))}},[]);h.useEffect(()=>{ae(),Ae(),ge(),Be()},[ae,Ae,ge,Be]),h.useEffect(()=>{x&&je(Cr(x.status)||"PROSPECT")},[x]);const Te=w.length,He=h.useMemo(()=>w.filter(le=>le.status?.toLowerCase()==="customer").length,[w]),Ye=h.useMemo(()=>w.filter(le=>le.status?.toLowerCase()==="prospect").length,[w]),B=h.useMemo(()=>w.filter(le=>le.status?.toLowerCase()==="partner").length,[w]),fe=h.useMemo(()=>w.filter(le=>le.status?.toLowerCase()==="active").length,[w]),Se=h.useMemo(()=>w.filter(le=>le.status?.toLowerCase()==="inactive").length,[w]),de=h.useMemo(()=>w.filter(le=>le.status?.toLowerCase()==="former").length,[w]),ke=h.useMemo(()=>[{title:"Total",value:Te,icon:On,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:He,icon:Nl,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:Ye,icon:Wn,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:B,icon:Jt,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:fe,icon:Nl,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:Se,icon:jl,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:de,icon:jl,color:"text-orange-600",bgColor:"bg-orange-100"}],[Te,He,Ye,B,fe,Se,de]),se=h.useMemo(()=>{const le=M.trim().toLowerCase(),it=F.trim().toUpperCase();return w.filter(Et=>{const Nt=[Et?.name,Et?.website,Et?.industry,Et?.territory?.name,Et?.phone_number],L=le===""||Nt.some(xe=>xe==null?!1:xe.toString().toLowerCase().includes(le)),U=it==="FILTER BY STATUS"||Cr(Et.status)===it;return L&&U})},[w,M,F]),We=Math.max(1,Math.ceil(se.length/ee)||1);h.useEffect(()=>{re(1)},[M,F]),h.useEffect(()=>{re(le=>{const it=Math.max(1,Math.ceil(se.length/ee)||1);return le>it?it:le})},[se.length]);const Re=h.useMemo(()=>{const le=(oe-1)*ee;return se.slice(le,le+ee)},[se,oe]);se.length===0||(oe-1)*ee+1,Math.min(oe*ee,se.length);const ct=()=>re(le=>Math.max(le-1,1)),Ie=()=>re(le=>Math.min(le+1,We)),ue=le=>{y(le),te("Overview"),je(Cr(le?.status)||"PROSPECT")},Ne=()=>y(null),Fe=le=>{le.target.id==="accountModalBackdrop"&&!Q&&Ne()},Ze=()=>{a(!1),r(!1),u(null),p(mA),l(!1),_(null)},st=le=>{le.target.id==="modalBackdrop"&&Ze()},Ee=le=>le?new Date(le).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",Je=le=>{const{name:it,value:Et}=le.target;p(Nt=>({...Nt,[it]:Et}))},be=()=>{p(mA),r(!1),u(null),a(!0)},Ke=le=>{y(null),console.log("edit: ",le),le.assigned_accs?_(le.assigned_accs):_(null),p({name:le.name||"",website:le.website||"",phone_number:le.phone_number||"",billing_address:le.billing_address||"",shipping_address:le.shipping_address||"",industry:le.industry||"",status:Cr(le.status)||"PROSPECT",territory_id:le.territory?.id?String(le.territory.id):"",assigned_to:le.assigned_accs?.id?String(le.assigned_accs.id):""}),r(!0),u(le.id),a(!0)},$=le=>{le&&R({title:"Delete Account",message:n.jsxs("span",{children:["Are you sure you want to permanently delete the account"," ",n.jsx("span",{className:"font-semibold",children:le.name}),"? This action cannot be undone."]}),confirmLabel:"Delete Account",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:le.id,name:le.name}})},G=async()=>{if(!Z?.action){R(null);return}const{action:le}=Z,{type:it,payload:Et,targetId:Nt,name:L}=le;Y(!0);try{if(it==="create"){l(!0);const U=await ce.post("/accounts/admin",Et);Be(),q.success(`Account "${L}" created successfully.`);const xe=x?.id||null;Ze(),await ae(xe),!x&&U.data?.id}else if(it==="update"){if(!Nt)throw new Error("Missing account identifier for update.");l(!0),await ce.put(`/accounts/admin/${Nt}`,Et),q.success(`Account "${L}" updated successfully.`);const U=x?.id&&x.id===Nt?Nt:null;Ze(),await ae(U),x?.id===Nt&&y(null)}else if(it==="delete"){if(!Nt)throw new Error("Missing account identifier for deletion.");const U=x?.id;c(Nt),await ce.delete(`/accounts/admin/${Nt}`),q.success(`Account "${L}" deleted successfully.`),await ae(U&&U!==Nt?U:null),U===Nt&&y(null)}}catch(U){console.error(U);const xe=it==="create"?"Failed to create account. Please review the details and try again.":it==="update"?"Failed to update account. Please review the details and try again.":"Failed to delete account. Please try again.",De=U.response?.data?.detail||xe;q.error(De),(it==="create"||it==="update")&&l(!1),it==="delete"&&c(null)}finally{(it==="create"||it==="update")&&l(!1),it==="delete"&&c(null),Y(!1),R(null)}},K=()=>{Q||R(null)},ne=async()=>{if(!x||!ve)return;const le=Cr(ve),it=Cr(x.status);if(le!==it){$e(!0);try{await ce.put(`/accounts/admin/${x.id}`,{status:le}),q.success(`Account status updated to ${fA(le)}`),v(Et=>Et.map(Nt=>Nt.id===x.id?{...Nt,status:le}:Nt)),y(null)}catch(Et){console.error(Et);const Nt=Et.response?.data?.detail||"Failed to update account status. Please try again.";q.error(Nt)}finally{$e(!1)}}},[J,Ce]=h.useState(!1),me=le=>{le.preventDefault(),Ce(!0);const it=f.name.trim();if(!it){q.error("Account name is required.");return}if(!f.assigned_to){q.error("Assigned To is required.");return}const Nt={name:it,website:f.website?.trim()||null,phone_number:f.phone_number?.trim()||null,billing_address:f.billing_address?.trim()||null,shipping_address:f.shipping_address?.trim()||null,industry:f.industry?.trim()||null,parent_company:f.parent_company?.trim()||null,status:f.status||"PROSPECT",territory_id:f.territory_id?Number(f.territory_id):null,assigned_to:f.assigned_to?Number(f.assigned_to):null},L=s&&d?"update":"create";R({title:L==="create"?"Confirm New Account":"Confirm Update",message:L==="create"?n.jsxs("span",{children:["Are you sure you want to create the account"," ",n.jsx("span",{className:"font-semibold",children:it}),"?"]}):n.jsxs("span",{children:["Save changes to the account"," ",n.jsx("span",{className:"font-semibold",children:it}),"?"]}),confirmLabel:L==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:L,payload:Nt,targetId:d||null,name:it}})},V=[{label:"Filter by Status",value:"Filter by Status"},...uA.map(le=>({label:le.label,value:le.value}))],_e=Z?.action?.type==="delete"?Z.action.targetId:null,Ue=x&&(o===x.id||_e===x.id),rt=x&&o===x.id,bt=x?qFe(x.status):"",gt=x?n.jsx("div",{id:"accountModalBackdrop",onClick:Fe,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:le=>le.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),n.jsx("button",{onClick:Ne,className:"text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Vn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:x.name}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${bt}`,children:fA(x.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Ke(x),disabled:Z?.action?.type==="update"&&Z.action.targetId===x.id,children:[n.jsx(ia,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>$(x),disabled:!!Ue,children:rt?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(zt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(le=>n.jsx("button",{onClick:()=>te(le),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${ye===le?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:le},le))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[ye==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Website:"}),n.jsx("p",{children:x.website?n.jsx("a",{href:x.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:x.website}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Industry:"}),n.jsx("p",{children:x.industry||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Parent Company:"}),n.jsx("p",{children:x.parent_company||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:x.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:x.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Billing Address:"}),n.jsx("p",{children:x.billing_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),n.jsx("p",{children:x.shipping_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:x.assigned_accs?`${x.assigned_accs.first_name} ${x.assigned_accs.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:x.acc_creator?`${x.acc_creator.first_name} ${x.acc_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:Ee(x.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:Ee(x.updated_at)||"N/A"})]})]})}),ye==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:w.notes||"No notes available."})]})]}),ye==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[pe.tasks&&pe.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(Le==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Gt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",pe.tasks.length,")"]})]}),Le==="tasks"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),Le==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:pe.tasks.map((le,it)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/tasks",{state:{taskID:le.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Gt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:le.subject||le.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:le.description||"No description"}),le.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",le.assigned_to.first_name," ",le.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ee(le.due_date||le.created_at)})]},`task-${it}`))})]}),pe.meetings&&pe.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(Le==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ct,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",pe.meetings.length,")"]})]}),Le==="meetings"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),Le==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:pe.meetings.map((le,it)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/meetings",{state:{meetingID:le.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Ct,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:le.subject||le.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:le.description||le.location||"No description"}),le.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",le.host.first_name," ",le.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ee(le.start_time||le.created_at)})]},`meeting-${it}`))})]}),pe.calls&&pe.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(Le==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(At,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",pe.calls.length,")"]})]}),Le==="calls"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),Le==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:pe.calls.map((le,it)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/calls",{state:{callID:le.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(At,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:le.subject||le.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:le.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ee(le.call_time||le.created_at)})]},`call-${it}`))})]}),pe.contacts&&pe.contacts.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(Le==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Jt,{className:"text-teal-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",pe.contacts.length,")"]})]}),Le==="contacts"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),Le==="contacts"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:pe.contacts.map((le,it)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/contacts",{state:{contactID:le.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-teal-600 mt-1",children:n.jsx(Jt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[le.first_name?`${le.first_name} `:"",le.last_name]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:le.title||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ee(le.created_at)})]},`contact-${it}`))})]}),pe.deals&&pe.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(Le==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",pe.deals.length,")"]})]}),Le==="deals"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),Le==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:pe.deals.map((le,it)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/deals",{state:{dealID:le.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[le.deal_id?le.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",le.name||le.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:le.stage||le.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ee(le.close_date||le.created_at)})]},`deal-${it}`))})]}),pe.quotes&&pe.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(Le==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(xn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",pe.quotes.length,")"]})]}),Le==="quotes"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),Le==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:pe.quotes.map((le,it)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/quotes",{state:{quoteID:le.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(xn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(le.quote_id?le.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:le.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ee(le.presented_date)||""})]},`quote-${it}`))})]}),(!pe||(!pe.tasks||pe.tasks.length===0)&&(!pe.meetings||pe.meetings.length===0)&&(!pe.calls||pe.calls.length===0)&&(!pe.quotes||pe.quotes.length===0)&&(!pe.deals||pe.deals.length===0)&&(!pe.contacts||pe.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/manager/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assigned_to:x.assigned_accs?.id?String(x.assigned_accs.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(At,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assignedTo:x.assigned_accs?.id?String(x.assigned_accs.id):"",status:"Planned"}}}),children:[n.jsx(Ct,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assignedTo:x.assigned_accs?.id?String(x.assigned_accs.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Gt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:ve||Cr(x?.status)||"PROSPECT",onChange:le=>je(le.target.value),children:uA.map(le=>n.jsx("option",{value:le.value,children:le.label},le.value))}),n.jsx("button",{onClick:ne,disabled:Oe||!ve||Cr(ve)===Cr(x?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Oe||!ve||Cr(ve)===Cr(x?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:Oe?"Updating...":"Update"})]})]})]})]})]})}):null,_t=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[C&&n.jsx(Rt,{message:"Loading accounts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(On,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{be(),Ce(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(dn,{className:"mr-2"})," Add Account"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:ke.map(le=>n.jsx(KFe,{...le},le.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search accounts",value:M,onChange:le=>W(le.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:F,onChange:le=>D(le.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:V.map(le=>n.jsx("option",{value:le.value,children:le.label},le.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Industry"}),n.jsx("th",{className:"py-3 px-4",children:"Territory"}),n.jsx("th",{className:"py-3 px-4",children:"Phone"})]})}),n.jsx("tbody",{children:C?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"Loading accounts..."})}):se.length>0?Re.map(le=>n.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>{ue(le),qe(le.id)},children:[n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:le.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:le.website||"--"})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${YFe(le.status)}`,children:fA(le.status)})}),n.jsx("td",{className:"py-3 px-4 text-sm",children:le.industry||"--"}),n.jsx("td",{className:"py-3 px-4 text-sm",children:le.territory?.name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(At,{className:"text-gray-500"}),n.jsx("span",{children:le.phone_number||"--"})]})})]},le.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"No accounts found."})})})]})}),n.jsx(en,{className:"mt-4",totalItems:se.length,pageSize:ee,currentPage:oe,onPrev:ct,onNext:Ie,onPageSizeChange:le=>{H(le),re(1)},pageSizeOptions:[10,20,30,40,50],label:"accounts"})]}),Wt=t?n.jsx("div",{id:"modalBackdrop",onClick:st,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto hide-scrollbar max-h-[90vh]",onClick:le=>le.stopPropagation(),children:[n.jsx("button",{onClick:()=>{Ze(),Ce(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:i||Q,children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Account":"Add New Account"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:me,noValidate:!0,children:[n.jsx("div",{className:"md:col-span-2",children:n.jsx(Um,{label:"Name",name:"name",value:f.name,onChange:Je,placeholder:"Company name",required:!0,isSubmitted:J})}),n.jsx(q7,{label:"Parent Company",value:f.parent_company,onChange:le=>{p(it=>({...it,parent_company:le}))},items:I.map(le=>({id:le,name:le})),getLabel:le=>le?.name||"",placeholder:"Select parent company...",disabled:i}),n.jsx(Um,{label:"Website",name:"website",value:f.website,onChange:Je,placeholder:"https://example.com",disabled:i}),n.jsx(Um,{label:"Phone Number",name:"phone_number",value:f.phone_number,onChange:Je,placeholder:"09xx xxx xxxx",type:"tel",disabled:i}),n.jsx(Um,{label:"Industry",name:"industry",value:f.industry,onChange:Je,placeholder:"Industry",disabled:i}),n.jsx(Um,{label:"Billing Address",name:"billing_address",value:f.billing_address,onChange:Je,placeholder:"Billing address",disabled:i}),n.jsx(Um,{label:"Shipping Address",name:"shipping_address",value:f.shipping_address,onChange:Je,placeholder:"Shipping address",disabled:i}),n.jsx(V7,{label:"Status",name:"status",value:f.status,onChange:Je,options:[{value:"",label:"Select status"},...uA],required:!0,disabled:i}),n.jsx(q7,{label:"Assigned To",value:f.assigned_to,onChange:le=>{const it=S.find(Nt=>String(Nt.id)===String(le));_(it);let Et=null;it&&it.assigned_territory&&it.assigned_territory.length===1&&(Et=it.assigned_territory[0].id),p(Nt=>({...Nt,assigned_to:le,territory_id:Et}))},items:S||[],getLabel:le=>`${le?.first_name??""} ${le?.last_name??""} (${le?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:J,disabled:i||S.length===0}),n.jsx(V7,{label:"Territory",name:"territory_id",value:f.territory_id||"",onChange:Je,options:[{value:"",label:k?k.assigned_territory&&k.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"},...k&&k.assigned_territory&&k.assigned_territory.map(le=>({value:String(le.id),label:le.name}))||[]],disabled:i||!k||!k.assigned_territory||k.assigned_territory.length===0}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{Ze(),Ce(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i||Q,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i||Q,children:i?"Saving...":s?"Update Account":"Save Account"})]})]})]})}):null,un=Z?n.jsx(ZFe,{open:!0,title:Z.title,message:Z.message,confirmLabel:Z.confirmLabel,cancelLabel:Z.cancelLabel,variant:Z.variant,onConfirm:G,onCancel:K,loading:Q}):null;return n.jsxs(n.Fragment,{children:[_t,gt,Wt,un]})}function KFe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function Um({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function V7({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:l=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(o=>n.jsx("option",{value:o.value,children:o.label},o.value))})]})}function q7({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",required:c=!1,isSubmitted:d=!1,allowFreeText:u=!1}){const f=d&&c&&!a;return n.jsxs("div",{className:o,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(XFe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:l,hasError:f,allowFreeText:u})]})}function XFe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,hasError:o=!1,allowFreeText:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),y=e.find(C=>String(C.id)===String(t)),w=y?s(y):t,v=h.useMemo(()=>{const C=f.trim().toLowerCase();return(C?e.filter(S=>(s(S)||"").toLowerCase().includes(C)):e).slice(0,l)},[e,f,s,l]);return h.useEffect(()=>{const C=N=>{x.current&&!x.current.contains(N.target)&&u(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:w,placeholder:r,onFocus:()=>!i&&u(!0),onChange:C=>{p(C.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${o?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsxs("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:[c&&f.trim()&&!v.some(C=>s(C).toLowerCase()===f.trim().toLowerCase())&&n.jsxs("button",{type:"button",onClick:()=>{a(f.trim()),u(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-green-50 bg-blue-50 font-medium text-blue-700",children:['+ Add "',f.trim(),'" as new parent company']}),v.length>0?v.map(C=>{const N=String(C.id),S=s(C),T=String(t)===N;return n.jsx("button",{type:"button",onClick:()=>{a(N),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${T?"bg-blue-50":""}`,children:S||"--"},N)}):!c||!f.trim()?n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"}):null]}),e.length>l&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function ZFe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),n.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}const hA={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:""},Bm=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),el=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function JFe(){const e=yt(),t=Yt();h.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[a,s]=h.useState([]),[r,i]=h.useState(!1),[l,o]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState(null),[p,x]=h.useState(!1),[y,w]=h.useState(!1),[v,C]=h.useState(!1),[N,S]=h.useState(null),[T,k]=h.useState(!1),[_,E]=h.useState(null),[A,I]=h.useState(hA),[z,F]=h.useState(""),[D,M]=h.useState("Filter by Accounts"),[W,Z]=h.useState(null),[R,Q]=h.useState("Overview"),[Y,oe]=h.useState(1),[re,ee]=h.useState(10),[H,ye]=h.useState({}),[te,ve]=h.useState(null),[je,Oe]=h.useState(null);h.useEffect(()=>{const $=t.state?.contactID;$&&(Oe($),e(t.pathname,{replace:!0,state:{}}))},[t,e]),h.useEffect(()=>{if(je&&a.length>0&&!r){const $=a.find(G=>G.id===je);$?f($):q.error("Contact not found."),Oe(null)}},[je,a,r]);const $e=h.useCallback(async($=null)=>{i(!0);try{const G=await ce.get("/contacts/admin/fetch-all"),ne=[...Array.isArray(G.data)?G.data:[]].sort((J,Ce)=>{const me=J?.created_at||J?.updated_at||0,V=Ce?.created_at||Ce?.updated_at||0;return new Date(V)-new Date(me)});if(s(ne),$){const J=ne.find(Ce=>Ce.id===$);f(J||null)}}catch(G){console.error(G),s([]),G.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch contacts. Please try again later.")}finally{i(!1)}},[f]),pe=h.useCallback(async()=>{try{const $=await ce.get("/accounts/admin/fetch-all"),K=[...Array.isArray($.data)?$.data:[]].sort((ne,J)=>(ne?.name||"").localeCompare(J?.name||""));o(K)}catch($){console.error($),o([]),$.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},[]),Me=h.useCallback(async()=>{try{const $=await ce.get("/users/all"),K=[...Array.isArray($.data)?$.data:[]].sort((ne,J)=>Bm(ne).localeCompare(Bm(J)));d(K)}catch($){console.error($),d([]),$.response?.status===403&&q.warn("Unable to load users for assignment (permission denied).")}},[]),Le=h.useCallback(async $=>{try{const G=await ce.get(`/activities/contact/${$}`);ye(G.data&&typeof G.data=="object"?G.data:{})}catch(G){console.error(G),G.response?.status===404&&(console.warn("No activities found for this account."),ye({}))}},[]);h.useEffect(()=>{$e(),pe(),Me()},[$e,pe,Me]);const he=h.useMemo(()=>{const $=new Map;l.forEach(K=>{K?.id&&K?.name&&$.set(String(K.id),K.name)}),a.forEach(K=>{K?.account_id&&K?.account?.name&&$.set(String(K.account_id),K.account.name)});const G=Array.from($.entries()).sort((K,ne)=>K[1].localeCompare(ne[1])).map(([K,ne])=>({value:K,label:ne}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...G]},[l,a]),ae=h.useMemo(()=>{const $=z.trim().toLowerCase(),G=D.trim();return a.filter(K=>{const ne=[K?.first_name,K?.last_name,K?.email,K?.title,K?.department,K?.account?.name,K?.account?.status,K?.work_phone,K?.mobile_phone_1,K?.mobile_phone_2,K?.assigned_contact?.first_name,K?.assigned_contact?.last_name,K?.contact_creator?.first_name,K?.contact_creator?.last_name,K?.notes,el(K?.created_at),el(K?.updated_at)],J=$===""||ne.some(me=>me==null?!1:me.toString().toLowerCase().includes($)),Ce=G==="Filter by Accounts"||String(K.account_id)===G;return J&&Ce})},[a,z,D]),Ae=Math.max(1,Math.ceil(ae.length/re)||1);h.useEffect(()=>{oe(1)},[z,D]),h.useEffect(()=>{oe($=>{const G=Math.max(1,Math.ceil(ae.length/re)||1);return $>G?G:$})},[ae.length]);const ge=h.useMemo(()=>{const $=(Y-1)*re;return ae.slice($,$+re)},[ae,Y]),Be=()=>oe($=>Math.max($-1,1)),qe=()=>oe($=>Math.min($+1,Ae)),Te=h.useMemo(()=>{if(!y||!_)return l;const $=a.find(K=>K.id===_);return!$||!$.account||l.some(K=>K.id===$.account.id)?l:[...l,$.account]},[l,y,_,a]),He=h.useCallback(()=>{x(!1),w(!1),E(null),I(hA),C(!1),se(!1)},[]),Ye=$=>{$.target.id==="modalBackdrop"&&!v&&!T&&He()},B=$=>{const{name:G,value:K}=$.target;I(ne=>({...ne,[G]:K}))},fe=()=>{I(hA),w(!1),E(null),x(!0)},Se=async $=>{if(!$)return;const G=await ce.get(`/accounts/get/${$.account_id}`);I({first_name:$.first_name||"",last_name:$.last_name||"",account_id:G.data.id?G.data.id:"",title:$.title||"",department:$.department||"",email:$.email||"",work_phone:$.work_phone||"",mobile_phone_1:$.mobile_phone_1||"",mobile_phone_2:$.mobile_phone_2||"",notes:$.notes||"",assigned_to:$.assigned_to?String($.assigned_to):""}),w(!0),E($.id),x(!0),f(null)},de=$=>{if(!$)return;const G=Bm($)||"this contact";S({title:"Delete Contact",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:G}),"? This action cannot be undone."]}),confirmLabel:"Delete Contact",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:$.id,name:G}})},[ke,se]=h.useState(!1),We=$=>{$.preventDefault(),se(!0);const G=A.first_name.trim(),K=A.last_name.trim();if(!G||!K){q.error("First name and last name are required.");return}if(!A.account_id){q.error("Account is required.");return}if(!A.assigned_to){q.error("Assigned To is required.");return}const J=A.email?.trim();if(!J){q.error("Email is required.");return}if(!J.includes("@")){q.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(J)){q.error("Please enter a valid email address.");return}const me={first_name:G,last_name:K,account_id:Number(A.account_id),title:A.title?.trim()||null,department:A.department?.trim()||null,email:A.email?.trim().toLowerCase()||null,work_phone:A.work_phone?.trim()||null,mobile_phone_1:A.mobile_phone_1?.trim()||null,mobile_phone_2:A.mobile_phone_2?.trim()||null,notes:A.notes?.trim()||null,assigned_to:A.assigned_to?Number(A.assigned_to):null},V=y&&_?"update":"create",_e=`${G} ${K}`.trim();S({title:V==="create"?"Confirm New Contact":"Confirm Update",message:V==="create"?n.jsxs("span",{children:["Are you sure you want to add"," ",n.jsx("span",{className:"font-semibold",children:_e})," to your contacts?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:_e}),"?"]}),confirmLabel:V==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:V,payload:me,targetId:_||null,name:_e}})},Re=async()=>{if(!N?.action){S(null);return}const{action:$}=N,{type:G,payload:K,targetId:ne,name:J}=$;k(!0);try{if(G==="create"){C(!0),await ce.post("/contacts/admin",K),q.success(`Contact "${J}" created successfully.`);const Ce=u?.id||null;He(),await $e(Ce)}else if(G==="update"){if(!ne)throw new Error("Missing contact identifier for update.");C(!0),await ce.put(`/contacts/admin/${ne}`,K),q.success(`Contact "${J}" updated successfully.`);const Ce=u?.id&&u.id===ne?ne:u?.id||null;He(),await $e(Ce),u?.id===ne&&f(null)}else if(G==="delete"){if(!ne)throw new Error("Missing contact identifier for deletion.");const Ce=u?.id;Z(ne),await ce.delete(`/contacts/admin/${ne}`),q.success(`Contact "${J}" deleted successfully.`),await $e(Ce&&Ce!==ne?Ce:null),Ce===ne&&f(null)}}catch(Ce){console.error(Ce);const me=G==="create"?"Failed to create contact. Please review the details and try again.":G==="update"?"Failed to update contact. Please review the details and try again.":"Failed to delete contact. Please try again.",V=Ce.response?.data?.detail||me;q.error(V)}finally{(G==="create"||G==="update")&&C(!1),G==="delete"&&Z(null),k(!1),S(null)}},ct=()=>{T||S(null)},Ie=$=>{f($),Q("Overview")},ue=()=>f(null),Ne=$=>{$.target.id==="contactModalBackdrop"&&!T&&ue()},Fe=N?.action?.type==="delete"?N.action.targetId:null,Ze=u&&(W===u.id||Fe===u.id),st=u&&W===u.id,Ee=u?n.jsx("div",{id:"contactModalBackdrop",onClick:Ne,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:$=>$.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),n.jsx("button",{onClick:ue,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Vn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:Bm(u)||"Unnamed contact"})}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Se(u),disabled:T||N?.action?.type==="update"&&N.action.targetId===u.id,children:[n.jsx(ia,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>de(u),disabled:!!Ze,children:st?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(zt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:n.jsx("p",{className:"text-sm text-gray-500",children:u.account?.name||"No associated account"})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map($=>n.jsx("button",{onClick:()=>Q($),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${R===$?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:$},$))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[R==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact Name:"}),n.jsx("p",{children:Bm(u)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Title:"}),n.jsx("p",{children:u.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:u.email?n.jsx("a",{href:`mailto:${u.email}`,className:"text-blue-600 hover:underline break-all",children:u.email}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:u.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:u.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:u.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:u.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:u.assigned_contact?`${u.assigned_contact.first_name} ${u.assigned_contact.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:u.contact_creator?`${u.contact_creator.first_name} ${u.contact_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:el(u.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:el(u.updated_at)||"N/A"})]})]})}),R==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:u.notes||"No notes available."})]})]}),R==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[H.tasks&&H.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ve(te==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Gt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",H.tasks.length,")"]})]}),te==="tasks"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),te==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:H.tasks.map(($,G)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/tasks",{state:{taskID:$.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Gt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:$.subject||$.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:$.description||"No description"}),$.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",$.assigned_to.first_name," ",$.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:el($.due_date||$.created_at)})]},`task-${G}`))})]}),H.meetings&&H.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ve(te==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ct,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",H.meetings.length,")"]})]}),te==="meetings"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),te==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:H.meetings.map(($,G)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/meetings",{state:{meetingID:$.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Ct,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:$.subject||$.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:$.description||$.location||"No description"}),$.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",$.host.first_name," ",$.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:el($.start_time||$.created_at)})]},`meeting-${G}`))})]}),H.calls&&H.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ve(te==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(At,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",H.calls.length,")"]})]}),te==="calls"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),te==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:H.calls.map(($,G)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/calls",{state:{callID:$.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(At,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:$.subject||$.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:$.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:el($.call_time||$.created_at)})]},`call-${G}`))})]}),H.deals&&H.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ve(te==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",H.deals.length,")"]})]}),te==="deals"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),te==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:H.deals.map(($,G)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/deals",{state:{dealID:$.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[$.deal_id?$.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",$.name||$.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:$.stage||$.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:el($.close_date||$.created_at)})]},`deal-${G}`))})]}),H.quotes&&H.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ve(te==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(xn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",H.quotes.length,")"]})]}),te==="quotes"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),te==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:H.quotes.map(($,G)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/quotes",{state:{quoteID:$.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(xn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:($.quote_id?$.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:$.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:el($.presented_date)||""})]},`quote-${G}`))})]}),(!H||(!H.tasks||H.tasks.length===0)&&(!H.meetings||H.meetings.length===0)&&(!H.calls||H.calls.length===0)&&(!H.quotes||H.quotes.length===0)&&(!H.deals||H.deals.length===0)&&(!H.contacts||H.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsx("div",{className:"flex flex-col gap-4",children:n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Contact"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(At,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!u?.email){alert("No email address available");return}const $=encodeURIComponent(u.email),G=encodeURIComponent(""),K=encodeURIComponent(""),ne=`mailto:${$}?subject=${G}&body=${K}`;window.location.href=ne},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Zn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Contact"}}}),children:[n.jsx(Ct,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Contact"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Gt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]})})]})]})]})}):null,Je=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&n.jsx(Rt,{message:"Loading contacts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(On,{className:"mr-2 text-blue-600"})," Contacts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{fe(),se(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(dn,{className:"mr-2"})," Add Contact"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search contacts",value:z,onChange:$=>F($.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:D,onChange:$=>M($.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:he.map($=>n.jsx("option",{value:$.value,children:$.label},$.value??$.label))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),n.jsx("th",{className:"py-3 px-4",children:"Department"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Created"})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"Loading contacts..."})}):ae.length>0?ge.map($=>{const G=[{Icon:Zn,value:$.email,key:"email"},{Icon:At,value:$.work_phone,key:"work_phone"},{Icon:Yc,value:$.mobile_phone_1,key:"mobile_phone_1"},{Icon:Yc,value:$.mobile_phone_2,key:"mobile_phone_2"}].filter(K=>!!K.value);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>{Ie($),Le($.id)},children:[n.jsxs("td",{className:"py-3 px-4 align-top",children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:Bm($)||"--"}),n.jsx("div",{className:"text-xs text-gray-500",children:$.title||"No title"})]}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[n.jsx(Tx,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"break-words",children:$.account?.name||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:G.length>0?n.jsx("div",{className:"space-y-1 text-gray-700",children:G.map(({Icon:K,value:ne,key:J})=>{const Ce=pt.createElement(K,{className:"text-gray-500 flex-shrink-0"});return n.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[Ce,n.jsx("span",{children:ne})]},J)})}):n.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[n.jsx(Qt,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:$.department||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(Jt,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:$.assigned_contact?`${$.assigned_contact.first_name} ${$.assigned_contact.last_name}`:"Unassigned"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[n.jsx(Ct,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"text-xs",children:el($.created_at)||"--"})]})})]},$.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"No contacts found."})})})]})}),n.jsx(en,{className:"mt-4",totalItems:ae.length,pageSize:re,currentPage:Y,onPrev:Be,onNext:qe,onPageSizeChange:$=>{ee($),oe(1)},pageSizeOptions:[10,20,30,40,50],label:"contacts"})]}),be=p?n.jsx("div",{id:"modalBackdrop",onClick:Ye,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:$=>$.stopPropagation(),children:[n.jsx("button",{onClick:()=>{He(),se(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:v||T,children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:y?"Edit Contact":"Add New Contact"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:We,noValidate:!0,children:[n.jsx(Ac,{label:"First Name",name:"first_name",value:A.first_name,onChange:B,placeholder:"First name",required:!0,isSubmitted:ke}),n.jsx(Ac,{label:"Last Name",name:"last_name",value:A.last_name,onChange:B,placeholder:"Last name",required:!0,isSubmitted:ke}),n.jsx(Y7,{label:"Account",value:A.account_id,onChange:$=>I(G=>({...G,account_id:$})),items:y?Te:l||[],getLabel:$=>$?.name??"",placeholder:"Search account...",disabled:v||(y?Te.length===0:l.length===0),required:!0,isSubmitted:ke}),n.jsx(Y7,{label:"Assigned To",value:A.assigned_to,onChange:$=>I(G=>({...G,assigned_to:$})),items:c||[],getLabel:$=>`${$?.first_name??""} ${$?.last_name??""} (${$?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:ke,disabled:v||c.length===0}),n.jsx(Ac,{label:"Title",name:"title",value:A.title,onChange:B,placeholder:"Job title",disabled:v}),n.jsx(Ac,{label:"Department",name:"department",value:A.department,onChange:B,placeholder:"Department",disabled:v}),n.jsx(Ac,{label:"Email",name:"email",type:"email",value:A.email,onChange:B,placeholder:"example@email.com",required:!0,isSubmitted:ke}),n.jsx(Ac,{label:"Work Phone",name:"work_phone",value:A.work_phone,onChange:B,placeholder:"09xx xxx xxxx",disabled:v}),n.jsx(Ac,{label:"Mobile Phone 1",name:"mobile_phone_1",value:A.mobile_phone_1,onChange:B,placeholder:"09xx xxx xxxx",disabled:v}),n.jsx(Ac,{label:"Mobile Phone 2",name:"mobile_phone_2",value:A.mobile_phone_2,onChange:B,placeholder:"09xx xxx xxxx",disabled:v}),n.jsx(tUe,{label:"Notes",name:"notes",value:A.notes,onChange:B,placeholder:"Additional details...",rows:3,disabled:v,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{He(),se(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:v||T,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:v||T,children:v?"Saving...":y?"Update Contact":"Save Contact"})]})]})]})}):null,Ke=N?n.jsx(nUe,{open:!0,title:N.title,message:N.message,confirmLabel:N.confirmLabel,cancelLabel:N.cancelLabel,variant:N.variant,onConfirm:Re,onCancel:ct,loading:T}):null;return n.jsxs(n.Fragment,{children:[Je,Ee,be,Ke]})}function Ac({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,isSubmitted:c=!1,className:d=""}){const u=c&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${d}
        `})]})}function Y7({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:o,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(eUe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:l,hasError:u})]})}function eUe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,hasError:o=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(v=>String(v.id)===String(t)),y=x?s(x):"",w=h.useMemo(()=>{const v=u.trim().toLowerCase();return(v?e.filter(N=>(s(N)||"").toLowerCase().includes(v)):e).slice(0,l)},[e,u,s,l]);return h.useEffect(()=>{const v=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:y,placeholder:r,onFocus:()=>!i&&d(!0),onChange:v=>{f(v.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${o?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:w.length>0?w.map(v=>{const C=String(v.id),N=s(v),S=String(t)===C;return n.jsx("button",{type:"button",onClick:()=>{a(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:N||"--"},C)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function tUe({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:l=!1,className:o=""}){return n.jsxs("div",{className:o,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function nUe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),n.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}const gA=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function IZ({lead:e,onBack:t,fetchLeads:a,onEdit:s,onDelete:r,setSelectedLead:i,relatedActs:l}){const o=yt(),{leadID:c}=Io(),[d,u]=h.useState(e||null),[f,p]=h.useState("Overview"),[x,y]=h.useState(""),w=d?.status?.toUpperCase()==="QUALIFIED",[v,C]=h.useState(null),[N,S]=h.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[T,k]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[_,E]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),A=async()=>{try{if(e){u(e),y(e.status||"New");return}if(!c)return;const M=await ce.get(`/leads/get/${c}`);u(M.data),y(M.data.status||"New"),S({name:M.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:M.data.territory?.id||null,assigned_to:M.data.assigned_to?.id||null,created_by:M.data.creator?.id||null}),k({last_name:M.data.last_name||"",first_name:M.data.first_name||"",account_id:null,title:M.data.title||"",department:M.data.department||"",email:M.data.email||"",work_phone:M.data.work_phone||"",mobile_phone_1:M.data.mobile_phone_1||"",mobile_phone_2:M.data.mobile_phone_2||"",notes:"",assigned_to:M.data.assigned_to?.id||null,created_by:M.data.creator?.id||null}),E({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:M.data.assigned_to?.id||null,created_by:M.data.creator?.id||null})}catch(M){console.error(M)}};h.useEffect(()=>{e?(u(e),y(e.status||"New")):c&&A()},[c,e]);const I=async()=>{try{if(x==="Converted"&&d?.status?.toUpperCase()!=="QUALIFIED"){q.error("Lead must be Qualified before it can be converted.");return}const M=await ce.put(`/leads/${d.id}/update/status`,{status:x});q.success("Lead status updated successfully");const W={...d,status:M.data.status};u(W),i&&i(W),a&&a(),t&&t()}catch(M){console.error(M),q.error("Failed to update lead status")}},z=async M=>{const W={...N,assigned_to:M.assigned_to?.id,billing_address:M.address,shipping_address:M.address,created_by:M.creator?.id,industry:null,name:M.company_name,phone_number:M.work_phone,status:"Prospect",territory_id:M.territory?.id,website:""};console.log("Account data: ",W),console.log("Contact data: ",T),console.log("Deal data: ",_),console.log("Lead data: ",M);try{const R=(await ce.post("/accounts/convertedLead",W)).data.id,Q={...T,account_id:R,assigned_to:M.assigned_to?.id,created_by:M.creator?.id,department:M.department,email:M.email,first_name:M.first_name,last_name:M.last_name,mobile_phone_1:M.mobile_phone_1,mobile_phone_2:M.mobile_phone_2,notes:M.notes,title:M.title,work_phone:M.work_phone},oe=(await ce.post("/contacts/convertedLead",Q)).data.id,re=()=>{switch(_.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},ee=_.amount&&_.amount!==""?parseFloat(_.amount):0,H={..._,account_id:R,assigned_to:M.assigned_to?.id,created_by:M.creator?.id,primary_contact_id:oe,probability:re(),stage:"Prospecting"},ye=await ce.post("/deals/convertedLead",H),te=await ce.put(`/leads/convert/${M.id}`);i&&i(null),a(),q.success("Lead converted successfully!"),t()}catch(Z){console.error("Error during conversion:",Z);const R=Z.response?.data?.detail||Z.message||"Failed to convert lead. Please try again.";q.error(R)}},F=M=>{switch((M||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},D=M=>M.toString().toLowerCase().replace(/\b\w/g,W=>W.toUpperCase());return d?n.jsx(n.Fragment,{children:n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),n.jsx("button",{onClick:()=>{t?t():o(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Vn,{size:25})})]})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[d.first_name," ",d.last_name]}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${F(d.status)}`,children:D(d.status||"New")}),n.jsx("div",{className:"flex flex-col",children:n.jsx("button",{onClick:()=>z(d),disabled:!w,title:w?"Convert Lead":"Lead must be Qualified before converting",className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2
      ${w?"bg-green-600 hover:bg-green-700 text-white focus:ring-green-400":"bg-gray-200 text-gray-400 cursor-not-allowed"}
    `,children:"Convert"})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",onClick:()=>{s&&d&&s(d)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(oa,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",onClick:()=>{r&&d&&r(d)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(zt,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-4 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(M=>n.jsx("button",{onClick:()=>p(M),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${f===M?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:M},M))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[f==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Name:"}),n.jsxs("p",{children:[d.first_name," ",d.last_name||"N/A"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:d.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Job Title:"}),n.jsx("p",{children:d.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:d.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:d.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:d.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:d.assigned_to?`${d.assigned_to.first_name} ${d.assigned_to.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:d.creator?`${d.creator.first_name} ${d.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:d.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Source:"}),n.jsx("p",{children:d.source||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Address:"}),n.jsx("p",{children:d.address||"N/A"})]})]})}),f==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]})]}),f==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[l.tasks&&l.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(v==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Gt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",l.tasks.length,")"]})]}),v==="tasks"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),v==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:l.tasks.map((M,W)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>o("/manager/tasks",{state:{taskID:M.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Gt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:M.subject||M.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:M.description||"No description"}),M.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned:"," ",M.assigned_to.first_name," ",M.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:gA(M.due_date||M.created_at)})]},`task-${W}`))})]}),l.meetings&&l.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(v==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ct,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",l.meetings.length,")"]})]}),v==="meetings"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),v==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:l.meetings.map((M,W)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>o("/manager/meetings",{state:{meetingID:M.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Ct,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:M.subject||M.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:M.description||M.location||"No description"}),M.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",M.host.first_name," ",M.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:gA(M.start_time||M.created_at)})]},`meeting-${W}`))})]}),l.calls&&l.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(v==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(At,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",l.calls.length,")"]})]}),v==="calls"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),v==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:l.calls.map((M,W)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>o("/manager/calls",{state:{callID:M.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(At,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:M.subject||M.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:M.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:gA(M.call_time||M.created_at)})]},`call-${W}`))})]}),(!l||(!l.tasks||l.tasks.length===0)&&(!l.meetings||l.meetings.length===0)&&(!l.calls||l.calls.length===0)&&(!l.quotes||l.quotes.length===0)&&(!l.deals||l.deals.length===0)&&(!l.contacts||l.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{d&&o("/manager/calls",{state:{openCallModal:!0,initialCallData:{subject:d.title?`Call regarding ${d.title}`:`Call with ${d.first_name} ${d.last_name}`,relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assigned_to:d.assigned_to?.id?String(d.assigned_to.id):"",direction:"Outgoing",status:"Planned"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(At,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const M=encodeURIComponent(d.email),W=encodeURIComponent(""),Z=encodeURIComponent(""),R=`mailto:${M}?subject=${W}&body=${Z}`;window.location.href=R},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Zn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{d&&o("/manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:d.title?`Meeting regarding ${d.title}`:`Meeting with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",status:"Planned"}}})},children:[n.jsx(Ct,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{d&&o("/manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:d.title?`Follow up on ${d.title}`:`Follow up with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Gt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:x,onChange:M=>y(M.target.value),children:[n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),d?.status?.toUpperCase()==="QUALIFIED"&&n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]}),n.jsx("button",{onClick:I,disabled:x===d.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${x===d.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const aUe=Uf.all(),pA=aUe.map((e,t)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${t}`})),sUe=e=>e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()),rUe=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},xA={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function iUe(){const e=yt(),{leadID:t}=Io();Ds();const[a,s]=h.useState(null),[r,i]=h.useState(!1),[l,o]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(!1),[y,w]=h.useState(""),[v,C]=h.useState("Filter by Status"),[N,S]=h.useState(1),[T,k]=h.useState(10),[_,E]=h.useState(xA),[A,I]=h.useState(!1),[z,F]=h.useState(null),[D,M]=h.useState(!1),[W,Z]=h.useState(null),[R,Q]=h.useState(!1),[Y,oe]=h.useState({});h.useRef(null);const[re,ee]=h.useState(!1),[H,ye]=h.useState(null),[te,ve]=h.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[je,Oe]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[$e,pe]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});h.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const Me=async()=>{try{const be=await ce.get("/leads/getUsers");o(be.data)}catch(be){console.error(`Error fetching users: ${be}`)}},Le=async()=>{x(!0);try{const be=await ce.get("/leads/admin/getLeads");f(be.data),console.log(be.data)}catch(be){console.error(`Error fetching leads: ${be}`)}finally{x(!1)}};h.useEffect(()=>{Me(),Le()},[]),h.useEffect(()=>{if(t&&u.length>0&&!r&&!A){const be=u.find(Ke=>Ke.id===Number(t));be&&s(be)}else!t&&!a&&s(null)},[t,u,r,A]),h.useEffect(()=>{if(H){const Ke=(K=>{if(!K)return{code:"+63",number:""};const ne=K.match(/^(\+\d+)\s(.+)$/);if(ne)return{code:ne[1],number:ne[2]};if(K.startsWith("+")){const J=K.match(/^(\+\d{1,3})/);if(J)return{code:J[1],number:K.substring(J[1].length).trim()}}return{code:"+63",number:K}})(H.work_phone),$=[];H.work_phone&&$.push(`Work: ${H.work_phone}`),H.mobile_phone_1&&$.push(`Mobile 1: ${H.mobile_phone_1}`),H.mobile_phone_2&&$.push(`Mobile 2: ${H.mobile_phone_2}`);const G=$.length>0?$.join(" | "):"";ve({name:H.company_name||"",website:"",countryCode:Ke.code,phone_number:Ke.number,combinedPhoneNumbers:G,billing_address:H.address||"",shipping_address:H.address||"",industry:"",status:"Prospect",territory_id:H.assigned_to?.territory?.id||null,assigned_to:H.assigned_to?.id||null,created_by:H.creator?.id||null}),Oe({last_name:H.last_name||"",first_name:H.first_name||"",account_id:null,title:H.title||"",department:H.department||"",email:H.email||"",work_phone:H.work_phone||"",mobile_phone_1:H.mobile_phone_1||"",mobile_phone_2:H.mobile_phone_2||"",notes:H.notes||"",assigned_to:H.assigned_to?.id||null,created_by:H.creator?.id||null}),pe({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:H.assigned_to?.id||null,created_by:H.creator?.id||null})}},[H]);const he=be=>w(be.target.value),ae=h.useMemo(()=>{const be=y.trim().toLowerCase(),Ke=v.trim().toUpperCase();return u.filter($=>{const G=[$?.first_name,$?.last_name,$?.company_name,$?.title,$?.email,$?.work_phone,$?.assigned_to?`${$.assigned_to.first_name} ${$.assigned_to.last_name}`:""],K=be===""||G.some(J=>J==null||J===""?!1:J.toString().toLowerCase().includes(be));let ne=!1;return Ke==="FILTER BY STATUS"?ne=($.status?$.status.toUpperCase():"")!=="CONVERTED":ne=($.status?$.status.toUpperCase():"")===Ke,K&&ne})},[u,y,v]),Ae=Math.max(1,Math.ceil(ae.length/T)||1);h.useEffect(()=>{S(1)},[y,v]),h.useEffect(()=>{S(be=>{const Ke=Math.max(1,Math.ceil(ae.length/T)||1);return be>Ke?Ke:be})},[ae.length]);const ge=h.useMemo(()=>{const be=(N-1)*T;return ae.slice(be,be+T)},[ae,N]),Be=()=>S(be=>Math.max(be-1,1)),qe=()=>S(be=>Math.min(be+1,Ae)),Te=h.useCallback(async be=>{try{const Ke=await ce.get(`/activities/lead/${be}`);oe(Ke.data&&typeof Ke.data=="object"?Ke.data:{})}catch(Ke){console.error(Ke),Ke.response?.status===404&&(console.warn("No activities found for this account."),oe({}))}},[]),He=be=>{s(be),Te(be.id)},Ye=()=>{s(null),t&&e("/admin/leads",{replace:!0})},B=()=>{i(!1),E(xA),I(!1),F(null),M(!1),d(null),sessionStorage.removeItem("editLeadData")},fe=be=>{be.target.id==="modalBackdrop"&&B()},Se=()=>{E(xA),I(!1),F(null),d(null),i(!0)},de=be=>{if(!be){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",be),console.log("Current state - leadID:",t,"selectedLead:",a,"showModal:",r);const Ke=J=>{if(!J)return{code:"+63",number:""};const Ce=J.match(/^(\+\d+)\s(.+)$/);return Ce?{code:Ce[1],number:Ce[2]}:{code:"+63",number:J}},$=Ke(be.work_phone),G=Ke(be.mobile_phone_1),K=Ke(be.mobile_phone_2);let ne="";if(be.assigned_to){ne=String(be.assigned_to.id);const J=l?.find(Ce=>Ce.id===be.assigned_to.id);d(J)}E({first_name:be.first_name||"",last_name:be.last_name||"",company_name:be.company_name||"",title:be.title||"",department:be.department||"",email:be.email||"",work_ccode:$.code,work_phone:$.number,m1_ccode:G.code,mobile_phone_1:G.number,m2_ccode:K.code,mobile_phone_2:K.number,address:be.address||"",notes:be.notes||"",source:be.source||"",territory_id:be.territory?.id||null,lead_owner:ne,status:be.status||"New"}),I(!0),F(be.id),a?(console.log("Coming from detail view - closing detail modal and showing edit form"),s(null),i(!0)):(console.log("Already in list view - showing modal"),i(!0))},ke=be=>{if(!be){console.error("handleDelete: lead is null or undefined");return}console.log("handleDelete called with lead:",be);const Ke=`${be.first_name} ${be.last_name}`||"this lead";Z({title:"Delete Lead",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:Ke}),"? This action cannot be undone."]}),confirmLabel:"Delete Lead",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:be.id,name:Ke}})},se=be=>{const{name:Ke,value:$}=be.target;if(E(G=>({...G,[Ke]:$})),Ke==="lead_owner"){const G=l.find(K=>K.id===parseInt($));d(G)}},[We,Re]=h.useState(!1),ct=be=>{if(be.preventDefault(),Re(!0),!_.last_name?.trim()){q.error("Last name is required.");return}if(!_.company_name?.trim()){q.error("Company is required.");return}if(!_.email?.trim()){q.error("Email is required.");return}if(!_.email.includes("@")){q.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(_.email)){q.error("Please enter a valid email address with a dot in the domain.");return}if(!_.lead_owner){q.error("Please assign a lead owner.");return}const $={..._,territory_id:_.territory_id?parseInt(_.territory_id):null,lead_owner:parseInt(_.lead_owner),work_phone:`${_.work_ccode} ${_.work_phone}`,mobile_phone_1:`${_.m1_ccode} ${_.mobile_phone_1}`,mobile_phone_2:`${_.m2_ccode} ${_.mobile_phone_2}`},G=A&&z?"update":"create",K=`${_.first_name} ${_.last_name}`;Z({title:G==="create"?"Confirm New Lead":"Confirm Update",message:G==="create"?n.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",n.jsx("span",{className:"font-semibold",children:K}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:K}),"?"]}),confirmLabel:G==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:G,payload:$,targetId:z||null,name:K}})},Ie=async()=>{if(!W?.action){Z(null);return}const{action:be}=W,{type:Ke,payload:$,targetId:G,name:K,lead:ne}=be;console.log($),Q(!0);try{if(Ke==="create")M(!0),await ce.post("/leads/create",$),q.success(`Lead "${K}" created successfully.`),B(),await Le();else if(Ke==="update"){if(!G)throw new Error("Missing lead identifier for update.");M(!0);const J=await ce.put(`/leads/${G}`,$);q.success(`Lead "${K}" updated successfully.`),a&&a.id===G&&s(null),B(),await Le()}else if(Ke==="delete"){if(!G)throw new Error("Missing lead identifier for deletion.");await ce.delete(`/leads/${G}`),q.success(`Lead "${K}" deleted successfully.`),a?.id===G&&s(null),await Le()}}catch(J){console.error(J);const Ce=Ke==="create"?"Failed to create lead. Please review the details and try again.":Ke==="update"?"Failed to update lead. Please review the details and try again.":"Failed to delete lead. Please try again.",me=J.response?.data?.detail||Ce;q.error(me)}finally{(Ke==="create"||Ke==="update")&&M(!1),Ke!=="edit"&&(Q(!1),Z(null))}},ue=()=>{R||Z(null)},Ne=u.filter(be=>be.status==="New").length,Fe=u.filter(be=>be.status==="Contacted").length,Ze=u.filter(be=>be.status==="Qualified").length,st=u.filter(be=>be.status==="Converted").length,Ee=u.filter(be=>be.status==="Lost").length,Je=[{title:"New",value:Ne,icon:Wn,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:Fe,icon:At,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:Ze,icon:ba,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:st,icon:Ro,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:Ee,icon:Ps,color:"text-red-600",bgColor:"bg-red-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[p&&n.jsx(Rt,{message:"Loading leads..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Wn,{className:"mr-2 text-blue-600"}),"Leads"]}),n.jsx("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{Se(),Re(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(dn,{className:"mr-2"})," Add Lead"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Je.map(be=>n.jsx(oUe,{...be},be.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search leads",value:y,onChange:he,className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:v,onChange:be=>C(be.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Name"}),n.jsx("th",{className:"py-3 px-4",children:"Company"}),n.jsx("th",{className:"py-3 px-4",children:"Job Title"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:ae.length>0?ge.map(be=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>He(be),children:[n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[be.first_name," ",be.last_name]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:be.company_name||"--"})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:be.title||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:be.email||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:be.assigned_to?`${be.assigned_to.first_name} ${be.assigned_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${rUe(be.status||"New")}`,children:sUe(be.status||"New")})})]},be.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No leads found."})})})]})}),n.jsx(en,{className:"mt-4",totalItems:ae.length,pageSize:T,currentPage:N,onPrev:Be,onNext:qe,onPageSizeChange:be=>{k(be),S(1)},pageSizeOptions:[10,20,30,40,50],label:"leads"}),r&&n.jsx("div",{id:"modalBackdrop",onClick:fe,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:be=>be.stopPropagation(),children:[n.jsx("button",{onClick:()=>{B(),Re(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:A?"Edit Lead":"Add New Lead"}),n.jsxs("form",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),n.jsx("input",{type:"text",name:"first_name",value:_.first_name,onChange:se,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"Smith",name:"last_name",value:_.last_name,onChange:se,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                      ${We&&!_.last_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Company ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:_.company_name,onChange:se,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${We&&!_.company_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Job Title",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:_.title,onChange:se,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${We&&!_.title?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),n.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:_.department,onChange:se,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Email",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:_.email,onChange:se,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${We&&!_.email?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"work_ccode",value:_.work_ccode,onChange:se,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:pA.map(be=>n.jsx("option",{value:be.code,children:be.code},be.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:_.work_phone,onChange:se,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m1_ccode",value:_.m1_ccode,onChange:se,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:pA.map(be=>n.jsx("option",{value:be.code,children:be.code},be.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:_.mobile_phone_1,onChange:se,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m2_ccode",value:_.m2_ccode,onChange:se,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:pA.map(be=>n.jsx("option",{value:be.code,children:be.code},be.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:_.mobile_phone_2,onChange:se,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),n.jsx("input",{type:"text",name:"address",value:_.address,onChange:se,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:`w-full rounded-lg ${We&&!_.lead_owner?"border border-red-400":"border border-gray-300"}`,children:n.jsx(cUe,{items:Array.isArray(l)?l:[],value:_.lead_owner??"",placeholder:"Search a user...",getLabel:be=>`${be.first_name} ${be.last_name}`,onChange:be=>{const Ke=l.find(G=>String(G.id)===String(be));d(Ke);let $=null;Ke&&Ke.assigned_territory&&Ke.assigned_territory.length===1&&($=Ke.assigned_territory[0].id),E(G=>({...G,lead_owner:be,territory_id:$}))}})})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),n.jsxs("select",{name:"territory_id",value:_.territory_id||"",onChange:se,disabled:!c||!c.assigned_territory||c.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[n.jsx("option",{value:"",disabled:!0,children:c?c.assigned_territory&&c.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),c&&c.assigned_territory&&c.assigned_territory.map(be=>n.jsx("option",{value:be.id,children:be.name},be.id))]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),n.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:_.source,onChange:se,children:[n.jsx("option",{value:"",disabled:!0,children:"Select Source"}),n.jsx("option",{value:"Website",children:"Website"}),n.jsx("option",{value:"Referral",children:"Referral"}),n.jsx("option",{value:"Cold call",children:"Cold call"}),n.jsx("option",{value:"Event",children:"Event"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),n.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:_.notes,onChange:se,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("button",{type:"button",onClick:()=>{B(),Re(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:D||R,children:"Cancel"}),n.jsx("button",{type:"submit",onClick:ct,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:D||R,children:D||R?"Processing...":A?"Update Lead":"Save Lead"})]})]})]})}),W&&n.jsx(lUe,{open:!0,title:W.title,message:W.message,confirmLabel:W.confirmLabel,cancelLabel:W.cancelLabel,variant:W.variant,onConfirm:Ie,onCancel:ue,loading:R}),a&&!r&&!A&&n.jsx(IZ,{relatedActs:Y,lead:a,onBack:Ye,fetchLeads:Le,setSelectedLead:s,onEdit:de,onDelete:ke})]})}function lUe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),n.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}function oUe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function cUe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200}){const[o,c]=h.useState(!1),[d,u]=h.useState(""),f=h.useRef(null),p=e.find(w=>String(w.id)===String(t)),x=p?s(p):"",y=h.useMemo(()=>{const w=d.trim().toLowerCase();return(w?e.filter(C=>(s(C)||"").toLowerCase().includes(w)):e).slice(0,l)},[e,d,s,l]);return h.useEffect(()=>{const w=v=>{f.current&&!f.current.contains(v.target)&&c(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{o||u("")},[o]),n.jsxs("div",{ref:f,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:o?d:x,placeholder:r,onFocus:()=>!i&&c(!0),onChange:w=>{u(w.target.value),o||c(!0)},className:"w-full rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),o&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:y.length>0?y.map(w=>{const v=String(w.id),C=s(w),N=String(t)===v;return n.jsx("button",{type:"button",onClick:()=>{a(v),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${N?"bg-blue-50":""}`,children:C||"--"},v)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}const ib={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},Ga=({label:e,value:t,name:a,className:s=""})=>n.jsxs("div",{className:`flex flex-col ${s}`,children:[n.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),n.jsx("input",{type:"text",name:a,defaultValue:t,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),dUe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(Ga,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),n.jsx(Ga,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),n.jsx(Ga,{label:"Industry",name:"industry",value:e.industry})]}),n.jsx(Ga,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),n.jsx(Ga,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),uUe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Ga,{label:"First Name",name:"firstName",value:e.firstName}),n.jsx(Ga,{label:"Last Name",name:"lastName",value:e.lastName}),n.jsx(Ga,{label:"Department",name:"department",value:e.department}),n.jsx(Ga,{label:"Title",name:"title",value:e.title}),n.jsx(Ga,{label:"Work Phone",name:"workPhone",value:e.workPhone}),n.jsx(Ga,{label:"Email",name:"email",value:e.email}),n.jsx(Ga,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),n.jsx(Ga,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),mUe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Ga,{label:"Deal Name",name:"dealName",value:e.dealName}),n.jsxs("div",{className:"flex",children:[n.jsx(Ga,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),n.jsx("div",{className:"flex flex-col justify-end ml-1",children:n.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),n.jsx(Ga,{label:"Stage",name:"stage",value:e.stage}),n.jsx(Ga,{label:"Territory",name:"territory",value:e.territory})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Ga,{label:"Description",name:"description",value:e.description}),n.jsx(Ga,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function fUe({isOpen:e,onClose:t}){const[a,s]=h.useState(1),r=3;if(!e)return null;const i=()=>{a<r?s(a+1):(t(),s(1))},l=()=>{a>1&&s(a-1)},o=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],c=()=>{switch(a){case 1:return n.jsx(dUe,{data:ib});case 2:return n.jsx(uUe,{data:ib});case 3:return n.jsx(mUe,{data:ib});default:return null}};return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:ib.accountName})]}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:n.jsx(qN,{className:"w-6 h-6"})})]}),n.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:o.map(d=>n.jsx("button",{onClick:()=>s(d.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${a===d.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:d.name},d.id))}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c()}),n.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[a>1&&n.jsx("button",{onClick:l,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),a<r?n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}function hUe(){h.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const e=yt(),t=Yt(),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Stage"),[l,o]=h.useState("Filter by Owner"),[c,d]=h.useState(null),[u,f]=h.useState("Overview"),[p,x]=h.useState(!1),[y,w]=h.useState(null),[v,C]=h.useState(!1),[N,S]=h.useState(1),[T,k]=h.useState(10),[_,E]=h.useState(!1),[A,I]=h.useState(null),[z,F]=h.useState(!1),[D,M]=h.useState(!1),[W,Z]=h.useState(null),[R,Q]=h.useState([]),[Y,oe]=h.useState([]),[re,ee]=h.useState([]),[H,ye]=h.useState({}),[te,ve]=h.useState(null);h.useEffect(()=>{const G=t.state,K=G?.dealID;if(K&&!G?.openDealModal){ve(K),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(te&&y?.length>0&&!v){const G=y.find(K=>K.id===te);G?d(G):q.error("Deal not found."),ve(null)}},[te,y,v]);const[je,Oe]=h.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),[$e,pe]=h.useState(null),[Me,Le]=h.useState(null),he={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST","Closed Cancelled Stage":"CLOSED_CANCELLED"},ae=G=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost",CLOSED_CANCELLED:"Closed Cancelled"})[G]||G||"--",Ae=G=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700",CLOSED_CANCELLED:"bg-red-100 text-red-700"})[G]||"bg-gray-100 text-gray-700",ge=h.useCallback(async G=>{try{const K=await ce.get(`/activities/deal/${G}`);ye(K.data&&typeof K.data=="object"?K.data:{})}catch(K){console.error(K),K.response?.status===404&&(console.warn("No activities found for this account."),ye({}))}},[]),Be=h.useMemo(()=>{const G=a.trim().toLowerCase(),K=r.trim(),ne=l.trim();return(y??[]).filter(J=>{const Ce=[J?.name,J?.description,J?.account?.name,J?.contact?.first_name,J?.contact?.last_name,J?.assigned_deals?.first_name,J?.assigned_deals?.last_name],me=G===""||Ce.some(Ue=>Ue==null||Ue===""?!1:Ue.toString().toLowerCase().includes(G)),V=K==="Filter by Stage"||K===""||J.stage===he[K]||J.stage===K,_e=ne==="Filter by Owner"||ne===""||`${J.assigned_deals?.first_name||""} ${J.assigned_deals?.last_name||""}`.trim().toLowerCase()===ne.toLowerCase();return me&&V&&_e})},[y,a,r,l]),qe=Math.max(1,Math.ceil(Be.length/T)||1);h.useEffect(()=>{S(1)},[a,r,l]),h.useEffect(()=>{S(G=>{const K=Math.max(1,Math.ceil(Be.length/T)||1);return G>K?K:G})},[Be.length]);const Te=h.useMemo(()=>{const G=(N-1)*T;return Be.slice(G,G+T)},[Be,N]),He=()=>S(G=>Math.max(G-1,1)),Ye=()=>S(G=>Math.min(G+1,qe)),B=()=>{Oe({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),M(!1),Z(null),x(!0)},fe=async()=>{C(!0);try{const G=await ce.get("/deals/admin/fetch-all"),ne=[...Array.isArray(G.data)?G.data:[]].sort((J,Ce)=>{const me=J?.created_at?new Date(J.created_at).getTime():0;return(Ce?.created_at?new Date(Ce.created_at).getTime():0)-me});w(ne)}catch(G){G.response&&G.response.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch deals. Please try again later."),console.error(G)}finally{C(!1)}},Se=async()=>{try{const G=await ce.get("/accounts/admin/fetch-all");Q(Array.isArray(G.data)?G.data:[])}catch(G){console.error(G),G.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},de=async()=>{try{const G=await ce.get("/contacts/admin/fetch-all");oe(Array.isArray(G.data)?G.data:[])}catch(G){console.error(G),G.response?.status===403&&q.warn("Unable to load contacts (permission denied).")}},ke=async()=>{try{const G=await ce.get("/users/all");ee(Array.isArray(G.data)?G.data:[])}catch(G){console.error(G),G.response?.status===403&&q.warn("Unable to load users (permission denied).")}};h.useEffect(()=>{fe(),Se(),de(),ke()},[]);const se=async G=>{G&&(Oe({id:G.id||null,name:G.name||"",account_id:G.account_id?.toString()||"",primary_contact_id:G.primary_contact_id?.toString()||"",stage:G.stage||"PROPOSAL",amount:G.amount?.toString()||"",close_date:G.close_date?new Date(G.close_date).toISOString().split("T")[0]:"",assigned_to:G.assigned_to?.toString()||"",currency:G.currency||"PHP",description:G.description||""}),pe(G.account||null),Le(G.contact||null),M(!0),Z(G.id),d(null),x(!0))},We=async(G=!1)=>{try{const K=await ce.get("/deals/admin/fetch-all"),J=[...Array.isArray(K.data)?K.data:[]].sort((Ce,me)=>{const V=Ce?.created_at?new Date(Ce.created_at).getTime():0;return(me?.created_at?new Date(me.created_at).getTime():0)-V});if(w(J),!G&&c&&c.id){const Ce=J.find(me=>me.id===c.id);Ce&&d({...Ce})}}catch(K){console.error("Failed to refresh deal data:",K),await fe()}},Re=G=>{const K=G.name.trim();if(!K){q.error("Deal name is required.");return}if(!G.account_id){q.error("Account is required.");return}const ne=D&&W?"update":"create",J=K;I({title:ne==="create"?"Confirm New Deal":"Confirm Update",message:ne==="create"?n.jsxs("span",{children:["Are you sure you want to create"," ",n.jsx("span",{className:"font-semibold",children:J}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:J}),"?"]}),confirmLabel:ne==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:ne,formData:G,targetId:W||null,name:J}})},ct=G=>{if(!G)return;const K=G.name||"this deal";I({title:"Delete Deal",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:K}),"? This action cannot be undone."]}),confirmLabel:"Delete Deal",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:G.id,name:K}})},Ie=async()=>{if(!A?.action){I(null);return}const{action:G}=A,{type:K,formData:ne,targetId:J,name:Ce}=G;F(!0);try{if(K==="create"){E(!0);const me={name:ne.name.trim(),account_id:parseInt(ne.account_id),primary_contact_id:ne.primary_contact_id?parseInt(ne.primary_contact_id):null,stage:ne.stage,amount:ne.amount?parseFloat(ne.amount):null,currency:ne.currency||"PHP",close_date:ne.close_date||null,description:ne.description||null,assigned_to:ne.assigned_to?parseInt(ne.assigned_to):null};await ce.post("/deals/admin/create",me),q.success(`Deal "${Ce}" created successfully.`),x(!1),await fe()}else if(K==="update"){if(!J)throw new Error("Missing deal identifier for update.");E(!0);const me={};ne.name!==void 0&&(me.name=ne.name.trim()),ne.account_id!==void 0&&ne.account_id!==""&&(me.account_id=parseInt(ne.account_id)),ne.primary_contact_id!==void 0&&(me.primary_contact_id=ne.primary_contact_id?parseInt(ne.primary_contact_id):null),ne.stage!==void 0&&(me.stage=ne.stage),ne.amount!==void 0&&ne.amount!==""&&(me.amount=parseFloat(ne.amount)),ne.currency!==void 0&&(me.currency=ne.currency),ne.close_date!==void 0&&(me.close_date=ne.close_date||null),ne.description!==void 0&&(me.description=ne.description||null),ne.assigned_to!==void 0&&(me.assigned_to=ne.assigned_to?parseInt(ne.assigned_to):null),await ce.put(`/deals/admin/${J}`,me),q.success(`Deal "${Ce}" updated successfully.`),x(!1),await fe()}else if(K==="delete"){if(!J)throw new Error("Missing deal identifier for deletion.");await ce.delete(`/deals/admin/${J}`),q.success(`Deal "${Ce}" deleted successfully.`),c?.id===J&&d(null),await fe()}}catch(me){console.error(me);const V=K==="create"?"Failed to create deal. Please review the details and try again.":K==="update"?"Failed to update deal. Please review the details and try again.":"Failed to delete deal. Please try again.",_e=me.response?.data?.detail||V;q.error(_e)}finally{(K==="create"||K==="update")&&E(!1),F(!1),I(null)}},ue=()=>{z||I(null)},Ne=()=>{x(!1),Oe({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),pe(null),Le(null),M(!1),Z(null),E(!1)},Fe=(y??[]).filter(G=>G.stage==="PROSPECTING").length,Ze=(y??[]).filter(G=>G.stage==="QUALIFICATION").length,st=(y??[]).filter(G=>G.stage==="PROPOSAL").length,Ee=(y??[]).filter(G=>G.stage==="NEGOTIATION").length,Je=(y??[]).filter(G=>G.stage==="CLOSED_WON").length,be=(y??[]).filter(G=>G.stage==="CLOSED_LOST").length,Ke=(y??[]).filter(G=>G.stage==="CLOSED_CANCELLED").length,$=[{title:"Prospecting",value:Fe,icon:$w,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:Ze,icon:ia,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:st,icon:Qt,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:Ee,icon:nu,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:Je,icon:ba,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:be,icon:Ps,color:"text-red-600",bgColor:"bg-red-100"},{title:"Closed Cancelled",value:Ke,icon:Ps,color:"text-gray-600",bgColor:"bg-gray-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[v&&n.jsx(Rt,{message:"Loading deals..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Qt,{className:"mr-2 text-blue-600"}),"Deals"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:B,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(dn,{className:"mr-2"})," Add Deal"]})})]}),n.jsx("div",{className:"grid grid-cols-1 p-2 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden",children:$.map(G=>n.jsx(pUe,{...G},G.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search deals",value:a,onChange:G=>s(G.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[n.jsxs("select",{value:r,onChange:G=>i(G.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),n.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),n.jsx("option",{value:"Qualification Stage",children:"Qualification"}),n.jsx("option",{value:"Proposal Stage",children:"Proposal"}),n.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),n.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),n.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"}),n.jsx("option",{value:"Closed Cancelled Stage",children:"Closed Cancelled"})]}),n.jsxs("select",{value:l,onChange:G=>o(G.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((y??[]).map(G=>`${G.assigned_deals?.first_name} ${G.assigned_deals?.last_name}`))].map((G,K)=>n.jsx("option",{value:G,children:G},K))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Stage"}),n.jsx("th",{className:"py-3 px-4",children:"Value"}),n.jsx("th",{className:"py-3 px-4",children:"Close Date"}),n.jsx("th",{className:"py-3 px-4",children:"Owner"})]})}),n.jsx("tbody",{children:Be.length>0?Te.map(G=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{d({...G}),ge(G.id)},children:[n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:G.deal_id?G.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:G.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:G.description||"--"})]})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:G.account?.name||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:G.contact?.first_name&&G.contact?.last_name?`${G.contact.first_name} ${G.contact.last_name}`:G.contact?.first_name||G.contact?.last_name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Ae(G.stage)}`,children:ae(G.stage)})}),n.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",G.amount?.toLocaleString()||"0"]}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:G.close_date||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:G.assigned_deals?.first_name&&G.assigned_deals?.last_name?`${G.assigned_deals.first_name} ${G.assigned_deals.last_name}`:G.assigned_deals?.first_name||G.assigned_deals?.last_name||"--"})]},G.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No deals found."})})})]})}),n.jsx(en,{className:"mt-4",totalItems:Be.length,pageSize:T,currentPage:N,onPrev:He,onNext:Ye,onPageSizeChange:G=>{k(G),S(1)},pageSizeOptions:[10,20,30,40,50],label:"deals"}),p&&n.jsx(xUe,{onClose:Ne,formData:je,setFormData:Oe,isEditing:D,onSubmit:Re,isSubmitting:_||z,accounts:R,contacts:Y,users:re,currentAccount:$e,currentContact:Me}),c&&n.jsx(Jx,{relatedActs:H,selectedDeal:c,show:!!c,onClose:()=>d(null),activeTab:u,setActiveTab:f,onEdit:se,onDelete:ct,onStatusUpdate:We}),A&&n.jsx(gUe,{open:!0,title:A.title,message:A.message,confirmLabel:A.confirmLabel,cancelLabel:A.cancelLabel,variant:A.variant,onConfirm:Ie,onCancel:ue,loading:z})]})}function gUe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),n.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}function pUe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function xUe({onClose:e,formData:t,setFormData:a,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,accounts:l=[],contacts:o=[],users:c=[],currentAccount:d=null,currentContact:u=null}){const[f,p]=h.useState(!1),x=v=>{if(v.preventDefault(),p(!0),!t.name?.trim()){q.error("Deal name is required.");return}const C=Number(t.amount);if(!t.amount||isNaN(C)||C<=0){q.error("Amount must be a number greater than 0.");return}if(!t.account_id){q.error("Please select an account.");return}if(!t.primary_contact_id){q.error("Please select a primary contact.");return}if(!t.assigned_to){q.error("Please assign this deal to a user.");return}r?.(t)},y=v=>{v.target.id==="modalBackdrop"&&e()},w=h.useMemo(()=>{const v=String(t.account_id||"").trim(),C=Array.isArray(o)?o:[];return v?C.filter(N=>{const T=[N?.account_id,N?.accountId,N?.account?.id,N?.account?.account_id,N?.account?.accountId].find(k=>k!=null&&String(k).trim()!=="");return T?String(T)===v:!1}):C},[o,t.account_id]);return h.useEffect(()=>{const v=String(t.account_id||"").trim(),C=String(t.primary_contact_id||"").trim();if(!C||!v)return;w.some(S=>String(S?.id)===C)||a(S=>({...S,primary_contact_id:""}))},[t.account_id,t.primary_contact_id,w,a]),n.jsx("div",{id:"modalBackdrop",onClick:y,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:v=>v.stopPropagation(),children:[n.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Deal":"Create Deal"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:x,noValidate:!0,children:[n.jsx(yA,{label:"Deal Name",name:"name",value:t.name,onChange:v=>a({...t,name:v.target.value}),placeholder:"Enter deal name",required:!0,isSubmitted:f,className:"md:col-span-2"}),n.jsx(bA,{label:"Account",value:t.account_id||"",onChange:v=>a({...t,account_id:v}),items:l||[],getLabel:v=>v?.name??"",placeholder:"Search account...",disabled:i,currentItem:d,required:!0,isSubmitted:f}),n.jsx(bA,{label:"Primary Contact",value:t.primary_contact_id||"",onChange:v=>a({...t,primary_contact_id:v}),items:w||[],getLabel:v=>`${v?.first_name??""} ${v?.last_name??""}`.trim()||v?.email||"",placeholder:"Search contact...",disabled:i,currentItem:u,required:!0,isSubmitted:f}),n.jsx(Q7,{label:"Stage",name:"stage",value:t.stage,onChange:v=>a({...t,stage:v.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}],disabled:i}),n.jsx(yA,{label:"Amount",name:"amount",type:"number",step:"0.01",value:t.amount,onChange:v=>a({...t,amount:v.target.value}),placeholder:"0",required:!0,isSubmitted:f}),n.jsx(Q7,{label:"Currency",name:"currency",value:t.currency||"PHP",onChange:v=>a({...t,currency:v.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),n.jsx(yA,{label:"Close Date",name:"close_date",type:"date",value:t.close_date||"",onChange:v=>a({...t,close_date:v.target.value}),disabled:i}),n.jsx(bA,{label:"Assign To",value:t.assigned_to||"",onChange:v=>a({...t,assigned_to:v}),items:c||[],getLabel:v=>`${v?.first_name??""} ${v?.last_name??""}`.trim()||v?.email||"",placeholder:"Search assignee...",disabled:i,required:!0,isSubmitted:f,className:"md:col-span-2"}),n.jsx(bUe,{label:"Description",name:"description",value:t.description,onChange:v=>a({...t,description:v.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Deal":"Save Deal"})]})]})]})})}function yA({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function Q7({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:l=!1,className:o=""}){return n.jsxs("div",{className:o,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))})]})}function bA({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",currentItem:c=null,required:d=!1,isSubmitted:u=!1}){const f=u&&d&&!a;return n.jsxs("div",{className:o,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",d&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(yUe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:l,currentItem:c,hasError:f})]})}function yUe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,currentItem:o=null,hasError:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),w=e.find(N=>String(N.id)===String(t))||o,v=w?s(w):"",C=h.useMemo(()=>{const N=f.trim().toLowerCase();return(N?e.filter(T=>(s(T)||"").toLowerCase().includes(N)):e).slice(0,l)},[e,f,s,l]);return h.useEffect(()=>{const N=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:v,placeholder:r,onFocus:()=>!i&&u(!0),onChange:N=>{p(N.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${c?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:C.length>0?C.map(N=>{const S=String(N.id),T=s(N),k=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:T||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function bUe({label:e,name:t,value:a,onChange:s,placeholder:r,required:i=!1,disabled:l=!1,className:o="",rows:c=3}){return n.jsxs("div",{className:o,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,required:i,disabled:l,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function vUe({selectedDeal:e,show:t,onClose:a,activeTab:s,setActiveTab:r,onEdit:i,onDelete:l,onStatusUpdate:o}){const c=yt(),[d]=Ds(),u=d.get("id"),[f,p]=h.useState(e||null),[x,y]=h.useState(s||"Overview"),{user:w}=Kt();h.useEffect(()=>{console.log("AdminDealsInformation mounted",f),console.log("User:",w)},[f,w]);const v=s!==void 0?s:x;if(h.useEffect(()=>{(async()=>{if(u&&!e)try{console.log("Fetching deal from route, ID:",u);const k=(await ce.get("/deals/admin/fetch-all")).data||[];console.log("All deals fetched:",k.length);const _=k.find(E=>E.id===parseInt(u));if(console.log("Found deal:",_),_){console.log("Deal data structure:",{id:_.id,name:_.name,amount:_.amount,stage:_.stage,account:_.account,contact:_.contact,assigned_deals:_.assigned_deals,deal_creator:_.deal_creator,allKeys:Object.keys(_)});const E={..._,amount:typeof _.amount=="number"?_.amount:parseFloat(_.amount||0),probability:_.probability||0};p(E)}else console.warn("Deal not found with ID:",u)}catch(T){console.error("Error fetching deal:",T)}})()},[u,e]),!f&&!u||u&&!f)return null;const C=S=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[S]||"bg-gray-100 text-gray-700";function N(S){return S?new Date(S).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),n.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:n.jsx("button",{onClick:()=>{a?a():c(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Vt,{size:25})})})]})}),n.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:n.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[n.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:f.name}),n.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${C(f.stage)}`,children:f.stage})]}),n.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",N(f.created_at)]})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2",children:[n.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[" ",f.amount?f.amount.toLocaleString():"0"]}),n.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${f.probability}%`}})}),n.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",f.probability,"% Complete "]}),(f.created_by===w?.id||f.assigned_to===w?.id)&&n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[n.jsxs("button",{type:"button",onClick:()=>{i&&i(f)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(oa,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),n.jsxs("button",{type:"button",onClick:()=>{l&&l(f)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(zt,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(S=>n.jsx("button",{onClick:()=>{r?r(S):y(S)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${v===S?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:S},S))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[v==="Overview"&&n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Description:"})," ",f.description]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Expected Close Date:"})," ",f.close_date]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("div",{className:"mt-4 py-3 w-full",children:[n.jsxs("div",{className:"relative flex flex-col w-full",children:[n.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const S=(f?.stage||"PROSPECTING").toUpperCase(),k=(E=>E==="PROSPECTING"?0:E==="QUALIFICATION"?1:E==="PROPOSAL"?2:E==="NEGOTIATION"?3:E==="CLOSED_WON"||E==="CLOSED_LOST"?4:-1)(S);return[0,1,2,3,4].map(E=>k===E?"orange":k>E?"green":"gray").map((E,A)=>n.jsxs(pt.Fragment,{children:[n.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${E==="green"?"bg-green-500 border-green-500":E==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),A<4&&n.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},A))})()}),n.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((S,T)=>n.jsx("span",{className:"text-center flex-1 break-words",children:S},T))})]}),n.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:f.stage})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),n.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Account:"})," ",f.account?.name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Primary Contact:"})," ",f.contact?.first_name," ",f.contact?.last_name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Phone:"})," ",f.contact?.work_phone]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",f.contact?.email]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Assigned To:"})," ",f.assigned_deals?.first_name," ",f.assigned_deals?.last_name]})]})]})]}),v==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:f.description||"No notes available."})]})]}),v==="Activities"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:At,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:Ct,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((S,T)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[n.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-gray-600 mt-1",children:n.jsx(S.icon,{size:24})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-gray-900 break-words",children:S.title}),n.jsx("p",{className:"text-sm text-gray-500 break-words",children:S.desc}),n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),n.jsx("p",{className:"text-sm text-gray-700 break-words",children:S.user})]})]})]}),n.jsx("p",{className:"text-sm text-gray-500 break-words",children:S.date})]},T))]}),v==="Edit"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),n.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:f.name})]}),n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),n.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:f.description})]}),n.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),n.jsx("div",{className:"w-full lg:w-auto",children:n.jsx(Wj,{selectedDeal:f,onStatusUpdate:o,onClose:a})})]})]})]})})}function wUe({selectedDeal:e,onStatusUpdate:t,onClose:a}){const[s,r]=h.useState(e?.stage||""),[i,l]=h.useState(!1),o=yt(),{user:c}=Kt();h.useEffect(()=>{console.log("AdminDealsInformation mounted sahdksd",e),console.log("User sadad:",c)},[e,c]);const d=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"}];h.useEffect(()=>{e?.stage&&r(e.stage)},[e]);const u=async()=>{if(!e||!e.id){q.error("No deal selected");return}if(!s||s===e.stage){q.info("Please select a different stage");return}const f=e.id;l(!0);try{await ce.put(`/deals/admin/${f}`,{stage:s}),a&&a(),t&&setTimeout(async()=>{await t(!0)},100),setTimeout(()=>{q.success("Deal status updated successfully")},300)}catch(p){console.error(p);const x=p.response?.data?.detail||"Failed to update deal status";q.error(x)}finally{l(!1)}};return e?n.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>o("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Deal"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(At,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const f=encodeURIComponent(e.contact.email),p=encodeURIComponent(""),x=encodeURIComponent(""),y=`https://mail.google.com/mail/?view=cm&fs=1&to=${f}&su=${p}&body=${x}`;window.open(y,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Zn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>o("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Deal"}}}),children:[n.jsx(Ct,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>o("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Deal"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Gt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:s,onChange:f=>r(f.target.value),disabled:i||e.created_by!==c?.id&&e.assigned_to!==c?.id,children:d.map(f=>n.jsx("option",{value:f.value,children:f.label},f.value))}),(e.created_by===c?.id||e.assigned_to===c?.id)&&n.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:u,disabled:i||!s||s===e.stage,children:i?"Updating...":"Update"})]})]}):null}const vA=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],wA={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:"",subtotal:0,tax_rate:0,tax_amount:0,discount_type:"",discount_value:0,discount_amount:0,currency:"PHP",items:[]},Ti=e=>{if(!e)return"Draft";const t=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[t]||"Draft"},NA=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",NUe=e=>{switch(Ti(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},jUe=e=>{switch(Ti(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},lb=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",gg=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",CUe=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const t=new Date(e);if(isNaN(t.getTime()))return"";const a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`}catch{return""}},jA=(e,t)=>{if(!e||t==null||t==="")return"";const a=Number(t);if(Number.isNaN(a))return"";const s=new Date(e);return isNaN(s.getTime())?"":(s.setDate(s.getDate()+a),s.toISOString().slice(0,10))},K7=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},X7=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},hw=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},SUe=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const s of e){const r=localStorage.getItem(s);if(r)try{const i=JSON.parse(r),l=hw(i);if(l)return l}catch{}}const t=localStorage.getItem("user_id"),a=hw(t);return a||null},_Ue=e=>{if(!e)return"";const a=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""},AUe=e=>{if(!e)return"";const a=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""};function EUe(){const e=yt(),t=Yt(),{user:a}=Kt(),s=a?.company?.currency||"";h.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[r,i]=h.useState([]),[l,o]=h.useState(!1),[c,d]=h.useState([]),[u,f]=h.useState([]),[p,x]=h.useState([]),[y,w]=h.useState([]),[v,C]=h.useState(null),[N,S]=h.useState(null),[T,k]=h.useState(!1),[_,E]=h.useState(!1),[A,I]=h.useState(!1),[z,F]=h.useState(null),[D,M]=h.useState(!1),[W,Z]=h.useState(null),[R,Q]=h.useState(wA),[Y,oe]=h.useState(""),[re,ee]=h.useState("Filter by Status"),[H,ye]=h.useState(null),[te,ve]=h.useState(1),[je,Oe]=h.useState(10),[$e,pe]=h.useState("Overview"),[Me,Le]=h.useState("Draft"),[he,ae]=h.useState([]),[Ae,ge]=h.useState(null);h.useEffect(()=>{const U=t.state?.quoteID;if(U){ge(U),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(Ae&&r.length>0&&!l){const L=r.find(U=>U.id===Ae);L?S(L):q.error("Quote not found."),ge(null)}},[Ae,p,l]),h.useEffect(()=>{let L=!0;return(async()=>{const xe=SUe();if(xe&&L){C(xe);return}try{const De=await ce.get("/auth/me"),ie=hw(De?.data);if(ie&&L){C(ie);return}}catch{}try{const De=await ce.get("/users/me"),ie=hw(De?.data);if(ie&&L){C(ie);return}}catch{}L&&C(null)})(),()=>{L=!1}},[]);const Be=h.useCallback(L=>L&&u.find(xe=>String(xe.id)===String(L))?.name||"",[u]),qe=h.useCallback(L=>{if(!L)return"";const U=p.find(xe=>String(xe.id)===String(L));return U?`${U.first_name} ${U.last_name}`.trim():""},[p]),Te=h.useCallback(L=>{if(!L)return"--";const U=c.find(xe=>String(xe.id)===String(L));return U?.deal_name||U?.name||`Deal #${K7(L)}`},[c]),He=h.useCallback(L=>{const U=c.find(ie=>String(ie.id)===String(L)),xe=_Ue(U);let De=AUe(U);if(!De&&xe){const ie=p.filter(Pe=>String(Pe.account_id||"")===String(xe));if(ie.length>0){const Pe=[...ie].sort((Qe,vt)=>{const ht=`${Qe.first_name||""} ${Qe.last_name||""}`.trim().toLowerCase(),Ut=`${vt.first_name||""} ${vt.last_name||""}`.trim().toLowerCase();return ht.localeCompare(Ut)});De=String(Pe[0].id)}}if(xe&&De){const ie=p.find(Pe=>String(Pe.id)===String(De));ie?.account_id&&String(ie.account_id)!==String(xe)&&(De="")}return{accountId:xe||"",contactId:De||""}},[c,p]),Ye=h.useCallback(L=>{if(!L)return"--";if(L.deal?.deal_name)return L.deal.deal_name;if(L.deal?.name)return L.deal.name;const U=L.deal_id||L.deal?.id;return U?Te(U):"--"},[Te]),B=h.useCallback(L=>{if(!L)return"--";if(L.account?.name)return L.account.name;let U=L.account_id||L.account?.id;if(!U){const xe=L.deal_id||L.deal?.id;xe&&(U=He(xe).accountId)}return U?Be(U)||`Account #${U}`:"--"},[He,Be]),fe=h.useCallback(L=>{if(!L)return"--";if(L.contact?.first_name||L.contact?.last_name)return`${L.contact?.first_name||""} ${L.contact?.last_name||""}`.trim()||"--";let U=L.contact_id||L.contact?.id;if(!U){const De=L.deal_id||L.deal?.id;De&&(U=He(De).contactId)}return(U?qe(U):"")||(U?`Contact #${U}`:"--")},[He,qe]),Se=h.useCallback(async(L=null)=>{o(!0);try{const U=await ce.get("/quotes/admin/fetch-all"),De=[...Array.isArray(U.data)?U.data:[]].sort((ie,Pe)=>{const Qe=ie?.created_at||ie?.updated_at||0,vt=Pe?.created_at||Pe?.updated_at||0;return new Date(vt)-new Date(Qe)});if(i(De),L){const ie=De.find(Pe=>Pe.id===L);S(ie||null)}}catch(U){console.error(U),i([]),U.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch quotes. Please try again later.")}finally{o(!1)}},[]),de=h.useCallback(async()=>{try{const L=await ce.get("/deals/admin/fetch-all");d(Array.isArray(L.data)?L.data:[])}catch(L){console.error(L),L.response?.status===403&&q.warn("Unable to load deals (permission denied).")}},[]),ke=h.useCallback(async()=>{try{const L=await ce.get("/accounts/admin/fetch-all");f(Array.isArray(L.data)?L.data:[])}catch(L){console.error(L),L.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},[]),se=h.useCallback(async()=>{try{const L=await ce.get("/contacts/admin/fetch-all");x(Array.isArray(L.data)?L.data:[])}catch(L){console.error(L),L.response?.status===403&&q.warn("Unable to load contacts (permission denied).")}},[]),We=h.useCallback(async()=>{try{const L=await ce.get("/users/all");w(Array.isArray(L.data)?L.data:[])}catch(L){console.error(L),L.response?.status===403&&q.warn("Unable to load users (permission denied).")}},[]);h.useEffect(()=>{Se(),de(),ke(),se(),We()},[Se,de,ke,se,We]);const Re=h.useMemo(()=>{const L=Y.trim().toLowerCase(),U=re.trim();return r.filter(xe=>{const De=Ye(xe),ie=B(xe),Pe=fe(xe),Qe=jA(xe.presented_date,xe.validity_days),vt=[xe.quote_id,De,ie,Pe,xe.total_amount?.toString(),xe.validity_days?.toString(),xe.presented_date?gg(xe.presented_date):"",Qe?gg(Qe):"",xe.assigned_user?.first_name,xe.assigned_user?.last_name,xe.creator?.first_name,xe.creator?.last_name,xe.status,xe.notes,lb(xe.created_at),lb(xe.updated_at)],ht=L===""||vt.some(wn=>wn==null?!1:wn.toString().toLowerCase().includes(L)),Ut=U==="Filter by Status"||Ti(xe.status)===U;return ht&&Ut})},[r,Y,re,Ye,B,fe]),ct=Math.max(1,Math.ceil(Re.length/je)||1);h.useEffect(()=>ve(1),[Y,re]),h.useEffect(()=>{ve(L=>{const U=Math.max(1,Math.ceil(Re.length/je)||1);return L>U?U:L})},[Re.length,je]);const Ie=h.useMemo(()=>{const L=(te-1)*je;return Re.slice(L,L+je)},[Re,te,je]),ue=()=>ve(L=>Math.max(L-1,1)),Ne=()=>ve(L=>Math.min(L+1,ct)),Fe=L=>{S(L),pe("Overview"),Le(Ti(L?.status)||"Draft")},Ze=()=>{S(null),pe("Overview")},st=L=>{L.target.id==="quoteModalBackdrop"&&!D&&Ze()},Ee=h.useCallback(()=>{k(!1),E(!1),Z(null),Q(wA),I(!1)},[]),Je=L=>{L.target.id==="modalBackdrop"&&!A&&!D&&Ee()},be=L=>{const{name:U,value:xe}=L.target;if(U==="deal_id"){const{accountId:De,contactId:ie}=He(xe);Q(Pe=>({...Pe,deal_id:xe,account_id:De,contact_id:ie}));return}Q(De=>({...De,[U]:xe}))},Ke=()=>{Q(wA),E(!1),Z(null),k(!0)},$=L=>{if(!L)return;S(null);const U=L.deal?.id?String(L.deal.id):L.deal_id?String(L.deal_id):"",xe=U?He(U):{accountId:"",contactId:""},De=L.account?.id?String(L.account.id):L.account_id?String(L.account_id):xe.accountId,ie=L.contact?.id?String(L.contact.id):L.contact_id?String(L.contact_id):xe.contactId,Pe=L.assigned_user?.id?String(L.assigned_user.id):L.assigned_to?String(L.assigned_to):"";Q({deal_id:U,account_id:De||"",contact_id:ie||"",total_amount:L.total_amount?.toString()||"",presented_date:CUe(L.presented_date),validity_days:L.validity_days!==null&&L.validity_days!==void 0?String(L.validity_days):"",status:Ti(L.status)||"Draft",assigned_to:Pe,notes:L.notes||"",subtotal:parseFloat(L.subtotal)||0,tax_rate:parseFloat(L.tax_rate)||0,tax_amount:parseFloat(L.tax_amount)||0,discount_type:L.discount_type||"",discount_value:parseFloat(L.discount_value)||0,discount_amount:parseFloat(L.discount_amount)||0,currency:L.currency||"PHP",items:Array.isArray(L.items)?L.items.map(Qe=>({id:Qe.id,item_type:Qe.item_type||"Product",name:Qe.name||"",description:Qe.description||"",sku:Qe.sku||"",variant:Qe.variant||"",unit:Qe.unit||"pcs",quantity:parseFloat(Qe.quantity)||1,unit_price:parseFloat(Qe.unit_price)||0,discount_percent:parseFloat(Qe.discount_percent)||0,discount_amount:parseFloat(Qe.discount_amount)||0,line_total:parseFloat(Qe.line_total)||0,sort_order:Qe.sort_order||0})):[]}),E(!0),Z(L.id),k(!0)},G=L=>{if(L.target.checked){const U=Ie.map(xe=>xe.id);ae(U)}else ae([])},K=L=>{ae(U=>U.includes(L)?U.filter(xe=>xe!==L):[...U,L])},ne=L=>{if(!L)return;const U=L.quote_id||"this quote";F({title:"Delete Quote",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:U}),"? This action cannot be undone."]}),confirmLabel:"Delete Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:L.id,name:U}})},J=async()=>{he.length!==0&&F({title:"Delete Quotes",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:he.length})," selected quotes? This action cannot be undone."]}),confirmLabel:`Delete ${he.length} Quote(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",quote_ids:he}})},[Ce,me]=h.useState(!1),V=L=>{if(L.preventDefault(),me(!0),!v){q.error("Unable to determine current user. Please log in again.");return}if(!R.deal_id){q.error("Deal is required.");return}if(!R.assigned_to){q.error("Assigned To is required.");return}const xe=He(R.deal_id),De=R.items.map((ht,Ut)=>({item_type:ht.item_type||"Product",name:ht.name,description:ht.description||null,sku:ht.sku||null,variant:ht.variant||null,unit:ht.unit||null,quantity:parseFloat(ht.quantity)||1,unit_price:parseFloat(ht.unit_price)||0,discount_percent:parseFloat(ht.discount_percent)||0,sort_order:ht.sort_order??Ut})),ie={deal_id:Number(R.deal_id),account_id:xe.accountId?Number(xe.accountId):null,contact_id:xe.contactId?Number(xe.contactId):null,subtotal:parseFloat(R.subtotal)||0,tax_rate:parseFloat(R.tax_rate)||0,tax_amount:parseFloat(R.tax_amount)||0,discount_type:R.discount_type||null,discount_value:parseFloat(R.discount_value)||0,discount_amount:parseFloat(R.discount_amount)||0,total_amount:parseFloat(R.total_amount)||0,currency:R.currency||"PHP",presented_date:R.presented_date||null,validity_days:R.validity_days===""?null:Number(R.validity_days),status:R.status||"Draft",assigned_to:R.assigned_to?Number(R.assigned_to):null,notes:R.notes?.trim()||null,items:De},Pe=_&&W?"update":"create",Qe=Te(R.deal_id),vt=Pe==="create"?{...ie,created_by_id:Number(v)}:ie;F({title:Pe==="create"?"Confirm New Quote":"Confirm Update",message:Pe==="create"?n.jsxs("span",{children:["Are you sure you want to create a quote for"," ",n.jsx("span",{className:"font-semibold",children:Qe}),"?"]}):n.jsxs("span",{children:["Save changes to"," ",n.jsx("span",{className:"font-semibold",children:Qe}),"?"]}),confirmLabel:Pe==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:Pe,payload:vt,targetId:W||null,name:Qe}})},_e=async()=>{if(!z?.action){F(null);return}const{action:L}=z,{type:U,payload:xe,targetId:De,name:ie}=L;M(!0);try{if(U==="create")I(!0),await ce.post("/quotes/admin",xe),q.success("Quote created successfully."),Ee(),await Se();else if(U==="update"){if(!De)throw new Error("Missing quote identifier for update.");I(!0),await ce.put(`/quotes/admin/${De}`,xe),q.success("Quote updated successfully."),Ee(),await Se(),N?.id===De&&S(null)}else if(U==="delete"){if(!De)throw new Error("Missing quote identifier for deletion.");const Pe=N?.id;ye(De),await ce.delete(`/quotes/admin/${De}`),q.success(`Quote "${ie}" deleted successfully.`),await Se(Pe&&Pe!==De?Pe:null),Pe===De&&S(null)}else U==="bulk-delete"&&(await ce.post("/quotes/admin/bulk-delete",{quote_ids:he}),q.success(`Successfully deleted ${he.length} quotes`),ae([]),await Se())}catch(Pe){console.error(Pe);const Qe=U==="create"?"Failed to create quote. Please review the details and try again.":U==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";q.error(Qe),(U==="create"||U==="update")&&I(!1),U==="delete"&&ye(null)}finally{(U==="create"||U==="update")&&I(!1),U==="delete"&&ye(null),M(!1),F(null)}},Ue=()=>{D||F(null)},rt=h.useCallback((L,U)=>{const xe=L?.deal_id??L?.deal?.id??"",De=xe?Number(xe):null,ie=De?He(String(De)):{accountId:"",contactId:""},Pe=L?.account_id??L?.account?.id??ie.accountId??null,Qe=L?.contact_id??L?.contact?.id??ie.contactId??null,vt=L?.total_amount??0,ht=L?.assigned_to??L?.assigned_user?.id??null;return{deal_id:De,account_id:Pe!=null&&String(Pe).trim()!==""?Number(Pe):null,contact_id:Qe!=null&&String(Qe).trim()!==""?Number(Qe):null,total_amount:Number(vt),presented_date:L?.presented_date||null,validity_days:L?.validity_days===""||L?.validity_days===void 0||L?.validity_days===null?null:Number(L.validity_days),status:U,assigned_to:ht!=null&&String(ht).trim()!==""?Number(ht):null,notes:L?.notes?.trim()||null}},[He]),bt=h.useCallback(async()=>{if(!N?.id)return;const L=Ti(Me),U=[L,L.toLowerCase()],xe=async De=>ce.patch(`/quotes/admin/${N.id}/status`,{status:De},{headers:{"Content-Type":"application/json"}});try{let De=!1;for(const ie of U)try{await xe(ie),De=!0;break}catch(Pe){if(Pe?.response?.status===422)continue;throw Pe}if(!De){const ie=rt(N,L);if(!ie.deal_id){q.error("Cannot update status: missing deal_id on selected quote.");return}if(!ie.total_amount||ie.total_amount<=0){q.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await ce.put(`/quotes/admin/${N.id}`,ie)}q.success(`Quote status updated to ${L}`),S(null),pe("Overview"),await Se()}catch(De){console.error(De);const ie=De?.response?.data?.message||(De?.response?.data?.errors?Object.values(De.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";q.error(ie)}},[N,Me,Se,rt]),gt=[{label:"Filter by Status",value:"Filter by Status"},...vA.map(L=>({label:L.label,value:L.value}))],_t=z?.action?.type==="delete"?z.action.targetId:null,Wt=N&&(H===N.id||_t===N.id),un=N&&H===N.id,le=N?n.jsx("div",{id:"quoteModalBackdrop",onClick:st,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:L=>L.stopPropagation(),children:[n.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:n.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),n.jsx("button",{onClick:Ze,className:"text-gray-500 hover:text-white transition cursor-pointer",children:n.jsx(Vn,{size:25})})]})}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:Ye(N)}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${jUe(N.status)}`,children:NA(N.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>$(N),disabled:D||z?.action?.type==="update"&&z.action.targetId===N.id,children:[n.jsx(ia,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>ne(N),disabled:!!Wt,children:un?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(zt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-1 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(L=>n.jsx("button",{onClick:()=>pe(L),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${$e===L?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:L},L))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[$e==="Overview"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Quote ID:"}),n.jsx("p",{children:X7(N.quote_id)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Deal:"}),n.jsx("p",{children:Ye(N)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Account:"}),n.jsx("p",{children:B(N)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact:"}),n.jsx("p",{children:fe(N)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Total Amount:"}),n.jsx("p",{children:N.total_amount?`${s}${Number(N.total_amount).toLocaleString()}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Presented Date:"}),n.jsx("p",{children:gg(N.presented_date)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Validity Days:"}),n.jsx("p",{children:N.validity_days!==null&&N.validity_days!==void 0?N.validity_days:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),n.jsx("p",{children:gg(jA(N.presented_date,N.validity_days))||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:NA(N.status)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:N.assigned_user?`${N.assigned_user.first_name} ${N.assigned_user.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:N.creator?`${N.creator.first_name} ${N.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:lb(N.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:lb(N.updated_at)||"N/A"})]})]}),N.items&&N.items.length>0&&n.jsx("div",{className:"mt-6",children:n.jsx(nd,{items:N.items,onChange:()=>{},currencySymbol:s,readOnly:!0,taxRate:parseFloat(N.tax_rate)||0,discountType:N.discount_type,discountValue:parseFloat(N.discount_value)||0})})]}),$e==="Notes"&&n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),n.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:N.notes||"No notes available."})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(At,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Quotes"}}}),children:[n.jsx(Ct,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Gt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:Me||Ti(N.status)||"Draft",onChange:L=>Le(L.target.value),children:vA.map(L=>n.jsx("option",{value:L.value,children:L.label},L.value))}),n.jsx("button",{onClick:bt,disabled:Ti(Me)===Ti(N.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Ti(Me)===Ti(N.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,it=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[l&&n.jsx(Rt,{message:"Loading quotes..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(xn,{className:"mr-2 text-blue-600"})," Quotes"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto gap-2",children:n.jsxs("button",{onClick:()=>{Ke(),me(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(dn,{className:"mr-2"})," Add Quote"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search quotes",value:Y,onChange:L=>oe(L.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:re,onChange:L=>ee(L.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:gt.map(L=>n.jsx("option",{value:L.value,children:L.label},L.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:Ie.length>0&&he.length===Ie.length,onChange:G,className:"cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),n.jsx("th",{className:"py-3 px-4",children:"Deal"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Expiry Date"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:he.length>0?n.jsx("button",{onClick:J,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${he.length} selected items`,children:n.jsx(zt,{size:18})}):""})]})}),n.jsx("tbody",{children:l?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"Loading quotes..."})}):Re.length>0?Ie.map(L=>{const U=jA(L.presented_date,L.validity_days);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>Fe(L),children:[n.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:xe=>xe.stopPropagation(),children:n.jsx("input",{type:"checkbox",checked:he.includes(L.id),onChange:()=>K(L.id),className:"cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:X7(L.quote_id)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:Ye(L)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-sm text-gray-700 break-words",children:B(L)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:fe(L)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-700",children:L.total_amount?`${s}${Number(L.total_amount).toLocaleString()}`:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${NUe(L.status)}`,children:NA(L.status)})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{children:L.assigned_user?`${L.assigned_user.first_name} ${L.assigned_user.last_name}`:"Unassigned"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-500 text-xs",children:gg(U)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top text-center w-24"})]},L.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"No quotes found."})})})]})}),n.jsx(en,{className:"mt-4",totalItems:Re.length,pageSize:je,currentPage:te,onPrev:ue,onNext:Ne,onPageSizeChange:L=>{Oe(L),ve(1)},pageSizeOptions:[10,20,30,40,50],label:"quotes"})]}),Et=T?n.jsx("div",{id:"modalBackdrop",onClick:Je,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:L=>L.stopPropagation(),children:[n.jsx("button",{onClick:()=>{Ee(),me(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:A||D,children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:_?"Edit Quote":"Add New Quote"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:V,children:[n.jsx(e8,{label:"Deal",name:"deal_id",value:R.deal_id,onChange:L=>{const{accountId:U,contactId:xe}=He(L);Q(De=>({...De,deal_id:L,account_id:U,contact_id:xe}))},items:Array.isArray(c)?c:[],getLabel:L=>`${K7(L?.deal_id??"")} ${L?.name??""}`.trim(),placeholder:"Search deal...",required:!0,isSubmitted:Ce,disabled:A||c.length===0,className:"md:col-span-2"}),n.jsx(J7,{label:"Account",value:Be(R.account_id)||(R.account_id?`Account #${R.account_id}`:""),disabled:!0}),n.jsx(J7,{label:"Contact",value:qe(R.contact_id)||(R.contact_id?`Contact #${R.contact_id}`:""),disabled:!0}),n.jsx("div",{className:"md:col-span-2 mt-2",children:n.jsx(nd,{items:R.items,onChange:L=>Q(U=>({...U,items:L})),currencySymbol:s,readOnly:A,taxRate:R.tax_rate,discountType:R.discount_type,discountValue:R.discount_value,onTotalsChange:L=>{Q(U=>({...U,subtotal:L.subtotal,discount_amount:L.discount_amount,tax_amount:L.tax_amount,total_amount:L.total_amount}))}})}),n.jsxs("div",{className:"md:col-span-2 mt-2 p-4 bg-gray-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Pricing Settings"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Discount Type"}),n.jsxs("select",{value:R.discount_type||"",onChange:L=>Q(U=>({...U,discount_type:L.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",disabled:A,children:[n.jsx("option",{value:"",children:"No Discount"}),n.jsx("option",{value:"percentage",children:"Percentage (%)"}),n.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-600 text-xs mb-1",children:["Discount ",R.discount_type==="percentage"?"%":"Amount"]}),n.jsx("input",{type:"number",value:R.discount_value||"",onChange:L=>Q(U=>({...U,discount_value:L.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:R.discount_type==="percentage"?"100":void 0,step:"0.01",disabled:A||!R.discount_type})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Tax Rate (%)"}),n.jsx("input",{type:"number",value:R.tax_rate||"",onChange:L=>Q(U=>({...U,tax_rate:L.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:"100",step:"0.01",disabled:A})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Total Amount"}),n.jsxs("div",{className:"w-full bg-gray-100 border border-gray-300 rounded-md px-2 py-1.5 text-sm font-medium",children:[s,parseFloat(R.total_amount||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),n.jsx(Z7,{label:"Presented Date",name:"presented_date",type:"date",value:R.presented_date,onChange:be,disabled:A}),n.jsx(Z7,{label:"Validity Days",name:"validity_days",type:"number",value:R.validity_days,onChange:be,placeholder:"30",disabled:A}),n.jsx(e8,{label:"Assigned To",value:R.assigned_to||"",onChange:L=>Q(U=>({...U,assigned_to:L})),items:Array.isArray(y)?y:[],getLabel:L=>{const U=`${L?.first_name??""} ${L?.last_name??""}`.trim();return U?L?.role?`${U} (${L.role})`:U:L?.email||""},placeholder:"Search assignee...",required:!0,isSubmitted:Ce,disabled:A}),n.jsx(TUe,{label:"Status",name:"status",value:R.status,onChange:be,options:vA,required:!0,disabled:A,className:"md:col-span-2"}),n.jsx(LUe,{label:"Notes",name:"notes",value:R.notes,onChange:be,placeholder:"Additional details...",rows:3,disabled:A,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{Ee(),me(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:A||D,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:A||D,children:A?"Saving...":_?"Update Quote":"Save Quote"})]})]})]})}):null,Nt=z?n.jsx(PUe,{open:!0,title:z.title,message:z.message,confirmLabel:z.confirmLabel,cancelLabel:z.cancelLabel,variant:z.variant,onConfirm:_e,onCancel:Ue,loading:D}):null;return n.jsxs(n.Fragment,{children:[N?le:it,Et,Nt]})}function Z7({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function J7({label:e,value:t,className:a="",disabled:s=!0}){return n.jsxs("div",{className:a,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("input",{type:"text",value:t??"",disabled:s,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function TUe({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:l=!1,className:o=""}){const c=a!=null?String(a):"",u=r.some(f=>String(f.value)===c)?c:"";return n.jsxs("div",{className:o,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:u,onChange:s,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(f=>n.jsx("option",{value:String(f.value??""),children:f.label},f.value??f.label))})]})}function e8({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:o,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(kUe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:l,hasError:u})]})}function kUe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,hasError:o=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(v=>String(v.id)===String(t)),y=x?s(x):"",w=h.useMemo(()=>{const v=u.trim().toLowerCase();return(v?e.filter(N=>(s(N)||"").toLowerCase().includes(v)):e).slice(0,l)},[e,u,s,l]);return h.useEffect(()=>{const v=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:y,placeholder:r,onFocus:()=>!i&&d(!0),onChange:v=>{f(v.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${o?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:w.length>0?w.map(v=>{const C=String(v.id),N=s(v),S=String(t)===C;return n.jsx("button",{type:"button",onClick:()=>{a(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:N||"--"},C)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function LUe({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:l=!1,className:o=""}){return n.jsxs("div",{className:o,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function PUe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),n.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}function DUe(){const{userRole:e}=Bs();return n.jsx(Dj,{currentUserRole:e,currentUserId:null})}function OUe(){h.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,t]=h.useState(null),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Actions"),[l,o]=h.useState(1),[c,d]=h.useState(10),u=async()=>{try{const N=await ce.get("/logs/read-all");t(N.data)}catch(N){console.error("Error fetching audit logs:",N)}};h.useEffect(()=>{u()},[]);const f=h.useMemo(()=>{if(!Array.isArray(e))return[];const N=a.trim().toLowerCase(),S=r?.toUpperCase?.()||"ALL";return e.filter(k=>{const _=k.timestamp?new Date(k.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",E=`${k.entity_type||""} ${k.entity_name||k.entity_details?.name||k.entity_details?.title||k.entity_id||""}`,A=`${k.logger?.first_name||""} ${k.logger?.last_name||""}`,I=[_,A,k.action,k.entity_type,E,k.description],z=N===""||I.some(D=>D==null?!1:D.toString().toLowerCase().includes(N)),F=S==="FILTER BY ACTIONS"||(k.action||"").toUpperCase()===S;return z&&F}).sort((k,_)=>{const E=k.timestamp?new Date(k.timestamp).getTime():0;return(_.timestamp?new Date(_.timestamp).getTime():0)-E})},[e,a,r]),p=Math.max(1,Math.ceil(f.length/c)||1);h.useEffect(()=>{o(1)},[a,r]),h.useEffect(()=>{o(N=>{const S=Math.max(1,Math.ceil(f.length/c)||1);return N>S?S:N})},[f.length]);const x=h.useMemo(()=>{const N=(l-1)*c;return f.slice(N,N+c)},[f,l]);f.length===0||(l-1)*c+1,Math.min(l*c,f.length);const y=()=>o(N=>Math.max(N-1,1)),w=()=>o(N=>Math.min(N+1,p)),v=()=>{if(!f.length){Px.error("No logs to export!");return}const N=["Timestamp","User","Action","Resource","Details"],S=f.map(A=>[new Date(A.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${A.logger?.first_name||""} ${A.logger?.last_name||""}`.trim(),A.action,`${A.entity_type}: ${A.entity_id}`,A.description||""]),T=[N.join(","),...S.map(A=>A.map(I=>`"${String(I).replace(/"/g,'""')}"`).join(","))].join(`
`),k=new Blob([T],{type:"text/csv;charset=utf-8;"}),_=URL.createObjectURL(k),E=document.createElement("a");E.href=_,E.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL(_)},C=N=>{switch((N||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&n.jsx(Rt,{message:"Loading audit logs..."}),n.jsx(Lx,{toastOptions:{duration:1e3}}),n.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[n.jsx(Ct,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),n.jsxs("p",{className:"text-sm text-blue-700",children:[n.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ws,{className:"text-blue-600",size:20}),n.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:v,children:[n.jsx($o,{className:"mr-2"}),"Export Logs"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[n.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search audit logs",value:a,onChange:N=>s(N.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:r,onChange:N=>i(N.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),n.jsx("option",{value:"CREATE",children:"CREATE"}),n.jsx("option",{value:"DELETE",children:"DELETE"}),n.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),n.jsx("th",{className:"py-3 px-4",children:"User"}),n.jsx("th",{className:"py-3 px-4",children:"Action"}),n.jsx("th",{className:"py-3 px-4",children:"Resource"}),n.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),n.jsx("tbody",{children:Array.isArray(f)&&f.length>0?x.map((N,S)=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(N.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:N.name}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${C(N.action)}`,children:N.action})}),n.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[N.entity_type,": ",N.entity_id]}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:N.description})]},S)):n.jsx("tr",{children:n.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),n.jsx(en,{className:"mt-4",totalItems:f.length,pageSize:c,currentPage:l,onPrev:y,onNext:w,onPageSizeChange:N=>{d(N),o(1)},pageSizeOptions:[10,20,30,40,50],label:"logs"})]})}const MUe=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"}],IUe=e=>e?String(e).toUpperCase():"",ef=e=>{const t=IUe(e);return t==="PLANNED"||t==="PENDING"?"PLANNED":t==="HELD"||t==="COMPLETED"?"HELD":t==="NOT HELD"||t==="NOT_HELD"||t==="CANCELLED"?"NOT_HELD":"PLANNED"},CA=e=>{const t=ef(e);return t==="PLANNED"?"PLANNED":t==="HELD"?"HELD":t==="NOT_HELD"?"NOT HELD":"--"},t8=e=>{switch(ef(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},n8=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function $Ue(){const[e,t]=h.useState(!1),[a,s]=h.useState(null),[r,i]=h.useState(null),[l,o]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(null),[y,w]=h.useState(!1),[v,C]=h.useState(null),[N,S]=h.useState(!1),[T,k]=h.useState(!1),[_,E]=h.useState("PLANNED"),[A,I]=h.useState(!1),[z,F]=h.useState(!1),[D,M]=h.useState(null);Ds();const W=yt(),Z=Yt(),Q={subject:"",call_time:(()=>{const Ie=new Date,ue=Ie.getFullYear(),Ne=String(Ie.getMonth()+1).padStart(2,"0"),Fe=String(Ie.getDate()).padStart(2,"0");return`${ue}-${Ne}-${Fe}T08:00`})(),duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[Y,oe]=h.useState(Q);h.useEffect(()=>{const Ie=Z.state,ue=Ie?.callID;if(ue&&!Ie?.openCallModal){M(ue),W(Z.pathname,{replace:!0,state:{}});return}!Ie?.openCallModal||!Ie?.initialCallData||Ie.initialCallData.relatedType1==="Lead"&&Array.isArray(l)&&l.length===0||Ie.initialCallData.relatedType1==="Account"&&(!Array.isArray(l)||l.length===0)||(t(!0),oe(Ne=>({...Ne,...Ie.initialCallData,relatedTo1:Ie.initialCallData.relatedTo1?String(Ie.initialCallData.relatedTo1):"",relatedTo2:Ie.initialCallData.relatedTo2?String(Ie.initialCallData.relatedTo2):""})),W(Z.pathname,{replace:!0,state:{}}))},[Z.state,l]),h.useEffect(()=>{if(D&&u.length>0&&!z){const Ie=u.find(ue=>ue.id===D);Ie?s(Ie):q.error("Call not found."),M(null)}},[D,u,z]);const re=async()=>{try{F(!0);const Ie=await ce.get("/calls/admin/fetch-all"),Ne=[...Array.isArray(Ie.data)?Ie.data:[]].sort((Fe,Ze)=>{const st=Fe?.created_at?new Date(Fe.created_at):0;return(Ze?.created_at?new Date(Ze.created_at):0)-st});f(Ne)}catch(Ie){console.error("Error fetching calls:",Ie),q.error("Failed to load calls")}finally{F(!1)}},ee=async()=>{try{const Ie=await ce.get("/users/all");x(Ie.data)}catch(Ie){console.error("Error fetching users: ",Ie)}};h.useEffect(()=>{ee(),re()},[]);const H=[],ye="",te="Filter by Status",ve="Filter by Users",[je,Oe]=h.useState(1),[$e,pe]=h.useState(10),Me=u,Le=u,he=u.length,ae=u.filter(Ie=>ef(Ie.status)==="PLANNED").length,Ae=u.filter(Ie=>ef(Ie.status)==="HELD").length,ge=u.filter(Ie=>ef(Ie.status)==="NOT_HELD").length,Be=[{title:"Total",value:he,icon:Ls,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:ae,icon:zs,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:Ae,icon:ba,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:ge,icon:Ps,color:"text-gray-600",bgColor:"bg-gray-100"}],[qe,Te]=h.useState("Overview"),He=Ie=>{const{name:ue,value:Ne}=Ie.target;oe(Fe=>{const Ze={...Fe,[ue]:Ne};return ue==="relatedType1"&&(Ze.relatedTo1="",Ne==="Lead"?(Ze.relatedType2=null,Ze.relatedTo2=null,d([])):Ne==="Account"&&(Ze.relatedType2="Contact")),ue==="relatedType2"&&(Ze.relatedTo2=""),Ze})};h.useEffect(()=>{const Ie=async()=>{try{o([]);let ue;Y.relatedType1==="Lead"?ue=await ce.get("/leads/admin/getLeads"):Y.relatedType1==="Account"&&(ue=await ce.get("/accounts/admin/fetch-all"));let Ne=[];if(ue&&Array.isArray(ue.data)?Ne=ue.data:Ne=[],y&&Y.relatedTo1)try{let Fe;Y.relatedType1==="Lead"?Fe=await ce.get(`/leads/get/${Y.relatedTo1}`):Y.relatedType1==="Account"&&(Fe=await ce.get(`/accounts/get/${Y.relatedTo1}`)),Fe&&Fe.data&&(Ne.some(st=>String(st.id)===String(Y.relatedTo1))||(Ne=[Fe.data,...Ne]))}catch(Fe){console.error("Error fetching specific related item:",Fe)}o(Ne)}catch(ue){console.error("Error fetching data:",ue),o([])}};Y.relatedType1&&Ie()},[Y.relatedType1,y,Y.relatedTo1]),h.useEffect(()=>{const Ie=async()=>{try{d([]);let ue;if(Y.relatedType1==="Account"&&Y.relatedTo1)Y.relatedType2==="Contact"?ue=await ce.get(`/contacts/from-acc/${Y.relatedTo1}`):Y.relatedType2==="Deal"&&(ue=await ce.get(`/deals/from-acc/${Y.relatedTo1}`));else{d([]);return}ue&&Array.isArray(ue.data)?d(ue.data):d([])}catch(ue){console.error("Error fetching data:",ue),d([])}};Y.relatedType2&&Ie()},[Y.relatedType2,Y.relatedTo1,Y.relatedType1]);const[Ye,B]=h.useState(!1),fe=Ie=>{Ie.preventDefault(),B(!0);const ue=Y.subject;if(!ue||ue.trim()===""){q.error("Subject is required.");return}if(!Y.relatedTo1){q.error(`Please select a ${Y.relatedType1||"Lead/Account"}.`);return}if(!Y.assigned_to){q.error("Subject is required.");return}const Fe={...Y,duration_minutes:Y.duration_minutes?parseInt(Y.duration_minutes,10):null,relatedTo1:Y.relatedTo1?parseInt(Y.relatedTo1,10):null,relatedTo2:Y.relatedType1==="Lead"?null:Y.relatedTo2?parseInt(Y.relatedTo2,10):null,relatedType2:Y.relatedType1==="Lead"?null:Y.relatedType2,assigned_to:Y.assigned_to?parseInt(Y.assigned_to,10):null},Ze=y&&v?"update":"create",st=(Y.subject||"").trim()||"Untitled Call";i({title:Ze==="create"?"Confirm New Call":"Confirm Update",message:Ze==="create"?`Create "${st}"?`:`Save changes to "${st}"?`,confirmLabel:Ze==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:Ze,payload:Fe,targetId:v||null,name:st}})},Se=Ie=>s(Ie),de=()=>{t(!1),w(!1),C(null)},ke=async()=>{if(!r?.action){i(null);return}const{action:Ie}=r,{type:ue,payload:Ne,targetId:Fe,name:Ze}=Ie;k(!0);try{if(ue==="create")S(!0),await ce.post("/calls/create",Ne),q.success(`Call "${Ze}" created successfully.`),t(!1),oe(Q),w(!1),C(null),await re();else if(ue==="update"){if(!Fe)throw new Error("Missing call identifier for update.");S(!0),await ce.put(`/calls/${Fe}`,Ne),q.success(`Call "${Ze}" updated successfully.`),t(!1),oe(Q),w(!1),C(null),await re()}else if(ue==="delete"){if(!Fe)throw new Error("Missing call identifier for deletion.");await ce.delete(`/calls/${Fe}`),q.success(`Call "${Ze}" deleted successfully.`),a?.id===Fe&&s(null),await re()}}catch(st){const Ee=ue==="create"?"Failed to create call. Please review the details and try again.":ue==="update"?"Failed to update call. Please review the details and try again.":"Failed to delete call. Please try again.",Je=st?.response?.data?.detail||Ee;q.error(Je)}finally{(ue==="create"||ue==="update")&&S(!1),k(!1),i(null)}},se=()=>{T||i(null)},We=async()=>{if(a?.id)try{I(!0),await ce.put(`/calls/${a.id}`,{status:_}),q.success(`Status updated to ${CA(_)}`),f(Ie=>Array.isArray(Ie)?Ie.map(ue=>ue.id===a.id?{...ue,status:_}:ue):Ie),s(null)}catch(Ie){const ue=Ie.response?.data?.detail||"Failed to update status.";q.error(ue)}finally{I(!1)}};h.useEffect(()=>{a&&E(ef(a.status))},[a]);const Re=a?n.jsxs("div",{id:"callModalBackdrop",onClick:Ie=>Ie.target.id==="callModalBackdrop"&&s(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[z&&n.jsx(Rt,{message:"Loading call details..."}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),n.jsx("button",{onClick:()=>s(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:n.jsx(Vn,{size:25})})]}),n.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:a.subject}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${t8(a.status)}`,children:CA(a.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const Ie=st=>{if(!st)return"";const Ee=new Date(st),Je=Ee.getFullYear(),be=String(Ee.getMonth()+1).padStart(2,"0"),Ke=String(Ee.getDate()).padStart(2,"0"),$=String(Ee.getHours()).padStart(2,"0"),G=String(Ee.getMinutes()).padStart(2,"0");return`${Je}-${be}-${Ke}T${$}:${G}`},ue=a.lead?"Lead":a.account?"Account":"Lead",Ne=a.lead?a.lead.id:a.account?a.account.id:null,Fe=ue==="Lead"?null:a.contact?"Contact":a.deal?"Deal":"Contact",Ze=ue==="Lead"?null:a.contact?a.contact.id:a.deal?a.deal.id:null;oe({subject:a.subject||"",call_time:Ie(a.call_time),duration_minutes:a.duration_minutes?String(a.duration_minutes):"",direction:a.direction||"Outgoing",status:a.status||"Planned",notes:a.notes||"",relatedType1:ue,relatedType2:Fe,relatedTo1:Ne?String(Ne):"",relatedTo2:Ze?String(Ze):"",assigned_to:a.call_assign_to?.id?String(a.call_assign_to.id):""}),w(!0),C(a.id),s(null),t(!0)},children:[n.jsx(ia,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>{const Ie=a.subject||"this call";i({title:"Delete Call",message:`Are you sure you want to permanently delete "${Ie}"? This action cannot be undone.`,confirmLabel:"Delete Call",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:a.id,name:Ie}})},children:[n.jsx(zt,{className:"mr-2"}),"Delete"]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(Ie=>n.jsx("button",{onClick:()=>Te(Ie),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${qe===Ie?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:Ie},Ie))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[qe==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsx(ao,{label:"Call Time",value:n8(a.call_time)}),n.jsx(ao,{label:"Duration",value:a.duration_minutes?`${a.duration_minutes} min`:null}),n.jsx(ao,{label:"Direction",value:a.direction||"--"}),n.jsx(ao,{label:"Assigned To",value:`${a.call_assign_to.first_name} ${a.call_assign_to.last_name}`}),a.lead&&n.jsx(ao,{label:"Lead",value:a.lead.title}),a.account&&n.jsx(ao,{label:"Account",value:a.account.name}),a.contact&&n.jsx(ao,{label:"Contact",value:`${a.contact.first_name} ${a.contact.last_name}`}),a.deal&&n.jsx(ao,{label:"Deal",value:a.deal.name}),n.jsx(ao,{label:"Created At",value:n8(a.created_at)})]})}),qe==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Call Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:a.notes||"No notes available."})]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:_,onChange:Ie=>E(Ie.target.value),children:[n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),n.jsx("button",{onClick:We,disabled:A,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:A?"Updating...":"Update"})]})]})]})]})]}):null,ct=e?n.jsx("div",{id:"modalBackdrop",onClick:Ie=>Ie.target.id==="modalBackdrop"&&de(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[n.jsx("button",{onClick:()=>{de(),B(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:y?"Edit Call":"Add New Call"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:fe,noValidate:!0,children:[n.jsx(zUe,{label:"Subject",className:"md:col-span-2",name:"subject",value:Y.subject,onChange:He,isSubmitted:Ye,required:!0}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("div",{className:"relative w-25",children:[n.jsxs("select",{name:"relatedType1",onChange:He,value:Y.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:N,children:[n.jsx("option",{value:"Lead",children:"Lead"}),n.jsx("option",{value:"Account",children:"Account"})]}),n.jsx("span",{className:"absolute left-10 md:pl-6 pl-6 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),n.jsx(SA,{items:Array.isArray(l)?l:[],value:Y.relatedTo1??"",placeholder:`Search ${Y.relatedType1||"here"}...`,getLabel:Ie=>Y.relatedType1==="Lead"?Ie.title:Ie.name??"",onChange:Ie=>oe(ue=>({...ue,relatedTo1:Ie})),required:!0,isSubmitted:Ye,disabled:N})]}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("select",{name:"relatedType2",onChange:He,value:Y.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:Y.relatedType1==="Lead"||N,children:[n.jsx("option",{value:"Contact",children:"Contact"}),n.jsx("option",{value:"Deal",children:"Deal"})]}),n.jsx(SA,{disabled:Y.relatedType1==="Lead"||N,items:Array.isArray(c)?c:[],value:Y.relatedTo2??"",placeholder:Y.relatedType1==="Lead"?"":Array.isArray(c)&&c.length>0?`Search ${Y.relatedType2||"Contact"}...`:`No ${Y.relatedType2||""} data found`,getLabel:Ie=>Y.relatedType2==="Contact"?`${Ie.first_name??""} ${Ie.last_name??""}`.trim():Ie.name??"",onChange:Ie=>oe(ue=>({...ue,relatedTo2:Ie}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),n.jsx("input",{type:"datetime-local",value:Y.call_time,onChange:He,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),n.jsxs("div",{className:"w-full",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),n.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[n.jsx("input",{type:"tel",value:Y.duration_minutes,onChange:He,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),n.jsx("p",{children:"minutes"})]})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-500 font-semibold",children:"*"})]}),n.jsx(SA,{items:Array.isArray(p)?p:[],value:Y.assigned_to??"",placeholder:"Search an account...",getLabel:Ie=>`${Ie.first_name} ${Ie.last_name}`,onChange:Ie=>oe(ue=>({...ue,assigned_to:Ie})),required:!0,isSubmitted:Ye})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),n.jsxs("select",{name:"direction",onChange:He,value:Y.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Incoming",children:"Incoming"}),n.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),n.jsxs("select",{name:"status",onChange:He,value:Y.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Planned",children:"Planned"}),n.jsx("option",{value:"Held",children:"Held"}),n.jsx("option",{value:"Not held",children:"Not held"})]})]}),n.jsx(FUe,{className:"col-span-2",label:"Notes",value:Y.notes,onChange:He,name:"notes"}),n.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{de(),B(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:N,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:N?"Saving...":y?"Update Call":"Save Call"})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Ls,{className:"mr-2 text-blue-600"})," Calls"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{oe(Q),w(!1),C(null),t(!0),B(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(dn,{className:"mr-2"})," Add Call"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Be.map(Ie=>n.jsx(RUe,{...Ie},Ie.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[n.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",defaultValue:ye})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{defaultValue:te,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),MUe.map(Ie=>n.jsx("option",{value:Ie.value,children:Ie.label},Ie.value))]}),n.jsxs("select",{defaultValue:ve,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),H.map(Ie=>n.jsx("option",{value:Ie.name,children:Ie.name},Ie.id))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Call Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:z?n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"py-10",children:n.jsx(Rt,{message:"Loading calls..."})})}):Le.length>0?Le.map(Ie=>n.jsxs("tr",{onClick:()=>Se(Ie),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:Ie.subject||"--"}),n.jsxs("td",{className:"py-3 px-4",children:[Ie.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Ie.lead.title}),Ie.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Ie.account.name}),Ie.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[Ie.contact.first_name," ",Ie.contact.last_name]}),Ie.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Ie.deal.name})]}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:Ie.call_time?new Date(Ie.call_time).toLocaleString():"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:Ie?.call_assign_to?`${Ie.call_assign_to.first_name} ${Ie.call_assign_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t8(Ie.status)}`,children:CA(Ie.status)})})]},Ie.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),n.jsx(en,{totalItems:Me.length,pageSize:$e,currentPage:je,onPrev:()=>Oe(Ie=>Math.max(1,Ie-1)),onNext:()=>Oe(Ie=>Ie+1),onPageSizeChange:Ie=>{pe(Ie),Oe(1)},pageSizeOptions:[10,20,30,40,50],label:"calls"})]}),Re,ct,r&&n.jsx(UUe,{open:!0,title:r.title,message:r.message,confirmLabel:r.confirmLabel,onConfirm:ke,onCancel:se,loading:T})]})}function RUe({icon:e,title:t,value:a,color:s,bgColor:r}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:22})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function zUe({label:e,name:t,value:a,onChange:s,placeholder:r="",type:i="text",required:l=!1,disabled:o=!1,isSubmitted:c=!1,className:d=""}){const u=c&&l&&!a;return n.jsxs("div",{className:d,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
        `})]})}function FUe(e){return n.jsxs("div",{className:e.className,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),n.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function ao({label:e,value:t}){return n.jsxs("p",{children:[n.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",n.jsx("br",{}),n.jsx("span",{className:"break-words",children:t||"--"})]})}function UUe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),n.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}function SA({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,required:o=!1,isSubmitted:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),y=e.find(N=>String(N.id)===String(t)),w=y?s(y):"",v=o&&c&&!t,C=h.useMemo(()=>{const N=f.trim().toLowerCase();return(N?e.filter(T=>(s(T)||"").toLowerCase().includes(N)):e).slice(0,l)},[e,f,s,l]);return h.useEffect(()=>{const N=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:w,placeholder:r,onFocus:()=>!i&&u(!0),onChange:N=>{p(N.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${v?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:C.length>0?C.map(N=>{const S=String(N.id),T=s(N),k=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:T||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}const a8=["Not started","In progress","Deferred","Completed"],s8={NOT_STARTED:"Not started","NOT STARTED":"Not started","TO DO":"Not started",IN_PROGRESS:"In progress","IN PROGRESS":"In progress",COMPLETED:"Completed",DEFERRED:"Deferred","Not started":"Not started","In progress":"In progress",Completed:"Completed",Deferred:"Deferred","In Progress":"In progress","To Do":"Not started",Review:"Deferred"},$Z=e=>e&&(s8[e]||s8[String(e).toUpperCase()])||"Not started",BUe=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const a=t.getTimezoneOffset();return new Date(t.getTime()-a*60*1e3).toISOString().slice(0,16)},r8=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},HUe=e=>{const t=e.subject?.trim()??"",a=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),$Z(e.status);let r=null,i=null,l=null,o=null,c=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2?o=Number(e.relatedTo2):e.relatedType2==="Quote"&&e.relatedTo2&&(c=Number(e.relatedTo2)));const d=e.assignedTo?Number(e.assignedTo):null,u=l||o||i||r,f=l?"Contact":o?"Deal":i?"Account":r?"Lead":c?"Quote":null;return{title:t,description:a,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:d,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:l,deal_id:o,quote_id:c,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:u,related_type:f}},GUe=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",a=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",l=W=>{if(!W)return"";const Z=String(W).split("-");return Z.length===3?`${Z[0]}-${Z[2]}`:String(W)},o=()=>e.lead?.id||e.lead_id,c=()=>e.account?.id||e.account_id,d=()=>e.contact?.id||e.contact_id,u=()=>e.deal?.id||e.deal_id,f=()=>e.quote?.id||e.quote_id,p=()=>e.task_assign_to?.id||e.assigned_to,x=()=>e.lead?.title||e.lead_id,y=()=>e.account?.name||e.account_id,w=()=>i||e.contact_id,v=()=>e.deal?.name||e.deal_id,C=()=>l(e.quote?.quote_id)||e.id;let N="Lead",S="",T="",k="",_="Lead",E="",A="",I="";const z=c(),F=y(),D=o(),M=x();if(z){N="Account",_="Account",E=F,S=String(z);const W=d(),Z=u(),R=w(),Q=v(),Y=f(),oe=C();W?(T="Contact",A="Contact",I=R,k=String(W)):Z?(A="Deal",T="Deal",I=Q,k=String(Z)):Y&&(A="Quote",T="Quote",I=oe,k=String(Y))}else D?(_="Lead",E=M,N="Lead",S=String(D)):e.related_type==="Account"&&(N="Account",S=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:$Z(e.status),dueDate:s,dateAssigned:r,assignedToId:p()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:a,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:_,relatedTo1Text:E,relatedType2Text:A,relatedTo2Text:I,subject:e.title,relatedType1:N,relatedTo1:S,relatedType2:T,relatedTo2:k}};function WUe(){h.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=Kt(),[a,s]=h.useState("board"),[r,i]=h.useState(!1),[l,o]=h.useState(null),[c,d]=h.useState(!1),[u,f]=h.useState([]),[p,x]=h.useState(!0),[y,w]=h.useState(""),[v,C]=h.useState("Filter by Status"),[N,S]=h.useState("Filter by Priority"),[T,k]=h.useState([]),[_,E]=h.useState(1),[A,I]=h.useState(10),[z,F]=h.useState(null),[D,M]=h.useState(!1),[W,Z]=h.useState([]),R=yt(),Q=Yt(),[Y,oe]=h.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""}),[re,ee]=h.useState(null);h.useEffect(()=>{const B=Q.state?.openTaskModal,fe=Q.state?.initialTaskData,Se=Q.state?.taskID;B?(i(!0),fe&&oe(de=>({...de,...fe})),R(Q.pathname,{replace:!0,state:{}})):Se&&(ee(Se),R(Q.pathname,{replace:!0,state:{}}))},[Q,R]),h.useEffect(()=>{if(re&&u.length>0&&!p){const B=u.find(fe=>fe.id===re);B?ve(B,!0):q.error("Task not found."),ee(null)}},[re,u,p]);const H=async()=>{try{const B=await ce.get("/users/all");k(Array.isArray(B.data)?B.data:[])}catch(B){console.error("Failed to fetch users:",B),q.error("Failed to fetch users.")}},ye=async()=>{try{x(!0);const B=await ce.get("/tasks/all"),fe=Array.isArray(B.data)?B.data:[],Se=fe.map(GUe);console.log("Raw Tasks from API:",fe),console.log("Formatted Tasks:",Se),Se.sort((de,ke)=>{const se=de.createdAt?new Date(de.createdAt):0;return(ke.createdAt?new Date(ke.createdAt):0)-se}),console.log("Fetched Tasks:",Se),f(Se),a==="list"&&E(1)}catch(B){console.error("Failed to load tasks:",B),q.error("Failed to load tasks.")}finally{x(!1)}};h.useEffect(()=>{!t&&e&&(H(),ye())},[t,e]);const te=()=>{o(null),oe({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},ve=(B=null,fe=!1)=>{o(B),d(fe),B?oe({id:B.id,subject:B.title||"",description:B.description||"",priority:B.priority||"Normal",status:B.status||"Not started",dueDate:BUe(B.dueDate),assignedTo:B.assignedToId?String(B.assignedToId):"",notes:B.notes||"",relatedType1Text:B.relatedType1Text||"",relatedTo1Text:B.relatedTo1Text||"",relatedType2Text:B.relatedType2Text||"",relatedTo2Text:B.relatedTo2Text||"",relatedType1:B.relatedType1||"",relatedTo1:B.relatedTo1||"",relatedType2:B.relatedType2||"",relatedTo2:B.relatedTo2||""}):te(),i(!0)},je=()=>{i(!1),o(null),d(!1),te()},Oe=async B=>{const fe=HUe(B);console.log("Request Payload for Save:",fe);try{l&&!c?(await ce.put(`/tasks/${l.id}`,fe),q.success("Task updated successfully.")):(await ce.post("/tasks/create",fe),q.success("Task created successfully.")),i(!1),await ye()}catch(Se){console.error("Failed to save task:",Se);const de=Se.response?.data?.detail||"Failed to save task.";q.error(de)}},$e=B=>{B&&F({title:"Delete Task",message:n.jsxs(n.Fragment,{children:["Are you sure you want to delete ",n.jsx("span",{className:"font-semibold",children:B.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:B.id}})},pe=()=>{if(ge.every(B=>W.includes(B.id)))Z(W.filter(B=>!ge.map(fe=>fe.id).includes(B)));else{const B=ge.map(fe=>fe.id);Z([...new Set([...W,...B])])}},Me=B=>{Z(fe=>fe.includes(B)?fe.filter(Se=>Se!==B):[...fe,B])},Le=async()=>{W.length!==0&&F({title:"Delete Tasks",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:W.length})," selected tasks? This action cannot be undone."]}),confirmLabel:`Delete ${W.length} Task(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",task_ids:W}})},he=async()=>{if(!z?.action){F(null);return}const{action:B}=z;M(!0);try{B.type==="delete"?(await ce.delete(`/tasks/${B.targetId}`),q.success("Task deleted successfully."),await ye()):B.type==="bulk-delete"&&(await ce.delete("/tasks/admin/bulk-delete",{data:{task_ids:B.task_ids}}),q.success(`Successfully deleted ${B.task_ids.length} tasks`),Z([]),await ye())}catch(fe){console.error("Task action failed:",fe),q.error("Failed to delete task.")}finally{M(!1),F(null)}},ae=()=>{D||F(null)},Ae=h.useMemo(()=>{const B=y.trim().toLowerCase();return[...u].sort((Se,de)=>{const ke=Se.createdAt?new Date(Se.createdAt):0;return(de.createdAt?new Date(de.createdAt):0)-ke}).filter(Se=>{const de=B===""||Se.title?.toLowerCase().includes(B)||Se.description?.toLowerCase().includes(B)||Se.assignedToName?.toLowerCase().includes(B)||Se.createdBy?.toLowerCase().includes(B),ke=v==="Filter by Status"||Se.status===v,se=N==="Filter by Priority"||Se.priority===N;return de&&ke&&se})},[u,y,v,N]);h.useEffect(()=>{E(1)},[y,v,N,a,A]),h.useEffect(()=>{if(a==="list"){const B=Ae.length===0?1:Math.ceil(Ae.length/A);_>B&&E(B)}},[Ae.length,_,a,A]);const ge=h.useMemo(()=>{if(a==="board")return Ae;const B=(_-1)*A;return Ae.slice(B,B+A)},[Ae,_,a,A]),Be=h.useMemo(()=>{const B=new Date;return[{title:"To Do",value:u.filter(fe=>fe.status==="Not started").length,icon:zs,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:u.filter(fe=>fe.status==="In progress").length,icon:Ri,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:u.filter(fe=>fe.status==="Completed").length,icon:ba,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:u.filter(fe=>fe.dueDate&&new Date(fe.dueDate)<B&&fe.status!=="Completed").length,icon:Rf,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:u.filter(fe=>fe.priority==="High").length,icon:Ro,color:"text-orange-600",bgColor:"bg-orange-100"}]},[u]),qe=B=>B.dueDate&&new Date(B.dueDate)<new Date&&B.status!=="Completed",Te=B=>{switch(B.status){case"Not started":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Deferred":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},He=B=>{switch(B){case"Not started":return"bg-blue-100 text-blue-700";case"In progress":return"bg-purple-100 text-purple-700";case"Deferred":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},Ye=B=>{switch(B){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&n.jsx(Rt,{message:"Loading tasks..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(Ri,{className:"text-blue-600"})," Tasks Board"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:()=>ve(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[n.jsx(dn,{})," Create Task"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Be.map(B=>n.jsx(VUe,{...B},B.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search tasks",value:y,onChange:B=>w(B.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{value:v,onChange:B=>C(B.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Status"}),a8.map(B=>n.jsx("option",{children:B},B))]}),n.jsxs("select",{value:N,onChange:B=>S(B.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Priority"}),n.jsx("option",{children:"High"}),n.jsx("option",{children:"Normal"}),n.jsx("option",{children:"Low"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${a==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),n.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${a==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&a==="board"&&(Ae.length>0?n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:a8.map(B=>{const fe=ge.filter(Se=>Se.status===B);return n.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative rounded-md",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),n.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:B}),n.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:fe.length})]}),n.jsx("div",{className:`space-y-3 ${fe.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:fe.length>0?fe.map(Se=>n.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${Te(Se)}`,onClick:()=>ve(Se,!0),children:[n.jsxs("div",{className:"text-left flex-1",children:[n.jsx("p",{className:"font-medium text-gray-800 text-sm",children:Se.title}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",Se.priority]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",Se.assignedToName]}),n.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",n.jsx("span",{className:qe(Se)?"text-red-600":"text-gray-600",children:Se.dateAssigned?r8(Se.dateAssigned):""})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[n.jsx("button",{type:"button",onClick:de=>{de.stopPropagation(),ve(Se)},className:"text-blue-500 hover:text-blue-700",children:n.jsx(oa,{})}),n.jsx("button",{type:"button",onClick:de=>{de.stopPropagation(),$e(Se)},className:"text-red-500 hover:text-red-700",children:n.jsx(zt,{})})]})]},Se.id)):n.jsx("div",{className:"text-center py-10 text-gray-500",children:"No tasks"})})]},B)})}):n.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No tasks found."})),!p&&!t&&a==="list"&&n.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:ge.length>0&&ge.every(B=>W.includes(B.id)),onChange:pe})}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),n.jsx("th",{className:"py-3 px-4 font-medium text-center w-24",children:W.length>0?n.jsx("button",{onClick:Le,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${W.length} selected tasks`,children:n.jsx(zt,{size:18})}):""})]})}),n.jsx("tbody",{children:ge.length>0?ge.map(B=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",children:[n.jsx("td",{className:"py-3 px-4",onClick:fe=>fe.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:W.includes(B.id),onChange:()=>Me(B.id)})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",onClick:()=>ve(B,!0),children:B.title}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>ve(B,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${He(B.status||"Not started")}`,children:B.status||"Not started"})}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>ve(B,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Ye(B.priority||"Low")}`,children:B.priority||"Low"})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",onClick:()=>ve(B,!0),children:B.assignedToName||"Unassigned"}),n.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${qe(B)?"text-red-600 font-medium":""}`,onClick:()=>ve(B,!0),children:B.dateAssigned?r8(B.dateAssigned):""}),n.jsx("td",{})]},B.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No tasks found."})})})]})})}),!p&&!t&&a==="list"&&n.jsx(en,{className:"mt-6",totalItems:Ae.length,pageSize:A,currentPage:Ae.length===0?0:_,onPrev:()=>E(B=>Math.max(B-1,1)),onNext:()=>E(B=>Math.min(B+1,Math.max(1,Math.ceil(Ae.length/A)||1))),onPageSizeChange:B=>{I(B),E(1)},pageSizeOptions:[10,20,30,40,50],label:"tasks"}),n.jsx(a0,{isOpen:r,onClose:je,onSave:Oe,onEdit:()=>d(!1),setFormData:oe,formData:Y,isEditing:!c&&!!l,viewMode:c,users:T,currentUser:e,onDelete:$e}),z&&n.jsx(qUe,{open:!0,title:z.title,message:z.message,confirmLabel:z.confirmLabel,cancelLabel:z.cancelLabel,variant:z.variant,onConfirm:he,onCancel:ae,loading:D})]})}function VUe({icon:e,title:t,value:a,color:s,bgColor:r,onClick:i}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function qUe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r,variant:i,loading:l,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),n.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}const RZ=e=>e?e.toUpperCase():"",ob=e=>{const t=RZ(e);return t==="PLANNED"||t==="IN PROGRESS"?"PLANNED":t==="HELD"||t==="DONE"?"HELD":t==="NOT_HELD"||t==="NOT HELD"?"NOT_HELD":"PLANNED"},YUe=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},QUe=e=>{const t=RZ(e);switch(t==="PLANNED"?"PENDING":t==="HELD"?"COMPLETED":t==="NOT_HELD"?"CANCELLED":t){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},_A={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},KUe=()=>{const e=yt(),t=Yt(),[a]=Ds(),s=a.get("id"),r=t.pathname==="/admin/meetings/info";h.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[i,l]=h.useState([]),[o,c]=h.useState(!1),[d,u]=h.useState([]),[f,p]=h.useState(""),[x,y]=h.useState("Filter by Status"),[w,v]=h.useState(!1),[C,N]=h.useState(null),[S,T]=h.useState(1),[k,_]=h.useState(10),[E,A]=h.useState(_A),[I,z]=h.useState(!1),[F,D]=h.useState(null),[M,W]=h.useState(!1),[Z,R]=h.useState(null),[Q,Y]=h.useState(!1),[oe,re]=h.useState(null);h.useEffect(()=>{const ae=t.state?.openMeetingModal,Ae=t.state?.initialMeetingData?.relatedTo||a.get("id"),ge=t.state?.meetingID;ae||Ae?(v(!0),t.state?.initialMeetingData&&A(Be=>({...Be,...t.state.initialMeetingData})),e(t.pathname,{replace:!0,state:{}})):ge&&(re(ge),e(t.pathname,{replace:!0,state:{}}))},[t,a,e]),h.useEffect(()=>{if(oe&&i.length>0&&!o){const ae=i.find(Ae=>Ae.id===oe);ae?N(ae):q.error("Meeting not found."),re(null)}},[oe,i,o]);const ee=async()=>{if(s&&r){const ae=sessionStorage.getItem("meetingDetailData");if(ae)try{const Ae=JSON.parse(ae);if(Ae.id===parseInt(s)){N(Ae),sessionStorage.removeItem("meetingDetailData");return}}catch(Ae){console.error(Ae)}}c(!0);try{const ae=await ce.get("/meetings/admin/fetch-all"),ge=[...Array.isArray(ae.data)?ae.data:[]].sort((Be,qe)=>{const Te=Be?.createdAt?new Date(Be.createdAt).getTime():0;return(qe?.createdAt?new Date(qe.createdAt).getTime():0)-Te});if(l(ge),s&&!C){const Be=ge.find(qe=>qe.id===parseInt(s));Be&&N(Be)}console.log(ae.data)}catch{q.error("Failed to load meetings.")}finally{c(!1)}},H=async()=>{try{const ae=await ce.get("/users/all");u(Array.isArray(ae.data)?ae.data:[])}catch(ae){console.error(ae)}};h.useEffect(()=>{ee(),H()},[]);const ye=ae=>p(ae.target.value),te=h.useMemo(()=>{const ae=f.trim().toLowerCase(),Ae=x.trim().toUpperCase();return i.filter(ge=>{const Be=[ge?.activity,ge?.description,ge?.relatedTo,ge?.assignedTo],qe=ae===""||Be.some(He=>He&&He.toString().toLowerCase().includes(ae)),Te=Ae==="FILTER BY STATUS"||ob(ge.status||"PENDING")===Ae;return qe&&Te})},[i,f,x]),ve=h.useMemo(()=>{const ae=(S-1)*k;return te.slice(ae,ae+k)},[te,S]),je=()=>{v(!1),A(_A),z(!1),D(null),W(!1)},Oe=()=>{A(_A),z(!1),D(null),v(!0)},$e=ae=>{let Ae="";if(ae.meet_assign_to?.id)Ae=String(ae.meet_assign_to.id);else if(ae.assignedTo){const Se=d.find(de=>`${de.first_name} ${de.last_name}`===ae.assignedTo);Ae=Se?String(Se.id):""}const ge=Se=>{if(!Se)return"";try{const de=new Date(Se),ke=de.getTimezoneOffset()*6e4;return new Date(de.getTime()-ke).toISOString().slice(0,16)}catch{return""}};let Be="Lead",qe="",Te="Contact",He="";if(ae.lead)Be="Lead",qe=String(ae.lead.id);else if(ae.account)Be="Account",qe=String(ae.account.id),ae.contact?(Te="Contact",He=String(ae.contact.id)):ae.deal&&(Te="Deal",He=String(ae.deal.id));else if(ae.relatedType||ae.related_type){const Se=ae.relatedType||ae.related_type,de=ae.related_to||ae.relatedToId;Se==="Lead"?(Be="Lead",qe=String(de)):(Be="Account",qe=ae.account_id?String(ae.account_id):"")}const Ye={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},B=ob(ae.status),fe=Ye[B]||"Planned";A({subject:ae.subject||ae.activity||"",location:ae.location||"",startTime:ge(ae.start_time||ae.startTime),endTime:ge(ae.end_time||ae.endTime),status:fe,notes:ae.description||ae.notes||"",assignedTo:Ae,relatedType1:Be,relatedTo1:qe,relatedType2:Te,relatedTo2:He}),z(!0),D(ae.id),N(null),v(!0)},pe=ae=>{if(!ae.subject?.trim())return q.error("Subject is required.");if(!ae.startTime)return q.error("Start time is required.");if(ae.endTime&&!(new Date(ae.endTime)-new Date(ae.startTime)>0))return q.error("End time must be after start time.");ae.relatedType1,ae.relatedTo1,ae.relatedType1==="Account"&&ae.relatedType2&&ae.relatedTo2&&(ae.relatedType2,ae.relatedTo2);const Ae={...ae,assignedTo:parseInt(ae.assignedTo),relatedTo1:parseInt(ae.relatedTo1),relatedTo2:parseInt(ae.relatedTo2)},ge=I&&F?"update":"create";R({title:ge==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${ge} "${Ae.subject}"?`,confirmLabel:ge==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:ge,payload:Ae,targetId:F,name:Ae.subject}})},Me=async()=>{if(!Z?.action)return;const{type:ae,payload:Ae,targetId:ge,name:Be}=Z.action;console.log(Ae),Y(!0);try{ae==="create"?(W(!0),await ce.post("/meetings/create",Ae),q.success(`Meeting "${Be}" created.`),je(),await ee()):ae==="update"?(W(!0),await ce.put(`/meetings/${ge}`,Ae),q.success(`Meeting "${Be}" updated.`),je(),await ee()):ae==="delete"&&(await ce.delete(`/meetings/${ge}`),q.success(`Meeting "${Be}" deleted.`),C?.id===ge&&N(null),await ee())}catch(qe){const Te=qe.response?.data?.detail||"Action failed.";q.error(typeof Te=="string"?Te:JSON.stringify(Te)),console.error(Te)}finally{W(!1),Y(!1),R(null)}},Le=ae=>{R({title:"Delete Meeting",message:`Permanently delete "${ae.activity}"?`,confirmLabel:"Delete",variant:"danger",action:{type:"delete",targetId:ae.id,name:ae.activity}})},he=async(ae,Ae)=>{try{await ce.put(`/meetings/${ae}`,{status:Ae}),q.success("Status updated"),ee(),N(null)}catch{q.error("Failed to update status")}};return r&&s?C?n.jsx(ad,{meeting:C,onClose:()=>{N(null),e("/admin/dashboard")},onEdit:$e,onDelete:Le,onStatusUpdate:he}):n.jsx(Rt,{message:"Loading meeting..."}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[o&&n.jsx(Rt,{message:"Loading meetings..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[n.jsx(Ct,{className:"mr-2 text-blue-600"})," Meetings"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:Oe,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[n.jsx(dn,{className:"mr-2"})," Add Meeting"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[n.jsx(Bt,{className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search meetings",value:f,onChange:ye,className:"w-full outline-none"})]}),n.jsxs("select",{value:x,onChange:ae=>y(ae.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[n.jsx("option",{children:"Filter by Status"}),n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Start Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:ve.length>0?ve.map(ae=>n.jsxs("tr",{onClick:()=>N(ae),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:ae.subject}),n.jsxs("td",{className:"py-3 px-4",children:[ae.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ae.lead.title}),ae.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ae.account.name}),ae.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[ae.contact.first_name," ",ae.contact.last_name]}),ae.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ae.deal.name})]}),n.jsx("td",{className:"py-3 px-4",children:YUe(ae.start_time)}),n.jsxs("td",{className:"py-3 px-4",children:[ae.meet_assign_to.first_name," ",ae.meet_assign_to.last_name]}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${QUe(ob(ae.status))}`,children:ob(ae.status).replace("_"," ")})})]},ae.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),n.jsx(en,{totalItems:te.length,pageSize:k,currentPage:S,onPrev:()=>T(ae=>Math.max(1,ae-1)),onNext:()=>T(ae=>ae+1),onPageSizeChange:ae=>{_(ae),T(1)},pageSizeOptions:[10,20,30,40,50],label:"meetings"}),w&&n.jsx(Gj,{onClose:je,formData:E,setFormData:A,isEditing:I,onSubmit:pe,isSubmitting:M||Q,users:d}),C&&n.jsx(ad,{meeting:C,onClose:()=>N(null),onEdit:$e,onDelete:Le,onStatusUpdate:he}),Z&&n.jsx(XUe,{open:!0,title:Z.title,message:Z.message,confirmLabel:Z.confirmLabel,variant:Z.variant,onConfirm:Me,onCancel:()=>R(null),loading:Q})]})};function XUe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{onClick:c,disabled:l,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),n.jsx("button",{onClick:o,disabled:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${d}`,children:l?"...":s})]})]})})}const Vj=[{value:"CEO",label:"CEO"},{value:"Admin",label:"Admin"},{value:"Group Manager",label:"Group Manager"},{value:"Manager",label:"Manager"},{value:"Marketing",label:"Marketing"},{value:"Sales",label:"Sales"}],pg={firstName:"",lastName:"",email:"",password:"",role:""},ZUe={CEO:"bg-purple-100 text-purple-700",ADMIN:"bg-purple-100 text-purple-700",GROUP_MANAGER:"bg-indigo-100 text-indigo-700",MANAGER:"bg-blue-100 text-blue-700",MARKETING:"bg-yellow-100 text-yellow-700",SALES:"bg-green-100 text-green-700"},ul=e=>e?e.toString().trim().replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/\s+/g,"_").toUpperCase():"",JUe=e=>{const t=ul(e),a=Vj.find(s=>ul(s.value)===t);return a?a.value:e||""},bk=e=>{const t=ul(e),a=Vj.find(s=>ul(s.value)===t);return a?a.label:typeof e=="string"?e.toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()):"--"},i8=e=>{if(!e)return"--";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",","")},AA=(e,{size:t="sm"}={})=>{const a=ul(e),s=ZUe[a]||"bg-gray-100 text-gray-700",r=t==="lg"?"px-3 py-1 text-sm":t==="md"?"px-2.5 py-1 text-sm":"px-2 py-1 text-xs";return n.jsx("span",{className:`${r} font-semibold rounded-md inline-flex items-center justify-center ${s}`,children:bk(e)})},e7e=(e,t)=>{const a=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${a}${s}`.toUpperCase()||"U"},l8=e=>[...e].sort((t,a)=>{const s=t.created_at?new Date(t.created_at).getTime():0;return(a.created_at?new Date(a.created_at).getTime():0)-s});function t7e(){const{user:e,loading:t}=Kt(),[a,s]=h.useState([]),[r,i]=h.useState(!1),[l,o]=h.useState(""),[c,d]=h.useState(""),[u,f]=h.useState(null),[p,x]=h.useState(!1),[y,w]=h.useState(!1),[v,C]=h.useState(null),[N,S]=h.useState(pg),[T,k]=h.useState(!1),[_,E]=h.useState(null),[A,I]=h.useState(!1),[z,F]=h.useState(1),[D,M]=h.useState(10),[W,Z]=h.useState("Overview"),[R,Q]=h.useState(""),[Y,oe]=h.useState(!1),re=ul(e?.role),ee=["ADMIN","CEO","GROUP MANAGER","MANAGER"].includes(re),H=!t&&ee,ye=h.useMemo(()=>{const se=Vj.filter(We=>ul(We.value)!=="CEO");return[{label:"Filter by Roles",value:""},{label:"CEO",value:"CEO"},...se]},[]),te=h.useCallback(se=>{se&&(s(We=>We.map(Re=>Re.id===se?{...Re,highlight:!0}:Re)),setTimeout(()=>{s(We=>We.map(Re=>Re.id===se?{...Re,highlight:!1}:Re))},2e3))},[]),ve=h.useCallback(async()=>{i(!0);try{const se=await ce.get("/users/all"),We=Array.isArray(se.data)?se.data:[],Re=l8(We);s(Re),f(ct=>ct&&(Re.find(ue=>ue.id===ct.id)||null)),console.log(se.data)}catch(se){console.error("Error fetching users:",se);const We=se.response?.data?.detail||"Failed to load users. Please try again later.";q.error(We)}finally{i(!1)}},[]);h.useEffect(()=>{!t&&!ee&&e&&q.error("You are not authorized to access User Management.")},[ee,t,e]),h.useEffect(()=>{t||!ee||ve()},[t,ee,ve]),h.useEffect(()=>{document.title="Users | Sari-Sari CRM"},[]);const je=h.useMemo(()=>{const se=l.trim().toLowerCase(),We=ul(c);return l8(a.filter(Re=>{if(!Re)return!1;const ct=se===""||[Re.first_name,Re.last_name,`${Re.first_name||""} ${Re.last_name||""}`,Re.email,bk(Re.role)].filter(Boolean).some(ue=>ue.toString().toLowerCase().includes(se)),Ie=We===""||We==="CEO"&&["CEO","ADMIN"].includes(ul(Re.role))||ul(Re.role)===We;return ct&&Ie}))},[a,l,c]),Oe=Math.max(1,Math.ceil(je.length/D)||1);h.useEffect(()=>{F(1)},[l,c]),h.useEffect(()=>{F(se=>{const We=Math.max(1,Math.ceil(je.length/D)||1);return se>We?We:se})},[je.length]);const $e=h.useMemo(()=>{const se=(z-1)*D;return je.slice(se,se+D)},[je,z]);je.length===0||(z-1)*D+1,Math.min(z*D,je.length);const pe=()=>F(se=>Math.max(se-1,1)),Me=()=>F(se=>Math.min(se+1,Oe)),Le=()=>{S(pg),w(!1),C(null),x(!0)},he=se=>{console.log(se),f(se),Z("Overview"),Q(se?.is_active?"Active":"Inactive")},ae=se=>{se.target.id==="userModalBackdrop"&&!A&&Ae()},Ae=()=>{f(null)},ge=(se,We)=>{S(Re=>({...Re,[se]:We}))},Be=()=>{const se="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let We="";for(let Re=0;Re<10;Re+=1)We+=se.charAt(Math.floor(Math.random()*se.length));ge("password",We)},qe=()=>{T||A||(x(!1),S(pg),C(null),w(!1))},Te=se=>{S({firstName:se.first_name||"",lastName:se.last_name||"",email:se.email||"",password:"",role:JUe(se.role)}),w(!0),C(se.id),x(!0),f(null)},He=se=>{E({title:"Delete User",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsxs("span",{className:"font-semibold",children:[se.first_name," ",se.last_name]}),"? This action cannot be undone."]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:se.id,name:`${se.first_name||""} ${se.last_name||""}`.trim()||se.email||"user"}})},Ye=se=>{se.preventDefault();const We=N.firstName.trim(),Re=N.lastName.trim(),ct=N.email.trim(),Ie=N.password.trim(),ue="Sales",Ne=!(y&&v);if(!We||!ct||!ue){q.warn("Please fill in all required fields.");return}if(Ne&&!Ie){q.warn("Please fill in all required fields.");return}if(Ie&&Ie.length<8){q.warn("Password should be at least 8 characters long.");return}const Fe={first_name:We,last_name:Re,email:ct,role:ue};console.log(Fe),(Ne||Ie)&&(Fe.password=Ie);const Ze=`${We} ${Re}`.trim(),st=Ne?"create":"update";E({title:st==="create"?"Confirm New User":"Confirm User Update",message:st==="create"?n.jsxs("span",{children:["Create user ",n.jsx("span",{className:"font-semibold",children:Ze})," with role"," ",n.jsx("span",{className:"font-semibold",children:bk(ue)}),"?"]}):n.jsxs("span",{children:["Save changes for"," ",n.jsx("span",{className:"font-semibold",children:Ze||ct}),"?"]}),confirmLabel:st==="create"?"Create User":"Update User",cancelLabel:"Cancel",variant:"primary",action:{type:st,payload:Fe,targetId:v,name:Ze||ct}})},B=async()=>{if(!_?.action){E(null);return}const{action:se}=_,{type:We,payload:Re,targetId:ct,name:Ie}=se;I(!0),(We==="create"||We==="update")&&k(!0);try{if(We==="create"){const Ne=(await ce.post("/users/createuser",Re)).data;await ve(),te(Ne.id),q.success(`User "${Ie}" created successfully.`),x(!1),S(pg),C(null),w(!1)}else if(We==="update"){if(!ct)throw new Error("Missing user identifier for update.");const Ne=(await ce.put(`/users/updateuser/${ct}`,Re)).data;await ve(),f(null),te(Ne.id),q.success(`User "${Ie}" updated successfully.`),x(!1),S(pg),C(null),w(!1)}else if(We==="delete"){if(!ct)throw new Error("Missing user identifier for deletion.");await ce.delete(`/users/deleteuser/${ct}`),s(ue=>ue.map(Ne=>Ne.id===ct?{...Ne,is_active:!1}:Ne)),u&&u.id===ct&&(f(null),Q("")),q.success(`User "${Ie}" deactivated successfully.`)}}catch(ue){console.error("User management error:",ue);const Ne=We==="create"?"Failed to create user. Please review the details and try again.":We==="update"?"Failed to update user. Please review the details and try again.":"Failed to delete user. Please try again.",Fe=ue.response?.data?.detail||Ne;q.error(Fe)}finally{(We==="create"||We==="update")&&k(!1),I(!1),E(null)}},fe=()=>{A||E(null)},Se=async()=>{if(!u||!R)return;const se=u.is_active?"Active":"Inactive";if(R===se)return;const We=R==="Active";oe(!0);try{const ct=(await ce.put(`/users/updateuser/${u.id}`,{is_active:We})).data;s(Ie=>Ie.map(ue=>ue.id===ct.id?ct:ue)),f(null),Q(""),q.success(`User status updated to ${R}`)}catch(Re){console.error("Failed to update user status:",Re);const ct=Re.response?.data?.detail||"Failed to update user status. Please try again.";q.error(ct)}finally{oe(!1)}},de=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[(r||t||!H)&&n.jsx(Rt,{}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Iw,{className:"mr-2 text-blue-600"}),"User Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:Le,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(Wn,{className:"mr-2"})," Add User"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search users",value:l,onChange:se=>o(se.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:c,onChange:se=>d(se.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:ye.map(se=>n.jsx("option",{value:se.value,children:se.label},se.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Fullname"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Role"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:3,children:"Loading users..."})}):je.length===0?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-400",colSpan:4,children:"No users found."})}):$e.map(se=>n.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${se.highlight?"bg-green-50":""} ${se.is_active?"":"opacity-60 bg-gray-50"}`,children:[n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>he(se),children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline text-sm",children:[se.first_name," ",se.last_name]})}),n.jsx("td",{className:"py-3 px-4 cursor-pointer text-sm",onClick:()=>he(se),children:se.email}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>he(se),children:AA(se.role)}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>he(se),children:n.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-md ${se.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:se.is_active?"Active":"Inactive"})})]},se.id))})]})}),n.jsx(en,{className:"mt-4",totalItems:je.length,pageSize:D,currentPage:z,onPrev:pe,onNext:Me,onPageSizeChange:se=>{M(se),F(1)},pageSizeOptions:[10,20,30,40,50],label:"users"})]}),ke=u?n.jsx("div",{id:"userModalBackdrop",onClick:ae,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in p-4 sm:p-6 md:p-8 font-inter relative",children:[n.jsx("div",{className:"flex justify-end w-full",children:n.jsx("button",{onClick:Ae,className:"text-gray-500 hover:text-gray-700 transition mb-5 cursor-pointer",children:n.jsx(Vn,{size:30})})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7 mb-4 lg:mb-6 md:mb-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[u.profile_picture?n.jsx("img",{src:u.profile_picture,alt:`${u.first_name} ${u.last_name}`,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover border border-gray-200 shadow-sm"}):n.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-200 text-gray-700 flex items-center justify-center text-lg sm:text-xl font-semibold border border-gray-200 shadow-sm",children:e7e(u.first_name,u.last_name)}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[u.first_name," ",u.last_name]}),n.jsx("p",{className:"text-sm text-gray-500 break-all",children:u.email})]})]}),AA(u.role,{size:"md"})]}),!["CEO","ADMIN","GROUP MANAGER","GROUP_MANAGER"].includes(u.role.toUpperCase())&&n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Te(u),disabled:A,children:[n.jsx(oa,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>He(u),disabled:A,children:[n.jsx(zt,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 mb-6"}),n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview"].map(se=>n.jsx("button",{onClick:()=>Z(se),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${W===se?"bg-[#5c636d] text-white border-white":"text-white hover:bg-[#5c636d]"}`,children:se},se))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsx("div",{className:"lg:col-span-3",children:W==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:u.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Role:"}),n.jsx("p",{children:AA(u.role,{size:"sm"})})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:u.is_active?"Active":"Inactive"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Auth Provider:"}),n.jsx("p",{children:u.auth_provider?u.auth_provider.toString().replace(/\b\w/g,se=>se.toUpperCase()):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:u.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:u.company?.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company Number:"}),n.jsx("p",{children:u.company?.company_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Related to CEO:"}),n.jsx("p",{children:u.manager?`${u.manager.first_name} ${u.manager.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:i8(u.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Login:"}),n.jsx("p",{children:u.last_login?i8(u.last_login):"Never"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Profile Picture:"}),n.jsx("p",{children:u.profile_picture?n.jsx("a",{href:u.profile_picture,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline break-all",children:"View image"}):"N/A"})]})]})})}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsx("div",{className:"flex flex-col gap-2 w-full",children:n.jsxs("button",{type:"button",onClick:()=>{if(!u.email){alert("No email address available");return}const se=encodeURIComponent(u.email),We=encodeURIComponent(""),Re=encodeURIComponent(""),ct=`https://mail.google.com/mail/?view=cm&fs=1&to=${se}&su=${We}&body=${Re}`;window.open(ct,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Zn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]})})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:R||(u.is_active?"Active":"Inactive"),onChange:se=>Q(se.target.value),children:[n.jsx("option",{value:"Active",children:"Active"}),n.jsx("option",{value:"Inactive",children:"Inactive"})]}),n.jsx("button",{onClick:Se,disabled:Y||R===(u.is_active?"Active":"Inactive"),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Y||R===(u.is_active?"Active":"Inactive")?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:Y?"Updating...":"Update"})]})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[de,ke,n.jsx(n7e,{open:p,isEditing:y,isSubmitting:T,confirmProcessing:A,formData:N,onClose:qe,onSubmit:Ye,onChange:ge,onGeneratePassword:Be}),n.jsx(a7e,{open:!!_,title:_?.title,message:_?.message,confirmLabel:_?.confirmLabel,cancelLabel:_?.cancelLabel,variant:_?.variant,loading:A,onConfirm:B,onCancel:fe})]})}function n7e({open:e,isEditing:t,isSubmitting:a,confirmProcessing:s,formData:r,onClose:i,onSubmit:l,onChange:o,onGeneratePassword:c}){if(!e)return null;const d=a||s;return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-lg border border-gray-200 p-6 sm:p-8 relative overflow-y-auto max-h-[90vh]",children:[n.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:d,children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-6 text-center",children:t?"Edit User":"Add New User"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:l,children:[n.jsx(cb,{label:"First Name",value:r.firstName,onChange:u=>o("firstName",u),placeholder:"John",required:!0,disabled:d}),n.jsx(cb,{label:"Last Name",value:r.lastName,onChange:u=>o("lastName",u),placeholder:"Doe",required:!0,disabled:d}),n.jsx(cb,{label:"Email",type:"email",value:r.email,onChange:u=>o("email",u),placeholder:"john.doe@company.com",required:!0,disabled:d||t}),n.jsx(cb,{label:"Role",type:"select",disabled:!0,value:"Sales",onChange:u=>o("role",u),options:[{value:"",label:"Select role"},...Vj],required:!0}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Password"}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[n.jsx("input",{type:"text",value:r.password,onChange:u=>o("password",u.target.value),placeholder:t?"Leave blank to keep current password":"Enter or generate password",required:!t,disabled:d,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"}),n.jsx("button",{type:"button",onClick:c,className:"flex items-center justify-center px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-60",disabled:d,children:"Generate"})]}),t?n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Setting a password will reset the user's credentials; leave it blank to keep the current password."}):n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long."})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:i,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:d,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:d,children:a?"Saving...":t?"Update User":"Save User"})]})]})]})})}function cb({label:e,type:t="text",value:a,onChange:s,placeholder:r,options:i=[],required:l=!1,disabled:o=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t==="select"?n.jsx("select",{value:a??"",onChange:c=>s(c.target.value),required:l,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100",children:i.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))}):n.jsx("input",{type:t,value:a??"",onChange:c=>s(c.target.value),placeholder:r,required:l,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"})]})}function a7e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-black hover:bg-gray-800 border border-black";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("div",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),n.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}function s7e({toggleSidebar:e}){const[t,a]=h.useState(!1),s=h.useRef(null),r=Yt(),{logout:i}=Bs(),{user:l,fetchUser:o}=Kt(),c={"/marketing/dashboard":"Dashboard","/marketing/contacts":"Contacts","/marketing/accounts":"Accounts","/marketing/leads":"Leads","/marketing/tasks":"Tasks","/marketing/campaigns":"Campaign","/marketing/templates":"Templates"};h.useEffect(()=>{o()},[]);const d=c[r.pathname]||"Marketing Panel";return h.useEffect(()=>{function u(f){s.current&&!s.current.contains(f.target)&&a(!1)}return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[]),n.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-6 py-3 border-b relative",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:n.jsx(ex,{className:"text-2xl"})}),n.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:d})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("button",{className:"relative text-gray-600 hover:text-gray-800",children:[n.jsx(Zp,{className:"text-xl"}),n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs w-4 h-4 flex items-center justify-center rounded-full",children:"3"})]}),n.jsxs("div",{className:"relative",ref:s,children:[n.jsxs("button",{onClick:()=>a(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[n.jsx("img",{src:l?.profile_picture,alt:"",className:"w-8 aspect-square object-cover rounded-full"}),n.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[l?.first_name," ",l?.last_name]})]}),t&&n.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-gray-100 shadow-lg rounded border z-50",children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("button",{className:"px-4 py-2 text-sm hover:bg-gray-200 text-left",children:"Manage Account"}),n.jsx("div",{className:"border-t my-1"}),n.jsx("button",{onClick:i,className:"px-4 py-2 text-sm bg-red-500 text-white rounded mx-2 my-2 hover:bg-red-600",children:"Logout"})]})})]})]})]})}function r7e(){const[e,t]=h.useState(!1),[a,s]=h.useState(!1),[r,i]=h.useState(!1),[l,o]=h.useState(!1),c=Yt(),{fetchUser:d}=Kt();h.useEffect(()=>{d()},[]),h.useEffect(()=>{document.title="Panel | Sari-Sari CRM"},[]);const u="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",f="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition",p=["/marketing/campaigns","/marketing/templates"],x=["/marketing/accounts","/marketing/contacts","/marketing/leads"],y=["/marketing/tasks"],w=p.includes(c.pathname),v=x.includes(c.pathname),C=y.includes(c.pathname);return h.useEffect(()=>{w&&t(!0),v&&s(!0),C&&i(!0)},[w,v,C]),n.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[n.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${l?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[n.jsx("div",{className:"bg-[#fbbf24] text-gray-900 font-bold text-xl px-6 py-4.5 tracking-wide",children:"Marketing CRM"}),n.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[n.jsxs(Dt,{to:"/marketing/dashboard",className:({isActive:N})=>N?u:f,children:[n.jsx(Jp,{className:"text-lg"}),n.jsx("span",{children:"Dashboard"})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!a),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-lg"}),"Sales"]}),n.jsx(jt,{className:`transition-transform ${a?"rotate-180":""}`})]}),a&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(Dt,{to:"/marketing/accounts",className:({isActive:N})=>N?u:f,children:[n.jsx(On,{})," Accounts"]}),n.jsxs(Dt,{to:"/marketing/contacts",className:({isActive:N})=>N?u:f,children:[n.jsx(Jt,{})," Contacts"]}),n.jsxs(Dt,{to:"/marketing/leads",className:({isActive:N})=>N?u:f,children:[n.jsx(Wn,{})," Leads"]})]})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>t(!e),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(tr,{className:"text-lg"}),"Tools"]}),n.jsx(jt,{className:`transition-transform ${e?"rotate-180":""}`})]}),e&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(Dt,{to:"/marketing/campaigns",className:({isActive:N})=>N?u:f,children:[n.jsx(oie,{})," Campaign"]}),n.jsxs(Dt,{to:"/marketing/templates",className:({isActive:N})=>N?u:f,children:[n.jsx(zk,{})," Templates"]})]})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!r),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(ws,{className:"text-lg"}),"Activity"]}),n.jsx(jt,{className:`transition-transform ${r?"rotate-180":""}`})]}),r&&n.jsx("div",{className:"ml-6 mt-2 space-y-1",children:n.jsxs(Dt,{to:"/marketing/tasks",className:({isActive:N})=>N?u:f,children:[n.jsx(Gt,{})," Tasks"]})})]})]}),n.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Marketing CRM"]})]}),l&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>o(!1)}),n.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[n.jsx(s7e,{toggleSidebar:()=>o(!l)}),n.jsx("main",{className:"flex-1 p-6 overflow-auto",style:{backgroundColor:"#fffeee"},children:n.jsx(Gp,{})})]})]})}function s0(e){return e+.5|0}const Bc=(e,t,a)=>Math.max(Math.min(e,a),t);function $g(e){return Bc(s0(e*2.55),0,255)}function qc(e){return Bc(s0(e*255),0,255)}function co(e){return Bc(s0(e/2.55)/100,0,1)}function o8(e){return Bc(s0(e*100),0,100)}const Zr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},vk=[..."0123456789ABCDEF"],i7e=e=>vk[e&15],l7e=e=>vk[(e&240)>>4]+vk[e&15],db=e=>(e&240)>>4===(e&15),o7e=e=>db(e.r)&&db(e.g)&&db(e.b)&&db(e.a);function c7e(e){var t=e.length,a;return e[0]==="#"&&(t===4||t===5?a={r:255&Zr[e[1]]*17,g:255&Zr[e[2]]*17,b:255&Zr[e[3]]*17,a:t===5?Zr[e[4]]*17:255}:(t===7||t===9)&&(a={r:Zr[e[1]]<<4|Zr[e[2]],g:Zr[e[3]]<<4|Zr[e[4]],b:Zr[e[5]]<<4|Zr[e[6]],a:t===9?Zr[e[7]]<<4|Zr[e[8]]:255})),a}const d7e=(e,t)=>e<255?t(e):"";function u7e(e){var t=o7e(e)?i7e:l7e;return e?"#"+t(e.r)+t(e.g)+t(e.b)+d7e(e.a,t):void 0}const m7e=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function zZ(e,t,a){const s=t*Math.min(a,1-a),r=(i,l=(i+e/30)%12)=>a-s*Math.max(Math.min(l-3,9-l,1),-1);return[r(0),r(8),r(4)]}function f7e(e,t,a){const s=(r,i=(r+e/60)%6)=>a-a*t*Math.max(Math.min(i,4-i,1),0);return[s(5),s(3),s(1)]}function h7e(e,t,a){const s=zZ(e,1,.5);let r;for(t+a>1&&(r=1/(t+a),t*=r,a*=r),r=0;r<3;r++)s[r]*=1-t-a,s[r]+=t;return s}function g7e(e,t,a,s,r){return e===r?(t-a)/s+(t<a?6:0):t===r?(a-e)/s+2:(e-t)/s+4}function wD(e){const a=e.r/255,s=e.g/255,r=e.b/255,i=Math.max(a,s,r),l=Math.min(a,s,r),o=(i+l)/2;let c,d,u;return i!==l&&(u=i-l,d=o>.5?u/(2-i-l):u/(i+l),c=g7e(a,s,r,u,i),c=c*60+.5),[c|0,d||0,o]}function ND(e,t,a,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,a,s)).map(qc)}function jD(e,t,a){return ND(zZ,e,t,a)}function p7e(e,t,a){return ND(h7e,e,t,a)}function x7e(e,t,a){return ND(f7e,e,t,a)}function FZ(e){return(e%360+360)%360}function y7e(e){const t=m7e.exec(e);let a=255,s;if(!t)return;t[5]!==s&&(a=t[6]?$g(+t[5]):qc(+t[5]));const r=FZ(+t[2]),i=+t[3]/100,l=+t[4]/100;return t[1]==="hwb"?s=p7e(r,i,l):t[1]==="hsv"?s=x7e(r,i,l):s=jD(r,i,l),{r:s[0],g:s[1],b:s[2],a}}function b7e(e,t){var a=wD(e);a[0]=FZ(a[0]+t),a=jD(a),e.r=a[0],e.g=a[1],e.b=a[2]}function v7e(e){if(!e)return;const t=wD(e),a=t[0],s=o8(t[1]),r=o8(t[2]);return e.a<255?`hsla(${a}, ${s}%, ${r}%, ${co(e.a)})`:`hsl(${a}, ${s}%, ${r}%)`}const c8={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},d8={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function w7e(){const e={},t=Object.keys(d8),a=Object.keys(c8);let s,r,i,l,o;for(s=0;s<t.length;s++){for(l=o=t[s],r=0;r<a.length;r++)i=a[r],o=o.replace(i,c8[i]);i=parseInt(d8[l],16),e[o]=[i>>16&255,i>>8&255,i&255]}return e}let ub;function N7e(e){ub||(ub=w7e(),ub.transparent=[0,0,0,0]);const t=ub[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const j7e=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function C7e(e){const t=j7e.exec(e);let a=255,s,r,i;if(t){if(t[7]!==s){const l=+t[7];a=t[8]?$g(l):Bc(l*255,0,255)}return s=+t[1],r=+t[3],i=+t[5],s=255&(t[2]?$g(s):Bc(s,0,255)),r=255&(t[4]?$g(r):Bc(r,0,255)),i=255&(t[6]?$g(i):Bc(i,0,255)),{r:s,g:r,b:i,a}}}function S7e(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${co(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const EA=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Hm=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function _7e(e,t,a){const s=Hm(co(e.r)),r=Hm(co(e.g)),i=Hm(co(e.b));return{r:qc(EA(s+a*(Hm(co(t.r))-s))),g:qc(EA(r+a*(Hm(co(t.g))-r))),b:qc(EA(i+a*(Hm(co(t.b))-i))),a:e.a+a*(t.a-e.a)}}function mb(e,t,a){if(e){let s=wD(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*a,t===0?360:1)),s=jD(s),e.r=s[0],e.g=s[1],e.b=s[2]}}function UZ(e,t){return e&&Object.assign(t||{},e)}function u8(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=qc(e[3]))):(t=UZ(e,{r:0,g:0,b:0,a:1}),t.a=qc(t.a)),t}function A7e(e){return e.charAt(0)==="r"?C7e(e):y7e(e)}class Op{constructor(t){if(t instanceof Op)return t;const a=typeof t;let s;a==="object"?s=u8(t):a==="string"&&(s=c7e(t)||N7e(t)||A7e(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=UZ(this._rgb);return t&&(t.a=co(t.a)),t}set rgb(t){this._rgb=u8(t)}rgbString(){return this._valid?S7e(this._rgb):void 0}hexString(){return this._valid?u7e(this._rgb):void 0}hslString(){return this._valid?v7e(this._rgb):void 0}mix(t,a){if(t){const s=this.rgb,r=t.rgb;let i;const l=a===i?.5:a,o=2*l-1,c=s.a-r.a,d=((o*c===-1?o:(o+c)/(1+o*c))+1)/2;i=1-d,s.r=255&d*s.r+i*r.r+.5,s.g=255&d*s.g+i*r.g+.5,s.b=255&d*s.b+i*r.b+.5,s.a=l*s.a+(1-l)*r.a,this.rgb=s}return this}interpolate(t,a){return t&&(this._rgb=_7e(this._rgb,t._rgb,a)),this}clone(){return new Op(this.rgb)}alpha(t){return this._rgb.a=qc(t),this}clearer(t){const a=this._rgb;return a.a*=1-t,this}greyscale(){const t=this._rgb,a=s0(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=a,this}opaquer(t){const a=this._rgb;return a.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return mb(this._rgb,2,t),this}darken(t){return mb(this._rgb,2,-t),this}saturate(t){return mb(this._rgb,1,t),this}desaturate(t){return mb(this._rgb,1,-t),this}rotate(t){return b7e(this._rgb,t),this}}function so(){}const E7e=(()=>{let e=0;return()=>e++})();function _n(e){return e==null}function Qa(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function pn(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function hi(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function tl(e,t){return hi(e)?e:t}function nn(e,t){return typeof e>"u"?t:e}const T7e=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,BZ=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Kn(e,t,a){if(e&&typeof e.call=="function")return e.apply(a,t)}function Ln(e,t,a,s){let r,i,l;if(Qa(e))for(i=e.length,r=0;r<i;r++)t.call(a,e[r],r);else if(pn(e))for(l=Object.keys(e),i=l.length,r=0;r<i;r++)t.call(a,e[l[r]],l[r])}function gw(e,t){let a,s,r,i;if(!e||!t||e.length!==t.length)return!1;for(a=0,s=e.length;a<s;++a)if(r=e[a],i=t[a],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function pw(e){if(Qa(e))return e.map(pw);if(pn(e)){const t=Object.create(null),a=Object.keys(e),s=a.length;let r=0;for(;r<s;++r)t[a[r]]=pw(e[a[r]]);return t}return e}function HZ(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function k7e(e,t,a,s){if(!HZ(e))return;const r=t[e],i=a[e];pn(r)&&pn(i)?Mp(r,i,s):t[e]=pw(i)}function Mp(e,t,a){const s=Qa(t)?t:[t],r=s.length;if(!pn(e))return e;a=a||{};const i=a.merger||k7e;let l;for(let o=0;o<r;++o){if(l=s[o],!pn(l))continue;const c=Object.keys(l);for(let d=0,u=c.length;d<u;++d)i(c[d],e,l,a)}return e}function Kg(e,t){return Mp(e,t,{merger:L7e})}function L7e(e,t,a){if(!HZ(e))return;const s=t[e],r=a[e];pn(s)&&pn(r)?Kg(s,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=pw(r))}const m8={"":e=>e,x:e=>e.x,y:e=>e.y};function P7e(e){const t=e.split("."),a=[];let s="";for(const r of t)s+=r,s.endsWith("\\")?s=s.slice(0,-1)+".":(a.push(s),s="");return a}function D7e(e){const t=P7e(e);return a=>{for(const s of t){if(s==="")break;a=a&&a[s]}return a}}function Lu(e,t){return(m8[t]||(m8[t]=D7e(t)))(e)}function CD(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Ip=e=>typeof e<"u",sd=e=>typeof e=="function",f8=(e,t)=>{if(e.size!==t.size)return!1;for(const a of e)if(!t.has(a))return!1;return!0};function O7e(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Dn=Math.PI,ya=2*Dn,M7e=ya+Dn,xw=Number.POSITIVE_INFINITY,I7e=Dn/180,Ka=Dn/2,Pd=Dn/4,h8=Dn*2/3,GZ=Math.log10,wl=Math.sign;function Xg(e,t,a){return Math.abs(e-t)<a}function g8(e){const t=Math.round(e);e=Xg(e,t,e/1e3)?t:e;const a=Math.pow(10,Math.floor(GZ(e))),s=e/a;return(s<=1?1:s<=2?2:s<=5?5:10)*a}function $7e(e){const t=[],a=Math.sqrt(e);let s;for(s=1;s<a;s++)e%s===0&&(t.push(s),t.push(e/s));return a===(a|0)&&t.push(a),t.sort((r,i)=>r-i).pop(),t}function R7e(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function $p(e){return!R7e(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function z7e(e,t){const a=Math.round(e);return a-t<=e&&a+t>=e}function F7e(e,t,a){let s,r,i;for(s=0,r=e.length;s<r;s++)i=e[s][a],isNaN(i)||(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i))}function po(e){return e*(Dn/180)}function U7e(e){return e*(180/Dn)}function p8(e){if(!hi(e))return;let t=1,a=0;for(;Math.round(e*t)/t!==e;)t*=10,a++;return a}function WZ(e,t){const a=t.x-e.x,s=t.y-e.y,r=Math.sqrt(a*a+s*s);let i=Math.atan2(s,a);return i<-.5*Dn&&(i+=ya),{angle:i,distance:r}}function wk(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function B7e(e,t){return(e-t+M7e)%ya-Dn}function Li(e){return(e%ya+ya)%ya}function Rp(e,t,a,s){const r=Li(e),i=Li(t),l=Li(a),o=Li(i-r),c=Li(l-r),d=Li(r-i),u=Li(r-l);return r===i||r===l||s&&i===l||o>c&&d<u}function Es(e,t,a){return Math.max(t,Math.min(a,e))}function H7e(e){return Es(e,-32768,32767)}function Hc(e,t,a,s=1e-6){return e>=Math.min(t,a)-s&&e<=Math.max(t,a)+s}function SD(e,t,a){a=a||(l=>e[l]<t);let s=e.length-1,r=0,i;for(;s-r>1;)i=r+s>>1,a(i)?r=i:s=i;return{lo:r,hi:s}}const eu=(e,t,a,s)=>SD(e,a,s?r=>{const i=e[r][t];return i<a||i===a&&e[r+1][t]===a}:r=>e[r][t]<a),G7e=(e,t,a)=>SD(e,a,s=>e[s][t]>=a);function W7e(e,t,a){let s=0,r=e.length;for(;s<r&&e[s]<t;)s++;for(;r>s&&e[r-1]>a;)r--;return s>0||r<e.length?e.slice(s,r):e}const VZ=["push","pop","shift","splice","unshift"];function V7e(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),VZ.forEach(a=>{const s="_onData"+CD(a),r=e[a];Object.defineProperty(e,a,{configurable:!0,enumerable:!1,value(...i){const l=r.apply(this,i);return e._chartjs.listeners.forEach(o=>{typeof o[s]=="function"&&o[s](...i)}),l}})})}function x8(e,t){const a=e._chartjs;if(!a)return;const s=a.listeners,r=s.indexOf(t);r!==-1&&s.splice(r,1),!(s.length>0)&&(VZ.forEach(i=>{delete e[i]}),delete e._chartjs)}function qZ(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const YZ=(function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame})();function QZ(e,t){let a=[],s=!1;return function(...r){a=r,s||(s=!0,YZ.call(window,()=>{s=!1,e.apply(t,a)}))}}function q7e(e,t){let a;return function(...s){return t?(clearTimeout(a),a=setTimeout(e,t,s)):e.apply(this,s),t}}const _D=e=>e==="start"?"left":e==="end"?"right":"center",Cs=(e,t,a)=>e==="start"?t:e==="end"?a:(t+a)/2,Y7e=(e,t,a,s)=>e===(s?"left":"right")?a:e==="center"?(t+a)/2:t;function Q7e(e,t,a){const s=t.length;let r=0,i=s;if(e._sorted){const{iScale:l,vScale:o,_parsed:c}=e,d=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,u=l.axis,{min:f,max:p,minDefined:x,maxDefined:y}=l.getUserBounds();if(x){if(r=Math.min(eu(c,u,f).lo,a?s:eu(t,u,l.getPixelForValue(f)).lo),d){const w=c.slice(0,r+1).reverse().findIndex(v=>!_n(v[o.axis]));r-=Math.max(0,w)}r=Es(r,0,s-1)}if(y){let w=Math.max(eu(c,l.axis,p,!0).hi+1,a?0:eu(t,u,l.getPixelForValue(p),!0).hi+1);if(d){const v=c.slice(w-1).findIndex(C=>!_n(C[o.axis]));w+=Math.max(0,v)}i=Es(w,r,s)-r}else i=s-r}return{start:r,count:i}}function K7e(e){const{xScale:t,yScale:a,_scaleRanges:s}=e,r={xmin:t.min,xmax:t.max,ymin:a.min,ymax:a.max};if(!s)return e._scaleRanges=r,!0;const i=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==a.min||s.ymax!==a.max;return Object.assign(s,r),i}const fb=e=>e===0||e===1,y8=(e,t,a)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*ya/a)),b8=(e,t,a)=>Math.pow(2,-10*e)*Math.sin((e-t)*ya/a)+1,Zg={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*Ka)+1,easeOutSine:e=>Math.sin(e*Ka),easeInOutSine:e=>-.5*(Math.cos(Dn*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>fb(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>fb(e)?e:y8(e,.075,.3),easeOutElastic:e=>fb(e)?e:b8(e,.075,.3),easeInOutElastic(e){return fb(e)?e:e<.5?.5*y8(e*2,.1125,.45):.5+.5*b8(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-Zg.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?Zg.easeInBounce(e*2)*.5:Zg.easeOutBounce(e*2-1)*.5+.5};function AD(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function v8(e){return AD(e)?e:new Op(e)}function TA(e){return AD(e)?e:new Op(e).saturate(.5).darken(.1).hexString()}const X7e=["x","y","borderWidth","radius","tension"],Z7e=["color","borderColor","backgroundColor"];function J7e(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:Z7e},numbers:{type:"number",properties:X7e}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function e8e(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const w8=new Map;function t8e(e,t){t=t||{};const a=e+JSON.stringify(t);let s=w8.get(a);return s||(s=new Intl.NumberFormat(e,t),w8.set(a,s)),s}function ED(e,t,a){return t8e(t,a).format(e)}const n8e={values(e){return Qa(e)?e:""+e},numeric(e,t,a){if(e===0)return"0";const s=this.chart.options.locale;let r,i=e;if(a.length>1){const d=Math.max(Math.abs(a[0].value),Math.abs(a[a.length-1].value));(d<1e-4||d>1e15)&&(r="scientific"),i=a8e(e,a)}const l=GZ(Math.abs(i)),o=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),c={notation:r,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(c,this.options.ticks.format),ED(e,s,c)}};function a8e(e,t){let a=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(a)>=1&&e!==Math.floor(e)&&(a=e-Math.floor(e)),a}var KZ={formatters:n8e};function s8e(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,a)=>a.lineWidth,tickColor:(t,a)=>a.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:KZ.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Pu=Object.create(null),Nk=Object.create(null);function Jg(e,t){if(!t)return e;const a=t.split(".");for(let s=0,r=a.length;s<r;++s){const i=a[s];e=e[i]||(e[i]=Object.create(null))}return e}function kA(e,t,a){return typeof t=="string"?Mp(Jg(e,t),a):Mp(Jg(e,""),t)}class r8e{constructor(t,a){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,r)=>TA(r.backgroundColor),this.hoverBorderColor=(s,r)=>TA(r.borderColor),this.hoverColor=(s,r)=>TA(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(a)}set(t,a){return kA(this,t,a)}get(t){return Jg(this,t)}describe(t,a){return kA(Nk,t,a)}override(t,a){return kA(Pu,t,a)}route(t,a,s,r){const i=Jg(this,t),l=Jg(this,s),o="_"+a;Object.defineProperties(i,{[o]:{value:i[a],writable:!0},[a]:{enumerable:!0,get(){const c=this[o],d=l[r];return pn(c)?Object.assign({},d,c):nn(c,d)},set(c){this[o]=c}}})}apply(t){t.forEach(a=>a(this))}}var Ca=new r8e({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[J7e,e8e,s8e]);function i8e(e){return!e||_n(e.size)||_n(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function N8(e,t,a,s,r){let i=t[r];return i||(i=t[r]=e.measureText(r).width,a.push(r)),i>s&&(s=i),s}function Dd(e,t,a){const s=e.currentDevicePixelRatio,r=a!==0?Math.max(a/2,.5):0;return Math.round((t-r)*s)/s+r}function j8(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function jk(e,t,a,s){XZ(e,t,a,s,null)}function XZ(e,t,a,s,r){let i,l,o,c,d,u,f,p;const x=t.pointStyle,y=t.rotation,w=t.radius;let v=(y||0)*I7e;if(x&&typeof x=="object"&&(i=x.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){e.save(),e.translate(a,s),e.rotate(v),e.drawImage(x,-x.width/2,-x.height/2,x.width,x.height),e.restore();return}if(!(isNaN(w)||w<=0)){switch(e.beginPath(),x){default:r?e.ellipse(a,s,r/2,w,0,0,ya):e.arc(a,s,w,0,ya),e.closePath();break;case"triangle":u=r?r/2:w,e.moveTo(a+Math.sin(v)*u,s-Math.cos(v)*w),v+=h8,e.lineTo(a+Math.sin(v)*u,s-Math.cos(v)*w),v+=h8,e.lineTo(a+Math.sin(v)*u,s-Math.cos(v)*w),e.closePath();break;case"rectRounded":d=w*.516,c=w-d,l=Math.cos(v+Pd)*c,f=Math.cos(v+Pd)*(r?r/2-d:c),o=Math.sin(v+Pd)*c,p=Math.sin(v+Pd)*(r?r/2-d:c),e.arc(a-f,s-o,d,v-Dn,v-Ka),e.arc(a+p,s-l,d,v-Ka,v),e.arc(a+f,s+o,d,v,v+Ka),e.arc(a-p,s+l,d,v+Ka,v+Dn),e.closePath();break;case"rect":if(!y){c=Math.SQRT1_2*w,u=r?r/2:c,e.rect(a-u,s-c,2*u,2*c);break}v+=Pd;case"rectRot":f=Math.cos(v)*(r?r/2:w),l=Math.cos(v)*w,o=Math.sin(v)*w,p=Math.sin(v)*(r?r/2:w),e.moveTo(a-f,s-o),e.lineTo(a+p,s-l),e.lineTo(a+f,s+o),e.lineTo(a-p,s+l),e.closePath();break;case"crossRot":v+=Pd;case"cross":f=Math.cos(v)*(r?r/2:w),l=Math.cos(v)*w,o=Math.sin(v)*w,p=Math.sin(v)*(r?r/2:w),e.moveTo(a-f,s-o),e.lineTo(a+f,s+o),e.moveTo(a+p,s-l),e.lineTo(a-p,s+l);break;case"star":f=Math.cos(v)*(r?r/2:w),l=Math.cos(v)*w,o=Math.sin(v)*w,p=Math.sin(v)*(r?r/2:w),e.moveTo(a-f,s-o),e.lineTo(a+f,s+o),e.moveTo(a+p,s-l),e.lineTo(a-p,s+l),v+=Pd,f=Math.cos(v)*(r?r/2:w),l=Math.cos(v)*w,o=Math.sin(v)*w,p=Math.sin(v)*(r?r/2:w),e.moveTo(a-f,s-o),e.lineTo(a+f,s+o),e.moveTo(a+p,s-l),e.lineTo(a-p,s+l);break;case"line":l=r?r/2:Math.cos(v)*w,o=Math.sin(v)*w,e.moveTo(a-l,s-o),e.lineTo(a+l,s+o);break;case"dash":e.moveTo(a,s),e.lineTo(a+Math.cos(v)*(r?r/2:w),s+Math.sin(v)*w);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function zp(e,t,a){return a=a||.5,!t||e&&e.x>t.left-a&&e.x<t.right+a&&e.y>t.top-a&&e.y<t.bottom+a}function TD(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function kD(e){e.restore()}function l8e(e,t,a,s,r){if(!t)return e.lineTo(a.x,a.y);if(r==="middle"){const i=(t.x+a.x)/2;e.lineTo(i,t.y),e.lineTo(i,a.y)}else r==="after"!=!!s?e.lineTo(t.x,a.y):e.lineTo(a.x,t.y);e.lineTo(a.x,a.y)}function o8e(e,t,a,s){if(!t)return e.lineTo(a.x,a.y);e.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?a.cp2x:a.cp1x,s?a.cp2y:a.cp1y,a.x,a.y)}function c8e(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),_n(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function d8e(e,t,a,s,r){if(r.strikethrough||r.underline){const i=e.measureText(s),l=t-i.actualBoundingBoxLeft,o=t+i.actualBoundingBoxRight,c=a-i.actualBoundingBoxAscent,d=a+i.actualBoundingBoxDescent,u=r.strikethrough?(c+d)/2:d;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(l,u),e.lineTo(o,u),e.stroke()}}function u8e(e,t){const a=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=a}function Fp(e,t,a,s,r,i={}){const l=Qa(t)?t:[t],o=i.strokeWidth>0&&i.strokeColor!=="";let c,d;for(e.save(),e.font=r.string,c8e(e,i),c=0;c<l.length;++c)d=l[c],i.backdrop&&u8e(e,i.backdrop),o&&(i.strokeColor&&(e.strokeStyle=i.strokeColor),_n(i.strokeWidth)||(e.lineWidth=i.strokeWidth),e.strokeText(d,a,s,i.maxWidth)),e.fillText(d,a,s,i.maxWidth),d8e(e,a,s,d,i),s+=Number(r.lineHeight);e.restore()}function yw(e,t){const{x:a,y:s,w:r,h:i,radius:l}=t;e.arc(a+l.topLeft,s+l.topLeft,l.topLeft,1.5*Dn,Dn,!0),e.lineTo(a,s+i-l.bottomLeft),e.arc(a+l.bottomLeft,s+i-l.bottomLeft,l.bottomLeft,Dn,Ka,!0),e.lineTo(a+r-l.bottomRight,s+i),e.arc(a+r-l.bottomRight,s+i-l.bottomRight,l.bottomRight,Ka,0,!0),e.lineTo(a+r,s+l.topRight),e.arc(a+r-l.topRight,s+l.topRight,l.topRight,0,-Ka,!0),e.lineTo(a+l.topLeft,s)}const m8e=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,f8e=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function h8e(e,t){const a=(""+e).match(m8e);if(!a||a[1]==="normal")return t*1.2;switch(e=+a[2],a[3]){case"px":return e;case"%":e/=100;break}return t*e}const g8e=e=>+e||0;function LD(e,t){const a={},s=pn(t),r=s?Object.keys(t):t,i=pn(e)?s?l=>nn(e[l],e[t[l]]):l=>e[l]:()=>e;for(const l of r)a[l]=g8e(i(l));return a}function ZZ(e){return LD(e,{top:"y",right:"x",bottom:"y",left:"x"})}function df(e){return LD(e,["topLeft","topRight","bottomLeft","bottomRight"])}function gi(e){const t=ZZ(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Ts(e,t){e=e||{},t=t||Ca.font;let a=nn(e.size,t.size);typeof a=="string"&&(a=parseInt(a,10));let s=nn(e.style,t.style);s&&!(""+s).match(f8e)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const r={family:nn(e.family,t.family),lineHeight:h8e(nn(e.lineHeight,t.lineHeight),a),size:a,style:s,weight:nn(e.weight,t.weight),string:""};return r.string=i8e(r),r}function hb(e,t,a,s){let r,i,l;for(r=0,i=e.length;r<i;++r)if(l=e[r],l!==void 0&&l!==void 0)return l}function p8e(e,t,a){const{min:s,max:r}=e,i=BZ(t,(r-s)/2),l=(o,c)=>a&&o===0?0:o+c;return{min:l(s,-Math.abs(i)),max:l(r,i)}}function Gu(e,t){return Object.assign(Object.create(e),t)}function PD(e,t=[""],a,s,r=()=>e[0]){const i=a||e;typeof s>"u"&&(s=nJ("_fallback",e));const l={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:s,_getTarget:r,override:o=>PD([o,...e],t,i,s)};return new Proxy(l,{deleteProperty(o,c){return delete o[c],delete o._keys,delete e[0][c],!0},get(o,c){return eJ(o,c,()=>C8e(c,t,e,o))},getOwnPropertyDescriptor(o,c){return Reflect.getOwnPropertyDescriptor(o._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(o,c){return S8(o).includes(c)},ownKeys(o){return S8(o)},set(o,c,d){const u=o._storage||(o._storage=r());return o[c]=u[c]=d,delete o._keys,!0}})}function kf(e,t,a,s){const r={_cacheable:!1,_proxy:e,_context:t,_subProxy:a,_stack:new Set,_descriptors:JZ(e,s),setContext:i=>kf(e,i,a,s),override:i=>kf(e.override(i),t,a,s)};return new Proxy(r,{deleteProperty(i,l){return delete i[l],delete e[l],!0},get(i,l,o){return eJ(i,l,()=>y8e(i,l,o))},getOwnPropertyDescriptor(i,l){return i._descriptors.allKeys?Reflect.has(e,l)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,l)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(i,l){return Reflect.has(e,l)},ownKeys(){return Reflect.ownKeys(e)},set(i,l,o){return e[l]=o,delete i[l],!0}})}function JZ(e,t={scriptable:!0,indexable:!0}){const{_scriptable:a=t.scriptable,_indexable:s=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:a,indexable:s,isScriptable:sd(a)?a:()=>a,isIndexable:sd(s)?s:()=>s}}const x8e=(e,t)=>e?e+CD(t):t,DD=(e,t)=>pn(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function eJ(e,t,a){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const s=a();return e[t]=s,s}function y8e(e,t,a){const{_proxy:s,_context:r,_subProxy:i,_descriptors:l}=e;let o=s[t];return sd(o)&&l.isScriptable(t)&&(o=b8e(t,o,e,a)),Qa(o)&&o.length&&(o=v8e(t,o,e,l.isIndexable)),DD(t,o)&&(o=kf(o,r,i&&i[t],l)),o}function b8e(e,t,a,s){const{_proxy:r,_context:i,_subProxy:l,_stack:o}=a;if(o.has(e))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+e);o.add(e);let c=t(i,l||s);return o.delete(e),DD(e,c)&&(c=OD(r._scopes,r,e,c)),c}function v8e(e,t,a,s){const{_proxy:r,_context:i,_subProxy:l,_descriptors:o}=a;if(typeof i.index<"u"&&s(e))return t[i.index%t.length];if(pn(t[0])){const c=t,d=r._scopes.filter(u=>u!==c);t=[];for(const u of c){const f=OD(d,r,e,u);t.push(kf(f,i,l&&l[e],o))}}return t}function tJ(e,t,a){return sd(e)?e(t,a):e}const w8e=(e,t)=>e===!0?t:typeof e=="string"?Lu(t,e):void 0;function N8e(e,t,a,s,r){for(const i of t){const l=w8e(a,i);if(l){e.add(l);const o=tJ(l._fallback,a,r);if(typeof o<"u"&&o!==a&&o!==s)return o}else if(l===!1&&typeof s<"u"&&a!==s)return null}return!1}function OD(e,t,a,s){const r=t._rootScopes,i=tJ(t._fallback,a,s),l=[...e,...r],o=new Set;o.add(s);let c=C8(o,l,a,i||a,s);return c===null||typeof i<"u"&&i!==a&&(c=C8(o,l,i,c,s),c===null)?!1:PD(Array.from(o),[""],r,i,()=>j8e(t,a,s))}function C8(e,t,a,s,r){for(;a;)a=N8e(e,t,a,s,r);return a}function j8e(e,t,a){const s=e._getTarget();t in s||(s[t]={});const r=s[t];return Qa(r)&&pn(a)?a:r||{}}function C8e(e,t,a,s){let r;for(const i of t)if(r=nJ(x8e(i,e),a),typeof r<"u")return DD(e,r)?OD(a,s,e,r):r}function nJ(e,t){for(const a of t){if(!a)continue;const s=a[e];if(typeof s<"u")return s}}function S8(e){let t=e._keys;return t||(t=e._keys=S8e(e._scopes)),t}function S8e(e){const t=new Set;for(const a of e)for(const s of Object.keys(a).filter(r=>!r.startsWith("_")))t.add(s);return Array.from(t)}const _8e=Number.EPSILON||1e-14,Lf=(e,t)=>t<e.length&&!e[t].skip&&e[t],aJ=e=>e==="x"?"y":"x";function A8e(e,t,a,s){const r=e.skip?t:e,i=t,l=a.skip?t:a,o=wk(i,r),c=wk(l,i);let d=o/(o+c),u=c/(o+c);d=isNaN(d)?0:d,u=isNaN(u)?0:u;const f=s*d,p=s*u;return{previous:{x:i.x-f*(l.x-r.x),y:i.y-f*(l.y-r.y)},next:{x:i.x+p*(l.x-r.x),y:i.y+p*(l.y-r.y)}}}function E8e(e,t,a){const s=e.length;let r,i,l,o,c,d=Lf(e,0);for(let u=0;u<s-1;++u)if(c=d,d=Lf(e,u+1),!(!c||!d)){if(Xg(t[u],0,_8e)){a[u]=a[u+1]=0;continue}r=a[u]/t[u],i=a[u+1]/t[u],o=Math.pow(r,2)+Math.pow(i,2),!(o<=9)&&(l=3/Math.sqrt(o),a[u]=r*l*t[u],a[u+1]=i*l*t[u])}}function T8e(e,t,a="x"){const s=aJ(a),r=e.length;let i,l,o,c=Lf(e,0);for(let d=0;d<r;++d){if(l=o,o=c,c=Lf(e,d+1),!o)continue;const u=o[a],f=o[s];l&&(i=(u-l[a])/3,o[`cp1${a}`]=u-i,o[`cp1${s}`]=f-i*t[d]),c&&(i=(c[a]-u)/3,o[`cp2${a}`]=u+i,o[`cp2${s}`]=f+i*t[d])}}function k8e(e,t="x"){const a=aJ(t),s=e.length,r=Array(s).fill(0),i=Array(s);let l,o,c,d=Lf(e,0);for(l=0;l<s;++l)if(o=c,c=d,d=Lf(e,l+1),!!c){if(d){const u=d[t]-c[t];r[l]=u!==0?(d[a]-c[a])/u:0}i[l]=o?d?wl(r[l-1])!==wl(r[l])?0:(r[l-1]+r[l])/2:r[l-1]:r[l]}E8e(e,r,i),T8e(e,i,t)}function gb(e,t,a){return Math.max(Math.min(e,a),t)}function L8e(e,t){let a,s,r,i,l,o=zp(e[0],t);for(a=0,s=e.length;a<s;++a)l=i,i=o,o=a<s-1&&zp(e[a+1],t),i&&(r=e[a],l&&(r.cp1x=gb(r.cp1x,t.left,t.right),r.cp1y=gb(r.cp1y,t.top,t.bottom)),o&&(r.cp2x=gb(r.cp2x,t.left,t.right),r.cp2y=gb(r.cp2y,t.top,t.bottom)))}function P8e(e,t,a,s,r){let i,l,o,c;if(t.spanGaps&&(e=e.filter(d=>!d.skip)),t.cubicInterpolationMode==="monotone")k8e(e,r);else{let d=s?e[e.length-1]:e[0];for(i=0,l=e.length;i<l;++i)o=e[i],c=A8e(d,o,e[Math.min(i+1,l-(s?0:1))%l],t.tension),o.cp1x=c.previous.x,o.cp1y=c.previous.y,o.cp2x=c.next.x,o.cp2y=c.next.y,d=o}t.capBezierPoints&&L8e(e,a)}function MD(){return typeof window<"u"&&typeof document<"u"}function ID(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function bw(e,t,a){let s;return typeof e=="string"?(s=parseInt(e,10),e.indexOf("%")!==-1&&(s=s/100*t.parentNode[a])):s=e,s}const qj=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function D8e(e,t){return qj(e).getPropertyValue(t)}const O8e=["top","right","bottom","left"];function du(e,t,a){const s={};a=a?"-"+a:"";for(let r=0;r<4;r++){const i=O8e[r];s[i]=parseFloat(e[t+"-"+i+a])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const M8e=(e,t,a)=>(e>0||t>0)&&(!a||!a.shadowRoot);function I8e(e,t){const a=e.touches,s=a&&a.length?a[0]:e,{offsetX:r,offsetY:i}=s;let l=!1,o,c;if(M8e(r,i,e.target))o=r,c=i;else{const d=t.getBoundingClientRect();o=s.clientX-d.left,c=s.clientY-d.top,l=!0}return{x:o,y:c,box:l}}function Ud(e,t){if("native"in e)return e;const{canvas:a,currentDevicePixelRatio:s}=t,r=qj(a),i=r.boxSizing==="border-box",l=du(r,"padding"),o=du(r,"border","width"),{x:c,y:d,box:u}=I8e(e,a),f=l.left+(u&&o.left),p=l.top+(u&&o.top);let{width:x,height:y}=t;return i&&(x-=l.width+o.width,y-=l.height+o.height),{x:Math.round((c-f)/x*a.width/s),y:Math.round((d-p)/y*a.height/s)}}function $8e(e,t,a){let s,r;if(t===void 0||a===void 0){const i=e&&ID(e);if(!i)t=e.clientWidth,a=e.clientHeight;else{const l=i.getBoundingClientRect(),o=qj(i),c=du(o,"border","width"),d=du(o,"padding");t=l.width-d.width-c.width,a=l.height-d.height-c.height,s=bw(o.maxWidth,i,"clientWidth"),r=bw(o.maxHeight,i,"clientHeight")}}return{width:t,height:a,maxWidth:s||xw,maxHeight:r||xw}}const Gc=e=>Math.round(e*10)/10;function R8e(e,t,a,s){const r=qj(e),i=du(r,"margin"),l=bw(r.maxWidth,e,"clientWidth")||xw,o=bw(r.maxHeight,e,"clientHeight")||xw,c=$8e(e,t,a);let{width:d,height:u}=c;if(r.boxSizing==="content-box"){const p=du(r,"border","width"),x=du(r,"padding");d-=x.width+p.width,u-=x.height+p.height}return d=Math.max(0,d-i.width),u=Math.max(0,s?d/s:u-i.height),d=Gc(Math.min(d,l,c.maxWidth)),u=Gc(Math.min(u,o,c.maxHeight)),d&&!u&&(u=Gc(d/2)),(t!==void 0||a!==void 0)&&s&&c.height&&u>c.height&&(u=c.height,d=Gc(Math.floor(u*s))),{width:d,height:u}}function _8(e,t,a){const s=t||1,r=Gc(e.height*s),i=Gc(e.width*s);e.height=Gc(e.height),e.width=Gc(e.width);const l=e.canvas;return l.style&&(a||!l.style.height&&!l.style.width)&&(l.style.height=`${e.height}px`,l.style.width=`${e.width}px`),e.currentDevicePixelRatio!==s||l.height!==r||l.width!==i?(e.currentDevicePixelRatio=s,l.height=r,l.width=i,e.ctx.setTransform(s,0,0,s,0,0),!0):!1}const z8e=(function(){let e=!1;try{const t={get passive(){return e=!0,!1}};MD()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e})();function A8(e,t){const a=D8e(e,t),s=a&&a.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function Bd(e,t,a,s){return{x:e.x+a*(t.x-e.x),y:e.y+a*(t.y-e.y)}}function F8e(e,t,a,s){return{x:e.x+a*(t.x-e.x),y:s==="middle"?a<.5?e.y:t.y:s==="after"?a<1?e.y:t.y:a>0?t.y:e.y}}function U8e(e,t,a,s){const r={x:e.cp2x,y:e.cp2y},i={x:t.cp1x,y:t.cp1y},l=Bd(e,r,a),o=Bd(r,i,a),c=Bd(i,t,a),d=Bd(l,o,a),u=Bd(o,c,a);return Bd(d,u,a)}const B8e=function(e,t){return{x(a){return e+e+t-a},setWidth(a){t=a},textAlign(a){return a==="center"?a:a==="right"?"left":"right"},xPlus(a,s){return a-s},leftForLtr(a,s){return a-s}}},H8e=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function uf(e,t,a){return e?B8e(t,a):H8e()}function sJ(e,t){let a,s;(t==="ltr"||t==="rtl")&&(a=e.canvas.style,s=[a.getPropertyValue("direction"),a.getPropertyPriority("direction")],a.setProperty("direction",t,"important"),e.prevTextDirection=s)}function rJ(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function iJ(e){return e==="angle"?{between:Rp,compare:B7e,normalize:Li}:{between:Hc,compare:(t,a)=>t-a,normalize:t=>t}}function E8({start:e,end:t,count:a,loop:s,style:r}){return{start:e%a,end:t%a,loop:s&&(t-e+1)%a===0,style:r}}function G8e(e,t,a){const{property:s,start:r,end:i}=a,{between:l,normalize:o}=iJ(s),c=t.length;let{start:d,end:u,loop:f}=e,p,x;if(f){for(d+=c,u+=c,p=0,x=c;p<x&&l(o(t[d%c][s]),r,i);++p)d--,u--;d%=c,u%=c}return u<d&&(u+=c),{start:d,end:u,loop:f,style:e.style}}function W8e(e,t,a){if(!a)return[e];const{property:s,start:r,end:i}=a,l=t.length,{compare:o,between:c,normalize:d}=iJ(s),{start:u,end:f,loop:p,style:x}=G8e(e,t,a),y=[];let w=!1,v=null,C,N,S;const T=()=>c(r,S,C)&&o(r,S)!==0,k=()=>o(i,C)===0||c(i,S,C),_=()=>w||T(),E=()=>!w||k();for(let A=u,I=u;A<=f;++A)N=t[A%l],!N.skip&&(C=d(N[s]),C!==S&&(w=c(C,r,i),v===null&&_()&&(v=o(C,r)===0?A:I),v!==null&&E()&&(y.push(E8({start:v,end:A,loop:p,count:l,style:x})),v=null),I=A,S=C));return v!==null&&y.push(E8({start:v,end:f,loop:p,count:l,style:x})),y}function V8e(e,t){const a=[],s=e.segments;for(let r=0;r<s.length;r++){const i=W8e(s[r],e.points,t);i.length&&a.push(...i)}return a}function q8e(e,t,a,s){let r=0,i=t-1;if(a&&!s)for(;r<t&&!e[r].skip;)r++;for(;r<t&&e[r].skip;)r++;for(r%=t,a&&(i+=r);i>r&&e[i%t].skip;)i--;return i%=t,{start:r,end:i}}function Y8e(e,t,a,s){const r=e.length,i=[];let l=t,o=e[t],c;for(c=t+1;c<=a;++c){const d=e[c%r];d.skip||d.stop?o.skip||(s=!1,i.push({start:t%r,end:(c-1)%r,loop:s}),t=l=d.stop?c:null):(l=c,o.skip&&(t=c)),o=d}return l!==null&&i.push({start:t%r,end:l%r,loop:s}),i}function Q8e(e,t){const a=e.points,s=e.options.spanGaps,r=a.length;if(!r)return[];const i=!!e._loop,{start:l,end:o}=q8e(a,r,i,s);if(s===!0)return T8(e,[{start:l,end:o,loop:i}],a,t);const c=o<l?o+r:o,d=!!e._fullLoop&&l===0&&o===r-1;return T8(e,Y8e(a,l,c,d),a,t)}function T8(e,t,a,s){return!s||!s.setContext||!a?t:K8e(e,t,a,s)}function K8e(e,t,a,s){const r=e._chart.getContext(),i=k8(e.options),{_datasetIndex:l,options:{spanGaps:o}}=e,c=a.length,d=[];let u=i,f=t[0].start,p=f;function x(y,w,v,C){const N=o?-1:1;if(y!==w){for(y+=c;a[y%c].skip;)y-=N;for(;a[w%c].skip;)w+=N;y%c!==w%c&&(d.push({start:y%c,end:w%c,loop:v,style:C}),u=C,f=w%c)}}for(const y of t){f=o?f:y.start;let w=a[f%c],v;for(p=f+1;p<=y.end;p++){const C=a[p%c];v=k8(s.setContext(Gu(r,{type:"segment",p0:w,p1:C,p0DataIndex:(p-1)%c,p1DataIndex:p%c,datasetIndex:l}))),X8e(v,u)&&x(f,p-1,y.loop,u),w=C,u=v}f<p-1&&x(f,p-1,y.loop,u)}return d}function k8(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function X8e(e,t){if(!t)return!1;const a=[],s=function(r,i){return AD(i)?(a.includes(i)||a.push(i),a.indexOf(i)):i};return JSON.stringify(e,s)!==JSON.stringify(t,s)}function pb(e,t,a){return e.options.clip?e[a]:t[a]}function Z8e(e,t){const{xScale:a,yScale:s}=e;return a&&s?{left:pb(a,t,"left"),right:pb(a,t,"right"),top:pb(s,t,"top"),bottom:pb(s,t,"bottom")}:t}function J8e(e,t){const a=t._clip;if(a.disabled)return!1;const s=Z8e(t,e.chartArea);return{left:a.left===!1?0:s.left-(a.left===!0?0:a.left),right:a.right===!1?e.width:s.right+(a.right===!0?0:a.right),top:a.top===!1?0:s.top-(a.top===!0?0:a.top),bottom:a.bottom===!1?e.height:s.bottom+(a.bottom===!0?0:a.bottom)}}class eBe{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,a,s,r){const i=a.listeners[r],l=a.duration;i.forEach(o=>o({chart:t,initial:a.initial,numSteps:l,currentStep:Math.min(s-a.start,l)}))}_refresh(){this._request||(this._running=!0,this._request=YZ.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let a=0;this._charts.forEach((s,r)=>{if(!s.running||!s.items.length)return;const i=s.items;let l=i.length-1,o=!1,c;for(;l>=0;--l)c=i[l],c._active?(c._total>s.duration&&(s.duration=c._total),c.tick(t),o=!0):(i[l]=i[i.length-1],i.pop());o&&(r.draw(),this._notify(r,s,t,"progress")),i.length||(s.running=!1,this._notify(r,s,t,"complete"),s.initial=!1),a+=i.length}),this._lastDate=t,a===0&&(this._running=!1)}_getAnims(t){const a=this._charts;let s=a.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},a.set(t,s)),s}listen(t,a,s){this._getAnims(t).listeners[a].push(s)}add(t,a){!a||!a.length||this._getAnims(t).items.push(...a)}has(t){return this._getAnims(t).items.length>0}start(t){const a=this._charts.get(t);a&&(a.running=!0,a.start=Date.now(),a.duration=a.items.reduce((s,r)=>Math.max(s,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const a=this._charts.get(t);return!(!a||!a.running||!a.items.length)}stop(t){const a=this._charts.get(t);if(!a||!a.items.length)return;const s=a.items;let r=s.length-1;for(;r>=0;--r)s[r].cancel();a.items=[],this._notify(t,a,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var io=new eBe;const L8="transparent",tBe={boolean(e,t,a){return a>.5?t:e},color(e,t,a){const s=v8(e||L8),r=s.valid&&v8(t||L8);return r&&r.valid?r.mix(s,a).hexString():t},number(e,t,a){return e+(t-e)*a}};class nBe{constructor(t,a,s,r){const i=a[s];r=hb([t.to,r,i,t.from]);const l=hb([t.from,i,r]);this._active=!0,this._fn=t.fn||tBe[t.type||typeof l],this._easing=Zg[t.easing]||Zg.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=a,this._prop=s,this._from=l,this._to=r,this._promises=void 0}active(){return this._active}update(t,a,s){if(this._active){this._notify(!1);const r=this._target[this._prop],i=s-this._start,l=this._duration-i;this._start=s,this._duration=Math.floor(Math.max(l,t.duration)),this._total+=i,this._loop=!!t.loop,this._to=hb([t.to,a,r,t.from]),this._from=hb([t.from,r,a])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const a=t-this._start,s=this._duration,r=this._prop,i=this._from,l=this._loop,o=this._to;let c;if(this._active=i!==o&&(l||a<s),!this._active){this._target[r]=o,this._notify(!0);return}if(a<0){this._target[r]=i;return}c=a/s%2,c=l&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[r]=this._fn(i,o,c)}wait(){const t=this._promises||(this._promises=[]);return new Promise((a,s)=>{t.push({res:a,rej:s})})}_notify(t){const a=t?"res":"rej",s=this._promises||[];for(let r=0;r<s.length;r++)s[r][a]()}}class lJ{constructor(t,a){this._chart=t,this._properties=new Map,this.configure(a)}configure(t){if(!pn(t))return;const a=Object.keys(Ca.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const i=t[r];if(!pn(i))return;const l={};for(const o of a)l[o]=i[o];(Qa(i.properties)&&i.properties||[r]).forEach(o=>{(o===r||!s.has(o))&&s.set(o,l)})})}_animateOptions(t,a){const s=a.options,r=sBe(t,s);if(!r)return[];const i=this._createAnimations(r,s);return s.$shared&&aBe(t.options.$animations,s).then(()=>{t.options=s},()=>{}),i}_createAnimations(t,a){const s=this._properties,r=[],i=t.$animations||(t.$animations={}),l=Object.keys(a),o=Date.now();let c;for(c=l.length-1;c>=0;--c){const d=l[c];if(d.charAt(0)==="$")continue;if(d==="options"){r.push(...this._animateOptions(t,a));continue}const u=a[d];let f=i[d];const p=s.get(d);if(f)if(p&&f.active()){f.update(p,u,o);continue}else f.cancel();if(!p||!p.duration){t[d]=u;continue}i[d]=f=new nBe(p,t,d,u),r.push(f)}return r}update(t,a){if(this._properties.size===0){Object.assign(t,a);return}const s=this._createAnimations(t,a);if(s.length)return io.add(this._chart,s),!0}}function aBe(e,t){const a=[],s=Object.keys(t);for(let r=0;r<s.length;r++){const i=e[s[r]];i&&i.active()&&a.push(i.wait())}return Promise.all(a)}function sBe(e,t){if(!t)return;let a=e.options;if(!a){e.options=t;return}return a.$shared&&(e.options=a=Object.assign({},a,{$shared:!1,$animations:{}})),a}function P8(e,t){const a=e&&e.options||{},s=a.reverse,r=a.min===void 0?t:0,i=a.max===void 0?t:0;return{start:s?i:r,end:s?r:i}}function rBe(e,t,a){if(a===!1)return!1;const s=P8(e,a),r=P8(t,a);return{top:r.end,right:s.end,bottom:r.start,left:s.start}}function iBe(e){let t,a,s,r;return pn(e)?(t=e.top,a=e.right,s=e.bottom,r=e.left):t=a=s=r=e,{top:t,right:a,bottom:s,left:r,disabled:e===!1}}function oJ(e,t){const a=[],s=e._getSortedDatasetMetas(t);let r,i;for(r=0,i=s.length;r<i;++r)a.push(s[r].index);return a}function D8(e,t,a,s={}){const r=e.keys,i=s.mode==="single";let l,o,c,d;if(t===null)return;let u=!1;for(l=0,o=r.length;l<o;++l){if(c=+r[l],c===a){if(u=!0,s.all)continue;break}d=e.values[c],hi(d)&&(i||t===0||wl(t)===wl(d))&&(t+=d)}return!u&&!s.all?0:t}function lBe(e,t){const{iScale:a,vScale:s}=t,r=a.axis==="x"?"x":"y",i=s.axis==="x"?"x":"y",l=Object.keys(e),o=new Array(l.length);let c,d,u;for(c=0,d=l.length;c<d;++c)u=l[c],o[c]={[r]:u,[i]:e[u]};return o}function LA(e,t){const a=e&&e.options.stacked;return a||a===void 0&&t.stack!==void 0}function oBe(e,t,a){return`${e.id}.${t.id}.${a.stack||a.type}`}function cBe(e){const{min:t,max:a,minDefined:s,maxDefined:r}=e.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:r?a:Number.POSITIVE_INFINITY}}function dBe(e,t,a){const s=e[t]||(e[t]={});return s[a]||(s[a]={})}function O8(e,t,a,s){for(const r of t.getMatchingVisibleMetas(s).reverse()){const i=e[r.index];if(a&&i>0||!a&&i<0)return r.index}return null}function M8(e,t){const{chart:a,_cachedMeta:s}=e,r=a._stacks||(a._stacks={}),{iScale:i,vScale:l,index:o}=s,c=i.axis,d=l.axis,u=oBe(i,l,s),f=t.length;let p;for(let x=0;x<f;++x){const y=t[x],{[c]:w,[d]:v}=y,C=y._stacks||(y._stacks={});p=C[d]=dBe(r,u,w),p[o]=v,p._top=O8(p,l,!0,s.type),p._bottom=O8(p,l,!1,s.type);const N=p._visualValues||(p._visualValues={});N[o]=v}}function PA(e,t){const a=e.scales;return Object.keys(a).filter(s=>a[s].axis===t).shift()}function uBe(e,t){return Gu(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function mBe(e,t,a){return Gu(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:a,index:t,mode:"default",type:"data"})}function xg(e,t){const a=e.controller.index,s=e.vScale&&e.vScale.axis;if(s){t=t||e._parsed;for(const r of t){const i=r._stacks;if(!i||i[s]===void 0||i[s][a]===void 0)return;delete i[s][a],i[s]._visualValues!==void 0&&i[s]._visualValues[a]!==void 0&&delete i[s]._visualValues[a]}}}const DA=e=>e==="reset"||e==="none",I8=(e,t)=>t?e:Object.assign({},e),fBe=(e,t,a)=>e&&!t.hidden&&t._stacked&&{keys:oJ(a,!0),values:null};class Yj{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,a){this.chart=t,this._ctx=t.ctx,this.index=a,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=LA(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&xg(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,a=this._cachedMeta,s=this.getDataset(),r=(f,p,x,y)=>f==="x"?p:f==="r"?y:x,i=a.xAxisID=nn(s.xAxisID,PA(t,"x")),l=a.yAxisID=nn(s.yAxisID,PA(t,"y")),o=a.rAxisID=nn(s.rAxisID,PA(t,"r")),c=a.indexAxis,d=a.iAxisID=r(c,i,l,o),u=a.vAxisID=r(c,l,i,o);a.xScale=this.getScaleForId(i),a.yScale=this.getScaleForId(l),a.rScale=this.getScaleForId(o),a.iScale=this.getScaleForId(d),a.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const a=this._cachedMeta;return t===a.iScale?a.vScale:a.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&x8(this._data,this),t._stacked&&xg(t)}_dataCheck(){const t=this.getDataset(),a=t.data||(t.data=[]),s=this._data;if(pn(a)){const r=this._cachedMeta;this._data=lBe(a,r)}else if(s!==a){if(s){x8(s,this);const r=this._cachedMeta;xg(r),r._parsed=[]}a&&Object.isExtensible(a)&&V7e(a,this),this._syncList=[],this._data=a}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const a=this._cachedMeta,s=this.getDataset();let r=!1;this._dataCheck();const i=a._stacked;a._stacked=LA(a.vScale,a),a.stack!==s.stack&&(r=!0,xg(a),a.stack=s.stack),this._resyncElements(t),(r||i!==a._stacked)&&(M8(this,a._parsed),a._stacked=LA(a.vScale,a))}configure(){const t=this.chart.config,a=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),a,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,a){const{_cachedMeta:s,_data:r}=this,{iScale:i,_stacked:l}=s,o=i.axis;let c=t===0&&a===r.length?!0:s._sorted,d=t>0&&s._parsed[t-1],u,f,p;if(this._parsing===!1)s._parsed=r,s._sorted=!0,p=r;else{Qa(r[t])?p=this.parseArrayData(s,r,t,a):pn(r[t])?p=this.parseObjectData(s,r,t,a):p=this.parsePrimitiveData(s,r,t,a);const x=()=>f[o]===null||d&&f[o]<d[o];for(u=0;u<a;++u)s._parsed[u+t]=f=p[u],c&&(x()&&(c=!1),d=f);s._sorted=c}l&&M8(this,p)}parsePrimitiveData(t,a,s,r){const{iScale:i,vScale:l}=t,o=i.axis,c=l.axis,d=i.getLabels(),u=i===l,f=new Array(r);let p,x,y;for(p=0,x=r;p<x;++p)y=p+s,f[p]={[o]:u||i.parse(d[y],y),[c]:l.parse(a[y],y)};return f}parseArrayData(t,a,s,r){const{xScale:i,yScale:l}=t,o=new Array(r);let c,d,u,f;for(c=0,d=r;c<d;++c)u=c+s,f=a[u],o[c]={x:i.parse(f[0],u),y:l.parse(f[1],u)};return o}parseObjectData(t,a,s,r){const{xScale:i,yScale:l}=t,{xAxisKey:o="x",yAxisKey:c="y"}=this._parsing,d=new Array(r);let u,f,p,x;for(u=0,f=r;u<f;++u)p=u+s,x=a[p],d[u]={x:i.parse(Lu(x,o),p),y:l.parse(Lu(x,c),p)};return d}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,a,s){const r=this.chart,i=this._cachedMeta,l=a[t.axis],o={keys:oJ(r,!0),values:a._stacks[t.axis]._visualValues};return D8(o,l,i.index,{mode:s})}updateRangeFromParsed(t,a,s,r){const i=s[a.axis];let l=i===null?NaN:i;const o=r&&s._stacks[a.axis];r&&o&&(r.values=o,l=D8(r,i,this._cachedMeta.index)),t.min=Math.min(t.min,l),t.max=Math.max(t.max,l)}getMinMax(t,a){const s=this._cachedMeta,r=s._parsed,i=s._sorted&&t===s.iScale,l=r.length,o=this._getOtherScale(t),c=fBe(a,s,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:f}=cBe(o);let p,x;function y(){x=r[p];const w=x[o.axis];return!hi(x[t.axis])||u>w||f<w}for(p=0;p<l&&!(!y()&&(this.updateRangeFromParsed(d,t,x,c),i));++p);if(i){for(p=l-1;p>=0;--p)if(!y()){this.updateRangeFromParsed(d,t,x,c);break}}return d}getAllParsedValues(t){const a=this._cachedMeta._parsed,s=[];let r,i,l;for(r=0,i=a.length;r<i;++r)l=a[r][t.axis],hi(l)&&s.push(l);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const a=this._cachedMeta,s=a.iScale,r=a.vScale,i=this.getParsed(t);return{label:s?""+s.getLabelForValue(i[s.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(t){const a=this._cachedMeta;this.update(t||"default"),a._clip=iBe(nn(this.options.clip,rBe(a.xScale,a.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,a=this.chart,s=this._cachedMeta,r=s.data||[],i=a.chartArea,l=[],o=this._drawStart||0,c=this._drawCount||r.length-o,d=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(t,i,o,c),u=o;u<o+c;++u){const f=r[u];f.hidden||(f.active&&d?l.push(f):f.draw(t,i))}for(u=0;u<l.length;++u)l[u].draw(t,i)}getStyle(t,a){const s=a?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,a,s){const r=this.getDataset();let i;if(t>=0&&t<this._cachedMeta.data.length){const l=this._cachedMeta.data[t];i=l.$context||(l.$context=mBe(this.getContext(),t,l)),i.parsed=this.getParsed(t),i.raw=r.data[t],i.index=i.dataIndex=t}else i=this.$context||(this.$context=uBe(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!a,i.mode=s,i}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,a){return this._resolveElementOptions(this.dataElementType.id,a,t)}_resolveElementOptions(t,a="default",s){const r=a==="active",i=this._cachedDataOpts,l=t+"-"+a,o=i[l],c=this.enableOptionSharing&&Ip(s);if(o)return I8(o,c);const d=this.chart.config,u=d.datasetElementScopeKeys(this._type,t),f=r?[`${t}Hover`,"hover",t,""]:[t,""],p=d.getOptionScopes(this.getDataset(),u),x=Object.keys(Ca.elements[t]),y=()=>this.getContext(s,r,a),w=d.resolveNamedOptions(p,x,y,f);return w.$shared&&(w.$shared=c,i[l]=Object.freeze(I8(w,c))),w}_resolveAnimations(t,a,s){const r=this.chart,i=this._cachedDataOpts,l=`animation-${a}`,o=i[l];if(o)return o;let c;if(r.options.animation!==!1){const u=this.chart.config,f=u.datasetAnimationScopeKeys(this._type,a),p=u.getOptionScopes(this.getDataset(),f);c=u.createResolver(p,this.getContext(t,s,a))}const d=new lJ(r,c&&c.animations);return c&&c._cacheable&&(i[l]=Object.freeze(d)),d}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,a){return!a||DA(t)||this.chart._animationsDisabled}_getSharedOptions(t,a){const s=this.resolveDataElementOptions(t,a),r=this._sharedOptions,i=this.getSharedOptions(s),l=this.includeOptions(a,i)||i!==r;return this.updateSharedOptions(i,a,s),{sharedOptions:i,includeOptions:l}}updateElement(t,a,s,r){DA(r)?Object.assign(t,s):this._resolveAnimations(a,r).update(t,s)}updateSharedOptions(t,a,s){t&&!DA(a)&&this._resolveAnimations(void 0,a).update(t,s)}_setStyle(t,a,s,r){t.active=r;const i=this.getStyle(a,r);this._resolveAnimations(a,s,r).update(t,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(t,a,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,a,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const a=this._data,s=this._cachedMeta.data;for(const[o,c,d]of this._syncList)this[o](c,d);this._syncList=[];const r=s.length,i=a.length,l=Math.min(i,r);l&&this.parse(0,l),i>r?this._insertElements(r,i-r,t):i<r&&this._removeElements(i,r-i)}_insertElements(t,a,s=!0){const r=this._cachedMeta,i=r.data,l=t+a;let o;const c=d=>{for(d.length+=a,o=d.length-1;o>=l;o--)d[o]=d[o-a]};for(c(i),o=t;o<l;++o)i[o]=new this.dataElementType;this._parsing&&c(r._parsed),this.parse(t,a),s&&this.updateElements(i,t,a,"reset")}updateElements(t,a,s,r){}_removeElements(t,a){const s=this._cachedMeta;if(this._parsing){const r=s._parsed.splice(t,a);s._stacked&&xg(s,r)}s.data.splice(t,a)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[a,s,r]=t;this[a](s,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,a){a&&this._sync(["_removeElements",t,a]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function hBe(e,t){if(!e._cache.$bar){const a=e.getMatchingVisibleMetas(t);let s=[];for(let r=0,i=a.length;r<i;r++)s=s.concat(a[r].controller.getAllParsedValues(e));e._cache.$bar=qZ(s.sort((r,i)=>r-i))}return e._cache.$bar}function gBe(e){const t=e.iScale,a=hBe(t,e.type);let s=t._length,r,i,l,o;const c=()=>{l===32767||l===-32768||(Ip(o)&&(s=Math.min(s,Math.abs(l-o)||s)),o=l)};for(r=0,i=a.length;r<i;++r)l=t.getPixelForValue(a[r]),c();for(o=void 0,r=0,i=t.ticks.length;r<i;++r)l=t.getPixelForTick(r),c();return s}function pBe(e,t,a,s){const r=a.barThickness;let i,l;return _n(r)?(i=t.min*a.categoryPercentage,l=a.barPercentage):(i=r*s,l=1),{chunk:i/s,ratio:l,start:t.pixels[e]-i/2}}function xBe(e,t,a,s){const r=t.pixels,i=r[e];let l=e>0?r[e-1]:null,o=e<r.length-1?r[e+1]:null;const c=a.categoryPercentage;l===null&&(l=i-(o===null?t.end-t.start:o-i)),o===null&&(o=i+i-l);const d=i-(i-Math.min(l,o))/2*c;return{chunk:Math.abs(o-l)/2*c/s,ratio:a.barPercentage,start:d}}function yBe(e,t,a,s){const r=a.parse(e[0],s),i=a.parse(e[1],s),l=Math.min(r,i),o=Math.max(r,i);let c=l,d=o;Math.abs(l)>Math.abs(o)&&(c=o,d=l),t[a.axis]=d,t._custom={barStart:c,barEnd:d,start:r,end:i,min:l,max:o}}function cJ(e,t,a,s){return Qa(e)?yBe(e,t,a,s):t[a.axis]=a.parse(e,s),t}function $8(e,t,a,s){const r=e.iScale,i=e.vScale,l=r.getLabels(),o=r===i,c=[];let d,u,f,p;for(d=a,u=a+s;d<u;++d)p=t[d],f={},f[r.axis]=o||r.parse(l[d],d),c.push(cJ(p,f,i,d));return c}function OA(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function bBe(e,t,a){return e!==0?wl(e):(t.isHorizontal()?1:-1)*(t.min>=a?1:-1)}function vBe(e){let t,a,s,r,i;return e.horizontal?(t=e.base>e.x,a="left",s="right"):(t=e.base<e.y,a="bottom",s="top"),t?(r="end",i="start"):(r="start",i="end"),{start:a,end:s,reverse:t,top:r,bottom:i}}function wBe(e,t,a,s){let r=t.borderSkipped;const i={};if(!r){e.borderSkipped=i;return}if(r===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:l,end:o,reverse:c,top:d,bottom:u}=vBe(e);r==="middle"&&a&&(e.enableBorderRadius=!0,(a._top||0)===s?r=d:(a._bottom||0)===s?r=u:(i[R8(u,l,o,c)]=!0,r=d)),i[R8(r,l,o,c)]=!0,e.borderSkipped=i}function R8(e,t,a,s){return s?(e=NBe(e,t,a),e=z8(e,a,t)):e=z8(e,t,a),e}function NBe(e,t,a){return e===t?a:e===a?t:e}function z8(e,t,a){return e==="start"?t:e==="end"?a:e}function jBe(e,{inflateAmount:t},a){e.inflateAmount=t==="auto"?a===1?.33:0:t}class CBe extends Yj{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,a,s,r){return $8(t,a,s,r)}parseArrayData(t,a,s,r){return $8(t,a,s,r)}parseObjectData(t,a,s,r){const{iScale:i,vScale:l}=t,{xAxisKey:o="x",yAxisKey:c="y"}=this._parsing,d=i.axis==="x"?o:c,u=l.axis==="x"?o:c,f=[];let p,x,y,w;for(p=s,x=s+r;p<x;++p)w=a[p],y={},y[i.axis]=i.parse(Lu(w,d),p),f.push(cJ(Lu(w,u),y,l,p));return f}updateRangeFromParsed(t,a,s,r){super.updateRangeFromParsed(t,a,s,r);const i=s._custom;i&&a===this._cachedMeta.vScale&&(t.min=Math.min(t.min,i.min),t.max=Math.max(t.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const a=this._cachedMeta,{iScale:s,vScale:r}=a,i=this.getParsed(t),l=i._custom,o=OA(l)?"["+l.start+", "+l.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+s.getLabelForValue(i[s.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const a=this._cachedMeta;this.updateElements(a.data,0,a.data.length,t)}updateElements(t,a,s,r){const i=r==="reset",{index:l,_cachedMeta:{vScale:o}}=this,c=o.getBasePixel(),d=o.isHorizontal(),u=this._getRuler(),{sharedOptions:f,includeOptions:p}=this._getSharedOptions(a,r);for(let x=a;x<a+s;x++){const y=this.getParsed(x),w=i||_n(y[o.axis])?{base:c,head:c}:this._calculateBarValuePixels(x),v=this._calculateBarIndexPixels(x,u),C=(y._stacks||{})[o.axis],N={horizontal:d,base:w.base,enableBorderRadius:!C||OA(y._custom)||l===C._top||l===C._bottom,x:d?w.head:v.center,y:d?v.center:w.head,height:d?v.size:Math.abs(w.size),width:d?Math.abs(w.size):v.size};p&&(N.options=f||this.resolveDataElementOptions(x,t[x].active?"active":r));const S=N.options||t[x].options;wBe(N,S,C,l),jBe(N,S,u.ratio),this.updateElement(t[x],x,N,r)}}_getStacks(t,a){const{iScale:s}=this._cachedMeta,r=s.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),i=s.options.stacked,l=[],o=this._cachedMeta.controller.getParsed(a),c=o&&o[s.axis],d=u=>{const f=u._parsed.find(x=>x[s.axis]===c),p=f&&f[u.vScale.axis];if(_n(p)||isNaN(p))return!0};for(const u of r)if(!(a!==void 0&&d(u))&&((i===!1||l.indexOf(u.stack)===-1||i===void 0&&u.stack===void 0)&&l.push(u.stack),u.index===t))break;return l.length||l.push(void 0),l}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,a=this.chart.options.indexAxis;return Object.keys(t).filter(s=>t[s].axis===a).shift()}_getAxis(){const t={},a=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)t[nn(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,a)]=!0;return Object.keys(t)}_getStackIndex(t,a,s){const r=this._getStacks(t,s),i=a!==void 0?r.indexOf(a):-1;return i===-1?r.length-1:i}_getRuler(){const t=this.options,a=this._cachedMeta,s=a.iScale,r=[];let i,l;for(i=0,l=a.data.length;i<l;++i)r.push(s.getPixelForValue(this.getParsed(i)[s.axis],i));const o=t.barThickness;return{min:o||gBe(a),pixels:r,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:t.grouped,ratio:o?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:a,_stacked:s,index:r},options:{base:i,minBarLength:l}}=this,o=i||0,c=this.getParsed(t),d=c._custom,u=OA(d);let f=c[a.axis],p=0,x=s?this.applyStack(a,c,s):f,y,w;x!==f&&(p=x-f,x=f),u&&(f=d.barStart,x=d.barEnd-d.barStart,f!==0&&wl(f)!==wl(d.barEnd)&&(p=0),p+=f);const v=!_n(i)&&!u?i:p;let C=a.getPixelForValue(v);if(this.chart.getDataVisibility(t)?y=a.getPixelForValue(p+x):y=C,w=y-C,Math.abs(w)<l){w=bBe(w,a,o)*l,f===o&&(C-=w/2);const N=a.getPixelForDecimal(0),S=a.getPixelForDecimal(1),T=Math.min(N,S),k=Math.max(N,S);C=Math.max(Math.min(C,k),T),y=C+w,s&&!u&&(c._stacks[a.axis]._visualValues[r]=a.getValueForPixel(y)-a.getValueForPixel(C))}if(C===a.getPixelForValue(o)){const N=wl(w)*a.getLineWidthForValue(o)/2;C+=N,w-=N}return{size:w,base:C,head:y,center:y+w/2}}_calculateBarIndexPixels(t,a){const s=a.scale,r=this.options,i=r.skipNull,l=nn(r.maxBarThickness,1/0);let o,c;const d=this._getAxisCount();if(a.grouped){const u=i?this._getStackCount(t):a.stackCount,f=r.barThickness==="flex"?xBe(t,a,r,u*d):pBe(t,a,r,u*d),p=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,x=this._getAxis().indexOf(nn(p,this.getFirstScaleIdForIndexAxis())),y=this._getStackIndex(this.index,this._cachedMeta.stack,i?t:void 0)+x;o=f.start+f.chunk*y+f.chunk/2,c=Math.min(l,f.chunk*f.ratio)}else o=s.getPixelForValue(this.getParsed(t)[s.axis],t),c=Math.min(l,a.min*a.ratio);return{base:o-c/2,head:o+c/2,center:o,size:c}}draw(){const t=this._cachedMeta,a=t.vScale,s=t.data,r=s.length;let i=0;for(;i<r;++i)this.getParsed(i)[a.axis]!==null&&!s[i].hidden&&s[i].draw(this._ctx)}}function SBe(e,t,a){let s=1,r=1,i=0,l=0;if(t<ya){const o=e,c=o+t,d=Math.cos(o),u=Math.sin(o),f=Math.cos(c),p=Math.sin(c),x=(S,T,k)=>Rp(S,o,c,!0)?1:Math.max(T,T*a,k,k*a),y=(S,T,k)=>Rp(S,o,c,!0)?-1:Math.min(T,T*a,k,k*a),w=x(0,d,f),v=x(Ka,u,p),C=y(Dn,d,f),N=y(Dn+Ka,u,p);s=(w-C)/2,r=(v-N)/2,i=-(w+C)/2,l=-(v+N)/2}return{ratioX:s,ratioY:r,offsetX:i,offsetY:l}}class _Be extends Yj{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const a=t.data,{labels:{pointStyle:s,textAlign:r,color:i,useBorderRadius:l,borderRadius:o}}=t.legend.options;return a.labels.length&&a.datasets.length?a.labels.map((c,d)=>{const f=t.getDatasetMeta(0).controller.getStyle(d);return{text:c,fillStyle:f.backgroundColor,fontColor:i,hidden:!t.getDataVisibility(d),lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:f.borderWidth,strokeStyle:f.borderColor,textAlign:r,pointStyle:s,borderRadius:l&&(o||f.borderRadius),index:d}}):[]}},onClick(t,a,s){s.chart.toggleDataVisibility(a.index),s.chart.update()}}}};constructor(t,a){super(t,a),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,a){const s=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=s;else{let i=c=>+s[c];if(pn(s[t])){const{key:c="value"}=this._parsing;i=d=>+Lu(s[d],c)}let l,o;for(l=t,o=t+a;l<o;++l)r._parsed[l]=i(l)}}_getRotation(){return po(this.options.rotation-90)}_getCircumference(){return po(this.options.circumference)}_getRotationExtents(){let t=ya,a=-ya;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const r=this.chart.getDatasetMeta(s).controller,i=r._getRotation(),l=r._getCircumference();t=Math.min(t,i),a=Math.max(a,i+l)}return{rotation:t,circumference:a-t}}update(t){const a=this.chart,{chartArea:s}=a,r=this._cachedMeta,i=r.data,l=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,o=Math.max((Math.min(s.width,s.height)-l)/2,0),c=Math.min(T7e(this.options.cutout,o),1),d=this._getRingWeight(this.index),{circumference:u,rotation:f}=this._getRotationExtents(),{ratioX:p,ratioY:x,offsetX:y,offsetY:w}=SBe(f,u,c),v=(s.width-l)/p,C=(s.height-l)/x,N=Math.max(Math.min(v,C)/2,0),S=BZ(this.options.radius,N),T=Math.max(S*c,0),k=(S-T)/this._getVisibleDatasetWeightTotal();this.offsetX=y*S,this.offsetY=w*S,r.total=this.calculateTotal(),this.outerRadius=S-k*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-k*d,0),this.updateElements(i,0,i.length,t)}_circumference(t,a){const s=this.options,r=this._cachedMeta,i=this._getCircumference();return a&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||r._parsed[t]===null||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*i/ya)}updateElements(t,a,s,r){const i=r==="reset",l=this.chart,o=l.chartArea,d=l.options.animation,u=(o.left+o.right)/2,f=(o.top+o.bottom)/2,p=i&&d.animateScale,x=p?0:this.innerRadius,y=p?0:this.outerRadius,{sharedOptions:w,includeOptions:v}=this._getSharedOptions(a,r);let C=this._getRotation(),N;for(N=0;N<a;++N)C+=this._circumference(N,i);for(N=a;N<a+s;++N){const S=this._circumference(N,i),T=t[N],k={x:u+this.offsetX,y:f+this.offsetY,startAngle:C,endAngle:C+S,circumference:S,outerRadius:y,innerRadius:x};v&&(k.options=w||this.resolveDataElementOptions(N,T.active?"active":r)),C+=S,this.updateElement(T,N,k,r)}}calculateTotal(){const t=this._cachedMeta,a=t.data;let s=0,r;for(r=0;r<a.length;r++){const i=t._parsed[r];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(r)&&!a[r].hidden&&(s+=Math.abs(i))}return s}calculateCircumference(t){const a=this._cachedMeta.total;return a>0&&!isNaN(t)?ya*(Math.abs(t)/a):0}getLabelAndValue(t){const a=this._cachedMeta,s=this.chart,r=s.data.labels||[],i=ED(a._parsed[t],s.options.locale);return{label:r[t]||"",value:i}}getMaxBorderWidth(t){let a=0;const s=this.chart;let r,i,l,o,c;if(!t){for(r=0,i=s.data.datasets.length;r<i;++r)if(s.isDatasetVisible(r)){l=s.getDatasetMeta(r),t=l.data,o=l.controller;break}}if(!t)return 0;for(r=0,i=t.length;r<i;++r)c=o.resolveDataElementOptions(r),c.borderAlign!=="inner"&&(a=Math.max(a,c.borderWidth||0,c.hoverBorderWidth||0));return a}getMaxOffset(t){let a=0;for(let s=0,r=t.length;s<r;++s){const i=this.resolveDataElementOptions(s);a=Math.max(a,i.offset||0,i.hoverOffset||0)}return a}_getRingWeightOffset(t){let a=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(a+=this._getRingWeight(s));return a}_getRingWeight(t){return Math.max(nn(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class ABe extends Yj{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const a=this._cachedMeta,{dataset:s,data:r=[],_dataset:i}=a,l=this.chart._animationsDisabled;let{start:o,count:c}=Q7e(a,r,l);this._drawStart=o,this._drawCount=c,K7e(a)&&(o=0,c=r.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!i._decimated,s.points=r;const d=this.resolveDatasetElementOptions(t);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(s,void 0,{animated:!l,options:d},t),this.updateElements(r,o,c,t)}updateElements(t,a,s,r){const i=r==="reset",{iScale:l,vScale:o,_stacked:c,_dataset:d}=this._cachedMeta,{sharedOptions:u,includeOptions:f}=this._getSharedOptions(a,r),p=l.axis,x=o.axis,{spanGaps:y,segment:w}=this.options,v=$p(y)?y:Number.POSITIVE_INFINITY,C=this.chart._animationsDisabled||i||r==="none",N=a+s,S=t.length;let T=a>0&&this.getParsed(a-1);for(let k=0;k<S;++k){const _=t[k],E=C?_:{};if(k<a||k>=N){E.skip=!0;continue}const A=this.getParsed(k),I=_n(A[x]),z=E[p]=l.getPixelForValue(A[p],k),F=E[x]=i||I?o.getBasePixel():o.getPixelForValue(c?this.applyStack(o,A,c):A[x],k);E.skip=isNaN(z)||isNaN(F)||I,E.stop=k>0&&Math.abs(A[p]-T[p])>v,w&&(E.parsed=A,E.raw=d.data[k]),f&&(E.options=u||this.resolveDataElementOptions(k,_.active?"active":r)),C||this.updateElement(_,k,E,r),T=A}}getMaxOverflow(){const t=this._cachedMeta,a=t.dataset,s=a.options&&a.options.borderWidth||0,r=t.data||[];if(!r.length)return s;const i=r[0].size(this.resolveDataElementOptions(0)),l=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,i,l)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}class EBe extends _Be{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}function Od(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class $D{static override(t){Object.assign($D.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return Od()}parse(){return Od()}format(){return Od()}add(){return Od()}diff(){return Od()}startOf(){return Od()}endOf(){return Od()}}var TBe={_date:$D};function kBe(e,t,a,s){const{controller:r,data:i,_sorted:l}=e,o=r._cachedMeta.iScale,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(o&&t===o.axis&&t!=="r"&&l&&i.length){const d=o._reversePixels?G7e:eu;if(s){if(r._sharedOptions){const u=i[0],f=typeof u.getRange=="function"&&u.getRange(t);if(f){const p=d(i,t,a-f),x=d(i,t,a+f);return{lo:p.lo,hi:x.hi}}}}else{const u=d(i,t,a);if(c){const{vScale:f}=r._cachedMeta,{_parsed:p}=e,x=p.slice(0,u.lo+1).reverse().findIndex(w=>!_n(w[f.axis]));u.lo-=Math.max(0,x);const y=p.slice(u.hi).findIndex(w=>!_n(w[f.axis]));u.hi+=Math.max(0,y)}return u}}return{lo:0,hi:i.length-1}}function Qj(e,t,a,s,r){const i=e.getSortedVisibleDatasetMetas(),l=a[t];for(let o=0,c=i.length;o<c;++o){const{index:d,data:u}=i[o],{lo:f,hi:p}=kBe(i[o],t,l,r);for(let x=f;x<=p;++x){const y=u[x];y.skip||s(y,d,x)}}}function LBe(e){const t=e.indexOf("x")!==-1,a=e.indexOf("y")!==-1;return function(s,r){const i=t?Math.abs(s.x-r.x):0,l=a?Math.abs(s.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(l,2))}}function MA(e,t,a,s,r){const i=[];return!r&&!e.isPointInArea(t)||Qj(e,a,t,function(o,c,d){!r&&!zp(o,e.chartArea,0)||o.inRange(t.x,t.y,s)&&i.push({element:o,datasetIndex:c,index:d})},!0),i}function PBe(e,t,a,s){let r=[];function i(l,o,c){const{startAngle:d,endAngle:u}=l.getProps(["startAngle","endAngle"],s),{angle:f}=WZ(l,{x:t.x,y:t.y});Rp(f,d,u)&&r.push({element:l,datasetIndex:o,index:c})}return Qj(e,a,t,i),r}function DBe(e,t,a,s,r,i){let l=[];const o=LBe(a);let c=Number.POSITIVE_INFINITY;function d(u,f,p){const x=u.inRange(t.x,t.y,r);if(s&&!x)return;const y=u.getCenterPoint(r);if(!(!!i||e.isPointInArea(y))&&!x)return;const v=o(t,y);v<c?(l=[{element:u,datasetIndex:f,index:p}],c=v):v===c&&l.push({element:u,datasetIndex:f,index:p})}return Qj(e,a,t,d),l}function IA(e,t,a,s,r,i){return!i&&!e.isPointInArea(t)?[]:a==="r"&&!s?PBe(e,t,a,r):DBe(e,t,a,s,r,i)}function F8(e,t,a,s,r){const i=[],l=a==="x"?"inXRange":"inYRange";let o=!1;return Qj(e,a,t,(c,d,u)=>{c[l]&&c[l](t[a],r)&&(i.push({element:c,datasetIndex:d,index:u}),o=o||c.inRange(t.x,t.y,r))}),s&&!o?[]:i}var OBe={modes:{index(e,t,a,s){const r=Ud(t,e),i=a.axis||"x",l=a.includeInvisible||!1,o=a.intersect?MA(e,r,i,s,l):IA(e,r,i,!1,s,l),c=[];return o.length?(e.getSortedVisibleDatasetMetas().forEach(d=>{const u=o[0].index,f=d.data[u];f&&!f.skip&&c.push({element:f,datasetIndex:d.index,index:u})}),c):[]},dataset(e,t,a,s){const r=Ud(t,e),i=a.axis||"xy",l=a.includeInvisible||!1;let o=a.intersect?MA(e,r,i,s,l):IA(e,r,i,!1,s,l);if(o.length>0){const c=o[0].datasetIndex,d=e.getDatasetMeta(c).data;o=[];for(let u=0;u<d.length;++u)o.push({element:d[u],datasetIndex:c,index:u})}return o},point(e,t,a,s){const r=Ud(t,e),i=a.axis||"xy",l=a.includeInvisible||!1;return MA(e,r,i,s,l)},nearest(e,t,a,s){const r=Ud(t,e),i=a.axis||"xy",l=a.includeInvisible||!1;return IA(e,r,i,a.intersect,s,l)},x(e,t,a,s){const r=Ud(t,e);return F8(e,r,"x",a.intersect,s)},y(e,t,a,s){const r=Ud(t,e);return F8(e,r,"y",a.intersect,s)}}};const dJ=["left","top","right","bottom"];function yg(e,t){return e.filter(a=>a.pos===t)}function U8(e,t){return e.filter(a=>dJ.indexOf(a.pos)===-1&&a.box.axis===t)}function bg(e,t){return e.sort((a,s)=>{const r=t?s:a,i=t?a:s;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function MBe(e){const t=[];let a,s,r,i,l,o;for(a=0,s=(e||[]).length;a<s;++a)r=e[a],{position:i,options:{stack:l,stackWeight:o=1}}=r,t.push({index:a,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:l&&i+l,stackWeight:o});return t}function IBe(e){const t={};for(const a of e){const{stack:s,pos:r,stackWeight:i}=a;if(!s||!dJ.includes(r))continue;const l=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=i}return t}function $Be(e,t){const a=IBe(e),{vBoxMaxWidth:s,hBoxMaxHeight:r}=t;let i,l,o;for(i=0,l=e.length;i<l;++i){o=e[i];const{fullSize:c}=o.box,d=a[o.stack],u=d&&o.stackWeight/d.weight;o.horizontal?(o.width=u?u*s:c&&t.availableWidth,o.height=r):(o.width=s,o.height=u?u*r:c&&t.availableHeight)}return a}function RBe(e){const t=MBe(e),a=bg(t.filter(d=>d.box.fullSize),!0),s=bg(yg(t,"left"),!0),r=bg(yg(t,"right")),i=bg(yg(t,"top"),!0),l=bg(yg(t,"bottom")),o=U8(t,"x"),c=U8(t,"y");return{fullSize:a,leftAndTop:s.concat(i),rightAndBottom:r.concat(c).concat(l).concat(o),chartArea:yg(t,"chartArea"),vertical:s.concat(r).concat(c),horizontal:i.concat(l).concat(o)}}function B8(e,t,a,s){return Math.max(e[a],t[a])+Math.max(e[s],t[s])}function uJ(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function zBe(e,t,a,s){const{pos:r,box:i}=a,l=e.maxPadding;if(!pn(r)){a.size&&(e[r]-=a.size);const f=s[a.stack]||{size:0,count:1};f.size=Math.max(f.size,a.horizontal?i.height:i.width),a.size=f.size/f.count,e[r]+=a.size}i.getPadding&&uJ(l,i.getPadding());const o=Math.max(0,t.outerWidth-B8(l,e,"left","right")),c=Math.max(0,t.outerHeight-B8(l,e,"top","bottom")),d=o!==e.w,u=c!==e.h;return e.w=o,e.h=c,a.horizontal?{same:d,other:u}:{same:u,other:d}}function FBe(e){const t=e.maxPadding;function a(s){const r=Math.max(t[s]-e[s],0);return e[s]+=r,r}e.y+=a("top"),e.x+=a("left"),a("right"),a("bottom")}function UBe(e,t){const a=t.maxPadding;function s(r){const i={left:0,top:0,right:0,bottom:0};return r.forEach(l=>{i[l]=Math.max(t[l],a[l])}),i}return s(e?["left","right"]:["top","bottom"])}function Rg(e,t,a,s){const r=[];let i,l,o,c,d,u;for(i=0,l=e.length,d=0;i<l;++i){o=e[i],c=o.box,c.update(o.width||t.w,o.height||t.h,UBe(o.horizontal,t));const{same:f,other:p}=zBe(t,a,o,s);d|=f&&r.length,u=u||p,c.fullSize||r.push(o)}return d&&Rg(r,t,a,s)||u}function xb(e,t,a,s,r){e.top=a,e.left=t,e.right=t+s,e.bottom=a+r,e.width=s,e.height=r}function H8(e,t,a,s){const r=a.padding;let{x:i,y:l}=t;for(const o of e){const c=o.box,d=s[o.stack]||{placed:0,weight:1},u=o.stackWeight/d.weight||1;if(o.horizontal){const f=t.w*u,p=d.size||c.height;Ip(d.start)&&(l=d.start),c.fullSize?xb(c,r.left,l,a.outerWidth-r.right-r.left,p):xb(c,t.left+d.placed,l,f,p),d.start=l,d.placed+=f,l=c.bottom}else{const f=t.h*u,p=d.size||c.width;Ip(d.start)&&(i=d.start),c.fullSize?xb(c,i,r.top,p,a.outerHeight-r.bottom-r.top):xb(c,i,t.top+d.placed,p,f),d.start=i,d.placed+=f,i=c.right}}t.x=i,t.y=l}var ii={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(a){t.draw(a)}}]},e.boxes.push(t)},removeBox(e,t){const a=e.boxes?e.boxes.indexOf(t):-1;a!==-1&&e.boxes.splice(a,1)},configure(e,t,a){t.fullSize=a.fullSize,t.position=a.position,t.weight=a.weight},update(e,t,a,s){if(!e)return;const r=gi(e.options.layout.padding),i=Math.max(t-r.width,0),l=Math.max(a-r.height,0),o=RBe(e.boxes),c=o.vertical,d=o.horizontal;Ln(e.boxes,w=>{typeof w.beforeLayout=="function"&&w.beforeLayout()});const u=c.reduce((w,v)=>v.box.options&&v.box.options.display===!1?w:w+1,0)||1,f=Object.freeze({outerWidth:t,outerHeight:a,padding:r,availableWidth:i,availableHeight:l,vBoxMaxWidth:i/2/u,hBoxMaxHeight:l/2}),p=Object.assign({},r);uJ(p,gi(s));const x=Object.assign({maxPadding:p,w:i,h:l,x:r.left,y:r.top},r),y=$Be(c.concat(d),f);Rg(o.fullSize,x,f,y),Rg(c,x,f,y),Rg(d,x,f,y)&&Rg(c,x,f,y),FBe(x),H8(o.leftAndTop,x,f,y),x.x+=x.w,x.y+=x.h,H8(o.rightAndBottom,x,f,y),e.chartArea={left:x.left,top:x.top,right:x.left+x.w,bottom:x.top+x.h,height:x.h,width:x.w},Ln(o.chartArea,w=>{const v=w.box;Object.assign(v,e.chartArea),v.update(x.w,x.h,{left:0,top:0,right:0,bottom:0})})}};class mJ{acquireContext(t,a){}releaseContext(t){return!1}addEventListener(t,a,s){}removeEventListener(t,a,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,a,s,r){return a=Math.max(0,a||t.width),s=s||t.height,{width:a,height:Math.max(0,r?Math.floor(a/r):s)}}isAttached(t){return!0}updateConfig(t){}}class BBe extends mJ{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const qb="$chartjs",HBe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},G8=e=>e===null||e==="";function GBe(e,t){const a=e.style,s=e.getAttribute("height"),r=e.getAttribute("width");if(e[qb]={initial:{height:s,width:r,style:{display:a.display,height:a.height,width:a.width}}},a.display=a.display||"block",a.boxSizing=a.boxSizing||"border-box",G8(r)){const i=A8(e,"width");i!==void 0&&(e.width=i)}if(G8(s))if(e.style.height==="")e.height=e.width/(t||2);else{const i=A8(e,"height");i!==void 0&&(e.height=i)}return e}const fJ=z8e?{passive:!0}:!1;function WBe(e,t,a){e&&e.addEventListener(t,a,fJ)}function VBe(e,t,a){e&&e.canvas&&e.canvas.removeEventListener(t,a,fJ)}function qBe(e,t){const a=HBe[e.type]||e.type,{x:s,y:r}=Ud(e,t);return{type:a,chart:t,native:e,x:s!==void 0?s:null,y:r!==void 0?r:null}}function vw(e,t){for(const a of e)if(a===t||a.contains(t))return!0}function YBe(e,t,a){const s=e.canvas,r=new MutationObserver(i=>{let l=!1;for(const o of i)l=l||vw(o.addedNodes,s),l=l&&!vw(o.removedNodes,s);l&&a()});return r.observe(document,{childList:!0,subtree:!0}),r}function QBe(e,t,a){const s=e.canvas,r=new MutationObserver(i=>{let l=!1;for(const o of i)l=l||vw(o.removedNodes,s),l=l&&!vw(o.addedNodes,s);l&&a()});return r.observe(document,{childList:!0,subtree:!0}),r}const Up=new Map;let W8=0;function hJ(){const e=window.devicePixelRatio;e!==W8&&(W8=e,Up.forEach((t,a)=>{a.currentDevicePixelRatio!==e&&t()}))}function KBe(e,t){Up.size||window.addEventListener("resize",hJ),Up.set(e,t)}function XBe(e){Up.delete(e),Up.size||window.removeEventListener("resize",hJ)}function ZBe(e,t,a){const s=e.canvas,r=s&&ID(s);if(!r)return;const i=QZ((o,c)=>{const d=r.clientWidth;a(o,c),d<r.clientWidth&&a()},window),l=new ResizeObserver(o=>{const c=o[0],d=c.contentRect.width,u=c.contentRect.height;d===0&&u===0||i(d,u)});return l.observe(r),KBe(e,i),l}function $A(e,t,a){a&&a.disconnect(),t==="resize"&&XBe(e)}function JBe(e,t,a){const s=e.canvas,r=QZ(i=>{e.ctx!==null&&a(qBe(i,e))},e);return WBe(s,t,r),r}class eHe extends mJ{acquireContext(t,a){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(GBe(t,a),s):null}releaseContext(t){const a=t.canvas;if(!a[qb])return!1;const s=a[qb].initial;["height","width"].forEach(i=>{const l=s[i];_n(l)?a.removeAttribute(i):a.setAttribute(i,l)});const r=s.style||{};return Object.keys(r).forEach(i=>{a.style[i]=r[i]}),a.width=a.width,delete a[qb],!0}addEventListener(t,a,s){this.removeEventListener(t,a);const r=t.$proxies||(t.$proxies={}),l={attach:YBe,detach:QBe,resize:ZBe}[a]||JBe;r[a]=l(t,a,s)}removeEventListener(t,a){const s=t.$proxies||(t.$proxies={}),r=s[a];if(!r)return;({attach:$A,detach:$A,resize:$A}[a]||VBe)(t,a,r),s[a]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,a,s,r){return R8e(t,a,s,r)}isAttached(t){const a=t&&ID(t);return!!(a&&a.isConnected)}}function tHe(e){return!MD()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?BBe:eHe}let Xo=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:a,y:s}=this.getProps(["x","y"],t);return{x:a,y:s}}hasValue(){return $p(this.x)&&$p(this.y)}getProps(t,a){const s=this.$animations;if(!a||!s)return this;const r={};return t.forEach(i=>{r[i]=s[i]&&s[i].active()?s[i]._to:this[i]}),r}};function nHe(e,t){const a=e.options.ticks,s=aHe(e),r=Math.min(a.maxTicksLimit||s,s),i=a.major.enabled?rHe(t):[],l=i.length,o=i[0],c=i[l-1],d=[];if(l>r)return iHe(t,d,i,l/r),d;const u=sHe(i,t,r);if(l>0){let f,p;const x=l>1?Math.round((c-o)/(l-1)):null;for(yb(t,d,u,_n(x)?0:o-x,o),f=0,p=l-1;f<p;f++)yb(t,d,u,i[f],i[f+1]);return yb(t,d,u,c,_n(x)?t.length:c+x),d}return yb(t,d,u),d}function aHe(e){const t=e.options.offset,a=e._tickSize(),s=e._length/a+(t?0:1),r=e._maxLength/a;return Math.floor(Math.min(s,r))}function sHe(e,t,a){const s=lHe(e),r=t.length/a;if(!s)return Math.max(r,1);const i=$7e(s);for(let l=0,o=i.length-1;l<o;l++){const c=i[l];if(c>r)return c}return Math.max(r,1)}function rHe(e){const t=[];let a,s;for(a=0,s=e.length;a<s;a++)e[a].major&&t.push(a);return t}function iHe(e,t,a,s){let r=0,i=a[0],l;for(s=Math.ceil(s),l=0;l<e.length;l++)l===i&&(t.push(e[l]),r++,i=a[r*s])}function yb(e,t,a,s,r){const i=nn(s,0),l=Math.min(nn(r,e.length),e.length);let o=0,c,d,u;for(a=Math.ceil(a),r&&(c=r-s,a=c/Math.floor(c/a)),u=i;u<0;)o++,u=Math.round(i+o*a);for(d=Math.max(i,0);d<l;d++)d===u&&(t.push(e[d]),o++,u=Math.round(i+o*a))}function lHe(e){const t=e.length;let a,s;if(t<2)return!1;for(s=e[0],a=1;a<t;++a)if(e[a]-e[a-1]!==s)return!1;return s}const oHe=e=>e==="left"?"right":e==="right"?"left":e,V8=(e,t,a)=>t==="top"||t==="left"?e[t]+a:e[t]-a,q8=(e,t)=>Math.min(t||e,e);function Y8(e,t){const a=[],s=e.length/t,r=e.length;let i=0;for(;i<r;i+=s)a.push(e[Math.floor(i)]);return a}function cHe(e,t,a){const s=e.ticks.length,r=Math.min(t,s-1),i=e._startPixel,l=e._endPixel,o=1e-6;let c=e.getPixelForTick(r),d;if(!(a&&(s===1?d=Math.max(c-i,l-c):t===0?d=(e.getPixelForTick(1)-c)/2:d=(c-e.getPixelForTick(r-1))/2,c+=r<t?d:-d,c<i-o||c>l+o)))return c}function dHe(e,t){Ln(e,a=>{const s=a.gc,r=s.length/2;let i;if(r>t){for(i=0;i<r;++i)delete a.data[s[i]];s.splice(0,r)}})}function vg(e){return e.drawTicks?e.tickLength:0}function Q8(e,t){if(!e.display)return 0;const a=Ts(e.font,t),s=gi(e.padding);return(Qa(e.text)?e.text.length:1)*a.lineHeight+s.height}function uHe(e,t){return Gu(e,{scale:t,type:"scale"})}function mHe(e,t,a){return Gu(e,{tick:a,index:t,type:"tick"})}function fHe(e,t,a){let s=_D(e);return(a&&t!=="right"||!a&&t==="right")&&(s=oHe(s)),s}function hHe(e,t,a,s){const{top:r,left:i,bottom:l,right:o,chart:c}=e,{chartArea:d,scales:u}=c;let f=0,p,x,y;const w=l-r,v=o-i;if(e.isHorizontal()){if(x=Cs(s,i,o),pn(a)){const C=Object.keys(a)[0],N=a[C];y=u[C].getPixelForValue(N)+w-t}else a==="center"?y=(d.bottom+d.top)/2+w-t:y=V8(e,a,t);p=o-i}else{if(pn(a)){const C=Object.keys(a)[0],N=a[C];x=u[C].getPixelForValue(N)-v+t}else a==="center"?x=(d.left+d.right)/2-v+t:x=V8(e,a,t);y=Cs(s,l,r),f=a==="left"?-Ka:Ka}return{titleX:x,titleY:y,maxWidth:p,rotation:f}}class ih extends Xo{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,a){return t}getUserBounds(){let{_userMin:t,_userMax:a,_suggestedMin:s,_suggestedMax:r}=this;return t=tl(t,Number.POSITIVE_INFINITY),a=tl(a,Number.NEGATIVE_INFINITY),s=tl(s,Number.POSITIVE_INFINITY),r=tl(r,Number.NEGATIVE_INFINITY),{min:tl(t,s),max:tl(a,r),minDefined:hi(t),maxDefined:hi(a)}}getMinMax(t){let{min:a,max:s,minDefined:r,maxDefined:i}=this.getUserBounds(),l;if(r&&i)return{min:a,max:s};const o=this.getMatchingVisibleMetas();for(let c=0,d=o.length;c<d;++c)l=o[c].controller.getMinMax(this,t),r||(a=Math.min(a,l.min)),i||(s=Math.max(s,l.max));return a=i&&a>s?s:a,s=r&&a>s?a:s,{min:tl(a,tl(s,a)),max:tl(s,tl(a,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Kn(this.options.beforeUpdate,[this])}update(t,a,s){const{beginAtZero:r,grace:i,ticks:l}=this.options,o=l.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=a,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=p8e(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=o<this.ticks.length;this._convertTicksToLabels(c?Y8(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),l.display&&(l.autoSkip||l.source==="auto")&&(this.ticks=nHe(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,a,s;this.isHorizontal()?(a=this.left,s=this.right):(a=this.top,s=this.bottom,t=!t),this._startPixel=a,this._endPixel=s,this._reversePixels=t,this._length=s-a,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Kn(this.options.afterUpdate,[this])}beforeSetDimensions(){Kn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Kn(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Kn(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Kn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const a=this.options.ticks;let s,r,i;for(s=0,r=t.length;s<r;s++)i=t[s],i.label=Kn(a.callback,[i.value,s,t],this)}afterTickToLabelConversion(){Kn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Kn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,a=t.ticks,s=q8(this.ticks.length,t.ticks.maxTicksLimit),r=a.minRotation||0,i=a.maxRotation;let l=r,o,c,d;if(!this._isVisible()||!a.display||r>=i||s<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),f=u.widest.width,p=u.highest.height,x=Es(this.chart.width-f,0,this.maxWidth);o=t.offset?this.maxWidth/s:x/(s-1),f+6>o&&(o=x/(s-(t.offset?.5:1)),c=this.maxHeight-vg(t.grid)-a.padding-Q8(t.title,this.chart.options.font),d=Math.sqrt(f*f+p*p),l=U7e(Math.min(Math.asin(Es((u.highest.height+6)/o,-1,1)),Math.asin(Es(c/d,-1,1))-Math.asin(Es(p/d,-1,1)))),l=Math.max(r,Math.min(i,l))),this.labelRotation=l}afterCalculateLabelRotation(){Kn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Kn(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:a,options:{ticks:s,title:r,grid:i}}=this,l=this._isVisible(),o=this.isHorizontal();if(l){const c=Q8(r,a.options.font);if(o?(t.width=this.maxWidth,t.height=vg(i)+c):(t.height=this.maxHeight,t.width=vg(i)+c),s.display&&this.ticks.length){const{first:d,last:u,widest:f,highest:p}=this._getLabelSizes(),x=s.padding*2,y=po(this.labelRotation),w=Math.cos(y),v=Math.sin(y);if(o){const C=s.mirror?0:v*f.width+w*p.height;t.height=Math.min(this.maxHeight,t.height+C+x)}else{const C=s.mirror?0:w*f.width+v*p.height;t.width=Math.min(this.maxWidth,t.width+C+x)}this._calculatePadding(d,u,v,w)}}this._handleMargins(),o?(this.width=this._length=a.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=a.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,a,s,r){const{ticks:{align:i,padding:l},position:o}=this.options,c=this.labelRotation!==0,d=o!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,x=0;c?d?(p=r*t.width,x=s*a.height):(p=s*t.height,x=r*a.width):i==="start"?x=a.width:i==="end"?p=t.width:i!=="inner"&&(p=t.width/2,x=a.width/2),this.paddingLeft=Math.max((p-u+l)*this.width/(this.width-u),0),this.paddingRight=Math.max((x-f+l)*this.width/(this.width-f),0)}else{let u=a.height/2,f=t.height/2;i==="start"?(u=0,f=t.height):i==="end"&&(u=a.height,f=0),this.paddingTop=u+l,this.paddingBottom=f+l}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Kn(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:a}=this.options;return a==="top"||a==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let a,s;for(a=0,s=t.length;a<s;a++)_n(t[a].label)&&(t.splice(a,1),s--,a--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const a=this.options.ticks.sampleSize;let s=this.ticks;a<s.length&&(s=Y8(s,a)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,a,s){const{ctx:r,_longestTextCache:i}=this,l=[],o=[],c=Math.floor(a/q8(a,s));let d=0,u=0,f,p,x,y,w,v,C,N,S,T,k;for(f=0;f<a;f+=c){if(y=t[f].label,w=this._resolveTickFontOptions(f),r.font=v=w.string,C=i[v]=i[v]||{data:{},gc:[]},N=w.lineHeight,S=T=0,!_n(y)&&!Qa(y))S=N8(r,C.data,C.gc,S,y),T=N;else if(Qa(y))for(p=0,x=y.length;p<x;++p)k=y[p],!_n(k)&&!Qa(k)&&(S=N8(r,C.data,C.gc,S,k),T+=N);l.push(S),o.push(T),d=Math.max(S,d),u=Math.max(T,u)}dHe(i,a);const _=l.indexOf(d),E=o.indexOf(u),A=I=>({width:l[I]||0,height:o[I]||0});return{first:A(0),last:A(a-1),widest:A(_),highest:A(E),widths:l,heights:o}}getLabelForValue(t){return t}getPixelForValue(t,a){return NaN}getValueForPixel(t){}getPixelForTick(t){const a=this.ticks;return t<0||t>a.length-1?null:this.getPixelForValue(a[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const a=this._startPixel+t*this._length;return H7e(this._alignToPixels?Dd(this.chart,a,0):a)}getDecimalForPixel(t){const a=(t-this._startPixel)/this._length;return this._reversePixels?1-a:a}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:a}=this;return t<0&&a<0?a:t>0&&a>0?t:0}getContext(t){const a=this.ticks||[];if(t>=0&&t<a.length){const s=a[t];return s.$context||(s.$context=mHe(this.getContext(),t,s))}return this.$context||(this.$context=uHe(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,a=po(this.labelRotation),s=Math.abs(Math.cos(a)),r=Math.abs(Math.sin(a)),i=this._getLabelSizes(),l=t.autoSkipPadding||0,o=i?i.widest.width+l:0,c=i?i.highest.height+l:0;return this.isHorizontal()?c*s>o*r?o/s:c/r:c*r<o*s?c/s:o/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const a=this.axis,s=this.chart,r=this.options,{grid:i,position:l,border:o}=r,c=i.offset,d=this.isHorizontal(),f=this.ticks.length+(c?1:0),p=vg(i),x=[],y=o.setContext(this.getContext()),w=y.display?y.width:0,v=w/2,C=function(R){return Dd(s,R,w)};let N,S,T,k,_,E,A,I,z,F,D,M;if(l==="top")N=C(this.bottom),E=this.bottom-p,I=N-v,F=C(t.top)+v,M=t.bottom;else if(l==="bottom")N=C(this.top),F=t.top,M=C(t.bottom)-v,E=N+v,I=this.top+p;else if(l==="left")N=C(this.right),_=this.right-p,A=N-v,z=C(t.left)+v,D=t.right;else if(l==="right")N=C(this.left),z=t.left,D=C(t.right)-v,_=N+v,A=this.left+p;else if(a==="x"){if(l==="center")N=C((t.top+t.bottom)/2+.5);else if(pn(l)){const R=Object.keys(l)[0],Q=l[R];N=C(this.chart.scales[R].getPixelForValue(Q))}F=t.top,M=t.bottom,E=N+v,I=E+p}else if(a==="y"){if(l==="center")N=C((t.left+t.right)/2);else if(pn(l)){const R=Object.keys(l)[0],Q=l[R];N=C(this.chart.scales[R].getPixelForValue(Q))}_=N-v,A=_-p,z=t.left,D=t.right}const W=nn(r.ticks.maxTicksLimit,f),Z=Math.max(1,Math.ceil(f/W));for(S=0;S<f;S+=Z){const R=this.getContext(S),Q=i.setContext(R),Y=o.setContext(R),oe=Q.lineWidth,re=Q.color,ee=Y.dash||[],H=Y.dashOffset,ye=Q.tickWidth,te=Q.tickColor,ve=Q.tickBorderDash||[],je=Q.tickBorderDashOffset;T=cHe(this,S,c),T!==void 0&&(k=Dd(s,T,oe),d?_=A=z=D=k:E=I=F=M=k,x.push({tx1:_,ty1:E,tx2:A,ty2:I,x1:z,y1:F,x2:D,y2:M,width:oe,color:re,borderDash:ee,borderDashOffset:H,tickWidth:ye,tickColor:te,tickBorderDash:ve,tickBorderDashOffset:je}))}return this._ticksLength=f,this._borderValue=N,x}_computeLabelItems(t){const a=this.axis,s=this.options,{position:r,ticks:i}=s,l=this.isHorizontal(),o=this.ticks,{align:c,crossAlign:d,padding:u,mirror:f}=i,p=vg(s.grid),x=p+u,y=f?-u:x,w=-po(this.labelRotation),v=[];let C,N,S,T,k,_,E,A,I,z,F,D,M="middle";if(r==="top")_=this.bottom-y,E=this._getXAxisLabelAlignment();else if(r==="bottom")_=this.top+y,E=this._getXAxisLabelAlignment();else if(r==="left"){const Z=this._getYAxisLabelAlignment(p);E=Z.textAlign,k=Z.x}else if(r==="right"){const Z=this._getYAxisLabelAlignment(p);E=Z.textAlign,k=Z.x}else if(a==="x"){if(r==="center")_=(t.top+t.bottom)/2+x;else if(pn(r)){const Z=Object.keys(r)[0],R=r[Z];_=this.chart.scales[Z].getPixelForValue(R)+x}E=this._getXAxisLabelAlignment()}else if(a==="y"){if(r==="center")k=(t.left+t.right)/2-x;else if(pn(r)){const Z=Object.keys(r)[0],R=r[Z];k=this.chart.scales[Z].getPixelForValue(R)}E=this._getYAxisLabelAlignment(p).textAlign}a==="y"&&(c==="start"?M="top":c==="end"&&(M="bottom"));const W=this._getLabelSizes();for(C=0,N=o.length;C<N;++C){S=o[C],T=S.label;const Z=i.setContext(this.getContext(C));A=this.getPixelForTick(C)+i.labelOffset,I=this._resolveTickFontOptions(C),z=I.lineHeight,F=Qa(T)?T.length:1;const R=F/2,Q=Z.color,Y=Z.textStrokeColor,oe=Z.textStrokeWidth;let re=E;l?(k=A,E==="inner"&&(C===N-1?re=this.options.reverse?"left":"right":C===0?re=this.options.reverse?"right":"left":re="center"),r==="top"?d==="near"||w!==0?D=-F*z+z/2:d==="center"?D=-W.highest.height/2-R*z+z:D=-W.highest.height+z/2:d==="near"||w!==0?D=z/2:d==="center"?D=W.highest.height/2-R*z:D=W.highest.height-F*z,f&&(D*=-1),w!==0&&!Z.showLabelBackdrop&&(k+=z/2*Math.sin(w))):(_=A,D=(1-F)*z/2);let ee;if(Z.showLabelBackdrop){const H=gi(Z.backdropPadding),ye=W.heights[C],te=W.widths[C];let ve=D-H.top,je=0-H.left;switch(M){case"middle":ve-=ye/2;break;case"bottom":ve-=ye;break}switch(E){case"center":je-=te/2;break;case"right":je-=te;break;case"inner":C===N-1?je-=te:C>0&&(je-=te/2);break}ee={left:je,top:ve,width:te+H.width,height:ye+H.height,color:Z.backdropColor}}v.push({label:T,font:I,textOffset:D,options:{rotation:w,color:Q,strokeColor:Y,strokeWidth:oe,textAlign:re,textBaseline:M,translation:[k,_],backdrop:ee}})}return v}_getXAxisLabelAlignment(){const{position:t,ticks:a}=this.options;if(-po(this.labelRotation))return t==="top"?"left":"right";let r="center";return a.align==="start"?r="left":a.align==="end"?r="right":a.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:a,ticks:{crossAlign:s,mirror:r,padding:i}}=this.options,l=this._getLabelSizes(),o=t+i,c=l.widest.width;let d,u;return a==="left"?r?(u=this.right+i,s==="near"?d="left":s==="center"?(d="center",u+=c/2):(d="right",u+=c)):(u=this.right-o,s==="near"?d="right":s==="center"?(d="center",u-=c/2):(d="left",u=this.left)):a==="right"?r?(u=this.left+i,s==="near"?d="right":s==="center"?(d="center",u-=c/2):(d="left",u-=c)):(u=this.left+o,s==="near"?d="left":s==="center"?(d="center",u+=c/2):(d="right",u=this.right)):d="right",{textAlign:d,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,a=this.options.position;if(a==="left"||a==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(a==="top"||a==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:a},left:s,top:r,width:i,height:l}=this;a&&(t.save(),t.fillStyle=a,t.fillRect(s,r,i,l),t.restore())}getLineWidthForValue(t){const a=this.options.grid;if(!this._isVisible()||!a.display)return 0;const r=this.ticks.findIndex(i=>i.value===t);return r>=0?a.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const a=this.options.grid,s=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let i,l;const o=(c,d,u)=>{!u.width||!u.color||(s.save(),s.lineWidth=u.width,s.strokeStyle=u.color,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset,s.beginPath(),s.moveTo(c.x,c.y),s.lineTo(d.x,d.y),s.stroke(),s.restore())};if(a.display)for(i=0,l=r.length;i<l;++i){const c=r[i];a.drawOnChartArea&&o({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),a.drawTicks&&o({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:a,options:{border:s,grid:r}}=this,i=s.setContext(this.getContext()),l=s.display?i.width:0;if(!l)return;const o=r.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let d,u,f,p;this.isHorizontal()?(d=Dd(t,this.left,l)-l/2,u=Dd(t,this.right,o)+o/2,f=p=c):(f=Dd(t,this.top,l)-l/2,p=Dd(t,this.bottom,o)+o/2,d=u=c),a.save(),a.lineWidth=i.width,a.strokeStyle=i.color,a.beginPath(),a.moveTo(d,f),a.lineTo(u,p),a.stroke(),a.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,r=this._computeLabelArea();r&&TD(s,r);const i=this.getLabelItems(t);for(const l of i){const o=l.options,c=l.font,d=l.label,u=l.textOffset;Fp(s,d,0,u,c,o)}r&&kD(s)}drawTitle(){const{ctx:t,options:{position:a,title:s,reverse:r}}=this;if(!s.display)return;const i=Ts(s.font),l=gi(s.padding),o=s.align;let c=i.lineHeight/2;a==="bottom"||a==="center"||pn(a)?(c+=l.bottom,Qa(s.text)&&(c+=i.lineHeight*(s.text.length-1))):c+=l.top;const{titleX:d,titleY:u,maxWidth:f,rotation:p}=hHe(this,c,a,o);Fp(t,s.text,0,0,i,{color:s.color,maxWidth:f,rotation:p,textAlign:fHe(o,a,r),textBaseline:"middle",translation:[d,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,a=t.ticks&&t.ticks.z||0,s=nn(t.grid&&t.grid.z,-1),r=nn(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==ih.prototype.draw?[{z:a,draw:i=>{this.draw(i)}}]:[{z:s,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:a,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(t){const a=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",r=[];let i,l;for(i=0,l=a.length;i<l;++i){const o=a[i];o[s]===this.id&&(!t||o.type===t)&&r.push(o)}return r}_resolveTickFontOptions(t){const a=this.options.ticks.setContext(this.getContext(t));return Ts(a.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class bb{constructor(t,a,s){this.type=t,this.scope=a,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const a=Object.getPrototypeOf(t);let s;xHe(a)&&(s=this.register(a));const r=this.items,i=t.id,l=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+t);return i in r||(r[i]=t,gHe(t,l,s),this.override&&Ca.override(t.id,t.overrides)),l}get(t){return this.items[t]}unregister(t){const a=this.items,s=t.id,r=this.scope;s in a&&delete a[s],r&&s in Ca[r]&&(delete Ca[r][s],this.override&&delete Pu[s])}}function gHe(e,t,a){const s=Mp(Object.create(null),[a?Ca.get(a):{},Ca.get(t),e.defaults]);Ca.set(t,s),e.defaultRoutes&&pHe(t,e.defaultRoutes),e.descriptors&&Ca.describe(t,e.descriptors)}function pHe(e,t){Object.keys(t).forEach(a=>{const s=a.split("."),r=s.pop(),i=[e].concat(s).join("."),l=t[a].split("."),o=l.pop(),c=l.join(".");Ca.route(i,r,c,o)})}function xHe(e){return"id"in e&&"defaults"in e}class yHe{constructor(){this.controllers=new bb(Yj,"datasets",!0),this.elements=new bb(Xo,"elements"),this.plugins=new bb(Object,"plugins"),this.scales=new bb(ih,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,a,s){[...a].forEach(r=>{const i=s||this._getRegistryForType(r);s||i.isForType(r)||i===this.plugins&&r.id?this._exec(t,i,r):Ln(r,l=>{const o=s||this._getRegistryForType(l);this._exec(t,o,l)})})}_exec(t,a,s){const r=CD(t);Kn(s["before"+r],[],s),a[t](s),Kn(s["after"+r],[],s)}_getRegistryForType(t){for(let a=0;a<this._typedRegistries.length;a++){const s=this._typedRegistries[a];if(s.isForType(t))return s}return this.plugins}_get(t,a,s){const r=a.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return r}}var rl=new yHe;class bHe{constructor(){this._init=void 0}notify(t,a,s,r){if(a==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const i=r?this._descriptors(t).filter(r):this._descriptors(t),l=this._notify(i,t,a,s);return a==="afterDestroy"&&(this._notify(i,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),l}_notify(t,a,s,r){r=r||{};for(const i of t){const l=i.plugin,o=l[s],c=[a,r,i.options];if(Kn(o,c,l)===!1&&r.cancelable)return!1}return!0}invalidate(){_n(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const a=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),a}_createDescriptors(t,a){const s=t&&t.config,r=nn(s.options&&s.options.plugins,{}),i=vHe(s);return r===!1&&!a?[]:NHe(t,i,r,a)}_notifyStateChanges(t){const a=this._oldCache||[],s=this._cache,r=(i,l)=>i.filter(o=>!l.some(c=>o.plugin.id===c.plugin.id));this._notify(r(a,s),t,"stop"),this._notify(r(s,a),t,"start")}}function vHe(e){const t={},a=[],s=Object.keys(rl.plugins.items);for(let i=0;i<s.length;i++)a.push(rl.getPlugin(s[i]));const r=e.plugins||[];for(let i=0;i<r.length;i++){const l=r[i];a.indexOf(l)===-1&&(a.push(l),t[l.id]=!0)}return{plugins:a,localIds:t}}function wHe(e,t){return!t&&e===!1?null:e===!0?{}:e}function NHe(e,{plugins:t,localIds:a},s,r){const i=[],l=e.getContext();for(const o of t){const c=o.id,d=wHe(s[c],r);d!==null&&i.push({plugin:o,options:jHe(e.config,{plugin:o,local:a[c]},d,l)})}return i}function jHe(e,{plugin:t,local:a},s,r){const i=e.pluginScopeKeys(t),l=e.getOptionScopes(s,i);return a&&t.defaults&&l.push(t.defaults),e.createResolver(l,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Ck(e,t){const a=Ca.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||a.indexAxis||"x"}function CHe(e,t){let a=e;return e==="_index_"?a=t:e==="_value_"&&(a=t==="x"?"y":"x"),a}function SHe(e,t){return e===t?"_index_":"_value_"}function K8(e){if(e==="x"||e==="y"||e==="r")return e}function _He(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function Sk(e,...t){if(K8(e))return e;for(const a of t){const s=a.axis||_He(a.position)||e.length>1&&K8(e[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function X8(e,t,a){if(a[t+"AxisID"]===e)return{axis:t}}function AHe(e,t){if(t.data&&t.data.datasets){const a=t.data.datasets.filter(s=>s.xAxisID===e||s.yAxisID===e);if(a.length)return X8(e,"x",a[0])||X8(e,"y",a[0])}return{}}function EHe(e,t){const a=Pu[e.type]||{scales:{}},s=t.scales||{},r=Ck(e.type,t),i=Object.create(null);return Object.keys(s).forEach(l=>{const o=s[l];if(!pn(o))return console.error(`Invalid scale configuration for scale: ${l}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const c=Sk(l,o,AHe(l,e),Ca.scales[o.type]),d=SHe(c,r),u=a.scales||{};i[l]=Kg(Object.create(null),[{axis:c},o,u[c],u[d]])}),e.data.datasets.forEach(l=>{const o=l.type||e.type,c=l.indexAxis||Ck(o,t),u=(Pu[o]||{}).scales||{};Object.keys(u).forEach(f=>{const p=CHe(f,c),x=l[p+"AxisID"]||p;i[x]=i[x]||Object.create(null),Kg(i[x],[{axis:p},s[x],u[f]])})}),Object.keys(i).forEach(l=>{const o=i[l];Kg(o,[Ca.scales[o.type],Ca.scale])}),i}function gJ(e){const t=e.options||(e.options={});t.plugins=nn(t.plugins,{}),t.scales=EHe(e,t)}function pJ(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function THe(e){return e=e||{},e.data=pJ(e.data),gJ(e),e}const Z8=new Map,xJ=new Set;function vb(e,t){let a=Z8.get(e);return a||(a=t(),Z8.set(e,a),xJ.add(a)),a}const wg=(e,t,a)=>{const s=Lu(t,a);s!==void 0&&e.add(s)};class kHe{constructor(t){this._config=THe(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=pJ(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),gJ(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return vb(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,a){return vb(`${t}.transition.${a}`,()=>[[`datasets.${t}.transitions.${a}`,`transitions.${a}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,a){return vb(`${t}-${a}`,()=>[[`datasets.${t}.elements.${a}`,`datasets.${t}`,`elements.${a}`,""]])}pluginScopeKeys(t){const a=t.id,s=this.type;return vb(`${s}-plugin-${a}`,()=>[[`plugins.${a}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,a){const s=this._scopeCache;let r=s.get(t);return(!r||a)&&(r=new Map,s.set(t,r)),r}getOptionScopes(t,a,s){const{options:r,type:i}=this,l=this._cachedScopes(t,s),o=l.get(a);if(o)return o;const c=new Set;a.forEach(u=>{t&&(c.add(t),u.forEach(f=>wg(c,t,f))),u.forEach(f=>wg(c,r,f)),u.forEach(f=>wg(c,Pu[i]||{},f)),u.forEach(f=>wg(c,Ca,f)),u.forEach(f=>wg(c,Nk,f))});const d=Array.from(c);return d.length===0&&d.push(Object.create(null)),xJ.has(a)&&l.set(a,d),d}chartOptionScopes(){const{options:t,type:a}=this;return[t,Pu[a]||{},Ca.datasets[a]||{},{type:a},Ca,Nk]}resolveNamedOptions(t,a,s,r=[""]){const i={$shared:!0},{resolver:l,subPrefixes:o}=J8(this._resolverCache,t,r);let c=l;if(PHe(l,a)){i.$shared=!1,s=sd(s)?s():s;const d=this.createResolver(t,s,o);c=kf(l,s,d)}for(const d of a)i[d]=c[d];return i}createResolver(t,a,s=[""],r){const{resolver:i}=J8(this._resolverCache,t,s);return pn(a)?kf(i,a,void 0,r):i}}function J8(e,t,a){let s=e.get(t);s||(s=new Map,e.set(t,s));const r=a.join();let i=s.get(r);return i||(i={resolver:PD(t,a),subPrefixes:a.filter(o=>!o.toLowerCase().includes("hover"))},s.set(r,i)),i}const LHe=e=>pn(e)&&Object.getOwnPropertyNames(e).some(t=>sd(e[t]));function PHe(e,t){const{isScriptable:a,isIndexable:s}=JZ(e);for(const r of t){const i=a(r),l=s(r),o=(l||i)&&e[r];if(i&&(sd(o)||LHe(o))||l&&Qa(o))return!0}return!1}var DHe="4.5.1";const OHe=["top","bottom","left","right","chartArea"];function eB(e,t){return e==="top"||e==="bottom"||OHe.indexOf(e)===-1&&t==="x"}function tB(e,t){return function(a,s){return a[e]===s[e]?a[t]-s[t]:a[e]-s[e]}}function nB(e){const t=e.chart,a=t.options.animation;t.notifyPlugins("afterRender"),Kn(a&&a.onComplete,[e],t)}function MHe(e){const t=e.chart,a=t.options.animation;Kn(a&&a.onProgress,[e],t)}function yJ(e){return MD()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Yb={},aB=e=>{const t=yJ(e);return Object.values(Yb).filter(a=>a.canvas===t).pop()};function IHe(e,t,a){const s=Object.keys(e);for(const r of s){const i=+r;if(i>=t){const l=e[r];delete e[r],(a>0||i>t)&&(e[i+a]=l)}}}function $He(e,t,a,s){return!a||e.type==="mouseout"?null:s?t:e}let Kj=class{static defaults=Ca;static instances=Yb;static overrides=Pu;static registry=rl;static version=DHe;static getChart=aB;static register(...t){rl.add(...t),sB()}static unregister(...t){rl.remove(...t),sB()}constructor(t,a){const s=this.config=new kHe(a),r=yJ(t),i=aB(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const l=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||tHe(r)),this.platform.updateConfig(s);const o=this.platform.acquireContext(r,l.aspectRatio),c=o&&o.canvas,d=c&&c.height,u=c&&c.width;if(this.id=E7e(),this.ctx=o,this.canvas=c,this.width=u,this.height=d,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new bHe,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=q7e(f=>this.update(f),l.resizeDelay||0),this._dataChanges=[],Yb[this.id]=this,!o||!c){console.error("Failed to create chart: can't acquire context from the given item");return}io.listen(this,"complete",nB),io.listen(this,"progress",MHe),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:a},width:s,height:r,_aspectRatio:i}=this;return _n(t)?a&&i?i:r?s/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return rl}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():_8(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return j8(this.canvas,this.ctx),this}stop(){return io.stop(this),this}resize(t,a){io.running(this)?this._resizeBeforeDraw={width:t,height:a}:this._resize(t,a)}_resize(t,a){const s=this.options,r=this.canvas,i=s.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(r,t,a,i),o=s.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,_8(this,o,!0)&&(this.notifyPlugins("resize",{size:l}),Kn(s.onResize,[this,l],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const a=this.options.scales||{};Ln(a,(s,r)=>{s.id=r})}buildOrUpdateScales(){const t=this.options,a=t.scales,s=this.scales,r=Object.keys(s).reduce((l,o)=>(l[o]=!1,l),{});let i=[];a&&(i=i.concat(Object.keys(a).map(l=>{const o=a[l],c=Sk(l,o),d=c==="r",u=c==="x";return{options:o,dposition:d?"chartArea":u?"bottom":"left",dtype:d?"radialLinear":u?"category":"linear"}}))),Ln(i,l=>{const o=l.options,c=o.id,d=Sk(c,o),u=nn(o.type,l.dtype);(o.position===void 0||eB(o.position,d)!==eB(l.dposition))&&(o.position=l.dposition),r[c]=!0;let f=null;if(c in s&&s[c].type===u)f=s[c];else{const p=rl.getScale(u);f=new p({id:c,type:u,ctx:this.ctx,chart:this}),s[f.id]=f}f.init(o,t)}),Ln(r,(l,o)=>{l||delete s[o]}),Ln(s,l=>{ii.configure(this,l,l.options),ii.addBox(this,l)})}_updateMetasets(){const t=this._metasets,a=this.data.datasets.length,s=t.length;if(t.sort((r,i)=>r.index-i.index),s>a){for(let r=a;r<s;++r)this._destroyDatasetMeta(r);t.splice(a,s-a)}this._sortedMetasets=t.slice(0).sort(tB("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:a}}=this;t.length>a.length&&delete this._stacks,t.forEach((s,r)=>{a.filter(i=>i===s._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],a=this.data.datasets;let s,r;for(this._removeUnreferencedMetasets(),s=0,r=a.length;s<r;s++){const i=a[s];let l=this.getDatasetMeta(s);const o=i.type||this.config.type;if(l.type&&l.type!==o&&(this._destroyDatasetMeta(s),l=this.getDatasetMeta(s)),l.type=o,l.indexAxis=i.indexAxis||Ck(o,this.options),l.order=i.order||0,l.index=s,l.label=""+i.label,l.visible=this.isDatasetVisible(s),l.controller)l.controller.updateIndex(s),l.controller.linkScales();else{const c=rl.getController(o),{datasetElementType:d,dataElementType:u}=Ca.datasets[o];Object.assign(c,{dataElementType:rl.getElement(u),datasetElementType:d&&rl.getElement(d)}),l.controller=new c(this,s),t.push(l.controller)}}return this._updateMetasets(),t}_resetElements(){Ln(this.data.datasets,(t,a)=>{this.getDatasetMeta(a).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const a=this.config;a.update();const s=this._options=a.createResolver(a.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let d=0,u=this.data.datasets.length;d<u;d++){const{controller:f}=this.getDatasetMeta(d),p=!r&&i.indexOf(f)===-1;f.buildOrUpdateElements(p),l=Math.max(+f.getMaxOverflow(),l)}l=this._minPadding=s.layout.autoPadding?l:0,this._updateLayout(l),r||Ln(i,d=>{d.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(tB("z","_idx"));const{_active:o,_lastEvent:c}=this;c?this._eventHandler(c,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){Ln(this.scales,t=>{ii.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,a=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!f8(a,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,a=this._getUniformDataChanges()||[];for(const{method:s,start:r,count:i}of a){const l=s==="_removeElements"?-i:i;IHe(t,r,l)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const a=this.data.datasets.length,s=i=>new Set(t.filter(l=>l[0]===i).map((l,o)=>o+","+l.splice(1).join(","))),r=s(0);for(let i=1;i<a;i++)if(!f8(r,s(i)))return;return Array.from(r).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ii.update(this,this.width,this.height,t);const a=this.chartArea,s=a.width<=0||a.height<=0;this._layers=[],Ln(this.boxes,r=>{s&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,i)=>{r._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let a=0,s=this.data.datasets.length;a<s;++a)this.getDatasetMeta(a).controller.configure();for(let a=0,s=this.data.datasets.length;a<s;++a)this._updateDataset(a,sd(t)?t({datasetIndex:a}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,a){const s=this.getDatasetMeta(t),r={meta:s,index:t,mode:a,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(s.controller._update(a),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(io.has(this)?this.attached&&!io.running(this)&&io.start(this):(this.draw(),nB({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const a=this._layers;for(t=0;t<a.length&&a[t].z<=0;++t)a[t].draw(this.chartArea);for(this._drawDatasets();t<a.length;++t)a[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const a=this._sortedMetasets,s=[];let r,i;for(r=0,i=a.length;r<i;++r){const l=a[r];(!t||l.visible)&&s.push(l)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let a=t.length-1;a>=0;--a)this._drawDataset(t[a]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const a=this.ctx,s={meta:t,index:t.index,cancelable:!0},r=J8e(this,t);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(r&&TD(a,r),t.controller.draw(),r&&kD(a),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return zp(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,a,s,r){const i=OBe.modes[a];return typeof i=="function"?i(this,t,s,r):[]}getDatasetMeta(t){const a=this.data.datasets[t],s=this._metasets;let r=s.filter(i=>i&&i._dataset===a).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:a&&a.order||0,index:t,_dataset:a,_parsed:[],_sorted:!1},s.push(r)),r}getContext(){return this.$context||(this.$context=Gu(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const a=this.data.datasets[t];if(!a)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!a.hidden}setDatasetVisibility(t,a){const s=this.getDatasetMeta(t);s.hidden=!a}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,a,s){const r=s?"show":"hide",i=this.getDatasetMeta(t),l=i.controller._resolveAnimations(void 0,r);Ip(a)?(i.data[a].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),l.update(i,{visible:s}),this.update(o=>o.datasetIndex===t?r:void 0))}hide(t,a){this._updateVisibility(t,a,!1)}show(t,a){this._updateVisibility(t,a,!0)}_destroyDatasetMeta(t){const a=this._metasets[t];a&&a.controller&&a.controller._destroy(),delete this._metasets[t]}_stop(){let t,a;for(this.stop(),io.remove(this),t=0,a=this.data.datasets.length;t<a;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:a}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),j8(t,a),this.platform.releaseContext(a),this.canvas=null,this.ctx=null),delete Yb[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,a=this.platform,s=(i,l)=>{a.addEventListener(this,i,l),t[i]=l},r=(i,l,o)=>{i.offsetX=l,i.offsetY=o,this._eventHandler(i)};Ln(this.options.events,i=>s(i,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,a=this.platform,s=(c,d)=>{a.addEventListener(this,c,d),t[c]=d},r=(c,d)=>{t[c]&&(a.removeEventListener(this,c,d),delete t[c])},i=(c,d)=>{this.canvas&&this.resize(c,d)};let l;const o=()=>{r("attach",o),this.attached=!0,this.resize(),s("resize",i),s("detach",l)};l=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),s("attach",o)},a.isAttached(this.canvas)?o():l()}unbindEvents(){Ln(this._listeners,(t,a)=>{this.platform.removeEventListener(this,a,t)}),this._listeners={},Ln(this._responsiveListeners,(t,a)=>{this.platform.removeEventListener(this,a,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,a,s){const r=s?"set":"remove";let i,l,o,c;for(a==="dataset"&&(i=this.getDatasetMeta(t[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),o=0,c=t.length;o<c;++o){l=t[o];const d=l&&this.getDatasetMeta(l.datasetIndex).controller;d&&d[r+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const a=this._active||[],s=t.map(({datasetIndex:i,index:l})=>{const o=this.getDatasetMeta(i);if(!o)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:o.data[l],index:l}});!gw(s,a)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,a))}notifyPlugins(t,a,s){return this._plugins.notify(this,t,a,s)}isPluginEnabled(t){return this._plugins._cache.filter(a=>a.plugin.id===t).length===1}_updateHoverStyles(t,a,s){const r=this.options.hover,i=(c,d)=>c.filter(u=>!d.some(f=>u.datasetIndex===f.datasetIndex&&u.index===f.index)),l=i(a,t),o=s?t:i(t,a);l.length&&this.updateHoverStyle(l,r.mode,!1),o.length&&r.mode&&this.updateHoverStyle(o,r.mode,!0)}_eventHandler(t,a){const s={event:t,replay:a,cancelable:!0,inChartArea:this.isPointInArea(t)},r=l=>(l.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,r)===!1)return;const i=this._handleEvent(t,a,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,r),(i||s.changed)&&this.render(),this}_handleEvent(t,a,s){const{_active:r=[],options:i}=this,l=a,o=this._getActiveElements(t,r,s,l),c=O7e(t),d=$He(t,this._lastEvent,s,c);s&&(this._lastEvent=null,Kn(i.onHover,[t,o,this],this),c&&Kn(i.onClick,[t,o,this],this));const u=!gw(o,r);return(u||a)&&(this._active=o,this._updateHoverStyles(o,r,a)),this._lastEvent=d,u}_getActiveElements(t,a,s,r){if(t.type==="mouseout")return[];if(!s)return a;const i=this.options.hover;return this.getElementsAtEventForMode(t,i.mode,i,r)}};function sB(){return Ln(Kj.instances,e=>e._plugins.invalidate())}function RHe(e,t,a){const{startAngle:s,x:r,y:i,outerRadius:l,innerRadius:o,options:c}=t,{borderWidth:d,borderJoinStyle:u}=c,f=Math.min(d/l,Li(s-a));if(e.beginPath(),e.arc(r,i,l-d/2,s+f/2,a-f/2),o>0){const p=Math.min(d/o,Li(s-a));e.arc(r,i,o+d/2,a-p/2,s+p/2,!0)}else{const p=Math.min(d/2,l*Li(s-a));if(u==="round")e.arc(r,i,p,a-Dn/2,s+Dn/2,!0);else if(u==="bevel"){const x=2*p*p,y=-x*Math.cos(a+Dn/2)+r,w=-x*Math.sin(a+Dn/2)+i,v=x*Math.cos(s+Dn/2)+r,C=x*Math.sin(s+Dn/2)+i;e.lineTo(y,w),e.lineTo(v,C)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}function zHe(e,t,a){const{startAngle:s,pixelMargin:r,x:i,y:l,outerRadius:o,innerRadius:c}=t;let d=r/o;e.beginPath(),e.arc(i,l,o,s-d,a+d),c>r?(d=r/c,e.arc(i,l,c,a+d,s-d,!0)):e.arc(i,l,r,a+Ka,s-Ka),e.closePath(),e.clip()}function FHe(e){return LD(e,["outerStart","outerEnd","innerStart","innerEnd"])}function UHe(e,t,a,s){const r=FHe(e.options.borderRadius),i=(a-t)/2,l=Math.min(i,s*t/2),o=c=>{const d=(a-Math.min(i,c))*s/2;return Es(c,0,Math.min(i,d))};return{outerStart:o(r.outerStart),outerEnd:o(r.outerEnd),innerStart:Es(r.innerStart,0,l),innerEnd:Es(r.innerEnd,0,l)}}function Gm(e,t,a,s){return{x:a+e*Math.cos(t),y:s+e*Math.sin(t)}}function ww(e,t,a,s,r,i){const{x:l,y:o,startAngle:c,pixelMargin:d,innerRadius:u}=t,f=Math.max(t.outerRadius+s+a-d,0),p=u>0?u+s+a+d:0;let x=0;const y=r-c;if(s){const Z=u>0?u-s:0,R=f>0?f-s:0,Q=(Z+R)/2,Y=Q!==0?y*Q/(Q+s):y;x=(y-Y)/2}const w=Math.max(.001,y*f-a/Dn)/f,v=(y-w)/2,C=c+v+x,N=r-v-x,{outerStart:S,outerEnd:T,innerStart:k,innerEnd:_}=UHe(t,p,f,N-C),E=f-S,A=f-T,I=C+S/E,z=N-T/A,F=p+k,D=p+_,M=C+k/F,W=N-_/D;if(e.beginPath(),i){const Z=(I+z)/2;if(e.arc(l,o,f,I,Z),e.arc(l,o,f,Z,z),T>0){const oe=Gm(A,z,l,o);e.arc(oe.x,oe.y,T,z,N+Ka)}const R=Gm(D,N,l,o);if(e.lineTo(R.x,R.y),_>0){const oe=Gm(D,W,l,o);e.arc(oe.x,oe.y,_,N+Ka,W+Math.PI)}const Q=(N-_/p+(C+k/p))/2;if(e.arc(l,o,p,N-_/p,Q,!0),e.arc(l,o,p,Q,C+k/p,!0),k>0){const oe=Gm(F,M,l,o);e.arc(oe.x,oe.y,k,M+Math.PI,C-Ka)}const Y=Gm(E,C,l,o);if(e.lineTo(Y.x,Y.y),S>0){const oe=Gm(E,I,l,o);e.arc(oe.x,oe.y,S,C-Ka,I)}}else{e.moveTo(l,o);const Z=Math.cos(I)*f+l,R=Math.sin(I)*f+o;e.lineTo(Z,R);const Q=Math.cos(z)*f+l,Y=Math.sin(z)*f+o;e.lineTo(Q,Y)}e.closePath()}function BHe(e,t,a,s,r){const{fullCircles:i,startAngle:l,circumference:o}=t;let c=t.endAngle;if(i){ww(e,t,a,s,c,r);for(let d=0;d<i;++d)e.fill();isNaN(o)||(c=l+(o%ya||ya))}return ww(e,t,a,s,c,r),e.fill(),c}function HHe(e,t,a,s,r){const{fullCircles:i,startAngle:l,circumference:o,options:c}=t,{borderWidth:d,borderJoinStyle:u,borderDash:f,borderDashOffset:p,borderRadius:x}=c,y=c.borderAlign==="inner";if(!d)return;e.setLineDash(f||[]),e.lineDashOffset=p,y?(e.lineWidth=d*2,e.lineJoin=u||"round"):(e.lineWidth=d,e.lineJoin=u||"bevel");let w=t.endAngle;if(i){ww(e,t,a,s,w,r);for(let v=0;v<i;++v)e.stroke();isNaN(o)||(w=l+(o%ya||ya))}y&&zHe(e,t,w),c.selfJoin&&w-l>=Dn&&x===0&&u!=="miter"&&RHe(e,t,w),i||(ww(e,t,a,s,w,r),e.stroke())}class GHe extends Xo{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,a,s){const r=this.getProps(["x","y"],s),{angle:i,distance:l}=WZ(r,{x:t,y:a}),{startAngle:o,endAngle:c,innerRadius:d,outerRadius:u,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),p=(this.options.spacing+this.options.borderWidth)/2,x=nn(f,c-o),y=Rp(i,o,c)&&o!==c,w=x>=ya||y,v=Hc(l,d+p,u+p);return w&&v}getCenterPoint(t){const{x:a,y:s,startAngle:r,endAngle:i,innerRadius:l,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:c,spacing:d}=this.options,u=(r+i)/2,f=(l+o+d+c)/2;return{x:a+Math.cos(u)*f,y:s+Math.sin(u)*f}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:a,circumference:s}=this,r=(a.offset||0)/4,i=(a.spacing||0)/2,l=a.circular;if(this.pixelMargin=a.borderAlign==="inner"?.33:0,this.fullCircles=s>ya?Math.floor(s/ya):0,s===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const o=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(o)*r,Math.sin(o)*r);const c=1-Math.sin(Math.min(Dn,s||0)),d=r*c;t.fillStyle=a.backgroundColor,t.strokeStyle=a.borderColor,BHe(t,this,d,i,l),HHe(t,this,d,i,l),t.restore()}}function bJ(e,t,a=t){e.lineCap=nn(a.borderCapStyle,t.borderCapStyle),e.setLineDash(nn(a.borderDash,t.borderDash)),e.lineDashOffset=nn(a.borderDashOffset,t.borderDashOffset),e.lineJoin=nn(a.borderJoinStyle,t.borderJoinStyle),e.lineWidth=nn(a.borderWidth,t.borderWidth),e.strokeStyle=nn(a.borderColor,t.borderColor)}function WHe(e,t,a){e.lineTo(a.x,a.y)}function VHe(e){return e.stepped?l8e:e.tension||e.cubicInterpolationMode==="monotone"?o8e:WHe}function vJ(e,t,a={}){const s=e.length,{start:r=0,end:i=s-1}=a,{start:l,end:o}=t,c=Math.max(r,l),d=Math.min(i,o),u=r<l&&i<l||r>o&&i>o;return{count:s,start:c,loop:t.loop,ilen:d<c&&!u?s+d-c:d-c}}function qHe(e,t,a,s){const{points:r,options:i}=t,{count:l,start:o,loop:c,ilen:d}=vJ(r,a,s),u=VHe(i);let{move:f=!0,reverse:p}=s||{},x,y,w;for(x=0;x<=d;++x)y=r[(o+(p?d-x:x))%l],!y.skip&&(f?(e.moveTo(y.x,y.y),f=!1):u(e,w,y,p,i.stepped),w=y);return c&&(y=r[(o+(p?d:0))%l],u(e,w,y,p,i.stepped)),!!c}function YHe(e,t,a,s){const r=t.points,{count:i,start:l,ilen:o}=vJ(r,a,s),{move:c=!0,reverse:d}=s||{};let u=0,f=0,p,x,y,w,v,C;const N=T=>(l+(d?o-T:T))%i,S=()=>{w!==v&&(e.lineTo(u,v),e.lineTo(u,w),e.lineTo(u,C))};for(c&&(x=r[N(0)],e.moveTo(x.x,x.y)),p=0;p<=o;++p){if(x=r[N(p)],x.skip)continue;const T=x.x,k=x.y,_=T|0;_===y?(k<w?w=k:k>v&&(v=k),u=(f*u+T)/++f):(S(),e.lineTo(T,k),y=_,f=0,w=v=k),C=k}S()}function _k(e){const t=e.options,a=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!a?YHe:qHe}function QHe(e){return e.stepped?F8e:e.tension||e.cubicInterpolationMode==="monotone"?U8e:Bd}function KHe(e,t,a,s){let r=t._path;r||(r=t._path=new Path2D,t.path(r,a,s)&&r.closePath()),bJ(e,t.options),e.stroke(r)}function XHe(e,t,a,s){const{segments:r,options:i}=t,l=_k(t);for(const o of r)bJ(e,i,o.style),e.beginPath(),l(e,t,o,{start:a,end:a+s-1})&&e.closePath(),e.stroke()}const ZHe=typeof Path2D=="function";function JHe(e,t,a,s){ZHe&&!t.options.segment?KHe(e,t,a,s):XHe(e,t,a,s)}class e9e extends Xo{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,a){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const r=s.spanGaps?this._loop:this._fullLoop;P8e(this._points,s,t,r,a),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Q8e(this,this.options.segment))}first(){const t=this.segments,a=this.points;return t.length&&a[t[0].start]}last(){const t=this.segments,a=this.points,s=t.length;return s&&a[t[s-1].end]}interpolate(t,a){const s=this.options,r=t[a],i=this.points,l=V8e(this,{property:a,start:r,end:r});if(!l.length)return;const o=[],c=QHe(s);let d,u;for(d=0,u=l.length;d<u;++d){const{start:f,end:p}=l[d],x=i[f],y=i[p];if(x===y){o.push(x);continue}const w=Math.abs((r-x[a])/(y[a]-x[a])),v=c(x,y,w,s.stepped);v[a]=t[a],o.push(v)}return o.length===1?o[0]:o}pathSegment(t,a,s){return _k(this)(t,this,a,s)}path(t,a,s){const r=this.segments,i=_k(this);let l=this._loop;a=a||0,s=s||this.points.length-a;for(const o of r)l&=i(t,this,o,{start:a,end:a+s-1});return!!l}draw(t,a,s,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(t.save(),JHe(t,this,s,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function rB(e,t,a,s){const r=e.options,{[a]:i}=e.getProps([a],s);return Math.abs(t-i)<r.radius+r.hitRadius}class t9e extends Xo{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,a,s){const r=this.options,{x:i,y:l}=this.getProps(["x","y"],s);return Math.pow(t-i,2)+Math.pow(a-l,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(t,a){return rB(this,t,"x",a)}inYRange(t,a){return rB(this,t,"y",a)}getCenterPoint(t){const{x:a,y:s}=this.getProps(["x","y"],t);return{x:a,y:s}}size(t){t=t||this.options||{};let a=t.radius||0;a=Math.max(a,a&&t.hoverRadius||0);const s=a&&t.borderWidth||0;return(a+s)*2}draw(t,a){const s=this.options;this.skip||s.radius<.1||!zp(this,a,this.size(s)/2)||(t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.fillStyle=s.backgroundColor,jk(t,s,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function wJ(e,t){const{x:a,y:s,base:r,width:i,height:l}=e.getProps(["x","y","base","width","height"],t);let o,c,d,u,f;return e.horizontal?(f=l/2,o=Math.min(a,r),c=Math.max(a,r),d=s-f,u=s+f):(f=i/2,o=a-f,c=a+f,d=Math.min(s,r),u=Math.max(s,r)),{left:o,top:d,right:c,bottom:u}}function Wc(e,t,a,s){return e?0:Es(t,a,s)}function n9e(e,t,a){const s=e.options.borderWidth,r=e.borderSkipped,i=ZZ(s);return{t:Wc(r.top,i.top,0,a),r:Wc(r.right,i.right,0,t),b:Wc(r.bottom,i.bottom,0,a),l:Wc(r.left,i.left,0,t)}}function a9e(e,t,a){const{enableBorderRadius:s}=e.getProps(["enableBorderRadius"]),r=e.options.borderRadius,i=df(r),l=Math.min(t,a),o=e.borderSkipped,c=s||pn(r);return{topLeft:Wc(!c||o.top||o.left,i.topLeft,0,l),topRight:Wc(!c||o.top||o.right,i.topRight,0,l),bottomLeft:Wc(!c||o.bottom||o.left,i.bottomLeft,0,l),bottomRight:Wc(!c||o.bottom||o.right,i.bottomRight,0,l)}}function s9e(e){const t=wJ(e),a=t.right-t.left,s=t.bottom-t.top,r=n9e(e,a/2,s/2),i=a9e(e,a/2,s/2);return{outer:{x:t.left,y:t.top,w:a,h:s,radius:i},inner:{x:t.left+r.l,y:t.top+r.t,w:a-r.l-r.r,h:s-r.t-r.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,i.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(r.b,r.r))}}}}function RA(e,t,a,s){const r=t===null,i=a===null,o=e&&!(r&&i)&&wJ(e,s);return o&&(r||Hc(t,o.left,o.right))&&(i||Hc(a,o.top,o.bottom))}function r9e(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function i9e(e,t){e.rect(t.x,t.y,t.w,t.h)}function zA(e,t,a={}){const s=e.x!==a.x?-t:0,r=e.y!==a.y?-t:0,i=(e.x+e.w!==a.x+a.w?t:0)-s,l=(e.y+e.h!==a.y+a.h?t:0)-r;return{x:e.x+s,y:e.y+r,w:e.w+i,h:e.h+l,radius:e.radius}}class l9e extends Xo{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:a,options:{borderColor:s,backgroundColor:r}}=this,{inner:i,outer:l}=s9e(this),o=r9e(l.radius)?yw:i9e;t.save(),(l.w!==i.w||l.h!==i.h)&&(t.beginPath(),o(t,zA(l,a,i)),t.clip(),o(t,zA(i,-a,l)),t.fillStyle=s,t.fill("evenodd")),t.beginPath(),o(t,zA(i,a)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,a,s){return RA(this,t,a,s)}inXRange(t,a){return RA(this,t,null,a)}inYRange(t,a){return RA(this,null,t,a)}getCenterPoint(t){const{x:a,y:s,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],t);return{x:i?(a+r)/2:a,y:i?s:(s+r)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}const iB=(e,t)=>{let{boxHeight:a=t,boxWidth:s=t}=e;return e.usePointStyle&&(a=Math.min(a,t),s=e.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:a,itemHeight:Math.max(t,a)}},o9e=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class lB extends Xo{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,a,s){this.maxWidth=t,this.maxHeight=a,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let a=Kn(t.generateLabels,[this.chart],this)||[];t.filter&&(a=a.filter(s=>t.filter(s,this.chart.data))),t.sort&&(a=a.sort((s,r)=>t.sort(s,r,this.chart.data))),this.options.reverse&&a.reverse(),this.legendItems=a}fit(){const{options:t,ctx:a}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,r=Ts(s.font),i=r.size,l=this._computeTitleHeight(),{boxWidth:o,itemHeight:c}=iB(s,i);let d,u;a.font=r.string,this.isHorizontal()?(d=this.maxWidth,u=this._fitRows(l,i,o,c)+10):(u=this.maxHeight,d=this._fitCols(l,r,o,c)+10),this.width=Math.min(d,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,a,s,r){const{ctx:i,maxWidth:l,options:{labels:{padding:o}}}=this,c=this.legendHitBoxes=[],d=this.lineWidths=[0],u=r+o;let f=t;i.textAlign="left",i.textBaseline="middle";let p=-1,x=-u;return this.legendItems.forEach((y,w)=>{const v=s+a/2+i.measureText(y.text).width;(w===0||d[d.length-1]+v+2*o>l)&&(f+=u,d[d.length-(w>0?0:1)]=0,x+=u,p++),c[w]={left:0,top:x,row:p,width:v,height:r},d[d.length-1]+=v+o}),f}_fitCols(t,a,s,r){const{ctx:i,maxHeight:l,options:{labels:{padding:o}}}=this,c=this.legendHitBoxes=[],d=this.columnSizes=[],u=l-t;let f=o,p=0,x=0,y=0,w=0;return this.legendItems.forEach((v,C)=>{const{itemWidth:N,itemHeight:S}=c9e(s,a,i,v,r);C>0&&x+S+2*o>u&&(f+=p+o,d.push({width:p,height:x}),y+=p+o,w++,p=x=0),c[C]={left:y,top:x,col:w,width:N,height:S},p=Math.max(p,N),x+=S+o}),f+=p,d.push({width:p,height:x}),f}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:a,options:{align:s,labels:{padding:r},rtl:i}}=this,l=uf(i,this.left,this.width);if(this.isHorizontal()){let o=0,c=Cs(s,this.left+r,this.right-this.lineWidths[o]);for(const d of a)o!==d.row&&(o=d.row,c=Cs(s,this.left+r,this.right-this.lineWidths[o])),d.top+=this.top+t+r,d.left=l.leftForLtr(l.x(c),d.width),c+=d.width+r}else{let o=0,c=Cs(s,this.top+t+r,this.bottom-this.columnSizes[o].height);for(const d of a)d.col!==o&&(o=d.col,c=Cs(s,this.top+t+r,this.bottom-this.columnSizes[o].height)),d.top=c,d.left+=this.left+r,d.left=l.leftForLtr(l.x(d.left),d.width),c+=d.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;TD(t,this),this._draw(),kD(t)}}_draw(){const{options:t,columnSizes:a,lineWidths:s,ctx:r}=this,{align:i,labels:l}=t,o=Ca.color,c=uf(t.rtl,this.left,this.width),d=Ts(l.font),{padding:u}=l,f=d.size,p=f/2;let x;this.drawTitle(),r.textAlign=c.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=d.string;const{boxWidth:y,boxHeight:w,itemHeight:v}=iB(l,f),C=function(_,E,A){if(isNaN(y)||y<=0||isNaN(w)||w<0)return;r.save();const I=nn(A.lineWidth,1);if(r.fillStyle=nn(A.fillStyle,o),r.lineCap=nn(A.lineCap,"butt"),r.lineDashOffset=nn(A.lineDashOffset,0),r.lineJoin=nn(A.lineJoin,"miter"),r.lineWidth=I,r.strokeStyle=nn(A.strokeStyle,o),r.setLineDash(nn(A.lineDash,[])),l.usePointStyle){const z={radius:w*Math.SQRT2/2,pointStyle:A.pointStyle,rotation:A.rotation,borderWidth:I},F=c.xPlus(_,y/2),D=E+p;XZ(r,z,F,D,l.pointStyleWidth&&y)}else{const z=E+Math.max((f-w)/2,0),F=c.leftForLtr(_,y),D=df(A.borderRadius);r.beginPath(),Object.values(D).some(M=>M!==0)?yw(r,{x:F,y:z,w:y,h:w,radius:D}):r.rect(F,z,y,w),r.fill(),I!==0&&r.stroke()}r.restore()},N=function(_,E,A){Fp(r,A.text,_,E+v/2,d,{strikethrough:A.hidden,textAlign:c.textAlign(A.textAlign)})},S=this.isHorizontal(),T=this._computeTitleHeight();S?x={x:Cs(i,this.left+u,this.right-s[0]),y:this.top+u+T,line:0}:x={x:this.left+u,y:Cs(i,this.top+T+u,this.bottom-a[0].height),line:0},sJ(this.ctx,t.textDirection);const k=v+u;this.legendItems.forEach((_,E)=>{r.strokeStyle=_.fontColor,r.fillStyle=_.fontColor;const A=r.measureText(_.text).width,I=c.textAlign(_.textAlign||(_.textAlign=l.textAlign)),z=y+p+A;let F=x.x,D=x.y;c.setWidth(this.width),S?E>0&&F+z+u>this.right&&(D=x.y+=k,x.line++,F=x.x=Cs(i,this.left+u,this.right-s[x.line])):E>0&&D+k>this.bottom&&(F=x.x=F+a[x.line].width+u,x.line++,D=x.y=Cs(i,this.top+T+u,this.bottom-a[x.line].height));const M=c.x(F);if(C(M,D,_),F=Y7e(I,F+y+p,S?F+z:this.right,t.rtl),N(c.x(F),D,_),S)x.x+=z+u;else if(typeof _.text!="string"){const W=d.lineHeight;x.y+=NJ(_,W)+u}else x.y+=k}),rJ(this.ctx,t.textDirection)}drawTitle(){const t=this.options,a=t.title,s=Ts(a.font),r=gi(a.padding);if(!a.display)return;const i=uf(t.rtl,this.left,this.width),l=this.ctx,o=a.position,c=s.size/2,d=r.top+c;let u,f=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),u=this.top+d,f=Cs(t.align,f,this.right-p);else{const y=this.columnSizes.reduce((w,v)=>Math.max(w,v.height),0);u=d+Cs(t.align,this.top,this.bottom-y-t.labels.padding-this._computeTitleHeight())}const x=Cs(o,f,f+p);l.textAlign=i.textAlign(_D(o)),l.textBaseline="middle",l.strokeStyle=a.color,l.fillStyle=a.color,l.font=s.string,Fp(l,a.text,x,u,s)}_computeTitleHeight(){const t=this.options.title,a=Ts(t.font),s=gi(t.padding);return t.display?a.lineHeight+s.height:0}_getLegendItemAt(t,a){let s,r,i;if(Hc(t,this.left,this.right)&&Hc(a,this.top,this.bottom)){for(i=this.legendHitBoxes,s=0;s<i.length;++s)if(r=i[s],Hc(t,r.left,r.left+r.width)&&Hc(a,r.top,r.top+r.height))return this.legendItems[s]}return null}handleEvent(t){const a=this.options;if(!m9e(t.type,a))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,i=o9e(r,s);r&&!i&&Kn(a.onLeave,[t,r,this],this),this._hoveredItem=s,s&&!i&&Kn(a.onHover,[t,s,this],this)}else s&&Kn(a.onClick,[t,s,this],this)}}function c9e(e,t,a,s,r){const i=d9e(s,e,t,a),l=u9e(r,s,t.lineHeight);return{itemWidth:i,itemHeight:l}}function d9e(e,t,a,s){let r=e.text;return r&&typeof r!="string"&&(r=r.reduce((i,l)=>i.length>l.length?i:l)),t+a.size/2+s.measureText(r).width}function u9e(e,t,a){let s=e;return typeof t.text!="string"&&(s=NJ(t,a)),s}function NJ(e,t){const a=e.text?e.text.length:0;return t*a}function m9e(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var f9e={id:"legend",_element:lB,start(e,t,a){const s=e.legend=new lB({ctx:e.ctx,options:a,chart:e});ii.configure(e,s,a),ii.addBox(e,s)},stop(e){ii.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,a){const s=e.legend;ii.configure(e,s,a),s.options=a},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,a){const s=t.datasetIndex,r=a.chart;r.isDatasetVisible(s)?(r.hide(s),t.hidden=!0):(r.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:a,pointStyle:s,textAlign:r,color:i,useBorderRadius:l,borderRadius:o}}=e.legend.options;return e._getSortedDatasetMetas().map(c=>{const d=c.controller.getStyle(a?0:void 0),u=gi(d.borderWidth);return{text:t[c.index].label,fillStyle:d.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:d.borderColor,pointStyle:s||d.pointStyle,rotation:d.rotation,textAlign:r||d.textAlign,borderRadius:l&&(o||d.borderRadius),datasetIndex:c.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class jJ extends Xo{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,a){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=a;const r=Qa(s.text)?s.text.length:1;this._padding=gi(s.padding);const i=r*Ts(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:a,left:s,bottom:r,right:i,options:l}=this,o=l.align;let c=0,d,u,f;return this.isHorizontal()?(u=Cs(o,s,i),f=a+t,d=i-s):(l.position==="left"?(u=s+t,f=Cs(o,r,a),c=Dn*-.5):(u=i-t,f=Cs(o,a,r),c=Dn*.5),d=r-a),{titleX:u,titleY:f,maxWidth:d,rotation:c}}draw(){const t=this.ctx,a=this.options;if(!a.display)return;const s=Ts(a.font),i=s.lineHeight/2+this._padding.top,{titleX:l,titleY:o,maxWidth:c,rotation:d}=this._drawArgs(i);Fp(t,a.text,0,0,s,{color:a.color,maxWidth:c,rotation:d,textAlign:_D(a.align),textBaseline:"middle",translation:[l,o]})}}function h9e(e,t){const a=new jJ({ctx:e.ctx,options:t,chart:e});ii.configure(e,a,t),ii.addBox(e,a),e.titleBlock=a}var g9e={id:"title",_element:jJ,start(e,t,a){h9e(e,a)},stop(e){const t=e.titleBlock;ii.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,a){const s=e.titleBlock;ii.configure(e,s,a),s.options=a},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const zg={average(e){if(!e.length)return!1;let t,a,s=new Set,r=0,i=0;for(t=0,a=e.length;t<a;++t){const o=e[t].element;if(o&&o.hasValue()){const c=o.tooltipPosition();s.add(c.x),r+=c.y,++i}}return i===0||s.size===0?!1:{x:[...s].reduce((o,c)=>o+c)/s.size,y:r/i}},nearest(e,t){if(!e.length)return!1;let a=t.x,s=t.y,r=Number.POSITIVE_INFINITY,i,l,o;for(i=0,l=e.length;i<l;++i){const c=e[i].element;if(c&&c.hasValue()){const d=c.getCenterPoint(),u=wk(t,d);u<r&&(r=u,o=c)}}if(o){const c=o.tooltipPosition();a=c.x,s=c.y}return{x:a,y:s}}};function sl(e,t){return t&&(Qa(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function lo(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function p9e(e,t){const{element:a,datasetIndex:s,index:r}=t,i=e.getDatasetMeta(s).controller,{label:l,value:o}=i.getLabelAndValue(r);return{chart:e,label:l,parsed:i.getParsed(r),raw:e.data.datasets[s].data[r],formattedValue:o,dataset:i.getDataset(),dataIndex:r,datasetIndex:s,element:a}}function oB(e,t){const a=e.chart.ctx,{body:s,footer:r,title:i}=e,{boxWidth:l,boxHeight:o}=t,c=Ts(t.bodyFont),d=Ts(t.titleFont),u=Ts(t.footerFont),f=i.length,p=r.length,x=s.length,y=gi(t.padding);let w=y.height,v=0,C=s.reduce((T,k)=>T+k.before.length+k.lines.length+k.after.length,0);if(C+=e.beforeBody.length+e.afterBody.length,f&&(w+=f*d.lineHeight+(f-1)*t.titleSpacing+t.titleMarginBottom),C){const T=t.displayColors?Math.max(o,c.lineHeight):c.lineHeight;w+=x*T+(C-x)*c.lineHeight+(C-1)*t.bodySpacing}p&&(w+=t.footerMarginTop+p*u.lineHeight+(p-1)*t.footerSpacing);let N=0;const S=function(T){v=Math.max(v,a.measureText(T).width+N)};return a.save(),a.font=d.string,Ln(e.title,S),a.font=c.string,Ln(e.beforeBody.concat(e.afterBody),S),N=t.displayColors?l+2+t.boxPadding:0,Ln(s,T=>{Ln(T.before,S),Ln(T.lines,S),Ln(T.after,S)}),N=0,a.font=u.string,Ln(e.footer,S),a.restore(),v+=y.width,{width:v,height:w}}function x9e(e,t){const{y:a,height:s}=t;return a<s/2?"top":a>e.height-s/2?"bottom":"center"}function y9e(e,t,a,s){const{x:r,width:i}=s,l=a.caretSize+a.caretPadding;if(e==="left"&&r+i+l>t.width||e==="right"&&r-i-l<0)return!0}function b9e(e,t,a,s){const{x:r,width:i}=a,{width:l,chartArea:{left:o,right:c}}=e;let d="center";return s==="center"?d=r<=(o+c)/2?"left":"right":r<=i/2?d="left":r>=l-i/2&&(d="right"),y9e(d,e,t,a)&&(d="center"),d}function cB(e,t,a){const s=a.yAlign||t.yAlign||x9e(e,a);return{xAlign:a.xAlign||t.xAlign||b9e(e,t,a,s),yAlign:s}}function v9e(e,t){let{x:a,width:s}=e;return t==="right"?a-=s:t==="center"&&(a-=s/2),a}function w9e(e,t,a){let{y:s,height:r}=e;return t==="top"?s+=a:t==="bottom"?s-=r+a:s-=r/2,s}function dB(e,t,a,s){const{caretSize:r,caretPadding:i,cornerRadius:l}=e,{xAlign:o,yAlign:c}=a,d=r+i,{topLeft:u,topRight:f,bottomLeft:p,bottomRight:x}=df(l);let y=v9e(t,o);const w=w9e(t,c,d);return c==="center"?o==="left"?y+=d:o==="right"&&(y-=d):o==="left"?y-=Math.max(u,p)+r:o==="right"&&(y+=Math.max(f,x)+r),{x:Es(y,0,s.width-t.width),y:Es(w,0,s.height-t.height)}}function wb(e,t,a){const s=gi(a.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-s.right:e.x+s.left}function uB(e){return sl([],lo(e))}function N9e(e,t,a){return Gu(e,{tooltip:t,tooltipItems:a,type:"tooltip"})}function mB(e,t){const a=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return a?e.override(a):e}const CJ={beforeTitle:so,title(e){if(e.length>0){const t=e[0],a=t.chart.data.labels,s=a?a.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return a[t.dataIndex]}return""},afterTitle:so,beforeBody:so,beforeLabel:so,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const a=e.formattedValue;return _n(a)||(t+=a),t},labelColor(e){const a=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:a.borderColor,backgroundColor:a.backgroundColor,borderWidth:a.borderWidth,borderDash:a.borderDash,borderDashOffset:a.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const a=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:a.pointStyle,rotation:a.rotation}},afterLabel:so,afterBody:so,beforeFooter:so,footer:so,afterFooter:so};function Zs(e,t,a,s){const r=e[t].call(a,s);return typeof r>"u"?CJ[t].call(a,s):r}class fB extends Xo{static positioners=zg;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const a=this.chart,s=this.options.setContext(this.getContext()),r=s.enabled&&a.options.animation&&s.animations,i=new lJ(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=N9e(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,a){const{callbacks:s}=a,r=Zs(s,"beforeTitle",this,t),i=Zs(s,"title",this,t),l=Zs(s,"afterTitle",this,t);let o=[];return o=sl(o,lo(r)),o=sl(o,lo(i)),o=sl(o,lo(l)),o}getBeforeBody(t,a){return uB(Zs(a.callbacks,"beforeBody",this,t))}getBody(t,a){const{callbacks:s}=a,r=[];return Ln(t,i=>{const l={before:[],lines:[],after:[]},o=mB(s,i);sl(l.before,lo(Zs(o,"beforeLabel",this,i))),sl(l.lines,Zs(o,"label",this,i)),sl(l.after,lo(Zs(o,"afterLabel",this,i))),r.push(l)}),r}getAfterBody(t,a){return uB(Zs(a.callbacks,"afterBody",this,t))}getFooter(t,a){const{callbacks:s}=a,r=Zs(s,"beforeFooter",this,t),i=Zs(s,"footer",this,t),l=Zs(s,"afterFooter",this,t);let o=[];return o=sl(o,lo(r)),o=sl(o,lo(i)),o=sl(o,lo(l)),o}_createItems(t){const a=this._active,s=this.chart.data,r=[],i=[],l=[];let o=[],c,d;for(c=0,d=a.length;c<d;++c)o.push(p9e(this.chart,a[c]));return t.filter&&(o=o.filter((u,f,p)=>t.filter(u,f,p,s))),t.itemSort&&(o=o.sort((u,f)=>t.itemSort(u,f,s))),Ln(o,u=>{const f=mB(t.callbacks,u);r.push(Zs(f,"labelColor",this,u)),i.push(Zs(f,"labelPointStyle",this,u)),l.push(Zs(f,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=l,this.dataPoints=o,o}update(t,a){const s=this.options.setContext(this.getContext()),r=this._active;let i,l=[];if(!r.length)this.opacity!==0&&(i={opacity:0});else{const o=zg[s.position].call(this,r,this._eventPosition);l=this._createItems(s),this.title=this.getTitle(l,s),this.beforeBody=this.getBeforeBody(l,s),this.body=this.getBody(l,s),this.afterBody=this.getAfterBody(l,s),this.footer=this.getFooter(l,s);const c=this._size=oB(this,s),d=Object.assign({},o,c),u=cB(this.chart,s,d),f=dB(s,d,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:f.x,y:f.y,width:c.width,height:c.height,caretX:o.x,caretY:o.y}}this._tooltipItems=l,this.$context=void 0,i&&this._resolveAnimations().update(this,i),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:a})}drawCaret(t,a,s,r){const i=this.getCaretPosition(t,s,r);a.lineTo(i.x1,i.y1),a.lineTo(i.x2,i.y2),a.lineTo(i.x3,i.y3)}getCaretPosition(t,a,s){const{xAlign:r,yAlign:i}=this,{caretSize:l,cornerRadius:o}=s,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:f}=df(o),{x:p,y:x}=t,{width:y,height:w}=a;let v,C,N,S,T,k;return i==="center"?(T=x+w/2,r==="left"?(v=p,C=v-l,S=T+l,k=T-l):(v=p+y,C=v+l,S=T-l,k=T+l),N=v):(r==="left"?C=p+Math.max(c,u)+l:r==="right"?C=p+y-Math.max(d,f)-l:C=this.caretX,i==="top"?(S=x,T=S-l,v=C-l,N=C+l):(S=x+w,T=S+l,v=C+l,N=C-l),k=S),{x1:v,x2:C,x3:N,y1:S,y2:T,y3:k}}drawTitle(t,a,s){const r=this.title,i=r.length;let l,o,c;if(i){const d=uf(s.rtl,this.x,this.width);for(t.x=wb(this,s.titleAlign,s),a.textAlign=d.textAlign(s.titleAlign),a.textBaseline="middle",l=Ts(s.titleFont),o=s.titleSpacing,a.fillStyle=s.titleColor,a.font=l.string,c=0;c<i;++c)a.fillText(r[c],d.x(t.x),t.y+l.lineHeight/2),t.y+=l.lineHeight+o,c+1===i&&(t.y+=s.titleMarginBottom-o)}}_drawColorBox(t,a,s,r,i){const l=this.labelColors[s],o=this.labelPointStyles[s],{boxHeight:c,boxWidth:d}=i,u=Ts(i.bodyFont),f=wb(this,"left",i),p=r.x(f),x=c<u.lineHeight?(u.lineHeight-c)/2:0,y=a.y+x;if(i.usePointStyle){const w={radius:Math.min(d,c)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},v=r.leftForLtr(p,d)+d/2,C=y+c/2;t.strokeStyle=i.multiKeyBackground,t.fillStyle=i.multiKeyBackground,jk(t,w,v,C),t.strokeStyle=l.borderColor,t.fillStyle=l.backgroundColor,jk(t,w,v,C)}else{t.lineWidth=pn(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,t.strokeStyle=l.borderColor,t.setLineDash(l.borderDash||[]),t.lineDashOffset=l.borderDashOffset||0;const w=r.leftForLtr(p,d),v=r.leftForLtr(r.xPlus(p,1),d-2),C=df(l.borderRadius);Object.values(C).some(N=>N!==0)?(t.beginPath(),t.fillStyle=i.multiKeyBackground,yw(t,{x:w,y,w:d,h:c,radius:C}),t.fill(),t.stroke(),t.fillStyle=l.backgroundColor,t.beginPath(),yw(t,{x:v,y:y+1,w:d-2,h:c-2,radius:C}),t.fill()):(t.fillStyle=i.multiKeyBackground,t.fillRect(w,y,d,c),t.strokeRect(w,y,d,c),t.fillStyle=l.backgroundColor,t.fillRect(v,y+1,d-2,c-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,a,s){const{body:r}=this,{bodySpacing:i,bodyAlign:l,displayColors:o,boxHeight:c,boxWidth:d,boxPadding:u}=s,f=Ts(s.bodyFont);let p=f.lineHeight,x=0;const y=uf(s.rtl,this.x,this.width),w=function(A){a.fillText(A,y.x(t.x+x),t.y+p/2),t.y+=p+i},v=y.textAlign(l);let C,N,S,T,k,_,E;for(a.textAlign=l,a.textBaseline="middle",a.font=f.string,t.x=wb(this,v,s),a.fillStyle=s.bodyColor,Ln(this.beforeBody,w),x=o&&v!=="right"?l==="center"?d/2+u:d+2+u:0,T=0,_=r.length;T<_;++T){for(C=r[T],N=this.labelTextColors[T],a.fillStyle=N,Ln(C.before,w),S=C.lines,o&&S.length&&(this._drawColorBox(a,t,T,y,s),p=Math.max(f.lineHeight,c)),k=0,E=S.length;k<E;++k)w(S[k]),p=f.lineHeight;Ln(C.after,w)}x=0,p=f.lineHeight,Ln(this.afterBody,w),t.y-=i}drawFooter(t,a,s){const r=this.footer,i=r.length;let l,o;if(i){const c=uf(s.rtl,this.x,this.width);for(t.x=wb(this,s.footerAlign,s),t.y+=s.footerMarginTop,a.textAlign=c.textAlign(s.footerAlign),a.textBaseline="middle",l=Ts(s.footerFont),a.fillStyle=s.footerColor,a.font=l.string,o=0;o<i;++o)a.fillText(r[o],c.x(t.x),t.y+l.lineHeight/2),t.y+=l.lineHeight+s.footerSpacing}}drawBackground(t,a,s,r){const{xAlign:i,yAlign:l}=this,{x:o,y:c}=t,{width:d,height:u}=s,{topLeft:f,topRight:p,bottomLeft:x,bottomRight:y}=df(r.cornerRadius);a.fillStyle=r.backgroundColor,a.strokeStyle=r.borderColor,a.lineWidth=r.borderWidth,a.beginPath(),a.moveTo(o+f,c),l==="top"&&this.drawCaret(t,a,s,r),a.lineTo(o+d-p,c),a.quadraticCurveTo(o+d,c,o+d,c+p),l==="center"&&i==="right"&&this.drawCaret(t,a,s,r),a.lineTo(o+d,c+u-y),a.quadraticCurveTo(o+d,c+u,o+d-y,c+u),l==="bottom"&&this.drawCaret(t,a,s,r),a.lineTo(o+x,c+u),a.quadraticCurveTo(o,c+u,o,c+u-x),l==="center"&&i==="left"&&this.drawCaret(t,a,s,r),a.lineTo(o,c+f),a.quadraticCurveTo(o,c,o+f,c),a.closePath(),a.fill(),r.borderWidth>0&&a.stroke()}_updateAnimationTarget(t){const a=this.chart,s=this.$animations,r=s&&s.x,i=s&&s.y;if(r||i){const l=zg[t.position].call(this,this._active,this._eventPosition);if(!l)return;const o=this._size=oB(this,t),c=Object.assign({},l,this._size),d=cB(a,t,c),u=dB(t,c,d,a);(r._to!==u.x||i._to!==u.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=o.width,this.height=o.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(t){const a=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(a);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const l=gi(a.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;a.enabled&&o&&(t.save(),t.globalAlpha=s,this.drawBackground(i,t,r,a),sJ(t,a.textDirection),i.y+=l.top,this.drawTitle(i,t,a),this.drawBody(i,t,a),this.drawFooter(i,t,a),rJ(t,a.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,a){const s=this._active,r=t.map(({datasetIndex:o,index:c})=>{const d=this.chart.getDatasetMeta(o);if(!d)throw new Error("Cannot find a dataset at index "+o);return{datasetIndex:o,element:d.data[c],index:c}}),i=!gw(s,r),l=this._positionChanged(r,a);(i||l)&&(this._active=r,this._eventPosition=a,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,a,s=!0){if(a&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],l=this._getActiveElements(t,i,a,s),o=this._positionChanged(l,t),c=a||!gw(l,i)||o;return c&&(this._active=l,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,a))),c}_getActiveElements(t,a,s,r){const i=this.options;if(t.type==="mouseout")return[];if(!r)return a.filter(o=>this.chart.data.datasets[o.datasetIndex]&&this.chart.getDatasetMeta(o.datasetIndex).controller.getParsed(o.index)!==void 0);const l=this.chart.getElementsAtEventForMode(t,i.mode,i,s);return i.reverse&&l.reverse(),l}_positionChanged(t,a){const{caretX:s,caretY:r,options:i}=this,l=zg[i.position].call(this,t,a);return l!==!1&&(s!==l.x||r!==l.y)}}var j9e={id:"tooltip",_element:fB,positioners:zg,afterInit(e,t,a){a&&(e.tooltip=new fB({chart:e,options:a}))},beforeUpdate(e,t,a){e.tooltip&&e.tooltip.initialize(a)},reset(e,t,a){e.tooltip&&e.tooltip.initialize(a)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const a={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...a,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",a)}},afterEvent(e,t){if(e.tooltip){const a=t.replay;e.tooltip.handleEvent(t.event,a,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:CJ},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const C9e=(e,t,a,s)=>(typeof t=="string"?(a=e.push(t)-1,s.unshift({index:a,label:t})):isNaN(t)&&(a=null),a);function S9e(e,t,a,s){const r=e.indexOf(t);if(r===-1)return C9e(e,t,a,s);const i=e.lastIndexOf(t);return r!==i?a:r}const _9e=(e,t)=>e===null?null:Es(Math.round(e),0,t);function hB(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class A9e extends ih{static id="category";static defaults={ticks:{callback:hB}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const a=this._addedLabels;if(a.length){const s=this.getLabels();for(const{index:r,label:i}of a)s[r]===i&&s.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,a){if(_n(t))return null;const s=this.getLabels();return a=isFinite(a)&&s[a]===t?a:S9e(s,t,nn(a,t),this._addedLabels),_9e(a,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:a}=this.getUserBounds();let{min:s,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),a||(r=this.getLabels().length-1)),this.min=s,this.max=r}buildTicks(){const t=this.min,a=this.max,s=this.options.offset,r=[];let i=this.getLabels();i=t===0&&a===i.length-1?i:i.slice(t,a+1),this._valueRange=Math.max(i.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let l=t;l<=a;l++)r.push({value:l});return r}getLabelForValue(t){return hB.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const a=this.ticks;return t<0||t>a.length-1?null:this.getPixelForValue(a[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function E9e(e,t){const a=[],{bounds:r,step:i,min:l,max:o,precision:c,count:d,maxTicks:u,maxDigits:f,includeBounds:p}=e,x=i||1,y=u-1,{min:w,max:v}=t,C=!_n(l),N=!_n(o),S=!_n(d),T=(v-w)/(f+1);let k=g8((v-w)/y/x)*x,_,E,A,I;if(k<1e-14&&!C&&!N)return[{value:w},{value:v}];I=Math.ceil(v/k)-Math.floor(w/k),I>y&&(k=g8(I*k/y/x)*x),_n(c)||(_=Math.pow(10,c),k=Math.ceil(k*_)/_),r==="ticks"?(E=Math.floor(w/k)*k,A=Math.ceil(v/k)*k):(E=w,A=v),C&&N&&i&&z7e((o-l)/i,k/1e3)?(I=Math.round(Math.min((o-l)/k,u)),k=(o-l)/I,E=l,A=o):S?(E=C?l:E,A=N?o:A,I=d-1,k=(A-E)/I):(I=(A-E)/k,Xg(I,Math.round(I),k/1e3)?I=Math.round(I):I=Math.ceil(I));const z=Math.max(p8(k),p8(E));_=Math.pow(10,_n(c)?z:c),E=Math.round(E*_)/_,A=Math.round(A*_)/_;let F=0;for(C&&(p&&E!==l?(a.push({value:l}),E<l&&F++,Xg(Math.round((E+F*k)*_)/_,l,gB(l,T,e))&&F++):E<l&&F++);F<I;++F){const D=Math.round((E+F*k)*_)/_;if(N&&D>o)break;a.push({value:D})}return N&&p&&A!==o?a.length&&Xg(a[a.length-1].value,o,gB(o,T,e))?a[a.length-1].value=o:a.push({value:o}):(!N||A===o)&&a.push({value:A}),a}function gB(e,t,{horizontal:a,minRotation:s}){const r=po(s),i=(a?Math.sin(r):Math.cos(r))||.001,l=.75*t*(""+e).length;return Math.min(t/i,l)}class T9e extends ih{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,a){return _n(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:a,maxDefined:s}=this.getUserBounds();let{min:r,max:i}=this;const l=c=>r=a?r:c,o=c=>i=s?i:c;if(t){const c=wl(r),d=wl(i);c<0&&d<0?o(0):c>0&&d>0&&l(0)}if(r===i){let c=i===0?1:Math.abs(i*.05);o(i+c),t||l(r-c)}this.min=r,this.max=i}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:a,stepSize:s}=t,r;return s?(r=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),a=a||11),a&&(r=Math.min(a,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,a=t.ticks;let s=this.getTickLimit();s=Math.max(2,s);const r={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:a.precision,step:a.stepSize,count:a.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:a.minRotation||0,includeBounds:a.includeBounds!==!1},i=this._range||this,l=E9e(r,i);return t.bounds==="ticks"&&F7e(l,this,"value"),t.reverse?(l.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),l}configure(){const t=this.ticks;let a=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){const r=(s-a)/Math.max(t.length-1,1)/2;a-=r,s+=r}this._startValue=a,this._endValue=s,this._valueRange=s-a}getLabelForValue(t){return ED(t,this.chart.options.locale,this.options.ticks.format)}}class k9e extends T9e{static id="linear";static defaults={ticks:{callback:KZ.formatters.numeric}};determineDataLimits(){const{min:t,max:a}=this.getMinMax(!0);this.min=hi(t)?t:0,this.max=hi(a)?a:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),a=t?this.width:this.height,s=po(this.options.ticks.minRotation),r=(t?Math.sin(s):Math.cos(s))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(a/Math.min(40,i.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const Xj={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},er=Object.keys(Xj);function pB(e,t){return e-t}function xB(e,t){if(_n(t))return null;const a=e._adapter,{parser:s,round:r,isoWeekday:i}=e._parseOpts;let l=t;return typeof s=="function"&&(l=s(l)),hi(l)||(l=typeof s=="string"?a.parse(l,s):a.parse(l)),l===null?null:(r&&(l=r==="week"&&($p(i)||i===!0)?a.startOf(l,"isoWeek",i):a.startOf(l,r)),+l)}function yB(e,t,a,s){const r=er.length;for(let i=er.indexOf(e);i<r-1;++i){const l=Xj[er[i]],o=l.steps?l.steps:Number.MAX_SAFE_INTEGER;if(l.common&&Math.ceil((a-t)/(o*l.size))<=s)return er[i]}return er[r-1]}function L9e(e,t,a,s,r){for(let i=er.length-1;i>=er.indexOf(a);i--){const l=er[i];if(Xj[l].common&&e._adapter.diff(r,s,l)>=t-1)return l}return er[a?er.indexOf(a):0]}function P9e(e){for(let t=er.indexOf(e)+1,a=er.length;t<a;++t)if(Xj[er[t]].common)return er[t]}function bB(e,t,a){if(!a)e[t]=!0;else if(a.length){const{lo:s,hi:r}=SD(a,t),i=a[s]>=t?a[s]:a[r];e[i]=!0}}function D9e(e,t,a,s){const r=e._adapter,i=+r.startOf(t[0].value,s),l=t[t.length-1].value;let o,c;for(o=i;o<=l;o=+r.add(o,1,s))c=a[o],c>=0&&(t[c].major=!0);return t}function vB(e,t,a){const s=[],r={},i=t.length;let l,o;for(l=0;l<i;++l)o=t[l],r[o]=l,s.push({value:o,major:!1});return i===0||!a?s:D9e(e,s,r,a)}class wB extends ih{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,a={}){const s=t.time||(t.time={}),r=this._adapter=new TBe._date(t.adapters.date);r.init(a),Kg(s.displayFormats,r.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=a.normalized}parse(t,a){return t===void 0?null:xB(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,a=this._adapter,s=t.time.unit||"day";let{min:r,max:i,minDefined:l,maxDefined:o}=this.getUserBounds();function c(d){!l&&!isNaN(d.min)&&(r=Math.min(r,d.min)),!o&&!isNaN(d.max)&&(i=Math.max(i,d.max))}(!l||!o)&&(c(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&c(this.getMinMax(!1))),r=hi(r)&&!isNaN(r)?r:+a.startOf(Date.now(),s),i=hi(i)&&!isNaN(i)?i:+a.endOf(Date.now(),s)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const t=this.getLabelTimestamps();let a=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(a=t[0],s=t[t.length-1]),{min:a,max:s}}buildTicks(){const t=this.options,a=t.time,s=t.ticks,r=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,l=this.max,o=W7e(r,i,l);return this._unit=a.unit||(s.autoSkip?yB(a.minUnit,this.min,this.max,this._getLabelCapacity(i)):L9e(this,o.length,a.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:P9e(this._unit),this.initOffsets(r),t.reverse&&o.reverse(),vB(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let a=0,s=0,r,i;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?a=1-r:a=(this.getDecimalForValue(t[1])-r)/2,i=this.getDecimalForValue(t[t.length-1]),t.length===1?s=i:s=(i-this.getDecimalForValue(t[t.length-2]))/2);const l=t.length<3?.5:.25;a=Es(a,0,l),s=Es(s,0,l),this._offsets={start:a,end:s,factor:1/(a+1+s)}}_generate(){const t=this._adapter,a=this.min,s=this.max,r=this.options,i=r.time,l=i.unit||yB(i.minUnit,a,s,this._getLabelCapacity(a)),o=nn(r.ticks.stepSize,1),c=l==="week"?i.isoWeekday:!1,d=$p(c)||c===!0,u={};let f=a,p,x;if(d&&(f=+t.startOf(f,"isoWeek",c)),f=+t.startOf(f,d?"day":l),t.diff(s,a,l)>1e5*o)throw new Error(a+" and "+s+" are too far apart with stepSize of "+o+" "+l);const y=r.ticks.source==="data"&&this.getDataTimestamps();for(p=f,x=0;p<s;p=+t.add(p,o,l),x++)bB(u,p,y);return(p===s||r.bounds==="ticks"||x===1)&&bB(u,p,y),Object.keys(u).sort(pB).map(w=>+w)}getLabelForValue(t){const a=this._adapter,s=this.options.time;return s.tooltipFormat?a.format(t,s.tooltipFormat):a.format(t,s.displayFormats.datetime)}format(t,a){const r=this.options.time.displayFormats,i=this._unit,l=a||r[i];return this._adapter.format(t,l)}_tickFormatFunction(t,a,s,r){const i=this.options,l=i.ticks.callback;if(l)return Kn(l,[t,a,s],this);const o=i.time.displayFormats,c=this._unit,d=this._majorUnit,u=c&&o[c],f=d&&o[d],p=s[a],x=d&&f&&p&&p.major;return this._adapter.format(t,r||(x?f:u))}generateTickLabels(t){let a,s,r;for(a=0,s=t.length;a<s;++a)r=t[a],r.label=this._tickFormatFunction(r.value,a,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const a=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((a.start+s)*a.factor)}getValueForPixel(t){const a=this._offsets,s=this.getDecimalForPixel(t)/a.factor-a.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const a=this.options.ticks,s=this.ctx.measureText(t).width,r=po(this.isHorizontal()?a.maxRotation:a.minRotation),i=Math.cos(r),l=Math.sin(r),o=this._resolveTickFontOptions(0).size;return{w:s*i+o*l,h:s*l+o*i}}_getLabelCapacity(t){const a=this.options.time,s=a.displayFormats,r=s[a.unit]||s.millisecond,i=this._tickFormatFunction(t,0,vB(this,[t],this._majorUnit),r),l=this._getLabelSize(i),o=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return o>0?o:1}getDataTimestamps(){let t=this._cache.data||[],a,s;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(a=0,s=r.length;a<s;++a)t=t.concat(r[a].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let a,s;if(t.length)return t;const r=this.getLabels();for(a=0,s=r.length;a<s;++a)t.push(xB(this,r[a]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return qZ(t.sort(pB))}}function Nb(e,t,a){let s=0,r=e.length-1,i,l,o,c;a?(t>=e[s].pos&&t<=e[r].pos&&({lo:s,hi:r}=eu(e,"pos",t)),{pos:i,time:o}=e[s],{pos:l,time:c}=e[r]):(t>=e[s].time&&t<=e[r].time&&({lo:s,hi:r}=eu(e,"time",t)),{time:i,pos:o}=e[s],{time:l,pos:c}=e[r]);const d=l-i;return d?o+(c-o)*(t-i)/d:o}class tqe extends wB{static id="timeseries";static defaults=wB.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),a=this._table=this.buildLookupTable(t);this._minPos=Nb(a,this.min),this._tableRange=Nb(a,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:a,max:s}=this,r=[],i=[];let l,o,c,d,u;for(l=0,o=t.length;l<o;++l)d=t[l],d>=a&&d<=s&&r.push(d);if(r.length<2)return[{time:a,pos:0},{time:s,pos:1}];for(l=0,o=r.length;l<o;++l)u=r[l+1],c=r[l-1],d=r[l],Math.round((u+c)/2)!==d&&i.push({time:d,pos:l/(o-1)});return i}_generate(){const t=this.min,a=this.max;let s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(a)||s.length===1)&&s.push(a),s.sort((r,i)=>r-i)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const a=this.getDataTimestamps(),s=this.getLabelTimestamps();return a.length&&s.length?t=this.normalize(a.concat(s)):t=a.length?a:s,t=this._cache.all=t,t}getDecimalForValue(t){return(Nb(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const a=this._offsets,s=this.getDecimalForPixel(t)/a.factor-a.end;return Nb(this._table,s*this._tableRange+this._minPos,!0)}}const SJ="label";function NB(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function O9e(e,t){const a=e.options;a&&t&&Object.assign(a,t)}function _J(e,t){e.labels=t}function AJ(e,t,a=SJ){const s=[];e.datasets=t.map(r=>{const i=e.datasets.find(l=>l[a]===r[a]);return!i||!r.data||s.includes(i)?{...r}:(s.push(i),Object.assign(i,r),i)})}function M9e(e,t=SJ){const a={labels:[],datasets:[]};return _J(a,e.labels),AJ(a,e.datasets,t),a}function I9e(e,t){const{height:a=150,width:s=300,redraw:r=!1,datasetIdKey:i,type:l,data:o,options:c,plugins:d=[],fallbackContent:u,updateMode:f,...p}=e,x=h.useRef(null),y=h.useRef(null),w=()=>{x.current&&(y.current=new Kj(x.current,{type:l,data:M9e(o,i),options:c&&{...c},plugins:d}),NB(t,y.current))},v=()=>{NB(t,null),y.current&&(y.current.destroy(),y.current=null)};return h.useEffect(()=>{!r&&y.current&&c&&O9e(y.current,c)},[r,c]),h.useEffect(()=>{!r&&y.current&&_J(y.current.config.data,o.labels)},[r,o.labels]),h.useEffect(()=>{!r&&y.current&&o.datasets&&AJ(y.current.config.data,o.datasets,i)},[r,o.datasets]),h.useEffect(()=>{y.current&&(r?(v(),setTimeout(w)):y.current.update(f))},[r,c,o.labels,o.datasets,f]),h.useEffect(()=>{y.current&&(v(),setTimeout(w))},[l]),h.useEffect(()=>(w(),()=>v()),[]),n.jsx("canvas",{ref:x,role:"img",height:a,width:s,...p,children:u})}const $9e=h.forwardRef(I9e);function RD(e,t){return Kj.register(t),h.forwardRef((a,s)=>n.jsx($9e,{...a,ref:s,type:e}))}const R9e=RD("line",ABe),z9e=RD("bar",CBe),F9e=RD("pie",EBe);Kj.register(A9e,k9e,l9e,e9e,t9e,GHe,g9e,j9e,f9e);const EJ=e=>n.jsx(On,{...e}),U9e=e=>n.jsx(zf,{...e}),B9e=e=>n.jsx(Xp,{...e}),H9e=e=>n.jsx(ba,{...e}),TJ=e=>n.jsx(xn,{...e}),G9e=e=>n.jsx(Ade,{...e}),W9e=[{icon:EJ,title:"Total Contacts",value:128,color:"text-blue-600",bgColor:"bg-blue-50"},{icon:TJ,title:"Emails Sent",value:450,color:"text-purple-600",bgColor:"bg-purple-50"},{icon:B9e,title:"Active Campaigns",value:9,color:"text-green-600",bgColor:"bg-green-50"},{icon:U9e,title:"Revenue",value:125e3,color:"text-yellow-600",bgColor:"bg-yellow-50"}],V9e=[{name:"Emma Watty",company:"Tech Interaction Inc.",assignedBy:"Alice Smith",source:"Website",date:"Oct 10, 2:10 PM"},{name:"John Johnny",company:"Capital Business Co.",assignedBy:"Bob Johnson",source:"Referral",date:"Oct 9, 12:00 AM"},{name:"Annie Arnty",company:"Dynamic Systems Inc.",assignedBy:"Catherine Lee",source:"Trade Show",date:"Oct 8, 1:25 PM"},{name:"James Wilson",company:"Global Services LLC",assignedBy:"David Kim",source:"Cold Call",date:"Oct 7, 11:15 AM"}],q9e={labels:["Week 1","Week 2","Week 3","Week 4"],datasets:[{label:"Leads",data:[50,75,60,90],backgroundColor:"rgba(96, 165, 250, 0.6)",borderColor:"rgba(96, 165, 250, 1)",borderWidth:1},{label:"Conversions",data:[10,20,15,25],backgroundColor:"rgba(34, 197, 94, 0.6)",borderColor:"rgba(34, 197, 94, 1)",borderWidth:1}]},Y9e={responsive:!0,plugins:{legend:{position:"top",labels:{color:"#374151"}},title:{display:!0,color:"#111827",font:{size:18}}}},Q9e={labels:["Leads","Conversions"],datasets:[{label:"Leads Status",data:[75,25],backgroundColor:["rgba(96, 165, 250, 0.6)","rgba(34, 197, 94, 0.6)"],borderColor:["rgba(96, 165, 250, 1)","rgba(34, 197, 94, 1)"],borderWidth:1}]},K9e={responsive:!0,plugins:{legend:{position:"top",labels:{color:"#374151"}},title:{display:!0,color:"#111827",font:{size:18}}}},X9e=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},Z9e=()=>{const e=[{icon:EJ,label:"New Contact"},{icon:TJ,label:"New Campaign"},{icon:H9e,label:"New Task"},{icon:G9e,label:"New Leads"}];return n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 flex flex-col md:flex-row items-center space-y-3 md:space-y-0 md:space-x-4",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 py-2 flex-grow focus-within:ring-2 focus-within:ring-indigo-500 transition w-full md:max-w-3xl",children:[n.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search Contacts, Leads, or Campaigns...",className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"flex space-x-3 md:ml-auto",children:e.map((t,a)=>n.jsxs("div",{className:"relative group",children:[n.jsx("button",{className:"p-2 text-gray-500 hover:text-gray-900 transition rounded-full hover:bg-gray-100 focus:outline-none",children:n.jsx(t.icon,{size:20})}),n.jsx("span",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-1 bg-gray-800 text-white text-xs rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition",children:t.label})]},a))})]})},J9e=({icon:e,title:t,value:a,color:s,bgColor:r})=>n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-lg transition duration-300 hover:shadow-xl hover:ring-2 hover:ring-blue-500 cursor-pointer",onClick:()=>console.log(`Clicked metric card: ${t}`),children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:22})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]}),eGe=({name:e,company:t,assignedBy:a,source:s,date:r})=>{const{text:i,bg:l}=X9e(s);return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 px-2 -mx-2 rounded-md",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800",children:e}),n.jsx("p",{className:"text-xs text-gray-500",children:t}),a&&n.jsxs("p",{className:"text-xs text-gray-500",children:["Assigned by:"," ",n.jsx("span",{className:"font-semibold text-gray-700",children:a})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-400",children:r}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${i} ${l} px-2 py-0.5 rounded-full`,children:s})]})]})})},tGe=({title:e,children:t})=>n.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-md flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:e}),n.jsx("span",{className:"text-sm text-indigo-500 cursor-pointer hover:underline",children:"See All"})]}),t]}),nGe=({title:e,chartData:t,chartOptions:a})=>{const[s,r]=h.useState("bar"),i=s==="pie"?Q9e:t,l=s==="pie"?K9e:a,o=s==="line"?R9e:s==="pie"?F9e:z9e,c=s==="pie"?250:300;return n.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md flex flex-col hover:shadow-lg transition",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:e}),n.jsxs("select",{value:s,onChange:d=>r(d.target.value),className:"border border-gray-300 rounded-md px-2 py-1 text-sm",children:[n.jsx("option",{value:"bar",children:"Bar"}),n.jsx("option",{value:"line",children:"Line"}),n.jsx("option",{value:"pie",children:"Pie"})]})]}),n.jsx("div",{className:"w-full flex justify-center",style:{height:c},children:n.jsx(o,{data:i,options:l})})]})};function aGe(){const{user:e}=Kt();return h.useEffect(()=>{document.title="Dashboard | Sari-Sari CRM"},[]),n.jsx("div",{className:"min-h-screen pt-5 pb-10 font-sans",children:n.jsxs("main",{className:"max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"text-xl font-bold mb-4",children:["Welcome back, ",e?.name||"Marketing","! Heres your marketing overview."]}),n.jsx(Z9e,{}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6",children:W9e.map(t=>n.jsx(J9e,{...t},t.title))}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[n.jsx(nGe,{title:"Leads & Conversions",chartData:q9e,chartOptions:Y9e}),n.jsx(tGe,{title:"Latest Leads",children:V9e.map((t,a)=>n.jsx(eGe,{...t},a))})]})]})})}function sGe(){h.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[e,t]=h.useState(null),[a,s]=h.useState(""),[r,i]=h.useState("All Statuses"),l=h.useMemo(()=>[{company:"Acme Corporation",url:"https://acme.com",status:"CUSTOMER",industry:"Technology",territory:"North Region",phone_number:"+1-555-0100",billing_address:"123 Main St, North City",shipping_address:"456 Elm St, North City",created_by:"John Appleseed",created_date:"2024-01-10",last_updated:"2025-09-25 14:30"},{company:"Beta Solutions",url:"https://beta.com",status:"PROSPECT",industry:"Finance",territory:"South Region",phone_number:"+1-555-0200",billing_address:"789 Pine St, South City",shipping_address:"101 Maple St, South City",created_by:"Jane Doe",created_date:"2024-03-05",last_updated:"2025-10-01 10:15"},{company:"Gamma Partners",url:"https://gamma.com",status:"PARTNER",industry:"Retail",territory:"East Region",phone_number:"+1-555-0300",billing_address:"234 Oak St, East City",shipping_address:"345 Birch St, East City",created_by:"Alice Smith",created_date:"2023-12-20",last_updated:"2025-08-15 09:45"},{company:"Delta Corp",url:"https://delta.com",status:"INACTIVE",industry:"Logistics",territory:"West Region",phone_number:"+1-555-0400",billing_address:"987 Cedar St, West City",shipping_address:"654 Pine St, West City",created_by:"Bob Johnson",created_date:"2023-11-15",last_updated:"2025-06-12 11:20"}],[]),o=f=>t(f),c=()=>t(null),d=h.useMemo(()=>[{title:"Total Accounts",value:l.length,color:"text-yellow-600",bgColor:"bg-yellow-50",icon:On},{title:"Customers",value:l.filter(f=>f.status==="CUSTOMER").length,color:"text-green-600",bgColor:"bg-green-50",icon:Nl},{title:"Prospects",value:l.filter(f=>f.status==="PROSPECT").length,color:"text-purple-600",bgColor:"bg-purple-50",icon:Wn},{title:"Partners",value:l.filter(f=>f.status==="PARTNER").length,color:"text-pink-600",bgColor:"bg-pink-50",icon:Jt},{title:"Active",value:l.filter(f=>f.status==="CUSTOMER"||f.status==="PARTNER").length,color:"text-blue-600",bgColor:"bg-blue-50",icon:Nl},{title:"Inactive",value:l.filter(f=>f.status==="INACTIVE").length,color:"text-gray-600",bgColor:"bg-gray-50",icon:jl},{title:"Former",value:l.filter(f=>f.status==="FORMER").length,color:"text-orange-600",bgColor:"bg-orange-50",icon:jl}],[l]);if(e)return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs("button",{onClick:c,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-4 sm:mb-6 cursor-pointer",children:[n.jsx(Du,{className:"mr-1 w-4 h-4 sm:w-5 sm:h-5"})," Back"]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:n.jsx("div",{children:n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800 flex items-center gap-2",children:[e.company,n.jsx("span",{className:`inline-block text-xs px-2 py-0.5 rounded ${e.status==="CUSTOMER"?"bg-green-600 text-white":e.status==="PROSPECT"?"bg-purple-600 text-white":e.status==="PARTNER"?"bg-pink-600 text-white":"bg-gray-500 text-white"}`,children:e.status})]})})})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 sm:p-6 shadow-sm overflow-x-auto",children:[n.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4 text-gray-800",children:"Account Details"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm text-gray-700",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Website:"})," ",n.jsx("br",{}),n.jsx("a",{href:e.url,className:"text-blue-600 hover:underline break-words",children:e.url})]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Industry:"})," ",n.jsx("br",{}),e.industry]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Territory:"})," ",n.jsx("br",{}),e.territory]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Phone Number:"})," ",n.jsx("br",{}),e.phone_number]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Billing Address:"})," ",n.jsx("br",{}),e.billing_address]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Shipping Address:"})," ",n.jsx("br",{}),e.shipping_address]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Created By:"})," ",n.jsx("br",{}),e.created_by," on ",e.created_date]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Last Updated:"})," ",n.jsx("br",{}),e.last_updated]})]})]})]});const u=l.filter(f=>{const p=f.company.toLowerCase().includes(a.toLowerCase())||f.url.toLowerCase().includes(a.toLowerCase())||f.industry.toLowerCase().includes(a.toLowerCase())||f.territory.toLowerCase().includes(a.toLowerCase())||f.phone_number.toLowerCase().includes(a.toLowerCase()),x=r==="All Statuses"||r==="Active"&&(f.status==="CUSTOMER"||f.status==="PARTNER")||r==="Inactive"&&f.status==="INACTIVE"||r==="Former"&&f.status==="FORMER"||f.status.toLowerCase()===r.toLowerCase();return p&&x});return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-sans",children:[n.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(On,{className:"mr-2 text-blue-600"}),"Accounts List"]})}),n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 xl:grid-cols-4 md:grid-cols-4 gap-4 mb-6",children:d.map(f=>n.jsx(rGe,{...f},f.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search by company, website, industry, territory, or phone...",value:a,onChange:f=>s(f.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:r,onChange:f=>i(f.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"All Statuses"}),n.jsx("option",{children:"Customer"}),n.jsx("option",{children:"Prospect"}),n.jsx("option",{children:"Partner"}),n.jsx("option",{children:"Active"}),n.jsx("option",{children:"Inactive"}),n.jsx("option",{children:"Former"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Company"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Industry"}),n.jsx("th",{className:"py-3 px-4",children:"Territory"}),n.jsx("th",{className:"py-3 px-4",children:"Phone"})]})}),n.jsxs("tbody",{children:[u.map((f,p)=>n.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>o(f),children:[n.jsx("td",{className:"py-3 px-4 break-words",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-words",children:f.company}),n.jsx("div",{className:"text-gray-500 text-xs break-words",children:f.url})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${f.status==="CUSTOMER"?"bg-green-100 text-green-700":f.status==="PROSPECT"?"bg-purple-100 text-purple-700":f.status==="PARTNER"?"bg-pink-100 text-pink-700":f.status==="INACTIVE"?"bg-gray-100 text-gray-700":"bg-orange-100 text-orange-700"}`,children:f.status})}),n.jsx("td",{className:"py-3 px-4 break-words",children:f.industry}),n.jsx("td",{className:"py-3 px-4 break-words",children:f.territory}),n.jsxs("td",{className:"py-3 px-4 flex items-center space-x-2 break-words",children:[n.jsx(At,{className:"text-gray-500"}),n.jsx("span",{children:f.phone_number})]})]},p)),u.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"py-4 text-center text-gray-500",children:"No accounts match your search/filter."})})]})]})})]})}const rGe=({icon:e,title:t,value:a,color:s,bgColor:r})=>n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md hover:shadow-lg hover:ring-2 hover:ring-blue-500 cursor-pointer transition-all duration-300",onClick:()=>console.log(`Clicked: ${t}`),children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:22})}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]});function iGe(){h.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[e,t]=h.useState(!1),[a,s]=h.useState(null),[r,i]=h.useState(!1),[l,o]=h.useState(""),[c,d]=h.useState("All Contacts"),[u,f]=h.useState([{id:1,name:"John Smith",title:"Marketing Director",account:"Acme Corporation",email:"john.smith@acme.com",phone1:"+1-555-0101",phone2:"+1-555-0102",department:"Marketing",assigned:"Jane Sales",created:"1/10/2024",mobile:"09217229846",workPhone:"(555) 123-4567",createdBy:"John Appleseed",lastUpdated:"2025-09-21 15:30",notes:"Key marketing partner for Q4 campaigns."}]),[p,x]=h.useState({id:null,name:"",email:"",workPhone:"",title:"",department:"",phone1:"",phone2:"",account:"",assigned:"",notes:""}),y=k=>{k.target.id==="modalBackdrop"&&t(!1)},w=k=>{s(k)},v=()=>{s(null)},C=()=>{i(!1),x({id:null,name:"",email:"",workPhone:"",title:"",department:"",phone1:"",phone2:"",account:"",assigned:"",notes:""}),t(!0)},N=(k,_)=>{_.stopPropagation(),i(!0),x(k),t(!0)},S=k=>{const{name:_,value:E}=k.target;x(A=>({...A,[_]:E}))},T=k=>{if(k.preventDefault(),r)f(_=>_.map(E=>E.id===p.id?{...p}:E));else{const _={...p,id:Date.now(),created:new Date().toLocaleDateString(),createdBy:"Admin User"};f(E=>[...E,_])}t(!1)};return a?n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[n.jsxs("button",{onClick:v,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-4 sm:mb-6 cursor-pointer",children:[n.jsx(Du,{className:"mr-1 w-4 h-4 sm:w-5 sm:h-5"})," Back"]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:a.account}),n.jsx("span",{className:"mt-1 sm:mt-0 bg-blue-600 text-white text-xs sm:text-sm px-2 py-0.5 rounded w-fit",children:"Active"})]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0 mt-3 sm:mt-0",children:n.jsxs("button",{className:"w-full sm:w-auto bg-gray-800 text-white px-5 py-2 rounded-md hover:bg-gray-900 transition flex items-center gap-2",children:[n.jsx($o,{}),"Export"]})})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 sm:p-6 w-full max-w-full lg:max-w-6xl shadow-sm overflow-x-auto mx-auto",children:[n.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4 text-gray-800",children:"Contact Details"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 text-sm text-gray-700",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Primary Contact:"})," ",n.jsx("br",{}),a.name]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Email:"})," ",n.jsx("br",{}),a.email]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Created By:"})," ",n.jsx("br",{}),a.createdBy," on ",a.created]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Title:"})," ",n.jsx("br",{}),a.title]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Assigned To:"})," ",n.jsx("br",{}),a.assigned]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Work Phone:"})," ",n.jsx("br",{}),a.workPhone]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Account:"})," ",n.jsx("br",{}),a.account]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Mobile Phone:"})," ",n.jsx("br",{}),a.phone1]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Last Updated:"})," ",n.jsx("br",{}),a.lastUpdated]})]}),n.jsxs("div",{className:"mt-6 border-gray-200 pt-4",children:[n.jsx("h3",{className:"text-md sm:text-lg font-semibold text-gray-800 mb-2",children:"Notes"}),n.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:a.notes?a.notes:"No additional notes were provided for this contact."})]})]})]}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(On,{className:"mr-2 text-blue-600"})," Contacts Management"]}),n.jsx("button",{onClick:C,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base transition",children:" Add Contact"})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search Contacts...",value:l,onChange:k=>o(k.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:c,onChange:k=>d(k.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"All Contacts"}),n.jsx("option",{children:"Option 1"}),n.jsx("option",{children:"Option 2"}),n.jsx("option",{children:"Option 3"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-[600px] w-full border border-gray-200 rounded-lg bg-white shadow-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-sm text-gray-600",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact Info"}),n.jsx("th",{className:"py-3 px-4",children:"Department"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Created"}),n.jsx("th",{className:"py-3 px-4 text-center",children:"Actions"})]})}),n.jsx("tbody",{className:"text-xs text-gray-700",children:u.map((k,_)=>n.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>w(k),children:[n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all",children:k.name}),n.jsx("div",{className:"text-xs text-gray-500",children:k.title})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Tx,{className:"text-gray-500"}),n.jsx("span",{children:k.account})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Zn,{className:"text-gray-500"}),n.jsx("span",{children:k.email})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(At,{className:"text-gray-500"}),n.jsx("span",{children:k.phone1})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(At,{className:"text-gray-500"}),n.jsx("span",{children:k.phone2})]})]})}),n.jsx("td",{className:"py-3 px-4",children:k.department}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Jt,{className:"text-gray-500"}),n.jsx("span",{children:k.assigned})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ct,{className:"text-gray-500"}),n.jsx("span",{children:k.created})]})}),n.jsx("td",{className:"py-3 px-4 text-center",children:n.jsx("div",{className:"flex justify-center",children:n.jsx("button",{onClick:E=>N(k,E),className:"text-blue-500 hover:text-blue-700",children:n.jsx(ia,{})})})})]},_))})]})}),e&&n.jsx("div",{id:"modalBackdrop",onClick:y,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh]",onClick:k=>k.stopPropagation(),children:[n.jsx("button",{onClick:()=>t(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 text-center",children:r?"Edit Contact":"Add New Contact"}),n.jsxs("form",{onSubmit:T,className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Name"}),n.jsx("input",{type:"text",name:"name",value:p.name,onChange:S,placeholder:"Full name",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Email"}),n.jsx("input",{type:"email",name:"email",value:p.email,onChange:S,placeholder:"example@email.com",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),n.jsx("input",{type:"text",name:"workPhone",value:p.workPhone,onChange:S,placeholder:"09 --- --- ---",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Title"}),n.jsx("input",{type:"text",name:"title",value:p.title,onChange:S,placeholder:"Job title",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),n.jsx("input",{type:"text",name:"department",value:p.department,onChange:S,placeholder:"Marketing / Sales",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Phone Number 1"}),n.jsx("input",{type:"text",name:"phone1",value:p.phone1,onChange:S,placeholder:"09 --- --- ---",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Account"}),n.jsx("input",{type:"text",name:"account",value:p.account,onChange:S,placeholder:"Company name",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Assign To"}),n.jsxs("select",{name:"assigned",value:p.assigned,onChange:S,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",children:[n.jsx("option",{value:"",children:"Assign To"}),n.jsx("option",{value:"Smith",children:"Smith"}),n.jsx("option",{value:"Doe",children:"Doe"}),n.jsx("option",{value:"Jane Sales",children:"Jane Sales"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Phone Number 2"}),n.jsx("input",{type:"text",name:"phone2",value:p.phone2,onChange:S,placeholder:"09 --- --- ---",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 md:col-span-3",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),n.jsx("textarea",{name:"notes",value:p.notes,onChange:S,placeholder:"Additional details...",rows:3,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 md:col-span-3",children:[n.jsx("button",{type:"button",onClick:()=>t(!1),className:"px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 text-white bg-blue-600 border border-blue-500 rounded hover:bg-blue-700 transition",children:"Save Contact"})]})]})]})})]})}const jb={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},Wa=({label:e,value:t,name:a,className:s=""})=>n.jsxs("div",{className:`flex flex-col ${s}`,children:[n.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),n.jsx("input",{type:"text",name:a,defaultValue:t,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),lGe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(Wa,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),n.jsx(Wa,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),n.jsx(Wa,{label:"Industry",name:"industry",value:e.industry})]}),n.jsx(Wa,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),n.jsx(Wa,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),oGe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Wa,{label:"First Name",name:"firstName",value:e.firstName}),n.jsx(Wa,{label:"Last Name",name:"lastName",value:e.lastName}),n.jsx(Wa,{label:"Department",name:"department",value:e.department}),n.jsx(Wa,{label:"Title",name:"title",value:e.title}),n.jsx(Wa,{label:"Work Phone",name:"workPhone",value:e.workPhone}),n.jsx(Wa,{label:"Email",name:"email",value:e.email}),n.jsx(Wa,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),n.jsx(Wa,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),cGe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Wa,{label:"Deal Name",name:"dealName",value:e.dealName}),n.jsxs("div",{className:"flex",children:[n.jsx(Wa,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),n.jsx("div",{className:"flex flex-col justify-end ml-1",children:n.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),n.jsx(Wa,{label:"Stage",name:"stage",value:e.stage}),n.jsx(Wa,{label:"Territory",name:"territory",value:e.territory})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Wa,{label:"Description",name:"description",value:e.description}),n.jsx(Wa,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function kJ({isOpen:e,onClose:t}){const[a,s]=h.useState(1),r=3;if(!e)return null;const i=()=>{a<r?s(a+1):(t(),s(1))},l=()=>{a>1&&s(a-1)},o=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],c=()=>{switch(a){case 1:return n.jsx(lGe,{data:jb});case 2:return n.jsx(oGe,{data:jb});case 3:return n.jsx(cGe,{data:jb});default:return null}};return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:jb.accountName})]}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:n.jsx(qN,{className:"w-6 h-6"})})]}),n.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:o.map(d=>n.jsx("button",{onClick:()=>s(d.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${a===d.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:d.name},d.id))}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c()}),n.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[a>1&&n.jsx("button",{onClick:l,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),a<r?n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}const dGe={name:"Josh Vergara",status:"New",company:"Josh Inc.",title:"CEO",department:"Administration",email:"josh@joshinc.com",territory:"Cavite",assignedTo:"Admin",createdBy:"Admin",workPhone:"09253677323",phone1:"09253677323",phone2:"0907452874",source:"Website",addressLine1:"#1 Pilar Las Pinas",addressLine2:"Suite 400",city:"Las Pinas",state:"Metro Manila",zipCode:"1740",notes:"Interested in our premium plan."};function LJ({lead:e=dGe,onBack:t}){const[a,s]=h.useState(!1);return e?n.jsxs("div",{className:"p-4 sm:p-6 md:p-8 font-inter min-h-screen",children:[n.jsxs("button",{onClick:t,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-4 sm:mb-6 cursor-pointer",children:[n.jsx(Du,{className:"mr-1 w-4 h-4 sm:w-5 sm:h-5"})," Back"]}),n.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-6 sm:mb-8 gap-2 sm:gap-4",children:n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold",children:e.name}),n.jsx("span",{className:"bg-blue-100 text-blue-700 text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full",children:e.status}),n.jsx("div",{className:"flex flex-wrap items-center ml-0 sm:ml-1",children:n.jsx("button",{onClick:()=>s(!0),className:"bg-green-600 hover:bg-green-700 text-white px-3 sm:px-5 py-1.5 sm:py-2 rounded-lg font-medium text-xs sm:text-sm",children:"Convert"})})]})}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200 mb-6 sm:mb-8",children:[n.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-4 sm:mb-6",children:"Lead Details"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Name:"}),n.jsx("p",{children:e.name})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:e.company})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Title:"}),n.jsx("p",{children:e.title})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:e.department})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:e.email})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:e.territory})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assign To:"}),n.jsx("p",{children:e.assignedTo})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:e.createdBy})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:e.workPhone})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:e.phone1})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:e.phone2})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Source:"}),n.jsx("p",{children:e.source})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Address:"}),n.jsxs("p",{className:"text-sm text-gray-700 leading-relaxed",children:[e.addressLine1," ",n.jsx("br",{}),e.addressLine2," ",n.jsx("br",{}),e.city,", ",e.state," ",e.zipCode]})]}),n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),n.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:e.notes||"No notes available."})]})]}),n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-4 sm:mb-6",children:"Related Activities"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 sm:gap-8 text-sm",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Tasks (2)"}),n.jsxs("div",{className:"space-y-1 text-gray-700",children:[n.jsx("p",{children:"Schedule follow-up call"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Due: 2025-09-15 | In Progress"}),n.jsx("p",{children:"Schedule follow-up call"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Due: 2025-09-18 | In Progress"})]}),n.jsx("a",{href:"#",className:"text-blue-600 hover:underline text-xs font-medium mt-2 inline-block",children:"View All Tasks"})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Calls (2)"}),n.jsxs("div",{className:"space-y-1 text-gray-700",children:[n.jsx("p",{children:"Initial discovery call"}),n.jsx("p",{className:"text-xs text-gray-500",children:"2025-09-10 | Completed"}),n.jsx("p",{children:"Initial discovery call"}),n.jsx("p",{className:"text-xs text-gray-500",children:"2025-09-11 | Completed"})]}),n.jsx("a",{href:"#",className:"text-blue-600 hover:underline text-xs font-medium mt-2 inline-block",children:"View All Calls"})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Meeting (0)"}),n.jsx("p",{className:"text-gray-500",children:"No meetings associated."}),n.jsx("a",{href:"#",className:"text-blue-600 hover:underline text-xs font-medium mt-2 inline-block",children:"View All Meetings"})]})]})]}),n.jsx(kJ,{isOpen:a,onClose:()=>s(!1)})]}):null}const uGe=Uf.all(),FA=uGe.map(e=>({code:`+${e.countryCallingCode}`,name:e.countryCode}));function mGe(){const[e,t]=h.useState(null),[a,s]=h.useState(!1),[r,i]=h.useState(null),[l,o]=h.useState([{id:1,first_name:"Jane",last_name:"Doe"},{id:2,first_name:"John",last_name:"Smith"},{id:3,first_name:"Mary",last_name:"Johnson"}]),[c,d]=h.useState([{id:1,name:"Joshua Vergara",status:"Qualified",title:"Marketing Director",email:"sarah.williams@innovateco.com",phone1:"9271229484",phone2:"---------",workPhone:"999123-4567",work_ccode:"+63",m1_ccode:"+63",m2_ccode:"+63",territory:"East Coast",department:"Marketing",company:"Innovate Co.",createdBy:"John Appleseed",createdAt:"2025-09-10 09:30",lastUpdated:"2025-09-12 14:45",source:"Website",assignedTo:"Jane Doe",address:"123 Main St, City, Country",notes:"Important client"}]),[u,f]=h.useState({work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:""});h.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const p=E=>t(E),x=()=>t(null),[y,w]=h.useState(""),[v,C]=h.useState("All Accounts"),N=()=>{s(!1),i(null),f({work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:""})},S=E=>{i(E),s(!0),f({work_ccode:E.work_ccode||"+63",work_phone:E.workPhone||"",m1_ccode:E.m1_ccode||"+63",mobile_phone_1:E.phone1||"",m2_ccode:E.m2_ccode||"+63",mobile_phone_2:E.phone2||""})},T=E=>{window.confirm("Are you sure you want to delete this lead?")&&d(c.filter(A=>A.id!==E))},k=E=>{const{name:A,value:I}=E.target;f(z=>({...z,[A]:I}))},_=E=>{E.preventDefault();const A=new FormData(E.target),I=Object.fromEntries(A.entries());I.name=`${I.firstName} ${I.lastName}`,I.assignedTo=l.find(z=>z.id.toString()===I.assignedTo)?.first_name+" "+l.find(z=>z.id.toString()===I.assignedTo)?.last_name,I.work_ccode=u.work_ccode,I.workPhone=u.work_phone,I.m1_ccode=u.m1_ccode,I.phone1=u.mobile_phone_1,I.m2_ccode=u.m2_ccode,I.phone2=u.mobile_phone_2,d(r?c.map(z=>z.id===r.id?{...z,...I}:z):[...c,{...I,id:c.length+1,createdAt:new Date().toISOString(),lastUpdated:new Date().toISOString()}]),N()};return e?n.jsx(LJ,{lead:e,onBack:x}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-6 gap-3",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Wn,{className:"mr-2 text-blue-600"})," Leads"]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full sm:w-auto",children:[n.jsxs("button",{className:"flex items-center justify-center border border-tertiary text-tertiary px-4 py-2 gap-2 rounded-md hover:bg-gray-800 hover:text-white transition w-full sm:w-auto",children:[n.jsx($o,{})," Download"]}),n.jsx("button",{onClick:()=>s(!0),className:"flex items-center justify-center bg-black text-white px-4 py-2 rounded-md hover:bg-gray-800 transition w-full sm:w-auto",children:" Add Leads"})]})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search Leads...",value:y,onChange:E=>w(E.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:v,onChange:E=>C(E.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"All Leads"}),n.jsx("option",{children:"New"}),n.jsx("option",{children:"Contacted"}),n.jsx("option",{children:"Qualified"}),n.jsx("option",{children:"Converted"}),n.jsx("option",{children:"Lost"})]})})]}),n.jsxs("div",{className:"bg-white shadow-sm overflow-x-auto rounded-md border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-9 min-w-[800px] bg-gray-100 font-bold text-gray-600 text-sm px-4 py-3",children:[n.jsx("div",{children:"Name"}),n.jsx("div",{children:"Account"}),n.jsx("div",{children:"Title"}),n.jsx("div",{children:"Department"}),n.jsx("div",{children:"Email"}),n.jsx("div",{children:"Work Phone"}),n.jsx("div",{children:"Assigned To"}),n.jsx("div",{children:"Updated"}),n.jsx("div",{className:"text-center",children:"Actions"})]}),c.map(E=>n.jsxs("div",{className:"grid grid-cols-9 min-w-[800px] px-4 py-3 text-xs hover:bg-gray-100 transition cursor-pointer gap-x-4",onClick:()=>p(E),children:[n.jsx("div",{className:"truncate",children:E.name}),n.jsx("div",{className:"truncate",children:E.company}),n.jsx("div",{className:"truncate",children:E.title}),n.jsx("div",{className:"truncate",children:E.department}),n.jsx("div",{className:"truncate",children:E.email}),n.jsxs("div",{className:"truncate",children:[E.work_ccode," ",E.workPhone]}),n.jsx("div",{className:"truncate",children:E.assignedTo}),n.jsx("div",{className:"truncate",children:E.lastUpdated}),n.jsxs("div",{className:"flex justify-center space-x-2",children:[n.jsx("button",{className:"text-blue-500 hover:text-blue-700",onClick:A=>{A.stopPropagation(),S(E)},children:n.jsx(ia,{})}),n.jsx("button",{className:"text-red-500 hover:text-red-700",onClick:A=>{A.stopPropagation(),T(E.id)},children:n.jsx(zt,{})})]})]},E.id))]}),a&&n.jsx("div",{id:"modalBackdrop",onClick:N,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-3xl rounded-xl shadow-lg p-5 sm:p-6 relative border border-gray-200 my-6 max-h-[90vh] overflow-y-auto",onClick:E=>E.stopPropagation(),children:[n.jsx("button",{onClick:N,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:n.jsx(Vt,{size:20})}),n.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:r?"Edit Lead":"Add New Lead"}),n.jsxs("form",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 text-xs sm:text-sm",onSubmit:_,children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"First Name"}),n.jsx("input",{name:"firstName",type:"text",placeholder:"Joe",defaultValue:r?r.name.split(" ")[0]:"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",required:!0})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Last Name"}),n.jsx("input",{name:"lastName",type:"text",placeholder:"Smith",defaultValue:r?r.name.split(" ")[1]:"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",required:!0})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Company"}),n.jsx("input",{name:"company",type:"text",placeholder:"ABC Company",defaultValue:r?.company||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Title"}),n.jsx("input",{name:"title",type:"text",placeholder:"ABC Agenda",defaultValue:r?.title||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Department"}),n.jsx("input",{name:"department",type:"text",placeholder:"Sales",defaultValue:r?.department||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Email"}),n.jsx("input",{name:"email",type:"text",placeholder:"abc@gmail.com",defaultValue:r?.email||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Work Phone"}),n.jsxs("div",{className:"border border-gray-300 rounded-md flex flex-row w-full gap-1",children:[n.jsx("select",{name:"work_ccode",value:u.work_ccode,onChange:k,className:"outline-none cursor-pointer py-2 border-r border-gray-400 w-15",children:FA.map(E=>n.jsx("option",{value:E.code,children:E.code},E.code))}),n.jsx("input",{type:"text",name:"work_phone",placeholder:"9----------",value:u.work_phone,onChange:k,className:"w-full outline-none"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Mobile Phone 1"}),n.jsxs("div",{className:"border border-gray-300 rounded-md flex flex-row w-full gap-1",children:[n.jsx("select",{name:"m1_ccode",value:u.m1_ccode,onChange:k,className:"outline-none cursor-pointer py-2 border-r border-gray-400 w-15",children:FA.map(E=>n.jsx("option",{value:E.code,children:E.code},E.code))}),n.jsx("input",{type:"text",name:"mobile_phone_1",placeholder:"9----------",value:u.mobile_phone_1,onChange:k,className:"w-full outline-none"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Mobile Phone 2"}),n.jsxs("div",{className:"border border-gray-300 rounded-md flex flex-row w-full gap-1",children:[n.jsx("select",{name:"m2_ccode",value:u.m2_ccode,onChange:k,className:"outline-none cursor-pointer py-2 border-r border-gray-400 w-15",children:FA.map(E=>n.jsx("option",{value:E.code,children:E.code},E.code))}),n.jsx("input",{type:"text",name:"mobile_phone_2",placeholder:"9----------",value:u.mobile_phone_2,onChange:k,className:"w-full outline-none"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Address"}),n.jsx("input",{name:"address",type:"text",placeholder:"Street No., Street Name, City, State/Province, Postal Code",defaultValue:r?.address||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Assign To"}),n.jsxs("select",{name:"assignedTo",defaultValue:l.find(E=>`${E.first_name} ${E.last_name}`===r?.assignedTo)?.id||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",children:[n.jsx("option",{value:"",disabled:!0,children:"Select user"}),l.map(E=>n.jsxs("option",{value:E.id,children:[E.first_name," ",E.last_name]},E.id))]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Territory"}),n.jsx("input",{type:"text",disabled:!0,name:"territory_id",placeholder:"Assign a user",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Source"}),n.jsxs("select",{className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:r?.source||"",name:"source",children:[n.jsx("option",{value:"",disabled:!0,children:"Select Source"}),n.jsx("option",{value:"Website",children:"Website"}),n.jsx("option",{value:"Referral",children:"Referral"}),n.jsx("option",{value:"Cold call",children:"Cold call"}),n.jsx("option",{value:"Event",children:"Event"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Notes"}),n.jsx("textarea",{name:"notes",placeholder:"Additional details...",rows:3,defaultValue:r?.notes||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-2 col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("button",{type:"button",onClick:N,className:"px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition",children:r?"Update Lead":"Save Lead"})]})]})]})})]})}const jB=["To Do","In Progress","Review","Completed"],Ng=10,fGe=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const a=t.getTimezoneOffset();return new Date(t.getTime()-a*60*1e3).toISOString().slice(0,16)},CB=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},hGe=e=>{const t=e.subject?.trim()??"",a=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),e.status&&String(e.status).toUpperCase();let r=null,i=null,l=null,o=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2&&(o=Number(e.relatedTo2)));const c=e.assignedTo?Number(e.assignedTo):null,d=l||o||i||r,u=l?"Contact":o?"Deal":i?"Account":r?"Lead":null;return{title:t,description:a,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:c,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:l,deal_id:o,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:d,related_type:u}},gGe=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",a=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",l=()=>e.lead?.id||e.lead_id,o=()=>e.account?.id||e.account_id,c=()=>e.contact?.id||e.contact_id,d=()=>e.deal?.id||e.deal_id,u=()=>e.task_assign_to?.id||e.assigned_to,f=()=>e.lead?.title||e.lead_id,p=()=>e.account?.name||e.account_id,x=()=>i||e.contact_id,y=()=>e.deal?.name||e.deal_id;let w="Lead",v="",C="",N="",S="Lead",T="",k="",_="";const E=o(),A=p(),I=l(),z=f();if(E){w="Account",S="Account",T=A,v=String(E);const F=c(),D=d(),M=x(),W=y();F?(C="Contact",k="Contact",_=M,N=String(F)):D&&(k="Deal",C="Deal",_=W,N=String(D))}else I?(S="Lead",T=z,w="Lead",v=String(I)):e.related_type==="Account"&&(w="Account",v=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:e.status||"Not started",dueDate:s,dateAssigned:r,assignedToId:u()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:a,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:S,relatedTo1Text:T,relatedType2Text:k,relatedTo2Text:_,subject:e.title,relatedType1:w,relatedTo1:v,relatedType2:C,relatedTo2:N}};function pGe(){h.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=Kt(),[a,s]=h.useState("board"),[r,i]=h.useState(!1),[l,o]=h.useState(null),[c,d]=h.useState(!1),[u,f]=h.useState([]),[p,x]=h.useState(!0),[y,w]=h.useState(""),[v,C]=h.useState("Filter by Status"),[N,S]=h.useState("Filter by Priority"),[T,k]=h.useState([]),[_,E]=h.useState(1),[A,I]=h.useState(null),[z,F]=h.useState(!1),D=yt(),M=Yt(),[W,Z]=h.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""});h.useEffect(()=>{const he=M.state?.openTaskModal,ae=M.state?.initialTaskData;he&&(i(!0),ae&&Z(Ae=>({...Ae,...ae})),D(M.pathname,{replace:!0,state:{}}))},[M,D]);const R=async()=>{try{const he=await ce.get("/users/all");k(Array.isArray(he.data)?he.data:[])}catch(he){console.error("Failed to fetch users:",he),q.error("Failed to fetch users.")}},Q=async()=>{try{x(!0);const he=await ce.get("/tasks/all"),Ae=(Array.isArray(he.data)?he.data:[]).map(gGe);Ae.sort((ge,Be)=>{const qe=ge.createdAt?new Date(ge.createdAt):0;return(Be.createdAt?new Date(Be.createdAt):0)-qe}),console.log("Fetched Tasks:",Ae),f(Ae),a==="list"&&E(1)}catch(he){console.error("Failed to load tasks:",he),q.error("Failed to load tasks.")}finally{x(!1)}};h.useEffect(()=>{!t&&e&&(R(),Q())},[t,e]);const Y=()=>{o(null),Z({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},oe=(he=null,ae=!1)=>{o(he),d(ae),he?Z({id:he.id,subject:he.title||"",description:he.description||"",priority:he.priority||"Normal",status:he.status||"Not started",dueDate:fGe(he.dueDate),assignedTo:he.assignedToId?String(he.assignedToId):"",notes:he.notes||"",relatedType1Text:he.relatedType1Text||"",relatedTo1Text:he.relatedTo1Text||"",relatedType2Text:he.relatedType2Text||"",relatedTo2Text:he.relatedTo2Text||"",relatedType1:he.relatedType1||"",relatedTo1:he.relatedTo1||"",relatedType2:he.relatedType2||"",relatedTo2:he.relatedTo2||""}):Y(),i(!0)},re=()=>{i(!1),o(null),d(!1),Y()},ee=async he=>{const ae=hGe(he);try{l&&!c?(await ce.put(`/tasks/${l.id}`,ae),q.success("Task updated successfully.")):(await ce.post("/tasks/create",ae),q.success("Task created successfully.")),i(!1),await Q()}catch(Ae){console.error("Failed to save task:",Ae);const ge=Ae.response?.data?.detail||"Failed to save task.";q.error(ge)}},H=he=>{he&&I({title:"Delete Task",message:n.jsxs(n.Fragment,{children:["Are you sure you want to delete ",n.jsx("span",{className:"font-semibold",children:he.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:he.id}})},ye=async()=>{if(!A?.action){I(null);return}const{action:he}=A;F(!0);try{he.type==="delete"&&(await ce.delete(`/tasks/${he.targetId}`),q.success("Task deleted successfully."),await Q())}catch(ae){console.error("Task action failed:",ae),q.error("Failed to delete task.")}finally{F(!1),I(null)}},te=()=>{z||I(null)},ve=h.useMemo(()=>{const he=y.trim().toLowerCase();return[...u].sort((Ae,ge)=>{const Be=Ae.createdAt?new Date(Ae.createdAt):0;return(ge.createdAt?new Date(ge.createdAt):0)-Be}).filter(Ae=>{const ge=he===""||Ae.title?.toLowerCase().includes(he)||Ae.description?.toLowerCase().includes(he)||Ae.assignedToName?.toLowerCase().includes(he)||Ae.createdBy?.toLowerCase().includes(he),Be=v==="Filter by Status"||Ae.status===v,qe=N==="Filter by Priority"||Ae.priority===N;return ge&&Be&&qe})},[u,y,v,N]);h.useEffect(()=>{E(1)},[y,v,N,a]),h.useEffect(()=>{if(a==="list"){const he=ve.length===0?1:Math.ceil(ve.length/Ng);_>he&&E(he)}},[ve.length,_,a]);const je=h.useMemo(()=>{if(a==="board")return ve;const he=(_-1)*Ng;return ve.slice(he,he+Ng)},[ve,_,a]),Oe=h.useMemo(()=>{const he=new Date;return[{title:"To Do",value:u.filter(ae=>ae.status==="Not started").length,icon:zs,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:u.filter(ae=>ae.status==="In progress").length,icon:Ri,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:u.filter(ae=>ae.status==="Completed").length,icon:ba,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:u.filter(ae=>ae.dueDate&&new Date(ae.dueDate)<he&&ae.status!=="Completed").length,icon:Rf,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:u.filter(ae=>ae.priority==="High").length,icon:Ro,color:"text-orange-600",bgColor:"bg-orange-100"}]},[u]),$e=he=>he.dueDate&&new Date(he.dueDate)<new Date&&he.status!=="Completed",pe=he=>{switch(he.status){case"To Do":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In Progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Review":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},Me=he=>{switch(he){case"To Do":return"bg-blue-100 text-blue-700";case"In Progress":return"bg-purple-100 text-purple-700";case"Review":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},Le=he=>{switch(he){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&n.jsx(Rt,{message:"Loading tasks..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(Ri,{className:"text-blue-600"})," Tasks Board"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:()=>oe(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[n.jsx(dn,{})," Create Task"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Oe.map(he=>n.jsx(xGe,{...he},he.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search tasks",value:y,onChange:he=>w(he.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{value:v,onChange:he=>C(he.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Status"}),jB.map(he=>n.jsx("option",{children:he},he))]}),n.jsxs("select",{value:N,onChange:he=>S(he.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Priority"}),n.jsx("option",{children:"High"}),n.jsx("option",{children:"Normal"}),n.jsx("option",{children:"Low"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${a==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),n.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${a==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&ve.length===0&&n.jsx("p",{className:"text-center text-gray-500 mt-10 p-4 bg-white shadow rounded-lg",children:"No tasks found matching current filters."}),!p&&!t&&ve.length>0&&a==="board"&&n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:jB.map(he=>{const ae=je.filter(Ae=>Ae.status===he);return n.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),n.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:he}),n.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:ae.length})]}),n.jsx("div",{className:`space-y-3 ${ae.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:ae.length>0?ae.map(Ae=>n.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${pe(Ae)}`,onClick:()=>oe(Ae,!0),children:[n.jsxs("div",{className:"text-left flex-1",children:[n.jsx("p",{className:"font-medium text-gray-800 text-sm",children:Ae.title}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",Ae.priority]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",Ae.assignedToName]}),n.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",n.jsx("span",{className:$e(Ae)?"text-red-600":"text-gray-600",children:Ae.dateAssigned?CB(Ae.dateAssigned):""})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[n.jsx("button",{type:"button",onClick:ge=>{ge.stopPropagation(),oe(Ae)},className:"text-blue-500 hover:text-blue-700",children:n.jsx(oa,{})}),n.jsx("button",{type:"button",onClick:ge=>{ge.stopPropagation(),H(Ae)},className:"text-red-500 hover:text-red-700",children:n.jsx(zt,{})})]})]},Ae.id)):n.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No tasks"})})]},he)})}),!p&&!t&&ve.length>0&&a==="list"&&n.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Actions"})]})}),n.jsx("tbody",{children:je.map(he=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",onClick:()=>{console.log("Opening task in view mode:",he),oe(he,!0)},children:[n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",children:he.title}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Me(he.status||"To Do")}`,children:he.status||"To Do"})}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Le(he.priority||"Low")}`,children:he.priority||"Low"})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:he.assignedToName||"Unassigned"}),n.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${$e(he)?"text-red-600 font-medium":""}`,children:he.dateAssigned?CB(he.dateAssigned):""}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-3",onClick:ae=>ae.stopPropagation(),children:[n.jsxs("button",{type:"button",onClick:()=>oe(he),className:"text-blue-500 hover:text-blue-700 flex items-center gap-1",children:[n.jsx(oa,{})," Edit"]}),n.jsxs("button",{type:"button",onClick:()=>H(he),className:"text-red-500 hover:text-red-700 flex items-center gap-1",children:[n.jsx(zt,{})," Delete"]})]})})]},he.id))})]})})}),!p&&!t&&a==="list"&&n.jsx(en,{className:"mt-6",totalItems:ve.length,pageSize:Ng,currentPage:ve.length===0?0:_,onPrev:()=>E(he=>Math.max(he-1,1)),onNext:()=>E(he=>Math.min(he+1,Math.max(1,Math.ceil(ve.length/Ng)||1))),label:"tasks"}),n.jsx(a0,{isOpen:r,onClose:re,onSave:ee,onEdit:()=>d(!1),setFormData:Z,formData:W,isEditing:!c&&!!l,viewMode:c,users:T,currentUser:e,onDelete:H}),A&&n.jsx(yGe,{open:!0,title:A.title,message:A.message,confirmLabel:A.confirmLabel,cancelLabel:A.cancelLabel,variant:A.variant,onConfirm:ye,onCancel:te,loading:z})]})}function xGe({icon:e,title:t,value:a,color:s,bgColor:r,onClick:i}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function yGe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r,variant:i,loading:l,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),n.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}function bGe(){h.useEffect(()=>{document.title="Campaign | Sari-Sari CRM"},[]);const[e,t]=h.useState(!1),[a,s]=h.useState(!1),[r,i]=h.useState(null),[l,o]=h.useState(""),[c,d]=h.useState("All Statuses"),[u,f]=h.useState({show:!1,action:null,campaign:null}),[p,x]=h.useState([{id:1,name:"Christmas Promo 2025",subject:" Holiday Discounts Await You!",content:"Spread holiday cheer with exclusive deals this Christmas season!",status:"Scheduled",recipients:1200,scheduleDate:"2025-12-15T10:00",created:"2025-10-20",createdBy:"Marketing Team"},{id:2,name:"New Year Kickoff",subject:"Start 2026 with Big Savings!",content:"Kick off your year right with amazing offers from us!",status:"Draft",recipients:"",scheduleDate:"",created:"2025-10-25",createdBy:"Marketing Team"}]),[y,w]=h.useState({id:null,name:"",subject:"",content:"",status:"Draft",recipients:"",scheduleDate:""}),v=p.filter(F=>{const D=c==="All Statuses"||F.status===c,M=F.name.toLowerCase().includes(l.toLowerCase())||F.subject.toLowerCase().includes(l.toLowerCase());return D&&M}),C=()=>{s(!1),w({id:null,name:"",subject:"",content:"",status:"Draft",recipients:"",scheduleDate:""}),t(!0)},N=(F,D)=>{D.stopPropagation(),s(!0),w(F),t(!0)},S=(F,D)=>{D.stopPropagation(),f({show:!0,action:"delete",campaign:F})},T=F=>{F.preventDefault(),f({show:!0,action:a?"edit":"add",campaign:{...y}})},k=()=>{if(u.action==="add"){const F={...u.campaign,id:Date.now(),created:new Date().toLocaleDateString(),createdBy:"Marketing Team"};x(D=>[...D,F]),t(!1)}else u.action==="edit"?(x(F=>F.map(D=>D.id===u.campaign.id?{...u.campaign}:D)),t(!1)):u.action==="delete"&&x(F=>F.filter(D=>D.id!==u.campaign.id));f({show:!1,action:null,campaign:null})},_=()=>{f({show:!1,action:null,campaign:null})},E=F=>i(F),A=()=>i(null),I=F=>{const{name:D,value:M}=F.target;w(W=>({...W,[D]:M}))},z=F=>{F.target.id==="modalBackdrop"&&t(!1)};return r?n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[n.jsxs("button",{onClick:A,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-6 cursor-pointer",children:[n.jsx(Du,{className:"mr-1 w-5 h-5"})," Back"]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:r.name}),n.jsx("span",{className:`text-xs sm:text-sm px-2 py-0.5 rounded ${r.status==="Scheduled"?"bg-yellow-100 text-yellow-700":r.status==="Sent"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:r.status})]})}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm",children:[n.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Campaign Information"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm text-gray-700",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Subject:"})," ",n.jsx("br",{}),r.subject]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Created By:"})," ",n.jsx("br",{}),r.createdBy]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Created On:"})," ",n.jsx("br",{}),r.created]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Scheduled Date:"})," ",n.jsx("br",{}),r.scheduleDate?new Date(r.scheduleDate).toLocaleString():""]}),n.jsxs("p",{className:"sm:col-span-2",children:[n.jsx("span",{className:"font-semibold",children:"Email Content:"})," ",n.jsx("br",{}),r.content]}),r.status==="Scheduled"&&n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Recipients:"})," ",n.jsx("br",{}),r.recipients]})]})]})]}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Zn,{className:"mr-2 text-blue-600"})," Email Campaigns"]}),n.jsx("button",{onClick:C,className:"flex items-center bg-black text-white px-4 py-2 rounded-md hover:bg-gray-800 transition text-sm sm:text-base shadow-sm",children:" New Campaign"})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search by campaign name or email subject...",value:l,onChange:F=>o(F.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:c,onChange:F=>d(F.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"All Statuses"}),n.jsx("option",{children:"Draft"}),n.jsx("option",{children:"Scheduled"}),n.jsx("option",{children:"Sent"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-[700px] w-full border border-gray-200 rounded-lg bg-white shadow-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-sm text-gray-600",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Campaign Name"}),n.jsx("th",{className:"py-3 px-4",children:"Email Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Recipients"}),n.jsx("th",{className:"py-3 px-4",children:"Scheduled Date"}),n.jsx("th",{className:"py-3 px-4 text-center",children:"Actions"})]})}),n.jsx("tbody",{className:"text-sm text-gray-700",children:v.map((F,D)=>n.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer transition",onClick:()=>E(F),children:[n.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:F.name}),n.jsx("td",{className:"py-3 px-4",children:F.subject}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${F.status==="Scheduled"?"bg-yellow-100 text-yellow-700":F.status==="Sent"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:F.status})}),n.jsx("td",{className:"py-3 px-4",children:F.recipients?`${F.recipients} emails`:""}),n.jsx("td",{className:"py-3 px-4",children:F.scheduleDate?new Date(F.scheduleDate).toLocaleString():""}),n.jsx("td",{className:"py-3 px-4 text-center",onClick:M=>M.stopPropagation(),children:n.jsxs("div",{className:"flex justify-center gap-3",children:[n.jsx("button",{onClick:M=>N(F,M),className:"text-blue-500 hover:text-blue-700",children:n.jsx(ia,{})}),n.jsx("button",{onClick:M=>S(F,M),className:"text-red-500 hover:text-red-700",children:n.jsx(zt,{})})]})})]},D))})]})}),e&&n.jsx("div",{id:"modalBackdrop",onClick:z,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl shadow-lg p-5 sm:p-6 relative border border-gray-200 my-6 max-h-[90vh] overflow-y-auto",onClick:F=>F.stopPropagation(),children:[n.jsx("button",{onClick:()=>t(!1),className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:n.jsx(Vt,{size:20})}),n.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:a?"Edit Campaign":"Add New Campaign"}),n.jsxs("form",{onSubmit:T,className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Campaign Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"name",value:y.name,onChange:I,placeholder:"e.g. Summer Sale Blast",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Email Subject ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"subject",value:y.subject,onChange:I,placeholder:"e.g. Big discounts await you!",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Campaign Status ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{name:"status",value:y.status,onChange:I,required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",children:[n.jsx("option",{value:"Draft",children:"Draft"}),n.jsx("option",{value:"Scheduled",children:"Scheduled"}),n.jsx("option",{value:"Sent",children:"Sent"})]})]}),y.status==="Scheduled"&&n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:col-span-2",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Scheduled Date ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"datetime-local",name:"scheduleDate",value:y.scheduleDate,onChange:I,required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Recipient Count ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"number",name:"recipients",value:y.recipients,onChange:I,placeholder:"e.g. 500",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),n.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Email Content ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("textarea",{name:"content",rows:4,value:y.content,onChange:I,placeholder:"Write your email message here...",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex justify-end gap-2 sm:col-span-2 pt-3 border-t border-gray-100 mt-2",children:[n.jsx("button",{type:"button",onClick:()=>t(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:"Save Campaign"})]})]})]})}),u.show&&n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 relative border border-gray-200",children:[n.jsx("button",{onClick:_,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:n.jsx(Vt,{size:20})}),n.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:u.action==="delete"?"Confirm Delete":u.action==="edit"?"Confirm Edit":"Confirm Add"}),n.jsx("p",{className:"text-center text-gray-600 mb-6",children:u.action==="delete"?n.jsxs(n.Fragment,{children:["Are you sure you want to delete the campaign"," ",n.jsx("span",{className:"font-semibold",children:u.campaign.name}),"?"]}):u.action==="edit"?n.jsxs(n.Fragment,{children:["Save changes to"," ",n.jsx("span",{className:"font-semibold",children:u.campaign.name}),"?"]}):n.jsxs(n.Fragment,{children:["Add new campaign"," ",n.jsx("span",{className:"font-semibold",children:u.campaign.name}),"?"]})}),n.jsxs("div",{className:"flex justify-center gap-4",children:[n.jsx("button",{onClick:_,className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),n.jsx("button",{onClick:k,className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:"Confirm"})]})]})})]})}const vGe=[{id:1,name:"Welcome E-mail",category:"Welcome",subject:"Welcome to {company}!",body:`Hi {name}, Welcome to {company}! We're excited to have you on board.

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed vel quam vitae erat venenatis feugiat. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.

Best regards, The Team`,createdBy:"Angel Angelo",date:"12/10/23"},{id:2,name:"Product Demo Follow-up",category:"Follow-up",subject:"Thanks for checking out our demo",body:`Hi {name}, Thank you for taking the time to view our product demo.
Do you have any questions? Let's schedule a call to discuss how we can help {company}.

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed vel quam vitae erat venenatis feugiat. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.

Best, Sales Team`,createdBy:"Angel Angelo",date:"12/10/23"}],SB={Welcome:"bg-orange-100 text-orange-700","Follow-up":"bg-blue-100 text-blue-700",Newsletter:"bg-green-100 text-green-700",Promotional:"bg-purple-100 text-purple-700",default:"bg-gray-100 text-gray-800"};function wGe(){h.useEffect(()=>{document.title="Templates | Sari-Sari CRM"},[]);const[e,t]=h.useState(vGe),[a,s]=h.useState(!1),[r,i]=h.useState(null),[l,o]=h.useState(null),[c,d]=h.useState(""),[u,f]=h.useState("All Categories"),[p,x]=h.useState({name:"",category:"",subject:"",body:""}),[y,w]=h.useState({show:!1,action:null,template:null}),v=()=>{o(null),i(null),s(!1)},C=D=>{x({...p,[D.target.name]:D.target.value})},N=()=>{w({show:!0,action:"add",template:{...p}})},S=D=>{i(D),x({name:D.name,category:D.category,subject:D.subject,body:D.body})},T=()=>{w({show:!0,action:"edit",template:{...p,id:r.id}})},k=D=>{w({show:!0,action:"delete",template:D})},_=D=>{Px.success(`Template "${D.name}" selected for use!`),w({show:!1,action:null,template:null})},E=()=>{const D=y.template;if(y.action==="add"){const M={...D,id:e.length+1,createdBy:"You",date:new Date().toLocaleDateString()};t(W=>[M,...W]),s(!1),x({name:"",category:"",subject:"",body:""})}else y.action==="edit"?(t(M=>M.map(W=>W.id===D.id?{...D}:W).sort((W,Z)=>new Date(Z.date).getTime()-new Date(W.date).getTime())),i(null),x({name:"",category:"",subject:"",body:""}),o(null)):y.action==="delete"&&(t(M=>M.filter(W=>W.id!==D.id)),o(null));w({show:!1,action:null,template:null})},A=()=>{w({show:!1,action:null,template:null})},I=D=>o(D),z=e.filter(D=>D.name.toLowerCase().includes(c.toLowerCase())&&(u==="All Categories"||D.category===u)),F=(D,M=!1)=>n.jsxs("div",{className:"flex flex-col justify-between h-full",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:D.name}),n.jsx("span",{className:`text-xs px-3 py-1 rounded-md ${SB[D.category]||SB.default}`,children:D.category})]}),n.jsx("p",{className:"text-gray-600 mb-2 text-sm",children:D.subject}),n.jsx("div",{className:`text-gray-800 text-sm p-2 rounded-md ${M?"bg-gray-50 max-h-40 overflow-y-auto":"truncate"} whitespace-pre-line`,style:M?{}:{display:"-webkit-box",WebkitLineClamp:7,WebkitBoxOrient:"vertical",overflow:"hidden"},children:D.body})]}),n.jsxs("div",{className:"flex justify-between items-center mt-4",children:[!M&&n.jsxs("button",{onClick:W=>{W.stopPropagation(),_(D)},className:"flex items-center gap-1 bg-black text-white px-3 py-1 rounded-md text-sm hover:bg-gray-900 transition",children:[n.jsx(xn,{})," Use Template"]}),M&&n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:W=>{W.stopPropagation(),S(D)},className:"flex items-center gap-1 bg-black text-white px-3 py-1 rounded-md text-sm hover:bg-gray-900 transition",children:[n.jsx(oa,{})," Edit"]}),n.jsxs("button",{onClick:W=>{W.stopPropagation(),k(D)},className:"flex items-center gap-1 bg-red-500 text-white px-3 py-1 rounded-md text-sm hover:bg-red-600 transition",children:[n.jsx(zt,{})," Delete"]})]}),n.jsxs("p",{className:"text-gray-400 text-xs text-right",children:["Created by: ",D.createdBy," | ",D.date]})]})]});return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter min-h-screen",children:[n.jsx(Lx,{position:"top-center",reverseOrder:!1}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(xn,{className:"mr-2 text-black"})," Templates"]}),n.jsx("button",{onClick:()=>{s(!0),i(null),x({name:"",category:"",subject:"",body:""})},className:"flex items-center bg-black text-white px-4 py-2 rounded-md hover:bg-gray-800 transition text-sm sm:text-base shadow-sm",children:" New Template"})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search by template name...",value:c,onChange:D=>d(D.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:u,onChange:D=>f(D.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"All Categories"}),n.jsx("option",{children:"Welcome"}),n.jsx("option",{children:"Follow-up"}),n.jsx("option",{children:"Newsletter"}),n.jsx("option",{children:"Promotional"})]})})]}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:z.map(D=>n.jsxs("div",{onClick:()=>I(D),className:"bg-white rounded-2xl shadow-lg border border-gray-100 hover:shadow-xl cursor-pointer flex flex-col justify-between h-80 transition",children:[n.jsx("div",{className:"h-2 w-full rounded-t-2xl bg-black"}),n.jsx("div",{className:"p-4 flex-grow",children:F(D)})]},D.id))}),(a||r)&&n.jsx("div",{onClick:v,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl shadow-lg p-5 sm:p-6 relative border border-gray-200 my-6 max-h-[90vh] overflow-y-auto",onClick:D=>D.stopPropagation(),children:[n.jsx("button",{onClick:v,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:n.jsx(Vt,{size:20})}),n.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:r?"Edit Template":"Create New Template"}),n.jsxs("form",{onSubmit:D=>{D.preventDefault(),r?T():N()},className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Template Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"name",value:p.name,onChange:C,placeholder:"e.g. Welcome Email",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Category ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{name:"category",value:p.category,onChange:C,required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none",children:[n.jsx("option",{value:"",children:"Select Category"}),n.jsx("option",{value:"Welcome",children:"Welcome"}),n.jsx("option",{value:"Follow-up",children:"Follow-up"}),n.jsx("option",{value:"Newsletter",children:"Newsletter"}),n.jsx("option",{value:"Promotional",children:"Promotional"})]})]}),n.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Subject Line ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"subject",value:p.subject,onChange:C,placeholder:"e.g. Welcome to our service!",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none"})]}),n.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Email Body ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("textarea",{name:"body",rows:4,value:p.body,onChange:C,placeholder:"Write your email message here...",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none resize-none"})]}),n.jsxs("div",{className:"flex justify-end gap-2 sm:col-span-2 pt-3 border-t border-gray-100 mt-2",children:[n.jsx("button",{type:"button",onClick:v,className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:r?"Update Template":"Create Template"})]})]})]})}),l&&!r&&n.jsx("div",{onClick:v,className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"rounded-2xl shadow-lg cursor-default h-80 w-full max-w-md overflow-hidden flex flex-col",onClick:D=>D.stopPropagation(),children:[n.jsx("div",{className:"h-2 w-full rounded-t-2xl bg-black"}),n.jsx("div",{className:"p-4 flex-grow overflow-y-auto bg-gray-50",children:F(l,!0)})]})}),y.show&&n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 relative border border-gray-200",children:[n.jsx("button",{onClick:A,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:n.jsx(Vt,{size:20})}),n.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:y.action==="delete"?"Confirm Delete":y.action==="edit"?"Confirm Update":y.action==="add"?"Confirm Add":"Confirm Use"}),n.jsx("p",{className:"text-center text-gray-600 mb-6",children:y.action==="delete"?n.jsxs(n.Fragment,{children:["Are you sure you want to delete the template"," ",n.jsx("span",{className:"font-semibold",children:y.template.name}),"?"]}):y.action==="edit"?n.jsxs(n.Fragment,{children:["Save changes to"," ",n.jsx("span",{className:"font-semibold",children:y.template.name}),"?"]}):y.action==="add"?n.jsxs(n.Fragment,{children:["Add new template"," ",n.jsx("span",{className:"font-semibold",children:y.template.name}),"?"]}):n.jsxs(n.Fragment,{children:["Use template"," ",n.jsx("span",{className:"font-semibold",children:y.template.name}),"?"]})}),n.jsxs("div",{className:"flex justify-center gap-4",children:[n.jsx("button",{onClick:A,className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),n.jsx("button",{onClick:E,className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:"Confirm"})]})]})})]})}function NGe({toggleSidebar:e}){const[t,a]=h.useState(!1),s=h.useRef(null),r=Yt(),i=yt(),{logout:l}=Bs(),{user:o,fetchUser:c}=Kt(),d={"/group-manager/dashboard":"Dashboard","/group-manager/accounts":"Accounts","/group-manager/contacts":"Contacts","/reports":"Reports","/leads":"Leads","/group-manager/Audit":"Audit","/group-manager/targets":"Targets","/group-manager/leads":"Leads","/group-manager/quotes":"Quotes","/group-manager/users":"Users","/group-manager/deals":"Deals"};h.useEffect(()=>{c()},[]),h.useEffect(()=>{const f=()=>{c()};return window.addEventListener("userProfileUpdated",f),()=>{window.removeEventListener("userProfileUpdated",f)}},[c]);const u=d[r.pathname]||"Group Manager Panel";return h.useEffect(()=>{function f(p){s.current&&!s.current.contains(p.target)&&a(!1)}return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]),n.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})})}),n.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:u})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("button",{className:"relative text-gray-600 hover:text-gray-800",children:[n.jsx(Zp,{className:"text-xl"}),n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs w-4 h-4 flex items-center justify-center rounded-full",children:"3"})]}),n.jsxs("div",{className:"relative",ref:s,children:[n.jsxs("button",{onClick:()=>a(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[n.jsx("img",{src:o?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 aspect-square object-cover rounded-full"}),n.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[o?.first_name," ",o?.last_name]})]}),t&&n.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4",children:[n.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[n.jsx("img",{src:o?.profile_picture||"https://via.placeholder.com/80",alt:"Profile",className:"w-16 h-16 rounded-full object-cover"}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[o?.first_name," ",o?.middle_name," ",o?.last_name]}),n.jsx("p",{className:"text-[11px] text-gray-600 font-light w-full truncate",children:"Group Manager"})]})]}),n.jsxs("div",{className:"mt-6 space-y-1 px-4 text-left",children:[n.jsx("button",{onClick:()=>{i("/group-manager/users"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Invite Your Team"}),n.jsx("button",{onClick:()=>{i("/group-manager/manage-account"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Manage Your Account"}),n.jsx("div",{className:"border-t border-gray-200 my-2"}),n.jsx("button",{onClick:l,className:"block w-full text-sm text-red-600 hover:text-red-700 hover:bg-gray-50 py-2 rounded text-left",children:"Logout"})]})]})]})]})]})}function jGe(){const[e,t]=h.useState(!0),[a,s]=h.useState(!1),[r,i]=h.useState(!1),[l,o]=h.useState(!1),c=Yt(),{user:d}=Kt();h.useEffect(()=>{d&&console.log("Fetched user:",d)},[d]),h.useEffect(()=>{console.log("Simulating user fetch... (no backend)")},[]),h.useEffect(()=>{document.title="Panel | Sari-Sari CRM"},[]);const u="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",f="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition",x=["/group-manager/accounts","/group-manager/contacts","/group-manager/leads","/group-manager/deals","/group-manager/quotes","/group-manager/targets","/group-manager/meetings"].includes(c.pathname);return n.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[n.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${l?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[n.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[n.jsxs("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:[" Sari-Sari.CRM"," ",n.jsx("span",{className:"text-[12px] text-gray-700 font-medium align-bottom",children:"v2"})]}),d&&d.company&&n.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:d.company.company_name})]}),n.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[n.jsxs(Dt,{to:"/group-manager/dashboard",className:({isActive:y})=>y?u:f,children:[n.jsx(Jp,{className:"text-lg"}),n.jsx("span",{children:"Dashboard"})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>t(!e),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-lg"}),"Sales"]}),n.jsx(jt,{className:`transition-transform ${e||x?"rotate-180":""}`})]}),(e||x)&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(Dt,{to:"/group-manager/accounts",className:({isActive:y})=>y?u:f,children:[n.jsx(On,{})," Accounts"]}),n.jsxs(Dt,{to:"/group-manager/contacts",className:({isActive:y})=>y?u:f,children:[n.jsx(Jt,{})," Contacts"]}),n.jsxs(Dt,{to:"/group-manager/leads",className:({isActive:y})=>y?u:f,children:[n.jsx(Wn,{})," Leads"]}),n.jsxs(Dt,{to:"/group-manager/deals",className:({isActive:y})=>y?u:f,children:[n.jsx(Qt,{})," Deals"]}),n.jsxs(Dt,{to:"/group-manager/quotes",className:({isActive:y})=>y?u:f,children:[n.jsx(xn,{})," Quotes"]}),n.jsxs(Dt,{to:"/group-manager/targets",className:({isActive:y})=>y?u:f,children:[n.jsx(tr,{})," Targets"]})]})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!a),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(ws,{className:"text-lg"}),"Activity"]}),n.jsx(jt,{className:`transition-transform ${a?"rotate-180":""}`})]}),a&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(Dt,{to:"/group-manager/tasks",className:({isActive:y})=>y?u:f,children:[n.jsx(Gt,{})," Tasks"]}),n.jsxs(Dt,{to:"/group-manager/meetings",className:({isActive:y})=>y?u:f,children:[n.jsx(Ct,{})," Meetings"]}),n.jsxs(Dt,{to:"/group-manager/calls",className:({isActive:y})=>y?u:f,children:[n.jsx(Ls,{})," Calls"]}),n.jsxs(Dt,{to:"/group-manager/audit",className:({isActive:y})=>y?u:f,children:[n.jsx(ws,{})," Audit"]})]})]}),n.jsx("div",{children:n.jsx(Dt,{to:"/group-manager/territory",className:({isActive:y})=>y?u:f,children:n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(zo,{className:"text-lg"}),"Territory"]})})}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!r),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Uk,{className:"text-lg"}),"User Management"]}),n.jsx(jt,{className:`transition-transform ${r?"rotate-180":""}`})]}),r&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(Dt,{to:"/group-manager/users",className:({isActive:y})=>y?u:f,children:[n.jsx(On,{})," Users"]}),n.jsxs(Dt,{to:"/group-manager/manage-account",className:({isActive:y})=>y?u:f,children:[n.jsx(Jt,{})," Manage Account"]})]})]})]}),n.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),l&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>o(!1)}),n.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[n.jsx(NGe,{toggleSidebar:()=>o(!l)}),n.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:n.jsx(Gp,{})})]})]})}const CGe=e=>n.jsx(Bt,{...e}),SGe=e=>n.jsx(zf,{...e}),_Ge=e=>n.jsx(Bk,{...e}),PJ=e=>n.jsx(zs,{...e}),AGe=e=>n.jsx(Xp,{...e}),EGe=e=>n.jsx(Dw,{...e}),TGe=e=>n.jsx(Ct,{...e}),kGe=e=>n.jsx(At,{...e}),LGe=e=>n.jsx(Mw,{...e}),DJ=e=>n.jsx(Ow,{...e}),OJ=e=>n.jsx(On,{...e}),MJ=e=>n.jsx(Jt,{...e}),PGe=e=>n.jsx(Wn,{...e}),DGe=e=>n.jsx(Qt,{...e}),OGe=e=>n.jsx(xn,{...e}),MGe=e=>n.jsx(tr,{...e}),IGe=e=>n.jsx(ba,{...e}),$Ge=e=>n.jsx(Ct,{...e}),RGe=e=>n.jsx(Ls,{...e}),zGe=e=>n.jsx(zo,{...e}),FGe=e=>n.jsx(ws,{...e}),IJ=e=>`P ${new Intl.NumberFormat("en-PH",{minimumFractionDigits:0}).format(e)}`,UGe=e=>{switch(e){case"Negotiation":return{text:"text-purple-700",bg:"bg-purple-100"};case"Proposal":return{text:"text-red-700",bg:"bg-red-100"};case"Qualification":return{text:"text-yellow-700",bg:"bg-yellow-100"};case"Prospecting":return{text:"text-blue-700",bg:"bg-blue-100"};case"Closed Won":return{text:"text-green-700",bg:"bg-green-100"};case"Closed Lost":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},BGe=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},HGe=e=>{switch(e){case"call":return{Icon:kGe,color:"text-red-500",bgColor:"bg-red-100"};case"qualification":return{Icon:LGe,color:"text-green-600",bgColor:"bg-green-100"};default:return{Icon:TGe,color:"text-blue-500",bgColor:"bg-blue-100"}}},GGe=e=>{switch(e.toUpperCase()){case"HIGH":return{text:"text-red-700",bg:"bg-red-100"};case"LOW":return{text:"text-blue-700",bg:"bg-blue-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},WGe=({searchQuery:e,onSearchChange:t,searchResults:a,onSearchResultClick:s})=>{const r=yt(),[i,l]=h.useState(!1),o=h.useRef(null),c=[{icon:OJ,label:"Account"},{icon:MJ,label:"Contact"},{icon:PGe,label:"Leads"},{icon:DGe,label:"Deals"},{icon:OGe,label:"Quotes"},{icon:MGe,label:"Target"},{icon:IGe,label:"Task"},{icon:$Ge,label:"Meeting"},{icon:RGe,label:"Call"},{icon:FGe,label:"Audit"},{icon:zGe,label:"Territory"}];h.useEffect(()=>{const f=p=>{o.current&&!o.current.contains(p.target)&&l(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const d=f=>{t(f.target.value),l(f.target.value.trim().length>0)},u=f=>{s&&s(f),l(!1)};return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 sm:p-4 flex flex-col items-start space-y-4 w-full",children:[n.jsxs("div",{className:"w-full flex justify-center relative",ref:o,children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg lg:mt-3 px-4 py-2 w-full max-w-md md:max-w-lg lg:max-w-2xl focus-within:ring-2 focus-within:ring-blue-500 transition duration-150",children:[n.jsx(CGe,{size:20,className:"text-gray-400 mr-3 flex-shrink-0"}),n.jsx("input",{type:"text",placeholder:"Search Leads, Deals, or Accounts...",className:"focus:outline-none text-base w-full",value:e,onChange:d,onFocus:()=>e.trim().length>0&&l(!0)})]}),i&&Array.isArray(a)&&a.length>0&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:a.map((f,p)=>n.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition duration-150",onClick:()=>u(f),children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:f.name}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:f.type}),f.details&&n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:f.details})]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${f.type==="Lead"?"bg-blue-100 text-blue-600":f.type==="Deal"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:f.type})]})},p))}),i&&e.trim().length>0&&(!Array.isArray(a)||a.length===0)&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 p-4 text-center text-sm text-gray-500",children:"No results found"})]}),n.jsx("div",{className:"w-full overflow-x-auto lg:overflow-x-hidden scroll-smooth flex justify-center",children:n.jsx("div",{className:"flex flex-nowrap space-x-3 lg:space-x-4 xl:space-x-3 px-2 sm:px-0",children:c.map((f,p)=>n.jsxs("div",{className:"relative flex-shrink-0 group",children:[n.jsx("button",{className:"p-3 text-gray-500 hover:text-gray-900 transition duration-150 rounded-full hover:bg-gray-100 focus:outline-none cursor-pointer","aria-label":f.label,title:f.label,onClick:()=>{switch(f.label){case"Account":r("/group-manager/accounts");break;case"Contact":r("/group-manager/contacts");break;case"Leads":r("/group-manager/leads");break;case"Deals":r("/group-manager/deals");break;case"Quotes":r("/group-manager/quotes");break;case"Target":r("/group-manager/targets");break;case"Task":r("/group-manager/tasks");break;case"Meeting":r("/group-manager/meetings");break;case"Call":r("/group-manager/calls");break;case"Audit":r("/group-manager/audit");break;case"Territory":r("/group-manager/territory");break;default:console.log(`Clicked ${f.label}`)}},children:n.jsx(f.icon,{size:24,className:"lg:scale-95"})}),n.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-1.5 bg-gray-900 text-white text-xs font-semibold rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-75 ease-in-out z-50 shadow-lg",children:[f.label,n.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]},p))})})]})},VGe=({action:e,description:t,entity_type:a,entity_name:s,timestamp:r})=>{const i=yt(),l=u=>{if(!u)return"Unknown";const f=new Date(u),x=new Date-f,y=Math.floor(x/6e4),w=Math.floor(x/36e5),v=Math.floor(x/864e5);return y<1?"Just now":y<60?`${y} min ago`:w<24?`${w} hour${w>1?"s":""} ago`:v<7?`${v} day${v>1?"s":""} ago`:f.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},o=e||t||"Action",c=s||a||"System",d=l(r);return n.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i("/group-manager/audit"),children:[n.jsxs("p",{className:"text-sm text-gray-800 flex-grow font-medium",children:[o," ",n.jsxs("span",{className:"text-gray-500 italic text-xs",children:["(",c,")"]})]}),n.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-4",children:d})]})},qGe=({logs:e,loading:t})=>{const a=yt();return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Recent Logs"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/group-manager/audit"),children:[n.jsx("span",{children:"See All"}),n.jsx(DJ,{size:14,className:"transform -rotate-45"})]})]}),e&&e.length>0?n.jsx("ul",{className:"space-y-1",children:e.slice(0,3).map((s,r)=>n.jsx(VGe,{...s},r))}):n.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No recent logs"})]})},YGe=({icon:e,title:t,value:a,color:s,bgColor:r,loading:i,onClick:l})=>n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l||(()=>console.log(`Clicked metric card: ${t}`)),children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:20})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a||0})]})]}),QGe=({revenueData:e,loading:t})=>{const a=yt(),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=h.useMemo(()=>{if(console.log("=== RevenueChart calculateRevenueData ==="),console.log("revenueData:",e),console.log("revenueData length:",e?.length),!e||e.length===0){console.log("No revenue data, returning empty chart");const v=new Date;v.getFullYear();const C=v.getMonth(),N=[],S=[];for(let T=0;T<=C;T++)N.push(s[T]),S.push(0);return{labels:N,revenues:S,maxRevenue:0}}const o={};let c=0,d=0;console.log("Processing deals:",e.length),e.forEach((v,C)=>{const N=v.close_date||v.closeDate||null,S=N&&N!==null&&N!=="",T=v.stage||"",k=T.toUpperCase()==="CLOSED_WON"||T==="CLOSED_WON";let _=v.amount;_&&typeof _=="object"&&_.toString?_=parseFloat(_.toString()):_=parseFloat(_)||0;const E=_>0;if(k&&(d++,console.log(`Deal ${C+1} (CLOSED_WON):`,{id:v.id,name:v.name,stage:T,close_date:N,close_date_type:typeof N,amount:_,amount_type:typeof v.amount,hasCloseDate:S,hasAmount:E,willBeAdded:S&&E,allFields:Object.keys(v)})),S&&k&&E)try{let A=new Date(N);if(isNaN(A.getTime())){const I=String(N).split("T")[0];A=new Date(I+"T00:00:00")}if(isNaN(A.getTime()))console.warn(` Invalid date for deal ${v.id}:`,N,"Type:",typeof N);else{const I=A.getFullYear(),z=A.getMonth()+1,F=`${I}-${String(z).padStart(2,"0")}`;o[F]||(o[F]=0),o[F]+=_,c++,console.log(` Added deal ${v.id} to month ${F}: ${_}, total: ${o[F]}`),console.log(`  - Close date: ${N} -> Parsed: ${A.toISOString()} -> Month: ${F} (Year: ${I}, Month: ${z})`)}}catch(A){console.error("Error parsing deal date:",N,A)}else k&&console.warn(` Deal ${v.id} is CLOSED_WON but missing data:`,{hasCloseDate:S,hasAmount:E,closeDate:N,amount:_,originalAmount:v.amount})}),console.log("Summary:",{totalDeals:e.length,closedWonDeals:d,validDealsForGraph:c,monthlyRevenue:o});const u=Object.keys(o).map(v=>parseInt(v.split("-")[0])),f=u.length>0?[...new Set(u)].sort():[],p=new Date().getFullYear();new Date().getMonth();const x=[],y=[];for(let v=0;v<12;v++){const C=`${p}-${String(v+1).padStart(2,"0")}`;x.push(s[v]);const N=o[C]||0;y.push(N),N>0&&console.log(`Month ${s[v]} (${C}): ${N}`)}if(f.length>0){const v=Math.max(...f);if(v>p)for(let C=p+1;C<=v;C++)for(let N=0;N<12;N++){const S=`${C}-${String(N+1).padStart(2,"0")}`,T=o[S]||0;x.push(`${s[N]} ${C}`),y.push(T),T>0&&console.log(`Month ${s[N]} ${C} (${S}): ${T}`)}}const w=Math.max(...y,1);return console.log("Final chart data:",{labels:x,revenues:y,maxRevenue:w,hasData:y.some(v=>v>0)}),{labels:x,revenues:y,maxRevenue:w}},[e]),i=r.labels,l=r.revenues;return console.log("=== FINAL CHART DATA ==="),console.log("X Axis (Months):",i),console.log("Y Axis (Revenue):",l),console.log("Has any revenue > 0:",l.some(o=>o>0)),console.log("All revenue values:",l),console.log("Max revenue:",r.maxRevenue),n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Overview"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/group-manager/deals"),children:[n.jsx("span",{children:"See All"}),n.jsx(DJ,{size:14,className:"transform -rotate-45"})]})]}),n.jsx("div",{className:"h-80 relative flex-1 flex items-center justify-center p-6",children:n.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i&&i.length>0&&l&&l.length>0?n.jsx(BN,{xAxis:[{data:i,scaleType:"point"}],yAxis:[{valueFormatter:o=>o>=1e3?`${(o/1e3).toFixed(0)}k`:o.toString()}],series:[{data:l,showMark:!0,area:!0}],height:320,width:void 0,grid:{vertical:!0,horizontal:!0},margin:{top:40,right:40,bottom:50,left:50},sx:{width:"100%",maxWidth:"100%"}}):n.jsxs("div",{className:"text-center text-gray-500",children:[n.jsx("p",{className:"text-sm",children:"No revenue data available"}),n.jsx("p",{className:"text-xs mt-2",children:"Closed won deals with close dates will appear here"})]})})})]})},KGe=({pipelineData:e,loading:t})=>{const a=yt(),s=l=>{const o=(l||"").toUpperCase(),c={PROSPECTING:{name:"Prospecting",color:"bg-blue-500"},QUALIFICATION:{name:"Qualification",color:"bg-yellow-500"},PROPOSAL:{name:"Proposal",color:"bg-orange-500"},NEGOTIATION:{name:"Negotiation",color:"bg-purple-500"},CLOSED_WON:{name:"Closed Won",color:"bg-green-500"},CLOSED_LOST:{name:"Closed Lost",color:"bg-red-500"}};if(c[o])return c[o];const d=["bg-blue-500","bg-yellow-500","bg-orange-500","bg-purple-500","bg-green-500","bg-red-500"],u=Math.abs(o.split("").reduce((f,p)=>f+p.charCodeAt(0),0))%d.length;return{name:l||"Unknown",color:d[u]}},i=(()=>{if(!e||e.length===0)return["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"].map(f=>{const p=s(f);return{stage:p.name,value:0,deals:0,color:p.color}});const l={};e.forEach(u=>{const f=u.stage||"PROSPECTING";l[f]||(l[f]={deals:0,value:0}),l[f].deals+=1,l[f].value+=parseFloat(u.amount||0)});const o=Math.max(...Object.values(l).map(u=>u.value),1),c=["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"],d=[];return c.forEach(u=>{const f=s(u),p=l[u]||{deals:0,value:0};d.push({stage:f.name,value:p.value,deals:p.deals,color:f.color,percentage:o>0?p.value/o*100:0})}),d})();return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Sales Pipeline"}),n.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:()=>a("/group-manager/deals"),children:"See All"})]}),n.jsx("div",{className:"space-y-4 flex-grow",children:i.slice(0,6).map(l=>n.jsxs("div",{className:"flex flex-col cursor-pointer hover:opacity-85 transition duration-150",onClick:()=>a("/group-manager/deals"),children:[n.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[n.jsx("span",{className:"font-medium text-gray-700",children:l.stage}),n.jsx("span",{className:"font-semibold text-gray-800",children:IJ(l.value)})]}),n.jsx("div",{className:"relative h-2 rounded-full bg-gray-200",children:n.jsx("div",{className:`absolute top-0 left-0 h-full rounded-full ${l.color}`,style:{width:`${Math.min(l.percentage,100)}%`}})}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[l.deals," Deals"]})]},l.stage))})]})},UA=({title:e,items:t,children:a,onSeeAll:s})=>{const r=yt(),i=()=>{if(s)s();else{const l={"Latest Leads":"/group-manager/leads","Latest Deals":"/group-manager/deals","Upcoming Activities":"/group-manager/tasks"};l[e]&&r(l[e])}};return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e}),n.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:i,children:"See All"})]}),a]})},XGe=({first_name:e,last_name:t,company_name:a,source:s,created_at:r,id:i})=>{const l=yt(),{text:o,bg:c}=BGe(s||"Website"),d=x=>{if(!x)return"Unknown";const y=new Date(x),v=new Date-y,C=Math.floor(v/6e4),N=Math.floor(v/36e5),S=Math.floor(v/864e5);return C<60?`${C} min ago`:N<24?y.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):S<7?y.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):y.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},u=`${e||""} ${t||""}`.trim()||"Unknown",f=a||"Unknown Company",p=d(r);return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&l(`/group-manager/leads/${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800",children:u}),n.jsx("p",{className:"text-xs text-gray-500",children:f})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-400",children:p}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${o} ${c} px-2 py-0.5 rounded-full`,children:s||"Website"})]})]})})},ZGe=({name:e,amount:t,account:a,stage:s,created_at:r,id:i,previousAmount:l})=>{const o=yt(),d={PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"}[s]||s||"Unknown",{text:u,bg:f}=UGe(d),p=parseFloat(t||0),x=l?p>=l?"up":"down":"up",y=x==="up"?AGe:EGe,w=x==="up"?"text-green-400":"text-red-400",v=a?.name||"Unknown Company";return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&o(`/group-manager/deals/info?id=${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex-shrink",children:[n.jsx("p",{className:"font-semibold text-sm text-gray-900",children:e||"Unnamed Deal"}),n.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:v}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${u} ${f} px-2 py-0.5 rounded-full`,children:d})]}),n.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[n.jsx("p",{className:"text-md font-bold text-gray-800",children:IJ(p)}),n.jsx(y,{size:16,className:`${w} mt-1`})]})]})})},JGe=({type:e,title:t,assignedTo:a,dueDate:s,scheduledDate:r,priority:i,id:l,activityType:o,fullData:c})=>{const d=yt(),f=o||{Call:"call",Meeting:"meeting",Task:"qualification"}[e]||"meeting",{Icon:p,color:x,bgColor:y}=HGe(f),{text:w,bg:v}=GGe(i||"MEDIUM"),S=(_=>{if(!_)return"No date set";const E=new Date(_),I=E-new Date,z=Math.floor(I/864e5);return z===0?`Today, ${E.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:z===1?`Tomorrow, ${E.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:z===-1?`Yesterday, ${E.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:E.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(s||r),T=a||"Unassigned",k=()=>{l&&(c?f==="call"?(sessionStorage.setItem("callDetailData",JSON.stringify(c)),d(`/group-manager/calls/info?id=${l}`)):f==="meeting"?(sessionStorage.setItem("meetingDetailData",JSON.stringify(c)),d(`/group-manager/meetings/info?id=${l}`)):d("/group-manager/tasks"):d(f==="call"?`/group-manager/calls/info?id=${l}`:f==="meeting"?`/group-manager/meetings/info?id=${l}`:"/group-manager/tasks"))};return n.jsxs("div",{className:"flex items-start py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:k,children:[n.jsx("div",{className:`p-2 rounded-lg ${y} mr-3 flex-shrink-0 mt-1`,children:n.jsx(p,{size:20,className:`${x}`})}),n.jsxs("div",{className:"flex-grow",children:[n.jsxs("p",{className:"font-medium text-gray-800 flex items-center mb-1",children:[n.jsx("span",{className:"text-xl leading-none mr-2",children:""}),t||"Untitled Activity"]}),n.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[n.jsxs("p",{className:"flex items-center",children:[n.jsx(PJ,{size:14,className:"mr-1.5 text-gray-400"}),S]}),n.jsxs("p",{className:"flex items-center",children:[n.jsx(MJ,{size:14,className:"mr-1.5 text-gray-400"}),"Assigned to: ",T]})]})]}),n.jsx("span",{className:`inline-block text-xs font-medium ${w} ${v} px-2 py-0.5 rounded-full flex-shrink-0 self-center ml-4`,children:(i||"MEDIUM").toUpperCase()})]})},eWe=()=>{const e=yt(),{user:t}=Kt(),[a,s]=h.useState({activeLeads:0,totalDeals:0,activeAccounts:0,overdueTasks:0}),[r,i]=h.useState([]),[l,o]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState([]),[p,x]=h.useState([]),[y,w]=h.useState([]),[v,C]=h.useState(!0),[N,S]=h.useState(null),[T,k]=h.useState(""),[_,E]=h.useState([]),[A,I]=h.useState([]),[z,F]=h.useState([]),[D,M]=h.useState(new Date),W=h.useRef(null),Z=h.useRef(null),R=h.useMemo(()=>{try{if(!T.trim())return[];const re=T.toLowerCase().trim(),ee=[];return Array.isArray(_)&&_.forEach(H=>{const ye=`${H.first_name||""} ${H.last_name||""}`.trim().toLowerCase(),te=(H.company_name||"").toLowerCase(),ve=(H.email||"").toLowerCase(),je=(H.phone||"").toLowerCase();(ye.includes(re)||te.includes(re)||ve.includes(re)||je.includes(re))&&ee.push({id:H.id,name:`${H.first_name||""} ${H.last_name||""}`.trim()||"Unnamed Lead",type:"Lead",details:H.company_name||"No company",route:`/group-manager/leads/${H.id}`})}),Array.isArray(A)&&A.forEach(H=>{const ye=(H.name||"").toLowerCase(),te=(H.account?.name||"").toLowerCase(),ve=(H.description||"").toLowerCase();(ye.includes(re)||te.includes(re)||ve.includes(re))&&ee.push({id:H.id,name:H.name||"Unnamed Deal",type:"Deal",details:H.account?.name||"No account",route:`/group-manager/deals/info?id=${H.id}`})}),Array.isArray(z)&&z.forEach(H=>{const ye=(H.name||"").toLowerCase(),te=(H.email||"").toLowerCase(),ve=(H.phone||"").toLowerCase(),je=(H.website||"").toLowerCase();(ye.includes(re)||te.includes(re)||ve.includes(re)||je.includes(re))&&ee.push({id:H.id,name:H.name||"Unnamed Account",type:"Account",details:H.email||H.phone||"No contact info",route:"/group-manager/accounts"})}),ee.slice(0,10)}catch(re){return console.error("Error in search:",re),[]}},[T,_,A,z]),Q=re=>{re.route&&(e(re.route),k(""))},Y=h.useCallback(async()=>{C(!0),S(null);try{const[re,ee,H,ye,te,ve,je]=await Promise.all([ce.get("/leads/group-manager/getLeads").catch(de=>(console.error("Error fetching leads:",de),{data:[]})),ce.get("/deals/group-manager/fetch-all").catch(de=>(console.error("Error fetching deals:",de),{data:[]})),ce.get("/accounts/group-manager/fetch-all").catch(de=>(console.error("Error fetching accounts:",de),{data:[]})),ce.get("/tasks/all").catch(de=>(console.error("Error fetching tasks:",de),{data:[]})),ce.get("/meetings/group-manager/fetch-all").catch(de=>(console.error("Error fetching meetings:",de),{data:[]})),ce.get("/calls/group-manager/fetch-all").catch(de=>(console.error("Error fetching calls:",de),{data:[]})),ce.get("/logs/read-all").catch(de=>(console.error("Error fetching logs:",de),{data:[]}))]),Oe=Array.isArray(re.data)?re.data:[],$e=Array.isArray(ee.data)?ee.data:[],pe=Array.isArray(H.data)?H.data:[],Me=Array.isArray(ye.data)?ye.data:[],Le=Array.isArray(te.data)?te.data:[],he=Array.isArray(ve.data)?ve.data:[],ae=Array.isArray(je.data)?je.data:[];console.log("=== RAW DEALS API RESPONSE ==="),console.log("Deals count:",$e.length),$e.length>0&&(console.log("First deal sample (raw):",JSON.stringify($e[0],null,2)),console.log("First deal keys:",Object.keys($e[0]))),E(Oe),I($e),F(pe);const Ae=Oe.filter(de=>de.status&&!["Lost","Converted"].includes(de.status)).length,ge=Me.filter(de=>!de.dueDate||de.status==="Completed"?!1:new Date(de.dueDate)<new Date).length;s({activeLeads:Ae,totalDeals:$e.length,activeAccounts:pe.length,overdueTasks:ge});const Be=[...Oe].sort((de,ke)=>new Date(ke.created_at||0)-new Date(de.created_at||0)).slice(0,5);i(Be);const qe=[...$e].sort((de,ke)=>new Date(ke.created_at||0)-new Date(de.created_at||0)).slice(0,5);o(qe);const Te=new Date,He=[];he.forEach(de=>{const ke=de.due_date||de.call_time,se=(de.status||"").toUpperCase();if(ke){const We=new Date(ke);se==="COMPLETED"||se==="MISSED"||se==="NOT_HELD"||se==="HELD"||He.push({type:"Call",title:de.subject||"Untitled Call",assignedTo:de.assigned_to||(de.call_assign_to?`${de.call_assign_to.first_name||""} ${de.call_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:ke,priority:(de.priority||"MEDIUM").toUpperCase(),id:de.id,activityType:"call",fullData:de})}}),Le.forEach(de=>{const ke=de.dueDate||de.start_time,se=(de.status||"").toUpperCase();if(ke){const We=new Date(ke);se==="COMPLETED"||se==="CANCELLED"||se==="DONE"||He.push({type:"Meeting",title:de.subject||de.activity||"Untitled Meeting",assignedTo:de.assignedTo||(de.meet_assign_to?`${de.meet_assign_to.first_name||""} ${de.meet_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:ke,priority:(de.priority||"MEDIUM").toUpperCase(),id:de.id,activityType:"meeting",fullData:de})}});const Ye={HIGH:1,MEDIUM:2,LOW:3},B=He.sort((de,ke)=>{const se=Ye[de.priority]||3,We=Ye[ke.priority]||3;if(se!==We)return se-We;const Re=new Date(de.scheduledDate||0),ct=new Date(ke.scheduledDate||0);return Re-ct}).slice(0,5);d(B),f($e),console.log("=== ALL DEALS DATA ==="),console.log("Total deals:",$e.length);const fe=$e.filter(de=>(de.stage||"").toUpperCase()==="CLOSED_WON");console.log("CLOSED_WON deals:",fe.length),fe.length>0?(console.log("=== CLOSED_WON DEALS DETAILS ==="),fe.forEach((de,ke)=>{let se=de.amount;se&&typeof se=="object"?se.toString?se=parseFloat(se.toString()):se=parseFloat(se):se=parseFloat(se)||0,console.log(`Deal ${ke+1}:`,{id:de.id,name:de.name,stage:de.stage,stage_upper:(de.stage||"").toUpperCase(),amount:de.amount,amount_parsed:se,amount_type:typeof de.amount,close_date:de.close_date,close_date_type:typeof de.close_date,close_date_value:de.close_date?new Date(de.close_date):null,has_close_date:!!de.close_date,has_amount:se>0,all_keys:Object.keys(de),full_deal:de})})):(console.log(" No CLOSED_WON deals found!"),console.log("All deal stages:",$e.map(de=>de.stage))),w($e);const Se=[...ae].sort((de,ke)=>new Date(ke.timestamp||0)-new Date(de.timestamp||0));x(Se)}catch(re){console.error("Error fetching dashboard data:",re),S("Failed to load dashboard data. Please refresh the page.")}finally{C(!1)}},[]);h.useEffect(()=>(document.title="Dashboard | Sari-Sari CRM",console.log("TManagerDashboard mounted, fetching data..."),Y(),W.current=setInterval(()=>{console.log("Auto-refreshing dashboard data..."),Y(),M(new Date)},3e4),()=>{W.current&&clearInterval(W.current)}),[Y]),h.useEffect(()=>{if(!t||!t.id)return;let re=0;const ee=3;let H=null;const ye=()=>{const te=window.location.protocol==="https:"?"wss:":"ws:",ve=window.location.hostname==="localhost"?"localhost:8000":window.location.host,je=`${te}//${ve}/ws/notifications?user_id=${t.id}`;try{const Oe=new WebSocket(je);Z.current=Oe,Oe.onopen=()=>{console.log(" WebSocket connected for dashboard updates"),re=0},Oe.onmessage=$e=>{try{const pe=JSON.parse($e.data);console.log(" Real-time notification received:",pe),pe.event&&["new_task","task_updated","new_lead","lead_updated","new_deal","deal_updated","new_account","account_updated","new_meeting","meeting_updated","new_call","call_updated"].includes(pe.event)&&(console.log(" Refreshing dashboard due to:",pe.event),Y(),M(new Date))}catch(pe){console.error("Error parsing WebSocket message:",pe)}},Oe.onerror=$e=>{re===0&&console.warn(" WebSocket connection unavailable (this is optional)")},Oe.onclose=()=>{re<ee&&(re++,H=setTimeout(()=>{t&&t.id&&ye()},5e3))}}catch{console.warn(" WebSocket not available (optional feature)")}};return ye(),()=>{H&&clearTimeout(H),Z.current&&(Z.current.close(),Z.current=null)}},[t,Y]);const oe=[{icon:OJ,title:"Active Leads",value:a.activeLeads,color:"text-blue-600",bgColor:"bg-blue-50",onClick:()=>e("/group-manager/leads")},{icon:SGe,title:"Total Deals",value:a.totalDeals,color:"text-yellow-600",bgColor:"bg-yellow-50",onClick:()=>e("/group-manager/deals")},{icon:_Ge,title:"Active Account",value:a.activeAccounts,color:"text-green-600",bgColor:"bg-green-50",onClick:()=>e("/group-manager/accounts")},{icon:PJ,title:"Overdue Tasks",value:a.overdueTasks,color:"text-red-600",bgColor:"bg-red-50",onClick:()=>e("/group-manager/tasks")}];return console.log("TManagerDashboard rendering, loading:",v,"error:",N),n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative w-full",children:[v&&n.jsx(Rt,{}),n.jsxs("div",{className:"max-w-screen-2xl mx-auto",children:[N&&n.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:n.jsx("p",{className:"font-medium",children:N})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 mb-8",children:[n.jsxs("div",{className:"lg:col-span-9 flex flex-col space-y-4",children:[n.jsx(WGe,{searchQuery:T,onSearchChange:k,searchResults:R,onSearchResultClick:Q}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:oe.map(re=>n.jsx(YGe,{...re,loading:v},re.title))})]}),n.jsx("div",{className:"lg:col-span-3",children:n.jsx(qGe,{logs:p,loading:v})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[n.jsx("div",{className:"lg:col-span-2",children:n.jsx(QGe,{revenueData:y,loading:v})}),n.jsx("div",{children:n.jsx(KGe,{pipelineData:u,loading:v})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsx(UA,{title:"Latest Leads",children:r.length>0?r.map((re,ee)=>n.jsx(XGe,{...re},re.id||ee)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No leads found"})}),n.jsx(UA,{title:"Latest Deals",children:v?n.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mb-2"}),n.jsx("div",{className:"text-sm text-gray-500",children:"Loading deals..."})]}):l.length>0?l.map((re,ee)=>n.jsx(ZGe,{...re},re.id||ee)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No deals found"})}),n.jsx(UA,{title:"Upcoming Activities",children:c.length>0?c.map((re,ee)=>n.jsx(JGe,{...re},re.id||ee)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No upcoming activities"})})]})]})]})},BA=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Active"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Former"}],HA={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",parent_company:"",status:"PROSPECT",territory_id:"",assigned_to:""},Sr=e=>e?e.toUpperCase():"",GA=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",tWe=e=>{switch(Sr(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},nWe=e=>{switch(Sr(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}};function aWe(){const e=yt();h.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[t,a]=h.useState(!1),[s,r]=h.useState(!1),[i,l]=h.useState(!1),[o,c]=h.useState(null),[d,u]=h.useState(null),[f,p]=h.useState(HA),[x,y]=h.useState(null),[w,v]=h.useState([]),[C,N]=h.useState(!1),[S,T]=h.useState([]),[k,_]=h.useState(null),[E,A]=h.useState([]),[I,z]=h.useState([]),[F,D]=h.useState("Filter by Status"),[M,W]=h.useState(""),[Z,R]=h.useState(null),[Q,Y]=h.useState(!1),[oe,re]=h.useState(1),[ee,H]=h.useState(10),[ye,te]=h.useState("Overview"),[ve,je]=h.useState(""),[Oe,$e]=h.useState(!1),[pe,Me]=h.useState({}),[Le,he]=h.useState(null),ae=h.useCallback(async(le=null)=>{N(!0);try{const it=await ce.get("/accounts/admin/fetch-all"),Nt=[...Array.isArray(it.data)?it.data:[]].sort((L,U)=>{const xe=L?.created_at||L?.updated_at||0,De=U?.created_at||U?.updated_at||0;return new Date(De)-new Date(xe)});if(v(Nt),console.log("Fetch from backend: ",it.data),le){const L=Nt.find(U=>U.id===le);y(L||null)}}catch(it){console.error(it),v([]),it.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch accounts. Please try again later.")}finally{N(!1)}},[y]),Ae=h.useCallback(async()=>{try{const le=await ce.get("/users/all");T(Array.isArray(le.data)?le.data:[])}catch(le){console.error(le),le.response?.status===403&&q.warn("Unable to load users for assignment (permission denied).")}},[]),ge=h.useCallback(async()=>{try{const le=await ce.get("/territories/fetch");A(Array.isArray(le.data)?le.data:[])}catch(le){console.error(le),le.response?.status===403&&q.warn("Unable to load territories (permission denied).")}},[]),Be=h.useCallback(async()=>{try{const le=await ce.get("/accounts/admin/parent-companies");z(Array.isArray(le.data)?le.data:[])}catch(le){console.error(le),le.response?.status===403&&q.warn("Unable to load parent companies (permission denied).")}},[]),qe=h.useCallback(async le=>{try{const it=await ce.get(`/activities/accounts/${le}`);console.log("Related activities: ",it.data),Me(it.data&&typeof it.data=="object"?it.data:{})}catch(it){console.error(it),it.response?.status===404&&(console.warn("No activities found for this account."),Me({}))}},[]);h.useEffect(()=>{ae(),Ae(),ge(),Be()},[ae,Ae,ge,Be]),h.useEffect(()=>{x&&je(Sr(x.status)||"PROSPECT")},[x]);const Te=w.length,He=h.useMemo(()=>w.filter(le=>le.status?.toLowerCase()==="customer").length,[w]),Ye=h.useMemo(()=>w.filter(le=>le.status?.toLowerCase()==="prospect").length,[w]),B=h.useMemo(()=>w.filter(le=>le.status?.toLowerCase()==="partner").length,[w]),fe=h.useMemo(()=>w.filter(le=>le.status?.toLowerCase()==="active").length,[w]),Se=h.useMemo(()=>w.filter(le=>le.status?.toLowerCase()==="inactive").length,[w]),de=h.useMemo(()=>w.filter(le=>le.status?.toLowerCase()==="former").length,[w]),ke=h.useMemo(()=>[{title:"Total",value:Te,icon:On,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:He,icon:Nl,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:Ye,icon:Wn,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:B,icon:Jt,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:fe,icon:Nl,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:Se,icon:jl,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:de,icon:jl,color:"text-orange-600",bgColor:"bg-orange-100"}],[Te,He,Ye,B,fe,Se,de]),se=h.useMemo(()=>{const le=M.trim().toLowerCase(),it=F.trim().toUpperCase();return w.filter(Et=>{const Nt=[Et?.name,Et?.website,Et?.industry,Et?.territory?.name,Et?.phone_number],L=le===""||Nt.some(xe=>xe==null?!1:xe.toString().toLowerCase().includes(le)),U=it==="FILTER BY STATUS"||Sr(Et.status)===it;return L&&U})},[w,M,F]),We=Math.max(1,Math.ceil(se.length/ee)||1);h.useEffect(()=>{re(1)},[M,F,ee]),h.useEffect(()=>{re(le=>{const it=Math.max(1,Math.ceil(se.length/ee)||1);return le>it?it:le})},[se.length,ee]);const Re=h.useMemo(()=>{const le=(oe-1)*ee;return se.slice(le,le+ee)},[se,oe,ee]);se.length===0||(oe-1)*ee+1,Math.min(oe*ee,se.length);const ct=()=>re(le=>Math.max(le-1,1)),Ie=()=>re(le=>Math.min(le+1,We)),ue=le=>{y(le),te("Overview"),je(Sr(le?.status)||"PROSPECT")},Ne=()=>y(null),Fe=le=>{le.target.id==="accountModalBackdrop"&&!Q&&Ne()},Ze=()=>{a(!1),r(!1),u(null),p(HA),l(!1),_(null)},st=le=>{le.target.id==="modalBackdrop"&&Ze()},Ee=le=>le?new Date(le).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",Je=le=>{const{name:it,value:Et}=le.target;p(Nt=>({...Nt,[it]:Et}))},be=()=>{p(HA),r(!1),u(null),a(!0)},Ke=le=>{y(null),console.log("edit: ",le),le.assigned_accs?_(le.assigned_accs):_(null),p({name:le.name||"",website:le.website||"",phone_number:le.phone_number||"",billing_address:le.billing_address||"",shipping_address:le.shipping_address||"",industry:le.industry||"",status:Sr(le.status)||"PROSPECT",territory_id:le.territory?.id?String(le.territory.id):"",assigned_to:le.assigned_accs?.id?String(le.assigned_accs.id):""}),r(!0),u(le.id),a(!0)},$=le=>{le&&R({title:"Delete Account",message:n.jsxs("span",{children:["Are you sure you want to permanently delete the account"," ",n.jsx("span",{className:"font-semibold",children:le.name}),"? This action cannot be undone."]}),confirmLabel:"Delete Account",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:le.id,name:le.name}})},G=async()=>{if(!Z?.action){R(null);return}const{action:le}=Z,{type:it,payload:Et,targetId:Nt,name:L}=le;Y(!0);try{if(it==="create"){l(!0);const U=await ce.post("/accounts/admin",Et);Be(),q.success(`Account "${L}" created successfully.`);const xe=x?.id||null;Ze(),await ae(xe),!x&&U.data?.id}else if(it==="update"){if(!Nt)throw new Error("Missing account identifier for update.");l(!0),await ce.put(`/accounts/admin/${Nt}`,Et),q.success(`Account "${L}" updated successfully.`);const U=x?.id&&x.id===Nt?Nt:null;Ze(),await ae(U),x?.id===Nt&&y(null)}else if(it==="delete"){if(!Nt)throw new Error("Missing account identifier for deletion.");const U=x?.id;c(Nt),await ce.delete(`/accounts/admin/${Nt}`),q.success(`Account "${L}" deleted successfully.`),await ae(U&&U!==Nt?U:null),U===Nt&&y(null)}}catch(U){console.error(U);const xe=it==="create"?"Failed to create account. Please review the details and try again.":it==="update"?"Failed to update account. Please review the details and try again.":"Failed to delete account. Please try again.",De=U.response?.data?.detail||xe;q.error(De),(it==="create"||it==="update")&&l(!1),it==="delete"&&c(null)}finally{(it==="create"||it==="update")&&l(!1),it==="delete"&&c(null),Y(!1),R(null)}},K=()=>{Q||R(null)},ne=async()=>{if(!x||!ve)return;const le=Sr(ve),it=Sr(x.status);if(le!==it){$e(!0);try{await ce.put(`/accounts/admin/${x.id}`,{status:le}),q.success(`Account status updated to ${GA(le)}`),v(Et=>Et.map(Nt=>Nt.id===x.id?{...Nt,status:le}:Nt)),y(null)}catch(Et){console.error(Et);const Nt=Et.response?.data?.detail||"Failed to update account status. Please try again.";q.error(Nt)}finally{$e(!1)}}},[J,Ce]=h.useState(!1),me=le=>{le.preventDefault(),Ce(!0);const it=f.name.trim();if(!it){q.error("Account name is required.");return}if(!f.assigned_to){q.error("Assigned To is required.");return}const Nt={name:it,website:f.website?.trim()||null,phone_number:f.phone_number?.trim()||null,billing_address:f.billing_address?.trim()||null,shipping_address:f.shipping_address?.trim()||null,industry:f.industry?.trim()||null,parent_company:f.parent_company?.trim()||null,status:f.status||"PROSPECT",territory_id:f.territory_id?Number(f.territory_id):null,assigned_to:f.assigned_to?Number(f.assigned_to):null},L=s&&d?"update":"create";R({title:L==="create"?"Confirm New Account":"Confirm Update",message:L==="create"?n.jsxs("span",{children:["Are you sure you want to create the account"," ",n.jsx("span",{className:"font-semibold",children:it}),"?"]}):n.jsxs("span",{children:["Save changes to the account"," ",n.jsx("span",{className:"font-semibold",children:it}),"?"]}),confirmLabel:L==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:L,payload:Nt,targetId:d||null,name:it}})},V=[{label:"Filter by Status",value:"Filter by Status"},...BA.map(le=>({label:le.label,value:le.value}))],_e=Z?.action?.type==="delete"?Z.action.targetId:null,Ue=x&&(o===x.id||_e===x.id),rt=x&&o===x.id,bt=x?tWe(x.status):"",gt=x?n.jsx("div",{id:"accountModalBackdrop",onClick:Fe,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:le=>le.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),n.jsx("button",{onClick:Ne,className:"text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Vn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:x.name}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${bt}`,children:GA(x.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Ke(x),disabled:Z?.action?.type==="update"&&Z.action.targetId===x.id,children:[n.jsx(ia,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>$(x),disabled:!!Ue,children:rt?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(zt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(le=>n.jsx("button",{onClick:()=>te(le),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${ye===le?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:le},le))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[ye==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Website:"}),n.jsx("p",{children:x.website?n.jsx("a",{href:x.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:x.website}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Industry:"}),n.jsx("p",{children:x.industry||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Parent Company:"}),n.jsx("p",{children:x.parent_company||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:x.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:x.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Billing Address:"}),n.jsx("p",{children:x.billing_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),n.jsx("p",{children:x.shipping_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:x.assigned_accs?`${x.assigned_accs.first_name} ${x.assigned_accs.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:x.acc_creator?`${x.acc_creator.first_name} ${x.acc_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:Ee(x.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:Ee(x.updated_at)||"N/A"})]})]})}),ye==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:w.notes||"No notes available."})]})]}),ye==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[pe.tasks&&pe.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(Le==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Gt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",pe.tasks.length,")"]})]}),Le==="tasks"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),Le==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:pe.tasks.map((le,it)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/tasks",{state:{taskID:le.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Gt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:le.subject||le.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:le.description||"No description"}),le.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",le.assigned_to.first_name," ",le.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ee(le.due_date||le.created_at)})]},`task-${it}`))})]}),pe.meetings&&pe.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(Le==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ct,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",pe.meetings.length,")"]})]}),Le==="meetings"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),Le==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:pe.meetings.map((le,it)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/meetings",{state:{meetingID:le.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Ct,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:le.subject||le.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:le.description||le.location||"No description"}),le.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",le.host.first_name," ",le.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ee(le.start_time||le.created_at)})]},`meeting-${it}`))})]}),pe.calls&&pe.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(Le==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(At,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",pe.calls.length,")"]})]}),Le==="calls"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),Le==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:pe.calls.map((le,it)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/calls",{state:{callID:le.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(At,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:le.subject||le.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:le.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ee(le.call_time||le.created_at)})]},`call-${it}`))})]}),pe.contacts&&pe.contacts.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(Le==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Jt,{className:"text-teal-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",pe.contacts.length,")"]})]}),Le==="contacts"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),Le==="contacts"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:pe.contacts.map((le,it)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/contacts",{state:{contactID:le.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-teal-600 mt-1",children:n.jsx(Jt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[le.first_name?`${le.first_name} `:"",le.last_name]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:le.title||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ee(le.created_at)})]},`contact-${it}`))})]}),pe.deals&&pe.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(Le==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",pe.deals.length,")"]})]}),Le==="deals"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),Le==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:pe.deals.map((le,it)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/deals",{state:{dealID:le.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[le.deal_id?le.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",le.name||le.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:le.stage||le.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ee(le.close_date||le.created_at)})]},`deal-${it}`))})]}),pe.quotes&&pe.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(Le==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(xn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",pe.quotes.length,")"]})]}),Le==="quotes"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),Le==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:pe.quotes.map((le,it)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/quotes",{state:{quoteID:le.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(xn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(le.quote_id?le.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:le.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ee(le.presented_date)||""})]},`quote-${it}`))})]}),(!pe||(!pe.tasks||pe.tasks.length===0)&&(!pe.meetings||pe.meetings.length===0)&&(!pe.calls||pe.calls.length===0)&&(!pe.quotes||pe.quotes.length===0)&&(!pe.deals||pe.deals.length===0)&&(!pe.contacts||pe.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/group-manager/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assigned_to:x.assigned_accs?.id?String(x.assigned_accs.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(At,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/group-manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assignedTo:x.assigned_accs?.id?String(x.assigned_accs.id):"",status:"Planned"}}}),children:[n.jsx(Ct,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/group-manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assignedTo:x.assigned_accs?.id?String(x.assigned_accs.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Gt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:ve||Sr(x?.status)||"PROSPECT",onChange:le=>je(le.target.value),children:BA.map(le=>n.jsx("option",{value:le.value,children:le.label},le.value))}),n.jsx("button",{onClick:ne,disabled:Oe||!ve||Sr(ve)===Sr(x?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Oe||!ve||Sr(ve)===Sr(x?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:Oe?"Updating...":"Update"})]})]})]})]})]})}):null,_t=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[C&&n.jsx(Rt,{message:"Loading accounts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(On,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{be(),Ce(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(dn,{className:"mr-2"})," Add Account"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:ke.map(le=>n.jsx(sWe,{...le},le.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search accounts",value:M,onChange:le=>W(le.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:F,onChange:le=>D(le.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:V.map(le=>n.jsx("option",{value:le.value,children:le.label},le.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Industry"}),n.jsx("th",{className:"py-3 px-4",children:"Territory"}),n.jsx("th",{className:"py-3 px-4",children:"Phone"})]})}),n.jsx("tbody",{children:C?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"Loading accounts..."})}):se.length>0?Re.map(le=>n.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>{ue(le),qe(le.id)},children:[n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:le.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:le.website||"--"})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${nWe(le.status)}`,children:GA(le.status)})}),n.jsx("td",{className:"py-3 px-4 text-sm",children:le.industry||"--"}),n.jsx("td",{className:"py-3 px-4 text-sm",children:le.territory?.name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(At,{className:"text-gray-500"}),n.jsx("span",{children:le.phone_number||"--"})]})})]},le.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"No accounts found."})})})]})}),n.jsx(en,{className:"mt-4",totalItems:se.length,pageSize:ee,currentPage:oe,onPrev:ct,onNext:Ie,onPageSizeChange:H,label:"accounts"})]}),Wt=t?n.jsx("div",{id:"modalBackdrop",onClick:st,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto hide-scrollbar max-h-[90vh]",onClick:le=>le.stopPropagation(),children:[n.jsx("button",{onClick:()=>{Ze(),Ce(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:i||Q,children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Account":"Add New Account"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:me,noValidate:!0,children:[n.jsx("div",{className:"md:col-span-2",children:n.jsx(Wm,{label:"Name",name:"name",value:f.name,onChange:Je,placeholder:"Company name",required:!0,isSubmitted:J})}),n.jsx(AB,{label:"Parent Company",value:f.parent_company,onChange:le=>{p(it=>({...it,parent_company:le}))},items:I.map(le=>({id:le,name:le})),getLabel:le=>le?.name||"",placeholder:"Select parent company...",disabled:i}),n.jsx(Wm,{label:"Website",name:"website",value:f.website,onChange:Je,placeholder:"https://example.com",disabled:i}),n.jsx(Wm,{label:"Phone Number",name:"phone_number",value:f.phone_number,onChange:Je,placeholder:"09xx xxx xxxx",type:"tel",disabled:i}),n.jsx(Wm,{label:"Industry",name:"industry",value:f.industry,onChange:Je,placeholder:"Industry",disabled:i}),n.jsx(Wm,{label:"Billing Address",name:"billing_address",value:f.billing_address,onChange:Je,placeholder:"Billing address",disabled:i}),n.jsx(Wm,{label:"Shipping Address",name:"shipping_address",value:f.shipping_address,onChange:Je,placeholder:"Shipping address",disabled:i}),n.jsx(_B,{label:"Status",name:"status",value:f.status,onChange:Je,options:[{value:"",label:"Select status"},...BA],required:!0,disabled:i}),n.jsx(AB,{label:"Assigned To",value:f.assigned_to,onChange:le=>{const it=S.find(Nt=>String(Nt.id)===String(le));_(it);let Et=null;it&&it.assigned_territory&&it.assigned_territory.length===1&&(Et=it.assigned_territory[0].id),p(Nt=>({...Nt,assigned_to:le,territory_id:Et}))},items:S||[],getLabel:le=>`${le?.first_name??""} ${le?.last_name??""} (${le?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:J,disabled:i||S.length===0}),n.jsx(_B,{label:"Territory",name:"territory_id",value:f.territory_id||"",onChange:Je,options:[{value:"",label:k?k.assigned_territory&&k.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"},...k&&k.assigned_territory&&k.assigned_territory.map(le=>({value:String(le.id),label:le.name}))||[]],disabled:i||!k||!k.assigned_territory||k.assigned_territory.length===0}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{Ze(),Ce(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i||Q,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i||Q,children:i?"Saving...":s?"Update Account":"Save Account"})]})]})]})}):null,un=Z?n.jsx(iWe,{open:!0,title:Z.title,message:Z.message,confirmLabel:Z.confirmLabel,cancelLabel:Z.cancelLabel,variant:Z.variant,onConfirm:G,onCancel:K,loading:Q}):null;return n.jsxs(n.Fragment,{children:[_t,gt,Wt,un]})}function sWe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function Wm({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function _B({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:l=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(o=>n.jsx("option",{value:o.value,children:o.label},o.value))})]})}function AB({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",required:c=!1,isSubmitted:d=!1,allowFreeText:u=!1}){const f=d&&c&&!a;return n.jsxs("div",{className:o,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(rWe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:l,hasError:f,allowFreeText:u})]})}function rWe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,hasError:o=!1,allowFreeText:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),y=e.find(C=>String(C.id)===String(t)),w=y?s(y):t,v=h.useMemo(()=>{const C=f.trim().toLowerCase();return(C?e.filter(S=>(s(S)||"").toLowerCase().includes(C)):e).slice(0,l)},[e,f,s,l]);return h.useEffect(()=>{const C=N=>{x.current&&!x.current.contains(N.target)&&u(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:w,placeholder:r,onFocus:()=>!i&&u(!0),onChange:C=>{p(C.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${o?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsxs("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:[c&&f.trim()&&!v.some(C=>s(C).toLowerCase()===f.trim().toLowerCase())&&n.jsxs("button",{type:"button",onClick:()=>{a(f.trim()),u(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-green-50 bg-blue-50 font-medium text-blue-700",children:['+ Add "',f.trim(),'" as new parent company']}),v.length>0?v.map(C=>{const N=String(C.id),S=s(C),T=String(t)===N;return n.jsx("button",{type:"button",onClick:()=>{a(N),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${T?"bg-blue-50":""}`,children:S||"--"},N)}):!c||!f.trim()?n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"}):null]}),e.length>l&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function iWe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),n.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}const WA={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:""},Vm=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),nl=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function lWe(){const e=yt(),t=Yt();h.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[a,s]=h.useState([]),[r,i]=h.useState(!1),[l,o]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState(null),[p,x]=h.useState(!1),[y,w]=h.useState(!1),[v,C]=h.useState(!1),[N,S]=h.useState(null),[T,k]=h.useState(!1),[_,E]=h.useState(null),[A,I]=h.useState(WA),[z,F]=h.useState(""),[D,M]=h.useState("Filter by Accounts"),[W,Z]=h.useState(null),[R,Q]=h.useState("Overview"),[Y,oe]=h.useState(1),[re,ee]=h.useState(10),[H,ye]=h.useState({}),[te,ve]=h.useState(null),[je,Oe]=h.useState(null);h.useEffect(()=>{const $=t.state?.contactID;$&&(Oe($),e(t.pathname,{replace:!0,state:{}}))},[t,e]),h.useEffect(()=>{if(je&&a.length>0&&!r){const $=a.find(G=>G.id===je);$?f($):q.error("Contact not found."),Oe(null)}},[je,a,r]);const $e=h.useCallback(async($=null)=>{i(!0);try{const G=await ce.get("/contacts/admin/fetch-all"),ne=[...Array.isArray(G.data)?G.data:[]].sort((J,Ce)=>{const me=J?.created_at||J?.updated_at||0,V=Ce?.created_at||Ce?.updated_at||0;return new Date(V)-new Date(me)});if(s(ne),$){const J=ne.find(Ce=>Ce.id===$);f(J||null)}}catch(G){console.error(G),s([]),G.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch contacts. Please try again later.")}finally{i(!1)}},[f]),pe=h.useCallback(async()=>{try{const $=await ce.get("/accounts/admin/fetch-all"),K=[...Array.isArray($.data)?$.data:[]].sort((ne,J)=>(ne?.name||"").localeCompare(J?.name||""));o(K)}catch($){console.error($),o([]),$.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},[]),Me=h.useCallback(async()=>{try{const $=await ce.get("/users/all"),K=[...Array.isArray($.data)?$.data:[]].sort((ne,J)=>Vm(ne).localeCompare(Vm(J)));d(K)}catch($){console.error($),d([]),$.response?.status===403&&q.warn("Unable to load users for assignment (permission denied).")}},[]),Le=h.useCallback(async $=>{try{const G=await ce.get(`/activities/contact/${$}`);ye(G.data&&typeof G.data=="object"?G.data:{})}catch(G){console.error(G),G.response?.status===404&&(console.warn("No activities found for this account."),ye({}))}},[]);h.useEffect(()=>{$e(),pe(),Me()},[$e,pe,Me]);const he=h.useMemo(()=>{const $=new Map;l.forEach(K=>{K?.id&&K?.name&&$.set(String(K.id),K.name)}),a.forEach(K=>{K?.account_id&&K?.account?.name&&$.set(String(K.account_id),K.account.name)});const G=Array.from($.entries()).sort((K,ne)=>K[1].localeCompare(ne[1])).map(([K,ne])=>({value:K,label:ne}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...G]},[l,a]),ae=h.useMemo(()=>{const $=z.trim().toLowerCase(),G=D.trim();return a.filter(K=>{const ne=[K?.first_name,K?.last_name,K?.email,K?.title,K?.department,K?.account?.name,K?.account?.status,K?.work_phone,K?.mobile_phone_1,K?.mobile_phone_2,K?.assigned_contact?.first_name,K?.assigned_contact?.last_name,K?.contact_creator?.first_name,K?.contact_creator?.last_name,K?.notes,nl(K?.created_at),nl(K?.updated_at)],J=$===""||ne.some(me=>me==null?!1:me.toString().toLowerCase().includes($)),Ce=G==="Filter by Accounts"||String(K.account_id)===G;return J&&Ce})},[a,z,D]),Ae=Math.max(1,Math.ceil(ae.length/re)||1);h.useEffect(()=>{oe(1)},[z,D,re]),h.useEffect(()=>{oe($=>{const G=Math.max(1,Math.ceil(ae.length/re)||1);return $>G?G:$})},[ae.length,re]);const ge=h.useMemo(()=>{const $=(Y-1)*re;return ae.slice($,$+re)},[ae,Y,re]),Be=()=>oe($=>Math.max($-1,1)),qe=()=>oe($=>Math.min($+1,Ae)),Te=h.useMemo(()=>{if(!y||!_)return l;const $=a.find(K=>K.id===_);return!$||!$.account||l.some(K=>K.id===$.account.id)?l:[...l,$.account]},[l,y,_,a]),He=h.useCallback(()=>{x(!1),w(!1),E(null),I(WA),C(!1),se(!1)},[]),Ye=$=>{$.target.id==="modalBackdrop"&&!v&&!T&&He()},B=$=>{const{name:G,value:K}=$.target;I(ne=>({...ne,[G]:K}))},fe=()=>{I(WA),w(!1),E(null),x(!0)},Se=async $=>{if(!$)return;const G=await ce.get(`/accounts/get/${$.account_id}`);I({first_name:$.first_name||"",last_name:$.last_name||"",account_id:G.data.id?G.data.id:"",title:$.title||"",department:$.department||"",email:$.email||"",work_phone:$.work_phone||"",mobile_phone_1:$.mobile_phone_1||"",mobile_phone_2:$.mobile_phone_2||"",notes:$.notes||"",assigned_to:$.assigned_to?String($.assigned_to):""}),w(!0),E($.id),x(!0),f(null)},de=$=>{if(!$)return;const G=Vm($)||"this contact";S({title:"Delete Contact",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:G}),"? This action cannot be undone."]}),confirmLabel:"Delete Contact",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:$.id,name:G}})},[ke,se]=h.useState(!1),We=$=>{$.preventDefault(),se(!0);const G=A.first_name.trim(),K=A.last_name.trim();if(!G||!K){q.error("First name and last name are required.");return}if(!A.account_id){q.error("Account is required.");return}if(!A.assigned_to){q.error("Assigned To is required.");return}const J=A.email?.trim();if(!J){q.error("Email is required.");return}if(!J.includes("@")){q.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(J)){q.error("Please enter a valid email address.");return}const me={first_name:G,last_name:K,account_id:Number(A.account_id),title:A.title?.trim()||null,department:A.department?.trim()||null,email:A.email?.trim().toLowerCase()||null,work_phone:A.work_phone?.trim()||null,mobile_phone_1:A.mobile_phone_1?.trim()||null,mobile_phone_2:A.mobile_phone_2?.trim()||null,notes:A.notes?.trim()||null,assigned_to:A.assigned_to?Number(A.assigned_to):null},V=y&&_?"update":"create",_e=`${G} ${K}`.trim();S({title:V==="create"?"Confirm New Contact":"Confirm Update",message:V==="create"?n.jsxs("span",{children:["Are you sure you want to add"," ",n.jsx("span",{className:"font-semibold",children:_e})," to your contacts?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:_e}),"?"]}),confirmLabel:V==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:V,payload:me,targetId:_||null,name:_e}})},Re=async()=>{if(!N?.action){S(null);return}const{action:$}=N,{type:G,payload:K,targetId:ne,name:J}=$;k(!0);try{if(G==="create"){C(!0),await ce.post("/contacts/admin",K),q.success(`Contact "${J}" created successfully.`);const Ce=u?.id||null;He(),await $e(Ce)}else if(G==="update"){if(!ne)throw new Error("Missing contact identifier for update.");C(!0),await ce.put(`/contacts/admin/${ne}`,K),q.success(`Contact "${J}" updated successfully.`);const Ce=u?.id&&u.id===ne?ne:u?.id||null;He(),await $e(Ce),u?.id===ne&&f(null)}else if(G==="delete"){if(!ne)throw new Error("Missing contact identifier for deletion.");const Ce=u?.id;Z(ne),await ce.delete(`/contacts/admin/${ne}`),q.success(`Contact "${J}" deleted successfully.`),await $e(Ce&&Ce!==ne?Ce:null),Ce===ne&&f(null)}}catch(Ce){console.error(Ce);const me=G==="create"?"Failed to create contact. Please review the details and try again.":G==="update"?"Failed to update contact. Please review the details and try again.":"Failed to delete contact. Please try again.",V=Ce.response?.data?.detail||me;q.error(V)}finally{(G==="create"||G==="update")&&C(!1),G==="delete"&&Z(null),k(!1),S(null)}},ct=()=>{T||S(null)},Ie=$=>{f($),Q("Overview")},ue=()=>f(null),Ne=$=>{$.target.id==="contactModalBackdrop"&&!T&&ue()},Fe=N?.action?.type==="delete"?N.action.targetId:null,Ze=u&&(W===u.id||Fe===u.id),st=u&&W===u.id,Ee=u?n.jsx("div",{id:"contactModalBackdrop",onClick:Ne,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:$=>$.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),n.jsx("button",{onClick:ue,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Vn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:Vm(u)||"Unnamed contact"})}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Se(u),disabled:T||N?.action?.type==="update"&&N.action.targetId===u.id,children:[n.jsx(ia,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>de(u),disabled:!!Ze,children:st?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(zt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:n.jsx("p",{className:"text-sm text-gray-500",children:u.account?.name||"No associated account"})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map($=>n.jsx("button",{onClick:()=>Q($),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${R===$?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:$},$))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[R==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact Name:"}),n.jsx("p",{children:Vm(u)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Title:"}),n.jsx("p",{children:u.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:u.email?n.jsx("a",{href:`mailto:${u.email}`,className:"text-blue-600 hover:underline break-all",children:u.email}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:u.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:u.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:u.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:u.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:u.assigned_contact?`${u.assigned_contact.first_name} ${u.assigned_contact.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:u.contact_creator?`${u.contact_creator.first_name} ${u.contact_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:nl(u.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:nl(u.updated_at)||"N/A"})]})]})}),R==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:u.notes||"No notes available."})]})]}),R==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[H.tasks&&H.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ve(te==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Gt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",H.tasks.length,")"]})]}),te==="tasks"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),te==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:H.tasks.map(($,G)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/tasks",{state:{taskID:$.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Gt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:$.subject||$.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:$.description||"No description"}),$.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",$.assigned_to.first_name," ",$.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:nl($.due_date||$.created_at)})]},`task-${G}`))})]}),H.meetings&&H.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ve(te==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ct,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",H.meetings.length,")"]})]}),te==="meetings"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),te==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:H.meetings.map(($,G)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/meetings",{state:{meetingID:$.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Ct,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:$.subject||$.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:$.description||$.location||"No description"}),$.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",$.host.first_name," ",$.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:nl($.start_time||$.created_at)})]},`meeting-${G}`))})]}),H.calls&&H.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ve(te==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(At,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",H.calls.length,")"]})]}),te==="calls"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),te==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:H.calls.map(($,G)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/calls",{state:{callID:$.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(At,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:$.subject||$.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:$.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:nl($.call_time||$.created_at)})]},`call-${G}`))})]}),H.deals&&H.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ve(te==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",H.deals.length,")"]})]}),te==="deals"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),te==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:H.deals.map(($,G)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/deals",{state:{dealID:$.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[$.deal_id?$.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",$.name||$.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:$.stage||$.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:nl($.close_date||$.created_at)})]},`deal-${G}`))})]}),H.quotes&&H.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ve(te==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(xn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",H.quotes.length,")"]})]}),te==="quotes"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),te==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:H.quotes.map(($,G)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/quotes",{state:{quoteID:$.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(xn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:($.quote_id?$.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:$.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:nl($.presented_date)||""})]},`quote-${G}`))})]}),(!H||(!H.tasks||H.tasks.length===0)&&(!H.meetings||H.meetings.length===0)&&(!H.calls||H.calls.length===0)&&(!H.quotes||H.quotes.length===0)&&(!H.deals||H.deals.length===0)&&(!H.contacts||H.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsx("div",{className:"flex flex-col gap-4",children:n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Contact"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(At,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!u?.email){alert("No email address available");return}const $=encodeURIComponent(u.email),G=encodeURIComponent(""),K=encodeURIComponent(""),ne=`https://mail.google.com/mail/?view=cm&fs=1&to=${$}&su=${G}&body=${K}`;window.open(ne,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Zn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Contact"}}}),children:[n.jsx(Ct,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Contact"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Gt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]})})]})]})]})}):null,Je=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&n.jsx(Rt,{message:"Loading contacts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(On,{className:"mr-2 text-blue-600"})," Contacts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{fe(),se(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(dn,{className:"mr-2"})," Add Contact"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search contacts",value:z,onChange:$=>F($.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:D,onChange:$=>M($.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:he.map($=>n.jsx("option",{value:$.value,children:$.label},$.value??$.label))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),n.jsx("th",{className:"py-3 px-4",children:"Department"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Created"})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"Loading contacts..."})}):ae.length>0?ge.map($=>{const G=[{Icon:Zn,value:$.email,key:"email"},{Icon:At,value:$.work_phone,key:"work_phone"},{Icon:Yc,value:$.mobile_phone_1,key:"mobile_phone_1"},{Icon:Yc,value:$.mobile_phone_2,key:"mobile_phone_2"}].filter(K=>!!K.value);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>{Ie($),Le($.id)},children:[n.jsxs("td",{className:"py-3 px-4 align-top",children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:Vm($)||"--"}),n.jsx("div",{className:"text-xs text-gray-500",children:$.title||"No title"})]}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[n.jsx(Tx,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"break-words",children:$.account?.name||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:G.length>0?n.jsx("div",{className:"space-y-1 text-gray-700",children:G.map(({Icon:K,value:ne,key:J})=>{const Ce=pt.createElement(K,{className:"text-gray-500 flex-shrink-0"});return n.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[Ce,n.jsx("span",{children:ne})]},J)})}):n.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[n.jsx(Qt,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:$.department||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(Jt,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:$.assigned_contact?`${$.assigned_contact.first_name} ${$.assigned_contact.last_name}`:"Unassigned"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[n.jsx(Ct,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"text-xs",children:nl($.created_at)||"--"})]})})]},$.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"No contacts found."})})})]})}),n.jsx(en,{className:"mt-4",totalItems:ae.length,pageSize:re,currentPage:Y,onPrev:Be,onNext:qe,onPageSizeChange:ee,label:"contacts"})]}),be=p?n.jsx("div",{id:"modalBackdrop",onClick:Ye,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:$=>$.stopPropagation(),children:[n.jsx("button",{onClick:()=>{He(),se(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:v||T,children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:y?"Edit Contact":"Add New Contact"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:We,noValidate:!0,children:[n.jsx(Ec,{label:"First Name",name:"first_name",value:A.first_name,onChange:B,placeholder:"First name",required:!0,isSubmitted:ke}),n.jsx(Ec,{label:"Last Name",name:"last_name",value:A.last_name,onChange:B,placeholder:"Last name",required:!0,isSubmitted:ke}),n.jsx(EB,{label:"Account",value:A.account_id,onChange:$=>I(G=>({...G,account_id:$})),items:y?Te:l||[],getLabel:$=>$?.name??"",placeholder:"Search account...",disabled:v||(y?Te.length===0:l.length===0),required:!0,isSubmitted:ke}),n.jsx(EB,{label:"Assigned To",value:A.assigned_to,onChange:$=>I(G=>({...G,assigned_to:$})),items:c||[],getLabel:$=>`${$?.first_name??""} ${$?.last_name??""} (${$?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:ke,disabled:v||c.length===0}),n.jsx(Ec,{label:"Title",name:"title",value:A.title,onChange:B,placeholder:"Job title",disabled:v}),n.jsx(Ec,{label:"Department",name:"department",value:A.department,onChange:B,placeholder:"Department",disabled:v}),n.jsx(Ec,{label:"Email",name:"email",type:"email",value:A.email,onChange:B,placeholder:"example@email.com",required:!0,isSubmitted:ke}),n.jsx(Ec,{label:"Work Phone",name:"work_phone",value:A.work_phone,onChange:B,placeholder:"09xx xxx xxxx",disabled:v}),n.jsx(Ec,{label:"Mobile Phone 1",name:"mobile_phone_1",value:A.mobile_phone_1,onChange:B,placeholder:"09xx xxx xxxx",disabled:v}),n.jsx(Ec,{label:"Mobile Phone 2",name:"mobile_phone_2",value:A.mobile_phone_2,onChange:B,placeholder:"09xx xxx xxxx",disabled:v}),n.jsx(cWe,{label:"Notes",name:"notes",value:A.notes,onChange:B,placeholder:"Additional details...",rows:3,disabled:v,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{He(),se(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:v||T,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:v||T,children:v?"Saving...":y?"Update Contact":"Save Contact"})]})]})]})}):null,Ke=N?n.jsx(dWe,{open:!0,title:N.title,message:N.message,confirmLabel:N.confirmLabel,cancelLabel:N.cancelLabel,variant:N.variant,onConfirm:Re,onCancel:ct,loading:T}):null;return n.jsxs(n.Fragment,{children:[Je,Ee,be,Ke]})}function Ec({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,isSubmitted:c=!1,className:d=""}){const u=c&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${d}
        `})]})}function EB({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:o,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(oWe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:l,hasError:u})]})}function oWe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,hasError:o=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(v=>String(v.id)===String(t)),y=x?s(x):"",w=h.useMemo(()=>{const v=u.trim().toLowerCase();return(v?e.filter(N=>(s(N)||"").toLowerCase().includes(v)):e).slice(0,l)},[e,u,s,l]);return h.useEffect(()=>{const v=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:y,placeholder:r,onFocus:()=>!i&&d(!0),onChange:v=>{f(v.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${o?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:w.length>0?w.map(v=>{const C=String(v.id),N=s(v),S=String(t)===C;return n.jsx("button",{type:"button",onClick:()=>{a(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:N||"--"},C)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function cWe({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:l=!1,className:o=""}){return n.jsxs("div",{className:o,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function dWe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),n.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}const VA=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function $J({lead:e,onBack:t,fetchLeads:a,onEdit:s,onDelete:r,setSelectedLead:i,relatedActs:l}){const o=yt(),{leadID:c}=Io(),[d,u]=h.useState(e||null),[f,p]=h.useState("Overview"),[x,y]=h.useState(""),w=d?.status?.toUpperCase()==="QUALIFIED",[v,C]=h.useState(null),[N,S]=h.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[T,k]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[_,E]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),A=async()=>{try{if(e){u(e),y(e.status||"New");return}if(!c)return;const M=await ce.get(`/leads/get/${c}`);u(M.data),y(M.data.status||"New"),S({name:M.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:M.data.territory?.id||null,assigned_to:M.data.assigned_to?.id||null,created_by:M.data.creator?.id||null}),k({last_name:M.data.last_name||"",first_name:M.data.first_name||"",account_id:null,title:M.data.title||"",department:M.data.department||"",email:M.data.email||"",work_phone:M.data.work_phone||"",mobile_phone_1:M.data.mobile_phone_1||"",mobile_phone_2:M.data.mobile_phone_2||"",notes:"",assigned_to:M.data.assigned_to?.id||null,created_by:M.data.creator?.id||null}),E({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:M.data.assigned_to?.id||null,created_by:M.data.creator?.id||null})}catch(M){console.error(M)}};h.useEffect(()=>{e?(u(e),y(e.status||"New")):c&&A()},[c,e]);const I=async()=>{try{if(x==="Converted"&&d?.status?.toUpperCase()!=="QUALIFIED"){q.error("Lead must be Qualified before it can be converted.");return}const M=await ce.put(`/leads/${d.id}/update/status`,{status:x});q.success("Lead status updated successfully");const W={...d,status:M.data.status};u(W),i&&i(W),a&&a(),t&&t()}catch(M){console.error(M),q.error("Failed to update lead status")}},z=async M=>{const W={...N,assigned_to:M.assigned_to?.id,billing_address:M.address,shipping_address:M.address,created_by:M.creator?.id,industry:null,name:M.company_name,phone_number:M.work_phone,status:"Prospect",territory_id:M.territory?.id,website:""};console.log("Account data: ",W),console.log("Contact data: ",T),console.log("Deal data: ",_),console.log("Lead data: ",M);try{const R=(await ce.post("/accounts/convertedLead",W)).data.id,Q={...T,account_id:R,assigned_to:M.assigned_to?.id,created_by:M.creator?.id,department:M.department,email:M.email,first_name:M.first_name,last_name:M.last_name,mobile_phone_1:M.mobile_phone_1,mobile_phone_2:M.mobile_phone_2,notes:M.notes,title:M.title,work_phone:M.work_phone},oe=(await ce.post("/contacts/convertedLead",Q)).data.id,re=()=>{switch(_.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},ee=_.amount&&_.amount!==""?parseFloat(_.amount):0,H={..._,account_id:R,assigned_to:M.assigned_to?.id,created_by:M.creator?.id,primary_contact_id:oe,probability:re(),stage:"Prospecting"},ye=await ce.post("/deals/convertedLead",H),te=await ce.put(`/leads/convert/${M.id}`);i&&i(null),a(),q.success("Lead converted successfully!"),t()}catch(Z){console.error("Error during conversion:",Z);const R=Z.response?.data?.detail||Z.message||"Failed to convert lead. Please try again.";q.error(R)}},F=M=>{switch((M||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},D=M=>M.toString().toLowerCase().replace(/\b\w/g,W=>W.toUpperCase());return d?n.jsx(n.Fragment,{children:n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),n.jsx("button",{onClick:()=>{t?t():o(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Vn,{size:25})})]})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[d.first_name," ",d.last_name]}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${F(d.status)}`,children:D(d.status||"New")}),n.jsx("div",{className:"flex flex-col",children:n.jsx("button",{onClick:()=>z(d),disabled:!w,title:w?"Convert Lead":"Lead must be Qualified before converting",className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2
      ${w?"bg-green-600 hover:bg-green-700 text-white focus:ring-green-400":"bg-gray-200 text-gray-400 cursor-not-allowed"}
    `,children:"Convert"})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",onClick:()=>{s&&d&&s(d)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(oa,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",onClick:()=>{r&&d&&r(d)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(zt,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-4 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(M=>n.jsx("button",{onClick:()=>p(M),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${f===M?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:M},M))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[f==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Name:"}),n.jsxs("p",{children:[d.first_name," ",d.last_name||"N/A"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:d.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Job Title:"}),n.jsx("p",{children:d.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:d.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:d.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:d.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:d.assigned_to?`${d.assigned_to.first_name} ${d.assigned_to.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:d.creator?`${d.creator.first_name} ${d.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:d.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Source:"}),n.jsx("p",{children:d.source||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Address:"}),n.jsx("p",{children:d.address||"N/A"})]})]})}),f==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]})]}),f==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[l.tasks&&l.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(v==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Gt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",l.tasks.length,")"]})]}),v==="tasks"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),v==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:l.tasks.map((M,W)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>o("/group-manager/tasks",{state:{taskID:M.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Gt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:M.subject||M.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:M.description||"No description"}),M.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned:"," ",M.assigned_to.first_name," ",M.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:VA(M.due_date||M.created_at)})]},`task-${W}`))})]}),l.meetings&&l.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(v==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ct,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",l.meetings.length,")"]})]}),v==="meetings"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),v==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:l.meetings.map((M,W)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>o("/group-manager/meetings",{state:{meetingID:M.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Ct,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:M.subject||M.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:M.description||M.location||"No description"}),M.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",M.host.first_name," ",M.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:VA(M.start_time||M.created_at)})]},`meeting-${W}`))})]}),l.calls&&l.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(v==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(At,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",l.calls.length,")"]})]}),v==="calls"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(Mt,{className:"text-gray-500"})]}),v==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:l.calls.map((M,W)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>o("/group-manager/calls",{state:{callID:M.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(At,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:M.subject||M.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:M.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:VA(M.call_time||M.created_at)})]},`call-${W}`))})]}),(!l||(!l.tasks||l.tasks.length===0)&&(!l.meetings||l.meetings.length===0)&&(!l.calls||l.calls.length===0)&&(!l.quotes||l.quotes.length===0)&&(!l.deals||l.deals.length===0)&&(!l.contacts||l.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{d&&o("/group-manager/calls",{state:{openCallModal:!0,initialCallData:{subject:d.title?`Call regarding ${d.title}`:`Call with ${d.first_name} ${d.last_name}`,relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assigned_to:d.assigned_to?.id?String(d.assigned_to.id):"",direction:"Outgoing",status:"Planned"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(At,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const M=encodeURIComponent(d.email),W=encodeURIComponent(""),Z=encodeURIComponent(""),R=`mailto:${M}?subject=${W}&body=${Z}`;window.location.href=R},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Zn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{d&&o("/group-manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:d.title?`Meeting regarding ${d.title}`:`Meeting with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",status:"Planned"}}})},children:[n.jsx(Ct,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{d&&o("/group-manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:d.title?`Follow up on ${d.title}`:`Follow up with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Gt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:x,onChange:M=>y(M.target.value),children:[n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),d?.status?.toUpperCase()==="QUALIFIED"&&n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]}),n.jsx("button",{onClick:I,disabled:x===d.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${x===d.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const uWe=Uf.all(),qA=uWe.map((e,t)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${t}`})),mWe=e=>e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()),fWe=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},YA={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function hWe(){const e=yt(),{leadID:t}=Io();Ds();const[a,s]=h.useState(null),[r,i]=h.useState(!1),[l,o]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(!1),[y,w]=h.useState(""),[v,C]=h.useState("Filter by Status"),[N,S]=h.useState(1),[T,k]=h.useState(10),[_,E]=h.useState(YA),[A,I]=h.useState(!1),[z,F]=h.useState(null),[D,M]=h.useState(!1),[W,Z]=h.useState(null),[R,Q]=h.useState(!1),[Y,oe]=h.useState({});h.useRef(null);const[re,ee]=h.useState(!1),[H,ye]=h.useState(null),[te,ve]=h.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[je,Oe]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[$e,pe]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});h.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const Me=async()=>{try{const be=await ce.get("/leads/getUsers");o(be.data)}catch(be){console.error(`Error fetching users: ${be}`)}},Le=async()=>{x(!0);try{const be=await ce.get("/leads/admin/getLeads");f(be.data),console.log(be.data)}catch(be){console.error(`Error fetching leads: ${be}`)}finally{x(!1)}};h.useEffect(()=>{Me(),Le()},[]),h.useEffect(()=>{if(t&&u.length>0&&!r&&!A){const be=u.find(Ke=>Ke.id===Number(t));be&&s(be)}else!t&&!a&&s(null)},[t,u,r,A]),h.useEffect(()=>{if(H){const Ke=(K=>{if(!K)return{code:"+63",number:""};const ne=K.match(/^(\+\d+)\s(.+)$/);if(ne)return{code:ne[1],number:ne[2]};if(K.startsWith("+")){const J=K.match(/^(\+\d{1,3})/);if(J)return{code:J[1],number:K.substring(J[1].length).trim()}}return{code:"+63",number:K}})(H.work_phone),$=[];H.work_phone&&$.push(`Work: ${H.work_phone}`),H.mobile_phone_1&&$.push(`Mobile 1: ${H.mobile_phone_1}`),H.mobile_phone_2&&$.push(`Mobile 2: ${H.mobile_phone_2}`);const G=$.length>0?$.join(" | "):"";ve({name:H.company_name||"",website:"",countryCode:Ke.code,phone_number:Ke.number,combinedPhoneNumbers:G,billing_address:H.address||"",shipping_address:H.address||"",industry:"",status:"Prospect",territory_id:H.assigned_to?.territory?.id||null,assigned_to:H.assigned_to?.id||null,created_by:H.creator?.id||null}),Oe({last_name:H.last_name||"",first_name:H.first_name||"",account_id:null,title:H.title||"",department:H.department||"",email:H.email||"",work_phone:H.work_phone||"",mobile_phone_1:H.mobile_phone_1||"",mobile_phone_2:H.mobile_phone_2||"",notes:H.notes||"",assigned_to:H.assigned_to?.id||null,created_by:H.creator?.id||null}),pe({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:H.assigned_to?.id||null,created_by:H.creator?.id||null})}},[H]);const he=be=>w(be.target.value),ae=h.useMemo(()=>{const be=y.trim().toLowerCase(),Ke=v.trim().toUpperCase();return u.filter($=>{const G=[$?.first_name,$?.last_name,$?.company_name,$?.title,$?.email,$?.work_phone,$?.assigned_to?`${$.assigned_to.first_name} ${$.assigned_to.last_name}`:""],K=be===""||G.some(J=>J==null||J===""?!1:J.toString().toLowerCase().includes(be));let ne=!1;return Ke==="FILTER BY STATUS"?ne=($.status?$.status.toUpperCase():"")!=="CONVERTED":ne=($.status?$.status.toUpperCase():"")===Ke,K&&ne})},[u,y,v]),Ae=Math.max(1,Math.ceil(ae.length/T)||1);h.useEffect(()=>{S(1)},[y,v,T]),h.useEffect(()=>{S(be=>{const Ke=Math.max(1,Math.ceil(ae.length/T)||1);return be>Ke?Ke:be})},[ae.length,T]);const ge=h.useMemo(()=>{const be=(N-1)*T;return ae.slice(be,be+T)},[ae,N,T]),Be=()=>S(be=>Math.max(be-1,1)),qe=()=>S(be=>Math.min(be+1,Ae)),Te=h.useCallback(async be=>{try{const Ke=await ce.get(`/activities/lead/${be}`);oe(Ke.data&&typeof Ke.data=="object"?Ke.data:{})}catch(Ke){console.error(Ke),Ke.response?.status===404&&(console.warn("No activities found for this account."),oe({}))}},[]),He=be=>{s(be),Te(be.id)},Ye=()=>{s(null),t&&e("/admin/leads",{replace:!0})},B=()=>{i(!1),E(YA),I(!1),F(null),M(!1),d(null),sessionStorage.removeItem("editLeadData")},fe=be=>{be.target.id==="modalBackdrop"&&B()},Se=()=>{E(YA),I(!1),F(null),d(null),i(!0)},de=be=>{if(!be){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",be),console.log("Current state - leadID:",t,"selectedLead:",a,"showModal:",r);const Ke=J=>{if(!J)return{code:"+63",number:""};const Ce=J.match(/^(\+\d+)\s(.+)$/);return Ce?{code:Ce[1],number:Ce[2]}:{code:"+63",number:J}},$=Ke(be.work_phone),G=Ke(be.mobile_phone_1),K=Ke(be.mobile_phone_2);let ne="";if(be.assigned_to){ne=String(be.assigned_to.id);const J=l?.find(Ce=>Ce.id===be.assigned_to.id);d(J)}E({first_name:be.first_name||"",last_name:be.last_name||"",company_name:be.company_name||"",title:be.title||"",department:be.department||"",email:be.email||"",work_ccode:$.code,work_phone:$.number,m1_ccode:G.code,mobile_phone_1:G.number,m2_ccode:K.code,mobile_phone_2:K.number,address:be.address||"",notes:be.notes||"",source:be.source||"",territory_id:be.territory?.id||null,lead_owner:ne,status:be.status||"New"}),I(!0),F(be.id),a?(console.log("Coming from detail view - closing detail modal and showing edit form"),s(null),i(!0)):(console.log("Already in list view - showing modal"),i(!0))},ke=be=>{if(!be){console.error("handleDelete: lead is null or undefined");return}console.log("handleDelete called with lead:",be);const Ke=`${be.first_name} ${be.last_name}`||"this lead";Z({title:"Delete Lead",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:Ke}),"? This action cannot be undone."]}),confirmLabel:"Delete Lead",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:be.id,name:Ke}})},se=be=>{const{name:Ke,value:$}=be.target;if(E(G=>({...G,[Ke]:$})),Ke==="lead_owner"){const G=l.find(K=>K.id===parseInt($));d(G)}},[We,Re]=h.useState(!1),ct=be=>{if(be.preventDefault(),Re(!0),!_.last_name?.trim()){q.error("Last name is required.");return}if(!_.company_name?.trim()){q.error("Company is required.");return}if(!_.title?.trim()){q.error("Job title is required.");return}if(!_.email?.trim()){q.error("Email is required.");return}if(!_.email.includes("@")){q.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(_.email)){q.error("Please enter a valid email address with a dot in the domain.");return}if(!_.lead_owner){q.error("Please assign a lead owner.");return}const $={..._,territory_id:_.territory_id?parseInt(_.territory_id):null,lead_owner:parseInt(_.lead_owner),work_phone:`${_.work_ccode} ${_.work_phone}`,mobile_phone_1:`${_.m1_ccode} ${_.mobile_phone_1}`,mobile_phone_2:`${_.m2_ccode} ${_.mobile_phone_2}`},G=A&&z?"update":"create",K=`${_.first_name} ${_.last_name}`;Z({title:G==="create"?"Confirm New Lead":"Confirm Update",message:G==="create"?n.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",n.jsx("span",{className:"font-semibold",children:K}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:K}),"?"]}),confirmLabel:G==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:G,payload:$,targetId:z||null,name:K}})},Ie=async()=>{if(!W?.action){Z(null);return}const{action:be}=W,{type:Ke,payload:$,targetId:G,name:K,lead:ne}=be;console.log($),Q(!0);try{if(Ke==="create")M(!0),await ce.post("/leads/create",$),q.success(`Lead "${K}" created successfully.`),B(),await Le();else if(Ke==="update"){if(!G)throw new Error("Missing lead identifier for update.");M(!0);const J=await ce.put(`/leads/${G}`,$);q.success(`Lead "${K}" updated successfully.`),a&&a.id===G&&s(null),B(),await Le()}else if(Ke==="delete"){if(!G)throw new Error("Missing lead identifier for deletion.");await ce.delete(`/leads/${G}`),q.success(`Lead "${K}" deleted successfully.`),a?.id===G&&s(null),await Le()}}catch(J){console.error(J);const Ce=Ke==="create"?"Failed to create lead. Please review the details and try again.":Ke==="update"?"Failed to update lead. Please review the details and try again.":"Failed to delete lead. Please try again.",me=J.response?.data?.detail||Ce;q.error(me)}finally{(Ke==="create"||Ke==="update")&&M(!1),Ke!=="edit"&&(Q(!1),Z(null))}},ue=()=>{R||Z(null)},Ne=u.filter(be=>be.status==="New").length,Fe=u.filter(be=>be.status==="Contacted").length,Ze=u.filter(be=>be.status==="Qualified").length,st=u.filter(be=>be.status==="Converted").length,Ee=u.filter(be=>be.status==="Lost").length,Je=[{title:"New",value:Ne,icon:Wn,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:Fe,icon:At,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:Ze,icon:ba,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:st,icon:Ro,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:Ee,icon:Ps,color:"text-red-600",bgColor:"bg-red-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[p&&n.jsx(Rt,{message:"Loading leads..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Wn,{className:"mr-2 text-blue-600"}),"Leads"]}),n.jsxs("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:[n.jsxs("button",{onClick:()=>{q.info("Download functionality coming soon")},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx($o,{className:"mr-2"})," Download"]}),n.jsxs("button",{onClick:()=>{Se(),Re(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(dn,{className:"mr-2"})," Add Lead"]})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Je.map(be=>n.jsx(pWe,{...be},be.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search leads",value:y,onChange:he,className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:v,onChange:be=>C(be.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Name"}),n.jsx("th",{className:"py-3 px-4",children:"Company"}),n.jsx("th",{className:"py-3 px-4",children:"Job Title"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:ae.length>0?ge.map(be=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>He(be),children:[n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[be.first_name," ",be.last_name]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:be.company_name||"--"})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:be.title||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:be.email||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:be.assigned_to?`${be.assigned_to.first_name} ${be.assigned_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${fWe(be.status||"New")}`,children:mWe(be.status||"New")})})]},be.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No leads found."})})})]})}),n.jsx(en,{className:"mt-4",totalItems:ae.length,pageSize:T,currentPage:N,onPrev:Be,onNext:qe,onPageSizeChange:k,label:"leads"}),r&&n.jsx("div",{id:"modalBackdrop",onClick:fe,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:be=>be.stopPropagation(),children:[n.jsx("button",{onClick:()=>{B(),Re(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:A?"Edit Lead":"Add New Lead"}),n.jsxs("form",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),n.jsx("input",{type:"text",name:"first_name",value:_.first_name,onChange:se,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"Smith",name:"last_name",value:_.last_name,onChange:se,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                      ${We&&!_.last_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Company ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:_.company_name,onChange:se,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${We&&!_.company_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Job Title",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:_.title,onChange:se,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${We&&!_.title?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),n.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:_.department,onChange:se,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Email",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:_.email,onChange:se,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${We&&!_.email?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"work_ccode",value:_.work_ccode,onChange:se,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:qA.map(be=>n.jsx("option",{value:be.code,children:be.code},be.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:_.work_phone,onChange:se,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m1_ccode",value:_.m1_ccode,onChange:se,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:qA.map(be=>n.jsx("option",{value:be.code,children:be.code},be.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:_.mobile_phone_1,onChange:se,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m2_ccode",value:_.m2_ccode,onChange:se,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:qA.map(be=>n.jsx("option",{value:be.code,children:be.code},be.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:_.mobile_phone_2,onChange:se,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),n.jsx("input",{type:"text",name:"address",value:_.address,onChange:se,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:`w-full rounded-lg ${We&&!_.lead_owner?"border border-red-400":"border border-gray-300"}`,children:n.jsx(xWe,{items:Array.isArray(l)?l:[],value:_.lead_owner??"",placeholder:"Search a user...",getLabel:be=>`${be.first_name} ${be.last_name}`,onChange:be=>{const Ke=l.find(G=>String(G.id)===String(be));d(Ke);let $=null;Ke&&Ke.assigned_territory&&Ke.assigned_territory.length===1&&($=Ke.assigned_territory[0].id),E(G=>({...G,lead_owner:be,territory_id:$}))}})})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),n.jsxs("select",{name:"territory_id",value:_.territory_id||"",onChange:se,disabled:!c||!c.assigned_territory||c.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[n.jsx("option",{value:"",disabled:!0,children:c?c.assigned_territory&&c.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),c&&c.assigned_territory&&c.assigned_territory.map(be=>n.jsx("option",{value:be.id,children:be.name},be.id))]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),n.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:_.source,onChange:se,children:[n.jsx("option",{value:"",disabled:!0,children:"Select Source"}),n.jsx("option",{value:"Website",children:"Website"}),n.jsx("option",{value:"Referral",children:"Referral"}),n.jsx("option",{value:"Cold call",children:"Cold call"}),n.jsx("option",{value:"Event",children:"Event"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),n.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:_.notes,onChange:se,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("button",{type:"button",onClick:()=>{B(),Re(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:D||R,children:"Cancel"}),n.jsx("button",{type:"submit",onClick:ct,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:D||R,children:D||R?"Processing...":A?"Update Lead":"Save Lead"})]})]})]})}),W&&n.jsx(gWe,{open:!0,title:W.title,message:W.message,confirmLabel:W.confirmLabel,cancelLabel:W.cancelLabel,variant:W.variant,onConfirm:Ie,onCancel:ue,loading:R}),a&&!r&&!A&&n.jsx($J,{relatedActs:Y,lead:a,onBack:Ye,fetchLeads:Le,setSelectedLead:s,onEdit:de,onDelete:ke})]})}function gWe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),n.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}function pWe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function xWe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200}){const[o,c]=h.useState(!1),[d,u]=h.useState(""),f=h.useRef(null),p=e.find(w=>String(w.id)===String(t)),x=p?s(p):"",y=h.useMemo(()=>{const w=d.trim().toLowerCase();return(w?e.filter(C=>(s(C)||"").toLowerCase().includes(w)):e).slice(0,l)},[e,d,s,l]);return h.useEffect(()=>{const w=v=>{f.current&&!f.current.contains(v.target)&&c(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{o||u("")},[o]),n.jsxs("div",{ref:f,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:o?d:x,placeholder:r,onFocus:()=>!i&&c(!0),onChange:w=>{u(w.target.value),o||c(!0)},className:"w-full rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),o&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:y.length>0?y.map(w=>{const v=String(w.id),C=s(w),N=String(t)===v;return n.jsx("button",{type:"button",onClick:()=>{a(v),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${N?"bg-blue-50":""}`,children:C||"--"},v)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}const Cb={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},Va=({label:e,value:t,name:a,className:s=""})=>n.jsxs("div",{className:`flex flex-col ${s}`,children:[n.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),n.jsx("input",{type:"text",name:a,defaultValue:t,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),yWe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(Va,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),n.jsx(Va,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),n.jsx(Va,{label:"Industry",name:"industry",value:e.industry})]}),n.jsx(Va,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),n.jsx(Va,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),bWe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Va,{label:"First Name",name:"firstName",value:e.firstName}),n.jsx(Va,{label:"Last Name",name:"lastName",value:e.lastName}),n.jsx(Va,{label:"Department",name:"department",value:e.department}),n.jsx(Va,{label:"Title",name:"title",value:e.title}),n.jsx(Va,{label:"Work Phone",name:"workPhone",value:e.workPhone}),n.jsx(Va,{label:"Email",name:"email",value:e.email}),n.jsx(Va,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),n.jsx(Va,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),vWe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Va,{label:"Deal Name",name:"dealName",value:e.dealName}),n.jsxs("div",{className:"flex",children:[n.jsx(Va,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),n.jsx("div",{className:"flex flex-col justify-end ml-1",children:n.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),n.jsx(Va,{label:"Stage",name:"stage",value:e.stage}),n.jsx(Va,{label:"Territory",name:"territory",value:e.territory})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Va,{label:"Description",name:"description",value:e.description}),n.jsx(Va,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function wWe({isOpen:e,onClose:t}){const[a,s]=h.useState(1),r=3;if(!e)return null;const i=()=>{a<r?s(a+1):(t(),s(1))},l=()=>{a>1&&s(a-1)},o=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],c=()=>{switch(a){case 1:return n.jsx(yWe,{data:Cb});case 2:return n.jsx(bWe,{data:Cb});case 3:return n.jsx(vWe,{data:Cb});default:return null}};return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:Cb.accountName})]}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:n.jsx(qN,{className:"w-6 h-6"})})]}),n.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:o.map(d=>n.jsx("button",{onClick:()=>s(d.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${a===d.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:d.name},d.id))}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c()}),n.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[a>1&&n.jsx("button",{onClick:l,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),a<r?n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}const NWe=10;function jWe(){h.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const e=yt(),t=Yt(),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Stage"),[l,o]=h.useState("Filter by Owner"),[c,d]=h.useState(null),[u,f]=h.useState("Overview"),[p,x]=h.useState(!1),[y,w]=h.useState(null),[v,C]=h.useState(!1),[N,S]=h.useState(1),[T,k]=h.useState(10),[_,E]=h.useState(!1),[A,I]=h.useState(null),[z,F]=h.useState(!1),[D,M]=h.useState(!1),[W,Z]=h.useState(null),[R,Q]=h.useState([]),[Y,oe]=h.useState([]),[re,ee]=h.useState([]),[H,ye]=h.useState({}),[te,ve]=h.useState(null);h.useEffect(()=>{const G=t.state,K=G?.dealID;if(K&&!G?.openDealModal){ve(K),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(te&&y?.length>0&&!v){const G=y.find(K=>K.id===te);G?d(G):q.error("Deal not found."),ve(null)}},[te,y,v]);const[je,Oe]=h.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),[$e,pe]=h.useState(null),[Me,Le]=h.useState(null),he={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST","Closed Cancelled Stage":"CLOSED_CANCELLED"},ae=G=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost",CLOSED_CANCELLED:"Closed Cancelled"})[G]||G||"--",Ae=G=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700",CLOSED_CANCELLED:"bg-red-100 text-red-700"})[G]||"bg-gray-100 text-gray-700",ge=h.useCallback(async G=>{try{const K=await ce.get(`/activities/deal/${G}`);ye(K.data&&typeof K.data=="object"?K.data:{})}catch(K){console.error(K),K.response?.status===404&&(console.warn("No activities found for this account."),ye({}))}},[]),Be=h.useMemo(()=>{const G=a.trim().toLowerCase(),K=r.trim(),ne=l.trim();return(y??[]).filter(J=>{const Ce=[J?.name,J?.description,J?.account?.name,J?.contact?.first_name,J?.contact?.last_name,J?.assigned_deals?.first_name,J?.assigned_deals?.last_name],me=G===""||Ce.some(Ue=>Ue==null||Ue===""?!1:Ue.toString().toLowerCase().includes(G)),V=K==="Filter by Stage"||K===""||J.stage===he[K]||J.stage===K,_e=ne==="Filter by Owner"||ne===""||`${J.assigned_deals?.first_name||""} ${J.assigned_deals?.last_name||""}`.trim().toLowerCase()===ne.toLowerCase();return me&&V&&_e})},[y,a,r,l]),qe=Math.max(1,Math.ceil(Be.length/NWe)||1);h.useEffect(()=>{S(1)},[a,r,l]),h.useEffect(()=>{S(G=>{const K=Math.max(1,Math.ceil(Be.length/T)||1);return G>K?K:G})},[Be.length,T]);const Te=h.useMemo(()=>{const G=(N-1)*T;return Be.slice(G,G+T)},[Be,N,T]),He=()=>S(G=>Math.max(G-1,1)),Ye=()=>S(G=>Math.min(G+1,qe)),B=()=>{Oe({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),M(!1),Z(null),x(!0)},fe=async()=>{C(!0);try{const G=await ce.get("/deals/admin/fetch-all"),ne=[...Array.isArray(G.data)?G.data:[]].sort((J,Ce)=>{const me=J?.created_at?new Date(J.created_at).getTime():0;return(Ce?.created_at?new Date(Ce.created_at).getTime():0)-me});w(ne)}catch(G){G.response&&G.response.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch deals. Please try again later."),console.error(G)}finally{C(!1)}},Se=async()=>{try{const G=await ce.get("/accounts/admin/fetch-all");Q(Array.isArray(G.data)?G.data:[])}catch(G){console.error(G),G.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},de=async()=>{try{const G=await ce.get("/contacts/admin/fetch-all");oe(Array.isArray(G.data)?G.data:[])}catch(G){console.error(G),G.response?.status===403&&q.warn("Unable to load contacts (permission denied).")}},ke=async()=>{try{const G=await ce.get("/users/all");ee(Array.isArray(G.data)?G.data:[])}catch(G){console.error(G),G.response?.status===403&&q.warn("Unable to load users (permission denied).")}};h.useEffect(()=>{fe(),Se(),de(),ke()},[]);const se=async G=>{G&&(Oe({id:G.id||null,name:G.name||"",account_id:G.account_id?.toString()||"",primary_contact_id:G.primary_contact_id?.toString()||"",stage:G.stage||"PROPOSAL",amount:G.amount?.toString()||"",close_date:G.close_date?new Date(G.close_date).toISOString().split("T")[0]:"",assigned_to:G.assigned_to?.toString()||"",currency:G.currency||"PHP",description:G.description||""}),pe(G.account||null),Le(G.contact||null),M(!0),Z(G.id),d(null),x(!0))},We=async(G=!1)=>{try{const K=await ce.get("/deals/admin/fetch-all"),J=[...Array.isArray(K.data)?K.data:[]].sort((Ce,me)=>{const V=Ce?.created_at?new Date(Ce.created_at).getTime():0;return(me?.created_at?new Date(me.created_at).getTime():0)-V});if(w(J),!G&&c&&c.id){const Ce=J.find(me=>me.id===c.id);Ce&&d({...Ce})}}catch(K){console.error("Failed to refresh deal data:",K),await fe()}},Re=G=>{const K=G.name.trim();if(!K){q.error("Deal name is required.");return}if(!G.account_id){q.error("Account is required.");return}const ne=D&&W?"update":"create",J=K;I({title:ne==="create"?"Confirm New Deal":"Confirm Update",message:ne==="create"?n.jsxs("span",{children:["Are you sure you want to create"," ",n.jsx("span",{className:"font-semibold",children:J}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:J}),"?"]}),confirmLabel:ne==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:ne,formData:G,targetId:W||null,name:J}})},ct=G=>{if(!G)return;const K=G.name||"this deal";I({title:"Delete Deal",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:K}),"? This action cannot be undone."]}),confirmLabel:"Delete Deal",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:G.id,name:K}})},Ie=async()=>{if(!A?.action){I(null);return}const{action:G}=A,{type:K,formData:ne,targetId:J,name:Ce}=G;F(!0);try{if(K==="create"){E(!0);const me={name:ne.name.trim(),account_id:parseInt(ne.account_id),primary_contact_id:ne.primary_contact_id?parseInt(ne.primary_contact_id):null,stage:ne.stage,amount:ne.amount?parseFloat(ne.amount):null,currency:ne.currency||"PHP",close_date:ne.close_date||null,description:ne.description||null,assigned_to:ne.assigned_to?parseInt(ne.assigned_to):null};await ce.post("/deals/admin/create",me),q.success(`Deal "${Ce}" created successfully.`),x(!1),await fe()}else if(K==="update"){if(!J)throw new Error("Missing deal identifier for update.");E(!0);const me={};ne.name!==void 0&&(me.name=ne.name.trim()),ne.account_id!==void 0&&ne.account_id!==""&&(me.account_id=parseInt(ne.account_id)),ne.primary_contact_id!==void 0&&(me.primary_contact_id=ne.primary_contact_id?parseInt(ne.primary_contact_id):null),ne.stage!==void 0&&(me.stage=ne.stage),ne.amount!==void 0&&ne.amount!==""&&(me.amount=parseFloat(ne.amount)),ne.currency!==void 0&&(me.currency=ne.currency),ne.close_date!==void 0&&(me.close_date=ne.close_date||null),ne.description!==void 0&&(me.description=ne.description||null),ne.assigned_to!==void 0&&(me.assigned_to=ne.assigned_to?parseInt(ne.assigned_to):null),await ce.put(`/deals/admin/${J}`,me),q.success(`Deal "${Ce}" updated successfully.`),x(!1),await fe()}else if(K==="delete"){if(!J)throw new Error("Missing deal identifier for deletion.");await ce.delete(`/deals/admin/${J}`),q.success(`Deal "${Ce}" deleted successfully.`),c?.id===J&&d(null),await fe()}}catch(me){console.error(me);const V=K==="create"?"Failed to create deal. Please review the details and try again.":K==="update"?"Failed to update deal. Please review the details and try again.":"Failed to delete deal. Please try again.",_e=me.response?.data?.detail||V;q.error(_e)}finally{(K==="create"||K==="update")&&E(!1),F(!1),I(null)}},ue=()=>{z||I(null)},Ne=()=>{x(!1),Oe({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),pe(null),Le(null),M(!1),Z(null),E(!1)},Fe=(y??[]).filter(G=>G.stage==="PROSPECTING").length,Ze=(y??[]).filter(G=>G.stage==="QUALIFICATION").length,st=(y??[]).filter(G=>G.stage==="PROPOSAL").length,Ee=(y??[]).filter(G=>G.stage==="NEGOTIATION").length,Je=(y??[]).filter(G=>G.stage==="CLOSED_WON").length,be=(y??[]).filter(G=>G.stage==="CLOSED_LOST").length,Ke=(y??[]).filter(G=>G.stage==="CLOSED_CANCELLED").length,$=[{title:"Prospecting",value:Fe,icon:$w,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:Ze,icon:ia,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:st,icon:Qt,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:Ee,icon:nu,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:Je,icon:ba,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:be,icon:Ps,color:"text-red-600",bgColor:"bg-red-100"},{title:"Closed Cancelled",value:Ke,icon:Ps,color:"text-gray-600",bgColor:"bg-gray-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[v&&n.jsx(Rt,{message:"Loading deals..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Qt,{className:"mr-2 text-blue-600"}),"Deals"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:B,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(dn,{className:"mr-2"})," Add Deal"]})})]}),n.jsx("div",{className:"grid grid-cols-1 p-2 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden",children:$.map(G=>n.jsx(SWe,{...G},G.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search deals",value:a,onChange:G=>s(G.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[n.jsxs("select",{value:r,onChange:G=>i(G.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),n.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),n.jsx("option",{value:"Qualification Stage",children:"Qualification"}),n.jsx("option",{value:"Proposal Stage",children:"Proposal"}),n.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),n.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),n.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"}),n.jsx("option",{value:"Closed Cancelled Stage",children:"Closed Cancelled"})]}),n.jsxs("select",{value:l,onChange:G=>o(G.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((y??[]).map(G=>`${G.assigned_deals?.first_name} ${G.assigned_deals?.last_name}`))].map((G,K)=>n.jsx("option",{value:G,children:G},K))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Stage"}),n.jsx("th",{className:"py-3 px-4",children:"Value"}),n.jsx("th",{className:"py-3 px-4",children:"Close Date"}),n.jsx("th",{className:"py-3 px-4",children:"Owner"})]})}),n.jsx("tbody",{children:Be.length>0?Te.map(G=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{d({...G}),ge(G.id)},children:[n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:G.deal_id?G.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:G.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:G.description||"--"})]})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:G.account?.name||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:G.contact?.first_name&&G.contact?.last_name?`${G.contact.first_name} ${G.contact.last_name}`:G.contact?.first_name||G.contact?.last_name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Ae(G.stage)}`,children:ae(G.stage)})}),n.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",G.amount?.toLocaleString()||"0"]}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:G.close_date||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:G.assigned_deals?.first_name&&G.assigned_deals?.last_name?`${G.assigned_deals.first_name} ${G.assigned_deals.last_name}`:G.assigned_deals?.first_name||G.assigned_deals?.last_name||"--"})]},G.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No deals found."})})})]})}),n.jsx(en,{className:"mt-4",totalItems:Be.length,pageSize:T,currentPage:N,onPrev:He,onNext:Ye,onPageSizeChange:k,label:"deals"}),p&&n.jsx(_We,{onClose:Ne,formData:je,setFormData:Oe,isEditing:D,onSubmit:Re,isSubmitting:_||z,accounts:R,contacts:Y,users:re,currentAccount:$e,currentContact:Me}),c&&n.jsx(Jx,{relatedActs:H,selectedDeal:c,show:!!c,onClose:()=>d(null),activeTab:u,setActiveTab:f,onEdit:se,onDelete:ct,onStatusUpdate:We}),A&&n.jsx(CWe,{open:!0,title:A.title,message:A.message,confirmLabel:A.confirmLabel,cancelLabel:A.cancelLabel,variant:A.variant,onConfirm:Ie,onCancel:ue,loading:z})]})}function CWe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),n.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}function SWe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function _We({onClose:e,formData:t,setFormData:a,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,accounts:l=[],contacts:o=[],users:c=[],currentAccount:d=null,currentContact:u=null}){const[f,p]=h.useState(!1),x=v=>{if(v.preventDefault(),p(!0),!t.name?.trim()){q.error("Deal name is required.");return}const C=Number(t.amount);if(!t.amount||isNaN(C)||C<=0){q.error("Amount must be a number greater than 0.");return}if(!t.account_id){q.error("Please select an account.");return}if(!t.primary_contact_id){q.error("Please select a primary contact.");return}if(!t.assigned_to){q.error("Please assign this deal to a user.");return}r?.(t)},y=v=>{v.target.id==="modalBackdrop"&&e()},w=h.useMemo(()=>{const v=String(t.account_id||"").trim(),C=Array.isArray(o)?o:[];return v?C.filter(N=>{const T=[N?.account_id,N?.accountId,N?.account?.id,N?.account?.account_id,N?.account?.accountId].find(k=>k!=null&&String(k).trim()!=="");return T?String(T)===v:!1}):C},[o,t.account_id]);return h.useEffect(()=>{const v=String(t.account_id||"").trim(),C=String(t.primary_contact_id||"").trim();if(!C||!v)return;w.some(S=>String(S?.id)===C)||a(S=>({...S,primary_contact_id:""}))},[t.account_id,t.primary_contact_id,w,a]),n.jsx("div",{id:"modalBackdrop",onClick:y,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:v=>v.stopPropagation(),children:[n.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Deal":"Create Deal"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:x,noValidate:!0,children:[n.jsx(QA,{label:"Deal Name",name:"name",value:t.name,onChange:v=>a({...t,name:v.target.value}),placeholder:"Enter deal name",required:!0,isSubmitted:f,className:"md:col-span-2"}),n.jsx(KA,{label:"Account",value:t.account_id||"",onChange:v=>a({...t,account_id:v}),items:l||[],getLabel:v=>v?.name??"",placeholder:"Search account...",disabled:i,currentItem:d,required:!0,isSubmitted:f}),n.jsx(KA,{label:"Primary Contact",value:t.primary_contact_id||"",onChange:v=>a({...t,primary_contact_id:v}),items:w||[],getLabel:v=>`${v?.first_name??""} ${v?.last_name??""}`.trim()||v?.email||"",placeholder:"Search contact...",disabled:i,currentItem:u,required:!0,isSubmitted:f}),n.jsx(TB,{label:"Stage",name:"stage",value:t.stage,onChange:v=>a({...t,stage:v.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}],disabled:i}),n.jsx(QA,{label:"Amount",name:"amount",type:"number",step:"0.01",value:t.amount,onChange:v=>a({...t,amount:v.target.value}),placeholder:"0",required:!0,isSubmitted:f}),n.jsx(TB,{label:"Currency",name:"currency",value:t.currency||"PHP",onChange:v=>a({...t,currency:v.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),n.jsx(QA,{label:"Close Date",name:"close_date",type:"date",value:t.close_date||"",onChange:v=>a({...t,close_date:v.target.value}),disabled:i}),n.jsx(KA,{label:"Assign To",value:t.assigned_to||"",onChange:v=>a({...t,assigned_to:v}),items:c||[],getLabel:v=>`${v?.first_name??""} ${v?.last_name??""}`.trim()||v?.email||"",placeholder:"Search assignee...",disabled:i,required:!0,isSubmitted:f,className:"md:col-span-2"}),n.jsx(EWe,{label:"Description",name:"description",value:t.description,onChange:v=>a({...t,description:v.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Deal":"Save Deal"})]})]})]})})}function QA({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function TB({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:l=!1,className:o=""}){return n.jsxs("div",{className:o,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))})]})}function KA({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",currentItem:c=null,required:d=!1,isSubmitted:u=!1}){const f=u&&d&&!a;return n.jsxs("div",{className:o,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",d&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(AWe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:l,currentItem:c,hasError:f})]})}function AWe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,currentItem:o=null,hasError:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),w=e.find(N=>String(N.id)===String(t))||o,v=w?s(w):"",C=h.useMemo(()=>{const N=f.trim().toLowerCase();return(N?e.filter(T=>(s(T)||"").toLowerCase().includes(N)):e).slice(0,l)},[e,f,s,l]);return h.useEffect(()=>{const N=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:v,placeholder:r,onFocus:()=>!i&&u(!0),onChange:N=>{p(N.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${c?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:C.length>0?C.map(N=>{const S=String(N.id),T=s(N),k=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:T||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function EWe({label:e,name:t,value:a,onChange:s,placeholder:r,required:i=!1,disabled:l=!1,className:o="",rows:c=3}){return n.jsxs("div",{className:o,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,required:i,disabled:l,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function TWe({selectedDeal:e,show:t,onClose:a,activeTab:s,setActiveTab:r,onEdit:i,onDelete:l,onStatusUpdate:o}){const c=yt(),[d]=Ds(),u=d.get("id"),[f,p]=h.useState(e||null),[x,y]=h.useState(s||"Overview"),{user:w}=Kt();h.useEffect(()=>{console.log("AdminDealsInformation mounted",f),console.log("User:",w)},[f,w]);const v=s!==void 0?s:x;if(h.useEffect(()=>{(async()=>{if(u&&!e)try{console.log("Fetching deal from route, ID:",u);const k=(await ce.get("/deals/admin/fetch-all")).data||[];console.log("All deals fetched:",k.length);const _=k.find(E=>E.id===parseInt(u));if(console.log("Found deal:",_),_){console.log("Deal data structure:",{id:_.id,name:_.name,amount:_.amount,stage:_.stage,account:_.account,contact:_.contact,assigned_deals:_.assigned_deals,deal_creator:_.deal_creator,allKeys:Object.keys(_)});const E={..._,amount:typeof _.amount=="number"?_.amount:parseFloat(_.amount||0),probability:_.probability||0};p(E)}else console.warn("Deal not found with ID:",u)}catch(T){console.error("Error fetching deal:",T)}})()},[u,e]),!f&&!u||u&&!f)return null;const C=S=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[S]||"bg-gray-100 text-gray-700";function N(S){return S?new Date(S).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),n.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:n.jsx("button",{onClick:()=>{a?a():c(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Vt,{size:25})})})]})}),n.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:n.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[n.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:f.name}),n.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${C(f.stage)}`,children:f.stage})]}),n.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",N(f.created_at)]})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2",children:[n.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[" ",f.amount?f.amount.toLocaleString():"0"]}),n.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${f.probability}%`}})}),n.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",f.probability,"% Complete "]}),(f.created_by===w?.id||f.assigned_to===w?.id)&&n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[n.jsxs("button",{type:"button",onClick:()=>{i&&i(f)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(oa,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),n.jsxs("button",{type:"button",onClick:()=>{l&&l(f)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(zt,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(S=>n.jsx("button",{onClick:()=>{r?r(S):y(S)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${v===S?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:S},S))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[v==="Overview"&&n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Description:"})," ",f.description]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Expected Close Date:"})," ",f.close_date]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("div",{className:"mt-4 py-3 w-full",children:[n.jsxs("div",{className:"relative flex flex-col w-full",children:[n.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const S=(f?.stage||"PROSPECTING").toUpperCase(),k=(E=>E==="PROSPECTING"?0:E==="QUALIFICATION"?1:E==="PROPOSAL"?2:E==="NEGOTIATION"?3:E==="CLOSED_WON"||E==="CLOSED_LOST"?4:-1)(S);return[0,1,2,3,4].map(E=>k===E?"orange":k>E?"green":"gray").map((E,A)=>n.jsxs(pt.Fragment,{children:[n.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${E==="green"?"bg-green-500 border-green-500":E==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),A<4&&n.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},A))})()}),n.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((S,T)=>n.jsx("span",{className:"text-center flex-1 break-words",children:S},T))})]}),n.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:f.stage})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),n.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Account:"})," ",f.account?.name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Primary Contact:"})," ",f.contact?.first_name," ",f.contact?.last_name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Phone:"})," ",f.contact?.work_phone]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",f.contact?.email]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Assigned To:"})," ",f.assigned_deals?.first_name," ",f.assigned_deals?.last_name]})]})]})]}),v==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:f.description||"No notes available."})]})]}),v==="Activities"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:At,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:Ct,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((S,T)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[n.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-gray-600 mt-1",children:n.jsx(S.icon,{size:24})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-gray-900 break-words",children:S.title}),n.jsx("p",{className:"text-sm text-gray-500 break-words",children:S.desc}),n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),n.jsx("p",{className:"text-sm text-gray-700 break-words",children:S.user})]})]})]}),n.jsx("p",{className:"text-sm text-gray-500 break-words",children:S.date})]},T))]}),v==="Edit"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),n.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:f.name})]}),n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),n.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:f.description})]}),n.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),n.jsx("div",{className:"w-full lg:w-auto",children:n.jsx(Wj,{selectedDeal:f,onStatusUpdate:o,onClose:a})})]})]})]})})}const XA=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],ZA={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:"",subtotal:0,tax_rate:0,tax_amount:0,discount_type:"",discount_value:0,discount_amount:0,currency:"PHP",items:[]},ki=e=>{if(!e)return"Draft";const t=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[t]||"Draft"},JA=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",kWe=e=>{switch(ki(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},LWe=e=>{switch(ki(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},Sb=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",jg=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",PWe=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const t=new Date(e);if(isNaN(t.getTime()))return"";const a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`}catch{return""}},eE=(e,t)=>{if(!e||t==null||t==="")return"";const a=Number(t);if(Number.isNaN(a))return"";const s=new Date(e);return isNaN(s.getTime())?"":(s.setDate(s.getDate()+a),s.toISOString().slice(0,10))},kB=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},LB=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},Nw=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},DWe=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const s of e){const r=localStorage.getItem(s);if(r)try{const i=JSON.parse(r),l=Nw(i);if(l)return l}catch{}}const t=localStorage.getItem("user_id"),a=Nw(t);return a||null},OWe=e=>{if(!e)return"";const a=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""},MWe=e=>{if(!e)return"";const a=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""};function IWe(){const e=yt(),t=Yt(),{user:a}=Kt(),s=a?.company?.currency||"";h.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[r,i]=h.useState([]),[l,o]=h.useState(!1),[c,d]=h.useState([]),[u,f]=h.useState([]),[p,x]=h.useState([]),[y,w]=h.useState([]),[v,C]=h.useState(null),[N,S]=h.useState(null),[T,k]=h.useState(!1),[_,E]=h.useState(!1),[A,I]=h.useState(!1),[z,F]=h.useState(null),[D,M]=h.useState(!1),[W,Z]=h.useState(null),[R,Q]=h.useState(ZA),[Y,oe]=h.useState(""),[re,ee]=h.useState("Filter by Status"),[H,ye]=h.useState(null),[te,ve]=h.useState(1),[je,Oe]=h.useState(10),[$e,pe]=h.useState("Overview"),[Me,Le]=h.useState("Draft"),[he,ae]=h.useState([]),[Ae,ge]=h.useState(null);h.useEffect(()=>{const U=t.state?.quoteID;if(U){ge(U),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(Ae&&r.length>0&&!l){const L=r.find(U=>U.id===Ae);L?S(L):q.error("Quote not found."),ge(null)}},[Ae,p,l]),h.useEffect(()=>{let L=!0;return(async()=>{const xe=DWe();if(xe&&L){C(xe);return}try{const De=await ce.get("/auth/me"),ie=Nw(De?.data);if(ie&&L){C(ie);return}}catch{}try{const De=await ce.get("/users/me"),ie=Nw(De?.data);if(ie&&L){C(ie);return}}catch{}L&&C(null)})(),()=>{L=!1}},[]);const Be=h.useCallback(L=>L&&u.find(xe=>String(xe.id)===String(L))?.name||"",[u]),qe=h.useCallback(L=>{if(!L)return"";const U=p.find(xe=>String(xe.id)===String(L));return U?`${U.first_name} ${U.last_name}`.trim():""},[p]),Te=h.useCallback(L=>{if(!L)return"--";const U=c.find(xe=>String(xe.id)===String(L));return U?.deal_name||U?.name||`Deal #${kB(L)}`},[c]),He=h.useCallback(L=>{const U=c.find(ie=>String(ie.id)===String(L)),xe=OWe(U);let De=MWe(U);if(!De&&xe){const ie=p.filter(Pe=>String(Pe.account_id||"")===String(xe));if(ie.length>0){const Pe=[...ie].sort((Qe,vt)=>{const ht=`${Qe.first_name||""} ${Qe.last_name||""}`.trim().toLowerCase(),Ut=`${vt.first_name||""} ${vt.last_name||""}`.trim().toLowerCase();return ht.localeCompare(Ut)});De=String(Pe[0].id)}}if(xe&&De){const ie=p.find(Pe=>String(Pe.id)===String(De));ie?.account_id&&String(ie.account_id)!==String(xe)&&(De="")}return{accountId:xe||"",contactId:De||""}},[c,p]),Ye=h.useCallback(L=>{if(!L)return"--";if(L.deal?.deal_name)return L.deal.deal_name;if(L.deal?.name)return L.deal.name;const U=L.deal_id||L.deal?.id;return U?Te(U):"--"},[Te]),B=h.useCallback(L=>{if(!L)return"--";if(L.account?.name)return L.account.name;let U=L.account_id||L.account?.id;if(!U){const xe=L.deal_id||L.deal?.id;xe&&(U=He(xe).accountId)}return U?Be(U)||`Account #${U}`:"--"},[He,Be]),fe=h.useCallback(L=>{if(!L)return"--";if(L.contact?.first_name||L.contact?.last_name)return`${L.contact?.first_name||""} ${L.contact?.last_name||""}`.trim()||"--";let U=L.contact_id||L.contact?.id;if(!U){const De=L.deal_id||L.deal?.id;De&&(U=He(De).contactId)}return(U?qe(U):"")||(U?`Contact #${U}`:"--")},[He,qe]),Se=h.useCallback(async(L=null)=>{o(!0);try{const U=await ce.get("/quotes/admin/fetch-all"),De=[...Array.isArray(U.data)?U.data:[]].sort((ie,Pe)=>{const Qe=ie?.created_at||ie?.updated_at||0,vt=Pe?.created_at||Pe?.updated_at||0;return new Date(vt)-new Date(Qe)});if(i(De),L){const ie=De.find(Pe=>Pe.id===L);S(ie||null)}}catch(U){console.error(U),i([]),U.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch quotes. Please try again later.")}finally{o(!1)}},[]),de=h.useCallback(async()=>{try{const L=await ce.get("/deals/admin/fetch-all");d(Array.isArray(L.data)?L.data:[])}catch(L){console.error(L),L.response?.status===403&&q.warn("Unable to load deals (permission denied).")}},[]),ke=h.useCallback(async()=>{try{const L=await ce.get("/accounts/admin/fetch-all");f(Array.isArray(L.data)?L.data:[])}catch(L){console.error(L),L.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},[]),se=h.useCallback(async()=>{try{const L=await ce.get("/contacts/admin/fetch-all");x(Array.isArray(L.data)?L.data:[])}catch(L){console.error(L),L.response?.status===403&&q.warn("Unable to load contacts (permission denied).")}},[]),We=h.useCallback(async()=>{try{const L=await ce.get("/users/all");w(Array.isArray(L.data)?L.data:[])}catch(L){console.error(L),L.response?.status===403&&q.warn("Unable to load users (permission denied).")}},[]);h.useEffect(()=>{Se(),de(),ke(),se(),We()},[Se,de,ke,se,We]);const Re=h.useMemo(()=>{const L=Y.trim().toLowerCase(),U=re.trim();return r.filter(xe=>{const De=Ye(xe),ie=B(xe),Pe=fe(xe),Qe=eE(xe.presented_date,xe.validity_days),vt=[xe.quote_id,De,ie,Pe,xe.total_amount?.toString(),xe.validity_days?.toString(),xe.presented_date?jg(xe.presented_date):"",Qe?jg(Qe):"",xe.assigned_user?.first_name,xe.assigned_user?.last_name,xe.creator?.first_name,xe.creator?.last_name,xe.status,xe.notes,Sb(xe.created_at),Sb(xe.updated_at)],ht=L===""||vt.some(wn=>wn==null?!1:wn.toString().toLowerCase().includes(L)),Ut=U==="Filter by Status"||ki(xe.status)===U;return ht&&Ut})},[r,Y,re,Ye,B,fe]),ct=Math.max(1,Math.ceil(Re.length/je)||1);h.useEffect(()=>ve(1),[Y,re]),h.useEffect(()=>{ve(L=>{const U=Math.max(1,Math.ceil(Re.length/je)||1);return L>U?U:L})},[Re.length,je]);const Ie=h.useMemo(()=>{const L=(te-1)*je;return Re.slice(L,L+je)},[Re,te,je]),ue=()=>ve(L=>Math.max(L-1,1)),Ne=()=>ve(L=>Math.min(L+1,ct)),Fe=L=>{S(L),pe("Overview"),Le(ki(L?.status)||"Draft")},Ze=()=>{S(null),pe("Overview")},st=L=>{L.target.id==="quoteModalBackdrop"&&!D&&Ze()},Ee=h.useCallback(()=>{k(!1),E(!1),Z(null),Q(ZA),I(!1)},[]),Je=L=>{L.target.id==="modalBackdrop"&&!A&&!D&&Ee()},be=L=>{const{name:U,value:xe}=L.target;if(U==="deal_id"){const{accountId:De,contactId:ie}=He(xe);Q(Pe=>({...Pe,deal_id:xe,account_id:De,contact_id:ie}));return}Q(De=>({...De,[U]:xe}))},Ke=()=>{Q(ZA),E(!1),Z(null),k(!0)},$=L=>{if(!L)return;S(null);const U=L.deal?.id?String(L.deal.id):L.deal_id?String(L.deal_id):"",xe=U?He(U):{accountId:"",contactId:""},De=L.account?.id?String(L.account.id):L.account_id?String(L.account_id):xe.accountId,ie=L.contact?.id?String(L.contact.id):L.contact_id?String(L.contact_id):xe.contactId,Pe=L.assigned_user?.id?String(L.assigned_user.id):L.assigned_to?String(L.assigned_to):"";Q({deal_id:U,account_id:De||"",contact_id:ie||"",total_amount:L.total_amount?.toString()||"",presented_date:PWe(L.presented_date),validity_days:L.validity_days!==null&&L.validity_days!==void 0?String(L.validity_days):"",status:ki(L.status)||"Draft",assigned_to:Pe,notes:L.notes||"",subtotal:parseFloat(L.subtotal)||0,tax_rate:parseFloat(L.tax_rate)||0,tax_amount:parseFloat(L.tax_amount)||0,discount_type:L.discount_type||"",discount_value:parseFloat(L.discount_value)||0,discount_amount:parseFloat(L.discount_amount)||0,currency:L.currency||"PHP",items:Array.isArray(L.items)?L.items.map(Qe=>({id:Qe.id,item_type:Qe.item_type||"Product",name:Qe.name||"",description:Qe.description||"",sku:Qe.sku||"",variant:Qe.variant||"",unit:Qe.unit||"pcs",quantity:parseFloat(Qe.quantity)||1,unit_price:parseFloat(Qe.unit_price)||0,discount_percent:parseFloat(Qe.discount_percent)||0,discount_amount:parseFloat(Qe.discount_amount)||0,line_total:parseFloat(Qe.line_total)||0,sort_order:Qe.sort_order||0})):[]}),E(!0),Z(L.id),k(!0)},G=L=>{if(L.target.checked){const U=Ie.map(xe=>xe.id);ae(U)}else ae([])},K=L=>{ae(U=>U.includes(L)?U.filter(xe=>xe!==L):[...U,L])},ne=L=>{if(!L)return;const U=L.quote_id||"this quote";F({title:"Delete Quote",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:U}),"? This action cannot be undone."]}),confirmLabel:"Delete Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:L.id,name:U}})},J=async()=>{he.length!==0&&F({title:"Delete Quotes",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:he.length})," selected quotes? This action cannot be undone."]}),confirmLabel:`Delete ${he.length} Quote(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",quote_ids:he}})},[Ce,me]=h.useState(!1),V=L=>{if(L.preventDefault(),me(!0),!v){q.error("Unable to determine current user. Please log in again.");return}if(!R.deal_id){q.error("Deal is required.");return}if(!R.assigned_to){q.error("Assigned To is required.");return}const xe=He(R.deal_id),De=R.items.map((ht,Ut)=>({item_type:ht.item_type||"Product",name:ht.name,description:ht.description||null,sku:ht.sku||null,variant:ht.variant||null,unit:ht.unit||null,quantity:parseFloat(ht.quantity)||1,unit_price:parseFloat(ht.unit_price)||0,discount_percent:parseFloat(ht.discount_percent)||0,sort_order:ht.sort_order??Ut})),ie={deal_id:Number(R.deal_id),account_id:xe.accountId?Number(xe.accountId):null,contact_id:xe.contactId?Number(xe.contactId):null,subtotal:parseFloat(R.subtotal)||0,tax_rate:parseFloat(R.tax_rate)||0,tax_amount:parseFloat(R.tax_amount)||0,discount_type:R.discount_type||null,discount_value:parseFloat(R.discount_value)||0,discount_amount:parseFloat(R.discount_amount)||0,total_amount:parseFloat(R.total_amount)||0,currency:R.currency||"PHP",presented_date:R.presented_date||null,validity_days:R.validity_days===""?null:Number(R.validity_days),status:R.status||"Draft",assigned_to:R.assigned_to?Number(R.assigned_to):null,notes:R.notes?.trim()||null,items:De},Pe=_&&W?"update":"create",Qe=Te(R.deal_id),vt=Pe==="create"?{...ie,created_by_id:Number(v)}:ie;F({title:Pe==="create"?"Confirm New Quote":"Confirm Update",message:Pe==="create"?n.jsxs("span",{children:["Are you sure you want to create a quote for"," ",n.jsx("span",{className:"font-semibold",children:Qe}),"?"]}):n.jsxs("span",{children:["Save changes to"," ",n.jsx("span",{className:"font-semibold",children:Qe}),"?"]}),confirmLabel:Pe==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:Pe,payload:vt,targetId:W||null,name:Qe}})},_e=async()=>{if(!z?.action){F(null);return}const{action:L}=z,{type:U,payload:xe,targetId:De,name:ie}=L;M(!0);try{if(U==="create")I(!0),await ce.post("/quotes/admin",xe),q.success("Quote created successfully."),Ee(),await Se();else if(U==="update"){if(!De)throw new Error("Missing quote identifier for update.");I(!0),await ce.put(`/quotes/admin/${De}`,xe),q.success("Quote updated successfully."),Ee(),await Se(),N?.id===De&&S(null)}else if(U==="delete"){if(!De)throw new Error("Missing quote identifier for deletion.");const Pe=N?.id;ye(De),await ce.delete(`/quotes/admin/${De}`),q.success(`Quote "${ie}" deleted successfully.`),await Se(Pe&&Pe!==De?Pe:null),Pe===De&&S(null)}else U==="bulk-delete"&&(await ce.post("/quotes/admin/bulk-delete",{quote_ids:he}),q.success(`Successfully deleted ${he.length} quotes`),ae([]),await Se())}catch(Pe){console.error(Pe);const Qe=U==="create"?"Failed to create quote. Please review the details and try again.":U==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";q.error(Qe),(U==="create"||U==="update")&&I(!1),U==="delete"&&ye(null)}finally{(U==="create"||U==="update")&&I(!1),U==="delete"&&ye(null),M(!1),F(null)}},Ue=()=>{D||F(null)},rt=h.useCallback((L,U)=>{const xe=L?.deal_id??L?.deal?.id??"",De=xe?Number(xe):null,ie=De?He(String(De)):{accountId:"",contactId:""},Pe=L?.account_id??L?.account?.id??ie.accountId??null,Qe=L?.contact_id??L?.contact?.id??ie.contactId??null,vt=L?.total_amount??0,ht=L?.assigned_to??L?.assigned_user?.id??null;return{deal_id:De,account_id:Pe!=null&&String(Pe).trim()!==""?Number(Pe):null,contact_id:Qe!=null&&String(Qe).trim()!==""?Number(Qe):null,total_amount:Number(vt),presented_date:L?.presented_date||null,validity_days:L?.validity_days===""||L?.validity_days===void 0||L?.validity_days===null?null:Number(L.validity_days),status:U,assigned_to:ht!=null&&String(ht).trim()!==""?Number(ht):null,notes:L?.notes?.trim()||null}},[He]),bt=h.useCallback(async()=>{if(!N?.id)return;const L=ki(Me),U=[L,L.toLowerCase()],xe=async De=>ce.patch(`/quotes/admin/${N.id}/status`,{status:De},{headers:{"Content-Type":"application/json"}});try{let De=!1;for(const ie of U)try{await xe(ie),De=!0;break}catch(Pe){if(Pe?.response?.status===422)continue;throw Pe}if(!De){const ie=rt(N,L);if(!ie.deal_id){q.error("Cannot update status: missing deal_id on selected quote.");return}if(!ie.total_amount||ie.total_amount<=0){q.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await ce.put(`/quotes/admin/${N.id}`,ie)}q.success(`Quote status updated to ${L}`),S(null),pe("Overview"),await Se()}catch(De){console.error(De);const ie=De?.response?.data?.message||(De?.response?.data?.errors?Object.values(De.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";q.error(ie)}},[N,Me,Se,rt]),gt=[{label:"Filter by Status",value:"Filter by Status"},...XA.map(L=>({label:L.label,value:L.value}))],_t=z?.action?.type==="delete"?z.action.targetId:null,Wt=N&&(H===N.id||_t===N.id),un=N&&H===N.id,le=N?n.jsx("div",{id:"quoteModalBackdrop",onClick:st,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:L=>L.stopPropagation(),children:[n.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:n.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),n.jsx("button",{onClick:Ze,className:"text-gray-500 hover:text-white transition cursor-pointer",children:n.jsx(Vn,{size:25})})]})}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:Ye(N)}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${LWe(N.status)}`,children:JA(N.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>$(N),disabled:D||z?.action?.type==="update"&&z.action.targetId===N.id,children:[n.jsx(ia,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>ne(N),disabled:!!Wt,children:un?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(zt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-1 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(L=>n.jsx("button",{onClick:()=>pe(L),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${$e===L?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:L},L))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[$e==="Overview"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Quote ID:"}),n.jsx("p",{children:LB(N.quote_id)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Deal:"}),n.jsx("p",{children:Ye(N)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Account:"}),n.jsx("p",{children:B(N)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact:"}),n.jsx("p",{children:fe(N)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Total Amount:"}),n.jsx("p",{children:N.total_amount?`${s}${Number(N.total_amount).toLocaleString()}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Presented Date:"}),n.jsx("p",{children:jg(N.presented_date)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Validity Days:"}),n.jsx("p",{children:N.validity_days!==null&&N.validity_days!==void 0?N.validity_days:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),n.jsx("p",{children:jg(eE(N.presented_date,N.validity_days))||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:JA(N.status)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:N.assigned_user?`${N.assigned_user.first_name} ${N.assigned_user.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:N.creator?`${N.creator.first_name} ${N.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:Sb(N.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:Sb(N.updated_at)||"N/A"})]})]}),N.items&&N.items.length>0&&n.jsx("div",{className:"mt-6",children:n.jsx(nd,{items:N.items,onChange:()=>{},currencySymbol:s,readOnly:!0,taxRate:parseFloat(N.tax_rate)||0,discountType:N.discount_type,discountValue:parseFloat(N.discount_value)||0})})]}),$e==="Notes"&&n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),n.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:N.notes||"No notes available."})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(At,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Quotes"}}}),children:[n.jsx(Ct,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Gt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:Me||ki(N.status)||"Draft",onChange:L=>Le(L.target.value),children:XA.map(L=>n.jsx("option",{value:L.value,children:L.label},L.value))}),n.jsx("button",{onClick:bt,disabled:ki(Me)===ki(N.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${ki(Me)===ki(N.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,it=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[l&&n.jsx(Rt,{message:"Loading quotes..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(xn,{className:"mr-2 text-blue-600"})," Quotes"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto gap-2",children:n.jsxs("button",{onClick:()=>{Ke(),me(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(dn,{className:"mr-2"})," Add Quote"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search quotes",value:Y,onChange:L=>oe(L.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:re,onChange:L=>ee(L.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:gt.map(L=>n.jsx("option",{value:L.value,children:L.label},L.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:Ie.length>0&&he.length===Ie.length,onChange:G,className:"cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),n.jsx("th",{className:"py-3 px-4",children:"Deal"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Expiry Date"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:he.length>0?n.jsx("button",{onClick:J,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${he.length} selected items`,children:n.jsx(zt,{size:18})}):""})]})}),n.jsx("tbody",{children:l?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"Loading quotes..."})}):Re.length>0?Ie.map(L=>{const U=eE(L.presented_date,L.validity_days);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>Fe(L),children:[n.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:xe=>xe.stopPropagation(),children:n.jsx("input",{type:"checkbox",checked:he.includes(L.id),onChange:()=>K(L.id),className:"cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:LB(L.quote_id)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:Ye(L)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-sm text-gray-700 break-words",children:B(L)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:fe(L)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-700",children:L.total_amount?`${s}${Number(L.total_amount).toLocaleString()}`:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${kWe(L.status)}`,children:JA(L.status)})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{children:L.assigned_user?`${L.assigned_user.first_name} ${L.assigned_user.last_name}`:"Unassigned"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-500 text-xs",children:jg(U)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top text-center w-24"})]},L.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"No quotes found."})})})]})}),n.jsx(en,{className:"mt-4",totalItems:Re.length,pageSize:je,currentPage:te,onPrev:ue,onNext:Ne,onPageSizeChange:L=>{Oe(L),ve(1)},pageSizeOptions:[10,20,30,40,50],label:"quotes"})]}),Et=T?n.jsx("div",{id:"modalBackdrop",onClick:Je,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:L=>L.stopPropagation(),children:[n.jsx("button",{onClick:()=>{Ee(),me(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:A||D,children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:_?"Edit Quote":"Add New Quote"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:V,children:[n.jsx(OB,{label:"Deal",name:"deal_id",value:R.deal_id,onChange:L=>{const{accountId:U,contactId:xe}=He(L);Q(De=>({...De,deal_id:L,account_id:U,contact_id:xe}))},items:Array.isArray(c)?c:[],getLabel:L=>`${kB(L?.deal_id??"")} ${L?.name??""}`.trim(),placeholder:"Search deal...",required:!0,isSubmitted:Ce,disabled:A||c.length===0,className:"md:col-span-2"}),n.jsx(DB,{label:"Account",value:Be(R.account_id)||(R.account_id?`Account #${R.account_id}`:""),disabled:!0}),n.jsx(DB,{label:"Contact",value:qe(R.contact_id)||(R.contact_id?`Contact #${R.contact_id}`:""),disabled:!0}),n.jsx("div",{className:"md:col-span-2 mt-2",children:n.jsx(nd,{items:R.items,onChange:L=>Q(U=>({...U,items:L})),currencySymbol:s,readOnly:A,taxRate:R.tax_rate,discountType:R.discount_type,discountValue:R.discount_value,onTotalsChange:L=>{Q(U=>({...U,subtotal:L.subtotal,discount_amount:L.discount_amount,tax_amount:L.tax_amount,total_amount:L.total_amount}))}})}),n.jsxs("div",{className:"md:col-span-2 mt-2 p-4 bg-gray-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Pricing Settings"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Discount Type"}),n.jsxs("select",{value:R.discount_type||"",onChange:L=>Q(U=>({...U,discount_type:L.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",disabled:A,children:[n.jsx("option",{value:"",children:"No Discount"}),n.jsx("option",{value:"percentage",children:"Percentage (%)"}),n.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-600 text-xs mb-1",children:["Discount ",R.discount_type==="percentage"?"%":"Amount"]}),n.jsx("input",{type:"number",value:R.discount_value||"",onChange:L=>Q(U=>({...U,discount_value:L.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:R.discount_type==="percentage"?"100":void 0,step:"0.01",disabled:A||!R.discount_type})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Tax Rate (%)"}),n.jsx("input",{type:"number",value:R.tax_rate||"",onChange:L=>Q(U=>({...U,tax_rate:L.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:"100",step:"0.01",disabled:A})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Total Amount"}),n.jsxs("div",{className:"w-full bg-gray-100 border border-gray-300 rounded-md px-2 py-1.5 text-sm font-medium",children:[s,parseFloat(R.total_amount||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),n.jsx(PB,{label:"Presented Date",name:"presented_date",type:"date",value:R.presented_date,onChange:be,disabled:A}),n.jsx(PB,{label:"Validity Days",name:"validity_days",type:"number",value:R.validity_days,onChange:be,placeholder:"30",disabled:A}),n.jsx(OB,{label:"Assigned To",value:R.assigned_to||"",onChange:L=>Q(U=>({...U,assigned_to:L})),items:Array.isArray(y)?y:[],getLabel:L=>{const U=`${L?.first_name??""} ${L?.last_name??""}`.trim();return U?L?.role?`${U} (${L.role})`:U:L?.email||""},placeholder:"Search assignee...",required:!0,isSubmitted:Ce,disabled:A}),n.jsx($We,{label:"Status",name:"status",value:R.status,onChange:be,options:XA,required:!0,disabled:A,className:"md:col-span-2"}),n.jsx(zWe,{label:"Notes",name:"notes",value:R.notes,onChange:be,placeholder:"Additional details...",rows:3,disabled:A,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{Ee(),me(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:A||D,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:A||D,children:A?"Saving...":_?"Update Quote":"Save Quote"})]})]})]})}):null,Nt=z?n.jsx(FWe,{open:!0,title:z.title,message:z.message,confirmLabel:z.confirmLabel,cancelLabel:z.cancelLabel,variant:z.variant,onConfirm:_e,onCancel:Ue,loading:D}):null;return n.jsxs(n.Fragment,{children:[N?le:it,Et,Nt]})}function PB({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function DB({label:e,value:t,className:a="",disabled:s=!0}){return n.jsxs("div",{className:a,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("input",{type:"text",value:t??"",disabled:s,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function $We({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:l=!1,className:o=""}){const c=a!=null?String(a):"",u=r.some(f=>String(f.value)===c)?c:"";return n.jsxs("div",{className:o,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:u,onChange:s,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(f=>n.jsx("option",{value:String(f.value??""),children:f.label},f.value??f.label))})]})}function OB({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:o,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(RWe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:l,hasError:u})]})}function RWe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,hasError:o=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(v=>String(v.id)===String(t)),y=x?s(x):"",w=h.useMemo(()=>{const v=u.trim().toLowerCase();return(v?e.filter(N=>(s(N)||"").toLowerCase().includes(v)):e).slice(0,l)},[e,u,s,l]);return h.useEffect(()=>{const v=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:y,placeholder:r,onFocus:()=>!i&&d(!0),onChange:v=>{f(v.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${o?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:w.length>0?w.map(v=>{const C=String(v.id),N=s(v),S=String(t)===C;return n.jsx("button",{type:"button",onClick:()=>{a(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:N||"--"},C)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function zWe({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:l=!1,className:o=""}){return n.jsxs("div",{className:o,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function FWe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),n.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}function UWe(){const{userRole:e}=Bs();return n.jsx(Dj,{currentUserRole:e,currentUserId:null})}const MB=["Not started","In progress","Deferred","Completed"],IB={NOT_STARTED:"Not started","NOT STARTED":"Not started","TO DO":"Not started",IN_PROGRESS:"In progress","IN PROGRESS":"In progress",COMPLETED:"Completed",DEFERRED:"Deferred","Not started":"Not started","In progress":"In progress",Completed:"Completed",Deferred:"Deferred","In Progress":"In progress","To Do":"Not started",Review:"Deferred"},RJ=e=>e&&(IB[e]||IB[String(e).toUpperCase()])||"Not started",BWe=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const a=t.getTimezoneOffset();return new Date(t.getTime()-a*60*1e3).toISOString().slice(0,16)},$B=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},HWe=e=>{const t=e.subject?.trim()??"",a=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),RJ(e.status);let r=null,i=null,l=null,o=null,c=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2?o=Number(e.relatedTo2):e.relatedType2==="Quote"&&e.relatedTo2&&(c=Number(e.relatedTo2)));const d=e.assignedTo?Number(e.assignedTo):null,u=l||o||i||r,f=l?"Contact":o?"Deal":i?"Account":r?"Lead":c?"Quote":null;return{title:t,description:a,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:d,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:l,deal_id:o,quote_id:c,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:u,related_type:f}},GWe=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",a=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",l=W=>{if(!W)return"";const Z=String(W).split("-");return Z.length===3?`${Z[0]}-${Z[2]}`:String(W)},o=()=>e.lead?.id||e.lead_id,c=()=>e.account?.id||e.account_id,d=()=>e.contact?.id||e.contact_id,u=()=>e.deal?.id||e.deal_id,f=()=>e.quote?.id||e.quote_id,p=()=>e.task_assign_to?.id||e.assigned_to,x=()=>e.lead?.title||e.lead_id,y=()=>e.account?.name||e.account_id,w=()=>i||e.contact_id,v=()=>e.deal?.name||e.deal_id,C=()=>l(e.quote?.quote_id)||e.id;let N="Lead",S="",T="",k="",_="Lead",E="",A="",I="";const z=c(),F=y(),D=o(),M=x();if(z){N="Account",_="Account",E=F,S=String(z);const W=d(),Z=u(),R=w(),Q=v(),Y=f(),oe=C();W?(T="Contact",A="Contact",I=R,k=String(W)):Z?(A="Deal",T="Deal",I=Q,k=String(Z)):Y&&(A="Quote",T="Quote",I=oe,k=String(Y))}else D?(_="Lead",E=M,N="Lead",S=String(D)):e.related_type==="Account"&&(N="Account",S=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:RJ(e.status),dueDate:s,dateAssigned:r,assignedToId:p()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:a,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:_,relatedTo1Text:E,relatedType2Text:A,relatedTo2Text:I,subject:e.title,relatedType1:N,relatedTo1:S,relatedType2:T,relatedTo2:k}};function WWe(){h.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=Kt(),[a,s]=h.useState("board"),[r,i]=h.useState(!1),[l,o]=h.useState(null),[c,d]=h.useState(!1),[u,f]=h.useState([]),[p,x]=h.useState(!0),[y,w]=h.useState(""),[v,C]=h.useState("Filter by Status"),[N,S]=h.useState("Filter by Priority"),[T,k]=h.useState([]),[_,E]=h.useState(1),[A,I]=h.useState(10),[z,F]=h.useState(null),[D,M]=h.useState(!1),[W,Z]=h.useState([]),R=yt(),Q=Yt(),[Y,oe]=h.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""}),[re,ee]=h.useState(null);h.useEffect(()=>{const B=Q.state?.openTaskModal,fe=Q.state?.initialTaskData,Se=Q.state?.taskID;B?(i(!0),fe&&oe(de=>({...de,...fe})),R(Q.pathname,{replace:!0,state:{}})):Se&&(ee(Se),R(Q.pathname,{replace:!0,state:{}}))},[Q,R]),h.useEffect(()=>{if(re&&u.length>0&&!p){const B=u.find(fe=>fe.id===re);B?ve(B,!0):q.error("Task not found."),ee(null)}},[re,u,p]);const H=async()=>{try{const B=await ce.get("/users/all");k(Array.isArray(B.data)?B.data:[])}catch(B){console.error("Failed to fetch users:",B),q.error("Failed to fetch users.")}},ye=async()=>{try{x(!0);const B=await ce.get("/tasks/all"),fe=Array.isArray(B.data)?B.data:[],Se=fe.map(GWe);console.log("Raw Tasks from API:",fe),console.log("Formatted Tasks:",Se),Se.sort((de,ke)=>{const se=de.createdAt?new Date(de.createdAt):0;return(ke.createdAt?new Date(ke.createdAt):0)-se}),console.log("Fetched Tasks:",Se),f(Se),a==="list"&&E(1)}catch(B){console.error("Failed to load tasks:",B),q.error("Failed to load tasks.")}finally{x(!1)}};h.useEffect(()=>{!t&&e&&(H(),ye())},[t,e]);const te=()=>{o(null),oe({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},ve=(B=null,fe=!1)=>{o(B),d(fe),B?oe({id:B.id,subject:B.title||"",description:B.description||"",priority:B.priority||"Normal",status:B.status||"Not started",dueDate:BWe(B.dueDate),assignedTo:B.assignedToId?String(B.assignedToId):"",notes:B.notes||"",relatedType1Text:B.relatedType1Text||"",relatedTo1Text:B.relatedTo1Text||"",relatedType2Text:B.relatedType2Text||"",relatedTo2Text:B.relatedTo2Text||"",relatedType1:B.relatedType1||"",relatedTo1:B.relatedTo1||"",relatedType2:B.relatedType2||"",relatedTo2:B.relatedTo2||""}):te(),i(!0)},je=()=>{i(!1),o(null),d(!1),te()},Oe=async B=>{const fe=HWe(B);console.log("Request Payload for Save:",fe);try{l&&!c?(await ce.put(`/tasks/${l.id}`,fe),q.success("Task updated successfully.")):(await ce.post("/tasks/create",fe),q.success("Task created successfully.")),i(!1),await ye()}catch(Se){console.error("Failed to save task:",Se);const de=Se.response?.data?.detail||"Failed to save task.";q.error(de)}},$e=B=>{B&&F({title:"Delete Task",message:n.jsxs(n.Fragment,{children:["Are you sure you want to delete ",n.jsx("span",{className:"font-semibold",children:B.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:B.id}})},pe=()=>{if(ge.every(B=>W.includes(B.id)))Z(W.filter(B=>!ge.map(fe=>fe.id).includes(B)));else{const B=ge.map(fe=>fe.id);Z([...new Set([...W,...B])])}},Me=B=>{Z(fe=>fe.includes(B)?fe.filter(Se=>Se!==B):[...fe,B])},Le=async()=>{W.length!==0&&F({title:"Delete Tasks",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:W.length})," selected tasks? This action cannot be undone."]}),confirmLabel:`Delete ${W.length} Task(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",task_ids:W}})},he=async()=>{if(!z?.action){F(null);return}const{action:B}=z;M(!0);try{B.type==="delete"?(await ce.delete(`/tasks/${B.targetId}`),q.success("Task deleted successfully."),await ye()):B.type==="bulk-delete"&&(await ce.delete("/tasks/admin/bulk-delete",{data:{task_ids:B.task_ids}}),q.success(`Successfully deleted ${B.task_ids.length} tasks`),Z([]),await ye())}catch(fe){console.error("Task action failed:",fe),q.error("Failed to delete task.")}finally{M(!1),F(null)}},ae=()=>{D||F(null)},Ae=h.useMemo(()=>{const B=y.trim().toLowerCase();return[...u].sort((Se,de)=>{const ke=Se.createdAt?new Date(Se.createdAt):0;return(de.createdAt?new Date(de.createdAt):0)-ke}).filter(Se=>{const de=B===""||Se.title?.toLowerCase().includes(B)||Se.description?.toLowerCase().includes(B)||Se.assignedToName?.toLowerCase().includes(B)||Se.createdBy?.toLowerCase().includes(B),ke=v==="Filter by Status"||Se.status===v,se=N==="Filter by Priority"||Se.priority===N;return de&&ke&&se})},[u,y,v,N]);h.useEffect(()=>{E(1)},[y,v,N,a,A]),h.useEffect(()=>{if(a==="list"){const B=Ae.length===0?1:Math.ceil(Ae.length/A);_>B&&E(B)}},[Ae.length,_,a,A]);const ge=h.useMemo(()=>{if(a==="board")return Ae;const B=(_-1)*A;return Ae.slice(B,B+A)},[Ae,_,a,A]),Be=h.useMemo(()=>{const B=new Date;return[{title:"To Do",value:u.filter(fe=>fe.status==="Not started").length,icon:zs,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:u.filter(fe=>fe.status==="In progress").length,icon:Ri,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:u.filter(fe=>fe.status==="Completed").length,icon:ba,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:u.filter(fe=>fe.dueDate&&new Date(fe.dueDate)<B&&fe.status!=="Completed").length,icon:Rf,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:u.filter(fe=>fe.priority==="High").length,icon:Ro,color:"text-orange-600",bgColor:"bg-orange-100"}]},[u]),qe=B=>B.dueDate&&new Date(B.dueDate)<new Date&&B.status!=="Completed",Te=B=>{switch(B.status){case"Not started":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Deferred":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},He=B=>{switch(B){case"Not started":return"bg-blue-100 text-blue-700";case"In progress":return"bg-purple-100 text-purple-700";case"Deferred":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},Ye=B=>{switch(B){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&n.jsx(Rt,{message:"Loading tasks..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(Ri,{className:"text-blue-600"})," Tasks Board"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:()=>ve(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[n.jsx(dn,{})," Create Task"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Be.map(B=>n.jsx(VWe,{...B},B.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search tasks",value:y,onChange:B=>w(B.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{value:v,onChange:B=>C(B.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Status"}),MB.map(B=>n.jsx("option",{children:B},B))]}),n.jsxs("select",{value:N,onChange:B=>S(B.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Priority"}),n.jsx("option",{children:"High"}),n.jsx("option",{children:"Normal"}),n.jsx("option",{children:"Low"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${a==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),n.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${a==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&a==="board"&&(Ae.length>0?n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:MB.map(B=>{const fe=ge.filter(Se=>Se.status===B);return n.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative rounded-md",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),n.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:B}),n.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:fe.length})]}),n.jsx("div",{className:`space-y-3 ${fe.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:fe.length>0?fe.map(Se=>n.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${Te(Se)}`,onClick:()=>ve(Se,!0),children:[n.jsxs("div",{className:"text-left flex-1",children:[n.jsx("p",{className:"font-medium text-gray-800 text-sm",children:Se.title}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",Se.priority]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",Se.assignedToName]}),n.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",n.jsx("span",{className:qe(Se)?"text-red-600":"text-gray-600",children:Se.dateAssigned?$B(Se.dateAssigned):""})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[n.jsx("button",{type:"button",onClick:de=>{de.stopPropagation(),ve(Se)},className:"text-blue-500 hover:text-blue-700",children:n.jsx(oa,{})}),n.jsx("button",{type:"button",onClick:de=>{de.stopPropagation(),$e(Se)},className:"text-red-500 hover:text-red-700",children:n.jsx(zt,{})})]})]},Se.id)):n.jsx("div",{className:"text-center py-10 text-gray-500",children:"No tasks"})})]},B)})}):n.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No tasks found."})),!p&&!t&&a==="list"&&n.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:ge.length>0&&ge.every(B=>W.includes(B.id)),onChange:pe})}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),n.jsx("th",{className:"py-3 px-4 font-medium text-center w-24",children:W.length>0?n.jsx("button",{onClick:Le,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${W.length} selected tasks`,children:n.jsx(zt,{size:18})}):""})]})}),n.jsx("tbody",{children:ge.length>0?ge.map(B=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",children:[n.jsx("td",{className:"py-3 px-4",onClick:fe=>fe.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:W.includes(B.id),onChange:()=>Me(B.id)})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",onClick:()=>ve(B,!0),children:B.title}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>ve(B,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${He(B.status||"Not started")}`,children:B.status||"Not started"})}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>ve(B,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Ye(B.priority||"Low")}`,children:B.priority||"Low"})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",onClick:()=>ve(B,!0),children:B.assignedToName||"Unassigned"}),n.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${qe(B)?"text-red-600 font-medium":""}`,onClick:()=>ve(B,!0),children:B.dateAssigned?$B(B.dateAssigned):""}),n.jsx("td",{})]},B.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No tasks found."})})})]})})}),!p&&!t&&a==="list"&&n.jsx(en,{className:"mt-6",totalItems:Ae.length,pageSize:A,currentPage:Ae.length===0?0:_,onPrev:()=>E(B=>Math.max(B-1,1)),onNext:()=>E(B=>Math.min(B+1,Math.max(1,Math.ceil(Ae.length/A)||1))),onPageSizeChange:B=>{I(B),E(1)},pageSizeOptions:[10,20,30,40,50],label:"tasks"}),n.jsx(a0,{isOpen:r,onClose:je,onSave:Oe,onEdit:()=>d(!1),setFormData:oe,formData:Y,isEditing:!c&&!!l,viewMode:c,users:T,currentUser:e,onDelete:$e}),z&&n.jsx(qWe,{open:!0,title:z.title,message:z.message,confirmLabel:z.confirmLabel,cancelLabel:z.cancelLabel,variant:z.variant,onConfirm:he,onCancel:ae,loading:D})]})}function VWe({icon:e,title:t,value:a,color:s,bgColor:r,onClick:i}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function qWe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r,variant:i,loading:l,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),n.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}const zJ=e=>e?e.toUpperCase():"",_b=e=>{const t=zJ(e);return t==="PLANNED"||t==="IN PROGRESS"?"PLANNED":t==="HELD"||t==="DONE"?"HELD":t==="NOT_HELD"||t==="NOT HELD"?"NOT_HELD":"PLANNED"},YWe=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},QWe=e=>{const t=zJ(e);switch(t==="PLANNED"?"PENDING":t==="HELD"?"COMPLETED":t==="NOT_HELD"?"CANCELLED":t){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},tE={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},KWe=()=>{const e=yt(),t=Yt(),[a]=Ds(),s=a.get("id"),r=t.pathname==="/admin/meetings/info";h.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[i,l]=h.useState([]),[o,c]=h.useState(!1),[d,u]=h.useState([]),[f,p]=h.useState(""),[x,y]=h.useState("Filter by Status"),[w,v]=h.useState(!1),[C,N]=h.useState(null),[S,T]=h.useState(1),[k,_]=h.useState(10),[E,A]=h.useState(tE),[I,z]=h.useState(!1),[F,D]=h.useState(null),[M,W]=h.useState(!1),[Z,R]=h.useState(null),[Q,Y]=h.useState(!1),[oe,re]=h.useState(null);h.useEffect(()=>{const ae=t.state?.openMeetingModal,Ae=t.state?.initialMeetingData?.relatedTo||a.get("id"),ge=t.state?.meetingID;ae||Ae?(v(!0),t.state?.initialMeetingData&&A(Be=>({...Be,...t.state.initialMeetingData})),e(t.pathname,{replace:!0,state:{}})):ge&&(re(ge),e(t.pathname,{replace:!0,state:{}}))},[t,a,e]),h.useEffect(()=>{if(oe&&i.length>0&&!o){const ae=i.find(Ae=>Ae.id===oe);ae?N(ae):q.error("Meeting not found."),re(null)}},[oe,i,o]);const ee=async()=>{if(s&&r){const ae=sessionStorage.getItem("meetingDetailData");if(ae)try{const Ae=JSON.parse(ae);if(Ae.id===parseInt(s)){N(Ae),sessionStorage.removeItem("meetingDetailData");return}}catch(Ae){console.error(Ae)}}c(!0);try{const ae=await ce.get("/meetings/admin/fetch-all"),ge=[...Array.isArray(ae.data)?ae.data:[]].sort((Be,qe)=>{const Te=Be?.createdAt?new Date(Be.createdAt).getTime():0;return(qe?.createdAt?new Date(qe.createdAt).getTime():0)-Te});if(l(ge),s&&!C){const Be=ge.find(qe=>qe.id===parseInt(s));Be&&N(Be)}}catch{q.error("Failed to load meetings.")}finally{c(!1)}},H=async()=>{try{const ae=await ce.get("/users/all");u(Array.isArray(ae.data)?ae.data:[])}catch(ae){console.error(ae)}};h.useEffect(()=>{ee(),H()},[]);const ye=ae=>p(ae.target.value),te=h.useMemo(()=>{const ae=f.trim().toLowerCase(),Ae=x.trim().toUpperCase();return i.filter(ge=>{const Be=[ge?.activity,ge?.description,ge?.relatedTo,ge?.assignedTo],qe=ae===""||Be.some(He=>He&&He.toString().toLowerCase().includes(ae)),Te=Ae==="FILTER BY STATUS"||_b(ge.status||"PENDING")===Ae;return qe&&Te})},[i,f,x]),ve=h.useMemo(()=>{const ae=(S-1)*k;return te.slice(ae,ae+k)},[te,S,k]),je=()=>{v(!1),A(tE),z(!1),D(null),W(!1)},Oe=()=>{A(tE),z(!1),D(null),v(!0)},$e=ae=>{let Ae="";if(ae.meet_assign_to?.id)Ae=String(ae.meet_assign_to.id);else if(ae.assignedTo){const Se=d.find(de=>`${de.first_name} ${de.last_name}`===ae.assignedTo);Ae=Se?String(Se.id):""}const ge=Se=>{if(!Se)return"";try{const de=new Date(Se),ke=de.getTimezoneOffset()*6e4;return new Date(de.getTime()-ke).toISOString().slice(0,16)}catch{return""}};let Be="Lead",qe="",Te="Contact",He="";if(ae.lead)Be="Lead",qe=String(ae.lead.id);else if(ae.account)Be="Account",qe=String(ae.account.id),ae.contact?(Te="Contact",He=String(ae.contact.id)):ae.deal&&(Te="Deal",He=String(ae.deal.id));else if(ae.relatedType||ae.related_type){const Se=ae.relatedType||ae.related_type,de=ae.related_to||ae.relatedToId;Se==="Lead"?(Be="Lead",qe=String(de)):(Be="Account",qe=ae.account_id?String(ae.account_id):"")}const Ye={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},B=_b(ae.status),fe=Ye[B]||"Planned";A({subject:ae.subject||ae.activity||"",location:ae.location||"",startTime:ge(ae.start_time||ae.startTime),endTime:ge(ae.end_time||ae.endTime),status:fe,notes:ae.description||ae.notes||"",assignedTo:Ae,relatedType1:Be,relatedTo1:qe,relatedType2:Te,relatedTo2:He}),z(!0),D(ae.id),N(null),v(!0)},pe=ae=>{if(!ae.subject?.trim())return q.error("Subject is required.");if(!ae.startTime)return q.error("Start time is required.");if(ae.endTime&&!(new Date(ae.endTime)-new Date(ae.startTime)>0))return q.error("End time must be after start time.");ae.relatedType1,ae.relatedTo1,ae.relatedType1==="Account"&&ae.relatedType2&&ae.relatedTo2&&(ae.relatedType2,ae.relatedTo2);const Ae={...ae,assignedTo:parseInt(ae.assignedTo),relatedTo1:parseInt(ae.relatedTo1),relatedTo2:parseInt(ae.relatedTo2)},ge=I&&F?"update":"create";R({title:ge==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${ge} "${Ae.subject}"?`,confirmLabel:ge==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:ge,payload:Ae,targetId:F,name:Ae.subject}})},Me=async()=>{if(!Z?.action)return;const{type:ae,payload:Ae,targetId:ge,name:Be}=Z.action;Y(!0);try{ae==="create"?(W(!0),await ce.post("/meetings/create",Ae),q.success(`Meeting "${Be}" created.`),je(),await ee()):ae==="update"?(W(!0),await ce.put(`/meetings/${ge}`,Ae),q.success(`Meeting "${Be}" updated.`),je(),await ee()):ae==="delete"&&(await ce.delete(`/meetings/${ge}`),q.success(`Meeting "${Be}" deleted.`),C?.id===ge&&N(null),await ee())}catch(qe){const Te=qe.response?.data?.detail||"Action failed.";q.error(typeof Te=="string"?Te:JSON.stringify(Te)),console.error(Te)}finally{W(!1),Y(!1),R(null)}},Le=ae=>{R({title:"Delete Meeting",message:`Permanently delete "${ae.activity}"?`,confirmLabel:"Delete",variant:"danger",action:{type:"delete",targetId:ae.id,name:ae.activity}})},he=async(ae,Ae)=>{try{await ce.put(`/meetings/${ae}`,{status:Ae}),q.success("Status updated"),ee(),N(null)}catch{q.error("Failed to update status")}};return r&&s?C?n.jsx(ad,{meeting:C,onClose:()=>{N(null),e("/admin/dashboard")},onEdit:$e,onDelete:Le,onStatusUpdate:he}):n.jsx(Rt,{message:"Loading meeting..."}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[o&&n.jsx(Rt,{message:"Loading meetings..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[n.jsx(Ct,{className:"mr-2 text-blue-600"})," Meetings"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:Oe,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[n.jsx(dn,{className:"mr-2"})," Add Meeting"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[n.jsx(Bt,{className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search meetings",value:f,onChange:ye,className:"w-full outline-none"})]}),n.jsxs("select",{value:x,onChange:ae=>y(ae.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[n.jsx("option",{children:"Filter by Status"}),n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Start Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:ve.length>0?ve.map(ae=>n.jsxs("tr",{onClick:()=>N(ae),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:ae.subject}),n.jsxs("td",{className:"py-3 px-4",children:[ae.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ae.lead.title}),ae.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ae.account.name}),ae.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[ae.contact.first_name," ",ae.contact.last_name]}),ae.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ae.deal.name})]}),n.jsx("td",{className:"py-3 px-4",children:YWe(ae.start_time)}),n.jsxs("td",{className:"py-3 px-4",children:[ae.meet_assign_to.first_name," ",ae.meet_assign_to.last_name]}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${QWe(_b(ae.status))}`,children:_b(ae.status).replace("_"," ")})})]},ae.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),n.jsx(en,{totalItems:te.length,pageSize:k,currentPage:S,onPrev:()=>T(ae=>Math.max(1,ae-1)),onNext:()=>T(ae=>ae+1),onPageSizeChange:_,label:"meetings"}),w&&n.jsx(Gj,{onClose:je,formData:E,setFormData:A,isEditing:I,onSubmit:pe,isSubmitting:M||Q,users:d}),C&&n.jsx(ad,{meeting:C,onClose:()=>N(null),onEdit:$e,onDelete:Le,onStatusUpdate:he}),Z&&n.jsx(XWe,{open:!0,title:Z.title,message:Z.message,confirmLabel:Z.confirmLabel,variant:Z.variant,onConfirm:Me,onCancel:()=>R(null),loading:Q})]})};function XWe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{onClick:c,disabled:l,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),n.jsx("button",{onClick:o,disabled:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${d}`,children:l?"...":s})]})]})})}const ZWe=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"}],JWe=e=>e?String(e).toUpperCase():"",tf=e=>{const t=JWe(e);return t==="PLANNED"||t==="PENDING"?"PLANNED":t==="HELD"||t==="COMPLETED"?"HELD":t==="NOT HELD"||t==="NOT_HELD"||t==="CANCELLED"?"NOT_HELD":"PLANNED"},nE=e=>{const t=tf(e);return t==="PLANNED"?"PLANNED":t==="HELD"?"HELD":t==="NOT_HELD"?"NOT HELD":"--"},RB=e=>{switch(tf(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},zB=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function eVe(){const[e,t]=h.useState(!1),[a,s]=h.useState(null),[r,i]=h.useState(null),[l,o]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(null),[y,w]=h.useState(!1),[v,C]=h.useState(null),[N,S]=h.useState(!1),[T,k]=h.useState(!1),[_,E]=h.useState("PLANNED"),[A,I]=h.useState(!1),[z,F]=h.useState(!1),[D,M]=h.useState(null);Ds();const W=yt(),Z=Yt(),Q={subject:"",call_time:(()=>{const Ee=new Date,Je=Ee.getFullYear(),be=String(Ee.getMonth()+1).padStart(2,"0"),Ke=String(Ee.getDate()).padStart(2,"0");return`${Je}-${be}-${Ke}T08:00`})(),duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[Y,oe]=h.useState(Q);h.useEffect(()=>{const Ee=Z.state,Je=Ee?.callID;if(Je&&!Ee?.openCallModal){M(Je),W(Z.pathname,{replace:!0,state:{}});return}!Ee?.openCallModal||!Ee?.initialCallData||Ee.initialCallData.relatedType1==="Lead"&&Array.isArray(l)&&l.length===0||Ee.initialCallData.relatedType1==="Account"&&(!Array.isArray(l)||l.length===0)||(t(!0),oe(be=>({...be,...Ee.initialCallData,relatedTo1:Ee.initialCallData.relatedTo1?String(Ee.initialCallData.relatedTo1):"",relatedTo2:Ee.initialCallData.relatedTo2?String(Ee.initialCallData.relatedTo2):""})),W(Z.pathname,{replace:!0,state:{}}))},[Z.state,l]),h.useEffect(()=>{if(D&&u.length>0&&!z){const Ee=u.find(Je=>Je.id===D);Ee?s(Ee):q.error("Call not found."),M(null)}},[D,u,z]);const re=async()=>{try{F(!0);const Ee=await ce.get("/calls/admin/fetch-all"),be=[...Array.isArray(Ee.data)?Ee.data:[]].sort((Ke,$)=>{const G=Ke?.created_at?new Date(Ke.created_at):0;return($?.created_at?new Date($.created_at):0)-G});f(be)}catch(Ee){console.error("Error fetching calls:",Ee),q.error("Failed to load calls")}finally{F(!1)}},ee=async()=>{try{const Ee=await ce.get("/users/all");x(Ee.data)}catch(Ee){console.error("Error fetching users: ",Ee)}};h.useEffect(()=>{ee(),re()},[]);const H=[],[ye,te]=h.useState(""),[ve,je]=h.useState("Filter by Status"),[Oe,$e]=h.useState("Filter by Users"),[pe,Me]=h.useState(1),[Le,he]=h.useState(10),ae=u,Ae=Math.max(1,Math.ceil(ae.length/Le)||1);h.useEffect(()=>{Me(1)},[ye,ve,Le]),h.useEffect(()=>{Me(Ee=>{const Je=Math.max(1,Math.ceil(ae.length/Le)||1);return Ee>Je?Je:Ee})},[ae.length,Le]);const ge=h.useMemo(()=>{const Ee=(pe-1)*Le;return ae.slice(Ee,Ee+Le)},[ae,pe,Le]),Be=()=>Me(Ee=>Math.max(Ee-1,1)),qe=()=>Me(Ee=>Math.min(Ee+1,Ae)),Te=u.length,He=u.filter(Ee=>tf(Ee.status)==="PLANNED").length,Ye=u.filter(Ee=>tf(Ee.status)==="HELD").length,B=u.filter(Ee=>tf(Ee.status)==="NOT_HELD").length,fe=[{title:"Total",value:Te,icon:Ls,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:He,icon:zs,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:Ye,icon:ba,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:B,icon:Ps,color:"text-gray-600",bgColor:"bg-gray-100"}],[Se,de]=h.useState("Overview"),ke=Ee=>{const{name:Je,value:be}=Ee.target;oe(Ke=>{const $={...Ke,[Je]:be};return Je==="relatedType1"&&($.relatedTo1="",be==="Lead"?($.relatedType2=null,$.relatedTo2=null,d([])):be==="Account"&&($.relatedType2="Contact")),Je==="relatedType2"&&($.relatedTo2=""),$})};h.useEffect(()=>{const Ee=async()=>{try{o([]);let Je;Y.relatedType1==="Lead"?Je=await ce.get("/leads/admin/getLeads"):Y.relatedType1==="Account"&&(Je=await ce.get("/accounts/admin/fetch-all"));let be=[];if(Je&&Array.isArray(Je.data)?be=Je.data:be=[],y&&Y.relatedTo1)try{let Ke;Y.relatedType1==="Lead"?Ke=await ce.get(`/leads/get/${Y.relatedTo1}`):Y.relatedType1==="Account"&&(Ke=await ce.get(`/accounts/get/${Y.relatedTo1}`)),Ke&&Ke.data&&(be.some(G=>String(G.id)===String(Y.relatedTo1))||(be=[Ke.data,...be]))}catch(Ke){console.error("Error fetching specific related item:",Ke)}o(be)}catch(Je){console.error("Error fetching data:",Je),o([])}};Y.relatedType1&&Ee()},[Y.relatedType1,y,Y.relatedTo1]),h.useEffect(()=>{const Ee=async()=>{try{d([]);let Je;if(Y.relatedType1==="Account"&&Y.relatedTo1)Y.relatedType2==="Contact"?Je=await ce.get(`/contacts/from-acc/${Y.relatedTo1}`):Y.relatedType2==="Deal"&&(Je=await ce.get(`/deals/from-acc/${Y.relatedTo1}`));else{d([]);return}let be=[];if(Je&&Array.isArray(Je.data)?be=Je.data:be=[],y&&Y.relatedTo2)try{let Ke;Y.relatedType2==="Contact"?Ke=await ce.get(`/contacts/get/${Y.relatedTo2}`):Y.relatedType2==="Deal"&&(Ke=await ce.get(`/deals/get/${Y.relatedTo2}`)),Ke&&Ke.data&&(be.some(G=>String(G.id)===String(Y.relatedTo2))||(be=[Ke.data,...be]))}catch(Ke){console.error("Error fetching specific related item:",Ke)}d(be)}catch(Je){console.error("Error fetching data:",Je),d([])}};Y.relatedType2&&Ee()},[Y.relatedType2,Y.relatedTo1,Y.relatedType1,y,Y.relatedTo2]);const[se,We]=h.useState(!1),Re=Ee=>{Ee.preventDefault(),We(!0);const Je=Y.subject;if(!Je||Je.trim()===""){q.error("Subject is required.");return}if(!Y.relatedTo1){q.error(`Please select a ${Y.relatedType1||"Lead/Account"}.`);return}if(!Y.assigned_to){q.error("Subject is required.");return}const Ke={...Y,duration_minutes:Y.duration_minutes?parseInt(Y.duration_minutes,10):null,relatedTo1:Y.relatedTo1?parseInt(Y.relatedTo1,10):null,relatedTo2:Y.relatedType1==="Lead"?null:Y.relatedTo2?parseInt(Y.relatedTo2,10):null,relatedType2:Y.relatedType1==="Lead"?null:Y.relatedType2,assigned_to:Y.assigned_to?parseInt(Y.assigned_to,10):null},$=y&&v?"update":"create",G=(Y.subject||"").trim()||"Untitled Call";i({title:$==="create"?"Confirm New Call":"Confirm Update",message:$==="create"?`Create "${G}"?`:`Save changes to "${G}"?`,confirmLabel:$==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:$,payload:Ke,targetId:v||null,name:G}})},ct=Ee=>s(Ee),Ie=()=>{t(!1),w(!1),C(null)},ue=async()=>{if(!r?.action){i(null);return}const{action:Ee}=r,{type:Je,payload:be,targetId:Ke,name:$}=Ee;k(!0);try{if(Je==="create")S(!0),await ce.post("/calls/create",be),q.success(`Call "${$}" created successfully.`),t(!1),oe(Q),w(!1),C(null),await re();else if(Je==="update"){if(!Ke)throw new Error("Missing call identifier for update.");S(!0),await ce.put(`/calls/${Ke}`,be),q.success(`Call "${$}" updated successfully.`),t(!1),oe(Q),w(!1),C(null),await re()}else if(Je==="delete"){if(!Ke)throw new Error("Missing call identifier for deletion.");await ce.delete(`/calls/${Ke}`),q.success(`Call "${$}" deleted successfully.`),a?.id===Ke&&s(null),await re()}}catch(G){const K=Je==="create"?"Failed to create call. Please review the details and try again.":Je==="update"?"Failed to update call. Please review the details and try again.":"Failed to delete call. Please try again.",ne=G?.response?.data?.detail||K;q.error(ne)}finally{(Je==="create"||Je==="update")&&S(!1),k(!1),i(null)}},Ne=()=>{T||i(null)},Fe=async()=>{if(a?.id)try{I(!0),await ce.put(`/calls/${a.id}`,{status:_}),q.success(`Status updated to ${nE(_)}`),f(Ee=>Array.isArray(Ee)?Ee.map(Je=>Je.id===a.id?{...Je,status:_}:Je):Ee),s(null)}catch(Ee){const Je=Ee.response?.data?.detail||"Failed to update status.";q.error(Je)}finally{I(!1)}};h.useEffect(()=>{a&&E(tf(a.status))},[a]);const Ze=a?n.jsxs("div",{id:"callModalBackdrop",onClick:Ee=>Ee.target.id==="callModalBackdrop"&&s(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[z&&n.jsx(Rt,{message:"Loading call details..."}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),n.jsx("button",{onClick:()=>s(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:n.jsx(Vn,{size:25})})]}),n.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:a.subject}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${RB(a.status)}`,children:nE(a.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const Ee=G=>{if(!G)return"";const K=new Date(G),ne=K.getFullYear(),J=String(K.getMonth()+1).padStart(2,"0"),Ce=String(K.getDate()).padStart(2,"0"),me=String(K.getHours()).padStart(2,"0"),V=String(K.getMinutes()).padStart(2,"0");return`${ne}-${J}-${Ce}T${me}:${V}`},Je=a.lead?"Lead":a.account?"Account":"Lead",be=a.lead?a.lead.id:a.account?a.account.id:null,Ke=Je==="Lead"?null:a.contact?"Contact":a.deal?"Deal":"Contact",$=Je==="Lead"?null:a.contact?a.contact.id:a.deal?a.deal.id:null;oe({subject:a.subject||"",call_time:Ee(a.call_time),duration_minutes:a.duration_minutes?String(a.duration_minutes):"",direction:a.direction||"Outgoing",status:a.status||"Planned",notes:a.notes||"",relatedType1:Je,relatedType2:Ke,relatedTo1:be?String(be):"",relatedTo2:$?String($):"",assigned_to:a.call_assign_to?.id?String(a.call_assign_to.id):""}),w(!0),C(a.id),s(null),t(!0)},children:[n.jsx(ia,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>{const Ee=a.subject||"this call";i({title:"Delete Call",message:`Are you sure you want to permanently delete "${Ee}"? This action cannot be undone.`,confirmLabel:"Delete Call",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:a.id,name:Ee}})},children:[n.jsx(zt,{className:"mr-2"}),"Delete"]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(Ee=>n.jsx("button",{onClick:()=>de(Ee),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${Se===Ee?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:Ee},Ee))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[Se==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsx(ro,{label:"Call Time",value:zB(a.call_time)}),n.jsx(ro,{label:"Duration",value:a.duration_minutes?`${a.duration_minutes} min`:null}),n.jsx(ro,{label:"Direction",value:a.direction||"--"}),n.jsx(ro,{label:"Assigned To",value:`${a.call_assign_to.first_name} ${a.call_assign_to.last_name}`}),a.lead&&n.jsx(ro,{label:"Lead",value:a.lead.title}),a.account&&n.jsx(ro,{label:"Account",value:a.account.name}),a.contact&&n.jsx(ro,{label:"Contact",value:`${a.contact.first_name} ${a.contact.last_name}`}),a.deal&&n.jsx(ro,{label:"Deal",value:a.deal.name}),n.jsx(ro,{label:"Created At",value:zB(a.created_at)})]})}),Se==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Call Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:a.notes||"No notes available."})]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:_,onChange:Ee=>E(Ee.target.value),children:[n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),n.jsx("button",{onClick:Fe,disabled:A,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:A?"Updating...":"Update"})]})]})]})]})]}):null,st=e?n.jsx("div",{id:"modalBackdrop",onClick:Ee=>Ee.target.id==="modalBackdrop"&&Ie(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[n.jsx("button",{onClick:()=>{Ie(),We(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:y?"Edit Call":"Add New Call"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:Re,noValidate:!0,children:[n.jsx(nVe,{label:"Subject",className:"md:col-span-2",name:"subject",value:Y.subject,onChange:ke,isSubmitted:se,required:!0}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("div",{className:"relative w-25",children:[n.jsxs("select",{name:"relatedType1",onChange:ke,value:Y.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:N,children:[n.jsx("option",{value:"Lead",children:"Lead"}),n.jsx("option",{value:"Account",children:"Account"})]}),n.jsx("span",{className:"absolute left-10 md:pl-6 pl-6 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),n.jsx(aE,{items:Array.isArray(l)?l:[],value:Y.relatedTo1??"",placeholder:`Search ${Y.relatedType1||"here"}...`,getLabel:Ee=>Y.relatedType1==="Lead"?Ee.title:Ee.name??"",onChange:Ee=>oe(Je=>({...Je,relatedTo1:Ee})),required:!0,isSubmitted:se,disabled:N})]}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("select",{name:"relatedType2",onChange:ke,value:Y.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:Y.relatedType1==="Lead"||N,children:[n.jsx("option",{value:"Contact",children:"Contact"}),n.jsx("option",{value:"Deal",children:"Deal"})]}),n.jsx(aE,{disabled:Y.relatedType1==="Lead"||N,items:Array.isArray(c)?c:[],value:Y.relatedTo2??"",placeholder:Y.relatedType1==="Lead"?"":Array.isArray(c)&&c.length>0?`Search ${Y.relatedType2||"Contact"}...`:`No ${Y.relatedType2||""} data found`,getLabel:Ee=>Y.relatedType2==="Contact"?`${Ee.first_name??""} ${Ee.last_name??""}`.trim():Ee.name??"",onChange:Ee=>oe(Je=>({...Je,relatedTo2:Ee}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),n.jsx("input",{type:"datetime-local",value:Y.call_time,onChange:ke,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),n.jsxs("div",{className:"w-full",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),n.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[n.jsx("input",{type:"tel",value:Y.duration_minutes,onChange:ke,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),n.jsx("p",{children:"minutes"})]})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),n.jsx(aE,{items:Array.isArray(p)?p:[],value:Y.assigned_to??"",placeholder:"Search an account...",getLabel:Ee=>`${Ee.first_name} ${Ee.last_name}`,onChange:Ee=>oe(Je=>({...Je,assigned_to:Ee})),required:!0,isSubmitted:se})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),n.jsxs("select",{name:"direction",onChange:ke,value:Y.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Incoming",children:"Incoming"}),n.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),n.jsxs("select",{name:"status",onChange:ke,value:Y.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Planned",children:"Planned"}),n.jsx("option",{value:"Held",children:"Held"}),n.jsx("option",{value:"Not held",children:"Not held"})]})]}),n.jsx(aVe,{className:"col-span-2",label:"Notes",value:Y.notes,onChange:ke,name:"notes"}),n.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{Ie(),We(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:N,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:N?"Saving...":y?"Update Call":"Save Call"})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Ls,{className:"mr-2 text-blue-600"})," Calls"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{oe(Q),w(!1),C(null),t(!0),We(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(dn,{className:"mr-2"})," Add Call"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:fe.map(Ee=>n.jsx(tVe,{...Ee},Ee.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[n.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",defaultValue:ye})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{defaultValue:ve,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),ZWe.map(Ee=>n.jsx("option",{value:Ee.value,children:Ee.label},Ee.value))]}),n.jsxs("select",{defaultValue:Oe,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),H.map(Ee=>n.jsx("option",{value:Ee.name,children:Ee.name},Ee.id))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Call Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:z?n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"py-10",children:n.jsx(Rt,{message:"Loading calls..."})})}):ge.length>0?ge.map(Ee=>n.jsxs("tr",{onClick:()=>ct(Ee),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:Ee.subject||"--"}),n.jsxs("td",{className:"py-3 px-4",children:[Ee.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Ee.lead.title}),Ee.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Ee.account.name}),Ee.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[Ee.contact.first_name," ",Ee.contact.last_name]}),Ee.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Ee.deal.name})]}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:Ee.call_time?new Date(Ee.call_time).toLocaleString():"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:Ee?.call_assign_to?`${Ee.call_assign_to.first_name} ${Ee.call_assign_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${RB(Ee.status)}`,children:nE(Ee.status)})})]},Ee.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),n.jsx(en,{totalItems:ae.length,pageSize:Le,currentPage:pe,onPrev:Be,onNext:qe,onPageSizeChange:he,label:"calls"})]}),Ze,st,r&&n.jsx(sVe,{open:!0,title:r.title,message:r.message,confirmLabel:r.confirmLabel,onConfirm:ue,onCancel:Ne,loading:T})]})}function tVe({icon:e,title:t,value:a,color:s,bgColor:r}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:22})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function nVe({label:e,name:t,value:a,onChange:s,placeholder:r="",type:i="text",required:l=!1,disabled:o=!1,isSubmitted:c=!1,className:d=""}){const u=c&&l&&!a;return n.jsxs("div",{className:d,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
        `})]})}function aVe(e){return n.jsxs("div",{className:e.className,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),n.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function ro({label:e,value:t}){return n.jsxs("p",{children:[n.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",n.jsx("br",{}),n.jsx("span",{className:"break-words",children:t||"--"})]})}function sVe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),n.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}function aE({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,required:o=!1,isSubmitted:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),y=e.find(N=>String(N.id)===String(t)),w=y?s(y):"",v=o&&c&&!t,C=h.useMemo(()=>{const N=f.trim().toLowerCase();return(N?e.filter(T=>(s(T)||"").toLowerCase().includes(N)):e).slice(0,l)},[e,f,s,l]);return h.useEffect(()=>{const N=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:w,placeholder:r,onFocus:()=>!i&&u(!0),onChange:N=>{p(N.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${v?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:C.length>0?C.map(N=>{const S=String(N.id),T=s(N),k=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:T||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function rVe(){h.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,t]=h.useState(null),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Actions"),[l,o]=h.useState(1),[c,d]=h.useState(10),u=async()=>{try{const N=await ce.get("/logs/read-all");t(N.data)}catch(N){console.error("Error fetching audit logs:",N)}};h.useEffect(()=>{u()},[]);const f=h.useMemo(()=>{if(!Array.isArray(e))return[];const N=a.trim().toLowerCase(),S=r?.toUpperCase?.()||"ALL";return e.filter(k=>{const _=k.timestamp?new Date(k.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",E=`${k.entity_type||""} ${k.entity_name||k.entity_details?.name||k.entity_details?.title||k.entity_id||""}`,A=`${k.logger?.first_name||""} ${k.logger?.last_name||""}`,I=[_,A,k.action,k.entity_type,E,k.description],z=N===""||I.some(D=>D==null?!1:D.toString().toLowerCase().includes(N)),F=S==="FILTER BY ACTIONS"||(k.action||"").toUpperCase()===S;return z&&F}).sort((k,_)=>{const E=k.timestamp?new Date(k.timestamp).getTime():0;return(_.timestamp?new Date(_.timestamp).getTime():0)-E})},[e,a,r]),p=Math.max(1,Math.ceil(f.length/c)||1);h.useEffect(()=>{o(1)},[a,c]),h.useEffect(()=>{o(N=>{const S=Math.max(1,Math.ceil(f.length/c)||1);return N>S?S:N})},[f.length,c]);const x=h.useMemo(()=>{const N=(l-1)*c;return f.slice(N,N+c)},[f,l,c]);f.length===0||(l-1)*c+1,Math.min(l*c,f.length);const y=()=>o(N=>Math.max(N-1,1)),w=()=>o(N=>Math.min(N+1,p)),v=()=>{if(!f.length){Px.error("No logs to export!");return}const N=["Timestamp","User","Action","Resource","Details"],S=f.map(A=>[new Date(A.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${A.logger?.first_name||""} ${A.logger?.last_name||""}`.trim(),A.action,`${A.entity_type}: ${A.entity_id}`,A.description||""]),T=[N.join(","),...S.map(A=>A.map(I=>`"${String(I).replace(/"/g,'""')}"`).join(","))].join(`
`),k=new Blob([T],{type:"text/csv;charset=utf-8;"}),_=URL.createObjectURL(k),E=document.createElement("a");E.href=_,E.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL(_)},C=N=>{switch((N||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&n.jsx(Rt,{message:"Loading audit logs..."}),n.jsx(Lx,{toastOptions:{duration:1e3}}),n.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[n.jsx(Ct,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),n.jsxs("p",{className:"text-sm text-blue-700",children:[n.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ws,{className:"text-blue-600",size:20}),n.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:v,children:[n.jsx($o,{className:"mr-2"}),"Export Logs"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[n.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search audit logs",value:a,onChange:N=>s(N.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:r,onChange:N=>i(N.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),n.jsx("option",{value:"CREATE",children:"CREATE"}),n.jsx("option",{value:"DELETE",children:"DELETE"}),n.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),n.jsx("th",{className:"py-3 px-4",children:"User"}),n.jsx("th",{className:"py-3 px-4",children:"Action"}),n.jsx("th",{className:"py-3 px-4",children:"Resource"}),n.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),n.jsx("tbody",{children:Array.isArray(f)&&f.length>0?x.map((N,S)=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(N.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:N.name}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${C(N.action)}`,children:N.action})}),n.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[N.entity_type,": ",N.entity_id]}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:N.description})]},S)):n.jsx("tr",{children:n.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),n.jsx(en,{className:"mt-4",totalItems:f.length,pageSize:c,currentPage:l,onPrev:y,onNext:w,onPageSizeChange:d,label:"logs"})]})}const Zj=[{value:"Manager",label:"Manager"},{value:"Sales",label:"Sales"}],Cg={firstName:"",lastName:"",email:"",password:"",role:""},iVe={CEO:"bg-purple-100 text-purple-700",ADMIN:"bg-purple-100 text-purple-700",GROUP_MANAGER:"bg-indigo-100 text-indigo-700",MANAGER:"bg-blue-100 text-blue-700",MARKETING:"bg-yellow-100 text-yellow-700",SALES:"bg-green-100 text-green-700"},ml=e=>e?e.toString().trim().replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/\s+/g,"_").toUpperCase():"",lVe=e=>{const t=ml(e),a=Zj.find(s=>ml(s.value)===t);return a?a.value:e||""},Ak=e=>{const t=ml(e),a=Zj.find(s=>ml(s.value)===t);return a?a.label:typeof e=="string"?e.toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()):"--"},FB=e=>{if(!e)return"--";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",","")},sE=(e,{size:t="sm"}={})=>{const a=ml(e),s=iVe[a]||"bg-gray-100 text-gray-700",r=t==="lg"?"px-3 py-1 text-sm":t==="md"?"px-2.5 py-1 text-sm":"px-2 py-1 text-xs";return n.jsx("span",{className:`${r} font-semibold rounded-md inline-flex items-center justify-center ${s}`,children:Ak(e)})},oVe=(e,t)=>{const a=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${a}${s}`.toUpperCase()||"U"},UB=e=>[...e].sort((t,a)=>{const s=t.created_at?new Date(t.created_at).getTime():0;return(a.created_at?new Date(a.created_at).getTime():0)-s});function cVe(){const{user:e,loading:t}=Kt(),[a,s]=h.useState([]),[r,i]=h.useState(!1),[l,o]=h.useState(""),[c,d]=h.useState(""),[u,f]=h.useState(null),[p,x]=h.useState(!1),[y,w]=h.useState(!1),[v,C]=h.useState(null),[N,S]=h.useState(Cg),[T,k]=h.useState(!1),[_,E]=h.useState(null),[A,I]=h.useState(!1),[z,F]=h.useState(1),[D,M]=h.useState(10),[W,Z]=h.useState("Overview"),[R,Q]=h.useState(""),[Y,oe]=h.useState(!1),re=ml(e?.role);console.log("meow",e);const ee=["ADMIN","CEO","GROUP_MANAGER"].includes(re),H=!t&&ee,ye=h.useMemo(()=>{const se=Zj.filter(We=>ml(We.value)!=="CEO");return[{label:"Filter by Roles",value:""},{label:"CEO",value:"CEO"},...se]},[]),te=h.useCallback(se=>{se&&(s(We=>We.map(Re=>Re.id===se?{...Re,highlight:!0}:Re)),setTimeout(()=>{s(We=>We.map(Re=>Re.id===se?{...Re,highlight:!1}:Re))},2e3))},[]),ve=h.useCallback(async()=>{i(!0);try{const se=await ce.get("/users/all"),We=Array.isArray(se.data)?se.data:[],Re=UB(We);s(Re),f(ct=>ct&&(Re.find(ue=>ue.id===ct.id)||null)),console.log(se.data)}catch(se){console.error("Error fetching users:",se);const We=se.response?.data?.detail||"Failed to load users. Please try again later.";q.error(We)}finally{i(!1)}},[]);h.useEffect(()=>{!t&&!ee&&e&&q.error("You are not authorized to access User Management.")},[ee,t,e]),h.useEffect(()=>{t||!ee||ve()},[t,ee,ve]),h.useEffect(()=>{document.title="Users | Sari-Sari CRM"},[]);const je=h.useMemo(()=>{const se=l.trim().toLowerCase(),We=ml(c);return UB(a.filter(Re=>{if(!Re)return!1;const ct=se===""||[Re.first_name,Re.last_name,`${Re.first_name||""} ${Re.last_name||""}`,Re.email,Ak(Re.role)].filter(Boolean).some(ue=>ue.toString().toLowerCase().includes(se)),Ie=We===""||We==="CEO"&&["CEO","ADMIN"].includes(ml(Re.role))||ml(Re.role)===We;return ct&&Ie}))},[a,l,c]),Oe=Math.max(1,Math.ceil(je.length/D)||1);h.useEffect(()=>{F(1)},[l,c,D]),h.useEffect(()=>{F(se=>{const We=Math.max(1,Math.ceil(je.length/D)||1);return se>We?We:se})},[je.length,D]);const $e=h.useMemo(()=>{const se=(z-1)*D;return je.slice(se,se+D)},[je,z,D]);je.length===0||(z-1)*D+1,Math.min(z*D,je.length);const pe=()=>F(se=>Math.max(se-1,1)),Me=()=>F(se=>Math.min(se+1,Oe)),Le=()=>{S(Cg),w(!1),C(null),x(!0)},he=se=>{f(se),Z("Overview"),Q(se?.is_active?"Active":"Inactive")},ae=se=>{se.target.id==="userModalBackdrop"&&!A&&Ae()},Ae=()=>{f(null)},ge=(se,We)=>{S(Re=>({...Re,[se]:We}))},Be=()=>{const se="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let We="";for(let Re=0;Re<10;Re+=1)We+=se.charAt(Math.floor(Math.random()*se.length));ge("password",We)},qe=()=>{T||A||(x(!1),S(Cg),C(null),w(!1))},Te=se=>{S({firstName:se.first_name||"",lastName:se.last_name||"",email:se.email||"",password:"",role:lVe(se.role)}),w(!0),C(se.id),x(!0),f(null)},He=se=>{E({title:"Delete User",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsxs("span",{className:"font-semibold",children:[se.first_name," ",se.last_name]}),"? This action cannot be undone."]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:se.id,name:`${se.first_name||""} ${se.last_name||""}`.trim()||se.email||"user"}})},Ye=se=>{se.preventDefault();const We=N.firstName.trim(),Re=N.lastName.trim(),ct=N.email.trim(),Ie=N.password.trim(),ue=N.role,Ne=!(y&&v);if(!We||!ct||!ue){q.warn("Please fill in all required fields.");return}if(Ne&&!Ie){q.warn("Please fill in all required fields.");return}if(Ie&&Ie.length<8){q.warn("Password should be at least 8 characters long.");return}const Fe={first_name:We,last_name:Re,email:ct,role:ue};(Ne||Ie)&&(Fe.password=Ie);const Ze=`${We} ${Re}`.trim(),st=Ne?"create":"update";E({title:st==="create"?"Confirm New User":"Confirm User Update",message:st==="create"?n.jsxs("span",{children:["Create user ",n.jsx("span",{className:"font-semibold",children:Ze})," with role"," ",n.jsx("span",{className:"font-semibold",children:Ak(ue)}),"?"]}):n.jsxs("span",{children:["Save changes for"," ",n.jsx("span",{className:"font-semibold",children:Ze||ct}),"?"]}),confirmLabel:st==="create"?"Create User":"Update User",cancelLabel:"Cancel",variant:"primary",action:{type:st,payload:Fe,targetId:v,name:Ze||ct}})},B=async()=>{if(!_?.action){E(null);return}const{action:se}=_,{type:We,payload:Re,targetId:ct,name:Ie}=se;I(!0),(We==="create"||We==="update")&&k(!0);try{if(We==="create"){const Ne=(await ce.post("/users/createuser",Re)).data;await ve(),te(Ne.id),q.success(`User "${Ie}" created successfully.`),x(!1),S(Cg),C(null),w(!1)}else if(We==="update"){if(!ct)throw new Error("Missing user identifier for update.");const Ne=(await ce.put(`/users/updateuser/${ct}`,Re)).data;await ve(),f(null),te(Ne.id),q.success(`User "${Ie}" updated successfully.`),x(!1),S(Cg),C(null),w(!1)}else if(We==="delete"){if(!ct)throw new Error("Missing user identifier for deletion.");await ce.delete(`/users/deleteuser/${ct}`),s(ue=>ue.map(Ne=>Ne.id===ct?{...Ne,is_active:!1}:Ne)),u&&u.id===ct&&(f(null),Q("")),q.success(`User "${Ie}" deactivated successfully.`)}}catch(ue){console.error("User management error:",ue);const Ne=We==="create"?"Failed to create user. Please review the details and try again.":We==="update"?"Failed to update user. Please review the details and try again.":"Failed to delete user. Please try again.",Fe=ue.response?.data?.detail||Ne;q.error(Fe)}finally{(We==="create"||We==="update")&&k(!1),I(!1),E(null)}},fe=()=>{A||E(null)},Se=async()=>{if(!u||!R)return;const se=u.is_active?"Active":"Inactive";if(R===se)return;const We=R==="Active";oe(!0);try{const ct=(await ce.put(`/users/updateuser/${u.id}`,{is_active:We})).data;s(Ie=>Ie.map(ue=>ue.id===ct.id?ct:ue)),f(null),Q(""),q.success(`User status updated to ${R}`)}catch(Re){console.error("Failed to update user status:",Re);const ct=Re.response?.data?.detail||"Failed to update user status. Please try again.";q.error(ct)}finally{oe(!1)}},de=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[(r||t||!H)&&n.jsx(Rt,{}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Iw,{className:"mr-2 text-blue-600"}),"User Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:Le,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(Wn,{className:"mr-2"})," Add User"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search users",value:l,onChange:se=>o(se.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:c,onChange:se=>d(se.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:ye.map(se=>n.jsx("option",{value:se.value,children:se.label},se.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Fullname"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Role"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:3,children:"Loading users..."})}):je.length===0?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-400",colSpan:4,children:"No users found."})}):$e.map(se=>n.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${se.highlight?"bg-green-50":""} ${se.is_active?"":"opacity-60 bg-gray-50"}`,children:[n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>he(se),children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline text-sm",children:[se.first_name," ",se.last_name]})}),n.jsx("td",{className:"py-3 px-4 cursor-pointer text-sm",onClick:()=>he(se),children:se.email}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>he(se),children:sE(se.role)}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>he(se),children:n.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-md ${se.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:se.is_active?"Active":"Inactive"})})]},se.id))})]})}),n.jsx(en,{className:"mt-4",totalItems:je.length,pageSize:D,currentPage:z,onPrev:pe,onNext:Me,onPageSizeChange:M,label:"users"})]}),ke=u?n.jsx("div",{id:"userModalBackdrop",onClick:ae,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in p-4 sm:p-6 md:p-8 font-inter relative",children:[n.jsx("div",{className:"flex justify-end w-full",children:n.jsx("button",{onClick:Ae,className:"text-gray-500 hover:text-gray-700 transition mb-5 cursor-pointer",children:n.jsx(Vn,{size:30})})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7 mb-4 lg:mb-6 md:mb-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[u.profile_picture?n.jsx("img",{src:u.profile_picture,alt:`${u.first_name} ${u.last_name}`,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover border border-gray-200 shadow-sm"}):n.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-200 text-gray-700 flex items-center justify-center text-lg sm:text-xl font-semibold border border-gray-200 shadow-sm",children:oVe(u.first_name,u.last_name)}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[u.first_name," ",u.last_name]}),n.jsx("p",{className:"text-sm text-gray-500 break-all",children:u.email})]})]}),sE(u.role,{size:"md"})]}),!["CEO","ADMIN","GROUP MANAGER","GROUP_MANAGER"].includes(u.role.toUpperCase())&&n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Te(u),disabled:A,children:[n.jsx(oa,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>He(u),disabled:A,children:[n.jsx(zt,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 mb-6"}),n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview"].map(se=>n.jsx("button",{onClick:()=>Z(se),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${W===se?"bg-[#5c636d] text-white border-white":"text-white hover:bg-[#5c636d]"}`,children:se},se))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsx("div",{className:"lg:col-span-3",children:W==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:u.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Role:"}),n.jsx("p",{children:sE(u.role,{size:"sm"})})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:u.is_active?"Active":"Inactive"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Auth Provider:"}),n.jsx("p",{children:u.auth_provider?u.auth_provider.toString().replace(/\b\w/g,se=>se.toUpperCase()):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:u.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:u.company?.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company Number:"}),n.jsx("p",{children:u.company?.company_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Related to CEO:"}),n.jsx("p",{children:u.manager?`${u.manager.first_name} ${u.manager.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:FB(u.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Login:"}),n.jsx("p",{children:u.last_login?FB(u.last_login):"Never"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Profile Picture:"}),n.jsx("p",{children:u.profile_picture?n.jsx("a",{href:u.profile_picture,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline break-all",children:"View image"}):"N/A"})]})]})})}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsx("div",{className:"flex flex-col gap-2 w-full",children:n.jsxs("button",{type:"button",onClick:()=>{if(!u.email){alert("No email address available");return}const se=encodeURIComponent(u.email),We=encodeURIComponent(""),Re=encodeURIComponent(""),ct=`https://mail.google.com/mail/?view=cm&fs=1&to=${se}&su=${We}&body=${Re}`;window.open(ct,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Zn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]})})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:R||(u.is_active?"Active":"Inactive"),onChange:se=>Q(se.target.value),children:[n.jsx("option",{value:"Active",children:"Active"}),n.jsx("option",{value:"Inactive",children:"Inactive"})]}),n.jsx("button",{onClick:Se,disabled:Y||R===(u.is_active?"Active":"Inactive"),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Y||R===(u.is_active?"Active":"Inactive")?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:Y?"Updating...":"Update"})]})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[de,ke,n.jsx(dVe,{open:p,isEditing:y,isSubmitting:T,confirmProcessing:A,formData:N,onClose:qe,onSubmit:Ye,onChange:ge,onGeneratePassword:Be}),n.jsx(uVe,{open:!!_,title:_?.title,message:_?.message,confirmLabel:_?.confirmLabel,cancelLabel:_?.cancelLabel,variant:_?.variant,loading:A,onConfirm:B,onCancel:fe})]})}function dVe({open:e,isEditing:t,isSubmitting:a,confirmProcessing:s,formData:r,onClose:i,onSubmit:l,onChange:o,onGeneratePassword:c}){if(!e)return null;const d=a||s;return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-lg border border-gray-200 p-6 sm:p-8 relative overflow-y-auto max-h-[90vh]",children:[n.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:d,children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-6 text-center",children:t?"Edit User":"Add New User"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:l,children:[n.jsx(Ab,{label:"First Name",value:r.firstName,onChange:u=>o("firstName",u),placeholder:"John",required:!0,disabled:d}),n.jsx(Ab,{label:"Last Name",value:r.lastName,onChange:u=>o("lastName",u),placeholder:"Doe",required:!0,disabled:d}),n.jsx(Ab,{label:"Email",type:"email",value:r.email,onChange:u=>o("email",u),placeholder:"john.doe@company.com",required:!0,disabled:d||t}),n.jsx(Ab,{label:"Role",type:"select",value:r.role,onChange:u=>o("role",u),options:[{value:"",label:"Select role"},...Zj],required:!0,disabled:d}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Password"}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[n.jsx("input",{type:"text",value:r.password,onChange:u=>o("password",u.target.value),placeholder:t?"Leave blank to keep current password":"Enter or generate password",required:!t,disabled:d,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"}),n.jsx("button",{type:"button",onClick:c,className:"flex items-center justify-center px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-60",disabled:d,children:"Generate"})]}),t?n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Setting a password will reset the user's credentials; leave it blank to keep the current password."}):n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long."})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:i,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:d,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:d,children:a?"Saving...":t?"Update User":"Save User"})]})]})]})})}function Ab({label:e,type:t="text",value:a,onChange:s,placeholder:r,options:i=[],required:l=!1,disabled:o=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t==="select"?n.jsx("select",{value:a??"",onChange:c=>s(c.target.value),required:l,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100",children:i.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))}):n.jsx("input",{type:t,value:a??"",onChange:c=>s(c.target.value),placeholder:r,required:l,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"})]})}function uVe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-black hover:bg-gray-800 border border-black";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("div",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),n.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}function mVe(){return n.jsxs(Eae,{children:[n.jsx(xse,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"colored",className:"z-[9999]"}),n.jsxs(aae,{children:[n.jsx(xt,{path:"/",element:n.jsx(yie,{})}),n.jsx(xt,{path:"/header",element:n.jsx(BH,{})}),n.jsx(xt,{path:"/signup",element:n.jsx(xde,{})}),n.jsx(xt,{path:"/login",element:n.jsx(bde,{})}),n.jsx(xt,{path:"/forgot-password",element:n.jsx(Nde,{})}),n.jsxs(xt,{path:"/admin",element:n.jsx(Zh,{requiredRole:"ceo",children:n.jsx(Sde,{})}),children:[n.jsx(xt,{index:!0,element:n.jsx(ti,{to:"dashboard",replace:!0})}),n.jsx(xt,{path:"dashboard",element:n.jsx(l1e,{})}),n.jsx(xt,{path:"accounts",element:n.jsx(_1e,{})}),n.jsx(xt,{path:"contacts",element:n.jsx(k1e,{})}),n.jsx(xt,{path:"leads",element:n.jsx($1e,{})}),n.jsx(xt,{path:"leads/:leadID",element:n.jsx(Dq,{})}),n.jsx(xt,{path:"audit",element:n.jsx(ECe,{})}),n.jsx(xt,{path:"targets",element:n.jsx(LIe,{})}),n.jsx(xt,{path:"quotes",element:n.jsx(RIe,{})}),n.jsx(xt,{path:"users",element:n.jsx(VIe,{})}),n.jsx(xt,{path:"manage-account",element:n.jsx(KIe,{})}),n.jsx(xt,{path:"company-details",element:n.jsx(TRe,{})}),n.jsx(xt,{path:"deals",element:n.jsx(XIe,{})}),n.jsx(xt,{path:"deals/info",element:n.jsx(Jx,{})}),n.jsx(xt,{path:"deals/quickaction",element:n.jsx(WX,{})}),n.jsx(xt,{path:"tasks",element:n.jsx(cRe,{})}),n.jsxs(xt,{path:"/admin/territory",children:[n.jsx(xt,{index:!0,element:n.jsx(Sc,{})}),n.jsx(xt,{path:":id",element:n.jsx(Sc,{})})]}),n.jsx(xt,{path:"calls",element:n.jsx(k7,{})}),n.jsx(xt,{path:"calls/info",element:n.jsx(k7,{})}),n.jsx(xt,{path:"meetings",element:n.jsx(L7,{})}),n.jsx(xt,{path:"meetings/info",element:n.jsx(L7,{})})]}),n.jsxs(xt,{path:"/sales",element:n.jsx(Zh,{requiredRole:"sales",children:n.jsx(LRe,{})}),children:[n.jsx(xt,{index:!0,element:n.jsx(ti,{to:"overview",replace:!0})}),n.jsx(xt,{path:"overview",element:n.jsx(oze,{})}),n.jsx(xt,{path:"accounts",element:n.jsx(uze,{})}),n.jsx(xt,{path:"contacts",element:n.jsx(gze,{})}),n.jsx(xt,{path:"leads",element:n.jsx(Nze,{})}),n.jsx(xt,{path:"leads/info",element:n.jsx(EZ,{})}),n.jsx(xt,{path:"leads/convert",element:n.jsx(Tze,{})}),n.jsx(xt,{path:"deals",element:n.jsx(kze,{})}),n.jsx(xt,{path:"deals/info",element:n.jsx(Ize,{})}),n.jsx(xt,{path:"deals/quickaction",element:n.jsx($ze,{})}),n.jsx(xt,{path:"quotes",element:n.jsx(Gze,{})}),n.jsx(xt,{path:"targets",element:n.jsx(Qze,{})}),n.jsx(xt,{path:"audit",element:n.jsx(Kze,{})}),n.jsx(xt,{path:"manage-account",element:n.jsx(_y,{})}),n.jsxs(xt,{path:"/sales/territory",children:[n.jsx(xt,{index:!0,element:n.jsx(Sc,{})}),n.jsx(xt,{path:":id",element:n.jsx(Sc,{})})]}),n.jsx(xt,{path:"meetings",element:n.jsx(rFe,{})}),n.jsx(xt,{path:"calls",element:n.jsx(cFe,{})}),n.jsx(xt,{path:"tasks",element:n.jsx(eFe,{})})]}),n.jsxs(xt,{path:"/manager",element:n.jsx(Zh,{requiredRole:"manager",children:n.jsx(gFe,{})}),children:[n.jsx(xt,{index:!0,element:n.jsx(ti,{to:"dashboard",replace:!0})}),n.jsx(xt,{path:"dashboard",element:n.jsx(VFe,{})}),n.jsx(xt,{path:"accounts",element:n.jsx(QFe,{})}),n.jsx(xt,{path:"contacts",element:n.jsx(JFe,{})}),n.jsx(xt,{path:"leads",element:n.jsx(iUe,{})}),n.jsx(xt,{path:"leads/info",element:n.jsx(IZ,{})}),n.jsx(xt,{path:"leads/convert",element:n.jsx(fUe,{})}),n.jsx(xt,{path:"deals",element:n.jsx(hUe,{})}),n.jsx(xt,{path:"deals/info",element:n.jsx(vUe,{})}),n.jsx(xt,{path:"deals/quickaction",element:n.jsx(wUe,{})}),n.jsx(xt,{path:"quotes",element:n.jsx(EUe,{})}),n.jsx(xt,{path:"targets",element:n.jsx(DUe,{})}),n.jsx(xt,{path:"meetings",element:n.jsx(KUe,{})}),n.jsx(xt,{path:"audit",element:n.jsx(OUe,{})}),n.jsx(xt,{path:"calls",element:n.jsx($Ue,{})}),n.jsx(xt,{path:"tasks",element:n.jsx(WUe,{})}),n.jsxs(xt,{path:"/manager/territory",children:[n.jsx(xt,{index:!0,element:n.jsx(Sc,{})}),n.jsx(xt,{path:":id",element:n.jsx(Sc,{})})]}),n.jsx(xt,{path:"users",element:n.jsx(t7e,{})}),n.jsx(xt,{path:"manage-account",element:n.jsx(_y,{})})]}),n.jsx(xt,{children:n.jsxs(xt,{path:"/marketing",element:n.jsx(Zh,{requiredRole:"marketing",children:n.jsx(r7e,{})}),children:[n.jsx(xt,{index:!0,element:n.jsx(ti,{to:"dashboard",replace:!0})}),n.jsx(xt,{path:"dashboard",element:n.jsx(aGe,{})}),n.jsx(xt,{path:"accounts",element:n.jsx(sGe,{})}),n.jsx(xt,{path:"contacts",element:n.jsx(iGe,{})}),n.jsx(xt,{path:"leads",element:n.jsx(mGe,{})}),n.jsx(xt,{path:"leads/info",element:n.jsx(LJ,{})}),n.jsx(xt,{path:"leads/convert",element:n.jsx(kJ,{})}),n.jsx(xt,{path:"tasks",element:n.jsx(pGe,{})}),n.jsx(xt,{path:"campaigns",element:n.jsx(bGe,{})}),n.jsx(xt,{path:"templates",element:n.jsx(wGe,{})}),n.jsx(xt,{path:"manage-account",element:n.jsx(_y,{})})]})}),n.jsxs(xt,{path:"/group-manager",element:n.jsx(Zh,{requiredRole:"group manager",children:n.jsx(jGe,{})}),children:[n.jsx(xt,{index:!0,element:n.jsx(ti,{to:"dashboard",replace:!0})}),n.jsx(xt,{path:"dashboard",element:n.jsx(eWe,{})}),n.jsx(xt,{path:"accounts",element:n.jsx(aWe,{})}),n.jsx(xt,{path:"contacts",element:n.jsx(lWe,{})}),n.jsx(xt,{path:"leads",element:n.jsx(hWe,{})}),n.jsx(xt,{path:"leads/info",element:n.jsx($J,{})}),n.jsx(xt,{path:"leads/convert",element:n.jsx(wWe,{})}),n.jsx(xt,{path:"deals",element:n.jsx(jWe,{})}),n.jsx(xt,{path:"deals/info",element:n.jsx(TWe,{})}),n.jsx(xt,{path:"deals/quickaction",element:n.jsx(Wj,{})}),n.jsx(xt,{path:"quotes",element:n.jsx(IWe,{})}),n.jsx(xt,{path:"targets",element:n.jsx(UWe,{})}),n.jsx(xt,{path:"tasks",element:n.jsx(WWe,{})}),n.jsxs(xt,{path:"/group-manager/territory",children:[n.jsx(xt,{index:!0,element:n.jsx(Sc,{})}),n.jsx(xt,{path:":id",element:n.jsx(Sc,{})})]}),n.jsx(xt,{path:"meetings",element:n.jsx(KWe,{})}),n.jsx(xt,{path:"calls",element:n.jsx(eVe,{})}),n.jsx(xt,{path:"audit",element:n.jsx(rVe,{})}),n.jsx(xt,{path:"users",element:n.jsx(cVe,{})}),n.jsx(xt,{path:"manage-account",element:n.jsx(_y,{})})]})]})]})}sne.createRoot(document.getElementById("root")).render(n.jsx(h.StrictMode,{children:n.jsx(mVe,{})}));
